const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./statsWorker-CKRwxPm0.js","./utils-XJ1T__tY.js","./quantizationUtils-DeBnMDmu.js","./heatmapUtils-NTzr8GZp.js","./utils-CGzR1Xtt.js","./utils-DP5uPz0P.js","./ClassBreaksDefinition-PCWmsrmg.js","./geometryEngineWorker-Cwq6XN0Y.js","./geometryEngineJSON-D2MUeDZI.js","./json-Wa8cmqdu.js","./CSVSourceWorker-CbO_n6D9.js","./date-M6n_RqpC.js","./OptimizedFeature-7juV2tZm.js","./OptimizedGeometry-vU5jWBvU.js","./FeatureStore-CSlCqony.js","./featureConversionUtils-DoC7B3A2.js","./OptimizedFeatureSet-Blu9Ckm7.js","./BoundsStore-CqIMR90U.js","./PooledRBush-MooUbwUC.js","./timeSupport-4nmKr68x.js","./SnappingCandidate-xj0n6h40.js","./centroid-DdLmOD72.js","./QueryEngine-IKvsTXYb.js","./LRUCache-pAqnhOsq.js","./WhereClause-BO6P4l1i.js","./TimeOnly-BJnd6TEv.js","./UnknownTimeZone-Cjv2gi-C.js","./QueryEngineCapabilities-CTDe3LlQ.js","./FieldsIndex-Bjg3eA_S.js","./number-DZZl56gD.js","./clientSideDefaults-CukrBNnE.js","./defaultsJSON-GKolV7NZ.js","./EdgeProcessingWorker-uLqmOrxN.js","./workerHelper-CR7-tLon.js","./InterleavedLayout-DapSkrn-.js","./BufferView-D7rTj7nO.js","./types-D0PSWh4d.js","./Util-D3WFoRjI.js","./edgeProcessing-kXEV4aNV.js","./deduplicate-BRGImMLi.js","./Indices-CDfjiMVj.js","./VertexAttribute-BnAa5VW0.js","./glUtil-C6KhMg1m.js","./enums-BlUEVwJR.js","./VertexElementDescriptor-BOD-G50G.js","./Normals-CaeqCbr7.js","./ElevationSamplerWorker-C7LJ2kyo.js","./vertexSpaceConversion-CMBtQgFR.js","./spatialReferenceEllipsoidUtils-DfobcDUq.js","./computeTranslationToOriginAndRotation-B1gLm2pX.js","./vec3-BZAVlszX.js","./projection-DfoxLsLx.js","./DoubleArray-UXJnwWGc.js","./vec4-CB19uIrr.js","./FeatureServiceSnappingSourceWorker-BVb9_B_p.js","./symbologySnappingCandidates-Dpve1mNt.js","./pbfQueryUtils-D7UGG6Td.js","./pbf-CEYKCTdB.js","./query-Dg0JyN0I.js","./queryZScale-BXApFFgO.js","./ByteSizeUnit-BsxeN7wM.js","./GeoJSONSourceWorker-D_9sHWd7.js","./geojson-DG9SG0GU.js","./sourceUtils-Cc405C2z.js","./MemorySourceWorker-BEkpQ2S9.js","./objectIdUtils-4dd1rf9p.js","./PBFDecoderWorker-Do651Bm7.js","./dehydratedFeatures-8ibN4_wD.js","./FeaturePipelineWorker-BDv50mHA.js","./definitions-Y_v3njP4.js","./AttributeStore-BqZyTXj5.js","./LabelMetric-BX4Cxpgy.js","./enums-BRXbslMp.js","./Texture-BjUzSnJr.js","./Program-DDsdwrVN.js","./BufferObject-Dtd0vzOu.js","./BoundingBox-DD1zHGe8.js","./UpdateTracking2D-B5DpfoKL.js","./BindType-BmZEZMMh.js","./highlightReasons-B4N7T4kB.js","./labelUtils-C4iNx9oT.js","./CIMSymbolHelper-CY__-kW6.js","./BidiEngine-BwB1Df7c.js","./fontUtils-DnX1oK2e.js","./GeometryUtils-B2Qq2Dwi.js","./utils-BE8joJvK.js","./Rect-CUzevAry.js","./defaults-fOuW8gwA.js","./tileUtils-B7X19rIS.js","./MeshWriterRegistry-D_pgMTmW.js","./PieChartMeshWriter-B57iA92g.js","./TurboLine-P0UcCAtm.js","./earcut-DbRqQWyy.js","./constants-D5zmR9t2.js","./grouping-D19trtTG.js","./ogcFeatureUtils-CAbkzJBD.js","./CircularArray-CujHzHWW.js","./createConnection-AVAtqz-i.js","./PointCloudWorker-PwXEWsgN.js","./vec3f32-nZdmKIgz.js","./PointCloudUniqueValueRenderer-Ci9uJmGP.js","./ColorStop-CqMXhorb.js","./I3SBinaryReader-qr-rskwW.js","./orientedBoundingBox-BJjR6-FR.js","./RasterWorker-BhJGbdG2.js","./dataUtils-yXCaW0rn.js","./pixelRangeUtils-DR2RxTkt.js","./RasterSymbolizer-R4KdFj71.js","./colorUtils-BlCLzs4t.js","./PolynomialTransform-BKPwLBv5.js","./colorRamps-4yJNyWKx.js","./rasterProjectionHelper-43RoyB55.js","./SceneLayerSnappingSourceWorker-BwVlYANU.js","./lineSegment-CMQTKrER.js","./Octree-0huRLiDU.js","./SceneLayerWorker-BkzdxvlT.js","./I3SUtil-CFL3zrhX.js","./edgeUtils-CBzT16wJ.js","./floatRGBA-Beo2b9N5.js","./symbolColorUtils-4G6BTQRD.js","./interfaces-B8ge7Jg9.js","./NormalAttribute.glsl-Bd6ePXD7.js","./WFSSourceWorker-ZN3uDHS6.js","./wfsUtils-D0YmmbIF.js","./xmlUtils-CtUoQO7q.js","./WorkerTileHandler-Vgl4PJRo.js","./enums-BRzLM11V.js","./config-MDUrh2eL.js","./StyleDefinition-BK3ROBTO.js","./SourceLayerData-DJ9BS4B4.js","./StyleRepository-D0w0GpTk.js","./Popup-D7zp3nwV.js","./unitFormatUtils-BXaJcNjA.js","./AttachmentInfo-k_mTVEZG.js","./RelationshipQuery-CWq1d8EN.js","./featureUtils-BSY7KdAb.js","./symbolUtils-gs7zz1py.js","./utils-Cp7l-Qiq.js","./cimSymbolUtils-CiZiLm4M.js","./jsonUtils-DGzEHX8a.js","./UniqueValueRenderer-DoQjGRE5.js","./sizeVariableUtils-Cmcuvw-4.js","./visualVariableUtils-Cdb7Kq7r.js","./jsonUtils-C2l4B_cE.js","./styleUtils-Dv2EsbEO.js","./Version-DJsGRXWf.js","./OverrideHelper-ClkM4CZ1.js","./webStyleSymbolUtils-NOGravR0.js","./devEnvironmentUtils-D6qIi8Ky.js","./executeQueryJSON-uMDcT6zK.js","./FeatureSet-ClbNh9OS.js","./TopFeaturesQuery-BKhHgI5c.js","./FeatureLayer-BP8nxvLb.js","./MultiOriginJSONSupport-BlAwjy_L.js","./commonProperties-DbjJOfHD.js","./FeatureLayerBase-C60xzZzS.js","./featureLayerUtils-ChIFdxrX.js","./LayerFloorInfo-BFRsBa1U.js","./Relationship-AfZQ8hC5.js","./serviceCapabilitiesUtils-Bw0rlVLE.js","./editsZScale-t2eejO0b.js","./APIKeyMixin-DdhuDYwL.js","./ArcGISService-CcXrOqVK.js","./CustomParametersMixin-DLUUPWS3.js","./EditBusLayer-Z0o3093x.js","./FeatureEffectLayer-B8mIeO1h.js","./FeatureEffect-C7S4JiNp.js","./FeatureReductionLayer-ChbPfE6a.js","./FeatureReductionSelection-C2fvQ0bE.js","./labelingInfo-xEuuUnSV.js","./MD5-C9MwAd2G.js","./OperationalLayer-B-J5coPH.js","./OrderedLayer-YkoaksA8.js","./OrderByInfo-BunYYZ3s.js","./PortalLayer-B7KsXAi1.js","./portalItemUtils-BCfDAbUL.js","./RefreshableLayer-CeoHeJiI.js","./TemporalLayer-Ba9mHalh.js","./TimeInfo-DDzm1g7J.js","./FeatureTemplate-CEfaRdgX.js","./FeatureType-CDkdd-Wk.js","./fieldProperties-CRKzdtOw.js","./versionUtils-CHsRo-RE.js","./styleUtils-CNsOzTDI.js","./popupUtils-BYVjdumh.js","./interfaces-CL2NbQte.js","./ElevationLayer-dYCFmh9l.js","./ArcGISCachedService-CX9rUPdH.js","./TileInfoTilemapCache-B6CmZF1H.js","./TilemapCache-VS6IeOYO.js","./WorkerHandle-Hp7g607k.js","./layersCreator-BNFmrHi6.js","./portalLayers-C0J5xtxI.js","./associatedFeatureServiceUtils-IR5ip5Hi.js","./fetchService-BVU3vCsW.js","./arcgisLayers-D_8ckCaT.js","./arcadeUtils-DFEUQ7TH.js","./ImmutableArray-BPVd6ESQ.js","./webglDeps-5GIKjoOS.js","./NestedMap-DgiGbX8E.js","./ProgramTemplate-CwsURtYf.js","./VertexArrayObject-DSiuLT7k.js","./mapViewDeps-B-dDO8Py.js","./SDFHelper-DGcXVGeT.js","./Container-BHyIqe9V.js","./EffectView-xdWvf2J0.js","./WGLContainer-BWXDcjjt.js","./vec4f32-CjrfB-0a.js","./MagnifierPrograms-CBJGbF8g.js","./testSVGPremultipliedAlpha-2YXISXie.js","./RenderingContext-Be_MKB86.js","./renderState-DVuP8FS-.js","./basicInterfaces-DngWxyLO.js","./doublePrecisionUtils-B0owpBza.js","./CIMResourceManager-EPX0o-_I.js","./imageUtils-DfzNVhIJ.js","./rasterizingUtils-rH81TMcT.js","./utils-CrW5C64_.js","./FeatureCommandQueue-D8t0EUoQ.js","./GraphicsView2D-dxjiOMsf.js","./normalizeUtilsSync-BuSxwAtS.js","./GraphicContainer-Dde5PEzo.js","./AGraphicContainer-DCIE21Ap.js","./TechniqueInstance-BfDw3KsI.js","./TileContainer-CeQi5mdh.js","./requestImageUtils-wGhnx8WQ.js","./TileLayerView2D-SBjoBotU.js","./imageUtils-CThTh0a_.js","./Bitmap-DNzEY9pm.js","./LayerView2D-BVUnvPSB.js","./HighlightGraphicContainer-Bifb2Uon.js","./LayerView-Dyxjvlzf.js","./RefreshableLayerView-DrkgiCbv.js","./MapServiceLayerViewHelper-DtOuf7Gh.js","./sublayerUtils-CsQjXgeP.js","./popupUtils-vPBZ24BA.js","./FeatureLayerView2D-DITXv_oo.js","./timeSupport-BuPGwwv2.js","./featureReductionUtils-Caulfaw_.js","./HighlightCounter-Czt5BvO2.js","./BaseDynamicLayerView2D-CP8lGA8N.js","./BitmapContainer-C1NznjUW.js","./ExportStrategy-T9ZLbXA1.js","./CatalogLayerView2D-DalTGeIq.js","./CatalogDynamicGroupLayerView2D-DRXGa5a1.js","./CatalogFootprintLayerView2D-CNy4SiDF.js","./GeoRSSLayerView2D-Cl2em_yX.js","./GraphicsLayerView2D-DXR5ZtDA.js","./GroupLayerView2D-B68XeEJH.js","./ImageryLayerView2D-LBrgANFi.js","./RasterVFDisplayObject-BrKDrKEr.js","./ImageryTileLayerView2D-kbwoUAQd.js","./multidimensionalUtils-usI9yOrM.js","./rasterUtils-DUiBHJUd.js","./RawBlockCache-D0t3AAcO.js","./KMLLayerView2D-BuUYD5J4.js","./kmlUtils-F3xe__us.js","./KnowledgeGraphLayerView2D-DJQBSIup.js","./MapImageLayerView2D-DXQYM30r.js","./ExportImageParameters-B9DCnJwi.js","./MapNotesLayerView2D-C2vJc1bQ.js","./MediaLayerView2D-wtMvpa9E.js","./perspectiveUtils-dzubGRY5.js","./OverlayContainer-CMG3HHs8.js","./OGCFeatureLayerView2D-AocnX5XW.js","./RouteLayerView2D-DqUwa-Y7.js","./Stop-B2XPoCu9.js","./StreamLayerView2D-ggK2TAYZ.js","./SubtypeGroupLayerView2D-DpkycEUa.js","./VectorTileLayerView2D-CKfsDG5_.js","./VideoLayerView2D-CDsZlIZM.js","./TelemetryDisplay-DNg6L9kP.js","./WMSLayerView2D-C03TdzzM.js","./ExportWMSImageParameters-DMD0Yn0T.js","./WMTSLayerView2D-DZVgzFSJ.js","./FeatureServiceSnappingSource-B6J6_bPR.js","./boundedPlane-BL3qgVOW.js","./queryEngineUtils-C4FFihE_.js","./VertexSnappingCandidate-DOB6o5TV.js","./PointSnappingHint-D4hTAt-c.js","./FeatureCollectionSnappingSource-91Ie8IpM.js","./GraphicsSnappingSource-DcK301tM.js","./SceneLayerSnappingSource-B9WAiqBn.js","./editingTools-C4HtHKST.js","./SnappingVisualizer2D-C_dcWHrM.js","./automaticAreaMeasurementUtils-B5qVW8E8.js","./Tooltip-C0zPoNsb.js","./MeshTransform-4dnYKNDH.js","./axisAngleDegrees-s-Pc0vGJ.js","./triangle-BHpEeeo3.js","./editPlaneUtils-DWDIOp4r.js","./GraphicManipulator-DHSSVQLb.js","./drawUtils-CQTgqsvT.js","./editingTools-BBcAQ15l.js","./ColorMaterial.glsl-CBrdTPxl.js","./VertexColor.glsl-Op97CNy8.js","./triangulationUtils-WcX9UuuB.js","./SelectedVertexTooltipInfo-DZsVRy_p.js","./TranslateTooltipInfo-CNidS2lE.js","./persistable-C8IQ9VBG.js","./multiOriginJSONSupportUtils-C0wm8_Yw.js","./resourceExtension-BDn8EayD.js","./ExtentScaleTooltipInfo-Bm9HQK4e.js","./WaterSurface.glsl-DAfDxRv3.js","./rendererConversion-CyrEaF0d.js","./objectResourceUtils-iZJQC8QT.js","./DefaultMaterial_COLOR_GAMMA-DHPqUhsG.js","./resourceUtils-NnmhFWEt.js","./MeshComponent-DwgliqsF.js","./MeshVertexAttributes-CZVfbXVy.js","./geometryServiceUtils-WFbq5_gF.js","./GraphicMover-Bf8yQ7fM.js","./Box-DekH1xw2.js","./settings-IPL22xyl.js","./Reshape-C0bGX7z-.js","./calcite-block-B_HL1ze2.js","./handle-Cp9Jp9aA.js","./Legend-jntMEjYM.js","./calcite-list-2dXhpAad.js","./resources4-BUzBmPz0.js","./utils3-DaZLdxws.js","./calcite-list-item-D2xj56kv.js"])))=>i.map(i=>d[i]);
var sB=Object.defineProperty;var oB=(t,e,i)=>e in t?sB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i;var U3=(t,e,i)=>oB(t,typeof e!="symbol"?e+"":e,i);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const h of s)if(h.type==="childList")for(const f of h.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&n(f)}).observe(document,{childList:!0,subtree:!0});function i(s){const h={};return s.integrity&&(h.integrity=s.integrity),s.referrerPolicy&&(h.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?h.credentials="include":s.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function n(s){if(s.ep)return;s.ep=!0;const h=i(s);fetch(s.href,h)}})();function on(){}function RI(t){return t()}function tM(){return Object.create(null)}function _c(t){t.forEach(RI)}function hw(t){return typeof t=="function"}function Yd(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function aB(t){return Object.keys(t).length===0}function LI(t,...e){if(t==null){for(const n of e)n(void 0);return on}const i=t.subscribe(...e);return i.unsubscribe?()=>i.unsubscribe():i}function gd(t,e,i){t.$$.on_destroy.push(LI(e,i))}function iM(t){return t??""}function lB(t,e,i){return t.set(i),e}function cB(t){return t&&hw(t.destroy)?t.destroy:on}function Ne(t,e){t.appendChild(e)}function ou(t,e,i){t.insertBefore(e,i||null)}function xc(t){t.parentNode&&t.parentNode.removeChild(t)}function Ze(t){return document.createElement(t)}function ja(t){return document.createTextNode(t)}function Xi(){return ja(" ")}function hB(){return ja("")}function Wn(t,e,i,n){return t.addEventListener(e,i,n),()=>t.removeEventListener(e,i,n)}function jr(t,e,i){i==null?t.removeAttribute(e):t.getAttribute(e)!==i&&t.setAttribute(e,i)}function Ie(t,e,i){const n=e.toLowerCase();n in t?t[n]=typeof t[n]=="boolean"&&i===""?!0:i:e in t?t[e]=typeof t[e]=="boolean"&&i===""?!0:i:jr(t,e,i)}function uB(t){return Array.from(t.childNodes)}function dB(t,e,{bubbles:i=!1,cancelable:n=!1}={}){return new CustomEvent(t,{detail:e,bubbles:i,cancelable:n})}let Dg;function cg(t){Dg=t}function NI(){if(!Dg)throw new Error("Function called outside component initialization");return Dg}function pB(t){NI().$$.on_mount.push(t)}function DI(){const t=NI();return(e,i,{cancelable:n=!1}={})=>{const s=t.$$.callbacks[e];if(s){const h=dB(e,i,{cancelable:n});return s.slice().forEach(f=>{f.call(t,h)}),!h.defaultPrevented}return!0}}const Rp=[],nM=[];let wf=[];const rM=[],fB=Promise.resolve();let k5=!1;function gB(){k5||(k5=!0,fB.then(zI))}function $5(t){wf.push(t)}const q3=new Set;let mp=0;function zI(){if(mp!==0)return;const t=Dg;do{try{for(;mp<Rp.length;){const e=Rp[mp];mp++,cg(e),mB(e.$$)}}catch(e){throw Rp.length=0,mp=0,e}for(cg(null),Rp.length=0,mp=0;nM.length;)nM.pop()();for(let e=0;e<wf.length;e+=1){const i=wf[e];q3.has(i)||(q3.add(i),i())}wf.length=0}while(Rp.length);for(;rM.length;)rM.pop()();k5=!1,q3.clear(),cg(t)}function mB(t){if(t.fragment!==null){t.update(),_c(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach($5)}}function yB(t){const e=[],i=[];wf.forEach(n=>t.indexOf(n)===-1?e.push(n):i.push(n)),i.forEach(n=>n()),wf=e}const _v=new Set;let md;function vB(){md={r:0,c:[],p:md}}function bB(){md.r||_c(md.c),md=md.p}function oc(t,e){t&&t.i&&(_v.delete(t),t.i(e))}function yd(t,e,i,n){if(t&&t.o){if(_v.has(t))return;_v.add(t),md.c.push(()=>{_v.delete(t),n&&(i&&t.d(1),n())}),t.o(e)}else n&&n()}function p1(t){t&&t.c()}function hf(t,e,i){const{fragment:n,after_update:s}=t.$$;n&&n.m(e,i),$5(()=>{const h=t.$$.on_mount.map(RI).filter(hw);t.$$.on_destroy?t.$$.on_destroy.push(...h):_c(h),t.$$.on_mount=[]}),s.forEach($5)}function uf(t,e){const i=t.$$;i.fragment!==null&&(yB(i.after_update),_c(i.on_destroy),i.fragment&&i.fragment.d(e),i.on_destroy=i.fragment=null,i.ctx=[])}function wB(t,e){t.$$.dirty[0]===-1&&(Rp.push(t),gB(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function d0(t,e,i,n,s,h,f=null,m=[-1]){const v=Dg;cg(t);const x=t.$$={fragment:null,ctx:[],props:h,update:on,not_equal:s,bound:tM(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(v?v.$$.context:[])),callbacks:tM(),dirty:m,skip_bound:!1,root:e.target||v.$$.root};f&&f(x.root);let M=!1;if(x.ctx=i?i(t,e.props||{},($,I,...P)=>{const L=P.length?P[0]:I;return x.ctx&&s(x.ctx[$],x.ctx[$]=L)&&(!x.skip_bound&&x.bound[$]&&x.bound[$](L),M&&wB(t,$)),I}):[],x.update(),M=!0,_c(x.before_update),x.fragment=n?n(x.ctx):!1,e.target){if(e.hydrate){const $=uB(e.target);x.fragment&&x.fragment.l($),$.forEach(xc)}else x.fragment&&x.fragment.c();e.intro&&oc(t.$$.fragment),hf(t,e.target,e.anchor),zI()}cg(v)}class p0{constructor(){U3(this,"$$");U3(this,"$$set")}$destroy(){uf(this,1),this.$destroy=on}$on(e,i){if(!hw(i))return on;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(i),()=>{const s=n.indexOf(i);s!==-1&&n.splice(s,1)}}$set(e){this.$$set&&!aB(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const _B="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(_B);const yp=[];function xB(t,e){return{subscribe:$6(t,e).subscribe}}function $6(t,e=on){let i;const n=new Set;function s(m){if(Yd(t,m)&&(t=m,i)){const v=!yp.length;for(const x of n)x[1](),yp.push(x,t);if(v){for(let x=0;x<yp.length;x+=2)yp[x][0](yp[x+1]);yp.length=0}}}function h(m){s(m(t))}function f(m,v=on){const x=[m,v];return n.add(x),n.size===1&&(i=e(s,h)||on),m(t),()=>{n.delete(x),n.size===0&&i&&(i(),i=null)}}return{set:s,update:h,subscribe:f}}function C6(t,e,i){const n=!Array.isArray(t),s=n?[t]:t;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const h=e.length<2;return xB(i,(f,m)=>{let v=!1;const x=[];let M=0,$=on;const I=()=>{if(M)return;$();const L=e(n?x[0]:x,f,m);h?f(L):$=hw(L)?L:on},P=s.map((L,z)=>LI(L,F=>{x[z]=F,M&=~(1<<z),v&&I()},()=>{M|=1<<z}));return v=!0,I(),function(){_c(P),$(),v=!1}})}let W3=class Eu{constructor(e=1){this._seed=e}set seed(e){this._seed=e??Math.random()*Eu._m}getInt(){return this._seed=(Eu._a*this._seed+Eu._c)%Eu._m,this._seed}getFloat(){return this.getInt()/(Eu._m-1)}getIntRange(e,i){return Math.round(this.getFloatRange(e,i))}getFloatRange(e,i){const n=i-e;return e+this.getInt()/Eu._m*n}};W3._m=2147483647,W3._a=48271,W3._c=0;const SB=1.5,Sxe=1/SB,Txe=.5;function Mxe(t,e){return e?t.filter((i,n,s)=>s.findIndex(e.bind(null,i))===n):Array.from(new Set(t))}function Za(t,e,i){if(t==null&&e==null)return!0;if(t==null||e==null||t.length!==e.length)return!1;if(i){for(let n=0;n<t.length;n++)if(!i(t[n],e[n]))return!1}else for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Exe(t,e){let i=t.length!==e.length;i&&(t.length=e.length);for(let n=0;n<e.length;++n)t[n]!==e[n]&&(t[n]=e[n],i=!0);return i}function C5(t,e,i){let n,s;return i?(n=e.filter(h=>!t.some(f=>i(f,h))),s=t.filter(h=>!e.some(f=>i(f,h)))):(n=e.filter(h=>!t.includes(h)),s=t.filter(h=>!e.includes(h))),{added:n,removed:s}}function kxe(t){return t&&typeof t.length=="number"}let FI=class{constructor(){this.last=0}};const jI=new FI;function I5(t,e,i,n){n=n||jI;const s=Math.max(0,n.last-10);for(let f=s;f<i;++f)if(t[f]===e)return n.last=f,f;const h=Math.min(s,i);for(let f=0;f<h;++f)if(t[f]===e)return n.last=f,f;return-1}function TB(t,e,i,n){const s=t.length,h=I5(t,e,s,n);if(h!==-1)return t[h]=t[s-1],t.pop(),e}const So=new Set;function MB(t,e,i=t.length,n=e.length,s,h){if(n===0||i===0)return i;So.clear();for(let m=0;m<n;++m)So.add(e[m]);s=s||jI;const f=Math.max(0,s.last-10);for(let m=f;m<i;++m)if(So.has(t[m])&&(h==null||h.push(t[m]),So.delete(t[m]),t[m]=t[i-1],--i,--m,So.size===0||i===0))return So.clear(),i;for(let m=0;m<f;++m)if(So.has(t[m])&&(h==null||h.push(t[m]),So.delete(t[m]),t[m]=t[i-1],--i,--m,So.size===0||i===0))return So.clear(),i;return So.clear(),i}function Cxe(t,e){let i=0;for(let n=0;n<t.length;++n){const s=t[n];e(s,n)&&(t[i]=s,i++)}t.length=i}function I6(t,e){const i=t.indexOf(e);return i!==-1?(t.splice(i,1),e):null}function ji(t,e){return t!=null}const Ixe=[];function GI(t){return 32+t.length}function A6(){return 16}function Axe(t){if(!t)return 0;let e=HI;for(const i in t)if(t.hasOwnProperty(i)){const n=t[i];switch(typeof n){case"string":e+=GI(n);break;case"number":e+=A6();break;case"boolean":e+=4}}return e}function EB(t){if(!t)return 0;if(Array.isArray(t))return kB(t);let e=HI;for(const i in t)t.hasOwnProperty(i)&&(e+=VI(t[i]));return e}function kB(t){const e=t.length;if(e===0||typeof t[0]=="number")return 32+8*e;let i=BI;for(let n=0;n<e;n++)i+=VI(t[n]);return i}function VI(t){switch(typeof t){case"object":return EB(t);case"string":return GI(t);case"number":return A6();case"boolean":return 4;default:return 8}}function $B(t,e){return BI+t.length*e}const HI=32,BI=16;let Ah;function pe(t){return typeof Ah[t]=="function"?Ah[t]=Ah[t](globalThis):Ah[t]}var EI,kI,$I,CI;Ah=(EI=globalThis.dojoConfig)!=null&&EI.has||(kI=globalThis.esriConfig)!=null&&kI.has?{...($I=globalThis.dojoConfig)==null?void 0:$I.has,...(CI=globalThis.esriConfig)==null?void 0:CI.has}:{},pe.add=(t,e,i,n)=>((n||Ah[t]===void 0)&&(Ah[t]=e),i&&pe(t)),pe.cache=Ah,pe.add("big-integer-warning-enabled",!0),pe.add("esri-deprecation-warnings",!0),pe.add("esri-tests-disable-screenshots",!1),pe.add("esri-tests-use-full-window",!1),pe.add("esri-tests-post-to-influx",!0),(()=>{var e;pe.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const t=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(pe.add("host-browser",t),pe.add("host-node",typeof globalThis.process=="object"&&((e=globalThis.process.versions)==null?void 0:e.node)&&globalThis.process.versions.v8),pe.add("dom",t),pe("host-browser")){const i=navigator,n=i.userAgent,s=i.appVersion,h=parseFloat(s);if(pe.add("wp",parseFloat(n.split("Windows Phone")[1])||void 0),pe.add("msapp",parseFloat(n.split("MSAppHost/")[1])||void 0),pe.add("khtml",s.includes("Konqueror")?h:void 0),pe.add("edge",parseFloat(n.split("Edge/")[1])||void 0),pe.add("opr",parseFloat(n.split("OPR/")[1])||void 0),pe.add("webkit",!pe("wp")&&!pe("edge")&&parseFloat(n.split("WebKit/")[1])||void 0),pe.add("chrome",!pe("edge")&&!pe("opr")&&parseFloat(n.split("Chrome/")[1])||void 0),pe.add("android",!pe("wp")&&parseFloat(n.split("Android ")[1])||void 0),pe.add("safari",!s.includes("Safari")||pe("wp")||pe("chrome")||pe("android")||pe("edge")||pe("opr")?void 0:parseFloat(s.split("Version/")[1])),pe.add("mac",s.includes("Macintosh")),!pe("wp")&&/(iPhone|iPod|iPad)/.test(n)){const f=RegExp.$1.replace(/P/,"p"),m=/OS ([\d_]+)/.test(n)?RegExp.$1:"1",v=parseFloat(m.replace(/_/,".").replaceAll("_",""));pe.add(f,v),pe.add("ios",v)}pe("webkit")||(!n.includes("Gecko")||pe("wp")||pe("khtml")||pe("edge")||pe.add("mozilla",h),pe("mozilla")&&pe.add("ff",parseFloat(n.split("Firefox/")[1]||n.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const t=navigator.userAgent,e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(t),i=/iPhone/i.test(t);e&&pe.add("esri-mobile",e),i&&pe.add("esri-iPhone",i),pe.add("esri-geolocation",!!navigator.geolocation)}pe.add("esri-wasm","WebAssembly"in globalThis),pe.add("esri-performance-mode-frames-between-render",20),pe.add("esri-force-performance-mode",!1),pe.add("esri-shared-array-buffer",()=>{const t="SharedArrayBuffer"in globalThis,e=globalThis.crossOriginIsolated===!1;return t&&!e}),pe.add("wasm-simd",()=>{const t=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(t))}),pe.add("esri-atomics","Atomics"in globalThis),pe.add("esri-workers","Worker"in globalThis),pe.add("web-feat:cache","caches"in globalThis),pe.add("esri-workers-arraybuffer-transfer",!pe("safari")||Number(pe("safari"))>=12),pe.add("workers-pool-size",8),pe.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),pe.add("featurelayer-simplify-payload-size-factors",[1,1,4]),pe.add("featurelayer-fast-triangulation-enabled",!0),pe.add("featurelayer-animation-enabled",!0),pe.add("featurelayer-snapshot-enabled",!0),pe.add("featurelayer-snapshot-point-min-threshold",8e4),pe.add("featurelayer-snapshot-point-max-threshold",4e5),pe.add("featurelayer-snapshot-point-coverage",.1),pe.add("featurelayer-query-max-depth",4),pe.add("featurelayer-query-pausing-enabled",!1),pe.add("featurelayer-advanced-symbols",!1),pe.add("featurelayer-pbf",!0),pe.add("featurelayer-pbf-statistics",!1),pe.add("feature-layers-workers",!0),pe.add("feature-polyline-generalization-factor",1),pe.add("mapview-transitions-duration",200),pe.add("mapview-essential-goto-duration",200),pe.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),pe.add("mapserver-pbf-version-support",10.81),pe.add("mapservice-popup-identify-max-tolerance",20),pe("host-webworker")||pe("host-browser")&&(pe.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),pe.add("esri-image-decode",()=>{if("decode"in new Image){const t=new Image;return t.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void t.decode().then(()=>{pe.add("esri-image-decode",!0,!0,!0)}).catch(()=>{pe.add("esri-image-decode",!1,!0,!0)})}return!1}),pe.add("esri-url-encodes-apostrophe",()=>{const t=window.document.createElement("a");return t.href="?'",t.href.includes("?%27")}))})();function Oxe(t){return t instanceof ArrayBuffer}function O6(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int8Array"}function UI(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint8Array"}function qI(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint8ClampedArray"}function P6(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int16Array"}function WI(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint16Array"}function R6(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int32Array"}function ZI(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint32Array"}function pm(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Float32Array"}function fm(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Float64Array"}function CB(t){return!("buffer"in t)}function Pxe(...t){return t.reduce((e,i)=>e+(i?CB(i)?$B(i,A6()):i.byteLength+IB:0),0)}const IB=145,Rxe=1024;function Lxe(t){return fm(t)||pm(t)||R6(t)||P6(t)||O6(t)}function Nxe(t){return fm(t)||pm(t)}function Dxe(t){return fm(t)?179769e303:pm(t)?3402823e32:ZI(t)?4294967295:WI(t)?65535:UI(t)||qI(t)?255:R6(t)?2147483647:P6(t)?32767:O6(t)?127:256}function AB(t,e){let i;for(i in t)t.hasOwnProperty(i)&&t[i]===void 0&&delete t[i];return t}function _e(t){if(!t||typeof t!="object"||typeof t=="function")return t;const e=YI(t);if(e!=null)return e;if(Ab(t))return t.clone();if(JI(t))return t.map(_e);if(KI(t))return t.clone();const i={};for(const n of Object.getOwnPropertyNames(t))i[n]=_e(t[n]);return i}function A5(t){if(!t||typeof t!="object"||typeof t=="function"||"HTMLElement"in globalThis&&t instanceof HTMLElement)return t;const e=YI(t);if(e!=null)return e;if(JI(t)){let i=!0;const n=t.map(s=>{const h=A5(s);return s!=null&&h==null&&(i=!1),h});return i?n:null}if(Ab(t))return t.clone();if(t instanceof File||t instanceof Blob)return t;if(!KI(t)){const i=new(Object.getPrototypeOf(t)).constructor;for(const n of Object.getOwnPropertyNames(t)){const s=t[n],h=A5(s);if(s!=null&&h==null)return null;i[n]=h}return i}return null}function Ab(t){return typeof t.clone=="function"}function JI(t){return typeof t.map=="function"&&typeof t.forEach=="function"}function KI(t){return typeof t.notifyChange=="function"&&typeof t.watch=="function"}function sM(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function YI(t){if(O6(t)||UI(t)||qI(t)||P6(t)||WI(t)||R6(t)||ZI(t)||pm(t)||fm(t))return t.slice();if(t instanceof Date)return new Date(t.getTime());if(t instanceof ArrayBuffer)return t.slice(0,t.byteLength);if(t instanceof Map){const e=new Map;for(const[i,n]of t)e.set(i,_e(n));return e}if(t instanceof Set){const e=new Set;for(const i of t)e.add(_e(i));return e}return null}function L6(t,e){return t===e||typeof t=="number"&&isNaN(t)&&typeof e=="number"&&isNaN(e)||typeof(t==null?void 0:t.getTime)=="function"&&typeof(e==null?void 0:e.getTime)=="function"&&t.getTime()===e.getTime()||!1}function XI(t,e){return t===e||(t==null||typeof t=="string"?t===e:typeof t=="number"?t===e||typeof e=="number"&&isNaN(t)&&isNaN(e):t instanceof Date?e instanceof Date&&t.getTime()===e.getTime():Array.isArray(t)?Array.isArray(e)&&Za(t,e):t instanceof Set?e instanceof Set&&PB(t,e):t instanceof Map?e instanceof Map&&RB(t,e):!!sM(t)&&sM(e)&&OB(t,e))}function OB(t,e){if(t===null||e===null)return!1;const i=Object.keys(t);if(e===null||Object.keys(e).length!==i.length)return!1;for(const n of i)if(t[n]!==e[n]||!Object.prototype.hasOwnProperty.call(e,n))return!1;return!0}function PB(t,e){if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}function RB(t,e){if(t.size!==e.size)return!1;for(const[i,n]of t){const s=e.get(i);if(s!==n||s===void 0&&!e.has(i))return!1}return!0}function _(t,e,i,n){var s,h=arguments.length,f=h<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,i):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(t,e,i,n);else for(var m=t.length-1;m>=0;m--)(s=t[m])&&(f=(h<3?s(f):h>3?s(e,i,f):s(e,i))||f);return h>3&&f&&Object.defineProperty(e,i,f),f}function zxe(t,e){return function(i,n){e(i,n,t)}}function Fxe(t,e,i,n){function s(h){return h instanceof i?h:new i(function(f){f(h)})}return new(i||(i=Promise))(function(h,f){function m(M){try{x(n.next(M))}catch($){f($)}}function v(M){try{x(n.throw(M))}catch($){f($)}}function x(M){M.done?h(M.value):s(M.value).then(m,v)}x((n=n.apply(t,[])).next())})}const oM=new WeakMap;function LB(t,e,i=!1){const n=`ðŸ›‘ DEPRECATED - ${e}`;if(!i)return void t.warn(n);let s=oM.get(t);s||(s=new Set,oM.set(t,s)),s.has(e)||(s.add(e),t.warn(n))}function QI(t,e,i={}){if(pe("esri-deprecation-warnings")){const{moduleName:n}=i;Bh(t,`Function: ${(n?n+"::":"")+e+"()"}`,i)}}function Ob(t,e,i={}){if(pe("esri-deprecation-warnings")){const{moduleName:n}=i;Bh(t,`Property: ${(n?n+"::":"")+e}`,i)}}function NB(t,e,i={}){pe("esri-deprecation-warnings")&&Bh(t,`Multiple argument constructor: ${e}`,{warnOnce:!0,replacement:`new ${e}({ <your properties here> })`,...i})}function Bh(t,e,i={}){if(pe("esri-deprecation-warnings")){const{replacement:n,version:s,see:h,warnOnce:f}=i;let m=e;n&&(m+=`
	ðŸ› ï¸ Replacement: ${n}`),s&&(m+=`
	âš™ï¸ Version: ${s}`),h&&(m+=`
	ðŸ”— See ${h} for more details.`),LB(t,m,f)}}function jxe(t){const e=[];return function*(){yield*e;for(const i of t)e.push(i),yield i}}function DB(t,e){for(const i of t)if(i!=null&&e(i))return i}function Pb(t){return t!=null&&typeof t[Symbol.iterator]=="function"}let f0=class{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach(i=>{e+=i.length}),e}add(e,i){if(Pb(e)){const n=this._getOrCreateGroup(i);for(const s of e)lM(s)&&n.push(s)}else lM(e)&&this._getOrCreateGroup(i).push(e);return this}forEach(e,i){if(typeof e=="function")this._groups.forEach(n=>n.forEach(e));else{const n=this._getGroup(e);n&&i&&n.forEach(i)}}has(e){return this._groups.has(ny(e))}remove(e){if(typeof e!="string"&&Pb(e)){for(const i of e)this.remove(i);return this}return this.has(e)?(aM(this._getGroup(e)),this._groups.delete(ny(e)),this):this}removeAll(){return this._groups.forEach(aM),this._groups.clear(),this}removeReference(e){return this._groups.delete(e),this}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const i=[];return this._groups.set(ny(e),i),i}_getGroup(e){return this._groups.get(ny(e))}};function ny(t){return t||"_default_"}function aM(t){for(const e of t)e instanceof f0?e.removeAll():e.remove()}function lM(t){return t!=null&&(!!t.remove||t instanceof f0)}function zB(t,e,i=!1){return tA(t,e,i)}function gm(t,e){if(e!=null)return e[t]||eA(t.split("."),!1,e)}function Xd(t,e,i){const n=t.split("."),s=n.pop(),h=eA(n,!0,i);h&&s&&(h[s]=e)}function cM(t,e){if(t==null&&e==null)return!1;if(t==null||e==null)return!0;if(typeof t=="object"){if(Array.isArray(t)){const i=e;if(t.length!==i.length)return!0;for(let n=0;n<t.length;n++)if(cM(t[n],i[n]))return!0;return!1}if(Object.keys(t).length!==Object.keys(e).length)return!0;for(const i in t)if(cM(t[i],e[i]))return!0;return!1}return t!==e}function eA(t,e,i){let n=i;for(const s of t){if(n==null)return;if(!(s in n)){if(!e)return;n[s]={}}n=n[s]}return n}function tA(t,e,i){return e?Object.keys(e).reduce((n,s)=>{let h=n[s],f=e[s];return h===f?n:h===void 0?(n[s]=_e(f),n):(Array.isArray(f)||Array.isArray(n)?(h=h?Array.isArray(h)?n[s]=h.concat():n[s]=[h]:n[s]=[],f&&(Array.isArray(f)||(f=[f]),i?f.forEach(m=>{h.includes(m)||h.push(m)}):n[s]=f.concat())):f&&typeof f=="object"?n[s]=tA(h,f,i):n.hasOwnProperty(s)&&!e.hasOwnProperty(s)||(n[s]=f),n)},t||{}):t}var II;const vt={apiKey:void 0,applicationName:"",applicationUrl:(II=globalThis.location)==null?void 0:II.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!0,portalUrl:"https://www.arcgis.com",respectPrefersReducedMotion:!0,routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],internalInterceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(zB(vt,globalThis.esriConfig,!0),delete vt.has),!vt.assetsPath){{const t="4.30";vt.assetsPath=`https://js.arcgis.com/${t}/@arcgis/core/assets`}vt.defaultAssetsPath=vt.assetsPath}const FB=/\{([^}]+)\}/g;function hM(t){return t??""}function N6(t,e){return e?t.replaceAll(FB,typeof e=="object"?(i,n)=>hM(gm(n,e)):(i,n)=>hM(e(n))):t}function jB(t,e){return t.replaceAll(/([.$?*|{}()[\]\\/+\-^])/g,i=>e!=null&&e.includes(i)?i:`\\${i}`)}function iA(t){let e=0;for(let i=0;i<t.length;i++)e=(e<<5)-e+t.charCodeAt(i),e|=0;return e}let uM;function Vxe(t){return uM??(uM=new DOMParser),uM.parseFromString(t||"","text/html").body.innerText||""}function Hxe(t,e){return new RegExp(`{${e}}`,"ig").test(t)}function Bxe(t,...e){let i=t[0];for(let n=0;n<e.length;++n)i+=e[n]+t[n+1];return i}const dM={info:0,warn:1,error:2,none:3};let Ce=class ts{constructor(e){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},e.level!=null&&(this.level=e.level),e.writer!=null&&(this.writer=e.writer),this._module=e.module,ts._loggers.set(this.module,this);const i=this.module.lastIndexOf(".");i!==-1&&(this._parent=ts.getLogger(this.module.slice(0,i)))}get module(){return this._module}get parent(){return this._parent}error(...e){this._log("error","always",...e)}warn(...e){this._log("warn","always",...e)}info(...e){this._log("info","always",...e)}errorOnce(...e){this._log("error","once",...e)}warnOnce(...e){this._log("warn","once",...e)}infoOnce(...e){this._log("info","once",...e)}errorOncePerTick(...e){this._log("error","oncePerTick",...e)}warnOncePerTick(...e){this._log("warn","oncePerTick",...e)}infoOncePerTick(...e){this._log("info","oncePerTick",...e)}get test(){}static get test(){}static getLogger(e){return e=typeof e!="string"?e.declaredClass:e,ts._loggers.get(e)||new ts({module:e})}_log(e,i,...n){if(this._matchLevel(e)){if(i!=="always"&&!ts._throttlingDisabled){const s=VB(n),h=this._loggedMessages[e].get(s);if(i==="once"&&h!=null||i==="oncePerTick"&&h&&h>=ts._tickCounter)return;this._loggedMessages[e].set(s,ts._tickCounter),ts._scheduleTickCounterIncrement()}for(const s of vt.log.interceptors)if(s(e,this.module,...n))return;this._inheritedWriter()(e,this.module,...n)}}_parentWithMember(e,i){let n=this;for(;n!=null;){const s=n[e];if(s!=null)return s;n=n.parent}return i}_inheritedWriter(){return this._parentWithMember("writer",GB)}_matchLevel(e){const i=vt.log.level||"warn";return dM[this._parentWithMember("level",i)]<=dM[e]}static _scheduleTickCounterIncrement(){ts._tickCounterScheduled||(ts._tickCounterScheduled=!0,Promise.resolve().then(()=>{ts._tickCounter++,ts._tickCounterScheduled=!1}))}};function GB(t,e,...i){console[t](`[${e}]`,...i)}function VB(...t){return iA(JSON.stringify(t,(i,n)=>typeof n!="object"||Array.isArray(n)?n:"[Object]"))}Ce._loggers=new Map,Ce._tickCounter=0,Ce._tickCounterScheduled=!1,Ce._throttlingDisabled=!1;function nA(t,e){if(t==null)throw new Error(e??"value is None")}function yt(t){return t==null||t.destroy(),null}function Uxe(t){return t==null||t.dispose(),null}function Rt(t){return t==null||t.remove(),null}function ms(t){return t==null||t.abort(),null}function qxe(t){return t==null||t.release(),null}function rA(t,e,i){return t!=null&&e!=null?i!=null?i(t,e):t.equals(e):t===e}function zg(t,e){let i;return t.some((n,s)=>(i=e(n,s),i!=null)),i??void 0}const sA=Symbol("Accessor-beforeDestroy"),HB={remove:()=>{}};function ut(t){return t?{remove(){t&&(t(),t=void 0)}}:HB}function BB(t){t.forEach(e=>e==null?void 0:e.remove())}function Sc(t){return ut(()=>BB(t))}function Wxe(t){return ut(()=>{var e;return(e=t())==null?void 0:e.remove()})}function oA(t){return ut(t!=null?()=>t.destroy():void 0)}function gc(t){return t.__accessor__??null}function UB(t,e){var i;return((i=t==null?void 0:t.metadata)==null?void 0:i[e])!=null}function xv(t,e,i){return i?Rb(t,e,{policy:i,path:""}):Rb(t,e,null)}function Rb(t,e,i){return e?Object.keys(e).reduce((n,s)=>{const h=s;let f=null,m="merge";if(i&&(f=i.path?`${i.path}.${s}`:s,m=i.policy(f)),m==="replace"||m==="replace-arrays"&&Array.isArray(n[h]))return n[h]=e[h],n;if(n[h]===void 0)return n[h]=_e(e[h]),n;let v=n[h],x=e[h];if(v===x)return n;if(Array.isArray(x)||Array.isArray(n))v=v?Array.isArray(v)?n[h]=v.concat():n[h]=[v]:n[h]=[],x&&(Array.isArray(x)||(x=[x]),x.forEach(M=>{v.includes(M)||v.push(M)}));else if(x&&typeof x=="object")if(i){const M=i.path;i.path=f,n[h]=Rb(v,x,i),i.path=M}else n[h]=Rb(v,x,null);else n.hasOwnProperty(s)&&!e.hasOwnProperty(s)||(n[h]=x);return n},t||{}):t}function aA(t){return Array.isArray(t)?t:t.split(".")}function pM(t){return t.includes(",")?t.split(",").map(e=>e.trim()):[t.trim()]}function qB(t){if(Array.isArray(t)){const e=[];for(const i of t)e.push(...pM(i));return e}return pM(t)}function lA(t,e,i,n){const s=qB(e);if(s.length!==1){const h=s.map(f=>n(t,f,i));return Sc(h)}return n(t,s[0],i)}function cA(t,e){const i=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const s=parseInt(i,10);if(!isNaN(s))return Array.isArray(e)?e[s]:e.at(s)}const n=gc(e);return UB(n,i)?n.get(i):e[i]}function hA(t,e,i){if(t==null)return t;const n=cA(e[i],t);return!n&&i<e.length-1?void 0:i===e.length-1?n:hA(n,e,i+1)}function mm(t,e,i=0){return typeof e!="string"||e.includes(".")?hA(t,aA(e),i):cA(e,t)}function Br(t,e){return mm(t,e)}function fM(t,e){return mm(e,t)!==void 0}var Gr;(function(t){t[t.INITIALIZING=0]="INITIALIZING",t[t.CONSTRUCTING=1]="CONSTRUCTING",t[t.CONSTRUCTED=2]="CONSTRUCTED",t[t.DESTROYED=3]="DESTROYED"})(Gr||(Gr={}));function ym(t){let e=t.constructor.__accessorMetadata__;const i=Object.prototype.hasOwnProperty.call(t.constructor,"__accessorMetadata__");if(e){if(!i){e=Object.create(e);for(const n in e)e[n]=_e(e[n]);Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0})}}else e={},Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0});return t.constructor.__accessorMetadata__}function uw(t,e){const i=ym(t);let n=i[e];return n||(n=i[e]={}),n}function WB(t,e){return xv(t,e,JB)}const ZB=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function JB(t){return ZB.test(t)?"replace":"merge"}function KB(t){return(t==null?void 0:t.release)&&typeof t.release=="function"}function YB(t){return(t==null?void 0:t.acquire)&&typeof t.acquire=="function"}let Qd=class O5{constructor(e,i,n,s=1,h=0){if(this._ctor=e,this._acquireFunction=i,this._releaseFunction=n,this.allocationSize=s,this._pool=new Array(h),this._initialSize=h,this._ctor)for(let f=0;f<h;f++)this._pool[f]=new this._ctor;this.allocationSize=Math.max(s,1)}destroy(){this.prune(0)}acquire(...e){let i;if(O5.test.disabled)i=new this._ctor;else{if(this._pool.length===0){const n=this.allocationSize;for(let s=0;s<n;s++)this._pool[s]=new this._ctor}i=this._pool.pop()}return this._acquireFunction?this._acquireFunction(i,...e):YB(i)&&i.acquire(...e),i}release(e){e&&!O5.test.disabled&&(this._releaseFunction?this._releaseFunction(e):KB(e)&&e.release(),this._pool.push(e))}prune(e=this._initialSize){if(!(e>=this._pool.length)){for(let i=e;i<this._pool.length;++i){const n=this._pool[i];this._dispose(n)}this._pool.length=e}}_dispose(e){e.dispose&&typeof e.dispose=="function"&&e.dispose()}};Qd.test={disabled:!1};let XB=class{constructor(e,i){this._observers=e,this._observer=i}remove(){I6(this._observers,this._observer)}},uA=class{constructor(){this._observers=null,this.destroyed=!1}observe(e){if(this.destroyed||e.destroyed)return QB;this._observers==null&&(this._observers=[]);const i=this._observers;let n=!1,s=!1;const h=i.length;for(let f=0;f<h;++f){const m=i[f];if(m.destroyed)s=!0;else if(m===e){n=!0;break}}return n||(i.push(e),s&&this._removeDestroyedObservers()),new XB(i,e)}_removeDestroyedObservers(){const e=this._observers;if(!e||e.length===0)return;const i=e.length;let n=0;for(let s=0;s<i;++s){for(;s+n<i&&e[s+n].destroyed;)++n;if(n>0){if(!(s+n<i))break;e[s]=e[s+n]}}e.length=i-n}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this._observers;if(e!=null){for(const i of e)i.onCommitted();this._observers=null}}};const QB=ut();var Mt;(function(t){t[t.DEFAULTS=0]="DEFAULTS",t[t.COMPUTED=1]="COMPUTED",t[t.SERVICE=2]="SERVICE",t[t.PORTAL_ITEM=3]="PORTAL_ITEM",t[t.WEB_SCENE=4]="WEB_SCENE",t[t.WEB_MAP=5]="WEB_MAP",t[t.LINK_CHART=6]="LINK_CHART",t[t.USER=7]="USER"})(Mt||(Mt={}));const Kxe=Mt.USER+1;function dA(t){switch(t){case"defaults":return Mt.DEFAULTS;case"service":return Mt.SERVICE;case"portal-item":return Mt.PORTAL_ITEM;case"web-scene":return Mt.WEB_SCENE;case"web-map":return Mt.WEB_MAP;case"link-chart":return Mt.LINK_CHART;case"user":return Mt.USER;default:return null}}function P5(t){switch(t){case Mt.DEFAULTS:return"defaults";case Mt.SERVICE:return"service";case Mt.PORTAL_ITEM:return"portal-item";case Mt.WEB_SCENE:return"web-scene";case Mt.WEB_MAP:return"web-map";case Mt.LINK_CHART:return"link-chart";case Mt.USER:return"user"}}function eU(t){return P5(t)}var Ft;(function(t){t[t.Dirty=1]="Dirty",t[t.Overridden=2]="Overridden",t[t.Computing=4]="Computing",t[t.NonNullable=8]="NonNullable",t[t.HasDefaultValue=16]="HasDefaultValue",t[t.DepTrackingInitialized=32]="DepTrackingInitialized",t[t.AutoTracked=64]="AutoTracked",t[t.ExplicitlyTracking=128]="ExplicitlyTracking"})(Ft||(Ft={}));const Lb={onObservableAccessed:()=>{},onTrackingEnd:()=>{}},f1=[];let hg=Lb;function Ve(t){hg.onObservableAccessed(t)}let Sv=!1,Tv=!1;function mc(t,e,i){if(Sv)return D6(t,e,i);pA(t);const n=e.call(i);return fA(),n}function tU(t,e){return mc(Lb,t,e)}function D6(t,e,i){const n=Sv;Sv=!0,pA(t);let s=null;try{s=e.call(i)}catch(h){Tv&&Ce.getLogger("esri.core.accessorSupport.tracking").error(h)}return fA(),Sv=n,s}function pA(t){hg=t,f1.push(t)}function fA(){const t=f1.length;if(t>1){const e=f1.pop();hg=f1[t-2],e.onTrackingEnd()}else if(t===1){const e=f1.pop();hg=Lb,e.onTrackingEnd()}else hg=Lb}function gA(t,e){if(e.flags&Ft.DepTrackingInitialized)return;const i=Tv;Tv=!1,e.flags&Ft.AutoTracked?D6(e,e.metadata.get,t):mA(t,e),Tv=i}const iU=[];function mA(t,e){e.flags&Ft.ExplicitlyTracking||(e.flags|=Ft.ExplicitlyTracking,D6(e,()=>{const i=e.metadata.dependsOn||iU;for(const n of i)if(typeof n!="string"||n.includes(".")){const s=aA(n);for(let h=0,f=t;h<s.length&&f!=null&&typeof f=="object";++h)f=gM(f,s[h],h!==s.length-1)}else gM(t,n,!1)}),e.flags&=~Ft.ExplicitlyTracking)}function gM(t,e,i){const n=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const h=parseInt(n,10);if(!isNaN(h))return Array.isArray(t)?t[h]:t.at(h)}const s=gc(t);if(s){const h=s.propertiesByName.get(n);h&&(Ve(h),gA(t,h))}return i?t[n]:void 0}let mM=class extends uA{constructor(e,i){super(),this.propertyName=e,this.metadata=i,this._accessed=null,this._handles=null,this.flags=0,this.flags=Ft.Dirty|(i.nonNullable?Ft.NonNullable:0)|(i.hasOwnProperty("value")?Ft.HasDefaultValue:0)|(i.get===void 0?Ft.DepTrackingInitialized:0)|(i.dependsOn===void 0?Ft.AutoTracked:0)}destroy(){this.flags&Ft.Dirty&&this.onCommitted(),super.destroy(),this._accessed=null,this._clearObservationHandles()}getComputed(e){Ve(this);const i=e.store,n=this.propertyName,s=this.flags,h=i.get(n);if(s&Ft.Computing||~s&Ft.Dirty&&i.has(n))return h;this.flags|=Ft.Computing;const f=e.host;let m;s&Ft.AutoTracked?m=mc(this,this.metadata.get,f):(mA(f,this),m=this.metadata.get.call(f)),i.set(n,m,Mt.COMPUTED);const v=i.get(n);return v===h?this.flags&=~Ft.Dirty:tU(this.commit,this),this.flags&=~Ft.Computing,v}onObservableAccessed(e){e!==this&&(this._accessed??(this._accessed=new Set),this._accessed.add(e))}onTrackingEnd(){this._clearObservationHandles(),this.flags|=Ft.DepTrackingInitialized,this._accessed!=null&&(this._handles??(this._handles=[]),this._accessed.forEach(e=>{this._handles.push(e.observe(this))}),this._accessed.clear())}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=~Ft.Dirty,this.onCommitted()}_clearObservationHandles(){const e=this._handles;if(e!==null){for(let i=0;i<e.length;++i)e[i].remove();e.length=0}}onInvalidated(){~this.flags&Ft.Overridden&&(this.flags|=Ft.Dirty);const e=this._observers;if(e&&e.length>0)for(const i of e)i.onInvalidated()}onCommitted(){const e=this._observers;if(e&&e.length>0){const i=e.slice();for(const n of i)n.onCommitted()}}},nU=class yA{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const i=new yA;return this._values.forEach((n,s)=>{e&&e.has(s)||i.set(s,_e(n))}),i}get(e){return this._values.get(e)}originOf(){return Mt.USER}keys(){return[...this._values.keys()]}set(e,i){this._values.set(e,i)}delete(e){this._values.delete(e)}has(e){return this._values.has(e)}forEach(e){this._values.forEach(e)}};function ry(t,e,i){return t!==void 0}function yM(t,e,i,n){return t!==void 0&&(!(i==null&&t.flags&Ft.NonNullable)||(n.lifecycle,Gr.INITIALIZING,!1))}let rU=class{constructor(e){this.host=e,this.propertiesByName=new Map,this.ctorArgs=null,this.lifecycle=Gr.INITIALIZING,this.store=new nU,this._origin=Mt.USER;const i=this.host.constructor.__accessorMetadata__;for(const n in i){const s=new mM(n,i[n]);this.propertiesByName.set(n,s)}this.metadata=i}initialize(){this.lifecycle=Gr.CONSTRUCTING}constructed(){this.lifecycle=Gr.CONSTRUCTED}destroy(){this.lifecycle=Gr.DESTROYED,this.propertiesByName.forEach(e=>e.destroy())}get initialized(){return this.lifecycle!==Gr.INITIALIZING}get(e){const i=this.propertiesByName.get(e);if(i.metadata.get)return i.getComputed(this);Ve(i);const n=this.store;return n.has(e)?n.get(e):i.metadata.value}originOf(e){const i=this.store.originOf(e);if(i===void 0){const n=this.propertiesByName.get(e);if(n!==void 0&&n.flags&Ft.HasDefaultValue)return"defaults"}return P5(i)}has(e){return this.propertiesByName.has(e)&&this.store.has(e)}keys(){return[...this.propertiesByName.keys()]}internalGet(e){const i=this.propertiesByName.get(e);if(ry(i))return this.store.has(e)?this.store.get(e):i.metadata.value}internalSet(e,i){const n=this.propertiesByName.get(e);ry(n)&&this._internalSet(n,i)}getDependsInfo(e,i,n){const s=this.propertiesByName.get(i);if(!ry(s))return"";const h=new Set,f=mc({onObservableAccessed:v=>h.add(v),onTrackingEnd:()=>{}},()=>{var v;return(v=s.metadata.get)==null?void 0:v.call(e)});let m=`${n}${e.declaredClass.split(".").pop()}.${i}: ${f}
`;if(h.size===0)return m;n+="  ";for(const v of h)v instanceof mM&&(m+=`${n}${v.propertyName}: undefined
`);return m}setAtOrigin(e,i,n){const s=this.propertiesByName.get(e);if(ry(s))return this._setAtOrigin(s,i,n)}isOverridden(e){const i=this.propertiesByName.get(e);return i!==void 0&&!!(i.flags&Ft.Overridden)}clearOverride(e){const i=this.propertiesByName.get(e);i&&i.flags&Ft.Overridden&&(i.flags&=~Ft.Overridden,i.notifyChange())}override(e,i){const n=this.propertiesByName.get(e);if(!yM(n,e,i,this))return;const s=n.metadata.cast;if(s){const h=this._cast(s,i),{valid:f,value:m}=h;if(Z3.release(h),!f)return;i=m}n.flags|=Ft.Overridden,this._internalSet(n,i)}set(e,i){const n=this.propertiesByName.get(e);if(!yM(n,e,i,this))return;const s=n.metadata.cast;if(s){const f=this._cast(s,i),{valid:m,value:v}=f;if(Z3.release(f),!m)return;i=v}const h=n.metadata.set;h?h.call(this.host,i):this._internalSet(n,i)}setDefaultOrigin(e){this._origin=dA(e)}getDefaultOrigin(){return P5(this._origin)}notifyChange(e){const i=this.propertiesByName.get(e);i!==void 0&&i.notifyChange()}invalidate(e){const i=this.propertiesByName.get(e);i!==void 0&&i.invalidate()}commit(e){const i=this.propertiesByName.get(e);i!==void 0&&i.commit()}_internalSet(e,i){const n=this.lifecycle!==Gr.INITIALIZING?this._origin:Mt.DEFAULTS;this._setAtOrigin(e,i,n)}_setAtOrigin(e,i,n){const s=this.store,h=e.propertyName;s.has(h,n)&&L6(i,s.get(h))&&~e.flags&Ft.Overridden&&n===s.originOf(h)||(e.invalidate(),s.set(h,i,n),e.commit(),gA(this.host,e))}_cast(e,i){const n=Z3.acquire();return n.valid=!0,n.value=i,e&&(n.value=e.call(this.host,i,n)),n}},sU=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const Z3=new Qd(sU);function oU(t,e){return t.replaceAll(/\$\{([^\s:}]*)(?::([^\s:}]+))?\}/g,(i,n)=>n===""?"$":(gm(n,e)??"").toString())}let vA=class{constructor(e,i,n=void 0){this.name=e,this.details=n,this.message=(i&&oU(i,n))??""}toString(){return"["+this.name+"]: "+this.message}},fe=class bA extends vA{constructor(e,i,n){super(e,i,n)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(e,i)=>{if(i&&typeof i=="object"&&typeof i.toJSON=="function")return i;try{return _e(i)}catch{return"[object]"}}))}}catch(e){throw Ce.getLogger("esri.core.Error").error(e),e}return{name:this.name,message:this.message,details:this.details}}static fromJSON(e){return new bA(e.name,e.message,e.details)}};fe.prototype.type="error";function Nb(t,e,i){if(t&&e)if(typeof e=="object")for(const n of Object.getOwnPropertyNames(e))Nb(t,n,e[n]);else{if(e.includes(".")){const s=e.split("."),h=s.splice(-1,1)[0];return void Nb(Br(t,s),h,i)}const n=t.__accessor__;n!=null&&aU(e,n),t[e]=i}}function aU(t,e){if(pe("esri-unknown-property-errors")&&!lU(t,e))throw new fe("set:unknown-property",cU(t,e))}function lU(t,e){return e.metadata[t]!=null}function cU(t,e){return"setting unknown property '"+t+"' on instance of "+e.host.declaredClass}let hU;function uU(){return hU}var vM;(function(t){t[t.Ignore=0]="Ignore",t[t.Destroy=1]="Destroy",t[t.ThrowError=2]="ThrowError"})(vM||(vM={}));function dU(t){t.length=0}let mr=class{constructor(e=50,i=50){this._pool=new Qd(Array,void 0,dU,i,e)}acquire(){return this._pool.acquire()}release(e){this._pool.release(e)}prune(){this._pool.prune(0)}static acquire(){return J3.acquire()}static release(e){return J3.release(e)}static prune(){J3.prune()}};const J3=new mr(100);let wA=class extends Qd{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...e){const i=super.acquire(...e);return this._set.delete(i),i}release(e){e&&!this._set.has(e)&&(super.release(e),this._set.add(e))}_dispose(e){this._set.delete(e),super._dispose(e)}};const sy=[];function zf(t){sy.push(t),sy.length===1&&queueMicrotask(()=>{const e=sy.slice();sy.length=0;for(const i of e)i()})}let ug=class{constructor(e,i=30){this.name=e,this._counter=0,this._samples=new Array(i)}record(e){e!=null&&(this._samples[++this._counter%this._samples.length]=e)}get median(){return this._samples.slice().sort((e,i)=>e-i)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((e,i)=>e+i,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};var R5;(function(t){const e=(h,f,m,v)=>{let x=f,M=f;const $=m>>>1,I=h[x-1];for(;M<=$;){M=x<<1,M<m&&v(h[M-1],h[M])<0&&++M;const P=h[M-1];if(v(P,I)<=0)break;h[x-1]=P,x=M}h[x-1]=I},i=(h,f)=>h<f?-1:h>f?1:0;function n(h,f,m,v){f===void 0&&(f=0),m===void 0&&(m=h.length),v===void 0&&(v=i);for(let M=m>>>1;M>f;M--)e(h,M,m,v);const x=f+1;for(let M=m-1;M>f;M--){const $=h[f];h[f]=h[M],h[M]=$,e(h,x,M,v)}}function*s(h,f,m,v){f===void 0&&(f=0),m===void 0&&(m=h.length),v===void 0&&(v=i);for(let M=m>>>1;M>f;M--)e(h,M,m,v),yield;const x=f+1;for(let M=m-1;M>f;M--){const $=h[f];h[f]=h[M],h[M]=$,e(h,x,M,v),yield}}t.sort=n,t.iterableSort=s})(R5||(R5={}));const bM=R5,pU=1.5,fU=1.1;let dg=class{constructor(e){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new FI,e&&(e.initialSize&&(this.data=new Array(e.initialSize)),e.allocator&&(this._allocator=e.allocator),e.deallocator!==void 0&&(this._deallocator=e.deallocator),e.shrink&&(this._shrink=()=>wM(this)))}toArray(){return this.data.slice(0,this.length)}filter(e){const i=new Array;for(let n=0;n<this._length;n++){const s=this.data[n];e(s)&&i.push(s)}return i}at(e){if((e=Math.trunc(e)||0)<0&&(e+=this._length),!(e<0||e>=this._length))return this.data[e]}includes(e,i){const n=this.data.indexOf(e,i);return n!==-1&&n<this.length}get length(){return this._length}set length(e){if(e>this._length){if(this._allocator){for(;this._length<e;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=e}else{if(this._deallocator)for(let i=e;i<this._length;++i)this.data[i]=this._deallocator(this.data[i]);this._length=e,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(e){this.data[this._length++]=e}pushArray(e,i=e.length){for(let n=0;n<i;n++)this.data[this._length++]=e[n]}fill(e,i){for(let n=0;n<i;n++)this.data[this._length++]=e}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const e=this.data[this._length];return++this._length,e}unshift(e){this.data.unshift(e),this._length++,wM(this)}pop(){if(this.length===0)return;const e=this.data[this.length-1];return this.length=this.length-1,this._shrink(),e}remove(e){const i=I5(this.data,e,this.length,this._hint);if(i!==-1)return this.data.splice(i,1),this.length=this.length-1,e}removeUnordered(e){return this.removeUnorderedIndex(I5(this.data,e,this.length,this._hint))}removeUnorderedIndex(e){if(!(e>=this.length||e<0))return this.swapElements(e,this.length-1),this.pop()}removeUnorderedMany(e,i=e.length,n){this.length=MB(this.data,e,this.length,i,this._hint,n),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(e,i){if(e>=this.length||i>=this.length||e===i)return;const n=this.data[e];this.data[e]=this.data[i],this.data[i]=n}sort(e){bM.sort(this.data,0,this.length,e)}iterableSort(e){return bM.iterableSort(this.data,0,this.length,e)}some(e,i){for(let n=0;n<this.length;++n)if(e.call(i,this.data[n],n,this.data))return!0;return!1}find(e,i){for(let n=0;n<this.length;++n){const s=this.data[n];if(e.call(i,s,n))return s}}filterInPlace(e,i){let n=0;for(let s=0;s<this._length;++s){const h=this.data[s];e.call(i,h,s,this.data)&&(this.data[s]=this.data[n],this.data[n]=h,n++)}if(this._deallocator)for(let s=n;s<this._length;s++)this.data[s]=this._deallocator(this.data[s]);return this._length=n,this._shrink(),this}forAll(e,i){const{data:n,length:s}=this;for(let h=0;h<s;++h)e.call(i,n[h],h,n)}forEach(e,i){this.data.slice(0,this.length).forEach(e,i)}map(e,i){const n=new Array(this.length);for(let s=0;s<this.length;++s)n[s]=e.call(i,this.data[s],s,this.data);return n}reduce(e,i){let n=i;for(let s=0;s<this.length;++s)n=e(n,this.data[s],s,this.data);return n}has(e){const i=this.length,n=this.data;for(let s=0;s<i;++s)if(n[s]===e)return!0;return!1}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.data[e]}};function wM(t){t.data.length>pU*t.length&&(t.data.length=Math.floor(t.length*fU))}function gU(t){return{setTimeout:(e,i)=>{const n=t.setTimeout(e,i);return ut(()=>t.clearTimeout(n))}}}const g0=gU(globalThis);function dw(t){return mU(t)||_A(t)}function mU(t){return t!=null&&typeof t=="object"&&"on"in t&&typeof t.on=="function"}function _A(t){return t!=null&&typeof t=="object"&&"addEventListener"in t&&typeof t.addEventListener=="function"}function vm(t,e,i){if(!dw(t))throw new TypeError("target is not a Evented or EventTarget object");return _A(t)?yU(t,e,i):t.on(e,i)}function yU(t,e,i,n){if(Array.isArray(e)){const s=e.slice();for(const h of s)t.addEventListener(h,i,n);return ut(()=>{for(const h of s)t.removeEventListener(h,i,n)})}return t.addEventListener(e,i,n),ut(()=>t.removeEventListener(e,i,n))}function xA(t,e,i){if(!dw(t))throw new TypeError("target is not a Evented or EventTarget object");if("once"in t)return t.once(e,i);const n=vm(t,e,s=>{n.remove(),i.call(t,s)});return n}function Yt(t="Aborted"){return new fe("AbortError",t)}function Zt(t,e="Aborted"){if(Ss(t))throw Yt(e)}function pw(t){return t instanceof AbortSignal?t:t==null?void 0:t.signal}function Ss(t){const e=pw(t);return e!=null&&e.aborted}function SA(t){if(Zr(t))throw t}function _M(t){if(!Zr(t))throw t}function ys(t,e){const i=pw(t);if(i!=null){if(!i.aborted)return xA(i,"abort",()=>e());e()}}function z6(t,e){const i=pw(t);if(i!=null)return Zt(i),xA(i,"abort",()=>e(Yt()))}function bm(t,e){return pw(e)==null?t:new Promise((i,n)=>{let s=ys(e,()=>n(Yt()));const h=()=>{s=Rt(s)};t.then(h,h),t.then(i,n)})}function Zr(t){return(t==null?void 0:t.name)==="AbortError"}async function ro(t){try{return await t}catch(e){if(!Zr(e))throw e;return}}async function vd(t){if(!t)return;if(typeof t.forEach!="function"){const i=Object.keys(t),n=i.map(f=>t[f]),s=await vd(n),h={};return i.map((f,m)=>h[f]=s[m]),h}const e=t;return Promise.allSettled(e).then(i=>Array.from(e,(n,s)=>{const h=i[s];return h.status==="fulfilled"?{promise:n,value:h.value}:{promise:n,error:h.reason}}))}async function TA(t){return(await Promise.allSettled(t)).filter(e=>e.status==="fulfilled").map(e=>e.value)}async function s9e(t){return(await Promise.allSettled(t)).filter(e=>e.status==="rejected").map(e=>e.reason)}function F6(t,e=void 0,i){const n=new AbortController;return ys(i,()=>n.abort()),new Promise((s,h)=>{let f=setTimeout(()=>{f=0,s(e)},t);ys(n,()=>{f&&(clearTimeout(f),h(Yt()))})})}function vU(t,e){const i=new AbortController,n=setTimeout(()=>i.abort(),e);return ys(t,()=>{i.abort(),clearTimeout(n)}),{...t,signal:i.signal}}function Tc(t){return t&&typeof t.then=="function"}function L5(t){return Tc(t)?t:Promise.resolve(t)}function fw(t,e=-1){let i,n,s,h,f=null;const m=(...v)=>{if(i){n=v,h&&h.reject(Yt()),h=Ts();const I=h.promise;if(f){const P=f;f=null,P.abort()}return I}if(s=h||Ts(),h=null,e>0){const I=new AbortController;i=L5(t(...v,I.signal));const P=i;F6(e).then(()=>{i===P&&(h?I.abort():f=I)})}else i=1,i=L5(t(...v));const x=()=>{const I=n;n=s=i=f=null,I!=null&&m(...I)},M=i,$=s;return M.then(x,x),M.then($.resolve,$.reject),$.promise};return m}function Ts(){let t,e;const i=new Promise((s,h)=>{t=s,e=h}),n=s=>{t(s)};return n.resolve=s=>t(s),n.reject=s=>e(s),n.timeout=(s,h)=>g0.setTimeout(()=>n.reject(h),s),n.promise=i,n}async function xM(t){await Promise.resolve(),Zt(t)}function o9e(t){return t}function bU(t){return 1e3*t}function a9e(t){return t}function l9e(t){return .001*t}let wU=class{constructor(e){this.phases=e,this.paused=!1,this.ticks=-1,this.removed=!1}},_U=class{constructor(e){this.callback=e,this.isActive=!0}remove(){this.isActive=!1}},N5=0;const F0={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},D5=["prepare","preRender","render","postRender","update","finish"],z5=[],Dd=new dg;let xU=class{constructor(e){this._task=e}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}};function SU(){Ed!=null&&(cancelAnimationFrame(Ed),Ed=requestAnimationFrame(j6))}const Db={frameTasks:Dd,willDispatch:!1,clearFrameTasks:TU,dispatch:EA,executeFrameTasks:MU,reschedule:SU};function wm(t){const e=new _U(t);return z5.push(e),Db.willDispatch||(Db.willDispatch=!0,zf(EA)),e}function Ff(t){const e=new wU(t);return Dd.push(e),Ed==null&&(N5=performance.now(),Ed=requestAnimationFrame(j6)),new xU(e)}let Ed=null;function TU(t=!1){Dd.forAll(e=>{e.removed=!0}),t&&MA()}function j6(){const t=performance.now();Ed=null,Ed=Dd.length>0?requestAnimationFrame(j6):null,Db.executeFrameTasks(t)}function MU(t){const e=t-N5;N5=t;const i=1e3/60,n=Math.max(0,e-i);F0.time=t,F0.frameDuration=i-n;for(let s=0;s<D5.length;s++){const h=performance.now(),f=D5[s];Dd.forAll(m=>{var v;m.paused||m.removed||(s===0&&m.ticks++,m.phases[f]&&(F0.elapsedFrameTime=performance.now()-t,F0.deltaTime=m.ticks===0?0:e,(v=m.phases[f])==null||v.call(m,F0)))}),$U[s].record(performance.now()-h)}MA(),CU.record(performance.now()-t)}const oy=new dg;function MA(){Dd.forAll(t=>{t.removed&&oy.push(t)}),Dd.removeUnorderedMany(oy.data,oy.length),oy.clear()}function EA(){for(;z5.length;){const t=z5.shift();t.isActive&&t.callback()}Db.willDispatch=!1}function EU(t=1,e){const i=Ts(),n=()=>{Ss(e)?i.reject(Yt()):t===0?i():(--t,zf(()=>n()))};return n(),i.promise}function kU(t){return EU(1,t)}async function d9e(){await kU(),await new Promise(t=>requestAnimationFrame(t))}const $U=D5.map(t=>new ug(t)),CU=new ug("total");function IU(t,e){for(const i of t.entries())if(e(i[0]))return!0;return!1}function SM(t,e){if(!e)return t;for(const i of e)i!=null&&t.add(i);return t}function p9e(t,e){return e!=null&&t.add(e),t}function kA(t,e){const i=new Set;return SM(i,t),SM(i,e),i}function $A(t,e){const i=new Set;for(const n of e)t.has(n)&&i.add(n);return i}function f9e(t,e){if(!t||!e)return!1;if(t===e)return!0;for(const i of t)if(!e.has(i))return!1;return!0}function g9e(t,e){if(t==null&&e==null)return!0;if(t==null||e==null||t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}function AU(t,e){const i=new Set(t);for(const n of e)i.delete(n);return i}function OU(t,e){return AU(kA(t,e),$A(t,e))}let PU=0;function _f(){return++PU}let gw=class{constructor(e){this._accessed=new Set,this._handles=[],this._observerObject=new RU(e),TM.register(this,new WeakRef(this._observerObject),this)}destroy(){var e;TM.unregister(this._observerObject),this._accessed.clear(),(e=this._observerObject)==null||e.destroy(),this.clear()}onObservableAccessed(e){this._accessed.add(e)}onTrackingEnd(){const e=this._handles,i=this._observerObject;this._accessed.forEach(n=>{e.push(n.observe(i))}),this._accessed.clear()}clear(){const e=this._handles;for(let i=0;i<e.length;++i)e[i].remove();e.length=0}},RU=class{constructor(e){this._notify=e,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const e=this._invalidCount;if(e===1)return this._invalidCount=0,void this._notify();this._invalidCount=e>0?e-1:0}destroy(){this.destroyed=!0,this._notify=LU}};const TM=new FinalizationRegistry(t=>{var e;(e=t.deref())==null||e.destroy()});function LU(){}let xf=!1;const zb=[];function CA(t,e){let i=new gw(h),n=null,s=!1;function h(){if(!i||s)return;if(xf)return void AA(h);const m=n;i.clear(),xf=!0,s=!0,n=mc(i,t),s=!1,xf=!1,e(n,m),OA()}function f(){i&&(i.destroy(),i=null,n=null)}return s=!0,n=mc(i,t),s=!1,ut(f)}function IA(t,e){let i=new gw(s),n=null;function s(){e(n,f)}function h(){i&&(i.destroy(),i=null),n=null}function f(){return i?(i.clear(),n=mc(i,t),n):null}return f(),ut(h)}function NU(t){let e=new gw(n),i=!1;function n(){e&&!i&&(xf?AA(n):(e.clear(),xf=!0,i=!0,mc(e,t),i=!1,xf=!1,OA()))}function s(){e&&(e.destroy(),e=null)}return i=!0,mc(e,t),i=!1,ut(s)}function AA(t){zb.includes(t)||zb.unshift(t)}function OA(){for(;zb.length;)zb.pop()()}var pg;(function(t){t[t.Untracked=0]="Untracked",t[t.Tracked=1]="Tracked"})(pg||(pg={}));let Fg=class{constructor(){this.uid=_f(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(e,i,n,s,h){return this.pool.acquire(pg.Untracked,e,i,n,s,h,L6)}static acquireTracked(e,i,n,s){return this.pool.acquire(pg.Tracked,e,i,n,null,null,s)}notify(e,i){this.type===pg.Untracked?this.callback.call(this.target,e,i,this.path,this.target):this.callback.call(null,e,i,void 0,void 0)}acquire(e,i,n,s,h,f,m){this.uid=_f(),this.removed=!1,this.type=e,this.oldValue=i,this.callback=n,this.getValue=s,this.target=h,this.path=f,this.equals=m}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=_f(),this.removed=!0}};Fg.pool=new wA(Fg);const Mv=new mr,lc=new Set;let Fb;function jb(t){lc.delete(t),lc.add(t),Fb||(Fb=wm(FU))}function DU(t){if(t.removed)return;const e=t.oldValue,i=t.getValue();t.equals(e,i)||(t.oldValue=i,t.notify(i,e))}function zU(t){for(const e of lc.values())e.target===t&&(e.removed=!0)}function FU(){let t=10;for(;Fb&&t--;){Fb=null;const e=jU(),i=Mv.acquire();for(const n of e){const s=n.uid;DU(n),s===n.uid&&n.removed&&i.push(n)}for(const n of lc)n.removed&&(i.push(n),lc.delete(n));for(const n of i)Fg.pool.release(n);Mv.release(i),Mv.release(e),F5.forEach(n=>n())}}function jU(){const t=Mv.acquire();t.length=lc.size;let e=0;for(const i of lc)t[e]=i,++e;return lc.clear(),t}const F5=new Set;function GU(t){return F5.add(t),ut(()=>F5.delete(t))}function VU(t,e,i){let n=lA(t,e,i,(s,h,f)=>{let m,v,x=IA(()=>mm(s,h),(M,$)=>{var I;((I=s.__accessor__)==null?void 0:I.lifecycle)===Gr.DESTROYED||m&&m.uid!==v?n.remove():(m||(m=Fg.acquireUntracked(M,f,$,s,h),v=m.uid),jb(m))});return ut(()=>{x.remove(),m&&(m.uid!==v||m.removed||(m.removed=!0,jb(m)),m=null),n=x=null})});return n}function HU(t,e,i){const n=lA(t,e,i,(s,h,f)=>{let m=!1;return CA(()=>mm(s,h),(v,x)=>{s.__accessor__.lifecycle!==Gr.DESTROYED?m||(m=!0,L6(x,v)||f.call(s,v,x,h,s),m=!1):n.remove()})});return n}function BU(t,e,i,n=!1){return t.__accessor__&&t.__accessor__.lifecycle!==Gr.DESTROYED?n?HU(t,e,i):VU(t,e,i):ut()}function UU(t,e,i){let n,s,h=IA(t,(f,m)=>{n&&n.uid!==s?h.remove():(n||(n=Fg.acquireTracked(f,e,m,i),s=n.uid),jb(n))});return ut(()=>{h.remove(),n&&(n.uid!==s||n.removed||(n.removed=!0,jb(n)),n=null),h=null})}function qU(t,e,i){let n=!1;return CA(t,(s,h)=>{n||(n=!0,i(h,s)||e(s,h),n=!1)})}function WU(t,e,i=!1,n=XI){return i?qU(t,e,n):UU(t,e,n)}function MM(t){return IU(lc,e=>e.oldValue===t)}function mw(t,e){for(const[i,n]of t)if(e(n,i))return!0;return!1}function b9e(t,e){for(const[i,n]of t)if(e(n,i))return n;return null}function G6(t,e,i){const n=t.get(e);if(n!==void 0)return n;const s=i();return t.set(e,s),s}function w9e(t){const e=new Map;return i=>(e.has(i)||e.set(i,t(i)),e.get(i))}const Sf=()=>Ce.getLogger("esri.core.accessorSupport.ensureTypes");function ZU(t){return t==null?t:new Date(t)}function JU(t){return t==null?t:!!t}function KU(t){return t==null?t:t.toString()}function Bo(t){return t==null?t:(t=parseFloat(t),isNaN(t)?0:t)}function V6(t){return t==null?t:Math.round(parseFloat(t))}function YU(t){return null}function PA(t){return(t==null?void 0:t.constructor)&&t.constructor.__accessorMetadata__!==void 0}function Gb(t,e){return e!=null&&t&&!(e instanceof t)}function RA(t){return t&&"isCollection"in t}function EM(t){return t!=null&&t.Type?typeof t.Type=="function"?t.Type:t.Type.base:null}function XU(t,e){if(!(e!=null&&e.constructor)||!RA(e.constructor))return j5(t,e)?e:new t(e);const i=EM(t.prototype.itemType),n=EM(e.constructor.prototype.itemType);return i?n?i===n?e:i.prototype.isPrototypeOf(n.prototype)?new t(e):(j5(t,e),e):new t(e):e}function j5(t,e){return!!PA(e)&&(Sf().error("Accessor#set","Assigning an instance of '"+(e.declaredClass||"unknown")+"' which is not a subclass of '"+vw(t)+"'"),!0)}function yw(t,e){return e==null?e:RA(t)?XU(t,e):Gb(t,e)?j5(t,e)?e:new t(e):e}function vw(t){var e;return((e=t==null?void 0:t.prototype)==null?void 0:e.declaredClass)||"unknown"}const QU=new WeakMap;function eq(t){switch(t){case Number:return Bo;case Ii:return V6;case Boolean:return JU;case String:return KU;case Date:return ZU;case H6:return YU;default:return G6(QU,t,()=>yw.bind(null,t))}}function wn(t,e){const i=eq(t);return arguments.length===1?i:i(e)}function jg(t,e,i){return arguments.length===1?jg.bind(null,t):e&&(Array.isArray(e)?e.map(n=>t(n,i)):[t(e,i)])}function tq(t,e){return arguments.length===1?jg(i=>wn(t,i)):jg(i=>wn(t,i),e)}function LA(t,e,i){return e!==0&&Array.isArray(i)?i.map(n=>LA(t,e-1,n)):t(i)}function Vb(t,e,i){if(arguments.length===2)return h=>Vb(t,e,h);if(!i)return i;i=LA(t,e,i);let n=e,s=i;for(;n>0&&Array.isArray(s);)n--,s=s[0];if(s!==void 0)for(let h=0;h<n;h++)i=[i];return i}function iq(t,e,i){return arguments.length===2?Vb(n=>wn(t,n),e):Vb(n=>wn(t,n),e,i)}function NA(t){return!!Array.isArray(t)&&!t.some(e=>{const i=typeof e;return!(i==="string"||i==="number"||i==="function"&&t.length>1)})}function G5(t,e){if(arguments.length===2)return G5(t).call(null,e);const i=new Set,n=t.filter(m=>typeof m!="function"),s=t.filter(m=>typeof m=="function");for(const m of t)typeof m!="string"&&typeof m!="number"||i.add(m);let h=null,f=null;return(m,v)=>{if(m==null)return m;const x=typeof m,M=x==="string"||x==="number";return M&&(i.has(m)||s.some($=>x==="string"&&$===String||x==="number"&&$===Number))||x==="object"&&s.some($=>!Gb(m,$))?m:(M&&n.length?(h||(h=n.map($=>typeof $=="string"?`'${$}'`:`${$}`).join(", ")),Sf().error("Accessor#set",`'${m}' is not a valid value for this property, only the following values are valid: ${h}`)):typeof m=="object"&&s.length?(f||(f=s.map($=>vw($)).join(", ")),Sf().error("Accessor#set",`'${m}' is not a valid value for this property, value must be one of ${f}`)):Sf().error("Accessor#set",`'${m}' is not a valid value for this property`),v&&(v.valid=!1),null)}}function yc(t,e){if(arguments.length===2)return yc(t).call(null,e);const i={},n=[],s=[];for(const v in t.typeMap){const x=t.typeMap[v];i[v]=wn(x),n.push(vw(x)),s.push(v)}const h=()=>`'${n.join("', '")}'`,f=()=>`'${s.join("', '")}'`,m=typeof t.key=="string"?v=>v[t.key]:t.key;return v=>{if(t.base&&!Gb(t.base,v)||v==null)return v;const x=m(v)||t.defaultKeyValue,M=i[x];if(!M)return Sf().error("Accessor#set",`Invalid property value, value needs to be one of ${h()}, or a plain object that can autocast (having .type = ${f()})`),null;if(!Gb(t.typeMap[x],v))return v;if(typeof t.key=="string"&&!PA(v)){const $={};for(const I in v)I!==t.key&&($[I]=v[I]);return M($)}return M(v)}}let Ii=class{},H6=class{};const S9e={native:t=>({type:"native",value:t}),array:t=>({type:"array",value:t}),oneOf:t=>({type:"one-of",values:t})};function nq(t){if(!t||!("type"in t))return!1;switch(t.type){case"native":case"array":case"one-of":return!0}return!1}function DA(t){switch(t.type){case"native":return wn(t.value);case"array":return jg(DA(t.value));case"one-of":return rq(t);default:return null}}function rq(t){let e=null;return(i,n)=>H5(i,t)?i:(e==null&&(e=V5(t)),Sf().error("Accessor#set",`Invalid property value, value needs to be of type ${e}`),n&&(n.valid=!1),null)}function V5(t){switch(t.type){case"native":switch(t.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case Ii:return"integer";case Date:return"date";case H6:return"null";default:return vw(t.value)}case"array":return`array of ${V5(t.value)}`;case"one-of":{const e=t.values.map(i=>V5(i));return`one of ${e.slice(0,-1)} or ${e[e.length-1]}`}}return"unknown"}function H5(t,e){if(t==null)return!0;switch(e.type){case"native":switch(e.value){case Number:case Ii:return typeof t=="number";case Boolean:return typeof t=="boolean";case String:return typeof t=="string";case H6:return t===null}return t instanceof e.value;case"array":return!!Array.isArray(t)&&!t.some(i=>!H5(i,e.value));case"one-of":return e.values.some(i=>H5(t,i))}}function T(t={}){return(e,i)=>{if(e===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${e.name}.${i}. Accessor does not support static properties.`);const n=Object.getOwnPropertyDescriptor(e,i),s=uw(e,i);n&&(n.get||n.set?(s.get=n.get||s.get,s.set=n.set||s.set):"value"in n&&("value"in t&&Ce.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${i}" on "${e.constructor.name}" already defined in the metadata`,t),s.value=t.value=n.value)),t.readOnly!=null&&(s.readOnly=t.readOnly);const h=t.aliasOf;if(h){const v=typeof h=="string"?h:h.source,x=typeof h=="string"?null:h.overridable===!0;let M;s.dependsOn=[v],s.get=function(){let $=Br(this,v);if(typeof $=="function"){M||(M=v.split(".").slice(0,-1).join("."));const I=Br(this,M);I&&($=$.bind(I))}return $},s.readOnly||(s.set=x?function($){this._override(i,$)}:function($){Nb(this,v,$)})}const f=t.type,m=t.types;s.cast||(f?s.cast=sq(f):m&&(Array.isArray(m)?s.cast=jg(yc(m[0])):s.cast=yc(m))),WB(s,t),t.range&&(s.cast=oq(s.cast,t.range))}}function zA(t,e,i){const n=uw(t,i);n.json||(n.json={});let s=n.json;return e!==void 0&&(s.origins||(s.origins={}),s.origins[e]||(s.origins[e]={}),s=s.origins[e]),s}function sq(t){let e=0,i=t;if(nq(t))return DA(t);for(;Array.isArray(i)&&i.length===1&&typeof i[0]!="string"&&typeof i[0]!="number";)i=i[0],e++;const n=i;if(NA(n))return e===0?G5(n):Vb(G5(n),e);if(e===1)return tq(n);if(e>1)return iq(n,e);const s=t;return s.from?s.from:wn(s)}function oq(t,e){return i=>{let n=+t(i);return e.step!=null&&(n=Math.round(n/e.step)*e.step),e.min!=null&&(n=Math.max(e.min,n)),e.max!=null&&(n=Math.min(e.max,n)),n}}function aq(t){if(t.json&&t.json.origins){const e=t.json.origins,i={"web-document":["web-scene","web-map"]};for(const n in i)if(e[n]){const s=e[n];i[n].forEach(h=>{e[h]=s}),delete e[n]}}}let vc=class extends vA{constructor(e,i,n){super(e,i,n)}};vc.prototype.type="warning";function FA(t){var e;return!!t&&((e=t.prototype)==null?void 0:e.declaredClass)&&t.prototype.declaredClass.indexOf("esri.core.Collection")===0}const B5=()=>Ce.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function kM(t,e,i){var n,s;t&&(!i&&!e.read||(n=e.read)!=null&&n.reader||((s=e.read)==null?void 0:s.enabled)===!1||hq(t)&&Xd("read.reader",B6(t),e))}function B6(t){var i,n;const e=t.ndimArray??0;if(e>1)return cq(t);if(e===1)return $M(t);if("type"in t&&GA(t.type)){const s=(n=(i=t.type.prototype)==null?void 0:i.itemType)==null?void 0:n.Type,h=$M(typeof s=="function"?{type:s}:{types:s});return(f,m,v)=>{const x=h(f,m,v);return x&&new t.type(x)}}return U6(t)}function U6(t){return"type"in t?lq(t.type):uq(t.types)}function lq(t){return t.prototype.read?(e,i,n)=>{if(e==null)return e;const s=typeof e;if(s!=="object")return void B5().error(`Expected JSON value of type 'object' to deserialize type '${t.prototype.declaredClass}', but got '${s}'`);const h=new t;return h.read(e,n),h}:t.fromJSON}function jA(t,e,i,n){return n!==0&&Array.isArray(e)?e.map(s=>jA(t,s,i,n-1)):t(e,void 0,i)}function cq(t){const e=U6(t),i=jA.bind(null,e),n=t.ndimArray??0;return(s,h,f)=>{if(s==null)return s;s=i(s,f,n);let m=n,v=s;for(;m>0&&Array.isArray(v);)m--,v=v[0];if(v!==void 0)for(let x=0;x<m;x++)s=[s];return s}}function $M(t){const e=U6(t);return(i,n,s)=>{if(i==null)return i;if(Array.isArray(i)){const f=[];for(const m of i){const v=e(m,void 0,s);v!==void 0&&f.push(v)}return f}const h=e(i,void 0,s);return h!==void 0?[h]:void 0}}function GA(t){if(!FA(t))return!1;const e=t.prototype.itemType;return!(!e||!e.Type)&&(typeof e.Type=="function"?q6(e.Type):VA(e.Type))}function hq(t){return"types"in t?VA(t.types):q6(t.type)}function q6(t){return!Array.isArray(t)&&!!t&&t.prototype&&("read"in t.prototype||"fromJSON"in t||GA(t))}function VA(t){for(const e in t.typeMap)if(!q6(t.typeMap[e]))return!1;return!0}function uq(t){let e=null;const i=t.errorContext??"type",n=t.validate;return(s,h,f)=>{if(s==null)return s;const m=typeof s;if(m!=="object")return void B5().error(`Expected JSON value of type 'object' to deserialize, but got '${m}'`);e||(e=dq(t));const v=t.key;if(typeof v!="string")return;const x=s[v],M=x?e[x]:t.defaultKeyValue?t.typeMap[t.defaultKeyValue]:void 0;if(!M){const I=`Type '${x||"unknown"}' is not supported`;return f!=null&&f.messages&&s&&f.messages.push(new vc(`${i}:unsupported`,I,{definition:s,context:f})),void B5().error(I)}const $=new M;return $.read(s,f),n?n($):$}}function dq(t){var i,n;const e={};for(const s in t.typeMap){const h=t.typeMap[s],f=ym(h.prototype);if(typeof t.key=="function")continue;const m=f[t.key];if(!m)continue;if((i=m.json)!=null&&i.type&&Array.isArray(m.json.type)&&m.json.type.length===1&&typeof m.json.type[0]=="string"){e[m.json.type[0]]=h;continue}const v=(n=m.json)==null?void 0:n.write;if(!(v!=null&&v.writer)){e[s]=h;continue}const x=v.target,M=typeof x=="string"?x:t.key,$={};v.writer(s,$,M),$[M]&&(e[$[M]]=h)}return e}function pq(t){if(t.json||(t.json={}),IM(t.json),AM(t.json),CM(t.json),t.json.origins)for(const e in t.json.origins)IM(t.json.origins[e]),AM(t.json.origins[e]),CM(t.json.origins[e]);return!0}function CM(t){t.name&&(t.read&&typeof t.read=="object"?t.read.source===void 0&&(t.read.source=t.name):t.read={source:t.name},t.write&&typeof t.write=="object"?t.write.target===void 0&&(t.write.target=t.name):t.write={target:t.name})}function IM(t){typeof t.read=="boolean"?t.read={enabled:t.read}:typeof t.read=="function"?t.read={enabled:!0,reader:t.read}:t.read&&typeof t.read=="object"&&t.read.enabled===void 0&&(t.read.enabled=!0)}function AM(t){typeof t.write=="boolean"?t.write={enabled:t.write}:typeof t.write=="function"?t.write={enabled:!0,writer:t.write}:t.write&&typeof t.write=="object"&&t.write.enabled===void 0&&(t.write.enabled=!0)}function OM(t,e){if(!e.write||e.write.writer||e.write.enabled===!1&&!e.write.overridePolicy)return;const i=(t==null?void 0:t.ndimArray)??0;t&&(i===1||"type"in t&&FA(t.type))?e.write.writer=mq:i>1?e.write.writer=yq(i):e.types?Array.isArray(e.types)?e.write.writer=gq(e.types[0]):e.write.writer=fq(e.types):e.write.writer=Gg}function fq(t){return(e,i,n,s)=>e?HA(e,t,s)?Gg(e,i,n,s):void 0:Gg(e,i,n,s)}function HA(t,e,i){for(const n in e.typeMap)if(t instanceof e.typeMap[n])return!0;if(i!=null&&i.messages){const n=e.errorContext??"type",s=`Values of type '${(typeof e.key!="function"?t[e.key]:t.declaredClass)??"Unknown"}' cannot be written`;i&&i.messages&&t&&i.messages.push(new fe(`${n}:unsupported`,s,{definition:t,context:i})),Ce.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(s)}return!1}function gq(t){return(e,i,n,s)=>!e||!Array.isArray(e)?Gg(e,i,n,s):Gg(e.filter(h=>HA(h,t,s)),i,n,s)}function Gg(t,e,i,n){Xd(i,Hb(t,n),e)}function Hb(t,e){return t&&typeof t.write=="function"?t.write({},e):t&&typeof t.toJSON=="function"?t.toJSON():typeof t=="number"?Bb(t):t}function Bb(t){return t===-1/0?-Number.MAX_VALUE:t===1/0?Number.MAX_VALUE:isNaN(t)?null:t}function mq(t,e,i,n){let s;t===null?s=null:t&&typeof t.map=="function"?(s=t.map(h=>Hb(h,n)),typeof s.toArray=="function"&&(s=s.toArray())):s=[Hb(t,n)],Xd(i,s,e)}function BA(t,e,i){return i!==0&&Array.isArray(t)?t.map(n=>BA(n,e,i-1)):Hb(t,e)}function yq(t){return(e,i,n,s)=>{let h;if(e===null)h=null;else{h=BA(e,s,t);let f=t,m=h;for(;f>0&&Array.isArray(m);)f--,m=m[0];if(m!==void 0)for(let v=0;v<f;v++)h=[h]}Xd(n,h,i)}}function vq(t,e){return W6(t,"any",e==null?void 0:e.origin)}function U5(t,e){return W6(t,"read",e==null?void 0:e.origin)}function UA(t,e){return W6(t,"write",e==null?void 0:e.origin)}function W6(t,e,i){let n=t==null?void 0:t.json;if(n!=null&&n.origins&&i){let s;s=i==="link-chart"?n.origins[i]&&(e==="any"||e in n.origins[i])?n.origins[i]:n.origins["web-map"]:n.origins[i],s&&(e==="any"||e in s)&&(n=s)}return n}function bq(t){var i;const e=wq(t);if(t.json.origins)for(const n in t.json.origins){const s=t.json.origins[n],h=s.types?_q(s):e;kM(h,s,!1),s.types&&!s.write&&((i=t.json.write)!=null&&i.enabled)&&(s.write={...t.json.write}),OM(h,s)}kM(e,t.json,!0),OM(e,t.json)}function wq(t){return t.json.types?q5(t.json):t.type?qA(t):q5(t)}function _q(t){return t.type?qA(t):q5(t)}function qA(t){if(!t.type)return;let e=0,i=t.type;for(;Array.isArray(i)&&!NA(i);)i=i[0],e++;return{type:i,ndimArray:e}}function q5(t){if(!t.types)return;let e=0,i=t.types;for(;Array.isArray(i);)i=i[0],e++;return{types:i,ndimArray:e}}function xq(t){pq(t)&&(aq(t),bq(t))}const K3=new Set,Y3=new Set;function Y(t){return e=>{t??(t="esri.core.Accessor"),e.prototype.declaredClass=t,Tq(e);const i=[],n=[];let s=e.prototype;for(;s;)s.hasOwnProperty("initialize")&&!K3.has(s.initialize)&&(K3.add(s.initialize),i.push(s.initialize)),s.hasOwnProperty("destroy")&&!Y3.has(s.destroy)&&(Y3.add(s.destroy),n.push(s.destroy)),s=Object.getPrototypeOf(s);K3.clear(),Y3.clear();const h=class extends e{constructor(...m){if(super(...m),this.constructor===h&&typeof this.postscript=="function"){if(i.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let v=i.length-1;v>=0;v--)i[v].call(this)}}),n.length){let v=!1;const x=this[sA];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!v){v=!0,x.call(this);for(let M=0;M<n.length;M++)n[M].call(this)}}})}Object.defineProperty(this,Symbol.dispose,{enumerable:!1,configurable:!0,value(){this.destroy()}}),this.postscript()}}};h.__accessorMetadata__=ym(e.prototype),h.prototype.declaredClass=t;const f=(t||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(h,"name",{value:f,configurable:!0}),h}}function Sq(t,e){return e.get==null?function(){const i=this.__accessor__,n=i.propertiesByName.get(t);if(n===void 0)return;Ve(n);const s=i.store;return s.has(t)?s.get(t):n.metadata.value}:function(){const i=this.__accessor__,n=i.propertiesByName.get(t);if(n!==void 0)return n.getComputed(i)}}function Tq(t){const e=t.prototype,i=ym(e),n={};for(const s of Object.getOwnPropertyNames(i)){const h=i[s];xq(h),n[s]={enumerable:!0,configurable:!0,get:Sq(s,h),set(f){const m=this.__accessor__;if(m!==void 0){if(!Object.isFrozen(this))return m.initialized&&h.readOnly?PM("read-only",s):m.lifecycle===Gr.CONSTRUCTED&&h.constructOnly?PM("construct-only",s):void m.set(s,f)}else Object.defineProperty(this,s,{enumerable:!0,configurable:!0,writable:!0,value:f})}}}Object.defineProperties(t.prototype,n)}const PM=(t,e)=>{Ce.getLogger("esri.core.Accessor").error(`cannot assign to ${t} property '${e}'`)};var WA,ZA;function Mq(t){var e;if(t==null)return{value:t};if(Array.isArray(t))return{type:[t[0]],value:null};switch(typeof t){case"object":return(e=t.constructor)!=null&&e.__accessorMetadata__||t instanceof Date?{type:t.constructor,value:t}:t;case"boolean":return{type:Boolean,value:t};case"string":return{type:String,value:t};case"number":return{type:Number,value:t};case"function":return{type:t,value:null};default:return}}const ga=Symbol("Accessor-Handles"),W5=Symbol("Accessor-Initialized");let Re=class JA{static createSubclass(e={}){if(Array.isArray(e))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:i,declaredClass:n,constructor:s}=e;delete e.declaredClass,delete e.properties,delete e.constructor;const h=this;class f extends h{constructor(...v){super(...v),this.inherited=null,s&&s.apply(this,v)}}ym(f.prototype);for(const m in e){const v=e[m];f.prototype[m]=typeof v=="function"?function(...x){const M=this.inherited;let $;this.inherited=function(...I){if(h.prototype[m])return h.prototype[m].apply(this,I)};try{$=v.apply(this,x)}catch(I){throw this.inherited=M,I}return this.inherited=M,$}:e[m]}for(const m in i){const v=Mq(i[m]);T(v)(f.prototype,m)}return Y(n)(f)}constructor(...e){var n;if(this[WA]=null,this[ZA]=!1,this.constructor===JA)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const i=new rU(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:i}),e.length>0&&(i.ctorArgs=((n=this.normalizeCtorArgs)==null?void 0:n.apply(this,e))??e[0])}postscript(){const e=this.__accessor__,i=e.ctorArgs;e.initialize(),i&&(this.set(i),e.ctorArgs=null),e.constructed(),this.initialize(),this[W5]=!0}initialize(){}[sA](){this[ga]=yt(this[ga])}destroy(){var e;this.destroyed||(zU(this),this.__accessor__.destroy(),(e=uU())==null||e.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[W5]}get destroyed(){var e;return((e=this.__accessor__)==null?void 0:e.lifecycle)===Gr.DESTROYED||!1}commitProperty(e){Br(this,e)}get(e){return QI(Ce.getLogger(this),"`Accessor.get` is deprecated in favor of using optional chaining",{version:"4.28",see:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining"}),Br(this,e)}hasOwnProperty(e){return this.__accessor__?this.__accessor__.has(e):Object.prototype.hasOwnProperty.call(this,e)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(e,i){return Nb(this,e,i),this}watch(e,i,n){return BU(this,e,i,n)}addHandles(e,i){if(this.destroyed){const n=Array.isArray(e)?e:[e];for(const s of n)s.remove();return}(this[ga]??(this[ga]=new f0)).add(e,i)}removeHandles(e){var i;(i=this[ga])==null||i.remove(e)}removeAllHandles(){var e;(e=this[ga])==null||e.removeAll()}removeHandlesReference(e){var i;(i=this[ga])==null||i.removeReference(e)}hasHandles(e){var i;return((i=this[ga])==null?void 0:i.has(e))===!0}_override(e,i){i===void 0?this.__accessor__.clearOverride(e):this.__accessor__.override(e,i)}_clearOverride(e){return this.__accessor__.clearOverride(e)}_overrideIfSome(e,i){i==null?this.__accessor__.clearOverride(e):this.__accessor__.override(e,i)}_isOverridden(e){return this.__accessor__.isOverridden(e)}notifyChange(e){this.__accessor__.notifyChange(e)}_get(e){return this.__accessor__.internalGet(e)}_set(e,i){return this.__accessor__.internalSet(e,i),this}};WA=ga,ZA=W5;let Eq=class KA{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const i=new KA;return this._values.forEach((n,s)=>{e&&e.has(s)||i.set(s,_e(n.value),n.origin)}),i}get(e,i){i=this._normalizeOrigin(i);const n=this._values.get(e);return i==null||(n==null?void 0:n.origin)===i?n==null?void 0:n.value:void 0}originOf(e){var i;return((i=this._values.get(e))==null?void 0:i.origin)??Mt.USER}keys(e){e=this._normalizeOrigin(e);const i=[...this._values.keys()];return e==null?i:i.filter(n=>{var s;return((s=this._values.get(n))==null?void 0:s.origin)===e})}set(e,i,n){if((n=this._normalizeOrigin(n))===Mt.DEFAULTS){const s=this._values.get(e);if((s==null?void 0:s.origin)!=null&&s.origin>n)return}this._values.set(e,new kq(i,n))}delete(e,i){var n;(i=this._normalizeOrigin(i))!=null&&((n=this._values.get(e))==null?void 0:n.origin)!==i||this._values.delete(e)}has(e,i){var n;return(i=this._normalizeOrigin(i))!=null?((n=this._values.get(e))==null?void 0:n.origin)===i:this._values.has(e)}forEach(e){this._values.forEach(({value:i},n)=>e(i,n))}_normalizeOrigin(e){if(e!=null)return e===Mt.DEFAULTS?e:Mt.USER}},kq=class{constructor(e,i){this.value=e,this.origin=i}};function $q(t,e,i){e.keys().forEach(s=>{i.set(s,e.get(s),Mt.DEFAULTS)});const n=t.metadata;Object.keys(n).forEach(s=>{t.internalGet(s)&&i.set(s,t.internalGet(s),Mt.DEFAULTS)})}function Cq(t,e,i){if(!(t!=null&&t.read)||t.read.enabled===!1||!t.read.source)return!1;const n=t.read.source;if(typeof n=="string"){if(n===e||n.includes(".")&&n.indexOf(e)===0&&fM(n,i))return!0}else for(const s of n)if(s===e||s.includes(".")&&s.indexOf(e)===0&&fM(s,i))return!0;return!1}function Iq(t){return t&&(!t.read||t.read.enabled!==!1&&!t.read.source)}function Aq(t,e,i,n,s){let h=U5(e[i],s);Iq(h)&&(t[i]=!0);for(const f of Object.getOwnPropertyNames(e))h=U5(e[f],s),Cq(h,i,n)&&(t[f]=!0)}function Oq(t,e,i,n){const s=i.metadata,h=vq(s[e],n),f=h==null?void 0:h.default;if(f===void 0)return;const m=typeof f=="function"?f.call(t,e,n):f;m!==void 0&&i.set(e,m)}const YA={origin:"service"};function Pq(t,e,i=YA){if(!e||typeof e!="object")return;const n=gc(t),s=n.metadata,h={};for(const f of Object.getOwnPropertyNames(e))Aq(h,s,f,e,i);n.setDefaultOrigin(i.origin);for(const f of Object.getOwnPropertyNames(h)){const m=U5(s[f],i).read,v=m==null?void 0:m.source;let x;x=v&&typeof v=="string"?mm(e,v):e[f],m!=null&&m.reader&&(x=m.reader.call(t,x,e,i)),x!==void 0&&n.set(f,x)}if(!i||!i.ignoreDefaults){n.setDefaultOrigin("defaults");for(const f of Object.getOwnPropertyNames(s))h[f]||Oq(t,f,n,i)}n.setDefaultOrigin("user")}function E9e(t,e,i,n=YA){var h;const s={...n,messages:[]};i(s),(h=s.messages)==null||h.forEach(f=>{f.type!=="warning"||t.loaded?n!=null&&n.messages&&n.messages.push(f):t.loadWarnings.push(f)})}function Rq(t,e,i,n,s){var f,m;const h={};return(m=(f=e.write)==null?void 0:f.writer)==null||m.call(t,n,h,i,s),h}function XA(t,e,i,n,s,h){if(!(n!=null&&n.write))return!1;const f=Br(t,i);if(!s&&n.write.overridePolicy){const m=n.write.overridePolicy.call(t,f,i,h??void 0);m!==void 0&&(s=m)}if(s||(s=n.write),!s||s.enabled===!1||s.layerContainerTypes&&(h!=null&&h.layerContainerType)&&!s.layerContainerTypes.includes(h.layerContainerType))return!1;if((f===null&&!s.allowNull&&!s.writerEnsuresNonNull||f===void 0)&&s.isRequired){const m=new fe("web-document-write:property-required",`Missing value for required property '${i}' on '${t.declaredClass}'`,{propertyName:i,target:t});return m&&(h!=null&&h.messages)?h.messages.push(m):m&&!h&&Ce.getLogger("esri.core.accessorSupport.write").error(m.name,m.message),!1}return!(f===void 0||f===null&&!s.allowNull&&!s.writerEnsuresNonNull||!s.alwaysWriteDefaults&&(!e.store.multipleOriginsSupported||e.store.originOf(i)===Mt.DEFAULTS)&&Lq(t,i,h,n,f)||!s.ignoreOrigin&&(h!=null&&h.origin)&&e.store.multipleOriginsSupported&&e.store.originOf(i)<dA(h.origin))}function Lq(t,e,i,n,s){const h=n.default;if(h===void 0)return!1;if(n.defaultEquals!=null)return n.defaultEquals(s);if(typeof h=="function"){if(Array.isArray(s)){const f=h.call(t,e,i??void 0);return Za(f,s)}return!1}return h===s}function k9e(t,e,i,n){const s=gc(t),h=s.metadata,f=UA(h[e],n);return!!f&&XA(t,s,e,f,i,n)}function Nq(t,e,i){var h,f;if(t&&typeof t.toJSON=="function"&&(!t.toJSON.isDefaultToJSON||!t.write))return xv(e,t.toJSON(i));const n=gc(t),s=n.metadata;for(const m in s){const v=UA(s[m],i);if(!XA(t,n,m,v,void 0,i))continue;const x=Br(t,m),M=Rq(t,v,v.write&&typeof v.write.target=="string"?v.write.target:m,x,i);Object.keys(M).length>0&&(e=xv(e,M),(f=(h=i==null?void 0:i.resources)==null?void 0:h.pendingOperations)!=null&&f.length&&i.resources.pendingOperations.push(Promise.all(i.resources.pendingOperations).then(()=>xv(e,M,()=>"replace-arrays"))),i!=null&&i.writtenProperties&&i.writtenProperties.push({target:t,propName:m,oldOrigin:eU(n.store.originOf(m)),newOrigin:i.origin}))}return e}const _m=t=>{let e=class extends t{constructor(...i){super(...i);const n=gc(this),s=n.store,h=new Eq;n.store=h,$q(n,s,h)}read(i,n){Pq(this,i,n)}write(i,n){return Nq(this,i??{},n)}toJSON(i){return this.write({},i)}static fromJSON(i,n){return Dq.call(this,i,n)}};return e=_([Y("esri.core.JSONSupport")],e),e.prototype.toJSON.isDefaultToJSON=!0,e};function Dq(t,e){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const i=new this;return i.read(t,e),i}function Z5(t){return t&&typeof t=="object"&&"toJSON"in t&&typeof t.toJSON=="function"}let Fe=class extends _m(Re){};Fe=_([Y("esri.core.JSONSupport")],Fe);let an=class{constructor(e,i={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=e,this._options=i,this.apiValues=[],this.jsonValues=[],this._apiToJSON=zq(e),this.apiValues=RM(this._apiToJSON),this.jsonValues=RM(this._jsonToAPI),this.read=n=>this.fromJSON(n),this.write=(n,s,h)=>{const f=this.toJSON(n);f!==void 0&&Xd(h,f,s)},this.write.isJSONMapWriter=!0}toJSON(e){if(e==null)return null;if(this._apiToJSON.hasOwnProperty(e)){const i=this._apiToJSON[e];return this._options.useNumericKeys?+i:i}return this._options.ignoreUnknown?void 0:e}fromJSON(e){return e!=null&&this._jsonToAPI.hasOwnProperty(e)?this._jsonToAPI[e]:this._options.ignoreUnknown?void 0:e}};function zq(t){const e={};for(const i in t)e[t[i]]=i;return e}function RM(t){const e=[];for(const i in t)e.push(i);return e.sort(),e}function Tr(){return function(t,e){return new an(t,{ignoreUnknown:!0,...e})}}let Z6=class{constructor(e,i,n,s){this.semiMajorAxis=e,this.flattening=i,this.outerAtmosphereRimWidth=n;const h=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*h,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=s||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const Ei=new Z6(6378137,1/298.257223563,3e5,.006694379990137799),Ha=new Z6(3396190,1/169.8944472236118,23e4),Uh=new Z6(1737400,0,0),Fq="modulepreload",jq=function(t,e){return new URL(t,e).href},LM={},be=function(e,i,n){let s=Promise.resolve();if(i&&i.length>0){const h=document.getElementsByTagName("link"),f=document.querySelector("meta[property=csp-nonce]"),m=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));s=Promise.all(i.map(v=>{if(v=jq(v,n),v in LM)return;LM[v]=!0;const x=v.endsWith(".css"),M=x?'[rel="stylesheet"]':"";if(!!n)for(let P=h.length-1;P>=0;P--){const L=h[P];if(L.href===v&&(!x||L.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${v}"]${M}`))return;const I=document.createElement("link");if(I.rel=x?"stylesheet":Fq,x||(I.as="script",I.crossOrigin=""),I.href=v,m&&I.setAttribute("nonce",m),document.head.appendChild(I),x)return new Promise((P,L)=>{I.addEventListener("load",P),I.addEventListener("error",()=>L(new Error(`Unable to preload CSS for ${v}`)))})}))}return s.then(()=>e()).catch(h=>{const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=h,window.dispatchEvent(f),!f.defaultPrevented)throw h})},Gq=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,Vq={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function NM(t){const e=t==null?void 0:t.match(Gq);if(!e)return null;const[,i,n,s]=e;if(!i)return null;let h=null,f=null,m=null;const{devext:v,qaext:x,www:M}=Vq;if(n)if(h=i,s)switch(s.toLowerCase()){case"devext":({customBaseUrl:f,portalHostname:m}=v);break;case"qa":({customBaseUrl:f,portalHostname:m}=x);break;default:return null}else({customBaseUrl:f,portalHostname:m}=M);else switch(i.toLowerCase()){case"devext":({customBaseUrl:f,portalHostname:m}=v);break;case"qaext":({customBaseUrl:f,portalHostname:m}=x);break;case"www":({customBaseUrl:f,portalHostname:m}=M);break;default:return null}return{customBaseUrl:f,isPortal:!1,portalHostname:m,urlKey:h}}function Hq(t){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(t)}function QA(t){const e=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,i=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,n=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return e.test(t)?t=t.replace(e,"https://www.arcgis.com"):i.test(t)?t=t.replace(i,"https://devext.arcgis.com"):n.test(t)&&(t=t.replace(n,"https://qaext.arcgis.com")),t}function Bq(t){const e=atob(t),i=new Uint8Array(e.length);for(let n=0;n<e.length;n++)i[n]=e.charCodeAt(n);return i.buffer}function Uq(t){const e=new Uint8Array(t);let i="";for(let n=0;n<e.length;n++)i+=String.fromCharCode(e[n]);return btoa(i)}const qq=()=>Ce.getLogger("esri.core.urlUtils"),m0=vt.request,DM="esri/config: esriConfig.request.proxyUrl is not set.",eO=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,tO=/^\s*http:/i,Wq=/^\s*https:/i,Zq=/^\s*file:/i,Jq=/:\d+$/,Kq=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,Yq=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),Xq=new RegExp("^((([^[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^[:]*))(:([0-9]+))?$");let Tf=class{constructor(e=""){this.uri=e,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let i=this.uri.match(Yq);this.scheme=i[2]||(i[1]?"":null),this.authority=i[4]||(i[3]?"":null),this.path=i[5],this.query=i[7]||(i[6]?"":null),this.fragment=i[9]||(i[8]?"":null),this.authority!=null&&(i=this.authority.match(Xq),this.user=i[3]||null,this.password=i[4]||null,this.host=i[6]||i[7],this.port=i[9]||null)}toString(){return this.uri}};const ay={},Qq=new Tf(vt.applicationUrl);let Jn=Qq;const eW=tW();let J6=eW;const K6=()=>Jn,O9e=()=>J6;function tW(){const t=Jn.path,e=t.substring(0,t.lastIndexOf(t.split("/")[t.split("/").length-1]));return`${`${Jn.scheme}://${Jn.host}${Jn.port!=null?`:${Jn.port}`:""}`}${e}`}function _r(t){if(!t)return null;const e={path:null,query:null},i=new Tf(t),n=t.indexOf("?");return i.query===null?e.path=t:(e.path=t.substring(0,n),e.query=Y6(i.query)),i.fragment&&(e.hash=i.fragment,i.query===null&&(e.path=e.path.substring(0,e.path.length-(i.fragment.length+1)))),e}function Y6(t){const e=t.split("&"),i={};for(const n of e){if(!n)continue;const s=n.indexOf("=");let h,f;s<0?(h=decodeURIComponent(n),f=""):(h=decodeURIComponent(n.slice(0,s)),f=decodeURIComponent(n.slice(s+1)));let m=i[h];typeof m=="string"&&(m=i[h]=[m]),Array.isArray(m)?m.push(f):i[h]=f}return i}function Vg(t,e){return t?Object.keys(t).map(i=>{const n=t[i];if(n==null)return"";const s=encodeURIComponent(i)+"=",h=e==null?void 0:e[i];return h?s+encodeURIComponent(h(n)):Array.isArray(n)?n.map(f=>Z5(f)?s+encodeURIComponent(JSON.stringify(f)):s+encodeURIComponent(f)).join("&"):Z5(n)?s+encodeURIComponent(JSON.stringify(n)):s+encodeURIComponent(n)}).filter(i=>i).join("&"):""}function iW(t=!1){let e,i=m0.proxyUrl;if(typeof t=="string"){e=lW(t);const n=bw(t);n&&(i=n.proxyUrl)}else e=!!t;if(!i)throw qq().warn(DM),new fe("urlUtils:proxy-not-set",DM);return e&&K5()&&(i=nS(i)),_r(i)}function P9e(t){const e=bw(t);let i,n;if(e){const s=X6(e.proxyUrl);i=s.path,n=s.query?Y6(s.query):null}if(i){const s=_r(t);t=i+"?"+s.path;const h=Vg({...n,...s.query});h&&(t=`${t}?${h}`)}return t}const j0={path:"",query:""};function X6(t){const e=t.indexOf("?");return e!==-1?(j0.path=t.slice(0,e),j0.query=t.slice(e+1)):(j0.path=t,j0.query=null),j0}function iO(t){return t=(t=qb(t=pW(t=X6(t).path),!0)).toLowerCase()}function nW(t){const e={proxyUrl:t.proxyUrl,urlPrefix:iO(t.urlPrefix)},i=m0.proxyRules,n=e.urlPrefix;let s=i.length;for(let h=0;h<i.length;h++){const f=i[h].urlPrefix;if(n.indexOf(f)===0){if(n.length===f.length)return-1;s=h;break}f.indexOf(n)===0&&(s=h+1)}return i.splice(s,0,e),s}function bw(t){const e=m0.proxyRules,i=iO(t);for(let n=0;n<e.length;n++)if(i.indexOf(e[n].urlPrefix)===0)return e[n]}function R9e(t,e){if(!t||!e)return!1;t=Ub(t),e=Ub(e);const i=NM(t),n=NM(e);return i!=null&&n!=null?i.portalHostname===n.portalHostname:i==null&&n==null&&jf(t,e,!0)}function rW(t,e){return t=Ub(t),e=Ub(e),qb(t)===qb(e)}function Ub(t){const e=(t=cc(t)).indexOf("/sharing");return e>0?t.substring(0,e):t.replace(/\/+$/,"")}function J5(t,e=m0.interceptors){const i=n=>n==null||n instanceof RegExp&&n.test(t)||typeof n=="string"&&t.startsWith(n);if(e){for(const n of e)if(Array.isArray(n.urls)){if(n.urls.some(i))return n}else if(i(n.urls))return n}return null}function jf(t,e,i=!1){if(!t||!e)return!1;const n=X5(t),s=X5(e);return!(!i&&n.scheme!==s.scheme)&&n.host!=null&&s.host!=null&&n.host.toLowerCase()===s.host.toLowerCase()&&n.port===s.port}function Q6(t){if(typeof t=="string"){if(!vs(t))return!0;t=X5(t)}if(jf(t,Jn))return!0;const e=m0.trustedServers||[];for(let i=0;i<e.length;i++){const n=sW(e[i]);for(let s=0;s<n.length;s++)if(jf(t,n[s]))return!0}return!1}function sW(t){return ay[t]||(iS(t)||Ja(t)?ay[t]=[new Tf(Ks(t))]:ay[t]=[new Tf(`http://${t}`),new Tf(`https://${t}`)]),ay[t]}function Ks(t,e=J6,i){return Ja(t)?i!=null&&i.preserveProtocolRelative?t:Jn.scheme==="http"&&Jn.authority===to(t).slice(2)?`http:${t}`:`https:${t}`:iS(t)?t:ww(t[0]==="/"?dW(e):e,t)}function eS(t,e=J6,i){if(t==null||!vs(t))return t;const n=cc(t),s=n.toLowerCase(),h=cc(e).toLowerCase().replace(/\/+$/,""),f=i?cc(i).toLowerCase().replace(/\/+$/,""):null;if(f&&h.indexOf(f)!==0)return t;const m=($,I,P)=>(P=$.indexOf(I,P))===-1?$.length:P;let v=m(s,"/",s.indexOf("//")+2),x=-1;for(;s.slice(0,v+1)===h.slice(0,v)+"/"&&(x=v+1,v!==s.length);)v=m(s,"/",v+1);if(x===-1||f&&x<f.length)return t;t=n.slice(x);const M=h.slice(x-1).replaceAll(/[^/]+/g,"").length;if(M>0)for(let $=0;$<M;$++)t=`../${t}`;else t=`./${t}`;return t}function cc(t){return t=mW(t=gW(t=fW(t=Ks(t=t.trim()))))}function ww(...t){const e=t.filter(ji);if(!(e!=null&&e.length))return;const i=[];if(vs(e[0])){const s=e[0],h=s.indexOf("//");h!==-1&&(i.push(s.slice(0,h+1)),hW(e[0])&&(i[0]+="/"),e[0]=s.slice(h+2))}else e[0][0]==="/"&&i.push("");const n=e.reduce((s,h)=>h?s.concat(h.split("/")):s,[]);for(let s=0;s<n.length;s++){const h=n[s];h===".."&&i.length>0&&i[i.length-1]!==".."?i.pop():(!h&&s===n.length-1||h&&(h!=="."||i.length===0))&&i.push(h)}return i.join("/")}function to(t,e=!1){if(t==null||tS(t)||ep(t))return null;let i=t.indexOf("://");if(i===-1&&Ja(t))i=2;else{if(i===-1)return null;i+=3}const n=t.indexOf("/",i);return n!==-1&&(t=t.slice(0,n)),e&&(t=qb(t,!0)),t}function vs(t){return Ja(t)||iS(t)}function tS(t){return t!=null&&t.slice(0,5)==="blob:"}function ep(t){return t!=null&&t.slice(0,5)==="data:"}function oW(t){const e=Hg(t);return e!=null&&e.isBase64?Bq(e.data):null}function L9e(t){return Uq(t).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const aW=/^data:(.*?)(;base64)?,(.*)$/;function Hg(t){const e=t.match(aW);if(!e)return null;const[,i,n,s]=e;return{mediaType:i,isBase64:!!n,data:s}}function nO(t){return t.isBase64?`data:${t.mediaType};base64,${t.data}`:`data:${t.mediaType},${t.data}`}async function N9e(t){return(await fetch(t)).blob()}function D9e(t){const e=oW(t);if(!e)return null;const i=Hg(t);return new Blob([e],{type:i.mediaType})}function Ja(t){return t!=null&&t[0]==="/"&&t[1]==="/"}function iS(t){return t!=null&&eO.test(t)}function lW(t){return t!=null&&Wq.test(t)||Jn.scheme==="https"&&Ja(t)}function cW(t){return t!=null&&tO.test(t)||Jn.scheme==="http"&&Ja(t)}function hW(t){return t!=null&&Zq.test(t)}function nS(t){return Ja(t)?`https:${t}`:t.replace(tO,"https:")}function uW(){return Jn.scheme==="http"}function K5(){return Jn.scheme==="https"}function qb(t,e=!1){return Ja(t)?t.slice(2):(t=t.replace(eO,""),e&&t.length>1&&t[0]==="/"&&t[1]==="/"&&(t=t.slice(2)),t)}function dW(t){const e=t.indexOf("//"),i=t.indexOf("/",e+2);return i===-1?t:t.slice(0,i)}function z9e(t){let e=0;if(vs(t)){const n=t.indexOf("//");n!==-1&&(e=n+2)}const i=t.lastIndexOf("/");return i<e?t:t.slice(0,i+1)}function F9e(t,e){if(!t)return"";const i=_r(t).path.replace(/\/+$/,""),n=i.substring(i.lastIndexOf("/")+1);if(!(e!=null&&e.length))return n;const s=new RegExp(`\\.(${e.join("|")})$`,"i");return n.replace(s,"")}function pW(t){return t.endsWith("/")?t:`${t}/`}function rO(t){return t.replace(/\/+$/,"")}function fW(t){if(/^https?:\/\//i.test(t)){const e=X6(t);t=(t=e.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),e.query&&(t+=`?${e.query}`)}return t}function gW(t){return t.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function mW(t){const e=m0.httpsDomains;if(!cW(t))return t;const i=t.indexOf("/",7);let n;if(n=i===-1?t:t.slice(0,i),n=n.toLowerCase().slice(7),Jq.test(n)){if(!n.endsWith(":80"))return t;n=n.slice(0,-3),t=t.replace(":80","")}return uW()&&n===Jn.authority&&!Kq.test(t)||(K5()&&n===Jn.authority||e&&e.some(s=>n===s||n.endsWith(`.${s}`))||K5()&&!bw(t))&&(t=nS(t)),t}function Y5(t,e,i){if(!(e&&i&&t&&vs(t)))return t;const n=t.indexOf("//"),s=t.indexOf("/",n+2),h=t.indexOf(":",n+2),f=Math.min(s<0?t.length:s,h<0?t.length:h);return t.slice(n+2,f).toLowerCase()!==e.toLowerCase()?t:`${t.slice(0,n+2)}${i}${t.slice(f)}`}function X5(t){return typeof t=="string"?new Tf(Ks(t)):(t.scheme||(t.scheme=Jn.scheme),t)}function j9e(t){return vW.test(t)}function sO(t,e){const i=_r(t),n=Object.keys(i.query||{});return n.length>0&&e&&e.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${n.join(", ")}.`),i.path}function yW(t,e,i){const n=_r(t),s=n.query||{};return s[e]=String(i),`${n.path}?${Vg(s)}`}function X3(t,e){if(!e)return t;const i=_r(t),n=i.query||{};for(const[h,f]of Object.entries(e))f!=null&&(n[h]=f);const s=Vg(n);return s?`${i.path}?${s}`:i.path}function G9e(t){if(t==null)return null;const e=t.match(oO);return e?e[2]:null}function zM(t){if(t==null)return null;const e=t.match(oO);return e?{path:e[1],extension:e[2]}:{path:t,extension:null}}async function V9e(t){return typeof t=="string"?Hg(t)??{data:t}:new Promise((e,i)=>{const n=new FileReader;n.readAsDataURL(t),n.onload=()=>e(Hg(n.result)),n.onerror=s=>i(s)})}const oO=/([^.]*)\.([^/]*)$/,vW=/(^data:image\/svg|\.svg$)/i,aO="20240709",lO="4e2e659f53c3b60cdade3d91a30466cbe90b86f9";Symbol.dispose??(Symbol.dispose=Symbol("Symbol.dispose")),Symbol.asyncDispose??(Symbol.asyncDispose=Symbol("Symbol.asyncDispose"));const bW="4.30";let qt,rS=bW;rS="4.30.8";function H9e(t){qt=t}function B9e(t){const e=qt==null?void 0:qt.findCredential(t);return e!=null&&e.token?yW(t,"token",e.token):t}pe("host-webworker");const wW=new Set(["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"]);function cO(t){const e=to(t,!0);return!!e&&e.endsWith(".arcgis.com")&&!wW.has(e)&&!t.endsWith("/sharing/rest/generateToken")}function _W(t,e,i=!1,n){return new Promise((s,h)=>{if(Ss(n))return void h(FM());let f=()=>{x(),h(new Error(`Unable to load ${e}`))},m=()=>{const M=t;x(),s(M)},v=()=>{if(!t)return;const M=t;x(),M.src="",h(FM())};const x=()=>{pe("esri-image-decode")||(t.removeEventListener("error",f),t.removeEventListener("load",m)),f=null,m=null,t=null,n!=null&&n.removeEventListener("abort",v),v=null,i&&URL.revokeObjectURL(e)};n!=null&&n.addEventListener("abort",v),pe("esri-image-decode")?t.decode().then(m,f):(t.addEventListener("error",f),t.addEventListener("load",m))})}function FM(){try{return new DOMException("Aborted","AbortError")}catch{const t=new Error;return t.name="AbortError",t}}const hO="Timeout exceeded";function xW(){return new Error(hO)}function U9e(t){return typeof t=="object"&&!!t&&"message"in t&&t.message===hO}function SW(t){vt.request.crossOriginNoCorsDomains||(vt.request.crossOriginNoCorsDomains={});const e=vt.request.crossOriginNoCorsDomains;for(let i of t)i=i.toLowerCase(),/^https?:\/\//.test(i)?e[to(i)??""]=0:(e[to("http://"+i)??""]=0,e[to("https://"+i)??""]=0)}function TW(t){const e=vt.request.crossOriginNoCorsDomains;if(e){let i=to(t);if(i)return i=i.toLowerCase(),!jf(i,K6())&&e[i]<Date.now()-36e5}return!1}async function MW(t){var s;const e=vt.request.crossOriginNoCorsDomains,i=to(t);e&&i&&(e[i.toLowerCase()]=Date.now());const n=_r(t);t=n.path,((s=n.query)==null?void 0:s.f)==="json"&&(t+="?f=json");try{await fetch(t,{mode:"no-cors",credentials:"include"})}catch{}}async function zi(t,e){var I;t instanceof URL&&(t=t.toString()),(e==null?void 0:e.query)instanceof URLSearchParams&&(e.query=Y6(e.query.toString().replaceAll("+"," ")));const i=ep(t),n=tS(t);n||i||(t=cc(t));const s={url:t,requestOptions:{...e}},h=P=>({data:P,getAllHeaders:Gf,getHeader:Gf,httpStatus:200,requestOptions:s.requestOptions,url:s.url}),f=J5(t,Ws.internalInterceptors);if(f){const P=await GM(f,s);if(P!=null)return h(P)}let m=J5(t);if(m){const P=await GM(m,s);if(P!=null)return h(P);m.after||m.error||(m=null)}if(t=s.url,(e=s.requestOptions).responseType==="image"&&(pe("host-webworker")||pe("host-node")))throw Ba("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),s);if(e.method==="head"){if(e.body)throw Ba("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),s);if(i||n)throw Ba("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),s)}if(await IW(),Wb)return Wb.execute(t,e);const v=new AbortController,x=ys(e,()=>v.abort()),M={controller:v,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:m,params:s,redoRequest:!1,useIdentity:Ws.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},$=await RW(M).finally(()=>x==null?void 0:x.remove());return(I=m==null?void 0:m.after)==null||I.call(m,$),$}let Wb;const Ws=vt.request,uO="FormData"in globalThis,EW=new Set([499,498,403,401]),kW=new Set(["COM_0056","COM_0057","SB_0008"]),$W=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],Gf=()=>null,Zb=Symbol();function CW(t){const e=to(t);e&&!zi._corsServers.includes(e)&&zi._corsServers.push(e)}function jM(t){const e=to(t);return!e||e.endsWith(".arcgis.com")||zi._corsServers.includes(e)||Q6(e)}function Ba(t,e,i,n){let s="Error";const h={url:i.url,requestOptions:i.requestOptions,getAllHeaders:Gf,getHeader:Gf,ssl:!1};if(e instanceof fe)return e.details?(e.details=_e(e.details),e.details.url=i.url,e.details.requestOptions=i.requestOptions):e.details=h,e;if(e){const f=n&&(()=>Array.from(n.headers)),m=n&&(M=>n.headers.get(M)),v=n==null?void 0:n.status,x=e.message;x&&(s=x),f&&m&&(h.getAllHeaders=f,h.getHeader=m),h.httpStatus=(e.httpCode!=null?e.httpCode:e.code)||v||0,h.subCode=e.subcode,h.messageCode=e.messageCode,typeof e.details=="string"?h.messages=[e.details]:h.messages=e.details,h.raw=Zb in e?e[Zb]:e}return Zr(e)?Yt():new fe(t,s,h)}async function IW(){pe("host-webworker")&&!Wb&&(Wb=await be(()=>import("./request-Dhezckrn.js"),[],import.meta.url))}async function Q5(){qt||await be(()=>import("./IdentityManager-CF3LejPx.js"),[],import.meta.url)}async function AW(t){var m;const e=t.params.url,i=t.params.requestOptions,n=t.controller.signal,s=i.body;let h=null,f=null;if(uO&&"HTMLFormElement"in globalThis&&(s instanceof FormData?h=s:s instanceof HTMLFormElement&&(h=new FormData(s))),typeof s=="string"&&(f=s),t.fetchOptions={cache:i.cacheBust?"no-cache":"default",credentials:"same-origin",headers:i.headers||{},method:i.method==="head"?"HEAD":"GET",mode:"cors",priority:Ws.priority,redirect:"follow",signal:n},(h||f)&&(t.fetchOptions.body=h||f),i.authMode==="anonymous"&&(t.useIdentity=!1),t.hasToken=!!(/token=/i.test(e)||(m=i.query)!=null&&m.token||h!=null&&h.get("token")),!t.hasToken&&vt.apiKey&&cO(e)&&(i.query||(i.query={}),i.query.token=vt.apiKey,t.hasToken=!0),t.useIdentity&&!t.hasToken&&!t.credentialToken&&!dO(e)&&!Ss(n)){let v;i.authMode==="immediate"?(await Q5(),v=await qt.getCredential(e,{signal:n}),t.credential=v):i.authMode==="no-prompt"?(await Q5(),v=await qt.getCredential(e,{prompt:!1,signal:n}).catch(()=>{}),t.credential=v):qt&&(v=qt.findCredential(e)),v&&(t.credentialToken=v.token,t.useSSL=!!v.ssl)}}function dO(t){return $W.some(e=>e.test(t))}async function OW(t){let e=t.params.url;const i=t.params.requestOptions,n=t.fetchOptions??{},s=tS(e)||ep(e),h=i.responseType||"json",f=s?0:i.timeout!=null?i.timeout:Ws.timeout;let m=!1;if(!s){t.useSSL&&(e=nS(e));let I={...i.query};t.credentialToken&&(I.token=t.credentialToken);let P=Vg(I);pe("esri-url-encodes-apostrophe")&&(P=P.replaceAll("'","%27"));const L=e.length+1+P.length;let z;m=i.method==="delete"||i.method==="post"||i.method==="put"||!!i.body||L>Ws.maxUrlLength;const F=i.useProxy||!!bw(e);if(F){const U=iW(e);z=U.path,!m&&z.length+1+L>Ws.maxUrlLength&&(m=!0),U.query&&(I={...U.query,...I})}if(n.method==="HEAD"&&(m||F)){if(m)throw L>Ws.maxUrlLength?Ba("request:invalid-parameters",new Error("URL exceeds maximum length"),t.params):Ba("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),t.params);if(F)throw Ba("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),t.params)}if(m?(n.method=i.method==="delete"?"DELETE":i.method==="put"?"PUT":"POST",i.body?e=X3(e,I):(n.body=Vg(I),n.headers||(n.headers={}),n.headers["Content-Type"]="application/x-www-form-urlencoded")):e=X3(e,I),F&&(t.useProxy=!0,e=`${z}?${e}`),I.token&&uO&&n.body instanceof FormData&&!Hq(e)&&n.body.set("token",I.token),i.hasOwnProperty("withCredentials"))t.withCredentials=i.withCredentials;else if(!jf(e,K6())){if(Q6(e))t.withCredentials=!0;else if(qt){const U=qt.findServerInfo(e);U!=null&&U.webTierAuth&&(t.withCredentials=!0)}}t.withCredentials&&(n.credentials="include",TW(e)&&await MW(m?X3(e,I):e))}let v,x,M=0,$=!1;f>0&&(M=setTimeout(()=>{$=!0,t.controller.abort()},f));try{if(i.responseType==="native-request-init")x=n,x.url=e;else if(i.responseType!=="image"||n.cache!=="default"||n.method!=="GET"||m||PW(i.headers)||!s&&!t.useProxy&&Ws.proxyUrl&&!jM(e)){if(zi._beforeFetch&&await zi._beforeFetch(e,n),v=await fetch(e,n),zi._afterFetch&&await zi._afterFetch(v),t.useProxy||CW(e),i.responseType==="native")x=v;else if(n.method!=="HEAD")if(v.ok){switch(h){case"array-buffer":x=await v.arrayBuffer();break;case"blob":case"image":x=await v.blob();break;default:x=await v.text()}if(M&&(clearTimeout(M),M=0),h==="json"||h==="xml"||h==="document")if(x)switch(h){case"json":x=JSON.parse(x);break;case"xml":x=VM(x,"application/xml");break;case"document":x=VM(x,"text/html")}else x=null;if(x){if(h==="array-buffer"||h==="blob"){const I=v.headers.get("Content-Type");if(I&&/application\/json|text\/plain/i.test(I)&&x[h==="blob"?"size":"byteLength"]<=750)try{const P=await new Response(x).json();P.error&&(x=P)}catch{}}h==="image"&&x instanceof Blob&&(x=await HM(URL.createObjectURL(x),t,!0))}}else{x=await v.text();try{x=JSON.parse(x)}catch{}}}else x=await HM(e,t)}catch(I){if(I.name==="AbortError")throw $?xW():Yt("Request canceled");if(!(!v&&I instanceof TypeError&&Ws.proxyUrl)||i.body||i.method==="delete"||i.method==="head"||i.method==="post"||i.method==="put"||t.useProxy||jM(e))throw I;t.redoRequest=!0,nW({proxyUrl:Ws.proxyUrl,urlPrefix:to(e)??""})}finally{M&&clearTimeout(M)}return[v,x]}async function GM(t,e){if(t.responseData!=null)return t.responseData;if(t.headers&&(e.requestOptions.headers={...e.requestOptions.headers,...t.headers}),t.query&&(e.requestOptions.query={...e.requestOptions.query,...t.query}),t.before){let i,n;try{n=await t.before(e)}catch(s){i=Ba("request:interceptor",s,e)}if((n instanceof Error||n instanceof fe)&&(i=Ba("request:interceptor",n,e)),i)throw t.error&&t.error(i),i;return n}}function PW(t){if(t){for(const e of Object.getOwnPropertyNames(t))if(t[e])return!0}return!1}function VM(t,e){let i;try{i=new DOMParser().parseFromString(t,e)}catch{}if(!i||i.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return i}async function RW(t){var h,f;let e,i;await AW(t);try{do[e,i]=await OW(t);while(!await LW(t,e,i))}catch(m){const v=Ba("request:server",m,t.params,e);throw v.details.ssl=t.useSSL,(h=t.interceptor)!=null&&h.error&&t.interceptor.error(v),v}const n=t.params.url;if(i&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(n)){if(!t.hasToken&&!t.credentialToken&&((f=i.user)!=null&&f.username)&&!Q6(n)){const m=to(n,!0);m&&Ws.trustedServers.push(m)}Array.isArray(i.authorizedCrossOriginNoCorsDomains)&&SW(i.authorizedCrossOriginNoCorsDomains)}const s=t.credential;if(s&&qt){const m=qt.findServerInfo(s.server);let v=m==null?void 0:m.owningSystemUrl;if(v){v=v.replace(/\/?$/,"/sharing");const x=qt.findCredential(v,s.userId);x&&qt._getIdenticalSvcIdx(v,x)===-1&&x.resources.unshift(v)}}return{data:i,getAllHeaders:e?()=>Array.from(e.headers):Gf,getHeader:e?m=>e.headers.get(m):Gf,httpStatus:(e==null?void 0:e.status)??200,requestOptions:t.params.requestOptions,ssl:t.useSSL,url:t.params.url}}async function LW(t,e,i){var x;if(t.redoRequest)return t.redoRequest=!1,!1;const n=t.params.requestOptions;if(!e||n.responseType==="native"||n.responseType==="native-request-init")return!0;let s,h;if(i&&(i.error&&typeof i.error=="object"?s=i.error:i.status==="error"&&Array.isArray(i.messages)&&(s={...i},s[Zb]=i,s.details=i.messages)),!s&&!e.ok)throw s=new Error(`Unable to load ${e.url} status: ${e.status}`),s[Zb]=i,s;let f,m=null;s&&(h=Number(s.code),m=s.hasOwnProperty("subcode")?Number(s.subcode):null,f=s.messageCode,f=f==null?void 0:f.toUpperCase());const v=n.authMode;if(h===403&&(m===4||(x=s.message)!=null&&x.toLowerCase().includes("ssl")&&!s.message.toLowerCase().includes("permission"))){if(!t.useSSL)return t.useSSL=!0,!1}else if(!t.hasToken&&t.useIdentity&&(v!=="no-prompt"||h===498)&&h!==void 0&&EW.has(h)&&!dO(t.params.url)&&(h!==403||(!f||!kW.has(f))&&(m==null||m===2&&t.credentialToken))){await Q5();try{const M=await qt.getCredential(t.params.url,{error:Ba("request:server",s,t.params),prompt:v!=="no-prompt",signal:t.controller.signal,token:t.credentialToken});return t.credential=M,t.credentialToken=M.token,t.useSSL=t.useSSL||M.ssl,!1}catch(M){if(v==="no-prompt")return t.credential=void 0,t.credentialToken=void 0,!1;s=M}}if(s)throw s;return!0}function HM(t,e,i=!1){const n=e.controller.signal,s=new Image;return e.withCredentials?s.crossOrigin="use-credentials":s.crossOrigin="anonymous",s.alt="",s.fetchPriority=Ws.priority,s.src=t,_W(s,t,i,n)}zi._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"],zi._beforeFetch=void 0,zi._afterFetch=void 0;function Tt(t){if(!vt.assetsPath)throw Ce.getLogger("esri.assets").errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new fe("assets:path-not-set","config.assetsPath is not set");return ww(vt.assetsPath,t)}let Q3,re=null;function sS(){return!!re}function NW(){return!!pe("esri-wasm")}function pO(){return Q3||(Q3=be(()=>import("./pe-wasm-UVK-L31H.js"),[],import.meta.url).then(t=>t.p).then(({default:t})=>t({locateFile:e=>Tt(`esri/geometry/support/${e}`)})).then(t=>{gO(t)}),Q3)}var ex,vi,tx;(function(t){function e(h,f,m){re.ensureCache.prepare();const v=od(m),x=m===v,M=re.ensureFloat64(v),$=re._pe_geog_to_proj(re.getPointer(h),f,M);return $&&Ch(m,f,M,x),$}function i(h,f,m,v){switch(v){case vi.PE_TRANSFORM_P_TO_G:return n(h,f,m);case vi.PE_TRANSFORM_G_TO_P:return e(h,f,m)}return 0}function n(h,f,m){return s(h,f,m,0)}function s(h,f,m,v){re.ensureCache.prepare();const x=od(m),M=m===x,$=re.ensureFloat64(x),I=re._pe_proj_to_geog_center(re.getPointer(h),f,$,v);return I&&Ch(m,f,$,M),I}t.geogToProj=e,t.projGeog=i,t.projToGeog=n,t.projToGeogCenter=s})(ex||(ex={})),function(t){function e(){t.PE_BUFFER_MAX=re.PeDefs.prototype.PE_BUFFER_MAX,t.PE_NAME_MAX=re.PeDefs.prototype.PE_NAME_MAX,t.PE_MGRS_MAX=re.PeDefs.prototype.PE_MGRS_MAX,t.PE_USNG_MAX=re.PeDefs.prototype.PE_USNG_MAX,t.PE_DD_MAX=re.PeDefs.prototype.PE_DD_MAX,t.PE_DDM_MAX=re.PeDefs.prototype.PE_DDM_MAX,t.PE_DMS_MAX=re.PeDefs.prototype.PE_DMS_MAX,t.PE_UTM_MAX=re.PeDefs.prototype.PE_UTM_MAX,t.PE_PARM_MAX=re.PeDefs.prototype.PE_PARM_MAX,t.PE_TYPE_NONE=re.PeDefs.prototype.PE_TYPE_NONE,t.PE_TYPE_GEOGCS=re.PeDefs.prototype.PE_TYPE_GEOGCS,t.PE_TYPE_PROJCS=re.PeDefs.prototype.PE_TYPE_PROJCS,t.PE_TYPE_GEOGTRAN=re.PeDefs.prototype.PE_TYPE_GEOGTRAN,t.PE_TYPE_COORDSYS=re.PeDefs.prototype.PE_TYPE_COORDSYS,t.PE_TYPE_UNIT=re.PeDefs.prototype.PE_TYPE_UNIT,t.PE_TYPE_LINUNIT=re.PeDefs.prototype.PE_TYPE_LINUNIT,t.PE_STR_OPTS_NONE=re.PeDefs.prototype.PE_STR_OPTS_NONE,t.PE_STR_AUTH_NONE=re.PeDefs.prototype.PE_STR_AUTH_NONE,t.PE_STR_AUTH_TOP=re.PeDefs.prototype.PE_STR_AUTH_TOP,t.PE_STR_NAME_CANON=re.PeDefs.prototype.PE_STR_NAME_CANON,t.PE_STR_FMT_WKT=re.PeDefs.prototype.PE_STR_FMT_WKT,t.PE_STR_FMT_WKT2=re.PeDefs.prototype.PE_STR_FMT_WKT2,t.PE_PARM_X0=re.PeDefs.prototype.PE_PARM_X0,t.PE_PARM_ND=re.PeDefs.prototype.PE_PARM_ND,t.PE_TRANSFORM_1_TO_2=re.PeDefs.prototype.PE_TRANSFORM_1_TO_2,t.PE_TRANSFORM_2_TO_1=re.PeDefs.prototype.PE_TRANSFORM_2_TO_1,t.PE_TRANSFORM_P_TO_G=re.PeDefs.prototype.PE_TRANSFORM_P_TO_G,t.PE_TRANSFORM_G_TO_P=re.PeDefs.prototype.PE_TRANSFORM_G_TO_P,t.PE_HORIZON_RECT=re.PeDefs.prototype.PE_HORIZON_RECT,t.PE_HORIZON_POLY=re.PeDefs.prototype.PE_HORIZON_POLY,t.PE_HORIZON_LINE=re.PeDefs.prototype.PE_HORIZON_LINE,t.PE_HORIZON_DELTA=re.PeDefs.prototype.PE_HORIZON_DELTA}t.init=e}(vi||(vi={})),function(t){const e={},i={},n=P=>{if(P){const L=P.getType();switch(L){case vi.PE_TYPE_GEOGCS:P=re.castObject(P,re.PeGeogcs);break;case vi.PE_TYPE_PROJCS:P=re.castObject(P,re.PeProjcs);break;case vi.PE_TYPE_GEOGTRAN:P=re.castObject(P,re.PeGeogtran);break;default:L&vi.PE_TYPE_UNIT&&(P=re.castObject(P,re.PeUnit))}}return P};function s(){re.PeFactory.prototype.initialize(null)}function h(P){return f(vi.PE_TYPE_COORDSYS,P)}function f(P,L){let z=null,F=e[P];if(F||(F={},e[P]=F),F.hasOwnProperty(String(L)))z=F[L];else{const U=re.PeFactory.prototype.factoryByType(P,L);re.compare(U,re.NULL)||(z=U,F[L]=z)}return z=n(z),z}function m(P,L){let z=null,F=i[P];if(F||(F={},i[P]=F),F.hasOwnProperty(L))z=F[L];else{const U=re.PeFactory.prototype.fromString(P,L);re.compare(U,re.NULL)||(z=U,F[L]=z)}return z=n(z),z}function v(P){return f(vi.PE_TYPE_GEOGCS,P)}function x(P){return f(vi.PE_TYPE_GEOGTRAN,P)}function M(P){return re.PeFactory.prototype.getCode(P)}function $(P){return f(vi.PE_TYPE_PROJCS,P)}function I(P){return f(vi.PE_TYPE_UNIT,P)}t.initialize=s,t.coordsys=h,t.factoryByType=f,t.fromString=m,t.geogcs=v,t.geogtran=x,t.getCode=M,t.projcs=$,t.unit=I}(tx||(tx={}));let fO=null;var Jb,ix,nx,rx,Kb,sx,Yb,Xb,ox;function gO(t){function e(h,f,m){h[f]=m(h[f])}re=t,vi.init(),Jb.init(),Kb.init(),Yb.init(),Xb.init(),fO=class extends re.PeGCSExtent{destroy(){re.destroy(this)}};const i=[re.PeDatum,re.PeGeogcs,re.PeGeogtran,re.PeObject,re.PeParameter,re.PePrimem,re.PeProjcs,re.PeSpheroid,re.PeUnit];for(const h of i)e(h.prototype,"getName",f=>function(){return f.call(this,new Array(vi.PE_NAME_MAX))});for(const h of[re.PeGeogtran,re.PeProjcs])e(h.prototype,"getParameters",f=>function(){const m=new Array(vi.PE_PARM_MAX);let v=f.call(this);for(let x=0;x<m.length;x++){const M=re.getValue(v,"*");m[x]=M?re.wrapPointer(M,re.PeParameter):null,v+=Int32Array.BYTES_PER_ELEMENT}return m});e(re.PeHorizon.prototype,"getCoord",h=>function(){const f=this.getSize();if(!f)return null;const m=[];return Ch(m,f,h.call(this)),m}),e(re.PeGTlistExtendedEntry.prototype,"getEntries",h=>{const f=re._pe_getPeGTlistExtendedGTsSize();return function(){let m=null;const v=h.call(this);if(!re.compare(v,re.NULL)){m=[v];const x=this.getSteps();if(x>1){const M=re.getPointer(v);for(let $=1;$<x;$++)m.push(re.wrapPointer(M+f*$,re.PeGTlistExtendedGTs))}}return m}});const n=re._pe_getPeHorizonSize(),s=h=>function(){let f=this._cache;if(f||(f=new Map,this._cache=f),f.has(h))return f.get(h);let m=null;const v=h.call(this);if(!re.compare(v,re.NULL)){m=[v];const x=v.getNump();if(x>1){const M=re.getPointer(v);for(let $=1;$<x;$++)m.push(re.wrapPointer(M+n*$,re.PeHorizon))}}return f.set(h,m),m};e(re.PeProjcs.prototype,"horizonGcsGenerate",s),e(re.PeProjcs.prototype,"horizonPcsGenerate",s),re.PeObject.prototype.toString=function(h=vi.PE_STR_OPTS_NONE){re.ensureCache.prepare();const f=re.getPointer(this),m=re.ensureInt8(new Array(vi.PE_BUFFER_MAX));return re.UTF8ToString(re._pe_object_to_string_ext(f,h,m))}}function ml(t){if(!t)return;const e=re.getClass(t);if(!e)return;const i=re.getCache(e);if(!i)return;const n=re.getPointer(t);n&&delete i[n]}function ly(t,e){const i=[],n=new Array(e);for(let s=0;s<t;s++)i.push(re.ensureInt8(n));return i}function od(t){let e;return Array.isArray(t[0])?(e=[],t.forEach(i=>{e.push(i[0],i[1])})):e=t,e}function Ch(t,e,i,n=!1){if(n)for(let s=0;s<2*e;s++)t[s]=re.getValue(i+s*Float64Array.BYTES_PER_ELEMENT,"double");else{const s=t.length===0;for(let h=0;h<e;h++)s&&(t[h]=new Array(2)),t[h][0]=re.getValue(i,"double"),t[h][1]=re.getValue(i+Float64Array.BYTES_PER_ELEMENT,"double"),i+=2*Float64Array.BYTES_PER_ELEMENT}}(function(t){let e;function i(){t.PE_GTLIST_OPTS_COMMON=re.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,e=re._pe_getPeGTlistExtendedEntrySize()}function n(s,h,f,m,v,x){let M=null;const $=new re.PeInteger(x);try{const I=re.PeGTlistExtended.prototype.getGTlist(s,h,f,m,v,$);if((x=$.val)&&(M=[I],x>1)){const P=re.getPointer(I);for(let L=1;L<x;L++)M.push(re.wrapPointer(P+e*L,re.PeGTlistExtendedEntry))}}finally{re.destroy($)}return M}t.init=i,t.getGTlist=n})(Jb||(Jb={})),function(t){function e(i){if(i!=null&&i.length){for(const n of i)ml(n),n.getEntries().forEach(s=>{ml(s);const h=s.getGeogtran();ml(h),h.getParameters().forEach(ml),[h.getGeogcs1(),h.getGeogcs2()].forEach(f=>{ml(f);const m=f.getDatum();ml(m),ml(m.getSpheroid()),ml(f.getPrimem()),ml(f.getUnit())})});re.PeGTlistExtendedEntry.prototype.Delete(i[0])}}t.destroy=e}(ix||(ix={})),function(t){function e(i,n,s,h,f){re.ensureCache.prepare();const m=od(s),v=s===m,x=re.ensureFloat64(m);let M=0;h&&(M=re.ensureFloat64(h));const $=re._pe_geog_to_geog(re.getPointer(i),n,x,M,f);return $&&Ch(s,n,x,v),$}t.geogToGeog=e}(nx||(nx={})),function(t){const e=(x,M,$,I,P,L)=>{let z,F;switch(re.ensureCache.prepare(),x){case"dd":z=re._pe_geog_to_dd,F=vi.PE_DD_MAX;break;case"ddm":z=re._pe_geog_to_ddm,F=vi.PE_DDM_MAX;break;case"dms":z=re._pe_geog_to_dms,F=vi.PE_DMS_MAX}let U=0;M&&(U=re.getPointer(M));const W=od(I),K=re.ensureFloat64(W),J=ly($,F),te=z(U,$,K,P,re.ensureInt32(J));if(te)for(let ie=0;ie<$;ie++)L[ie]=re.UTF8ToString(J[ie]);return te},i=(x,M,$,I,P)=>{let L;switch(re.ensureCache.prepare(),x){case"dd":L=re._pe_dd_to_geog;break;case"ddm":L=re._pe_ddm_to_geog;break;case"dms":L=re._pe_dms_to_geog}let z=0;M&&(z=re.getPointer(M));const F=I.map(J=>re.ensureString(J)),U=re.ensureInt32(F),W=re.ensureFloat64(new Array(2*$)),K=L(z,$,U,W);return K&&Ch(P,$,W),K};function n(x,M,$,I,P){return e("dms",x,M,$,I,P)}function s(x,M,$,I){return i("dms",x,M,$,I)}function h(x,M,$,I,P){return e("ddm",x,M,$,I,P)}function f(x,M,$,I){return i("ddm",x,M,$,I)}function m(x,M,$,I,P){return e("dd",x,M,$,I,P)}function v(x,M,$,I){return i("dd",x,M,$,I)}t.geogToDms=n,t.dmsToGeog=s,t.geogToDdm=h,t.ddmToGeog=f,t.geogToDd=m,t.ddToGeog=v}(rx||(rx={})),function(t){function e(){t.PE_MGRS_STYLE_NEW=re.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,t.PE_MGRS_STYLE_OLD=re.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,t.PE_MGRS_STYLE_AUTO=re.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,t.PE_MGRS_180_ZONE_1_PLUS=re.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,t.PE_MGRS_ADD_SPACES=re.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function i(s,h,f,m,v,x,M){re.ensureCache.prepare();let $=0;s&&($=re.getPointer(s));const I=od(f),P=re.ensureFloat64(I),L=ly(h,vi.PE_MGRS_MAX),z=re.ensureInt32(L),F=re._pe_geog_to_mgrs_extended($,h,P,m,v,x,z);if(F)for(let U=0;U<h;U++)M[U]=re.UTF8ToString(L[U]);return F}function n(s,h,f,m,v){re.ensureCache.prepare();let x=0;s&&(x=re.getPointer(s));const M=f.map(L=>re.ensureString(L)),$=re.ensureInt32(M),I=re.ensureFloat64(new Array(2*h)),P=re._pe_mgrs_to_geog_extended(x,h,$,m,I);return P&&Ch(v,h,I),P}t.init=e,t.geogToMgrsExtended=i,t.mgrsToGeogExtended=n}(Kb||(Kb={})),function(t){function e(n,s,h,f,m,v,x){re.ensureCache.prepare();let M=0;n&&(M=re.getPointer(n));const $=od(h),I=re.ensureFloat64($),P=ly(s,vi.PE_MGRS_MAX),L=re.ensureInt32(P),z=re._pe_geog_to_usng(M,s,I,f,m,v,L);if(z)for(let F=0;F<s;F++)x[F]=re.UTF8ToString(P[F]);return z}function i(n,s,h,f){re.ensureCache.prepare();let m=0;n&&(m=re.getPointer(n));const v=h.map(I=>re.ensureString(I)),x=re.ensureInt32(v),M=re.ensureFloat64(new Array(2*s)),$=re._pe_usng_to_geog(m,s,x,M);return $&&Ch(f,s,M),$}t.geogToUsng=e,t.usngToGeog=i}(sx||(sx={})),function(t){function e(){t.PE_UTM_OPTS_NONE=re.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,t.PE_UTM_OPTS_ADD_SPACES=re.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,t.PE_UTM_OPTS_NS=re.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function i(s,h,f,m,v){re.ensureCache.prepare();let x=0;s&&(x=re.getPointer(s));const M=od(f),$=re.ensureFloat64(M),I=ly(h,vi.PE_UTM_MAX),P=re.ensureInt32(I),L=re._pe_geog_to_utm(x,h,$,m,P);if(L)for(let z=0;z<h;z++)v[z]=re.UTF8ToString(I[z]);return L}function n(s,h,f,m,v){re.ensureCache.prepare();let x=0;s&&(x=re.getPointer(s));const M=f.map(L=>re.ensureString(L)),$=re.ensureInt32(M),I=re.ensureFloat64(new Array(2*h)),P=re._pe_utm_to_geog(x,h,$,m,I);return P&&Ch(v,h,I),P}t.init=e,t.geogToUtm=i,t.utmToGeog=n}(Yb||(Yb={})),function(t){const e=new Map;function i(){t.PE_PCSINFO_OPTION_NONE=re.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,t.PE_PCSINFO_OPTION_DOMAIN=re.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,t.PE_POLE_OUTSIDE_BOUNDARY=re.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,t.PE_POLE_POINT=re.PePCSInfo.prototype.PE_POLE_POINT}function n(s,h=t.PE_PCSINFO_OPTION_DOMAIN){let f=null,m=null;return e.has(s)&&(m=e.get(s),m[h]&&(f=m[h])),f||(f=re.PePCSInfo.prototype.generate(s,h),m||(m=[],e.set(s,m)),m[h]=f),f}t.init=i,t.generate=n}(Xb||(Xb={})),function(t){function e(){return re.PeVersion.prototype.version_string()}t.versionString=e}(ox||(ox={}));const DW=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return ex},get PeDefs(){return vi},get PeFactory(){return tx},get PeGCSExtent(){return fO},get PeGTTransformations(){return nx},get PeGTlistExtended(){return Jb},get PeGTlistExtendedEntry(){return ix},get PeNotationDms(){return rx},get PeNotationMgrs(){return Kb},get PeNotationUsng(){return sx},get PeNotationUtm(){return Yb},get PePCSInfo(){return Xb},get PeVersion(){return ox},_init:gO,get _pe(){return re},isLoaded:sS,isSupported:NW,load:pO},Symbol.toStringTag,{value:"Module"}));var Ys;(function(t){t[t.CGCS2000=4490]="CGCS2000",t[t.GCSMARS2000=104971]="GCSMARS2000",t[t.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",t[t.GCSMOON2000=104903]="GCSMOON2000"})(Ys||(Ys={}));let E;const H={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9895:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,10160:0,10183:0,10188:0,10194:0,10199:0,10207:0,10212:0,10217:0,10222:0,10227:0,10235:0,10240:0,10250:0,10254:0,10270:0,10275:0,10280:0,10306:0,10329:0,10471:0,10477:0,10481:2,10516:2,20002:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2,103897:1};for(E=2e3;E<=2045;E++)H[E]=0;for(E=2056;E<=2065;E++)H[E]=0;for(E=2067;E<=2135;E++)H[E]=0;for(E=2137;E<=2154;E++)H[E]=0;for(E=2161;E<=2170;E++)H[E]=0;for(E=2172;E<=2193;E++)H[E]=0;for(E=2195;E<=2198;E++)H[E]=0;for(E=2200;E<=2203;E++)H[E]=0;for(E=2205;E<=2217;E++)H[E]=0;for(E=2222;E<=2224;E++)H[E]=1;for(E=2225;E<=2250;E++)H[E]=2;for(E=2251;E<=2253;E++)H[E]=1;for(E=2257;E<=2264;E++)H[E]=2;for(E=2274;E<=2279;E++)H[E]=2;for(E=2280;E<=2282;E++)H[E]=1;for(E=2283;E<=2289;E++)H[E]=2;for(E=2290;E<=2292;E++)H[E]=0;for(E=2308;E<=2313;E++)H[E]=0;for(E=2315;E<=2491;E++)H[E]=0;for(E=2494;E<=2866;E++)H[E]=0;for(E=2867;E<=2869;E++)H[E]=1;for(E=2870;E<=2888;E++)H[E]=2;for(E=2891;E<=2895;E++)H[E]=2;for(E=2896;E<=2898;E++)H[E]=1;for(E=2902;E<=2908;E++)H[E]=2;for(E=2915;E<=2920;E++)H[E]=2;for(E=2921;E<=2923;E++)H[E]=1;for(E=2924;E<=2930;E++)H[E]=2;for(E=2931;E<=2962;E++)H[E]=0;for(E=2964;E<=2968;E++)H[E]=2;for(E=2969;E<=2973;E++)H[E]=0;for(E=2975;E<=2991;E++)H[E]=0;for(E=2995;E<=3051;E++)H[E]=0;for(E=3054;E<=3079;E++)H[E]=0;for(E=3081;E<=3088;E++)H[E]=0;for(E=3092;E<=3101;E++)H[E]=0;for(E=3106;E<=3138;E++)H[E]=0;for(E=3146;E<=3151;E++)H[E]=0;for(E=3153;E<=3166;E++)H[E]=0;for(E=3168;E<=3172;E++)H[E]=0;for(E=3174;E<=3203;E++)H[E]=0;for(E=3294;E<=3358;E++)H[E]=0;for(E=3367;E<=3403;E++)H[E]=0;for(E=3408;E<=3416;E++)H[E]=0;for(E=3417;E<=3438;E++)H[E]=2;for(E=3441;E<=3446;E++)H[E]=2;for(E=3447;E<=3450;E++)H[E]=0;for(E=3451;E<=3459;E++)H[E]=2;for(E=3460;E<=3478;E++)H[E]=0;for(E=3554;E<=3559;E++)H[E]=0;for(E=3560;E<=3570;E++)H[E]=2;for(E=3571;E<=3581;E++)H[E]=0;for(E=3594;E<=3597;E++)H[E]=0;for(E=3601;E<=3604;E++)H[E]=0;for(E=3637;E<=3639;E++)H[E]=0;for(E=3665;E<=3667;E++)H[E]=0;for(E=3693;E<=3695;E++)H[E]=0;for(E=3701;E<=3727;E++)H[E]=0;for(E=3728;E<=3739;E++)H[E]=2;for(E=3740;E<=3751;E++)H[E]=0;for(E=3753;E<=3760;E++)H[E]=2;for(E=3761;E<=3773;E++)H[E]=0;for(E=3775;E<=3777;E++)H[E]=0;for(E=3779;E<=3781;E++)H[E]=0;for(E=3783;E<=3785;E++)H[E]=0;for(E=3788;E<=3791;E++)H[E]=0;for(E=3797;E<=3802;E++)H[E]=0;for(E=3814;E<=3816;E++)H[E]=0;for(E=3825;E<=3829;E++)H[E]=0;for(E=3832;E<=3841;E++)H[E]=0;for(E=3844;E<=3852;E++)H[E]=0;for(E=3873;E<=3885;E++)H[E]=0;for(E=3890;E<=3893;E++)H[E]=0;for(E=3907;E<=3912;E++)H[E]=0;for(E=3942;E<=3950;E++)H[E]=0;for(E=3968;E<=3970;E++)H[E]=0;for(E=3973;E<=3976;E++)H[E]=0;for(E=3986;E<=3989;E++)H[E]=0;for(E=3994;E<=3997;E++)H[E]=0;for(E=4048;E<=4051;E++)H[E]=0;for(E=4056;E<=4063;E++)H[E]=0;for(E=4093;E<=4096;E++)H[E]=0;for(E=4390;E<=4398;E++)H[E]=0;for(E=4399;E<=4413;E++)H[E]=2;for(E=4418;E<=4433;E++)H[E]=2;for(E=4455;E<=4457;E++)H[E]=2;for(E=4484;E<=4489;E++)H[E]=0;for(E=4491;E<=4554;E++)H[E]=0;for(E=4568;E<=4589;E++)H[E]=0;for(E=4652;E<=4656;E++)H[E]=0;for(E=4766;E<=4800;E++)H[E]=0;for(E=5014;E<=5016;E++)H[E]=0;for(E=5069;E<=5072;E++)H[E]=0;for(E=5105;E<=5130;E++)H[E]=0;for(E=5167;E<=5188;E++)H[E]=0;for(E=5253;E<=5259;E++)H[E]=0;for(E=5269;E<=5275;E++)H[E]=0;for(E=5292;E<=5311;E++)H[E]=0;for(E=5329;E<=5331;E++)H[E]=0;for(E=5343;E<=5349;E++)H[E]=0;for(E=5355;E<=5357;E++)H[E]=0;for(E=5387;E<=5389;E++)H[E]=0;for(E=5459;E<=5463;E++)H[E]=0;for(E=5479;E<=5482;E++)H[E]=0;for(E=5518;E<=5520;E++)H[E]=0;for(E=5530;E<=5539;E++)H[E]=0;for(E=5550;E<=5552;E++)H[E]=0;for(E=5562;E<=5583;E++)H[E]=0;for(E=5623;E<=5625;E++)H[E]=2;for(E=5631;E<=5639;E++)H[E]=0;for(E=5649;E<=5653;E++)H[E]=0;for(E=5663;E<=5680;E++)H[E]=0;for(E=5682;E<=5685;E++)H[E]=0;for(E=5875;E<=5877;E++)H[E]=0;for(E=5896;E<=5899;E++)H[E]=0;for(E=5921;E<=5940;E++)H[E]=0;for(E=6050;E<=6125;E++)H[E]=0;for(E=6244;E<=6275;E++)H[E]=0;for(E=6328;E<=6348;E++)H[E]=0;for(E=6350;E<=6356;E++)H[E]=0;for(E=6366;E<=6372;E++)H[E]=0;for(E=6381;E<=6387;E++)H[E]=0;for(E=6393;E<=6404;E++)H[E]=0;for(E=6480;E<=6483;E++)H[E]=0;for(E=6511;E<=6514;E++)H[E]=0;for(E=6579;E<=6581;E++)H[E]=0;for(E=6619;E<=6624;E++)H[E]=0;for(E=6625;E<=6627;E++)H[E]=2;for(E=6628;E<=6632;E++)H[E]=0;for(E=6634;E<=6637;E++)H[E]=0;for(E=6669;E<=6692;E++)H[E]=0;for(E=6707;E<=6709;E++)H[E]=0;for(E=6720;E<=6723;E++)H[E]=0;for(E=6732;E<=6738;E++)H[E]=0;for(E=6931;E<=6933;E++)H[E]=0;for(E=6956;E<=6959;E++)H[E]=0;for(E=7005;E<=7007;E++)H[E]=0;for(E=7057;E<=7070;E++)H[E]=2;for(E=7074;E<=7082;E++)H[E]=0;for(E=7109;E<=7118;E++)H[E]=0;for(E=7119;E<=7127;E++)H[E]=1;for(E=7374;E<=7376;E++)H[E]=0;for(E=7528;E<=7586;E++)H[E]=0;for(E=7587;E<=7645;E++)H[E]=2;for(E=7692;E<=7696;E++)H[E]=0;for(E=7755;E<=7787;E++)H[E]=0;for(E=7791;E<=7795;E++)H[E]=0;for(E=7799;E<=7801;E++)H[E]=0;for(E=7803;E<=7805;E++)H[E]=0;for(E=7825;E<=7831;E++)H[E]=0;for(E=7845;E<=7859;E++)H[E]=0;for(E=8013;E<=8032;E++)H[E]=0;for(E=8065;E<=8068;E++)H[E]=1;for(E=8518;E<=8529;E++)H[E]=2;for(E=8533;E<=8536;E++)H[E]=2;for(E=8538;E<=8540;E++)H[E]=2;for(E=8677;E<=8679;E++)H[E]=0;for(E=8836;E<=8840;E++)H[E]=0;for(E=8857;E<=8859;E++)H[E]=0;for(E=8908;E<=8910;E++)H[E]=0;for(E=9154;E<=9159;E++)H[E]=0;for(E=9205;E<=9218;E++)H[E]=0;for(E=9271;E<=9273;E++)H[E]=0;for(E=9295;E<=9297;E++)H[E]=0;for(E=9356;E<=9360;E++)H[E]=0;for(E=9404;E<=9407;E++)H[E]=0;for(E=9476;E<=9482;E++)H[E]=0;for(E=9487;E<=9494;E++)H[E]=0;for(E=9697;E<=9699;E++)H[E]=0;for(E=9821;E<=9865;E++)H[E]=0;for(E=10285;E<=10291;E++)H[E]=0;for(E=10314;E<=10317;E++)H[E]=0;for(E=10448;E<=10465;E++)H[E]=0;for(E=10731;E<=10733;E++)H[E]=0;for(E=11114;E<=11118;E++)H[E]=0;for(E=20004;E<=20032;E++)H[E]=0;for(E=20047;E<=20049;E++)H[E]=0;for(E=20062;E<=20092;E++)H[E]=0;for(E=20135;E<=20138;E++)H[E]=0;for(E=20248;E<=20258;E++)H[E]=0;for(E=20348;E<=20358;E++)H[E]=0;for(E=20436;E<=20440;E++)H[E]=0;for(E=20822;E<=20824;E++)H[E]=0;for(E=20904;E<=20932;E++)H[E]=0;for(E=20934;E<=20936;E++)H[E]=0;for(E=21004;E<=21032;E++)H[E]=0;for(E=21035;E<=21037;E++)H[E]=0;for(E=21095;E<=21097;E++)H[E]=0;for(E=21148;E<=21150;E++)H[E]=0;for(E=21207;E<=21264;E++)H[E]=0;for(E=21307;E<=21364;E++)H[E]=0;for(E=21413;E<=21423;E++)H[E]=0;for(E=21453;E<=21463;E++)H[E]=0;for(E=21473;E<=21483;E++)H[E]=0;for(E=21780;E<=21782;E++)H[E]=0;for(E=21891;E<=21894;E++)H[E]=0;for(E=21896;E<=21899;E++)H[E]=0;for(E=22171;E<=22177;E++)H[E]=0;for(E=22181;E<=22187;E++)H[E]=0;for(E=22191;E<=22197;E++)H[E]=0;for(E=22207;E<=22222;E++)H[E]=0;for(E=22229;E<=22232;E++)H[E]=0;for(E=22234;E<=22236;E++)H[E]=0;for(E=22243;E<=22250;E++)H[E]=0;for(E=22262;E<=22265;E++)H[E]=0;for(E=22307;E<=22322;E++)H[E]=0;for(E=22348;E<=22357;E++)H[E]=0;for(E=22407;E<=22422;E++)H[E]=0;for(E=22462;E<=22465;E++)H[E]=0;for(E=22521;E<=22525;E++)H[E]=0;for(E=22607;E<=22622;E++)H[E]=0;for(E=22641;E<=22646;E++)H[E]=0;for(E=22648;E<=22657;E++)H[E]=0;for(E=22707;E<=22722;E++)H[E]=0;for(E=22762;E<=22765;E++)H[E]=0;for(E=22807;E<=22822;E++)H[E]=0;for(E=22991;E<=22994;E++)H[E]=0;for(E=23028;E<=23038;E++)H[E]=0;for(E=23301;E<=23333;E++)H[E]=2;for(E=23830;E<=23853;E++)H[E]=0;for(E=23866;E<=23872;E++)H[E]=0;for(E=23877;E<=23884;E++)H[E]=0;for(E=23886;E<=23894;E++)H[E]=0;for(E=23946;E<=23948;E++)H[E]=0;for(E=24311;E<=24313;E++)H[E]=0;for(E=24342;E<=24347;E++)H[E]=0;for(E=24370;E<=24374;E++)H[E]=10;for(E=24375;E<=24381;E++)H[E]=0;for(E=24718;E<=24721;E++)H[E]=0;for(E=24817;E<=24821;E++)H[E]=0;for(E=24877;E<=24882;E++)H[E]=0;for(E=24891;E<=24893;E++)H[E]=0;for(E=25391;E<=25395;E++)H[E]=0;for(E=25828;E<=25838;E++)H[E]=0;for(E=26191;E<=26195;E++)H[E]=0;for(E=26391;E<=26393;E++)H[E]=0;for(E=26701;E<=26722;E++)H[E]=0;for(E=26729;E<=26799;E++)H[E]=2;for(E=26801;E<=26803;E++)H[E]=2;for(E=26811;E<=26813;E++)H[E]=2;for(E=26847;E<=26870;E++)H[E]=2;for(E=26891;E<=26899;E++)H[E]=0;for(E=26901;E<=26923;E++)H[E]=0;for(E=26929;E<=26946;E++)H[E]=0;for(E=26948;E<=26998;E++)H[E]=0;for(E=27037;E<=27040;E++)H[E]=0;for(E=27205;E<=27232;E++)H[E]=0;for(E=27258;E<=27260;E++)H[E]=0;for(E=27391;E<=27398;E++)H[E]=0;for(E=27561;E<=27564;E++)H[E]=0;for(E=27571;E<=27574;E++)H[E]=0;for(E=27581;E<=27584;E++)H[E]=0;for(E=27591;E<=27594;E++)H[E]=0;for(E=27700;E<=27707;E++)H[E]=0;for(E=28191;E<=28193;E++)H[E]=0;for(E=28348;E<=28358;E++)H[E]=0;for(E=28402;E<=28432;E++)H[E]=0;for(E=28462;E<=28492;E++)H[E]=0;for(E=29118;E<=29122;E++)H[E]=0;for(E=29168;E<=29172;E++)H[E]=0;for(E=29177;E<=29185;E++)H[E]=0;for(E=29187;E<=29195;E++)H[E]=0;for(E=29900;E<=29903;E++)H[E]=0;for(E=30161;E<=30179;E++)H[E]=0;for(E=30491;E<=30494;E++)H[E]=0;for(E=30729;E<=30732;E++)H[E]=0;for(E=31251;E<=31259;E++)H[E]=0;for(E=31265;E<=31268;E++)H[E]=0;for(E=31275;E<=31279;E++)H[E]=0;for(E=31281;E<=31297;E++)H[E]=0;for(E=31461;E<=31469;E++)H[E]=0;for(E=31491;E<=31495;E++)H[E]=0;for(E=31917;E<=31922;E++)H[E]=0;for(E=31965;E<=32e3;E++)H[E]=0;for(E=32001;E<=32003;E++)H[E]=2;for(E=32005;E<=32031;E++)H[E]=2;for(E=32033;E<=32060;E++)H[E]=2;for(E=32064;E<=32067;E++)H[E]=2;for(E=32074;E<=32077;E++)H[E]=2;for(E=32081;E<=32086;E++)H[E]=0;for(E=32107;E<=32130;E++)H[E]=0;for(E=32133;E<=32159;E++)H[E]=0;for(E=32164;E<=32167;E++)H[E]=2;for(E=32180;E<=32199;E++)H[E]=0;for(E=32201;E<=32260;E++)H[E]=0;for(E=32301;E<=32360;E++)H[E]=0;for(E=32401;E<=32460;E++)H[E]=0;for(E=32501;E<=32560;E++)H[E]=0;for(E=32601;E<=32662;E++)H[E]=0;for(E=32664;E<=32667;E++)H[E]=2;for(E=32701;E<=32761;E++)H[E]=0;for(E=53001;E<=53004;E++)H[E]=0;for(E=53008;E<=53019;E++)H[E]=0;for(E=53021;E<=53032;E++)H[E]=0;for(E=53034;E<=53037;E++)H[E]=0;for(E=53042;E<=53046;E++)H[E]=0;for(E=53074;E<=53080;E++)H[E]=0;for(E=54001;E<=54004;E++)H[E]=0;for(E=54008;E<=54019;E++)H[E]=0;for(E=54021;E<=54032;E++)H[E]=0;for(E=54034;E<=54037;E++)H[E]=0;for(E=54042;E<=54046;E++)H[E]=0;for(E=54048;E<=54053;E++)H[E]=0;for(E=54074;E<=54080;E++)H[E]=0;for(E=54098;E<=54101;E++)H[E]=0;for(E=102001;E<=102040;E++)H[E]=0;for(E=102042;E<=102063;E++)H[E]=0;for(E=102065;E<=102067;E++)H[E]=0;for(E=102070;E<=102117;E++)H[E]=0;for(E=102122;E<=102216;E++)H[E]=0;for(E=102221;E<=102377;E++)H[E]=0;for(E=102382;E<=102388;E++)H[E]=0;for(E=102389;E<=102398;E++)H[E]=2;for(E=102399;E<=102444;E++)H[E]=0;for(E=102445;E<=102447;E++)H[E]=2;for(E=102448;E<=102458;E++)H[E]=0;for(E=102459;E<=102468;E++)H[E]=2;for(E=102469;E<=102499;E++)H[E]=0;for(E=102500;E<=102519;E++)H[E]=1;for(E=102520;E<=102524;E++)H[E]=0;for(E=102525;E<=102529;E++)H[E]=2;for(E=102530;E<=102588;E++)H[E]=0;for(E=102590;E<=102598;E++)H[E]=0;for(E=102601;E<=102603;E++)H[E]=0;for(E=102605;E<=102628;E++)H[E]=0;for(E=102629;E<=102646;E++)H[E]=2;for(E=102648;E<=102700;E++)H[E]=2;for(E=102701;E<=102703;E++)H[E]=0;for(E=102707;E<=102730;E++)H[E]=2;for(E=102733;E<=102758;E++)H[E]=2;for(E=102767;E<=102900;E++)H[E]=0;for(E=102901;E<=102933;E++)H[E]=2;for(E=102934;E<=102950;E++)H[E]=13;for(E=102951;E<=102963;E++)H[E]=0;for(E=102965;E<=102969;E++)H[E]=0;for(E=102971;E<=102973;E++)H[E]=0;for(E=102975;E<=102989;E++)H[E]=0;for(E=102990;E<=102992;E++)H[E]=1;for(E=102997;E<=103002;E++)H[E]=0;for(E=103003;E<=103008;E++)H[E]=2;for(E=103009;E<=103011;E++)H[E]=0;for(E=103012;E<=103014;E++)H[E]=2;for(E=103019;E<=103021;E++)H[E]=0;for(E=103022;E<=103024;E++)H[E]=2;for(E=103029;E<=103031;E++)H[E]=0;for(E=103032;E<=103034;E++)H[E]=2;for(E=103065;E<=103068;E++)H[E]=0;for(E=103074;E<=103076;E++)H[E]=0;for(E=103077;E<=103079;E++)H[E]=1;for(E=103080;E<=103082;E++)H[E]=0;for(E=103083;E<=103085;E++)H[E]=2;for(E=103090;E<=103093;E++)H[E]=0;for(E=103097;E<=103099;E++)H[E]=0;for(E=103100;E<=103102;E++)H[E]=2;for(E=103107;E<=103109;E++)H[E]=0;for(E=103110;E<=103112;E++)H[E]=2;for(E=103113;E<=103116;E++)H[E]=0;for(E=103117;E<=103120;E++)H[E]=2;for(E=103153;E<=103157;E++)H[E]=0;for(E=103158;E<=103162;E++)H[E]=2;for(E=103163;E<=103165;E++)H[E]=0;for(E=103166;E<=103168;E++)H[E]=1;for(E=103169;E<=103171;E++)H[E]=2;for(E=103186;E<=103188;E++)H[E]=0;for(E=103189;E<=103191;E++)H[E]=2;for(E=103192;E<=103195;E++)H[E]=0;for(E=103196;E<=103199;E++)H[E]=2;for(E=103200;E<=103224;E++)H[E]=0;for(E=103225;E<=103227;E++)H[E]=1;for(E=103232;E<=103237;E++)H[E]=0;for(E=103238;E<=103243;E++)H[E]=2;for(E=103244;E<=103246;E++)H[E]=0;for(E=103247;E<=103249;E++)H[E]=2;for(E=103254;E<=103256;E++)H[E]=0;for(E=103257;E<=103259;E++)H[E]=2;for(E=103264;E<=103266;E++)H[E]=0;for(E=103267;E<=103269;E++)H[E]=2;for(E=103300;E<=103375;E++)H[E]=0;for(E=103381;E<=103383;E++)H[E]=0;for(E=103384;E<=103386;E++)H[E]=1;for(E=103387;E<=103389;E++)H[E]=0;for(E=103390;E<=103392;E++)H[E]=2;for(E=103397;E<=103399;E++)H[E]=0;for(E=103400;E<=103471;E++)H[E]=2;for(E=103476;E<=103478;E++)H[E]=0;for(E=103479;E<=103481;E++)H[E]=2;for(E=103486;E<=103488;E++)H[E]=0;for(E=103489;E<=103491;E++)H[E]=2;for(E=103492;E<=103495;E++)H[E]=0;for(E=103496;E<=103499;E++)H[E]=2;for(E=103528;E<=103543;E++)H[E]=0;for(E=103544;E<=103548;E++)H[E]=2;for(E=103549;E<=103551;E++)H[E]=0;for(E=103552;E<=103554;E++)H[E]=1;for(E=103555;E<=103557;E++)H[E]=2;for(E=103558;E<=103560;E++)H[E]=0;for(E=103571;E<=103573;E++)H[E]=0;for(E=103574;E<=103576;E++)H[E]=2;for(E=103577;E<=103580;E++)H[E]=0;for(E=103581;E<=103583;E++)H[E]=2;for(E=103595;E<=103694;E++)H[E]=0;for(E=103696;E<=103699;E++)H[E]=0;for(E=103700;E<=103793;E++)H[E]=2;for(E=103794;E<=103890;E++)H[E]=0;for(E=103891;E<=103896;E++)H[E]=2;for(E=103900;E<=103971;E++)H[E]=2;for(E=103972;E<=103977;E++)H[E]=0;for(E=112e3;E<=112101;E++)H[E]=0;const mO=[102100,102113,3857,3785],zW=[104905,104971],FW=[4326,...mO,...zW],BM='PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',cy=[-20037508342788905e-9,20037508342788905e-9],hy=[-20037508342787e-6,20037508342787e-6],yO={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:cy,origin:hy,dx:1e-5},102100:{wkTemplate:BM,valid:cy,origin:hy,dx:1e-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:cy,origin:hy,dx:1e-5},3857:{wkTemplate:BM,valid:cy,origin:hy,dx:1e-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function bi(t,e){if(t===e)return!0;if(t==null||e==null)return!1;const i=t.wkid,n=e.wkid;if(i!=null||n!=null){if(i===n||Ms(t)&&Ms(e))return!0;const f=t.latestWkid;if(f!=null&&n===f)return!0;const m=e.latestWkid;return m!=null&&i===m}let s,h;return t.wkt2&&e.wkt2?(s=t.wkt2,h=e.wkt2):t.wkt&&e.wkt&&(s=t.wkt,h=e.wkt),!(!s||!h)&&s.toUpperCase()===h.toUpperCase()}function er(t){const e=t==null?void 0:t.wkid;return e!=null&&e>=2e3&&yO[e]||null}function Qb(t){if(!t)return;const{wkid:e,vcsWkid:i}=t;if(e)return i?JSON.stringify({wkid:e,vcsWkid:i}):String(e);const n=t.wkt||t.wkt2;return JSON.stringify(n?i?{wkt:n,vcsWkid:i}:{wkt:n}:{})}function au(t){if(!vr(t))return!1;const{wkid:e}=t;if(e)return H[e]==null;const i=t.wkt2||t.wkt;return!!i&&/^\s*(?:GEOGCS|GEOGCRS|GEOGRAPHICCRS)/i.test(i)}function jW(t){return!(oS(t)||aS(t))}function qh(t){return(t==null?void 0:t.wkid)===4326}function q9e(t){return/^\s*(?:GEOD|GEODETIC|GEOG|GEOGRAPHIC|PROJ|PROJECTED|VERT|VERTICAL|ENG|ENGINEERING|PARAMETRIC|TIME|DERIVEDPROJ|COMPOUND|BOUND)CRS/i.test(t)}function ax(t){return(t==null?void 0:t.wkid)===Ys.CGCS2000}function Ms(t){const e=t==null?void 0:t.wkid;return e!=null&&e>=2e3&&mO.includes(e)}function GW(t){return(t==null?void 0:t.wkid)===32662}function _w(t){return t===Ys.GCSMARS2000||t===Ys.GCSMARS2000_SPHERE}function oS(t){return _w(t==null?void 0:t.wkid)}function xw(t){return t===Ys.GCSMOON2000}function aS(t){return xw(t==null?void 0:t.wkid)}function VW(t){const e=t==null?void 0:t.wkid;return e!=null&&e>=2e3&&FW.includes(e)}function vr(t){if(t==null)return!1;const e=t.wkid;return e!=null&&e>=2e3||t.wkt2!=null||t.wkt!=null}const vO={wkid:4326,wkt:N6(yO[4326].wkTemplate,{Central_Meridian:"0.0"})},bO={wkid:102100,latestWkid:3857},HW={wkid:32662};function lS(t){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${t.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const BW=lS(Ei),cS=lS(Ha),hS=lS(Uh),UW={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${Ei.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`},qW=cS.wkt.toUpperCase(),WW=hS.wkt.toUpperCase();function uS(t){if(t!=null&&vr(t)){const e=t.wkid,i=t.wkt2??t.wkt;if(_w(e))return Ha;const n=i==null?void 0:i.toUpperCase();if(i&&n===qW)return Ha;if(xw(e)||n&&n===WW)return Uh}return Ei}function W9e(t){return _w(t)?Ha:xw(t)?Uh:Ei}function e2(t){return bi(t,BW)}function Wh(t){return e2(t)||bi(t,cS)||bi(t,hS)}const wO=39.37,ZW=Ei.radius*Math.PI/200,_O=/(?:LENGTH)?UNIT\[([^\]]+)]]$/i,kd=H,xO=/UNIT\[([^\]]+)]/i,JW=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),KW=Tr()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),ca=t=>t*t,Lc=t=>t*t*t,Bg={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:ca(.001)},"square-centimeters":{inBaseUnits:ca(.01)},"square-decimeters":{inBaseUnits:ca(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:ca(1e3)},"square-inches":{inBaseUnits:ca(.0254)},"square-feet":{inBaseUnits:ca(.3048)},"square-yards":{inBaseUnits:ca(.9144)},"square-miles":{inBaseUnits:ca(1609.344)},"square-us-feet":{inBaseUnits:ca(1200/3937)},acres:{inBaseUnits:.0015625*ca(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*Lc(.001)},"cubic-centimeters":{inBaseUnits:1e3*Lc(.01)},"cubic-decimeters":{inBaseUnits:1e3*Lc(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*Lc(1e3)},"cubic-inches":{inBaseUnits:1e3*Lc(.0254)},"cubic-feet":{inBaseUnits:1e3*Lc(.3048)},"cubic-yards":{inBaseUnits:1e3*Lc(.9144)},"cubic-miles":{inBaseUnits:1e3*Lc(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},YW=(()=>{const t={};for(const e in Bg)for(const i in Bg[e].units)t[i]=e;return t})();function XW(t,e,i){return t*Bg[i].units[e].inBaseUnits}function QW(t,e,i){return t/Bg[i].units[e].inBaseUnits}const SO=["metric","imperial","inches","feet","yards","miles","nautical-miles","us-feet","meters","kilometers"],eZ=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]);function zd(t){const e=YW[t];if(!e)throw new Error("unknown type");return e}function UM(t,e=null){return e=e||zd(t),Bg[e].baseUnit===t}function ii(t,e,i){if(e===i)return t;const n=zd(e);if(n!==zd(i))throw new Error("incompatible units");const s=UM(e,n)?t:XW(t,e,n);return UM(i,n)?s:QW(s,i,n)}function tZ(t){switch(t){case"metric":return"meters";case"imperial":return"feet";default:return t}}function Z9e(t){return tZ(t)}function J9e(t){switch(t){case"metric":return"square-meters";case"imperial":return"square-feet";default:return t}}function K9e(t,e){const i=ii(t,e,"meters");return Math.abs(i)<3e3?"meters":"kilometers"}function Y9e(t,e){const i=ii(t,e,"meters");return Math.abs(i)<1e5?"meters":"kilometers"}function X9e(t,e){const i=ii(t,e,"feet");return Math.abs(i)<1e3?"feet":"miles"}function Q9e(t,e){const i=ii(t,e,"feet");return Math.abs(i)<1e5?"feet":"miles"}function e4e(t,e){const i=ii(t,e,"square-meters");return Math.abs(i)<3e6?"square-meters":"square-kilometers"}function t4e(t,e){const i=ii(t,e,"square-feet");return Math.abs(i)<1e6?"square-feet":"square-miles"}function TO(t,e,i){return ii(t,e,"meters")/(i*Math.PI/180)}function MO(t){return KW.fromJSON(t.toLowerCase())||null}function lx(t){if(t!=null&&!jW(t))return 1;const e=ir(t);return e>1e5?1:e}function EO(t){return ir(t)>=uS(t).metersPerDegree?"meters":xm(t)}function ir(t,e=Ei.metersPerDegree){return kO(t,!0)??e}function kO(t,e=!1){const i=(t==null?void 0:t.wkid)??null,n=(t==null?void 0:t.wkt2)??(t==null?void 0:t.wkt)??null;let s=null;if(i){if(_w(i))return Ha.metersPerDegree;if(xw(i))return Uh.metersPerDegree;s=kd.values[kd[i]],!s&&e&&JW.has(i)&&(s=ZW)}else n&&(dS(n)?s=qM(_O.exec(n),s):IO(n)&&(s=qM(xO.exec(n),s)));return s}function i4e(t){return au(t)?1:ir(t)}function qM(t,e){return t!=null&&t[1]?$O(t[1]):e}function $O(t){return parseFloat(t.split(",")[1])}function xm(t){const e=(t==null?void 0:t.wkid)??null,i=(t==null?void 0:t.wkt2)??(t==null?void 0:t.wkt)??null;let n=null;if(e)n=kd.units[kd[e]];else if(i){const s=dS(i)?_O:IO(i)?xO:null;if(s){const h=s.exec(i);h!=null&&h[1]&&(n=rZ(h[1]))}}return n!=null?MO(n):null}function iZ(t){const e=xm(t);return e!=null&&SO.includes(e)?e:null}function CO(t){const e=EO(t);return e!=null&&SO.includes(e)?e:null}function n4e(t){const e=xm(t);return e==null?null:eZ.get(e)}function IO(t){return/^GEOCCS/i.test(t)}function dS(t){return/^\s*(?:PROJCS|PROJCRS|PROJECTEDCRS)/i.test(t)}const nZ=1e-7;function rZ(t){const e=/[\\"']{1}([^\\"']+)/.exec(t);let i=e==null?void 0:e[1];if(!i||!kd.units.includes(i)){const n=$O(t);i=null;const s=kd.values;for(let h=0;h<s.length;++h)if(Math.abs(n-s[h])<nZ){i=kd.units[h];break}}return i}function r4e(t){const e=xm(t);if(e==null)return null;switch(e){case"feet":case"us-feet":case"clarke-feet":case"clarke-yards":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"benoit-1895-b-chains":case"indian-yards":case"indian-1937-yards":case"gold-coast-feet":case"sears-1922-truncated-chains":return"imperial";case"50-kilometers":case"150-kilometers":case"meters":return"metric"}return null}const sZ={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},oZ={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},aZ={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},s4e=Tr()(sZ),o4e=Tr()(oZ),a4e=Tr()(aZ);function _t(t,e,i){let n,s;return e===void 0?(s=t,n=[void 0]):typeof e!="string"?(s=t,n=[void 0],i=e):(s=e,n=Array.isArray(t)?t:[t]),(h,f)=>{const m=h.constructor.prototype;for(const v of n){const x=zA(h,v,s);x.write&&typeof x.write=="object"||(x.write={}),i&&(x.write.target=i),x.write.writer=m[f]}}}var ma;let St=ma=class extends Fe{static fromJSON(t){if(!t)return null;if(t.wkid){if(t.wkid===102100)return ma.WebMercator;if(t.wkid===4326)return ma.WGS84}const e=new ma;return e.read(t),e}constructor(t){super(t),this.latestWkid=null,this.wkid=null,this.wkt=null,this.wkt2=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(t){return t&&typeof t=="object"?t:{[typeof t=="string"?"wkt":"wkid"]:t}}get isWGS84(){return qh(this)}get isWebMercator(){return Ms(this)}get isGeographic(){return au(this)}get isWrappable(){return VW(this)}get metersPerUnit(){return ir(this)}get unit(){return xm(this)||(this.isGeographic?"degrees":null)}writeWkt(t,e){this.wkid||(e.wkt=t)}clone(){if(this===ma.WGS84)return new ma(vO);if(this===ma.WebMercator)return new ma(bO);const t=new ma;return this.wkid!=null?(t.wkid=this.wkid,this.latestWkid!=null&&(t.latestWkid=this.latestWkid),this.vcsWkid!=null&&(t.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(t.latestVcsWkid=this.latestVcsWkid)):(this.wkt!=null&&(t.wkt=this.wkt),this.wkt2!=null&&(t.wkt2=this.wkt2)),this.imageCoordinateSystem&&(t.imageCoordinateSystem=_e(this.imageCoordinateSystem)),t}equals(t){if(t==null)return!1;if(this.imageCoordinateSystem||t.imageCoordinateSystem){if(this.imageCoordinateSystem==null||t.imageCoordinateSystem==null)return!1;const{id:e,referenceServiceName:i}=t.imageCoordinateSystem,{geodataXform:n}=t.imageCoordinateSystem,s=this.imageCoordinateSystem;return e==null||n?JSON.stringify(s)===JSON.stringify(t.imageCoordinateSystem):i?s.id===e&&s.referenceServiceName===i:s.id===e}return bi(this,t)}toJSON(t){return this.write(void 0,t)}};St.GCS_NAD_1927=null,St.WGS84=null,St.WebMercator=null,St.PlateCarree=null,_([T({readOnly:!0})],St.prototype,"isWGS84",null),_([T({readOnly:!0})],St.prototype,"isWebMercator",null),_([T({readOnly:!0})],St.prototype,"isGeographic",null),_([T({readOnly:!0})],St.prototype,"isWrappable",null),_([T({type:Ii,json:{write:!0}})],St.prototype,"latestWkid",void 0),_([T({readOnly:!0})],St.prototype,"metersPerUnit",null),_([T({readOnly:!0})],St.prototype,"unit",null),_([T({type:Ii,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],St.prototype,"wkid",void 0),_([T({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],St.prototype,"wkt",void 0),_([_t("wkt"),_t("web-scene","wkt")],St.prototype,"writeWkt",null),_([T({type:String,json:{write:!1}})],St.prototype,"wkt2",void 0),_([T({type:Ii,json:{write:!0}})],St.prototype,"vcsWkid",void 0),_([T({type:Ii,json:{write:!0}})],St.prototype,"latestVcsWkid",void 0),_([T()],St.prototype,"imageCoordinateSystem",void 0),St=ma=_([Y("esri.geometry.SpatialReference")],St),St.prototype.toJSON.isDefaultToJSON=!0,St.GCS_NAD_1927=new St({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'}),St.WGS84=new St(vO),St.WebMercator=new St(bO),St.PlateCarree=new St(HW),Object.freeze&&(Object.freeze(St.GCS_NAD_1927),Object.freeze(St.WGS84),Object.freeze(St.WebMercator),Object.freeze(St.PlateCarree));const tt=St,lZ=57.29577951308232,cZ=.017453292519943;function WM(t){return t*lZ}function ZM(t){return t*cZ}function JM(t){return t/Ei.radius}function KM(t){return Math.PI/2-2*Math.atan(Math.exp(-t/Ei.radius))}function cx(t){return t.wkid!=null||t.wkt!=null}const e_=[0,0];function t2(t,e,i,n,s){const h=t,f=s;if(f.spatialReference=i,"x"in h&&"x"in f)[f.x,f.y]=e(h.x,h.y,e_,n);else if("xmin"in h&&"xmin"in f)[f.xmin,f.ymin]=e(h.xmin,h.ymin,e_,n),[f.xmax,f.ymax]=e(h.xmax,h.ymax,e_,n);else if("paths"in h&&"paths"in f||"rings"in h&&"rings"in f){const m="paths"in h?h.paths:h.rings,v=[];let x;for(let M=0;M<m.length;M++){const $=m[M];x=[],v.push(x);for(let I=0;I<$.length;I++)x.push(e($[I][0],$[I][1],[0,0],n)),$[I].length>2&&x[I].push($[I][2]),$[I].length>3&&x[I].push($[I][3])}"paths"in f?f.paths=v:f.rings=v}else if("points"in h&&"points"in f){const m=h.points,v=[];for(let x=0;x<m.length;x++)v[x]=e(m[x][0],m[x][1],[0,0],n),m[x].length>2&&v[x].push(m[x][2]),m[x].length>3&&v[x].push(m[x][3]);f.points=v}return s}function Ev(t,e){const i=t&&(cx(t)?t:t.spatialReference),n=e&&(cx(e)?e:e.spatialReference);return!(t&&"type"in t&&t.type==="mesh"||e&&"type"in e&&e.type==="mesh"||!i||!n)&&(!!bi(n,i)||Ms(n)&&qh(i)||Ms(i)&&qh(n))}function Sw(t,e){if(t==null)return null;const i=t.spatialReference,n=e&&(cx(e)?e:e.spatialReference);return Ev(i,n)?bi(i,n)?_e(t):Ms(n)?t2(t,df,tt.WebMercator,!1,_e(t)):qh(n)?t2(t,Tw,tt.WGS84,!1,_e(t)):null:null}function df(t,e,i=[0,0]){e>89.99999?e=89.99999:e<-89.99999&&(e=-89.99999);const n=ZM(e);return i[0]=ZM(t)*Ei.radius,i[1]=Ei.halfSemiMajorAxis*Math.log((1+Math.sin(n))/(1-Math.sin(n))),i}function Tw(t,e,i=[0,0],n=!1){const s=WM(t/Ei.radius);return i[0]=n?s:s-360*Math.floor((s+180)/360),i[1]=WM(Math.PI/2-2*Math.atan(Math.exp(-e/Ei.radius))),i}function hc(t,e=!1,i=_e(t)){return t2(t,df,tt.WebMercator,e,i)}function Oh(t,e=!1,i=_e(t)){return t2(t,Tw,tt.WGS84,e,i)}const Ka=$6({center:{x:-0,y:-0},scale:-0,extent:null}),hZ=C6(Ka,t=>{if(t&&t.center){const e=Oh(t.center);return`${e.x.toFixed(4)}, ${e.y.toFixed(4)}`}return"-0.0000, -0.0000"}),uZ=C6(Ka,t=>{if(t&&t.extent)return JSON.stringify(t.extent,null,4)}),dZ=C6(Ka,t=>{if(t&&t.extent){let e=t.extent;const i=Oh(e);return JSON.stringify(i,null,4)}return"{}"}),AO=$6("full-size"),lo=t=>{let e=class extends t{clone(){var v;const i=gc(this);nA(i,"unable to clone instance of non-accessor class");const n=i.metadata,s=i.store,h={},f=new Map;for(const x in n){const M=n[x],$=s==null?void 0:s.originOf(x),I=M.clonable;if(M.readOnly||I===!1||$!==Mt.USER&&$!==Mt.DEFAULTS&&$!==Mt.WEB_MAP&&$!==Mt.WEB_SCENE)continue;const P=this[x];let L=null;L=typeof I=="function"?I(P):I==="reference"?P:A5(P),P!=null&&L==null||($===Mt.DEFAULTS?f.set(x,L):h[x]=L)}const m=new(Object.getPrototypeOf(this)).constructor(h);if(f.size){const x=(v=gc(m))==null?void 0:v.store;if(x)for(const[M,$]of f)x.set(M,$,Mt.DEFAULTS)}return m}};return e=_([Y("esri.core.Clonable")],e),e};let hx=class extends lo(Re){};hx=_([Y("esri.core.Clonable")],hx);let ku=class extends hx{constructor(e){super(e),this.row=0,this.column=0,this.rows=1,this.columns=1}equals(e){return e!=null&&this.row===e.row&&this.rows===e.rows&&this.column===e.column&&this.columns===e.columns}};_([T({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],ku.prototype,"row",void 0),_([T({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],ku.prototype,"column",void 0),_([T({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],ku.prototype,"rows",void 0),_([T({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],ku.prototype,"columns",void 0),ku=_([Y("esri.CameraLayout")],ku);const OO=ku;function Se(){return[0,0,0]}function so(t){return[t[0],t[1],t[2]]}function wr(t,e,i){return[t,e,i]}function PO(t,e=Se()){const i=Math.min(3,t.length);for(let n=0;n<i;++n)e[n]=t[n];return e}function pZ(t,e){return new Float64Array(t,e,3)}function RO(){return Se()}function LO(){return wr(1,1,1)}function NO(){return wr(1,0,0)}function DO(){return wr(0,1,0)}function zO(){return wr(0,0,1)}const fZ=RO(),gZ=LO(),mZ=NO(),yZ=DO(),FO=zO();Object.freeze(Object.defineProperty({__proto__:null,ONES:gZ,UNIT_X:mZ,UNIT_Y:yZ,UNIT_Z:FO,ZEROS:fZ,clone:so,create:Se,createView:pZ,fromArray:PO,fromValues:wr,ones:LO,unitX:NO,unitY:DO,unitZ:zO,zeros:RO},Symbol.toStringTag,{value:"Module"}));let pS=1e-6;function Ti(){return pS}function vZ(t){pS=t}const Sm=Math.random,bZ=Math.PI/180,wZ=180/Math.PI;function fS(t){return t*bZ}function _Z(t){return t*wZ}function xZ(t,e){return Math.abs(t-e)<=pS*Math.max(1,Math.abs(t),Math.abs(e))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:Sm,equals:xZ,getEpsilon:Ti,setEpsilon:vZ,toDegree:_Z,toRadian:fS},Symbol.toStringTag,{value:"Module"}));function ea(t){const e=t[0],i=t[1],n=t[2];return Math.sqrt(e*e+i*i+n*n)}function Yn(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function si(t,e,i,n){return t[0]=e,t[1]=i,t[2]=n,t}function yr(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t}function di(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t}function jO(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t}function GO(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t}function SZ(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function TZ(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function MZ(t,e){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t}function EZ(t,e){return t[0]=Math.sign(e[0]),t[1]=Math.sign(e[1]),t[2]=Math.sign(e[2]),t}function kZ(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t}function $Z(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t}function CZ(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function xr(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function yn(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t}function lu(t,e){const i=e[0]-t[0],n=e[1]-t[1],s=e[2]-t[2];return Math.sqrt(i*i+n*n+s*s)}function Fd(t,e){const i=e[0]-t[0],n=e[1]-t[1],s=e[2]-t[2];return i*i+n*n+s*s}function Mw(t){const e=t[0],i=t[1],n=t[2];return e*e+i*i+n*n}function ux(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function IZ(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function Ln(t,e){const i=e[0],n=e[1],s=e[2];let h=i*i+n*n+s*s;return h>0&&(h=1/Math.sqrt(h),t[0]=e[0]*h,t[1]=e[1]*h,t[2]=e[2]*h),t}function xt(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function rn(t,e,i){const n=e[0],s=e[1],h=e[2],f=i[0],m=i[1],v=i[2];return t[0]=s*v-h*m,t[1]=h*f-n*v,t[2]=n*m-s*f,t}function Tm(t,e,i,n){const s=e[0],h=e[1],f=e[2];return t[0]=s+n*(i[0]-s),t[1]=h+n*(i[1]-h),t[2]=f+n*(i[2]-f),t}function AZ(t,e,i,n,s,h){const f=h*h,m=f*(2*h-3)+1,v=f*(h-2)+h,x=f*(h-1),M=f*(3-2*h);return t[0]=e[0]*m+i[0]*v+n[0]*x+s[0]*M,t[1]=e[1]*m+i[1]*v+n[1]*x+s[1]*M,t[2]=e[2]*m+i[2]*v+n[2]*x+s[2]*M,t}function OZ(t,e,i,n,s,h){const f=1-h,m=f*f,v=h*h,x=m*f,M=3*h*m,$=3*v*f,I=v*h;return t[0]=e[0]*x+i[0]*M+n[0]*$+s[0]*I,t[1]=e[1]*x+i[1]*M+n[1]*$+s[1]*I,t[2]=e[2]*x+i[2]*M+n[2]*$+s[2]*I,t}function PZ(t,e){e=e||1;const i=Sm,n=2*i()*Math.PI,s=2*i()-1,h=Math.sqrt(1-s*s)*e;return t[0]=Math.cos(n)*h,t[1]=Math.sin(n)*h,t[2]=s*e,t}function VO(t,e,i){const n=e[0],s=e[1],h=e[2];return t[0]=i[0]*n+i[4]*s+i[8]*h+i[12],t[1]=i[1]*n+i[5]*s+i[9]*h+i[13],t[2]=i[2]*n+i[6]*s+i[10]*h+i[14],t}function RZ(t,e,i){const n=e[0],s=e[1],h=e[2];return t[0]=n*i[0]+s*i[3]+h*i[6],t[1]=n*i[1]+s*i[4]+h*i[7],t[2]=n*i[2]+s*i[5]+h*i[8],t}function dx(t,e,i){const n=i[0],s=i[1],h=i[2],f=i[3],m=e[0],v=e[1],x=e[2],M=s*x-h*v,$=h*m-n*x,I=n*v-s*m,P=s*I-h*$,L=h*M-n*I,z=n*$-s*M,F=2*f;return t[0]=m+M*F+2*P,t[1]=v+$*F+2*L,t[2]=x+I*F+2*z,t}function LZ(t,e,i,n){const s=[],h=[];return s[0]=e[0]-i[0],s[1]=e[1]-i[1],s[2]=e[2]-i[2],h[0]=s[0],h[1]=s[1]*Math.cos(n)-s[2]*Math.sin(n),h[2]=s[1]*Math.sin(n)+s[2]*Math.cos(n),t[0]=h[0]+i[0],t[1]=h[1]+i[1],t[2]=h[2]+i[2],t}function NZ(t,e,i,n){const s=[],h=[];return s[0]=e[0]-i[0],s[1]=e[1]-i[1],s[2]=e[2]-i[2],h[0]=s[2]*Math.sin(n)+s[0]*Math.cos(n),h[1]=s[1],h[2]=s[2]*Math.cos(n)-s[0]*Math.sin(n),t[0]=h[0]+i[0],t[1]=h[1]+i[1],t[2]=h[2]+i[2],t}function DZ(t,e,i,n){const s=[],h=[];return s[0]=e[0]-i[0],s[1]=e[1]-i[1],s[2]=e[2]-i[2],h[0]=s[0]*Math.cos(n)-s[1]*Math.sin(n),h[1]=s[0]*Math.sin(n)+s[1]*Math.cos(n),h[2]=s[2],t[0]=h[0]+i[0],t[1]=h[1]+i[1],t[2]=h[2]+i[2],t}function zZ(t,e){Ln(YM,t),Ln(XM,e);const i=xt(YM,XM);return i>1?0:i<-1?Math.PI:Math.acos(i)}const YM=Se(),XM=Se();function FZ(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Wt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function Ug(t,e){if(t===e)return!0;const i=t[0],n=t[1],s=t[2],h=e[0],f=e[1],m=e[2],v=Ti();return Math.abs(i-h)<=v*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(n-f)<=v*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(s-m)<=v*Math.max(1,Math.abs(s),Math.abs(m))}function px(t,e,i){const n=i[0]-e[0],s=i[1]-e[1],h=i[2]-e[2];let f=n*n+s*s+h*h;return f>0?(f=1/Math.sqrt(f),t[0]=n*f,t[1]=s*f,t[2]=h*f,t):(t[0]=0,t[1]=0,t[2]=0,t)}const Hr=di,jZ=jO,GZ=GO,VZ=lu,HZ=Fd,HO=ea,i2=Mw;Object.freeze(Object.defineProperty({__proto__:null,abs:MZ,add:yr,angle:zZ,bezier:OZ,ceil:SZ,copy:Yn,cross:rn,direction:px,dist:VZ,distance:lu,div:GZ,divide:GO,dot:xt,equals:Ug,exactEquals:Wt,floor:TZ,hermite:AZ,inverse:IZ,len:HO,length:ea,lerp:Tm,max:$Z,min:kZ,mul:jZ,multiply:jO,negate:ux,normalize:Ln,random:PZ,rotateX:LZ,rotateY:NZ,rotateZ:DZ,round:CZ,scale:xr,scaleAndAdd:yn,set:si,sign:EZ,sqrDist:HZ,sqrLen:i2,squaredDistance:Fd,squaredLength:Mw,str:FZ,sub:Hr,subtract:di,transformMat3:RZ,transformMat4:VO,transformQuat:dx},Symbol.toStringTag,{value:"Module"}));const QM=new Float32Array(1);function h4e(t){--t;for(let e=1;e<32;e<<=1)t|=t>>e;return t+1}function qr(t,e,i){return Math.min(Math.max(t,e),i)}function u4e(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}function g1(t,e,i){return t+(e-t)*i}function d4e(t,e,i,n,s){return g1(n,s,(t-e)/(i-e))}function ac(t){return t*Math.PI/180}function BO(t){return 180*t/Math.PI}function p4e(t,e=1e-6){return(t<0?-1:1)/Math.max(Math.abs(t),e)}function UO(t){return Math.acos(qr(t,-1,1))}function gS(t){return Math.asin(qr(t,-1,1))}function gs(t,e,i=1e-6){return t===e?!0:!Number.isFinite(t)||!Number.isFinite(e)?!1:(t>e?t-e:e-t)<=i}const n2=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function fx(t){return n2.setFloat64(0,t),n2.getBigInt64(0)}function BZ(t){return n2.setBigInt64(0,t),n2.getFloat64(0)}const kv=BigInt("1000000"),UZ=qO(1);function qO(t){const e=fx(t=Math.abs(t)),i=BZ(e<=kv?kv:e-kv);return Math.abs(t-i)}function f4e(t,e,i=UZ){if(t===e)return!0;if(!Number.isFinite(t)||!Number.isFinite(e))return!1;if(i!=null&&qO(Math.min(Math.abs(t),Math.abs(e)))<i)return Math.abs(t-e)<=i;const n=fx(t),s=fx(e);return n<0!=s<0?!1:!((n<s?s-n:n-s)>kv)}function qZ(t,e,i=1e-6){if(t===e)return!0;if(!Number.isFinite(t)||!Number.isFinite(e))return!1;const n=Math.abs(t-e),s=Math.abs(t),h=Math.abs(e);if(t===0||e===0||s<1e-12&&h<1e-12){if(n>.01*i)return!1}else if(n/(s+h)>i)return!1;return!0}function WZ(t){return WO(Math.max(-gx,Math.min(t,gx)))}function WO(t){return QM[0]=t,QM[0]}function e8(t,e){const i=ea(t),n=gS(t[2]/i),s=Math.atan2(t[1]/i,t[0]/i);return si(e,i,n,s),e}function g4e(t){const e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[3]*t[3]+t[4]*t[4]+t[5]*t[5],n=t[6]*t[6]+t[7]*t[7]+t[8]*t[8];return!(gs(e,1)&&gs(i,1)&&gs(n,1))}const gx=WO(34028234663852886e22);let Ew=class{constructor(e,i){this.min=e,this.max=i,this.range=i-e}normalize(e,i=0,n=!1){return t8(this.range,this.min,this.max,e,i,n)}clamp(e,i=0){return qr(e-i,this.min,this.max)+i}monotonic(e,i,n){return e<i?i:i+mx(this.range,e-i,n)}minimalMonotonic(e,i,n){return t8(this.range,e,e+this.range,i,n)}center(e,i,n){return i=this.monotonic(e,i,n),this.normalize((e+i)/2,n)}diff(e,i,n){return this.monotonic(e,i,n)-e}shortestSignedDiff(e,i){e=this.normalize(e);const n=(i=this.normalize(i))-e,s=i<e?this.minimalMonotonic(e,i)-e:i-this.minimalMonotonic(i,e);return Math.abs(n)<Math.abs(s)?n:s}contains(e,i,n){return i=this.minimalMonotonic(e,i),(n=this.minimalMonotonic(e,n))>e&&n<i}};function t8(t,e,i,n,s=0,h=!1){return(n-=s)<e?n+=mx(t,e-n):n>i&&(n-=mx(t,n-i)),h&&n===i&&(n=e),n+s}function mx(t,e,i=0){return Math.ceil((e-i)/t)*t+i}const ZO=new Ew(0,2*Math.PI),ZZ=new Ew(-Math.PI,Math.PI),JO=new Ew(0,360),JZ=Object.prototype.toString;function KZ(t){const e="__accessorMetadata__"in t?wn(t):t;return function(...i){if(i.push(e),typeof i[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return YZ.apply(this,i)}}function YZ(t,e,i,n){uw(t,e).cast=n}function XZ(t){return(e,i)=>{uw(e,t).cast=e[i]}}function qi(...t){if(t.length!==3||typeof t[1]!="string")return t.length===1&&JZ.call(t[0])==="[object Function]"?KZ(t[0]):t.length===1&&typeof t[0]=="string"?XZ(t[0]):void 0}function Ct(t,e,i){let n,s;return e===void 0||Array.isArray(e)?(s=t,i=e,n=[void 0]):(s=e,n=Array.isArray(t)?t:[t]),(h,f)=>{const m=h.constructor.prototype;n.forEach(v=>{const x=zA(h,v,s);x.read&&typeof x.read=="object"||(x.read={}),x.read.reader=m[f],i&&(x.read.source=(x.read.source||[]).concat(i))})}}let ya=class extends Fe{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=tt.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,i){if(e instanceof tt)return e;if(e!=null){const n=new tt;return n.read(e,i),n}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,i){this.cache[e]=i}};_([T()],ya.prototype,"type",void 0),_([T({readOnly:!0})],ya.prototype,"cache",null),_([T({readOnly:!0})],ya.prototype,"extent",null),_([T({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],ya.prototype,"hasM",void 0),_([T({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],ya.prototype,"hasZ",void 0),_([T({type:tt,json:{write:!0},value:tt.WGS84})],ya.prototype,"spatialReference",void 0),_([Ct("spatialReference")],ya.prototype,"readSpatialReference",null),ya=_([Y("esri.geometry.Geometry")],ya);const Mc=ya;function KO(t,e){const i=t.x-e.x,n=t.y-e.y,s=t.z!=null&&e.z!=null?t.z-e.z:0;return Math.sqrt(i*i+n*n+s*s)}function QZ(t){var e;return((e=YO(t,XO))==null?void 0:e[0])??null}function eJ(t){var e;return((e=YO(t,XO))==null?void 0:e[1])??null}function YO({x:t,y:e,spatialReference:i},n=[0,0]){if(i){if(Ms(i))return Tw(t,e,n);if(au(i))return n[0]=t,n[1]=e,n}return null}const XO=[0,0];var $v;const t_=[0,0];function i8(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let lr=$v=class extends Mc{static copy(t,e){e._set("x",t._get("x")),e._set("y",t._get("y")),e._set("z",t._get("z")),e._set("m",t._get("m"));const i=t._get("spatialReference");e._set("spatialReference",Object.isFrozen(i)?i:i.clone())}constructor(...t){super(...t),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(t,e,i,n,s){let h;if(Array.isArray(t))h=t,s=e,t=h[0],e=h[1],i=h[2],n=h[3];else if(t&&typeof t=="object"){if(h=t,t=h.x!=null?h.x:h.longitude,e=h.y!=null?h.y:h.latitude,i=h.z,n=h.m,(s=h.spatialReference)&&s.declaredClass!=="esri.geometry.SpatialReference"&&(s=new tt(s)),h.longitude!=null||h.latitude!=null){if(h.longitude==null)Ce.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(h.latitude==null)Ce.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!h.declaredClass&&(s!=null&&s.isWebMercator)){const m=df(h.longitude,h.latitude,t_);t=m[0],e=m[1]}}}else i8(i)?(s=i,i=null):i8(n)&&(s=n,n=null);const f={x:t,y:e};return f.x==null&&f.y!=null?Ce.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):f.y==null&&f.x!=null&&Ce.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),s!=null&&(f.spatialReference=s),i!=null&&(f.z=i),n!=null&&(f.m=n),f}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(t){t!==(this._get("m")!==void 0)&&(this._set("m",t?0:void 0),this._set("hasM",t))}get hasZ(){return this.z!==void 0}set hasZ(t){t!==(this._get("z")!==void 0)&&(this._set("z",t?0:void 0),this._set("hasZ",t))}get latitude(){return eJ(this)}set latitude(t){const{spatialReference:e,x:i}=this;t!=null&&e&&(e.isWebMercator?this._set("y",df(i,t,t_)[1]):e.isGeographic&&this._set("y",t),this._set("latitude",t))}get longitude(){return QZ(this)}set longitude(t){const{y:e,spatialReference:i}=this;t!=null&&i&&(i.isWebMercator?this._set("x",df(t,e,t_)[0]):i.isGeographic&&this._set("x",t),this._set("longitude",t))}writeX(t,e,i){e[i]=isNaN(t)?"NaN":t}readX(t){return typeof t=="string"?NaN:t}clone(){const t=new $v;return t.x=this.x,t.y=this.y,t.z=this.z,t.m=this.m,t.spatialReference=this.spatialReference,t}copy(t){return $v.copy(t,this),this}equals(t){if(t==null)return!1;const{x:e,y:i,z:n,m:s,spatialReference:h}=this,{z:f,m}=t;let{x:v,y:x,spatialReference:M}=t;if(!h.equals(M))if(h.isWebMercator&&M.isWGS84)[v,x]=df(v,x),M=h;else{if(!h.isWGS84||!M.isWebMercator)return!1;[v,x]=Tw(v,x),M=h}return e===v&&i===x&&n===f&&s===m&&h.wkid===M.wkid}offset(t,e,i){return this.x+=t,this.y+=e,i!=null&&(this.z=(this.z??0)+i),this}normalize(){if(!this.spatialReference)return this;const t=er(this.spatialReference);if(!t)return this;let e=this.x;const[i,n]=t.valid,s=2*n;let h;return e>n?(h=Math.ceil(Math.abs(e-n)/s),e-=h*s):e<i&&(h=Math.ceil(Math.abs(e-i)/s),e+=h*s),this._set("x",e),this}distance(t){return KO(this,t)}toArray(){const t=this.hasZ,e=this.hasM;return t&&e?[this.x,this.y,this.z,this.m]:t?[this.x,this.y,this.z]:e?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(t){return this.write({},t)}};_([T({readOnly:!0})],lr.prototype,"cache",null),_([T({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],lr.prototype,"hasM",null),_([T({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],lr.prototype,"hasZ",null),_([T({type:Number})],lr.prototype,"latitude",null),_([T({type:Number})],lr.prototype,"longitude",null),_([T({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),qi(t=>isNaN(t)?t:Bo(t))],lr.prototype,"x",void 0),_([_t("x")],lr.prototype,"writeX",null),_([Ct("x")],lr.prototype,"readX",null),_([T({type:Number,json:{write:!0}})],lr.prototype,"y",void 0),_([T({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],lr.prototype,"z",void 0),_([T({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],lr.prototype,"m",void 0),lr=$v=_([Y("esri.geometry.Point")],lr),lr.prototype.toJSON.isDefaultToJSON=!0;const De=lr;let va=class extends lo(Fe){constructor(...e){super(...e),this.position=new De([0,0,0]),this.heading=0,this.tilt=0,this.fov=55,this.layout=new OO}normalizeCtorArgs(e,i,n,s){if(e&&typeof e=="object"&&("x"in e||Array.isArray(e))){const h={position:e};return i!=null&&(h.heading=i),n!=null&&(h.tilt=n),s!=null&&(h.fov=s),h}return e}writePosition(e,i,n,s){const h=e.clone();h.x=Bo(e.x||0),h.y=Bo(e.y||0),h.z=e.hasZ?Bo(e.z||0):e.z,i[n]=h.write({},s)}readPosition(e,i){const n=new De;return n.read(e,i),n.x=Bo(n.x||0),n.y=Bo(n.y||0),n.z=n.hasZ?Bo(n.z||0):n.z,n}equals(e){return e!=null&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)&&this.layout.equals(e.layout)}};_([T({type:De,json:{write:{isRequired:!0}}})],va.prototype,"position",void 0),_([_t("position")],va.prototype,"writePosition",null),_([Ct("position")],va.prototype,"readPosition",null),_([T({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),qi(t=>JO.normalize(Bo(t)))],va.prototype,"heading",void 0),_([T({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),qi(t=>qr(Bo(t),-180,180))],va.prototype,"tilt",void 0),_([T({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],va.prototype,"fov",void 0),_([T({type:OO,nonNullable:!0,json:{read:!1,write:!1}})],va.prototype,"layout",void 0),va=_([Y("esri.Camera")],va);const tJ=va,i_=[0,0];function Mm(t,e){return e!=null&&fr(t,e.x,e.y,e.z)}function b4e(t,e){if(!e.points||e.points.length)return!1;for(const i of e.points)if(!Vf(t,i))return!1;return!0}function iJ(t,e){const{xmin:i,ymin:n,zmin:s,xmax:h,ymax:f,zmax:m}=e;return t.hasZ&&e.hasZ?fr(t,i,n,s)&&fr(t,i,f,s)&&fr(t,h,f,s)&&fr(t,h,n,s)&&fr(t,i,n,m)&&fr(t,i,f,m)&&fr(t,h,f,m)&&fr(t,h,n,m):fr(t,i,n)&&fr(t,i,f)&&fr(t,h,f)&&fr(t,h,n)}function Vf(t,e){return fr(t,e[0],e[1])}function nJ(t,e){return fr(t,e[0],e[1],e[2])}function fr(t,e,i,n){return e>=t.xmin&&e<=t.xmax&&i>=t.ymin&&i<=t.ymax&&(n==null||!t.hasZ||n>=t.zmin&&n<=t.zmax)}function mS(t,e){return i_[1]=e.y,i_[0]=e.x,rJ(t,i_)}function rJ(t,e){return yS(t.rings,e)}function yS(t,e){if(!t)return!1;if(sJ(t))return n8(!1,t,e);let i=!1;for(let n=0,s=t.length;n<s;n++)i=n8(i,t[n],e);return i}function sJ(t){return!Array.isArray(t[0][0])}function n8(t,e,i){const[n,s]=i;let h=t,f=0;for(let m=0,v=e.length;m<v;m++){f++,f===v&&(f=0);const[x,M]=e[m],[$,I]=e[f];(M<s&&I>=s||I<s&&M>=s)&&x+(s-M)/(I-M)*($-x)<n&&(h=!h)}return h}function oJ(t,e){return Mm(t,e)}function aJ(t,e){const i=t.hasZ&&e.hasZ;let n,s,h;if(t.xmin<=e.xmin){if(n=e.xmin,t.xmax<n)return!1}else if(n=t.xmin,e.xmax<n)return!1;if(t.ymin<=e.ymin){if(s=e.ymin,t.ymax<s)return!1}else if(s=t.ymin,e.ymax<s)return!1;if(i&&e.hasZ){if(t.zmin<=e.zmin){if(h=e.zmin,t.zmax<h)return!1}else if(h=t.zmin,e.zmax<h)return!1}return!0}function lJ(t,e){const{points:i,hasZ:n}=e,s=n?nJ:Vf;for(const h of i)if(s(t,h))return!0;return!1}const jd=[0,0],Gd=[0,0],Vd=[0,0],Hd=[0,0],cJ=[jd,Gd,Vd,Hd],QO=[[Vd,jd],[jd,Gd],[Gd,Hd],[Hd,Vd]];function hJ(t,e){return uJ(t,e.rings)}function uJ(t,e){jd[0]=t.xmin,jd[1]=t.ymax,Gd[0]=t.xmax,Gd[1]=t.ymax,Vd[0]=t.xmin,Vd[1]=t.ymin,Hd[0]=t.xmax,Hd[1]=t.ymin;for(const i of cJ)if(yS(e,i))return!0;for(const i of e){if(!i.length)continue;let n=i[0];if(Vf(t,n))return!0;for(let s=1;s<i.length;s++){const h=i[s];if(Vf(t,h)||eP(n,h,QO))return!0;n=h}}return!1}function dJ(t,e){jd[0]=t.xmin,jd[1]=t.ymax,Gd[0]=t.xmax,Gd[1]=t.ymax,Vd[0]=t.xmin,Vd[1]=t.ymin,Hd[0]=t.xmax,Hd[1]=t.ymin;const i=e.paths;for(const n of i){if(!i.length)continue;let s=n[0];if(Vf(t,s))return!0;for(let h=1;h<n.length;h++){const f=n[h];if(Vf(t,f)||eP(s,f,QO))return!0;s=f}}return!1}const Sn=[0,0];function pJ(t){for(let e=0;e<t.length;e++){const i=t[e];for(let s=0;s<i.length-1;s++){const h=i[s],f=i[s+1];for(let m=e+1;m<t.length;m++)for(let v=0;v<t[m].length-1;v++){const x=t[m][v],M=t[m][v+1];if(yx(h,f,x,M,Sn)&&!(Sn[0]===h[0]&&Sn[1]===h[1]||Sn[0]===x[0]&&Sn[1]===x[1]||Sn[0]===f[0]&&Sn[1]===f[1]||Sn[0]===M[0]&&Sn[1]===M[1]))return!0}}const n=i.length;if(!(n<=4))for(let s=0;s<n-3;s++){let h=n-1;s===0&&(h=n-2);const f=i[s],m=i[s+1];for(let v=s+2;v<h;v++){const x=i[v],M=i[v+1];if(yx(f,m,x,M,Sn)&&!(Sn[0]===f[0]&&Sn[1]===f[1]||Sn[0]===x[0]&&Sn[1]===x[1]||Sn[0]===m[0]&&Sn[1]===m[1]||Sn[0]===M[0]&&Sn[1]===M[1]))return!0}}}return!1}function eP(t,e,i){for(let n=0;n<i.length;n++)if(yx(t,e,i[n][0],i[n][1]))return!0;return!1}function yx(t,e,i,n,s){const[h,f]=t,[m,v]=e,[x,M]=i,[$,I]=n,P=$-x,L=h-x,z=m-h,F=I-M,U=f-M,W=v-f,K=F*z-P*W;if(K===0)return!1;const J=(P*U-F*L)/K,te=(z*U-W*L)/K;return J>=0&&J<=1&&te>=0&&te<=1&&(s&&(s[0]=h+J*(m-h),s[1]=f+J*(v-f)),!0)}function fJ(t){switch(t){case"esriGeometryEnvelope":case"extent":return aJ;case"esriGeometryMultipoint":case"multipoint":return lJ;case"esriGeometryPoint":case"point":return oJ;case"esriGeometryPolygon":case"polygon":return hJ;case"esriGeometryPolyline":case"polyline":return dJ}}var Ds;function gJ(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}function Nc(t,e,i){return e==null?i:i==null?e:t(e,i)}let pn=Ds=class extends Mc{constructor(...t){super(...t),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(t,e,i,n,s){return gJ(t)?{spatialReference:t,xmin:0,ymin:0,xmax:0,ymax:0}:typeof t=="object"?(t.spatialReference=t.spatialReference==null?tt.WGS84:t.spatialReference,t):{xmin:t,ymin:e,xmax:i,ymax:n,spatialReference:s??tt.WGS84}}static fromBounds(t,e){return new Ds({xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3],spatialReference:e})}static fromPoint(t){return new Ds({xmin:t.x,ymin:t.y,zmin:t.z,xmax:t.x,ymax:t.y,zmax:t.z,spatialReference:t.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const t=new De({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(t.z=.5*(this.zmin+this.zmax)),this.hasM&&(t.m=.5*(this.mmin+this.mmax)),t}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(t){const e=this.center;return t.z!=null&&this.hasZ?this.offset(t.x-e.x,t.y-e.y,t.z-e.z):this.offset(t.x-e.x,t.y-e.y)}clone(){const t=new Ds;return t.xmin=this.xmin,t.ymin=this.ymin,t.xmax=this.xmax,t.ymax=this.ymax,t.spatialReference=this.spatialReference,this.zmin!=null&&(t.zmin=this.zmin,t.zmax=this.zmax),this.mmin!=null&&(t.mmin=this.mmin,t.mmax=this.mmax),t}contains(t){if(!t)return!1;const e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&Ev(e,i)&&(t=e.isWebMercator?hc(t):Oh(t,!0)),t.type==="point"?Mm(this,t):t.type==="extent"&&iJ(this,t)}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&Ev(e,i)&&(t=e.isWebMercator?hc(t):Oh(t,!0)),this.xmin===t.xmin&&this.ymin===t.ymin&&this.zmin===t.zmin&&this.mmin===t.mmin&&this.xmax===t.xmax&&this.ymax===t.ymax&&this.zmax===t.zmax&&this.mmax===t.mmax}expand(t){const e=.5*(1-t),i=this.width*e,n=this.height*e;if(this.xmin+=i,this.ymin+=n,this.xmax-=i,this.ymax-=n,this.hasZ){const s=(this.zmax-this.zmin)*e;this.zmin+=s,this.zmax-=s}if(this.hasM){const s=(this.mmax-this.mmin)*e;this.mmin+=s,this.mmax-=s}return this}intersects(t){if(t==null)return!1;t.type==="mesh"&&(t=t.extent);const e=this.spatialReference,i=t.spatialReference;return e&&i&&!bi(e,i)&&Ev(e,i)&&(t=e.isWebMercator?hc(t):Oh(t,!0)),fJ(t.type)(this,t)}normalize(){const t=this._normalize(!1,!0);return Array.isArray(t)?t:[t]}offset(t,e,i){return this.xmin+=t,this.ymin+=e,this.xmax+=t,this.ymax+=e,i!=null&&(this.zmin+=i,this.zmax+=i),this}shiftCentralMeridian(){return this._normalize(!0)}union(t){return this===t||(this.xmin=Math.min(this.xmin,t.xmin),this.ymin=Math.min(this.ymin,t.ymin),this.xmax=Math.max(this.xmax,t.xmax),this.ymax=Math.max(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=Nc(Math.min,this.zmin,t.zmin),this.zmax=Nc(Math.max,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=Nc(Math.min,this.mmin,t.mmin),this.mmax=Nc(Math.max,this.mmax,t.mmax))),this}intersection(t){return this===t?this:t!=null&&this.intersects(t)?(this.xmin=Math.max(this.xmin,t.xmin),this.ymin=Math.max(this.ymin,t.ymin),this.xmax=Math.min(this.xmax,t.xmax),this.ymax=Math.min(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=Nc(Math.max,this.zmin,t.zmin),this.zmax=Nc(Math.min,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=Nc(Math.max,this.mmin,t.mmin),this.mmax=Nc(Math.min,this.mmax,t.mmax)),this):null}toJSON(t){return this.write({},t)}_shiftCM(t=er(this.spatialReference)){if(!t||!this.spatialReference)return this;const e=this.spatialReference,i=this._getCM(t);if(i){const n=e.isWebMercator?Oh(i):i;this.xmin-=i.x,this.xmax-=i.x,e.isWebMercator||(n.x=n_(n.x,t).x),this.spatialReference=new tt(N6((e.isWGS84?t.altTemplate:null)??t.wkTemplate,{Central_Meridian:n.x}))}return this}_getCM(t){let e=null;const[i,n]=t.valid,s=this.xmin,h=this.xmax;return s>=i&&s<=n&&h>=i&&h<=n||(e=this.center),e}_normalize(t,e,i){const n=this.spatialReference;if(!n)return this;const s=i??er(n);if(s==null)return this;const h=this._getParts(s).map(v=>v.extent);if(h.length<2)return h[0]||this;if(h.length>2)return t?this._shiftCM(s):this.set({xmin:s.valid[0],xmax:s.valid[1]});if(t)return this._shiftCM(s);if(e)return h;let f=!0,m=!0;return h.forEach(v=>{v.hasZ||(f=!1),v.hasM||(m=!1)}),{rings:h.map(v=>{const x=[[v.xmin,v.ymin],[v.xmin,v.ymax],[v.xmax,v.ymax],[v.xmax,v.ymin],[v.xmin,v.ymin]];if(f){const M=(v.zmax-v.zmin)/2;for(let $=0;$<x.length;$++)x[$].push(M)}if(m){const M=(v.mmax-v.mmin)/2;for(let $=0;$<x.length;$++)x[$].push(M)}return x}),hasZ:f,hasM:m,spatialReference:n}}_getParts(t){let e=this.cache._parts;if(!e){e=[];const{ymin:s,ymax:h,spatialReference:f}=this,m=this.width,v=this.xmin,x=this.xmax;let M;t=t||er(f);const[$,I]=t.valid;M=n_(this.xmin,t);const P=M.x,L=M.frameId;M=n_(this.xmax,t);const z=M.x,F=M.frameId,U=P===z&&m>0;if(m>2*I){const W=new Ds(v<x?P:z,s,I,h,f),K=new Ds($,s,v<x?z:P,h,f),J=new Ds(0,s,I,h,f),te=new Ds($,s,0,h,f),ie=[],le=[];W.contains(J)&&ie.push(L),W.contains(te)&&le.push(L),K.contains(J)&&ie.push(F),K.contains(te)&&le.push(F);for(let de=L+1;de<F;de++)ie.push(de),le.push(de);e.push({extent:W,frameIds:[L]},{extent:K,frameIds:[F]},{extent:J,frameIds:ie},{extent:te,frameIds:le})}else P>z||U?e.push({extent:new Ds(P,s,I,h,f),frameIds:[L]},{extent:new Ds($,s,z,h,f),frameIds:[F]}):e.push({extent:new Ds(P,s,z,h,f),frameIds:[L]});this.cache._parts=e}const i=this.hasZ,n=this.hasM;if(i||n){const s={};i&&(s.zmin=this.zmin,s.zmax=this.zmax),n&&(s.mmin=this.mmin,s.mmax=this.mmax);for(let h=0;h<e.length;h++)e[h].extent.set(s)}return e}};function n_(t,e){const[i,n]=e.valid,s=2*n;let h,f=0;return t>n?(h=Math.ceil(Math.abs(t-n)/s),t-=h*s,f=h):t<i&&(h=Math.ceil(Math.abs(t-i)/s),t+=h*s,f=-h),{x:t,frameId:f}}_([T({readOnly:!0})],pn.prototype,"cache",null),_([T({readOnly:!0})],pn.prototype,"center",null),_([T({readOnly:!0})],pn.prototype,"extent",null),_([T({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],pn.prototype,"hasM",null),_([T({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],pn.prototype,"hasZ",null),_([T({readOnly:!0})],pn.prototype,"height",null),_([T({readOnly:!0})],pn.prototype,"width",null),_([T({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],pn.prototype,"xmin",void 0),_([T({type:Number,json:{write:!0}})],pn.prototype,"ymin",void 0),_([T({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],pn.prototype,"mmin",void 0),_([T({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],pn.prototype,"zmin",void 0),_([T({type:Number,json:{write:!0}})],pn.prototype,"xmax",void 0),_([T({type:Number,json:{write:!0}})],pn.prototype,"ymax",void 0),_([T({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],pn.prototype,"mmax",void 0),_([T({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],pn.prototype,"zmax",void 0),pn=Ds=_([Y("esri.geometry.Extent")],pn),pn.prototype.toJSON.isDefaultToJSON=!0;const Lt=pn;function Hf(t,e,i=!1){let{hasM:n,hasZ:s}=t;Array.isArray(e)?e.length!==4||n||s?e.length===3&&i&&!n?(s=!0,n=!1):e.length===3&&n&&s&&(n=!1,s=!1):(n=!0,s=!0):(s=!s&&e.hasZ&&(!n||e.hasM),n=!n&&e.hasM&&(!s||e.hasZ)),t.hasZ=s,t.hasM=n}var vx;function r8(t){return(e,i)=>e==null?i:i==null?e:t(e,i)}function mJ(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let Wc=vx=class extends Mc{constructor(...t){super(...t),this.points=[],this.type="multipoint"}normalizeCtorArgs(t,e){var s;if(!t&&!e)return{};const i={};Array.isArray(t)?(i.points=t,i.spatialReference=e):mJ(t)?i.spatialReference=t:(t.points&&(i.points=t.points),t.spatialReference&&(i.spatialReference=t.spatialReference),t.hasZ&&(i.hasZ=t.hasZ),t.hasM&&(i.hasM=t.hasM));const n=(s=i.points)==null?void 0:s[0];return n&&(i.hasZ===void 0&&i.hasM===void 0?(i.hasZ=n.length>2,i.hasM=!1):i.hasZ===void 0?i.hasZ=n.length>3:i.hasM===void 0&&(i.hasM=n.length>3)),i}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const t=this.points;if(!t.length)return null;const e=new Lt,i=this.hasZ,n=this.hasM,s=i?3:2,h=t[0],f=r8(Math.min),m=r8(Math.max);let v,x,M,$,[I,P]=h,[L,z]=h;for(let F=0,U=t.length;F<U;F++){const W=t[F],[K,J]=W;if(I=f(I,K),P=f(P,J),L=m(L,K),z=m(z,J),i&&W.length>2){const te=W[2];v=f(v,te),M=m(M,te)}if(n&&W.length>s){const te=W[s];x=f(x,te),$=m($,te)}}return e.xmin=I,e.ymin=P,e.xmax=L,e.ymax=z,e.spatialReference=this.spatialReference,i?(e.zmin=v,e.zmax=M):(e.zmin=void 0,e.zmax=void 0),n?(e.mmin=x,e.mmax=$):(e.mmin=void 0,e.mmax=void 0),e}writePoints(t,e){e.points=_e(this.points)}addPoint(t){return Hf(this,t),Array.isArray(t)?this.points.push(t):this.points.push(t.toArray()),this.notifyChange("points"),this}clone(){const t={points:_e(this.points),spatialReference:this.spatialReference};return this.hasZ&&(t.hasZ=!0),this.hasM&&(t.hasM=!0),new vx(t)}getPoint(t){if(!this._validateInputs(t))return null;const e=this.points[t],i={x:e[0],y:e[1],spatialReference:this.spatialReference};let n=2;return this.hasZ&&(i.z=e[2],n=3),this.hasM&&(i.m=e[n]),new De(i)}removePoint(t){if(!this._validateInputs(t))return null;const e=new De(this.points.splice(t,1)[0],this.spatialReference);return this.notifyChange("points"),e}setPoint(t,e){return this._validateInputs(t)?(Hf(this,e),Array.isArray(e)||(e=e.toArray()),this.points[t]=e,this.notifyChange("points"),this):this}toJSON(t){return this.write({},t)}_validateInputs(t){return t!=null&&t>=0&&t<this.points.length}};_([T({readOnly:!0})],Wc.prototype,"cache",null),_([T()],Wc.prototype,"extent",null),_([T({type:[[Number]],json:{write:{isRequired:!0}}})],Wc.prototype,"points",void 0),_([_t("points")],Wc.prototype,"writePoints",null),Wc=vx=_([Y("esri.geometry.Multipoint")],Wc),Wc.prototype.toJSON.isDefaultToJSON=!0;const y0=Wc;function w4e(t){const e=[];for(t.reset();t.nextPath();){const i=[];for(;t.nextPoint();)i.push([t.x,t.y]);e.push(i)}return t.reset(),e}function yJ(t){const e=[];for(;t.nextPoint();)e.push([t.x,t.y]);return t.seekPathStart(),e}var Zo;(function(t){t[t.X=0]="X",t[t.Y=1]="Y",t[t.Z=2]="Z"})(Zo||(Zo={}));function s8(t){if(!t)return null;if(Array.isArray(t))return t;const e=t.hasZ,i=t.hasM;if(t.type==="point")return i&&e?[t.x,t.y,t.z,t.m]:e?[t.x,t.y,t.z]:i?[t.x,t.y,t.m]:[t.x,t.y];if(t.type==="polygon")return t.rings.slice(0);if(t.type==="polyline")return t.paths.slice(0);if(t.type==="multipoint")return t.points.slice(0);if(t.type==="extent"){const n=t.clone().normalize();if(!n)return null;let s=!1,h=!1;return n.forEach(f=>{f.hasZ&&(s=!0),f.hasM&&(h=!0)}),n.map(f=>{const m=[[f.xmin,f.ymin],[f.xmin,f.ymax],[f.xmax,f.ymax],[f.xmax,f.ymin],[f.xmin,f.ymin]];if(s&&f.hasZ){const v=.5*(f.zmax-f.zmin);for(let x=0;x<m.length;x++)m[x].push(v)}if(h&&f.hasM){const v=.5*(f.mmax-f.mmin);for(let x=0;x<m.length;x++)m[x].push(v)}return m})}return null}function kw(t,e){const i=e[0]-t[0],n=e[1]-t[1];if(t.length>2&&e.length>2){const s=t[2]-e[2];return Math.sqrt(i*i+n*n+s*s)}return Math.sqrt(i*i+n*n)}function tP(t,e,i){const n=t[0]+i*(e[0]-t[0]),s=t[1]+i*(e[1]-t[1]);return t.length>2&&e.length>2?[n,s,t[2]+i*(e[2]-t[2])]:[n,s]}function vJ(t,e,i,n){return bJ(t,e,i[n],i[n+1])}function bJ(t,e,i,n){const[s,h]=e,[f,m]=i,[v,x]=n,M=v-f,$=x-m,I=M*M+$*$,P=(s-f)*M+(h-m)*$,L=Math.min(1,Math.max(0,P/I));return t[0]=f+M*L,t[1]=m+$*L,t}function _4e(t,e,i,n,s,h){let f=i,m=n,v=s-f,x=h-m;if(v!==0||x!==0){const M=((t-f)*v+(e-m)*x)/(v*v+x*x);M>1?(f=s,m=h):M>0&&(f+=v*M,m+=x*M)}return v=t-f,x=e-m,v*v+x*x}function iP(t,e){return tP(t,e,.5)}function x4e(t){const e=t.length;let i=0;for(let n=0;n<e-1;++n)i+=kw(t[n],t[n+1]);return i}function S4e(t,e){if(e<=0)return t[0];const i=t.length;let n=0;for(let s=0;s<i-1;++s){const h=kw(t[s],t[s+1]);if(e-n<h){const f=(e-n)/h;return tP(t[s],t[s+1],f)}n+=h}return t[i-1]}function $w(t,e=Zo.X,i=Zo.Y){let n=0;const s=t.length;let h=t[0];for(let f=1;f<s;f++){const m=t[f];n+=(m[e]-h[e])*(m[i]+h[i]),h=m}if(!nP(t)){const f=t[0];n+=(f[e]-h[e])*(f[i]+h[i])}return n>=0}function nP(t){const e=t.length;return e<3||Za(t[0],t[e-1])}function T4e(t){"rings"in t&&(wJ(t),_J(t))}function wJ(t){if(!("rings"in t))return!1;let e=!1;for(const i of t.rings)nP(i)||(i.push(i[0].slice()),e=!0);return e}function _J(t){if(!("rings"in t)||t.rings.length===0||$w(t.rings[0]))return!1;for(const e of t.rings)e.reverse();return!0}function rP(t){return t.type!=="polygon"&&t.type!=="polyline"||sP(t.type==="polygon"?t.rings:t.paths,t.spatialReference),t}function sP(t,e){const i=er(e);if(!i)return;const n=i.valid[0],s=i.valid[1],h=s-n;for(const f of t){let m=1/0,v=-1/0;for(const M of f){const $=xJ(M[0],n,s);m=Math.min(m,$),v=Math.max(v,$),M[0]=$}const x=v-m;h-x<x&&f.forEach(M=>{M[0]<0&&(M[0]+=h)})}}function xJ(t,e,i){const n=i-e;return t<e?i-(e-t)%n:t>i?e+(t-e)%n:t}function SJ(t,e){if(t===e)return!0;if(t.type!==e.type)return!1;if(t.type==="point"||t.type==="mesh"||t.type==="extent")return!0;if(t.type==="multipoint")return t.points.length===e.points.length;const[i,n]=t.type==="polyline"?[t.paths,e.paths]:[t.rings,e.rings];return i.length===n.length&&i.every((s,h)=>s.length===n[h].length)}function M4e(t){return t?t.hasZ?[t.xmax-t.xmin/2,t.ymax-t.ymin/2,t.zmax-t.zmin/2]:[t.xmax-t.xmin/2,t.ymax-t.ymin/2]:null}function TJ(t){return t?MJ(t.rings,t.hasZ??!1):null}function MJ(t,e){if(!(t!=null&&t.length))return null;const i=[],n=[],s=e?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let h=0,f=t.length;h<f;h++){const m=oP(t[h],e,s);m&&n.push(m)}if(n.sort((h,f)=>{let m=h[2]-f[2];return m===0&&e&&(m=h[4]-f[4]),m}),n.length&&(i[0]=n[0][0],i[1]=n[0][1],e&&(i[2]=n[0][3]),(i[0]<s[0]||i[0]>s[1]||i[1]<s[2]||i[1]>s[3]||e&&(i[2]<s[4]||i[2]>s[5]))&&(i.length=0)),!i.length){const h=t[0]&&t[0].length?EJ(t[0],e):null;if(!h)return null;i[0]=h[0],i[1]=h[1],e&&h.length>2&&(i[2]=h[2])}return i}function oP(t,e,i){let n=0,s=0,h=0,f=0,m=0;const v=t.length?t[0][0]:0,x=t.length?t[0][1]:0,M=t.length&&e?t[0][2]:0;for(let I=0;I<t.length;I++){const P=t[I],L=t[(I+1)%t.length],[z,F,U]=P,W=z-v,K=F-x,[J,te,ie]=L,le=J-v,de=te-x,xe=W*de-le*K;if(f+=xe,n+=(W+le)*xe,s+=(K+de)*xe,e&&P.length>2&&L.length>2){const we=U-M,ve=ie-M,se=W*ve-le*we;h+=(we+ve)*se,m+=se}z<i[0]&&(i[0]=z),z>i[1]&&(i[1]=z),F<i[2]&&(i[2]=F),F>i[3]&&(i[3]=F),e&&(U<i[4]&&(i[4]=U),U>i[5]&&(i[5]=U))}if(f>0&&(f*=-1),m>0&&(m*=-1),!f)return null;f*=.5,m*=.5;const $=[n/(6*f)+v,s/(6*f)+x,f];return e&&(i[4]===i[5]||m===0?($[3]=(i[4]+i[5])/2,$[4]=0):($[3]=h/(6*m)+M,$[4]=m)),$}function E4e(t,e){let i=0,n=0,s=0;t.nextPoint();const h=t.pathSize?t.x:0,f=t.pathSize?t.y:0;for(let m=0;m<t.pathSize;m++){t.seekInPath(m);const v=[t.x,t.y];t.seekInPath((m+1)%t.pathSize);const x=[t.x,t.y],[M,$]=v,I=M-h,P=$-f,[L,z]=x,F=L-h,U=z-f,W=I*U-F*P;s+=W,i+=(I+F)*W,n+=(P+U)*W,M<e[0]&&(e[0]=M),M>e[1]&&(e[1]=M),$<e[2]&&(e[2]=$),$>e[3]&&(e[3]=$)}return s>0&&(s*=-1),s?(s*=.5,[i/(6*s)+h,n/(6*s)+f,s]):null}function EJ(t,e){const i=e?[0,0,0]:[0,0],n=e?[0,0,0]:[0,0];let s=0,h=0,f=0,m=0;for(let v=0,x=t.length;v<x-1;v++){const M=t[v],$=t[v+1];if(M&&$){i[0]=M[0],i[1]=M[1],n[0]=$[0],n[1]=$[1],e&&M.length>2&&$.length>2&&(i[2]=M[2],n[2]=$[2]);const I=kw(i,n);if(I){s+=I;const P=iP(M,$);h+=I*P[0],f+=I*P[1],e&&P.length>2&&(m+=I*P[2])}}}return s>0?e?[h/s,f/s,m/s]:[h/s,f/s]:t.length?t[0]:null}function kJ(t){const{hasZ:e,totalSize:i}=t;if(i===0)return null;const n=[],s=[],h=e?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(t.reset();t.nextPath();){const f=oP(yJ(t),t.hasZ,h);f&&s.push(f)}if(s.sort((f,m)=>{let v=f[2]-m[2];return v===0&&e&&(v=f[4]-m[4]),v}),s.length&&(n[0]=s[0][0],n[1]=s[0][1],e&&(n[2]=s[0][3]),(n[0]<h[0]||n[0]>h[1]||n[1]<h[2]||n[1]>h[3]||e&&(n[2]<h[4]||n[2]>h[5]))&&(n.length=0)),!n.length){t.reset(),t.nextPath();const f=t.pathSize?$J(t):null;if(!f)return null;n[0]=f[0],n[1]=f[1],e&&f.length>2&&(n[2]=f[2])}return n}function $J(t){const{hasZ:e}=t,i=e?[0,0,0]:[0,0],n=e?[0,0,0]:[0,0];let s=0,h=0,f=0,m=0;if(t.nextPoint()){let v=t.x,x=t.y,M=t.z;for(;t.nextPoint();){const $=t.x,I=t.y,P=t.z;i[0]=v,i[1]=x,n[0]=$,n[1]=I,e&&(i[2]=M,n[2]=P);const L=kw(i,n);if(L){s+=L;const z=iP(i,n);h+=L*z[0],f+=L*z[1],e&&z.length>2&&(m+=L*z[2])}v=$,x=I,M=P}}return s>0?e?[h/s,f/s,m/s]:[h/s,f/s]:t.pathSize?(t.seekPathStart(),t.nextPoint(),[t.x,t.y]):null}const CJ=1e-6;function k4e(t){let e=0;for(t.reset();t.nextPath();)e+=t.getCurrentRingArea();if(e<CJ){const s=kJ(t);return s?[s[0],s[1]]:null}const i=[0,0];if(t.reset(),!t.nextPath()||!t.nextPoint())return null;const n=[t.x,t.y];for(t.reset();t.nextPath();)AJ(i,n,t);return i[0]*=1/e,i[1]*=1/e,i[0]+=n[0],i[1]+=n[1],i}const IJ=1/3;function AJ(t,e,i){if(!t||!i||i.pathSize<3)return null;i.nextPoint();const n=i.x,s=i.y;i.nextPoint();let h,f=i.x-n,m=i.y-s,v=0,x=0;for(;i.nextPoint();)v=i.x-n,x=i.y-s,h=.5*IJ*(v*m-x*f),t[0]+=h*(f+v),t[1]+=h*(m+x),f=v,m=x;const M=i.getCurrentRingArea(),$=[n,s];return $[0]-=e[0],$[1]-=e[1],$[0]*=M,$[1]*=M,t[0]+=$[0],t[1]+=$[1],t}function sn(t=zJ){return[t[0],t[1],t[2],t[3]]}function aP(t,e){return t!==e&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]),t}function $4e(t,e,i,n,s=sn()){return s[0]=t,s[1]=e,s[2]=i,s[3]=n,s}function OJ(t,e=sn()){return e[0]=t.xmin,e[1]=t.ymin,e[2]=t.xmax,e[3]=t.ymax,e}function C4e(t,e){return new Lt({xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3],spatialReference:e})}function I4e(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function A4e(t,e,i){if(e!=null)if("length"in e)bx(e)?(i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i[2]=Math.max(t[2],e[2]),i[3]=Math.max(t[3],e[3])):e.length!==2&&e.length!==3||(i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i[2]=Math.max(t[2],e[0]),i[3]=Math.max(t[3],e[1]));else switch(e.type){case"extent":i[0]=Math.min(t[0],e.xmin),i[1]=Math.min(t[1],e.ymin),i[2]=Math.max(t[2],e.xmax),i[3]=Math.max(t[3],e.ymax);break;case"point":i[0]=Math.min(t[0],e.x),i[1]=Math.min(t[1],e.y),i[2]=Math.max(t[2],e.x),i[3]=Math.max(t[3],e.y)}else aP(i,t)}function PJ(t,e,i=t){const n=e.length;let s=t[0],h=t[1],f=t[2],m=t[3];for(let v=0;v<n;v++){const x=e[v];s=Math.min(s,x[0]),h=Math.min(h,x[1]),f=Math.max(f,x[0]),m=Math.max(m,x[1])}return i[0]=s,i[1]=h,i[2]=f,i[3]=m,i}function O4e(t){for(let e=0;e<4;e++)if(!isFinite(t[e]))return!1;return!0}function vS(t){return t==null||t[0]>=t[2]?0:t[2]-t[0]}function bS(t){return t==null||t[1]>=t[3]?0:t[3]-t[1]}function P4e(t){return vS(t)*bS(t)}function R4e(t,e=[0,0]){return e[0]=(t[0]+t[2])/2,e[1]=(t[1]+t[3])/2,e}function RJ(t,e){return lP(t,e[0],e[1])}function L4e(t,e){return lP(t,e.x,e.y)}function lP(t,e,i){return e>=t[0]&&i>=t[1]&&e<=t[2]&&i<=t[3]}function LJ(t,e,i){return e[0]>=t[0]-i&&e[1]>=t[1]-i&&e[0]<=t[2]+i&&e[1]<=t[3]+i}function N4e(t,e){return Math.max(e[0],t[0])<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])<=Math.min(e[3],t[3])}function NJ(t,e){return e[0]>=t[0]&&e[2]<=t[2]&&e[1]>=t[1]&&e[3]<=t[3]}function D4e(t,e,i,n=t){return n[0]=t[0]+e,n[1]=t[1]+i,n[2]=t[2]+e,n[3]=t[3]+i,n}function DJ(t,e,i=t){return i[0]=t[0]-e,i[1]=t[1]-e,i[2]=t[2]+e,i[3]=t[3]+e,i}function z4e(t){return t?aP(t,r2):sn(r2)}function bx(t){return t!=null&&t.length===4}function F4e(t,e){return bx(t)&&bx(e)?t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]:t===e}const r2=[1/0,1/0,-1/0,-1/0],zJ=[0,0,0,0];function cP(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function hP(t){return t.points!==void 0}function uP(t){return t.x!==void 0&&t.y!==void 0}function dP(t){return t.paths!==void 0}function pP(t){return t.rings!==void 0}function fP(t){function e(i,n){return i==null?n:n==null?i:t(i,n)}return e}const Ph=fP(Math.min),Rh=fP(Math.max);function j4e(t,e){return dP(e)?Bf(t,e.paths,!1,!1):pP(e)?Bf(t,e.rings,!1,!1):hP(e)?wS(t,e.points,!1,!1,!1,!1):cP(e)?gP(t,e):(uP(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.x,t[3]=e.y),t)}function G4e(t){let e,i,n,s;for(t.reset(),e=n=1/0,i=s=-1/0;t.nextPath();){const h=FJ(t);e=Math.min(h[0],e),n=Math.min(h[1],n),i=Math.max(h[2],i),s=Math.max(h[3],s)}return sn([e,n,i,s])}function FJ(t){let e,i,n,s;for(e=n=1/0,i=s=-1/0;t.nextPoint();)e=Math.min(t.x,e),n=Math.min(t.y,n),i=Math.max(t.x,i),s=Math.max(t.y,s);return sn([e,n,i,s])}function V4e(t,e){return dP(e)?Bf(t,e.paths,!0,!1):pP(e)?Bf(t,e.rings,!0,!1):hP(e)?wS(t,e.points,!0,!1,!0,!1):cP(e)?gP(t,e,!0,!1,!0,!1):(uP(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.x,t[4]=e.y,t[5]=e.z),t)}function Bf(t,e,i,n){const s=i?3:2;if(!e.length||!e[0].length)return null;let h,f,m,v,[x,M]=e[0][0],[$,I]=e[0][0];for(let P=0;P<e.length;P++){const L=e[P];for(let z=0;z<L.length;z++){const F=L[z],[U,W]=F;if(x=Ph(x,U),M=Ph(M,W),$=Rh($,U),I=Rh(I,W),i&&F.length>2){const K=F[2];h=Ph(h,K),f=Rh(f,K)}if(n&&F.length>s){const K=F[s];m=Ph(h,K),v=Rh(f,K)}}}return i?n?(t[0]=x,t[1]=M,t[2]=h,t[3]=m,t[4]=$,t[5]=I,t[6]=f,t[7]=v,t.length=8,t):(t[0]=x,t[1]=M,t[2]=h,t[3]=$,t[4]=I,t[5]=f,t.length=6,t):n?(t[0]=x,t[1]=M,t[2]=m,t[3]=$,t[4]=I,t[5]=v,t.length=6,t):(t[0]=x,t[1]=M,t[2]=$,t[3]=I,t.length=4,t)}function gP(t,e,i,n,s,h){const f=e.xmin,m=e.xmax,v=e.ymin,x=e.ymax;let M=e.zmin,$=e.zmax,I=e.mmin,P=e.mmax;return s?(M=M||0,$=$||0,h?(I=I||0,P=P||0,t[0]=f,t[1]=v,t[2]=M,t[3]=I,t[4]=m,t[5]=x,t[6]=$,t[7]=P,t):(t[0]=f,t[1]=v,t[2]=M,t[3]=m,t[4]=x,t[5]=$,t)):h?(I=I||0,P=P||0,t[0]=f,t[1]=v,t[2]=I,t[3]=m,t[4]=x,t[5]=P,t):(t[0]=f,t[1]=v,t[2]=m,t[3]=x,t)}function wS(t,e,i,n,s,h){const f=i?3:2,m=n&&h,v=i&&s;if(!e.length||!e[0].length)return null;let x,M,$,I,[P,L]=e[0],[z,F]=e[0];for(let U=0;U<e.length;U++){const W=e[U],[K,J]=W;if(P=Ph(P,K),L=Ph(L,J),z=Rh(z,K),F=Rh(F,J),v&&W.length>2){const te=W[2];x=Ph(x,te),M=Rh(M,te)}if(m&&W.length>f){const te=W[f];$=Ph(x,te),I=Rh(M,te)}}return s?(x=x||0,M=M||0,h?($=$||0,I=I||0,t[0]=P,t[1]=L,t[2]=x,t[3]=$,t[4]=z,t[5]=F,t[6]=M,t[7]=I,t):(t[0]=P,t[1]=L,t[2]=x,t[3]=z,t[4]=F,t[5]=M,t)):h?($=$||0,I=I||0,t[0]=P,t[1]=L,t[2]=$,t[3]=z,t[4]=F,t[5]=I,t):(t[0]=P,t[1]=L,t[2]=z,t[3]=F,t)}function jJ(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function GJ(t){return t.points!==void 0}function VJ(t){return t.x!==void 0&&t.y!==void 0}function HJ(t){return t.paths!==void 0}function BJ(t){return t.rings!==void 0}const _S=[];function mP(t,e,i,n){return{xmin:t,ymin:e,xmax:i,ymax:n}}function yP(t,e,i,n,s,h){return{xmin:t,ymin:e,zmin:i,xmax:n,ymax:s,zmax:h}}function vP(t,e,i,n,s,h){return{xmin:t,ymin:e,mmin:i,xmax:n,ymax:s,mmax:h}}function bP(t,e,i,n,s,h,f,m){return{xmin:t,ymin:e,zmin:i,mmin:n,xmax:s,ymax:h,zmax:f,mmax:m}}function xS(t,e=!1,i=!1){return e?i?bP(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]):yP(t[0],t[1],t[2],t[3],t[4],t[5]):i?vP(t[0],t[1],t[2],t[3],t[4],t[5]):mP(t[0],t[1],t[2],t[3])}function H4e(t){return t?jJ(t)?t:VJ(t)?qJ(t):BJ(t)?wP(t):HJ(t)?_P(t):GJ(t)?UJ(t):null:null}function UJ(t){const{hasZ:e,hasM:i,points:n}=t;return xS(wS(_S,n,e??!1,i??!1),e,i)}function qJ(t){const{x:e,y:i,z:n,m:s}=t,h=s!=null;return n!=null?h?bP(e,i,n,s,e,i,n,s):yP(e,i,n,e,i,n):h?vP(e,i,s,e,i,s):mP(e,i,e,i)}function wP(t){const{hasZ:e,hasM:i,rings:n}=t,s=Bf(_S,n,e??!1,i??!1);return s?xS(s,e,i):null}function _P(t){const{hasZ:e,hasM:i,paths:n}=t,s=Bf(_S,n,e??!1,i??!1);return s?xS(s,e,i):null}var Cv;function o8(t){return!Array.isArray(t[0])}let ba=Cv=class extends Mc{static fromExtent(t){const e=t.clone().normalize(),i=t.spatialReference;let n=!1,s=!1;for(const f of e)f.hasZ&&(n=!0),f.hasM&&(s=!0);const h={rings:e.map(f=>{const m=[[f.xmin,f.ymin],[f.xmin,f.ymax],[f.xmax,f.ymax],[f.xmax,f.ymin],[f.xmin,f.ymin]];if(n&&f.hasZ){const v=f.zmin+.5*(f.zmax-f.zmin);for(let x=0;x<m.length;x++)m[x].push(v)}if(s&&f.hasM){const v=f.mmin+.5*(f.mmax-f.mmin);for(let x=0;x<m.length;x++)m[x].push(v)}return m}),spatialReference:i};return n&&(h.hasZ=!0),s&&(h.hasM=!0),new Cv(h)}constructor(...t){super(...t),this.rings=[],this.type="polygon"}normalizeCtorArgs(t,e){var f,m;let i,n,s=null,h=null;return t&&!Array.isArray(t)?(s=t.rings??null,e||(t.spatialReference?e=t.spatialReference:t.rings||(e=t)),i=t.hasZ,n=t.hasM):s=t,s=s||[],e=e||tt.WGS84,s.length&&((f=s[0])==null?void 0:f[0])!=null&&typeof s[0][0]=="number"&&(s=[s]),h=(m=s[0])==null?void 0:m[0],h&&(i===void 0&&n===void 0?(i=h.length>2,n=h.length>3):i===void 0?i=n?h.length>3:h.length>2:n===void 0&&(n=i?h.length>3:h.length>2)),{rings:s,spatialReference:e,hasZ:i,hasM:n}}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const t=TJ(this);if(!t||isNaN(t[0])||isNaN(t[1])||this.hasZ&&isNaN(t[2]))return null;const e=new De;return e.x=t[0],e.y=t[1],e.spatialReference=this.spatialReference,this.hasZ&&(e.z=t[2]),e}get extent(){const{spatialReference:t}=this,e=wP(this);if(!e)return null;const i=new Lt(e);return i.spatialReference=t,i}get isSelfIntersecting(){return pJ(this.rings)}writeRings(t,e){e.rings=_e(this.rings)}addRing(t){if(!t)return;const e=this.rings,i=e.length;if(o8(t)){const n=[];for(let s=0,h=t.length;s<h;s++)n[s]=t[s].toArray();e[i]=n}else e[i]=t.concat();return this.notifyChange("rings"),this}clone(){const t=new Cv;return t.spatialReference=this.spatialReference,t.rings=_e(this.rings),t.hasZ=this.hasZ,t.hasM=this.hasM,t}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,i=t.spatialReference;if(e!=null!=(i!=null)||e!=null&&i!=null&&!e.equals(i)||this.rings.length!==t.rings.length)return!1;const n=([s,h,f,m],[v,x,M,$])=>s===v&&h===x&&(f==null&&M==null||f===M)&&(m==null&&$==null||m===$);for(let s=0;s<this.rings.length;s++){const h=this.rings[s],f=t.rings[s];if(!Za(h,f,n))return!1}return!0}contains(t){if(!t)return!1;const e=Sw(t,this.spatialReference);return mS(this,e??t)}isClockwise(t){const e=o8(t)?t.map(i=>this.hasZ?this.hasM?[i.x,i.y,i.z,i.m]:[i.x,i.y,i.z]:[i.x,i.y]):t;return $w(e)}getPoint(t,e){if(!this._validateInputs(t,e))return null;const i=this.rings[t][e],n=this.hasZ,s=this.hasM;return n&&!s?new De(i[0],i[1],i[2],void 0,this.spatialReference):s&&!n?new De(i[0],i[1],void 0,i[2],this.spatialReference):n&&s?new De(i[0],i[1],i[2],i[3],this.spatialReference):new De(i[0],i[1],this.spatialReference)}insertPoint(t,e,i){return this._validateInputs(t,e,!0)?(Hf(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t].splice(e,0,i),this.notifyChange("rings"),this):this}removePoint(t,e){if(!this._validateInputs(t,e))return null;const i=new De(this.rings[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("rings"),i}removeRing(t){if(!this._validateInputs(t,null))return null;const e=this.rings.splice(t,1)[0],i=this.spatialReference,n=e.map(s=>new De(s,i));return this.notifyChange("rings"),n}setPoint(t,e,i){return this._validateInputs(t,e)?(Hf(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t][e]=i,this.notifyChange("rings"),this):this}_validateInputs(t,e,i=!1){if(t==null||t<0||t>=this.rings.length)return!1;if(e!=null){const n=this.rings[t];if(i&&(e<0||e>n.length)||!i&&(e<0||e>=n.length))return!1}return!0}toJSON(t){return this.write({},t)}};_([T({readOnly:!0})],ba.prototype,"cache",null),_([T({readOnly:!0})],ba.prototype,"centroid",null),_([T({readOnly:!0})],ba.prototype,"extent",null),_([T({readOnly:!0})],ba.prototype,"isSelfIntersecting",null),_([T({type:[[[Number]]],json:{write:{isRequired:!0}}})],ba.prototype,"rings",void 0),_([_t("rings")],ba.prototype,"writeRings",null),ba=Cv=_([Y("esri.geometry.Polygon")],ba),ba.prototype.toJSON.isDefaultToJSON=!0;const En=ba;var wx;function WJ(t){return!Array.isArray(t[0])}let Zc=wx=class extends Mc{constructor(...t){super(...t),this.paths=[],this.type="polyline"}normalizeCtorArgs(t,e){var f,m;let i,n,s=null,h=null;return t&&!Array.isArray(t)?(s=t.paths??null,e||(t.spatialReference?e=t.spatialReference:t.paths||(e=t)),i=t.hasZ,n=t.hasM):s=t,s=s||[],e=e||tt.WGS84,s.length&&((f=s[0])==null?void 0:f[0])!=null&&typeof s[0][0]=="number"&&(s=[s]),h=(m=s[0])==null?void 0:m[0],h&&(i===void 0&&n===void 0?(i=h.length>2,n=!1):i===void 0?i=!n&&h.length>3:n===void 0&&(n=!i&&h.length>3)),{paths:s,spatialReference:e,hasZ:i,hasM:n}}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:t}=this,e=_P(this);if(!e)return null;const i=new Lt(e);return i.spatialReference=t,i}writePaths(t,e){e.paths=_e(this.paths)}addPath(t){if(!t)return;const e=this.paths,i=e.length;if(WJ(t)){const n=[];for(let s=0,h=t.length;s<h;s++)n[s]=t[s].toArray();e[i]=n}else e[i]=t.concat();return this.notifyChange("paths"),this}clone(){const t=new wx;return t.spatialReference=this.spatialReference,t.paths=_e(this.paths),t.hasZ=this.hasZ,t.hasM=this.hasM,t}getPoint(t,e){if(!this._validateInputs(t,e))return null;const i=this.paths[t][e],n=this.hasZ,s=this.hasM;return n&&!s?new De(i[0],i[1],i[2],void 0,this.spatialReference):s&&!n?new De(i[0],i[1],void 0,i[2],this.spatialReference):n&&s?new De(i[0],i[1],i[2],i[3],this.spatialReference):new De(i[0],i[1],this.spatialReference)}insertPoint(t,e,i){return this._validateInputs(t,e,!0)?(Hf(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t].splice(e,0,i),this.notifyChange("paths"),this):this}removePath(t){if(!this._validateInputs(t,null))return null;const e=this.paths.splice(t,1)[0],i=this.spatialReference,n=e.map(s=>new De(s,i));return this.notifyChange("paths"),n}removePoint(t,e){if(!this._validateInputs(t,e))return null;const i=new De(this.paths[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("paths"),i}setPoint(t,e,i){return this._validateInputs(t,e)?(Hf(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t][e]=i,this.notifyChange("paths"),this):this}_validateInputs(t,e,i=!1){if(t==null||t<0||t>=this.paths.length)return!1;if(e!=null){const n=this.paths[t];if(i&&(e<0||e>n.length)||!i&&(e<0||e>=n.length))return!1}return!0}toJSON(t){return this.write({},t)}};_([T({readOnly:!0})],Zc.prototype,"cache",null),_([T({readOnly:!0})],Zc.prototype,"extent",null),_([T({type:[[[Number]]],json:{write:{isRequired:!0}}})],Zc.prototype,"paths",void 0),_([_t("paths")],Zc.prototype,"writePaths",null),Zc=wx=_([Y("esri.geometry.Polyline")],Zc),Zc.prototype.toJSON.isDefaultToJSON=!0;const br=Zc,ZJ=Tr()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),B4e=Tr()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"});function xP(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function SP(t){return t.points!==void 0}function TP(t){return t.x!==void 0&&t.y!==void 0}function MP(t){return t.paths!==void 0}function SS(t){return t.rings!==void 0}function Bd(t){return t==null?null:t instanceof Mc?t:TP(t)?De.fromJSON(t):MP(t)?br.fromJSON(t):SS(t)?En.fromJSON(t):SP(t)?y0.fromJSON(t):xP(t)?Lt.fromJSON(t):null}function Em(t){return t?TP(t)?"esriGeometryPoint":MP(t)?"esriGeometryPolyline":SS(t)?"esriGeometryPolygon":xP(t)?"esriGeometryEnvelope":SP(t)?"esriGeometryMultipoint":null:null}const JJ={esriGeometryPoint:De,esriGeometryPolyline:br,esriGeometryPolygon:En,esriGeometryEnvelope:Lt,esriGeometryMultipoint:y0};function KJ(t){return t&&JJ[t]||null}const km={base:Mc,key:"type",typeMap:{extent:Lt,multipoint:y0,point:De,polyline:br,polygon:En}};yc(km);var _x;let Jc=_x=class extends Fe{constructor(t){super(t),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(t){return(t%=360)<0&&(t+=360),t}clone(){return new _x({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry!=null?this.targetGeometry.clone():null,camera:this.camera!=null?this.camera.clone():null})}};_([T({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:r_}}}}})],Jc.prototype,"rotation",void 0),_([qi("rotation")],Jc.prototype,"castRotation",null),_([T({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:r_}}}}})],Jc.prototype,"scale",void 0),_([T({types:km,json:{read:Bd,write:!0,origins:{"web-scene":{read:Bd,write:{overridePolicy:r_}}}}})],Jc.prototype,"targetGeometry",void 0),_([T({type:tJ,json:{write:!0}})],Jc.prototype,"camera",void 0),Jc=_x=_([Y("esri.Viewpoint")],Jc);const Jo=Jc;function r_(){return{enabled:!this.camera}}let Iv=class EP{constructor(){this._emitter=new EP.EventEmitter(this)}emit(e,i){return this._emitter.emit(e,i)}on(e,i){return this._emitter.on(e,i)}once(e,i){return this._emitter.once(e,i)}hasEventListener(e){return this._emitter.hasEventListener(e)}};(function(t){class e{constructor(s=null){this._target=s,this._listenersMap=null}clear(){var s;(s=this._listenersMap)==null||s.clear(),this._listenersMap=null}destroy(){this.clear()}emit(s,h){var x;let f=(x=this._listenersMap)==null?void 0:x.get(s);if(!f)return!1;const m=this._target||this;let v=!1;for(const M of f.slice()){const $="deref"in M?M.deref():M;$?$==null||$.call(m,h):v=!0}return v&&(f=f.filter(M=>!("deref"in M)||M.deref()!=null),this._listenersMap.set(s,f)),f.length>0}on(s,h){if(Array.isArray(s)){const m=s.map(v=>this.on(v,h));return Sc(m)}if(s.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap??(this._listenersMap=new Map);const f=this._listenersMap.get(s)||[];return f.push(h),this._listenersMap.set(s,f),ut(()=>{var x;const m=(x=this._listenersMap)==null?void 0:x.get(s),v=(m==null?void 0:m.indexOf(h))??-1;v>=0&&m.splice(v,1)})}once(s,h){const f=this.on(s,m=>{f.remove();const v="deref"in h?h.deref():h;v==null||v.call(null,m)});return f}hasEventListener(s){var f;const h=(f=this._listenersMap)==null?void 0:f.get(s);return h!=null&&h.length>0}}t.EventEmitter=e,t.EventedMixin=n=>{let s=class extends n{constructor(){super(...arguments),this._emitter=new e}destroy(){this._emitter.clear()}emit(h,f){return this._emitter.emit(h,f)}on(h,f){return this._emitter.on(h,f)}once(h,f){return this._emitter.once(h,f)}hasEventListener(h){return this._emitter.hasEventListener(h)}};return s=_([Y("esri.core.Evented")],s),s};let i=class extends Re{constructor(){super(...arguments),this._emitter=new Iv.EventEmitter(this)}destroy(){this._emitter.clear()}emit(n,s){return this._emitter.emit(n,s)}on(n,s){return this._emitter.on(n,s)}once(n,s){return this._emitter.once(n,s)}hasEventListener(n){return this._emitter.hasEventListener(n)}};i=_([Y("esri.core.Evented.EventedAccessor")],i),t.EventedAccessor=i})(Iv||(Iv={}));const ln=Iv;var At;(function(t){t[t.ADD=1]="ADD",t[t.REMOVE=2]="REMOVE",t[t.MOVE=4]="MOVE"})(At||(At={}));function kP(t){return(e,i)=>{e[i]=t}}let v0=class extends uA{notify(){const e=this._observers;if(e&&e.length>0){const i=e.slice();for(const n of i)n.onInvalidated(),n.onCommitted()}}};var Ql;let YJ=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(e){this.defaultPrevented=!1,this.item=e}},XJ=class{constructor(e,i,n,s,h){this.target=e,this.added=i,this.removed=n,this.start=s,this.deleteCount=h}};const Os=new Qd(YJ,void 0,t=>{t.item=null,t.target=null,t.defaultPrevented=!1,t.cancellable=!1});function a8(t){t&&typeof t=="object"&&"destroy"in t&&typeof t.destroy=="function"&&t.destroy()}function s_(t){return t?t instanceof Kl?t.toArray():t.length?Array.prototype.slice.apply(t):[]:[]}function o_(t){if(t!=null&&t.length)return t[0]}function QJ(t,e,i,n){const s=Math.min(t.length-i,e.length-n);let h=0;for(;h<s&&t[i+h]===e[n+h];)h++;return h}function $P(t,e,i,n){e&&e.forEach((s,h,f)=>{t.push(s),$P(t,i.call(n,s,h,f),i,n)})}const Dc=new Set,zc=new Set,Fc=new Set,a_=new Map;let eK=0,Kl=Ql=class extends ln.EventedAccessor{static isCollection(t){return t!=null&&t instanceof Ql}constructor(t){super(t),this._chgListeners=[],this._notifications=null,this._updating=!1,this._timer=null,this._observable=new v0,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:eK++})}normalizeCtorArgs(t){return t?Array.isArray(t)||t instanceof Ql?{items:t}:t:{}}destroy(){this._removeAllRaw(),this._timer&&this._timer.remove(),this._emitter.destroy(),this._notifications=null}*[Symbol.iterator](){yield*this.items}get items(){return Ve(this._observable),this._items}set items(t){this._emitBeforeChanges(At.ADD)||(this._splice(0,this.length,s_(t)),this._emitAfterChanges(At.ADD))}hasEventListener(t){return!this.destroyed&&(t==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(t))}on(t,e){if(this.destroyed)return ut();if(t==="change"){const i=this._chgListeners,n={removed:!1,callback:e};return i.push(n),this._notifications&&this._notifications.push({listeners:i.slice(),items:this._items.slice(),changes:[]}),ut(()=>{n.removed=!0,i.splice(i.indexOf(n),1)})}return this._emitter.on(t,e)}once(t,e){const i="deref"in e?()=>e.deref():()=>e,n=this.on(t,s=>{var h;(h=i())==null||h.call(null,s),n.remove()});return n}add(t,e){if(Ve(this._observable),this._emitBeforeChanges(At.ADD))return this;const i=this.getNextIndex(e??null);return this._splice(i,0,[t]),this._emitAfterChanges(At.ADD),this}addMany(t,e=this._items.length){if(Ve(this._observable),!(t!=null&&t.length))return this;if(this._emitBeforeChanges(At.ADD))return this;const i=this.getNextIndex(e);return this._splice(i,0,s_(t)),this._emitAfterChanges(At.ADD),this}at(t){if(Ve(this._observable),(t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this._items[t]}removeAll(){if(Ve(this._observable),!this.length||this._emitBeforeChanges(At.REMOVE))return[];const t=this._removeAllRaw();return this._emitAfterChanges(At.REMOVE),t}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return Ve(this._observable),this._createNewInstance({items:this._items.map(_e)})}concat(...t){Ve(this._observable);const e=t.map(s_);return this._createNewInstance({items:this._items.concat(...e)})}drain(t,e){if(Ve(this._observable),!this.length||this._emitBeforeChanges(At.REMOVE))return;const i=this._splice(0,this.length),n=i.length;for(let s=0;s<n;s++)t.call(e,i[s],s,i);this._emitAfterChanges(At.REMOVE)}destroyAll(){this.drain(a8)}destroyMany(t){const e=this.removeMany(t);return e.forEach(a8),e}every(t,e){return Ve(this._observable),this._items.every(t,e)}filter(t,e){let i;return Ve(this._observable),i=arguments.length===2?this._items.filter(t,e):this._items.filter(t),this._createNewInstance({items:i})}find(t,e){return Ve(this._observable),this._items.find(t,e)}findIndex(t,e){return Ve(this._observable),this._items.findIndex(t,e)}flatten(t,e){Ve(this._observable);const i=[];return $P(i,this,t,e),new Ql(i)}forEach(t,e){return Ve(this._observable),this._items.forEach(t,e)}getItemAt(t){return Ve(this._observable),this._items[t]}getNextIndex(t){Ve(this._observable);const e=this.length;return(t=t??e)<0?t=0:t>e&&(t=e),t}includes(t,e=0){return Ve(this._observable),this._items.includes(t,e)}indexOf(t,e=0){return Ve(this._observable),this._items.indexOf(t,e)}join(t=","){return Ve(this._observable),this._items.join(t)}lastIndexOf(t,e=this.length-1){return Ve(this._observable),this._items.lastIndexOf(t,e)}map(t,e){Ve(this._observable);const i=this._items.map(t,e);return new Ql({items:i})}reorder(t,e=this.length-1){Ve(this._observable);const i=this.indexOf(t);if(i!==-1){if(e<0?e=0:e>=this.length&&(e=this.length-1),i!==e){if(this._emitBeforeChanges(At.MOVE))return t;this._splice(i,1),this._splice(e,0,[t]),this._emitAfterChanges(At.MOVE)}return t}}pop(){if(Ve(this._observable),!this.length||this._emitBeforeChanges(At.REMOVE))return;const t=o_(this._splice(this.length-1,1));return this._emitAfterChanges(At.REMOVE),t}push(...t){return Ve(this._observable),this._emitBeforeChanges(At.ADD)||(this._splice(this.length,0,t),this._emitAfterChanges(At.ADD)),this.length}reduce(t,e){Ve(this._observable);const i=this._items;return arguments.length===2?i.reduce(t,e):i.reduce(t)}reduceRight(t,e){Ve(this._observable);const i=this._items;return arguments.length===2?i.reduceRight(t,e):i.reduceRight(t)}remove(t){return Ve(this._observable),this.removeAt(this.indexOf(t))}removeAt(t){if(Ve(this._observable),t<0||t>=this.length||this._emitBeforeChanges(At.REMOVE))return;const e=o_(this._splice(t,1));return this._emitAfterChanges(At.REMOVE),e}removeMany(t){if(Ve(this._observable),!(t!=null&&t.length)||this._emitBeforeChanges(At.REMOVE))return[];const e=t instanceof Ql?t.toArray():t,i=this._items,n=[],s=e.length;for(let h=0;h<s;h++){const f=e[h],m=i.indexOf(f);if(m>-1){const v=1+QJ(e,i,h+1,m+1),x=this._splice(m,v);x&&x.length>0&&n.push.apply(n,x),h+=v-1}}return this._emitAfterChanges(At.REMOVE),n}reverse(){if(Ve(this._observable),this._emitBeforeChanges(At.MOVE))return this;const t=this._splice(0,this.length);return t&&(t.reverse(),this._splice(0,0,t)),this._emitAfterChanges(At.MOVE),this}shift(){if(Ve(this._observable),!this.length||this._emitBeforeChanges(At.REMOVE))return;const t=o_(this._splice(0,1));return this._emitAfterChanges(At.REMOVE),t}slice(t=0,e=this.length){return Ve(this._observable),this._createNewInstance({items:this._items.slice(t,e)})}some(t,e){return Ve(this._observable),this._items.some(t,e)}sort(t){if(Ve(this._observable),!this.length||this._emitBeforeChanges(At.MOVE))return this;const e=this._splice(0,this.length);return arguments.length?e.sort(t):e.sort(),this._splice(0,0,e),this._emitAfterChanges(At.MOVE),this}splice(t,e,...i){Ve(this._observable);const n=(e?At.REMOVE:0)|(i.length?At.ADD:0);if(this._emitBeforeChanges(n))return[];const s=this._splice(t,e,i)||[];return this._emitAfterChanges(n),s}toArray(){return Ve(this._observable),this._items.slice()}toJSON(){return Ve(this._observable),this.toArray()}toLocaleString(){return Ve(this._observable),this._items.toLocaleString()}toString(){return Ve(this._observable),this._items.toString()}unshift(...t){return Ve(this._observable),!t.length||this._emitBeforeChanges(At.ADD)||(this._splice(0,0,t),this._emitAfterChanges(At.ADD)),this.length}_createNewInstance(t){return new this.constructor(t)}_splice(t,e,i){const n=this._items,s=this.itemType;let h,f;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._updating=!0,this._timer=wm(()=>this._dispatchChange())),t<0&&(t+=this.length),e){if(f=n.splice(t,e),this.hasEventListener("before-remove")){const m=Os.acquire();m.target=this,m.cancellable=!0;for(let v=0,x=f.length;v<x;v++)h=f[v],m.reset(h),this.emit("before-remove",m),m.defaultPrevented&&(f.splice(v,1),n.splice(t,0,h),t+=1,v-=1,x-=1);Os.release(m)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const m=Os.acquire();m.target=this,m.cancellable=!1;const v=f.length;for(let x=0;x<v;x++)m.reset(f[x]),this.emit("after-remove",m);Os.release(m)}}if(i!=null&&i.length){if(s){const M=[];for(const $ of i){const I=s.ensureType($);I==null&&$!=null||M.push(I)}i=M}const m=this.hasEventListener("before-add"),v=this.hasEventListener("after-add"),x=t===this.length;if(m||v){const M=Os.acquire();M.target=this,M.cancellable=!0;const $=Os.acquire();$.target=this,$.cancellable=!1;for(const I of i)m?(M.reset(I),this.emit("before-add",M),M.defaultPrevented||(x?n.push(I):n.splice(t++,0,I),this._set("length",n.length),v&&($.reset(I),this.emit("after-add",$)))):(x?n.push(I):n.splice(t++,0,I),this._set("length",n.length),$.reset(I),this.emit("after-add",$));Os.release($),Os.release(M)}else{if(x)for(const M of i)n.push(M);else n.splice(t,0,...i);this._set("length",n.length)}}if((i!=null&&i.length||f!=null&&f.length)&&this._notifyChangeEvent(i,f),this.hasEventListener("after-splice")){const m=new XJ(this,i,f,t,e);this.emit("after-splice",m)}return f}_emitBeforeChanges(t){let e=!1;if(this.hasEventListener("before-changes")){const i=Os.acquire();i.target=this,i.cancellable=!0,i.type=t,this.emit("before-changes",i),e=i.defaultPrevented,Os.release(i)}return e}_emitAfterChanges(t){if(this.hasEventListener("after-changes")){const e=Os.acquire();e.target=this,e.cancellable=!1,e.type=t,this.emit("after-changes",e),Os.release(e)}this._observable.notify()}_notifyChangeEvent(t,e){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:t,removed:e})}get updating(){return this._updating}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),this._updating=!1,!this._notifications)return;const t=this._notifications;this._notifications=null;for(const e of t){const i=e.changes;Dc.clear(),zc.clear(),Fc.clear();for(const{added:v,removed:x}of i){if(v)if(Fc.size===0&&zc.size===0)for(const M of v)Dc.add(M);else for(const M of v)zc.has(M)?(Fc.add(M),zc.delete(M)):Fc.has(M)||Dc.add(M);if(x)if(Fc.size===0&&Dc.size===0)for(const M of x)zc.add(M);else for(const M of x)Dc.has(M)?Dc.delete(M):(Fc.delete(M),zc.add(M))}const n=mr.acquire();Dc.forEach(v=>{n.push(v)});const s=mr.acquire();zc.forEach(v=>{s.push(v)});const h=this._items,f=e.items,m=mr.acquire();if(Fc.forEach(v=>{f.indexOf(v)!==h.indexOf(v)&&m.push(v)}),e.listeners&&(n.length||s.length||m.length)){const v={target:this,added:n,removed:s,moved:m},x=e.listeners.length;for(let M=0;M<x;M++){const $=e.listeners[M];$.removed||$.callback.call(this,v)}}mr.release(n),mr.release(s),mr.release(m)}Dc.clear(),zc.clear(),Fc.clear()}};Kl.ofType=t=>{if(!t)return Ql;if(a_.has(t))return a_.get(t);let e=null;if(typeof t=="function")e=t.prototype.declaredClass;else if(t.base)e=t.base.prototype.declaredClass;else for(const n in t.typeMap){const s=t.typeMap[n].prototype.declaredClass;e?e+=` | ${s}`:e=s}let i=class extends Ql{};return _([kP({Type:t,ensureType:typeof t=="function"?wn(t):yc(t)})],i.prototype,"itemType",void 0),i=_([Y(`esri.core.Collection<${e}>`)],i),a_.set(t,i),i},_([T()],Kl.prototype,"_updating",void 0),_([T()],Kl.prototype,"length",void 0),_([T()],Kl.prototype,"items",null),_([T({readOnly:!0})],Kl.prototype,"updating",null),Kl=Ql=_([Y("esri.core.Collection")],Kl);const Pe=Kl;function Z4e(t,e,i){return vd(t.map((n,s)=>e.apply(i,[n,s])))}async function tK(t,e,i){return(await vd(t.map((n,s)=>e.apply(i,[n,s])))).map(n=>n.value)}function TS(t){return{ok:!0,value:t}}function MS(t){return{ok:!1,error:t}}function iK(t){return t!=null&&t.ok===!0?t.value:null}function nK(t){return t!=null&&t.ok===!1?t.error:null}async function CP(t){if(t==null)return{ok:!1,error:new Error("no promise provided")};try{return TS(await t)}catch(e){return MS(e)}}async function J4e(t){try{return TS(await t)}catch(e){return SA(e),MS(e)}}function $m(t,e){return new Kc(t,e)}let Kc=class extends Re{get value(){return iK(this._result)}get error(){return nK(this._result)}get finished(){return this._result!=null}constructor(e,i){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=ms(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:n}=this._abortController;this.promise=e(n),this.promise.then(s=>{this._result=TS(s),this._cleanup()},s=>{this._result=MS(s),this._cleanup()}),this._abortHandle=ys(i,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=Rt(this._abortHandle),this._abortController=null}};_([T()],Kc.prototype,"value",null),_([T()],Kc.prototype,"error",null),_([T()],Kc.prototype,"finished",null),_([T()],Kc.prototype,"promise",void 0),_([T()],Kc.prototype,"_result",void 0),Kc=_([Y("esri.core.asyncUtils.ReactiveTask")],Kc);let Lp=class extends Pe{constructor(e){super(e),this.getCollections=null}initialize(){this.addHandles(NU(()=>this._refresh()))}destroy(){this.getCollections=null}_refresh(){const e=this.getCollections!=null?this.getCollections():null;if(e==null)return void this.removeAll();let i=0;for(const n of e)n!=null&&(i=this._processCollection(i,n));this.splice(i,this.length)}_createNewInstance(e){return new Pe(e)}_processCollection(e,i){if(!i)return e;const n=this.itemFilterFunction??(s=>!!s);for(const s of i)if(s){if(n(s)){const h=this.indexOf(s,e);h>=0?h!==e&&this.reorder(s,e):this.add(s,e),++e}if(this.getChildrenFunction){const h=this.getChildrenFunction(s);if(Array.isArray(h))for(const f of h)e=this._processCollection(e,f);else e=this._processCollection(e,h)}}return e}};_([T()],Lp.prototype,"getCollections",void 0),_([T()],Lp.prototype,"getChildrenFunction",void 0),_([T()],Lp.prototype,"itemFilterFunction",void 0),Lp=_([Y("esri.core.CollectionFlattener")],Lp);const qg=Lp;function Ee(t,e,i={}){return ES(t,e,i,IP)}function nr(t,e,i={}){return ES(t,e,i,AP)}function ES(t,e,i={},n){let s=null;const h=i.once?(f,m)=>{n(f)&&(Rt(s),e(f,m))}:(f,m)=>{n(f)&&e(f,m)};if(s=WU(t,h,i.sync,i.equals),i.initial){const f=t();h(f,f)}return s}function Es(t,e,i,n={}){let s=null,h=null,f=null;function m(){var M;s&&h&&(h.remove(),(M=n.onListenerRemove)==null||M.call(n,s),s=null,h=null)}function v(M){n.once&&n.once&&Rt(f),i(M)}const x=Ee(t,(M,$)=>{var I;m(),dw(M)&&(s=M,h=vm(M,e,v),(I=n.onListenerAdd)==null||I.call(n,M))},{sync:n.sync,initial:!0});return f=ut(()=>{x.remove(),m()}),f}function Zh(t,e){return rK(t,AP,e)}function rK(t,e,i){if(Ss(i))return Promise.reject(Yt());const n=t();if(e!=null&&e(n))return Promise.resolve(n);let s=null;function h(){s=Rt(s)}return new Promise((f,m)=>{s=Sc([ys(i,()=>{h(),m(Yt())}),ES(t,v=>{h(),f(v)},{sync:!1,once:!0},e??IP)])})}function IP(t){return!0}function AP(t){return!!t}function sK(t,e,i={}){let n=!1;const s=Ee(t,(h,f)=>{n||e(h,f)},i);return{remove(){s.remove()},pause(){n=!0},resume(){n=!1}}}function oK(t,e){const i=new Pe,n=Es(t,"after-splice",({added:s,start:h,deleteCount:f})=>{const m=i.splice(h,f);for(const v of m)v.remove();if(s!=null&&s.length){const v=s.map(e);i.addMany(v,h)}},{sync:!0,onListenerRemove:()=>i.drain(s=>s.remove()),onListenerAdd:s=>i.addMany(s.items.map(e))});return i.addHandles(n),i}function aK(t,e){const i=new Pe,n=oK(t,m=>$m(async v=>{const x=await e(m,v);if(Ss(v))throw x.remove(),Yt();return x})),s=()=>null,h=async m=>{const v=await m.promise,x=n.indexOf(m);x<0||i.splice(x,1,v)};i.addMany(n.items.map(s));for(const m of n)ro(h(m));const f=n.on("after-splice",({added:m,start:v,deleteCount:x})=>{const M=i.splice(v,x);for(const $ of M)$==null||$.remove();if(m!=null&&m.length){i.addMany(m.map(s),v);for(const $ of m)ro(h($))}});return i.addHandles([oA(n),f]),i}const Ya={sync:!0},Pt={initial:!0},xi={sync:!0,initial:!0};let s2=class{constructor(e=i=>i.values().next().value){this._peeker=e,this._observable=new v0,this._items=new Set}get length(){return Ve(this._observable),this._items.size}clear(){this.length!==0&&(this._items.clear(),this._observable.notify())}last(){if(this.length===0)return;let e;for(e of this._items);return e}peek(){if(this.length!==0)return this._peeker(this._items)}push(e){this.contains(e)||(this._items.add(e),this._observable.notify())}contains(e){return Ve(this._observable),this._items.has(e)}pop(){if(this.length===0)return;const e=this.peek();return this._items.delete(e),this._observable.notify(),e}popLast(){if(this.length===0)return;const e=this.last();return this._items.delete(e),this._observable.notify(),e}remove(e){this.contains(e)&&(this._items.delete(e),this._observable.notify())}filter(e){const i=this.length;return this._items.forEach(n=>{e(n)||this._items.delete(n)}),i!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){Ve(this._observable),yield*this._items}};const OP=new FinalizationRegistry(t=>{t.close()});function lK(t,e){OP.register(t,e,e)}function cK(t){OP.unregister(t)}function PP(t,e){return new Proxy({},{get:(i,n,s)=>(...h)=>{let f,m;const v=h[h.length-1];return hK(v)&&(f=v.signal,m=v.transferList,h.pop()),t.apply(e?`${e}.${n.toString()}`:n.toString(),h,{transferList:m,signal:f})}})}function hK(t){return typeof t=="object"&&!Array.isArray(t)&&t!=null&&("signal"in t||"transferList"in t||Object.keys(t).length===0)}const uK={statsWorker:()=>be(()=>import("./statsWorker-CKRwxPm0.js"),__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url),geometryEngineWorker:()=>be(()=>import("./geometryEngineWorker-Cwq6XN0Y.js"),__vite__mapDeps([7,8,9]),import.meta.url),CSVSourceWorker:()=>be(()=>import("./CSVSourceWorker-CbO_n6D9.js"),__vite__mapDeps([10,11,9,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,2,1,3,4,5,6,28,29,30,31]),import.meta.url),EdgeProcessingWorker:()=>be(()=>import("./EdgeProcessingWorker-uLqmOrxN.js"),__vite__mapDeps([32,33,34,35,36,37,38,39,40,41,42,43,44,45]),import.meta.url),ElevationSamplerWorker:()=>be(()=>import("./ElevationSamplerWorker-C7LJ2kyo.js"),__vite__mapDeps([46,18,47,48,49,50,51,52,35,53]),import.meta.url),FeatureServiceSnappingSourceWorker:()=>be(()=>import("./FeatureServiceSnappingSourceWorker-BVb9_B_p.js"),__vite__mapDeps([54,14,15,12,13,16,17,18,19,9,20,21,22,23,24,25,26,27,2,1,3,4,5,6,28,55,56,57,58,59,60]),import.meta.url),GeoJSONSourceWorker:()=>be(()=>import("./GeoJSONSourceWorker-D_9sHWd7.js"),__vite__mapDeps([61,15,12,13,16,14,17,18,19,9,20,21,22,23,24,25,26,27,2,1,3,4,5,6,28,62,11,30,31,63]),import.meta.url),LercWorker:()=>be(()=>import("./LercWorker-CSLMkaNH.js"),[],import.meta.url),MemorySourceWorker:()=>be(()=>import("./MemorySourceWorker-BEkpQ2S9.js"),__vite__mapDeps([64,15,12,13,16,65,14,17,18,19,9,20,21,22,23,24,25,26,27,2,1,3,4,5,6,28,30,31,63,11]),import.meta.url),PBFDecoderWorker:()=>be(()=>import("./PBFDecoderWorker-Do651Bm7.js"),__vite__mapDeps([66,67,15,12,13,16,56,57]),import.meta.url),FeaturePipelineWorker:()=>be(()=>import("./FeaturePipelineWorker-BDv50mHA.js"),__vite__mapDeps([68,69,70,71,72,73,43,74,75,44,76,77,78,37,79,80,28,26,25,81,82,83,13,84,85,86,87,31,21,15,12,16,19,9,88,89,90,91,92,93,94,20,22,23,24,27,2,1,3,4,5,6,58,56,57,59,95,62,11,30,63,96,97]),import.meta.url),PointCloudWorker:()=>be(()=>import("./PointCloudWorker-PwXEWsgN.js"),__vite__mapDeps([98,99,100,101,102,41,103,48,49]),import.meta.url),RasterWorker:()=>be(()=>import("./RasterWorker-BhJGbdG2.js"),__vite__mapDeps([104,105,106,107,108,109,110,111]),import.meta.url),SceneLayerSnappingSourceWorker:()=>be(()=>import("./SceneLayerSnappingSourceWorker-BwVlYANU.js"),__vite__mapDeps([112,113,114,37,38,39,40,34,35,36,41,42,43,44,45]),import.meta.url),SceneLayerWorker:()=>be(()=>import("./SceneLayerWorker-BkzdxvlT.js"),__vite__mapDeps([115,52,50,116,48,102,41,117,118,119,120,121,78,103,49]),import.meta.url),WFSSourceWorker:()=>be(()=>import("./WFSSourceWorker-ZN3uDHS6.js"),__vite__mapDeps([122,15,12,13,16,14,17,18,19,9,20,21,22,23,24,25,26,27,2,1,3,4,5,6,28,62,11,63,123,124]),import.meta.url),WorkerTileHandler:()=>be(()=>import("./WorkerTileHandler-Vgl4PJRo.js"),__vite__mapDeps([125,126,84,86,127,128,72,57,91,69,129,130,43,44,108,92,82]),import.meta.url),Lyr3DWorker:()=>be(()=>import("./Lyr3DWorker-Cm1QW9U8.js"),[],import.meta.url)},RP="worker:port-closed";var Mn;(function(t){t[t.HANDSHAKE=0]="HANDSHAKE",t[t.OPEN=1]="OPEN",t[t.OPENED=2]="OPENED",t[t.RESPONSE=3]="RESPONSE",t[t.INVOKE=4]="INVOKE",t[t.ABORT=5]="ABORT",t[t.CLOSE=6]="CLOSE",t[t.OPEN_PORT=7]="OPEN_PORT",t[t.ON=8]="ON"})(Mn||(Mn={}));let dK=0;function LP(){return dK++}function pK(t){return t&&typeof t=="object"&&("result"in t||"transferList"in t)}function Wg(t){return t?typeof t=="string"?JSON.stringify({name:"message",message:t}):t.toJSON?JSON.stringify(t):JSON.stringify({name:t.name,message:t.message,details:t.details||{stack:t.stack}}):null}function kS(t,e,i,n){if(e.type===Mn.OPEN_PORT)return void t.postMessage(e,[e.port]);if(e.type!==Mn.INVOKE&&e.type!==Mn.RESPONSE)return void t.postMessage(e);let s;if(pK(i)?(s=l8(i.transferList),e.data=i.result):(s=l8(n),e.data=i),s){if(pe("ff")){for(const h of s)if("byteLength"in h&&h.byteLength>267386880){const f="Worker call with large ArrayBuffer would crash Firefox";switch(e.type){case Mn.INVOKE:throw f;case Mn.RESPONSE:return void kS(t,{type:Mn.RESPONSE,jobId:e.jobId,error:Wg(f)})}}}t.postMessage(e,s)}else t.postMessage(e)}function Zg(t){if(!t)return null;const e=t.data;return e?typeof e=="string"?JSON.parse(e):e:null}function l8(t){if(!(t!=null&&t.length))return null;if(pe("esri-workers-arraybuffer-transfer"))return t;const e=t.filter(i=>!fK(i));return e.length?e:null}function fK(t){var e;return t instanceof ArrayBuffer||((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="ArrayBuffer"}async function Q4e(t){try{return await t}catch(e){const i=(e==null?void 0:e.name)===RP;if(!(Zr(e)||i))throw e;return}}const{CLOSE:c8,ABORT:h8,INVOKE:u8,RESPONSE:G0,OPEN_PORT:d8,ON:gK}=Mn,mK=2;let yK=class{constructor(e){this._invoke=e,this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._timer=null,this._process=this._process.bind(this)}push(e){e.type===Mn.ABORT?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const e of this._invokeMessages)this._cancelledJobIds.has(e.jobId)||this._invoke(e);this._cancelledJobIds.clear(),this._invokeMessages.length=0}},Jh=class Np{static connect(e,i){const n=new MessageChannel;let s;s=typeof e=="function"?new e:"default"in e&&typeof e.default=="function"?new e.default:e;const h=new Np(n.port1,{channel:n,client:s,schedule:i});return typeof s=="object"&&"remoteClient"in s&&(s.remoteClient=h),Np.clients.set(h,s),n.port2}static loadWorker(e){const i=uK[e];return i?i():Promise.resolve(null)}constructor(e,i,n){this._port=e,this._jobQueue=n,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new yK(s=>this._onInvokeMessage(s)),this._client=i.client,this._onMessage=this._onMessage.bind(this),this._channel=i.channel,this._schedule=i.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:c8}),this._close()}isBusy(){return this._outJobs.size>0}invoke(e,i,n){return this.apply(e,[i],n)}apply(e,i,n){const s=n==null?void 0:n.signal,h=n==null?void 0:n.transferList;if(!this._port)return Promise.reject(new fe(RP,`Cannot call invoke('${e}'), port is closed`,{methodName:e,data:i}));const f=LP();return new Promise((m,v)=>{if(Ss(s))return this._processWork(),void v(Yt());const x=ys(s,()=>{const $=this._outJobs.get(f);$&&(this._outJobs.delete(f),this._processWork(),Rt($.abortHandle),this._post({type:h8,jobId:f}),v(Yt()))}),M={resolve:m,reject:v,abortHandle:x,debugInfo:e};this._outJobs.set(f,M),this._post({type:u8,jobId:f,methodName:e,abortable:s!=null},i,h)})}createInvokeProxy(e){return PP(this,e)}on(e,i){const n=new MessageChannel;function s(h){i(h.data)}return this._port.postMessage({type:Mn.ON,eventType:e,port:n.port2},[n.port2]),n.port1.addEventListener("message",s),n.port1.start(),ut(()=>{n.port1.postMessage({type:Mn.CLOSE}),n.port1.close(),n.port1.removeEventListener("message",s)})}jobAdded(){this._processWork()}openPort(){const e=new MessageChannel;return this._post({type:d8,port:e.port2}),e.port1}_processWork(){var f;if(this._outJobs.size>=mK)return;const e=(f=this._jobQueue)==null?void 0:f.pop();if(!e)return;const{methodName:i,data:n,invokeOptions:s,resolver:h}=e;this.apply(i,n,s).then(m=>h.resolve(m)).catch(m=>h.reject(m))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(e=>{Rt(e.abortHandle),e.reject(Yt(`Worker closing, aborting job calling '${e.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null}_onMessage(e){this._schedule!=null?this._schedule(()=>this._processMessage(e,!0)):this._processMessage(e,!1)}_processMessage(e,i){const n=Zg(e);if(n)switch(n.type){case G0:this._onResponseMessage(n);break;case u8:i?this._onInvokeMessage(n):this._invokeQueue.push(n);break;case h8:this._onAbortMessage(n);break;case c8:this._onCloseMessage();break;case d8:this._onOpenPortMessage(n);break;case gK:this._onOnMessage(n)}}_onAbortMessage(e){const i=this._inJobs,n=e.jobId,s=i.get(n);this._invokeQueue.push(e),s&&(s.controller&&s.controller.abort(),i.delete(n))}_onCloseMessage(){const e=this._client;this._close(),e&&"destroy"in e&&Np.clients.get(this)===e&&e.destroy(),Np.clients.delete(this),e!=null&&e.remoteClient&&(e.remoteClient=null)}_onInvokeMessage(e){const{methodName:i,jobId:n,data:s=[],abortable:h}=e,f=h?new AbortController:null,m=this._inJobs;let v,x=this._client,M=x[i];try{if(!M&&i&&i.includes(".")){const $=i.split(".");for(let I=0;I<$.length-1;I++)x=x[$[I]],M=x[$[I+1]]}if(typeof M!="function")throw new TypeError(`${i} is not a function`);s.push({client:this,signal:f?f.signal:null}),v=M.apply(x,s)}catch($){return void this._post({type:G0,jobId:n,error:Wg($)})}Tc(v)?(m.set(n,{controller:f,promise:v}),v.then($=>{m.has(n)&&(m.delete(n),this._post({type:G0,jobId:n},$))},$=>{m.has(n)&&(m.delete(n),Zr($)||this._post({type:G0,jobId:n,error:Wg($||{message:`Error encountered at method ${i}`})}))})):this._post({type:G0,jobId:n},v)}_onOpenPortMessage(e){new Np(e.port,{client:this._client})}_onOnMessage(e){const{port:i}=e,n=this._client.on(e.eventType,h=>{i.postMessage(h)}),s=vm(e.port,"message",h=>{const f=Zg(h);(f==null?void 0:f.type)===Mn.CLOSE&&(s.remove(),n.remove(),i.close())})}_onResponseMessage(e){const{jobId:i,error:n,data:s}=e,h=this._outJobs;if(!h.has(i))return;const f=h.get(i);h.delete(i),this._processWork(),Rt(f.abortHandle),n?f.reject(fe.fromJSON(JSON.parse(n))):f.resolve(s)}_post(e,i,n){return kS(this._port,e,i,n)}};Jh.kernelInfo={buildDate:aO,fullVersion:rS,revision:lO},Jh.clients=new Map;let vK=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new s2}destroy(){this.close()}get closed(){var e;return!((e=this._clients)!=null&&e.length)}open(e,i){return new Promise((n,s)=>{let h=!0;const f=m=>{Zt(i.signal),h&&(h=!1,m())};this._clients.length=e.length,this._clientPromises.length=e.length,this._inUseClients.length=e.length;for(let m=0;m<e.length;++m){const v=e[m];Tc(v)?this._clientPromises[m]=v.then(x=>(this._clients[m]=new Jh(x,i,this._ongoingJobsQueue),f(n),this._clients[m]),()=>(f(s),null)):(this._clients[m]=new Jh(v,i,this._ongoingJobsQueue),this._clientPromises[m]=Promise.resolve(this._clients[m]),f(n))}})}broadcast(e,i,n){const s=new Array(this._clientPromises.length);for(let h=0;h<this._clientPromises.length;++h){const f=this._clientPromises[h];s[h]=f.then(m=>m==null?void 0:m.invoke(e,i,n))}return s}close(){let e;for(;e=this._ongoingJobsQueue.pop();)e.resolver.reject(Yt(`Worker closing, aborting job calling '${e.methodName}'`));for(const i of this._clientPromises)i.then(n=>n==null?void 0:n.close());this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0,cK(this)}invoke(e,i,n){return this.apply(e,[i],n)}apply(e,i,n){const s=Ts();this._ongoingJobsQueue.push({methodName:e,data:i,invokeOptions:n,resolver:s});for(let h=0;h<this._clientPromises.length;h++){const f=this._clients[h];f?f.jobAdded():this._clientPromises[h].then(m=>m==null?void 0:m.jobAdded())}return s.promise}createInvokeProxy(e){return PP(this,e)}on(e,i){return Promise.all(this._clientPromises).then(()=>Sc(this._clients.map(n=>n.on(e,i))))}openPorts(){return new Promise(e=>{const i=new Array(this._clientPromises.length);let n=i.length;for(let s=0;s<this._clientPromises.length;++s)this._clientPromises[s].then(h=>{h&&(i[s]=h.openPort()),--n==0&&e(i)})})}get test(){}};const bK={async request(t,e){var f,m;const i=t.options,n=i.responseType;i.signal=e==null?void 0:e.signal,i.responseType=n==="native"||n==="native-request-init"?"native-request-init":n&&["blob","json","text"].includes(n)&&((f=J5(t.url))!=null&&f.after)?n:"array-buffer";const s=await zi(t.url,i),h={data:s.data,httpStatus:s.httpStatus,ssl:s.ssl};switch((m=s.requestOptions)==null?void 0:m.responseType){case"native-request-init":return delete h.data.signal,h;case"blob":h.data=await h.data.arrayBuffer();break;case"json":h.data=new TextEncoder().encode(JSON.stringify(h.data)).buffer;break;case"text":h.data=new TextEncoder().encode(h.data).buffer}return{result:h,transferList:[h.data]}}};let fg;var AI,OI;const wK=((AI=globalThis.esriConfig)==null?void 0:AI.locale)??((OI=globalThis.dojoConfig)==null?void 0:OI.locale);function NP(){var t;return wK??((t=globalThis.navigator)==null?void 0:t.language)??"en"}function Ur(){return fg===void 0&&(fg=NP()),fg}function _K(t=Ur()){const e=/^([a-zA-Z]{2,3})(?:[_-]\w+)*$/.exec(t);return e==null?void 0:e[1].toLowerCase()}const Av=[];function $S(t){return Av.push(t),ut(()=>Av.splice(Av.indexOf(t),1))}const Ov=[];function CS(t){return Ov.push(t),ut(()=>Ov.splice(Ov.indexOf(t),1))}function xK(){const t=NP();fg!==t&&([...Ov].forEach(e=>e(t)),fg=t,[...Av].forEach(e=>e(t)))}var PI;(PI=globalThis.addEventListener)==null||PI.call(globalThis,"languagechange",xK);const p8=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Bishkek"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);class tp extends Error{}class SK extends tp{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class TK extends tp{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class MK extends tp{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class pf extends tp{}class DP extends tp{constructor(e){super(`Invalid unit ${e}`)}}class Vr extends tp{}class jc extends tp{constructor(){super("Zone is an abstract class")}}const ze="numeric",ta="short",bs="long",o2={year:ze,month:ze,day:ze},zP={year:ze,month:ta,day:ze},EK={year:ze,month:ta,day:ze,weekday:ta},FP={year:ze,month:bs,day:ze},jP={year:ze,month:bs,day:ze,weekday:bs},GP={hour:ze,minute:ze},VP={hour:ze,minute:ze,second:ze},HP={hour:ze,minute:ze,second:ze,timeZoneName:ta},BP={hour:ze,minute:ze,second:ze,timeZoneName:bs},UP={hour:ze,minute:ze,hourCycle:"h23"},qP={hour:ze,minute:ze,second:ze,hourCycle:"h23"},WP={hour:ze,minute:ze,second:ze,hourCycle:"h23",timeZoneName:ta},ZP={hour:ze,minute:ze,second:ze,hourCycle:"h23",timeZoneName:bs},JP={year:ze,month:ze,day:ze,hour:ze,minute:ze},KP={year:ze,month:ze,day:ze,hour:ze,minute:ze,second:ze},YP={year:ze,month:ta,day:ze,hour:ze,minute:ze},XP={year:ze,month:ta,day:ze,hour:ze,minute:ze,second:ze},kK={year:ze,month:ta,day:ze,weekday:ta,hour:ze,minute:ze},QP={year:ze,month:bs,day:ze,hour:ze,minute:ze,timeZoneName:ta},eR={year:ze,month:bs,day:ze,hour:ze,minute:ze,second:ze,timeZoneName:ta},tR={year:ze,month:bs,day:ze,weekday:bs,hour:ze,minute:ze,timeZoneName:bs},iR={year:ze,month:bs,day:ze,weekday:bs,hour:ze,minute:ze,second:ze,timeZoneName:bs};class Cm{get type(){throw new jc}get name(){throw new jc}get ianaName(){return this.name}get isUniversal(){throw new jc}offsetName(e,i){throw new jc}formatOffset(e,i){throw new jc}offset(e){throw new jc}equals(e){throw new jc}get isValid(){throw new jc}}let l_=null;class Cw extends Cm{static get instance(){return l_===null&&(l_=new Cw),l_}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:i,locale:n}){return uR(e,i,n)}formatOffset(e,i){return gg(this.offset(e),i)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}let Pv={};function $K(t){return Pv[t]||(Pv[t]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),Pv[t]}const CK={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function IK(t,e){const i=t.format(e).replace(/\u200E/g,""),n=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(i),[,s,h,f,m,v,x,M]=n;return[f,s,h,m,v,x,M]}function AK(t,e){const i=t.formatToParts(e),n=[];for(let s=0;s<i.length;s++){const{type:h,value:f}=i[s],m=CK[h];h==="era"?n[m]=f:st(m)||(n[m]=parseInt(f,10))}return n}let uy={};class ia extends Cm{static create(e){return uy[e]||(uy[e]=new ia(e)),uy[e]}static resetCache(){uy={},Pv={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=ia.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:i,locale:n}){return uR(e,i,n,this.name)}formatOffset(e,i){return gg(this.offset(e),i)}offset(e){const i=new Date(e);if(isNaN(i))return NaN;const n=$K(this.name);let[s,h,f,m,v,x,M]=n.formatToParts?AK(n,i):IK(n,i);m==="BC"&&(s=-Math.abs(s)+1);const I=Aw({year:s,month:h,day:f,hour:v===24?0:v,minute:x,second:M,millisecond:0});let P=+i;const L=P%1e3;return P-=L>=0?L:1e3+L,(I-P)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let f8={};function OK(t,e={}){const i=JSON.stringify([t,e]);let n=f8[i];return n||(n=new Intl.ListFormat(t,e),f8[i]=n),n}let xx={};function Sx(t,e={}){const i=JSON.stringify([t,e]);let n=xx[i];return n||(n=new Intl.DateTimeFormat(t,e),xx[i]=n),n}let Tx={};function PK(t,e={}){const i=JSON.stringify([t,e]);let n=Tx[i];return n||(n=new Intl.NumberFormat(t,e),Tx[i]=n),n}let Mx={};function RK(t,e={}){const{base:i,...n}=e,s=JSON.stringify([t,n]);let h=Mx[s];return h||(h=new Intl.RelativeTimeFormat(t,e),Mx[s]=h),h}let m1=null;function LK(){return m1||(m1=new Intl.DateTimeFormat().resolvedOptions().locale,m1)}let g8={};function NK(t){let e=g8[t];if(!e){const i=new Intl.Locale(t);e="getWeekInfo"in i?i.getWeekInfo():i.weekInfo,g8[t]=e}return e}function DK(t){const e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));const i=t.indexOf("-u-");if(i===-1)return[t];{let n,s;try{n=Sx(t).resolvedOptions(),s=t}catch{const v=t.substring(0,i);n=Sx(v).resolvedOptions(),s=v}const{numberingSystem:h,calendar:f}=n;return[s,h,f]}}function zK(t,e,i){return(i||e)&&(t.includes("-u-")||(t+="-u"),i&&(t+=`-ca-${i}`),e&&(t+=`-nu-${e}`)),t}function FK(t){const e=[];for(let i=1;i<=12;i++){const n=et.utc(2009,i,1);e.push(t(n))}return e}function jK(t){const e=[];for(let i=1;i<=7;i++){const n=et.utc(2016,11,13+i);e.push(t(n))}return e}function dy(t,e,i,n){const s=t.listingMode();return s==="error"?null:s==="en"?i(e):n(e)}function GK(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||new Intl.DateTimeFormat(t.intl).resolvedOptions().numberingSystem==="latn"}class VK{constructor(e,i,n){this.padTo=n.padTo||0,this.floor=n.floor||!1;const{padTo:s,floor:h,...f}=n;if(!i||Object.keys(f).length>0){const m={useGrouping:!1,...n};n.padTo>0&&(m.minimumIntegerDigits=n.padTo),this.inf=PK(e,m)}}format(e){if(this.inf){const i=this.floor?Math.floor(e):e;return this.inf.format(i)}else{const i=this.floor?Math.floor(e):PS(e,3);return Qi(i,this.padTo)}}}class HK{constructor(e,i,n){this.opts=n,this.originalZone=void 0;let s;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const f=-1*(e.offset/60),m=f>=0?`Etc/GMT+${f}`:`Etc/GMT${f}`;e.offset!==0&&ia.create(m).valid?(s=m,this.dt=e):(s="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,s=e.zone.name):(s="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const h={...this.opts};h.timeZone=h.timeZone||s,this.dtf=Sx(i,h)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(i=>{if(i.type==="timeZoneName"){const n=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...i,value:n}}else return i}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class BK{constructor(e,i,n){this.opts={style:"long",...n},!i&&cR()&&(this.rtf=RK(e,n))}format(e,i){return this.rtf?this.rtf.format(e,i):hY(i,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,i){return this.rtf?this.rtf.formatToParts(e,i):[]}}const UK={firstDay:1,minimalDays:4,weekend:[6,7]};class Jt{static fromOpts(e){return Jt.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,i,n,s,h=!1){const f=e||Bi.defaultLocale,m=f||(h?"en-US":LK()),v=i||Bi.defaultNumberingSystem,x=n||Bi.defaultOutputCalendar,M=Ex(s)||Bi.defaultWeekSettings;return new Jt(m,v,x,M,f)}static resetCache(){m1=null,xx={},Tx={},Mx={}}static fromObject({locale:e,numberingSystem:i,outputCalendar:n,weekSettings:s}={}){return Jt.create(e,i,n,s)}constructor(e,i,n,s,h){const[f,m,v]=DK(e);this.locale=f,this.numberingSystem=i||m||null,this.outputCalendar=n||v||null,this.weekSettings=s,this.intl=zK(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=h,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=GK(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),i=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&i?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:Jt.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,Ex(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,i=!1){return dy(this,e,fR,()=>{const n=i?{month:e,day:"numeric"}:{month:e},s=i?"format":"standalone";return this.monthsCache[s][e]||(this.monthsCache[s][e]=FK(h=>this.extract(h,n,"month"))),this.monthsCache[s][e]})}weekdays(e,i=!1){return dy(this,e,yR,()=>{const n=i?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},s=i?"format":"standalone";return this.weekdaysCache[s][e]||(this.weekdaysCache[s][e]=jK(h=>this.extract(h,n,"weekday"))),this.weekdaysCache[s][e]})}meridiems(){return dy(this,void 0,()=>vR,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[et.utc(2016,11,13,9),et.utc(2016,11,13,19)].map(i=>this.extract(i,e,"dayperiod"))}return this.meridiemCache})}eras(e){return dy(this,e,bR,()=>{const i={era:e};return this.eraCache[e]||(this.eraCache[e]=[et.utc(-40,1,1),et.utc(2017,1,1)].map(n=>this.extract(n,i,"era"))),this.eraCache[e]})}extract(e,i,n){const s=this.dtFormatter(e,i),h=s.formatToParts(),f=h.find(m=>m.type.toLowerCase()===n);return f?f.value:null}numberFormatter(e={}){return new VK(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,i={}){return new HK(e,this.intl,i)}relFormatter(e={}){return new BK(this.intl,this.isEnglish(),e)}listFormatter(e={}){return OK(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:hR()?NK(this.locale):UK}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}}let c_=null;class Xn extends Cm{static get utcInstance(){return c_===null&&(c_=new Xn(0)),c_}static instance(e){return e===0?Xn.utcInstance:new Xn(e)}static parseSpecifier(e){if(e){const i=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(i)return new Xn(Ow(i[1],i[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${gg(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${gg(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,i){return gg(this.fixed,i)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class qK extends Cm{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Ih(t,e){if(st(t)||t===null)return e;if(t instanceof Cm)return t;if(JK(t)){const i=t.toLowerCase();return i==="default"?e:i==="local"||i==="system"?Cw.instance:i==="utc"||i==="gmt"?Xn.utcInstance:Xn.parseSpecifier(i)||ia.create(t)}else return $d(t)?Xn.instance(t):typeof t=="object"&&"offset"in t&&typeof t.offset=="function"?t:new qK(t)}let m8=()=>Date.now(),y8="system",v8=null,b8=null,w8=null,_8=60,x8,S8=null;class Bi{static get now(){return m8}static set now(e){m8=e}static set defaultZone(e){y8=e}static get defaultZone(){return Ih(y8,Cw.instance)}static get defaultLocale(){return v8}static set defaultLocale(e){v8=e}static get defaultNumberingSystem(){return b8}static set defaultNumberingSystem(e){b8=e}static get defaultOutputCalendar(){return w8}static set defaultOutputCalendar(e){w8=e}static get defaultWeekSettings(){return S8}static set defaultWeekSettings(e){S8=Ex(e)}static get twoDigitCutoffYear(){return _8}static set twoDigitCutoffYear(e){_8=e%100}static get throwOnInvalid(){return x8}static set throwOnInvalid(e){x8=e}static resetCaches(){Jt.resetCache(),ia.resetCache()}}class Uo{constructor(e,i){this.reason=e,this.explanation=i}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const nR=[0,31,59,90,120,151,181,212,243,273,304,334],rR=[0,31,60,91,121,152,182,213,244,274,305,335];function Xs(t,e){return new Uo("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function IS(t,e,i){const n=new Date(Date.UTC(t,e-1,i));t<100&&t>=0&&n.setUTCFullYear(n.getUTCFullYear()-1900);const s=n.getUTCDay();return s===0?7:s}function sR(t,e,i){return i+(Im(t)?rR:nR)[e-1]}function oR(t,e){const i=Im(t)?rR:nR,n=i.findIndex(h=>h<e),s=e-i[n];return{month:n+1,day:s}}function AS(t,e){return(t-e+7)%7+1}function a2(t,e=4,i=1){const{year:n,month:s,day:h}=t,f=sR(n,s,h),m=AS(IS(n,s,h),i);let v=Math.floor((f-m+14-e)/7),x;return v<1?(x=n-1,v=Jg(x,e,i)):v>Jg(n,e,i)?(x=n+1,v=1):x=n,{weekYear:x,weekNumber:v,weekday:m,...Pw(t)}}function T8(t,e=4,i=1){const{weekYear:n,weekNumber:s,weekday:h}=t,f=AS(IS(n,1,e),i),m=Mf(n);let v=s*7+h-f-7+e,x;v<1?(x=n-1,v+=Mf(x)):v>m?(x=n+1,v-=Mf(n)):x=n;const{month:M,day:$}=oR(x,v);return{year:x,month:M,day:$,...Pw(t)}}function h_(t){const{year:e,month:i,day:n}=t,s=sR(e,i,n);return{year:e,ordinal:s,...Pw(t)}}function M8(t){const{year:e,ordinal:i}=t,{month:n,day:s}=oR(e,i);return{year:e,month:n,day:s,...Pw(t)}}function E8(t,e){if(!st(t.localWeekday)||!st(t.localWeekNumber)||!st(t.localWeekYear)){if(!st(t.weekday)||!st(t.weekNumber)||!st(t.weekYear))throw new pf("Cannot mix locale-based week fields with ISO-based week fields");return st(t.localWeekday)||(t.weekday=t.localWeekday),st(t.localWeekNumber)||(t.weekNumber=t.localWeekNumber),st(t.localWeekYear)||(t.weekYear=t.localWeekYear),delete t.localWeekday,delete t.localWeekNumber,delete t.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function WK(t,e=4,i=1){const n=Iw(t.weekYear),s=Qs(t.weekNumber,1,Jg(t.weekYear,e,i)),h=Qs(t.weekday,1,7);return n?s?h?!1:Xs("weekday",t.weekday):Xs("week",t.weekNumber):Xs("weekYear",t.weekYear)}function ZK(t){const e=Iw(t.year),i=Qs(t.ordinal,1,Mf(t.year));return e?i?!1:Xs("ordinal",t.ordinal):Xs("year",t.year)}function aR(t){const e=Iw(t.year),i=Qs(t.month,1,12),n=Qs(t.day,1,l2(t.year,t.month));return e?i?n?!1:Xs("day",t.day):Xs("month",t.month):Xs("year",t.year)}function lR(t){const{hour:e,minute:i,second:n,millisecond:s}=t,h=Qs(e,0,23)||e===24&&i===0&&n===0&&s===0,f=Qs(i,0,59),m=Qs(n,0,59),v=Qs(s,0,999);return h?f?m?v?!1:Xs("millisecond",s):Xs("second",n):Xs("minute",i):Xs("hour",e)}function st(t){return typeof t>"u"}function $d(t){return typeof t=="number"}function Iw(t){return typeof t=="number"&&t%1===0}function JK(t){return typeof t=="string"}function KK(t){return Object.prototype.toString.call(t)==="[object Date]"}function cR(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function hR(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function YK(t){return Array.isArray(t)?t:[t]}function k8(t,e,i){if(t.length!==0)return t.reduce((n,s)=>{const h=[e(s),s];return n&&i(n[0],h[0])===n[0]?n:h},null)[1]}function XK(t,e){return e.reduce((i,n)=>(i[n]=t[n],i),{})}function Uf(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Ex(t){if(t==null)return null;if(typeof t!="object")throw new Vr("Week settings must be an object");if(!Qs(t.firstDay,1,7)||!Qs(t.minimalDays,1,7)||!Array.isArray(t.weekend)||t.weekend.some(e=>!Qs(e,1,7)))throw new Vr("Invalid week settings");return{firstDay:t.firstDay,minimalDays:t.minimalDays,weekend:Array.from(t.weekend)}}function Qs(t,e,i){return Iw(t)&&t>=e&&t<=i}function QK(t,e){return t-e*Math.floor(t/e)}function Qi(t,e=2){const i=t<0;let n;return i?n="-"+(""+-t).padStart(e,"0"):n=(""+t).padStart(e,"0"),n}function Th(t){if(!(st(t)||t===null||t===""))return parseInt(t,10)}function mu(t){if(!(st(t)||t===null||t===""))return parseFloat(t)}function OS(t){if(!(st(t)||t===null||t==="")){const e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function PS(t,e,i=!1){const n=10**e;return(i?Math.trunc:Math.round)(t*n)/n}function Im(t){return t%4===0&&(t%100!==0||t%400===0)}function Mf(t){return Im(t)?366:365}function l2(t,e){const i=QK(e-1,12)+1,n=t+(e-i)/12;return i===2?Im(n)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function Aw(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function $8(t,e,i){return-AS(IS(t,1,e),i)+e-1}function Jg(t,e=4,i=1){const n=$8(t,e,i),s=$8(t+1,e,i);return(Mf(t)-n+s)/7}function kx(t){return t>99?t:t>Bi.twoDigitCutoffYear?1900+t:2e3+t}function uR(t,e,i,n=null){const s=new Date(t),h={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};n&&(h.timeZone=n);const f={timeZoneName:e,...h},m=new Intl.DateTimeFormat(i,f).formatToParts(s).find(v=>v.type.toLowerCase()==="timezonename");return m?m.value:null}function Ow(t,e){let i=parseInt(t,10);Number.isNaN(i)&&(i=0);const n=parseInt(e,10)||0,s=i<0||Object.is(i,-0)?-n:n;return i*60+s}function dR(t){const e=Number(t);if(typeof t=="boolean"||t===""||Number.isNaN(e))throw new Vr(`Invalid unit value ${t}`);return e}function c2(t,e){const i={};for(const n in t)if(Uf(t,n)){const s=t[n];if(s==null)continue;i[e(n)]=dR(s)}return i}function gg(t,e){const i=Math.trunc(Math.abs(t/60)),n=Math.trunc(Math.abs(t%60)),s=t>=0?"+":"-";switch(e){case"short":return`${s}${Qi(i,2)}:${Qi(n,2)}`;case"narrow":return`${s}${i}${n>0?`:${n}`:""}`;case"techie":return`${s}${Qi(i,2)}${Qi(n,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function Pw(t){return XK(t,["hour","minute","second","millisecond"])}const eY=["January","February","March","April","May","June","July","August","September","October","November","December"],pR=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],tY=["J","F","M","A","M","J","J","A","S","O","N","D"];function fR(t){switch(t){case"narrow":return[...tY];case"short":return[...pR];case"long":return[...eY];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const gR=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],mR=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],iY=["M","T","W","T","F","S","S"];function yR(t){switch(t){case"narrow":return[...iY];case"short":return[...mR];case"long":return[...gR];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const vR=["AM","PM"],nY=["Before Christ","Anno Domini"],rY=["BC","AD"],sY=["B","A"];function bR(t){switch(t){case"narrow":return[...sY];case"short":return[...rY];case"long":return[...nY];default:return null}}function oY(t){return vR[t.hour<12?0:1]}function aY(t,e){return yR(e)[t.weekday-1]}function lY(t,e){return fR(e)[t.month-1]}function cY(t,e){return bR(e)[t.year<0?0:1]}function hY(t,e,i="always",n=!1){const s={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},h=["hours","minutes","seconds"].indexOf(t)===-1;if(i==="auto"&&h){const $=t==="days";switch(e){case 1:return $?"tomorrow":`next ${s[t][0]}`;case-1:return $?"yesterday":`last ${s[t][0]}`;case 0:return $?"today":`this ${s[t][0]}`}}const f=Object.is(e,-0)||e<0,m=Math.abs(e),v=m===1,x=s[t],M=n?v?x[1]:x[2]||x[1]:v?s[t][0]:t;return f?`${m} ${M} ago`:`in ${m} ${M}`}function C8(t,e){let i="";for(const n of t)n.literal?i+=n.val:i+=e(n.val);return i}const uY={D:o2,DD:zP,DDD:FP,DDDD:jP,t:GP,tt:VP,ttt:HP,tttt:BP,T:UP,TT:qP,TTT:WP,TTTT:ZP,f:JP,ff:YP,fff:QP,ffff:tR,F:KP,FF:XP,FFF:eR,FFFF:iR};class Kn{static create(e,i={}){return new Kn(e,i)}static parseFormat(e){let i=null,n="",s=!1;const h=[];for(let f=0;f<e.length;f++){const m=e.charAt(f);m==="'"?(n.length>0&&h.push({literal:s||/^\s+$/.test(n),val:n}),i=null,n="",s=!s):s||m===i?n+=m:(n.length>0&&h.push({literal:/^\s+$/.test(n),val:n}),n=m,i=m)}return n.length>0&&h.push({literal:s||/^\s+$/.test(n),val:n}),h}static macroTokenToFormatOpts(e){return uY[e]}constructor(e,i){this.opts=i,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,i){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...i}).format()}dtFormatter(e,i={}){return this.loc.dtFormatter(e,{...this.opts,...i})}formatDateTime(e,i){return this.dtFormatter(e,i).format()}formatDateTimeParts(e,i){return this.dtFormatter(e,i).formatToParts()}formatInterval(e,i){return this.dtFormatter(e.start,i).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,i){return this.dtFormatter(e,i).resolvedOptions()}num(e,i=0){if(this.opts.forceSimple)return Qi(e,i);const n={...this.opts};return i>0&&(n.padTo=i),this.loc.numberFormatter(n).format(e)}formatDateTimeFromString(e,i){const n=this.loc.listingMode()==="en",s=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",h=(P,L)=>this.loc.extract(e,P,L),f=P=>e.isOffsetFixed&&e.offset===0&&P.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,P.format):"",m=()=>n?oY(e):h({hour:"numeric",hourCycle:"h12"},"dayperiod"),v=(P,L)=>n?lY(e,P):h(L?{month:P}:{month:P,day:"numeric"},"month"),x=(P,L)=>n?aY(e,P):h(L?{weekday:P}:{weekday:P,month:"long",day:"numeric"},"weekday"),M=P=>{const L=Kn.macroTokenToFormatOpts(P);return L?this.formatWithSystemDefault(e,L):P},$=P=>n?cY(e,P):h({era:P},"era"),I=P=>{switch(P){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return f({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return f({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return f({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return m();case"d":return s?h({day:"numeric"},"day"):this.num(e.day);case"dd":return s?h({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return x("short",!0);case"cccc":return x("long",!0);case"ccccc":return x("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return x("short",!1);case"EEEE":return x("long",!1);case"EEEEE":return x("narrow",!1);case"L":return s?h({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return s?h({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return v("short",!0);case"LLLL":return v("long",!0);case"LLLLL":return v("narrow",!0);case"M":return s?h({month:"numeric"},"month"):this.num(e.month);case"MM":return s?h({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return v("short",!1);case"MMMM":return v("long",!1);case"MMMMM":return v("narrow",!1);case"y":return s?h({year:"numeric"},"year"):this.num(e.year);case"yy":return s?h({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return s?h({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return s?h({year:"numeric"},"year"):this.num(e.year,6);case"G":return $("short");case"GG":return $("long");case"GGGGG":return $("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return M(P)}};return C8(Kn.parseFormat(i),I)}formatDurationFromString(e,i){const n=v=>{switch(v[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},s=v=>x=>{const M=n(x);return M?this.num(v.get(M),x.length):x},h=Kn.parseFormat(i),f=h.reduce((v,{literal:x,val:M})=>x?v:v.concat(M),[]),m=e.shiftTo(...f.map(n).filter(v=>v));return C8(h,s(m))}}const wR=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function b0(...t){const e=t.reduce((i,n)=>i+n.source,"");return RegExp(`^${e}$`)}function w0(...t){return e=>t.reduce(([i,n,s],h)=>{const[f,m,v]=h(e,s);return[{...i,...f},m||n,v]},[{},null,1]).slice(0,2)}function _0(t,...e){if(t==null)return[null,null];for(const[i,n]of e){const s=i.exec(t);if(s)return n(s)}return[null,null]}function _R(...t){return(e,i)=>{const n={};let s;for(s=0;s<t.length;s++)n[t[s]]=Th(e[i+s]);return[n,null,i+s]}}const xR=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,dY=`(?:${xR.source}?(?:\\[(${wR.source})\\])?)?`,RS=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,SR=RegExp(`${RS.source}${dY}`),LS=RegExp(`(?:T${SR.source})?`),pY=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,fY=/(\d{4})-?W(\d\d)(?:-?(\d))?/,gY=/(\d{4})-?(\d{3})/,mY=_R("weekYear","weekNumber","weekDay"),yY=_R("year","ordinal"),vY=/(\d{4})-(\d\d)-(\d\d)/,TR=RegExp(`${RS.source} ?(?:${xR.source}|(${wR.source}))?`),bY=RegExp(`(?: ${TR.source})?`);function Ef(t,e,i){const n=t[e];return st(n)?i:Th(n)}function wY(t,e){return[{year:Ef(t,e),month:Ef(t,e+1,1),day:Ef(t,e+2,1)},null,e+3]}function x0(t,e){return[{hours:Ef(t,e,0),minutes:Ef(t,e+1,0),seconds:Ef(t,e+2,0),milliseconds:OS(t[e+3])},null,e+4]}function Am(t,e){const i=!t[e]&&!t[e+1],n=Ow(t[e+1],t[e+2]),s=i?null:Xn.instance(n);return[{},s,e+3]}function Om(t,e){const i=t[e]?ia.create(t[e]):null;return[{},i,e+1]}const _Y=RegExp(`^T?${RS.source}$`),xY=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function SY(t){const[e,i,n,s,h,f,m,v,x]=t,M=e[0]==="-",$=v&&v[0]==="-",I=(P,L=!1)=>P!==void 0&&(L||P&&M)?-P:P;return[{years:I(mu(i)),months:I(mu(n)),weeks:I(mu(s)),days:I(mu(h)),hours:I(mu(f)),minutes:I(mu(m)),seconds:I(mu(v),v==="-0"),milliseconds:I(OS(x),$)}]}const TY={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function NS(t,e,i,n,s,h,f){const m={year:e.length===2?kx(Th(e)):Th(e),month:pR.indexOf(i)+1,day:Th(n),hour:Th(s),minute:Th(h)};return f&&(m.second=Th(f)),t&&(m.weekday=t.length>3?gR.indexOf(t)+1:mR.indexOf(t)+1),m}const MY=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function EY(t){const[,e,i,n,s,h,f,m,v,x,M,$]=t,I=NS(e,s,n,i,h,f,m);let P;return v?P=TY[v]:x?P=0:P=Ow(M,$),[I,new Xn(P)]}function kY(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const $Y=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,CY=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,IY=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function I8(t){const[,e,i,n,s,h,f,m]=t;return[NS(e,s,n,i,h,f,m),Xn.utcInstance]}function AY(t){const[,e,i,n,s,h,f,m]=t;return[NS(e,m,i,n,s,h,f),Xn.utcInstance]}const OY=b0(pY,LS),PY=b0(fY,LS),RY=b0(gY,LS),LY=b0(SR),MR=w0(wY,x0,Am,Om),NY=w0(mY,x0,Am,Om),DY=w0(yY,x0,Am,Om),zY=w0(x0,Am,Om);function FY(t){return _0(t,[OY,MR],[PY,NY],[RY,DY],[LY,zY])}function jY(t){return _0(kY(t),[MY,EY])}function GY(t){return _0(t,[$Y,I8],[CY,I8],[IY,AY])}function VY(t){return _0(t,[xY,SY])}const HY=w0(x0);function BY(t){return _0(t,[_Y,HY])}const UY=b0(vY,bY),qY=b0(TR),WY=w0(x0,Am,Om);function ZY(t){return _0(t,[UY,MR],[qY,WY])}const A8="Invalid Duration",ER={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},JY={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...ER},Ps=146097/400,vp=146097/4800,KY={years:{quarters:4,months:12,weeks:Ps/7,days:Ps,hours:Ps*24,minutes:Ps*24*60,seconds:Ps*24*60*60,milliseconds:Ps*24*60*60*1e3},quarters:{months:3,weeks:Ps/28,days:Ps/4,hours:Ps*24/4,minutes:Ps*24*60/4,seconds:Ps*24*60*60/4,milliseconds:Ps*24*60*60*1e3/4},months:{weeks:vp/7,days:vp,hours:vp*24,minutes:vp*24*60,seconds:vp*24*60*60,milliseconds:vp*24*60*60*1e3},...ER},bd=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],YY=bd.slice(0).reverse();function Gc(t,e,i=!1){const n={values:i?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new $t(n)}function kR(t,e){let i=e.milliseconds??0;for(const n of YY.slice(1))e[n]&&(i+=e[n]*t[n].milliseconds);return i}function O8(t,e){const i=kR(t,e)<0?-1:1;bd.reduceRight((n,s)=>{if(st(e[s]))return n;if(n){const h=e[n]*i,f=t[s][n],m=Math.floor(h/f);e[s]+=m*i,e[n]-=m*f*i}return s},null),bd.reduce((n,s)=>{if(st(e[s]))return n;if(n){const h=e[n]%1;e[n]-=h,e[s]+=h*t[n][s]}return s},null)}function XY(t){const e={};for(const[i,n]of Object.entries(t))n!==0&&(e[i]=n);return e}class $t{constructor(e){const i=e.conversionAccuracy==="longterm"||!1;let n=i?KY:JY;e.matrix&&(n=e.matrix),this.values=e.values,this.loc=e.loc||Jt.create(),this.conversionAccuracy=i?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=n,this.isLuxonDuration=!0}static fromMillis(e,i){return $t.fromObject({milliseconds:e},i)}static fromObject(e,i={}){if(e==null||typeof e!="object")throw new Vr(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new $t({values:c2(e,$t.normalizeUnit),loc:Jt.fromObject(i),conversionAccuracy:i.conversionAccuracy,matrix:i.matrix})}static fromDurationLike(e){if($d(e))return $t.fromMillis(e);if($t.isDuration(e))return e;if(typeof e=="object")return $t.fromObject(e);throw new Vr(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,i){const[n]=VY(e);return n?$t.fromObject(n,i):$t.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,i){const[n]=BY(e);return n?$t.fromObject(n,i):$t.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,i=null){if(!e)throw new Vr("need to specify a reason the Duration is invalid");const n=e instanceof Uo?e:new Uo(e,i);if(Bi.throwOnInvalid)throw new MK(n);return new $t({invalid:n})}static normalizeUnit(e){const i={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!i)throw new DP(e);return i}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,i={}){const n={...i,floor:i.round!==!1&&i.floor!==!1};return this.isValid?Kn.create(this.loc,n).formatDurationFromString(this,e):A8}toHuman(e={}){if(!this.isValid)return A8;const i=bd.map(n=>{const s=this.values[n];return st(s)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:n.slice(0,-1)}).format(s)}).filter(n=>n);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(i)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=PS(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const i=this.toMillis();return i<0||i>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},et.fromMillis(i,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?kR(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const i=$t.fromDurationLike(e),n={};for(const s of bd)(Uf(i.values,s)||Uf(this.values,s))&&(n[s]=i.get(s)+this.get(s));return Gc(this,{values:n},!0)}minus(e){if(!this.isValid)return this;const i=$t.fromDurationLike(e);return this.plus(i.negate())}mapUnits(e){if(!this.isValid)return this;const i={};for(const n of Object.keys(this.values))i[n]=dR(e(this.values[n],n));return Gc(this,{values:i},!0)}get(e){return this[$t.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const i={...this.values,...c2(e,$t.normalizeUnit)};return Gc(this,{values:i})}reconfigure({locale:e,numberingSystem:i,conversionAccuracy:n,matrix:s}={}){const f={loc:this.loc.clone({locale:e,numberingSystem:i}),matrix:s,conversionAccuracy:n};return Gc(this,f)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return O8(this.matrix,e),Gc(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=XY(this.normalize().shiftToAll().toObject());return Gc(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(f=>$t.normalizeUnit(f));const i={},n={},s=this.toObject();let h;for(const f of bd)if(e.indexOf(f)>=0){h=f;let m=0;for(const x in n)m+=this.matrix[x][f]*n[x],n[x]=0;$d(s[f])&&(m+=s[f]);const v=Math.trunc(m);i[f]=v,n[f]=(m*1e3-v*1e3)/1e3}else $d(s[f])&&(n[f]=s[f]);for(const f in n)n[f]!==0&&(i[h]+=f===h?n[f]:n[f]/this.matrix[h][f]);return O8(this.matrix,i),Gc(this,{values:i},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const i of Object.keys(this.values))e[i]=this.values[i]===0?0:-this.values[i];return Gc(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function i(n,s){return n===void 0||n===0?s===void 0||s===0:n===s}for(const n of bd)if(!i(this.values[n],e.values[n]))return!1;return!0}}const bp="Invalid Interval";function QY(t,e){return!t||!t.isValid?Ni.invalid("missing or invalid start"):!e||!e.isValid?Ni.invalid("missing or invalid end"):e<t?Ni.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}class Ni{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,i=null){if(!e)throw new Vr("need to specify a reason the Interval is invalid");const n=e instanceof Uo?e:new Uo(e,i);if(Bi.throwOnInvalid)throw new TK(n);return new Ni({invalid:n})}static fromDateTimes(e,i){const n=H0(e),s=H0(i),h=QY(n,s);return h??new Ni({start:n,end:s})}static after(e,i){const n=$t.fromDurationLike(i),s=H0(e);return Ni.fromDateTimes(s,s.plus(n))}static before(e,i){const n=$t.fromDurationLike(i),s=H0(e);return Ni.fromDateTimes(s.minus(n),s)}static fromISO(e,i){const[n,s]=(e||"").split("/",2);if(n&&s){let h,f;try{h=et.fromISO(n,i),f=h.isValid}catch{f=!1}let m,v;try{m=et.fromISO(s,i),v=m.isValid}catch{v=!1}if(f&&v)return Ni.fromDateTimes(h,m);if(f){const x=$t.fromISO(s,i);if(x.isValid)return Ni.after(h,x)}else if(v){const x=$t.fromISO(n,i);if(x.isValid)return Ni.before(m,x)}}return Ni.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",i){if(!this.isValid)return NaN;const n=this.start.startOf(e,i);let s;return i!=null&&i.useLocaleWeeks?s=this.end.reconfigure({locale:n.locale}):s=this.end,s=s.startOf(e,i),Math.floor(s.diff(n,e).get(e))+(s.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:i}={}){return this.isValid?Ni.fromDateTimes(e||this.s,i||this.e):this}splitAt(...e){if(!this.isValid)return[];const i=e.map(H0).filter(f=>this.contains(f)).sort((f,m)=>f.toMillis()-m.toMillis()),n=[];let{s}=this,h=0;for(;s<this.e;){const f=i[h]||this.e,m=+f>+this.e?this.e:f;n.push(Ni.fromDateTimes(s,m)),s=m,h+=1}return n}splitBy(e){const i=$t.fromDurationLike(e);if(!this.isValid||!i.isValid||i.as("milliseconds")===0)return[];let{s:n}=this,s=1,h;const f=[];for(;n<this.e;){const m=this.start.plus(i.mapUnits(v=>v*s));h=+m>+this.e?this.e:m,f.push(Ni.fromDateTimes(n,h)),n=h,s+=1}return f}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const i=this.s>e.s?this.s:e.s,n=this.e<e.e?this.e:e.e;return i>=n?null:Ni.fromDateTimes(i,n)}union(e){if(!this.isValid)return this;const i=this.s<e.s?this.s:e.s,n=this.e>e.e?this.e:e.e;return Ni.fromDateTimes(i,n)}static merge(e){const[i,n]=e.sort((s,h)=>s.s-h.s).reduce(([s,h],f)=>h?h.overlaps(f)||h.abutsStart(f)?[s,h.union(f)]:[s.concat([h]),f]:[s,f],[[],null]);return n&&i.push(n),i}static xor(e){let i=null,n=0;const s=[],h=e.map(v=>[{time:v.s,type:"s"},{time:v.e,type:"e"}]),f=Array.prototype.concat(...h),m=f.sort((v,x)=>v.time-x.time);for(const v of m)n+=v.type==="s"?1:-1,n===1?i=v.time:(i&&+i!=+v.time&&s.push(Ni.fromDateTimes(i,v.time)),i=null);return Ni.merge(s)}difference(...e){return Ni.xor([this].concat(e)).map(i=>this.intersection(i)).filter(i=>i&&!i.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} â€“ ${this.e.toISO()})`:bp}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=o2,i={}){return this.isValid?Kn.create(this.s.loc.clone(i),e).formatInterval(this):bp}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:bp}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:bp}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:bp}toFormat(e,{separator:i=" â€“ "}={}){return this.isValid?`${this.s.toFormat(e)}${i}${this.e.toFormat(e)}`:bp}toDuration(e,i){return this.isValid?this.e.diff(this.s,e,i):$t.invalid(this.invalidReason)}mapEndpoints(e){return Ni.fromDateTimes(e(this.s),e(this.e))}}class py{static hasDST(e=Bi.defaultZone){const i=et.now().setZone(e).set({month:12});return!e.isUniversal&&i.offset!==i.set({month:6}).offset}static isValidIANAZone(e){return ia.isValidZone(e)}static normalizeZone(e){return Ih(e,Bi.defaultZone)}static getStartOfWeek({locale:e=null,locObj:i=null}={}){return(i||Jt.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:i=null}={}){return(i||Jt.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:i=null}={}){return(i||Jt.create(e)).getWeekendDays().slice()}static months(e="long",{locale:i=null,numberingSystem:n=null,locObj:s=null,outputCalendar:h="gregory"}={}){return(s||Jt.create(i,n,h)).months(e)}static monthsFormat(e="long",{locale:i=null,numberingSystem:n=null,locObj:s=null,outputCalendar:h="gregory"}={}){return(s||Jt.create(i,n,h)).months(e,!0)}static weekdays(e="long",{locale:i=null,numberingSystem:n=null,locObj:s=null}={}){return(s||Jt.create(i,n,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:i=null,numberingSystem:n=null,locObj:s=null}={}){return(s||Jt.create(i,n,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return Jt.create(e).meridiems()}static eras(e="short",{locale:i=null}={}){return Jt.create(i,null,"gregory").eras(e)}static features(){return{relative:cR(),localeWeek:hR()}}}function P8(t,e){const i=s=>s.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),n=i(e)-i(t);return Math.floor($t.fromMillis(n).as("days"))}function eX(t,e,i){const n=[["years",(v,x)=>x.year-v.year],["quarters",(v,x)=>x.quarter-v.quarter+(x.year-v.year)*4],["months",(v,x)=>x.month-v.month+(x.year-v.year)*12],["weeks",(v,x)=>{const M=P8(v,x);return(M-M%7)/7}],["days",P8]],s={},h=t;let f,m;for(const[v,x]of n)i.indexOf(v)>=0&&(f=v,s[v]=x(t,e),m=h.plus(s),m>e?(s[v]--,t=h.plus(s),t>e&&(m=t,s[v]--,t=h.plus(s))):t=m);return[t,s,m,f]}function tX(t,e,i,n){let[s,h,f,m]=eX(t,e,i);const v=e-s,x=i.filter($=>["hours","minutes","seconds","milliseconds"].indexOf($)>=0);x.length===0&&(f<e&&(f=s.plus({[m]:1})),f!==s&&(h[m]=(h[m]||0)+v/(f-s)));const M=$t.fromObject(h,n);return x.length>0?$t.fromMillis(v,n).shiftTo(...x).plus(M):M}const DS={arab:"[Ù -Ù©]",arabext:"[Û°-Û¹]",bali:"[á­-á­™]",beng:"[à§¦-à§¯]",deva:"[à¥¦-à¥¯]",fullwide:"[ï¼-ï¼™]",gujr:"[à«¦-à«¯]",hanidec:"[ã€‡|ä¸€|äºŒ|ä¸‰|å››|äº”|å…­|ä¸ƒ|å…«|ä¹]",khmr:"[áŸ -áŸ©]",knda:"[à³¦-à³¯]",laoo:"[à»-à»™]",limb:"[á¥†-á¥]",mlym:"[àµ¦-àµ¯]",mong:"[á -á ™]",mymr:"[á€-á‰]",orya:"[à­¦-à­¯]",tamldec:"[à¯¦-à¯¯]",telu:"[à±¦-à±¯]",thai:"[à¹-à¹™]",tibt:"[à¼ -à¼©]",latn:"\\d"},R8={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},iX=DS.hanidec.replace(/[\[|\]]/g,"").split("");function nX(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let i=0;i<t.length;i++){const n=t.charCodeAt(i);if(t[i].search(DS.hanidec)!==-1)e+=iX.indexOf(t[i]);else for(const s in R8){const[h,f]=R8[s];n>=h&&n<=f&&(e+=n-h)}}return parseInt(e,10)}else return e}function To({numberingSystem:t},e=""){return new RegExp(`${DS[t||"latn"]}${e}`)}const rX="missing Intl.DateTimeFormat.formatToParts support";function Nt(t,e=i=>i){return{regex:t,deser:([i])=>e(nX(i))}}const sX="Â ",$R=`[ ${sX}]`,CR=new RegExp($R,"g");function oX(t){return t.replace(/\./g,"\\.?").replace(CR,$R)}function L8(t){return t.replace(/\./g,"").replace(CR," ").toLowerCase()}function Mo(t,e){return t===null?null:{regex:RegExp(t.map(oX).join("|")),deser:([i])=>t.findIndex(n=>L8(i)===L8(n))+e}}function N8(t,e){return{regex:t,deser:([,i,n])=>Ow(i,n),groups:e}}function fy(t){return{regex:t,deser:([e])=>e}}function aX(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function lX(t,e){const i=To(e),n=To(e,"{2}"),s=To(e,"{3}"),h=To(e,"{4}"),f=To(e,"{6}"),m=To(e,"{1,2}"),v=To(e,"{1,3}"),x=To(e,"{1,6}"),M=To(e,"{1,9}"),$=To(e,"{2,4}"),I=To(e,"{4,6}"),P=F=>({regex:RegExp(aX(F.val)),deser:([U])=>U,literal:!0}),z=(F=>{if(t.literal)return P(F);switch(F.val){case"G":return Mo(e.eras("short"),0);case"GG":return Mo(e.eras("long"),0);case"y":return Nt(x);case"yy":return Nt($,kx);case"yyyy":return Nt(h);case"yyyyy":return Nt(I);case"yyyyyy":return Nt(f);case"M":return Nt(m);case"MM":return Nt(n);case"MMM":return Mo(e.months("short",!0),1);case"MMMM":return Mo(e.months("long",!0),1);case"L":return Nt(m);case"LL":return Nt(n);case"LLL":return Mo(e.months("short",!1),1);case"LLLL":return Mo(e.months("long",!1),1);case"d":return Nt(m);case"dd":return Nt(n);case"o":return Nt(v);case"ooo":return Nt(s);case"HH":return Nt(n);case"H":return Nt(m);case"hh":return Nt(n);case"h":return Nt(m);case"mm":return Nt(n);case"m":return Nt(m);case"q":return Nt(m);case"qq":return Nt(n);case"s":return Nt(m);case"ss":return Nt(n);case"S":return Nt(v);case"SSS":return Nt(s);case"u":return fy(M);case"uu":return fy(m);case"uuu":return Nt(i);case"a":return Mo(e.meridiems(),0);case"kkkk":return Nt(h);case"kk":return Nt($,kx);case"W":return Nt(m);case"WW":return Nt(n);case"E":case"c":return Nt(i);case"EEE":return Mo(e.weekdays("short",!1),1);case"EEEE":return Mo(e.weekdays("long",!1),1);case"ccc":return Mo(e.weekdays("short",!0),1);case"cccc":return Mo(e.weekdays("long",!0),1);case"Z":case"ZZ":return N8(new RegExp(`([+-]${m.source})(?::(${n.source}))?`),2);case"ZZZ":return N8(new RegExp(`([+-]${m.source})(${n.source})?`),2);case"z":return fy(/[a-z_+-/]{1,256}?/i);case" ":return fy(/[^\S\n\r]/);default:return P(F)}})(t)||{invalidReason:rX};return z.token=t,z}const cX={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function hX(t,e,i){const{type:n,value:s}=t;if(n==="literal"){const v=/^\s+$/.test(s);return{literal:!v,val:v?" ":s}}const h=e[n];let f=n;n==="hour"&&(e.hour12!=null?f=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?f="hour12":f="hour24":f=i.hour12?"hour12":"hour24");let m=cX[f];if(typeof m=="object"&&(m=m[h]),m)return{literal:!1,val:m}}function uX(t){return[`^${t.map(i=>i.regex).reduce((i,n)=>`${i}(${n.source})`,"")}$`,t]}function dX(t,e,i){const n=t.match(e);if(n){const s={};let h=1;for(const f in i)if(Uf(i,f)){const m=i[f],v=m.groups?m.groups+1:1;!m.literal&&m.token&&(s[m.token.val[0]]=m.deser(n.slice(h,h+v))),h+=v}return[n,s]}else return[n,{}]}function pX(t){const e=h=>{switch(h){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let i=null,n;return st(t.z)||(i=ia.create(t.z)),st(t.Z)||(i||(i=new Xn(t.Z)),n=t.Z),st(t.q)||(t.M=(t.q-1)*3+1),st(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),st(t.u)||(t.S=OS(t.u)),[Object.keys(t).reduce((h,f)=>{const m=e(f);return m&&(h[m]=t[f]),h},{}),i,n]}let u_=null;function fX(){return u_||(u_=et.fromMillis(1555555555555)),u_}function gX(t,e){if(t.literal)return t;const i=Kn.macroTokenToFormatOpts(t.val),n=OR(i,e);return n==null||n.includes(void 0)?t:n}function IR(t,e){return Array.prototype.concat(...t.map(i=>gX(i,e)))}function AR(t,e,i){const n=IR(Kn.parseFormat(i),t),s=n.map(f=>lX(f,t)),h=s.find(f=>f.invalidReason);if(h)return{input:e,tokens:n,invalidReason:h.invalidReason};{const[f,m]=uX(s),v=RegExp(f,"i"),[x,M]=dX(e,v,m),[$,I,P]=M?pX(M):[null,null,void 0];if(Uf(M,"a")&&Uf(M,"H"))throw new pf("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:n,regex:v,rawMatches:x,matches:M,result:$,zone:I,specificOffset:P}}}function mX(t,e,i){const{result:n,zone:s,specificOffset:h,invalidReason:f}=AR(t,e,i);return[n,s,h,f]}function OR(t,e){if(!t)return null;const n=Kn.create(e,t).dtFormatter(fX()),s=n.formatToParts(),h=n.resolvedOptions();return s.map(f=>hX(f,t,h))}const d_="Invalid DateTime",D8=864e13;function gy(t){return new Uo("unsupported zone",`the zone "${t.name}" is not supported`)}function p_(t){return t.weekData===null&&(t.weekData=a2(t.c)),t.weekData}function f_(t){return t.localWeekData===null&&(t.localWeekData=a2(t.c,t.loc.getMinDaysInFirstWeek(),t.loc.getStartOfWeek())),t.localWeekData}function yu(t,e){const i={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new et({...i,...e,old:i})}function PR(t,e,i){let n=t-e*60*1e3;const s=i.offset(n);if(e===s)return[n,e];n-=(s-e)*60*1e3;const h=i.offset(n);return s===h?[n,s]:[t-Math.min(s,h)*60*1e3,Math.max(s,h)]}function my(t,e){t+=e*60*1e3;const i=new Date(t);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:i.getUTCHours(),minute:i.getUTCMinutes(),second:i.getUTCSeconds(),millisecond:i.getUTCMilliseconds()}}function Rv(t,e,i){return PR(Aw(t),e,i)}function z8(t,e){const i=t.o,n=t.c.year+Math.trunc(e.years),s=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,h={...t.c,year:n,month:s,day:Math.min(t.c.day,l2(n,s))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},f=$t.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),m=Aw(h);let[v,x]=PR(m,i,t.zone);return f!==0&&(v+=f,x=t.zone.offset(v)),{ts:v,o:x}}function V0(t,e,i,n,s,h){const{setZone:f,zone:m}=i;if(t&&Object.keys(t).length!==0||e){const v=e||m,x=et.fromObject(t,{...i,zone:v,specificOffset:h});return f?x:x.setZone(m)}else return et.invalid(new Uo("unparsable",`the input "${s}" can't be parsed as ${n}`))}function yy(t,e,i=!0){return t.isValid?Kn.create(Jt.create("en-US"),{allowZ:i,forceSimple:!0}).formatDateTimeFromString(t,e):null}function g_(t,e){const i=t.c.year>9999||t.c.year<0;let n="";return i&&t.c.year>=0&&(n+="+"),n+=Qi(t.c.year,i?6:4),e?(n+="-",n+=Qi(t.c.month),n+="-",n+=Qi(t.c.day)):(n+=Qi(t.c.month),n+=Qi(t.c.day)),n}function F8(t,e,i,n,s,h){let f=Qi(t.c.hour);return e?(f+=":",f+=Qi(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!i)&&(f+=":")):f+=Qi(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!i)&&(f+=Qi(t.c.second),(t.c.millisecond!==0||!n)&&(f+=".",f+=Qi(t.c.millisecond,3))),s&&(t.isOffsetFixed&&t.offset===0&&!h?f+="Z":t.o<0?(f+="-",f+=Qi(Math.trunc(-t.o/60)),f+=":",f+=Qi(Math.trunc(-t.o%60))):(f+="+",f+=Qi(Math.trunc(t.o/60)),f+=":",f+=Qi(Math.trunc(t.o%60)))),h&&(f+="["+t.zone.ianaName+"]"),f}const RR={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},yX={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},vX={ordinal:1,hour:0,minute:0,second:0,millisecond:0},LR=["year","month","day","hour","minute","second","millisecond"],bX=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],wX=["year","ordinal","hour","minute","second","millisecond"];function _X(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new DP(t);return e}function j8(t){switch(t.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return _X(t)}}function G8(t,e){const i=Ih(e.zone,Bi.defaultZone),n=Jt.fromObject(e),s=Bi.now();let h,f;if(st(t.year))h=s;else{for(const x of LR)st(t[x])&&(t[x]=RR[x]);const m=aR(t)||lR(t);if(m)return et.invalid(m);const v=i.offset(s);[h,f]=Rv(t,v,i)}return new et({ts:h,zone:i,loc:n,o:f})}function V8(t,e,i){const n=st(i.round)?!0:i.round,s=(f,m)=>(f=PS(f,n||i.calendary?0:2,!0),e.loc.clone(i).relFormatter(i).format(f,m)),h=f=>i.calendary?e.hasSame(t,f)?0:e.startOf(f).diff(t.startOf(f),f).get(f):e.diff(t,f).get(f);if(i.unit)return s(h(i.unit),i.unit);for(const f of i.units){const m=h(f);if(Math.abs(m)>=1)return s(m,f)}return s(t>e?-0:0,i.units[i.units.length-1])}function H8(t){let e={},i;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],i=Array.from(t).slice(0,t.length-1)):i=Array.from(t),[e,i]}class et{constructor(e){const i=e.zone||Bi.defaultZone;let n=e.invalid||(Number.isNaN(e.ts)?new Uo("invalid input"):null)||(i.isValid?null:gy(i));this.ts=st(e.ts)?Bi.now():e.ts;let s=null,h=null;if(!n)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(i))[s,h]=[e.old.c,e.old.o];else{const m=i.offset(this.ts);s=my(this.ts,m),n=Number.isNaN(s.year)?new Uo("invalid input"):null,s=n?null:s,h=n?null:m}this._zone=i,this.loc=e.loc||Jt.create(),this.invalid=n,this.weekData=null,this.localWeekData=null,this.c=s,this.o=h,this.isLuxonDateTime=!0}static now(){return new et({})}static local(){const[e,i]=H8(arguments),[n,s,h,f,m,v,x]=i;return G8({year:n,month:s,day:h,hour:f,minute:m,second:v,millisecond:x},e)}static utc(){const[e,i]=H8(arguments),[n,s,h,f,m,v,x]=i;return e.zone=Xn.utcInstance,G8({year:n,month:s,day:h,hour:f,minute:m,second:v,millisecond:x},e)}static fromJSDate(e,i={}){const n=KK(e)?e.valueOf():NaN;if(Number.isNaN(n))return et.invalid("invalid input");const s=Ih(i.zone,Bi.defaultZone);return s.isValid?new et({ts:n,zone:s,loc:Jt.fromObject(i)}):et.invalid(gy(s))}static fromMillis(e,i={}){if($d(e))return e<-D8||e>D8?et.invalid("Timestamp out of range"):new et({ts:e,zone:Ih(i.zone,Bi.defaultZone),loc:Jt.fromObject(i)});throw new Vr(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,i={}){if($d(e))return new et({ts:e*1e3,zone:Ih(i.zone,Bi.defaultZone),loc:Jt.fromObject(i)});throw new Vr("fromSeconds requires a numerical input")}static fromObject(e,i={}){e=e||{};const n=Ih(i.zone,Bi.defaultZone);if(!n.isValid)return et.invalid(gy(n));const s=Jt.fromObject(i),h=c2(e,j8),{minDaysInFirstWeek:f,startOfWeek:m}=E8(h,s),v=Bi.now(),x=st(i.specificOffset)?n.offset(v):i.specificOffset,M=!st(h.ordinal),$=!st(h.year),I=!st(h.month)||!st(h.day),P=$||I,L=h.weekYear||h.weekNumber;if((P||M)&&L)throw new pf("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(I&&M)throw new pf("Can't mix ordinal dates with month/day");const z=L||h.weekday&&!P;let F,U,W=my(v,x);z?(F=bX,U=yX,W=a2(W,f,m)):M?(F=wX,U=vX,W=h_(W)):(F=LR,U=RR);let K=!1;for(const we of F){const ve=h[we];st(ve)?K?h[we]=U[we]:h[we]=W[we]:K=!0}const J=z?WK(h,f,m):M?ZK(h):aR(h),te=J||lR(h);if(te)return et.invalid(te);const ie=z?T8(h,f,m):M?M8(h):h,[le,de]=Rv(ie,x,n),xe=new et({ts:le,zone:n,o:de,loc:s});return h.weekday&&P&&e.weekday!==xe.weekday?et.invalid("mismatched weekday",`you can't specify both a weekday of ${h.weekday} and a date of ${xe.toISO()}`):xe}static fromISO(e,i={}){const[n,s]=FY(e);return V0(n,s,i,"ISO 8601",e)}static fromRFC2822(e,i={}){const[n,s]=jY(e);return V0(n,s,i,"RFC 2822",e)}static fromHTTP(e,i={}){const[n,s]=GY(e);return V0(n,s,i,"HTTP",i)}static fromFormat(e,i,n={}){if(st(e)||st(i))throw new Vr("fromFormat requires an input string and a format");const{locale:s=null,numberingSystem:h=null}=n,f=Jt.fromOpts({locale:s,numberingSystem:h,defaultToEN:!0}),[m,v,x,M]=mX(f,e,i);return M?et.invalid(M):V0(m,v,n,`format ${i}`,e,x)}static fromString(e,i,n={}){return et.fromFormat(e,i,n)}static fromSQL(e,i={}){const[n,s]=ZY(e);return V0(n,s,i,"SQL",e)}static invalid(e,i=null){if(!e)throw new Vr("need to specify a reason the DateTime is invalid");const n=e instanceof Uo?e:new Uo(e,i);if(Bi.throwOnInvalid)throw new SK(n);return new et({invalid:n})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,i={}){const n=OR(e,Jt.fromObject(i));return n?n.map(s=>s?s.val:null).join(""):null}static expandFormat(e,i={}){return IR(Kn.parseFormat(e),Jt.fromObject(i)).map(s=>s.val).join("")}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?p_(this).weekYear:NaN}get weekNumber(){return this.isValid?p_(this).weekNumber:NaN}get weekday(){return this.isValid?p_(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?f_(this).weekday:NaN}get localWeekNumber(){return this.isValid?f_(this).weekNumber:NaN}get localWeekYear(){return this.isValid?f_(this).weekYear:NaN}get ordinal(){return this.isValid?h_(this.c).ordinal:NaN}get monthShort(){return this.isValid?py.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?py.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?py.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?py.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,i=6e4,n=Aw(this.c),s=this.zone.offset(n-e),h=this.zone.offset(n+e),f=this.zone.offset(n-s*i),m=this.zone.offset(n-h*i);if(f===m)return[this];const v=n-f*i,x=n-m*i,M=my(v,f),$=my(x,m);return M.hour===$.hour&&M.minute===$.minute&&M.second===$.second&&M.millisecond===$.millisecond?[yu(this,{ts:v}),yu(this,{ts:x})]:[this]}get isInLeapYear(){return Im(this.year)}get daysInMonth(){return l2(this.year,this.month)}get daysInYear(){return this.isValid?Mf(this.year):NaN}get weeksInWeekYear(){return this.isValid?Jg(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?Jg(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:i,numberingSystem:n,calendar:s}=Kn.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:i,numberingSystem:n,outputCalendar:s}}toUTC(e=0,i={}){return this.setZone(Xn.instance(e),i)}toLocal(){return this.setZone(Bi.defaultZone)}setZone(e,{keepLocalTime:i=!1,keepCalendarTime:n=!1}={}){if(e=Ih(e,Bi.defaultZone),e.equals(this.zone))return this;if(e.isValid){let s=this.ts;if(i||n){const h=e.offset(this.ts),f=this.toObject();[s]=Rv(f,h,e)}return yu(this,{ts:s,zone:e})}else return et.invalid(gy(e))}reconfigure({locale:e,numberingSystem:i,outputCalendar:n}={}){const s=this.loc.clone({locale:e,numberingSystem:i,outputCalendar:n});return yu(this,{loc:s})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const i=c2(e,j8),{minDaysInFirstWeek:n,startOfWeek:s}=E8(i,this.loc),h=!st(i.weekYear)||!st(i.weekNumber)||!st(i.weekday),f=!st(i.ordinal),m=!st(i.year),v=!st(i.month)||!st(i.day),x=m||v,M=i.weekYear||i.weekNumber;if((x||f)&&M)throw new pf("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(v&&f)throw new pf("Can't mix ordinal dates with month/day");let $;h?$=T8({...a2(this.c,n,s),...i},n,s):st(i.ordinal)?($={...this.toObject(),...i},st(i.day)&&($.day=Math.min(l2($.year,$.month),$.day))):$=M8({...h_(this.c),...i});const[I,P]=Rv($,this.o,this.zone);return yu(this,{ts:I,o:P})}plus(e){if(!this.isValid)return this;const i=$t.fromDurationLike(e);return yu(this,z8(this,i))}minus(e){if(!this.isValid)return this;const i=$t.fromDurationLike(e).negate();return yu(this,z8(this,i))}startOf(e,{useLocaleWeeks:i=!1}={}){if(!this.isValid)return this;const n={},s=$t.normalizeUnit(e);switch(s){case"years":n.month=1;case"quarters":case"months":n.day=1;case"weeks":case"days":n.hour=0;case"hours":n.minute=0;case"minutes":n.second=0;case"seconds":n.millisecond=0;break}if(s==="weeks")if(i){const h=this.loc.getStartOfWeek(),{weekday:f}=this;f<h&&(n.weekNumber=this.weekNumber-1),n.weekday=h}else n.weekday=1;if(s==="quarters"){const h=Math.ceil(this.month/3);n.month=(h-1)*3+1}return this.set(n)}endOf(e,i){return this.isValid?this.plus({[e]:1}).startOf(e,i).minus(1):this}toFormat(e,i={}){return this.isValid?Kn.create(this.loc.redefaultToEN(i)).formatDateTimeFromString(this,e):d_}toLocaleString(e=o2,i={}){return this.isValid?Kn.create(this.loc.clone(i),e).formatDateTime(this):d_}toLocaleParts(e={}){return this.isValid?Kn.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:i=!1,suppressMilliseconds:n=!1,includeOffset:s=!0,extendedZone:h=!1}={}){if(!this.isValid)return null;const f=e==="extended";let m=g_(this,f);return m+="T",m+=F8(this,f,i,n,s,h),m}toISODate({format:e="extended"}={}){return this.isValid?g_(this,e==="extended"):null}toISOWeekDate(){return yy(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:i=!1,includeOffset:n=!0,includePrefix:s=!1,extendedZone:h=!1,format:f="extended"}={}){return this.isValid?(s?"T":"")+F8(this,f==="extended",i,e,n,h):null}toRFC2822(){return yy(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return yy(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?g_(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:i=!1,includeOffsetSpace:n=!0}={}){let s="HH:mm:ss.SSS";return(i||e)&&(n&&(s+=" "),i?s+="z":e&&(s+="ZZ")),yy(this,s,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():d_}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const i={...this.c};return e.includeConfig&&(i.outputCalendar=this.outputCalendar,i.numberingSystem=this.loc.numberingSystem,i.locale=this.loc.locale),i}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,i="milliseconds",n={}){if(!this.isValid||!e.isValid)return $t.invalid("created by diffing an invalid DateTime");const s={locale:this.locale,numberingSystem:this.numberingSystem,...n},h=YK(i).map($t.normalizeUnit),f=e.valueOf()>this.valueOf(),m=f?this:e,v=f?e:this,x=tX(m,v,h,s);return f?x.negate():x}diffNow(e="milliseconds",i={}){return this.diff(et.now(),e,i)}until(e){return this.isValid?Ni.fromDateTimes(this,e):this}hasSame(e,i,n){if(!this.isValid)return!1;const s=e.valueOf(),h=this.setZone(e.zone,{keepLocalTime:!0});return h.startOf(i,n)<=s&&s<=h.endOf(i,n)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const i=e.base||et.fromObject({},{zone:this.zone}),n=e.padding?this<i?-e.padding:e.padding:0;let s=["years","months","days","hours","minutes","seconds"],h=e.unit;return Array.isArray(e.unit)&&(s=e.unit,h=void 0),V8(i,this.plus(n),{...e,numeric:"always",units:s,unit:h})}toRelativeCalendar(e={}){return this.isValid?V8(e.base||et.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(et.isDateTime))throw new Vr("min requires all arguments be DateTimes");return k8(e,i=>i.valueOf(),Math.min)}static max(...e){if(!e.every(et.isDateTime))throw new Vr("max requires all arguments be DateTimes");return k8(e,i=>i.valueOf(),Math.max)}static fromFormatExplain(e,i,n={}){const{locale:s=null,numberingSystem:h=null}=n,f=Jt.fromOpts({locale:s,numberingSystem:h,defaultToEN:!0});return AR(f,e,i)}static fromStringExplain(e,i,n={}){return et.fromFormatExplain(e,i,n)}static get DATE_SHORT(){return o2}static get DATE_MED(){return zP}static get DATE_MED_WITH_WEEKDAY(){return EK}static get DATE_FULL(){return FP}static get DATE_HUGE(){return jP}static get TIME_SIMPLE(){return GP}static get TIME_WITH_SECONDS(){return VP}static get TIME_WITH_SHORT_OFFSET(){return HP}static get TIME_WITH_LONG_OFFSET(){return BP}static get TIME_24_SIMPLE(){return UP}static get TIME_24_WITH_SECONDS(){return qP}static get TIME_24_WITH_SHORT_OFFSET(){return WP}static get TIME_24_WITH_LONG_OFFSET(){return ZP}static get DATETIME_SHORT(){return JP}static get DATETIME_SHORT_WITH_SECONDS(){return KP}static get DATETIME_MED(){return YP}static get DATETIME_MED_WITH_SECONDS(){return XP}static get DATETIME_MED_WITH_WEEKDAY(){return kK}static get DATETIME_FULL(){return QP}static get DATETIME_FULL_WITH_SECONDS(){return eR}static get DATETIME_HUGE(){return tR}static get DATETIME_HUGE_WITH_SECONDS(){return iR}}function H0(t){if(et.isDateTime(t))return t;if(t&&t.valueOf&&$d(t.valueOf()))return et.fromJSDate(t);if(t&&typeof t=="object")return et.fromObject(t);throw new Vr(`Unknown datetime argument: ${t}, of type ${typeof t}`)}const Xa="system",zS="unknown",Kg="UTC",xX=Intl.DateTimeFormat().resolvedOptions().timeZone,SX="shortOffset";function TX(t){return"timeZoneIANA"in t}function MX(t){return t.startsWith("UTC")}function i6e(t,e=!1){return{json:{read:{source:t,reader:(i,n)=>n[t]?EX(n[t]):null},write:!!e&&{allowNull:!0,writer(i,n){n[t]=i?kX(i):null}}}}}function EX(t,e=Xa){return t?TX(t)?t.timeZoneIANA:$X(t,e):e}function kX(t){return{timeZoneIANA:t}}function $X(t,e=Xa){if(!t||!p8.has(t.timeZone))return e;const i=p8.get(t.timeZone);return MX(t.timeZone)||t.respectsDaylightSaving?i:CX(i)}function CX(t){const e=et.local().setZone(t),i=Math.min(e.set({month:1,day:1}).offset,e.set({month:5}).offset);return i===0?"Etc/UTC":`Etc/GMT${Xn.instance(-i).formatOffset(0,"narrow")}`}function n6e(t,e,i,n,s){if(e&&s==="date")return{timeZone:Kg,timeZoneName:void 0};const h=n.timeStyle||n.hour,f=i===zS;return{timeZone:f?s==="timestamp-offset"?void 0:t??Kg:i,timeZoneName:f&&h?SX:void 0}}const IX={year:void 0,month:void 0,day:void 0,weekday:void 0},AX={hour:void 0,minute:void 0,second:void 0},NR={timeZone:Kg},ha={year:"numeric",month:"numeric",day:"numeric"},B0={year:"numeric",month:"long",day:"numeric"},U0={year:"numeric",month:"short",day:"numeric"},q0={year:"numeric",month:"long",weekday:"long",day:"numeric"},Mh={hour:"numeric",minute:"numeric"},$u={...Mh,second:"numeric"},DR={hourCycle:"h23"},W0={...Mh,...DR},Z0={...$u,...DR},zR={"short-date":ha,"short-date-short-time":{...ha,...Mh},"short-date-short-time-24":{...ha,...W0},"short-date-long-time":{...ha,...$u},"short-date-long-time-24":{...ha,...Z0},"short-date-le":ha,"short-date-le-short-time":{...ha,...Mh},"short-date-le-short-time-24":{...ha,...W0},"short-date-le-long-time":{...ha,...$u},"short-date-le-long-time-24":{...ha,...Z0},"long-month-day-year":B0,"long-month-day-year-short-time":{...B0,...Mh},"long-month-day-year-short-time-24":{...B0,...W0},"long-month-day-year-long-time":{...B0,...$u},"long-month-day-year-long-time-24":{...B0,...Z0},"day-short-month-year":U0,"day-short-month-year-short-time":{...U0,...Mh},"day-short-month-year-short-time-24":{...U0,...W0},"day-short-month-year-long-time":{...U0,...$u},"day-short-month-year-long-time-24":{...U0,...Z0},"long-date":q0,"long-date-short-time":{...q0,...Mh},"long-date-short-time-24":{...q0,...W0},"long-date-long-time":{...q0,...$u},"long-date-long-time-24":{...q0,...Z0},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":Mh,"long-time":$u},OX=Tr()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),FR={ar:"ar-u-nu-latn-ca-gregory"};let $x=new WeakMap;const Rw=zR["short-date-short-time"];function PX(t){let e=$x.get(t);if(!e){const i=Ur(),n=FR[i]||i,s=FS(t.timeZone??Xa),h={...t,timeZone:s};e=new Intl.DateTimeFormat(n,h),$x.set(t,e)}return e}function r6e(t){return zR[t]}function Kh(t,e=Rw){return PX(e).format(t)}function s6e(t,e=Rw){return Kh(new Date(t),{...e,...NR,...AX})}function o6e(t,e=Rw){return Kh(new Date(`1970-01-01T${t}Z`),{...e,...NR,...IX})}function a6e(t,e=Rw){if(e.timeZone)return Kh(new Date(t),e);const i=et.fromISO(t,{setZone:!0}),n=Ur(),s=FR[n]??n,h=i.offset===0?Kg:e.timeZone,f={...e,timeZone:h};return i.toLocaleString(f,{locale:s})}function FS(t){switch(t){case Xa:return xX;case zS:return Kg;default:return t}}CS(()=>{$x=new WeakMap});const RX={ar:"ar-u-nu-latn"};let Lv=new WeakMap,jR={};function Cx(t){const e=t||jR;if(!Lv.has(e)){const i=Ur(),n=RX[Ur()]||i;Lv.set(e,new Intl.NumberFormat(n,t))}return Lv.get(e)}function l6e(t={}){const e={};return t.digitSeparator!=null&&(e.useGrouping=t.digitSeparator),t.places!=null&&(e.minimumFractionDigits=e.maximumFractionDigits=t.places),e}function h2(t,e){return Object.is(t,-0)&&(t=0),Cx(e).format(t)}function c6e(t,e=Ur()){var n,s;if(!t)return null;let i=B8.get(e);if(!i){const h=Cx().formatToParts(12345.6),f=[...Cx({useGrouping:!1}).format(9876543210)].reverse(),m=new Map(f.map((P,L)=>[P,L])),v=new RegExp(`[${(n=h.find(P=>P.type==="group"))==null?void 0:n.value}]`,"g"),x=new RegExp(`[${(s=h.find(P=>P.type==="decimal"))==null?void 0:s.value}]`),M=new RegExp(`[${f.join("")}]`,"g"),$=/[\u200E\u200F\u202A\u202B\u202C\u202D\u202E\u2066\u2067\u2068\u2069\u061C]/g,I=/[-\u2212\u2013\u2014\u2015]/g;i=P=>{if((P=P.trim().replaceAll(v,"").replace(x,".").replace(M,z=>String(m.get(z))).replaceAll($,"").replaceAll(I,"-"))==="")return null;const L=Number(P);return isNaN(L)?null:L},B8.set(e,i)}return i(t)}CS(()=>{Lv=new WeakMap,jR={}});const B8=new Map,GR=()=>Ce.getLogger("esri.intl.substitute");function jS(t,e,i={}){const{format:n={}}=i;return N6(t,s=>LX(s,e,n))}function LX(t,e,i){let n,s;const h=t.indexOf(":");if(h===-1?n=t.trim():(n=t.slice(0,h).trim(),s=t.slice(h+1).trim()),!n)return"";const f=gm(n,e);if(f==null)return"";const m=(s?i==null?void 0:i[s]:null)??(i==null?void 0:i[n]);return m?NX(f,m):s?DX(f,s):GS(f)}function NX(t,e){switch(e.type){case"date":return Kh(t,e.intlOptions);case"number":return h2(t,e.intlOptions);default:return GR().warn("missing format descriptor for key {key}"),GS(t)}}function DX(t,e){switch(e.toLowerCase()){case"dateformat":return Kh(t);case"numberformat":return h2(t);default:return GR().warn(`inline format is unsupported since 4.12: ${e}`),/^(dateformat|datestring)/i.test(e)?Kh(t):/^numberformat/i.test(e)?h2(t):GS(t)}}function GS(t){switch(typeof t){case"string":return t;case"number":return h2(t);case"boolean":return""+t;default:return t instanceof Date?Kh(t):""}}const U8=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,zX={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function q8(t){return t in zX}const y1=[],kf=new Map;function W8(t){for(const e of kf.keys())VR(t.pattern,e)&&kf.delete(e)}function FX(t){return y1.includes(t)||(W8(t),y1.unshift(t)),ut(()=>{const e=y1.indexOf(t);e>-1&&(y1.splice(e,1),W8(t))})}async function VS(t){const e=Ur();kf.has(t)||kf.set(t,GX(t,e));const i=kf.get(t);return i&&await VX.add(i),i}function jX(t){if(!U8.test(t))return null;const e=U8.exec(t);if(e===null)return null;const[,i,n]=e,s=i+(n?"-"+n.toUpperCase():"");return q8(s)?s:q8(i)?i:null}async function GX(t,e){const i=[];for(const n of y1)if(VR(n.pattern,t))try{return await n.fetchMessageBundle(t,e)}catch(s){i.push(s)}throw i.length?new fe("intl:message-bundle-error",`Errors occurred while loading "${t}"`,{errors:i}):new fe("intl:no-message-bundle-loader",`No loader found for message bundle "${t}"`)}function VR(t,e){return typeof t=="string"?e.startsWith(t):t.test(e)}CS(()=>{kf.clear()});const VX=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(t){return this._increase(),t.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=Ts())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function HX(t,e,i,n){const s=e.exec(i);if(!s)throw new fe("esri-intl:invalid-bundle",`Bundle id "${i}" is not compatible with the pattern "${e}"`);const h=s[1]?`${s[1]}/`:"",f=s[2],m=jX(n),v=`${h}${f}.json`,x=m?`${h}${f}_${m}.json`:v;let M;try{M=await Z8(t(x))}catch($){if(x===v)throw new fe("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:$});try{M=await Z8(t(v))}catch(I){throw new fe("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:I})}}return M}async function Z8(t){if(J8.fetchBundleAsset!=null)return J8.fetchBundleAsset(t);const e=await zi(t,{responseType:"text"});return JSON.parse(e.data)}let BX=class{constructor({base:e="",pattern:i,location:n=new URL(window.location.href)}){let s;s=typeof n=="string"?h=>new URL(h,new URL(n,window.location.href)).href:n instanceof URL?h=>new URL(h,n).href:n,this.pattern=typeof i=="string"?new RegExp(`^${i}`):i,this.getAssetUrl=s,e=e?e.endsWith("/")?e:e+"/":"",this.matcher=new RegExp(`^${e}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(e,i){return HX(this.getAssetUrl,this.matcher,e,i)}};function UX(t){return new BX(t)}const J8={};FX(UX({pattern:"esri/",location:Tt}));const K8={};function qX(t){var i;const e={async:t.async,isDebug:t.isDebug,locale:t.locale,baseUrl:t.baseUrl,has:{...t.has},map:{...t.map},packages:((i=t.packages)==null?void 0:i.concat())||[],paths:{...K8.paths,...t.paths}};return t.hasOwnProperty("async")||(e.async=!0),t.hasOwnProperty("isDebug")||(e.isDebug=!1),t.baseUrl||(e.baseUrl=K8.baseUrl),e}let WX=class{constructor(){const e=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(i=>{this[i]=(...n)=>e[i](...n)})}},Nv=class{constructor(){this._dispatcher=new WX,this._workerPostMessage({type:Mn.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener("message",e)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(e){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener("messageerror",e)}get onerror(){return this._onerrorHandler}set onerror(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener("error",e)}postMessage(e){zf(()=>{this._workerMessageHandler(new MessageEvent("message",{data:e}))})}dispatchEvent(e){return this._dispatcher.dispatchEvent(e)}addEventListener(e,i,n){this._dispatcher.addEventListener(e,i,n)}removeEventListener(e,i,n){this._dispatcher.removeEventListener(e,i,n)}_workerPostMessage(e){zf(()=>{this.dispatchEvent(new MessageEvent("message",{data:e}))})}async _workerMessageHandler(e){const i=Zg(e);if(i&&i.type===Mn.OPEN){const{modulePath:n,jobId:s}=i;let h=await Jh.loadWorker(n);h||(h=await import(n));const f=Jh.connect(h);this._workerPostMessage({type:Mn.OPENED,jobId:s,data:f})}}};const Ix=()=>Ce.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:ZX}=Mn,JX='let globalId=0;const outgoing=new Map,configuration={CONFIGURATION};self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;let s=null;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());s=()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))},t.addEventListener("abort",s)}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})})).finally((()=>{t&&t.removeEventListener("abort",s)}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\nModules version: ${r}\nAssets version: ${n??s}\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let vy,by;const Y8="Failed to create Worker. Fallback to execute module in main thread";async function KX(){if(!pe("esri-workers"))return X8(new Nv);if(!vy&&!by)try{const e=JX.split("{CONFIGURATION}").join(YX());vy=URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}catch(e){by=e||{}}let t;if(vy)try{t=new Worker(vy,{name:"esri-worker-"+XX++})}catch{Ix().warn(Y8,by),t=new Nv}else Ix().warn(Y8,by),t=new Nv;return X8(t)}async function X8(t){return new Promise(e=>{function i(s){const h=Zg(s);h&&h.type===ZX&&(t.removeEventListener("message",i),t.removeEventListener("error",n),e(t))}function n(s){s.preventDefault(),t.removeEventListener("message",i),t.removeEventListener("error",n),Ix().warn("Failed to create Worker. Fallback to execute module in main thread",s),(t=new Nv).addEventListener("message",i),t.addEventListener("error",n)}t.addEventListener("message",i),t.addEventListener("error",n)})}function YX(){let t;if(vt.default!=null){const s={...vt};delete s.default,t=JSON.parse(JSON.stringify(s))}else t=JSON.parse(JSON.stringify(vt));t.assetsPath=Ks(t.assetsPath),t.defaultAssetsPath=t.defaultAssetsPath?Ks(t.defaultAssetsPath):void 0,t.request.interceptors=[],t.log.interceptors=[],t.locale=Ur(),t.has={"esri-csp-restrictions":pe("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":pe("esri-2d-update-debug"),"esri-2d-log-updating":pe("esri-2d-log-updating"),"featurelayer-pbf":pe("featurelayer-pbf"),"featurelayer-fast-triangulation-enabled":pe("featurelayer-fast-triangulation-enabled"),"featurelayer-simplify-thresholds":pe("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":pe("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":pe("featurelayer-simplify-mobile-factor"),"featurelayer-query-max-depth":pe("featurelayer-query-max-depth"),"featurelayer-query-pausing-enabled":pe("featurelayer-query-pausing-enabled"),"featurelayer-snapshot-enabled":pe("featurelayer-snapshot-enabled"),"esri-atomics":pe("esri-atomics"),"esri-shared-array-buffer":pe("esri-shared-array-buffer"),"esri-tiles-debug":pe("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":pe("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":pe("feature-polyline-generalization-factor"),"host-webworker":1},t.workers.loaderUrl&&(t.workers.loaderUrl=Ks(t.workers.loaderUrl)),t.workers.workerPath?t.workers.workerPath=Ks(t.workers.workerPath):t.workers.workerPath=Ks(Tt("esri/core/workers/RemoteClient.js")),t.workers.useDynamicImport=!1;const e=vt.workers.loaderConfig,i=qX({baseUrl:e==null?void 0:e.baseUrl,locale:Ur(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...e==null?void 0:e.has},map:{...e==null?void 0:e.map},paths:{...e==null?void 0:e.paths},packages:(e==null?void 0:e.packages)||[]});return JSON.stringify({esriConfig:t,loaderConfig:i,kernelInfo:{buildDate:aO,fullVersion:rS,revision:lO}})}let XX=0;const{ABORT:Q8,INVOKE:QX,OPEN:eQ,OPENED:tQ,RESPONSE:J0}=Mn;let iQ=class HR{static async create(e){const i=await KX();return new HR(i,e)}constructor(e,i){this._outJobs=new Map,this._inJobs=new Map,this.worker=e,this.id=i,e.addEventListener("message",this._onMessage.bind(this)),e.addEventListener("error",n=>{n.preventDefault(),Ce.getLogger("esri.core.workers.WorkerOwner").error(n)})}terminate(){this.worker.terminate()}async open(e,i={}){const{signal:n}=i,s=LP();return new Promise((h,f)=>{const m={resolve:h,reject:f,abortHandle:z6(n,()=>{this._outJobs.delete(s),this._post({type:Q8,jobId:s})})};this._outJobs.set(s,m),this._post({type:eQ,jobId:s,modulePath:e})})}_onMessage(e){const i=Zg(e);if(i)switch(i.type){case tQ:this._onOpenedMessage(i);break;case J0:this._onResponseMessage(i);break;case Q8:this._onAbortMessage(i);break;case QX:this._onInvokeMessage(i)}}_onAbortMessage(e){const i=this._inJobs,n=e.jobId,s=i.get(n);s&&(s.controller&&s.controller.abort(),i.delete(n))}_onInvokeMessage(e){const{methodName:i,jobId:n,data:s,abortable:h}=e,f=h?new AbortController:null,m=this._inJobs,v=bK[i];let x;try{if(typeof v!="function")throw new TypeError(`${i} is not a function`);x=v.call(null,s,{signal:f?f.signal:null})}catch(M){return void this._post({type:J0,jobId:n,error:Wg(M)})}Tc(x)?(m.set(n,{controller:f,promise:x}),x.then(M=>{m.has(n)&&(m.delete(n),this._post({type:J0,jobId:n},M))},M=>{m.has(n)&&(m.delete(n),M||(M={message:"Error encountered at method"+i}),Zr(M)||this._post({type:J0,jobId:n,error:Wg(M||{message:`Error encountered at method ${i}`})}))})):this._post({type:J0,jobId:n},x)}_onOpenedMessage(e){const{jobId:i,data:n}=e,s=this._outJobs.get(i);s&&(this._outJobs.delete(i),Rt(s.abortHandle),s.resolve(n))}_onResponseMessage(e){const{jobId:i,error:n,data:s}=e,h=this._outJobs.get(i);h&&(this._outJobs.delete(i),Rt(h.abortHandle),n?h.reject(fe.fromJSON(JSON.parse(n))):h.resolve(s))}_post(e,i,n){return kS(this.worker,e,i,n)}};const eE=pe("host-browser")?Math.min(navigator.hardwareConcurrency-1,pe("workers-pool-size")):0;let wd=pe("esri-mobile")?Math.min(eE,3):eE;wd||(wd=pe("safari")&&pe("mac")?7:2);let tE=0;const Dv=[];function nQ(){BR()}async function wy(t,e){const i=new vK,{registryTarget:n,...s}=e;return await i.open(t,s),n&&lK(n,i),i}async function p6e(t,e={}){if(typeof t!="string")throw new fe("workers:undefined-module","modulePath is missing");let i=e.strategy||"distributed";if(pe("host-webworker")&&!pe("esri-workers")&&(i="local"),i==="local"){let n=await Jh.loadWorker(t);n||(n=await import(t)),Zt(e.signal);const s=e.client||n;return wy([Jh.connect(n,e.schedule)],{...e,client:s})}if(await BR(),Zt(e.signal),i==="dedicated"){const n=tE++%wd;return wy([await Dv[n].open(t,e)],e)}if(e.maxNumWorkers&&e.maxNumWorkers>0){const n=Math.min(e.maxNumWorkers,wd);if(n<wd){const s=new Array(n);for(let h=0;h<n;++h){const f=tE++%wd;s[h]=Dv[f].open(t,e)}return wy(s,e)}}return wy(Dv.map(n=>n.open(t,e)),e)}let _y=null;async function BR(){if(_y)return _y;new AbortController;const t=[];for(let e=0;e<wd;e++){const i=iQ.create(e).then(n=>(Dv[e]=n,n));t.push(i)}return _y=Promise.all(t),_y}const gr=Math.PI/180,rQ=/(?:SPHEROID|ELLIPSOID)\[([^\]]+)]/i,Vc=Ei.radius,Eo=Ei.eccentricitySquared,sQ={a1:Vc*Eo,a2:Vc*Eo*Vc*Eo,a3:Vc*Eo*Eo/2,a4:Vc*Eo*Vc*Eo*2.5,a5:Vc*Eo+Vc*Eo*Eo/2,a6:1-Eo},oQ={4267:{a:63782064e-1,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:Ei.radius,f:Ei.flattening},4490:{a:6378137,f:1/298.257222101},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:Uh.radius,f:Uh.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:Ha.radius,f:Ha.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:Ha.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}};var oe;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",t[t.WGS84=2]="WGS84",t[t.WEB_MERCATOR=3]="WEB_MERCATOR",t[t.WGS84_ECEF=4]="WGS84_ECEF",t[t.CGCS2000=5]="CGCS2000",t[t.SPHERICAL_MARS_PCPF=6]="SPHERICAL_MARS_PCPF",t[t.GCSMARS2000=7]="GCSMARS2000",t[t.SPHERICAL_MOON_PCPF=8]="SPHERICAL_MOON_PCPF",t[t.GCSMOON2000=9]="GCSMOON2000",t[t.LON_LAT=10]="LON_LAT",t[t.PLATE_CARREE=11]="PLATE_CARREE"})(oe||(oe={}));const aQ={[oe.WGS84]:{[oe.CGCS2000]:yi,[oe.GCSMARS2000]:null,[oe.GCSMOON2000]:null,[oe.LON_LAT]:yi,[oe.SPHERICAL_ECEF]:yg,[oe.SPHERICAL_MARS_PCPF]:null,[oe.SPHERICAL_MOON_PCPF]:null,[oe.UNKNOWN]:null,[oe.WEB_MERCATOR]:$f,[oe.PLATE_CARREE]:Cf,[oe.WGS84]:yi,[oe.WGS84_ECEF]:Of},[oe.CGCS2000]:{[oe.CGCS2000]:yi,[oe.GCSMARS2000]:null,[oe.GCSMOON2000]:null,[oe.LON_LAT]:yi,[oe.SPHERICAL_ECEF]:yg,[oe.SPHERICAL_MARS_PCPF]:null,[oe.SPHERICAL_MOON_PCPF]:null,[oe.UNKNOWN]:null,[oe.WEB_MERCATOR]:$f,[oe.PLATE_CARREE]:Cf,[oe.WGS84]:yi,[oe.WGS84_ECEF]:Of},[oe.GCSMARS2000]:{[oe.CGCS2000]:null,[oe.GCSMARS2000]:yi,[oe.GCSMOON2000]:null,[oe.LON_LAT]:yi,[oe.SPHERICAL_ECEF]:null,[oe.SPHERICAL_MARS_PCPF]:rE,[oe.SPHERICAL_MOON_PCPF]:null,[oe.UNKNOWN]:null,[oe.WEB_MERCATOR]:null,[oe.PLATE_CARREE]:null,[oe.WGS84]:null,[oe.WGS84_ECEF]:null},[oe.GCSMOON2000]:{[oe.CGCS2000]:null,[oe.GCSMARS2000]:null,[oe.GCSMOON2000]:yi,[oe.LON_LAT]:yi,[oe.SPHERICAL_ECEF]:null,[oe.SPHERICAL_MARS_PCPF]:null,[oe.SPHERICAL_MOON_PCPF]:nE,[oe.UNKNOWN]:null,[oe.WEB_MERCATOR]:null,[oe.PLATE_CARREE]:null,[oe.WGS84]:null,[oe.WGS84_ECEF]:null},[oe.WEB_MERCATOR]:{[oe.CGCS2000]:mg,[oe.GCSMARS2000]:null,[oe.GCSMOON2000]:null,[oe.LON_LAT]:mg,[oe.SPHERICAL_ECEF]:lQ,[oe.SPHERICAL_MARS_PCPF]:null,[oe.SPHERICAL_MOON_PCPF]:null,[oe.UNKNOWN]:null,[oe.WEB_MERCATOR]:yi,[oe.PLATE_CARREE]:uQ,[oe.WGS84]:mg,[oe.WGS84_ECEF]:cQ},[oe.WGS84_ECEF]:{[oe.CGCS2000]:Pf,[oe.GCSMARS2000]:null,[oe.GCSMOON2000]:null,[oe.LON_LAT]:Pf,[oe.SPHERICAL_ECEF]:wQ,[oe.SPHERICAL_MARS_PCPF]:null,[oe.SPHERICAL_MOON_PCPF]:null,[oe.UNKNOWN]:null,[oe.WEB_MERCATOR]:_Q,[oe.PLATE_CARREE]:dQ,[oe.WGS84]:Pf,[oe.WGS84_ECEF]:yi},[oe.SPHERICAL_ECEF]:{[oe.CGCS2000]:Af,[oe.GCSMARS2000]:null,[oe.GCSMOON2000]:null,[oe.LON_LAT]:Af,[oe.SPHERICAL_ECEF]:yi,[oe.SPHERICAL_MARS_PCPF]:null,[oe.SPHERICAL_MOON_PCPF]:null,[oe.UNKNOWN]:null,[oe.WEB_MERCATOR]:yQ,[oe.PLATE_CARREE]:pQ,[oe.WGS84]:Af,[oe.WGS84_ECEF]:vQ},[oe.SPHERICAL_MARS_PCPF]:{[oe.CGCS2000]:null,[oe.GCSMARS2000]:oE,[oe.GCSMOON2000]:null,[oe.LON_LAT]:oE,[oe.SPHERICAL_ECEF]:null,[oe.SPHERICAL_MARS_PCPF]:yi,[oe.SPHERICAL_MOON_PCPF]:null,[oe.UNKNOWN]:null,[oe.WEB_MERCATOR]:null,[oe.PLATE_CARREE]:null,[oe.WGS84]:null,[oe.WGS84_ECEF]:null},[oe.SPHERICAL_MOON_PCPF]:{[oe.CGCS2000]:null,[oe.GCSMARS2000]:null,[oe.GCSMOON2000]:sE,[oe.LON_LAT]:sE,[oe.SPHERICAL_ECEF]:null,[oe.SPHERICAL_MARS_PCPF]:null,[oe.SPHERICAL_MOON_PCPF]:yi,[oe.UNKNOWN]:null,[oe.WEB_MERCATOR]:null,[oe.PLATE_CARREE]:null,[oe.WGS84]:null,[oe.WGS84_ECEF]:null},[oe.UNKNOWN]:{[oe.CGCS2000]:null,[oe.GCSMARS2000]:null,[oe.GCSMOON2000]:null,[oe.LON_LAT]:null,[oe.SPHERICAL_ECEF]:null,[oe.SPHERICAL_MARS_PCPF]:null,[oe.SPHERICAL_MOON_PCPF]:null,[oe.UNKNOWN]:yi,[oe.WEB_MERCATOR]:null,[oe.PLATE_CARREE]:null,[oe.WGS84]:null,[oe.WGS84_ECEF]:null},[oe.LON_LAT]:{[oe.CGCS2000]:yi,[oe.GCSMARS2000]:yi,[oe.GCSMOON2000]:yi,[oe.LON_LAT]:yi,[oe.SPHERICAL_ECEF]:yg,[oe.SPHERICAL_MARS_PCPF]:rE,[oe.SPHERICAL_MOON_PCPF]:nE,[oe.UNKNOWN]:null,[oe.WEB_MERCATOR]:$f,[oe.PLATE_CARREE]:Cf,[oe.WGS84]:yi,[oe.WGS84_ECEF]:Of},[oe.PLATE_CARREE]:{[oe.CGCS2000]:If,[oe.GCSMARS2000]:null,[oe.GCSMOON2000]:null,[oe.LON_LAT]:If,[oe.SPHERICAL_ECEF]:fQ,[oe.SPHERICAL_MARS_PCPF]:null,[oe.SPHERICAL_MOON_PCPF]:null,[oe.UNKNOWN]:null,[oe.WEB_MERCATOR]:gQ,[oe.PLATE_CARREE]:yi,[oe.WGS84]:If,[oe.WGS84_ECEF]:mQ}};function UR(t,e,i=qR()){return t==null||e==null?null:xQ(t,e,i).projector}function iE(t,e){return t?e.spatialReference===t?e.spatialReferenceId:(e.spatialReference=t,"metersPerUnit"in e&&(e.metersPerUnit=ir(t,1)),e2(t)?e.spatialReferenceId=oe.SPHERICAL_ECEF:qh(t)?e.spatialReferenceId=oe.WGS84:Ms(t)?e.spatialReferenceId=oe.WEB_MERCATOR:GW(t)?e.spatialReferenceId=oe.PLATE_CARREE:t.wkt===UW.wkt?e.spatialReferenceId=oe.WGS84_ECEF:t.wkid===Ys.CGCS2000?e.spatialReferenceId=oe.CGCS2000:t.wkt===cS.wkt?e.spatialReferenceId=oe.SPHERICAL_MARS_PCPF:t.wkt===hS.wkt?e.spatialReferenceId=oe.SPHERICAL_MOON_PCPF:oS(t)?e.spatialReferenceId=oe.GCSMARS2000:aS(t)?e.spatialReferenceId=oe.GCSMOON2000:e.spatialReferenceId=oe.UNKNOWN):oe.UNKNOWN}function yi(t,e,i,n){t!==i&&(i[n++]=t[e++],i[n++]=t[e++],i[n]=t[e])}function mg(t,e,i,n){i[n]=Wf*(t[e]/Cd),i[n+1]=Wf*(ZR-2*Math.atan(Math.exp(-t[e+1]/Cd))),i[n+2]=t[e+2]}function lQ(t,e,i,n){const s=t[e]/Cd,h=ZR-2*Math.atan(Math.exp(-t[e+1]/Cd)),f=Cd+t[e+2],m=Math.cos(h)*f;i[n]=Math.cos(s)*m,i[n+1]=Math.sin(s)*m,i[n+2]=Math.sin(h)*f}function cQ(t,e,i,n){mg(t,e,i,n),Of(i,n,i,n)}function hQ(t,e,i,n,s){const h=.4999999*Lw,f=qr(qf*t[e+1],-h,h),m=Math.sin(f);i[n++]=qf*t[e]*s.radius,i[n++]=s.halfSemiMajorAxis*Math.log((1+m)/(1-m)),i[n]=t[e+2]}function $f(t,e,i,n){hQ(t,e,i,n,Ei)}function Cf(t,e,i,n){i[n]=t[e]*aE,i[n+1]=t[e+1]*aE,i[n+2]=t[e+2]}function If(t,e,i,n){i[n]=t[e]*lE,i[n+1]=t[e+1]*lE,i[n+2]=t[e+2]}function uQ(t,e,i,n){mg(t,e,i,n),Cf(i,n,i,n)}function dQ(t,e,i,n){Pf(t,e,i,n),Cf(i,n,i,n)}function pQ(t,e,i,n){Af(t,e,i,n),Cf(i,n,i,n)}function fQ(t,e,i,n){If(t,e,i,n),yg(i,n,i,n)}function gQ(t,e,i,n){If(t,e,i,n),$f(i,n,i,n)}function mQ(t,e,i,n){If(t,e,i,n),Of(i,n,i,n)}function HS(t,e,i,n,s){const h=s+t[e+2],f=qf*t[e+1],m=qf*t[e],v=Math.cos(f)*h;i[n]=Math.cos(m)*v,i[n+1]=Math.sin(m)*v,i[n+2]=Math.sin(f)*h}function nE(t,e,i,n){HS(t,e,i,n,Uh.radius)}function rE(t,e,i,n){HS(t,e,i,n,Ha.radius)}function yg(t,e,i,n){HS(t,e,i,n,Ei.radius)}function BS(t,e,i,n,s){const h=t[e],f=t[e+1],m=t[e+2],v=Math.sqrt(h*h+f*f+m*m),x=gS(m/(v===0?1:v)),M=Math.atan2(f,h);i[n++]=Wf*M,i[n++]=Wf*x,i[n]=v-s}function sE(t,e,i,n){BS(t,e,i,n,Uh.radius)}function oE(t,e,i,n){BS(t,e,i,n,Ha.radius)}function Af(t,e,i,n){BS(t,e,i,n,Ei.radius)}function yQ(t,e,i,n){Af(t,e,i,n),$f(i,n,i,n)}function vQ(t,e,i,n){Af(t,e,i,n),Of(i,n,i,n)}function bQ(t,e,i,n,s){const h=qf*t[e],f=qf*t[e+1],m=t[e+2],v=Math.sin(f),x=Math.cos(f),M=s.radius/Math.sqrt(1-s.eccentricitySquared*v*v);i[n++]=(M+m)*x*Math.cos(h),i[n++]=(M+m)*x*Math.sin(h),i[n++]=(M*(1-s.eccentricitySquared)+m)*v}function Of(t,e,i,n){bQ(t,e,i,n,Ei)}function Pf(t,e,i,n){const s=sQ,h=t[e],f=t[e+1],m=t[e+2];let v,x,M,$,I,P,L,z,F,U,W,K,J,te,ie,le,de,xe,we,ve,se;v=Math.abs(m),x=h*h+f*f,M=Math.sqrt(x),$=x+m*m,I=Math.sqrt($),ve=Math.atan2(f,h),P=m*m/$,L=x/$,te=s.a2/I,ie=s.a3-s.a4/I,L>.3?(z=v/I*(1+L*(s.a1+te+P*ie)/I),we=Math.asin(z),U=z*z,F=Math.sqrt(1-U)):(F=M/I*(1-P*(s.a5-te-L*ie)/I),we=Math.acos(F),U=1-F*F,z=Math.sqrt(U)),W=1-Ei.eccentricitySquared*U,K=Ei.radius/Math.sqrt(W),J=s.a6*K,te=M-K*F,ie=v-J*z,de=F*te+z*ie,le=F*ie-z*te,xe=le/(J/W+de),we+=xe,se=de+le*xe/2,m<0&&(we=-we),i[n++]=Wf*ve,i[n++]=Wf*we,i[n]=se}function wQ(t,e,i,n){Pf(t,e,i,n),yg(i,n,i,n)}function _Q(t,e,i,n){Pf(t,e,i,n),$f(i,n,i,n)}function xQ(t,e,i){if(t==null||e==null||i.source.spatialReference===t&&i.dest.spatialReference===e)return i;const n=iE(t,i.source),s=iE(e,i.dest);return n===oe.UNKNOWN&&s===oe.UNKNOWN?bi(t,e)?i.projector=yi:i.projector=null:i.projector=aQ[n][s],i}function qR(){return{source:{spatialReference:null,spatialReferenceId:oe.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:oe.UNKNOWN,metersPerUnit:1},projector:yi}}const f6e={spatialReference:null,spatialReferenceId:oe.UNKNOWN},g6e={spatialReference:null,spatialReferenceId:oe.UNKNOWN},WR=qR(),qf=ac(1),Wf=BO(1),Lw=Math.PI,ZR=.5*Lw,Cd=Ei.radius,aE=Cd*Lw/180,lE=180/(Cd*Lw);function S0(t,e,i,n,s,h,f=1){const m=UR(e,s,WR);if(m==null)return!1;if(m===yi){if(t===n&&i===h)return!0;const x=i+3*f;for(let M=i,$=h;M<x;M++,$++)n[$]=t[M];return!0}const v=i+3*f;for(let x=i,M=h;x<v;x+=3,M+=3)m(t,x,n,M);return!0}const m6e=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:S0},Symbol.toStringTag,{value:"Module"}));function cE(t,e,i,n,s,h){return xy[0]=t,xy[1]=e,xy[2]=i,S0(xy,n,0,s,h,0,1)}const xy=Se();let Sy=0,m_=class Ax{static fromGE(e){const i=new Ax;return i._wkt=e.wkt,i._wkid=e.wkid,i._isInverse=e.isInverse,i}constructor(e){this.uid=Sy++,e?(this._wkt=e.wkt!=null?e.wkt:null,this._wkid=e.wkid!=null?e.wkid:-1,this._isInverse=e.isInverse!=null&&e.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(e){this._wkt=e,this.uid=Sy++}get wkid(){return this._wkid}set wkid(e){this._wkid=e,this.uid=Sy++}get isInverse(){return this._isInverse}set isInverse(e){this._isInverse=e,this.uid=Sy++}getInverse(){const e=new Ax;return e._wkt=this.wkt,e._wkid=this._wkid,e._isInverse=!this.isInverse,e}},u2=class v1{static cacheKey(e,i){var n,s,h,f,m,v;return[((n=e.wkid)==null?void 0:n.toString())??"-1",((s=e.wkt)==null?void 0:s.toString())??"",((h=e.wkt2)==null?void 0:h.toString())??"",((f=i.wkid)==null?void 0:f.toString())??"-1",((m=i.wkt)==null?void 0:m.toString())??"",((v=i.wkt2)==null?void 0:v.toString())??""].join()}static fromGE(e){const i=new v1;let n="";for(const s of e.steps){const h=m_.fromGE(s);i.steps.push(h),n+=h.uid.toString()+","}return i._cachedProjection={},i._gtlistentry=null,i._chain=n,i}constructor(e){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,e==null?void 0:e.steps)for(const i of e.steps)i instanceof m_?this.steps.push(i):this.steps.push(new m_({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}))}getInverse(){const e=new v1;e.steps=[];for(let i=this.steps.length-1;i>=0;i--){const n=this.steps[i];e.steps.push(n.getInverse())}return e}getGTListEntry(){let e="";for(const i of this.steps)e+=i.uid.toString()+",";return e!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=e),this._gtlistentry}assignCachedGe(e,i,n){this._cachedProjection[v1.cacheKey(e,i)]=n}getCachedGeTransformation(e,i){let n="";for(const h of this.steps)n+=h.uid.toString()+",";n!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=n);const s=this._cachedProjection[v1.cacheKey(e,i)];return s===void 0?null:s}};function SQ(t,e,i){if(e==null||i==null||i.vcsWkid||bi(e,i)||Wh(e)||Wh(i))return null;const n=lx(e)/lx(i);if(n===1)return null;switch(t){case"point":case"esriGeometryPoint":return s=>TQ(s,n);case"polyline":case"esriGeometryPolyline":return s=>EQ(s,n);case"polygon":case"esriGeometryPolygon":return s=>MQ(s,n);case"multipoint":case"esriGeometryMultipoint":return s=>kQ(s,n);case"extent":case"esriGeometryEnvelope":return s=>$Q(s,n);default:return null}}function TQ(t,e){(t==null?void 0:t.z)!=null&&(t.z*=e)}function MQ(t,e){if(t)for(const i of t.rings)for(const n of i)n.length>2&&(n[2]*=e)}function EQ(t,e){if(t)for(const i of t.paths)for(const n of i)n.length>2&&(n[2]*=e)}function kQ(t,e){if(t)for(const i of t.points)i.length>2&&(i[2]*=e)}function $Q(t,e){t&&t.zmin!=null&&t.zmax!=null&&(t.zmin*=e,t.zmax*=e)}let Ko=null,Yh=null,vg=null,zv={};const US=new v0;function ol(){return!!Ko&&sS()}function JR(){return!!ol()||(Ve(US),Qa(),!1)}function KR(t,e){return!t||!e||ks(t,e)||JR()}function CQ(t,e){return!ks(t,e)&&!ol()}function Qa(t){return vg==null&&(vg=Promise.all([pO(),be(()=>Promise.resolve().then(()=>Lbe),[],import.meta.url).then(e=>e.g),be(()=>Promise.resolve().then(()=>Vbe),void 0,import.meta.url)])),vg.then(([,e,{hydratedAdapter:i}])=>{Zt(t),Yh=i,Ko=e.default,Ko._enableProjection(DW),US.notify()})}function Wr(t,e,i=null,n=null){return Array.isArray(t)?t.length===0?[]:Ox(Yh,t,t[0].spatialReference,e,i,n):Ox(Yh,[t],t.spatialReference,e,i,n)[0]}function Ox(t,e,i,n,s=null,h=null){if(i==null||n==null)return e;if(ks(i,n,s))return e.map(f=>Fv(f,i,n));if(s==null&&e2(i))return e.map(f=>Fv(f,i,tt.WGS84)).map(f=>Zf(f,n));if(s==null&&e2(n))return e.map(f=>Zf(f,tt.WGS84)).map(f=>Fv(f,tt.WGS84,n));if(s==null){const f=u2.cacheKey(i,n);zv[f]!==void 0?s=zv[f]:((s=XR(i,n,void 0))==null&&(s=new u2),zv[f]=s)}if(Ko==null||t==null)throw new Nw;return h!=null?Ko._project(t,e,i,n,s,h):Ko._project(t,e,i,n,s)}function IQ(t,e){const i=YR([t],e);return i.pending!=null?{pending:i.pending,geometry:null}:i.geometries!=null?{pending:null,geometry:i.geometries[0]}:{pending:null,geometry:null}}function YR(t,e){if(!ol()){for(const i of t)if(i!=null&&!bi(i.spatialReference,e)&&vr(i.spatialReference)&&vr(e)&&!ks(i.spatialReference,e))return Ve(US),{pending:Qa(),geometries:null}}return{pending:null,geometries:t.map(i=>i==null?null:bi(i.spatialReference,e)?i:vr(i.spatialReference)&&vr(e)?Zf(i,e):null)}}function XR(t,e,i=null){if(t==null||e==null)return null;if(Ko==null||Yh==null)throw new Nw;const n=Ko._getTransformation(Yh,t,e,i,i==null?void 0:i.spatialReference);return n!==null?u2.fromGE(n):null}function AQ(t,e,i=null){if(Ko==null||Yh==null)throw new Nw;const n=Ko._getTransformationBySuitability(Yh,t,e,i,i==null?void 0:i.spatialReference);if(n!==null){const s=[];for(const h of n)s.push(u2.fromGE(h));return s}return[]}let Nw=class extends fe{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};function OQ(){Ko=null,Yh=null,vg=null,zv={}}const PQ={get loadPromise(){return vg}};function Zf(t,e){try{const i=Wr(t,e);if(i==null)return null;"xmin"in t&&"xmin"in i&&(i.zmin=t.zmin,i.zmax=t.zmax);const n=SQ(i.type,t.spatialReference,e);return n!=null&&n(i),i}catch(i){if(!(i instanceof Nw))throw i;return null}}async function RQ(t,e,i){const n=t.spatialReference;return n!=null&&e!=null&&await Dw(n,e,null,i),Zf(t,e)}function ks(t,e,i){return!i&&(!!bi(t,e)||vr(t)&&vr(e)&&!!UR(t,e,WR))}function LQ(t,e){if(bi(t,e))return!0;if(!vr(t)||!vr(e))return!1;const i=qh(t)||Ms(t)||ax(t),n=qh(e)||Ms(e)||ax(e);return i&&n}async function Dw(t,e,i,n){if(ol())return xM(n);if(Array.isArray(t)){for(const{source:s,dest:h,geographicTransformation:f}of t)if(s&&h&&!ks(s,h,f))return Qa(n)}else if(t&&e&&!ks(t,e,i))return Qa(n);return xM(n)}function Fv(t,e,i){return t?"x"in t?QR(t,e,new De,i,0):"xmin"in t?nL(t,e,new Lt,i,0):"rings"in t?iL(t,e,new En,i,0):"paths"in t?tL(t,e,new br,i,0):"points"in t?eL(t,e,new y0,i,0):null:null}function NQ(t,e,i=e.spatialReference,n=0){return i!=null&&t.spatialReference!=null&&QR(t,t.spatialReference,e,i,n)!=null}function QR(t,e,i,n,s){Zn[0]=t.x,Zn[1]=t.y;const h=t.z;return Zn[2]=h!==void 0?h:s,S0(Zn,e,0,Zn,n,0,1)?(i.x=Zn[0],i.y=Zn[1],i.spatialReference=n,h!==void 0||Wh(n)?(i.z=Zn[2],i.hasZ=!0):(i.z=void 0,i.hasZ=!1),t.m===void 0?(i.m=void 0,i.hasM=!1):(i.m=t.m,i.hasM=!0),i):null}function DQ(t,e,i=e.spatialReference,n=0){return t.spatialReference!=null&&i!=null&&eL(t,t.spatialReference,e,i,n)!=null}function eL(t,e,i,n,s){const{points:h,hasZ:f,hasM:m}=t,v=[],x=h.length,M=[];for(const I of h)M.push(I[0],I[1],f?I[2]:s);if(!S0(M,e,0,M,n,0,x))return null;const $=f||Wh(n);for(let I=0;I<x;++I){const P=3*I,L=M[P],z=M[P+1];$&&m?v.push([L,z,M[P+2],h[I][3]]):$?v.push([L,z,M[P+2]]):m?v.push([L,z,h[I][2]]):v.push([L,z])}return i.points=v,i.spatialReference=n,i.hasZ=f,i.hasM=m,i}function zQ(t,e,i=e.spatialReference,n=0){return t.spatialReference!=null&&i!=null&&tL(t,t.spatialReference,e,i,n)!=null}function tL(t,e,i,n,s){const{paths:h,hasZ:f,hasM:m}=t,v=[];if(!rL(h,f??!1,m??!1,e,v,n,s))return null;const x=f||Wh(n);return i.paths=v,i.spatialReference=n,i.hasZ=x,i.hasM=m,i}function FQ(t,e,i=e.spatialReference,n=0){return t.spatialReference!=null&&i!=null&&iL(t,t.spatialReference,e,i,n)!=null}function iL(t,e,i,n,s){const{rings:h,hasZ:f,hasM:m}=t,v=[];if(!rL(h,f??!1,m??!1,e,v,n,s))return null;const x=f||Wh(n);return i.rings=v,i.spatialReference=n,i.hasZ=x,i.hasM=m,i}function jQ(t,e,i=e.spatialReference,n=0){return t.spatialReference!=null&&i!=null&&nL(t,t.spatialReference,e,i,n)!=null}function nL(t,e,i,n,s){const{xmin:h,ymin:f,xmax:m,ymax:v,hasZ:x,hasM:M}=t,$=x?t.zmin:s;if(!cE(h,f,$,e,Zn,n))return null;const I=x||Wh(n);i.xmin=Zn[0],i.ymin=Zn[1],I&&(i.zmin=Zn[2]);const P=x?t.zmax:s;return cE(m,v,P,e,Zn,n)?(i.xmax=Zn[0],i.ymax=Zn[1],I&&(i.zmax=Zn[2]),M&&(i.mmin=t.mmin,i.mmax=t.mmax),i.spatialReference=n,i):null}function rL(t,e,i,n,s,h,f=0){const m=new Array;for(const M of t)for(const $ of M)m.push($[0],$[1],e?$[2]:f);if(!S0(m,n,0,m,h,0,m.length/3))return!1;let v=0;s.length=0;const x=e||Wh(h);for(const M of t){const $=new Array;for(const I of M)x&&i?$.push([m[v++],m[v++],m[v++],I[3]]):x?$.push([m[v++],m[v++],m[v++]]):i?($.push([m[v++],m[v++],I[2]]),v++):($.push([m[v++],m[v++]]),v++);s.push($)}return!0}const Zn=Se(),v6e=Object.freeze(Object.defineProperty({__proto__:null,canProjectWithoutEngine:ks,getTransformation:XR,getTransformations:AQ,initializeProjection:Dw,isEqualBaseGCS:LQ,isLoaded:ol,isLoadedOrLoad:JR,isLoadedOrLoadFor:KR,load:Qa,project:Wr,projectExtent:jQ,projectMany:Ox,projectMultipoint:DQ,projectOrLoad:IQ,projectOrLoadMany:YR,projectPoint:NQ,projectPolygon:FQ,projectPolyline:zQ,projectWithZConversion:RQ,projectWithoutEngine:Fv,requiresLoad:CQ,test:PQ,tryProjectWithZConversion:Zf,unload:OQ},Symbol.toStringTag,{value:"Module"}));var Px;let wa=Px=class extends Fe{constructor(t){super(t),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new Px({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};_([T({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],wa.prototype,"cols",void 0),_([T({type:Ii,json:{write:!0}})],wa.prototype,"level",void 0),_([T({type:String,json:{write:!0}})],wa.prototype,"levelValue",void 0),_([T({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],wa.prototype,"origin",void 0),_([T({type:Number,json:{write:!0}})],wa.prototype,"resolution",void 0),_([T({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],wa.prototype,"rows",void 0),_([T({type:Number,json:{write:!0}})],wa.prototype,"scale",void 0),wa=Px=_([Y("esri.layers.support.LOD")],wa);const Js=wa;let GQ=class{constructor(e,i,n,s,h=void 0){this.id=e,this.level=i,this.row=n,this.col=s,this.extent=h}};var Yc;const hE=new an({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let In=Yc=class extends Fe{static create(t={}){const{resolutionFactor:e=1,scales:i,size:n=256,spatialReference:s=tt.WebMercator,numLODs:h=24}=t;if(!vr(s)){const $=[];if(i)for(let I=0;I<i.length;I++){const P=i[I];$.push(new Js({level:I,scale:P,resolution:P}))}else{let I=5e-4;for(let P=h-1;P>=0;P--)$.unshift(new Js({level:P,scale:I,resolution:I})),I*=2}return new Yc({dpi:96,lods:$,origin:new De(0,0,s),size:[n,n],spatialReference:s})}const f=er(s),m=t.origin?new De({x:t.origin.x,y:t.origin.y,spatialReference:s}):new De(f?{x:f.origin[0],y:f.origin[1],spatialReference:s}:{x:0,y:0,spatialReference:s}),v=96,x=1/(ir(s)*39.37*v),M=[];if(i)for(let $=0;$<i.length;$++){const I=i[$],P=I*x;M.push(new Js({level:$,scale:I,resolution:P}))}else{let $=au(s)?512/n*5916575275917094e-7:256/n*591657527591555e-6;const I=Math.ceil(h/e);M.push(new Js({level:0,scale:$,resolution:$*x}));for(let P=1;P<I;P++){const L=$/2**e,z=L*x;M.push(new Js({level:P,scale:L,resolution:z})),$=L}}return new Yc({dpi:v,lods:M,origin:m,size:[n,n],spatialReference:s})}constructor(t){super(t),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:t,origin:e}=this;if(t&&e){const i=er(t);return t.isWrappable&&!!i&&Math.abs(i.origin[0]-e.x)<=i.dx}return!1}readOrigin(t,e){return De.fromJSON({spatialReference:e.spatialReference,...t})}set lods(t){let e=0,i=0;const n=[],s=this._levelToLOD={};t&&(e=-1/0,i=1/0,t.forEach(h=>{n.push(h.scale),e=h.scale>e?h.scale:e,i=h.scale<i?h.scale:i,s[h.level]=h})),this._set("scales",n),this._set("lods",t),this._initializeUpsampleLevels()}readSize(t,e){return[e.cols,e.rows]}writeSize(t,e){e.cols=t[0],e.rows=t[1]}zoomToScale(t){const e=this.scales;if(t<=0)return e[0];if(t>=e.length-1)return e[e.length-1];const i=Math.floor(t),n=i+1;return e[i]/(e[i]/e[n])**(t-i)}scaleToZoom(t){const e=this.scales,i=e.length-1;let n=0;for(;n<i;n++){const s=e[n],h=e[n+1];if(s<=t)return n;if(h===t)return n+1;if(s>t&&h<t)return n+Math.log(s/t)/Math.log(s/h)}return n}tileAt(t,e,i,n){const s=this.lodAt(t);if(!s)return null;let h,f;if(typeof e=="number")h=e,f=i;else if(bi(e.spatialReference,this.spatialReference))h=e.x,f=e.y,n=i;else{const x=Sw(e,this.spatialReference);if(x==null)return null;h=x.x,f=x.y,n=i}const m=s.resolution*this.size[0],v=s.resolution*this.size[1];return n||(n=new GQ(null,0,0,0,sn())),n.level=t,n.row=Math.floor((this.origin.y-f)/v+.001),n.col=Math.floor((h-this.origin.x)/m+.001),this.updateTileInfo(n),n}updateTileInfo(t,e=Yc.ExtrapolateOptions.NONE){let i=this.lodAt(t.level);if(!i&&e===Yc.ExtrapolateOptions.POWER_OF_TWO){const f=this.lods[this.lods.length-1];f.level<t.level&&(i=f)}if(!i)return;const n=t.level-i.level,s=i.resolution*this.size[0]/2**n,h=i.resolution*this.size[1]/2**n;t.id=`${t.level}/${t.row}/${t.col}`,t.extent||(t.extent=sn()),t.extent[0]=this.origin.x+t.col*s,t.extent[1]=this.origin.y-(t.row+1)*h,t.extent[2]=t.extent[0]+s,t.extent[3]=t.extent[1]+h}upsampleTile(t){const e=this._upsampleLevels[t.level];return!(!e||e.parentLevel===-1)&&(t.level=e.parentLevel,t.row=Math.floor(t.row/e.factor+.001),t.col=Math.floor(t.col/e.factor+.001),this.updateTileInfo(t),!0)}getTileBounds(t,e){const i=this.lodAt(e.level);if(i==null)return null;const{resolution:n}=i,s=n*this.size[0],h=n*this.size[1];return t[0]=this.origin.x+e.col*s,t[1]=this.origin.y-(e.row+1)*h,t[2]=t[0]+s,t[3]=t[1]+h,t}lodAt(t){var e;return((e=this._levelToLOD)==null?void 0:e[t])??null}clone(){return Yc.fromJSON(this.write({}))}getCompatibleForVTL(t){if(this.size[0]!==this.size[1]||this.size[0]===256&&t===512)return null;const e=(this.size[0]===512&&t===256?-1:0)+(this.spatialReference.isGeographic?1:0);if(this.size[0]===t&&e===0)return this;const i=[],n=this.lods.length-e;for(let s=0;s<n;s++){const h=s+e,{scale:f,resolution:m}=h>=0?this.lods[h]:{scale:2*this.lods[0].scale,resolution:2*this.lods[0].resolution};i.push(new Js({level:s,scale:f,resolution:m}))}return new Yc({size:[t,t],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:i})}_initializeUpsampleLevels(){const t=this.lods;this._upsampleLevels=[];let e=null;for(let i=0;i<t.length;i++){const n=t[i];this._upsampleLevels[n.level]={parentLevel:e?e.level:-1,factor:e?e.resolution/n.resolution:0},e=n}}};_([T({type:Number,json:{write:!0}})],In.prototype,"compressionQuality",void 0),_([T({type:Number,json:{write:!0}})],In.prototype,"dpi",void 0),_([T({type:String,json:{read:hE.read,write:hE.write,origins:{"web-scene":{read:!1,write:!1}}}})],In.prototype,"format",void 0),_([T({readOnly:!0})],In.prototype,"isWrappable",null),_([T({type:De,json:{write:!0}})],In.prototype,"origin",void 0),_([Ct("origin")],In.prototype,"readOrigin",null),_([T({type:[Js],value:null,json:{write:!0}})],In.prototype,"lods",null),_([T({readOnly:!0})],In.prototype,"scales",void 0),_([T({cast:t=>Array.isArray(t)?t:typeof t=="number"?[t,t]:[256,256]})],In.prototype,"size",void 0),_([Ct("size",["rows","cols"])],In.prototype,"readSize",null),_([_t("size",{cols:{type:Ii},rows:{type:Ii}})],In.prototype,"writeSize",null),_([T({type:tt,json:{write:!0}})],In.prototype,"spatialReference",void 0),In=Yc=_([Y("esri.layers.support.TileInfo")],In),function(t){var e;(e=t.ExtrapolateOptions||(t.ExtrapolateOptions={}))[e.NONE=0]="NONE",e[e.POWER_OF_TWO=1]="POWER_OF_TWO"}(In||(In={}));const bg=In,jv={widthBreakpoint:{getValue(t){const e=t.viewSize[0],i=t.breakpoints,n=this.values;return e<=i.xsmall?n.xsmall:e<=i.small?n.small:e<=i.medium?n.medium:e<=i.large?n.large:n.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(t){const e=t.viewSize[1],i=t.breakpoints,n=this.values;return e<=i.xsmall?n.xsmall:e<=i.small?n.small:e<=i.medium?n.medium:e<=i.large?n.large:n.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(t){const e=t.viewSize,i=e[0],n=e[1],s=this.values;return n>=i?s.portrait:s.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},y_={xsmall:544,small:768,medium:992,large:1200};function VQ(t){const e=t;return e&&e.xsmall<e.small&&e.small<e.medium&&e.medium<e.large}function v_(t,e){return e?jv[t].valueToClassName[e].split(" "):[]}const HQ=t=>{let e=class extends t{constructor(...i){super(...i),this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=y_}initialize(){this.addHandles(Ee(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),Pt))}destroy(){this.destroyed||this._removeActiveClassNames()}set breakpoints(i){if(i!==this._get("breakpoints")){if(!VQ(i)){const n=JSON.stringify(y_,null,2);console.warn("provided breakpoints are not valid, using defaults:"+n),i=y_}this._set("breakpoints",{...i})}}_updateClassNames(){if(!this.container)return;const i=mr.acquire(),n=mr.acquire();let s,h=!1;for(s in jv){const f=this[s],m=jv[s].getValue({viewSize:this.size,breakpoints:this.breakpoints});f!==m&&(h=!0,this[s]=m,v_(s,f).forEach(v=>n.push(v)),v_(s,m).forEach(v=>i.push(v)))}h&&(this._applyClassNameChanges(i,n),mr.release(i),mr.release(n))}_applyClassNameChanges(i,n){const s=this.container;s&&(n.forEach(h=>s.classList.remove(h)),i.forEach(h=>s.classList.add(h)))}_removeActiveClassNames(){const i=this.container;if(!i)return;let n;for(n in jv)v_(n,this[n]).forEach(s=>i.classList.remove(s))}};return _([T()],e.prototype,"breakpoints",null),_([T()],e.prototype,"orientation",void 0),_([T()],e.prototype,"widthBreakpoint",void 0),_([T()],e.prototype,"heightBreakpoint",void 0),e=_([Y("esri.views.BreakpointsOwner")],e),e};function qS(t){return typeof t=="string"?document.getElementById(t):t??null}function sL(t){for(;t.hasChildNodes();)t.removeChild(t.firstChild)}function uE(t,e){const i=e.parentNode;i&&i.insertBefore(t,e)}function dE(t,e){for(;;){const i=t.firstChild;if(!i)break;e.appendChild(i)}}let uc=class extends Re{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll()}add(e,i,n={}){return this._installWatch(e,i,n,Ee)}addWhen(e,i,n={}){return this._installWatch(e,i,n,nr)}addOnCollectionChange(e,i,{initial:n=!1,final:s=!1}={}){const h=++this._handleId;return this.addHandles([Es(e,"after-changes",this._createSyncUpdatingCallback(),Ya),Es(e,"change",i,{onListenerAdd:n?f=>i({added:f.toArray(),removed:[]}):void 0,onListenerRemove:s?f=>i({added:[],removed:f.toArray()}):void 0})],h),ut(()=>this.removeHandles(h))}addPromise(e){if(e==null)return e;const i=++this._handleId;this.addHandles(ut(()=>{this._pendingPromises.delete(e)&&(this._pendingPromises.size!==0||this.hasHandles(Ty)||this._set("updating",!1))}),i),this._pendingPromises.add(e),this._set("updating",!0);const n=()=>this.removeHandles(i);return e.then(n,n),e}removeAll(){this._pendingPromises.clear(),this.removeAllHandles(),this._set("updating",!1)}_installWatch(e,i,n={},s){const h=++this._handleId;n.sync||this._installSyncUpdatingWatch(e,h);const f=s(e,i,n);return this.addHandles(f,h),ut(()=>this.removeHandles(h))}_installSyncUpdatingWatch(e,i){const n=this._createSyncUpdatingCallback(),s=Ee(e,n,{sync:!0,equals:()=>!1});return this.addHandles(s,i),s}_createSyncUpdatingCallback(){return()=>{this.removeHandles(Ty),++this._scheduleHandleId;const e=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this.addHandles(wm(()=>{e===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this.removeHandles(Ty))}),Ty)}}};_([T({readOnly:!0})],uc.prototype,"updating",void 0),uc=_([Y("esri.core.support.UpdatingHandles")],uc);const Ty=-42;/*!
 * @esri/arcgis-html-sanitizer - v4.0.3 - Wed Jul 03 2024 17:50:35 GMT-0400 (Eastern Daylight Time)
 * Copyright (c) 2024 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei(é›·å®—æ°‘) <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var d2=function(){return d2=Object.assign||function(e){for(var i,n=1,s=arguments.length;n<s;n++){i=arguments[n];for(var h in i)Object.prototype.hasOwnProperty.call(i,h)&&(e[h]=i[h])}return e},d2.apply(this,arguments)},Rx={exports:{}},Oi={},Lx={exports:{}},ip={};function oL(){var t={};return t["align-content"]=!1,t["align-items"]=!1,t["align-self"]=!1,t["alignment-adjust"]=!1,t["alignment-baseline"]=!1,t.all=!1,t["anchor-point"]=!1,t.animation=!1,t["animation-delay"]=!1,t["animation-direction"]=!1,t["animation-duration"]=!1,t["animation-fill-mode"]=!1,t["animation-iteration-count"]=!1,t["animation-name"]=!1,t["animation-play-state"]=!1,t["animation-timing-function"]=!1,t.azimuth=!1,t["backface-visibility"]=!1,t.background=!0,t["background-attachment"]=!0,t["background-clip"]=!0,t["background-color"]=!0,t["background-image"]=!0,t["background-origin"]=!0,t["background-position"]=!0,t["background-repeat"]=!0,t["background-size"]=!0,t["baseline-shift"]=!1,t.binding=!1,t.bleed=!1,t["bookmark-label"]=!1,t["bookmark-level"]=!1,t["bookmark-state"]=!1,t.border=!0,t["border-bottom"]=!0,t["border-bottom-color"]=!0,t["border-bottom-left-radius"]=!0,t["border-bottom-right-radius"]=!0,t["border-bottom-style"]=!0,t["border-bottom-width"]=!0,t["border-collapse"]=!0,t["border-color"]=!0,t["border-image"]=!0,t["border-image-outset"]=!0,t["border-image-repeat"]=!0,t["border-image-slice"]=!0,t["border-image-source"]=!0,t["border-image-width"]=!0,t["border-left"]=!0,t["border-left-color"]=!0,t["border-left-style"]=!0,t["border-left-width"]=!0,t["border-radius"]=!0,t["border-right"]=!0,t["border-right-color"]=!0,t["border-right-style"]=!0,t["border-right-width"]=!0,t["border-spacing"]=!0,t["border-style"]=!0,t["border-top"]=!0,t["border-top-color"]=!0,t["border-top-left-radius"]=!0,t["border-top-right-radius"]=!0,t["border-top-style"]=!0,t["border-top-width"]=!0,t["border-width"]=!0,t.bottom=!1,t["box-decoration-break"]=!0,t["box-shadow"]=!0,t["box-sizing"]=!0,t["box-snap"]=!0,t["box-suppress"]=!0,t["break-after"]=!0,t["break-before"]=!0,t["break-inside"]=!0,t["caption-side"]=!1,t.chains=!1,t.clear=!0,t.clip=!1,t["clip-path"]=!1,t["clip-rule"]=!1,t.color=!0,t["color-interpolation-filters"]=!0,t["column-count"]=!1,t["column-fill"]=!1,t["column-gap"]=!1,t["column-rule"]=!1,t["column-rule-color"]=!1,t["column-rule-style"]=!1,t["column-rule-width"]=!1,t["column-span"]=!1,t["column-width"]=!1,t.columns=!1,t.contain=!1,t.content=!1,t["counter-increment"]=!1,t["counter-reset"]=!1,t["counter-set"]=!1,t.crop=!1,t.cue=!1,t["cue-after"]=!1,t["cue-before"]=!1,t.cursor=!1,t.direction=!1,t.display=!0,t["display-inside"]=!0,t["display-list"]=!0,t["display-outside"]=!0,t["dominant-baseline"]=!1,t.elevation=!1,t["empty-cells"]=!1,t.filter=!1,t.flex=!1,t["flex-basis"]=!1,t["flex-direction"]=!1,t["flex-flow"]=!1,t["flex-grow"]=!1,t["flex-shrink"]=!1,t["flex-wrap"]=!1,t.float=!1,t["float-offset"]=!1,t["flood-color"]=!1,t["flood-opacity"]=!1,t["flow-from"]=!1,t["flow-into"]=!1,t.font=!0,t["font-family"]=!0,t["font-feature-settings"]=!0,t["font-kerning"]=!0,t["font-language-override"]=!0,t["font-size"]=!0,t["font-size-adjust"]=!0,t["font-stretch"]=!0,t["font-style"]=!0,t["font-synthesis"]=!0,t["font-variant"]=!0,t["font-variant-alternates"]=!0,t["font-variant-caps"]=!0,t["font-variant-east-asian"]=!0,t["font-variant-ligatures"]=!0,t["font-variant-numeric"]=!0,t["font-variant-position"]=!0,t["font-weight"]=!0,t.grid=!1,t["grid-area"]=!1,t["grid-auto-columns"]=!1,t["grid-auto-flow"]=!1,t["grid-auto-rows"]=!1,t["grid-column"]=!1,t["grid-column-end"]=!1,t["grid-column-start"]=!1,t["grid-row"]=!1,t["grid-row-end"]=!1,t["grid-row-start"]=!1,t["grid-template"]=!1,t["grid-template-areas"]=!1,t["grid-template-columns"]=!1,t["grid-template-rows"]=!1,t["hanging-punctuation"]=!1,t.height=!0,t.hyphens=!1,t.icon=!1,t["image-orientation"]=!1,t["image-resolution"]=!1,t["ime-mode"]=!1,t["initial-letters"]=!1,t["inline-box-align"]=!1,t["justify-content"]=!1,t["justify-items"]=!1,t["justify-self"]=!1,t.left=!1,t["letter-spacing"]=!0,t["lighting-color"]=!0,t["line-box-contain"]=!1,t["line-break"]=!1,t["line-grid"]=!1,t["line-height"]=!1,t["line-snap"]=!1,t["line-stacking"]=!1,t["line-stacking-ruby"]=!1,t["line-stacking-shift"]=!1,t["line-stacking-strategy"]=!1,t["list-style"]=!0,t["list-style-image"]=!0,t["list-style-position"]=!0,t["list-style-type"]=!0,t.margin=!0,t["margin-bottom"]=!0,t["margin-left"]=!0,t["margin-right"]=!0,t["margin-top"]=!0,t["marker-offset"]=!1,t["marker-side"]=!1,t.marks=!1,t.mask=!1,t["mask-box"]=!1,t["mask-box-outset"]=!1,t["mask-box-repeat"]=!1,t["mask-box-slice"]=!1,t["mask-box-source"]=!1,t["mask-box-width"]=!1,t["mask-clip"]=!1,t["mask-image"]=!1,t["mask-origin"]=!1,t["mask-position"]=!1,t["mask-repeat"]=!1,t["mask-size"]=!1,t["mask-source-type"]=!1,t["mask-type"]=!1,t["max-height"]=!0,t["max-lines"]=!1,t["max-width"]=!0,t["min-height"]=!0,t["min-width"]=!0,t["move-to"]=!1,t["nav-down"]=!1,t["nav-index"]=!1,t["nav-left"]=!1,t["nav-right"]=!1,t["nav-up"]=!1,t["object-fit"]=!1,t["object-position"]=!1,t.opacity=!1,t.order=!1,t.orphans=!1,t.outline=!1,t["outline-color"]=!1,t["outline-offset"]=!1,t["outline-style"]=!1,t["outline-width"]=!1,t.overflow=!1,t["overflow-wrap"]=!1,t["overflow-x"]=!1,t["overflow-y"]=!1,t.padding=!0,t["padding-bottom"]=!0,t["padding-left"]=!0,t["padding-right"]=!0,t["padding-top"]=!0,t.page=!1,t["page-break-after"]=!1,t["page-break-before"]=!1,t["page-break-inside"]=!1,t["page-policy"]=!1,t.pause=!1,t["pause-after"]=!1,t["pause-before"]=!1,t.perspective=!1,t["perspective-origin"]=!1,t.pitch=!1,t["pitch-range"]=!1,t["play-during"]=!1,t.position=!1,t["presentation-level"]=!1,t.quotes=!1,t["region-fragment"]=!1,t.resize=!1,t.rest=!1,t["rest-after"]=!1,t["rest-before"]=!1,t.richness=!1,t.right=!1,t.rotation=!1,t["rotation-point"]=!1,t["ruby-align"]=!1,t["ruby-merge"]=!1,t["ruby-position"]=!1,t["shape-image-threshold"]=!1,t["shape-outside"]=!1,t["shape-margin"]=!1,t.size=!1,t.speak=!1,t["speak-as"]=!1,t["speak-header"]=!1,t["speak-numeral"]=!1,t["speak-punctuation"]=!1,t["speech-rate"]=!1,t.stress=!1,t["string-set"]=!1,t["tab-size"]=!1,t["table-layout"]=!1,t["text-align"]=!0,t["text-align-last"]=!0,t["text-combine-upright"]=!0,t["text-decoration"]=!0,t["text-decoration-color"]=!0,t["text-decoration-line"]=!0,t["text-decoration-skip"]=!0,t["text-decoration-style"]=!0,t["text-emphasis"]=!0,t["text-emphasis-color"]=!0,t["text-emphasis-position"]=!0,t["text-emphasis-style"]=!0,t["text-height"]=!0,t["text-indent"]=!0,t["text-justify"]=!0,t["text-orientation"]=!0,t["text-overflow"]=!0,t["text-shadow"]=!0,t["text-space-collapse"]=!0,t["text-transform"]=!0,t["text-underline-position"]=!0,t["text-wrap"]=!0,t.top=!1,t.transform=!1,t["transform-origin"]=!1,t["transform-style"]=!1,t.transition=!1,t["transition-delay"]=!1,t["transition-duration"]=!1,t["transition-property"]=!1,t["transition-timing-function"]=!1,t["unicode-bidi"]=!1,t["vertical-align"]=!1,t.visibility=!1,t["voice-balance"]=!1,t["voice-duration"]=!1,t["voice-family"]=!1,t["voice-pitch"]=!1,t["voice-range"]=!1,t["voice-rate"]=!1,t["voice-stress"]=!1,t["voice-volume"]=!1,t.volume=!1,t["white-space"]=!1,t.widows=!1,t.width=!0,t["will-change"]=!1,t["word-break"]=!0,t["word-spacing"]=!0,t["word-wrap"]=!0,t["wrap-flow"]=!1,t["wrap-through"]=!1,t["writing-mode"]=!1,t["z-index"]=!1,t}function BQ(t,e,i){}function UQ(t,e,i){}var qQ=/javascript\s*\:/img;function WQ(t,e){return qQ.test(e)?"":e}ip.whiteList=oL();ip.getDefaultWhiteList=oL;ip.onAttr=BQ;ip.onIgnoreAttr=UQ;ip.safeAttrValue=WQ;var ZQ={indexOf:function(t,e){var i,n;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var n,s;if(Array.prototype.forEach)return t.forEach(e,i);for(n=0,s=t.length;n<s;n++)e.call(i,t[n],n,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(t){return String.prototype.trimRight?t.trimRight():t.replace(/(\s*$)/g,"")}},K0=ZQ;function JQ(t,e){t=K0.trimRight(t),t[t.length-1]!==";"&&(t+=";");var i=t.length,n=!1,s=0,h=0,f="";function m(){if(!n){var M=K0.trim(t.slice(s,h)),$=M.indexOf(":");if($!==-1){var I=K0.trim(M.slice(0,$)),P=K0.trim(M.slice($+1));if(I){var L=e(s,f.length,I,P,M);L&&(f+=L+"; ")}}}s=h+1}for(;h<i;h++){var v=t[h];if(v==="/"&&t[h+1]==="*"){var x=t.indexOf("*/",h+2);if(x===-1)break;h=x+1,s=h+1,n=!1}else v==="("?n=!0:v===")"?n=!1:v===";"?n||m():v===`
`&&m()}return K0.trim(f)}var KQ=JQ,My=ip,YQ=KQ;function pE(t){return t==null}function XQ(t){var e={};for(var i in t)e[i]=t[i];return e}function aL(t){t=XQ(t||{}),t.whiteList=t.whiteList||My.whiteList,t.onAttr=t.onAttr||My.onAttr,t.onIgnoreAttr=t.onIgnoreAttr||My.onIgnoreAttr,t.safeAttrValue=t.safeAttrValue||My.safeAttrValue,this.options=t}aL.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,n=i.whiteList,s=i.onAttr,h=i.onIgnoreAttr,f=i.safeAttrValue,m=YQ(t,function(v,x,M,$,I){var P=n[M],L=!1;if(P===!0?L=P:typeof P=="function"?L=P($):P instanceof RegExp&&(L=P.test($)),L!==!0&&(L=!1),$=f(M,$),!!$){var z={position:x,sourcePosition:v,source:I,isWhite:L};if(L){var F=s(M,$,z);return pE(F)?M+":"+$:F}else{var F=h(M,$,z);if(!pE(F))return F}}});return m};var QQ=aL;(function(t,e){var i=ip,n=QQ;function s(f,m){var v=new n(m);return v.process(f)}e=t.exports=s,e.FilterCSS=n;for(var h in i)e[h]=i[h]})(Lx,Lx.exports);var WS=Lx.exports,ZS={indexOf:function(t,e){var i,n;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var n,s;if(Array.prototype.forEach)return t.forEach(e,i);for(n=0,s=t.length;n<s;n++)e.call(i,t[n],n,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(t){var e=/\s|\n|\t/,i=e.exec(t);return i?i.index:-1}},eee=WS.FilterCSS,tee=WS.getDefaultWhiteList,p2=ZS;function lL(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var cL=new eee;function iee(t,e,i){}function nee(t,e,i){}function ree(t,e,i){}function see(t,e,i){}function hL(t){return t.replace(aee,"&lt;").replace(lee,"&gt;")}function oee(t,e,i,n){if(i=mL(i),e==="href"||e==="src"){if(i=p2.trim(i),i==="#")return"#";if(!(i.substr(0,7)==="http://"||i.substr(0,8)==="https://"||i.substr(0,7)==="mailto:"||i.substr(0,4)==="tel:"||i.substr(0,11)==="data:image/"||i.substr(0,6)==="ftp://"||i.substr(0,2)==="./"||i.substr(0,3)==="../"||i[0]==="#"||i[0]==="/"))return""}else if(e==="background"){if(Ey.lastIndex=0,Ey.test(i))return""}else if(e==="style"){if(fE.lastIndex=0,fE.test(i)||(gE.lastIndex=0,gE.test(i)&&(Ey.lastIndex=0,Ey.test(i))))return"";n!==!1&&(n=n||cL,i=n.process(i))}return i=yL(i),i}var aee=/</g,lee=/>/g,cee=/"/g,hee=/&quot;/g,uee=/&#([a-zA-Z0-9]*);?/gim,dee=/&colon;?/gim,pee=/&newline;?/gim,Ey=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,fE=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,gE=/u\s*r\s*l\s*\(.*/gi;function uL(t){return t.replace(cee,"&quot;")}function dL(t){return t.replace(hee,'"')}function pL(t){return t.replace(uee,function(i,n){return n[0]==="x"||n[0]==="X"?String.fromCharCode(parseInt(n.substr(1),16)):String.fromCharCode(parseInt(n,10))})}function fL(t){return t.replace(dee,":").replace(pee," ")}function gL(t){for(var e="",i=0,n=t.length;i<n;i++)e+=t.charCodeAt(i)<32?" ":t.charAt(i);return p2.trim(e)}function mL(t){return t=dL(t),t=pL(t),t=fL(t),t=gL(t),t}function yL(t){return t=uL(t),t=hL(t),t}function fee(){return""}function gee(t,e){typeof e!="function"&&(e=function(){});var i=!Array.isArray(t);function n(f){return i?!0:p2.indexOf(t,f)!==-1}var s=[],h=!1;return{onIgnoreTag:function(f,m,v){if(n(f))if(v.isClosing){var x="[/removed]",M=v.position+x.length;return s.push([h!==!1?h:v.position,M]),h=!1,x}else return h||(h=v.position),"[removed]";else return e(f,m,v)},remove:function(f){var m="",v=0;return p2.forEach(s,function(x){m+=f.slice(v,x[0]),v=x[1]}),m+=f.slice(v),m}}}function mee(t){for(var e="",i=0;i<t.length;){var n=t.indexOf("<!--",i);if(n===-1){e+=t.slice(i);break}e+=t.slice(i,n);var s=t.indexOf("-->",n);if(s===-1)break;i=s+3}return e}function yee(t){var e=t.split("");return e=e.filter(function(i){var n=i.charCodeAt(0);return n===127?!1:n<=31?n===10||n===13:!0}),e.join("")}Oi.whiteList=lL();Oi.getDefaultWhiteList=lL;Oi.onTag=iee;Oi.onIgnoreTag=nee;Oi.onTagAttr=ree;Oi.onIgnoreTagAttr=see;Oi.safeAttrValue=oee;Oi.escapeHtml=hL;Oi.escapeQuote=uL;Oi.unescapeQuote=dL;Oi.escapeHtmlEntities=pL;Oi.escapeDangerHtml5Entities=fL;Oi.clearNonPrintableCharacter=gL;Oi.friendlyAttrValue=mL;Oi.escapeAttrValue=yL;Oi.onIgnoreTagStripAll=fee;Oi.StripTagBody=gee;Oi.stripCommentTag=mee;Oi.stripBlankChar=yee;Oi.cssFilter=cL;Oi.getDefaultCSSWhiteList=tee;var zw={},Eh=ZS;function vee(t){var e=Eh.spaceIndex(t),i;return e===-1?i=t.slice(1,-1):i=t.slice(1,e+1),i=Eh.trim(i).toLowerCase(),i.slice(0,1)==="/"&&(i=i.slice(1)),i.slice(-1)==="/"&&(i=i.slice(0,-1)),i}function bee(t){return t.slice(0,2)==="</"}function wee(t,e,i){var n="",s=0,h=!1,f=!1,m=0,v=t.length,x="",M="";e:for(m=0;m<v;m++){var $=t.charAt(m);if(h===!1){if($==="<"){h=m;continue}}else if(f===!1){if($==="<"){n+=i(t.slice(s,m)),h=m,s=m;continue}if($===">"){n+=i(t.slice(s,h)),M=t.slice(h,m+1),x=vee(M),n+=e(h,n.length,x,M,bee(M)),s=m+1,h=!1;continue}if($==='"'||$==="'")for(var I=1,P=t.charAt(m-I);P.trim()===""||P==="=";){if(P==="="){f=$;continue e}P=t.charAt(m-++I)}}else if($===f){f=!1;continue}}return s<t.length&&(n+=i(t.substr(s))),n}var _ee=/[^a-zA-Z0-9\\_:.-]/gim;function xee(t,e){var i=0,n=0,s=[],h=!1,f=t.length;function m(I,P){if(I=Eh.trim(I),I=I.replace(_ee,"").toLowerCase(),!(I.length<1)){var L=e(I,P||"");L&&s.push(L)}}for(var v=0;v<f;v++){var x=t.charAt(v),M,$;if(h===!1&&x==="="){h=t.slice(i,v),i=v+1,n=t.charAt(i)==='"'||t.charAt(i)==="'"?i:Tee(t,v+1);continue}if(h!==!1&&v===n){if($=t.indexOf(x,v+1),$===-1)break;M=Eh.trim(t.slice(n+1,$)),m(h,M),h=!1,v=$,i=v+1;continue}if(/\s|\n|\t/.test(x))if(t=t.replace(/\s|\n|\t/g," "),h===!1)if($=See(t,v),$===-1){M=Eh.trim(t.slice(i,v)),m(M),h=!1,i=v+1;continue}else{v=$-1;continue}else if($=Mee(t,v-1),$===-1){M=Eh.trim(t.slice(i,v)),M=mE(M),m(h,M),h=!1,i=v+1;continue}else continue}return i<t.length&&(h===!1?m(t.slice(i)):m(h,mE(Eh.trim(t.slice(i))))),Eh.trim(s.join(" "))}function See(t,e){for(;e<t.length;e++){var i=t[e];if(i!==" ")return i==="="?e:-1}}function Tee(t,e){for(;e<t.length;e++){var i=t[e];if(i!==" ")return i==="'"||i==='"'?e:-1}}function Mee(t,e){for(;e>0;e--){var i=t[e];if(i!==" ")return i==="="?e:-1}}function Eee(t){return t[0]==='"'&&t[t.length-1]==='"'||t[0]==="'"&&t[t.length-1]==="'"}function mE(t){return Eee(t)?t.substr(1,t.length-2):t}zw.parseTag=wee;zw.parseAttr=xee;var kee=WS.FilterCSS,Vo=Oi,vL=zw,$ee=vL.parseTag,Cee=vL.parseAttr,Gv=ZS;function ky(t){return t==null}function Iee(t){var e=Gv.spaceIndex(t);if(e===-1)return{html:"",closing:t[t.length-2]==="/"};t=Gv.trim(t.slice(e+1,-1));var i=t[t.length-1]==="/";return i&&(t=Gv.trim(t.slice(0,-1))),{html:t,closing:i}}function Aee(t){var e={};for(var i in t)e[i]=t[i];return e}function Oee(t){var e={};for(var i in t)Array.isArray(t[i])?e[i.toLowerCase()]=t[i].map(function(n){return n.toLowerCase()}):e[i.toLowerCase()]=t[i];return e}function bL(t){t=Aee(t||{}),t.stripIgnoreTag&&(t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),t.onIgnoreTag=Vo.onIgnoreTagStripAll),t.whiteList||t.allowList?t.whiteList=Oee(t.whiteList||t.allowList):t.whiteList=Vo.whiteList,t.onTag=t.onTag||Vo.onTag,t.onTagAttr=t.onTagAttr||Vo.onTagAttr,t.onIgnoreTag=t.onIgnoreTag||Vo.onIgnoreTag,t.onIgnoreTagAttr=t.onIgnoreTagAttr||Vo.onIgnoreTagAttr,t.safeAttrValue=t.safeAttrValue||Vo.safeAttrValue,t.escapeHtml=t.escapeHtml||Vo.escapeHtml,this.options=t,t.css===!1?this.cssFilter=!1:(t.css=t.css||{},this.cssFilter=new kee(t.css))}bL.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,n=i.whiteList,s=i.onTag,h=i.onIgnoreTag,f=i.onTagAttr,m=i.onIgnoreTagAttr,v=i.safeAttrValue,x=i.escapeHtml,M=e.cssFilter;i.stripBlankChar&&(t=Vo.stripBlankChar(t)),i.allowCommentTag||(t=Vo.stripCommentTag(t));var $=!1;i.stripIgnoreTagBody&&($=Vo.StripTagBody(i.stripIgnoreTagBody,h),h=$.onIgnoreTag);var I=$ee(t,function(P,L,z,F,U){var W={sourcePosition:P,position:L,isClosing:U,isWhite:Object.prototype.hasOwnProperty.call(n,z)},K=s(z,F,W);if(!ky(K))return K;if(W.isWhite){if(W.isClosing)return"</"+z+">";var J=Iee(F),te=n[z],ie=Cee(J.html,function(le,de){var xe=Gv.indexOf(te,le)!==-1,we=f(z,le,de,xe);return ky(we)?xe?(de=v(z,le,de,M),de?le+'="'+de+'"':le):(we=m(z,le,de,xe),ky(we)?void 0:we):we});return F="<"+z,ie&&(F+=" "+ie),J.closing&&(F+=" /"),F+=">",F}else return K=h(z,F,W),ky(K)?x(F):K},x);return $&&(I=$.remove(I)),I};var Pee=bL;(function(t,e){var i=Oi,n=zw,s=Pee;function h(m,v){var x=new s(v);return x.process(m)}e=t.exports=h,e.filterXSS=h,e.FilterXSS=s,function(){for(var m in i)e[m]=i[m];for(var v in n)e[v]=n[v]}();function f(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}f()&&(self.filterXSS=t.exports)})(Rx,Rx.exports);var wp=Rx.exports,Ree=function(t){if(typeof t!="object"||t===null||Object.prototype.toString.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},Lee=function(){function t(e,i){var n=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],article:["style"],aside:["style"],audio:["autoplay","controls","loop","muted","preload"],b:[],blockquote:["style"],br:[],code:["style"],dd:["style"],details:["style"],div:["align","style","aria-label","aria-hidden"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],footer:["style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],header:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],main:["style"],mark:["style"],nav:["style"],ol:[],p:["style"],pre:["style"],section:["style"],source:["media","src","type"],span:["style"],strong:[],sub:["style"],summary:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],time:["style"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.arcgisCSSWhiteList=d2(d2({},wp.getDefaultCSSWhiteList()),{flex:!0,"flex-basis":!0,"flex-direction":!0,"flex-flow":!0,"flex-grow":!0,"flex-shrink":!0,"flex-wrap":!0,"line-height":!0,"justify-content":!0,overflow:!0}),this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(h,f,m,v){return h==="a"&&f==="href"||(h==="img"||h==="source")&&f==="src"?n.sanitizeUrl(m):wp.safeAttrValue(h,f,m,v)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var s;e&&!i?s=e:e&&i?(s=Object.create(this.arcgisFilterOptions),s.css={whiteList:this.arcgisCSSWhiteList},Object.keys(e).forEach(function(h){if(h==="whiteList")s.whiteList=n._extendObjectOfArrays([n.arcgisWhiteList,e.whiteList||{}]);else if(h==="css"){var f=e.css.whiteList;f!=null&&e.css instanceof Object&&Object.keys(f).forEach(function(m){return s.css.whiteList[m]=f[m]})}else s[h]=e[h]})):(s=Object.create(this.arcgisFilterOptions),s.whiteList=this.arcgisWhiteList,s.css={whiteList:this.arcgisCSSWhiteList}),this.xssFilterOptions=s,this._xssFilter=new wp.FilterXSS(s)}return t.prototype.sanitize=function(e,i){switch(i===void 0&&(i={}),typeof e){case"number":return isNaN(e)||!isFinite(e)?null:e;case"boolean":return e;case"string":return this._xssFilter.process(e);case"object":return this._iterateOverObject(e,i);default:return i.allowUndefined&&typeof e>"u"?void 0:null}},t.prototype.sanitizeUrl=function(e,i){var n=(i??{}).isProtocolRequired,s=n===void 0?!0:n,h=this._trim(e.substring(0,e.indexOf(":"))),f=e==="/",m=/^#/.test(e),v=h&&this.allowedProtocols.indexOf(h.toLowerCase())>-1;return f||m||v?wp.escapeAttrValue(e):!h&&!s?wp.escapeAttrValue("https://".concat(e)):""},t.prototype.sanitizeHTMLAttribute=function(e,i,n,s){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(e,i,n,s):wp.safeAttrValue(e,i,n,s)},t.prototype.validate=function(e,i){i===void 0&&(i={});var n=this.sanitize(e,i);return{isValid:e===n,sanitized:n}},t.prototype.encodeHTML=function(e){var i=this;return String(e).replace(/[&<>"'\/]/g,function(n){return i._entityMap[n]})},t.prototype.encodeAttrValue=function(e){var i=/^[a-zA-Z0-9]$/;return String(e).replace(/[\x00-\xFF]/g,function(n,s){return i.test(n)?n:"&#x".concat(Number(e.charCodeAt(s)).toString(16),";")})},t.prototype._extendObjectOfArrays=function(e){var i={};return e.forEach(function(n){Object.keys(n).forEach(function(s){Array.isArray(n[s])&&Array.isArray(i[s])?i[s]=i[s].concat(n[s]):i[s]=n[s]})}),i},t.prototype._iterateOverObject=function(e,i){var n=this;i===void 0&&(i={});try{var s=!1,h=void 0;if(Array.isArray(e))h=e.reduce(function(m,v){var x=n.validate(v,i);return x.isValid?m.concat([v]):(s=!0,m.concat([x.sanitized]))},[]);else if(Ree(e)){var f=Object.keys(e);h=f.reduce(function(m,v){var x=e[v],M=n.validate(x,i);return M.isValid?m[v]=x:(s=!0,m[v]=M.sanitized),m},{})}else return i.allowUndefined&&typeof e>"u"?void 0:null;return s?h:e}catch{return null}},t.prototype._trim=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},t}();const Fw=new Map;function wL(){Fw.clear()}function Nee(t){return Fw.get(t)}function Dee(t,e){Fw.set(t,e)}function b_(t){Fw.delete(t)}function _L(...t){const e=mr.acquire();for(let n=0;n<t.length;n++){const s=t[n],h=typeof s;if(h==="string")e.push(s);else if(Array.isArray(s))e.push.apply(e,s);else if(h==="object")for(const f in s)s[f]&&e.push(f)}const i=e.join(" ");return mr.release(e),i}const zee=(()=>{const t=new Map,e=new ResizeObserver(n=>{var s;wL();for(const h of n)(s=t.get(h.target))==null||s(h)}),i=(n,s,h)=>(t.set(n,s),e.observe(n,h),ut(()=>{e.unobserve(n),t.delete(n)}));return(n,s,h)=>{let f=null;return Sc([Ee(()=>typeof n=="function"?n():n,m=>{f==null||f.remove(),m&&(f=i(m,s,h))},xi),ut(()=>f==null?void 0:f.remove())])}})();function Nx(t){const e=t==null?void 0:t.closest("[dir]");return e!==null&&e instanceof HTMLElement&&e.dir==="rtl"||document.dir==="rtl"}function _6e(t){const e="data-node-ref";this[t.getAttribute(e)]=null}function $y(t){const e="data-node-ref";this[t.getAttribute(e)]=t}const Fee=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],jee=Fee.reduce((t,e)=>(t[e]=[],t),{}),Gee=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],xL=new Lee({whiteList:jee,onTagAttr:(t,e,i)=>{const n=`${e}="${i}"`;if(Gee.includes(e))return n},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function Vee(t,e){const i=t.getBoundingClientRect(),n=e.getBoundingClientRect(),s=i.top+i.height,h=n.top+n.height,f=i.top,m=n.top;(s>h||f<m)&&t.scrollIntoView({block:"end"})}function SL(t){return t==="Enter"||t===" "}function Hee(t){return Object.values(t).includes(!0)}const TL="http://www.w3.org/",jw=`${TL}2000/svg`,ML=`${TL}1999/xlink`;let yE=[],JS=(t,e)=>{let i={};return Object.keys(t).forEach(n=>{i[n]=t[n]}),e&&Object.keys(e).forEach(n=>{i[n]=e[n]}),i},KS=(t,e)=>t.vnodeSelector===e.vnodeSelector&&(t.properties&&e.properties?t.properties.key===e.properties.key&&t.properties.bind===e.properties.bind:!t.properties&&!e.properties),EL=t=>{if(typeof t!="string")throw new Error("Style values must be strings")},Bee=(t,e,i)=>{if(e.vnodeSelector!==""){for(let n=i;n<t.length;n++)if(KS(t[n],e))return n}return-1},w_=(t,e,i,n)=>{let s=t[e];if(s.vnodeSelector==="")return;let h=s.properties;if(!(h&&(h.key===void 0?h.bind:h.key))){for(let f=0;f<t.length;f++)if(f!==e){let m=t[f];if(KS(m,s))throw new Error(`${i.vnodeSelector} had a ${s.vnodeSelector} child ${n==="added"?n:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},Uee=t=>{if(t.properties){let e=t.properties.enterAnimation;e&&e(t.domNode,t.properties)}},Dx=[],zx=!1,kL=t=>{(t.children||[]).forEach(kL),t.properties&&t.properties.afterRemoved&&t.properties.afterRemoved.apply(t.properties.bind||t.properties,[t.domNode])},vE=()=>{zx=!1,Dx.forEach(kL),Dx.length=0},bE=t=>{Dx.push(t),zx||(zx=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(vE,{timeout:16}):setTimeout(vE,16))},wE=t=>{let e=t.domNode;if(t.properties){let i=t.properties.exitAnimation;if(i)return e.style.pointerEvents="none",void i(e,()=>{e.parentNode&&(e.parentNode.removeChild(e),bE(t))},t.properties)}e.parentNode&&(e.parentNode.removeChild(e),bE(t))},qee=(t,e,i)=>{if(!e)return;let n=i.eventHandlerInterceptor,s=Object.keys(e),h=s.length;for(let f=0;f<h;f++){let m=s[f],v=e[m];if(m==="className")throw new Error('Property "className" is not supported, use "class".');if(m==="class")jx(t,v,!0);else if(m==="classes"){let x=Object.keys(v),M=x.length;for(let $=0;$<M;$++){let I=x[$];v[I]&&t.classList.add(I)}}else if(m==="styles"){let x=Object.keys(v),M=x.length;for(let $=0;$<M;$++){let I=x[$],P=v[I];P&&(EL(P),i.styleApplyer(t,I,P))}}else if(m!=="key"&&v!=null){let x=typeof v;x==="function"?(m.lastIndexOf("on",0)===0&&(n&&(v=n(m,v,t,e)),m==="oninput"&&function(){let M=v;v=function($){M.apply(this,[$]),$.target["oninput-value"]=$.target.value}}()),t[m]=v):i.namespace===jw?m==="href"?t.setAttributeNS(ML,m,v):t.setAttribute(m,v):x==="string"&&m!=="value"?m==="innerHTML"?t[m]=xL.sanitize(v):Fx(t)&&m in t?t[m]=v:t.setAttribute(m,v):t[m]=v}}};function Fx(t){if(!(t instanceof Element&&t.tagName.includes("-")))return!1;const e=window.customElements.get(t.tagName.toLowerCase());return!!e&&t instanceof e}let f2,Wee=(t,e,i)=>{if(e)for(let n of e)ff(n,t,void 0,i)},$L=(t,e,i)=>{Wee(t,e.children,i),e.text&&(t.textContent=e.text),qee(t,e.properties,i),e.properties&&e.properties.afterCreate&&e.properties.afterCreate.apply(e.properties.bind||e.properties,[t,i,e.vnodeSelector,e.properties,e.children])},ff=(t,e,i,n)=>{let s,h=0,f=t.vnodeSelector,m=e.ownerDocument;if(f==="")s=t.domNode=m.createTextNode(t.text),i!==void 0?e.insertBefore(s,i):e.appendChild(s);else{for(let v=0;v<=f.length;++v){let x=f.charAt(v);if(v===f.length||x==="."||x==="#"){let M=f.charAt(h-1),$=f.slice(h,v);M==="."?s.classList.add($):M==="#"?s.id=$:($==="svg"&&(n=JS(n,{namespace:jw})),n.namespace!==void 0?s=t.domNode=m.createElementNS(n.namespace,$):(s=t.domNode=t.domNode||m.createElement($),$==="input"&&t.properties&&t.properties.type!==void 0&&s.setAttribute("type",t.properties.type)),i!==void 0?e.insertBefore(s,i):s.parentNode!==e&&e.appendChild(s)),h=v+1}}$L(s,t,n)}},jx=(t,e,i)=>{e&&e.split(" ").forEach(n=>{n&&t.classList.toggle(n,i)})},Zee=(t,e,i,n)=>{if(!i)return;let s=!1,h=Object.keys(i),f=h.length;for(let m=0;m<f;m++){let v=h[m],x=i[v],M=e[v];if(v==="class")M!==x&&(jx(t,M,!1),jx(t,x,!0));else if(v==="classes"){let $=t.classList,I=Object.keys(x),P=I.length;for(let L=0;L<P;L++){let z=I[L],F=!!x[z];F!==!!M[z]&&(s=!0,F?$.add(z):$.remove(z))}}else if(v==="styles"){let $=Object.keys(x),I=$.length;for(let P=0;P<I;P++){let L=$[P],z=x[L];z!==M[L]&&(s=!0,z?(EL(z),n.styleApplyer(t,L,z)):n.styleApplyer(t,L,""))}}else if(x||typeof M!="string"||(x=""),v!=="value"||Fx(t)){if(x!==M){let $=typeof x;$==="function"&&n.eventHandlerInterceptor||(n.namespace===jw?v==="href"?t.setAttributeNS(ML,v,x):t.setAttribute(v,x):$==="string"?v==="innerHTML"?t[v]=xL.sanitize(x):v==="role"&&x===""?t.removeAttribute(v):Fx(t)&&v in t?t[v]=x:t.setAttribute(v,x):t[v]!==x&&(t[v]=x),s=!0)}}else{let $=t[v];$!==x&&(t["oninput-value"]?$===t["oninput-value"]:x!==M)&&(t[v]=x,t["oninput-value"]=void 0),x!==M&&(s=!0)}}return s},Jee=(t,e,i,n,s)=>{if(i===n)return!1;n=n||yE;let h,f=(i=i||yE).length,m=n.length,v=0,x=0,M=!1;for(;x<m;){let $=v<f?i[v]:void 0,I=n[x];if($!==void 0&&KS($,I))M=f2($,I,s)||M,v++;else{let P=Bee(i,I,v+1);if(P>=0){for(h=v;h<P;h++)wE(i[h]),w_(i,h,t,"removed");M=f2(i[P],I,s)||M,v=P+1}else ff(I,e,v<f?i[v].domNode:void 0,s),Uee(I),w_(n,x,t,"added")}x++}if(f>v)for(h=v;h<f;h++)wE(i[h]),w_(i,h,t,"removed");return M};f2=(t,e,i)=>{let n=t.domNode,s=!1;if(t===e)return!1;let h=!1;if(e.vnodeSelector===""){if(e.text!==t.text){let f=n.ownerDocument.createTextNode(e.text);return n.parentNode.replaceChild(f,n),e.domNode=f,s=!0,s}e.domNode=n}else e.vnodeSelector.lastIndexOf("svg",0)===0&&(i=JS(i,{namespace:jw})),t.text!==e.text&&(h=!0,e.text===void 0?n.removeChild(n.firstChild):n.textContent=e.text),e.domNode=n,h=Jee(e,n,t.children,e.children,i)||h,h=Zee(n,t.properties,e.properties,i)||h,e.properties&&e.properties.afterUpdate&&e.properties.afterUpdate.apply(e.properties.bind||e.properties,[n,i,e.vnodeSelector,e.properties,e.children]);return h&&e.properties&&e.properties.updateAnimation&&e.properties.updateAnimation(n,e.properties,t.properties),s};let Y0=(t,e)=>({getLastRender:()=>t,update:i=>{if(t.vnodeSelector!==i.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let n=t;t=i,f2(n,i,e)},domNode:t.domNode});const Kee={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,i)=>{e.charAt(0)==="-"?t.style.setProperty(e,i):t.style[e]=i}};let Dp=t=>JS(Kee,t),Lh={create:(t,e)=>(e=Dp(e),ff(t,document.createElement("div"),void 0,e),Y0(t,e)),append:(t,e,i)=>(i=Dp(i),ff(e,t,void 0,i),Y0(e,i)),insertBefore:(t,e,i)=>(i=Dp(i),ff(e,t.parentNode,t,i),Y0(e,i)),merge:(t,e,i)=>(i=Dp(i),e.domNode=t,$L(t,e,i),Y0(e,i)),replace:(t,e,i)=>(i=Dp(i),ff(e,t.parentNode,t,i),t.parentNode.removeChild(t),Y0(e,i))},CL,Yee=(t,e)=>{let i=[];for(;t&&t!==e;)i.push(t),t=t.parentNode;return i};CL=Array.prototype.find?(t,e)=>t.find(e):(t,e)=>t.filter(e)[0];let Xee=(t,e)=>{let i=t;return e.forEach(n=>{i=i&&i.children?CL(i.children,s=>s.domNode===n):void 0}),i},Qee=(t,e,i)=>{let n=function(s){i("domEvent",s);let h=e(),f=Yee(s.currentTarget,h.domNode);f.reverse();let m,v=Xee(h.getLastRender(),f);return t.scheduleRender(),v&&(m=v.properties[`on${s.type}`].apply(v.properties.bind||this,arguments)),i("domEventProcessed",s),m};return(s,h,f,m)=>n},_E=t=>{let e,i,n=Dp(t),s=n.performanceLogger,h=!0,f=!1,m=[],v=[],x=($,I,P)=>{let L,z=()=>L;n.eventHandlerInterceptor=Qee(e,z,s),L=$(I,P(),n),m.push(L),v.push(P)},M=()=>{if(i=void 0,h){h=!1,s("renderStart",void 0);for(let $=0;$<m.length;$++){let I=v[$]();s("rendered",void 0),m[$].update(I),s("patched",void 0)}s("renderDone",void 0),h=!0}};return e={renderNow:M,scheduleRender:()=>{i||f||(i=requestAnimationFrame(M))},stop:()=>{i&&(cancelAnimationFrame(i),i=void 0),f=!0},resume:()=>{f=!1,h=!0,e.scheduleRender()},append:($,I)=>{x(Lh.append,$,I)},insertBefore:($,I)=>{x(Lh.insertBefore,$,I)},merge:($,I)=>{x(Lh.merge,$,I)},replace:($,I)=>{x(Lh.replace,$,I)},detach:$=>{for(let I=0;I<v.length;I++)if(v[I]===$)return v.splice(I,1),m.splice(I,1)[0];throw new Error("renderFunction was not found")}},e},Xc=class extends Re{constructor(){super(...arguments),this.items=new Pe,this._watchUpdatingTracking=new uc,this._callbacks=new Map,this._projector=_E(),this._hiddenProjector=_E()}get needsRender(){return this.items.length>0}get updating(){var e;return((e=this._watchUpdatingTracking)==null?void 0:e.updating)??!1}initialize(){const e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,i=>{for(const n of i.added){const s=()=>n.render();this._callbacks.set(n,s),this._projector.append(this.surface,s)}for(const n of i.removed){const s=this._projector.detach(this._callbacks.get(n));this.surface.removeChild(s.domNode),this._callbacks.delete(n)}})}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach(e=>this._projector.detach(e)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){const i=this._hiddenSurface,n=this._hiddenProjector;let s;const h=()=>(s=e.render(),s);n.append(i,h),n.renderNow();const f={left:0,top:0,right:0,bottom:0};if(s!=null&&s.domNode){const m=s.domNode.getBoundingClientRect();f.left=m.left,f.top=m.top,f.right=m.right,f.bottom=m.bottom}for(n.detach(h);i.firstChild;)i.removeChild(i.firstChild);return f}overlaps(e,i){const n=this.computeBoundingRect(e),s=this.computeBoundingRect(i);return Math.max(n.left,s.left)<=Math.min(n.right,s.right)&&Math.max(n.top,s.top)<=Math.min(n.bottom,s.bottom)}get hasVisibleItems(){return this.items.some(e=>e.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(e,i){const n=!!(i!=null&&i.disableDecorations);if(!this.items.some(h=>h.visible&&!(n&&h.isDecoration)))return;const s=e.getContext("2d");s.save(),s.font=this._fontString(),this.items.forEach(h=>{n&&h.isDecoration||(s.save(),h.renderCanvas(s),s.restore())}),s.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};_([T({readOnly:!0})],Xc.prototype,"surface",void 0),_([T({readOnly:!0})],Xc.prototype,"items",void 0),_([T({readOnly:!0})],Xc.prototype,"needsRender",null),_([T({readOnly:!0})],Xc.prototype,"_watchUpdatingTracking",void 0),_([T({readOnly:!0})],Xc.prototype,"updating",null),Xc=_([Y("esri.views.overlay.ViewOverlay")],Xc);const xE=Xc,__=[0,0];function ete(t){const e=(t.ownerDocument||window.document).defaultView,i=t.getBoundingClientRect();return __[0]=i.left+((e==null?void 0:e.pageXOffset)??0),__[1]=i.top+((e==null?void 0:e.pageYOffset)??0),__}function SE(t){t&&(sL(t),t.parentNode&&t.parentNode.removeChild(t))}function tte(t){const e=document.createElement("div");return t.appendChild(e),e}const X0=16,Cy=750,ite=512,nte=2,rte=t=>{let e=class extends t{constructor(...i){super(...i),this._freqInfo={freq:X0,time:Cy},this._overlayRenderTaskHandle=null,this.height=0,this.messagesCommon=null,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([Ee(()=>this.cursor,n=>{const{surface:s}=this;s&&s.setAttribute("data-cursor",n)}),Ee(()=>this.navigating,n=>{const{surface:s}=this;s&&s.setAttribute("data-navigating",n.toString())})])}initialize(){this.addHandles([Ee(()=>this.ui,(i,n)=>this._handleUIChange(i,n),Pt),this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui=yt(this.ui),this.container=null)}get container(){return this._get("container")??null}set container(i){const n=this._get("container"),s=qS(i);if(s||typeof i!="string"||Ce.getLogger(this).error("#container",`element with id '${i}' not found`),n===s)return;if(this._stopMeasuring(),n&&(n.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(SE(this.root),this._set("root",null)),this.userContent&&(dE(this.userContent,n),SE(this.userContent),this._set("userContent",null))),!s)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);s.classList.add("esri-view");const h=document.createElement("div");h.className="esri-view-user-storage",dE(s,h),s.appendChild(h),this._set("userContent",h);const f=document.createElement("div");f.className="esri-view-root",s.insertBefore(f,s.firstChild),this._set("root",f);const m=document.createElement("div");m.className="esri-view-surface",m.setAttribute("role","application"),m.tabIndex=0,f.appendChild(m),this._set("surface",m);const v=new xE;f.appendChild(v.surface),this._set("overlay",v),this.addHandles(Ee(()=>v.needsRender,x=>{x&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=Ff({render:()=>{var M;return(M=this.overlay)==null?void 0:M.render()}}):this._overlayRenderTaskHandle=Rt(this._overlayRenderTaskHandle)})),this.forceDOMReadyCycle(),this._set("container",s),this._startMeasuring()}get focused(){const i=document.activeElement===this.surface;return document.hasFocus()&&i}get size(){return[this.width,this.height]}blur(){var i;(i=this.surface)==null||i.blur()}focus(){var i;(i=this.surface)==null||i.focus()}pageToContainer(i,n,s){const h=this.position;return i-=h?h[0]:0,n-=h?h[1]:0,s?(s[0]=i,s[1]=n):s=[i,n],s}containerToPage(i,n,s){const h=this.position;return i+=h?h[0]:0,n+=h?h[1]:0,s?(s[0]=i,s[1]=n):s=[i,n],s}_handleUIChange(i,n){this.removeHandles("ui"),n&&n!==i&&n.destroy(),i&&(i.view=this,this.addHandles(Ee(()=>this.root,s=>{i.container=s?tte(s):null},Pt),"ui")),this._set("ui",i)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const i=this._freqInfo;i.freq=X0,i.time=Cy,this.addHandles([vm(window,"resize",()=>{i.freq=X0,i.time=Cy}),Ff({prepare:n=>{const s=this._measure(),h=this._freqInfo;if(h.time+=n.deltaTime,s&&(h.freq=X0,this._get("resizing")||this._set("resizing",!0)),h.time<h.freq)return;h.time=0;const f=this._position();h.freq=f||s?X0:Math.min(Cy,h.freq*nte),!s&&h.freq>=ite&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){const i=this.container,n=i?i.clientWidth:0,s=i?i.clientHeight:0;if(n===0||s===0)return this.suspended||this._set("suspended",!0),!1;const h=this.width,f=this.height;return n===h&&s===f?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",n),this._set("height",s),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:h,oldHeight:f,width:n,height:s}),!0)}_position(){const i=this.container,n=this.position,s=i&&ete(i);return!!s&&(!n||s[0]!==n[0]||s[1]!==n[1])&&(this._set("position",[s[0],s[1]]),!0)}forceDOMReadyCycle(){}};return _([T()],e.prototype,"container",null),_([T({readOnly:!0})],e.prototype,"focused",null),_([T({readOnly:!0})],e.prototype,"height",void 0),_([T()],e.prototype,"messagesCommon",void 0),_([T({type:xE})],e.prototype,"overlay",void 0),_([T({readOnly:!0})],e.prototype,"position",void 0),_([T({readOnly:!0})],e.prototype,"resizing",void 0),_([T({readOnly:!0})],e.prototype,"root",void 0),_([T({value:null,readOnly:!0})],e.prototype,"size",null),_([T({readOnly:!0})],e.prototype,"surface",void 0),_([T({readOnly:!0})],e.prototype,"suspended",void 0),_([T()],e.prototype,"ui",void 0),_([T({readOnly:!0})],e.prototype,"userContent",void 0),_([T({readOnly:!0})],e.prototype,"width",void 0),_([T()],e.prototype,"widthBreakpoint",void 0),e=_([Y("esri.views.DOMContainer")],e),e};let ste=class{constructor(e,i){this._owner=i,this._properties={},this._afterDispatchHandle=null;for(const n in e){const s=e[n],h=new wA(s,void 0,void 0,2,2);this._properties[n]={pool:h,acquired:[]}}this._afterDispatchHandle=GU(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const e in this._properties){const i=this._properties[e];for(const n of i.acquired)MM(n)||i.pool.release(n);i.pool.destroy(),i.pool=null,i.acquired=null}this._properties=null,this._owner=null}get(e){const i=this._owner._get(e),n=this._properties[e];let s=n.pool.acquire();for(n.acquired.push(s);s===i;)n.acquired.push(s),s=n.pool.acquire();return s}_release(){for(const e in this._properties){const i=this._properties[e];let n=0;for(const s of i.acquired)MM(s)?i.acquired[n++]=s:i.pool.release(s);i.acquired.length=n}}};const IL=pe("mac")?"Meta":"Control",ote=new Set(["Alt","Control","Meta","Shift","Ctrl","Primary"]),ate=t=>ote.has(t);let lte=class{constructor(e,i=[]){this.eventType=e,this.keyModifiers=i}matches(e){if(e.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const i=e.modifiers;for(const n of this.keyModifiers)if(!i.has(n))return!1;return!0}},xn=class{constructor(e){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=e}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const e in this._incoming){const i=this._incoming[e];for(const n of i)this._incomingEventMatches.push(n.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(e=>e.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(e){this._manager||(e.setEventCallback(i=>this._handleEvent(i)),e.setUninstallCallback(()=>this._onUninstall()),this._manager=e)}onUninstall(){}registerIncoming(e,i,n){let s;typeof i=="function"?(n=i,s=[]):s=i||[];const h=typeof e=="string"?new lte(e,s):e,f=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},m=M=>{const $=this._incoming[M.match.eventType];if($){const I=$.indexOf(M);$.splice(I,1),f(),this._manager&&this._manager.updateDependencies()}},v=new cte(h,n,{onPause:m,onRemove:m,onResume:M=>{const $=this._incoming[M.match.eventType];$&&!$.includes(M)&&($.push(M),f(),this._manager&&this._manager.updateDependencies())}});let x=this._incoming[h.eventType];return x||(x=[],this._incoming[h.eventType]=x),x.push(v),f(),this._manager&&this._manager.updateDependencies(),v}registerOutgoing(e){if(this._outgoing[e])throw new Error("There is already a callback registered for this outgoing InputEvent: "+e);const i=new hte(e,{onEmit:(n,s,h,f)=>{var m;(m=this._manager)==null||m.emit(n.eventType,s,h,f)},onRemove:n=>{var s;delete this._outgoing[n.eventType],(s=this._manager)==null||s.updateDependencies()}});return this._outgoing[e]=i,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),i}startCapturingPointer(e){var i;(i=this._manager)==null||i.setPointerCapture(e,!0)}stopCapturingPointer(e){var i;(i=this._manager)==null||i.setPointerCapture(e,!1)}refreshHasPendingInputs(){var e;(e=this._manager)==null||e.refreshHasPendingInputs()}_onUninstall(){this._manager&&(this.onUninstall(),this._manager=null)}_handleEvent(e){var n;const i=this._incoming[e.type];if(i){for(const s of i)if(s.match.matches(e)&&((n=s.callback)==null||n.call(s,e),e.shouldStopPropagation()))break}}},cte=class{constructor(e,i,n){this.match=e,this._callback=i,this._handler=n}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},hte=class{constructor(e,i){this.eventType=e,this._removed=!1,this._handler=i}emit(e,i,n){this._removed||this._handler.onEmit(this,e,i,n)}remove(){this._removed=!0,this._handler.onRemove(this)}},ute=class extends xn{constructor(e){super(!0),this._onChange=e,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",i=>{this._update(i.data)})}_update(e){const i=e.native.pointerType==="touch"?"touch":"mouse",{x:n,y:s}=e;i===this._value&&this._x===n&&this._y===s||(this._value=i,this._x=n,this._y=s,this._onChange(i,n,s))}},dte=class{constructor(e,i){this._observable=new v0,this._value=e,this._equalityFunction=i}get value(){return Ve(this._observable),this._value}set value(e){this._equalityFunction(e,this._value)||(this._value=e,this._observable.notify())}mutate(e){e(this._value),this._observable.notify()}};function Yg(t,e=XI){return new dte(t,e)}let pte=class extends xn{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=Yg(!1),this._onPointerAdd=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.add(e.native.pointerId),this._update())},this._onPointerRemove=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.delete(e.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}},zs=class extends Re{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=IL,this._latestPointerType="mouse",this._propertiesPool=new ste({latestPointerLocation:mte},this),this.latestPointerLocation=null,this._paused=!1,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const i of e)this.uninstallHandlers(i);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(e=>e.handler.hasPendingInputs)}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get updating(){return this.hasPendingInputs||this._paused}installHandlers(e,i,n=Ut.INTERNAL){if(this._nameToGroup[e]||i.length===0)return;const s={name:e,handlers:i.map(h=>({handler:h,active:!0,removed:!1,priorityIndex:0,groupPriority:n,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[e]=s;for(let h=s.handlers.length-1;h>=0;h--){const f=s.handlers[h];this._handlers.push(f),f.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(m,v,x,M,$)=>{this._emitInputEvent(f.priorityIndex+1,m,v,x,$,M)},setPointerCapture:(m,v)=>{this._setPointerCapture(s,f,m,v)},setEventCallback:m=>{f.eventCallback=m},setUninstallCallback:m=>{f.uninstallCallback=m},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const i=this._nameToGroup[e];i?(i.handlers.forEach(n=>{var s;n.removed=!0,(s=n.uninstallCallback)==null||s.call(n)}),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):Ce.getLogger(this).error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return this._nameToGroup[e]!==void 0}isModifierKeyDown(e){return this._activeKeyModifiers&&this._activeKeyModifiers.has(e)}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,i=new Set;this._handlersPriority=[];for(let n=this._handlers.length-1;n>=0;n--){const s=this._handlers[n];s.priorityIndex=n,this._handlersPriority.push(s)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let n=this._handlersPriority.length-1;n>=0;n--){const s=this._handlersPriority[n];s.priorityIndex=n;let h=s.handler.hasSideEffects;if(!h){for(const f of s.handler.outgoingEventTypes)if(e.has(f)){h=!0;break}}if(h)for(const f of s.handler.incomingEventMatches){e.add(f.eventType);for(const m of f.keyModifiers)ate(m)||i.add(m)}s.active=h}this._sourceEvents=e,this._keyModifiers=i,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,i,n){this._latestPointerType=e;const s=this._get("latestPointerLocation");if(s==null||s.x!==i||s.y!==n){const h=this._propertiesPool.get("latestPointerLocation");h.x=i,h.y=n,this._set("latestPointerLocation",h)}}_onEventReceived(e,i){if(e==="pointer-capture-lost"){const h=i;this._pointerCaptures.delete(h.native.pointerId)}this._updateKeyModifiers(e,i);const n=this.test.timestamp!=null?this.test.timestamp:i.native?i.native.timestamp:void 0,s=i.native?i.native.cancelable:void 0;this._emitInputEventFromSource(e,i,n,s)}_updateKeyModifiers(e,i){if(!i)return;let n=!1;const s=()=>{if(!n){const m=new Set;this._activeKeyModifiers.forEach(v=>{m.add(v)}),this._activeKeyModifiers=m,n=!0}},h=(m,v)=>{v&&!this._activeKeyModifiers.has(m)?(s(),this._activeKeyModifiers.add(m)):!v&&this._activeKeyModifiers.has(m)&&(s(),this._activeKeyModifiers.delete(m))};if(e==="key-down"||e==="key-up"){const m=i.key;this._keyModifiers.has(m)&&h(m,e==="key-down")}const f=i.native;h("Alt",!(!f||!f.altKey)),h("Control",!(!f||!f.ctrlKey)),h("Ctrl",!(!f||!f.ctrlKey)),h("Shift",!(!f||!f.shiftKey)),h("Meta",!(!f||!f.metaKey)),h("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new ute((e,i,n)=>this._setLatestPointer(e,i,n)),this._multiTouchHandler=new pte,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],Ut.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,Ut.INTERNAL)}_setPointerCapture(e,i,n,s){const h=e.name+"-"+i.priorityIndex,f=this._pointerCaptures.get(n.pointerId)||new Set;this._pointerCaptures.set(n.pointerId,f),s?(f.add(h),f.size===1&&this.eventSource&&this.eventSource.setPointerCapture(n,!0)):f.has(h)&&(f.delete(h),f.size===0&&(this._pointerCaptures.delete(n.pointerId),this.eventSource&&this.eventSource.setPointerCapture(n,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(e=>!e.removed),this.updateDependencies()}_emitInputEventFromSource(e,i,n,s){this._emitInputEvent(0,e,i,n,s)}_emitInputEvent(e,i,n,s,h,f){const m=s!==void 0?s:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),v=h!==void 0&&h,x={event:new fte(i,n,m,f||this._activeKeyModifiers,v),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(x):this._doNewPropagation(x)}_doNewPropagation(e){this._currentPropagation={events:new s2,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){var i,n,s;this._paused=!1;const e=this._currentPropagation;if(e){for(;e.events.length>0;){const{event:h,priorityIndex:f}=e.events.pop(),m=(i=h.data)==null?void 0:i.eventId;if(!(m!=null&&this._stoppedPropagationEventIds.has(m)))for(e.currentHandler=this._handlersPriority[f];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!h.shouldStopPropagation()&&((s=(n=e.currentHandler).eventCallback)==null||s.call(n,h)),h.shouldStopPropagation()){m!=null&&this._stoppedPropagationEventIds.add(m);break}if(h.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:h,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(e){const i=new s2;i.push(e);const n=this._currentPropagation;if(n){for(;n.events.length;)i.push(n.events.pop());n.events=i,n.currentHandler=null,this._paused=!0}}_compareHandlerPriority(e,i){if(e.handler.hasSideEffects!==i.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==i.groupPriority)return e.groupPriority>i.groupPriority?-1:1;for(const n of e.handler.incomingEventMatches)for(const s of i.handler.incomingEventMatches){if(n.eventType!==s.eventType)continue;const h=n.keyModifiers.filter(f=>s.keyModifiers.includes(f));if(h.length===n.keyModifiers.length!=(h.length===s.keyModifiers.length))return n.keyModifiers.length>s.keyModifiers.length?-1:1}return e.priorityIndex>i.priorityIndex?-1:1}_sortHandlersPriority(e){const i=[];for(const n of e){let s=0;for(;s<i.length&&this._compareHandlerPriority(n,i[s])>=0;)s++;i.splice(s,0,n)}return i}get debug(){const e=i=>{const n=this._setPointerCapture;this._setPointerCapture=()=>{},i(),this._setPointerCapture=n};return{injectEvent:(i,n)=>{e(()=>{this._onEventReceived(i,n)})},disablePointerCapture:e}}};_([T({readOnly:!0})],zs.prototype,"hasPendingInputs",null),_([T({constructOnly:!0})],zs.prototype,"eventSource",void 0),_([T({constructOnly:!0})],zs.prototype,"recognizers",void 0),_([T()],zs.prototype,"_latestPointerType",void 0),_([T()],zs.prototype,"latestPointerType",null),_([T()],zs.prototype,"multiTouchActive",null),_([T({readOnly:!0})],zs.prototype,"latestPointerLocation",void 0),_([T()],zs.prototype,"_paused",void 0),_([T({readOnly:!0})],zs.prototype,"updating",null),zs=_([Y("esri.views.input.InputManager")],zs);let fte=class{constructor(e,i,n,s,h){this.type=e,this.data=i,this.timestamp=n,this.modifiers=s,this.cancelable=h,this._propagationState=kh.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=kh.STOPPED}shouldStopPropagation(){return!!(this._propagationState&kh.STOPPED)}async(e){this._propagationState|=kh.PAUSED;const i=(n,s)=>{this._propagationState&=~kh.PAUSED;const h=this._resumeCallback;if(this._resumeCallback=null,h&&h(),s)throw n;return n};return(typeof e=="function"?e():e).then(n=>i(n,!1),n=>i(n,!0))}shouldPausePropagation(e){return!!(this._propagationState&kh.PAUSED)&&(this._resumeCallback=e,!0)}preventDefault(){this.data.native.preventDefault()}};var kh;(function(t){t[t.NONE=0]="NONE",t[t.STOPPED=1]="STOPPED",t[t.PAUSED=2]="PAUSED"})(kh||(kh={}));const Ut={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};let gte=class{};const mte=gte;function yl(t){return t!=null&&"open"in t&&"declaredClass"in t}function TE(t){return t!=null&&"declaredClass"in t&&"dockOptions"in t}const yte=t=>{let e=class extends t{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([Ee(()=>[this.ui,this.popup],([i,n],s)=>{const h="popup",f="manual";if(s){const[m,v]=s;m&&yl(v)&&(v.view=null,TE(v)&&m.remove(v,h))}i&&yl(n)&&(n.view=this,TE(n)&&i.add(n,{key:h,position:f,internal:!0}))},Pt),this.on("click",i=>{this.popup&&this.popupEnabled&&(i.pointerType!=="mouse"||i.button===0)&&(yl(this.popup)?this.popup.viewModel.handleViewClick(i):i.async(async()=>{await this.setupPopup(),yl(this.popup)&&!this.destroyed&&this.ready&&this.popupEnabled&&this.popup.viewModel.handleViewClick(i)}))},Ut.WIDGET)]),Zh(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>{be(()=>import("./Popup-D7zp3nwV.js"),__vite__mapDeps([131,132,60,133,134,135,4,136,101,137,138,85,23,139,140,110,141,142,143,87,31,144,145,28,26,146,108,2,3,147,148,149,58,56,57,13,12,16,59,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,80,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185]),import.meta.url)})}destroy(){this.destroyed||this.closePopup()}async openPopup(i){if(yl(this.popup))return this.popup.open(i);try{if(await this.setupPopup(),!this.popup)return void Ce.getLogger(this).error(new fe("view:null-popup","Popup is null and can't be opened"));this.popup.open(i)}catch{}}closePopup(){var i;(i=this._popupSetupTask)==null||i.abort(),yl(this.popup)&&this.popup.close()}async fetchPopupFeatures(i,n){return await this.when(),this._popupHitsToFeatures(await this._getPopupHits(i,n),n)}async setupPopup(){var i;if((i=this._popupSetupTask)==null||i.abort(),this.popup&&!yl(this.popup))return this._popupSetupTask=$m(async n=>{const{default:s}=await be(()=>import("./Popup-D7zp3nwV.js"),__vite__mapDeps([131,132,60,133,134,135,4,136,101,137,138,85,23,139,140,110,141,142,143,87,31,144,145,28,26,146,108,2,3,147,148,149,58,56,57,13,12,16,59,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,80,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185]),import.meta.url);if(Zt(n),!this.popup||yl(this.popup))return;const h=this.popup;delete h.open,delete h.close,this.popup=new s(h)}),this._popupSetupTask.promise}async _popupHitsToFeatures({location:i,hits:n},s){const h=[],f=[];let m=!1;const v=vU(s,pe("popup-view-fetch-timeout")??bte),x=I=>{const P=new vte(I);return f.push(P),h.push(P.promise),P},M=I=>{const P=f.at(-1);return P&&P.layerView===I&&!m?P:x(I)};for(const I of n)"graphic"in I?(M(I.layerView).graphics.push(I.graphic),m=!1):(h.push(I.layerView.fetchPopupFeaturesAtLocation(I.mapPoint,v)),m=!0);f.map(I=>I.resolve(v));const $=TA(h).then(I=>I.filter(P=>!!P).flat());return{pendingFeatures:h,allGraphicsPromise:$,location:i}}async _getPopupHits(i,n){const{hits:s,location:h}=await this.popupHitTest(i);Zt(n);const f=[];for(const m of s)if("graphic"in m){if(this._isValidPopupGraphic(m.graphic,n)){const v=this._isValidPopupGraphicsLayerView(m.layerView)?m.layerView:void 0;f.push({graphic:m.graphic,layerView:v})}}else this._isValidPopupLocationLayerView(m.layerView)&&f.push({mapPoint:m.mapPoint,layerView:m.layerView});return{hits:f,location:h}}_isValidPopupGraphic(i,n){return i&&!!i.getEffectivePopupTemplate(n==null?void 0:n.defaultPopupTemplateEnabled)}_isValidPopupGraphicsLayerView(i){return!i||(!("layer"in i)||!i.suspended)&&"fetchPopupFeaturesFromGraphics"in i}_isValidPopupLocationLayerView(i){return(!("layer"in i)||!i.suspended)&&"fetchPopupFeaturesAtLocation"in i}};return _([T({cast(i){return!i||yl(i)||typeof i=="object"&&(i.open=n=>(Bh(Ce.getLogger(this),"view.popup is no longer created by default. view.popup.open() will stop working when the popup isn't created",{replacement:"Use view.openPopup() instead.",version:"4.27"}),this.openPopup(n)),i.close=()=>(Bh(Ce.getLogger(this),"view.popup is no longer created by default. view.popup.close() will stop working when the popup isn't created",{replacement:"Use view.closePopup() instead.",version:"4.27"}),this.closePopup())),i}})],e.prototype,"popup",void 0),_([T()],e.prototype,"popupEnabled",void 0),e=_([Y("esri.views.PopupView")],e),e};let vte=class{constructor(e){this.layerView=e,this._resolver=Ts(),this.graphics=[]}get promise(){return this._resolver.promise}resolve(e){const{layerView:i,graphics:n,_resolver:s}=this;if(!i)return s.resolve(n),s.promise;let h;return i.fetchPopupFeaturesFromGraphics(n,e).catch(f=>(h=f,null)).then(f=>{f?s.resolve(f):s.reject(h)}),s.promise}};const bte=5e3;function Xh(t,e,i=Pe){return e||(e=new i),e===t||(e.removeAll(),wte(t)?e.addMany(t):t&&e.add(t)),e}function AL(t){return t}function wte(t){return t&&(Array.isArray(t)||"items"in t&&Array.isArray(t.items))}var $h;(function(t){t[t.PENDING=0]="PENDING",t[t.RESOLVED=1]="RESOLVED",t[t.REJECTED=2]="REJECTED"})($h||($h={}));let _te=class{constructor(){this._resolver=Ts(),this._status=$h.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=$h.RESOLVED,this._cleanUp()},()=>{this._status=$h.REJECTED,this._cleanUp()}),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(e){this._resolvingPromises.push(e),this._tryResolve()}isResolved(){return this._status===$h.RESOLVED}isRejected(){return this._status===$h.REJECTED}isFulfilled(){return this._status!==$h.PENDING}abort(){this._resolver.reject(Yt())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const e=Ts(),i=[...this._resolvingPromises,e.promise],n=this._allPromise=Promise.all(i);n.then(()=>{this.isFulfilled()||this._allPromise!==n||this._resolver.resolve()},s=>{this.isFulfilled()||this._allPromise!==n||Zr(s)||this._resolver.reject(s)}),e.resolve()}};const Gw=t=>{let e=class extends t{constructor(...i){super(...i),this._promiseProps=new _te,this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(i,n){return this._promiseProps.promise.then(()=>this).then(i,n)}catch(i){return this.when(null,i)}addResolvingPromise(i){i&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in i?i.when():i)}};return e=_([Y("esri.core.Promise")],e),e};let g2=class extends Gw(Re){};g2=_([Y("esri.core.Promise")],g2);const xte="not-loaded",Ste="loading",Tte="failed",ME="loaded",OL=t=>{let e=class extends t{constructor(...i){super(...i),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(n=>{const s=this.load.bind(this);this.load=h=>{const f=new Promise((m,v)=>{const x=z6(h,v);this.destroyed&&v(new fe("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(m,v).finally(()=>{x&&x.remove()})});if(this.loadStatus===xte){this._set("loadStatus",Ste);const m=this._loadController=new AbortController;s({signal:m.signal})}return n(),f}})),this.when(()=>{this._set("loadStatus",ME),this._loadController=null},n=>{this._set("loadStatus",Tte),this._set("loadError",n),this._loadController=null})}destroy(){this._loadController&&(this._loadController=ms(this._loadController),this._promiseProps.abort()),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===ME}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var i;return this.isFulfilled()||(this._set("loadError",new fe("load:cancelled","Cancelled")),(i=this._loadController)==null||i.abort(),this._promiseProps.abort()),this}};return _([T({readOnly:!0})],e.prototype,"loaded",null),_([T({readOnly:!0})],e.prototype,"loadError",void 0),_([T({clonable:!1})],e.prototype,"loadStatus",void 0),_([T({type:[vc],readOnly:!0})],e.prototype,"loadWarnings",null),e=_([Y("esri.core.Loadable")],e),e};let b1=class extends OL(g2){};b1=_([Y("esri.core.Loadable")],b1),function(t){function e(i){return!(!i||!i.load)}t.LoadableMixin=OL,t.isLoadable=e}(b1||(b1={}));const na=b1;async function PL(t,e){return await t.load(),Mte(t,e)}async function Mte(t,e){const i=[],n=(...h)=>{for(const f of h)f!=null&&(Array.isArray(f)?n(...f):Pe.isCollection(f)?f.forEach(m=>n(m)):na.isLoadable(f)&&i.push(f))};e(n);let s=null;if(await tK(i,async h=>{const f=await CP(Ete(h)?h.loadAll():h.load());f.ok!==!1||s||(s=f)}),s)throw s.error;return t}function Ete(t){return"loadAll"in t&&typeof t.loadAll=="function"}let Iy;function kte(t){return Iy&&!Iy.destroyed||(Iy=t()),Iy}var Gx;const $te=new an({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let Fs=Gx=class extends Re{constructor(t){super(t),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(t){t!=="asc"&&t!=="desc"||this._set("sortOrder",t)}clone(){return new Gx({categories:this.categories?_e(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(t,e){let i=[];this.categories&&(i=this.categories.map(f=>Array.isArray(f)?JSON.stringify(f):f));let n="";if(this.extent){const f=Sw(this.extent,tt.WGS84);f!=null&&(n=`${f.xmin},${f.ymin},${f.xmax},${f.ymax}`)}let s=this.query;!this.disableExtraQuery&&t.extraQuery&&(s="("+s+")"+t.extraQuery);const h={categories:i,bbox:n,q:s,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(h.sortField=this.sortField.split(",").map(f=>$te.toJSON(f.trim())).join(","),h.sortOrder=this.sortOrder),{query:{...e,...h}}}};_([T()],Fs.prototype,"categories",void 0),_([T()],Fs.prototype,"disableExtraQuery",void 0),_([T({type:Lt})],Fs.prototype,"extent",void 0),_([T()],Fs.prototype,"filter",void 0),_([T()],Fs.prototype,"num",void 0),_([T()],Fs.prototype,"query",void 0),_([T()],Fs.prototype,"sortField",void 0),_([T()],Fs.prototype,"sortOrder",null),_([T()],Fs.prototype,"start",void 0),Fs=Gx=_([Y("esri.portal.PortalQueryParams")],Fs);const rc=Fs;var Vx;let Yi=Vx=class extends Fe{constructor(t){super(t),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.sourceJSON=null,this.tags=null,this.title=null}get thumbnailUrl(){var i;const t=this.url,e=this.thumbnail;return t&&e&&this.portal?(i=this.portal)==null?void 0:i.normalizeUrl(`${t}/info/${e}?f=json`):null}get url(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t?t+"/community/groups/"+this.id:null}fetchCategorySchema(t){return this.portal.request(this.url+"/categorySchema",t).then(e=>{const i=e.categorySchema||[];return i.some(n=>n.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",t):i})}fetchMembers(t){return this.portal.request(this.url+"/users",t)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}toJSON(){throw new fe("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new Vx({sourceJSON:t});return e.read(t),e}queryItems(t,e){let i=wn(rc,t);const n=this.portal;return parseFloat(n.currentVersion)>5?(i=i||new rc,n.queryPortal(`/content/groups/${this.id}/search`,i,"PortalItem",e)):(i=i?i.clone():new rc,i.query="group:"+this.id+(i.query?" "+i.query:""),n.queryItems(i,e))}_fetchCategorySchemaSet(t,e){const i=this.portal;return i.fetchSelf(i.authMode,!0,e).then(n=>{const s=n.contentCategorySetsGroupQuery;if(s){const h=new rc({disableExtraQuery:!0,num:1,query:s});return i.queryGroups(h,e)}throw new fe("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(n=>{if(n.total){const s=n.results[0],h=new rc({num:1,query:`typekeywords:"${t}"`});return s.queryItems(h,e)}throw new fe("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(n=>n.total?n.results[0].fetchData("json",e).then(s=>{const h=s==null?void 0:s.categorySchema;return h!=null&&h.length?h:[]}):[])}};_([T()],Yi.prototype,"access",void 0),_([T({type:Date})],Yi.prototype,"created",void 0),_([T()],Yi.prototype,"description",void 0),_([T()],Yi.prototype,"id",void 0),_([T()],Yi.prototype,"isInvitationOnly",void 0),_([T({type:Date})],Yi.prototype,"modified",void 0),_([T()],Yi.prototype,"owner",void 0),_([T()],Yi.prototype,"portal",void 0),_([T()],Yi.prototype,"snippet",void 0),_([T()],Yi.prototype,"sortField",void 0),_([T()],Yi.prototype,"sortOrder",void 0),_([T()],Yi.prototype,"sourceJSON",void 0),_([T()],Yi.prototype,"tags",void 0),_([T()],Yi.prototype,"thumbnail",void 0),_([T({readOnly:!0})],Yi.prototype,"thumbnailUrl",null),_([T()],Yi.prototype,"title",void 0),_([T({readOnly:!0})],Yi.prototype,"url",null),Yi=Vx=_([Y("esri.portal.PortalGroup")],Yi);const Hx=Yi;let Cu=class extends Re{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};_([T()],Cu.prototype,"nextQueryParams",void 0),_([T()],Cu.prototype,"queryParams",void 0),_([T()],Cu.prototype,"results",void 0),_([T()],Cu.prototype,"total",void 0),Cu=_([Y("esri.portal.PortalQueryResult")],Cu);const Cte=Cu;let $l=class extends Fe{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){var i;const e=(i=this.portal)==null?void 0:i.restUrl;return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new fe("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};_([T({type:Date})],$l.prototype,"created",void 0),_([T()],$l.prototype,"id",void 0),_([T()],$l.prototype,"portal",void 0),_([T()],$l.prototype,"title",void 0),_([T({readOnly:!0})],$l.prototype,"url",null),_([T()],$l.prototype,"username",void 0),$l=_([Y("esri.portal.PortalFolder")],$l);const Ite=$l;var Bx;let ei=Bx=class extends Fe{constructor(t){super(t),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userLicenseTypeId=null,this.userType=null}get thumbnailUrl(){const t=this.url,e=this.thumbnail;return t&&e?this.portal.normalizeUrl(`${t}/info/${e}?f=json`):null}get userContentUrl(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t?`${t}/content/users/${this.username}`:null}get url(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t?`${t}/community/users/${this.username}`:null}addItem(t){const e=t&&t.item,i=t==null?void 0:t.data,n=t==null?void 0:t.folder,s={method:"post"};e&&(s.query=e.createPostQuery(),i!=null&&(typeof i=="string"?s.query.text=i:typeof i=="object"&&(s.query.text=JSON.stringify(i))));let h=this.userContentUrl;return n&&(h+="/"+(typeof n=="string"?n:n.id)),this.portal.request(h+"/addItem",s).then(f=>(e.id=f.id,e.portal=this.portal,e.loaded?e.reload():e.load()))}async deleteItem(t,e=!1){let i=this.userContentUrl;t.ownerFolder&&(i+="/"+t.ownerFolder);const n=e?{permanentDelete:!0}:{};await this.portal.request(i+`/items/${t.id}/delete`,{method:"post",query:n}),t.id=null,t.portal=null}async deleteItems(t,e=!1){t=t.concat();const i=this.userContentUrl+"/deleteItems",n=[],s=t.map(h=>h.id);if(s.length){const h={method:"post",query:{items:s.join(","),permanentDelete:e}},f=await this.portal.request(i,h);for(const m of f.results){const v=t.find($=>m.itemId===$.id),x=m.success;let M=null;x?(v.id=null,v.portal=null):m.error&&(M=new fe("portal:delete-item-failed",m.error.message,m.error)),n.push({item:v,success:x,error:M})}}return n}fetchFolders(){const t={query:{num:1}};return this.portal.request(this.userContentUrl??"",t).then(e=>{let i;return i=e&&e.folders?e.folders.map(n=>{const s=Ite.fromJSON(n);return s.portal=this.portal,s}):[],i})}fetchGroups(){return this.portal.request(this.url??"").then(t=>{let e;return e=t&&t.groups?t.groups.map(i=>{const n=Hx.fromJSON(i);return n.portal=this.portal,n}):[],e})}async fetchItems(t){t??(t={});let e=this.userContentUrl??"";t.folder&&(e+="/"+t.folder.id);const{default:i}=await be(()=>Promise.resolve().then(()=>zL),void 0,import.meta.url),n={folders:!1,inRecycleBin:!!t.inRecycleBin||null,foldersContent:!(t.folder||!t.includeSubfolderItems)||null,num:t.num||10,start:t.start||1,sortField:t.sortField||"created",sortOrder:t.sortOrder||"asc"},s=await this.portal.request(e,{query:n});let h;return s!=null&&s.items?(h=s.items.map(f=>{const m=i.fromJSON(f);return m.portal=this.portal,m}),await Promise.all(h.map(f=>f.load())),{items:h,nextStart:s.nextStart,total:s.total}):{items:[],nextStart:-1,total:0}}fetchTags(){return this.portal.request(this.url+"/tags").then(t=>t.tags)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}queryFavorites(t){return this.favGroupId?(this._favGroup||(this._favGroup=new Hx({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(t)):Promise.reject(new fe("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}async restoreItem(t,e){const i=this.userContentUrl,n=e?{folderID:typeof e=="string"?e:e.id}:null;await this.portal.request(i+`/items/${t.id}/restore`,{method:"post",query:n})}toJSON(){throw new fe("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new Bx({sourceJSON:t});return e.read(t),e}};_([T()],ei.prototype,"access",void 0),_([T({type:Date})],ei.prototype,"created",void 0),_([T()],ei.prototype,"culture",void 0),_([T()],ei.prototype,"description",void 0),_([T()],ei.prototype,"email",void 0),_([T()],ei.prototype,"favGroupId",void 0),_([T()],ei.prototype,"fullName",void 0),_([T({type:Date})],ei.prototype,"modified",void 0),_([T()],ei.prototype,"orgId",void 0),_([T()],ei.prototype,"portal",void 0),_([T()],ei.prototype,"preferredView",void 0),_([T()],ei.prototype,"privileges",void 0),_([T()],ei.prototype,"region",void 0),_([T()],ei.prototype,"role",void 0),_([T()],ei.prototype,"roleId",void 0),_([T()],ei.prototype,"sourceJSON",void 0),_([T()],ei.prototype,"thumbnail",void 0),_([T({readOnly:!0})],ei.prototype,"thumbnailUrl",null),_([T()],ei.prototype,"units",void 0),_([T({readOnly:!0})],ei.prototype,"userContentUrl",null),_([T({readOnly:!0})],ei.prototype,"url",null),_([T()],ei.prototype,"username",void 0),_([T()],ei.prototype,"userLicenseTypeId",void 0),_([T()],ei.prototype,"userType",void 0),ei=Bx=_([Y("esri.portal.PortalUser")],ei);const RL=ei;var is;let Ay;const EE={PortalGroup:()=>Promise.resolve({default:Hx}),PortalItem:()=>be(()=>Promise.resolve().then(()=>zL),void 0,import.meta.url),PortalUser:()=>Promise.resolve({default:RL})};let $e=is=class extends _m(na){constructor(t){super(t),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.layoutGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.recycleBinEnabled=!1,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=vt.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(t){return typeof t=="string"?{url:t}:t}destroy(){kE.unregister(this),this.defaultBasemap=yt(this.defaultBasemap),this.defaultDevBasemap=yt(this.defaultDevBasemap),this.defaultVectorBasemap=yt(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=Rt(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(t){if(t)for(const e of t)vt.request.trustedServers.includes(e)||vt.request.trustedServers.push(e);return t}readDefaultBasemap(t){return this._readBasemap(t)}readDefaultDevBasemap(t){return this._readBasemap(t)}readDefaultVectorBasemap(t){return this._readBasemap(t)}get extraQuery(){var i;const t=(i=this.user)==null?void 0:i.orgId,e=!t||this.canSearchPublic;return this.id&&!e?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let t=this.url;if(t){const e=t.indexOf("/sharing");t=e>0?t.substring(0,e):this.url.replace(/\/+$/,""),t+="/sharing/rest"}return t}get thumbnailUrl(){const t=this.restUrl,e=this.thumbnail;return t&&e?this._normalizeSSL(t+"/portals/self/resources/"+e):null}readUrlKey(t){return t&&t.toLowerCase()}readUser(t){let e=null;return t&&(e=RL.fromJSON(t),e.portal=this),e}load(t){const e=be(()=>Promise.resolve().then(()=>aie),void 0,import.meta.url).then(({default:i})=>{Zt(t),Ay=i}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,t)).then(i=>{var n;if(qt){const s=qt;this.credential=s.findCredential(this.restUrl),this.credential||this.authMode!==is.AUTH_MODE_AUTO&&this.authMode!==is.AUTH_MODE_NO_PROMPT||((n=this._esriIdCredentialCreateHandle)==null||n.remove(),this._esriIdCredentialCreateHandle=s.on("credential-create",Ate(new WeakRef(this))),kE.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(e),Promise.resolve(this)}async createElevationLayers(){await this.load();const t=this._getHelperService("defaultElevationLayers"),e=(await be(async()=>{const{default:i}=await import("./ElevationLayer-dYCFmh9l.js");return{default:i}},__vite__mapDeps([186,153,187,188,189,60,23,162,171,154,174,175,190]),import.meta.url)).default;return t?t.map(i=>new e({id:i.id,url:i.url})):[]}async fetchBasemaps(t,e){const i=await this._fetchBasemaps(t,e);if((e==null?void 0:e.include3d)===!0&&this.use3dBasemaps!==!1){const n=await this._fetchBasemaps3D(t,e);i.unshift(...n)}return i}fetchCategorySchema(t){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",t).then(e=>e.categorySchema):Ss(t)?Promise.reject(Yt()):Promise.resolve([])}fetchFeaturedGroups(t){const e=this.featuredGroups,i=new rc({num:100,sortField:"title"});if(e!=null&&e.length){const n=[];for(const s of e)n.push(`(title:"${s.title}" AND owner:${s.owner})`);return i.query=n.join(" OR "),this.queryGroups(i,t).then(s=>s.results)}return Ss(t)?Promise.reject(Yt()):Promise.resolve([])}fetchRegions(t){var i;const e=((i=this.user)==null?void 0:i.culture)||this.culture||Ur();return this.request(this.restUrl+"/portals/regions",{...t,query:{culture:e}})}fetchSettings(t){var i;const e=((i=this.user)==null?void 0:i.culture)||this.culture||Ur();return this.request(this.restUrl+"/portals/self/settings",{...t,query:{culture:e}})}static getDefault(){return kte(()=>new is)}queryGroups(t,e){return this.queryPortal("/community/groups",t,"PortalGroup",e)}queryItems(t,e){return this.queryPortal("/search",t,"PortalItem",e)}queryUsers(t,e){return t.sortField||(t.sortField="username"),this.queryPortal("/community/users",t,"PortalUser",e)}fetchSelf(t=this.authMode,e=!1,i){const n=this.restUrl+"/portals/self",s={authMode:t,query:{culture:Ur().toLowerCase()},withCredentials:!0,...i};return s.authMode==="auto"&&(s.authMode="no-prompt"),e&&(s.query.default=!0),this.request(n,s)}queryPortal(t,e,i,n){const s=wn(rc,e),h=f=>this.request(this.restUrl+t,{...s.toRequestOptions(this),...n}).then(m=>{const v=s.clone();return v.start=m.nextStart,new Cte({nextQueryParams:v,queryParams:s,total:m.total,results:is._resultsToTypedArray(f,{portal:this},m,n)})}).then(m=>Promise.all(m.results.map(v=>typeof v.when=="function"?v.when():m)).then(()=>m,v=>(SA(v),m)));return i&&EE[i]?EE[i]().then(({default:f})=>(Zt(n),h(f))):h()}signIn(){if(this.authMode===is.AUTH_MODE_ANONYMOUS||this.authMode===is.AUTH_MODE_NO_PROMPT&&!qt)return Promise.reject(new fe("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const t=e=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(e||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=e,this.fetchSelf("immediate"))):this.user&&this.credential===e?null:(this.credential=e,this.fetchSelf("immediate"))).then(i=>{i&&(this.sourceJSON=i,this.read(i))});return qt?qt.getCredential(this.restUrl,{prompt:this.authMode!==is.AUTH_MODE_NO_PROMPT}).then(e=>t(e)):t(this.credential)}normalizeUrl(t){var i;const e=(i=this.credential)==null?void 0:i.token;return this._normalizeSSL(e?t+(t.includes("?")?"&":"?")+"token="+e:t)}requestToTypedArray(t,e,i){return this.request(t,e).then(n=>{const s=is._resultsToTypedArray(i,{portal:this},n);return Promise.all(s.map(h=>typeof h.when=="function"?h.when():n)).then(()=>s,()=>s)})}request(t,e={}){const i={f:"json",...e.query},{authMode:n=this.authMode===is.AUTH_MODE_ANONYMOUS||this.authMode===is.AUTH_MODE_NO_PROMPT?this.authMode:"auto",body:s=null,cacheBust:h=!1,method:f="auto",responseType:m="json",signal:v}=e,x={authMode:n,body:s,cacheBust:h,method:f,query:i,responseType:m,timeout:0,signal:v};return e.withCredentials&&(x.withCredentials=!0),zi(this._normalizeSSL(t),x).then(M=>M.data)}toJSON(){throw new fe("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new is({sourceJSON:t})}_getHelperService(t){const e=this.helperServices&&this.helperServices[t];if(!e)throw new fe("portal:service-not-found",`The \`helperServices\` do not include an entry named "${t}"`);return e}async _fetchBasemaps(t,e){const i=new rc;i.query=t||(vt.apiKey&&cO(this.url)?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),i.disableExtraQuery=!0;const n=await this.queryGroups(i,e);if(!n.total)return[];const s=n.results[0];i.num=100,i.query='type:"Web Map" -type:"Web Application"',i.sortField=s.sortField||"name",i.sortOrder=s.sortOrder||"desc";const h=await s.queryItems(i,e);return h.total?h.results.filter(f=>f.type==="Web Map").map(f=>new Ay({portalItem:f})):[]}async _fetchBasemaps3D(t,e){const i=t||this.basemapGalleryGroupQuery3D;if(!i)return[];const n=new rc({query:i,disableExtraQuery:!0}),s=await this.queryGroups(n,e);if(!s.total)return[];const h=s.results[0];n.num=100,n.query='type:"Web Scene"',n.sortField=h.sortField||"name",n.sortOrder=h.sortOrder||"desc";const f=await h.queryItems(n,e);return f.total?f.results.filter(m=>m.type==="Web Scene").map(m=>new Ay({portalItem:m})):[]}_normalizeSSL(t){return t.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(t){if(t){const e=Ay.fromJSON(t);return e.portalItem={portal:this},e}return null}static _resultsToTypedArray(t,e,i,n){let s;if(i){const h=n!=null?n.signal:null;s=i.listings||i.notifications||i.userInvitations||i.tags||i.items||i.groups||i.comments||i.provisions||i.results||i.relatedItems||i,(t||e)&&(s=s.map(f=>{const m=Object.assign(t?t.fromJSON(f):f,e);return typeof m.load=="function"&&m.load(h),m}))}else s=[];return s}};$e.AUTH_MODE_ANONYMOUS="anonymous",$e.AUTH_MODE_AUTO="auto",$e.AUTH_MODE_IMMEDIATE="immediate",$e.AUTH_MODE_NO_PROMPT="no-prompt",_([T()],$e.prototype,"access",void 0),_([T()],$e.prototype,"allSSL",void 0),_([T()],$e.prototype,"authMode",void 0),_([T()],$e.prototype,"authorizedCrossOriginDomains",void 0),_([Ct("authorizedCrossOriginDomains")],$e.prototype,"readAuthorizedCrossOriginDomains",null),_([T()],$e.prototype,"basemapGalleryGroupQuery",void 0),_([T({json:{name:"3DBasemapGalleryGroupQuery"}})],$e.prototype,"basemapGalleryGroupQuery3D",void 0),_([T()],$e.prototype,"bingKey",void 0),_([T()],$e.prototype,"canListApps",void 0),_([T()],$e.prototype,"canListData",void 0),_([T()],$e.prototype,"canListPreProvisionedItems",void 0),_([T()],$e.prototype,"canProvisionDirectPurchase",void 0),_([T()],$e.prototype,"canSearchPublic",void 0),_([T()],$e.prototype,"canShareBingPublic",void 0),_([T()],$e.prototype,"canSharePublic",void 0),_([T()],$e.prototype,"canSignInArcGIS",void 0),_([T()],$e.prototype,"canSignInIDP",void 0),_([T()],$e.prototype,"colorSetsGroupQuery",void 0),_([T()],$e.prototype,"commentsEnabled",void 0),_([T({type:Date})],$e.prototype,"created",void 0),_([T()],$e.prototype,"credential",void 0),_([T()],$e.prototype,"culture",void 0),_([T()],$e.prototype,"currentVersion",void 0),_([T()],$e.prototype,"customBaseUrl",void 0),_([T()],$e.prototype,"defaultBasemap",void 0),_([Ct("defaultBasemap")],$e.prototype,"readDefaultBasemap",null),_([T()],$e.prototype,"defaultDevBasemap",void 0),_([Ct("defaultDevBasemap")],$e.prototype,"readDefaultDevBasemap",null),_([T({type:Lt})],$e.prototype,"defaultExtent",void 0),_([T()],$e.prototype,"defaultVectorBasemap",void 0),_([Ct("defaultVectorBasemap")],$e.prototype,"readDefaultVectorBasemap",null),_([T()],$e.prototype,"description",void 0),_([T()],$e.prototype,"devBasemapGalleryGroupQuery",void 0),_([T()],$e.prototype,"eueiEnabled",void 0),_([T({readOnly:!0})],$e.prototype,"extraQuery",null),_([T()],$e.prototype,"featuredGroups",void 0),_([T()],$e.prototype,"featuredItemsGroupQuery",void 0),_([T()],$e.prototype,"galleryTemplatesGroupQuery",void 0),_([T()],$e.prototype,"layoutGroupQuery",void 0),_([T()],$e.prototype,"livingAtlasGroupQuery",void 0),_([T()],$e.prototype,"hasCategorySchema",void 0),_([T()],$e.prototype,"helpBase",void 0),_([T()],$e.prototype,"helperServices",void 0),_([T()],$e.prototype,"helpMap",void 0),_([T()],$e.prototype,"homePageFeaturedContent",void 0),_([T()],$e.prototype,"homePageFeaturedContentCount",void 0),_([T()],$e.prototype,"httpPort",void 0),_([T()],$e.prototype,"httpsPort",void 0),_([T()],$e.prototype,"id",void 0),_([T()],$e.prototype,"ipCntryCode",void 0),_([T({readOnly:!0})],$e.prototype,"isOrganization",null),_([T()],$e.prototype,"isPortal",void 0),_([T()],$e.prototype,"isReadOnly",void 0),_([T({readOnly:!0})],$e.prototype,"itemPageUrl",null),_([T()],$e.prototype,"layerTemplatesGroupQuery",void 0),_([T()],$e.prototype,"maxTokenExpirationMinutes",void 0),_([T({type:Date})],$e.prototype,"modified",void 0),_([T()],$e.prototype,"name",void 0),_([T()],$e.prototype,"portalHostname",void 0),_([T()],$e.prototype,"portalMode",void 0),_([T()],$e.prototype,"portalProperties",void 0),_([T()],$e.prototype,"region",void 0),_([T()],$e.prototype,"recycleBinEnabled",void 0),_([T({readOnly:!0})],$e.prototype,"restUrl",null),_([T()],$e.prototype,"rotatorPanels",void 0),_([T()],$e.prototype,"showHomePageDescription",void 0),_([T()],$e.prototype,"sourceJSON",void 0),_([T()],$e.prototype,"staticImagesUrl",void 0),_([T({json:{name:"2DStylesGroupQuery"}})],$e.prototype,"stylesGroupQuery2d",void 0),_([T({json:{name:"stylesGroupQuery"}})],$e.prototype,"stylesGroupQuery3d",void 0),_([T()],$e.prototype,"supportsHostedServices",void 0),_([T()],$e.prototype,"symbolSetsGroupQuery",void 0),_([T()],$e.prototype,"templatesGroupQuery",void 0),_([T()],$e.prototype,"thumbnail",void 0),_([T({readOnly:!0})],$e.prototype,"thumbnailUrl",null),_([T()],$e.prototype,"units",void 0),_([T()],$e.prototype,"url",void 0),_([T()],$e.prototype,"urlKey",void 0),_([Ct("urlKey")],$e.prototype,"readUrlKey",null),_([T()],$e.prototype,"user",void 0),_([Ct("user")],$e.prototype,"readUser",null),_([T()],$e.prototype,"use3dBasemaps",void 0),_([T()],$e.prototype,"useStandardizedQuery",void 0),_([T()],$e.prototype,"useVectorBasemaps",void 0),_([T()],$e.prototype,"vectorBasemapGalleryGroupQuery",void 0),$e=is=_([Y("esri.portal.Portal")],$e);const $s=$e,kE=new FinalizationRegistry(t=>{t.remove()});function Ate(t){const e=qt;return()=>{const i=t.deref();i&&e.findCredential(i.restUrl)&&i.signIn().catch(()=>{})}}let Cl=class extends Re{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e!=null&&e.portalItem&&e.path?{...e,path:$E(e.path,e.portalItem)}:e}set path(e){e!=null&&vs(e)?Ce.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return $E(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",i){const n=this.cdnUrl;if(n==null)throw new fe("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(n,{responseType:e,query:{token:this.portalItem.apiKey},signal:i==null?void 0:i.signal})}async update(e,i){const{addOrUpdateResources:n}=await be(()=>import("./resourceUtils-ClC4N9I2.js"),[],import.meta.url);return await n(this.portalItem,[{resource:this,content:e,compress:i==null?void 0:i.compress,access:i==null?void 0:i.access}],"update",i),this}hasPath(){return this.path!=null}};function $E(t,e){return t==null?t:(t=t.replace(/^\/+/,""),e!=null&&vs(t)&&(t=eS(t,e.itemUrl)),t==null?void 0:t.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}_([T()],Cl.prototype,"portalItem",void 0),_([T({type:String,value:null})],Cl.prototype,"path",null),_([qi("path")],Cl.prototype,"_castPath",null),_([T({type:String,readOnly:!0})],Cl.prototype,"url",null),_([T({type:String,readOnly:!0})],Cl.prototype,"cdnUrl",null),_([T({type:String,readOnly:!0})],Cl.prototype,"itemRelativeUrl",null),Cl=_([Y("esri.portal.PortalItemResource")],Cl);const Ote=Cl;let w1=class extends Re{constructor(e){super(e),this.created=null,this.rating=null}};_([T()],w1.prototype,"created",void 0),_([T()],w1.prototype,"rating",void 0),w1=_([Y("esri.portal.PortalRating")],w1);const x_=w1;function Pm(t,e){var n;const i=(n=e==null?void 0:e.url)==null?void 0:n.path;if(t&&i&&(t=Ks(t,i,{preserveProtocolRelative:!0}),e.portalItem&&e.readResourcePaths)){const s=eS(t,e.portalItem.itemUrl);s!=null&&Pte.test(s)&&e.readResourcePaths.push(e.portalItem.resourceFromPath(s).path)}return(t=Ux(t,e==null?void 0:e.portal))&&Hw.test(t)?XS(t):t}function Vw(t,e,i=Xg.YES){var s,h;if((t=t&&Hw.test(t)?NL(t):t)==null)return t;!vs(t)&&(e!=null&&e.blockedRelativeUrls)&&e.blockedRelativeUrls.push(t);let n=Ks(t);if(e){const f=((s=e.verifyItemRelativeUrls)==null?void 0:s.rootPath)||((h=e.url)==null?void 0:h.path);if(f){const m=Ux(f,e.portal),v=Ux(n,e.portal);n=eS(v,m,m),n!=null&&n!==v&&n!==t&&e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.writtenUrls.push(n)}}return n=LL(n,e==null?void 0:e.portal),vs(n)&&(n=cc(n)),e!=null&&e.resources&&(e!=null&&e.portalItem)&&!vs(n)&&!ep(n)&&i===Xg.YES&&e.resources.toKeep.push({resource:e.portalItem.resourceFromPath(n),compress:!1}),n}function YS(t,e,i){return Pm(t,i)}function Jf(t,e,i,n){const s=Vw(t,n);s!==void 0&&(e[i]=s)}const Hw=/\/items\/([^/]+)\/resources\/(.*)/,Pte=/^\.\/resources\//;function Rte(t){const e=(t==null?void 0:t.match(Hw))??null;return(e==null?void 0:e[1])??null}function Lte(t){const e=(t==null?void 0:t.match(Hw))??null;if(e==null)return null;const i=e[2],n=i.lastIndexOf("/");if(n===-1){const{path:f,extension:m}=zM(i);return{prefix:null,filename:f,extension:m}}const{path:s,extension:h}=zM(i.slice(n+1));return{prefix:i.slice(0,n),filename:s,extension:h}}function LL(t,e){return e&&!e.isPortal&&e.urlKey&&e.customBaseUrl?Y5(t,`${e.urlKey}.${e.customBaseUrl}`,e.portalHostname):t}function Ux(t,e){if(!e||e.isPortal||!e.urlKey||!e.customBaseUrl)return t;const i=`${e.urlKey}.${e.customBaseUrl}`,n=K6();return jf(n,`${n.scheme}://${i}`)?Y5(t,e.portalHostname,i):Y5(t,i,e.portalHostname)}function XS(t){if(!t)return t||null;let e=t;return e&&qt&&!qt.findCredential(e)&&(e=QA(e),e=e.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),e=e.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),e=e.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),e}function NL(t){if(!t)return t||null;let e=t;return e=e.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com"),e=e.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com"),e=e.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"),e&&qt&&!qt.findCredential(e)&&(e=QA(e)),e}var Xg;(function(t){t[t.YES=0]="YES",t[t.NO=1]="NO"})(Xg||(Xg={}));const V6e=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return Xg},ensureMainOnlineDomain:LL,fromCDNUrl:NL,fromJSON:Pm,itemIdFromResourceUrl:Rte,prefixAndFilenameFromResourceUrl:Lte,read:YS,toCDNUrl:XS,toJSON:Vw,write:Jf},Symbol.toStringTag,{value:"Module"}));var Iu;const Nte=new Set(["3DTiles Service","CSV","Feature Collection","Feature Service","Feed","GeoJson","Group Layer","Image Service","KML","Map Service","Media Layer","Scene Service","Stream Service","Vector Tile Service","WFS","WMS","WMTS"]),Dte=new Set(["KML","GeoJson","CSV"]);let it=Iu=class extends _m(na){static from(t){return yw(Iu,t)}constructor(t){super(t),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const t=this.type,e=this.typeKeywords||[];let i=t;return t==="Feature Service"||t==="Feature Collection"?i=e.includes("Table")?"Table":e.includes("Route Layer")?"Route Layer":e.includes("Markup")?"Markup":"Feature Layer":t==="Image Service"?i=e.includes("Elevation 3D Layer")?"Elevation Layer":e.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":t==="Scene Service"?i="Scene Layer":t==="Video Service"?i="Video Layer":t==="Scene Package"?i="Scene Layer Package":t==="Stream Service"?i="Feature Layer":t==="Geoprocessing Service"?i=e.includes("Web Tool")?"Tool":"Geoprocessing Service":t==="Geoenrichment Service"?i="GeoEnrichment Service":t==="Geocoding Service"?i="Locator":t==="Microsoft Powerpoint"?i="Microsoft PowerPoint":t==="GeoJson"?i="GeoJSON":t==="Globe Service"?i="Globe Layer":t==="Vector Tile Service"?i="Tile Layer":t==="netCDF"?i="NetCDF":t==="Map Service"?i=e.includes("Spatiotemporal")||!e.includes("Hosted Service")&&!e.includes("Tiled")||e.includes("Relational")?"Map Image Layer":"Tile Layer":t!=null&&t.toLowerCase().includes("add in")?i=t.replaceAll(/(add in)/gi,"Add-In"):t==="datastore catalog service"?i="Big Data File Share":t==="Compact Tile Package"?i="Tile Package (tpkx)":t==="Raster function template"?i="Raster Function Template":t==="OGCFeatureServer"?i="OGC Feature Layer":t==="web mapping application"&&e.includes("configurableApp")?i="Instant App":t==="Insights Page"?i="Insights Report":t==="Excalibur Imagery Project"?i="Excalibur Project":t==="3DTiles Service"?i="3D tiles layer":t==="3DTiles Package"&&(i="3D tiles package"),i}readExtent(t){return t&&t.length?new Lt(t[0][0],t[0][1],t[1][0],t[1][1]):null}get iconUrl(){var P;const t=((P=this.type)==null?void 0:P.toLowerCase())||"",e=this.typeKeywords||[],i="esri/images/portal/",n="16";let s,h=!1,f=!1,m=!1,v=!1,x=!1,M=!1,$=!1,I=!1;return t.indexOf("service")>0||t==="feature collection"||t==="kml"||t==="wms"||t==="wmts"||t==="wfs"?(h=e.includes("Hosted Service"),t==="feature service"||t==="feature collection"||t==="kml"||t==="wfs"?(f=e.includes("Table"),m=e.includes("Route Layer"),v=e.includes("Markup"),x=e.includes("Spatiotemporal"),M=e.includes("UtilityNetwork"),s=x&&f?"spatiotemporaltable":f?"table":m?"routelayer":v?"markup":x?"spatiotemporal":M?"utilitynetwork":h?"featureshosted":"features"):t==="map service"||t==="wms"||t==="wmts"?(x=e.includes("Spatiotemporal"),$=e.includes("Relational"),s=x||$?"mapimages":h||e.includes("Tiled")||t==="wmts"?"maptiles":"mapimages"):s=t==="scene service"?e.includes("Line")?"sceneweblayerline":e.includes("3DObject")?"sceneweblayermultipatch":e.includes("Point")?"sceneweblayerpoint":e.includes("IntegratedMesh")?"sceneweblayermesh":e.includes("PointCloud")?"sceneweblayerpointcloud":e.includes("Polygon")?"sceneweblayerpolygon":e.includes("Building")?"sceneweblayerbuilding":e.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":t==="image service"?e.includes("Elevation 3D Layer")?"elevationlayer":e.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":t==="stream service"?"streamlayer":t==="vector tile service"?"vectortile":t==="datastore catalog service"?"datastorecollection":t==="geocoding service"?"geocodeservice":t==="video service"?e.includes("Live Stream")?"livestreamvideolayer":"videolayer":t==="geoprocessing service"?e.includes("Web Tool")?"tool":"layers":t==="geodata service"?"geodataservice":t==="3dtiles service"?e.includes("3DObject")?"3dobjecttileslayer":e.includes("IntegratedMesh")?"integratedmeshtileslayer":"3dtileslayer":"layers"):t==="web map"||t==="cityengine web scene"?s="maps":t==="web scene"?s=e.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":t==="web mapping application"&&e.includes("configurableApp")?s="instantapps":t==="web mapping application"||t==="mobile application"||t==="application"||t==="operation view"||t==="desktop application"?s="apps":t==="map document"||t==="map package"||t==="published map"||t==="scene document"||t==="globe document"||t==="basemap package"||t==="mobile basemap package"||t==="mobile map package"||t==="project package"||t==="project template"||t==="pro map"||t==="layout"||t==="layer"&&e.includes("ArcGIS Pro")||t==="explorer map"&&e.indexOf("Explorer Document")?s="mapsgray":t==="service definition"||t==="shapefile"||t==="cad drawing"||t==="geojson"||t==="netcdf"||t==="administrative report"?s="datafiles":t==="360 vr experience"?s="360vr":t==="explorer add in"||t==="desktop add in"||t==="windows viewer add in"||t==="windows viewer configuration"?s="appsgray":t==="arcgis pro add in"||t==="arcgis pro configuration"?s="addindesktop":t==="pdf"?s="pdf":t==="microsoft word"?s="word":t==="microsoft excel"?s="excel":t==="microsoft powerpoint"?s="ppt":t==="rule package"||t==="file geodatabase"||t==="sqlite geodatabase"||t==="csv collection"||t==="kml collection"||t==="windows mobile package"||t==="map template"||t==="desktop application template"||t==="gml"||t==="arcpad package"||t==="code sample"||t==="document link"||t==="earth configuration"||t==="operations dashboard add in"||t==="rules package"||t==="workflow manager package"||t==="explorer map"&&e.includes("Explorer Mapping Application")||e.includes("Document")?s="datafilesgray":t==="network analysis service"||t==="geoprocessing service"||t==="geodata service"||t==="geometry service"||t==="geoprocessing package"||t==="locator package"||t==="geoprocessing sample"||t==="workflow manager service"?s="toolsgray":t==="layer"||t==="layer package"||t==="explorer layer"?s="layersgray":t==="analysis model"?s="analysismodel":t==="scene package"?s="scenepackage":t==="3dtiles package"?s="3dtileslayerpackage":t==="3dtiles service"?s="3dtileslayer":t==="mobile scene package"?s="mobilescenepackage":t==="tile package"||t==="compact tile package"?s="tilepackage":t==="task file"?s="taskfile":t==="report template"?s="report-template":t==="statistical data collection"?s="statisticaldatacollection":t==="insights workbook"?s="workbook":t==="insights model"?s="insightsmodel":t==="insights page"?s="insightspage":t==="insights theme"?s="insightstheme":t==="hub initiative"?s="hubinitiative":t==="hub page"?s="hubpage":t==="hub site application"?s="hubsite":t==="hub event"?s="hubevent":t==="hub project"?s="hubproject":t==="relational database connection"?s="relationaldatabaseconnection":t==="big data file share"?s="datastorecollection":t==="image collection"?s="imagecollection":t==="desktop style"?s="desktopstyle":t==="style"?s=e.includes("Dictionary")?"dictionarystyle":"style":t==="dashboard"?s="dashboard":t==="raster function template"?s="rasterprocessingtemplate":t==="vector tile package"?s="vectortilepackage":t==="ortho mapping project"?s="orthomappingproject":t==="ortho mapping template"?s="orthomappingtemplate":t==="solution"?s="solutions":t==="geopackage"?s="geopackage":t==="deep learning package"?s="deeplearningpackage":t==="real time analytic"?s="realtimeanalytics":t==="big data analytic"?s="bigdataanalytics":t==="feed"?s="feed":t==="excalibur imagery project"?s="excaliburimageryproject":t==="notebook"?s="notebook":t==="storymap"?s="storymap":t==="survey123 add in"?s="survey123addin":t==="mission"?s="mission":t==="mission report"?s="missionreport":t==="mission template"?s="missiontemplate":t==="quickcapture project"?s="quickcaptureproject":t==="pro report"?s="proreport":t==="pro report template"?s="proreporttemplate":t==="urban model"?s="urbanmodel":t==="web experience"?s="experiencebuilder":t==="web experience template"?s="webexperiencetemplate":t==="experience builder widget"?s="experiencebuilderwidget":t==="experience builder widget package"?s="experiencebuilderwidgetpackage":t==="workflow"?s="workflow":t==="kernel gateway connection"?s="kernelgatewayconnection":t==="insights script"?s="insightsscript":t==="hub initiative template"?s="hubinitiativetemplate":t==="storymap theme"?s="storymaptheme":t==="knowledge graph"?s="knowledgegraph":t==="knowledge graph layer"?s="knowledgegraphlayer":t==="knowledge studio project"?s="knowledgestudio":t==="native application"?s="nativeapp":t==="native application installer"?s="nativeappinstaller":t==="web link chart"?s="linkchart":t==="knowledge graph web investigation"?s="investigation":t==="ogcfeatureserver"?s="features":t==="pro project"?s="proproject":t==="insights workbook package"?s="insightsworkbookpackage":t==="apache parquet"?s="apacheparquet":t==="notebook code snippet library"?s="notebookcodesnippets":t==="suitability model"?s="suitabilitymodel":t==="esri classifier definition"?s="classifierdefinition":t==="esri classification schema"?s="classificationschema":t==="insights data engineering workbook"?s="dataengineeringworkbook":t==="insights data engineering model"?s="dataengineeringmodel":t==="deep learning studio project"?s="deeplearningproject":t==="discussion"?s="discussion":t==="allsource project"?s="allsourceproject":t==="api key"?s="apikey":t==="data pipeline"?s="datapipelines":t==="group layer"?(I=e.includes("Map"),s=I?"layergroup2d":"layergroup"):s=t==="media layer"?"onlinemedialayer":t==="form"?e.includes("Survey123")?"survey":"datafilesgray":t==="csv"?"csv":t==="image"?"image":"maps",s?Tt(i+s+n+".png"):null}get isLayer(){return this.type!=null&&Nte.has(this.type)}get itemCdnUrl(){return XS(this.itemUrl)}get itemPageUrl(){var e;const t=(e=this.portal)==null?void 0:e.itemPageUrl;return t&&this.id?`${t}?id=${this.id}`:null}get itemUrl(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t&&this.id?`${t}/content/items/${this.id}`:null}get thumbnailUrl(){var i;const t=this.itemUrl,e=this.thumbnail;return t&&e?((i=this.portal)==null?void 0:i.normalizeUrl(`${t}/info/${e}?f=json`))??null:null}get userItemUrl(){var i,n,s;const t=(i=this.portal)==null?void 0:i.restUrl;if(!t)return null;const e=this.owner||((s=(n=this.portal)==null?void 0:n.user)==null?void 0:s.username);return e?`${t}/content/users/${this.ownerFolder?`${e}/${this.ownerFolder}`:e}/items/${this.id}`:null}load(t){const e=this.portal??(this.portal=$s.getDefault()),i=e.load(t).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?e.request(this.itemUrl,{signal:t!=null?t.signal:null,query:{token:this.apiKey}}):{}).then(n=>{this.sourceJSON=n,this.read(n)});return this.addResolvingPromise(i),Promise.resolve(this)}async addRating(t){const e={method:"post",query:{}};return t instanceof x_&&(t=t.rating),t==null||isNaN(t)||typeof t!="number"||(e.query.rating=t),this.portal?(await this.portal.request(this.itemUrl+"/addRating",e),new x_({rating:t,created:new Date})):null}clone(){const t={access:this.access,accessInformation:this.accessInformation,applicationProxies:_e(this.applicationProxies),avgRating:this.avgRating,categories:_e(this.categories),created:_e(this.created),culture:this.culture,description:this.description,extent:_e(this.extent),groupCategories:_e(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:_e(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:_e(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:_e(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:_e(this.typeKeywords),url:this.url};this.loaded&&(t.loadStatus="loaded");const e=new Iu({sourceJSON:this.sourceJSON}).set(t);return e._set("isOrgItem",this.isOrgItem),e}createPostQuery(){var i;const t=this.toJSON();for(const n of["tags","typeKeywords","categories"])t[n]=(i=t[n])==null?void 0:i.join(", ");const{extent:e}=t;return e&&(t.extent=JSON.stringify(e)),t}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(t="json",e){return this.portal.request(this.itemUrl+"/data",{responseType:t,...e,query:{token:this.apiKey}})}async fetchRating(t){const e=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...t});return e.rating!=null?(e.created=new Date(e.created),new x_(e)):null}fetchRelatedItems(t,e){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...t,token:this.apiKey},...e},Iu)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(t=>(this.sourceJSON=t,this.read(t),this))}update(t){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const e=t==null?void 0:t.data,i={method:"post"};i.query=this.createPostQuery();for(const n in i.query)i.query[n]===null&&(i.query[n]="");return i.query.clearEmptyFields=!0,e!=null&&(typeof e=="string"?i.query.text=e:typeof e=="object"&&(i.query.text=JSON.stringify(e))),this.portal.request(`${this.userItemUrl}/update`,i).then(()=>this.reload())}):Promise.reject(new fe("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(t){if(!this.id)throw new fe("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:e,itemUrl:i}=this;await e.signIn();const{copyResources:n,folder:s,tags:h,title:f}=t||{},m={method:"post",query:{copyPrivateResources:n==="all",folder:typeof s=="string"?s:s==null?void 0:s.id,includeResources:!!n,tags:h==null?void 0:h.join(","),title:f}},{itemId:v}=await e.request(`${i}/copy`,m);return new Iu({id:v,portal:e})}updateThumbnail(t){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const e=t.thumbnail,i=t.filename,n={method:"post"};if(typeof e=="string")ep(e)?n.query={data:e}:n.query={url:Ks(e)},i!=null&&(n.query.filename=i);else{const s=new FormData;i!=null?s.append("file",e,i):s.append("file",e),n.body=s}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,n).then(()=>this.reload())}):Promise.reject(new fe("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(t={},e){const{fetchResources:i}=await be(()=>import("./resourceUtils-ClC4N9I2.js"),[],import.meta.url);return i(this,t,e)}async addResource(t,e,i){const{addOrUpdateResources:n}=await be(()=>import("./resourceUtils-ClC4N9I2.js"),[],import.meta.url);return t.portalItem=this,await n(this,[{resource:t,content:e,compress:i==null?void 0:i.compress,access:i==null?void 0:i.access}],"add",i),t}async removeResource(t,e){const{removeResource:i}=await be(()=>import("./resourceUtils-ClC4N9I2.js"),[],import.meta.url);if(t.portalItem&&t.portalItem.itemUrl!==this.itemUrl)throw new fe("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return i(this,t,e)}async removeAllResources(t){const{removeAllResources:e}=await be(()=>import("./resourceUtils-ClC4N9I2.js"),[],import.meta.url);return e(this,t)}resourceFromPath(t){return new Ote({portalItem:this,path:t})}toJSON(){var i,n;const t=this.extent,e={accessInformation:this.accessInformation,categories:_e(this.categories),created:(i=this.created)==null?void 0:i.getTime(),description:this.description,extent:t&&[[t.xmin,t.ymin],[t.xmax,t.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:(n=this.modified)==null?void 0:n.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:_e(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:_e(this.typeKeywords),url:this.url};return AB(e)}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new Iu({sourceJSON:t})}_getPostQuery(){const t=this.toJSON();for(const e in t)e==="tags"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="typeKeywords"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="extent"&&t[e]&&(t[e]=JSON.stringify(t[e]));return t}};_([T({type:["private","shared","org","public"]})],it.prototype,"access",void 0),_([T()],it.prototype,"accessInformation",void 0),_([T({type:String})],it.prototype,"apiKey",void 0),_([T({json:{read:{source:"appProxies"}}})],it.prototype,"applicationProxies",void 0),_([T()],it.prototype,"avgRating",void 0),_([T()],it.prototype,"categories",void 0),_([T({type:Date})],it.prototype,"created",void 0),_([T()],it.prototype,"culture",void 0),_([T()],it.prototype,"description",void 0),_([T({readOnly:!0})],it.prototype,"displayName",null),_([T({type:Lt})],it.prototype,"extent",void 0),_([Ct("extent")],it.prototype,"readExtent",null),_([T()],it.prototype,"groupCategories",void 0),_([T({readOnly:!0})],it.prototype,"iconUrl",null),_([T()],it.prototype,"id",void 0),_([T({readOnly:!0})],it.prototype,"isLayer",null),_([T({type:Boolean,readOnly:!0})],it.prototype,"isOrgItem",void 0),_([T()],it.prototype,"itemControl",void 0),_([T({readOnly:!0})],it.prototype,"itemPageUrl",null),_([T({readOnly:!0})],it.prototype,"itemUrl",null),_([T()],it.prototype,"licenseInfo",void 0),_([T({type:Date})],it.prototype,"modified",void 0),_([T()],it.prototype,"name",void 0),_([T()],it.prototype,"numComments",void 0),_([T()],it.prototype,"numRatings",void 0),_([T()],it.prototype,"numViews",void 0),_([T()],it.prototype,"owner",void 0),_([T()],it.prototype,"ownerFolder",void 0),_([T({type:$s})],it.prototype,"portal",void 0),_([T()],it.prototype,"screenshots",void 0),_([T()],it.prototype,"size",void 0),_([T()],it.prototype,"snippet",void 0),_([T()],it.prototype,"sourceJSON",void 0),_([T({type:String})],it.prototype,"sourceUrl",void 0),_([T({type:String})],it.prototype,"spatialReference",void 0),_([T()],it.prototype,"tags",void 0),_([T()],it.prototype,"thumbnail",void 0),_([T({readOnly:!0})],it.prototype,"thumbnailUrl",null),_([T()],it.prototype,"title",void 0),_([T()],it.prototype,"type",void 0),_([T()],it.prototype,"typeKeywords",void 0),_([T({type:String,json:{read(t,e){var i;if(Dte.has(e.type)){const n=(i=this.portal)==null?void 0:i.restUrl;t||(t=n&&this.id?`${n}/content/items/${this.id}/data`:null)}return t}}})],it.prototype,"url",void 0),_([T({readOnly:!0})],it.prototype,"userItemUrl",null),it=Iu=_([Y("esri.portal.PortalItem")],it);const DL=it,zL=Object.freeze(Object.defineProperty({__proto__:null,default:DL},Symbol.toStringTag,{value:"Module"}));async function zte(t){if(!t)return;const e=t.includes("-vector")?t.slice(0,t.indexOf("-vector")):t.includes("-3d")?t.slice(0,t.indexOf("-3d")):t,i=await VS("esri/t9n/basemaps");return i[t]||i[e]}const Kf={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return Tt("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return Tt("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return Tt("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return Tt("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return Tt("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return Tt("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get"dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return Tt("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return Tt("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return Tt("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return Tt("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return Tt("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return Tt("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return Tt("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return Tt("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return Tt("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return Tt("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/8628d259c9d14bdc848771c23c513940/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap",visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return Tt("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"arcgis-imagery":{get thumbnailUrl(){return Tt("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return Tt("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return Tt("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return Tt("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return Tt("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return Tt("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return Tt("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return Tt("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return Tt("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return Tt("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]},"arcgis-human-geography":{title:"Human Geography",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Base",title:"Human Geography Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Detail",title:"Human Geography Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Label",title:"Human Geography Label",isReference:!0}]},"arcgis-human-geography-dark":{title:"Human Geography (Dark)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Base",title:"Human Geography Dark Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Detail",title:"Human Geography Dark Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Label",title:"Human Geography Dark Label",isReference:!0}]}},Fte=new Set(["ar","bs","ca","hr","cs","da","nl","en","et","fi","fr","de","el","he","hu","id","it","ja","ko","lv","lt","nb","pl","ro","ru","sr","es","sv","th","tr","uk","vi"]);let Qc=class extends Re{constructor(e){super(e),this.id=null,this.language=null,this.places=null,this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/webmaps",this.worldview=null}getLanguageParamValue(){if(this.language)return this.language;const e=Ur().toLowerCase();switch(e){case"pt-br":return"pt-BR";case"pt-pt":return"pt-PT";case"zh-cn":return"zh-CN";case"zh-hk":return"zh-HK";case"zh-tw":return"zh-TW"}const i=_K(e);return i==="pt"?"pt-BR":i&&Fte.has(i)?i:"global"}};_([T()],Qc.prototype,"id",void 0),_([T()],Qc.prototype,"language",void 0),_([T()],Qc.prototype,"places",void 0),_([T()],Qc.prototype,"serviceUrl",void 0),_([T()],Qc.prototype,"worldview",void 0),Qc=_([Y("esri.support.BasemapStyle")],Qc);const jte=Qc;function Gte(t){return GL(t)||Bte(t)}function Vv(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="feature"}function Vte(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="graphics"}function Hte(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="map-notes"&&"sublayers"in t}function FL(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="knowledge-graph"&&"layers"in t}function jL(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="link-chart"&&"layers"in t}function Bte(t){return(t==null?void 0:t.type)==="scene"}function _1(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="subtype-group"&&"sublayers"in t}function Au(t){return(t==null?void 0:t.type)==="subtype-sublayer"}function GL(t){const e=t==null?void 0:t.type;return e==="imagery-tile"||e==="tile"||e==="open-street-map"||e==="vector-tile"||e==="web-tile"||e==="wmts"}function Ute(t){const e=t==null?void 0:t.type;return e==="base-tile"||e==="tile"||e==="elevation"||e==="imagery-tile"||e==="base-elevation"||e==="open-street-map"||e==="wcs"||e==="web-tile"||e==="wmts"||e==="vector-tile"}const B6e={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function U6e(t){const e=t==null?void 0:t.type;return e==="building-scene"||e==="integrated-mesh"||e==="point-cloud"||e==="scene"}function qte(t){return t==="integrated-mesh"||t==="integrated-mesh-3dtiles"}function Bw(t){var e;return(t==null?void 0:t.type)==="feature"&&!t.url&&((e=t.source)==null?void 0:e.type)==="memory"}function q6e(t){var e;return((t==null?void 0:t.type)==="feature"||(t==null?void 0:t.type)==="subtype-group")&&((e=t.source)==null?void 0:e.type)==="feature-layer"}function Wte(t){if(t.activeLayer){const e=t.activeLayer.tileMatrixSet;if(e)return e;const i=t.activeLayer.tileMatrixSets;if(i)return i}return null}async function W6e(t,e){const i=qt==null?void 0:qt.findServerInfo(t);if((i==null?void 0:i.currentVersion)!=null)return i.owningSystemUrl||null;const n=t.toLowerCase().indexOf("/rest/services");if(n===-1)return null;const s=`${t.substring(0,n)}/rest/info`,h=e!=null?e.signal:null,{data:f}=await zi(s,{query:{f:"json"},responseType:"json",signal:h});return(f==null?void 0:f.owningSystemUrl)||null}function Zte(t){if(!("capabilities"in t))return!1;switch(t.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"sublayer":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function Jte(t){return Zte(t)?"effectiveCapabilities"in t?t.effectiveCapabilities:t.capabilities:null}function Kte(t){if(!("editingEnabled"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}function Yte(t){return!!Kte(t)&&("effectiveEditingEnabled"in t?t.effectiveEditingEnabled:t.editingEnabled)}const Xte=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),Qte=new Set(["catalog","csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","knowledge-graph","map-image","map-notes","media","ogc-feature","oriented-imagery","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function eie(t){return t.layerContainerType==="basemap"?Xte:t.layerContainerType==="operational-layers"?Qte:null}function tie(t,e){if(e.restrictedWebMapWriting){const i=eie(e);return i==null||i.has(t.type)&&!Bw(t)}return!0}function iie(t,e){var i;if(e)if(Bw(t)){const n=gm("featureCollection.layers",e),s=(i=n==null?void 0:n[0])==null?void 0:i.layerDefinition;s&&CE(t,s)}else t.type!=="group"&&CE(t,e)}function CE(t,e){"maxScale"in t&&(e.maxScale=Bb(t.maxScale)??void 0),"minScale"in t&&(e.minScale=Bb(t.minScale)??void 0)}function nie(t,e){if(iie(t,e),e&&(e.id=t.id,"blendMode"in t&&(e.blendMode=t.blendMode,e.blendMode==="normal"&&delete e.blendMode),e.opacity=Bb(t.opacity)??void 0,e.title=t.title||"Layer",e.visibility=t.visible,"legendEnabled"in t&&t.type!=="wmts"))if(Bw(t)){const i=e.featureCollection;i&&(i.showLegend=t.legendEnabled)}else e.showLegend=t.legendEnabled}function IE(t,e,i){if(!t.persistenceEnabled)return null;if(!("write"in t)||!t.write)return i!=null&&i.messages&&i.messages.push(new fe("layer:unsupported",`Layers (${t.title}, ${t.id}) of type '${t.declaredClass}' cannot be persisted`,{layer:t})),null;if(Bw(t)&&!t.isTable)e=t.resourceInfo;else if(tie(t,i)){const n={};return t.write(n,i)?n:null}return e!=null&&nie(t,e=_e(e)),e}var x1;let rie=0,ns=x1=class extends _m(na){constructor(t){super(t),this.id=null,this.portalItem=null,this.spatialReference=null,this.style=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+rie++,this.baseLayers=new Pe,this.referenceLayers=new Pe;const e=n=>{n.parent&&n.parent!==this&&"remove"in n.parent&&n.parent.remove(n),n.parent=this,n.type==="elevation"&&Ce.getLogger(this).error(`Layer '${n.title}, id:${n.id}' of type '${n.type}' is not supported as a basemap layer and will therefore be ignored.`)},i=n=>{n.parent=null};this.addHandles([this.baseLayers.on("after-add",n=>e(n.item)),this.referenceLayers.on("after-add",n=>e(n.item)),this.baseLayers.on("after-remove",n=>i(n.item)),this.referenceLayers.on("after-remove",n=>i(n.item))])}initialize(){this.when().catch(t=>{Ce.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,t)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const t=this.baseLayers.toArray();for(const i of t)i.destroy();const e=this.referenceLayers.toArray();for(const i of e)i.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),this.portalItem=yt(this.portalItem)}normalizeCtorArgs(t){return t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),delete(t={...t}).resourceInfo),t}set baseLayers(t){this._set("baseLayers",Xh(t,this._get("baseLayers")))}_writeBaseLayers(t,e,i){const n=[];t&&(i={...i,layerContainerType:"basemap"},this.baseLayers.forEach(s=>{const h=IE(s,i.webmap?i.webmap.getLayerJSONFromResourceInfo(s):null,i);h!=null&&n.push(h)}),this.referenceLayers.forEach(s=>{const h=IE(s,i.webmap?i.webmap.getLayerJSONFromResourceInfo(s):null,i);h!=null&&(s.type!=="scene"&&(h.isReference=!0),n.push(h))})),e.baseMapLayers=n}set referenceLayers(t){this._set("referenceLayers",Xh(t,this._get("referenceLayers")))}writeTitle(t,e){e.title=t||"Basemap"}load(t){return this.addResolvingPromise(this._loadFromSource(t)),Promise.resolve(this)}loadAll(){return PL(this,t=>{t(this.baseLayers,this.referenceLayers)})}clone(){const t={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(e=>Ab(e)?e.clone():e),referenceLayers:this.referenceLayers.map(e=>Ab(e)?e.clone():e)};return this.loaded&&(t.loadStatus="loaded"),new x1({resourceInfo:this.resourceInfo}).set(t)}read(t,e){this.resourceInfo||this._set("resourceInfo",{data:t,context:e}),super.read(t,e)}write(t,e){var i;return t=t||{},e!=null&&e.origin||(e={origin:"web-map",...e}),super.write(t,e),!this.loaded&&((i=this.resourceInfo)!=null&&i.data.baseMapLayers)&&(t.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(n=>{const s=_e(n);return s.url&&Ja(s.url)&&(s.url=`https:${s.url}`),s.templateUrl&&Ja(s.templateUrl)&&(s.templateUrl=`https:${s.templateUrl}`),s})),t}async _loadFromSource(t){const{resourceInfo:e,portalItem:i,style:n}=this;Zt(t);const s=[];if(e){const h=e.context?e.context.url:null;if(s.push(this._loadLayersFromJSON(e.data,h,t)),e.data.id&&!e.data.title){const f=e.data.id;s.push(zte(f).then(m=>{m&&this.read({title:m},e.context)}))}}else i?s.push(this._loadFromItem(i,t)):n&&s.push(this._loadFromStylesService(n,t));await Promise.all(s)}async _loadLayersFromJSON(t,e,i){var v,x;const n=(v=this.resourceInfo)==null?void 0:v.context,s=((x=this.portalItem)==null?void 0:x.portal)||(n==null?void 0:n.portal)||null,h=oie[(n==null?void 0:n.origin)||""]??"web-map",{populateOperationalLayers:f}=await be(async()=>{const{populateOperationalLayers:M}=await import("./layersCreator-BNFmrHi6.js");return{populateOperationalLayers:M}},__vite__mapDeps([191,192,193,194,175,183]),import.meta.url),m=[];if(Zt(i),t.baseMapLayers&&Array.isArray(t.baseMapLayers)){const M={context:{...n,origin:h,url:e,portal:s,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},$=L=>h==="web-scene"&&L.layerType==="ArcGISSceneServiceLayer"||L.isReference,I=f(this.baseLayers,t.baseMapLayers.filter(L=>!$(L)),M);m.push(I);const P=f(this.referenceLayers,t.baseMapLayers.filter($),M);m.push(P)}await Promise.allSettled(m)}async _loadFromItem(t,e){const i=await t.load(e),n=await i.fetchData("json",e),s=_r(t.itemUrl??"");return this._set("resourceInfo",{data:n.baseMap??{},context:{origin:sie[t.type||""]??"web-map",portal:t.portal||$s.getDefault(),url:s}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:n.spatialReference},this.resourceInfo.context),this.read({title:t.title,thumbnailUrl:t.thumbnailUrl},{origin:"portal-item",portal:t.portal||$s.getDefault(),url:s}),this._loadLayersFromJSON(this.resourceInfo.data,s,e)}async _loadFromStylesService(t,e){const i=`${t.serviceUrl}/${t.id}`,n=(await zi(i,{query:{language:t.getLanguageParamValue(),places:t.places,worldview:t.worldview},signal:e==null?void 0:e.signal})).data,s=_r(i);return this._set("resourceInfo",{data:n.baseMap??{},context:{origin:"web-map",url:s}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:n.spatialReference},this.resourceInfo.context),this._loadLayersFromJSON(this.resourceInfo.data,s,e)}static fromId(t){const e=Kf[t];return e?e.itemId?new x1({portalItem:{id:e.itemId,portal:{url:"https://www.arcgis.com"}}}):x1.fromJSON(e,{origin:e.is3d?"web-scene":"web-map"}):null}};_([T({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(t,e,i,n){this._writeBaseLayers(t,e,n)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:Pe}},writer(t,e,i,n){this._writeBaseLayers(t,e,n)}}}}}})],ns.prototype,"baseLayers",null),_([T({type:String,json:{origins:{"web-scene":{write:!0}}}})],ns.prototype,"id",void 0),_([T({type:DL})],ns.prototype,"portalItem",void 0),_([T()],ns.prototype,"referenceLayers",null),_([T({readOnly:!0})],ns.prototype,"resourceInfo",void 0),_([T({type:tt})],ns.prototype,"spatialReference",void 0),_([T({type:jte})],ns.prototype,"style",void 0),_([T()],ns.prototype,"thumbnailUrl",void 0),_([T({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],ns.prototype,"title",void 0),_([_t("title")],ns.prototype,"writeTitle",null),ns=x1=_([Y("esri.Basemap")],ns);const sie={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},oie={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"},Fh=ns,aie=Object.freeze(Object.defineProperty({__proto__:null,default:Fh},Symbol.toStringTag,{value:"Module"})),m2={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function VL(t){return!!m2[t]||!!m2[t.toLowerCase()]}function QS(t){return m2[t]??m2[t.toLowerCase()]}function lie(t){return[...QS(t)]}function S_(t,e,i){i<0&&++i,i>1&&--i;const n=6*i;return n<1?t+(e-t)*n:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}function HL(t,e,i,n=1){const s=(t%360+360)%360/360,h=i<=.5?i*(e+1):i+e-i*e,f=2*i-h;return[Math.round(255*S_(f,h,s+1/3)),Math.round(255*S_(f,h,s)),Math.round(255*S_(f,h,s-1/3)),n]}function cie(t){const e=t.length>5,i=e?8:4,n=(1<<i)-1,s=e?1:17,h=e?t.length===9:t.length===5;let f=+("0x"+t.substr(1));if(isNaN(f))return null;const m=[0,0,0,1];let v;return h&&(v=f&n,f>>=i,m[3]=s*v/255),v=f&n,f>>=i,m[2]=s*v,v=f&n,f>>=i,m[1]=s*v,v=f&n,f>>=i,m[0]=s*v,m}function Oy(t){return qr(V6(t),0,255)}function Py(t,e,i){return t=Number(t),isNaN(t)?i:t<e?e:t>i?i:t}function Ry(t,e){const i=t.toString(16).padStart(2,"0");return e?i.substring(0,1):i}let Hv=class fn{static blendColors(e,i,n,s=new fn){return s.r=Math.round(e.r+(i.r-e.r)*n),s.g=Math.round(e.g+(i.g-e.g)*n),s.b=Math.round(e.b+(i.b-e.b)*n),s.a=e.a+(i.a-e.a)*n,s._sanitize()}static fromRgb(e,i){const n=e.toLowerCase().match(/^(rgba?|hsla?)\(([\s.\-,%0-9]+)\)/);if(n){const s=n[2].split(/\s*,\s*/),h=n[1];if(h==="rgb"&&s.length===3||h==="rgba"&&s.length===4){const f=s[0];if(f.charAt(f.length-1)==="%"){const m=s.map(v=>2.56*parseFloat(v));return s.length===4&&(m[3]=parseFloat(s[3])),fn.fromArray(m,i)}return fn.fromArray(s.map(m=>parseFloat(m)),i)}if(h==="hsl"&&s.length===3||h==="hsla"&&s.length===4)return fn.fromArray(HL(parseFloat(s[0]),parseFloat(s[1])/100,parseFloat(s[2])/100,parseFloat(s[3])),i)}return null}static fromHex(e,i=new fn){if(e[0]!=="#"||isNaN(+`0x${e.substring(1)}`))return null;switch(e.length){case 4:case 5:{const n=parseInt(e.substring(1,2),16),s=parseInt(e.substring(2,3),16),h=parseInt(e.substring(3,4),16),f=e.length===5?15:parseInt(e.substring(4),16);return fn.fromArray([n+16*n,s+16*s,h+16*h,(f+16*f)/255],i)}case 7:case 9:{const n=parseInt(e.substring(1,3),16),s=parseInt(e.substring(3,5),16),h=parseInt(e.substring(5,7),16),f=e.length===7?255:parseInt(e.substring(7),16);return fn.fromArray([n,s,h,f/255],i)}default:return null}}static fromArray(e,i=new fn){return i._set(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3])),isNaN(i.a)&&(i.a=1),i._sanitize()}static fromString(e,i){const n=VL(e)?QS(e):null;return n&&fn.fromArray(n,i)||fn.fromRgb(e,i)||fn.fromHex(e,i)}static fromJSON(e){return e!=null?new fn([e[0],e[1],e[2],(e[3]??255)/255]):void 0}static toUnitRGB(e){return e!=null?[e.r/255,e.g/255,e.b/255]:null}static toUnitRGBA(e){return e!=null?[e.r/255,e.g/255,e.b/255,e.a!=null?e.a:1]:null}constructor(e){this.r=255,this.g=255,this.b=255,this.a=1,e&&this.setColor(e)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(e){return typeof e=="string"?fn.fromString(e,this):Array.isArray(e)?fn.fromArray(e,this):(this._set(e.r??0,e.g??0,e.b??0,e.a??1),e instanceof fn||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(e){const i=(e==null?void 0:e.capitalize)??!1,n=(e==null?void 0:e.digits)??6,s=n===3||n===4,h=n===4||n===8,f=`#${Ry(this.r,s)}${Ry(this.g,s)}${Ry(this.b,s)}${h?Ry(Math.round(255*this.a),s):""}`;return i?f.toUpperCase():f}toCss(e=!1){const i=this.r+", "+this.g+", "+this.b;return e?`rgba(${i}, ${this.a})`:`rgb(${i})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(e=fn.AlphaMode.ALWAYS){const i=Oy(this.r),n=Oy(this.g),s=Oy(this.b);return e===fn.AlphaMode.ALWAYS||this.a!==1?[i,n,s,Oy(255*this.a)]:[i,n,s]}clone(){return new fn(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(e){return e!=null&&e.r===this.r&&e.g===this.g&&e.b===this.b&&e.a===this.a}_sanitize(){return this.r=Math.round(Py(this.r,0,255)),this.g=Math.round(Py(this.g,0,255)),this.b=Math.round(Py(this.b,0,255)),this.a=Py(this.a,0,1),this}_set(e,i,n,s){this.r=e,this.g=i,this.b=n,this.a=s}};Hv.prototype.declaredClass="esri.Color",function(t){var e;(e=t.AlphaMode||(t.AlphaMode={}))[e.ALWAYS=0]="ALWAYS",e[e.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(Hv||(Hv={}));const gt=Hv;function Z6e(t){}function hie(t){return()=>t}function Ke(t,e={}){const i=t instanceof an?t:new an(t,e),n={type:(e==null?void 0:e.ignoreUnknown)??1?i.apiValues:String,json:{type:i.jsonValues,read:!(e!=null&&e.readOnly)&&{reader:i.read},write:{writer:i.write}}};return(e==null?void 0:e.readOnly)!==void 0&&(n.readOnly=!!e.readOnly),(e==null?void 0:e.default)!==void 0&&(n.json.default=e.default),(e==null?void 0:e.name)!==void 0&&(n.json.name=e.name),(e==null?void 0:e.nonNullable)!==void 0&&(n.nonNullable=e.nonNullable),T(n)}var qx;let Bv=qx=class extends Fe{constructor(t){super(t),this.type="none"}clone(){return new qx({type:this.type})}};_([Ke({none:"none",stayAbove:"stay-above"})],Bv.prototype,"type",void 0),Bv=qx=_([Y("esri.ground.NavigationConstraint")],Bv);function BL(t){const e=V6(100*(1-t));return Math.max(0,Math.min(e,100))}function UL(t){const e=1-t/100;return Math.max(0,Math.min(e,1))}var Wx;let Il=Wx=class extends _m(na){constructor(t){super(t),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new Pe;const e=n=>{n.parent&&n.parent!==this&&"remove"in n.parent&&n.parent.remove(n),n.parent=this,n.type!=="elevation"&&n.type!=="base-elevation"&&Ce.getLogger(this).error(`Layer '${n.title}, id:${n.id}' of type '${n.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},i=n=>{n.parent=null};this.addHandles([this.layers.on("after-add",n=>e(n.item)),this.layers.on("after-remove",n=>i(n.item))])}initialize(){this.when().catch(t=>{Zr(t)||Ce.getLogger(this).error("#load()","Failed to load ground",t)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const t=this.layers.removeAll();for(const e of t)yt(e);this.layers.destroy()}normalizeCtorArgs(t){return t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),delete(t={...t}).resourceInfo),t}set layers(t){this._set("layers",Xh(t,this._get("layers")))}writeLayers(t,e,i,n){const s=[];t&&(n={...n,layerContainerType:"ground"},t.forEach(h=>{if("write"in h){const f={};hie(h)().write(f,n)&&s.push(f)}else n!=null&&n.messages&&n.messages.push(new fe("layer:unsupported",`Layers (${h.title}, ${h.id}) of type '${h.declaredClass}' cannot be persisted in the ground`,{layer:h}))})),e.layers=s}load(t){return this.addResolvingPromise(this._loadFromSource(t)),Promise.resolve(this)}loadAll(){return PL(this,t=>{t(this.layers)})}async queryElevation(t,e){await this.load({signal:e==null?void 0:e.signal});const{ElevationQuery:i}=await be(()=>import("./ElevationQuery-cW_qWm1s.js"),[],import.meta.url);Zt(e);const n=new i,s=this.layers.filter(AE).toArray();return n.queryAll(s,t,e)}async createElevationSampler(t,e){await this.load({signal:e==null?void 0:e.signal});const{ElevationQuery:i}=await be(()=>import("./ElevationQuery-cW_qWm1s.js"),[],import.meta.url);Zt(e);const n=new i,s=this.layers.filter(AE).toArray();return n.createSamplerAll(s,t,e)}clone(){const t={opacity:this.opacity,surfaceColor:_e(this.surfaceColor),navigationConstraint:_e(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(t.loadStatus="loaded"),new Wx({resourceInfo:this.resourceInfo}).set(t)}read(t,e){this.resourceInfo||this._set("resourceInfo",{data:t,context:e}),super.read(t,e)}_loadFromSource(t){const e=this.resourceInfo;return e?this._loadLayersFromJSON(e.data,e.context,t):Promise.resolve()}async _loadLayersFromJSON(t,e,i){const n=(e==null?void 0:e.origin)||"web-scene",s=(e==null?void 0:e.portal)||null,h=(e==null?void 0:e.url)||null,{populateOperationalLayers:f}=await be(async()=>{const{populateOperationalLayers:v}=await import("./layersCreator-BNFmrHi6.js");return{populateOperationalLayers:v}},__vite__mapDeps([191,192,193,194,175,183]),import.meta.url);Zt(i);const m=[];if(t.layers&&Array.isArray(t.layers)){const v={context:{origin:n,url:h,portal:s,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};m.push(f(this.layers,t.layers,v))}await Promise.allSettled(m)}};function uie(t){return t&&"createElevationSampler"in t}function AE(t){return t.type==="elevation"||uie(t)}_([T({json:{read:!1}})],Il.prototype,"layers",null),_([_t("layers")],Il.prototype,"writeLayers",null),_([T({readOnly:!0})],Il.prototype,"resourceInfo",void 0),_([T({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:Ii,read:{reader:UL,source:"transparency"},write:{writer:(t,e)=>{e.transparency=BL(t)},target:"transparency"}}})],Il.prototype,"opacity",void 0),_([T({type:gt,json:{type:[Ii],write:(t,e)=>{e.surfaceColor=t.toJSON().slice(0,3)}}})],Il.prototype,"surfaceColor",void 0),_([T({type:Bv,json:{write:!0}})],Il.prototype,"navigationConstraint",void 0),Il=Wx=_([Y("esri.Ground")],Il);const y2=Il,Ly=new WeakMap;function qL(t){return!t.destroyed&&(Ly.has(t)||t.addHandles([Ee(()=>{const e=t.parent;return!(!e||!("type"in e))&&(e.type==="catalog-dynamic-group"||qL(e))},e=>Ly.set(t,e),xi),ut(()=>Ly.delete(t))]),Ly.get(t))}function die(t){return typeof t=="object"&&t!=null&&"loaded"in t&&t.loaded===!0&&"type"in t}function pie(t){var e,i;return!(!die(t)||!((i=(e=Jte(t))==null?void 0:e.operations)!=null&&i.supportsEditing)||"editingEnabled"in t&&!Yte(t)||qL(t))}const fie=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,gie="screenUtils.toPt: input not recognized!",WL=96;function J6e(t){return t?t/72*WL:0}function Qh(t){return t?72*t/WL:0}function Si(t){if(typeof t=="string"){const e=t.match(fie);if(e){const i=Number(e[1]),n=e[3]&&e[3].toLowerCase(),s=t.charAt(0)==="-",h=n==="px"?Qh(i):i;return s?-h:h}return console.warn(gie),null}return t}function Fi(t=0,e=0){return{x:t,y:e}}function ZL(t=0,e=0){return[t,e]}function K6e(t=0,e=0,i=0){return[t,e,i]}function Y6e(t){return t}function X6e(t){return t}function Q6e(t){return t}function eSe(t,e){return e?(e[0]=t.x,e[1]=t.y,e.length>2&&(e[2]=0),e):[t.x,t.y]}function Uw(){const t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function mie(t){const e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function yie(t,e,i,n,s,h,f,m,v,x,M,$,I,P,L,z){const F=new Float32Array(16);return F[0]=t,F[1]=e,F[2]=i,F[3]=n,F[4]=s,F[5]=h,F[6]=f,F[7]=m,F[8]=v,F[9]=x,F[10]=M,F[11]=$,F[12]=I,F[13]=P,F[14]=L,F[15]=z,F}function vie(t,e){return new Float32Array(t,e,16)}const bie=Uw();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:bie,clone:mie,create:Uw,createView:vie,fromValues:yie},Symbol.toStringTag,{value:"Module"}));function wie(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function cu(t,e,i,n,s,h,f,m,v,x,M,$,I,P,L,z,F){return t[0]=e,t[1]=i,t[2]=n,t[3]=s,t[4]=h,t[5]=f,t[6]=m,t[7]=v,t[8]=x,t[9]=M,t[10]=$,t[11]=I,t[12]=P,t[13]=L,t[14]=z,t[15]=F,t}function qw(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function hu(t,e){if(t===e){const i=e[1],n=e[2],s=e[3],h=e[6],f=e[7],m=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=i,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=h,t[11]=e[14],t[12]=s,t[13]=f,t[14]=m}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function _ie(t,e){return JL(t,e)||qw(t),t}function JL(t,e){const i=e[0],n=e[1],s=e[2],h=e[3],f=e[4],m=e[5],v=e[6],x=e[7],M=e[8],$=e[9],I=e[10],P=e[11],L=e[12],z=e[13],F=e[14],U=e[15],W=i*m-n*f,K=i*v-s*f,J=i*x-h*f,te=n*v-s*m,ie=n*x-h*m,le=s*x-h*v,de=M*z-$*L,xe=M*F-I*L,we=M*U-P*L,ve=$*F-I*z,se=$*U-P*z,ce=I*U-P*F;let ue=W*ce-K*se+J*ve+te*we-ie*xe+le*de;return ue?(ue=1/ue,t[0]=(m*ce-v*se+x*ve)*ue,t[1]=(s*se-n*ce-h*ve)*ue,t[2]=(z*le-F*ie+U*te)*ue,t[3]=(I*ie-$*le-P*te)*ue,t[4]=(v*we-f*ce-x*xe)*ue,t[5]=(i*ce-s*we+h*xe)*ue,t[6]=(F*J-L*le-U*K)*ue,t[7]=(M*le-I*J+P*K)*ue,t[8]=(f*se-m*we+x*de)*ue,t[9]=(n*we-i*se-h*de)*ue,t[10]=(L*ie-z*J+U*W)*ue,t[11]=($*J-M*ie-P*W)*ue,t[12]=(m*xe-f*ve-v*de)*ue,t[13]=(i*ve-n*xe+s*de)*ue,t[14]=(z*K-L*te-F*W)*ue,t[15]=(M*te-$*K+I*W)*ue,t):null}function xie(t,e){const i=e[0],n=e[1],s=e[2],h=e[3],f=e[4],m=e[5],v=e[6],x=e[7],M=e[8],$=e[9],I=e[10],P=e[11],L=e[12],z=e[13],F=e[14],U=e[15];return t[0]=m*(I*U-P*F)-$*(v*U-x*F)+z*(v*P-x*I),t[1]=-(n*(I*U-P*F)-$*(s*U-h*F)+z*(s*P-h*I)),t[2]=n*(v*U-x*F)-m*(s*U-h*F)+z*(s*x-h*v),t[3]=-(n*(v*P-x*I)-m*(s*P-h*I)+$*(s*x-h*v)),t[4]=-(f*(I*U-P*F)-M*(v*U-x*F)+L*(v*P-x*I)),t[5]=i*(I*U-P*F)-M*(s*U-h*F)+L*(s*P-h*I),t[6]=-(i*(v*U-x*F)-f*(s*U-h*F)+L*(s*x-h*v)),t[7]=i*(v*P-x*I)-f*(s*P-h*I)+M*(s*x-h*v),t[8]=f*($*U-P*z)-M*(m*U-x*z)+L*(m*P-x*$),t[9]=-(i*($*U-P*z)-M*(n*U-h*z)+L*(n*P-h*$)),t[10]=i*(m*U-x*z)-f*(n*U-h*z)+L*(n*x-h*m),t[11]=-(i*(m*P-x*$)-f*(n*P-h*$)+M*(n*x-h*m)),t[12]=-(f*($*F-I*z)-M*(m*F-v*z)+L*(m*I-v*$)),t[13]=i*($*F-I*z)-M*(n*F-s*z)+L*(n*I-s*$),t[14]=-(i*(m*F-v*z)-f*(n*F-s*z)+L*(n*v-s*m)),t[15]=i*(m*I-v*$)-f*(n*I-s*$)+M*(n*v-s*m),t}function Sie(t){const e=t[0],i=t[1],n=t[2],s=t[3],h=t[4],f=t[5],m=t[6],v=t[7],x=t[8],M=t[9],$=t[10],I=t[11],P=t[12],L=t[13],z=t[14],F=t[15];return(e*f-i*h)*($*F-I*z)-(e*m-n*h)*(M*F-I*L)+(e*v-s*h)*(M*z-$*L)+(i*m-n*f)*(x*F-I*P)-(i*v-s*f)*(x*z-$*P)+(n*v-s*m)*(x*L-M*P)}function KL(t,e,i){const n=e[0],s=e[1],h=e[2],f=e[3],m=e[4],v=e[5],x=e[6],M=e[7],$=e[8],I=e[9],P=e[10],L=e[11],z=e[12],F=e[13],U=e[14],W=e[15];let K=i[0],J=i[1],te=i[2],ie=i[3];return t[0]=K*n+J*m+te*$+ie*z,t[1]=K*s+J*v+te*I+ie*F,t[2]=K*h+J*x+te*P+ie*U,t[3]=K*f+J*M+te*L+ie*W,K=i[4],J=i[5],te=i[6],ie=i[7],t[4]=K*n+J*m+te*$+ie*z,t[5]=K*s+J*v+te*I+ie*F,t[6]=K*h+J*x+te*P+ie*U,t[7]=K*f+J*M+te*L+ie*W,K=i[8],J=i[9],te=i[10],ie=i[11],t[8]=K*n+J*m+te*$+ie*z,t[9]=K*s+J*v+te*I+ie*F,t[10]=K*h+J*x+te*P+ie*U,t[11]=K*f+J*M+te*L+ie*W,K=i[12],J=i[13],te=i[14],ie=i[15],t[12]=K*n+J*m+te*$+ie*z,t[13]=K*s+J*v+te*I+ie*F,t[14]=K*h+J*x+te*P+ie*U,t[15]=K*f+J*M+te*L+ie*W,t}function Tie(t,e,i){const n=i[0],s=i[1],h=i[2];if(e===t)t[12]=e[0]*n+e[4]*s+e[8]*h+e[12],t[13]=e[1]*n+e[5]*s+e[9]*h+e[13],t[14]=e[2]*n+e[6]*s+e[10]*h+e[14],t[15]=e[3]*n+e[7]*s+e[11]*h+e[15];else{const f=e[0],m=e[1],v=e[2],x=e[3],M=e[4],$=e[5],I=e[6],P=e[7],L=e[8],z=e[9],F=e[10],U=e[11];t[0]=f,t[1]=m,t[2]=v,t[3]=x,t[4]=M,t[5]=$,t[6]=I,t[7]=P,t[8]=L,t[9]=z,t[10]=F,t[11]=U,t[12]=f*n+M*s+L*h+e[12],t[13]=m*n+$*s+z*h+e[13],t[14]=v*n+I*s+F*h+e[14],t[15]=x*n+P*s+U*h+e[15]}return t}function Mie(t,e,i){const n=i[0],s=i[1],h=i[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*s,t[5]=e[5]*s,t[6]=e[6]*s,t[7]=e[7]*s,t[8]=e[8]*h,t[9]=e[9]*h,t[10]=e[10]*h,t[11]=e[11]*h,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Eie(t,e,i,n){let s,h,f,m,v,x,M,$,I,P,L,z,F,U,W,K,J,te,ie,le,de,xe,we,ve,se=n[0],ce=n[1],ue=n[2],Ae=Math.sqrt(se*se+ce*ce+ue*ue);return Ae<Ti()?null:(Ae=1/Ae,se*=Ae,ce*=Ae,ue*=Ae,s=Math.sin(i),h=Math.cos(i),f=1-h,m=e[0],v=e[1],x=e[2],M=e[3],$=e[4],I=e[5],P=e[6],L=e[7],z=e[8],F=e[9],U=e[10],W=e[11],K=se*se*f+h,J=ce*se*f+ue*s,te=ue*se*f-ce*s,ie=se*ce*f-ue*s,le=ce*ce*f+h,de=ue*ce*f+se*s,xe=se*ue*f+ce*s,we=ce*ue*f-se*s,ve=ue*ue*f+h,t[0]=m*K+$*J+z*te,t[1]=v*K+I*J+F*te,t[2]=x*K+P*J+U*te,t[3]=M*K+L*J+W*te,t[4]=m*ie+$*le+z*de,t[5]=v*ie+I*le+F*de,t[6]=x*ie+P*le+U*de,t[7]=M*ie+L*le+W*de,t[8]=m*xe+$*we+z*ve,t[9]=v*xe+I*we+F*ve,t[10]=x*xe+P*we+U*ve,t[11]=M*xe+L*we+W*ve,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function kie(t,e,i){const n=Math.sin(i),s=Math.cos(i),h=e[4],f=e[5],m=e[6],v=e[7],x=e[8],M=e[9],$=e[10],I=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=h*s+x*n,t[5]=f*s+M*n,t[6]=m*s+$*n,t[7]=v*s+I*n,t[8]=x*s-h*n,t[9]=M*s-f*n,t[10]=$*s-m*n,t[11]=I*s-v*n,t}function $ie(t,e,i){const n=Math.sin(i),s=Math.cos(i),h=e[0],f=e[1],m=e[2],v=e[3],x=e[8],M=e[9],$=e[10],I=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=h*s-x*n,t[1]=f*s-M*n,t[2]=m*s-$*n,t[3]=v*s-I*n,t[8]=h*n+x*s,t[9]=f*n+M*s,t[10]=m*n+$*s,t[11]=v*n+I*s,t}function Cie(t,e,i){const n=Math.sin(i),s=Math.cos(i),h=e[0],f=e[1],m=e[2],v=e[3],x=e[4],M=e[5],$=e[6],I=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=h*s+x*n,t[1]=f*s+M*n,t[2]=m*s+$*n,t[3]=v*s+I*n,t[4]=x*s-h*n,t[5]=M*s-f*n,t[6]=$*s-m*n,t[7]=I*s-v*n,t}function Iie(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function Aie(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function YL(t,e,i){if(e===0)return qw(t);let n,s,h,f=i[0],m=i[1],v=i[2],x=Math.sqrt(f*f+m*m+v*v);return x<Ti()?null:(x=1/x,f*=x,m*=x,v*=x,n=Math.sin(e),s=Math.cos(e),h=1-s,t[0]=f*f*h+s,t[1]=m*f*h+v*n,t[2]=v*f*h-m*n,t[3]=0,t[4]=f*m*h-v*n,t[5]=m*m*h+s,t[6]=v*m*h+f*n,t[7]=0,t[8]=f*v*h+m*n,t[9]=m*v*h-f*n,t[10]=v*v*h+s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function Oie(t,e){const i=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Pie(t,e){const i=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Rie(t,e){const i=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function XL(t,e,i){const n=e[0],s=e[1],h=e[2],f=e[3],m=n+n,v=s+s,x=h+h,M=n*m,$=n*v,I=n*x,P=s*v,L=s*x,z=h*x,F=f*m,U=f*v,W=f*x;return t[0]=1-(P+z),t[1]=$+W,t[2]=I-U,t[3]=0,t[4]=$-W,t[5]=1-(M+z),t[6]=L+F,t[7]=0,t[8]=I+U,t[9]=L-F,t[10]=1-(M+P),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function Lie(t,e){const i=Nie,n=-e[0],s=-e[1],h=-e[2],f=e[3],m=e[4],v=e[5],x=e[6],M=e[7],$=n*n+s*s+h*h+f*f;return $>0?(i[0]=2*(m*f+M*n+v*h-x*s)/$,i[1]=2*(v*f+M*s+x*n-m*h)/$,i[2]=2*(x*f+M*h+m*s-v*n)/$):(i[0]=2*(m*f+M*n+v*h-x*s),i[1]=2*(v*f+M*s+x*n-m*h),i[2]=2*(x*f+M*h+m*s-v*n)),XL(t,e,i),t}const Nie=Se();function Die(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function zie(t,e){const i=e[0],n=e[1],s=e[2],h=e[4],f=e[5],m=e[6],v=e[8],x=e[9],M=e[10];return t[0]=Math.sqrt(i*i+n*n+s*s),t[1]=Math.sqrt(h*h+f*f+m*m),t[2]=Math.sqrt(v*v+x*x+M*M),t}function Fie(t,e){const i=e[0]+e[5]+e[10];let n=0;return i>0?(n=2*Math.sqrt(i+1),t[3]=.25*n,t[0]=(e[6]-e[9])/n,t[1]=(e[8]-e[2])/n,t[2]=(e[1]-e[4])/n):e[0]>e[5]&&e[0]>e[10]?(n=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/n,t[0]=.25*n,t[1]=(e[1]+e[4])/n,t[2]=(e[8]+e[2])/n):e[5]>e[10]?(n=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/n,t[0]=(e[1]+e[4])/n,t[1]=.25*n,t[2]=(e[6]+e[9])/n):(n=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/n,t[0]=(e[8]+e[2])/n,t[1]=(e[6]+e[9])/n,t[2]=.25*n),t}function jie(t,e,i,n){const s=e[0],h=e[1],f=e[2],m=e[3],v=s+s,x=h+h,M=f+f,$=s*v,I=s*x,P=s*M,L=h*x,z=h*M,F=f*M,U=m*v,W=m*x,K=m*M,J=n[0],te=n[1],ie=n[2];return t[0]=(1-(L+F))*J,t[1]=(I+K)*J,t[2]=(P-W)*J,t[3]=0,t[4]=(I-K)*te,t[5]=(1-($+F))*te,t[6]=(z+U)*te,t[7]=0,t[8]=(P+W)*ie,t[9]=(z-U)*ie,t[10]=(1-($+L))*ie,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function Gie(t,e,i,n,s){const h=e[0],f=e[1],m=e[2],v=e[3],x=h+h,M=f+f,$=m+m,I=h*x,P=h*M,L=h*$,z=f*M,F=f*$,U=m*$,W=v*x,K=v*M,J=v*$,te=n[0],ie=n[1],le=n[2],de=s[0],xe=s[1],we=s[2],ve=(1-(z+U))*te,se=(P+J)*te,ce=(L-K)*te,ue=(P-J)*ie,Ae=(1-(I+U))*ie,je=(F+W)*ie,Ge=(L+K)*le,He=(F-W)*le,mt=(1-(I+z))*le;return t[0]=ve,t[1]=se,t[2]=ce,t[3]=0,t[4]=ue,t[5]=Ae,t[6]=je,t[7]=0,t[8]=Ge,t[9]=He,t[10]=mt,t[11]=0,t[12]=i[0]+de-(ve*de+ue*xe+Ge*we),t[13]=i[1]+xe-(se*de+Ae*xe+He*we),t[14]=i[2]+we-(ce*de+je*xe+mt*we),t[15]=1,t}function Vie(t,e){const i=e[0],n=e[1],s=e[2],h=e[3],f=i+i,m=n+n,v=s+s,x=i*f,M=n*f,$=n*m,I=s*f,P=s*m,L=s*v,z=h*f,F=h*m,U=h*v;return t[0]=1-$-L,t[1]=M+U,t[2]=I-F,t[3]=0,t[4]=M-U,t[5]=1-x-L,t[6]=P+z,t[7]=0,t[8]=I+F,t[9]=P-z,t[10]=1-x-$,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Hie(t,e,i,n,s,h,f){const m=1/(i-e),v=1/(s-n),x=1/(h-f);return t[0]=2*h*m,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*h*v,t[6]=0,t[7]=0,t[8]=(i+e)*m,t[9]=(s+n)*v,t[10]=(f+h)*x,t[11]=-1,t[12]=0,t[13]=0,t[14]=f*h*2*x,t[15]=0,t}function Bie(t,e,i,n,s){const h=1/Math.tan(e/2);let f;return t[0]=h/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=h,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,s!=null&&s!==1/0?(f=1/(n-s),t[10]=(s+n)*f,t[14]=2*s*n*f):(t[10]=-1,t[14]=-2*n),t}function Uie(t,e,i,n){const s=Math.tan(e.upDegrees*Math.PI/180),h=Math.tan(e.downDegrees*Math.PI/180),f=Math.tan(e.leftDegrees*Math.PI/180),m=Math.tan(e.rightDegrees*Math.PI/180),v=2/(f+m),x=2/(s+h);return t[0]=v,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=x,t[6]=0,t[7]=0,t[8]=-(f-m)*v*.5,t[9]=(s-h)*x*.5,t[10]=n/(i-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*i/(i-n),t[15]=0,t}function qie(t,e,i,n,s,h,f){const m=1/(e-i),v=1/(n-s),x=1/(h-f);return t[0]=-2*m,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*v,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*x,t[11]=0,t[12]=(e+i)*m,t[13]=(s+n)*v,t[14]=(f+h)*x,t[15]=1,t}function Wie(t,e,i,n){const s=e[0],h=e[1],f=e[2];let m=s-i[0],v=h-i[1],x=f-i[2];const M=Ti();if(Math.abs(m)<M&&Math.abs(v)<M&&Math.abs(x)<M)return void qw(t);let $=1/Math.sqrt(m*m+v*v+x*x);m*=$,v*=$,x*=$;const I=n[0],P=n[1],L=n[2];let z=P*x-L*v,F=L*m-I*x,U=I*v-P*m;$=Math.sqrt(z*z+F*F+U*U),$?($=1/$,z*=$,F*=$,U*=$):(z=0,F=0,U=0);let W=v*U-x*F,K=x*z-m*U,J=m*F-v*z;$=Math.sqrt(W*W+K*K+J*J),$?($=1/$,W*=$,K*=$,J*=$):(W=0,K=0,J=0),t[0]=z,t[1]=W,t[2]=m,t[3]=0,t[4]=F,t[5]=K,t[6]=v,t[7]=0,t[8]=U,t[9]=J,t[10]=x,t[11]=0,t[12]=-(z*s+F*h+U*f),t[13]=-(W*s+K*h+J*f),t[14]=-(m*s+v*h+x*f),t[15]=1}function Zie(t,e,i,n){const s=e[0],h=e[1],f=e[2],m=n[0],v=n[1],x=n[2];let M=s-i[0],$=h-i[1],I=f-i[2],P=M*M+$*$+I*I;P>0&&(P=1/Math.sqrt(P),M*=P,$*=P,I*=P);let L=v*I-x*$,z=x*M-m*I,F=m*$-v*M;return P=L*L+z*z+F*F,P>0&&(P=1/Math.sqrt(P),L*=P,z*=P,F*=P),t[0]=L,t[1]=z,t[2]=F,t[3]=0,t[4]=$*F-I*z,t[5]=I*L-M*F,t[6]=M*z-$*L,t[7]=0,t[8]=M,t[9]=$,t[10]=I,t[11]=0,t[12]=s,t[13]=h,t[14]=f,t[15]=1,t}function Jie(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function Kie(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2+t[9]**2+t[10]**2+t[11]**2+t[12]**2+t[13]**2+t[14]**2+t[15]**2)}function Yie(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t[9]=e[9]+i[9],t[10]=e[10]+i[10],t[11]=e[11]+i[11],t[12]=e[12]+i[12],t[13]=e[13]+i[13],t[14]=e[14]+i[14],t[15]=e[15]+i[15],t}function QL(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t[9]=e[9]-i[9],t[10]=e[10]-i[10],t[11]=e[11]-i[11],t[12]=e[12]-i[12],t[13]=e[13]-i[13],t[14]=e[14]-i[14],t[15]=e[15]-i[15],t}function Xie(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12]*i,t[13]=e[13]*i,t[14]=e[14]*i,t[15]=e[15]*i,t}function Qie(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t[3]=e[3]+i[3]*n,t[4]=e[4]+i[4]*n,t[5]=e[5]+i[5]*n,t[6]=e[6]+i[6]*n,t[7]=e[7]+i[7]*n,t[8]=e[8]+i[8]*n,t[9]=e[9]+i[9]*n,t[10]=e[10]+i[10]*n,t[11]=e[11]+i[11]*n,t[12]=e[12]+i[12]*n,t[13]=e[13]+i[13]*n,t[14]=e[14]+i[14]*n,t[15]=e[15]+i[15]*n,t}function ene(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function tne(t,e){if(t===e)return!0;const i=t[0],n=t[1],s=t[2],h=t[3],f=t[4],m=t[5],v=t[6],x=t[7],M=t[8],$=t[9],I=t[10],P=t[11],L=t[12],z=t[13],F=t[14],U=t[15],W=e[0],K=e[1],J=e[2],te=e[3],ie=e[4],le=e[5],de=e[6],xe=e[7],we=e[8],ve=e[9],se=e[10],ce=e[11],ue=e[12],Ae=e[13],je=e[14],Ge=e[15],He=Ti();return Math.abs(i-W)<=He*Math.max(1,Math.abs(i),Math.abs(W))&&Math.abs(n-K)<=He*Math.max(1,Math.abs(n),Math.abs(K))&&Math.abs(s-J)<=He*Math.max(1,Math.abs(s),Math.abs(J))&&Math.abs(h-te)<=He*Math.max(1,Math.abs(h),Math.abs(te))&&Math.abs(f-ie)<=He*Math.max(1,Math.abs(f),Math.abs(ie))&&Math.abs(m-le)<=He*Math.max(1,Math.abs(m),Math.abs(le))&&Math.abs(v-de)<=He*Math.max(1,Math.abs(v),Math.abs(de))&&Math.abs(x-xe)<=He*Math.max(1,Math.abs(x),Math.abs(xe))&&Math.abs(M-we)<=He*Math.max(1,Math.abs(M),Math.abs(we))&&Math.abs($-ve)<=He*Math.max(1,Math.abs($),Math.abs(ve))&&Math.abs(I-se)<=He*Math.max(1,Math.abs(I),Math.abs(se))&&Math.abs(P-ce)<=He*Math.max(1,Math.abs(P),Math.abs(ce))&&Math.abs(L-ue)<=He*Math.max(1,Math.abs(L),Math.abs(ue))&&Math.abs(z-Ae)<=He*Math.max(1,Math.abs(z),Math.abs(Ae))&&Math.abs(F-je)<=He*Math.max(1,Math.abs(F),Math.abs(je))&&Math.abs(U-Ge)<=He*Math.max(1,Math.abs(U),Math.abs(Ge))}function ine(t){const e=Ti(),i=t[0],n=t[1],s=t[2],h=t[4],f=t[5],m=t[6],v=t[8],x=t[9],M=t[10];return Math.abs(1-(i*i+h*h+v*v))<=e&&Math.abs(1-(n*n+f*f+x*x))<=e&&Math.abs(1-(s*s+m*m+M*M))<=e}function nne(t){return t[0]===1&&t[1]===0&&t[2]===0&&t[4]===0&&t[5]===1&&t[6]===0&&t[8]===0&&t[9]===0&&t[10]===1}const rne=KL,sne=QL;Object.freeze(Object.defineProperty({__proto__:null,add:Yie,adjoint:xie,copy:wie,determinant:Sie,equals:tne,exactEquals:ene,frob:Kie,fromQuat:Vie,fromQuat2:Lie,fromRotation:YL,fromRotationTranslation:XL,fromRotationTranslationScale:jie,fromRotationTranslationScaleOrigin:Gie,fromScaling:Aie,fromTranslation:Iie,fromXRotation:Oie,fromYRotation:Pie,fromZRotation:Rie,frustum:Hie,getRotation:Fie,getScaling:zie,getTranslation:Die,hasIdentityRotation:nne,identity:qw,invert:JL,invertOrIdentity:_ie,isOrthoNormal:ine,lookAt:Wie,mul:rne,multiply:KL,multiplyScalar:Xie,multiplyScalarAndAdd:Qie,ortho:qie,perspective:Bie,perspectiveFromFieldOfView:Uie,rotate:Eie,rotateX:kie,rotateY:$ie,rotateZ:Cie,scale:Mie,set:cu,str:Jie,sub:sne,subtract:QL,targetTo:Zie,translate:Tie,transpose:hu},Symbol.toStringTag,{value:"Module"}));const one=(t,e)=>{const i=cu(t,e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1);return hu(i,i)},ane=(t,e)=>{const i=cu(t,e,0,0,.5-.5*e,0,e,0,.5-.5*e,0,0,e,.5-.5*e,0,0,0,1);return hu(i,i)},lne=(t,e)=>{const i=1-e,n=cu(t,.2126+.7874*i,.7152-.7152*i,.0722-.0722*i,0,.2126-.2126*i,.7152+.2848*i,.0722-.0722*i,0,.2126-.2126*i,.7152-.7152*i,.0722+.9278*i,0,0,0,0,1);return hu(n,n)},cne=(t,e)=>{const i=Math.sin(e*Math.PI/180),n=Math.cos(e*Math.PI/180),s=cu(t,.213+.787*n-.213*i,.715-.715*n-.715*i,.072-.072*n+.928*i,0,.213-.213*n+.143*i,.715+.285*n+.14*i,.072-.072*n-.283*i,0,.213-.213*n-.787*i,.715-.715*n+.715*i,.072+.928*n+.072*i,0,0,0,0,1);return hu(s,s)},hne=(t,e)=>{const i=1-2*e,n=cu(t,i,0,0,e,0,i,0,e,0,0,i,e,0,0,0,1);return hu(n,n)},une=(t,e)=>{const i=cu(t,.213+.787*e,.715-.715*e,.072-.072*e,0,.213-.213*e,.715+.285*e,.072-.072*e,0,.213-.213*e,.715-.715*e,.072+.928*e,0,0,0,0,1);return hu(i,i)},dne=(t,e)=>{const i=1-e,n=cu(t,.393+.607*i,.769-.769*i,.189-.189*i,0,.349-.349*i,.686+.314*i,.168-.168*i,0,.272-.272*i,.534-.534*i,.131+.869*i,0,0,0,0,1);return hu(n,n)};let eN=class tN{constructor(e,i,n){this.strength=e,this.radius=i,this.threshold=n,this.type="bloom"}interpolate(e,i,n){this.strength=Fr(e.strength,i.strength,n),this.radius=Fr(e.radius,i.radius,n),this.threshold=Fr(e.threshold,i.threshold,n)}clone(){return new tN(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:wg(this.radius),strength:this.strength,threshold:this.threshold}}},iN=class nN{constructor(e){this.radius=e,this.type="blur"}interpolate(e,i,n){this.radius=Math.round(Fr(e.radius,i.radius,n))}clone(){return new nN(this.radius)}toJSON(){return{type:"blur",radius:wg(this.radius)}}},Zx=class rN{constructor(e,i){this.type=e,this.amount=i,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,i,n){this.amount=Fr(e.amount,i.amount,n),this._updateMatrix()}clone(){return new rN(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const e=this._colorMatrix||Uw();switch(this.type){case"brightness":this._colorMatrix=one(e,this.amount);break;case"contrast":this._colorMatrix=ane(e,this.amount);break;case"grayscale":this._colorMatrix=lne(e,this.amount);break;case"invert":this._colorMatrix=hne(e,this.amount);break;case"saturate":this._colorMatrix=une(e,this.amount);break;case"sepia":this._colorMatrix=dne(e,this.amount)}}},sN=class oN{constructor(e,i,n,s){this.offsetX=e,this.offsetY=i,this.blurRadius=n,this.color=s,this.type="drop-shadow"}interpolate(e,i,n){this.offsetX=Fr(e.offsetX,i.offsetX,n),this.offsetY=Fr(e.offsetY,i.offsetY,n),this.blurRadius=Fr(e.blurRadius,i.blurRadius,n),this.color[0]=Math.round(Fr(e.color[0],i.color[0],n)),this.color[1]=Math.round(Fr(e.color[1],i.color[1],n)),this.color[2]=Math.round(Fr(e.color[2],i.color[2],n)),this.color[3]=Fr(e.color[3],i.color[3],n)}clone(){return new oN(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const e=[...this.color];return e[3]*=255,{type:"drop-shadow",xoffset:wg(this.offsetX),yoffset:wg(this.offsetY),blurRadius:wg(this.blurRadius),color:e}}},aN=class lN{constructor(e){this.angle=e,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,i,n){this.angle=Fr(e.angle,i.angle,n),this._updateMatrix()}clone(){return new lN(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const e=this._colorMatrix||Uw();this._colorMatrix=cne(e,this.angle)}},cN=class hN{constructor(e){this.amount=e,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(e,i,n){this.amount=Fr(e.amount,i.amount,n)}clone(){return new hN(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}};function Fr(t,e,i){return t+(e-t)*i}function wg(t){return Math.round(1e3*Qh(t))/1e3}function pne(t){switch(t.type){case"grayscale":case"sepia":case"invert":return new Zx(t.type,0);case"saturate":case"brightness":case"contrast":return new Zx(t.type,1);case"opacity":return new cN(1);case"hue-rotate":return new aN(0);case"blur":return new iN(0);case"drop-shadow":return new sN(0,0,0,[...QS("transparent")]);case"bloom":return new eN(0,0,1)}}function fne(t,e){const i=t.length>e.length?t:e;return(t.length>e.length?e:t).every((n,s)=>n.type===i[s].type)}function gne(t,e){const i=t.length>e.length?t:e,n=t.length>e.length?e:t;for(let s=n.length;s<i.length;s++)n.push(pne(i[s]))}function mne(t){const e=t[0];return!!e&&"type"in e}function yne(t,e){return JSON.stringify(t??null)===JSON.stringify(e??null)}const OE=()=>Ce.getLogger("esri.support.basemapUtils");function vne(){return{}}function bne(t){for(const e in t){const i=t[e];yt(i),delete t[e]}}function wne(t,e){let i;if(typeof t=="string"){const n=t in Kf,s=!n&&t.includes("/");if(!n&&!s){const h=Object.entries(Kf).filter(([f,m])=>vt.apiKey&&!m.classic||!vt.apiKey&&(m.classic||m.is3d)).map(([f])=>`"${f}"`).sort().join(", ");return OE().warn(`Unable to find basemap definition for: ${t}. Try one of these: ${h}`),null}e&&(i=e[t]),i||(i=n?Fh.fromId(t):new Fh({style:{id:t}}),e&&(e[t]=i))}else i=wn(Fh,t);return i!=null&&i.destroyed&&(OE().warn("The provided basemap is already destroyed",{basemap:i}),i=null),i}function _ne(t){var e;return((e=t.portalItem)==null?void 0:e.type)==="Web Scene"||t.referenceLayers.some(i=>i.type==="scene")}function xne(t){var e,i;return!!((i=(e=t==null?void 0:t.portalItem)==null?void 0:e.tags)!=null&&i.some(n=>n.toLowerCase()==="beta"))}function tSe(t,e){var i,n,s,h;return((n=(i=t.basemap)==null?void 0:i.referenceLayers)==null?void 0:n.some(f=>f.uid===e))||((h=(s=t.basemap)==null?void 0:s.baseLayers)==null?void 0:h.some(f=>f.uid===e))}function Sne(t){let e=null;const i=Jx(t),n=!(i!=null&&i.baseLayers.length);for(const s in Kf){const h=dN(i,uN(Kf[s]),{mustMatchReferences:n});if(h==="equal"){e=s;break}h==="base-layers-equal"&&(e=s)}return e}function Tne(t,e){var i,n;return t===e||((i=t==null?void 0:t.portalItem)==null?void 0:i.id)!=null&&t.portalItem.id===((n=e==null?void 0:e.portalItem)==null?void 0:n.id)?!0:dN(Jx(t),Jx(e),{mustMatchReferences:!0})==="equal"}function Mne(t,e){var h;if(e==null||t==null)return{spatialReference:null,updating:!1};if(e.loadStatus==="not-loaded")return e.load(),{spatialReference:null,updating:!0};if(e.spatialReference)return{spatialReference:e.spatialReference,updating:!1};if(e.baseLayers.length===0)return{spatialReference:null,updating:!1};const i=e.baseLayers.at(0);switch(i.loadStatus){case"not-loaded":i.load();case"loading":return{spatialReference:null,updating:!0};case"failed":return{spatialReference:null,updating:!1}}const n=(("supportedSpatialReferences"in i?i.supportedSpatialReferences:null)||["tileInfo"in i?(h=i.tileInfo)==null?void 0:h.spatialReference:i.spatialReference]).filter(Boolean),s=t.spatialReference;return s?{spatialReference:n.find(f=>s.equals(f))??n[0]??null,updating:!1}:{spatialReference:n[0],updating:!1}}function Jx(t){return t?!t.loaded&&t.resourceInfo?uN(t.resourceInfo.data):{baseLayers:PE(t.baseLayers),referenceLayers:PE(t.referenceLayers)}:null}function PE(t){return(Pe.isCollection(t)?t.toArray():t).map(Ene)}function Ene(t){var e,i;return{type:t.type,effect:"effect"in t?t.effect:void 0,url:pN("urlTemplate"in t&&t.urlTemplate||t.url||"styleUrl"in t&&t.styleUrl||""),minScale:"minScale"in t&&t.minScale!=null?t.minScale:0,maxScale:"maxScale"in t&&t.maxScale!=null?t.maxScale:0,opacity:t.opacity!=null?t.opacity:1,visible:t.visible==null||!!t.visible,sublayers:t.type!=="map-image"&&t.type!=="wms"||t.sublayers==null||(e=t.sublayers)==null?void 0:e.map(n=>({id:n.id,visible:n.visible})),activeLayerId:t.type==="wmts"?(i=t.activeLayer)==null?void 0:i.id:void 0}}function RE(t){return t.isReference||t.layerType==="ArcGISSceneServiceLayer"}function uN(t){return t?{baseLayers:LE((t.baseMapLayers??[]).filter(e=>!RE(e))),referenceLayers:LE((t.baseMapLayers??[]).filter(e=>RE(e)))}:null}function LE(t){return t.map(e=>kne(e))}function kne(t){let e;switch(t.layerType){case"VectorTileLayer":e="vector-tile";break;case"ArcGISTiledMapServiceLayer":e="tile";break;case"ArcGISSceneServiceLayer":e="scene";break;default:e="unknown"}return{type:e,effect:t.effect,url:pN(t.templateUrl||t.urlTemplate||t.styleUrl||t.url),minScale:t.minScale??0,maxScale:t.maxScale??0,opacity:t.opacity??1,visible:t.visibility==null||!!t.visibility,sublayers:void 0,activeLayerId:void 0}}function dN(t,e,i){return t!=null!=(e!=null)?"not-equal":!t||!e?"equal":NE(t.baseLayers,e.baseLayers)?NE(t.referenceLayers,e.referenceLayers)?"equal":i.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal"}function NE(t,e){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(!$ne(t[i],e[i]))return!1;return!0}function $ne(t,e){if(t.type!==e.type||t.url!==e.url||t.minScale!==e.minScale||t.maxScale!==e.maxScale||t.visible!==e.visible||t.opacity!==e.opacity||!yne(t.effect,e.effect))return!1;if(t.activeLayerId!=null||e.activeLayerId!=null)return t.activeLayerId===e.activeLayerId;if(t.sublayers!=null||e.sublayers!=null){if(t.sublayers==null||e.sublayers==null||t.sublayers.length!==e.sublayers.length)return!1;for(let i=0;i<t.sublayers.length;i++){const n=t.sublayers.at(i),s=e.sublayers.at(i);if((n==null?void 0:n.id)!==(s==null?void 0:s.id)||(n==null?void 0:n.visible)!==(s==null?void 0:s.visible))return!1}}return!0}function pN(t){return t?cc(t).replace(/^\s*https?:/i,"").toLowerCase():""}function Cne(t){if(!t)return null;const{thumbnailUrl:e}=t;if(e)return e;const i=Sne(t);return i?Kf[i].thumbnailUrl:zg(t.baseLayers,Ine)}function Ine(t){var e;return"portalItem"in t?(e=t.portalItem)==null?void 0:e.thumbnailUrl:void 0}function Ane(t){return new qg({getCollections:()=>[t.tables,t.layers],getChildrenFunction:e=>{const i=[];return"tables"in e&&i.push(e.tables),"layers"in e&&i.push(e.layers),i},itemFilterFunction:e=>{const i=e.parent;return!!i&&"tables"in i&&i.tables.includes(e)}})}function T_(t){for(const e of t.values())e==null||e.destroy();t.clear()}const DE={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function One(t){let e=null;if(typeof t=="string")if(t in DE){const i=DE[t];e=new y2({resourceInfo:{data:{layers:[i]}}})}else Ce.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${t}. Try "world-elevation"`);else e=wn(y2,t);return e}const zE={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function M_(t,e,i,n=Xa){const s=new ia(FS(n)),h=et.fromJSDate(t,{zone:s}),f=i==="decades"||i==="centuries"?"year":fN(i);return i==="decades"&&(e*=10),i==="centuries"&&(e*=100),h.plus({[f]:e}).toJSDate()}function iSe(t,e,i="milliseconds"){const n=t.getTime(),s=Pne(e,i,"milliseconds");return new Date(n+s)}function FE(t,e,i=Xa){const n=new ia(FS(i)),s=et.fromJSDate(t,{zone:n});if(e==="decades"||e==="centuries"){const f=s.startOf("year"),{year:m}=f,v=m-m%(e==="decades"?10:100);return f.set({year:v}).toJSDate()}const h=fN(e);return s.startOf(h).toJSDate()}function Pne(t,e,i){return t===0?0:t*zE[e]/zE[i]}function Rne(t,e){return t&&e?t.intersection(e):t||e}function fN(t){switch(t){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}var js;let ds=js=class extends Fe{static get allTime(){return jE}static get empty(){return Lne}static fromArray(t){return new js({start:t[0]!=null?new Date(t[0]):t[0],end:t[1]!=null?new Date(t[1]):t[1]})}constructor(t){super(t),this.end=null,this.start=null}readEnd(t,e){return e.end!=null?new Date(e.end):null}writeEnd(t,e){e.end=(t==null?void 0:t.getTime())??null}get isAllTime(){return this.equals(js.allTime)}get isEmpty(){return this.equals(js.empty)}readStart(t,e){return e.start!=null?new Date(e.start):null}writeStart(t,e){e.start=(t==null?void 0:t.getTime())??null}clone(){return new js({end:this.end,start:this.start})}equals(t){var h,f,m,v;if(!t)return!1;const e=((h=this.start)==null?void 0:h.getTime())??this.start,i=((f=this.end)==null?void 0:f.getTime())??this.end,n=((m=t.start)==null?void 0:m.getTime())??t.start,s=((v=t.end)==null?void 0:v.getTime())??t.end;return e===n&&i===s}expandTo(t,e=Xa){if(this.isEmpty||this.isAllTime)return this.clone();let i=this.start;i&&(i=FE(i,t,e));let n=this.end;if(n){const s=FE(n,t,e);n=n.getTime()===s.getTime()?s:M_(s,1,t,e)}return new js({start:i,end:n})}intersection(t){var m,v,x,M;if(!t)return this.clone();if(this.isEmpty||t.isEmpty)return js.empty;if(this.isAllTime)return t.clone();if(t.isAllTime)return this.clone();const e=((m=this.start)==null?void 0:m.getTime())??-1/0,i=((v=this.end)==null?void 0:v.getTime())??1/0,n=((x=t.start)==null?void 0:x.getTime())??-1/0,s=((M=t.end)==null?void 0:M.getTime())??1/0;let h,f;return n>=e&&n<=i?h=n:e>=n&&e<=s&&(h=e),i>=n&&i<=s?f=i:s>=e&&s<=i&&(f=s),h==null||f==null||isNaN(h)||isNaN(f)?js.empty:new js({start:h===-1/0?null:new Date(h),end:f===1/0?null:new Date(f)})}offset(t,e,i=Xa){if(this.isEmpty||this.isAllTime)return this.clone();const n=new js,{start:s,end:h}=this;return s!=null&&(n.start=M_(s,t,e,i)),h!=null&&(n.end=M_(h,t,e,i)),n}toArray(){var t,e;return this.isEmpty?[void 0,void 0]:[((t=this.start)==null?void 0:t.getTime())??null,((e=this.end)==null?void 0:e.getTime())??null]}union(t){if(!t||t.isEmpty)return this.clone();if(this.isEmpty)return t.clone();if(this.isAllTime||t.isAllTime)return jE.clone();const e=this.start!=null&&t.start!=null?new Date(Math.min(this.start.getTime(),t.start.getTime())):null,i=this.end!=null&&t.end!=null?new Date(Math.max(this.end.getTime(),t.end.getTime())):null;return new js({start:e,end:i})}};_([T({type:Date,json:{write:{allowNull:!0}}})],ds.prototype,"end",void 0),_([Ct("end")],ds.prototype,"readEnd",null),_([_t("end")],ds.prototype,"writeEnd",null),_([T({readOnly:!0,json:{read:!1}})],ds.prototype,"isAllTime",null),_([T({readOnly:!0,json:{read:!1}})],ds.prototype,"isEmpty",null),_([T({type:Date,json:{write:{allowNull:!0}}})],ds.prototype,"start",void 0),_([Ct("start")],ds.prototype,"readStart",null),_([_t("start")],ds.prototype,"writeStart",null),ds=js=_([Y("esri.TimeExtent")],ds);const jE=new ds,Lne=new ds({start:void 0,end:void 0}),Ww=ds;let gN=0;const np=t=>{let e=class extends t{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+gN++})}};return e=_([Y("esri.core.Identifiable")],e),e},eT=t=>{let e=class extends t{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:gN++})}};return e=_([Y("esri.core.Identifiable.NumericIdentifiable")],e),e};let GE=class extends np(class{}){};GE=_([Y("esri.core.Identifiable")],GE);async function Nne(t){var n;const e="portalItem"in t?t:{portalItem:t},{fromItem:i}=await be(async()=>{const{fromItem:s}=await import("./portalLayers-C0J5xtxI.js").then(h=>h.p);return{fromItem:s}},__vite__mapDeps([192,193,194,175]),import.meta.url);try{return await i(e)}catch(s){const h=e==null?void 0:e.portalItem,f=(h==null?void 0:h.id)||"unset",m=((n=h==null?void 0:h.portal)==null?void 0:n.url)||vt.portalUrl;throw Ce.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+m+"', id: '"+f+"')",s),s}}let Dne=0,Gi=class extends ln.EventedMixin(np(na)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new Lt(-180,-90,180,90,tt.WGS84),this.id=Date.now().toString(16)+"-layer-"+Dne++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=tt.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(e){const i=typeof e=="string"?{url:e}:e;return(await be(async()=>{const{fromUrl:n}=await import("./arcgisLayers-D_8ckCaT.js");return{fromUrl:n}},__vite__mapDeps([195,193,194]),import.meta.url)).fromUrl(i)}static fromPortalItem(e){return Nne(e)}initialize(){this.when().catch(e=>{Zr(e)||Ce.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})})}destroy(){const e=this.parent;if(e){const i=this;"layers"in e&&e.layers.includes(i)?e.layers.remove(i):"tables"in e&&e.tables.includes(i)?e.tables.remove(i):"baseLayers"in e&&e.baseLayers.includes(i)?e.baseLayers.remove(i):"referenceLayers"in e&&e.referenceLayers.includes(i)&&e.referenceLayers.remove(i),this._set("parent",null)}}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){return _r(this.url)}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await zi(e,{query:{f:"json"},responseType:"json"})).data;throw new fe("layer:no-attribution-data","Layer does not have attribution data")}};_([T({type:String})],Gi.prototype,"attributionDataUrl",void 0),_([T({type:Lt})],Gi.prototype,"fullExtent",void 0),_([T({readOnly:!0})],Gi.prototype,"hasAttributionData",null),_([T({type:String,clonable:!1})],Gi.prototype,"id",void 0),_([T({type:Boolean,nonNullable:!0})],Gi.prototype,"legendEnabled",void 0),_([T({type:["show","hide","hide-children"]})],Gi.prototype,"listMode",void 0),_([T({type:Number,range:{min:0,max:1},nonNullable:!0})],Gi.prototype,"opacity",void 0),_([T({clonable:!1})],Gi.prototype,"parent",void 0),_([T({readOnly:!0})],Gi.prototype,"parsedUrl",null),_([T({type:Boolean,readOnly:!0})],Gi.prototype,"persistenceEnabled",void 0),_([T({type:Boolean})],Gi.prototype,"popupEnabled",void 0),_([T({type:Boolean})],Gi.prototype,"attributionVisible",void 0),_([T({type:tt})],Gi.prototype,"spatialReference",void 0),_([T({type:String})],Gi.prototype,"title",void 0),_([T({readOnly:!0,json:{read:!1}})],Gi.prototype,"type",void 0),_([T()],Gi.prototype,"url",void 0),_([T({type:Ww})],Gi.prototype,"visibilityTimeExtent",void 0),_([T({type:Boolean,nonNullable:!0})],Gi.prototype,"visible",void 0),Gi=_([Y("esri.layers.Layer")],Gi);const tT=Gi;function Kx(t,e,i){let n,s;if(t)for(let h=0,f=t.length;h<f;h++){if(n=t.at(h),(n==null?void 0:n[e])===i)return n;if((n==null?void 0:n.type)==="group"&&(s=Kx(n.layers,e,i),s))return s}}const zne=t=>{let e=class extends t{constructor(...i){super(...i),this.layers=new Pe;const n=f=>{f.parent&&"remove"in f.parent&&f.parent.remove(f)},s=f=>{f.parent=this,this.layerAdded(f),f.type!=="elevation"&&f.type!=="base-elevation"||Ce.getLogger(this).error(`Layer 'title:${f.title}, id:${f.id}' of type '${f.type}' is not supported as an operational layer and will therefore be ignored.`)},h=f=>{f.parent=null,this.layerRemoved(f)};this.addHandles([this.layers.on("before-add",f=>{if(f.item===this)return f.preventDefault(),void Ce.getLogger(this).error("#add()","Cannot add layer to itself.");n(f.item)}),this.layers.on("after-add",f=>s(f.item)),this.layers.on("after-remove",f=>h(f.item))])}destroy(){const i=this.layers.toArray();for(const n of i)n.destroy();this.layers.destroy()}set layers(i){this._set("layers",Xh(i,this._get("layers")))}add(i,n){const s=this.layers;if(n=s.getNextIndex(n),i instanceof tT){const h=i;h.parent===this?this.reorder(h,n):s.add(h,n)}else Tc(i)?i.then(h=>{this.destroyed||this.add(h,n)}):Ce.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(i,n){const s=this.layers;let h=s.getNextIndex(n);i.slice().forEach(f=>{f.parent!==this?(s.add(f,h),h+=1):this.reorder(f,h)})}findLayerById(i){return Kx(this.layers,"id",i)}findLayerByUid(i){return Kx(this.layers,"uid",i)}remove(i){return this.layers.remove(i)}removeMany(i){return this.layers.removeMany(i)}removeAll(){return this.layers.removeAll()}reorder(i,n){return this.layers.reorder(i,n)}layerAdded(i){}layerRemoved(i){}};return _([T()],e.prototype,"layers",null),e=_([Y("esri.support.LayersMixin")],e),e};function Yx(t,e,i){if(t)for(let n=0,s=t.length;n<s;n++){const h=t.at(n);if(h[e]===i)return h;if((h==null?void 0:h.type)==="group"){const f=Yx(h.tables,e,i);if(f)return f}}}const Fne=t=>{let e=class extends t{constructor(...i){super(...i),this.tables=new Pe,this.addHandles([this.tables.on("after-add",n=>{const s=n.item;s.parent&&s.parent!==this&&"tables"in s.parent&&s.parent.tables.remove(s),s.parent=this,s.type!=="feature"&&Ce.getLogger(this).error(`Layer 'title:${s.title}, id:${s.id}' of type '${s.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",n=>{n.item.parent=null})])}destroy(){const i=this.tables.toArray();for(const n of i)n.destroy();this.tables.destroy()}set tables(i){this._set("tables",Xh(i,this._get("tables")))}findTableById(i){return Yx(this.tables,"id",i)}findTableByUid(i){return Yx(this.tables,"uid",i)}};return _([T()],e.prototype,"tables",null),e=_([Y("esri.support.TablesMixin")],e),e};let Oo=class extends Fne(zne(ln.EventedMixin(Re))){constructor(e){super(e),this.allLayers=new qg({getCollections:()=>{var i,n,s;return[(i=this.basemap)==null?void 0:i.baseLayers,(n=this.ground)==null?void 0:n.layers,this.layers,(s=this.basemap)==null?void 0:s.referenceLayers]},getChildrenFunction:i=>"layers"in i?i.layers:null}),this.allTables=Ane(this),this.basemap=null,this.editableLayers=new qg({getCollections:()=>[this.allLayers],itemFilterFunction:pie}),this.ground=new y2,this._basemapCache=vne()}destroy(){bne(this._basemapCache),this._basemapCache=null,this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.basemap=yt(this.basemap),yt(this.ground),this._set("ground",null)}castBasemap(e){return wne(e,this._basemapCache)}castGround(e){return One(e)??this._get("ground")}findLayerById(e){return this.allLayers.find(i=>i.id===e)}findTableById(e){return this.allTables.find(i=>i.id===e)}};_([T({readOnly:!0,dependsOn:[]})],Oo.prototype,"allLayers",void 0),_([T({readOnly:!0})],Oo.prototype,"allTables",void 0),_([T({type:Fh,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],Oo.prototype,"basemap",void 0),_([qi("basemap")],Oo.prototype,"castBasemap",null),_([T({readOnly:!0})],Oo.prototype,"editableLayers",void 0),_([T({type:y2,nonNullable:!0})],Oo.prototype,"ground",void 0),_([qi("ground")],Oo.prototype,"castGround",null),_([T()],Oo.prototype,"undoRedo",void 0),Oo=_([Y("esri.Map")],Oo);const jne=Oo;let _g=class extends Pe{constructor(e){super(e),this.addHandles([this.on("before-add",i=>{i.item==null&&i.preventDefault()}),this.on("after-add",i=>this._own(i.item)),this.on("after-remove",i=>this._release(i.item))])}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(Pe.ofType(this.itemType.Type))(e):new Pe(e)}};function Xx(t,e){return{type:t,cast:AL,set(i){const n=Xh(i,this._get(e),t);n.owner=this,this._set(e,n)}}}_([T()],_g.prototype,"owner",null),_g=_([Y("esri.core.support.OwningCollection")],_g);var S1;const v2=Tr()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),mN=v2.jsonValues.slice();TB(mN,"orthometric");const xg=Tr()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let Po=S1=class extends Fe{constructor(t){super(t),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(t,e,i){return v2.write(t,e,i)}readHeightModel(t,e,i){return v2.read(t)||(i!=null&&i.messages&&i.messages.push(Gne(t,{context:i})),null)}readHeightUnit(t,e,i){return xg.read(t)||(i!=null&&i.messages&&i.messages.push(VE(t,{context:i})),null)}readHeightUnitService(t,e,i){return MO(t)||xg.read(t)||(i!=null&&i.messages&&i.messages.push(VE(t,{context:i})),null)}readVertCRS(t,e){return e.vertCRS||e.ellipsoid||e.geoid}clone(){return new S1({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(t){return!!t&&(this===t||this.heightModel===t.heightModel&&this.heightUnit===t.heightUnit&&this.vertCRS===t.vertCRS)}static deriveUnitFromSR(t,e){const i=EO(e);return new S1({heightModel:t.heightModel,heightUnit:i??void 0,vertCRS:t.vertCRS})}write(t,e){return e={origin:"web-scene",...e},super.write(t,e)}static fromJSON(t){if(!t)return null;const e=new S1;return e.read(t,{origin:"web-scene"}),e}};function VE(t,e){return new vc("height-unit:unsupported",`Height unit of value '${t}' is not supported`,e)}function Gne(t,e){return new vc("height-model:unsupported",`Height model of value '${t}' is not supported`,e)}_([T({type:v2.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:mN,default:"ellipsoidal"}}}})],Po.prototype,"heightModel",void 0),_([_t("web-scene","heightModel")],Po.prototype,"writeHeightModel",null),_([Ct(["web-scene","service"],"heightModel")],Po.prototype,"readHeightModel",null),_([T({type:xg.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:xg.jsonValues,write:xg.write}}}})],Po.prototype,"heightUnit",void 0),_([Ct("web-scene","heightUnit")],Po.prototype,"readHeightUnit",null),_([Ct("service","heightUnit")],Po.prototype,"readHeightUnitService",null),_([T({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],Po.prototype,"vertCRS",void 0),_([Ct("service","vertCRS",["vertCRS","ellipsoid","geoid"])],Po.prototype,"readVertCRS",null),Po=S1=_([Y("esri.geometry.HeightModelInfo")],Po);const Zw=Po;let b2=class extends _g{constructor(e){super(e),this.addHandles(this.on("before-add",i=>{i.item!=null&&i.item.parent===this.owner&&(Ce.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),i.preventDefault())}))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};b2=_([Y("esri.support.AnalysesCollection")],b2);async function Vne(t,e){const{WhereClause:i}=await be(()=>import("./WhereClause-BO6P4l1i.js").then(n=>n.W),__vite__mapDeps([24,25,26]),import.meta.url);return i.create(t,e)}function iT(t,e){return t==="1=1"?e??t:e==="1=1"?t??e:t!=null&&t!==""?e!=null&&e!==""?`(${t}) AND (${e})`:t:e}function lSe(t){return typeof t=="number"}function nT(t){return typeof t=="string"||t instanceof String}const Hne="yyyy-MM-dd",Bne="TT";var Sg;(function(t){t.HM="HH:mm",t.HMS="HH:mm:ss",t.HMS_MS="HH:mm:ss.SSS"})(Sg||(Sg={}));const Une=[Sg.HMS_MS,Sg.HMS,Sg.HM,Bne];function HE(t){if(!t||!nT(t))return null;const e=et.fromFormat(t,Hne);return e.isValid?e:null}function BE(t){return t&&nT(t)?zg(Une,e=>{const i=et.fromFormat(t,e);return i.isValid?i:null})??null:null}function UE(t){if(!t||!nT(t))return null;const e=et.fromISO(t);return e.isValid?e:null}var Yf;(function(t){t.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",t.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(Yf||(Yf={}));const qne=new Set(["integer","small-integer","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"]);function Wne(t){return t!=null&&qne.has(t.type)}function yN(t){return t!=null&&(t.type==="date-only"||t.type==="esriFieldTypeDateOnly")}function vN(t){return t!=null&&(t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset")}function bN(t){return t!=null&&(t.type==="time-only"||t.type==="esriFieldTypeTimeOnly")}function Zne(t,e,i){const n=t==null?void 0:t.domain;if(!n)return null;switch(n.type){case"range":{const{min:s,max:h}=Jne(t);if(s!=null&&+e<s||h!=null&&+e>h)return Yf.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(n.codedValues==null||n.codedValues.every(s=>s==null||s.code!==e))return Yf.INVALID_CODED_VALUE}return null}function Jne(t,e){const i=t==null?void 0:t.domain;if(!i||i.type!=="range")return;const n="range"in i?i.range[0]:i.minValue,s="range"in i?i.range[1]:i.maxValue,h=Wne(t);return yN(t)||bN(t)||vN(t)?{...Kne(t,s,n),isInteger:h}:{min:n!=null&&typeof n=="number"?n:null,max:s!=null&&typeof s=="number"?s:null,rawMin:n,rawMax:s,isInteger:h}}function Kne(t,e,i){var n,s,h,f,m,v;return yN(t)?{min:(n=HE(i))==null?void 0:n.toMillis(),max:(s=HE(e))==null?void 0:s.toMillis(),rawMin:i,rawMax:e}:bN(t)?{min:(h=BE(i))==null?void 0:h.toMillis(),max:(f=BE(e))==null?void 0:f.toMillis(),rawMin:i,rawMax:e}:vN(t)?{min:(m=UE(i))==null?void 0:m.toMillis(),max:(v=UE(e))==null?void 0:v.toMillis(),rawMin:i,rawMax:e}:{max:null,min:null}}const Yne=()=>Ce.getLogger("esri.support.arcadeOnDemand");let E_;function wN(){return E_||(E_=(async()=>{const t=await be(()=>import("./arcadeUtils-DFEUQ7TH.js").then(e=>e.aN),__vite__mapDeps([196,25,26,197,29,15,12,13,16,28]),import.meta.url);return{arcade:t.arcade,arcadeUtils:t,Dictionary:t.Dictionary,Feature:t.arcadeFeature}})()),E_}const cSe=(t,e,i)=>_N.create(t,e,i,null,["$feature","$view"],[]),hSe=(t,e,i,n)=>_N.create(t,e,i,n,["$feature","$view"],[]);let _N=class xN{constructor(e,i,n,s,h,f,m){this.services=null,this.script=e,this.evaluate=s;const v=Array.isArray(f)?f:f==null?void 0:f.fields;this.fields=v??[],this._syntaxTree=n,this._arcade=i,this._arcadeFeature=h,this._spatialReference=m,this._referencesGeometry=i.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(e,i,n,s,h,f){const{arcade:m,Feature:v,Dictionary:x}=await wN(),M=tt.fromJSON(i);let $;try{$=m.parseScript(e,f)}catch(de){return Yne().error(new fe("arcade-bad-expression","Failed to parse arcade script",{script:e,error:de})),null}const I=h.reduce((de,xe)=>({...de,[xe]:null}),{});let P=null;s!=null&&(P=new x(s),P.immutable=!0,I.$config=null);const L=m.scriptUsesGeometryEngine($),z=L&&m.enableGeometrySupport(),F=m.scriptUsesFeatureSet($)&&m.enableFeatureSetSupport(),U=m.scriptIsAsync($),W=U&&m.enableAsyncSupport(),K={vars:I,spatialReference:M,useAsync:!!W};await Promise.all([z,F,W]);const J=new Set;await m.loadDependentModules(J,$,null,U,L);const te=new x;te.immutable=!1,te.setField("scale",0);const ie=m.compileScript($,K),le=(de,xe)=>{var ve;const we=(ve=de.$view)==null?void 0:ve.timeZone;return"$view"in de&&de.$view&&(te.setField("scale",typeof de.$view=="object"&&"scale"in de.$view?de.$view.scale:void 0),de.$view=te),P&&(de.$config=P),ie({vars:de,spatialReference:M,services:xe,timeZone:we})};return new xN(e,m,$,le,new v,n,M)}repurposeFeature(e){return e.geometry&&!e.geometry.spatialReference&&(e.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(e.geometry,e.attributes,{fields:this.fields}),this._arcadeFeature}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}};const Xne=/^([0-9_])/,Qne=/[^a-z0-9_\u0080-\uffff]+/gi;function uSe(t){return t==null?null:t.trim().replaceAll(Qne,"_").replace(Xne,"F$1")||null}const ere=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],tre=["field","normalizationField"];function dSe(t,e){if(t!=null&&e!=null){for(const i of Array.isArray(t)?t:[t])if(qE(ere,i,e),"visualVariables"in i&&i.visualVariables)for(const n of i.visualVariables)qE(tre,n,e)}}function qE(t,e,i){if(t)for(const n of t){const s=gm(n,e),h=s&&typeof s!="function"&&i.get(s);h&&Xd(n,h.name,e)}}function pSe(t,e){var i;if(t!=null&&((i=e==null?void 0:e.fields)!=null&&i.length))if("startField"in t){const n=e.get(t.startField),s=e.get(t.endField);t.startField=(n==null?void 0:n.name)??null,t.endField=(s==null?void 0:s.name)??null}else{const n=e.get(t.startTimeField),s=e.get(t.endTimeField);t.startTimeField=(n==null?void 0:n.name)??null,t.endTimeField=(s==null?void 0:s.name)??null}}const k_=new Set;function rT(t,e){return t&&e?(k_.clear(),Qg(k_,t,e),Array.from(k_).sort()):[]}function Qg(t,e,i){var n;if(i)if((n=e==null?void 0:e.fields)!=null&&n.length)if(i.includes("*"))for(const{name:s}of e.fields)t.add(s);else for(const s of i)Jw(t,e,s);else{if(i.includes("*"))return t.clear(),void t.add("*");for(const s of i)s!=null&&t.add(s)}}function Jw(t,e,i){if(typeof i=="string")if(e){const n=e.get(i);n&&t.add(n.name)}else t.add(i)}function fSe(t,e){return e==null||t==null?[]:e.includes("*")?(t.fields??[]).map(i=>i.name):e}function gSe(t,e,i=1){if(!e||!t)return[];if(e.includes("*"))return["*"];const n=rT(t,e);return n.length/t.fields.length>=i?["*"]:n}async function eu(t,e,i){var h;if(!i)return;const{arcadeUtils:n}=await wN(),s=n.extractFieldNames(i,(h=e==null?void 0:e.fields)==null?void 0:h.map(f=>f.name));for(const f of s)Jw(t,e,f)}async function SN(t,e,i){if(i&&i!=="1=1"){const n=await Vne(i,e);if(!n.isStandardized)throw new fe("fieldUtils:collectFilterFields","Where clause is not standardized",{where:i});Qg(t,e,n.fieldNames)}}function ire({displayField:t,fields:e}){return t||(e!=null&&e.length?$_(e,"name-or-title")||$_(e,"unique-identifier")||$_(e,"type-or-category")||nre(e):null)}function nre(t){for(const e of t){if(!(e!=null&&e.name))continue;const i=e.name.toLowerCase();if(i.includes("name")||i.includes("title"))return e.name}return null}function $_(t,e){for(const i of t)if(i!=null&&i.valueType&&i.valueType===e)return i.name;return null}async function mSe(t,e){var n;if(!e)return;const i=(n=e.elevationInfo)==null?void 0:n.featureExpressionInfo;return i?i.collectRequiredFields(t,e.fieldsIndex):void 0}function rre(t,e,i){i.onStatisticExpression?eu(t,e,i.onStatisticExpression.expression):t.add(i.onStatisticField)}async function ySe(t,e,i){if(!e||!i||!("fields"in i))return;const n=[],s=i.popupTemplate;n.push(sre(t,e,s)),i.fields&&n.push(...i.fields.map(async h=>rre(t,e.fieldsIndex,h))),await Promise.all(n)}async function sre(t,e,i){const n=[];i!=null&&i.expressionInfos&&n.push(...i.expressionInfos.map(h=>eu(t,e.fieldsIndex,h.expression)));const s=i==null?void 0:i.content;if(Array.isArray(s))for(const h of s)h.type==="expression"&&h.expressionInfo&&n.push(eu(t,e.fieldsIndex,h.expressionInfo.expression));await Promise.all(n)}async function vSe(t,e,i){e&&(e.timeInfo&&(i!=null&&i.timeExtent)&&Qg(t,e.fieldsIndex,[e.timeInfo.startField,e.timeInfo.endField]),e.floorInfo&&Qg(t,e.fieldsIndex,[e.floorInfo.floorField]),(i==null?void 0:i.where)!=null&&await SN(t,e.fieldsIndex,i.where))}async function bSe(t,e,i){e&&i&&await Promise.all(i.map(n=>ore(t,e,n)))}async function ore(t,e,i){e&&i&&(i.valueExpression?await eu(t,e.fieldsIndex,i.valueExpression):i.field&&Jw(t,e.fieldsIndex,i.field))}function wSe(t){return t?rT(t.fieldsIndex,TN(t)):[]}function are(t){if(!t)return[];const e=t.geometryFieldsInfo;return e?rT(t.fieldsIndex,[e.shapeAreaField,e.shapeLengthField]):[]}const lre=new Set(["oid","global-id","guid"]),cre=new Set(["oid","global-id"]),hre=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^shape$/i,/^shape_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/perimeter/i,/objectid/i,/_i$/i];function ure(t){const e=new Set;MN(t).forEach(n=>e.add(n)),are(t).forEach(n=>e.add(n.toLowerCase()));const i=t&&"infoFor3D"in t?t.infoFor3D:void 0;return i&&(Object.values(i.assetMapFieldRoles).forEach(n=>e.add(n.toLowerCase())),Object.values(i.transformFieldRoles).forEach(n=>e.add(n.toLowerCase()))),Array.from(e)}function TN(t){if(!t)return[];const e="editFieldsInfo"in t&&t.editFieldsInfo;if(!e)return[];const{creationDateField:i,creatorField:n,editDateField:s,editorField:h}=e;return[i,n,s,h].filter(Boolean)}function MN(t){return TN(t).map(e=>e.toLowerCase())}function _Se(t,e){var i;return t.editable&&!lre.has(t.type)&&!MN(e).includes(((i=t.name)==null?void 0:i.toLowerCase())??"")}function xSe(t,e){var n;const i=((n=t.name)==null?void 0:n.toLowerCase())??"";return!((e==null?void 0:e.objectIdField)!=null&&i===e.objectIdField.toLowerCase()||(e==null?void 0:e.globalIdField)!=null&&i===e.globalIdField.toLowerCase()||ure(e).includes(i)||cre.has(t.type)||hre.some(s=>s.test(i)))}async function SSe(t,e){const{labelingInfo:i,fieldsIndex:n}=e;i!=null&&i.length&&await Promise.all(i.map(s=>dre(t,n,s)))}async function dre(t,e,i){if(!i)return;const n=i.getLabelExpression(),s=i.where;if(n.type==="arcade")await eu(t,e,n.expression);else{const h=n.expression.match(/{[^}]*}/g);h&&h.forEach(f=>{Jw(t,e,f.slice(1,-1))})}await SN(t,e,s)}function TSe(t){const e=t.defaultValue;return e!==void 0&&$N(t,e)?e:t.nullable?null:void 0}function MSe(t){const e=typeof t=="string"?{type:t}:t;return Mre(e)?255:e.type==="esriFieldTypeDate"||e.type==="date"?8:void 0}function EN(t){return typeof t=="number"&&!isNaN(t)&&isFinite(t)}function pre(t){return t===null||EN(t)}function fre(t){return t===null||Number.isInteger(t)}function kN(t){return t!=null&&typeof t=="string"}function gre(t){return t===null||kN(t)}function mre(){return!0}function $N(t,e){let i;switch(t.type){case"date":case"integer":case"long":case"small-integer":case"big-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":case"esriFieldTypeBigInteger":i=t.nullable?fre:Number.isInteger;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=t.nullable?pre:EN;break;case"string":case"esriFieldTypeString":i=t.nullable?gre:kN;break;default:i=mre}return arguments.length===1?i:i(e)}const yre=["integer","small-integer","big-integer"],vre=["single","double"],bre=["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"],wre=["esriFieldTypeSingle","esriFieldTypeDouble"],_re=new Set([...yre,...bre]),xre=new Set([...vre,...wre]),Sre=kA(_re,xre);function Tre(t){return t!=null&&Sre.has(t.type)}function Mre(t){return t!=null&&(t.type==="string"||t.type==="esriFieldTypeString")}function ESe(t){return t!=null&&(t.type==="date"||t.type==="esriFieldTypeDate")}function kSe(t){return t!=null&&(t.type==="date-only"||t.type==="esriFieldTypeDateOnly")}function $Se(t){return t!=null&&(t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset")}function CSe(t){return t!=null&&(t.type==="time-only"||t.type==="esriFieldTypeTimeOnly")}function ISe(t){return t!=null&&(t.type==="oid"||t.type==="esriFieldTypeOID")}function ASe(t){return t!=null&&(t.type==="global-id"||t.type==="esriFieldTypeGlobalID")}function OSe(t,e){return Ere(t,e)===null}var w2,_2;function PSe(t){return t==null||typeof t=="number"&&isNaN(t)?null:t}function Ere(t,e){return t==null||t.nullable&&e===null?null:Tre(t)&&!kre(t.type,Number(e))?w2.OUT_OF_RANGE:$N(t,e)?t.domain?Zne(t,e):null:_2.INVALID_TYPE}function kre(t,e){const i=typeof t=="string"?CN(t):t;if(!i)return!1;const n=i.min,s=i.max;return i.isInteger?Number.isInteger(e)&&e>=n&&e<=s:e>=n&&e<=s}function CN(t){switch(t){case"esriFieldTypeSmallInteger":case"small-integer":return $re;case"esriFieldTypeInteger":case"integer":return Cre;case"esriFieldTypeBigInteger":case"big-integer":return Ire;case"esriFieldTypeSingle":case"single":return Are;case"esriFieldTypeDouble":case"double":return Ore}}(function(t){t.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(w2||(w2={})),function(t){t.INVALID_TYPE="type-validation-error::invalid-type"}(_2||(_2={}));const $re={min:-32768,max:32767,isInteger:!0,rawMin:-32768,rawMax:32767},Cre={min:-2147483648,max:2147483647,isInteger:!0,rawMin:-2147483648,rawMax:2147483647},Ire={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0,rawMin:-Number.MAX_SAFE_INTEGER,rawMax:Number.MAX_SAFE_INTEGER},Are={min:-34e37,max:12e37,isInteger:!1,rawMin:-34e37,rawMax:12e37},Ore={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1,rawMin:-Number.MAX_VALUE,rawMax:Number.MAX_VALUE};function RSe(t,e,i){switch(t){case Yf.INVALID_CODED_VALUE:return`Value ${i} is not in the coded domain - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case Yf.VALUE_OUT_OF_RANGE:return`Value ${i} is out of the range of valid values - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case _2.INVALID_TYPE:return`Value ${i} is not a valid value for the field type - field: ${e.name}, type: ${e.type}, nullable: ${e.nullable}`;case w2.OUT_OF_RANGE:{const{min:n,max:s}=CN(e.type);return`Value ${i} is out of range for the number type - field: ${e.name}, type: ${e.type}, value range is ${n} to ${s}`}}}function LSe(t,e){return!Pre(t,e,null)}function Pre(t,e,i){if(!(e!=null&&e.attributes)||!t)return!0;const n=new Set(Object.keys(e.attributes));let s=!1;for(const h of t)if(!n.has(h)&&(s=!0,i==null))break;return s}function NSe(t){return!!t&&["raster.itempixelvalue","raster.servicepixelvalue"].some(e=>t.toLowerCase().startsWith(e))}function Rre(t){const e=t==null?void 0:t.match(/{[^}]+}/g);return e?e.map(i=>i.slice(1,-1).split(":")[0].trim()):[]}let Uv=class extends Fe{constructor(e){super(e),this.type=null}};_([T({type:["attachments","custom","fields","media","text","expression","relationship"],readOnly:!0,json:{read:!1,write:!0}})],Uv.prototype,"type",void 0),Uv=_([Y("esri.popup.content.Content")],Uv);const uu=Uv;var Qx;let Ou=Qx=class extends uu{constructor(t){super(t),this.description=null,this.displayType="auto",this.title=null,this.type="attachments"}clone(){return new Qx({description:this.description,displayType:this.displayType,title:this.title})}};_([T({type:String,json:{write:!0}})],Ou.prototype,"description",void 0),_([T({type:["auto","preview","list"],json:{write:!0}})],Ou.prototype,"displayType",void 0),_([T({type:String,json:{write:!0}})],Ou.prototype,"title",void 0),_([T({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],Ou.prototype,"type",void 0),Ou=Qx=_([Y("esri.popup.content.AttachmentsContent")],Ou);const x2=Ou;var e9;let Pu=e9=class extends uu{constructor(t){super(t),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new e9({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?_e(this.outFields):null})}};_([T()],Pu.prototype,"creator",void 0),_([T()],Pu.prototype,"destroyer",void 0),_([T()],Pu.prototype,"outFields",void 0),_([T({type:["custom"],readOnly:!0})],Pu.prototype,"type",void 0),Pu=e9=_([Y("esri.popup.content.CustomContent")],Pu);const Lre=Pu;var t9;let zp=t9=class extends Fe{constructor(t){super(t),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new t9({title:this.title,expression:this.expression})}};_([T({type:String,json:{write:!0}})],zp.prototype,"title",void 0),_([T({type:String,json:{write:!0}})],zp.prototype,"expression",void 0),_([T({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],zp.prototype,"returnType",void 0),zp=t9=_([Y("esri.popup.ElementExpressionInfo")],zp);const Nre=zp;var i9;let T1=i9=class extends uu{constructor(t){super(t),this.expressionInfo=null,this.type="expression"}clone(){var t;return new i9({expressionInfo:(t=this.expressionInfo)==null?void 0:t.clone()})}};_([T({type:Nre,json:{write:!0}})],T1.prototype,"expressionInfo",void 0),_([T({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],T1.prototype,"type",void 0),T1=i9=_([Y("esri.popup.content.ExpressionContent")],T1);const sT=T1;let Fp=class extends lo(Fe){constructor(e){super(e),this.dateFormat=null,this.digitSeparator=!1,this.places=null}};_([Ke(OX)],Fp.prototype,"dateFormat",void 0),_([T({type:Boolean,json:{write:!0}})],Fp.prototype,"digitSeparator",void 0),_([T({type:Ii,json:{write:!0}})],Fp.prototype,"places",void 0),Fp=_([Y("esri.popup.support.FieldInfoFormat")],Fp);const Dre=Fp;var n9;let Ro=n9=class extends Fe{constructor(t){super(t),this.fieldName=null,this.format=void 0,this.isEditable=!0,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){var t;return new n9({fieldName:this.fieldName,format:(t=this.format)==null?void 0:t.clone(),isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};_([T({type:String,json:{write:!0}})],Ro.prototype,"fieldName",void 0),_([T({type:Dre,json:{write:!0}})],Ro.prototype,"format",void 0),_([T({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],Ro.prototype,"isEditable",void 0),_([T({type:String,json:{write:!0}})],Ro.prototype,"label",void 0),_([Ke(new an({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],Ro.prototype,"stringFieldOption",void 0),_([T({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],Ro.prototype,"statisticType",void 0),_([T({type:String,json:{write:!0}})],Ro.prototype,"tooltip",void 0),_([T({type:Boolean,json:{write:!0}})],Ro.prototype,"visible",void 0),Ro=n9=_([Y("esri.popup.FieldInfo")],Ro);const IN=Ro;var r9;let Al=r9=class extends uu{constructor(t){super(t),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(t,e){e.fieldInfos=t&&t.map(i=>i.toJSON())}clone(){return new r9(_e({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};_([T({type:Object,json:{write:!0}})],Al.prototype,"attributes",void 0),_([T({type:String,json:{write:!0}})],Al.prototype,"description",void 0),_([T({type:[IN]})],Al.prototype,"fieldInfos",void 0),_([_t("fieldInfos")],Al.prototype,"writeFieldInfos",null),_([T({type:String,json:{write:!0}})],Al.prototype,"title",void 0),_([T({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],Al.prototype,"type",void 0),Al=r9=_([Y("esri.popup.content.FieldsContent")],Al);const S2=Al;let Ru=class extends Fe{constructor(e){super(e),this.altText=null,this.caption="",this.title="",this.type=null}};_([T({type:String,json:{write:!0}})],Ru.prototype,"altText",void 0),_([T({type:String,json:{write:!0}})],Ru.prototype,"caption",void 0),_([T({type:String,json:{write:!0}})],Ru.prototype,"title",void 0),_([T({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],Ru.prototype,"type",void 0),Ru=_([Y("esri.popup.content.mixins.MediaInfo")],Ru);const oT=Ru;var s9;let Lu=s9=class extends Re{constructor(t){super(t),this.color=null,this.fieldName=null,this.tooltip=null,this.value=null}clone(){var t;return new s9({color:(t=this.color)==null?void 0:t.clone(),fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};_([T()],Lu.prototype,"color",void 0),_([T()],Lu.prototype,"fieldName",void 0),_([T()],Lu.prototype,"tooltip",void 0),_([T()],Lu.prototype,"value",void 0),Lu=s9=_([Y("esri.popup.content.support.ChartMediaInfoValueSeries")],Lu);const zre=Lu;var o9;let eh=o9=class extends Fe{constructor(t){super(t),this.colors=null,this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new o9({colors:_e(this.colors),fields:_e(this.fields),normalizeField:this.normalizeField,series:_e(this.series),tooltipField:this.tooltipField})}};_([T({type:[gt],json:{type:[[Ii]],write:!0}})],eh.prototype,"colors",void 0),_([T({type:[String],json:{write:!0}})],eh.prototype,"fields",void 0),_([T({type:String,json:{write:!0}})],eh.prototype,"normalizeField",void 0),_([T({type:[zre],json:{read:!1}})],eh.prototype,"series",void 0),_([T({type:String,json:{write:!0}})],eh.prototype,"tooltipField",void 0),eh=o9=_([Y("esri.popup.content.support.ChartMediaInfoValue")],eh);const Fre=eh;let M1=class extends oT{constructor(e){super(e),this.type=null,this.value=void 0}};_([T({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],M1.prototype,"type",void 0),_([T({type:Fre,json:{write:!0}})],M1.prototype,"value",void 0),M1=_([Y("esri.popup.content.mixins.ChartMediaInfo")],M1);const Kw=M1,Yw=Tr()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var a9;let qv=a9=class extends Kw{constructor(t){super(t),this.type="bar-chart"}clone(){var t;return new a9({altText:this.altText,title:this.title,caption:this.caption,value:(t=this.value)==null?void 0:t.clone()})}};_([T({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:Yw.write}})],qv.prototype,"type",void 0),qv=a9=_([Y("esri.popup.content.BarChartMediaInfo")],qv);const AN=qv;var l9;let Wv=l9=class extends Kw{constructor(t){super(t),this.type="column-chart"}clone(){var t;return new l9({altText:this.altText,title:this.title,caption:this.caption,value:(t=this.value)==null?void 0:t.clone()})}};_([T({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:Yw.write}})],Wv.prototype,"type",void 0),Wv=l9=_([Y("esri.popup.content.ColumnChartMediaInfo")],Wv);const ON=Wv;var c9;let E1=c9=class extends Fe{constructor(t){super(t),this.linkURL=null,this.sourceURL=null}clone(){return new c9({linkURL:this.linkURL,sourceURL:this.sourceURL})}};_([T({type:String,json:{write:!0}})],E1.prototype,"linkURL",void 0),_([T({type:String,json:{write:!0}})],E1.prototype,"sourceURL",void 0),E1=c9=_([Y("esri.popup.content.support.ImageMediaInfoValue")],E1);const jre=E1;var h9;let jp=h9=class extends oT{constructor(t){super(t),this.refreshInterval=0,this.type="image",this.value=void 0}clone(){var t;return new h9({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:(t=this.value)==null?void 0:t.clone()})}};_([T({type:Number,json:{write:!0}})],jp.prototype,"refreshInterval",void 0),_([T({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],jp.prototype,"type",void 0),_([T({type:jre,json:{write:!0}})],jp.prototype,"value",void 0),jp=h9=_([Y("esri.popup.content.ImageMediaInfo")],jp);const PN=jp;var u9;let Zv=u9=class extends Kw{constructor(t){super(t),this.type="line-chart"}clone(){var t;return new u9({altText:this.altText,title:this.title,caption:this.caption,value:(t=this.value)==null?void 0:t.clone()})}};_([T({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:Yw.write}})],Zv.prototype,"type",void 0),Zv=u9=_([Y("esri.popup.content.LineChartMediaInfo")],Zv);const RN=Zv;var d9;let Jv=d9=class extends Kw{constructor(t){super(t),this.type="pie-chart"}clone(){var t;return new d9({altText:this.altText,title:this.title,caption:this.caption,value:(t=this.value)==null?void 0:t.clone()})}};_([T({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:Yw.write}})],Jv.prototype,"type",void 0),Jv=d9=_([Y("esri.popup.content.PieChartMediaInfo")],Jv);const LN=Jv,NN={base:oT,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":AN,"column-chart":ON,"line-chart":RN,"pie-chart":LN,image:PN}};var p9;let Lo=p9=class extends uu{constructor(t){super(t),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(t){return t&&t.map(e=>e.type==="image"?PN.fromJSON(e):e.type==="barchart"?AN.fromJSON(e):e.type==="columnchart"?ON.fromJSON(e):e.type==="linechart"?RN.fromJSON(e):e.type==="piechart"?LN.fromJSON(e):void 0).filter(Boolean)}writeMediaInfos(t,e){e.mediaInfos=t&&t.map(i=>i.toJSON())}clone(){return new p9(_e({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};_([T()],Lo.prototype,"activeMediaInfoIndex",void 0),_([T({type:Object,json:{write:!0}})],Lo.prototype,"attributes",void 0),_([T({type:String,json:{write:!0}})],Lo.prototype,"description",void 0),_([T({types:[NN]})],Lo.prototype,"mediaInfos",void 0),_([Ct("mediaInfos")],Lo.prototype,"readMediaInfos",null),_([_t("mediaInfos")],Lo.prototype,"writeMediaInfos",null),_([T({type:String,json:{write:!0}})],Lo.prototype,"title",void 0),_([T({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],Lo.prototype,"type",void 0),Lo=p9=_([Y("esri.popup.content.MediaContent")],Lo);const T2=Lo;var f9;let k1=f9=class extends Fe{constructor(t){super(t),this.field=null,this.order=null}clone(){return new f9({field:this.field,order:this.order})}};_([T({type:String,json:{write:!0}})],k1.prototype,"field",void 0),_([T({type:["asc","desc"],json:{write:!0}})],k1.prototype,"order",void 0),k1=f9=_([Y("esri.popup.support.RelatedRecordsInfoFieldOrder")],k1);const DN=k1;let _a=class extends lo(uu){constructor(e){super(e),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};_([T({type:String,json:{write:!0}})],_a.prototype,"description",void 0),_([T({type:Number,json:{type:Ii,write:!0}})],_a.prototype,"displayCount",void 0),_([T({type:["list"],json:{write:!0}})],_a.prototype,"displayType",void 0),_([T({type:[DN],json:{write:!0}})],_a.prototype,"orderByFields",void 0),_([T({type:Number,json:{type:Ii,write:!0}})],_a.prototype,"relationshipId",void 0),_([T({type:String,json:{write:!0}})],_a.prototype,"title",void 0),_([T({type:["relationship"],readOnly:!0,json:{read:!1,write:!0}})],_a.prototype,"type",void 0),_a=_([Y("esri.popup.content.RelationshipContent")],_a);const M2=_a;var g9;let $1=g9=class extends uu{constructor(t){super(t),this.text=null,this.type="text"}clone(){return new g9({text:this.text})}};_([T({type:String,json:{write:!0}})],$1.prototype,"text",void 0),_([T({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],$1.prototype,"type",void 0),$1=g9=_([Y("esri.popup.content.TextContent")],$1);const E2=$1,Gre={base:null,key:"type",typeMap:{attachment:x2,media:T2,text:E2,expression:sT,field:S2,relationship:M2}};var m9;let Nu=m9=class extends Fe{constructor(t){super(t),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new m9({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};_([T({type:String,json:{write:!0}})],Nu.prototype,"name",void 0),_([T({type:String,json:{write:!0}})],Nu.prototype,"title",void 0),_([T({type:String,json:{write:!0}})],Nu.prototype,"expression",void 0),_([T({type:["string","number"],json:{write:!0}})],Nu.prototype,"returnType",void 0),Nu=m9=_([Y("esri.popup.ExpressionInfo")],Nu);const Vre=Nu;var y9;let C1=y9=class extends Fe{constructor(t){super(t),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new y9({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};_([T({type:Boolean,json:{write:!0}})],C1.prototype,"returnTopmostRaster",void 0),_([T({type:Boolean,json:{write:!0}})],C1.prototype,"showNoDataRecords",void 0),C1=y9=_([Y("esri.popup.LayerOptions")],C1);const Hre=C1;var v9;let I1=v9=class extends Fe{constructor(t){super(t),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new v9({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?_e(this.orderByFields):null})}};_([T({type:Boolean,json:{write:!0}})],I1.prototype,"showRelatedRecords",void 0),_([T({type:[DN],json:{write:!0}})],I1.prototype,"orderByFields",void 0),I1=v9=_([Y("esri.popup.RelatedRecordsInfo")],I1);const Bre=I1;var b9;let Gs=b9=class extends np(Re){constructor(t){super(t),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new b9({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};_([T()],Gs.prototype,"active",void 0),_([T()],Gs.prototype,"className",void 0),_([T()],Gs.prototype,"disabled",void 0),_([T()],Gs.prototype,"icon",void 0),_([T()],Gs.prototype,"id",void 0),_([T()],Gs.prototype,"indicator",void 0),_([T()],Gs.prototype,"title",void 0),_([T()],Gs.prototype,"type",void 0),_([T()],Gs.prototype,"visible",void 0),Gs=b9=_([Y("esri.support.actions.ActionBase")],Gs);const Rm=Gs;var w9;let Kv=w9=class extends Rm{constructor(t){super(t),this.image=null,this.type="button"}clone(){return new w9({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};_([T()],Kv.prototype,"image",void 0),Kv=w9=_([Y("esri.support.actions.ActionButton")],Kv);const zN=Kv;var _9;let A1=_9=class extends Rm{constructor(t){super(t),this.image=null,this.type="toggle",this.value=!1}clone(){return new _9({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};_([T()],A1.prototype,"image",void 0),_([T()],A1.prototype,"value",void 0),A1=_9=_([Y("esri.support.actions.ActionToggle")],A1);const FN=A1,Q0="relationships/",WE="expression/",Ure=Pe.ofType({key:"type",defaultKeyValue:"button",base:Rm,typeMap:{button:zN,toggle:FN}}),qre={base:uu,key:"type",typeMap:{media:T2,custom:Lre,text:E2,attachments:x2,fields:S2,expression:sT,relationship:M2}},Wre=new Set(["attachments","fields","media","text","expression","relationship"]);let gn=class extends lo(Fe){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(e){return Array.isArray(e)?e.map(i=>yc(qre,i)):typeof e=="string"||typeof e=="function"||e instanceof HTMLElement||Tc(e)?e:(Ce.getLogger(this).error("content error","unsupported content value",{value:e}),null)}readContent(e,i){const{popupElements:n}=i;return Array.isArray(n)&&n.length>0?this._readPopupInfoElements(i.description,i.mediaInfos,n):this._readPopupInfo(i)}writeContent(e,i,n,s){typeof e!="string"?Array.isArray(e)&&(i.popupElements=e.filter(h=>Wre.has(h.type)).map(h=>h==null?void 0:h.toJSON(s)),i.popupElements.forEach(h=>{h.type==="attachments"?this._writeAttachmentContent(i):h.type==="media"?this._writeMediaContent(h,i):h.type==="text"?this._writeTextContent(h,i):h.type==="relationship"&&this._writeRelationshipContent(h,i)})):i.description=e}writeFieldInfos(e,i,n,s){const{content:h}=this,f=Array.isArray(h)?h:null;if(e){const m=f?f.filter(x=>x.type==="fields"):[],v=m.length&&m.every(x=>{var M;return(M=x.fieldInfos)==null?void 0:M.length});i.fieldInfos=e.filter(Boolean).map(x=>{const M=x.toJSON(s);return v&&(M.visible=!1),M})}if(f)for(const m of f)m.type==="fields"&&this._writeFieldsContent(m,i)}writeLayerOptions(e,i,n,s){i[n]=!e||e.showNoDataRecords===null&&e.returnTopmostRaster===null?null:e.toJSON(s)}writeTitle(e,i){i.title=e||""}async collectRequiredFields(e,i){const n=this.expressionInfos||[];await this._collectExpressionInfoFields(e,i,[...n,...this._getContentExpressionInfos(this.content,n)]),Qg(e,i,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e){const i=new Set;return await this.collectRequiredFields(i,e),[...i].sort()}_writeFieldsContent(e,i){if(!Array.isArray(e.fieldInfos)||!e.fieldInfos.length)return;const n=_e(e.fieldInfos);Array.isArray(i.fieldInfos)?n.forEach(s=>{const h=i.fieldInfos.find(f=>{var m,v;return((m=f.fieldName)==null?void 0:m.toLowerCase())===((v=s.fieldName)==null?void 0:v.toLowerCase())});h?h.visible=!0:i.fieldInfos.push(s)}):i.fieldInfos=n}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeRelationshipContent(e,i){var h,f;const n=((h=e.orderByFields)==null?void 0:h.map(m=>this._toFieldOrderJSON(m,e.relationshipId)))||[],s=[...((f=i.relatedRecordsInfo)==null?void 0:f.orderByFields)||[],...n];i.relatedRecordsInfo={showRelatedRecords:!0,...(s==null?void 0:s.length)&&{orderByFields:s}}}_writeTextContent(e,i){!i.description&&e.text&&(i.description=e.text)}_writeMediaContent(e,i){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const n=_e(e.mediaInfos);Array.isArray(i.mediaInfos)?i.mediaInfos=[...i.mediaInfos,...n]:i.mediaInfos=n}_readPopupInfoElements(e,i,n){const s={description:!1,mediaInfos:!1};return n.map(h=>h.type==="media"?(h.mediaInfos||!i||s.mediaInfos||(h.mediaInfos=i,s.mediaInfos=!0),T2.fromJSON(h)):h.type==="text"?(h.text||!e||s.description||(h.text=e,s.description=!0),E2.fromJSON(h)):h.type==="attachments"?x2.fromJSON(h):h.type==="fields"?S2.fromJSON(h):h.type==="expression"?sT.fromJSON(h):h.type==="relationship"?M2.fromJSON(h):void 0).filter(Boolean)}_toRelationshipContent(e){const{field:i,order:n}=e;if(!(i!=null&&i.startsWith(Q0)))return null;const s=i.replace(Q0,"").split("/");if(s.length!==2)return null;const h=parseInt(s[0],10),f=s[1];return typeof h=="number"&&f?M2.fromJSON({relationshipId:h,orderByFields:[{field:f,order:n}]}):null}_toFieldOrderJSON(e,i){const{order:n,field:s}=e;return{field:`${Q0}${i}/${s}`,order:n}}_readPopupInfo({description:e,mediaInfos:i,showAttachments:n,relatedRecordsInfo:s={showRelatedRecords:!1}}){const h=[];e?h.push(new E2({text:e})):h.push(new S2),Array.isArray(i)&&i.length&&h.push(T2.fromJSON({mediaInfos:i})),n&&h.push(x2.fromJSON({displayType:"auto"}));const{showRelatedRecords:f,orderByFields:m}=s;return f&&(m!=null&&m.length)&&m.forEach(v=>{const x=this._toRelationshipContent(v);x&&h.push(x)}),h.length?h:e}_getContentElementFields(e){const i=e==null?void 0:e.type;if(i==="attachments")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if(i==="custom")return e.outFields||[];if(i==="fields")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields(e.fieldInfos??this.fieldInfos)];if(i==="media"){const n=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...n.reduce((s,h)=>[...s,...this._getMediaInfoFields(h)],[])]}return i==="text"?this._extractFieldNames(e.text):[]}_getMediaInfoFields(e){const{caption:i,title:n,value:s}=e,h=s||{},{fields:f,normalizeField:m,tooltipField:v,sourceURL:x,linkURL:M}=h,$=[...this._extractFieldNames(n),...this._extractFieldNames(i),...this._extractFieldNames(x),...this._extractFieldNames(M),...f??[]];return m&&$.push(m),v&&$.push(v),$}_getContentExpressionInfos(e,i){return Array.isArray(e)?e.reduce((n,s)=>[...n,...s.type==="expression"&&s.expressionInfo?[s.expressionInfo]:[]],i):[]}_getContentFields(e){return typeof e=="string"?this._extractFieldNames(e):Array.isArray(e)?e.reduce((i,n)=>[...i,...this._getContentElementFields(n)],[]):[]}async _collectExpressionInfoFields(e,i,n){n&&await Promise.all(n.map(s=>eu(e,i,s.expression)))}_getFieldInfoFields(e){return e?e.filter(({fieldName:i,visible:n})=>!(n!==void 0&&!n||!i||i.startsWith(Q0)||i.startsWith(WE))).map(i=>i.fieldName):[]}_getActionsFields(e){return e?e.toArray().reduce((i,n)=>[...i,...this._getActionFields(n)],[]):[]}_getActionFields(e){const{className:i,title:n,type:s}=e,h=s==="button"||s==="toggle"?e.image:"";return[...this._extractFieldNames(n),...this._extractFieldNames(i),...this._extractFieldNames(h)]}_getTitleFields(e){return typeof e=="string"?this._extractFieldNames(e):[]}_extractFieldNames(e){return Rre(e).filter(i=>!(i.indexOf(Q0)===0||i.indexOf(WE)===0))}};_([T({type:Ure})],gn.prototype,"actions",void 0),_([T()],gn.prototype,"content",void 0),_([qi("content")],gn.prototype,"castContent",null),_([Ct("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],gn.prototype,"readContent",null),_([_t("content",{popupElements:{type:Pe.ofType(Gre)},showAttachments:{type:Boolean},mediaInfos:{type:Pe.ofType(NN)},description:{type:String},relatedRecordsInfo:{type:Bre}})],gn.prototype,"writeContent",null),_([T({type:[Vre],json:{write:!0}})],gn.prototype,"expressionInfos",void 0),_([T({type:[IN]})],gn.prototype,"fieldInfos",void 0),_([_t("fieldInfos")],gn.prototype,"writeFieldInfos",null),_([T({type:Hre})],gn.prototype,"layerOptions",void 0),_([_t("layerOptions")],gn.prototype,"writeLayerOptions",null),_([T({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],gn.prototype,"lastEditInfoEnabled",void 0),_([T()],gn.prototype,"outFields",void 0),_([T()],gn.prototype,"overwriteActions",void 0),_([T()],gn.prototype,"returnGeometry",void 0),_([T({json:{type:String}})],gn.prototype,"title",void 0),_([_t("title")],gn.prototype,"writeTitle",null),gn=_([Y("esri.PopupTemplate")],gn);const aT=gn,ZE=new an({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let Zre=0,Gp=class extends Fe{constructor(e){super(e),this.id="sym"+Zre++,this.type=null,this.color=new gt([0,0,0,1])}readColor(e){return(e==null?void 0:e[0])!=null?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,i){}hash(){return JSON.stringify(this.toJSON())}clone(){}};_([T({type:ZE.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:ZE.write}}})],Gp.prototype,"type",void 0),_([T({type:gt,json:{write:{allowNull:!0}}})],Gp.prototype,"color",void 0),_([Ct("color")],Gp.prototype,"readColor",null),Gp=_([Y("esri.symbols.Symbol")],Gp);const sr=Gp;var x9;let th=x9=class extends sr{constructor(t){super(t),this.data=null,this.type="cim"}readData(t,e){return e}writeData(t,e){Object.assign(e,t)}async collectRequiredFields(t,e){var i;if(((i=this.data)==null?void 0:i.type)==="CIMSymbolReference"){const n=this.data.primitiveOverrides;if(n){const s=n.map(h=>{const f=h.valueExpressionInfo;return f?eu(t,e,f.expression):null});await Promise.all(s)}}}clone(){return new x9({data:_e(this.data)})}hash(){return iA(JSON.stringify(this.data)).toString()}};_([T({json:{write:!1}})],th.prototype,"color",void 0),_([T({json:{write:!0}})],th.prototype,"data",void 0),_([Ct("data",["symbol"])],th.prototype,"readData",null),_([_t("data",{})],th.prototype,"writeData",null),_([Ke({CIMSymbolReference:"cim"},{readOnly:!0})],th.prototype,"type",void 0),th=x9=_([Y("esri.symbols.CIMSymbol")],th);const rp=th;let Vp=class extends Fe{constructor(e){super(e),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(e,i,n){e||(i[n]=e)}};_([T({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],Vp.prototype,"enabled",void 0),_([_t("enabled")],Vp.prototype,"writeEnabled",null),_([T({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],Vp.prototype,"type",void 0),Vp=_([Y("esri.symbols.Symbol3DLayer")],Vp);const al=Vp;function Jre(t,e){const i=e.transparency!=null?UL(e.transparency):1,n=e.color;return n&&Array.isArray(n)?new gt([n[0]||0,n[1]||0,n[2]||0,i]):null}function Kre(t,e){e.color=t.toJSON().slice(0,3);const i=BL(t.a);i!==0&&(e.transparency=i)}const du={type:gt,json:{type:[Ii],default:null,read:{source:["color","transparency"],reader:Jre},write:{target:{color:{type:[Ii]},transparency:{type:Ii}},writer:Kre}}},el={type:Number,cast:Si,json:{write:!0}};let Du=class extends Fe{constructor(e){super(e),this.color=new gt([0,0,0,1]),this.extensionLength=0,this.size=Qh(1)}clone(){}cloneProperties(){return{color:_e(this.color),size:this.size,extensionLength:this.extensionLength}}};_([T({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Du.prototype,"type",void 0),_([T(du)],Du.prototype,"color",void 0),_([T({...el,json:{write:{overridePolicy:t=>({enabled:!!t})}}})],Du.prototype,"extensionLength",void 0),_([T(el)],Du.prototype,"size",void 0),Du=_([Y("esri.symbols.edges.Edges3D")],Du);const lT=Du;var S9;let Yv=S9=class extends lT{constructor(t){super(t),this.type="sketch"}clone(){return new S9(this.cloneProperties())}};_([Ke({sketch:"sketch"},{readOnly:!0})],Yv.prototype,"type",void 0),Yv=S9=_([Y("esri.symbols.edges.SketchEdges3D")],Yv);const Yre=Yv;var T9;let Xv=T9=class extends lT{constructor(t){super(t),this.type="solid"}clone(){return new T9(this.cloneProperties())}};_([Ke({solid:"solid"},{readOnly:!0})],Xv.prototype,"type",void 0),Xv=T9=_([Y("esri.symbols.edges.SolidEdges3D")],Xv);const Xre=Xv,jN={types:{key:"type",base:lT,typeMap:{solid:Xre,sketch:Yre}},json:{write:!0}};var M9;let io=M9=class extends Fe{constructor(t){super(t),this.color=null}clone(){const t={color:this.color!=null?this.color.clone():null};return new M9(t)}};_([T(du)],io.prototype,"color",void 0),io=M9=_([Y("esri.symbols.support.Symbol3DMaterial")],io);var E9;let ih=E9=class extends al{constructor(t){super(t),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){var t,e;return new E9({edges:(t=this.edges)==null?void 0:t.clone(),enabled:this.enabled,material:(e=this.material)==null?void 0:e.clone(),castShadows:this.castShadows,size:this.size})}};_([Ke({Extrude:"extrude"},{readOnly:!0})],ih.prototype,"type",void 0),_([T({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],ih.prototype,"size",void 0),_([T({type:io,json:{write:!0}})],ih.prototype,"material",void 0),_([T({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],ih.prototype,"castShadows",void 0),_([T(jN)],ih.prototype,"edges",void 0),ih=E9=_([Y("esri.symbols.ExtrudeSymbol3DLayer")],ih);const GN=ih;let O1=class extends sr{constructor(e){super(e),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};_([Ke({esriSLS:"simple-line"},{readOnly:!0})],O1.prototype,"type",void 0),_([T({type:Number,cast:Si,json:{write:!0}})],O1.prototype,"width",void 0),O1=_([Y("esri.symbols.LineSymbol")],O1);const Qre=O1,ese=["begin","end","begin-end"],VN=["arrow","circle","square","diamond","cross","x"];var k9;let xa=k9=class extends Fe{constructor(t){super(t),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(t,e,i,n){e[i]=(n==null?void 0:n.origin)==="web-map"?"arrow":t}set color(t){this._set("color",t)}readColor(t){return(t==null?void 0:t[0])!=null?[t[0],t[1],t[2],t[3]/255]:t}writeColor(t,e,i,n){(n==null?void 0:n.origin)==="web-map"||(e[i]=t)}clone(){return new k9({color:_e(this.color),placement:this.placement,style:this.style})}hash(){var t;return`${this.placement}.${(t=this.color)==null?void 0:t.hash()}.${this.style}`}};_([T({type:["begin","end","begin-end"],json:{write:!0}})],xa.prototype,"placement",void 0),_([Ke({"line-marker":"line-marker"},{readOnly:!0}),T({json:{origins:{"web-map":{write:!1}}}})],xa.prototype,"type",void 0),_([T({type:VN})],xa.prototype,"style",void 0),_([_t("style")],xa.prototype,"writeStyle",null),_([T({type:gt,value:null,json:{write:{allowNull:!0}}})],xa.prototype,"color",null),_([Ct("color")],xa.prototype,"readColor",null),_([_t("color")],xa.prototype,"writeColor",null),xa=k9=_([Y("esri.symbols.LineSymbolMarker")],xa);const tse=xa;var $9;const C_=new an({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let Ol=$9=class extends Qre{constructor(...t){super(...t),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(t,e,i,n,s,h){if(t&&typeof t!="string")return t;const f={};return t!=null&&(f.style=t),e!=null&&(f.color=e),i!=null&&(f.width=Si(i)),n!=null&&(f.cap=n),s!=null&&(f.join=s),h!=null&&(f.miterLimit=Si(h)),f}clone(){var t;return new $9({color:_e(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(t=this.marker)==null?void 0:t.clone()})}hash(){var t,e;return`${super.hash()}.${(t=this.color)==null?void 0:t.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(e=this.marker)==null?void 0:e.hash()}`}};_([Ke({esriSLS:"simple-line"},{readOnly:!0})],Ol.prototype,"type",void 0),_([T({type:C_.apiValues,json:{read:C_.read,write:C_.write}})],Ol.prototype,"style",void 0),_([T({type:["butt","round","square"],json:{write:{overridePolicy:(t,e,i)=>({enabled:t!=="round"&&(i==null?void 0:i.origin)==null})}}})],Ol.prototype,"cap",void 0),_([T({type:["miter","round","bevel"],json:{write:{overridePolicy:(t,e,i)=>({enabled:t!=="round"&&(i==null?void 0:i.origin)==null})}}})],Ol.prototype,"join",void 0),_([T({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":tse}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],Ol.prototype,"marker",void 0),_([T({type:Number,json:{read:!1,write:!1}})],Ol.prototype,"miterLimit",void 0),Ol=$9=_([Y("esri.symbols.SimpleLineSymbol")],Ol);const Ec=Ol;let P1=class extends sr{constructor(e){super(e),this.outline=null,this.type=null}hash(){var e;return`${this.type}.${(e=this.outline)==null?void 0:e.hash()}`}};_([T({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Ec}},json:{default:null,write:!0}})],P1.prototype,"outline",void 0),_([T({type:["simple-fill","picture-fill"],readOnly:!0})],P1.prototype,"type",void 0),P1=_([Y("esri.symbols.FillSymbol")],P1);const HN=P1;let Qv=class extends Fe{constructor(e){super(e)}clone(){throw new Error("Subclasses of LinePattern3D should implement their own clone method.")}};_([T({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Qv.prototype,"type",void 0),Qv=_([Y("esri.symbols.patterns.LinePattern3D")],Qv);const BN=Qv,ise=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var C9;const nse=Tr()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let R1=C9=class extends BN{constructor(t){super(t),this.type="style",this.style="solid"}clone(){const t={style:this.style};return new C9(t)}};_([T({type:["style"]})],R1.prototype,"type",void 0),_([Ke(nse),T({type:ise})],R1.prototype,"style",void 0),R1=C9=_([Y("esri.symbols.patterns.LineStylePattern3D")],R1);const cT=R1;let eb=class extends Fe{constructor(e){super(e),this.type="style"}clone(){throw new Error("Subclasses of Pattern3D should implement their own clone method.")}};_([T({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],eb.prototype,"type",void 0),eb=_([Y("esri.symbols.patterns.Pattern3D")],eb);const UN=eb,rse=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var I9;let L1=I9=class extends UN{constructor(t){super(t),this.type="style",this.style="solid"}clone(){return new I9({style:this.style})}};_([T({type:["style"]})],L1.prototype,"type",void 0),_([T({type:rse,json:{read:!0,write:!0}})],L1.prototype,"style",void 0),L1=I9=_([Y("esri.symbols.patterns.StylePattern3D")],L1);const qN=L1,sse={types:{key:"type",base:UN,typeMap:{style:qN}},json:{write:!0}},WN={types:{key:"type",base:BN,typeMap:{style:cT}},json:{write:!0}},Tg=new gt("white");new gt("black");const ose=new gt([255,255,255,0]);function ase(t){return t.r===0&&t.g===0&&t.b===0}var A9;let Mg=A9=class extends io{constructor(t){super(t),this.colorMixMode=null}clone(){const t={color:this.color!=null?this.color.clone():null,colorMixMode:this.colorMixMode};return new A9(t)}};_([Ke({multiply:"multiply",replace:"replace",tint:"tint"})],Mg.prototype,"colorMixMode",void 0),Mg=A9=_([Y("esri.symbols.support.Symbol3DFillMaterial")],Mg);function hT(t=hse){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function uT(t,e,i,n,s,h,f=hT()){return f[0]=t,f[1]=e,f[2]=i,f[3]=n,f[4]=s,f[5]=h,f}function KSe(t,e){const i=isFinite(t[2])||isFinite(t[5]);return new Lt(i?{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],zmin:t[2],zmax:t[5],spatialReference:e}:{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],spatialReference:e})}function YSe(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[3]),t[4]=Math.max(t[4],e[4]),t[5]=Math.max(t[5],e[5])}function XSe(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[3]=Math.max(t[3],e[2]),t[4]=Math.max(t[4],e[3])}function QSe(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[0]),t[4]=Math.max(t[4],e[1]),t[5]=Math.max(t[5],e[2])}function eTe(t,e,i=0,n=e.length/3){let s=t[0],h=t[1],f=t[2],m=t[3],v=t[4],x=t[5];for(let M=0;M<n;M++)s=Math.min(s,e[i+3*M]),h=Math.min(h,e[i+3*M+1]),f=Math.min(f,e[i+3*M+2]),m=Math.max(m,e[i+3*M]),v=Math.max(v,e[i+3*M+1]),x=Math.max(x,e[i+3*M+2]);t[0]=s,t[1]=h,t[2]=f,t[3]=m,t[4]=v,t[5]=x}function tTe(t,e,i){const n=e.length;let s=t[0],h=t[1],f=t[2],m=t[3],v=t[4],x=t[5];if(i)for(let M=0;M<n;M++){const $=e[M];s=Math.min(s,$[0]),h=Math.min(h,$[1]),f=Math.min(f,$[2]),m=Math.max(m,$[0]),v=Math.max(v,$[1]),x=Math.max(x,$[2])}else for(let M=0;M<n;M++){const $=e[M];s=Math.min(s,$[0]),h=Math.min(h,$[1]),m=Math.max(m,$[0]),v=Math.max(v,$[1])}t[0]=s,t[1]=h,t[2]=f,t[3]=m,t[4]=v,t[5]=x}function iTe(t){for(let e=0;e<6;e++)if(!isFinite(t[e]))return!1;return!0}function Lm(t){return t[0]>=t[3]?0:t[3]-t[0]}function Nm(t){return t[1]>=t[4]?0:t[4]-t[1]}function Dm(t){return t[2]>=t[5]?0:t[5]-t[2]}function nTe(t){const e=Lm(t),i=Dm(t),n=Nm(t);return Math.sqrt(e*e+i*i+n*n)}function rTe(t,e=[0,0,0]){return e[0]=t[0]+Lm(t)/2,e[1]=t[1]+Nm(t)/2,e[2]=t[2]+Dm(t)/2,e}function sTe(t,e=[0,0,0]){return e[0]=Lm(t),e[1]=Nm(t),e[2]=Dm(t),e}function oTe(t,e){return e[0]>=t[0]&&e[1]>=t[1]&&e[2]>=t[2]&&e[0]<=t[3]&&e[1]<=t[4]&&e[2]<=t[5]}function lse(t,e){return Math.max(e[0],t[0])<=Math.min(e[3],t[3])&&Math.max(e[1],t[1])<=Math.min(e[4],t[4])&&Math.max(e[2],t[2])<=Math.min(e[5],t[5])}function aTe(t,e){return e==null||lse(t,e)}function lTe(t,e,i,n,s=t){return s[0]=t[0]+e,s[1]=t[1]+i,s[2]=t[2]+n,s[3]=t[3]+e,s[4]=t[4]+i,s[5]=t[5]+n,s}function cTe(t,e,i=t){const n=t[0]+Lm(t)/2,s=t[1]+Nm(t)/2,h=t[2]+Dm(t)/2;return i[0]=n+(t[0]-n)*e,i[1]=s+(t[1]-s)*e,i[2]=h+(t[2]-h)*e,i[3]=n+(t[3]-n)*e,i[4]=s+(t[4]-s)*e,i[5]=h+(t[5]-h)*e,i}function hTe(t,e){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function uTe(t,e,i=t){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i!==t&&(i[3]=t[3],i[4]=t[4],i[5]=t[5]),i}function dTe(t,e,i=t){return i[3]=e[0],i[4]=e[1],i[5]=e[2],i!==t&&(i[0]=t[0],i[1]=t[1],i[2]=t[2]),t}function cse(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function pTe(t){return t?cse(t,KE):hT(KE)}function fTe(t,e){return e||(e=sn()),e[0]=t[0],e[1]=t[1],e[2]=t[3],e[3]=t[4],e}function gTe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=Number.NEGATIVE_INFINITY,t[3]=e[2],t[4]=e[3],t[5]=Number.POSITIVE_INFINITY,t}function mTe(t,e,i,n,s){return t[0]=e,t[1]=i,t[2]=Number.NEGATIVE_INFINITY,t[3]=n,t[4]=s,t[5]=Number.POSITIVE_INFINITY,t}function JE(t){return t.length===6}function yTe(t){return Lm(t)===0&&Nm(t)===0&&Dm(t)===0}function vTe(t,e,i){if(t==null||e==null)return t===e;if(!JE(t)||!JE(e))return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}const KE=[1/0,1/0,1/0,-1/0,-1/0,-1/0],hse=[0,0,0,0,0,0];hT();function bTe(t,{isPrimitive:e,width:i,depth:n,height:s}){const h=e?10:1;if(i==null&&s==null&&n==null)return[h*t[0],h*t[1],h*t[2]];const f=wr(i,n,s);let m;for(let v=0;v<3;v++){const x=f[v];if(x!=null){m=x/t[v];break}}for(let v=0;v<3;v++)f[v]==null&&(f[v]=t[v]*m);return f}const use=uT(-.5,-.5,-.5,.5,.5,.5),dse=uT(-.5,-.5,0,.5,.5,1),pse=uT(-.5,-.5,0,.5,.5,.5);function wTe(t){switch(t){case"sphere":case"cube":case"diamond":return use;case"cylinder":case"cone":case"inverted-cone":return dse;case"tetrahedron":return pse;default:return}}const dT=["butt","square","round"],fse=[...dT,"none"],ZN=["miter","bevel","round"];var O9;let zu=O9=class extends Fe{constructor(t){super(t),this.color=new gt([0,0,0,1]),this.size=Qh(1),this.pattern=null,this.patternCap="butt"}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new O9(t)}};_([T(du)],zu.prototype,"color",void 0),_([T(el)],zu.prototype,"size",void 0),_([T(WN)],zu.prototype,"pattern",void 0),_([T({type:dT,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],zu.prototype,"patternCap",void 0),zu=O9=_([Y("esri.symbols.support.Symbol3DOutline")],zu);var tb;let Pl=tb=class extends al{constructor(t){super(t),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const t={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new tb(t)}static fromSimpleFillSymbol(t){var n,s,h;const e=t.outline&&t.outline.style&&t.outline.style!=="solid"?new cT({style:t.outline.style}):null,i={size:((n=t.outline)==null?void 0:n.width)??0,color:(((s=t.outline)==null?void 0:s.color)??Tg).clone(),pattern:e};return e&&((h=t.outline)!=null&&h.cap)&&(i.patternCap=t.outline.cap),new tb({material:new Mg({color:(t.color??ose).clone()}),pattern:t.style&&t.style!=="solid"?new qN({style:t.style}):null,outline:i})}};_([Ke({Fill:"fill"},{readOnly:!0})],Pl.prototype,"type",void 0),_([T({type:Mg,json:{write:!0}})],Pl.prototype,"material",void 0),_([T(sse)],Pl.prototype,"pattern",void 0),_([T({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Pl.prototype,"castShadows",void 0),_([T({type:zu,json:{write:!0}})],Pl.prototype,"outline",void 0),_([T(jN)],Pl.prototype,"edges",void 0),Pl=tb=_([Y("esri.symbols.FillSymbol3DLayer")],Pl);const T0=Pl,gse=["none","underline","line-through"],mse=["normal","italic","oblique"],yse=["normal","lighter","bold","bolder"],JN={type:Number,cast:t=>{const e=Bo(t);return e===0?1:qr(e,.1,4)},nonNullable:!0},vse=["left","right","center"],bse=["baseline","top","middle","bottom"],KN={type:vse,nonNullable:!0},YN={type:bse,nonNullable:!0},_Te=8;var P9;let Rl=P9=class extends Fe{constructor(t){super(t),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(t){return Si(t)}clone(){return new P9({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};_([T({type:gse,json:{default:"none",write:!0}})],Rl.prototype,"decoration",void 0),_([T({type:String,json:{write:!0}})],Rl.prototype,"family",void 0),_([T({type:Number,json:{write:{overridePolicy:(t,e,i)=>({enabled:!i||!i.textSymbol3D})}}})],Rl.prototype,"size",void 0),_([qi("size")],Rl.prototype,"castSize",null),_([T({type:mse,json:{default:"normal",write:!0}})],Rl.prototype,"style",void 0),_([T({type:yse,json:{default:"normal",write:!0}})],Rl.prototype,"weight",void 0),Rl=P9=_([Y("esri.symbols.Font")],Rl);const Xw=Rl;var R9;const wse=Tr()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let Fu=R9=class extends Fe{constructor(t){super(t)}readHref(t,e,i){return t?Pm(t,i):e.dataURI}writeHref(t,e,i,n){t&&(ep(t)?e.dataURI=t:(e.href=Vw(t,n),vs(e.href)&&(e.href=cc(e.href))))}clone(){return new R9({href:this.href,primitive:this.primitive})}};_([T({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],Fu.prototype,"href",void 0),_([Ct("href")],Fu.prototype,"readHref",null),_([_t("href",{href:{type:String},dataURI:{type:String}})],Fu.prototype,"writeHref",null),_([Ke(wse)],Fu.prototype,"primitive",void 0),Fu=R9=_([Y("esri.symbols.support.IconSymbol3DLayerResource")],Fu);const xTe="circle";var L9;let gf=L9=class extends Re{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new L9({x:this.x,y:this.y})}};_([T({type:Number})],gf.prototype,"x",void 0),_([T({type:Number})],gf.prototype,"y",void 0),gf=L9=_([Y("esri.symbols.support.Symbol3DAnchorPosition2D")],gf);var N9;let N1=N9=class extends Fe{constructor(t){super(t),this.color=new gt([0,0,0,1]),this.size=Qh(1)}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size};return new N9(t)}};_([T(du)],N1.prototype,"color",void 0),_([T(el)],N1.prototype,"size",void 0),N1=N9=_([Y("esri.symbols.support.Symbol3DIconOutline")],N1);var Hp;const XN="esri.symbols.IconSymbol3DLayer";let Sa=Hp=class extends al{constructor(t){super(t),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null}clone(){return new Hp({anchor:this.anchor,anchorPosition:_e(this.anchorPosition),enabled:this.enabled,material:_e(this.material),outline:_e(this.outline),resource:_e(this.resource),size:this.size})}static fromSimpleMarkerSymbol(t){const e=t.color||Tg,i=YE(t),n=t.outline&&t.outline.width>0?{size:t.outline.width,color:(t.outline.color||Tg).clone()}:null;return new Hp({size:t.size,resource:{primitive:xse(t.style)},material:{color:e},outline:n,anchor:i?"relative":void 0,anchorPosition:i})}static fromPictureMarkerSymbol(t){const e=!t.color||ase(t.color)?Tg:t.color,i=YE(t);return new Hp({size:t.width<=t.height?t.height:t.width,resource:{href:t.url},material:{color:e.clone()},anchor:i?"relative":void 0,anchorPosition:i})}static fromCIMSymbol(t){return new Hp({resource:{href:nO({mediaType:"application/json",data:JSON.stringify(t.data)})}})}};_([T({type:io,json:{write:!0}})],Sa.prototype,"material",void 0),_([T({type:Fu,json:{write:!0}})],Sa.prototype,"resource",void 0),_([Ke({Icon:"icon"},{readOnly:!0})],Sa.prototype,"type",void 0),_([T(el)],Sa.prototype,"size",void 0),_([Ke({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),T({json:{default:"center"}})],Sa.prototype,"anchor",void 0),_([T({type:gf,json:{type:[Number],read:{reader:t=>new gf({x:t[0],y:t[1]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Sa.prototype,"anchorPosition",void 0),_([T({type:N1,json:{write:!0}})],Sa.prototype,"outline",void 0),Sa=Hp=_([Y(XN)],Sa);const _d=Sa;function YE(t){const e="width"in t?t.width:t.size,i="height"in t?t.height:t.size,n=XE(t.xoffset),s=XE(t.yoffset);return(n||s)&&e&&i?{x:-n/e,y:s/i}:null}function XE(t){return isFinite(t)?t:0}const _se={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function xse(t){return _se[t]||(Ce.getLogger(XN).warn(`${t} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}let ju=class extends lo(Fe){constructor(e){super(e),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(e){return e!=null&&e.placement===this.placement&&e.style===this.style&&(this.color==null&&e.color==null||this.color!=null&&e.color!=null&&this.color.toJSON()===e.color.toJSON())}};_([T({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],ju.prototype,"type",void 0),_([T({type:ese,json:{default:"begin-end",write:!0}})],ju.prototype,"placement",void 0),_([T({type:VN,json:{default:"arrow",write:!0}})],ju.prototype,"style",void 0),_([T({type:gt,json:{type:[Ii],default:null,write:!0}})],ju.prototype,"color",void 0),ju=_([Y("esri.symbols.LineStyleMarker3D")],ju);const D9=ju;var ib;let Ta=ib=class extends al{constructor(t){super(t),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=Qh(1),this.pattern=null,this.marker=null}clone(){const t={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new ib(t)}static fromSimpleLineSymbol(t){var i;const e={enabled:!0,size:t.width??Qh(1),cap:t.cap||"butt",join:t.join||"miter",pattern:t.style?new cT({style:t.style}):null,material:new io({color:(t.color||Tg).clone()}),marker:t.marker?new D9({placement:t.marker.placement,style:t.marker.style,color:((i=t.marker.color)==null?void 0:i.clone())??null}):null};return new ib(e)}};_([T({type:io,json:{write:!0}})],Ta.prototype,"material",void 0),_([Ke({Line:"line"},{readOnly:!0})],Ta.prototype,"type",void 0),_([T({type:ZN,json:{write:!0,default:"miter"}})],Ta.prototype,"join",void 0),_([T({type:dT,json:{write:!0,default:"butt"}})],Ta.prototype,"cap",void 0),_([T(el)],Ta.prototype,"size",void 0),_([T(WN)],Ta.prototype,"pattern",void 0),_([T({types:{key:"type",base:D9,typeMap:{style:D9}},json:{write:!0}})],Ta.prototype,"marker",void 0),Ta=ib=_([Y("esri.symbols.LineSymbol3DLayer")],Ta);const zm=Ta;var z9;const Sse=Tr()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let D1=z9=class extends Fe{clone(){return new z9({href:this.href,primitive:this.primitive})}};_([T({type:String,json:{read:YS,write:Jf}})],D1.prototype,"href",void 0),_([Ke(Sse)],D1.prototype,"primitive",void 0),D1=z9=_([Y("esri.symbols.support.ObjectSymbol3DLayerResource")],D1);const TTe="sphere";var F9;let ad=F9=class extends Re{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new F9({x:this.x,y:this.y,z:this.z})}};_([T({type:Number})],ad.prototype,"x",void 0),_([T({type:Number})],ad.prototype,"y",void 0),_([T({type:Number})],ad.prototype,"z",void 0),ad=F9=_([Y("esri.symbols.support.Symbol3DAnchorPosition3D")],ad);var j9;let Gn=j9=class extends al{constructor(t){super(t),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){var t,e,i;return new j9({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:(t=this.anchorPosition)==null?void 0:t.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:((e=this.material)==null?void 0:e.clone())??null,castShadows:this.castShadows,resource:(i=this.resource)==null?void 0:i.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};_([T({type:io,json:{write:!0}})],Gn.prototype,"material",void 0),_([T({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Gn.prototype,"castShadows",void 0),_([T({type:D1,json:{write:!0}})],Gn.prototype,"resource",void 0),_([Ke({Object:"object"},{readOnly:!0})],Gn.prototype,"type",void 0),_([T({type:Number,json:{write:!0}})],Gn.prototype,"width",void 0),_([T({type:Number,json:{write:!0}})],Gn.prototype,"height",void 0),_([T({type:Number,json:{write:!0}})],Gn.prototype,"depth",void 0),_([Ke({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),T({json:{default:"origin"}})],Gn.prototype,"anchor",void 0),_([T({type:ad,json:{type:[Number],read:{reader:t=>new ad({x:t[0],y:t[1],z:t[2]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y,t.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Gn.prototype,"anchorPosition",void 0),_([T({type:Number,json:{write:!0}})],Gn.prototype,"heading",void 0),_([T({type:Number,json:{write:!0}})],Gn.prototype,"tilt",void 0),_([T({type:Number,json:{write:!0}})],Gn.prototype,"roll",void 0),_([T({readOnly:!0})],Gn.prototype,"isPrimitive",null),Gn=j9=_([Y("esri.symbols.ObjectSymbol3DLayer")],Gn);const pT=Gn;var G9;let cr=G9=class extends al{constructor(t){super(t),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(t,e){return t??(e.height==null&&e.size!=null?e.size:void 0)}readHeight(t,e){return t??(e.width==null&&e.size!=null?e.size:void 0)}clone(){return new G9({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};_([T({type:io,json:{write:!0}})],cr.prototype,"material",void 0),_([T({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],cr.prototype,"castShadows",void 0),_([Ke({Path:"path"},{readOnly:!0})],cr.prototype,"type",void 0),_([T({type:["circle","quad"],json:{write:!0,default:"circle"}})],cr.prototype,"profile",void 0),_([T({type:ZN,json:{write:!0,default:"miter"}})],cr.prototype,"join",void 0),_([T({type:fse,json:{write:!0,default:"butt"}})],cr.prototype,"cap",void 0),_([T({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],cr.prototype,"width",void 0),_([Ct("width",["width","size","height"])],cr.prototype,"readWidth",null),_([T({type:Number,json:{write:!0}})],cr.prototype,"height",void 0),_([Ct("height",["height","size","width"])],cr.prototype,"readHeight",null),_([T({type:["center","bottom","top"],json:{write:!0,default:"center"}})],cr.prototype,"anchor",void 0),_([T({type:["heading","all"],json:{write:!0,default:"all"}})],cr.prototype,"profileRotation",void 0),cr=G9=_([Y("esri.symbols.PathSymbol3DLayer")],cr);const fT=cr;var V9;let mf=V9=class extends Fe{constructor(){super(...arguments),this.color=new gt([0,0,0,1]),this.size=0}clone(){const t={color:_e(this.color),size:this.size};return new V9(t)}};_([T(du)],mf.prototype,"color",void 0),_([T(el)],mf.prototype,"size",void 0),mf=V9=_([Y("esri.symbols.support.Symbol3DHalo")],mf);let Eg=class extends lo(Fe){constructor(e){super(e),this.color=null}};_([T(du)],Eg.prototype,"color",void 0),Eg=_([Y("esri.symbols.support.Symbol3DTextBackground")],Eg);var nb;let Or=nb=class extends al{constructor(t){super(t),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(t){t!=null&&this._userSize!=null&&(t.size=this._userSize),this._set("font",t)}writeFont(t,e,i,n){const s={...n,textSymbol3D:!0};e.font=t.write({},s),delete e.font.size}get size(){var t;return this._userSize!=null?this._userSize:((t=this.font)==null?void 0:t.size)!=null?this.font.size:9}set size(t){this._userSize=t,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const t=new nb({enabled:this.enabled,font:this.font&&_e(this.font),halo:this.halo&&_e(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:_e(this.background)});return t._userSize=this._userSize,t}static fromTextSymbol(t){return new nb({font:t.font!=null?t.font.clone():new Xw,halo:Tse(t.haloColor,t.haloSize),horizontalAlignment:t.horizontalAlignment,lineHeight:t.lineHeight,material:t.color?new io({color:t.color.clone()}):null,text:t.text,verticalAlignment:t.verticalAlignment,background:t.backgroundColor?new Eg({color:t.backgroundColor.clone()}):null})}};function Tse(t,e){return t&&e!=null&&e>0?new mf({color:_e(t),size:e}):null}_([T({type:Xw,json:{write:!0}})],Or.prototype,"font",null),_([_t("font")],Or.prototype,"writeFont",null),_([T({type:mf,json:{write:!0}})],Or.prototype,"halo",void 0),_([T({...KN,json:{default:"center",write:!0}})],Or.prototype,"horizontalAlignment",void 0),_([T({...JN,json:{default:1,write:!0}})],Or.prototype,"lineHeight",void 0),_([T({type:io,json:{write:!0}})],Or.prototype,"material",void 0),_([T({type:Eg,json:{write:!0}})],Or.prototype,"background",void 0),_([T(el)],Or.prototype,"size",null),_([T({type:String,json:{write:!0}})],Or.prototype,"text",void 0),_([Ke({Text:"text"},{readOnly:!0})],Or.prototype,"type",void 0),_([T({...YN,json:{default:"baseline",write:!0}})],Or.prototype,"verticalAlignment",void 0),Or=nb=_([Y("esri.symbols.TextSymbol3DLayer")],Or);const M0=Or;var H9;let nh=H9=class extends al{constructor(t){super(t),this.color=B9.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new H9({color:_e(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};_([T({type:gt,nonNullable:!0,json:{type:[Ii],write:(t,e,i)=>e[i]=t.toArray(gt.AlphaMode.UNLESS_OPAQUE),default:()=>B9.clone(),defaultEquals:t=>t.toCss(!0)===B9.toCss(!0)}})],nh.prototype,"color",void 0),_([Ke({Water:"water"},{readOnly:!0})],nh.prototype,"type",void 0),_([T({type:["small","medium","large"],json:{write:!0,default:"medium"}})],nh.prototype,"waterbodySize",void 0),_([T({type:Number,json:{write:!0,default:null}})],nh.prototype,"waveDirection",void 0),_([T({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],nh.prototype,"waveStrength",void 0),nh=H9=_([Y("esri.symbols.WaterSymbol3DLayer")],nh);const QN=nh,B9=new gt([0,119,190]);var U9;let Gu=U9=class extends Re{constructor(t){super(t),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new U9({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};_([T({type:String})],Gu.prototype,"name",void 0),_([T({type:String})],Gu.prototype,"styleUrl",void 0),_([T({type:String})],Gu.prototype,"styleName",void 0),_([T({type:$s})],Gu.prototype,"portal",void 0),Gu=U9=_([Y("esri.symbols.support.StyleOrigin")],Gu);const q9=Gu;var W9;let kg=W9=class extends Re{constructor(){super(...arguments),this.url=""}clone(){return new W9({url:this.url})}};_([T({type:String})],kg.prototype,"url",void 0),kg=W9=_([Y("esri.symbols.support.Thumbnail")],kg);const eD={icon:_d,object:pT,line:zm,path:fT,fill:T0,extrude:GN,text:M0,water:QN},Mse=Pe.ofType({base:al,key:"type",typeMap:eD,errorContext:"symbol-layer"});let Ma=class extends sr{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const i=this.__accessor__&&this.__accessor__.metadata&&this.__accessor__.metadata.symbolLayers,n=i==null?void 0:i.type,s=n||Pe;this._set("symbolLayers",new s)}get color(){return null}set color(e){this.constructed&&Ce.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){Xh(e,this._get("symbolLayers"))}readStyleOrigin(e,i,n){if(e.styleUrl&&e.name){const s=Pm(e.styleUrl,n);return new q9({styleUrl:s,name:e.name})}if(e.styleName&&e.name)return new q9({portal:(n==null?void 0:n.portal)||$s.getDefault(),styleName:e.styleName,name:e.name});n!=null&&n.messages&&n.messages.push(new vc("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:n,definition:e}))}writeStyleOrigin(e,i,n,s){if(e.styleUrl&&e.name){let h=Vw(e.styleUrl,s);vs(h)&&(h=cc(h)),i.styleOrigin={styleUrl:h,name:e.name}}else e.styleName&&e.name&&(e.portal&&(s!=null&&s.portal)&&!rW(e.portal.restUrl,s.portal.restUrl)?s!=null&&s.messages&&s.messages.push(new vc("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):i.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof al||e&&eD[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};_([T({json:{read:!1,write:!1}})],Ma.prototype,"color",null),_([T({type:Mse,nonNullable:!0,json:{write:!0}}),qi(AL)],Ma.prototype,"symbolLayers",null),_([T({type:q9})],Ma.prototype,"styleOrigin",void 0),_([Ct("styleOrigin")],Ma.prototype,"readStyleOrigin",null),_([_t("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],Ma.prototype,"writeStyleOrigin",null),_([T({type:kg,json:{read:!1}})],Ma.prototype,"thumbnail",void 0),_([T({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],Ma.prototype,"type",void 0),Ma=_([Y("esri.symbols.Symbol3D")],Ma);const Fm=Ma;let z1=class extends Fe{constructor(e){super(e),this.visible=!0}clone(){throw new Error("Subclasses of Callout3D should implement their own clone method.")}};_([T({type:["line"],constructOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],z1.prototype,"type",void 0),_([T({readOnly:!0})],z1.prototype,"visible",void 0),z1=_([Y("esri.symbols.callouts.Callout3D")],z1);const tD=z1;var Z9;let rb=Z9=class extends Fe{constructor(t){super(t),this.color=new gt("white")}clone(){return new Z9({color:_e(this.color)})}};_([T(du)],rb.prototype,"color",void 0),rb=Z9=_([Y("esri.symbols.callouts.LineCallout3DBorder")],rb);const Ese=rb;var J9;let rh=J9=class extends tD{constructor(t){super(t),this.type="line",this.color=new gt([0,0,0,1]),this.size=Qh(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new J9({color:_e(this.color),size:this.size,border:_e(this.border)})}};_([Ke({line:"line"})],rh.prototype,"type",void 0),_([T(du)],rh.prototype,"color",void 0),_([T(el)],rh.prototype,"size",void 0),_([T({type:Ese,json:{write:!0}})],rh.prototype,"border",void 0),_([T({readOnly:!0})],rh.prototype,"visible",null),rh=J9=_([Y("esri.symbols.callouts.LineCallout3D")],rh);const iD=rh;function gT(t){if(!t)return!1;const e=t.verticalOffset;return!!e&&!(e.screenLength<=0||e.maxWorldLength!=null&&e.maxWorldLength<=0)}function nD(t){if(!t||!t.supportsCallout||!t.supportsCallout())return!1;const e=t.callout;return!!e&&!!e.visible&&!!gT(t)}function $Te(t){return t.type==="point-3d"||t.type==="label-3d"}function CTe(t){return t.horizontalAlignment==="center"}const rD={types:{key:"type",base:tD,typeMap:{line:iD}},json:{write:!0}};var K9;let Bp=K9=class extends Fe{constructor(t){super(t),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new K9({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};_([T(el)],Bp.prototype,"screenLength",void 0),_([T({type:Number,nonNullable:!0,json:{write:!0,default:0}})],Bp.prototype,"minWorldLength",void 0),_([T({type:Number,json:{write:!0}})],Bp.prototype,"maxWorldLength",void 0),Bp=K9=_([Y("esri.symbols.support.Symbol3DVerticalOffset")],Bp);const mT=Bp;var sb;const sD=Pe.ofType({base:null,key:"type",typeMap:{text:M0}});let sh=sb=class extends Fm{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new sD,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return nD(this)}hasVisibleVerticalOffset(){return gT(this)}clone(){return new sb({styleOrigin:_e(this.styleOrigin),symbolLayers:_e(this.symbolLayers),thumbnail:_e(this.thumbnail),callout:_e(this.callout),verticalOffset:_e(this.verticalOffset)})}static fromTextSymbol(t){return new sb({symbolLayers:new Pe([M0.fromTextSymbol(t)])})}};_([T({type:mT,json:{write:!0}})],sh.prototype,"verticalOffset",void 0),_([T(rD)],sh.prototype,"callout",void 0),_([T({json:{read:!1,write:!1}})],sh.prototype,"styleOrigin",void 0),_([T({type:sD})],sh.prototype,"symbolLayers",void 0),_([Ke({LabelSymbol3D:"label-3d"},{readOnly:!0})],sh.prototype,"type",void 0),sh=sb=_([Y("esri.symbols.LabelSymbol3D")],sh);const yT=sh;var ob;const oD=Pe.ofType({base:null,key:"type",typeMap:{line:zm,path:fT}}),kse=Pe.ofType({base:null,key:"type",typeMap:{line:zm,path:fT}});let F1=ob=class extends Fm{constructor(t){super(t),this.symbolLayers=new oD,this.type="line-3d"}clone(){return new ob({styleOrigin:_e(this.styleOrigin),symbolLayers:_e(this.symbolLayers),thumbnail:_e(this.thumbnail)})}static fromSimpleLineSymbol(t){return new ob({symbolLayers:new Pe([zm.fromSimpleLineSymbol(t)])})}};_([T({type:oD,json:{type:kse}})],F1.prototype,"symbolLayers",void 0),_([Ke({LineSymbol3D:"line-3d"},{readOnly:!0})],F1.prototype,"type",void 0),F1=ob=_([Y("esri.symbols.LineSymbol3D")],F1);const Qw=F1;let oh=class extends sr{constructor(e){super(e),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};_([T({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],oh.prototype,"angle",void 0),_([T({type:["simple-marker","picture-marker"],readOnly:!0})],oh.prototype,"type",void 0),_([T({type:Number,cast:Si,json:{write:!0}})],oh.prototype,"xoffset",void 0),_([T({type:Number,cast:Si,json:{write:!0}})],oh.prototype,"yoffset",void 0),_([T({type:Number,cast:t=>t==="auto"?t:Si(t),json:{write:!0}})],oh.prototype,"size",void 0),oh=_([Y("esri.symbols.MarkerSymbol")],oh);const aD=oh;var ab;const lD=Pe.ofType({base:null,key:"type",typeMap:{fill:T0}});let j1=ab=class extends Fm{constructor(t){super(t),this.symbolLayers=new lD,this.type="mesh-3d"}clone(){return new ab({styleOrigin:_e(this.styleOrigin),symbolLayers:_e(this.symbolLayers),thumbnail:_e(this.thumbnail)})}static fromSimpleFillSymbol(t){return new ab({symbolLayers:new Pe([T0.fromSimpleFillSymbol(t)])})}};_([T({type:lD})],j1.prototype,"symbolLayers",void 0),_([Ke({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],j1.prototype,"type",void 0),j1=ab=_([Y("esri.symbols.MeshSymbol3D")],j1);const e3=j1;function $se(t,e,i){return e.imageData?nO({mediaType:e.contentType||"image/png",isBase64:!0,data:e.imageData}):cD(e.url,i)}function cD(t,e){if(!vs(t)){const i=Ise(e);if(i)return ww(i,"images",t)}return Pm(t,e)}function Cse(t,e,i,n){if(ep(t)){const s=Hg(t);if(!s)return;e.contentType=s.mediaType,e.imageData=s.data,i&&i.imageData===e.imageData&&i.url&&Jf(i.url,e,"url",n)}else Jf(t,e,"url",n)}const hD={json:{read:{source:["imageData","url"],reader:$se},write:{writer(t,e,i,n){Cse(t,e,this.source,n)}}}},uD={readOnly:!0,json:{read:{source:["imageData","url"],reader(t,e,i){const n={};return e.imageData&&(n.imageData=e.imageData),e.contentType&&(n.contentType=e.contentType),e.url&&(n.url=cD(e.url,i)),n}}}};function Ise(t){var s,h;if(!t)return null;const{origin:e,layer:i}=t;if(e!=="service"&&e!=="portal-item")return null;const n=i==null?void 0:i.type;return n==="feature"||n==="stream"?(s=i.parsedUrl)==null?void 0:s.path:n==="map-image"||n==="tile"?(h=t.url)==null?void 0:h.path:null}var Y9;let Vs=Y9=class extends HN{constructor(...t){super(...t),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(t,e,i,n){if(t&&typeof t!="string"&&t.imageData==null)return t;const s={};return t&&(s.url=t),e&&(s.outline=e),i!=null&&(s.width=Si(i)),n!=null&&(s.height=Si(n)),s}clone(){const t=new Y9({color:_e(this.color),height:this.height,outline:_e(this.outline),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return t._set("source",_e(this.source)),t}hash(){var t;return`${super.hash()}.${(t=this.color)==null?void 0:t.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};_([Ke({esriPFS:"picture-fill"},{readOnly:!0})],Vs.prototype,"type",void 0),_([T(hD)],Vs.prototype,"url",void 0),_([T({type:Number,json:{write:!0}})],Vs.prototype,"xscale",void 0),_([T({type:Number,json:{write:!0}})],Vs.prototype,"yscale",void 0),_([T({type:Number,cast:Si,json:{write:!0}})],Vs.prototype,"width",void 0),_([T({type:Number,cast:Si,json:{write:!0}})],Vs.prototype,"height",void 0),_([T({type:Number,cast:Si,json:{write:!0}})],Vs.prototype,"xoffset",void 0),_([T({type:Number,cast:Si,json:{write:!0}})],Vs.prototype,"yoffset",void 0),_([T(uD)],Vs.prototype,"source",void 0),Vs=Y9=_([Y("esri.symbols.PictureFillSymbol")],Vs);const vT=Vs;var X9;let No=X9=class extends aD{constructor(...t){super(...t),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string"&&t.imageData==null)return t;const n={};return t&&(n.url=t),e!=null&&(n.width=Si(e)),i!=null&&(n.height=Si(i)),n}readHeight(t,e){return e.size||t}readWidth(t,e){return e.size||t}clone(){const t=new X9({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return t._set("source",_e(this.source)),t}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};_([T({json:{write:!1}})],No.prototype,"color",void 0),_([Ke({esriPMS:"picture-marker"},{readOnly:!0})],No.prototype,"type",void 0),_([T(hD)],No.prototype,"url",void 0),_([T(uD)],No.prototype,"source",void 0),_([T({type:Number,cast:Si,json:{write:!0}})],No.prototype,"height",void 0),_([Ct("height",["height","size"])],No.prototype,"readHeight",null),_([T({type:Number,cast:Si,json:{write:!0}})],No.prototype,"width",void 0),_([T({json:{write:!1}})],No.prototype,"size",void 0),No=X9=_([Y("esri.symbols.PictureMarkerSymbol")],No);const jm=No;var Vu;const dD=Pe.ofType({base:null,key:"type",typeMap:{icon:_d,object:pT,text:M0}});let Hu=Vu=class extends Fm{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.symbolLayers=new dD,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const t of this.symbolLayers.items)switch(t.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return nD(this)}hasVisibleVerticalOffset(){return gT(this)}clone(){return new Vu({verticalOffset:_e(this.verticalOffset),callout:_e(this.callout),styleOrigin:_e(this.styleOrigin),symbolLayers:_e(this.symbolLayers),thumbnail:_e(this.thumbnail)})}static fromSimpleMarkerSymbol(t){return new Vu({symbolLayers:new Pe([_d.fromSimpleMarkerSymbol(t)])})}static fromPictureMarkerSymbol(t){return new Vu({symbolLayers:new Pe([_d.fromPictureMarkerSymbol(t)])})}static fromCIMSymbol(t){var n,s;if(((s=(n=t.data)==null?void 0:n.symbol)==null?void 0:s.type)!=="CIMPointSymbol")return null;const i=t.data.symbol;return new Vu(i!=null&&i.callout?{symbolLayers:new Pe([_d.fromCIMSymbol(t)]),callout:new iD({size:.5,color:new gt([0,0,0])}),verticalOffset:new mT({screenLength:40})}:{symbolLayers:new Pe([_d.fromCIMSymbol(t)])})}static fromTextSymbol(t){return new Vu({symbolLayers:new Pe([M0.fromTextSymbol(t)])})}};_([T({type:mT,json:{write:!0}})],Hu.prototype,"verticalOffset",void 0),_([T(rD)],Hu.prototype,"callout",void 0),_([T({type:dD,json:{origins:{"web-scene":{write:!0}}}})],Hu.prototype,"symbolLayers",void 0),_([Ke({PointSymbol3D:"point-3d"},{readOnly:!0})],Hu.prototype,"type",void 0),Hu=Vu=_([Y("esri.symbols.PointSymbol3D")],Hu);const t3=Hu;var G1;const pD=Pe.ofType({base:null,key:"type",typeMap:{extrude:GN,fill:T0,icon:_d,line:zm,object:pT,text:M0,water:QN}});let V1=G1=class extends Fm{constructor(t){super(t),this.symbolLayers=new pD,this.type="polygon-3d"}initialize(){const t=e=>{e.type==="line"&&Bh(Ce.getLogger(this),"LineSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use FillSymbol3DLayer.outline instead.",version:"4.28"}),e.type==="text"&&Bh(Ce.getLogger(this),"TextSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use Labels instead.",version:"4.28"})};for(const e of this.symbolLayers)t(e);this.addHandles(Es(()=>this.symbolLayers,"after-add",({item:e})=>t(e),Ya))}clone(){return new G1({styleOrigin:_e(this.styleOrigin),symbolLayers:_e(this.symbolLayers),thumbnail:_e(this.thumbnail)})}static fromJSON(t){var i;const e=new G1;if(e.read(t),e.symbolLayers.length===2&&e.symbolLayers.at(0).type==="fill"&&e.symbolLayers.at(1).type==="line"){const n=e.symbolLayers.at(0),s=e.symbolLayers.at(1);!s.enabled||(i=t.symbolLayers)!=null&&i[1]&&t.symbolLayers[1].enable===!1||(n.outline={size:s.size,color:s.material!=null?s.material.color:null}),e.symbolLayers.removeAt(1)}return e}static fromSimpleFillSymbol(t){return new G1({symbolLayers:new Pe([T0.fromSimpleFillSymbol(t)])})}};_([T({type:pD,json:{write:!0}})],V1.prototype,"symbolLayers",void 0),_([Ke({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],V1.prototype,"type",void 0),V1=G1=_([Y("esri.symbols.PolygonSymbol3D")],V1);const i3=V1;var Q9;const I_=new an({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let Bu=Q9=class extends HN{constructor(...t){super(...t),this.color=new gt([0,0,0,.25]),this.outline=new Ec,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string")return t;const n={};return t&&(n.style=t),e&&(n.outline=e),i&&(n.color=i),n}clone(){return new Q9({color:_e(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};_([T()],Bu.prototype,"color",void 0),_([T()],Bu.prototype,"outline",void 0),_([Ke({esriSFS:"simple-fill"},{readOnly:!0})],Bu.prototype,"type",void 0),_([T({type:I_.apiValues,json:{read:I_.read,write:I_.write}})],Bu.prototype,"style",void 0),Bu=Q9=_([Y("esri.symbols.SimpleFillSymbol")],Bu);const Gm=Bu;var e4;const A_=new an({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let Ea=e4=class extends aD{constructor(...t){super(...t),this.color=new gt([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new Ec}normalizeCtorArgs(t,e,i,n){if(t&&typeof t!="string")return t;const s={};return t&&(s.style=t),e!=null&&(s.size=Si(e)),i&&(s.outline=i),n&&(s.color=n),s}writeColor(t,e){t&&this.style!=="x"&&this.style!=="cross"&&(e.color=t.toJSON()),t===null&&(e.color=null)}set path(t){this.style="path",this._set("path",t)}clone(){return new e4({angle:this.angle,color:_e(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var t;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(t=this.outline)==null?void 0:t.hash()}`}};_([T()],Ea.prototype,"color",void 0),_([_t("color")],Ea.prototype,"writeColor",null),_([Ke({esriSMS:"simple-marker"},{readOnly:!0})],Ea.prototype,"type",void 0),_([T()],Ea.prototype,"size",void 0),_([T({type:A_.apiValues,json:{read:A_.read,write:A_.write}})],Ea.prototype,"style",void 0),_([T({type:String,json:{write:!0}})],Ea.prototype,"path",null),_([T({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Ec}},json:{default:null,write:!0}})],Ea.prototype,"outline",void 0),Ea=e4=_([Y("esri.symbols.SimpleMarkerSymbol")],Ea);const Xf=Ea;var t4;let gi=t4=class extends sr{constructor(...t){super(...t),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new Xw,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string")return t;const n={};return t&&(n.text=t),e&&(n.font=e),i&&(n.color=i),n}writeLineWidth(t,e,i,n){n&&typeof n!="string"?n.origin:e[i]=t}castLineWidth(t){return Si(t)}writeLineHeight(t,e,i,n){n&&typeof n!="string"?n.origin:e[i]=t}clone(){return new t4({angle:this.angle,backgroundColor:_e(this.backgroundColor),borderLineColor:_e(this.borderLineColor),borderLineSize:this.borderLineSize,color:_e(this.color),font:this.font&&this.font.clone(),haloColor:_e(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var t,e,i;return`${(t=this.backgroundColor)==null?void 0:t.hash()}.${this.borderLineColor}.${this.borderLineSize}.${(e=this.color)==null?void 0:e.hash()}.${this.font&&this.font.hash()}.${(i=this.haloColor)==null?void 0:i.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};_([T({type:gt,json:{write:!0}})],gi.prototype,"backgroundColor",void 0),_([T({type:gt,json:{write:!0}})],gi.prototype,"borderLineColor",void 0),_([T({type:Number,json:{write:!0},cast:Si})],gi.prototype,"borderLineSize",void 0),_([T({type:Xw,json:{write:!0}})],gi.prototype,"font",void 0),_([T({...KN,json:{write:!0}})],gi.prototype,"horizontalAlignment",void 0),_([T({type:Boolean,json:{write:!0}})],gi.prototype,"kerning",void 0),_([T({type:gt,json:{write:!0}})],gi.prototype,"haloColor",void 0),_([T({type:Number,cast:Si,json:{write:!0}})],gi.prototype,"haloSize",void 0),_([T({type:Boolean,json:{write:!0}})],gi.prototype,"rightToLeft",void 0),_([T({type:Boolean,json:{write:!0}})],gi.prototype,"rotated",void 0),_([T({type:String,json:{write:!0}})],gi.prototype,"text",void 0),_([Ke({esriTS:"text"},{readOnly:!0})],gi.prototype,"type",void 0),_([T({...YN,json:{write:!0}})],gi.prototype,"verticalAlignment",void 0),_([T({type:Number,cast:Si,json:{write:!0}})],gi.prototype,"xoffset",void 0),_([T({type:Number,cast:Si,json:{write:!0}})],gi.prototype,"yoffset",void 0),_([T({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],gi.prototype,"angle",void 0),_([T({type:Number,json:{write:!0}})],gi.prototype,"width",void 0),_([T({type:Number})],gi.prototype,"lineWidth",void 0),_([_t("lineWidth")],gi.prototype,"writeLineWidth",null),_([qi("lineWidth")],gi.prototype,"castLineWidth",null),_([T(JN)],gi.prototype,"lineHeight",void 0),_([_t("lineHeight")],gi.prototype,"writeLineHeight",null),gi=t4=_([Y("esri.symbols.TextSymbol")],gi);const Vm=gi;var i4;let Do=i4=class extends sr{constructor(t){super(t),this.color=null,this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const t=this.portal!=null?this.portal:$s.getDefault(),e=t.user?t.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${e}:${t.url}`}read(t,e){this.portal=e==null?void 0:e.portal,super.read(t,e)}clone(){return new i4({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(t){return this._fetchSymbol("webRef",t)}fetchCIMSymbol(t){return this._fetchSymbol("cimRef",t)}async _fetchSymbol(t,e){const i=e!=null?e.cache:null,n=i?this._fetchCacheKey:null;if(i!=null){const m=n&&i.get(n);if(m)return m.clone()}const{resolveWebStyleSymbol:s}=await be(()=>import("./webStyleSymbolUtils-NOGravR0.js"),__vite__mapDeps([147,148,143,87,31,144]),import.meta.url);Zt(e);const h=s(this,{portal:this.portal},t,e);h.catch(m=>{Ce.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",m)});const f=await h;return t==="webRef"&&f.type==="point-3d"||t==="cimRef"&&f.type==="cim"?(i!=null&&i.set(n,f.clone()),f):null}};_([T({json:{write:!1}})],Do.prototype,"color",void 0),_([T({type:String,json:{write:!0}})],Do.prototype,"styleName",void 0),_([T({type:$s,json:{write:!1}})],Do.prototype,"portal",void 0),_([T({type:String,json:{read:YS,write:Jf}})],Do.prototype,"styleUrl",void 0),_([T({type:kg,json:{read:!1}})],Do.prototype,"thumbnail",void 0),_([T({type:String,json:{write:!0}})],Do.prototype,"name",void 0),_([Ke({styleSymbolReference:"web-style"},{readOnly:!0})],Do.prototype,"type",void 0),_([T()],Do.prototype,"_fetchCacheKey",null),Do=i4=_([Y("esri.symbols.WebStyleSymbol")],Do);const n3=Do;function ATe(t){if(!t)return!1;switch(t.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function OTe(t){if(!t)return!1;switch(t.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const xd={base:sr,key:"type",typeMap:{"simple-fill":Gm,"picture-fill":vT,"picture-marker":jm,"simple-line":Ec,"simple-marker":Xf,text:Vm,"label-3d":yT,"line-3d":Qw,"mesh-3d":e3,"point-3d":t3,"polygon-3d":i3,"web-style":n3,cim:rp},errorContext:"symbol"},PTe={base:sr,key:"type",typeMap:{"picture-marker":jm,"simple-marker":Xf,"point-3d":t3,cim:rp},errorContext:"symbol"},RTe={base:sr,key:"type",typeMap:{"simple-line":Ec,"line-3d":Qw,cim:rp},errorContext:"symbol"},LTe={base:sr,key:"type",typeMap:{"simple-fill":Gm,"picture-fill":vT,"polygon-3d":i3,cim:rp},errorContext:"symbol"},NTe={base:sr,key:"type",typeMap:{"picture-marker":jm,"simple-marker":Xf,text:Vm,"web-style":n3,cim:rp},errorContext:"symbol"},DTe=B6({types:xd}),zTe={base:sr,key:"type",typeMap:{"simple-fill":Gm,"picture-fill":vT,"picture-marker":jm,"simple-line":Ec,"simple-marker":Xf,text:Vm,"line-3d":Qw,"mesh-3d":e3,"point-3d":t3,"polygon-3d":i3,"web-style":n3,cim:rp},errorContext:"symbol"},FTe={base:sr,key:"type",typeMap:{text:Vm,"label-3d":yT},errorContext:"symbol"},jTe={base:sr,key:"type",typeMap:{"line-3d":Qw,"mesh-3d":e3,"point-3d":t3,"polygon-3d":i3,"web-style":n3,cim:rp},errorContext:"symbol"},GTe={base:sr,key:"type",typeMap:{"label-3d":yT},errorContext:"symbol"},VTe=yc(xd);var n4;function Ase(t){if(!t)return null;const e={};for(const i in t){const n=Bd(t[i]);n&&(e[i]=n)}return Object.keys(e).length!==0?e:null}function Ose(t){if(t==null)return null;const e={};for(const i in t){const n=t[i];n&&(e[i]=n.toJSON())}return Object.keys(e).length!==0?e:null}let hr=n4=class extends lo(Fe){constructor(t){super(t),this.isAggregate=!1,this.layer=null,this.origin=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:_f(),configurable:!0}),Object.defineProperty(this,"_lastMeshTransform",{value:{},configurable:!0,writable:!0,enumerable:!1}),arguments.length>1&&NB(Ce.getLogger(this),"Graphic",{version:"4.30"})}initialize(){this._watchMeshGeometryChanges()}set aggregateGeometries(t){const e=this._get("aggregateGeometries");JSON.stringify(e)!==JSON.stringify(t)&&this._set("aggregateGeometries",t)}set attributes(t){const e=this._get("attributes");e!==t&&(this._set("attributes",t),this._notifyLayer("attributes",e,t))}set geometry(t){const e=this._get("geometry");e!==t&&(this._set("geometry",t),(t==null?void 0:t.type)!=="mesh"&&this._notifyLayer("geometry",e,t))}set symbol(t){const e=this._get("symbol");e!==t&&(this._set("symbol",t),this._notifyLayer("symbol",e,t))}set visible(t){const e=this._get("visible");e!==t&&(this._set("visible",t),this._notifyLayer("visible",e,t))}cloneShallow(){return new n4({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible,origin:this.origin})}getEffectivePopupTemplate(t=!1){if(this.popupTemplate)return this.popupTemplate;const e=this.origin&&"layer"in this.origin?this.origin.layer:null;for(const i of[e,this.sourceLayer,this.layer])if(i){if("popupTemplate"in i&&i.popupTemplate)return i.popupTemplate;if(t&&"defaultPopupTemplate"in i&&i.defaultPopupTemplate!=null)return i.defaultPopupTemplate}return null}getAttribute(t){var e;return(e=this.attributes)==null?void 0:e[t]}setAttribute(t,e){if(this.attributes){const i=this.getAttribute(t);this.attributes[t]=e,this._notifyLayer("attributes",i,e,t)}else this.attributes={[t]:e},this._notifyLayer("attributes",void 0,e,t)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){var t;return{aggregateGeometries:Ose(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:Z5(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:((t=this.popupTemplate)==null?void 0:t.toJSON())??null}}notifyMeshTransformChanged(t={}){const{geometry:e}=this;if((e==null?void 0:e.type)==="mesh"){const i={origin:e.origin,transform:e.transform};this._notifyLayer("origin-transform",i,i,t.action)}}_notifyLayer(t,e,i,n){if(!this.layer||!("graphicChanged"in this.layer))return;const s={graphic:this,property:t,oldValue:e,newValue:i};t==="origin-transform"&&(s.action=n),t==="attributes"&&(s.attributeName=n),this.layer.graphicChanged(s)}_watchMeshGeometryChanges(){this.addHandles([nr(()=>{var t,e;return((t=this.geometry)==null?void 0:t.type)==="mesh"&&this.geometry.vertexSpace.origin?{localMatrix:(e=this.geometry.transform)==null?void 0:e.localMatrix,origin:this.geometry.vertexSpace.origin}:void 0},({localMatrix:t,origin:e})=>{this._lastMeshTransform.localMatrix===t&&this._lastMeshTransform.origin===e||(this._lastMeshTransform.localMatrix=t,this._lastMeshTransform.origin=e,this.notifyMeshTransformChanged())}),nr(()=>{var t;return((t=this.geometry)==null?void 0:t.type)==="mesh"?{vertexAttributes:this.geometry.vertexAttributes}:void 0},()=>{var e;const t=this.geometry;(t==null?void 0:t.type)==="mesh"&&t.vertexSpace.origin?(this._lastMeshTransform.localMatrix=(e=t.transform)==null?void 0:e.localMatrix,this._lastMeshTransform.origin=t.vertexSpace.origin):(this._lastMeshTransform.localMatrix=void 0,this._lastMeshTransform.origin=void 0),this._notifyLayer("geometry",this.geometry,this.geometry)},{equals:(t,e)=>t===e,sync:!0})])}};_([T({value:null,json:{read:Ase}})],hr.prototype,"aggregateGeometries",null),_([T({value:null})],hr.prototype,"attributes",null),_([T({value:null,types:km,json:{read:Bd}})],hr.prototype,"geometry",null),_([T({type:Boolean})],hr.prototype,"isAggregate",void 0),_([T({clonable:"reference"})],hr.prototype,"layer",void 0),_([T({clonable:"reference"})],hr.prototype,"origin",void 0),_([T({type:aT})],hr.prototype,"popupTemplate",void 0),_([T({clonable:"reference"})],hr.prototype,"sourceLayer",void 0),_([T({value:null,types:xd})],hr.prototype,"symbol",null),_([T({type:Boolean,value:!0})],hr.prototype,"visible",null),hr=n4=_([Y("esri.Graphic")],hr),function(t){t.generateUID=_f}(hr||(hr={}));const Ud=hr;let Id=class extends _g{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};_([kP({Type:Ud,ensureType:wn(Ud)})],Id.prototype,"itemType",void 0),Id=_([Y("esri.support.GraphicsCollection")],Id);let ah=class extends Re{constructor(e){super(e),this.view=null,this.baseLayerViews=new Pe,this.referenceLayerViews=new Pe,this._loadingHandle=Ee(()=>{var i,n;return(n=(i=this.view)==null?void 0:i.map)==null?void 0:n.basemap},i=>{i&&i.load().catch(()=>{})},Pt)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null);for(const e of this.baseLayerViews)e.destroy();this.baseLayerViews.length=0;for(const e of this.referenceLayerViews)e.destroy();this.referenceLayerViews.length=0}get suspended(){return!this.view||this.view.suspended}get updating(){var i,n,s;if((i=this.view)!=null&&i.suspended)return!1;const e=(s=(n=this.view)==null?void 0:n.map)==null?void 0:s.basemap;return!!e&&!!e.loaded&&(this.baseLayerViews.some(h=>h.updating)||this.referenceLayerViews.some(h=>h.updating))}};_([T({constructOnly:!0})],ah.prototype,"view",void 0),_([T({readOnly:!0})],ah.prototype,"baseLayerViews",void 0),_([T({readOnly:!0})],ah.prototype,"referenceLayerViews",void 0),_([T({readOnly:!0})],ah.prototype,"suspended",null),_([T({type:Boolean,readOnly:!0})],ah.prototype,"updating",null),ah=_([Y("esri.views.BasemapView")],ah);function Pse(t){return"tryRecycleWith"in t}function Rse(t){return t!=null&&typeof t=="object"&&"layerViews"in t}let Lse=class{constructor(e,i,n){this.layer=e,this.view=i,this.layerViewImporter=n,this._controller=new AbortController,this._deferred=Ts(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,ys(this._controller.signal,()=>{const s=new fe("cancelled:layerview-create","layerview creation cancelled",{layer:e});this._deferred.reject(s)})}tryRecycle(e){if(!this.done||!this.layerView||!Pse(this.layerView))return null;const i=this.layer.type,n=this._controller.signal;for(let s=0;s<e.length;s++){const h=e[s];if(h.type!==i)continue;const f=this.layerView.tryRecycleWith(h,{signal:n});if(f){e.splice(s,1),this.layer=h;const m=this.layerView,v=m.view;return this.promise=Promise.race([f.then(()=>(Zt(this._controller.signal),h.emit("layerview-destroy",{view:v,layerView:m}),v.emit("layerview-destroy",{view:v,layerView:m}),h.emit("layerview-create",{view:v,layerView:m}),v.emit("layerview-create",{view:v,layerView:m}),m)),new Promise((x,M)=>ys(this._controller.signal,()=>M(Yt())))]),this.promise}}return null}destroy(){this._controller.abort();const{layerView:e}=this;if(e){const{layer:i,view:n}=this;i.emit("layerview-destroy",{view:n,layerView:e}),n.emit("layerview-destroy",{layer:i,layerView:e})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null}async start(){var s,h;if(this._started)return;this._started=!0;const{_controller:{signal:e},layer:i,view:n}=this;this._map=n.map;try{let f,m;if(await i.load({signal:e}),i.prefetchResources&&await i.prefetchResources({signal:e}),Dse(i))f=await i.createLayerView(n,{signal:e});else{if(!this.layerViewImporter.hasLayerViewModule(i))throw new fe("layer:view-not-supported","No layerview implementation was found");const M=await this.layerViewImporter.importLayerView(i);Zt(e),f="default"in M?new M.default({layer:i,view:n}):new M({layer:i,view:n})}const v=()=>{m=Rt(m),f.destroyed||f.destroy(),f.layer=null,f.parent=null,f.view=null,this.done=!0};m=ys(e,v),Zt(e);try{await f.when()}catch(M){throw v(),M}if(!((h=(s=this._map)==null?void 0:s.allLayers)==null?void 0:h.includes(i)))return v(),void this._deferred.reject(new fe("view:no-layerview-for-layer","The layer has been removed from the map",{layer:i}));this.layerView=f,i.emit("layerview-create",{view:n,layerView:f}),n.emit("layerview-create",{layer:i,layerView:f}),this.done=!0,this._deferred.resolve(f)}catch(f){i.emit("layerview-create-error",{view:n,error:f}),n.emit("layerview-create-error",{layer:i,error:f}),this.done=!0,this._deferred.reject(new fe("layerview:create-error","layerview creation failed",{layer:i,error:f}))}}},Hs=class extends Re{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new uc,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var n;const i=(n=this.view.map)==null?void 0:n.allLayers;if(i)for(const s of i)this.layerViewImporter.hasLayerViewModule(s)&&this.layerViewImporter.importLayerView(s)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=Ts(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(wm(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var v,x,M;if(this.destroyed)return;const i=this.view.map;if(this._map!==i&&(this.clear(),this._map=i),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const n=new Set,s=[],h=this.view.ready,f=$=>{if($!=null){for(const I of $)if(I){n.add(I);const P=this._layerLayerViewInfoMap.get(I);P&&h?P.start():P||this._recyclingInfoMap.has(I)||s.push(I),"layers"in I&&I.layers&&f(I.layers)}}};for(const $ of this._rootCollectionNames)f(Br(this,$));for(const[$,I]of this._layerLayerViewInfoMap)if(!n.has($)){this._layerLayerViewInfoMap.delete(I.layer);const P=I.tryRecycle(s);P?(this.notifyChange("updating"),this._recyclingInfoMap.set(I.layer,I),P.then(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(I.layer),this._layerLayerViewInfoMap.set(I.layer,I),this._reschedule()}).catch(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(I.layer),I.destroy(),this._reschedule()})):I.destroy()}for(const[$,I]of this._recyclingInfoMap)n.has($)||(this.notifyChange("updating"),this._recyclingInfoMap.delete(I.layer),I.destroy());for(const $ of s)this._createLayerView($);this._refreshCollections();const m=[(v=i==null?void 0:i.ground)==null?void 0:v.layers,(x=i==null?void 0:i.basemap)==null?void 0:x.baseLayers,(M=i==null?void 0:i.basemap)==null?void 0:M.referenceLayers,i==null?void 0:i.layers].filter($=>!!$);n.forEach($=>"layers"in $&&m.push($.layers)),this.addHandles(m.map($=>this._watchUpdatingTracking.addOnCollectionChange(()=>$,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.addHandles([Es(()=>{var e,i;return(i=(e=this.view)==null?void 0:e.map)==null?void 0:i.allLayers},"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),Ee(()=>{const e=this.view,i=e==null?void 0:e.map;return[i==null?void 0:i.basemap,i==null?void 0:i.ground,i==null?void 0:i.layers,e==null?void 0:e.ready]},()=>this._reschedule(),xi)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),T_(this._recyclingInfoMap),T_(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(Yt()),this._workPromise=null)}get _layersToLayerViews(){const e=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&e.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(e)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||mw(this._layerLayerViewInfoMap,e=>!e.done)||this._recyclingInfoMap.size>0}get updatingRemaining(){let e=0;for(const i of this._layerLayerViewInfoMap.values())i.done||++e;return e}clear(){this.destroyed||(T_(this._layerLayerViewInfoMap),this._refreshCollections())}async whenLayerView(e){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(e)){if(this._recyclingInfoMap.has(e))return this._recyclingInfoMap.get(e).promise;throw new fe("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e})}return this._layerLayerViewInfoMap.get(e).promise}isCreatingLayerViewsForLayer(e,i){var h;this.commitProperty("updatingRemaining");const n=this._layerLayerViewInfoMap.get(e);if(!(n!=null&&n.done))return!0;const s=n.layerView;return!(!s||!i||s.parent===i)||!!(n.done&&s&&"layers"in e&&((h=e.layers)!=null&&h.length))&&e.layers.some(f=>this.isCreatingLayerViewsForLayer(f,s))}_refreshCollections(){for(const[e,i]of this._layersToLayerViews)this._populateLayerViewsOwners(Br(this,e),Br(this,i),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(e,i,n){if(!e||!i)return void(i&&i.removeAll());let s=0;for(const h of e){const f=this._layerLayerViewInfoMap.get(h);if(!(f!=null&&f.layerView))continue;const m=f.layerView;m.layer=h,m.parent=n,i.at(s)!==m&&i.splice(s,0,m),"layers"in h&&Rse(m)&&this._populateLayerViewsOwners(h.layers,m.layerViews,m),s+=1}s<i.length&&i.splice(s,i.length)}_createLayerView(e){e.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const i=new Lse(e,this.view,this.layerViewImporter);i.promise.then(()=>this._refreshCollections(),n=>{n&&(Zr(n)||n.name==="cancelled:layerview-create")||Ce.getLogger(this).error(`Failed to create layerview for layer title:'${e.title??"no title"}', id:'${e.id??"no id"}' of type '${e.type}'.`,{layer:e,error:n}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(e,i),this.view.ready&&i.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};_([T()],Hs.prototype,"_workPromise",void 0),_([T({readOnly:!0})],Hs.prototype,"_watchUpdatingTracking",void 0),_([T({readOnly:!0})],Hs.prototype,"_layersToLayerViews",null),_([T({readOnly:!0})],Hs.prototype,"_rootCollectionNames",null),_([T()],Hs.prototype,"layerViewImporter",void 0),_([T()],Hs.prototype,"supportsGround",void 0),_([T({readOnly:!0})],Hs.prototype,"updating",null),_([T({readOnly:!0})],Hs.prototype,"updatingRemaining",null),_([T({constructOnly:!0})],Hs.prototype,"view",void 0),Hs=_([Y("esri.views.LayerViewManager")],Hs);const Nse=Hs;function Dse(t){return"createLayerView"in t&&t.createLayerView!=null}let rs=class extends Re{constructor(e){super(e),this.factor=1.5,this.offset=Fi(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};_([T({type:Number})],rs.prototype,"factor",void 0),_([T({nonNullable:!0})],rs.prototype,"offset",void 0),_([T()],rs.prototype,"position",void 0),_([T({type:Number,range:{min:0}})],rs.prototype,"size",void 0),_([T()],rs.prototype,"maskUrl",void 0),_([T()],rs.prototype,"maskEnabled",void 0),_([T()],rs.prototype,"overlayUrl",void 0),_([T()],rs.prototype,"overlayEnabled",void 0),_([T({readOnly:!0})],rs.prototype,"version",null),_([T({type:Boolean})],rs.prototype,"visible",void 0),rs=_([Y("esri.views.Magnifier")],rs);const fD=rs;let lb=class{constructor(e){this._observable=new v0,this._map=new Map(e)}get size(){return Ve(this._observable),this._map.size}clear(){this._map.size>0&&(this._map.clear(),this._observable.notify())}delete(e){const i=this._map.delete(e);return i&&this._observable.notify(),i}entries(){return Ve(this._observable),this._map.entries()}forEach(e,i){Ve(this._observable),this._map.forEach((n,s)=>e.call(i,n,s,this),i)}get(e){return Ve(this._observable),this._map.get(e)}has(e){return Ve(this._observable),this._map.has(e)}keys(){return Ve(this._observable),this._map.keys()}set(e,i){return this._map.set(e,i),this._observable.notify(),this}values(){return Ve(this._observable),this._map.values()}[Symbol.iterator](){return Ve(this._observable),this._map[Symbol.iterator]()}get[Symbol.toStringTag](){return this._map[Symbol.toStringTag]}};var r4;let H1=r4=class extends Fe{constructor(t){super(t),this.name=null,this.code=null}clone(){return new r4({name:this.name,code:this.code})}};_([T({type:String,json:{write:!0}})],H1.prototype,"name",void 0),_([T({type:[String,Number],json:{write:!0}})],H1.prototype,"code",void 0),H1=r4=_([Y("esri.layers.support.CodedValue")],H1);const zse=new an({inherited:"inherited",codedValue:"coded-value",range:"range"});let B1=class extends Fe{constructor(e){super(e),this.name=null,this.type=null}};_([T({type:String,json:{write:!0}})],B1.prototype,"name",void 0),_([Ke(zse)],B1.prototype,"type",void 0),B1=_([Y("esri.layers.support.Domain")],B1);const r3=B1;var s4;let U1=s4=class extends r3{constructor(t){super(t),this.codedValues=null,this.type="coded-value"}getName(t){let e=null;if(this.codedValues){const i=String(t);this.codedValues.some(n=>(String(n.code)===i&&(e=n.name),!!e))}return e}clone(){return new s4({codedValues:_e(this.codedValues),name:this.name})}};_([T({type:[H1],json:{write:!0}})],U1.prototype,"codedValues",void 0),_([Ke({codedValue:"coded-value"})],U1.prototype,"type",void 0),U1=s4=_([Y("esri.layers.support.CodedValueDomain")],U1);const gD=U1;var o4;let cb=o4=class extends r3{constructor(t){super(t),this.type="inherited"}clone(){return new o4}};_([Ke({inherited:"inherited"})],cb.prototype,"type",void 0),cb=o4=_([Y("esri.layers.support.InheritedDomain")],cb);const mD=cb;var a4;let Up=a4=class extends r3{constructor(t){super(t),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new a4({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};_([T({json:{type:[Number],read:{source:"range",reader:(t,e)=>{var i;return(i=e.range)==null?void 0:i[1]}},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(t,e,i){e[i]=[this.minValue||0,t]}}}})],Up.prototype,"maxValue",void 0),_([T({json:{type:[Number],read:{source:"range",reader:(t,e)=>{var i;return(i=e.range)==null?void 0:i[0]}},write:{target:"range",writer(t,e,i){e[i]=[t,this.maxValue||0]}}}})],Up.prototype,"minValue",void 0),_([Ke({range:"range"})],Up.prototype,"type",void 0),Up=a4=_([Y("esri.layers.support.RangeDomain")],Up);const yD=Up,Fse={key:"type",base:r3,typeMap:{range:yD,"coded-value":gD,inherited:mD}};function jse(t){if(!(t!=null&&t.type))return null;switch(t.type){case"range":return yD.fromJSON(t);case"codedValue":return gD.fromJSON(t);case"inherited":return mD.fromJSON(t)}return null}const Gse=new an({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var l4;const Vse=new an({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let Vn=l4=class extends Fe{constructor(t){super(t),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(t,{description:e}){let i=null;try{i=e?JSON.parse(e):null}catch{}return(i==null?void 0:i.value)??null}readValueType(t,{description:e}){let i=null;try{i=e?JSON.parse(e):null}catch{}return i?Vse.fromJSON(i.fieldValueType):null}clone(){var t;return new l4({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:((t=this.domain)==null?void 0:t.clone())??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};_([T({type:String,json:{write:!0}})],Vn.prototype,"alias",void 0),_([T({type:[String,Number],json:{write:{allowNull:!0}}})],Vn.prototype,"defaultValue",void 0),_([T()],Vn.prototype,"description",void 0),_([Ct("description")],Vn.prototype,"readDescription",null),_([T({types:Fse,json:{read:{reader:jse},write:!0}})],Vn.prototype,"domain",void 0),_([T({type:Boolean,json:{write:!0}})],Vn.prototype,"editable",void 0),_([T({type:Ii,json:{write:{overridePolicy:t=>({enabled:Number.isFinite(t)})}}})],Vn.prototype,"length",void 0),_([T({type:String,json:{write:!0}})],Vn.prototype,"name",void 0),_([T({type:Boolean,json:{write:!0}})],Vn.prototype,"nullable",void 0),_([Ke(Gse)],Vn.prototype,"type",void 0),_([T()],Vn.prototype,"valueType",void 0),_([Ct("valueType",["description"])],Vn.prototype,"readValueType",null),_([T({type:Boolean,json:{read:!1}})],Vn.prototype,"visible",void 0),Vn=l4=_([Y("esri.layers.support.Field")],Vn);const Hse=Vn;var c4;let qp=c4=class extends Fe{constructor(t){super(t),this.type="map-layer"}clone(){const{mapLayerId:t,gdbVersion:e}=this;return new c4({mapLayerId:t,gdbVersion:e})}};_([Ke({mapLayer:"map-layer"})],qp.prototype,"type",void 0),_([T({type:Ii,json:{write:!0}})],qp.prototype,"mapLayerId",void 0),_([T({type:String,json:{write:!0}})],qp.prototype,"gdbVersion",void 0),qp=c4=_([Y("esri.layers.support.source.MapLayerSource")],qp);var h4;let Ll=h4=class extends Fe{constructor(t){super(t),this.type="query-table"}clone(){const{workspaceId:t,query:e,oidFields:i,spatialReference:n,geometryType:s}=this,h={workspaceId:t,query:e,oidFields:i,spatialReference:(n==null?void 0:n.clone())??void 0,geometryType:s};return new h4(h)}};_([Ke({queryTable:"query-table"})],Ll.prototype,"type",void 0),_([T({type:String,json:{write:!0}})],Ll.prototype,"workspaceId",void 0),_([T({type:String,json:{write:!0}})],Ll.prototype,"query",void 0),_([T({type:String,json:{write:!0}})],Ll.prototype,"oidFields",void 0),_([T({type:tt,json:{write:!0}})],Ll.prototype,"spatialReference",void 0),_([Ke(ZJ)],Ll.prototype,"geometryType",void 0),Ll=h4=_([Y("esri.layers.support.source.QueryTableDataSource")],Ll);var u4;let Wp=u4=class extends Fe{constructor(t){super(t),this.type="raster"}clone(){const{workspaceId:t,dataSourceName:e}=this;return new u4({workspaceId:t,dataSourceName:e})}};_([Ke({raster:"raster"})],Wp.prototype,"type",void 0),_([T({type:String,json:{write:!0}})],Wp.prototype,"dataSourceName",void 0),_([T({type:String,json:{write:!0}})],Wp.prototype,"workspaceId",void 0),Wp=u4=_([Y("esri.layers.support.source.RasterDataSource")],Wp);var d4;let Uu=d4=class extends Fe{constructor(t){super(t),this.type="table"}clone(){const{workspaceId:t,gdbVersion:e,dataSourceName:i}=this;return new d4({workspaceId:t,gdbVersion:e,dataSourceName:i})}};_([Ke({table:"table"})],Uu.prototype,"type",void 0),_([T({type:String,json:{write:!0}})],Uu.prototype,"workspaceId",void 0),_([T({type:String,json:{write:!0}})],Uu.prototype,"gdbVersion",void 0),_([T({type:String,json:{write:!0}})],Uu.prototype,"dataSourceName",void 0),Uu=d4=_([Y("esri.layers.support.source.TableDataSource")],Uu);var p4,f4;const Bse=Tr()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let ss=p4=class extends Fe{constructor(t){super(t),this.type="join-table"}readLeftTableSource(t,e,i){return QE()(t,e,i)}castLeftTableSource(t){return yc(g4(),t)}readRightTableSource(t,e,i){return QE()(t,e,i)}castRightTableSource(t){return yc(g4(),t)}clone(){const{leftTableKey:t,rightTableKey:e,leftTableSource:i,rightTableSource:n,joinType:s}=this,h={leftTableKey:t,rightTableKey:e,leftTableSource:(i==null?void 0:i.clone())??void 0,rightTableSource:(n==null?void 0:n.clone())??void 0,joinType:s};return new p4(h)}};_([Ke({joinTable:"join-table"})],ss.prototype,"type",void 0),_([T({type:String,json:{write:!0}})],ss.prototype,"leftTableKey",void 0),_([T({type:String,json:{write:!0}})],ss.prototype,"rightTableKey",void 0),_([T({json:{write:!0}})],ss.prototype,"leftTableSource",void 0),_([Ct("leftTableSource")],ss.prototype,"readLeftTableSource",null),_([qi("leftTableSource")],ss.prototype,"castLeftTableSource",null),_([T({json:{write:!0}})],ss.prototype,"rightTableSource",void 0),_([Ct("rightTableSource")],ss.prototype,"readRightTableSource",null),_([qi("rightTableSource")],ss.prototype,"castRightTableSource",null),_([Ke(Bse)],ss.prototype,"joinType",void 0),ss=p4=_([Y("esri.layers.support.source.JoinTableDataSource")],ss);let O_=null;function QE(){return O_||(O_=B6({types:g4()})),O_}let P_=null;function g4(){return P_||(P_={key:"type",base:null,typeMap:{"data-layer":Yl,"map-layer":qp}}),P_}const Use={key:"type",base:null,typeMap:{"join-table":ss,"query-table":Ll,raster:Wp,table:Uu}};let Yl=f4=class extends Fe{constructor(t){super(t),this.type="data-layer"}clone(){const{fields:t,dataSource:e}=this;return new f4({fields:t,dataSource:e})}};_([Ke({dataLayer:"data-layer"})],Yl.prototype,"type",void 0),_([T({type:[Hse],json:{write:!0}})],Yl.prototype,"fields",void 0),_([T({types:Use,json:{write:!0}})],Yl.prototype,"dataSource",void 0),Yl=f4=_([Y("esri.layers.support.source.DataLayerSource")],Yl),Yl.from=wn(Yl);let qu=class extends lo(Fe){constructor(e){super(e),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};_([T({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],qu.prototype,"onFields",void 0),_([T({type:String,json:{write:!0}})],qu.prototype,"operator",void 0),_([T({type:String,json:{write:!0}})],qu.prototype,"searchTerm",void 0),_([T({type:String,json:{write:!0}})],qu.prototype,"searchType",void 0),qu=_([Y("esri.rest.support.FullTextSearch")],qu);const vD=qu;var m4;const ek=new an({upperLeft:"upper-left",lowerLeft:"lower-left"});let Wu=m4=class extends Fe{constructor(t){super(t),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new m4(_e({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};_([T({type:Lt,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Wu.prototype,"extent",void 0),_([T({type:["view","edit"],json:{write:!0}})],Wu.prototype,"mode",void 0),_([T({type:String,json:{read:ek.read,write:ek.write}})],Wu.prototype,"originPosition",void 0),_([T({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Wu.prototype,"tolerance",void 0),Wu=m4=_([Y("esri.rest.support.QuantizationParameters")],Wu);const bD=Wu,qse=new an({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});var y4;const tk=new an({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let zo=y4=class extends Fe{constructor(t){super(t),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(t,e){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(e.statisticParameters=_e(t))}clone(){return new y4({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:_e(this.statisticParameters)})}};_([T({type:Number,json:{write:!0}})],zo.prototype,"maxPointCount",void 0),_([T({type:Number,json:{write:!0}})],zo.prototype,"maxRecordCount",void 0),_([T({type:Number,json:{write:!0}})],zo.prototype,"maxVertexCount",void 0),_([T({type:String,json:{write:!0}})],zo.prototype,"onStatisticField",void 0),_([T({type:String,json:{write:!0}})],zo.prototype,"outStatisticFieldName",void 0),_([T({type:String,json:{read:{source:"statisticType",reader:tk.read},write:{target:"statisticType",writer:tk.write}}})],zo.prototype,"statisticType",void 0),_([T({type:Object})],zo.prototype,"statisticParameters",void 0),_([_t("statisticParameters")],zo.prototype,"writeStatisticParameters",null),zo=y4=_([Y("esri.rest.support.StatisticDefinition")],zo);const Wse=zo;var hb;const Zse=new an({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Ue=hb=class extends Fe{static from(t){return yw(hb,t)}constructor(t){super(t),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(t){return typeof t=="number"||typeof t=="object"?t:null}writeHistoricMoment(t,e){e.historicMoment=t&&t.getTime()}writeParameterValues(t,e){if(t){const i={};for(const n in t){const s=t[n];Array.isArray(s)?i[n]=s.map(h=>h instanceof Date?h.getTime():h):s instanceof Date?i[n]=s.getTime():i[n]=s}e.parameterValues=i}}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10,e.where="1=1"}writeWhere(t,e){e.where=t||"1=1"}clone(){return new hb(_e({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment!=null?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};Ue.MAX_MAX_RECORD_COUNT_FACTOR=5,_([T({json:{write:!0}})],Ue.prototype,"aggregateIds",void 0),_([T({type:Boolean,json:{write:!0}})],Ue.prototype,"cacheHint",void 0),_([T({type:Boolean,json:{default:!1,write:!0}})],Ue.prototype,"compactGeometryEnabled",void 0),_([T({json:{write:!0}})],Ue.prototype,"datumTransformation",void 0),_([qi("datumTransformation")],Ue.prototype,"castDatumTransformation",null),_([T({type:Boolean,json:{default:!1,write:!0}})],Ue.prototype,"defaultSpatialReferenceEnabled",void 0),_([T({type:Number,json:{write:{overridePolicy:t=>({enabled:t>0})}}})],Ue.prototype,"distance",void 0),_([T({type:Yl,json:{write:!0}})],Ue.prototype,"dynamicDataSource",void 0),_([T({type:String,json:{write:!0}})],Ue.prototype,"formatOf3DObjects",void 0),_([T({type:[vD],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],Ue.prototype,"fullText",void 0),_([T({type:String,json:{write:!0}})],Ue.prototype,"gdbVersion",void 0),_([T({types:km,json:{read:Bd,write:!0}})],Ue.prototype,"geometry",void 0),_([T({type:Number,json:{write:!0}})],Ue.prototype,"geometryPrecision",void 0),_([T({type:[String],json:{write:!0}})],Ue.prototype,"groupByFieldsForStatistics",void 0),_([T({type:String,json:{write:!0}})],Ue.prototype,"having",void 0),_([T({type:Date})],Ue.prototype,"historicMoment",void 0),_([_t("historicMoment")],Ue.prototype,"writeHistoricMoment",null),_([T({type:Number,json:{write:!0}})],Ue.prototype,"maxAllowableOffset",void 0),_([T({type:Number,cast:t=>t<1?1:t>Ue.MAX_MAX_RECORD_COUNT_FACTOR?Ue.MAX_MAX_RECORD_COUNT_FACTOR:t,json:{write:{overridePolicy:t=>({enabled:t>1})}}})],Ue.prototype,"maxRecordCountFactor",void 0),_([T({type:["xyFootprint"],json:{write:!0}})],Ue.prototype,"multipatchOption",void 0),_([T({type:Number,json:{read:{source:"resultRecordCount"}}})],Ue.prototype,"num",void 0),_([T({json:{write:!0}})],Ue.prototype,"objectIds",void 0),_([T({type:[String],json:{write:!0}})],Ue.prototype,"orderByFields",void 0),_([T({type:[String],json:{write:!0}})],Ue.prototype,"outFields",void 0),_([T({type:tt,json:{name:"outSR",write:!0}})],Ue.prototype,"outSpatialReference",void 0),_([T({type:[Wse],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],Ue.prototype,"outStatistics",void 0),_([T({json:{write:!0}})],Ue.prototype,"parameterValues",void 0),_([_t("parameterValues")],Ue.prototype,"writeParameterValues",null),_([T({type:De,json:{write:!0}})],Ue.prototype,"pixelSize",void 0),_([T({type:bD,json:{write:!0}})],Ue.prototype,"quantizationParameters",void 0),_([T({type:[Object],json:{write:!0}})],Ue.prototype,"rangeValues",void 0),_([T({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],Ue.prototype,"relationParameter",void 0),_([T({type:String,json:{write:!0}})],Ue.prototype,"resultType",void 0),_([T({type:Boolean,json:{default:!1,write:!0}})],Ue.prototype,"returnCentroid",void 0),_([T({type:Boolean,json:{default:!1,write:!0}})],Ue.prototype,"returnDistinctValues",void 0),_([T({type:Boolean,json:{default:!0,write:!0}})],Ue.prototype,"returnExceededLimitFeatures",void 0),_([T({type:Boolean,json:{write:!0}})],Ue.prototype,"returnGeometry",void 0),_([T({type:Boolean,json:{default:!1,write:!0}})],Ue.prototype,"returnQueryGeometry",void 0),_([T({type:Boolean,json:{default:!1,write:!0}})],Ue.prototype,"returnM",void 0),_([T({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Ue.prototype,"returnZ",void 0),_([T({type:tt,json:{write:!0}})],Ue.prototype,"sourceSpatialReference",void 0),_([Ke(qse,{ignoreUnknown:!1,name:"spatialRel"})],Ue.prototype,"spatialRelationship",void 0),_([T({type:Number,json:{read:{source:"resultOffset"}}})],Ue.prototype,"start",void 0),_([_t("start"),_t("num")],Ue.prototype,"writeStart",null),_([T({type:String,json:{write:!0}})],Ue.prototype,"sqlFormat",void 0),_([T({type:String,json:{write:!0}})],Ue.prototype,"text",void 0),_([T({type:Ww,json:{write:!0}})],Ue.prototype,"timeExtent",void 0),_([T({type:Boolean,json:{default:!1,write:!0}})],Ue.prototype,"timeReferenceUnknownClient",void 0),_([Ke(Zse,{ignoreUnknown:!1}),T({json:{write:{overridePolicy(t){return{enabled:!!t&&this.distance!=null&&this.distance>0}}}}})],Ue.prototype,"units",void 0),_([T({type:String,json:{write:{overridePolicy(t){return{enabled:t!=null||this.start!=null&&this.start>0}}}}})],Ue.prototype,"where",void 0),_([_t("where")],Ue.prototype,"writeWhere",null),Ue=hb=_([Y("esri.rest.support.Query")],Ue);const k2=Ue;function Ny(t){return!!(t!=null&&typeof t=="object"&&"createQuery"in t&&t.createQuery&&"on"in t&&t.on)}let Nl=class extends ln.EventedAccessor{constructor(e){super(e),this._selectionMap=new lb,this._sources=new Pe,this._trashCan=[],this._layerEditHandles=new Pe,this._vizTaskId=0,this.showHighlight=!0}initialize(){this.addHandles([Ee(()=>[this.view,this.showHighlight],()=>this._refreshVisualization()),Es(()=>this.sources,"change",i=>{const n=this._selectionMap;for(const s of i.removed)n.delete(s);this._refreshListeners(),this._refreshVisualization()},{onListenerAdd:()=>this._refreshListeners()})]);const e=new Pe;this.view.when().then(()=>{this.view.map&&(this.view.map.allLayers.flatten(i=>"sublayers"in i&&i.sublayers?i.sublayers:null).forEach(i=>{(Ny(i)&&!_1(i)||Au(i))&&e.add(i)}),this.sources=e)})}destroy(){this._layerEditHandles.drain(Rt)}get selections(){return Array.from(this._selectionMap.entries()).map(e=>{const[i,n]=e;return{layer:i,selection:[...n.selection]}})}get count(){let e=0;for(const i of this._selectionMap.values())e+=i.selection.length;return e}get hasSelection(){return this.count>0}get sources(){return this._sources}set sources(e){Xh(e,this._sources)}async getSelectedFeatures(e,i={},n="layerView"){const{view:s,selections:h}=this,f=(e!==void 0?h.filter(m=>e.includes(m.layer)):h).filter(m=>m.selection.length>0).map(async m=>{const{layer:v,selection:x}=m,M=Au(v)?v.parent:v;if(M==null||!nk(M))return null;if(n==="layer")return rk(M,x,i);if(ik(M))return null;const $=await s.whenLayerView(M).catch(()=>null);return $?rk($,x,i):null});return(await Promise.all(f)).filter(m=>m!=null)}updateSelection(e){const i=new Map;for(const[h,f]of this._selectionMap)i.set(h,[...f.selection]);let n=!1;const s=e.current.concat(e.added);for(const h of s){const f=h.sourceLayer,m=h.getObjectId();if(this.sources.includes(f)&&(Ny(f)||Au(f))&&m!==null){const v=G6(i,f,()=>[]);v.includes(m)||(v.push(m),n=!0)}}for(const h of e.removed){const f=h.sourceLayer,m=h.getObjectId();if(this.sources.includes(f)&&(Ny(f)||Au(f))&&m!==null){const v=i.get(f),x=v==null?void 0:v.indexOf(m);x!==void 0&&x>=0&&(v==null||v.splice(x,1),n=!0)}}if(n){const{_selectionMap:h,_trashCan:f}=this,m=[];for(const[v,x]of i){const M=h.get(v);M!==void 0&&f.push(M),h.set(v,{selection:x}),m.push({layer:v,selection:x,...C5(M!==void 0?M.selection:[],x)})}this._onSelectionChange(m)}}setSelection(e,i){this._setSelection(e,i)}getSelection(e){const i=this._selectionMap.get(e);return i==null?void 0:i.selection}appendToSelection(e,i){const n=this._selectionMap.get(e),s=n!==void 0?[...n.selection]:[];for(const h of i)s.includes(h)||s.push(h);this._setSelection(e,s)}removeFromSelection(e,i){const n=this._selectionMap.get(e);if(!n)return;const s=[];for(const h of n.selection)i.includes(h)||s.push(h);this._setSelection(e,s)}toggleInSelection(e,i){const n=this._selectionMap.get(e);if(!n||n.selection.length===0)return void this._setSelection(e,i);const s=new Set(n.selection),h=new Set(i),f=OU(s,h);this._setSelection(e,Array.from(f))}clear(){const e=this._selectionMap.values();this._trashCan.push(...e);const i=[];for(const[n,s]of this._selectionMap.entries())i.push({layer:n,added:[],removed:[...s.selection],selection:[]});this._selectionMap.clear(),this._onSelectionChange(i)}_onSelectionChange(e){this._refreshVisualization(),this.emit("selection-change",{view:this.view,changes:e})}_refreshVisualization(){var f;if(this.view==null||this.sources==null)return;for(this._vizTaskId++;this._trashCan.length>0;){const m=this._trashCan.pop();(f=m==null?void 0:m.highlightHandle)==null||f.remove()}const{sources:e,view:i,_selectionMap:n,showHighlight:s}=this,h=this._vizTaskId;for(const m of e){const v=n.get(m),x=Au(m)?m.parent:m;if(x!=null&&nk(x)){if(ik(x))continue;i.whenLayerView(x).then(M=>{var $;($=v==null?void 0:v.highlightHandle)==null||$.remove(),v!=null&&s&&h===this._vizTaskId&&"highlight"in M&&typeof M.highlight=="function"&&v.selection.length>0&&(v.highlightHandle=M.highlight(v.selection,"selection"))}).catch(()=>{var M;(M=v==null?void 0:v.highlightHandle)==null||M.remove()})}}}_refreshListeners(){this._layerEditHandles.drain(Rt);for(const e of this.sources){const i=Au(e)?e.parent:e;if(i!=null&&Ny(i)){const n=i.on("edits",s=>{this._handleEditChanges(s,e)});this._layerEditHandles.push(n)}}}_handleEditChanges(e,i){if(e.deletedFeatures!==void 0&&e.deletedFeatures.length>0&&this._selectionMap.has(i)){const n=e.deletedFeatures.filter(s=>s.error==null).map(s=>s.objectId).filter(ji);this.removeFromSelection(i,n)}}_setSelection(e,i){if(!this.sources.includes(e))throw new Error(`Cannot set selection on layer ${e.title} because it is not in 'sources'`);const n=this._selectionMap.get(e);if(n===void 0||!Kse(n,{selection:i})){n!==void 0&&this._trashCan.push(n),this._selectionMap.set(e,{selection:[...i]});const s={layer:e,selection:[...i],...C5(n!==void 0?n.selection:[],i)};this._onSelectionChange([s])}}};_([T({readOnly:!0,nonNullable:!0})],Nl.prototype,"selections",null),_([T({readOnly:!0,nonNullable:!0})],Nl.prototype,"count",null),_([T({constructOnly:!0,nonNullable:!0})],Nl.prototype,"view",void 0),_([T({readOnly:!0,nonNullable:!0})],Nl.prototype,"hasSelection",null),_([T()],Nl.prototype,"showHighlight",void 0),_([T()],Nl.prototype,"sources",null),Nl=_([Y("esri.views.SelectionManager")],Nl);const ik=t=>{var e;return Au(t)?((e=t.parent)==null?void 0:e.isTable)===!0:t.isTable},Jse=t=>t.layer!==void 0,nk=t=>(t==null?void 0:t.when)!==void 0,Kse=(t,e)=>{if(t==null&&e==null)return!0;if(t!=null&&e==null||t==null&&e!=null)return!1;if(t!=null&&e!=null&&t.selection!=null&&e.selection!=null){const i=[...t.selection],n=[...e.selection];if(i.length!==n.length)return!1;i.sort(),n.sort();for(let s=0;s<i.length;s++)if(i[s]!==n[s])return!1}return!0},rk=async(t,e,i={})=>{let n;if(Jse(t)){const s=t;n=s===void 0?null:await s.queryFeatures(new k2({...i,objectIds:e})).then(h=>({data:h,layer:t.layer}))}else{const s=t;n=s===void 0?null:await s.queryFeatures(new k2({...i,objectIds:e})).then(h=>({data:h,layer:s}))}return n},Yse=Nl;let q1=class extends lo(Re){constructor(e){super(e),this.accentColor=new gt([255,127,0]),this.textColor=new gt([255,255,255])}};_([T({type:gt,nonNullable:!0})],q1.prototype,"accentColor",void 0),_([T({type:gt,nonNullable:!0})],q1.prototype,"textColor",void 0),q1=_([Y("esri.views.Theme")],q1);const v4=q1;var sk;(function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right"})(sk||(sk={}));const wD=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],_D={};function xD(t){return!!_D[t]}function Xse(t){for(const e of t)if(!xD(e))return!1;return!0}wD.forEach(t=>{_D[t]=!0});let Qse=class{constructor(e){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=e,this.inputManager=null}connect(e){e&&this.disconnect(),this.inputManager=e,this._handlers.forEach(({handler:i,priority:n},s)=>{var h;return(h=this.inputManager)==null?void 0:h.installHandlers(s,[i],n)})}disconnect(){this.inputManager&&this._handlers.forEach((e,i)=>{var n;return(n=this.inputManager)==null?void 0:n.uninstallHandlers(i)}),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(e,i,n,s){const h=Array.isArray(e)?e:e.split(",");if(!Xse(h))return h.some(xD)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let f,m;Array.isArray(i)?m=i:(f=i,m=[]),typeof n=="function"?f=n:s=n,s=s??Ut.DEFAULT;const v=this._createUniqueGroupName(),x=new eoe(this.view,h,m,f);this._handlers.set(v,{handler:x,priority:s});for(const M of h){const $=this._handlerCounts.get(M)||0;this._handlerCounts.set(M,$+1)}return this.inputManager&&this.inputManager.installHandlers(v,[x],s),ut(()=>this._removeHandler(v,h))}hasHandler(e){return!!this._handlerCounts.get(e)}_removeHandler(e,i){if(this._handlers.has(e)){this._handlers.delete(e);for(const n of i){const s=this._handlerCounts.get(n);s===void 0||(s===1?this._handlerCounts.delete(n):this._handlerCounts.set(n,s-1))}}this.inputManager&&this.inputManager.uninstallHandlers(e)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},eoe=class extends xn{constructor(e,i,n,s){super(!0),this._latestDragStart=void 0,this.view=e;for(const h of i)switch(h){case"click":this.registerIncoming("click",n,f=>s(noe(e,f)));break;case"double-click":this.registerIncoming("double-click",n,f=>s(roe(e,f)));break;case"immediate-click":this.registerIncoming("immediate-click",n,f=>s(soe(e,f)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",n,f=>s(ooe(e,f)));break;case"hold":this.registerIncoming("hold",n,f=>s(aoe(e,f)));break;case"drag":this.registerIncoming("drag",n,f=>{const m=this._wrapDrag(f);m&&s(m)});break;case"key-down":this.registerIncoming("key-down",n,f=>s(loe(f)));break;case"key-up":this.registerIncoming("key-up",n,f=>s(coe(f)));break;case"pointer-down":this.registerIncoming("pointer-down",n,f=>s(e1(f,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",n,f=>s(e1(f,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",n,f=>s(e1(f,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",n,f=>s(hoe(f)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",n,f=>s(uoe(f)));break;case"pointer-enter":this.registerIncoming("pointer-enter",n,f=>s(e1(f,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",n,f=>s(e1(f,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",n,f=>{s(doe(f))});break;case"focus":this.registerIncoming("focus",n,f=>{s(toe(f))});break;case"blur":this.registerIncoming("blur",n,f=>{s(ioe(f))})}}_wrapDrag(e){const i=e.data,{x:n,y:s}=i.center,{action:h,pointerType:f,button:m}=i;if(h==="start"&&(this._latestDragStart=i),!this._latestDragStart)return;const v=i.pointer.native,x=i.buttons,{cancelable:M,timestamp:$}=e,I={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return h==="end"&&(this._latestDragStart=void 0),{type:"drag",action:h,x:n,y:s,origin:I,pointerType:f,button:m,buttons:x,radius:i.radius,angle:BO(i.angle),native:v,timestamp:$,cancelable:M,stopPropagation:()=>e.stopPropagation(),async:P=>e.async(P),preventDefault:()=>e.preventDefault()}}};function toe(t){return{type:"focus",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}function ioe(t){return{type:"blur",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}function noe(t,e){const{pointerType:i,button:n,buttons:s,x:h,y:f,native:m,eventId:v}=e.data,{cancelable:x,timestamp:M}=e;return{type:"click",pointerType:i,button:n,buttons:s,x:h,y:f,native:m,timestamp:M,screenPoint:Fi(h,f),mapPoint:Hm(t,h,f),eventId:v,cancelable:x,stopPropagation:()=>e.stopPropagation(),async:$=>e.async($),preventDefault:()=>e.preventDefault()}}function roe(t,e){const{pointerType:i,button:n,buttons:s,x:h,y:f,native:m,eventId:v}=e.data,{cancelable:x,timestamp:M}=e;return{type:"double-click",pointerType:i,button:n,buttons:s,x:h,y:f,native:m,timestamp:M,mapPoint:Hm(t,h,f),eventId:v,cancelable:x,stopPropagation:()=>e.stopPropagation(),async:$=>e.async($),preventDefault:()=>e.preventDefault()}}function soe(t,e){const{pointerType:i,button:n,buttons:s,x:h,y:f,native:m,eventId:v}=e.data,x=m.pointerId,{cancelable:M,timestamp:$}=e;return{type:"immediate-click",pointerId:x,pointerType:i,button:n,buttons:s,x:h,y:f,native:m,timestamp:$,mapPoint:Hm(t,h,f),eventId:v,cancelable:M,stopPropagation:()=>e.stopPropagation(),async:I=>e.async(I),preventDefault:()=>e.preventDefault()}}function ooe(t,e){const{pointerType:i,button:n,buttons:s,x:h,y:f,native:m,eventId:v}=e.data,x=m.pointerId,{cancelable:M,timestamp:$}=e;return{type:"immediate-double-click",pointerId:x,pointerType:i,button:n,buttons:s,x:h,y:f,native:m,timestamp:$,mapPoint:Hm(t,h,f),eventId:v,cancelable:M,stopPropagation:()=>e.stopPropagation(),async:I=>e.async(I),preventDefault:()=>e.preventDefault()}}function aoe(t,e){const{pointerType:i,button:n,buttons:s,x:h,y:f,native:m}=e.data,{cancelable:v,timestamp:x}=e;return{type:"hold",pointerType:i,button:n,buttons:s,x:h,y:f,native:m,timestamp:x,mapPoint:Hm(t,h,f),cancelable:v,stopPropagation:()=>e.stopPropagation(),async:M=>e.async(M),preventDefault:()=>e.preventDefault()}}function Hm(t,e,i){return t.toMap(Fi(e,i),{exclude:[]})}function loe(t){const{key:e,repeat:i,native:n}=t.data,{cancelable:s,timestamp:h}=t;return{type:"key-down",key:e,repeat:i,native:n,timestamp:h,cancelable:s,stopPropagation:()=>t.stopPropagation(),async:f=>t.async(f),preventDefault:()=>t.preventDefault()}}function coe(t){const{key:e,native:i}=t.data,{cancelable:n,timestamp:s}=t;return{type:"key-up",key:e,native:i,timestamp:s,cancelable:n,stopPropagation:()=>t.stopPropagation(),async:h=>t.async(h),preventDefault:()=>t.preventDefault()}}function e1(t,e){const{x:i,y:n,button:s,buttons:h,native:f,eventId:m}=t.data,v=f.pointerId,x=f.pointerType,{cancelable:M,timestamp:$}=t;return{type:e,x:i,y:n,pointerId:v,pointerType:x,button:s,buttons:h,native:f,timestamp:$,eventId:m,cancelable:M,stopPropagation:()=>t.stopPropagation(),async:I=>t.async(I),preventDefault:()=>t.preventDefault()}}function hoe(t){const{x:e,y:i,buttons:n,native:s,eventId:h}=t.data.currentEvent,{button:f}=t.data.startEvent,m=t.data.startEvent.native.pointerId,v=t.data.startEvent.native.pointerType,x=t.data.action,M={x:t.data.startEvent.x,y:t.data.startEvent.y},{cancelable:$,timestamp:I}=t;return{type:"pointer-drag",x:e,y:i,pointerId:m,pointerType:v,button:f,buttons:n,action:x,origin:M,native:s,timestamp:I,eventId:h,cancelable:$,stopPropagation:()=>t.stopPropagation(),async:P=>t.async(P),preventDefault:()=>t.preventDefault()}}function uoe(t){const{cancelable:e,data:i,timestamp:n}=t,{x:s,y:h,deltaY:f,native:m}=i;return{type:"mouse-wheel",x:s,y:h,deltaY:f,native:m,timestamp:n,cancelable:e,stopPropagation:()=>t.stopPropagation(),async:v=>t.async(v),preventDefault:()=>t.preventDefault()}}function doe(t){const{action:e,state:i,device:n}=t.data,{cancelable:s,timestamp:h}=t,{buttons:f,axes:m}=i;return{type:"gamepad",device:n,timestamp:h,action:e,buttons:f,axes:m,cancelable:s,stopPropagation:()=>t.stopPropagation(),async:v=>t.async(v),preventDefault:()=>t.preventDefault()}}var Zs,ok,ak;(function(t){t[t.USER=0]="USER",t[t.MANAGER=1]="MANAGER"})(Zs||(Zs={})),function(t){t[t.None=0]="None",t[t.Unfocused=1]="Unfocused",t[t.Focused=2]="Focused",t[t.Unselected=4]="Unselected",t[t.Selected=8]="Selected",t[t.All=15]="All"}(ok||(ok={})),function(t){t[t.None=0]="None",t[t.Custom1=16]="Custom1",t[t.Custom2=32]="Custom2",t[t.Custom3=64]="Custom3",t[t.Custom4=128]="Custom4",t[t.Custom5=256]="Custom5",t[t.Custom6=512]="Custom6",t[t.Custom7=1024]="Custom7",t[t.Custom8=2048]="Custom8",t[t.Custom9=4096]="Custom9",t[t.Custom10=8192]="Custom10",t[t.Custom11=16384]="Custom11",t[t.Custom12=32768]="Custom12",t[t.All=65520]="All"}(ak||(ak={}));function poe(t){return[t.on("before-add",e=>{const i=e.item;if(i==null||t.includes(i))return Ce.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void e.preventDefault();i.onAdd()}),t.on("after-remove",e=>{const i=e.item;i.active&&(i.view.activeTool=null),i.destroy()})]}function b4(t){return t.visible&&t.getEditableFlag!=null&&t.getEditableFlag(Zs.USER)&&t.getEditableFlag(Zs.MANAGER)}function Us(t){return Fi(t.x,t.y)}function SD(t,e){var n;const i=(n=t instanceof HTMLElement?t:t.surface)==null?void 0:n.getBoundingClientRect();return i?Fi(e.clientX-i.left,e.clientY-i.top):Fi(0,0)}function TD(t,e){return e instanceof Event?SD(t,e):Us(e)}function MD(t){if(t instanceof Event)return!0;if(typeof t=="object"&&"type"in t)switch(t.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let foe=class{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(e,i){const n=()=>e.stopPropagation();switch(e.type){case"pointer-move":ck(e.pointerType)&&this._pointerLocations.set(e.pointerId,{x:e.x,y:e.y,pointerType:e.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(n(),e.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!hk(e))break;const s=Us(e),h=_p(s,e.pointerType,i.forEachTool);if(h==null)break;const f=h.manipulator,m=h.tool;f==null||m==null||!f.interactive||f.grabbable&&f.grabbableForEvent(e)||!f.grabbing||f.dragging||this._releaseManipulatorBeforeDragging(f,e,i),f!=null&&m!=null&&f.interactive&&f.grabbable&&f.grabbableForEvent(e)&&!f.grabbing&&(this._grabbedManipulators.set(e.pointerId,{manipulator:f,tool:m,start:s,pointerType:e.pointerType}),this._grabbedManipulators.size===1&&i.activeTool==null&&(this._revertToNullActiveTool=!0,i.setActiveTool(h.tool)),f.grabbing=!0,f.events.emit("grab-changed",{action:"start",pointerType:e.pointerType,screenPoint:s}),n());break}case"pointer-up":this._draggedManipulators.has(e.pointerId)||this._handlePointerEnd(e,i);break;case"pointer-drag":{if(!hk(e))break;const s=this._grabbedManipulators.get(e.pointerId),h=s==null?void 0:s.manipulator,f=s==null?void 0:s.tool;if(h==null||f==null)break;const m=Us(e);m.x=qr(m.x,0,i.view.width),m.y=qr(m.y,0,i.view.height);const v=s.start,x=this._draggedManipulators.get(e.pointerId);switch(e.action){case"start":case"update":e.action!=="update"&&this._grabbedManipulators.size!==1||(h.dragging=!0,x?h.events.emit("drag",{action:"update",start:v,screenPoint:m}):h.events.emit("drag",{action:"start",start:v,screenPoint:m,pointerType:e.pointerType}),this._draggedManipulators.set(e.pointerId,{tool:f,manipulator:h,start:v}));break;case"end":h.dragging=!1,x&&h.events.emit("drag",{action:"end",start:v,screenPoint:m}),this._draggedManipulators.delete(e.pointerId),this._handlePointerEnd(e,i)}n();break}case"immediate-click":{const s=Us(e),h=_p(s,e.pointerType,i.forEachTool);if(goe(e)||i.forEachTool(x=>{if((h==null||h.tool!==x||x.automaticManipulatorSelection)&&x.manipulators){let M=!1;x.manipulators.forEach(({manipulator:$})=>{$.selected&&($.selected=!1,M=!0)}),M&&x.onManipulatorSelectionChanged&&x.onManipulatorSelectionChanged()}}),h==null)break;const{manipulator:f,tool:m}=h;if(!f.interactive)break;f.selectable&&m.automaticManipulatorSelection&&(f.selected=!f.selected,m.onManipulatorSelectionChanged&&m.onManipulatorSelectionChanged());const v=e.native.shiftKey;f.events.emit("immediate-click",{screenPoint:s,button:e.button,pointerType:e.pointerType,shiftKey:v,stopPropagation:n}),R_(f,n);break}case"click":{const s=Us(e),h=_p(s,e.pointerType,i.forEachTool),f=h==null?void 0:h.manipulator;if(f==null||!f.interactive)break;const m=e.native.shiftKey;f.events.emit(e.type,{screenPoint:s,button:e.button,pointerType:e.pointerType,shiftKey:m}),n();break}case"double-click":{const s=Us(e),h=_p(s,e.pointerType,i.forEachTool),f=h!=null?h.manipulator:null;if(f==null||!f.interactive)break;const m=e.native.shiftKey;f.events.emit("double-click",{screenPoint:s,button:e.button,pointerType:e.pointerType,shiftKey:m,stopPropagation:n}),R_(f,n);break}case"immediate-double-click":{const s=Us(e),h=_p(s,e.pointerType,i.forEachTool),f=h!=null?h.manipulator:null;if(f==null||!f.interactive)break;const m=e.native.shiftKey;f.events.emit("immediate-double-click",{screenPoint:s,button:e.button,pointerType:e.pointerType,shiftKey:m,stopPropagation:n}),R_(f,n);break}}this._onFocusChange(i.forEachTool)}_releaseManipulatorBeforeDragging(e,i,n){e.grabbing=!1,e.events.emit("grab-changed",{action:"end",pointerType:i.pointerType,screenPoint:Us(i)}),this._grabbedManipulators.forEach(({manipulator:s},h)=>{s===e&&this._grabbedManipulators.delete(h)}),this._afterManipulatorRelease(n.setActiveTool)}_handlePointerEnd(e,i){var s;const n=(s=this._grabbedManipulators.get(e.pointerId))==null?void 0:s.manipulator;n!=null&&n.grabbing&&(n.grabbing=!1,n.events.emit("grab-changed",{action:"end",pointerType:e.pointerType,screenPoint:Us(e)}),this._grabbedManipulators.delete(e.pointerId),this._afterManipulatorRelease(i.setActiveTool))}_onFocusChange(e){this._updateCursor(),this._updateFocusedManipulatorTools(e)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=lk(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=lk(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(e){const i=new Set,n=new Set;this._grabbedManipulators.forEach(({tool:s})=>{i.add(s)}),this._hoveredManipulators.forEach(({tool:s})=>{n.add(s)}),e(s=>{s.hasGrabbedManipulators=i.has(s),s.hasHoveredManipulators=n.has(s);const h=this._grabbedManipulators.values(),f=DB(h,({tool:m})=>m===s);s.firstGrabbedManipulator=f!=null?f.manipulator:null})}clearPointers(e,{forEachTool:i,setActiveTool:n},s=!0,h){const f=(m,v)=>m===e&&(h==null||h===v);this._grabbedManipulators.forEach(({tool:m,manipulator:v,pointerType:x},M)=>{f(m,v)&&(this._grabbedManipulators.delete(M),v.grabbing=!1,v.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:x}))}),this._draggedManipulators.forEach(({tool:m,manipulator:v},x)=>{f(m,v)&&(this._draggedManipulators.delete(x),v.dragging=!1,v.events.emit("drag",{action:"cancel"}))}),s&&this._hoveredManipulators.forEach(({tool:m,manipulator:v},x)=>{f(m,v)&&(this._hoveredManipulators.delete(x),v.hovering=!1)}),this._afterManipulatorRelease(n),this._onFocusChange(i)}updateHoveredStateFromKnownPointers(e){this._pointerLocations.forEach((i,n)=>{this._updateHoveredStateForPointerAtScreenPosition(Fi(i.x,i.y),n,i.pointerType,e)})}handleHoverEvent(e,i){e.type!=="pointer-up"&&e.type!=="immediate-click"&&e.type!=="pointer-move"||!ck(e.pointerType)||this._updateHoveredStateForPointerAtScreenPosition(Us(e),e.pointerId,e.pointerType,i)}_updateHoveredStateForPointerAtScreenPosition(e,i,n,s){var m;let h=_p(e,n,s);const f=(m=this._hoveredManipulators.get(i))==null?void 0:m.manipulator;h==null||h.manipulator.interactive||(h=null),h!=null&&f===h.manipulator||(f!=null&&(f.hovering=!1),h!=null?(h.manipulator.hovering=!0,this._hoveredManipulators.set(i,h)):this._hoveredManipulators.delete(i),this._onFocusChange(s))}_afterManipulatorRelease(e){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(e(null),this._revertToNullActiveTool=!1)}};function lk(t){let e=null;return mw(t,({manipulator:i})=>!(i==null||!i.interactive)&&(i.grabbing&&i.grabCursor?(e=i.grabCursor,!0):!!i.cursor&&(e=i.cursor,!0))),e}function _p(t,e,i){let n=null;return i(s=>{if(s.manipulators==null||!b4(s))return!1;const h=s.manipulators.intersect(t,e);return h!=null&&(n={tool:s,manipulator:h},!0)}),n}function ck(t){return t==="mouse"}function hk(t){return t.pointerType!=="mouse"||t.button===0}function goe(t){return!!t.native.shiftKey}function R_(t,e){t!=null&&t.consumesClicks&&e()}const uk="attached",L_="tools",moe=1e3;let ka=class extends Re{constructor(e){super(e),this._updatingHandles=new uc,this._clock=g0,this._manipulatorState=new foe,this.tools=new Pe,this.cursor=null,this._interacting=!1,this._interactingTimeout=moe,this._interactingTimeoutHandle=null,this._forEachTool=i=>{for(const n of this.tools.items)if(i(n))return}}initialize(){this.addHandles([this.view.on(wD,e=>{this._handleInputEvent(e)},Ut.TOOL),...poe(this.tools),this.tools.on("before-add",({item:e})=>{this._updateToolEditableFlag(e)}),this.tools.on("before-remove",({item:e})=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.activeTool=null,this.tools.drain(e=>e.destroy()),this._clearInteractingTimeout(),this._interacting=!1,this._updatingHandles.destroy()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:e=>{this.activeTool=e},view:this.view}}set activeTool(e){if(e!=null&&!this.view.ready)return void Ce.getLogger(this).error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return;const i=this.activeTool;this._set("activeTool",e),i!=null&&i.deactivate(),e!=null&&e.activate(),this._removeIncompleteTools(e);for(const n of this.tools){this._updateToolEditableFlag(n);const s=b4(n);this.activeTool!=null&&s||this._manipulatorState.clearPointers(n,this._manipulatorStateEventArgs,!s)}this._updateCursor()}get updating(){return this._updatingHandles.updating||this.tools.some(e=>e.updating)}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeoutHandle=Rt(this._interactingTimeoutHandle)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeoutHandle=this._clock.setTimeout(()=>this._interacting=!1,this._interactingTimeout)}attach(){var e;this.view.type==="3d"?this.addHandles([Ee(()=>{const{state:i}=this.view;return"camera"in i&&i.camera},()=>this._forEachManipulator(i=>i.onViewChange())),(e=this.view.elevationProvider)==null?void 0:e.on("elevation-change",i=>this._forEachManipulator(n=>n.onElevationChange(i)))],uk):this.addHandles(Ee(()=>this.view.extent,()=>this._forEachManipulator(i=>i.onViewChange())))}detach(){this.activeTool=null,this.tools.removeAll(),this.removeHandles(uk),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(e){this._forEachTool(i=>{i.manipulators&&i.manipulators.forEach(({manipulator:n})=>e(n,i))})}_handleInputEvent(e){let i=!1;const n={...e,stopPropagation:()=>{i=!0,e.stopPropagation()}};this.activeTool!=null?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(n):this._forEachTool(s=>{!i&&s.visible&&s.handleInputEvent(n)}),!i&&e.type==="key-down"&&e.key==="Escape"&&this.activeTool&&(e.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(n,this._manipulatorStateEventArgs),i||this.activeTool==null||this.activeTool.handleInputEventAfter(n),this._manipulatorState.handleHoverEvent(n,this._forEachTool),this._updateCursor(),e.type==="pointer-move"&&(this._manipulatorState.hasFocusedManipulators()||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.removeHandles(L_),this._forEachTool(e=>{if(e instanceof Re){const i=Ee(()=>[e.cursor,e.visible,e.editable],()=>{b4(e)||this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()});this.addHandles(i,L_)}e.manipulators&&this.addHandles([e.manipulators.on("after-remove",i=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs,!0,i.item.manipulator)}),e.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()})],L_)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(e){var i;(i=e.setEditableFlag)==null||i.call(e,Zs.MANAGER,this.activeTool==null||e===this.activeTool)}_updateCursor(){let e=this._manipulatorState.cursor;e==null&&this._forEachTool(i=>!(i.cursor==null||!i.visible)&&(e=i.cursor,!0)),this._get("cursor")!==e&&this._set("cursor",e)}_removeIncompleteTools(e){this.tools.filter(i=>(e==null||i!==e)&&!i.created&&i.removeIncompleteOnCancel).forEach(i=>{this.tools.remove(i)})}get test(){}};_([T({constructOnly:!0,nonNullable:!0})],ka.prototype,"view",void 0),_([T({value:null})],ka.prototype,"activeTool",null),_([T({readOnly:!0,type:Pe})],ka.prototype,"tools",void 0),_([T({readOnly:!0})],ka.prototype,"cursor",void 0),_([T({readOnly:!0})],ka.prototype,"updating",null),_([T()],ka.prototype,"_interacting",void 0),_([T({readOnly:!0})],ka.prototype,"interacting",null),ka=_([Y("esri.views.ToolViewManager")],ka);let Zp=class extends Re{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",e.mapping==="standard"?this._detectedDeviceType="standard":yoe.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){const e=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<e.length?e[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return voe[this.deviceType]}};_([T({nonNullable:!0,readOnly:!0})],Zp.prototype,"nativeIndex",void 0),_([T({type:String,readOnly:!0})],Zp.prototype,"deviceType",null),_([T({type:Number,readOnly:!0})],Zp.prototype,"axisThreshold",null),Zp=_([Y("esri.views.input.gamepad.GamepadInputDevice")],Zp);const bT=Zp,yoe=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),voe={standard:.15,spacemouse:.025,unknown:0};let W1=class extends Re{constructor(...e){super(...e),this.devices=new Pe,this.enabledFocusMode="document"}};_([T({type:Pe.ofType(bT),readOnly:!0})],W1.prototype,"devices",void 0),_([T({type:["document","view","none"]})],W1.prototype,"enabledFocusMode",void 0),W1=_([Y("esri.views.input.gamepad.GamepadSettings")],W1);const boe=W1;let ub=class extends Re{constructor(){super(...arguments),this.gamepad=new boe}};_([T({readOnly:!0})],ub.prototype,"gamepad",void 0),ub=_([Y("esri.views.input.Input")],ub);const woe=ub,ED=()=>vt.respectPrefersReducedMotion&&window.matchMedia("(prefers-reduced-motion: reduce)").matches;let lh=class extends Re{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};_([T({type:Boolean,nonNullable:!0})],lh.prototype,"enabled",void 0),_([T({type:bT})],lh.prototype,"device",void 0),_([T({type:["pan","zoom"],nonNullable:!0})],lh.prototype,"mode",void 0),_([T({type:["forward-down","forward-up"],nonNullable:!0})],lh.prototype,"tiltDirection",void 0),_([T({type:Number,nonNullable:!0})],lh.prototype,"velocityFactor",void 0),lh=_([Y("esri.views.navigation.gamepad.GamepadSettings")],lh);const kD=lh;let Zu=class extends Re{constructor(e){super(e),this.browserTouchPanEnabled=!0,this.gamepad=new kD,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}get effectiveMomentumEnabled(){return this.momentumEnabled&&!ED()}};_([T({type:Boolean})],Zu.prototype,"browserTouchPanEnabled",void 0),_([T({type:kD,nonNullable:!0})],Zu.prototype,"gamepad",void 0),_([T({type:Boolean})],Zu.prototype,"momentumEnabled",void 0),_([T({type:Boolean})],Zu.prototype,"mouseWheelZoomEnabled",void 0),Zu=_([Y("esri.views.navigation.Navigation")],Zu);const $D=Zu,CD={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",knowledgegraphserver:"KnowledgeGraphServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer","3dtilesserver":"3DTilesServer",videoserver:"VideoServer"},ID=Object.values(CD),AD=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${ID.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),_oe=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^/\\n]+)\\/(${ID.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),xoe=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function l7e(t){return AD.test(t)}function wT(t){if(t==null)return null;const e=_r(t),i=(e==null?void 0:e.path.match(AD))||(e==null?void 0:e.path.match(_oe));if(!i)return null;const[,n,s,h,f]=i,m=s.indexOf("/");return{title:OD(m!==-1?s.slice(m+1):s),serverType:CD[h.toLowerCase()],sublayer:f!=null&&f!==""?parseInt(f,10):null,url:{path:n}}}function Soe(t){const e=_r(t).path.match(xoe);return e?{serviceUrl:e[1],sublayerId:Number(e[2])}:null}function OD(t){return(t=t.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+t.slice(1)}function c7e(t,e){const i=[];if(t){const n=wT(t);n!=null&&n.title&&i.push(n.title)}if(e){const n=OD(e);i.push(n)}if(i.length===2){if(i[0].toLowerCase().includes(i[1].toLowerCase()))return i[0];if(i[1].toLowerCase().includes(i[0].toLowerCase()))return i[1]}return i.join(" - ")}function h7e(t){let e=to(t,!0);return!!e&&(e=e.toLowerCase(),e.endsWith(".arcgis.com")&&(e.startsWith("services")||e.startsWith("tiles")||e.startsWith("features")))}function u7e(t,e){return t&&rO(sO(t,e))}function d7e(t){let{url:e}=t;if(!e)return{url:e};e=sO(e,t.logger);const i=_r(e),n=wT(i.path);let s;if(n!=null)n.sublayer!=null&&t.layer.layerId==null&&(s=n.sublayer),e=n.url.path;else if(t.nonStandardUrlAllowed){const h=Soe(i.path);h!=null&&(e=h.serviceUrl,s=h.sublayerId)}return{url:rO(e),layerId:s}}function p7e(t,e,i,n,s){Jf(e,n,"url",s),n.url&&t.layerId!=null&&(n.url=ww(n.url,i,t.layerId.toString()))}function f7e(t){if(!t)return!1;const e=t.toLowerCase(),i=e.includes("/services/"),n=e.includes("/mapserver/wmsserver"),s=e.includes("/imageserver/wmsserver"),h=e.includes("/wmsserver");return i&&(n||s||h)}function g7e(t,e,i){const n=PD(t),s=e,h=Toe(n,s,i);if(n){const f=Zw.deriveUnitFromSR(n,t.spatialReference).heightUnit;if(!i&&f!==n.heightUnit){const m=new fe("layerview:unmatched-height-unit",`The vertical units of the layer must match the horizontal units (${f})`,{horizontalUnit:f});return new fe("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:n,error:m})}}if(!Moe(t)||h===zr.Unsupported)return new fe("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:n});switch(h){case zr.Units:{const f=(n==null?void 0:n.heightUnit)||"unknown",m=(s==null?void 0:s.heightUnit)||"unknown",v=new fe("layerview:incompatible-height-unit",`The vertical units of the layer (${f}) must match the vertical units of the scene (${m})`,{layerUnit:f,sceneUnit:m});return new fe("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:n,sceneHeightModelInfo:s,error:v})}case zr.HeightModel:{const f=(n==null?void 0:n.heightModel)||"unknown",m=(s==null?void 0:s.heightModel)||"unknown",v=new fe("layerview:incompatible-height-model",`The height model of the layer (${f}) must match the height model of the scene (${m})`,{layerHeightModel:f,sceneHeightModel:m});return new fe("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:n,sceneHeightModelInfo:s,error:v})}case zr.CRS:{const f=(n==null?void 0:n.vertCRS)||"unknown",m=(s==null?void 0:s.vertCRS)||"unknown",v=new fe("layerview:incompatible-vertical-datum",`The vertical datum of the layer (${f}) must match the vertical datum of the scene (${m})`,{layerDatum:f,sceneDatum:m});return new fe("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:n,sceneHeightModelInfo:s,error:v})}}return null}function Toe(t,e,i){if(!dk(t)||!dk(e))return zr.Unsupported;if(t==null||e==null)return zr.Ok;if(!i&&t.heightUnit!==e.heightUnit)return zr.Units;if(t.heightModel!==e.heightModel)return zr.HeightModel;switch(t.heightModel){case"gravity-related-height":return zr.Ok;case"ellipsoidal":return t.vertCRS===e.vertCRS?zr.Ok:zr.CRS;default:return zr.Unsupported}}var zr;function dk(t){return t==null||t.heightModel!=null&&t.heightUnit!=null}function Moe(t){return"heightModelInfo"in t&&t.heightModelInfo!=null||t.spatialReference!=null||!ND(t)}function PD(t){var n;if(t.type==="integrated-mesh-3dtiles")return null;const e=t.url?wT(t.url):void 0;return!(((n=t.spatialReference)==null?void 0:n.vcsWkid)==null&&e!=null&&e.serverType==="ImageServer")&&RD(t)&&t.heightModelInfo?t.heightModelInfo:ND(t)?Zw.deriveUnitFromSR(koe,t.spatialReference):null}function RD(t){return"heightModelInfo"in t}function LD(t){if(t.type==="unknown"||!("capabilities"in t))return!1;switch(t.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function ND(t){return LD(t)?!!(t.capabilities&&t.capabilities.data&&t.capabilities.data.supportsZ):DD(t)}function Eoe(t){return t.layers!=null||DD(t)||LD(t)||RD(t)}function DD(t){switch(t.type){case"building-scene":case"elevation":case"integrated-mesh":case"integrated-mesh-3dtiles":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"catalog":case"catalog-footprint":case"catalog-dynamic-group":case"csv":case"dimension":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(t){t[t.Ok=0]="Ok",t[t.Units=1]="Units",t[t.HeightModel=2]="HeightModel",t[t.CRS=3]="CRS",t[t.Unsupported=4]="Unsupported"})(zr||(zr={}));const koe=new Zw({heightModel:"gravity-related-height"});var ra;function pk(t){return t===ra.Global?"global":"local"}(function(t){t[t.Global=1]="Global",t[t.Local=2]="Local"})(ra||(ra={}));let w4,N_=null;async function $oe(t){N_||(N_=be(()=>import("./geometryServiceUtils-WFbq5_gF.js"),[],import.meta.url).then(e=>w4=e)),await N_,Zt(t)}async function zD(t,e,i,n){if(!t)return null;const s=t.spatialReference;return ol()||ks(s,e)?Wr(t,e):w4?w4.projectGeometry(t,e,i,n):(await Promise.race([$oe(n),Qa(n)]),zD(t,e,i,n))}let Ht=class extends Re{constructor(e){super(e),this.required={tileInfo:!1,heightModelInfo:!1,extent:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=ms(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference??this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){var n,s,h,f;const e=(n=this.map)==null?void 0:n.call(this),i=[];return this.priorityCollection!=null&&i.push(this.priorityCollection),i.push({parent:e==null?void 0:e.basemap,layers:(s=e==null?void 0:e.basemap)==null?void 0:s.baseLayers},{layers:e==null?void 0:e.layers},{parent:e==null?void 0:e.ground,layers:(h=e==null?void 0:e.ground)==null?void 0:h.layers},{parent:e==null?void 0:e.basemap,layers:(f=e==null?void 0:e.basemap)==null?void 0:f.referenceLayers}),i}get _allLayers(){return this._collectLayers(this.mapCollections)}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};const{layers:e,updating:i}=this._allLayers;let n=null;for(const h of e){const f=this._getSupportedSpatialReferences(h);if(f.length>0){const m=this._narrowDownSpatialReferenceCandidates(n,f);m!=null&&(n=m)}if(n!=null&&n.length===1)break}if(i&&(n==null||n.length!==1))return{updating:!0};const s=this._pickSpatialReferenceCandidate(n);return{spatialReference:(s==null?void 0:s.spatialReference)??null,viewingMode:(s==null?void 0:s.viewingMode)??null,updating:!1}}get _tileInfoTask(){var n,s,h,f,m,v,x;if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const{layers:e,updating:i}=this._collectLayers([{parent:(s=(n=this.map)==null?void 0:n.call(this))==null?void 0:s.basemap,layers:(m=(f=(h=this.map)==null?void 0:h.call(this))==null?void 0:f.basemap)==null?void 0:m.baseLayers},{layers:(x=(v=this.map)==null?void 0:v.call(this))==null?void 0:x.layers}]);if(e&&e.length>0&&"tileInfo"in e[0]){const M=e[0].tileInfo;return{tileInfo:M!=null&&M.spatialReference.equals(this.spatialReference)?M:null,updating:!1}}return{updating:i}}get _heightModelInfoTask(){var n,s,h;if(!this.required.heightModelInfo||this.suspended&&((n=this._get("_heightModelInfoTask"))!=null&&n.heightModelInfo))return this._get("_heightModelInfoTask")??{updating:!1};const{layers:e,updating:i}=this._allLayers;for(const f of e)if(Eoe(f)){const m=PD(f);if(m)return{heightModelInfo:m,vcsWkid:(s=f.spatialReference)==null?void 0:s.vcsWkid,latestVcsWkid:(h=f.spatialReference)==null?void 0:h.latestVcsWkid,updating:!1}}return{updating:i}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const e=this._allLayers,i=e.updating,n=[];for(const s of e.layers){const h="fullExtents"in s&&s.fullExtents||(s.fullExtent!=null?[s.fullExtent]:[]),f=this.requiresExtentInSpatialReference?null:h[0],m=h.find(v=>v.spatialReference.equals(this.spatialReference))??f;if(m)return{candidates:[{extent:m,layer:s}],updating:!1};if(this._getSupportedSpatialReferences(s).length>0)for(const v of h)n.push({extent:v,layer:s})}return{candidates:n,updating:i}}get _extentTask(){const{candidates:e,updating:i}=this._extentCandidatesTask;if(i)return{updating:i};if(e==null||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const n=this._pickExtentCandidate(e),s=this.spatialReference;return n.extent.equals(this._projectExtentTask.input)&&s.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=ms(this._projectExtentTask.task)),this._projectExtentTask={input:n.extent.clone(),output:null,spatialReference:s.clone(),task:$m(async h=>{try{const f=await zD(n.extent,s,"portalItem"in n.layer?n.layer.portalItem:void 0,h);this._projectExtentTask={...this._projectExtentTask,task:null,output:f}}catch{if(Ss(h))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,i){if(e==null)return i;const n=new Array;for(const s of e)for(const h of i){if(!s.spatialReference.equals(h.spatialReference))continue;const f=Ioe(s.viewingMode,h.viewingMode);if(f!==!1){n.push({spatialReference:s.spatialReference,viewingMode:f});break}}return n.length>0?n:null}_pickSpatialReferenceCandidate(e){const i=this.defaultSpatialReference;return e==null||e.length<1?i?{spatialReference:i,viewingMode:null}:null:(i!=null&&e.length>1&&e.some(({spatialReference:n})=>n.equals(i))&&(e=e.filter(({spatialReference:n})=>n.equals(i))),e.length>1&&e.some(({viewingMode:n})=>n!==ra.Local)&&(e=e.filter(({viewingMode:n})=>n!==ra.Local)),e[0])}_getSupportedSpatialReferences(e){const i="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(i.length===0)return[];const n=[];for(const s of i){const h=this.getSpatialReferenceSupport(s,e);if(h!=null){const f=h.constraints??[{spatialReference:s,viewingMode:null}];for(const{spatialReference:m,viewingMode:v}of f)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!m.equals(this.userSpatialReference)||n.push({spatialReference:m,viewingMode:v})}}return n}_pickExtentCandidate(e){const i=this.spatialReference;return e.find(({extent:n})=>i.equals(n.spatialReference))||e[0]}_collectLayers(e){var n;if(this._loadMaybe((n=this.map)==null?void 0:n.call(this))!=="loaded")return{layers:[],updating:!0};const i=new Coe;for(const s of e)if(this._collectCollection(s,i),i.preloading===this.sourcePreloadCount)break;return{layers:i.layers,updating:i.updating}}_collectCollection(e,i){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return i.updating=!0,void++i.preloading;case"failed":return}for(const n of e.layers){switch(this._loadMaybe(n)){case"failed":continue;case"loading":i.updating=!0,++i.preloading;break;case"loaded":i.updating||i.layers.push(n),"layers"in n&&this._collectCollection({layers:n.layers},i)}if(i.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e&&e.loadStatus!=null?e.loadStatus==="not-loaded"?(e.load().catch(i=>{Zr(i)||console.log(i)}),"loading"):e.loadStatus:"loaded"}};_([T()],Ht.prototype,"required",void 0),_([T({constructOnly:!0})],Ht.prototype,"map",void 0),_([T({constructOnly:!0})],Ht.prototype,"getSpatialReferenceSupport",void 0),_([T()],Ht.prototype,"defaultSpatialReference",void 0),_([T()],Ht.prototype,"userSpatialReference",void 0),_([T()],Ht.prototype,"sourcePreloadCount",void 0),_([T()],Ht.prototype,"priorityCollection",void 0),_([T()],Ht.prototype,"requiresExtentInSpatialReference",void 0),_([T()],Ht.prototype,"suspended",void 0),_([T({readOnly:!0})],Ht.prototype,"ready",null),_([T({readOnly:!0})],Ht.prototype,"heightModelInfoReady",null),_([T({readOnly:!0})],Ht.prototype,"spatialReference",null),_([T({readOnly:!0})],Ht.prototype,"extent",null),_([T({readOnly:!0})],Ht.prototype,"heightModelInfo",null),_([T({readOnly:!0})],Ht.prototype,"vcsWkid",null),_([T({readOnly:!0})],Ht.prototype,"latestVcsWkid",null),_([T({readOnly:!0})],Ht.prototype,"viewingMode",null),_([T({readOnly:!0})],Ht.prototype,"tileInfo",null),_([T({readOnly:!0})],Ht.prototype,"mapCollections",null),_([T({readOnly:!0})],Ht.prototype,"_allLayers",null),_([T({readOnly:!0})],Ht.prototype,"_spatialReferenceTask",null),_([T({readOnly:!0})],Ht.prototype,"_tileInfoTask",null),_([T({readOnly:!0})],Ht.prototype,"_heightModelInfoTask",null),_([T({readOnly:!0})],Ht.prototype,"_extentCandidatesTask",null),_([T()],Ht.prototype,"_extentTask",null),_([T()],Ht.prototype,"_projectExtentTask",void 0),Ht=_([Y("esri.views.support.DefaultsFromMap")],Ht);let Coe=class{constructor(){this.layers=new Array,this.preloading=-1,this.updating=!1}};function Ioe(t,e){return t!=null?e!=null?t===e&&t:t:e}var Z1;let Be=Z1=class extends ln.EventedMixin(Gw(Re)){constructor(t){super(t),this._userSpatialReference=null,this._cursor=null,this.handles=new f0,this.updatingHandles=new uc,this.allLayerViews=new qg({getCollections:()=>{var e,i,n;return[(e=this.basemapView)==null?void 0:e.baseLayerViews,(i=this.groundView)==null?void 0:i.layerViews,this.layerViews,(n=this.basemapView)==null?void 0:n.referenceLayerViews]},getChildrenFunction:Ooe}),this.groundView=null,this.basemapView=null,this.fatalError=null,this.graphics=new Id,this.analyses=new b2,this.typeSpecificPreconditionsReady=!0,this.layerViews=new Pe,this.magnifier=new fD,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.timeExtent=null,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new woe,this.navigation=new $D,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new Qse(this),this.persistableViewModels=new Pe,this._isValid=!1,this._readyCycleForced=!1,this._lockedSpatialReference=null,this._userTimeZone=null,this._lockedTimeZone=null,this.theme=null,this.handles.add(Ee(()=>this.preconditionsReady,e=>{var n,s;const i=this.ready;if(e?(this._lockedSpatialReference=this.spatialReference,this._lockedTimeZone=this.timeZone,Z1.views.add(this)):(this._lockedSpatialReference=null,Z1.views.remove(this)),this.notifyChange("spatialReference"),!e&&i)(n=this.toolViewManager)==null||n.detach(),this.analysisViewManager!=null&&this.analysisViewManager.detach(),(s=this.layerViewManager)==null||s.clear(),this._teardown();else if(e&&!i){try{this._startup()}catch(h){return void queueMicrotask(()=>{this.fatalError=new fe("startup-error",null,h)})}this.analysisViewManager!=null&&this.analysisViewManager.attach(),this.toolViewManager.attach()}},Ya))}initialize(){this.addResolvingPromise(Promise.all([this.loadAsyncDependencies(),this.validate()]).then(()=>(this._isValid=!0,Zh(()=>this.ready)))),this.basemapView=new ah({view:this}),this.layerViewManager=new Nse({view:this,layerViewImporter:{importLayerView:t=>this.importLayerView(t),hasLayerViewModule:t=>this.hasLayerViewModule(t)},supportsGround:this.supportsGround}),this.toolViewManager=new ka({view:this}),this._setupSpatialReferenceLogger(),this.selectionManager=new Yse({view:this}),this.addHandles([Ee(()=>this.initialExtentRequired,t=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:t},xi),Ee(()=>this.ready,t=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=t,this.defaultsFromMap.userSpatialReference=t?this.spatialReference:this._userSpatialReference)},Ya),Ee(()=>this._userSpatialReference,t=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=t)},xi)])}_setupSpatialReferenceLogger(){let t=null;this.addHandles([Ee(()=>{var e;return(e=this.defaultsFromMap)==null?void 0:e.ready},e=>{var n;const i=((n=this.map)==null?void 0:n.allLayers.length)>0;if(e&&!this.spatialReference&&i){if(t!=null)return;const s=ut(()=>t=ms(t));t=$m(async h=>{try{await F6(this.spatialReferenceWarningDelay,null,h)}catch{return}finally{t=null}Ce.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),this.addHandles(s,"spatial-reference-logger-task")}else this.removeHandles("spatial-reference-logger-task")},{sync:!0})])}destroy(){var t,e;this.destroyed||(Z1.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=yt(this.graphics),this.analyses=yt(this.analyses),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),yt(this.analysisViewManager),this.toolViewManager=yt(this.toolViewManager),this.layerViewManager=yt(this.layerViewManager),this.selectionManager=yt(this.selectionManager),this.basemapView=yt(this.basemapView),(t=this.groundView)==null||t.destroy(),(e=this.layerViews)==null||e.forEach(i=>i.destroy()),this.layerViews.length=0,this.invalidate(),this._emitter.clear(),this.handles.destroy(),this.map=yt(this.map),this.updatingHandles.destroy())}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return Ce.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){var t;return(t=this.toolViewManager)==null?void 0:t.activeTool}set activeTool(t){this.toolViewManager&&(this.toolViewManager.activeTool=t)}get animation(){return this._get("animation")}set animation(t){this._set("animation",t)}get center(){return null}get _defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new Ht({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:(t,e)=>this.getSpatialReferenceSupport(t,e),...this._defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(t){this._set("extent",t)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){var t;return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||na.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._lockedSpatialReference&&!((t=this.defaultsFromMap)!=null&&t.ready)||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(t){t!==this._get("map")&&(t!=null&&t.destroyed&&(Ce.getLogger(this).warn("#map","The provided map is already destroyed",{map:t}),t=null),na.isLoadable(t)&&t.load().catch(()=>{}),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._lockedSpatialReference=null),this._set("map",t))}get spatialReference(){var e,i;const t=this._userSpatialReference||this._lockedSpatialReference||this.getDefaultSpatialReference()||null;if(t&&((i=(e=this.defaultsFromMap)==null?void 0:e.required)!=null&&i.heightModelInfo)){const n=t.clone();return n.vcsWkid=this.defaultsFromMap.vcsWkid,n.latestVcsWkid=this.defaultsFromMap.latestVcsWkid,n}return t}set spatialReference(t){const e=!bi(t,this._get("spatialReference"));this._set("_userSpatialReference",t),e&&(this._set("spatialReference",t),this._spatialReferenceChanged(t))}_spatialReferenceChanged(t){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get timeZone(){return this._userTimeZone??this._lockedTimeZone??this.getDefaultTimeZone()??Xa}set timeZone(t){const e=new Set(["etc/utc","etc/gmt","gmt"]),i=new Set(Intl.supportedValuesOf("timeZone").map(n=>n.toLowerCase()));this._userTimeZone=t,t===Xa||t===zS||e.has(t.toLowerCase())||i.has(t.toLowerCase())||Ce.getLogger(this).warn("#timeZone",`the parsed value '${t}' may not be a valid IANA time zone`)}get tools(){var t;return(t=this.toolViewManager)==null?void 0:t.tools}get initialExtent(){var t;return(t=this.defaultsFromMap)==null?void 0:t.extent}get cursor(){var t;return((t=this.toolViewManager)==null?void 0:t.cursor)??this._cursor??"default"}set cursor(t){this._cursor=t,this.notifyChange("cursor")}get size(){return[this.width,this.height]}get effectiveTheme(){return this.theme??new v4}whenLayerView(t){var e;return((e=this.layerViewManager)==null?void 0:e.whenLayerView(t))??Promise.reject()}getDefaultSpatialReference(){var t;return(t=this.defaultsFromMap)==null?void 0:t.spatialReference}getDefaultHeightModelInfo(){var t;return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??((t=this.defaultsFromMap)==null?void 0:t.heightModelInfo)??null}getDefaultTimeZone(){return null}importLayerView(t){throw new fe("importLayerView() not implemented")}hasLayerViewModule(t){return!1}async validate(){}async loadAsyncDependencies(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(t){return this.getSpatialReferenceSupport(t)!=null}when(t,e){return this.isResolved()&&!this.ready&&Ce.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(t,e)}forceReadyCycle(){this.ready&&(nr(()=>this.destroyed||this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(t){this.toolViewManager.tools.add(t),this.activeTool=t}tryFatalErrorRecovery(){this.fatalError=null}};Be.views=new Pe,_([T()],Be.prototype,"_userSpatialReference",void 0),_([T()],Be.prototype,"activeTool",null),_([T({readOnly:!0})],Be.prototype,"allLayerViews",void 0),_([T()],Be.prototype,"groundView",void 0),_([T()],Be.prototype,"animation",null),_([T()],Be.prototype,"basemapView",void 0),_([T()],Be.prototype,"center",null),_([T({readOnly:!0})],Be.prototype,"_defaultsFromMapSettings",null),_([T()],Be.prototype,"defaultsFromMap",null),_([T()],Be.prototype,"fatalError",void 0),_([T({type:Lt})],Be.prototype,"extent",null),_([T(Xx(Id,"graphics"))],Be.prototype,"graphics",void 0),_([T(Xx(b2,"analyses"))],Be.prototype,"analyses",void 0),_([T({readOnly:!0,type:Zw})],Be.prototype,"heightModelInfo",null),_([T({readOnly:!0})],Be.prototype,"interacting",null),_([T({readOnly:!0})],Be.prototype,"navigating",null),_([T({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_lockedSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],Be.prototype,"preconditionsReady",null),_([T({readOnly:!0})],Be.prototype,"typeSpecificPreconditionsReady",void 0),_([T({type:Pe,readOnly:!0})],Be.prototype,"layerViews",void 0),_([T()],Be.prototype,"resolution",null),_([T({type:fD})],Be.prototype,"magnifier",void 0),_([T({value:null,type:jne})],Be.prototype,"map",null),_([T()],Be.prototype,"padding",void 0),_([T({readOnly:!0})],Be.prototype,"ready",void 0),_([T({type:tt})],Be.prototype,"spatialReference",null),_([T()],Be.prototype,"spatialReferenceWarningDelay",void 0),_([T()],Be.prototype,"stationary",null),_([T({readOnly:!0})],Be.prototype,"supportsGround",void 0),_([T({type:Ww})],Be.prototype,"timeExtent",void 0),_([T({type:String,nonNullable:!0})],Be.prototype,"timeZone",null),_([T()],Be.prototype,"tools",null),_([T()],Be.prototype,"toolViewManager",void 0),_([T({readOnly:!0})],Be.prototype,"type",void 0),_([T({type:Number})],Be.prototype,"scale",void 0),_([T({readOnly:!0})],Be.prototype,"updating",void 0),_([T({readOnly:!0})],Be.prototype,"initialExtentRequired",void 0),_([T({readOnly:!0})],Be.prototype,"initialExtent",null),_([T()],Be.prototype,"cursor",null),_([T({readOnly:!0})],Be.prototype,"input",void 0),_([T({type:$D,nonNullable:!0})],Be.prototype,"navigation",void 0),_([T()],Be.prototype,"layerViewManager",void 0),_([T()],Be.prototype,"analysisViewManager",void 0),_([T()],Be.prototype,"selectionManager",void 0),_([T()],Be.prototype,"width",void 0),_([T()],Be.prototype,"height",void 0),_([T({readOnly:!0})],Be.prototype,"resizing",void 0),_([T({value:null,readOnly:!0})],Be.prototype,"size",null),_([T({readOnly:!0})],Be.prototype,"suspended",void 0),_([T({readOnly:!0})],Be.prototype,"viewEvents",void 0),_([T({readOnly:!0})],Be.prototype,"persistableViewModels",void 0),_([T()],Be.prototype,"_isValid",void 0),_([T()],Be.prototype,"_readyCycleForced",void 0),_([T()],Be.prototype,"_lockedSpatialReference",void 0),_([T()],Be.prototype,"_userTimeZone",void 0),_([T()],Be.prototype,"_lockedTimeZone",void 0),_([T({type:v4})],Be.prototype,"theme",void 0),_([T({readOnly:!0,type:v4})],Be.prototype,"effectiveTheme",null),Be=Z1=_([Y("esri.views.View")],Be);const Aoe=Be;function Ooe(t){return t.layerViews}function nt(){return[0,0]}function Poe(t){return[t[0],t[1]]}function ws(t,e){return[t,e]}function FD(t,e=nt()){const i=Math.min(2,t.length);for(let n=0;n<i;++n)e[n]=t[n];return e}function Roe(t,e){return new Float64Array(t,e,2)}function jD(){return nt()}function GD(){return ws(1,1)}function VD(){return ws(1,0)}function HD(){return ws(0,1)}const BD=jD(),Loe=GD(),Noe=VD(),UD=HD();Object.freeze(Object.defineProperty({__proto__:null,ONES:Loe,UNIT_X:Noe,UNIT_Y:UD,ZEROS:BD,clone:Poe,create:nt,createView:Roe,fromArray:FD,fromValues:ws,ones:GD,unitX:VD,unitY:HD,zeros:jD},Symbol.toStringTag,{value:"Module"}));let ch=class extends g2{constructor(e){super(e),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=Ts(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state==="finished"||this.state==="stopped"}stop(){var e;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),(e=this._resolver)==null||e.reject(new fe("ViewAnimation stopped")))}finish(){var e;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),(e=this._resolver)==null||e.resolve())}update(e,i){i||(i=Tc(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",i)}};_([T({readOnly:!0})],ch.prototype,"done",null),_([T({readOnly:!0,type:String})],ch.prototype,"state",void 0),_([T()],ch.prototype,"target",void 0),ch=_([Y("esri.views.ViewAnimation")],ch),function(t){t.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(ch||(ch={}));const _4=ch;function Ad(t,e){return t[0]=e[0],t[1]=e[1],t}function en(t,e,i){return t[0]=e,t[1]=i,t}function _T(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t}function Mi(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t}function qD(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t}function WD(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t}function Doe(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function zoe(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function Foe(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t}function joe(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t}function Goe(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function E0(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t}function no(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t}function kc(t,e){const i=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(i*i+n*n)}function sa(t,e){const i=e[0]-t[0],n=e[1]-t[1];return i*i+n*n}function Qf(t){const e=t[0],i=t[1];return Math.sqrt(e*e+i*i)}function tl(t){const e=t[0],i=t[1];return e*e+i*i}function ZD(t,e){return t[0]=-e[0],t[1]=-e[1],t}function Voe(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function $2(t,e){const i=e[0],n=e[1];let s=i*i+n*n;return s>0&&(s=1/Math.sqrt(s),t[0]=e[0]*s,t[1]=e[1]*s),t}function ll(t,e){return t[0]*e[0]+t[1]*e[1]}function JD(t,e,i){const n=e[0]*i[1]-e[1]*i[0];return t[0]=t[1]=0,t[2]=n,t}function s3(t,e,i,n){const s=e[0],h=e[1];return t[0]=s+n*(i[0]-s),t[1]=h+n*(i[1]-h),t}function Hoe(t,e){e=e||1;const i=2*Sm()*Math.PI;return t[0]=Math.cos(i)*e,t[1]=Math.sin(i)*e,t}function Boe(t,e,i){const n=e[0],s=e[1];return t[0]=i[0]*n+i[2]*s,t[1]=i[1]*n+i[3]*s,t}function Ga(t,e,i){const n=e[0],s=e[1];return t[0]=i[0]*n+i[2]*s+i[4],t[1]=i[1]*n+i[3]*s+i[5],t}function Uoe(t,e,i){const n=e[0],s=e[1];return t[0]=i[0]*n+i[3]*s+i[6],t[1]=i[1]*n+i[4]*s+i[7],t}function qoe(t,e,i){const n=e[0],s=e[1];return t[0]=i[0]*n+i[4]*s+i[12],t[1]=i[1]*n+i[5]*s+i[13],t}function KD(t,e,i,n){const s=e[0]-i[0],h=e[1]-i[1],f=Math.sin(n),m=Math.cos(n);return t[0]=s*m-h*f+i[0],t[1]=s*f+h*m+i[1],t}function YD(t,e){const i=t[0],n=t[1],s=e[0],h=e[1];let f=i*i+n*n;f>0&&(f=1/Math.sqrt(f));let m=s*s+h*h;m>0&&(m=1/Math.sqrt(m));const v=(i*s+n*h)*f*m;return v>1?0:v<-1?Math.PI:Math.acos(v)}function Woe(t){return"vec2("+t[0]+", "+t[1]+")"}function x4(t,e){return t[0]===e[0]&&t[1]===e[1]}function XD(t,e){const i=t[0],n=t[1],s=e[0],h=e[1],f=Ti();return Math.abs(i-s)<=f*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(n-h)<=f*Math.max(1,Math.abs(n),Math.abs(h))}function S4(t,e,i,n,s){let h=e[0]-i[0],f=e[1]-i[1];const m=(n[0]*h+n[1]*f)*(s-1);return h=n[0]*m,f=n[1]*m,t[0]=e[0]+h,t[1]=e[1]+f,t}const Zoe=Qf,o3=Mi,Joe=qD,Koe=WD,Yoe=kc,Xoe=sa,Qoe=tl;Object.freeze(Object.defineProperty({__proto__:null,add:_T,angle:YD,ceil:Doe,copy:Ad,cross:JD,dist:Yoe,distance:kc,div:Koe,divide:WD,dot:ll,equals:XD,exactEquals:x4,floor:zoe,inverse:Voe,len:Zoe,length:Qf,lerp:s3,max:joe,min:Foe,mul:Joe,multiply:qD,negate:ZD,normalize:$2,projectAndScale:S4,random:Hoe,rotate:KD,round:Goe,scale:E0,scaleAndAdd:no,set:en,sqrDist:Xoe,sqrLen:Qoe,squaredDistance:sa,squaredLength:tl,str:Woe,sub:o3,subtract:Mi,transformMat2:Boe,transformMat2d:Ga,transformMat3:Uoe,transformMat4:qoe},Symbol.toStringTag,{value:"Module"}));function eae(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function tae(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function iae(t,e,i,n,s,h,f){return t[0]=e,t[1]=i,t[2]=n,t[3]=s,t[4]=h,t[5]=f,t}function a3(t,e){const i=e[0],n=e[1],s=e[2],h=e[3],f=e[4],m=e[5];let v=i*h-n*s;return v?(v=1/v,t[0]=h*v,t[1]=-n*v,t[2]=-s*v,t[3]=i*v,t[4]=(s*m-h*f)*v,t[5]=(n*f-i*m)*v,t):null}function nae(t){return t[0]*t[3]-t[1]*t[2]}function QD(t,e,i){const n=e[0],s=e[1],h=e[2],f=e[3],m=e[4],v=e[5],x=i[0],M=i[1],$=i[2],I=i[3],P=i[4],L=i[5];return t[0]=n*x+h*M,t[1]=s*x+f*M,t[2]=n*$+h*I,t[3]=s*$+f*I,t[4]=n*P+h*L+m,t[5]=s*P+f*L+v,t}function l3(t,e,i){const n=e[0],s=e[1],h=e[2],f=e[3],m=e[4],v=e[5],x=Math.sin(i),M=Math.cos(i);return t[0]=n*M+h*x,t[1]=s*M+f*x,t[2]=n*-x+h*M,t[3]=s*-x+f*M,t[4]=m,t[5]=v,t}function xT(t,e,i){const n=e[0],s=e[1],h=e[2],f=e[3],m=e[4],v=e[5],x=i[0],M=i[1];return t[0]=n*x,t[1]=s*x,t[2]=h*M,t[3]=f*M,t[4]=m,t[5]=v,t}function em(t,e,i){const n=e[0],s=e[1],h=e[2],f=e[3],m=e[4],v=e[5],x=i[0],M=i[1];return t[0]=n,t[1]=s,t[2]=h,t[3]=f,t[4]=n*x+h*M+m,t[5]=s*x+f*M+v,t}function ez(t,e){const i=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=i,t[2]=-i,t[3]=n,t[4]=0,t[5]=0,t}function tz(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function ST(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function rae(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function sae(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+1)}function oae(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t}function iz(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t}function aae(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t}function lae(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t[3]=e[3]+i[3]*n,t[4]=e[4]+i[4]*n,t[5]=e[5]+i[5]*n,t}function cae(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function hae(t,e){const i=t[0],n=t[1],s=t[2],h=t[3],f=t[4],m=t[5],v=e[0],x=e[1],M=e[2],$=e[3],I=e[4],P=e[5],L=Ti();return Math.abs(i-v)<=L*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(n-x)<=L*Math.max(1,Math.abs(n),Math.abs(x))&&Math.abs(s-M)<=L*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(h-$)<=L*Math.max(1,Math.abs(h),Math.abs($))&&Math.abs(f-I)<=L*Math.max(1,Math.abs(f),Math.abs(I))&&Math.abs(m-P)<=L*Math.max(1,Math.abs(m),Math.abs(P))}const uae=QD,dae=iz;Object.freeze(Object.defineProperty({__proto__:null,add:oae,copy:eae,determinant:nae,equals:hae,exactEquals:cae,frob:sae,fromRotation:ez,fromScaling:tz,fromTranslation:ST,identity:tae,invert:a3,mul:uae,multiply:QD,multiplyScalar:aae,multiplyScalarAndAdd:lae,rotate:l3,scale:xT,set:iae,str:rae,sub:dae,subtract:iz,translate:em},Symbol.toStringTag,{value:"Module"}));function Yo(){return[1,0,0,1,0,0]}function nz(t){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function pae(t,e,i,n,s,h){return[t,e,i,n,s,h]}function fae(t,e){return new Float64Array(t,e,6)}const rz=Yo();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:rz,clone:nz,create:Yo,createView:fae,fromValues:pae},Symbol.toStringTag,{value:"Module"}));const Dy={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new br({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:tt.WebMercator}),minus180Line:new br({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:tt.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new br({paths:[[[180,-180],[180,180]]],spatialReference:tt.WGS84}),minus180Line:new br({paths:[[[-180,-180],[-180,180]]],spatialReference:tt.WGS84})}};function Sd(t,e){return Math.ceil((t-e)/(2*e))}function sz(t,e){const i=$g(t);for(const n of i)for(const s of n)s[0]+=e;return t}function $g(t){return SS(t)?t.rings:t.paths}function c3(t,e){return e?{...e,query:{...t??{},...e.query}}:{query:t}}function Bm(t){return typeof t=="string"?_r(t):_e(t)}function h3(t,e,i){const n={};for(const s in t){if(s==="declaredClass")continue;const h=t[s];if(h!=null&&typeof h!="function")if(Array.isArray(h))n[s]=h.map(f=>h3(f));else if(typeof h=="object")if(h.toJSON){const f=h.toJSON(i==null?void 0:i[s]);n[s]=JSON.stringify(f)}else n[s]=JSON.stringify(h);else n[s]=h}return n}async function gae(t,e,i,n){const s=Bm(t),h=e[0].spatialReference,f={...n,responseType:"json",query:{...s.query,f:"json",sr:Qb(h),target:JSON.stringify({geometryType:Em(e[0]),geometries:e}),cutter:JSON.stringify(i)}},m=await zi(s.path+"/cut",f),{cutIndexes:v,geometries:x=[]}=m.data;return{cutIndexes:v,geometries:x.map(M=>{const $=Bd(M);return $.spatialReference=h,$})}}function mae(t){return{geometryType:Em(t[0]),geometries:t.map(e=>e.toJSON())}}function oz(t,e,i){const n=KJ(e);return t.map(s=>{const h=n.fromJSON(s);return h.spatialReference=i,h})}async function yae(t,e,i){const n=typeof t=="string"?_r(t):t,s=e[0].spatialReference,h=Em(e[0]),f={...i,query:{...n.query,f:"json",sr:Qb(s),geometries:JSON.stringify(mae(e))}},{data:m}=await zi(n.path+"/simplify",f);return oz(m.geometries,h,s)}const az=()=>Ce.getLogger("esri.geometry.support.normalizeUtils");function vae(t){return t.type==="polygon"}function bae(t){return t[0].type==="polygon"}function wae(t){return t[0].type==="polyline"}function fk(t){const e=[];let i=0,n=0;for(let s=0;s<t.length;s++){const h=t[s];let f=null;for(let m=0;m<h.length;m++)f=h[m],e.push(f),m===0?(i=f[0],n=i):(i=Math.min(i,f[0]),n=Math.max(n,f[0]));f&&e.push([(i+n)/2,0])}return e}function _ae(t,e){if(!(t instanceof br||t instanceof En)){const s="straightLineDensify: the input geometry is neither polyline nor polygon";throw az().error(s),new fe(s)}const i=$g(t),n=[];for(const s of i){const h=[];n.push(h),h.push([s[0][0],s[0][1]]);for(let f=0;f<s.length-1;f++){const m=s[f][0],v=s[f][1],x=s[f+1][0],M=s[f+1][1],$=Math.sqrt((x-m)*(x-m)+(M-v)*(M-v)),I=(M-v)/$,P=(x-m)/$,L=$/e;if(L>1){for(let W=1;W<=L-1;W++){const K=W*e,J=P*K+m,te=I*K+v;h.push([J,te])}const z=($+Math.floor(L-1)*e)/2,F=P*z+m,U=I*z+v;h.push([F,U])}h.push([x,M])}}return vae(t)?new En({rings:n,spatialReference:t.spatialReference}):new br({paths:n,spatialReference:t.spatialReference})}function gk(t,e,i){if(e){const n=_ae(t,1e6);t=Oh(n,!0)}return i&&(t=sz(t,i)),t}function mk(t,e,i){if(Array.isArray(t)){const n=t[0];if(n>e){const s=Sd(n,e);t[0]=n+s*(-2*e)}else if(n<i){const s=Sd(n,i);t[0]=n+s*(-2*i)}}else{const n=t.x;if(n>e){const s=Sd(n,e);t=t.clone().offset(s*(-2*e),0)}else if(n<i){const s=Sd(n,i);t=t.clone().offset(s*(-2*i),0)}}return t}function xae(t,e){let i=-1;for(let n=0;n<e.cutIndexes.length;n++){const s=e.cutIndexes[n],h=e.geometries[n],f=$g(h);for(let m=0;m<f.length;m++){const v=f[m];v.some(x=>{if(x[0]<180)return!0;{let M=0;for(let I=0;I<v.length;I++){const P=v[I][0];M=P>M?P:M}M=Number(M.toFixed(9));const $=-360*Sd(M,180);for(let I=0;I<v.length;I++){const P=h.getPoint(m,I);h.setPoint(m,I,P.clone().offset($,0))}return!0}})}if(s===i){if(bae(t))for(const m of $g(h))t[s]=t[s].addRing(m);else if(wae(t))for(const m of $g(h))t[s]=t[s].addPath(m)}else i=s,t[s]=h}return t}async function Sae(t,e,i){if(!Array.isArray(t))return Sae([t],e);e&&typeof e!="string"&&az().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const n=typeof e=="string"?e:(e==null?void 0:e.url)??vt.geometryServiceUrl;let s,h,f,m,v,x,M,$,I=0;const P=[],L=[];for(const J of t)if(J!=null)if(s||(s=J.spatialReference,h=er(s),f=s.isWebMercator,x=f?102100:4326,m=Dy[x].maxX,v=Dy[x].minX,M=Dy[x].plus180Line,$=Dy[x].minus180Line),h)if(J.type==="mesh")L.push(J);else if(J.type==="point")L.push(mk(J.clone(),m,v));else if(J.type==="multipoint"){const te=J.clone();te.points=te.points.map(ie=>mk(ie,m,v)),L.push(te)}else if(J.type==="extent"){const te=J.clone()._normalize(!1,!1,h);L.push(te.rings?new En(te):te)}else if(J.extent){const te=J.extent,ie=Sd(te.xmin,v)*(2*m);let le=ie===0?J.clone():sz(J.clone(),ie);te.offset(ie,0);let{xmin:de,xmax:xe}=te;de=Number(de.toFixed(9)),xe=Number(xe.toFixed(9)),te.intersects(M)&&xe!==m?(I=xe>I?xe:I,le=gk(le,f),P.push(le),L.push("cut")):te.intersects($)&&de!==v?(I=xe*(2*m)>I?xe*(2*m):I,le=gk(le,f,360),P.push(le),L.push("cut")):L.push(le)}else L.push(J.clone());else L.push(J);else L.push(J);let z=Sd(I,m),F=-90;const U=z,W=new br;for(;z>0;){const J=360*z-180;W.addPath([[J,F],[J,-1*F]]),F*=-1,z--}if(P.length>0&&U>0){const J=xae(P,await gae(n,P,W,i)),te=[],ie=[];for(let xe=0;xe<L.length;xe++){const we=L[xe];if(we!=="cut")ie.push(we);else{const ve=J.shift(),se=t[xe];se!=null&&se.type==="polygon"&&se.rings&&se.rings.length>1&&ve.rings.length>=se.rings.length?(te.push(ve),ie.push("simplify")):ie.push(f?hc(ve):ve)}}if(!te.length)return ie;const le=await yae(n,te,i),de=[];for(let xe=0;xe<ie.length;xe++){const we=ie[xe];we!=="simplify"?de.push(we):de.push(f?hc(le.shift()):le.shift())}return de}const K=[];for(let J=0;J<L.length;J++){const te=L[J];if(te!=="cut")K.push(te);else{const ie=P.shift();K.push(f===!0?hc(ie):ie)}}return K}function Tae(t){if(!t)return null;const e=t.extent;if(!e)return null;const i=t.spatialReference&&er(t.spatialReference);if(!i)return e;const[n,s]=i.valid,h=2*s,{width:f}=e;let m,{xmin:v,xmax:x}=e;if([v,x]=[x,v],t.type==="extent"||f===0||f<=s||f>h||v<n||x>s)return e;switch(t.type){case"polygon":if(!(t.rings.length>1))return e;m=fk(t.rings);break;case"polyline":if(!(t.paths.length>1))return e;m=fk(t.paths);break;case"multipoint":m=t.points}const M=e.clone();for(let $=0;$<m.length;$++){let I=m[$][0];I<0?(I+=s,x=Math.max(I,x)):(I-=s,v=Math.min(I,v))}return M.xmin=v,M.xmax=x,M.width<f?(M.xmin-=s,M.xmax-=s,M):e}function TT(t,e,i){const n=er(i);if(n==null)return t;const[s,h]=n.valid,f=2*h;let m=0,v=0;e>h?m=Math.ceil(Math.abs(e-h)/f):e<s&&(m=-Math.ceil(Math.abs(e-s)/f)),t>h?v=Math.ceil(Math.abs(t-h)/f):t<s&&(v=-Math.ceil(Math.abs(t-s)/f));let x=t+(m-v)*f;const M=x-e;return M>h?x-=f:M<s&&(x+=f),x}function b7e(t,e){const i=er(e);if(i){const[n,s]=i.valid,h=s-n;if(t<n)for(;t<n;)t+=h;if(t>s)for(;t>s;)t-=h}return t}const lz=96,cz=39.37,Mae=180/Math.PI;function hz(t){return t.wkid?t:t.spatialReference||tt.WGS84}function MT(t,e){return e.type?en(t,e.x,e.y):Ad(t,e)}function uz(t){return ir(t)}function u3(t,e,i=0){let n=t.width,s=t.height;if(i!==0){const m=ac(i),v=Math.abs(Math.cos(m)),x=Math.abs(Math.sin(m));n=t.width*v+t.height*x,s=t.width*x+t.height*v}const h=Math.max(1,e[0]),f=Math.max(1,e[1]);return Math.max(n/h,s/f)*Pae(t.spatialReference)}async function J1(t,e,i,n){var m,v;let s,h;if(!t||Array.isArray(t)&&!t.length)return null;if(Pe.isCollection(t)&&(t=t.toArray()),Array.isArray(t)&&t.length&&typeof t[0]=="object"){const x=t.every(I=>"attributes"in I),M=t.some(I=>!I.geometry);let $=t;if(x&&M&&e&&e.allLayerViews){const I=new Map;for(const F of t){const U=F.layer,W=I.get(U)||[],K=F.attributes[U.objectIdField];K!=null&&W.push(K),I.set(U,W)}const P=[];I.forEach((F,U)=>{const W=e.allLayerViews.find(K=>K.layer.id===U.id);if(W&&"queryFeatures"in W){const K=U.createQuery();K.objectIds=F,K.returnGeometry=!0,P.push(W.queryFeatures(K))}});const L=await Promise.all(P),z=[];for(const F of L)if(F&&F.features&&F.features.length)for(const U of F.features)U.geometry!=null&&z.push(U.geometry);$=z}for(const I of $)n=await J1(I,e,i,n);return n}if(Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number")s=new De(t);else if(t instanceof Mc)s=t;else if("geometry"in t){if(t.geometry)s=t.geometry;else if(t.layer){const x=t.layer,M=e.allLayerViews.find($=>$.layer.id===x.id);if(M&&"queryFeatures"in M){const $=x.createQuery();$.objectIds=[t.attributes[x.objectIdField]],$.returnGeometry=!0;const I=await M.queryFeatures($);s=(v=(m=I==null?void 0:I.features)==null?void 0:m[0])==null?void 0:v.geometry}}}if(s==null)return null;switch(s.type){case"point":h=new Lt({xmin:s.x,ymin:s.y,xmax:s.x,ymax:s.y,spatialReference:s.spatialReference});break;case"extent":case"multipoint":case"polygon":case"polyline":h=Tae(s);break;default:h=s.extent}if(!h)return null;ol()||ks(h.spatialReference,i)||await Qa();const f=Wr(h,i);if(!f)return null;if(n){const x=f.center,M=x.clone();M.x=TT(x.x,n.center.x,i),M.x!==x.x&&f.centerAt(M),n=n.union(f)}else n=f;return n}function Eae(t){var e;if(t&&(!Array.isArray(t)||typeof t[0]!="number")&&(typeof t=="object"||Array.isArray(t)&&typeof t[0]=="object")){if("layer"in t&&((e=t.layer)==null?void 0:e.minScale)!=null&&t.layer.maxScale!=null){const i=t.layer;return{min:i.minScale,max:i.maxScale}}if(Array.isArray(t)&&t.length&&t.every(i=>"layer"in i)){let i=0,n=0;for(const s of t){const h=s.layer;h!=null&&h.minScale&&h.maxScale&&(i=h.minScale<i?h.minScale:i,n=h.maxScale>n?h.maxScale:n)}return i&&n?{min:i,max:n}:null}}}function yk(t,e){return bi(hz(t),e)?t:Wr(t,e)}async function kae(t,e){var F;if(!t||!e)return new Jo({targetGeometry:new De,scale:0,rotation:0});let i=e.spatialReference;const{constraints:n,padding:s,viewpoint:h,size:f}=e,m=[s?f[0]-s.left-s.right:f[0],s?f[1]-s.top-s.bottom:f[1]];let v=null;t instanceof Jo?v=t:t.viewpoint?v=t.viewpoint:t.target&&t.target.declaredClass==="esri.Viewpoint"&&(v=t.target);let x=null;v!=null&&v.targetGeometry?x=v.targetGeometry:t instanceof Lt?x=t:t instanceof Mc?x=await J1(t,e,i):t&&(x=await J1(t.center,e,i)||await J1(t.target,e,i)||await J1(t,e,i)),!x&&(h!=null&&h.targetGeometry)?x=h.targetGeometry:!x&&e.extent&&(x=e.extent),i||(i=hz(e.spatialReference||e.extent||x)),ol()||bi(x.spatialReference,i)||ks(x.spatialReference,i)||await Qa();const M=yk(x,i),$="center"in M?M.center:M;e.pickClosestTarget!==!1&&$.type==="point"&&((F=h.targetGeometry)==null?void 0:F.type)==="point"&&($.x=TT($.x,h.targetGeometry.x,$.spatialReference));let I=0;v?I=v.rotation:t.hasOwnProperty("rotation")?I=t.rotation:h&&(I=h.rotation);let P=0;P=(v==null?void 0:v.targetGeometry)!=null&&v.targetGeometry.type==="point"?v.scale:"scale"in t&&t.scale?t.scale:"zoom"in t&&t.zoom!==-1&&n&&n.effectiveLODs?n.zoomToScale(t.zoom):Array.isArray(x)||x.type==="point"||x.type==="extent"&&x.width===0&&x.height===0?h.scale:u3(yk(x.extent,i),m,I);const L=Eae(t.target??t);L&&(L.min&&L.min<P?P=L.min:L.max&&L.max>P&&(P=L.max));let z=new Jo({targetGeometry:$,scale:P,rotation:I});return n&&(z=n.fit(z),n.constrainByGeometry(z),n.rotationEnabled||(z.rotation=h.rotation)),z}function Qn(t,e){const i=t.targetGeometry,n=e.targetGeometry;return i.x=n.x,i.y=n.y,i.spatialReference=n.spatialReference,t.scale=e.scale,t.rotation=e.rotation,t}function $ae(t,e,i){return i?en(t,.5*(e[0]-i.right+i.left),.5*(e[1]-i.bottom+i.top)):E0(t,e,.5)}const Cae=function(){const t=nt();return function(e,i,n){const s=i.targetGeometry;MT(t,s);const h=.5*k0(i);return e.xmin=t[0]-h*n[0],e.ymin=t[1]-h*n[1],e.xmax=t[0]+h*n[0],e.ymax=t[1]+h*n[1],e.spatialReference=s.spatialReference,e}}();function Iae(t,e,i,n,s){var h;return T4(t,e,i.center),t.scale=u3(i,n),(h=s==null?void 0:s.constraints)==null||h.constrain(t),t}function Aae(t,e,i,n){return $T(t,e,i,n),a3(t,t)}const dz=function(){const t=nt();return function(e,i,n){return o3(e,Rae(e,i),$ae(t,i,n))}}(),Oae=function(){const t=Yo(),e=nt();return function(i,n,s,h){const f=k0(n),m=ET(n);return en(e,f,f),tz(t,e),l3(t,t,m),em(t,t,dz(e,s,h)),em(t,t,[0,h.top-h.bottom]),en(i,t[4],t[5])}}();function k0(t){var e;return t.scale*pz((e=t.targetGeometry)==null?void 0:e.spatialReference)}function pz(t){return t!=null&&vr(t)?1/(uz(t)*cz*lz):1}function ET(t){return fS(t.rotation)||0}function Pae(t){return vr(t)?uz(t)*cz*lz:1}function Rae(t,e){return E0(t,e,.5)}const kT=function(){const t=nt(),e=nt(),i=nt();return function(n,s,h,f,m,v){return ZD(t,s),E0(e,h,.5*v),en(i,1/f*v,-1/f*v),ST(n,e),m&&l3(n,n,m),xT(n,n,i),em(n,n,t),n}}(),$T=function(){const t=nt();return function(e,i,n,s){const h=k0(i),f=ET(i);return MT(t,i.targetGeometry),kT(e,t,n,h,f,s)}}(),Lae=function(){const t=nt();return function(e,i,n,s){const h=k0(i);return MT(t,i.targetGeometry),kT(e,t,n,h,0,s)}}();function fz(t){const e=er(t);return e?e.valid[1]-e.valid[0]:0}function Nae(t,e){return Math.round(fz(t)/e)}const Dae=function(){const t=nt(),e=nt(),i=[0,0,0];return function(n,s,h){Mi(t,n,s),$2(t,t),Mi(e,n,h),$2(e,e),JD(i,t,e);let f=Math.acos(ll(t,e)/(Qf(t)*Qf(e)))*Mae;return i[2]<0&&(f=-f),isNaN(f)&&(f=0),f}}(),zae=function(){const t=nt();return function(e,i,n,s){const h=e.targetGeometry;return Qn(e,i),Oae(t,i,n,s),h.x+=t[0],h.y+=t[1],e}}(),T4=function(t,e,i){Qn(t,e);const n=t.targetGeometry;return n.x=i.x,n.y=i.y,n.spatialReference=i.spatialReference,t},Fae=function(){const t=nt();return function(e,i,n,s,h){h||(h="center"),o3(t,n,s),E0(t,t,.5);const f=t[0],m=t[1];switch(h){case"center":en(t,0,0);break;case"left":en(t,-f,0);break;case"top":en(t,0,m);break;case"right":en(t,f,0);break;case"bottom":en(t,0,-m);break;case"top-left":en(t,-f,m);break;case"bottom-left":en(t,-f,-m);break;case"top-right":en(t,f,m);break;case"bottom-right":en(t,f,-m)}return d3(e,i,t),e}}();function w7e(t,e,i){return Qn(t,e),t.rotation+=i,t}function jae(t,e,i){return Qn(t,e),t.rotation=i,t}const Gae=function(){const t=nt();return function(e,i,n,s,h){return Qn(e,i),isNaN(n)||n===0||(mz(t,s,i,h),e.scale=i.scale*n,yz(t,t,e,h),d3(e,e,en(t,t[0]-s[0],s[1]-t[1]))),e}}();function vk(t,e,i){return Qn(t,e),t.scale=i,t}const gz=function(){const t=nt();return function(e,i,n,s,h,f){return Qn(e,i),isNaN(n)||n===0||(mz(t,h,i,f),e.scale=i.scale*n,e.rotation+=s,yz(t,t,e,f),d3(e,e,en(t,t[0]-h[0],h[1]-t[1]))),e}}(),_7e=function(){const t=nt(),e=nt();return function(i,n,s,h,f,m,v){return dz(e,m,v),_T(t,f,e),h?gz(i,n,s,h,t,m):Gae(i,n,s,t,m)}}(),mz=function(){const t=Yo();return function(e,i,n,s){return Ga(e,i,Aae(t,n,s,1))}}(),yz=function(){const t=Yo();return function(e,i,n,s){return Ga(e,i,$T(t,n,s,1))}}(),d3=function(){const t=nt(),e=Yo();return function(i,n,s){Qn(i,n);const h=k0(n),f=i.targetGeometry;return ez(e,ET(n)),xT(e,e,ws(h,h)),Ga(t,s,e),f.x+=t[0],f.y+=t[1],i}}();function vz(){const t=new Float32Array(6);return t[0]=1,t[3]=1,t}function Vae(t){const e=new Float32Array(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Hae(t,e,i,n,s,h){const f=new Float32Array(6);return f[0]=t,f[1]=e,f[2]=i,f[3]=n,f[4]=s,f[5]=h,f}function Bae(t,e){return new Float32Array(t,e,6)}function bz(t,e,i,n){const s=e[n],h=e[n+1];t[n]=i[0]*s+i[2]*h+i[4],t[n+1]=i[1]*s+i[3]*h+i[5]}function Uae(t,e,i,n=0,s=0,h=2){const f=s||e.length/h;for(let m=n;m<f;m++)bz(t,e,i,m*h)}Object.freeze(Object.defineProperty({__proto__:null,clone:Vae,create:vz,createView:Bae,fromValues:Hae,transform:bz,transformMany:Uae},Symbol.toStringTag,{value:"Module"}));function qae(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function Wae(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function wz(t,e,i,n,s,h,f,m,v,x){return t[0]=e,t[1]=i,t[2]=n,t[3]=s,t[4]=h,t[5]=f,t[6]=m,t[7]=v,t[8]=x,t}function _z(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Zae(t,e){if(t===e){const i=e[1],n=e[2],s=e[5];t[1]=e[3],t[2]=e[6],t[3]=i,t[5]=e[7],t[6]=n,t[7]=s}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function Jae(t,e){const i=e[0],n=e[1],s=e[2],h=e[3],f=e[4],m=e[5],v=e[6],x=e[7],M=e[8],$=M*f-m*x,I=-M*h+m*v,P=x*h-f*v;let L=i*$+n*I+s*P;return L?(L=1/L,t[0]=$*L,t[1]=(-M*n+s*x)*L,t[2]=(m*n-s*f)*L,t[3]=I*L,t[4]=(M*i-s*v)*L,t[5]=(-m*i+s*h)*L,t[6]=P*L,t[7]=(-x*i+n*v)*L,t[8]=(f*i-n*h)*L,t):null}function Kae(t,e){const i=e[0],n=e[1],s=e[2],h=e[3],f=e[4],m=e[5],v=e[6],x=e[7],M=e[8];return t[0]=f*M-m*x,t[1]=s*x-n*M,t[2]=n*m-s*f,t[3]=m*v-h*M,t[4]=i*M-s*v,t[5]=s*h-i*m,t[6]=h*x-f*v,t[7]=n*v-i*x,t[8]=i*f-n*h,t}function Yae(t){const e=t[0],i=t[1],n=t[2],s=t[3],h=t[4],f=t[5],m=t[6],v=t[7],x=t[8];return e*(x*h-f*v)+i*(-x*s+f*m)+n*(v*s-h*m)}function CT(t,e,i){const n=e[0],s=e[1],h=e[2],f=e[3],m=e[4],v=e[5],x=e[6],M=e[7],$=e[8],I=i[0],P=i[1],L=i[2],z=i[3],F=i[4],U=i[5],W=i[6],K=i[7],J=i[8];return t[0]=I*n+P*f+L*x,t[1]=I*s+P*m+L*M,t[2]=I*h+P*v+L*$,t[3]=z*n+F*f+U*x,t[4]=z*s+F*m+U*M,t[5]=z*h+F*v+U*$,t[6]=W*n+K*f+J*x,t[7]=W*s+K*m+J*M,t[8]=W*h+K*v+J*$,t}function M4(t,e,i){const n=e[0],s=e[1],h=e[2],f=e[3],m=e[4],v=e[5],x=e[6],M=e[7],$=e[8],I=i[0],P=i[1];return t[0]=n,t[1]=s,t[2]=h,t[3]=f,t[4]=m,t[5]=v,t[6]=I*n+P*f+x,t[7]=I*s+P*m+M,t[8]=I*h+P*v+$,t}function xz(t,e,i){const n=e[0],s=e[1],h=e[2],f=e[3],m=e[4],v=e[5],x=e[6],M=e[7],$=e[8],I=Math.sin(i),P=Math.cos(i);return t[0]=P*n+I*f,t[1]=P*s+I*m,t[2]=P*h+I*v,t[3]=P*f-I*n,t[4]=P*m-I*s,t[5]=P*v-I*h,t[6]=x,t[7]=M,t[8]=$,t}function Xae(t,e,i){const n=i[0],s=i[1],h=i[2];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=s*e[3],t[4]=s*e[4],t[5]=s*e[5],t[6]=h*e[6],t[7]=h*e[7],t[8]=h*e[8],t}function Qae(t,e,i){const n=i[0],s=i[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=s*e[3],t[4]=s*e[4],t[5]=s*e[5],t}function ele(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function tle(t,e){const i=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=i,t[2]=0,t[3]=-i,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function ile(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function nle(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function rle(t,e){const i=e[0],n=e[1],s=e[2],h=e[3],f=i+i,m=n+n,v=s+s,x=i*f,M=n*f,$=n*m,I=s*f,P=s*m,L=s*v,z=h*f,F=h*m,U=h*v;return t[0]=1-$-L,t[3]=M-U,t[6]=I+F,t[1]=M+U,t[4]=1-x-L,t[7]=P-z,t[2]=I-F,t[5]=P+z,t[8]=1-x-$,t}function sle(t,e){const i=e[0],n=e[1],s=e[2],h=e[4],f=e[5],m=e[6],v=e[8],x=e[9],M=e[10],$=M*f-m*x,I=-M*h+m*v,P=x*h-f*v,L=i*$+n*I+s*P;if(!L)return null;const z=1/L;return t[0]=$*z,t[1]=(-M*n+s*x)*z,t[2]=(m*n-s*f)*z,t[3]=I*z,t[4]=(M*i-s*v)*z,t[5]=(-m*i+s*h)*z,t[6]=P*z,t[7]=(-x*i+n*v)*z,t[8]=(f*i-n*h)*z,t}function ole(t,e){const i=e[0],n=e[1],s=e[2],h=e[3],f=e[4],m=e[5],v=e[6],x=e[7],M=e[8],$=e[9],I=e[10],P=e[11],L=e[12],z=e[13],F=e[14],U=e[15],W=i*m-n*f,K=i*v-s*f,J=i*x-h*f,te=n*v-s*m,ie=n*x-h*m,le=s*x-h*v,de=M*z-$*L,xe=M*F-I*L,we=M*U-P*L,ve=$*F-I*z,se=$*U-P*z,ce=I*U-P*F;let ue=W*ce-K*se+J*ve+te*we-ie*xe+le*de;return ue?(ue=1/ue,t[0]=(m*ce-v*se+x*ve)*ue,t[1]=(v*we-f*ce-x*xe)*ue,t[2]=(f*se-m*we+x*de)*ue,t[3]=(s*se-n*ce-h*ve)*ue,t[4]=(i*ce-s*we+h*xe)*ue,t[5]=(n*we-i*se-h*de)*ue,t[6]=(z*le-F*ie+U*te)*ue,t[7]=(F*J-L*le-U*K)*ue,t[8]=(L*ie-z*J+U*W)*ue,t):null}function ale(t,e,i){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function lle(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function cle(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2)}function hle(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t}function Sz(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t}function ule(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t}function dle(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t[3]=e[3]+i[3]*n,t[4]=e[4]+i[4]*n,t[5]=e[5]+i[5]*n,t[6]=e[6]+i[6]*n,t[7]=e[7]+i[7]*n,t[8]=e[8]+i[8]*n,t}function ple(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function fle(t,e){const i=t[0],n=t[1],s=t[2],h=t[3],f=t[4],m=t[5],v=t[6],x=t[7],M=t[8],$=e[0],I=e[1],P=e[2],L=e[3],z=e[4],F=e[5],U=e[6],W=e[7],K=e[8],J=Ti();return Math.abs(i-$)<=J*Math.max(1,Math.abs(i),Math.abs($))&&Math.abs(n-I)<=J*Math.max(1,Math.abs(n),Math.abs(I))&&Math.abs(s-P)<=J*Math.max(1,Math.abs(s),Math.abs(P))&&Math.abs(h-L)<=J*Math.max(1,Math.abs(h),Math.abs(L))&&Math.abs(f-z)<=J*Math.max(1,Math.abs(f),Math.abs(z))&&Math.abs(m-F)<=J*Math.max(1,Math.abs(m),Math.abs(F))&&Math.abs(v-U)<=J*Math.max(1,Math.abs(v),Math.abs(U))&&Math.abs(x-W)<=J*Math.max(1,Math.abs(x),Math.abs(W))&&Math.abs(M-K)<=J*Math.max(1,Math.abs(M),Math.abs(K))}function gle(t){const e=Ti(),i=t[0],n=t[1],s=t[2],h=t[3],f=t[4],m=t[5],v=t[6],x=t[7],M=t[8];return Math.abs(1-(i*i+h*h+v*v))<=e&&Math.abs(1-(n*n+f*f+x*x))<=e&&Math.abs(1-(s*s+m*m+M*M))<=e}const mle=CT,yle=Sz;Object.freeze(Object.defineProperty({__proto__:null,add:hle,adjoint:Kae,copy:Wae,determinant:Yae,equals:fle,exactEquals:ple,frob:cle,fromMat2d:nle,fromMat4:qae,fromQuat:rle,fromRotation:tle,fromScaling:ile,fromTranslation:ele,identity:_z,invert:Jae,isOrthoNormal:gle,mul:mle,multiply:CT,multiplyScalar:ule,multiplyScalarAndAdd:dle,normalFromMat4:ole,normalFromMat4Legacy:sle,projection:ale,rotate:xz,scale:Xae,scaleByVec2:Qae,set:wz,str:lle,sub:yle,subtract:Sz,translate:M4,transpose:Zae},Symbol.toStringTag,{value:"Module"}));function db(){const t=new Float32Array(9);return t[0]=1,t[4]=1,t[8]=1,t}function vle(t){const e=new Float32Array(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function ble(t,e,i,n,s,h,f,m,v){const x=new Float32Array(9);return x[0]=t,x[1]=e,x[2]=i,x[3]=n,x[4]=s,x[5]=h,x[6]=f,x[7]=m,x[8]=v,x}function wle(t,e){return new Float32Array(t,e,9)}Object.freeze(Object.defineProperty({__proto__:null,clone:vle,create:db,createView:wle,fromValues:ble},Symbol.toStringTag,{value:"Module"}));function Tz(){return new Float32Array(2)}function _le(t){const e=new Float32Array(2);return e[0]=t[0],e[1]=t[1],e}function e0(t,e){const i=new Float32Array(2);return i[0]=t,i[1]=e,i}function xle(t,e){return new Float32Array(t,e,2)}function Mz(){return Tz()}function Ez(){return e0(1,1)}function kz(){return e0(1,0)}function $z(){return e0(0,1)}const Sle=Mz(),Tle=Ez(),Mle=kz(),Ele=$z();Object.freeze(Object.defineProperty({__proto__:null,ONES:Tle,UNIT_X:Mle,UNIT_Y:Ele,ZEROS:Sle,clone:_le,create:Tz,createView:xle,fromValues:e0,ones:Ez,unitX:kz,unitY:$z,zeros:Mz},Symbol.toStringTag,{value:"Module"}));function kle(t){return t instanceof Float32Array&&t.length>=2}function $le(t){return Array.isArray(t)&&t.length>=2}function D_(t){return kle(t)||$le(t)}var E4;const vl=[0,0];let hh=E4=class extends Fe{constructor(t){super(t),this._viewpoint2D={center:nt(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new Lt,this.id=0,this.inverseTransform=Yo(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=Yo(),this.transformNoRotation=Yo(),this.displayMat3=db(),this.displayViewMat3=db(),this.viewMat3=db(),this.viewMat2d=vz(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(t){this._set("pixelRatio",t),this._update()}set size(t){this._set("size",t),this._update()}set viewpoint(t){if(t){const e=this._viewpoint2D,i=t.targetGeometry;e.center[0]=i.x,e.center[1]=i.y,e.rotation=t.rotation,e.scale=t.scale,e.spatialReference=i.spatialReference}this._update()}copy(t){const e=this.size,i=this.viewpoint;return i&&e?(this.viewpoint=Qn(i,t.viewpoint),this._set("size",Ad(e,t.size))):(this.viewpoint=t.viewpoint.clone(),this._set("size",[t.size[0],t.size[1]])),this._set("pixelRatio",t.pixelRatio),this}clone(){return new E4({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(t,e,i){return D_(e)?Ga(t,e,this.inverseTransform):(vl[0]=e,vl[1]=i,Ga(t,vl,this.inverseTransform))}toScreen(t,e,i){return D_(e)?Ga(t,e,this.transform):(vl[0]=e,vl[1]=i,Ga(t,vl,this.transform))}toScreenNoRotation(t,e,i){return D_(e)?Ga(t,e,this.transformNoRotation):(vl[0]=e,vl[1]=i,Ga(t,vl,this.transformNoRotation))}wrapMapCoordinate(t,e){Ad(t,e);const[i]=e,[n]=this.center,{extent:s,spatialReference:h}=this;let{xmin:f,xmax:m}=s;if(h.isWrappable){const v=fz(h)/2;f=Math.max(f,n-v),m=Math.min(m,n+v)}return(i<f||i>m)&&(t[0]=TT(i,n,h)),t}getScreenTransform(t,e){const{center:i}=this._viewpoint2D,n=this._get("pixelRatio")||1,s=this._get("size");return kT(t,i,s,e,0,n),t}_update(){const{center:t,spatialReference:e,scale:i,rotation:n}=this._viewpoint2D,s=this._get("pixelRatio")||1,h=this._get("size"),f=new Jo({targetGeometry:new De(t[0],t[1],e),scale:i,rotation:n});if(this._set("viewpoint",f),!h||!e||!i)return;this.resolution=k0(f),this.rotation=n,this.scale=i,this.spatialReference=e,Ad(this.center,t);const m=h[0]!==0?2/h[0]:0,v=h[1]!==0?-2/h[1]:0;wz(this.displayMat3,m,0,0,0,v,0,-1,1,1);const x=_z(this.viewMat3),M=e0(h[0]/2,h[1]/2),$=e0(-h[0]/2,-h[1]/2),I=fS(n);M4(x,x,M),xz(x,x,I),M4(x,x,$),CT(this.displayViewMat3,this.displayMat3,x);const P=ST(this.viewMat2d,M);return l3(P,P,I),em(P,P,$),Cae(this.extent,f,h),$T(this.transform,f,h,s),a3(this.inverseTransform,this.transform),Lae(this.transformNoRotation,f,h,s),this.worldScreenWidth=Nae(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};_([T({readOnly:!0})],hh.prototype,"id",void 0),_([T({value:1,json:{write:!0}})],hh.prototype,"pixelRatio",null),_([T({json:{write:!0}})],hh.prototype,"size",null),_([T()],hh.prototype,"spatialReference",void 0),_([T({type:Jo,json:{write:!0}})],hh.prototype,"viewpoint",null),hh=E4=_([Y("esri.views.2d.ViewState")],hh);const bk=hh;var k4,$4;let ec=k4=class extends Re{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new k4({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};_([T()],ec.prototype,"left",void 0),_([T()],ec.prototype,"top",void 0),_([T()],ec.prototype,"right",void 0),_([T()],ec.prototype,"bottom",void 0),ec=k4=_([Y("esri.views.2d.PaddedViewState.Padding")],ec);let Jp=$4=class extends bk{constructor(...t){super(...t),this.paddedViewState=new bk,this._updateContent=(()=>{const e=nt();return()=>{const i=this._get("size"),n=this._get("padding");if(!i||!n)return;const s=this.paddedViewState;en(e,n.left+n.right,n.top+n.bottom),Mi(e,i,e),Ad(s.size,e);const h=s.viewpoint;h&&(this.viewpoint=h)}})(),this.addHandles(Ee(()=>[this.size,this.padding],()=>this._updateContent(),Ya)),this.padding=new ec,this.size=[0,0]}set padding(t){this._set("padding",t||new ec)}set viewpoint(t){if(t){this.paddedViewState.viewpoint=t;const e=this._viewpoint2D;if(this._get("padding")){const i=t.clone();zae(i,t,this._get("size"),this._get("padding"));const n=i.targetGeometry;e.center[0]=n.x,e.center[1]=n.y,e.rotation=i.rotation,e.scale=i.scale,e.spatialReference=n.spatialReference}else{const i=t.targetGeometry;e.center[0]=i.x,e.center[1]=i.y,e.rotation=t.rotation,e.scale=t.scale,e.spatialReference=i.spatialReference}this._update()}}clone(){return new $4({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};_([T()],Jp.prototype,"paddedViewState",void 0),_([T({type:ec})],Jp.prototype,"padding",null),_([T()],Jp.prototype,"viewpoint",null),Jp=$4=_([Y("esri.views.2d.PaddedViewState")],Jp);const IT=Jp;function ld(t,e,i,n){const s=3*t,h=3*(i-t)-s,f=1-s-h,m=3*e,v=3*(n-e)-m,x=1-m-v;function M(L){return((f*L+h)*L+s)*L}function $(L){return((x*L+v)*L+m)*L}function I(L){return(3*f*L+2*h)*L+s}function P(L,z){let F,U,W,K,J,te;for(W=L,te=0;te<8;te++){if(K=M(W)-L,Math.abs(K)<z)return W;if(J=I(W),Math.abs(J)<1e-6)break;W-=K/J}if(F=0,U=1,W=L,W<F)return F;if(W>U)return U;for(;F<U;){if(K=M(W),Math.abs(K-L)<z)return W;L>K?F=W:U=W,W=.5*(U-F)+F}return W}return function(L,z=1e-6){return $(P(L,z))}}const Cle=/^cubic-bezier\((.*)\)/,Ra={};function Ile(t){let e=Ra[t]||null;if(!e){const i=Cle.exec(t);if(i){const n=i[1].split(",").map(s=>parseFloat(s.trim()));n.length!==4||n.some(s=>isNaN(s))||(e=ld.apply(ld,n))}}return e}Ra.ease=ld(.25,.1,.25,1),Ra.linear=ld(0,0,1,1),Ra.easeIn=Ra["ease-in"]=ld(.42,0,1,1),Ra.easeOut=Ra["ease-out"]=ld(0,0,.58,1),Ra.easeInOut=Ra["ease-in-out"]=ld(.42,0,.58,1);let wk=class{constructor(e){this._view=e,this.viewpoint=new Jo({targetGeometry:new De,scale:0,rotation:0})}get view(){return this._view}get size(){const[e,i]=this._view.size;return Math.sqrt(e*e+i*i)}get scale(){return this.viewpoint.scale}get rotation(){return this.viewpoint.rotation}get center(){return this.viewpoint.targetGeometry}get scaleToResolutionFactor(){return pz(this.center.spatialReference)}pixelsPerPanAtZoom(e){return 1/(e*this.scaleToResolutionFactor)}zoomAtPixelsPerPan(e){return 1/(e*this.scaleToResolutionFactor)}pixelsPerRotateAtZoom(e){return this.size/2}compareTo(e,i){i.pan=KO(this.center,e.center);let n=Math.abs(e.rotation-this.rotation);n=n>=180?360-n:n,i.rotate=ac(n),i.sourceZoom=this.scale,i.targetZoom=e.scale}interpolate(e,i,n){const{pan:s,rotate:h,zoom:f,zoomOffset:m}=n,{center:v}=this;v.spatialReference=e.center.spatialReference,v.x=g1(e.center.x,i.center.x,s),v.y=g1(e.center.y,i.center.y,s),this.viewpoint.scale=g1(e.scale,i.scale+m,f);let x=e.rotation;const M=i.rotation;Math.abs(M-x)>=180&&(x+=360*(x<M?1:-1)),this.viewpoint.rotation=g1(x,M,h)}copyFrom(e){Qn(this.viewpoint,e.viewpoint),this._view=e.view}};const Cz=t=>t*t,Ale=t=>1-Cz(1-t),Ole=t=>2**(10*(t-1)),Ple=t=>1-Ole(1-t);function Rle(t){const e=2*(t-Math.sqrt((t-1)*t)),i=e/2/t;return n=>n<i?t*n*n:e*n-e+1}function Lle(t,e){return(i,n)=>i<e?e*t(i/e,n):1-t((1-i)/(1-e),n)*(1-e)}const _k=Lle(Rle(1),.5);let Nle=class{constructor(){this.pan=0,this.rotate=0,this.fov=0,this.sourceZoom=0,this.targetZoom=0}};const tm={desiredScreenFlow:2,minDuration:500,maxDuration:8e3},Iz={...tm,maxDuration:4e3};let Dle=class Az{constructor(e){this._createCamera=e,this.compared=new Nle,this.segmentStart=0,this.segmentEnd=1,this.settings={desiredScreenFlow:tm.desiredScreenFlow},this.source=e(),this.target=e()}clone(){const e=new Az(this._createCamera);return e.copyFrom(this),e}copyFrom(e){this.update(e.source,e.target,e.settings)}update(e,i,n){this.source!==e&&this.source.copyFrom(e),this.target!==i&&this.target.copyFrom(i),this.source.compareTo(this.target,this.compared),this.settings.desiredScreenFlow=n.desiredScreenFlow!=null?n.desiredScreenFlow:tm.desiredScreenFlow,this.desiredPixelFlow=this.settings.desiredScreenFlow*this.target.size,this.halfWindowSize=this.target.size/2}halfWindowPanAtZoom(e){const i=this.target.pixelsPerPanAtZoom(e);return this.halfWindowSize/i}get hasZoom(){return Math.abs(this.compared.sourceZoom-this.compared.targetZoom)>1e-5}get hasPan(){return this.compared.pan>Ti()}get hasFov(){return Math.abs(this.compared.fov)>Ti()}get hasRotate(){return this.compared.rotate>Ti()}},zle=class{constructor(){this.pan=0,this.rotate=0,this.zoom=0,this.fov=0,this.zoomOffset=0}},Fle=class{constructor(){this.segments=new Array}get time(){return this.segments.reduce((e,i)=>e+i.time,0)}interpolateComponentsAt(e,i){e=Math.min(Math.max(e,0),1),e*=this.time;let n=0,s=0;const h=this.definition,f=this.segments.reduce((m,v)=>m||v.definition.hasZoom,!1);for(let m=0;m<this.segments.length;m++){const v=this.segments[m],x=v.definition;if(e<=v.time||m===this.segments.length-1){if(this.segmentInterpolateComponentsAt(v,v.time===0?0:e/v.time,i),h.hasPan&&!isNaN(i.pan)&&isFinite(h.compared.pan)?i.pan=(n+x.compared.pan*i.pan)/h.compared.pan:i.pan=1,h.hasRotate&&!isNaN(i.rotate)&&isFinite(h.compared.rotate)?i.rotate=(s+x.compared.rotate*i.rotate)/h.compared.rotate:i.rotate=1,f&&!isNaN(i.zoom)&&isFinite(x.compared.targetZoom)){const{sourceZoom:M,targetZoom:$}=x.compared,I=i.zoom*($-M)+M,P=this.segments[0].definition.compared.sourceZoom,L=this.segments[this.segments.length-1].definition.compared.targetZoom,z=Math.abs($-P)>Math.abs(M-P)?$:M;i.zoomOffset=z-L,i.zoom=(I-P)/(z-P)}else i.zoom=1;return i}e-=v.time,n+=x.compared.pan,s+=x.compared.rotate}}segmentInterpolateComponentsAt(e,i,n){e.interpolateComponentsAt(i,n)}},z_=class{get time(){return this._time}constructor(e){e&&this.update(e)}update(e){e&&(this.definition?this.definition.copyFrom(e):this.definition=e.clone()),this._updatePrecomputedVariables(),this._updatePixelFlow()}_updatePrecomputedVariables(){const e=this.definition,i=e.compared,n=i.sourceZoom,s=i.targetZoom;this._zoomSign=n>s?1:-1,this._panPixelsAtSource=i.pan*e.source.pixelsPerPanAtZoom(n);const h=(e.source.pixelsPerRotateAtZoom(n)+e.target.pixelsPerRotateAtZoom(s))/2;this._rotatePixels=i.rotate*h}_updatePixelFlow(){const e=this.definition.compared.sourceZoom,i=this.definition.compared.targetZoom,{hasZoom:n,hasPan:s,hasRotate:h}=this.definition;let f=0,m=0;n&&(s&&(f=(i/e-1)/(-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2*this._panPixelsAtSource)),h&&(m=this._zoomSign*(Math.log(e/i)/Math.LN2)*this.definition.halfWindowSize/this._rotatePixels)),this._zoomPixelFlow=0,this._panPixelFlow=0,this._rotatePixelFlow=0;const v=this.definition.desiredPixelFlow;if(n&&s&&h){const x=f+m+f*m;this._zoomPixelFlow=f*m/x*v,this._panPixelFlow=m/x*v,this._rotatePixelFlow=f/x*v}else if(n&&s){const x=1+f;this._zoomPixelFlow=f/x*v,this._panPixelFlow=1/x*v}else if(n&&h){const x=1+m;this._zoomPixelFlow=m/x*v,this._rotatePixelFlow=1/x*v}else if(s&&h){const x=this._panPixelsAtSource/this._rotatePixels,M=1+x;this._panPixelFlow=x/M*v,this._rotatePixelFlow=1/M*v}else s?this._panPixelFlow=v:n?this._zoomPixelFlow=v:h&&(this._rotatePixelFlow=v);this._time=this.rotateTime??this.zoomTime??this.panTime??this.fovTime??0}get rotateTime(){return this.definition.hasRotate?this._rotatePixels/this._rotatePixelFlow:null}get zoomTime(){return this.definition.hasZoom?this._zoomSign*(Math.log(this.definition.compared.sourceZoom/this.definition.compared.targetZoom)/Math.LN2)*this.definition.halfWindowSize/this._zoomPixelFlow:null}get fovTime(){return this.definition.hasFov?Math.abs(this.definition.compared.fov)/jle:null}get panTime(){if(this.definition.hasPan){if(this.definition.hasZoom){const e=-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2,i=e*this._panPixelsAtSource;return Math.log(i*(this._zoomPixelFlow/this._panPixelFlow)+1)/(e*this._zoomPixelFlow)}return this._panPixelsAtSource/this._panPixelFlow}}_interpolateComponentsZoom(e){if(e===0||e===1)return e;if(this.definition.hasZoom){const i=this.definition.compared.sourceZoom,n=this.definition.compared.targetZoom;return(i*(i/n)**-e-i)/(n-i)}return e}_interpolateComponentsFov(e){if(e===0)return this.definition.segmentStart;if(e===1)return this.definition.segmentEnd;if(this.definition.hasFov){const{segmentStart:i,segmentEnd:n}=this.definition;return i+e*(n-i)}return this.definition.segmentStart}_interpolateComponentsPan(e){if(e===0||e===1)return e;if(this.definition.hasPan&&this.definition.hasZoom){const i=-1/(this._zoomSign*this.definition.halfWindowSize)*this._zoomPixelFlow;return 1/this._panPixelsAtSource*(this._panPixelFlow*(2**(i*e*this._time)-1))/(i*Math.LN2)}return e}_interpolateComponentsRotate(e){return e}interpolateComponentsAt(e,i){e=Math.min(Math.max(e,0),1),i.zoom=this._interpolateComponentsZoom(e),i.pan=this._interpolateComponentsPan(e),i.rotate=this._interpolateComponentsRotate(e),i.zoomOffset=0,i.fov=this._interpolateComponentsFov(e)}};const jle=ac(90);function Gle(t,e,i){const n=e-t.compared.sourceZoom,s=t.halfWindowPanAtZoom(n);return-t.halfWindowSize*(i.ascensionFactor*Math.LN2*t.compared.pan+s)*Math.log(t.compared.sourceZoom/e)/(t.desiredPixelFlow*Math.LN2*s)}function Vle(t,e,i){const n=1/e,s=Math.log(t.compared.sourceZoom*n),h=1/t.desiredPixelFlow,f=1/Math.LN2,m=e-t.compared.sourceZoom,v=1/m,x=(i.ascensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(m))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*n*h*f*v*x-t.halfWindowSize*s*h*f*v+t.halfWindowSize*s*h*f*x/(m*m)}function Hle(t,e,i){const n=e-t.compared.sourceZoom,s=1/n,h=1/e,f=Math.log(t.compared.sourceZoom*h),m=(i.ascensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(n))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*s*(-2*s*h*m+2*s*f+2*h-2*f*m/(n*n)-m/(e*e))/(t.desiredPixelFlow*Math.LN2)}function Ble(t,e){return-t.halfWindowSize*Math.log(t.compared.sourceZoom/e)/(t.desiredPixelFlow*Math.LN2)}function Ule(t,e){return t.halfWindowSize/(e*t.desiredPixelFlow*Math.LN2)}function qle(t,e){return-t.halfWindowSize/(e*e*t.desiredPixelFlow*Math.LN2)}function Wle(t,e,i){return-t.compared.pan*t.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e))}function Zle(t,e,i){return t.compared.pan*t.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e*e))}function Jle(t,e,i){return-2*t.compared.pan*t.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e*e*e))}function Kle(t,e,i){return t.halfWindowSize*(-t.halfWindowPanAtZoom(e)-i.descensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(t.compared.targetZoom))*Math.log(e/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2*t.halfWindowPanAtZoom(-e+t.compared.targetZoom))}function Yle(t,e,i){const n=Math.log(e/t.compared.targetZoom),s=1/t.desiredPixelFlow,h=1/Math.LN2,f=-e+t.compared.targetZoom,m=1/f,v=(-t.halfWindowPanAtZoom(e)-i.descensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(t.compared.targetZoom))/t.halfWindowPanAtZoom(1);return-t.halfWindowSize*n*s*h*m+t.halfWindowSize*n*s*h*v/(f*f)+t.halfWindowSize*s*h*m*v/e}function Xle(t,e,i){const n=e-t.compared.targetZoom,s=1/n,h=1/e,f=Math.log(e/t.compared.targetZoom),m=(t.halfWindowPanAtZoom(e)+i.descensionFactor*Math.LN2*t.compared.pan-t.halfWindowPanAtZoom(t.compared.targetZoom))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*s*(-2*s*h*m-2*s*f+2*h+2*f*m/(n*n)-m/(e*e))/(t.desiredPixelFlow*Math.LN2)}function Qle(t,e){return t.halfWindowSize*Math.log(e/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2)}function ece(t,e){return t.halfWindowSize/(e*t.desiredPixelFlow*Math.LN2)}function tce(t,e){return-t.halfWindowSize/(e*e*t.desiredPixelFlow*Math.LN2)}function ice(t){const e=t.compared.sourceZoom-t.compared.targetZoom;if(e===0)return t.compared.pan*t.halfWindowSize/(t.desiredPixelFlow*t.halfWindowPanAtZoom(t.compared.sourceZoom));const i=Math.LN2*t.compared.pan,n=e,s=t.halfWindowPanAtZoom(n),h=t.halfWindowSize*Math.log(t.compared.sourceZoom/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2*s);return t.compared.sourceZoom<=t.compared.targetZoom?h*(i-s):h*(i+s)}function nce(t,e){let i=rce(t,e);const n={ascensionFactor:e.ascensionFactor!=null?e.ascensionFactor:.5,descensionFactor:e.descensionFactor!=null?e.descensionFactor:.5},s=n.ascensionFactor===0,h=n.descensionFactor===0,f=s?Ble:Gle,m=s?Ule:Vle,v=s?qle:Hle,x=h?Qle:Kle,M=h?ece:Yle,$=h?tce:Xle,I=J=>f(t,J,n)+Wle(t,J,n)+x(t,J,n),P=J=>m(t,J,n)+Zle(t,J,n)+M(t,J,n),L=J=>v(t,J,n)+Jle(t,J,n)+$(t,J,n);let z=I(i);const F=ice(t);let U;const W=e.maximumIterations||20,K=e.maximumDistance!=null?e.maximumDistance:1/0;for(U=0;U<W;U++){const J=e.desiredSlope??1e-6;let te=P(i);Math.abs(te)>J&&(te+=J);const ie=te/L(i);if(isNaN(ie)||i>=K&&ie<0){if(!isFinite(K))return null;i=K,z=I(i);break}if(i-=ie,i<t.compared.sourceZoom||i<t.compared.targetZoom)return null;const le=I(i);if(Math.abs(le-z)/z<=.005)break;z=le}return z>F*(1-.3)||i<t.compared.sourceZoom||i<t.compared.targetZoom?null:i}function rce(t,e){const i=Math.max(t.compared.sourceZoom,t.compared.targetZoom),n=t.source.zoomAtPixelsPerPan(t.desiredPixelFlow/t.compared.pan)/2;return n<i?e.maximumDistance!=null?i+(e.maximumDistance-i)/2:1.5*i:e.maximumDistance?Math.min(e.maximumDistance,n):n}let sce=class extends Fle{constructor(e,i){super(),this._preallocSegments=[new z_,new z_,new z_],this._ascensionSegment=null,this._descensionSegment=null,this.update(e,i)}update(e,i){if(!e)return;this.definition?this.definition.copyFrom(e):this.definition=e.clone();const n=i!=null&&i.apex?nce(e,i.apex):null;this.segments.length=0,this._ascensionSegment=null,this._descensionSegment=null,n?this._updateWithApex(n,i==null?void 0:i.apex):this._updateWithoutApex()}segmentInterpolateComponentsAt(e,i,n){e.interpolateComponentsAt(i,n),e===this._ascensionSegment?n.zoom=Ale(n.zoom):e===this._descensionSegment&&(n.zoom=Cz(n.zoom))}_updateWithApex(e,i){const[n,s,h]=this._preallocSegments,f=(i==null?void 0:i.ascensionFactor)??.5,m=Math.min(1-f,(i==null?void 0:i.ascensionFactor)!=null&&i.descensionFactor!=null?i.descensionFactor:.5),v=1-f-m;n.definition?n.definition.copyFrom(this.definition):n.definition=this.definition.clone(),n.definition.compared.targetZoom=e,n.definition.compared.pan=this.definition.compared.pan*f,n.definition.compared.rotate=this.definition.compared.rotate*f,n.definition.segmentEnd=f,n.update(),this._ascensionSegment=n,this.segments.push(n),v>0&&(s.definition?s.definition.copyFrom(this.definition):s.definition=this.definition.clone(),s.definition.copyFrom(this.definition),s.definition.compared.sourceZoom=e,s.definition.compared.targetZoom=e,s.definition.compared.pan=this.definition.compared.pan*v,s.definition.compared.rotate=this.definition.compared.rotate*v,s.definition.segmentStart=n.definition.segmentEnd,s.definition.segmentEnd=n.definition.segmentEnd+v,s.update(),this.segments.push(s)),h.definition?h.definition.copyFrom(this.definition):h.definition=this.definition.clone(),h.definition.compared.sourceZoom=e,h.definition.compared.pan=this.definition.compared.pan*m,h.definition.compared.rotate=this.definition.compared.rotate*m,h.definition.segmentStart=f+v,h.update(),this._descensionSegment=h,this.segments.push(h)}_updateWithoutApex(){const[e]=this._preallocSegments;e.update(this.definition),this.segments.push(e)}};const oce=new zle;let ace=class{get time(){return this._time}get isLinear(){return this.path.segments.length===1}constructor(e){this._time=0,this._easing=_k,this.definition=new Dle(e),this.path=new sce}update(e,i,n){this.definition.update(e,i,n),this.path.update(this.definition,n),this._time=this._applyTimeSettings(bU(isFinite(this.path.time)?this.path.time:0),n),this._easing=n.easing??(this._time>=1e3?_k:Ple)}cameraAt(e,i){e=Math.min(Math.max(0,e),1),e=this._normalizedEasing(e);const n=this.path.interpolateComponentsAt(e,oce);i.interpolate(this.definition.source,this.definition.target,n)}_normalizedEasing(e){const i=this._easing(0,this._time),n=this._easing(1,this._time);return(this._easing(e,this._time)-i)/(n-i)}_applyTimeSettings(e,i){const n=i.speedFactor!=null?i.speedFactor:1,s=i.minDuration??tm.minDuration/n,h=i.maxDuration??tm.maxDuration/n;return e=i.duration!=null?i.duration:Math.min(Math.max(e/n,s),h)}};const xk=2e3,lce=64;let cce=class{constructor(e){this._view=e,this._animation=new ace(()=>new wk(this._view)),this._current=new wk(this._view)}get _source(){return this._animation.definition.source}get _target(){return this._animation.definition.target}get duration(){return this._animation.time}get animation(){return this._animation}update(e,i,n={}){Qn(this._current.viewpoint,e),Qn(this._source.viewpoint,e),Qn(this._target.viewpoint,i),this._animation.update(this._source,this._target,n)}applyRatio(e,i){this._animation.cameraAt(i,this._current),Qn(e,this._current.viewpoint)}},Kp=class extends Re{constructor(e){super(e),this._animation=null,this._destinationViewState=new IT,this.updateFunction=null,this.easing=Ra.ease,this.viewpoint=new Jo({targetGeometry:new De,scale:0,rotation:0}),this._updateTask=Ff({postRender:this._postRender.bind(this)}),this._updateTask.pause(),this._transition=new cce(e.view)}destroy(){this._updateTask=Rt(this._updateTask)}get animation(){return this._animation}set animation(e){this._animation=e,this.view.animation=e}animate(e,i,n){this.stop();const s=this.viewpoint;Qn(s,i);const h=(typeof(n==null?void 0:n.easing)=="string"?Ile(n.easing):n==null?void 0:n.easing)||this.easing,f=e.target;this._transition.update(this.viewpoint,f,{apex:{maximumDistance:Math.min(Math.min(i.scale,f.scale)*lce,this.view.constraints.effectiveMinScale),desiredSlope:5e-8},duration:n==null?void 0:n.duration,maxDuration:(n==null?void 0:n.animationMode)==="auto"?1/0:(n==null?void 0:n.maxDuration)??Iz.maxDuration,speedFactor:n==null?void 0:n.speedFactor,easing:typeof h=="function"?v=>h(v):void 0}),(n==null?void 0:n.animationMode)==="auto"&&(this._destinationViewState.copy(this.view.state),this._destinationViewState.viewpoint=f,hce(this._transition.animation,n,this.view.state,this._destinationViewState)||this._transition.update(this.viewpoint,f,{duration:0}));const m=()=>{this.animation===e&&this._updateTask&&(e.state==="finished"&&(this._transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(m,m),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinuous(e,i){this.stop(),this.updateFunction=i,this.viewpoint=e;const n=new _4({target:e.clone()}),s=()=>{this.animation===n&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return n.when(s,s),this._startTime=performance.now(),this._updateTask.resume(),this.animation=n,n}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){var n,s;const i=this.animation;if(i&&i.state!==_4.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime),(n=this.animation)==null||n.update(this.viewpoint);else{const h=performance.now()-this._startTime,f=this._transition.duration,m=f>0?h/f:1,v=m>=1;this._transition.applyRatio(this.viewpoint,m),v&&((s=this.animation)==null||s.finish())}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};function hce(t,e,i,n){if((e==null?void 0:e.duration)!=null)return!0;const{time:s,isLinear:h}=t,f=(e==null?void 0:e.speedFactor)||1,m=(e==null?void 0:e.maxDuration)??Iz.maxDuration/f;if(pe("esri-goto-debug")&&(console.log("speed factor:",f),console.log("adjusted duration:		",s),console.log("adjusted max duration:	",m),console.log("is linear:",h)),s>m)return pe("esri-goto-debug")&&console.warn(`failed "auto" heuristic: animations must be shorter than ${m/1e3}s`),!1;if(h){const x=nt(),M=Fi(...n.toScreen(x,...i.center)),$=Fi(...i.toScreen(x,...n.center)),I=$!=null&&$.x>-(1.5-.5)*i.size[0]&&$.x<(1.5+.5)*i.size[0]&&$.y>-(1.5-.5)*i.size[1]&&$.y<(1.5+.5)*i.size[1],P=M!=null&&M.x>-(1.5-.5)*n.size[0]&&M.x<(1.5+.5)*n.size[0]&&M.y>-(1.5-.5)*n.size[1]&&M.y<(1.5+.5)*n.size[1];if(pe("esri-goto-debug")&&(console.log(`dest is within ${1.5} screens at start view:`,I),console.log(`start is within ${1.5} screens at dest view:`,P)),s>xk/f&&!I&&!P)return pe("esri-goto-debug")&&console.warn(`failed "auto" heuristic: linear animations must be...
  - shorter than ${xk/1e3/f}s, or
  - shorter than ${m/1e3}s and the destination is close enough to the starting screen, or
  - shorter than ${m/1e3}s and the start point is close enough to the destination screen`),!1}return!0}_([T()],Kp.prototype,"easing",void 0),_([T()],Kp.prototype,"view",void 0),_([T()],Kp.prototype,"viewpoint",void 0),Kp=_([Y("esri.views.2d.AnimationManager")],Kp);const uce=Kp;let dce=class{constructor(e){this.view=e,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this.stationary=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions,this._updateParameters.targetState.copy(this.view.state),this.view.animation&&!("then"in this.view.animation.target)&&(this._updateParameters.targetState.viewpoint=this.view.animation.target))},this.update=()=>{var f,m;if(this._updateRequested=!1,(f=this.view)==null?void 0:f.destroyed)return;const{allLayerViews:i,graphicsView:n,labelManager:s,state:{id:h}}=this.view;i.forEach(this._updateLayerView,this),s!=null&&(s.lastUpdateId!==h&&(s.viewChange(),s.lastUpdateId=h),s.updateRequested&&s.processUpdate(this._updateParameters)),n!=null&&(n.lastUpdateId!==h&&(n.viewChange(),n.lastUpdateId=h),n.updateRequested&&n.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||((m=this._frameTaskHandle)==null||m.pause())}}destroy(){this.stop()}start(){if(this._frameTaskHandle)return;const e=this.view;this.stationary=e.stationary,this._updateParameters={state:e.state,targetState:new IT,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:e.renderingOptions},this._stationaryHandle=Ee(()=>e.stationary,i=>{this.stationary=i,this.requestFrame()}),this._frameTaskHandle=Ff(this),this.requestUpdate()}stop(){var e;this._frameTaskHandle&&(this._updateRequested=!1,(e=this._stationaryHandle)==null||e.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(e){var s;if(!e.attached)return void this.requestUpdate();const i=this.view.state,n=e.lastUpdateId;n!=null&&(this.stationary||e.moving)||(e.moving=!0),n!==i.id&&e.viewChange(),this.stationary&&e.moving&&(e.moving=!1,e.moveEnd()),e.lastUpdateId=i.id,e.updateRequested&&e.processUpdate(this._updateParameters),"layerViews"in e&&((s=e.layerViews)==null||s.forEach(this._updateLayerView,this))}},pb=class extends Re{constructor(e){super(e),this._gotoTask=null}destroy(){this._gotoTask=null}async goTo(e,i){if(!e)return void Ce.getLogger(this).error("#goTo()","target cannot be null or undefined");const n=new _4;this.view.animation=n,await Zh(()=>this.view.ready,i);const s={...i,animate:(i==null?void 0:i.animate)??!ED(),animationMode:(i==null?void 0:i.animationMode)??"auto"},{extent:h,spatialReference:f,size:m,viewpoint:v,constraints:x,padding:M,allLayerViews:$}=this.view,I=kae(e,{extent:h,spatialReference:f,size:m,viewpoint:v,constraints:x,padding:M,allLayerViews:$,pickClosestTarget:(i==null?void 0:i.pickClosestTarget)??!0});return n==null||n.update(I),this._gotoTask={},s.animate?this._gotoAnimated(I,s):this._gotoImmediate(I,s)}_gotoImmediate(e,i){const n=this._gotoTask,s=this.view.animation,h=e.then(f=>{if(Zt(i),n!==this._gotoTask)throw new fe("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=s.target=f,s.finish()});return this._cancellableGoTo(n,s,h,i)}_gotoAnimated(e,i){const n=this._gotoTask,s=this.view.animation;if(!s)return Promise.resolve();const h=e.then(f=>{if(Zt(i),n!==this._gotoTask)throw new fe("view:goto-interrupted","Goto was interrupted");return s.update(f),this.view.animationManager.animate(s,this.view.viewpoint,i),s.when().then(()=>{},()=>{})});return this._cancellableGoTo(n,s,h,i)}_cancellableGoTo(e,i,n,s){const h=()=>e===this._gotoTask;return bm(n,s).finally(()=>{h()&&(i.done||i.stop())})}};_([T({constructOnly:!0})],pb.prototype,"view",void 0),pb=_([Y("esri.views.2d.GoToManager")],pb);function hi(){return Promise.all([be(()=>import("./webglDeps-5GIKjoOS.js"),__vite__mapDeps([198,75,73,43,74,199,200,201]),import.meta.url),be(()=>import("./mapViewDeps-B-dDO8Py.js"),__vite__mapDeps([202,108,83,81,82,13,84,72,85,69,86,76,87,31,146,2,203,118,90,43,77,78,37,73,74,75,71,44,79,91,92,93,204,205,206,201,207,200,99,128,127,15,12,16,126,198,199,208,96,209,70,80,28,26,25,21,19,9,210,211,212,120,213,214,215,216,57,217,94,218,89,219,220,221,222,223,224,225]),import.meta.url)])}const t1=()=>hi().then(()=>be(()=>import("./TileLayerView2D-SBjoBotU.js"),__vite__mapDeps([226,108,84,81,82,83,13,72,85,69,86,76,87,31,146,2,118,205,204,79,43,73,206,71,74,75,44,201,207,200,99,128,127,92,15,12,16,126,208,96,209,70,77,78,37,80,28,26,25,21,19,9,57,218,93,90,91,211,212,120,219,220,227,228,224,229,230,222,223,231,232,233,234,235]),import.meta.url)),xp=()=>hi().then(()=>be(()=>import("./FeatureLayerView2D-DITXv_oo.js").then(t=>t.F),__vite__mapDeps([236,205,15,12,13,16,237,150,79,229,204,69,43,73,223,77,78,37,74,75,71,72,44,76,224,206,201,207,200,99,128,127,92,96,88,238,141,173,169,80,87,31,143,3,81,82,83,84,85,86,203,118,218,93,239,166,235,231,232]),import.meta.url)),Sk={"base-dynamic":()=>hi().then(()=>be(()=>import("./BaseDynamicLayerView2D-CP8lGA8N.js"),__vite__mapDeps([240,241,206,69,71,72,73,43,74,75,44,76,201,207,200,99,204,205,79,128,127,92,15,12,13,16,229,242,228,231,232]),import.meta.url)),"base-tile":t1,"bing-maps":t1,catalog:()=>hi().then(()=>be(()=>import("./CatalogLayerView2D-DalTGeIq.js"),__vite__mapDeps([243,229,204,205,79,69,43,73,231]),import.meta.url)),"catalog-dynamic-group":()=>hi().then(()=>be(()=>import("./CatalogDynamicGroupLayerView2D-DRXGa5a1.js"),__vite__mapDeps([244,229,204,205,79,69,43,73,231]),import.meta.url)),"catalog-footprint":()=>hi().then(()=>be(()=>import("./CatalogFootprintLayerView2D-CNy4SiDF.js"),__vite__mapDeps([245,236,205,15,12,13,16,237,150,79,229,204,69,43,73,223,77,78,37,74,75,71,72,44,76,224,206,201,207,200,99,128,127,92,96,88,238,141,173,169,80,87,31,143,3,81,82,83,84,85,86,203,118,218,93,239,166,235,231,232]),import.meta.url)),csv:xp,"geo-rss":()=>hi().then(()=>be(()=>import("./GeoRSSLayerView2D-Cl2em_yX.js"),__vite__mapDeps([246,139,140,101,110,141,142,143,87,31,144,23,145,28,26,146,108,85,2,3,150,229,204,205,79,69,43,73,221,222,223,77,78,37,74,75,71,72,44,76,224,206,201,207,200,99,128,127,92,15,12,13,16,218,81,82,83,84,86,93,219,70,80,25,21,19,9,220,231]),import.meta.url)),feature:xp,geojson:xp,graphics:()=>hi().then(()=>be(()=>import("./GraphicsLayerView2D-DXR5ZtDA.js"),__vite__mapDeps([247,79,229,204,205,69,43,73,221,222,223,77,78,37,74,75,71,72,44,76,224,206,201,207,200,99,128,127,92,15,12,13,16,218,81,82,83,84,85,86,87,31,93,219,28,26,146,108,2,70,80,25,21,19,9,220,239,231]),import.meta.url)),group:()=>hi().then(()=>be(()=>import("./GroupLayerView2D-B68XeEJH.js"),__vite__mapDeps([248,229,204,205,79,69,43,73,231]),import.meta.url)),imagery:()=>hi().then(()=>be(()=>import("./ImageryLayerView2D-LBrgANFi.js"),__vite__mapDeps([249,250,75,73,43,201,44,105,106,206,69,71,72,74,76,207,200,99,204,205,79,128,127,92,15,12,13,16,229,219,28,26,81,82,83,84,85,86,87,31,146,108,2,70,77,78,37,80,25,21,19,9,218,93,220,230,222,223,224,241,228,242,111,237,235,231,232]),import.meta.url)),"imagery-tile":()=>hi().then(()=>be(()=>import("./ImageryTileLayerView2D-kbwoUAQd.js"),__vite__mapDeps([251,252,250,75,73,43,201,44,105,106,206,69,71,72,74,76,207,200,99,204,205,79,128,127,92,15,12,13,16,229,253,224,254,111,237,235,231,232]),import.meta.url)),kml:()=>hi().then(()=>be(()=>import("./KMLLayerView2D-BuUYD5J4.js"),__vite__mapDeps([255,256,139,140,101,110,141,142,143,87,31,144,23,145,28,26,146,108,85,2,3,150,228,204,205,79,69,43,73,241,206,71,72,74,75,44,76,201,207,200,99,128,127,92,15,12,13,16,229,221,222,223,77,78,37,224,218,81,82,83,84,86,93,219,70,80,25,21,19,9,220,231,111,210,198,199,211,212,120,209,118,213,253]),import.meta.url)),"knowledge-graph":()=>hi().then(()=>be(()=>import("./KnowledgeGraphLayerView2D-DJQBSIup.js"),__vite__mapDeps([257,229,204,205,79,69,43,73,231]),import.meta.url)),"link-chart":()=>hi().then(()=>be(()=>import("./KnowledgeGraphLayerView2D-DJQBSIup.js"),__vite__mapDeps([257,229,204,205,79,69,43,73,231]),import.meta.url)),"knowledge-graph-sublayer":xp,"map-image":()=>hi().then(()=>be(()=>import("./MapImageLayerView2D-DXQYM30r.js"),__vite__mapDeps([258,241,206,69,71,72,73,43,74,75,44,76,201,207,200,99,204,205,79,128,127,92,15,12,13,16,229,219,28,26,81,82,83,84,85,86,87,31,146,108,2,70,77,78,37,80,25,21,19,9,218,93,220,230,222,223,224,242,228,231,259,234,237,232,233,235]),import.meta.url)),"map-notes":()=>hi().then(()=>be(()=>import("./MapNotesLayerView2D-C2vJc1bQ.js"),__vite__mapDeps([260,79,229,204,205,69,43,73,221,222,223,77,78,37,74,75,71,72,44,76,224,206,201,207,200,99,128,127,92,15,12,13,16,218,81,82,83,84,85,86,87,31,93,219,28,26,146,108,2,70,80,25,21,19,9,220,231]),import.meta.url)),media:()=>hi().then(()=>be(()=>import("./MediaLayerView2D-wtMvpa9E.js"),__vite__mapDeps([261,140,101,110,141,142,143,87,31,144,139,23,145,28,26,146,108,85,2,3,262,220,84,81,82,83,13,72,69,86,76,118,205,204,79,43,73,206,71,74,75,44,201,207,200,99,128,127,92,15,12,16,126,208,96,209,70,77,78,37,80,25,21,19,9,57,218,93,90,91,211,212,120,219,217,94,263,229,231]),import.meta.url)),"ogc-feature":()=>hi().then(()=>be(()=>import("./OGCFeatureLayerView2D-AocnX5XW.js"),__vite__mapDeps([264,236,205,15,12,13,16,237,150,79,229,204,69,43,73,223,77,78,37,74,75,71,72,44,76,224,206,201,207,200,99,128,127,92,96,88,238,141,173,169,80,87,31,143,3,81,82,83,84,85,86,203,118,218,93,239,166,235,231,232]),import.meta.url)),"open-street-map":t1,"oriented-imagery":xp,route:()=>hi().then(()=>be(()=>import("./RouteLayerView2D-DqUwa-Y7.js"),__vite__mapDeps([265,266,79,229,204,205,69,43,73,221,222,223,77,78,37,74,75,71,72,44,76,224,206,201,207,200,99,128,127,92,15,12,13,16,218,81,82,83,84,85,86,87,31,93,219,28,26,146,108,2,70,80,25,21,19,9,220,231]),import.meta.url)),stream:()=>hi().then(()=>be(()=>import("./StreamLayerView2D-ggK2TAYZ.js"),__vite__mapDeps([267,150,236,205,15,12,13,16,237,79,229,204,69,43,73,223,77,78,37,74,75,71,72,44,76,224,206,201,207,200,99,128,127,92,96,88,238,141,173,169,80,87,31,143,3,81,82,83,84,85,86,203,118,218,93,239,166,235,231,232]),import.meta.url)),"subtype-group":()=>hi().then(()=>be(()=>import("./SubtypeGroupLayerView2D-DpkycEUa.js"),__vite__mapDeps([268,236,205,15,12,13,16,237,150,79,229,204,69,43,73,223,77,78,37,74,75,71,72,44,76,224,206,201,207,200,99,128,127,92,96,88,238,141,173,169,80,87,31,143,3,81,82,83,84,85,86,203,118,218,93,239,166,235,231,232]),import.meta.url)),tile:t1,"vector-tile":()=>hi().then(()=>be(()=>import("./VectorTileLayerView2D-CKfsDG5_.js"),__vite__mapDeps([269,126,86,43,73,57,216,118,93,23,84,75,201,127,206,69,71,72,74,44,76,207,200,99,204,205,79,128,92,15,12,13,16,224,18,129,130,108,229,231]),import.meta.url)),video:()=>hi().then(()=>be(()=>import("./VideoLayerView2D-CDsZlIZM.js"),__vite__mapDeps([270,271,263,99,206,69,71,72,73,43,74,75,44,76,201,207,200,204,205,79,128,127,92,15,12,13,16,229,221,222,223,77,78,37,224,218,81,82,83,84,85,86,87,31,93,219,28,26,146,108,2,70,80,25,21,19,9,220,231]),import.meta.url)),wcs:()=>hi().then(()=>be(()=>import("./ImageryTileLayerView2D-kbwoUAQd.js"),__vite__mapDeps([251,252,250,75,73,43,201,44,105,106,206,69,71,72,74,76,207,200,99,204,205,79,128,127,92,15,12,13,16,229,253,224,254,111,237,235,231,232]),import.meta.url)),"web-tile":t1,wfs:xp,wms:()=>hi().then(()=>be(()=>import("./WMSLayerView2D-C03TdzzM.js"),__vite__mapDeps([272,241,206,69,71,72,73,43,74,75,44,76,201,207,200,99,204,205,79,128,127,92,15,12,13,16,229,242,228,231,232,273,237]),import.meta.url)),wmts:()=>hi().then(()=>be(()=>import("./WMTSLayerView2D-DZVgzFSJ.js"),__vite__mapDeps([274,227,228,204,205,79,69,43,73,206,71,72,74,75,44,76,201,207,200,99,128,127,92,15,12,13,16,224,229,231,232]),import.meta.url)),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"integrated-mesh-3dtiles":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};function pce(t){const e=t.declaredClass?t.declaredClass.slice(t.declaredClass.lastIndexOf(".")+1):"Unknown",i=e.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new fe(`${i}:view-not-supported`,`${e} is not supported in 2D`)}const Tk={hasLayerViewModule:t=>Sk[t.type]!=null,importLayerView:t=>{const e=Sk[t.type];if(e==null)throw pce(t);return e(t)}};function fce(t,e){const{spatialReference:i}=e,n=[e.x,e.y];let s=Number.POSITIVE_INFINITY,h=0,f=0;const m=[0,0],v=t.type==="extent"?[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]:t.rings;for(const x of v)for(let M=0;M<x.length-1;M++){vJ(m,n,x,M);const $=kc(n,m);$<s&&(s=$,h=m[0],f=m[1])}return{coordinate:new De({x:h,y:f,spatialReference:i}),distance:s}}var C4;let cd=C4=class extends eT(Re){constructor(t){super(t),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return Wr(this.geometry,this.spatialReference)}catch(t){return Ce.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:t}),null}return this.geometry}constrain(t,e){if(this.normalizedGeometry==null)return t;const i=t.targetGeometry;if(this.normalizedGeometry.type==="extent"?Mm(this.normalizedGeometry,i):mS(this.normalizedGeometry,i))return t;const{coordinate:n}=fce(this.normalizedGeometry,i);return n&&(t.targetGeometry=n),t}clone(){var t,e;return new C4({geometry:(t=this.geometry)==null?void 0:t.clone(),spatialReference:(e=this.spatialReference)==null?void 0:e.clone()})}};_([T({constructOnly:!0})],cd.prototype,"geometry",void 0),_([T({readOnly:!0})],cd.prototype,"normalizedGeometry",null),_([T({constructOnly:!0})],cd.prototype,"spatialReference",void 0),cd=C4=_([Y("esri.views.2d.constraints.GeometryConstraint")],cd);var I4;let K1=I4=class extends eT(Re){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(t,e){return this.enabled&&e&&(this.rotationEnabled||(t.rotation=e.rotation)),t}clone(){return new I4({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};_([T()],K1.prototype,"enabled",void 0),_([T()],K1.prototype,"rotationEnabled",void 0),K1=I4=_([Y("esri.views.2d.constraints.RotationConstraint")],K1);const Oz=K1;var A4;let Pr=A4=class extends eT(Re){constructor(t){super(t),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let t,{lods:e,minScale:i,maxScale:n,minZoom:s,maxZoom:h}=this,f=-1,m=-1,v=!1,x=!1;if(i!==0&&n!==0&&i<n&&([i,n]=[n,i]),!(e!=null&&e.length))return this._set("effectiveMinScale",i),void this._set("effectiveMaxScale",n);e=e.map(M=>M.clone()),e.sort((M,$)=>$.scale-M.scale),e.forEach((M,$)=>M.level=$);for(const M of e)!v&&i>0&&i>=M.scale&&(f=M.level,v=!0),!x&&n>0&&n>=M.scale&&(m=t?t.level:-1,x=!0),t=M;s===-1&&(s=i===0?0:f),h===-1&&(h=n===0?e.length-1:m),s=Math.max(s,0),s=Math.min(s,e.length-1),h=Math.max(h,0),h=Math.min(h,e.length-1),s>h&&([s,h]=[h,s]),i=e[s].scale,n=e[h].scale,e.splice(0,s),e.splice(h-s+1,e.length),e.forEach((M,$)=>{this._lodByScale[M.scale]=M,this._scales[$]=M.scale}),this._set("effectiveLODs",e),this._set("effectiveMinZoom",s),this._set("effectiveMaxZoom",h),this._set("effectiveMinScale",i),this._set("effectiveMaxScale",n)}constrain(t,e){if(e&&t.scale===e.scale)return t;const i=this.effectiveMinScale,n=this.effectiveMaxScale,s=t.targetGeometry,h=e&&e.targetGeometry,f=n!==0&&t.scale<n,m=i!==0&&t.scale>i;if(f||m){const v=m?i:n;if(e&&h){const x=(v-e.scale)/(t.scale-e.scale);s.x=h.x+(s.x-h.x)*x,s.y=h.y+(s.y-h.y)*x}t.scale=v}return this.snapToZoom&&this.effectiveLODs&&(t.scale=this._getClosestScale(t.scale)),t}fit(t){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(t,null);const e=this.scaleToZoom(t.scale),i=Math.abs(e-Math.floor(e));return t.scale=this.zoomToScale(i>.99?Math.round(e):Math.floor(e)),t}zoomToScale(t){if(!this.effectiveLODs)return 0;t-=this.effectiveMinZoom,t=Math.max(0,t);const e=this._scales;if(t<=0)return e[0];if(t>=e.length)return e[e.length-1];const i=Math.floor(t),n=Math.ceil(t);return e[i]+(t-i)*(e[n]-e[i])}scaleToZoom(t){if(!this.effectiveLODs)return-1;const e=this._scales;let i,n;if(t>=e[0])return this.effectiveMinZoom;if(t<=e[e.length-1])return this.effectiveMaxZoom;for(let s=0;s<e.length-1;s++){if(i=e[s],n=e[s+1],n===t)return s+this.effectiveMinZoom+1;if(i>t&&n<t)return s+this.effectiveMinZoom+1-(t-n)/(i-n)}return-1}snapToClosestScale(t){if(!this.effectiveLODs)return t;const e=this.scaleToZoom(t);return this.zoomToScale(Math.round(e))}snapToNextScale(t,e=.5){if(!this.effectiveLODs)return t*e;const i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i+1)}snapToPreviousScale(t,e=2){if(!this.effectiveLODs)return t*e;const i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i-1)}clone(){return new A4({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(t){return this._lodByScale[t]||(t=this._scales.reduce((e,i)=>Math.abs(i-t)<=Math.abs(e-t)?i:e,this._scales[0])),this._lodByScale[t].scale}};_([T({readOnly:!0})],Pr.prototype,"effectiveLODs",void 0),_([T({readOnly:!0})],Pr.prototype,"effectiveMinZoom",void 0),_([T({readOnly:!0})],Pr.prototype,"effectiveMaxZoom",void 0),_([T({readOnly:!0})],Pr.prototype,"effectiveMinScale",void 0),_([T({readOnly:!0})],Pr.prototype,"effectiveMaxScale",void 0),_([T()],Pr.prototype,"lods",void 0),_([T()],Pr.prototype,"minZoom",void 0),_([T()],Pr.prototype,"maxZoom",void 0),_([T()],Pr.prototype,"minScale",void 0),_([T()],Pr.prototype,"maxScale",void 0),_([T()],Pr.prototype,"snapToZoom",void 0),Pr=A4=_([Y("esri.views.2d.constraints.ZoomConstraint")],Pr);const Pz=Pr,gce={base:null,key:"type",typeMap:{extent:Lt,polygon:En}};let Li=class extends Re{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new Pe}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){var e,i,n;return`${(e=this._zoom)==null?void 0:e.uid}/${(i=this._rotation)==null?void 0:i.uid}/${(n=this._geometry)==null?void 0:n.uid}`}get _geometry(){var i,n;const e=this._get("_geometry");return e&&this.geometry===e.geometry&&((i=this.view)==null?void 0:i.constraintsInfo.spatialReference)===e.spatialReference?e:new cd({geometry:this.geometry,spatialReference:(n=this.view)==null?void 0:n.constraintsInfo.spatialReference})}get _rotation(){return new Oz({rotationEnabled:this.rotationEnabled})}get _zoom(){var v;const e=this._get("_zoom"),i=this.lods||((v=this.view)==null?void 0:v.constraintsInfo.lods),n=this.minZoom,s=this.maxZoom,h=this.minScale,f=this.maxScale,m=this.snapToZoom;return e&&e.lods===i&&e.minZoom===n&&e.maxZoom===s&&e.minScale===h&&e.maxScale===f&&e.snapToZoom===m?e:new Pz({lods:i,minZoom:n,maxZoom:s,minScale:h,maxScale:f,snapToZoom:m})}canZoomInTo(e){const i=this.effectiveMaxScale;return i===0||e>=i}canZoomOutTo(e){const i=this.effectiveMinScale;return i===0||e<=i}constrain(e,i){return this._zoom.constrain(e,i),this._rotation.constrain(e,i),this._geometry.constrain(e,i),this.customConstraints.forEach(n=>n.constrain(e,i)),e}constrainByGeometry(e){return this._geometry.constrain(e),this.customConstraints.forEach(i=>{var n;return(n=i.applyPanConstraint)==null?void 0:n.call(i,e)}),e}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};_([T({readOnly:!0})],Li.prototype,"effectiveLODs",null),_([T({readOnly:!0})],Li.prototype,"effectiveMinScale",null),_([T({readOnly:!0})],Li.prototype,"effectiveMaxScale",null),_([T({readOnly:!0})],Li.prototype,"effectiveMinZoom",null),_([T({readOnly:!0})],Li.prototype,"effectiveMaxZoom",null),_([T({types:gce,value:null})],Li.prototype,"geometry",null),_([T({type:[Js]})],Li.prototype,"lods",void 0),_([T()],Li.prototype,"minScale",void 0),_([T()],Li.prototype,"maxScale",void 0),_([T()],Li.prototype,"minZoom",void 0),_([T()],Li.prototype,"maxZoom",void 0),_([T()],Li.prototype,"rotationEnabled",void 0),_([T()],Li.prototype,"snapToZoom",void 0),_([T({type:Pe})],Li.prototype,"customConstraints",void 0),_([T()],Li.prototype,"view",void 0),_([T({readOnly:!0})],Li.prototype,"version",null),_([T({type:cd,readOnly:!0})],Li.prototype,"_geometry",null),_([T({type:Oz})],Li.prototype,"_rotation",null),_([T({readOnly:!0,type:Pz})],Li.prototype,"_zoom",null),Li=_([Y("esri.views.2d.MapViewConstraints")],Li);const Rz=Li;let tu=class Ju{static getId(e,i,n,s){return typeof e=="object"?`${e.level}/${e.row}/${e.col}/${e.world}`:`${e}/${i}/${n}/${s}`}constructor(e,i,n,s){this.set(e,i,n,s)}get key(){return this}get id(){return this.toString()}get normalizedId(){return`${this.level}/${this.row}/${this.col}`}set id(e){this.set(e)}get hash(){const e=4095&this.row,i=4095&this.col,n=63&this.level;return(3&this.world)<<30|i<<22|e<<8|n}acquire(e,i,n,s){this.set(e,i,n,s)}contains(e){const i=e.level-this.level;return i>=0&&this.row===e.row>>i&&this.col===e.col>>i&&this.world===e.world}containsChild(e){const i=e.level-this.level;return i>0&&this.row===e.row>>i&&this.col===e.col>>i&&this.world===e.world}equals(e){return this.level===e.level&&this.row===e.row&&this.col===e.col&&this.world===e.world}clone(){return new Ju(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(e,i,n,s){if(e==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof e=="object")this.level=e.level||0,this.row=e.row||0,this.col=e.col||0,this.world=e.world||0;else if(typeof e=="string"){const[h,f,m,v]=e.split("/");this.level=parseFloat(h),this.row=parseFloat(f),this.col=parseFloat(m),this.world=parseFloat(v)}else this.level=+e,this.row=+i,this.col=+n,this.world=+s||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new Ju(this.level-1,this.row>>1,this.col>>1,this.world)}getNeighborId(e,i){return`${this.level}/${this.row+i}/${this.col+e}/${this.world}`}getChildKeys(){const e=this.level+1,i=this.row<<1,n=this.col<<1,s=this.world;return[new Ju(e,i,n,s),new Ju(e,i,n+1,s),new Ju(e,i+1,n,s),new Ju(e,i+1,n+1,s)]}compareRowMajor(e){return this.row<e.row?-1:this.row>e.row?1:this.col<e.col?-1:this.col>e.col?1:0}};tu.pool=new Qd(tu,null,null,25,50);function Hc(t,e){return[t,e]}function vu(t,e,i){return t[0]=e,t[1]=i,t}function mce(t,e,i,n,s){return t[0]=e,t[1]=i,t[2]=n,t[3]=s,t}const ko=new tu("0/0/0/0");let yce=class Lz{static create(e,i,n=null){const s=er(e.spatialReference),h=i.origin||Hc(e.origin.x,e.origin.y),f=Hc(e.size[0]*i.resolution,e.size[1]*i.resolution),m=Hc(-1/0,-1/0),v=Hc(1/0,1/0),x=Hc(1/0,1/0);n!=null&&(vu(m,Math.max(0,Math.floor((n.xmin-h[0])/f[0])),Math.max(0,Math.floor((h[1]-n.ymax)/f[1]))),vu(v,Math.max(0,Math.floor((n.xmax-h[0])/f[0])),Math.max(0,Math.floor((h[1]-n.ymin)/f[1]))),vu(x,v[0]-m[0]+1,v[1]-m[1]+1));const{cols:M,rows:$}=i;let I,P,L,z;return!n&&M&&$&&(vu(m,M[0],$[0]),vu(v,M[1],$[1]),vu(x,M[1]-M[0]+1,$[1]-$[0]+1)),e.isWrappable?(I=Hc(Math.ceil(Math.round((s.valid[1]-s.valid[0])/i.resolution)/e.size[0]),x[1]),P=Hc(Math.floor((s.origin[0]-h[0])/f[0]),m[1]),L=Hc(I[0]+P[0]-1,v[1]),z=!0):(P=m,L=v,I=x,z=!1),new Lz(i.level,i.resolution,i.scale,h,m,v,x,f,P,L,I,z)}constructor(e,i,n,s,h,f,m,v,x,M,$,I){this.level=e,this.resolution=i,this.scale=n,this.origin=s,this.first=h,this.last=f,this.size=m,this.norm=v,this.worldStart=x,this.worldEnd=M,this.worldSize=$,this.wrap=I}normalizeCol(e){if(!this.wrap)return e;const i=this.worldSize[0];return e<0?i-1-Math.abs((e+1)%i):e%i}denormalizeCol(e,i){return this.wrap?this.worldSize[0]*i+e:e}getWorldForColumn(e){return this.wrap?Math.floor(e/this.worldSize[0]):0}getFirstColumnForWorld(e){return e*this.worldSize[0]+this.first[0]}getLastColumnForWorld(e){return e*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(e){return(e-this.origin[0])/this.norm[0]}getXForColumn(e){return this.origin[0]+e*this.norm[0]}getRowForY(e){return(this.origin[1]-e)/this.norm[1]}getYForRow(e){return this.origin[1]-e*this.norm[1]}getTileBounds(e,i,n=!1){ko.set(i);const s=n?ko.col:this.denormalizeCol(ko.col,ko.world),h=ko.row;return mce(e,this.getXForColumn(s),this.getYForRow(h+1),this.getXForColumn(s+1),this.getYForRow(h)),e}getTileCoords(e,i,n=!1){ko.set(i);const s=n?ko.col:this.denormalizeCol(ko.col,ko.world);return Array.isArray(e)?vu(e,this.getXForColumn(s),this.getYForRow(ko.row)):(e.x=this.getXForColumn(s),e.y=this.getYForRow(ko.row)),e}},im=class{constructor(){this.spans=[]}acquire(e){this.lodInfo=e}release(){this.lodInfo=null,this.spans.length=0}*keys(){const e=this.lodInfo;for(const{row:i,colFrom:n,colTo:s}of this.spans)for(let h=n;h<=s;h++){const f=e.getWorldForColumn(h);yield new tu(e.level,i,e.normalizeCol(h),f)}}forEach(e,i){const{spans:n,lodInfo:s}=this,{level:h}=s;if(n.length!==0)for(const{row:f,colFrom:m,colTo:v}of n)for(let x=m;x<=v;x++)e.call(i,h,f,s.normalizeCol(x),s.getWorldForColumn(x))}};im.pool=new Qd(im);let F_=class{constructor(e,i,n){this.row=e,this.colFrom=i,this.colTo=n}};const fi=new tu("0/0/0/0");let vce=class Nz{static create(e,i){e[1]>i[1]&&([e,i]=[i,e]);const[n,s]=e,[h,f]=i,m=h-n,v=f-s,x=v!==0?m/v:0,M=(Math.ceil(s)-s)*x,$=(Math.floor(s)-s)*x;return new Nz(n,Math.floor(s),Math.ceil(f),x,m<0?M:$,m<0?$:M,m<0?h:n,m<0?n:h)}constructor(e,i,n,s,h,f,m,v){this.x=e,this.ymin=i,this.ymax=n,this.invM=s,this.leftAdjust=h,this.rightAdjust=f,this.leftBound=m,this.rightBound=v}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}};const Kr=[[0,0],[0,0],[0,0],[0,0]],bce=1e-6;let wce=class{constructor(e,i=null,n=e.lods[0].level,s=e.lods[e.lods.length-1].level){this.tileInfo=e,this.fullExtent=i,this.scales=[],this._infoByScale={},this._infoByLevel={};const h=e.lods.filter(m=>m.level>=n&&m.level<=s);this.minScale=h[0].scale,this.maxScale=h[h.length-1].scale;const f=this._lodInfos=h.map(m=>yce.create(e,m,i));h.forEach((m,v)=>{this._infoByLevel[m.level]=f[v],this._infoByScale[m.scale]=f[v],this.scales[v]=m.scale},this),this._wrap=e.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(e){return this._infoByLevel[typeof e=="number"?e:e.level]}getTileBounds(e,i,n=!1){fi.set(i);const s=this._infoByLevel[fi.level];return s?s.getTileBounds(e,fi,n):e}getTileCoords(e,i,n=!1){fi.set(i);const s=this._infoByLevel[fi.level];return s?s.getTileCoords(e,fi,n):e}getTileCoverage(e,i=192,n=!0,s="closest"){if(!n&&(e.scale>this.minScale||e.scale<this.maxScale))return null;const h=s==="closest"?this.getClosestInfoForScale(e.scale):this.getSmallestInfoForScale(e.scale),f=im.pool.acquire(h),m=this._wrap;let v,x,M,$=1/0,I=-1/0;const P=f.spans;Kr[0][0]=Kr[0][1]=Kr[1][1]=Kr[3][0]=-i,Kr[1][0]=Kr[2][0]=e.size[0]+i,Kr[2][1]=Kr[3][1]=e.size[1]+i;for(const U of Kr)e.toMap(U,U),U[0]=h.getColumnForX(U[0]),U[1]=h.getRowForY(U[1]);const L=[];let z=3;for(let U=0;U<4;U++){if(Kr[U][1]===Kr[z][1]){z=U;continue}const W=vce.create(Kr[U],Kr[z]);$=Math.min(W.ymin,$),I=Math.max(W.ymax,I),L[W.ymin]===void 0&&(L[W.ymin]=[]),L[W.ymin].push(W),z=U}if($==null||I==null||I-$>100)return null;let F=[];for(v=$;v<I;){L[v]!=null&&(F=F.concat(L[v])),x=1/0,M=-1/0;for(let U=F.length-1;U>=0;U--){const W=F[U];x=Math.min(x,W.getLeftCol()),M=Math.max(M,W.getRightCol())}if(x=Math.floor(x),M=Math.floor(M),v>=h.first[1]&&v<=h.last[1])if(m)if(h.size[0]<h.worldSize[0]){const U=Math.floor(M/h.worldSize[0]);for(let W=Math.floor(x/h.worldSize[0]);W<=U;W++)P.push(new F_(v,Math.max(h.getFirstColumnForWorld(W),x),Math.min(h.getLastColumnForWorld(W),M)))}else P.push(new F_(v,x,M));else x>h.last[0]||M<h.first[0]||(x=Math.max(x,h.first[0]),M=Math.min(M,h.last[0]),P.push(new F_(v,x,M)));v+=1;for(let U=F.length-1;U>=0;U--){const W=F[U];W.ymax>=v?W.incrRow():F.splice(U,1)}}return f}getTileParentId(e){fi.set(e);const i=this._infoByLevel[fi.level],n=this._lodInfos.indexOf(i)-1;return n<0?null:(this._getTileIdAtLOD(fi,this._lodInfos[n],fi),fi.id)}getTileResolution(e){const i=this._infoByLevel[typeof e=="object"?e.level:e];return i?i.resolution:-1}getTileScale(e){const i=this._infoByLevel[e.level];return i?i.scale:-1}intersects(e,i){fi.set(i);const n=this._infoByLevel[fi.level],s=e.lodInfo;if(s.resolution>n.resolution){this._getTileIdAtLOD(fi,s,fi);const f=s.denormalizeCol(fi.col,fi.world);for(const m of e.spans)if(m.row===fi.row&&m.colFrom<=f&&m.colTo>=f)return!0}if(s.resolution<n.resolution){const[f,m,v,x]=e.spans.reduce((z,F)=>(z[0]=Math.min(z[0],F.row),z[1]=Math.max(z[1],F.row),z[2]=Math.min(z[2],F.colFrom),z[3]=Math.max(z[3],F.colTo),z),[1/0,-1/0,1/0,-1/0]),M=n.denormalizeCol(fi.col,fi.world),$=s.getColumnForX(n.getXForColumn(M)),I=s.getRowForY(n.getYForRow(fi.row)),P=s.getColumnForX(n.getXForColumn(M+1))-1,L=s.getRowForY(n.getYForRow(fi.row+1))-1;return!($>x||P<v||I>m||L<f)}const h=s.denormalizeCol(fi.col,fi.world);return e.spans.some(f=>f.row===fi.row&&f.colFrom<=h&&f.colTo>=h)}normalizeBounds(e,i,n){if(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],this._wrap){const s=er(this.tileInfo.spatialReference),h=-n*(s.valid[1]-s.valid[0]);e[0]+=h,e[2]+=h}return e}getSmallestInfoForScale(e){const i=this.scales;if(this._infoByScale[e])return this._infoByScale[e];if(e>i[0])return this._infoByScale[i[0]];for(let n=1;n<i.length-1;n++)if(e>i[n]+bce)return this._infoByScale[i[n-1]];return this._infoByScale[i[i.length-1]]}getClosestInfoForScale(e){const i=this.scales;return this._infoByScale[e]||(e=i.reduce((n,s)=>Math.abs(s-e)<Math.abs(n-e)?s:n,i[0])),this._infoByScale[e]}scaleToLevel(e){const i=this.scales;if(this._infoByScale[e])return this._infoByScale[e].level;for(let n=i.length-1;n>=0;n--)if(e<i[n])return n===i.length-1?this._infoByScale[i[i.length-1]].level:this._infoByScale[i[n]].level+(i[n]-e)/(i[n]-i[n+1]);return this._infoByScale[i[0]].level}scaleToZoom(e){return this.tileInfo.scaleToZoom(e)}zoomToScale(e){return this.tileInfo.zoomToScale(e)}_getTileIdAtLOD(e,i,n){const s=this._infoByLevel[n.level];return e.set(n),i.resolution<s.resolution?null:(i.resolution===s.resolution||(e.level=i.level,e.col=Math.floor(n.col*s.resolution/i.resolution+.01),e.row=Math.floor(n.row*s.resolution/i.resolution+.01)),e)}},_ce=class{constructor(e,i){this.item=e,this.controller=i,this.promise=null}},xce=class{constructor(e){this._schedule=null,this._task=null,this._deferreds=new lb,this._controllers=new lb,this._processingItems=new lb,this._pausedSignal=Yg(!1),this.concurrency=1,e.concurrency&&(this.concurrency=e.concurrency),this._queue=new s2(e.peeker),this.process=e.process;const i=e.scheduler;e.priority&&i&&(this._task=i.registerTask(e.priority,this))}destroy(){this.clear(),this._schedule=Rt(this._schedule),this._task=Rt(this._task)}get updating(){var e;return!!((e=this._task)!=null&&e.updating)||this.running}get length(){return this._processingItems.size+this._queue.length}abort(e){const i=this._controllers.get(e);i&&i.abort()}clear(){this._queue.clear();const e=[];this._controllers.forEach(i=>e.push(i)),this._controllers.clear(),e.forEach(i=>i.abort()),this._processingItems.clear(),this._cancelNext()}forEach(e){this._deferreds.forEach((i,n)=>e(n))}get(e){const i=this._deferreds.get(e);return i?i.promise:void 0}isOngoing(e){return this._processingItems.has(e)}has(e){return this._deferreds.has(e)}pause(){this._pausedSignal.value||(this._pausedSignal.value=!0,this._cancelNext())}push(e,i){const n=this.get(e);if(n)return n;const s=new AbortController;let h=null;i&&(h=ys(i,()=>s.abort()));const f=()=>{const M=this._processingItems.get(e);M&&M.controller.abort(),m(),x.reject(Yt())},m=()=>{v.remove(),h!=null&&h.remove(),this._removeItem(e),this._queue.remove(e),this._scheduleNext()},v=z6(s.signal,f),x=Ts();return this._deferreds.set(e,x),this._controllers.set(e,s),x.promise.then(m,m),this._queue.push(e),this._scheduleNext(),x.promise}last(){return this._queue.last()}lastPromise(){const e=this.last();return e?this.get(e):null}peek(){return this._queue.peek()}popLast(){var i;const e=this._queue.popLast();return e&&((i=this._deferreds.get(e))==null||i.reject(Yt("Removed from queue")),this._removeItem(e)),e}reset(){const e=[];this._processingItems.forEach(i=>e.push(i)),this._processingItems.clear();for(const i of e)this._queue.push(i.item),i.controller.abort();this._scheduleNext()}resume(){this._pausedSignal.value&&(this._pausedSignal.value=!1,this._scheduleNext())}takeAll(){const e=[];for(;this._queue.length;)e.push(this._queue.pop());return this.clear(),e}get running(){return!this._pausedSignal.value&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(e){for(;!e.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),e.madeProgress()}_removeItem(e){this._deferreds.delete(e),this._controllers.delete(e),this._processingItems.delete(e)}_scheduleNext(){this._task||this._pausedSignal.value||this._schedule||(this._schedule=wm(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(e,i){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).resolve(i))}_processError(e,i){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).reject(i))}_canProcessFulfillment(e){return!!this._deferreds.get(e.item)&&this._processingItems.get(e.item)===e}_process(e){if(e==null)return;let i;const n=new AbortController,s=new _ce(e,n);this._processingItems.set(e,s);try{i=this.process(e,n.signal)}catch(h){this._processError(s,h)}Tc(i)?(s.promise=i,i.then(h=>this._processResult(s,h),h=>this._processError(s,h))):this._processResult(s,i)}get test(){}};function Sce(t,e){return t.length=0,e.forEach(i=>t.push(i)),t}const j_=new Set,zy=[],Sp=new Map,Mk=[0,0];let uh=class extends Re{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:i,strategy:n}=this;this._queue=new xce({concurrency:e,process:(s,h)=>{const f=this._keyToItem.get(s);return i(f,{signal:h})},peeker:n==="scale-first"?s=>this._peekByScaleFirst(s):s=>this._peekByCenterFirst(s)})}destroy(){this.clear(),this._queue=yt(this._queue)}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}abort(e){const i=typeof e=="string"?e:e.id;this._queue.abort(i)}clear(){this._queue.clear(),this._keyToItem.clear()}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const i=typeof e=="string"?e:e.id;return this.has(i)&&this._queue.isOngoing(i)}pause(){this._queue.pause()}push(e){const i=e.key.id;if(this._queue.has(i))return this._queue.get(i);const n=this._queue.push(i),s=()=>{this._keyToItem.delete(i)};return this._keyToItem.set(i,e),n.then(s,s),n}reset(){this._queue.reset()}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const i=this.tileInfoView;let n=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY;e.forEach(M=>{const $=this._keyToItem.get(M),I=this.tileInfoView.getTileScale($.key);Sp.has(I)||(Sp.set(I,[]),n=Math.max(I,n),s=Math.min(I,s)),Sp.get(I).push($.key),j_.add(I)});let h=this.state.scale;Sp.has(h)||(Sce(zy,j_),zy.sort((M,$)=>M-$),h=zy.reduce((M,$)=>Math.abs($-h)<Math.abs(M-h)?$:M,zy[0])),h=Math.min(h,n),h=Math.max(h,s);const f=Sp.get(h),m=i.getClosestInfoForScale(h),v=m.getColumnForX(this.state.center[0]),x=m.getRowForY(this.state.center[1]);return f.sort((M,$)=>{const I=m.denormalizeCol(M.col,M.world),P=m.denormalizeCol($.col,$.world);return Math.sqrt((v-I)*(v-I)+(x-M.row)*(x-M.row))-Math.sqrt((v-P)*(v-P)+(x-$.row)*(x-$.row))}),j_.clear(),Sp.clear(),f[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const i=this.tileInfoView,n=this.state.center;let s,h=Number.POSITIVE_INFINITY;return e.forEach(f=>{const m=this._keyToItem.get(f);i.getTileCoords(Mk,m.key);const v=kc(Mk,n);v<h&&(h=v,s=m.key)}),s.id}};_([T({constructOnly:!0})],uh.prototype,"concurrency",void 0),_([T({constructOnly:!0})],uh.prototype,"process",void 0),_([T()],uh.prototype,"state",void 0),_([T({constructOnly:!0})],uh.prototype,"strategy",void 0),_([T({constructOnly:!0})],uh.prototype,"tileInfoView",void 0),uh=_([Y("esri.views.2d.tiling.TileQueue")],uh);const j7e=uh;let Tce=class{constructor(e,i,n){this.maxSize=e,this._tileInfoView=i,this._removedFunc=n,this._tilePerId=new Map,this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear(),this._tileKeysPerLevel=[]}has(e){return this._tilePerId.has(e)}get(e){return this._tilePerId.get(e)}pop(e){const i=this._tilePerId.get(e);if(!i)return;const n=i.key.level,s=this._tileKeysPerLevel[n];Ek(this._tilePerId,e);for(let h=0;h<s.length;h++)if(s[h].id===e){s.splice(h,1);break}return i.visible=!0,i}add(e){e.visible=!1;const i=e.key,n=i.id;if(this._tilePerId.has(n))return;this._tilePerId.set(n,e);const s=i.level;this._tileKeysPerLevel[s]||(this._tileKeysPerLevel[s]=[]),this._tileKeysPerLevel[s].push(i)}prune(e,i,n){let s=this._tilePerId.size;if(s<=this.maxSize)return;let h=this._tileKeysPerLevel.length-1;for(;s>this.maxSize&&h>=0;)h!==e&&(s=this._pruneAroundCenterTile(s,i,n,h)),h--;s>this.maxSize&&(s=this._pruneAroundCenterTile(s,i,n,e))}_pruneAroundCenterTile(e,i,n,s){const h=this._tileKeysPerLevel[s];if(!h||h.length===0)return e;const{size:f,origin:m}=this._tileInfoView.tileInfo,v=n*f[0],x=n*f[1],M=[0,0],$=[0,0];for(h.sort((I,P)=>(M[0]=m.x+v*(I.col+.5),M[1]=m.y-x*(I.row+.5),$[0]=m.x+v*(P.col+.5),$[1]=m.y-x*(P.row+.5),sa(M,i)-sa($,i)));h.length>0;){const I=h.pop();if(this._removeTile(I.id),--e===this.maxSize)break}return e}_removeTile(e){const i=this._tilePerId.get(e);this._removedFunc&&i&&this._removedFunc(i),Ek(this._tilePerId,e)}};function Ek(t,e){t.delete(e)}const bu=new tu(0,0,0,0),bl=new Map,wu=[],G_=[];let V7e=class{constructor(e){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,e.resampling!=null&&(this.resampling=e.resampling),e.cachePolicy&&(this.cachePolicy=e.cachePolicy),e.coveragePolicy&&(this.coveragePolicy=e.coveragePolicy),e.buffer!=null&&(this.buffer=e.buffer),e.cacheSize&&(this._tileCache=new Tce(e.cacheSize,this.tileInfoView,i=>{this.releaseTile(i)}))}destroy(){this.tileIndex.clear()}update(e){var U,W;const{resampling:i,tileIndex:n}=this,{scale:s,center:h,resolution:f}=e.state,{minScale:m,maxScale:v}=this.tileInfoView,x=!e.stationary&&s>this._previousScale;if(this._previousScale=s,!i&&(s>m||s<v))return this.tiles.length=0,void this.clear();const M=this.tileInfoView.getTileCoverage(e.state,this.buffer,this.resampling,this.coveragePolicy);if(!M)return this.tiles.length=0,void this.clear();const{spans:$,lodInfo:I}=M,{level:P}=I;this.tiles.length=0,n.forEach(K=>K.visible=!0);let L=0,z=0;if($.length>0)for(const{row:K,colFrom:J,colTo:te}of $)for(let ie=J;ie<=te;ie++){L++;const le=bu.set(P,K,I.normalizeCol(ie),I.getWorldForColumn(ie)).id;let de=n.get(le);if(de)de.isReady?(bl.set(le,de),z++):x||this._addParentTile(le,bl);else{if((U=this._tileCache)!=null&&U.has(le)){if(de=this._tileCache.pop(le),this.tileIndex.set(le,de),de.isReady){bl.set(le,de),z++;continue}}else de=this.acquireTile(bu),this.tileIndex.set(le,de);x||this._addParentTile(le,bl)}}const F=z===L;for(const[K,J]of n){if(bl.has(K))continue;bu.set(K);const te=this.tileInfoView.intersects(M,bu),ie=this.cachePolicy==="purge"?bu.level!==P:bu.level>P;!te||!x&&F?!ie&&te||wu.push(J):J.isReady?ie&&this.cachePolicy==="purge"&&this._hasReadyAncestor(bu,P)?wu.push(J):G_.push(J):ie&&wu.push(J)}for(const K of G_)K.isReady&&bl.set(K.key.id,K);for(const K of wu)this._tileCache?this._tileCache.add(K):this.releaseTile(K),n.delete(K.key.id);for(const K of bl.values())this.tiles.push(K);for(const K of n.values())bl.has(K.key.id)||(K.visible=!1);(W=this._tileCache)==null||W.prune(P,h,f),im.pool.release(M),G_.length=0,wu.length=0,bl.clear()}clear(){const{tileIndex:e}=this;for(const i of e.values())this.releaseTile(i);e.clear()}refresh(e){var i;for(const n of this.tileIndex.values())this.tiles.includes(n)?e(n):wu.push(n);for(const n of wu)this.releaseTile(n),this.tileIndex.delete(n.key.id);(i=this._tileCache)==null||i.clear()}updateCacheSize(e){this._tileCache&&(this._tileCache.maxSize=e)}_addParentTile(e,i){var h;let n=e,s=null;for(;n=this.tileInfoView.getTileParentId(n),n;)if(this.tileIndex.has(n)){if(s=this.tileIndex.get(n),s==null?void 0:s.isReady){i.has(s.key.id)||i.set(s.key.id,s);break}}else if((h=this._tileCache)!=null&&h.has(n)&&(s=this._tileCache.pop(n),this.tileIndex.set(n,s),s==null?void 0:s.isReady)){i.has(s.key.id)||i.set(s.key.id,s);break}}_hasReadyAncestor(e,i){const n=sn();this.tileInfoView.getTileBounds(n,e,!0);for(const s of this.tileIndex.values())if(s.isReady&&s.key.level>=i&&s.key.level<e.level){const h=sn();if(this.tileInfoView.getTileBounds(h,s.key,!0),NJ(h,n))return!0}return!1}},ur=class extends Re{constructor(e){super(e),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([Ee(()=>{var i;return(i=this.constraints)==null?void 0:i.version},i=>{this.constraints&&i&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},Ya)])}get center(){if(!this.ready)return this._get("center");const{center:e,spatialReference:i}=this.state.paddedViewState;return this.state.commitProperty("id"),new De({x:e[0],y:e[1],spatialReference:i})}set center(e){if(e==null)return;if(!this.ready)return void this._set("center",e);let i;try{i=this._project(e,this.state.spatialReference)}catch(s){return void Ce.getLogger(this).error(new fe("mapview:invalid-center","could not project the value in the view's spatial reference",{input:e,error:s}))}const n=this.viewpoint;T4(n,n,i),this.viewpoint=n}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(e){if(e==null)return;if(!e.width||!e.height)return void Ce.getLogger(this).error(new fe("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",e),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let i;try{i=this._project(e,this.state.spatialReference)}catch(s){return void Ce.getLogger(this).error(new fe("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:s}))}const n=this.viewpoint;Iae(n,n,i,this.state.size,{constraints:this.constraints}),this.viewpoint=n}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);const i=this.viewpoint;jae(i,i,e),this.viewpoint=i}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",void 0);const n=this._get("extent");return void(n&&(this._set("extent",void 0),this._set("center",n.center)))}const i=this.viewpoint;vk(i,i,e),this.viewpoint=i}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(e){var h;if(e==null)return;if(!this.ready)return this._set("viewpoint",e),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let i,n;try{i=this._project(e,this.state.spatialReference),!e.scale||isNaN(e.scale)?n=new fe("mapview:invalid-viewpoint",`invalid scale value of ${e.scale}`):e.targetGeometry==null&&(n=new fe("mapview:invalid-viewpoint","geometry not defined"))}catch(f){n=new fe("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:f})}if(n)return void Ce.getLogger(this).error(n);this._scaleBeforeChangingSpatialReference=null;const s=new Jo({targetGeometry:new De,scale:0,rotation:0});Qn(s,i),(h=this.constraints)==null||h.constrain(s,this.state.paddedViewState.viewpoint),this.state.viewpoint=s,this._set("viewpoint",s)}get zoom(){var e;return this.ready?((e=this.constraints)==null?void 0:e.scaleToZoom(this.scale))??-1:this._get("zoom")}set zoom(e){var s,h;if(!(e>=0))return;if(!this.ready){this._set("zoom",e),this._set("scale",void 0);const f=this._get("extent");return void(f&&(this._set("extent",void 0),this._set("center",f.center)))}const i=((s=this.constraints)==null?void 0:s.zoomToScale(e))??0;if(!i)return void this._set("zoom",-1);const n=this.viewpoint;vk(n,n,i),this.viewpoint=n,this._set("zoom",((h=this.constraints)==null?void 0:h.scaleToZoom(this.scale))??-1)}getUserStartupOptions(e){if(!e[0]&&!e[1])return{center:void 0,rotation:void 0,scale:void 0};const{padding:i,constraints:n}=this,s=this._get("center"),h=this._get("extent"),f=this._get("scale"),m=this._get("rotation"),v=this._get("viewpoint"),x=this._get("zoom"),M=x!=null&&n!=null&&n.zoomToScale(x)||void 0;let $,I,P;const L=v==null?void 0:v.rotation,z=v==null?void 0:v.targetGeometry;(z==null?void 0:z.type)==="extent"?$=z:(z==null?void 0:z.type)==="point"&&(I=z,P=v==null?void 0:v.scale);const F=h??$;return{center:s??I??(F==null?void 0:F.center),rotation:m??L,scale:(f??M??P??(F&&u3(F,[e[0]-i.left-i.right,e[1]-i.top-i.bottom])))||void 0}}startup(e,i,n,s){var f;const h=e.targetGeometry;try{this._project(e,n)}catch(m){Ce.getLogger(this).warn(new vc("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:h.toJSON(),spatialReference:n,error:m})),e.targetGeometry=s||new De({x:0,y:0,spatialReference:n})}(f=this.constraints)==null||f.fit(e),this._set("state",new IT({padding:this.padding,size:i,viewpoint:e})),this._set("ready",!0)}teardown(){this._set("ready",!1);const{center:[e,i],spatialReference:n,rotation:s,scale:h}=this.state.paddedViewState,f=new De({x:e,y:i,spatialReference:n});this._set("viewpoint",null),this._set("extent",null),this._set("center",f),this._set("zoom",-1),this._set("rotation",s),this._set("scale",h),this._set("state",null)}changeSpatialReference(e){var v;const i=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=i.scale;else{const x=i.viewpoint.clone();x.scale=this._scaleBeforeChangingSpatialReference,i.viewpoint=x}const n=i.clone(),[s,h]=i.center;let f=null;try{f=this._project(new De({x:s,y:h,spatialReference:i.spatialReference}),e)}catch(x){sS()||Ce.getLogger(this).warn(new vc("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:f==null?void 0:f.toJSON(),spatialReference:e,error:x}))}f||(f=new De({x:0,y:0,spatialReference:e}));const m=T4(new Jo({targetGeometry:new De,scale:0,rotation:0}),i.viewpoint,f);n.viewpoint=m;try{const M=[i.size[0]/2,i.size[1]/2],$=[M[0]+20,M[1]],I=i.toMap([0,0],$),{x:P,y:L}=this._project(new De({x:I[0],y:I[1],spatialReference:i.spatialReference}),e);I[0]=P,I[1]=L,n.toScreen(I,I);const z=Dae(M,I,$),F=Math.hypot(I[0]-M[0],I[1]-M[1])/20;!Number.isFinite(F)||Math.abs(F)>4?(m.rotation=0,m.targetGeometry=new De({x:0,y:0,spatialReference:e})):(m.scale*=F,m.scale>pe("mapview-srswitch-adjust-rotation-scale-threshold")?m.rotation=0:m.rotation+=Number.isFinite(z)?z:0)}catch{}(v=this._get("constraints"))==null||v.constrain(m,void 0),this._get("state").viewpoint=m}resize(e,i){var f;if(!this.ready)return;const n=this.state;let s=this.state.paddedViewState.viewpoint;const h=this.state.paddedViewState.size.concat();n.size=[e,i],Fae(s,s,h,this.state.paddedViewState.size,this.resizeAlign),s=((f=this.constraints)==null?void 0:f.constrain(s,void 0))??s,this.state.viewpoint=s}toMap(e){if(!this.ready)return null;const i=[0,0],[n,s]=this.state.toMap(i,[e.x,e.y]),h=this.state.spatialReference;return new De({x:n,y:s,spatialReference:h})}toScreen(e,i){if(!this.ready)return null;const n=this._project(e,this.state.spatialReference),s=[n.x,n.y];return(i==null?void 0:i.pickClosestTarget)===!1||this.state.paddedViewState.wrapMapCoordinate(s,s),this.state.toScreen(s,s),Fi(s[0],s[1])}_project(e,i){var h;const n=(e==null?void 0:e.targetGeometry)||e;if(!i)return e;if(!n)return null;if(i.imageCoordinateSystem||(h=n.spatialReference)!=null&&h.imageCoordinateSystem||bi(i,n.spatialReference))return e;const s=Wr(n,i);if(!s)throw new fe("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:n,spatialReference:i});return Mce(e)?(e.targetGeometry=s,e):s}};function Mce(t){return(t==null?void 0:t.declaredClass)==="esri.Viewpoint"}_([T({type:De})],ur.prototype,"center",null),_([T()],ur.prototype,"constraints",void 0),_([T({type:Lt})],ur.prototype,"extent",null),_([T({value:{top:0,right:0,bottom:0,left:0},cast:t=>({top:0,right:0,bottom:0,left:0,...t})})],ur.prototype,"padding",null),_([T()],ur.prototype,"ready",void 0),_([T()],ur.prototype,"resizeAlign",void 0),_([T({readOnly:!0})],ur.prototype,"resolution",null),_([T({type:Number})],ur.prototype,"rotation",null),_([T({type:Number})],ur.prototype,"scale",null),_([T({readOnly:!0})],ur.prototype,"state",void 0),_([T({type:Jo})],ur.prototype,"viewpoint",null),_([T()],ur.prototype,"zoom",null),ur=_([Y("esri.views.2d.ViewStateManager")],ur);function AT(t,e){switch(e){case"primary":return t.pointerType==="touch"||t.button===0;case"secondary":return t.pointerType!=="touch"&&t.button===2;case"tertiary":return t.pointerType!=="touch"&&t.button===1}}let kk=class extends xn{constructor(e,i){super(!0),this._view=e,this.registerIncoming("double-click",i,n=>this._handleDoubleClick(n,i))}_handleDoubleClick(e,i){AT(e.data,"primary")&&(e.stopPropagation(),i?this._view.mapViewNavigation.zoomOut([e.data.x,e.data.y]):this._view.mapViewNavigation.zoomIn([e.data.x,e.data.y]))}},Ece=class extends xn{constructor(e,i,n){super(!0),this.view=e,this.pointerType=i,this.registerIncoming("double-tap-drag",n,s=>this._handleDoubleTapDrag(s))}_handleDoubleTapDrag(e){const{data:i}=e,{pointerType:n}=i;if(n!==this.pointerType)return;e.stopPropagation();const{action:s,delta:h}=i,{view:f}=this,{mapViewNavigation:m}=f;switch(s){case"begin":{const{scale:v}=f;this._startScale=v,this._currentScale=v,this._previousDelta=h,m.begin();break}case"update":{if(this._previousDelta.y===h.y)return;this._previousDelta=h;const v=1.015**h.y,x=this._startScale*v,M=x/this._currentScale;m.setViewpointImmediate(M),this._currentScale=x;break}case"end":{const{constraints:v}=f,{effectiveLODs:x,snapToZoom:M}=v;if(!M||!x)return void m.end();const $=v.snapScale(this._currentScale),I=(h.y>0?Math.max($,v.snapToPreviousScale(this._startScale)):Math.min($,v.snapToNextScale(this._startScale)))/this._currentScale;m.zoom(I).then(()=>{m.end()});break}}}},p3=class{constructor(e){this._callbacks=e,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(e){const i=e.data,n=i.pointers.size;switch(i.action){case"start":this._currentCount=n,this._emitStart(e);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=n,this._emitStart(e);break;case"update":this._emitUpdate(e);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=n,this._emitStart(e);break;case"end":this._emitEnd(e),this._currentCount=0}this._previousEvent=e}_emitStart(e){var i,n;this._startEvent=e,(n=(i=this._callbacks).condition)!=null&&n.call(i,this._currentCount,e)&&this._callbacks.start(this._currentCount,e,this._startEvent)}_emitUpdate(e){var i,n;(n=(i=this._callbacks).condition)!=null&&n.call(i,this._currentCount,e)&&this._callbacks.update(this._currentCount,e,this._startEvent)}_emitEnd(e){var i,n;(n=(i=this._callbacks).condition)!=null&&n.call(i,this._currentCount,e)&&this._callbacks.end(this._currentCount,e,this._startEvent),this._startEvent=null}},kce=class extends xn{constructor(e,i,n){super(!0),this.view=e,this.pointerAction=i,this.registerIncoming("drag",n,s=>this._handleDrag(s)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(e){super.onInstall(e),this._dragEventSeparator=new p3({start:(i,n)=>{this.view.mapViewNavigation.pan.begin(this.view,n.data),n.stopPropagation()},update:(i,n)=>{this.view.mapViewNavigation.pan.update(this.view,n.data),n.stopPropagation()},end:(i,n)=>{this.view.mapViewNavigation.pan.end(this.view,n.data),n.stopPropagation()},condition:(i,n)=>i===1&&AT(n.data,this.pointerAction)})}_handleDrag(e){const i=this.view.mapViewNavigation;i.pinch.zoomMomentum||i.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(e)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},$ce=class extends xn{constructor(e,i,n){super(!0),this._view=e,this.pointerAction=i;const s=this._view.mapViewNavigation;this._dragEventSeparator=new p3({start:(h,f)=>{s.rotate.begin(this._view,f.data),f.stopPropagation()},update:(h,f)=>{s.rotate.update(this._view,f.data),f.stopPropagation()},end:(h,f)=>{s.rotate.end(),f.stopPropagation()},condition:(h,f)=>h===1&&AT(f.data,this.pointerAction)}),this.registerIncoming("drag",n,h=>this._dragEventSeparator.handle(h))}};function $o(t){let e=t*t;return t<0&&(e*=-1),e}function Cce(t){return t.translation[0]=0,t.translation[1]=0,t.translation[2]=0,t.heading=0,t.tilt=0,t}function Ice(t,e,i){const n=i,s=t.state,h=t.device,f=e.tiltDirection==="forward-down"?1:-1,m=1;return h.deviceType==="standard"?(n.translation[0]=$o(s.axes[0]),n.translation[1]=$o(s.axes[1]),n.translation[2]=$o(s.buttons[7])-$o(s.buttons[6]),n.heading=$o(s.axes[2]),n.tilt=$o(s.axes[3])):h.deviceType==="spacemouse"&&(n.translation[0]=1.2*$o(s.axes[0]),n.translation[1]=1.2*$o(s.axes[1]),n.translation[2]=2*-$o(s.axes[2]),n.heading=1.2*$o(s.axes[5]),n.tilt=1.2*$o(s.axes[3])),n.tilt*=f,xr(n.translation,n.translation,m),n}function Ace(t){return t.translation[0]===0&&t.translation[1]===0&&t.translation[2]===0&&t.heading===0&&t.tilt===0&&t.zoom===0}let Oce=class extends xn{constructor(e){super(!0),this._view=e,this._frameTask=null,this._watchHandles=new f0,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",i=>this._handleGamePadEvent(i)),this._handle.pause()}onInstall(e){super.onInstall(e),this._watchHandles.add([Ee(()=>{var i;return(i=this._view.navigation.gamepad)==null?void 0:i.enabled},i=>{i?(this._handle.resume(),this._frameTask||(this._frameTask=Ff({update:n=>this._frameUpdate(n.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},Pt)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(e){const i=this._view.navigation.gamepad.device;i&&e.data.device!==i||this._currentDevice&&this._currentDevice!==e.data.device||(e.data.action==="end"?(this._currentDevice=null,Cce(this._transformation)):(this._currentDevice=e.data.device,Ice(e.data,this._view.navigation.gamepad,this._transformation)))}_frameUpdate(e){const i=this._transformation;if(Ace(i))return;const n=this._view.viewpoint.clone(),s=this._view.navigation.gamepad.velocityFactor,h=Rce*s*e;d3(n,n,[i.translation[0]*h,-i.translation[1]*h]);const f=1+i.translation[2]*Lce*e,m=this._view.constraints.rotationEnabled?-i.heading*Pce*e:0,v=this._view.size,x=[v[0]/2,v[1]];gz(n,n,f,m,x,v);const M=this._view.constraints.constrain(n,this._view.viewpoint);this._view.viewpoint=M}};const Pce=.06,Rce=.7,Lce=6e-4;function Dz(t){const e=()=>t(document.visibilityState==="visible");return document.addEventListener("visibilitychange",e),ut(()=>document.removeEventListener("visibilitychange",e))}let Nce=class extends xn{constructor(e,i,n){super(!0),this.view=e,this.keys=i,this._isSticky=!1,this._pressedKeys=new Set,this._timeout=void 0,this._currentDirection=void 0,this._stickyKeyDuration=200,this._handleKey=s=>{const h=this._keyMap[s.data.key];if(s.modifiers.has("Meta")||s.modifiers.has("Control"))return void this._stopMovement();if(h==null)return;s.stopPropagation(),s.preventDefault();const f=s.type==="key-down";if(this._pressedKeys[f?"add":"delete"](h),f){if(this._direction===h)return;this._direction=h,this._isSticky=!1,this._setTimeout(()=>{this._isSticky&&this._handlePopKey()})}else{const m=this._timeout===void 0,v=this._pressedKeys.size>0;m||v?this._handlePopKey():this._isSticky=!0}},this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop(),this._direction==null&&this._stopMovement()},this._stopMovement=()=>{this._isSticky=!1,this._direction=void 0,this._pressedKeys.clear(),this._setTimeout(void 0)},this._keyMap={[i.left]:"left",[i.right]:"right",[i.up]:"up",[i.down]:"down"},this.registerIncoming("key-down",n,this._handleKey),this.registerIncoming("key-up",n,this._handleKey),this.registerIncoming("blur",n,this._stopMovement),this._visibilityHandle=Dz(s=>s?null:this._stopMovement())}onUninstall(){var e;this._stopMovement(),(e=this._visibilityHandle)==null||e.remove()}get _direction(){return this._currentDirection}set _direction(e){const i=this._currentDirection!=null;if(e!=null){if(i||this.view.mapViewNavigation.begin(),this._currentDirection!==e)switch(e){case"left":this.view.mapViewNavigation.continuousPanLeft();break;case"right":this.view.mapViewNavigation.continuousPanRight();break;case"up":this.view.mapViewNavigation.continuousPanUp();break;case"down":this.view.mapViewNavigation.continuousPanDown()}}else i&&this.view.mapViewNavigation.stop();this._currentDirection=e}_setTimeout(e){clearTimeout(this._timeout),this._timeout=e===void 0?void 0:setTimeout(()=>{this._timeout=void 0,e()},this._stickyKeyDuration)}},Dce=class extends xn{constructor(e,i,n){super(!0),this.view=e,this.keys=i,this._pressed=!1,this._keyToDirection={[i.clockwiseOption1]:"clockwise",[i.clockwiseOption2]:"clockwise",[i.counterClockwiseOption1]:"counterClockwise",[i.counterClockwiseOption2]:"counterClockwise",[i.resetOption1]:"reset",[i.resetOption2]:"reset"},this.registerIncoming("key-down",n,s=>this._handleKeyDown(s)),this.registerIncoming("key-up",n,s=>this._handleKeyUp(s)),this.registerIncoming("blur",n,()=>this._handleStop()),this._visibilityHandle=Dz(s=>s?null:this._handleStop())}onUninstall(){var e;(e=this._visibilityHandle)==null||e.remove(),this._handleStop()}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,i){const n=e.modifiers;if(n.size>0&&!n.has("Shift")||!this.view.constraints.rotationEnabled)return;const s=this._keyToDirection[e.data.key];if(this._pressed=s!=null,this._pressed){if(e.preventDefault(),i)switch(this.view.mapViewNavigation.begin(),s){case"clockwise":this.view.mapViewNavigation.continuousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continuousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}};var yf;(function(t){t[t.IN=0]="IN",t[t.OUT=1]="OUT"})(yf||(yf={}));let zce=class extends xn{constructor(e,i,n){super(!0),this.view=e,this.keys=i,this._keysToZoomAction={},this.registerIncoming("key-down",n,s=>this._handleKeyDown(s)),i.zoomIn.forEach(s=>this._keysToZoomAction[s]=yf.IN),i.zoomOut.forEach(s=>this._keysToZoomAction[s]=yf.OUT)}_handleKeyDown(e){this._handleKey(e)}_handleKey(e){const i=e.modifiers;if(i.size>0&&!i.has("Shift"))return;const{key:n}=e.data;if(!(n in this._keysToZoomAction))return;const s=this._keysToZoomAction[n],{mapViewNavigation:h}=this.view;let f=null;switch(s){case yf.IN:f=h.zoomIn();break;case yf.OUT:f=h.zoomOut();break;default:return}h.begin(),f.then(()=>h.end()),e.stopPropagation()}};const Fce=.6;let jce=class extends xn{constructor(e,i){super(!0),this._view=e,this._canZoom=!0,this.registerIncoming("mouse-wheel",i,n=>this._handleMouseWheel(n))}_handleMouseWheel(e){if(!this._view.navigation.mouseWheelZoomEnabled||(e.preventDefault(),e.stopPropagation(),!this._canZoom))return;const i=this._view.mapViewNavigation,{x:n,y:s,deltaY:h}=e.data,f=1/Fce**(1/60*h),m=i.zoom(f,[n,s]);m&&(this._canZoom=!1,m.catch(()=>{}).then(()=>{this._canZoom=!0,i.end()}))}},Gce=class extends xn{constructor(e){super(!0),this.view=e,this.registerIncoming("drag",n=>this._handleDrag(n)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const i=this.view.mapViewNavigation;this._dragEventSeparator=new p3({start:(n,s)=>{i.pinch.begin(this.view,s.data),s.stopPropagation()},update:(n,s)=>{i.pinch.update(this.view,s.data),s.stopPropagation()},end:(n,s)=>{i.pinch.end(this.view),s.stopPropagation()},condition:n=>n>=2})}_handleDrag(e){this._dragEventSeparator.handle(e)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function $k(t){const e=t.native;return e?{buttons:e.buttons.map(i=>i.pressed?i.value||1:0),axes:e.axes.map(i=>Bce(i,t.axisThreshold))}:{buttons:[],axes:[]}}function Vce(t,e){if(t.axes.length!==e.axes.length||t.buttons.length!==e.buttons.length)return!1;for(let i=0;i<t.axes.length;i++)if(t.axes[i]!==e.axes[i])return!1;for(let i=0;i<t.buttons.length;i++)if(t.buttons[i]!==e.buttons[i])return!1;return!0}function Hce(t){for(let e=0;e<t.axes.length;e++)if(t.axes[e]!==0)return!1;for(let e=0;e<t.buttons.length;e++)if(t.buttons[e]!==0)return!1;return!0}function Bce(t,e){const i=Math.abs(t);return i<e?0:Math.sign(t)*(i-e)/(1-e)}let Uce=class{constructor(e,i){this._element=e,this._input=i,this._hasEventListeners=!1,this._onConnectGamepad=h=>{this._connectGamepad(h.gamepad)},this._onDisconnectGamepad=h=>{const f=h.gamepad,m=f.index,v=this._inputDevices[m];v&&(this._emitGamepadEvent(f,$k(v),!1),this._inputDevices.splice(m,1),this._latestUpdate.splice(m,1),this._input.gamepad.devices.remove(v),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const n="getGamepads"in window.navigator,s=window.isSecureContext;this.supported=n&&s,this.supported&&(Ck(h=>this._connectGamepad(h)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(e){this._hasEventListeners!==e&&(this._hasEventListeners=e,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(e){this._callback=e}_connectGamepad(e){const i=new bT(e);i.deviceType!=="unknown"&&(this._inputDevices[e.index]=i,this._input.gamepad.devices.add(i)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=Ff({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const e=document.hasFocus(),i=this._element.contains(document.activeElement),n=this._input.gamepad.enabledFocusMode==="document"&&!e||this._input.gamepad.enabledFocusMode==="view"&&!i;Ck(s=>{const h=this._inputDevices[s.index];if(!h)return;const f=this._latestUpdate[s.index],m=$k(h),v=n||Hce(m);f&&(f.timestamp===s.timestamp||!f.active&&v||Vce(f.state,m))||this._emitGamepadEvent(s,m,!v)})}_emitGamepadEvent(e,i,n){const s=this._latestUpdate[e.index],h=s&&s.active;if(!h&&!n)return;const f=!h&&n?"start":h&&n?"update":"end";this._latestUpdate[e.index]={timestamp:e.timestamp,state:i,active:n},this._callback&&this._callback({device:this._inputDevices[e.index],state:i,action:f})}};function qce(t){if(!t||!t.connected)return!1;for(let e=0;e<t.axes.length;e++)if(isNaN(t.axes[e]))return!1;return!0}function Ck(t){const e=window.navigator.getGamepads();for(let i=0;i<e.length;i++){const n=e[i];qce(n)&&t(n)}}const Ik=pe("edge"),Wce=pe("chrome"),Zce=pe("ff"),Jce=pe("safari"),Ak="esri-view-surface",Tp={touchNone:`${Ak}--touch-none`,touchPan:`${Ak}--touch-pan`};let zz=class Fz{constructor(e,i){this._input=i,this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=e,e.getAttribute("tabindex")||e.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new Uce(e,this._input),this._gamepadSource.onEvent=n=>this._callback("gamepad",n)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(e=>{this._releasePointerCaptureSafe(e)}),this._gamepadSource=yt(this._gamepadSource),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(e){this._browserTouchPanningEnabled=e,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(e){this._callback=e}set activeEvents(e){for(const i in this._active)if(!e||!e.has(i)){const n=this._active[i];this._element.removeEventListener(V_[i],n),delete this._active[i]}e&&e.forEach(i=>{if(!this._active[i]&&V_[i]){const n=(this._eventHandlers[i]||this._handleDefault).bind(this,i);this._element.addEventListener(V_[i],n),this._active[i]=n}}),this._gamepadSource.hasEventListeners=(e==null?void 0:e.has("gamepad"))??!1}setPointerCapture(e,i){i?this._setPointerCatpureSafe(e.pointerId):(this._releasePointerCaptureSafe(e.pointerId),this._activePointerCaptures.delete(e.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?Tp.touchNone:Tp.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?Tp.touchPan:Tp.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(Tp.touchNone),this._element.classList.remove(Tp.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCatpureSafe(e){try{this._element.setPointerCapture(e),this._activePointerCaptures.add(e)}catch{}}_releasePointerCaptureSafe(e){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(e))return;this._element.releasePointerCapture(e)}catch{}}_updateNormalizedPointerLikeEvent(e,i){const n=SD(this._element,e);return Fz.test.disableSubpixelCoordinates&&(n.x=Math.round(n.x),n.y=Math.round(n.y)),i.x=n.x,i.y=n.y,i}_handleKey(e,i){const{key:n}=i;n&&e==="key-up"&&this._keyDownState.delete(n);const s={native:i,key:n,repeat:!!n&&this._keyDownState.has(n)};n&&e==="key-down"&&this._keyDownState.add(s.key),this._callback(e,s)}_handlePointer(e,i){const n=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});this._callback(e,n)}_handlePointerPreventDefault(e,i){const n=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});i.preventDefault(),this._callback(e,n)}_handleMouseWheel(e,i){let n=i.deltaY;switch(i.deltaMode){case 0:Ik&&(n=n/document.documentElement.clientHeight*600);break;case 1:n*=30;break;case 2:n*=900}Ik?n*=.7:Wce||Jce?n*=.6:Zce&&(n*=1.375);const s=100,h=Math.abs(n);h>s&&(n=n/h*200/(1+Math.exp(-.02*(h-s))));const f=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,deltaY:n});this._callback(e,f)}_handlePointerCaptureLost(e,i){this._activePointerCaptures.delete(i.pointerId),this._handleDefault(e,i)}_handleDefault(e,i){const n={native:i};i.preventDefault(),this._callback(e,n)}_preventAltKeyDefault(e){e.key==="Alt"&&e.preventDefault()}_preventMultiTouchPanning(e){e.touches.length>1&&e.preventDefault()}};zz.test={disableSubpixelCoordinates:!1};const V_={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let Kce=class extends xn{constructor(){super(!0),this.registerIncoming("context-menu",e=>{e.data.native.preventDefault()})}};const Nn={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500,maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};function C2(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}function Yce(t,e){const i=e.x-t.x,n=e.y-t.y;return Math.sqrt(i*i+n*n)}function Xce(t,e){if(e?(e.radius=0,e.center.x=0,e.center.y=0):e={radius:0,center:Fi()},t.length===0)return e;if(t.length===1)return e.center.x=t[0].x,e.center.y=t[0].y,e;if(t.length===2){const[K,J]=t,[te,ie]=[J.x-K.x,J.y-K.y];return e.radius=Math.sqrt(te*te+ie*ie)/2,e.center.x=(K.x+J.x)/2,e.center.y=(K.y+J.y)/2,e}let i=0,n=0;for(let K=0;K<t.length;K++)i+=t[K].x,n+=t[K].y;i/=t.length,n/=t.length;const s=t.map(K=>K.x-i),h=t.map(K=>K.y-n);let f=0,m=0,v=0,x=0,M=0,$=0,I=0;for(let K=0;K<s.length;K++){const J=s[K],te=h[K],ie=J*J,le=te*te;f+=ie,m+=le,v+=J*te,x+=ie*J,M+=le*te,$+=J*le,I+=te*ie}const P=.5*(x+$),L=.5*(M+I),z=f*m-v*v,F=(P*m-L*v)/z,U=(f*L-v*P)/z,W=Fi(F+i,U+n);return{radius:Math.sqrt(F*F+U*U+(f+m)/t.length),center:W}}function Od(t){const{native:e}=t,{pointerId:i,button:n,pointerType:s}=e;return s==="mouse"?`${i}:${n}`:`${s}`}let Qce=class extends xn{constructor(e=Nn.maximumDoubleClickDelay,i=Nn.maximumDoubleClickDistance,n=Nn.maximumDoubleTouchDelay,s=Nn.maximumDoubleTouchDistance,h=g0){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=n,this._maximumDoubleTouchDistance=s,this._clock=h,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=Fi(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new p3({start:(f,m)=>this._dragStart(f,m),update:(f,m)=>this._dragUpdate(m),end:(f,m)=>this._dragEnd(m)}),this.registerIncoming("drag",f=>this._dragEventSeparator.handle(f)),this.registerIncoming("pointer-down",f=>this._handlePointerDown(f)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(e=>{e.doubleTapTimeout=Rt(e.doubleTapTimeout)})}get hasPendingInputs(){return mw(this._pointerState,e=>e.doubleTapTimeout!=null)}_clearPointerDown(e){const i=this._pointerState.get(e);i&&(i.doubleTapTimeout=Rt(i.doubleTapTimeout),this._pointerState.delete(e),this.refreshHasPendingInputs())}_dragStart(e,i){if(!this._doubleTapDragReady||e!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:n,modifiers:s}=i,{center:h}=n;this._dragStartCenter=h;const f=H_("begin",Fi(0,0),n);this._doubleTapDrag.emit(f,void 0,s),i.stopPropagation()}_dragUpdate(e){if(!this._doubleTapDragActive)return;const{data:i,modifiers:n}=e,{center:s}=i,h=H_("update",Fi(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),i);this._doubleTapDrag.emit(h,void 0,n),e.stopPropagation()}_dragEnd(e){if(!this._doubleTapDragActive)return;const{data:i,modifiers:n}=e,{center:s}=i,h=H_("end",Fi(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),i);this._doubleTapDrag.emit(h,void 0,n),this._doubleTapDragActive=!1,e.stopPropagation()}_handlePointerDown(e){const{data:i}=e,n=Od(i),s=this._pointerState.get(n),{pointerType:h}=i.native;if(s){const f=h==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;this._clearPointerDown(n),C2(s.event.data,i)>f?this._storePointerDown(e):this._doubleTapDragReady=!0}else this._storePointerDown(e)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(e){const{data:i}=e,{pointerType:n}=i.native,s=Od(i),h=n==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,f=this._clock.setTimeout(()=>this._clearPointerDown(s),h);this._pointerState.set(s,{event:e,doubleTapTimeout:f}),this.refreshHasPendingInputs()}};function H_(t,e,i){const{button:n,buttons:s,pointer:h,pointers:f,pointerType:m,timestamp:v}=i;return{action:t,delta:e,button:n,buttons:s,pointer:h,pointers:f,pointerType:m,timestamp:v}}let ehe=class extends xn{constructor(e){super(!1),this._navigationTouch=e,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(e,i,n,s){return{action:e,pointerType:this._pointerType,button:this._mouseButton,buttons:i.buttons,timestamp:s,pointers:the(this._activePointerMap),pointer:i,angle:n.angle,radius:n.radius,center:n.center}}_addPointer(e){const i=e.native.pointerId,n=Fy(this._activePointerMap).angle,s={event:e,initialAngle:0,lastAngle:0};this._activePointerMap.set(i,s);const h=fb(s,jz(this._activePointerMap));s.initialAngle=h,s.lastAngle=h,this._updatePointerAngles(n)}_updatePointer(e){if(e&&e.x==null&&e.y==null)return;const i=e.native.pointerId,n=this._activePointerMap.get(i);n?n.event=e:this._addPointer(e)}_removePointer(e){const i=Fy(this._activePointerMap).angle;this._activePointerMap.delete(e),this._updatePointerAngles(i)}_updatePointerAngles(e){const i=Fy(this._activePointerMap);this._activePointerMap.forEach(n=>{n.initialAngle=fb(n,i)-e,n.lastAngle=fb(n,i)-e})}_emitEvent(e,i,n){const s=Fy(this._activePointerMap);this._drag.emit(this._createPayload(e,i,s,n),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(e){const i=e.data.native.pointerId,n=e.timestamp;this._activePointerMap.get(i)&&(this._activePointerMap.size===1?(this._updatePointer(e.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",e.data,n),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(i)):(this._removePointer(i),this._emitEvent("removed",e.data,e.timestamp)))}_handlePointerDrag(e){const i=e.data,n=i.currentEvent,s=e.timestamp;switch(i.action){case"start":case"update":this._isDragging?this._activePointerMap.has(n.native.pointerId)?(this._updatePointer(n),!this._isCurrentDragSuppressed&&this._emitEvent("update",n,s)):(this._addPointer(n),this._emitEvent("added",n,s),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(n),this._pointerType=e.data.startEvent.pointerType,this._mouseButton=e.data.startEvent.button,this._startStateModifiers=e.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",n,s))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function jz(t){const e=[];return t.forEach(i=>{e.push(Fi(i.event.x,i.event.y))}),Xce(e)}function Fy(t){const e=jz(t);let i=0;return t.forEach(n=>{let s=fb(n,e),h=s-n.lastAngle;for(;h>Math.PI;)h-=2*Math.PI;for(;h<-Math.PI;)h+=2*Math.PI;s=n.lastAngle+h,n.lastAngle=s;const f=s-n.initialAngle;i+=f}),i/=t.size||1,{angle:i,radius:e.radius,center:e.center}}function the(t){const e=new Map;return t.forEach((i,n)=>e.set(n,i.event)),e}function fb(t,e){const i=t.event,n=i.x-e.center.x,s=i.y-e.center.y;return Math.atan2(s,n)}var Ok;(function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right",t[t.Back=3]="Back",t[t.Forward=4]="Forward",t[t.Undefined=-1]="Undefined"})(Ok||(Ok={}));let ihe=class extends xn{constructor(e=Nn.maximumDoubleClickDelay,i=Nn.maximumDoubleClickDistance,n=Nn.maximumDoubleTouchDelay,s=Nn.maximumDoubleTouchDistance,h=g0){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=n,this._maximumDoubleTouchDistance=s,this._clock=h,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(e=>{e.immediateDoubleClick&&e.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(e){const i=e.data,n=Od(i);if(!this._pointerState.has(n)){const s={downButton:i.native.button,x:i.x,y:i.y,immediateDoubleClick:null};this._pointerState.set(n,s),this.startCapturingPointer(i.native)}}_handlePointerUp(e){const i=e.data,n=Od(i),s=this._pointerState.get(n);if(s&&s.downButton===i.native.button){const h=s.immediateDoubleClick,f=e.data.native.pointerType==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;h?(h.timeoutHandle.remove(),C2(h,e.data)>f?this._startImmediateDoubleClick(e,s):(this._immediateDoubleClick.emit(e.data,void 0,h.modifiers),this._removeState(i))):C2(s,e.data)>f?this._removeState(i):this._startImmediateDoubleClick(e,s)}}_startImmediateDoubleClick(e,i){const n=e.data.native.pointerType==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay;i.immediateDoubleClick={x:e.data.x,y:e.data.y,modifiers:e.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(e.data),n)}}_removeState(e){const i=Od(e);this._pointerState.delete(i),this.stopCapturingPointer(e.native),this.refreshHasPendingInputs()}},nhe=class extends xn{constructor(e=Nn.maximumClickDelay,i=Nn.movementUntilMouseDrag,n=Nn.movementUntilPenDrag,s=Nn.movementUntilTouchDrag,h=Nn.holdDelay,f=g0){super(!1),this._maximumClickDelay=e,this._movementUntilMouseDrag=i,this._movementUntilPenDrag=n,this._movementUntilTouchDrag=s,this._holdDelay=h,this._clock=f,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",m=>{this._handlePointerLoss(m,"pointer-up")}),this.registerIncoming("pointer-capture-lost",m=>{this._handlePointerLoss(m,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",m=>{this._handlePointerLoss(m,"pointer-cancel")}),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(e=>{e.holdTimeout=Rt(e.holdTimeout)}),super.onUninstall()}_handlePointerDown(e){const i=e.data,n=i.native.pointerId;let s=null;this._pointerState.size===0&&(s=this._clock.setTimeout(()=>{const f=this._pointerState.get(n);if(f){if(!f.isDragging){const m=f.previousEvent;this._pointerHold.emit(m,void 0,e.modifiers),f.holdEmitted=!0}f.holdTimeout=null}},this._holdDelay));const h={startEvent:i,previousEvent:i,startTimestamp:e.timestamp,isDragging:!1,downButton:i.native.button,holdTimeout:s,modifiers:new Set};this._pointerState.set(n,h),this.startCapturingPointer(i.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(e)}_handlePointerMove(e){const i=e.data,n=i.native.pointerId,s=this._pointerState.get(n);s&&(s.isDragging?this._pointerDrag.emit(jy("update",s,i),void 0,s.modifiers):Yce(i,s.startEvent)>this._getDragThreshold(i.native.pointerType)&&this._startDragging(e),s.previousEvent=i)}_getDragThreshold(e){switch(e){case"touch":return this._movementUntilTouchDrag;case"pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(e){const i=e.data,n=i.native.pointerId;this._pointerState.forEach(s=>{s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging||(s.modifiers=e.modifiers,s.isDragging=!0,n===s.startEvent.native.pointerId?this._pointerDrag.emit(jy("start",s,i)):this._pointerDrag.emit(jy("start",s,s.previousEvent),e.timestamp))})}_handlePointerLoss(e,i){const n=e.data,s=n.native.pointerId,h=this._pointerState.get(s);h&&(h.holdTimeout!=null&&(h.holdTimeout.remove(),h.holdTimeout=null),h.isDragging?this._pointerDrag.emit(jy("end",h,i==="pointer-up"?n:h.previousEvent),void 0,h.modifiers):i==="pointer-up"&&h.downButton===n.native.button&&e.timestamp-h.startTimestamp<=this._maximumClickDelay&&!h.holdEmitted&&this._immediateClick.emit(n),this._pointerState.delete(s),this.stopCapturingPointer(n.native),this._pointerState.size===0&&this._moveHandle.pause())}};function jy(t,e,i){return{action:t,startEvent:e.startEvent,previousEvent:e.previousEvent,currentEvent:i}}let rhe=class extends xn{constructor(e=Nn.maximumDoubleClickDelay,i=Nn.maximumDoubleClickDistance,n=Nn.maximumDoubleTouchDelay,s=Nn.maximumDoubleTouchDistance,h=g0){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=n,this._maximumDoubleTouchDistance=s,this._clock=h,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this))}onUninstall(){this._pointerState.forEach(e=>e.doubleClickTimer=Rt(e.doubleClickTimer))}get hasPendingInputs(){return mw(this._pointerState,e=>e.doubleClickTimer!=null)}_clearDoubleClickTimer(e,i){const n=this._pointerState.get(e);n&&(n.doubleClickTimer=Rt(n.doubleClickTimer),i&&this._click.emit(n.event.data,void 0,n.event.modifiers),this._pointerState.delete(e),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(e){const i=this._pointerState.get(e);i.pointerDownCount===1&&this._click.emit(i.event.data,void 0,i.event.modifiers),i.doubleClickTimer=null,this._pointerState.delete(e),this.refreshHasPendingInputs()}_handleImmediateClick(e){const i=e.data,{pointerType:n}=i.native,s=she(i);if(!this._pointerState.has(s))return void this._startClick(e);const h=this._pointerState.get(s),{data:f,modifiers:m}=h.event,v=n==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;C2(f,i)>v?(this._clearDoubleClickTimer(s,!0),this._startClick(e)):(this._clearDoubleClickTimer(s,!1),h.pointerDownCount===2&&this._doubleClick.emit(f,void 0,m))}_handlePointerDown(e){const i=Od(e.data),n=this._pointerState.get(i);n&&(n.pointerDownCount+=1)}_startClick(e){const{data:i}=e,{native:{pointerType:n}}=i,s=Od(i),h=n==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,f=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(s),h);this._pointerState.set(s,{event:e,doubleClickTimer:f,pointerDownCount:1}),this.refreshHasPendingInputs()}};function she(t){const{pointerId:e,pointerType:i,button:n}=t.native;return i==="mouse"?`${e}:${n}`:`${i}`}const Gy={counter:"Control",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}};let Ku=class extends Re{initialize(){const e=()=>{var i;return(i=this.view)==null?void 0:i.ready};this.addHandles([nr(()=>!e(),()=>this._disconnect()),nr(e,()=>this._connect())])}destroy(){this._disconnect()}get latestPointerType(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerType}get latestPointerLocation(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerLocation}get multiTouchActive(){var e;return((e=this._inputManager)==null?void 0:e.multiTouchActive)??!1}isModifierKeyDown(e){var i;return((i=this._inputManager)==null?void 0:i.isModifierKeyDown(e))??!1}_disconnect(){this.view.viewEvents.disconnect(),this._inputManager=yt(this._inputManager)}_connect(){const e=this.view.surface,i=new zz(e,this.view.input),n=[new ihe,new nhe,new rhe,new ehe(this.view.navigation),new Qce],s=new zs({eventSource:i,recognizers:n});s.installHandlers("prevent-context-menu",[new Kce],Ut.INTERNAL),s.installHandlers("navigation",[new Gce(this.view),new Oce(this.view),new jce(this.view),new kk(this.view),new kk(this.view,[Gy.counter]),new kce(this.view,"primary"),new Nce(this.view,Gy.pan),new zce(this.view,Gy.zoom),new Dce(this.view,Gy.rotate),new $ce(this.view,"secondary"),new Ece(this.view,"touch")],Ut.INTERNAL),this.view.viewEvents.connect(s),this._source=i,this._inputManager=s,Ee(()=>{var h,f;return(f=(h=this.view)==null?void 0:h.navigation)==null?void 0:f.browserTouchPanEnabled},h=>{this._source&&(this._source.browserTouchPanningEnabled=!h)},Pt)}get test(){}};_([T()],Ku.prototype,"view",void 0),_([T()],Ku.prototype,"latestPointerType",null),_([T()],Ku.prototype,"latestPointerLocation",null),_([T()],Ku.prototype,"multiTouchActive",null),Ku=_([Y("esri.views.2d.input.MapViewInputManager")],Ku);const ohe=Ku;var hMe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gz(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Pk,Rk,Lk,Vz={exports:{}};Pk=Vz,Rk=function(){function t(s,h,f,m,v){e(s,h,f||0,m||s.length-1,v||n)}function e(s,h,f,m,v){for(;m>f;){if(m-f>600){var x=m-f+1,M=h-f+1,$=Math.log(x),I=.5*Math.exp(2*$/3),P=.5*Math.sqrt($*I*(x-I)/x)*(M-x/2<0?-1:1);e(s,h,Math.max(f,Math.floor(h-M*I/x+P)),Math.min(m,Math.floor(h+(x-M)*I/x+P)),v)}var L=s[h],z=f,F=m;for(i(s,f,h),v(s[m],L)>0&&i(s,f,m);z<F;){for(i(s,z,F),z++,F--;v(s[z],L)<0;)z++;for(;v(s[F],L)>0;)F--}v(s[f],L)===0?i(s,f,F):i(s,++F,m),F<=h&&(f=F+1),h<=F&&(m=F-1)}}function i(s,h,f){var m=s[h];s[h]=s[f],s[f]=m}function n(s,h){return s<h?-1:s>h?1:0}return t},(Lk=Rk())!==void 0&&(Pk.exports=Lk);const ahe=Gz(Vz.exports);function I2(t,e){if(!(this instanceof I2))return new I2(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&(typeof e=="function"?this.toBBox=e:this._initFormat(e)),this.clear()}function lhe(t,e,i){if(!i)return e.indexOf(t);for(var n=0;n<e.length;n++)if(i(t,e[n]))return n;return-1}function Mp(t,e){Y1(t,0,t.children.length,e,t)}function Y1(t,e,i,n,s){s||(s=Yp(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(var h,f=e;f<i;f++)h=t.children[f],X1(s,t.leaf?n(h):h);return s}function X1(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function Nk(t,e){return t.minX-e.minX}function Dk(t,e){return t.minY-e.minY}function B_(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function Vy(t){return t.maxX-t.minX+(t.maxY-t.minY)}function che(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function hhe(t,e){var i=Math.max(t.minX,e.minX),n=Math.max(t.minY,e.minY),s=Math.min(t.maxX,e.maxX),h=Math.min(t.maxY,e.maxY);return Math.max(0,s-i)*Math.max(0,h-n)}function U_(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function Hy(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function Yp(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function zk(t,e,i,n,s){for(var h,f=[e,i];f.length;)(i=f.pop())-(e=f.pop())<=n||(h=e+Math.ceil((i-e)/n/2)*n,ahe(t,h,e,i,s),f.push(e,h,h,i))}I2.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],n=this.toBBox;if(!Hy(t,e))return i;for(var s,h,f,m,v=[];e;){for(s=0,h=e.children.length;s<h;s++)f=e.children[s],Hy(t,m=e.leaf?n(f):f)&&(e.leaf?i.push(f):U_(t,m)?this._all(f,i):v.push(f));e=v.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!Hy(t,e))return!1;for(var n,s,h,f,m=[];e;){for(n=0,s=e.children.length;n<s;n++)if(h=e.children[n],Hy(t,f=e.leaf?i(h):h)){if(e.leaf||U_(t,f))return!0;m.push(h)}e=m.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var s=this.data;this.data=n,n=s}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},insert:function(t){return t!=null&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=Yp([]),this},remove:function(t,e){if(t==null)return this;for(var i,n,s,h,f=this.data,m=this.toBBox(t),v=[],x=[];f||v.length;){if(f||(f=v.pop(),n=v[v.length-1],i=x.pop(),h=!0),f.leaf&&(s=lhe(t,f.children,e))!==-1)return f.children.splice(s,1),v.push(f),this._condense(v),this;h||f.leaf||!U_(f,m)?n?(i++,f=n.children[i],h=!1):f=null:(v.push(f),x.push(i),i=0,n=f,f=f.children[0])}return this},toBBox:function(t){return t},compareMinX:Nk,compareMinY:Dk,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,n){var s,h=i-e+1,f=this._maxEntries;if(h<=f)return Mp(s=Yp(t.slice(e,i+1)),this.toBBox),s;n||(n=Math.ceil(Math.log(h)/Math.log(f)),f=Math.ceil(h/Math.pow(f,n-1))),(s=Yp([])).leaf=!1,s.height=n;var m,v,x,M,$=Math.ceil(h/f),I=$*Math.ceil(Math.sqrt(f));for(zk(t,e,i,I,this.compareMinX),m=e;m<=i;m+=I)for(zk(t,m,x=Math.min(m+I-1,i),$,this.compareMinY),v=m;v<=x;v+=$)M=Math.min(v+$-1,x),s.children.push(this._build(t,v,M,n-1));return Mp(s,this.toBBox),s},_chooseSubtree:function(t,e,i,n){for(var s,h,f,m,v,x,M,$;n.push(e),!e.leaf&&n.length-1!==i;){for(M=$=1/0,s=0,h=e.children.length;s<h;s++)v=B_(f=e.children[s]),(x=che(t,f)-v)<$?($=x,M=v<M?v:M,m=f):x===$&&v<M&&(M=v,m=f);e=m||e.children[0]}return e},_insert:function(t,e,i){var n=this.toBBox,s=i?t:n(t),h=[],f=this._chooseSubtree(s,this.data,e,h);for(f.children.push(t),X1(f,s);e>=0&&h[e].children.length>this._maxEntries;)this._split(h,e),e--;this._adjustParentBBoxes(s,h,e)},_split:function(t,e){var i=t[e],n=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,n);var h=this._chooseSplitIndex(i,s,n),f=Yp(i.children.splice(h,i.children.length-h));f.height=i.height,f.leaf=i.leaf,Mp(i,this.toBBox),Mp(f,this.toBBox),e?t[e-1].children.push(f):this._splitRoot(i,f)},_splitRoot:function(t,e){this.data=Yp([t,e]),this.data.height=t.height+1,this.data.leaf=!1,Mp(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){var n,s,h,f,m,v,x,M;for(v=x=1/0,n=e;n<=i-e;n++)f=hhe(s=Y1(t,0,n,this.toBBox),h=Y1(t,n,i,this.toBBox)),m=B_(s)+B_(h),f<v?(v=f,M=n,x=m<x?m:x):f===v&&m<x&&(x=m,M=n);return M},_chooseSplitAxis:function(t,e,i){var n=t.leaf?this.compareMinX:Nk,s=t.leaf?this.compareMinY:Dk;this._allDistMargin(t,e,i,n)<this._allDistMargin(t,e,i,s)&&t.children.sort(n)},_allDistMargin:function(t,e,i,n){t.children.sort(n);var s,h,f=this.toBBox,m=Y1(t,0,e,f),v=Y1(t,i-e,i,f),x=Vy(m)+Vy(v);for(s=e;s<i-e;s++)h=t.children[s],X1(m,t.leaf?f(h):h),x+=Vy(m);for(s=i-e-1;s>=e;s--)h=t.children[s],X1(v,t.leaf?f(h):h),x+=Vy(v);return x},_adjustParentBBoxes:function(t,e,i){for(var n=i;n>=0;n--)X1(e[n],t)},_condense:function(t){for(var e,i=t.length-1;i>=0;i--)t[i].children.length===0?i>0?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():Mp(t[i],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};let Fk=class Hz{constructor(e,i){this.key=new tu(0,0,0,0),this.bounds=sn(),this.objectIds=new Set,this.key.set(i);const n=e.getLODInfoAt(this.key);this.tileInfoView=e,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=n.resolution,this.level=n.level,this.scale=n.scale,this.minScale=e.zoomToScale(n.level-1),this.maxScale=e.zoomToScale(n.level+1)}get lod(){return this.tileInfoView.getLODInfoAt(this.key)}get id(){return this.key.id}get extent(){return Lt.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createArcadeEvaluationOptions(e){return{$view:{scale:this.scale,timeZone:e}}}createChildTiles(){const e=this.key.getChildKeys(),i=mr.acquire();for(let n=0;n<e.length;n++)i[n]=new Hz(this.tileInfoView,e[n]);return i}getQuantizationParameters(){return bD.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}};const _u={added:[],removed:[]},q_=new Set,uhe=new tu(0,0,0,0);function dhe(t,e){const i=er(e);if(!i)return null;const[n,s]=i.valid;return t[2]>s?[sn([t[0],t[1],s,t[3]]),sn([n,t[1],n+t[2]-s,t[3]])]:t[0]<n?[sn([n,t[1],t[2],t[3]]),sn([s-(n-t[0]),t[1],s,t[3]])]:null}let phe=class extends ln{constructor(e){super(),this._tiles=new Map,this._index=I2(9,pe("esri-csp-restrictions")?i=>({minX:i.bounds[0],minY:i.bounds[1],maxX:i.bounds[2],maxY:i.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=e}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(e){return this._tiles.has(e)}get(e){return this._tiles.get(e)}getIntersectingTiles(e){if(!e||vS(e)===0||bS(e)===0)return[];const i=dhe(e,this.tileScheme.spatialReference);return i!=null?[...new Set([...this.boundsIntersections(i[0]),...this.boundsIntersections(i[1])])]:this.boundsIntersections(e)}boundsIntersections(e){return this._index.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]})}updateTiles(e){const i={added:[],removed:[]};for(const n of e.added)if(!this.has(n)){const s=new Fk(this.tileScheme,n);this._tiles.set(n,s),this._index.insert(s),i.added.push(s)}for(const n of e.removed)if(this.has(n)){const s=this.get(n);this._tiles.delete(n),this._index.remove(s),i.removed.push(s)}this.tiles.length=0,this._tiles.forEach(n=>this.tiles.push(n)),(i.added.length||i.removed.length)&&this.emit("update",i)}setViewState(e){const i=this.tileScheme.getTileCoverage(e,0);if(!i)return;const{spans:n,lodInfo:s}=i,{level:h}=s;if(n.length>0)for(const{row:f,colFrom:m,colTo:v}of n)for(let x=m;x<=v;x++){const M=uhe.set(h,f,s.normalizeCol(x),s.getWorldForColumn(x)).id;if(q_.add(M),!this.has(M)){const $=new Fk(this.tileScheme,M);this._tiles.set(M,$),this._index.insert($),this.tiles.push($),_u.added.push($)}}for(let f=this.tiles.length-1;f>=0;f--){const m=this.tiles[f];q_.has(m.id)||(this._tiles.delete(m.id),this.tiles.splice(f,1),this._index.remove(m),_u.removed.push(m))}(_u.added.length||_u.removed.length)&&this.emit("update",_u),im.pool.release(i),q_.clear(),_u.added.length=0,_u.removed.length=0}},dh=class extends Re{constructor(){super(...arguments),this.color=new gt([0,255,255]),this.haloOpacity=1,this.fillOpacity=.25,this.multiHighlightEnabled=!1}equals(e){return this.color.equals(e.color)&&(this.haloColor||this.color).equals(e.haloColor||e.color)&&this.haloOpacity===e.haloOpacity&&this.fillOpacity===e.fillOpacity&&this.multiHighlightEnabled===e.multiHighlightEnabled}};_([T({type:gt})],dh.prototype,"color",void 0),_([T({type:gt})],dh.prototype,"haloColor",void 0),_([T()],dh.prototype,"haloOpacity",void 0),_([T()],dh.prototype,"fillOpacity",void 0),_([T()],dh.prototype,"multiHighlightEnabled",void 0),dh=_([Y("esri.views.2d.support.HighlightOptions")],dh);const Bz=dh,By=t=>parseFloat(t)/100;function fhe(t,e,i){const n=typeof t.left=="string"?By(t.left)*e:t.left,s=typeof t.right=="string"?By(t.right)*e:t.right,h=typeof t.top=="string"?By(t.top)*i:t.top,f=typeof t.bottom=="string"?By(t.bottom)*i:t.bottom,m=h;return{xmin:n,xmax:Math.max(e-s,n),ymin:m,ymax:Math.max(i-f,h)}}function ghe(t,e,i,n){switch(e.type){case"rect":{const{width:s,height:h}=t,{xmin:f,xmax:m,ymin:v,ymax:x}=fhe(e,s,h),{x:M,y:$}=i;return M>f&&M<m&&$>v&&$<x}case"path":return e.path.length===0||!Array.isArray(e.path[0][0])||yS(e.path,[i.x,i.y]);case"geometry":return e.geometry==null||(e.geometry.type==="polygon"?mS(e.geometry,n):Mm(e.geometry,n))}}async function mhe(t,e,i){const n=MD(e)?TD(t,e):e;if(!t.ready||isNaN(n.x)||isNaN(n.y))return{screenPoint:n,results:[]};let s=new Set;const h=new Set;let f=!1,m=null,v=null;i!=null&&i.include?Gk(i.include,jk(t,I=>{s.add(I),W_(I,P=>h.add(P))},(I,P)=>{h.add(I),s.add(P)},I=>{m||(m=new Set),m.add(I)},I=>s.add(I),()=>f=!0)):(f=!0,s=new Set(t.allLayerViews),s.forEach(I=>{W_(I,P=>h.add(P))})),i!=null&&i.exclude&&Gk(i.exclude,jk(t,I=>{s.delete(I),W_(I,P=>h.delete(P))},I=>h.delete(I),I=>{v||(v=new Set),v.add(I)}));const x=t.toMap(n),M=t.allLayerViews.filter(I=>!I.suspended&&s.has(I)&&I.clips.every(P=>ghe(t,P,n,x))).reverse();let $=[...f?t.graphicsView.hitTest(x).map(I=>({type:"graphic",graphic:I,layer:null,mapPoint:x})):[],...await Promise.all(M.map(I=>I.hitTest(x,n)).toArray())].filter(ji).flat().filter(ji);return $=$.filter(I=>{var P;return I.type!=="graphic"||((P=I.layer)==null?void 0:P.type)!=="subtype-group"||h.has(I.graphic.layer)}),m&&($=$.filter(I=>!("graphic"in I)||!I.graphic||(m==null?void 0:m.has(O4(I.graphic))))),v&&($=$.filter(I=>!("graphic"in I)||!I.graphic||!(v!=null&&v.has(O4(I.graphic))))),{screenPoint:n,results:$}}function jk(t,e,i,n,s,h){return f=>{if(f instanceof Ud){if(f.layer===t)h==null||h();else{const m=t.allLayerViews.find(v=>v.layer===f.layer);m&&(s==null||s(m))}n(O4(f))}else if(!("layer"in f&&"element"in f))if(f.type==="subtype-sublayer"){const m=t.allLayerViews.find(v=>v.layer===f.parent);m&&i(f,m)}else{const m=t.allLayerViews.find(v=>v.layer===f);m&&e(m)}}}function Gk(t,e){if(t)if(Pb(t))for(const i of t)if(Pb(i))for(const n of i)e(n);else e(i);else e(t)}function O4(t){var i,n;const e=t.getObjectId();return e?`${((i=t.layer)==null?void 0:i.uid)??((n=t.sourceLayer)==null?void 0:n.uid)??"MapView"}/${e}`:`"MapView/${t.uid}`}function W_({layer:t},e){(t==null?void 0:t.type)==="subtype-group"&&t.sublayers.forEach(i=>{e(i)})}function yhe(t,e,i){const{ctx:n,canvas:s}=Uz(t,i),h=n.getImageData(0,0,t.width,t.height),f=whe(s,e);return qz(s),{dataUrl:f,data:h}}function vhe(t,e){const{ctx:i,canvas:n}=Uz(t,e),s=i.getImageData(0,0,t.width,t.height);return qz(n),s}function Uz(t,e){const i=bhe();e.premultipliedAlpha&&Mhe(t),i.width=t.width,i.height=t.height;const n=i.getContext("2d",{willReadFrequently:!0});return n.putImageData(t,0,0),e.flipY&&The(n),{ctx:n,canvas:i}}function qz(t){t.width=0,t.height=0}function bhe(){return Z_==null&&(Z_=document.createElement("canvas")),Z_}let Z_=null;function whe(t,e){const i=Ehe[e.format],n=e.quality/100;return t.toDataURL(i,n)}function _he(t,e){const i=She(t),n=$he[i];return{format:i,quality:qr(e??n,0,100)}}function xhe(t,e){return e/Math.max(t[0],t[1])}function pMe(t,e,i,n=0,s=0,h=t.width-n,f=t.height-s,m=!1){const{data:v}=t,{width:x,height:M,data:$}=e,I=h/x,P=f/M,L=Math.ceil(I/2),z=Math.ceil(P/2),F=t.width;for(let U=0;U<M;U++)for(let W=0;W<x;W++){const K=4*(W+(m?M-U-1:U)*x);let J=0,te=0,ie=0,le=0,de=0,xe=0;const we=(U+.5)*P;for(let ve=Math.floor(U*P);ve<(U+1)*P;ve++){const se=Math.abs(we-(ve+.5))/z,ce=(W+.5)*I,ue=se*se;for(let Ae=Math.floor(W*I);Ae<(W+1)*I;Ae++){const je=Math.abs(ce-(Ae+.5))/L,Ge=Math.sqrt(ue+je*je);if(Ge>=1)continue;let He=2*Ge*Ge*Ge-3*Ge*Ge+1;const mt=4*(n+Ae+(s+ve)*F);xe+=He*v[mt+3],te+=He,ie+=He*v[mt],le+=He*v[mt+1],de+=He*v[mt+2],J+=He}}$[K]=ie/J,$[K+1]=le/J,$[K+2]=de/J,$[K+3]=xe/te}return e}function She(t){switch(t){case"png":case"jpg":case"jpeg":return t;default:return khe}}function The(t){t.save(),t.globalCompositeOperation="copy",t.scale(1,-1),t.translate(0,-t.canvas.height),t.drawImage(t.canvas,0,0),t.restore()}function Mhe(t){const e=t.data,i=e.length;for(let n=0;n<i;n+=4){const s=e[n+3];if(s!==255&&s>0){const h=255/s;e[n]=e[n]*h,e[n+1]=e[n+1]*h,e[n+2]=e[n+2]*h}}}const Ehe={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},Vk=98,khe="png",$he={png:100,jpg:Vk,jpeg:Vk},Wz={flipY:!0,premultipliedAlpha:!0};async function Che(t,e){const i=await Zz(t,e),{format:n,quality:s}=_he(e==null?void 0:e.format,e==null?void 0:e.quality);return yhe(i,{format:n,quality:s,rotation:0,disableDecorations:!1},Wz)}async function Ihe(t,e){const i=await Zz(t,e);return vhe(i,Wz)}function Zz(t,e){const i=Phe(e||{},Ohe(t.stage,t.size),t.size,t.padding),n=Ahe(e,t.allLayerViews);return t.stage.takeScreenshot(i,n,t.backgroundColor,e==null?void 0:e.rotation)}function Ahe(t={},e){if(!t.layers)return;const i=[];return t.layers.forEach(n=>{const s=e.find(h=>h.layer.id===n.id);s!=null&&s.container&&i.push(s.container)}),i}function Ohe(t,e){return Math.min(4,xhe(e,Math.min(4096,t.context.parameters.maxTextureSize)))}function Phe(t,e,i,n){t.ignorePadding&&(n={left:0,right:0,top:0,bottom:0});let s=null;t.width!=null&&t.height!=null?s=[t.width,t.height]:t.width==null&&t.height!=null?s=[t.height,t.height]:t.width!=null&&t.height==null?s=[t.width,t.width]:t.width==null&&t.height==null&&(s=null);const h=i[0]-(n.left+n.right),f=i[1]-(n.top+n.bottom);let m,v,x=t.area||{x:0,y:0,width:h,height:f};if(s){const M=h/f,$=s[0]/s[1];if($>M){const I=x.width/$;x={x:x.x,y:Math.round(x.y+(x.height-I)/2),width:x.width,height:Math.round(I)}}else{const I=x.height*$;x={x:Math.round(x.x+(x.width-I)/2),y:x.y,width:Math.round(I),height:x.height}}}else s=[x.width,x.height];return s[0]>x.width?(m=Math.min(s[0]/x.width,e),v=s[0]/x.width/m):(m=1,v=s[0]/x.width),{cropArea:{x:Math.round((x.x+n.left)*m),y:Math.round((x.y+n.top)*m),width:Math.round(x.width*m),height:Math.round(x.height*m)},outputScale:v,resolutionScale:m}}const Hk=160;let Q1=class extends Re{constructor(){super(...arguments),this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now(),this._timer==null&&(this._timer=setInterval(()=>{performance.now()-this._timestamp>=Hk&&this.clear()},Hk))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};_([T()],Q1.prototype,"_timer",void 0),_([T()],Q1.prototype,"stationary",null),Q1=_([Y("esri.views.2d.support.StationaryManager")],Q1);const Rhe=t=>t.includes("Brush");let Jz=class{constructor(){this._names=new Map}begin(e){this._names.has(e)||(this._names.set(e,!1),Rhe(e)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${e}.Start`))}end(e){this._names.has(e)&&!this._names.get(e)&&(this._names.set(e,!0),performance.mark(`Esri.${e}.End`))}record(e){this._names.has(e)||(this._names.set(e,!0),performance.mark(`Esri.${e}`))}};function Bk(t,e={}){return t.getContext("webgl2",e)||null}let J_;function Lhe(){return J_||(J_=zhe()),J_}let Nhe=class{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1}};function Dhe(t){if(typeof WebGL2RenderingContext>"u")return null;const e=document.createElement("canvas");if(!e)return null;let i=Bk(e,{failIfMajorPerformanceCaveat:!0});if(i==null&&(i=Bk(e),i!=null&&(t.majorPerformanceCaveat=!0)),i==null)return i;t.available=!0,t.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),t.supportsVertexShaderSamplers=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const n=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT);return n&&(t.supportsHighPrecisionFragment=n.precision>0),i}function zhe(){const t=new Nhe,e=Dhe(t);return e==null||(t.supportsColorBufferFloat=e.getExtension("EXT_color_buffer_float")!==null,t.supportsColorBufferFloatBlend=e.getExtension("EXT_float_blend")!==null,t.supportsColorBufferHalfFloat=t.supportsColorBufferFloat||e.getExtension("EXT_color_buffer_half_float")!==null),t}function Fhe(t){const e=Lhe();return e.available?t==="3d"&&e.majorPerformanceCaveat?new fe("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist."):e.supportsHighPrecisionFragment?e.supportsVertexShaderSamplers?null:new fe("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new fe("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new fe("webgl:required","WebGL2 is required but not supported.",new Error().stack)}function jhe(t){return t&&"nodeType"in t}function Ghe(t){return t&&typeof t.render=="function"}const Uk={component:"esri-component"};let Yu=class extends Re{constructor(){super(...arguments),this.widget=null}destroy(){var e;this.node=null,(e=this.widget)==null||e.destroy()}get id(){var e,i;return this._get("id")??((e=this.widget)==null?void 0:e.id)??((i=this.node)==null?void 0:i.id)}set id(e){this._set("id",e)}set node(e){const i=this._get("node");e!==i&&(e&&e.classList.add(Uk.component),i&&i.classList.remove(Uk.component),this._set("node",e))}castNode(e){var i;return(i=this.widget)==null||i.destroy(),e?typeof e=="string"||jhe(e)?(this._set("widget",null),qS(e)):(Ghe(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};_([T()],Yu.prototype,"id",null),_([T()],Yu.prototype,"node",null),_([qi("node")],Yu.prototype,"castNode",null),_([T({readOnly:!0})],Yu.prototype,"widget",void 0),Yu=_([Y("esri.views.ui.Component")],Yu);const gb=Yu,Kz="calcite-mode-";function Vhe(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-mode-name").replaceAll(/\s|'|"/g,"")}function Hhe(){return Vhe().startsWith("dark")}function Bhe(){return`${Kz}${Hhe()?"dark":"light"}`}function Uhe(t){qhe(t),t.classList.add(Bhe())}function qhe(t){Array.from(t.classList).forEach(e=>{e.startsWith(Kz)&&t.classList.remove(e)})}const Whe={left:0,top:0,bottom:0,right:0},Yz={bottom:30,top:15,right:15,left:15},wl="esri-ui",Cr={ui:wl,corner:`${wl}-corner`,innerContainer:`${wl}-inner-container`,manualContainer:`${wl}-manual-container`,cornerContainer:`${wl}-corner-container`,topLeft:`${wl}-top-left`,topRight:`${wl}-top-right`,bottomLeft:`${wl}-bottom-left`,bottomRight:`${wl}-bottom-right`};function Zhe(t){return t&&!t._started&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}function Uy(t){return t===0?"0":`${t}px`}function K_(t){const e=typeof t=="object"&&t!==null&&Object.getPrototypeOf(t);return(e===null||e===Object.prototype)&&("component"in t||"index"in t||"position"in t)?t:null}function Y_(t,{top:e,bottom:i,left:n,right:s}){t.style.top=e,t.style.bottom=i,t.style.left=n,t.style.right=s}let $a=class extends ln.EventedAccessor{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._removeWidgetHandleKey=Symbol("componentOnRemoveSymbol"),this._locale=Ur(),this.view=null,this._applyViewPadding=()=>{const i=this.container;i&&Y_(i,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const i=this._innerContainer;i&&Y_(i,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([Ee(()=>{var e;return[(e=this.view)==null?void 0:e.padding,this.container]},this._applyViewPadding,Pt),Ee(()=>this.padding,this._applyUIPadding,Pt),Ee(()=>[this.container,this._locale],([e,i])=>{e&&e.setAttribute("lang",i)},Pt),$S(e=>{this._locale=e})])}destroy(){this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._componentMap.clear()}set container(e){const i=this._get("container");e!==i&&(e&&(e.classList.add(Cr.ui),Uhe(e),this._attachContainers(e)),i&&(i.classList.remove(Cr.ui),Y_(i,{top:"",bottom:"",left:"",right:""}),sL(i)),this._set("container",e))}get height(){var h;const e=((h=this.view)==null?void 0:h.height)??0;if(e===0)return e;const i=this._getViewPadding(),{top:n,bottom:s}=i;return Math.max(e-n-s,0)}get padding(){return this._get("padding")}set padding(e){this._overrideIfSome("padding",e)}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:{...Yz,...e}}get width(){var h;const e=((h=this.view)==null?void 0:h.width)??0;if(e===0)return e;const i=this._getViewPadding(),{left:n,right:s}=i;return Math.max(e-n-s,0)}add(e,i){let n,s,h;if(Array.isArray(e))return void e.forEach(m=>this.add(m,i));const f=K_(e);f&&({index:n,position:i,component:e,key:s}=f),i&&typeof i=="object"&&({index:n,key:s,position:i,internal:h}=i),!e||i&&!this._isValidPosition(i)||this._add(e,i,n,s,h)}remove(e,i){var s,h;if(!e)return;if(Array.isArray(e))return e.map(f=>this.remove(f,i));const n=this._find(e);if(n){if(this._componentMap.has(n)&&((s=this._componentMap.get(n))==null?void 0:s.key)!==i)return;const f=this._components.indexOf(n),m=n.node.parentNode;return m==null||m.removeChild(n.node),this._componentMap.delete(n),(h=n.widget)==null||h.removeHandlesReference(this._removeWidgetHandleKey),this._components.splice(f,1)[0]}}empty(e,i={removeInternal:!1}){if(Array.isArray(e)){for(const h of e)this.empty(h,i);return}const n=this._positionNameToContainerLookup[e??"manual"],s=Array.prototype.slice.call(n.children).map(h=>this._findByNode(h)).filter(h=>{var f;return h==null?!1:!(((f=this._componentMap.get(h))==null?void 0:f.internal)??!1)||i.removeInternal});for(const h of s)this.remove(h)}move(e,i){if(Array.isArray(e)&&e.forEach(f=>this.move(f,i)),!e)return;let n;const s=K_(e)||K_(i);if(s&&(n=s.index,i=s.position,e=s.component||e),i&&!this._isValidPosition(i))return;const h=this.remove(e);h&&this.add(h,{position:i,index:n})}find(e){if(!e)return null;const i=this._findById(e);return i&&(i.widget||i.node)}getComponents(e,i={includeInternal:!1}){return e?Array.isArray(e)?e.flatMap(n=>this._getComponentsAtPosition(n,i)):this._getComponentsAtPosition(e,i):this._components.filter(n=>{var s;return i.includeInternal||!((s=this._componentMap.get(n))!=null&&s.internal)}).map(({widget:n,node:s})=>n??s)}getPosition(e){for(const i in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[i].contains(e))return i;return null}_add(e,i,n,s,h){e instanceof gb||(e=new gb({node:e}));const{widget:f}=e;f!=null&&f instanceof Re&&f.addHandles(ut(()=>{queueMicrotask(()=>this.remove(e))}),this._removeWidgetHandleKey),this._place({component:e,position:i,index:n}),this._components.push(e),this._componentMap.set(e,{key:s,internal:h})}_find(e){return e?e instanceof gb?this._findByComponent(e):typeof e=="string"?this._findById(e):this._findByNode(e.domNode||e):null}_getViewPadding(){var e;return((e=this.view)==null?void 0:e.padding)??Whe}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(Cr.innerContainer,Cr.cornerContainer);const i=document.createElement("div");i.classList.add(Cr.innerContainer,Cr.manualContainer);const n=document.createElement("div");n.classList.add(Cr.topLeft,Cr.corner),e.appendChild(n);const s=document.createElement("div");s.classList.add(Cr.topRight,Cr.corner),e.appendChild(s);const h=document.createElement("div");h.classList.add(Cr.bottomLeft,Cr.corner),e.appendChild(h);const f=document.createElement("div");f.classList.add(Cr.bottomRight,Cr.corner),e.appendChild(f),this._innerContainer=e,this._manualContainer=i;const m=Nx();this._cornerNameToContainerLookup={"top-left":n,"top-right":s,"bottom-left":h,"bottom-right":f,"top-leading":m?s:n,"top-trailing":m?n:s,"bottom-leading":m?f:h,"bottom-trailing":m?h:f},this._positionNameToContainerLookup={manual:i,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){const i=e.position??"manual",{component:n,index:s}=e,h=this._positionNameToContainerLookup[i],f=s!=null&&s>-1;if(Zhe(n.widget)&&n.widget.startup(),!f)return void h.appendChild(n.node);const m=Array.from(h.children);if(s===0)return void(h.firstChild?uE(n.node,h.firstChild):h.appendChild(n.node));s>=m.length?h.appendChild(n.node):uE(n.node,m[s])}_toPixelPosition(e){return{top:Uy(e.top),left:Uy(e.left),right:Uy(e.right),bottom:Uy(e.bottom)}}_findByComponent(e){return this._components.find(i=>i===e)??null}_findById(e){return this._components.find(({id:i})=>i===e)??null}_findByNode(e){return this._components.find(({node:i})=>i===e)??null}_getComponentsAtPosition(e,i){const n=this._positionNameToContainerLookup[e];return Array.prototype.slice.call(n.children).map(s=>this._findByNode(s)).filter(ji).filter(s=>{var h;return i.includeInternal||!((h=this._componentMap.get(s))!=null&&h.internal)}).map(({widget:s,node:h})=>s??h)}};_([T()],$a.prototype,"_locale",void 0),_([T()],$a.prototype,"container",null),_([T()],$a.prototype,"height",null),_([T({value:Yz})],$a.prototype,"padding",null),_([qi("padding")],$a.prototype,"castPadding",null),_([T()],$a.prototype,"view",void 0),_([T()],$a.prototype,"width",null),$a=_([Y("esri.views.ui.UI")],$a);const Jhe=$a,Khe="randomUUID"in crypto;function OT(){if(Khe)return crypto.randomUUID();const t=crypto.getRandomValues(new Uint16Array(8));t[3]=4095&t[3]|16384,t[4]=16383&t[4]|32768;const e=i=>t[i].toString(16).padStart(4,"0");return e(0)+e(1)+"-"+e(2)+"-"+e(3)+"-"+e(4)+"-"+e(5)+e(6)+e(7)}function bMe(){return`{${OT().toUpperCase()}}`}function wMe(){return`{${OT()}}`}const Yhe={handleInterceptedEvent:(t,e,i,n)=>(t.scheduleRender(),e.properties[`on${n.type}`].apply(e.properties.bind||i,[n]))},Xhe={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,i)=>{e.charAt(0)==="-"?t.style.setProperty(e,i):t.style[e]=i}},Qhe=t=>({...Xhe,...t}),eue=(t,e)=>{const i=[];for(;t&&t!==e;)i.push(t),t=t.parentNode;return i},tue=(t,e)=>t.find(e),qk=(t,e,i=!1)=>{let n=t;return e.forEach((s,h)=>{const f=n!=null&&n.children?tue(n.children,m=>m.domNode===s):void 0;i&&!f&&h!==e.length-1||(n=f)}),n},iue=t=>{let e;const i={...Yhe,...t},n=Qhe(i),s=n.performanceLogger;let h,f=!0,m=!1;const v=[],x=[],M=(I,P,L)=>{var U;let z;n.eventHandlerInterceptor=(W,K,J,te)=>function(ie){let le;s("domEvent",ie);const de=eue(ie.currentTarget,z.domNode),xe=de.some(ve=>{var se;return customElements.get((se=ve==null?void 0:ve.tagName)==null?void 0:se.toLowerCase())});if(ie.eventPhase===Event.CAPTURING_PHASE||!xe)de.reverse(),le=qk(z.getLastRender(),de);else{const ve=ie.composedPath(),se=ve.slice(ve.indexOf(ie.currentTarget),ve.indexOf(z.domNode)).reverse();le=qk(z.getLastRender(),se,!0)}let we;return le&&(we=i.handleInterceptedEvent(e,le,this,ie)),s("domEventProcessed",ie),we},(U=i.postProcessProjectionOptions)==null||U.call(i,n);const F=L();z=I(P,F,n),n.eventHandlerInterceptor=void 0,v.push(z),x.push(L),i.afterFirstVNodeRendered&&i.afterFirstVNodeRendered(z,F)};let $=()=>{if(h=void 0,f){f=!1,s("renderStart",void 0);for(let I=0;I<v.length;I++){const P=x[I]();s("rendered",void 0),v[I].update(P),s("patched",void 0)}s("renderDone",void 0),f=!0}};return i.modifyDoRenderImplementation&&($=i.modifyDoRenderImplementation($,v,x)),e={renderNow:$,scheduleRender:()=>{h||m||(h=requestAnimationFrame($))},stop:()=>{h&&(cancelAnimationFrame(h),h=void 0),m=!0},resume:()=>{m=!1,f=!0,e.scheduleRender()},append:(I,P)=>{M(Lh.append,I,P)},insertBefore:(I,P)=>{M(Lh.insertBefore,I,P)},merge:(I,P)=>{M(Lh.merge,I,P)},replace:(I,P)=>{M(Lh.replace,I,P)},detach:I=>{for(let P=0;P<x.length;P++)if(x[P]===I)return x.splice(P,1),v.splice(P,1)[0];throw new Error("renderFunction was not found")}},e};/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */const Xz="calcite-mode-auto",Qz="calcite-mode-dark",nue="calcite-mode-light",tc={autoMode:Xz,darkMode:Qz,lightMode:nue,rtl:"calcite--rtl",calciteAnimate:"calcite-animate",calciteAnimateIn:"calcite-animate__in",calciteAnimateInUp:"calcite-animate__in-up",calciteAnimateInDown:"calcite-animate__in-down",calciteAnimateInRight:"calcite-animate__in-right",calciteAnimateInLeft:"calcite-animate__in-left",calciteAnimateInScale:"calcite-animate__in-scale"};/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */const Td=globalThis.calciteConfig,rue=(Td==null?void 0:Td.focusTrapStack)||[],Wk="2.10.1";function sue(){if(Td&&Td.version){console.warn(`[calcite-components] while initializing v${Wk}, an existing configuration with version "${Td.version}" was found. This may cause unexpected behavior. The version will not be added to the existing global configuration.`);return}const t=Td||globalThis.calciteConfig||{};Object.defineProperty(t,"version",{value:Wk,writable:!1}),globalThis.calciteConfig=t}var sc={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,formAssociated:!1,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0,experimentalSlotFixes:!1},oue=Object.defineProperty,aue=(t,e)=>{for(var i in e)oue(t,i,{get:e[i],enumerable:!0})},PT=t=>{const e=new URL(t,$n.$resourcesUrl$);return e.origin!==qm.location.origin?e.href:e.pathname},eF=t=>$n.$resourcesUrl$=t,Zk={},lue="http://www.w3.org/2000/svg",cue="http://www.w3.org/1999/xhtml",hue=t=>t!=null,RT=t=>(t=typeof t,t==="object"||t==="function");function uue(t){var e,i,n;return(n=(i=(e=t.head)==null?void 0:e.querySelector('meta[name="csp-nonce"]'))==null?void 0:i.getAttribute("content"))!=null?n:void 0}var due={};aue(due,{err:()=>tF,map:()=>pue,ok:()=>P4,unwrap:()=>fue,unwrapErr:()=>gue});var P4=t=>({isOk:!0,isErr:!1,value:t}),tF=t=>({isOk:!1,isErr:!0,value:t});function pue(t,e){if(t.isOk){const i=e(t.value);return i instanceof Promise?i.then(n=>P4(n)):P4(i)}if(t.isErr){const i=t.value;return tF(i)}throw"should never get here"}var fue=t=>{if(t.isOk)return t.value;throw t.value},gue=t=>{if(t.isErr)return t.value;throw t.value},qd=(t,e="")=>()=>{},mue="slot-fb{display:contents}slot-fb[hidden]{display:none}",Jk="http://www.w3.org/1999/xlink",X=(t,e,...i)=>{let n=null,s=null,h=null,f=!1,m=!1;const v=[],x=$=>{for(let I=0;I<$.length;I++)n=$[I],Array.isArray(n)?x(n):n!=null&&typeof n!="boolean"&&((f=typeof t!="function"&&!RT(n))&&(n=String(n)),f&&m?v[v.length-1].$text$+=n:v.push(f?A2(null,n):n),m=f)};if(x(i),e){e.key&&(s=e.key),e.name&&(h=e.name);{const $=e.className||e.class;$&&(e.class=typeof $!="object"?$:Object.keys($).filter(I=>$[I]).join(" "))}}if(typeof t=="function")return t(e===null?{}:e,v,vue);const M=A2(t,null);return M.$attrs$=e,v.length>0&&(M.$children$=v),M.$key$=s,M.$name$=h,M},A2=(t,e)=>{const i={$flags$:0,$tag$:t,$text$:e,$elm$:null,$children$:null};return i.$attrs$=null,i.$key$=null,i.$name$=null,i},cn={},yue=t=>t&&t.$tag$===cn,vue={forEach:(t,e)=>t.map(Kk).forEach(e),map:(t,e)=>t.map(Kk).map(e).map(bue)},Kk=t=>({vattrs:t.$attrs$,vchildren:t.$children$,vkey:t.$key$,vname:t.$name$,vtag:t.$tag$,vtext:t.$text$}),bue=t=>{if(typeof t.vtag=="function"){const i={...t.vattrs};return t.vkey&&(i.key=t.vkey),t.vname&&(i.name=t.vname),X(t.vtag,i,...t.vchildren||[])}const e=A2(t.vtag,t.vtext);return e.$attrs$=t.vattrs,e.$children$=t.vchildren,e.$key$=t.vkey,e.$name$=t.vname,e},wue=t=>Zue.map(e=>e(t)).find(e=>!!e),_ue=(t,e)=>t!=null&&!RT(t)?e&4?t==="false"?!1:t===""||!!t:e&2?parseFloat(t):e&1?String(t):t:t,xue=t=>t,qe=(t,e,i)=>{const n=xue(t);return{emit:s=>Sue(n,e,{bubbles:!!(i&4),composed:!!(i&2),cancelable:!!(i&1),detail:s})}},Sue=(t,e,i)=>{const n=$n.ce(e,i);return t.dispatchEvent(n),n},Yk=new WeakMap,Tue=(t,e,i)=>{let n=R2.get(t);Yue&&i?(n=n||new CSSStyleSheet,typeof n=="string"?n=e:n.replaceSync(e)):n=e,R2.set(t,n)},Mue=(t,e,i)=>{var n;const s=iF(e,i),h=R2.get(s);if(t=t.nodeType===11?t:Xo,h)if(typeof h=="string"){t=t.head||t;let f=Yk.get(t),m;if(f||Yk.set(t,f=new Set),!f.has(s)){{m=Xo.createElement("style"),m.innerHTML=h;const v=(n=$n.$nonce$)!=null?n:uue(Xo);v!=null&&m.setAttribute("nonce",v),t.insertBefore(m,t.querySelector("link"))}e.$flags$&4&&(m.innerHTML+=mue),f&&f.add(s)}}else t.adoptedStyleSheets.includes(h)||(t.adoptedStyleSheets=[...t.adoptedStyleSheets,h]);return s},Eue=t=>{const e=t.$cmpMeta$,i=t.$hostElement$,n=e.$flags$,s=qd("attachStyles",e.$tagName$),h=Mue(i.shadowRoot?i.shadowRoot:i.getRootNode(),e,t.$modeName$);n&10&&(i["s-sc"]=h,i.classList.add(h+"-h"),n&2&&i.classList.add(h+"-s")),s()},iF=(t,e)=>"sc-"+(e&&t.$flags$&32?t.$tagName$+"-"+e:t.$tagName$),Xk=(t,e,i,n,s,h)=>{if(i!==n){let f=s$(t,e),m=e.toLowerCase();if(e==="class"){const v=t.classList,x=Qk(i),M=Qk(n);v.remove(...x.filter($=>$&&!M.includes($))),v.add(...M.filter($=>$&&!x.includes($)))}else if(e==="style"){for(const v in i)(!n||n[v]==null)&&(v.includes("-")?t.style.removeProperty(v):t.style[v]="");for(const v in n)(!i||n[v]!==i[v])&&(v.includes("-")?t.style.setProperty(v,n[v]):t.style[v]=n[v])}else if(e!=="key")if(e==="ref")n&&n(t);else if(!t.__lookupSetter__(e)&&e[0]==="o"&&e[1]==="n"){if(e[2]==="-"?e=e.slice(3):s$(qm,m)?e=m.slice(2):e=m[2]+e.slice(3),i||n){const v=e.endsWith(nF);e=e.replace($ue,""),i&&$n.rel(t,e,i,v),n&&$n.ael(t,e,n,v)}}else{const v=RT(n);if((f||v&&n!==null)&&!s)try{if(t.tagName.includes("-"))t[e]=n;else{const M=n??"";e==="list"?f=!1:(i==null||t[e]!=M)&&(t[e]=M)}}catch{}let x=!1;m!==(m=m.replace(/^xlink\:?/,""))&&(e=m,x=!0),n==null||n===!1?(n!==!1||t.getAttribute(e)==="")&&(x?t.removeAttributeNS(Jk,e):t.removeAttribute(e)):(!f||h&4||s)&&!v&&(n=n===!0?"":n,x?t.setAttributeNS(Jk,e,n):t.setAttribute(e,n))}}},kue=/\s/,Qk=t=>t?t.split(kue):[],nF="Capture",$ue=new RegExp(nF+"$"),rF=(t,e,i)=>{const n=e.$elm$.nodeType===11&&e.$elm$.host?e.$elm$.host:e.$elm$,s=t&&t.$attrs$||Zk,h=e.$attrs$||Zk;for(const f of e$(Object.keys(s)))f in h||Xk(n,f,s[f],void 0,i,e.$flags$);for(const f of e$(Object.keys(h)))Xk(n,f,s[f],h[f],i,e.$flags$)};function e$(t){return t.includes("ref")?[...t.filter(e=>e!=="ref"),"ref"]:t}var Xp,R4,t0,LT=!1,O2=!1,NT=!1,fs=!1,P2=(t,e,i,n)=>{var s;const h=e.$children$[i];let f=0,m,v,x;if(LT||(NT=!0,h.$tag$==="slot"&&(Xp&&n.classList.add(Xp+"-s"),h.$flags$|=h.$children$?2:1)),h.$text$!==null)m=h.$elm$=Xo.createTextNode(h.$text$);else if(h.$flags$&1)m=h.$elm$=Xo.createTextNode("");else{if(fs||(fs=h.$tag$==="svg"),m=h.$elm$=Xo.createElementNS(fs?lue:cue,h.$flags$&2?"slot-fb":h.$tag$),fs&&h.$tag$==="foreignObject"&&(fs=!1),rF(null,h,fs),hue(Xp)&&m["s-si"]!==Xp&&m.classList.add(m["s-si"]=Xp),zT(m,n),h.$children$)for(f=0;f<h.$children$.length;++f)v=P2(t,h,f,m),v&&m.appendChild(v);h.$tag$==="svg"?fs=!1:m.tagName==="foreignObject"&&(fs=!0)}return m["s-hn"]=t0,h.$flags$&3&&(m["s-sr"]=!0,m["s-cr"]=R4,m["s-sn"]=h.$name$||"",m["s-rf"]=(s=h.$attrs$)==null?void 0:s.ref,x=t&&t.$children$&&t.$children$[i],x&&x.$tag$===h.$tag$&&t.$elm$&&nm(t.$elm$,!1)),m},nm=(t,e)=>{$n.$flags$|=1;const i=Array.from(t.childNodes);if(t["s-sr"]&&sc.experimentalSlotFixes){let n=t;for(;n=n.nextSibling;)n&&n["s-sn"]===t["s-sn"]&&n["s-sh"]===t0&&i.push(n)}for(let n=i.length-1;n>=0;n--){const s=i[n];s["s-hn"]!==t0&&s["s-ol"]&&(jh(aF(s),s,DT(s)),s["s-ol"].remove(),s["s-ol"]=void 0,s["s-sh"]=void 0,NT=!0),e&&nm(s,e)}$n.$flags$&=-2},sF=(t,e,i,n,s,h)=>{let f=t["s-cr"]&&t["s-cr"].parentNode||t,m;for(f.shadowRoot&&f.tagName===t0&&(f=f.shadowRoot);s<=h;++s)n[s]&&(m=P2(null,i,s,t),m&&(n[s].$elm$=m,jh(f,m,DT(e))))},oF=(t,e,i)=>{for(let n=e;n<=i;++n){const s=t[n];if(s){const h=s.$elm$;hF(s),h&&(O2=!0,h["s-ol"]?h["s-ol"].remove():nm(h,!0),h.remove())}}},Cue=(t,e,i,n,s=!1)=>{let h=0,f=0,m=0,v=0,x=e.length-1,M=e[0],$=e[x],I=n.length-1,P=n[0],L=n[I],z,F;for(;h<=x&&f<=I;)if(M==null)M=e[++h];else if($==null)$=e[--x];else if(P==null)P=n[++f];else if(L==null)L=n[--I];else if(qy(M,P,s))Qp(M,P,s),M=e[++h],P=n[++f];else if(qy($,L,s))Qp($,L,s),$=e[--x],L=n[--I];else if(qy(M,L,s))(M.$tag$==="slot"||L.$tag$==="slot")&&nm(M.$elm$.parentNode,!1),Qp(M,L,s),jh(t,M.$elm$,$.$elm$.nextSibling),M=e[++h],L=n[--I];else if(qy($,P,s))(M.$tag$==="slot"||L.$tag$==="slot")&&nm($.$elm$.parentNode,!1),Qp($,P,s),jh(t,$.$elm$,M.$elm$),$=e[--x],P=n[++f];else{for(m=-1,v=h;v<=x;++v)if(e[v]&&e[v].$key$!==null&&e[v].$key$===P.$key$){m=v;break}m>=0?(F=e[m],F.$tag$!==P.$tag$?z=P2(e&&e[f],i,m,t):(Qp(F,P,s),e[m]=void 0,z=F.$elm$),P=n[++f]):(z=P2(e&&e[f],i,f,t),P=n[++f]),z&&jh(aF(M.$elm$),z,DT(M.$elm$))}h>x?sF(t,n[I+1]==null?null:n[I+1].$elm$,i,n,f,I):f>I&&oF(e,h,x)},qy=(t,e,i=!1)=>t.$tag$===e.$tag$?t.$tag$==="slot"?t.$name$===e.$name$:i?!0:t.$key$===e.$key$:!1,DT=t=>t&&t["s-ol"]||t,aF=t=>(t["s-ol"]?t["s-ol"]:t).parentNode,Qp=(t,e,i=!1)=>{const n=e.$elm$=t.$elm$,s=t.$children$,h=e.$children$,f=e.$tag$,m=e.$text$;let v;m===null?(fs=f==="svg"?!0:f==="foreignObject"?!1:fs,f==="slot"&&!LT||rF(t,e,fs),s!==null&&h!==null?Cue(n,s,e,h,i):h!==null?(t.$text$!==null&&(n.textContent=""),sF(n,null,e,h,0,h.length-1)):s!==null&&oF(s,0,s.length-1),fs&&f==="svg"&&(fs=!1)):(v=n["s-cr"])?v.parentNode.textContent=m:t.$text$!==m&&(n.data=m)},lF=t=>{const e=t.childNodes;for(const i of e)if(i.nodeType===1){if(i["s-sr"]){const n=i["s-sn"];i.hidden=!1;for(const s of e)if(s!==i){if(s["s-hn"]!==i["s-hn"]||n!==""){if(s.nodeType===1&&(n===s.getAttribute("slot")||n===s["s-sn"])||s.nodeType===3&&n===s["s-sn"]){i.hidden=!0;break}}else if(s.nodeType===1||s.nodeType===3&&s.textContent.trim()!==""){i.hidden=!0;break}}}lF(i)}},ic=[],cF=t=>{let e,i,n;for(const s of t.childNodes){if(s["s-sr"]&&(e=s["s-cr"])&&e.parentNode){i=e.parentNode.childNodes;const h=s["s-sn"];for(n=i.length-1;n>=0;n--)if(e=i[n],!e["s-cn"]&&!e["s-nr"]&&e["s-hn"]!==s["s-hn"]&&!sc.experimentalSlotFixes)if(t$(e,h)){let f=ic.find(m=>m.$nodeToRelocate$===e);O2=!0,e["s-sn"]=e["s-sn"]||h,f?(f.$nodeToRelocate$["s-sh"]=s["s-hn"],f.$slotRefNode$=s):(e["s-sh"]=s["s-hn"],ic.push({$slotRefNode$:s,$nodeToRelocate$:e})),e["s-sr"]&&ic.map(m=>{t$(m.$nodeToRelocate$,e["s-sn"])&&(f=ic.find(v=>v.$nodeToRelocate$===e),f&&!m.$slotRefNode$&&(m.$slotRefNode$=f.$slotRefNode$))})}else ic.some(f=>f.$nodeToRelocate$===e)||ic.push({$nodeToRelocate$:e})}s.nodeType===1&&cF(s)}},t$=(t,e)=>t.nodeType===1?t.getAttribute("slot")===null&&e===""||t.getAttribute("slot")===e:t["s-sn"]===e?!0:e==="",hF=t=>{t.$attrs$&&t.$attrs$.ref&&t.$attrs$.ref(null),t.$children$&&t.$children$.map(hF)},jh=(t,e,i)=>{const n=t==null?void 0:t.insertBefore(e,i);return zT(e,t),n},uF=t=>{const e=[];return t&&e.push(...t["s-scs"]||[],t["s-si"],t["s-sc"],...uF(t.parentElement)),e},zT=(t,e,i=!1)=>{var n;if(t&&e&&t.nodeType===1){const s=new Set(uF(e).filter(Boolean));if(s.size&&((n=t.classList)==null||n.add(...t["s-scs"]=[...s]),t["s-ol"]||i))for(const h of Array.from(t.childNodes))zT(h,t,!0)}},Iue=(t,e,i=!1)=>{var n,s,h,f,m;const v=t.$hostElement$,x=t.$cmpMeta$,M=t.$vnode$||A2(null,null),$=yue(e)?e:X(null,null,e);if(t0=v.tagName,x.$attrsToReflect$&&($.$attrs$=$.$attrs$||{},x.$attrsToReflect$.map(([I,P])=>$.$attrs$[P]=v[I])),i&&$.$attrs$)for(const I of Object.keys($.$attrs$))v.hasAttribute(I)&&!["key","ref","style","class"].includes(I)&&($.$attrs$[I]=v[I]);$.$tag$=null,$.$flags$|=4,t.$vnode$=$,$.$elm$=M.$elm$=v.shadowRoot||v,Xp=v["s-sc"],LT=(x.$flags$&1)!==0,R4=v["s-cr"],O2=!1,Qp(M,$,i);{if($n.$flags$|=1,NT){cF($.$elm$);for(const I of ic){const P=I.$nodeToRelocate$;if(!P["s-ol"]){const L=Xo.createTextNode("");L["s-nr"]=P,jh(P.parentNode,P["s-ol"]=L,P)}}for(const I of ic){const P=I.$nodeToRelocate$,L=I.$slotRefNode$;if(L){const z=L.parentNode;let F=L.nextSibling;{let U=(n=P["s-ol"])==null?void 0:n.previousSibling;for(;U;){let W=(s=U["s-nr"])!=null?s:null;if(W&&W["s-sn"]===P["s-sn"]&&z===W.parentNode){for(W=W.nextSibling;W===P||W!=null&&W["s-sr"];)W=W==null?void 0:W.nextSibling;if(!W||!W["s-nr"]){F=W;break}}U=U.previousSibling}}(!F&&z!==P.parentNode||P.nextSibling!==F)&&P!==F&&(!P["s-hn"]&&P["s-ol"]&&(P["s-hn"]=P["s-ol"].parentNode.nodeName),jh(z,P,F),P.nodeType===1&&(P.hidden=(h=P["s-ih"])!=null?h:!1)),P&&typeof L["s-rf"]=="function"&&L["s-rf"](P)}else P.nodeType===1&&(i&&(P["s-ih"]=(f=P.hidden)!=null?f:!1),P.hidden=!0)}}O2&&lF($.$elm$),$n.$flags$&=-2,ic.length=0}if(sc.experimentalScopedSlotChanges&&x.$flags$&2)for(const I of $.$elm$.childNodes)I["s-hn"]!==t0&&!I["s-sh"]&&(i&&I["s-ih"]==null&&(I["s-ih"]=(m=I.hidden)!=null?m:!1),I.hidden=!0);R4=void 0},Aue=(t,e)=>{},FT=(t,e)=>(t.$flags$|=16,Aue(t,t.$ancestorComponent$),Que(()=>Oue(t,e))),Oue=(t,e)=>{const i=t.$hostElement$,n=qd("scheduleUpdate",t.$cmpMeta$.$tagName$),s=i;if(!s)throw new Error(`Can't render component <${i.tagName.toLowerCase()} /> with invalid Stencil runtime! Make sure this imported component is compiled with a \`externalRuntime: true\` flag. For more information, please refer to https://stenciljs.com/docs/custom-elements#externalruntime`);let h;return e?h=Rf(s,"componentWillLoad"):h=Rf(s,"componentWillUpdate"),h=i$(h,()=>Rf(s,"componentWillRender")),n(),i$(h,()=>Rue(t,s,e))},i$=(t,e)=>Pue(t)?t.then(e):e(),Pue=t=>t instanceof Promise||t&&t.then&&typeof t.then=="function",Rue=async(t,e,i)=>{const n=t.$hostElement$,s=qd("update",t.$cmpMeta$.$tagName$);n["s-rc"],i&&Eue(t);const h=qd("render",t.$cmpMeta$.$tagName$);Lue(t,e,n,i),h(),s(),Nue(t)},n$=null,Lue=(t,e,i,n)=>{try{n$=e,e=e.render&&e.render(),t.$flags$&=-17,t.$flags$|=2,(sc.hasRenderFn||sc.reflect)&&(sc.vdomRender||sc.reflect)&&(sc.hydrateServerSide||Iue(t,e,n))}catch(v){Um(v,t.$hostElement$)}return n$=null,null},Nue=t=>{const e=t.$cmpMeta$.$tagName$,i=t.$hostElement$,n=qd("postUpdate",e),s=i;t.$ancestorComponent$,Rf(s,"componentDidRender"),t.$flags$&64?(Rf(s,"componentDidUpdate"),n()):(t.$flags$|=64,Rf(s,"componentDidLoad"),n())},pu=t=>{{const e=$0(t),i=e.$hostElement$.isConnected;return i&&(e.$flags$&18)===2&&FT(e,!1),i}},Rf=(t,e,i)=>{if(t&&t[e])try{return t[e](i)}catch(n){Um(n)}},Due=(t,e)=>$0(t).$instanceValues$.get(e),zue=(t,e,i,n)=>{const s=$0(t),h=t,f=s.$instanceValues$.get(e),m=s.$flags$,v=h;i=_ue(i,n.$members$[e][0]);const x=Number.isNaN(f)&&Number.isNaN(i);if(i!==f&&!x){s.$instanceValues$.set(e,i);{if(n.$watchers$&&m&128){const $=n.$watchers$[e];$&&$.map(I=>{try{v[I](i,f,e)}catch(P){Um(P,h)}})}if((m&18)===2){if(v.componentShouldUpdate&&v.componentShouldUpdate(i,f,e)===!1)return;FT(s,!1)}}}},Fue=(t,e,i)=>{var n;const s=t.prototype;if(e.$members$){t.watchers&&(e.$watchers$=t.watchers);const h=Object.entries(e.$members$);h.map(([f,[m]])=>{(m&31||m&32)&&Object.defineProperty(s,f,{get(){return Due(this,f)},set(v){zue(this,f,v,e)},configurable:!0,enumerable:!0})});{const f=new Map;s.attributeChangedCallback=function(m,v,x){$n.jmp(()=>{var M;const $=f.get(m);if(this.hasOwnProperty($))x=this[$],delete this[$];else{if(s.hasOwnProperty($)&&typeof this[$]=="number"&&this[$]==x)return;if($==null){const I=$0(this),P=I==null?void 0:I.$flags$;if(P&&!(P&8)&&P&128&&x!==v){const z=this,F=(M=e.$watchers$)==null?void 0:M[m];F==null||F.forEach(U=>{z[U]!=null&&z[U].call(z,x,v,m)})}return}}this[$]=x===null&&typeof this[$]=="boolean"?!1:x})},t.observedAttributes=Array.from(new Set([...Object.keys((n=e.$watchers$)!=null?n:{}),...h.filter(([m,v])=>v[0]&15).map(([m,v])=>{var x;const M=v[1]||m;return f.set(M,m),v[0]&512&&((x=e.$attrsToReflect$)==null||x.push([m,M])),M})]))}}return t},jue=async(t,e,i,n)=>{let s;if(!(e.$flags$&32)){e.$flags$|=32,i.$lazyBundleId$;{s=t.constructor;const f=t.localName;customElements.whenDefined(f).then(()=>e.$flags$|=128)}if(s&&s.style){let f=s.style;typeof f!="string"&&(e.$modeName$=wue(t),e.$modeName$&&(f=f[e.$modeName$]));const m=iF(i,e.$modeName$);if(!R2.has(m)){const v=qd("registerStyles",i.$tagName$);Tue(m,f,!!(i.$flags$&1)),v()}}}e.$ancestorComponent$,FT(e,!0)},r$=t=>{},Gue=t=>{if(!($n.$flags$&1)){const e=$0(t),i=e.$cmpMeta$,n=qd("connectedCallback",i.$tagName$);e.$flags$&1?(dF(t,e,i.$listeners$),e!=null&&e.$lazyInstance$?r$(e.$lazyInstance$):e!=null&&e.$onReadyPromise$&&e.$onReadyPromise$.then(()=>r$(e.$lazyInstance$))):(e.$flags$|=1,i.$flags$&12&&Vue(t),i.$members$&&Object.entries(i.$members$).map(([s,[h]])=>{if(h&31&&t.hasOwnProperty(s)){const f=t[s];delete t[s],t[s]=f}}),jue(t,e,i)),n()}},Vue=t=>{const e=t["s-cr"]=Xo.createComment("");e["s-cn"]=!0,jh(t,e,t.firstChild)},Hue=async t=>{if(!($n.$flags$&1)){const e=$0(t);e.$rmListeners$&&(e.$rmListeners$.map(i=>i()),e.$rmListeners$=void 0)}},oi=(t,e)=>{const i={$flags$:e[0],$tagName$:e[1]};i.$members$=e[2],i.$listeners$=e[3],i.$watchers$=t.$watchers$,i.$attrsToReflect$=[];const n=t.prototype.connectedCallback,s=t.prototype.disconnectedCallback;return Object.assign(t.prototype,{__registerHost(){Wue(this,i)},connectedCallback(){Gue(this),n&&n.call(this)},disconnectedCallback(){Hue(this),s&&s.call(this)},__attachShadow(){this.attachShadow({mode:"open",delegatesFocus:!!(i.$flags$&16)})}}),t.is=i.$tagName$,Fue(t,i)},jT=(t,e)=>e,dF=(t,e,i,n)=>{i&&i.map(([s,h,f])=>{const m=Uue(t,s),v=Bue(e,f),x=que(s);$n.ael(m,h,v,x),(e.$rmListeners$=e.$rmListeners$||[]).push(()=>$n.rel(m,h,v,x))})},Bue=(t,e)=>i=>{var n;try{sc.lazyLoad||t.$hostElement$[e](i)}catch(s){Um(s)}},Uue=(t,e)=>e&4?Xo:e&8?qm:e&16?Xo.body:t,que=t=>Jue?{passive:(t&1)!==0,capture:(t&2)!==0}:(t&2)!==0,pF=new WeakMap,$0=t=>pF.get(t),Wue=(t,e)=>{const i={$flags$:0,$hostElement$:t,$cmpMeta$:e,$instanceValues$:new Map};return dF(t,i,e.$listeners$),pF.set(t,i)},s$=(t,e)=>e in t,Um=(t,e)=>(0,console.error)(t,e),R2=new Map,Zue=[],qm=typeof window<"u"?window:{},Xo=qm.document||{head:{}},ai=qm.HTMLElement||class{},$n={$flags$:0,$resourcesUrl$:"",jmp:t=>t(),raf:t=>requestAnimationFrame(t),ael:(t,e,i,n)=>t.addEventListener(e,i,n),rel:(t,e,i,n)=>t.removeEventListener(e,i,n),ce:(t,e)=>new CustomEvent(t,e)},Jue=(()=>{let t=!1;try{Xo.addEventListener("e",null,Object.defineProperty({},"passive",{get(){t=!0}}))}catch{}return t})(),Kue=t=>Promise.resolve(t),Yue=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),L4=!1,N4=[],fF=[],gF=(t,e)=>i=>{t.push(i),L4||(L4=!0,e&&$n.$flags$&4?Xue(D4):$n.raf(D4))},o$=t=>{for(let e=0;e<t.length;e++)try{t[e](performance.now())}catch(i){Um(i)}t.length=0},D4=()=>{o$(N4),o$(fF),(L4=N4.length>0)&&$n.raf(D4)},Xue=t=>Kue().then(t),z4=gF(N4,!1),Que=gF(fF,!0);/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */function a$(){const{classList:t}=document.body,e=window.matchMedia("(prefers-color-scheme: dark)").matches,i=()=>t.contains(Qz)||t.contains(Xz)&&e?"dark":"light",n=f=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:f}})),s=f=>{h!==f&&n(f),h=f};let h=i();n(h),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",f=>s(f.matches?"dark":"light")),new MutationObserver(()=>s(i())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}function ede(){typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document&&(document.readyState==="interactive"?a$():document.addEventListener("DOMContentLoaded",()=>a$(),{once:!0})),sue()}const tde=ede;tde();let mF;function ide(){try{PT(".")}catch{eF(Ks(Tt(mF)))}}function cl(t){var i;const e=[];for(const n of Object.keys(t))customElements.get(`calcite-${n}`)||e.push((i=t[n])==null?void 0:i.call(t));return e.length>0?Promise.all(e):null}mF="components/assets";const yF=Symbol("widget"),vF=Symbol("widget-test-data"),nde=[],rde={},L2=new WeakMap;function bF(t,e){let i=e.children;if(i!=null&&i.length)for(let s=0;s<i.length;++s)i[s]=bF(t,i[s]);else i=nde;const n=e.vnodeSelector;if(N2(n)){const s=e.properties||rde,h=s.key||n;return{vnodeSelector:"div",properties:{key:h,afterCreate:sde,afterUpdate:ode,afterRemoved:wF,parentWidget:t,widgetConstructor:n,widgetProperties:{...s,key:h,children:i}},children:void 0,text:void 0,domNode:null}}return e}function sde(t,e,i,{parentWidget:n,widgetConstructor:s,widgetProperties:h}){var m;const f=new s(h);f.container=t,L2.set(t,f),(m=f.afterCreate)==null||m.call(f,f,t),n.addHandles(ut(()=>wF(t))),queueMicrotask(()=>{f[vF].projector.renderNow()})}function ode(t,e,i,{widgetProperties:n}){var h;const s=L2.get(t);s&&(s.set(n),(h=s.afterUpdate)==null||h.call(s,s,t))}function wF(t){var i;const e=L2.get(t);e&&((i=e.afterRemoved)==null||i.call(e,e,t),e.destroy(),L2.delete(t))}function N2(t){return typeof t=="function"&&t[yF]}const l$=new Set;function ade(t){l$.add(t),t.finally(()=>l$.delete(t))}var _F;const lde="esri.widgets.Widget";let cde=0;function xF(t,e){const i=Object.prototype.hasOwnProperty;for(const n in e)i.call(e,n)&&i.call(t,n)&&(t[n]!=null&&e[n]!=null&&typeof t[n]=="object"&&typeof e[n]=="object"?xF(t[n],e[n]):t[n]=e[n]);return t}const hde=iue({postProcessProjectionOptions(t){const e=t.eventHandlerInterceptor,i=/capture$/i;t.eventHandlerInterceptor=(n,s,h,f)=>{const m=e==null?void 0:e(n,s,h,f),v=i.test(n);if(!((n=n.replace(i,"")).toLowerCase()in h)||v){const x=n[2].toLowerCase()+n.slice(3),M=P=>m==null?void 0:m.call(h,P);h.addEventListener(x,M,v);const $=()=>h.removeEventListener(x,M,v),I=f.afterRemoved;f.afterRemoved=P=>{I==null||I(P),$()}}return m}},handleInterceptedEvent(t,e,i,n){const{eventPhase:s,type:h}=n,f=s===Event.CAPTURING_PHASE;let m=`on${h}${f?"capture":""}`;const v=e.properties;(v&&m in v||(m=`on${h[0].toUpperCase()}${h.slice(1)}${f?"Capture":""}`,v&&m in v))&&(wL(),t.scheduleRender(),v[m].call(v.bind||i,n))}});let X_=!1,mn=class extends Gw(ln.EventedAccessor){constructor(e,i){super(e,i),this._attached=!1,this._projector=hde,this._readyForTrueRender=!1,this.key=this,this.autoRenderingEnabled=!0,this._loadLocale=fw(async()=>{var v;if((v=this._messageBundleProps)!=null&&v.length){const x=await Promise.allSettled(this._messageBundleProps.map(async({bundlePath:M,propertyName:$})=>{if(this.destroyed)return;let I=await VS(M);this.uiStrings&&Object.keys(this.uiStrings)&&(I=xF(_e(I),this.uiStrings)),this[$]=I}));if(this.destroyed)return;for(const M of x)M.status==="rejected"&&Ce.getLogger(this).error("widget-intl:locale-error",this.declaredClass,M.reason)}await this.loadLocale()}),ide();const n="esri-widget-uid-"+OT(),s=this.render.bind(this);this._trackingTarget=new gw(()=>{this.autoRenderingEnabled&&this.scheduleRender()});const h=()=>({vnodeSelector:"div",properties:{key:`${n}-hidden`,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0}),f=()=>{var $,I;if(!this._readyForTrueRender||this.destroyed)return null;const v=s()??h(),x=v.properties??(v.properties={});if(x.key??(x.key=n),N2(v.vnodeSelector)){if(!this.visible)return h()}else this.visible?x.styles||(x.styles={}):(x.class="",x.styles={display:"none"}),($=x.styles).display??($.display="");let M=0;return(I=v.children)==null||I.forEach(P=>{var L;N2(P.vnodeSelector)||(P.properties??(P.properties={}),(L=P.properties).key??(L.key=`${this.id}--${M++}`))}),bF(this,v)};this.render=()=>{if(X_)return f();let v=Nee(this)??null;if(v)return v;this._trackingTarget.clear(),X_=!0;try{v=mc(this._trackingTarget,f)}catch(x){throw Ce.getLogger(this).error(x),x}finally{X_=!1}return v&&Dee(this,v),v};const m=this.beforeFirstRender();m?this._resourcesFetch=m.then(()=>{this._readyForTrueRender=!0,this._postInitialize()}):(this._resourcesFetch=Promise.resolve().then(()=>{this._postInitialize()}),this._readyForTrueRender=!0),this.addResolvingPromise(this._resourcesFetch),ade(this._resourcesFetch)}normalizeCtorArgs(e,i){const n={...e};return i&&(n.container=i),n}postInitialize(){}beforeFirstRender(){var i;const e=this.loadDependencies();return(i=this._messageBundleProps)!=null&&i.length||e?Promise.all([e,this._loadLocale()]).then(()=>{}).catch(_M):null}loadDependencies(){return null}loadLocale(){return null}destroy(){this.destroyed||(yt(this._trackingTarget),yt(this.viewModel),this._detach(this.container),this._set("container",null),this._emitter.clear(),this.render=()=>null,this._projector=null,b_(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return qS(e)}get domNode(){return this.container}set domNode(e){this.container=e}get icon(){return null}set icon(e){this._overrideIfSome("icon",e)}get id(){var e;return this._get("id")||((e=this.container)==null?void 0:e.id)||Date.now().toString(16)+"-widget-"+cde++}set id(e){e&&this._set("id",e)}get label(){return this.declaredClass.split(".").pop()}set label(e){this._overrideIfSome("label",e)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(e){this._set("visible",e)}get[(_F=yF,vF)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(b_(this),this._projector.scheduleRender())}own(e){QI(Ce.getLogger(this),"`Widget.own()` is deprecated in favor of 'Widget.addHandles()'",{replacement:"Widget.addHandles()",version:"4.28"}),this.addHandles(e)}classes(...e){return _L.apply(this,e)}renderNow(){b_(this),this._projector.renderNow()}_postInitialize(){var i;if(this.destroyed)return;this.scheduleRender(),(i=this._delegatedEventNames)!=null&&i.length&&this.addHandles(Ee(()=>this.viewModel,(n,s)=>{s&&this.removeHandles("delegated-events"),n&&dw(n)&&this.addHandles(this._delegatedEventNames.map(h=>vm(n,h,f=>{this.emit(h,f)})),"delegated-events")},xi)),this.postInitialize();const e=async()=>{await this._loadLocale().catch(_M),this.scheduleRender()};this.addHandles([$S(e),Ee(()=>this.uiStrings,e),nr(()=>this.container,n=>{this.destroyed||this._attach(n)},{initial:!0,once:!0})])}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){var i;this._attached&&(this._projector.detach(this.render),this._attached=!1),(i=e==null?void 0:e.parentNode)==null||i.removeChild(e)}};mn[_F]=!0,_([T()],mn.prototype,"_readyForTrueRender",void 0),_([T({value:null})],mn.prototype,"container",null),_([qi("container")],mn.prototype,"castContainer",null),_([T()],mn.prototype,"icon",null),_([T()],mn.prototype,"id",null),_([T()],mn.prototype,"label",null),_([T()],mn.prototype,"renderable",null),_([T()],mn.prototype,"uiStrings",void 0),_([T()],mn.prototype,"viewModel",void 0),_([T({value:!0})],mn.prototype,"visible",null),_([T()],mn.prototype,"key",void 0),_([T()],mn.prototype,"children",void 0),_([T()],mn.prototype,"afterCreate",void 0),_([T()],mn.prototype,"afterUpdate",void 0),_([T()],mn.prototype,"afterRemoved",void 0),mn=_([Y(lde)],mn);const Cs=mn,ude=new Map;function dde(t){return ude.get(t)}function c$(t,e){return t&&"copyright"in t&&(!e||typeof t.originOf=="function"&&t.originOf("copyright")==="user")}function pde(t,e){return t.length!==e.length||t.some((i,n)=>i.text!==e[n].text)}function i1(t,e,i){!i||!e||t.find(n=>n.layerView===e&&n.text===i)||t.push({text:i,layerView:e})}function fde(t){return t.type==="bing-maps"}const _l=[];let ef=class extends Re{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.removeHandles("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new Pe,this.view=null,this._allLayerViewsChange=i=>{var s;this.removeHandles("suspension"),this.removeHandles("visible-geometry-changed");const n=(s=this.view)==null?void 0:s.allLayerViews;n&&(this.addHandles(n.map(h=>Ee(()=>{var f;return[h.suspended,(f=h.layer)==null?void 0:f.attributionVisible]},()=>this._updateAttributionItems())).toArray(),"suspension"),n.forEach(h=>{h.declaredClass==="esri.views.3d.layers.Tiles3DLayerView3D"&&this.addHandles(h.on("visible-geometry-changed",()=>this._updateAttributionItems()),"visible-geometry-changed")})),i!=null&&i.removed&&i.removed.forEach(h=>{this._pendingAttributions.delete(h),this._fetchedAttributionData.delete(h)}),this._updateAttributionItems()},this.addHandles([Es(()=>{var i;return(i=this.view)==null?void 0:i.allLayerViews},"change",i=>this._allLayerViewsChange(i),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),nr(()=>{var i;return((i=this.view)==null?void 0:i.stationary)===!0},()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){var e;return(e=this.view)!=null&&e.ready?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const e=this.view,i=e==null?void 0:e.allLayerViews;if(_l.length=0,!e||!i)return void this._clear();i.forEach(s=>{var m,v;if(s.suspended||!((m=s.layer)!=null&&m.attributionVisible))return;const h=s.layer;if(c$(h,"user"))return void i1(_l,s,h.copyright);if(h.hasAttributionData){if(this._fetchedAttributionData.has(s)){const x=this._fetchedAttributionData.get(s);return void(x?i1(_l,s,this._getDynamicAttribution(x,e,h)):c$(h)&&i1(_l,s,h.copyright))}return void this._fetchAttributionData(s)}const f="portalItem"in h?(v=h.portalItem)==null?void 0:v.accessInformation:void 0;i1(_l,s,f||h.copyright)});const n=i.find(s=>{var h;return((h=s.layer)==null?void 0:h.type)==="integrated-mesh-3dtiles"});if(this.view&&n){const s=dde(this.view);if(s){const h=s.getAttributionText();for(let f=0;f<h.length;++f)i1(_l,n,h[f])}}pde(this.items,_l)&&(this.items.removeAll(),this.items.addMany(_l)),_l.length=0,this.notifyChange("state")}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const i=await CP(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const n=i.ok?this._createContributionIndex(i.value,fde(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,n)}this._updateAttributionItems()}_createContributionIndex(e,i){const n=e.contributors,s={};if(!n)return s;for(let h=0;h<n.length;h++){const f=n[h],m=f.coverageAreas;if(!m)return;for(const v of m){const x=v.bbox,M=v.zoomMin-(i&&v.zoomMin?1:0),$=v.zoomMax-(i&&v.zoomMax?1:0),I=new Lt({xmin:x[1],ymin:x[0],xmax:x[3],ymax:x[2],spatialReference:tt.WGS84}),P={extent:hc(I),attribution:f.attribution||"",score:v.score!=null?v.score:100,id:h};for(let L=M;L<=$;L++)s[L]??(s[L]=[]),s[L].push(P)}}return s.maxKey=Math.max.apply(null,Object.keys(s)),s}_getDynamicAttribution(e,i,n){var M;const{extent:s,scale:h}=i;let f=((M=n.tileInfo)==null?void 0:M.scaleToZoom(h))??0;if(f=Math.min(e.maxKey??0,Math.round(f)),!s||f==null||f<=-1)return"";const m=e[f],v=Sw(s.center.clone().normalize(),i.spatialReference),x=new Set;return m?m.filter($=>{const I=$.id,P=!x.has(I)&&v&&$.extent&&Mm($.extent,v);return P&&x.add(I),P}).sort(($,I)=>I.score-$.score||$.objectId-I.objectId).map($=>$.attribution).join(", "):""}};_([T({readOnly:!0,type:Pe})],ef.prototype,"items",void 0),_([T({readOnly:!0})],ef.prototype,"state",null),_([T()],ef.prototype,"view",void 0),ef=_([Y("esri.widgets.Attribution.AttributionViewModel")],ef);const SF=ef,Ye={anchor:"esri-widget__anchor",anchorDisabled:"esri-widget__anchor--disabled",button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",disabled:"esri-disabled",empty:"esri-widget__content--empty",emptyIllustration:"esri-widget__content-illustration--empty",heading:"esri-widget__heading",hidden:"esri-hidden",input:"esri-input",interactive:"esri-interactive",loader:"esri-widget__loader",loaderAnimation:"esri-widget__loader-animation",loaderText:"esri-widget__loader-text",menu:"esri-menu",menuHeader:"esri-menu__header",menuItem:"esri-menu__list-item",menuItemActive:"esri-menu__list-item--active",menuItemFocus:"esri-menu__list-item--focus",menuList:"esri-menu__list",panel:"esri-widget--panel",panelHeightOnly:"esri-widget--panel-height-only",primaryTick:"primary-tick",primaryTickAmPm:"primary-tick__ampm",primaryTickLabel:"primary-tick__label",rotating:"esri-rotating",secondaryTick:"secondary-tick",select:"esri-select",table:"esri-widget__table",widget:"esri-widget",widgetButton:"esri-widget--button",widgetButtonActive:"esri-widget--button-active",widgetDisabled:"esri-widget--disabled"};function D2(){return function(t,e){if(!t[e])throw new TypeError(`Cannot auto bind undefined function '${String(e)}'`);return{value:mde(t[e])}}}function gde(t){const e=t==null?void 0:t.type;return t instanceof KeyboardEvent||e==="keyup"||e==="keydown"||e==="keypress"}function mde(t){return function(e,...i){gde(e)?SL(e.key)&&(e.preventDefault(),e.stopPropagation(),e.target.click()):t.call(this,e,...i)}}function Sr(t){return(e,i)=>{e.hasOwnProperty("_messageBundleProps")||(e._messageBundleProps=e._messageBundleProps?e._messageBundleProps.slice():[]),e._messageBundleProps.push({bundlePath:t,propertyName:i})}}var yde=function(t){return{vnodeSelector:"",properties:void 0,children:void 0,text:t.toString(),domNode:null}},TF=function(t,e){for(var i=0,n=t.length;i<n;i++){var s=t[i];Array.isArray(s)?TF(s,e):s!=null&&s!==!1&&(s.hasOwnProperty("vnodeSelector")||(s=yde(s)),e.push(s))}},vde=function(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];if(i.length===1&&typeof i[0]=="string")return{vnodeSelector:t,properties:e||void 0,children:void 0,text:i[0],domNode:null};var s=[];return TF(i,s),{vnodeSelector:t,properties:e||void 0,children:s,text:void 0,domNode:null}};function ae(t,e,...i){return typeof t!="function"||N2(t)?vde(t,e,...i):t(e,...i)}function bde(...t){return t}const Ep="esri-attribution",kp={base:Ep,poweredBy:`${Ep}__powered-by`,sources:`${Ep}__sources`,open:`${Ep}--open`,sourcesOpen:`${Ep}__sources--open`,link:`${Ep}__link`};let dr=class extends Cs{constructor(e,i){super(e,i),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(n=>n.forEach(({target:s})=>this._checkSourceTextOverflow(s))),this.itemDelimiter=" | ",this.messages=null,this.viewModel=new SF}initialize(){this.addHandles(Es(()=>{var e;return(e=this.viewModel)==null?void 0:e.items},"change",()=>this.scheduleRender()))}destroy(){var e;(e=this._resizeObserver)==null||e.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((e,i)=>(e.includes(i.text)||e.push(i.text),e),[]).join(this.itemDelimiter)}get icon(){return"description"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e={[kp.open]:this._isOpen};return ae("div",{bind:this,class:this.classes(kp.base,Ye.widget,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return ae("div",{class:kp.poweredBy},"Powered by"," ",ae("a",{class:kp.link,href:"https://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}_renderSourcesNode(){const e=this._isOpen,i=this._isInteractive,n=i?0:void 0,{attributionText:s}=this,h={[kp.sourcesOpen]:e,[Ye.interactive]:i};return ae("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(kp.sources,h),innerHTML:s,tabIndex:n})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._resizeObserver.observe(e)}_checkSourceTextOverflow(e){let i=!1;const{clientHeight:n,clientWidth:s,scrollWidth:h}=e,f=h>s,m=this._attributionTextOverflowed!==f;if(this._attributionTextOverflowed=f,m&&(i=!0),this._isOpen){const v=n<this._prevSourceNodeHeight;this._prevSourceNodeHeight=n,v&&(this._isOpen=!1,i=!0)}i&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};_([T()],dr.prototype,"_isOpen",void 0),_([T()],dr.prototype,"_isInteractive",null),_([T()],dr.prototype,"_attributionTextOverflowed",void 0),_([T()],dr.prototype,"_prevSourceNodeHeight",void 0),_([T({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],dr.prototype,"attributionText",null),_([T()],dr.prototype,"icon",null),_([T()],dr.prototype,"itemDelimiter",void 0),_([T()],dr.prototype,"label",null),_([T(),Sr("esri/widgets/Attribution/t9n/Attribution")],dr.prototype,"messages",void 0),_([T()],dr.prototype,"view",null),_([T({type:SF})],dr.prototype,"viewModel",void 0),_([D2()],dr.prototype,"_toggleState",null),dr=_([Y("esri.widgets.Attribution")],dr);const wde=dr;function _de(t){var e,i;return((e=t==null?void 0:t.spatialReference)==null?void 0:e.isWebMercator)||((i=t==null?void 0:t.spatialReference)==null?void 0:i.isGeographic)||!1}const MF=t=>{let e=class extends t{constructor(...i){super(...i),this.goToOverride=null,this.view=null}callGoTo(i){const{view:n}=this;return nA(n),this.goToOverride?this.goToOverride(n,i):n.goTo(i.target,i.options)}};return _([T()],e.prototype,"goToOverride",void 0),_([T()],e.prototype,"view",void 0),e=_([Y("esri.widgets.support.GoTo")],e),e};let Xu=class extends MF(Re){constructor(e){super(e),this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this.addHandles(Ee(()=>this.view,this._updateRotationWatcher,Pt))}destroy(){this.view=null}get canShowNorth(){return _de(this.view)}get state(){var e;return!((e=this.view)!=null&&e.ready)||this.view.type==="2d"&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}reset(){var e,i;(e=this.view)!=null&&e.ready&&(((i=this.view)==null?void 0:i.type)==="2d"?this.callGoTo({target:{rotation:0},options:{animationMode:"always",duration:pe("mapview-essential-goto-duration")}}):this.callGoTo({target:{heading:0}}))}_updateForRotation(e){e!=null&&this._set("orientation",{z:e})}_updateForCamera(e){if(!e)return;const i=-e.heading;this._set("orientation",{x:0,y:0,z:i})}_updateRotationWatcher(e){this.removeAllHandles(),e&&this.addHandles(e.type==="2d"?Ee(()=>e==null?void 0:e.rotation,this._updateForRotation,Pt):Ee(()=>e==null?void 0:e.camera,this._updateForCamera,Pt))}};_([T({readOnly:!0})],Xu.prototype,"canShowNorth",null),_([T({readOnly:!0})],Xu.prototype,"orientation",void 0),_([T({readOnly:!0})],Xu.prototype,"state",null),_([T()],Xu.prototype,"view",void 0),Xu=_([Y("esri.widgets.Compass.CompassViewModel")],Xu);const EF=Xu,h$="esri-compass",u$={base:h$,iconContainer:`${h$}__icon-container`};let Dl=class extends Cs{constructor(e,i){super(e,i),this.messages=null,this.viewModel=new EF,this._reset=()=>{this.viewModel.reset()},this._toRotationTransform=n=>({transform:`rotateZ(${n.z}deg)`})}loadDependencies(){return cl({button:()=>be(()=>import("./calcite-button-BQ85dayr.js"),[],import.meta.url),icon:()=>be(()=>import("./calcite-icon-BSz57Dah.js"),[],import.meta.url)})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get icon(){return this.viewModel.state==="rotation"?"arrow-up":"compass-needle"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:i}=this.viewModel,{messages:n}=this;return ae("div",{class:this.classes(u$.base,Ye.widget)},ae("calcite-button",{class:Ye.widgetButton,disabled:i==="disabled",kind:"neutral",label:n.reset,onclick:this._reset,round:!0,scale:"s",title:n.reset},ae("div",{"aria-hidden":"true",class:u$.iconContainer,title:n.reset},ae("calcite-icon",{icon:this.icon,styles:this._toRotationTransform(e)}))))}};_([T()],Dl.prototype,"goToOverride",null),_([T()],Dl.prototype,"icon",null),_([T()],Dl.prototype,"label",null),_([T(),Sr("esri/widgets/Compass/t9n/Compass")],Dl.prototype,"messages",void 0),_([T()],Dl.prototype,"view",null),_([T({type:EF})],Dl.prototype,"viewModel",void 0),Dl=_([Y("esri.widgets.Compass")],Dl);const xde=Dl,d$="esri-navigation-toggle",p$={base:d$,isLayoutHorizontal:`${d$}--horizontal`};let tf=class extends Re{constructor(e){super(e),this._navigationMode="pan",this.view=null}initialize(){this.addHandles(nr(()=>{var e;return(e=this.view)==null?void 0:e.inputManager},()=>this._setNavigationMode()))}destroy(){this.view=null}get state(){var e,i;return(e=this.view)!=null&&e.ready&&((i=this.view)==null?void 0:i.type)==="3d"?"ready":"disabled"}get navigationMode(){return this._navigationMode}set navigationMode(e){this._navigationMode=e,this._setNavigationMode()}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate")}_setNavigationMode(){var i;const e=(i=this.view)==null?void 0:i.inputManager;e&&(e.primaryDragAction=this._navigationMode==="pan"?"pan":"rotate")}};_([T({readOnly:!0})],tf.prototype,"state",null),_([T()],tf.prototype,"_navigationMode",void 0),_([T()],tf.prototype,"view",void 0),tf=_([Y("esri.widgets.NavigationToggle.NavigationToggleViewModel")],tf);const kF=tf;let zl=class extends Cs{constructor(e,i){super(e,i),this.messages=null,this.viewModel=new kF,this.toggle=()=>this.viewModel.toggle(),this._panButton=null,this._rotateButton=null,this._toggle=()=>{var s;const n=((s=this.viewModel)==null?void 0:s.navigationMode)==="pan"?this._rotateButton:this._panButton;n==null||n.setFocus(),this.toggle()}}loadDependencies(){return cl({button:()=>be(()=>import("./calcite-button-BQ85dayr.js"),[],import.meta.url)})}get icon(){return"move"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){var s,h;const e=((s=this.viewModel)==null?void 0:s.state)==="disabled",i=((h=this.viewModel)==null?void 0:h.navigationMode)==="pan",n=this.messages.toggle;return ae("div",{class:this.classes(p$.base,Ye.widget,{[p$.isLayoutHorizontal]:this.layout==="horizontal"})},ae("calcite-button",{afterCreate:f=>{this._panButton=f},appearance:i?"outline-fill":"solid",class:Ye.widgetButton,disabled:e,iconStart:"move",kind:"neutral",label:n,onclick:this._toggle,tabIndex:i?void 0:-1,title:n}),ae("calcite-button",{afterCreate:f=>{this._rotateButton=f},appearance:i?"solid":"outline-fill",class:Ye.widgetButton,disabled:e,iconStart:"rotate",kind:"neutral",label:n,onclick:this._toggle,tabIndex:i?-1:void 0,title:n}))}};_([T()],zl.prototype,"icon",null),_([T()],zl.prototype,"label",null),_([T({value:"vertical"})],zl.prototype,"layout",null),_([T(),Sr("esri/widgets/NavigationToggle/t9n/NavigationToggle")],zl.prototype,"messages",void 0),_([T()],zl.prototype,"view",null),_([T({type:kF})],zl.prototype,"viewModel",void 0),zl=_([Y("esri.widgets.NavigationToggle")],zl);const Sde=zl;let Qu=class extends Re{get canZoomIn(){var n,s,h;if(!((n=this.view)==null?void 0:n.ready))return!1;const i=(h=(s=this.view)==null?void 0:s.constraints)==null?void 0:h.effectiveMaxScale;return i===0||this._scale>i}get canZoomOut(){var s;const{view:e}=this;if(!(e==null?void 0:e.ready))return!1;const n=(s=e.constraints)==null?void 0:s.effectiveMinScale;return n===0||this._scale<n}get _scale(){var i,n,s;const e=(n=(i=this.view)==null?void 0:i.animation)==null?void 0:n.target;return(e&&"then"in e||e==null?void 0:e.scale)??((s=this.view)==null?void 0:s.scale)??0}};_([T({readOnly:!0})],Qu.prototype,"canZoomIn",null),_([T({readOnly:!0})],Qu.prototype,"canZoomOut",null),_([T()],Qu.prototype,"view",void 0),_([T()],Qu.prototype,"_scale",null),Qu=_([Y("esri.widgets.Zoom.ZoomConditions2D")],Qu);const Tde=Qu;let nf=class extends Re{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};_([T({readOnly:!0})],nf.prototype,"canZoomIn",null),_([T({readOnly:!0})],nf.prototype,"canZoomOut",null),_([T()],nf.prototype,"view",void 0),nf=_([Y("esri.widgets.Zoom.ZoomConditions3D")],nf);const Mde=nf;let ph=class extends Re{constructor(e){super(e)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){var e;return this._zoomConditions!=null&&((e=this._zoomConditions)==null?void 0:e.canZoomOut)}get state(){var e;return(e=this.view)!=null&&e.ready?"ready":"disabled"}set view(e){e?e.type==="2d"?this._zoomConditions=new Tde({view:e}):e.type==="3d"&&(this._zoomConditions=new Mde({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){if(!this.canZoomIn)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomIn():ro(e.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomOut():ro(e.goTo({zoomFactor:.5}))}};_([T()],ph.prototype,"_zoomConditions",void 0),_([T()],ph.prototype,"canZoomIn",null),_([T()],ph.prototype,"canZoomOut",null),_([T({readOnly:!0})],ph.prototype,"state",null),_([T()],ph.prototype,"view",null),ph=_([Y("esri.widgets.Zoom.ZoomViewModel")],ph);const $F=ph,f$={base:"esri-zoom",horizontalLayout:"esri-zoom--horizontal"};let Fl=class extends Cs{constructor(e,i){super(e,i),this.messages=null,this.viewModel=new $F,this.zoomIn=()=>this.viewModel.zoomIn(),this.zoomOut=()=>this.viewModel.zoomOut()}loadDependencies(){return cl({button:()=>be(()=>import("./calcite-button-BQ85dayr.js"),[],import.meta.url)})}get icon(){return"magnifying-glass-plus"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}set view(e){this.viewModel.view=e}get view(){return this.viewModel.view}render(){const e={[f$.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:i,canZoomOut:n}=this.viewModel,{zoomIn:s,zoomOut:h}=this.messages;return ae("div",{class:this.classes(f$.base,Ye.widget,e)},ae("calcite-button",{class:Ye.widgetButton,disabled:!i,iconStart:"plus",kind:"neutral",label:s,onclick:this.zoomIn,title:s}),ae("calcite-button",{class:Ye.widgetButton,disabled:!n,iconStart:"minus",kind:"neutral",label:h,onclick:this.zoomOut,title:h}))}};_([T()],Fl.prototype,"icon",null),_([T()],Fl.prototype,"label",null),_([T({value:"vertical"})],Fl.prototype,"layout",null),_([T(),Sr("esri/widgets/Zoom/t9n/Zoom")],Fl.prototype,"messages",void 0),_([T()],Fl.prototype,"view",null),_([T({type:$F})],Fl.prototype,"viewModel",void 0),Fl=_([Y("esri.widgets.Zoom")],Fl);const Ede=Fl;function kde(t){return(t==null?void 0:t.view)!==void 0}let mb=class extends Jhe{constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=i=>{this.components.forEach(n=>{const s=this._find(n),h=s==null?void 0:s.widget;kde(h)&&(h.view=i)})},this._componentsWatcher=(i,n)=>{this._removeComponents(n),this._addComponents(i),this._adjustPadding(i)}}initialize(){this.addHandles([Ee(()=>this.components,this._componentsWatcher,Pt),Ee(()=>this.view,this._updateViewAwareWidgets,Pt)])}_add(e,i,n,s,h){let f=e;if(typeof e=="string"&&this._defaultPositionLookup[e]){if(this._find(e))return;f=this._createComponent(e)}super._add(f,i,n,s,h)}_removeComponents(e){e.forEach(i=>{const n=this._find(i);n&&(this.remove(n),n.destroy())})}_adjustPadding(e){if(!e.includes("attribution")&&!this._isOverridden("padding")){const{top:i}=this.padding;this.padding=i}}_addComponents(e){this.constructed&&e.forEach(i=>this.add(this._createComponent(i),this._defaultPositionLookup[i]))}_createComponent(e){const i=this._createWidget(e);return new gb({id:e,node:i})}_createWidget(e){const i=this.view;switch(e){case"attribution":return new wde({view:i});case"compass":return new xde({view:i});case"navigation-toggle":return new Sde({view:i});case"zoom":return new Ede({view:i})}}};_([T()],mb.prototype,"components",void 0),mb=_([Y("esri.views.ui.DefaultUI")],mb);const CF=mb;let yb=class extends CF{constructor(e){super(e),this.components=["attribution","zoom"]}};_([T()],yb.prototype,"components",void 0),yb=_([Y("esri.views.ui.2d.DefaultUI2D")],yb);const IF=yb;function F4(t){return t!=null&&typeof t=="object"&&"declaredClass"in t&&t.declaredClass==="esri.WebMap"}var j4;let vb=j4=class extends Fe{constructor(t){super(t),this.color=new gt([0,0,0,1])}clone(){return new j4(_e({color:this.color}))}};_([T({type:gt,json:{write:!0}})],vb.prototype,"color",void 0),vb=j4=_([Y("esri.webmap.background.ColorBackground")],vb);const $de=vb;let AF,OF,PF,RF,LF,NF;async function Cde(){const[,{GraphicsView2D:t,GraphicContainer:e,LabelManager:i,MapViewNavigation:n,MagnifierView2D:s,Stage:h}]=await Promise.all([be(()=>import("./webglDeps-5GIKjoOS.js"),__vite__mapDeps([198,75,73,43,74,199,200,201]),import.meta.url),be(()=>import("./mapViewDeps-B-dDO8Py.js"),__vite__mapDeps([202,108,83,81,82,13,84,72,85,69,86,76,87,31,146,2,203,118,90,43,77,78,37,73,74,75,71,44,79,91,92,93,204,205,206,201,207,200,99,128,127,15,12,16,126,198,199,208,96,209,70,80,28,26,25,21,19,9,210,211,212,120,213,214,215,216,57,217,94,218,89,219,220,221,222,223,224,225]),import.meta.url)]);OF=t,PF=e,RF=i,LF=n,NF=s,AF=h}let Xe=class extends HQ(yte(rte(Aoe))){constructor(e){super(e),this._magnifierView=null,this.stage=null,this._resolveWhenReady=[],this.rootLayerViews=new qg({getCollections:()=>{var i,n;return[(i=this.basemapView)==null?void 0:i.baseLayerViews,this.layerViews,(n=this.basemapView)==null?void 0:n.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.goToManager=new pb({view:this}),this.graphicsView=null,this.stateManager=new ur({constraints:new Rz({view:this})}),this.stationaryManager=new Q1,this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this.frameTask=new dce(this),this.floors=new Pe,this.highlightOptions=new Bz,this.inputManager=new ohe({view:this}),this.map=null,this.spatialReferenceLocked=!1,this.timeline=new Jz,this.type="2d",this.ui=new IF,this.test={takeScreenshot:async i=>Ihe(this._getScreenshotView(i),i)},this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([Ee(()=>this.viewpoint,()=>this.stationaryManager.flip(),Ya),this.on("resize",i=>this.stateManager.resize(i.width,i.height))]),nQ()}destroy(){this.layerViewManager.clear(),this._set("preconditionsReady",!1),this.frameTask=yt(this.frameTask),this.goToManager.destroy(),this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new phe(this.featuresTilingScheme)}get constraintsInfo(){var n,s;const e=(n=this.defaultsFromMap)==null?void 0:n.tileInfo,i=this.spatialReference;return{lods:(s=e==null?void 0:e.spatialReference)!=null&&s.equals(i)?e.lods:null,spatialReference:i}}get state(){return this.stateManager.state}get initialExtentRequired(){var m;if(!this.stateManager)return!1;const{scale:e,constraints:i,center:n,viewpoint:s,extent:h}=this;let f=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&((m=this.map.initialViewProperties)!=null&&m.viewpoint))&&!h&&(i!=null&&i.effectiveLODs||(f=-1),(!n||e===0&&f===-1)&&((s==null?void 0:s.targetGeometry)==null||s.targetGeometry.type!=="extent"&&!s.scale))}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const i=e.targetGeometry,n=this.spatialReference;return KR(i.spatialReference,n)}set animation(e){const i=this._get("animation");if(e===i)return;if(i&&i.stop(),e!==this.animationManager.animation&&this.animationManager.stop(),!e||e.isFulfilled())return this._set("animation",null),void(this.frameTask.animationInProgress=!1);this._set("animation",e),this.frameTask.animationInProgress=!0;const n=()=>{var s;this.destroyed||(e===this._get("animation")&&(this._set("animation",null),(s=this.frameTask)==null||s.requestFrame()),this.frameTask.animationInProgress=!1)};e.when(n,n)}get background(){return F4(this.map)?this.map.initialViewProperties.background:null}set background(e){this._override("background",e)}get center(){var e;return((e=this.stateManager)==null?void 0:e.center)??null}set center(e){this.stateManager.center=e}get constraints(){var e;return(e=this.stateManager)==null?void 0:e.constraints}set constraints(e){e.view=this;const i=this.stateManager.constraints;this.stateManager.constraints=e,i==null||i.destroy()}get extent(){var e;return((e=this.stateManager)==null?void 0:e.extent)??null}set extent(e){this.stateManager.extent=e}get padding(){var e;return(e=this.stateManager)==null?void 0:e.padding}set padding(e){this.stateManager&&(this.stateManager.padding=e)}get rendering(){var e;return((e=this.stage)==null?void 0:e.renderRequested)??!1}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(e){this.stateManager.resizeAlign=e}get resolution(){return this.stateManager.resolution??0}get rotation(){return this.stateManager.rotation??0}set rotation(e){const{rotationEnabled:i}=this.constraints;this.constraints.rotationEnabled=!0,this.stateManager.rotation=e,this.constraints.rotationEnabled=i}get scale(){var e;return((e=this.stateManager)==null?void 0:e.scale)??0}set scale(e){this.stateManager&&(this.stateManager.scale=e)}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}get tileInfo(){var e;return(e=this.featuresTilingScheme)==null?void 0:e.tileInfo}get updating(){var n,s,h,f;const e=!(!this.magnifier.visible||this.magnifier.position===null||!((n=this._magnifierView)!=null&&n.updatingHandles.updating)),i=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(m=>!m.destroyed&&!("layerViews"in m)&&m.updating===!0)||e);if(pe("esri-2d-log-updating")){const m=this.allLayerViews.reduce((v,x)=>({...v,[`${x.layer.id}(${x.layer.type})`]:!x.destroyed&&!("layerViews"in x)&&x.updating}),{});console.log(`Updating MapView: ${i}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${(s=this.layerViewManager)==null?void 0:s.updating}
-> labelManager.updating: ${(h=this.labelManager)==null?void 0:h.updating}
-> graphicsView.updating: ${(f=this.graphicsView)==null?void 0:f.updating}
-> allLayerViews: ${JSON.stringify(m)}
-> updatingMagnifier: ${e}
`)}return i}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(e){this.stateManager.viewpoint=e,this.frameTask.requestFrame()}get zoom(){return this.stateManager.zoom??-1}set zoom(e){this.stateManager.zoom=e}get navigating(){var e;return((e=this.mapViewNavigation)==null?void 0:e.interacting)??!1}goTo(e,i){return this.goToManager.goTo(e,i)}async hitTest(e,i){return mhe(this,e,i)}async takeScreenshot(e){return Che(this._getScreenshotView(e),e)}toMap(e){if(!this.ready)return null;const i=MD(e)?TD(this,e):e;return this.stateManager.toMap(i)}toScreen(e,i){return this.stateManager.toScreen(e,i)}on(e,i,n,s){return this.inputManager&&this.viewEvents.on(e,i,n,s)||super.on(e,i)}hasEventListener(e){return super.hasEventListener(e)||this.viewEvents.hasHandler(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var e,i,n;return this.map&&"initialViewProperties"in this.map&&((i=(e=this.map)==null?void 0:e.initialViewProperties)==null?void 0:i.spatialReference)||((n=this.defaultsFromMap)==null?void 0:n.spatialReference)||null}getDefaultTimeZone(){return F4(this.map)?this.map.initialViewProperties.timeZone:null}hasLayerViewModule(e){return Tk.hasLayerViewModule(e)}importLayerView(e){return Tk.importLayerView(e)}pixelSizeAt(){return this.ready?this.resolution:(Ce.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}async popupHitTest(e){var x;const i=this.toMap(e),n=await this.hitTest(e),s=this.allLayerViews.toArray().reverse(),h=new globalThis.Map(s.map(M=>[M.layer.uid,M])),f=[];let m=0,v=0;for(;m<n.results.length||v<s.length;){const M=n.results.at(m);if(M&&M.type!=="graphic"){++m;continue}const $=h.get((x=(M==null?void 0:M.layer)??(M==null?void 0:M.graphic.layer))==null?void 0:x.uid);if((!M||$)&&v<s.length&&s.at(v)!==$){const I=s.at(v);"fetchPopupFeaturesAtLocation"in I&&f.push({mapPoint:i,layerView:I}),++v}else M&&(f.push({graphic:M.graphic,layerView:$}),++m)}return{hits:f,location:i}}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}async validate(){let e=Fhe(this.type);if(pe("safari")&&pe("safari")<9&&(e=new fe("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:pe("safari")})),e!=null)throw Ce.getLogger(this).warn("#validate()",e.message),e}loadAsyncDependencies(){return Cde()}_getDefaultViewpoint(){var F;const{constraints:e,initialExtent:i,map:n,padding:s,size:h}=this;if(!e)return null;const f=n&&"initialViewProperties"in n?n.initialViewProperties:void 0,m=this.stateManager.getUserStartupOptions(this.size),v=f==null?void 0:f.viewpoint,x=((F=v==null?void 0:v.targetGeometry)==null?void 0:F.extent)??i,M=x==null?void 0:x.center,$=(v==null?void 0:v.rotation)??0,I=(v==null?void 0:v.scale)||x&&u3(x,[h[0]-s.left-s.right,h[1]-s.top-s.bottom]),P=m.center??M,L=m.rotation??$,z=m.scale??I;return P&&z?new Jo({targetGeometry:P,scale:z,rotation:L}):null}_startup(){var m;this.timeline.begin("MapView Startup");const e=this._getDefaultViewpoint();this.stateManager.startup(e,this.size,this.spatialReference,(m=this.defaultsFromMap.extent)==null?void 0:m.center),this.graphics.owner=this;const i=new AF(this.surface,{canvas:this.renderCanvas,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this.stage=i,this._magnifierView=new NF,this._magnifierView.magnifier=this.magnifier;const n=new RF({view:this});this._set("labelManager",n);const s=new uce({view:this});this._set("animationManager",s);const h=new LF({view:this,animationManager:s});this._set("mapViewNavigation",h),this._setupSpatialReferenceDependentProperties(),this.addHandles([this.rootLayerViews.on("change",()=>this._updateStageChildren()),i.on("webgl-error",v=>this.fatalError=v.error),Ee(()=>this.stationary,v=>i.stationary=v,xi),Ee(()=>this.background,v=>{i.backgroundColor=v==null?void 0:v.color,this._magnifierView.backgroundColor=v==null?void 0:v.color},xi),Ee(()=>this.magnifier,v=>this._magnifierView.magnifier=v,xi),Ee(()=>this.renderingOptions,v=>i.renderingOptions=v,xi),Ee(()=>this.highlightOptions,v=>i.highlightOptions=v,xi),Ee(()=>this.state.id,()=>i.state=this.state,xi)],"map-view"),this._updateStageChildren();const f=this._resolveWhenReady;this._resolveWhenReady=[],f.forEach(v=>v(this)),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.removeHandles("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animation=null,this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this.stage.destroy(),this.stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this.stationaryManager.clear(),this._set("ready",!1),this.stateManager.teardown()}_updateStageChildren(){this.stage.removeAllChildren(),this.rootLayerViews.forEach(i=>{this.stage.addChild(i.container)});const e=this.graphicsView;this.stage.addChild(e.container),this.stage.addChild(this._magnifierView)}_setupSpatialReferenceDependentProperties(){const e=new wce(bg.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const i=new OF({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new PF(e)});this._set("graphicsView",i)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),e.destroy(),this._set("featuresTilingScheme",null)}_getScreenshotView(e){var f;const{allLayerViews:i,padding:n,size:s,stage:h}=this;return{allLayerViews:i,backgroundColor:e!=null&&e.ignoreBackground?null:(f=this.background)==null?void 0:f.color,padding:n,size:s,stage:h}}_spatialReferenceChanged(e){if(this.ready){this.frameTask.stop();for(const i of this.allLayerViews)i.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(e),this.stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const i of this.allLayerViews)i.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}};Xe.type="2d",_([T({readOnly:!0})],Xe.prototype,"animationManager",void 0),_([T({constructOnly:!0})],Xe.prototype,"deactivatedWebGLExtensions",void 0),_([T({constructOnly:!0})],Xe.prototype,"debugWebGLExtensions",void 0),_([T({readOnly:!0})],Xe.prototype,"featuresTilingScheme",void 0),_([T({readOnly:!0})],Xe.prototype,"fullOpacity",void 0),_([T()],Xe.prototype,"goToManager",void 0),_([T({readOnly:!0})],Xe.prototype,"graphicsTileStore",null),_([T()],Xe.prototype,"graphicsView",void 0),_([T()],Xe.prototype,"stateManager",void 0),_([T()],Xe.prototype,"constraintsInfo",null),_([T({readOnly:!0})],Xe.prototype,"state",null),_([T()],Xe.prototype,"initialExtentRequired",null),_([T()],Xe.prototype,"labelManager",void 0),_([T({readOnly:!0})],Xe.prototype,"mapViewNavigation",void 0),_([T({constructOnly:!0})],Xe.prototype,"renderCanvas",void 0),_([T()],Xe.prototype,"renderingOptions",void 0),_([T({constructOnly:!0})],Xe.prototype,"supersampleScreenshotsEnabled",void 0),_([T({readOnly:!0})],Xe.prototype,"supportsGround",void 0),_([T()],Xe.prototype,"_defaultsFromMapSettings",null),_([T({readOnly:!0})],Xe.prototype,"typeSpecificPreconditionsReady",null),_([T()],Xe.prototype,"animation",null),_([T({type:$de})],Xe.prototype,"background",null),_([T()],Xe.prototype,"center",null),_([T({type:Rz})],Xe.prototype,"constraints",null),_([T()],Xe.prototype,"extent",null),_([T()],Xe.prototype,"floors",void 0),_([T({type:Bz})],Xe.prototype,"highlightOptions",void 0),_([T({readOnly:!0})],Xe.prototype,"inputManager",void 0),_([T()],Xe.prototype,"map",void 0),_([T()],Xe.prototype,"padding",null),_([T({readOnly:!0})],Xe.prototype,"rendering",null),_([T()],Xe.prototype,"resizeAlign",null),_([T({readOnly:!0})],Xe.prototype,"resolution",null),_([T()],Xe.prototype,"rotation",null),_([T()],Xe.prototype,"scale",null),_([T({constructOnly:!0})],Xe.prototype,"spatialReferenceLocked",void 0),_([T()],Xe.prototype,"stationary",null),_([T({readOnly:!0})],Xe.prototype,"tileInfo",null),_([T({type:Jz,readOnly:!0})],Xe.prototype,"timeline",void 0),_([T({readOnly:!0})],Xe.prototype,"type",void 0),_([T({readOnly:!0})],Xe.prototype,"updating",null),_([T()],Xe.prototype,"viewpoint",null),_([T()],Xe.prototype,"zoom",null),_([T({readOnly:!0})],Xe.prototype,"navigating",null),_([T(),qi(t=>t instanceof CF?t:yw(IF,t))],Xe.prototype,"ui",void 0),Xe=_([Y("esri.views.MapView")],Xe);const Ide=Xe;var Va;(function(t){t[t.NORTH=0]="NORTH",t[t.NORTH_EAST=1]="NORTH_EAST",t[t.EAST=2]="EAST",t[t.SOUTH_EAST=3]="SOUTH_EAST",t[t.SOUTH=4]="SOUTH",t[t.SOUTH_WEST=5]="SOUTH_WEST",t[t.WEST=6]="WEST",t[t.NORTH_WEST=7]="NORTH_WEST"})(Va||(Va={}));function Ade(t){return DF(t)||oS(t)||aS(t)}function DF(t){return qh(t)||ax(t)}const Ode=12;let dc=class Rr{constructor(e){const i=Rr.checkUnsupported(e);if(i!=null)throw i;const n=e;this.spatialReference=n.spatialReference,this._isWebMercator=this.spatialReference.isWebMercator,this._isGCS=au(this.spatialReference),this.origin=[n.origin.x,n.origin.y],this.pixelSize=n.size[0],this.dpi=n.dpi;const s=n.lods.reduce((x,M)=>(M.level<x.minLod.level&&(x.minLod=M),x.max=Math.max(x.max,M.level),x),{minLod:n.lods[0],max:-1/0}),h=s.minLod,f=2**h.level;let m=h.resolution*f,v=h.scale*f;this.levels=new Array(s.max+1);for(let x=0;x<this.levels.length;x++)this.levels[x]={resolution:m,scale:v,tileSize:[m*n.size[0],m*n.size[1]]},m/=2,v/=2}clone(){return new Rr(this.toTileInfo())}toTileInfo(){return new bg({dpi:this.dpi,origin:new De({x:this.origin[0],y:this.origin[1],spatialReference:this.spatialReference}),size:[this.pixelSize,this.pixelSize],spatialReference:this.spatialReference,lods:this.levels.map((e,i)=>new Js({level:i,scale:e.scale,resolution:e.resolution}))})}getExtent(e,i,n,s){const h=this.levels[e],f=h.tileSize[0],m=h.tileSize[1];s[0]=this.origin[0]+n*f,s[2]=this.origin[0]+(n+1)*f,s[3]=this.origin[1]-i*m,s[1]=this.origin[1]-(i+1)*m}convertExtentToRadians(e,i){this._isWebMercator?(i[0]=JM(e[0]),i[1]=KM(e[1]),i[2]=JM(e[2]),i[3]=KM(e[3])):this._isGCS&&(i[0]=ac(e[0]),i[1]=ac(e[1]),i[2]=ac(e[2]),i[3]=ac(e[3]))}getExtentGeometry(e,i,n,s=new Lt){return this.getExtent(e,i,n,ua),s.spatialReference=this.spatialReference,s.xmin=ua[0],s.ymin=ua[1],s.xmax=ua[2],s.ymax=ua[3],s.zmin=void 0,s.zmax=void 0,s}ensureMaxLod(e){if(e==null)return!1;let i=!1;for(;this.levels.length<=e;){const{resolution:n,scale:s}=this.levels[this.levels.length-1],h=n/2*this.pixelSize;this.levels.push({resolution:n/2,scale:s/2,tileSize:[h,h]}),i=!0}return i}capMaxLod(e){this.levels.length>e+1&&(this.levels.length=e+1)}getMaxLod(){return this.levels.length-1}scaleAtLevel(e){return this.levels[0].scale/2**e}levelAtScale(e){const i=this.levels[0].scale;return e>=i?0:Math.log(i/e)*Math.LOG2E}resolutionAtLevel(e){return this.levels[0].resolution/2**e}compatibleWith(e,i=1/0){if(Rr.checkUnsupported(e))return!1;const n=new Rr(e);if(!n.spatialReference.equals(this.spatialReference)||n.pixelSize!==this.pixelSize)return!1;const s=Math.min(this.levels.length-1,n.levels.length-1,i),h=this.levels[s].resolution;let f=.5*h;return!gs(n.origin[0],this.origin[0],f)||!gs(n.origin[1],this.origin[1],f)?!1:(f=.5*h/2**s/this.pixelSize*Ode,gs(h,n.levels[s].resolution,f))}rootTilesInExtent(e,i=null,n=1/0){const s=new Array,h=this.levels[0].tileSize;if(e==null||h[0]===0||h[1]===0)return s;Rr.computeRowColExtent(e,h,this.origin,ua);let f=ua[1],m=ua[3],v=ua[0],x=ua[2];const M=x-v,$=m-f;if(M*$>n){const I=Math.floor(Math.sqrt(n));$>I&&(f=f+Math.floor(.5*$)-Math.floor(.5*I),m=f+I),M>I&&(v=v+Math.floor(.5*M)-Math.floor(.5*I),x=v+I)}for(let I=f;I<m;I++)for(let P=v;P<x;P++)s.push([0,I,P]);return i!=null&&(i[0]=this.origin[0]+v*h[0],i[1]=this.origin[1]-m*h[1],i[2]=this.origin[0]+x*h[0],i[3]=this.origin[1]-f*h[1]),s}static computeRowColExtent(e,i,n,s){const h=.001*(e[2]-e[0]+(e[3]-e[1]));s[0]=Math.max(0,Math.floor((e[0]+h-n[0])/i[0])),s[2]=Math.max(0,Math.ceil((e[2]-h-n[0])/i[0])),s[1]=Math.max(0,Math.floor((n[1]-e[3]+h)/i[1])),s[3]=Math.max(0,Math.ceil((n[1]-e[1]-h)/i[1]))}static isPowerOfTwo(e){const i=e.lods,n=i[0].resolution*2**i[0].level;return!i.some(s=>!qZ(s.resolution,n/2**s.level))}static hasGapInLevels(e){const i=e.lods.map(n=>n.level);i.sort((n,s)=>n-s);for(let n=1;n<i.length;n++)if(i[n]!==i[0]+n)return!0;return!1}static tileSizeSupported(e){const i=e.size[1];return i===e.size[0]&&!(i&i-1)&&i>=128&&i<=512}static hasOriginPerLODs(e){const i=e.origin;return e.lods.some(n=>n.origin!=null&&(n.origin[0]!==i.x||n.origin[1]!==i.y))}static getMissingTileInfoError(){return new fe("tilingscheme:tile-info-missing","Tiling scheme must have tiling information")}static checkUnsupported(e){return e==null?GT():e.lods.length<1?new fe("tilingscheme:generic","Tiling scheme must have at least one level"):Rr.isPowerOfTwo(e)?Rr.hasGapInLevels(e)?new fe("tilingscheme:gaps","Tiling scheme levels must not have gaps between min and max level"):Rr.tileSizeSupported(e)?Rr.hasOriginPerLODs(e)?new fe("tilingscheme:multiple-origin","Tiling scheme levels must not have their own origin"):null:new fe("tilingscheme:tile-size","Tiles must be square and size must be one of [128, 256, 512]"):new fe("tilingscheme:power-of-two","Tiling scheme must be power of two")}static fromExtent(e,i){const n=e[2]-e[0],s=e[3]-e[1],h=ir(i),f=1.2*Math.max(n,s),m=256,v=f/m,x=v*h*(96/.0254),M=new Rr(new bg({size:[m,m],origin:new De({x:e[0]-.5*(f-n),y:e[3]+.5*(f-s)}),lods:[new Js({level:0,resolution:v,scale:x})],spatialReference:i}));return M.ensureMaxLod(20),M}static makeWebMercatorAuxiliarySphere(e){const i=new Rr(Rr.WebMercatorAuxiliarySphereTileInfo);return i.ensureMaxLod(e),i}static makeGCSWithTileSize(e,i=256,n=16){const s=256/i,h=new Rr(new bg({size:[i,i],origin:new De({x:-180,y:90,spatialReference:e}),spatialReference:e,lods:[new Js({level:0,resolution:.703125*s,scale:295497598570834e-6*s})]}));return h.ensureMaxLod(n),h}get test(){}};function GT(){return new fe("tilingscheme:tile-info-missing","Tiling scheme must have tiling information")}dc.WebMercatorAuxiliarySphereTileInfo=new bg({size:[256,256],origin:new De({x:-20037508342787e-6,y:20037508342787e-6,spatialReference:tt.WebMercator}),spatialReference:tt.WebMercator,lods:[new Js({level:0,resolution:156543.03392800014,scale:591657527591555e-6})]}),dc.WebMercatorAuxiliarySphere=dc.makeWebMercatorAuxiliarySphere(19);const ua=sn(),g$=64;WZ(gx/10);const Pde=sn();dc.WebMercatorAuxiliarySphere.getExtent(0,0,0,Pde);sn([-180,-90,180,90]);const $p=Se(),Rde=Se(),xl=Se(),Sl=Se();function Lde(t,e,i=0){const n=t.extent;if(n==null)return!1;if(i===0)return RJ(n,e);const s=Math.min(n[2]-n[0],n[3]-n[1]);return LJ(n,e,i*s)}function Wy(t,e,i,n){Yn($p,i),$p[n]=e[n];const s=di($p,$p,e),h=di(Rde,t,e),f=xt(h,s),m=xt(s,s);let v;v=f<=0?e:m<=f?i:yr($p,e,xr(s,s,f/m));const x=di($p,t,v);return Math.PI/2-Math.atan(x[2]/Math.sqrt(x[0]*x[0]+x[1]*x[1]))}function Nde(t,e,i){const n=t.extent;if(n==null)return 0;xl[0]=n[0],xl[1]=n[1],xl[2]=i,Sl[0]=n[2],Sl[1]=n[3],Sl[2]=i;let s=1/0,h=1/0;return e[0]<xl[0]?s=Wy(e,xl,Sl,0):e[0]>Sl[0]&&(s=Wy(e,Sl,xl,0)),e[1]<xl[1]?h=Wy(e,xl,Sl,1):e[1]>Sl[1]&&(h=Wy(e,Sl,xl,1)),Math.min(s,h)}function Dde(t,e,i,n){if(t==null)return GT();const s=t.spatialReference;if(s.isGeographic&&!DF(s))return new fe("tilingscheme:local-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in local scenes");const h=dc.checkUnsupported(t);return h??(i==null?new fe("tilingscheme:extent-not-exist","The layer does not provide a layer extent."):zde(t,i)||(e==null||s.equals(e)||e.isWGS84&&s.isWebMercator?null:new fe("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the local scene")))}function zde(t,e){const i=t.lods,n=i[0].resolution*2**i[0].level,s=[n*t.size[0],n*t.size[1]],h=[t.origin.x,t.origin.y],f=OJ(e),m=sn();dc.computeRowColExtent(f,s,h,m);const v=(m[2]-m[0])*(m[3]-m[1]);if(v>g$){const x=i[0].scale*2**i[0].level;let M=Math.max((f[3]-f[1])/t.size[1],(f[2]-f[0])/t.size[0])*x/n;const $=Math.floor(Math.log(M)/Math.log(10));return M=Math.ceil(M/10**$)*10**$,new fe("tilingscheme:too-many-root-tiles","Scale of level 0 of the tiling scheme (1:"+Math.floor(x).toLocaleString()+") is too large for the layer's extent. Suggested scale: 1:"+M.toLocaleString()+".",{level0Scale:x,suggestedLevel0Scale:M,requiredNumRootTiles:v,allowedNumRootTiles:g$})}return null}const Fde=Object.freeze(Object.defineProperty({__proto__:null,checkIfTileInfoSupportedForViewSR:Dde,isInsideExtent:Lde,tiltToExtentEdge:Nde},Symbol.toStringTag,{value:"Module"}));function jde(){return!0}function Gde(){return 0}function Vde(t,e,i,n){if(t==null)return GT();const s=(t==null?void 0:t.lods.length)-1,h=t.spatialReference;if(h.isWebMercator){if(!dc.makeWebMercatorAuxiliarySphere(s).compatibleWith(t,n))return new fe("tilingscheme:incompatible-global-web-mercator","The tiling scheme is not compatible with the ArcGIS Online Web Mercator tiling scheme")}else{if(!Ade(h))return new fe("tilingscheme:global-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in global scenes");if(!dc.makeGCSWithTileSize(t.spatialReference,t.size[0],s).compatibleWith(t,n))return t.spatialReference.isWGS84?new fe("tilingscheme:incompatible-global-wgs84","The tiling scheme is not compatible with the ArcGIS Online WGS84 tiling scheme"):new fe("tilingscheme:incompatible-global","The tiling scheme is not compatible with the ArcGIS Online tiling scheme")}return e==null||t.spatialReference.equals(e)?null:new fe("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the global scene")}const Hde=Object.freeze(Object.defineProperty({__proto__:null,checkIfTileInfoSupportedForViewSR:Vde,isInsideExtent:jde,tiltToExtentEdge:Gde},Symbol.toStringTag,{value:"Module"})),Bde={[ra.Global]:Hde,[ra.Local]:Fde};function G4(t,e,i,n,s){return Bde[n].checkIfTileInfoSupportedForViewSR(t,i,e,s)}function Ude(t,e,i){const n=Wte(t);if(n!=null){if(!Pe.isCollection(n))return{tileInfo:n.tileInfo,fullExtent:n.fullExtent};{const s=n.find(h=>G4(h.tileInfo,h.fullExtent,e,i)==null);if(s)return{tileInfo:s.tileInfo,fullExtent:s.fullExtent}}}return{tileInfo:null,fullExtent:null}}Va.NORTH,Va.EAST,Va.SOUTH,Va.WEST;Va.NORTH_EAST,Va.SOUTH_EAST,Va.SOUTH_WEST,Va.NORTH_WEST;function qde(t,e){return t!=null&&(e==null||(e===ra.Local?!t.isGeographic||t.isWGS84||t.wkid===Ys.CGCS2000:t.isWebMercator||t.isWGS84||t.wkid===Ys.CGCS2000||t.wkid===Ys.GCSMARS2000||t.wkid===Ys.GCSMARS2000_SPHERE||t.wkid===Ys.GCSMOON2000))}async function Wde(t,e={}){const{basemap:i,view:n}=t;await i.load(e),Jde(i),await Yde(i,n,e),Zt(e)}async function Zde(t,e={}){var m,v;const{basemap:i,view:n}=t;Zt(e);const s=(m=i.baseLayers.find(x=>x.type==="unknown"))==null?void 0:m.loadError;if(s!=null)throw s;if(!n||"spatialReferenceLocked"in n&&!n.spatialReferenceLocked||(await i.load(e),Zt(e),i.baseLayers.length===0))return;const h=i.baseLayers.at(0);if(!Ute(h))return;if(i.spatialReference){if(n.spatialReference.equals(i.spatialReference))return;m$()}await h.load(e),Zt(e);const f=(("supportedSpatialReferences"in h?h.supportedSpatialReferences:null)||["tileInfo"in h?(v=h.tileInfo)==null?void 0:v.spatialReference:null]).filter(ji);f.length!==0&&f.every(x=>!n.spatialReference.equals(x))&&m$()}function m$(){throw new fe("basemap-compatibility:incompatible-spatial-reference","Basemap spatial reference is not compatible with the view")}function Jde(t){if(t.baseLayers.length===0&&t.referenceLayers.length===0)return;const e=t.baseLayers.concat(t.referenceLayers).toArray().filter(i=>!Gte(i)).map(i=>Kde(i));if(e.length)throw e[0]}function Kde(t){return new fe("basemap-compatibility:unsupported-basemap-layer-type","Unsupported basemap layer type ${operationalLayerType}",{layer:t,operationalLayerType:t.operationalLayerType||"unknown"})}async function Yde(t,e,i){if(t.baseLayers.length===0)return;const n=t.baseLayers.at(0);if(GL(n)){try{await n.load(i)}catch(s){const h="basemap-compatibility:unknown-error",f="Unknown basemap compatibility error",{name:m=h,message:v=f,details:x}=s;throw new fe(m,v,x)}Xde(n,e)}}function Xde(t,e){var m;const i=e.state.viewingMode;if(!i)return;let n,s;if((t==null?void 0:t.type)==="wmts"){const v=Ude(t,e.spatialReference,i);if(v.tileInfo==null)throw new fe("basemapgalleryitem:tiling-scheme-incompatible","Basemap tiling scheme is incompatible with the view");n=v.tileInfo,s=v.fullExtent}else n=t.tileInfo,s=t.fullExtent;if(n==null)return;if(!qde(n.spatialReference,i))throw new fe(`basemapgalleryitem:spatial-reference-unsupported-${pk(i)}`,`Basemap spatial reference is unsupported in ${pk(i)} mode`);const h=(t==null?void 0:t.type)==="vector-tile"?n.getCompatibleForVTL(256):null;if(i===ra.Global){let v=G4(n,s,null,i);if(v&&(t==null?void 0:t.type)==="vector-tile"&&s!=null&&h&&!G4(h,s,null,i)&&(v=null),v){const x=n.spatialReference.isWebMercator?"web-mercator":"wgs84";throw new fe(`basemapgalleryitem:tiling-scheme-unsupported-${x}-global`,"Basemap tiling scheme is unsupported in global mode",{error:v})}}else if(dc.checkUnsupported(n))throw new fe("basemapgalleryitem:tiling-scheme-unsupported-local","Basemap tiling scheme is unsupported in local mode");const f=(m=e.basemapTerrain)==null?void 0:m.tilingScheme;if(f&&!f.compatibleWith(n)&&((t==null?void 0:t.type)!=="vector-tile"||!h||!f.compatibleWith(h)))throw new fe("basemapgalleryitem:tiling-scheme-incompatible","Basemap tiling scheme is incompatible with the view")}let Ca=class extends np(Re){constructor(e){super(e),this.compatibilityFunction=null,this.error=null,this.state="loading",this.view=null}initialize(){const e=()=>this.refresh();this.addHandles([Ee(()=>{var i;return(i=this.basemap)==null?void 0:i.loadStatus},e),Ee(()=>this.compatibilityFunction,e),Ee(()=>{var i;return this.view&&"basemapTerrain"in this.view&&((i=this.view.basemapTerrain)==null?void 0:i.tilingScheme)},e),Ee(()=>{var i;return(i=this.view)==null?void 0:i.ready},e),Ee(()=>{var i;return(i=this.view)==null?void 0:i.spatialReference},e)]),this.refresh()}destroy(){this._cancelRefresh(),this.basemap=null,this.compatibilityFunction=null,this.view=null}get _spatialReferenceTask(){return Mne(this.view,this.basemap)}set basemap(e){e&&e.load().catch(()=>{}),this._set("basemap",e)}get spatialReference(){return this._spatialReferenceTask.spatialReference}refresh(){var s;this._cancelRefresh(),this._set("state","loading");const e=(s=this.basemap)==null?void 0:s.loadStatus;if(e!=="loaded"&&e!=="failed")return;if(!this.compatibilityFunction)return void(e==="loaded"?(this._set("state","ready"),this._set("error",null)):(this._set("state","error"),this._set("error",this.basemap.loadError)));const i=new AbortController,{signal:n}=i;this.compatibilityFunction(this,{signal:n}).then(()=>Zh(()=>!this._spatialReferenceTask.updating,n)).then(()=>{this._set("state","ready"),this._set("error",null)}).catch(h=>{Zr(h)||(this._set("state","error"),this._set("error",h))}),this._refreshController=i}_cancelRefresh(){this._refreshController&&(this._refreshController.abort(),this._refreshController=null)}};_([T({readOnly:!0})],Ca.prototype,"_spatialReferenceTask",null),_([T()],Ca.prototype,"basemap",null),_([T()],Ca.prototype,"compatibilityFunction",void 0),_([T({readOnly:!0})],Ca.prototype,"error",void 0),_([T({readOnly:!0})],Ca.prototype,"spatialReference",null),_([T({readOnly:!0})],Ca.prototype,"state",void 0),_([T()],Ca.prototype,"view",void 0),Ca=_([Y("esri.widgets.BasemapGallery.support.BasemapGalleryItem")],Ca);const zF=Ca,FF=Pe.ofType(Fh);let eg=class extends Re{constructor(e){super(e),this.basemaps=new FF}destroy(){this.basemaps.forEach(e=>e.destroy())}get state(){return"ready"}refresh(){}};_([T({type:FF})],eg.prototype,"basemaps",void 0),_([T({readOnly:!0})],eg.prototype,"state",null),eg=_([Y("esri.widgets.BasemapGallery.support.LocalBasemapsSource")],eg);const jF=eg,GF=Pe.ofType(Fh);let Ia=class extends na.LoadableMixin(Gw(jF)){constructor(e){super(e),this._lastPortalBasemapFetchController=null,this.basemaps=new GF,this.filterFunction=null,this.portal=$s.getDefault(),this.query=null,this.updateBasemapsCallback=null,this.viewType=null}initialize(){this.addHandles(Ee(()=>{var e,i,n;return[this.filterFunction,this.loadStatus,(e=this.portal)==null?void 0:e.basemapGalleryGroupQuery,(i=this.portal)==null?void 0:i.basemapGalleryGroupQuery3D,(n=this.portal)==null?void 0:n.user,this.query,this.updateBasemapsCallback]},()=>this.refresh(),Pt))}destroy(){this.filterFunction=null,this.portal=null,this.basemaps.forEach(e=>e.destroy())}get state(){return this.loadStatus==="not-loaded"?"not-loaded":this.loadStatus==="loading"||this._lastPortalBasemapFetchController?"loading":"ready"}load(e){return this.addResolvingPromise(this.portal.load(e)),Promise.resolve(this)}async refresh(){if(this.loadStatus!=="loaded")return;this._lastPortalBasemapFetchController&&(this._lastPortalBasemapFetchController.abort(),this._lastPortalBasemapFetchController=null);const e=this.portal,i=new AbortController;this._lastPortalBasemapFetchController=i,this.notifyChange("state");try{const n=await e.fetchBasemaps(this._toQueryString(this.query),{signal:i.signal,include3d:this.viewType==="3d"||void 0});await this._updateBasemaps(n)}catch(n){if(Zr(n))throw n;Ce.getLogger(this).warn(new fe("basemap-source:fetch-basemaps-error","Could not fetch basemaps from portal.",{error:n})),await this._updateBasemaps()}this._lastPortalBasemapFetchController=null,this.notifyChange("state")}_toQueryString(e){return e&&typeof e!="string"?Object.keys(e).map(i=>`${i}:${e[i]}`).join(" AND "):e}async _updateBasemaps(e=[]){let i=await this._filterBasemaps(e);i=this.updateBasemapsCallback?await this.updateBasemapsCallback(i):i,this.basemaps.removeAll(),this.basemaps.addMany(i)}async _filterBasemaps(e){if(!this.filterFunction)return e;const i=e.map(this.filterFunction),n=await Promise.all(i);return e.filter((s,h)=>n[h])}};_([T({readOnly:!0,type:GF})],Ia.prototype,"basemaps",void 0),_([T()],Ia.prototype,"filterFunction",void 0),_([T({type:$s})],Ia.prototype,"portal",void 0),_([T()],Ia.prototype,"query",void 0),_([T({readOnly:!0})],Ia.prototype,"state",null),_([T()],Ia.prototype,"updateBasemapsCallback",void 0),_([T()],Ia.prototype,"viewType",void 0),Ia=_([Y("esri.widgets.BasemapGallery.support.PortalBasemapsSource")],Ia);const tg=Ia,VF=Pe.ofType(zF);function Qde(t){return t&&t.declaredClass==="esri.portal.Portal"}function epe(t){return t&&!(t instanceof tg)&&(!!t.portal||!!t.query)}function tpe(t){return t&&"basemaps"in t&&"state"in t&&"refresh"in t}let Bs=class extends na{constructor(e){super(e),this._loadingProjectionEngine=!1,this.items=new VF,this.source=new tg,this.view=null}initialize(){const e=()=>this._recreateItems();this.addHandles([Ee(()=>this.state==="ready"?this.compatibilityFunction:null,()=>this._updateItems()),Es(()=>{var i;return(i=this.source)==null?void 0:i.basemaps},"change",e,{onListenerAdd:e}),nr(()=>this.view,()=>{var i;this.source instanceof tg&&(this.source.viewType=(i=this.view)==null?void 0:i.type)},{once:!0})])}destroy(){var i;const e=this.source.basemaps.find(n=>n===this.activeBasemap);e&&this.source.basemaps.remove(e),(i=this.source)==null||i.destroy()}get activeBasemap(){var e,i;return((i=(e=this.view)==null?void 0:e.map)==null?void 0:i.basemap)??null}set activeBasemap(e){var h,f;const i=this.view;if(!(i!=null&&i.map))return;const n=typeof e=="string"?Fh.fromId(e):e;if(!n||!i.ready)return i.map.basemap=n,void this._clearOverride("activeBasemap");const s=n.spatialReference||((f=(h=this.items)==null?void 0:h.find(m=>this.basemapEquals(n,m.basemap)))==null?void 0:f.spatialReference);if(s&&"spatialReferenceLocked"in i&&!i.spatialReferenceLocked){const m=i.spatialReference;if(s!=null&&!bi(m,s)&&!ks(i.spatialReference,s)&&!ol())return this._override("activeBasemap",n),this._loadingProjectionEngine=!0,void Qa().then(()=>{this._get("activeBasemap")===e&&(i.map.basemap=e,i.spatialReference=s,this._clearOverride("activeBasemap"))},()=>{}).then(()=>{this._loadingProjectionEngine=!1});i.map.basemap=n,this._clearOverride("activeBasemap"),s==null||bi(i.spatialReference,s)||(i.spatialReference=s)}else i.map.basemap=n,this._clearOverride("activeBasemap")}get activeBasemapIndex(){const{state:e,activeBasemap:i}=this;return e!=="ready"?-1:this._findBasemapIndex(i)}get compatibilityFunction(){var e;return((e=this.view)==null?void 0:e.type)==="3d"?Wde:Zde}set compatibilityFunction(e){this._overrideIfSome("compatibilityFunction",e)}castSource(e){return Array.isArray(e)||Pe.isCollection(e)?new jF({basemaps:Array.isArray(e)?new Pe(e):e}):Qde(e)?new tg({portal:e}):epe(e)?new tg(e):tpe(e)?e:null}get state(){var e;return(e=this.view)!=null&&e.ready&&this.source?this._loadingProjectionEngine?"loading":"ready":"disabled"}basemapEquals(e,i){return Tne(e,i)}refresh(){this._recreateItems()}load(){return this.loadSource()}loadSource(e){return this.addResolvingPromise(na.isLoadable(this.source)?this.source.load(e):null),Promise.resolve(this)}_findBasemapIndex(e){const{items:i}=this,n=i.findIndex(s=>s.basemap===e);return n===-1?i.findIndex(s=>this.basemapEquals(s.basemap,e)):n}_recreateItems(){var f;const e=((f=this.source)==null?void 0:f.basemaps)??[],{view:i,compatibilityFunction:n}=this,s=new Map(this.items.map(m=>[m.basemap,m])),h=e.map(m=>{const v=s.get(m);return v?(s.delete(m),v):new zF({basemap:m,compatibilityFunction:n,view:i})});this.items.removeAll(),this.items.addMany(h),s.forEach(m=>m.destroy())}_updateItems(){for(const e of this.items)e.compatibilityFunction=this.compatibilityFunction,e.view=this.view}};_([T()],Bs.prototype,"_loadingProjectionEngine",void 0),_([T()],Bs.prototype,"activeBasemap",null),_([T({readOnly:!0})],Bs.prototype,"activeBasemapIndex",null),_([T()],Bs.prototype,"compatibilityFunction",null),_([T({readOnly:!0,type:VF})],Bs.prototype,"items",void 0),_([T()],Bs.prototype,"source",void 0),_([qi("source")],Bs.prototype,"castSource",null),_([T({readOnly:!0})],Bs.prototype,"state",null),_([T()],Bs.prototype,"view",void 0),Bs=_([Y("esri.widgets.BasemapGallery.BasemapGalleryViewModel")],Bs);const ipe=Bs,Yr="esri-basemap-gallery",Xr={base:Yr,sourceLoading:`${Yr}--source-loading`,layoutGrid:`${Yr}--grid`,narrowItems:`${Yr}--narrow-items`,loader:`${Yr}__loader`,item:`${Yr}__item`,itemContainer:`${Yr}__item-container`,itemContent:`${Yr}__item-content`,itemTitle:`${Yr}__item-title`,itemTagsContainer:`${Yr}__item-tags-container`,itemThumbnail:`${Yr}__item-thumbnail`,selectedItem:`${Yr}__item--selected`,itemError:`${Yr}__item--error`};function npe({level:t,class:e,...i},n){const s=HF(t);return ae(`h${s}`,{...i,"aria-level":String(s),class:_L(Ye.heading,e),role:"heading"},n)}function HF(t){return qr(Math.ceil(t),1,6)}function FMe(t,e=1){return HF(t+e)}const Q_={small:200,default:280,wide:420};let Hn=class extends Cs{constructor(e,i){super(e,i),this.disabled=!1,this.headingLevel=2,this.messages=null,this.viewModel=new ipe,this._focusBasemapItemEnabled=!1,this._container=null,this._width=0,this._onContainerCreated=n=>{this._container=n}}initialize(){this.addHandles([zee(()=>this._container,({contentRect:e})=>{this._width=e.width}),nr(()=>this.source,()=>this.viewModel.loadSource(),{sync:!0,initial:!0})])}loadDependencies(){return cl({scrim:()=>be(()=>import("./calcite-scrim-Ci3FYdel.js"),[],import.meta.url),chip:()=>be(()=>import("./calcite-chip-PgcTkVnY.js"),[],import.meta.url)})}get activeBasemap(){return this.viewModel.activeBasemap}set activeBasemap(e){this.viewModel.activeBasemap=e}get icon(){return"basemap"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get source(){return this.viewModel.source}set source(e){this.viewModel.source=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e=this.source.state==="loading",i=this.disabled||this.viewModel.state==="disabled",n=this.viewModel.items,s={[Xr.sourceLoading]:e,[Ye.disabled]:i},h=this._width;h<=Q_.small||h>=Q_.wide?s[Xr.layoutGrid]=!0:h<Q_.default&&(s[Xr.narrowItems]=!0);const f=e?ae("div",{class:Xr.loader,key:"loader"}):null,m=e?null:n.length>0?ae("ul",{"aria-disabled":this.disabled,"aria-label":this.label,bind:this,class:Xr.itemContainer,key:"item-container",onkeydown:this._handleKeyDown,role:"radiogroup"},n.map((v,x)=>this._renderBasemapGalleryItem(v,x)).toArray()):ae("div",{class:Ye.empty,key:"empty-message"},ae(npe,{level:this.headingLevel},this.messages.noBasemaps));return ae("div",{afterCreate:this._onContainerCreated,class:this.classes(Xr.base,Ye.widget,Ye.panel,s),key:"container"},this._width===0?null:[f,m])}_getRoundRobinIndex(e,i){return(e+i)%i}_handleKeyDown(e){const{key:i}=e;if(!["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(i))return;e.preventDefault();const{items:n,activeBasemapIndex:s}=this.viewModel,h=i==="ArrowUp"||i==="ArrowLeft"?this._getRoundRobinIndex(Math.max(s-1,-1),n.length):this._getRoundRobinIndex(s+1,n.length),f=n.at(h);(f==null?void 0:f.state)==="ready"&&(this.viewModel.activeBasemap=f.basemap),this._focusBasemapItemEnabled=!0}_focusBasemapItem(e){this._focusBasemapItemEnabled&&e.tabIndex===0&&(e.focus(),this._focusBasemapItemEnabled=!1)}_handleClick(e){const i=e.currentTarget["data-item"];i.state==="ready"&&(this.viewModel.activeBasemap=i.basemap)}_renderBasemapGalleryItem(e,i){var z,F;const n=Cne(e.basemap)||Tt("esri/themes/base/images/basemap-toggle-64.svg"),s=e.basemap.title,h=(z=e.basemap.portalItem)==null?void 0:z.snippet,f=((F=e.error)==null?void 0:F.message)||h||s,{viewModel:{state:m,activeBasemapIndex:v}}=this,x=this.disabled||m==="disabled",M=v===i,$=M||v===-1&&i===0?0:-1,I=m==="loading",P={[Xr.selectedItem]:M,[Xr.itemError]:e.state==="error"},L=`basemapgallery-item-${e.uid}`;return ae("li",{afterUpdate:this._focusBasemapItem,"aria-checked":M.toString(),"aria-disabled":x.toString(),"aria-labelledby":L,bind:this,class:this.classes(Xr.item,P),"data-item":e,key:e.uid,onclick:this._handleClick,onkeydown:this._handleClick,role:"radio",tabIndex:$,title:f},ae("img",{alt:"",class:Xr.itemThumbnail,src:n}),ae("div",{class:Xr.itemContent,key:"content"},ae("div",{class:Xr.itemTitle,key:"title"},ae("span",{id:L},s)),_ne(e.basemap)?this._renderTags(e.basemap):null),e.state==="loading"||M&&I?ae("calcite-scrim",null,ae("span",{"aria-hidden":"true",class:Ye.loaderAnimation,key:"loader",role:"presentation"})):null)}_renderTags(e){return ae("div",{class:Xr.itemTagsContainer,key:"tag"},this._render3DTag(),xne(e)?this._renderBetaTag():null)}_render3DTag(){const{messages:e}=this;return ae("calcite-chip",{key:"tag-3d",scale:"s",value:e.tag3D},this.messages.tag3D)}_renderBetaTag(){const{messages:e}=this;return ae("calcite-chip",{appearance:"outline-fill",key:"tag-beta",scale:"s",value:e.tagBeta},this.messages.tagBeta)}};_([T()],Hn.prototype,"activeBasemap",null),_([T()],Hn.prototype,"disabled",void 0),_([T()],Hn.prototype,"headingLevel",void 0),_([T()],Hn.prototype,"icon",null),_([T()],Hn.prototype,"label",null),_([T(),Sr("esri/widgets/BasemapGallery/t9n/BasemapGallery")],Hn.prototype,"messages",void 0),_([T()],Hn.prototype,"source",null),_([T()],Hn.prototype,"view",null),_([T()],Hn.prototype,"viewModel",void 0),_([T()],Hn.prototype,"_focusBasemapItemEnabled",void 0),_([T()],Hn.prototype,"_container",void 0),_([T()],Hn.prototype,"_width",void 0),_([D2()],Hn.prototype,"_handleClick",null),Hn=_([Y("esri.widgets.BasemapGallery")],Hn);const rpe=Hn;let fh=class extends Re{constructor(e){super(e),this._viewpointHandle=null,this.group=null}initialize(){this.addHandles(Es(()=>{var e;return(e=this.view)==null?void 0:e.ui},"expand",e=>{const{target:i}=e;i&&i!==this&&i.expanded&&i.group&&i.group===this.group&&this._collapse()}))}destroy(){this._viewpointHandle=null,this.view=null}set autoCollapse(e){this._set("autoCollapse",e),this._watchViewpoint()}set expanded(e){var s;const i=!!e;this._set("expanded",i);const n=(s=this.view)==null?void 0:s.ui;n&&n.emit("expand",{target:this}),this._viewpointHandleChange(i)}get state(){var e;return(e=this.view)!=null&&e.ready?"ready":"disabled"}set view(e){this._get("view")!==e&&(this._set("view",e),e&&nr(()=>e.ready,()=>{this.view===e&&this._watchViewpoint()},{once:!0,initial:!0}))}_viewpointHandleChange(e){this._viewpointHandle&&(e?nr(()=>{var i;return(i=this.view)==null?void 0:i.stationary},()=>{var i;return(i=this._viewpointHandle)==null?void 0:i.resume()},{once:!0,initial:!0}):this._viewpointHandle.pause())}_watchViewpoint(){const e="viewpoint";this.removeHandles(e),this._viewpointHandle=null;const{autoCollapse:i,view:n}=this;if(!n||!i)return;const s=sK(()=>n.type==="3d"?n.camera:n.viewpoint,()=>this._collapse());this.addHandles(s,e),this._viewpointHandle=s}_collapse(){this.expanded=!1}};_([T({value:!1})],fh.prototype,"autoCollapse",null),_([T({value:!1})],fh.prototype,"expanded",null),_([T()],fh.prototype,"group",void 0),_([T({readOnly:!0})],fh.prototype,"state",null),_([T({value:null})],fh.prototype,"view",null),fh=_([Y("esri.widgets.Expand.ExpandViewModel")],fh);const BF=fh;function UF(t){return e=>{e.hasOwnProperty("_delegatedEventNames")||(e._delegatedEventNames=e._delegatedEventNames?e._delegatedEventNames.slice():[]);const i=e._delegatedEventNames,n=Array.isArray(t)?t:spe(t);i.push(...n)}}function spe(t){return t.split(",").map(e=>e.trim())}function Cg(t){return t&&typeof t.render=="function"}function ope(t){return t&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}const Rs="esri-expand",Qr={base:Rs,toggle:`${Rs}__toggle`,popoverContent:`${Rs}__popover-content`,panel:`${Rs}__panel`,panelContent:`${Rs}__panel-content`,sheet:`${Rs}__sheet`,panelIconNumber:`${Rs}__panel-icon-number`,contentContainer:`${Rs}__content-container`,icon:"esri-collapse__icon",iconFlip:"esri-collapse__icon-flip",iconExpanded:`${Rs}__icon--expanded`,iconNumber:`${Rs}__icon-number`,content:`${Rs}__content`,contentExpanded:`${Rs}__content--expanded`},y$="chevrons-left",v$="chevrons-right";let _i=class extends Cs{constructor(e,i){super(e,i),this.closeOnEsc=!0,this.collapseTooltip="",this.content="",this.expandTooltip="",this.iconNumber=0,this.messages=null,this.messagesCommon=null,this.mode="auto",this.placement=null,this.viewModel=new BF,this.toggle=()=>{this.viewModel.expanded=!this.viewModel.expanded},this._handlePopoverClose=n=>{n.target===this._popoverEl&&(this.viewModel.expanded=n.target.open)},this._handleSheetClose=n=>{this.viewModel.expanded=n.target.open},this._handlePanelClose=n=>{this.viewModel.expanded=!n.target.closed},this._handleKeyDown=n=>{this.viewModel.expanded&&n.key==="Escape"&&!this._willCloseOnEsc(n)&&n.preventDefault()},this._storeToggleButtonEl=n=>{this._toggleButtonEl=n},this._storePopoverEl=n=>{this._popoverEl=n}}loadDependencies(){return cl({button:()=>be(()=>import("./calcite-button-BQ85dayr.js"),[],import.meta.url),icon:()=>be(()=>import("./calcite-icon-BSz57Dah.js"),[],import.meta.url),panel:()=>be(()=>import("./calcite-panel-CyoUiYAq.js"),[],import.meta.url),popover:()=>be(()=>import("./calcite-popover-D8gIxwvU.js"),[],import.meta.url),sheet:()=>be(()=>import("./calcite-sheet-BELCmXlP.js"),[],import.meta.url)})}get expandTitle(){const{expanded:e,messagesCommon:i,collapseTooltip:n,expandTooltip:s}=this;return(e?n||(i==null?void 0:i.collapse):s||(i==null?void 0:i.expand))??""}get _displaySheet(){var e;switch(this.mode){case"drawer":return!0;case"auto":return((e=this.viewModel.view)==null?void 0:e.widthBreakpoint)==="xsmall";default:return!1}}get autoCollapse(){return this.viewModel.autoCollapse}set autoCollapse(e){this.viewModel.autoCollapse=e}get collapseIcon(){return v$}set collapseIcon(e){this._overrideIfSome("collapseIcon",e)}get expanded(){return this.viewModel.expanded}set expanded(e){this.viewModel.expanded=e}get expandIcon(){return Cg(this.content)?this.content.icon:y$}set expandIcon(e){this._overrideIfSome("expandIcon",e)}get group(){return this.viewModel.group}set group(e){this.viewModel.group=e}get icon(){return null}get label(){var e;return(Cg(this.content)?this.content.label:null)??((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}expand(){this.viewModel.expanded=!0}collapse(){this.viewModel.expanded=!1}render(){const{_displaySheet:e,_toggleButtonEl:i,viewModel:{expanded:n},label:s,placement:h}=this;return ae("div",{class:this.classes(Qr.base,Ye.widget)},this._renderToggle(),e?ae("calcite-sheet",{class:Qr.sheet,heightScale:"l",label:s,onkeydown:this._handleKeyDown,open:n,position:"block-end",onCalciteSheetClose:this._handleSheetClose},ae("calcite-panel",{class:Qr.panel,closable:!0,closed:!n,heading:s,onkeydown:this._handleKeyDown,onCalcitePanelClose:this._handlePanelClose},ae("div",{class:Qr.panelContent},this._renderContent()))):i?ae("calcite-popover",{afterCreate:this._storePopoverEl,afterUpdate:this._storePopoverEl,label:s,onkeydown:this._handleKeyDown,open:n,overlayPositioning:"fixed",placement:h??this._getPlacement(),referenceElement:i,onCalcitePopoverClose:this._handlePopoverClose},ae("div",{class:Qr.popoverContent},this._renderContent())):null)}_getPlacement(){const{container:e,view:i}=this,n=e&&i?i.ui.getPosition(e):null;if(!n||n==="manual")return"auto";const[s,h]=n.split("-");return`${h==="right"?"left":"right"}-${s==="bottom"?"end":"start"}`}_willCloseOnEsc(e){const{closeOnEsc:i}=this;return typeof i=="function"?i(e):i}_renderBadgeNumber(){const{expanded:e,iconNumber:i}=this;return i&&!e?ae("span",{class:Qr.iconNumber,key:"expand__icon-number"},i):null}_renderToggleButton(){const{expanded:e,expandTitle:i,expandIcon:n,collapseIcon:s}=this,h=e?s:n,f=h===y$||h===v$;return ae("calcite-button",{afterCreate:this._storeToggleButtonEl,afterUpdate:this._storeToggleButtonEl,class:Ye.widgetButton,kind:"neutral",label:i,onclick:this.toggle,scale:"s",title:i},h?ae("calcite-icon",{class:this.classes(Qr.icon,f&&Qr.iconFlip),icon:h,scale:"s"}):null)}_renderToggle(){return ae("div",{class:Qr.toggle},this._renderToggleButton(),this._renderBadgeNumber())}_renderContent(){const{content:e}=this;return typeof e=="string"?ae("div",{class:Qr.contentContainer,innerHTML:e,key:"content__string"}):Cg(e)?ae("div",{class:Qr.contentContainer,key:"content__widget"},e.render()):e instanceof HTMLElement?ae("div",{afterCreate:this._attachToNode,bind:e,class:Qr.contentContainer,key:"content__html-element"}):ope(e)?ae("div",{afterCreate:this._attachToNode,bind:e.domNode,class:Qr.contentContainer,key:"content__node"}):null}_attachToNode(e){const i=this;e.appendChild(i)}};_([T({readOnly:!0})],_i.prototype,"expandTitle",null),_([T()],_i.prototype,"_toggleButtonEl",void 0),_([T()],_i.prototype,"_displaySheet",null),_([T()],_i.prototype,"autoCollapse",null),_([T()],_i.prototype,"closeOnEsc",void 0),_([T()],_i.prototype,"collapseIcon",null),_([T()],_i.prototype,"collapseTooltip",void 0),_([T()],_i.prototype,"content",void 0),_([T()],_i.prototype,"expanded",null),_([T()],_i.prototype,"expandIcon",null),_([T()],_i.prototype,"expandTooltip",void 0),_([T()],_i.prototype,"group",null),_([T()],_i.prototype,"icon",null),_([T()],_i.prototype,"iconNumber",void 0),_([T()],_i.prototype,"label",null),_([T(),Sr("esri/widgets/Expand/t9n/Expand")],_i.prototype,"messages",void 0),_([T(),Sr("esri/t9n/common")],_i.prototype,"messagesCommon",void 0),_([T()],_i.prototype,"mode",void 0),_([T()],_i.prototype,"placement",void 0),_([T()],_i.prototype,"view",null),_([T({type:BF})],_i.prototype,"viewModel",void 0),_i=_([Y("esri.widgets.Expand")],_i);const b$=_i,Qt="esri-search",Vt={base:Qt,hasMultipleSources:`${Qt}--multiple-sources`,isLoading:`${Qt}--loading`,isSearching:`${Qt}--searching`,showSuggestions:`${Qt}--show-suggestions`,showSources:`${Qt}--sources`,showWarning:`${Qt}--warning`,container:`${Qt}__container`,input:`${Qt}__input`,inputContainer:`${Qt}__input-container`,form:`${Qt}__form`,submitButton:`${Qt}__submit-button`,sourcesButton:`${Qt}__sources-button`,sourcesButtonDown:`${Qt}__sources-button--down`,sourcesButtonUp:`${Qt}__sources-button--up`,clearButton:`${Qt}__clear-button`,sourceName:`${Qt}__source-name`,suggestionsMenu:`${Qt}__suggestions-menu`,suggestionList:`${Qt}__suggestions-list`,suggestionListCurrentLocation:`${Qt}__suggestions-list--current-location`,sourcesMenu:`${Qt}__sources-menu`,source:`${Qt}__source`,warningMenu:`${Qt}__warning-menu`,warningMenuBody:`${Qt}__warning-body`,warningMenuHeader:`${Qt}__warning-header`,warningMenuText:`${Qt}__warning-text`,noValueText:`${Qt}__no-value-text`},xu="esri-search-result-renderer",Su={base:xu,showMoreResults:`${xu}__more-results--show-more-results`,moreResults:`${xu}__more-results`,moreResultsList:`${xu}__more-results-list`,moreResultsHeader:`${xu}__more-results-header`,moreResultsItem:`${xu}__more-results-item`,moreResultsListHeader:`${xu}__more-results-list-header`},qF=96;function HMe(t,e){const i=t.extent,n=t.width,s=ir(i==null?void 0:i.spatialReference);return i&&n?i.width/n*s*wO*qF:0}function ape(t,e){return t/(ir(e)*wO*qF)}function lpe(t,e){const i=t.extent,n=t.width-(t.padding?t.padding.left+t.padding.right:0),s=ape(e,i.spatialReference);return i.clone().expand(s*n/i.width)}function BMe(t,e,i){return cpe(t,e)&&hpe(t,i)}function cpe(t,e){return e===0||gs(t,e)||t<e}function hpe(t,e){return e===0||gs(t,e)||t>e}function w$(t){var e;switch(t==null?void 0:t.type){case"point":return t;case"extent":return t.center;case"polygon":return t.centroid;case"multipoint":case"polyline":return(e=t.extent)==null?void 0:e.center;default:return null}}async function upe(t,e){var s,h;if(t.hasZ||e.type==="2d")return t;const i=(s=e.map)==null?void 0:s.ground;if(!(i!=null&&i.layers.length))return t;const{geometry:n}=await i.queryElevation(t,{cache:(h=e.basemapTerrain)==null?void 0:h.elevationQueryCache});return n}function V4(t,e,i){return WF(t.center,e,i)}function VT(t,e,i){switch(t==null?void 0:t.type){case"extent":return t;case"multipoint":case"polygon":case"polyline":return t.extent;case"point":return WF(t,e,i);default:return null}}function WF(t,e,i){const n=t.hasZ?t.z:void 0;if(e!=null&&e.map)return(i!=null?lpe(e,i):e.extent).clone().centerAt(t).set({zmax:n,zmin:n});const{x:s,y:h,spatialReference:f}=t;return new Lt({xmin:s-.25,ymin:h-.25,xmax:s+.25,ymax:h+.25,spatialReference:f,zmin:n,zmax:n})}function dpe(t){return t&&typeof t.highlight=="function"}function ZF(t,e,i){return t==null||t>=i&&(e===0||t<=e)}function UMe(t,e){if(e&&t){const{minScale:i,maxScale:n}=t;if(ppe(i,n))return ZF(e,i,n)}return!0}function ppe(t,e){return t!=null&&t>0||e!=null&&e>0}function qMe(t){return!(t!=null&&t.minScale)||!t.maxScale||t.minScale>=t.maxScale}function bb(t){return t!=null&&typeof t=="object"&&"createQuery"in t&&"queryFeatures"in t&&"layer"in t&&"view"in t}let Vi=class extends np(Fe){constructor(e){super(e),this.autoNavigate=null,this.filter=null,this.getResults=null,this.getSuggestions=null,this.maxResults=null,this.maxSuggestions=null,this.minSuggestCharacters=null,this.outFields=null,this.placeholder="",this.popupEnabled=null,this.popupTemplate=null,this.prefix="",this.resultGraphicEnabled=null,this.resultSymbol=null,this.suggestionsEnabled=null,this.suffix="",this.withinViewEnabled=!1,this.zoomScale=null}};_([T()],Vi.prototype,"autoNavigate",void 0),_([T()],Vi.prototype,"filter",void 0),_([T()],Vi.prototype,"getResults",void 0),_([T()],Vi.prototype,"getSuggestions",void 0),_([T()],Vi.prototype,"maxResults",void 0),_([T()],Vi.prototype,"maxSuggestions",void 0),_([T()],Vi.prototype,"minSuggestCharacters",void 0),_([T()],Vi.prototype,"outFields",void 0),_([T()],Vi.prototype,"placeholder",void 0),_([T()],Vi.prototype,"popupEnabled",void 0),_([T()],Vi.prototype,"popupTemplate",void 0),_([T()],Vi.prototype,"prefix",void 0),_([T()],Vi.prototype,"resultGraphicEnabled",void 0),_([T()],Vi.prototype,"resultSymbol",void 0),_([T()],Vi.prototype,"suggestionsEnabled",void 0),_([T()],Vi.prototype,"suffix",void 0),_([T()],Vi.prototype,"withinViewEnabled",void 0),_([T()],Vi.prototype,"zoomScale",void 0),Vi=_([Y("esri.widgets.Search.SearchSource")],Vi);const HT=Vi,fpe=/https?:\/\/services.*\.arcgis\.com/i,gpe=/(?:\{([^}]+)\})/g,Lf=()=>Ce.getLogger("esri.widgets.Search.support.layerSearchUtils");function mpe(t,e){const{exactMatch:i=!1,location:n,maxResults:s,spatialReference:h,source:f,sourceIndex:m,suggestResult:v,view:x}=t,{layer:M,filter:$,zoomScale:I}=f,P=x==null?void 0:x.scale,L=JF(f,x),z=e==null?void 0:e.signal;return YF(M).then(()=>{const F=M.popupTemplate;return F?F.getRequiredFields(M.fieldsIndex):null}).then(F=>{var ve,se,ce,ue;const{objectIdField:U,returnZ:W}=M,K=nj(f);if(!BT(M,K))throw Lf().error("invalid-field: displayField is invalid."),new fe("getResults():invalid-field","displayField is invalid.");const J=F!=null&&F.length?F:[K],te=f.outFields||J,ie=KF(te);if(te.includes(U)||ie||te.push(U),(ve=M.floorInfo)!=null&&ve.floorField&&te.push(M.floorInfo.floorField),!(ie||z2(M,te)))throw Lf().error("invalid-field: outField is invalid."),new fe("getResults():invalid-field","outField is invalid.");const le=M.createQuery(),{orderByFields:de}=f;if(de&&(le.orderByFields=de),h){le.outSpatialReference=h;const Ae=1/ir(h);Ae&&(le.maxAllowableOffset=Ae)}const xe=M.geometryType==="mesh"||M.geometryType==="multipatch",we=((ce=(se=M.capabilities)==null?void 0:se.data)==null?void 0:ce.supportsZ)&&!xe;if(le.returnZ=we&&W!==!1,le.returnGeometry=!0,le.multipatchOption=xe?"xyFootprint":null,te&&(le.outFields=te),n)le.geometry=n;else if(v.key)le.objectIds=[v.key];else{const Ae=f.searchFields||[K];if(!z2(M,Ae))throw Lf().error("invalid-field: search field is invalid."),new fe("getResults():invalid-field","search field is invalid.");if(ij(M)&&(le.num=s),L&&(le.geometry=L),!((ue=v.text)==null?void 0:ue.trim()))return[];const Ge=v.text,{prefix:He="",suffix:mt=""}=f,jt=rj(`${He}${Ge}${mt}`);tj(M)&&QF(M,Ae)&&!i&&Ge&&(le.fullText=ej({text:Ge,searchFields:Ae}));const ki=sj({searchTerm:jt,layer:M,searchFields:Ae,filter:$,exactMatch:i,query:le,type:"search"});if(le.where=ki,!XF(le))return[]}return M.queryFeatures(le,{signal:z}).then(Ae=>Cpe(Ae,x,f,m,K,P,I))})}function ype(t,e){const{source:i,spatialReference:n,view:s,suggestTerm:h,maxSuggestions:f,sourceIndex:m,exactMatch:v}=t,{layer:x,filter:M}=i,$=e==null?void 0:e.signal,I=JF(i,s);return YF(x).then(()=>{if(!ij(x))return[];const P=nj(i),L=i.searchFields||[P],z=[];i.suggestionTemplate?i.suggestionTemplate.replaceAll(gpe,(we,ve)=>(z.push(ve),we)):z.push(P);const F=KF(z);z.includes(x.objectIdField)||F||z.push(x.objectIdField);const U=BT(x,P),W=F||z2(x,z),K=z2(x,L);if(!U)throw Lf().error("invalid-field: displayField is invalid."),new fe("getSuggestions():invalid-field","displayField is invalid.");if(!W)throw Lf().error("invalid-field: outField is invalid."),new fe("getSuggestions():invalid-field","outField is invalid.");if(!K)throw Lf().error("invalid-field: search field is invalid."),new fe("getSuggestions():invalid-field","search field is invalid.");const J=x.createQuery(),{orderByFields:te}=i;if(te&&(J.orderByFields=te),J.outSpatialReference=n,J.returnGeometry=!1,J.num=f,J.outFields=z,I&&(J.geometry=I),!h.trim())return[];const{prefix:ie="",suffix:le=""}=i,de=rj(`${ie}${h}${le}`);tj(x)&&QF(x,L)&&!v&&h&&(J.fullText=ej({text:h,searchFields:L}));const xe=sj({searchTerm:de,layer:x,searchFields:L,filter:M,exactMatch:v,query:J,type:"suggest"});return J.where=xe,XF(J)?x.queryFeatures(J,{signal:$}).then(we=>Epe(we,i,m,P)):[]})}function JF(t,e){const{filter:i,withinViewEnabled:n}=t,s=e==null?void 0:e.extent;return(i==null?void 0:i.geometry)??(n&&s?s:void 0)}function KF(t){return t&&t.includes("*")}async function YF(t){t&&await t.load()}function XF(t){return!(!t.fullText&&!t.where)}function QF(t,e){const i=t==null?void 0:t.indexes;return!i||!(e!=null&&e.length)?!1:i.filter(n=>n.indexType==="FullText").some(n=>{var h;const s=((h=n.fields)==null?void 0:h.split(",").map(f=>f.trim().toLowerCase()))||[];return e.every(f=>s.includes(f.toLowerCase()))})}function ej({text:t,searchFields:e}){return t.trim().split(" ").filter(i=>!!i.trim()).map(i=>new vD({onFields:e,searchTerm:i,searchType:"prefix"}))}function tj(t){var e,i;return((i=(e=t==null?void 0:t.capabilities)==null?void 0:e.query)==null?void 0:i.supportsFullTextSearch)??!1}function ij(t){var e,i;return((i=(e=t==null?void 0:t.capabilities)==null?void 0:e.query)==null?void 0:i.supportsPagination)??!1}function vpe(t){var e,i,n;return((n=(i=(e=t==null?void 0:t.fieldsIndex)==null?void 0:e.fields)==null?void 0:i.find(s=>s.type==="string"))==null?void 0:n.name)??""}function nj(t){return t.displayField||t.layer.displayField||vpe(t.layer)}function z2(t,e){return!(!t||!(e!=null&&e.length))&&e.every(i=>BT(t,i))}function BT(t,e){return!!t.getField(e)}function bpe(t){for(let e=0;e<t.length;e++)if(t.charCodeAt(e)>255)return!0;return!1}function wpe({codedValues:t},e,i){return zg(t??[],n=>{const s=n.name,h=i?s:s.toLowerCase();return(i?e:e.toLowerCase())===h?n.code.toString():null})??null}function rj(t){return t.replaceAll("'","''")}function n1(t,e){const i=e==null?void 0:e.where;return i?`(${t}) AND (${i})`:t}function _pe({currentTerm:t,field:e,filter:i,exactMatch:n,url:s,type:h}){const f=e==null?void 0:e.type,m=e==null?void 0:e.name;if(f==="string"||f==="date"||f==="global-id"){const v=fpe.test(s??""),x=v&&bpe(t)?"N":"";return n1(n&&h==="search"?`${m} = ${x}'${t}'`:v?`${m} LIKE ${x}${`'${t}%'`}`:`${`LOWER(${m})`} LIKE ${x}${`'${t.toLowerCase()}%'`}`,i)}if(f==="oid"||f==="small-integer"||f==="integer"||f==="single"||f==="double"){const v=Number(t);return isNaN(v)?null:n1(`${m} = ${v}`,i)}return n1(`${m} = ${t}`,i)}function xpe(t,e){return t?` OR (${e})`:`(${e})`}function sj({searchTerm:t,layer:e,searchFields:i,filter:n,exactMatch:s,query:h,type:f}){const{definitionExpression:m,url:v}=e;let x="";return!h.fullText&&t&&i&&i.forEach(M=>{const $=e.getField(M),I=typeof e.getFieldDomain=="function"&&e.getFieldDomain(M),P=(I&&I.type==="coded-value"?wpe(I,t,s):null)||t||null;if(P!==null){const L=_pe({currentTerm:P,field:$,filter:n,exactMatch:s,url:v,type:f});L&&(x+=xpe(x,L))}}),m&&x?`(${m}) AND (${x})`:m||x}function Spe(t,e){let i=null;const{codedValues:n}=t;return n&&n.length&&n.some(s=>s.code===e&&(i=s.name,!0)),i}function Tpe(t,e){return t[e]??t[Object.keys(t).find(i=>i.toLowerCase()===e.toLowerCase())]}function oj(t,e,i){const n=t.sourceLayer,{attributes:s}=t,h=typeof n.getFieldDomain=="function"&&n.getFieldDomain(i);if(e)return jS(e,s);if(i&&s){const f=n.getField(i),m=Tpe(s,i);return m==null?"":h&&h.type==="coded-value"?Spe(h,m)??"":(f==null?void 0:f.type)==="date"?Kh(new Date(m)):typeof m=="number"?m.toString():typeof m!="string"?"":m.trim()}return""}function Mpe(t,e,i,n){const s=t.sourceLayer,{attributes:h}=t,{objectIdField:f}=s,m=f?h[f]:null;return{text:oj(t,e.suggestionTemplate,n),key:m,sourceIndex:i}}function Epe(t,e,i,n){return t.features.map(s=>Mpe(s,e,i,n))}function kpe(t){return t!=null&&t.minScale!=null&&t.maxScale!=null}function $pe(t,e,i,n,s,h,f){const m=t.clone(),v=t.sourceLayer,x=v==null?void 0:v.objectIdField,M=x?t.attributes[x]:null,$=oj(t,i.searchTemplate,s);h!=null&&kpe(v)&&(v.minScale&&v.minScale<h?h=v.minScale:v.maxScale&&v.maxScale>h&&(h=v.maxScale));const I=m.geometry?VT(m.geometry,e??void 0,h??void 0):void 0,P=typeof f=="number"&&I?V4(_e(I),e??void 0,f):I,L=t.clone();return P!=null&&(L.geometry=En.fromExtent(P)),{extent:P,target:L,feature:m,key:M,name:$,sourceIndex:n}}function Cpe(t,e,i,n,s,h,f){return t.features.map(m=>$pe(m,e,i,n,s,h,f))}var H4;let Fo=H4=class extends HT{constructor(t){super(t),this.displayField=null,this.exactMatch=null,this.orderByFields=null,this.searchFields=null,this.searchTemplate=null,this.suggestionTemplate=null,this.getResults=(e,i)=>mpe({source:this,...e},i),this.getSuggestions=(e,i)=>ype({source:this,...e},i)}set layer(t){this._set("layer",t),t&&t.load().catch(()=>{})}get name(){return this._getLayerTitle()??""}set name(t){this._overrideIfSome("name",t)}clone(){return new H4({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?_e(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,layer:this.layer,searchFields:this.searchFields?_e(this.searchFields):null,suggestionTemplate:this.suggestionTemplate,zoomScale:this.zoomScale})}_getFirstStringField(){var t,e;return((e=(t=this.layer.fieldsIndex)==null?void 0:t.fields.find(i=>i.type==="string"))==null?void 0:e.name)??""}_getDisplayField(){return this.displayField||this.layer.displayField||this._getFirstStringField()}_getSearchFieldsString(){const{layer:t,searchFields:e}=this;return t.loaded?`: ${(e||[this._getDisplayField()]).map(i=>{const n=t.getField(i);return(n==null?void 0:n.alias)||i}).join(", ")}`:""}_getLayerTitle(){const{layer:t}=this;if(!t)return;const{title:e}=t;return e?`${e}${this._getSearchFieldsString()}`:void 0}};_([T({json:{read:{source:"field.name"},write:{target:"field.name"}}})],Fo.prototype,"displayField",void 0),_([T({json:{read:{source:"field.exactMatch"},write:{target:"field.exactMatch"}}})],Fo.prototype,"exactMatch",void 0),_([T({value:null})],Fo.prototype,"layer",null),_([T()],Fo.prototype,"name",null),_([T({type:[String],json:{write:!0}})],Fo.prototype,"orderByFields",void 0),_([T()],Fo.prototype,"searchFields",void 0),_([T()],Fo.prototype,"searchTemplate",void 0),_([T()],Fo.prototype,"suggestionTemplate",void 0),Fo=H4=_([Y("esri.widgets.Search.LayerSearchSource")],Fo);const rf=Fo;function Ipe(t){return!!t&&typeof t.x=="number"&&typeof t.y=="number"}function Ape(t){return t&&typeof t.xmin=="number"&&typeof t.ymin=="number"&&typeof t.xmax=="number"&&typeof t.ymax=="number"}let gh=class extends Fe{constructor(e){super(e),this.address=null,this.attributes=null,this.extent=null,this.location=null,this.score=null}};_([T({type:String,json:{write:!0}})],gh.prototype,"address",void 0),_([T({type:Object,json:{write:!0}})],gh.prototype,"attributes",void 0),_([T({type:Lt,json:{write:!0}})],gh.prototype,"extent",void 0),_([T({type:De,json:{write:!0}})],gh.prototype,"location",void 0),_([T({type:Number,json:{write:!0}})],gh.prototype,"score",void 0),gh=_([Y("esri.rest.support.AddressCandidate")],gh);const aj=gh,UT={type:String,json:{read:{source:"token"},write:{target:"token"}}};let An=class extends Fe{constructor(e){super(e),this.address=null,this.apiKey=null,this.categories=null,this.countryCode=null,this.forStorage=null,this.location=null,this.locationType=null,this.magicKey=null,this.maxLocations=null,this.outFields=null,this.outSpatialReference=null,this.searchExtent=null}};_([T({type:Object,json:{write:!0}})],An.prototype,"address",void 0),_([T(UT)],An.prototype,"apiKey",void 0),_([T({type:[String],json:{read:{source:"category",reader:t=>t?t.split(","):null},write:{target:"category",writer:(t,e)=>{e.category=t?t.join(","):null}}}})],An.prototype,"categories",void 0),_([T({type:String,json:{write:!0}})],An.prototype,"countryCode",void 0),_([T({type:Boolean,json:{write:!0}})],An.prototype,"forStorage",void 0),_([T({type:De,json:{write:{writer:(t,e)=>{e.location=t?t.clone().normalize():null}}}})],An.prototype,"location",void 0),_([T({type:String,json:{write:!0}})],An.prototype,"locationType",void 0),_([T({type:String,json:{write:!0}})],An.prototype,"magicKey",void 0),_([T({type:Number,json:{write:!0}})],An.prototype,"maxLocations",void 0),_([T({type:[String],json:{write:{writer:(t,e)=>{e.outFields=t?t.join(","):null}}}})],An.prototype,"outFields",void 0),_([T({type:tt,json:{read:{source:"outSR"},write:{target:"outSR"}}})],An.prototype,"outSpatialReference",void 0),_([T({type:Lt,json:{write:{writer:(t,e)=>{const i=t?t.shiftCentralMeridian():null;e.searchExtent=i}}}})],An.prototype,"searchExtent",void 0),An=_([Y("esri.rest.support.AddressToLocationsParameters")],An),An.from=wn(An);const lj=An;async function Ope(t,e,i){e=lj.from(e);const n=Bm(t),{address:s,...h}=e.toJSON(),f={...s,...h,f:"json"},m=h3({...n.query,...f}),v=c3(m,i),x=`${n.path}/findAddressCandidates`;return zi(x,v).then(Ppe)}function Ppe({data:t}){if(!t)return[];const{candidates:e,spatialReference:i}=t;return e?e.map(n=>{if(!n)return;const{extent:s,location:h}=n,f=!s||Ape(s);return Ipe(h)&&f?(s&&(s.spatialReference=i),h&&(h.spatialReference=i),aj.fromJSON(n)):void 0}):[]}let jl=class extends Fe{constructor(e){super(e),this.apiKey=null,this.location=null,this.locationType=null,this.outSpatialReference=null}};_([T(UT)],jl.prototype,"apiKey",void 0),_([T({type:De,json:{write:{writer:(t,e)=>{const i=t?t.clone().normalize():null,n=i!==void 0;e.location=n?i:null}}}})],jl.prototype,"location",void 0),_([T({type:String,json:{write:!0}})],jl.prototype,"locationType",void 0),_([T({type:tt,json:{read:{source:"outSR"},write:{target:"outSR"}}})],jl.prototype,"outSpatialReference",void 0),jl=_([Y("esri.rest.support.LocationToAddressParameters")],jl),jl.from=wn(jl);const cj=jl;async function Rpe(t,e,i){e=cj.from(e);const n=Bm(t),s={...e.toJSON(),f:"json"},h=h3({...n.query,...s}),f=c3(h,i),m=`${n.path}/reverseGeocode`;return zi(m,f).then(Lpe)}function Lpe({data:t}){if(!t)return;const{address:e,location:i}=t,n=(e==null?void 0:e.Match_addr)||"";return aj.fromJSON({address:n,attributes:e||{},location:i,score:100})}let sf=class extends Fe{constructor(e){super(e),this.isCollection=null,this.magicKey=null,this.text=null}};_([T({type:Boolean,json:{write:!0}})],sf.prototype,"isCollection",void 0),_([T({type:String,json:{write:!0}})],sf.prototype,"magicKey",void 0),_([T({type:String,json:{write:!0}})],sf.prototype,"text",void 0),sf=_([Y("esri.rest.support.SuggestionCandidate")],sf);const Npe=sf;let os=class extends Fe{constructor(e){super(e),this.apiKey=null,this.categories=null,this.countryCode=null,this.location=null,this.maxSuggestions=null,this.outSpatialReference=null,this.searchExtent=null,this.text=null}};_([T(UT)],os.prototype,"apiKey",void 0),_([T({type:[String],json:{read:{source:"category",reader:t=>t?t.split(","):null},write:{target:"category",writer:(t,e)=>{e.category=t?t.join(","):null}}}})],os.prototype,"categories",void 0),_([T({type:String,json:{write:!0}})],os.prototype,"countryCode",void 0),_([T({type:De,json:{write:{writer:(t,e)=>{e.location=t?t.clone().normalize():null}}}})],os.prototype,"location",void 0),_([T({type:Number,json:{write:!0}})],os.prototype,"maxSuggestions",void 0),_([T({type:tt,json:{read:{source:"outSR"},write:{target:"outSR"}}})],os.prototype,"outSpatialReference",void 0),_([T({type:Lt,json:{write:{writer:(t,e)=>{const i=t?t.shiftCentralMeridian():null;e.searchExtent=JSON.stringify(i)}}}})],os.prototype,"searchExtent",void 0),_([T({type:String,json:{write:!0}})],os.prototype,"text",void 0),os=_([Y("esri.rest.support.SuggestLocationsParameters")],os),os.from=wn(os);const hj=os;async function Dpe(t,e,i){const n=Bm(t),s={...(e=hj.from(e)).toJSON(),f:"json"},h=h3({...n.query,...s}),f=c3(h,i),m=`${n.path}/suggest`;return zi(m,f).then(zpe)}function zpe(t){const{data:e}=t;if(!e)return[];const{suggestions:i}=e;return i?i.map(n=>new Npe(n)):[]}const Fpe="Single Line Input",jpe=3e5;function Gpe(t,e){return t.location?qpe(t,e):Wpe(t,e)}function uj(t,e){var n;if(e.localSearchDisabled)return null;const i=t==null?void 0:t.scale;return typeof i=="number"&&i<=jpe?(n=t==null?void 0:t.extent)==null?void 0:n.center:null}async function Vpe(t,e){const{source:i,spatialReference:n,view:s,suggestTerm:h,maxSuggestions:f,sourceIndex:m}=t,v=new hj,{apiKey:x,url:M}=i,$=dj(i,s),I=e==null?void 0:e.signal;if(!M)return null;x&&(v.apiKey=x),i.categories&&(v.categories=i.categories),n&&(v.outSpatialReference=n);const P=uj(s,i);if(P&&(v.location=P),!h.trim())return null;const{prefix:L="",suffix:z=""}=i,F=`${L}${h}${z}`;return v.text=F,$&&(v.searchExtent=$),v.maxSuggestions=f,i.countryCode&&(v.countryCode=i.countryCode),Dpe(M,v,{signal:I}).then(U=>Jpe(U,m))}function Hpe(t){return!!t&&/(?:geocode-api\.arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(t)}function Bpe(t){return!!t&&/(?:\/servers\/[\da-z.-]+\/rest\/services\/world\/geocodeserver).*/i.test(t)}function _$(t){return!!t&&/(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(t)}const Upe="https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer";async function qpe(t,e){const{source:i,spatialReference:n,location:s,sourceIndex:h,view:f}=t,{apiKey:m,url:v,zoomScale:x,defaultZoomScale:M}=i;if(v==null)return[];const $=f==null?void 0:f.scale,I=e==null?void 0:e.signal,P=new cj({location:s});m&&(P.apiKey=m),n&&(P.outSpatialReference=n);try{return pj([await Rpe(v,P,{signal:I})],{sourceIndex:h,scale:$,view:f,zoomScale:x,defaultZoomScale:M})}catch{return[]}}function dj(t,e){const{filter:i,withinViewEnabled:n}=t,s=e==null?void 0:e.scale,h=e==null?void 0:e.extent,f=i==null?void 0:i.geometry;return(f?VT(f,e??void 0,s):void 0)||(n&&h?h:void 0)}async function Wpe(t,e){var le;const{source:i,suggestResult:n,spatialReference:s,view:h,maxResults:f,sourceIndex:m}=t,v=i==null?void 0:i.zoomScale,x=i==null?void 0:i.defaultZoomScale;if(!((le=n.text)==null?void 0:le.trim()))return null;const $=!n.key&&i.prefix?i.prefix:"",I=!n.key&&i.suffix?i.suffix:"",P=`${$}${n.text}${I}`,L=new lj,{apiKey:z,url:F}=i,U=h==null?void 0:h.scale,W=dj(i,h),K=e==null?void 0:e.signal;if(z&&(L.apiKey=z),!F)return null;i.categories&&(L.categories=i.categories),i.locationType&&(L.locationType=i.locationType),s&&(L.outSpatialReference=s);const J=uj(h,i);J&&(L.location=J),L.maxLocations=f,W&&(L.searchExtent=W),i.countryCode&&(L.countryCode=i.countryCode);const{key:te}=n,ie=`${te}`;return te&&(L.magicKey=ie),L.address={},L.address[i.singleLineFieldName||Fpe]=P,i.outFields&&(L.outFields=i.outFields),Ope(F,L,{signal:K}).then(de=>pj(de,{key:ie,scale:U,sourceIndex:m,view:h,zoomScale:v,defaultZoomScale:x}))}function Zpe(t,e){return{text:t.text,key:t.magicKey,sourceIndex:e}}function Jpe(t,e){return t.map(i=>Zpe(i,e))}function Kpe(t,e){const{key:i,scale:n,sourceIndex:s,view:h,zoomScale:f,defaultZoomScale:m}=e,{attributes:v,extent:x,location:M,address:$}=t,I=new Ud({geometry:M,attributes:v}),P=x||M,L=P?VT(P,h??void 0,n??void 0):void 0,z=L?typeof f=="number"?V4(L,h??void 0,f):typeof m=="number"&&(P==null?void 0:P.type)==="point"?V4(L,h??void 0,m):L:null,F=M?`${M.x},${M.y}`:"",U=$||F,W=I.clone();return z!=null&&(W.geometry=En.fromExtent(z)),{extent:z,feature:I,target:W,key:i,name:U,sourceIndex:s}}function pj(t,e){return t.filter(Boolean).map(i=>Kpe(i,e))}var B4;let Bn=B4=class extends HT{constructor(t){super(t),this.apiKey=null,this.categories=null,this.countryCode=null,this.defaultZoomScale=null,this.localSearchDisabled=!1,this.locationType=null,this.name="",this.placeholder="",this.searchTemplate="",this.singleLineFieldName=null,this.suggestionsEnabled=null,this.url=null,this.zoomScale=null,this.getResults=(e,i)=>Gpe({source:this,...e},i),this.getSuggestions=(e,i)=>Vpe({source:this,...e},i)}clone(){return new B4({apiKey:this.apiKey,autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?_e(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,categories:this.categories?_e(this.categories):null,countryCode:this.countryCode,locationType:this.locationType,searchTemplate:this.searchTemplate,singleLineFieldName:this.singleLineFieldName,zoomScale:this.zoomScale})}};_([T()],Bn.prototype,"apiKey",void 0),_([T()],Bn.prototype,"categories",void 0),_([T()],Bn.prototype,"countryCode",void 0),_([T({json:{write:!0}})],Bn.prototype,"defaultZoomScale",void 0),_([T()],Bn.prototype,"localSearchDisabled",void 0),_([T()],Bn.prototype,"locationType",void 0),_([T({json:{write:!0}})],Bn.prototype,"name",void 0),_([T({json:{write:!0}})],Bn.prototype,"placeholder",void 0),_([T()],Bn.prototype,"searchTemplate",void 0),_([T({json:{write:!0}})],Bn.prototype,"singleLineFieldName",void 0),_([T({json:{read:{source:"suggest"},write:{target:"suggest"}}})],Bn.prototype,"suggestionsEnabled",void 0),_([T({json:{write:!0}})],Bn.prototype,"url",void 0),_([T({json:{write:!0}})],Bn.prototype,"zoomScale",void 0),Bn=B4=_([Y("esri.widgets.Search.LocatorSearchSource")],Bn);const fj=Bn;let ed=class extends Fe{constructor(e){super(e),this.geometries=[],this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map(s=>s.toJSON()),i=this.geometries[0],n={};return n.outSR=Qb(this.outSpatialReference),n.inSR=Qb(i.spatialReference),n.geometries=JSON.stringify({geometryType:Em(i),geometries:e}),this.transformation&&(n.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),this.transformForward!=null&&(n.transformForward=this.transformForward),n}};_([T()],ed.prototype,"geometries",void 0),_([T({json:{read:{source:"outSR"}}})],ed.prototype,"outSpatialReference",void 0),_([T()],ed.prototype,"transformation",void 0),_([T()],ed.prototype,"transformForward",void 0),ed=_([Y("esri.rest.support.ProjectParameters")],ed);const gj=ed,Ype=wn(gj);async function Xpe(t,e,i){e=Ype(e);const n=Bm(t),s={...n.query,f:"json",...e.toJSON()},h=e.outSpatialReference,f=Em(e.geometries[0]),m=c3(s,i);return zi(n.path+"/project",m).then(({data:{geometries:v}})=>oz(v,f,h))}const mj=()=>Ce.getLogger("esri.widgets.support.geolocationUtils"),Qpe={maximumAge:0,timeout:15e3,enableHighAccuracy:!0};function efe(){const t=pe("esri-geolocation");return t||mj().warn("geolocation-unsupported","Geolocation unsupported."),t}function tfe(){const t=window.isSecureContext;return t||mj().warn("insecure-context","Geolocation requires a secure origin."),t}function x$(){return efe()&&tfe()}function ife(t){return t||(t=Qpe),new Promise((i,n)=>{setTimeout(()=>n(new fe("geolocation:timeout","getting the current geolocation position timed out")),15e3),navigator.geolocation.getCurrentPosition(i,n,t??void 0)})}function nfe(t,e){const{position:i,view:n}=t,s=rfe(i),h=s==null?void 0:s.coords;if(!h)throw new fe("geometry-service:no-coords","Geolocation has no coordinates");return ofe(sfe(h),n,e)}function rfe(t){const e=t&&t.coords||{},i={accuracy:e.accuracy,altitude:e.altitude,altitudeAccuracy:e.altitudeAccuracy,heading:e.heading,latitude:e.latitude,longitude:e.longitude,speed:e.speed};return t&&{coords:i,timestamp:t.timestamp}}function sfe({longitude:t,latitude:e,altitude:i}){return new De({longitude:t,latitude:e,z:i||void 0,spatialReference:{wkid:4326}})}function ofe(t,e,i){if(!e)return Promise.resolve(t);const n=e.spatialReference;return n.isWGS84?Promise.resolve(t):n.isWebMercator?Promise.resolve(hc(t)):afe(i).then(s=>{if(!s)throw new fe("geometry-service:missing-url","Geometry service URL is missing");const h=new gj({geometries:[t],outSpatialReference:n});return Xpe(s,h,i).then(f=>f[0])})}function afe(t){if(vt.geometryServiceUrl)return Promise.resolve(vt.geometryServiceUrl);const e=$s.getDefault();return e.load(t).catch(()=>{}).then(()=>{var i,n;return(n=(i=e.helperServices)==null?void 0:i.geometry)==null?void 0:n.url})}function Fn(t,e){return t.hasOwnProperty(e)&&t[e]!=null&&t[e]!==""}const lfe=()=>VS("esri/widgets/Search/t9n/Search"),S$="highlight",wb=Pe.ofType({key:t=>t.layer?"layer":"locator",base:HT,typeMap:{layer:rf,locator:fj}}),T$=tt.WGS84,cfe="esri/images/search/search-symbol-32.png",hfe=/<[\s\S]*?>/g,of=-1;let at=class extends MF(ln.EventedMixin(Re)){constructor(e){super(e),this._gotoController=null,this._searching=null,this._updatingPromise=null,this._createdFeatureLayers=[],this.autoNavigate=!0,this.autoSelect=!0,this.defaultPopupTemplate=null,this.defaultSources=new wb,this.defaultSymbols={point:new jm({url:Tt(cfe),size:24,width:24,height:24}),polyline:new Ec({color:[130,130,130,1],width:2}),polygon:new Gm({color:[235,235,235,.4],outline:{color:[130,130,130,1],width:2}})},this.includeDefaultSources=!0,this.maxInputLength=128,this.maxResults=6,this.maxSuggestions=6,this.messages=null,this.minSuggestCharacters=3,this.popupEnabled=!0,this.popupTemplate=null,this.portal=$s.getDefault(),this.resultCount=null,this.resultGraphicEnabled=!0,this.resultGraphic=null,this.results=null,this.selectedSuggestion=null,this.searchAllEnabled=!0,this.selectedResult=null,this.sources=new wb,this.suggestionDelay=350,this.suggestionCount=null,this.suggestions=null,this.suggestionsEnabled=!0,this.view=null}initialize(){const e=async()=>{const i=await lfe();this.messages=i,this.defaultPopupTemplate=new aT({title:i.searchResult,content:"{Match_addr}"})};e(),this.addHandles([Ee(()=>[this.includeDefaultSources,this.view,this.portal],()=>this._update(),Pt),$S(e)])}destroy(){this._destroyFeatureLayers(),this._abortGoTo(),this.clearGraphics()}get activeSource(){return this.allSources.at(this.activeSourceIndex)??null}get activeSourceIndex(){return this.allSources.length===1||!this.searchAllEnabled?0:of}set activeSourceIndex(e){this._overrideIfSome("activeSourceIndex",e)}get allPlaceholder(){var e;return(e=this.messages)==null?void 0:e.allPlaceholder}set allPlaceholder(e){this._overrideIfSome("allPlaceholder",e)}get allSources(){const{sources:e,defaultSources:i,includeDefaultSources:n}=this,s=typeof n=="function"?n.call(null,{sources:e,defaultSources:i}):n?i.concat(e):e,h=this._get("allSources")||new wb;return h.removeAll(),h.addMany(s.filter(Boolean)),h}get locationEnabled(){return this._get("locationEnabled")||x$()}set locationEnabled(e){if(e===void 0)return void this._clearOverride("locationEnabled");const i=x$();if(e&&!i){const n=new fe("locationEnabled:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});Ce.getLogger(this).error(n)}this._override("locationEnabled",!!e&&i)}get placeholder(){const{allSources:e,activeSourceIndex:i,allPlaceholder:n}=this;if(i===of)return n??"";const s=e.at(i);return(s==null?void 0:s.placeholder)??""}set searchTerm(e){this._set("searchTerm",e||""),this.clearGraphics(),this.selectedSuggestion&&this.selectedSuggestion.text!==e&&this._set("selectedSuggestion",null),e===""&&this._clear()}get searchTerm(){return this._get("searchTerm")||""}get state(){return this._searching?"searching":this.updating?"loading":this.allSources.length===0?"disabled":"ready"}get updating(){return this._updatingPromise!=null}clear(){this.searchTerm=""}clearGraphics(){this._removeHighlight(),this._closePopup();const{view:e,resultGraphic:i}=this;e&&i&&e.graphics.remove(i),this._set("resultGraphic",null)}search(e,i){this.emit("search-start"),this.clearGraphics();const n=this._createSuggestionForSearch(e),s=(async()=>{var h;try{await this.when();const f=await this._getResultsFromSources(n,i);if((h=i==null?void 0:i.signal)!=null&&h.aborted)return null;const m={activeSourceIndex:this.activeSourceIndex,searchTerm:n.text??"",numResults:0,numErrors:0,errors:[],results:[]};this._formatResponse(m,f,n);const v=this._getFirstResult(m.results),x=n.location&&v?v.name:n.text,M=x==null?void 0:x.replace(hfe,"");return this._set("searchTerm",M),(n.key&&typeof n.sourceIndex=="number"||n.location)&&this._set("selectedSuggestion",n),this._set("results",m.results),this._set("resultCount",m.results.reduce(($,I)=>{var P;return $+(((P=I.results)==null?void 0:P.length)??0)},0)),this.emit("search-complete",m),await this._selectFirstResult(v),m}finally{this._clearSearching()}})();return this._searching=s,s}async searchNearby(e){if(!this.locationEnabled){const n=new fe("searchNearby:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});throw Ce.getLogger(this).error(n),n}const i=(async()=>{try{const n=await ife(),s=await nfe({position:n,view:this.view},e);return await this.search(s,e)}finally{this._clearSearching()}})();return this._searching=i,i}async select(e){if(this.clearGraphics(),!e){const we=new fe("select:missing-parameter","Cannot select without a searchResult.",{searchResult:e});throw Ce.getLogger(this).error(we),we}const{view:i}=this,n=Fn(e,"sourceIndex")?e.sourceIndex:this._getSourceIndexOfResult(e),s=n!=null?this.allSources.at(n):null;if(!s){const we=new fe("select:missing-source","Cannot select without a source.",{source:s});throw Ce.getLogger(this).error(we),we}const h=s instanceof rf?this._getLayerSourcePopupTemplate(s):s.popupTemplate,f=s.resultSymbol||this._getDefaultSymbol(e),m=Fn(s,"resultGraphicEnabled")?s.resultGraphicEnabled:this.resultGraphicEnabled,v=Fn(s,"autoNavigate")?s.autoNavigate:this.autoNavigate,x=Fn(s,"popupEnabled")?s.popupEnabled:this.popupEnabled,M=x?h||this.popupTemplate||this.defaultPopupTemplate:null,{feature:$}=e;if(!$){const we=new fe("select:missing-feature","Cannot select without a feature.",{feature:$});throw Ce.getLogger(this).error(we),we}const{attributes:I,geometry:P,layer:L,sourceLayer:z}=$,F=P?w$(P):null,U={layerViewQuery:this._getLayerView($),elevationQuery:i&&F!=null?upe(F,i):Promise.resolve(F)},W=await vd(U),K=W.layerViewQuery.value,J=W.elevationQuery.value;f instanceof Vm&&(f.text=e.name);const te=i&&v?e.target||e.extent:null;await(te!=null?this._goToSearchResult(te):Promise.resolve());const le=K?$:new Ud({geometry:P,symbol:f,attributes:I,layer:L,sourceLayer:z,popupTemplate:M}),de=i==null?void 0:i.popup,xe=de&&x&&le.getEffectivePopupTemplate(de.defaultPopupTemplateEnabled);return xe&&await i.openPopup({features:[le],location:J}),K&&dpe(K)&&!xe&&this._highlightFeature({graphic:le,layerView:K}),!K&&m&&i&&i.graphics.push(le),this._setResultFloor(e),this._set("selectedResult",e),this._set("resultGraphic",le),this.emit("select-result",{result:e,source:s,sourceIndex:n}),e}async suggest(e,i,n){const s=e||this.searchTerm;this.emit("suggest-start",{searchTerm:s}),await this._suggestTimer(i,n);const h=await this._suggestImmediate(s,n);return this._set("suggestions",h==null?void 0:h.results),this._set("suggestionCount",(h==null?void 0:h.results.reduce((f,m)=>{var v;return f+(((v=m.results)==null?void 0:v.length)??0)},0))??null),this.emit("suggest-complete",h),h}async when(){await Zh(()=>!this.updating)}async _update(){const{portal:e,view:i}=this;if(this.includeDefaultSources){const n=this._updatingPromise=vd([e==null?void 0:e.load(),i==null?void 0:i.when()]);if(this.destroyed||(await n,n!==this._updatingPromise))return}await Zh(()=>this.messages),this.destroyed||this._updateDefaultSources(),this._updatingPromise=null}_clearSearching(){this._searching=null}_convertHelperServices(){var i,n;const e=(n=(i=this.portal)==null?void 0:i.helperServices)==null?void 0:n.geocode;return e?e.map(s=>{var v;if(s.placefinding===!1)return;const h=vt.apiKey&&_$(s.url)?{url:Upe}:null,f=fj.fromJSON({...s,...h}),m=f.url;if(_$(m)||Bpe(m)||Hpe(m)){const x=f.outFields??["Addr_type","Match_addr","StAddr","City"],M=(f.placeholder||((v=this.messages)==null?void 0:v.placeholder))??"",$=typeof f.defaultZoomScale=="number"?f.defaultZoomScale:2500;f.singleLineFieldName="SingleLine",f.outFields=x,f.placeholder=M,f.defaultZoomScale=$}return f.singleLineFieldName?f:void 0}).filter(ji):[]}_destroyFeatureLayers(){this._createdFeatureLayers.forEach(e=>e==null?void 0:e.destroy()),this._createdFeatureLayers=[]}_getLayerSources(e,i){var s;const n=(s=this.view)==null?void 0:s.map;return e.map(h=>{const f=n.findLayerById(h.id);if(!f)return;const m=this._getLayerJSON(h),v=rf.fromJSON(m);return v.placeholder=i,this._getLayer(f,m).then(x=>{v.layer=x}),v}).filter(ji).toArray()}_getTableSources(e,i){var s;const n=(s=this.view)==null?void 0:s.map;return e.map(h=>{if(!h.id)return;const f=n.findTableById(h.id);if(!f)return;const m=this._getLayerJSON(h),v=rf.fromJSON(m);return v.placeholder=i,this._getLayer(f,m).then(x=>{v.layer=x}),v}).filter(ji).toArray()}_convertApplicationProperties(){var m,v,x;const e=(m=this.view)==null?void 0:m.map,i=(x=(v=e==null?void 0:e.applicationProperties)==null?void 0:v.viewing)==null?void 0:x.search;if(!i)return[];const{enabled:n,hintText:s,layers:h,tables:f}=i;return n?[...this._getLayerSources(h,s),...this._getTableSources(f,s)]:[]}async _getSubLayer(e,i){var h;if(await e.load(),!e.allSublayers)throw new Error;const n=e.allSublayers.find(f=>f.id===i.subLayer);if(!n)throw new Error;const s=await((h=n.createFeatureLayer)==null?void 0:h.call(n));if(!s)throw new Error;return this._createdFeatureLayers.push(s),s}async _getBuildingSubLayer(e,i){await e.load();const n=e.allSublayers.find(s=>s.id===i.subLayer);if((n==null?void 0:n.type)!=="building-component")throw new Error;if(await n.load(),n.associatedLayer==null)throw new Error;return await n.associatedLayer.load(),n}async _getLayer(e,i){if(e.type==="feature"||e.type==="scene"||e.type==="csv"||e.type==="geojson"||e.type==="ogc-feature")return e;if(e.type==="map-image")try{return await this._getSubLayer(e,i)}catch{const s=new fe("search:create-featurelayer","Could not create a FeatureLayer from the MapImageLayer",{layer:e});return Ce.getLogger(this).error(s),null}return e.type==="building-scene"?this._getBuildingSubLayer(e,i):null}_getLayerJSON(e){return typeof e.toJSON=="function"?e.toJSON():e}_updateDefaultSources(){const{defaultSources:e,includeDefaultSources:i}=this;this._destroyFeatureLayers(),e.removeAll(),i&&e.addMany([...this._convertApplicationProperties(),...this._convertHelperServices()])}_abortGoTo(){this._gotoController&&this._gotoController.abort(),this._gotoController=null}_clear(){this._abortGoTo(),this._set("resultCount",null),this._set("results",null),this._set("suggestions",null),this._set("suggestionCount",null),this._set("selectedResult",null),this._set("selectedSuggestion",null),this.emit("search-clear")}_closePopup(){var h;const e=(h=this.view)==null?void 0:h.popup,{resultGraphic:i}=this;if(!e||!i)return;const n="selectedFeature"in e,s=n?e.selectedFeature:null;n&&s&&s===i&&e.close()}_suggestTimer(e,i){const n=e??this.suggestionDelay;return F6(n,null,i==null?void 0:i.signal)}_createLocationForSearch(e){return e instanceof Ud&&e.geometry?w$(e.geometry):e instanceof De?e:Array.isArray(e)&&e.length===2?new De({longitude:e[0],latitude:e[1]}):null}_createSuggestionForSearch(e){if(e&&Fn(e,"key")&&Fn(e,"text")&&Fn(e,"sourceIndex"))return e;const i=this._createLocationForSearch(e),n=typeof e=="string"?e:this.searchTerm,{selectedSuggestion:s,selectedResult:h}=this,f=!e&&s&&h,m=f&&s.key===h.key&&s.sourceIndex===h.sourceIndex,v=f&&s.location;return m||v?s:{location:i,text:i?"":n,sourceIndex:null,key:null}}_getFirstResult(e){return zg(e,({results:i})=>i==null?void 0:i[0])??null}async _selectFirstResult(e){return this.autoSelect&&e?this.select(e):null}async _suggestImmediate(e,i){var h;await this.when();const n=await this._getSuggestionsFromSources(e,i);if((h=i==null?void 0:i.signal)!=null&&h.aborted)return null;const s={activeSourceIndex:this.activeSourceIndex,searchTerm:e??"",numResults:0,numErrors:0,errors:[],results:[]};return this._formatResponse(s,n),s}_formatSourceResponse(e,i,n){const s=(i==null?void 0:i.value)||[],h=i==null?void 0:i.error,f=this.allSources.at(n);if(h){const m={sourceIndex:n,source:f,error:h};e.errors.push(m),Ce.getLogger(this).error(h),e.numErrors++}else{const m={sourceIndex:n,source:f,results:s};e.results.push(m),e.numResults+=s.length}}_formatResponse(e,i,n){if(i)if(e.activeSourceIndex===of){const s=n&&Fn(n,"sourceIndex")&&n.sourceIndex!==-1?n.sourceIndex:void 0;i.forEach((h,f)=>{const m=s!==void 0?s:f;this._formatSourceResponse(e,h,m)})}else this._formatSourceResponse(e,i[0],e.activeSourceIndex)}async _getResultsFromSources(e,i){const{allSources:n}=this,s=!e.location&&Fn(e,"sourceIndex")?e.sourceIndex:this.activeSourceIndex,h=[];if(!n.length){const f=new fe("search:no-sources-defined","At least one source is required.",{allSources:n});throw Ce.getLogger(this).error(f),f}return s===of?n.forEach((f,m)=>{h.push(this._getResultsFromSource(e,m,i))}):h.push(this._getResultsFromSource(e,s,i)),vd(h)}async _getSuggestionsFromSources(e,i){const{allSources:n,activeSourceIndex:s}=this,h=[];if(!n.length){const f=new fe("suggest:no-sources-defined","At least one source is required.",{allSources:n});throw Ce.getLogger(this).error(f),f}return s===of?n.forEach((f,m)=>{h.push(this._getSuggestionsFromSource(e,m,i))}):h.push(this._getSuggestionsFromSource(e,s,i)),vd(h)}async _getResultsFromSource(e,i,n){var M,$;const s=i!=null?this.allSources.at(i):null;if(!s)return null;const{location:h=null}=e,f=((M=this.view)==null?void 0:M.spatialReference)||T$,m=Fn(s,"maxResults")?s.maxResults:this.maxResults,v=!!(s instanceof rf&&Fn(s,"exactMatch"))&&s.exactMatch,{view:x}=this;return($=s.getResults)==null?void 0:$.call(s,{view:x,sourceIndex:i,location:h,suggestResult:e,spatialReference:f,exactMatch:v,maxResults:m},n)}async _getSuggestionsFromSource(e,i,n){var v,x;const s=this.allSources.at(i);if(!s)return null;e??(e="");const h=Fn(s,"suggestionsEnabled")?s.suggestionsEnabled:this.suggestionsEnabled,f=e==null?void 0:e.length,m=Fn(s,"minSuggestCharacters")?s.minSuggestCharacters:this.minSuggestCharacters;if(h&&e.trim()&&f>=m){const M=((v=this.view)==null?void 0:v.spatialReference)||T$,$=Fn(s,"maxSuggestions")?s.maxSuggestions:this.maxSuggestions,{view:I}=this,P=!!(s instanceof rf&&Fn(s,"exactMatch"))&&s.exactMatch;return(x=s.getSuggestions)==null?void 0:x.call(s,{view:I,sourceIndex:i,suggestTerm:e,spatialReference:M,maxSuggestions:$,exactMatch:P},n)}return null}_getLayerSourcePopupTemplate(e){const{layer:i}=e;if(i)return Fn(e,"popupTemplate")?e.popupTemplate:i.popupTemplate}_getSourceIndexOfResult(e){return zg(this.results??[],({results:i,sourceIndex:n})=>(i==null?void 0:i.includes(e))?n:null)??null}async _goToSearchResult(e){this._abortGoTo();const i=new AbortController;this._gotoController=i;const n={target:{target:e},options:{signal:i.signal}};e||(n.options.animate=!1),await this.callGoTo(n),this._gotoController=null}_getDefaultSymbol(e){var s;const{defaultSymbols:i}=this,n=(s=e.feature)==null?void 0:s.geometry;if(n==null)return null;switch(n.type){case"point":case"multipoint":return i.point;case"polyline":return i.polyline;case"extent":case"polygon":return i.polygon;default:return null}}_removeHighlight(){this.removeHandles(S$)}async _getLayerView(e){var s,h;const{view:i}=this;if(!e||!i||((s=e.layer)==null?void 0:s.type)==="building-component"||((h=e.layer)==null?void 0:h.type)==="subtype-sublayer")return null;const{layer:n}=e;return n?(await i.when(),i.whenLayerView(n)):null}_highlightFeature(e){const{graphic:i,layerView:n}=e,{attributes:s,layer:h}=i,{objectIdField:f}=h,m=(f&&(s==null?void 0:s[f]))??null,v=n.highlight(m??i);this.addHandles(v,S$)}_setResultFloor(e){var h,f,m;const{view:i}=this,n=(h=e.feature)==null?void 0:h.attributes,s=(f=e.feature)==null?void 0:f.sourceLayer;if(s&&"floorInfo"in s&&((m=s==null?void 0:s.floorInfo)!=null&&m.floorField)&&n){const v=n[s.floorInfo.floorField];i==null||i.emit("select-result-floor",v)}}};at.ALL_INDEX=of,_([T()],at.prototype,"_searching",void 0),_([T()],at.prototype,"_updatingPromise",void 0),_([T({readOnly:!0,value:null})],at.prototype,"activeSource",null),_([T()],at.prototype,"activeSourceIndex",null),_([T()],at.prototype,"allPlaceholder",null),_([T({readOnly:!0})],at.prototype,"allSources",null),_([T()],at.prototype,"autoNavigate",void 0),_([T()],at.prototype,"autoSelect",void 0),_([T()],at.prototype,"defaultPopupTemplate",void 0),_([T({readOnly:!0})],at.prototype,"defaultSources",void 0),_([T()],at.prototype,"defaultSymbols",void 0),_([T()],at.prototype,"includeDefaultSources",void 0),_([T()],at.prototype,"locationEnabled",null),_([T()],at.prototype,"maxInputLength",void 0),_([T()],at.prototype,"maxResults",void 0),_([T()],at.prototype,"maxSuggestions",void 0),_([T()],at.prototype,"messages",void 0),_([T()],at.prototype,"minSuggestCharacters",void 0),_([T({readOnly:!0})],at.prototype,"placeholder",null),_([T()],at.prototype,"popupEnabled",void 0),_([T({type:aT})],at.prototype,"popupTemplate",void 0),_([T({type:$s})],at.prototype,"portal",void 0),_([T()],at.prototype,"resultCount",void 0),_([T()],at.prototype,"resultGraphicEnabled",void 0),_([T({readOnly:!0})],at.prototype,"resultGraphic",void 0),_([T({readOnly:!0})],at.prototype,"results",void 0),_([T({readOnly:!0})],at.prototype,"selectedSuggestion",void 0),_([T()],at.prototype,"searchAllEnabled",void 0),_([T({readOnly:!0})],at.prototype,"selectedResult",void 0),_([T()],at.prototype,"searchTerm",null),_([T({type:wb})],at.prototype,"sources",void 0),_([T({readOnly:!0})],at.prototype,"state",null),_([T()],at.prototype,"suggestionDelay",void 0),_([T()],at.prototype,"suggestionCount",void 0),_([T({readOnly:!0})],at.prototype,"suggestions",void 0),_([T()],at.prototype,"suggestionsEnabled",void 0),_([T({readOnly:!0})],at.prototype,"updating",null),_([T()],at.prototype,"view",void 0),_([T()],at.prototype,"clear",null),at=_([Y("esri.widgets.Search.SearchViewModel")],at);const vf=at;let mh=class extends Cs{constructor(e,i){super(e,i),this.messages=null,this.showMoreResultsOpen=!1,this.viewModel=null}destroy(){this.viewModel=null}render(){const e={[Su.showMoreResults]:this.showMoreResultsOpen};return ae("div",{class:this.classes(Su.base,Ye.widget)},ae("div",{class:this.classes(Su.moreResults,e),key:"esri-search-renderer__container"},this._renderSearchResultName(),this._renderMoreResults()))}_renderMoreResults(){return ae("div",{key:"esri-search-renderer__more-results"},this._renderMoreResultsButton(),this._renderMoreResultsLists())}_renderSearchResultName(){var n;const e=(n=this.viewModel)==null?void 0:n.selectedResult,i=(e==null?void 0:e.name)||"";return ae("div",{class:Su.moreResultsItem,key:"esri-search-renderer__result-name"},i)}_renderMoreResultsLists(){const{viewModel:e}=this;if(!e)return[];const i=e.results;if((e.resultCount??0)<2)return null;const n=i==null?void 0:i.map(s=>this._renderMoreResultsList(s));return ae("div",{class:Su.moreResultsList,key:"esri-search-renderer__more-results-container"},n)}_renderMoreResultsButton(){const{messages:e,viewModel:i}=this;return i?(i.resultCount??0)<2?null:ae("div",{class:Su.moreResultsItem,key:"esri-search-renderer__more-results-button"},ae("a",{bind:this,class:Ye.anchor,href:"#",onclick:this._showMoreResultsClick,onkeydown:this._showMoreResultsClick},this.showMoreResultsOpen?e.hideMoreResults:e.showMoreResults)):null}_renderMoreResultsHeader(e,i){return ae("div",{class:Su.moreResultsListHeader,key:`esri-search-result-renderer__header-${i}`},e)}_renderMoreResultsList(e){var $,I,P;const{results:i}=e,n=(i==null?void 0:i.length)??0,s=n>0,h=($=this.viewModel)==null?void 0:$.selectedResult,f=n===1&&i[0]===h,m=this._getSourceName(e.source,e.sourceIndex),v=(((P=(I=this.viewModel)==null?void 0:I.results)==null?void 0:P.length)??0)>1&&!f?this._renderMoreResultsHeader(m,e.sourceIndex):null,x=s&&i.map((L,z)=>this._renderMoreResultsListItem(L,z)),M=s&&!f?ae("ul",{key:`esri-search-result-renderer__list-${e.sourceIndex}`},x):null;return s?ae("div",{key:`esri-search-result-renderer__results-${e.sourceIndex}`},v,M):null}_renderMoreResultsListItem(e,i){var s;const n=(s=this.viewModel)==null?void 0:s.selectedResult;return e!==n?ae("li",{key:`esri-search-result-renderer__list-item-${i}`},ae("a",{bind:this,class:Ye.anchor,"data-result":e,href:"#",onclick:this._selectResultClick,onkeydown:this._selectResultClick,tabIndex:0},e.name)):null}_showMoreResultsClick(e){var n,s;e.preventDefault(),this.showMoreResultsOpen=!this.showMoreResultsOpen;const i=(s=(n=this.viewModel)==null?void 0:n.view)==null?void 0:s.popup;i&&"reposition"in i&&i.reposition()}_selectResultClick(e){var n;e.preventDefault();const i=e.currentTarget["data-result"];(n=this.viewModel)==null||n.select(i)}_getSourceName(e,i){return i===vf.ALL_INDEX?this.messages.all:e.name}};_([T(),Sr("esri/widgets/Search/t9n/Search")],mh.prototype,"messages",void 0),_([T()],mh.prototype,"showMoreResultsOpen",void 0),_([T()],mh.prototype,"viewModel",void 0),_([D2()],mh.prototype,"_showMoreResultsClick",null),_([D2()],mh.prototype,"_selectResultClick",null),mh=_([Y("esri.widgets.Search.SearchResultRenderer")],mh);const ufe=mh,Bc={checkMark:"esri-icon-check-mark",close:"esri-icon-close",collapse:"esri-icon-collapse",down:"esri-icon-down",downArrow:"esri-icon-down-arrow",dragHorizontal:"esri-icon-drag-horizontal",dragVertical:"esri-icon-drag-vertical",duplicate:"esri-icon-duplicate",expand:"esri-icon-expand",fontFallbackText:"esri-icon-font-fallback-text",forward:"esri-icon-forward",handleVertical:"esri-icon-handle-vertical",icon:"esri-icon",left:"esri-icon-left",loadingIndicator:"esri-icon-loading-indicator",locateCircled:"esri-icon-locate-circled",minus:"esri-icon-minus",noticeTriangle:"esri-icon-notice-triangle",pause:"esri-icon-pause",play:"esri-icon-play",plus:"esri-icon-plus",radioChecked:"esri-icon-radio-checked",radioUnchecked:"esri-icon-radio-unchecked",refresh:"esri-icon-refresh",reverse:"esri-icon-reverse",right:"esri-icon-right",search:"esri-icon-search",swap:"esri-icon-swap",table:"esri-icon-table",trash:"esri-icon-trash",up:"esri-icon-up",upArrow:"esri-icon-up-arrow",upDownArrows:"esri-icon-up-down-arrows",urbanModel:"esri-icon-urban-model",zoomInMagnifyingGlass:"esri-icon-zoom-in-magnifying-glass",zoomToObject:"esri-icon-zoom-to-object"},dfe=/<[a-z/][\s\S]*>/i,pfe=(t,e)=>{const i=jB(e).split(/\s/),n=new RegExp(`(${i.join("|")})`,"gi");return t.replace(n,s=>`<strong>${s}</strong>`)};let ct=class extends Cs{constructor(e,i){super(e,i),this._activeMenuItemIndex=-1,this._inputNode=null,this._menuItemCount=0,this._sourceMenuButtonNode=null,this._sourceListNode=null,this._suggestionListNode=null,this._searchResultRenderer=new ufe,this._suggestController=null,this._searchController=null,this._locateFailed=!1,this._container=null,this.activeMenu="none",this.disabled=!1,this.messages=null,this.messagesCommon=null,this.viewModel=new vf,this._clearActiveMenu=()=>{this.activeMenu="none"},this._removeActiveMenu=n=>{var h;const s=n.relatedTarget;s&&((h=this._container)!=null&&h.contains(s))||this._clearActiveMenu()},this.addHandles([Ee(()=>this.searchTerm,n=>{var s,h;(n&&this.activeMenu==="warning"||!n&&!((h=(s=this.viewModel)==null?void 0:s.selectedSuggestion)!=null&&h.location))&&this._clearActiveMenu()}),Es(()=>{var n;return(n=this.viewModel)==null?void 0:n.allSources},"change",()=>this._watchSourceChanges()),Ee(()=>this.activeMenu,()=>this._resetActiveMenuItemIndex(),Pt),Ee(()=>{var n;return(n=this.viewModel)==null?void 0:n.defaultPopupTemplate},n=>{n&&(n.content=this._renderSearchResultsContent.bind(this))},Pt)])}destroy(){this._cancelSuggest(),this._cancelSearch(),this._searchResultRenderer=yt(this._searchResultRenderer)}get displayedSearchTerm(){return`${this.viewModel.searchTerm}`.trim()}get inputId(){return this._buildId("input")}get suggestionsMenuId(){return this._buildId("suggest-menu")}get sourceMenuId(){return this._buildId("source-menu")}get sourceMenuButtonId(){return this._buildId("source-menu-button")}get activeSource(){var e;return(e=this.viewModel)==null?void 0:e.activeSource}get activeSourceIndex(){return this.viewModel.activeSourceIndex}set activeSourceIndex(e){this.viewModel.activeSourceIndex=e}get allPlaceholder(){return this.viewModel.allPlaceholder}set allPlaceholder(e){this.viewModel.allPlaceholder=e}get allSources(){return this.viewModel.allSources}get autoNavigate(){return this.viewModel.autoNavigate}set autoNavigate(e){this.viewModel.autoNavigate=e}get autoSelect(){return this.viewModel.autoSelect}set autoSelect(e){this.viewModel.autoSelect=e}get defaultSources(){return this.viewModel.defaultSources}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get icon(){return"search"}set icon(e){this._overrideIfSome("icon",e)}get includeDefaultSources(){return this.viewModel.includeDefaultSources}set includeDefaultSources(e){this.viewModel.includeDefaultSources=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get locationEnabled(){return this.viewModel.locationEnabled}set locationEnabled(e){this.viewModel.locationEnabled=e}get maxResults(){return this.viewModel.maxResults}set maxResults(e){this.viewModel.maxResults=e}get maxSuggestions(){return this.viewModel.maxSuggestions}set maxSuggestions(e){this.viewModel.maxSuggestions=e}get minSuggestCharacters(){return this.viewModel.minSuggestCharacters}set minSuggestCharacters(e){this.viewModel.minSuggestCharacters=e}get popupEnabled(){return this.viewModel.popupEnabled}set popupEnabled(e){this.viewModel.popupEnabled=e}get popupTemplate(){return this.viewModel.popupTemplate}set popupTemplate(e){this.viewModel.popupTemplate=e}get portal(){var e;return(e=this.viewModel)==null?void 0:e.portal}set portal(e){this.viewModel&&(this.viewModel.portal=e)}get resultGraphic(){return this.viewModel.resultGraphic}set resultGraphic(e){this.viewModel.resultGraphic=e}get resultGraphicEnabled(){return this.viewModel.resultGraphicEnabled}set resultGraphicEnabled(e){this.viewModel.resultGraphicEnabled=e}get results(){return this.viewModel.results}get searchAllEnabled(){return this.viewModel.searchAllEnabled}set searchAllEnabled(e){this.viewModel.searchAllEnabled=e}get searchTerm(){return this.viewModel.searchTerm}set searchTerm(e){this.viewModel.searchTerm=e}get selectedResult(){return this.viewModel.selectedResult}get sources(){return this.viewModel.sources}set sources(e){this.viewModel.sources=e}get suggestions(){return this.viewModel.suggestions}get suggestionsEnabled(){return this.viewModel.suggestionsEnabled}set suggestionsEnabled(e){this.viewModel.suggestionsEnabled=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}clear(){this.viewModel.clear()}focus(){var e;(e=this._inputNode)==null||e.focus(),this.emit("search-focus")}blur(){var e;(e=this._inputNode)==null||e.blur(),this.emit("search-blur")}async search(e){this._clearActiveMenu(),this._cancelSuggest(),this._cancelSearch();const i=new AbortController,{signal:n}=i;this._searchController=i;try{const s=await this.viewModel.search(e,{signal:n});return this._searchController!==i?void 0:(this.activeMenu=s!=null&&s.numResults?"none":"warning",this._searchController=null,s)}catch{return this._searchController!==i?void 0:(this._clearActiveMenu(),void(this._searchController=null))}}async suggest(e){this._cancelSuggest();const i=new AbortController,{signal:n}=i;this._suggestController=i;try{const s=await this.viewModel.suggest(e,null,{signal:n});return this._suggestController!==i?void 0:(this._suggestController=null,s!=null&&s.numResults&&this._openSuggestionMenu(),this._scrollToTopSuggestion(),s)}catch{return this._suggestController!==i||(this._suggestController=null),null}}render(){const{state:e}=this.viewModel,i={[Ye.disabled]:e==="disabled",[Ye.widgetDisabled]:this.disabled};return ae("div",{class:this.classes(Vt.base,Ye.widget,i)},e==="loading"?this._renderLoader():this._renderContainer())}_renderSubmitButton(){const{messages:e,disabled:i}=this;return ae("button",{"aria-label":e.searchButtonTitle,bind:this,class:this.classes(Vt.submitButton,Ye.widgetButton),disabled:i,key:"esri-search__submit-button",onclick:this._handleSearchButtonClick,title:e.searchButtonTitle,type:"button"},ae("span",{"aria-hidden":"true",class:Bc.search}))}_renderWarningMenu(){return ae("div",{class:this.classes(Ye.menu,Vt.warningMenu),key:"esri-search__error-menu"},ae("div",{class:Vt.warningMenuBody},this._renderWarning()))}_renderSourceMenuButton(){const{messages:e,activeMenu:i,sourceMenuId:n,sourceMenuButtonId:s,disabled:h}=this,{activeSourceIndex:f,allSources:m}=this.viewModel;return m.length>1?ae("button",{afterCreate:$y,"aria-controls":n,"aria-expanded":(i==="source").toString(),"aria-haspopup":"true","aria-label":e.searchIn,bind:this,class:this.classes(Vt.sourcesButton,Ye.widgetButton),"data-node-ref":"_sourceMenuButtonNode",disabled:h,id:s,key:"esri-search__source-menu-button",onclick:this._handleSourcesMenuToggleClick,onfocus:this._handleSourcesMenuToggleFocus,title:e.searchIn,type:"button"},ae("span",{"aria-hidden":"true",class:this.classes(Bc.downArrow,Vt.sourcesButtonDown)}),ae("span",{"aria-hidden":"true",class:this.classes(Bc.upArrow,Vt.sourcesButtonUp)}),ae("span",{class:Vt.sourceName},this._getSourceName(f))):null}_renderSourcesList(){const{allSources:e,searchAllEnabled:i}=this.viewModel,{_activeMenuItemIndex:n,activeMenu:s,sourceMenuId:h,sourceMenuButtonId:f}=this,m=s==="source"&&n>-1?this._buildId("source-item",n):null;return e.length>1?ae("ul",{afterCreate:$y,"aria-activedescendant":m,"aria-labelledby":f,bind:this,class:Ye.menuList,"data-node-ref":"_sourceListNode",id:h,onkeydown:this._handleSourceMenuKeydown,onkeyup:this._handleSourceMenuKeyup,role:"menu",tabIndex:-1},i?this._renderSource(vf.ALL_INDEX):null,e.map((v,x)=>this._renderSource(x)).toArray()):null}_renderSourcesMenu(){const{allSources:e}=this.viewModel;return e.length>1?ae("div",{class:this.classes(Ye.menu,Vt.sourcesMenu),key:"esri-search__source-menu"},this._renderSourcesList()):null}_renderLoader(){const{messages:e,messagesCommon:i,disabled:n}=this;return ae("div",{class:Ye.loader,key:"base-loader",tabIndex:n?-1:void 0},ae("span",{"aria-hidden":"true",class:Ye.loaderAnimation}),ae("span",{class:Bc.fontFallbackText},e.searchButtonTitle),ae("span",{class:Ye.loaderText},i.loading))}_renderContainer(){const{allSources:e,state:i}=this.viewModel,{activeMenu:n}=this,s={[Vt.hasMultipleSources]:e.length>1,[Vt.isLoading]:i==="loading",[Vt.isSearching]:i==="searching",[Vt.showWarning]:n==="warning",[Vt.showSources]:n==="source",[Vt.showSuggestions]:n==="suggestion"};return ae("div",{afterCreate:h=>{this._container=h,h.addEventListener("focusout",this._removeActiveMenu)},afterRemoved:h=>{h.removeEventListener("focusout",this._removeActiveMenu)},class:this.classes(s,Vt.container),key:"base-container",tabIndex:-1},this._renderSourceMenuButton(),this._renderSourcesMenu(),this._renderInputContainer(),this._renderSubmitButton(),this._renderWarningMenu())}_renderClearButton(){return this.searchTerm?ae("button",{bind:this,class:this.classes(Vt.clearButton,Ye.widgetButton),disabled:this.disabled,key:"esri-search__clear-button",onclick:this._handleClearButtonClick,onfocus:this._clearActiveMenu,title:this.messages.clearButtonTitle,type:"button"},ae("span",{"aria-hidden":"true",class:Bc.close})):null}_renderLocationGroup(){const{messages:e,locationEnabled:i,displayedSearchTerm:n}=this,s=i&&!n,h=this.activeMenu==="suggestion"&&this._activeMenuItemIndex===0;return s?ae("ul",{class:this.classes(Ye.menuList,Vt.suggestionList,Vt.suggestionListCurrentLocation),key:"esri-search__suggestion-list-current-location",role:"group"},ae("li",{"aria-selected":(this.activeMenu==="suggestion"&&this._activeMenuItemIndex===0).toString(),bind:this,class:this.classes(Ye.menuItem,h?Ye.menuItemFocus:null),"data-current-location-item":!0,id:this._buildId("suggestion-item",0),onclick:this._handleUseCurrentLocationClick,role:"option"},ae("span",{"aria-hidden":"true",class:Bc.locateCircled})," ",e.useCurrentLocation)):null}_renderInput(){const{activeMenu:e,locationEnabled:i,displayedSearchTerm:n,messages:s,suggestionsMenuId:h,inputId:f,_activeMenuItemIndex:m,disabled:v}=this,{maxInputLength:x,placeholder:M,searchTerm:$,suggestionCount:I}=this.viewModel,P=!(!(i&&!n)&&!I),L=e==="suggestion"&&m>-1?this._buildId("suggestion-item",m):null;return ae("input",{afterCreate:$y,"aria-activedescendant":L,"aria-autocomplete":"list","aria-controls":P?h:null,"aria-expanded":(P&&e==="suggestion").toString(),"aria-haspopup":"listbox","aria-label":s.searchButtonTitle,autocomplete:"off",bind:this,class:this.classes(Ye.input,Vt.input),"data-node-ref":"_inputNode",disabled:v,id:f,maxlength:x,onblur:this.blur,onclick:this._openSuggestionMenu,onfocus:this.focus,oninput:this._handleInputPaste,onkeyup:this._handleInputKeyup,onpaste:this._handleInputPaste,placeholder:M,role:"combobox",title:$?"":M,type:"text",value:$})}_renderForm(){return ae("form",{bind:this,class:Vt.form,disabled:this.disabled,key:"esri-search__form",onsubmit:this._formSubmit,role:"search"},this._renderInput())}_renderSuggestList(e){const{sourceIndex:i}=e,{results:n}=e;return(n==null?void 0:n.length)?ae("ul",{class:this.classes(Ye.menuList,Vt.suggestionList),key:`esri-search__suggestion-list-${i}`,role:"group"},n==null?void 0:n.map(h=>this._renderSuggestion(h,this._menuItemCount++))):null}_renderSuggestionsGroup(){const{suggestions:e}=this.viewModel;return e?e.map(i=>[this._renderSuggestionHeader(i),this._renderSuggestList(i)]):[]}_renderSuggestionsMenu(){const{displayedSearchTerm:e,locationEnabled:i,suggestionsMenuId:n,inputId:s}=this,{suggestionCount:h}=this.viewModel,f=i&&!e||h;return this._menuItemCount=0,f?ae("div",{afterCreate:$y,"aria-labelledby":s,bind:this,class:this.classes(Ye.menu,Vt.suggestionsMenu),"data-node-ref":"_suggestionListNode",id:n,key:"esri-search__suggestions-menu",role:"listbox"},this._renderLocationGroup(),this._renderSuggestionsGroup()):null}_renderInputContainer(){return ae("div",{class:Vt.inputContainer,key:"esri-search__input-container"},this._renderForm(),this._renderSuggestionsMenu(),this._renderClearButton())}_renderSuggestionHeader(e){var m;const{allSources:i,activeSourceIndex:n}=this.viewModel,{sourceIndex:s}=e,h=(m=e.results)==null?void 0:m.length,f=i.length>1&&n===vf.ALL_INDEX;return h&&f?ae("div",{class:Ye.menuHeader,key:`esri-search__suggestion-header-${s}`},this._getSourceName(s)):null}_renderSuggestion(e,i){const{_activeMenuItemIndex:n,viewModel:{searchTerm:s}}=this;if(!s)return;const h=this.activeMenu==="suggestion"&&n===i;return ae("li",{"aria-selected":(this.activeMenu==="suggestion"&&this._activeMenuItemIndex===i).toString(),bind:this,class:this.classes(Ye.menuItem,h?Ye.menuItemFocus:null),"data-suggestion":e,id:this._buildId("suggestion-item",i),innerHTML:this._getSuggestResultHTML(e.text,s),key:`esri-search__suggestion_${i}`,onclick:this._handleSuggestionClick,role:"option"})}_renderSource(e){const{activeSourceIndex:i,searchAllEnabled:n}=this.viewModel,s={[Ye.menuItemActive]:e===i,[Ye.menuItemFocus]:this.activeMenu==="source"&&e===(n?this._activeMenuItemIndex-1:this._activeMenuItemIndex)},h=n?e+1:e;return ae("li",{"aria-checked":(e===i).toString(),bind:this,class:this.classes(Vt.source,Ye.menuItem,s),"data-source-index":e,id:this._buildId("source-item",h),key:`esri-search__source-${e}`,onclick:this._handleSourceClick,role:"menuitemradio"},this._getSourceName(e))}_renderNoResultsWarning(e){const{messages:i}=this,n=e?jS(i.noResultsFoundForValue,{value:`"${e}"`}):i.noResultsFound;return ae("div",{key:"esri-search__no_results"},ae("div",{class:Vt.warningMenuHeader},i.noResults),ae("div",{class:Vt.warningMenuText},n))}_renderEmptySearchWarning(){const{messages:e}=this;return ae("div",{key:"esri-search__empty-search"},ae("span",{"aria-hidden":"true",class:Bc.noticeTriangle}),ae("span",{class:Vt.noValueText},e.emptyValue))}_renderLocateWarning(){const{messages:e}=this;return ae("div",{key:"esri-search__locate-error"},ae("span",{"aria-hidden":"true",class:Bc.noticeTriangle}),ae("span",{class:Vt.noValueText},e.locateError))}_renderWarning(){var s;const{displayedSearchTerm:e,_locateFailed:i}=this,{viewModel:n}=this;return i?this._renderLocateWarning():(s=n.selectedSuggestion)!=null&&s.location||e?this._renderNoResultsWarning(e):this._renderEmptySearchWarning()}_resetActiveMenuItemIndex(){this._activeMenuItemIndex=-1}_buildId(e,i){return`${this.id}-${e}${i===void 0?"":`-${i}`}`}_watchSourceChanges(){const{viewModel:{allSources:e}}=this,i="sources";this.removeHandles(i),e.forEach(n=>this.addHandles(Ee(()=>n.name,()=>this.scheduleRender()),i))}_handleSourcesMenuToggleFocus(){this.activeMenu!=="source"&&this._clearActiveMenu()}_handleSourcesMenuToggleClick(){var i;const e=this.activeMenu==="source";this.activeMenu=e?"none":"source",this.renderNow(),this.activeMenu==="source"&&((i=this._sourceListNode)==null||i.focus())}_handleClearButtonClick(){this.viewModel.clear(),this._focus()}_handleSearchButtonClick(){this.search()}_handleSuggestionClick(e){const i=M$(e.currentTarget);i&&(this._focus(),this.search(i))}_handleUseCurrentLocationClick(){this._useCurrentLocation()}_useCurrentLocation(){this._focus("none"),this._cancelSuggest(),this._cancelSearch();const e=new AbortController,{signal:i}=e;this._searchController=e,(async()=>{try{const n=await this.viewModel.searchNearby({signal:i});this.activeMenu=n!=null&&n.numResults?"none":"warning"}catch{this._locateFailed=!0,this.activeMenu="warning"}finally{this._searchController=null}})()}_handleSourceClick(e){this._setSourceFromMenuItem(e.currentTarget)}_setSourceFromMenuItem(e){var n;if(!e)return;const i=ffe(e);i!=null&&(this.viewModel.activeSourceIndex=i,this._clearActiveMenu(),(n=this._sourceMenuButtonNode)==null||n.focus())}_cancelSuggest(){this._suggestController=ms(this._suggestController)}_cancelSearch(){this._searchController=ms(this._searchController),this._locateFailed=!1}_handleInputKeyup(e){var h;const{key:i}=e;if(e.ctrlKey||e.metaKey||i==="Copy"||i==="ArrowLeft"||i==="ArrowRight"||i==="Shift")return;if(i==="Tab"||i==="Escape"||e.shiftKey&&i==="Tab")return this._cancelSuggest(),void(i==="Escape"&&this._clearActiveMenu());const n=i==="Home"||i==="End"||i==="ArrowUp"||i==="ArrowDown";if(i==="Enter"&&this._activeMenuItemIndex<0)return void this._cancelSuggest();const s=(h=this._suggestionListNode)==null?void 0:h.getElementsByTagName("li");if(s!=null&&s.length){if(this.activeMenu!=="suggestion"&&this._openSuggestionMenu(),n)return e.preventDefault(),this._cancelSuggest(),void this._handleItemNavigation(i,s,this._suggestionListNode);const f=s[this._activeMenuItemIndex];if(i==="Enter"&&f){const m=M$(f);return void(m?(this._focus(),this.search(m)):gfe(f)&&this._useCurrentLocation())}}this.viewModel.searchTerm&&this.suggest()}_handleItemNavigation(e,i,n){const s=this._activeMenuItemIndex;e==="Home"&&(this._activeMenuItemIndex=0),e==="End"&&(this._activeMenuItemIndex=i.length-1),e==="ArrowUp"&&(this._activeMenuItemIndex=this._activeMenuItemIndex<=0?i.length-1:this._activeMenuItemIndex-1),e==="ArrowDown"&&(this._activeMenuItemIndex=this._activeMenuItemIndex===i.length-1?0:this._activeMenuItemIndex+1),s!==this._activeMenuItemIndex&&n&&Vee(i[this._activeMenuItemIndex],n)}_scrollToTopSuggestion(){this._suggestionListNode&&(this._suggestionListNode.scrollTop=0)}_openSuggestionMenu(){this.activeMenu="suggestion"}_handleInputPaste(e){const i=e.target;this.viewModel.searchTerm!==i.value&&(this.viewModel.searchTerm=i.value),this.viewModel.searchTerm&&this.suggest()}_handleSourceMenuKeydown(e){var n;const{key:i}=e;if(SL(i)){e.preventDefault();const s=(n=this._sourceListNode)==null?void 0:n.getElementsByTagName("li"),h=s==null?void 0:s[this._activeMenuItemIndex];this._setSourceFromMenuItem(h)}else i!=="ArrowUp"&&i!=="ArrowDown"&&i!=="End"&&i!=="Home"||e.preventDefault()}_handleSourceMenuKeyup(e){var h,f,m;const{key:i}=e,n=i==="ArrowUp"||i==="ArrowDown"||i==="End"||i==="Home";if(n&&e.preventDefault(),i==="Escape")return this._clearActiveMenu(),void((h=this._sourceMenuButtonNode)==null?void 0:h.focus());const s=(f=this._sourceListNode)==null?void 0:f.getElementsByTagName("li");return s&&s.length!==0&&n?(this.activeMenu!=="source"&&(this.activeMenu="source"),void this._handleItemNavigation(i,s,(m=this._sourceListNode)==null?void 0:m.parentElement)):void 0}_focus(e){this.focus(),e&&(this.activeMenu=e)}_formSubmit(e){e.preventDefault(),this._activeMenuItemIndex===-1&&this.search()}_getSourceName(e){const{messages:i}=this,n=this.viewModel,{allSources:s}=n,h=s.at(e);return e===vf.ALL_INDEX?i.all:h&&h.name||i.untitledSource}_getSuggestResultHTML(e,i){return e?dfe.test(e)?e:pfe(e,i):this.messages.untitledResult}_renderSearchResultsContent(){return this._searchResultRenderer.showMoreResultsOpen=!1,this._searchResultRenderer.viewModel=this.viewModel,this._searchResultRenderer}};function M$(t){return t==null?void 0:t["data-suggestion"]}function ffe(t){return t==null?void 0:t["data-source-index"]}function gfe(t){return!!(t!=null&&t["data-current-location-item"])}_([T()],ct.prototype,"_activeMenuItemIndex",void 0),_([T()],ct.prototype,"displayedSearchTerm",null),_([T({readOnly:!0})],ct.prototype,"inputId",null),_([T({readOnly:!0})],ct.prototype,"suggestionsMenuId",null),_([T({readOnly:!0})],ct.prototype,"sourceMenuId",null),_([T({readOnly:!0})],ct.prototype,"sourceMenuButtonId",null),_([T()],ct.prototype,"activeMenu",void 0),_([T({readOnly:!0})],ct.prototype,"activeSource",null),_([T()],ct.prototype,"activeSourceIndex",null),_([T()],ct.prototype,"allPlaceholder",null),_([T({readOnly:!0})],ct.prototype,"allSources",null),_([T()],ct.prototype,"autoNavigate",null),_([T()],ct.prototype,"autoSelect",null),_([T({readOnly:!0})],ct.prototype,"defaultSources",null),_([T()],ct.prototype,"disabled",void 0),_([T()],ct.prototype,"goToOverride",null),_([T()],ct.prototype,"icon",null),_([T()],ct.prototype,"includeDefaultSources",null),_([T()],ct.prototype,"label",null),_([T()],ct.prototype,"locationEnabled",null),_([T()],ct.prototype,"maxResults",null),_([T()],ct.prototype,"maxSuggestions",null),_([T(),Sr("esri/widgets/Search/t9n/Search")],ct.prototype,"messages",void 0),_([T(),Sr("esri/t9n/common")],ct.prototype,"messagesCommon",void 0),_([T()],ct.prototype,"minSuggestCharacters",null),_([T()],ct.prototype,"popupEnabled",null),_([T()],ct.prototype,"popupTemplate",null),_([T()],ct.prototype,"portal",null),_([T()],ct.prototype,"resultGraphic",null),_([T()],ct.prototype,"resultGraphicEnabled",null),_([T({readOnly:!0})],ct.prototype,"results",null),_([T()],ct.prototype,"searchAllEnabled",null),_([T()],ct.prototype,"searchTerm",null),_([T({readOnly:!0})],ct.prototype,"selectedResult",null),_([T()],ct.prototype,"sources",null),_([T({readOnly:!0})],ct.prototype,"suggestions",null),_([T()],ct.prototype,"suggestionsEnabled",null),_([T()],ct.prototype,"view",null),_([UF(["search-complete","search-clear","search-start","select-result","suggest-start","suggest-complete"]),T({type:vf})],ct.prototype,"viewModel",void 0),ct=_([Y("esri.widgets.Search")],ct);const mfe=ct;function yfe(t){let e,i,n,s;return{c(){e=Ze("div"),i=Ze("div"),n=Ze("div"),jr(n,"id","mapDiv"),jr(n,"class","svelte-1avm01t"),jr(i,"class",s=iM(`view-container-${t[0]}`)+" svelte-1avm01t"),jr(e,"id","map-container"),jr(e,"class","svelte-1avm01t")},m(h,f){ou(h,e,f),Ne(e,i),Ne(i,n)},p(h,[f]){f&1&&s!==(s=iM(`view-container-${h[0]}`)+" svelte-1avm01t")&&jr(i,"class",s)},i:on,o:on,d(h){h&&xc(e)}}}function vfe(t,e,i){let n;return gd(t,AO,s=>i(0,n=s)),pB(()=>{vt.apiKey="AAPT85fOqywZsicJupSmVSCGrjLA1W20h_mLeh2lh6o9CJyXYBAoKjdUrh3K_IvP1ZS_RfWU6gpdTf2or3nnljXiE-VqENQiXJxKfVUc0i01VsXUKJsof8_Z5dsDu6AUkSO5bREc9tFYhhajs8gs-dtsFk3cZC41DL5y68iHe7exB8gXs_t3wuhuK1tyr4Y7AKhl-3ffbltk_9mmTfNY0VtPWO86Cj82XZHsS1-sP9NKAGg.AT2_H5Lo5hPL";const s=new Ide({container:"mapDiv",map:{basemap:"arcgis/outdoor"},constraints:{snapToZoom:!0},center:[-95.6926,38.7408],zoom:4}),h=()=>{Ee(()=>[s.stationary,s.scale,s.zoom,s.center,s.extent],([M,$,I,P,L])=>{M&&Ka.set(s)}),Ka.set(s)},f=new rpe({view:s}),m=new b$({expandIcon:"basemap",view:s,content:f,autoCollapse:!0,closeOnEsc:!0}),v=new mfe({view:s,includeDefaultSources:!1,sources:[{name:"arcgis geocoding services",singleLineFieldName:"SingleLine",placeholder:"Find place or address",apiKey:vt.apiKey,url:"https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer"}]}),x=new b$({expandIcon:"search",view:s,content:v,group:"top-left"});s.ui.add([m,x],"top-left"),s.when(h)}),[n]}class bfe extends p0{constructor(e){super(),d0(this,e,vfe,yfe,Yd,{})}}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */function wfe(t){return t.map(e=>{let i="";for(let n=0;n<e;n++)i+=((1+Math.random())*65536|0).toString(16).substring(1);return i}).join("-")}const hl=()=>wfe([2,1,1,1,3]);/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 *//*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var yj=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],F2=yj.join(","),vj=typeof Element>"u",Wd=vj?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,j2=!vj&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},G2=function t(e,i){var n;i===void 0&&(i=!0);var s=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"inert"),h=s===""||s==="true",f=h||i&&e&&t(e.parentNode);return f},_fe=function(e){var i,n=e==null||(i=e.getAttribute)===null||i===void 0?void 0:i.call(e,"contenteditable");return n===""||n==="true"},bj=function(e,i,n){if(G2(e))return[];var s=Array.prototype.slice.apply(e.querySelectorAll(F2));return i&&Wd.call(e,F2)&&s.unshift(e),s=s.filter(n),s},wj=function t(e,i,n){for(var s=[],h=Array.from(e);h.length;){var f=h.shift();if(!G2(f,!1))if(f.tagName==="SLOT"){var m=f.assignedElements(),v=m.length?m:f.children,x=t(v,!0,n);n.flatten?s.push.apply(s,x):s.push({scopeParent:f,candidates:x})}else{var M=Wd.call(f,F2);M&&n.filter(f)&&(i||!e.includes(f))&&s.push(f);var $=f.shadowRoot||typeof n.getShadowRoot=="function"&&n.getShadowRoot(f),I=!G2($,!1)&&(!n.shadowRootFilter||n.shadowRootFilter(f));if($&&I){var P=t($===!0?f.children:$.children,!0,n);n.flatten?s.push.apply(s,P):s.push({scopeParent:f,candidates:P})}else h.unshift.apply(h,f.children)}}return s},_j=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},hd=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||_fe(e))&&!_j(e)?0:e.tabIndex},xfe=function(e,i){var n=hd(e);return n<0&&i&&!_j(e)?0:n},Sfe=function(e,i){return e.tabIndex===i.tabIndex?e.documentOrder-i.documentOrder:e.tabIndex-i.tabIndex},xj=function(e){return e.tagName==="INPUT"},Tfe=function(e){return xj(e)&&e.type==="hidden"},Mfe=function(e){var i=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(n){return n.tagName==="SUMMARY"});return i},Efe=function(e,i){for(var n=0;n<e.length;n++)if(e[n].checked&&e[n].form===i)return e[n]},kfe=function(e){if(!e.name)return!0;var i=e.form||j2(e),n=function(m){return i.querySelectorAll('input[type="radio"][name="'+m+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=n(window.CSS.escape(e.name));else try{s=n(e.name)}catch(f){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",f.message),!1}var h=Efe(s,e.form);return!h||h===e},$fe=function(e){return xj(e)&&e.type==="radio"},Cfe=function(e){return $fe(e)&&!kfe(e)},Ife=function(e){var i,n=e&&j2(e),s=(i=n)===null||i===void 0?void 0:i.host,h=!1;if(n&&n!==e){var f,m,v;for(h=!!((f=s)!==null&&f!==void 0&&(m=f.ownerDocument)!==null&&m!==void 0&&m.contains(s)||e!=null&&(v=e.ownerDocument)!==null&&v!==void 0&&v.contains(e));!h&&s;){var x,M,$;n=j2(s),s=(x=n)===null||x===void 0?void 0:x.host,h=!!((M=s)!==null&&M!==void 0&&($=M.ownerDocument)!==null&&$!==void 0&&$.contains(s))}}return h},E$=function(e){var i=e.getBoundingClientRect(),n=i.width,s=i.height;return n===0&&s===0},Afe=function(e,i){var n=i.displayCheck,s=i.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var h=Wd.call(e,"details>summary:first-of-type"),f=h?e.parentElement:e;if(Wd.call(f,"details:not([open]) *"))return!0;if(!n||n==="full"||n==="legacy-full"){if(typeof s=="function"){for(var m=e;e;){var v=e.parentElement,x=j2(e);if(v&&!v.shadowRoot&&s(v)===!0)return E$(e);e.assignedSlot?e=e.assignedSlot:!v&&x!==e.ownerDocument?e=x.host:e=v}e=m}if(Ife(e))return!e.getClientRects().length;if(n!=="legacy-full")return!0}else if(n==="non-zero-area")return E$(e);return!1},Ofe=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var i=e.parentElement;i;){if(i.tagName==="FIELDSET"&&i.disabled){for(var n=0;n<i.children.length;n++){var s=i.children.item(n);if(s.tagName==="LEGEND")return Wd.call(i,"fieldset[disabled] *")?!0:!s.contains(e)}return!0}i=i.parentElement}return!1},V2=function(e,i){return!(i.disabled||G2(i)||Tfe(i)||Afe(i,e)||Mfe(i)||Ofe(i))},U4=function(e,i){return!(Cfe(i)||hd(i)<0||!V2(e,i))},Pfe=function(e){var i=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(i)||i>=0)},Rfe=function t(e){var i=[],n=[];return e.forEach(function(s,h){var f=!!s.scopeParent,m=f?s.scopeParent:s,v=xfe(m,f),x=f?t(s.candidates):m;v===0?f?i.push.apply(i,x):i.push(m):n.push({documentOrder:h,tabIndex:v,item:s,isScope:f,content:x})}),n.sort(Sfe).reduce(function(s,h){return h.isScope?s.push.apply(s,h.content):s.push(h.content),s},[]).concat(i)},Sj=function(e,i){i=i||{};var n;return i.getShadowRoot?n=wj([e],i.includeContainer,{filter:U4.bind(null,i),flatten:!1,getShadowRoot:i.getShadowRoot,shadowRootFilter:Pfe}):n=bj(e,i.includeContainer,U4.bind(null,i)),Rfe(n)},Lfe=function(e,i){i=i||{};var n;return i.getShadowRoot?n=wj([e],i.includeContainer,{filter:V2.bind(null,i),flatten:!0,getShadowRoot:i.getShadowRoot}):n=bj(e,i.includeContainer,V2.bind(null,i)),n},Cp=function(e,i){if(i=i||{},!e)throw new Error("No node provided");return Wd.call(e,F2)===!1?!1:U4(i,e)},Nfe=yj.concat("iframe").join(","),e5=function(e,i){if(i=i||{},!e)throw new Error("No node provided");return Wd.call(e,Nfe)===!1?!1:V2(i,e)};const Tj={getShadowRoot:!0};function n8e(t){return t?t.id=t.id||`${t.tagName.toLowerCase()}-${hl()}`:""}function Mj(t){return Array.isArray(t)?t:Array.from(t)}function Ua(t){const e="dir",i=`[${e}]`,n=sp(t,i);return n?n.getAttribute(e):"ltr"}function qT(t){return t.getRootNode()}function Dfe(t){const e=qT(t);return"host"in e?e:null}function Ej(t){return t.host||null}function f3(t,{selector:e,id:i}){function n(s){if(!s)return null;s.assignedSlot&&(s=s.assignedSlot);const h=qT(s),f=i?"getElementById"in h?h.getElementById(i):null:e?h.querySelector(e):null,m=Ej(h);return f||(m?n(m):null)}return n(t)}function sp(t,e){function i(n){return n?n.closest(e)||i(Ej(qT(n))):null}return i(t)}function zfe(t,e){return kj(t,e)}function kj(t,e){if(!t)return;const i=e(t);if(i!==void 0)return i;const{parentNode:n}=t;return kj(n instanceof ShadowRoot?n.host:n,e)}function Ffe(t,e){return!!zfe(e,i=>i===t?!0:void 0)}function jfe(t){return typeof(t==null?void 0:t.setFocus)=="function"}async function i0(t){if(t)return jfe(t)?t.setFocus():t.focus()}function Gfe(t){if(t)return Sj(t,Tj)[0]??t}function $j(t){var e;(e=Gfe(t))==null||e.focus()}const rm=":not([slot])";function q4(t,e,i){e&&!Array.isArray(e)&&typeof e!="string"&&(i=e,e=null);const n=e?Array.isArray(e)?e.map(s=>`[slot="${s}"]`).join(","):`[slot="${e}"]`:rm;return i!=null&&i.all?Vfe(t,n,i):Hfe(t,n,i)}function Cj(t,e){return t?Array.from(t.children||[]).filter(i=>i==null?void 0:i.matches(e)):[]}function Vfe(t,e,i){let n=e===rm?Cj(t,rm):Array.from(t.querySelectorAll(e));n=i&&i.direct===!1?n:n.filter(h=>h.parentElement===t),n=i!=null&&i.matches?n.filter(h=>h==null?void 0:h.matches(i.matches)):n;const s=i==null?void 0:i.selector;return s?n.map(h=>Array.from(h.querySelectorAll(s))).reduce((h,f)=>[...h,...f],[]).filter(h=>!!h):n}function Hfe(t,e,i){let n=e===rm?Cj(t,rm)[0]||null:t.querySelector(e);n=i&&i.direct===!1||(n==null?void 0:n.parentElement)===t?n:null,n=i!=null&&i.matches?n!=null&&n.matches(i.matches)?n:null:n;const s=i==null?void 0:i.selector;return s?n==null?void 0:n.querySelector(s):n}function k$(t,e){return Array.from(t.children).filter(i=>i.matches(e))}function sm(t,e,i){if(typeof e=="string"&&e!=="")return e;if(e==="")return t[i]}function bn(t){return(!!t).toString()}function Bfe(t){return Di(t)||qfe(t)}function Ufe(t){return Wfe(t).filter(e=>e.nodeType===Node.TEXT_NODE).map(e=>e.textContent).join("").trim()}function qfe(t){return!!Ufe(t)}function Wfe(t){return t.currentTarget.assignedNodes({flatten:!0})}function Di(t){return!!Nf(t).length}function Nf(t){return t.currentTarget.assignedElements({flatten:!0})}function W4(t){return!!(t.isPrimary&&t.button===0)}function Zfe(t){return t.detail===0}const ig=(t,e,i,n=!0)=>{const s=t.indexOf(e),h=s===0,f=s===t.length-1;n&&(i=i==="previous"&&h?"last":i==="next"&&f?"first":i);let m;return i==="previous"?m=t[s-1]||t[n?t.length-1:s]:i==="next"?m=t[s+1]||t[n?0:s]:i==="last"?m=t[t.length-1]:m=t[0],i0(m),m};function Jfe(t,e){if(t.parentNode!==e.parentNode)return!1;const i=Array.from(t.parentNode.children);return i.indexOf(t)<i.indexOf(e)}async function Kfe(t,e,i,n){return Yfe(t,e,"transition",i,n)}async function Yfe(t,e,i,n,s){const h=window.getComputedStyle(t),f=h.transitionDuration,m=h.transitionProperty,v=f.split(","),M=m.split(",").indexOf(e),$=v[M]??v[0];function I(){n==null||n(),s==null||s()}if($==="0s"){I();return}const P="transitionstart",L="transitionend",z="transitioncancel";return new Promise(F=>{const U=window.setTimeout(()=>{t.removeEventListener(P,W),t.removeEventListener(L,K),t.removeEventListener(z,K),I(),F()},parseFloat($)*1e3);t.addEventListener(P,W),t.addEventListener(L,K),t.addEventListener(z,K);function W(J){J.target===t&&$$(J)===e&&(window.clearTimeout(U),t.removeEventListener(P,W),n==null||n())}function K(J){J.target===t&&$$(J)===e&&(t.removeEventListener(L,K),t.removeEventListener(z,K),s==null||s(),F())}})}function Xfe(t){return"propertyName"in t}function $$(t){return Xfe(t)?t.propertyName:t.animationName}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */const Qfe=["calcite-input","calcite-input-number","calcite-input-text","calcite-text-area"];function e0e(t){return`${t.split("-").map((n,s)=>s===0?n:`${n[0].toUpperCase()}${n.slice(1)}`).join("")}${Qfe.includes(t)?"Input":"Change"}`}const Z4="hidden-form-input";function WT(t){return"checked"in t}const J4=new WeakMap,ZT=new WeakSet;function t0e(t,e){if(sp(e.parentElement,"[form]"))return!0;const n="calciteInternalFormComponentRegister";let s=!1;return t.addEventListener(n,h=>{s=h.composedPath().some(f=>ZT.has(f)),h.stopPropagation()},{once:!0}),e.dispatchEvent(new CustomEvent(n,{bubbles:!0,composed:!0})),s}function i0e(t,{status:e,message:i,icon:n}){"status"in t&&(t.status=e),"validationIcon"in t&&typeof t.validationIcon!="string"&&(t.validationIcon=n),"validationMessage"in t&&!t.validationMessage&&(t.validationMessage=i)}function Ij(t){return t.nodeName==="CALCITE-RADIO-BUTTON"?sp(t,"calcite-radio-button-group"):t}const n0e=new CustomEvent("calciteInvalid",{bubbles:!0,composed:!0});function C$(t){var m;const e=t==null?void 0:t.target,i=e==null?void 0:e.validationMessage,n=Ij(e==null?void 0:e.parentElement);if(!n)return;const s=(m=n==null?void 0:n.nodeName)==null?void 0:m.toLowerCase(),h=s==null?void 0:s.split("-");if(h.length<2||h[0]!=="calcite")return;t==null||t.preventDefault(),"validity"in n&&(n.validity=e==null?void 0:e.validity),n.dispatchEvent(n0e),i0e(n,{message:i,icon:!0,status:"invalid"});const f=e0e(s);n.addEventListener(f,()=>{"status"in n&&(n.status="idle"),"validationIcon"in n&&!n.validationIcon&&(n.validationIcon=!1),"validationMessage"in n&&n.validationMessage===i&&(n.validationMessage=""),"validity"in n&&(n.validity=e==null?void 0:e.validity)},{once:!0})}function Aj(t){const{formEl:e}=t;return e?(e.addEventListener("invalid",C$,!0),e.requestSubmit(),e.removeEventListener("invalid",C$,!0),requestAnimationFrame(()=>{const i=e.querySelectorAll("[status=invalid]");for(const n of i)if(n!=null&&n.validationMessage){n==null||n.setFocus();break}}),!0):!1}function r0e(t){var e;(e=t.formEl)==null||e.reset()}function JT(t){const{el:e,value:i}=t,n=Oj(t);if(!n||t0e(n,e))return;t.formEl=n,t.defaultValue=i,WT(t)&&(t.defaultChecked=t.checked);const s=(t.onFormReset||s0e).bind(t);n.addEventListener("reset",s),J4.set(t.el,s),ZT.add(e)}function Oj(t){const{el:e,form:i}=t;return i?f3(e,{id:i}):sp(e,"form")}function s0e(){if("status"in this&&(this.status="idle"),"validationIcon"in this&&(this.validationIcon=!1),"validationMessage"in this&&(this.validationMessage=""),WT(this)){this.checked=this.defaultChecked;return}this.value=this.defaultValue}function KT(t){const{el:e,formEl:i}=t;if(!i)return;const n=J4.get(e);i.removeEventListener("reset",n),J4.delete(e),t.formEl=null,ZT.delete(e)}function o0e(t,e){t.defaultValue=e}const K4="calciteInternalHiddenInputInput",Pj=t=>{t.target.dispatchEvent(new CustomEvent(K4,{bubbles:!0}))},I$=t=>t.removeEventListener("input",Pj);function a0e(t){const{el:e,formEl:i,name:n,value:s}=t,{ownerDocument:h}=e,f=e.querySelectorAll(`input[slot="${Z4}"]`);if(!i||!n){f.forEach($=>{I$($),$.remove()});return}const m=Array.isArray(s)?s:[s],v=[],x=new Set;f.forEach($=>{const I=m.find(P=>P==$.value);I!=null?(x.add(I),A$(t,$,I)):v.push($)});let M;m.forEach($=>{if(x.has($))return;let I=v.pop();I||(I=h.createElement("input"),I.slot=Z4),M||(M=h.createDocumentFragment()),M.append(I),I.addEventListener("input",Pj),A$(t,I,$)}),M&&e.append(M),v.forEach($=>{I$($),$.remove()})}function A$(t,e,i){var x;const{defaultValue:n,disabled:s,form:h,name:f,required:m}=t;e.defaultValue=n,e.disabled=s,e.name=f,e.required=m,e.tabIndex=-1,h?e.setAttribute("form",h):e.removeAttribute("form"),WT(t)?(e.checked=t.checked,e.defaultChecked=t.defaultChecked,e.value=t.checked?i||"on":""):e.value=i||"",(x=t.syncHiddenFormInput)==null||x.call(t,e);const v=Ij(t.el);if(v&&"validity"in v)for(const M in{...e==null?void 0:e.validity})v.validity[M]=e.validity[M]}const YT=({component:t})=>(a0e(t),X("slot",{name:Z4}));/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */function l0e(){return navigator.userAgentData}function c0e(){const t=l0e();return t!=null&&t.brands?t.brands.map(({brand:e,version:i})=>`${e}/${i}`).join(" "):navigator.userAgent}const op=/firefox/i.test(c0e()),Pd=op?new WeakMap:null;function h0e(){const{disabled:t}=this;t||HTMLElement.prototype.click.call(this)}function Rj(t){const e=t.target;if(op&&!Pd.get(e))return;const{disabled:i}=e;i&&t.preventDefault()}const Lj=["mousedown","mouseup","click"];function Nj(t){const e=t.target;op&&!Pd.get(e)||e.disabled&&(t.stopImmediatePropagation(),t.preventDefault())}const H2={capture:!0};function ul(t){if(t.disabled){t.el.setAttribute("aria-disabled","true"),t.el.contains(document.activeElement)&&document.activeElement.blur(),Dj(t);return}zj(t),t.el.removeAttribute("aria-disabled")}function Dj(t){if(t.el.click=h0e,op){const e=u0e(t),i=Pd.get(t.el);i!==e&&(Y4(i),Pd.set(t.el,e)),O$(Pd.get(t.el));return}O$(t.el)}function O$(t){t&&(t.addEventListener("pointerdown",Rj,H2),Lj.forEach(e=>t.addEventListener(e,Nj,H2)))}function u0e(t){return t.el.parentElement||t.el}function zj(t){if(delete t.el.click,op){Y4(Pd.get(t.el)),Pd.delete(t.el);return}Y4(t.el)}function Y4(t){t&&(t.removeEventListener("pointerdown",Rj,H2),Lj.forEach(e=>t.removeEventListener(e,Nj,H2)))}function $c(t){!t.disabled||!op||Dj(t)}function Cc(t){op&&zj(t)}const d0e={container:"interaction-container"};function dl({disabled:t},e){return X("div",{class:d0e.container,inert:t},...e)}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */function Ui(t){return t==="l"?"m":"s"}async function p0e(t){await(f0e(t)?t.componentOnReady():new Promise(e=>requestAnimationFrame(()=>e())))}function f0e(t){return typeof t.componentOnReady=="function"}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */const Fj="calciteInternalLabelClick",g3="calciteInternalLabelConnected",B2="calciteInternalLabelDisconnected",P$="calcite-label",n0=new WeakMap,Ig=new WeakMap,om=new WeakMap,U2=new WeakMap,Rd=new Set,g0e=t=>{const{id:e}=t,i=e&&f3(t,{selector:`${P$}[for="${e}"]`});if(i)return i;const n=sp(t,P$);return!n||m0e(n,t)?null:n};function m0e(t,e){let i;const n="custom-element-ancestor-check",s=f=>{f.stopImmediatePropagation();const m=f.composedPath();i=m.slice(m.indexOf(e),m.indexOf(t))};return t.addEventListener(n,s,{once:!0}),e.dispatchEvent(new CustomEvent(n,{composed:!0,bubbles:!0})),t.removeEventListener(n,s),i.filter(f=>f!==e&&f!==t).filter(f=>{var m;return(m=f.tagName)==null?void 0:m.includes("-")}).length>0}function C0(t){if(!t)return;const e=g0e(t.el);if(Ig.has(e)&&e===t.labelEl||!e&&Rd.has(t))return;const i=v0e.bind(t);if(e){t.labelEl=e;const n=n0.get(e)||[];n.push(t),n0.set(e,n.sort(jj)),Ig.has(t.labelEl)||(Ig.set(t.labelEl,R$),t.labelEl.addEventListener(Fj,R$)),Rd.delete(t),document.removeEventListener(g3,om.get(t)),U2.set(t,i),document.addEventListener(B2,i)}else Rd.has(t)||(i(),document.removeEventListener(B2,U2.get(t)))}function m3(t){if(!t||(Rd.delete(t),document.removeEventListener(g3,om.get(t)),document.removeEventListener(B2,U2.get(t)),om.delete(t),U2.delete(t),!t.labelEl))return;const e=n0.get(t.labelEl);e.length===1&&(t.labelEl.removeEventListener(Fj,Ig.get(t.labelEl)),Ig.delete(t.labelEl)),n0.set(t.labelEl,e.filter(i=>i!==t).sort(jj)),t.labelEl=null}function jj(t,e){return Jfe(t.el,e.el)?-1:1}function am(t){var e,i;return t.label||((i=(e=t.labelEl)==null?void 0:e.textContent)==null?void 0:i.trim())||""}function R$(t){const e=t.detail.sourceEvent.target,i=n0.get(this),n=i.find(f=>f.el===e);if(i.includes(n))return;const h=i[0];h.disabled||h.onLabelClick(t)}function y0e(){Rd.has(this)&&C0(this)}function v0e(){Rd.add(this);const t=om.get(this)||y0e.bind(this);om.set(this,t),document.addEventListener(g3,t)}async function b0e(t){var n;if(await p0e(t),n0.has(t))return;const i=(n=t.ownerDocument)==null?void 0:n.getElementById(t.for);i&&requestAnimationFrame(()=>{for(const s of Rd)if(s.el===i){C0(s);break}})}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */const Gj=new WeakMap,Vj=new WeakMap;function co(t){Vj.set(t,new Promise(e=>Gj.set(t,e)))}function ho(t){Gj.get(t)()}function X4(t){return Vj.get(t)}async function uo(t){return await X4(t),pu(t),new Promise(e=>requestAnimationFrame(()=>e()))}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */function y3(t){return t==="Enter"||t===" "}const XT=["0","1","2","3","4","5","6","7","8","9"];/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */function Wi(t,e,i){const n=w0e(t);return new n(e,i)}function w0e(t){class e extends window.MutationObserver{constructor(n){super(n),this.observedEntry=[],this.callback=n}observe(n,s){return this.observedEntry.push({target:n,options:s}),super.observe(n,s)}unobserve(n){const s=this.observedEntry.filter(h=>h.target!==n);this.observedEntry=[],this.callback(super.takeRecords(),this),this.disconnect(),s.forEach(h=>this.observe(h.target,h.options))}}return function(){return t==="intersection"?window.IntersectionObserver:t==="mutation"?e:window.ResizeObserver}()}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */const _0e=new RegExp("\\.(0+)?$"),x0e=new RegExp("0+$");class Ot{constructor(e){if(e instanceof Ot)return e;const[i,n]=I0e(e).split(".").concat("");this.value=BigInt(i+n.padEnd(Ot.DECIMALS,"0").slice(0,Ot.DECIMALS))+BigInt(Ot.ROUNDED&&n[Ot.DECIMALS]>="5"),this.isNegative=e.charAt(0)==="-"}getIntegersAndDecimals(){const e=this.value.toString().replace("-","").padStart(Ot.DECIMALS+1,"0"),i=e.slice(0,-Ot.DECIMALS),n=e.slice(-Ot.DECIMALS).replace(x0e,"");return{integers:i,decimals:n}}toString(){const{integers:e,decimals:i}=this.getIntegersAndDecimals();return`${this.isNegative?"-":""}${e}${i.length?"."+i:""}`}formatToParts(e){const{integers:i,decimals:n}=this.getIntegersAndDecimals(),s=e.numberFormatter.formatToParts(BigInt(i));return this.isNegative&&s.unshift({type:"minusSign",value:e.minusSign}),n.length&&(s.push({type:"decimal",value:e.decimal}),n.split("").forEach(h=>s.push({type:"fraction",value:h}))),s}format(e){const{integers:i,decimals:n}=this.getIntegersAndDecimals(),s=`${this.isNegative?e.minusSign:""}${e.numberFormatter.format(BigInt(i))}`,h=n.length?`${e.decimal}${n.split("").map(f=>e.numberFormatter.format(Number(f))).join("")}`:"";return`${s}${h}`}add(e){return Ot.fromBigInt(this.value+new Ot(e).value)}subtract(e){return Ot.fromBigInt(this.value-new Ot(e).value)}multiply(e){return Ot._divRound(this.value*new Ot(e).value,Ot.SHIFT)}divide(e){return Ot._divRound(this.value*Ot.SHIFT,new Ot(e).value)}}Ot.DECIMALS=100;Ot.ROUNDED=!0;Ot.SHIFT=BigInt("1"+"0".repeat(Ot.DECIMALS));Ot._divRound=(t,e)=>Ot.fromBigInt(t/e+(Ot.ROUNDED?t*BigInt(2)/e%BigInt(2):BigInt(0)));Ot.fromBigInt=t=>Object.assign(Object.create(Ot.prototype),{value:t,isNegative:t<BigInt(0)});function za(t){return!(!t||isNaN(Number(t)))}function S0e(t){return!t||!A0e(t)?"":q2(t,e=>{let i=!1;const n=e.split("").filter((s,h)=>s.match(/\./g)&&!i?(i=!0,!0):s.match(/-/g)&&h===0?!0:XT.includes(s)).join("");return za(n)?new Ot(n).toString():""})}const Hj=/^([-0])0+(?=\d)/,T0e=/(?!^\.)\.$/,M0e=/(?!^-)-/g,E0e=/^-\b0\b\.?0*$/,k0e=/0*$/,$0e=t=>q2(t,e=>{const i=e.replace(M0e,"").replace(T0e,"").replace(Hj,"$1");return za(i)?E0e.test(i)?i:C0e(i):e});function C0e(t){const e=t.split(".")[1],i=new Ot(t).toString(),[n,s]=i.split(".");return e&&s!==e?`${n}.${e}`:i}function q2(t,e){if(!t)return t;const i=t.toLowerCase().indexOf("e")+1;return i?t.replace(/[eE]*$/g,"").substring(0,i).concat(t.slice(i).replace(/[eE]/g,"")).split(/[eE]/).map((n,s)=>e(s===1?n.replace(/\./g,""):n)).join("e").replace(/^e/,"1e"):e(t)}function I0e(t){const e=t.split(/[eE]/);if(e.length===1)return t;const i=+t;if(Number.isSafeInteger(i))return`${i}`;const n=t.charAt(0)==="-",s=+e[1],h=e[0].split("."),f=(n?h[0].substring(1):h[0])||"",m=h[1]||"",v=($,I)=>{const P=Math.abs(I)-$.length,L=P>0?`${"0".repeat(P)}${$}`:$;return`${L.slice(0,I)}.${L.slice(I)}`},x=($,I)=>{const P=I>$.length?`${$}${"0".repeat(I-$.length)}`:$;return`${P.slice(0,I)}.${P.slice(I)}`},M=s>0?`${f}${x(m,s)}`:`${v(f,s)}${m}`;return`${n?"-":""}${M.charAt(0)==="."?"0":""}${M.replace(_0e,"").replace(Hj,"")}`}function A0e(t){return XT.some(e=>t.includes(e))}function O0e(t,e,i){const n=e.split(".")[1];if(n){const s=n.match(k0e)[0];if(s&&i.delocalize(t).length!==e.length&&n.indexOf("e")===-1){const h=i.decimal;return t=t.includes(h)?t:`${t}${h}`,t.padEnd(t.length+s.length,i.localize("0"))}}return t}const iu="en",P0e=["ar","bg","bs","ca","cs","da","de","el",iu,"es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","no","nl","pl","pt-BR","pt-PT","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-HK","zh-TW"],R0e=["ar","bg","bs","ca","cs","da","de","de-AT","de-CH","el",iu,"en-AU","en-CA","en-GB","es","es-MX","et","fi","fr","fr-CH","he","hi","hr","hu","id","it","it-CH","ja","ko","lt","lv","mk","no","nl","pl","pt","pt-PT","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-HK","zh-TW"],L0e=["arab","arabext","latn"],Bj=t=>L0e.includes(t),t5=new Intl.NumberFormat().resolvedOptions().numberingSystem,Uj=t5==="arab"||!Bj(t5)?"latn":t5,N0e=t=>Bj(t)?t:Uj;function qj(t,e="cldr"){const i=e==="cldr"?R0e:P0e;return t?i.includes(t)?t:(t=t.toLowerCase(),t==="nb"?"no":e==="t9n"&&t==="pt"?"pt-BR":(t.includes("-")&&(t=t.replace(/(\w+)-(\w+)/,(n,s,h)=>`${s}-${h.toUpperCase()}`),i.includes(t)||(t=t.split("-")[0])),t==="zh"?"zh-CN":i.includes(t)?t:(console.warn(`Translations for the "${t}" locale are not available and will fall back to the default, English (en).`),iu))):iu}const lm=new Set;function po(t){D0e(t),lm.size===0&&(_b==null||_b.observe(document.documentElement,{attributes:!0,attributeFilter:["lang"],subtree:!0})),lm.add(t)}function D0e(t){t.effectiveLocale=z0e(t)}function fo(t){lm.delete(t),lm.size===0&&_b.disconnect()}const _b=Wi("mutation",t=>{t.forEach(e=>{const i=e.target;lm.forEach(n=>{if(!Ffe(i,n.el))return;const h=sp(n.el,"[lang]");if(!h){n.effectiveLocale=iu;return}const f=h.lang;n.effectiveLocale=h.hasAttribute("lang")&&f===""?iu:f})})});function z0e(t){var e;return t.el.lang||((e=sp(t.el,"[lang]"))==null?void 0:e.lang)||document.documentElement.lang||iu}class Wj{constructor(){this.delocalize=e=>this._numberFormatOptions?q2(e,i=>i.replace(new RegExp(`[${this._minusSign}]`,"g"),"-").replace(new RegExp(`[${this._group}]`,"g"),"").replace(new RegExp(`[${this._decimal}]`,"g"),".").replace(new RegExp(`[${this._digits.join("")}]`,"g"),this._getDigitIndex)):e,this.localize=e=>this._numberFormatOptions?q2(e,i=>za(i.trim())?new Ot(i.trim()).format(this).replace(new RegExp(`[${this._actualGroup}]`,"g"),this._group):i):e}get group(){return this._group}get decimal(){return this._decimal}get minusSign(){return this._minusSign}get digits(){return this._digits}get numberFormatter(){return this._numberFormatter}get numberFormatOptions(){return this._numberFormatOptions}set numberFormatOptions(e){if(e.locale=qj(e==null?void 0:e.locale),e.numberingSystem=N0e(e==null?void 0:e.numberingSystem),!this._numberFormatOptions&&e.locale===iu&&e.numberingSystem===Uj&&Object.keys(e).length===2||JSON.stringify(this._numberFormatOptions)===JSON.stringify(e))return;this._numberFormatOptions=e,this._numberFormatter=new Intl.NumberFormat(this._numberFormatOptions.locale,this._numberFormatOptions),this._digits=[...new Intl.NumberFormat(this._numberFormatOptions.locale,{useGrouping:!1,numberingSystem:this._numberFormatOptions.numberingSystem}).format(9876543210)].reverse();const i=new Map(this._digits.map((s,h)=>[s,h])),n=new Intl.NumberFormat(this._numberFormatOptions.locale,{numberingSystem:this._numberFormatOptions.numberingSystem}).formatToParts(-123456789e-1);this._actualGroup=n.find(s=>s.type==="group").value,this._group=this._actualGroup.trim().length===0||this._actualGroup==" "?"Â ":this._actualGroup,this._decimal=n.find(s=>s.type==="decimal").value,this._minusSign=n.find(s=>s.type==="minusSign").value,this._getDigitIndex=s=>i.get(s)}}const ps=new Wj;/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */const Zy={};async function F0e(t,e){const i=`${e}_${t}`;return Zy[i]||(Zy[i]=fetch(PT(`./assets/${e}/t9n/messages_${t}.json`)).then(n=>(n.ok||L$(),n.json())).catch(()=>L$())),Zy[i]}function L$(){throw new Error("could not fetch component message bundle")}function QT(t){t.messages={...t.defaultMessages,...t.messageOverrides}}function j0e(){}async function go(t){t.defaultMessages=await Zj(t,t.effectiveLocale),QT(t)}async function Zj(t,e){const{el:i}=t,s=i.tagName.toLowerCase().replace("calcite-","");return F0e(qj(e,"t9n"),s)}async function mo(t,e){t.defaultMessages=await Zj(t,e),QT(t)}function yo(t){t.onMessagesChange=G0e}function vo(t){t.onMessagesChange=j0e}function G0e(){QT(this)}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */const V0e={icon:"icon",flipRtl:"flip-rtl"},Jj={},i5={},Kj={s:16,m:24,l:32};function Yj({icon:t,scale:e}){const i=Kj[e],n=U0e(t),s=n.charAt(n.length-1)==="F";return`${s?n.substring(0,n.length-1):n}${i}${s?"F":""}`}async function H0e(t){const e=Yj(t),i=Xj(e);if(i)return i;i5[e]||(i5[e]=fetch(PT(`./assets/icon/${e}.json`)).then(s=>s.json()).catch(()=>(console.error(`"${e}" is not a valid calcite-ui-icon name`),"")));const n=await i5[e];return Jj[e]=n,n}function B0e(t){return Xj(Yj(t))}function Xj(t){return Jj[t]}function U0e(t){const e=!isNaN(Number(t.charAt(0))),i=t.split("-");if(i.length>0){const s=/[a-z]/i;t=i.map((h,f)=>h.replace(s,function(v,x){return f===0&&x===0?v:v.toUpperCase()})).join("")}return e?`i${t}`:t}const q0e=":host{display:inline-flex;color:var(--calcite-ui-icon-color)}:host([scale=s]){inline-size:16px;block-size:16px;min-inline-size:16px;min-block-size:16px}:host([scale=m]){inline-size:24px;block-size:24px;min-inline-size:24px;min-block-size:24px}:host([scale=l]){inline-size:32px;block-size:32px;min-inline-size:32px;min-block-size:32px}.flip-rtl{transform:scaleX(-1)}.svg{display:block}:host([hidden]){display:none}[hidden]{display:none}",W0e=q0e,Z0e=oi(class extends ai{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.icon=null,this.flipRtl=!1,this.scale="m",this.textLabel=void 0,this.pathData=void 0,this.visible=!1}connectedCallback(){this.visible||this.waitUntilVisible(()=>{this.visible=!0,this.loadIconPathData()})}disconnectedCallback(){var e;(e=this.intersectionObserver)==null||e.disconnect(),this.intersectionObserver=null}render(){const{el:e,flipRtl:i,pathData:n,scale:s,textLabel:h}=this,f=Ua(e),m=Kj[s],v=!!h,x=[].concat(n||"");return X(cn,{key:"c96ce47b404bd4f75deb2261a37963679b818452","aria-hidden":bn(!v),"aria-label":v?h:null,role:v?"img":null},X("svg",{key:"614da909e3822ade4a056af0180bb21e9eba9ad2","aria-hidden":"true",class:{[V0e.flipRtl]:f==="rtl"&&i,svg:!0},fill:"currentColor",height:"100%",viewBox:`0 0 ${m} ${m}`,width:"100%",xmlns:"http://www.w3.org/2000/svg"},x.map(M=>typeof M=="string"?X("path",{d:M}):X("path",{d:M.d,opacity:"opacity"in M?M.opacity:1}))))}async loadIconPathData(){const{icon:e,scale:i,visible:n}=this;if(!e||!n)return;const s={icon:e,scale:i},h=B0e(s)||await H0e(s);e===this.icon&&(this.pathData=h)}waitUntilVisible(e){if(this.intersectionObserver=Wi("intersection",i=>{i.forEach(n=>{n.isIntersecting&&(this.intersectionObserver.disconnect(),this.intersectionObserver=null,e())})},{rootMargin:"50px"}),!this.intersectionObserver){e();return}this.intersectionObserver.observe(this.el)}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{icon:["loadIconPathData"],scale:["loadIconPathData"]}}static get style(){return W0e}},[1,"calcite-icon",{icon:[513],flipRtl:[516,"flip-rtl"],scale:[513],textLabel:[1,"text-label"],pathData:[32],visible:[32]},void 0,{icon:["loadIconPathData"],scale:["loadIconPathData"]}]);function Mr(){if(typeof customElements>"u")return;["calcite-icon"].forEach(e=>{switch(e){case"calcite-icon":customElements.get(e)||customElements.define(e,Z0e);break}})}Mr();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */const J0e='@charset "UTF-8";@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:host{position:relative;margin-inline:auto;display:none;align-items:center;justify-content:center;opacity:1;min-block-size:var(--calcite-loader-size);font-size:var(--calcite-loader-font-size);stroke:var(--calcite-color-brand);stroke-width:3;fill:none;transform:scale(1, 1);animation:loader-color-shift calc(var(--calcite-internal-animation-timing-slow) / var(--calcite-internal-duration-factor) * 2 / var(--calcite-internal-duration-factor)) alternate-reverse infinite linear;padding-block:var(--calcite-loader-padding, 4rem);will-change:contents}:host([scale=s]){--calcite-loader-font-size:var(--calcite-font-size--2);--calcite-loader-size:2rem;--calcite-loader-size-inline:0.75rem}:host([scale=m]){--calcite-loader-font-size:var(--calcite-font-size-0);--calcite-loader-size:4rem;--calcite-loader-size-inline:1rem}:host([scale=l]){--calcite-loader-font-size:var(--calcite-font-size-2);--calcite-loader-size:6rem;--calcite-loader-size-inline:1.5rem}:host([no-padding]){padding-block:0px}:host{display:flex}.loader__text{display:block;text-align:center;font-size:var(--calcite-font-size--2);line-height:1rem;color:var(--calcite-color-text-1);margin-block-start:calc(var(--calcite-loader-size) + 1.5rem)}.loader__percentage{position:absolute;display:block;text-align:center;color:var(--calcite-color-text-1);font-size:var(--calcite-loader-font-size);inline-size:var(--calcite-loader-size);inset-inline-start:50%;margin-inline-start:calc(var(--calcite-loader-size) / 2 * -1);line-height:0.25;transform:scale(1, 1)}.loader__svgs{position:absolute;overflow:visible;opacity:1;inline-size:var(--calcite-loader-size);block-size:var(--calcite-loader-size);inset-inline-start:50%;margin-inline-start:calc(var(--calcite-loader-size) / 2 * -1);animation-iteration-count:infinite;animation-timing-function:linear;animation-duration:calc(var(--calcite-internal-animation-timing-slow) / var(--calcite-internal-duration-factor) * 6.66 / var(--calcite-internal-duration-factor));animation-name:loader-clockwise}.loader__svg{position:absolute;inset-block-start:0px;transform-origin:center;overflow:visible;inset-inline-start:0;inline-size:var(--calcite-loader-size);block-size:var(--calcite-loader-size);animation-iteration-count:infinite;animation-timing-function:linear}.loader__svg--1{animation-name:loader-offset-1}.loader__svg--2{animation-name:loader-offset-2}.loader__svg--3{animation-name:loader-offset-3}:host([type=determinate]){animation:none;stroke:var(--calcite-color-border-3)}:host([type=determinate]) .loader__svgs{animation:none}:host([type=determinate]) .loader__svg--3{animation:none;stroke:var(--calcite-color-brand);stroke-dasharray:150.79632;transform:rotate(-90deg);transition:all var(--calcite-internal-animation-timing-fast) linear}:host([inline]){position:relative;margin:0px;animation:none;stroke:currentColor;stroke-width:2;padding-block:0px;block-size:var(--calcite-loader-size-inline);min-block-size:var(--calcite-loader-size-inline);inline-size:var(--calcite-loader-size-inline);margin-inline-end:calc(var(--calcite-loader-size-inline) * 0.5);vertical-align:calc(var(--calcite-loader-size-inline) * -1 * 0.2)}:host([inline]) .loader__svgs{inset-block-start:0px;margin:0px;inset-inline-start:0;inline-size:var(--calcite-loader-size-inline);block-size:var(--calcite-loader-size-inline)}:host([inline]) .loader__svg{inline-size:var(--calcite-loader-size-inline);block-size:var(--calcite-loader-size-inline)}:host([complete]){opacity:0;transform:scale(0.75, 0.75);transform-origin:center;transition:opacity var(--calcite-internal-animation-timing-medium) linear 1000ms, transform var(--calcite-internal-animation-timing-medium) linear 1000ms}:host([complete]) .loader__svgs{opacity:0;transform:scale(0.75, 0.75);transform-origin:center;transition:opacity calc(180ms * var(--calcite-internal-duration-factor)) linear 800ms, transform calc(180ms * var(--calcite-internal-duration-factor)) linear 800ms}:host([complete]) .loader__percentage{color:var(--calcite-color-brand);transform:scale(1.05, 1.05);transform-origin:center;transition:color var(--calcite-internal-animation-timing-medium) linear, transform var(--calcite-internal-animation-timing-medium) linear}.loader__svg--1{stroke-dasharray:27.9252444444 139.6262222222;animation-duration:calc(var(--calcite-internal-animation-timing-slow) / var(--calcite-internal-duration-factor) * 4.8 / var(--calcite-internal-duration-factor))}@keyframes loader-offset-1{0%{stroke-dasharray:27.9252444444 251.3272;stroke-dashoffset:0}50%{stroke-dasharray:139.6262222222 139.6262222222;stroke-dashoffset:-83.7757333333}100%{stroke-dasharray:27.9252444444 251.3272;stroke-dashoffset:-279.2524444444}}.loader__svg--2{stroke-dasharray:55.8504888889 139.6262222222;animation-duration:calc(var(--calcite-internal-animation-timing-slow) / var(--calcite-internal-duration-factor) * 6.4 / var(--calcite-internal-duration-factor))}@keyframes loader-offset-2{0%{stroke-dasharray:55.8504888889 223.4019555556;stroke-dashoffset:0}50%{stroke-dasharray:139.6262222222 139.6262222222;stroke-dashoffset:-97.7383555556}100%{stroke-dasharray:55.8504888889 223.4019555556;stroke-dashoffset:-279.2524444444}}.loader__svg--3{stroke-dasharray:13.9626222222 139.6262222222;animation-duration:calc(var(--calcite-internal-animation-timing-slow) / var(--calcite-internal-duration-factor) * 7.734 / var(--calcite-internal-duration-factor))}@keyframes loader-offset-3{0%{stroke-dasharray:13.9626222222 265.2898222222;stroke-dashoffset:0}50%{stroke-dasharray:139.6262222222 139.6262222222;stroke-dashoffset:-76.7944222222}100%{stroke-dasharray:13.9626222222 265.2898222222;stroke-dashoffset:-279.2524444444}}@keyframes loader-color-shift{0%{stroke:var(--calcite-color-brand)}33%{stroke:var(--calcite-color-brand-press)}66%{stroke:var(--calcite-color-brand-hover)}100%{stroke:var(--calcite-color-brand)}}@keyframes loader-clockwise{100%{transform:rotate(360deg)}}:host([hidden]){display:none}[hidden]{display:none}',K0e=J0e,Y0e=oi(class extends ai{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.inline=!1,this.label=void 0,this.scale="m",this.type=void 0,this.value=0,this.text=""}render(){const{el:e,inline:i,label:n,scale:s,text:h,type:f,value:m}=this,v=e.id||hl(),x=.45,M=i?this.getInlineSize(s):this.getSize(s),$=M*x,I=`0 0 ${M} ${M}`,P=f==="determinate",L=2*$*Math.PI,z=m/100*L,F=L-z,U=Math.floor(m),W={"aria-valuenow":U,"aria-valuemin":0,"aria-valuemax":100,complete:U===100},K={r:$,cx:M/2,cy:M/2},J={"stroke-dasharray":`${z} ${F}`};return X(cn,{key:"87cb8ad468f0121ed0e25680b1a03edf458565e9","aria-label":n,id:v,role:"progressbar",...P?W:{}},X("div",{key:"b6e9c4c387faa37b6677c06bacc755054948e55d",class:"loader__svgs"},X("svg",{key:"831f6e98185262bd098e237eb0380957a018b9bc","aria-hidden":"true",class:"loader__svg loader__svg--1",viewBox:I},X("circle",{key:"2745eea697ac72478dfb42660fb0e8f441bdfb43",...K})),X("svg",{key:"744319fc7e1ba1ad47191a1349c406504e90e102","aria-hidden":"true",class:"loader__svg loader__svg--2",viewBox:I},X("circle",{key:"7325a6ecae40cd9e946b353dd505aba7d219e705",...K})),X("svg",{key:"320206b6b6366ae6847d5a23f3f46d462a374ecc","aria-hidden":"true",class:"loader__svg loader__svg--3",viewBox:I,...P?{style:J}:{}},X("circle",{key:"a220af184f43aed623157c4b2c742b1d65d6bde3",...K}))),h&&X("div",{key:"88744f93a3cb2278c35e2dd1708260841eeaee7c",class:"loader__text"},h),P&&X("div",{key:"1b292414df2d7a39ff5ebf1ca491ceb290485263",class:"loader__percentage"},m))}getSize(e){return{s:32,m:56,l:80}[e]}getInlineSize(e){return{s:12,m:16,l:20}[e]}get el(){return this}static get style(){return K0e}},[1,"calcite-loader",{inline:[516],label:[1],scale:[513],type:[513],value:[2],text:[1]}]);function fu(){if(typeof customElements>"u")return;["calcite-loader"].forEach(e=>{switch(e){case"calcite-loader":customElements.get(e)||customElements.define(e,Y0e);break}})}fu();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */const es={buttonLoader:"calcite-button--loader",content:"content",contentSlotted:"content--slotted",icon:"icon",iconStart:"icon--start",iconEnd:"icon--end",loadingIn:"loading-in",loadingOut:"loading-out",iconStartEmpty:"icon-start-empty",iconEndEmpty:"icon-end-empty",buttonPadding:"button-padding",buttonPaddingShrunk:"button-padding--shrunk"},X0e=`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline-block;inline-size:auto;vertical-align:middle}:host([round]){border-radius:50px}:host([round]) a,:host([round]) button{border-radius:50px}:host button,:host a{outline-color:transparent}:host button:focus,:host a:focus{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}:host button,:host a{--calcite-button-content-margin-internal:0.5rem;--calcite-button-padding-x-internal:7px;--calcite-button-padding-y-internal:3px;padding-block:var(--calcite-button-padding-y-internal);padding-inline:var(--calcite-button-padding-x-internal);position:relative;box-sizing:border-box;display:flex;block-size:100%;inline-size:100%;cursor:pointer;-webkit-user-select:none;user-select:none;appearance:none;align-items:center;justify-content:center;border-radius:0px;border-style:none;text-align:center;font-family:inherit;font-weight:var(--calcite-font-weight-normal);text-decoration-line:none;transition:color var(--calcite-animation-timing) ease-in-out, background-color var(--calcite-animation-timing) ease-in-out, box-shadow var(--calcite-animation-timing) ease-in-out, outline-color var(--calcite-internal-animation-timing-fast) ease-in-out}:host button:hover,:host a:hover{text-decoration-line:none}:host button span,:host a span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.content{margin-inline:var(--calcite-button-content-margin-internal)}.icon-start-empty .content{margin-inline-start:unset}.icon-end-empty .content{margin-inline-end:unset}:host([scale=m]) button,:host([scale=m]) a{--calcite-button-content-margin-internal:0.75rem}:host([scale=l]) button,:host([scale=l]) a{--calcite-button-content-margin-internal:1rem}:host([width=auto]){inline-size:auto}:host([width=half]){inline-size:50%}:host([width=full]){inline-size:100%}:host([alignment=center]:not([width=auto])) a,:host([alignment=center]:not([width=auto])) button{justify-content:center}:host([alignment=start]:not([width=auto])) a,:host([alignment=start]:not([width=auto])) button{justify-content:flex-start}:host([alignment=end]:not([width=auto])) a,:host([alignment=end]:not([width=auto])) button{justify-content:flex-end}:host([alignment*=space-between]:not([width=auto])) a,:host([alignment*=space-between]:not([width=auto])) button{justify-content:space-between}:host([alignment=icon-start-space-between]:not([width=auto])) .icon--start{margin-inline-end:auto}:host([alignment=icon-start-space-between]:not([width=auto])) a,:host([alignment=icon-start-space-between]:not([width=auto])) button{text-align:unset}:host([alignment=icon-end-space-between]:not([width=auto])) .icon--end{margin-inline-start:auto}:host([alignment=icon-end-space-between]:not([width=auto])) a,:host([alignment=icon-end-space-between]:not([width=auto])) button{text-align:unset}:host([alignment=center]) a:not(.content--slotted) .icon--start+.icon--end,:host([alignment=center]) button:not(.content--slotted) .icon--start+.icon--end{margin-inline-start:var(--calcite-button-content-margin-internal)}.icon{position:relative;margin:0px;display:inline-flex;font-weight:var(--calcite-font-weight-normal);line-height:inherit}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}@keyframes loader-in{0%{inline-size:0;opacity:0;transform:scale(0.5)}100%{inline-size:1em;opacity:1;transform:scale(1)}}@keyframes loader-out{0%{inline-size:1em;opacity:1;transform:scale(1)}100%{inline-size:0;opacity:0;transform:scale(0.5)}}.calcite-button--loader{display:flex}.calcite-button--loader calcite-loader{margin:0px;transition:inline-size var(--calcite-internal-animation-timing-slow) ease-in-out, opacity var(--calcite-internal-animation-timing-slow) ease-in-out, transform var(--calcite-internal-animation-timing-slow) ease-in-out}.calcite-button--loader calcite-loader.loading-in{animation-name:loader-in;animation-duration:var(--calcite-internal-animation-timing-slow)}.calcite-button--loader calcite-loader.loading-out{animation-name:loader-out;animation-duration:var(--calcite-internal-animation-timing-slow)}:host([loading]) button.content--slotted .calcite-button--loader calcite-loader,:host([loading]) a.content--slotted .calcite-button--loader calcite-loader{margin-inline-end:var(--calcite-button-content-margin-internal)}:host([loading]) button:not(.content--slotted) .icon--start,:host([loading]) button:not(.content--slotted) .icon--end,:host([loading]) a:not(.content--slotted) .icon--start,:host([loading]) a:not(.content--slotted) .icon--end{display:none}:host([appearance]) button,:host([appearance]) a{border-width:1px;border-style:solid;border-color:transparent}:host([kind=brand]) button,:host([kind=brand]) a{background-color:var(--calcite-color-brand);color:var(--calcite-color-text-inverse)}:host([kind=brand]) button:hover,:host([kind=brand]) button:focus,:host([kind=brand]) a:hover,:host([kind=brand]) a:focus{background-color:var(--calcite-color-brand-hover)}:host([kind=brand]) button:active,:host([kind=brand]) a:active{background-color:var(--calcite-color-brand-press)}:host([kind=brand]) button calcite-loader,:host([kind=brand]) a calcite-loader{color:var(--calcite-color-text-inverse)}:host([kind=danger]) button,:host([kind=danger]) a{background-color:var(--calcite-color-status-danger);color:var(--calcite-color-text-inverse)}:host([kind=danger]) button:hover,:host([kind=danger]) button:focus,:host([kind=danger]) a:hover,:host([kind=danger]) a:focus{background-color:var(--calcite-color-status-danger-hover)}:host([kind=danger]) button:active,:host([kind=danger]) a:active{background-color:var(--calcite-color-status-danger-press)}:host([kind=danger]) button calcite-loader,:host([kind=danger]) a calcite-loader{color:var(--calcite-color-text-inverse)}:host([kind=neutral]) button,:host([kind=neutral]) a{background-color:var(--calcite-color-foreground-3);color:var(--calcite-color-text-1)}:host([kind=neutral]) button:hover,:host([kind=neutral]) button:focus,:host([kind=neutral]) a:hover,:host([kind=neutral]) a:focus{background-color:var(--calcite-color-foreground-2)}:host([kind=neutral]) button:active,:host([kind=neutral]) a:active{background-color:var(--calcite-color-foreground-1)}:host([kind=neutral]) button calcite-loader,:host([kind=neutral]) a calcite-loader{color:var(--calcite-color-text-1)}:host([kind=inverse]) button,:host([kind=inverse]) a{color:var(--calcite-color-text-inverse);background-color:var(--calcite-color-inverse)}:host([kind=inverse]) button:hover,:host([kind=inverse]) button:focus,:host([kind=inverse]) a:hover,:host([kind=inverse]) a:focus{background-color:var(--calcite-color-inverse-hover)}:host([kind=inverse]) button:active,:host([kind=inverse]) a:active{background-color:var(--calcite-color-inverse-press)}:host([kind=inverse]) button calcite-loader,:host([kind=inverse]) a calcite-loader{color:var(--calcite-color-text-inverse)}:host([appearance=outline-fill]) button,:host([appearance=outline-fill]) a{border-width:1px;border-style:solid;background-color:var(--calcite-color-foreground-1);box-shadow:inset 0 0 0 1px transparent}:host([appearance=outline-fill][kind=brand]) button,:host([appearance=outline-fill][kind=brand]) a{border-color:var(--calcite-color-brand);background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-brand)}:host([appearance=outline-fill][kind=brand]) button:hover,:host([appearance=outline-fill][kind=brand]) a:hover{border-color:var(--calcite-color-brand-hover);color:var(--calcite-color-brand-hover);box-shadow:inset 0 0 0 1px var(--calcite-color-brand-hover)}:host([appearance=outline-fill][kind=brand]) button:focus,:host([appearance=outline-fill][kind=brand]) a:focus{border-color:var(--calcite-color-brand);color:var(--calcite-color-brand);box-shadow:inset 0 0 0 2px var(--calcite-color-brand)}:host([appearance=outline-fill][kind=brand]) button:active,:host([appearance=outline-fill][kind=brand]) a:active{border-color:var(--calcite-color-brand-press);color:var(--calcite-color-brand-press);box-shadow:inset 0 0 0 2px var(--calcite-color-brand-press)}:host([appearance=outline-fill][kind=brand]) button calcite-loader,:host([appearance=outline-fill][kind=brand]) a calcite-loader{color:var(--calcite-color-brand)}:host([appearance=outline-fill][kind=danger]) button,:host([appearance=outline-fill][kind=danger]) a{border-color:var(--calcite-color-status-danger);background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-status-danger)}:host([appearance=outline-fill][kind=danger]) button:hover,:host([appearance=outline-fill][kind=danger]) a:hover{border-color:var(--calcite-color-status-danger-hover);color:var(--calcite-color-status-danger-hover);box-shadow:inset 0 0 0 1px var(--calcite-color-status-danger-hover)}:host([appearance=outline-fill][kind=danger]) button:focus,:host([appearance=outline-fill][kind=danger]) a:focus{border-color:var(--calcite-color-status-danger);color:var(--calcite-color-status-danger);box-shadow:inset 0 0 0 2px var(--calcite-color-status-danger)}:host([appearance=outline-fill][kind=danger]) button:active,:host([appearance=outline-fill][kind=danger]) a:active{border-color:var(--calcite-color-status-danger-press);color:var(--calcite-color-status-danger-press);box-shadow:inset 0 0 0 2px var(--calcite-color-status-danger-press)}:host([appearance=outline-fill][kind=danger]) button calcite-loader,:host([appearance=outline-fill][kind=danger]) a calcite-loader{color:var(--calcite-color-status-danger)}:host([appearance=outline-fill][kind=neutral]) button,:host([appearance=outline-fill][kind=neutral]) a{background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-1);border-color:var(--calcite-color-border-1)}:host([appearance=outline-fill][kind=neutral]) button:hover,:host([appearance=outline-fill][kind=neutral]) a:hover{box-shadow:inset 0 0 0 1px var(--calcite-color-foreground-3)}:host([appearance=outline-fill][kind=neutral]) button:focus,:host([appearance=outline-fill][kind=neutral]) a:focus{box-shadow:inset 0 0 0 2px var(--calcite-color-foreground-3)}:host([appearance=outline-fill][kind=neutral]) button:active,:host([appearance=outline-fill][kind=neutral]) a:active{box-shadow:inset 0 0 0 2px var(--calcite-color-foreground-3)}:host([appearance=outline-fill][kind=neutral]) button calcite-loader,:host([appearance=outline-fill][kind=neutral]) a calcite-loader{color:var(--calcite-color-text-1)}:host([appearance=outline-fill][kind=inverse]) button,:host([appearance=outline-fill][kind=inverse]) a{background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-1);border-color:var(--calcite-color-inverse)}:host([appearance=outline-fill][kind=inverse]) button:hover,:host([appearance=outline-fill][kind=inverse]) a:hover{border-color:var(--calcite-color-inverse-hover);box-shadow:inset 0 0 0 1px var(--calcite-color-inverse-hover)}:host([appearance=outline-fill][kind=inverse]) button:focus,:host([appearance=outline-fill][kind=inverse]) a:focus{border-color:var(--calcite-color-inverse);box-shadow:inset 0 0 0 2px var(--calcite-color-inverse)}:host([appearance=outline-fill][kind=inverse]) button:active,:host([appearance=outline-fill][kind=inverse]) a:active{border-color:var(--calcite-color-inverse-press);box-shadow:inset 0 0 0 2px var(--calcite-color-inverse-press)}:host([appearance=outline-fill][kind=inverse]) button calcite-loader,:host([appearance=outline-fill][kind=inverse]) a calcite-loader{color:var(--calcite-color-text-1)}:host([appearance=outline]) button,:host([appearance=outline]) a{border-width:1px;border-style:solid;background-color:transparent;box-shadow:inset 0 0 0 1px transparent}:host([appearance=outline][kind=brand]) button,:host([appearance=outline][kind=brand]) a{border-color:var(--calcite-color-brand);background-color:transparent;color:var(--calcite-color-brand)}:host([appearance=outline][kind=brand]) button:hover,:host([appearance=outline][kind=brand]) a:hover{border-color:var(--calcite-color-brand-hover);color:var(--calcite-color-brand-hover);box-shadow:inset 0 0 0 1px var(--calcite-color-brand-hover)}:host([appearance=outline][kind=brand]) button:focus,:host([appearance=outline][kind=brand]) a:focus{border-color:var(--calcite-color-brand);color:var(--calcite-color-brand);box-shadow:inset 0 0 0 2px var(--calcite-color-brand)}:host([appearance=outline][kind=brand]) button:active,:host([appearance=outline][kind=brand]) a:active{border-color:var(--calcite-color-brand-press);color:var(--calcite-color-brand-press);box-shadow:inset 0 0 0 2px var(--calcite-color-brand-press)}:host([appearance=outline][kind=brand]) button calcite-loader,:host([appearance=outline][kind=brand]) a calcite-loader{color:var(--calcite-color-brand)}:host([appearance=outline][kind=danger]) button,:host([appearance=outline][kind=danger]) a{border-color:var(--calcite-color-status-danger);background-color:transparent;color:var(--calcite-color-status-danger)}:host([appearance=outline][kind=danger]) button:hover,:host([appearance=outline][kind=danger]) a:hover{border-color:var(--calcite-color-status-danger-hover);color:var(--calcite-color-status-danger-hover);box-shadow:inset 0 0 0 1px var(--calcite-color-status-danger-hover)}:host([appearance=outline][kind=danger]) button:focus,:host([appearance=outline][kind=danger]) a:focus{border-color:var(--calcite-color-status-danger);color:var(--calcite-color-status-danger);box-shadow:inset 0 0 0 2px var(--calcite-color-status-danger)}:host([appearance=outline][kind=danger]) button:active,:host([appearance=outline][kind=danger]) a:active{border-color:var(--calcite-color-status-danger-press);color:var(--calcite-color-status-danger-press);box-shadow:inset 0 0 0 2px var(--calcite-color-status-danger-press)}:host([appearance=outline][kind=danger]) button calcite-loader,:host([appearance=outline][kind=danger]) a calcite-loader{color:var(--calcite-color-status-danger)}:host([appearance=outline][kind=neutral]) button,:host([appearance=outline][kind=neutral]) a{background-color:transparent;color:var(--calcite-color-text-1);border-color:var(--calcite-color-border-1)}:host([appearance=outline][kind=neutral]) button:hover,:host([appearance=outline][kind=neutral]) a:hover{box-shadow:inset 0 0 0 1px var(--calcite-color-foreground-3)}:host([appearance=outline][kind=neutral]) button:focus,:host([appearance=outline][kind=neutral]) a:focus{box-shadow:inset 0 0 0 2px var(--calcite-color-foreground-3)}:host([appearance=outline][kind=neutral]) button:active,:host([appearance=outline][kind=neutral]) a:active{box-shadow:inset 0 0 0 2px var(--calcite-color-foreground-3)}:host([appearance=outline][kind=neutral]) button calcite-loader,:host([appearance=outline][kind=neutral]) a calcite-loader{color:var(--calcite-color-text-1)}:host([appearance=outline][kind=inverse]) button,:host([appearance=outline][kind=inverse]) a{background-color:transparent;color:var(--calcite-color-text-1);border-color:var(--calcite-color-inverse)}:host([appearance=outline][kind=inverse]) button:hover,:host([appearance=outline][kind=inverse]) a:hover{border-color:var(--calcite-color-inverse-hover);box-shadow:inset 0 0 0 1px var(--calcite-color-inverse-hover)}:host([appearance=outline][kind=inverse]) button:focus,:host([appearance=outline][kind=inverse]) a:focus{border-color:var(--calcite-color-inverse);box-shadow:inset 0 0 0 2px var(--calcite-color-inverse)}:host([appearance=outline][kind=inverse]) button:active,:host([appearance=outline][kind=inverse]) a:active{border-color:var(--calcite-color-inverse-press);box-shadow:inset 0 0 0 2px var(--calcite-color-inverse-press)}:host([appearance=outline][kind=inverse]) button calcite-loader,:host([appearance=outline][kind=inverse]) a calcite-loader{color:var(--calcite-color-text-1)}:host([appearance=outline-fill][split-child=primary]) button,:host([appearance=outline][split-child=primary]) button{border-inline-end-width:0;border-inline-start-width:1px}:host([appearance=outline-fill][split-child=secondary]) button,:host([appearance=outline][split-child=secondary]) button{border-inline-start-width:0;border-inline-end-width:1px}:host([appearance=transparent]:not(.enable-editing-button)) button,:host([appearance=transparent]:not(.enable-editing-button)) a{background-color:transparent}:host([appearance=transparent]:not(.enable-editing-button)) button:hover,:host([appearance=transparent]:not(.enable-editing-button)) button:focus,:host([appearance=transparent]:not(.enable-editing-button)) a:hover,:host([appearance=transparent]:not(.enable-editing-button)) a:focus{background-color:var(--calcite-color-transparent-hover)}:host([appearance=transparent]:not(.enable-editing-button)) button:active,:host([appearance=transparent]:not(.enable-editing-button)) a:active{background-color:var(--calcite-color-transparent-press)}:host([appearance=transparent][kind=brand]) button,:host([appearance=transparent][kind=brand]) a{color:var(--calcite-color-brand)}:host([appearance=transparent][kind=brand]) button:hover,:host([appearance=transparent][kind=brand]) a:hover{color:var(--calcite-color-brand-hover)}:host([appearance=transparent][kind=brand]) button:focus,:host([appearance=transparent][kind=brand]) a:focus{color:var(--calcite-color-brand)}:host([appearance=transparent][kind=brand]) button:active,:host([appearance=transparent][kind=brand]) a:active{color:var(--calcite-color-brand-press)}:host([appearance=transparent][kind=brand]) button calcite-loader,:host([appearance=transparent][kind=brand]) a calcite-loader{color:var(--calcite-color-brand)}:host([appearance=transparent][kind=danger]) button,:host([appearance=transparent][kind=danger]) a{color:var(--calcite-color-status-danger)}:host([appearance=transparent][kind=danger]) button:hover,:host([appearance=transparent][kind=danger]) a:hover{color:var(--calcite-color-status-danger-hover)}:host([appearance=transparent][kind=danger]) button:focus,:host([appearance=transparent][kind=danger]) a:focus{color:var(--calcite-color-status-danger)}:host([appearance=transparent][kind=danger]) button:active,:host([appearance=transparent][kind=danger]) a:active{color:var(--calcite-color-status-danger-press)}:host([appearance=transparent][kind=danger]) button calcite-loader,:host([appearance=transparent][kind=danger]) a calcite-loader{color:var(--calcite-color-status-danger)}:host([appearance=transparent][kind=neutral]:not(.cancel-editing-button)) button,:host([appearance=transparent][kind=neutral]:not(.cancel-editing-button)) a,:host([appearance=transparent][kind=neutral]:not(.cancel-editing-button)) calcite-loader{color:var(--calcite-color-text-1)}:host([appearance=transparent][kind=neutral].cancel-editing-button) button{border-block-start-width:1px;border-block-end-width:1px;color:var(--calcite-color-text-3);border-block-start-color:var(--calcite-color-border-input);border-block-end-color:var(--calcite-color-border-input);border-block-style:solid}:host([appearance=transparent][kind=neutral].cancel-editing-button) button:not(.content--slotted){--calcite-button-padding-y-internal:0}:host([appearance=transparent][kind=neutral].cancel-editing-button) button:hover{color:var(--calcite-color-text-1)}:host([appearance=transparent][kind=neutral].enable-editing-button) button{background-color:transparent}:host(.confirm-changes-button) button:focus,:host(.cancel-editing-button) button:focus,:host(.enable-editing-button) button:focus{outline-offset:-2px}:host([appearance=transparent][kind=inverse]) button,:host([appearance=transparent][kind=inverse]) a,:host([appearance=transparent][kind=inverse]) calcite-loader{color:var(--calcite-color-text-inverse)}:host([scale=s]) button.content--slotted,:host([scale=s]) a.content--slotted{font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s][appearance=transparent]) button.content--slotted,:host([scale=s][appearance=transparent]) a.content--slotted{--calcite-button-padding-x-internal:0.5rem}:host([scale=s]) button,:host([scale=s]) a{--calcite-button-padding-y-internal:3px}:host([scale=m]) button.content--slotted,:host([scale=m]) a.content--slotted{--calcite-button-padding-x-internal:11px;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) button,:host([scale=m]) a{--calcite-button-padding-y-internal:7px}:host([scale=m][appearance=transparent]) button.content--slotted,:host([scale=m][appearance=transparent]) a.content--slotted{--calcite-button-padding-x-internal:0.75rem}:host([scale=l]) button.content--slotted,:host([scale=l]) a.content--slotted{--calcite-button-padding-x-internal:15px;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) .button-padding{--calcite-button-padding-x-internal:1rem;--calcite-button-padding-y-internal:11px}:host([scale=l]) .button-padding--shrunk{--calcite-button-padding-y-internal:9px}:host([scale=s]) button:not(.content--slotted),:host([scale=s]) a:not(.content--slotted){--calcite-button-padding-x-internal:0.125rem;--calcite-button-padding-y-internal:3px;inline-size:1.5rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-block-size:1.5rem}:host([scale=m]) button:not(.content--slotted),:host([scale=m]) a:not(.content--slotted){--calcite-button-padding-x-internal:0.125rem;--calcite-button-padding-y-internal:7px;inline-size:2rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-block-size:2rem}:host([scale=l]) button:not(.content--slotted),:host([scale=l]) a:not(.content--slotted){--calcite-button-padding-x-internal:0.125rem;--calcite-button-padding-y-internal:9px;inline-size:2.75rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-block-size:2.75rem}:host(:is([scale=s],[scale=m],[scale=l])[width=full]) a:not(.content--slotted),:host(:is([scale=s],[scale=m],[scale=l])[width=full]) button:not(.content--slotted){inline-size:var(--calcite-container-size-content-fluid)}:host([scale=l][appearance=transparent]) button:not(.content--slotted),:host([scale=l][appearance=transparent]) a:not(.content--slotted){--calcite-button-padding-y-internal:0.625rem}:host([scale=s][icon-start][icon-end]) button:not(.content--slotted),:host([scale=s][icon-start][icon-end]) a:not(.content--slotted){--calcite-button-padding-x-internal:23px;block-size:1.5rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=s][icon-start][icon-end][appearance=transparent]) button:not(.content--slotted),:host([scale=s][icon-start][icon-end][appearance=transparent]) a:not(.content--slotted){--calcite-button-padding-x-internal:1.5rem}:host([scale=m][icon-start][icon-end]) button:not(.content--slotted),:host([scale=m][icon-start][icon-end]) a:not(.content--slotted){--calcite-button-padding-x-internal:2rem;block-size:2rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=m][icon-start][icon-end][appearance=transparent]) button:not(.content--slotted),:host([scale=m][icon-start][icon-end][appearance=transparent]) a:not(.content--slotted){--calcite-button-padding-x-internal:33px}:host([scale=l][icon-start][icon-end]) button:not(.content--slotted),:host([scale=l][icon-start][icon-end]) a:not(.content--slotted){--calcite-button-padding-x-internal:43px;block-size:2.75rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l][icon-start][icon-end]) button:not(.content--slotted) .icon--start+.icon--end,:host([scale=l][icon-start][icon-end]) a:not(.content--slotted) .icon--start+.icon--end{margin-inline-start:1rem}:host([scale=l][icon-start][icon-end][appearance=transparent]) button:not(.content--slotted),:host([scale=l][icon-start][icon-end][appearance=transparent]) a:not(.content--slotted){--calcite-button-padding-x-internal:2.75rem}:host([hidden]){display:none}[hidden]{display:none}`,Q0e=X0e,e1e=oi(class extends ai{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.mutationObserver=Wi("mutation",()=>this.updateHasContent()),this.resizeObserver=Wi("resize",()=>this.setTooltipText()),this.handleClick=()=>{const{type:e}=this;this.href||(e==="submit"?Aj(this):e==="reset"&&r0e(this))},this.setTooltipText=()=>{const{contentEl:e}=this;e&&(this.tooltipText=e.offsetWidth<e.scrollWidth&&this.el.innerText||null)},this.setChildEl=e=>{var i;this.childEl=e,e&&((i=this.resizeObserver)==null||i.observe(e))},this.alignment="center",this.appearance="solid",this.label=void 0,this.kind="brand",this.disabled=!1,this.form=void 0,this.download=!1,this.href=void 0,this.iconEnd=void 0,this.iconFlipRtl=void 0,this.iconStart=void 0,this.loading=!1,this.name=void 0,this.rel=void 0,this.round=!1,this.scale="m",this.splitChild=!1,this.target=void 0,this.type="button",this.width="auto",this.messages=void 0,this.messageOverrides=void 0,this.hasContent=!1,this.hasLoader=!1,this.effectiveLocale="",this.defaultMessages=void 0,this.tooltipText=void 0}handleGlobalAttributesChanged(){pu(this)}loadingChanged(e,i){e&&!i&&(this.hasLoader=!0),!e&&i&&window.setTimeout(()=>{this.hasLoader=!1},300)}onMessagesChange(){}async connectedCallback(){$c(this),po(this),yo(this),this.hasLoader=this.loading,this.setupTextContentObserver(),C0(this),this.formEl=Oj(this)}disconnectedCallback(){var e,i;(e=this.mutationObserver)==null||e.disconnect(),Cc(this),m3(this),fo(this),vo(this),(i=this.resizeObserver)==null||i.disconnect(),this.formEl=null}async componentWillLoad(){co(this),this.updateHasContent(),await go(this)}componentDidLoad(){ho(this),this.setTooltipText()}componentDidRender(){ul(this)}render(){const e=this.href?"a":"button",i=e,n=this.hasLoader?X("div",{class:es.buttonLoader},X("calcite-loader",{class:this.loading?es.loadingIn:es.loadingOut,inline:!0,label:this.messages.loading,scale:this.scale==="l"?"m":"s"})):null,s=!this.iconStart&&!this.iconEnd,h=X("calcite-icon",{key:"45941adf90ef50fe1aa5ed4a874dc8a841f4b16f",class:{[es.icon]:!0,[es.iconStart]:!0},flipRtl:this.iconFlipRtl==="start"||this.iconFlipRtl==="both",icon:this.iconStart,scale:Ui(this.scale)}),f=X("calcite-icon",{key:"dcd2f544410e55c7dc3a277f9c5c04da0c00b041",class:{[es.icon]:!0,[es.iconEnd]:!0},flipRtl:this.iconFlipRtl==="end"||this.iconFlipRtl==="both",icon:this.iconEnd,scale:Ui(this.scale)}),m=X("span",{key:"38df650fbf83b178f60d2df42f59d2a7aefbde30",class:es.content,ref:v=>this.contentEl=v},X("slot",{key:"5214ba6eeaedfedc6c7eb10643ecf37d8a30a651"}));return X(dl,{key:"bda810b730243b9d82c1046e5eeaf736536e5e5e",disabled:this.disabled},X(i,{key:"9b35bb5043f98ceb94f762db9b622e7e7578c801","aria-disabled":e==="a"?bn(this.disabled||this.loading):null,"aria-expanded":this.el.getAttribute("aria-expanded"),"aria-label":this.loading?this.messages.loading:am(this),"aria-live":"polite",class:{[es.buttonPadding]:s,[es.buttonPaddingShrunk]:!s,[es.contentSlotted]:this.hasContent,[es.iconStartEmpty]:!this.iconStart,[es.iconEndEmpty]:!this.iconEnd},disabled:e==="button"?this.disabled||this.loading:null,download:e==="a"&&(this.download===""||this.download)?this.download:null,href:e==="a"&&this.href,name:e==="button"&&this.name,onClick:this.handleClick,ref:this.setChildEl,rel:e==="a"&&this.rel,tabIndex:this.disabled?-1:null,target:e==="a"&&this.target,title:this.tooltipText,type:e==="button"&&this.type},n,this.iconStart?h:null,this.hasContent?m:null,this.iconEnd?f:null))}async setFocus(){var e;await uo(this),(e=this.childEl)==null||e.focus()}effectiveLocaleChange(){mo(this,this.effectiveLocale)}updateHasContent(){var i,n;const e=this.el.textContent.trim().length>0||this.el.childNodes.length>0;this.hasContent=this.el.childNodes.length===1&&((i=this.el.childNodes[0])==null?void 0:i.nodeName)==="#text"?((n=this.el.textContent)==null?void 0:n.trim().length)>0:e}setupTextContentObserver(){var e;(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0})}onLabelClick(){this.handleClick(),this.setFocus()}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{"aria-expanded":["handleGlobalAttributesChanged"],loading:["loadingChanged"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return Q0e}},[1,"calcite-button",{alignment:[513],appearance:[513],label:[1],kind:[513],disabled:[516],form:[513],download:[520],href:[513],iconEnd:[513,"icon-end"],iconFlipRtl:[513,"icon-flip-rtl"],iconStart:[513,"icon-start"],loading:[516],name:[513],rel:[513],round:[516],scale:[513],splitChild:[520,"split-child"],target:[513],type:[513],width:[513],messages:[1040],messageOverrides:[1040],hasContent:[32],hasLoader:[32],effectiveLocale:[32],defaultMessages:[32],tooltipText:[32],setFocus:[64]},void 0,{"aria-expanded":["handleGlobalAttributesChanged"],loading:["loadingChanged"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function Qj(){if(typeof customElements>"u")return;["calcite-button","calcite-icon","calcite-loader"].forEach(e=>{switch(e){case"calcite-button":customElements.get(e)||customElements.define(e,e1e);break;case"calcite-icon":customElements.get(e)||Mr();break;case"calcite-loader":customElements.get(e)||fu();break}})}Qj();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */const t1e={container:"container"},i1e=":host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex}:host([alignment=start]){text-align:start}:host([alignment=end]){text-align:end}:host([alignment=center]){text-align:center}:host([scale=s]) .container{gap:0.25rem;font-size:var(--calcite-font-size--2);line-height:1rem;margin-block-end:var(--calcite-label-margin-bottom, 0.5rem)}:host([scale=m]) .container{gap:0.5rem;font-size:var(--calcite-font-size--1);line-height:1rem;margin-block-end:var(--calcite-label-margin-bottom, 0.75rem)}:host([scale=l]) .container{gap:0.5rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;margin-block-end:var(--calcite-label-margin-bottom, 1rem)}:host .container{margin-inline:0px;margin-block-start:0px;inline-size:100%;line-height:1.375;color:var(--calcite-color-text-1)}:host([layout=default]) .container{display:flex;flex-direction:column}:host([layout=inline]) .container,:host([layout=inline-space-between]) .container{display:flex;flex-direction:row;align-items:center;gap:0.5rem}:host([layout=inline][scale=l]) .container{gap:0.75rem}:host([layout=inline-space-between]) .container{justify-content:space-between}:host([disabled])>.container{opacity:var(--calcite-opacity-disabled)}:host([disabled]) ::slotted(*[disabled]),:host([disabled]) ::slotted(*[disabled] *){--tw-bg-opacity:1}:host([disabled]) ::slotted(calcite-input-message:not([active])){--tw-bg-opacity:0}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([hidden]){display:none}[hidden]{display:none}",n1e=i1e,r1e=oi(class extends ai{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteInternalLabelClick=qe(this,"calciteInternalLabelClick",2),this.labelClickHandler=e=>{this.calciteInternalLabelClick.emit({sourceEvent:e})},this.alignment="start",this.for=void 0,this.scale="m",this.layout="default"}handleForChange(){b0e(this.el)}connectedCallback(){document.dispatchEvent(new CustomEvent(g3))}disconnectedCallback(){document.dispatchEvent(new CustomEvent(B2))}render(){return X(cn,{key:"881662c0e2e7008bd94e8e25288ef06fac57269e",onClick:this.labelClickHandler},X("div",{key:"62c28743dc66b4dc926d3a61c496f3d93c109041",class:t1e.container},X("slot",{key:"b20f7cefe52688d3f76972f1d4940051baab504a"})))}get el(){return this}static get watchers(){return{for:["handleForChange"]}}static get style(){return n1e}},[1,"calcite-label",{alignment:[513],for:[513],scale:[513],layout:[513]},void 0,{for:["handleForChange"]}]);function s1e(){if(typeof customElements>"u")return;["calcite-label"].forEach(e=>{switch(e){case"calcite-label":customElements.get(e)||customElements.define(e,r1e);break}})}s1e();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */var o1e=typeof global=="object"&&global&&global.Object===Object&&global;const a1e=o1e;var l1e=typeof self=="object"&&self&&self.Object===Object&&self,c1e=a1e||l1e||Function("return this")();const eG=c1e;var h1e=eG.Symbol;const W2=h1e;var tG=Object.prototype,u1e=tG.hasOwnProperty,d1e=tG.toString,r1=W2?W2.toStringTag:void 0;function p1e(t){var e=u1e.call(t,r1),i=t[r1];try{t[r1]=void 0;var n=!0}catch{}var s=d1e.call(t);return n&&(e?t[r1]=i:delete t[r1]),s}var f1e=Object.prototype,g1e=f1e.toString;function m1e(t){return g1e.call(t)}var y1e="[object Null]",v1e="[object Undefined]",N$=W2?W2.toStringTag:void 0;function b1e(t){return t==null?t===void 0?v1e:y1e:N$&&N$ in Object(t)?p1e(t):m1e(t)}function w1e(t){return t!=null&&typeof t=="object"}var _1e="[object Symbol]";function x1e(t){return typeof t=="symbol"||w1e(t)&&b1e(t)==_1e}var S1e=/\s/;function T1e(t){for(var e=t.length;e--&&S1e.test(t.charAt(e)););return e}var M1e=/^\s+/;function E1e(t){return t&&t.slice(0,T1e(t)+1).replace(M1e,"")}function Z2(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var D$=NaN,k1e=/^[-+]0x[0-9a-f]+$/i,$1e=/^0b[01]+$/i,C1e=/^0o[0-7]+$/i,I1e=parseInt;function z$(t){if(typeof t=="number")return t;if(x1e(t))return D$;if(Z2(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Z2(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=E1e(t);var i=$1e.test(t);return i||C1e.test(t)?I1e(t.slice(2),i?2:8):k1e.test(t)?D$:+t}var A1e=function(){return eG.Date.now()};const n5=A1e;var O1e="Expected a function",P1e=Math.max,R1e=Math.min;function iG(t,e,i){var n,s,h,f,m,v,x=0,M=!1,$=!1,I=!0;if(typeof t!="function")throw new TypeError(O1e);e=z$(e)||0,Z2(i)&&(M=!!i.leading,$="maxWait"in i,h=$?P1e(z$(i.maxWait)||0,e):h,I="trailing"in i?!!i.trailing:I);function P(ie){var le=n,de=s;return n=s=void 0,x=ie,f=t.apply(de,le),f}function L(ie){return x=ie,m=setTimeout(U,e),M?P(ie):f}function z(ie){var le=ie-v,de=ie-x,xe=e-le;return $?R1e(xe,h-de):xe}function F(ie){var le=ie-v,de=ie-x;return v===void 0||le>=e||le<0||$&&de>=h}function U(){var ie=n5();if(F(ie))return W(ie);m=setTimeout(U,z(ie))}function W(ie){return m=void 0,I&&n?P(ie):(n=s=void 0,f)}function K(){m!==void 0&&clearTimeout(m),x=0,n=v=s=m=void 0}function J(){return m===void 0?f:W(n5())}function te(){var ie=n5(),le=F(ie);if(n=arguments,s=this,v=ie,le){if(m===void 0)return L(v);if($)return clearTimeout(m),m=setTimeout(U,e),P(v)}return m===void 0&&(m=setTimeout(U,e)),f}return te.cancel=K,te.flush=J,te}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */const nG=["top","right","bottom","left"],F$=["start","end"],j$=nG.reduce((t,e)=>t.concat(e,e+"-"+F$[0],e+"-"+F$[1]),[]),r0=Math.min,Ld=Math.max,J2=Math.round,Jy=Math.floor,nu=t=>({x:t,y:t}),L1e={left:"right",right:"left",bottom:"top",top:"bottom"},N1e={start:"end",end:"start"};function Q4(t,e,i){return Ld(t,r0(e,i))}function ap(t,e){return typeof t=="function"?t(e):t}function bc(t){return t.split("-")[0]}function qa(t){return t.split("-")[1]}function rG(t){return t==="x"?"y":"x"}function e7(t){return t==="y"?"height":"width"}function v3(t){return["top","bottom"].includes(bc(t))?"y":"x"}function t7(t){return rG(v3(t))}function sG(t,e,i){i===void 0&&(i=!1);const n=qa(t),s=t7(t),h=e7(s);let f=s==="x"?n===(i?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[h]>e.floating[h]&&(f=Y2(f)),[f,Y2(f)]}function D1e(t){const e=Y2(t);return[K2(t),e,K2(e)]}function K2(t){return t.replace(/start|end/g,e=>N1e[e])}function z1e(t,e,i){const n=["left","right"],s=["right","left"],h=["top","bottom"],f=["bottom","top"];switch(t){case"top":case"bottom":return i?e?s:n:e?n:s;case"left":case"right":return e?h:f;default:return[]}}function F1e(t,e,i,n){const s=qa(t);let h=z1e(bc(t),i==="start",n);return s&&(h=h.map(f=>f+"-"+s),e&&(h=h.concat(h.map(K2)))),h}function Y2(t){return t.replace(/left|right|bottom|top/g,e=>L1e[e])}function j1e(t){return{top:0,right:0,bottom:0,left:0,...t}}function oG(t){return typeof t!="number"?j1e(t):{top:t,right:t,bottom:t,left:t}}function X2(t){const{x:e,y:i,width:n,height:s}=t;return{width:n,height:s,top:i,left:e,right:e+n,bottom:i+s,x:e,y:i}}function G$(t,e,i){let{reference:n,floating:s}=t;const h=v3(e),f=t7(e),m=e7(f),v=bc(e),x=h==="y",M=n.x+n.width/2-s.width/2,$=n.y+n.height/2-s.height/2,I=n[m]/2-s[m]/2;let P;switch(v){case"top":P={x:M,y:n.y-s.height};break;case"bottom":P={x:M,y:n.y+n.height};break;case"right":P={x:n.x+n.width,y:$};break;case"left":P={x:n.x-s.width,y:$};break;default:P={x:n.x,y:n.y}}switch(qa(e)){case"start":P[f]-=I*(i&&x?-1:1);break;case"end":P[f]+=I*(i&&x?-1:1);break}return P}const G1e=async(t,e,i)=>{const{placement:n="bottom",strategy:s="absolute",middleware:h=[],platform:f}=i,m=h.filter(Boolean),v=await(f.isRTL==null?void 0:f.isRTL(e));let x=await f.getElementRects({reference:t,floating:e,strategy:s}),{x:M,y:$}=G$(x,n,v),I=n,P={},L=0;for(let z=0;z<m.length;z++){const{name:F,fn:U}=m[z],{x:W,y:K,data:J,reset:te}=await U({x:M,y:$,initialPlacement:n,placement:I,strategy:s,middlewareData:P,rects:x,platform:f,elements:{reference:t,floating:e}});M=W??M,$=K??$,P={...P,[F]:{...P[F],...J}},te&&L<=50&&(L++,typeof te=="object"&&(te.placement&&(I=te.placement),te.rects&&(x=te.rects===!0?await f.getElementRects({reference:t,floating:e,strategy:s}):te.rects),{x:M,y:$}=G$(x,I,v)),z=-1)}return{x:M,y:$,placement:I,strategy:s,middlewareData:P}};async function cm(t,e){var i;e===void 0&&(e={});const{x:n,y:s,platform:h,rects:f,elements:m,strategy:v}=t,{boundary:x="clippingAncestors",rootBoundary:M="viewport",elementContext:$="floating",altBoundary:I=!1,padding:P=0}=ap(e,t),L=oG(P),F=m[I?$==="floating"?"reference":"floating":$],U=X2(await h.getClippingRect({element:(i=await(h.isElement==null?void 0:h.isElement(F)))==null||i?F:F.contextElement||await(h.getDocumentElement==null?void 0:h.getDocumentElement(m.floating)),boundary:x,rootBoundary:M,strategy:v})),W=$==="floating"?{x:n,y:s,width:f.floating.width,height:f.floating.height}:f.reference,K=await(h.getOffsetParent==null?void 0:h.getOffsetParent(m.floating)),J=await(h.isElement==null?void 0:h.isElement(K))?await(h.getScale==null?void 0:h.getScale(K))||{x:1,y:1}:{x:1,y:1},te=X2(h.convertOffsetParentRelativeRectToViewportRelativeRect?await h.convertOffsetParentRelativeRectToViewportRelativeRect({elements:m,rect:W,offsetParent:K,strategy:v}):W);return{top:(U.top-te.top+L.top)/J.y,bottom:(te.bottom-U.bottom+L.bottom)/J.y,left:(U.left-te.left+L.left)/J.x,right:(te.right-U.right+L.right)/J.x}}const V1e=t=>({name:"arrow",options:t,async fn(e){const{x:i,y:n,placement:s,rects:h,platform:f,elements:m,middlewareData:v}=e,{element:x,padding:M=0}=ap(t,e)||{};if(x==null)return{};const $=oG(M),I={x:i,y:n},P=t7(s),L=e7(P),z=await f.getDimensions(x),F=P==="y",U=F?"top":"left",W=F?"bottom":"right",K=F?"clientHeight":"clientWidth",J=h.reference[L]+h.reference[P]-I[P]-h.floating[L],te=I[P]-h.reference[P],ie=await(f.getOffsetParent==null?void 0:f.getOffsetParent(x));let le=ie?ie[K]:0;(!le||!await(f.isElement==null?void 0:f.isElement(ie)))&&(le=m.floating[K]||h.floating[L]);const de=J/2-te/2,xe=le/2-z[L]/2-1,we=r0($[U],xe),ve=r0($[W],xe),se=we,ce=le-z[L]-ve,ue=le/2-z[L]/2+de,Ae=Q4(se,ue,ce),je=!v.arrow&&qa(s)!=null&&ue!==Ae&&h.reference[L]/2-(ue<se?we:ve)-z[L]/2<0,Ge=je?ue<se?ue-se:ue-ce:0;return{[P]:I[P]+Ge,data:{[P]:Ae,centerOffset:ue-Ae-Ge,...je&&{alignmentOffset:Ge}},reset:je}}});function H1e(t,e,i){return(t?[...i.filter(s=>qa(s)===t),...i.filter(s=>qa(s)!==t)]:i.filter(s=>bc(s)===s)).filter(s=>t?qa(s)===t||(e?K2(s)!==s:!1):!0)}const B1e=function(t){return t===void 0&&(t={}),{name:"autoPlacement",options:t,async fn(e){var i,n,s;const{rects:h,middlewareData:f,placement:m,platform:v,elements:x}=e,{crossAxis:M=!1,alignment:$,allowedPlacements:I=j$,autoAlignment:P=!0,...L}=ap(t,e),z=$!==void 0||I===j$?H1e($||null,P,I):I,F=await cm(e,L),U=((i=f.autoPlacement)==null?void 0:i.index)||0,W=z[U];if(W==null)return{};const K=sG(W,h,await(v.isRTL==null?void 0:v.isRTL(x.floating)));if(m!==W)return{reset:{placement:z[0]}};const J=[F[bc(W)],F[K[0]],F[K[1]]],te=[...((n=f.autoPlacement)==null?void 0:n.overflows)||[],{placement:W,overflows:J}],ie=z[U+1];if(ie)return{data:{index:U+1,overflows:te},reset:{placement:ie}};const le=te.map(we=>{const ve=qa(we.placement);return[we.placement,ve&&M?we.overflows.slice(0,2).reduce((se,ce)=>se+ce,0):we.overflows[0],we.overflows]}).sort((we,ve)=>we[1]-ve[1]),xe=((s=le.filter(we=>we[2].slice(0,qa(we[0])?2:3).every(ve=>ve<=0))[0])==null?void 0:s[0])||le[0][0];return xe!==m?{data:{index:U+1,overflows:te},reset:{placement:xe}}:{}}}},U1e=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var i,n;const{placement:s,middlewareData:h,rects:f,initialPlacement:m,platform:v,elements:x}=e,{mainAxis:M=!0,crossAxis:$=!0,fallbackPlacements:I,fallbackStrategy:P="bestFit",fallbackAxisSideDirection:L="none",flipAlignment:z=!0,...F}=ap(t,e);if((i=h.arrow)!=null&&i.alignmentOffset)return{};const U=bc(s),W=bc(m)===m,K=await(v.isRTL==null?void 0:v.isRTL(x.floating)),J=I||(W||!z?[Y2(m)]:D1e(m));!I&&L!=="none"&&J.push(...F1e(m,z,L,K));const te=[m,...J],ie=await cm(e,F),le=[];let de=((n=h.flip)==null?void 0:n.overflows)||[];if(M&&le.push(ie[U]),$){const se=sG(s,f,K);le.push(ie[se[0]],ie[se[1]])}if(de=[...de,{placement:s,overflows:le}],!le.every(se=>se<=0)){var xe,we;const se=(((xe=h.flip)==null?void 0:xe.index)||0)+1,ce=te[se];if(ce)return{data:{index:se,overflows:de},reset:{placement:ce}};let ue=(we=de.filter(Ae=>Ae.overflows[0]<=0).sort((Ae,je)=>Ae.overflows[1]-je.overflows[1])[0])==null?void 0:we.placement;if(!ue)switch(P){case"bestFit":{var ve;const Ae=(ve=de.map(je=>[je.placement,je.overflows.filter(Ge=>Ge>0).reduce((Ge,He)=>Ge+He,0)]).sort((je,Ge)=>je[1]-Ge[1])[0])==null?void 0:ve[0];Ae&&(ue=Ae);break}case"initialPlacement":ue=m;break}if(s!==ue)return{reset:{placement:ue}}}return{}}}};function V$(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function H$(t){return nG.some(e=>t[e]>=0)}const q1e=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:i}=e,{strategy:n="referenceHidden",...s}=ap(t,e);switch(n){case"referenceHidden":{const h=await cm(e,{...s,elementContext:"reference"}),f=V$(h,i.reference);return{data:{referenceHiddenOffsets:f,referenceHidden:H$(f)}}}case"escaped":{const h=await cm(e,{...s,altBoundary:!0}),f=V$(h,i.floating);return{data:{escapedOffsets:f,escaped:H$(f)}}}default:return{}}}}};async function W1e(t,e){const{placement:i,platform:n,elements:s}=t,h=await(n.isRTL==null?void 0:n.isRTL(s.floating)),f=bc(i),m=qa(i),v=v3(i)==="y",x=["left","top"].includes(f)?-1:1,M=h&&v?-1:1,$=ap(e,t);let{mainAxis:I,crossAxis:P,alignmentAxis:L}=typeof $=="number"?{mainAxis:$,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...$};return m&&typeof L=="number"&&(P=m==="end"?L*-1:L),v?{x:P*M,y:I*x}:{x:I*x,y:P*M}}const Z1e=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var i,n;const{x:s,y:h,placement:f,middlewareData:m}=e,v=await W1e(e,t);return f===((i=m.offset)==null?void 0:i.placement)&&(n=m.arrow)!=null&&n.alignmentOffset?{}:{x:s+v.x,y:h+v.y,data:{...v,placement:f}}}}},J1e=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:i,y:n,placement:s}=e,{mainAxis:h=!0,crossAxis:f=!1,limiter:m={fn:F=>{let{x:U,y:W}=F;return{x:U,y:W}}},...v}=ap(t,e),x={x:i,y:n},M=await cm(e,v),$=v3(bc(s)),I=rG($);let P=x[I],L=x[$];if(h){const F=I==="y"?"top":"left",U=I==="y"?"bottom":"right",W=P+M[F],K=P-M[U];P=Q4(W,P,K)}if(f){const F=$==="y"?"top":"left",U=$==="y"?"bottom":"right",W=L+M[F],K=L-M[U];L=Q4(W,L,K)}const z=m.fn({...e,[I]:P,[$]:L});return{...z,data:{x:z.x-i,y:z.y-n}}}}};function I0(t){return aG(t)?(t.nodeName||"").toLowerCase():"#document"}function _s(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Ic(t){var e;return(e=(aG(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function aG(t){return t instanceof Node||t instanceof _s(t).Node}function il(t){return t instanceof Element||t instanceof _s(t).Element}function nl(t){return t instanceof HTMLElement||t instanceof _s(t).HTMLElement}function B$(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof _s(t).ShadowRoot}function Wm(t){const{overflow:e,overflowX:i,overflowY:n,display:s}=oa(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+i)&&!["inline","contents"].includes(s)}function K1e(t){return["table","td","th"].includes(I0(t))}function i7(t){const e=n7(),i=oa(t);return i.transform!=="none"||i.perspective!=="none"||(i.containerType?i.containerType!=="normal":!1)||!e&&(i.backdropFilter?i.backdropFilter!=="none":!1)||!e&&(i.filter?i.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(i.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(i.contain||"").includes(n))}function Y1e(t){let e=ru(t);for(;nl(e)&&!s0(e);){if(i7(e))return e;e=ru(e)}return null}function n7(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function s0(t){return["html","body","#document"].includes(I0(t))}function oa(t){return _s(t).getComputedStyle(t)}function b3(t){return il(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function ru(t){if(I0(t)==="html")return t;const e=t.assignedSlot||t.parentNode||B$(t)&&t.host||Ic(t);return B$(e)?e.host:e}function lG(t){const e=ru(t);return s0(e)?t.ownerDocument?t.ownerDocument.body:t.body:nl(e)&&Wm(e)?e:lG(e)}function hm(t,e,i){var n;e===void 0&&(e=[]),i===void 0&&(i=!0);const s=lG(t),h=s===((n=t.ownerDocument)==null?void 0:n.body),f=_s(s);return h?e.concat(f,f.visualViewport||[],Wm(s)?s:[],f.frameElement&&i?hm(f.frameElement):[]):e.concat(s,hm(s,[],i))}function cG(t){const e=oa(t);let i=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const s=nl(t),h=s?t.offsetWidth:i,f=s?t.offsetHeight:n,m=J2(i)!==h||J2(n)!==f;return m&&(i=h,n=f),{width:i,height:n,$:m}}function r7(t){return il(t)?t:t.contextElement}function Df(t){const e=r7(t);if(!nl(e))return nu(1);const i=e.getBoundingClientRect(),{width:n,height:s,$:h}=cG(e);let f=(h?J2(i.width):i.width)/n,m=(h?J2(i.height):i.height)/s;return(!f||!Number.isFinite(f))&&(f=1),(!m||!Number.isFinite(m))&&(m=1),{x:f,y:m}}const X1e=nu(0);function hG(t){const e=_s(t);return!n7()||!e.visualViewport?X1e:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Q1e(t,e,i){return e===void 0&&(e=!1),!i||e&&i!==_s(t)?!1:e}function Zd(t,e,i,n){e===void 0&&(e=!1),i===void 0&&(i=!1);const s=t.getBoundingClientRect(),h=r7(t);let f=nu(1);e&&(n?il(n)&&(f=Df(n)):f=Df(t));const m=Q1e(h,i,n)?hG(h):nu(0);let v=(s.left+m.x)/f.x,x=(s.top+m.y)/f.y,M=s.width/f.x,$=s.height/f.y;if(h){const I=_s(h),P=n&&il(n)?_s(n):n;let L=I,z=L.frameElement;for(;z&&n&&P!==L;){const F=Df(z),U=z.getBoundingClientRect(),W=oa(z),K=U.left+(z.clientLeft+parseFloat(W.paddingLeft))*F.x,J=U.top+(z.clientTop+parseFloat(W.paddingTop))*F.y;v*=F.x,x*=F.y,M*=F.x,$*=F.y,v+=K,x+=J,L=_s(z),z=L.frameElement}}return X2({width:M,height:$,x:v,y:x})}const ege=[":popover-open",":modal"];function s7(t){return ege.some(e=>{try{return t.matches(e)}catch{return!1}})}function tge(t){let{elements:e,rect:i,offsetParent:n,strategy:s}=t;const h=s==="fixed",f=Ic(n),m=e?s7(e.floating):!1;if(n===f||m&&h)return i;let v={scrollLeft:0,scrollTop:0},x=nu(1);const M=nu(0),$=nl(n);if(($||!$&&!h)&&((I0(n)!=="body"||Wm(f))&&(v=b3(n)),nl(n))){const I=Zd(n);x=Df(n),M.x=I.x+n.clientLeft,M.y=I.y+n.clientTop}return{width:i.width*x.x,height:i.height*x.y,x:i.x*x.x-v.scrollLeft*x.x+M.x,y:i.y*x.y-v.scrollTop*x.y+M.y}}function ige(t){return Array.from(t.getClientRects())}function uG(t){return Zd(Ic(t)).left+b3(t).scrollLeft}function nge(t){const e=Ic(t),i=b3(t),n=t.ownerDocument.body,s=Ld(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),h=Ld(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let f=-i.scrollLeft+uG(t);const m=-i.scrollTop;return oa(n).direction==="rtl"&&(f+=Ld(e.clientWidth,n.clientWidth)-s),{width:s,height:h,x:f,y:m}}function rge(t,e){const i=_s(t),n=Ic(t),s=i.visualViewport;let h=n.clientWidth,f=n.clientHeight,m=0,v=0;if(s){h=s.width,f=s.height;const x=n7();(!x||x&&e==="fixed")&&(m=s.offsetLeft,v=s.offsetTop)}return{width:h,height:f,x:m,y:v}}function sge(t,e){const i=Zd(t,!0,e==="fixed"),n=i.top+t.clientTop,s=i.left+t.clientLeft,h=nl(t)?Df(t):nu(1),f=t.clientWidth*h.x,m=t.clientHeight*h.y,v=s*h.x,x=n*h.y;return{width:f,height:m,x:v,y:x}}function U$(t,e,i){let n;if(e==="viewport")n=rge(t,i);else if(e==="document")n=nge(Ic(t));else if(il(e))n=sge(e,i);else{const s=hG(t);n={...e,x:e.x-s.x,y:e.y-s.y}}return X2(n)}function dG(t,e){const i=ru(t);return i===e||!il(i)||s0(i)?!1:oa(i).position==="fixed"||dG(i,e)}function oge(t,e){const i=e.get(t);if(i)return i;let n=hm(t,[],!1).filter(m=>il(m)&&I0(m)!=="body"),s=null;const h=oa(t).position==="fixed";let f=h?ru(t):t;for(;il(f)&&!s0(f);){const m=oa(f),v=i7(f);!v&&m.position==="fixed"&&(s=null),(h?!v&&!s:!v&&m.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Wm(f)&&!v&&dG(t,f))?n=n.filter(M=>M!==f):s=m,f=ru(f)}return e.set(t,n),n}function age(t){let{element:e,boundary:i,rootBoundary:n,strategy:s}=t;const f=[...i==="clippingAncestors"?s7(e)?[]:oge(e,this._c):[].concat(i),n],m=f[0],v=f.reduce((x,M)=>{const $=U$(e,M,s);return x.top=Ld($.top,x.top),x.right=r0($.right,x.right),x.bottom=r0($.bottom,x.bottom),x.left=Ld($.left,x.left),x},U$(e,m,s));return{width:v.right-v.left,height:v.bottom-v.top,x:v.left,y:v.top}}function lge(t){const{width:e,height:i}=cG(t);return{width:e,height:i}}function cge(t,e,i){const n=nl(e),s=Ic(e),h=i==="fixed",f=Zd(t,!0,h,e);let m={scrollLeft:0,scrollTop:0};const v=nu(0);if(n||!n&&!h)if((I0(e)!=="body"||Wm(s))&&(m=b3(e)),n){const $=Zd(e,!0,h,e);v.x=$.x+e.clientLeft,v.y=$.y+e.clientTop}else s&&(v.x=uG(s));const x=f.left+m.scrollLeft-v.x,M=f.top+m.scrollTop-v.y;return{x,y:M,width:f.width,height:f.height}}function r5(t){return oa(t).position==="static"}function q$(t,e){return!nl(t)||oa(t).position==="fixed"?null:e?e(t):t.offsetParent}function pG(t,e){const i=_s(t);if(s7(t))return i;if(!nl(t)){let s=ru(t);for(;s&&!s0(s);){if(il(s)&&!r5(s))return s;s=ru(s)}return i}let n=q$(t,e);for(;n&&K1e(n)&&r5(n);)n=q$(n,e);return n&&s0(n)&&r5(n)&&!i7(n)?i:n||Y1e(t)||i}const hge=async function(t){const e=this.getOffsetParent||pG,i=this.getDimensions,n=await i(t.floating);return{reference:cge(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function uge(t){return oa(t).direction==="rtl"}const e6={convertOffsetParentRelativeRectToViewportRelativeRect:tge,getDocumentElement:Ic,getClippingRect:age,getOffsetParent:pG,getElementRects:hge,getClientRects:ige,getDimensions:lge,getScale:Df,isElement:il,isRTL:uge};function dge(t,e){let i=null,n;const s=Ic(t);function h(){var m;clearTimeout(n),(m=i)==null||m.disconnect(),i=null}function f(m,v){m===void 0&&(m=!1),v===void 0&&(v=1),h();const{left:x,top:M,width:$,height:I}=t.getBoundingClientRect();if(m||e(),!$||!I)return;const P=Jy(M),L=Jy(s.clientWidth-(x+$)),z=Jy(s.clientHeight-(M+I)),F=Jy(x),W={rootMargin:-P+"px "+-L+"px "+-z+"px "+-F+"px",threshold:Ld(0,r0(1,v))||1};let K=!0;function J(te){const ie=te[0].intersectionRatio;if(ie!==v){if(!K)return f();ie?f(!1,ie):n=setTimeout(()=>{f(!1,1e-7)},1e3)}K=!1}try{i=new IntersectionObserver(J,{...W,root:s.ownerDocument})}catch{i=new IntersectionObserver(J,W)}i.observe(t)}return f(!0),h}function pge(t,e,i,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:h=!0,elementResize:f=typeof ResizeObserver=="function",layoutShift:m=typeof IntersectionObserver=="function",animationFrame:v=!1}=n,x=r7(t),M=s||h?[...x?hm(x):[],...hm(e)]:[];M.forEach(U=>{s&&U.addEventListener("scroll",i,{passive:!0}),h&&U.addEventListener("resize",i)});const $=x&&m?dge(x,i):null;let I=-1,P=null;f&&(P=new ResizeObserver(U=>{let[W]=U;W&&W.target===x&&P&&(P.unobserve(e),cancelAnimationFrame(I),I=requestAnimationFrame(()=>{var K;(K=P)==null||K.observe(e)})),i()}),x&&!v&&P.observe(x),P.observe(e));let L,z=v?Zd(t):null;v&&F();function F(){const U=Zd(t);z&&(U.x!==z.x||U.y!==z.y||U.width!==z.width||U.height!==z.height)&&i(),z=U,L=requestAnimationFrame(F)}return i(),()=>{var U;M.forEach(W=>{s&&W.removeEventListener("scroll",i),h&&W.removeEventListener("resize",i)}),$==null||$(),(U=P)==null||U.disconnect(),P=null,v&&cancelAnimationFrame(L)}}const fge=Z1e,gge=B1e,mge=J1e,W$=U1e,yge=q1e,vge=V1e,bge=(t,e,i)=>{const n=new Map,s={platform:e6,...i},h={...s.platform,_c:n};return G1e(t,e,{...s,platform:h})};function wge(t){return _ge(t)}function s5(t){return t.assignedSlot?t.assignedSlot:t.parentNode instanceof ShadowRoot?t.parentNode.host:t.parentNode}function _ge(t){for(let e=t;e;e=s5(e))if(e instanceof Element&&getComputedStyle(e).display==="none")return null;for(let e=s5(t);e;e=s5(e)){if(!(e instanceof Element))continue;const i=getComputedStyle(e);if(i.display!=="contents"&&(i.position!=="static"||i.filter!=="none"||e.tagName==="BODY"))return e}return null}(function(){{const e=e6.getOffsetParent;e6.getOffsetParent=i=>e(i,wge)}})();function Z$(t){const e=window.devicePixelRatio||1;return Math.round(t*e)/e}const fG=async(t,{referenceEl:e,floatingEl:i,overlayPositioning:n="absolute",placement:s,flipDisabled:h,flipPlacements:f,offsetDistance:m,offsetSkidding:v,arrowEl:x,type:M})=>{var J;if(!e||!i)return null;const{x:$,y:I,placement:P,strategy:L,middlewareData:z}=await bge(e,i,{strategy:n,placement:s==="auto"||s==="auto-start"||s==="auto-end"?void 0:Y$(i,s),middleware:Tge({placement:s,flipDisabled:h,flipPlacements:f==null?void 0:f.map(te=>Y$(i,te)),offsetDistance:m,offsetSkidding:v,arrowEl:x,type:M})});if(x&&z.arrow){const{x:te,y:ie}=z.arrow,le=P.split("-")[0],de=te!=null?"left":"top",xe=Ege[le],we={left:"",top:"",bottom:"",right:""};"floatingLayout"in t&&(t.floatingLayout=le==="left"||le==="right"?"horizontal":"vertical"),Object.assign(x.style,{...we,[de]:`${de=="left"?te:ie}px`,[le]:"100%",transform:xe})}const U=((J=z.hide)==null?void 0:J.referenceHidden)?"hidden":null,W=U?"none":null;i.setAttribute(xge,P);const{open:K}=t;Object.assign(i.style,{visibility:U,pointerEvents:W,position:L,transform:K?`translate(${Z$($)}px,${Z$(I)}px)`:"",top:0,left:0})},xge="data-placement",J$=100,K$=["top","bottom","right","left","top-start","top-end","bottom-start","bottom-end","right-start","right-end","left-start","left-end","leading","trailing","leading-start","leading-end","trailing-start","trailing-end"],Sge="bottom-start",o0={animation:"calcite-floating-ui-anim",animationActive:"calcite-floating-ui-anim--active"};function Tge({placement:t,flipDisabled:e,flipPlacements:i,offsetDistance:n,offsetSkidding:s,arrowEl:h,type:f}){const m=[mge(),yge()];if(f==="menu")return[...m,W$({fallbackPlacements:i||["top-start","top","top-end","bottom-start","bottom","bottom-end"]})];if(f==="popover"||f==="tooltip"){const v=[...m,fge({mainAxis:typeof n=="number"?n:0,crossAxis:typeof s=="number"?s:0})];return t==="auto"||t==="auto-start"||t==="auto-end"?v.push(gge({alignment:t==="auto-start"?"start":t==="auto-end"?"end":null})):e||v.push(W$(i?{fallbackPlacements:i}:{})),h&&v.push(vge({element:h})),v}return[]}function gG(t,e){const i=t.filter(n=>K$.includes(n));return i.length!==t.length&&console.warn(`${e.tagName}: Invalid value found in: flipPlacements. Try any of these: ${K$.map(n=>`"${n}"`).join(", ").trim()}`,{el:e}),i}function Y$(t,e){const i=["left","right"];return Ua(t)==="rtl"&&i.reverse(),e.replace(/leading/gi,i[0]).replace(/trailing/gi,i[1])}async function o7(t,e,i=!1){if(!t.open||!e.floatingEl||!e.referenceEl)return;if(!um.get(t))return mG(t,e.referenceEl,e.floatingEl);await(i?Mge(t):fG)(t,e)}function Mge(t){let e=Q2.get(t);return e||(e=iG(fG,J$,{leading:!0,maxWait:J$}),Q2.set(t,e),e)}const Ege={top:"",left:"rotate(-90deg)",bottom:"rotate(180deg)",right:"rotate(90deg)"},um=new WeakMap,Q2=new WeakMap;async function mG(t,e,i){if(!i.isConnected)return;const n=pge;um.set(t,{state:"pending"});let s;const h=n(e,i,()=>{const f=t.reposition();s||(s=f)});return um.set(t,{state:"active",cleanUp:h}),s}async function bf(t,e,i){if(!(!i||!e)&&(w3(t,e,i),Object.assign(i.style,{visibility:"hidden",pointerEvents:"none",position:t.overlayPositioning}),!!t.open))return mG(t,e,i)}function w3(t,e,i){var s;if(!i||!e)return;const n=um.get(t);(n==null?void 0:n.state)==="active"&&n.cleanUp(),um.delete(t),(s=Q2.get(t))==null||s.cancel(),Q2.delete(t)}const X$=4,yG=Math.ceil(Math.hypot(X$,X$));/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */const kge=z4;function Q$(t){return"opened"in t?t.opened:t.open}function pc(t){kge(()=>{t.transitionEl&&Kfe(t.transitionEl,t.openTransitionProp,()=>{Q$(t)?t.onBeforeOpen():t.onBeforeClose()},()=>{Q$(t)?t.onOpen():t.onClose()})})}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */const eC={arrow:"calcite-floating-ui-arrow",arrowStroke:"calcite-floating-ui-arrow__stroke"},$ge={width:12,height:6,strokeWidth:1},vG=({floatingLayout:t,key:e,ref:i})=>{const{width:n,height:s,strokeWidth:h}=$ge,f=n/2,m=t==="vertical",v=`M0,0 H${n} L${n-f},${s} Q${f},${s} ${f},${s} Z`;return X("svg",{"aria-hidden":"true",class:eC.arrow,height:n,key:e,ref:i,viewBox:`0 0 ${n} ${n+(m?0:h)}`,width:n+(m?h:0)},h>0&&X("path",{class:eC.arrowStroke,d:v,fill:"none","stroke-width":h+1}),X("path",{d:v,stroke:"none"}))};/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */const Cge={container:"container"},Ige=300,Age=500,tC="aria-describedby";function bG(t){const{referenceElement:e}=t;return(typeof e=="string"?f3(t,{id:e}):e)||null}class Oge{constructor(){this.registeredElements=new WeakMap,this.registeredShadowRootCounts=new WeakMap,this.hoverOpenTimeout=null,this.hoverCloseTimeout=null,this.hoveredTooltip=null,this.clickedTooltip=null,this.activeTooltip=null,this.registeredElementCount=0,this.queryTooltip=e=>{const{registeredElements:i}=this,n=e.find(s=>i.has(s));return i.get(n)},this.keyDownHandler=e=>{if(e.key==="Escape"&&!e.defaultPrevented){const{activeTooltip:i}=this;if(i!=null&&i.open){this.clearHoverTimeout(),this.closeActiveTooltip();const n=bG(i);n instanceof Element&&n.contains(e.target)&&e.preventDefault()}}},this.pointerMoveHandler=e=>{const i=e.composedPath(),{activeTooltip:n}=this;if((n==null?void 0:n.open)&&i.includes(n)){this.clearHoverTimeout();return}const h=this.queryTooltip(i);this.hoveredTooltip=h,!this.isClosableClickedTooltip(h)&&(this.clickedTooltip=null,h?this.openHoveredTooltip(h):n&&this.closeHoveredTooltip())},this.clickHandler=e=>{const i=this.queryTooltip(e.composedPath());this.clickedTooltip=i,i!=null&&i.closeOnClick&&(this.toggleTooltip(i,!1),this.clearHoverTimeout())},this.focusInHandler=e=>{this.queryFocusedTooltip(e,!0)},this.focusOutHandler=e=>{this.queryFocusedTooltip(e,!1)},this.openHoveredTooltip=e=>{this.hoverOpenTimeout=window.setTimeout(()=>{this.hoverOpenTimeout!==null&&(this.clearHoverCloseTimeout(),this.activeTooltip!==this.hoveredTooltip&&(this.closeActiveTooltip(),e===this.hoveredTooltip&&this.toggleTooltip(e,!0)))},this.activeTooltip?0:Ige)},this.closeHoveredTooltip=()=>{this.hoverCloseTimeout=window.setTimeout(()=>{this.hoverCloseTimeout!==null&&this.closeActiveTooltip()},Age)}}registerElement(e,i){this.registeredElementCount++,this.registeredElements.set(e,i);const n=this.getReferenceElShadowRootNode(e);n&&this.registerShadowRoot(n),this.registeredElementCount===1&&this.addListeners()}unregisterElement(e){const i=this.getReferenceElShadowRootNode(e);i&&this.unregisterShadowRoot(i),this.registeredElements.delete(e)&&this.registeredElementCount--,this.registeredElementCount===0&&this.removeListeners()}addShadowListeners(e){e.addEventListener("focusin",this.focusInHandler,{capture:!0}),e.addEventListener("focusout",this.focusOutHandler,{capture:!0})}removeShadowListeners(e){e.removeEventListener("focusin",this.focusInHandler,{capture:!0}),e.removeEventListener("focusout",this.focusOutHandler,{capture:!0})}addListeners(){window.addEventListener("keydown",this.keyDownHandler,{capture:!0}),window.addEventListener("pointermove",this.pointerMoveHandler,{capture:!0}),window.addEventListener("click",this.clickHandler,{capture:!0}),window.addEventListener("focusin",this.focusInHandler,{capture:!0}),window.addEventListener("focusout",this.focusOutHandler,{capture:!0})}removeListeners(){window.removeEventListener("keydown",this.keyDownHandler,{capture:!0}),window.removeEventListener("pointermove",this.pointerMoveHandler,{capture:!0}),window.removeEventListener("click",this.clickHandler,{capture:!0}),window.removeEventListener("focusin",this.focusInHandler,{capture:!0}),window.removeEventListener("focusout",this.focusOutHandler,{capture:!0})}clearHoverOpenTimeout(){window.clearTimeout(this.hoverOpenTimeout),this.hoverOpenTimeout=null}clearHoverCloseTimeout(){window.clearTimeout(this.hoverCloseTimeout),this.hoverCloseTimeout=null}clearHoverTimeout(){this.clearHoverOpenTimeout(),this.clearHoverCloseTimeout()}closeActiveTooltip(){const{activeTooltip:e}=this;e!=null&&e.open&&this.toggleTooltip(e,!1)}toggleFocusedTooltip(e,i){this.closeActiveTooltip(),i&&this.clearHoverTimeout(),this.toggleTooltip(e,i)}toggleTooltip(e,i){e.open=i,this.activeTooltip=i?e:null}queryFocusedTooltip(e,i){const n=this.queryTooltip(e.composedPath());!n||this.isClosableClickedTooltip(n)||this.toggleFocusedTooltip(n,i)}isClosableClickedTooltip(e){return(e==null?void 0:e.closeOnClick)&&e===this.clickedTooltip}registerShadowRoot(e){const{registeredShadowRootCounts:i}=this,n=(i.get(e)??0)+1;n===1&&this.addShadowListeners(e),i.set(e,n)}unregisterShadowRoot(e){const{registeredShadowRootCounts:i}=this,n=i.get(e)-1;n===0&&this.removeShadowListeners(e),i.set(e,n)}getReferenceElShadowRootNode(e){return e instanceof Element?Dfe(e):null}}const Pge=":host{--calcite-floating-ui-z-index:var(--calcite-tooltip-z-index, var(--calcite-z-index-tooltip));display:block;position:absolute;z-index:var(--calcite-floating-ui-z-index)}.calcite-floating-ui-anim{position:relative;transition:var(--calcite-floating-ui-transition);transition-property:transform, visibility, opacity;opacity:0;box-shadow:0 0 16px 0 rgba(0, 0, 0, 0.16);z-index:var(--calcite-z-index);border-radius:0.25rem}:host([data-placement^=bottom]) .calcite-floating-ui-anim{transform:translateY(-5px)}:host([data-placement^=top]) .calcite-floating-ui-anim{transform:translateY(5px)}:host([data-placement^=left]) .calcite-floating-ui-anim{transform:translateX(5px)}:host([data-placement^=right]) .calcite-floating-ui-anim{transform:translateX(-5px)}:host([data-placement]) .calcite-floating-ui-anim--active{opacity:1;transform:translate(0)}:host([calcite-hydrated-hidden]){visibility:hidden !important;pointer-events:none}.calcite-floating-ui-arrow{pointer-events:none;position:absolute;z-index:calc(var(--calcite-z-index) * -1);fill:var(--calcite-color-foreground-1)}.calcite-floating-ui-arrow__stroke{stroke:var(--calcite-color-border-3)}.container{position:relative;overflow:hidden;border-radius:0.25rem;padding-block:0.75rem;padding-inline:1rem;font-size:var(--calcite-font-size--2);line-height:1.375;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1);max-inline-size:20rem;max-block-size:20rem;text-align:start}.calcite-floating-ui-anim{border-radius:0.25rem;border-width:1px;border-style:solid;border-color:var(--calcite-color-border-3);background-color:var(--calcite-color-foreground-1)}.arrow::before{outline:1px solid var(--calcite-color-border-3)}:host([hidden]){display:none}[hidden]{display:none}",Rge=Pge,iC=new Oge,wG=oi(class extends ai{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteTooltipBeforeClose=qe(this,"calciteTooltipBeforeClose",6),this.calciteTooltipClose=qe(this,"calciteTooltipClose",6),this.calciteTooltipBeforeOpen=qe(this,"calciteTooltipBeforeOpen",6),this.calciteTooltipOpen=qe(this,"calciteTooltipOpen",6),this.guid=`calcite-tooltip-${hl()}`,this.hasLoaded=!1,this.openTransitionProp="opacity",this.setTransitionEl=e=>{this.transitionEl=e},this.setUpReferenceElement=(e=!0)=>{this.removeReferences(),this.effectiveReferenceElement=bG(this.el),bf(this,this.effectiveReferenceElement,this.el);const{el:i,referenceElement:n,effectiveReferenceElement:s}=this;e&&n&&!s&&console.warn(`${i.tagName}: reference-element id "${n}" was not found.`,{el:i}),this.addReferences()},this.getId=()=>this.el.id||this.guid,this.addReferences=()=>{const{effectiveReferenceElement:e}=this;if(!e)return;const i=this.getId();"setAttribute"in e&&e.setAttribute(tC,i),iC.registerElement(e,this.el)},this.removeReferences=()=>{const{effectiveReferenceElement:e}=this;e&&("removeAttribute"in e&&e.removeAttribute(tC),iC.unregisterElement(e))},this.closeOnClick=!1,this.label=void 0,this.offsetDistance=yG,this.offsetSkidding=0,this.open=!1,this.overlayPositioning="absolute",this.placement="auto",this.referenceElement=void 0,this.effectiveReferenceElement=void 0,this.floatingLayout="vertical"}offsetDistanceOffsetHandler(){this.reposition(!0)}offsetSkiddingHandler(){this.reposition(!0)}openHandler(){pc(this),this.reposition(!0)}overlayPositioningHandler(){this.reposition(!0)}placementHandler(){this.reposition(!0)}referenceElementHandler(){this.setUpReferenceElement()}connectedCallback(){this.setUpReferenceElement(!0),this.open&&pc(this)}async componentWillLoad(){this.open&&pc(this)}componentDidLoad(){this.referenceElement&&!this.effectiveReferenceElement&&this.setUpReferenceElement(),this.hasLoaded=!0}disconnectedCallback(){this.removeReferences(),w3(this,this.effectiveReferenceElement,this.el)}async reposition(e=!1){const{el:i,effectiveReferenceElement:n,placement:s,overlayPositioning:h,offsetDistance:f,offsetSkidding:m,arrowEl:v}=this;return o7(this,{floatingEl:i,referenceEl:n,overlayPositioning:h,placement:s,offsetDistance:f,offsetSkidding:m,arrowEl:v,type:"tooltip"},e)}onBeforeOpen(){this.calciteTooltipBeforeOpen.emit()}onOpen(){this.calciteTooltipOpen.emit()}onBeforeClose(){this.calciteTooltipBeforeClose.emit()}onClose(){this.calciteTooltipClose.emit()}render(){const{effectiveReferenceElement:e,label:i,open:n,floatingLayout:s}=this,h=e&&n,f=!h;return X(cn,{key:"efe45cfea02c55dc9485e7f1760aef938aff1999","aria-hidden":bn(f),"aria-label":i,"aria-live":"polite","calcite-hydrated-hidden":f,id:this.getId(),role:"tooltip"},X("div",{key:"0110992190776206883f22752e73f2dc215890ed",class:{[o0.animation]:!0,[o0.animationActive]:h},ref:this.setTransitionEl},X(vG,{key:"993f3df44f2104096966c5865217465868a028c3",floatingLayout:s,ref:m=>this.arrowEl=m}),X("div",{key:"3289d59eba5264aa5bff0285441452861ac49d8b",class:Cge.container},X("slot",{key:"e060c878105353e47ecb5dfc9b85888be791c8c9"}))))}get el(){return this}static get watchers(){return{offsetDistance:["offsetDistanceOffsetHandler"],offsetSkidding:["offsetSkiddingHandler"],open:["openHandler"],overlayPositioning:["overlayPositioningHandler"],placement:["placementHandler"],referenceElement:["referenceElementHandler"]}}static get style(){return Rge}},[1,"calcite-tooltip",{closeOnClick:[516,"close-on-click"],label:[1],offsetDistance:[514,"offset-distance"],offsetSkidding:[514,"offset-skidding"],open:[516],overlayPositioning:[513,"overlay-positioning"],placement:[513],referenceElement:[1,"reference-element"],effectiveReferenceElement:[32],floatingLayout:[32],reposition:[64]},void 0,{offsetDistance:["offsetDistanceOffsetHandler"],offsetSkidding:["offsetSkiddingHandler"],open:["openHandler"],overlayPositioning:["overlayPositioningHandler"],placement:["placementHandler"],referenceElement:["referenceElementHandler"]}]);function _G(){if(typeof customElements>"u")return;["calcite-tooltip"].forEach(e=>{switch(e){case"calcite-tooltip":customElements.get(e)||customElements.define(e,wG);break}})}_G();const Lge=wG,Nge=_G,Dge=Object.freeze(Object.defineProperty({__proto__:null,CalciteTooltip:Lge,defineCustomElement:Nge},Symbol.toStringTag,{value:"Module"}));/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */const zge={titleGroup:"title-group"},Fge=":host{display:flex;flex-direction:column}:host([bordered]){box-shadow:inset 0 1px 0 var(--calcite-color-border-1);background-color:var(--calcite-color-foreground-1)}:host([bordered]) section{border-width:1px;border-style:solid;border-color:var(--calcite-color-border-1)}:host([bordered][position=bottom]){box-shadow:inset 0 1px 0 var(--calcite-color-border-1), inset 0 -1px 0 var(--calcite-color-border-1)}:host([bordered]:not([position=bottom])) ::slotted(calcite-tab-nav){margin-block-end:-1px}:host([bordered][scale=s]) section{padding:0.75rem}:host([bordered][scale=m]) section{padding:0.5rem}:host([bordered][scale=l]) section{padding:1rem}:host([position=bottom]){flex-direction:column-reverse}section{display:flex;flex-grow:1;overflow:hidden;border-block-start-width:1px;border-block-start-color:var(--calcite-color-border-1);border-block-start-style:solid}:host([position=bottom]) section{flex-direction:column-reverse;border-block-start-width:0px;border-block-end-width:1px;border-block-end-color:var(--calcite-color-border-1)}:host([position=bottom]:not([bordered])) section{border-block-end-style:solid}@media (forced-colors: active){:host([bordered]) section{border-block-start-width:0px;border-block-end-width:1px}:host([position=bottom][bordered]) section{border-block-start-width:1px;border-block-end-width:0px}}:host([hidden]){display:none}[hidden]{display:none}",jge=Fge,Gge=oi(class extends ai{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.mutationObserver=Wi("mutation",e=>{for(const i of e){const n=i.target;(n.nodeName==="CALCITE-TAB-NAV"||n.nodeName==="CALCITE-TAB-TITLE"||n.nodeName==="CALCITE-TAB")&&this.updateItems()}}),this.layout="inline",this.position="top",this.scale="m",this.bordered=!1,this.titles=[],this.tabs=[]}handleInheritableProps(){this.updateItems()}connectedCallback(){this.mutationObserver.observe(this.el,{childList:!0}),this.updateItems()}async componentWillLoad(){this.updateItems()}disconnectedCallback(){var e;(e=this.mutationObserver)==null||e.disconnect()}render(){return X(jT,{key:"8f47fe2cdeb7897a888891ba33b3fcda0d1d2b10"},X("slot",{key:"e19648c5138807be98e46ff6a343989a8d931c86",name:zge.titleGroup}),X("section",{key:"64880a376a2cda485d608ba00fe3431fdb7ea011"},X("slot",{key:"2cbd9deb8203448212357a4de42f5ac4a1f5daad"})))}calciteInternalTabTitleRegister(e){this.titles=[...this.titles,e.target],this.registryHandler(),e.stopPropagation()}calciteTabTitleUnregister(e){this.titles=this.titles.filter(i=>i!==e.detail),this.registryHandler(),e.stopPropagation()}calciteInternalTabRegister(e){this.tabs=[...this.tabs,e.target],this.registryHandler(),e.stopPropagation()}calciteTabUnregister(e){this.tabs=this.tabs.filter(i=>i!==e.detail),this.registryHandler(),e.stopPropagation()}updateItems(){const{position:e,scale:i}=this,n=this.el.querySelector("calcite-tab-nav");n&&(n.position=e,n.scale=i),Array.from(this.el.querySelectorAll("calcite-tab")).forEach(s=>{s.parentElement===this.el&&(s.scale=i)}),Array.from(this.el.querySelectorAll("calcite-tab-nav > calcite-tab-title")).forEach(s=>{s.position=e,s.scale=i})}async registryHandler(){let e,i;if(this.tabs.some(n=>n.tab)||this.titles.some(n=>n.tab))e=this.tabs.sort((n,s)=>n.tab.localeCompare(s.tab)).map(n=>n.id),i=this.titles.sort((n,s)=>n.tab.localeCompare(s.tab)).map(n=>n.id);else{const n=await Promise.all(this.tabs.map(h=>h.getTabIndex())),s=await Promise.all(this.titles.map(h=>h.getTabIndex()));e=n.reduce((h,f,m)=>(h[f]=this.tabs[m].id,h),[]),i=s.reduce((h,f,m)=>(h[f]=this.titles[m].id,h),[])}this.tabs.forEach(n=>n.updateAriaInfo(e,i)),this.titles.forEach(n=>n.updateAriaInfo(e,i))}get el(){return this}static get watchers(){return{position:["handleInheritableProps"],scale:["handleInheritableProps"]}}static get style(){return jge}},[1,"calcite-tabs",{layout:[513],position:[513],scale:[513],bordered:[4],titles:[32],tabs:[32]},[[0,"calciteInternalTabTitleRegister","calciteInternalTabTitleRegister"],[16,"calciteTabTitleUnregister","calciteTabTitleUnregister"],[0,"calciteInternalTabRegister","calciteInternalTabRegister"],[16,"calciteTabUnregister","calciteTabUnregister"]],{position:["handleInheritableProps"],scale:["handleInheritableProps"]}]);function Vge(){if(typeof customElements>"u")return;["calcite-tabs"].forEach(e=>{switch(e){case"calcite-tabs":customElements.get(e)||customElements.define(e,Gge);break}})}Vge();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */const Hge="24px",Bge="32px",Uge="44px";/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */const nC={chevronRight:"chevron-right",chevronLeft:"chevron-left"},Tl={activeIndicatorContainer:"tab-nav-active-indicator-container",container:"tab-nav",containerHasEndTabTitleOverflow:"tab-nav--end-overflow",containerHasStartTabTitleOverflow:"tab-nav--start-overflow",scrollButton:"scroll-button",scrollButtonContainer:"scroll-button-container",scrollBackwardContainerButton:"scroll-button-container--backward",scrollForwardContainerButton:"scroll-button-container--forward",tabTitleSlotWrapper:"tab-titles-slot-wrapper"},qge=':host{--calcite-internal-tab-nav-gradient-start-side:left;--calcite-internal-tab-nav-gradient-end-side:right;position:relative;display:flex}.scale-s{--calcite-internal-tab-nav-scroller-button-width:24px;min-block-size:1.5rem}.scale-m{--calcite-internal-tab-nav-scroller-button-width:32px;min-block-size:2rem}.scale-l{--calcite-internal-tab-nav-scroller-button-width:44px;min-block-size:2.75rem}.calcite--rtl{--calcite-internal-tab-nav-gradient-start-side:right;--calcite-internal-tab-nav-gradient-end-side:left}.tab-nav--start-overflow .tab-nav-active-indicator-container,.tab-nav--start-overflow .tab-titles-slot-wrapper{mask-image:linear-gradient(to var(--calcite-internal-tab-nav-gradient-end-side), transparent, transparent var(--calcite-internal-tab-nav-scroller-button-width), white var(--calcite-internal-tab-nav-scroller-button-width), white 51%)}.tab-nav--end-overflow .tab-nav-active-indicator-container,.tab-nav--end-overflow .tab-titles-slot-wrapper{mask-image:linear-gradient(to var(--calcite-internal-tab-nav-gradient-start-side), transparent, transparent var(--calcite-internal-tab-nav-scroller-button-width), white var(--calcite-internal-tab-nav-scroller-button-width), white 51%)}.tab-nav--start-overflow.tab-nav--end-overflow .tab-nav-active-indicator-container,.tab-nav--start-overflow.tab-nav--end-overflow .tab-titles-slot-wrapper{mask-image:linear-gradient(to var(--calcite-internal-tab-nav-gradient-end-side), transparent, transparent var(--calcite-internal-tab-nav-scroller-button-width), white var(--calcite-internal-tab-nav-scroller-button-width), white 51%, transparent 51%), linear-gradient(to var(--calcite-internal-tab-nav-gradient-start-side), transparent, transparent var(--calcite-internal-tab-nav-scroller-button-width), white var(--calcite-internal-tab-nav-scroller-button-width), white 51%, transparent 51%)}.tab-nav::-webkit-scrollbar{display:none;-ms-overflow-style:none;scrollbar-width:none}:host([layout=center]) ::slotted(calcite-tab-title){display:flex;flex-grow:1;flex-shrink:0;min-inline-size:auto;white-space:nowrap}:host([layout=center]) ::slotted(calcite-tab-title[selected]){overflow:unset}:host(:not([bordered])) .scale-l{--calcite-internal-tab-nav-gap:var(--calcite-size-xxl)}:host(:not([bordered])) .scale-m{--calcite-internal-tab-nav-gap:var(--calcite-size-xl)}:host(:not([bordered])) .scale-s{--calcite-internal-tab-nav-gap:var(--calcite-size-lg)}:host(:not([bordered])) .tab-titles-slot-wrapper{gap:var(--calcite-internal-tab-nav-gap)}:host([layout=center]:not([bordered])) .tab-titles-slot-wrapper{padding-inline:var(--calcite-spacing-xxl)}.tab-nav,.tab-titles-slot-wrapper{display:flex;inline-size:100%;justify-content:flex-start;overflow:hidden;white-space:nowrap}.tab-nav-active-indicator-container{position:absolute;inset-inline:0px;inset-block-end:0px;block-size:0.125rem;inline-size:100%;overflow:hidden}.tab-nav-active-indicator{position:absolute;inset-block-end:0px;display:block;block-size:0.125rem;background-color:var(--calcite-color-brand);transition-property:all;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms;transition-timing-function:cubic-bezier(0, 0, 0.2, 1)}.scroll-button-container{position:absolute;inset-block:0px}.scroll-button-container calcite-button{--calcite-offset-invert-focus:1;--calcite-color-text-1:var(--calcite-color-text-3);block-size:100%}.scroll-button-container calcite-button:hover{--calcite-color-text-1:unset;--calcite-color-foreground-1:var(--calcite-color-transparent-hover);--calcite-color-foreground-3:var(--calcite-color-transparent)}.scroll-button-container--forward{inset-inline-end:0;z-index:var(--calcite-z-index)}.scroll-button-container--backward{inset-inline-start:0;z-index:var(--calcite-z-index)}:host(:not([bordered])) .scroll-button-container--backward::before,:host(:not([bordered])) .scroll-button-container--forward::before{background-color:var(--calcite-color-border-3);content:"";inline-size:var(--calcite-border-width-sm);inset-block-start:var(--calcite-border-width-md);inset-block-end:var(--calcite-border-width-md);position:absolute}:host(:not([bordered])) .scroll-button-container--backward::before{inset-inline-end:0}:host(:not([bordered])) .scroll-button-container--forward::before{inset-inline-start:0}:host .position-bottom .tab-nav-active-indicator{inset-block-end:unset;inset-block-start:0px}:host .position-bottom .tab-nav-active-indicator-container{inset-block-end:unset;inset-block-start:0px}:host([bordered]) .tab-nav-active-indicator-container{inset-block-end:unset}:host([bordered]) .position-bottom .tab-nav-active-indicator-container{inset-block-end:0;inset-block-start:unset}@media (forced-colors: active){.tab-nav-active-indicator{background-color:highlight}}:host([hidden]){display:none}[hidden]{display:none}',Wge=qge,Zge=oi(class extends ai{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteTabChange=qe(this,"calciteTabChange",6),this.calciteInternalTabChange=qe(this,"calciteInternalTabChange",6),this.effectiveDir="ltr",this.lastScrollWheelAxis="x",this.resizeObserver=Wi("resize",()=>{this.updateScrollingState(),this.activeIndicatorEl&&this.updateActiveIndicator()}),this.onTabTitleWheel=e=>{e.preventDefault();const{deltaX:i,deltaY:n}=e,s=Math.abs(i),h=Math.abs(n);let f;s===h?f=this.lastScrollWheelAxis==="x"?i:n:s>h?(f=i,this.lastScrollWheelAxis="x"):(f=n,this.lastScrollWheelAxis="y");const m=(this.effectiveDir==="rtl"?-1:1)*f;e.currentTarget.scrollBy(m,0),requestAnimationFrame(()=>this.updateActiveIndicator())},this.onSlotChange=e=>{var n;(n=this.intersectionObserver)==null||n.disconnect(),e.target.assignedElements().forEach(s=>{var h;(h=this.intersectionObserver)==null||h.observe(s)})},this.storeContainerRef=e=>this.containerEl=e,this.storeTabTitleWrapperRef=e=>{this.tabTitleContainerEl=e,this.intersectionObserver=Wi("intersection",()=>this.updateScrollingState(),{root:e,threshold:[0,.5,1]})},this.scrollToTabTitles=e=>{z4(()=>{const i=this.tabTitleContainerEl,n=i.getBoundingClientRect(),s=Array.from(this.el.querySelectorAll("calcite-tab-title")),{effectiveDir:h}=this;e==="forward"&&s.reverse();let f=null;if(s.forEach(m=>{const v=m.getBoundingClientRect(),x=n.x+n.width,M=v.x+v.width;e==="forward"&&h==="ltr"||e==="backward"&&h==="rtl"?(v.x>x||M>x&&v.x>n.x)&&(f=m):(M<n.x||M<x&&v.x<n.x)&&(f=m)}),f){const{scrollerButtonWidth:m}=this,v=e==="forward"&&h==="ltr"||e==="backward"&&h==="rtl"?-m:f.offsetWidth-i.clientWidth+m,x=f.offsetLeft+v;i.scrollTo({left:x,behavior:"smooth"})}})},this.scrollToNextTabTitles=()=>this.scrollToTabTitles("forward"),this.scrollToPreviousTabTitles=()=>this.scrollToTabTitles("backward"),this.handleTabFocus=(e,i,n)=>{const s=ig(this.enabledTabTitles,i,n);this.scrollTabTitleIntoView(s,"instant"),e.stopPropagation()},this.onTabTitleScroll=()=>{this.updateActiveIndicator(),this.updateScrollingState()},this.renderScrollButton=e=>{const{bordered:i,messages:n,hasOverflowingStartTabTitle:s,hasOverflowingEndTabTitle:h,scale:f}=this,m=e==="end";return X("div",{class:{[Tl.scrollButtonContainer]:!0,[Tl.scrollBackwardContainerButton]:!m,[Tl.scrollForwardContainerButton]:m},hidden:m&&!h||!m&&!s,key:e},X("calcite-button",{appearance:i?"outline-fill":"transparent","aria-label":m?n.nextTabTitles:n.previousTabTitles,class:{[Tl.scrollButton]:!0},iconFlipRtl:"both",iconStart:m?nC.chevronRight:nC.chevronLeft,kind:"neutral",onClick:m?this.scrollToNextTabTitles:this.scrollToPreviousTabTitles,scale:f,tabIndex:-1}))},this.storageId=void 0,this.syncId=void 0,this.selectedTitle=null,this.scale="m",this.layout="inline",this.position="bottom",this.bordered=!1,this.indicatorOffset=void 0,this.indicatorWidth=void 0,this.messages=void 0,this.messageOverrides=void 0,this.defaultMessages=void 0,this.effectiveLocale="",this.hasOverflowingStartTabTitle=!1,this.hasOverflowingEndTabTitle=!1,this.selectedTabId=void 0}onMessagesChange(){}async selectedTabIdChanged(){localStorage&&this.storageId&&this.selectedTabId!==void 0&&this.selectedTabId!==null&&localStorage.setItem(`calcite-tab-nav-${this.storageId}`,JSON.stringify(this.selectedTabId)),this.calciteInternalTabChange.emit({tab:this.selectedTabId}),this.selectedTitle=await this.getTabTitleById(this.selectedTabId)}selectedTitleChanged(){this.updateActiveIndicator()}connectedCallback(){var e;this.parentTabsEl=this.el.closest("calcite-tabs"),(e=this.resizeObserver)==null||e.observe(this.el),po(this),yo(this)}async componentWillLoad(){const e=`calcite-tab-nav-${this.storageId}`;if(localStorage&&this.storageId&&localStorage.getItem(e)){const i=JSON.parse(localStorage.getItem(e));this.selectedTabId=i}await go(this)}componentDidLoad(){this.scrollTabTitleIntoView(this.selectedTitle,"instant")}componentWillRender(){const{parentTabsEl:e}=this;this.layout=e==null?void 0:e.layout,this.bordered=e==null?void 0:e.bordered,this.effectiveDir=Ua(this.el),this.selectedTitle&&this.updateActiveIndicator()}componentDidRender(){this.tabTitles.length&&this.tabTitles.every(e=>!e.selected)&&!this.selectedTabId&&this.tabTitles[0].getTabIdentifier().then(e=>{this.calciteInternalTabChange.emit({tab:e})})}disconnectedCallback(){var e;(e=this.resizeObserver)==null||e.disconnect(),fo(this),vo(this)}render(){const e=`${this.indicatorWidth}px`,i=`${this.indicatorOffset}px`,n=this.effectiveDir!=="rtl"?{width:e,left:i}:{width:e,right:i};return X(cn,{key:"174cd3c34b59be8c237cb1bd2e143d8d9369198c",role:"tablist"},X("div",{key:"3431edaba38c8875d6077a649610d2f21173df47",class:{[Tl.container]:!0,[Tl.containerHasStartTabTitleOverflow]:!!this.hasOverflowingStartTabTitle,[Tl.containerHasEndTabTitleOverflow]:!!this.hasOverflowingEndTabTitle,[`scale-${this.scale}`]:!0,[`position-${this.position}`]:!0,[tc.rtl]:this.effectiveDir==="rtl"},ref:this.storeContainerRef},this.renderScrollButton("start"),X("div",{key:"1fee2edb04f475641523b66d5fbe4e62a7403c26",class:{[Tl.tabTitleSlotWrapper]:!0},onScroll:this.onTabTitleScroll,onWheel:this.onTabTitleWheel,ref:this.storeTabTitleWrapperRef},X("slot",{key:"e14eea620096ffa9bc6d518ce31ebe0f623bdf4e",onSlotchange:this.onSlotChange})),X("div",{key:"1ec5cff7490ac9ae87b0dab467ca3890c217a3b3",class:{[Tl.activeIndicatorContainer]:!0},ref:s=>this.activeIndicatorContainerEl=s},X("div",{key:"e0e10bbeedcae6bcf1f5d5957d35e06e555fd14c",class:"tab-nav-active-indicator",ref:s=>this.activeIndicatorEl=s,style:n})),this.renderScrollButton("end")))}focusPreviousTabHandler(e){this.handleTabFocus(e,e.target,"previous")}focusNextTabHandler(e){this.handleTabFocus(e,e.target,"next")}focusFirstTabHandler(e){this.handleTabFocus(e,e.target,"first")}focusLastTabHandler(e){this.handleTabFocus(e,e.target,"last")}internalActivateTabHandler(e){const i=e.target;this.selectedTabId=e.detail.tab?e.detail.tab:this.getIndexOfTabTitle(i),e.stopPropagation(),this.scrollTabTitleIntoView(i)}scrollTabTitleIntoView(e,i="smooth"){e&&z4(()=>{const n=this.effectiveDir==="ltr",s=this.tabTitleContainerEl,h=s.getBoundingClientRect(),f=e.getBoundingClientRect(),m=s.scrollLeft,v=n?this.hasOverflowingStartTabTitle:this.hasOverflowingEndTabTitle,x=n?this.hasOverflowingEndTabTitle:this.hasOverflowingStartTabTitle;if(f.left<h.left+(v?this.scrollerButtonWidth:0)){const M=m+(f.left-h.left)-this.scrollerButtonWidth;s.scrollTo({left:M,behavior:i})}else if(f.right>h.right-(x?this.scrollerButtonWidth:0)){const M=m+(f.right-h.right)+this.scrollerButtonWidth;s.scrollTo({left:M,behavior:i})}})}activateTabHandler(e){this.calciteTabChange.emit(),e.stopPropagation()}internalCloseTabHandler(e){const i=e.target;this.handleTabTitleClose(i),e.stopPropagation()}updateTabTitles(e){e.target.selected&&(this.selectedTabId=e.detail)}globalInternalTabChangeHandler(e){this.syncId&&e.target!==this.el&&e.target.syncId===this.syncId&&this.selectedTabId!==e.detail.tab&&(this.selectedTabId=e.detail.tab),e.stopPropagation()}iconStartChangeHandler(){this.updateActiveIndicator()}effectiveLocaleChange(){mo(this,this.effectiveLocale)}get scrollerButtonWidth(){const{scale:e}=this;return parseInt(e==="s"?Hge:e==="m"?Bge:Uge)}updateActiveIndicator(){var x,M,$,I,P,L;const e=(x=this.tabTitleContainerEl)==null?void 0:x.scrollLeft,i=(M=this.containerEl)==null?void 0:M.scrollLeft,n=($=this.activeIndicatorContainerEl)==null?void 0:$.offsetWidth,s=(I=this.selectedTitle)==null?void 0:I.offsetLeft,h=(P=this.selectedTitle)==null?void 0:P.offsetWidth,f=n-s-h,m=this.effectiveDir==="ltr"?s:f,v=this.effectiveDir==="ltr"?-1:1;this.indicatorOffset=m+v*(i+e),this.indicatorWidth=(L=this.selectedTitle)==null?void 0:L.offsetWidth}updateScrollingState(){const e=this.tabTitleContainerEl;if(!e)return;let i,n;const s=e.scrollLeft,h=e.clientWidth,f=e.scrollWidth;this.effectiveDir==="ltr"?(i=s>0,n=s+h<f):(i=s<0,n=s!==-(f-h)),this.hasOverflowingStartTabTitle=i,this.hasOverflowingEndTabTitle=n}getIndexOfTabTitle(e,i=this.tabTitles){return i.indexOf(e)}async getTabTitleById(e){return Promise.all(this.tabTitles.map(i=>i.getTabIdentifier())).then(i=>this.tabTitles[i.indexOf(e)])}get tabTitles(){return k$(this.el,"calcite-tab-title")}get enabledTabTitles(){return k$(this.el,"calcite-tab-title:not([disabled])").filter(e=>!e.closed)}handleTabTitleClose(e){const{tabTitles:i}=this,n=e.selected,s=i.reduce((f,m,v)=>m.closed?f:[...f,v],[]),h=s.length;if(h===1&&i[s[0]].closable)i[s[0]].closable=!1,this.selectedTabId=s[0],n&&i[s[0]].activateTab();else if(h>1){const f=i.findIndex(v=>v===e),m=s.find(v=>v>f);this.selectedTabId===f&&(this.selectedTabId=m||h-1,i[this.selectedTabId].activateTab())}requestAnimationFrame(()=>{this.updateActiveIndicator(),i[this.selectedTabId].focus()})}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{messageOverrides:["onMessagesChange"],selectedTabId:["selectedTabIdChanged"],selectedTitle:["selectedTitleChanged"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return Wge}},[1,"calcite-tab-nav",{storageId:[513,"storage-id"],syncId:[513,"sync-id"],selectedTitle:[1040],scale:[1],layout:[1537],position:[1],bordered:[1540],indicatorOffset:[1026,"indicator-offset"],indicatorWidth:[1026,"indicator-width"],messages:[1040],messageOverrides:[1040],defaultMessages:[32],effectiveLocale:[32],hasOverflowingStartTabTitle:[32],hasOverflowingEndTabTitle:[32],selectedTabId:[32]},[[0,"calciteInternalTabsFocusPrevious","focusPreviousTabHandler"],[0,"calciteInternalTabsFocusNext","focusNextTabHandler"],[0,"calciteInternalTabsFocusFirst","focusFirstTabHandler"],[0,"calciteInternalTabsFocusLast","focusLastTabHandler"],[0,"calciteInternalTabsActivate","internalActivateTabHandler"],[0,"calciteTabsActivate","activateTabHandler"],[0,"calciteInternalTabsClose","internalCloseTabHandler"],[0,"calciteInternalTabTitleRegister","updateTabTitles"],[16,"calciteInternalTabChange","globalInternalTabChangeHandler"],[0,"calciteInternalTabIconChanged","iconStartChangeHandler"]],{messageOverrides:["onMessagesChange"],selectedTabId:["selectedTabIdChanged"],selectedTitle:["selectedTitleChanged"],effectiveLocale:["effectiveLocaleChange"]}]);function Jge(){if(typeof customElements>"u")return;["calcite-tab-nav","calcite-button","calcite-icon","calcite-loader"].forEach(e=>{switch(e){case"calcite-tab-nav":customElements.get(e)||customElements.define(e,Zge);break;case"calcite-button":customElements.get(e)||Qj();break;case"calcite-icon":customElements.get(e)||Mr();break;case"calcite-loader":customElements.get(e)||fu();break}})}Jge();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */const Ml={closeButton:"close-button",container:"container",content:"content",contentHasText:"content--has-text",iconEnd:"icon-end",iconPresent:"icon-present",iconStart:"icon-start",titleIcon:"calcite-tab-title--icon"},Kge={close:"x"},Yge=`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:block;outline:2px solid transparent;outline-offset:2px;margin-inline-start:0px}:host([layout=inline]){flex:0 1 auto}:host([layout=center]){flex:1 1 auto}.content{display:flex;align-items:center;justify-content:center}.scale-s .content{padding-block:0.25rem;font-size:var(--calcite-font-size--2);line-height:1rem}.scale-m .content{padding-block:0.5rem;font-size:var(--calcite-font-size--1);line-height:1rem}.scale-l .content{padding-block:0.625rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([closable]) .content{box-sizing:border-box;block-size:100%;border-block-end-color:transparent}:host([layout=inline]) .content,:host([layout=center]) .content{padding-inline:0.25rem}:host([layout=center]) .scale-s,:host([layout=center]) .scale-m,:host([layout=center]) .scale-l{margin-block:0px;justify-content:center;text-align:center}:host([layout=center]) .scale-s .content,:host([layout=center]) .scale-m .content,:host([layout=center]) .scale-l .content{flex:1 1 auto;flex-grow:1}.container{box-sizing:border-box;display:flex;block-size:100%;inline-size:100%;cursor:pointer;align-content:center;justify-content:space-between;border-block-end-width:2px;padding-inline:0px;font-size:var(--calcite-font-size--1);line-height:1rem;color:var(--calcite-color-text-3);outline-color:transparent;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;border-block-end-color:transparent;border-block-end-style:solid}:host([position=bottom]) .container{border-block-end-width:0px;border-block-start-width:2px;border-block-start-color:transparent;border-block-start-style:solid}:host([closed]){display:none}:host([selected]) .container{border-color:transparent;color:var(--calcite-color-text-1)}:host(:focus) .container{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}:host(:focus) .container:focus-within{outline-color:transparent}:host(:active) a,:host(:focus) a,:host(:hover) a{border-color:var(--calcite-color-border-2);color:var(--calcite-color-text-1);text-decoration-line:none}:host([disabled]) .container{pointer-events:none;opacity:0.5}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.calcite-tab-title--icon{position:relative;margin:0px;display:inline-flex;align-self:center}.calcite-tab-title--icon svg{transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}.content--has-text{padding:0.25rem}.content--has-text .calcite-tab-title--icon.icon-start{margin-inline-end:0.5rem}.content--has-text .calcite-tab-title--icon.icon-end{margin-inline-start:0.5rem}.close-button{display:flex;cursor:pointer;appearance:none;align-content:center;align-items:center;justify-content:center;align-self:center;border-style:none;background-color:var(--calcite-color-foreground-1);padding:0.25rem;color:var(--calcite-color-text-3);outline-color:transparent;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;background-color:var(--calcite-button-transparent-1);margin-inline-start:auto}.close-button:focus{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          );outline-offset:-1px}.close-button:focus,.close-button:hover{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-2)}.close-button:active{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-3)}.close-button calcite-icon{color:inherit}:host([icon-start][icon-end]) .calcite-tab-title--icon:first-child{margin-inline-end:0.5rem}:host([bordered]){margin-inline-end:0}:host([bordered][selected]){box-shadow:inset 0px -2px var(--calcite-color-foreground-1)}:host([bordered][selected][position=bottom]){box-shadow:inset 0 2px 0 var(--calcite-color-foreground-1)}:host([bordered]:hover) .container{background-color:var(--calcite-color-transparent-hover)}:host([closable]) .container,:host([bordered]) .container{border-inline-start:1px solid transparent;border-inline-end:1px solid transparent}:host([closable]) .container .close-button,:host([bordered]) .container .close-button{margin-inline:0}:host([closable][position=bottom]) .container,:host([bordered][position=bottom]) .container{border-block-start-style:unset}:host([selected][bordered]) .container{border-inline-start-color:var(--calcite-color-border-1);border-inline-end-color:var(--calcite-color-border-1)}:host([layout=inline][bordered]) .scale-m .content,:host([layout=center][bordered]) .scale-m .content{padding-inline:0.75rem}:host([layout=inline][bordered]) .scale-s .content,:host([layout=center][bordered]) .scale-s .content{padding-inline:0.5rem}:host([layout=inline][bordered]) .scale-l .content,:host([layout=center][bordered]) .scale-l .content{padding-inline:1rem}:host([layout=inline][closable]) .scale-s .content,:host([layout=inline][closable]) .scale-m .content,:host([layout=inline][closable]) .scale-l .content{padding-inline-end:0}@media (forced-colors: active){:host{outline-width:0;outline-offset:0}:host(:focus) .container{outline-color:highlight}:host([bordered]) .container{border-block-end-style:solid}:host([bordered][position=bottom]) .container{border-block-start-style:solid}:host([bordered][selected]) .container{border-block-end-style:none}:host([bordered][position=bottom][selected]) .container{border-block-start-style:none}.close-button{z-index:var(--calcite-z-index)}}:host([hidden]){display:none}[hidden]{display:none}`,Xge=Yge,Qge=oi(class extends ai{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteTabsActivate=qe(this,"calciteTabsActivate",6),this.calciteInternalTabsActivate=qe(this,"calciteInternalTabsActivate",6),this.calciteTabsClose=qe(this,"calciteTabsClose",6),this.calciteInternalTabsClose=qe(this,"calciteInternalTabsClose",6),this.calciteInternalTabsFocusNext=qe(this,"calciteInternalTabsFocusNext",6),this.calciteInternalTabsFocusPrevious=qe(this,"calciteInternalTabsFocusPrevious",6),this.calciteInternalTabsFocusFirst=qe(this,"calciteInternalTabsFocusFirst",6),this.calciteInternalTabsFocusLast=qe(this,"calciteInternalTabsFocusLast",6),this.calciteInternalTabTitleRegister=qe(this,"calciteInternalTabTitleRegister",6),this.calciteInternalTabIconChanged=qe(this,"calciteInternalTabIconChanged",6),this.closeClickHandler=()=>{this.closeTabTitleAndNotify()},this.mutationObserver=Wi("mutation",()=>this.updateHasText()),this.resizeObserver=Wi("resize",()=>{this.calciteInternalTabIconChanged.emit()}),this.guid=`calcite-tab-title-${hl()}`,this.selected=!1,this.closable=!1,this.closed=!1,this.disabled=!1,this.iconEnd=void 0,this.iconFlipRtl=void 0,this.iconStart=void 0,this.layout=void 0,this.position="top",this.scale="m",this.bordered=!1,this.tab=void 0,this.messages=void 0,this.messageOverrides=void 0,this.controls=void 0,this.defaultMessages=void 0,this.effectiveLocale=void 0,this.hasText=!1}selectedHandler(){this.selected&&this.activateTab(!1)}onMessagesChange(){}connectedCallback(){$c(this),po(this),yo(this),this.setupTextContentObserver(),this.parentTabNavEl=this.el.closest("calcite-tab-nav"),this.parentTabsEl=this.el.closest("calcite-tabs")}disconnectedCallback(){var e,i,n;(e=this.mutationObserver)==null||e.disconnect(),(i=document.body)==null||i.dispatchEvent(new CustomEvent("calciteTabTitleUnregister",{detail:this.el})),(n=this.resizeObserver)==null||n.disconnect(),Cc(this),fo(this),vo(this)}async componentWillLoad(){await go(this),this.updateHasText(),this.tab&&this.selected&&this.activateTab(!1)}componentWillRender(){this.parentTabsEl&&(this.layout=this.parentTabsEl.layout,this.bordered=this.parentTabsEl.bordered)}render(){const{el:e,closed:i}=this,n=e.id||this.guid,s=X("calcite-icon",{key:"c6c7baa28fe5aa5ed07d85815d0a0ebac4318368",class:{[Ml.titleIcon]:!0,[Ml.iconStart]:!0},flipRtl:this.iconFlipRtl==="start"||this.iconFlipRtl==="both",icon:this.iconStart,scale:Ui(this.scale)}),h=X("calcite-icon",{key:"fc5e9d925510867e451df60bed298b158a10054b",class:{[Ml.titleIcon]:!0,[Ml.iconEnd]:!0},flipRtl:this.iconFlipRtl==="end"||this.iconFlipRtl==="both",icon:this.iconEnd,scale:Ui(this.scale)});return X(cn,{key:"d84446a2e6fb8a9007c70a798e997d2f8bae485e","aria-controls":this.controls,"aria-selected":bn(this.selected),id:n,role:"tab",tabIndex:this.selected&&!this.disabled?0:-1},X(dl,{key:"0130123cde98ed0f0e5065387156293fda2d1c4b",disabled:this.disabled},X("div",{key:"c37a2e097b38dd17588a7eb81fa4fa2c5f3977a9",class:{container:!0,[Ml.iconPresent]:!!this.iconStart||!!this.iconEnd,[`scale-${this.scale}`]:!0},hidden:i,ref:f=>{var m;return(m=this.resizeObserver)==null?void 0:m.observe(f)}},X("div",{key:"53065b8558e4e0732aaeb60624367547a0aee7f8",class:{[Ml.content]:!0,[Ml.contentHasText]:this.hasText}},this.iconStart?s:null,X("slot",{key:"c05fdb2126495f59fe88e32b5368e8ad8a79b303"}),this.iconEnd?h:null),this.renderCloseButton())))}renderCloseButton(){const{closable:e,messages:i}=this;return e?X("button",{"aria-label":i.close,class:Ml.closeButton,disabled:!1,key:Ml.closeButton,onClick:this.closeClickHandler,ref:n=>this.closeButtonEl=n,title:i.close,type:"button"},X("calcite-icon",{icon:Kge.close,scale:Ui(this.scale)})):null}async componentDidLoad(){this.calciteInternalTabTitleRegister.emit(await this.getTabIdentifier())}componentDidRender(){ul(this)}internalTabChangeHandler(e){e.composedPath().find(n=>n.tagName==="CALCITE-TABS")===this.parentTabsEl&&(this.tab?this.selected=this.tab===e.detail.tab:this.getTabIndex().then(n=>{this.selected=n===e.detail.tab}),e.stopPropagation())}onClick(){this.activateTab()}keyDownHandler(e){switch(e.key){case" ":case"Enter":e.composedPath().includes(this.closeButtonEl)||(this.activateTab(),e.preventDefault());break;case"ArrowRight":e.preventDefault(),Ua(this.el)==="ltr"?this.calciteInternalTabsFocusNext.emit():this.calciteInternalTabsFocusPrevious.emit();break;case"ArrowLeft":e.preventDefault(),Ua(this.el)==="ltr"?this.calciteInternalTabsFocusPrevious.emit():this.calciteInternalTabsFocusNext.emit();break;case"Home":e.preventDefault(),this.calciteInternalTabsFocusFirst.emit();break;case"End":e.preventDefault(),this.calciteInternalTabsFocusLast.emit();break}}async getTabIndex(){return Array.prototype.indexOf.call(Mj(this.el.parentElement.children).filter(e=>e.matches("calcite-tab-title")),this.el)}async getTabIdentifier(){return this.tab?this.tab:this.getTabIndex()}async updateAriaInfo(e=[],i=[]){this.controls=e[i.indexOf(this.el.id)]||null}async activateTab(e=!0){if(this.disabled||this.closed)return;const i={tab:this.tab};this.calciteInternalTabsActivate.emit(i),e&&requestAnimationFrame(()=>this.calciteTabsActivate.emit())}effectiveLocaleChange(){mo(this,this.effectiveLocale)}updateHasText(){this.hasText=this.el.textContent.trim().length>0}setupTextContentObserver(){var e;(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0})}closeTabTitleAndNotify(){this.closed=!0,this.calciteInternalTabsClose.emit({tab:this.tab}),this.calciteTabsClose.emit()}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{selected:["selectedHandler"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return Xge}},[1,"calcite-tab-title",{selected:[1540],closable:[516],closed:[1540],disabled:[516],iconEnd:[513,"icon-end"],iconFlipRtl:[513,"icon-flip-rtl"],iconStart:[513,"icon-start"],layout:[1537],position:[1],scale:[1],bordered:[1540],tab:[513],messages:[1040],messageOverrides:[1040],controls:[32],defaultMessages:[32],effectiveLocale:[32],hasText:[32],getTabIndex:[64],getTabIdentifier:[64],updateAriaInfo:[64],activateTab:[64]},[[16,"calciteInternalTabChange","internalTabChangeHandler"],[0,"click","onClick"],[0,"keydown","keyDownHandler"]],{selected:["selectedHandler"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function eme(){if(typeof customElements>"u")return;["calcite-tab-title","calcite-icon"].forEach(e=>{switch(e){case"calcite-tab-title":customElements.get(e)||customElements.define(e,Qge);break;case"calcite-icon":customElements.get(e)||Mr();break}})}eme();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */const rC={container:"container",content:"content"},tme=`:host([selected]) section,:host([selected]) .container{display:block}:host{display:none;block-size:100%;inline-size:100%}:host([selected]){display:block;block-size:100%;inline-size:100%;overflow:auto}.content{box-sizing:border-box;padding-block:var(--calcite-internal-tab-content-block-padding)}.scale-s{--calcite-internal-tab-content-block-padding:var(--calcite-tab-content-block-padding, 0.25rem);font-size:var(--calcite-font-size--2);line-height:1rem}.scale-m{--calcite-internal-tab-content-block-padding:var(--calcite-tab-content-block-padding, 0.5rem);font-size:var(--calcite-font-size--1);line-height:1rem}.scale-l{--calcite-internal-tab-content-block-padding:var(--calcite-tab-content-block-padding, 0.625rem);font-size:var(--calcite-font-size-0);line-height:1.25rem}section,.container{display:none;block-size:100%;inline-size:100%}.container{outline-color:transparent}.container:focus{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}:host([hidden]){display:none}[hidden]{display:none}`,ime=tme,nme=oi(class extends ai{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteInternalTabRegister=qe(this,"calciteInternalTabRegister",6),this.guid=`calcite-tab-title-${hl()}`,this.tab=void 0,this.selected=!1,this.scale="m",this.labeledBy=void 0}render(){const e=this.el.id||this.guid;return X(cn,{key:"34f25633afec73b771fba5a8d2c35e647dbc7abe","aria-labelledby":this.labeledBy,id:e},X("div",{key:"8ee7f4025cc393cfb3f4d53a6762a50017abbfe8",class:{[rC.container]:!0,[`scale-${this.scale}`]:!0},role:"tabpanel",tabIndex:this.selected?0:-1},X("section",{key:"eda53c19a48f0a96b52362a588292139f8526da4",class:rC.content},X("slot",{key:"c1da92b857f33df134cbaf5eeddc3f8fcda1f5dc"}))))}connectedCallback(){this.parentTabsEl=this.el.closest("calcite-tabs")}componentDidLoad(){this.calciteInternalTabRegister.emit()}disconnectedCallback(){var e;(e=document.body)==null||e.dispatchEvent(new CustomEvent("calciteTabUnregister",{detail:this.el}))}internalTabChangeHandler(e){e.composedPath().find(n=>n.tagName==="CALCITE-TABS")===this.parentTabsEl&&(this.tab?this.selected=this.tab===e.detail.tab:this.getTabIndex().then(n=>{this.selected=n===e.detail.tab}),e.stopPropagation())}async getTabIndex(){return Array.prototype.indexOf.call(Mj(this.el.parentElement.children).filter(e=>e.matches("calcite-tab")),this.el)}async updateAriaInfo(e=[],i=[]){this.labeledBy=i[e.indexOf(this.el.id)]||null}get el(){return this}static get style(){return ime}},[1,"calcite-tab",{tab:[513],selected:[1540],scale:[1],labeledBy:[32],getTabIndex:[64],updateAriaInfo:[64]},[[16,"calciteInternalTabChange","internalTabChangeHandler"]]]);function rme(){if(typeof customElements>"u")return;["calcite-tab"].forEach(e=>{switch(e){case"calcite-tab":customElements.get(e)||customElements.define(e,nme);break}})}rme();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */const sme={validationContainer:"validation-container"},a7=({scale:t,status:e,icon:i,message:n})=>X("div",{class:sme.validationContainer},X("calcite-input-message",{icon:i,scale:t,status:e},n));/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */const ome=["date","datetime-local","month","number","range","time","week"],ame=["email","password","search","tel","text","url"],lme=["email","password","search","tel","text","textarea","url"];function Ip(t,e,i,n){const s=i.toLowerCase(),h=t[i];n&&h!=null?e.setAttribute(s,`${h}`):e.removeAttribute(s)}function xG(t,e,i){i.type=t==="textarea"?"text":t;const n=ome.includes(t),s=e;Ip(s,i,"min",n),Ip(s,i,"max",n),Ip(s,i,"step",n);const h=lme.includes(t),f=e;Ip(f,i,"minLength",h),Ip(f,i,"maxLength",h);const m=ame.includes(t);Ip(f,i,"pattern",m)}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */const sC={valid:"check-circle",invalid:"exclamation-mark-triangle",idle:"information"},cme=":host{box-sizing:border-box;display:flex;block-size:auto;inline-size:100%;align-items:center;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1);opacity:1;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;--calcite-input-message-spacing-value:0.25rem;margin-block-start:var(--calcite-input-message-spacing-value)}.calcite-input-message-icon{pointer-events:none;display:inline-flex;flex-shrink:0;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;margin-inline-end:0.5rem}:host([status=invalid]) .calcite-input-message-icon{color:var(--calcite-color-status-danger)}:host([status=warning]) .calcite-input-message-icon{color:var(--calcite-color-status-warning)}:host([status=valid]) .calcite-input-message-icon{color:var(--calcite-color-status-success)}:host([status=idle]) .calcite-input-message-icon{color:var(--calcite-color-brand)}:host([scale=s]){font-size:var(--calcite-font-size--3);line-height:0.75rem}:host([scale=m]){font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=l]){font-size:var(--calcite-font-size--1);line-height:1rem}:host([hidden]){display:none}[hidden]{display:none}",hme=cme,ume=oi(class extends ai{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.icon=void 0,this.iconFlipRtl=!1,this.scale="m",this.status="idle"}handleIconEl(){this.requestedIcon=sm(sC,this.icon,this.status)}connectedCallback(){this.requestedIcon=sm(sC,this.icon,this.status)}render(){const e=this.el.hidden;return X(cn,{key:"d25eda9bcff16d0d71d1373e87b27fd39df842f1","calcite-hydrated-hidden":e},this.renderIcon(this.requestedIcon),X("slot",{key:"aa5c6414007081f521e9354118aeb1365aa04c88"}))}renderIcon(e){if(e)return X("calcite-icon",{class:"calcite-input-message-icon",flipRtl:this.iconFlipRtl,icon:e,scale:"s"})}get el(){return this}static get watchers(){return{status:["handleIconEl"],icon:["handleIconEl"]}}static get style(){return hme}},[1,"calcite-input-message",{icon:[520],iconFlipRtl:[516,"icon-flip-rtl"],scale:[513],status:[513]},void 0,{status:["handleIconEl"],icon:["handleIconEl"]}]);function _3(){if(typeof customElements>"u")return;["calcite-input-message","calcite-icon"].forEach(e=>{switch(e){case"calcite-input-message":customElements.get(e)||customElements.define(e,ume);break;case"calcite-icon":customElements.get(e)||Mr();break}})}_3();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */var dme="Expected a function";function pme(t,e,i){var n=!0,s=!0;if(typeof t!="function")throw new TypeError(dme);return Z2(i)&&(n="leading"in i?!!i.leading:n,s="trailing"in i?!!i.trailing:s),iG(t,e,{leading:n,maxWait:e,trailing:s})}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */const Ir={assistiveText:"assistive-text",characterLimit:"character-limit",content:"content",container:"container",footer:"footer",resizeDisabled:"resize--disabled",resizeDisabledX:"resize--disabled-x",resizeDisabledY:"resize--disabled-y",characterOverLimit:"character--over-limit",readOnly:"readonly",textAreaInvalid:"text-area--invalid",footerSlotted:"footer--slotted",borderColor:"border--color",hide:"hide",blockSizeFull:"block-size--full",footerEndSlotOnly:"footer--end-only"},oC={footerStart:"footer-start",footerEnd:"footer-end"},fme=100,gme=`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{position:relative;display:inline-block;block-size:100%;inline-size:100%}textarea{position:relative;margin:0px;box-sizing:border-box;display:block;inline-size:100%;border-width:1px;border-color:var(--calcite-color-border-input);background-color:var(--calcite-color-foreground-1);font-family:var(--calcite-font-family);color:var(--calcite-color-text-1);min-inline-size:12rem;border-block-end:1px solid var(--calcite-color-border-3)}@media screen and (max-width: 480px){textarea{resize:none}}textarea:focus{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}textarea.text-area--invalid{border-width:1px;border-block-end-width:1px;border-style:solid;border-color:var(--calcite-color-status-danger)}textarea.text-area--invalid:focus{outline:2px solid var(--calcite-color-status-danger);outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}textarea.footer--slotted{min-inline-size:18rem}.footer{box-sizing:border-box;display:flex;align-items:center;border-width:1px;border-block-start-width:0px;border-style:solid;border-color:var(--calcite-color-border-input);background-color:var(--calcite-color-foreground-1)}.character-limit{display:flex;align-items:center;justify-content:flex-end;white-space:nowrap;font-weight:var(--calcite-font-weight-normal);color:var(--calcite-color-text-2)}.character--over-limit{font-weight:var(--calcite-font-weight-bold);color:var(--calcite-color-status-danger)}:host([resize=none]) textarea{resize:none}:host([resize=horizontal]) textarea{resize:horizontal}:host([resize=vertical]) textarea{resize:vertical}:host([scale=s]){font-size:var(--calcite-font-size--2)}:host([scale=s]) .footer{padding-block:0.25rem;padding-inline:0.5rem;min-block-size:1.75rem}:host([scale=s]) textarea{padding-block:0.25rem;padding-inline:0.5rem}:host([scale=s]) textarea,:host([scale=s]) .footer,:host([scale=s]) .character-limit{padding-inline-start:0.5rem;font-size:var(--calcite-font-size--2)}:host([scale=m]) textarea{padding-block:0.5rem;padding-inline:0.75rem}:host([scale=m]) .footer{padding-block:0.5rem;padding-inline:0.75rem;min-block-size:2.25rem}:host([scale=m]) textarea,:host([scale=m]) .footer,:host([scale=m]) .character-limit{padding-inline-start:0.75rem;font-size:var(--calcite-font-size--1)}:host([scale=l]){font-size:var(--calcite-font-size-0)}:host([scale=l]) textarea{padding-block:0.75rem;padding-inline:1rem}:host([scale=l]) .footer{padding-block:0.75rem;padding-inline:1rem;min-block-size:2.75rem}:host([scale=l]) textarea,:host([scale=l]) .footer,:host([scale=l]) .character-limit{padding-inline-start:1rem;font-size:var(--calcite-font-size-0)}:host([status=invalid]) textarea{border-color:var(--calcite-color-status-danger)}:host([status=invalid]) textarea:focus{outline:2px solid var(--calcite-color-status-danger);outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}.readonly{background-color:var(--calcite-color-background);font-weight:var(--calcite-font-weight-medium)}.border--color{border-block-end-width:1px;border-color:var(--calcite-color-border-input)}.border--color:focus{border-block-end-width:2px}textarea.block-size--full{block-size:100%}.content,.hide{display:none}.container{display:flex;inline-size:100%;justify-content:space-between}.footer--end-only{justify-content:flex-end}.assistive-text{position:absolute;inline-size:1px;block-size:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}.validation-container{display:flex;flex-direction:column;align-items:flex-start;align-self:stretch}:host([scale=m]) .validation-container,:host([scale=l]) .validation-container{padding-block-start:0.5rem}:host([scale=s]) .validation-container{padding-block-start:0.25rem}::slotted(input[slot=hidden-form-input]){margin:0 !important;opacity:0 !important;outline:none !important;padding:0 !important;position:absolute !important;inset:0 !important;transform:none !important;-webkit-appearance:none !important;z-index:-1 !important}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([hidden]){display:none}[hidden]{display:none}`,mme=gme,yme=oi(class extends ai{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteTextAreaInput=qe(this,"calciteTextAreaInput",7),this.calciteTextAreaChange=qe(this,"calciteTextAreaChange",7),this.guid=hl(),this.handleInput=e=>{this.value=e.target.value,this.calciteTextAreaInput.emit()},this.handleChange=()=>{this.calciteTextAreaChange.emit()},this.contentSlotChangeHandler=()=>{this.value||this.el.childNodes.forEach(i=>{i.nodeName==="#text"&&(this.value=i.nodeValue.trim())})},this.renderCharacterLimit=()=>this.maxLength?(this.localizedCharacterLengthObj=this.getLocalizedCharacterLength(),X("span",{class:Ir.characterLimit},X("span",{class:{[Ir.characterOverLimit]:this.isCharacterLimitExceeded()}},this.localizedCharacterLengthObj.currentLength),"/",this.localizedCharacterLengthObj.maxLength)):null,this.resizeObserver=Wi("resize",async()=>{await X4(this);const{textAreaHeight:e,textAreaWidth:i,elHeight:n,elWidth:s,footerHeight:h,footerWidth:f}=this.getHeightAndWidthOfElements();f>0&&f!==i&&(this.footerEl.style.width=`${i}px`),(s!==i||n!==e+(h||0))&&this.setHeightAndWidthToAuto()}),this.setTextAreaEl=e=>{this.textAreaEl=e,this.resizeObserver.observe(e)},this.setHeightAndWidthToAuto=pme(()=>{(this.resize==="vertical"||this.resize==="both")&&(this.el.style.height="auto"),(this.resize==="horizontal"||this.resize==="both")&&(this.el.style.width="auto")},fme,{leading:!1}),this.columns=void 0,this.disabled=!1,this.form=void 0,this.groupSeparator=!1,this.label=void 0,this.minLength=void 0,this.maxLength=void 0,this.messages=void 0,this.validationMessage=void 0,this.validationIcon=void 0,this.validity={valid:!1,badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1},this.name=void 0,this.numberingSystem=void 0,this.placeholder=void 0,this.readOnly=!1,this.required=!1,this.resize="both",this.rows=void 0,this.scale="m",this.status="idle",this.value="",this.wrap="soft",this.messageOverrides=void 0,this.defaultMessages=void 0,this.endSlotHasElements=void 0,this.startSlotHasElements=void 0,this.effectiveLocale=""}handleGlobalAttributesChanged(){pu(this)}onMessagesChange(){}connectedCallback(){$c(this),C0(this),JT(this),po(this),yo(this)}async componentWillLoad(){co(this),await go(this)}componentDidLoad(){ho(this)}componentDidRender(){ul(this),this.setTextAreaHeight()}disconnectedCallback(){var e;Cc(this),m3(this),KT(this),fo(this),vo(this),(e=this.resizeObserver)==null||e.disconnect()}render(){const e=this.startSlotHasElements||this.endSlotHasElements||!!this.maxLength;return X(cn,{key:"1cf8d8932cfc34863ec4f6954c05cab29be79e0a"},X(dl,{key:"562df527b0a00e33a3f72c5dd1a5b921e4db48c4",disabled:this.disabled},X("textarea",{key:"4044f82c8d7d86a83e2451350d7bb7d7f330485f","aria-describedby":this.guid,"aria-invalid":bn(this.isCharacterLimitExceeded()),"aria-label":am(this),autofocus:this.el.autofocus,class:{[Ir.readOnly]:this.readOnly,[Ir.textAreaInvalid]:this.isCharacterLimitExceeded(),[Ir.footerSlotted]:this.endSlotHasElements&&this.startSlotHasElements,[Ir.blockSizeFull]:!e,[Ir.borderColor]:!e},cols:this.columns,disabled:this.disabled,name:this.name,onChange:this.handleChange,onInput:this.handleInput,placeholder:this.placeholder,readOnly:this.readOnly,ref:this.setTextAreaEl,required:this.required,rows:this.rows,value:this.value,wrap:this.wrap}),X("span",{key:"e23a55600d68239c78fc2fb98f289195f1d6a797",class:{[Ir.content]:!0}},X("slot",{key:"4ea0a5fe04210574843207e899d0ce16a1bb4c48",onSlotchange:this.contentSlotChangeHandler})),X("footer",{key:"07072a422762ca26f0f30b8497503edb8d77e8bc",class:{[Ir.footer]:!0,[Ir.readOnly]:this.readOnly,[Ir.hide]:!e},ref:i=>this.footerEl=i},X("div",{key:"95c690b9ec35ebdd9ca008ac4213d49d57788e96",class:{[Ir.container]:!0,[Ir.footerEndSlotOnly]:!this.startSlotHasElements&&this.endSlotHasElements}},X("slot",{key:"65dbd9cef4d617c8bd9a6bbd610091f505188b0f",name:oC.footerStart,onSlotchange:i=>this.startSlotHasElements=Di(i)}),X("slot",{key:"8e05f35c0c130fcde292c98f35b584dbc189f840",name:oC.footerEnd,onSlotchange:i=>this.endSlotHasElements=Di(i)})),this.renderCharacterLimit()),X(YT,{key:"7e0b7f5c82fab77065d8f8ce2d3f6dc877515602",component:this}),this.isCharacterLimitExceeded()&&X("span",{key:"4ed6485bc07b81aa5ce3e865c54fda74a054d691","aria-hidden":!0,"aria-live":"polite",class:Ir.assistiveText,id:this.guid},this.replacePlaceHoldersInMessages()),this.validationMessage&&this.status==="invalid"?X(a7,{icon:this.validationIcon,message:this.validationMessage,scale:this.scale,status:this.status}):null))}async setFocus(){await uo(this),this.textAreaEl.focus()}async selectText(){await X4(this),this.textAreaEl.select()}effectiveLocaleChange(){mo(this,this.effectiveLocale)}onLabelClick(){this.setFocus()}getLocalizedCharacterLength(){const e=this.value?this.value.length.toString():"0",i=this.maxLength.toString();return this.numberingSystem==="latn"?{currentLength:e,maxLength:i}:(ps.numberFormatOptions={locale:this.effectiveLocale,numberingSystem:this.numberingSystem,signDisplay:"never",useGrouping:this.groupSeparator},{currentLength:ps.localize(e),maxLength:ps.localize(i)})}syncHiddenFormInput(e){e.setCustomValidity(""),this.isCharacterLimitExceeded()&&e.setCustomValidity(this.replacePlaceHoldersInMessages()),xG("textarea",this,e)}setTextAreaHeight(){const{textAreaHeight:e,elHeight:i,footerHeight:n}=this.getHeightAndWidthOfElements();n>0&&e+n!=i&&(this.textAreaEl.style.height=`${i-n}px`)}getHeightAndWidthOfElements(){const{height:e,width:i}=this.textAreaEl.getBoundingClientRect(),{height:n,width:s}=this.el.getBoundingClientRect(),{height:h,width:f}=this.footerEl.getBoundingClientRect();return{textAreaHeight:e,textAreaWidth:i,elHeight:n,elWidth:s,footerHeight:h,footerWidth:f}}replacePlaceHoldersInMessages(){return this.messages.tooLong.replace("{maxLength}",this.localizedCharacterLengthObj.maxLength).replace("{currentLength}",this.localizedCharacterLengthObj.currentLength)}isCharacterLimitExceeded(){var e;return((e=this.value)==null?void 0:e.length)>this.maxLength}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{autofocus:["handleGlobalAttributesChanged"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return mme}},[1,"calcite-text-area",{columns:[514],disabled:[516],form:[513],groupSeparator:[516,"group-separator"],label:[1],minLength:[514,"min-length"],maxLength:[514,"max-length"],messages:[1040],validationMessage:[1,"validation-message"],validationIcon:[520,"validation-icon"],validity:[1040],name:[513],numberingSystem:[1,"numbering-system"],placeholder:[1],readOnly:[516,"read-only"],required:[516],resize:[513],rows:[514],scale:[513],status:[513],value:[1025],wrap:[513],messageOverrides:[1040],defaultMessages:[32],endSlotHasElements:[32],startSlotHasElements:[32],effectiveLocale:[32],setFocus:[64],selectText:[64]},void 0,{autofocus:["handleGlobalAttributesChanged"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function vme(){if(typeof customElements>"u")return;["calcite-text-area","calcite-icon","calcite-input-message"].forEach(e=>{switch(e){case"calcite-text-area":customElements.get(e)||customElements.define(e,yme);break;case"calcite-icon":customElements.get(e)||Mr();break;case"calcite-input-message":customElements.get(e)||_3();break}})}vme();function bme(t){let e,i,n,s,h,f,m,v,x,M,$,I,P,L,z,F,U,W,K,J,te,ie,le,de,xe,we,ve,se,ce,ue,Ae,je,Ge,He,mt,jt,ki,or,pi,wi,wo,Is,_o,fl,la,up,xo,Ac,ar,Oc,dp,Pc,$i,B,hn,Er,Qe,li,Dn,kr,$r;return{c(){e=Ze("div"),i=Ze("h3"),i.textContent="Map",n=Xi(),s=Ze("calcite-label"),h=ja(`Zoom level
    `),f=Ze("calcite-input"),m=Ze("div"),v=Ze("calcite-button"),M=Xi(),$=Ze("calcite-tooltip"),$.textContent="Copy zoom level",I=Xi(),P=Ze("calcite-label"),L=ja(`Scale
    `),z=Ze("calcite-input"),F=Ze("div"),U=Ze("calcite-button"),K=Xi(),J=Ze("calcite-tooltip"),J.textContent="Copy scale",te=Xi(),ie=Ze("h3"),ie.textContent="Extent",le=Xi(),de=Ze("calcite-tabs"),xe=Ze("calcite-tab-nav"),xe.innerHTML='<calcite-tab-title selected="">WGS84 (4326)</calcite-tab-title> <calcite-tab-title>WebMercator (102100)</calcite-tab-title>',we=Xi(),ve=Ze("calcite-tab"),se=Ze("calcite-label"),ce=ja(`Center
        `),ue=Ze("calcite-input"),Ae=Ze("div"),je=Ze("calcite-button"),He=Xi(),mt=Ze("calcite-tooltip"),mt.textContent="Copy WGS center point",jt=Xi(),ki=Ze("calcite-label"),or=ja(`Extent
        `),pi=Ze("calcite-text-area"),wi=Ze("calcite-button"),wi.innerHTML="",wo=Xi(),Is=Ze("calcite-tooltip"),Is.textContent="Copy scale",_o=Xi(),fl=Ze("calcite-tab"),la=Ze("calcite-label"),up=ja(`Center
        `),xo=Ze("calcite-input"),Ac=Ze("div"),ar=Ze("calcite-button"),dp=Xi(),Pc=Ze("calcite-tooltip"),Pc.textContent="Copy WGS84 center point",$i=Xi(),B=Ze("calcite-label"),hn=ja(`Extent
        `),Er=Ze("calcite-text-area"),Qe=Ze("calcite-button"),Qe.innerHTML="",li=Xi(),Dn=Ze("calcite-tooltip"),Dn.textContent="Copy Web Mercator extent",Ie(v,"data-copy-id","zoomInput"),Ie(v,"data-copy-msg","Zoom level"),Ie(v,"id","zoomBtn"),Ie(v,"icon-start","copy-to-clipboard"),Ie(v,"role","button"),Ie(v,"tabindex","0"),jr(m,"slot","action"),Ie(f,"id","zoomInput"),Ie(f,"read-only",""),Ie(f,"value",x=t[0].zoom||0),Ie($,"reference-element","zoomBtn"),Ie(U,"id","scaleBtn"),Ie(U,"data-copy-id","scaleInput"),Ie(U,"data-copy-msg","Scale level"),Ie(U,"icon-start","copy-to-clipboard"),Ie(U,"role","button"),Ie(U,"tabindex","0"),jr(F,"slot","action"),Ie(z,"id","scaleInput"),Ie(z,"read-only",""),Ie(z,"value",W=t[0].scale||0),Ie(J,"reference-element","scaleBtn"),Ie(xe,"slot","title-group"),Ie(je,"role","button"),Ie(je,"tabindex","0"),Ie(je,"data-copy-id","wgsCenterCntrl"),Ie(je,"data-copy-msg","WGS84 center point"),Ie(je,"id","wgsCenterBtn"),Ie(je,"icon-start","copy-to-clipboard"),jr(Ae,"slot","action"),Ie(ue,"id","wgsCenterCntrl"),Ie(ue,"value",Ge=`${t[1]}`),Ie(ue,"read-only",""),Ie(mt,"reference-element","wgsCenterBtn"),Ie(wi,"role","button"),Ie(wi,"tabindex","0"),Ie(wi,"data-copy-id","wgsExtentCntrl"),Ie(wi,"data-copy-msg","WGS84 extent"),Ie(wi,"id","wgsExtentBtn"),Ie(wi,"slot","footer-end"),Ie(wi,"icon-start","copy-to-clipboard"),Ie(pi,"id","wgsExtentCntrl"),Ie(pi,"name","wgsExtentCntrl"),Ie(pi,"rows","10"),Ie(pi,"read-only",""),Ie(pi,"value",t[2]),Ie(Is,"reference-element","wgsExtentBtn"),Ie(ve,"selected",""),Ie(ar,"role","button"),Ie(ar,"tabindex","0"),Ie(ar,"data-copy-id","wmCenterCntrl"),Ie(ar,"data-copy-msg","Web mercator center point"),Ie(ar,"id","copyCenterBtn"),Ie(ar,"icon-start","copy-to-clipboard"),jr(Ac,"slot","action"),Ie(xo,"id","wmCenterCntrl"),Ie(xo,"read-only",""),Ie(xo,"value",Oc=`${t[0].center.x.toFixed(4)}, ${t[0].center.y.toFixed(4)}`),Ie(Pc,"reference-element","copyCenterBtn"),Ie(Qe,"role","button"),Ie(Qe,"tabindex","0"),Ie(Qe,"data-copy-id","wmExtentCntrl"),Ie(Qe,"data-copy-msg","Web mercator extent"),Ie(Qe,"id","wmExtentBtn"),Ie(Qe,"slot","footer-end"),Ie(Qe,"icon-start","copy-to-clipboard"),Ie(Er,"id","wmExtentCntrl"),Ie(Er,"name","wmExtentCntrl"),Ie(Er,"rows","10"),Ie(Er,"read-only",""),Ie(Er,"value",t[3]),Ie(Dn,"reference-element","wmExtentBtn"),Ie(de,"bordered",""),Ie(de,"layout","center"),jr(e,"class","cntrl-container")},m(Pi,Zi){ou(Pi,e,Zi),Ne(e,i),Ne(e,n),Ne(e,s),Ne(s,h),Ne(s,f),Ne(f,m),Ne(m,v),Ne(s,M),Ne(s,$),Ne(e,I),Ne(e,P),Ne(P,L),Ne(P,z),Ne(z,F),Ne(F,U),Ne(P,K),Ne(P,J),Ne(e,te),Ne(e,ie),Ne(e,le),Ne(e,de),Ne(de,xe),Ne(de,we),Ne(de,ve),Ne(ve,se),Ne(se,ce),Ne(se,ue),Ne(ue,Ae),Ne(Ae,je),Ne(se,He),Ne(se,mt),Ne(ve,jt),Ne(ve,ki),Ne(ki,or),Ne(ki,pi),Ne(pi,wi),Ne(ki,wo),Ne(ki,Is),Ne(de,_o),Ne(de,fl),Ne(fl,la),Ne(la,up),Ne(la,xo),Ne(xo,Ac),Ne(Ac,ar),Ne(la,dp),Ne(la,Pc),Ne(fl,$i),Ne(fl,B),Ne(B,hn),Ne(B,Er),Ne(Er,Qe),Ne(B,li),Ne(B,Dn),kr||($r=[Wn(v,"click",t[4]),Wn(v,"keyup",t[5]),Wn(U,"click",t[4]),Wn(U,"keyup",t[6]),Wn(je,"click",t[4]),Wn(je,"keyup",t[7]),Wn(wi,"click",t[4]),Wn(wi,"keyup",t[8]),Wn(ar,"click",t[4]),Wn(ar,"keyup",t[9]),Wn(Qe,"click",t[4]),Wn(Qe,"keyup",t[10])],kr=!0)},p(Pi,[Zi]){Zi&1&&x!==(x=Pi[0].zoom||0)&&Ie(f,"value",x),Zi&1&&W!==(W=Pi[0].scale||0)&&Ie(z,"value",W),Zi&2&&Ge!==(Ge=`${Pi[1]}`)&&Ie(ue,"value",Ge),Zi&4&&Ie(pi,"value",Pi[2]),Zi&1&&Oc!==(Oc=`${Pi[0].center.x.toFixed(4)}, ${Pi[0].center.y.toFixed(4)}`)&&Ie(xo,"value",Oc),Zi&8&&Ie(Er,"value",Pi[3])},i:on,o:on,d(Pi){Pi&&xc(e),kr=!1,_c($r)}}}function wme(t,e,i){let n,s,h,f;gd(t,Ka,z=>i(0,n=z)),gd(t,hZ,z=>i(1,s=z)),gd(t,dZ,z=>i(2,h=z)),gd(t,uZ,z=>i(3,f=z));const m=DI();return[n,s,h,f,z=>{const F=document.getElementById(z.target.dataset.copyId);navigator.clipboard.writeText(F.value).then(()=>{m("copy",{label:z.target.dataset.copyMsg,value:F.value,type:"success"})},U=>{console.log("error copying to cp")})},()=>{console.log("zoom keyup")},()=>{console.log("scale keyup")},()=>{console.log("center keyup")},()=>{console.log("extent keyup")},()=>{console.log("center keyup")},()=>{console.log("extent keyup")}]}class _me extends p0{constructor(e){super(),d0(this,e,wme,bme,Yd,{})}}function xme(t,e){return{type:zd(e),value:t,unit:e}}function g8e(t){return{value:t}}function A0(t,e){return{type:zd(e),value:t,unit:e}}function Sme(t,e){return{type:zd(e),value:t,unit:e}}function oo(t,e,i="arithmetic"){return{type:zd(e),value:t,unit:e,rotationType:i}}function m8e(t,e){const i=lp(t,e);return t.type==="angle"?oo(i,e,t.rotationType):xme(i,e)}function lp(t,e){return ii(t.value,t.unit,e)}function y8e(t,e){return t==null?e:e==null||t.value>ii(e.value,e.unit,t.unit)?t:e}function v8e(t,e){return t==null?null:{...t,value:t.value*e}}function l7(t,e,i){if(e===i)return t;switch(i){case"arithmetic":case"geographic":return 90-t}}const b8e=A0(0,"meters"),w8e=Sme(0,"square-meters");oo(0,"radians");const _8e=oo(0,"degrees"),x8e=oo(0,"degrees","geographic");function SG(t,e,i,n){if(ks(t.spatialReference,i)){Ky[0]=t.x,Ky[1]=t.y;const h=t.z;return Ky[2]=h??n??0,S0(Ky,t.spatialReference,0,e,i,0,1)}const s=Zf(t,i);return!!s&&(e[0]=s==null?void 0:s.x,e[1]=s==null?void 0:s.y,e[2]=(s==null?void 0:s.z)??n??0,!0)}async function S8e(t,e,i,n,s){return await Dw(t.spatialReference,i,null,s),SG(t,e,i,n)}const Ky=Se();function pl(t,e,i,n){return{x:t,y:e,z:i,hasZ:i!=null,hasM:!1,spatialReference:n,type:"point"}}function TG(t,e,i,n,s){t.x=e,t.y=i,t.z=n,t.hasZ=n!=null,t.spatialReference=s}function su(t,e,i,n,s){return!(e==null||n==null||t.length<2)&&(s1.x=t[0],s1.y=t[1],s1.z=t[2],s1.spatialReference=e,SG(s1,i,n,s))}const s1=pl(0,0,0,tt.WGS84);function MG(t){if(!t)return null;if(au(t)&&t.wkid){const i=oQ[t.wkid];if(i)return i}const e=t.wkt2||t.wkt;if(e){const i=Tme(e);if(i)return i}return null}function Tme(t){const e=rQ.exec(t);if(!e||e.length!==2)return null;const i=e[1].split(",");if(!i||i.length<3)return null;const n=parseFloat(i[1]),s=parseFloat(i[2]);return isNaN(n)||isNaN(s)?null:{a:n,f:s===0?0:1/s}}function x3(t){const e=MG(t);if(Mme(e))return e;const i=e.a*(1-e.f);return Object.assign(e,{b:i,eSq:1-(i/e.a)**2,radius:(2*e.a+i)/3,densificationRatio:1e4/((2*e.a+i)/3)})}function Mme(t){return t!=null&&"b"in t&&"eSq"in t&&"radius"in t}function Yy(t,e,i){const{a:n,eSq:s}=x3(i),h=Math.sqrt(s),f=Math.sin(e[1]*gr),m=n*e[0]*gr;let v;return s>0?v=n*((1-s)*(f/(1-s*(f*f))-1/(2*h)*Math.log((1-h*f)/(1+h*f))))*.5:v=n*f,t[0]=m,t[1]=v,t}function O0(t){return MG(t)!==null}function T8e(t,e="square-meters"){if(t.some(f=>!O0(f.spatialReference)))throw new fe("geodesic-areas:invalid-spatial-reference","the input geometries spatial reference is not supported");const i=[];for(let f=0;f<t.length;f++){const m=t[f],v=m.spatialReference,{radius:x,densificationRatio:M}=x3(v),$=x*M;i.push(kme(m,$))}const n=[],s=[0,0],h=[0,0];for(let f=0;f<i.length;f++){const{rings:m,spatialReference:v}=i[f];let x=0;for(let M=0;M<m.length;M++){const $=m[M];Yy(s,$[0],v),Yy(h,$[$.length-1],v);let I=h[0]*s[1]-s[0]*h[1];for(let P=0;P<$.length-1;P++)Yy(s,$[P+1],v),Yy(h,$[P],v),I+=h[0]*s[1]-s[0]*h[1];x+=I}x=ii(x,"square-meters",e),n.push(x/-2)}return n}function Eme(t,e="meters"){if(!t)throw new fe("geodesic-lengths:invalid-geometries","the input geometries type is not supported");if(t.some(n=>!O0(n.spatialReference)))throw new fe("geodesic-lengths:invalid-spatial-reference","the input geometries spatial reference is not supported");const i=[];for(let n=0;n<t.length;n++){const s=t[n],{spatialReference:h}=s,f=s.type==="polyline"?s.paths:s.rings;let m=0;for(let v=0;v<f.length;v++){const x=f[v];let M=0;for(let $=1;$<x.length;$++){const I=x[$-1][0],P=x[$][0],L=x[$-1][1],z=x[$][1];if(L!==z||I!==P){const F=new P0;R0(F,[I,L],[P,z],h),M+=F.distance}}m+=M}m=ii(m,"meters",e),i.push(m)}return i}function kme(t,e){if(t.type!=="polyline"&&t.type!=="polygon")throw new fe("geodesic-densify:invalid-geometry","the input geometry is neither polyline nor polygon");const{spatialReference:i}=t;if(!O0(i))throw new fe("geodesic-densify:invalid-spatial-reference","the input geometry spatial reference is not supported");const n=t.type==="polyline"?t.paths:t.rings,s=[],h=[0,0],f=new P0;for(const m of n){const v=[];s.push(v),v.push([m[0][0],m[0][1]]);let x,M,$=m[0][0],I=m[0][1];for(let P=0;P<m.length-1;P++){if(x=m[P+1][0],M=m[P+1][1],$===x&&I===M)continue;const L=[$,I];R0(f,[$,I],[x,M],i);const{azimuth:z,distance:F}=f,U=F/e;if(U>1){for(let W=1;W<=U-1;W++)Gh(h,L,z,W*e,i),v.push(h.slice(0));Gh(h,L,z,(F+Math.floor(U-1)*e)/2,i),v.push(h.slice(0))}Gh(h,L,z,F,i),v.push(h.slice(0)),$=h[0],I=h[1]}}return t.type==="polyline"?new br({paths:s,spatialReference:i}):new En({rings:s,spatialReference:i})}let P0=class{constructor(e=0,i=void 0,n=void 0){this.distance=e,this.azimuth=i,this.reverseAzimuth=n}};function Gh(t,e,i,n,s){const h=e[0],f=e[1],m=h*gr,v=f*gr,x=(i??0)*gr,{a:M,b:$,f:I}=x3(s),P=Math.sin(x),L=Math.cos(x),z=(1-I)*Math.tan(v),F=1/Math.sqrt(1+z*z),U=z*F,W=Math.atan2(z,L),K=F*P,J=K*K,te=1-J,ie=te*(M*M-$*$)/($*$),le=1+ie/16384*(4096+ie*(ie*(320-175*ie)-768)),de=ie/1024*(256+ie*(ie*(74-47*ie)-128));let xe,we,ve,se,ce=n/($*le),ue=2*Math.PI;for(;Math.abs(ce-ue)>1e-12;)ve=Math.cos(2*W+ce),xe=Math.sin(ce),we=Math.cos(ce),se=de*xe*(ve+de/4*(we*(2*ve*ve-1)-de/6*ve*(4*xe*xe-3)*(4*ve*ve-3))),ue=ce,ce=n/($*le)+se;const Ae=U*xe-F*we*L,je=Math.atan2(U*we+F*xe*L,(1-I)*Math.sqrt(J+Ae*Ae)),Ge=Math.atan2(xe*P,F*we-U*xe*L),He=I/16*te*(4+I*(4-3*te)),mt=je/gr,jt=(m+(Ge-(1-He)*I*K*(ce+He*xe*(ve+He*we*(2*ve*ve-1)))))/gr;return t[0]=jt,t[1]=mt,t}function R0(t,e,i,n){const s=e[0]*gr,h=e[1]*gr,f=i[0]*gr,m=i[1]*gr,{a:v,b:x,f:M,radius:$}=x3(n),I=f-s,P=Math.atan((1-M)*Math.tan(h)),L=Math.atan((1-M)*Math.tan(m)),z=Math.sin(P),F=Math.cos(P),U=Math.sin(L),W=Math.cos(L);let K,J,te,ie,le,de,xe,we,ve,se,ce=1e3,ue=I;do{if(xe=Math.sin(ue),we=Math.cos(ue),te=Math.sqrt(W*xe*(W*xe)+(F*U-z*W*we)*(F*U-z*W*we)),te===0)return t.distance=0,t.azimuth=void 0,t.reverseAzimuth=void 0,t;le=z*U+F*W*we,de=Math.atan2(te,le),ve=F*W*xe/te,J=1-ve*ve,ie=le-2*z*U/J,isNaN(ie)&&(ie=0),se=M/16*J*(4+M*(4-3*J)),K=ue,ue=I+(1-se)*M*ve*(de+se*te*(ie+se*le*(2*ie*ie-1)))}while(Math.abs(ue-K)>1e-12&&--ce>0);if(ce===0){const jt=$,ki=Math.acos(Math.sin(h)*Math.sin(m)+Math.cos(h)*Math.cos(m)*Math.cos(f-s))*jt,or=f-s,pi=Math.sin(or)*Math.cos(m),wi=Math.cos(h)*Math.sin(m)-Math.sin(h)*Math.cos(m)*Math.cos(or),wo=Math.atan2(pi,wi);return t.azimuth=wo/gr,t.distance=ki,t.reverseAzimuth=void 0,t}const Ae=J*(v*v-x*x)/(x*x),je=Ae/1024*(256+Ae*(Ae*(74-47*Ae)-128)),Ge=x*(1+Ae/16384*(4096+Ae*(Ae*(320-175*Ae)-768)))*(de-je*te*(ie+je/4*(le*(2*ie*ie-1)-je/6*ie*(4*te*te-3)*(4*ie*ie-3)))),He=Math.atan2(W*Math.sin(ue),F*U-z*W*Math.cos(ue)),mt=Math.atan2(F*Math.sin(ue),F*U*Math.cos(ue)-z*W);return t.azimuth=He/gr,t.distance=Ge,t.reverseAzimuth=mt/gr,t}function ew(t){return O0(t)?t:Ms(t)?tt.WGS84:null}var tn;function c7(t,e){if(t==null||e==null)return;const i=t6(t,e);return i!=null?oo(i,"radians","geographic"):void 0}(function(t){t.Absolute="absolute",t.Relative="relative",t.RelativeBilateral="relative-bilateral"})(tn||(tn={}));const t6=(()=>{const t=Se(),e=Se();return(i,n)=>(si(t,i.x,i.y,i.z??0),si(e,n.x,n.y,n.z??0),dm(t,e,i.spatialReference,n.spatialReference))})(),dm=(()=>{const t=nt(),e=Se(),i=Se();return(n,s,h,f)=>{if(Wt(n,s))return;const m=ew(h),v=ew(f);if(m&&v&&bi(m,v)&&su(n,h,e,m)&&su(s,f,i,v)){const{azimuth:M}=R0(Cme,e,i,m);return M!=null?ii(M,"degrees","radians"):void 0}t[0]=s[0]-n[0],t[1]=s[1]-n[1];let x=YD(UD,t);return t[0]<0&&(x=Ime-x),x}})();function E8e(t,e,i,n=tn.Absolute){if(e&&i)switch(n){case tn.Absolute:return c7(e,i);case tn.Relative:return lC(aC(t,e,i),tn.Relative);case tn.RelativeBilateral:return lC(aC(t,e,i),tn.RelativeBilateral)}}function aC(t,e,i){if(!t||!e||!i)return;const n=t6(t,e),s=t6(e,i);return n!=null&&s!=null?oo(s-n,"radians","geographic"):void 0}function lC(t,e){if(t!=null)switch(e){case tn.Absolute:return $me(t);case tn.Relative:{const i=rl(t);let n=cC.normalize(i,0,!0);return n===-180&&(n=180),oo(n,"degrees","geographic")}case tn.RelativeBilateral:{const i=rl(t),n=Math.abs(cC.normalize(i,0,!0));return oo(n,"degrees","geographic")}}}function $me(t){const e=rl(t),i=Ame.normalize(e,0,!0);return oo(i,"degrees","geographic")}const h7=(()=>{const t=Se();return(e,i,n,s,h,f="geodesic")=>{Yn(t,i);const m=rl(h);if(f==="geodesic"){const P=ew(n);if(P&&su(t,n,t,P))return Gh(e,t,m,s,P),e[2]=i[2],!!su(e,P,e,n)}const v=l7(m,"geographic","arithmetic"),x=ii(v,"degrees","radians"),M=i[0]+s*Math.cos(x),$=i[1]+s*Math.sin(x),I=i[2];return si(e,M,$,I),!0}})();function rl(t){if(t!=null)return l7(EG(t),t.rotationType,"geographic")}function k8e(t){if(t!=null)return l7(EG(t),t.rotationType,"arithmetic")}function EG(t){return ii(t.value,t.unit,"degrees")}const Cme=new P0,Ime=2*Math.PI,Ame=JO,cC=new Ew(-180,180);let af=class extends Re{constructor(e){super(e),this.directionMode="relative",this.relativeDirectionIsBilateral=!1}get effectiveDirectionMode(){switch(this.directionMode){case"relative":return this.relativeDirectionIsBilateral?tn.RelativeBilateral:tn.Relative;case"absolute":return tn.Absolute}}};_([T({type:String,nonNullable:!0})],af.prototype,"directionMode",void 0),_([T({type:Boolean,nonNullable:!0})],af.prototype,"relativeDirectionIsBilateral",void 0),_([T()],af.prototype,"effectiveDirectionMode",null),af=_([Y("esri.views.interactive.sketch.SketchValueOptions")],af);const S3=af;var hC,uC,kG={exports:{}};uC=function(){function t(s,h){function f(){this.constructor=s}f.prototype=h.prototype,s.prototype=new f}function e(s,h,f,m){var v=Error.call(this,s);return Object.setPrototypeOf&&Object.setPrototypeOf(v,e.prototype),v.expected=h,v.found=f,v.location=m,v.name="SyntaxError",v}function i(s,h,f){return f=f||" ",s.length>h?s:(h-=s.length,s+(f+=f.repeat(h)).slice(0,h))}function n(s,h){var f,m={},v=(h=h!==void 0?h:{}).grammarSource,x={start:Ri},M=Ri,$="none",I=")",P=",",L="(",z="%",F="px",U="cm",W="mm",K="in",J="pt",te="pc",ie="deg",le="rad",de="grad",xe="turn",we="#",ve=".",se="e",ce=/^[ \t\n\r]/,ue=/^[a-z\-]/,Ae=/^[0-9a-fA-F]/,je=/^[+\-]/,Ge=/^[0-9]/,He=Te("none"),mt=ye("none",!1),jt=ye(")",!1),ki=ye(",",!1),or=Te("whitespace"),pi=ge([" ","	",`
`,"\r"],!1,!1),wi=Te("function"),wo=ye("(",!1),Is=Te("identifier"),_o=ge([["a","z"],"-"],!1,!1),fl=Te("percentage"),la=ye("%",!1),up=Te("length"),xo=ye("px",!1),Ac=ye("cm",!1),ar=ye("mm",!1),Oc=ye("in",!1),dp=ye("pt",!1),Pc=ye("pc",!1),$i=Te("angle"),B=ye("deg",!1),hn=ye("rad",!1),Er=ye("grad",!1),Qe=ye("turn",!1),li=Te("number"),Dn=Te("color"),kr=ye("#",!1),$r=ge([["0","9"],["a","f"],["A","F"]],!1,!1),Pi=ge(["+","-"],!1,!1),Zi=ge([["0","9"]],!1,!1),ty=ye(".",!1),gl=ye("e",!1),ke=function(){return[]},Rc=function(Q,me){return{type:"function",name:Q,parameters:me||[]}},u=function(Q,me){return me.length>0?rB(Q,me,3):[Q]},A=function(Q){return{type:"quantity",value:Q.value,unit:Q.unit}},b=function(Q){return{type:"color",colorType:Q.type,value:Q.value}},c=function(Q){return Q},a=function(){return he()},r=function(Q){return{value:Q,unit:"%"}},o=function(Q){return{value:Q,unit:"px"}},l=function(Q){return{value:Q,unit:"cm"}},d=function(Q){return{value:Q,unit:"mm"}},p=function(Q){return{value:Q,unit:"in"}},g=function(Q){return{value:Q,unit:"pt"}},y=function(Q){return{value:Q,unit:"pc"}},w=function(Q){return{value:Q,unit:"deg"}},S=function(Q){return{value:Q,unit:"rad"}},k=function(Q){return{value:Q,unit:"grad"}},C=function(Q){return{value:Q,unit:"turn"}},O=function(Q){return{value:Q,unit:null}},R=function(){return{type:"hex",value:he()}},N=function(Q){return{type:"function",value:Q}},j=function(){return{type:"named",value:he()}},G=function(){return parseFloat(he())},D=0,V=0,Z=[{line:1,column:1}],q=0,ne=[],ee=0;if("startRule"in h){if(!(h.startRule in x))throw new Error(`Can't start parsing from rule "`+h.startRule+'".');M=x[h.startRule]}function he(){return s.substring(V,D)}function ye(Q,me){return{type:"literal",text:Q,ignoreCase:me}}function ge(Q,me,Me){return{type:"class",parts:Q,inverted:me,ignoreCase:Me}}function Le(){return{type:"end"}}function Te(Q){return{type:"other",description:Q}}function Je(Q){var me,Me=Z[Q];if(Me)return Me;for(me=Q-1;!Z[me];)me--;for(Me={line:(Me=Z[me]).line,column:Me.column};me<Q;)s.charCodeAt(me)===10?(Me.line++,Me.column=1):Me.column++,me++;return Z[Q]=Me,Me}function We(Q,me,Me){var ht=Je(Q),Ji=Je(me);return{source:v,start:{offset:Q,line:ht.line,column:ht.column},end:{offset:me,line:Ji.line,column:Ji.column}}}function Oe(Q){D<q||(D>q&&(q=D,ne=[]),ne.push(Q))}function Dt(Q,me,Me){return new e(e.buildMessage(Q,me),Q,me,Me)}function Ri(){var Q;return(Q=Gt())===m&&(Q=bt()),Q}function Gt(){var Q,me;return ee++,Q=D,rt(),s.substr(D,4)===$?(me=$,D+=4):(me=m,ee===0&&Oe(mt)),me!==m?(rt(),V=Q,Q=ke()):(D=Q,Q=m),ee--,Q===m&&ee===0&&Oe(He),Q}function bt(){var Q,me;if(Q=[],(me=wt())!==m)for(;me!==m;)Q.push(me),me=wt();else Q=m;return Q}function wt(){var Q,me,Me,ht;return Q=D,rt(),(me=Jr())!==m?(rt(),(Me=ot())===m&&(Me=null),rt(),s.charCodeAt(D)===41?(ht=I,D++):(ht=m,ee===0&&Oe(jt)),ht!==m?(rt(),V=Q,Q=Rc(me,Me)):(D=Q,Q=m)):(D=Q,Q=m),Q}function ot(){var Q,me,Me,ht,Ji,Ci,As,iy;if(Q=D,(me=Xt())!==m){for(Me=[],ht=D,Ji=rt(),s.charCodeAt(D)===44?(Ci=P,D++):(Ci=m,ee===0&&Oe(ki)),Ci===m&&(Ci=null),As=rt(),(iy=Xt())!==m?ht=Ji=[Ji,Ci,As,iy]:(D=ht,ht=m);ht!==m;)Me.push(ht),ht=D,Ji=rt(),s.charCodeAt(D)===44?(Ci=P,D++):(Ci=m,ee===0&&Oe(ki)),Ci===m&&(Ci=null),As=rt(),(iy=Xt())!==m?ht=Ji=[Ji,Ci,As,iy]:(D=ht,ht=m);V=Q,Q=u(me,Me)}else D=Q,Q=m;return Q}function Xt(){var Q,me;return Q=D,(me=Cn())===m&&(me=kt())===m&&(me=pp())===m&&(me=fp()),me!==m&&(V=Q,me=A(me)),(Q=me)===m&&(Q=D,(me=gp())!==m&&(V=Q,me=b(me)),Q=me),Q}function rt(){var Q,me;for(ee++,Q=[],ce.test(s.charAt(D))?(me=s.charAt(D),D++):(me=m,ee===0&&Oe(pi));me!==m;)Q.push(me),ce.test(s.charAt(D))?(me=s.charAt(D),D++):(me=m,ee===0&&Oe(pi));return ee--,me=m,ee===0&&Oe(or),Q}function Jr(){var Q,me,Me;return ee++,Q=D,(me=pt())!==m?(s.charCodeAt(D)===40?(Me=L,D++):(Me=m,ee===0&&Oe(wo)),Me!==m?(V=Q,Q=c(me)):(D=Q,Q=m)):(D=Q,Q=m),ee--,Q===m&&(me=m,ee===0&&Oe(wi)),Q}function pt(){var Q,me,Me;if(ee++,Q=D,me=[],ue.test(s.charAt(D))?(Me=s.charAt(D),D++):(Me=m,ee===0&&Oe(_o)),Me!==m)for(;Me!==m;)me.push(Me),ue.test(s.charAt(D))?(Me=s.charAt(D),D++):(Me=m,ee===0&&Oe(_o));else me=m;return me!==m&&(V=Q,me=a()),ee--,(Q=me)===m&&(me=m,ee===0&&Oe(Is)),Q}function Cn(){var Q,me,Me;return ee++,Q=D,rt(),(me=zn())!==m?(s.charCodeAt(D)===37?(Me=z,D++):(Me=m,ee===0&&Oe(la)),Me!==m?(V=Q,Q=r(me)):(D=Q,Q=m)):(D=Q,Q=m),ee--,Q===m&&ee===0&&Oe(fl),Q}function kt(){var Q,me,Me;return ee++,Q=D,rt(),(me=zn())!==m?(s.substr(D,2)===F?(Me=F,D+=2):(Me=m,ee===0&&Oe(xo)),Me!==m?(V=Q,Q=o(me)):(D=Q,Q=m)):(D=Q,Q=m),Q===m&&(Q=D,rt(),(me=zn())!==m?(s.substr(D,2)===U?(Me=U,D+=2):(Me=m,ee===0&&Oe(Ac)),Me!==m?(V=Q,Q=l(me)):(D=Q,Q=m)):(D=Q,Q=m),Q===m&&(Q=D,rt(),(me=zn())!==m?(s.substr(D,2)===W?(Me=W,D+=2):(Me=m,ee===0&&Oe(ar)),Me!==m?(V=Q,Q=d(me)):(D=Q,Q=m)):(D=Q,Q=m),Q===m&&(Q=D,rt(),(me=zn())!==m?(s.substr(D,2)===K?(Me=K,D+=2):(Me=m,ee===0&&Oe(Oc)),Me!==m?(V=Q,Q=p(me)):(D=Q,Q=m)):(D=Q,Q=m),Q===m&&(Q=D,rt(),(me=zn())!==m?(s.substr(D,2)===J?(Me=J,D+=2):(Me=m,ee===0&&Oe(dp)),Me!==m?(V=Q,Q=g(me)):(D=Q,Q=m)):(D=Q,Q=m),Q===m&&(Q=D,rt(),(me=zn())!==m?(s.substr(D,2)===te?(Me=te,D+=2):(Me=m,ee===0&&Oe(Pc)),Me!==m?(V=Q,Q=y(me)):(D=Q,Q=m)):(D=Q,Q=m)))))),ee--,Q===m&&ee===0&&Oe(up),Q}function pp(){var Q,me,Me;return ee++,Q=D,(me=zn())!==m?(s.substr(D,3)===ie?(Me=ie,D+=3):(Me=m,ee===0&&Oe(B)),Me!==m?(V=Q,Q=w(me)):(D=Q,Q=m)):(D=Q,Q=m),Q===m&&(Q=D,(me=zn())!==m?(s.substr(D,3)===le?(Me=le,D+=3):(Me=m,ee===0&&Oe(hn)),Me!==m?(V=Q,Q=S(me)):(D=Q,Q=m)):(D=Q,Q=m),Q===m&&(Q=D,(me=zn())!==m?(s.substr(D,4)===de?(Me=de,D+=4):(Me=m,ee===0&&Oe(Er)),Me!==m?(V=Q,Q=k(me)):(D=Q,Q=m)):(D=Q,Q=m),Q===m&&(Q=D,(me=zn())!==m?(s.substr(D,4)===xe?(Me=xe,D+=4):(Me=m,ee===0&&Oe(Qe)),Me!==m?(V=Q,Q=C(me)):(D=Q,Q=m)):(D=Q,Q=m)))),ee--,Q===m&&(me=m,ee===0&&Oe($i)),Q}function fp(){var Q,me;return ee++,Q=D,rt(),(me=zn())!==m?(V=Q,Q=O(me)):(D=Q,Q=m),ee--,Q===m&&ee===0&&Oe(li),Q}function gp(){var Q,me,Me,ht;if(ee++,Q=D,s.charCodeAt(D)===35?(me=we,D++):(me=m,ee===0&&Oe(kr)),me!==m){if(Me=[],Ae.test(s.charAt(D))?(ht=s.charAt(D),D++):(ht=m,ee===0&&Oe($r)),ht!==m)for(;ht!==m;)Me.push(ht),Ae.test(s.charAt(D))?(ht=s.charAt(D),D++):(ht=m,ee===0&&Oe($r));else Me=m;Me!==m?(V=Q,Q=R()):(D=Q,Q=m)}else D=Q,Q=m;return Q===m&&(Q=D,(me=wt())!==m&&(V=Q,me=N(me)),(Q=me)===m&&(Q=D,(me=pt())!==m&&(V=Q,me=j()),Q=me)),ee--,Q===m&&(me=m,ee===0&&Oe(Dn)),Q}function zn(){var Q,me,Me,ht,Ji,Ci,As;for(Q=D,je.test(s.charAt(D))?(s.charAt(D),D++):ee===0&&Oe(Pi),me=D,Me=[],Ge.test(s.charAt(D))?(ht=s.charAt(D),D++):(ht=m,ee===0&&Oe(Zi));ht!==m;)Me.push(ht),Ge.test(s.charAt(D))?(ht=s.charAt(D),D++):(ht=m,ee===0&&Oe(Zi));if(s.charCodeAt(D)===46?(ht=ve,D++):(ht=m,ee===0&&Oe(ty)),ht!==m){if(Ji=[],Ge.test(s.charAt(D))?(Ci=s.charAt(D),D++):(Ci=m,ee===0&&Oe(Zi)),Ci!==m)for(;Ci!==m;)Ji.push(Ci),Ge.test(s.charAt(D))?(Ci=s.charAt(D),D++):(Ci=m,ee===0&&Oe(Zi));else Ji=m;Ji!==m?me=Me=[Me,ht,Ji]:(D=me,me=m)}else D=me,me=m;if(me===m)if(me=[],Ge.test(s.charAt(D))?(Me=s.charAt(D),D++):(Me=m,ee===0&&Oe(Zi)),Me!==m)for(;Me!==m;)me.push(Me),Ge.test(s.charAt(D))?(Me=s.charAt(D),D++):(Me=m,ee===0&&Oe(Zi));else me=m;if(me!==m){if(Me=D,s.charCodeAt(D)===101?(ht=se,D++):(ht=m,ee===0&&Oe(gl)),ht!==m){if(je.test(s.charAt(D))?(Ji=s.charAt(D),D++):(Ji=m,ee===0&&Oe(Pi)),Ji===m&&(Ji=null),Ci=[],Ge.test(s.charAt(D))?(As=s.charAt(D),D++):(As=m,ee===0&&Oe(Zi)),As!==m)for(;As!==m;)Ci.push(As),Ge.test(s.charAt(D))?(As=s.charAt(D),D++):(As=m,ee===0&&Oe(Zi));else Ci=m;Ci!==m?Me=ht=[ht,Ji,Ci]:(D=Me,Me=m)}else D=Me,Me=m;Me===m&&(Me=null),V=Q,Q=G()}else D=Q,Q=m;return Q}function nB(Q,me){return Q.map(function(Me){return Me[me]})}function rB(Q,me,Me){return[Q].concat(nB(me,Me))}if((f=M())!==m&&D===s.length)return f;throw f!==m&&D<s.length&&Oe(Le()),Dt(ne,q<s.length?s.charAt(q):null,q<s.length?We(q,q+1):We(q,q))}return t(e,Error),e.prototype.format=function(s){var h="Error: "+this.message;if(this.location){var f,m=null;for(f=0;f<s.length;f++)if(s[f].source===this.location.source){m=s[f].text.split(/\r\n|\n|\r/g);break}var v=this.location.start,x=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(v):v,M=this.location.source+":"+x.line+":"+x.column;if(m){var $=this.location.end,I=i("",x.line.toString().length," "),P=m[v.line-1],L=(v.line===$.line?$.column:P.length+1)-v.column||1;h+=`
 --> `+M+`
`+I+` |
`+x.line+" | "+P+`
`+I+" | "+i("",v.column-1," ")+i("",L,"^")}else h+=`
 at `+M}return h},e.buildMessage=function(s,h){var f={literal:function(P){return'"'+v(P.text)+'"'},class:function(P){var L=P.parts.map(function(z){return Array.isArray(z)?x(z[0])+"-"+x(z[1]):x(z)});return"["+(P.inverted?"^":"")+L.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(P){return P.description}};function m(P){return P.charCodeAt(0).toString(16).toUpperCase()}function v(P){return P.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(L){return"\\x0"+m(L)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(L){return"\\x"+m(L)})}function x(P){return P.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(L){return"\\x0"+m(L)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(L){return"\\x"+m(L)})}function M(P){return f[P.type](P)}function $(P){var L,z,F=P.map(M);if(F.sort(),F.length>0){for(L=1,z=1;L<F.length;L++)F[L-1]!==F[L]&&(F[z]=F[L],z++);F.length=z}switch(F.length){case 1:return F[0];case 2:return F[0]+" or "+F[1];default:return F.slice(0,-1).join(", ")+", or "+F[F.length-1]}}function I(P){return P?'"'+v(P)+'"':"end of input"}return"Expected "+$(s)+" but "+I(h)+" found."},{SyntaxError:e,parse:n}},(hC=kG).exports&&(hC.exports=uC());var Ome=kG.exports;function $G(t){if(!t||t.length===0)return null;if(typeof t=="string"){const i=dC(t);return i&&i.length!==0?i:null}const e=t.map(i=>{if(!Number.isFinite(i.scale)||i.scale<=0)throw new fe("effect:invalid-scale","scale must be finite and greater than 0",{stop:i});return{scale:i.scale,effects:dC(i.value)}});e.sort((i,n)=>n.effects.length-i.effects.length);for(let i=0;i<e.length-1;i++){if(!fne(e[i].effects,e[i+1].effects))throw new fe("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:e[i].effects,b:e[i+1].effects});gne(e[i].effects,e[i+1].effects)}return e.sort((i,n)=>n.scale-i.scale),e}function dC(t){let e;if(!t)return[];try{e=Ome.parse(t)}catch(i){throw new fe("effect:invalid-syntax","Invalid effect syntax",{value:t,error:i})}return e.map(i=>Pme(i))}function Pme(t){try{switch(t.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return Rme(t);case"opacity":return Lme(t);case"hue-rotate":return Nme(t);case"blur":return Dme(t);case"drop-shadow":return zme(t);case"bloom":return Fme(t)}}catch(e){throw e.details.filter=t,e}throw new fe("effect:unknown-effect",`Effect '${t.name}' is not supported`,{effect:t})}function Rme(t){let e=1;return L0(t.parameters,1),t.parameters.length===1&&(e=Ho(t.parameters[0])),new Zx(t.name,e)}function Lme(t){let e=1;return L0(t.parameters,1),t.parameters.length===1&&(e=Ho(t.parameters[0])),new cN(e)}function Nme(t){let e=0;return L0(t.parameters,1),t.parameters.length===1&&(e=Ume(t.parameters[0])),new aN(e)}function Dme(t){let e=0;return L0(t.parameters,1),t.parameters.length===1&&(e=p7(t.parameters[0]),Zm(e,t.parameters[0])),new iN(e)}function zme(t){const e=[];let i=null;for(const n of t.parameters)if(n.type==="color"){if(e.length&&Object.freeze(e),i)throw new fe("effect:type-error","Accepts only one color",{});i=qme(n)}else{const s=p7(n);if(Object.isFrozen(e))throw new fe("effect:type-error","<length> parameters not consecutive",{lengths:e});e.push(s),e.length===3&&Zm(s,n)}if(e.length<2||e.length>3)throw new fe("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${e.length}}`,{lengths:e});return new sN(e[0],e[1],e[2]||0,i||CG("black"))}function Fme(t){let e=1,i=0,n=0;return L0(t.parameters,3),t.parameters[0]&&(e=Ho(t.parameters[0])),t.parameters[1]&&(i=p7(t.parameters[1]),Zm(i,t.parameters[1])),t.parameters[2]&&(n=Ho(t.parameters[2])),new eN(e,i,n)}function L0(t,e){if(t.length>e)throw new fe("effect:type-error",`Function supports up to ${e} parameters, Actual: ${t.length}`,{parameters:t})}function T3(t){if(t.type==="color")return"<color>";if(t.unit){if(t.unit in d7)return"<length>";if(t.unit in u7)return"<angle>";if(t.unit==="%")return"<percentage>"}return"<double>"}function Zm(t,e){if(t<0)throw new fe("effect:type-error",`Negative values are not allowed, Actual: ${t}`,{term:e})}function jme(t){if(t.type!=="quantity"||t.unit!==null)throw new fe("effect:type-error",`Expected <double>, Actual: ${T3(t)}`,{term:t})}function Gme(t){if(t.type!=="quantity"||t.unit!==null&&t.unit!=="%")throw new fe("effect:type-error",`Expected <double> or <percentage>, Actual: ${T3(t)}`,{term:t})}const u7={deg:1,grad:.9,rad:180/Math.PI,turn:360};function Vme(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&u7[t.unit]!=null))throw new fe("effect:type-error",`Expected <angle>, Actual: ${T3(t)}`,{term:t})}const d7={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function Hme(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&d7[t.unit]!=null))throw new fe("effect:type-error",`Expected <length>, Actual: ${T3(t)}`,{term:t})}function Ho(t){Gme(t);const e=t.value;return Zm(e,t),t.unit==="%"?.01*e:e}function Bme(t){return jme(t),Zm(t.value,t),t.value}function Ume(t){return Vme(t),t.value*u7[t.unit]||0}function p7(t){return Hme(t),t.value*d7[t.unit]||0}function qme(t){switch(t.colorType){case"hex":return cie(t.value);case"named":return CG(t.value);case"function":return Jme(t.value)}}function CG(t){if(!VL(t))throw new fe("effect:unknown-color",`color '${t}' isn't valid`,{namedColor:t});return lie(t)}const Wme=/^rgba?/i,Zme=/^hsla?/i;function Jme(t){if(L0(t.parameters,4),Wme.test(t.name))return[Ho(t.parameters[0]),Ho(t.parameters[1]),Ho(t.parameters[2]),t.parameters[3]?Ho(t.parameters[3]):1];if(Zme.test(t.name))return HL(Bme(t.parameters[0]),Ho(t.parameters[1]),Ho(t.parameters[2]),t.parameters[3]?Ho(t.parameters[3]):1);throw new fe("effect:syntax-error",`Invalid color function '${t.name}'`,{colorFunction:t})}function Kme(t,e,i){var n;try{return Qme(t)}catch(s){(n=i==null?void 0:i.messages)==null||n.push(s)}return null}function Yme(t,e,i,n){try{const s=Xme(t);Xd(i,s,e)}catch(s){n.messages&&n.messages.push(s)}}function Xme(t){const e=$G(t);return e?mne(e)?e.map(i=>i.toJSON()):e.map(({scale:i,effects:n})=>({scale:i,value:n.map(s=>s.toJSON())})):null}function Qme(t){if(!t||t.length===0)return null;if(eye(t)){const e=[];for(const i of t)e.push({scale:i.scale,value:pC(i.value)});return e}return pC(t)}function eye(t){const e=t[0];return!!e&&"scale"in e}function pC(t){if(!(t!=null&&t.length))return"";const e=[];for(const i of t){let n=[];switch(i.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":n=[El(i,"amount")];break;case"blur":n=[El(i,"radius","pt")];break;case"hue-rotate":n=[El(i,"angle","deg")];break;case"drop-shadow":n=[El(i,"xoffset","pt"),El(i,"yoffset","pt"),El(i,"blurRadius","pt"),tye(i,"color")];break;case"bloom":n=[El(i,"strength"),El(i,"radius","pt"),El(i,"threshold")]}const s=`${i.type}(${n.filter(Boolean).join(" ")})`;$G(s),e.push(s)}return e.join(" ")}function El(t,e,i){if(t[e]==null)throw new fe("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});return i?t[e]+i:""+t[e]}function tye(t,e){if(t[e]==null)throw new fe("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});const i=t[e];return`rgba(${i[0]||0}, ${i[1]||0}, ${i[2]||0}, ${i[3]/255||0})`}const iye={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}},fC={read:{reader:Kme},write:{allowNull:!0,writer:Yme}},nye={json:{read:!1,write:!1,origins:{"web-map":fC,"portal-item":fC}}},rye=t=>{let e=class extends t{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return _([T(iye)],e.prototype,"blendMode",void 0),_([T(nye)],e.prototype,"effect",void 0),e=_([Y("esri.layers.mixins.BlendLayer")],e),e},sye=t=>{let e=class extends t{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const i={minScale:this.minScale,maxScale:this.maxScale},n=this.parent;n&&"effectiveScaleRange"in n&&oye(i,n.effectiveScaleRange);const s=this._get("effectiveScaleRange");return s&&s.minScale===i.minScale&&s.maxScale===i.maxScale?s:i}};return _([T({type:Number,nonNullable:!0,json:{write:!0}})],e.prototype,"minScale",void 0),_([T({type:Number,nonNullable:!0,json:{write:!0}})],e.prototype,"maxScale",void 0),_([T({readOnly:!0})],e.prototype,"effectiveScaleRange",null),e=_([Y("esri.layers.mixins.ScaleRangeLayer")],e),e};function oye(t,e){return t.minScale=t.minScale>0?e.minScale>0?Math.min(t.minScale,e.minScale):t.minScale:e.minScale,t.maxScale=t.maxScale>0?e.maxScale>0?Math.max(t.maxScale,e.maxScale):t.maxScale:e.maxScale,t}var i6;let ng=i6=class extends Fe{constructor(t){super(t)}async collectRequiredFields(t,e){return eu(t,e,this.expression)}clone(){return new i6({expression:this.expression,title:this.title})}equals(t){return this.expression===t.expression&&this.title===t.title}};_([T({type:String,json:{write:!0}})],ng.prototype,"expression",void 0),_([T({type:String,json:{write:!0}})],ng.prototype,"title",void 0),ng=i6=_([Y("esri.symbols.support.FeatureExpressionInfo")],ng);const gC=ng,f7={unknown:1,inches:ii(1,"meters","inches"),feet:ii(1,"meters","feet"),"us-feet":ii(1,"meters","us-feet"),yards:ii(1,"meters","yards"),miles:ii(1,"meters","miles"),"nautical-miles":ii(1,"meters","nautical-miles"),millimeters:ii(1,"meters","millimeters"),centimeters:ii(1,"meters","centimeters"),decimeters:ii(1,"meters","decimeters"),meters:ii(1,"meters","meters"),kilometers:ii(1,"meters","kilometers"),"decimal-degrees":1/TO(1,"meters",Ei.radius)};function C8e(t){return!!t&&f7[t]!=null}function aye(t){return 1/(f7[t]||1)}function lye(){const t=Object.keys(f7);return t.sort(),t}const cye=lye();var n6;const Xy=Tr()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),mC=new an({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let Gl=n6=class extends Fe{constructor(t){super(t),this.offset=null}readFeatureExpressionInfo(t,e){return t??(e.featureExpression&&e.featureExpression.value===0?{expression:"0"}:void 0)}writeFeatureExpressionInfo(t,e,i,n){e[i]=t.write({},n),t.expression==="0"&&(e.featureExpression={value:0})}get mode(){const{offset:t,featureExpressionInfo:e}=this;return this._isOverridden("mode")?this._get("mode"):t!=null||e?"relative-to-ground":"on-the-ground"}set mode(t){this._override("mode",t)}set unit(t){this._set("unit",t)}write(t,e){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(t,e):null}clone(){return new n6({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(t){return this.mode===t.mode&&this.offset===t.offset&&this.unit===t.unit&&rA(this.featureExpressionInfo,t.featureExpressionInfo)}};_([T({type:gC,json:{write:!0}})],Gl.prototype,"featureExpressionInfo",void 0),_([Ct("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],Gl.prototype,"readFeatureExpressionInfo",null),_([_t("featureExpressionInfo",{featureExpressionInfo:{type:gC},"featureExpression.value":{type:[0]}})],Gl.prototype,"writeFeatureExpressionInfo",null),_([T({type:Xy.apiValues,nonNullable:!0,json:{type:Xy.jsonValues,read:Xy.read,write:{writer:Xy.write,isRequired:!0}}})],Gl.prototype,"mode",null),_([T({type:Number,json:{write:!0}})],Gl.prototype,"offset",void 0),_([T({type:cye,json:{type:String,read:mC.read,write:mC.write}})],Gl.prototype,"unit",null),Gl=n6=_([Y("esri.symbols.support.ElevationInfo")],Gl);const hye=Gl;let Vl=class extends rye(sye(tT)){constructor(e){super(e),this.elevationInfo=null,this.graphics=new Id,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(e){return this.graphics.add(e),this}addMany(e){return this.graphics.addMany(e),this}removeAll(){return this.graphics.removeAll(),this}remove(e){this.graphics.remove(e)}removeMany(e){this.graphics.removeMany(e)}on(e,i){return super.on(e,i)}graphicChanged(e){this.emit("graphic-update",e)}};_([T({type:hye})],Vl.prototype,"elevationInfo",void 0),_([T(Xx(Id,"graphics"))],Vl.prototype,"graphics",void 0),_([T({type:["show","hide"]})],Vl.prototype,"listMode",void 0),_([T()],Vl.prototype,"screenSizePerspectiveEnabled",void 0),_([T({readOnly:!0})],Vl.prototype,"type",void 0),_([T({constructOnly:!0})],Vl.prototype,"internal",void 0),Vl=_([Y("esri.layers.GraphicsLayer")],Vl);const IG=Vl;function yC(t){switch(t){case Kt.SUPPORTED:break;case Kt.GRAPHICS_LAYER_MISSING:return"not owned by a graphics layer";case Kt.GEOMETRY_MISSING:return"no geometry";case Kt.GEOMETRY_TYPE_UNSUPPORTED:return"the geometry type is not supported";case Kt.ELEVATION_MODE_UNSUPPORTED:return"the elevation mode is not supported";case Kt.SYMBOL_TYPE_UNSUPPORTED:return"the symbol type is not supported"}return""}var Kt;(function(t){t[t.SUPPORTED=0]="SUPPORTED",t[t.GRAPHICS_LAYER_MISSING=1]="GRAPHICS_LAYER_MISSING",t[t.GEOMETRY_MISSING=2]="GEOMETRY_MISSING",t[t.GEOMETRY_TYPE_UNSUPPORTED=3]="GEOMETRY_TYPE_UNSUPPORTED",t[t.ELEVATION_MODE_UNSUPPORTED=4]="ELEVATION_MODE_UNSUPPORTED",t[t.SYMBOL_TYPE_UNSUPPORTED=5]="SYMBOL_TYPE_UNSUPPORTED"})(Kt||(Kt={}));function AG(t){return t?Ai:bye}function uye(t,e){return e!=null&&e.mode?e.mode:AG(t).mode}function OG(t,e){return e??AG(t)}function PG(t,e){return uye(t!=null&&t.hasZ,e)}function A8e(t,e){return OG(t!=null&&!!t.hasZ,e)}function dye(t){const e=RG(t);return PG(t.geometry,e)}function pye(t){const e=RG(t),i=PG(t.geometry,e),n=e!=null&&i!=="on-the-ground"?vye(e):0,s=e==null?void 0:e.featureExpressionInfo;return{mode:i,offset:n,featureExpressionInfo:s}}function fye(t){return M3(pye(t))}function O8e(t){return M3(t)||gye(t)}function gye(t){var e;return((e=t==null?void 0:t.featureExpressionInfo)==null?void 0:e.expression)==="0"}function M3(t){if(!t||t.mode==="on-the-ground")return!1;const e=t!=null&&t.featureExpressionInfo?t.featureExpressionInfo.expression:null;return!(!e||e==="0")}function RG(t){return t.layer&&"elevationInfo"in t.layer?t.layer.elevationInfo:null}function g7(t,e){if(!(t!=null&&t.offset))return 0;const{offset:i,unit:n}=t;if(n==="decimal-degrees")return 0;const s=n!=="unknown"&&n?n:"meters",h=CO(e);return h?ii(i,s,h):0}function tw(t,e,i){if(!(i!=null&&i.mode))return;const n=t.hasZ?t.z:0,s=g7(i,t.spatialReference);switch(i.mode){case"absolute-height":return n-s;case"on-the-ground":return 0;case"relative-to-ground":return n-((e.elevationProvider.getElevation(t.x,t.y,n,t.spatialReference,"ground")??0)+s);case"relative-to-scene":return n-((e.elevationProvider.getElevation(t.x,t.y,n,t.spatialReference,"scene")??0)+s)}}function m7(t,e,i,n=null){return E3(t,e.x,e.y,e.hasZ?e.z:0,e.spatialReference,i,n)}function LG(t,e,i,n,s=null){return E3(t,e[0],e[1],e.length>2?e[2]:0,i,n,s)}function E3(t,e,i,n,s,h,f=null){if(h==null)return;const m=f!=null?f.mode:"absolute-height";if(m==="on-the-ground")return 0;const{absoluteZ:v}=mye(e,i,n,s,t,h);return yye(v,e,i,n,s,t,f,m)}function mye(t,e,i,n,s,h){const f=g7(h,n);switch(h.mode){case"absolute-height":return{absoluteZ:i+f,elevation:0};case"on-the-ground":{const m=s.elevationProvider.getElevation(t,e,0,n,"ground")??0;return{absoluteZ:m,elevation:m}}case"relative-to-ground":{const m=s.elevationProvider.getElevation(t,e,i,n,"ground")??0;return{absoluteZ:i+m+f,elevation:m}}case"relative-to-scene":{const m=s.elevationProvider.getElevation(t,e,i,n,"scene")??0;return{absoluteZ:i+m+f,elevation:m}}}}function yye(t,e,i,n,s,h,f,m){const v=g7(f,s);switch(m){case"absolute-height":return t-v;case"relative-to-ground":return t-((h.elevationProvider.getElevation(e,i,n,s,"ground")??0)+v);case"relative-to-scene":return t-((h.elevationProvider.getElevation(e,i,n,s,"scene")??0)+v)}}function P8e(t,e){if(e==null)return!1;const{mode:i}=e;return i!=null&&(t==="scene"&&i==="relative-to-scene"||t==="ground"&&i!=="absolute-height")}function R8e(t,e,i){return i&&i.mode!==e?`${t} only support ${e} elevation mode`:null}function L8e(t,e,i){return(i==null?void 0:i.mode)===e?`${t} do not support ${e} elevation mode`:null}function N8e(t,e){return(e==null?void 0:e.featureExpressionInfo)!=null&&e.featureExpressionInfo.expression!=="0"?`${t} do not support featureExpressionInfo`:null}function D8e(t,e){e&&t.warn(".elevationInfo=",e)}function vye(t){return((t==null?void 0:t.offset)??0)*aye(t==null?void 0:t.unit)}const Ai={mode:"absolute-height",offset:0},bye={mode:"on-the-ground",offset:null};function wye(t){var n,s;if(t.graphic&&((n=t.graphic.layer)==null?void 0:n.type)!=="graphics")return Kt.GRAPHICS_LAYER_MISSING;const e=(s=t.operations)==null?void 0:s.data.type;if(!e)return Kt.GEOMETRY_TYPE_UNSUPPORTED;switch(e){case"polygon":case"point":case"polyline":case"mesh":break;default:return Kt.GEOMETRY_TYPE_UNSUPPORTED}const i=t.elevationInfo;return M3(i)?Kt.ELEVATION_MODE_UNSUPPORTED:Kt.SUPPORTED}function _ye(t){return xye(t).result}function xye(t){var n;if(t.graphic&&((n=t.graphic.layer)==null?void 0:n.type)!=="graphics")return{result:Kt.GRAPHICS_LAYER_MISSING};if(!t.operations)return{result:Kt.GEOMETRY_MISSING};if(M3(t.elevationInfo))return{result:Kt.ELEVATION_MODE_UNSUPPORTED};const e=t.operations.data.type,i=t.operations.data.geometry;return e==="point"||e==="mesh"||e==="polyline"||e==="polygon"?{result:Kt.SUPPORTED,geometry:i}:{result:Kt.GEOMETRY_TYPE_UNSUPPORTED}}function Sye(t){var i;if(((i=t.layer)==null?void 0:i.type)!=="graphics")return Kt.GRAPHICS_LAYER_MISSING;if(t.geometry==null)return Kt.GEOMETRY_MISSING;switch(t.geometry.type){case"point":break;case"polygon":case"polyline":case"multipoint":case"extent":case"mesh":return Kt.SUPPORTED;default:return Kt.GEOMETRY_TYPE_UNSUPPORTED}const e=t.symbol!=null&&t.symbol.type==="point-3d"&&t.symbol.symbolLayers;return!e||!e.some(n=>n.type==="object")?Kt.SYMBOL_TYPE_UNSUPPORTED:dye(t)!=="on-the-ground"&&fye(t)?Kt.ELEVATION_MODE_UNSUPPORTED:Kt.SUPPORTED}function vC(t,e,i){if(!e||!(t!=null&&t.map))return;const{map:n}=t,s=n.layers.find(h=>h===e);s||n.add(e,i),s&&i!=null&&n.layers.reorder(s,i)}function bC(t,e){const i=(e==null?void 0:e.type)==="subtype-sublayer"?e.parent:e;return t.allLayerViews.find(n=>{const s=n.layer;return s===i||"sublayers"in s&&s.sublayers!=null&&s.sublayers.includes(i)})}const NG="z",DG="r",ui={redo:DG,undo:NG,center:"Alt",constraint:"Shift",cancel:"Escape",delete:["Backspace","Delete"],complete:"Enter",vertexAdd:"f",pan:" "},wC={toggle:"Control"},z8e={enterInputMode:"Tab",commit:"Enter",discard:"Escape",next:"Tab"},F8e={moveUp:{key:"ArrowUp",modifier:"Shift",repeats:!0},moveDown:{key:"ArrowDown",modifier:"Shift",repeats:!0},moveLeft:{key:"ArrowLeft",modifier:"Shift",repeats:!0},moveRight:{key:"ArrowRight",modifier:"Shift",repeats:!0},scaleUp:{key:"+",modifier:"Shift"},scaleDown:{key:"-",modifier:"Shift"},factorModifier:{key:IL,continuePropagation:!0},toggleOpacity:"t",preserveAspectRatio:{key:"Shift",continuePropagation:!0},rotateIncrements:{key:"Shift",continuePropagation:!0},undo:NG,redo:DG};let j8e=class{constructor(){this._bindings=new Map}add(e,i){return this.addToggle(e,n=>{n.type==="key-down"&&i(n)})}addToggle(e,i){const n=Tye.fromDefinition(e,i),s=G6(this._bindings,n.key,()=>[]);return s.push(n),ut(()=>I6(s,n))}register(e,i=Ut.WIDGET){return Sc([e.on("key-down",n=>this.dispatch(e.inputManager,n),i),e.on("key-up",n=>this.dispatch(e.inputManager,n),i)])}dispatch(e,i){const n=i.key,s=this._bindings.get(n);if(s)for(const h of s)h.process(e,i)}},Tye=class r6{constructor(e,i,n,s,h){this.key=e,this.modifiers=i,this.repeats=n,this.continuePropagation=s,this.callback=h}process(e,i){if(!(i.key!==this.key||"repeat"in i&&i.repeat&&!this.repeats)){for(const n of this.modifiers)if(!e.isModifierKeyDown(n))return;this.continuePropagation||i.stopPropagation(),this.callback(i)}}static fromDefinition(e,i){if(typeof e=="string")return new r6(e,[],!1,!1,i);const{key:n,modifier:s,repeats:h,continuePropagation:f}=e;return new r6(n,s?Array.isArray(s)?s:[s]:[],!!h,!!f,i)}},xb=class extends Re{constructor(e){super(e),this.enabled=!1}};_([T({type:Boolean,nonNullable:!0})],xb.prototype,"enabled",void 0),xb=_([Y("esri.views.interactive.sketch.SketchLabelOptions")],xb);const Jm=xb;let Ag=class extends Re{constructor(e){super(e),this.mode="absolute-height"}toJSON(){return{mode:this.mode}}};_([T({type:String,nonNullable:!0})],Ag.prototype,"mode",void 0),Ag=_([Y("esri.views.interactive.sketch.SketchTooltipElevationOptions")],Ag);let Un=class extends Re{constructor(e){super(e),this.area=!0,this.coordinates=!0,this.direction=!0,this.distance=!0,this.elevation=!0,this.header=!0,this.helpMessage=!1,this.orientation=!0,this.radius=!0,this.rotation=!0,this.scale=!0,this.size=!0,this.totalLength=!0}};_([T({type:Boolean,nonNullable:!0})],Un.prototype,"area",void 0),_([T({type:Boolean,nonNullable:!0})],Un.prototype,"coordinates",void 0),_([T({type:Boolean,nonNullable:!0})],Un.prototype,"direction",void 0),_([T({type:Boolean,nonNullable:!0})],Un.prototype,"distance",void 0),_([T({type:Boolean,nonNullable:!0})],Un.prototype,"elevation",void 0),_([T({type:Boolean,nonNullable:!0})],Un.prototype,"header",void 0),_([T({type:Boolean,nonNullable:!0})],Un.prototype,"helpMessage",void 0),_([T({type:Boolean,nonNullable:!0})],Un.prototype,"orientation",void 0),_([T({type:Boolean,nonNullable:!0})],Un.prototype,"radius",void 0),_([T({type:Boolean,nonNullable:!0})],Un.prototype,"rotation",void 0),_([T({type:Boolean,nonNullable:!0})],Un.prototype,"scale",void 0),_([T({type:Boolean,nonNullable:!0})],Un.prototype,"size",void 0),_([T({type:Boolean,nonNullable:!0})],Un.prototype,"totalLength",void 0),Un=_([Y("esri.views.interactive.sketch.SketchTooltipVisibleElements")],Un);const zG=Un;let as=class extends Re{constructor(e){super(e),this.enabled=!1,this.forceEnabled=!1,this.helpMessage=null,this.helpMessageIcon=null,this.inputEnabled=!0,this.elevation=new Ag,this.visibleElements=new zG,this.visualVariables=null,this.xyMode="auto"}get effectiveEnabled(){return this.forceEnabled||this.enabled}};_([T({type:Boolean,nonNullable:!0})],as.prototype,"enabled",void 0),_([T()],as.prototype,"forceEnabled",void 0),_([T()],as.prototype,"effectiveEnabled",null),_([T()],as.prototype,"helpMessage",void 0),_([T()],as.prototype,"helpMessageIcon",void 0),_([T({type:Boolean,nonNullable:!0})],as.prototype,"inputEnabled",void 0),_([T({type:Ag,nonNullable:!0})],as.prototype,"elevation",void 0),_([T({type:zG,nonNullable:!0})],as.prototype,"visibleElements",void 0),_([T()],as.prototype,"visualVariables",void 0),_([T()],as.prototype,"xyMode",void 0),as=_([Y("esri.views.interactive.sketch.SketchTooltipOptions")],as);const y7=as;let lf=class extends Re{constructor(e){super(e),this.labels=new Jm,this.tooltips=new y7,this.values=new S3}};_([T({nonNullable:!0,type:Jm})],lf.prototype,"labels",void 0),_([T({nonNullable:!0,type:y7})],lf.prototype,"tooltips",void 0),_([T({nonNullable:!0,type:S3})],lf.prototype,"values",void 0),lf=_([Y("esri.views.interactive.sketch.SketchOptions")],lf);const k3=lf;var Jd;function FG(t,e,i){return _n(t,e,i)}function _n(t=0,e=0,i=0){return wr(t,e,i)}function W8e(t){return t}function Z8e(t){return t}function aa(t,e,i){return wr(t,e,i)}function a0(t){const[e,i,n]=t;return t.length>3?[e,i,n,t[3]]:[e,i,n]}function Vh(t){return t[3]=((t.length>3?t[3]:void 0)??Jd.NONE)|Jd.TARGET,t}function J8e(t){return!!(((t.length>3?t[3]:void 0)??Jd.NONE)&Jd.TARGET)}function nn(t,e,{coordinateHelper:i,elevationInfo:n},s){return t?Nh(i.vectorToDehydratedPoint(t,Mye),e,n,s):null}function Nh(t,e,i,n=_n()){return n[0]=t.x,n[1]=t.y,n[2]=t.z??0,e==null||(e.type==="2d"?n[2]=0:n[2]=m7(e,t,i,Ai)??0),n}function K8e(t,e,i){return i?(TG(i,t[0],t[1],t[2],e),i):pl(t[0],t[1],t[2],e)}function s6(t,e,{z:i,m:n},s,h){const{spatialReference:f,elevationInfo:m}=s;let v;i==null&&n==null?v=void 0:e==null||e.type==="2d"?v=i??void 0:v=LG(e,t,f,Ai,m)??0;const[x,M]=t;return h?TG(h,x,M,v,f):h=pl(x,M,v,f),n!=null&&(h.m=n,h.hasM=!0),h}function Y8e(t,e,i,n,s=_n()){const[h,f]=t;return s[0]=h,s[1]=f,t.length>3&&(s[3]=t[3]??Jd.NONE),(i==null?void 0:i.type)!=="3d"?(s[2]=e.value,s):(s[2]=E3(i,h,f,e.value,n,e.elevationInfo,Ai)??0,s)}(function(t){t[t.NONE=0]="NONE",t[t.TARGET=1]="TARGET"})(Jd||(Jd={}));const Mye=pl(0,0,0,null);let qo=class extends Fe{constructor(){super(...arguments),this.enabled=!0}};_([T({type:Boolean})],qo.prototype,"enabled",void 0),qo=_([Y("esri.views.interactive.snapping.Settings.DefaultSnappingAlgorithm")],qo);let ci=class extends Fe{constructor(e){super(e),this.lineSnapper=new qo,this.parallelLineSnapper=new qo,this.rightAngleSnapper=new qo,this.rightAngleTriangleSnapper=new qo,this.shortLineThreshold=15,this.distance=5,this.pointThreshold=1e-6,this.intersectionParallelLineThreshold=1e-6,this.parallelLineThreshold=1e-6,this.verticalLineThresholdMeters=.3,this.touchSensitivityMultiplier=1.5,this.pointOnLineThreshold=1e-6,this.orange=new gt([255,127,0]),this.orangeTransparent=new gt([255,127,0,.5]),this.lineHintWidthReference=3,this.lineHintWidthTarget=3,this.lineHintFadedExtensions=.3,this.parallelLineHintWidth=2,this.parallelLineHintLength=24,this.parallelLineHintOffset=1.5,this.rightAngleHintSize=24,this.rightAngleHintOutlineSize=1.5,this.satisfiesConstraintScreenThreshold=1}};_([T({type:qo,constructOnly:!0,nonNullable:!0,json:{write:!0}})],ci.prototype,"lineSnapper",void 0),_([T({type:qo,constructOnly:!0,nonNullable:!0,json:{write:!0}})],ci.prototype,"parallelLineSnapper",void 0),_([T({type:qo,constructOnly:!0,nonNullable:!0,json:{write:!0}})],ci.prototype,"rightAngleSnapper",void 0),_([T({type:qo,constructOnly:!0,nonNullable:!0,json:{write:!0}})],ci.prototype,"rightAngleTriangleSnapper",void 0),_([T({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],ci.prototype,"shortLineThreshold",void 0),_([T({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],ci.prototype,"distance",void 0),_([T({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],ci.prototype,"pointThreshold",void 0),_([T({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],ci.prototype,"intersectionParallelLineThreshold",void 0),_([T({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],ci.prototype,"parallelLineThreshold",void 0),_([T({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],ci.prototype,"verticalLineThresholdMeters",void 0),_([T({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],ci.prototype,"touchSensitivityMultiplier",void 0),_([T({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],ci.prototype,"pointOnLineThreshold",void 0),_([T({type:gt,nonNullable:!0})],ci.prototype,"orange",void 0),_([T({type:gt,nonNullable:!0})],ci.prototype,"orangeTransparent",void 0),_([T({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],ci.prototype,"lineHintWidthReference",void 0),_([T({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],ci.prototype,"lineHintWidthTarget",void 0),_([T({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],ci.prototype,"lineHintFadedExtensions",void 0),_([T({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],ci.prototype,"parallelLineHintWidth",void 0),_([T({type:Number,nonNullable:!0,range:{min:0,max:50},json:{write:!0}})],ci.prototype,"parallelLineHintLength",void 0),_([T({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],ci.prototype,"parallelLineHintOffset",void 0),_([T({type:Number,nonNullable:!0,range:{min:0,max:46},json:{write:!0}})],ci.prototype,"rightAngleHintSize",void 0),_([T({type:Number,nonNullable:!0,range:{min:0,max:6},json:{write:!0}})],ci.prototype,"rightAngleHintOutlineSize",void 0),_([T({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],ci.prototype,"satisfiesConstraintScreenThreshold",void 0),ci=_([Y("esri.views.interactive.snapping.Settings.Defaults")],ci);const fc=new ci;var vn;(function(t){t[t.FEATURE=1]="FEATURE",t[t.SELF=2]="SELF",t[t.ALL=3]="ALL"})(vn||(vn={}));function l0(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Eye(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function v7(t,e,i,n,s){return t[0]=e,t[1]=i,t[2]=n,t[3]=s,t}function jG(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t}function GG(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t}function VG(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t[3]=e[3]*i[3],t}function HG(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t[3]=e[3]/i[3],t}function kye(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function $ye(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function Cye(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t[3]=Math.min(e[3],i[3]),t}function Iye(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t[3]=Math.max(e[3],i[3]),t}function Aye(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function BG(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t}function Oye(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t[3]=e[3]+i[3]*n,t}function UG(t,e){const i=e[0]-t[0],n=e[1]-t[1],s=e[2]-t[2],h=e[3]-t[3];return Math.sqrt(i*i+n*n+s*s+h*h)}function qG(t,e){const i=e[0]-t[0],n=e[1]-t[1],s=e[2]-t[2],h=e[3]-t[3];return i*i+n*n+s*s+h*h}function b7(t){const e=t[0],i=t[1],n=t[2],s=t[3];return Math.sqrt(e*e+i*i+n*n+s*s)}function w7(t){const e=t[0],i=t[1],n=t[2],s=t[3];return e*e+i*i+n*n+s*s}function Pye(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function Rye(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function WG(t,e){const i=e[0],n=e[1],s=e[2],h=e[3];let f=i*i+n*n+s*s+h*h;return f>0&&(f=1/Math.sqrt(f),t[0]=i*f,t[1]=n*f,t[2]=s*f,t[3]=h*f),t}function _7(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function x7(t,e,i,n){const s=e[0],h=e[1],f=e[2],m=e[3];return t[0]=s+n*(i[0]-s),t[1]=h+n*(i[1]-h),t[2]=f+n*(i[2]-f),t[3]=m+n*(i[3]-m),t}function Lye(t,e){const i=Sm;let n,s,h,f,m,v;e=e||1;do n=2*i()-1,s=2*i()-1,m=n*n+s*s;while(m>=1);do h=2*i()-1,f=2*i()-1,v=h*h+f*f;while(v>=1);const x=Math.sqrt((1-m)/v);return t[0]=e*n,t[1]=e*s,t[2]=e*h*x,t[3]=e*f*x,t}function Nye(t,e,i){const n=e[0],s=e[1],h=e[2],f=e[3];return t[0]=i[0]*n+i[4]*s+i[8]*h+i[12]*f,t[1]=i[1]*n+i[5]*s+i[9]*h+i[13]*f,t[2]=i[2]*n+i[6]*s+i[10]*h+i[14]*f,t[3]=i[3]*n+i[7]*s+i[11]*h+i[15]*f,t}function Dye(t,e,i){const n=e[0],s=e[1],h=e[2],f=i[0],m=i[1],v=i[2],x=i[3],M=x*n+m*h-v*s,$=x*s+v*n-f*h,I=x*h+f*s-m*n,P=-f*n-m*s-v*h;return t[0]=M*x+P*-f+$*-v-I*-m,t[1]=$*x+P*-m+I*-f-M*-v,t[2]=I*x+P*-v+M*-m-$*-f,t[3]=e[3],t}function zye(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function ZG(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function Km(t,e){const i=t[0],n=t[1],s=t[2],h=t[3],f=e[0],m=e[1],v=e[2],x=e[3],M=Ti();return Math.abs(i-f)<=M*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(n-m)<=M*Math.max(1,Math.abs(n),Math.abs(m))&&Math.abs(s-v)<=M*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(h-x)<=M*Math.max(1,Math.abs(h),Math.abs(x))}const Fye=GG,jye=VG,Gye=HG,Vye=UG,Hye=qG,Bye=b7,Uye=w7;Object.freeze(Object.defineProperty({__proto__:null,add:jG,ceil:kye,copy:l0,copyVec3:Eye,dist:Vye,distance:UG,div:Gye,divide:HG,dot:_7,equals:Km,exactEquals:ZG,floor:$ye,inverse:Rye,len:Bye,length:b7,lerp:x7,max:Iye,min:Cye,mul:jye,multiply:VG,negate:Pye,normalize:WG,random:Lye,round:Aye,scale:BG,scaleAndAdd:Oye,set:v7,sqrDist:Hye,sqrLen:Uye,squaredDistance:qG,squaredLength:w7,str:zye,sub:Fye,subtract:GG,transformMat4:Nye,transformQuat:Dye},Symbol.toStringTag,{value:"Module"}));function gu(){return[0,0,0,0]}function qye(t){return[t[0],t[1],t[2],t[3]]}function Qo(t,e,i,n){return[t,e,i,n]}function JG(t,e=gu()){const i=Math.min(4,t.length);for(let n=0;n<i;++n)e[n]=t[n];return e}function Wye(t,e){return new Float64Array(t,e,4)}function KG(){return gu()}function YG(){return Qo(1,1,1,1)}function XG(){return Qo(1,0,0,0)}function QG(){return Qo(0,1,0,0)}function eV(){return Qo(0,0,1,0)}function tV(){return Qo(0,0,0,1)}const Zye=KG(),Jye=YG(),Kye=XG(),Yye=QG(),Xye=eV(),Qye=tV();Object.freeze(Object.defineProperty({__proto__:null,ONES:Jye,UNIT_W:Qye,UNIT_X:Kye,UNIT_Y:Yye,UNIT_Z:Xye,ZEROS:Zye,clone:qye,create:gu,createView:Wye,fromArray:JG,fromValues:Qo,ones:YG,unitW:tV,unitX:XG,unitY:QG,unitZ:eV,zeros:KG},Symbol.toStringTag,{value:"Module"}));function eEe(t,e,i){const n=xt(t,e)/xt(t,t);return xr(i,t,n)}function Og(t,e){return xt(t,e)/ea(t)}function iV(t,e){const i=xt(t,e)/(ea(t)*ea(e));return-UO(i)}function $3(){return[1,0,0,0,1,0,0,0,1]}function eve(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]}function tve(t,e,i,n,s,h,f,m,v){return[t,e,i,n,s,h,f,m,v]}function ive(t,e){return new Float64Array(t,e,9)}const nve=$3();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:nve,clone:eve,create:$3,createView:ive,fromValues:tve},Symbol.toStringTag,{value:"Module"}));function S7(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function rve(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}function sve(t,e,i,n,s,h,f,m,v,x,M,$,I,P,L,z){return[t,e,i,n,s,h,f,m,v,x,M,$,I,P,L,z]}function ove(t,e){return new Float64Array(t,e,16)}const ave=S7();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:ave,clone:rve,create:S7,createView:ove,fromValues:sve},Symbol.toStringTag,{value:"Module"}));function Kd(){return[0,0,0,1]}function lve(t){return[t[0],t[1],t[2],t[3]]}function cve(t,e,i,n){return[t,e,i,n]}function hve(t,e){return new Float64Array(t,e,4)}const uve=Kd();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:uve,clone:lve,create:Kd,createView:hve,fromValues:cve},Symbol.toStringTag,{value:"Module"}));let N0=class td{constructor(e){this._create=e,this._items=new Array,this._itemsPtr=0}get(){return this._itemsPtr===0&&zf(()=>this._reset()),this._itemsPtr>=this._items.length&&this._items.push(this._create()),this._items[this._itemsPtr++]}_reset(){const e=2*this._itemsPtr;this._items.length>e&&(this._items.length=e),this._itemsPtr=0}static createVec2f64(){return new td(nt)}static createVec3f64(){return new td(Se)}static createVec4f64(){return new td(gu)}static createMat3f64(){return new td($3)}static createMat4f64(){return new td(S7)}static createQuatf64(){return new td(Kd)}get test(){}};const tEe=N0.createVec2f64(),kn=N0.createVec3f64(),dve=N0.createVec4f64();N0.createMat3f64();const pve=N0.createMat4f64(),iEe=N0.createQuatf64();function nEe(t){const e=t[0]*t[0]+t[4]*t[4]+t[8]*t[8],i=t[1]*t[1]+t[5]*t[5]+t[9]*t[9],n=t[2]*t[2]+t[6]*t[6]+t[10]*t[10];return Math.sqrt(Math.max(e,i,n))}function rEe(t,e){const i=Math.sqrt(e[0]*e[0]+e[4]*e[4]+e[8]*e[8]),n=Math.sqrt(e[1]*e[1]+e[5]*e[5]+e[9]*e[9]),s=Math.sqrt(e[2]*e[2]+e[6]*e[6]+e[10]*e[10]);return si(t,i,n,s),t}function T7(t,e,i){Math.abs(t[0])>Math.abs(t[1])?si(e,0,1,0):si(e,1,0,0),rn(i,t,e),rn(e,i,t),Ln(i,i),Ln(e,e)}function rr(t=rg){return[t[0],t[1],t[2],t[3]]}function sEe(t=rg[0],e=rg[1],i=rg[2],n=rg[3]){return nV(t,e,i,n,dve.get())}function Sb(t,e){return nV(e[0],e[1],e[2],e[3],t)}function oEe(t){return t}function nV(t,e,i,n,s=rr()){return s[0]=t,s[1]=e,s[2]=i,s[3]=n,s}function D0(t,e,i){const n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],s=Math.abs(n-1)>1e-5&&n>1e-12?1/Math.sqrt(n):1;return i[0]=e[0]*s,i[1]=e[1]*s,i[2]=e[2]*s,i[3]=-(i[0]*t[0]+i[1]*t[1]+i[2]*t[2]),i}function rV(t,e,i,n=rr()){const s=i[0]-e[0],h=i[1]-e[1],f=i[2]-e[2],m=t[0]-e[0],v=t[1]-e[1],x=t[2]-e[2],M=h*x-f*v,$=f*m-s*x,I=s*v-h*m,P=M*M+$*$+I*I,L=Math.abs(P-1)>1e-5&&P>1e-12?1/Math.sqrt(P):1;return n[0]=M*L,n[1]=$*L,n[2]=I*L,n[3]=-(n[0]*t[0]+n[1]*t[1]+n[2]*t[2]),n}function sV(t,e,i,n=0,s=Math.floor(i*(1/3)),h=Math.floor(i*(2/3))){if(i<3)return!1;e(o1,n);let f=s,m=!1;for(;f<i-1&&!m;)e(Ap,f),f++,m=!Wt(o1,Ap);if(!m)return!1;for(f=Math.max(f,h),m=!1;f<i&&!m;)e(ud,f),f++,di(Qy,o1,Ap),Ln(Qy,Qy),di(ev,Ap,ud),Ln(ev,ev),m=!Wt(o1,ud)&&!Wt(Ap,ud)&&Math.abs(xt(Qy,ev))<fve;return m?(rV(o1,Ap,ud,t),!0):(n!==0||s!==1||h!==2)&&sV(t,e,i,0,1,2)}function aEe(t,e,i=!0){const n=e.length/3;return sV(t,(s,h)=>si(s,e[3*h+0],e[3*h+1],e[3*h+2]),i?n-1:n)}const fve=.99619469809,o1=Se(),Ap=Se(),ud=Se(),Qy=Se(),ev=Se();function lEe(t,e,i){return e!==t&&Sb(t,e),t[3]=-xt(t,i),t}function cEe(t,e){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function hEe(t,e,i,n){return rn(ud,e,t),D0(i,ud,n)}function M7(t,e,i,n){return C3(t,e,di(kn.get(),i,e),mve,n)}function uEe(t,e,i){return e!=null&&C3(t,e.origin,e.direction,yve,i)}function dEe(t,e,i){return C3(t,e.origin,e.vector,Wa.NONE,i)}function pEe(t,e,i){return C3(t,e.origin,e.vector,Wa.CLAMP,i)}function oV(t,e){return Dh(t,e)>=0}function fEe(t,e){const i=xt(t,e.ray.direction),n=-Dh(t,e.ray.origin);if(i>-1e-6&&i<1e-6)return n>0;const s=n/i;return i>0?s<e.c1&&(e.c1=s):s>e.c0&&(e.c0=s),e.c0<=e.c1}function aV(t,e,i){const n=xr(kn.get(),t,-t[3]),s=gve(t,di(kn.get(),e,n),kn.get());return yr(i,s,n),i}function gEe(t,e,i,n){const s=t,h=kn.get(),f=kn.get();T7(s,h,f);const m=di(kn.get(),i,e),v=Og(h,m),x=Og(f,m),M=Og(s,m);return si(n,v,x,M)}function gve(t,e,i){const n=xr(kn.get(),t,xt(t,e));return di(i,e,n),i}function o6(t,e){return Math.abs(Dh(t,e))}function Dh(t,e){return xt(t,e)+t[3]}function C3(t,e,i,n,s){const h=xt(t,i);if(h===0)return!1;let f=-(xt(t,e)+t[3])/h;return n&Wa.CLAMP&&(f=qr(f,0,1)),!(!(n&Wa.INFINITE_MIN)&&f<0||!(n&Wa.INFINITE_MAX)&&f>1)&&(yr(s,e,xr(s,i,f)),!0)}const rg=[0,0,1,0];var Wa;(function(t){t[t.NONE=0]="NONE",t[t.CLAMP=1]="CLAMP",t[t.INFINITE_MIN=4]="INFINITE_MIN",t[t.INFINITE_MAX=8]="INFINITE_MAX"})(Wa||(Wa={}));const mve=Wa.INFINITE_MIN|Wa.INFINITE_MAX,yve=Wa.INFINITE_MAX;let vve=class{constructor(e){this._allocator=e,this._items=[],this._itemsPtr=0,this._grow()}get(){return this._itemsPtr===0&&zf(()=>this._reset()),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const e=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*_C);this._items.length=Math.min(e,this._items.length),this._itemsPtr=0}_grow(){for(let e=0;e<Math.max(8,Math.min(this._items.length,_C));e++)this._items.push(this._allocator())}};const _C=1024;function I3(t){return t?xC(so(t.origin),so(t.direction)):xC(Se(),Se())}function xC(t,e){return{origin:t,direction:e}}function yEe(t,e){const i=xve.get();return i.origin=t,i.direction=e,i}function vEe(t,e=I3()){return wve(t.origin,t.direction,e)}function bve(t,e,i=I3()){return Yn(i.origin,t),di(i.direction,e,t),i}function wve(t,e,i=I3()){return Yn(i.origin,t),Yn(i.direction,e),i}function bEe(t,e){const i=rn(kn.get(),Ln(kn.get(),t.direction),di(kn.get(),e,t.origin));return xt(i,i)}function _ve(t,e,i){const n=xt(t.direction,di(i,e,t.origin));return yr(i,t.origin,xr(i,t.direction,n)),i}const xve=new vve(()=>I3()),Sve=E7();function E7(){return gu()}const lV=Km,Tve=Km;function cV(t,e){return l0(e,t)}function hV(t,e){return Qo(t[0],t[1],t[2],e)}function Mve(t){return t}function Eve(t){t[0]=t[1]=t[2]=t[3]=0}function kve(t,e){return t[0]=t[1]=t[2]=0,t[3]=e,t}function A3(t){return t[3]}function $ve(t){return t}function Cve(t,e,i,n){return Qo(t,e,i,n)}function Ive(t,e,i){return t!==i&&(i[0]=t[0],i[1]=t[1],i[2]=t[2]),i[3]=t[3]+e,i}function Ave(t,e,i){return t!==i&&cV(t,i),i}function O3(t,e,i){if(e==null||!dV(t,e,iw))return!1;let{t0:n,t1:s}=iw;if((n<0||s<n&&s>0)&&(n=s),n<0)return!1;if(i){const{origin:h,direction:f}=e;i[0]=h[0]+f[0]*n,i[1]=h[1]+f[1]*n,i[2]=h[2]+f[2]*n}return!0}function uV(t,e,i){const n=bve(e,i);if(!dV(t,n,iw))return[];const{origin:s,direction:h}=n,{t0:f,t1:m}=iw,v=x=>{const M=Se();return yn(M,s,h,x),P3(t,M,M)};return Math.abs(f-m)<Ti()?[v(f)]:[v(f),v(m)]}const iw={t0:0,t1:0};function dV(t,e,i){const{origin:n,direction:s}=e,h=Ove;h[0]=n[0]-t[0],h[1]=n[1]-t[1],h[2]=n[2]-t[2];const f=s[0]*s[0]+s[1]*s[1]+s[2]*s[2];if(f===0)return!1;const m=2*(s[0]*h[0]+s[1]*h[1]+s[2]*h[2]),v=m*m-4*f*(h[0]*h[0]+h[1]*h[1]+h[2]*h[2]-t[3]*t[3]);if(v<0)return!1;const x=Math.sqrt(v);return i.t0=(-m-x)/(2*f),i.t1=(-m+x)/(2*f),!0}const Ove=Se();function Pve(t,e){return O3(t,e,null)}function Rve(t,e,i){if(O3(t,e,i))return i;const n=pV(t,e,kn.get());return yr(i,e.origin,xr(kn.get(),e.direction,lu(e.origin,n)/ea(e.direction))),i}function pV(t,e,i){const n=kn.get(),s=pve.get();rn(n,e.origin,e.direction);const h=A3(t);rn(i,n,e.origin),xr(i,i,1/ea(i)*h);const f=fV(t,e.origin),m=iV(e.origin,i);return YL(s,m+f,n),VO(i,i,s),i}function Lve(t,e,i){return O3(t,e,i)?i:(_ve(e,t,i),P3(t,i,i))}function P3(t,e,i){const n=di(kn.get(),e,t),s=xr(kn.get(),n,t[3]/ea(n));return yr(i,s,t)}function Nve(t,e){const i=di(kn.get(),e,t),n=Mw(i),s=t[3]*t[3];return Math.sqrt(Math.abs(n-s))}function fV(t,e){const i=di(kn.get(),e,t),n=ea(i),s=A3(t),h=s+Math.abs(s-n);return UO(s/h)}const o5=Se();function gV(t,e,i,n){const s=di(o5,e,t);switch(i){case Zo.X:{const h=e8(s,o5)[2];return si(n,-Math.sin(h),Math.cos(h),0)}case Zo.Y:{const h=e8(s,o5),f=h[1],m=h[2],v=Math.sin(f);return si(n,-v*Math.cos(m),-v*Math.sin(m),Math.cos(f))}case Zo.Z:return Ln(n,s);default:return}}function mV(t,e){const i=di(a6,e,t);return ea(i)-t[3]}function Dve(t,e,i,n){const s=mV(t,e),h=gV(t,e,Zo.Z,a6),f=xr(a6,h,i-s);return yr(n,e,f)}function zve(t,e){const i=Fd(t,e),n=A3(t);return i<=n*n}function Fve(t,e,i=gu()){const n=lu(t,e),s=t[3],h=e[3];return n+h<s?(l0(i,t),i):n+s<h?(l0(i,e),i):(Tm(i,t,e,(n+h-s)/(2*n)),i[3]=(n+s+h)/2,i)}const a6=Se(),jve=E7();Object.freeze(Object.defineProperty({__proto__:null,NullSphere:Sve,altitudeAt:mV,angleToSilhouette:fV,axisAt:gV,clear:Eve,closestPoint:Lve,closestPointOnSilhouette:pV,containsPoint:zve,copy:cV,create:E7,distanceToSilhouette:Nve,elevate:Ive,equals:Tve,exactEquals:lV,fromCenterAndRadius:hV,fromRadius:kve,fromValues:Cve,getCenter:$ve,getRadius:A3,intersectLine:uV,intersectRay:O3,intersectRayClosestSilhouette:Rve,intersectsRay:Pve,projectPoint:P3,setAltitudeAt:Dve,setExtent:Ave,tmpSphere:jve,union:Fve,wrap:Mve},Symbol.toStringTag,{value:"Module"}));function a5(t,e){return t[0]*e[1]-t[1]*e[0]}function Gve(t,e,i){const n=ll(i,e)/tl(i);return E0(t,i,n)}function l6(t,e,i,n,s=i){return Mi(Nd,n,i),Mi(nw,e,s),Gve(c0,nw,Nd),_T(t,s,c0)}function Vve(t,e,i,n){Mi(Nd,e,i);const s=n/Qf(Nd);return no(t,i,Nd,s)}function Hve(t,e){const i=t.start,n=t.end,s=e.start,h=e.end,f=Mi(Nd,n,i),m=Mi(yV,h,s),v=a5(f,m);if(Math.abs(v)<=Uve)return[];const x=Mi(nw,i,s),M=a5(m,x)/v,$=a5(f,x)/v;if(M>=0){if($>=0||e.type===ri.LINE)return[no(c0,i,f,M)]}else if(t.type===ri.LINE&&($>=0||e.type===ri.LINE))return[no(c0,i,f,M)];return[]}function Bve(t,e,i){const n=[],s=Mi(Nd,t.end,t.start),h=Mi(yV,t.start,e),f=tl(s),m=2*ll(s,h),v=m*m-4*f*(tl(h)-i*i);if(v===0){const x=-m/(2*f);(t.type===ri.LINE||x>=0)&&n.push(no(c0,t.start,s,x))}else if(v>0){const x=Math.sqrt(v),M=(-m+x)/(2*f);(t.type===ri.LINE||M>=0)&&n.push(no(c0,t.start,s,M));const $=(-m-x)/(2*f);(t.type===ri.LINE||$>=0)&&n.push(no(nw,t.start,s,$))}return n}var ri;(function(t){t[t.RAY=0]="RAY",t[t.LINE=1]="LINE"})(ri||(ri={}));const Uve=1e-6,Nd=nt(),yV=nt(),nw=nt(),c0=nt();function k7({start:t,end:e,type:i},n,s){const h=[],f=Mi(Ym,e,t),m=Mi(R3,t,n),v=tl(f),x=2*ll(f,m),M=x*x-4*v*(tl(m)-s*s);if(M===0){const $=-x/(2*v);(i===xs.PLANE||$>=0)&&h.push(no(nt(),t,f,$))}else if(M>0){const $=Math.sqrt(M),I=(-x+$)/(2*v);(i===xs.PLANE||I>=0)&&h.push(no(nt(),t,f,I));const P=(-x-$)/(2*v);(i===xs.PLANE||P>=0)&&h.push(no(nt(),t,f,P))}return h}function vV(t,e){const i=t.start,n=t.end,s=Mi(Ym,n,i),h=si(N3,-s[1],s[0],0),f=e.start,m=e.end,v=Hr(I7,m,f),x=xt(v,h),M=si(MV,i[0],i[1],0),$=Hr(EV,M,f),I=xt($,h),P=Ti();if(Math.abs(x)<P)return[];const L=yn(kV,f,v,I/x);if(e.type===ri.RAY){const z=Hr(c6,L,f);if(xt(z,v)<-P)return[]}if(t.type===xs.HALF_PLANE){const z=o3(R3,L,i);if(ll(z,s)<-P)return[]}return[so(L)]}function qve(t,e){return Zve(rw(A7,e[2],t),e)}function bV(t,e){return SV(rw(A7,0,t),rw(Xve,0,e)).map(([n,s])=>ws(n,s))}function wV(t,e,i){return $7(t,rw(A7,t[2],e),i)}function _V(t,e,i,n=Se()){const s=Mi(Ym,t,e),h=Qf(s);return no(n,e,s,h===0?1:i/h),n[2]=t[2],n}function $7(t,{start:e,end:i,type:n},s=Se()){const h=Hr(L3,t,e),f=Hr(N3,i,e),m=xt(h,f)/xt(f,f);return yn(s,e,f,n===ri.RAY?Math.max(m,0):m)}const Wve=(()=>{const t=Se(),e=Se(),i=Se();return({start:n,end:s},{center:h,radius:f,normal:m,slicePlane:v})=>{const x=D0(h,m,Yve);if(ni(o6(x,n),0)&&ni(o6(x,s),0)){T7(m,t,e);const $=(L,z)=>(di(i,z,h),en(L,xt(i,t),xt(i,e)),L),I=Bve({start:$(Ym,n),end:$(R3,s),type:ri.LINE},BD,f),P=[];for(const[L,z]of I){const F=Yn(Se(),h);yn(F,F,t,L),yn(F,F,e,z),v&&!Hh(v,F)||P.push(F)}return P}const M=Se();return M7(x,n,s,M)?!ni(lu(M,h),f)||v&&!Hh(v,M)?[]:[M]:[]}})();function xV({start:t,end:e,type:i},n,s){const h=[],f=di(L3,e,t),m=Mi(R3,t,n),v=tl(f),x=2*ll(f,m),M=x*x-4*v*(tl(m)-s*s);if(M===0){const $=-x/(2*v);(i===ri.LINE||$>=0)&&h.push(yn(Se(),t,f,$))}else if(M>0){const $=Math.sqrt(M),I=(-x+$)/(2*v);(i===ri.LINE||I>=0)&&h.push(yn(Se(),t,f,I));const P=(-x-$)/(2*v);(i===ri.LINE||P>=0)&&h.push(yn(Se(),t,f,P))}return h}function SV(t,e){const i=t.start,n=t.end,s=e.start,h=e.end,f=Hr(L3,n,i),m=Hr(N3,h,s),v=Hr(I7,s,i),x=rn(MV,f,m);if(!ni(xt(v,x),0))return[];const M=i2(x);if(ni(M,0))return[];const $=rn(EV,v,m),I=xt($,x)/M,P=yn(kV,i,f,I);if(t.type===ri.RAY){const L=Hr(c6,P,i);if(xt(f,L)<-Ti())return[]}if(e.type===ri.RAY){const L=Hr(c6,P,s);if(xt(m,L)<-Ti())return[]}return[so(P)]}function Zve({start:t,end:e,type:i},n){const s=Hr(L3,n,t),h=Hr(N3,e,t),f=rn(I7,h,s),m=i2(f)/i2(h),v=Ti();if(m<v)switch(i){case ri.LINE:return[so(n)];case ri.RAY:return xt(h,s)<-v?[]:[so(n)]}return[]}function C7(t,e,i,n){const[s,h]=t,[f,m]=i,v=f-s,x=m-h,M=v*v+x*x,$=Math.sqrt(M);if($>e+n)return[];if($<Math.abs(e-n))return[];if(ni($,0)&&ni(e,n))return[];const I=(e*e-n*n+M)/(2*$),P=Math.sqrt(e*e-I*I),L=P*x/$,z=P*v/$,[F,U]=s3(Ym,t,i,I/$);return ni(L,z)?[ws(F,U)]:[ws(F+L,U-z),ws(F-L,U+z)]}function rw(t,e,{start:i,end:n,type:s}){return si(t.start,i[0],i[1],e),si(t.end,n[0],n[1],e),t.type=Kve[s],t}function TV(t,e){return ni(t[2],e[2])}function ni(t,e){return gs(Math.abs(t-e),0,Ti())}function Jve(t,e){return e.filter(i=>Hh(t,i))}function Hh(t,e){return oV(t,e)}var xs;(function(t){t[t.PLANE=0]="PLANE",t[t.HALF_PLANE=1]="HALF_PLANE"})(xs||(xs={}));const Kve={[xs.PLANE]:ri.LINE,[xs.HALF_PLANE]:ri.RAY},Ym=nt(),R3=nt(),L3=Se(),N3=Se(),I7=Se(),MV=Se(),EV=Se(),kV=Se(),c6=Se(),Yve=rr(),A7={start:Se(),end:Se(),type:ri.LINE},Xve={start:Se(),end:Se(),type:ri.LINE};class bo{intersect(e){return Hl(this,e)}closestPoints(e){return[this.closestTo(e)]}}class cp extends bo{constructor(e){super(),this.point=e}equals(e){return this===e||qs(e)&&Wt(this.point,e.point)}closestTo(){return a0(this.point)}}class O7 extends bo{constructor(e,i,n){super(),this.start=e,this.end=i,this.lineLike={start:e,end:i,type:n}}equals(e){return this===e||La(e)&&this.lineLike.type===e.lineLike.type&&Wt(this.start,e.start)&&Wt(this.end,e.end)}closestTo(e){const i=_n();return $7(e,this.lineLike,i),i}}class P7 extends O7{constructor(e,i){super(e,i,ri.LINE)}}class Qve extends O7{constructor(e,i){super(e,i,ri.RAY)}}class $V extends bo{constructor(e){super(),this.constraints=e}equals(e){return this===e||h6(e)&&Za(this.constraints,e.constraints,(i,n)=>i.equals(n))}closestTo(e){let i,n=1/0;for(const s of this.constraints){const h=s.closestTo(e),f=Fd(e,h);f<n&&(n=f,i=h)}return a0(i??e)}closestPoints(e){return this.constraints.flatMap(i=>i===this?[]:i.closestPoints(e))}}class R7 extends bo{constructor(e,i){super(),this.center=e,this.radius=i}equals(e){return this===e||Da(e)&&this.center[0]===e.center[0]&&this.center[1]===e.center[1]&&this.radius===e.radius}closestTo(e){const i=_n();return _V(e,this.center,this.radius,i),i}}class L7 extends bo{constructor(e,i){super(),this.center=e,this.radius=i}equals(e){return this===e||Ul(e)&&Wt(this.center,e.center)&&this.radius===e.radius}closestTo(e){const i=_n();return _V(e,this.center,this.radius,i),i[2]=this.center[2],i}asCircle(){return new N7(a0(this.center),this.radius,aa(0,0,1))}}class N7 extends bo{constructor(e,i,n,s=void 0){super(),this.center=e,this.radius=i,this.normal=n,this.slicePlane=s}equals(e){return this===e||yh(e)&&Wt(this.center,e.center)&&Wt(this.normal,e.normal)&&this.radius===e.radius}closestTo(e){const{center:i,radius:n}=this;aV(this.getPlane(ebe),e,l5);const s=Hr(l5,l5,i),h=Mw(s);if(ni(h,0))return a0(e);const f=n/Math.sqrt(h),m=_n();yn(m,i,s,f);const{slicePlane:v}=this;if(v&&!Hh(v,m)){const x=j7(v,this);return(x==null?void 0:x.closestTo(e))??a0(e)}return m}getPlane(e=rr()){return D0(this.center,this.normal,e)}}const l5=Se(),ebe=rr();class CV extends bo{constructor(e){super(),this.z=e}equals(e){return this===e||Bl(e)&&this.z===e.z}closestTo(e){return aa(e[0],e[1],this.z)}getPlane(e=rr()){return si(SC,0,0,this.z),D0(SC,FO,e)}}const SC=Se();class D7 extends bo{constructor(e,i,n){super(),this.start=e,this.end=i,this.planeLike={start:e,end:i,type:n}}equals(e){return this===e||Na(e)&&this.planeLike.type===e.planeLike.type&&Wt(this.start,e.start)&&Wt(this.end,e.end)}closestTo(e){const i=_n();return wV(e,this.planeLike,i),i}closestEndTo(e){const{start:i,end:n}=this.planeLike;return Math.sign(ll(Mi(tbe,n,i),Mi(ibe,e,i)))>0?this.end:this.start}getPlane(e=rr()){const i=Yn(TC,this.end);return i[2]+=1,rV(this.start,this.end,i,e)}getSlicePlane(e=rr()){const{start:i,end:n,type:s}=this.planeLike;if(s===xs.PLANE)return;const h=si(TC,i[0],i[1],0),f=si(MC,n[0],n[1],0),m=di(MC,f,h);return D0(h,m,e),e}}const tbe=nt(),ibe=nt(),TC=Se(),MC=Se();class z7 extends D7{constructor(e,i){super(e,i,xs.HALF_PLANE)}}class IV extends D7{constructor(e,i){super(e,i,xs.PLANE)}}class nbe extends bo{constructor(e,i){super(),this.sphere=hV(e,i)}equals(e){return this===e||ql(e)&&lV(this.sphere,e.sphere)}closestTo(e){const i=_n();return P3(this.sphere,e,i),i}get center(){return this.sphere}get radius(){return this.sphere[3]}}class AV extends bo{constructor(e,i,n){super(),this.start=e,this.end=i,this.getZ=n,this.planeLike={start:e,end:i,type:xs.PLANE}}equals(e){return this===e||sw(e)&&Wt(this.start,e.start)&&Wt(this.end,e.end)&&this.getZ===e.getZ}closestTo(e){return abe(this,e)}addIfOnTheGround(e,i){for(const n of i){const s=this.getZ(n[0],n[1])??0;ni(n[2],s)&&(n[2]=s,e.push(n))}}}class F7 extends bo{constructor(e,i,n){super(),this._x=e,this._y=i,this._z=n}equals(e){return this===e||Sbe(e)&&this._x===e._x&&this._y===e._y&&this._z===e._z}closestTo([e,i,n]){return FG(this._x??e,this._y??i,this._z??n)}}class OV extends bo{constructor(e,i,n,s,h){super(),this._origin=e,this._spatialReference=i,this._distanceMeters=n,this._elevationMeters=s,this._directionDegrees=h}equals(e){return this===e||xbe(e)&&x4(this._origin,e._origin)&&this._spatialReference===e._spatialReference&&this._distanceMeters===e._distanceMeters&&this._elevationMeters===e._elevationMeters&&this._directionDegrees===e._directionDegrees}closestTo([e,i,n]){return en(a1,e,i),x4(a1,this._origin)||this._applyDirectionAndDistance(a1),FG(a1[0],a1[1],this._elevationMeters??n)}_applyDirectionAndDistance(e){if(this._directionDegrees!=null&&this._distanceMeters!=null)Gh(e,this._origin,this._directionDegrees,this._distanceMeters,this._spatialReference);else if(this._directionDegrees!=null)sbe(e,this._origin,this._directionDegrees,e,this._spatialReference);else if(this._distanceMeters!=null){const{azimuth:i}=R0(rbe,this._origin,e,this._spatialReference);Gh(e,this._origin,i??0,this._distanceMeters,this._spatialReference)}}}const a1=[0,0],rbe=new P0;function sbe(t,e,i,n,s){let{azimuth:h,distance:f}=R0(obe,e,n,s);h??(h=0);let m=f*Math.cos((h-i)*gr);m=Math.max(0,m),Gh(t,e,i,m,s)}const obe=new P0;function abe(t,e){const i=_n();return wV(e,t.planeLike,i),i[2]=t.getZ(i[0],i[1])??RV,i}function Hl(t,e){if(h6(t)){const i=[];for(const n of t.constraints){const s=n.intersect(e);s&&i.push(s)}return Xm(i)}if(h6(e))return Hl(e,t);if(sw(t))return EC(t,e);if(sw(e))return EC(e,t);if(qs(t)){const{point:i}=t;if(qs(e))return Wt(i,e.point)?t:void 0;const n=e.closestTo(i);return Ug(n,i)?t:void 0}if(La(t)){if(qs(e))return Hl(e,t);if(La(e))return Wo(SV(t.lineLike,e.lineLike));if(Bl(e))return lbe(t,e);if(Na(e))return Wo(vV(e.planeLike,t.lineLike));if(Da(e))return Wo(xV(t.lineLike,e.center,e.radius));if(yh(e))return Wo(Wve(t.lineLike,e));if(Ul(e))return cbe(t,e);if(ql(e))return hbe(t,e)}else if(Bl(t)){if(qs(e)||La(e))return Hl(e,t);if(Bl(e))return ube(t,e);if(Na(e))return dbe(t,e);if(Da(e))return pbe(t,e);if(yh(e))return gbe(t,e);if(Ul(e))return fbe(t,e);if(ql(e))return mbe(t,e)}else if(Na(t)){if(qs(e)||La(e)||Bl(e))return Hl(e,t);if(Na(e))return c5(bV(t.planeLike,e.planeLike));if(Da(e))return c5(k7(t.planeLike,e.center,e.radius));if(yh(e))return vbe(t,e);if(Ul(e))return ybe(t,e);if(ql(e))return bbe(t,e)}else if(Da(t)){if(qs(e)||La(e)||Bl(e)||Na(e))return Hl(e,t);if(Da(e))return c5(C7(t.center,t.radius,e.center,e.radius));if(yh(e))return void 0;if(Ul(e))return wbe(t,e);if(ql(e))return void 0}else if(yh(t)){if(qs(e)||La(e)||Bl(e)||Na(e)||Da(e))return Hl(e,t);if(yh(e))return void 0;if(Ul(e))return e.asCircle(),void 0;if(ql(e))return void 0}else if(Ul(t)){if(qs(e)||La(e)||Bl(e)||Na(e)||Da(e)||yh(e))return Hl(e,t);if(Ul(e))return _be(e,t);if(ql(e))return void 0}else if(ql(t)){if(qs(e)||La(e)||Bl(e)||Na(e)||Da(e)||Ul(e))return Hl(e,t);if(ql(e))return void 0}}const lbe=(()=>{const t=rr();return(e,i)=>{const{start:n,end:s}=e;if(TV(n,s)&&ni(n[2],i.z))return e;const h=_n();return M7(i.getPlane(t),n,s,h)?new cp(h):void 0}})();function cbe({lineLike:t},{center:e,radius:i}){const n=e[2];return Wo(xV(t,e,i).filter(s=>ni(s[2],n)))}function hbe({lineLike:t},{sphere:e}){return Wo(uV(e,t.start,t.end))}const j7=(()=>{const t=gu(),e=Se(),i=Se();return(n,s,h)=>{const{normal:f,center:m,radius:v}=s;T7(f,e,i);const x=n,M=v*xt(x,e),$=v*xt(x,i);v7(t,m[0],m[1],m[2],1);const I=_7(n,t),P=Math.hypot(M,$),L=ni(P,0);if(ni(o6(n,m),0)){if(L)return s;if(ni(v,0))return!h||Hh(h,m)?new cp(a0(m)):void 0;rn(e,x,f),Ln(e,e);const ie=new Array,le=so(m);yn(le,le,e,v),h&&!Hh(h,le)||ie.push(le);const de=so(m);return yn(de,de,e,-v),h&&!Hh(h,de)||ie.push(de),Wo(ie)}if(L)return;const z=-I/P;if(Math.abs(z)>1||ni(z,1))return;const F=Math.atan(M/$),U=gS(z)-F,W=Math.PI-U,K=new Array,J=Se();yn(J,m,e,v*Math.cos(U)),yn(J,J,i,v*Math.sin(U)),K.push(J);const te=Se();return yn(te,m,e,v*Math.cos(W)),yn(te,te,i,v*Math.sin(W)),K.push(te),Wo(h?Jve(h,K):K)}})();function ube(t,e){return ni(t.z,e.z)?t:void 0}function dbe({z:t},{planeLike:e}){const[i,n]=e.start,[s,h]=e.end,f=aa(i,n,t),m=aa(s,h,t);return e.type===xs.PLANE?new P7(f,m):new Qve(f,m)}function pbe(t,e){const[i,n]=e.center;return new L7(aa(i,n,t.z),e.radius)}function fbe(t,e){return ni(e.center[2],t.z)?e:void 0}const gbe=(()=>{const t=rr();return(e,i)=>j7(e.getPlane(t),i,i.slicePlane)})();function mbe(t,{center:e,radius:i}){const n=Math.abs(e[2]-t.z);if(n>i&&!ni(n,i))return;const s=aa(e[0],e[1],t.z),h=Math.sqrt(i**2-n**2);return ni(h,0)?void 0:new L7(s,h)}const ybe=(()=>{const t=rr();return(e,{center:i,radius:n})=>{const s=k7(e.planeLike,i,n),h=i[2];e.getSlicePlane(t);const f=new Array;for(const[m,v]of s){const x=[m,v,h];Hh(t,x)&&f.push(x)}return Wo(f)}})(),vbe=(()=>{const t=rr(),e=rr();return(i,n)=>j7(i.getPlane(t),n,i.getSlicePlane(e))})(),bbe=(()=>{const t=rr();return(e,{center:i,radius:n})=>{const s=e.getPlane(t),h=Dh(s,i),f=Math.abs(h);if(f>n&&!ni(f,n))return;const m=Math.sqrt(n**2-h**2);if(ni(m,0)){const M=_n();return aV(s,i,M),new cp(M)}const v=_n(),x=so(s);return yn(v,i,x,h),new N7(v,m,x,e.getSlicePlane())}})();function wbe(t,e){const i=sa(t.center,e.center);return ni(i,0)&&ni(t.radius,e.radius)?e:PV(C7(t.center,t.radius,e.center,e.radius),e.center[2])}function _be(t,e){if(!TV(t.center,e.center))return;const i=sa(t.center,e.center);return ni(i,0)&&ni(t.radius,e.radius)?t:PV(C7(t.center,t.radius,e.center,e.radius),t.center[2])}function EC(t,e){const{planeLike:i,getZ:n}=t,s=new Array;if(qs(e))t.addIfOnTheGround(s,qve(i,e.point));else if(La(e))t.addIfOnTheGround(s,vV(i,e.lineLike));else if(Da(e))for(const[h,f]of k7(i,e.center,e.radius)){const m=n(h,f);m!=null&&s.push(wr(h,f,m))}else if(Na(e)||sw(e))for(const[h,f]of bV(i,e.planeLike)){const m=n(h,f)??RV;s.push(wr(h,f,m))}return Wo(s)}function c5(t){return Xm(t.map(([e,i])=>{const n=aa(e,i,0),s=aa(e,i,1);return new P7(n,s)}))}function Wo(t){return Xm(t.map(e=>e?new cp(e):void 0))}function PV(t,e){return Wo(t.map(([i,n])=>[i,n,e]))}function Xm(t){if(t.length!==0)return t.length===1?t[0]??void 0:new $V(t.filter(ji))}function h6(t){return t instanceof $V}function qs(t){return t instanceof cp}function La(t){return t instanceof O7}function Bl(t){return t instanceof CV}function Na(t){return t instanceof D7}function Da(t){return t instanceof R7}function Ul(t){return t instanceof L7}function yh(t){return t instanceof N7}function ql(t){return t instanceof nbe}function sw(t){return t instanceof AV}function xbe(t){return t instanceof OV}function Sbe(t){return t instanceof F7}const RV=0;var u6;const h5=new an({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),u5=new an({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Aa=u6=class extends Fe{constructor(t){super(t),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(t={}){const{where:e,geometry:i,spatialRelationship:n,timeExtent:s,objectIds:h,units:f,distance:m}=this;return new k2({geometry:_e(i),objectIds:_e(h),spatialRelationship:n,timeExtent:_e(s),where:e,units:f,distance:m,...t})}clone(){const{where:t,geometry:e,spatialRelationship:i,timeExtent:n,objectIds:s,units:h,distance:f}=this;return new u6({geometry:_e(e),objectIds:_e(s),spatialRelationship:i,timeExtent:_e(n),where:t,units:h,distance:f})}};_([T({type:String,json:{write:!0}})],Aa.prototype,"where",void 0),_([T({types:km,json:{write:!0}})],Aa.prototype,"geometry",void 0),_([T({type:h5.apiValues,json:{name:"spatialRel",read:{reader:h5.read},write:{allowNull:!1,writer:h5.write,overridePolicy(){return{enabled:this.geometry!=null}}}}})],Aa.prototype,"spatialRelationship",void 0),_([T({type:Number,json:{write:{overridePolicy(t){return{enabled:t!=null&&this.geometry!=null}}}}})],Aa.prototype,"distance",void 0),_([T({type:[Number],json:{write:!0}})],Aa.prototype,"objectIds",void 0),_([T({type:u5.apiValues,json:{read:u5.read,write:{writer:u5.write,overridePolicy(t){return{enabled:t!=null&&this.geometry!=null}}}}})],Aa.prototype,"units",void 0),_([T({type:Ww,json:{write:!0}})],Aa.prototype,"timeExtent",void 0),Aa=u6=_([Y("esri.layers.support.FeatureFilter")],Aa);const Tb=Aa;function Tbe(t){var i;const e=t.layer;return"floorInfo"in e&&((i=e.floorInfo)!=null&&i.floorField)&&"floors"in t.view?LV(t.view.floors,e.floorInfo.floorField):null}function wEe(t,e){var i;return"floorInfo"in e&&((i=e.floorInfo)!=null&&i.floorField)?LV(t,e.floorInfo.floorField):null}function LV(t,e){if(!(t!=null&&t.length))return null;const i=t.filter(n=>n!=="").map(n=>`'${n}'`);return i.push("''"),`${e} IN (${i.join(",")}) OR ${e} IS NULL`}function hp(t,e){const i=t.x-e.x,n=t.y-e.y;return i*i+n*n}function Mbe(t,e){return Math.sqrt(hp(t,e))}function G7(t,e){e.sort((i,n)=>Fd(i.targetPoint,t)-Fd(n.targetPoint,t))}var ao;function _Ee({point:t,distance:e,returnEdge:i,vertexMode:n,coordinateHelper:{spatialReference:s},filter:h},f,m){return m=m!=null?m.clone():new k2({where:"1=1"}),h&&(m.geometry=h.geometry,m.distance=h.distance,m.spatialRelationship=h.spatialRelationship,m.where=iT(m.where,h.where),m.timeExtent=Rne(m.timeExtent,h.timeExtent),m.objectIds=Ebe(m.objectIds,h.objectIds)),{point:pl(t[0],t[1],t[2],s.toJSON()),mode:f,distance:e,returnEdge:i,vertexMode:n,query:m.toJSON()}}function Ebe(t,e){return t||e?e?t?Array.from($A(new Set(t),new Set(e))):e:t:null}function ow(t,e,i){return{left:nn(t.leftVertex.pos,e,i),right:nn(t.rightVertex.pos,e,i)}}function xEe(t){return t.createQuery()}(function(t){t[t.TARGET=0]="TARGET",t[t.REFERENCE=1]="REFERENCE",t[t.REFERENCE_EXTENSION=2]="REFERENCE_EXTENSION"})(ao||(ao={}));const kC=Symbol("snapping-toggle");function NV(t,e=()=>{}){const i=Ee(()=>({view:t.view,snappingOptions:t.snappingOptions}),({view:n,snappingOptions:s})=>{if(t.removeHandles(kC),!n||!s)return;const h=Ut.TOOL,f=[n.on("key-down",m=>{m.key!==wC.toggle||m.repeat||(s.enabledToggled=!0,e())},h),n.on("key-up",m=>{m.key===wC.toggle&&(s.enabledToggled=!1,e())},h),n.on("pointer-move",m=>{const v=m.native.ctrlKey;s.enabledToggled!==v&&(s.enabledToggled=v,e())},h)];t.addHandles(f,kC)},xi);t.addHandles(i)}function $C(t){var e;return F4(t)&&"utilityNetworks"in t&&!!((e=t.utilityNetworks)!=null&&e.length)}let ls=class extends Re{set attributeRulesEnabled(e){this._set("attributeRulesEnabled",e),e&&this.loadRules()}get layerView(){var e,i;return(i=(e=this.view)==null?void 0:e.allLayerViews)==null?void 0:i.find(n=>n.layer===this.layer)}get valid(){const{_valid:e,snappingSource:i,layer:n}=this;return!(!i||!n)&&e}get subtypeFilter(){var h,f;const{layer:e,snappingSource:i}=this;if(!_1(e)||!((h=e.subtypes)!=null&&h.length)||!i)return{mode:"not-in-use",filter:null};const n=i.layerSource.sublayerSources.filter(m=>{var v;return m.enabled&&m.layer.visible&&ZF((v=this.view)==null?void 0:v.scale,m.layer.effectiveScaleRange.minScale,m.layer.effectiveScaleRange.maxScale)}).map(m=>m.layer.subtypeCode);if(!n.length)return{mode:"none-visible",filter:null};if(n.length===e.subtypes.length)return{mode:"all-visible",filter:null};const s=((f=e.fieldsIndex.get(e.subtypeField))==null?void 0:f.name)??e.subtypeField;return n.length===1?{mode:"in-use",filter:`${s} = ${n.getItemAt(0)}`}:{mode:"in-use",filter:`${s} IN (${n.join(", ")})`}}get floorFilter(){const{view:e,layer:i}=this;return e&&i?Tbe({view:e,layer:i}):null}constructor(e){super(e),this.layer=null,this.snappingSource=null,this.rulesTable=null,this._valid=null}initialize(){if(!this.snappingSource||!this.layer)return void(this._valid=!1);const{layer:e,snappingSource:i}=this;if("refresh"in e){const n=e;this.addHandles(n.on("refresh",()=>i.refresh()))}this.loadRules(),this.addHandles([Ee(()=>i.updating,n=>i.layerSource.updating=n,xi),Ee(()=>i.availability,n=>i.layerSource.availability=n,xi)])}getFetchCandidatesParameters(e,i,n){var I,P,L,z,F;if(!this.valid)return[];const{layer:s,layerView:h,floorFilter:f,rulesTable:m,subtypeFilter:v}=this,x={distance:n,mode:((I=this.view)==null?void 0:I.type)??"2d",point:e,coordinateHelper:i.coordinateHelper,...kbe(),filter:h&&"filter"in h?h.filter:null};if(f&&(x.filter=d5(x.filter,f)),v.mode!=="not-in-use"&&v.mode!=="all-visible"){if(v.mode==="none-visible")return[];x.filter?x.filter.where=iT(x.filter.where,v.mode):x.filter=new Tb({where:v.filter})}if(!this.attributeRulesEnabled)return[x];const M=i.feature,$=((P=M==null?void 0:M.sourceLayer)==null?void 0:P.type)==="subtype-sublayer"?M.sourceLayer.parent:M==null?void 0:M.sourceLayer;if(m&&M&&$C((L=this.view)==null?void 0:L.map)&&(Vv(s)||_1(s))&&s.layerId&&(Vv($)||_1($))&&((z=this.view.map.utilityNetworks)!=null&&z.find(U=>U.isUtilityLayer($)))){if(m.loadStatus!=="loaded")return[];const U=[],W=s.layerId,K=(F=m.getFeatureSQL($,M))==null?void 0:F[W];if(!K)return[];const J=K.anyVertex;let te=K.endVertex;return te&&J&&te===J&&(te=""),te&&U.push({...x,returnEdge:!1,vertexMode:"ends",filter:d5(x.filter,te)}),J&&U.push({...x,returnEdge:!1,vertexMode:"all",filter:d5(x.filter,J)}),U}return[x]}async loadRules(){var s,h,f;this._valid=null;const{layer:e,view:i,attributeRulesEnabled:n}=this;if(n&&e&&i&&$C(i==null?void 0:i.map)&&(Vv(e)||_1(e)))try{await Promise.allSettled(((s=i.map.utilityNetworks)==null?void 0:s.map(v=>v.load()))??[]);const m=(h=i.map.utilityNetworks)==null?void 0:h.find(v=>v.isUtilityLayer(e));m&&(this.rulesTable=await m.getRulesTable(),await((f=this.rulesTable)==null?void 0:f.load()))}catch{return this._valid=!1,void Ce.getLogger("esri.views.interactive.snapping.FeatureSnappingSourceInfo").error("Failed to load rules table for snapping source",e.title)}this._valid=!0}remove(){this.destroy()}destroy(){var e;(e=this.snappingSource)==null||e.destroy()}};function kbe(){return{returnEdge:!0,vertexMode:"all"}}function d5(t,e){return t==null?new Tb({where:e}):t.where?new Tb({where:iT(t.where,e)}):new Tb({where:e})}_([T({constructOnly:!0})],ls.prototype,"layer",void 0),_([T({constructOnly:!0})],ls.prototype,"snappingSource",void 0),_([T({constructOnly:!0})],ls.prototype,"view",void 0),_([T({value:!1})],ls.prototype,"attributeRulesEnabled",null),_([T()],ls.prototype,"layerView",null),_([T()],ls.prototype,"rulesTable",void 0),_([T()],ls.prototype,"valid",null),_([T()],ls.prototype,"subtypeFilter",null),_([T()],ls.prototype,"floorFilter",null),_([T()],ls.prototype,"_valid",void 0),ls=_([Y("esri.views.interactive.snapping.FeatureSnappingSourceInfo")],ls);let z0=class{constructor(e,i,n,s){this.targetPoint=e,this.constraint=i,this.isDraped=n,this.domain=s}},V7=class extends z0{constructor({targetPoint:e,objectId:i,constraint:n,isDraped:s}){super(e,n,s,vn.FEATURE),this.objectId=i}},D3=class{constructor(e,i){this.isDraped=e,this.domain=i}},sl=class DV extends D3{constructor(e,i,n,s,h=vn.ALL,f=!0,m=!0){super(s,h),this.type=e,this.lineStart=i,this.lineEnd=n,this.fadeLeft=f,this.fadeRight=m}equals(e){return e instanceof DV&&this.type===e.type&&Wt(this.lineStart,e.lineStart)&&Wt(this.lineEnd,e.lineEnd)&&this.fadeLeft===e.fadeLeft&&this.fadeRight===e.fadeRight}get length(){return lu(this.lineStart,this.lineEnd)}},zV=class extends V7{constructor(e){super({...e,isDraped:!0,constraint:new AV(e.edgeStart,e.edgeEnd,e.getGroundElevation)})}get hints(){return[new sl(ao.REFERENCE,this.constraint.start,this.constraint.end,this.isDraped,this.domain)]}},FV=class extends V7{constructor(e){super({...e,constraint:new P7(e.edgeStart,e.edgeEnd)})}get hints(){return[new sl(ao.REFERENCE,this.constraint.start,this.constraint.end,this.isDraped,this.domain)]}},jV=class GV extends D3{constructor(e,i,n,s,h=vn.ALL){super(s,h),this.previousVertex=e,this.centerVertex=i,this.nextVertex=n}equals(e){return e instanceof GV&&Wt(this.previousVertex,e.previousVertex)&&Wt(this.centerVertex,e.centerVertex)&&Wt(this.nextVertex,e.nextVertex)}},H7=class extends z0{constructor({targetPoint:e,constraint:i,previousVertex:n,otherVertex:s,otherVertexType:h,isDraped:f,selfSnappingType:m,objectId:v,domain:x}){super(e,i,f,x??vn.SELF),this.previousVertex=n,this.otherVertex=s,this.otherVertexType=h,this.selfSnappingType=m??zh.None,this.objectId=v??null}get hints(){const e=this.previousVertex,i=this.otherVertexType===h0.CENTER?this.otherVertex:this.targetPoint,n=this.otherVertexType===h0.CENTER?this.targetPoint:this.otherVertex;return[new sl(ao.TARGET,i,n,this.isDraped,this.domain),new sl(ao.REFERENCE,e,i,this.isDraped,this.domain),new jV(this.previousVertex,i,n,this.isDraped,this.domain)]}};var h0,zh;(function(t){t[t.NEXT=0]="NEXT",t[t.CENTER=1]="CENTER"})(h0||(h0={})),function(t){t[t.None=0]="None",t[t.LastVertex=1]="LastVertex",t[t.FirstVertex=2]="FirstVertex",t[t.ExistingEdge=3]="ExistingEdge"}(zh||(zh={}));function $be(t,e,i,n,s=Se()){const h=Yn(d6,t);return h[2]=LG(n,h,e,i)||0,n.renderCoordsHelper.toRenderCoords(h,e,s),s}function tr(t,e,i,n){return n.type==="2d"?(tv.x=t[0],tv.y=t[1],tv.spatialReference=e,n.toScreen(tv)):($be(t,e,i,n,d6),n.state.camera.projectToScreen(d6,p5),Fi(p5[0],p5[1]))}const tv=pl(0,0,0,null),d6=Se(),p5=ZL();let vh=class extends Re{get updating(){return this._snappingSources.some(e=>{var i;return(e==null?void 0:e.valid)==null||e.valid===!0&&((i=e.snappingSource)==null?void 0:i.updating)===!0})||this._updatingHandles.updating}constructor(e){super(e),this.options=null,this._domain=vn.FEATURE,this._updatingHandles=new uc,this._sourceModules={featureService:{module:null,loader:null},featureCollection:{module:null,loader:null},graphics:{module:null,loader:null},notes:{module:null,loader:null},scene:{module:null,loader:null}}}initialize(){const e=aK(()=>{var i;return(i=this.options)==null?void 0:i._effectiveFeatureSources},(i,n)=>this._createSourceInfo(i,n));this._snappingSources=e,this.addHandles([oA(e),Ee(()=>{var i;return{rulesEnabled:!!((i=this.options)!=null&&i.attributeRulesEnabled),sources:this._snappingSources.filter(ji)}},({rulesEnabled:i,sources:n})=>{for(const s of n)s.attributeRulesEnabled=i},Ya)])}destroy(){this._set("options",null),this._updatingHandles.destroy()}async fetchCandidates(e,i,n,s){var v,x,M;if(!(i&this._domain&&this.options!=null&&this.options.effectiveFeatureEnabled))return[];const h=[],f=this._computeScreenSizeDistanceParameters(e,n);for(const $ of this._snappingSources){if(!($!=null&&$.valid)||!((x=(v=$.snappingSource)==null?void 0:v.layerSource)!=null&&x.enabled)||(M=$.layerView)!=null&&M.suspended)continue;const I=$.getFetchCandidatesParameters(e,n,f);for(const P of I)h.push($.snappingSource.fetchCandidates(P,s).then(L=>L.filter(z=>!this._candidateIsExcluded($.snappingSource,z,n.excludeFeature))))}const m=(await TA(h)).flat();return this._addRightAngleCandidates(m,e,f,n),Zt(s),G7(e,m),m}_addRightAngleCandidates(e,i,n,s){var $,I,P,L,z,F,U,W;const h=s.vertexHandle!=null?(I=($=s.vertexHandle.rightEdge)==null?void 0:$.rightVertex)==null?void 0:I.pos:s.editGeometryOperations!=null&&s.editGeometryOperations.data.type==="polygon"?(L=(P=s.editGeometryOperations.data.components[0])==null?void 0:P.getFirstVertex())==null?void 0:L.pos:null,f=s.vertexHandle!=null?(F=(z=s.vertexHandle.leftEdge)==null?void 0:z.leftVertex)==null?void 0:F.pos:s.editGeometryOperations!=null?(W=(U=s.editGeometryOperations.data.components[0])==null?void 0:U.getLastVertex())==null?void 0:W.pos:null,{view:m}=this,v=nn(h,m,s),x=nn(f,m,s),M=e.length;for(let K=0;K<M;K++)this._addRightAngleCandidate(e[K],x,i,n,e),this._addRightAngleCandidate(e[K],v,i,n,e)}_addRightAngleCandidate(e,i,n,s,h){if(i==null||!Cbe(e))return;const f=e.constraint.closestTo(i),m=(f[0]-n[0])/s.x,v=(f[1]-n[1])/s.y,{start:x,end:M}=e.constraint;if(m*m+v*v<=1){const $=sa(f,x)>sa(f,M)?x:M,I=new H7({targetPoint:Vh(f),otherVertex:i,otherVertexType:h0.NEXT,previousVertex:$,constraint:new z7(i,f),objectId:e.objectId,isDraped:e.isDraped,domain:vn.FEATURE});h.push(I)}}_computeScreenSizeDistanceParameters(e,i){let n=this.options!=null?this.options.distance*(i.pointer==="touch"?this.options.touchSensitivityMultiplier:1):0;return this.view==null?{x:n,y:n,z:n,distance:n}:this.view.type==="2d"?(n*=this.view.resolution,{x:n,y:n,z:n,distance:n}):this._computeScreenSizeDistanceParameters3D(e,n,this.view,i)}_computeScreenSizeDistanceParameters3D(e,i,n,s){const{spatialReference:h}=s;n.renderCoordsHelper.toRenderCoords(e,h,CC);const f=n.state.camera.computeScreenPixelSizeAt(CC),m=f*n.renderCoordsHelper.unitInMeters,v=m/ir(h),x=m/lx(h),M=i*v,$=i*x,I=tr(e,h,Ai,n),P=I?f5(I,e,v,0,0,n,s):0,L=I?f5(I,e,0,v,0,n,s):0,z=I?f5(I,e,0,0,x,n,s):0;return{x:P===0?0:M/P,y:L===0?0:M/L,z:z===0?0:$/z,distance:f*i}}_candidateIsExcluded(e,i,n){if(n==null)return!1;const s=this._getCandidateObjectId(i);if(s==null)return!1;const h=e.layerSource.layer;return h.type==="graphics"?n.uid===s:n.sourceLayer===h&&!(!n.attributes||!("objectIdField"in h))&&n.attributes[h.objectIdField]===s}_getCandidateObjectId(e){return e instanceof V7?e.objectId:null}async _createSourceInfo(e,i){const n=e.layer;n.loaded||(await n.load(),Zt(i));const{view:s}=this,h=await this._createFeatureSnappingSourceType(e);return Zt(i),new ls(h==null?{}:{snappingSource:h,view:s,layer:n})}async _createFeatureSnappingSourceType(e){switch(e.layer.type){case"feature":case"geojson":case"csv":case"oriented-imagery":case"subtype-group":case"wfs":return this._createFeatureSnappingSourceFeatureLayer(e);case"graphics":return this._createFeatureSnappingSourceGraphicsLayer(e);case"map-notes":return this._createFeatureSnappingSourceMapNotesLayer(e);case"scene":case"building-scene":return this._createFeatureSnappingSourceSceneLayer(e)}return null}async _createFeatureSnappingSourceSceneLayer(e){const{view:i}=this;return i==null||i.type!=="3d"?null:new(await this._getSourceModule("scene")).SceneLayerSnappingSource({layerSource:e,view:i})}async _createFeatureSnappingSourceFeatureLayer(e){var i;switch((i=e.layer.source)==null?void 0:i.type){case"feature-layer":case"oriented-imagery":return new(await this._getSourceModule("featureService")).FeatureServiceSnappingSource({spatialReference:this.spatialReference,view:this.view,layerSource:e});case"memory":case"csv":case"geojson":case"wfs":return e.layer.geometryType==="mesh"?null:new(await this._getSourceModule("featureCollection")).FeatureCollectionSnappingSource({layerSource:e,view:this.view})}return null}async _createFeatureSnappingSourceGraphicsLayer(e){return new(await this._getSourceModule("graphics")).GraphicsSnappingSource({getGraphicsLayers:()=>[e.layer],spatialReference:this.spatialReference,view:this.view,layerSource:e})}async _createFeatureSnappingSourceMapNotesLayer(e){return new(await this._getSourceModule("notes")).GraphicsSnappingSource({getGraphicsLayers:()=>{var i;return((i=e.layer.sublayers)==null?void 0:i.toArray())??[]},spatialReference:this.spatialReference,view:this.view,layerSource:e})}async _getSourceModule(e){const i=this._sourceModules[e];if(i.loader==null){const n=this._loadSourceModule(e),s={module:null,loader:n};this._sourceModules[e]=s;const h=await n,f={module:h,loader:n};return this._sourceModules[e]=f,h}return i.module==null?i.loader:i.module}_loadSourceModule(e){const i=this._updatingHandles;switch(e){case"featureService":return i.addPromise(be(()=>import("./FeatureServiceSnappingSource-B6J6_bPR.js"),__vite__mapDeps([275,276,113,277,278,279,190]),import.meta.url));case"featureCollection":return i.addPromise(be(()=>import("./FeatureCollectionSnappingSource-91Ie8IpM.js"),__vite__mapDeps([280,277,278,279,55,23]),import.meta.url));case"graphics":case"notes":return i.addPromise(be(()=>import("./GraphicsSnappingSource-DcK301tM.js"),__vite__mapDeps([281,220,15,12,13,16,14,17,18,19,9,20,21,22,23,24,25,26,27,2,1,3,4,5,6,28,137,138,85,277,278,279,55]),import.meta.url));case"scene":return i.addPromise(be(()=>import("./SceneLayerSnappingSource-B9WAiqBn.js"),__vite__mapDeps([282,190,33,34,35,36,37,38,39,40,41,42,43,44,45,278,279]),import.meta.url))}}get test(){}};function Cbe(t){return(t instanceof FV||t instanceof zV)&&!Ibe(t)}function Ibe({constraint:{start:t,end:e}}){const i=Fd(t,e),n=sa(t,e);return i<Ti()||n/i<Obe}function f5(t,e,i,n,s,h,{spatialReference:f}){const m=Yn(Abe,e);m[0]+=i,m[1]+=n,m[2]+=s;const v=tr(m,f,Ai,h);return v?Mbe(v,t):1/0}_([T({constructOnly:!0})],vh.prototype,"spatialReference",void 0),_([T({constructOnly:!0})],vh.prototype,"view",void 0),_([T()],vh.prototype,"options",void 0),_([T({readOnly:!0})],vh.prototype,"updating",null),_([T()],vh.prototype,"_snappingSources",void 0),vh=_([Y("esri.views.interactive.snapping.FeatureSnappingEngine")],vh);const CC=Se(),Abe=Se(),Obe=1e-4;let z3=class{constructor(e,i){this.view=e,this.options=i,this.squaredShortLineThreshold=fc.shortLineThreshold*fc.shortLineThreshold}snap(e,i){return i.vertexHandle!=null?i.vertexHandle.type!=="vertex"?[]:this.snapExistingVertex(e,i):this.snapNewVertex(e,i)}edgeExceedsShortLineThreshold(e,i){return this.exceedsShortLineThreshold(nn(e.leftVertex.pos,this.view,i),nn(e.rightVertex.pos,this.view,i),i)}exceedsShortLineThreshold(e,i,{spatialReference:n}){return this.squaredShortLineThreshold===0||hp(tr(i,n,Ai,this.view),tr(e,n,Ai,this.view))>this.squaredShortLineThreshold}isVertical(e,i,{spatialReference:n}){const s=ir(n);return kc(e,i)*s<fc.verticalLineThresholdMeters}squaredProximityThreshold(e){return e==="touch"?this._squaredTouchProximityThreshold:this._squaredMouseProximityThreshold}get _squaredMouseProximityThreshold(){return this.options.distance*this.options.distance}get _squaredTouchProximityThreshold(){const{distance:e,touchSensitivityMultiplier:i}=this.options,n=e*i;return n*n}},VV=class extends z0{constructor({lineStart:e,lineEnd:i,targetPoint:n,isDraped:s}){super(n,new IV(e,i),s,vn.SELF),this._referenceLineHint=new sl(ao.REFERENCE_EXTENSION,e,i,s,this.domain)}get hints(){return[this._referenceLineHint,new sl(ao.TARGET,this._lineEndClosestToTarget(),this.targetPoint,this.isDraped,this.domain)]}_lineEndClosestToTarget(){return this.constraint.closestEndTo(this.targetPoint)}};function Pbe(t,e){for(var i=0;i<e.length;i++){const n=e[i];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const h=Object.getOwnPropertyDescriptor(n,s);h&&Object.defineProperty(t,s,h.get?h:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}var HV={exports:{}};(function(t,e){function i(){function s(u){if(typeof u=="number")return B.Tc.Zg(u);if(u==null)return null;if(Zi[u]!=null)return B.Tc.Zg(Zi[u]);throw Error("Unrecognised Unit Type")}function h(u){if(typeof u=="number")return B.Tc.Zg(u);if(u==null)return null;if(ty[u]!=null)return B.Tc.Zg(ty[u]);throw Error("Unrecognised Unit Type")}function f(u){if(u)switch(u){case"loxodrome":return 1;case"great-elliptic":return 2;case"normal-section":return 3;case"shape-preserving":return 4}return 0}function m(u,A,b,c){if(b==null||b.B())return null;switch(b.getType()){case B.qn.Point:return u.exportPoint(A,b,c);case B.qn.Polygon:return u.exportPolygon(A,b,c);case B.qn.Polyline:return u.exportPolyline(A,b,c);case B.qn.MultiPoint:return u.exportMultipoint(A,b,c);case B.qn.Envelope:return u.exportExtent(A,b,c)}return null}function v(u,A,b,c){if(b.getType()!==B.qn.Point)throw Error("Geometry not Point");return u.exportPoint(A,b,c)}function x(u,A,b){return u.convertToGEGeometry(A,b)}function M(u){var A=u.wkid;u=u.wkt2||u.wkt;var b=gl.get(A||u);return b==null&&(A!==-1&&A!=null?(b=B.Eg.create(A),gl.set(A,b)):u&&(b=B.Eg.qP(u),gl.set(u,b)),Rc.has(A||u)&&b.VW(Rc.get(A||u))),b}function $(u){var A,b,c;if(u==null)return null;var a=M(u);return u=a.Hd(),a=a.Kn(),(A={}).tolerance=a,A.unitType=u==null?-1:u.od,A.unitID=u==null?-1:u.Ec(),A.unitBaseFactor=u==null?0:u.ai,A.unitSquareDerivative=u==null?0:(c=(b=B.Tc.aG(u))===null||b===void 0?void 0:b.Ec())!==null&&c!==void 0?c:0,A}function I(u,A,b,c){return b==null?null:(b=B.$b.clip(x(u,ke,b),x(u,ke,c),M(A)),m(u,ke,b,A))}function P(u,A,b,c){b=B.$b.dl(x(u,ke,b),x(u,ke,c),M(A)),c=[];for(var a=0;a<b.length;a++)c.push(m(u,ke,b[a],A));return c}function L(u,A,b,c){if(b==null||c==null)throw Error("Illegal Argument Exception");return B.$b.contains(x(u,ke,b),x(u,ke,c),M(A))}function z(u,A,b,c){if(b==null||c==null)throw Error("Illegal Argument Exception");return B.$b.BP(x(u,ke,b),x(u,ke,c),M(A))}function F(u,A,b,c,a){if(b==null||c==null)throw Error("Illegal Argument Exception");return B.$b.tb(x(u,ke,b),x(u,ke,c),M(A),s(a))}function U(u,A,b,c){return!(b==null&&c!=null||c==null&&b!=null)&&B.$b.Nb(x(u,ke,b),x(u,ke,c),M(A))}function W(u,A,b,c){if(b==null||c==null)throw Error("Illegal Argument Exception");return B.$b.TS(x(u,ke,b),x(u,ke,c),M(A))}function K(u,A,b,c){if(b==null||c==null)throw Error("Illegal Argument Exception");return B.$b.touches(x(u,ke,b),x(u,ke,c),M(A))}function J(u,A,b,c){if(b==null||c==null)throw Error("Illegal Argument Exception");return B.$b.qY(x(u,ke,b),x(u,ke,c),M(A))}function te(u,A,b,c){if(b==null||c==null)throw Error("Illegal Argument Exception");return B.$b.TP(x(u,ke,b),x(u,ke,c),M(A))}function ie(u,A,b,c){if(b==null||c==null)throw Error("Illegal Argument Exception");return B.$b.DU(x(u,ke,b),x(u,ke,c),M(A))}function le(u,A,b,c,a){if(b==null||c==null)throw Error("Illegal Argument Exception");return B.$b.yB(x(u,ke,b),x(u,ke,c),M(A),a)}function de(u,A,b){if(b==null)throw Error("Illegal Argument Exception");return B.$b.dT(x(u,ke,b),M(A))}function xe(u,A,b){if(b==null)throw Error("Illegal Argument Exception");return b=B.$b.eC(x(u,ke,b),M(A)),m(u,ke,b,A)}function we(u,A,b,c){if(c===void 0&&(c=!1),b==null)throw Error("Illegal Argument Exception");if(Array.isArray(b)){var a=c,r=[];for(c=0;c<b.length;c++)r.push(x(u,ke,b[c]));for(b=B.$b.jP(r,a),a=Array(b.length),c=0;c<b.length;c++)a[c]=m(u,ke,b[c],A);return a}return c=B.$b.iP(x(u,ke,b),M(A)),m(u,ke,c,A)}function ve(u,A,b,c){if(b==null||c==null)throw Error("Illegal Argument Exception");if(Array.isArray(b)){for(var a=[],r=0;r<b.length;r++)a.push(x(u,ke,b[r]));for(b=B.$b.QP(a,x(u,ke,c),M(A)),c=Array(b.length),r=0;r<b.length;r++)c[r]=m(u,ke,b[r],A);return c}return r=B.$b.im(x(u,ke,b),x(u,ke,c),M(A)),m(u,ke,r,A)}function se(u,A,b,c){if(b==null||c==null)throw Error("Illegal Argument Exception");if(Array.isArray(b)){for(var a=[],r=0;r<b.length;r++)a.push(x(u,ke,b[r]));for(b=B.$b.VX(a,x(u,ke,c),M(A)),c=Array(b.length),r=0;r<b.length;r++)c[r]=m(u,ke,b[r],A);return c}return r=B.$b.ep(x(u,ke,b),x(u,ke,c),M(A)),m(u,ke,r,A)}function ce(u,A,b,c){if(b==null||c==null)throw Error("Illegal Argument Exception");if(Array.isArray(b)){for(var a=[],r=0;r<b.length;r++)a.push(x(u,ke,b[r]));for(b=B.$b.RS(a,x(u,ke,c),M(A)),c=Array(b.length),r=0;r<b.length;r++)c[r]=m(u,ke,b[r],A);return c}return r=B.$b.Ea(x(u,ke,b),x(u,ke,c),M(A)),m(u,ke,r,A)}function ue(u,A,b,c){if(b==null)return null;var a=[];if(Array.isArray(b)){if(b.length===0)return null;for(c=0;c<b.length;c++)a.push(x(u,ke,b[c]))}else a.push(x(u,ke,b)),c!=null&&a.push(x(u,ke,c));return m(u,ke,B.$b.jY(a,M(A)),A)}function Ae(u,A,b,c,a,r,o,l){var d=0;if(r!=null)switch(r){case"round":d=0;break;case"bevel":d=1;break;case"miter":d=2;break;case"square":d=3}if(Array.isArray(b)){if(b==null)u=null;else if(b.length===0)u=[];else{var p=[];for(r=0;r<b.length;r++)p.push(x(u,ke,b[r]));for(b=B.$b.BU(p,M(A),c,d,o,l,s(a)),c=Array(b.length),r=0;r<b.length;r++)c[r]=m(u,ke,b[r],A);u=c}return u}return b=B.$b.offset(x(u,ke,b),M(A),c,d,o,l,s(a)),m(u,ke,b,A)}function je(u,A,b,c,a,r){if(r===void 0&&(r=!1),Array.isArray(b)){if(!Array.isArray(c)){for(var o=[],l=0;l<b.length;l++)o.push(c);c=o}if(c.length!=b.length){if(c.length==0)throw Error("Illegal Argument Exception");o=[];var d=0;for(l=0;l<b.length;l++)c[l]===void 0?o.push(d):(o.push(c[l]),d=c[l]);c=o}return He(u,A,b,c,a,!1,r,"geodesic",NaN)}return b=B.$b.buffer(x(u,ke,b),M(A),c,s(a),!1,0,NaN),m(u,ke,b,A)}function Ge(u,A,b,c,a,r,o,l){if(Array.isArray(b)){if(!Array.isArray(c)){for(var d=[],p=0;p<b.length;p++)d.push(c);c=d}if(c.length!==b.length){if(c.length===0)throw Error("Illegal Argument Exception");d=[];var g=0;for(p=0;p<b.length;p++)c[p]===void 0?d.push(g):(d.push(c[p]),g=c[p]);c=d}return He(u,A,b,c,a,!0,r,o,l)}return o===void 0&&(o=NaN),b=B.$b.buffer(x(u,ke,b),M(A),c,s(a),!0,f(r),o),m(u,ke,b,A)}function He(u,A,b,c,a,r,o,l,d){if(d===void 0&&(d=NaN),b==null)return null;if(b.length===0)return[];for(var p=[],g=0;g<b.length;g++)p.push(x(u,ke,b[g]));for(b=B.$b.MN(p,M(A),c,s(a),r,o,f(l),d),c=Array(b.length),g=0;g<b.length;g++)c[g]=m(u,ke,b[g],A);return c}function mt(u,A,b,c,a){var r;return a===void 0&&(a=!0),b=B.$b.nz(x(u,ke,b),x(u,ke,c),a),(r={}).coordinate=v(u,ke,b.fz(),A),r.distance=b.hz(),r.isRightSide=b.Sz(),r.vertexIndex=b.Ua(),r.isEmpty=b.B(),r}function jt(u,A,b,c){var a;return b=B.$b.oz(x(u,ke,b),x(u,ke,c)),(a={}).coordinate=v(u,ke,b.fz(),A),a.distance=b.hz(),a.isRightSide=b.Sz(),a.vertexIndex=b.Ua(),a.isEmpty=b.B(),a}function ki(u,A,b,c,a,r){var o;for(b=B.$b.pz(x(u,ke,b),x(u,ke,c),a,r),c=[],a=0;a<b.length;a++)b[a].B()===!1&&c.push(((o={}).coordinate=v(u,ke,b[a].fz(),A),o.distance=b[a].hz(),o.isRightSide=b[a].Sz(),o.vertexIndex=b[a].Ua(),o.isEmpty=b[a].B(),o));return c}function or(u,A,b,c,a,r){return b=B.$b.QQ(x(u,ke,b),M(A),c,a,s(r)),m(u,ke,b,A)}function pi(u,A,b,c,a){return b=B.$b.Qr(x(u,ke,b),M(A),c,s(a)),m(u,ke,b,A)}function wi(u,A,b,c,a,r){return r===void 0&&(r=0),b=B.$b.Wy(x(u,ke,b),M(A),c,s(a),r),m(u,ke,b,A)}function wo(u,A,b,c){if(b==null)throw Error("Illegal Argument Exception");return B.$b.JU(x(u,ke,b),M(A),h(c))}function Is(u,A,b,c){if(b==null)throw Error("Illegal Argument Exception");return B.$b.KU(x(u,ke,b),M(A),s(c))}function _o(u,A,b,c,a){if(b==null)throw Error("Illegal Argument Exception");return B.$b.WQ(x(u,ke,b),M(A),h(c),f(a))}function fl(u,A,b,c,a){if(b==null)throw Error("Illegal Argument Exception");return B.$b.ZQ(x(u,ke,b),M(A),s(c),f(a))}function la(u){B.NL.bind(u)}function up(u,A,b,c,a){var r=null,o=null;if(c){if(!a)throw B.i.N("AOI missing Spatial Reference");r=x(u,ke,c),o=M(a).fh()}return(u=B.gu.XR(M(A).fh(),M(b).fh(),r,o))!==null?u:null}function xo(u,A,b,c,a){var r=null,o=null;if(c){if(!a)throw B.i.N("AOI missing Spatial Reference");r=x(u,ke,c),o=M(a).fh()}return B.gu.YR(M(A).fh(),M(b).fh(),r,o)}function Ac(u,A,b,c,a,r){if(a===void 0&&(a=null),r===void 0&&(r=null),r){var o=new B.yC;o.Vu=r.densificationStep,o.Jr=r.centralMeridianOfOutputGCS,r.clipWithInputHorizon&&o.PW(r.clipWithInputHorizon),r.clipWithOutputHorizon&&o.QW(r.clipWithOutputHorizon)}if(this.KY===!1)throw Error("Projection Engine must be enabled using enableProjection");if(A.length===0)return[];if(a){if(!(r=a.getCachedGeTransformation(b,c)))e:{if(r=a,a=null,r){var l=r.getGTListEntry();if(l!==null){a=new B.wC(null);for(var d=0,p=l.steps;d<p.length;d++){l=p[d];var g=new B.Dx(l.geogtran);l.isInverse&&g.Qz(),a.add(g)}o=B.vr.Nr(M(b).fh(),M(c).fh(),a,o),r.assignCachedGe(b,c,o),r=o;break e}}if(a===null&&r&&r.steps&&0<r.steps.length){for(a=new B.wC(null),d=0,p=r.steps;d<p.length;d++)(l=p[d]).wkid!=-1&&l.wkid!=null?a.add(B.Dx.create(l.wkid,l.isInverse)):a.add(B.Dx.uP(l.wkt,l.isInverse));o=B.vr.Nr(M(b).fh(),M(c).fh(),a,o),r.assignCachedGe(b,c,o),r=o}else r=B.vr.Nr(M(b).fh(),M(c).fh(),a,o)}for(b=[],a=0;a<A.length;a++)o=A[a],b.push(ar(u,o,c,r))}else for(r=B.vr.Nr(M(b).fh(),M(c).fh(),null),b=[],a=0;a<A.length;a++)o=A[a],b.push(ar(u,o,c,r));return b}function ar(u,A,b,c){return A=B.$b.zh(x(u,ke,A),c),m(u,ke,A,b)}function Oc(u,A){u!=null&&(u=u.wkid||u.wkt2||u.wkt,Rc.has(u),Rc.set(u,A),gl.has(u)&&gl.delete(u))}function dp(u){u!=null&&(u=u.wkid||u.wkt2||u.wkt,Rc.has(u)&&(Rc.delete(u),gl.has(u)&&gl.delete(u)))}function Pc(u,A,b,c){if(b==null||c==null)return[];var a=[],r=0;for(b=B.$b.QS(x(u,ke,b),x(u,ke,c),M(A))||[];r<b.length;r++)a.push(m(u,ke,b[r],A));return a}var $i,B,hn,Er,Qe=this&&this.__extends||function(){function u(A,b){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var r in a)a.hasOwnProperty(r)&&(c[r]=a[r])})(A,b)}return function(A,b){function c(){this.constructor=A}u(A,b),A.prototype=b===null?Object.create(b):(c.prototype=b.prototype,new c)}}();(function(u){var A;(A=u.qn||(u.qn={}))[A.Unknown=0]="Unknown",A[A.Point=33]="Point",A[A.Line=322]="Line",A[A.Envelope=197]="Envelope",A[A.MultiPoint=550]="MultiPoint",A[A.Polyline=1607]="Polyline",A[A.Polygon=1736]="Polygon",function(c){c[c.enumMild=0]="enumMild",c[c.enumMedium=1]="enumMedium",c[c.enumHot=2]="enumHot"}(u.YK||(u.YK={}));var b=function(){function c(){this.description=null,this.VA=0}return c.prototype.getType=function(){return 0},c.prototype.Db=function(){return-1},c.prototype.Nf=function(a){this.vc(),a!=this.description&&this.sn(a)},c.prototype.sn=function(){},c.prototype.Jl=function(a){this.vc(),a!=this.description&&(a=u.ee.CR(this.description,a))!=this.description&&this.sn(a)},c.prototype.hasAttribute=function(a){return this.description.hasAttribute(a)},c.prototype.re=function(a){this.vc(),this.description.hasAttribute(a)||(a=u.ee.BR(this.description,a),this.sn(a))},c.prototype.Tg=function(){return null},c.prototype.bn=function(){},c.prototype.A=function(){},c.prototype.Qo=function(){},c.prototype.xc=function(a){this.A(a)},c.prototype.B=function(){return!0},c.prototype.Oa=function(){},c.prototype.Oc=function(){},c.prototype.Ia=function(){return null},c.prototype.copyTo=function(){},c.prototype.Ke=function(){return 0},c.prototype.Qb=function(){return 0},c.prototype.iG=function(){return this.hasAttribute(1)},c.tf=function(a){return 1+((192&a)>>6)>>1},c.Rn=function(a){return!!(32&a)},c.US=function(a){return!!(128&a)},c.yd=function(a){return!!(256&a)},c.xj=function(a){return!!(512&a)},c.Hc=function(a){return!!(1024&a)},c.prototype.Of=function(){var a=this.Ia();return this.copyTo(a),a},c.prototype.mg=function(){return null},c.jg=function(a){var r=a.Ia();return a.copyTo(r),r},c.prototype.vc=function(){0<=this.VA&&(this.VA+=2147483649)},c.Ax=function(a){var r=a.getType();if(c.xj(r))return a.I();if(a.B())return 0;if(r==197)return 4;if(r==33)return 1;if(c.yd(r))return 2;throw u.i.fa("missing type")},c}();u.aa=b})(B||(B={})),hn=B||(B={}),Er=function(){function u(){this.y=this.x=0}return u.construct=function(A,b){var c=new u;return c.x=A,c.y=b,c},u.al=function(A){var b=new u;return b.x=A.x,b.y=A.y,b},u.prototype.ma=function(A,b){this.x=A,this.y=b},u.prototype.L=function(A){this.x=A.x,this.y=A.y},u.prototype.fq=function(A,b){return this.x===A&&this.y===b},u.prototype.Rz=function(A){return 2220446049250313e-31>=Math.abs(this.x-A.x)&&2220446049250313e-31>=Math.abs(this.y-A.y)},u.prototype.qb=function(A){return this.x===A.x&&this.y===A.y},u.prototype.Nb=function(A){return A==this||A instanceof u&&this.x==A.x&&this.y==A.y},u.prototype.sub=function(A){this.x-=A.x,this.y-=A.y},u.prototype.uc=function(A,b){this.x=A.x-b.x,this.y=A.y-b.y},u.prototype.add=function(A,b){b!==void 0?(this.x=A.x+b.x,this.y=A.y+b.y):(this.x+=A.x,this.y+=A.y)},u.prototype.Sq=function(){this.x=-this.x,this.y=-this.y},u.prototype.mt=function(A){this.x=-A.x,this.y=-A.y},u.prototype.NS=function(A,b,c){this.x=A.x*(1-c)+b.x*c,this.y=A.y*(1-c)+b.y*c},u.prototype.Ct=function(A,b){this.x=this.x*A+b.x,this.y=this.y*A+b.y},u.prototype.HW=function(A,b,c){this.x=b.x*A+c.x,this.y=b.y*A+c.y},u.prototype.scale=function(A){this.x*=A,this.y*=A},u.prototype.compare=function(A){return this.y<A.y?-1:this.y>A.y?1:this.x<A.x?-1:this.x>A.x?1:0},u.prototype.normalize=function(){var A=this.length();A==0&&(this.x=1,this.y=0),this.x/=A,this.y/=A},u.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},u.prototype.Sk=function(){return this.x*this.x+this.y*this.y},u.tb=function(A,b){return Math.sqrt(this.yc(A,b))},u.Oy=function(A,b,c,a){return A-=c,b-=a,Math.sqrt(A*A+b*b)},u.prototype.Qh=function(A){return this.x*A.x+this.y*A.y},u.prototype.fD=function(A){return Math.abs(this.x*A.x)+Math.abs(this.y*A.y)},u.prototype.wi=function(A){return this.x*A.y-this.y*A.x},u.prototype.Bt=function(A,b){var c=-this.x*b+this.y*A;this.x=this.x*A+this.y*b,this.y=c},u.prototype.Hv=function(){var A=this.x;this.x=-this.y,this.y=A},u.prototype.MG=function(A){this.x=-A.y,this.y=A.x},u.prototype.ar=function(){var A=this.x;this.x=this.y,this.y=-A},u.prototype.qu=function(){return 0<this.x?0<=this.y?1:4:0<this.y?2:this.x==0?4:3},u.nu=function(A,b){var c=A.qu(),a=b.qu();return a==c?0>(A=A.wi(b))?1:0<A?-1:0:c<a?-1:1},u.yc=function(A,b){var c=A.x-b.x;return c*c+(A=A.y-b.y)*A},u.prototype.toString=function(){return"("+this.x+" , "+this.y+")"},u.prototype.Rc=function(){this.y=this.x=NaN},u.prototype.isNaN=function(){return isNaN(this.x)||isNaN(this.y)},u.prototype.offset=function(A,b){var c=u.tb(A,b),a=u.construct(this.x,this.y);if(c==0)return u.tb(a,A);var r=new u;return r.L(b),r.sub(A),a.sub(A),a.wi(r)/c},u.Uq=function(A,b,c){var a=new hn.Wb;a.set(b.x),a.sub(A.x);var r=new hn.Wb;r.set(c.y),r.sub(A.y);var o=new hn.Wb;o.set(b.y),o.sub(A.y);var l=new hn.Wb;return l.set(c.x),l.sub(A.x),a.Ag(r),o.Ag(l),a.sub(o),a.ps()?(a=new hn.hp(b.x),r=new hn.hp(A.x),o=new hn.hp(A.y),a=a.jt(r),A=(A=new hn.hp(c.y)).jt(o),b=(b=new hn.hp(b.y)).jt(o),c=(c=new hn.hp(c.x)).jt(r),a=a.lr(A),b=b.lr(c),(a=a.lr(b)).nT()?-1:a.fS()?1:0):0>(c=a.value())?-1:0<c?1:0},u.prototype.cc=function(){return hn.O.uj(hn.O.uj())},u}(),hn.h=Er,function(u){var A=function(){function b(c){this.Fy=this.Mt=0,this.OX=c}return b.prototype.reset=function(){this.Fy=this.Mt=0},b.prototype.add=function(c){c-=this.Fy;var a=this.Mt+c;this.Fy=a-this.Mt-c,this.Mt=a},b.prototype.sub=function(c){this.add(-c)},b.prototype.rm=function(){return this.OX+this.Mt},b}();u.Fx=A,u.lc=function(){function b(){}return b.Cn=function(c,a){return 0<=a?Math.abs(c):-Math.abs(c)},b.sign=function(c){return 0>c?-1:0<c?1:0},b.RK=function(c){return c-360*Math.floor(c/360)},b.round=function(c){return Math.floor(c+.5)},b.ox=function(c){return c*c},b.hq=function(c,a,r){return .5>=r?c+(a-c)*r:a-(a-c)*(1-r)},b.OG=function(c,a,r,o){.5>=r?(o.x=c.x+(a.x-c.x)*r,o.y=c.y+(a.y-c.y)*r):(o.x=a.x-(a.x-c.x)*(1-r),o.y=a.y-(a.y-c.y)*(1-r))},b.lT=function(c,a,r,o,l,d){.5>=l?(d.x=c+(r-c)*l,d.y=a+(o-a)*l):(d.x=r-(r-c)*(1-l),d.y=o-(o-a)*(1-l))},b}()}(B||(B={})),function(u){var A=function(b){function c(){var a=b.call(this)||this;return a.sa=0,a.na=0,a.pa=0,a.la=0,a.ka=null,a}return Qe(c,b),c.prototype.ac=function(){return u.h.construct(this.sa,this.na)},c.prototype.Yp=function(a){a.x=this.sa,a.y=this.na},c.prototype.Dc=function(a){this.em(0,a)},c.prototype.ZB=function(a,r){this.em(0,u.h.construct(a,r))},c.prototype.To=function(a){this.hD(0,a)},c.prototype.setStart=function(a){this.uD(0,a)},c.prototype.wv=function(a,r){return this.Od(0,a,r)},c.prototype.YB=function(a,r,o){this.tn(0,a,r,o)},c.prototype.wc=function(){return u.h.construct(this.pa,this.la)},c.prototype.Tr=function(a){a.x=this.pa,a.y=this.la},c.prototype.Qc=function(a){this.em(1,a)},c.prototype.Ql=function(a,r){this.em(1,u.h.construct(a,r))},c.prototype.Po=function(a){this.hD(1,a)},c.prototype.setEnd=function(a){this.uD(1,a)},c.prototype.gv=function(a,r){return this.Od(1,a,r)},c.prototype.OB=function(a,r,o){this.tn(1,a,r,o)},c.prototype.Db=function(){return 1},c.prototype.B=function(){return this.Ac()},c.prototype.Oa=function(){},c.prototype.Ke=function(){return 0},c.prototype.Ea=function(a,r,o,l,d){return this.KM(a,r,o,l,d)},c.prototype.isIntersecting=function(a,r){return this.zr(a,r,!1)!=0},c.prototype.qs=function(a,r){return this.ru(a,r,!1)},c.prototype.ru=function(){return null},c.prototype.Ac=function(){return!1},c.prototype.ay=function(a){if(this.vc(),this.ka==null&&0<a)this.ka=u.O.lg(2*a);else if(this.ka!=null&&this.ka.length<2*a){for(var r=this.ka.slice(0),o=this.ka.length;o<2*a;o++)r[o]=0;this.ka=r}},c.gM=function(a,r,o){if(0<o)var l=0;for(var d=0;d<o;d++)r[0+l]=a[0],l++},c.prototype.em=function(a,r){a!=0?(this.pa=r.x,this.la=r.y):(this.sa=r.x,this.na=r.y)},c.prototype.sn=function(a){if(this.ka!=null){for(var r=u.ee.Iw(a,this.description),o=[],l=c.Gg(this.description,0),d=c.Gg(this.description,1),p=c.Gg(a,0),g=c.Gg(a,1),y=0,w=1,S=a.Aa;w<S;w++){var k=a.kd(w),C=u.ra.Va(k);if(r[w]==-1){var O=u.ra.se(k);for(k=0;k<C;k++)o[p+y]=O,o[g+y]=O,y++}else for(O=this.description.$j(r[w])-2,k=0;k<C;k++)o[p+y]=this.ka[l+O],o[g+y]=this.ka[d+O],y++,O++}this.ka=o}this.description=a},c.prototype.hD=function(a,r){if(this.Ac())throw u.i.fa("empty geometry");r.Nf(this.description),r.Ac()&&r.un();for(var o=0;o<this.description.Aa;o++)for(var l=this.description.Ed(o),d=0,p=u.ra.Va(l);d<p;d++){var g=this.Od(a,l,d);r.setAttribute(l,d,g)}},c.prototype.uD=function(a,r){if(this.vc(),r.Ac())throw u.i.fa("empty geometry");for(var o=r.description,l=0,d=o.Aa;l<d;l++)for(var p=o.Ed(l),g=u.ra.Va(p),y=0;y<g;y++){var w=r.Uc(p,y);this.tn(a,p,y,w)}},c.prototype.Od=function(a,r,o){if(this.Ac())throw u.i.fa("This operation was performed on an Empty Geometry.");if(r==0)return a!=0?o!=0?this.la:this.pa:o!=0?this.na:this.sa;if(o>=u.ra.Va(r))throw u.i.ce();var l=this.description.Pf(r);return 0<=l?(this.ka!=null&&this.ay(this.description.Ae.length-2),this.ka[c.Gg(this.description,a)+this.description.$j(l)-2+o]):u.ra.se(r)},c.prototype.tn=function(a,r,o,l){if(this.vc(),o>=u.ra.Va(r))throw u.i.ce();var d=this.description.Pf(r);0>d&&(this.re(r),d=this.description.Pf(r)),r==0?a!=0?o!=0?this.la=l:this.pa=l:o!=0?this.na=l:this.sa=l:(this.ka==null&&this.ay(this.description.Ae.length-2),this.ka[c.Gg(this.description,a)+this.description.$j(d)-2+o]=l)},c.prototype.copyTo=function(a){if(a.getType()!=this.getType())throw u.i.N();a.description=this.description,a.ay(this.description.Ae.length-2),c.gM(this.ka,a.ka,2*(this.description.Ae.length-2)),a.sa=this.sa,a.na=this.na,a.pa=this.pa,a.la=this.la,a.vc(),this.op(a)},c.prototype.Tg=function(a,r){var o=new u.Nc;return this.Ac()?(o.Oa(),o):(o.oa=this.Od(0,a,r),o.va=o.oa,o.Lk(this.Od(1,a,r)),o)},c.prototype.ZI=function(a){this.Ac()?a.Oa():(a.oa=this.Od(0,0,0),a.va=a.oa,a.Lk(this.Od(1,0,0)))},c.prototype.Tw=function(a,r){r.Nf(this.description),r.Cb(this.hc(a));for(var o=1,l=this.description.Aa;o<l;o++)for(var d=this.description.Ed(o),p=u.ra.Va(d),g=0;g<p;g++){var y=this.Uc(a,d,g);r.setAttribute(d,g,y)}},c.prototype.FM=function(a){if(this.description!=a.description||this.sa!=a.sa||this.pa!=a.pa||this.na!=a.na||this.la!=a.la)return!1;for(var r=0;r<2*(this.description.Ae.length-2);r++)if(this.ka[r]!=a.ka[r])return!1;return!0},c.prototype.BG=function(){return this.sa==this.pa&&this.na==this.la},c.prototype.reverse=function(){var a=this.sa;this.sa=this.pa,this.pa=a,a=this.na,this.na=this.la,this.la=a,a=1;for(var r=this.description.Aa;a<r;a++)for(var o=this.description.kd(a),l=0,d=u.ra.Va(o);l<d;l++){var p=this.Od(0,o,l),g=this.Od(1,o,l);this.tn(0,o,l,g),this.tn(1,o,l,p)}},c.prototype.zr=function(a,r,o){var l=this.getType(),d=a.getType();if(l===322){if(d==322)return u.yb.OM(this,a,r,o);throw u.i.Qa()}throw u.i.Qa()},c.prototype.KM=function(a,r,o,l,d){var p=this.getType(),g=a.getType();if(p===322){if(g==322)return u.yb.Zx(this,a,r,o,l,d);throw u.i.Qa()}throw u.i.Qa()},c.prototype.Tx=function(){return null},c.Gg=function(a,r){return r*(a.Ae.length-2)},c.prototype.hc=function(a,r){if(r===void 0)return r=new u.h,this.hc(a,r),r;u.lc.lT(this.sa,this.na,this.pa,this.la,a,r)},c.prototype.fe=function(){return null},c.prototype.eG=function(){return null},c.prototype.cq=function(){return null},c.prototype.Bi=function(){return null},c.prototype.Pn=function(){return null},c.prototype.kg=function(){return null},c.prototype.Ux=function(a,r){return r!==void 0?this.vx(r)-this.vx(a):this.vx(a)},c.prototype.op=function(){},c.prototype.dl=function(){return null},c.prototype.ah=function(){},c.prototype.Uc=function(){return null},c.prototype.Pe=function(){return null},c.prototype.vx=function(){return null},c.prototype.NG=function(){return null},c.prototype.tb=function(a,r){if(!r&&this.zr(a,0,!1)!=0)return 0;r=17976931348623157e292;var o=this.ac(),l=a.fe(o,!1);return o.sub(a.hc(l)),(o=o.length())<r&&(r=o),o=this.wc(),l=a.fe(o,!1),o.sub(a.hc(l)),(o=o.length())<r&&(r=o),o=a.ac(),l=this.fe(o,!1),o.sub(this.hc(l)),(o=o.length())<r&&(r=o),o=a.wc(),l=this.fe(o,!1),o.sub(this.hc(l)),(o=o.length())<r&&(r=o),r},c.prototype.mg=function(){return u.pi.gm(this,null)},c}(u.aa);u.SC=A}(B||(B={})),new B.h,function(u){var A;(A=u.$K||(u.$K={}))[A.Unknown=-1]="Unknown",A[A.Not=0]="Not",A[A.Weak=1]="Weak",A[A.Strong=2]="Strong",function(c){c[c.DirtyIsKnownSimple=1]="DirtyIsKnownSimple",c[c.IsWeakSimple=2]="IsWeakSimple",c[c.IsStrongSimple=4]="IsStrongSimple",c[c.DirtyOGCFlags=8]="DirtyOGCFlags",c[c.DirtyVerifiedStreams=32]="DirtyVerifiedStreams",c[c.DirtyExactIntervals=64]="DirtyExactIntervals",c[c.DirtyLooseIntervals=128]="DirtyLooseIntervals",c[c.DirtyIntervals=192]="DirtyIntervals",c[c.DirtyIsEnvelope=256]="DirtyIsEnvelope",c[c.DirtyLength2D=512]="DirtyLength2D",c[c.DirtyRingAreas2D=1024]="DirtyRingAreas2D",c[c.DirtyCoordinates=1993]="DirtyCoordinates",c[c.DirtyAllInternal=65535]="DirtyAllInternal",c[c.DirtyAll=16777215]="DirtyAll"}(u.MK||(u.MK={}));var b=function(c){function a(){var r=c.call(this)||this;return r.Hm=65535,r.wa=0,r.Pg=-1,r.Bb=null,r}return Qe(a,c),a.prototype.op=function(){},a.prototype.$x=function(){},a.prototype.iy=function(){},a.prototype.I=function(){return this.wa},a.prototype.B=function(){return this.Ac()},a.prototype.Ac=function(){return this.wa==0},a.prototype.ak=function(r){return!!(this.Hm&r)},a.prototype.Lf=function(r,o){this.Hm=o?this.Hm|r:this.Hm&~r},a.prototype.mc=function(){this.ak(32)&&this.bN()},a.prototype.wx=function(){if(this.Ac())throw u.i.fa("This operation was performed on an Empty Geometry.")},a.prototype.ve=function(r,o){if(0>r||r>=this.wa)throw u.i.fa("index out of bounds");this.mc(),o.Nf(this.description),o.B()&&o.un();for(var l=0;l<this.description.Aa;l++)for(var d=this.description.Ed(l),p=0,g=u.ra.Va(d);p<g;p++){var y=this.za[l].eg(g*r+p);o.setAttribute(d,p,y)}},a.prototype.Ht=function(r,o){this.mc();for(var l=o.description,d=0;d<l.Aa;d++)for(var p=l.Ed(d),g=u.ra.Va(p),y=0;y<g;y++){var w=o.Uc(p,y);this.setAttribute(p,r,y,w)}},a.prototype.D=function(r,o){if(0>r||r>=this.I())throw u.i.ce();this.mc(),this.za[0].tc(2*r,o)},a.prototype.Na=function(r){var o=new u.h;return this.D(r,o),o},a.prototype.Gc=function(r,o){this.za[0].tc(2*r,o)},a.prototype.Cb=function(r,o,l){if(0>r||r>=this.wa)throw u.i.ce();this.mc();var d=this.za[0];l!==void 0?(d.write(2*r,o),d.write(2*r+1,l)):d.Tt(2*r,o),this.Pc(1993)},a.prototype.Cz=function(){if(void 0>=this.I())throw u.i.ce();this.mc();var r=this.za[0],o=new u.Nd;return o.x=r.read(NaN),o.y=r.read(NaN),o.z=this.hasAttribute(1)?this.za[1].eg():u.ra.se(1),o},a.prototype.dC=function(r){if(0>r||r>=this.I())throw u.i.ce();this.re(1),this.mc(),this.Pc(1993);var o=this.za[0];o.write(2*r,(void 0).x),o.write(2*r+1,(void 0).y),this.za[1].pr(r,(void 0).z)},a.prototype.Uc=function(r,o,l){if(0>o||o>=this.wa)throw u.i.ce();var d=u.ra.Va(r);if(l>=d)throw u.i.ce();this.mc();var p=this.description.Pf(r);return 0<=p?this.za[p].eg(o*d+l):u.ra.se(r)},a.prototype.yF=function(r,o){return this.Uc(r,o)},a.prototype.setAttribute=function(r,o,l,d){if(0>o||o>=this.wa)throw u.i.ce();var p=u.ra.Va(r);if(l>=p)throw u.i.ce();this.re(r),this.mc(),r=this.description.Pf(r),this.Pc(1993),this.za[r].pr(o*p+l,d)},a.prototype.ub=function(r){return this.wx(),this.re(r),this.mc(),this.za[this.description.Pf(r)]},a.prototype.hn=function(r,o){if(o!=null&&u.ra.Tp(r)!=o.Tp())throw u.i.N();this.re(r),r=this.description.Pf(r),this.za==null&&(this.za=u.Yc.qI(this.description.Aa)),this.za[r]=o,this.Pc(16777215)},a.prototype.sn=function(r){var o=null;if(this.za!=null){var l=u.ee.Iw(r,this.description);o=[];for(var d=0,p=r.Aa;d<p;d++)l[d]!=-1&&(o[d]=this.za[l[d]])}this.description=r,this.za=o,this.Pg=-1,this.Pc(16777215)},a.prototype.AD=function(r){this.wu(!0),r instanceof u.l?this.$.A(r):this.$.Qo(r)},a.prototype.aN=function(r){this.wu(!1),r instanceof u.l?this.$.A(r):this.$.Qo(r)},a.prototype.bn=function(r){this.wu(!0),this.$.copyTo(r)},a.prototype.A=function(r){this.AD(r)},a.prototype.Qo=function(r){this.AD(r)},a.prototype.xc=function(r){this.aN(r)},a.prototype.Tg=function(r,o){var l=new u.Nc;return this.Ac()?(l.Oa(),l):(this.wu(!0),this.$.Tg(r,o))},a.prototype.cc=function(){var r=this.description.cc();if(!this.Ac())for(var o=this.I(),l=0,d=this.description.Aa;l<d;l++)r=this.za[l].An(r,0,o*u.ra.Va(this.description.Ed(l)));return r},a.prototype.Nb=function(r){if(r==this)return!0;if(!(r instanceof a&&this.description.Nb(r.description))||this.Ac()!=r.Ac())return!1;if(this.Ac())return!0;var o=this.I();if(o!=r.I())return!1;for(var l=0;l<this.description.Aa;l++){var d=this.description.kd(l),p=this.ub(d),g=r.ub(d);if(!p.Nb(g,0,o*u.ra.Va(d)))return!1}return!0},a.prototype.copyTo=function(r){if(r.getType()!=this.getType())throw u.i.N();this.dD(r)},a.prototype.dD=function(r){this.mc(),r.description=this.description,r.za=null;var o=this.description.Aa,l=null;if(this.za!=null){l=[];for(var d=0;d<o;d++)this.za[d]!=null&&(l[d]=this.za[d].GB(this.I()*u.ra.Va(this.description.Ed(d))))}this.$!=null?(r.$=this.$.Ia(),this.$.copyTo(r.$)):r.$=null,r.wa=this.wa,r.Hm=this.Hm,r.za=l;try{this.op(r)}catch{throw r.Oa(),u.i.fu()}},a.prototype.wD=function(){this.wa=0,this.Pg=-1,this.za=null,this.Pc(16777215)},a.prototype.Pc=function(r){r==16777215&&(this.Pg=-1,this.$x()),this.Hm|=r,this.lM(),this.vc()},a.prototype.wu=function(r){if(this.mc(),this.ak(192))if(this.$==null?this.$=new u.Fh(this.description):this.$.Nf(this.description),this.B())this.$.Oa();else{this.hy(r);for(var o=1;o<this.description.Aa;o++)for(var l=this.description.Ed(o),d=u.ra.Va(l),p=this.za[o],g=0;g<d;g++){var y=new u.Nc;y.Oa();for(var w=0;w<this.wa;w++){var S=p.eg(w*d+g);y.Zb(S)}this.$.setInterval(l,g,y)}r&&this.Lf(192,!1)}},a.prototype.hy=function(){this.$.Oa();for(var r=this.za[0],o=new u.h,l=0;l<this.wa;l++)r.tc(2*l,o),this.$.Zb(o)},a.prototype.yp=function(r){r.Oa();for(var o=this.za[0],l=new u.h,d=0;d<this.wa;d++)o.tc(2*d,l),r.Zb(l)},a.prototype.bN=function(){if(this.Pg<this.wa){this.za==null&&(this.za=u.Yc.qI(this.description.Aa)),this.Pg=2147483647;for(var r=0;r<this.description.Aa;r++){var o=this.description.Ed(r);if(this.za[r]!=null){var l=u.ra.Va(o),d=u.O.truncate(this.za[r].size/l);d<this.wa&&(d=u.O.truncate(this.Pg>this.wa+5?(5*this.wa+3)/4:this.wa),this.za[r].resize(d*l,u.ra.se(o))),d<this.Pg&&(this.Pg=d)}else this.za[r]=u.Yc.YE(o,this.wa),this.Pg=this.wa}}this.iy(),this.Lf(32,!1)},a.prototype.dm=function(r){if(0>r)throw u.i.N();r!=this.wa&&(this.wa=r,this.Pc(65535))},a.prototype.om=function(r){if(!this.ak(1)){if(!this.ak(2))return 0;if(this.QT>=r)return this.ak(8)?1:2}return-1},a.prototype.Ch=function(r,o){if(this.QT=o,r==-1)this.Lf(1,!0),this.Lf(8,!0);else if(this.Lf(1,!1),this.Lf(8,!0),r==0)this.Lf(2,!1),this.Lf(4,!1);else if(r==1)this.Lf(2,!0),this.Lf(4,!1);else{if(r!=2)throw u.i.fa("internal error.");this.Lf(2,!0),this.Lf(4,!0)}},a.prototype.lM=function(){this.Bb!=null&&(this.Bb=null)},a.prototype.kD=function(r,o,l,d){if(0>r||r>=this.wa||0>o||o>=this.wa)throw u.i.fa("index out of bounds");this.mc(),d.Nf(this.description),d.B()&&d.un();for(var p=0;p<this.description.Aa;p++)for(var g=this.description.Ed(p),y=0,w=u.ra.Va(g);y<w;y++){var S=this.za[p].eg(w*r+y),k=this.za[p].eg(w*o+y);d.setAttribute(g,y,u.lc.hq(S,k,l))}},a.prototype.yr=function(r,o){var l=this.za[0].o,d=l[2*r]-l[2*o];return r=l[2*r+1]-l[2*o+1],Math.sqrt(d*d+r*r)},a.prototype.KR=function(r){if(0>r||r>=this.wa)throw u.i.ce();this.mc();var o=new u.Sa;o.Nf(this.description),o.B()&&o.un();for(var l=0;l<this.description.Aa;l++)for(var d=this.description.kd(l),p=0,g=u.ra.Va(d);p<g;p++){var y=this.za[l].eg(g*r+p);o.setAttribute(d,p,y)}return o},a.prototype.Dh=function(r,o){if(0>r||r>=this.wa)throw u.i.ce();if(o.B())throw u.i.N();this.mc();for(var l=o.description,d=0;d<l.Aa;d++)for(var p=l.kd(d),g=u.ra.Va(p),y=0;y<g;y++){var w=o.Uc(p,y);this.setAttribute(p,r,y,w)}},a.prototype.lu=function(){return null},a.prototype.fj=function(){return null},a}(u.aa);u.Gx=b}(B||(B={})),function(u){var A=function(){function b(){this.ob=this.Zn=null,this.Tm=124234251,this.Rv=!0,this.Qe=-1,this.ob=new u.$c(7),this.Zn=null}return b.prototype.Vo=function(c){this.Zn=c},b.prototype.RP=function(){this.Rv=!1},b.prototype.De=function(c){this.ob.De(c)},b.prototype.Pr=function(c){var a=this.ob.Ce();return this.rX(a),this.uX(c,a),a},b.prototype.MP=function(c){this.ob.jd(c)},b.prototype.addElement=function(c,a){return a==-1&&(this.Qe==-1&&(this.Qe=this.Pr(-1)),a=this.Qe),this.FD(c,0,a)},b.prototype.KD=function(c){return this.Qe==-1&&(this.Qe=this.Pr(-1)),this.FD(c,1,this.Qe)},b.prototype.xn=function(c){this.Qe==-1&&(this.Qe=this.Pr(-1));var a=this.Qe,r=this.ob.o;if(a==-1||r[7*a]==-1)return c=this.ob.Ll([-1,-1,-1,c,this.gl(),-1,-1]),(r=this.ob.o)[7*a]=c,this.vp(-1,c,a,r),c;var o=a==-1?-1:r[7*a+2];return c=this.ob.Ll([-1,-1,o,c,this.gl(),-1,-1]),(r=this.ob.o)[7*o+1]=c,this.oy(c,r),r[7*c+2]===-1&&(r[7*a]=c),this.vp(-1,c,a,r),c},b.prototype.zu=function(c,a,r,o){var l=-1;l==-1&&(this.Qe==-1&&(this.Qe=this.Pr(-1)),l=this.Qe);var d=this.ob.o;if(l==-1||d[7*l]==-1)return r=this.ob.Ll([-1,-1,-1,r,this.gl(),-1,-1]),(d=this.ob.o)[7*l]=r,this.vp(-1,r,l,d),r;if(o){o=a!=-1?this.Zn.compare(this,r,a):-1;var p=c!=-1?this.Zn.compare(this,r,c):1}else o=-1,p=1;if(o==0||p==0)return d[7*l+3]=o==0?a:c,-1;for((a!=-1&&c!=-1?this.Tm>u.O.bB(this.Tm)>>1:a!=-1)?c=a:o=p,a=!0;;){if(0>o){if((p=d[7*c])==-1){o=c,r=this.ob.Ll([-1,-1,c,r,this.gl(),-1,-1]),(d=this.ob.o)[7*c]=r;break}c=p}else{if((p=d[7*c+1])==-1){o=d[7*c+6],r=this.ob.Ll([-1,-1,c,r,this.gl(),-1,-1]),(d=this.ob.o)[7*c+1]=r;break}c=p}a&&(o*=-1,a=!1)}return this.oy(r,d),d[7*r+2]===-1&&(d[7*l]=r),this.vp(o,r,l,d),r},b.prototype.FF=function(){return this.iR(this.Qe)},b.prototype.vd=function(c,a){a=a==-1?this.Qe:a,this.Rv?this.LP(c,a):this.iY(c,a)},b.prototype.search=function(c,a){for(a=this.sv(a);a!=-1;){var r=this.Zn.compare(this,c,a);if(r==0)return a;a=0>r?this.ll(a):this.Xp(a)}return-1},b.prototype.IW=function(c){for(var a=this.sv(-1),r=-1;a!=-1;){var o=c.compare(this,a);if(o==0)return a;0>o?a=this.ll(a):(r=a,a=this.Xp(a))}return r},b.prototype.uJ=function(c){for(var a=this.sv(-1),r=-1;a!=-1;){var o=c.compare(this,a);if(o==0)return a;0>o?(r=a,a=this.ll(a)):a=this.Xp(a)}return r},b.prototype.ja=function(c){return this.ob.T(c,3)},b.prototype.ll=function(c){return this.ob.T(c,0)},b.prototype.Xp=function(c){return this.ob.T(c,1)},b.prototype.getParent=function(c){return this.ob.T(c,2)},b.prototype.lb=function(c){return this.ob.T(c,6)},b.prototype.we=function(c){return this.ob.T(c,5)},b.prototype.rc=function(c){return c==-1?this.kl(this.Qe):this.kl(c)},b.prototype.Fc=function(c){return c==-1?this.Zr(this.Qe):this.Zr(c)},b.prototype.ZR=function(c){return c==-1?this.bG(this.Qe):this.bG(c)},b.prototype.Sj=function(c,a){this.NB(c,a)},b.prototype.sv=function(c){return c==-1?this.YF(this.Qe):this.YF(c)},b.prototype.clear=function(){this.ob.mj(!1),this.Qe=-1},b.prototype.size=function(c){return c==-1?this.$F(this.Qe):this.$F(c)},b.prototype.KN=function(c,a){for(var r=a[7*c],o=a[7*c+1],l=a[7*c+4];r!=-1||o!=-1;){var d=r!=-1?a[7*r+4]:2147483647;if(o=o!=-1?a[7*o+4]:2147483647,l<=Math.min(d,o))break;d<=o?this.sJ(r,a):this.rJ(c,a),r=a[7*c],o=a[7*c+1]}},b.prototype.oy=function(c,a){if(this.Rv)for(var r=a[7*c+4],o=a[7*c+2];o!=-1&&a[7*o+4]>r;)a[7*o]==c?this.sJ(c,a):this.rJ(o,a),o=a[7*c+2]},b.prototype.rJ=function(c,a){var r=a[7*c+1];a[7*r+2]=a[7*c+2],a[7*c+2]=r;var o=a[7*r];a[7*c+1]=o,o!=-1&&(a[7*o+2]=c),a[7*r]=c,(o=a[7*r+2])!=-1&&(a[7*o]==c?a[7*o]=r:a[7*o+1]=r)},b.prototype.sJ=function(c,a){var r=a[7*c+2];a[7*c+2]=a[7*r+2],a[7*r+2]=c;var o=a[7*c+1];a[7*r]=o,o!=-1&&(a[7*o+2]=r),a[7*c+1]=r,(o=a[7*c+2])!=-1&&(a[7*o]===r?a[7*o]=c:a[7*o+1]=c)},b.prototype.Pk=function(c,a){this.ob.S(c,2,a)},b.prototype.TB=function(c,a){this.ob.S(c,0,a)},b.prototype.XB=function(c,a){this.ob.S(c,1,a)},b.prototype.WB=function(c,a){this.ob.S(c,5,a)},b.prototype.ex=function(c,a){this.ob.S(c,6,a)},b.prototype.XJ=function(c,a){this.ob.S(a,0,c)},b.prototype.rX=function(c){this.ob.S(c,4,0)},b.prototype.uX=function(c,a){this.ob.S(a,5,c)},b.prototype.YF=function(c){return c==-1?-1:this.ob.T(c,0)},b.prototype.kl=function(c){return c==-1?-1:this.ob.T(c,1)},b.prototype.Zr=function(c){return c==-1?-1:this.ob.T(c,2)},b.prototype.iR=function(c){return c==-1?-1:this.ob.T(c,3)},b.prototype.$F=function(c){return c==-1?0:this.ob.T(c,4)},b.prototype.bG=function(c){return this.ob.T(c,5)},b.prototype.Pw=function(){return this.ob.Ll([-1,-1,-1,void 0,this.gl(),-1,-1])},b.prototype.fl=function(c){c!=-1&&this.ob.jd(c)},b.prototype.gl=function(){return this.Tm=u.O.bB(this.Tm),1073741823&this.Tm},b.prototype.FD=function(c,a,r){var o=this.ob.o;if(r==-1||o[7*r]==-1)return c=this.ob.Ll([-1,-1,-1,c,this.gl(),-1,-1]),(o=this.ob.o)[7*r]=c,this.vp(-1,c,r,o),c;for(var l=r==-1?-1:o[7*r];;){var d=a==-1?1:this.Zn.compare(this,c,l);if(0>d){if((d=this.ll(l))==-1){a=l,c=this.ob.Ll([-1,-1,l,c,this.gl(),-1,-1]),(o=this.ob.o)[7*l]=c;break}l=d}else{if(a==1&&d==0)return o[7*r+3]=l,-1;if((d=o[7*l+1])==-1){a=o[7*l+6],c=this.ob.Ll([-1,-1,l,c,this.gl(),-1,-1]),(o=this.ob.o)[7*l+1]=c;break}l=d}}return this.oy(c,o),o[7*c+2]===-1&&(o[7*r]=c),this.vp(a,c,r,o),c},b.prototype.vp=function(c,a,r,o){if(c!=-1){var l=o[7*c+5];o[7*c+5]=a}else l=r==-1?-1:o[7*r+2];o[7*a+5]=l,l!=-1&&(o[7*l+6]=a),o[7*a+6]=c,c==(r==-1?-1:o[7*r+1])&&(o[7*r+1]=a),c==-1&&(o[7*r+2]=a),o[7*r+4]=(r==-1?0:o[7*r+4])+1},b.prototype.AB=function(c,a){var r=this.ob.o,o=r[7*c+5];c=r[7*c+6],o!=-1?r[7*o+6]=c:r[7*a+1]=c,c!=-1?r[7*c+5]=o:r[7*a+2]=o,r[7*a+4]=a===-1?-1:r[7*a+4]-1},b.prototype.iY=function(c,a){this.AB(c,a);var r=this.ll(c),o=this.Xp(c),l=this.getParent(c),d=c;if(r!=-1&&o!=-1){this.Tm=u.O.bB(this.Tm);var p=1073741823<this.Tm?this.lb(c):this.we(c),g=this.getParent(p)==c;this.ob.gC(c,p,0),this.ob.gC(c,p,1),this.ob.gC(c,p,2),l!=-1?this.ll(l)==c?this.TB(l,p):this.XB(l,p):this.XJ(p,a),g?(r==p?(this.TB(p,c),this.Pk(o,p)):o==p&&(this.XB(p,c),this.Pk(r,p)),this.Pk(c,p),l=p):(this.Pk(r,p),this.Pk(o,p),l=this.getParent(c),d=p),r=this.ll(c),o=this.Xp(c),r!=-1&&this.Pk(r,c),o!=-1&&this.Pk(o,c)}r=r!=-1?r:o,l==-1?this.XJ(r,a):this.ll(l)==d?this.TB(l,r):this.XB(l,r),r!=-1&&this.Pk(r,l),this.fl(c)},b.prototype.LP=function(c,a){var r=this.ob.o;r[7*c+4]=2147483647;var o=-1,l=-1,d=a===-1?-1:r[7*a],p=d==c;if(p&&(o=r[7*d],l=r[7*d+1],o==-1&&l==-1))return this.AB(d,a),this.fl(d),void(r[7*a]=-1);this.KN(c,r),(d=r[7*c+2])!=-1&&(r[7*d]==c?r[7*d]=-1:r[7*d+1]=-1),this.AB(c,a),this.fl(c),p&&(r[7*a]=o==-1||r[7*o+2]!=-1?l:o)},b.prototype.NB=function(c,a){this.ob.S(c,3,a)},b}();u.Yj=A}(B||(B={})),function(u){var A=function(){function b(c,a){c!==void 0&&this.K(c,a)}return b.prototype.K=function(c,a){this.oa=c,this.va=a,this.normalize()},b.prototype.isIntersecting=function(c){return this.oa<=c.oa?this.va>=c.oa:c.va>=this.oa},b.prototype.move=function(c){this.B()||(this.oa+=c,this.va+=c)},b.prototype.normalize=function(){if(!isNaN(this.oa)){if(this.oa>this.va){var c=this.oa;this.oa=this.va,this.va=c}isNaN(this.va)&&this.Oa()}},b.prototype.Oa=function(){this.va=this.oa=NaN},b.prototype.B=function(){return isNaN(this.oa)},b.prototype.Zb=function(c){typeof c=="number"?this.B()?this.va=this.oa=c:this.Lk(c):c.B()||(this.B()?(this.oa=c.oa,this.va=c.va):(this.oa>c.oa&&(this.oa=c.oa),this.va<c.va&&(this.va=c.va),this.oa>this.va&&this.Oa()))},b.prototype.Lk=function(c){c<this.oa?this.oa=c:c>this.va&&(this.va=c)},b.prototype.contains=function(c){return typeof c=="number"?c>=this.oa&&c<=this.va:c.oa>=this.oa&&c.va<=this.va},b.prototype.Ea=function(c){this.B()||c.B()?this.Oa():(this.oa<c.oa&&(this.oa=c.oa),this.va>c.va&&(this.va=c.va),this.oa>this.va&&this.Oa())},b.prototype.W=function(c){this.B()||(this.oa-=c,this.va+=c,this.va<this.oa&&this.Oa())},b.prototype.xr=function(){return this.B()?2220446049250313e-29:2220446049250313e-29*(Math.abs(this.oa)+Math.abs(this.va)+1)},b.prototype.KB=function(c,a){c>a?(this.oa=a,this.va=c):(this.oa=c,this.va=a)},b.prototype.It=function(c){return u.O.Rk(c,this.oa,this.va)},b.prototype.R=function(){return this.va-this.oa},b.prototype.sf=function(){return .5*(this.oa+this.va)},b.prototype.Nb=function(c){return c==this||c instanceof b&&(!(!this.B()||!c.B())||this.oa==c.oa&&this.va==c.va)},b.prototype.cc=function(){return u.O.uj(u.O.uj())},b}();u.Nc=A}(B||(B={})),function(u){var A=new u.Nc,b=new u.Nc,c=function(){this.ne=null,this.pb=-1,this.sb=new u.yb,this.qA=55555555,this.Tv=this.Vv=!1,this.Uf=new u.Nc,this.Uf.KB(0,0)};u.IY=c;var a=function(){function r(o,l,d){this.g=o,this.Hk=NaN,this.NH=this.Kq=0,this.OH=NaN,this.qa=l,this.Nq=10*l,this.PH=this.QH=NaN,this.rg=!1,this.Dm=this.gt=this.Lo=this.Xs=this.Ws=-1,this.gA=d,this.TA=new c,this.YH=new c,u.O.truncate(3*o.fd/2)}return r.prototype.mG=function(o,l,d,p){o.ne=p===null?null:p[d[5*l]],o.Tv=o.ne!=null,o.Tv||((p=d[5*l+2])!==-1&&this.g.mW(d[5*l],d[5*p],o.sb),o.ne=o.sb,o.Uf.KB(o.sb.sa,o.sb.pa),o.Uf.va+=this.qa,o.sb.rI(),o.Vv=o.sb.la==o.sb.na,o.Vv||(o.qA=(o.sb.pa-o.sb.sa)/(o.sb.la-o.sb.na)))},r.prototype.OO=function(o,l){var d=o.zr(l,this.qa,!0);return d!=0?d==2?this.Qy():this.xi():(o.Yp(Dn),o.Tr(kr),l.Yp($r),l.Tr(Pi),li.ma(this.Kq,this.Hk),Dn.qb($r)&&this.Hk==Dn.y?0>kr.compare(Pi)?li.L(kr):li.L(Pi):Dn.qb(Pi)&&this.Hk==Dn.y?0>kr.compare($r)?li.L(kr):li.L($r):$r.qb(kr)&&this.Hk==$r.y?0>Dn.compare(Pi)?li.L(Dn):li.L(Pi):kr.qb(Pi)&&this.Hk==kr.y&&(0>Dn.compare($r)?li.L(Dn):li.L($r)),o.Pe(li.y,li.x)<l.Pe(li.y,li.x)?-1:1)},r.prototype.MO=function(o,l){if(o.sb.na==l.sb.na&&o.sb.sa==l.sb.sa)return o.sb.la==l.sb.la&&o.sb.pa==l.sb.pa?this.gA?this.Qy():0:this.PE(o,l);if(o.sb.la==l.sb.la&&o.sb.pa==l.sb.pa)return this.OE(o,l);var d=this.OE(o,l);return o=this.PE(o,l),0>d&&0>o?-1:0<d&&0<o?1:this.xi()},r.prototype.IO=function(o,l){if(o.pa>l.pa){if(l.pa>l.sa&&l.la-l.na<2*this.qa&&o.vi(l.pa,l.la,this.qa))return this.xi()}else if((l.la-l.na)/(l.pa-l.sa)*(o.pa-o.sa)<this.Nq&&l.vi(o.pa,o.la,this.qa))return this.xi();return 1},r.prototype.JO=function(o,l){if(o.sa<l.sa){if(l.pa>l.sa&&l.la-l.na<2*this.qa&&o.vi(l.pa,l.la,this.qa))return this.xi()}else if((l.la-l.na)/(l.pa-l.sa)*(o.sa-o.pa)<this.Nq&&l.vi(o.sa,o.na,this.qa))return this.xi();return-1},r.prototype.KO=function(o,l){var d=new u.h;d.uc(l.wc(),l.ac()),d.ar(),d.normalize();var p=new u.h;p.uc(o.ac(),l.ac());var g=new u.h;g.uc(o.wc(),l.ac()),p=p.Qh(d),d=g.Qh(d),g=Math.abs(p);var y=Math.abs(d);if(g<y){if(g<this.Nq&&l.vi(o.sa,o.na,this.qa))return this.xi()}else if(y<this.Nq&&l.vi(o.pa,o.la,this.qa))return this.xi();return 0>p&&0>d?-1:0<p&&0<d?1:this.xi()},r.prototype.NE=function(o,l){return o.na==l.na&&o.sa==l.sa?this.IO(o,l):o.la==l.la&&o.pa==l.pa?this.JO(o,l):this.KO(o,l)},r.prototype.LO=function(o,l){return o.la==l.la&&o.pa==l.pa&&o.na==l.na&&o.sa==l.sa?this.gA?this.Qy():0:this.xi()},r.prototype.OE=function(o,l){var d=1;if(o.sb.na<l.sb.na){d=-1;var p=o;o=l,l=p}o=o.sb,p=l.sb;var g=o.sa-p.sa;l=l.qA*(o.na-p.na);var y=this.Nq;return g<l-y?-d:g>l+y?d:p.vi(o.sa,o.na,this.qa)?this.xi():g<l?-d:d},r.prototype.PE=function(o,l){var d=1;if(l.sb.la<o.sb.la){d=-1;var p=o;o=l,l=p}o=o.sb,p=l.sb;var g=o.pa-p.sa;l=l.qA*(o.la-p.na);var y=this.Nq;return g<l-y?-d:g>l+y?d:p.vi(o.pa,o.la,this.qa)?this.xi():g<l?-d:d},r.prototype.Qy=function(){return this.rg=!0,this.Ni=new u.Md(5,this.Lo,this.gt),-1},r.prototype.xi=function(){return this.rg=!0,this.gA?this.Ni=new u.Md(4,this.Lo,this.gt):this.gt=this.Lo=this.Xs=this.Ws=-1,-1},r.prototype.NO=function(o,l,d,p){if(this.rg)return-1;var g=this.OH==this.Hk&&this.NH==this.Kq;if(g&&o==this.Ws)var y=this.PH;else y=NaN,this.Ws=-1;return g&&l==this.Xs?g=this.QH:(g=NaN,this.Xs=-1),d.ne.ZI(A),p.ne.ZI(b),A.va<b.oa?-1:b.va<A.oa?1:(this.OH=this.Hk,this.NH=this.Kq,isNaN(y)&&(this.Ws=o,this.PH=y=o=d.ne.Pe(this.Hk,this.Kq)),isNaN(g)&&(this.Xs=l,this.QH=g=o=p.ne.Pe(this.Hk,this.Kq)),Math.abs(y-g)<=this.qa?this.OO(d.ne,p.ne):y<g?-1:y>g?1:0)},r.prototype.Kr=function(){this.rg=!1},r.prototype.rm=function(){return this.Ni},r.prototype.$J=function(o,l){this.Hk=o,this.Kq=l,this.gt=this.Lo=this.Xs=this.Ws=-1},r.prototype.compare=function(o,l,d){return this.rg?-1:(o=o.ja(d),this.Dm=d,this.RE(l,l,o,o))},r.prototype.RE=function(o,l,d,p){if(this.Lo==l)var g=this.TA;else this.Lo=l,g=this.TA,this.TA.pb=o,this.mG(g,l,this.g.td.o,this.g.We);if(y==null){this.gt=p;var y=this.YH;this.YH.pb=d,this.mG(y,p,this.g.td.o,this.g.We)}return g.Tv||y.Tv?this.NO(l,p,g,y):g.Uf.va<y.Uf.oa?-1:y.Uf.va<g.Uf.oa?1:(o=g.Vv?1:0,(o|=y.Vv?2:0)==0?this.MO(g,y):o==1?this.NE(g.sb,y.sb):o==2?-1*this.NE(y.sb,g.sb):this.LO(g.sb,y.sb))},r}();u.UC=a}(B||(B={})),function(u){var A=function(){function b(c,a){this.g=c,this.qa=a,this.rg=!1,this.Lo=-1,this.Uf=new u.Nc,this.Gq=new u.h,this.Gq.Rc(),this.ie=new u.yb,this.Dm=-1,this.BA=17976931348623157e292}return b.prototype.Kr=function(){this.rg=!1,this.BA=17976931348623157e292},b.prototype.Dh=function(c){this.Gq.L(c)},b.prototype.compare=function(c,a){return this.SE(a,c.ja(a))},b.prototype.SE=function(c,a){var r=this.g.bc(a)!=null;if(r||(this.g.ed(a,this.ie),this.Uf.KB(this.ie.sa,this.ie.pa)),r)throw u.i.fa("not implemented");if(this.Gq.x+this.qa<this.Uf.oa)return-1;if(this.Gq.x-this.qa>this.Uf.va)return 1;if(this.ie.na==this.ie.la)return this.Dm=c,this.rg=!0,0;this.ie.rI(),r=this.ie.ac(),(a=new u.h).uc(this.ie.wc(),r),a.ar();var o=new u.h;return o.uc(this.Gq,r),r=a.Qh(o),(r/=a.length())<10*-this.qa?-1:r>10*this.qa?1:this.ie.qs(this.Gq,this.qa)&&((a=Math.abs(r))<this.BA&&(this.Dm=c,this.BA=a),this.rg=!0,a<.25*this.qa)?0:0>r?-1:1},b}();u.aM=A}(B||(B={})),function(u){function A(c,a,r,o){r=new Float64Array(c.subarray(r,o)),c.set(r,a)}var b=function(){function c(a){this.Pb=this.pk=!1,this.o=null;var r=a;2>r&&(r=2),this.o=new Float64Array(r),this.size=a}return c.prototype.rotate=function(a,r,o){if(this.Pb)throw u.i.fa("invalid_call");if(r<a||r>o||a>o)throw u.i.N();a!=r&&o!=r&&(this.ni(a,r-a,1),this.ni(r,o-r,1),this.ni(a,o-a,1))},c.qf=function(a,r){var o=new c(a),l=o.o;if(2>a&&(a=2),r!==0)for(var d=0;d<a;d++)l[d]=r;return o},c.Bn=function(a){var r=new c(0);return r.o=new Float64Array(a.o),r.size=a.size,r},c.Lr=function(a,r){var o=new c(0);return o.size=a.size,o.size>r&&(o.size=r),2>(r=o.size)&&(r=2),o.o=new Float64Array(r),o.o.set(a.o.length<=r?a.o:a.o.subarray(0,r),0),o},c.prototype.Jb=function(a){0>=a||(this.o==null?this.o=new Float64Array(a):a<=this.o.length||(0<this.o.length?((a=new Float64Array(a)).set(this.o),this.o=a):this.o=new Float64Array(a)))},c.prototype.read=function(a){return this.o[a]},c.prototype.tc=function(a,r){r.x=this.o[a],r.y=this.o[a+1]},c.prototype.get=function(a){return this.o[a]},c.prototype.write=function(a,r){if(this.Pb)throw u.i.Hb();this.o[a]=r},c.prototype.set=function(a,r){if(this.Pb)throw u.i.Hb();this.o[a]=r},c.prototype.Tt=function(a,r){if(this.Pb)throw u.i.Hb();this.o[a]=r.x,this.o[a+1]=r.y},c.prototype.add=function(a){this.resize(this.size+1),this.o[this.size-1]=a},c.prototype.GB=function(a){return c.Lr(this,a)},c.prototype.eg=function(a){return this.read(a)},c.prototype.resize=function(a,r){if(r===void 0&&(r=0),this.pk)throw u.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");if(a<=this.size){if(30<this.o.length&&5*a/4<this.o.length){var o=new Float64Array(this.o,0,a);this.o=o}}else{a>this.o.length&&(o=u.O.truncate(64>a?Math.max(2*a,4):5*a/4),(o=new Float64Array(o)).set(this.o),this.o=o),o=this.o;for(var l=this.size;l<a;l++)o[l]=r}this.size=a},c.prototype.Bh=function(a){if((this.o==null||a>this.o.length)&&this.resize(a),this.pk)throw u.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");this.size=a},c.prototype.pr=function(a,r){this.write(a,r)},c.prototype.An=function(a,r,o){for(var l=this.size;r<l&&r<o;r++)a=u.O.uj(this.read(r));return a},c.prototype.Nb=function(a,r,o){if(a==null||!(a instanceof c))return!1;var l=this.size,d=a.size;if(o>l||o>d&&l!=d)return!1;for(o>l&&(o=l);r<o;r++)if(this.read(r)!=a.read(r))return!1;return!0},c.prototype.addRange=function(a,r,o,l,d){if(this.Pb)throw u.i.Hb();if(!l&&(1>d||o%d!=0))throw u.i.N();var p=this.size;if(this.resize(p+o),l)this.o.set(a.o.subarray(r,r+o),p);else{l=o;for(var g=0;g<o;g+=d){l-=d;for(var y=0;y<d;y++)this.o[p+g+y]=a.o[r+l+y]}}},c.prototype.Mn=function(a,r,o,l,d,p,g){if(this.Pb)throw u.i.Hb();if(!d&&(1>p||l%p!=0))throw u.i.N();var y=this.size-g;if(y<l&&this.resize(this.size+l-y),A(this.o,a+l,a,a+(g-a)),this.o==r.o&&a<o&&(o+=l),d)this.o.set(r.o.subarray(o,o+l),a);else for(d=l,g=0;g<l;g+=p)for(d-=p,y=0;y<p;y++)this.o[a+g+y]=r.o[o+d+y]},c.prototype.Iz=function(a,r,o,l,d,p){if(this.Pb)throw u.i.Hb();if(0>p&&(p=this.size),this.size+2*l>this.o.length?this.resize(this.size+2*l):this.size+=2*l,A(this.o,a+2*l,a,a+(p-a)),d)for(d=0;d<l;d++)p=r[o++],this.o[a++]=p.x,this.o[a++]=p.y;else{d=0;for(var g=l-1;d<l;++d)p=r[o+g],this.o[a++]=p.x,this.o[a++]=p.y,g--}},c.prototype.Ln=function(a,r,o,l){if(this.Pb)throw u.i.Hb();for(l-=a,A(this.o,a+l,a,a+l),l=0;l<o;l++)this.o[a+l]=r},c.prototype.vj=function(a,r,o){if(this.Pb)throw u.i.Hb();A(this.o,a+2,a,a+(o-a)),this.o[a]=r.x,this.o[a+1]=r.y},c.prototype.Ut=function(a,r,o,l,d,p){if(0>a||0>r||0>l||!d&&(0>=p||r%p!=0)||o.size<l+r)throw u.i.N();if(r!=0)if(this.size<r+a&&this.resize(r+a),o==this)this.Ar(a,r,l,d,p);else if(d)for(d=0;d<r;d++)this.o[a]=o.o[l],a++,l++;else if(l=l+r-p,p==1)for(d=0;d<r;d++)this.o[a]=o.o[l],a++,l--;else for(d=0,r=u.O.truncate(r/p);d<r;d++){for(var g=0;g<p;g++)this.o[a+g]=o.o[l+g];a+=p,l-=p}},c.prototype.En=function(a,r,o){if(this.Pb||a+r>this.size)throw u.i.Hb();0<o-(a+r)&&A(this.o,a,a+r,a+(o-(a+r))+r),this.size-=r},c.prototype.ni=function(a,r,o){if(this.Pb||1>o||r%o!=0)throw u.i.Hb();for(var l=r>>1,d=0;d<l;d+=o){r-=o;for(var p=0;p<o;p++){var g=this.o[a+d+p];this.o[a+d+p]=this.o[a+r+p],this.o[a+r+p]=g}}},c.prototype.Wj=function(a,r,o){if(0>r||0>o||0>r||o+r>this.size)throw u.i.N();for(var l=r;l<r+o;l++)this.o[l]=a},c.prototype.Ar=function(a,r,o,l,d){if(!(l&&a==o||(this.o.set(this.o.subarray(o,o+r),a),l)))for(o=a,a=a+r-d,l=0,r=u.O.truncate(r/2);l<r;l++){for(var p=0;p<d;p++){var g=this.o[o+p];this.o[o+p]=this.o[a+p],this.o[a+p]=g}o+=d,a-=d}},c.prototype.vC=function(a,r,o,l,d){if(0>a||0>r||0>l)throw u.i.N();if(r!=0)for(this.size<(r<<1)+a&&this.resize((r<<1)+a),d||(a+=r-1<<1),d=d?2:-2,r+=l;l<r;l++)this.o[a]=o[l].x,this.o[a+1]=o[l].y,a+=d},c.prototype.uC=function(a,r,o){if(0>a||0>r)throw u.i.N();if(r!=0){this.size<(r<<1)+a&&this.resize((r<<1)+a),r+=0;for(var l=0;l<r;l++)this.o[a]=o[l][0],this.o[a+1]=o[l][1],a+=2}},c.prototype.Vw=function(a,r,o,l,d){if(0>a||0>r||0>l||this.size<r+a)throw u.i.N();if(d)for(d=0;d<r;d++)o[l+d]=this.o[a+d];else for(l=l+r-1;a<r;a++)o[l]=this.o[a],l--},c.prototype.uB=function(a,r,o){if(0>a||0>r||this.size<(r>>1)+a)throw u.i.N();if(r!=0){r=0+r;for(var l=0;l<r;l++)o[l][0]=this.o[a],o[l][1]=this.o[a+1],a+=2}},c.prototype.clear=function(a){a?this.resize(0):this.Bh(0)},c.prototype.ix=function(){this.pk=this.Pb=!0},c.prototype.Vd=function(a,r,o){Array.prototype.sort.call(this.o.subarray(a,r),o)},c.prototype.Tp=function(){return 1},c}();u.be=b}(B||(B={})),function(u){function A(c,a,r,o){r=new Int32Array(c.subarray(r,o)),c.set(r,a)}u.rY=function(){this.random=1973};var b=function(){function c(a){this.Pb=this.pk=!1,this.o=null;var r=a;2>r&&(r=2),this.o=new Int32Array(r),this.size=a}return c.prototype.rotate=function(a,r,o){if(this.Pb)throw u.i.fa("invalid_call");if(r<a||r>o||a>o)throw u.i.N();a!=r&&o!=r&&(this.ni(a,r-a,1),this.ni(r,o-r,1),this.ni(a,o-a,1))},c.qf=function(a,r){var o=new c(a),l=o.o;if(2>a&&(a=2),r!==0)for(var d=0;d<a;d++)l[d]=r;return o},c.Bn=function(a){var r=new c(0);return r.o=new Int32Array(a.o),r.size=a.size,r},c.Lr=function(a,r){var o=new c(0);return o.size=a.size,o.size>r&&(o.size=r),2>(r=o.size)&&(r=2),o.o=new Int32Array(r),o.o.set(a.o.length<=r?a.o:a.o.subarray(0,r),0),o},c.prototype.Jb=function(a){0>=a||(this.o==null?this.o=new Int32Array(a):a<=this.o.length||(0<this.o.length?((a=new Int32Array(a)).set(this.o),this.o=a):this.o=new Int32Array(a)))},c.prototype.read=function(a){return this.o[a]},c.prototype.tc=function(a,r){r.x=this.o[a],r.y=this.o[a+1]},c.prototype.get=function(a){return this.o[a]},c.prototype.write=function(a,r){if(this.Pb)throw u.i.Hb();this.o[a]=r},c.prototype.set=function(a,r){if(this.Pb)throw u.i.Hb();this.o[a]=r},c.prototype.Tt=function(a,r){if(this.Pb)throw u.i.Hb();this.o[a]=r.x,this.o[a+1]=r.y},c.prototype.add=function(a){this.resize(this.size+1),this.o[this.size-1]=a},c.prototype.GB=function(a){return c.Lr(this,a)},c.prototype.eg=function(a){return this.read(a)},c.prototype.resize=function(a,r){if(r===void 0&&(r=0),this.pk)throw u.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");if(a<=this.size){if(30<this.o.length&&5*a/4<this.o.length){var o=new Int32Array(this.o,0,a);this.o=o}}else{a>this.o.length&&(o=u.O.truncate(64>a?Math.max(2*a,4):5*a/4),(o=new Int32Array(o)).set(this.o),this.o=o),o=this.o;for(var l=this.size;l<a;l++)o[l]=r}this.size=a},c.prototype.Bh=function(a){if((this.o==null||a>this.o.length)&&this.resize(a),this.pk)throw u.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");this.size=a},c.prototype.pr=function(a,r){this.write(a,r)},c.prototype.An=function(a,r,o){for(var l=this.size;r<l&&r<o;r++)a=u.O.Th(this.read(r),a);return a},c.prototype.Nb=function(a,r,o){if(a==null||!(a instanceof c))return!1;var l=this.size,d=a.size;if(o>l||o>d&&l!=d)return!1;for(o>l&&(o=l);r<o;r++)if(this.read(r)!=a.read(r))return!1;return!0},c.prototype.addRange=function(a,r,o,l,d){if(this.Pb)throw u.i.Hb();if(!l&&(1>d||o%d!=0))throw u.i.N();var p=this.size;if(this.resize(p+o),l)this.o.set(a.o.subarray(r,r+o),p);else{l=o;for(var g=0;g<o;g+=d){l-=d;for(var y=0;y<d;y++)this.o[p+g+y]=a.o[r+l+y]}}},c.prototype.Mn=function(a,r,o,l,d,p,g){if(this.Pb)throw u.i.Hb();if(!d&&(1>p||l%p!=0))throw u.i.N();if(A(this.o,a+l,a,a+(g-a)),this.o==r.o&&a<o&&(o+=l),d)this.o.set(r.o.subarray(o,o+l),a);else for(d=l,g=0;g<l;g+=p){d-=p;for(var y=0;y<p;y++)this.o[a+g+y]=r.o[o+d+y]}},c.prototype.Iz=function(a,r,o,l,d,p){if(this.Pb)throw u.i.Hb();if(0>p&&(p=this.size),this.size+2*l>this.o.length?this.resize(this.size+2*l):this.size+=2*l,A(this.o,a+2*l,a,a+(p-a)),d)for(d=0;d<l;d++)p=r[o++],this.o[a++]=p.x,this.o[a++]=p.y;else{d=0;for(var g=l-1;d<l;++d)p=r[o+g],this.o[a++]=p.x,this.o[a++]=p.y,g--}},c.prototype.Ln=function(a,r,o,l){if(this.Pb)throw u.i.Hb();for(l-=a,A(this.o,a+l,a,a+l),l=0;l<o;l++)this.o[a+l]=r},c.prototype.vj=function(a,r,o){if(this.Pb)throw u.i.Hb();A(this.o,a+2,a,a+(o-a)),this.o[a]=r.x,this.o[a+1]=r.y},c.prototype.Ut=function(a,r,o,l,d,p){if(0>a||0>r||0>l||!d&&(0>=p||r%p!=0)||o.size<l+r)throw u.i.N();if(r!=0)if(this.size<r+a&&this.resize(r+a),o==this)this.Ar(a,r,l,d,p);else if(d)for(d=0;d<r;d++)this.o[a]=o.o[l],a++,l++;else if(l=l+r-p,p==1)for(d=0;d<r;d++)this.o[a]=o.o[l],a++,l--;else for(d=0,r=u.O.truncate(r/p);d<r;d++){for(var g=0;g<p;g++)this.o[a+g]=o.o[l+g];a+=p,l-=p}},c.prototype.En=function(a,r,o){if(this.Pb||a+r>this.size)throw u.i.Hb();0<o-(a+r)&&A(this.o,a,a+r,a+(o-(a+r))+r),this.size-=r},c.prototype.ni=function(a,r,o){if(this.Pb||1>o||r%o!=0)throw u.i.Hb();for(var l=r>>1,d=0;d<l;d+=o){r-=o;for(var p=0;p<o;p++){var g=this.o[a+d+p];this.o[a+d+p]=this.o[a+r+p],this.o[a+r+p]=g}}},c.prototype.Wj=function(a,r,o){if(0>r||0>o||0>r||o+r>this.size)throw u.i.N();for(var l=r;l<r+o;l++)this.o[l]=a},c.prototype.Ar=function(a,r,o,l,d){if(!(l&&a==o||(this.o.set(this.o.subarray(o,o+r),a),l)))for(o=a,a=a+r-d,l=0,r=u.O.truncate(r/2);l<r;l++){for(var p=0;p<d;p++){var g=this.o[o+p];this.o[o+p]=this.o[a+p],this.o[a+p]=g}o+=d,a-=d}},c.prototype.vC=function(a,r,o,l,d){if(0>a||0>r||0>l)throw u.i.N();if(r!=0)for(this.size<(r<<1)+a&&this.resize((r<<1)+a),d||(a+=r-1<<1),d=d?2:-2,r+=l;l<r;l++)this.o[a]=o[l].x,this.o[a+1]=o[l].y,a+=d},c.prototype.Vw=function(a,r,o,l,d){if(0>a||0>r||0>l||this.size<r+a)throw u.i.N();if(d)for(d=0;d<r;d++)o[l+d]=this.o[a+d];else for(l=l+r-1;a<r;a++)o[l]=this.o[a],l--},c.prototype.clear=function(a){a?this.resize(0):this.Bh(0)},c.prototype.ix=function(){this.pk=this.Pb=!0},c.prototype.Vd=function(a,r,o){10>r-a?c.rG(this.o,a,r,o):c.qB(this.o,a,r-1,o)},c.prototype.Tp=function(){return 2},c.prototype.Fc=function(){return this.o[this.size-1]},c.prototype.If=function(){this.resize(this.size-1)},c.prototype.bX=function(a){this.o[this.size-1]=a},c.prototype.SV=function(a){a<this.size-1&&(this.o[a]=this.o[this.size-1]),this.resize(this.size-1)},c.prototype.lF=function(a){for(var r=0,o=this.size;r<o;r++)if(this.o[r]==a)return r;return-1},c.prototype.hG=function(a){return 0<=this.lF(a)},c.rG=function(a,r,o,l){for(var d=r;d<o;d++){for(var p=a[d],g=d-1;g>=r&&0<l(a[g],p);)a[g+1]=a[g],g--;a[g+1]=p}},c.tx=function(a,r,o){var l=a[o];a[o]=a[r],a[r]=l},c.qB=function(a,r,o,l){if(!(r>=o))for(;;){if(9>o-r){c.rG(a,r,o+1,l);break}var d=a[r];c.tx(a,r,o);for(var p=r,g=r;g<o;g++)0>=l(a[g],d)&&(c.tx(a,p,g),p+=1);c.tx(a,p,o),p-r<o-p?(c.qB(a,r,p-1,l),r=p+1):(c.qB(a,p+1,o,l),o=p-1)}},c}();u.ia=b}(B||(B={})),function(u){function A(c,a,r,o){r=new Int8Array(c.subarray(r,o)),c.set(r,a)}var b=function(){function c(a){this.o=null;var r=a;2>r&&(r=2),this.o=new Int8Array(r),this.size=a}return c.prototype.rotate=function(a,r,o){if(this.Pb)throw u.i.fa("invalid_call");if(r<a||r>o||a>o)throw u.i.N();a!=r&&o!=r&&(this.ni(a,r-a,1),this.ni(r,o-r,1),this.ni(a,o-a,1))},c.qf=function(a,r){var o=new c(a),l=o.o;if(2>a&&(a=2),r!==0)for(var d=0;d<a;d++)l[d]=r;return o},c.Bn=function(a){var r=new c(0);return r.o=new Int8Array(a.o),r.size=a.size,r},c.Lr=function(a,r){var o=new c(0);return o.size=a.size,o.size>r&&(o.size=r),2>(r=o.size)&&(r=2),o.o=new Int8Array(r),o.o.set(a.o.length<=r?a.o:a.o.subarray(0,r),0),o},c.prototype.Jb=function(a){0>=a||(this.o==null?this.o=new Int8Array(a):a<=this.o.length||(0<this.o.length?((a=new Int8Array(a)).set(this.o),this.o=a):this.o=new Int8Array(a)))},c.prototype.read=function(a){return this.o[a]},c.prototype.tc=function(a,r){r.x=this.o[a],r.y=this.o[a+1]},c.prototype.get=function(a){return this.o[a]},c.prototype.write=function(a,r){if(this.Pb)throw u.i.Hb();this.o[a]=r},c.prototype.set=function(a,r){if(this.Pb)throw u.i.Hb();this.o[a]=r},c.prototype.Tt=function(a,r){if(this.Pb)throw u.i.Hb();this.o[a]=r.x,this.o[a+1]=r.y},c.prototype.add=function(a){this.resize(this.size+1),this.o[this.size-1]=a},c.prototype.GB=function(a){return c.Lr(this,a)},c.prototype.eg=function(a){return this.read(a)},c.prototype.resize=function(a,r){if(r===void 0&&(r=0),this.pk)throw u.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");if(a<=this.size){if(30<this.o.length&&5*a/4<this.o.length){var o=new Int8Array(this.o,0,a);this.o=o}}else{a>this.o.length&&(o=u.O.truncate(64>a?Math.max(2*a,4):5*a/4),(o=new Int8Array(o)).set(this.o),this.o=o),o=this.o;for(var l=this.size;l<a;l++)o[l]=r}this.size=a},c.prototype.Bh=function(a){if((this.o==null||a>this.o.length)&&this.resize(a),this.pk)throw u.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");this.size=a},c.prototype.pr=function(a,r){this.write(a,r)},c.prototype.An=function(a,r,o){for(var l=this.size;r<l&&r<o;r++)a=u.O.Th(this.read(r),a);return a},c.prototype.Nb=function(a,r,o){if(a==null||!(a instanceof c))return!1;var l=this.size,d=a.size;if(o>l||o>d&&l!=d)return!1;for(o>l&&(o=l);r<o;r++)if(this.read(r)!=a.read(r))return!1;return!0},c.prototype.addRange=function(a,r,o,l,d){if(this.Pb)throw u.i.Hb();if(!l&&(1>d||o%d!=0))throw u.i.N();var p=this.size;if(this.resize(p+o),l)this.o.set(a.o.subarray(r,r+o),p);else{l=o;for(var g=0;g<o;g+=d){l-=d;for(var y=0;y<d;y++)this.o[p+g+y]=a.o[r+l+y]}}},c.prototype.Mn=function(a,r,o,l,d,p,g){if(this.Pb)throw u.i.Hb();if(!d&&(1>p||l%p!=0))throw u.i.N();if(A(this.o,a+l,a,a+(g-a)),this.o==r.o&&a<o&&(o+=l),d)this.o.set(r.o.subarray(o,o+l),a);else for(d=l,g=0;g<l;g+=p){d-=p;for(var y=0;y<p;y++)this.o[a+g+y]=r.o[o+d+y]}},c.prototype.Ln=function(a,r,o,l){if(this.Pb)throw u.i.Hb();for(l-=a,A(this.o,a+l,a,a+l),l=0;l<o;l++)this.o[a+l]=r},c.prototype.Iz=function(a,r,o,l,d,p){if(this.Pb)throw u.i.Hb();if(0>p&&(p=this.size),this.size+2*l>this.o.length?this.resize(this.size+2*l):this.size+=2*l,A(this.o,a+2*l,a,a+(p-a)),d)for(d=0;d<l;d++)p=r[o++],this.o[a++]=p.x,this.o[a++]=p.y;else{d=0;for(var g=l-1;d<l;++d)p=r[o+g],this.o[a++]=p.x,this.o[a++]=p.y,g--}},c.prototype.vj=function(a,r,o){if(this.Pb)throw u.i.Hb();A(this.o,a+2,a,a+(o-a)),this.o[a]=r.x,this.o[a+1]=r.y},c.prototype.Ut=function(a,r,o,l,d,p){if(0>a||0>r||0>l||!d&&(0>=p||r%p!=0)||o.size<l+r)throw u.i.N();if(r!=0)if(this.size<r+a&&this.resize(r+a),o==this)this.Ar(a,r,l,d,p);else if(d)for(d=0;d<r;d++)this.o[a]=o.o[l],a++,l++;else if(l=l+r-p,p==1)for(d=0;d<r;d++)this.o[a]=o.o[l],a++,l--;else for(d=0,r=u.O.truncate(r/p);d<r;d++){for(var g=0;g<p;g++)this.o[a+g]=o.o[l+g];a+=p,l-=p}},c.prototype.En=function(a,r,o){if(this.Pb||a+r>this.size)throw u.i.Hb();0<o-(a+r)&&A(this.o,a,a+r,a+(o-(a+r))+r),this.size-=r},c.prototype.ni=function(a,r,o){if(this.Pb||1>o||r%o!=0)throw u.i.Hb();for(var l=r>>1,d=0;d<l;d+=o){r-=o;for(var p=0;p<o;p++){var g=this.o[a+d+p];this.o[a+d+p]=this.o[a+r+p],this.o[a+r+p]=g}}},c.prototype.Wj=function(a,r,o){if(0>r||0>o||0>r||o+r>this.size)throw u.i.N();for(var l=r;l<r+o;l++)this.o[l]=a},c.prototype.Ar=function(a,r,o,l,d){if(!(l&&a==o||(this.o.set(this.o.subarray(o,o+r),a),l)))for(o=a,a=a+r-d,l=0,r=u.O.truncate(r/2);l<r;l++){for(var p=0;p<d;p++){var g=this.o[o+p];this.o[o+p]=this.o[a+p],this.o[a+p]=g}o+=d,a-=d}},c.prototype.vC=function(a,r,o,l,d){if(0>a||0>r||0>l)throw u.i.N();if(r!=0)for(this.size<(r<<1)+a&&this.resize((r<<1)+a),d||(a+=r-1<<1),d=d?2:-2,r+=l;l<r;l++)this.o[a]=o[l].x,this.o[a+1]=o[l].y,a+=d},c.prototype.Vw=function(a,r,o,l,d){if(0>a||0>r||0>l||this.size<r+a)throw u.i.N();if(d)for(d=0;d<r;d++)o[l+d]=this.o[a+d];else for(l=l+r-1;a<r;a++)o[l]=this.o[a],l--},c.prototype.clear=function(a){a?this.resize(0):this.Bh(0)},c.prototype.ix=function(){this.pk=this.Pb=!0},c.prototype.Vd=function(a,r,o){r=this.o.subarray(a,r),Array.prototype.sort.call(r,o),this.o.set(r,a)},c.prototype.zJ=function(a,r){if(this.Pb)throw u.i.fa("invalid call. Attribute Stream is read only.");this.o[a]|=r},c.prototype.KE=function(a,r){if(this.Pb)throw u.i.fa("invalid call. Attribute Stream is read only.");this.o[a]&=~r},c.prototype.Tp=function(){return 1},c}();u.pn=b}(B||(B={})),function(u){u.Yc=function(){function A(){}return A.Mr=function(b,c){return u.pn.qf(b,c)},A.Dn=function(b,c){return u.be.qf(b,c)},A.pP=function(b,c,a){switch(b){case 1:b=u.be.qf(c,a);break;case 2:b=u.ia.qf(c,a);break;case 4:b=u.pn.qf(c,a);break;default:throw u.i.Qa()}return b},A.YE=function(b,c){return A.pP(u.ra.Tp(b),c*u.ra.Va(b),u.ra.se(b))},A.Oh=function(b,c){return u.ia.qf(b,c)},A.qI=function(b){var c,a=[];for(c=0;c<b;c++)a.push(null);return a},A}()}(B||(B={})),function(u){u.ga=function(A){A===void 0&&(A=0),this.u=A}}(B||(B={})),function(u){u.NL=function(){function A(){}return A.bind=function(b){u.Sc=b.PeDefs,u.pf=b.PeFactory,u.NC=b.PeVertcs,u.ej=b.PeCSTransformations,u.MC=b.PeGTTransformations,u.LL=b.PeGeogtran,u.KL=b.PeFactoryCodechange,u.LC=b.PeGCSExtent,u.Cg=b.PePCSInfo,u.ML=b.PeHorizon,u.JL=b.PeCoordsys,u.lp=b.PeGTlistExtended,u.lp.PE_GTLIST_OPTS_USE_DEFAULT=128,u.pf.initialize(null),u.Mx=b.PeGTlistExtendedEntry,u.pf.fromString(u.Sc.PE_TYPE_UNIT,'UNIT["Meter",1.0]')},A}(),u.pf=null,u.NC=null,u.JL=null,u.ML=null,u.Cg=null,u.lp=null,u.Mx=null,u.LC=null,u.KL=null,u.LL=null,u.Sc=null,u.MC=null,u.ej=null}(B||(B={})),function(u){var A=function(){function b(){}return b.Mb=function(c,a){return 0<=a?b.P(c):-b.P(c)},b.P=function(c){return 0>c?-c:c},b.ti=function(c){return 3552713678800501e-30>c},b.KC=function(c,a,r){return b.P(c-a)<=r*(1+(b.P(c)+b.P(a))/2)},b.Y=function(c,a){return b.KC(c,a,3552713678800501e-30)},b.FL=function(c){return 3552713678800501e-30>=b.P(c)},b.Cd=function(c){return b.FL(c)},b}();u.s=A,u.F=function(){function b(){}return b.gp=function(c,a){var r=0;return(c=A.P(c))+(a=A.P(a))!=0&&(c>a?(r=a/c,r=c*Math.sqrt(1+r*r)):(r=c/a,r=a*Math.sqrt(1+r*r))),r},b.Wq=function(c,a,r,o,l){for(var d=[0,0,0],p=[0,0,0],g=0;2>=g;g++)a[g]-=c[g],r[g]-=a[g];r=d[1]*p[2]-d[2]*p[1],a=d[2]*p[0]-d[0]*p[2],d=d[0]*p[1]-d[1]*p[0],c=-1*(r*c[0]+a*c[1]+d*c[2]),o[0]=r,o[1]=a,o[2]=d,o[3]=c,p=b.on(o),o[0]/=p,o[1]/=p,o[2]/=p,o[3]/=p,l!=0&&(p=A.Cd(d)?A.Cd(c)?A.Mb(1,a):-A.Mb(1,c):A.Mb(1,d),p*=A.Mb(1,l),o[0]*=p,o[1]*=p,o[2]*=p,o[3]*=p)},b.zx=function(c,a,r){r[0]=c[1]*a[2]-a[1]*c[2],r[1]=c[2]*a[0]-a[2]*c[0],r[2]=c[0]*a[1]-a[0]*c[1]},b.St=function(c,a){return c[0]*a[0]+c[1]*a[1]+c[2]*a[2]},b.on=function(c){return b.gp(b.gp(c[0],c[1]),c[2])},b.cl=function(c,a,r,o,l,d,p,g){c=b.n(c,a,r);var y=Math.cos(r);d.u=(c+l)*y*Math.cos(o),p.u=(c+l)*y*Math.sin(o),g.u=(c*(1-a)+l)*Math.sin(r)},b.jO=function(c,a,r,o,l,d,p){var g=b.gp(a,r),y=1*Math.sqrt(1-c),w=y/1;if(A.Y(g,0))d.u=0,l.u=A.Mb(1.570796326794897,o),p.u=A.P(o)-y;else{d.u=Math.atan2(r,a),r=Math.atan2(1*o,y*g),d=Math.cos(r);var S=Math.sin(r);a=y*c/(1-c),c*=1,r=Math.atan2(o+a*S*S*S,g-c*d*d*d),3.141592653589793<A.P(r)&&(r=A.Mb(3.141592653589793,r)-r),r=Math.atan(w*Math.tan(r)),S=Math.sin(r),d=Math.cos(r),l.u=Math.atan2(o+a*S*S*S,g-c*d*d*d),1.570796326794897<A.P(l.u)&&(l.u=A.Mb(3.141592653589793,l.u)-l.u),r=Math.atan(w*Math.tan(l.u)),S=Math.sin(r),d=Math.cos(r),p.u=(o-y*S)*Math.sin(l.u)+(g-1*d)*Math.cos(l.u)}},b.n=function(c,a,r){return r=Math.sin(r),c/Math.sqrt(1-a*r*r)},b.ot=function(c,a){return Math.atan2(Math.sin(a)*(1-c),Math.cos(a))},b.Qj=function(c,a){return Math.atan2(Math.sin(a),Math.cos(a)*(1-c))},b.Rq=function(c,a){if(A.ti(c)||a==0||A.Y(A.P(a),1.570796326794897))return a;if(.006884661117170036>c){var r=Math.sqrt(1-c),o=(1-r)/(1+r),l=o*o,d=o*l,p=o*d,g=o*p,y=o*g,w=o*y,S=1.572916666666667*d-3.2578125*g+4.295068359375*w;c=2.142578125*p-6.071484375*y,r=3.129296875*g-11.249837239583334*w;var k=4.775276692708333*y,C=7.958636765252976*w,O=Math.cos(2*a);return a+Math.sin(2*a)*(1.5*o-.84375*d+.525390625*g-.2688395182291667*w-S+r-C+O*(2*(1.3125*l-1.71875*p+1.650146484375*y)-4*c+6*k+O*(4*S-12*r+24*C+O*(8*c-32*k+O*(16*r-80*C+O*(32*k+64*O*C))))))}for(r=1-c,o=c/2,d=(l=A.P(a))*b.Zu(c)/(1.570796326794897*r),p=9999,y=l,l=0;1e-16<p&&50>l;l++)w=b.w(c,y),g=y-(S=(g=(b.kG(y,c)-o*Math.sin(2*y)/w)/r-d)/(w=1/(w*w*w))),p=A.P(S),y=g;return 0<=a?y:-y},b.qW=function(c,a){return A.ti(a)?c:c*b.Zu(a)/1.570796326794897},b.ba=function(c){return 0>(c=b.pF(c,6.283185307179586))?c+6.283185307179586:3.141592653589793>A.P(c)||A.Y(A.P(c),3.141592653589793)?c:c-6.283185307179586},b.pF=function(c,a){return c-Math.floor(c/a)*a},b.Ah=function(c,a){if(.006884661117170036>a){var r=(a=(1-(a=Math.sqrt(1-a)))/(1+a))*a,o=r*r;return c/(1+a)*(1+.25*r+.015625*o+.00390625*r*o)*1.570796326794897}return c*b.Zu(a)},b.Vq=function(c,a){var r=A.Mb(1,Math.sin(a));return a=1.570796326794897>=(a=A.P(b.pF(a,3.141592653589793)))?a:3.141592653589793-a,(A.Y(a,1.570796326794897)?a:Math.atan(Math.sqrt(1-c)*Math.tan(a)))*r},b.q=function(c,a,r){if(.006884661117170036>a){var o=(a=(1-(a=Math.sqrt(1-a)))/(1+a))*a,l=a*o,d=a*l,p=a*d,g=a*p,y=a*g,w=-.7291666666666666*l+.2278645833333333*p+.03987630208333334*y,S=.615234375*d-.21533203125*g,k=-.54140625*p+.20302734375*y,C=.48876953125*g,O=-.4488699776785715*y,R=Math.cos(2*r);return c/(1+a)*((1+.25*o+.015625*d+.00390625*g)*r+Math.sin(2*r)*(-1.5*a+.1875*l+.0234375*p+.00732421875*y-w+k-O+R*(2*(.9375*o-.234375*d-.03662109375*g)-4*S+6*C+R*(4*w-12*k+24*O+R*(8*S-32*C+R*(16*k-80*O+R*(32*C+64*R*O)))))))}return c*(b.kG(r,a)-.5*a*Math.sin(2*r)/b.w(a,r))},b.w=function(c,a){return a=Math.sin(a),Math.sqrt(1-c*a*a)},b.Zu=function(c){return A.KC(c,1,2220446049250313e-31)?1:1>c?b.Xw(0,1-c)-c/3*b.Uw(0,1-c):NaN},b.kG=function(c,a){var r=A.Mb(1,c);c=A.P(c);var o=Math.floor(c/1.570796326794897);if(1<a)a=c==0?0:NaN;else if(A.Cd(o))a=(c=b.sin(c))*b.Xw(1-c*c,1-a*c*c)-a/3*c*c*c*b.Uw(1-c*c,1-a*c*c);else{var l=u.O.truncate(o%2),d=b.Zu(a);0<l?(c=1.570796326794897*(o+1)-c,a=d*(o+1)-(a=(c=Math.sin(c))*b.Xw(1-c*c,1-a*c*c)-a/3*c*c*c*b.Uw(1-c*c,1-a*c*c))):(c-=1.570796326794897*o,a=d*o+(a=(c=Math.sin(c))*b.Xw(1-c*c,1-a*c*c)-a/3*c*c*c*b.Uw(1-c*c,1-a*c*c)))}return a*r},b.sin=function(c){c=b.ba(c);var a=A.Mb(1,c);return c=A.P(c),A.Y(c,3.141592653589793)?0:A.Y(c,1.570796326794897)?1*a:Math.sin(c)*a},b.Uw=function(c,a){var r,o,l,d,p=c,g=a,y=1;for(a=0,c=1;o=((r=.2*(p+g+3*y))-p)/r,l=(r-g)/r,d=(r-y)/r,!(1e-4>A.P(o)&&1e-4>A.P(l)&&1e-4>A.P(d));)d=Math.sqrt(g),a+=c/((r=Math.sqrt(y))*(y+(d=Math.sqrt(p)*(d+r)+d*r))),c*=.25,p=.25*(p+d),g=.25*(g+d),y=.25*(y+d);return g=(p=o*l)-(y=d*d),3*a+c*(1+(y=p-6*y)*(.10227272727272728*y-.2142857142857143-.1730769230769231*d*(o=y+g+g))+d*(.1666666666666667*o+d*(-.4090909090909091*g+.1153846153846154*d*p)))/(r*Math.sqrt(r))},b.Xw=function(c,a){for(var r,o,l,d,p=1;o=2-((r=(c+a+p)/3)+c)/r,l=2-(r+a)/r,d=2-(r+p)/r,!(1e-4>A.P(o)&&1e-4>A.P(l)&&1e-4>A.P(d));p=.25*(p+r))r=Math.sqrt(a),o=Math.sqrt(p),c=.25*(c+(r=Math.sqrt(c)*(r+o)+r*o)),a=.25*(a+r);return(1+(.04166666666666666*(c=o*l-d*d)-.1-.06818181818181818*(a=o*l*d))*c+.07142857142857142*a)/Math.sqrt(r)},b.Qw=function(c,a){if(A.ti(c)||a==0||A.Y(A.P(a),1.570796326794897))return a;if(.006884661117170036>c){var r=c*c,o=c*r,l=c*o,d=c*l,p=c*d,g=c*p,y=-(.02708333333333333*o+.03430059523809524*l+.03149181547619048*d+.02634359154541446*p+.02156896735835538*g),w=.007669890873015873*l+.01299603174603175*d+.0148051353064374*p+.01454454953803912*g,S=-(.002275545634920635*d+.004830845032667949*p+.006558395368616723*g),k=.0006957236677288761*p+.001775193002406544*g,C=-.000217324089394402*g,O=Math.cos(2*a);return a+Math.sin(2*a)*(-(.5*c+.2083333333333333*r+.09375*o+.04878472222222222*l+.02916666666666667*d+.01938905423280423*p+.01388255931712963*g)-y+S-C+O*(2*(.1041666666666667*r+.0875*o+.06050347222222222*l+.04151785714285714*d+.02958958540013228*p+.02203667534722222*g)-4*w+6*k+O*(4*y-12*S+24*C+O*(8*w-32*k+O*(16*S-80*C+O*(32*k+64*O*C))))))}return a==0||A.Y(A.P(a),1.570796326794897)?r=a:(l=(o=Math.sqrt(c))*Math.sin(a),r=Math.tan(.7853981633974483+a/2)*Math.pow((1-l)/(1+l),o/2),r=2*Math.atan(r)-1.570796326794897),r},b.yO=function(c,a){if(A.ti(c)||a==0||A.Y(A.P(a),1.570796326794897))return a;if(.006884661117170036>c){var r=c*(k=c*(S=c*(O=c*c))),o=c*(C=c*r),l=.05833333333333333*S+.07232142857142858*k+.05634300595238095*r+.0355325796406526*C+.020235546186067*o,d=.02653149801587302*k+.04379960317460317*r+.0429211791776896*C+.03255384637546096*o,p=.01294022817460318*r+.02668104344536636*C+.03155651254609588*o,g=.00659454790965208*C+.0163075268674227*o,y=.003463473736911237*o,w=Math.cos(2*a);return a+Math.sin(2*a)*(.5*c+.2083333333333333*O+.08333333333333333*S+.03611111111111111*k+.01875*r+.01195601851851852*C+.008863673941798942*o-l+p-y+w*(2*(.1458333333333333*O+.1208333333333333*S+.07039930555555556*k+.03616071428571429*r+.01839451058201058*C+.01017113095238095*o)-4*d+6*g+w*(4*l-12*p+24*y+w*(8*d-32*g+w*(16*p-80*y+w*(32*g+64*w*y))))))}var S=Math.sqrt(c),k=S/2,C=Math.tan(.7853981633974483+a/2);c=0,l=1;for(var O=a;l!=0;O=o)r=S*Math.sin(O),o=C*Math.pow((1+r)/(1-r),k),o=2*Math.atan(o)-1.570796326794897,c++,(A.Y(o,O)||3e4<c)&&(l=0);return O},b}()}(B||(B={})),function(u){var A=function(){function b(c){this.ul=this.Us=null,this.Iv=!1,this.GA=this.HA=0,this.HH=new u.h,this.XH=new u.h,this.KA=!1,this.vq=new u.l,this.wH=this.sw=0,this.tw=null,this.zl=!1,this.Eo=null,this.bA=0,this.Ue=c,this.As=u.zb.xv(this.Ue,0,!0),this.HH.Rc(),this.XH.Rc(),this.RH=NaN;var a=c.getCode();0<a?(this.Kk=a,u.pf.getCode(c)):this.Kk=u.pf.getCode(c),0>this.Kk&&(this.Kk=0);var r=this.Ue.getType();if(this.jH=r==u.Sc.PE_TYPE_PROJCS?2:1,r==u.Sc.PE_TYPE_PROJCS&&!c.loadConstants())throw u.i.N("PeProjcs.loadConstants failed");a=r==u.Sc.PE_TYPE_GEOGCS?this.Ue:this.Ue.getGeogcs(),r!=u.Sc.PE_TYPE_GEOGCS&&u.pf.getCode(a),this.Eo=c.getUnit(),this.RH=a.getPrimem().getLongitude(),this.wH=c=a.getUnit().getUnitFactor(),c=Math.PI/(180*c),1e-10>Math.abs(c-1)&&(c=1),this.GA=c,r&u.Sc.PE_TYPE_PROJCS?(a=this.Ue,this.HA=1/a.getUnit().getUnitFactor(),this.sw=.001/this.Ue.getUnit().getUnitFactor(),this.tw=u.Cg.generate(a,u.Cg.PE_PCSINFO_OPTION_NONE),this.zl=this.tw.isPannableRectangle(),this.bA=u.zb.qN(this.tw.getCentralMeridian(),this.GA)):(this.KA=this.zl=!0,this.HA=0,r=1/a.getUnit().getUnitFactor(),this.sw=.001/a.getDatum().getSpheroid().getAxis()*r,this.bA=0),this.zl&&(this.xx(),this.DK(),this.nY(),this.CK(),this.lY(),this.mY())}return b.prototype.$r=function(){return this.Kk},b.prototype.kk=function(){return this.tw},b.Py=function(c,a){return c==a||c!=null&&a!=null&&c.Kk==0&&a.Kk==0&&c.As===a.As},b.prototype.Wc=function(){return this.zl},b.prototype.gh=function(c){c.K(this.so)},b.prototype.pv=function(){return this.so.v},b.prototype.ov=function(){return this.so.C},b.prototype.GR=function(c){c.K(this.uw)},b.prototype.lY=function(){var c=this.Ue.getType();if(c==u.Sc.PE_TYPE_PROJCS){c=this.Ue;var a=this.kk().getCentralMeridian(),r=c.getGeogcs();if(r==null)throw u.i.fa("internal error");a=[[a+(r=1/r.getUnit().getUnitFactor()*Math.PI),0]],u.ej.geogToProj(c,1,a),a=a[0][0],r=c.getParameters()[u.Sc.PE_PARM_X0].getValue();var o=this.ml();c=new u.l,o.A(c),a=(o=Math.abs(a-r))+r,r=-1*o+r,o=c.H,c=c.G;var l=new u.l;l.K(r,c,a,o),this.so==null&&(this.so=l)}else{if(c!=u.Sc.PE_TYPE_GEOGCS)throw u.i.fa("internal error");r=1/this.Ue.getUnit().getUnitFactor()*Math.PI,(c=new u.l).K(-r,-r/2,r,r/2),this.so==null&&(this.so=c)}},b.prototype.mY=function(){var c=this.Ue.getType();if(c==u.Sc.PE_TYPE_PROJCS){var a=this.Ue;if(c=this.kk().getCentralMeridian(),(a=a.getGeogcs())==null)throw u.i.fa("internal error");a=1/a.getUnit().getUnitFactor()*Math.PI;var r=this.Vr(),o=new u.l;r.A(o),(r=new u.l).K(c-a,o.G,c+a,o.H),this.uw==null&&(this.uw=r)}else{if(c!=u.Sc.PE_TYPE_GEOGCS)throw u.i.fa("internal error");a=1/this.Ue.getUnit().getUnitFactor()*Math.PI,(c=new u.l).K(-a,-a/2,a,a/2),this.uw==null&&(this.uw=c)}},b.prototype.bf=function(){return this.GA},b.prototype.pm=function(){return this.HA},b.prototype.Vr=function(){if(this.zl)return this.ul;var c=this.ul;return c??(this.xx(),this.ul)},b.prototype.Wr=function(){return this.zl?null:(this.ul!=null||this.xx(),this.YG)},b.prototype.xx=function(){if(this.Ue.getType()==u.Sc.PE_TYPE_PROJCS){var c=this.Ue,a=c.getGeogcs(),r=c.horizonGcsGenerate();if(r!=null){var o=r[0].getNump(),l=r[0].getKind();c=0<r[0].getInclusive();var d=this.bf(),p=90*d,g=360*d,y=370*d,w=180*d*u.Sc.PE_HORIZON_DELTA/Math.PI,S=new u.l,k=null;if(1<o){for(var C=1;C<o;C++)if(r[C].getKind()==u.Sc.PE_HORIZON_LINE){k==null&&(k=new u.Ta);var O=r[C].getCoord();k.sx(O[0][0],O[0][1]),k.yj(O[1][0],O[1][1])}}if(l==u.Sc.PE_HORIZON_RECT)r=r[0].getCoord(),S.K(r[0][0],r[0][1]),S.Zb(r[1][0],r[1][1]),Math.abs(S.H-p)<1e-7*w&&(S.H=p),Math.abs(S.G+p)<1e-7*w&&(S.G=-p),S.R()>y&&(r=-400*d,S.K(r,S.G,r+5*g,S.H)),r=new u.Fh(S),this.ul==null&&(this.ul=r,this.Iv=c);else{if(y=new u.Da,g=this.kk().isGcsHorizonMultiOverlap(),S=u.gu.bF(a,u.hu.Integer64),g){for(y=new u.gL,w=u.Gh.local().V(y,S,null),C=0;C<o;C++)if(r[C].getKind()==u.Sc.PE_HORIZON_POLY){for(a=r[C].getSize(),d=r[C].getCoord(),l=[],p=0;p<a;p++)l[p]=u.h.construct(d[p][0],d[p][1]);r[C].getInclusive(),g&&((d=new u.Da).Yk(l,a-1),y.ZX(d),w.qe())}y=w.next()}else for(C=0;C<o;C++)if(r[C].getKind()==u.Sc.PE_HORIZON_POLY){for(a=r[C].getSize(),d=r[C].getCoord(),g=[],p=0;p<a;p++)g[p]=u.h.construct(d[p][0],d[p][1]);r[C].getInclusive(),y.Yk(g,a-1)}c?u.Xj.local().wn(y,S,1):u.kp.local().wn(y,S,1),u.dj.local().wn(y,S,1),this.ul==null&&(this.ul=y,this.Iv=c,this.YG=k)}}}},b.prototype.hv=function(){return this.zl||this.ul==null&&this.xx(),this.Iv},b.prototype.DK=function(){if(this.jH==2){var c=this.Ue.horizonPcsGenerate();if(c!=null){var a=c[0].getKind();c[0].getInclusive();var r=c[0].getNump(),o=!1;if(a==u.Sc.PE_HORIZON_RECT)c=c[0].getCoord(),(r=new u.l).K(c[0][0],c[0][1]),r.Zb(c[1][0],c[1][1]),c=new u.Fh(r);else{for(a=-1,o=0;o<r;o++)c[o].getKind()==u.Sc.PE_HORIZON_POLY&&(a=o);for(o=c[a].getSize()-1,c=c[a].getCoord(),r=[],a=0;a<o;a++)r[a]=u.h.construct(c[a][0],c[a][1]);c=a=new u.Da,a.Yk(r,o),o=!0}this.kk().isDensificationNeeded()&&(r=1e5*this.pm(),c=u.Xl.local().V(c,r,null)),o&&(o=new u.Fh,c.bn(o),c.Ke(),c.Qb(),c.qR(),u.Xj.local().wn(c,null,1)),this.Us==null&&(this.Us=c)}}},b.prototype.ml=function(){if(this.zl)return this.Us;var c=this.Us;return c??(this.DK(),this.Us)},b.prototype.nY=function(){if(this.Ue.getType()==u.Sc.PE_TYPE_PROJCS){var c=90*this.bf();c=[[0,c],[0,-c]],u.ej.geogToProj(this.Ue,2,c);var a=this.kk(),r=a.getNorthPoleLocation()!=u.Cg.PE_POLE_OUTSIDE_BOUNDARY;a=a.getSouthPoleLocation()!=u.Cg.PE_POLE_OUTSIDE_BOUNDARY,this.KA||(r&&this.HH.ma(c[0][0],c[0][1]),a&&this.XH.ma(c[1][0],c[1][1]))}this.KA=!0},b.prototype.CK=function(){if(this.jH==1){var c=400*this.bf();this.vq.K(-c,-c,c,c)}else c=u.Cg.generate(this.Ue,u.Cg.PE_PCSINFO_OPTION_DOMAIN),c=u.l.construct(c.getDomainMinx(),c.getDomainMiny(),c.getDomainMaxx(),c.getDomainMaxy()),this.vq.B()&&this.vq.K(c)},b.prototype.hR=function(c){this.zl&&c.K(this.vq),this.vq.B()&&this.CK(),c.K(this.vq)},b.prototype.Up=function(){return this.RH},b.prototype.zi=function(){return this.bA},b.prototype.Hd=function(){return this.Eo},b.prototype.Xr=function(){return this.wH},b}();u.OC=A}(B||(B={})),function(u){var A=function(){function b(c){this.KT=c,this.As=u.zb.xv(c,0,!0);var a=c.getCode();this.ss=0<a?a:u.pf.getCode(c),0>this.ss&&(this.ss=0),this.Eo=a=this.KT.getUnit(),this.IH=1/a.getUnitFactor(),u.pf.getCode(c)}return b.Py=function(c,a){return c==a||c!=null&&a!=null&&c.ss==0&&a.ss==0&&c.As===a.As},b.prototype.$r=function(){return this.ss},b}();u.PL=A}(B||(B={})),function(u){u.Yg=function(){function A(){}return A.tb=function(b,c,a,r,o,l,d,p){if(l!=null||d!=null||p!=null){r=u.F.ba(r),c=u.F.ba(c),a=u.F.ba(a),o=u.F.ba(o),1.570796326794897<u.s.P(a)&&(a=u.s.Mb(3.141592653589793,a)-a,c=u.F.ba(c+3.141592653589793)),1.570796326794897<u.s.P(o)&&(o=u.s.Mb(3.141592653589793,o)-o,r=u.F.ba(r+3.141592653589793));var g=u.F.ba(r-c);if(u.s.Y(a,o)&&(u.s.Y(c,r)||u.s.Y(u.s.P(a),1.570796326794897)))l!=null&&(l.u=0),d!=null&&(d.u=0),p!=null&&(p.u=0);else{if(u.s.Y(a,-o)){if(u.s.Y(u.s.P(a),1.570796326794897))return l!=null&&(l.u=3.141592653589793*b),d!=null&&(d.u=0<a?u.F.ba(3.141592653589793-u.F.ba(r)):u.F.ba(r)),void(p!=null&&(p.u=0<a?u.F.ba(r):u.F.ba(3.141592653589793-u.F.ba(r))));if(u.s.Y(u.s.P(g),3.141592653589793))return l!=null&&(l.u=3.141592653589793*b),d!=null&&(d.u=0),void(p!=null&&(p.u=0))}var y=u.s.P(a)==1.570796326794897?0:Math.cos(a),w=Math.sin(a),S=u.s.P(o)==1.570796326794897?0:Math.cos(o),k=Math.sin(o),C=u.s.P(g)==1.570796326794897?0:Math.cos(g),O=u.s.P(g)==3.141592653589793?0:Math.sin(g);if(l!=null){var R=Math.sin((o-a)/2);g=Math.sin(g/2),l.u=2*Math.asin(Math.sqrt(R*R+y*S*g*g))*b}d!=null&&(d.u=u.s.Y(u.s.P(a),1.570796326794897)?0>a?r:u.F.ba(3.141592653589793-r):Math.atan2(S*O,y*k-w*S*C)),p!=null&&(u.s.Y(u.s.P(o),1.570796326794897)?p.u=0>o?c:u.F.ba(3.141592653589793-c):(p.u=Math.atan2(y*O,k*y*C-S*w),p.u=u.F.ba(p.u+3.141592653589793)))}}},A.rf=function(b,c,a,r,o,l,d){if(l!=null||d!=null){c=u.F.ba(c),a=u.F.ba(a),1.570796326794897<u.s.P(a)&&(a=u.s.Mb(3.141592653589793,a)-a,c=u.F.ba(c+3.141592653589793)),u.s.Y(u.s.P(a),1.570796326794897)&&(c=0),o=u.F.ba(o);var p=u.s.Y(u.s.P(o),1.570796326794897)?0:Math.cos(o),g=u.s.Y(u.s.P(o),3.141592653589793)?0:Math.sin(o),y=u.s.Y(u.s.P(a),1.570796326794897)?0:Math.cos(a),w=Math.sin(a);b=r/b,r=u.s.Y(u.s.P(b),1.570796326794897)?0:Math.cos(b);var S=u.s.Y(u.s.P(b),3.141592653589793)?0:Math.sin(b),k=Math.asin(w*r+y*S*p);d!=null&&(d.u=k),l!=null&&(l.u=u.s.Y(u.s.P(k),1.570796326794897)?u.s.Y(a,-k)?0>k?o:u.F.ba(3.141592653589793-o):c:u.s.Y(u.s.P(a),1.570796326794897)&&u.s.Y(b,3.141592653589793)?0>a?o:u.F.ba(3.141592653589793-o):u.F.ba(c+Math.atan2(S*g,y*r-w*S*p)))}},A}()}(B||(B={})),function(u){u.Wk=function(){function A(){}return A.tb=function(b,c,a,r,o,l,d,p,g){var y=new u.ga(0),w=new u.ga(0),S=[0,0,0],k=[0,0,0],C=[0,0,0],O=new u.ga(0),R=new u.ga(0),N=new u.ga(0),j=new u.ga(0),G=new u.ga(0);if(d!=null||p!=null||g!=null)if(u.s.ti(c))u.Yg.tb(b,a,r,o,l,d,p,g);else{o=u.F.ba(o),a=u.F.ba(a);var D=u.F.ba(o-a);if(u.s.Y(r,l)&&(u.s.Y(a,o)||u.s.Y(u.s.P(r),1.570796326794897)))d!=null&&(d.u=0),p!=null&&(p.u=0),g!=null&&(g.u=0);else{if(u.s.Y(r,-l)){if(u.s.Y(u.s.P(r),1.570796326794897))return d!=null&&(d.u=2*u.F.Ah(b,c)),p!=null&&(p.u=0<r?u.F.ba(3.141592653589793-u.F.ba(o)):u.F.ba(o)),void(g!=null&&(g.u=0<r?u.F.ba(o):u.F.ba(3.141592653589793-u.F.ba(o))));u.s.Y(u.s.P(D),3.141592653589793)&&(d!=null&&(d.u=2*u.F.Ah(b,c)),p!=null&&(p.u=0),g!=null&&(g.u=0))}else(u.s.Y(u.s.P(r),1.570796326794897)||u.s.Y(u.s.P(l),1.570796326794897))&&(u.s.Y(u.s.P(r),1.570796326794897)?a=o:o=a);var V=0;if(0>D){V=1;var Z=a;a=o,o=Z,Z=r,r=l,l=Z}D=u.F.ot(c,r);var q=u.F.ot(c,l);p==null&&g==null||(u.Yg.tb(b,a,D,o,q,null,y,w),y=Math.atan2(Math.sin(y.u)*Math.cos(r-D),Math.cos(y.u)),w=Math.atan2(Math.sin(w.u)*Math.cos(l-q),Math.cos(w.u)),V!=0&&(Z=y,y=w,w=Z),p!=null&&(p.u=y),g!=null&&(g.u=w)),d!=null&&(u.F.cl(1,c,r,a,0,N,j,G),S[0]=N.u,S[1]=j.u,S[2]=G.u,u.F.cl(1,c,l,o,0,N,j,G),k[0]=N.u,k[1]=j.u,k[2]=G.u,C[0]=S[1]*k[2]-k[1]*S[2],C[1]=-(S[0]*k[2]-k[0]*S[2]),C[2]=S[0]*k[1]-k[0]*S[1],c=1-u.F.w(c,u.F.Vq(c,u.F.Qj(c,Math.acos(C[2]/Math.sqrt(C[0]*C[0]+C[1]*C[1]+C[2]*C[2]))))),c*=2-c,p=Math.atan2(-C[1],-C[0]),C=u.F.ba(p-1.570796326794897),p=u.F.ba(p+1.570796326794897),C=u.s.P(u.F.ba(a-C))<=u.s.P(u.F.ba(a-p))?C:p,u.Yg.tb(1,C,0,a,D,O,null,null),u.Yg.tb(1,C,0,o,q,R,null,null),3.141592653589793<O.u+R.u&&(C=u.F.ba(C+3.141592653589793),u.Yg.tb(1,C,0,a,D,O,null,null),u.Yg.tb(1,C,0,o,q,R,null,null)),O.u*=u.s.Mb(1,r),R.u*=u.s.Mb(1,l),O.u=u.F.Qj(c,O.u),R.u=u.F.Qj(c,R.u),a=u.F.q(b,c,O.u),b=u.F.q(b,c,R.u),d.u=u.s.P(b-a))}}},A.rf=function(b,c,a,r,o,l,d,p){var g=0,y=new u.ga(0),w=new u.ga(0),S=[0,0,0],k=[0,0,0],C=new u.ga(0),O=new u.ga(0),R=new u.ga(0);if(d!=null||p!=null)if(u.s.ti(c))u.Yg.rf(b,a,r,o,l,d,p);else if(u.s.Cd(o))d!=null&&(d.u=a),p!=null&&(p.u=r);else if(l=u.F.ba(l),0>o&&(o=u.s.P(o),l=u.F.ba(l+3.141592653589793)),a=u.F.ba(a),r=u.F.ba(r),1.570796326794897<u.s.P(r)&&(a=u.F.ba(a+3.141592653589793),r=u.s.Mb(3.141592653589793,r)-r),u.s.Y(u.s.P(r),1.570796326794897)&&(a=0),u.s.Cd(r)){var N=u.s.P(1.570796326794897-u.s.P(l));N=u.F.Qj(c,N),N=1-u.F.w(c,u.F.Vq(c,N)),N*=2-N,b=o/u.F.Ah(b,N)*1.570796326794897,b=u.F.Rq(N,b),b=u.F.ot(N,b),u.Yg.rf(1,a,r,b,l,d,y),p!=null&&(g=y.u),p!=null&&(p.u=u.F.Qj(c,g))}else if(u.s.Y(u.s.P(r),1.570796326794897))y=2*(g=u.F.Ah(b,c)),l=0<(b=u.s.Mb(1.570796326794897,r))?u.F.ba(3.141592653589793-l):l,r=g-o,u.s.P(r)<=g?d!=null&&(d.u=l):(r=Math.floor(o/y),u.O.truncate(r%2)==0?(d!=null&&(d.u=l),o-=r*y):(d!=null&&(d.u=u.F.ba(l+3.141592653589793)),o=(r+1)*y-o),r=g-o),p!=null&&(p.u=u.F.Rq(c,r/g*b));else{N=u.F.ot(c,r),l=Math.atan2(Math.sin(l),Math.cos(l)*Math.cos(r-N));var j=u.O.truncate(u.s.Mb(1,N))*(1.570796326794897>=u.s.P(l)?1:-1);l=u.F.ba(a+Math.atan(Math.tan(l)*-Math.sin(N))),u.Yg.tb(b,l,0,a,N,null,w,null),N=u.s.P(1.570796326794897-u.s.P(w.u)),N=u.F.Qj(c,N),N=1-u.F.w(c,u.F.Vq(c,N)),N*=2-N,u.F.cl(1,c,0,l,0,C,O,R),S[0]=C.u,S[1]=O.u,S[2]=R.u,u.F.cl(1,c,r,a,0,C,O,R),k[0]=C.u,k[1]=O.u,k[2]=R.u,r=Math.acos((S[0]*k[0]+S[1]*k[1]+S[2]*k[2])/Math.sqrt(k[0]*k[0]+k[1]*k[1]+k[2]*k[2])),r=u.F.Qj(N,r),o=0<(r=u.F.q(b,N,r)+o*j)?w.u:u.F.ba(w.u+3.141592653589793),b=u.s.P(r)/u.F.Ah(b,N)*1.570796326794897,b=u.F.Rq(N,b),b=u.F.ot(N,b),u.Yg.rf(1,l,0,b,o,d,y),p!=null&&(g=y.u),p!=null&&(p.u=u.F.Qj(c,g))}},A}()}(B||(B={})),function(u){u.cu=function(){function A(){}return A.tb=function(b,c,a,r,o,l,d,p,g){var y=0,w=0,S=0;if(d!=null||p!=null||g!=null)if(u.s.ti(c))u.Yg.tb(b,a,r,o,l,d,p,g);else{var k=u.F.ba(o-a);if(u.s.Y(r,l)&&(u.s.Cd(k)||u.s.Y(u.s.P(r),1.570796326794897)))d!=null&&(d.u=0),p!=null&&(p.u=0),g!=null&&(g.u=0);else{if(u.s.Y(r,-l)){if(u.s.Y(u.s.P(r),1.570796326794897))return d!=null&&(d.u=2*u.F.Ah(b,c)),p!=null&&(p.u=0<r?u.F.ba(3.141592653589793-u.F.ba(o)):u.F.ba(o)),void(g!=null&&(g.u=0<r?u.F.ba(o):u.F.ba(3.141592653589793-u.F.ba(o))));u.s.Y(u.s.P(k),3.141592653589793)&&(d!=null&&(d.u=2*u.F.Ah(b,c)),p!=null&&(p.u=0),g!=null&&(g.u=0))}else if(u.s.Y(u.s.P(r),1.570796326794897)||u.s.Y(u.s.P(l),1.570796326794897)||u.s.Cd(k)||u.s.Y(u.s.P(k),3.141592653589793))return void u.Wk.tb(b,c,a,r,o,l,d,p,g);var C=1-Math.sqrt(1-c),O=c/(1-c),R=b*(1-C);b=u.F.Vq(c,r);var N=u.F.Vq(c,l);c=u.s.P(b)==1.570796326794897?0:Math.cos(b);var j=Math.sin(b),G=u.s.P(N)==1.570796326794897?0:Math.cos(N),D=Math.sin(N),V=k,Z=Math.cos(V),q=Math.sin(V),ne=1,ee=0;do{var he=V,ye=Math.sqrt(Math.pow(G*q,2)+Math.pow(c*D-j*G*Z,2)),ge=j*D+c*G*Z,Le=Math.atan2(ye,ge);if(ye==0){ne=0;break}var Te=c*G*q/ye;if(y=Math.cos(Math.asin(Te)),w=ge-2*j*D/(y*=y),1<u.s.P(w)&&(w=u.s.Mb(1,w)),V=k+(1-(V=C/16*y*(4+C*(4-3*y))))*C*Te*(Le+V*ye*(w+V*ge*(2*(S=w*w)-1))),Z=Math.cos(V),q=Math.sin(V),ee++,3.141592653589793<u.s.P(V)&&30<ee){ne=0;break}}while(5e3>=ee&&!u.s.Y(he,V));if(ne!=0)C=(O*=y)*(256+O*(O*(74-47*O)-128))/1024,d!=null&&(d.u=R*(1+O*(4096+O*(O*(320-175*O)-768))/16384)*(Le-C*ye*(w+C/4*(ge*(2*S-1)-C/6*w*(4*ye*ye-3)*(4*S-3))))),p!=null&&(p.u=u.s.Y(u.s.P(r),1.570796326794897)?0>r?o:u.F.ba(3.141592653589793-o):Math.atan2(G*q,c*D-j*G*Z)),g!=null&&(u.s.Y(u.s.P(l),1.570796326794897)?g.u=0>l?a:u.F.ba(3.141592653589793-a):(g.u=Math.atan2(c*q,c*D*Z-j*G),g.u=u.F.ba(g.u+3.141592653589793)));else{V=u.s.Mb(3.141592653589793,k),ge=j*D-c*G,Le=Math.acos(ge),ye=Math.sin(Le),y=1,ee=Te=0;do S=Te,Z=1-.25*(Te=C*(y*=y)*(1+C+C*C))+.1875*(w=C*C*(Z=y*y)*(1+2.25*C))-.1953125*(ne=C*C*C*Z*y),Te=.25*Te-.25*w+.29296875*ne,q=.03125*w-.05859375*ne,ne*=.00651041666666667,w=ge-2*j*D/y,1<u.s.P(w)&&(w=u.s.Mb(1,w)),y=Math.acos(w),ge=Math.cos(2*y),he=Math.cos(3*y),q=(Te=u.s.Y(r,-l)?u.F.ba(3.141592653589793-k)/(3.141592653589793*C*Z):u.F.ba(V-k)/(C*(Z*Le+Te*ye*w+q*Math.sin(2*Le)*ge+ne*Math.sin(3*Le)*he)))*ye/(c*G),V=1.570796326794897<u.s.P(k)?u.s.Mb(3.141592653589793,q)-Math.asin(q):Math.asin(q),Z=Math.cos(V),ye=Math.sqrt(Math.pow(G*q,2)+Math.pow(c*D-j*G*Z,2)),Le=3.141592653589793-Math.asin(u.s.P(ye)),ge=Math.cos(Le),y=Math.cos(Math.asin(Te)),ee++;while(70>=ee&&!u.s.Y(S,Te));d!=null&&(Z=1+(O*=y*=y)*(4096+O*(O*(320-175*O)-768))/16384,u.s.Y(r,-l)?d.u=3.141592653589793*R*Z:(w=ge-2*j*D/y,y=Math.acos(w),ge=Math.cos(2*y),he=Math.cos(3*y),d.u=R*(Z*Le+O*(O*(128+O*(35*O-60))-512)/2048*ye*w+O*(5*O-4)/6144*O*O*Math.sin(2*Le)*ge+ne*Math.sin(3*Le)*he+-762939453125e-16*O*O*O*O*Math.sin(4*Le)*Math.cos(4*y)))),p!=null&&(u.s.Cd(r)&&u.s.Cd(l)?(y=Math.sqrt(1-Te*Te),p.u=Math.acos(y),0>k&&(p.u*=-1)):u.s.Y(u.s.P(r),1.570796326794897)?p.u=0>r?o:u.F.ba(3.141592653589793-o):(d=Te/c,R=Math.sqrt(1-d*d),0>c*D-j*G*Math.cos(V)&&(R*=-1),p.u=Math.atan2(d,R),u.s.Y(r,-l)&&u.s.P(u.F.ba(a-o))>3.141592653589793*(1-C*Math.cos(r))&&(0<r&&1.570796326794897>u.s.P(p.u)||0>r&&1.570796326794897<u.s.P(p.u))&&(p.u=u.s.Mb(3.141592653589793,p.u)-p.u))),g!=null&&(u.s.Cd(r)&&u.s.Cd(l)?(y=Math.sqrt(1-Te*Te),g.u=Math.acos(y),0<=k&&(g.u*=-1)):u.s.Y(u.s.P(l),1.570796326794897)?g.u=0>l?a:u.F.ba(3.141592653589793-a):(k=Te/G,d=Math.sqrt(1-k*k),R=Math.sin(V/2),0>Math.sin(N-b)-2*c*D*R*R&&(d*=-1),g.u=Math.atan2(k,d),g.u=u.F.ba(g.u+3.141592653589793),u.s.Y(r,-l)&&!u.s.Cd(r)&&!u.s.Y(u.s.P(r),1.570796326794897)&&u.s.P(u.F.ba(a-o))>3.141592653589793*(1-C*Math.cos(r))&&(p!=null?R=p.u:(d=Te/c,R=Math.sqrt(1-d*d),0>c*D-j*G*Math.cos(V)&&(R*=-1),R=Math.atan2(d,R),u.s.Y(r,-l)&&u.s.P(u.F.ba(a-o))>3.141592653589793*(1-C*Math.cos(r))&&(0<r&&1.570796326794897>u.s.P(R)||0>r&&1.570796326794897<u.s.P(R))&&(R=u.s.Mb(3.141592653589793,R)-R)),1.570796326794897>=u.s.P(R)&&1.570796326794897<u.s.P(g.u)||1.570796326794897<=u.s.P(R)&&1.570796326794897>u.s.P(g.u))&&(g.u=-1*u.F.ba(g.u+3.141592653589793))))}}}},A.rf=function(b,c,a,r,o,l,d,p){if(d!=null||p!=null)if(u.s.ti(c))u.Yg.rf(b,a,r,o,l,d,p);else if(l=u.F.ba(l),u.s.Y(u.s.P(r),1.570796326794897)||u.s.Cd(l)||u.s.Y(u.s.P(l),3.141592653589793))u.Wk.rf(b,c,a,r,o,l,d,p);else{var g=u.s.P(l)==1.570796326794897?0:Math.cos(l),y=u.s.P(l)==3.141592653589793?0:Math.sin(l);u.s.Y(u.s.P(r),1.570796326794897)&&(a=0),l=1-Math.sqrt(1-c);var w=u.F.Vq(c,r);r=u.s.P(w)==1.570796326794897?0:Math.cos(w);var S=Math.sin(w);w=Math.atan2(Math.tan(w),g);var k=r*y,C=k*k,O=1-C,R=c/(1-c)*O,N=(c=R*(256+R*(R*(74-47*R)-128))/1024)/4,j=c/6,G=o/(b*(1-l)*(1+R*(4096+R*(R*(320-175*R)-768))/16384)),D=G;do{var V=D;o=u.s.P(D)==1.570796326794897?0:Math.cos(D);var Z=(R=u.s.P(D)==3.141592653589793?0:Math.sin(D))*R;D=c*R*((b=Math.cos(2*w+D))+N*(o*(2*(D=b*b)-1)-j*b*(4*Z-3)*(4*D-3)))+G}while(!u.s.Y(V,D));o=u.s.P(D)==1.570796326794897?0:Math.cos(D),R=u.s.P(D)==3.141592653589793?0:Math.sin(D),d!=null&&(y=Math.atan2(R*y,r*o-S*R*g),O=l/16*O*(4+l*(4-3*O)),b=Math.cos(2*w+D),d.u=u.F.ba(a+(y-(1-O)*l*k*(D+O*R*(b+O*o*(2*b*b-1)))))),p!=null&&(O=S*R-r*o*g,O=(1-l)*Math.sqrt(C+O*O),p.u=Math.atan2(S*o+r*R*g,O))}},A}()}(B||(B={})),function(u){u.PC=function(){function A(){}return A.tb=function(b,c,a,r,o,l,d,p,g){var y=u.F.ba(o-a),w=u.s.Y(u.s.P(r),1.570796326794897),S=u.s.Y(u.s.P(l),1.570796326794897);if(u.s.Y(r,l)&&(u.s.Cd(y)||w))d!=null&&(d.u=0),p!=null&&(p.u=0),g!=null&&(g.u=0);else{if(u.s.ti(c)){var k=Math.sin(r),C=Math.sin(l);k=Math.sqrt((1+k)/(1-k)),C=Math.sqrt((1+C)/(1-C)),k=Math.log(C)-Math.log(k),k=Math.atan2(y,k),d!=null&&(d.u=u.s.Y(r,l)?u.s.P(b*Math.cos(r)*y):u.s.P((b*l-b*r)/Math.cos(k)))}else C=u.F.Qw(c,l),k=Math.sin(u.F.Qw(c,r)),C=Math.sin(C),k=Math.sqrt((1+k)/(1-k)),C=Math.sqrt((1+C)/(1-C)),k=Math.log(C)-Math.log(k),k=Math.atan2(y,k),d!=null&&(u.s.Y(r,l)?d.u=u.s.P(b*y*Math.cos(r)/u.F.w(c,r)):(y=u.F.q(b,c,r),b=u.F.q(b,c,l),d.u=u.s.P((b-y)/Math.cos(k))));p==null&&g==null||(d=u.F.ba(k+3.141592653589793),w&&S||!w&&!S||(w?k=0>r?o:u.F.ba(3.141592653589793-o):S&&(d=0>l?a:u.F.ba(3.141592653589793-a))),p!=null&&(p.u=k),g!=null&&(g.u=d))}},A.rf=function(b,c,a,r,o,l,d,p){l=u.F.ba(l),0>o&&(o=u.s.P(o),l=u.F.ba(l+3.141592653589793)),u.s.ti(c)?u.s.Y(u.s.P(r),1.570796326794897)?(a=0>r?l:u.F.ba(3.141592653589793-l),3.141592653589793>=(l=o/b%6.283185307179586)?b=r-u.s.Mb(l,r):(a=u.F.ba(a+3.141592653589793),b=-r+u.s.Mb(l-3.141592653589793,r))):u.s.Y(u.s.P(l),1.570796326794897)?(a=u.F.ba(a+u.s.Mb(o,l)/(b*Math.cos(r))),b=r):(b=r+o*Math.cos(l)/b,1.570796326794897<u.s.P(b)&&(b=1.570796326794897),u.s.Y(u.s.P(b),1.570796326794897)&&(u.s.Cd(l)||u.s.Y(u.s.P(l),3.141592653589793))||(1.570796316258184<u.s.P(b)&&(b=u.s.Mb(1.570796316258184,b)),c=Math.sin(r),r=Math.sin(b),c=Math.sqrt((1+c)/(1-c)),r=Math.sqrt((1+r)/(1-r)),c=Math.log(r)-Math.log(c),a=u.F.ba(a+Math.tan(l)*c))):u.s.Y(u.s.P(r),1.570796326794897)?(a=0>r?l:u.F.ba(3.141592653589793-l),l=o/u.F.qW(b,c),3.141592653589793>=(l%=6.283185307179586)?b=r-u.s.Mb(l,r):(a=u.F.ba(a+3.141592653589793),b=-r+u.s.Mb(l-3.141592653589793,r)),b=u.F.Rq(c,b)):u.s.Y(u.s.P(l),1.570796326794897)?(a=u.F.ba(a+u.s.Mb(o,l)*u.F.w(c,r)/(b*Math.cos(r))),b=r):(b=1.570796326794897*(o*Math.cos(l)+u.F.q(b,c,r))/u.F.Ah(b,c),1.570796326794897<u.s.P(b)&&(b=u.s.Mb(1.570796326794897,b)),b=u.F.Rq(c,b),u.s.Y(u.s.P(b),1.570796326794897)&&(u.s.Cd(l)||u.s.Y(u.s.P(l),3.141592653589793))||(o=u.F.Qw(c,r),r=u.F.Qw(c,b),1.570796316258184<u.s.P(r)&&(r=u.s.Mb(1.570796316258184,b),b=u.F.yO(c,r)),c=Math.sin(o),r=Math.sin(r),c=Math.sqrt((1+c)/(1-c)),r=Math.sqrt((1+r)/(1-r)),c=Math.log(r)-Math.log(c),a=u.F.ba(a+Math.tan(l)*c))),d!=null&&(d.u=a),p!=null&&(p.u=b)},A}()}(B||(B={})),function(u){u.kb=function(){function A(){}return A.Xy=function(b,c,a,r,o,l,d){u.cu.tb(b,c,a,r,o,l,null,d,null)},A.yi=function(b,c,a,r,o,l,d,p){u.cu.rf(b,c,a,r,o,l,d,p)},A.wd=function(b,c,a,r,o,l,d,p,g,y){switch(y){case 2:u.Wk.tb(b,c,a,r,o,l,d,p,g);break;case 3:u.QC.tb(b,c,a,r,o,l,d,p,g);break;case 1:u.PC.tb(b,c,a,r,o,l,d,p,g);break;default:u.cu.tb(b,c,a,r,o,l,d,p,g)}},A.oj=function(b,c,a,r,o,l,d,p,g){switch(g){case 2:u.Wk.rf(b,c,a,r,o,l,d,p);break;case 3:u.QC.rf(b,c,a,r,o,l,d,p);break;case 1:u.PC.rf(b,c,a,r,o,l,d,p);break;default:u.cu.rf(b,c,a,r,o,l,d,p)}},A}()}(B||(B={})),function(u){var A=function(){function c(){this.y=this.x=null}return c.construct=function(a){var r=new c;return r.x=new u.Wb,r.x.set(a.x),r.y=new u.Wb,r.y.set(a.y),r},c.VE=function(a,r){var o=new c;return o.x=new u.Wb,o.x.set(a),o.y=new u.Wb,o.y.set(r),o},c.prototype.qg=function(){return this.x.qg()&&this.y.qg()},c.prototype.value=function(){return u.h.construct(this.x.value(),this.y.value())},c}();u.vY=A;var b=function(){function c(){this.z=this.y=this.x=null}return c.construct=function(a){var r=new c;return r.x=new u.Wb,r.x.set(a.x),r.y=new u.Wb,r.y.set(a.y),r.z=new u.Wb,r.z.set(a.z),r},c.VE=function(a,r,o){var l=new c;return l.x=new u.Wb,l.x.set(a),l.y=new u.Wb,l.y.set(r),l.z=new u.Wb,l.z.set(o),l},c.prototype.qg=function(){return this.x.qg()&&this.y.qg()&&this.z.qg()},c.prototype.value=function(){return new u.Nd(this.x.value(),this.y.value(),this.z.value())},c.prototype.Qh=function(a){var r=new u.Wb,o=new u.Wb,l=new u.Wb;return r.Kl(this.x,a.x),o.Kl(this.y,a.y),l.Kl(this.z,a.z),(a=new u.Wb).dN(r,o),a.add(l),a},c.prototype.cF=function(a){var r=new c;r.x.Kl(this.y,a.z),r.y.Kl(this.z,a.x),r.z.Kl(this.x,a.y);var o=new u.Wb,l=new u.Wb,d=new u.Wb;return o.Kl(this.z,a.y),l.Kl(this.x,a.z),d.Kl(this.y,a.x),r.x.sub(o),r.y.sub(l),r.z.sub(d),r},c}();u.wY=b,u.Ox=function(){function c(){}return c.EP=function(a,r,o){var l=r.x;r=r.y,c.cl(1,a,Math.cos(l),Math.sin(l),Math.cos(r),Math.sin(r),o)},c.DP=function(a,r){var o=new u.Nd;return c.EP(a,r,o),o},c.cl=function(a,r,o,l,d,p,g){a/=Math.sqrt(1-r*p*p),g.K(a*d*o,a*d*l,a*(1-r)*p)},c.Yu=function(a,r){var o=new u.Wb,l=new u.Wb,d=new u.Wb,p=new u.Wb;o.cos(r.x),l.sin(r.x),d.cos(r.y),p.sin(r.y);var g=new u.Wb;return g.set(p),g.Ag(p),g.No(a),g.No(-1),g.kN(),g.sqrt(),(r=new u.Wb).set(1),r.jm(g),(g=new u.Wb).set(r),g.Ag(d),g.Ag(o),(o=new u.Wb).set(r),o.Ag(d),o.Ag(l),(l=new u.Wb).set(r),l.No(1-a),l.Ag(p),b.VE(g,o,l)},c.SS=function(a,r,o,l){if(Math.abs(r.x-o.x)>Math.PI||Math.abs(r.y)>.5*Math.PI||Math.abs(o.y)>.5*Math.PI||(Math.abs(r.y)==.5*Math.PI||Math.abs(o.y)==.5*Math.PI)&&r.x!=o.x)return NaN;if(l=c.cB(l,Math.min(r.x,o.x),Math.max(r.x,o.x)),!new u.Nc(r.x,o.x).contains(l))return NaN;var d=A.construct(r);if(o=A.construct(o),d=c.Yu(a,d),o=c.Yu(a,o),(o=d.cF(o)).z.qg())return r.y;var p=new u.Wb;p.set(o.x),p.jm(o.z),p.No(-1);var g=new u.Wb;g.set(o.y),g.jm(o.z),g.No(-1);var y=new u.Wb;return y.set(g),y.Ag(g),(d=new u.Wb).set(p),d.Ag(p),d.add(y),d.sqrt(),d.qg()||p.qg()&&g.qg()?r.y:(r=Math.atan2(g.value(),p.value()),r=Math.atan2(d.value()*Math.cos(r-l),1-a),l=c.DP(a,u.h.construct(l,r)),a=new u.Nd(l.x,l.y,-l.z),l=o.value().Qh(l),a=o.value().Qh(a),Math.abs(a)<Math.abs(l)&&(r=-r),r)},c.Oz=function(a,r,o,l,d){if(d[0]=NaN,d[1]=NaN,Math.abs(r.x-o.x)>Math.PI||Math.abs(r.y)>.5*Math.PI||Math.abs(o.y)>.5*Math.PI||(Math.abs(r.y)==.5*Math.PI||Math.abs(o.y)==.5*Math.PI)&&r.x!=o.x||Math.abs(l)>=.5*Math.PI||0<r.y&&0<o.y&&r.y>l&&o.y>l||0>r.y&&0>o.y&&r.y<l&&o.y<l)return 0;var p=A.construct(r),g=A.construct(o);p=c.Yu(a,p),g=c.Yu(a,g);var y=p.cF(g);if(y.z.qg())return new u.Nc(r.y,o.y).contains(l)?(d[0]=r.x,1):0;(g=new u.Wb).set(y.x),g.jm(y.z),g.No(-1),(p=new u.Wb).set(y.y),p.jm(y.z),p.No(-1),(y=new u.Wb).set(p),y.Ag(p);var w=new u.Wb;return w.set(g),w.Ag(g),w.add(y),w.sqrt(),w.qg()||g.qg()&&p.qg()?l==0?(d[0]=r.x,d[1]=o.x,2):0:(a=(1-a)*Math.tan(l)/w.value(),1<Math.abs(a)?0:(a=Math.acos(a),y=Math.atan2(p.value(),g.value()),g=Math.min(r.x,o.x),p=Math.max(r.x,o.x),o=c.cB(y-a,g,p),a=l!=0?c.cB(y+a,g,p):o,l=0,g<=o&&o<=p&&(d[l]=o,l++),a!=o&&g<=a&&a<=p&&(d[l]=a,++l==2&&Math.abs(d[0]-r.x)>Math.abs(d[1]-r.x)&&(r=d[0],d[0]=d[1],d[1]=r)),l))},c.cB=function(a,r,o){return a>o?a-=2*(r=Math.ceil((a-o)/(2*Math.PI)))*Math.PI:a<r&&(a+=2*(r=Math.ceil((r-a)/(2*Math.PI)))*Math.PI),a},c}()}(B||(B={})),function(u){u.XK=function(){function A(){}return A.$X=function(b,c){var a=8,r=[0,0,0,0],o=new u.h;o.L(c),o.scale(u.cb.sc(b).Hd().Ec()==9102?1:u.cb.sc(b).Hd().ai/3.141592653589793*180),-180>o.x?(o.x-=o.x%360,-180>o.x&&(o.x+=360)):180<o.x&&(o.x-=o.x%360,180<o.x&&(o.x-=360)),90<o.y&&(o.y=90),-90>o.y&&(o.y=-90);for(var l=-180,d=180,p=(b=5*a)-1,g=(c=(b+31)/32)-1;0<=g;g--)for(var y=p-32*g,w=Math.min(32,b-32*g),S=1;S<w;S+=2){var k=.5*(d+l);o.x>=k?(r[g]|=1<<y,l=k):d=k,y-=2,p-=2}for(l=-90,d=90,p=b-2,g=c-1;0<=g;g--)for(y=p-32*g,w=Math.min(32,b-32*g),S=0;S<w;S+=2)k=.5*(d+l),o.y>=k?(r[g]|=1<<y,l=k):d=k,y-=2,p-=2;return A.$P(r,a,a)},A.$P=function(b,c,a){for(var r=[],o=0;o<c;o++)r[o]="";for(var l=o=0,d=0;d<c;d++){var p=b[o]>>l&31;if(31<(l+=5)){var g=37-l;p&=(1<<g)-1,l-=32,p|=(b[++o]&(1<<l)-1)<<g}r[c-1-d]="0123456789bcdefghjkmnpqrstuvwxyz".split("")[p]}if(a>c)for(d=0;d<a-c;d++)r.push("0");else a<c&&(r.length=a);return r.join("")},A}()}(B||(B={})),function(u){var A={gcstol:[0,2e-9,1,2241706620489156e-24,2,2313672246530541e-24,3,898240164660333e-23,4,8982433838020134e-24,5,8982439417325895e-24,6,8982466029667677e-24,7,8982476760268133e-24,8,8982492642167149e-24,9,898251968292634e-23,10,898253685210448e-23,11,8982546725256576e-24,12,8982557456049832e-24,13,898257333682596e-23,14,8982575482995276e-24,15,8982578488197342e-24,16,8982579775336987e-24,17,89825840676828e-22,18,8982599090925448e-24,19,8982605529473397e-24,20,8982609220517402e-24,21,8982611968030573e-24,22,8982616260407152e-24,23,8982620552787834e-24,24,8982633429954492e-24,25,8982637722351582e-24,26,898264416095491e-23,27,8982646307158072e-24,28,8982654891980968e-24,29,8982667769246082e-24,30,8982674207892485e-24,31,8982680646548117e-24,32,8982682792768713e-24,33,8982685798042582e-24,34,8982689231436652e-24,35,898269137766135e-23,36,898269266624163e-23,37,8982705114087017e-24,38,8982706830791106e-24,39,8982711958374661e-24,40,8982712839964735e-24,41,8982717991496125e-24,42,8982721424914803e-24,43,8982723571154887e-24,44,8982727863638127e-24,45,8982730868942154e-24,46,8982734302370678e-24,47,8982745033612112e-24,48,8982751472369276e-24,49,8982755764879183e-24,50,8982762203651733e-24,51,8982764776628385e-24,52,8982766496171896e-24,53,898277722749025e-23,54,898278152002477e-23,55,898279933943848e-23,56,89829143024805e-22,57,8982922161948598e-24,58,898292327314211e-23,59,8982925667349601e-24,60,8982932222965576e-24,61,8982961298941316e-24,62,8982965524049989e-24,63,8982994818246099e-24,64,8982994895706967e-24,65,898299489597736e-23,66,8983000733443498e-24,67,8983055097289157e-24,68,8983064111047368e-24,69,8983111996941178e-24,70,8983120447446023e-24,71,898312748954554e-23,72,8983134531656096e-24,73,8983141573777694e-24,74,8983148615910332e-24,75,8983152841195215e-24,76,8983153545409748e-24,77,8983153827095593e-24,78,898315396793852e-23,79,8983154249624393e-24,80,8983155658054012e-24,81,8983960794340072e-24,82,8984061344391998e-24,83,8984072829255685e-24,84,8984194981201908e-24,85,8984275233099427e-24,86,8984326127007554e-24,87,8984330099816539e-24,88,898433275258421e-23,89,8984333047023206e-24,90,8984333885258723e-24,91,8984337959508212e-24,92,8984365176209457e-24,93,8984727360418079e-24,94,8984901041679577e-24,95,898542662091587e-23,96,898610024130669e-23,97,8992894229037531e-24,98,8993203677616635e-24,99,8993206178094346e-24,100,8993216059187305e-24,101,899322029394808e-23,102,8994627867045891e-24,103,9467559984315793e-24,104,946881168618118e-23,105,9980888154931644e-24,106,9981105353606775e-24,107,9983807356573187e-24,108,1687060485811522e-23,109,1688447560354875e-23,110,2176606011487185e-23,111,2225078816042032e-23,112,2348476432064694e-23,113,2348765250187846e-23,114,2378108974103778e-23,115,314559636297708e-22,116,3297788621680806e-23,117,3667892343788279e-23,118,4235973644320739e-23,119,4794625900676345e-23,120,7262742998235812e-23,121,7499447580246377e-23,122,7525056410964318e-23,123,7979913581209237e-23,124,9662020153976783e-23,125,9799175562353741e-23,126,9897353517547472e-23,127,102313891987647e-21,128,1081460541960784e-22,129,121905913857622e-21,130,2246893314238523e-22,131,2297344808062643e-22,132,242984645941825e-21,133,2754604784282804e-22,134,2884548130346993e-22,135,3370339971357784e-22,136,4307953346848296e-22,137,5208707228462029e-22,138,5509209568565608e-22,139,6452227422644406e-22,140,6740679942715567e-22,141,6861770001566745e-22,142,7252630318111686e-22,143,7441010326374328e-22,144,7742672907173287e-22,145,9629542775307953e-22,146,1061032953945969e-21,147,1143628333594458e-21,148,1162186197019925e-21,149,136418522650196e-20,150,1367441038498385e-21,151,1432394487827058e-21,152,1736235742820677e-21,153,1848250952034914e-21,154,1909859317102744e-21,155,1975716534933873e-21,156,2122065907891938e-21,157,272837045300392e-20,158,3183098861837907e-21,159,3580986219567645e-21,160,3819718634205488e-21,161,409255567950588e-20,162,4407367654852486e-21,163,4774648292756861e-21,164,5161781938115525e-21,165,520870722846203e-20,166,5729577951308232e-21,167,6031134685587613e-21,168,6987290184522236e-21,169,9241254760174569e-21,170,1145915590261646e-20],pcstol:[0,6666666666666667e-24,1,2e-8,2,4970973863636364e-20,3,4970978156565657e-20,4,4970980410559237e-20,5,.001,6,.001093615055555556,7,.001093615194444445,8,.001093619003239988,9,.001093623110088878,10,.003280833333333333,11,.003280839895013123,12,.003280843014596366,13,.003280845583333334,14,.003280869330266636,15,.00497101413676763],newtoold:[2154,102110,2195,102200,2204,32036,2205,26979,2225,102641,2226,102642,2227,102643,2228,102644,2229,102645,2230,102646,2231,102653,2232,102654,2233,102655,2234,102656,2235,102657,2236,102658,2237,102659,2238,102660,2239,102666,2240,102667,2241,102668,2242,102669,2243,102670,2246,102679,2247,102680,2248,102685,2249,102686,2250,102687,2254,102694,2255,102695,2257,102712,2258,102713,2259,102714,2260,102715,2261,102716,2262,102717,2263,102718,2264,102719,2267,102724,2268,102725,2271,102728,2272,102729,2274,102736,2275,102737,2276,102738,2277,102739,2278,102740,2279,102741,2283,102746,2284,102747,2285,102748,2286,102749,2287,102752,2288,102753,2289,102754,2312,23433,2326,102140,2395,2091,2396,2092,2397,2166,2398,2167,2399,2168,2759,102229,2760,102230,2761,102248,2762,102249,2763,102250,2764,102251,2765,102252,2766,102241,2767,102242,2768,102243,2769,102244,2770,102245,2771,102246,2772,102253,2773,102254,2774,102255,2775,102256,2776,102257,2777,102258,2778,102259,2779,102260,2780,102266,2781,102267,2782,102261,2783,102262,2784,102263,2785,102264,2786,102265,2787,102268,2788,102269,2789,102270,2790,102271,2791,102272,2792,102273,2793,102274,2794,102275,2795,102276,2796,102277,2797,102278,2798,102279,2799,102280,2800,102281,2801,102282,2802,102283,2803,102284,2804,102285,2805,102286,2806,102287,2807,102288,2808,102289,2809,102290,2810,102291,2811,102292,2812,102293,2813,102294,2814,102295,2815,102296,2816,102297,2817,102298,2818,102300,2819,102304,2820,102307,2821,102308,2822,102309,2823,102310,2824,102311,2825,102312,2826,102313,2827,102314,2828,102315,2829,102316,2830,102317,2831,102318,2832,102320,2833,102321,2834,102322,2835,102323,2836,102324,2837,102325,2838,102326,2839,102327,2840,102330,2841,102334,2842,102335,2843,102336,2844,102337,2845,102338,2846,102339,2847,102340,2848,102341,2849,102342,2850,102343,2851,102344,2852,102345,2853,102346,2854,102347,2855,102348,2856,102349,2857,102350,2858,102351,2859,102352,2860,102353,2861,102354,2862,102355,2863,102356,2864,102357,2865,102358,2866,102361,2942,102167,2943,102169,2944,2139,2945,2140,2946,2141,2947,2142,2948,2143,2949,2144,2950,2145,2951,2146,2952,2147,2953,2036,2954,2291,2955,2153,2956,2152,2957,2151,2958,2150,2959,2149,2960,2037,2961,2038,2962,2148,2965,2244,2966,2245,3003,102091,3004,102092,3005,102190,3060,2982,3067,102139,3072,102606,3074,102608,3075,102208,3077,102210,3078,102123,3080,102119,3081,102603,3082,102602,3083,102601,3088,65163,3089,102763,3090,102363,3092,102151,3093,102152,3094,102153,3095,102154,3096,102155,3097,102145,3098,102146,3099,102147,3100,102148,3101,102149,3102,2155,3107,102172,3110,102170,3111,102171,3119,2214,3158,102234,3159,102235,3160,102236,3336,2979,3338,102006,3346,2600,3370,102126,3371,102127,3372,102130,3373,102131,3389,2577,3390,2694,3400,102184,3401,102185,3404,3359,3407,3366,3417,102675,3418,102676,3419,102677,3420,102678,3421,102707,3422,102708,3423,102709,3424,102711,3433,102651,3434,102652,3435,102671,3436,102672,3437,102710,3438,102730,3448,102095,3451,102681,3452,102682,3455,102735,3461,2063,3462,2064,3463,3073,3464,3076,3560,102742,3566,102743,3567,102744,3734,102722,3735,102723,3736,102755,3737,102756,3738,102757,3739,102758,3741,102205,3742,102206,3743,102207,3748,102211,3750,102202,3751,102203,3759,102663,3760,102463,3764,102112,3770,102090,3771,102180,3772,102181,3773,102182,3775,102186,3776,102187,3777,102188,3800,102183,3801,102189,3812,102199,3814,102609,3815,102469,3819,104990,3821,104136,3824,104137,3825,102444,3826,102443,3827,102442,3828,102441,3857,102100,3889,104991,3906,104992,4048,103201,4049,103202,4050,103203,4051,103204,4056,103205,4057,103206,4058,103207,4059,103208,4060,103209,4061,103210,4062,103211,4063,103212,4071,103213,4082,103214,4083,103215,4093,103216,4094,103217,4095,103218,4096,103219,4167,104108,4169,37252,4171,104107,4189,104110,4197,4234,4223,37223,4304,104304,4414,102201,4415,102762,4417,102764,4434,102765,4437,102647,4455,32029,4456,32018,4457,3454,4462,102439,4463,4466,4470,4469,4484,103794,4485,103795,4486,103796,4487,103797,4488,103798,4489,103799,4611,104104,4612,104111,4613,37255,4615,37247,4616,37250,4617,4140,4618,4291,4620,37211,4626,37235,4647,102362,4658,37204,4668,37201,4669,4126,4672,37217,4673,104125,4675,37220,4684,37232,4698,4631,4707,37213,4708,37231,4709,37212,4710,37238,4711,37214,4712,37237,4713,37208,4714,37215,4715,37253,4716,37216,4717,37239,4719,37219,4722,37242,4724,37233,4725,37222,4727,37224,4728,37246,4729,37226,4730,37227,4731,37228,4732,37229,4733,37230,4734,37251,4735,37259,4736,37254,4739,37205,4758,104133,4760,37001,4762,104114,4826,102214,5013,104142,5014,102331,5015,102332,5016,102333,5173,102085,5174,102086,5175,102087,5176,102088,5177,102089,5178,102040,5179,102080,5185,102081,5186,102082,5187,102083,5188,102084,5221,102066,5246,104100,5247,102490,5324,104144,5325,102420,5329,2934,5365,104143,5367,102305,5451,104132,5513,102065,5514,102067,5519,102111,5520,31461,5646,102745,5839,5388,5858,5532,5879,4474,6207,104256,6244,102769,6245,102790,6246,102770,6247,102771,6248,102793,6249,102796,6250,102772,6251,102788,6252,102775,6253,102795,6254,102781,6255,102767,6256,102774,6257,102768,6258,102797,6259,102789,6260,102780,6261,102783,6262,102787,6263,102791,6264,102777,6265,102798,6266,102779,6267,102784,6268,102792,6269,102782,6270,102785,6271,102794,6272,102773,6273,102778,6274,102786,6275,102776,6311,104141,6318,104145,6322,104287,6325,104286,6328,102046,6329,102047,6330,102048,6331,102049,6332,102050,6333,102051,6334,102052,6335,102053,6336,102054,6337,102055,6338,102056,6339,102057,6340,102058,6341,102059,6342,102382,6343,102383,6344,102384,6345,102385,6346,102386,6347,102387,6348,102388,6350,102965,6355,102975,6356,102976,6391,6141,6393,102966,6394,102977,6395,102978,6396,102979,6397,102980,6398,102981,6399,102982,6400,102983,6401,102984,6402,102985,6403,102986,6404,102988,6405,102991,6406,102987,6407,102990,6408,102989,6409,102992,6410,102993,6411,102995,6412,102994,6413,102996,6414,102962,6415,102997,6416,103003,6417,102998,6418,103004,6419,102999,6420,103005,6421,103e3,6422,103006,6423,103001,6424,103007,6425,103002,6426,103008,6427,103010,6428,103013,6429,103009,6430,103012,6431,103011,6432,103014,6433,103015,6434,103016,6435,103017,6436,103018,6437,103019,6438,103022,6439,102967,6440,103021,6441,103024,6442,103020,6443,103023,6444,103025,6445,103027,6446,103026,6447,103028,6448,103030,6449,103033,6450,103029,6451,103032,6452,103031,6453,103034,6454,103035,6455,103037,6456,103036,6457,103038,6458,103039,6459,103041,6460,103040,6461,103042,6462,103043,6463,103045,6464,103044,6465,103046,6466,103047,6467,103049,6468,103048,6469,103050,6470,103051,6471,103052,6472,103053,6473,103054,6474,103055,6475,103056,6476,103057,6477,103059,6478,103058,6479,103060,6480,103066,6481,103065,6482,103067,6483,103061,6484,103063,6485,103062,6486,103064,6487,103068,6488,103069,6489,103071,6490,103073,6491,103070,6492,103072,6493,103075,6494,103078,6495,103074,6496,103077,6497,102968,6498,103076,6499,103079,6500,103081,6501,103084,6502,103080,6503,103083,6504,103082,6505,103085,6506,103086,6507,103088,6508,102963,6509,103087,6510,103089,6511,103091,6512,103090,6513,103092,6514,103093,6515,103094,6516,103095,6518,103098,6519,103101,6520,103097,6521,103100,6522,103099,6523,103102,6524,103103,6525,103104,6526,103105,6527,103106,6528,103108,6529,103111,6530,103107,6531,103110,6532,103109,6533,103112,6534,103114,6535,103118,6536,103113,6537,103117,6538,103116,6539,103120,6540,103115,6541,103119,6542,103121,6543,103122,6544,103123,6545,103125,6546,103124,6547,103126,6548,103127,6549,103129,6550,103128,6551,103130,6552,103131,6553,103133,6554,103132,6555,103134,6556,102969,6557,102970,6558,103135,6559,103137,6560,103136,6561,103138,6562,103139,6563,103140,6564,103141,6565,103142,6566,103200,6567,103143,6568,103144,6569,103145,6570,103146,6571,103147,6572,103149,6573,103148,6574,103150,6575,103151,6576,103152,6577,103155,6578,103160,6579,102971,6580,102972,6581,103153,6582,103158,6583,103154,6584,103159,6585,103157,6586,103162,6587,103156,6588,103161,6589,103172,6590,103173,6592,103174,6593,103176,6594,103175,6595,103177,6596,103178,6597,103180,6598,103179,6599,103181,6600,103182,6601,103184,6602,103183,6603,103185,6605,103190,6606,103186,6607,103189,6608,103188,6609,103191,6610,102973,6611,103192,6612,103196,6613,103193,6614,103197,6615,103195,6616,103199,6617,103194,6618,103198,6619,103164,6620,103163,6621,103165,6625,103170,6626,103169,6627,103171,6628,102520,6629,102521,6630,102522,6631,102523,6632,102524,6633,102527,6634,102493,6635,102494,6636,102496,6637,102495,6668,104020,6669,102610,6670,102611,6671,102612,6672,102613,6673,102614,6674,102615,6675,102616,6676,102617,6677,102618,6678,102619,6679,102620,6680,102621,6681,102622,6682,102623,6683,102624,6684,102625,6685,102626,6686,102627,6687,102628,6688,102593,6689,102594,6690,102595,6691,102596,6692,102597,6783,104223,6784,102530,6785,102500,6788,102532,6789,102502,6792,102533,6793,102503,6796,102531,6797,102501,6800,102534,6801,102504,6804,102535,6805,102505,6808,102536,6809,102506,6812,102537,6813,102507,6816,102538,6817,102508,6820,102539,6821,102509,6824,102540,6825,102510,6828,102541,6829,102511,6832,102542,6833,102512,6836,102543,6837,102513,6840,102544,6841,102514,6844,102546,6845,102516,6848,102545,6849,102515,6852,102547,6853,102517,6856,102548,6857,102518,6860,102549,6861,102519,6867,102380,6868,102381,6879,103187,6880,103096,6884,102376,6885,102378,6886,102377,6887,102379,7136,6980,7139,6987,7142,102706,7692,102557,7693,102558,7694,102559,7695,102560,7696,102561,8090,103318,8091,103418,8092,103317,8093,103417,8095,103371,8096,103471,8097,103369,8098,103469,8099,103368,8100,103468,8101,103367,8102,103467,8103,103366,8104,103466,8105,103365,8106,103465,8107,103364,8108,103464,8109,103363,8110,103463,8111,103362,8112,103462,8113,103361,8114,103461,8115,103360,8116,103460,8117,103359,8118,103459,8119,103357,8120,103457,8121,103356,8122,103456,8123,103355,8124,103455,8125,103354,8126,103454,8127,103353,8128,103453,8129,103352,8130,103452,8131,103350,8132,103450,8133,103349,8134,103449,8135,103348,8136,103448,8139,103343,8140,103443,8141,103342,8142,103442,8143,103341,8144,103441,8145,103339,8146,103439,8147,103337,8148,103437,8149,103336,8150,103436,8151,103334,8152,103434,8153,103333,8154,103433,8155,103331,8156,103431,8161,103326,8162,103426,8163,103325,8164,103425,8165,103324,8166,103424,8171,103321,8172,103421,8173,103320,8177,103420,8179,103316,8180,103416,8181,103315,8182,103415,8184,103314,8185,103414,8191,103312,8193,103412,8196,103311,8197,103411,8198,103310,8200,103410,8201,103309,8202,103409,8203,103308,8204,103408,8207,103306,8208,103406,8209,103305,8210,103405,8212,103304,8213,103404,8214,103303,8216,103403,8218,103302,8220,103402,8222,103301,8224,103401,8431,104248,8441,102590,8693,102449,8826,102605,8857,54035,8858,54036,8859,54037,8860,8449,8988,104115,8989,104116,8990,104117,8991,104118,8992,104119,8993,104120,8994,104121,8995,104122,8996,104123,8997,104124,8998,104896,8999,104257,9e3,104019,9014,104010,9019,104021,9053,104011,9054,104012,9055,104013,9056,104014,9057,104015,9059,104258,9060,104179,9061,104180,9062,104181,9063,104182,9064,104183,9065,104184,9066,104185,9067,104186,21896,21891,21897,21892,21898,21893,21899,21894,26701,102124,26702,102125,26799,26747,26847,102683,26848,102684,26849,102691,26850,102692,26851,102693,26852,102704,26853,102750,26854,102751,26857,102466,26858,102467,26859,102468,26901,102128,26902,102129,27493,27492,29101,29100,29168,29118,29169,29119,29170,29120,29171,29121,29172,29122,29187,29177,29188,29178,29189,29179,29190,29180,29191,29181,29192,29182,29193,29183,29194,29184,29195,29185,29902,29900,31279,31278,31281,31291,31282,31292,31283,31293,31284,31294,31285,31295,31286,31296,31287,31297,31466,31462,31467,31463,31468,31464,31469,31465,31986,31917,31987,31918,31988,31919,31989,31920,31990,31921,31991,31922,32064,32074,32065,32075,32066,32076,32067,32077,102550,2181,102551,2182,102552,2183,102553,2184,102554,2185,102555,2186,102556,2187],pcsid:[2066,15,2136,12,2155,10,2157,5,2158,5,2159,12,2160,12,2219,5,2220,5,2244,10,2245,10,2256,11,2265,11,2266,11,2269,11,2270,11,2273,11,2290,5,2291,5,2294,5,2295,5,2313,5,2314,14,2899,10,2900,10,2901,11,2909,11,2910,11,2911,10,2912,10,2913,11,2914,11,2964,10,2967,10,2968,10,2991,5,2992,11,2993,5,2994,11,3073,5,3076,5,3079,5,3091,10,3106,5,3108,5,3109,5,3141,5,3142,5,3167,4,3337,5,3347,5,3348,5,3359,10,3360,5,3361,11,3362,5,3363,10,3364,5,3365,10,3366,14,3402,5,3403,5,3405,5,3406,5,3439,5,3440,5,3447,5,3449,5,3450,5,3453,10,3454,10,3460,5,3479,11,3480,5,3481,11,3482,5,3483,11,3484,5,3485,10,3486,5,3487,10,3488,5,3489,5,3490,10,3491,5,3492,10,3493,5,3494,10,3495,5,3496,10,3497,5,3498,10,3499,5,3500,10,3501,5,3502,10,3503,5,3504,10,3505,5,3506,10,3507,5,3508,10,3509,5,3510,10,3511,5,3512,10,3513,5,3514,5,3515,10,3516,5,3517,10,3518,5,3519,10,3520,5,3521,10,3522,5,3523,10,3524,5,3525,10,3526,5,3527,10,3528,5,3529,10,3530,5,3531,10,3532,5,3533,10,3534,5,3535,10,3536,5,3537,10,3538,5,3539,10,3540,5,3541,10,3542,5,3543,10,3544,5,3545,10,3546,5,3547,10,3548,5,3549,10,3550,5,3551,10,3552,5,3553,10,3582,10,3583,5,3584,10,3585,5,3586,10,3587,5,3588,11,3589,5,3590,11,3591,5,3592,5,3593,11,3598,10,3599,5,3600,10,3605,11,3606,5,3607,5,3608,10,3609,5,3610,10,3611,5,3612,10,3613,5,3614,10,3615,5,3616,10,3617,5,3618,10,3619,5,3620,10,3621,5,3622,10,3623,5,3624,10,3625,5,3626,10,3627,5,3628,10,3629,5,3630,10,3631,5,3632,10,3633,5,3634,11,3635,5,3636,11,3640,10,3641,5,3642,10,3643,5,3644,11,3645,5,3646,11,3647,5,3648,11,3649,5,3650,10,3651,5,3652,10,3653,5,3654,10,3655,5,3656,11,3657,5,3658,10,3659,5,3660,10,3661,5,3662,10,3663,5,3664,10,3668,10,3669,5,3670,10,3671,5,3672,10,3673,5,3674,10,3675,5,3676,11,3677,10,3678,5,3679,11,3680,10,3681,5,3682,11,3683,10,3684,5,3685,5,3686,10,3687,5,3688,10,3689,5,3690,10,3691,5,3692,10,3696,10,3697,5,3698,10,3699,5,3700,10,3740,5,3749,5,3783,5,3784,5,3793,5,3794,5,3802,5,3816,5,3829,5,3854,5,3911,5,3912,5,3920,5,3978,5,3979,5,3991,10,3992,10,4026,5,4037,5,4038,5,4087,5,4088,5,4217,10,4438,10,4439,10,4467,5,4471,5,4474,5,4559,5,4822,5,4839,5,5018,5,5048,5,5167,5,5168,5,5223,5,5234,5,5235,5,5243,5,5266,5,5316,5,5320,5,5321,5,5330,5,5331,5,5337,5,5361,5,5362,5,5382,5,5383,5,5396,5,5456,5,5457,5,5469,5,5472,9,5490,5,5518,5,5523,5,5559,5,5588,11,5589,14,5596,5,5627,5,5629,5,5641,5,5643,5,5644,5,5654,10,5655,10,5659,5,5700,5,5825,5,5836,5,5837,5,5842,5,5844,5,5880,5,5887,5,5890,5,6128,11,6129,11,6141,11,6204,5,6210,5,6211,5,6307,5,6312,5,6316,5,6362,5,6591,5,6646,5,6703,5,6786,5,6787,11,6790,5,6791,11,6794,5,6795,11,6798,5,6799,11,6802,5,6803,11,6806,5,6807,11,6810,5,6811,11,6814,5,6815,11,6818,5,6819,11,6822,5,6823,11,6826,5,6827,11,6830,5,6831,11,6834,5,6835,11,6838,5,6839,11,6842,5,6843,11,6846,5,6847,11,6850,5,6851,11,6854,5,6855,11,6858,5,6859,11,6862,5,6863,11,6870,5,6875,5,6876,5,6915,5,6922,5,6923,10,6924,5,6925,10,6962,5,6984,5,6991,5,7128,10,7131,5,7132,10,7257,5,7258,10,7259,5,7260,10,7261,5,7262,10,7263,5,7264,10,7265,5,7266,10,7267,5,7268,10,7269,5,7270,10,7271,5,7272,10,7273,5,7274,10,7275,5,7276,10,7277,5,7278,10,7279,5,7280,10,7281,5,7282,10,7283,5,7284,10,7285,5,7286,10,7287,5,7288,10,7289,5,7290,10,7291,5,7292,10,7293,5,7294,10,7295,5,7296,10,7297,5,7298,10,7299,5,7300,10,7301,5,7302,10,7303,5,7304,10,7305,5,7306,10,7307,5,7308,10,7309,5,7310,10,7311,5,7312,10,7313,5,7314,10,7315,5,7316,10,7317,5,7318,10,7319,5,7320,10,7321,5,7322,10,7323,5,7324,10,7325,5,7326,10,7327,5,7328,10,7329,5,7330,10,7331,5,7332,10,7333,5,7334,10,7335,5,7336,10,7337,5,7338,10,7339,5,7340,10,7341,5,7342,10,7343,5,7344,10,7345,5,7346,10,7347,5,7348,10,7349,5,7350,10,7351,5,7352,10,7353,5,7354,10,7355,5,7356,10,7357,5,7358,10,7359,5,7360,10,7361,5,7362,10,7363,5,7364,10,7365,5,7366,10,7367,5,7368,10,7369,5,7370,10,7877,5,7878,5,7882,5,7883,5,7887,5,7899,5,7991,5,7992,5,8035,10,8036,10,8058,5,8059,5,8082,5,8083,5,8088,5,8137,5,8138,10,8157,5,8158,10,8159,5,8160,10,8167,5,8168,10,8169,5,8170,10,8187,5,8189,10,8205,5,8206,10,8225,5,8226,10,8311,5,8312,11,8313,5,8314,11,8315,5,8316,11,8317,5,8318,11,8319,5,8320,11,8321,5,8322,11,8323,5,8324,11,8325,5,8326,11,8327,5,8328,11,8329,5,8330,11,8331,5,8332,11,8333,5,8334,11,8335,5,8336,11,8337,5,8338,11,8339,5,8340,11,8341,5,8342,11,8343,5,8344,11,8345,5,8346,11,8347,5,8348,11,8352,5,8353,5,8379,5,8380,10,8381,5,8382,10,8383,5,8384,10,8385,5,8387,10,8391,5,8395,5,8433,5,8455,5,8456,5,8531,10,8682,5,8687,5,8692,5,8903,5,8950,5,8951,5,9039,5,9040,5,9141,5,9149,5,9150,5,9191,5,9221,5,9222,5,20499,5,20538,5,20539,5,20790,5,20791,5,21291,5,21292,5,21500,5,21817,5,21818,5,22032,5,22033,5,22091,5,22092,5,22332,5,22391,5,22392,5,22700,5,22770,5,22780,5,22832,5,23090,5,23095,5,23239,5,23240,5,23433,5,23700,5,24047,5,24048,5,24100,14,24200,5,24305,5,24306,5,24382,6,24383,5,24500,5,24547,5,24548,5,24571,2,24600,5,25e3,5,25231,5,25884,5,25932,5,26237,5,26331,5,26332,5,26591,5,26592,5,26632,5,26692,5,26855,10,26856,10,27120,5,27200,5,27291,7,27292,7,27429,5,27492,5,27500,5,27700,5,28232,5,28600,5,28991,5,28992,5,29100,5,29220,5,29221,5,29333,5,29635,5,29636,5,29701,5,29738,5,29739,5,29849,5,29850,5,29871,3,29872,13,29873,5,29900,5,29901,5,29903,5,30200,15,30339,5,30340,5,30791,5,30792,5,31028,5,31121,5,31154,5,31170,5,31171,5,31370,5,31528,5,31529,5,31600,5,31700,5,31838,5,31839,5,31901,5,32061,5,32062,5,32098,5,32099,10,32100,5,32104,5,32161,5,32766,5,53048,5,53049,5,54090,5,54091,5,65061,10,65062,10,65161,5,65163,5,102041,10,102064,8,102068,1,102069,0,102118,10,102119,11,102120,10,102121,10,102217,10,102218,5,102219,10,102220,10,102378,11,102379,11,102380,5,102381,11,102498,5,102499,5,102589,10,102590,5,102599,10,102600,10,102604,10,102605,5,102606,5,102647,5,102704,10,102705,10,102706,5,102733,10,102761,10,102762,5,102763,10,102764,5,102765,5,102766,10,102962,5,102963,5,102970,11,102974,10,102993,5,102994,5,102995,10,102996,10,103015,5,103016,10,103017,5,103018,10,103025,5,103026,5,103027,10,103028,10,103035,5,103036,5,103037,10,103038,10,103039,5,103040,5,103041,10,103042,10,103043,5,103044,5,103045,10,103046,10,103047,5,103048,5,103049,10,103050,10,103051,5,103052,10,103053,5,103054,10,103055,5,103056,10,103057,5,103058,5,103059,10,103060,10,103061,5,103062,5,103063,10,103064,10,103069,10,103070,5,103071,5,103072,10,103073,10,103086,5,103087,5,103088,10,103089,10,103094,11,103095,5,103096,10,103103,5,103104,10,103105,5,103106,10,103121,5,103122,10,103123,5,103124,5,103125,11,103126,11,103127,5,103128,5,103129,10,103130,10,103131,5,103132,5,103133,10,103134,10,103135,5,103136,5,103137,11,103138,11,103139,5,103140,10,103141,5,103142,10,103143,5,103144,10,103145,5,103146,11,103147,5,103148,5,103149,10,103150,10,103151,5,103152,10,103172,5,103173,10,103174,5,103175,5,103176,10,103177,10,103178,5,103179,5,103180,10,103181,10,103182,5,103183,5,103184,10,103185,10,103228,5,103229,5,103230,10,103231,10,103250,5,103251,10,103252,5,103253,10,103260,5,103261,5,103262,10,103263,10,103270,5,103271,5,103272,10,103273,10,103274,5,103275,5,103276,10,103277,10,103278,5,103279,5,103280,10,103281,10,103282,5,103283,5,103284,10,103285,10,103286,5,103287,10,103288,5,103289,10,103290,5,103291,10,103292,5,103293,5,103294,10,103295,10,103296,5,103297,5,103298,10,103299,10,103376,10,103377,5,103378,5,103379,10,103380,10,103393,5,103394,5,103395,10,103396,10,103472,5,103473,11,103474,5,103475,10,103482,5,103483,10,103484,5,103485,10,103500,5,103501,10,103502,5,103503,5,103504,11,103505,11,103506,5,103507,5,103508,10,103509,10,103510,5,103511,5,103512,10,103513,10,103514,5,103515,10,103516,5,103517,10,103518,5,103519,10,103520,5,103521,11,103522,5,103523,5,103524,10,103525,10,103526,5,103527,10,103561,10,103562,10,103563,5,103564,5,103565,10,103566,10,103567,5,103568,5,103569,10,103570,10,103585,10,103586,5,103587,10,103588,11,103589,5,103590,10,103591,11,103592,5,103593,10,103594,11,103695,10,103846,5,103946,10],pcsidc:[[2e3,2045,5],[2056,2065,5],[2067,2135,5],[2137,2153,5],[2161,2170,5],[2172,2193,5],[2196,2198,5],[2200,2203,5],[2206,2217,5],[2222,2224,11],[2251,2253,11],[2280,2282,11],[2308,2311,5],[2315,2325,5],[2327,2394,5],[2400,2491,5],[2494,2758,5],[2867,2869,11],[2870,2888,10],[2891,2895,10],[2896,2898,11],[2902,2908,10],[2915,2920,10],[2921,2923,11],[2924,2930,10],[2931,2941,5],[2969,2973,5],[2975,2982,5],[2984,2988,5],[2995,3002,5],[3006,3051,5],[3054,3059,5],[3061,3066,5],[3068,3071,5],[3084,3087,5],[3112,3118,5],[3120,3138,5],[3146,3151,5],[3153,3157,5],[3161,3166,5],[3168,3172,5],[3174,3203,5],[3294,3313,5],[3315,3335,5],[3339,3345,5],[3350,3358,5],[3367,3369,5],[3374,3388,5],[3391,3399,5],[3408,3416,5],[3425,3432,10],[3441,3446,10],[3456,3459,10],[3465,3478,5],[3554,3559,5],[3561,3565,10],[3568,3570,10],[3571,3581,5],[3594,3597,5],[3601,3604,5],[3637,3639,5],[3665,3667,5],[3693,3695,5],[3701,3727,5],[3728,3733,10],[3744,3747,5],[3753,3758,10],[3761,3763,5],[3765,3769,5],[3779,3781,5],[3788,3791,5],[3797,3799,5],[3832,3841,5],[3844,3852,5],[3873,3885,5],[3890,3893,5],[3942,3950,5],[3968,3970,5],[3973,3976,5],[3986,3989,5],[3994,3997,5],[4390,4398,5],[4399,4413,10],[4418,4433,10],[4491,4554,5],[4568,4589,5],[4652,4656,5],[4766,4800,5],[5069,5072,5],[5105,5130,5],[5180,5184,5],[5253,5259,5],[5269,5275,5],[5292,5311,5],[5343,5349,5],[5355,5357,5],[5387,5389,5],[5459,5463,5],[5479,5482,5],[5530,5539,5],[5550,5552,5],[5562,5583,5],[5623,5625,10],[5631,5639,5],[5649,5653,5],[5663,5680,5],[5682,5685,5],[5875,5877,5],[5896,5899,5],[5921,5940,5],[6050,6125,5],[6351,6354,5],[6366,6372,5],[6381,6387,5],[6622,6624,5],[6707,6709,5],[6720,6723,5],[6732,6738,5],[6931,6933,5],[7005,7007,5],[7057,7070,10],[7074,7082,5],[7109,7118,5],[7119,7127,11],[7374,7376,5],[7528,7586,5],[7587,7645,10],[7755,7787,5],[7791,7795,5],[7799,7801,5],[7803,7805,5],[7825,7831,5],[7845,7859,5],[8013,8032,5],[8065,8068,11],[8518,8529,10],[8533,8536,10],[8538,8540,10],[8677,8679,5],[8836,8840,5],[8908,8910,5],[9154,9159,5],[9205,9218,5],[20002,20032,5],[20062,20092,5],[20135,20138,5],[20248,20258,5],[20348,20358,5],[20436,20440,5],[20822,20824,5],[20934,20936,5],[21035,21037,5],[21095,21097,5],[21148,21150,5],[21413,21423,5],[21473,21483,5],[21780,21782,5],[21891,21894,5],[22171,22177,5],[22181,22187,5],[22191,22197,5],[22234,22236,5],[22521,22525,5],[22991,22994,5],[23028,23038,5],[23830,23853,5],[23866,23872,5],[23877,23884,5],[23886,23894,5],[23946,23948,5],[24311,24313,5],[24342,24347,5],[24370,24374,6],[24375,24381,5],[24718,24721,5],[24817,24821,5],[24877,24882,5],[24891,24893,5],[25391,25395,5],[25828,25838,5],[26191,26195,5],[26391,26393,5],[26703,26722,5],[26729,26760,10],[26766,26798,10],[26860,26870,10],[26891,26899,5],[26903,26923,5],[26929,26946,5],[26948,26998,5],[27037,27040,5],[27205,27232,5],[27258,27260,5],[27391,27398,5],[27561,27564,5],[27571,27574,5],[27581,27584,5],[27591,27594,5],[28191,28193,5],[28348,28358,5],[28402,28432,5],[28462,28492,5],[29118,29122,5],[29177,29185,5],[30161,30179,5],[30491,30494,5],[30729,30732,5],[31251,31259,5],[31265,31268,5],[31275,31278,5],[31288,31297,5],[31461,31465,5],[31491,31495,5],[31917,31922,5],[31965,31985,5],[31992,32e3,5],[32001,32003,10],[32005,32031,10],[32033,32060,10],[32074,32077,10],[32081,32086,5],[32107,32130,5],[32133,32158,5],[32164,32167,10],[32180,32199,5],[32201,32260,5],[32301,32360,5],[32601,32662,5],[32664,32667,10],[32701,32761,5],[53001,53004,5],[53008,53019,5],[53021,53032,5],[53034,53037,5],[53042,53046,5],[53074,53080,5],[54001,54004,5],[54008,54019,5],[54021,54032,5],[54034,54037,5],[54042,54046,5],[54048,54053,5],[54074,54080,5],[54098,54101,5],[102001,102040,5],[102042,102063,5],[102065,102067,5],[102070,102112,5],[102114,102117,5],[102122,102208,5],[102210,102216,5],[102221,102300,5],[102304,102377,5],[102382,102388,5],[102389,102398,10],[102399,102444,5],[102445,102447,10],[102448,102458,5],[102459,102468,10],[102469,102496,5],[102500,102519,11],[102520,102524,5],[102525,102529,10],[102530,102549,5],[102557,102588,5],[102593,102598,5],[102601,102603,5],[102608,102628,5],[102629,102646,10],[102648,102672,10],[102675,102700,10],[102701,102703,5],[102707,102730,10],[102735,102758,10],[102767,102900,5],[102965,102969,5],[102971,102973,5],[102975,102989,5],[102990,102992,11],[102997,103002,5],[103003,103008,10],[103009,103011,5],[103012,103014,10],[103019,103021,5],[103022,103024,10],[103029,103031,5],[103032,103034,10],[103065,103068,5],[103074,103076,5],[103077,103079,11],[103080,103082,5],[103083,103085,10],[103090,103093,5],[103097,103099,5],[103100,103102,10],[103107,103109,5],[103110,103112,10],[103113,103116,5],[103117,103120,10],[103153,103157,5],[103158,103162,10],[103163,103165,5],[103166,103168,11],[103169,103171,10],[103186,103188,5],[103189,103191,10],[103192,103195,5],[103196,103199,10],[103200,103224,5],[103225,103227,11],[103232,103237,5],[103238,103243,10],[103244,103246,5],[103247,103249,10],[103254,103256,5],[103257,103259,10],[103264,103266,5],[103267,103269,10],[103300,103375,5],[103381,103383,5],[103384,103386,11],[103387,103389,5],[103390,103392,10],[103397,103399,5],[103400,103471,10],[103476,103478,5],[103479,103481,10],[103486,103488,5],[103489,103491,10],[103492,103495,5],[103496,103499,10],[103539,103543,5],[103544,103548,10],[103549,103551,5],[103552,103554,11],[103555,103557,10],[103558,103560,5],[103571,103573,5],[103574,103576,10],[103577,103580,5],[103581,103583,10],[103595,103597,5],[103600,103694,5],[103696,103698,5],[103700,103793,10],[103794,103799,5]],gcsid:[4001,81,4002,85,4003,70,4004,84,4005,82,4006,83,4007,60,4008,67,4009,39,4010,57,4011,63,4012,64,4013,64,4014,63,4015,92,4016,90,4018,86,4019,75,4020,68,4021,70,4022,55,4023,75,4024,66,4025,73,4027,95,4028,59,4029,58,4031,75,4032,78,4033,77,4034,65,4035,100,4036,70,4042,88,4044,87,4045,89,4046,75,4047,99,4052,101,4053,97,4054,61,4075,75,4081,75,4120,84,4121,75,4122,80,4123,55,4124,84,4126,75,4130,75,4131,92,4132,64,4133,75,4134,64,4140,75,4141,75,4142,64,4143,64,4144,92,4145,87,4146,89,4147,66,4148,75,4149,84,4150,84,4151,75,4152,75,4153,55,4154,55,4155,63,4156,84,4157,60,4162,84,4163,75,4164,66,4165,55,4166,75,4168,58,4170,75,4172,75,4173,75,4174,58,4175,64,4176,75,4178,66,4179,66,4180,75,4188,81,4190,75,4191,66,4192,55,4193,63,4198,64,4199,55,4200,66,4201,64,4202,70,4203,70,4204,55,4205,66,4206,63,4207,55,4208,55,4209,64,4210,64,4211,84,4212,64,4213,63,4214,66,4215,55,4216,67,4218,55,4219,84,4220,64,4221,55,4222,64,4224,55,4225,55,4229,68,4230,55,4231,55,4232,64,4234,64,4235,55,4236,55,4237,70,4238,70,4239,92,4240,92,4241,65,4242,67,4243,88,4244,92,4245,86,4246,64,4250,64,4251,64,4252,63,4253,67,4254,55,4255,55,4256,64,4257,84,4258,75,4259,55,4260,64,4261,106,4262,84,4263,64,4265,55,4266,63,4267,67,4269,75,4270,64,4271,55,4272,55,4273,82,4274,55,4275,63,4276,73,4280,84,4281,57,4282,63,4283,75,4284,66,4285,55,4286,68,4288,55,4289,84,4291,70,4292,55,4293,83,4294,84,4295,84,4296,63,4297,55,4298,90,4299,85,4300,85,4301,84,4302,60,4303,68,4306,84,4307,64,4308,84,4309,55,4310,63,4311,55,4312,84,4313,55,4314,84,4315,63,4316,55,4317,66,4318,75,4319,75,4322,80,4324,80,4326,75,4466,75,4469,75,4475,55,4483,75,4490,75,4555,66,4558,75,4608,67,4609,67,4610,74,4614,55,4619,75,4624,75,4625,55,4627,75,4636,55,4637,55,4638,67,4639,55,4657,93,4659,75,4660,55,4661,75,4666,84,4667,75,4670,75,4671,63,4674,75,4679,64,4680,64,4682,92,4683,67,4686,75,4687,75,4693,75,4694,75,4695,67,4696,64,4697,64,4702,75,4703,64,4704,55,4705,55,4706,68,4718,55,4720,80,4721,55,4723,67,4726,67,4737,75,4738,60,4740,79,4741,55,4742,75,4743,64,4744,64,4745,84,4746,84,4747,75,4748,56,4749,75,4750,75,4751,91,4752,56,4753,55,4754,55,4759,75,4761,75,4801,84,4802,55,4803,55,4804,84,4805,84,4806,55,4807,106,4808,84,4809,55,4810,105,4811,106,4816,106,4817,82,4818,84,4820,84,4821,106,4823,55,4824,55,4901,107,4902,107,4903,59,4904,84,5228,84,5229,84,5233,92,5252,75,5264,75,5340,75,5354,75,5360,75,5371,75,5373,75,5381,75,5393,75,5464,60,5467,67,5489,75,5524,55,5527,70,5546,75,5561,66,5593,75,5681,84,5886,75,6135,75,6365,75,6706,75,6881,64,6882,64,6883,55,6892,64,6894,64,6980,75,6983,75,6987,75,6990,75,7035,75,7037,75,7039,75,7041,75,7073,75,7084,75,7086,75,7133,75,7373,75,7683,76,7798,75,7844,75,7881,75,7886,75,8042,96,8043,96,8086,75,8232,75,8237,75,8240,75,8246,75,8249,75,8252,75,8255,75,8351,84,8427,75,8428,55,8449,75,8545,75,8685,75,8694,64,8699,75,8818,75,8888,75,8900,75,8902,75,8907,75,8949,75,9003,75,9006,75,9009,75,9012,75,9017,75,9068,75,9069,75,9140,75,9148,75,9153,75,37001,73,37002,69,37003,72,37004,71,37005,62,37006,91,37007,94,37008,101,37201,55,37202,92,37203,87,37204,55,37205,55,37206,64,37207,71,37208,64,37211,64,37220,67,37221,55,37222,55,37223,63,37224,55,37225,106,37226,55,37227,55,37228,64,37229,62,37230,55,37231,70,37232,55,37233,55,37235,55,37237,55,37238,55,37239,67,37240,64,37241,55,37242,55,37243,67,37252,67,37253,55,37254,64,37255,84,37257,66,37259,55,37260,67,104017,79,104018,79,104024,75,104027,75,104047,98,104050,75,104100,75,104101,84,104102,84,104103,64,104104,55,104105,84,104106,55,104107,75,104108,75,104109,67,104110,75,104111,75,104112,67,104113,67,104128,102,104129,75,104130,55,104131,84,104132,67,104133,75,104134,75,104135,66,104136,70,104137,75,104138,55,104139,106,104140,106,104223,75,104248,55,104256,92,104261,63,104286,75,104287,75,104304,63,104700,49,104701,9,104702,24,104703,15,104704,28,104705,32,104706,53,104707,46,104708,37,104709,54,104710,11,104711,14,104712,30,104713,52,104714,4,104715,4,104716,23,104717,14,104718,48,104719,29,104720,22,104721,21,104722,35,104723,21,104724,46,104725,22,104726,49,104727,45,104728,52,104729,10,104730,10,104731,21,104732,31,104733,26,104734,40,104735,19,104736,30,104737,34,104738,27,104739,46,104740,5,104741,12,104742,50,104743,9,104744,43,104745,21,104746,26,104747,25,104748,21,104749,7,104750,53,104751,6,104752,33,104753,29,104754,19,104755,41,104756,31,104757,3,104758,41,104759,25,104760,49,104761,41,104762,44,104763,50,104764,46,104765,6,104766,40,104767,16,104768,8,104769,17,104770,48,104771,42,104772,50,104773,25,104774,29,104775,25,104776,32,104777,13,104778,36,104779,47,104780,14,104781,29,104782,23,104783,38,104784,42,104785,18,104786,20,104808,51,104896,75,104900,112,104901,104,104902,103,104903,116,104904,109,104905,108,104906,169,104907,164,104908,0,104909,168,104910,141,104911,166,104912,114,104913,160,104914,151,104915,117,104916,110,104917,140,104918,115,104919,170,104920,163,104921,154,104922,158,104923,161,104924,148,104925,0,104926,159,104927,167,104928,127,104929,131,104930,145,104931,159,104932,136,104933,123,104934,139,104935,134,104936,166,104937,150,104938,137,104939,147,104940,121,104941,165,104942,128,104943,111,104944,1,104945,126,104946,152,104947,157,104948,162,104949,153,104950,156,104951,149,104952,132,104953,122,104954,160,104955,146,104956,143,104957,156,104958,120,104959,125,104960,2,104961,144,104962,142,104963,138,104964,155,104965,135,104966,133,104967,151,104968,118,104969,119,104970,124,104971,108,104972,129,104973,130,104974,113,104975,0,104990,84,104991,75,104992,84],gcsidc:[[4127,4129,67],[4135,4139,67],[4158,4161,55],[4181,4185,55],[4194,4196,55],[4226,4228,63],[4247,4249,55],[4277,4279,81],[4600,4607,64],[4621,4623,55],[4628,4633,55],[4641,4646,55],[4662,4665,55],[4676,4678,66],[4688,4692,55],[4699,4701,64],[4755,4757,75],[4763,4765,75],[4813,4815,84],[8972,8987,75],[37212,37219,55],[37245,37247,55],[37249,37251,55],[104009,104015,75],[104019,104022,75],[104114,104124,75],[104125,104127,55],[104141,104145,75],[104179,104186,75],[104257,104260,75]]},b={c:[[2e3,2035,9001],[2039,2045,9001],[2056,2062,9001],[2067,2090,9001],[2093,2135,9001],[2161,2165,9001],[2172,2180,9001],[2188,2193,9001],[2195,2198,9001],[2200,2203,9001],[2205,2213,9001],[2215,2217,9001],[2222,2224,9002],[2225,2243,9003],[2246,2250,9003],[2251,2253,9002],[2257,2264,9003],[2274,2279,9003],[2280,2282,9002],[2283,2289,9003],[2308,2313,9001],[2315,2491,9001],[2494,2576,9001],[2578,2599,9001],[2601,2693,9001],[2695,2866,9001],[2867,2869,9002],[2870,2888,9003],[2891,2895,9003],[2896,2898,9002],[2902,2908,9003],[2915,2920,9003],[2921,2923,9002],[2924,2930,9003],[2931,2933,9001],[2935,2962,9001],[2964,2968,9003],[2969,2973,9001],[2975,2978,9001],[2984,2988,9001],[2995,3051,9001],[3054,3072,9001],[3077,3079,9001],[3081,3088,9001],[3092,3101,9001],[3106,3138,9001],[3146,3151,9001],[3153,3166,9001],[3168,3172,9001],[3174,3203,9001],[3294,3313,9001],[3315,3348,9001],[3350,3358,9001],[3367,3403,9001],[3408,3416,9001],[3417,3438,9003],[3441,3446,9003],[3447,3450,9001],[3451,3453,9003],[3455,3459,9003],[3460,3478,9001],[3554,3559,9001],[3560,3570,9003],[3571,3581,9001],[3594,3597,9001],[3601,3604,9001],[3637,3639,9001],[3665,3667,9001],[3693,3695,9001],[3701,3727,9001],[3728,3739,9003],[3740,3751,9001],[3753,3760,9003],[3761,3773,9001],[3775,3777,9001],[3779,3781,9001],[3788,3791,9001],[3797,3802,9001],[3814,3816,9001],[3825,3829,9001],[3832,3841,9001],[3844,3852,9001],[3873,3885,9001],[3890,3893,9001],[3942,3950,9001],[3968,3970,9001],[3973,3976,9001],[3986,3989,9001],[3994,3997,9001],[4001,4016,9102],[4018,4025,9102],[4027,4029,9102],[4031,4036,9102],[4044,4047,9102],[4048,4051,9001],[4052,4054,9102],[4056,4063,9001],[4093,4096,9001],[4120,4124,9102],[4127,4139,9102],[4141,4176,9102],[4178,4185,9102],[4188,4216,9102],[4218,4232,9102],[4235,4260,9102],[4265,4267,9102],[4269,4286,9102],[4292,4304,9102],[4306,4319,9102],[4390,4398,9001],[4399,4413,9003],[4418,4433,9003],[4455,4457,9003],[4484,4489,9001],[4491,4554,9001],[4568,4589,9001],[4600,4630,9102],[4636,4639,9102],[4641,4646,9102],[4652,4656,9001],[4657,4680,9102],[4682,4684,9102],[4686,4765,9102],[4766,4800,9001],[4801,4806,9102],[4813,4815,9102],[5014,5016,9001],[5069,5072,9001],[5105,5130,9001],[5173,5188,9001],[5253,5259,9001],[5269,5275,9001],[5292,5311,9001],[5329,5331,9001],[5343,5349,9001],[5355,5357,9001],[5459,5463,9001],[5479,5482,9001],[5518,5520,9001],[5533,5539,9001],[5550,5552,9001],[5562,5583,9001],[5623,5625,9003],[5631,5639,9001],[5649,5653,9001],[5663,5680,9001],[5682,5685,9001],[5875,5877,9001],[5896,5899,9001],[5921,5940,9001],[6050,6125,9001],[6244,6275,9001],[6328,6348,9001],[6350,6356,9001],[6366,6372,9001],[6381,6387,9001],[6393,6404,9001],[6480,6483,9001],[6511,6514,9001],[6579,6581,9001],[6619,6624,9001],[6625,6627,9003],[6628,6632,9001],[6634,6637,9001],[6669,6692,9001],[6707,6709,9001],[6720,6723,9001],[6732,6738,9001],[6881,6883,9102],[6931,6933,9001],[7005,7007,9001],[7057,7070,9003],[7074,7082,9001],[7109,7118,9001],[7119,7127,9002],[7374,7376,9001],[7528,7586,9001],[7587,7645,9003],[7692,7696,9001],[7755,7787,9001],[7791,7795,9001],[7799,7801,9001],[7803,7805,9001],[7825,7831,9001],[7845,7859,9001],[8013,8032,9001],[8065,8068,9002],[8518,8529,9003],[8533,8536,9003],[8538,8540,9003],[8677,8679,9001],[8836,8840,9001],[8857,8859,9001],[8908,8910,9001],[8972,9e3,9102],[9053,9057,9102],[9059,9069,9102],[9154,9159,9001],[9205,9218,9001],[20002,20032,9001],[20062,20092,9001],[20135,20138,9001],[20248,20258,9001],[20348,20358,9001],[20436,20440,9001],[20822,20824,9001],[20934,20936,9001],[21035,21037,9001],[21095,21097,9001],[21148,21150,9001],[21413,21423,9001],[21473,21483,9001],[21780,21782,9001],[21896,21899,9001],[22171,22177,9001],[22181,22187,9001],[22191,22197,9001],[22234,22236,9001],[22521,22525,9001],[22991,22994,9001],[23028,23038,9001],[23830,23853,9001],[23866,23872,9001],[23877,23884,9001],[23886,23894,9001],[23946,23948,9001],[24311,24313,9001],[24342,24347,9001],[24370,24374,9084],[24375,24381,9001],[24718,24721,9001],[24817,24821,9001],[24877,24882,9001],[24891,24893,9001],[25391,25395,9001],[25828,25838,9001],[26191,26195,9001],[26391,26393,9001],[26701,26722,9001],[26729,26746,9003],[26748,26760,9003],[26766,26799,9003],[26847,26870,9003],[26891,26899,9001],[26901,26923,9001],[26929,26946,9001],[26948,26978,9001],[26980,26998,9001],[27037,27040,9001],[27205,27232,9001],[27258,27260,9001],[27391,27398,9001],[27561,27564,9001],[27571,27574,9001],[27581,27584,9001],[27591,27594,9001],[28191,28193,9001],[28348,28358,9001],[28402,28432,9001],[28462,28492,9001],[29168,29172,9001],[29187,29195,9001],[29901,29903,9001],[30161,30179,9001],[30491,30494,9001],[30729,30732,9001],[31251,31259,9001],[31265,31268,9001],[31275,31277,9001],[31281,31290,9001],[31466,31469,9001],[31491,31495,9001],[31965,32e3,9001],[32001,32003,9003],[32005,32017,9003],[32019,32028,9003],[32033,32035,9003],[32037,32060,9003],[32064,32067,9003],[32081,32086,9001],[32107,32130,9001],[32133,32158,9001],[32164,32167,9003],[32180,32199,9001],[32201,32260,9001],[32301,32360,9001],[32601,32662,9001],[32664,32667,9003],[32701,32761,9001],[37002,37008,9102],[53001,53004,9001],[53008,53019,9001],[53021,53032,9001],[53034,53037,9001],[53042,53046,9001],[53074,53080,9001],[54001,54004,9001],[54008,54019,9001],[54021,54032,9001],[54042,54046,9001],[54048,54053,9001],[54074,54080,9001],[54098,54101,9001],[102001,102005,9001],[102007,102039,9001],[102042,102045,9001],[102060,102063,9001],[102070,102079,9001],[102096,102099,9001],[102101,102109,9001],[102114,102117,9001],[102132,102138,9001],[102141,102144,9001],[102156,102166,9001],[102173,102179,9001],[102191,102198,9001],[102221,102228,9001],[102231,102233,9001],[102237,102240,9001],[102364,102375,9001],[102389,102398,9003],[102399,102419,9001],[102421,102438,9001],[102445,102447,9003],[102450,102458,9001],[102459,102462,9003],[102470,102489,9001],[102550,102556,9001],[102562,102588,9001],[102629,102640,9003],[102648,102650,9003],[102688,102690,9003],[102696,102700,9003],[102701,102703,9001],[102799,102900,9001],[103166,103168,9002],[103220,103224,9001],[103225,103227,9002],[103232,103237,9001],[103238,103243,9003],[103244,103246,9001],[103247,103249,9003],[103254,103256,9001],[103257,103259,9003],[103264,103266,9001],[103267,103269,9003],[103327,103330,9001],[103344,103347,9001],[103372,103375,9001],[103381,103383,9001],[103384,103386,9002],[103387,103389,9001],[103390,103392,9003],[103397,103399,9001],[103427,103430,9003],[103444,103447,9003],[103476,103478,9001],[103479,103481,9003],[103486,103488,9001],[103489,103491,9003],[103492,103495,9001],[103496,103499,9003],[103539,103543,9001],[103544,103548,9003],[103549,103551,9001],[103552,103554,9002],[103555,103557,9003],[103558,103560,9001],[103571,103573,9001],[103574,103576,9003],[103577,103580,9001],[103581,103583,9003],[103595,103597,9001],[103600,103694,9001],[103696,103698,9001],[103700,103793,9003],[104101,104103,9102],[104126,104131,9102],[104259,104261,9102],[104700,104786,9102],[104900,104975,9102]],nc:[2065,9001,2066,9039,2136,9094,2137,9001,2138,9001,2154,9001,2157,9001,2158,9001,2159,9094,2160,9094,2169,9001,2170,9001,2204,9003,2219,9001,2220,9001,2254,9003,2255,9003,2256,9002,2265,9002,2266,9002,2267,9003,2268,9003,2269,9002,2270,9002,2271,9003,2272,9003,2273,9002,2290,9001,2294,9001,2295,9001,2314,9005,2899,9003,2900,9003,2901,9002,2909,9002,2910,9002,2911,9003,2912,9003,2913,9002,2914,9002,2980,9001,2981,9001,2991,9001,2992,9002,2993,9001,2994,9002,3074,9001,3075,9001,3080,9002,3089,9003,3090,9001,3091,9003,3102,9003,3141,9001,3142,9001,3167,9301,3360,9001,3361,9002,3362,9001,3363,9003,3364,9001,3365,9003,3404,9003,3405,9001,3406,9001,3407,9005,3439,9001,3440,9001,3479,9002,3480,9001,3481,9002,3482,9001,3483,9002,3484,9001,3485,9003,3486,9001,3487,9003,3488,9001,3489,9001,3490,9003,3491,9001,3492,9003,3493,9001,3494,9003,3495,9001,3496,9003,3497,9001,3498,9003,3499,9001,3500,9003,3501,9001,3502,9003,3503,9001,3504,9003,3505,9001,3506,9003,3507,9001,3508,9003,3509,9001,3510,9003,3511,9001,3512,9003,3513,9001,3514,9001,3515,9003,3516,9001,3517,9003,3518,9001,3519,9003,3520,9001,3521,9003,3522,9001,3523,9003,3524,9001,3525,9003,3526,9001,3527,9003,3528,9001,3529,9003,3530,9001,3531,9003,3532,9001,3533,9003,3534,9001,3535,9003,3536,9001,3537,9003,3538,9001,3539,9003,3540,9001,3541,9003,3542,9001,3543,9003,3544,9001,3545,9003,3546,9001,3547,9003,3548,9001,3549,9003,3550,9001,3551,9003,3552,9001,3553,9003,3582,9003,3583,9001,3584,9003,3585,9001,3586,9003,3587,9001,3588,9002,3589,9001,3590,9002,3591,9001,3592,9001,3593,9002,3598,9003,3599,9001,3600,9003,3605,9002,3606,9001,3607,9001,3608,9003,3609,9001,3610,9003,3611,9001,3612,9003,3613,9001,3614,9003,3615,9001,3616,9003,3617,9001,3618,9003,3619,9001,3620,9003,3621,9001,3622,9003,3623,9001,3624,9003,3625,9001,3626,9003,3627,9001,3628,9003,3629,9001,3630,9003,3631,9001,3632,9003,3633,9001,3634,9002,3635,9001,3636,9002,3640,9003,3641,9001,3642,9003,3643,9001,3644,9002,3645,9001,3646,9002,3647,9001,3648,9002,3649,9001,3650,9003,3651,9001,3652,9003,3653,9001,3654,9003,3655,9001,3656,9002,3657,9001,3658,9003,3659,9001,3660,9003,3661,9001,3662,9003,3663,9001,3664,9003,3668,9003,3669,9001,3670,9003,3671,9001,3672,9003,3673,9001,3674,9003,3675,9001,3676,9002,3677,9003,3678,9001,3679,9002,3680,9003,3681,9001,3682,9002,3683,9003,3684,9001,3685,9001,3686,9003,3687,9001,3688,9003,3689,9001,3690,9003,3691,9001,3692,9003,3696,9003,3697,9001,3698,9003,3699,9001,3700,9003,3783,9001,3784,9001,3793,9001,3794,9001,3812,9001,3819,9102,3821,9102,3824,9102,3854,9001,3857,9001,3889,9102,3906,9102,3911,9001,3912,9001,3920,9001,3978,9001,3979,9001,3991,9003,3992,9003,4026,9001,4037,9001,4038,9001,4042,9102,4071,9001,4075,9102,4081,9102,4082,9001,4083,9001,4087,9001,4088,9001,4217,9003,4261,9105,4262,9102,4263,9102,4288,9102,4289,9102,4322,9102,4324,9102,4326,9102,4414,9001,4415,9001,4417,9001,4434,9001,4437,9001,4438,9003,4439,9003,4462,9001,4463,9102,4467,9001,4470,9102,4471,9001,4475,9102,4483,9102,4490,9102,4555,9102,4558,9102,4559,9001,4632,9102,4633,9102,4647,9001,4807,9105,4808,9102,4809,9102,4810,9105,4811,9105,4816,9105,4817,9102,4818,9102,4820,9102,4821,9105,4822,9001,4823,9102,4824,9102,4826,9001,4839,9001,4901,9105,4902,9105,4903,9102,4904,9102,5013,9102,5018,9001,5048,9001,5167,9001,5168,9001,5221,9001,5223,9001,5228,9102,5229,9102,5233,9102,5234,9001,5235,9001,5243,9001,5246,9102,5247,9001,5252,9102,5264,9102,5266,9001,5316,9001,5320,9001,5321,9001,5324,9102,5325,9001,5337,9001,5340,9102,5354,9102,5360,9102,5361,9001,5362,9001,5365,9102,5367,9001,5371,9102,5373,9102,5381,9102,5382,9001,5383,9001,5387,9001,5389,9001,5393,9102,5396,9001,5451,9102,5456,9001,5457,9001,5464,9102,5467,9102,5469,9001,5472,9037,5489,9102,5490,9001,5513,9001,5514,9001,5523,9001,5524,9102,5527,9102,5530,9001,5531,9001,5546,9102,5559,9001,5561,9102,5588,9002,5589,9005,5593,9102,5596,9001,5627,9001,5629,9001,5641,9001,5643,9001,5644,9001,5646,9003,5654,9003,5655,9003,5659,9001,5681,9102,5700,9001,5825,9001,5836,9001,5837,9001,5839,9001,5842,9001,5844,9001,5858,9001,5879,9001,5880,9001,5886,9102,5887,9001,5890,9001,6128,9002,6129,9002,6135,9102,6204,9001,6207,9102,6210,9001,6211,9001,6307,9001,6311,9102,6312,9001,6316,9001,6318,9102,6322,9102,6325,9102,6362,9001,6365,9102,6391,9002,6405,9002,6406,9001,6407,9002,6408,9001,6409,9002,6410,9001,6411,9003,6412,9001,6413,9003,6414,9001,6415,9001,6416,9003,6417,9001,6418,9003,6419,9001,6420,9003,6421,9001,6422,9003,6423,9001,6424,9003,6425,9001,6426,9003,6427,9001,6428,9003,6429,9001,6430,9003,6431,9001,6432,9003,6433,9001,6434,9003,6435,9001,6436,9003,6437,9001,6438,9003,6439,9001,6440,9001,6441,9003,6442,9001,6443,9003,6444,9001,6445,9003,6446,9001,6447,9003,6448,9001,6449,9003,6450,9001,6451,9003,6452,9001,6453,9003,6454,9001,6455,9003,6456,9001,6457,9003,6458,9001,6459,9003,6460,9001,6461,9003,6462,9001,6463,9003,6464,9001,6465,9003,6466,9001,6467,9003,6468,9001,6469,9003,6470,9001,6471,9003,6472,9001,6473,9003,6474,9001,6475,9003,6476,9001,6477,9003,6478,9001,6479,9003,6484,9003,6485,9001,6486,9003,6487,9001,6488,9003,6489,9001,6490,9003,6491,9001,6492,9003,6493,9001,6494,9002,6495,9001,6496,9002,6497,9001,6498,9001,6499,9002,6500,9001,6501,9003,6502,9001,6503,9003,6504,9001,6505,9003,6506,9001,6507,9003,6508,9001,6509,9001,6510,9003,6515,9002,6516,9001,6518,9001,6519,9003,6520,9001,6521,9003,6522,9001,6523,9003,6524,9001,6525,9003,6526,9001,6527,9003,6528,9001,6529,9003,6530,9001,6531,9003,6532,9001,6533,9003,6534,9001,6535,9003,6536,9001,6537,9003,6538,9001,6539,9003,6540,9001,6541,9003,6542,9001,6543,9003,6544,9001,6545,9002,6546,9001,6547,9002,6548,9001,6549,9003,6550,9001,6551,9003,6552,9001,6553,9003,6554,9001,6555,9003,6556,9001,6557,9002,6558,9001,6559,9002,6560,9001,6561,9002,6562,9001,6563,9003,6564,9001,6565,9003,6566,9001,6567,9001,6568,9003,6569,9001,6570,9002,6571,9001,6572,9003,6573,9001,6574,9003,6575,9001,6576,9003,6577,9001,6578,9003,6582,9003,6583,9001,6584,9003,6585,9001,6586,9003,6587,9001,6588,9003,6589,9001,6590,9003,6591,9001,6592,9001,6593,9003,6594,9001,6595,9003,6596,9001,6597,9003,6598,9001,6599,9003,6600,9001,6601,9003,6602,9001,6603,9003,6605,9003,6606,9001,6607,9003,6608,9001,6609,9003,6610,9001,6611,9001,6612,9003,6613,9001,6614,9003,6615,9001,6616,9003,6617,9001,6618,9003,6633,9003,6646,9001,6668,9102,6703,9001,6706,9102,6783,9102,6784,9001,6785,9002,6786,9001,6787,9002,6788,9001,6789,9002,6790,9001,6791,9002,6792,9001,6793,9002,6794,9001,6795,9002,6796,9001,6797,9002,6798,9001,6799,9002,6800,9001,6801,9002,6802,9001,6803,9002,6804,9001,6805,9002,6806,9001,6807,9002,6808,9001,6809,9002,6810,9001,6811,9002,6812,9001,6813,9002,6814,9001,6815,9002,6816,9001,6817,9002,6818,9001,6819,9002,6820,9001,6821,9002,6822,9001,6823,9002,6824,9001,6825,9002,6826,9001,6827,9002,6828,9001,6829,9002,6830,9001,6831,9002,6832,9001,6833,9002,6834,9001,6835,9002,6836,9001,6837,9002,6838,9001,6839,9002,6840,9001,6841,9002,6842,9001,6843,9002,6844,9001,6845,9002,6846,9001,6847,9002,6848,9001,6849,9002,6850,9001,6851,9002,6852,9001,6853,9002,6854,9001,6855,9002,6856,9001,6857,9002,6858,9001,6859,9002,6860,9001,6861,9002,6862,9001,6863,9002,6867,9001,6868,9002,6870,9001,6875,9001,6876,9001,6879,9001,6880,9003,6884,9001,6885,9002,6886,9001,6887,9002,6892,9102,6894,9102,6915,9001,6922,9001,6923,9003,6924,9001,6925,9003,6962,9001,6983,9102,6984,9001,6990,9102,6991,9001,7035,9102,7037,9102,7039,9102,7041,9102,7073,9102,7084,9102,7086,9102,7128,9003,7131,9001,7132,9003,7133,9102,7136,9102,7139,9102,7142,9001,7257,9001,7258,9003,7259,9001,7260,9003,7261,9001,7262,9003,7263,9001,7264,9003,7265,9001,7266,9003,7267,9001,7268,9003,7269,9001,7270,9003,7271,9001,7272,9003,7273,9001,7274,9003,7275,9001,7276,9003,7277,9001,7278,9003,7279,9001,7280,9003,7281,9001,7282,9003,7283,9001,7284,9003,7285,9001,7286,9003,7287,9001,7288,9003,7289,9001,7290,9003,7291,9001,7292,9003,7293,9001,7294,9003,7295,9001,7296,9003,7297,9001,7298,9003,7299,9001,7300,9003,7301,9001,7302,9003,7303,9001,7304,9003,7305,9001,7306,9003,7307,9001,7308,9003,7309,9001,7310,9003,7311,9001,7312,9003,7313,9001,7314,9003,7315,9001,7316,9003,7317,9001,7318,9003,7319,9001,7320,9003,7321,9001,7322,9003,7323,9001,7324,9003,7325,9001,7326,9003,7327,9001,7328,9003,7329,9001,7330,9003,7331,9001,7332,9003,7333,9001,7334,9003,7335,9001,7336,9003,7337,9001,7338,9003,7339,9001,7340,9003,7341,9001,7342,9003,7343,9001,7344,9003,7345,9001,7346,9003,7347,9001,7348,9003,7349,9001,7350,9003,7351,9001,7352,9003,7353,9001,7354,9003,7355,9001,7356,9003,7357,9001,7358,9003,7359,9001,7360,9003,7361,9001,7362,9003,7363,9001,7364,9003,7365,9001,7366,9003,7367,9001,7368,9003,7369,9001,7370,9003,7373,9102,7683,9102,7798,9102,7844,9102,7877,9001,7878,9001,7881,9102,7882,9001,7883,9001,7886,9102,7887,9001,7899,9001,7991,9001,7992,9001,8035,9003,8036,9003,8042,9102,8043,9102,8058,9001,8059,9001,8082,9001,8083,9001,8086,9102,8088,9001,8090,9001,8091,9003,8092,9001,8093,9003,8095,9001,8096,9003,8097,9001,8098,9003,8099,9001,8100,9003,8101,9001,8102,9003,8103,9001,8104,9003,8105,9001,8106,9003,8107,9001,8108,9003,8109,9001,8110,9003,8111,9001,8112,9003,8113,9001,8114,9003,8115,9001,8116,9003,8117,9001,8118,9003,8119,9001,8120,9003,8121,9001,8122,9003,8123,9001,8124,9003,8125,9001,8126,9003,8127,9001,8128,9003,8129,9001,8130,9003,8131,9001,8132,9003,8133,9001,8134,9003,8135,9001,8136,9003,8137,9001,8138,9003,8139,9001,8140,9003,8141,9001,8142,9003,8143,9001,8144,9003,8145,9001,8146,9003,8147,9001,8148,9003,8149,9001,8150,9003,8151,9001,8152,9003,8153,9001,8154,9003,8155,9001,8156,9003,8157,9001,8158,9003,8159,9001,8160,9003,8161,9001,8162,9003,8163,9001,8164,9003,8165,9001,8166,9003,8167,9001,8168,9003,8169,9001,8170,9003,8171,9001,8172,9003,8173,9001,8177,9003,8179,9001,8180,9003,8181,9001,8182,9003,8184,9001,8185,9003,8187,9001,8189,9003,8191,9001,8193,9003,8196,9001,8197,9003,8198,9001,8200,9003,8201,9001,8202,9003,8203,9001,8204,9003,8205,9001,8206,9003,8207,9001,8208,9003,8209,9001,8210,9003,8212,9001,8213,9003,8214,9001,8216,9003,8218,9001,8220,9003,8222,9001,8224,9003,8225,9001,8226,9003,8232,9102,8237,9102,8240,9102,8246,9102,8249,9102,8252,9102,8255,9102,8311,9001,8312,9002,8313,9001,8314,9002,8315,9001,8316,9002,8317,9001,8318,9002,8319,9001,8320,9002,8321,9001,8322,9002,8323,9001,8324,9002,8325,9001,8326,9002,8327,9001,8328,9002,8329,9001,8330,9002,8331,9001,8332,9002,8333,9001,8334,9002,8335,9001,8336,9002,8337,9001,8338,9002,8339,9001,8340,9002,8341,9001,8342,9002,8343,9001,8344,9002,8345,9001,8346,9002,8347,9001,8348,9002,8351,9102,8352,9001,8353,9001,8379,9001,8380,9003,8381,9001,8382,9003,8383,9001,8384,9003,8385,9001,8387,9003,8391,9001,8395,9001,8427,9102,8428,9102,8431,9102,8433,9001,8441,9001,8455,9001,8456,9001,8531,9003,8545,9102,8682,9001,8685,9102,8687,9001,8692,9001,8693,9001,8694,9102,8699,9102,8818,9102,8826,9001,8860,9102,8888,9102,8900,9102,8902,9102,8903,9001,8907,9102,8949,9102,8950,9001,8951,9001,9003,9102,9006,9102,9009,9102,9012,9102,9014,9102,9017,9102,9019,9102,9039,9001,9040,9001,9140,9102,9141,9001,9148,9102,9149,9001,9150,9001,9153,9102,9191,9001,9221,9001,9222,9001,20499,9001,20538,9001,20539,9001,20790,9001,20791,9001,21291,9001,21292,9001,21500,9001,21817,9001,21818,9001,22032,9001,22033,9001,22091,9001,22092,9001,22332,9001,22391,9001,22392,9001,22700,9001,22770,9001,22780,9001,22832,9001,23090,9001,23095,9001,23239,9001,23240,9001,23700,9001,24047,9001,24048,9001,24100,9005,24200,9001,24305,9001,24306,9001,24382,9084,24383,9001,24500,9001,24547,9001,24548,9001,24571,9062,24600,9001,25e3,9001,25231,9001,25884,9001,25932,9001,26237,9001,26331,9001,26332,9001,26591,9001,26592,9001,26632,9001,26692,9001,27120,9001,27200,9001,27291,9040,27292,9040,27429,9001,27493,9001,27500,9001,27700,9001,28232,9001,28600,9001,28991,9001,28992,9001,29101,9001,29220,9001,29221,9001,29333,9001,29635,9001,29636,9001,29701,9001,29738,9001,29739,9001,29849,9001,29850,9001,29871,9042,29872,9041,29873,9001,30200,9039,30339,9001,30340,9001,30791,9001,30792,9001,31028,9001,31121,9001,31154,9001,31170,9001,31171,9001,31279,9001,31370,9001,31528,9001,31529,9001,31600,9001,31700,9001,31838,9001,31839,9001,31901,9001,32030,9003,32031,9003,32061,9001,32062,9001,32098,9001,32099,9003,32100,9001,32104,9001,32161,9001,32766,9001,37202,9102,37203,9102,37206,9102,37207,9102,37218,9102,37221,9102,37225,9105,37240,9102,37241,9102,37243,9102,37245,9102,37249,9102,37257,9102,37260,9102,53048,9001,53049,9001,54034,9001,54090,9001,54091,9001,65061,9003,65062,9003,65161,9001,102041,9003,102064,9085,102068,109030,102069,109031,102093,9001,102094,9001,102118,9003,102120,9003,102121,9003,102122,9001,102150,9001,102168,9001,102204,9001,102212,9001,102213,9001,102215,9001,102216,9001,102217,9003,102218,9001,102219,9003,102220,9003,102247,9001,102299,9001,102306,9001,102319,9001,102328,9001,102329,9001,102359,9001,102360,9001,102440,9001,102448,9001,102464,9003,102465,9003,102491,9001,102492,9001,102498,9001,102499,9001,102525,9003,102526,9003,102528,9003,102529,9003,102589,9003,102598,9001,102599,9003,102600,9003,102604,9003,102661,9003,102662,9003,102664,9003,102665,9003,102705,9003,102720,9003,102721,9003,102726,9003,102727,9003,102733,9003,102761,9003,102766,9003,102974,9003,103228,9001,103229,9001,103230,9003,103231,9003,103250,9001,103251,9003,103252,9001,103253,9003,103260,9001,103261,9001,103262,9003,103263,9003,103270,9001,103271,9001,103272,9003,103273,9003,103274,9001,103275,9001,103276,9003,103277,9003,103278,9001,103279,9001,103280,9003,103281,9003,103282,9001,103283,9001,103284,9003,103285,9003,103286,9001,103287,9003,103288,9001,103289,9003,103290,9001,103291,9003,103292,9001,103293,9001,103294,9003,103295,9003,103296,9001,103297,9001,103298,9003,103299,9003,103300,9001,103307,9001,103313,9001,103319,9001,103322,9001,103323,9001,103332,9001,103335,9001,103338,9001,103340,9001,103351,9001,103358,9001,103370,9001,103376,9003,103377,9001,103378,9001,103379,9003,103380,9003,103393,9001,103394,9001,103395,9003,103396,9003,103400,9003,103407,9003,103413,9003,103419,9003,103422,9003,103423,9003,103432,9003,103435,9003,103438,9003,103440,9003,103451,9003,103458,9003,103470,9003,103472,9001,103473,9002,103474,9001,103475,9003,103482,9001,103483,9003,103484,9001,103485,9003,103500,9001,103501,9003,103502,9001,103503,9001,103504,9002,103505,9002,103506,9001,103507,9001,103508,9003,103509,9003,103510,9001,103511,9001,103512,9003,103513,9003,103514,9001,103515,9003,103516,9001,103517,9003,103518,9001,103519,9003,103520,9001,103521,9002,103522,9001,103523,9001,103524,9003,103525,9003,103526,9001,103527,9003,103561,9003,103562,9003,103563,9001,103564,9001,103565,9003,103566,9003,103567,9001,103568,9001,103569,9003,103570,9003,103585,9003,103586,9001,103587,9003,103588,9002,103589,9001,103590,9003,103591,9002,103592,9001,103593,9003,103594,9002,103695,9003,103846,9001,103946,9003,104009,9102,104017,9102,104018,9102,104022,9102,104024,9102,104027,9102,104047,9102,104050,9102,104105,9102,104106,9102,104109,9102,104112,9102,104113,9102,104134,9102,104135,9102,104138,9102,104139,9105,104140,9105,104808,9102]};u.wr=function(){function c(){}return c.Sy=function(a){c.xp===!1&&c.yt();var r=c.FQ(a);if(r==-1){var o=c.Bx(a);o!=a&&(r=c.Sy(o))}return r==-1&&(o=c.FK(a))!=a&&(r=c.Sy(o)),r},c.FQ=function(a){return c.Fw[a]!==void 0?c.Fw[a]:-1},c.CQ=function(a){c.xp===!1&&c.yt();var r=c.nF(a);if(r==1e38){var o=c.Bx(a);if(o!=a&&(r=c.nF(o)),r==1e38)return 1e-10}return r},c.ZS=function(a){if(c.Is[a]!==void 0)return!0;var r=c.Bx(a);return r!=a&&c.Is[r]!==void 0},c.aT=function(a){if(c.xo[a]!==void 0)return!0;var r=c.Bx(a);return r!=a&&c.xo[r]!==void 0},c.nF=function(a){return c.xp===!1&&c.yt(),c.Is[a]!==void 0?c.Is[a]:c.xo[a]!==void 0?c.xo[a]:1e38},c.FK=function(a){return c.xp===!1&&c.yt(),c.WA[a]!==void 0?c.WA[a]:a},c.Bx=function(a){return c.xp===!1&&c.yt(),c.XA[a]!==void 0?c.XA[a]:a},c.yt=function(){for(var a,r=A,o=0;o<r.pcsid.length;o+=2)c.xo[r.pcsid[o]]=r.pcstol[2*r.pcsid[o+1]+1];for(o=0;o<r.pcsidc.length;o+=1)for(var l=(a=r.pcsidc[o])[0];l<=a[1];l++)c.xo[l]=r.pcstol[2*a[2]+1];for(o=0;o<r.gcsid.length;o+=2)c.Is[r.gcsid[o]]=r.gcstol[2*r.gcsid[o+1]+1];for(o=0;o<r.gcsidc.length;o+=1)for(l=(a=r.gcsidc[o])[0];l<=a[1];l++)c.xo[l]=r.gcstol[2*a[2]+1];for(o=0;o<b.c.length;o+=1)for(l=(a=b.c[o])[0];l<=a[1];l++)c.Fw[l]=a[2];for(o=0;o<b.nc.length;o+=2)c.Fw[b.nc[o]]=b.nc[o+1];for(b=null,o=0;o<r.newtoold.length;o+=2)c.WA[r.newtoold[o+1]]=r.newtoold[o],c.XA[r.newtoold[o]]=r.newtoold[o+1];A=null,c.xp=!0},c.xp=!1,c.Is=[],c.xo=[],c.WA=[],c.XA=[],c.Fw=[],c}()}(B||(B={})),function(u){function A(c){return c.length===0?'""':c[0]=='"'||c[0]=="."||"0"<=c[0]&&"9">=c[0]?c:'"'+c.trim()+'"'}var b=[];u.XC=function(){function c(){}return c.EQ=function(a){try{for(var r=0;r<b.length;r++)if(b[r].wkttext===a)return b[r].unit;for(var o,l=r="",d=!1,p=0;p<a.length;p++){var g=a[p];d===!0?g=='"'?a[p+1]=='"'?r+=g:d=d=!1:r+=g:/[\s]/.test(g)||(g==","?(l=r!==""?l+(A(r)+","):l+",",r=""):g==")"||g=="]"?(l=r!==""?l+(A(r)+"]}"):l+"]}",r=""):g=="("||g=="["?(l+='{ "entity": "'+r.toUpperCase().trim()+'", "values":[',r=""):g=='"'?(d=!0,r=""):r+=g)}o=JSON.parse(l);var y=c.mF(o);if(y===null)return null;for(o=null,g=0;g<y.values.length;g++)if(typeof y.values[g]=="object"&&(y.values[g].entity==="UNIT"||y.values[g].entity==="ANGLEUNIT"||y.values[g].entity==="LENGTHUNIT")){o=y.values[g];break}if(o===null)return null;var w=u.Tc.ZO(y.entity==="GEOGCS"||y.entity==="GEOGCRS"?1:0,o.values[1],o.values[2]);return b.push({wkttext:a,unit:w}),10<b.length&&b.shift(),w}catch{return null}},c.mF=function(a){if(a===null)return null;switch(a.entity){case"GEOGCRS":case"GEOGCS":case"PROJCRS":case"PROJCS":return a}for(var r=[],o=0;o<a.values.length;o++)if(typeof a.values[o]=="object"&&a.values[o].entity!==void 0)switch(a.values[o].entity){case"GEOGCRS":case"GEOGCS":case"PROJCRS":case"PROJCS":return a.values[o];default:r.push(a.values[o])}for(a=0;a<r.length;a++)if((o=c.mF(r[a]))!==null)return o;return null},c.DQ=function(a){var r=-1;if(a!=null&&0<a.length){var o=a.search(/PROJCR?S/);if(0<=o){var l=0;if(0<=(o=a.lastIndexOf("UNIT"))&&0<(o=a.indexOf(",",o+4))){o++;var d=a.indexOf("]",o+1);if(0<d)try{l=parseFloat(a.substring(o,d))}catch{l=0}}0<l&&(r=.001/l)}else if(0<=(o=a.search(/GEOGCR?S/))){var p=0;if(l=0,(o=a.indexOf("SPHEROID",o+6))===-1&&(o=a.indexOf("ELLIPSOID",o+7)),0<o&&0<(o=a.indexOf(",",o+8))){if(o++,0<(d=a.indexOf(",",o+1)))try{p=parseFloat(a.substring(o,d))}catch{p=0}if(0<p&&((o=a.lastIndexOf("ANGLEUNIT",d+1))===-1&&(o=a.lastIndexOf("UNIT",d+1)),0<=o&&0<(o=a.indexOf(",",o+4))&&(o++,0<(d=a.indexOf("]",o+1)))))try{l=parseFloat(a.substring(o,d))}catch{l=0}}0<p&&0<l&&(r=.001/(p*l))}}return r},c}()}(B||(B={})),function(u){var A;(A=u.eL||(u.eL={}))[A.NONE=0]="NONE",A[A.LINEAR=1]="LINEAR",A[A.ANGULAR=2]="ANGULAR",function(c){c[c.enumFloat=0]="enumFloat",c[c.enumDouble=1]="enumDouble",c[c.enumInt32=2]="enumInt32",c[c.enumInt64=3]="enumInt64",c[c.enumInt8=4]="enumInt8",c[c.enumInt16=5]="enumInt16"}(u.QL||(u.QL={})),function(c){c[c.POSITION=0]="POSITION",c[c.Z=1]="Z",c[c.M=2]="M",c[c.ID=3]="ID",c[c.NORMAL=4]="NORMAL",c[c.TEXTURE1D=5]="TEXTURE1D",c[c.TEXTURE2D=6]="TEXTURE2D",c[c.TEXTURE3D=7]="TEXTURE3D",c[c.ID2=8]="ID2",c[c.MAXSEMANTICS=10]="MAXSEMANTICS"}(u.Ih||(u.Ih={}));var b=function(){function c(a,r){if(this.Vs=this.Ae=null,this.Oq=this.Aa=0,this.uh=this.bg=null,this.wl=0,r!==void 0){for(this.Aa=r.Aa,this.Oq=r.Oq,this.bg=r.bg.slice(0),this.uh=r.uh.slice(0),this.wl=r.wl,this.Vs=[],a=r=0;a<this.Aa;a++)this.Vs[a]=r,r+=c.Va(this.bg[a]);for(this.Oq=r,this.Ae=[],a=0;a<this.Aa;a++){r=c.Va(this.kd(a));for(var o=c.se(this.kd(a)),l=0;l<r;l++)this.Ae[this.Vs[a]+l]=o}}else this.Oq=this.Aa=0}return c.prototype.kd=function(a){if(0>a||a>this.Aa)throw u.i.N();return this.bg[a]},c.prototype.Pf=function(a){return this.uh[a]},c.lz=function(a){return c.JM[a]},c.Tp=function(a){return c.SM[a]},c.Va=function(a){return c.rM[a]},c.prototype.hasAttribute=function(a){return 0<=this.uh[a]},c.prototype.iG=function(){return this.hasAttribute(1)},c.se=function(a){return c.eD[a]},c.prototype.LR=function(a){return this.Vs[a]},c.DG=function(a,r){return c.eD[a]===r},c.prototype.Nb=function(a){return this===a},c.prototype.An=function(){for(var a=u.O.Th(this.bg[0]),r=1;r<this.Aa;r++)a=u.O.Th(this.bg[r],a);return a},c.prototype.$j=function(a){return this.Vs[a]},c.prototype.cc=function(){return this.wl},c.prototype.Ed=function(a){return this.bg[a]},c.eD=[0,0,NaN,0,0,0,0,0,0],c.JM=[1,1,1,0,2,1,1,1,0],c.SM=[1,1,1,2,0,0,0,0,2],c.rM=[2,1,1,1,3,1,2,3,2],c}();u.ra=b}(B||(B={})),function(u){function A(d,p,g){var y=p-(d=new l(d)).e,w=d.c;for(w.length>++p&&b(d,y,l.eu),w[0]?g?y=p:(w=d.c,y=d.e+y+1):++y;w.length<y;w.push(0));return y=d.e,g===1||g&&(p<=y||y<=a)?(0>d.Bd&&w[0]?"-":"")+(1<w.length?w[0]+"."+w.join("").slice(1):w[0])+(0>y?"e":"e+")+y:d.toString()}function b(d,p,g,y){var w=d.c,S=d.e+p+1;if(g===1?y=5<=w[S]:g===2?y=5<w[S]||w[S]==5&&(y||0>S||w[S+1]!==void 0||1&w[S-1]):g===3?y=y||w[S]!==void 0||0>S:(y=!1,g!==0&&c("!Big.RM!")),1>S||!w[0])y?(d.e=-p,d.c=[1]):d.c=[d.e=0];else{if(w.length=S--,y)for(;9<++w[S];)w[S]=0,S--||(++d.e,w.unshift(1));for(S=w.length;!w[--S];w.pop());}return d}function c(d){throw(d=Error(d)).name="BigError",d}var a=-7,r=21,o=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,l=function(){function d(p){if(p instanceof d)this.Bd=p.Bd,this.e=p.e,this.c=p.c.slice();else{var g,y,w;for(p===0&&0>1/p?p="-0":o.test(p+="")||c(NaN),this.Bd=p.charAt(0)=="-"?(p=p.slice(1),-1):1,-1<(g=p.indexOf("."))&&(p=p.replace(".","")),0<(y=p.search(/e/i))?(0>g&&(g=y),g+=+p.slice(y+1),p=p.substring(0,y)):0>g&&(g=p.length),y=0;p.charAt(y)=="0";y++);if(y==(w=p.length))this.c=[this.e=0];else{for(;p.charAt(--w)=="0";);for(this.e=g-y-1,this.c=[],g=0;y<=w;this.c[g++]=+p.charAt(y++));}}}return d.prototype.abs=function(){var p=new d(this);return p.Bd=1,p},d.prototype.cmp=function(p){var g=this.c,y=(p=new d(p)).c,w=this.Bd,S=p.Bd,k=this.e,C=p.e;if(!g[0]||!y[0])return g[0]?w:y[0]?-S:0;if(w!=S)return w;if(p=0>w,k!=C)return k>(C^p)?1:-1;for(w=-1,S=(k=g.length)<(C=y.length)?k:C;++w<S;)if(g[w]!=y[w])return g[w]>(y[w]^p)?1:-1;return k==C?0:k>(C^p)?1:-1},d.prototype.jm=function(p){var g=this.c,y=(p=new d(p)).c,w=this.Bd==p.Bd?1:-1,S=d.rr;if((S!==~~S||0>S||1e6<S)&&c("!Big.DP!"),!g[0]||!y[0])return g[0]==y[0]&&c(NaN),y[0]||c(w/0),new d(0*w);var k,C,O=y.slice(),R=k=y.length,N=g.length,j=g.slice(0,k),G=j.length,D=p,V=D.c=[],Z=0,q=S+(D.e=this.e-p.e)+1;for(D.Bd=w,w=0>q?0:q,O.unshift(0);G++<k;j.push(0));do{for(C=0;10>C;C++){if(k!=(G=j.length))var ne=k>G?1:-1;else{var ee=-1;for(ne=0;++ee<k;)if(y[ee]!=j[ee]){ne=y[ee]>j[ee]?1:-1;break}}if(!(0>ne))break;for(p=G==k?y:O;G;){if(j[--G]<p[G]){for(ee=G;ee&&!j[--ee];j[ee]=9);--j[ee],j[G]+=10}j[G]-=p[G]}for(;!j[0];j.shift());}V[Z++]=ne?C:++C,j[0]&&ne?j[G]=g[R]||0:j=[g[R]]}while((R++<N||j[0]!==void 0)&&w--);return V[0]||Z==1||(V.shift(),D.e--),Z>q&&b(D,S,d.eu,j[0]!==void 0),D},d.prototype.fS=function(){return 0<this.cmp(0)},d.prototype.nT=function(){return 0>this.cmp(0)},d.prototype.jt=function(p){var g,y=this.Bd,w=(p=new d(p)).Bd;if(y!=w)return p.Bd=-w,this.tI(p);var S=this.c.slice(),k=this.e,C=p.c,O=p.e;if(!S[0]||!C[0])return C[0]?(p.Bd=-w,p):new d(S[0]?this:0);if(y=k-O){for((g=0>y)?(y=-y,k=S):(O=k,k=C),k.reverse(),w=y;w--;k.push(0));k.reverse()}else for(k=((g=S.length<C.length)?S:C).length,y=w=0;w<k;w++)if(S[w]!=C[w]){g=S[w]<C[w];break}if(g&&(k=S,S=C,C=k,p.Bd=-p.Bd),0<(w=(k=C.length)-(g=S.length)))for(;w--;S[g++]=0);for(w=g;k>y;){if(S[--k]<C[k]){for(g=k;g&&!S[--g];S[g]=9);--S[g],S[k]+=10}S[k]-=C[k]}for(;S[--w]==0;S.pop());for(;S[0]==0;)S.shift(),--O;return S[0]||(p.Bd=1,S=[O=0]),p.c=S,p.e=O,p},d.prototype.tI=function(p){var g=this.Bd,y=(p=new d(p)).Bd;if(g!=y)return p.Bd=-y,this.jt(p);y=this.e;var w=this.c,S=p.e,k=p.c;if(!w[0]||!k[0])return k[0]?p:new d(w[0]?this:0*g);if(w=w.slice(),g=y-S){for(0<g?(S=y,y=k):(g=-g,y=w),y.reverse();g--;y.push(0));y.reverse()}for(0>w.length-k.length&&(y=k,k=w,w=y),g=k.length,y=0;g;)y=(w[--g]=w[g]+k[g]+y)/10|0,w[g]%=10;for(y&&(w.unshift(y),++S),g=w.length;w[--g]==0;w.pop());return p.c=w,p.e=S,p},d.prototype.pow=function(p){var g=this,y=new d(1),w=y,S=0>p;for((p!==~~p||-1e6>p||1e6<p)&&c("!pow!"),p=S?-p:p;1&p&&(w=w.lr(g)),p>>=1;)g=g.lr(g);return S?y.jm(w):w},d.prototype.round=function(p,g){var y=this;return p==null?p=0:(p!==~~p||0>p||1e6<p)&&c("!round!"),b(y=new d(y),p,g??d.eu),y},d.prototype.sqrt=function(){var p=this.c,g=this.Bd,y=this.e,w=new d("0.5");if(!p[0])return new d(this);0>g&&c(NaN),(g=Math.sqrt(this.toString()))==0||g==1/0?((g=p.join("")).length+y&1||(g+="0"),(p=new d(Math.sqrt(g).toString())).e=((y+1)/2|0)-(0>y||1&y)):p=new d(g.toString()),g=p.e+(d.rr+=4);do y=p,p=w.lr(y.tI(this.jm(y)));while(y.c.slice(0,g).join("")!==p.c.slice(0,g).join(""));return b(p,d.rr-=4,d.eu),p},d.prototype.lr=function(p){var g=this.c,y=(p=new d(p)).c,w=g.length,S=y.length,k=this.e,C=p.e;if(p.Bd=this.Bd==p.Bd?1:-1,!g[0]||!y[0])return new d(0*p.Bd);if(p.e=k+C,w<S){var O=g;g=y,y=O,C=w,w=S,S=C}for(O=Array(C=w+S);C--;O[C]=0);for(k=S;k--;){for(S=0,C=w+k;C>k;)S=O[C]+y[k]*g[C-k-1]+S,O[C--]=S%10,S=S/10|0;O[C]=(O[C]+S)%10}for(S&&++p.e,O[0]||O.shift(),k=O.length;!O[--k];O.pop());return p.c=O,p},d.prototype.toString=function(){var p=this.e,g=this.c.join(""),y=g.length;if(p<=a||p>=r)g=g.charAt(0)+(1<y?"."+g.slice(1):"")+(0>p?"e":"e+")+p;else if(0>p){for(;++p;g="0"+g);g="0."+g}else if(0<p)if(++p>y)for(p-=y;p--;g+="0");else p<y&&(g=g.slice(0,p)+"."+g.slice(p));else 1<y&&(g=g.charAt(0)+"."+g.slice(1));return 0>this.Bd&&this.c[0]?"-"+g:g},d.prototype.toExponential=function(p){return p==null?p=this.c.length-1:(p!==~~p||0>p||1e6<p)&&c("!toExp!"),A(this,p,1)},d.prototype.toFixed=function(p){var g=a,y=r;if(a=-(r=1/0),p==null)var w=this.toString();else p===~~p&&0<=p&&1e6>=p&&(w=A(this,this.e+p),0>this.Bd&&this.c[0]&&0>w.indexOf("-")&&(w="-"+w));return a=g,r=y,w||c("!toFix!"),w},d.prototype.toPrecision=function(p){return p==null?this.toString():((p!==~~p||1>p||1e6<p)&&c("!toPre!"),A(this,p-1,2))},d.rr=20,d.eu=1,d}();u.hp=l}(B||(B={})),function(u){var A=function(){function b(c){this.lf=c}return b.prototype.nr=function(c,a,r){var o=new u.h,l=new u.h,d=this.lf;r.Vd(c,a,function(p,g){return d.tc(2*p,o),d.tc(2*g,l),o.compare(l)})},b.prototype.$p=function(c){return this.lf.read(2*c+1)},b}();u.pi=function(){function b(){}return b.aq=function(c){if(c.B())return!1;var a=c.getType();return a==1736?c.Ke()!=0:a==1607?(a=[!1],b.sE(c,!0,a),a[0]):!(a!=197&&(!u.aa.yd(a)||c.BG()))},b.gm=function(c){var a=c.getType();if(a==1736)return a=new u.Ta(c.description),c.B()||c.dD(a),a;if(a==1607)return b.sE(c,!1,null);if(a==197)return a=new u.Ta(c.description),c.B()||a.ad(c,!1),a;if(u.aa.yd(a)){if(a=new u.de(c.description),!c.B()&&!c.BG()){var r=new u.Sa;c.To(r),a.add(r),c.Po(r),a.add(r)}return a}if(u.aa.Rn(a))return null;throw u.i.N()},b.sE=function(c,a,r){r!=null&&(r[0]=!1);var o=null;if(a||(o=new u.de(c.description)),!c.B()){var l=new u.ia(0);l.Jb(2*c.da());for(var d=0,p=c.da();d<p;d++)if(0<c.Ja(d)&&!c.Nn(d)){var g=c.Ba(d);l.add(g),g=c.Vc(d)-1,l.add(g)}if(0<l.size){p=new u.Xt,d=c.ub(0),p.sort(l,0,l.size,new A(d)),p=new u.h,d.tc(2*l.get(0),p),g=0;for(var y=1,w=new u.Sa,S=new u.h,k=1,C=l.size;k<C;k++)if(d.tc(2*l.get(k),S),S.qb(p))l.get(g)>l.get(k)?(l.set(g,2147483647),g=k):l.set(k,2147483647),y++;else{if(1&y){if(a)return r!=null&&(r[0]=!0),null}else l.set(g,2147483647);p.L(S),g=k,y=1}if(1&y){if(a)return r!=null&&(r[0]=!0),null}else l.set(g,2147483647);if(!a)for(l.Vd(0,l.size,function(O,R){return O-R}),k=0,C=l.size;k<C&&l.get(k)!=2147483647;k++)c.ve(l.get(k),w),o.add(w)}}return a?null:o},b}()}(B||(B={})),function(u){var A=function(){function b(){this.yf=new u.ia(0),this.ys=new u.ia(0),this.EH=1,this.Es=NaN}return b.prototype.sort=function(c,a,r,o){if(32>r-a)o.nr(a,r,c);else{var l=!0;try{for(var d=1/0,p=-1/0,g=a;g<r;g++){var y=o.$p(c.get(g));y<d&&(d=y),y>p&&(p=y)}if(this.reset(r-a,d,p,r-a)){for(g=a;g<r;g++){var w=c.get(g);y=o.$p(w);var S=this.zF(y);this.yf.set(S,this.yf.get(S)+1),this.ys.write(g-a,w)}var k=this.yf.get(0);this.yf.set(0,0),g=1;for(var C=this.yf.size;g<C;g++){var O=this.yf.get(g);this.yf.set(g,k),k+=O}for(g=a;g<r;g++){w=this.ys.read(g-a),y=o.$p(w),S=this.zF(y);var R=this.yf.get(S);c.set(R+a,w),this.yf.set(S,R+1)}l=!1}}catch{this.yf.resize(0),this.ys.resize(0)}if(l)o.nr(a,r,c);else{for(g=r=0,C=this.yf.size;g<C;g++)l=r,(r=this.yf.get(g))>l&&o.nr(a+l,a+r,c);100<this.yf.size&&(this.yf.resize(0),this.ys.resize(0))}}},b.prototype.reset=function(c,a,r,o){return!(2>c||r==a)&&(c=Math.min(b.hL,c),this.yf.Jb(c),this.yf.resize(c),this.yf.Wj(0,0,this.yf.size),this.EH=a,this.ys.resize(o),this.Es=(r-a)/(c-1),!0)},b.prototype.zF=function(c){return u.O.truncate((c-this.EH)/this.Es)},b.hL=65536,b}();u.Xt=A}(B||(B={})),function(u){var A,b;(b=A||(A={}))[b.enum_line=1]="enum_line",b[b.enum_arc=2]="enum_arc",b[b.enum_dummy=4]="enum_dummy",b[b.enum_concave_dip=8]="enum_concave_dip",b[b.enum_connection=3]="enum_connection";var c=function(){function d(){}return d.Qu=function(p,g,y,w,S,k){var C=new d;return C.Im=new u.h,C.Vm=new u.h,C.aw=new u.h,C.Im.L(p),C.Vm.L(g),C.aw.L(y),C.Co=w,C.qh=S,C.sh=k,C},d.construct=function(p,g,y,w){var S=new d;return S.Im=new u.h,S.Vm=new u.h,S.aw=new u.h,S.Im.L(p),S.Vm.L(g),S.aw.Rc(),S.Co=4,S.qh=y,S.sh=w,S},d}(),a=function(){function d(p,g,y,w,S,k){this.Yv=null,this.ya=0,this.EA=p,this.bI=this.$H=0,this.Ka=g,this.Mj=y,this.vk=w,this.Dq=S,this.Ub=k}return d.prototype.next=function(){for(var p=new u.Sa;;){if(this.ya==this.EA.I())return null;if(this.EA.ve(this.ya,p),this.ya++,!p.B())break}var g=!1;if(this.Yv==null&&(this.$H=p.Lg(),this.bI=p.ih(),this.Yv=l.buffer(p,this.Ka,this.Mj,this.vk,this.Dq,this.Ub),g=!0),this.ya<this.EA.I()){var y=new u.Da;this.Yv.copyTo(y)}else y=this.Yv;if(!g){g=new u.Dd;var w=p.Lg()-this.$H;p=p.ih()-this.bI,g.gg(w,p),y.Oc(g)}return y},d.prototype.La=function(){return 0},d.prototype.qe=function(){},d}(),r=function(){function d(p,g){this.Wa=p,this.ya=0,this.oq=g}return d.prototype.next=function(){var p=this.Wa.X;if(this.ya<p.da()){var g=this.ya;if(this.ya++,!p.Nn(g))for(var y=p.Na(p.Vc(g)-1);this.ya<p.da();){var w=p.Na(p.Ba(this.ya));if(p.Nn(this.ya)||w!=y)break;y=p.Na(p.Vc(this.ya)-1),this.ya++}if(this.ya-g==1)return this.Wa.kE(this.Wa.X,g,this.oq);for((y=new u.Ta(this.Wa.X.description)).addPath(this.Wa.X,g,!0),g+=1;g<this.ya;g++)y.Dr(this.Wa.X,g,0,p.rv(g),!1);return this.Wa.kE(y,0,this.oq)}return null},d.prototype.La=function(){return 0},d.prototype.qe=function(){},d}(),o=function(){function d(p){this.Wa=p,this.ya=0}return d.prototype.next=function(){var p=this.Wa.X;if(this.ya<p.da()){var g=this.ya;for(p.Ir(this.ya),this.ya++;this.ya<p.da()&&!(0<p.Ir(this.ya));)this.ya++;return g==0&&this.ya==p.da()?this.Wa.py(p,0,p.da()):this.Wa.py(p,g,this.ya)}return null},d.prototype.La=function(){return 0},d.prototype.qe=function(){},d}(),l=function(){function d(p){this.Ks=this.lw=this.Ls=this.Id=null,this.Zd=[],this.Ub=p,this.rb=this.Kv=this.JT=this.Ka=this.tA=this.ct=this.qa=0,this.oA=this.vk=-1,this.oq=!0}return d.buffer=function(p,g,y,w,S,k){if(p==null||0>w)throw u.i.N();if(p.B())return new u.Da(p.description);var C=new u.l;return p.xc(C),0<g&&C.W(g,g),(k=new d(k)).Mj=y,k.X=p,k.qa=u.ta.Wd(y,C,!0),k.ct=u.ta.Wd(null,C,!0),k.Ka=g,k.JT=p.getType(),0>=S&&(S=96),k.rb=Math.abs(k.Ka),k.Kv=k.rb!=0?1/k.rb:0,isNaN(w)||w==0?w=1e-5*k.rb:w>.5*k.rb&&(w=.5*k.rb),12>S&&(S=12),(p=Math.abs(g)*(1-Math.cos(Math.PI/S)))>w?w=p:(p=Math.PI/Math.acos(1-w/Math.abs(g)))<S-1&&12>(S=u.O.truncate(p))&&(S=12,w=Math.abs(g)*(1-Math.cos(Math.PI/S))),k.vk=w,k.Dq=S,k.tA=Math.min(k.ct,.25*w),k.lE()},d.prototype.cv=function(){if(this.Id==null)this.Id=[];else if(this.Id.length!==0)return;var p=this.qE();p=u.O.truncate((p+3)/4);var g=.5*Math.PI/p;this.oA=g;for(var y=0;y<4*p;y++)this.Id.push(null);var w=Math.cos(g);g=Math.sin(g);var S=u.h.construct(0,1);for(y=0;y<p;y++)this.Id[y+0*p]=u.h.construct(S.y,-S.x),this.Id[y+1*p]=u.h.construct(-S.x,-S.y),this.Id[y+2*p]=u.h.construct(-S.y,S.x),this.Id[y+3*p]=S,(S=u.h.construct(S.x,S.y)).Bt(w,g)},d.prototype.lE=function(){var p=this.X.getType();if(u.aa.yd(p))return(p=new u.Ta(this.X.description)).oc(this.X,!0),this.X=p,this.lE();if(this.Ka<=this.qa){if(!u.aa.US(p))return new u.Da(this.X.description);if(0>=this.Ka&&(p=new u.l,this.X.A(p),p.R()<=2*-this.Ka||p.ca()<=2*this.Ka))return new u.Da(this.X.description)}switch(this.X.getType()){case 33:return this.PN();case 550:return this.ON();case 1607:return this.RN();case 1736:return this.QN();case 197:return this.LN();default:throw u.i.Qa()}},d.prototype.RN=function(){if(this.EG(this.X)){var p=new u.Sa;this.X.ve(0,p);var g=new u.l;return this.X.A(g),p.Cb(g.sf()),this.Gu(p)}return this.X=this.WV(this.X),p=new r(this,this.oq),u.Gh.local().V(p,this.Mj,this.Ub).next()},d.prototype.QN=function(){if(this.Ka==0)return this.X;var p=u.Yl.local();if(this.cv(),this.X=p.V(this.X,null,!1,this.Ub),0>this.Ka){var g=this.X;return g=this.py(g,0,g.da()),p.V(g,this.Mj,!1,this.Ub)}return this.EG(this.X)?(p=new u.Sa,this.X.ve(0,p),g=new u.l,this.X.A(g),p.Cb(g.sf()),this.Gu(p)):(p=new o(this),u.Gh.local().V(p,this.Mj,this.Ub).next())},d.prototype.py=function(p,g,y){for(var w=new u.Da(p.description);g<y;g++)if(!(1>p.Ja(g))){var S=p.Ir(g),k=new u.l;if(p.Rj(g,k),0<this.Ka){if(0<S)if(this.FG(p,g))S=new u.Sa,p.ve(p.Ba(g),S),S.Cb(k.sf()),this.yu(w,S);else{var C=S=new u.Ta(p.description);C=u.Zt.JG(this.X,g)||this.zn(this.X,g,C,!0,1)==2?this.jE(p,g):this.yn(S),w.add(C,!1)}else if(!(k.R()+this.qa<=2*this.rb||k.ca()+this.qa<=2*this.rb||(C=S=new u.Ta(p.description),this.zn(this.X,g,C,!0,1),S.B()))){var O=new u.l;for(O.K(k),O.W(this.rb,this.rb),C.tp(O),k=1,S=(C=this.yn(S)).da();k<S;k++)w.addPath(C,k,!0)}}else if(0<S){if(!(k.R()+this.qa<=2*this.rb||k.ca()+this.qa<=2*this.rb||(C=S=new u.Ta(p.description),this.zn(this.X,g,C,!0,-1),S.B())))for(O=new u.l,C.xc(O),O.W(this.rb,this.rb),C.tp(O),k=1,S=(C=this.yn(S)).da();k<S;k++)w.addPath(C,k,!0)}else for(C=S=new u.Ta(p.description),this.zn(this.X,g,C,!0,-1),k=0,S=(C=this.yn(S)).da();k<S;k++)w.addPath(C,k,!0)}if(0<this.Ka)return 1<w.da()?w=this.yn(w):d.kx(w);if(p=new u.l,w.xc(p),w.B())return d.kx(w);for(p.W(this.rb,this.rb),w.tp(p),w=this.yn(w),p=new u.Da(w.description),k=1,S=w.da();k<S;k++)p.addPath(w,k,!1);return d.kx(p)},d.prototype.PN=function(){return this.Gu(this.X)},d.prototype.Gu=function(p){var g=new u.Da(this.X.description);return this.yu(g,p),this.sX(g)},d.prototype.ON=function(){var p=new a(this.X,this.Ka,this.Mj,this.vk,this.Dq,this.Ub);return u.Gh.local().V(p,this.Mj,this.Ub).next()},d.prototype.LN=function(){var p=new u.Da(this.X.description);if(0>=this.Ka){if(this.Ka==0)p.ad(this.X,!1);else{var g=new u.Fh;this.X.bn(g),g.W(this.Ka,this.Ka),p.ad(g,!1)}return p}return p.ad(this.X,!1),this.X=p,this.jE(p,0)},d.prototype.jE=function(p,g){this.cv();var y=new u.Da(p.description),w=new u.h,S=new u.h,k=new u.h,C=new u.h,O=new u.h,R=new u.h,N=new u.h,j=new u.h,G=p.Ja(g),D=p.Ba(g),V=0;for(g=p.Ja(g);V<g;V++){if(p.D(D+V,S),p.D(D+(V+1)%G,C),p.D(D+(V+2)%G,R),N.uc(C,S),N.length()==0||(N.Hv(),N.normalize(),N.scale(this.rb),w.add(N,S),k.add(N,C),V==0?y.Lt(w):y.Ci(w),y.Ci(k),j.uc(R,C),j.length()==0))throw u.i.Qa();j.Hv(),j.normalize(),j.scale(this.rb),O.add(j,C),this.GD(y,C,k,O,!1)}return d.kx(y)},d.prototype.kE=function(p,g,y){if(this.cv(),1>p.Ja(g))return null;if(this.FG(p,g)&&0<this.Ka){y=new u.Sa,p.ve(p.Ba(g),y);var w=new u.l;return p.Rj(g,w),y.Cb(w.sf()),this.Gu(y)}if(w=new u.Ta(p.description),p.Nn(g))this.zn(p,g,w,y,1),this.zn(p,g,w,y,-1);else{var S=new u.Ta(p.description);S.addPath(p,g,!1),S.Dr(p,g,0,p.rv(g),!1),this.zn(S,0,w,y,1)}return this.yn(w)},d.prototype.Xq=function(){if(this.Ys++,this.Ys%1024==0&&this.Ub!=null&&!this.Ub.progress(-1,-1))throw u.i.fu("user_canceled")},d.prototype.yn=function(p){return u.Fg.Mk(p,this.ct,!0,!0,this.Ub)},d.prototype.qE=function(){if(this.vk==0)return this.Dq;var p=1-this.vk*Math.abs(this.Kv);return 4>(p=-1>p?4:2*Math.PI/Math.acos(p)+.5)?p=4:p>this.Dq&&(p=this.Dq),u.O.truncate(p)},d.prototype.GD=function(p,g,y,w,S){this.cv();var k=new u.h;k.uc(y,g),k.scale(this.Kv);var C=new u.h;C.uc(w,g),C.scale(this.Kv),0>(k=Math.atan2(k.y,k.x)/this.oA)&&(k=this.Id.length+k),k=this.Id.length-k,0>(C=Math.atan2(C.y,C.x)/this.oA)&&(C=this.Id.length+C),(C=this.Id.length-C)<k&&(C+=this.Id.length);var O=u.O.truncate(C);C=u.O.truncate(Math.ceil(k)),(k=new u.h).L(this.Id[C%this.Id.length]),k.Ct(this.rb,g);var R=10*this.qa;for(k.sub(y),k.length()<R&&(C+=1),k.L(this.Id[O%this.Id.length]),k.Ct(this.rb,g),k.sub(w),k.length()<R&&--O,y=O-C,y++,O=0,C%=this.Id.length;O<y;O++,C=(C+1)%this.Id.length)k.L(this.Id[C]),k.Ct(this.rb,g),p.Ci(k),this.Xq();S&&p.Ci(w)},d.prototype.zn=function(p,g,y,w,S){var k=new u.gd,C=k.mN(p,g);if(k.Gp(this.tA,!1,!1),2>k.I(C))return 0>S||(S=p,k=new u.Sa,S.ve(S.Ba(g),k),this.yu(y,k)),1;var O=k.Na(k.Xa(k.Ob(C))),R=new u.Dd;if(R.gg(-O.x,-O.y),k.Oc(R),w&&(this.tQ(k,C,S),2>k.I(C)))return 0>S||(S=p,k=new u.Sa,S.ve(S.Ba(g),k),this.yu(y,k)),1;this.Zd.length=0;var N=k.Ob(C);g=k.Xa(N);var j=S==1?k.Ma(g):k.U(g);p=S==1?k.U(g):k.Ma(g);var G=!0;w=new u.h,C=new u.h;var D=new u.h,V=new u.h,Z=new u.h,q=new u.h,ne=new u.h,ee=new u.h,he=new u.h,ye=new u.h,ge=this.rb;N=k.Ja(N);for(var Le=0;Le<N;Le++)k.D(p,C),G&&(k.D(g,w),k.D(j,D),ee.uc(w,D),ee.normalize(),ye.MG(ee),ye.scale(ge),V.add(ye,w)),ne.uc(C,w),ne.normalize(),he.MG(ne),he.scale(ge),Z.add(w,he),j=ee.wi(ne),G=ee.Qh(ne),0>j||0>G&&j==0?this.Zd.push(c.Qu(V,Z,w,2,this.Zd.length+1,this.Zd.length-1)):V.qb(Z)||(this.Zd.push(c.construct(V,w,this.Zd.length+1,this.Zd.length-1,"dummy")),this.Zd.push(c.construct(w,Z,this.Zd.length+1,this.Zd.length-1,"dummy"))),q.add(C,he),this.Zd.push(c.Qu(Z,q,w,1,this.Zd.length+1,this.Zd.length-1)),V.L(q),ye.L(he),D.L(w),w.L(C),ee.L(ne),j=g,g=p,G=!1,p=S==1?k.U(g):k.Ma(g);return this.Zd[this.Zd.length-1].qh=0,this.Zd[0].sh=this.Zd.length-1,this.YV(y),R.gg(O.x,O.y),y.YD(R,y.da()-1),1},d.prototype.YV=function(p){for(var g=this.zO(),y=!0,w=g+1,S=g;w!=g;S=w){var k=this.Zd[S];w=k.qh!=-1?k.qh:(S+1)%this.Zd.length,k.Co!=0&&(y&&p.Lt(k.Im),k.Co==2?this.GD(p,k.aw,k.Im,k.Vm,!0):p.Ci(k.Vm),y=!1)}},d.prototype.zO=function(){this.Ks==null&&(this.Ks=[null,null,null,null,null,null,null,null,null]);for(var p=0,g=0,y=this.Zd.length;g<y;){var w=this.Zd[g];if(3&w.Co){p=g;break}g=w.qh}for(y=p+1,g=p;y!=p;g=y){y=(w=this.Zd[g]).qh;for(var S=1,k=null;y!=g&&!(3&(k=this.Zd[y]).Co);)y=k.qh,S++;S!=1&&(w.Co&k.Co)==1&&(this.Ls==null&&(this.Ls=new u.yb,this.lw=new u.yb),this.Ls.Dc(w.Im),this.Ls.Qc(w.Vm),this.lw.Dc(k.Im),this.lw.Qc(k.Vm),this.Ls.Ea(this.lw,this.Ks,null,null,this.ct)==1&&(w.Vm.L(this.Ks[0]),k.Im.L(this.Ks[0]),w.qh=y,k.sh=g))}return p},d.prototype.Fv=function(p,g,y){var w=new u.h;if(w.uc(y,p),y=w.length(),0<(y=this.rb*this.rb-y*y*.25)){y=Math.sqrt(y),w.normalize(),w.ar();var S=new u.h;if(S.uc(g,p),S.Qh(w)+y>=this.rb)return!0}return!1},d.prototype.tQ=function(p,g,y){for(var w=0;1>w;w++){var S=!1,k=p.Ob(g),C=p.Ja(k);if(C==0)break;var O=C;if(3>C)break;!p.dc(k)&&(O=C-1),k=p.Xa(k),C=0<y?p.Ma(k):p.U(k);for(var R=0<y?p.U(k):p.Ma(k),N=C,j=!0,G=new u.h,D=new u.h,V=new u.h,Z=new u.h,q=new u.h,ne=u.h.construct(0,0),ee=new u.h,he=new u.h,ye=new u.h,ge=new u.h,Le=this.rb,Te=0,Je=0;Je<O&&(p.D(R,D),j&&(p.D(k,G),p.D(C,V),N=C),he.uc(G,V),he.normalize(),ee.uc(D,G),ee.normalize(),N!=R);){var We=he.wi(ee),Oe=he.Qh(ee),Dt=!0;if(0>We||0>Oe&&We==0||!this.Fv(V,G,D)||(ne.L(D),Dt=!1,++Te,S=!0),Dt){if(0<Te)for(;(We=0<y?p.Ma(N):p.U(N))!=k;){if(p.D(We,Z),!this.Fv(Z,V,ne)){We!=R&&this.Fv(Z,V,D)&&this.Fv(Z,G,D)&&(V.L(Z),N=We,Dt=!1,++Te);break}V.L(Z),N=We,Dt=!1,++Te}if(!Dt)continue;if(0<Te){for(N=0<y?p.Ma(C):p.U(C),j=1;j<Te;j++)Dt=0<y?p.Ma(N):p.U(N),p.pd(N,!0),N=Dt;ye.uc(G,V),Te=Le*Le-(Te=ye.length())*Te*.25,Le-(Te=Math.sqrt(Te))>.5*this.vk?(q.add(V,G),q.scale(.5),ye.normalize(),ye.ar(),ge.L(ye),ge.scale(Le-Te),q.add(ge),p.mf(C,q)):p.pd(C,!0),Te=0}V.L(G),N=k}G.L(D),C=k,k=R,R=0<y?p.U(k):p.Ma(k),Je++,j=!1}if(0<Te){for(N=0<y?p.Ma(C):p.U(C),j=1;j<Te;j++)Dt=0<y?p.Ma(N):p.U(N),p.pd(N,!0),N=Dt;q.add(V,G),q.scale(.5),ye.uc(G,V),Te=Le*Le-(Te=ye.length())*Te*.25,Te=Math.sqrt(Te),ye.normalize(),ye.ar(),ge.L(ye),ge.scale(Le-Te),q.add(ge),p.mf(C,q)}if(p.Gp(this.tA,!1,!1),!S)break}},d.prototype.FG=function(p,g){if(p.Ja(g)==1)return!0;var y=new u.l;return p.Rj(g,y),Math.max(y.R(),y.ca())<.5*this.vk},d.prototype.EG=function(p){var g=new u.l;return p.A(g),Math.max(g.R(),g.ca())<.5*this.vk},d.prototype.WV=function(p){for(var g=0,y=0,w=(p=u.EC.local().V(p,.25*this.vk,!1,this.Ub)).da();y<w;y++)g=Math.max(p.Ja(y),g);return 32>g?(this.oq=!1,p):(this.oq=!0,u.Fg.Mk(p,this.ct,!1,!0,this.Ub))},d.prototype.yu=function(p,g){if(g=g.D(),this.Id!=null&&this.Id.length!==0){var y=new u.h;y.L(this.Id[0]),y.Ct(this.rb,g),p.Lt(y);for(var w=1,S=this.Id.length;w<S;w++)y.L(this.Id[w]),y.Ct(this.rb,g),p.Ci(y)}else{w=this.qE(),y=u.O.truncate((w+3)/4),w=.5*Math.PI/y,S=Math.cos(w);for(var k=Math.sin(w),C=new u.h,O=3;0<=O;O--){switch(C.ma(0,this.rb),O){case 0:for(w=0;w<y;w++)p.yj(C.x+g.x,C.y+g.y),C.Bt(S,k);break;case 1:for(w=0;w<y;w++)p.yj(-C.y+g.x,C.x+g.y),C.Bt(S,k);break;case 2:for(w=0;w<y;w++)p.yj(-C.x+g.x,-C.y+g.y),C.Bt(S,k);break;default:for(p.sx(C.y+g.x,-C.x+g.y),w=1;w<y;w++)C.Bt(S,k),p.yj(C.y+g.x,-C.x+g.y)}this.Xq()}}},d.kx=function(p){return p.Ch(1,0),p},d.prototype.sX=function(p){return p.Ch(2,this.qa),p.fm(),p},d}();u.HK=l}(B||(B={})),function(u){var A=function(){function b(c){this.Ca=c,this.g=new u.gd,this.dd=new u.ia(0)}return b.prototype.Lh=function(c,a,r){switch(a){case 0:if(c.v<r&&c.C<=r)break;return c.v>=r?1:-1;case 1:if(c.G<r&&c.H<=r)break;return c.G>=r?1:-1;case 2:if(c.v>=r&&c.C>r)break;return c.C<=r?1:-1;case 3:if(!(c.G>=r&&c.H>r))return c.H<=r?1:-1}return 0},b.prototype.Ay=function(c,a){return c.getType()==1736?this.Cy(c,a):this.Dy(c)},b.prototype.Cy=function(c,a){if(this.Ca.R()==0||this.Ca.ca()==0)return c.Ia();var r=new u.l;c.xc(r),this.X=this.g.Ib(c);var o=new u.l,l=new u.l,d=new u.h,p=new u.h,g=[0,0,0,0,0,0,0,0,0],y=[0,0,0,0,0,0,0,0,0];new u.ig;var w=new u.yb,S=new u.ia(0);S.Jb(Math.min(100,c.I()));for(var k=!1,C=0;!k&&4>C;C++){var O=!1,R=!!(1&C),N=0;switch(C){case 0:N=this.Ca.v,O=r.v<=N&&r.C>=N;break;case 1:N=this.Ca.G,O=r.G<=N&&r.H>=N;break;case 2:N=this.Ca.C,O=r.v<=N&&r.C>=N;break;case 3:N=this.Ca.H,O=r.G<=N&&r.H>=N}if(O)for(k=!0,O=this.g.Ob(this.X);O!=-1;){var j=-1,G=-1,D=this.g.Xa(O),V=D;do{var Z=this.g.bc(V);Z==null&&(Z=w,this.g.D(V,d),Z.Dc(d),this.g.D(this.g.U(V),p),Z.Qc(p)),Z.A(o);var q=this.Lh(o,C,N),ne=0,ee=-1;if(q==-1){ne=0<(Z=Z.cq(R,N,g,y))?this.g.Ul(V,y,Z):0,ne+=1;var he=V,ye=this.g.U(he);for(Z=0;Z<ne;Z++){if(this.g.D(he,d),this.g.D(ye,p),(ee=this.g.bc(he))==null&&((ee=w).Dc(d),ee.Qc(p)),ee.A(l),(ee=this.Lh(l,C,N))==-1){if(R)(ee=Math.abs(d.y-N))<(ge=Math.abs(p.y-N))?(d.y=N,this.g.mf(he,d)):(p.y=N,this.g.mf(ye,p));else{ee=Math.abs(d.x-N);var ge=Math.abs(p.x-N);ee<ge?(d.x=N,this.g.mf(he,d)):(p.x=N,this.g.mf(ye,p))}(ee=this.g.bc(he))==null&&((ee=w).Dc(d),ee.Qc(p)),ee.A(l),ee=this.Lh(l,C,N)}ge=j,j=ee,G==-1&&(G=j),ge==0&&j==1||ge==1&&j==0||ge!=0||j!=0||S.add(he),j==1&&(k=!1),ee=he=ye,ye=this.g.U(ye)}}ne==0&&(ge=j,j=q,G==-1&&(G=j),ge==0&&j==1||ge==1&&j==0||ge!=0||j!=0||S.add(V),j==1&&(k=!1),ee=this.g.U(V)),V=ee}while(V!=D);for(G==0&&j==0&&S.add(D),Z=0,j=S.size;Z<j;Z++)G=S.get(Z),this.g.pd(G,!1);S.clear(!1),O=3>this.g.Ja(O)?this.g.Zq(O):this.g.Rb(O)}}return k?c.Ia():(this.FB(),0<a&&this.My(a),this.g.Ne(this.X))},b.prototype.Dy=function(c){var a=new u.l,r=new u.l,o=[0,0,0,0,0,0,0,0,0],l=[0,0,0,0,0,0,0,0,0],d=new u.ig,p=c,g=new u.l;c.xc(g);for(var y=0;4>y;y++){var w=!1,S=!!(1&y),k=0;switch(y){case 0:k=this.Ca.v,w=g.v<=k&&g.C>=k;break;case 1:k=this.Ca.G,w=g.G<=k&&g.H>=k;break;case 2:k=this.Ca.C,w=g.v<=k&&g.C>=k;break;case 3:k=this.Ca.H,w=g.G<=k&&g.H>=k}if(w){w=p,p=c.Ia(),(w=w.Ga()).Zi();for(var C,O=new u.h;w.$a();)for(var R,N=!0;w.Ha();){var j=w.ha();j.A(a);var G=this.Lh(a,y,k);if(G==-1){if(0<(G=j.cq(S,k,o,l))){var D=0;C=j.ac();for(var V=0;V<=G;V++)if(D!=(R=V<G?l[V]:1)){j.ah(D,R,d);var Z=d.get();Z.Dc(C),V<G&&(S?(O.x=o[V],O.y=k):(O.x=k,O.y=o[V]),Z.Qc(O)),Z.A(r);var q=this.Lh(r,y,k);if(q==-1){if(C=Z.ac(),D=Z.wc(),S)(q=Math.abs(C.y-k))<(ne=Math.abs(D.y-k))?(C.y=k,Z.Dc(C)):(D.y=k,Z.Qc(D));else{q=Math.abs(C.x-k);var ne=Math.abs(D.x-k);q<ne?(C.x=k,Z.Dc(C)):(D.x=k,Z.Qc(D))}Z.A(r),q=this.Lh(r,y,k)}C=Z.wc(),D=R,(R=q)==1?(p.oc(Z,N),N=!1):N=!0}}}else(R=G)==1?(p.oc(j,N),N=!1):N=!0}}}return p},b.prototype.FB=function(){this.ji=-1,this.Vl(!1,this.Ca.v),this.Vl(!1,this.Ca.C),this.Vl(!0,this.Ca.G),this.Vl(!0,this.Ca.H),this.dd.resize(0),this.dd.Jb(100),this.ji=this.g.Gd();for(var c=new u.h,a=this.g.Ob(this.X);a!=-1;a=this.g.Rb(a))for(var r=this.g.Xa(a),o=0,l=this.g.Ja(a);o<l;o++,r=this.g.U(r))this.g.D(r,c),(this.Ca.v==c.x||this.Ca.C==c.x||this.Ca.G==c.y||this.Ca.H==c.y)&&(this.g.Ra(r,this.ji,this.dd.size),this.dd.add(r));this.Nl(!1,this.Ca.v),this.Nl(!1,this.Ca.C),this.Nl(!0,this.Ca.G),this.Nl(!0,this.Ca.H),this.Ty()},b.prototype.My=function(c){for(var a=new u.h,r=new u.h,o=u.O.lg(2048,0),l=this.g.Ob(this.X);l!=-1;l=this.g.Rb(l)){var d=this.g.Xa(l),p=d;do{var g=this.g.U(p);this.g.D(p,a);var y=-1;if(a.x==this.Ca.v?(this.g.D(g,r),r.x==this.Ca.v&&(y=1)):a.x==this.Ca.C&&(this.g.D(g,r),r.x==this.Ca.C&&(y=1)),a.y==this.Ca.G?(this.g.D(g,r),r.y==this.Ca.G&&(y=0)):a.y==this.Ca.H&&(this.g.D(g,r),r.y==this.Ca.H&&(y=0)),y!=-1&&(y=u.h.tb(a,r),!(1>=(y=u.O.truncate(Math.min(Math.ceil(y/c),2048)))))){for(var w=1;w<y;w++)o[w-1]=1*w/y;this.g.Ul(p,o,y-1)}p=g}while(p!=d)}},b.prototype.Vl=function(c,a){var r=this.g.Gd(),o=new u.h,l=new u.ia(0);l.Jb(100);for(var d=this.g.Ob(this.X);d!=-1;d=this.g.Rb(d))for(var p=this.g.Xa(d),g=0,y=this.g.Ja(d);g<y;g++){var w=this.g.U(p);this.g.D(p,o),(c?o.y==a:o.x==a)&&(this.g.D(w,o),(c?o.y==a:o.x==a)&&(this.g.Pa(p,r)!=1&&(l.add(p),this.g.Ra(p,r,1)),this.g.Pa(w,r)!=1&&(l.add(w),this.g.Ra(w,r,1)))),p=w}if(this.g.Td(r),!(3>l.size)){var S=this;l.Vd(0,l.size,function(q,ne){return S.Mh(q,ne)}),r=new u.h,d=new u.h,p=new u.h,d.Rc();var k=-1;g=new u.ia(0),y=new u.ia(0),w=this.g.Gd();for(var C=this.g.Gd(),O=0,R=l.size;O<R;O++){var N=l.get(O);if(this.g.D(N,o),!o.qb(d)){if(k!=-1){for(var j=k;j<O;j++){k=l.get(j);var G=this.g.U(k);N=this.g.Ma(k);var D=!1;0>this.Mh(k,G)&&(this.g.D(G,r),c?r.y==a:r.x==a)&&(g.add(k),D=!0,this.g.Ra(k,C,1)),0>this.Mh(k,N)&&(this.g.D(N,r),c?r.y==a:r.x==a)&&(D||g.add(k),this.g.Ra(k,w,1))}for(j=0,D=g.size;j<D;j++){if(k=g.get(j),N=this.g.Pa(k,w),G=this.g.Pa(k,C),N==1){N=this.g.Ma(k),this.g.D(N,p);var V=[0];if(V[0]=0,!p.qb(o)){var Z=u.h.tb(d,p);V[0]=u.h.tb(p,o)/Z,V[0]==0?V[0]=2220446049250313e-31:V[0]==1&&(V[0]=.9999999999999998),this.g.Ul(N,V,1),N=this.g.Ma(k),this.g.mf(N,o),y.add(N),this.g.Ra(N,w,1),this.g.Ra(N,C,-1)}}G==1&&(G=this.g.U(k),this.g.D(G,p),(V=[0])[0]=0,p.qb(o)||(Z=u.h.tb(d,p),V[0]=u.h.tb(d,o)/Z,V[0]==0?V[0]=2220446049250313e-31:V[0]==1&&(V[0]=.9999999999999998),this.g.Ul(k,V,1),N=this.g.U(k),this.g.mf(N,o),y.add(N),this.g.Ra(N,w,-1),this.g.Ra(N,C,1)))}k=g,g=y,(y=k).clear(!1)}k=O,d.L(o)}}this.g.Td(w),this.g.Td(C)}},b.prototype.Nl=function(c,a){var r=new u.h,o=new u.ia(0);o.Jb(100);for(var l=this.g.Gd(),d=0,p=this.dd.size;d<p;d++){var g=this.dd.get(d);if(g!=-1){var y=this.g.U(g);this.g.D(g,r),(c?r.y==a:r.x==a)&&(this.g.D(y,r),(c?r.y==a:r.x==a)&&(this.g.Pa(g,l)!=-2&&(o.add(g),this.g.Ra(g,l,-2)),this.g.Pa(y,l)!=-2&&(o.add(y),this.g.Ra(y,l,-2))))}}if(o.size!=0){var w=this;for(o.Vd(0,o.size,function(ne,ee){return w.Mh(ne,ee)}),d=0,p=o.size;d<p;d++){var S=o.get(d);this.g.Ra(S,l,d)}g=new u.h,(y=new u.h).Rc();var k=-1;for(d=0,p=o.size;d<p;d++)if((S=o.get(d))!=-1&&(this.g.D(S,r),!r.qb(y))){if(k!=-1)for(;;){S=!1;for(var C=1<d-k?d-1:d,O=k;O<C;O++){var R=o.get(O);if(R!=-1){var N=-1,j=this.g.U(R);0>this.Mh(R,j)&&(this.g.D(j,g),c?g.y==a:g.x==a)&&(N=j),j=-1;var G=this.g.Ma(R);if(0>this.Mh(R,G)&&(this.g.D(G,g),c?g.y==a:g.x==a)&&(j=G),N!=-1&&j!=-1)this.Kh(R,o,l),this.g.pd(R,!1),this.Kh(N,o,l),this.g.pd(N,!1),S=!0;else if(N!=-1||j!=-1){for(G=O+1;G<d;G++){var D=o.get(G);if(D!=-1){var V=this.g.U(D),Z=-1;0>this.Mh(D,V)&&(this.g.D(V,g),c?g.y==a:g.x==a)&&(Z=V),V=this.g.Ma(D);var q=-1;if(0>this.Mh(D,V)&&(this.g.D(V,g),c?g.y==a:g.x==a)&&(q=V),Z!=-1&&q!=-1){this.Kh(D,o,l),this.g.pd(D,!1),this.Kh(Z,o,l),this.g.pd(Z,!1),S=!0;break}if(N!=-1&&q!=-1){this.zt(o,R,N,D,q,l),S=!0;break}if(j!=-1&&Z!=-1){this.zt(o,D,Z,R,j,l),S=!0;break}}}if(S)break}}}if(!S)break}k=d,y.L(r)}}this.g.Td(l)},b.prototype.Kh=function(c,a,r){r=this.g.Pa(c,r),a.set(r,-1),r=this.g.Pa(c,this.ji),this.dd.set(r,-1),(a=this.g.bd(c))!=-1&&this.g.Xa(a)==c&&(this.g.Jf(a,-1),this.g.Wg(a,-1))},b.prototype.zt=function(c,a,r,o,l,d){this.g.Bc(a,o),this.g.Cc(o,a),this.g.Cc(r,l),this.g.Bc(l,r),this.Kh(o,c,d),this.g.mi(o,!1),this.Kh(l,c,d),this.g.mi(l,!0)},b.prototype.Ty=function(){for(var c=0,a=this.dd.size;c<a;c++){var r=this.dd.get(c);r!=-1&&this.g.aj(r,-1)}for(var o=0,l=0,d=this.g.Ob(this.X);d!=-1;){var p=this.g.Xa(d);if(p==-1||d!=this.g.bd(p)){var g=d;d=this.g.Rb(d),this.g.Jf(g,-1),this.g.$q(g)}else{r=p,g=0;do this.g.aj(r,d),g++,r=this.g.U(r);while(r!=p);2>=g?(r=this.g.Pa(p,this.ji),this.dd.set(r,-1),p=this.g.pd(p,!1),g==2&&(r=this.g.Pa(p,this.ji),this.dd.set(r,-1),this.g.pd(p,!1)),g=d,d=this.g.Rb(d),this.g.Jf(g,-1),this.g.$q(g)):(this.g.cp(d,!1),this.g.Wg(d,this.g.Ma(p)),this.g.Vj(d,g),l+=g,o++,d=this.g.Rb(d))}}for(c=0,a=this.dd.size;c<a;c++)if((r=this.dd.get(c))!=-1&&(d=this.g.bd(r))==-1){d=this.g.vf(this.X,-1),g=0,p=r;do this.g.aj(r,d),g++,r=this.g.U(r);while(r!=p);2>=g?(r=this.g.Pa(p,this.ji),this.dd.set(r,-1),p=this.g.pd(p,!1),g==2&&(0<=(r=this.g.Pa(p,this.ji))&&this.dd.set(r,-1),this.g.pd(p,!1)),g=d,this.g.Jf(g,-1),this.g.$q(g)):(this.g.kn(d,!0),this.g.Vj(d,g),this.g.Jf(d,p),this.g.Wg(d,this.g.Ma(p)),this.g.cp(d,!1),l+=g,o++)}for(this.g.Rl(this.X,o),this.g.Tj(this.X,l),c=0,a=this.g.ld;a!=-1;a=this.g.ue(a))c+=this.g.I(a);this.g.bC(c)},b.By=function(c,a,r){return new b(a).Ay(c,r)},b.clip=function(c,a,r,o){if(c.B())return c;if(a.B())return c.Ia();if((r=c.getType())==33)return o=c.D(),a.contains(o)?c:c.Ia();if(r==197)return o=new u.l,c.A(o),o.Ea(a)?(a=new u.Fh,c.copyTo(a),a.Xo(o),a):c.Ia();var l=new u.l;if(c.xc(l),a.contains(l))return c;if(!a.isIntersecting(l))return c.Ia();if((l=c.Bb)!=null&&(l=l.Fk)!=null){if((l=l.Ro(a))==1){if(r!=1736)throw u.i.Qa();return(c=new u.Da(c.description)).tp(a),c}if(l==0)return c.Ia()}switch(r){case 550:r=null,l=c.I();for(var d=c.ub(0),p=0,g=0;g<l;g++)o=new u.h,d.tc(2*g,o),a.contains(o)||(p==0&&(r=c.Ia()),p<g&&r.Fd(c,p,g),p=g+1);return 0<p&&r.Fd(c,p,l),p==0?c:r;case 1736:case 1607:return b.By(c,a,o);default:throw u.i.Qa()}},b.prototype.Mh=function(c,a){var r=new u.h;return this.g.D(c,r),c=new u.h,this.g.D(a,c),r.compare(c)},b}();u.Ud=A}(B||(B={})),function(u){var A=function(){function b(c,a){this.Ca=c,this.g=new u.gd,this.dd=new u.ia(0),this.nd=a}return b.prototype.Lh=function(c,a,r){switch(a){case 0:if(c.v<r&&c.C<=r)break;return c.v>=r?1:-1;case 1:if(c.G<r&&c.H<=r)break;return c.G>=r?1:-1;case 2:if(c.v>=r&&c.C>r)break;return c.C<=r?1:-1;case 3:if(!(c.G>=r&&c.H>r))return c.H<=r?1:-1}return 0},b.prototype.Ay=function(c,a){return c.getType()==1736?this.Cy(c,a):this.Dy(c)},b.prototype.Cy=function(c,a){if(this.Ca.R()==0||this.Ca.ca()==0)return c.Ia();var r=new u.l;c.xc(r),this.X=this.g.Ib(c);var o=new u.l,l=new u.l,d=new u.h,p=new u.h,g=[0,0,0,0,0,0,0,0,0],y=[0,0,0,0,0,0,0,0,0],w=new u.yb,S=new u.ia(0);S.Jb(256);for(var k=!1,C=0;!k&&4>C;C++){var O=!1,R=!!(1&C),N=0;switch(C){case 0:N=this.Ca.v,O=r.v<=N&&r.C>=N;break;case 1:N=this.Ca.G,O=r.G<=N&&r.H>=N;break;case 2:N=this.Ca.C,O=r.v<=N&&r.C>=N;break;case 3:N=this.Ca.H,O=r.G<=N&&r.H>=N}if(O)for(k=!0,O=this.g.Ob(this.X);O!=-1;){var j=!0,G=-1,D=-1,V=this.g.Xa(O),Z=V;do{var q=this.g.bc(Z);q==null&&(q=w,this.g.D(Z,d),q.Dc(d),this.g.D(this.g.U(Z),p),q.Qc(p)),q.A(o);var ne=this.Lh(o,C,N),ee=0,he=-1;if(ne==-1){ee=0<(q=q.cq(R,N,g,y))?this.g.LX(Z,y,q):0,ee+=1;var ye=Z,ge=this.g.U(ye);for(q=0;q<ee;q++){if(this.g.D(ye,d),this.g.D(ge,p),(he=this.g.bc(ye))==null&&((he=w).Dc(d),he.Qc(p)),he.A(l),(he=this.Lh(l,C,N))==-1){if(R)(he=Math.abs(d.y-N))<(Le=Math.abs(p.y-N))?(d.y=N,this.g.mf(ye,d)):(p.y=N,this.g.mf(ge,p));else{he=Math.abs(d.x-N);var Le=Math.abs(p.x-N);he<Le?(d.x=N,this.g.mf(ye,d)):(p.x=N,this.g.mf(ge,p))}(he=this.g.bc(ye))==null&&((he=w).Dc(d),he.Qc(p)),he.A(l),he=this.Lh(l,C,N)}Le=G,G=he,D==-1&&(D=G),Le==0&&G==1||Le==1&&G==0||Le!=0||G!=0||S.add(ye),G==1&&(j=k=!1),he=ye=ge,ge=this.g.U(ge)}}if(ee==0&&(Le=G,G=ne,D==-1&&(D=G),Le==0&&G==1||Le==1&&G==0||Le!=0||G!=0||S.add(Z),G==1&&(j=k=!1),he=this.g.U(Z)),Z=he,256<=S.size){for(q=1,ne=S.size-1;q<ne;q++)ee=S.get(q),this.g.pd(ee,!1);S.set(1,S.Fc()),S.Bh(2)}}while(Z!=V);if(!j)for(D==0&&G==0&&S.add(V),q=0,ne=S.size;q<ne;q++)ee=S.get(q),this.g.pd(ee,!1);S.clear(!1),O=j||this.g.Ja(O)==0?this.g.Zq(O):this.g.Rb(O)}}return k?c.Ia():(this.FB(),0<a&&this.My(a),this.g.Ne(this.X))},b.prototype.Dy=function(c){var a=new u.l,r=new u.l,o=[0,0,0,0,0,0,0,0,0],l=[0,0,0,0,0,0,0,0,0],d=new u.ig,p=c,g=new u.l;c.xc(g);for(var y=new u.h,w=new u.h,S=null,k=null,C=0;4>C;C++){var O=!1,R=!!(1&C),N=0;switch(C){case 0:N=this.Ca.v,O=g.v<=N&&g.C>=N;break;case 1:N=this.Ca.G,O=g.G<=N&&g.H>=N;break;case 2:N=this.Ca.C,O=g.v<=N&&g.C>=N;break;case 3:N=this.Ca.H,O=g.G<=N&&g.H>=N}if(O)for(O=p,p=c.Ia(),(O=O.Ga()).Zi();O.$a();)for(var j,G=!0;O.Ha();){var D=O.ha();D.A(a);var V=this.Lh(a,C,N);if(V==-1){if(0<(V=D.cq(R,N,o,l))){var Z=0;D.Yp(y);for(var q=0;q<=V;q++)if(Z!=(j=q<V?l[q]:1)){D.ah(Z,j,d);var ne=d.get();ne.Dc(y),q<V&&(R?(w.x=o[q],w.y=N):(w.x=N,w.y=o[q]),ne.Qc(w)),ne.A(r);var ee=this.Lh(r,C,N);ee==-1&&(S==null&&(S=new u.h),k==null&&(k=new u.h),ne.Yp(S),ne.Tr(k),R?(Z=Math.abs(S.y-N))<(ee=Math.abs(k.y-N))?(S.y=N,ne.Dc(S)):(k.y=N,ne.Qc(k)):(Z=Math.abs(S.x-N))<(ee=Math.abs(k.x-N))?(S.x=N,ne.Dc(S)):(k.x=N,ne.Qc(k)),ne.A(r),ee=this.Lh(r,C,N)),ne.Tr(y),Z=j,(j=ee)==1?(p.oc(ne,G),G=!1):G=!0}}}else(j=V)==1?(p.oc(D,G),G=!1):G=!0}}return p},b.prototype.FB=function(){this.ji=-1,this.Vl(!1,this.Ca.v),this.Vl(!1,this.Ca.C),this.Vl(!0,this.Ca.G),this.Vl(!0,this.Ca.H),this.dd.resize(0),this.dd.Jb(100),this.ji=this.g.Gd();for(var c=new u.h,a=this.g.Ob(this.X);a!=-1;a=this.g.Rb(a))for(var r=this.g.Xa(a),o=0,l=this.g.Ja(a);o<l;o++,r=this.g.U(r))this.g.D(r,c),(this.Ca.v==c.x||this.Ca.C==c.x||this.Ca.G==c.y||this.Ca.H==c.y)&&(this.g.Ra(r,this.ji,this.dd.size),this.dd.add(r));this.Nl(!1,this.Ca.v),this.Nl(!1,this.Ca.C),this.Nl(!0,this.Ca.G),this.Nl(!0,this.Ca.H),this.Ty()},b.prototype.My=function(c){for(var a=new u.h,r=new u.h,o=null,l=null,d=u.O.lg(2048,0),p=this.g.Ob(this.X);p!=-1;p=this.g.Rb(p)){var g=this.g.Xa(p),y=g;do{var w=this.g.U(y);this.g.D(y,a);var S=-1;if(a.x==this.Ca.v?(this.g.D(w,r),r.x==this.Ca.v&&(S=1)):a.x==this.Ca.C&&(this.g.D(w,r),r.x==this.Ca.C&&(S=1)),a.y==this.Ca.G?(this.g.D(w,r),r.y==this.Ca.G&&(S=0)):a.y==this.Ca.H&&(this.g.D(w,r),r.y==this.Ca.H&&(S=0)),S!=-1){if(o==null&&(o=new u.h),l==null&&(l=new u.h),o.L(a),l.ma(0,0),S==0){var k=a.x-this.Ca.v;l.x=u.lc.sign(r.x-a.x),o.x=c*u.lc.Cn(Math.floor(Math.abs(k/c)),k)+this.Ca.v,0>o.x&&(o.x+=c)}else k=a.y-this.Ca.G,l.y=u.lc.sign(r.y-a.y),o.y=c*u.lc.Cn(Math.floor(Math.abs(k/c)),k)+this.Ca.G,0>o.y&&(o.y+=c);k=S!=0?r.y-a.y:r.x-a.x;var C=Math.abs(k);if(65536<C/c)throw u.i.fa("internal error");if(0<C){C=u.O.truncate(C/c)+2,d.length<C&&(d=u.O.lg(C));for(var O=C=0;;O++){var R=new u.h;if(R.x=o.x+l.x*O*c,R.y=o.y+l.y*O*c,1<=(R=(S!=0?R.y-a.y:R.x-a.x)/k))break;0>=R||(d[C]=R,C++)}C!=0&&this.g.Ul(y,d,C)}}y=w}while(y!=g)}},b.prototype.Vl=function(c,a){for(var r=-1,o=new u.h,l=null,d=this.g.Ob(this.X);d!=-1;d=this.g.Rb(d))for(var p=this.g.Xa(d),g=0,y=this.g.Ja(d);g<y;g++){var w=this.g.U(p);this.g.D(p,o),(c?o.y==a:o.x==a)&&(this.g.D(w,o),(c?o.y==a:o.x==a)&&(r==-1&&(r=this.g.Gd()),l==null&&(l=new u.ia(0)).Jb(100),this.g.Pa(p,r)!=1&&(l.add(p),this.g.Ra(p,r,1)),this.g.Pa(w,r)!=1&&(l.add(w),this.g.Ra(w,r,1)))),p=w}if(r!=-1&&this.g.Td(r),!(l==null||3>l.size)){var S=this;l.Vd(0,l.size,function(q,ne){return S.Mh(q,ne)}),r=new u.h,d=new u.h,p=new u.h,d.Rc();var k=-1;g=new u.ia(0),y=new u.ia(0),w=null;for(var C=this.g.Gd(),O=this.g.Gd(),R=0,N=l.size;R<N;R++){var j=l.get(R);if(this.g.D(j,o),!o.qb(d)){if(k!=-1){for(var G=k;G<R;G++){k=l.get(G);var D=this.g.U(k);j=this.g.Ma(k);var V=!1;this.g.D(D,r),0>d.compare(r)&&(c?r.y==a:r.x==a)&&(g.add(k),V=!0,this.g.Ra(k,O,1)),this.g.D(j,r),0>d.compare(r)&&(c?r.y==a:r.x==a)&&(V||g.add(k),this.g.Ra(k,C,1))}for(G=0,V=g.size;G<V;G++){if(k=g.get(G),j=this.g.Pa(k,C),D=this.g.Pa(k,O),j==1&&(j=this.g.Ma(k),this.g.D(j,p),!p.qb(o))){w==null&&(w=[]);var Z=u.h.tb(d,p);w[0]=u.h.tb(p,o)/Z,w[0]==0?w[0]=2220446049250313e-31:w[0]==1&&(w[0]=.9999999999999998),this.g.Ul(j,w,1),j=this.g.Ma(k),this.g.mf(j,o),y.add(j),this.g.Ra(j,C,1),this.g.Ra(j,O,-1)}D==1&&(D=this.g.U(k),this.g.D(D,p),p.qb(o)||(w==null&&(w=[]),Z=u.h.tb(d,p),w[0]=u.h.tb(d,o)/Z,w[0]==0?w[0]=2220446049250313e-31:w[0]==1&&(w[0]=.9999999999999998),this.g.Ul(k,w,1),j=this.g.U(k),this.g.mf(j,o),y.add(j),this.g.Ra(j,C,-1),this.g.Ra(j,O,1)))}k=g,g=y,(y=k).clear(!1)}k=R,d.L(o)}}this.g.Td(C),this.g.Td(O)}},b.prototype.Nl=function(c,a){for(var r=new u.h,o=null,l=-1,d=0,p=this.dd.size;d<p;d++){var g=this.dd.get(d);if(g!=-1){var y=this.g.U(g);this.g.D(g,r),(c?r.y==a:r.x==a)&&(this.g.D(y,r),(c?r.y==a:r.x==a)&&(l==-1&&(l=this.g.Gd()),o==null&&(o=new u.ia(0)).Jb(100),this.g.Pa(g,l)!=-2&&(o.add(g),this.g.Ra(g,l,-2)),this.g.Pa(y,l)!=-2&&(o.add(y),this.g.Ra(y,l,-2))))}}if(o==null)l!=-1&&this.g.Td(l);else{var w=this;for(o.Vd(0,o.size,function(ne,ee){return w.Mh(ne,ee)}),d=0,p=o.size;d<p;d++){var S=o.get(d);this.g.Ra(S,l,d)}g=new u.h,(y=new u.h).Rc();var k=-1;for(d=0,p=o.size;d<p;d++)if((S=o.get(d))!=-1&&(this.g.D(S,r),!r.qb(y))){if(k!=-1)for(;;){S=!1;for(var C=1<d-k?d-1:d,O=k;O<C;O++){var R=o.get(O);if(R!=-1){var N=-1,j=this.g.U(R);this.g.D(j,g),0>y.compare(g)&&(c?g.y==a:g.x==a)&&(N=j),j=-1;var G=this.g.Ma(R);if(this.g.D(G,g),0>y.compare(g)&&(c?g.y==a:g.x==a)&&(j=G),N!=-1&&j!=-1)this.Kh(R,o,l),this.g.pd(R,!1),this.Kh(N,o,l),this.g.pd(N,!1),S=!0;else if(N!=-1||j!=-1){for(G=O+1;G<d;G++){var D=o.get(G);if(D!=-1){var V=this.g.U(D),Z=-1;this.g.D(V,g),0>y.compare(g)&&(c?g.y==a:g.x==a)&&(Z=V),V=this.g.Ma(D);var q=-1;if(this.g.D(V,g),0>y.compare(g)&&(c?g.y==a:g.x==a)&&(q=V),Z!=-1&&q!=-1){this.Kh(D,o,l),this.g.pd(D,!1),this.Kh(Z,o,l),this.g.pd(Z,!1),S=!0;break}if(N!=-1&&q!=-1){this.zt(o,R,N,D,q,l),S=!0;break}if(j!=-1&&Z!=-1){this.zt(o,D,Z,R,j,l),S=!0;break}}}if(S)break}}}if(!S)break}k=d,y.L(r)}this.g.Td(l)}},b.prototype.Kh=function(c,a,r){r=this.g.Pa(c,r),a.set(r,-1),r=this.g.Pa(c,this.ji),this.dd.set(r,-1),(a=this.g.bd(c))!=-1&&this.g.Xa(a)==c&&(this.g.Jf(a,-1),this.g.Wg(a,-1))},b.prototype.zt=function(c,a,r,o,l,d){this.g.Bc(a,o),this.g.Cc(o,a),this.g.Cc(r,l),this.g.Bc(l,r),this.Kh(o,c,d),this.g.mi(o,!1),this.Kh(l,c,d),this.g.mi(l,!0)},b.prototype.Ty=function(){for(var c=0,a=this.dd.size;c<a;c++){var r=this.dd.get(c);r!=-1&&this.g.aj(r,-1)}for(var o=0,l=0,d=this.g.Ob(this.X);d!=-1;){var p=this.g.Xa(d);if(p==-1||d!=this.g.bd(p)){var g=d;d=this.g.Rb(d),this.g.Jf(g,-1),this.g.$q(g)}else{r=p,g=0;do this.g.aj(r,d),g++,r=this.g.U(r);while(r!=p);this.g.cp(d,!1),this.g.Wg(d,this.g.Ma(p)),this.g.Vj(d,g),l+=g,o++,d=this.g.Rb(d)}}for(c=0,a=this.dd.size;c<a;c++)if((r=this.dd.get(c))!=-1&&(d=this.g.bd(r))==-1){d=this.g.vf(this.X,-1),g=0,p=r;do this.g.aj(r,d),g++,r=this.g.U(r);while(r!=p);2>=g?(r=this.g.Pa(p,this.ji),this.dd.set(r,-1),p=this.g.pd(p,!1),g==2&&(0<=(r=this.g.Pa(p,this.ji))&&this.dd.set(r,-1),this.g.pd(p,!1)),g=d,this.g.Jf(g,-1),this.g.$q(g)):(this.g.kn(d,!0),this.g.Vj(d,g),this.g.Jf(d,p),this.g.Wg(d,this.g.Ma(p)),this.g.cp(d,!1),l+=g,o++)}for(this.g.Rl(this.X,o),this.g.Tj(this.X,l),c=0,a=this.g.ld;a!=-1;a=this.g.ue(a))c+=this.g.I(a);this.g.bC(c)},b.By=function(c,a,r,o){return new b(a,o).Ay(c,r)},b.clip=function(c,a,r,o,l){return b.Nu(c,a,null,r,o,l)},b.Nu=function(c,a,r,o,l,d){var p=c.getType();if(p==33)return l=c.D(),a.contains(l)?c:c.Ia();if(p==197)return l=new u.l,c.A(l),l.Ea(a)?(a=new u.Fh,c.copyTo(a),a.Xo(l),a):c.Ia();if(c.B())return c;if(a.B())return c.Ia();var g=new u.l;if(c.xc(g),a.contains(g))return c;if(!a.isIntersecting(g))return c.Ia();if((r!=null||isNaN(o))&&u.ta.ty(r,a,!1),!u.aa.xj(p))throw u.i.N();if((r=c.Bb)!=null&&(r=r.Fk)!=null){if((r=r.Ro(a))==1){if(p!=1736)throw u.i.fa("internal error");return(c=new u.Da(c.description)).tp(a),c}if(r==0)return c.Ia()}switch(p){case 550:for(d=null,p=c.I(),r=c.ub(0),o=0,l=new u.h,g=0;g<p;g++)r.tc(2*g,l),a.contains(l)||(o==0&&(d=c.Ia()),o<g&&d.Fd(c,o,g),o=g+1);return 0<o&&d.Fd(c,o,p),o==0?c:d;case 1736:case 1607:return b.By(c,a,l,d);default:throw u.i.fa("internal error")}},b.prototype.Mh=function(c,a){var r=new u.h;return this.g.D(c,r),c=new u.h,this.g.D(a,c),r.compare(c)},b}();u.ri=A}(B||(B={})),function(u){var A=new u.h,b=function(){function a(r,o,l,d,p){this.Pm=new u.h,this.Dk=new u.h,this.Pi=new u.h,this.g=r,this.Aw=l,this.no=d,this.Pm=o,this.yl=p,this.Dk.Rc(),this.Pi.Rc()}return a.prototype.xE=function(r){this.g.D(r,this.Dk),r=u.O.truncate((this.Dk.x-this.Pm.x)*this.no+.5);var o=u.O.truncate((this.Dk.y-this.Pm.y)*this.no+.5);return c.jG(r,o)},a.prototype.jz=function(r){return this.g.Pa(r,this.yl)},a.prototype.Py=function(r,o){return this.g.D(r,this.Dk),this.g.D(o,this.Pi),c.Cv(this.Dk.x,this.Dk.y,this.Pi.x,this.Pi.y,this.Aw)},a}();u.sY=function(){};var c=function(){function a(){this.Pm=new u.h,this.pq=[0,0,0,0],this.xs=[0,0,0,0],this.qo=this.yl=-1}return a.iQ=function(r,o){var l=new a;return l.g=r,l.qa=o,l.Aw=o*o,l.$v=2*o,l.no=1/l.$v,l.BO()},a.Cv=function(r,o,l,d,p){return(r-=l)*r+(o-=d)*o<=p},a.jG=function(r,o){return u.O.Th(o,u.O.Th(r))},a.prototype.DO=function(r,o){this.g.Gc(r,A);for(var l=(A.y-this.Pm.y)*this.no,d=u.O.truncate((A.x-this.Pm.x)*this.no),p=u.O.truncate(l),g=l=0;1>=g;g+=1)for(var y=0;1>=y;y+=1){var w=a.jG(d+g,p+y),S=this.xl.rR(w);S!=-1&&(this.pq[l]=S,this.xs[l]=w,l++)}for(d=l-1;1<=d;d--)for(S=this.pq[d],p=d-1;0<=p;p--)if(S==this.pq[p]){this.xs[p]=-1,d!=--l&&(this.xs[d]=this.xs[l],this.pq[d]=this.pq[l]);break}for(p=0;p<l;p++)this.EO(r,this.xs[p],A,this.pq[p],o)},a.prototype.EO=function(r,o,l,d,p){for(var g=new u.h;d!=-1;d=this.xl.ER(d)){var y=this.xl.ja(d);r==y||o!=-1&&this.g.Pa(y,this.yl)!=o||(this.g.Gc(y,g),a.Cv(l.x,l.y,g.x,g.y,this.Aw)&&p.add(d))}},a.prototype.Xm=function(r,o,l){var d=this.g.Pa(r,this.qo),p=this.g.Pa(o,this.qo);return d==-1&&(d=this.zd.Ph(),this.zd.addElement(d,r),this.g.Ra(r,this.qo,d)),p==-1?this.zd.addElement(d,o):this.zd.Hy(d,p),this.g.Ra(o,this.qo,-2),o=this.YT(r,o),l&&(l=this.kw.xE(r),this.g.Ra(r,this.yl,l)),o},a.WT=function(r,o,l){r.Nb(o),l=r;var d=new u.h;a.XT(r.D(),o.D(),d),l.Cb(d)},a.XT=function(r,o,l){var d=r.x;r.x!=o.x&&(d=(1*r.x+1*o.x)/2);var p=r.y;r.y!=o.y&&(p=(1*r.y+1*o.y)/2),l.ma(d,p)},a.prototype.YT=function(r,o){var l=new u.h;this.g.D(r,l);var d=new u.h;this.g.D(o,d);var p=this.g.cG(r),g=p+(o=this.g.cG(o)),y=0,w=l.x;l.x!=d.x&&(w=(l.x*p+d.x*o)/g,y++);var S=l.y;return l.y!=d.y&&(S=(l.y*p+d.y*o)/g,y++),0<y&&this.g.Cb(r,w,S),this.g.vX(r,g),y!=0},a.prototype.BO=function(){var r=this.g.fd,o=this.g.IF();for(this.Pm=o.mz(),o=Math.max(o.ca(),o.R())/2147483646,this.$v<o&&(this.$v=o,this.no=1/this.$v),this.zd=new u.au,this.zd.At(u.O.truncate(this.g.fd/3+1)),this.zd.fn(u.O.truncate(this.g.fd/3+1)),this.yl=this.g.Gd(),this.qo=this.g.Gd(),this.kw=new b(this.g,this.Pm,this.Aw,this.no,this.yl),this.xl=new u.dL(u.O.truncate(4*r/3),this.kw),this.xl.AW(this.g.fd),r=!1,o=this.g.ld;o!=-1;o=this.g.ue(o))for(var l=this.g.Ob(o);l!=-1;l=this.g.Rb(l))for(var d=this.g.Xa(l),p=0,g=this.g.Ja(l);p<g;p++){var y=this.kw.xE(d);this.g.Ra(d,this.yl,y),this.xl.addElement(d,y),d=this.g.U(d)}var w=new u.ia(0);for(w.Jb(10),o=this.g.ld;o!=-1;o=this.g.ue(o))for(l=this.g.Ob(o);l!=-1;l=this.g.Rb(l))for(d=this.g.Xa(l),p=0,g=this.g.Ja(l);p<g;p++){if(this.g.Pa(d,this.qo)!=-2)for(y=this.g.Pa(d,this.yl),this.xl.jd(d,y);this.DO(d,w),w.size!=0;){y=!1;for(var S=0,k=w.size;S<k;S++){var C=w.get(S),O=this.xl.ja(C);this.xl.vd(C),y=this.Xm(d,O,S+1==k)||y}if(r=r||y,w.clear(!1),!y)break}d=this.g.U(d)}return r&&this.vN(),this.kw=this.xl=null,this.g.Td(this.yl),this.g.Td(this.qo),r},a.prototype.vN=function(){for(var r=new u.h,o=this.zd.je;o!=-1;o=this.zd.qz(o)){var l=this.zd.rc(o);for(this.g.D(this.zd.ja(l),r),l=this.zd.lb(l);l!=-1;l=this.zd.lb(l))this.g.mf(this.zd.ja(l),r)}},a}();u.Yt=c}(B||(B={})),function(u){var A=function(){function b(c){c===void 0&&(c=null),this.yg=null,this.Pb=!1,this.yg=c===null?[]:c}return b.prototype.copyTo=function(c){if(c.Pb)throw u.i.fa("CompositeGeographicTransformation is read-only");for(var a=0;a<this.yg.length;a++)c.yg.push(this.yg[a].Of())},b.prototype.count=function(){return this.yg.length},b.prototype.add=function(c){if(this.Pb)throw u.i.fa("CompositeGeographicTransformation is read-only");this.yg.push(c.Of())},b.prototype.clear=function(){if(this.Pb)throw u.i.fa("CompositeGeographicTransformation is read-only");this.yg.length=0},b.prototype.remove=function(c){if(this.Pb)throw u.i.fa("CompositeGeographicTransformation is read-only");this.yg.splice(c,1)},b.prototype.jg=function(){var c=new b;return this.copyTo(c),c},b.prototype.Of=function(){return this.jg()},b.prototype.transform=function(c,a,r,o){if(c.length<a)throw u.i.fa("invalid Argument");var l=r;for(r=0;r<this.yg.length;r++){var d=this.yg[r];if(d.qm()!=null){var p=d.Un,g=p?1:0,y=p?d.qm().getGeogcs2():d.qm().getGeogcs1();if(y=l/(y=y.getUnit().getUnitFactor()),3552713678800501e-30<Math.abs(y-1))for(l=0;l<a;l++)c[l][0]*=y,c[l][1]*=y;u.MC.geogToGeog(d.qm(),a,c,null,g),l=(p?d.qm().getGeogcs1():d.qm().getGeogcs2()).getUnit().getUnitFactor()}}if(y=l/o,3552713678800501e-30<Math.abs(y-1))for(l=0;l<a;l++)c[l][0]*=y,c[l][1]*=y;return a},b.prototype.Nb=function(c){if(c==this)return!0;if(!(c instanceof b)||this.yg.length!=c.yg.length)return!1;for(var a=0;a<this.yg.length;a++)if(!this.yg[a].Nb(c.yg[a]))return!1;return!0},b.prototype.ix=function(){this.Pb=!0},b.prototype.toString=function(){for(var c="CGT ("+this.count()+") ",a=0,r=this.count();a<r;++a)c+=this.yg[a].toString()+", ";return 200<c.length?c.substring(0,197)+"... ("+c.length.toString()+" characters)":c},b.create=function(){return new b},b}();u.wC=A}(B||(B={})),function(u){var A,b=Math.PI,c=2*Math.PI,a=Math.PI/2,r=function(){function d(){}return d.TO=function(p,g){var y=new d;return y.x=p,y.y=g,y.type=0,y.Uh=0,y},d.al=function(p){var g=new d;return g.x=p.x,g.y=p.y,g.type=0,g.Uh=0,g},d.SO=function(p){var g=new d;return g.x=p.x,g.y=p.y,g.type=p.type,g.Uh=p.Uh,g},d.Pd=function(p,g,y){var w=new d;return w.x=p.x+g*Math.cos(y),w.y=p.y+g*Math.sin(y),w.type=p.type,w.Uh=p.Uh,w},d.Pu=function(p,g){var y=new d;return y.x=.5*(p.x+g.x),y.y=.5*(p.y+g.y),y.type=p.type,y.Uh=p.Uh,y},d.TE=function(p,g){var y=new d;return y.x=p.x+.001*(g.x-p.x),y.y=p.y+.001*(g.y-p.y),y.type=p.type,y.Uh=p.Uh,y},d}(),o=function(){};(A=u.fL||(u.fL={}))[A.Round=0]="Round",A[A.Bevel=1]="Bevel",A[A.Miter=2]="Miter",A[A.Square=3]="Square";var l=function(){function d(p){this.NA=this.Yb=this.wg=null,this.nd=p}return d.V=function(p,g,y,w,S,k){if(p==null||1>p.Db())throw u.i.N();return g==0||p.B()?p:((k=new d(k)).ko=p,k.Ka=g,k.qa=S,k.Ki=y,k.CA=w,k.Rx())},d.prototype.eM=function(){var p=this.ko,g=p.ac(),y=p.wc(),w=new u.h;return w.uc(y,g),w.normalize(),w.Hv(),w.scale(this.Ka),g.add(w),y.add(w),w=p.Ia(),p.Dc(g),p.Qc(y),w},d.prototype.dM=function(){var p=this.ko;if(0<this.Ka&&this.Ki!=2){var g=new u.Da;return g.ad(p,!1),this.ko=g,this.Rx()}return(p=new u.Fh(p.$)).W(this.Ka,this.Ka),p},d.prototype.tJ=function(p,g,y,w){return(g.x-p.x)*(w.x-y.x)+(g.y-p.y)*(w.y-y.y)},d.prototype.fc=function(p,g){if(g===void 0)this.Yb.push(p),this.gf++;else if(this.gf==0)this.fc(p);else{var y=this.Bw,w=this.wg[g==0?y-1:g-1],S=this.wg[g],k=this.tJ(w,S,this.Yb[this.gf-1],p);0<k?this.fc(p):0>k&&(0<this.tJ(w,S,S,this.Yb[this.gf-1])?(S=this.wg[g==0?y-2:g==1?y-1:g-2],y=r.Pd(w,this.Ka,Math.atan2(w.y-S.y,w.x-S.x)-a),this.Yb[this.gf-1]=y,this.Ki==1||this.Ki==2?(y=r.Pu(y,w),this.fc(y),y=r.Pd(w,this.Ka,this.Jv+a),(w=r.Pu(y,w)).type|=256,this.fc(w)):(y=r.Pd(w,this.Ka,this.Jv+a)).type|=256,this.fc(y),this.fc(p,g)):(y=r.Pd(S,this.Ka,this.Jv+a),this.fc(y),this.Ki==1||this.Ki==2?(y=r.Pu(y,S),this.fc(y),y=r.Pd(S,this.Ka,this.aA-a),(w=r.Pu(y,S)).type|=256,this.fc(w)):(y=r.Pd(S,this.Ka,this.aA-a)).type|=256,this.fc(y)))}},d.prototype.mE=function(){var p,g=this.Bw;this.gf=0;var y=.5*this.qa,w=0,S=0;for(p=0;p<g;p++){var k=this.wg[p],C=p==0?this.wg[g-1]:this.wg[p-1],O=p==g-1?this.wg[0]:this.wg[p+1],R=C.x-k.x,N=C.y-k.y,j=O.x-k.x,G=O.y-k.y,D=Math.atan2(N,R),V=Math.atan2(G,j);if(this.Jv=D,this.aA=V,p==0&&(w=D,S=V),R=R*G-j*N,N=V,V<D&&(V+=c),0<R*this.Ka)this.Ki==1||this.Ki==2?(D=r.Pd(k,this.Ka,D+a),this.fc(D),D=r.TE(k,D),this.fc(D),D=r.Pd(k,this.Ka,V-a),(k=r.TE(k,D)).type|=256,this.fc(k),this.fc(D)):(R=.5*(V-D),R=this.Ka/Math.abs(Math.sin(R)),D=r.Pd(k,R,.5*(D+V)),this.fc(D,p));else if(512&k.type){for(R=1-y/Math.abs(this.Ka),C=1,O=0>this.Ka?-b:b,-1<R&&1>R&&(.017453292519943295>(N=2*Math.acos(R))&&(N=.017453292519943295),1<(C=u.O.truncate(b/N+1.5))&&(O/=C)),N=D+a,D=r.Pd(k,this.Ka,N),p==0&&(D.type|=1024),this.fc(D,p),R=this.Ka/Math.cos(O/2),N+=O/2,(D=r.Pd(k,R,N)).type|=1024,this.fc(D);0<--C;)N+=O,(D=r.Pd(k,R,N)).type|=1024,this.fc(D);(D=r.Pd(k,this.Ka,V-a)).type|=1024,this.fc(D)}else if(this.Ki==1)D=r.Pd(k,this.Ka,D+a),this.fc(D,p),D=r.Pd(k,this.Ka,V-a),this.fc(D);else if(this.Ki==0)for(R=1-y/Math.abs(this.Ka),C=1,O=V-a-(D+a),-1<R&&1>R&&(.017453292519943295>(N=2*Math.acos(R))&&(N=.017453292519943295),1<(C=u.O.truncate(Math.abs(O)/N+1.5))&&(O/=C)),R=this.Ka/Math.cos(.5*O),N=D+a+.5*O,D=r.Pd(k,R,N),this.fc(D,p);0<--C;)N+=O,D=r.Pd(k,R,N),this.fc(D);else this.Ki==2?(R=C.x-k.x,N=C.y-k.y,.99999999<(C=(R*(j=O.x-k.x)+N*(G=O.y-k.y))/Math.sqrt(R*R+N*N)/Math.sqrt(j*j+G*G))?(D=r.Pd(k,1.4142135623730951*this.Ka,V-.25*b),this.fc(D,p),D=r.Pd(k,1.4142135623730951*this.Ka,V+.25*b),this.fc(D)):(C=Math.abs(this.Ka/Math.sin(.5*Math.acos(C))))>(O=Math.abs(this.CA*this.Ka))?(R=.5*(V-D),R=this.Ka/Math.abs(Math.sin(R)),D=r.Pd(k,R,.5*(D+V)),V=u.h.construct(D.x,D.y),D=u.h.construct(k.x,k.y),(k=new u.h).uc(V,D),(V=new u.h).HW(O/k.length(),k,D),D=(C-O)*Math.abs(this.Ka)/Math.sqrt(C*C-this.Ka*this.Ka),0<this.Ka?k.Hv():k.ar(),k.scale(D/k.length()),(D=new u.h).add(V,k),(C=new u.h).uc(V,k),D=r.al(D),this.fc(D,p),D=r.al(C),this.fc(D)):(R=.5*(V-D),R=this.Ka/Math.abs(Math.sin(R)),D=r.Pd(k,R,.5*(D+V)),this.fc(D,p))):(V=N,0<this.Ka?(V>D&&(V-=c),C=D-V<a):(V<D&&(V+=c),C=V-D<a),C?(N=0>(R=1.4142135623730951*this.Ka)?D+.25*b:D+.75*b,D=r.Pd(k,R,N),this.fc(D,p),N=0>R?V-.25*b:V-.75*b,D=r.Pd(k,R,N),this.fc(D)):(R=.5*(V-D),R=this.Ka/Math.abs(Math.sin(R)),V<D&&(V+=c),D=r.Pd(k,R,(D+V)/2),this.fc(D,p)))}return this.Jv=w,this.aA=S,this.fc(this.Yb[0],0),k=r.SO(this.Yb[this.gf-1]),this.Yb[0]=k,this.wW()},d.prototype.Au=function(p,g){if(!(2>g))for(var y=0;y<g;y++){var w=this.Yb[p+y];y!=0?this.NA.Ci(u.h.construct(w.x,w.y)):this.NA.Lt(u.h.construct(w.x,w.y))}},d.prototype.fM=function(p,g,y){var w=p.Ba(g),S=p.Vc(g);if(this.Yb=[],this.NA=y,p.dc(g)){for(g=p.Na(w);p.Na(S-1).qb(g);)S--;if(2<=S-w){for(this.Bw=S-w,this.wg=[],g=w;g<S;g++)this.wg.push(r.al(p.Na(g)));this.mE()&&this.Au(0,this.gf-1)}}else{for(g=p.Na(w);w<S&&p.Na(w+1).qb(g);)w++;for(g=p.Na(S-1);w<S&&p.Na(S-2).qb(g);)S--;if(2<=S-w){for(this.Bw=2*(S-w)-2,this.wg=[],(y=r.al(p.Na(w))).type|=1536,this.wg.push(y),g=w+1;g<S-1;g++)y=r.al(p.Na(g)),this.wg.push(y);for((y=r.al(p.Na(S-1))).type|=512,this.wg.push(y),g=S-2;g>=w+1;g--)(y=r.al(p.Na(g))).type|=1024,this.wg.push(y);if(this.mE())if(2<=this.Yb.length){for(p=-1,(S=!!(1024&this.Yb[this.gf-1].type))||(p=0),g=1;g<this.gf;g++)(w=!!(1024&this.Yb[g].type))?S||1<(S=g-1)-p+1&&this.Au(p,S-p+1):S&&(p=g-1),S=w;S||1<(S=this.gf-1)-p+1&&this.Au(p,S-p+1)}else p=0,S=this.gf-1,0<=p&&1<=S-p&&this.Au(p,S-p+1)}}this.wg=null,this.Bw=0,this.Yb=null,this.gf=0},d.prototype.wW=function(){for(var p=!1,g=0;g<this.gf;g++){var y=this.Yb[g];y.qh=g+1,y.sh=g-1,this.Yb[g]=y}for((y=this.Yb[0]).sh=this.gf-2,this.Yb[0]=y,(y=this.Yb[this.gf-2]).qh=0,this.Yb[this.gf-2]=y,g=y=0;g<this.gf;g++)if(256&this.Yb[y].type){var w=this.GP(y);if(w==-1){p=!0;break}y=w}else y=this.Yb[y].qh;return!p&&(this.QO(y),!0)},d.prototype.GP=function(p){for(var g,y,w=this.gf-1,S=p,k=1;k<=w-2;k++){g=S=this.Yb[S].qh,y=p;for(var C=1;C<=k;C++){if(y=this.Yb[y].sh,!(256&this.Yb[y].type||256&this.Yb[g].type)){var O=this.gS(y,g);if(O!=-1)return O}g=this.Yb[g].sh}}return-1},d.prototype.gS=function(p,g){var y=this.Yb[this.Yb[p].sh],w=this.Yb[p],S=this.Yb[this.Yb[g].sh],k=this.Yb[g];if(!this.JW(y,w,S,k))return-1;var C=new o;return this.xQ(y,w,S,k,C)&&!C.bE&&u.O.bK((w.x-y.x)*(k.y-S.y)-(w.y-y.y)*(k.x-S.x))!=u.O.bK(this.Ka)?(y=this.Yb[p].sh,C.an.type=w.type,C.an.qh=g,C.an.sh=y,this.Yb[p]=C.an,C.an=this.Yb[g],C.an.sh=p,this.Yb[g]=C.an,g):-1},d.prototype.JW=function(p,g,y,w){return Math.max(p.x,g.x)>=Math.min(y.x,w.x)&&Math.max(y.x,w.x)>=Math.min(p.x,g.x)&&Math.max(p.y,g.y)>=Math.min(y.y,w.y)&&Math.max(y.y,w.y)>=Math.min(p.y,g.y)},d.prototype.xQ=function(p,g,y,w,S){S.bE=!1;var k=(g.y-p.y)*(w.x-y.x)-(g.x-p.x)*(w.y-y.y),C=(y.y-p.y)*(g.x-p.x)-(y.x-p.x)*(g.y-p.y);if(0<=(k=k==0?2:C/k)&&1>=k){var O=k;if(k=(w.y-y.y)*(g.x-p.x)-(w.x-y.x)*(g.y-p.y),C=(p.y-y.y)*(w.x-y.x)-(p.x-y.x)*(w.y-y.y),0<=(k=k==0?2:C/k)&&1>=k)return S.an=r.TO(p.x+k*(g.x-p.x),p.y+k*(g.y-p.y)),S.an.Uh=y.Uh+O*(w.Uh-y.Uh),O!=0&&O!=1||k!=0&&k!=1||(S.bE=!0),S.VY=k,S.WY=O,!((O==0||O==1)&&0<k&&1>k||(k==0||k==1)&&0<O&&1>O)}return!1},d.prototype.QO=function(p){for(;this.Yb[p].sh<p;)p=this.Yb[p].sh;var g=0,y=p;do y=this.Yb[y],this.Yb[g]=y,y=y.qh,g++;while(y!=p);this.Yb[g]=this.Yb[0],this.gf=g+1},d.prototype.$C=function(p){var g=this.ko,y=g.Ga();if(y!=null){y.Zi();for(var w=-1;y.$a();)w++,this.fM(g,w,p)}},d.prototype.Rx=function(){var p=this.ko.getType();return p==322?this.eM():p==197?this.dM():u.aa.yd(p)?((p=new u.Ta).oc(this.ko,!0),this.ko=p,this.Rx()):p==1607?(p=new u.Ta,this.$C(p),p):p==1736?(p=new u.Da,this.$C(p),p):null},d}();u.IK=l}(B||(B={})),function(u){var A=function(){function r(o){this.qk=o}return r.prototype.D=function(o,l){this.qk.g.D(o,l)},r.prototype.vd=function(o){var l=this.qk.Fa.ja(o);this.qk.Fa.vd(o,-1),this.qk.g.pd(l,!1)},r}(),b=function(){function r(o){this.qk=o}return r.prototype.D=function(o,l){this.qk.IT.D(o,l)},r.prototype.vd=function(o){this.qk.Fa.vd(o,-1)},r}(),c=function(){function r(o){this.qk=o}return r.prototype.D=function(o,l){l.L(this.qk.LT[o])},r.prototype.vd=function(o){this.qk.Fa.vd(o,-1)},r}(),a=function(){function r(o){o===void 0?(this.Fa=new u.Yj,this.Fa.De(20),this.g=new u.gd,this.xT=this.g.Ig(550),this.Ss=this.g.vf(this.xT,-1),this.Xh=new A(this)):o instanceof Array?(this.Fa=new u.Yj,this.Fa.De(20),this.LT=o,this.Xh=new c(this)):(this.Fa=new u.Yj,this.Fa.De(20),this.IT=o,this.Xh=new b(this))}return r.prototype.Ib=function(o){var l=o.getType();if(u.Gx.xj(l))this.jN(o);else if(u.Vk.yd(l))this.oN(o);else if(l==197)this.gN(o);else{if(l!=33)throw u.i.N("invalid shape type");this.nN(o)}},r.prototype.cR=function(){var o=new u.Sa,l=this.Fa.rc(-1),d=new u.Da(this.g.ht);for(this.g.Vi(this.Fa.ja(l),o),d.nf(o),l=this.Fa.lb(l);l!=-1;l=this.Fa.lb(l))this.g.Vi(this.Fa.ja(l),o),d.lineTo(o);return d},r.RO=function(o){var l=new r(o),d=o.I(),p=1,g=new u.h,y=new u.h,w=new u.h;for(o.D(0,g);o.D(p,y),y.Rz(g)&&p<d-1;)p++;for(l.Fa.addElement(0,-1),l.Fa.xn(p),d=p+1;d<o.I();d++)o.D(d,w),(p=l.pC(w))!=-1&&l.Fa.Sj(p,d);for(w=new u.Sa,p=l.Fa.rc(-1),d=new u.Da(o.description),o.ve(l.Fa.ja(p),w),d.nf(w),p=l.Fa.lb(p);p!=-1;p=l.Fa.lb(p))o.ve(l.Fa.ja(p),w),d.lineTo(w);return d},r.construct=function(o,l,d){for(var p=new r(o),g=1,y=o[0];o[g].Rz(y)&&g<l-1;)g++;for(p.Fa.addElement(0,-1),p.Fa.xn(g),g+=1;g<l;g++)(y=p.pC(o[g]))!=-1&&p.Fa.Sj(y,g);for(o=0,l=p.Fa.rc(-1);l!=-1;l=p.Fa.lb(l))d[o++]=p.Fa.ja(l);return o},r.JG=function(o,l){var d=o.Ba(l),p=o.Vc(l);if(l=!o.dc(l)&&o.Nn(l),o=o.ub(0),p*=2,l&&(p-=2),6>p-(d*=2))return!0;l=new u.h;var g=new u.h,y=new u.h;o.tc(d,l),o.tc(d+2,g),o.tc(d+4,y);var w=r.Wu(g,y,l);if(w.ps()||!r.um(w.value()))return!1;var S=u.h.construct(g.x,g.y),k=new u.h;for(d+=6;d<p;d+=2)if(k.L(g),g.L(y),o.tc(d,y),(w=r.Wu(g,y,l)).ps()||!r.um(w.value())||(w=r.Wu(S,y,l)).ps()||!r.um(w.value())||(w=r.Wu(g,y,k)).ps()||!r.um(w.value()))return!1;return!0},r.prototype.jN=function(o){for(var l=new u.Sa,d=new u.h,p=0;p<o.I();p++){o.D(p,d);var g=this.Cr(d);if(g!=-1){o.ve(p,l);var y=this.g.fc(this.Ss,l);this.Fa.Sj(g,y)}}},r.prototype.gN=function(o){for(var l=new u.Sa,d=new u.h,p=0;4>p;p++){o.mB(p,d);var g=this.Cr(d);if(g!=-1){o.Hf(p,l);var y=this.g.fc(this.Ss,l);this.Fa.Sj(g,y)}}},r.prototype.oN=function(o){var l=new u.Sa,d=o.ac();if((d=this.Cr(d))!=-1){o.To(l);var p=this.g.fc(this.Ss,l);this.Fa.Sj(d,p)}d=o.wc(),(d=this.Cr(d))!=-1&&(o.Po(l),o=this.g.fc(this.Ss,l),this.Fa.Sj(d,o))},r.prototype.nN=function(o){var l=o.D();(l=this.Cr(l))!=-1&&(o=this.g.fc(this.Ss,o),this.Fa.Sj(l,o))},r.prototype.Cr=function(o){var l=-1;if(this.Fa.size(-1)==0)return this.Fa.addElement(-4,-1);if(this.Fa.size(-1)==1){var d=this.g.Na(this.Fa.ja(this.Fa.rc(-1)));return o.Rz(d)||(l=this.Fa.xn(-5)),l}return this.pC(o)},r.prototype.pC=function(o){var l=-1;do{var d=this.Fa.rc(-1),p=this.Fa.Fc(-1),g=this.Fa.ja(d),y=this.Fa.ja(p),w=new u.h,S=new u.h;if(this.Xh.D(g,w),this.Xh.D(y,S),g=u.h.Uq(S,o,w),r.um(g))l=this.Fa.xn(-1),(w=this.nC(o,p,d))!=d&&this.oC(o,d,this.Fa.we(w));else if(r.CG(g)){S=this.Fa.sv(-1);var k=this.Fa.rc(-1),C=this.Fa.Fc(-1);for(g=new u.h,y=new u.h;k!=this.Fa.we(C);){var O=this.Fa.ja(S);this.Xh.D(O,g),O=u.h.Uq(g,o,w),r.CG(O)?(C=S,S=this.Fa.ll(S)):(k=S,S=this.Fa.Xp(S))}if(S=C,w=k,O=this.Fa.ja(S),k=this.Fa.ja(w),this.Xh.D(O,g),this.Xh.D(k,y),w!=d&&(g=u.h.Uq(y,o,g),!r.um(g)))continue;l=this.Fa.zu(w,S,-2,!1),this.oC(o,S,p),this.nC(o,w,d)}else this.sb==null&&(this.sb=new u.yb),this.sb.Dc(S),this.sb.Qc(w),0>(w=this.sb.fe(o,!0))?(w=this.Fa.we(p),this.Fa.vd(p,-1),l=this.Fa.xn(-3),this.nC(o,w,d)):1<w&&(w=this.Fa.lb(d),this.Fa.vd(d,-1),l=this.Fa.zu(-1,w,-3,!1),this.oC(o,w,p))}while(!1);return l},r.prototype.oC=function(o,l,d){if(l!=d){var p=this.Fa.ja(l),g=this.Fa.lb(l),y=new u.h,w=new u.h;for(this.Xh.D(p,y);l!=d&&2<this.Fa.size(-1)&&(this.Xh.D(this.Fa.ja(g),w),p=u.h.Uq(w,o,y),!r.um(p));)p=l,l=g,y.L(w),g=this.Fa.lb(l),this.Xh.vd(p)}},r.prototype.nC=function(o,l,d){if(l==d)return d;var p=this.Fa.ja(l),g=this.Fa.we(l),y=new u.h,w=new u.h;for(this.Xh.D(p,y);l!=d&&2<this.Fa.size(-1)&&(this.Xh.D(this.Fa.ja(g),w),p=u.h.Uq(y,o,w),!r.um(p));)p=l,l=g,y.L(w),g=this.Fa.we(l),this.Xh.vd(p);return l},r.Wu=function(o,l,d){var p=new u.Wb;p.set(l.x),p.sub(o.x);var g=new u.Wb;g.set(d.y),g.sub(o.y);var y=new u.Wb;return y.set(l.y),y.sub(o.y),(l=new u.Wb).set(d.x),l.sub(o.x),p.Ag(g),y.Ag(l),p.sub(y),p},r.um=function(o){return 0>o},r.CG=function(o){return 0<o},r}();u.Zt=a}(B||(B={})),function(u){var A=function(){function b(c){this.g=null,this.tH=!0,this.nd=c}return b.zU=function(c,a,r){return c=u.ta.Er(c),u.Yt.Cv(a.Lg(),a.ih(),r.Lg(),r.ih(),u.lc.ox(c))},b.CO=function(c,a){var r=new u.Sa;return u.Yt.WT(c,a,r),r},b.V=function(c,a,r,o){return(r=new b(r)).g=c,r.qa=a,r.tH=o,r.EM()},b.prototype.nM=function(c){return u.Yt.iQ(this.g,c)},b.prototype.sM=function(c){return u.$t.V(this.g,c,this.nd)},b.prototype.EM=function(){var c=this.qa,a=u.ta.Er(c),r=1.00001*(c=u.ta.rN(c));c*=1.000001;for(var o=!1,l=30<this.g.fd+10?1e3:(this.g.fd+10)*(this.g.fd+10),d=0,p=this.g.jS();;d++){if(d>l)throw u.i.fa("Internal Error: max number of iterations exceeded");var g=this.nM(a);if(o=o||g,this.tH&&(g=this.g.Gp(a,!0,!1)!=0,o=o||g),g=!1,(d==0||p||u.$t.kI(!0,this.g,c,null,this.nd))&&(g=this.sM(r),o=o||g),!g)break;u.mp.zp(this.nd)}return o},b}();u.Tk=A}(B||(B={})),function(u){var A=function(){function c(a){this.$d=this.Mc=null,this.Ys=0,this.Ub=a,this.cA=!0}return c.prototype.uv=function(a,r){var o=this.g.bc(a);if(o==null){if(!this.g.ed(a,r))return null;o=r}return o},c.prototype.Xq=function(){var a;a===void 0&&(a=!1),this.Ys++,!a&&4095&this.Ys||(this.Ys=0,u.mp.zp(this.Ub))},c.prototype.nP=function(){var a=this.g.Yq(!1),r=!1,o=new u.yb,l=new u.yb,d=new u.l;d.Oa();var p=new u.l;p.Oa();for(var g=new u.Sa,y=new u.TC,w=a.next();w!=-1;w=a.next()){u.mp.zp(this.Ub);var S=null,k=!1;if(!u.aa.Rn(this.g.ic(a.ck))){if((S=this.uv(w,o))==null)continue;if(S.A(d),d.W(this.qa,this.qa),S.Bi(this.qa)){if(!S.Bi(0))continue;k=!0,S=null}}var C=this.g.Yq(a),O=C.next();for(O!=-1&&(O=C.next());O!=-1;O=C.next()){var R=null,N=!1;if(!u.aa.Rn(this.g.ic(C.ck))){if((R=this.uv(O,l))==null)continue;if(R.A(p),R.Bi(this.qa)){if(!R.Bi(0))continue;N=!0,R=null}}var j=0,G=0;if(S!=null&&R!=null)d.HG(p)&&(y.Oo(S),y.Oo(R),y.Ea(this.qa,!1),0<(j=y.ol(0))+(G=y.ol(1))&&(this.g.jr(w,y,0,!0),this.g.jr(O,y,1,!0)),y.clear());else if(S!=null){var D=new u.h;if(this.g.D(O,D),d.contains(D)){if(y.Oo(S),this.g.Vi(O,g),y.Kz(this.qa,g,!1),0<(j=y.ol(0)))if(this.g.jr(w,y,0,!0),N){for(N=-1,D=this.g.U(O);D!=-1&&D!=O&&(N=D,(R=this.uv(D,l))!=null&&R.Bi(0));D=this.g.U(D));for(D=O;D!=-1&&(this.g.Dh(D,y.Bf),D!=N);D=this.g.U(D));}else this.g.Dh(O,y.Bf);y.clear()}}else{if(R==null)continue;if(D=new u.h,this.g.D(w,D),p.W(this.qa,this.qa),p.contains(D)){if(y.Oo(R),this.g.Vi(w,g),y.Kz(this.qa,g,!1),0<(G=y.ol(0)))if(this.g.jr(O,y,0,!0),k){for(N=-1,D=this.g.U(w);D!=-1&&D!=w&&(N=D,(R=this.uv(D,l))!=null&&R.Bi(0));D=this.g.U(D));for(D=w;D!=-1&&(this.g.Dh(D,y.Bf),D!=N);D=this.g.U(D));}else this.g.Dh(w,y.Bf);y.clear()}}if(j+G!=0){if(j!=0){if((S=this.g.bc(w))==null){if(!this.g.ed(w,o))continue;S=o,o.A(d)}else S.A(d);if(S.Bi(this.qa))break}r=!0}}}return r},c.prototype.oP=function(){return this.QU()},c.prototype.QU=function(){return new u.RC().PX(this.g,this.qa)},c.prototype.lI=function(){var a=!1;this.Mc==null&&(this.Mc=new u.Yj);var r=new u.ia(0);r.Jb(this.g.fd+1);for(var o=this.g.Yq(),l=o.next();l!=-1;l=o.next())r.add(l);this.g.nx(r,r.size),r.add(-1),o=this.g.Gd(),l=this.g.Gd(),this.$d=new u.UC(this.g,this.qa,!this.cA),this.Mc.Vo(this.$d);var d=new u.ia(0),p=new u.ia(0),g=0;new u.h;var y=this.g.td;this.g.vb.mc();for(var w,S,k=this.g.vb.za[0].o,C=r.get(g++);C!=-1;){var O=w=k[2*(S=y.T(C,0))],R=S=k[2*S+1];do{var N=y.T(C,2),j=y.T(C,1);if(N!=-1){var G=y.T(N,0),D=k[2*G];0>(R<(G=k[2*G+1])?-1:R>G?1:O<D?-1:O>D?1:0)&&(p.add(C),p.add(N))}j!=-1&&(D=k[2*(G=y.T(j,0))],0>(R<(G=k[2*G+1])?-1:R>G?1:O<D?-1:O>D?1:0)&&(p.add(j),p.add(j))),(D=this.g.Pa(C,o))!=-1&&(d.add(D),this.g.Ra(C,o,-1)),(D=this.g.Pa(C,l))!=-1&&(d.add(D),this.g.Ra(C,l,-1)),(C=r.get(g++))!==-1&&(O=k[2*(R=y.T(C,0))],R=k[2*R+1])}while(C!=-1&&O===w&&R===S);for(O=d.size==1&&p.size==2,D=R=-1,N=0,j=d.size;N<j;N++){G=d.get(N);var V=this.Mc.we(G);if(V==-1||d.hG(V)||(R=V),(G=this.Mc.lb(G))==-1||d.hG(G)||(D=G),R!=-1&&D!=-1)break}for(this.$d.$J(S,w),N=0,j=d.size;N<j;N++)G=d.get(N),this.Mc.vd(G,-1);if(d.clear(!1),!O&&R!=-1&&D!=-1&&this.qO(R,D)){a=!0,this.Ni=this.$d.rm();break}for(N=0,j=p.size;N<j;N+=2){if(S=p.get(N),w=p.get(N+1),O?(S=this.Mc.zu(R,D,S,!0),O=!1):S=this.Mc.addElement(S,-1),this.$d.rg){this.Ni=this.$d.rm(),a=!0;break}this.g.Pa(w,o)==-1?this.g.Ra(w,o,S):this.g.Ra(w,l,S)}if(a)break;p.Bh(0)}return this.g.Td(o),this.g.Td(l),a},c.prototype.qO=function(a,r){return this.$d.compare(this.Mc,this.Mc.ja(a),r),a=this.$d.rg,this.$d.Kr(),a},c.yE=function(a){for(var r=a.ld;r!=-1;r=a.ue(r))if(u.aa.Hc(a.ic(r)))return!0;return!1},c.fQ=function(a,r,o,l){return!!c.yE(a)&&((r=new c(l)).g=a,r.qa=o,15>a.fd?a=r.nP():r.oP())},c.V=function(a,r,o){return c.fQ(a,a.IF(),r,o)},c.kI=function(a,r,o,l,d){if(!c.yE(r))return!1;var p=new c(d);if(p.g=r,p.qa=o,p.cA=a,p.lI())return l!=null&&l.Wt(p.Ni),!0;var g=new u.Dd;return g.$B(),r.Oc(g),(p=new c(d)).g=r,p.qa=o,p.cA=a,a=p.lI(),g.$B(),r.Oc(g),!!a&&(l!=null&&l.Wt(p.Ni),!0)},c.Ml=function(a,r){return!(16>(a=a.I()))&&2*a+Math.log(a)*Math.LOG10E/Math.log(2)*r<1*a*r},c.lP=function(a,r,o,l){var d=r.getType();if(u.aa.Hc(d))return new c(l).mP(a,r,o);throw u.i.fa("crack_A_with_B")},c.prototype.mP=function(a,r,o){var l=new u.l;a.xc(l);var d=new u.l;if(r.xc(d),d.W(o,o),!d.isIntersecting(l))return a;var p=a.Bb,g=null;p!=null&&(g=p.Fb),c.Ml(a,a.I())&&(g=u.ta.jj(a,d));var y=g!=null?g.getIterator():null,w=r.Ga();r=a.Ga();var S=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(d=[];w.$a();)for(;w.Ha();){var k=w.ha();if(g!=null){for(y.Uo(k,o),p=y.next();p!=-1;p=y.next())if(this.Xq(),r.Vb(g.ja(p),-1),r.Ha()){var C=(p=r.ha()).Ea(k,null,S,null,o);for(p=0;p<C;++p){var O=S[p];if(O!=0&&O!=1){var R=r.wb(),N=new b;N.t=O,N.index=R,d.push(N)}}}}else{var j=new u.l;if(k.xc(j),j.W(o,o),l.isIntersecting(j)){for(r.Zi();r.$a();)for(;r.Ha();)if(this.Xq(),p=r.ha(),O=new u.l,p.xc(O),O.isIntersecting(j))for(C=p.Ea(k,null,S,null,o),p=0;p<C;++p)(O=S[p])!=0&&O!=1&&(R=r.wb(),(N=new b).t=O,N.index=R,d.push(N))}}}if(d.length==0)return a;for(d=d.sort(b.Ey),a=a.Ia(),r.Zi();r.$a()&&!r.Ha(););for(o=r.ha(),l=new u.ig,g=-1,p=0,y=d.length;p<y;){for(S=d[p].index,w=p+1;w<y&&d[w].index==S;)++w;for(;r.wb()<S;){if(this.Xq(),k=r.Ha(),O=r.gb,(j=k||!r.On()||r.Pn())&&a.oc(o,g!=O),g=O,!k)for(;r.$a()&&!r.Ha(););o=r.ha()}for(S=0;p<w;p++)(O=d[p].t)!=S&&(o.ah(S,O,l),S=O,O=r.gb,a.oc(l.get(),g!=O),g=O);if((j=(k=r.Ha())||!r.On()||r.Pn())&&(o.ah(S,1,l),a.oc(l.get(),!1)),k)o=r.ha();else{for(;r.$a()&&!r.Ha(););o=r.Ha()?r.ha():null}p=w}for(o!=null&&(O=r.gb,(j=(k=r.Ha())||!r.On()||r.Pn())&&a.oc(o,g!=O),g=O),k=r.Ha();;){if(!k){for(;r.$a()&&!(k=r.Ha()););if(!k)break}o=r.ha(),O=r.gb,(j=(k=r.Ha())||!r.On()||r.Pn())&&a.oc(o,g!=O),g=O}return a},c}();u.$t=A;var b=function(){function c(){}return c.Ey=function(a,r){return a.index==r.index?a.t>r.t?1:a.t<r.t?-1:0:a.index>r.index?1:-1},c}()}(B||(B={})),function(u){var A;(A=u.KK||(u.KK={}))[A.Left=0]="Left",A[A.Right=1]="Right",A[A.Coincident=2]="Coincident",A[A.Undefined=3]="Undefined",A[A.Uncut=4]="Uncut";var b=function(r,o,l,d,p,g,y,w,S,k,C){this.X=r,this.bt=o,this.Ns=l,this.tg=d,this.Lm=k,this.Al=C};u.uY=b;var c=function(){function r(o,l){this.JH=o,this.Hi=l}return r.prototype.qM=function(o,l){var d=new u.h;this.Hi.D(o,d);var p=new u.h;return this.Hi.D(l,p),(d=d.compare(p))!=0?d:(o=this.Hi.Pa(o,this.JH))<(l=this.Hi.Pa(l,this.JH))?-1:o==l?0:1},r}(),a=function(r,o,l,d,p,g,y,w,S){this.tg=r,this.Ns=o,this.OA=l,this.UH=d,this.Ei=p,this.Al=g,this.Lm=y,this.VH=w,this.OT=S};u.tY=a,u.LK=function(){function r(){}return r.JK=function(o,l,d,p,g,y){if(l.B())o=new b(l,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),g.push(o);else if(d.B())o=new b(l,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),g.push(o);else{var w=new u.gd;if(w.Ib(l),w.Ib(d),u.Tk.V(w,p,y,!0),w.fd==0)o=new b(l.Ia(),4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),g.push(o);else{for(l=0,d=w.Gd(),p=w.ld;p!=-1;p=w.ue(p))for(y=w.Ob(p);y!=-1;y=w.Rb(y))for(var S=w.Xa(y),k=0,C=w.Ja(y);k<C;S=w.U(S),k++)w.Ra(S,d,l++);l=r.HM(d,w),r.cM(o,l,w,g)}}},r.HM=function(o,l){for(var d=l.fd,p=new u.ia(0),g=l.ld;g!=-1;g=l.ue(g))for(var y=l.Ob(g);y!=-1;y=l.Rb(y))for(var w=l.Xa(y),S=0,k=l.Ja(y);S<k;w=l.U(w),S++)p.add(w);var C=new c(o,l);p.Vd(0,d,function(ye,ge){return C.qM(ye,ge)}),o=[];var O=[],R=l.Gd(),N=l.Gd();g=l.ld,y=l.ue(g),k=new u.h;var j=new u.h,G=p.get(0),D=l.bd(G),V=l.Qf(D);l.D(G,k);var Z=1;for(w=0;Z<d-1;){var q=!1;for(S=Z;S<d;S++)if(S!=w){var ne=p.get(S),ee=l.bd(ne),he=l.Qf(ee);if(l.D(ne,j),!k.qb(j))break;V==g&&he==y&&(q=r.uM(R,N,l,o,O,D,G,ee,ne))}if(q||w==Z-1){if(q&&w==Z-1&&Z--,++w==d)break;G=p.get(w),D=l.bd(G),V=l.Qf(D),l.D(G,k)}q||(Z=w+1)}for(d=[],g=l.ld;g!=-1;g=l.ue(g))for(y=l.Ob(g);y!=-1;y=l.Rb(y))for(p=l.Xa(y),S=0,k=l.Ja(y);S<k;p=l.U(p),S++){if(0<=(w=l.Pa(p,N)))for(;w<O.length&&O[w].tg==p;)d.push(O[w++]);if(0<=(w=l.Pa(p,R)))for(;w<o.length&&o[w].tg==p;)d.push(o[w++])}return l.Td(R),l.Td(N),d},r.uM=function(o,l,d,p,g,y,w,S,k){var C=d.rj(y),O=d.rj(S),R=d.Xa(y),N=d.Xa(S),j=d.Ma(w),G=d.Ma(k),D=!1,V=!1,Z=!1,q=!1;return w!=R&&(k!=N&&(D=r.vM(o,d,p,y,j,S,G)),k!=O&&(V=r.wM(o,d,p,y,j,S,k))),w!=C&&(k!=N&&(Z=r.xM(l,d,g,y,w,S,G,R)),k!=O&&(q=r.yM(l,d,g,y,w,S,k,R))),D&&V&&Z?(o=p.length-1,g[q?g.length-2:g.length-1].Ei==2&&(p[o-1]=p[o],--p.length)):D&&V&&q&&g[g.length-1].Ei==2&&(g=p[p.length-1],--p.length,d.Pa(g.tg,o)==p.length&&d.Ra(g.tg,o,-1)),D||V||Z||q},r.vM=function(o,l,d,p,g,y,w){var S=new u.yb,k=new u.yb,C=[0,0],O=[0,0],R=l.bc(g);return R==null&&(l.ed(g,S),R=S),(S=l.bc(w))==null&&(l.ed(w,k),S=k),2>(R=R.Ea(S,null,C,O,0))&&(p=new a(g,p,C[0],NaN,R,w,y,O[0],NaN),d.push(p),0>(p=l.Pa(g,o))&&l.Ra(g,o,d.length-1)),!0},r.wM=function(o,l,d,p,g,y,w){var S=new u.yb,k=new u.yb,C=[0,0],O=[0,0],R=l.bc(g);return R==null&&(l.ed(g,S),R=S),(S=l.bc(w))==null&&(l.ed(w,k),S=k),2>(R=R.Ea(S,null,C,O,0))&&(p=new a(g,p,C[0],NaN,R,w,y,O[0],NaN),d.push(p),0>(p=l.Pa(g,o))&&l.Ra(g,o,d.length-1),!0)},r.xM=function(o,l,d,p,g,y,w,S){var k=new u.yb,C=new u.yb,O=[0,0],R=[0,0],N=l.bc(g);return N==null&&(l.ed(g,k),N=k),(k=l.bc(w))==null&&(l.ed(w,C),k=C),(N=N.Ea(k,null,O,R,0))==2?(p=new a(g,p,O[0],O[1],N,w,y,R[0],R[1]),d.push(p),0>(p=l.Pa(g,o))&&l.Ra(g,o,d.length-1),!0):(C=!1,g==S&&(p=new a(g,p,O[0],NaN,N,w,y,R[0],NaN),d.push(p),0>(p=l.Pa(g,o))&&l.Ra(g,o,d.length-1),C=!0),C)},r.yM=function(o,l,d,p,g,y,w,S){var k=new u.yb,C=new u.yb,O=[0,0],R=[0,0],N=l.bc(g);return N==null&&(l.ed(g,k),N=k),(k=l.bc(w))==null&&(l.ed(w,C),k=C),(N=N.Ea(k,null,O,R,0))==2?(p=new a(g,p,O[0],O[1],N,w,y,R[0],R[1]),d.push(p),0>(p=l.Pa(g,o))&&l.Ra(g,o,d.length-1),!0):(C=!1,g==S&&(p=new a(g,p,O[0],NaN,N,w,y,R[0],NaN),d.push(p),0>(p=l.Pa(g,o))&&l.Ra(g,o,d.length-1),C=!0),C)},r.cM=function(o,l,d,p){var g=[];g[0]=new u.h,g[1]=new u.h,g[2]=new u.h,g[3]=new u.h;var y=new u.h,w=new u.h,S=new u.h,k=new u.h,C=null;p!=null&&(C=new u.ig).Or();var O=0,R=null,N=new u.yb;new u.yb;for(var j=d.Ob(d.ld);j!=-1;j=d.Rb(j)){for(var G=4,D=-1,V=-1,Z=-1,q=-1,ne=NaN,ee=!0,he=!1,ye=!0,ge=!0,Le=!0,Te=0,Je=j,We=0,Oe=d.Xa(j),Dt=d.Ja(j),Ri=0;Ri<Dt;Oe=d.U(Oe),Ri++){var Gt=d.bc(Oe);if(Gt==null){if(!d.ed(Oe,N))continue;Gt=N}V==-1&&(V=Oe);for(var bt=0;O<l.length&&Oe==l[O].tg;){D=l[O].Ns;var wt=l[O].tg,ot=l[O].OA,Xt=l[O].Lm,rt=l[O].Al,Jr=l[O].VH;if(l[O].Ei==2){if(he||(Je=D,V=wt,We=ot,Z=Xt,q=rt,ne=Jr,G=2,p!=null?R=new u.Ta:Te=0,Le=!1,ge=!0),ot=l[O].UH,Jr=l[O].OT,p!=null?(Gt.ah(bt,l[O].UH,C),R.oc(C.get(),ge)):Te++,bt=ot,he=!0,ge=ee=!1,O+1==l.length||l[O+1].Ei!=2||l[O+1].tg==wt&&l[O+1].OA!=bt){if(p!=null){var pt=new b(R,2,D,wt,ot,G,Je,V,We,Xt,rt);p.push(pt)}else null.add(Te);Je=D,V=wt,We=ot,Z=Xt,q=rt,ne=Jr,G=2,he=ee=!1,ge=Le=!0}}else{var Cn=d.U(wt);if(O<l.length-1&&l[O+1].tg==Cn&&l[O+1].Al==rt&&l[O+1].Ei==2)ot!=bt&&(Le&&(p!=null?R=new u.Ta:Te=0),ee=0<O&&l[O-1].Ns==D?G==1?0:G==0?1:3:3,p!=null?(Gt.ah(bt,ot,C),R.oc(C.get(),ge),pt=new b(R,ee,D,wt,ot,G,Je,V,We,Xt,rt),p.push(pt)):(Te++,null.add(Te)),bt=ot,Je=D,V=wt,We=ot,Z=Xt,q=rt,ne=Jr,G=ee,ee=ye=!1,ge=Le=!0);else if(!r.CM(o,d,l,O,y,w)){r.zM(d,l,O,j,Oe,S,k);var kt=!1;if(Cn=!1,pt=!0,!(y.qb(S)||w.qb(S)||y.qb(k)||w.qb(k))){g[0].L(y),g[1].L(w),g[2].L(S),g[3].L(k),g.sort(u.h.nu);var pp=g[0],fp=g[1],gp=g[2],zn=g[3];pp.qb(y)?fp.qb(w)?o?(Cn=kt=!0,pt=!1):kt=!1:zn.qb(w)?o?pt=Cn=kt=!0:kt=!1:(kt=!0,pt=fp.qb(S)):fp.qb(y)?gp.qb(w)?o?(Cn=kt=!0,pt=!1):kt=!1:pp.qb(w)?o?pt=Cn=kt=!0:kt=!1:(kt=!0,pt=gp.qb(S)):gp.qb(y)?zn.qb(w)?o?(Cn=kt=!0,pt=!1):kt=!1:fp.qb(w)?o?pt=Cn=kt=!0:kt=!1:(kt=!0,pt=zn.qb(S)):pp.qb(w)?o?(Cn=kt=!0,pt=!1):kt=!1:gp.qb(w)?o?pt=Cn=kt=!0:kt=!1:(kt=!0,pt=pp.qb(S))}kt&&(kt=Oe==wt,(ot!=bt||kt&&bt==0)&&(Le&&(p!=null?R=new u.Ta:Te=0),p!=null?(Gt.ah(bt,ot,C),R.oc(C.get(),ge)):Te++),pt?G!=1?((ot!=bt||kt&&bt==0)&&(p!=null?(pt=new b(R,1,D,wt,ot,G,Je,V,We,Xt,rt),p.push(pt)):null.add(Te)),Cn?(O>=l.length-2||l[O+2].Ns!=D)&&(G=0):G=1):((ot!=bt||kt&&bt==0)&&(p!=null?(pt=new b(R,3,D,wt,ot,G,Je,V,We,Xt,rt),p.push(pt)):null.add(Te)),G=1):G!=0?((ot!=bt||kt&&bt==0)&&(p!=null?(pt=new b(R,0,D,wt,ot,G,Je,V,We,Xt,rt),p.push(pt)):null.add(Te)),Cn?(O>=l.length-2||l[O+2].Ns!=D)&&(G=1):G=0):((ot!=bt||kt&&bt==0)&&(p!=null?(pt=new b(R,3,D,wt,ot,G,Je,V,We,Xt,rt),p.push(pt)):null.add(Te)),G=0),(ot!=bt||kt&&bt==0)&&(bt=ot,Je=D,V=wt,We=ot,Z=Xt,q=rt,ne=Jr,ee=ye=!1,ge=Le=!0))}}O++}bt!=1&&(Le&&(p!=null?R=new u.Ta:Te=0),p!=null?(Gt.ah(bt,1,C),R.oc(C.get(),ge)):Te++,ge=Le=!1,ye=!0)}ye&&(ot=1,wt=d.rj(j),wt=d.Ma(wt),rt=Xt=-1,Jr=NaN,ee?p!=null?(pt=new b(R,4,D,wt,ot,G,Je,V,We,Xt,rt),p.push(pt)):null.add(Te):(ee=G==1?0:G==0?1:3,p!=null?(pt=new b(R,ee,D,wt,ot,G,Je,V,We,Xt,rt),p.push(pt)):null.add(Te)))}},r.CM=function(o,l,d,p,g,y){var w=d[p].VH;if(w==1)return r.AM(o,l,d,p,g,y);if(w==0)return r.BM(o,l,d,p,g,y);throw u.i.Qa()},r.AM=function(o,l,d,p,g,y){var w=new u.yb,S=d[p].tg,k=d[p].Lm,C=d[p].Al,O=-1,R=-1,N=-1,j=-1;if(!o&&0<p){var G=d[p-1];O=G.tg,R=G.Lm,N=G.Al,j=G.Ei}var D=-1,V=-1,Z=-1,q=-1;p<d.length-1&&(D=(G=d[p+1]).tg,V=G.Lm,Z=G.Al,q=G.Ei);var ne=l.U(S);return G=l.U(C),o?p==d.length-1||D!=S||V!=k||Z!=G||q==2?((o=l.bc(C))==null&&(l.ed(C,w),o=w),y.L(o.kg()),g.mt(y),y.normalize(),g.normalize(),!1):((o=l.bc(C))==null&&(l.ed(C,w),o=w),g.L(o.kg()),(o=l.bc(G))==null&&(l.ed(G,w),o=w),y.L(o.kg()),g.Sq(),y.normalize(),g.normalize(),!1):0<p&&O==S&&R==k&&N==G&&j==2||p<d.length-1&&D==ne&&V==k&&Z==G&&q==2?((o=l.bc(C))==null&&(l.ed(C,w),o=w),y.L(o.kg()),g.mt(y),y.normalize(),g.normalize(),!1):!(p<d.length-1&&D==S&&V==k&&Z==G)||((o=l.bc(C))==null&&(l.ed(C,w),o=w),g.L(o.kg()),(o=l.bc(G))==null&&(l.ed(G,w),o=w),y.L(o.kg()),g.Sq(),y.normalize(),g.normalize(),!1)},r.BM=function(o,l,d,p,g,y){var w=new u.yb,S=d[p].tg,k=d[p].Lm,C=d[p].Al,O=-1,R=-1,N=-1,j=-1;if(!o&&p<d.length-1){var G=d[p+1];O=G.tg,R=G.Lm,N=G.Al,j=G.Ei}var D=-1,V=-1,Z=-1;G=-1,0<p&&(D=(G=d[p-1]).tg,V=G.Lm,Z=G.Al,G=G.Ei);var q=l.U(S),ne=l.Ma(C);return o?p!=0&&D==S&&V==k&&Z==ne&&G!=2||((o=l.bc(C))==null&&(l.ed(C,w),o=w),y.L(o.kg()),g.mt(y),y.normalize(),g.normalize(),!1):!(0<p&&D==S&&V==k&&Z==ne&&G==2||p<d.length-1&&O==q&&R==k&&N==ne&&j==2)||((o=l.bc(C))==null&&(l.ed(C,w),o=w),y.L(o.kg()),g.mt(y),y.normalize(),g.normalize(),!1)},r.zM=function(o,l,d,p,g,y,w){var S=new u.yb,k=o.bc(g);if(k==null&&(o.ed(g,S),k=S),l=(d=l[d]).tg,d=d.OA,g=o.U(l),d==1)y.L(k.kg()),g!=-1&&g!=o.rj(p)?((k=o.bc(g))==null&&(o.ed(g,S),k=S),w.L(k.kg()),(k=o.bc(l))==null&&o.ed(l,S)):w.L(y),y.Sq(),w.normalize(),y.normalize();else{if(d!=0)throw u.i.Qa();w.L(k.kg()),y.mt(w),w.normalize(),y.normalize()}},r}()}(B||(B={})),function(u){var A;(A=u.bM||(u.bM={}))[A.Linear=0]="Linear",A[A.Angular=1]="Angular",A[A.Area=2]="Area";var b=function(){function p(g,y,w){this.od=y,this.ai=w,this.vA=g}return p.prototype.Nb=function(g){return g instanceof p&&this.ai===g.ai},p.aG=function(g){return g.od!==0?null:g.vA===-1?new p(-1,2,g.ai*g.ai):p.Zg(l[g.vA])},p.Zg=function(g){return(g=o[g])===void 0?null:g},p.ZO=function(g,y,w){var S=null;if(w!=null)try{w.values[0]==="EPSG"&&(S=p.Zg(parseInt(w.values[1])))}catch{}return S===null&&(S=new p(-1,g,y)),S},p.prototype.Ec=function(){return this.vA},p.prototype.CF=function(g){if(g.od!=this.od)throw u.i.Hb();return this.ai/g.ai},p.Nh=function(g,y,w){return y.CF(w)*g},p.XE=function(g,y,w,S,k){for(w=w.CF(S),S=0;S<y;S++)k[S]=g[S]*w},p}();u.Tc=b;for(var c=[109401,1e4,109402,4046.8564224,109403,4046.87260987425,109404,1,109405,.09290304,109406,.09290341161327487,109407,.09290137299531805,109408,3.34450944,109409,3429904,109410,1.000027193184865,109411,404.6872609874253,109412,.04046872609874253,109413,2.5899984703195216e6,109414,1e6,109415,.8361123569578626,109416,404.67838076760535,109417,.04046783807676053,109418,.8361244606523066,109419,.09290271785025629,109420,404.68423895571647,109421,.04046842389557164,109422,.83612589696064,109423,.0929028774400711,109424,404.6849341289498,109425,.04046849341289498,109426,.836125904805842,109427,.09290287831176021,109428,404.68493792602754,109429,.04046849379260275,109430,.09290354800069446,109431,.09290274144751023,109432,.09290207073852812,109433,.09290279616016,109434,.09290273520025,109435,.836124673027592,109436,.836118636646753,109437,.8361251654414399,109438,.83612461680225,109439,2589988110336e-6,109440,.09290286332673177,109441,.09290349665192114,109442,.83612736,109443,.8361307045194736,109444,404.68564224000005,109445,.04046856422400001,109446,.8361237024040001,109447,.0929026336004445,109448,404.683871963536,109449,.0404683871963536,109450,.01,109451,1e-4,109452,1e-6,109453,64516e-8,109454,.0006451625806477421,109455,25.292852640000003,109456,25.29295381171408,109457,3.4345281495040003e6,109458,3434290937856e-6,109459,2.89612324,109460,25e8,109461,225e8,109462,.7168473118308245,109463,100,109464,1244521604938272e-22,109465,1e-12,109466,1e-18],a=[1031,484813681109536e-23,9101,1,9102,.0174532925199433,9103,.0002908882086657216,9104,484813681109536e-20,9105,.01570796326794897,9106,.01570796326794897,9109,1e-6,9112,.0001570796326794897,9113,1570796326794897e-21,9114,.0009817477042468104],r=[1025,.001,109452,1033,.01,109451,9001,1,109404,9002,.3048,109405,9003,.3048006096012192,109406,9005,.3047972654,109407,9014,1.8288,109408,9030,1852,109409,9031,1.0000135965,109410,9033,20.11684023368047,109411,9034,.2011684023368047,109412,9035,1609.3472186944375,109413,9036,1e3,109414,9037,.9143917962000001,109415,9038,20.1166195164,109416,9039,.201166195164,109417,9040,.9143984146160287,109418,9041,.304799471538676,109419,9042,20.116765121552632,109420,9043,.2011676512155263,109421,9050,.9143992,109422,9051,.3047997333333333,109423,9052,20.1167824,109424,9053,.201167824,109425,9060,.9143992042898124,109426,9061,.3047997347632708,109427,9062,20.116782494375872,109428,9063,.2011678249437587,109429,9070,.3048008333333334,109430,9080,.3047995102481469,109431,9081,.30479841,109432,9082,.3047996,109433,9083,.3047995,109434,9084,.9143985307444408,109435,9085,.91439523,109436,9086,.9143988,109437,9087,.9143985,109438,9093,1609.344,109439,9094,.3047997101815088,109440,9095,.3048007491,109441,9096,.9144,109442,9097,20.1168,109444,9098,.201168,109445,9099,.914398,109446,9300,.3047993333333334,109447,9301,20.116756,109448,9302,.20116756,109449,109001,.9144,109442,109002,.9144018288036576,109443,109003,20.1168,109444,109004,.201168,109445,109005,.1,109450,109006,.01,109451,109007,.001,109452,109008,.0254,109453,109009,.0254000508001016,109454,109010,5.0292,109455,109011,5.029210058420118,109456,109012,1853.248,109457,109013,1853.184,109458,109014,1.7018,109459,109015,.8466683600033867,109462,109016,.0003527777777777778,109464,109017,1e-6,109465,109018,1e-9,109466,109030,5e4,109460,109031,15e4,109461],o=[],l=[],d=0;d<c.length;d+=2)o[c[d]]=new b(c[d],2,c[d+1]);for(c=null,d=0;d<a.length;d+=2)o[a[d]]=new b(a[d],1,a[d+1]);for(a=null,d=0;d<r.length;d+=3)o[r[d]]=new b(r[d],0,r[d+1]),l[r[d]]=r[d+2];r=null}(B||(B={})),function(u){var A=function(){function b(){this.xb=this.pb=0}return b.prototype.set=function(c,a){a!==void 0?(this.pb=c,this.xb=a):typeof c=="number"?(this.pb=c,this.xb=0):(this.pb=c.pb,this.xb=c.xb)},b.prototype.value=function(){return this.pb},b.prototype.add=function(c){var a=this.pb+c.pb;c=this.xb+c.xb+2220446049250313e-31*Math.abs(a),this.pb=a,this.xb=c},b.prototype.kN=function(){var c=this.pb+1,a=this.xb+2220446049250313e-31*Math.abs(c);this.pb=c,this.xb=a},b.prototype.dN=function(c,a){this.pb=c.pb+a.pb,this.xb=c.xb+a.xb+2220446049250313e-31*Math.abs(this.pb)},b.prototype.sub=function(c){if(typeof c=="number"){var a=this.pb-c;c=this.xb+2220446049250313e-31*Math.abs(a)}else a=this.pb-c.pb,c=this.xb+c.xb+2220446049250313e-31*Math.abs(a);this.pb=a,this.xb=c},b.prototype.Ag=function(c){var a=this.pb*c.pb;this.xb=this.xb*Math.abs(c.pb)+c.xb*Math.abs(this.pb)+this.xb*c.xb+2220446049250313e-31*Math.abs(a),this.pb=a},b.prototype.No=function(c){var a=this.pb*c;this.xb=this.xb*Math.abs(c)+2220446049250313e-31*Math.abs(a),this.pb=a},b.prototype.Kl=function(c,a){var r=Math.abs(c.pb)*Math.abs(a.pb);this.xb=c.xb*Math.abs(a.pb)+a.xb*Math.abs(c.pb)+c.xb*a.xb+2220446049250313e-31*Math.abs(r),this.pb=r},b.prototype.jm=function(c){var a=Math.abs(c.pb),r=this.pb/c.pb,o=(this.xb+Math.abs(r)*c.xb)/a;c.xb>.01*a&&(o*=1+(1+(c=c.xb/a))*c),this.pb=r,this.xb=o+2220446049250313e-31*Math.abs(r)},b.prototype.sqrt=function(){if(0<=this.pb){var c=Math.sqrt(this.pb),a=this.pb>10*this.xb?.5*this.xb/c:this.pb>this.xb?c-Math.sqrt(this.pb-this.xb):Math.max(c,Math.sqrt(this.pb+this.xb)-c);a+=2220446049250313e-31*Math.abs(c)}else this.pb<-1*this.xb?a=c=NaN:(c=0,a=Math.sqrt(this.xb));this.pb=c,this.xb=a},b.prototype.sin=function(c){var a=Math.sin(c.pb),r=Math.cos(c.pb);this.pb=a,a=Math.abs(a),this.xb=(Math.abs(r)+.5*a*c.xb)*c.xb+2220446049250313e-31*a},b.prototype.cos=function(c){var a=Math.sin(c.pb),r=Math.cos(c.pb);this.pb=r,r=Math.abs(r),this.xb=(Math.abs(a)+.5*r*c.xb)*c.xb+2220446049250313e-31*r},b.prototype.qg=function(){return Math.abs(this.pb)<=this.xb},b.prototype.ps=function(){return this.qg()&&this.xb!=0},b}();u.Wb=A}(B||(B={}));var li=new B.h,Dn=new B.h,kr=new B.h,$r=new B.h,Pi=new B.h;(function(u){var A,b;(b=A||(A={}))[b.closedPath=1]="closedPath",b[b.exteriorPath=2]="exteriorPath",b[b.ringAreaValid=4]="ringAreaValid";var c=function(){function a(r,o,l,d,p,g,y){o!==void 0?(this.ib=r,this.ck=o,this.bl=l,this.ii=d,this.ya=g,this.hA=y,this.ew=p):(this.ib=r.ib,this.ck=r.ck,this.bl=r.bl,this.ii=r.ii,this.ya=r.ya,this.hA=r.hA,this.ew=r.ew),this.bH=!0}return a.prototype.next=function(){return this.bH?(this.bH=!1,this.ii):this.ii!=-1?(this.ii=this.ib.U(this.ii),this.ya++,this.ii!=-1&&this.ii!=this.ew?this.ii:this.$T()):-1},a.prototype.$T=function(){for(this.bl=this.ib.Rb(this.bl),this.ya=0;this.ck!=-1;){for(;this.bl!=-1;this.bl=this.ib.Rb(this.bl))if(this.ew=this.ii=this.ib.Xa(this.bl),this.ii!=-1)return this.ii;if(this.ck=this.ib.ue(this.ck),this.ck==-1)break;this.hA&&!u.aa.Hc(this.ib.ic(this.ck))||(this.bl=this.ib.Ob(this.ck))}return-1},a.AP=function(r,o,l,d,p,g,y){return new a(r,o,l,d,p,g,y)},a}();u.zY=c,A=function(){function a(){this.jo=this.Am=this.wk=this.cd=this.Ck=this.vo=this.Oi=this.md=this.bi=this.Sg=this.We=this.Il=null,this.qw=this.ld=-1,this.fd=0,this.fA=!1,this.ht=this.it=this.vb=null}return a.prototype.Sh=function(r){return this.We!=null?this.We[r]:null},a.prototype.Xg=function(r,o){if(this.We==null){if(o==null)return;this.We=[];for(var l=0,d=this.vb.I();l<d;l++)this.We.push(null)}this.We[r]=o},a.prototype.bp=function(r,o){this.md.S(r,1,o)},a.prototype.ap=function(r,o){this.md.S(r,2,o)},a.prototype.VB=function(r,o){this.md.S(r,6,o)},a.prototype.Sp=function(r){return this.md.T(r,6)},a.prototype.gx=function(r,o){this.md.S(r,7,o)},a.prototype.qv=function(r){return this.md.T(r,0)},a.prototype.OJ=function(r,o){this.cd.S(r,1,o)},a.prototype.SJ=function(r,o){this.cd.S(r,0,o)},a.prototype.JF=function(r){return this.cd.T(r,7)},a.prototype.Zo=function(r,o){this.cd.S(r,3,o)},a.prototype.$o=function(r,o){this.cd.S(r,4,o)},a.prototype.uU=function(r){this.cd==null&&(this.cd=new u.$c(8));var o=this.cd.Ce();return this.cd.S(o,2,r),this.cd.S(o,5,0),this.cd.S(o,6,0),this.cd.S(o,7,o),o},a.prototype.OQ=function(r){this.cd.jd(r)},a.prototype.wU=function(r){this.md==null&&(this.md=new u.$c(8),this.td=new u.$c(5),this.Oi=new u.be(0),this.vo=new u.be(0));var o=this.md.Ce();return this.md.S(o,0,o),this.md.S(o,3,0),this.md.S(o,6,0),this.gx(o,r),o>=this.Oi.size&&(r=16>o?16:u.O.truncate(3*o/2),this.Oi.resize(r),this.vo.resize(r)),this.Oi.set(o,0),this.vo.set(o,0),o},a.prototype.sF=function(r){this.md.jd(r)},a.prototype.Vy=function(r){this.td.jd(r),this.fd--},a.prototype.oI=function(r){this.md==null&&(this.md=new u.$c(8),this.td=new u.$c(5),this.Oi=new u.be(0),this.vo=new u.be(0));var o=this.td.Ce(),l=0<=r?r:o;if(this.td.S(o,0,l),0>r){if(l>=this.vb.I()){if(r=16>l?16:u.O.truncate(3*l/2),this.vb.resize(r),this.We!=null)for(var d=0;d<r;d++)this.We.push(null);this.Sg!=null&&this.Sg.resize(r),this.it=this.vb.ub(0)}this.vb.Cb(l,-1e38,-1e38),this.We!=null&&(this.We[l]=null),this.Sg!=null&&this.Sg.write(l,1)}return this.td.S(o,4,2*l),this.fd++,o},a.prototype.wj=function(r,o,l){var d=o!=-1?this.Ma(o):this.rj(r),p=d!=-1?this.U(d):-1,g=this.oI(l==null?this.fd:-1),y=this.Ua(g);return l!=null&&this.vb.Ht(y,l),this.aj(g,r),this.Bc(g,p),this.Cc(g,d),p!=-1&&this.Cc(p,g),d!=-1&&this.Bc(d,g),l=this.dc(r),d=this.Xa(r),o==-1&&this.Wg(r,g),o==d&&this.Jf(r,g),l&&p==-1&&(this.Bc(g,g),this.Cc(g,g)),this.Vj(r,this.Ja(r)+1),r=this.Qf(r),this.Tj(r,this.I(r)+1),g},a.prototype.nm=function(){return this.jo==null&&(this.jo=new u.Sa(this.vb.description)),this.jo},a.prototype.Yo=function(r,o){this.cd.S(r,2,-134217729&this.cd.T(r,2)||(o==1?134217728:0))},a.prototype.In=function(r){return 134217728&this.cd.T(r,2)?1:0},a.prototype.hN=function(r){var o=this.Ig(r.getType(),r.description);return r.getType()==1736&&this.Yo(o,r.In()),this.UD(o,r),o},a.prototype.iN=function(r){var o=this.Ig(r.getType(),r.description);return this.VD(o,r),o},a.prototype.XV=function(r,o){this.md==null&&(this.md=new u.$c(8),this.td=new u.$c(5),this.Oi=new u.be(0),this.vo=new u.be(0)),this.md.De(this.md.Hg+r),this.td.De(this.td.Hg+o),this.Oi.Jb(this.Oi.size+r),this.vo.Jb(this.vo.size+r)},a.prototype.UD=function(r,o){this.XV(o.da(),o.I()),this.Il.Fd(o,0,o.I()),this.it=this.vb.ub(0);for(var l=this.We!=null&&o.Ve!=null,d=0,p=o.da();d<p;d++)if(!(2>o.Ja(d))){var g=this.vf(r,-1);this.kn(g,o.dc(d));for(var y=o.Ba(d),w=o.Vc(d);y<w;y++){var S=this.wj(g,-1,null);if(l)if(S=this.Ua(S),1&o.ZF(y))this.Xg(S,null);else{var k=new u.ig;o.bc(y,k,!0),this.Xg(S,k.get())}}}},a.prototype.VD=function(r,o){this.Il.Fd(o,0,o.I()),this.it=this.vb.ub(0),r=this.vf(r,-1);var l=0;for(o=o.I();l<o;l++)this.wj(r,-1,null)},a.prototype.NX=function(r,o,l){var d=this.U(r);if(d==-1)throw u.i.Qa();for(var p=this.nm(),g=this.bd(r),y=0,w=o.ol(l);y<w;y++){var S=this.Ua(r),k=this.U(r),C=o.Vp(l,y);y==0&&(C.To(p),this.Dh(r,p)),C.getType()==322?this.Xg(S,null):this.Xg(S,u.aa.jg(C)),C.Po(p),y<w-1?r=this.wj(g,k,p):this.Dh(d,p)}},a.prototype.MX=function(r,o,l){var d=this.U(r);if(d==-1)throw u.i.Qa();for(var p=this.nm(),g=this.bd(r),y=0,w=o.ol(l);y<w;y++){var S=this.Ua(r),k=this.U(r),C=o.Vp(l,w-y-1);y==0&&(C.Po(p),this.Dh(r,p)),C.getType()==322?this.Xg(S,null):this.Xg(S,u.aa.jg(C)),C.To(p),y<w-1?r=this.wj(g,k,p):this.Dh(d,p)}},a.prototype.IF=function(){var r=new u.l;r.Oa();for(var o=this.Yq(),l=new u.h,d=!0,p=o.next();p!=-1;p=o.next())this.D(p,l),d?r.Zb(l.x,l.y):r.Lk(l.x,l.y),d=!1;return r},a.prototype.Ib=function(r){var o=r.getType();if(u.aa.Hc(o))return this.hN(r);if(o==550)return this.iN(r);throw u.i.Qa()},a.prototype.uN=function(r,o){var l=o.getType();if(u.aa.Hc(l))this.UD(r,o);else{if(l!=550)throw u.i.Qa();this.VD(r,o)}},a.prototype.mN=function(r,o){var l=this.Ig(1736,r.description);if(2>r.Ja(o))return l;this.Il.Fd(r,r.Ba(o),r.Vc(o)),this.it=this.vb.ub(0);var d=this.vf(l,-1);this.kn(d,r.dc(o)||!0);var p=this.We!=null&&r.Ve!=null,g=r.Ba(o);for(o=r.Vc(o);g<o;g++){var y=this.wj(d,-1,null);if(p)if(y=this.Ua(y),1&r.ZF(g))this.Xg(y,null);else{var w=new u.ig;r.bc(g,w,!0),this.Xg(y,w.get())}}return l},a.prototype.Ne=function(r){var o=this.ic(r),l=u.ZK.Ig(o,this.Il.description),d=this.I(r);if(d==0)return l;if(u.aa.Hc(o)){o=this.da(r);for(var p=u.Yc.Oh(o+1),g=u.Yc.Mr(o+1,0),y=l.description,w=0,S=y.Aa;w<S;w++){for(var k=y.kd(w),C=u.ra.Va(k),O=u.Yc.YE(k,d),R=this.vb.ub(k),N=0,j=0,G=0,D=this.Ob(r);D!=-1;D=this.Rb(D)){var V=0;this.dc(D)&&(V|=1),this.YS(D)&&(V|=4),V!=0&&g.zJ(j,V);var Z=this.Ja(D);if(p.write(j++,G),G+=Z,k==0){Z=R;var q=O,ne=new u.h;for(V=this.Xa(D);N<G;V=this.U(V),N++){var ee=this.Ua(V);Z.tc(2*ee,ne),q.Tt(2*N,ne)}}else for(V=this.Xa(D);N<G;V=this.U(V),N++)for(ee=this.Ua(V),q=0;q<C;q++)ne=R.eg(ee*C+q),O.pr(N*C+q,ne)}l.hn(k,O),p.write(o,d)}l.PJ(g),l.QJ(p),l.Pc(16777215)}else if(o==550){for(y=l.description,l.resize(d),w=0,S=y.Aa;w<S;w++){for(k=y.kd(w),C=u.ra.Va(k),O=l.ub(k),R=this.vb.ub(k),N=0,D=this.Ob(r),Z=this.Ja(D),V=this.Xa(D);N<Z;V=this.U(V),N++)for(ee=this.Ua(V),q=0;q<C;q++)ne=R.eg(ee*C+q),O.pr(N*C+q,ne);l.hn(k,O)}l.Pc(16777215)}return l},a.prototype.BB=function(r){for(var o=this.Ob(r);o!=-1;o=this.Zq(o));o=this.PR(r);var l=this.ue(r);o!=-1?this.OJ(o,l):this.ld=l,l!=-1?this.SJ(l,o):this.qw=o,this.OQ(r)},a.prototype.Ig=function(r,o){return o===void 0?this.$E(r,u.ee.og()):this.$E(r,o)},a.prototype.$E=function(r,o){return r=this.uU(r),this.vb==null?this.vb=this.Il=new u.de(o):this.Il.Jl(o),this.ht=this.Il.description,this.fA=1<this.ht.Aa,this.ld==-1?this.ld=r:(this.SJ(r,this.qw),this.OJ(this.qw,r)),this.qw=r},a.prototype.ue=function(r){return this.cd.T(r,1)},a.prototype.PR=function(r){return this.cd.T(r,0)},a.prototype.ic=function(r){return 2147483647&this.cd.T(r,2)},a.prototype.HJ=function(r,o,l){o=this.wk[o],(r=this.JF(r))>=o.size&&o.resize(Math.max(u.O.truncate(1.25*r),16),-1),o.write(r,l)},a.prototype.KF=function(r,o){return(r=this.JF(r))<(o=this.wk[o]).size?o.read(r):-1},a.prototype.aF=function(){this.wk==null&&(this.wk=[]);for(var r=0;r<this.wk.length;r++)if(this.wk[r]==null)return this.wk[r]=u.Yc.Oh(0),r;return this.wk.push(u.Yc.Oh(0)),this.wk.length-1},a.prototype.xW=function(r){this.wk[r]=null},a.prototype.Ob=function(r){return this.cd.T(r,3)},a.prototype.kv=function(r){return this.cd.T(r,4)},a.prototype.I=function(r){return this.cd.T(r,5)},a.prototype.da=function(r){return this.cd.T(r,6)},a.prototype.Gp=function(r,o,l){for(var d=0,p=this.ld;p!=-1;p=this.ue(p)){var g=this.ic(p);if(u.aa.Hc(g)&&(!l||g==1736)){g=this.ic(p)==1736;for(var y=this.Ob(p);y!=-1;){for(var w=0,S=this.Xa(y);w<u.O.truncate(this.Ja(y)/2);){var k=this.U(S);if(k==-1)break;var C=this.Ua(S),O=this.Sh(C);O!=null?C=O.Qb():(O=this.Ua(k),C=this.vb.yr(C,O)),C<=r?(C==0?d==0&&(d=-1):d=1,k!=this.rj(y)&&(this.lC(k,S),this.pd(k,!0))):S=this.U(S),w++}for(w=this.Xa(y),S=this.dc(y)?w:this.rj(y);0<this.Ja(y);){if((k=this.Ma(S))==-1){this.pd(S,!0),d==0&&(d=-1);break}var R=this.Ua(k);if((O=this.Sh(R))!=null?C=O.Qb():(C=this.Ua(S),C=this.vb.yr(C,R)),C<=r)C==0?d==0&&(d=-1):d=1,this.lC(k,S),this.pd(k,!1),w==k&&(w=this.Xa(y));else if((S=this.Ma(S))==w)break}S=this.Ja(y),o&&(g?3>S:2>S)?(y=this.Zq(y),d=0<S?1:d==0?-1:d):y=this.Rb(y)}}}return d},a.prototype.lC=function(r,o){var l=this.Ua(r),d=this.Ua(o);if(this.Sg!=null&&(l=this.Sg.read(l),this.Sg.write(d,l)),this.bi!=null){for(d=0,l=this.bi.length;d<l;d++)if(this.bi[d]!=null){var p=this.Pa(r,d);p!=-1&&this.Ra(o,d,p)}}},a.prototype.Ul=function(r,o,l){var d=0,p=this.U(r);if(p==-1)throw u.i.Qa();for(var g=this.Ua(r),y=this.Ua(p),w=this.Sh(g),S=w==null?this.vb.yr(g,y):w.Qb(),k=0;k<l;k++){var C=o[k];if(0<C&&1>C){var O=C;w!=null&&(O=0<S?w.Ux(C)/S:0),this.vb.kD(g,y,O,this.nm());var R=this.wj(this.bd(r),p,this.nm());if(d++,w!=null){var N=w.dl(0,C);O=this.Ua(this.Ma(R)),this.Xg(O,N),this.mf(R,N.wc()),k!=l-1&&o[k+1]!=1||(C=w.dl(C,1),this.Xg(O,C))}}}return d},a.prototype.LX=function(r,o,l){var d=0,p=this.U(r);if(p==-1)throw u.i.fa("internal error");var g=this.Ua(r),y=this.Ua(p),w=this.Sh(g),S=w==null?this.vb.yr(g,y):w.Qb(),k=0;r=this.bd(r);for(var C=0;C<l;C++){var O=o[C];if(k<O&&1>O){var R=O;if(w!=null&&(R=0<S?w.Ux(O)/S:0),this.vb.kD(g,y,R,this.nm()),R=this.yS(r,p,this.nm()),d++,w!=null){k=w.dl(k,O);var N=this.Ua(this.Ma(R));this.Xg(N,k),this.Cb(R,k.pa,k.la),C!=l-1&&o[C+1]!=1||(k=w.dl(O,1),R=this.Ua(R),this.Xg(R,k))}}k=O}return d},a.prototype.yS=function(r,o,l){var d=o!=-1?this.Ma(o):this.rj(r),p=d!=-1?this.U(d):-1,g=this.oI(l==null?this.fd:-1),y=this.Ua(g);return l!=null&&this.vb.Ht(y,l),this.aj(g,r),this.Bc(g,p),this.Cc(g,d),p!=-1&&this.Cc(p,g),d!=-1&&this.Bc(d,g),l=this.dc(r),d=this.Xa(r),o==-1&&this.Wg(r,g),o==d&&(l&&d!=-1||this.Jf(r,g)),l&&p==-1&&(this.Bc(g,g),this.Cc(g,g)),this.Vj(r,this.Ja(r)+1),r=this.Qf(r),this.Tj(r,this.I(r)+1),g},a.prototype.uE=function(r,o,l){var d=this.Ua(o),p=this.Ua(l);if(0>d||p>this.fd-1)throw u.i.N("invalid call");if(d>p&&!this.dc(r))throw u.i.N("cannot iterate across an open path");for(r=0;o!=l;o=this.U(o))d=this.Ua(o),(p=this.Sh(d))!=null?r+=p.Qb():(p=this.Ua(this.U(o)),r+=this.vb.yr(d,p));return r},a.prototype.Dh=function(r,o){var l=this.Ua(r);this.vb.Ht(l,o),(l=this.Sh(l))!=null&&l.setStart(o),(r=this.Ma(r))!=-1&&(r=this.Ua(r),this.Sh(r)!=null&&l.setEnd(o))},a.prototype.Vi=function(r,o){r=this.Ua(r),this.vb.ve(r,o)},a.prototype.mf=function(r,o){this.Cb(r,o.x,o.y)},a.prototype.Cb=function(r,o,l){var d=this.Ua(r);this.vb.Cb(d,o,l),(d=this.Sh(d))!=null&&d.ZB(o,l),(r=this.Ma(r))!=-1&&(r=this.Ua(r),this.Sh(r)!=null&&d.Ql(o,l))},a.prototype.D=function(r,o){this.vb.D(this.td.T(r,0),o)},a.prototype.Gc=function(r,o){this.vb.za[0].tc(2*this.td.T(r,0),o)},a.prototype.Na=function(r){var o=new u.h;return this.vb.D(this.td.T(r,0),o),o},a.prototype.dG=function(r,o){this.it.tc(2*r,o)},a.prototype.Uc=function(r,o,l){return this.vb.Uc(r,this.Ua(o),l)},a.prototype.setAttribute=function(r,o,l,d){this.vb.setAttribute(r,this.Ua(o),l,d)},a.prototype.Ua=function(r){return this.td.T(r,0)},a.prototype.ih=function(){var r=new u.h;return this.D(void 0,r),r.y},a.prototype.fq=function(r,o){r=this.Ua(r),o=this.Ua(o);var l=this.vb.za[0].o;return l[2*r]===l[2*o]&&l[2*r+1]===l[2*o+1]},a.prototype.Dv=function(r,o){r=this.Ua(r);var l=this.vb.za[0].o;return l[2*r]===o.x&&l[2*r+1]===o.y},a.prototype.vX=function(r,o){if(1>o&&(o=1),this.Sg==null){if(o==1)return;this.Sg=u.Yc.Dn(this.vb.I(),1)}(r=this.Ua(r))>=this.Sg.size&&this.Sg.resize(r+1,1),this.Sg.write(r,o)},a.prototype.cG=function(r){return r=this.Ua(r),this.Sg==null||r>=this.Sg.size?1:this.Sg.read(r)},a.prototype.Ra=function(r,o,l){o=this.bi[o],r=this.Ua(r),o.size<this.vb.I()&&o.resize(this.vb.I(),-1),o.write(r,l)},a.prototype.Pa=function(r,o){return(r=this.Ua(r))<(o=this.bi[o]).size?o.read(r):-1},a.prototype.Gd=function(){this.bi==null&&(this.bi=[]);for(var r=0;r<this.bi.length;r++)if(this.bi[r]==null)return this.bi[r]=u.Yc.Oh(0,-1),r;return this.bi.push(u.Yc.Oh(0,-1)),this.bi.length-1},a.prototype.Td=function(r){this.bi[r]=null},a.prototype.bc=function(r){return this.We!=null?(r=this.Ua(r),this.We[r]):null},a.prototype.ed=function(r,o){var l=this.td.T(r,2);if(l==-1)return!1;if(this.fA){var d=new u.Sa;this.Vi(r,d),o.setStart(d),this.Vi(l,d),o.setEnd(d)}else this.vb.Gc(this.td.T(r,0),li),o.em(0,li),this.vb.Gc(this.td.T(l,0),li),o.em(1,li);return!0},a.prototype.mW=function(r,o,l){if(this.fA){var d=new u.Sa;this.Vi(r,d),l.setStart(d),this.Vi(o,d),l.setEnd(d)}else this.vb.Gc(r,li),l.em(0,li),this.vb.Gc(o,li),l.em(1,li)},a.prototype.vf=function(r,o){if(o!=-1){if(r!=this.Qf(o))throw u.i.Qa();var l=this.cs(o)}else l=this.kv(r);var d=this.wU(r);return o!=-1&&this.bp(o,d),this.ap(d,o),this.bp(d,l),l!=-1?this.ap(l,d):this.Zo(r,d),o==-1&&this.$o(r,d),this.Rl(r,this.da(r)+1),d},a.prototype.nG=function(r,o,l,d){r=this.vf(r,-1);for(var p=0,g=o,y=!1;g==l&&(y=!0),this.aj(g,r),p++,(g=this.U(g))!=o;);return this.kn(r,!0),this.Vj(r,p),y&&(o=l),this.Jf(r,o),this.Wg(r,this.Ma(o)),this.cp(r,!1),d!=null&&(d[0]=y),r},a.prototype.Zq=function(r){var o=this.cs(r),l=this.Rb(r),d=this.Qf(r);return o!=-1?this.ap(o,l):this.Zo(d,l),l!=-1?this.bp(l,o):this.$o(d,o),this.AO(r),this.Rl(d,this.da(d)-1),this.sF(r),l},a.prototype.AO=function(r){var o=this.Xa(r);if(o!=-1){for(var l=0,d=this.Ja(r);l<d;l++){var p=o;o=this.U(o),this.Vy(p)}o=this.Qf(r),this.Tj(o,this.I(o)-this.Ja(r))}this.Vj(r,0)},a.prototype.Rb=function(r){return this.md.T(r,2)},a.prototype.cs=function(r){return this.md.T(r,1)},a.prototype.Ja=function(r){return this.md.T(r,3)},a.prototype.dc=function(r){return!!(1&this.Sp(r))},a.prototype.kn=function(r,o){if(this.dc(r)!=o){if(0<this.Ja(r)){var l=this.Xa(r),d=this.rj(r);o?(this.Bc(d,l),this.Cc(l,d),l=this.Ua(d)):(this.Bc(d,-1),this.Cc(l,-1),l=this.Ua(d)),this.Xg(l,null)}this.VB(r,(1|this.Sp(r))-1|(o?1:0))}},a.prototype.Qf=function(r){return this.md.T(r,7)},a.prototype.YS=function(r){return!!(2&this.Sp(r))},a.prototype.PB=function(r,o){this.VB(r,(2|this.Sp(r))-2|(o?2:0))},a.prototype.wz=function(r){if(this.cT(r))return this.Oi.get(this.qv(r));var o=new u.yb,l=this.Xa(r);if(l==-1)return 0;var d=new u.h;this.D(l,d);for(var p=0,g=0,y=this.Ja(r);g<y;g++,l=this.U(l)){var w=this.bc(l);if(w==null){if(!this.ed(l,o))continue;w=o}p+=w.Tx(d.x,d.y)}return this.cp(r,!0),this.Oi.set(this.qv(r),p),p},a.prototype.gr=function(r,o,l){o=this.Ck[o],r=this.qv(r),o.size<this.Oi.size&&o.resize(this.Oi.size,-1),o.write(r,l)},a.prototype.sj=function(r,o){return(r=this.qv(r))<(o=this.Ck[o]).size?o.read(r):-1},a.prototype.Ky=function(){this.Ck==null&&(this.Ck=[]);for(var r=0;r<this.Ck.length;r++)if(this.Ck[r]==null)return this.Ck[r]=u.Yc.Oh(0),r;return this.Ck.push(u.Yc.Oh(0)),this.Ck.length-1},a.prototype.CB=function(r){this.Ck[r]=null},a.prototype.ZT=function(r,o,l){if(l==-1)throw u.i.N();if(o!=l){var d=this.Rb(l),p=this.cs(l),g=this.Qf(l);p==-1?this.Zo(g,d):this.ap(p,d),d==-1?this.$o(g,p):this.bp(d,p),this.Tj(g,this.I(g)-this.Ja(l)),this.Rl(g,this.da(g)-1),p=o==-1?this.kv(r):this.cs(o),this.bp(l,p),this.ap(l,o),o==-1?this.$o(r,l):this.bp(o,l),p==-1?this.Zo(r,l):this.ap(p,l),this.Tj(r,this.I(r)+this.Ja(l)),this.Rl(r,this.da(r)+1),this.gx(l,r)}},a.prototype.ij=function(r,o){this.vb.ve(this.Ua(o),this.nm()),this.wj(r,-1,this.nm())},a.prototype.pd=function(r,o){var l=this.bd(r),d=this.Ma(r),p=this.U(r);d!=-1&&this.Bc(d,p);var g=this.Ja(l);if(r==this.Xa(l)&&this.Jf(l,1<g?p:-1),p!=-1&&this.Cc(p,d),r==this.rj(l)&&this.Wg(l,1<g?d:-1),d!=-1&&p!=-1){d=this.Ua(d);var y=this.Ua(p);o?(o=this.Sh(d))!=null&&(d=new u.h,this.vb.D(y,d),o.Qc(d)):(y=this.Ua(r),o=this.Sh(y),this.Xg(d,o),o!=null&&(d=this.vb.Na(d),o.Dc(d)))}return this.Vj(l,g-1),l=this.Qf(l),this.Tj(l,this.I(l)-1),this.Vy(r),p},a.prototype.Xa=function(r){return this.md.T(r,4)},a.prototype.rj=function(r){return this.md.T(r,5)},a.prototype.U=function(r){return this.td.T(r,2)},a.prototype.Ma=function(r){return this.td.T(r,1)},a.prototype.bd=function(r){return this.td.T(r,3)},a.prototype.fc=function(r,o){return this.wj(r,-1,o)},a.prototype.Yq=function(r){if(r===void 0)return this.Yq(!1);if(r instanceof c)return new c(r);var o,l=-1,d=-1,p=-1,g=0,y=!1;for(o=this.ld;o!=-1;o=this.ue(o))if(!r||u.aa.Hc(this.ic(o))){for(l=this.Ob(o);l!=-1;l=this.Rb(l))if(p=d=this.Xa(l),g=0,d!=-1){y=!0;break}if(y)break}return c.AP(this,o,l,d,p,g,r)},a.prototype.Oc=function(r){if(this.Il.Oc(r),this.We!=null)for(var o=0,l=this.We.length;o<l;o++)this.We[o]!=null&&this.We[o].Oc(r)},a.prototype.jr=function(r,o,l,d){d?this.NX(r,o,l):this.MX(r,o,l)},a.prototype.Cc=function(r,o){this.td.S(r,1,o)},a.prototype.Bc=function(r,o){this.td.S(r,2,o)},a.prototype.aj=function(r,o){this.td.S(r,3,o)},a.prototype.Vj=function(r,o){this.md.S(r,3,o)},a.prototype.Jf=function(r,o){this.md.S(r,4,o)},a.prototype.Wg=function(r,o){this.md.S(r,5,o)},a.prototype.Rl=function(r,o){this.cd.S(r,6,o)},a.prototype.Tj=function(r,o){this.cd.S(r,5,o)},a.prototype.pJ=function(r){var o=r;do{var l=this.U(o);this.Bc(o,this.Ma(o)),this.Cc(o,l),o=l}while(o!=r)},a.prototype.bC=function(r){this.fd=r},a.prototype.$q=function(r){var o=this.cs(r),l=this.Rb(r),d=this.Qf(r);o!=-1?this.ap(o,l):this.Zo(d,l),l!=-1?this.bp(l,o):this.$o(d,o),this.Jf(r,-1),this.Wg(r,-1),this.sF(r)},a.prototype.mi=function(r,o){var l=this.Ma(r),d=this.U(r);if(l!=-1&&this.Bc(l,d),d!=-1&&this.Cc(d,l),l!=-1&&d!=-1)if(l=this.Ua(l),d=this.Ua(d),o){if((o=this.Sh(l))!=null){var p=new u.h;this.vb.D(d,p),o.Qc(p)}}else o=this.Ua(r),o=this.Sh(o),this.Xg(l,o),o!=null&&(p=new u.h,this.vb.D(l,p),o.Dc(p));this.Vy(r)},a.prototype.cT=function(r){return!!(4&this.Sp(r))},a.prototype.cp=function(r,o){this.VB(r,(4|this.Sp(r))-4|(o?4:0))},a.prototype.nx=function(r,o){var l=this.td.o;this.vb.mc();var d=this.vb.za[0].o;r.Vd(0,o,function(p,g){var y=l[5*p];p=l[5*g],g=d[2*y],y=d[2*y+1];var w=d[2*p];return y<(p=d[2*p+1])?-1:y>p?1:g<w?-1:g>w?1:0})},a.prototype.jS=function(){for(var r=this.ld;r!=-1;r=this.ue(r))if(!u.aa.Hc(this.ic(r)))return!0;return!1},a.prototype.hC=function(r,o){for(var l=this.Ob(r),d=this.Ob(o),p=this.kv(r),g=this.kv(o),y=this.Ob(r);y!=-1;y=this.Rb(y))this.gx(y,o);for(y=this.Ob(o);y!=-1;y=this.Rb(y))this.gx(y,r);this.Zo(r,d),this.Zo(o,l),this.$o(r,g),this.$o(o,p),l=this.I(r),d=this.da(r),p=this.da(o),this.Tj(r,this.I(o)),this.Tj(o,l),this.Rl(r,p),this.Rl(o,d),l=this.cd.T(r,2),this.cd.S(r,2,this.cd.T(o,2)),this.cd.S(o,2,l)},a}(),u.gd=A})(B||(B={})),function(u){var A=function(b){function c(a,r,o,l){var d=b.call(this)||this;return d.$=new u.l,a===void 0?d.UE():typeof a=="number"?d.VO(a,r,o,l):a instanceof u.Sa?r!==void 0?d.Qu(a,r,o):d.WO(a):a instanceof u.ra?r!==void 0?d.YO(a,r):d.XO(a):a instanceof u.l?d.UO(a):d.UE(),d}return Qe(c,b),c.prototype.Qu=function(a,r,o){this.description=u.ee.og(),this.$.Oa(),a.B()||this.tu(a,r,o)},c.prototype.UO=function(a){this.description=u.ee.og(),this.$.K(a),this.$.normalize()},c.prototype.XO=function(a){if(a==null)throw u.i.N();this.description=a,this.$.Oa()},c.prototype.YO=function(a,r){if(a==null)throw u.i.N();this.description=a,this.$.K(r),this.$.normalize()},c.prototype.UE=function(){this.description=u.ee.og(),this.$.Oa()},c.prototype.WO=function(a){this.description=u.ee.og(),this.$.Oa(),a.B()||this.tu(a)},c.prototype.VO=function(a,r,o,l){this.description=u.ee.og(),this.K(a,r,o,l)},c.prototype.K=function(a,r,o,l){if(this.vc(),typeof a=="number")this.$.K(a,r,o,l);else for(this.Oa(),r=0,o=a.length;r<o;r++)this.Zb(a[r])},c.prototype.Xo=function(a){if(this.vc(),!a.fT())throw u.i.N();this.$.K(a)},c.prototype.Oa=function(){this.vc(),this.$.Oa()},c.prototype.B=function(){return this.$.B()},c.prototype.R=function(){return this.$.R()},c.prototype.ca=function(){return this.$.ca()},c.prototype.gk=function(){return this.$.gk()},c.prototype.Jp=function(){return this.$.Jp()},c.prototype.Ip=function(){return this.$.sf()},c.prototype.Zb=function(a){if(a instanceof u.h)this.vc(),this.$.Zb(a);else if(a instanceof u.l)this.vc(),this.$.Zb(a);else if(a instanceof u.Sa){if(this.vc(),!a.Ac()){var r=a.description;if(this.description!=r&&this.Jl(r),this.B())this.tu(a);else{this.$.Zb(a.D());for(var o=1,l=r.Aa;o<l;o++)for(var d=r.Ed(o),p=u.ra.Va(d),g=0;g<p;g++){var y=a.Uc(d,g),w=this.Tg(d,g);w.Zb(y),this.setInterval(d,g,w)}}}}else if(a instanceof c&&!a.B())for((r=a.description)!=this.description&&this.Jl(r),this.$.Zb(a.$),o=1,l=r.Aa;o<l;o++)for(d=r.kd(o),p=u.ra.Va(d),g=0;g<p;g++)y=a.Tg(d,g),(w=this.Tg(d,g)).Zb(y),this.setInterval(d,g,w)},c.prototype.tu=function(a,r,o){if(r!==void 0){this.$.K(a.D(),r,o),o=1;for(var l=(r=a.description).Aa;o<l;o++)for(var d=r.Ed(o),p=u.ra.Va(d),g=0;g<p;g++){var y=a.Uc(d,g);this.setInterval(d,g,y,y)}}else for(this.$.K(a.ka[0],a.ka[1]),o=1,l=(r=a.description).Aa;o<l;o++)for(d=r.Ed(o),p=u.ra.Va(d),g=0;g<p;g++)y=a.Uc(d,g),this.setInterval(d,g,y,y)},c.prototype.setInterval=function(a,r,o,l){if(o=typeof o=="number"?new u.Nc(o,l):o,this.vc(),a==0)if(r==0)this.$.v=o.oa,this.$.C=o.va;else{if(r!=1)throw u.i.ce();this.$.G=o.oa,this.$.H=o.va}else this.vD(0,a,r,o.oa),this.vD(1,a,r,o.va)},c.prototype.W=function(a,r){this.vc(),this.$.W(a,r)},c.prototype.Oc=function(a){if(a instanceof u.Dd)this.vc(),a.mC(this.$);else if(this.vc(),!this.$.B()){var r=new u.OK;this.Qo(r),r.XS()?r.Oa():a.mC(r)}},c.prototype.copyTo=function(a){if(a.getType()!=this.getType())throw u.i.N();if(a.vc(),a.description=this.description,a.$.K(this.$),a.ka=null,this.ka!=null){a.ou();for(var r=0;r<2*(this.description.Ae.length-2);r++)a.ka[r]=this.ka[r]}},c.prototype.Ia=function(){return new c(this.description)},c.prototype.Ke=function(){return this.$.wF()},c.prototype.Qb=function(){return this.$.yR()},c.prototype.getType=function(){return 197},c.prototype.Db=function(){return 2},c.prototype.bn=function(a){this.copyTo(a)},c.prototype.A=function(a){a.v=this.$.v,a.G=this.$.G,a.C=this.$.C,a.H=this.$.H},c.prototype.Qo=function(a){a.v=this.$.v,a.G=this.$.G,a.C=this.$.C,a.H=this.$.H,a.K(this.$.v,this.$.G,this.Od(0,1,0),this.$.C,this.$.H,this.Od(1,1,0))},c.prototype.Tg=function(a,r){var o=new u.Nc;return o.K(this.Od(0,a,r),this.Od(1,a,r)),o},c.prototype.Hf=function(a,r){r.Nf(this.description);var o=this.description.Aa-1;switch(a){case 0:for(a=0;a<o;a++)for(var l=this.description.kd(a),d=u.ra.Va(l),p=0;p<d;p++)r.setAttribute(l,p,this.Od(0,l,p));r.Cb(this.$.v,this.$.G);break;case 1:for(a=0;a<o;a++)for(l=this.description.kd(a),d=u.ra.Va(l),p=0;p<d;p++)r.setAttribute(l,p,this.Od(1,l,p));r.Cb(this.$.v,this.$.H);break;case 2:for(a=0;a<o;a++)for(l=this.description.kd(a),d=u.ra.Va(l),p=0;p<d;p++)r.setAttribute(l,p,this.Od(0,l,p));r.Cb(this.$.C,this.$.H);break;case 3:for(a=0;a<o;a++)for(l=this.description.kd(a),d=u.ra.Va(l),p=0;p<d;p++)r.setAttribute(l,p,this.Od(1,l,p));r.Cb(this.$.C,this.$.G);break;default:throw u.i.ce()}},c.prototype.mB=function(a,r){a=this.$.mB(a),r.ma(a.x,a.y)},c.prototype.kR=function(a,r){return r*(a.Oq-2)},c.prototype.xF=function(a,r,o){if(this.$.B())throw u.i.fa("empty geometry");if(r==0)return a!=0?o!=0?this.$.H:this.$.C:o!=0?this.$.G:this.$.v;if(o>=u.ra.Va(r))throw u.i.N();var l=this.description.Pf(r);return this.ou(),0<=l?this.ka[this.kR(this.description,a)+this.description.LR(l)-2+o]:u.ra.se(r)},c.prototype.ou=function(){if(this.vc(),this.ka==null&&2<this.description.Ae.length){this.ka=[];for(var a=c.Gg(this.description,0),r=c.Gg(this.description,1),o=0,l=1,d=this.description.Aa;l<d;l++){var p=this.description.kd(l),g=u.ra.Va(p);p=u.ra.se(p);for(var y=0;y<g;y++)this.ka[a+o]=p,this.ka[r+o]=p,o++}}},c.prototype.sn=function(a){if(this.ka!=null)if(2<a.Ae.length){for(var r=u.ee.Iw(a,this.description),o=[],l=c.Gg(this.description,0),d=c.Gg(this.description,1),p=c.Gg(a,0),g=c.Gg(a,1),y=0,w=1,S=a.Aa;w<S;w++){var k=a.kd(w),C=u.ra.Va(k);if(r[w]==-1){var O=u.ra.se(k);for(k=0;k<C;k++)o[p+y]=O,o[g+y]=O,y++}else for(O=this.description.$j(r[w])-2,k=0;k<C;k++)o[p+y]=this.ka[l+O],o[g+y]=this.ka[d+O],y++,O++}this.ka=o}else this.ka=null;this.description=a},c.prototype.Od=function(a,r,o){if(this.$.B())throw u.i.fa("This operation was performed on an Empty Geometry.");if(r==0)return a!=0?o!=0?this.$.H:this.$.C:o!=0?this.$.G:this.$.v;if(o>=u.ra.Va(r))throw u.i.ce();var l=this.description.Pf(r);return 0<=l?(this.ou(),this.ka[c.Gg(this.description,a)+this.description.$j(l)-2+o]):u.ra.se(r)},c.prototype.vD=function(a,r,o,l){if(this.vc(),r==0)a!=0?o!=0?this.$.H=l:this.$.C=l:o!=0?this.$.G=l:this.$.v=l;else{if(o>=u.ra.Va(r))throw u.i.ce();if(!this.hasAttribute(r)){if(u.ra.DG(r,l))return;this.re(r)}r=this.description.Pf(r),this.ou(),this.ka[c.Gg(this.description,a)+this.description.$j(r)-2+o]=l}},c.Gg=function(a,r){return r*(a.Ae.length-2)},c.prototype.Ea=function(a){this.vc();var r=new u.l;return a.A(r),this.$.Ea(r)},c.prototype.isIntersecting=function(a){return a instanceof u.l?this.$.isIntersecting(a):this.$.isIntersecting(a.$)},c.prototype.Ju=function(a,r){this.vc(),a.B()?this.Oa():r!==void 0?this.tu(a,r):this.$.Ju(a.Lg(),a.ih())},c.prototype.offset=function(a,r){this.vc(),this.$.offset(a,r)},c.prototype.normalize=function(){this.vc(),this.$.normalize()},c.prototype.sf=function(a){if(a===void 0){if(a=new u.Sa(this.description),this.B())return a;for(r=this.description.Aa,o=1;o<r;o++)for(l=this.description.Ed(o),d=u.ra.Va(l),p=0;p<d;p++)g=.5*(this.Od(0,l,p)+this.Od(1,l,p)),a.setAttribute(l,p,g);return a.Cb(this.$.gk(),this.$.Jp()),a}if(a.Nf(this.description),this.B())a.Oa();else{for(var r=this.description.Aa,o=1;o<r;o++)for(var l=this.description.kd(o),d=u.ra.Va(l),p=0;p<d;p++){var g=.5*(this.xF(0,l,p)+this.xF(1,l,p));a.setAttribute(l,p,g)}a.Cb(this.$.sf())}},c.prototype.mz=function(){return new u.Sa(this.$.mz())},c.prototype.contains=function(a){return a instanceof u.Sa?!a.B()&&this.$.contains(a.Lg(),a.ih()):this.$.contains(a.$)},c.prototype.dP=function(a){return this.$.contains(a)},c.prototype.Nb=function(a){if(a==this)return!0;if(!(a instanceof c)||this.description!=a.description)return!1;if(this.B())return!!a.B();if(!this.$.Nb(a.$))return!1;for(var r=0,o=2*(this.description.Ae.length-2);r<o;r++)if(this.ka[r]!=a.ka[r])return!1;return!0},c.prototype.cc=function(){var a=this.description.cc();if(a=u.O.Th(a,this.$.cc()),!this.B()&&this.ka!=null)for(var r=0,o=2*(this.description.Ae.length-2);r<o;r++)a=u.O.Th(a,this.ka[r]);return a},c.prototype.es=function(){return this.$.v},c.prototype.gs=function(){return this.$.G},c.prototype.ds=function(){return this.$.C},c.prototype.fs=function(){return this.$.H},c.prototype.mg=function(){return u.pi.gm(this,null)},c.prototype.toString=function(){return this.B()?"Envelope: []":"Envelope: ["+this.$.v+", "+this.$.G+", "+this.$.C+", "+this.$.H+"]"},c}(u.aa);u.Fh=A}(B||(B={})),function(u){var A=function(){function b(c,a,r,o){c===void 0?this.Oa():(this.v=c,this.G=a,this.C=r,this.H=o)}return b.construct=function(c,a,r,o){var l=new b;return l.v=c,l.G=a,l.C=r,l.H=o,l},b.prototype.K=function(c,a,r,o){typeof c=="number"?r!==void 0?(this.v=c,this.G=a,this.C=r,this.H=o,this.normalize()):(this.v=c,this.G=a,this.C=c,this.H=a):c instanceof u.h?a!==void 0?(this.v=c.x-.5*a,this.C=this.v+a,this.G=c.y-.5*r,this.H=this.G+r,this.normalize()):(this.v=c.x,this.G=c.y,this.C=c.x,this.H=c.y):c instanceof b?this.K(c.v,c.G,c.C,c.H):c instanceof u.Nc&&(c.B()||a.B()?this.Oa():(this.v=c.oa,this.C=c.va,this.G=a.oa,this.H=a.va))},b.prototype.Zw=function(c,a){if(a!==void 0)if(a==0)this.Oa();else{this.v=c[0].x,this.G=c[0].y,this.C=this.v,this.H=this.G;for(var r=1;r<a;r++){var o=c[r];o.x<this.v?this.v=o.x:o.x>this.C&&(this.C=o.x),o.y<this.G?this.G=o.y:o.y>this.H&&(this.H=o.y)}}else if(c==null||c.length==0)this.Oa();else for(o=c[0],this.K(o.x,o.y),r=1;r<c.length;r++)a=c[r],this.Lk(a.x,a.y)},b.prototype.Oa=function(){this.H=this.C=this.G=this.v=NaN},b.prototype.B=function(){return isNaN(this.v)},b.prototype.Zb=function(c,a){typeof c=="number"?this.B()?(this.v=c,this.G=a,this.C=c,this.H=a):(this.v>c?this.v=c:this.C<c&&(this.C=c),this.G>a?this.G=a:this.H<a&&(this.H=a)):c instanceof u.h||c instanceof u.Nd?this.Zb(c.x,c.y):c instanceof b&&!c.B()&&(this.Zb(c.v,c.G),this.Zb(c.C,c.H))},b.prototype.Lk=function(c,a){this.v>c?this.v=c:this.C<c&&(this.C=c),this.G>a?this.G=a:this.H<a&&(this.H=a)},b.prototype.W=function(c,a){this.B()||(this.v-=c,this.C+=c,this.G-=a,this.H+=a,(this.v>this.C||this.G>this.H)&&this.Oa())},b.prototype.scale=function(c){0>c&&this.Oa(),this.B()||(this.v*=c,this.C*=c,this.G*=c,this.H*=c)},b.prototype.zoom=function(c,a){this.B()||this.K(this.sf(),c*this.R(),a*this.ca())},b.prototype.isIntersecting=function(c){return!this.B()&&!c.B()&&(this.v<=c.v?this.C>=c.v:c.C>=this.v)&&(this.G<=c.G?this.H>=c.G:c.H>=this.G)},b.prototype.HG=function(c){return(this.v<=c.v?this.C>=c.v:c.C>=this.v)&&(this.G<=c.G?this.H>=c.G:c.H>=this.G)},b.prototype.Ea=function(c){return!this.B()&&!c.B()&&(c.v>this.v&&(this.v=c.v),c.C<this.C&&(this.C=c.C),c.G>this.G&&(this.G=c.G),c.H<this.H&&(this.H=c.H),(c=this.v<=this.C&&this.G<=this.H)||this.Oa(),c)},b.prototype.mB=function(c){switch(c){case 0:return u.h.construct(this.v,this.G);case 1:return u.h.construct(this.v,this.H);case 2:return u.h.construct(this.C,this.H);case 3:return u.h.construct(this.C,this.G);default:throw u.i.ce()}},b.prototype.nB=function(c){if(c==null||4>c.length)throw u.i.N();c[0]!=null?c[0].ma(this.v,this.G):c[0]=u.h.construct(this.v,this.G),c[1]!=null?c[1].ma(this.v,this.H):c[1]=u.h.construct(this.v,this.H),c[2]!=null?c[2].ma(this.C,this.H):c[2]=u.h.construct(this.C,this.H),c[3]!=null?c[3].ma(this.C,this.G):c[3]=u.h.construct(this.C,this.G)},b.prototype.wF=function(){return this.B()?0:this.R()*this.ca()},b.prototype.yR=function(){return this.B()?0:2*(this.R()+this.ca())},b.prototype.gk=function(){return(this.C+this.v)/2},b.prototype.Jp=function(){return(this.H+this.G)/2},b.prototype.R=function(){return this.C-this.v},b.prototype.ca=function(){return this.H-this.G},b.prototype.move=function(c,a){this.B()||(this.v+=c,this.G+=a,this.C+=c,this.H+=a)},b.prototype.Ju=function(c,a){if(a!==void 0)this.move(c-this.gk(),a-this.Jp());else if(c instanceof u.h)this.Ju(c.x,c.y);else{if(!(c instanceof u.Sa))throw u.i.N();a=(this.C-this.v)/2;var r=(this.H-this.G)/2;this.v=c.Lg()-a,this.C=c.Lg()+a,this.G=c.ih()-r,this.H=c.ih()+r}},b.prototype.offset=function(c,a){this.v+=c,this.C+=c,this.G+=a,this.H+=a},b.prototype.normalize=function(){if(!this.B()){var c=Math.min(this.v,this.C),a=Math.max(this.v,this.C);this.v=c,this.C=a,c=Math.min(this.G,this.H),a=Math.max(this.G,this.H),this.G=c,this.H=a}},b.prototype.dn=function(c){c.ma(this.v,this.G)},b.prototype.$I=function(c){c.ma(this.C,this.G)},b.prototype.cJ=function(c){c.ma(this.v,this.H)},b.prototype.en=function(c){c.ma(this.C,this.H)},b.prototype.fT=function(){return this.B()||this.v<=this.C&&this.G<=this.H},b.prototype.sf=function(){return u.h.construct((this.C+this.v)/2,(this.H+this.G)/2)},b.prototype.mz=function(){return u.h.construct(this.v,this.G)},b.prototype.contains=function(c,a){if(a!==void 0)return c>=this.v&&c<=this.C&&a>=this.G&&a<=this.H;if(c instanceof u.Sa)return this.contains(c.Lg(),c.ih());if(c instanceof u.h)return this.contains(c.x,c.y);if(c instanceof b)return c.v>=this.v&&c.C<=this.C&&c.G>=this.G&&c.H<=this.H;throw u.i.N()},b.prototype.hm=function(c,a){if(a!==void 0)return c>this.v&&c<this.C&&a>this.G&&a<this.H;if(c instanceof u.h)return this.hm(c.x,c.y);if(c instanceof b)return c.v>this.v&&c.C<this.C&&c.G>this.G&&c.H<this.H;throw u.i.N()},b.prototype.Nb=function(c){return c==this||c instanceof b&&(!(!this.B()||!c.B())||this.v==c.v&&this.G==c.G&&this.C==c.C&&this.H==c.H)},b.prototype.cc=function(){var c=this.v;c=u.O.truncate(c^c>>>32);var a=u.O.Th(c);return c=this.C,c=u.O.truncate(c^c>>>32),a=u.O.Th(c,a),c=this.G,c=u.O.truncate(c^c>>>32),a=u.O.Th(c,a),c=this.H,c=u.O.truncate(c^c>>>32),u.O.Th(c,a)},b.prototype.xr=function(){return this.B()?2220446049250313e-29:2220446049250313e-29*(Math.abs(this.v)+Math.abs(this.C)+Math.abs(this.G)+Math.abs(this.H)+1)},b.prototype.zy=function(c,a){var r=this.Zj(c),o=this.Zj(a);if(r&o)return 0;if(!(r|o))return 4;var l=(r!=0?1:0)|(o!=0?2:0);do{var d=a.x-c.x,p=a.y-c.y;if(d>p?r&b.YC?(r&b.ju?(c.y+=p*(this.v-c.x)/d,c.x=this.v):(c.y+=p*(this.C-c.x)/d,c.x=this.C),r=this.Zj(c)):o&b.YC?(o&b.ju?(a.y+=p*(this.v-a.x)/d,a.x=this.v):(a.y+=p*(this.C-a.x)/d,a.x=this.C),o=this.Zj(a)):r!=0?(r&b.ku?(c.x+=d*(this.G-c.y)/p,c.y=this.G):(c.x+=d*(this.H-c.y)/p,c.y=this.H),r=this.Zj(c)):(o&b.ku?(a.x+=d*(this.G-a.y)/p,a.y=this.G):(a.x+=d*(this.H-a.y)/p,a.y=this.H),o=this.Zj(a)):r&b.ZC?(r&b.ku?(c.x+=d*(this.G-c.y)/p,c.y=this.G):(c.x+=d*(this.H-c.y)/p,c.y=this.H),r=this.Zj(c)):o&b.ZC?(o&b.ku?(a.x+=d*(this.G-a.y)/p,a.y=this.G):(a.x+=d*(this.H-a.y)/p,a.y=this.H),o=this.Zj(a)):r!=0?(r&b.ju?(c.y+=p*(this.v-c.x)/d,c.x=this.v):(c.y+=p*(this.C-c.x)/d,c.x=this.C),r=this.Zj(c)):(o&b.ju?(a.y+=p*(this.v-a.x)/d,a.x=this.v):(a.y+=p*(this.C-a.x)/d,a.x=this.C),o=this.Zj(a)),r&o)return 0}while(r|o);return l},b.prototype.Zj=function(c){return(c.x<this.v?1:0)|(c.x>this.C?1:0)<<1|(c.y<this.G?1:0)<<2|(c.y>this.H?1:0)<<3},b.prototype.Bi=function(c){return!this.B()&&(this.R()<=c||this.ca()<=c)},b.prototype.tb=function(c){return c instanceof u.h?Math.sqrt(this.iK(c)):Math.sqrt(this.px(c))},b.prototype.px=function(c){var a=0,r=0,o=this.v-c.C;return o>a&&(a=o),(o=this.G-c.H)>r&&(r=o),(o=c.v-this.C)>a&&(a=o),(o=c.G-this.H)>r&&(r=o),a*a+r*r},b.prototype.iK=function(c){var a=0,r=0,o=this.v-c.x;return o>a&&(a=o),(o=this.G-c.y)>r&&(r=o),(o=c.x-this.C)>a&&(a=o),(o=c.y-this.H)>r&&(r=o),a*a+r*r},b.prototype.cn=function(c){this.B()?c.Oa():c.K(this.v,this.C)},b.ju=1,b.ku=4,b.YC=3,b.ZC=12,b}();u.l=A}(B||(B={})),function(u){var A,b;(b=A||(A={}))[b.initialize=0]="initialize",b[b.initializeRed=1]="initializeRed",b[b.initializeBlue=2]="initializeBlue",b[b.initializeRedBlue=3]="initializeRedBlue",b[b.sweep=4]="sweep",b[b.sweepBruteForce=5]="sweepBruteForce",b[b.sweepRedBlueBruteForce=6]="sweepRedBlueBruteForce",b[b.sweepRedBlue=7]="sweepRedBlue",b[b.sweepRed=8]="sweepRed",b[b.sweepBlue=9]="sweepBlue",b[b.iterate=10]="iterate",b[b.iterateRed=11]="iterateRed",b[b.iterateBlue=12]="iterateBlue",b[b.iterateBruteForce=13]="iterateBruteForce",b[b.iterateRedBlueBruteForce=14]="iterateRedBlueBruteForce",b[b.resetRed=15]="resetRed",b[b.resetBlue=16]="resetBlue";var c=function(){function a(r,o){this.ci=r,this.dH=o}return a.prototype.nr=function(r,o,l){this.ci.JX(l,r,o,this.dH)},a.prototype.$p=function(r){return this.ci.Rr(r,this.dH)},a}();A=function(){function a(){this.ow=this.oo=this.ff=this.rd=null,this.wq=new u.l,this.Am=this.Hj=this.Ij=this.Ad=this.Ef=this.Ld=this.cw=this.fo=this.qd=this.Eb=null,this.Xb=-1,this.qa=0,this.Nk()}return a.prototype.kr=function(){this.Nk(),this.Pv=!0,this.Eb==null?(this.fo=new u.ia(0),this.Eb=[]):(this.fo.Bh(0),this.Eb.length=0)},a.prototype.ad=function(r,o){if(!this.Pv)throw u.i.Hb();var l=new u.l;l.K(o),this.fo.add(r),this.Eb.push(l)},a.prototype.Fp=function(){if(!this.Pv)throw u.i.Hb();this.Pv=!1,this.Eb!=null&&0<this.Eb.length&&(this.Xb=0,this.Ic=!1)},a.prototype.pK=function(){this.Nk(),this.Ov=!0,this.Eb==null?(this.fo=new u.ia(0),this.Eb=[]):(this.fo.Bh(0),this.Eb.length=0)},a.prototype.JD=function(r,o){if(!this.Ov)throw u.i.Hb();var l=new u.l;l.K(o),this.fo.add(r),this.Eb.push(l)},a.prototype.iF=function(){if(!this.Ov)throw u.i.Hb();this.Ov=!1,this.Eb!=null&&0<this.Eb.length&&this.qd!=null&&0<this.qd.length&&(this.Xb==-1||this.Xb==2?this.Xb=3:this.Xb!=3&&(this.Xb=1),this.Ic=!1)},a.prototype.oK=function(){this.Nk(),this.Nv=!0,this.qd==null?(this.cw=new u.ia(0),this.qd=[]):(this.cw.Bh(0),this.qd.length=0)},a.prototype.ED=function(r,o){if(!this.Nv)throw u.i.Hb();var l=new u.l;l.K(o),this.cw.add(r),this.qd.push(l)},a.prototype.hF=function(){if(!this.Nv)throw u.i.Hb();this.Nv=!1,this.Eb!=null&&0<this.Eb.length&&this.qd!=null&&0<this.qd.length&&(this.Xb==-1||this.Xb==1?this.Xb=3:this.Xb!=3&&(this.Xb=2),this.Ic=!1)},a.prototype.next=function(){if(this.Ic)return!1;for(var r=!0;r;)switch(this.Xb){case 0:r=this.Gz();break;case 1:r=this.rS();break;case 2:r=this.oS();break;case 3:r=this.qS();break;case 4:r=this.UX();break;case 5:r=this.QX();break;case 6:r=this.RX();break;case 7:r=this.SX();break;case 8:r=this.ux();break;case 9:r=this.iC();break;case 10:r=this.Uz();break;case 11:r=this.jT();break;case 12:r=this.gT();break;case 13:r=this.hT();break;case 14:r=this.iT();break;case 15:r=this.kJ();break;case 16:r=this.jJ();break;default:throw u.i.Qa()}return!this.Ic},a.prototype.aC=function(r){this.qa=r},a.prototype.uz=function(r){return this.Eb[r]},a.prototype.az=function(r){return this.qd[r]},a.prototype.nl=function(r){return this.fo.read(r)},a.prototype.hl=function(r){return this.cw.read(r)},a.Tz=function(r){return!(1&~r)},a.eq=function(r){return!(1&r)},a.prototype.Nk=function(){this.Pv=this.Nv=this.Ov=!1,this.Cf=this.Df=this.Rg=this.pe=-1,this.Ic=!0},a.prototype.Gz=function(){if(this.Af=this.Vf=-1,10>this.Eb.length)return this.pe=this.Eb.length,this.Xb=5,!0;this.rd==null&&(this.rd=new u.sr(!0),this.oo=this.rd.getIterator(),this.Ld=new u.ia(0)),this.rd.kr();for(var r=0;r<this.Eb.length;r++){var o=this.Eb[r];this.rd.Br(o.v,o.C)}for(this.rd.Fp(),this.Ld.Jb(2*this.Eb.length),this.Ld.resize(0),r=0;r<2*this.Eb.length;r++)this.Ld.add(r);return this.Kt(this.Ld,2*this.Eb.length,!0),this.pe=2*this.Eb.length,this.Xb=4,!0},a.prototype.rS=function(){if(this.Af=this.Vf=-1,10>this.Eb.length||10>this.qd.length)return this.pe=this.Eb.length,this.Xb=6,!0;this.rd==null&&(this.rd=new u.sr(!0),this.oo=this.rd.getIterator(),this.Ld=new u.ia(0)),this.rd.kr();for(var r=0;r<this.Eb.length;r++){var o=this.Eb[r];this.rd.Br(o.v,o.C)}for(this.rd.Fp(),this.Ld.Jb(2*this.Eb.length),this.Ld.resize(0),r=0;r<2*this.Eb.length;r++)this.Ld.add(r);return this.Kt(this.Ld,this.Ld.size,!0),this.pe=this.Ld.size,this.Df!=-1&&(this.Ad.bh(this.Df),this.Ij.resize(0),this.Df=-1),this.Xb=7,this.jJ()},a.prototype.oS=function(){if(this.Af=this.Vf=-1,10>this.Eb.length||10>this.qd.length)return this.pe=this.Eb.length,this.Xb=6,!0;this.ff==null&&(this.ff=new u.sr(!0),this.ow=this.ff.getIterator(),this.Ef=new u.ia(0)),this.ff.kr();for(var r=0;r<this.qd.length;r++){var o=this.qd[r];this.ff.Br(o.v,o.C)}for(this.ff.Fp(),this.Ef.Jb(2*this.qd.length),this.Ef.resize(0),r=0;r<2*this.qd.length;r++)this.Ef.add(r);return this.Kt(this.Ef,this.Ef.size,!1),this.Rg=this.Ef.size,this.Cf!=-1&&(this.Ad.bh(this.Cf),this.Hj.resize(0),this.Cf=-1),this.Xb=7,this.kJ()},a.prototype.qS=function(){if(this.Af=this.Vf=-1,10>this.Eb.length||10>this.qd.length)return this.pe=this.Eb.length,this.Xb=6,!0;this.rd==null&&(this.rd=new u.sr(!0),this.oo=this.rd.getIterator(),this.Ld=new u.ia(0)),this.ff==null&&(this.ff=new u.sr(!0),this.ow=this.ff.getIterator(),this.Ef=new u.ia(0)),this.rd.kr();for(var r=0;r<this.Eb.length;r++){var o=this.Eb[r];this.rd.Br(o.v,o.C)}for(this.rd.Fp(),this.ff.kr(),r=0;r<this.qd.length;r++)o=this.qd[r],this.ff.Br(o.v,o.C);for(this.ff.Fp(),this.Ld.Jb(2*this.Eb.length),this.Ef.Jb(2*this.qd.length),this.Ld.resize(0),this.Ef.resize(0),r=0;r<2*this.Eb.length;r++)this.Ld.add(r);for(r=0;r<2*this.qd.length;r++)this.Ef.add(r);return this.Kt(this.Ld,this.Ld.size,!0),this.Kt(this.Ef,this.Ef.size,!1),this.pe=this.Ld.size,this.Rg=this.Ef.size,this.Df!=-1&&(this.Ad.bh(this.Df),this.Ij.resize(0),this.Df=-1),this.Cf!=-1&&(this.Ad.bh(this.Cf),this.Hj.resize(0),this.Cf=-1),this.Xb=7,!0},a.prototype.UX=function(){var r=this.Ld.get(--this.pe),o=r>>1;return a.eq(r)?(this.rd.remove(o),this.pe!=0||(this.Af=this.Vf=-1,this.Ic=!0,!1)):(this.oo.EB(this.Eb[o].v,this.Eb[o].C,this.qa),this.Vf=o,this.Xb=10,!0)},a.prototype.QX=function(){return--this.pe==-1?(this.Af=this.Vf=-1,this.Ic=!0,!1):(this.Rg=this.Vf=this.pe,this.Xb=13,!0)},a.prototype.RX=function(){return--this.pe==-1?(this.Af=this.Vf=-1,this.Ic=!0,!1):(this.Vf=this.pe,this.Rg=this.qd.length,this.Xb=14,!0)},a.prototype.SX=function(){var r=this.Ld.get(this.pe-1),o=this.Ef.get(this.Rg-1),l=this.Rr(r,!0),d=this.Rr(o,!1);return l>d?this.ux():l<d?this.iC():a.Tz(r)?this.ux():a.Tz(o)?this.iC():this.ux()},a.prototype.ux=function(){var r=this.Ld.get(--this.pe),o=r>>1;if(a.eq(r))return this.Df!=-1&&this.Ij.get(o)!=-1?(this.Ad.jd(this.Df,this.Ij.get(o)),this.Ij.set(o,-1)):this.rd.remove(o),this.pe!=0||(this.Af=this.Vf=-1,this.Ic=!0,!1);if(this.Cf!=-1&&0<this.Ad.bs(this.Cf))for(r=this.Ad.rc(this.Cf);r!=-1;){var l=this.Ad.getData(r);this.ff.vj(l),this.Hj.set(l,-1),l=this.Ad.lb(r),this.Ad.jd(this.Cf,r),r=l}return 0<this.ff.size()?(this.ow.EB(this.Eb[o].v,this.Eb[o].C,this.qa),this.Vf=o,this.Xb=12):(this.Df==-1&&(this.Ad==null&&(this.Ad=new u.jp),this.Ij=new u.ia(0),this.Ij.resize(this.Eb.length,-1),this.Ij.Wj(-1,0,this.Eb.length),this.Df=this.Ad.Ph(1)),this.Ij.set(o,this.Ad.addElement(this.Df,o)),this.Xb=7),!0},a.prototype.iC=function(){var r=this.Ef.get(--this.Rg),o=r>>1;if(a.eq(r))return this.Cf!=-1&&this.Hj.get(o)!=-1?(this.Ad.jd(this.Cf,this.Hj.get(o)),this.Hj.set(o,-1)):this.ff.remove(o),this.Rg!=0||(this.Af=this.Vf=-1,this.Ic=!0,!1);if(this.Df!=-1&&0<this.Ad.bs(this.Df))for(r=this.Ad.rc(this.Df);r!=-1;){var l=this.Ad.getData(r);this.rd.vj(l),this.Ij.set(l,-1),l=this.Ad.lb(r),this.Ad.jd(this.Df,r),r=l}return 0<this.rd.size()?(this.oo.EB(this.qd[o].v,this.qd[o].C,this.qa),this.Af=o,this.Xb=11):(this.Cf==-1&&(this.Ad==null&&(this.Ad=new u.jp),this.Hj=new u.ia(0),this.Hj.resize(this.qd.length,-1),this.Hj.Wj(-1,0,this.qd.length),this.Cf=this.Ad.Ph(0)),this.Hj.set(o,this.Ad.addElement(this.Cf,o)),this.Xb=7),!0},a.prototype.Uz=function(){if(this.Af=this.oo.next(),this.Af!=-1)return!1;var r=this.Ld.get(this.pe)>>1;return this.rd.vj(r),this.Xb=4,!0},a.prototype.jT=function(){if(this.Vf=this.oo.next(),this.Vf!=-1)return!1;this.Af=this.Vf=-1;var r=this.Ef.get(this.Rg)>>1;return this.ff.vj(r),this.Xb=7,!0},a.prototype.gT=function(){if(this.Af=this.ow.next(),this.Af!=-1)return!1;var r=this.Ld.get(this.pe)>>1;return this.rd.vj(r),this.Xb=7,!0},a.prototype.hT=function(){if(--this.Rg==-1)return this.Xb=5,!0;this.wq.K(this.Eb[this.pe]);var r=this.Eb[this.Rg];return this.wq.W(this.qa,this.qa),!this.wq.isIntersecting(r)||(this.Af=this.Rg,!1)},a.prototype.iT=function(){if(--this.Rg==-1)return this.Xb=6,!0;this.wq.K(this.Eb[this.pe]);var r=this.qd[this.Rg];return this.wq.W(this.qa,this.qa),!this.wq.isIntersecting(r)||(this.Af=this.Rg,!1)},a.prototype.kJ=function(){return this.rd==null?(this.Ic=!0,!1):(this.pe=this.Ld.size,0<this.rd.size()&&this.rd.reset(),this.Df!=-1&&(this.Ad.bh(this.Df),this.Ij.resize(0),this.Df=-1),this.Ic=!1,!0)},a.prototype.jJ=function(){return this.ff==null?(this.Ic=!0,!1):(this.Rg=this.Ef.size,0<this.ff.size()&&this.ff.reset(),this.Cf!=-1&&(this.Ad.bh(this.Cf),this.Hj.resize(0),this.Cf=-1),this.Ic=!1,!0)},a.prototype.Kt=function(r,o,l){this.Am==null&&(this.Am=new u.Xt),l=new c(this,l),this.Am.sort(r,0,o,l)},a.prototype.JX=function(r,o,l,d){var p=this;r.Vd(o,l,function(g,y){var w=p.Rr(g,d),S=p.Rr(y,d);return w<S||w==S&&a.eq(g)&&a.Tz(y)?-1:1})},a.prototype.Rr=function(r,o){var l=.5*this.qa;return o?(o=this.Eb[r>>1],a.eq(r)?o.G-l:o.H+l):(o=this.qd[r>>1],a.eq(r)?o.G-l:o.H+l)},a}(),u.xC=A}(B||(B={})),function(u){var A=function(){function b(){}return b.construct=function(c,a,r,o,l,d){var p=new b;return p.v=c,p.G=a,p.Ye=r,p.C=o,p.H=l,p.Bg=d,p},b.prototype.Oa=function(){this.Ye=this.v=NaN},b.prototype.B=function(){return isNaN(this.v)},b.prototype.XS=function(){return isNaN(this.Ye)},b.prototype.K=function(c,a,r,o,l,d){o!==void 0?typeof c=="number"?(this.v=c,this.G=a,this.Ye=r,this.C=o,this.H=l,this.Bg=d):(this.v=c.x-.5*a,this.C=this.v+a,this.G=c.y-.5*r,this.H=this.G+r,this.Ye=c.z-.5*o,this.Bg=this.Ye+o):(this.v=c,this.G=a,this.Ye=r,this.C=c,this.H=a,this.Bg=r)},b.prototype.move=function(c){this.v+=c.x,this.G+=c.y,this.Ye+=c.z,this.C+=c.x,this.H+=c.y,this.Bg+=c.z},b.prototype.copyTo=function(c){c.v=this.v,c.G=this.G,c.C=this.C,c.H=this.H},b.prototype.Lk=function(c,a,r){this.v>c?this.v=c:this.C<c&&(this.C=c),this.G>a?this.G=a:this.H<a&&(this.H=a),isNaN(this.Ye)==0?this.Ye>r?this.Ye=r:this.Bg<r&&(this.Bg=r):this.Bg=this.Ye=r},b.prototype.Zb=function(c,a,r){if(typeof c=="number")this.B()?(this.v=c,this.G=a,this.Ye=r,this.C=c,this.H=a,this.Bg=r):this.Lk(c,a,r);else if(c instanceof u.Nd)this.Zb(c.x,c.y,c.z);else{if(!(c instanceof b))throw u.i.N();c.B()||(this.Zb(c.v,c.G,c.Ye),this.Zb(c.C,c.H,c.Bg))}},b.prototype.construct=function(c,a,r){c.B()||a.B()?this.Oa():(this.v=c.oa,this.C=c.va,this.G=a.oa,this.H=a.va,this.Ye=r.oa,this.Bg=r.va)},b.prototype.nB=function(c){if(c==null||8>c.length)throw u.i.N();c[0]=new u.Nd(this.v,this.G,this.Ye),c[1]=new u.Nd(this.v,this.H,this.Ye),c[2]=new u.Nd(this.C,this.H,this.Ye),c[3]=new u.Nd(this.C,this.G,this.Ye),c[4]=new u.Nd(this.v,this.G,this.Bg),c[5]=new u.Nd(this.v,this.H,this.Bg),c[6]=new u.Nd(this.C,this.H,this.Bg),c[7]=new u.Nd(this.C,this.G,this.Bg)},b.prototype.Zw=function(c){if(c==null||c.length==0)this.Oa();else{var a=c[0];for(this.K(a.x,a.y,a.z),a=1;a<c.length;a++){var r=c[a];this.Lk(r.x,r.y,r.z)}}},b}();u.OK=A}(B||(B={})),function(u){(function(A){A.Qa=function(){var b=Error();return b.message="Internal Error",b},A.Ie=function(){var b=Error();return b.message="Not Implemented",b},A.Xk=function(){var b=Error();return b.message="The input unit and the spatial reference unit are not of the same unit type.ie Linear vs.Angular",b},A.Hb=function(){var b=Error();return b.message="Invalid Call",b},A.N=function(b){var c=Error();return c.message="Illegal Argument Exception",b!==void 0&&(c.message+=": "+b),c},A.fu=function(b){var c=Error();return c.message=b!==void 0?"Runtime Exception: "+b:"Runtime Exception.",c},A.fa=function(b){var c=Error();return c.message="Geometry Exception: "+b,c},A.GK=function(){var b=Error();return b.message="Assert Failed Exception",b},A.ce=function(){var b=Error();return b.message="IndexOutOfBoundsException",b},A.WC=function(){var b=Error();return b.message="UserCancelException",b}})(u.i||(u.i={}))}(B||(B={})),function(u){(u=u.bm||(u.bm={}))[u.forward=0]="forward",u[u.reverse=1]="reverse"}(B||(B={})),function(u){var A=function(){function a(r,o){this.Wa=r,this.FH=o,this.LH=-1,this.sl=!1}return a.prototype.qe=function(){},a.prototype.next=function(){if(++this.LH==this.FH.I())return null;var r=this.FH.Na(this.LH);r.scale(this.Wa.ec);var o=new u.Da;return this.Wa.sy(r,this.sl,o),o},a.prototype.La=function(){return 0},a}(),b=function(){function a(r,o,l){this.Wa=r,this.rw=o,this.Xn=!1,this.co=l,this.bw=[0],this.sk=[0],this.Nj=[0],this.Gs=[0],this.sl=!1,this.qq=new u.Da,this.uk=[]}return a.prototype.qe=function(){},a.prototype.next=function(){if(this.Xn){this.Xn=!1,this.sd.ha();var r=u.aa.jg(this.qq);return u.Fg.Mk(r,this.Wa.Aq,!0,!0,this.Wa.Ub)}if(this.sd==null&&(this.sd=this.rw.Ga(),this.sd.$a(),this.co!=null&&this.co.Yk(null,0)),!this.sd.Ha()){if(!this.sd.$a())return null;this.co!=null&&this.co.Yk(null,0)}r=null,this.sk[0]=0,this.FA=this.bw[0]=0,this.di=NaN,this.Xn=!1;for(var o=this.uk.length=0,l=new u.h,d=new u.h,p=[0];this.sd.Ha()&&8>this.FA;){var g=this.sd.ha();if(l.L(g.ac()),d.L(g.wc()),l.scale(this.Wa.ec),d.scale(this.Wa.ec),u.cj.Mu(l,d)?l.x=d.x:u.cj.Ku(l,d)&&(d.x=l.x),this.uk.length=0,u.cj.tF(this.Wa.Tb,this.Wa.kc,this.Wa.ze,l,d,this.Wa.QA,this.Wa.Zs,p,this.Nj,this.Gs,this.uk,this.bw),this.co!=null&&(g=this.uk.slice(0),this.co.qG(this.co.da()-1,g,g.length-1)),u.cj.Lu(l,d)?(this.qq.Oa(),this.Wa.sy(l,this.sl,this.qq),this.Xn=!0):(this.qq.Oa(),this.Xn=this.xy(p[0],this.qq)),this.Xn){if(this.sd.li(),this.sd.Ez()){this.sd.li(),this.sd.ha();break}this.sd.DW();break}r==null&&(r=new u.Da).Yk(null,0),this.OD(r),o++}if(this.bw[0]=0,0<o){for(p=this.sd.wb();0<o;)this.sd.li(),l.L(this.rw.Na(this.sd.wb())),d.L(this.rw.Na(this.sd.ik())),l.scale(this.Wa.ec),d.scale(this.Wa.ec),this.sl&&(u.cj.Mu(l,d)?l.x=d.x:u.cj.Ku(l,d)&&(d.x=l.x)),this.uk.length=0,u.cj.tF(this.Wa.Tb,this.Wa.kc,this.Wa.ze,d,l,this.Wa.QA,this.Wa.Zs,null,this.Nj,this.Gs,this.uk,this.bw),this.OD(r),o--;return l.L(this.rw.Na(this.sd.wb())),l.scale(this.Wa.ec),c.Hr(this.Wa.Tb,this.Wa.kc,this.Wa.ec,this.Wa.rb,l,this.di+1.570796326794897,this.di+4.71238898038469,this.Wa.ao,this.sl,this.sk,r,NaN,NaN),this.sd.Vb(p),this.sd.ha(),o=u.ta.kj(null,r,!0),u.Fg.Mk(r,o,!0,!0,this.Wa.Ub)}return this.Xn=!1,this.sd.ha(),r=u.aa.jg(this.qq),u.Fg.Mk(r,this.Wa.Aq,!0,!0,this.Wa.Ub)},a.prototype.OD=function(r){var o=this.uk[0],l=this.Nj[0]-1.570796326794897,d=this.Gs[0]+1.570796326794897;if(!isNaN(this.di)){if(this.di>=this.Nj[0]){var p=this.di+1.570796326794897;l=p+3.141592653589793-(this.di-this.Nj[0])}else l=(p=this.di+1.570796326794897)+3.141592653589793-(6.283185307179586-(this.Nj[0]-this.di));var g=!(this.di>=this.Nj[0]&&3.141592653589793>=this.di-this.Nj[0])&&!(this.di<this.Nj[0]&&3.141592653589793<=this.Nj[0]-this.di),y=!1;if(Math.abs(l-p)<=.5*this.Wa.ao)if(g){var w=r.Na(r.I()-2);w.scale(this.Wa.ec);var S=new u.ga(0);for(u.kb.Xy(this.Wa.Tb,this.Wa.kc,o.x,o.y,w.x,w.y,S),w=S.u;w<=p;)w+=6.283185307179586;for(;w>p;)w-=6.283185307179586;w<l&&(y=!0)}else y=!0;y?(r.DB(0,r.I()-1),this.sl||((o=new u.h).L(r.Na(r.I()-1)),o.scale(this.Wa.ec),-3.141592653589793>o.x-this.sk[0]?this.sk[0]-=6.283185307179586:3.141592653589793<o.x-this.sk[0]&&(this.sk[0]+=6.283185307179586)),g||(l=.5*(l+p))):(g?((p=new u.h).L(o),p.scale(1/this.Wa.ec),r.wf(0,-1,p)):c.Hr(this.Wa.Tb,this.Wa.kc,this.Wa.ec,this.Wa.rb,this.uk[0],p,l,this.Wa.ao,this.sl,this.sk,r,NaN,NaN),this.FA+=1)}c.qy(this.Wa.Tb,this.Wa.kc,this.Wa.ec,this.Wa.rb,this.Wa.ze,this.uk,l,d,this.sl,this.sk,r),this.di=this.Gs[0]},a.prototype.xy=function(r,o){return this.Wa.xy(this.uk,r,this.Nj[0],this.Gs[0],this.sl,o)},a.prototype.La=function(){return 0},a}(),c=function(){function a(){}return a.buffer=function(r,o,l,d,p,g){if(r==null)throw u.i.N("Geometry::Geodesic_bufferer::buffer");if(r.B())return new u.Da(r.description);var y=new a;y.Qg=o,y.Jc=u.cb.sc(o);var w=u.cb.vv(y.Jc);if(y.Ub=g,y.Tb=u.cb.ev(y.Jc),y.kc=w*(2-w),y.ec=y.Jc.Hd().ai,y.qa=y.Qg.Kn(),y.Aq=y.Jc.Kn(),y.Zs=y.Aq*y.ec,y.zq=1.570796326794897/y.ec,y.OY=3.141592653589793/y.ec,y.Js=6.283185307179586/y.ec,y.PY=y.Js/6,y.LA=0,y.NY=1.5707963267948966*y.Tb/y.LA,l==4?(y.ze=2,y.Wv=!0):(y.ze=l,y.Wv=!1),y.Ka=d,y.rb=Math.abs(d),isNaN(p)||.001>p?y.xX():y.$n=p,l=r.getType(),u.aa.yd(l)?((l=new u.Ta(r.description)).oc(r,!0),r=l,l=1607):l==197&&(l=new u.l,r.A(l),l.R()<=y.qa||l.ca()<=y.qa?((l=new u.Ta(r.description)).ad(r,!1),r=l,l=1607):((l=new u.Da(r.description)).ad(r,!1),r=l,l=1736)),y.yX(),u.aa.Rn(l)||y.zX(),y.rb<=.5*y.$n)return l!=1736?new u.Da(r.description):y.Wv?r:u.cj.Qr(r,y.Qg,y.ze,y.QA,-1,g);if(0>y.Ka&&l!=1736)return new u.Da(r.description);if(y.Wv&&u.aa.Hc(l)?(o=u.cj.Qr(r,o,4,NaN,y.$n,g),r=u.cb.zh(o,y.Qg,y.Jc)):r=u.cb.zh(r,y.Qg,y.Jc),(r=u.Hh.lj(r,y.Jc)).B())return new u.Da(r.description);switch(!y.Wv&&u.aa.Hc(l)&&(r=u.cj.pI(y.ec,r)),r=a.KX(r,y.Jc),l){case 1736:o=y.UN(r);break;case 1607:o=y.VN(r);break;case 550:o=y.SN(r);break;case 33:o=y.TN(r);break;default:throw u.i.fa("corrupted_geometry")}return(y=u.cb.zh(o,y.Jc,y.Qg)).Jl(r.description),y},a.prototype.UN=function(r){var o=new u.Da;r=new b(this,r,o),r=u.Gh.local().V(r,this.Jc,this.Ub).next(),r=u.ip.nj(r,this.Jc,2);var l=new u.Dd;return l.scale(1/this.ec,1/this.ec),o.Oc(l),o=u.ip.nj(o,this.Jc,2),0<=this.Ka?u.Gh.local().V(o,r,this.Jc,this.Ub):u.kp.local().V(o,r,this.Jc,this.Ub)},a.prototype.VN=function(r){return r=new b(this,r,null),r=u.Gh.local().V(r,this.Jc,this.Ub).next(),u.ip.nj(r,this.Jc,2)},a.prototype.SN=function(r){return r=new A(this,r),r=u.Gh.local().V(r,this.Jc,this.Ub).next(),u.ip.nj(r,this.Jc,2)},a.prototype.TN=function(r){(r=r.D()).scale(this.ec);var o=new u.Da;return this.sy(r,!1,o),u.ip.nj(o,this.Jc,2)},a.prototype.xy=function(r,o,l,d,p,g){var y=r[0],w=r[r.length-1],S=y.y>w.y?y.y:w.y,k=u.F.q(this.Tb,this.kc,y.y<w.y?y.y:w.y);if(S=u.F.q(this.Tb,this.kc,S),.001<this.LA-(k+o+this.rb)&&.001<this.LA+(S-o-this.rb))return!1;k=(o=l-1.570796326794897)-3.141592653589793,S=o+3.141592653589793;var C=(l=d+1.570796326794897)+3.141592653589793,O=[NaN],R=[NaN],N=[NaN],j=[NaN];if(d=!1,a.dJ(this.Tb,this.kc,this.rb,y,o,k,w,l,O,R),a.dJ(this.Tb,this.kc,this.rb,w,C,l,y,k,N,j),(l<O[0]&&O[0]<C||l<R[0]&&R[0]<C)&&(d=!0),d||(k<N[0]&&N[0]<o||k<j[0]&&j[0]<o)&&(d=!0),!d&&p)return!1;for(var G=[],D=r.length-1;0<=D;D--)G.push(r[D]);return g.Oa(),g.Yk(null,0),D=[0],a.qy(this.Tb,this.kc,this.ec,this.rb,this.ze,r,o,l,p,D,g),a.Hr(this.Tb,this.kc,this.ec,this.rb,w,l,C,this.ao,p,D,g,O[0],R[0]),a.qy(this.Tb,this.kc,this.ec,this.rb,this.ze,G,C,S,p,D,g),a.Hr(this.Tb,this.kc,this.ec,this.rb,y,k,o,this.ao,p,D,g,N[0],j[0]),r=!1,p||(r=this.IE(this.ec,g)),d||r},a.prototype.sy=function(r,o,l){l.Oa(),l.Yk(null,0),a.Hr(this.Tb,this.kc,this.ec,this.rb,r,-this.ao,6.283185307179586,this.ao,o,[0],l,NaN,NaN),o||this.IE(this.ec,l)},a.prototype.IE=function(r,o){var l=this.vO(r,o);return r=this.wO(r,o),l||r},a.prototype.vO=function(r,o){var l=o.I(),d=!1,p=new u.l;if(o.A(p),!u.s.Y(p.H*r,1.570796326794897)&&!u.s.Y(p.G*r,-1.570796326794897))return!1;var g=new u.h;for(--l;0<=l;l--)o.D(l,g),(g.y==p.H&&u.s.Y(g.y*r,1.570796326794897)||g.y==p.G&&u.s.Y(g.y*r,-1.570796326794897))&&(d=!0,this.OI(g,l,o));return d},a.prototype.wO=function(r,o){var l=o.Na(0),d=o.Na(o.I()-1);return 3.141592653589793<Math.abs(l.x-d.x)*r?(this.VV(o),!0):this.uO(o)},a.prototype.uO=function(r){return 0>r.Ke()&&(this.UV(r),!0)},a.prototype.OI=function(r,o,l){var d=l.I(),p=0<o?o-1:d-1;if(d=l.Na(o<d-1?o+1:0),p=l.Na(p),!u.s.Y(d.y,r.y)&&!u.s.Y(d.x,r.x)){var g=new u.h;g.ma(d.x,r.y),l.Cb(o,g)}u.s.Y(p.y,r.y)||u.s.Y(p.x,r.x)||((d=new u.h).ma(p.x,r.y),l.wf(0,o,d))},a.prototype.VV=function(r){var o=new u.Da,l=new u.Da,d=new u.Dd,p=r.Na(0),g=r.Na(r.I()-1),y=new u.h;p.x>g.x?(g=this.zq,d.gg(-this.Js,0)):(g=-this.zq,d.gg(this.Js,0)),o.add(r,!1),r.Oa(),l.add(o,!1),l.Oc(d),p=new u.l,l.A(p),p.W((this.Js-p.R())/2,0),p.G=-this.zq,p.H=this.zq;for(var w=0;w<l.I();w++)l.D(w,y),o.wf(0,-1,y);for(l.Oc(d),w=0;w<l.I();w++)l.D(w,y),o.wf(0,-1,y);l=o.Na(0),d=o.Na(o.I()-1),y.ma(d.x,g),o.wf(0,-1,y),y.ma(.5*(d.x+l.x),g),o.wf(0,-1,y),y.ma(l.x,g),o.wf(0,-1,y),o=u.Hh.ks(o,this.Jc,2,!0,p.v),o=u.Hh.ks(o,this.Jc,2,!0,p.C),o=u.Ud.clip(o,p,this.Aq,NaN),r.add(o,!1)},a.prototype.UV=function(r){var o=new u.l;r.A(o),o.W((this.Js-o.R())/2,0),o.G=-this.zq,o.H=this.zq,r.Yk(null,0);var l=new u.h;l.ma(o.v,o.G),r.wf(1,-1,l),l.ma(o.v,o.H),r.wf(1,-1,l),l.ma(.5*(o.v+o.C),o.H),r.wf(1,-1,l),l.ma(o.C,o.H),r.wf(1,-1,l),l.ma(o.C,o.G),r.wf(1,-1,l),l.ma(.5*(o.v+o.C),o.G),r.wf(1,-1,l)},a.qy=function(r,o,l,d,p,g,y,w,S,k,C){var O=null;S||((O=new u.h).Rc(),0<C.I()&&(O.L(C.Na(C.I()-1)),O.scale(l)));var R=new u.ga(0),N=new u.ga(0),j=new u.ga(0),G=new u.h,D=new u.h,V=g[g.length-1];l=1/l;for(var Z=0;Z<g.length;Z++){var q=g[Z];if(Z==0)var ne=y;else Z==g.length-1?ne=w:(u.kb.wd(r,o,V.x,V.y,q.x,q.y,null,null,R,p),ne=R.u-1.570796326794897);u.kb.yi(r,o,q.x,q.y,d,ne,N,j),S?D.ma(N.u,j.u):(G.ma(N.u,j.u),a.gJ(q.x,G.x,O.x,k),D.ma(k[0]+G.x,G.y),O.L(D)),D.scale(l),C.wf(0,-1,D)}},a.Hr=function(r,o,l,d,p,g,y,w,S,k,C,O,R){if(!(y-g<w)){var N=new u.ga(0),j=new u.ga(0),G=new u.h,D=new u.h,V=null;S||((V=new u.h).Rc(),0<C.I()&&(V.L(C.Na(C.I()-1)),V.scale(l)));var Z=u.O.truncate(Math.ceil(g/w)),q=Z++*w;for(q==g&&(q=Z++*w),l=1/l;q<y+w&&(g<O&&O<q?(q=O,Z--):g<R&&R<q&&(q=R,Z--),!(q>=y));)u.kb.yi(r,o,p.x,p.y,d,q,N,j),S?D.ma(N.u,j.u):(G.ma(N.u,j.u),a.gJ(p.x,G.x,V.x,k),D.ma(k[0]+G.x,G.y),V.L(D)),D.scale(l),C.wf(0,-1,D),g=q,q=Z++*w}},a.dJ=function(r,o,l,d,p,g,y,w,S,k){var C=new u.h,O=new u.h,R=new u.ga(0),N=new u.ga(0);for(u.kb.yi(r,o,d.x,d.y,l,p,R,N),C.ma(R.u,N.u),u.kb.yi(r,o,d.x,d.y,l,g,R,N),O.ma(R.u,N.u),l=new u.ga(0),u.kb.Xy(r,o,y.x,y.y,C.x,C.y,l),S[0]=l.u,u.kb.Xy(r,o,y.x,y.y,O.x,O.y,l),k[0]=l.u;S[0]<=k[0];)S[0]+=6.283185307179586;for(;S[0]>k[0];)S[0]-=6.283185307179586;for(;S[0]>=w;)S[0]-=6.283185307179586,k[0]-=6.283185307179586;for(;S[0]<w;)S[0]+=6.283185307179586,k[0]+=6.283185307179586},a.gJ=function(r,o,l,d){if(isNaN(l)){for(;3.141592653589793<d[0]+o-r;)d[0]-=6.283185307179586;for(;3.141592653589793<r-(d[0]+o);)d[0]+=6.283185307179586}else 3.141592653589793<d[0]+o-l?d[0]-=6.283185307179586:3.141592653589793<l-(d[0]+o)&&(d[0]+=6.283185307179586)},a.KX=function(r,o){var l=r.getType(),d=u.aa.Hc(l)?r.da():l==550?r.I():1;if(d==1)return r;var p=new u.ia(0);p.resize(d);for(var g=[],y=new u.l,w=0;w<d;w++){if(p.write(w,w),u.aa.Hc(l)){r.Rj(w,y);var S=y.sf()}else S=r.Na(w);S=u.XK.$X(o,S),g[w]=S}for(p.Vd(0,p.size,function(k,C){return g[k]<g[C]?-1:g[k]>g[C]?1:0}),o=r.Ia(),w=0;w<d;w++)y=p.read(w),u.aa.Hc(l)?o.addPath(r,y,!0):o.Fd(r,y,y+1);return o},a.prototype.yX=function(){var r=Math.min(3.141592653589793*this.Tb-this.rb,this.rb);r=Math.min(r,.39269908169872414*this.Tb);var o=new u.h;o.ma(0,10*this.ec);var l=45*this.ec,d=new u.ga(0),p=new u.ga(0),g=new u.ga(0),y=new u.ga(0),w=new u.ga(0),S=new u.ga(0),k=new u.ga(0),C=new u.ga(0),O=new u.h,R=new u.h,N=new u.h,j=new u.h;u.kb.yi(this.Tb,this.kc,o.x,o.y,r,0,d,p),O.ma(d.u,p.u),u.kb.yi(this.Tb,this.kc,o.x,o.y,r,l,g,y),R.ma(g.u,y.u),d=new u.ga(0),p=new u.ga(0);for(var G=new u.ga(0);u.kb.yi(this.Tb,this.kc,o.x,o.y,r,.5*(0+l),w,S),N.ma(w.u,S.u),u.kb.wd(this.Tb,this.kc,O.x,O.y,R.x,R.y,d,p,null,2),u.kb.oj(this.Tb,this.kc,O.x,O.y,.5*d.u,p.u,k,C,2),j.ma(k.u,C.u),u.kb.wd(this.Tb,this.kc,N.x,N.y,j.x,j.y,G,null,null,2),!(G.u<=this.$n);)l*=.9,u.kb.yi(this.Tb,this.kc,o.x,o.y,r,l,g,y),R.ma(g.u,y.u);this.ao=6.283185307179586/Math.ceil(6.283185307179586/(l-0))},a.prototype.zX=function(){var r=Math.min(3.141592653589793*this.Tb-this.rb,this.rb);r=Math.min(r,.39269908169872414*this.Tb);var o=new u.h,l=new u.h;o.ma(0,10*this.ec),l.ma(10*this.ec,10*this.ec);var d=new u.ga(0),p=new u.ga(0),g=new u.ga(0);u.kb.wd(this.Tb,this.kc,o.x,o.y,l.x,l.y,g,d,p,this.ze);var y=new u.ga(0),w=new u.ga(0),S=new u.ga(0),k=new u.ga(0),C=new u.h,O=new u.ga(0),R=new u.ga(0),N=new u.ga(0),j=new u.ga(0),G=new u.ga(0),D=new u.ga(0),V=new u.ga(0),Z=new u.ga(0),q=new u.ga(0),ne=new u.h,ee=new u.h,he=new u.h,ye=new u.h,ge=1;d=d.u,p=p.u+1.570796326794897,g=g.u,u.kb.yi(this.Tb,this.kc,o.x,o.y,r,d-1.570796326794897,R,N),ne.ma(R.u,N.u),u.kb.yi(this.Tb,this.kc,l.x,l.y,r,p,j,G),ee.ma(j.u,G.u),R=new u.ga(0),N=new u.ga(0),p=new u.ga(0);for(var Le=new u.ga(0);u.kb.oj(this.Tb,this.kc,o.x,o.y,.5*(0+ge)*g,d,y,w,this.ze),C.ma(y.u,w.u),u.kb.wd(this.Tb,this.kc,o.x,o.y,C.x,C.y,null,null,O,this.ze),u.kb.yi(this.Tb,this.kc,C.x,C.y,r,O.u+1.570796326794897,D,V),he.ma(D.u,V.u),u.kb.wd(this.Tb,this.kc,ne.x,ne.y,ee.x,ee.y,R,N,null,2),u.kb.oj(this.Tb,this.kc,ne.x,ne.y,.5*R.u,N.u,Z,q,2),ye.ma(Z.u,q.u),u.kb.wd(this.Tb,this.kc,he.x,he.y,ye.x,ye.y,p,null,null,2),!(p.u<=this.$n);)ge*=.9,u.kb.oj(this.Tb,this.kc,o.x,o.y,ge*g,d,S,k,this.ze),l.ma(S.u,k.u),u.kb.wd(this.Tb,this.kc,o.x,o.y,l.x,l.y,null,null,Le,this.ze),u.kb.yi(this.Tb,this.kc,l.x,l.y,r,Le.u+1.570796326794897,j,G),ee.ma(j.u,G.u);1e5<(r=ge*g)&&(r=1e5),this.QA=r},a.prototype.xX=function(){var r=5e4<this.rb?100:1e4<this.rb?10:1;500>this.rb/r&&(r=this.rb/500),.01>r&&(r=.01),this.$n=r},a}();u.VK=c}(B||(B={})),function(u){var A=function(){function b(){}return b.Mf=function(c,a){var r=new u.h;r.L(a),c.push(r)},b.up=function(c,a){c.add(a.x),c.add(a.y)},b.hB=function(c){c.Bh(c.size-2)},b.oB=function(c,a){a.ma(c.get(c.size-2),c.get(c.size-1))},b.Qr=function(c,a,r,o,l,d){if(c==null)throw u.i.N();var p=c.getType();if(c.B()||u.aa.Rn(p))return c;var g=new b;g.Qg=a,g.Jc=u.cb.sc(a);var y=u.cb.vv(g.Jc);if(g.Ub=d,g.Tb=u.cb.ev(g.Jc),g.kc=y*(2-y),g.ec=g.Jc.Hd().ai,g.Aq=g.Jc.Kn(),g.Zs=g.Aq*g.ec,g.AA=o,g.zA=l,g.ze=r,p==197?(r=new u.Da(c.description)).ad(c,!1):u.aa.yd(p)?(r=new u.Ta(c.description)).oc(c,!0):r=c,g.ze!=4){if((a=g.Qg.Nb(g.Jc)==0?u.cb.zh(r,g.Qg,g.Jc):u.Hh.lj(r,g.Jc)).B())return a;a=b.pI(g.ec,a),a=g.Zy(a),a=u.ip.nj(a,g.Jc,g.ze),g=u.cb.zh(a,g.Jc,g.Qg)}else{if(u.Eg.Sb(a)==2?(c=u.cb.ml(),(a=u.Xj.local().V(r,c,a,d))==c&&(a=new u.Da,c.copyTo(a))):a=u.Hh.lj(r,g.Jc),a.B())return a;g=g.CX(a)}return g},b.pI=function(c,a){var r=new u.l;if(a.xc(r),3.141592653589793>r.R()*c)return a;var o=!1;r=a.Ga();for(var l=new u.h,d=new u.h;r.$a();)for(;r.Ha();){var p=r.ha();if(l.L(p.ac()),d.L(p.wc()),l.scale(c),d.scale(c),3.141592653589793<Math.abs(l.x-d.x)){var g=b.Lu(l,d);if(!g){o=!0;break}if(6.283185307179586<Math.abs(l.x-d.x)){o=!0;break}}}if(!o)return a;o=a.Ia();var y=1<a.description.Aa,w=new u.h,S=new u.h,k=new u.h,C=new u.h,O=new u.Sa;for(r.Zi();r.$a();)for(var R=NaN,N=[0];r.Ha();){if(p=r.ha(),l.L(p.ac()),d.L(p.wc()),l.scale(c),d.scale(c),isNaN(R)?(b.Wi(l.x,NaN,N),S.L(l)):S.L(k),R=S.x,g=b.Lu(l,d)){if(6.283185307179586<d.x-l.x)for(;6.283185307179586<d.x-l.x;)d.x-=6.283185307179586;if(-6.283185307179586>d.x-l.x)for(;-6.283185307179586>d.x-l.x;)d.x+=6.283185307179586;b.Wi(d.x,NaN,N),k.L(d)}else w.L(d),b.AU(w),b.Wi(w.x,R,N),k.ma(N[0]+w.x,w.y);.5>Math.abs(k.x-d.x)&&k.L(d),y?(p.Tw(0,O),C.L(S),C.scale(1/c),O.Cb(C),(g=r.vm())?o.nf(O):o.lineTo(O),r.Qn()&&!a.dc(r.gb)&&(p.Tw(1,O),C.L(k),C.scale(1/c),O.Cb(C),o.lineTo(O))):((g=r.vm())&&o.Hz(null,0),p=o.da()-1,C.L(S),C.scale(1/c),o.wf(p,-1,C),r.Qn()&&!a.dc(r.gb)&&(C.L(k),C.scale(1/c),o.wf(p,-1,C)))}return o},b.tF=function(c,a,r,o,l,d,p,g,y,w,S,k){var C=new u.h,O=new u.h,R=0<o.compare(l);b.fJ(R,o,l,C,O),b.uF(c,a,r,C,O,d,NaN,p,g,y,w,null,S,k),R&&b.fC(y,w,null,S)},b.prototype.Zy=function(c){var a=c.Ia(),r=c.Ga(),o=[],l=null,d=null,p=1<c.description.Aa;p&&(l=new u.be(0),d=new u.ig);for(var g=[0],y=new u.h,w=new u.h,S=new u.h,k=new u.h;r.$a();)for(g[0]=0;r.Ha();){var C=r.ha();y.L(C.ac()),w.L(C.wc()),y.scale(this.ec),w.scale(this.ec);var O=0<y.compare(w);b.fJ(O,y,w,S,k),o.length=0,l!=null&&l.Bh(0),0<this.AA?b.uF(this.Tb,this.kc,this.ze,S,k,this.AA,this.zA,this.Zs,null,null,null,p?l:null,o,g):b.aR(this.Tb,this.kc,this.ze,S,k,this.zA,this.Zs,p?l:null,o,g),O&&b.fC(null,null,p?l:null,o),o[0].L(C.ac()),o[o.length-1].L(C.wc());for(var R=1;R<o.length-1;R++)o[R].scale(1/this.ec);p?(O=b.eJ(O,C,d),b.TD(r.vm(),r.Qn()&&!c.dc(r.gb),C,O,l,o,a)):b.SD(r.vm(),r.Qn()&&!c.dc(r.gb),o,a)}return a},b.prototype.CX=function(c){var a=c.Ia(),r=c.Ga(),o=[],l=null,d=new u.ig,p=1<c.description.Aa;for(p&&(l=new u.be(0));r.$a();)for(;r.Ha();){var g=r.ha(),y=g.ac(),w=g.wc();y=0<y.compare(w),w=b.eJ(y,g,d),o.length=0,l!=null&&l.Bh(0),b.BX(this.Tb,this.kc,this.ec,w,this.Qg,this.AA,this.zA,p?l:null,o),y&&b.fC(null,null,p?l:null,o),p?b.TD(r.vm(),r.Qn()&&!c.dc(r.gb),g,w,l,o,a):b.SD(r.vm(),r.Qn()&&!c.dc(r.gb),o,a)}return a},b.SD=function(c,a,r,o){c&&o.Hz(null,0),c=o.da()-1;var l=r.slice(0);o.qG(c,l,l.length-1),a&&o.wf(c,-1,r[r.length-1])},b.TD=function(c,a,r,o,l,d,p){var g=new u.Sa;if(r.To(g),c?p.nf(g):p.lineTo(g),2<d.length){c=o.Qb();for(var y=1;y<d.length-1;y++){var w=o.NG(l.get(y)*c);o.Tw(w,g),g.Cb(d[y]),p.lineTo(g)}}a&&(r.Po(g),p.lineTo(g))},b.uF=function(c,a,r,o,l,d,p,g,y,w,S,k,C,O){var R=new u.ga(0),N=new u.ga(0),j=new u.ga(0);u.kb.wd(c,a,o.x,o.y,l.x,l.y,j,R,N,r),j=j.u;var G=R=R.u;0>G&&(G+=6.283185307179586),0>(N=N.u)&&(N+=6.283185307179586),y!=null&&(y[0]=j),w!=null&&(w[0]=G),S!=null&&(S[0]=N),w=y=NaN,k!=null&&(y=((w=u.F.Ah(c,a))-(S=u.F.q(c,a,o.y)))/j,w=(w+S)/j),S=b.Mu(o,l),N=b.Ku(o,l),G=S||N;var D=b.FE(o,l,g),V=new u.ga(0),Z=new u.ga(0),q=new u.h,ne=new u.h,ee=new u.h;b.Wi(o.x,NaN,O);var he=[O[0]];if(j<=d)b.Mf(C,o),b.Wi(l.x,NaN,O),k!=null&&k.add(0),G?(S&&b.kB(o,l,k,C),N&&b.iB(o,l,k,C)):D?b.jB(o,l,R,y,w,k,C):0<p&&(ne.ma(o.x-he[0],o.y),q.ma(l.x-O[0],l.y),b.Yy(c,a,r,o,j,R,ne,q,0,1,p,k,C,he)),b.Mf(C,l);else{var ye=j/((d=1+u.O.truncate(Math.ceil(j/d)))-1),ge=new u.h,Le=0;b.Mf(C,o),ge.L(o),ne.ma(o.x-O[0],o.y),k!=null&&k.add(0);for(var Te=1;Te<d;Te++){if(Te<d-1){u.kb.oj(c,a,o.x,o.y,Te*ye,R,V,Z,r),q.ma(V.u,Z.u),b.Wi(q.x,ge.x,O),ee.ma(O[0]+q.x,q.y);var Je=Te/(d-1)}else b.Wi(l.x,NaN,O),q.ma(l.x-O[0],l.y),ee.L(l),Je=1;G?(Te==1&&S&&b.kB(o,ee,k,C),Te==d-1&&N&&b.iB(ge,l,k,C)):D?b.EE(ge,ee,g)&&(o.x<l.x?ge.x>ee.x&&(O[0]+=6.283185307179586,ee.ma(O[0]+q.x,q.y)):ge.x<ee.x&&(O[0]-=6.283185307179586,ee.ma(O[0]+q.x,q.y)),b.jB(ge,ee,R,y,w,k,C)):0<p&&b.Yy(c,a,r,o,j,R,ne,q,Le,Je,p,k,C,he),b.Mf(C,ee),k!=null&&k.add(Je),ge.L(ee),ne.L(q),he[0]=O[0],Le=Je}}},b.aR=function(c,a,r,o,l,d,p,g,y,w){var S=new u.ga(0),k=new u.ga(0),C=new u.ga(0);u.kb.wd(c,a,o.x,o.y,l.x,l.y,C,S,k,r),k=C.u,S=S.u;var O=C=NaN;if(g!=null){O=u.F.Ah(c,a);var R=u.F.q(c,a,o.y);C=(O-R)/k,O=(O+R)/k}R=b.Mu(o,l);var N=b.Ku(o,l),j=R||N;p=b.FE(o,l,p);var G=b.Lu(o,l);G=j||p||G,b.Wi(o.x,NaN,w);var D=new u.h;b.Mf(y,o),D.L(o),g!=null&&g.add(0),G?(j?(R&&b.kB(o,l,g,y),N&&b.iB(o,l,g,y)):p&&b.jB(o,l,S,C,O,g,y),b.Wi(l.x,NaN,w),b.Mf(y,l)):k<=d?(b.Wi(l.x,NaN,w),b.Mf(y,l)):(C=new u.h,p=new u.h,C.L(o),p.L(l),C.x-=w[0],p.x-=w[0],-3.141592653589793>p.x?p.x+=6.283185307179586:3.141592653589793<p.x&&(p.x-=6.283185307179586),b.Yy(c,a,r,o,k,S,C,p,0,1,d,g,y,w),b.Mf(y,l),b.Wi(l.x,NaN,w)),g!=null&&g.add(1)},b.Yy=function(c,a,r,o,l,d,p,g,y,w,S,k,C,O){var R=new u.h,N=new u.h;R.ma(p.x+O[0],p.y),new u.ga(0),new u.ga(0),new u.ga(0),new u.ga(0);var j=new u.ga(0),G=new u.ga(0),D=new u.ga(0),V=new u.h,Z=new u.h,q=new u.h,ne=new u.h;V.L(p),Z.L(g),p=new u.be(0),g=new u.be(0),b.up(p,Z),g.add(w);var ee=new u.h,he=new u.yb,ye=[];for(b.YJ(4,ye);0<p.size;){for(var ge,Le=!1,Te=NaN,Je=0;3>Je;Je++)if(ge=ye[Je]*w+(1-ye[Je])*y,u.kb.oj(c,a,o.x,o.y,ge*l,d,j,G,r),q.ma(j.u,G.u),Je==0&&(Te=ge,ne.L(q)),b.WW(V,q,Z,he),he.hc(he.fe(q,!0),ee),u.kb.wd(c,a,q.x,q.y,ee.x,ee.y,D,null,null,2),D.u>S){Le=!0;break}Le?(Z.L(ne),w=Te,b.up(p,Z),g.add(w)):(b.hB(p),g.En(g.size-1,1,g.size-1),0<p.size&&(b.Wi(Z.x,R.x,O),N.ma(O[0]+Z.x,Z.y),b.Mf(C,N),R.L(N),k!=null&&k.add(w),V.L(Z),y=w,b.oB(p,Z),w=g.get(g.size-1)))}},b.BX=function(c,a,r,o,l,d,p,g,y){var w=new u.h,S=new u.h,k=new u.h,C=new u.h,O=new u.h,R=new u.h,N=new u.h,j=new u.h,G=new u.h,D=new u.h,V=new u.ga(0),Z=new u.ga(0),q=new u.h,ne=[[],[]],ee=u.Eg.Sb(l)==1;l=l.Xd(0);var he=o.ac(),ye=o.wc();ee?(R.ma(he.x*r,he.y*r),N.ma(ye.x*r,ye.y*r)):(ne[0][0]=he.x,ne[0][1]=he.y,ne[1][0]=ye.x,ne[1][1]=ye.y,u.cb.vt(),R.x=ne[0][0]*r,R.y=ne[0][1]*r,N.x=ne[1][0]*r,N.y=ne[1][1]*r);var ge=0,Le=0,Te=1,Je=o.Pn();w.L(he),S.L(ye),ye=new u.be(0);var We=new u.be(0),Oe=new u.be(0);b.up(ye,S),b.up(We,N),Oe.add(Te),b.Mf(y,w),g!=null&&g.add(Le);var Dt=[],Ri=0<p?Je?5:3:Je?5:1;b.YJ(Ri,Dt);for(var Gt=new u.ga(0),bt=new u.ga(0),wt=new u.ga(0),ot=new u.ga(0),Xt=new u.ga(0),rt=new u.ga(0),Jr=new u.ga(0);0<We.size;){var pt=!1,Cn=NaN;for(u.kb.wd(c,a,R.x,R.y,N.x,N.y,Gt,bt,null,2),he=0;he<Ri&&!(he==0&&(!Je&&0>=p&&Gt.u<=d&&3.141592653589793>Math.abs(R.x-N.x)||o.Ux(Le,Te)<=l));he++){var kt=Dt[he]*Te+(1-Dt[he])*Le;if(o.hc(kt,k),ee?j.ma(k.x*r,k.y*r):(ne[0][0]=k.x,ne[0][1]=k.y,u.cb.vt(),j.x=ne[0][0]*r,j.y=ne[0][1]*r),he==0&&(Cn=kt,O.L(k),D.L(j),0<d&&(Gt.u>d||3.141592653589793<=Math.abs(R.x-N.x)))){pt=!0;break}if(Je&&0<d){if(u.kb.wd(c,a,R.x,R.y,j.x,j.y,wt,null,null,2),wt.u>d||3.141592653589793<=Math.abs(R.x-j.x)){pt=!0;break}}else if(0<p){if(Je?(C.NS(w,S,Dt[he]),ee?G.ma(C.x*r,C.y*r):(ne[0][0]=C.x,ne[0][1]=C.y,u.cb.vt(),G.x=ne[0][0]*r,G.y=ne[0][1]*r)):(C.L(k),G.L(j)),u.kb.wd(c,a,R.x,R.y,G.x,G.y,ot,null,null,2),!(ot.u<=Gt.u)){pt=!0;break}if(u.kb.oj(c,a,R.x,R.y,ot.u,bt.u,V,Z,2),q.ma(V.u,Z.u),u.kb.wd(c,a,q.x,q.y,j.x,j.y,Xt,null,null,2),Xt.u>p){pt=!0;break}if(Je){if(u.kb.wd(c,a,q.x,q.y,G.x,G.y,rt,null,null,2),rt.u>p){pt=!0;break}if(u.kb.wd(c,a,G.x,G.y,j.x,j.y,Jr,null,null,2),Jr.u>p){pt=!0;break}}}}pt?(S.L(O),N.L(D),Te=Cn,b.up(ye,S),b.up(We,N),Oe.add(Te)):(b.hB(ye),b.hB(We),Oe.En(Oe.size-1,1,Oe.size-1),b.Mf(y,S),ge+=Gt.u,g!=null&&g.add(ge),0<We.size&&(w.L(S),R.L(N),Le=Te,b.oB(ye,S),b.oB(We,N),Te=Oe.get(Oe.size-1)))}if(g!=null)for(c=1/ge,he=0;he<g.size;he++)g.write(he,g.read(he)*c)},b.fC=function(c,a,r,o){o.reverse(),r!=null&&r.ni(0,r.size,1),r=c!=null?c[0]:NaN,o=a!=null?a[0]:NaN,c!=null&&(c[0]=o),a!=null&&(a[0]=r)},b.fJ=function(c,a,r,o,l){c?(o.L(r),l.L(a)):(o.L(a),l.L(r))},b.eJ=function(c,a,r){return c?(r.create(a.getType()),a.copyTo(r.get()),r.get().reverse(),r.get()):a},b.Wi=function(c,a,r){if(isNaN(a)){for(;3.141592653589793<r[0]-c;)r[0]-=6.283185307179586;for(;3.141592653589793<c-r[0];)r[0]+=6.283185307179586}else 3.141592653589793<r[0]+c-a?r[0]-=6.283185307179586:3.141592653589793<a-(r[0]+c)&&(r[0]+=6.283185307179586)},b.WW=function(c,a,r,o){3.141592653589793>Math.abs(a.x-c.x)?(o.Dc(c),3.141592653589793<=r.x-c.x?o.Ql(r.x-6.283185307179586,r.y):3.141592653589793<=c.x-r.x?o.Ql(r.x+6.283185307179586,r.y):o.Ql(r.x,r.y)):(o.Dc(r),3.141592653589793<=c.x-r.x?o.Ql(c.x-6.283185307179586,c.y):3.141592653589793<=r.x-c.x?o.Ql(c.x+6.283185307179586,c.y):o.Ql(c.x,c.y))},b.YJ=function(c,a){for(var r=0;r<c;r++){var o=Math.ceil(r/2)/(c+1);r%2!=0&&(o=-o),a[r]=.5+o}},b.Mu=function(c,a){return!!(u.s.Y(c.y,1.570796326794897)&&!u.s.Y(a.y,1.570796326794897)||u.s.Y(c.y,-1.570796326794897)&&!u.s.Y(a.y,-1.570796326794897))},b.Ku=function(c,a){return!!(u.s.Y(a.y,1.570796326794897)&&!u.s.Y(c.y,1.570796326794897)||u.s.Y(a.y,-1.570796326794897)&&!u.s.Y(c.y,-1.570796326794897))},b.FE=function(c,a,r){return!(!b.EE(c,a,r)||u.s.Y(c.y,1.570796326794897)||u.s.Y(c.y,-1.570796326794897)||u.s.Y(a.y,1.570796326794897)||u.s.Y(a.y,-1.570796326794897))},b.EE=function(c,a,r){return Math.abs(Math.abs(c.x-a.x)-3.141592653589793)<=r},b.Lu=function(c,a){return!!(u.s.Y(c.y,1.570796326794897)&&u.s.Y(a.y,1.570796326794897)||u.s.Y(c.y,-1.570796326794897)&&u.s.Y(a.y,-1.570796326794897))},b.kB=function(c,a,r,o){if(0<c.y){var l=new u.h;l.ma(a.x,1.570796326794897)}else(l=new u.h).ma(a.x,-1.570796326794897);u.s.Y(c.x,l.x)||u.s.Y(a.y,l.y)||(b.Mf(o,l),r!=null&&r.add(0))},b.iB=function(c,a,r,o){if(0<a.y){var l=new u.h;l.ma(c.x,1.570796326794897)}else(l=new u.h).ma(c.x,-1.570796326794897);u.s.Y(a.x,l.x)||u.s.Y(c.y,l.y)||(b.Mf(o,l),r!=null&&r.add(1))},b.jB=function(c,a,r,o,l,d,p){u.s.Cd(r)?(0<1.570796326794897-c.y&&((r=new u.h).ma(c.x,1.570796326794897),b.Mf(p,r),d!=null&&d.add(o)),0<1.570796326794897-a.y&&((r=new u.h).ma(a.x,1.570796326794897),b.Mf(p,r),d!=null&&d.add(o))):(0<1.570796326794897+c.y&&((r=new u.h).ma(c.x,-1.570796326794897),b.Mf(p,r),d!=null&&d.add(l)),0<1.570796326794897+a.y&&((r=new u.h).ma(a.x,-1.570796326794897),b.Mf(p,r),d!=null&&d.add(l)))},b.AU=function(c){if(-3.141592653589793>c.x)for(;-3.141592653589793>c.x;)c.x+=6.283185307179586;if(3.141592653589793<c.x)for(;3.141592653589793<c.x;)c.x-=6.283185307179586},b}();u.cj=A}(B||(B={})),function(u){u.ip=function(){function A(){}return A.nj=function(b,c,a){if(b==null||c==null||!u.cb.Wc(c))throw u.i.N();if(b.B())return b;var r=b,o=r.getType();if(u.aa.Hc(o)){r=u.Hh.lj(b,c),b=new u.l,r.A(b),o=u.ta.Wd(c,b,!1);for(var l=u.cb.gh(c),d=Math.floor((b.v-l.v)/l.R())*l.R()+l.v;d<b.C;)d>b.v+o&&d<b.C-o&&(r=u.Hh.ks(r,c,a,!0,d)),d+=l.R()}else{if(o==197)return(b=new u.Da(r.description)).ad(r,!1),A.nj(b,c,a);if(u.aa.yd(o))return(b=new u.Ta(r.description)).oc(r,!0),A.nj(b,c,a)}return A.Uy(r,c)},A.Uy=function(b,c){if(b==null||c==null||!u.cb.Wc(c))throw u.i.N();if(b.B())return b;var a=b.getType();return a==197?(a=new u.Da(b.description)).ad(b,!1):u.aa.yd(a)?(a=new u.Ta(b.description)).oc(b,!0):a=b,(a=u.Hh.lj(a,c)).B()?a:u.Eg.Sb(c)==1?u.Hh.Fn(a,c,0,a!=b,0):A.NQ(a,c,a!=b)},A.NQ=function(b,c,a){if(!u.cb.Wc(c))throw u.i.N();if(b.B())return b;var r=u.cb.bf(c),o=-180*r;return r*=360,u.Eg.Sb(c)==2&&(r=(o=u.cb.gh(c)).C,r-=o=o.v),u.Hh.Hp(b,o,r,c,a,0,!0)},A}()}(B||(B={})),function(u){u.BY=function(){function A(){}return A.P=function(b){return 0>b?-b:b},A.Mb=function(b,c){return 0<=c?A.P(b):-A.P(b)},A.Y=function(b,c){return b==c||A.P(b-c)<=A.JC*(1+(A.P(b)+A.P(c))/2)},A.Cd=function(b){return b==0||A.P(b)<=A.JC},A.Ah=function(b,c){var a=(c=(1-(c=Math.sqrt(1-c)))/(1+c))*c;return b/(1+c)*(1+a*(.25+a*(.015625+1/256*a)))*A.EL},A.EL=1.5707963267948966,A.JC=3552713678800501e-30,A}()}(B||(B={})),function(u){var A=function(c){this.Wf=c,this.Kk=this.Wf.getCode(),0>this.Kk&&(this.Kk=0)};u.DY=A;var b=function(){function c(a){a===void 0&&(a=null),this.Cj=null,this.Un=!1,a!==null&&(this.Cj=new A(a))}return c.prototype.Ec=function(){return this.Cj!=null?this.Cj.Kk:0},c.prototype.Of=function(){var a=new c;return this.copyTo(a),a},c.prototype.copyTo=function(a){a.Cj=this.Cj,a.Un=this.Un},c.prototype.Qz=function(){this.Un=!this.Un},c.prototype.qm=function(){return this.Cj!=null?this.Cj.Wf:null},c.prototype.LJ=function(a){if(0>=a)throw u.i.N();if(a!=this.Ec()){if((a=u.pf.geogtran(a))==null)throw u.i.N("Geogtran not found.");this.Cj=new A(a)}},c.prototype.Bz=function(){return this.Cj==null?null:this.Cj.Wf.toString()},c.prototype.tX=function(a){if(a==null)throw u.i.N();var r=null;try{r=u.pf.fromString(u.Sc.PE_TYPE_GEOGTRAN,a)}catch{throw u.i.N()}this.Cj=new A(r)},c.prototype.Nb=function(a){return a==this||!(!(a instanceof c)||(0>=this.Ec()||this.Ec()!=a.Ec())&&!this.qm().isEqual(a.qm()))&&this.Un==a.Un},c.prototype.toString=function(){var a="GeographicTransformation: "+this.Bz();return 200<a.length?a.substring(0,197)+"... ("+a.length.toString()+" characters)":a},c.create=function(a,r){var o=new c;return o.LJ(a),r&&o.Qz(),o},c.uP=function(a,r){var o=new c;return o.tX(a),r&&o.Qz(),o},c}();u.Dx=b}(B||(B={})),function(u){var A=function(){function c(){}return c.construct=function(a,r,o,l){var d=new c;return d.hw=a,d.iw=r,d.QY=o,d.RY=l,d},c.Ey=function(a,r){return a.hw==r.hw?a.iw==r.iw?0:a.iw<r.iw?-1:1:a.hw<r.hw?-1:1},c}(),b=function(){function c(){this.yT=[],this.zT=[],this.qp()}return c.kz=function(){return c.jK==null&&(c.jK=new c),c.jK},c.prototype.qp=function(){this.iD(this.yT),this.iD(this.zT)},c.prototype.iD=function(a){try{var r=[];r=r.sort(A.Ey);for(var o=0;o<r.length;o++)a.push(r[o])}catch{}},c}();u.CY=b}(B||(B={})),function(u){var A=function(){function b(){}return b.prototype.yD=function(c){this.Fk=c},b.prototype.WM=function(c){this.Fb=c},b.prototype.xD=function(c){this.zo=c},b.CE=function(c){return!(c.B()||c.getType()!=1607&&c.getType()!=1736)},b.AE=function(c){return!(c.B()||c.getType()!=1607&&c.getType()!=1736||20>c.I())},b.BE=function(c){return!(c.B()||c.getType()!=1607&&c.getType()!=1736||20>c.I())},b}();u.Uk=A}(B||(B={})),function(u){u.$b=function(){function A(){}return A.TT=function(b){var c=new u.Da;return c.sx(b.es(),b.gs()),c.yj(b.es(),b.fs()),c.yj(b.ds(),b.fs()),c.yj(b.ds(),b.gs()),c},A.zh=function(b,c){return b===null?null:u.Hx.local().V(b,c,null)},A.jY=function(b,c){var a=u.Gh.local();return b=new u.Zc(b),a.V(b,c,null).next()},A.im=function(b,c,a){return u.kp.local().V(b,c,a,null)},A.ep=function(b,c,a){return u.Kx.local().V(b,c,a,null)},A.VX=function(b,c,a){var r=u.Kx.local();for(b=new u.Zc(b),c=new u.Zc(c),a=r.V(b,c,a,null),r=[];(c=a.next())!=null;)r.push(c);return r},A.Nb=function(b,c,a){return u.dj.local().V(3,b,c,a,null)},A.TP=function(b,c,a){return u.dj.local().V(4,b,c,a,null)},A.RS=function(b,c,a){var r=u.Xj.local();for(b=new u.Zc(b),c=new u.Zc(c),a=r.V(b,c,a,null),r=[];(c=a.next())!=null;)r.push(c);return r},A.QP=function(b,c,a){var r=u.kp.local();for(b=new u.Zc(b),c=new u.Zc(c),a=r.V(b,c,a,null),r=[];(c=a.next())!=null;)r.push(c);return r},A.Ea=function(b,c,a){return u.Xj.local().V(b,c,a,null)},A.QS=function(b,c,a){if((b=u.Xj.local().V(b,c,a,null,1))===null)return[];if(b.getType()===550){for(c=[],a=0;a<b.wa;a++)c.push(b.KR(a));return c}return b.getType()===33?[b]:[]},A.qY=function(b,c,a){return u.dj.local().V(2,b,c,a,null)},A.contains=function(b,c,a){return u.dj.local().V(1,b,c,a,null)},A.BP=function(b,c,a){return u.dj.local().V(16,b,c,a,null)},A.touches=function(b,c,a){return u.dj.local().V(8,b,c,a,null)},A.DU=function(b,c,a){return u.dj.local().V(32,b,c,a,null)},A.TS=function(b,c,a){return u.dj.local().V(1073741824,b,c,a,null)},A.yB=function(b,c,a,r){return u.zL.local().V(b,c,a,r,null)},A.tb=function(b,c,a,r){var o=null;if(a!=null){if(o=a.Hd(),r!=null&&o.Ec()!=r.Ec()&&o.od!=r.od)throw u.i.Xk()}else if(r!=null)throw u.i.N();return b=u.rL.local().V(b,c,null),o!==null&&r!==null&&(b=u.Tc.Nh(b,o,r)),b},A.clip=function(b,c,a){return u.kL.local().V(b,u.l.construct(c.es(),c.gs(),c.ds(),c.fs()),a,null)},A.dl=function(b,c,a){if(b==null||c==null)return null;for(b=u.mL.local().V(!0,b,c,a,null),c=[];(a=b.next())!=null;)a.B()||c.push(a);return c.slice(0)},A.MN=function(b,c,a,r,o,l,d,p){if(o===!0)return A.NN(b,c,a,r,l,d,p);if(o=a,c!=null){if(d=c.Hd(),r!=null&&d.Ec()!=r.Ec()){if(d.od!=r.od)throw u.i.Xk();o=[],u.Tc.XE(a,a.length,r,d,o)}}else if(r!=null)throw u.i.N();if(a=u.AC.local(),l){for(b=new u.Zc(b),c=a.V(b,c,o,l,null),b=[];(l=c.next())!=null;)b.push(l);l=b.slice(0)}else for(l=[],r=0;r<b.length;r++)l[r]=a.V(b[r],c,o[r],null);return l},A.NN=function(b,c,a,r,o,l,d){if(c===null||(r==null&&(r=c.Ec()!==4326?c.Hd():u.Tc.Zg(9001)),r.od!==0))throw u.i.N();if(u.Tc.XE(a,a.length,r,u.Tc.Zg(9001),a),r=u.FC.local(),o){for(b=new u.Zc(b),c=r.V(b,c,l,a,d,!1,o,null),a=[];(l=c.next())!=null;)a.push(l);o=a.slice(0)}else{o=[];for(var p=0;p<b.length;p++)o[p]=r.V(b[p],c,l,a[p],d,!1,null)}return o},A.buffer=function(b,c,a,r,o,l,d){var p=a;if(o===!1){if(c!=null){if(o=c.Hd(),r!=null&&o.Ec()!=r.Ec()){if(o.od!=r.od)throw u.i.Xk();p=u.Tc.Nh(a,r,o)}}else if(r!=null)throw u.i.N();b=u.AC.local().V(b,c,p,null)}else{if(c===null||(r==null&&(r=c.Ec()!==4326?c.Hd():u.Tc.Zg(9001)),r.od!==0))throw u.i.N();p=u.Tc.Nh(a,r,u.Tc.Zg(9001)),b=u.FC.local().V(b,c,l,p,d,!1,null)}return b},A.BU=function(b,c,a,r,o,l,d){if(c!=null){var p=c.Hd();if(d!=null&&p.Ec()!=d.Ec()){if(p.od!=d.od)throw u.i.Xk();a=u.Tc.Nh(a,d,p)}}else if(d!=null)throw u.i.N();for(b=new u.Zc(b),c=u.IC.local().V(b,c,a,r,o,l,null),a=[];(r=c.next())!=null;)a.push(r);return a.slice(0)},A.offset=function(b,c,a,r,o,l,d){if(c!=null){var p=c.Hd();if(d!=null&&p.Ec()!=d.Ec()){if(p.od!=d.od)throw u.i.Xk();a=u.Tc.Nh(a,d,p)}}else if(d!=null)throw u.i.N();return u.IC.local().V(b,c,a,r,o,l,null)},A.iP=function(b){return u.CC.local().V(b,null)},A.jP=function(b,c){var a=u.CC.local();for(b=new u.Zc(b),c=a.V(b,c,null),a=[];(b=c.next())!=null;)a.push(b);return a},A.nz=function(b,c,a){return u.Ix.local().nz(b,c,a)},A.oz=function(b,c){return u.Ix.local().oz(b,c)},A.pz=function(b,c,a,r){return u.Ix.local().pz(b,c,a,r)},A.eC=function(b,c){return u.Yl.local().V(b,c,!1,null)},A.dT=function(b,c){return u.Yl.local().rs(b,c,null)},A.QQ=function(b,c,a,r,o){var l=u.EC.local();if(c!=null){if(c=c.Hd(),o!=null&&c.Ec()!=o.Ec()){if(c.od!=o.od)throw u.i.Xk();a=u.Tc.Nh(a,o,c)}}else if(o!=null)throw u.i.N();return l.V(b,a,r,null)},A.Qr=function(b,c,a,r){var o=u.Xl.local();if(c!=null){if(c=c.Hd(),r!=null&&c.Ec()!=r.Ec()){if(c.od!=r.od)throw u.i.Xk();a=u.Tc.Nh(a,r,c)}}else if(r!=null)throw u.i.N();return o.V(b,a,null)},A.Wy=function(b,c,a,r,o){o===void 0&&(o=0);var l=u.tL.local();if(o==4||o!==0)throw u.i.Ie();if(r!==null){if(r.od!==0)throw u.i.N("Unit must be a linear unit type");a=u.Tc.Nh(a,r,u.Tc.Zg(9001))}return l.V(b,a,c,o,null)},A.WQ=function(b,c,a,r){if(b===null)return 0;if(r==4||r!==0)throw u.i.Ie();if(b.getType()==197)b=A.TT(b);else if(b.getType()!=1736)return 0;if(r=u.cb.sc(c),b=u.cb.zh(b,c,r),b=u.UK.XQ([b])[0],a!==null){if(a.od!==2)throw u.i.N("Unit must be a area unit type");b=u.Tc.Nh(b,u.Tc.Zg(109404),a)}return b},A.ZQ=function(b,c,a,r){if(b=u.vL.local().V(b,c,r,null),a!==null){if(a.od!==0)throw u.i.N("Unit must be a linear unit type");b=u.Tc.Nh(b,u.Tc.Zg(9001),a)}return b},A.JU=function(b,c,a){if(b===null)return 0;var r=null;if(c!=null){if((r=c.Hd()).od==0&&(r=u.Tc.aG(r))==null&&a!==null)throw u.i.N();if(a!=null&&r.Ec()!=a.Ec()&&r.od!=a.od)throw u.i.Xk()}else if(a!=null)throw u.i.N();return b.getType()==1736||b.getType()==197?(b=b.Ke(),a!==null?u.Tc.Nh(b,r,a):b):0},A.KU=function(b,c,a){if(b===null||b.B()||1>b.Db())return 0;var r=null;if(c!=null){if(r=c.Hd(),a!=null&&r.Ec()!=a.Ec()&&r.od!=a.od)throw u.i.Xk()}else if(a!=null)throw u.i.N();b.getType()==1736||b.getType()==197?c=b.mg():u.aa.yd(b.getType())?(c=new u.Ta(b.description)).oc(b,!0):c=b,b=0,c=c.Ga();for(var o=new u.h,l=new u.h;c.$a();)for(;c.Ha();){var d=c.ha();d.Yp(o),d.Tr(l),b+=u.h.tb(o,l)}return r!==null&&a!==null&&(b=u.Tc.Nh(b,r,a)),b},A.fP=function(b){return b.points!==void 0?A.mS(b,b.hasZ!==void 0&&b.hasZ,b.hasM!==void 0&&b.hasM):b.rings!==void 0?A.lG(b.rings,b.hasZ!==void 0&&b.hasZ,b.hasM!==void 0&&b.hasM,"P"):b.paths!==void 0?A.lG(b.paths,b.hasZ!==void 0&&b.hasZ,b.hasM!==void 0&&b.hasM,"L"):b.x!==void 0?A.nS(b):b.xmin!==void 0?A.lS(b):null},A.nS=function(b){if(b.x==null||b.x=="NaN")return new u.Sa;var c=new u.Sa(b.x,b.y);return b.z!==void 0&&b.z!==null&&c.wX(b.z),b.m!==void 0&&b.m!==null&&c.hX(b.m),c},A.lS=function(b){if(b.xmin==null||b.xmin=="NaN")return new u.Fh;var c=new u.Fh(b.xmin,b.ymin,b.xmax,b.ymax);return b.zmin!==void 0&&b.zmin!==null&&c.setInterval(1,0,b.zmin,b.zmax),b.mmin!==void 0&&b.mmin!==null&&c.setInterval(2,0,b.mmin,b.mmax),c},A.mS=function(b,c,a){var r=0,o=new u.de,l=3*b.points.length;l%2!=0&&l++,2>l&&(l=2);var d=u.O.truncate(3*b.points.length/2);4>d?d=4:16>d&&(d=16),l=u.Yc.Dn(l,0);var p=u.Yc.Dn(d);d=u.Yc.Dn(d);for(var g=0;g<b.points.length;g++)l.write(2*g,b.points[g][0]),l.write(2*g+1,b.points[g][1]),p.write(g,c||a?b.points[g][2]:NaN),d.write(g,a&&c?b.points[g][3]:NaN),r++;return r!=0&&(o.resize(r),o.hn(0,l)),c&&(o.re(1),o.hn(1,p)),a&&(o.re(2),o.hn(2,c==0?p:d)),o.Pc(16777215),o},A.lG=function(b,c,a,r){var o=0,l=2;if(r=="P"){var d=new u.Da;o=1,l=3}else d=new u.Ta;for(var p=u.Yc.Oh(0),g=u.Yc.Mr(0),y=0,w=0,S=[],k=[],C=0;C<b.length;C++){var O=b[C].length;if(S[C]=!1,r==="P"&&b[C][0][0]===b[C][b[C].length-1][0]&&b[C][0][1]===b[C][b[C].length-1][1]){var R=a==0||b[C][0][3]===b[C][b[C].length-1][3]||b[C][0][3]===void 0&&b[C][b[C].length-1][3]===void 0;(c==0||b[C][0][2]===b[C][b[C].length-1][2]||b[C][0][2]===void 0&&b[C][b[C].length-1][2]===void 0)&&R&&(S[C]=!0,--O)}O>=l?(k[C]=!1,w+=1,p.add(y),g.add(o),y+=O):k[C]=!0}for((r=3*y)%2!=0&&r++,2>r&&(r=2),4>(C=u.O.truncate(3*y/2))?C=4:16>C&&(C=16),r=u.Yc.Dn(r,0),o=u.Yc.Dn(C),l=u.Yc.Dn(C),C=O=0;C<b.length;C++)if(k[C]===!1)for(R=0;R<b[C].length;R++){var N=!1;R===b[C].length-1&&S[C]===!0&&(N=!0),N||(r.write(2*O,b[C][R][0]),r.write(2*O+1,b[C][R][1]),o.write(O,c||a?b[C][R][2]:NaN),l.write(O,a&&c?b[C][R][3]:NaN),O++)}return y!=0&&(b=d,p.resize(w),g.resize(w),0<y&&(p.add(y),g.add(0)),b.hn(0,r),b.PJ(g),b.QJ(p)),c&&(d.re(1),d.hn(1,o)),a&&(d.re(2),d.hn(2,c==0?o:l)),d.Pc(16777215),d},A}()}(B||(B={})),function(u){u.Ex=function(){function A(){}return A.br=function(b){var c,a=0,r=b.length,o=b[0];for(c=0;c<r-1;c++){var l=b[c+1];a+=(l[0]-o[0])*(l[1]+o[1]),o=l}return 0<=a},A.rotate=function(b,c,a){c=c*Math.PI/180;var r=Math.cos(c),o=Math.sin(c);if(b.paths!==void 0){c={paths:[]};for(var l=0;l<b.paths.length;l++){for(var d=b.paths[l],p=[],g=0;g<d.length;g++){var y=d[g].slice(0);p.push(y);var w=r*(d[g][0]-a.x)-o*(d[g][1]-a.y)+a.x,S=o*(d[g][0]-a.x)+r*(d[g][1]-a.y)+a.y;y[0]=w,y[1]=S}c.paths.push(p),b.hasZ!==void 0&&(c.hasZ=b.hasZ),b.hasM!==void 0&&(c.hasM=b.hasM)}return c}if(b.rings!==void 0){for(c={rings:[]},l=0;l<b.rings.length;l++){d=b.rings[l],p=[];var k=A.br(d);for(g=0;g<d.length;g++)y=d[g].slice(0),p.push(y),w=r*(d[g][0]-a.x)-o*(d[g][1]-a.y)+a.x,S=o*(d[g][0]-a.x)+r*(d[g][1]-a.y)+a.y,y[0]=w,y[1]=S;A.br(p)!==k&&p.reverse(),c.rings.push(p),b.hasZ!==void 0&&(c.hasZ=b.hasZ),b.hasM!==void 0&&(c.hasM=b.hasM)}return c}if(b.x!==void 0)return c={x:r*(b.x-a.x)-o*(b.y-a.y)+a.x,y:o*(b.x-a.x)+r*(b.y-a.y)+a.y},b.z!==void 0&&(c.z=b.z),b.m!==void 0&&(c.m=b.m),b.hasZ!==void 0&&(c.hasZ=b.hasZ),b.hasM!==void 0&&(c.hasM=b.hasM),c;if(b.points!==void 0){for(c={points:[]},l=b.points,g=0;g<l.length;g++)(d=l[g].slice(0))[0]=r*(l[g][0]-a.x)-o*(l[g][1]-a.y)+a.x,d[1]=o*(l[g][0]-a.x)+r*(l[g][1]-a.y)+a.y,c.points.push(d);return b.hasZ!==void 0&&(c.hasZ=b.hasZ),b.hasM!==void 0&&(c.hasM=b.hasM),c}return null},A.JQ=function(b,c){if(b.paths!==void 0){for(var a={paths:[]},r=0;r<b.paths.length;r++){for(var o=b.paths[r],l=[],d=0;d<o.length;d++){var p=o[d].slice(0);l.push(p);var g=c.x-o[d][0];p[0]=o[d][0]+2*g}a.paths.push(l)}return b.hasZ!==void 0&&(a.hasZ=b.hasZ),b.hasM!==void 0&&(a.hasM=b.hasM),a}if(b.rings!==void 0){for(a={rings:[]},r=0;r<b.rings.length;r++){o=b.rings[r];var y=A.br(o);for(l=[],d=0;d<o.length;d++)p=o[d].slice(0),l.push(p),g=c.x-o[d][0],p[0]=o[d][0]+2*g;A.br(l)!==y&&l.reverse(),a.rings.push(l)}return b.hasZ!==void 0&&(a.hasZ=b.hasZ),b.hasM!==void 0&&(a.hasM=b.hasM),a}if(b.x!==void 0)return g=c.x-b.x,a={x:b.x+2*g,y:b.y},b.z!==void 0&&(a.z=b.z),b.m!==void 0&&(a.m=b.m),b.hasZ!==void 0&&(a.hasZ=b.hasZ),b.hasM!==void 0&&(a.hasM=b.hasM),a;if(b.points!==void 0){for(a={points:[]},r=b.points,d=0;d<r.length;d++)o=r[d].slice(0),g=c.x-o[0],o[0]+=2*g,a.points.push(o);return b.hasZ!==void 0&&(a.hasZ=b.hasZ),b.hasM!==void 0&&(a.hasM=b.hasM),a}return b.xmin!==void 0?(a={v:b.xmin,G:b.ymin,C:b.xmax,H:b.ymax},b.zmin!==void 0&&(a.zmin=b.zmin,a.zmax=b.zmax),b.mmin!==void 0&&(a.mmin=b.mmin,a.mmax=b.mmax),g=c.x-b.xmin,a.xmax=b.xmin+2*g,g=c.x-b.xmax,a.xmin=b.xmax+2*g,b.zmin!==void 0&&(a.zmin=b.zmin),b.zmax!==void 0&&(a.zmax=b.zmax),b.mmin!==void 0&&(a.mmin=b.mmin),b.mmax!==void 0&&(a.mmax=b.mmax),b.hasZ!==void 0&&(a.hasZ=b.hasZ),b.hasM!==void 0&&(a.hasM=b.hasM),a):null},A.KQ=function(b,c){if(b.paths!==void 0){for(var a={paths:[]},r=0;r<b.paths.length;r++){for(var o=b.paths[r],l=[],d=0;d<o.length;d++){var p=o[d].slice(0);l.push(p);var g=c.y-o[d][1];p[1]=o[d][1]+2*g}a.paths.push(l)}return b.hasZ!==void 0&&(a.hasZ=b.hasZ),b.hasM!==void 0&&(a.hasM=b.hasM),a}if(b.rings!==void 0){for(a={rings:[]},r=0;r<b.rings.length;r++){o=b.rings[r];var y=A.br(o);for(l=[],d=0;d<o.length;d++)p=o[d].slice(0),l.push(p),g=c.y-o[d][1],p[1]=o[d][1]+2*g;A.br(l)!==y&&l.reverse(),a.rings.push(l)}return b.hasZ!==void 0&&(a.hasZ=b.hasZ),b.hasM!==void 0&&(a.hasM=b.hasM),a}if(b.x!==void 0)return g=c.y-b.y,a={y:b.y+2*g,x:b.x},b.z!==void 0&&(a.z=b.z),b.m!==void 0&&(a.m=b.m),b.hasZ!==void 0&&(a.hasZ=b.hasZ),b.hasM!==void 0&&(a.hasM=b.hasM),a;if(b.points!==void 0){for(a={points:[]},r=b.points,d=0;d<r.length;d++)o=r[d].slice(0),g=c.y-o[1],o[1]+=2*g,a.points.push(o);return b.hasZ!==void 0&&(a.hasZ=b.hasZ),b.hasM!==void 0&&(a.hasM=b.hasM),a}return b.xmin!==void 0?(a={v:b.xmin,G:b.ymin,C:b.xmax,H:b.ymax},b.zmin!==void 0&&(a.zmin=b.zmin,a.zmax=b.zmax),b.mmin!==void 0&&(a.mmin=b.mmin,a.mmax=b.mmax),g=c.y-b.ymin,a.ymax=b.ymin+2*g,g=c.y-b.ymax,a.ymin=b.ymax+2*g,b.zmin!==void 0&&(a.zmin=b.zmin),b.zmax!==void 0&&(a.zmax=b.zmax),b.mmin!==void 0&&(a.mmin=b.mmin),b.mmax!==void 0&&(a.mmax=b.mmax),b.hasZ!==void 0&&(a.hasZ=b.hasZ),b.hasM!==void 0&&(a.hasM=b.hasM),a):null},A}()}(B||(B={})),function(u){u.ZK=function(){function A(){}return A.Ig=function(b,c){switch(c==null&&(c=u.ee.og()),b){case 33:return new u.Sa(c);case 322:return new u.yb(c);case 197:return new u.Fh(c);case 550:return new u.de(c);case 1607:return new u.Ta(c);case 1736:return new u.Da(c);default:throw u.i.fa("invalid argument.")}},A}()}(B||(B={})),function(u){var A=function(){function b(c,a){this.Te=u.ia.qf(c,-1),this.ua=new u.au,this.wl=a}return b.prototype.AW=function(c){this.ua.At(Math.min(this.Te.size,c)),this.ua.fn(c)},b.prototype.addElement=function(c,a){if(a===void 0)return this.eN(c);a=u.O.truncate(a%this.Te.size);var r=this.Te.get(a);return r==-1&&(r=this.ua.Ph(),this.Te.set(a,r)),this.ua.addElement(r,c)},b.prototype.eN=function(c){var a=this.wl.jz(c);a=u.O.truncate(a%this.Te.size);var r=this.Te.get(a);return r==-1&&(r=this.ua.Ph(),this.Te.set(a,r)),this.ua.addElement(r,c)},b.prototype.jd=function(c,a){if(a===void 0)this.KP(c);else{a=u.O.truncate(a%this.Te.size);var r=this.Te.get(a);if(r==-1)throw u.i.N();for(var o=this.ua.rc(r),l=-1;o!=-1;){var d=this.ua.lb(o);this.ua.ja(o)==c?(this.ua.jd(r,l,o),this.ua.rc(r)==-1&&(this.ua.bh(r),this.Te.set(a,-1))):l=o,o=d}}},b.prototype.KP=function(c){var a=this.wl.jz(c);a=u.O.truncate(a%this.Te.size);var r=this.Te.get(a);if(r==-1)throw u.i.N();for(var o=this.ua.rc(r),l=-1;o!=-1;){var d=this.ua.lb(o);this.ua.ja(o)==c?(this.ua.jd(r,l,o),this.ua.rc(r)==-1&&(this.ua.bh(r),this.Te.set(a,-1))):l=o,o=d}},b.prototype.rR=function(c){return c=u.O.truncate(c%this.Te.size),(c=this.Te.get(c))==-1?-1:this.ua.rc(c)},b.prototype.ER=function(c){return this.ua.lb(c)},b.prototype.vd=function(c){var a=this.wl.jz(this.ja(c));a=u.O.truncate(a%this.Te.size);var r=this.Te.get(a);if(r==-1)throw u.i.N();for(var o=this.ua.rc(r),l=-1;o!=-1;){if(o==c)return this.ua.jd(r,l,o),void(this.ua.rc(r)==-1&&(this.ua.bh(r),this.Te.set(a,-1)));l=o,o=this.ua.lb(o)}throw u.i.N()},b.prototype.ja=function(c){return this.ua.ja(c)},b.prototype.clear=function(){this.Te=u.ia.qf(this.Te.size,-1),this.ua.clear()},b.prototype.size=function(){return this.ua.TF()},b}();u.dL=A}(B||(B={})),function(u){var A=function(){function b(){this.Li=new u.$c(3),this.ua=new u.$c(6),this.sT=!1,this.je=-1}return b.prototype.fl=function(c){this.Li.jd(c)},b.prototype.Pw=function(){return this.Li.Ce()},b.prototype.bv=function(c){this.ua.jd(c)},b.prototype.$A=function(){return this.ua.Ce()},b.prototype.WB=function(c,a){this.Li.S(c,1,a)},b.prototype.ex=function(c,a){this.Li.S(c,2,a)},b.prototype.gX=function(c,a){this.Li.S(c,3,a)},b.prototype.UB=function(c,a){this.ua.S(c,4,a)},b.prototype.jX=function(c,a){this.ua.S(c,3,a)},b.prototype.TJ=function(c,a){this.ua.S(c,2,a)},b.prototype.Ph=function(c){var a=this.$A();return this.ua.S(a,3,this.je),this.ua.S(a,4,0),this.ua.S(a,5,c),this.je!=-1&&this.TJ(this.je,a),this.je=a},b.prototype.bh=function(c){this.LE(c);var a=this.ua.T(c,2),r=this.ua.T(c,3);return a!=-1?this.jX(a,r):this.je=r,r!=-1&&this.TJ(r,a),this.bv(c),r},b.prototype.At=function(c){this.ua.De(c)},b.prototype.PF=function(c){return this.ua.T(c,5)},b.prototype.fX=function(c,a){this.ua.S(c,5,a)},b.prototype.addElement=function(c,a){return this.tS(c,a)},b.prototype.tS=function(c,a){var r=this.Pw();this.ex(r,-1),this.ua.T(c,0)==-1&&this.ua.S(c,0,r);var o=this.ua.T(c,1);return this.WB(r,o),o!=-1&&this.ex(o,r),this.ua.S(c,1,r),this.setData(r,a),this.UB(c,this.bs(c)+1),this.sT&&this.gX(r,c),r},b.prototype.jd=function(c,a){var r=this.we(a),o=this.lb(a);return r!=-1?this.ex(r,o):this.ua.S(c,0,o),o!=-1?this.WB(o,r):this.ua.S(c,1,r),this.fl(a),this.UB(c,this.bs(c)-1),o},b.prototype.fn=function(c){this.Li.De(c)},b.prototype.getData=function(c){return this.Li.T(c,0)},b.prototype.setData=function(c,a){this.Li.S(c,0,a)},b.prototype.lb=function(c){return this.Li.T(c,2)},b.prototype.we=function(c){return this.Li.T(c,1)},b.prototype.rc=function(c){return this.ua.T(c,0)},b.prototype.Fc=function(c){return this.ua.T(c,1)},b.prototype.clear=function(){for(var c=this.je;c!=-1;)c=this.bh(c)},b.prototype.LE=function(c){for(var a=this.Fc(c);a!=-1;){var r=a;a=this.we(r),this.fl(r)}this.ua.S(c,0,-1),this.ua.S(c,1,-1),this.UB(c,0)},b.prototype.B=function(){return this.Li.size==0},b.prototype.TF=function(){return this.Li.size},b.prototype.bs=function(c){return this.ua.T(c,4)},b.prototype.qz=function(c){return this.ua.T(c,3)},b}();u.jp=A}(B||(B={})),function(u){var A=function(){function b(c){c===void 0?(this.ug=new u.$c(2),this.ua=new u.$c(4),this.je=-1,this.Qv=!0):(this.ug=new u.$c(2),this.ua=new u.$c(c?4:2),this.je=-1,this.Qv=c)}return b.prototype.fl=function(c){this.ug.jd(c)},b.prototype.Pw=function(){return this.ug.Ce()},b.prototype.bv=function(c){this.ua.jd(c)},b.prototype.$A=function(){return this.ua.Ce()},b.prototype.Ph=function(){var c=this.$A();return this.Qv&&(this.ua.S(c,3,this.je),this.je!=-1&&this.ua.S(this.je,2,c),this.je=c),c},b.prototype.bh=function(c){for(var a=this.rc(c);a!=-1;){var r=a;a=this.lb(a),this.fl(r)}this.Qv&&(a=this.ua.T(c,2),r=this.ua.T(c,3),a!=-1?this.ua.S(a,3,r):this.je=r,r!=-1&&this.ua.S(r,2,a)),this.bv(c)},b.prototype.At=function(c){this.ua.De(c)},b.prototype.addElement=function(c,a){var r=this.ua.T(c,1),o=this.Pw();return r!=-1?this.ug.S(r,1,o):this.ua.S(c,0,o),this.ua.S(c,1,o),this.ug.S(o,0,a),o},b.prototype.fn=function(c){this.ug.De(c)},b.prototype.jd=function(c,a,r){a!=-1?(this.ug.S(a,1,this.ug.T(r,1)),this.ua.T(c,1)==r&&this.ua.S(c,1,a)):(this.ua.S(c,0,this.ug.T(r,1)),this.ua.T(c,1)==r&&this.ua.S(c,1,-1)),this.fl(r)},b.prototype.Hy=function(c,a){var r=this.ua.T(c,1),o=this.ua.T(a,0);o!=-1&&(r!=-1?this.ug.S(r,1,o):this.ua.S(c,0,o),this.ua.S(c,1,this.ua.T(a,1))),this.Qv&&(c=this.ua.T(a,2),r=this.ua.T(a,3),c!=-1?this.ua.S(c,3,r):this.je=r,r!=-1&&this.ua.S(r,2,c)),this.bv(a)},b.prototype.ja=function(c){return this.ug.T(c,0)},b.prototype.Sj=function(c,a){this.ug.S(c,0,a)},b.prototype.lb=function(c){return this.ug.T(c,1)},b.prototype.rc=function(c){return this.ua.T(c,0)},b.prototype.Jn=function(c){return this.ja(this.rc(c))},b.prototype.clear=function(){this.ug.mj(!0),this.ua.mj(!0),this.je=-1},b.prototype.B=function(){return this.ug.size==0},b.prototype.TF=function(){return this.ug.size},b.prototype.qz=function(c){return this.ua.T(c,3)},b}();u.au=A}(B||(B={})),function(u){u.ta=function(){function A(){}return A.Wd=function(b,c,a){return c=c.xr(),b=b!=null&&b.Xd!==void 0?b.Xd(0):0,a&&(c*=4,b*=1.1),Math.max(b,c)},A.Er=function(b){return 2*Math.sqrt(2)*b},A.rN=function(b){return Math.sqrt(2)*b},A.kj=function(b,c,a){var r=new u.l;return c.A(r),A.Wd(b,r,a)},A.wE=function(b,c,a){return c=c.Tg(1,0).xr(),b=b!=null?b.Xd(1):0,a&&(c*=4,b*=1.1),Math.max(b,c)},A.mv=function(b,c){var a=new u.l;return b.xc(a),b=new u.l,c.xc(b),a.Zb(b),a},A.YN=function(b){var c=new u.l;if(b.xc(c),c.B())return null;var a=new u.du(c,8),r=-1,o=new u.l,l=!1;do for(var d=0,p=b.da();d<p;d++){if(b.Rj(d,o),(r=a.Jz(d,o,r))==-1){if(l)throw u.i.fa("internal error");b.yp(c,!1),l=!0,a.reset(c,8);break}l=!1}while(l);return a},A.nE=function(b){var c=new u.l;b.xc(c);for(var a=new u.du(c,8),r=-1,o=b.Ga(),l=new u.l,d=!1;o.$a();)for(;o.Ha();){var p=o.ha(),g=o.wb();if(p.A(l),(r=a.Jz(g,l,r))==-1){if(d)throw u.i.Qa();b.yp(c,!1),d=!0,a.reset(c,8),o.Zi();break}}return a},A.jj=function(b,c){var a=new u.l;b.xc(a);for(var r=new u.du(a,8),o=-1,l=new u.l,d=b.Ga(),p=!1;d.$a();)for(;d.Ha();){var g=d.ha(),y=d.wb();if(g.A(l),l.isIntersecting(c)&&(o=r.Jz(y,l,o))==-1){if(p)throw u.i.fa("internal error.");b.yp(a,!1),p=!0,r.reset(a,8),d.Zi();break}}return r},A.oE=function(b,c){for(var a=new u.du(c,8),r=new u.h,o=!1,l=new u.l,d=0;d<b.I();d++)if(b.D(d,r),c.contains(r)&&(l.K(r),a.vj(d,l)==-1)){if(o)throw u.i.Qa();o=!0,d=new u.l,b.yp(d,!1),a.reset(d,8),d=-1}return a},A.lR=function(b,c,a){var r=new u.l,o=new u.l;b.xc(r),c.xc(o),r.W(a,a),o.W(a,a);var l=new u.l;l.K(r),l.Ea(o),b=b.Ga(),c=c.Ga();var d=new u.xC;d.aC(a);var p=!1;for(d.pK();b.$a();)for(;b.Ha();)b.ha().A(r),r.isIntersecting(l)&&(p=!0,(a=new u.l).K(r),d.JD(b.wb(),a));if(d.iF(),!p)return null;for(r=!1,d.oK();c.$a();)for(;c.Ha();)c.ha().A(o),o.isIntersecting(l)&&(r=!0,(a=new u.l).K(o),d.ED(c.wb(),a));return d.hF(),r?d:null},A.mR=function(b,c,a,r,o){var l=b.getType(),d=c.getType(),p=new u.l,g=new u.l;b.xc(p),c.xc(g),p.W(a,a),g.W(a,a);var y=new u.l;y.K(p),y.Ea(g);var w=new u.xC;w.aC(a);var S=!1;w.pK();var k=0;for(a=b.da();k<a;k++)r&&l==1736&&!b.Ev(k)||(b.Rj(k,p),p.isIntersecting(y)&&(S=!0,w.JD(k,p)));if(w.iF(),!S)return null;for(b=!1,w.oK(),r=0,a=c.da();r<a;r++)o&&d==1736&&!c.Ev(r)||(c.Rj(r,g),g.isIntersecting(y)&&(b=!0,w.ED(r,g)));return w.hF(),b?w:null},A.Ru=function(b,c,a){if(b!=c)for(var r=0;r<a;r++)b[r]==null?b[r]=u.h.al(c[r]):b[r].L(c[r])},A.Jy=function(b,c,a,r){var o=0;for(r+=0;o<r;a++,o++)b[o]==null&&(b[o]=[0,0]),b[o][0]=c[a].x,b[o][1]=c[a].y},A.Iy=function(b,c,a,r){var o=c,l=0;for(c=r+c;o<c;l++,o++)b[o]==null?b[o]=u.h.construct(a[l][0],a[l][1]):b[o].ma(a[l][0],a[l][1])},A.kP=function(b,c,a){if(b!=c)for(var r=0;r<a;r++)b[r]==null?b[r]=new u.Sa(c[r]):c[r].copyTo(b[r])},A.vE=function(b,c,a,r){var o=0;return b!=null&&(o=b.Xd(0),r&&!a||b==null||(o+=1.01*b.vz(0))),a&&(c*=4,o*=1.01),Math.max(o,c)},A.ty=function(b,c,a){return A.vE(b,c.xr(),a,!1)},A.gO=function(b,c){var a=new u.l;return c.A(a),A.ty(b,a,!0)},A.uy=function(b,c){return A.vE(b,c.xr(),!1,!0)},A.Hu=function(b,c){var a=new u.l;return c.A(a),A.uy(b,a)},A.AG=function(b,c,a,r){r*=r;var o=new u.h;if(o.uc(b,c),(b=new u.h).uc(a,c),c=o.Sk(),a=b.Sk(),c<=r&&a<=r)return!0;var l=u.lc.ox(o.wi(b));return(l<=r*c||l<=r*a)&&0<=o.Qh(b)},A.dK=function(b,c,a,r){for(var o=0;o<c;o++){var l=b[o].y,d=u.O.Rk(l,a,r);d!=l&&(b[o].y=d)}},A}()}(B||(B={})),function(u){var A,b,c=function(){function l(d){this.Ya=d}return l.prototype.compare=function(d,p,g){d=d.ja(g),g=this.Ya.nk(p);var y=this.Ya.nk(d);return g<y?-1:g==y?o.gq(p)&&o.Gv(d)?-1:o.gq(d)&&o.Gv(p)?1:0:1},l}(),a=function(){function l(d){this.Ya=d}return l.prototype.nr=function(d,p,g){this.Ya.GX(g,d,p)},l.prototype.$p=function(d){return this.Ya.nk(d)},l}();(b=A||(A={}))[b.initialize=0]="initialize",b[b.pIn=1]="pIn",b[b.pL=2]="pL",b[b.pR=3]="pR",b[b.pT=4]="pT",b[b.right=5]="right",b[b.left=6]="left",b[b.all=7]="all";var r=function(){function l(){this.Ya=null,this.Qi=new u.Nc,this.hi=new u.ia(0),this.sg=[0,0]}return l.prototype.Xi=function(d,p){this.Qi.oa=d.oa-p,this.Qi.va=d.va+p,this.hi.resize(0),this.he=0,this.sg[0]=0},l.prototype.EB=function(d,p,g){if(d>p)throw u.i.N();this.Qi.oa=d-g,this.Qi.va=p+g,this.hi.resize(0),this.he=0,this.sg[0]=0},l.prototype.Uo=function(d,p){this.Qi.oa=d-p,this.Qi.va=d+p,this.hi.resize(0),this.he=0,this.sg[0]=0},l.prototype.next=function(){if(!this.Ya.lq)throw u.i.Hb();if(0>this.he)return-1;for(var d=!0;d;)switch(this.sg[this.he]){case 1:d=this.FU();break;case 2:d=this.GU();break;case 3:d=this.HU();break;case 4:d=this.IU();break;case 5:d=this.GW();break;case 6:d=this.kT();break;case 7:d=this.tN();break;case 0:d=this.Gz();break;default:throw u.i.Qa()}return this.Og!=-1?this.Mp()>>1:-1},l.construct=function(d){var p=new l;return p.Ya=d,p.hi.Jb(20),p.he=-1,p},l.prototype.Gz=function(){return this.Og=this.vH=this.Mi=this.Lc=-1,this.Ya.me!=null&&0<this.Ya.me.size?(this.sg[0]=1,this.Mi=this.Ya.kf,!0):(this.he=-1,!1)},l.prototype.FU=function(){if(this.Lc=this.Mi,this.Lc==-1)return this.Og=this.he=-1,!1;var d=this.Ya.Np(this.Lc);return this.Qi.va<d?(d=this.Ya.mk(this.Lc),this.Mi=this.Ya.qj(this.Lc),d!=-1&&(this.ei=this.Ya.kl(d),this.sg[++this.he]=6),!0):d<this.Qi.oa?(d=this.Ya.mk(this.Lc),this.Mi=this.Ya.lk(this.Lc),d!=-1&&(this.ei=this.Ya.Zr(d),this.sg[++this.he]=5),!0):(this.sg[this.he]=2,this.vH=this.Lc,d=this.Ya.mk(this.Lc),this.Mi=this.Ya.qj(this.Lc),d!=-1&&(this.ei=this.Ya.kl(d),this.sg[++this.he]=7),!0)},l.prototype.GU=function(){if(this.Lc=this.Mi,this.Lc==-1)return this.sg[this.he]=3,this.Mi=this.Ya.lk(this.vH),!0;if(this.Ya.Np(this.Lc)<this.Qi.oa){var d=this.Ya.mk(this.Lc);return this.Mi=this.Ya.lk(this.Lc),d!=-1&&(this.ei=this.Ya.Zr(d),this.sg[++this.he]=5),!0}return d=this.Ya.mk(this.Lc),this.Mi=this.Ya.qj(this.Lc),d!=-1&&(this.ei=this.Ya.kl(d),this.sg[++this.he]=7),(d=this.Ya.lk(this.Lc))!=-1&&this.hi.add(d),!0},l.prototype.HU=function(){if(this.Lc=this.Mi,this.Lc==-1)return this.sg[this.he]=4,!0;if(this.Qi.va<this.Ya.Np(this.Lc)){var d=this.Ya.mk(this.Lc);return this.Mi=this.Ya.qj(this.Lc),d!=-1&&(this.ei=this.Ya.kl(d),this.sg[++this.he]=6),!0}return d=this.Ya.mk(this.Lc),this.Mi=this.Ya.lk(this.Lc),d!=-1&&(this.ei=this.Ya.kl(d),this.sg[++this.he]=7),(d=this.Ya.qj(this.Lc))!=-1&&this.hi.add(d),!0},l.prototype.IU=function(){if(this.hi.size==0)return this.Og=this.he=-1,!1;this.Lc=this.hi.get(this.hi.size-1),this.hi.resize(this.hi.size-1);var d=this.Ya.mk(this.Lc);return d!=-1&&(this.ei=this.Ya.kl(d),this.sg[++this.he]=7),this.Ya.qj(this.Lc)!=-1&&this.hi.add(this.Ya.qj(this.Lc)),this.Ya.lk(this.Lc)!=-1&&this.hi.add(this.Ya.lk(this.Lc)),!0},l.prototype.kT=function(){return this.Og=this.ei,this.Og!=-1&&o.gq(this.Mp())&&this.Ya.nk(this.Mp())<=this.Qi.va?(this.ei=this.SF(),!1):(this.he--,!0)},l.prototype.GW=function(){return this.Og=this.ei,this.Og!=-1&&o.Gv(this.Mp())&&this.Ya.nk(this.Mp())>=this.Qi.oa?(this.ei=this.QR(),!1):(this.he--,!0)},l.prototype.tN=function(){return this.Og=this.ei,this.Og!=-1&&o.gq(this.Mp())?(this.ei=this.SF(),!1):(this.he--,!0)},l.prototype.SF=function(){return this.Ya.Sf?this.Ya.$f.lb(this.Og):this.Ya.Ti.lb(this.Og)},l.prototype.QR=function(){return this.Ya.Sf?this.Ya.$f.we(this.Og):this.Ya.Ti.we(this.Og)},l.prototype.Mp=function(){return this.Ya.Sf?this.Ya.$f.ja(this.Og):this.Ya.Ti.getData(this.Og)},l}();u.EY=r;var o=function(){function l(d){this.Am=this.$h=this.$f=this.Ti=this.Km=this.Ej=this.me=this.Fj=null,this.Sf=d,this.lq=this.Sv=!1}return l.prototype.kr=function(){this.Nk(!0)},l.prototype.Br=function(d,p){if(!this.Sv)throw u.i.Hb();this.Fj.push(new u.Nc(d,p))},l.prototype.Fp=function(){if(!this.Sv)throw u.i.fa("invalid call");this.Sv=!1,this.lq=!0,this.Sf||(this.vS(),this.Zv=this.Fj.length)},l.prototype.vj=function(d){if(!this.Sf||!this.lq)throw u.i.N("invalid call");if(this.kf==-1){var p=this.Fj.length;if(this.iA){var g=new u.ia(0);g.Jb(2*p),this.bJ(g),this.$h.Jb(2*p),this.$h.resize(0),this.aJ(g),this.Km.resize(p,-1),this.Km.Wj(-1,0,p),this.iA=!1}else this.Km.Wj(-1,0,p);this.kf=this.Tu()}p=this.pG(d<<1,this.kf),g=this.$f.addElement(1+(d<<1),this.xz(p)),this.VJ(p,g),this.Km.set(d,p),this.Zv++},l.prototype.remove=function(d){if(!this.Sf||!this.lq)throw u.i.fa("invalid call");var p=this.Km.get(d);if(p==-1)throw u.i.N("the interval does not exist in the interval tree");this.Km.set(d,-1),this.Zv--;var g=this.xz(p),y=this.$f.ZR(g);this.$f.vd(this.wR(p),g),this.$f.vd(this.TR(p),g),(d=this.$f.size(g))==0&&(this.$f.MP(g),this.ZJ(y,-1)),this.Ej.jd(p),g=this.UF(y);var w=this.qj(y),S=this.lk(y);for(p=0;!(0<d||y==this.kf||w!=-1&&S!=-1);)y==this.qj(g)?w!=-1?(this.Ok(g,w),this.Uj(w,g),this.Ok(y,-1)):S!=-1?(this.Ok(g,S),this.Uj(S,g),this.Qk(y,-1)):this.Ok(g,-1):w!=-1?(this.Qk(g,w),this.Uj(w,g),this.Ok(y,-1)):S!=-1?(this.Qk(g,S),this.Uj(S,g),this.Qk(y,-1)):this.Qk(g,-1),this.Uj(y,-1),p++,y=g,d=(g=this.mk(y))!=-1?this.$f.size(g):0,w=this.qj(y),S=this.lk(y),g=this.UF(y)},l.prototype.reset=function(){if(!this.Sf||!this.lq)throw u.i.N("invalid call");this.Nk(!1)},l.prototype.size=function(){return this.Zv},l.prototype.getIterator=function(){return r.construct(this)},l.prototype.bJ=function(d){for(var p=this.Fj.length,g=0;g<2*p;g++)d.add(g);this.HX(d,2*p)},l.prototype.aJ=function(d){for(var p=NaN,g=0;g<d.size;g++){var y=d.get(g),w=this.nk(y);w!=p&&(this.$h.add(y),p=w)}},l.prototype.vS=function(){var d=this.Fj.length,p=new u.ia(0);p.Jb(2*d),this.bJ(p),this.$h.Jb(2*d),this.$h.resize(0),this.aJ(p),this.Ej.De(d),this.Ti.fn(2*d);var g=u.Yc.Oh(d);for(g.Wj(-1,0,d),this.kf=this.Tu(),d=0;d<p.size;d++){var y=p.get(d),w=g.get(y>>1);w!=-1?this.VJ(w,this.Ti.addElement(this.xz(w),y)):(w=this.pG(y,this.kf),g.set(y>>1,w))}},l.prototype.pG=function(d,p){var g=p,y=p,w=-1,S=0,k=this.$h.size-1,C=0,O=d>>1,R=NaN,N=NaN,j=!0,G=this.DR(O);for(O=this.AR(O);j;){S<k?(C=S+u.O.truncate((k-S)/2),this.gz(g)==-1&&this.FJ(g,this.$h.get(C),this.$h.get(C+1))):this.gz(g)==-1&&this.FJ(g,this.$h.get(S),this.$h.get(S));var D=this.Np(g);if(O<D)p!=-1&&(p==g?(y=g,R=D,N=(p=this.qj(g))!=-1?this.Np(p):NaN):N>D&&(D<R?this.Ok(y,g):this.Qk(y,g),this.Qk(g,p),this.Sf&&(this.Uj(g,y),this.Uj(p,g)),y=g,R=D,p=-1,N=NaN)),(k=this.xR(g))==-1&&(k=this.Tu(),this.dX(g,k)),g=k,k=C;else if(G>D)p!=-1&&(p==g?(y=g,R=D,N=(p=this.lk(g))!=-1?this.Np(p):NaN):N<D&&(D<R?this.Ok(y,g):this.Qk(y,g),this.Ok(g,p),this.Sf&&(this.Uj(g,y),this.Uj(p,g)),y=g,R=D,p=-1,N=NaN)),(S=this.UR(g))==-1&&(S=this.Tu(),this.oX(g,S)),g=S,S=C+1;else{(j=this.mk(g))==-1&&(j=this.zP(g),this.ZJ(g,j));var V=this.fN(j,d);w=this.xP(),this.qX(w,j),this.cX(w,V),g!=p&&(D<R?this.Ok(y,g):this.Qk(y,g),this.Sf&&this.Uj(g,y),p!=-1&&(N<D?this.Ok(g,p):this.Qk(g,p),this.Sf&&this.Uj(p,g))),j=!1}}return w},l.prototype.Tu=function(){return this.me.Ce()},l.prototype.zP=function(d){return this.Sf?this.$f.Pr(d):this.Ti.Ph(d)},l.prototype.xP=function(){return this.Ej.Ce()},l.prototype.Nk=function(d){d?(this.Sv=this.iA=!0,this.lq=!1,this.$h==null?this.$h=u.Yc.Oh(0):this.$h.resize(0),this.Fj==null?this.Fj=[]:this.Fj.length=0):this.iA=!1,this.Sf?this.Km==null?(this.Km=u.Yc.Oh(0),this.$f=new u.Yj,this.$f.Vo(new c(this))):this.$f.clear():this.Ti==null?this.Ti=new u.jp:this.Ti.clear(),this.me==null?(this.Ej=new u.$c(3),this.me=new u.$c(this.Sf?8:7)):(this.Ej.mj(!1),this.me.mj(!1)),this.kf=-1,this.Zv=0},l.prototype.FJ=function(d,p,g){this.XW(d,p),this.YW(d,g)},l.prototype.Np=function(d){var p=this.gz(d);return p==-1?NaN:(p=this.nk(p))==(d=this.nk(this.gR(d)))?p:.5*(p+d)},l.prototype.XW=function(d,p){this.me.S(d,0,p)},l.prototype.YW=function(d,p){this.me.S(d,1,p)},l.prototype.dX=function(d,p){this.me.S(d,3,p)},l.prototype.oX=function(d,p){this.me.S(d,4,p)},l.prototype.ZJ=function(d,p){this.me.S(d,2,p)},l.prototype.Ok=function(d,p){this.me.S(d,5,p)},l.prototype.Qk=function(d,p){this.me.S(d,6,p)},l.prototype.Uj=function(d,p){this.me.S(d,7,p)},l.prototype.qX=function(d,p){this.Ej.S(d,0,p)},l.prototype.fN=function(d,p){return this.Sf?this.$f.addElement(p,d):this.Ti.addElement(d,p)},l.prototype.cX=function(d,p){this.Ej.S(d,1,p)},l.prototype.VJ=function(d,p){this.Ej.S(d,2,p)},l.prototype.kl=function(d){return this.Sf?this.$f.rc(d):this.Ti.rc(d)},l.prototype.Zr=function(d){return this.Sf?this.$f.Fc(d):this.Ti.Fc(d)},l.gq=function(d){return!(1&d)},l.Gv=function(d){return!(1&~d)},l.prototype.gz=function(d){return this.me.T(d,0)},l.prototype.gR=function(d){return this.me.T(d,1)},l.prototype.mk=function(d){return this.me.T(d,2)},l.prototype.xR=function(d){return this.me.T(d,3)},l.prototype.UR=function(d){return this.me.T(d,4)},l.prototype.qj=function(d){return this.me.T(d,5)},l.prototype.lk=function(d){return this.me.T(d,6)},l.prototype.UF=function(d){return this.me.T(d,7)},l.prototype.xz=function(d){return this.Ej.T(d,0)},l.prototype.wR=function(d){return this.Ej.T(d,1)},l.prototype.TR=function(d){return this.Ej.T(d,2)},l.prototype.DR=function(d){return this.Fj[d].oa},l.prototype.AR=function(d){return this.Fj[d].va},l.prototype.HX=function(d,p){this.Am==null&&(this.Am=new u.Xt);var g=new a(this);this.Am.sort(d,0,p,g)},l.prototype.GX=function(d,p,g){var y=this;d.Vd(p,g,function(w,S){var k=y.nk(w),C=y.nk(S);return k<C||k==C&&l.gq(w)&&l.Gv(S)?-1:1})},l.prototype.nk=function(d){var p=this.Fj[d>>1];return l.gq(d)?p.oa:p.va},l}();u.sr=o}(B||(B={})),function(u){var A=function(){function b(c){if(c==null)throw u.i.fa("Invalid arguement");this.hf=c;var a=c.nR();a.hS()?c.ef.IG()?this.lo=u.si.PannableFold:this.lo=u.si.Clip:this.lo=u.si.DontClip,a.iS()?c.Yf.IG()?this.Qm=u.si.PannableFold:this.Qm=u.si.Clip:this.Qm=u.si.DontClip,this.Bm=a.Jr,this.mH=a.Vu,c=this.hf.sH,this.aH=c.hs(2147483648),this.Uv=c.hs(1073741824)}return b.zh=function(c,a,r){return a.ww.zh(c,r)},b.Rt=function(c,a,r,o){return c.ww.Rt(a,r,o)},b.Qt=function(c,a,r,o){if(r=0>r?a.length:r,(c=c.ww.Rt(a,r,o))==r)return c;for(var l=a=0;l<r;l++){var d=o[l];d.isNaN()||(a<l&&o[a].L(d),a++)}for(;a<r;a++)o[a].Rc();return c},b.transform=function(c,a,r,o,l){if(c.isIdentity())return u.ta.kP(o,a,r),r;for(var d=[],p=0,g=0;g<r;){for(var y=Math.min(d.length,r-g),w=g,S=0;w<y;w++,S++)d[S]==null?d[S]=a[w].D():a[w].D(d[S]);var k=l?b.Qt(c,d,y,d):b.Rt(c,d,y,d);for(S=w=0;w<k;w++,S++)o[g]==null&&(o[g]=new u.Sa(a[g])),o[g].Cb(d[S]);g+=y,p+=k}return p},b.prototype.Rt=function(c,a,r){if(this.hf.isIdentity())return c!=r&&u.ta.Ru(r,c,a),a;var o=this.hf.ef,l=this.hf.Yf,d=o.Sb(),p=l.Sb();if(d==0&&d===p){var g=o.Qp();return l=g/(l=l.Qp()),(g=new u.Dd).setScale(l,l),g.eY(c,a,r),a}if(g=u.O.Fu(Math.min(a,64)),d==3){var y=o.Ji;d=(o=y.fk()).Sb(),r!=c&&u.ta.Ru(r,c,a),u.zb.$k(y,r,a,!0),y.Qt(u.bm.forward,r,a),u.zb.Zk(y,r,a,!0)}if(d==3||p===3)throw u.i.fa("image: transform_in_place_");if(d==2)this.lo==u.si.Clip?(r!=c&&u.ta.Ru(r,c,a),c=o.ml(),u.zb.OS(c,o,r,a)):(r!=c&&u.ta.Ru(r,c,a),o.Wc()&&(d=o.Xd(0),y=o.Oe(),u.zb.EX(r,a,y,d),u.zb.qF(r,a,o,0))),u.zb.IL(o,r,a,g);else for(d=o.Xd(0),y=o.Oe(),o=0;o<a;o++)u.zb.FX(c[o],y,d,r[o]);for(u.zb.GL(this.hf,r,a,g),c=0,(p=p==2)?c=l.zi():isNaN(this.Bm)||(c=this.Bm),p&&this.Qm!=u.si.Clip||u.zb.qF(r,a,l.sc(),c),p&&(u.zb.yG(r,a,l,this.Qm),u.zb.HL(l,r,a,g)),c=a,o=0;o<a;++o)r[o].isNaN()&&c--;return c},b.prototype.zh=function(c,a){if(this.hf.isIdentity()||c.B())return c;if(c.getType()==33)return this.XI(c);var r=this.hf.ef,o=this.hf.Yf,l=r.Sb(),d=o.Sb();if(l==0&&l==d)return a=r.Qp(),a/=o=o.Qp(),(o=new u.Dd).setScale(a,a),(c=u.aa.jg(c)).Oc(o),c;switch(c.getType()){case 1607:case 1736:c=this.VI(c,a);break;case 550:c=this.fW(c,a);break;case 197:c=this.eW(c,a);break;default:throw u.i.fa("")}return c},b.prototype.XI=function(c){var a=c.D(),r=[];return r[0]=a,this.Rt(r,1,r),(c=new u.Sa(c)).Cb(r[0]),c},b.prototype.VI=function(c,a){if(c.tm())throw u.i.fa("curves not supported");var r=c.getType();if(r==1736)return this.gW(c,a);if(r==1607)return this.hW(c,a);throw u.i.fa("projectMultiPath")},b.prototype.gW=function(c,a){var r=this.hf.ef,o=this.hf.Yf,l=r.Sb(),d=o.Sb(),p=u.O.Fu(Math.min(c.I(),64)),g=u.Da.jg(c);l==3&&(l=(r=(c=r.Ji).fk()).Sb(),g=c.$k(g,!0),this.wp(c,u.bm.forward,g),g=c.Zk(g,!0)),c=null,d==3&&(d=(o=(c=o.Ji).fk()).Sb());var y=l==2,w=d==2,S=w?o.sc():o,k=!w&&!this.Uv;d=!1;var C=g;if(y){if((C=u.zb.UI(C,r,this.lo,a)).B())return C}else{if(g=new u.l,C.xc(g),l=r.Oe(),g.G<l.G||g.H>l.H){var O=u.l.construct(g.v-1,l.G,g.C+1,l.H);if((C=u.ri.Nu(C,O,r,NaN,0,a)).B())return C}g.R()>2*l.R()&&(C=u.zb.Hp(C,-2*l.R(),2*l.R(),r,!0,0,!0,a))}g=this.mH,(l=!isNaN(g))&&(C=u.Xl.local().V(C,g,a)),O=w?o.kk():null;var R=NaN;y&&(R=r.zi());var N=o.Wr()!=null;if(this.aH)y&&(u.zb.ur(r,R,C,p),l&&(y=r.hh(),g*=(R=r.sc().hh())/y)),u.zb.tr(this.hf,C,k,p),l&&(y=r.sc().hh(),g*=(R=o.sc().hh())/y),r=C;else{var j=new u.Ta(C.description);j.DD(C),y&&(u.zb.ur(r,R,j,p),l&&(y=r.hh(),g*=(R=r.sc().hh())/y)),u.zb.tr(this.hf,j,k,p),l&&(y=r.sc().pm(),g*=(R=o.sc().pm())/y),k=NaN,w?(O=o.kk(),k=o.zi()):isNaN(this.Bm)||(k=this.Bm),y=b.tv(r)|b.tv(o),R=10*S.Xd(0),this.Uv&&(y=3,R=0),r=u.zb.UQ(C,r,j,S,k,a,y,R)}return N&&(r=u.zb.XD(r,o,a)),w&&(d||(w=S.Oe().R(),r.Tg(0,0).R()>=w-S.Xd(0)&&(S=O.getNorthPoleLocation(),w=O.getSouthPoleLocation(),C=O.getNorthPoleGeometry(),O=O.getSouthPoleGeometry(),k=0,C==u.Cg.PE_POLE_POINT&&S!=u.Cg.PE_POLE_OUTSIDE_BOUNDARY&&(k=1),O==u.Cg.PE_POLE_POINT&&w!=u.Cg.PE_POLE_OUTSIDE_BOUNDARY&&(k|=2),k!==0&&(d=!0))),r=u.zb.Mz(r,o,this.Qm,a),l&&(r=u.Xl.local().V(r,g,a)),u.zb.Lx(o,r,p)),r.B()||(d&&(r=u.Yl.local().V(r,o,!1,a)),c!=null&&(r=c.Zk(r,!1),this.wp(c,u.bm.reverse,r),r=c.$k(r,!1))),r},b.tv=function(c){if(c.Sb()!=2)return 0;var a=0,r=c.kk();c=r.getNorthPoleLocation();var o=r.getSouthPoleLocation(),l=r.getNorthPoleGeometry();return r=r.getSouthPoleGeometry(),l==u.Cg.PE_POLE_POINT&&c!=u.Cg.PE_POLE_OUTSIDE_BOUNDARY&&(a=1),r==u.Cg.PE_POLE_POINT&&o!=u.Cg.PE_POLE_OUTSIDE_BOUNDARY&&(a|=2),a},b.prototype.hW=function(c,a){var r=this.hf.ef,o=this.hf.Yf,l=r.Sb(),d=o.Sb(),p=u.O.Fu(Math.min(c.I(),64)),g=u.Ta.jg(c);l==3&&(l=(r=(c=r.Ji).fk()).Sb(),g=c.$k(g,!0),this.wp(c,u.bm.forward,g),g=c.Zk(g,!0)),c=null,d==3&&(d=(o=(c=o.Ji).fk()).Sb());var y=l==2;l=(d=d==2)?o.sc():o;var w=!d&&!this.Uv;if(y){if((g=u.zb.UI(g,r,this.lo,a)).B())return g}else{var S=new u.l;g.xc(S);var k=r.Oe();if((S.G<k.G||S.H>k.H)&&(S=u.l.construct(S.v-1,k.G,S.C+1,k.H),(g=u.ri.Nu(g,S,r,NaN,0,a)).B()))return g}var C=NaN;y&&(C=r.zi()),S=o.Wr()!=null,k=this.mH;var O=!isNaN(k);if(O&&(g=u.Xl.local().V(g,k,a)),this.aH)y&&u.zb.ur(r,C,g,p),O&&(y=r.hh(),k*=(C=r.sc().hh())/y),u.zb.tr(this.hf,g,w,p),O&&(y=r.sc().hh(),k*=(C=o.sc().hh())/y),r=g;else{var R=new u.Ta(g.description);R.DD(g),y&&(u.zb.ur(r,C,R,p),O&&(y=r.hh(),k*=(C=r.sc().hh())/y)),u.zb.tr(this.hf,R,w,p),O&&(y=r.sc().hh(),k*=(C=o.sc().hh())/y),w=NaN,d?w=o.zi():isNaN(this.Bm)||(w=this.Bm),y=b.tv(r)|b.tv(o),C=10*l.Xd(0),this.Uv&&(y=3,C=0),r=u.zb.VQ(g,r,R,l,w,a,y,C)}return S&&(r=u.zb.XD(r,o,a)),d&&(r=u.zb.Mz(r,o,this.Qm,a),O&&(r=u.Xl.local().V(r,k,a)),u.zb.Lx(o,r,p)),r.B()||c!=null&&(r=c.Zk(r,!1),this.wp(c,u.bm.reverse,r),r=c.$k(r,!1)),r},b.prototype.eW=function(c,a){var r=(c.ca()+c.R())/400;return r!=0?(r=u.Xl.local().V(c,r,a),r=this.VI(r,a),a=c.Ia(),r.bn(a)):(a=new u.Sa(c.Ip()),r=this.XI(a),a=c.Ia(),r.B()?a.Oa():(c.copyTo(a),c=r.D(),a.K(c.x,c.y,c.x,c.y))),a},b.prototype.fW=function(c,a){c=u.aa.jg(c);var r=this.hf.ef,o=this.hf.Yf,l=r.Sb(),d=o.Sb(),p=u.O.Fu(Math.min(c.I(),64));if(l==3){var g=r.Ji;l=(r=g.fk()).Sb(),c=g.Zk(c,!0),this.wp(g,u.bm.forward,c),c=g.$k(c,!0)}if(l==2){if(this.lo==u.si.Clip?c=u.Xj.local().V(c,r.ml(),r,a):r.Wc()&&(l=new u.l,c.xc(l),r.Oe().contains(l)||(this.lo==u.si.PannableFold&&(c=u.zb.lj(c,r)),u.zb.Jt(c,r.Oe(),r.Xd(0),!0),c=u.zb.Fn(c,r,0,!0,0,a))),c.B())return c;u.zb.ur(r,0,c,p)}else u.zb.Jt(c,r.Oe(),r.Xd(0),!0);return u.zb.tr(this.hf,c,!1,p),r=0,l=!1,g=null,d==3&&(l=!0,d=(o=(g=o.Ji).fk()).Sb()),(d=d==2)?r=o.zi():isNaN(this.Bm)||(r=this.Bm),d&&this.Qm!=u.si.Clip||(c=u.zb.Fn(c,o.sc(),r,!1,0,a)),d&&(c=u.zb.Mz(c,o,this.Qm,a),u.zb.Lx(o,c,p),c.B())||l&&(c=g.Zk(c,!0),this.wp(g,u.bm.reverse,c),c=g.$k(c,!0)),c},b.prototype.wp=function(c,a,r){var o=r.I();if(o!=0){for(var l=r.ub(0),d=u.O.lg(200,0),p=[],g=0;g<o;){var y=Math.min(100,o-g);l.Vw(2*g,2*y,d,2,!0);for(var w=0;w<y;++w)p[w]=u.h.construct(d[2*g],d[2*g+1]);c.Qt(a,p,y),g+=y}r.Pc(1993)}},b.Uy=function(c,a,r){if(c==null||a==null||!a.Wc())throw u.i.fa("Invalid Arguement");if(c.B())return c;var o=c.getType();return o==197?(o=new u.Da(c.description)).ad(c,!1):u.aa.yd(o)?(o=new u.Ta(c.description)).oc(c,!0):o=c,(o=u.zb.lj(o,a)).B()?o:u.zb.Fn(o,a,0,o!=c,0,r)},b.nj=function(c,a,r,o){if(c==null||a==null||!a.Wc())throw u.i.fa("Invalid Arguement");if(c.B())return c;var l=c.getType();if(u.aa.Hc(l)){c=u.zb.lj(c,a),l=new u.l,c.A(l);for(var d=u.ta.ty(a,l,!1),p=a.gh(),g=Math.floor((l.v-p.v)/p.R())*p.R()+p.v;g<l.C;)g>l.v+d&&g<l.C-d&&(c=u.zb.uS(c,a,r,g)),g+=p.R()}else{if(l==197)return(l=new u.Da(c.description)).ad(c,!1),b.nj(l,a,r,o);if(u.aa.yd(l))return(l=new u.Ta(c.description)).oc(c,!0),b.nj(l,a,r,o)}return b.Uy(c,a,o)},b}();u.bu=A}(B||(B={})),function(u){var A=function(b){function c(a,r,o,l){var d=b.call(this)||this;return a===void 0?d.description=u.ee.og():o===void 0?d.description=a:(d.description=u.ee.og(),d.ZB(a,r),d.Ql(o,l)),d}return Qe(c,b),c.prototype.getType=function(){return 322},c.prototype.Qb=function(){var a=this.sa-this.pa,r=this.na-this.la;return Math.sqrt(a*a+r*r)},c.prototype.Bi=function(a){var r=this.sa-this.pa,o=this.na-this.la;return Math.sqrt(r*r+o*o)<=a},c.prototype.Pn=function(){return!1},c.prototype.kg=function(){var a=new u.h;return a.uc(this.wc(),this.ac()),a},c.cP=function(a,r){return new c(a.x,a.y,r.x,r.y)},c.prototype.bn=function(a){a.Oa(),a.Nf(this.description);var r=new u.l;this.A(r),a.Xo(r),r=1;for(var o=this.description.Aa;r<o;r++)for(var l=this.description.kd(r),d=u.ra.Va(l);r<d;r++){var p=this.Tg(l,0);a.setInterval(l,0,p)}},c.prototype.A=function(a){a.K(this.sa,this.na,this.pa,this.la),a.normalize()},c.prototype.Qo=function(a){a.Oa(),a.Zb(this.sa,this.na,this.Od(0,1,0)),a.Zb(this.pa,this.la,this.Od(1,1,0))},c.prototype.Oc=function(a){if(a instanceof u.Dd){this.vc();var r=new u.h;r.x=this.sa,r.y=this.na,a.Eh(r,r),this.sa=r.x,this.na=r.y,r.x=this.pa,r.y=this.la,a.Eh(r,r),this.pa=r.x,this.la=r.y}else this.vc(),(r=new u.Nd).x=this.sa,r.y=this.na,r.z=this.Od(0,1,0),r=a.fp(r),this.sa=r.x,this.na=r.y,this.tn(0,1,0,r.z),r.x=this.pa,r.y=this.la,r.z=this.Od(1,1,0),r=a.fp(r),this.pa=r.x,this.la=r.y,this.tn(1,1,0,r.z)},c.prototype.Ia=function(){return new c(this.description)},c.prototype.Tx=function(a,r){return(this.pa-a-(this.sa-a))*(this.la-r+(this.na-r))*.5},c.prototype.vx=function(a){return a*this.Qb()},c.prototype.NG=function(a){return a/this.Qb()},c.prototype.DF=function(a){return u.lc.hq(this.sa,this.pa,a)},c.prototype.fR=function(a){return u.lc.hq(this.na,this.la,a)},c.prototype.dl=function(a,r){var o=new u.ig;return this.ah(a,r,o),o.get()},c.prototype.ah=function(a,r,o){if(o==null)throw u.i.N();o.Or(),(o=o.get()).Nf(this.description);var l=new u.h;this.hc(a,l),o.ZB(l.x,l.y),this.hc(r,l),o.Ql(l.x,l.y),l=1;for(var d=this.description.Aa;l<d;l++)for(var p=this.description.Ed(l),g=u.ra.Va(p),y=0;y<g;y++){var w=this.Uc(a,p,y);o.YB(p,y,w),w=this.Uc(r,p,y),o.OB(p,y,w)}},c.prototype.Uc=function(a,r,o){if(r==0)return o==0?this.hc(a).x:this.hc(a).y;switch(u.ra.lz(r)){case 0:return .5>a?this.wv(r,o):this.gv(r,o);case 1:var l=this.wv(r,o);return r=this.gv(r,o),u.lc.hq(l,r,a);case 2:throw u.i.fa("not implemented")}throw u.i.Qa()},c.prototype.fe=function(a,r){var o=this.pa-this.sa,l=this.la-this.na,d=o*o+l*l;return d==0?.5:(a=((a.x-this.sa)*o+(a.y-this.na)*l)/d,r||(0>a?a=0:1<a&&(a=1)),a)},c.prototype.cq=function(a,r,o,l){if(a){if((a=this.la-this.na)==0)return r==this.la?-1:0;if(0>(r=(r-this.na)/a)||1<r)return 0;o!=null&&(o[0]=this.DF(r))}else{if((a=this.pa-this.sa)==0)return r==this.pa?-1:0;if(0>(r=(r-this.sa)/a)||1<r)return 0;o!=null&&(o[0]=this.fR(r))}return l!=null&&(l[0]=r),1},c.prototype.Pe=function(a,r){var o=this.la-this.na;return o==0?a==this.la?r:NaN:(a=(a-this.na)/o,r=this.DF(a),a==1&&(r=this.pa),r)},c.prototype.ru=function(a,r,o){return 0<=this.rp(a.x,a.y,r,o)},c.prototype.vi=function(a,r,o){return 0<=this.rp(a,r,o,!0)},c.prototype.qs=function(a,r){return this.ru(a,r,!1)},c.prototype.rI=function(){if(this.la<this.na||this.la==this.na&&this.pa<this.sa){var a=this.sa;this.sa=this.pa,this.pa=a,a=this.na,this.na=this.la,this.la=a,a=0;for(var r=this.description.Oq-2;a<r;a++){var o=this.ka[a];this.ka[a]=this.ka[a+r],this.ka[a+r]=o}}},c.prototype.uu=function(a,r){(r=u.h.construct(a,r)).sub(this.ac());var o=new u.h;return o.uc(this.wc(),this.ac()),(a=o.wi(r))>(r=8881784197001252e-31*(Math.abs(o.x*r.y)+Math.abs(o.y*r.x)))?-1:a<-r?1:0},c.prototype.rp=function(a,r,o,l){var d=this.sa,p=this.na,g=a-d,y=r-p;if((g=Math.sqrt(g*g+y*y))<=Math.max(o,6661338147750939e-31*g))return l&&g==0?NaN:0;if(g=a-this.pa,y=r-this.la,(g=Math.sqrt(g*g+y*y))<=Math.max(o,6661338147750939e-31*g))return l&&g==0?NaN:1;if(g=this.pa-this.sa,y=this.la-this.na,0<(l=Math.sqrt(g*g+y*y))){var w=1/l,S=a-d,k=r-p,C=S*(g*=w)+k*(y*=w),O=17763568394002505e-31*(Math.abs(S*g)+Math.abs(k*y)),R=g;if(g=-y,y=R,C<-(O=Math.max(o,O))||C>l+O)return NaN;if(Math.abs(S*g+k*y)<=Math.max(o,17763568394002505e-31*(Math.abs(S*g)+Math.abs(k*y)))&&(.5>=(g=u.O.Rk(C*w,0,1))?(y=this.sa+(this.pa-this.sa)*g,l=this.na+(this.la-this.na)*g):(y=this.pa-(this.pa-this.sa)*(1-g),l=this.la-(this.la-this.na)*(1-g)),u.h.Oy(y,l,a,r)<=o)){if(.5>g){if(u.h.Oy(y,l,d,p)<=o)return 0}else if(u.h.Oy(y,l,this.pa,this.la)<=o)return 1;return g}}return NaN},c.prototype.Nb=function(a){return a!=null&&(a==this||a.constructor===this.constructor&&this.FM(a))},c.prototype.rD=function(a,r,o){var l=o?this.sa:this.pa;o=o?this.na:this.la;var d=new u.h;return d.x=a.pa-l,d.y=a.la-o,!(r.Qh(d)>6661338147750939e-31*r.fD(d))||(d.x=a.sa-l,d.y=a.na-o,r.Qh(d)<=6661338147750939e-31*r.fD(d))},c.prototype.qD=function(a){var r=new u.h;return r.x=this.pa-this.sa,r.y=this.la-this.na,!!this.rD(a,r,!1)&&(r.Sq(),!!this.rD(a,r,!0))},c.NM=function(a,r){var o=a.uu(r.sa,r.na),l=a.uu(r.pa,r.la);return!(0>o&&0>l||0<o&&0<l)&&(o=r.uu(a.sa,a.na),l=r.uu(a.pa,a.la),!(0>o&&0>l||0<o&&0<l)&&((o=a.Qb())>(l=r.Qb())?a.qD(r):r.qD(a)))},c.LM=function(a,r,o){var l=u.h.construct(NaN,NaN),d=a.pa-a.sa,p=a.la-a.na,g=r.pa-r.sa,y=r.la-r.na,w=g*p-d*y;if(w==0)return l;var S=8881784197001252e-31*(Math.abs(g*p)+Math.abs(d*y)),k=r.sa-a.sa,C=r.na-a.na,O=g*C-k*y,R=O/w,N=Math.abs(w);return R<-(g=(8881784197001252e-31*(Math.abs(g*C)+Math.abs(k*y))*N+S*Math.abs(O))/(w*w)+2220446049250313e-31*Math.abs(R))||R>1+g||(g=(y=d*C-k*p)/w)<-(d=(8881784197001252e-31*(Math.abs(d*C)+Math.abs(k*p))*N+S*Math.abs(y))/(w*w)+2220446049250313e-31*Math.abs(g))||g>1+d||(R=u.O.Rk(R,0,1),d=u.O.Rk(g,0,1),p=a.hc(R),w=r.hc(d),(S=new u.h).uc(p,w),S.length()>o&&(S.add(p,w),S.scale(.5),R=a.fe(S,!1),d=r.fe(S,!1),a=a.hc(R),r=r.hc(d),a.sub(r),a.length()>o)||l.ma(R,d)),l},c.OM=function(a,r,o,l){var d=0;if((a.sa==r.sa&&a.na==r.na||a.sa==r.pa&&a.na==r.la)&&(d++,!l))return 1;if(a.pa==r.sa&&a.la==r.na||a.pa==r.pa&&a.la==r.la){if(++d==2)return 2;if(!l)return 1}return r.vi(a.sa,a.na,o)||r.vi(a.pa,a.la,o)||a.vi(r.sa,r.na,o)||a.vi(r.pa,r.la,o)?1:l&&d!=0||c.NM(a,r)==0?0:1},c.Zx=function(a,r,o,l,d,p){var g=0,y=a.rp(r.sa,r.na,p,!1),w=a.rp(r.pa,r.la,p,!1),S=r.rp(a.sa,a.na,p,!1),k=r.rp(a.pa,a.la,p,!1);return isNaN(y)||(l!=null&&(l[g]=y),d!=null&&(d[g]=0),o!=null&&(o[g]=u.h.construct(r.sa,r.na)),g++),isNaN(w)||(l!=null&&(l[g]=w),d!=null&&(d[g]=1),o!=null&&(o[g]=u.h.construct(r.pa,r.la)),g++),g==2||isNaN(S)||y==0&&S==0||w==0&&S==1||(l!=null&&(l[g]=0),d!=null&&(d[g]=S),o!=null&&(o[g]=u.h.construct(a.sa,a.na)),g++),g==2||isNaN(k)||y==1&&k==0||w==1&&k==1||(l!=null&&(l[g]=1),d!=null&&(d[g]=k),o!=null&&(o[g]=u.h.construct(r.pa,r.la)),g++),0<g?(g==2&&l!=null&&l[0]>l[1]&&(a=l[0],l[0]=l[1],l[1]=a,d!=null&&(l=d[0],d[0]=d[1],d[1]=l),o!=null&&(d=u.h.construct(o[0].x,o[0].y),o[0]=o[1],o[1]=d)),g):(g=c.LM(a,r,p),isNaN(g.x)?0:(o!=null&&(o[0]=a.hc(g.x)),l!=null&&(l[0]=g.x),d!=null&&(d[0]=g.y),1))},c.prototype.eG=function(){return 0},c.prototype.op=function(){},c.prototype.toString=function(){return"Line: ["+this.sa.toString()+", "+this.na.toString()+", "+this.pa.toString()+", "+this.la.toString()+"]"},c}(u.SC);u.yb=A}(B||(B={})),function(u){var A=function(){function b(){this.Jm=[],this.ya=-1}return b.prototype.La=function(){return this.ya},b.prototype.next=function(){if(this.Jm!=null&&this.Jm.length!=0){this.ya++;var c=this.Jm[0];return this.Jm=1>=this.Jm.length?[]:this.Jm.slice(1),c}return this.Jm=null},b.prototype.ZX=function(c){this.Jm.push(c)},b.prototype.qe=function(){},b}();u.gL=A}(B||(B={})),function(u){var A;(A=u.SL||(u.SL={}))[A.enumFillRuleOddEven=0]="enumFillRuleOddEven",A[A.enumFillRuleWinding=1]="enumFillRuleWinding";var b=function(c){function a(r,o){var l=c.call(this)||this;if(l.xf=!1,l.Eq=null,l.sq=0,l.rq=0,l.Aj=null,l.Mg=!1,l.nb=null,l.mb=null,l.Ve=null,l.Lj=null,l.Sd=null,l.tq=0,l.gb=0,l.xq=0,o===void 0)l.xf=r,l.Mg=!1,l.tq=0,l.sq=0,l.rq=0,l.wa=0,l.description=u.ee.og();else{if(o==null)throw u.i.N();l.xf=r,l.Mg=!1,l.tq=0,l.sq=0,l.rq=0,l.wa=0,l.description=o}return l.Aj=null,l.gb=0,l}return Qe(a,c),a.prototype.tm=function(){return 0<this.tq},a.prototype.Yx=function(){this.vc(),this.Eq==null?this.Eq=new u.Sa(this.description):this.Eq.Nf(this.description)},a.prototype.sx=function(r,o){var l=new u.h;l.x=r,l.y=o,this.Lt(l)},a.prototype.Lt=function(r){this.Yx(),this.Eq.Cb(r),this.Mg=!0},a.prototype.nf=function(r){if(r.B())throw u.i.N();this.Jl(r.description),this.Yx(),r.copyTo(this.Eq),this.Mg=!0},a.prototype.Sx=function(){var r=1;this.Mg&&(this.Yx(),this.nb==null?(this.nb=u.Yc.Oh(2),this.nb.write(0,0),this.mb=u.Yc.Mr(2,0)):(this.nb.resize(this.nb.size+1,0),this.mb.resize(this.mb.size+1,0)),this.xf&&this.mb.write(this.mb.size-2,1),r++);var o=this.wa;this.nb.write(this.nb.size-1,this.wa+r),this.dm(o+r),this.mb.write(this.nb.size-1,0),this.Mg&&(this.Ht(o,this.Eq),this.Mg=!1)},a.prototype.yj=function(r,o){this.Sx(),this.Cb(this.wa-1,r,o)},a.prototype.Ci=function(r){this.Sx(),this.Cb(this.wa-1,r)},a.prototype.lineTo=function(r){this.Sx(),this.Ht(this.wa-1,r)},a.prototype.CU=function(r){if(this.vc(),this.xf)throw u.i.Qa();var o=this.da();if(r>o)throw u.i.Qa();if(this.dc(r)){if(this.mb==null)throw u.i.Qa();var l=this.wa,d=this.Ba(r),p=this.Vc(r);this.dm(this.wa+1),this.mc();for(var g=0,y=this.description.Aa;g<y;g++)if(this.za[g]!=null){var w=u.ra.Va(this.description.Ed(g));this.za[g].Mn(w*p,this.za[g],w*d,w,!0,1,w*l)}for(;o>r;o--)l=this.nb.read(o),this.nb.write(o,l+1);this.mb.KE(r,1)}},a.prototype.Ap=function(){if(this.wx(),r===void 0){this.Mg=!1;var r=this.da()-1}var o=this.mb.read(r);this.mb.write(r,1|o),this.Ve!=null&&(r=this.Vc(r)-1,this.Ve.write(r,1),this.Lj.write(r,-1))},a.prototype.dc=function(r){return!!(1&this.mb.read(r))},a.prototype.Nn=function(r){if(this.dc(r))return!0;var o=this.Ba(r);return!(o>(r=this.Vc(r)-1))&&(o=this.Na(o),r=this.Na(r),o.qb(r))},a.prototype.yv=function(r){return!!(2&this.mb.read(r))},a.prototype.oc=function(r,o){if(this.Jl(r.description),r.getType()!=322)throw u.i.Qa();var l=new u.Sa;(o||this.B())&&(r.To(l),this.nf(l)),r.Po(l),this.lineTo(l)},a.prototype.tp=function(r){var o=this.wa==0;this.sx(r.v,r.G),this.yj(r.v,r.H),this.yj(r.C,r.H),this.yj(r.C,r.G),this.Ap(),this.Mg=!1,o&&this.Lf(256,!1)},a.prototype.ad=function(r,o){if(!r.B()){for(var l=this.wa==0,d=new u.Sa(this.description),p=0;4>p;p++)r.Hf(o?4-p-1:p,d),p==0?this.nf(d):this.lineTo(d);this.Ap(),this.Mg=!1,l&&!o&&this.Lf(256,!1)}},a.prototype.add=function(r,o){for(var l=0;l<r.da();l++)this.addPath(r,l,!o)},a.prototype.addPath=function(r,o,l){this.vf(-1,r,o,l)},a.prototype.Yk=function(r,o){this.Hz(r,o)},a.prototype.Dr=function(r,o,l,d,p){if(p||this.da()!=0||(p=!0),0>o&&(o=r.da()-1),o>=r.da()||0>l||0>d||d>r.rv(o))throw u.i.fa("index out of bounds");if(d!=0){var g=r.dc(o)&&l+d==r.rv(o);if(!g||d!=1){if(this.Mg=!1,this.Jl(r.description),l=r.Ba(o)+l+1,p&&(d++,l--),g&&d--,g=this.wa,this.dm(this.wa+d),this.mc(),p){if(d==0)return;this.nb.add(this.wa),p=r.mb.read(o),p&=-5,this.xf&&(p|=1),this.mb.write(this.mb.size-1,p),this.mb.add(0)}else this.nb.write(this.mb.size-1,this.wa);p=0;for(var y=this.description.Aa;p<y;p++){var w=this.description.kd(p),S=u.ra.Va(w),k=r.description.Pf(w);0>k||r.za[k]==null?this.za[p].Ln(S*g,u.ra.se(w),d*S,S*g):this.za[p].Mn(S*g,r.za[k],S*l,d*S,!0,S,S*g)}if(this.tm()||r.yv(o))throw u.i.Qa();this.Pc(1993)}}},a.prototype.oJ=function(){for(var r=0,o=this.da();r<o;r++)this.FW(r)},a.prototype.FW=function(r){if(this.mc(),r>=this.da())throw u.i.N();var o=this.Ba(r),l=this.Ja(r);r=this.dc(r)?1:0;for(var d=0,p=this.description.Aa;d<p;d++)if(this.za[d]!=null){var g=u.ra.Va(this.description.Ed(d));this.za[d].ni(g*(o+r),g*(l-r),g)}this.Pc(1993)},a.prototype.Zq=function(r){this.mc();var o=this.da();if(0>r&&(r=o-1),r>=o)throw u.i.N();for(var l=this.Ba(r),d=this.Ja(r),p=0,g=this.description.Aa;p<g;p++)if(this.za[p]!=null){var y=u.ra.Va(this.description.Ed(p));this.za[p].En(y*l,y*d,y*this.wa)}for(l=r+1;l<=o;l++)p=this.nb.read(l),this.nb.write(l-1,p-d);if(this.mb==null)for(l=r+1;l<=o;l++)r=this.mb.read(l),this.mb.write(l-1,r);this.nb.resize(o),this.mb.resize(o),this.wa-=d,this.Pg-=d,this.Pc(1993)},a.prototype.vf=function(r,o,l,d){if(o==this||l>=o.da())throw u.i.N();var p=this.da();if(r>p)throw u.i.N();0>r&&(r=p),0>l&&(l=o.da()-1),this.Mg=!1,this.Jl(o.description),o.mc();var g=o.Ba(l),y=o.Ja(l),w=this.wa,S=o.dc(l)&&!d?1:0;this.dm(this.wa+y),this.mc();for(var k=r<p?this.Ba(r):w,C=0,O=this.description.Aa;C<O;C++){var R=this.description.Ed(C),N=o.description.Pf(R),j=u.ra.Va(R);0<=N&&o.za[N]!=null?(S!=0&&this.za[C].Mn(k*j,o.za[N],j*g,j,!0,j,j*w),this.za[C].Mn((k+S)*j,o.za[N],j*(g+S),j*(y-S),d,j,j*(w+S))):this.za[C].Ln(k*j,u.ra.se(R),j*y,j*w)}for(this.nb.add(w+y),d=p;d>=r+1;d--)g=this.nb.read(d-1),this.nb.write(d,g+y);for(o.yv(l),this.mb.add(0),d=p-1;d>=r+1;d--)p=this.mb.read(d),p&=-5,this.mb.write(d+1,p);p=o.JR().read(l),p&=-5,this.xf&&(p|=1),this.mb.write(r,p)},a.prototype.Hz=function(r,o){var l=-1,d=this.da();if(l>d)throw u.i.N();0>l&&(l=d),this.Mg=!1;var p=this.wa;this.dm(this.wa+o),this.mc();var g=l<d?this.Ba(l):p;if(r!=null)this.za[0].Iz(2*g,r,0,o,!0,2*p);else{var y=u.ra.se(0);this.za[0].Ln(2*g,y,2*o,2*p)}r=1;for(var w=this.description.Aa;r<w;r++){y=this.description.kd(r);var S=u.ra.Va(y);y=u.ra.se(y),this.za[r].Ln(g*S,y,S*o,S*p)}for(this.nb.add(this.wa),p=d;p>=l+1;p--)g=this.nb.read(p-1),this.nb.write(p,g+o);for(this.mb.add(0),p=d-1;p>=l+1;p--)o=this.mb.read(p),o&=-5,this.mb.write(p+1,o);this.xf&&this.mb.write(l,1)},a.prototype.qG=function(r,o,l){var d=-1;if(0>r&&(r=this.da()),r>this.da()||d>this.Ja(r)||l>o.length)throw u.i.fa("index out of bounds");if(l!=0){r==this.da()&&(this.nb.add(this.wa),this.xf?this.mb.add(1):this.mb.add(0)),0>d&&(d=this.Ja(r)),this.mc();var p=this.wa;this.dm(this.wa+l),this.mc();for(var g=0,y=this.description.Aa;g<y;g++){var w=this.description.Ed(g),S=u.ra.Va(w);this.za[g].Ut(S*(this.Ba(r)+d+l),(p-this.Ba(r)-d)*S,this.za[g],S*(this.Ba(r)+d),!0,S),g==0?this.za[g].vC(S*(this.Ba(r)+d),l,o,0,!0):this.za[g].Wj(u.ra.se(w),(this.Ba(r)+d)*S,l*S)}for(this.tm()&&(this.Ve.Ut(this.Ba(r)+d+l,p-this.Ba(r)-d,this.Ve,this.Ba(r)+d,!0,1),this.Lj.Ut(this.Ba(r)+d+l,p-this.Ba(r)-d,this.Lj,this.Ba(r)+d,!0,1),this.Ve.Wj(1,this.Ba(r)+d,l),this.Lj.Wj(-1,this.Ba(r)+d,l)),r+=1,o=this.da();r<=o;r++)this.nb.write(r,this.nb.read(r)+l)}},a.prototype.wf=function(r,o,l){var d=this.da();if(0>r&&(r=this.da()),r>=d||o>this.Ja(r))throw u.i.fa("index out of bounds");r==this.da()&&(this.nb.add(this.wa),this.xf?this.mb.add(1):this.mb.add(0)),0>o&&(o=this.Ja(r));var p=this.wa;this.dm(this.wa+1),this.mc();var g=this.Ba(r);this.za[0].vj(2*(g+o),l,2*p),l=1;for(var y=this.description.Aa;l<y;l++){var w=this.description.Ed(l),S=u.ra.Va(w);this.za[l].Ln(S*(g+o),u.ra.se(w),S,S*p)}for(r+=1;r<=d;r++)this.nb.write(r,this.nb.read(r)+1)},a.prototype.DB=function(r,o){var l=this.da();if(0>r&&(r=l-1),r>=l||o>=this.Ja(r))throw u.i.fa("index out of bounds");this.mc();var d=this.Ba(r);0>o&&(o=this.Ja(r)-1),o=d+o,d=0;for(var p=this.description.Aa;d<p;d++)if(this.za[d]!=null){var g=u.ra.Va(this.description.Ed(d));this.za[d].En(g*o,g,g*this.wa)}for(;l>=r+1;l--)o=this.nb.read(l),this.nb.write(l,o-1);this.wa--,this.Pg--,this.Pc(1993)},a.prototype.uE=function(r,o,l){var d=this.Ba(r)+o;if((l=this.Ba(l)+void 0)<d||0>d||l>this.I()-1)throw u.i.N();o=0,(r=this.Ga()).Vb(d);do{for(;r.Ha()&&(d=r.ha(),r.wb()!=l);)o+=d=d.Qb();if(r.wb()==l)break}while(r.$a());return o},a.prototype.fO=function(r,o,l){if(o=this.Ba(r)+o,l=this.Ba(r)+l,0>o||l>this.I()-1)throw u.i.N();var d=this.Ga();if(o>l){if(!this.dc(r))throw u.i.N("cannot iterate across an open path");d.JB()}var p=r=0;d.Vb(o);do p+=r,r=d.ha().Qb();while(d.wb()!=l);return p},a.prototype.mg=function(){return u.pi.gm(this,null)},a.prototype.KS=function(r,o,l){for(var d=r;d<l-1;d++)if(this.dc(d))throw u.i.N("cannot interpolate across closed paths");if((d=this.description.Aa)!=1){var p=this.uE(r,o,l);if(p!=0)for(var g=1;g<d;g++){var y=this.description.kd(g);if(u.ra.lz(y)!=2)for(var w=u.ra.Va(y),S=0;S<w;S++)this.MS(y,r,o,l,p,S)}}},a.prototype.JS=function(r,o,l){var d=this.description.Aa;if(d!=1){var p=this.fO(r,o,l);if(p!=0)for(var g=1;g<d;g++){var y=this.description.kd(g);if(u.ra.lz(y)!=2)for(var w=u.ra.Va(y),S=0;S<w;S++)this.LS(y,r,o,l,p,S)}}},a.prototype.MS=function(r,o,l,d,p,g){var y=this.Ga(),w=this.Ba(o)+l;d=this.Ba(d)+void 0,o=this.Uc(r,w,g),l=this.Uc(r,d,g);var S=o,k=0;y.Vb(w);do if(y.Ha()){if(y.ha(),y.wb()==d)break;this.setAttribute(r,y.wb(),g,S),y.li();do{if(w=y.ha(),y.ik()==d)return;k+=w=w.Qb(),S=u.lc.hq(o,l,k/p),y.On()||this.setAttribute(r,y.ik(),g,S)}while(y.Ha())}while(y.$a())},a.prototype.LS=function(r,o,l,d,p,g){var y=this.Ga(),w=this.Ba(o)+l;if((o=this.Ba(o)+d)!=w){d=this.Uc(r,w,g),l=this.Uc(r,o,g);var S=0;y.Vb(w),y.JB(),w=d;do{var k=y.ha();this.setAttribute(r,y.wb(),g,w),S+=w=k.Qb(),w=u.lc.hq(d,l,S/p)}while(y.ik()!=o)}},a.prototype.Oa=function(){this.tq=0,this.Mg=!1,this.Sd=this.Ve=this.Lj=this.mb=this.nb=null,this.wD()},a.prototype.Oc=function(r){r instanceof u.Dd?this.YD(r,-1):this.wN(r)},a.prototype.YD=function(r,o){if(!this.B()&&!r.isIdentity()){this.mc();var l=this.za[0],d=new u.h,p=new u.h;if(0>o){var g=this.tm(),y=0;o=this.wa}else g=this.yv(o),y=this.Ba(o),o=this.Vc(o);for(;y<o;y++){if(d.x=l.read(2*y),d.y=l.read(2*y+1),g){var w=this.Lj.read(y);if(0<=w)switch(7&this.Ve.read(y)){case 2:p.x=this.Sd.read(w),p.y=this.Sd.read(w+1),r.Eh(p,p),this.Sd.write(w,p.x),this.Sd.write(w+1,p.y),p.x=this.Sd.read(w+3),p.y=this.Sd.read(w+4),r.Eh(p,p),this.Sd.write(w+3,p.x),this.Sd.write(w+4,p.y);break;case 4:throw u.i.Qa()}}r.Eh(d,d),l.write(2*y,d.x),l.write(2*y+1,d.y)}this.Pc(1993)}},a.prototype.wN=function(r){if(!this.B()){this.re(1),this.mc();for(var o=this.za[0],l=this.za[1],d=new u.Nd,p=new u.Nd,g=this.tm(),y=0;y<this.wa;y++){if(d.x=o.read(2*y),d.y=o.read(2*y+1),d.z=l.read(y),g){var w=this.Lj.read(y);if(0<=w)switch(7&this.Ve.read(y)){case 2:p.x=this.Sd.read(w),p.y=this.Sd.read(w+1),p.z=this.Sd.read(w+2),p=r.fp(p),this.Sd.write(w,p.x),this.Sd.write(w+1,p.y),this.Sd.write(w+1,p.z),p.x=this.Sd.read(w+3),p.y=this.Sd.read(w+4),p.z=this.Sd.read(w+5),p=r.fp(p),this.Sd.write(w+3,p.x),this.Sd.write(w+4,p.y),this.Sd.write(w+5,p.z);break;case 4:throw u.i.Qa()}}d=r.fp(d),o.write(2*y,d.x),o.write(2*y+1,d.y),l.write(y,d.z)}this.Pc(1993)}},a.prototype.iy=function(){this.nb==null&&(this.nb=u.Yc.Oh(1,0),this.mb=u.Yc.Mr(1,0)),this.Ve!=null&&(this.Ve.resize(this.Pg,1),this.Lj.resize(this.Pg,-1))},a.prototype.op=function(r){r.Mg=!1,r.tq=this.tq,r.xq=this.xq,r.nb=this.nb!=null?u.ia.Bn(this.nb):null,r.mb=this.mb!=null?u.pn.Bn(this.mb):null,r.Lj=this.Lj!=null?u.ia.Bn(this.Lj):null,r.Ve=this.Ve!=null?u.pn.Bn(this.Ve):null,r.Sd=this.Sd!=null?u.be.Bn(this.Sd):null,r.sq=this.sq,r.rq=this.rq,r.Aj=this.ak(1024)?null:this.Aj},a.prototype.Qb=function(){if(!this.ak(512))return this.sq;for(var r=this.Ga(),o=new u.Fx(0);r.$a();)for(;r.Ha();)o.add(r.ha().Qb());return this.sq=o.rm(),this.Lf(512,!1),o.rm()},a.prototype.Nb=function(r){if(r==this)return!0;if(!(r instanceof a&&c.prototype.Nb.call(this,r)))return!1;var o=this.da();return!(o!=r.da()||this.nb!=null&&!this.nb.Nb(r.nb,0,o+1)||this.xq!=r.xq||this.mb!=null&&!this.mb.Nb(r.mb,0,o))&&c.prototype.Nb.call(this,r)},a.prototype.Ga=function(){return new u.YL(this)},a.prototype.hy=function(r){if(c.prototype.hy.call(this,r),this.tm())for(r=this.Ga();r.$a();)r.Ha()},a.prototype.yp=function(r,o){if(c.prototype.yp.call(this,r,o),this.tm())for(r=this.Ga();r.$a();)r.Ha()},a.prototype.$x=function(){this.wa=this.nb==null||this.nb.size==0?0:this.nb.read(this.nb.size-1)},a.prototype.Ke=function(){return this.xf?(this.xu(),this.rq):0},a.prototype.Ev=function(r){return!!this.xf&&(this.ak(8)?(this.xu(),0<this.Aj.read(r)):!!(4&this.mb.read(r)))},a.prototype.Ir=function(r){return this.xf?(this.xu(),this.Aj.read(r)):0},a.prototype.xu=function(){if(this.ak(1024)){var r=this.da();this.Aj==null?this.Aj=new u.be(r):this.Aj.size!=r&&this.Aj.resize(r),r=new u.Fx(0);for(var o=new u.Fx(0),l=new u.h,d=0,p=this.Ga();p.$a();){for(o.reset(),this.D(this.Ba(p.gb),l);p.Ha();)o.add(p.ha().Tx(l.x,l.y));r.add(o.rm());var g=d++;this.Aj.write(g,o.rm())}this.rq=r.rm(),this.Lf(1024,!1)}},a.prototype.FR=function(){if(this.xf){this.fm();for(var r=this.da(),o=0;o<r;o++)4&this.mb.read(o)}},a.prototype.fm=function(){if(this.ak(8)){this.xu();var r=this.da();(this.mb==null||this.mb.size<r)&&(this.mb=u.Yc.Mr(r+1));for(var o=1,l=0;l<r;l++){var d=this.Aj.read(l);l==0&&(o=0<d?1:-1),0<d*o?this.mb.zJ(l,4):this.mb.KE(l,4)}this.Lf(8,!1)}},a.prototype.sz=function(r){var o=this.gb,l=this.da();if(0<=o&&o<l){if(r<this.Vc(o)){if(r>=this.Ba(o))return o;o--}else o++;if(0<=o&&o<l&&r>=this.Ba(o)&&r<this.Vc(o))return this.gb=o}if(5>l){for(o=0;o<l;o++)if(r<this.Vc(o))return this.gb=o;throw u.i.fa("corrupted geometry")}for(o=0,--l;l>o;){var d=o+(l-o>>1);if(r<this.Ba(d))l=d-1;else{if(!(r>=(o=this.Vc(d))))return this.gb=d;o=d+1}}return this.gb=o},a.prototype.yz=function(){var r=this.I();if(!this.xf){r-=this.da();for(var o=0,l=this.da();o<l;o++)this.dc(o)&&r++}return r},a.prototype.rv=function(r){var o=this.Ja(r);return this.dc(r)||o--,o},a.prototype.Ia=function(){return new a(this.xf,this.description)},a.prototype.Db=function(){return this.xf?2:1},a.prototype.getType=function(){return this.xf?1736:1607},a.prototype.QJ=function(r){this.nb=r,this.Pc(16777215)},a.prototype.VR=function(){return this.wx(),this.Ve},a.prototype.JR=function(){return this.wx(),this.mb},a.prototype.PJ=function(r){this.mb=r,this.Pc(16777215)},a.prototype.da=function(){return this.nb!=null?this.nb.size-1:0},a.prototype.Vc=function(r){return this.nb.read(r+1)},a.prototype.Ja=function(r){return this.nb.read(r+1)-this.nb.read(r)},a.prototype.Ba=function(r){return this.nb.read(r)},a.prototype.lu=function(r,o){this.Bb==null&&(this.Bb=new u.Uk),o=u.Nx.pW(o);var l=this.Bb.Fk;if(l!=null){if(!(l.Ik<r||o>l.RR()))return!0;this.Bb.yD(null)}return l=u.Nx.create(this,r,o),this.Bb.yD(l),!0},a.prototype.cc=function(){var r=c.prototype.cc.call(this);if(!this.Ac()){var o=this.da();this.nb!=null&&this.nb.An(r,0,o+1),this.mb!=null&&this.mb.An(r,0,o)}return r},a.prototype.ZF=function(r){return this.Ve!=null?this.Ve.read(r):1},a.prototype.bc=function(r,o,l){var d=this.sz(r);if(r==this.Vc(d)-1&&!this.dc(d))throw u.i.fa("index out of bounds");this.mc();var p=this.Ve,g=1;if(p!=null&&(g=7&p.read(r)),g!==1)throw u.i.Qa();if(o.Or(),o=o.get(),l?o.Nf(u.ee.og()):o.Nf(this.description),d=r==this.Vc(d)-1&&this.dc(d)?this.Ba(d):r+1,p=new u.h,this.D(r,p),o.Dc(p),this.D(d,p),o.Qc(p),!l)for(l=1,p=this.description.Aa;l<p;l++){g=this.description.Ed(l);for(var y=u.ra.Va(g),w=0;w<y;w++){var S=this.Uc(g,r,w);o.YB(g,w,S),S=this.Uc(g,d,w),o.OB(g,w,S)}}},a.prototype.Rj=function(r,o){if(r>=this.da())throw u.i.N();if(this.B())o.Oa();else{if(this.yv(r))throw u.i.fa("not implemented");var l=this.ub(0),d=new u.h,p=new u.l;p.Oa();var g=this.Ba(r);for(r=this.Vc(r);g<r;g++)l.tc(2*g,d),p.Zb(d);o.K(p)}},a.prototype.fj=function(r){return this.Bb==null&&(this.Bb=new u.Uk),!(r==0||16>this.I())&&(r=u.ta.nE(this),this.Bb.WM(r),!0)},a.prototype.hM=function(){if(this.Bb==null&&(this.Bb=new u.Uk),this.Bb.zo==null){this.Bb.xD(null);var r=u.ta.YN(this);this.Bb.xD(r)}},a.prototype.Yo=function(r){this.xq=r},a.prototype.In=function(){return this.xq},a.prototype.DD=function(r){if(this==r)throw u.i.fa("MultiPathImpl.add");for(var o=this.da(),l=0;l<r.da();l++)this.addPath(r,l,!0),this.CU(o),o++},a.prototype.kO=function(r){var o=this.sz(r),l=this.Ba(o);if(l!=r){if(r>=(o=this.Vc(o))||r<l)throw u.i.fa("change_ring_start_point");for(var d=0,p=this.description.Aa;d<p;d++){var g=this.description.kd(d);g=u.ra.Va(g),this.za[d].rotate(l*g,r*g,o*g)}}},a}(u.Gx);u.Vk=b}(B||(B={})),function(u){var A=function(b){function c(a){var r=b.call(this)||this;if(a!==void 0){if(a==null)throw u.i.N();r.description=a}else r.description=u.ee.og();return r.wa=0,r}return Qe(c,b),c.prototype.Ia=function(){return new c(this.description)},c.prototype.add=function(a){this.resize(this.wa+1),this.Dh(this.wa-1,a)},c.prototype.Bu=function(a,r){this.resize(this.wa+1);var o=new u.h;o.ma(a,r),this.Cb(this.wa-1,o)},c.prototype.Fd=function(a,r,o){if(o=0>o?a.I():o,0>r||r>a.I()||o<r)throw u.i.N();if(r!=o){this.Jl(a.description),o-=r;var l=this.wa;this.resize(this.wa+o),this.mc();for(var d=0,p=a.description.Aa;d<p;d++){var g=a.description.Ed(d),y=u.ra.Va(g),w=this.ub(g);g=a.ub(g),w.Mn(l*y,g,r*y,o*y,!0,1,l*y)}}},c.prototype.HD=function(a,r){var o=a.length;if(r=0>r?o:r,0>o||0>r)throw u.i.N();if(r!=0){o=r-0,r=this.wa,this.resize(this.wa+o);for(var l=0;l<o;l++)this.Cb(r+l,a[0+l])}},c.prototype.DB=function(a){if(0>a||a>=this.I())throw u.i.fa("index out of bounds");this.mc();for(var r=0,o=this.description.Aa;r<o;r++)if(this.za[r]!=null){var l=u.ra.Va(this.description.Ed(r));this.za[r].En(l*a,l,l*this.wa)}this.wa--,this.Pg--,this.Pc(1993)},c.prototype.resize=function(a){this.dm(a)},c.prototype.op=function(){},c.prototype.Oa=function(){b.prototype.wD.call(this)},c.prototype.Oc=function(a){if(a instanceof u.Dd){if(this.B())return;this.mc();for(var r=this.za[0],o=new u.h,l=0;l<this.wa;l++)o.x=r.read(2*l),o.y=r.read(2*l+1),a.Eh(o,o),r.write(2*l,o.x),r.write(2*l+1,o.y)}else{if(this.B())return;this.mc(),this.re(1),this.mc(),r=this.za[0],o=this.za[1];var d=new u.Nd;for(l=0;l<this.wa;l++){d.x=r.read(2*l),d.y=r.read(2*l+1),d.z=o.read(l);var p=a.fp(d);r.write(2*l,p.x),r.write(2*l+1,p.y),o.write(l,p.z)}}this.Pc(1993)},c.prototype.Db=function(){return 0},c.prototype.getType=function(){return 550},c.prototype.Ke=function(){return 0},c.prototype.Qb=function(){return 0},c.prototype.Nb=function(a){return a==this||a instanceof c&&b.prototype.Nb.call(this,a)},c.prototype.lW=function(a,r){var o=this.wa;if(o=Math.min(o,r+1e3),0>r||r>=this.wa||o<r||a.length!=1e3)throw u.i.N();var l=o-r,d=[];for(this.ub(0).Vw(2*r,2*l,d,0,!0),r=0;r<l;r++)a[r]=u.h.construct(d[2*r],d[2*r+1]);return o},c.prototype.$x=function(){},c.prototype.iy=function(){},c.prototype.lu=function(){return!1},c.prototype.fj=function(){return!1},c.prototype.mg=function(){return null},c}(u.Gx);u.de=A}(B||(B={})),function(u){var A;(A=u.iL||(u.iL={}))[A.NotDetermined=0]="NotDetermined",A[A.Structure=1]="Structure",A[A.DegenerateSegments=2]="DegenerateSegments",A[A.Clustering=3]="Clustering",A[A.Cracking=4]="Cracking",A[A.CrossOver=5]="CrossOver",A[A.RingOrientation=6]="RingOrientation",A[A.RingOrder=7]="RingOrder",A[A.OGCPolylineSelfTangency=8]="OGCPolylineSelfTangency",A[A.OGCPolygonSelfTangency=9]="OGCPolygonSelfTangency",A[A.OGCDisconnectedInterior=10]="OGCDisconnectedInterior";var b=function(){function c(a,r,o){a===void 0?(this.Jj=0,this.Ko=this.Jo=-1):(this.Jj=a,this.Jo=r,this.Ko=o)}return c.prototype.Wt=function(a){this.Jj=a.Jj,this.Jo=a.Jo,this.Ko=a.Ko},c}();u.Md=b}(B||(B={})),function(u){u.O=function(){function A(){}return A.assert=function(b){if(b===!1)throw u.i.GK()},A.bK=function(b){return isNaN(b)?NaN:b===0?b:0<b?1:-1},A.Fu=function(b){var c;c===void 0&&(c=0);for(var a=[],r=0;r<b;r++)a[r]=A.lg(2,c);return a},A.lg=function(b,c){c===void 0&&(c=0);for(var a=[],r=0;r<b;r++)a[r]=c;return a},A.$u=function(b,c){var a,r;for(a===void 0&&(a=0),r===void 0&&(r=b.length-1);a<=r;a++)b[a]=c},A.Rk=function(b,c,a){return b<c?c:b>a?a:b},A.Th=function(b,c){var a=5381;return((a=((a=((a=c!==void 0?(c<<5)+c+(255&b):(a<<5)+a+(255&b))<<5)+a+(b>>8&255))<<5)+a+(b>>16&255))<<5)+a+(b>>24&255)&2147483647},A.uj=function(){throw Error("Not Implemented")},A.bB=function(b){return A.aU(b)+12345&2147483647},A.XG=function(b){var c=32,a=b%A.Qx|0,r=b/A.Qx|0;return(c&=63)==0?b:(32>c?(b=a>>>c|r<<32-c,c=r>>c):(b=r>>c-32,c=0<=r?0:-1),c*A.Qx+(b>>>0))},A.aU=function(b){var c=1103515245,a=65535&c;return((c-a)*(b|=0)|0)+(a*b|0)|0},A.truncate=function(b){return 0>b?-1*Math.floor(Math.abs(b)):Math.floor(b)},A.MAX_SAFE_INTEGER=Math.pow(2,53)-1,A.MIN_SAFE_INTEGER=-A.MAX_SAFE_INTEGER,A.VC=65536,A.Qx=A.VC*A.VC,A}()}(B||(B={})),function(u){var A;(A=u.CL||(u.CL={}))[A.Project=0]="Project",A[A.Union=1]="Union",A[A.Difference=2]="Difference",A[A.Proximity2D=3]="Proximity2D",A[A.Relate=4]="Relate",A[A.Equals=5]="Equals",A[A.Disjoint=6]="Disjoint",A[A.Intersects=7]="Intersects",A[A.Within=8]="Within",A[A.Contains=9]="Contains",A[A.Crosses=10]="Crosses",A[A.Touches=11]="Touches",A[A.Overlaps=12]="Overlaps",A[A.Buffer=13]="Buffer",A[A.Distance=14]="Distance",A[A.Intersection=15]="Intersection",A[A.Clip=16]="Clip",A[A.Cut=17]="Cut",A[A.DensifyByLength=18]="DensifyByLength",A[A.DensifyByAngle=19]="DensifyByAngle",A[A.LabelPoint=20]="LabelPoint",A[A.GeodesicBuffer=21]="GeodesicBuffer",A[A.GeodeticDensifyByLength=22]="GeodeticDensifyByLength",A[A.ShapePreservingDensify=23]="ShapePreservingDensify",A[A.GeodeticLength=24]="GeodeticLength",A[A.GeodeticArea=25]="GeodeticArea",A[A.Simplify=26]="Simplify",A[A.SimplifyOGC=27]="SimplifyOGC",A[A.Offset=28]="Offset",A[A.Generalize=29]="Generalize",A[A.SymmetricDifference=30]="SymmetricDifference",A[A.ConvexHull=31]="ConvexHull",A[A.Boundary=32]="Boundary",A[A.SimpleRelation=33]="SimpleRelation";var b=function(){function c(){}return c.prototype.getType=function(){return null},c.prototype.wn=function(){},c.prototype.Iu=function(){return!1},c}();u.Je=b}(B||(B={})),function(u){var A=function(b){function c(){return b!==null&&b.apply(this,arguments)||this}return Qe(c,b),c.prototype.getType=function(){return 13},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.V=function(a,r,o,l,d){return a instanceof u.aa?(d=new u.Zc(a),this.V(d,r,[o],!1,l).next()):l===!0?(o=new u.BC(a,r,o,!1,d),u.Gh.local().V(o,r,d)):new u.BC(a,r,o,!1,d)},c.instance=null,c}(u.Je);u.AC=A}(B||(B={})),function(u){var A=function(){function b(c,a,r,o,l){this.ya=-1,this.Rd=c,this.$z=a,this.Cs=r,this.tT=new u.l,this.tT.Oa(),this.eo=-1,this.Ub=l}return b.prototype.next=function(){for(var c;(c=this.Rd.next())!=null;)return this.ya=this.Rd.La(),this.eo+1<this.Cs.length&&this.eo++,this.buffer(c,this.Cs[this.eo]);return null},b.prototype.La=function(){return this.ya},b.prototype.buffer=function(c,a){return u.HK.buffer(c,a,this.$z,NaN,96,this.Ub)},b.prototype.qe=function(){},b}();u.BC=A}(B||(B={})),function(u){var A=function(b){function c(){return b!==null&&b.apply(this,arguments)||this}return Qe(c,b),c.prototype.getType=function(){return 16},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.V=function(a,r,o,l){return a instanceof u.aa?(a=new u.Zc(a),this.V(a,r,o,l).next()):new u.lL(a,r,o,l)},c.instance=null,c}(u.Je);u.kL=A}(B||(B={})),function(u){var A=function(){function b(c,a,r){if(this.ya=-1,c==null)throw u.i.N();this.$=a,this.yk=c,this.qa=u.ta.Wd(r,a,!1)}return b.prototype.next=function(){var c;return(c=this.yk.next())!=null?(this.ya=this.yk.La(),u.Ud.clip(c,this.$,this.qa,0)):null},b.prototype.La=function(){return this.ya},b.prototype.qe=function(){},b}();u.lL=A}(B||(B={})),function(u){var A=function(b){function c(){return b!==null&&b.apply(this,arguments)||this}return Qe(c,b),c.prototype.getType=function(){return 31},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.V=function(a,r,o){return a instanceof u.aa?u.DC.rE(a):new u.DC(r,a,o)},c.instance=null,c}(u.Je);u.CC=A}(B||(B={})),function(u){var A=function(){function b(c,a,r){if(this.uA=new u.Zt,this.ya=-1,a==null)throw u.i.N();this.cH=c,this.Ic=!1,this.yk=a,this.Ub=r}return b.prototype.next=function(){if(this.cH){if(!this.Ic){var c=this.dO(this.yk);return this.Ic=!0,c}return null}if(!this.Ic){if((c=this.yk.next())!=null)return this.ya=this.yk.La(),b.rE(c);this.Ic=!0}return null},b.prototype.La=function(){return this.ya},b.prototype.dO=function(c){for(var a;(a=c.next())!=null;)this.uA.Ib(a);return this.uA.cR()},b.prototype.qe=function(){if(!this.Ic){if(!this.cH)throw u.i.fa("Invalid call for non merging convex hull.");var c=this.yk.next();if(c==null)throw u.i.fa("Expects a non-null geometry.");this.uA.Ib(c)}},b.rE=function(c){if(b.VS(c))return c;var a=c.getType();if(u.Vk.yd(a))return(a=new u.Ta(c.description)).oc(c,!0),a;if(a==550&&c.I()==2){var r=new u.Sa;return a=new u.Ta(c.description),c.ve(0,r),a.nf(r),c.ve(1,r),a.lineTo(r),a}return u.Zt.RO(c)},b.VS=function(c){if(c.B())return!0;var a=c.getType();return a==33||a==197||!u.Vk.yd(a)&&(a==550?c.I()==1:a==1607?c.da()==1&&2>=c.I():c.da()==1&&(2>=c.I()||u.Zt.JG(c,0)))},b}();u.DC=A}(B||(B={})),function(u){var A=function(b){function c(){return b!==null&&b.apply(this,arguments)||this}return Qe(c,b),c.prototype.getType=function(){return 17},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.V=function(a,r,o,l,d){return new u.nL(a,r,o,l,d)},c.instance=null,c}(u.Je);u.mL=A}(B||(B={})),function(u){var A=function(){function b(c,a,r,o,l){if(this.Tf=null,a==null||r==null)throw u.i.fa("invalid argument");this.qT=c,this.nA=a,this.lH=r,c=u.ta.mv(a,r),this.qa=u.ta.Wd(o,c,!0),this.kH=-1,this.nd=l}return b.prototype.La=function(){return 0},b.prototype.next=function(){return this.RQ(),++this.kH<this.Tf.length?this.Tf[this.kH]:null},b.prototype.RQ=function(){if(this.Tf==null)switch(this.Tf=[],this.nA.getType()){case 1607:this.TQ();break;case 1736:this.SQ()}},b.prototype.TQ=function(){var c=new u.Ta,a=new u.Ta,r=new u.Ta;this.Tf.push(c),this.Tf.push(a);var o=[];u.LK.JK(this.qT,this.nA,this.lH,this.qa,o,this.nd);for(var l=0;l<o.length;l++){var d=o[l];if(d.bt==0)c.add(d.X,!1);else if(d.bt==1||d.bt==2)a.add(d.X,!1);else if(d.bt==3)this.Tf.push(d.X);else{if(d.bt!=4)throw u.i.fa("internal");r.add(d.X,!1)}}r.B()||c.B()&&a.B()&&!(3<=this.Tf.length)||this.Tf.push(r),c.B()&&a.B()&&3>this.Tf.length&&(this.Tf.length=0)},b.prototype.SQ=function(){var c=new u.ia(0),a=new u.gd,r=a.aF(),o=a.Ib(this.nA),l=a.Ib(this.lH),d=new u.Fg;try{d.Ft(a,this.qa,this.nd),d.dl(r,o,l,c);var p=a.Ne(o),g=new u.Da,y=new u.Da;for(this.Tf.length=0,this.Tf.push(g),this.Tf.push(y),o=0;o<c.size;o++){var w=new u.gd,S=w.Ib(p),k=w.Ib(a.Ne(c.get(o)));d.dr(w,this.nd);var C=d.Av(S,k),O=w.Ne(C);if(!O.B()){var R=a.KF(c.get(o),r);R==2?g.add(O,!1):R==1?y.add(O,!1):this.Tf.push(O);var N=new u.gd;S=N.Ib(p),k=N.Ib(a.Ne(c.get(o))),d.dr(N,this.nd),p=N.Ne(d.im(S,k))}}!p.B()&&0<c.size&&this.Tf.push(p),g.B()&&y.B()&&(this.Tf.length=0)}finally{d.Ug()}},b.prototype.qe=function(){},b}();u.nL=A}(B||(B={})),function(u){var A=function(b){function c(){return b!==null&&b.apply(this,arguments)||this}return Qe(c,b),c.prototype.getType=function(){return 18},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.V=function(a,r,o){if(a instanceof u.aa)return a=new u.Zc(a),this.V(a,r,o).next();if(0>=r)throw u.i.N();return new u.oL(a,r,o)},c.instance=null,c}(u.Je);u.Xl=A}(B||(B={})),function(u){var A=function(){function b(c,a){this.ya=-1,this.Rd=c,this.Ps=a}return b.prototype.La=function(){return this.ya},b.prototype.next=function(){var c;return(c=this.Rd.next())!=null?(this.ya=this.Rd.La(),this.NP(c)):null},b.prototype.NP=function(c){if(c.B()||1>c.Db())return c;var a=c.getType();if(a==1736||a==1607)return this.Ny(c);if(u.aa.yd(a))return this.PP(c);if(a==197)return this.OP(c);throw u.i.Qa()},b.prototype.PP=function(c){if(c.Qb()<=this.Ps)return c;var a=new u.Ta(c.description);return a.oc(c,!0),this.Ny(a)},b.prototype.OP=function(c){var a=new u.Da(c.description);a.ad(c,!1);var r=new u.l;return c.A(r),c=r.ca(),r.R()<=this.Ps&&c<=this.Ps?a:this.Ny(a)},b.prototype.Ny=function(c){for(var a=c.Ia(),r=c.Ga();r.$a();)for(var o=!0;r.Ha();){var l=r.ha();if(l.getType()!=322)throw u.i.fa("not implemented");var d=r.On(),p=l.Qb();if(p>this.Ps){var g=Math.ceil(p/this.Ps);p=new u.Sa(c.description),o&&(l.To(p),a.nf(p));var y=o=1/g,w=0;for(--g;w<g;w++)l.Tw(y,p),a.lineTo(p),y+=o;d?a.Ap():(l.Po(p),a.lineTo(p))}else d?a.Ap():a.oc(l,o);o=!1}return a},b.prototype.qe=function(){},b}();u.oL=A}(B||(B={})),function(u){var A=function(b){function c(){return b!==null&&b.apply(this,arguments)||this}return Qe(c,b),c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.getType=function(){return 2},c.prototype.V=function(a,r,o,l){return a instanceof u.aa?(a=new u.Zc(a),r=new u.Zc(r),this.V(a,r,o,l).next()):new u.qL(a,r,o,l)},c.im=function(a,r,o,l){if(a.B()||r.B())return a;var d=a.Db(),p=r.Db();if(d>p)return a;var g=a.getType(),y=r.getType(),w=new u.l,S=new u.l,k=new u.l;a.A(w),r.A(S),k.K(w),k.Zb(S);var C=(k=u.ta.Wd(o,k,!0))*Math.sqrt(2)*1.00001,O=new u.l;if(O.K(w),O.W(C,C),!O.isIntersecting(S))return a;if(d==1&&p==2)return c.KV(a,r,y,o,l);if(g==33)switch(u.Vk.yd(y)?(o=new u.Ta(r.description),o.oc(r,!0)):o=r,y){case 1736:return c.XU(a,o,k);case 1607:return c.YU(a,o,k);case 550:return c.VU(a,o,k);case 197:return c.UU(a,o,k);case 33:return c.WU(a,o,k);default:throw u.i.N()}else if(g==550)switch(y){case 1736:return c.nU(a,r,k);case 197:return c.lU(a,r,k);case 33:return c.mU(a,r,k)}return u.Fg.im(a,r,o,l)},c.XU=function(a,r,o){return u.hd.KG(r,a,o)==0?a:a.Ia()},c.YU=function(a,r,o){var l=a.D();r=r.Ga();for(var d=o*Math.sqrt(2)*1.00001,p=d*d,g=new u.l;r.$a();)for(;r.Ha();){var y=r.ha();if(y.A(g),g.W(d,d),g.contains(l)){if(y.qs(l,o))return a.Ia();var w=y.ac();if(u.h.yc(l,w)<=p||(w=y.wc(),u.h.yc(l,w)<=p))return a.Ia()}}return a},c.VU=function(a,r,o){var l=r.ub(0);r=r.I();var d=a.D(),p=new u.h;o=o*Math.sqrt(2)*1.00001,o*=o;for(var g=0;g<r;g++)if(l.tc(2*g,p),u.h.yc(p,d)<=o)return a.Ia();return a},c.UU=function(a,r,o){var l=new u.l;return r.A(l),l.W(o,o),r=a.D(),l.contains(r)?a.Ia():a},c.WU=function(a,r,o){o=o*Math.sqrt(2)*1.00001,o*=o;var l=a.D();return r=r.D(),u.h.yc(l,r)<=o?a.Ia():a},c.nU=function(a,r,o){var l=new u.l;r.A(l),l.W(o,o);for(var d=a.I(),p=!1,g=[],y=0;y<d;y++)g[y]=!1;var w=new u.h;for(y=0;y<d;y++)a.D(y,w),l.contains(w)&&u.hd.Yd(r,w,o)!=0&&(p=!0,g[y]=!0);if(!p)return a;for(r=a.Ia(),y=0;y<d;y++)g[y]||r.Fd(a,y,y+1);return r},c.lU=function(a,r,o){var l=new u.l;r.A(l),l.W(o,o),r=a.I();var d=!1;o=[];for(var p=0;p<r;p++)o[p]=!1;var g=new u.h;for(p=0;p<r;p++)a.D(p,g),l.contains(g)&&(d=!0,o[p]=!0);if(!d)return a;for(l=a.Ia(),p=0;p<r;p++)o[p]||l.Fd(a,p,p+1);return l},c.mU=function(a,r,o){var l=a.ub(0),d=a.I(),p=r.D(),g=new u.h,y=!1;r=[];for(var w=0;w<d;w++)r[w]=!1;for(o=(w=o*Math.sqrt(2)*1.00001)*w,w=0;w<d;w++)l.tc(2*w,g),u.h.yc(g,p)<=o&&(y=!0,r[w]=!0);if(!y)return a;for(l=a.Ia(),w=0;w<d;w++)r[w]||l.Fd(a,w,w+1);return l},c.KV=function(a,r,o,l,d){var p=new u.Fh;a.bn(p);var g=new u.l;return r.A(g),p.Zb(g),p.W(.1*p.R(),.1*p.ca()),(g=new u.Da).ad(p,!1),o==1736?g.add(r,!0):g.ad(r,!0),u.Xj.local().V(a,g,l,d)},c.instance=null,c}(u.Je);u.kp=A}(B||(B={})),function(u){var A=function(){function b(c,a,r,o){this.ts=a==null,this.ya=-1,this.Rd=c,this.$z=r,this.wT=a.next(),this.Ub=o}return b.prototype.next=function(){return this.ts?null:(c=this.Rd.next())!=null?(this.ya=this.Rd.La(),u.kp.im(c,this.wT,this.$z,this.Ub)):null;var c},b.prototype.La=function(){return this.ya},b.prototype.qe=function(){},b}();u.qL=A}(B||(B={})),function(u){var A=function(){function c(a){this.nd=a,this.Bj=new u.l,this.Bj.Oa(),this.oh=new u.l,this.oh.Oa()}return c.prototype.Nt=function(){var a=this.Bj.v;this.Bj.v=this.oh.v,this.oh.v=a,a=this.Bj.C,this.Bj.C=this.oh.C,this.oh.C=a,a=this.Bj.G,this.Bj.G=this.oh.G,this.oh.G=a,a=this.Bj.H,this.Bj.H=this.oh.H,this.oh.H=a},c.prototype.eQ=function(a,r){if(this.nd!=null&&!this.nd.progress(-1,-1))throw u.i.fu("user_canceled");var o=!this.Bj.isIntersecting(this.oh);return u.aa.Hc(a.getType())&&u.aa.Hc(r.getType())?a.I()>r.I()?this.gE(a,r,o):(this.Nt(),a=this.gE(r,a,o),this.Nt(),a):a.getType()==550&&u.aa.Hc(r.getType())?(a=this.hE(r,a,o),this.Nt(),a):r.getType()==550&&u.aa.Hc(a.getType())?this.hE(a,r,o):a.getType()==550&&r.getType()==550?a.I()>r.I()?this.iE(a,r):(this.Nt(),a=this.iE(r,a),this.Nt(),a):0},c.prototype.gE=function(a,r,o){var l=a.Ga(),d=r.Ga(),p=new u.l,g=new u.l,y=17976931348623157e292;if(!o&&this.pY(a,r,l,d))return 0;for(;l.$a();)for(;l.Ha();)if((a=l.ha()).A(p),!(p.px(this.oh)>y)){for(;d.$a();)for(;d.Ha();)if((r=d.ha()).A(g),p.px(g)<y&&(r=a.tb(r,o),(r*=r)<y)){if(r==0)return 0;y=r}d.Zi()}return Math.sqrt(y)},c.prototype.hE=function(a,r,o){var l=a.Ga(),d=new u.l,p=17976931348623157e292,g=new u.h,y=r.I();for(o=!o&&a.getType()==1736;l.$a();)for(;l.Ha();){var w=l.ha();if(w.A(d),!(1<y&&d.px(this.oh)>p)){for(var S=0;S<y;S++){if(r.D(S,g),o&&u.hd.Yd(a,g,0)!=0)return 0;var k=w.fe(g,!1);if(g.sub(w.hc(k)),(k=g.Sk())<p){if(k==0)return 0;p=k}}o=!1}}return Math.sqrt(p)},c.prototype.iE=function(a,r){for(var o,l=17976931348623157e292,d=new u.h,p=new u.h,g=a.I(),y=r.I(),w=0;w<g;w++)if(a.D(w,d),!(1<y&&this.oh.iK(d)>l)){for(var S=0;S<y;S++)if(r.D(S,p),(o=u.h.yc(d,p))<l){if(o==0)return 0;l=o}}return Math.sqrt(l)},c.prototype.pY=function(a,r,o,l){if(a.getType()==1736){for(;l.$a();)if(l.Ha()){var d=l.ha();if(u.hd.Yd(a,d.wc(),0)!=0)return!0}l.Zi()}if(r.getType()==1736){for(;o.$a();)if(o.Ha()&&(a=o.ha(),u.hd.Yd(r,a.wc(),0)!=0))return!0;o.Zi()}return!1},c.prototype.gm=function(a,r){return a.B()||r.B()?NaN:(a.A(this.Bj),r.A(this.oh),this.eQ(a,r))},c}(),b=function(c){function a(){return c!==null&&c.apply(this,arguments)||this}return Qe(a,c),a.prototype.V=function(r,o,l){if(r==null||o==null)throw u.i.N();if(r.B()||o.B())return NaN;var d=r.getType(),p=o.getType();if(d==33){if(p==33)return u.h.tb(r.D(),o.D());if(p==197)return l=new u.l,o.A(l),l.tb(r.D());(d=new u.de).add(r),r=d}else if(d==197){if(p==197)return p=new u.l,r.A(p),l=new u.l,o.A(l),l.tb(p);(d=new u.Da).ad(r,!1),r=d}return p==33?((p=new u.de).add(o),o=p):p==197&&((p=new u.Da).ad(o,!1),o=p),new A(l).gm(r,o)},a.local=function(){return a.instance===null&&(a.instance=new a),a.instance},a.prototype.getType=function(){return 14},a.instance=null,a}(u.Je);u.rL=b}(B||(B={})),function(u){var A=function(){function b(c,a,r,o){this.zH=c,this.DH=a,this.nd=o,this.$G=r}return b.prototype.next=function(){var c=this.zH.next();return c==null?null:this.zC(c)},b.prototype.La=function(){return this.zH.La()},b.prototype.zC=function(c){var a=c.getType();if(u.aa.Rn(a))return c;if(a==197)return(a=new u.Da(c.description)).ad(c,!1),this.zC(a);if(c.B())return c;if(c==null)throw u.i.Qa();a=c.Ia();for(var r=new u.yb,o=0,l=c.da();o<l;o++)this.TK(c,o,a,r);return a},b.prototype.TK=function(c,a,r,o){if(!(2>c.Ja(a))){var l=c.Ba(a),d=c.Vc(a)-1,p=c.ub(0),g=c.dc(a),y=new u.ia(0);y.Jb(c.Ja(a)+1);var w=new u.ia(0);for(w.Jb(c.Ja(a)+1),y.add(g?l:d),y.add(l),l=new u.h;1<y.size;){var S=y.Fc();y.If();var k=y.Fc();c.D(S,l),o.Dc(l),c.D(k,l),o.Qc(l),0<=(k=this.SK(o,l,p,S,k,d))?(y.add(k),y.add(S)):w.add(S)}if(g||w.add(y.get(0)),w.size==y.size)r.addPath(c,a,!0);else if(2<=w.size&&(!this.$G||w.size!=2||!(g||u.h.tb(c.Na(w.get(0)),c.Na(w.get(1)))<=this.DH))){for(a=new u.Sa,o=0,d=w.size;o<d;o++)c.ve(w.get(o),a),o==0?r.nf(a):r.lineTo(a);g&&(this.$G||w.size!=2||r.lineTo(a),r.Ap())}}},b.prototype.SK=function(c,a,r,o,l,d){var p=l-1;for(l<=o&&(p=d),d=l=-1,o+=1;o<=p;o++){r.tc(2*o,a);var g=a.x,y=a.y;c.hc(c.fe(a,!1),a),a.x-=g,a.y-=y,(g=a.length())>this.DH&&g>d&&(l=o,d=g)}return l},b.prototype.qe=function(){},b}();u.sL=A}(B||(B={})),function(u){var A=function(b){function c(){return b!==null&&b.apply(this,arguments)||this}return Qe(c,b),c.prototype.getType=function(){return 29},c.prototype.V=function(a,r,o,l){return a instanceof u.aa?(a=new u.Zc(a),this.V(a,r,o,l).next()):new u.sL(a,r,o,l)},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.instance=null,c}(u.Je);u.EC=A}(B||(B={})),function(u){var A=function(b){function c(){return b!==null&&b.apply(this,arguments)||this}return Qe(c,b),c.prototype.getType=function(){return 21},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.V=function(a,r,o,l,d,p,g,y){return a instanceof u.aa?(y=new u.Zc(a),this.V(y,r,o,[l],d,p,!1,g).next()):g===!0?(o=new u.GC(a,r,o,l,d,!1,!1,y),u.Gh.local().V(o,r,y)):new u.GC(a,r,o,l,d,!1,!1,y)},c.instance=null,c}(u.Je);u.FC=A}(B||(B={})),function(u){var A=function(){function b(c,a,r,o,l,d,p,g){if(d)throw u.i.Ie();if(a==null)throw u.i.N();this.ya=-1,this.Ms=c,this.vg=a,this.ze=r,this.Cs=o,this.$n=l,this.eo=-1,this.Ub=g,this.uT=new u.l,this.uT.Oa()}return b.prototype.next=function(){for(var c;(c=this.Ms.next())!=null;)return this.ya=this.Ms.La(),this.eo+1<this.Cs.length&&this.eo++,this.$Q(c,this.Cs[this.eo]);return null},b.prototype.La=function(){return this.ya},b.prototype.$Q=function(c,a){return u.VK.buffer(c,this.vg,this.ze,a,this.$n,this.Ub)},b.prototype.qe=function(){},b}();u.GC=A}(B||(B={})),function(u){var A=function(b){function c(){return b!==null&&b.apply(this,arguments)||this}return Qe(c,b),c.prototype.getType=function(){return 24},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.V=function(a,r,o){if(r==null)throw u.i.N();if(a.B()||1>a.Db())return 0;if(o==4)throw u.i.Ie();var l=u.cb.sc(r),d=u.cb.vv(l),p=u.cb.ev(l);d*=2-d;var g=l.Hd().ai,y=a.getType();if(y==1736||y==197)var w=a.mg();else u.aa.yd(y)?(w=new u.Ta(a.description)).oc(a,!0):w=a;if(l.Nb(r)==0){if(u.cb.Wc(r)){w=u.Hh.lj(w,r),y==1607&&w==a&&(w=u.aa.jg(a)),a=new u.Nc,u.cb.gh(r).cn(a),y=0;for(var S=w.I();y<S;y++){var k=w.Na(y);k.x=u.Hh.Zm(k.x,a),w.Cb(y,k)}}a=w.Ia(),w=u.Hh.WI(r,l,w,a)?a:u.cb.zh(w,r,l)}return this.hQ(w,o,p,d,g)},c.prototype.hQ=function(a,r,o,l,d){var p=new u.ga(0),g=0;for(a=a.Ga();a.$a();)for(;a.Ha();){var y=a.ha(),w=y.ac();y=y.wc(),w.scale(d),y.scale(d),u.kb.wd(o,l,w.x,w.y,y.x,y.y,p,null,null,r),g+=p.u}return g},c.instance=null,c}(u.Je);u.vL=A}(B||(B={})),function(u){var A=function(b){function c(){return b!==null&&b.apply(this,arguments)||this}return Qe(c,b),c.prototype.getType=function(){return 18},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.V=function(a,r,o,l,d){return a instanceof u.aa?(a=new u.Zc(a),this.V(a,r,o,l,d).next()):new u.uL(a,o,l,r,-1,-1,d)},c.instance=null,c}(u.Je);u.tL=A}(B||(B={})),function(u){var A=function(){function b(c,a,r,o,l,d){if(0<d||r!=4&&0<l)throw u.i.Ie();if(a==null)throw u.i.N();this.ya=-1,this.Ms=c,this.vg=a,this.ze=r,this.DT=o,this.CT=l}return b.prototype.next=function(){for(var c;(c=this.Ms.next())!=null;)return this.ya=this.Ms.La(),this.Zy(c);return null},b.prototype.La=function(){return this.ya},b.prototype.Zy=function(c){return u.cj.Qr(c,this.vg,this.ze,this.DT,this.CT,this.Ub)},b.prototype.qe=function(){},b}();u.uL=A}(B||(B={})),function(u){(function(A){A[A.Unknown=0]="Unknown",A[A.Contains=1]="Contains",A[A.Within=2]="Within",A[A.Equals=3]="Equals",A[A.Disjoint=4]="Disjoint",A[A.Touches=8]="Touches",A[A.Crosses=16]="Crosses",A[A.Overlaps=32]="Overlaps",A[A.NoThisRelation=64]="NoThisRelation",A[A.Intersects=1073741824]="Intersects",A[A.IntersectsOrDisjoint=1073741828]="IntersectsOrDisjoint"})(u.cL||(u.cL={})),u.wL=function(){function A(){}return A.nW=function(b,c){var a=b.getType(),r=c.getType();if(u.aa.xj(a)){var o=b.Bb;if(o!=null&&(o=o.Fk)!=null){if(r==33){var l=c.D();o=o.So(l.x,l.y)}else l=new u.l,c.A(l),o=o.Ro(l);if(o==1)return 1;if(o==0)return 4}}if(u.aa.xj(r)&&(o=c.Bb)!=null&&(o=o.Fk)!=null){if(a==33?(b=b.D(),o=o.So(b.x,b.y)):(c=new u.l,b.A(c),o=o.Ro(c)),o==1)return 2;if(o==0)return 4}return 0},A}()}(B||(B={})),function(u){var A=function(b){function c(){return b!==null&&b.apply(this,arguments)||this}return Qe(c,b),c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.getType=function(){return 15},c.prototype.V=function(a,r,o,l,d){return a instanceof u.aa?(a=new u.Zc(a),r=new u.Zc(r),this.V(a,r,o,l,d===void 0?-1:d).next()):d===void 0?new u.HC(a,r,o,l,-1):new u.HC(a,r,o,l,d)},c.prototype.wn=function(a,r,o){this.Iu(a)&&(r=u.ta.kj(r,a,!1),a.fj(o)||a.lu(r,o))},c.prototype.Iu=function(a){return u.Nx.zE(a)},c.instance=null,c}(u.Je);u.Xj=A}(B||(B={})),function(u){var A=function(){function b(c,a,r,o,l){if(this.ts=a==null,this.ya=-1,this.Rd=c,this.vg=r,this.Se=a.next(),this.Dj=this.Se.getType(),this.Ub=o,this.Fi=l,this.Fi!=-1&&(0>=this.Fi||7<this.Fi))throw u.i.N("bad dimension mask")}return b.prototype.next=function(){if(this.ts)return null;if(this.zw!=null){var c=this.zw.next();if(c!=null)return c;this.zw=null}for(;(c=this.Rd.next())!=null;)return this.ya=this.Rd.La(),this.Fi==-1?c=this.Ea(c):(this.zw=this.PS(c),c=this.zw.next()),c;return null},b.prototype.La=function(){return this.ya},b.prototype.Ea=function(c){var a=this.zK(c);if(a!=null)return a;a=u.ta.mv(this.Se,c);var r=u.ta.Wd(this.vg,a,!0);a=new u.l,this.Se.A(a);var o=new u.l;return c.A(o),a.W(2*r,2*r),a.Ea(o),a.W(100*r,100*r),r=u.Ud.clip(this.Se,a,0,0),c=u.Ud.clip(c,a,0,0),u.Fg.Av(c,r,this.vg,this.Ub)},b.prototype.QI=function(c,a,r){var o=0;if(1&a)r[0]==null&&(r[0]=new u.de(c)),o++;else for(var l=0;l<r.length-1;l++)r[l]=r[l+1];if(2&a)r[o]==null&&(r[o]=new u.Ta(c)),o++;else for(l=o;l<r.length-1;l++)r[l]=r[l+1];if(4&a)r[o]==null&&(r[o]=new u.Da(c)),o++;else for(l=o;l<r.length-1;l++)r[l]=r[l+1];if(o!=3){for(c=[],l=0;l<o;l++)c[l]=r[l];return new u.Zc(c)}return new u.Zc(r)},b.prototype.PS=function(c){var a=this.zK(c);if(a!=null){var r=[null,null,null];return r[a.Db()]=a,this.QI(c.description,this.Fi,r)}a=u.ta.mv(this.Se,c),r=u.ta.Wd(this.vg,a,!0),a=new u.l,this.Se.A(a),a.W(2*r,2*r);var o=new u.l;return c.A(o),a.Ea(o),a.W(100*r,100*r),r=u.Ud.clip(this.Se,a,0,0),a=u.Ud.clip(c,a,0,0),r=u.Fg.Pz(a,r,this.vg,this.Ub),this.QI(c.description,this.Fi,r)},b.prototype.zK=function(c){var a=u.ta.mv(c,this.Se),r=u.ta.Wd(this.vg,a,!0);a=c.getType();var o=c.B(),l=this.Se.B();if(!(l=o||l)){l=new u.l,c.A(l);var d=new u.l;this.Se.A(d),d.W(2*r,2*r),l=!l.isIntersecting(d)}if(!l)if((d=u.wL.nW(this.Se,c))==4)l=!0;else{if(2&d)return this.Se;if(1&d)return c}if(l)return(r=u.aa.tf(a))<(l=u.aa.tf(this.Dj))?b.HB(c,o):r>l||r==0&&a==550&&this.Dj==33?this.nJ():b.HB(c,o);if((this.Fi==-1||this.Fi==4)&&a==197&&this.Dj==197)return r=this.Se,a=new u.l,c.A(a),o=new u.l,r.A(o),a.Ea(o),r=new u.Fh,c.copyTo(r),r.Xo(a),r;if(a==197&&u.aa.tf(this.Dj)==0||this.Dj==197&&u.aa.tf(a)==0)return o=a==197?c:this.Se,c=a==197?this.Se:c,a=new u.l,o.A(a),u.Ud.clip(c,a,r,0);if(u.aa.tf(a)==0&&0<u.aa.tf(this.Dj)||0<u.aa.tf(a)&&u.aa.tf(this.Dj)==0){if(r=u.ta.kj(this.vg,c,!1),a==550||a==33)return u.Fg.zG(c,this.Se,r);if(this.Dj==550||this.Dj==33)return u.Fg.zG(this.Se,c,r);throw u.i.Qa()}return this.Fi!=-1&&this.Fi!=2||a!=1607||this.Dj!=1736?this.Fi!=-1&&this.Fi!=2||a!=1736||this.Dj!=1607?null:this.wK(this.Se,c):this.wK(c,this.Se)},b.prototype.wK=function(c,a){var r=c,o=a,l=u.ta.kj(this.vg,a,!1),d=new u.l;o.A(d);var p=new u.l;r.A(p),p.W(2*l,2*l),d.Ea(p),d.W(10*l,10*l),r=c=u.Ud.clip(c,d,0,0),p=new u.ia(0);var g=-1,y=o.Bb;if(y!=null){var w=y.Fk;if(w!=null){g=0,p.Jb(r.I()+r.da());for(var S=new u.l,k=r.Ga();k.$a();)for(;k.Ha();){k.ha().A(S);var C=w.Ro(S);C==1?p.add(1):C==0?p.add(0):(p.add(-1),g++)}}}if(5<a.I()&&(y=(o=a=u.Ud.clip(a,d,0,0)).Bb),0>g&&(g=r.yz()),d=r.I()+o.I(),g*o.I()>Math.log(d)*d*4)return null;d=null,g=o.Ga(),y!=null&&y.Fb!=null&&(d=y.Fb),d==null&&20<o.I()&&(d=u.ta.nE(o)),c=c.Ia(),o=null,y=r.Ga(),w=[0,0,0,0,0,0,0,0,0],S=new u.be(0),k=new u.ig,C=-1;for(var O=0,R=0,N=0<p.size,j=-1;y.$a();){j=y.gb;var G=0;for(C=-1,O=0;y.Ha();){var D=N?u.O.truncate(p.get(R)):-1;R++;var V=y.ha();if(0>D){if(d!=null)for(o==null?o=d.vR(V,l):o.Uo(V,l),D=o.next();D!=-1;D=o.next()){g.Vb(d.ja(D)),D=g.ha();var Z=V.Ea(D,null,w,null,l);for(D=0;D<Z;D++)S.add(w[D])}else for(g.Zi();g.$a();)for(;g.Ha();)for(D=g.ha(),Z=V.Ea(D,null,w,null,l),D=0;D<Z;D++)S.add(w[D]);if(0<S.size){S.Vd(0,S.size,function(ye,ge){return ye-ge});var q=0;S.add(1),Z=-1,D=0;for(var ne=S.size;D<ne;D++){var ee=S.get(D);if(ee!=q){var he=!1;if(q!=0||ee!=1?(V.ah(q,ee,k),q=k.get()):(q=V,he=!0),2<=G){if(c.Dr(r,j,C,O,G==3),this.QD(a,q.ac(),l)!=1&&this.RD(a,q,l)!=1)return null;c.oc(q,!1),G=1,O=0}else switch(Z=this.RD(a,q,l),Z){case 1:he?2>G?(C=y.wb()-r.Ba(j),O=1,G=G==0?3:2):O++:(c.oc(q,G==0),G=1);break;case 0:G=0,C=-1,O=0;break;default:return null}q=ee}}}else{if(0>(D=this.QD(a,V.ac(),l)))return null;D==1?(2>G&&(C=y.wb()-r.Ba(j),G=G==0?3:2),O++):(C=-1,O=0)}S.clear(!1)}else D!=0&&D==1&&(G==0?(G=3,C=y.wb()-r.Ba(j)):G==1?(G=2,C=y.wb()-r.Ba(j)):O++)}2<=G&&(c.Dr(r,j,C,O,G==3),C=-1)}return c},b.prototype.QD=function(c,a,r){return u.Dg.wm(c,a,r)},b.prototype.RD=function(c,a,r){var o=a.ac();a=a.wc();var l=u.Dg.wm(c,o,r),d=u.Dg.wm(c,a,r);return l==1&&d==0||l==0&&d==1?-1:l==0||d==0?0:l==1||d==1?1:((l=new u.h).add(o,a),l.scale(.5),(c=u.Dg.wm(c,l,r))==0?0:c==1?1:-1)},b.HB=function(c,a){return a?c:c.Ia()},b.prototype.nJ=function(){return this.yH==null&&(this.yH=this.Se.Ia()),this.yH},b.prototype.qe=function(){},b}();u.HC=A}(B||(B={})),function(u){var A=function(b){function c(){return b!==null&&b.apply(this,arguments)||this}return Qe(c,b),c.prototype.getType=function(){return 28},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.V=function(a,r,o,l,d,p,g){return a instanceof u.aa?(a=new u.Zc(a),this.V(a,r,o,l,d,p,g).next()):new u.xL(a,r,o,l,d,p,g)},c.instance=null,c}(u.Je);u.IC=A}(B||(B={})),function(u){var A=function(){function b(c,a,r,o,l,d,p){this.ya=-1,this.Rd=c,this.Mj=a,this.Ka=r,this.Ki=o,this.CA=l,this.uH=d,this.nd=p}return b.prototype.next=function(){var c=this.Rd.next();return c!=null?(this.ya=this.Rd.La(),this.jL(c)):null},b.prototype.La=function(){return this.ya},b.prototype.jL=function(c){var a=0>=this.uH?u.ta.kj(this.Mj,c,!1):this.uH;return u.IK.V(c,this.Ka,this.Ki,this.CA,a,this.nd)},b.prototype.qe=function(){},b}();u.xL=A}(B||(B={})),function(u){var A;(A=u.NK||(u.NK={}))[A.clipToDomainOnly=1]="clipToDomainOnly",A[A.clipWithHorizon=2]="clipWithHorizon",A[A.foldAndClipWithHorizon=3]="foldAndClipWithHorizon";var b=function(c){function a(){return c!==null&&c.apply(this,arguments)||this}return Qe(a,c),a.prototype.getType=function(){return 0},a.local=function(){return a.instance===null&&(a.instance=new a),a.instance},a.prototype.V=function(r,o,l){return r instanceof u.aa?(r=new u.Zc(r),this.V(r,o,l).next()):new u.yL(r,o,l)},a.prototype.transform=function(r,o,l,d){return u.bu.transform(r,o,l,d,!0)},a.prototype.Qt=function(r,o,l,d){return u.bu.Qt(r,o,l,d)},a.instance=null,a}(u.Je);u.Hx=b}(B||(B={})),function(u){var A=function(){function b(c,a,r){this.ya=-1,this.Rd=c,this.MT=a,this.nd=r}return b.prototype.next=function(){var c=this.Rd.next();return c!=null?(this.ya=this.Rd.La(),u.bu.zh(c,this.MT,this.nd)):null},b.prototype.La=function(){return this.ya},b.prototype.qe=function(){},b}();u.yL=A}(B||(B={})),function(u){var A=function(){function c(){}return c.prototype.reset=function(){this.ph=this.xk=-1,this.us=this.kq=!1},c.prototype.AQ=function(a,r,o){for(a.Vb(r,o);a.Ha();){var l=a.ha();if((l=l.Qb())!=0)return a.wb()}for(a.Vb(r,o);a.Ez();)if((l=(l=a.li()).Qb())!=0)return a.wb();return-1},c.prototype.BQ=function(a,r){for(a.Vb(r,-1);a.Ez();)if(a.li().Qb()!=0)return a.wb();return-1},c.prototype.zQ=function(a,r){for(a.Vb(r,-1),a.ha();a.Ha();)if(a.ha().Qb()!=0)return a.wb();return-1},c.prototype.yQ=function(a,r,o,l){if(this.xk=this.AQ(r,o,l),this.xk!=-1){r.Vb(this.xk,-1);var d=r.ha(),p=d.hc(d.fe(a,!1));if(o=u.h.yc(p,a),(l=new u.h).L(p),l.sub(d.ac()),(p=new u.h).L(a),p.sub(d.ac()),this.kq=0>l.wi(p),this.ph=this.zQ(r,this.xk),this.ph!=-1){r.Vb(this.ph,-1);var g=(d=r.ha()).fe(a,!1);g=d.hc(g);var y=u.h.yc(g,a);y>o?this.ph=-1:(l.L(g),l.sub(d.ac()),p.L(a),p.sub(d.ac()),this.us=0>l.wi(p))}this.ph==-1&&(this.ph=this.BQ(r,this.xk),this.ph!=-1&&(r.Vb(this.ph,-1),g=(d=r.ha()).fe(a,!1),g=d.hc(g),(y=u.h.yc(g,a))>o?this.ph=-1:(l.L(g),l.sub(d.ac()),p.L(a),p.sub(d.ac()),this.us=0>l.wi(p),a=this.xk,this.xk=this.ph,this.ph=a,a=this.kq,this.kq=this.us,this.us=a)))}},c.prototype.cO=function(a,r,o,l,d){return o=o.Ga(),this.yQ(a,o,l,d),this.xk!=-1&&this.ph==-1?this.kq:this.xk!=-1&&this.ph!=-1?this.kq==this.us?this.kq:(o.Vb(this.xk,-1),a=o.ha().kg(),o.Vb(this.ph,-1),r=o.ha().kg(),0<=a.wi(r)):r},c}(),b=function(c){function a(){return c!==null&&c.apply(this,arguments)||this}return Qe(a,c),a.local=function(){return a.instance===null&&(a.instance=new a),a.instance},a.prototype.getType=function(){return 3},a.prototype.nz=function(r,o,l){var d;if(d===void 0&&(d=!1),r.B())return new u.$l;o=o.D();var p=r,g=r.getType();switch(g==197&&((p=new u.Da).ad(r,!1),g=1736),g){case 33:return this.xI(p,o);case 550:return this.jI(p,o);case 1607:case 1736:return this.bU(p,o,l,d);default:throw u.i.fa("not implemented")}},a.prototype.oz=function(r,o){if(r.B())return new u.$l;o=o.D();var l=r,d=r.getType();switch(d==197&&((l=new u.Da).ad(r,!1),d=1736),d){case 33:return this.xI(l,o);case 550:case 1607:case 1736:return this.jI(l,o);default:throw u.i.fa("not implemented")}},a.prototype.pz=function(r,o,l,d){if(0>d)throw u.i.N();if(r.B())return[];o=o.D();var p=r,g=r.getType();switch(g==197&&((p=new u.Da).ad(r,!1),g=1736),g){case 33:return this.TU(p,o,l,d);case 550:case 1607:case 1736:return this.tU(p,o,l,d);default:throw u.i.fa("not implemented")}},a.prototype.bU=function(r,o,l,d){if(r.getType()==1736&&l&&(l=new u.l,r.A(l),l=u.ta.Wd(null,l,!1),(d?u.hd.Yd(r,o,0):u.hd.Yd(r,o,l))!=0)){var p=new u.$l(o,0,0);return d&&p.WJ(!0),p}var g=r.Ga();p=new u.h;for(var y=l=-1,w=17976931348623157e292,S=0;g.$a();)for(;g.Ha();){var k=g.ha();k=k.hc(k.fe(o,!1));var C=u.h.yc(k,o);C<w?(S=1,p=k,l=g.wb(),y=g.gb,w=C):C==w&&S++}return p=new u.$l(p,l,Math.sqrt(w)),d&&(g.Vb(l,y),k=g.ha(),d=0>u.h.Uq(o,k.ac(),k.wc()),1<S&&((S=new A).reset(),d=S.cO(o,d,r,l,y)),p.WJ(d)),p},a.prototype.xI=function(r,o){return r=r.D(),o=u.h.tb(r,o),new u.$l(r,0,o)},a.prototype.jI=function(r,o){for(var l=r.ub(0),d=r.I(),p=r=0,g=0,y=17976931348623157e292,w=0;w<d;w++){var S=new u.h;l.tc(2*w,S);var k=u.h.yc(S,o);k<y&&(p=S.x,g=S.y,r=w,y=k)}return(o=new u.$l).ey(p,g,r,Math.sqrt(y)),o},a.prototype.TU=function(r,o,l,d){return d==0?[]:(l*=l,r=r.D(),(o=u.h.yc(r,o))<=l?(l=[],(d=new u.$l).ey(r.x,r.y,0,Math.sqrt(o)),l[0]=d):l=[],l)},a.prototype.tU=function(r,o,l,d){if(d==0)return[];var p=r.ub(0),g=r.I();r=[],l*=l;for(var y=0;y<g;y++){var w=p.read(2*y),S=p.read(2*y+1),k=o.x-w,C=o.y-S;(k=k*k+C*C)<=l&&((C=new u.$l).ey(w,S,y,Math.sqrt(k)),r.push(C))}return o=r.length,r.sort(function(O,R){return O.Ka<R.Ka?-1:O.Ka==R.Ka?0:1}),d>=o||(r.length=d),r.slice(0)},a.instance=null,a}(u.Je);u.Ix=b}(B||(B={})),function(u){var A=function(b){function c(){return b!==null&&b.apply(this,arguments)||this}return Qe(c,b),c.prototype.getType=function(){return 4},c.prototype.V=function(a,r,o,l,d){return u.am.yB(a,r,o,l,d)},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.Iu=function(a){return u.Vt.wy(a)},c.prototype.wn=function(a,r,o){u.Vt.CD(a,r,o)},c.instance=null,c}(u.Je);u.zL=A}(B||(B={})),function(u){var A=function(b){function c(){return b!==null&&b.apply(this,arguments)||this}return Qe(c,b),c.prototype.getType=function(){return 33},c.prototype.V=function(a,r,o,l,d){return a===1073741824?!u.ud.zB(r,o,l,4,d):u.ud.zB(r,o,l,a,d)},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.Iu=function(a){return u.Vt.wy(a)},c.prototype.wn=function(a,r,o){u.Vt.CD(a,r,o)},c.instance=null,c}(u.Je);u.dj=A}(B||(B={})),function(u){var A=function(){function b(c,a,r,o){if(this.nd=o,this.rT=r,this.ya=-1,c==null)throw u.i.N();this.yk=c,this.Mj=a}return b.prototype.next=function(){var c;if((c=this.yk.next())!=null){if(this.ya=this.yk.La(),this.nd!=null&&!this.nd.progress(-1,-1))throw u.i.fu("user_canceled");return this.eC(c)}return null},b.prototype.La=function(){return this.ya},b.prototype.eC=function(c){if(c==null)throw u.i.N();return u.Jx.cK(c,this.Mj,this.rT,this.nd)},b.prototype.qe=function(){},b}();u.AL=A}(B||(B={})),function(u){var A=function(b){function c(){return b!==null&&b.apply(this,arguments)||this}return Qe(c,b),c.prototype.getType=function(){return 26},c.prototype.V=function(a,r,o,l){return a instanceof u.aa?(a=new u.Zc(a),this.V(a,r,o,l).next()):new u.AL(a,r,o,l)},c.prototype.rs=function(a,r,o,l,d){return 0<(l!==void 0?u.Jx.rs(a,r,o,l,d):u.Jx.rs(a,r,!1,null,o))},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.instance=null,c}(u.Je);u.Yl=A}(B||(B={})),function(u){var A=function(){function d(){this.yq=0}return d.prototype.nX=function(p){this.yq&=-2,this.yq|=p?1:0},d.prototype.Wp=function(){return!!(1&this.yq)},d.prototype.XF=function(){return this.Wp()?0:1},d}();u.xY=A;var b=function(){},c=function(d,p,g,y){this.x=d,this.y=p,this.Ai=g,this.xm=y},a=function(){function d(p){this.Be=p}return d.prototype.compare=function(p,g,y){return p=p.ja(y),g=this.Be.lf.read(2*g),0>(g-=p=this.Be.lf.read(2*p))?-1:0<g?1:0},d}(),r=function(){function d(p){this.Be=p}return d.prototype.compare=function(p,g,y){g=this.Be.hb[g],p=this.Be.hb[p.ja(y)];var w=g.Wp(),S=p.Wp();y=g.ne.Pe(this.Be.Mo,0);var k=p.ne.Pe(this.Be.Mo,0);return y==k&&((w=.5*((y=Math.min(w?g.ne.na:g.ne.la,S?p.ne.na:p.ne.la))-this.Be.Mo)+this.Be.Mo)==this.Be.Mo&&(w=y),y=g.ne.Pe(w,0),k=p.ne.Pe(w,0)),y<k?-1:y>k?1:0},d}(),o=function(){function d(p,g){this.YI=new u.h,this.parent=p,this.dS=g}return d.prototype.nr=function(p,g,y){var w=this.parent,S=this.dS;y.Vd(p,g,function(k,C){return w.Mh(k,C,S)})},d.prototype.$p=function(p){return p=this.parent.gi.get(p),this.parent.lf.tc(2*(p>>1),this.YI),this.YI.y+(1&p?this.parent.Oj:-this.parent.Oj)},d}(),l=function(){function d(p,g,y,w,S){this.nH=p.description,this.X=p,this.Qg=g,this.Oj=u.ta.kj(this.Qg,p,!1),this.Bo=u.ta.kj(this.Qg,p,!0),this.xA=y,this.oT=this.nH.Aa,this.hb=[],this.po=[],this.mh=new u.jp,this.fb=new u.Yj,this.ke=new u.Md,this.ZG=this.ql=S}return d.prototype.eT=function(){return this.ZG=!0,(!u.aa.Hc(this.X.getType())||this.GE()&&this.DE(!1))&&this.mO()?u.aa.Hc(this.X.getType())?this.pO()?this.X.getType()==1607?this.rO()?2:0:this.sO()?this.tO():0:0:2:0},d.prototype.kC=function(p,g){var y=this.lf.read(2*p);p=this.lf.read(2*p+1);var w=this.lf.read(2*g);g=this.lf.read(2*g+1);var S=!u.Yt.Cv(y,p,w,g,this.Oj*this.Oj);return S||this.X.Db()!=0&&y==w&&p==g},d.prototype.GE=function(){for(var p=this.X,g=p.xf?3:2,y=0,w=p.da();y<w;y++)if(p.Ja(y)<g)return this.ke=new u.Md(1,y,0),!1;return!0},d.prototype.DE=function(p){var g=this.X,y=g.Ga(),w=g.hasAttribute(1);for(g=w?u.ta.wE(this.Qg,g,!1):0;y.$a();)for(;y.Ha();){var S=y.ha();if(!(S.Qb()>this.Oj)){if(p&&w){var k=S.wv(1,0);if(S=S.wv(1,0),Math.abs(S-k)>g)continue}return this.ke=new u.Md(2,y.wb(),-1),!1}}return!0},d.prototype.mO=function(){var p=this.X,g=null;u.aa.Hc(this.X.getType())&&(g=this.X);var y=(this.ZG||this.ql)&&g!=null,w=p.I();this.lf=p.ub(0),this.gi=new u.ia(0),this.gi.Jb(2*w),this.fi=new u.ia(0),this.fi.Jb(2*w),y&&(this.Fl==null&&(this.Fl=new u.ia(0)),this.Fl.Jb(w));for(var S=p=0;S<w;S++)if(this.gi.add(2*S),this.gi.add(2*S+1),this.fi.add(2*S),this.fi.add(2*S+1),y){for(;S>=g.Vc(p);)p++;this.Fl.add(p)}for(new u.Xt().sort(this.fi,0,2*w,new o(this,y)),this.fb.clear(),this.fb.Vo(new a(this)),this.fb.De(w),g=0,w*=2;g<w;g++)if(y=this.fi.get(g),y=(p=this.gi.get(y))>>1,1&p){if(p=this.fb.search(y,-1),S=this.fb.we(p),k=this.fb.lb(p),this.fb.vd(p,-1),S!=-1&&k!=-1&&!this.kC(this.fb.ja(S),this.fb.ja(k)))return this.ke=new u.Md(3,this.fb.ja(S),this.fb.ja(k)),!1}else{if(p=this.fb.addElement(y,-1),(S=this.fb.we(p))!=-1&&!this.kC(this.fb.ja(S),y))return this.ke=new u.Md(3,y,this.fb.ja(S)),!1;var k=this.fb.lb(p);if(k!=-1&&!this.kC(this.fb.ja(k),y))return this.ke=new u.Md(3,y,this.fb.ja(k)),!1}return!0},d.prototype.pO=function(){return 10>this.X.I()?this.nO():this.oO()},d.prototype.oO=function(){var p=new u.gd;p.Ib(this.X);var g=new u.Md;return!u.$t.kI(!1,p,this.Oj,g,this.nd)||(g.Jo=p.Ua(g.Jo),g.Ko=p.Ua(g.Ko),this.ke.Wt(g),!1)},d.prototype.nO=function(){var p=this.X,g=p.Ga();for(p=p.Ga();g.$a();)for(;g.Ha();){var y=g.ha();if(!g.Qn()||!g.$S()){p.BW(g);do for(;p.Ha();){var w=p.ha();if((w=y.zr(w,this.Oj,!0))!=0)return this.ke=new u.Md(w==2?5:4,g.wb(),p.wb()),!1}while(p.$a())}}return!0},d.prototype.sO=function(){var p=this.X;this.hb.length=0,this.po.length=0,this.Zf=p.Ga(),this.Zf.JB();var g=new u.ia(0);g.Jb(10);var y=NaN,w=0,S=0;for(p=2*p.I();S<p;S++){var k=this.fi.get(S);if(!(1&(k=this.gi.get(k)))){k>>=1;var C=this.lf.read(2*k),O=this.lf.read(2*k+1);if(g.size!=0&&(C!=y||O!=w)){if(!this.RI(g))return!1;g!=null&&g.clear(!1)}g.add(k),y=C,w=O}}return!!this.RI(g)},d.prototype.rO=function(){for(var p=this.X,g=Array(p.da()),y=0,w=p.da();y<w;y++)g[y]=p.Nn(y);w=new b;var S=new u.h;y=this.fi.get(0);var k=(y=this.gi.get(y))>>1;this.lf.tc(2*k,S);var C=g[y=this.Fl.get(k)],O=p.Ba(y),R=p.Vc(y)-1;w.el=k==O||k==R,w.ny=this.ql?!C&&w.el:w.el,w.Ai=y,w.x=S.x,w.y=S.y,w.xm=k;for(var N=new b,j=1,G=this.fi.size;j<G;j++)if(y=this.fi.get(j),!(1&(y=this.gi.get(y)))){k=y>>1,this.lf.tc(2*k,S),(y=this.Fl.get(k))!=w.Ai&&(C=g[y],O=p.Ba(y),R=p.Vc(y)-1);var D=k==O||k==R,V=this.ql?!C&&w.el:w.el;if(N.x=S.x,N.y=S.y,N.Ai=y,N.xm=k,N.ny=V,N.el=D,N.x==w.x&&N.y==w.y){if(this.ql){if(!(N.ny&&w.ny||N.Ai==w.Ai&&(N.el||w.el)))return this.ke=new u.Md(8,N.xm,w.xm),!1}else if(!N.el||!w.el)return this.ke=new u.Md(5,N.xm,w.xm),!1}y=w,w=N,N=y}return!0},d.prototype.JE=function(){for(var p=this.X,g=[],y=-1,w=!1,S=0,k=p.da();S<k;S++)p.Ev(S)&&(w=!1,y++,S<k-1&&(p.Ev(S+1)||(w=!0))),g[S]=w?y:-1;w=new u.h,S=this.fi.get(0);var C=(S=this.gi.get(S))>>1;this.lf.tc(2*C,w),S=this.Fl.get(C),y=new c(w.x,w.y,S,C,g[S]),p=[];var O=1;for(k=this.fi.size;O<k;O++)if(S=this.fi.get(O),!(1&(S=this.gi.get(S)))){if(C=S>>1,this.lf.tc(2*C,w),S=this.Fl.get(C),(S=new c(w.x,w.y,S,C,g[S])).x==y.x&&S.y==y.y){if(S.Ai==y.Ai)return this.ke=new u.Md(9,S.xm,y.xm),!1;0<=g[S.Ai]&&g[S.Ai]==g[y.Ai]&&(p.length!=0&&p[p.length-1]==y||p.push(y),p.push(S))}y=S}if(p.length==0)return!0;for(S=new u.jp(!0),u.O.$u(g,-1),w=-1,(O=new u.h).Rc(),y=0,k=p.length;y<k;y++){(C=p[y]).x==O.x&&C.y==O.y||(w=S.Ph(0),O.x=C.x,O.y=C.y);var R=g[C.Ai];R==-1&&(R=S.Ph(2),g[C.Ai]=R),S.addElement(R,w),S.addElement(w,R)}for((k=new u.ia(0)).Jb(10),y=S.je;y!=-1;y=S.qz(y))if(!(1&(p=S.PF(y)))&&2&p){for(p=-1,k.add(y),k.add(-1);0<k.size;){if(w=k.Fc(),k.If(),O=k.Fc(),k.If(),1&(C=S.PF(O))){p=2&C?O:w;break}for(S.fX(O,1|C),C=S.rc(O);C!=-1;C=S.lb(C))(R=S.getData(C))!=w&&(k.add(R),k.add(O))}if(p!=-1){for(S=-1,y=0,k=g.length;y<k;y++)if(g[y]==p){S=y;break}return this.ke=new u.Md(10,S,-1),!1}}return!0},d.prototype.tO=function(){var p=this.X;if(0>=p.Ke())return this.ke=new u.Md(6,p.da()==1?1:-1,-1),0;if(p.da()==1)return this.ql&&!this.JE()?0:2;this.to=u.ia.qf(p.da(),0),this.JA=u.ia.qf(p.da(),-1);for(var g=-1,y=0,w=0,S=p.da();w<S;w++){var k=p.Ir(w);if(this.to.write(w,0>k?0:256),0<k)g=w,y=k;else{if(k==0)return this.ke=new u.Md(6,w,-1),0;if((0>g||y<Math.abs(k))&&(this.ke=new u.Md(7,w,-1),this.ql))return 0;this.JA.write(w,g)}}for(this.dt=p.da(),this.Om=new u.ia(0),this.Om.Jb(10),S=p.I(),this.Mo=NaN,(p=new u.ia(0)).Jb(10),this.Qq=u.ia.qf(S,-1),this.Hw=u.ia.qf(S,-1),this.zj!=null?this.zj.clear(!1):this.zj=new u.ia(0),this.zj.Jb(10),this.fb.clear(),this.fb.Vo(new r(this)),g=0,S*=2;0<this.dt&&g<S;g++)if(y=this.fi.get(g),!(1&(y=this.gi.get(y)))){if(y>>=1,(w=this.lf.read(2*y+1))!=this.Mo&&p.size!=0){if(!this.ut(p))return 0;p!=null&&p.clear(!1)}p.add(y),this.Mo=w}return 0<this.dt&&!this.ut(p)?0:this.ql?this.ke.Jj==0&&this.JE()?2:0:this.ke.Jj==0?2:1},d.prototype.RI=function(p){if(p.size==1)return!0;for(var g=0,y=p.size;g<y;g++){var w=p.get(g);this.Zf.Vb(w);var S=this.Zf.li();this.hb.push(this.Su(S,w,this.Zf.gb,!0)),this.Zf.ha(),S=this.Zf.ha(),this.hb.push(this.Su(S,w,this.Zf.gb,!1))}var k=this;for(this.hb.sort(function(R,N){return k.XP(R,N)}),(w=this.mh.je)==-1&&(w=this.mh.Ph(0)),this.mh.fn(this.hb.length),g=0,y=this.hb.length;g<y;g++)this.mh.addElement(w,g);g=!0;for(var C=y=-1;g&&(g=!1,(S=this.mh.rc(w))!=-1);)for(var O=this.mh.lb(S);O!=-1;)if(y=this.mh.getData(S),C=this.mh.getData(O),(y=this.hb[y].Io)!=(C=this.hb[C].Io))S=O,O=this.mh.lb(S);else if(g=!0,this.mh.jd(w,S),S=this.mh.we(O),(O=this.mh.jd(w,O))==-1||S==-1)break;if(g=this.mh.bs(w),this.mh.LE(w),0<g)return this.ke=new u.Md(5,y,C),!1;for(g=0,y=p.size;g<y;g++)this.vB(this.hb[g]);return this.hb.length=0,!0},d.prototype.ut=function(p){for(var g=0,y=p.size;g<y;g++){var w=p.get(g),S=this.Qq.read(w);if(S!=-1){var k=this.fb.ja(S);this.zj.add(k),this.fb.vd(S,-1),this.vB(this.hb[k]),this.hb[k]=null,this.Qq.write(w,-1)}(S=this.Hw.read(w))!=-1&&(k=this.fb.ja(S),this.zj.add(k),this.fb.vd(S,-1),this.vB(this.hb[k]),this.hb[k]=null,this.Hw.write(w,-1))}for(g=0,y=p.size;g<y;g++){if(w=p.get(g),this.Zf.Vb(w),(S=this.Zf.li()).na>S.la){var C=this.Zf.wb(),O=this.Su(S,w,this.Zf.gb,!0);0<this.zj.size?(k=this.zj.Fc(),this.zj.If(),this.hb[k]=O):(k=this.hb.length,this.hb.push(O)),S=this.fb.addElement(k,-1),this.Qq.read(C)==-1?this.Qq.write(C,S):this.Hw.write(C,S),!(3&this.to.read(this.Zf.gb))&&this.Om.add(S)}this.Zf.ha(),(S=this.Zf.ha()).na<S.la&&(C=this.Zf.ik(),O=this.Su(S,w,this.Zf.gb,!1),0<this.zj.size?(k=this.zj.Fc(),this.zj.If(),this.hb[k]=O):(k=this.hb.length,this.hb.push(O)),S=this.fb.addElement(k,-1),this.Qq.read(C)==-1?this.Qq.write(C,S):this.Hw.write(C,S),!(3&this.to.read(this.Zf.gb))&&this.Om.add(S))}for(g=0,y=this.Om.size;g<y&&0<this.dt;g++)if(S=this.Om.get(g),!(3&this.to.read(this.hb[this.fb.ja(S)].IA))){p=-1,w=this.fb.we(S);var R=S;O=null,k=-1;for(var N=0;w!=-1&&(k=this.fb.ja(w),k=(O=this.hb[k]).IA,!(3&(N=this.to.read(k))));)R=w,w=this.fb.we(w);w==-1?(C=1,w=R):(p=(3&N)==1?k:this.JA.read(k),C=O.XF()!=0?0:1,w=this.fb.lb(w));do{if(k=this.fb.ja(w),k=(O=this.hb[k]).IA,!(3&(R=this.to.read(k)))){if(C!=O.XF())return this.ke=new u.Md(6,k,-1),!1;if(R=252&R|(N=C==0||O.Wp()?2:1),this.to.write(k,N),N==2&&this.ke.Jj==0&&this.JA.read(k)!=p&&(this.ke=new u.Md(7,k,-1),this.ql))return!1;if(this.dt--,this.dt==0)return!0}(3&R)==1&&(p=k),R=w,w=this.fb.lb(w),C=C!=0?0:1}while(R!=S)}return this.Om!=null?this.Om.clear(!1):this.Om=new u.ia(0),!0},d.prototype.Su=function(p,g,y,w){if(p.getType()!=322)throw u.i.Qa();return(p=this.sP(p)).Io=g,p.IA=y,p.yq=0,p.nX(w),p},d.prototype.sP=function(p){if(0<this.po.length){var g=this.po[this.po.length-1];--this.po.length,p.copyTo(g.ne)}else(g=new A).ne=u.SC.jg(p);return g},d.prototype.vB=function(p){p.ne.getType()==322&&this.po.push(p)},d.prototype.kU=function(){for(var p=this.X.I(),g=new u.ia(0),y=0;y<p;y++)g.add(y);var w=this;for(g.Vd(0,p,function(S,k){return w.Ou(S,k)}),y=1;y<p;y++)if(this.Ou(g.get(y-1),g.get(y))==0)return this.ke=new u.Md(3,g.get(y-1),g.get(y)),0;return 2},d.prototype.JV=function(){return this.GE()&&this.DE(!0)?2:0},d.prototype.oV=function(){return this.eT()},d.prototype.pU=function(){for(var p=this.X.I(),g=new u.ia(0),y=0;y<p;y++)g.add(y);var w=this;g.Vd(0,p,function(R,N){return w.PO(R,N)});var S=Array(p);for(u.O.$u(S,!1),S[g.get(0)]=!0,y=1;y<p;y++){var k=g.get(y-1),C=g.get(y);this.Ou(k,C)==0?S[C]=!1:S[C]=!0}g=this.X.Ia(),k=this.X,C=0;var O=1;for(y=0;y<p;y++)S[y]?O=y+1:(C<O&&g.Fd(k,C,O),C=y+1);return C<O&&g.Fd(k,C,O),g.Ch(2,this.Bo),g},d.prototype.NV=function(){var p=this.X,g=p.Ga(),y=p.Ga(),w=this.X.Ia(),S=this.X,k=p.hasAttribute(1),C=k?u.ta.wE(this.Qg,p,!0):0,O=new u.ia(0),R=new u.ia(0);for(O.Jb(u.O.truncate(p.I()/2+1)),R.Jb(u.O.truncate(p.I()/2+1));g.$a();)if(y.$a(),!(2>p.Ja(g.gb))){y.EW();for(var N,j,G=!0;g.Ha();){var D=g.ha(),V=y.li();if(g.wb()>y.wb())break;G&&(O.add(g.wb()),R.add(y.ik()),G=!1),j=O.Fc();var Z=g.ik();if(1<Z-j){var q=new u.h;q.uc(p.Na(j),p.Na(Z)),N=q.length()}else N=D.Qb();j=R.Fc(),1<(Z=y.wb())-j?((q=new u.h).uc(p.Na(j),p.Na(Z)),j=q.length()):j=V.Qb(),N>this.Bo?O.add(g.ik()):k&&(N=p.Uc(1,O.Fc(),0),D=D.gv(1,0),Math.abs(D-N)>C&&O.add(g.ik())),j>this.Bo?R.add(y.wb()):k&&(N=p.Uc(1,R.Fc(),0),D=V.gv(1,0),Math.abs(D-N)>C&&R.add(y.wb()))}if(O.Fc()<R.Fc()?O.size>R.size?O.If():R.If():(O.Fc()!=R.Fc()&&R.If(),R.If()),2<=R.size+O.size){for(G=new u.Sa,V=0,D=O.size;V<D;V++)S.ve(O.get(V),G),V==0?w.nf(G):w.lineTo(G);for(V=R.size-1;0<V;V--)S.ve(R.get(V),G),w.lineTo(G);S.dc(g.gb)?w.Ap():0<R.size&&(S.ve(R.get(0),G),w.lineTo(G))}O!=null&&O.clear(!1),R!=null&&R.clear(!1)}return w.Ch(2,this.Bo),w},d.prototype.rV=function(){return this.DX()},d.prototype.DX=function(){return this.X.getType()==1736&&this.X.In()==1?u.Fg.Mk(this.X,this.Bo,!0,!1,this.nd):(this.Hi=new u.gd,this.Hi.Ib(this.X),this.Hi.fd!=0&&(this.xA!=1&&u.Tk.V(this.Hi,this.Bo,this.nd,!0),this.X.getType()==1736&&u.rn.V(this.Hi,this.Hi.ld,this.xA,!1,this.nd)),this.X=this.Hi.Ne(this.Hi.ld),this.X.getType()==1736&&(this.X.fm(),this.X.Yo(0)),this.X.Ch(2,this.Bo),this.X)},d.rs=function(p,g,y,w,S){if(w!=null&&(w.Jj=0,w.Jo=-1,w.Ko=-1),p.B())return 1;var k=p.getType();if(k==33)return 1;var C=u.ta.kj(g,p,!1);if(k==197)return g=new u.l,p.A(g),g.Bi(C)?(w!=null&&(w.Jj=2,w.Jo=-1,w.Ko=-1),0):1;if(u.aa.yd(k))return(C=new u.Ta(p.description)).oc(p,!0),d.rs(C,g,y,w,S);var O=p.om(C);if((y=y?-1:O)!=-1)return y;if(g=new d(p,g,y,S,!1),k==550)y=g.kU();else if(k==1607)y=g.JV();else{if(k!=1736)throw u.i.Qa();y=g.oV()}return p.Ch(y,C),w!=null&&y==0&&w.Wt(g.ke),y},d.cK=function(p,g,y,w){if(p.B())return p;var S=p.getType();if(S==33)return p;var k=u.ta.kj(g,p,!1);if(S==197)return g=new u.l,p.A(g),g.Bi(k)?p.Ia():p;if(u.aa.yd(S))return(S=new u.Ta(p.description)).oc(p,!0),d.cK(S,g,y,w);if(k=p.om(k),(y=y?-1:k)==2)return p;if(p=new d(p,g,y,w,!1),S==550)p=p.pU();else if(S==1607)p=p.NV();else{if(S!=1736)throw u.i.Qa();p=p.rV()}return p},d.prototype.Mh=function(p,g,y){if(p==g)return 0;p=this.gi.get(p);var w=this.gi.get(g);g=p>>1;var S=w>>1,k=new u.h,C=new u.h;return this.lf.tc(2*g,k),k.y+=1&p?this.Oj:-this.Oj,this.lf.tc(2*S,C),C.y+=1&w?this.Oj:-this.Oj,(p=k.compare(C))==0&&y?0>(y=this.Fl.get(g)-this.Fl.get(S))?-1:0<y?1:0:p},d.prototype.Ou=function(p,g){if(p==g)return 0;var y=this.X,w=y.Na(p),S=y.Na(g);if(w.x<S.x)return-1;if(w.x>S.x)return 1;if(w.y<S.y)return-1;if(w.y>S.y)return 1;for(w=1;w<this.oT;w++){S=this.nH.kd(w);for(var k=u.ra.Va(S),C=0;C<k;C++){var O=y.Uc(S,p,C),R=y.Uc(S,g,C);if(O<R)return-1;if(O>R)return 1}}return 0},d.prototype.PO=function(p,g){var y=this.Ou(p,g);return y==0?p<g?-1:1:y},d.prototype.XP=function(p,g){if(p===g)return 0;var y=p.ne.kg();p.Wp()&&y.Sq(),p=g.ne.kg(),g.Wp()&&p.Sq(),g=y.qu();var w=p.qu();return w==g?(g=y.wi(p),Math.abs(g)<=8881784197001252e-31*(Math.abs(p.x*y.y)+Math.abs(p.y*y.x))&&(g--,g++),0>g?1:0<g?-1:0):g<w?-1:1},d}();u.Jx=l}(B||(B={})),function(u){var A=function(b){function c(){return b!==null&&b.apply(this,arguments)||this}return Qe(c,b),c.prototype.getType=function(){return 30},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.V=function(a,r,o,l){return a instanceof u.aa?(a=new u.Zc(a),r=new u.Zc(r),this.V(a,r,o,l).next()):new u.BL(a,r,o,l)},c.ep=function(a,r,o,l){var d=a.Db(),p=r.Db();if(a.B()&&r.B())return d>p?a:r;if(a.B())return r;if(r.B())return a;var g=new u.l,y=new u.l,w=new u.l;return a.A(g),r.A(y),w.K(g),w.Zb(y),g=u.ta.Wd(o,w,!0),y=a.getType(),w=r.getType(),y==33&&w==33?c.aV(a,r,g):y!=w?0<d||0<p?d>p?a:r:y==550?c.iI(a,r,g):c.iI(r,a,g):u.Fg.ep(a,r,o,l)},c.aV=function(a,r,o){o=o*Math.sqrt(2)*1.00001,o*=o;var l=a.D(),d=r.D(),p=new u.de(a.description);return u.h.yc(l,d)>o&&(p.add(a),p.add(r)),p},c.iI=function(a,r,o){var l=a.ub(0),d=a.I(),p=r.D(),g=a.Ia();o=o*Math.sqrt(2)*1.00001;var y=new u.l;if(a.A(y),y.W(o,o),y.contains(p)){o*=o,y=!1;for(var w=[],S=0;S<d;S++)w[S]=!1;for(S=0;S<d;S++){var k=l.read(2*S),C=l.read(2*S+1);(k-=p.x)*k+(C-=p.y)*C<=o&&(y=!0,w[S]=!0)}if(y)for(S=0;S<d;S++)w[S]||g.Fd(a,S,S+1);else g.Fd(a,0,d),g.add(r)}else g.Fd(a,0,d),g.add(r);return g},c.instance=null,c}(u.Je);u.Kx=A}(B||(B={})),function(u){var A=function(){function b(c,a,r,o){this.ts=a==null,this.ya=-1,this.Rd=c,this.vg=r,this.NT=a.next(),this.Ub=o}return b.prototype.next=function(){return this.ts?null:(c=this.Rd.next())!=null?(this.ya=this.Rd.La(),u.Kx.ep(c,this.NT,this.vg,this.Ub)):null;var c},b.prototype.La=function(){return this.ya},b.prototype.qe=function(){},b}();u.BL=A}(B||(B={})),function(u){var A=function(){function a(){}return a.prototype.Fz=function(){this.$y=null,this.Ax=-1,this.AK=!1},a}(),b=function(){function a(){this.Gr=0,this.pj=[]}return a.prototype.pN=function(r){this.Gr+=r.Ax,this.pj.push(r)},a.prototype.TV=function(){this.Gr-=this.pj[this.pj.length-1].Ax,--this.pj.length},a.prototype.my=function(){return this.pj[this.pj.length-1]},a.prototype.Nb=function(r){return r===this},a}(),c=function(){function a(r,o,l){this.ya=-1,this.Ic=!1,this.AH=[!1,!1,!1,!1],this.uq=[0,0,0,0],this.jA=!1,this.zk=-1,this.iq=0,this.bo=-1,this.Do=[],this.Rd=r,this.vg=o,this.Ub=l}return a.dE=function(r){var o=[],l=0;for(r=Object.keys(r);l<r.length;l++)o.push(Number(r[l]));return o.sort(function(d,p){return d-p}),o},a.prototype.fG=function(r){var o=this.Do[r],l=a.dE(o)[0],d=o[l],p=d.my().$y;return d=d.my().AK,delete o[l],d&&(p=u.Yl.local().V(p,this.vg,!1,this.Ub),r==0&&p.getType()==33&&(r=new u.de(p.description),p.B()||r.add(p),p=r)),p},a.prototype.next=function(){if(this.Ic&&this.bo==this.zk)return null;for(;!this.qK(););if(this.zk==-1)return null;if(this.jA){for(this.bo++;;){if(this.bo>this.zk||0>this.bo)throw u.i.Qa();if(this.AH[this.bo])break}return this.ya++,this.fG(this.bo)}return this.ya=0,this.bo=this.zk,this.fG(this.zk)},a.prototype.La=function(){return this.ya},a.prototype.qK=function(){if(this.Ic)return!0;var r=null;if(this.Rd!=null&&(r=this.Rd.next())==null&&(this.Ic=!0,this.Rd=null),u.mp.zp(this.Ub),r!=null){var o=r.Db();this.AH[o]=!0,o>=this.zk&&!this.jA&&(this.ND(o,!1,r),o>this.zk&&!this.jA&&this.zW(o))}if(0<this.iq)for(o=0;o<=this.zk;o++)for(;1<this.uq[o]&&(r=this.FO(o)).length!=0;)r=u.Fg.VP(r,this.vg,this.Ub),this.ND(o,!0,r);return this.Ic},a.prototype.FO=function(r){for(var o=[],l=[],d=this.Do[r],p=a.dE(d),g=0;g<p.length;g++){var y=p[g],w=d[y];if(this.Ic||1e4<w.Gr&&1<w.pj.length){for(this.uq[r]-=w.pj.length,this.iq-=w.pj.length;0<w.pj.length;)o.push(w.my().$y),w.TV();l.push(y)}}for(g=0;g<l.length;g++)delete d[l[g]];return o},a.prototype.zW=function(r){for(var o=0;o<r;o++)this.Do[o]=[],this.iq-=this.uq[o],this.uq[o]=0},a.prototype.ND=function(r,o,l){var d=new A;if(d.Fz(),d.$y=l,l=a.eS(l),d.Ax=l,l=a.cS(l),r+1>this.Do.length)for(var p=0,g=Math.max(2,r+1);p<g;p++)this.Do.push([]);(p=this.Do[r][l])===void 0&&(p=new b,this.Do[r][l]=p),d.AK=o,p.pN(d),this.uq[r]++,this.iq++,this.zk=Math.max(this.zk,r)},a.cS=function(r){return 0<r?u.O.truncate(Math.log(r)/Math.log(4)+.5):0},a.eS=function(r){var o=r.getType();if(u.aa.xj(o))return r.I();if(o==33)return 1;if(o==197)return 4;if(u.aa.yd(o))return 2;throw u.i.Qa()},a.prototype.qe=function(){this.qK()},a}();u.DL=c}(B||(B={})),function(u){var A=function(b){function c(){return b!==null&&b.apply(this,arguments)||this}return Qe(c,b),c.prototype.getType=function(){return 1},c.prototype.V=function(a,r,o,l){return l===void 0?new u.DL(a,r,o):this.gQ(a,r,o,l)},c.prototype.gQ=function(a,r,o,l){return a=new u.Zc([a,r]),this.V(a,o,l).next()},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.instance=null,c}(u.Je);u.Gh=A}(B||(B={})),function(u){var A,b;(b=A||(A={}))[b.nextPath=0]="nextPath",b[b.nextSegment=1]="nextSegment",b[b.iterate=2]="iterate",A=function(){function c(a,r,o,l){this.Ts=new u.l,this.GT=a,this.HT=r,this.mq=l,this.uo=-1,this.rl=!1;var d=a.Bb;d!=null&&(d=l?d.zo:d.Fb)!=null&&(this.Ic=!1,this.qa=o,this.Fb=d,this.xw=this.Fb.getIterator(),this.nq=this.rl=!0,this.Xb=0,l?this.uo=r.da():this.sd=r.Ga()),this.rl||(d=r.Bb)!=null&&(d=l?d.zo:d.Fb)!=null&&(this.Ic=!1,this.qa=o,this.Fb=d,this.xw=this.Fb.getIterator(),this.rl=!0,this.nq=!1,this.Xb=0,l?this.uo=a.da():this.sd=a.Ga()),this.rl||(this.ci=l?u.ta.mR(a,r,o,1<=a.om(0),1<=r.om(0)):u.ta.lR(a,r,o))}return c.prototype.next=function(){if(this.rl){if(this.Ic)return!1;for(var a=!0;a;)switch(this.Xb){case 0:a=this.xU();break;case 1:a=this.yU();break;case 2:a=this.Uz();break;default:throw u.i.fa("internal error")}return!this.Ic}return this.ci!=null&&this.ci.next()},c.prototype.nl=function(){return this.rl?this.nq?this.Fb.ja(this.Fs):this.mq?this.uo:this.sd.wb():this.ci.nl(this.ci.Vf)},c.prototype.hl=function(){return this.rl?this.nq?this.mq?this.uo:this.sd.wb():this.Fb.ja(this.Fs):this.ci.hl(this.ci.Af)},c.prototype.uz=function(){if(!this.mq)throw u.i.fa("internal error");return this.rl?this.nq?this.Fb.GF(this.Fs):this.Ts:this.ci.uz(this.ci.Vf)},c.prototype.az=function(){if(!this.mq)throw u.i.fa("internal error");return this.rl?this.nq?this.Ts:this.Fb.GF(this.Fs):this.ci.az(this.ci.Af)},c.prototype.xU=function(){return this.mq?--this.uo==-1?(this.Ic=!0,!1):(this.nq?this.HT.Rj(this.uo,this.Ts):this.GT.Rj(this.uo,this.Ts),this.xw.Xi(this.Ts,this.qa),this.Xb=2,!0):this.sd.$a()?(this.Xb=1,!0):(this.Ic=!0,!1)},c.prototype.yU=function(){if(!this.sd.Ha())return this.Xb=0,!0;var a=this.sd.ha();return this.xw.Uo(a,this.qa),this.Xb=2,!0},c.prototype.Uz=function(){return this.Fs=this.xw.next(),this.Fs==-1&&(this.Xb=this.mq?0:1,!0)},c}(),u.Zl=A}(B||(B={})),function(u){(u=u.OL||(u.OL={}))[u.enumClosed=1]="enumClosed",u[u.enumHasNonlinearSegments=2]="enumHasNonlinearSegments",u[u.enumOGCStartPolygon=4]="enumOGCStartPolygon",u[u.enumCalcMask=4]="enumCalcMask"}(B||(B={})),function(u){u.QC=function(){function A(){}return A.tb=function(b,c,a,r,o,l,d,p,g){var y=[0,0,0],w=[0,0,0],S=[0,0,0],k=[0,0,0,0],C=new u.ga(0),O=new u.ga(0),R=new u.ga(0);if(d!=null||p!=null||g!=null)if(u.s.ti(c))u.Yg.tb(b,a,r,o,l,d,p,g);else{o=u.F.ba(o),a=u.F.ba(a);var N=u.F.ba(o-a);if(u.s.Y(r,l)&&(u.s.Y(a,o)||u.s.Y(u.s.P(r),1.570796326794897)))d!=null&&(d.u=0),p!=null&&(p.u=0),g!=null&&(g.u=0);else{if(u.s.Y(r,-l)){if(u.s.Y(u.s.P(r),1.570796326794897))return d!=null&&(d.u=2*u.F.Ah(b,c)),p!=null&&(p.u=0<r?u.F.ba(3.141592653589793-u.F.ba(o)):u.F.ba(o)),void(g!=null&&(g.u=0<r?u.F.ba(o):u.F.ba(3.141592653589793-u.F.ba(o))));u.s.Y(u.s.P(N),3.141592653589793)&&(d!=null&&(d.u=2*u.F.Ah(b,c)),p!=null&&(p.u=0),g!=null&&(g.u=0))}else if(u.s.Y(u.s.P(r),1.570796326794897)||u.s.Y(u.s.P(l),1.570796326794897)||u.s.Y(a,o)||u.s.Y(u.s.P(N),3.141592653589793)||u.s.Cd(r))return void u.Wk.tb(b,c,a,r,o,l,d,p,g);var j=Math.sqrt(1-c);o=u.F.ba(o-a),a=0,u.F.cl(1,c,r,a,0,C,O,R),y[0]=C.u,y[1]=O.u,y[2]=R.u,u.F.cl(1,c,l,o,0,C,O,R),w[0]=C.u,w[1]=O.u,w[2]=R.u,S[0]=0,S[1]=0,S[2]=-1*c*u.F.n(1,c,r)*Math.sin(r),0>o?u.F.Wq(S,w,y,k,0):u.F.Wq(S,y,w,k,0),O=[0,0,0],R=[0,0,0];var G=[0,0,0];y=[0,0,0],C=[0,0,0];var D=Math.acos(k[2]/1),V=1-c,Z=Math.tan(D),q=1+Z*Z/V,ne=2*S[2]*Z/V;for(V=(-ne+(Z=Math.sqrt(ne*ne-4*q*(S[2]*S[2]/V-1))))/(q*=2),ne=(-ne-Z)/q,Z=Math.tan(D),D=(V+ne)/2,S=((q=Z*V+S[2])+(Z*ne+S[2]))/2,Z=u.F.gp(V-D,q-S),V=S/j*1.570796326794897,ne=0;100>ne&&(q=(q=u.F.w(c,V))*q/Math.cos(V)*(Math.sin(V)-S*q/(1-c)),!u.s.Cd(q));ne++)V-=q;S=u.F.n(1,c,V)*Math.cos(V),Z=1-Z/(S=Math.sqrt((S-D)*(S+D))),Z*=2-Z,q=u.F.on(O),D=u.F.on(R),V=u.F.on(G);var ee=u.F.St(G,O);ne=u.F.St(G,R),u.F.zx(G,O,y),u.F.zx(G,R,C),O=Math.acos(ee/(V*q)),R=Math.acos(ne/(V*D)),R*=u.s.Mb(1,u.F.St(y,C)),(1.570796326794897<=u.s.P(O)&&1.570796326794897<=u.s.P(R)||3.141592653589793<u.s.P(O-R))&&(O=(3.141592653589793-u.s.P(O))*u.s.Mb(1,O),R=(3.141592653589793-u.s.P(R))*u.s.Mb(1,R)),y=u.F.Qj(Z,R),C=u.F.q(S,Z,u.F.Qj(Z,O)),y=u.F.q(S,Z,y),y=u.s.P(y-C)*b,O=new u.ga(0),R=new u.ga(0),G=k[1]/1,G*=-u.s.Mb(1,N),C=Math.acos(G)*u.s.Mb(1,N),A.rf(b,c,a,r,y,C,O,R),u.s.Y(o,O.u)&&u.s.Y(l,R.u)||(Z=u.F.gp(u.F.ba(o-O.u),l-R.u),A.rf(b,c,a,r,y,u.F.ba(C+3.141592653589793),O,R),(q=u.F.gp(u.F.ba(o-O.u),l-R.u))<Z&&(C=u.F.ba(C+3.141592653589793))),O=[0,0,0,0],R=[0,0,0,0],Z=[0,0,0],b=[0,0,0],a=[0,0,0],r=[0,0,0],G=[0,0,0],(S=[0,0,0])[0]=0,S[1]=0,S[2]=j,Z[0]=0,Z[1]=0,Z[2]=0,u.F.Wq(Z,S,w,O,0),u.s.Cd(l)?(b[0]=w[0],b[1]=w[1],b[2]=1,a[0]=1*Math.cos(o)-1*Math.sin(o),a[1]=1*Math.sin(o)+1*Math.cos(o)):(c=u.F.n(1,c,l)*Math.cos(l),b[0]=0,b[1]=0,w[2]+=Math.tan(1.570796326794897-u.s.P(l))*c*u.s.Mb(1,l),a[0]=c*Math.cos(o)-c*Math.sin(o),a[1]=c*Math.sin(o)+c*Math.cos(o)),a[2]=w[2],u.F.Wq(w,a,b,R,1),u.F.zx(R,O,r),u.F.zx(R,k,G),G=u.F.St(r,G)/(u.F.on(r)*u.F.on(G)),G*=u.s.Mb(1,N),o=Math.acos(G)*-u.s.Mb(1,N),(0<C&&0<o||0>C&&0>o)&&(o=u.F.ba(o+3.141592653589793)),d!=null&&(d.u=y),p!=null&&(p.u=C),g!=null&&(g.u=o)}}},A.rf=function(b,c,a,r,o,l,d,p){var g=[0,0,0],y=[0,0,0],w=[0,0,0],S=[0,0,0],k=[0,0,0],C=[0,0,0],O=[0,0,0],R=[0,0,0,0],N=new u.ga(0),j=new u.ga(0),G=new u.ga(0),D=new u.ga(0),V=new u.ga(0),Z=new u.ga(0);if(d!=null&&p!=null)if(u.s.ti(c))u.Yg.rf(b,a,r,o,l,d,p);else if(u.s.Cd(o))d!=null&&(d.u=a),p!=null&&(p.u=r);else if(l=u.F.ba(l),0>o&&(o=u.s.P(o),l=u.F.ba(l+3.141592653589793)),a=u.F.ba(a),r=u.F.ba(r),1.570796326794897<u.s.P(r)&&(a=u.F.ba(a+3.141592653589793),r=u.s.Mb(3.141592653589793,r)-r),u.s.Y(u.s.P(r),1.570796326794897)||u.s.Cd(r)||u.s.Cd(l)||u.s.Y(u.s.P(l),3.141592653589793))u.Wk.rf(b,c,a,r,o,l,d,p);else{var q=Math.sqrt(1-c);for(b=o/b,u.F.cl(1,c,r,0,0,D,V,Z),g[0]=D.u,g[1]=V.u,g[2]=V.u,O[0]=0,O[1]=0,O[2]=-1*c*u.F.n(1,c,r)*Math.sin(r),D=u.F.n(1,c,r),V=u.F.ba(1.570796326794897-l),Z=Math.sin(V),o=Math.cos(r),r=Math.sin(r),k[0]=D*o-r*Z,k[1]=Math.cos(V),k[2]=(1-c)*D*r+o*Z,0>l?u.F.Wq(O,k,g,R,0):u.F.Wq(O,g,k,R,0),g=Math.acos(R[2]/1),R=Math.atan2(-R[1],-R[0]),r=1-c,V=1+(k=Math.tan(g))*k/r,r=(-(D=2*O[2]*k/r)+(k=Math.sqrt(D*D-4*V*(O[2]*O[2]/r-1))))/(V*=2),D=(-D-k)/V,k=Math.tan(g),g=(r+D)/2,O=((V=k*r+O[2])+(k*D+O[2]))/2,k=u.F.gp(r-g,V-O),q=O/q*1.570796326794897,r=0;100>r&&(D=(D=u.F.w(c,q))*D/Math.cos(q)*(Math.sin(q)-O*D/(1-c)),!u.s.Cd(D));r++)q-=D;q=u.F.n(1,c,q)*Math.cos(q),O=1-k/(q=Math.sqrt((q-g)*(q+g))),O*=2-O,C=Math.acos(u.F.St(C,y)/(u.F.on(C)*u.F.on(y))),C*=u.s.Mb(1,y[0]),l=(u.F.q(q,O,u.F.Qj(O,C))+b*u.s.Mb(1,l))/u.F.Ah(q,O),l=u.F.ba(1.570796326794897*l),l=u.F.Rq(O,l),u.F.n(q,O,l),k=u.F.ba(R+a),a=Math.cos(k),l=Math.sin(k),w[0]=S[0]*a+S[1]*-l,w[1]=S[0]*l+S[1]*a,w[2]=S[2],u.F.jO(c,w[0],w[1],w[2],G,j,N),d!=null&&(d.u=j.u),p!=null&&(p.u=G.u)}},A}()}(B||(B={})),function(u){var A=function(){function o(l){this.Ya=null,this.wt=new u.h,this.xt=new u.h,this.g=l}return o.prototype.compare=function(l,d,p){return this.g.Gc(d,this.wt),this.g.Gc(l.ja(p),this.xt),this.wt.compare(this.xt)},o}(),b=function(){function o(l){this.Bf=new u.h,this.Dk=new u.h,this.g=l}return o.prototype.Dh=function(l){this.Bf.L(l)},o.prototype.compare=function(l,d){return this.g.Gc(l.ja(d),this.Dk),this.Bf.compare(this.Dk)},o}(),c=function(o){function l(d){var p=o.call(this,d.g,d.qa,!1)||this;return p.ib=d,p}return Qe(l,o),l.prototype.compare=function(d,p,g){if(this.rg)return-1;var y=this.ib.Qd.Jn(this.ib.Rh(p));d=d.ja(g);var w=this.ib.Qd.Jn(this.ib.Rh(d));return this.Dm=g,this.RE(p,y,d,w)},l}(u.UC),a=function(o){function l(d){var p=o.call(this,d.g,d.qa)||this;return p.ib=d,p}return Qe(l,o),l.prototype.compare=function(d,p){return this.rg?-1:(d=this.ib.Qd.Jn(this.ib.Rh(d.ja(p))),this.Dm=p,this.SE(p,d))},l}(u.aM),r=function(){function o(){this.Mc=this.df=this.jo=this.Qd=this.lh=this.zd=this.hb=this.g=null,this.Ng=!1,this.vh=this.Nm=this.ie=this.Gk=this.nh=this.Ak=this.Ff=this.$d=null,this.xh=this.Jq=this.UA=this.qa=0,this.Xv=this.Wn=!1,this.yo=new u.h,this.Pi=new u.h,this.hb=new u.$c(8),this.zd=new u.$c(5),this.lh=new u.au,this.Qd=new u.au,this.Ng=!1,this.vh=new u.h,this.vh.ma(0,0),this.qa=0,this.xh=-1,this.Wn=!1,this.g=null,this.df=new u.Yj,this.Mc=new u.Yj,this.nh=new u.ia(0),this.Gk=new u.TC,this.Ff=new u.ia(0),this.Ak=new u.ia(0),this.jo=new u.Sa}return o.prototype.PX=function(l,d){var p=new u.Dd;return p.$B(),l.Oc(p),this.er(l),this.Wn=!1,this.qa=d,this.UA=d*d,d=this.jC(),l.Oc(p),d||(this.qQ(),d||this.jC()),this.xh!=-1&&(this.g.Td(this.xh),this.xh=-1),this.g=null,this.Wn},o.prototype.TX=function(l,d){this.er(l),this.Wn=!1,this.qa=d,this.UA=d*d,this.Ng=!1,this.jC(),this.Ng||(this.Ng=l.Gp(d,!0,!1)==1),this.xh!=-1&&(this.g.Td(this.xh),this.xh=-1),this.g=null},o.prototype.pg=function(l,d){return this.hb.T(l,0+d)},o.prototype.LB=function(l,d,p){this.hb.S(l,0+d,p)},o.prototype.Rh=function(l){return this.hb.T(l,2)},o.prototype.ZW=function(l,d){this.hb.S(l,2,d)},o.prototype.RF=function(l,d){return this.hb.T(l,3+d)},o.prototype.Pp=function(l){return this.hb.T(l,7)},o.prototype.Pl=function(l,d){this.hb.S(l,7,d)},o.prototype.Rp=function(l,d){return this.hb.T(l,3+this.Op(l,d))},o.prototype.fr=function(l,d,p){this.hb.S(l,3+this.Op(l,d),p)},o.prototype.NR=function(l,d){return this.hb.T(l,5+this.Op(l,d))},o.prototype.hr=function(l,d,p){this.hb.S(l,5+this.Op(l,d),p)},o.prototype.Sr=function(l){return this.zd.T(l,0)},o.prototype.UW=function(l,d){this.zd.S(l,0,d)},o.prototype.ez=function(l){return this.zd.T(l,4)},o.prototype.cr=function(l,d){this.zd.S(l,4,d)},o.prototype.il=function(l){return this.zd.T(l,1)},o.prototype.ln=function(l,d){this.zd.S(l,1,d)},o.prototype.dz=function(l){return this.zd.T(l,3)},o.prototype.Et=function(l,d){this.zd.S(l,3,d)},o.prototype.Ym=function(l){var d=this.zd.Ce(),p=this.lh.Ph();return this.UW(d,p),l!=-1?(this.lh.addElement(p,l),this.g.Ra(l,this.xh,d),this.cr(d,this.g.Ua(l))):this.cr(d,-1),d},o.prototype.HP=function(l){this.zd.jd(l)},o.prototype.LD=function(l,d){this.lh.addElement(this.Sr(l),d),this.g.Ra(d,this.xh,l)},o.prototype.nt=function(l){var d=this.hb.Ce(),p=this.Qd.Ph();return this.ZW(d,p),l!=-1&&this.Qd.addElement(p,l),d},o.prototype.MD=function(l,d){this.Qd.addElement(this.Rh(l),d)},o.prototype.Uu=function(l){this.hb.jd(l),0<=(l=this.nh.lF(l))&&this.nh.SV(l)},o.prototype.hj=function(l,d){if(this.pg(l,0)==-1)this.LB(l,0,d);else{if(this.pg(l,1)!=-1)throw u.i.Qa();this.LB(l,1,d)}this.ky(l,d)},o.prototype.ky=function(l,d){var p=this.il(d);if(p!=-1){var g=this.Rp(p,d);this.hr(g,d,l),this.fr(l,d,g),this.fr(p,d,l),this.hr(l,d,p)}else this.hr(l,d,l),this.fr(l,d,l),this.ln(d,l)},o.prototype.Op=function(l,d){return this.pg(l,0)==d?0:1},o.prototype.Xm=function(l,d){var p,g=this.dz(d);if(g!=-1&&(this.df.vd(g,-1),this.Et(d,-1)),(g=this.il(d))!=-1){var y=p=g;do{var w=!1,S=this.Op(p,d),k=this.RF(p,S);if(this.pg(p,S+1&1)==l){if(this.Xu(p),this.Qd.bh(this.Rh(p)),this.Uu(p),p==k){g=-1;break}g==p&&(g=this.il(d),y=k,w=!0)}p=k}while(p!=y||w);if(g!=-1){do S=this.Op(p,d),k=this.RF(p,S),this.LB(p,S,l),p=k;while(p!=y);(p=this.il(l))!=-1?(y=this.Rp(p,l),w=this.Rp(g,l),y==p?(this.ln(l,g),this.ky(p,l),this.ln(l,p)):w==g&&this.ky(g,l),this.fr(g,l,y),this.hr(y,l,g),this.fr(p,l,w),this.hr(w,l,p)):this.ln(l,g)}}for(g=this.Sr(l),p=this.Sr(d),y=this.lh.rc(p);y!=-1;y=this.lh.lb(y))this.g.Ra(this.lh.ja(y),this.xh,l);this.lh.Hy(g,p),this.HP(d)},o.prototype.UT=function(l,d){var p=this.pg(l,0),g=this.pg(l,1),y=this.pg(d,0),w=this.pg(d,1);this.Qd.Hy(this.Rh(l),this.Rh(d)),d==this.il(p)&&this.ln(p,l),d==this.il(g)&&this.ln(g,l),this.Xu(d),this.Uu(d),p==y&&g==w||g==y&&p==w||(this.Hn(p,this.yo),this.Hn(y,this.Pi),this.yo.qb(this.Pi)?(p!=y&&this.Xm(p,y),g!=w&&this.Xm(g,w)):(g!=y&&this.Xm(g,y),p!=w&&this.Xm(p,w)))},o.prototype.Xu=function(l){var d=this.pg(l,1);this.dF(l,this.pg(l,0)),this.dF(l,d)},o.prototype.dF=function(l,d){var p=this.Rp(l,d),g=this.NR(l,d),y=this.il(d);p!=l?(this.fr(g,d,p),this.hr(p,d,g),y==l&&this.ln(d,p)):this.ln(d,-1)},o.prototype.WD=function(l,d,p){var g=this.Qd.rc(l),y=this.Qd.ja(g);l=this.Le(y);var w=this.Le(this.g.U(y));for(this.g.jr(y,d,p,!0),g=this.Qd.lb(g);g!=-1;g=this.Qd.lb(g)){y=this.Qd.ja(g);var S=this.Le(y)==l;this.g.jr(y,d,p,S)}g=d.Vp(p,0).ac(),d=d.Vp(p,d.ol(p)-1).wc(),this.BK(l,g),this.BK(w,d)},o.prototype.ZE=function(l,d,p){var g=this.Rh(l),y=this.pg(l,0),w=this.pg(l,1),S=this.nt(-1);for(this.nh.add(S),this.Pl(S,-3),this.Ff.add(S),this.hj(S,y),l=1,d=d.ol(p);l<d;l++)p=this.Ym(-1),this.Ak.add(p),this.Ff.add(p),this.hj(S,p),S=this.nt(-1),this.nh.add(S),this.Pl(S,-3),this.Ff.add(S),this.hj(S,p);for(this.hj(S,w),g=this.Qd.rc(g);g!=-1;g=this.Qd.lb(g))if(w=this.Qd.ja(g),this.Le(w)==y){l=0;do 0<l&&(S=this.Ff.get(l-1),this.LD(S,w),this.ez(S)==-1&&this.cr(S,this.g.Ua(w))),S=this.Ff.get(l),l+=2,this.MD(S,w),w=this.g.U(w);while(l<this.Ff.size)}else{l=this.Ff.size-1;do l<this.Ff.size-2&&(S=this.Ff.get(l+1),this.LD(S,w),0>this.ez(S)&&this.cr(S,this.g.Ua(w))),S=this.Ff.get(l),l-=2,this.MD(S,w),w=this.g.U(w);while(0<=l)}this.Ff.clear(!1)},o.prototype.Le=function(l){return this.g.Pa(l,this.xh)},o.prototype.TI=function(l,d,p){var g=this.pg(d,0),y=new u.h;this.Hn(g,y);var w=new u.h,S=this.pg(d,1);this.Hn(S,w);var k=p.ol(l),C=p.Vp(l,0),O=new u.h;if(C.Yp(O),!y.qb(O)){if(!this.Ng){var R=y.compare(this.vh);0>R*(O=O.compare(this.vh))&&(this.Ng=!0)}this.vF(g,this.Ff),this.Ak.add(g)}for(!this.Ng&&1<k&&(R=y.compare(w),C=C.wc(),(y.compare(C)!=R||C.compare(w)!=R||0>C.compare(this.vh))&&(this.Ng=!0)),l=(C=p.Vp(l,k-1)).wc(),w.qb(l)||(this.Ng||0>(R=w.compare(this.vh))*(O=l.compare(this.vh))&&(this.Ng=!0),this.vF(S,this.Ff),this.Ak.add(S)),this.Ff.add(d),w=0,S=this.Ff.size;w<S;w++)l=this.Ff.get(w),p=this.Pp(l),u.$c.LG(p)&&(this.Mc.vd(p,-1),this.Pl(l,-1)),l!=d&&this.Pp(l)!=-3&&(this.nh.add(l),this.Pl(l,-3));this.Ff.clear(!1)},o.prototype.lO=function(l,d){this.$d.compare(this.Mc,this.Mc.ja(l),d),this.$d.rg&&(this.$d.Kr(),this.oF(l,d))},o.prototype.oF=function(l,d){this.Wn=!0,l=this.Mc.ja(l),d=this.Mc.ja(d);var p=this.Qd.Jn(this.Rh(l)),g=this.Qd.Jn(this.Rh(d)),y=this.g.bc(p);y==null&&(this.ie==null&&(this.ie=new u.yb),this.g.ed(p,this.ie),y=this.ie),(p=this.g.bc(g))==null&&(this.Nm==null&&(this.Nm=new u.yb),this.g.ed(g,this.Nm),p=this.Nm),this.Gk.Oo(y),this.Gk.Oo(p),this.Gk.Ea(this.qa,!0)&&(this.Ng=!0),this.hK(l,d,-1,this.Gk),this.Gk.clear()},o.prototype.GQ=function(l,d){this.Wn=!0,d=this.Mc.ja(d);var p=this.Qd.Jn(this.Rh(d)),g=this.g.bc(p);g==null&&(this.ie==null&&(this.ie=new u.yb),this.g.ed(p,this.ie),g=this.ie),p=this.BF(l),this.Gk.Oo(g),this.g.Vi(p,this.jo),this.Gk.Kz(this.qa,this.jo,!0),this.hK(d,-1,l,this.Gk),this.Gk.clear()},o.prototype.xS=function(){if(this.nh.size!=0)for(;this.nh.size!=0;){if(this.nh.size>Math.max(100,this.g.fd)){this.nh.clear(!1),this.Ng=!0;break}var l=this.nh.Fc();this.nh.If(),this.Pl(l,-1),this.WS(l)!=-1&&this.wS(l),this.Vn=!1}},o.prototype.wS=function(l){if(this.Vn){var d=this.Mc.zu(this.MH,this.GH,l,!0);this.Vn=!1}else d=this.Mc.KD(l);d==-1?this.UT(this.Mc.ja(this.Mc.FF()),l):(this.Pl(l,d),this.$d.rg&&(this.$d.Kr(),this.oF(this.$d.Dm,d)))},o.prototype.WS=function(l){var d=this.pg(l,0);if(l=this.pg(l,1),this.Hn(d,this.yo),this.Hn(l,this.Pi),u.h.yc(this.yo,this.Pi)<=this.UA)return this.Ng=!0,-1;var p=this.yo.compare(this.vh),g=this.Pi.compare(this.vh);return 0>=p&&0<g?l:0>=g&&0<p?d:-1},o.prototype.oQ=function(){var l=new u.ia(0);l.Jb(this.g.fd);for(var d=this.g.Yq(),p=d.next();p!=-1;p=d.next())this.g.Pa(p,this.xh)!=-1&&l.add(p);this.g.nx(l,l.size),this.pQ(l)},o.prototype.pQ=function(l){this.df.clear(),this.df.De(l.size),this.df.Vo(new A(this.g));var d=new u.h;d.Rc();for(var p=-1,g=new u.h,y=0,w=l.size;y<w;y++){var S=l.get(y);this.g.Gc(S,g),g.qb(d)?(S=this.g.Pa(S,this.xh),this.Xm(p,S)):(p=this.Le(S),this.g.Gc(S,d),S=this.df.xn(S),this.Et(p,S))}},o.prototype.qQ=function(){var l=new u.ia(0);l.Jb(this.g.fd);for(var d=this.df.rc(-1);d!=-1;d=this.df.lb(d))l.add(this.df.ja(d));this.df.clear(),this.g.nx(l,l.size),d=0;for(var p=l.size;d<p;d++){var g=l.get(d),y=this.Le(g);g=this.df.xn(g),this.Et(y,g)}},o.prototype.vF=function(l,d){var p=this.il(l);if(p!=-1){var g=p;do u.$c.LG(this.Pp(g))&&d.add(g),g=this.Rp(g,l);while(g!=p)}},o.prototype.BK=function(l,d){for(l=this.lh.rc(this.Sr(l));l!=-1;l=this.lh.lb(l))this.g.mf(this.lh.ja(l),d)},o.prototype.hK=function(l,d,p,g){this.Xu(l),d!=-1&&this.Xu(d),this.TI(0,l,g),d!=-1&&this.TI(1,d,g),p!=-1&&(g.Bf.D(this.yo),this.Hn(p,this.Pi),this.Pi.qb(this.yo)||this.Ak.add(p)),p=0;for(var y=this.Ak.size;p<y;p++){var w=this.Ak.get(p),S=this.dz(w);S!=-1&&(this.df.vd(S,-1),this.Et(w,-1))}for(p=this.Rh(l),y=d!=-1?this.Rh(d):-1,this.WD(p,g,0),d!=-1&&this.WD(y,g,1),this.ZE(l,g,0),d!=-1&&this.ZE(d,g,1),this.Qd.bh(p),this.Uu(l),d!=-1&&(this.Qd.bh(y),this.Uu(d)),p=0,y=this.Ak.size;p<y;p++)(w=this.Ak.get(p))==this.Jq&&(this.Xv=!0),(S=this.dz(w))==-1&&((S=this.df.KD(this.BF(w)))==-1?(l=this.Le(this.df.ja(this.df.FF())),this.Xm(l,w)):this.Et(w,S));this.Ak.clear(!1)},o.prototype.Hn=function(l,d){this.g.dG(this.ez(l),d)},o.prototype.BF=function(l){return this.lh.Jn(this.Sr(l))},o.prototype.jC=function(){this.Xv=!1,this.Jq=-1,this.$d==null&&(this.Mc.Rv=!1,this.$d=new c(this),this.Mc.Zn=this.$d);var l=new u.ia(0),d=null,p=null;this.GH=this.MH=-1,this.Vn=!1;for(var g=this.df.rc(-1);g!=-1;){this.Vn=!1;var y=this.df.ja(g);this.Jq=this.Le(y),this.g.Gc(y,this.vh),this.$d.$J(this.vh.y,this.vh.x);var w=this.il(this.Jq),S=w==-1;if(!S){y=w;do{var k=this.Pp(y);k==-1?(this.nh.add(y),this.Pl(y,-3)):k!=-3&&l.add(k),y=this.Rp(y,this.Jq)}while(y!=w)}if(0<l.size){for(this.Vn=l.size==1&&this.nh.size==1,S=0,w=l.size;S<w;S++)y=this.Mc.ja(l.get(S)),this.Pl(y,-2);var C=-2,O=-2;for(S=0,w=l.size;S<w;S++){if(k=l.get(S),C==-2){var R=this.Mc.we(k);R!=-1?(y=this.Mc.ja(R),(y=this.Pp(y))!=-2&&(C=R)):C=-1}if(O==-2&&((k=this.Mc.lb(k))!=-1?(y=this.Mc.ja(k),(y=this.Pp(y))!=-2&&(O=k)):O=-1),C!=-2&&O!=-2)break}for(S=0,w=l.size;S<w;S++)k=l.get(S),y=this.Mc.ja(k),this.Mc.vd(k,-1),this.Pl(y,-1);l.clear(!1),this.MH=C!=-1?C:-1,this.GH=O!=-1?O:-1,C!=-1&&O!=-1?this.Vn||this.lO(C,O):C==-1&&O==-1&&(this.Vn=!1)}else S&&(d==null&&(d=new a(this)),d.Dh(this.vh),this.Mc.uJ(d),d.rg&&(d.Kr(),this.GQ(this.Jq,d.Dm)));this.xS(),this.Xv?(this.Xv=!1,p==null&&(p=new b(this.g)),p.Dh(this.vh),g=this.df.uJ(p)):g=this.df.lb(g)}return this.Wn},o.prototype.er=function(l){for(this.g=l,this.xh=this.g.Gd(),this.hb.De(l.fd+32),this.zd.De(l.fd),this.lh.At(l.fd),this.lh.fn(l.fd),this.Qd.At(l.fd+32),this.Qd.fn(l.fd+32),l=this.g.ld;l!=-1;l=this.g.ue(l))if(u.aa.Hc(this.g.ic(l)))for(k=this.g.Ob(l);k!=-1;k=this.g.Rb(k)){var d=this.g.Ja(k),p=this.g.Xa(k),g=this.Ym(p),y=this.nt(p);for(this.hj(y,g),C=this.g.U(p),p=0,d-=2;p<d;p++){var w=this.g.U(C),S=this.Ym(C);this.hj(y,S),y=this.nt(C),this.hj(y,S),C=w}this.g.dc(k)?(S=this.Ym(C),this.hj(y,S),y=this.nt(C),this.hj(y,S),this.hj(y,g)):(S=this.Ym(C),this.hj(y,S))}else for(var k=this.g.Ob(l);k!=-1;k=this.g.Rb(k)){var C=this.g.Xa(k);for(g=0,d=this.g.Ja(k);g<d;g++)this.Ym(C),C=this.g.U(C)}this.oQ()},o}();u.RC=r}(B||(B={})),function(u){var A=function(b){function c(a,r,o){var l=b.call(this)||this;if(a!==void 0)if(o!==void 0){l.description=u.ee.og();var d=new u.Nd;d.K(a,r,o),l.dC(d)}else if(r!==void 0)l.description=u.ee.og(),l.Cb(a,r);else if(a instanceof u.ra)l.description=a;else if(a instanceof u.h)l.description=u.ee.og(),l.Cb(a);else{if(!(a instanceof c))throw u.i.N();l.description=a.description,l.Cb(a.Lg(),a.ih()),a.ka!==null&&(l.ka=a.ka.slice(0))}else l.description=u.ee.og();return l}return Qe(c,b),c.prototype.D=function(a){if(a===void 0){if(this.Ac())throw u.i.fa("This operation should not be performed on an empty geometry.");return(a=new u.h).ma(this.ka[0],this.ka[1]),a}if(this.Ac())throw u.i.fa("This operation should not be performed on an empty geometry.");a.ma(this.ka[0],this.ka[1])},c.prototype.Cb=function(a,r){typeof a=="number"?(this.vc(),this.ka==null&&this.un(),this.ka[0]=a,this.ka[1]=r):(this.vc(),this.Cb(a.x,a.y))},c.prototype.Cz=function(){if(this.Ac())throw u.i.fa("This operation should not be performed on an empty geometry.");var a=new u.Nd;return a.x=this.ka[0],a.y=this.ka[1],a.z=this.description.iG()?this.ka[2]:u.ra.se(1),a},c.prototype.dC=function(a){this.vc();var r=this.hasAttribute(1);r||u.ra.DG(1,a.z)||(this.re(1),r=!0),this.ka==null&&this.un(),this.ka[0]=a.x,this.ka[1]=a.y,r&&(this.ka[2]=a.z)},c.prototype.Lg=function(){if(this.Ac())throw u.i.fa("This operation should not be performed on an empty geometry.");return this.ka[0]},c.prototype.cC=function(a){this.setAttribute(0,0,a)},c.prototype.ih=function(){if(this.Ac())throw u.i.fa("This operation should not be performed on an empty geometry.");return this.ka[1]},c.prototype.aK=function(a){this.setAttribute(0,1,a)},c.prototype.bS=function(){return this.Uc(1,0)},c.prototype.wX=function(a){this.setAttribute(1,0,a)},c.prototype.zR=function(){return this.Uc(2,0)},c.prototype.hX=function(a){this.setAttribute(2,0,a)},c.prototype.Ec=function(){return this.yF(3,0)},c.prototype.LJ=function(a){this.setAttribute(3,0,a)},c.prototype.Uc=function(a,r){var o=this.description.Pf(a);return 0<=o?this.ka[this.description.$j(o)+r]:u.ra.se(a)},c.prototype.yF=function(a,r){var o=this.description.Pf(a);return 0<=o?this.ka[this.description.$j(o)+r]:u.ra.se(a)},c.prototype.setAttribute=function(a,r,o){this.vc();var l=this.description.Pf(a);0>l&&(this.re(a),l=this.description.Pf(a)),this.ka==null&&this.un(),this.ka[this.description.$j(l)+r]=o},c.prototype.getType=function(){return 33},c.prototype.Db=function(){return 0},c.prototype.Oa=function(){this.vc(),this.ka!=null&&(this.ka[0]=NaN,this.ka[1]=NaN)},c.prototype.sn=function(a){if(this.ka!=null){for(var r=u.ee.Iw(a,this.description),o=[],l=0,d=0,p=a.Aa;d<p;d++){var g=a.kd(d),y=u.ra.Va(g);if(r[d]==-1){var w=u.ra.se(g);for(g=0;g<y;g++)o[l]=w,l++}else for(w=this.description.$j(r[d]),g=0;g<y;g++)o[l]=this.ka[w],l++,w++}this.ka=o}this.description=a},c.prototype.un=function(){this.lJ(this.description.Ae.length),c.cE(this.description.Ae,this.ka,this.description.Ae.length),this.ka[0]=NaN,this.ka[1]=NaN},c.prototype.Oc=function(a){if(a instanceof u.Dd){if(!this.Ac()){var r=this.D();a.Eh(r,r),this.Cb(r)}}else this.Ac()||(this.re(1),r=this.Cz(),this.dC(a.fp(r)))},c.prototype.copyTo=function(a){if(a.getType()!=33)throw u.i.N();a.vc(),this.ka==null?(a.Oa(),a.ka=null,a.Nf(this.description)):(a.Nf(this.description),a.lJ(this.description.Ae.length),c.cE(this.ka,a.ka,this.description.Ae.length))},c.prototype.Ia=function(){return new c(this.description)},c.prototype.B=function(){return this.Ac()},c.prototype.Ac=function(){return this.ka==null||isNaN(this.ka[0])||isNaN(this.ka[1])},c.prototype.bn=function(a){a.Oa(),this.description!=a.description&&a.Nf(this.description),a.Zb(this)},c.prototype.A=function(a){this.Ac()?a.Oa():(a.v=this.ka[0],a.G=this.ka[1],a.C=this.ka[0],a.H=this.ka[1])},c.prototype.Qo=function(a){if(this.Ac())a.Oa();else{var r=this.Cz();a.v=r.x,a.G=r.y,a.Ye=r.z,a.C=r.x,a.H=r.y,a.Bg=r.z}},c.prototype.Tg=function(a,r){var o=new u.Nc;return this.Ac()?(o.Oa(),o):(a=this.Uc(a,r),o.oa=a,o.va=a,o)},c.prototype.lJ=function(a){if(this.ka==null)this.ka=u.O.lg(a);else if(this.ka.length<a){for(var r=this.ka.slice(0),o=this.ka.length;o<a;o++)r[o]=0;this.ka=r}},c.cE=function(a,r,o){if(0<o)for(o=0;o<a.length;o++)r[o]=a[o]},c.prototype.Nb=function(a){if(a==this)return!0;if(!(a instanceof c)||this.description!=a.description)return!1;if(this.Ac())return!!a.Ac();for(var r=0,o=this.description.Ae.length;r<o;r++)if(this.ka[r]!=a.ka[r])return!1;return!0},c.prototype.cc=function(){var a=this.description.cc();if(!this.Ac())for(var r=0,o=this.description.Ae.length;r<o;r++){var l=this.ka[r];l=u.O.truncate(l^l>>>32),a=u.O.Th(l,a)}return a},c.prototype.mg=function(){return null},c}(u.aa);u.Sa=A}(B||(B={})),function(u){var A=function(){function b(c,a,r){c!==void 0&&(this.x=c,this.y=a,this.z=r)}return b.construct=function(c,a,r){var o=new b;return o.x=c,o.y=a,o.z=r,o},b.prototype.K=function(c,a,r){this.x=c,this.y=a,this.z=r},b.prototype.lx=function(){this.z=this.y=this.x=0},b.prototype.normalize=function(){var c=this.length();c==0&&(this.x/=c,this.y/=c,this.z/=c)},b.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},b.prototype.sub=function(c){return new b(this.x-c.x,this.y-c.y,this.z-c.z)},b.prototype.Ag=function(c){new b(this.x*c,this.y*c,this.z*c)},b.prototype.Qh=function(c){return this.x*c.x+this.y*c.y+this.z*c.z},b}();u.Nd=A}(B||(B={})),function(u){var A=function(){function b(c,a,r){this.Gw=this.DA=null,this.Xf=a,this.FT=a.y-r,this.ET=a.y+r,this.Ew=0,this.dA=c,this.qa=r,this.RT=r*r,this.eA=r!=0,this.Lv=!1}return b.prototype.result=function(){return this.Ew!=0?1:0},b.prototype.ZM=function(c){return c=c.hc(c.fe(this.Xf,!1)),u.h.yc(c,this.Xf)<=this.RT},b.prototype.fF=function(c){if(!this.eA&&(this.dA&&this.Xf.qb(c.ac())||this.Xf.qb(c.wc())))this.Lv=!0;else if(c.na==this.Xf.y&&c.na==c.la){if(this.dA&&!this.eA){var a=Math.max(c.sa,c.pa);this.Xf.x>Math.min(c.sa,c.pa)&&this.Xf.x<a&&(this.Lv=!0)}}else{var r=!1;if(a=Math.max(c.sa,c.pa),this.Xf.x>a?r=!0:this.Xf.x>=Math.min(c.sa,c.pa)&&(r=0<c.cq(!0,this.Xf.y,this.Gw,null)&&this.Gw[0]<=this.Xf.x),r){if(this.Xf.y==c.ac().y){if(this.Xf.y<c.wc().y)return}else if(this.Xf.y==c.wc().y&&this.Xf.y<c.ac().y)return;this.Ew=this.dA?1^this.Ew:this.Ew+(c.ac().y>c.wc().y?1:-1)}}},b.prototype.SI=function(c){var a=c.Tg(0,1);if(a.oa>this.ET||a.va<this.FT)return!1;if(this.eA&&this.ZM(c))return!0;if(a.oa>this.Xf.y||a.va<this.Xf.y)return!1;if(this.DA==null&&(this.DA=[null,null,null,null,null]),this.Gw==null&&(this.Gw=[0,0,0]),0<(a=c.eG()))for(c=0;c<a;c++){var r=this.DA[c].get();if(this.fF(r),this.Lv)return!0}else if(this.fF(c),this.Lv)return!0;return!1},b.PM=function(c,a,r){for(a=new b(c.In()==0,a,r),c=c.Ga();c.$a();)for(;c.Ha();)if(r=c.ha(),a.SI(r))return-1;return a.result()},b.QM=function(c,a,r,o){var l=new u.l;c.xc(l),l.W(o,o);var d=new b(c.In()==0,r,o);c=c.Ga();var p=new u.l;for(p.K(l),p.C=r.x+o,p.G=r.y-o,p.H=r.y+o,o=(r=a.MF(p,o)).next();o!=-1;o=r.next())if(c.Vb(a.ja(o)),c.Ha()&&(o=c.ha(),d.SI(o)))return-1;return d.result()},b.wm=function(c,a,r){if(c.B())return 0;var o=new u.l;if(c.xc(o),o.W(r,r),!o.contains(a))return 0;if((o=c.Bb)!=null){var l=o.Fk;if(l!=null){if((l=l.So(a.x,a.y))==1)return 1;if(l==0)return 0}if((o=o.Fb)!=null)return b.QM(c,o,a,r)}return b.PM(c,a,r)},b.bT=function(c,a,r){return a.B()?0:b.wm(c,a.D(),r)},b.Ml=function(c,a){return!(16>(c=c.I()))&&2*c+Math.log(c)/Math.log(2)*a<1*c*a},b}();u.Dg=A}(B||(B={})),function(u){var A=function(b){function c(a){return b.call(this,!0,a)||this}return Qe(c,b),c.prototype.Ia=function(){return new c(this.description)},c.prototype.Db=function(){return 2},c.prototype.getType=function(){return 1736},c.prototype.xG=function(a,r,o){this.JS(a,r,o)},c.prototype.qR=function(){this.FR()},c}(u.Vk);u.Da=A}(B||(B={})),function(u){(function(A){A[A.PiPOutside=0]="PiPOutside",A[A.PiPInside=1]="PiPInside",A[A.PiPBoundary=2]="PiPBoundary"})(u.RL||(u.RL={})),u.hd=function(){function A(){}return A.KG=function(b,c,a){return(b=u.Dg.bT(b,c,a))==0?0:b==1?1:2},A.Yd=function(b,c,a){return(b=u.Dg.wm(b,c,a))==0?0:b==1?1:2},A.WX=function(b,c,a,r,o){if(c.length<a||o.length<a)throw u.i.N();for(var l=0;l<a;l++)o[l]=A.Yd(b,c[l],r)},A.sK=function(b,c,a,r,o){if(b.getType()==1736)A.WX(b,c,a,r,o);else{if(b.getType()!=197)throw u.i.fa("invalid_call");var l=new u.l;b.A(l),A.$M(l,c,a,r,o)}},A.$M=function(b,c,a,r,o){if(c.length<a||o.length<a)throw u.i.N();if(b.B())for(r=0;r<a;r++)o[r]=0;else for(b.W(.5*-r,.5*-r),b.W(.5*r,.5*r),r=0;r<a;r++)b.contains(c[r])?o[r]=1:b.contains(c[r])?o[r]=2:o[r]=0},A.YX=function(b,c,a,r,o){for(var l=0;l<a;l++)o[l]=b.qs(c[l],r)?2:0},A.XX=function(b,c,a,r,o){var l=b.Bb,d=null;l!=null&&(d=l.Fk),l=a;for(var p=0;p<a;p++)if(o[p]=1,d!=null){var g=c[p];d.So(g.x,g.y)==0&&(o[p]=0,l--)}if(l!=0)for(b=b.Ga();b.$a()&&l!=0;)for(;b.Ha()&&l!=0;)for(d=b.ha(),p=0;p<a&&l!=0;p++)o[p]==1&&d.qs(c[p],r)&&(o[p]=2,l--);for(p=0;p<a;p++)o[p]==1&&(o[p]=0)},A.tK=function(b,c,a,r,o){var l=b.getType();if(l==1607)A.XX(b,c,a,r,o);else{if(!u.aa.yd(l))throw u.i.fa("Invalid call.");A.YX(b,c,a,r,o)}},A}()}(B||(B={})),function(u){var A=function(b){function c(a,r){if(arguments.length==2){var o=b.call(this,!1,a.description)||this;o.nf(a),o.lineTo(r)}else o=b.call(this,!1,a)||this;return o}return Qe(c,b),c.prototype.Ia=function(){return new c(this.description)},c.prototype.Db=function(){return 1},c.prototype.getType=function(){return 1607},c.prototype.xG=function(a,r,o){this.KS(a,r,o)},c}(u.Vk);u.Ta=A}(B||(B={})),function(u){var A=function(){function b(){}return b.prototype.progress=function(){return!0},b.zp=function(c){if(c!=null&&!c.progress(-1,-1))throw u.i.WC()},b}();u.mp=A}(B||(B={})),function(u){var A;(A=u.PK||(u.PK={}))[A.clipWithInputHorizon=1]="clipWithInputHorizon",A[A.clipWithOutputHorizon=2]="clipWithOutputHorizon";var b=function(){function r(){this.Kg=3,this.Vu=this.Jr=NaN}return r.prototype.PW=function(o){this.QB(1,o)},r.prototype.QW=function(o){this.QB(2,o)},r.prototype.hS=function(){return this.hs(1)},r.prototype.iS=function(){return this.hs(2)},r.prototype.QB=function(o,l){this.Kg=l?this.Kg|o:this.Kg&~o},r.prototype.hs=function(o){return!!(this.Kg&o)},r.prototype.Of=function(){var o=new r;return o.Jr=this.Jr,o.Vu=this.Vu,o.Kg=this.Kg,o},r}();u.yC=b,function(r){r[r.Dont_Geonomalize_Polygon=2147483648]="Dont_Geonomalize_Polygon",r[r.Dont_Adjust_At_Poles=1073741824]="Dont_Adjust_At_Poles"}(u.QK||(u.QK={}));var c=function(){function r(){this.Kg=0}return r.prototype.QB=function(o,l){this.Kg=l?this.Kg|o:this.Kg&~o},r.prototype.hs=function(o){return!!(this.Kg&o)},r.jg=function(o){var l=new r;return l.Kg=o.Kg,l},r.prototype.mM=function(o){this.Kg=o.Kg},r}();u.AY=c;var a=function(){function r(o,l,d){this.ef=o,this.Yf=l,this.Uf=new u.l,this.Uf.K(d),this.AT=o.cc()+l.cc()+this.Uf.cc().toString()}return r.prototype.cc=function(){return this.AT},r.prototype.Nb=function(o){return this==o||this.ef.Nb(o.ef)&&this.Yf.Nb(o.Yf)&&this.Uf.Nb(o.Uf)},r}();u.FY=a,a=function(){function r(){this.Yf=this.ef=null,this.rH=new b,this.sH=new c,this.ww=this.Wf=null,this.mw=this.Tn=!0}return r.Nr=function(o,l,d,p){var g;p===void 0&&(p=null),g===void 0&&(g=null);var y=new r;return y.qp(o,l,d,p,g),y},r.prototype.qp=function(o,l,d,p,g){if(o==null||l==null)throw u.i.fa("invalidArgument");if(this.ef=o,this.Yf=l,this.mw=this.Tn=!1,p!=null&&(this.rH=p.Of()),g!=null&&this.sH.mM(g),g=!1,l.Sb()==1&&p!=null&&(p=p.Jr,isNaN(p)||p==0||(g=!0)),o==l)this.Tn=!g,this.mw=!0;else{p=o.Sb();var y=l.Sb();if(p==0||y==0){if(d!=null)throw u.i.N();o.Hd()!=null&&l.Hd()!=null&&(this.Tn=o.Hd().Nb(l.Hd()))}else p==3||y==3?this.Tn=o.Nb(l):this.ef.kS(this.Yf)?this.Tn=!g:this.Tn=!1,this.Wf=d,this.Wf!=null&&this.Wf.ix(),this.mw=(this.Wf==null||this.Wf.count()==0)&&this.ef.sc().Nb(this.Yf.sc())}this.oY()},r.prototype.isIdentity=function(){return this.Tn},r.prototype.nR=function(){return this.rH.Of()},r.prototype.Nb=function(o){return o==this||!!(o instanceof r&&this.ef.Nb(o.ef)&&this.Yf.Nb(o.Yf))&&(this.Wf==o.Wf||!(this.Wf==null||o.Wf==null||!this.Wf.Nb(o.Wf)))},r.prototype.oY=function(){this.ww=new u.bu(this)},r}(),u.vr=a}(B||(B={})),function(u){var A=function(){function b(){}return b.Cp=function(c){return c*b.oW},b.mx=function(c,a){return b.gP(a-c)},b.hP=function(c){return-360<=c&&720>c?(0>c?c+=360:360<=c&&(c-=360),c):(0>(c=u.lc.RK(c))&&(c+=360),c)},b.gP=function(c){return 180<(c=b.hP(c))&&(c-=360),c},b.oW=57.29577951308232,b}();u.qr=A,u.Hh=function(){function b(){}return b.lj=function(c,a){var r=new u.l;c.A(r);var o=u.cb.gh(a),l=new u.l;return l.K(o),l.v=r.v,l.C=r.C,l.W(.01*l.ca(),0),a=u.ta.Wd(a,r,!1),l.contains(r)?c:u.Ud.clip(c,l,a,0)},b.ks=function(c,a,r,o,l){if(!u.cb.Wc(a))throw u.i.N();var d=u.ta.kj(a,c,!1),p=u.cb.gh(a),g=u.cb.sc(a),y=g.Hd().ai,w=u.cb.vv(g);g=u.cb.ev(g),w*=2-w;var S=new u.Nc;p.cn(S);var k=[[0,0],[0,0]];if(u.Eg.Sb(a)==2?o?(k[0][0]=b.Zm(l,S),k[0][1]=p.Jp(),u.cb.vt(),p=k[0][0]*y):(k[0][0]=p.gk(),k[0][1]=l,u.cb.vt(),p=k[0][1]*y):p=l*y,!o&&p!=0)throw u.i.N();var C=new u.ga,O=new u.gd;c=O.Ib(c);for(var R=[0],N=new u.h,j=new u.h,G=new u.h,D=new u.h,V=new u.h,Z=new u.h,q=O.Ob(c);q!=-1;q=O.Rb(q)){var ne=O.Xa(q);O.D(ne,G);for(var ee=!1,he=ne=O.U(ne);he!=-1;he=O.U(he)){if(he==ne){if(ee)break;ee=!0}if(O.D(he,D),o&&d<l-G.x&&D.x-l>d||d<l-D.x&&G.x-l>d||!o&&d<-G.y&&D.y>d||d<-D.y&&G.y>d)do if(!(Math.abs(G.x-D.x)>=.5*S.R())){if(u.Eg.Sb(a)==2?(k[0][0]=b.Zm(G.x,S),k[0][1]=G.y,k[1][0]=b.Zm(D.x,S),k[1][1]=D.y,u.cb.dW(),V.x=k[0][0]*y,V.y=k[0][1]*y,Z.x=k[1][0]*y,Z.y=k[1][1]*y):(V.x=G.x*y,V.y=G.y*y,Z.x=D.x*y,Z.y=D.y*y),Z.x=6.283185307179586*(D.x-G.x)/S.R()+V.x,o){if(j.x=p,j.y=b.Nz(g,w,V,Z,p,r),isNaN(j.y))break}else{if(j.x=b.Lz(g,w,V,Z,r),isNaN(j.x))break;j.y=0}u.kb.wd(g,w,V.x,V.y,Z.x,Z.y,C,null,null,r);var ye=C.u;u.kb.wd(g,w,V.x,V.y,j.x,j.y,C,null,null,r);var ge=C.u;u.Eg.Sb(a)==2?(k[0][0]=j.x/y,k[0][1]=j.y/y,u.cb.bR(),o?(N.y=k[0][1],N.x=l):(N.x=b.os(k[0][0],G.x,D.x,S),N.y=l)):o?(N.x=l,N.y=j.y/y):(N.x=b.os(j.x/y,G.x,D.x,S),N.y=l),R[0]=0<ye?u.O.Rk(ge/ye,0,1):.5,R[0]!=0&&R[0]!=1&&(ye=O.Ma(he),O.Ul(ye,R,1),O.Cb(O.U(ye),N.x,N.y))}while(!1);G.L(D)}}return O.Ne(c)},b.Fn=function(c,a,r,o,l){if(c.B())return c;var d=u.cb.bf(a);return b.Hp(c,r-180*d,360*d,a,o,l,!0)},b.Nz=function(c,a,r,o,l,d){if(3.141592653589793<=Math.abs(r.x-o.x)||!b.Sn(r.x,o.x,l))return NaN;if(r.x>o.x)var p=o;else p=r,r=o;o=new u.ga(0);var g=new u.ga(0),y=new u.ga(0);u.kb.wd(c,a,p.x,p.y,r.x,r.y,g,o,null,d);var w=g.u,S=0,k=1,C=new u.h;for(C.L(p);w*(k-S)>1e-12*c;){var O=.5*(S+k);if(u.kb.oj(c,a,p.x,p.y,w*O,o.u,g,y,d),C.x=g.u,C.y=y.u,C.x==l)break;if(b.Sn(p.x,C.x,l))k=O;else{if(!b.Sn(r.x,C.x,l))return NaN;S=O}}return C.y},b.Sn=function(c,a,r){return c=A.Cp(c),a=A.mx(c,A.Cp(a)),(r=A.mx(c,A.Cp(r)))==0||0<a&&0<r&&r<=a||0>a&&0>r&&r>=a},b.Zm=function(c,a){var r=a.va-a.oa;return a.It(c-Math.floor((c-a.oa)/r)*r)},b.os=function(c,a,r,o){var l=new u.Nc;for(l.K(a,r),r=o.R(),c=Math.floor((c-a)/r)*r+c,l=l.sf();Math.abs(c-l)>Math.abs(c+r-l);)c+=r;return c},b.Lz=function(c,a,r,o,l){if(r.y>o.y)var d=o;else d=r,r=o;if((o=new u.Nc).K(d.y,r.y),!o.contains(0)||3.141592653589793<=Math.abs(d.x-r.x))return NaN;if(d.x==r.x)return d.x;var p=new u.ga(0),g=new u.ga(0),y=new u.ga(0);u.kb.wd(c,a,d.x,d.y,r.x,r.y,g,p,null,l);var w=g.u,S=0,k=1,C=new u.h;for(C.L(d);w*(k-S)>1e-12*c;){var O=.5*(S+k);if(u.kb.oj(c,a,d.x,d.y,w*O,p.u,g,y,l),C.x=g.u,C.y=y.u,o.K(d.y,C.y),C.y==0)break;if(o.contains(0))k=O;else{if(o.K(r.y,C.y),!o.contains(0))return NaN;S=O}}return C.x},b.Hp=function(c,a,r,o,l,d,p){var g=new u.l;if(c.A(g),g.B())return c;var y=new u.Nc;g.cn(y);var w=new u.Nc;if(w.K(a,a+r),w.contains(y)&&w.va!=y.va)return c;var S=new u.l;S.K(g);var k=c.getType();if(k==33)return((g=(S=l?c:c.Of()).Lg())<w.oa||g>=w.va||p&&g==w.va)&&(g+=Math.ceil((w.oa-g)/r)*r,g=w.It(g),S.cC(g)),S;if(k==550){for(o=(S=l?c:c.Of()).ub(0),k=2*S.I(),c=!1,l=0;l<k;l+=2)((g=o.read(l))<w.oa||g>=w.va||p&&g==w.va)&&(c=!0,g+=Math.ceil((w.oa-g)/r)*r,g=w.It(g),o.write(l,g));return c&&S.Pc(1993),S}if(w.contains(y))return c;if(k==197)return r=l?c:c.Of(),g.Ea(S),r.Xo(g),r;var C=.1*Math.max(g.ca(),g.R());for(S.W(0,C),p=c,w=o.Xd(0),c=u.Gh.local(),l=new u.Dd;;){var O=Math.floor((y.oa-a)/r),R=Math.ceil((y.va-a)/r);if(!(3<R-O))break;O=Math.floor(.5*(R+O)),S.v=g.v-C,S.C=a+r*O;var N=u.Ud.clip(p,S,w,d);S.v=S.C,S.C=g.C+C;var j=u.Ud.clip(p,S,w,d);l.gg((O-R)*r,0),j.Oc(l),k==1736?p=c.V(N,j,o,null):(p=N).add(j,!1),p.A(g),g.cn(y)}for(S.v=a,S.C=a+r,(a=new u.l).K(S),a.W(w,0),(a=Math.floor((g.v-S.v)/r)*r)!=0?(S.move(a,0),l.gg(-a,0)):l.RB(),a=k==1607?new u.Ta(p.description):new u.Da(p.description),d=new u.l,y=new u.l;g.C>S.v;)(C=u.Ud.clip(p,S,w,0)).A(y),(k==1607?!C.B()&&(y.R()>w||y.ca()>w):!C.B()&&(k!=1736||y.R()>w))&&(C.Oc(l),C.A(y),a.A(d),d.W(w,w),d.isIntersecting(y)&&k==1736?a=c.V(a,C,o,null):a.add(C,!1)),S.move(r,0),l.shift(-r,0);return a},b.WI=function(c,a,r,o){var l=new u.de(r.description);l.Fd(r,0,-1),l=u.cb.zh(l,c,a);var d=r.I();if(o.Oa(),!u.cb.Wc(c)||d!=l.I())return!1;var p=new u.l;r.A(p);var g=new u.l;if(l.A(g),p=p.R(),g=g.R(),p!=0&&g!=0){if(g/=p,c=u.cb.gh(a).R()/u.cb.gh(c).R(),1e-10<Math.abs(g/c-1))return!1}else if(p!=0||g!=0)return!1;for(o.add(r,!1),r=0;r<d;r++)c=l.Na(r),o.Cb(r,c);return!0},b.Oz=function(){throw u.i.Ie()},b}()}(B||(B={})),function(u){var A,b,c;(b=A=u.si||(u.si={}))[b.Clip=0]="Clip",b[b.DontClip=1]="DontClip",b[b.PannableFold=2]="PannableFold",function(a){a[a.Geodesic=0]="Geodesic",a[a.Loxodrome=1]="Loxodrome",a[a.GreatElliptic=2]="GreatElliptic",a[a.NormalSection=3]="NormalSection",a[a.ShapePreserving=4]="ShapePreserving"}(c=u.WK||(u.WK={})),u.zb=function(){function a(){}return a.xv=function(r,o,l){if(l||0<o){for(r=r.toString(u.Sc.PE_STR_NAME_CANON|u.Sc.PE_STR_AUTH_NONE),o=[],l=0;l<r.length;l++)o[l]="a"<=r[l]&&"z">=r[l]?o[l]=r[l].toUpperCase():r[l];return o.join()}return r.toString(u.Sc.PE_STR_AUTH_TOP)},a.ur=function(r,o,l,d){var p=d.length,g=l.I();if(g!=0){var y=l.ub(0),w=Math.min(g,p),S=0,k=r.eh();isNaN(o)&&(o=0);for(var C=r.Wc(),O=179*(r=C?r.sc().Oe().R():0)/360;0<g;){if(y.uB(S<<1,w,d),u.ej.projToGeogCenter(k,w,d,o),C)for(var R=0;R<w;R++){var N=d[R][0]-o,j=u.lc.sign(N),G=y.read(2*(S+R));0>j*u.lc.sign(G)&&Math.abs(N)>O&&(d[R][0]+=-j*r)}y.uC(S<<1,w,d),S+=w,g-=w,w=Math.min(g,p)}l.Pc(1993)}},a.IL=function(r,o,l,d){var p=0,g=r.eh();isNaN(p)&&(p=0);var y=r.Wc(),w=r.bf();r=360*w,w*=179;for(var S=d.length,k=0;k<l;){for(var C=k;C<l&&o[C].isNaN();++C)k++;var O=Math.min(S,l-k);if(0<O){C=1;for(var R=k+1;C<O;++C,++R)if(o[R].isNaN()){O=C;break}if(u.ta.Jy(d,o,k,O),u.ej.projToGeogCenter(g,O,d,p),y)for(C=0,R=k;C<O;++C,++R){var N=o[R].x,j=d[C][0]-p,G=u.lc.sign(j);0>G*u.lc.sign(N)&&Math.abs(j)>w&&(d[C][0]-=G*r)}u.ta.Iy(o,k,d,O),k+=O}}},a.Lx=function(r,o,l){var d=l.length,p=o.I();if(!(1>p)){var g=o.ub(0),y=Math.min(p,d),w=0,S=r.eh(),k=r.Wc(),C=k?r.Oe().R():0,O=179*C/360,R=0;for(k&&(R=r.zi());0<p;){if(g.uB(w<<1,y,l),u.ej.geogToProj(S,y,l),k)for(r=0;r<y;r++){var N=l[r][0],j=u.lc.sign(N),G=g.read(2*(w+r))-R;0>j*u.lc.sign(G)&&Math.abs(N)>O&&(l[r][0]+=-j*C)}g.uC(w<<1,y,l),w+=y,p-=y,y=Math.min(p,d)}o.Pc(1993)}},a.HL=function(r,o,l,d){if(l!=0){var p=r.eh(),g=r.Wc(),y=g?r.Oe().R():0,w=179*y/360,S=0;for(g&&(S=r.zi()),r=0;r<l;){for(var k=r;k<l&&o[k].isNaN();++k)r++;var C=Math.min(d.length,l-r);if(0<C){k=1;for(var O=r+1;k<C;++k,++O)if(o[O].isNaN()){C=k;break}if(u.ta.Jy(d,o,r,C),u.ej.geogToProj(p,C,d),g)for(k=0,O=r;k<C;k++){var R=d[k][0],N=u.lc.sign(R);0>N*u.lc.sign(o[O].x-S)&&Math.abs(R)>w&&(d[k][0]-=N*y)}u.ta.Iy(o,r,d,C),r+=C}}}},a.tr=function(r,o,l,d){var p=o.I();if(p!=0){var g=o.ub(0),y=r.ef,w=r.Yf,S=y.sc().Qp(),k=w.sc().Qp(),C=y.bf(),O=w.bf();if((r=r.Wf)==null||r.count()==0){for(l=S/k,d=(y.Up()-w.Up())*O,k=-90*C,r=90*C,S=!1,O=1,y=2*p;O<y;)C=g.get(O),(w=u.O.Rk(C,k,r))!=C&&(g.set(O,w),S=!0),O+=2;if(d!=0||l!=1)for(S=!0,k=new u.h,O=0;O<p;O++)g.tc(2*O,k),k.x*=l,k.x+=d,k.y*=l,g.Tt(2*O,k);S&&o.Pc(1993)}else{y=d.length,w=Math.min(p,y);var R=u.O.lg(w),N=null,j=0,G=NaN,D=NaN,V=360*O,Z=O/C;l&&(D=90*O,G=89.9*C,N=u.O.lg(w));for(var q=!0,ne=0;p!=0;){for(C=!1,g.uB(j<<1,w,d),O=0;O<w;O++)R[O]=d[O][0];if(l)for(O=0;O<w;O++){var ee=Math.abs(d[O][1])-G;0<ee&&(C=d[O][1],d[O][1]=u.lc.Cn(G,C),N[O]=u.lc.Cn(ee,C),C=!0)}for(O=d[0][0],r.transform(d,w,S,k),q&&(ne=d[0][0]-Z*O,q=!1),O=0;O<w;O++)ee=d[O][0]-R[O]*Z-ne,200<Math.abs(ee)&&(d[O][0]=0<ee?d[O][0]-V:d[O][0]+V);if(C){for(O=0;O<w;O++)N[O]!=0&&(d[O][1]+=Z*N[O],d[O][1]>D?d[O][1]=D:d[O][1]<-D&&(d[O][1]=-D));for(C=0;C<w;C++)N[C]=0}g.uC(j<<1,w,d),j+=w,p-=w,w=Math.min(p,y)}o.Pc(1993)}}},a.GL=function(r,o,l,d){if(r.mw)d=90*r.ef.bf(),u.ta.dK(o,l,-d,d);else{var p=r.Wf,g=r.ef,y=r.Yf;r=g.Xr();var w=y.Xr(),S=g.bf(),k=90*S,C=y.bf();if(p==null||p.count()==0){if(d=r/w,p=(g.Up()-y.Up())*C,u.ta.dK(o,l,-k,k),p!=0||d!=1)for(C=0;C<l;C++)o[C].x*=d,o[C].x+=p,o[C].y*=d}else{g=Math.min(l,d.length),k=u.O.lg(g),y=360*C,S=C/S;for(var O=!0,R=0,N=0;l!=0;){for(C=0;C<g;C++)k[C]=o[C+N].x;for(C=o[0].x,u.ta.Jy(d,o,N,g),p.transform(d,g,r,w),u.ta.Iy(o,N,d,g),O&&(R=o[0].x-S*C,O=!1),C=0;C<g;C++){var j=o[N+C].x-k[C]*S-R;200<Math.abs(j)&&(o[N+C].x=0<j?o[N+C].x-y:o[N+C].x+y)}N+=g,l-=g,g=Math.min(l,d.length)}}}},a.dv=function(r,o){return r=r.gh(),isNaN(o)||r.Ju(o,0),r},a.UQ=function(r,o,l,d,p,g,y,w){for(var S=a.dv(d,p),k=S.R(),C=k/360,O=a.pE*C,R=r.ub(0),N=o.Wc(),j=N?k/o.Oe().R():0,G=!1,D=new u.Da(l.description),V=0,Z=l.da();V<Z;++V){var q=N,ne=new u.Ta(l.description);if(ne.addPath(l,V,!0),y!=0){var ee=a.PD(!0,ne,S.H-w,S.H,y);(G=G||ee)&&(q=!1)}var he=-1;q&&(he=r.Ba(V));var ye=ne.ub(0),ge=ne.I(),Le=0,Te=ye.read(0),Je=0;ee=3*d.Xd(0);var We=!1,Oe=new u.h;Oe.Rc();var Dt=new u.h;Dt.Rc();for(var Ri=!1,Gt=1;Gt<ge;++Gt){var bt=u.h.construct(ye.eg(2*Gt),ye.eg(2*Gt+1)),wt=bt.x,ot=wt+Le,Xt=ot-Te;if(bt.x=ot,Math.abs(Xt)>O){if(q){var rt=he+(Gt+1<ge?Gt:0),Jr=R.read(2*(he+Gt-1));rt=(R.read(2*rt)-Jr)*j,Math.abs(Xt-rt)>1*C&&(q=!1)}q||(ot=wt+(Le-=u.lc.Cn(k,ot-Te)),++Je,Ri=Le!=0,bt.x=ot)}else We||u.ta.AG(Dt,Oe,bt,ee)&&(We=!0);Ri&&ye.write(2*Gt,ot),Te=ot,Dt.L(Oe),Oe.L(bt)}0<Je&&ne.Pc(1993),q=ne.Na(0),ge=ne.Na(ge-1),ne=u.h.tb(q,ge)<ee?a.uQ(ne,d,p,g,We):a.vQ(r,V,ne,d,p),D.add(ne,!1)}return p=d.Xd(0),l=S.R()/180,a.Jt(D,S,.1*p,!1),D=D!=(p=u.ri.clip(D,S,p,l,g)),r=r.Ke(),y=0,0<(w=p.Ke())&&0>r?y=1:0>=w&&0<r&&(w==0?(w=NaN,o.Sb()==2?w=o.ml().Ke():o.Sb()==1&&(w=o.Oe().wF()),r>.99*w&&(y=-1)):y=-1),y!=0&&((o=new u.Da(p.description)).tp(S),(o=u.Xl.local().V(o,l,g)).add(p,!1),D=!0,p=o),D&&(p=u.Yl.local().V(p,d,!1,g)),p},a.vQ=function(r,o,l,d,p){var g=l.I(),y=l.Na(0),w=l.Na(g-1);p=(d=a.dv(d,p)).R(),y=u.lc.sign(w.x-y.x);var S=new u.l;l.xc(S);var k=d.gk();if(w=k-p,k+=p,0<=y){var C=Math.ceil((w-S.v)/p);for(C*=p;w>S.v+C;)C+=p;for(;w<S.C+C;)C-=p;var O=C;720<S.R()&&(k=w+360*Math.ceil(S.R()/360))}else{for(C=Math.ceil((k-S.C)/p),C*=p;k<S.C+C;)C-=p;for(;k>S.v+C;)C+=p;O=C,720<S.R()&&(w=k-360*Math.ceil(S.R()/360))}C=y*p;var R=u.l.construct(S.v,S.G,S.C,S.H);R.move(O,0);var N=new u.Dd;N.gg(O,0),l.Oc(N),(S=new u.Ta(l.description)).add(l,!1),O=l.Na(g-1),p=0;for(var j=S.Na(0).x,G=0;0<y?R.C<k:R.v>w;)1024<=G&&(G=0),R.move(C,0),N.Gb=C,l.Oc(N),j+=C,d.v<=j&&d.C>=j&&(p=S.I()-1),l.Cb(0,O),O=l.Na(g-1),S.Dr(l,0,0,g-1,!1);return l=new u.Da(S.description),g=0<r.Ir(o),l.add(S,!1),r=S.Na(0),w=S.Na(S.I()-1),o=l.da()-1,(0>y?g:!g)?(y=u.h.construct(w.x,d.H),l.Ci(y),y=u.h.construct(d.gk(),d.H),l.Ci(y),d=u.h.construct(r.x,d.H)):(y=u.h.construct(w.x,d.G),l.Ci(y),y=u.h.construct(d.gk(),d.G),l.Ci(y),d=u.h.construct(r.x,d.G)),l.Ci(d),l.xG(0,o,0),l.kO(p),l},a.uQ=function(r,o,l,d,p){var g=new u.Da(r.description);g.add(r,!1),g.DB(0,g.I()-1);var y=new u.l;g.xc(y);var w=(l=a.dv(o,l)).R(),S=Math.ceil((l.v-y.v)/w);for(S*=w;l.v>y.v+S;)S+=w;for(;l.v<y.C+S;)S-=w;if((S+=w)!=0){y.move(S,0);var k=new u.Dd;k.gg(S,0),g.Oc(k)}if(l.v<=y.v&&l.C>y.C)return p&&(p=g.Ke(),o=(g=u.Yl.local().V(g,o,!0,d)).Ke(),(o=u.lc.sign(p)!=u.lc.sign(o))&&g.oJ()),g;for((r=new u.Da(r.description)).add(g,!1),p=p||y.R()>w-o.Xd(0);y.v<l.C;)y.move(w,0),(k=new u.Dd).gg(w,0),g.Oc(k),r.add(g,!1);return p&&(p=r.Ke(),r.Yo(1),o=(r=u.Yl.local().V(r,o,!0,d)).Ke(),(o=u.lc.sign(p)!=u.lc.sign(o))&&r.oJ()),r},a.PD=function(r,o,l,d,p){for(var g=o.ub(0),y=o.I(),w=!1,S=0;S<y;S++){var k=u.h.construct(g.eg(2*S),g.eg(2*S+1));if(1&p&&k.y>=l){w=!0;break}if(2&p&&k.y<=-l){w=!0;break}}if(!w)return!1;g=!1,r&&(g=o.Nn(0)),y=(r=new u.gd).Ib(o),w=r.Ob(y);var C=-1,O=!0,R=new u.h;R.Rc(),S=new u.Sa;for(var N=-1,j=r.Xa(w);j!=-1;j=r.U(j)){k=r.Na(j);var G=1&p&&90<=k.y?1:0;if(G|=2&p&&k.y<=-l?2:0,0<C&&C!=G){if(R.x!=k.x){R.x=k.x,r.Vi(r.Ma(j),S);var D=r.wj(w,j,S);r.mf(D,R)}if(g)for(N=N!=-1?r.U(N):r.Xa(w),D=r.Ma(j);N!=D;)N=r.pd(N,!1);N=-1}0<G&&(k.y=u.lc.Cn(d,k.y),r.mf(j,k),O||C==G||(k.x!=R.x?(r.Vi(j,S),D=r.wj(w,j,S),r.Cb(D,R.x,k.y),N=D):N=j)),C=G,R=k,O=!1}if(g){if(N!=-1)for(N=r.U(N);N!=-1;)N=r.pd(N,!1);l=r.Xa(w),r.fq(l,r.rj(w))||(r.Vi(l,S),r.wj(w,-1,S))}return r.Ne(y).copyTo(o),!0},a.Mz=function(r,o,l,d){var p=r;if(p.B()||l==A.DontClip)return p;var g=p.getType();if(g==33)return p=[(d=p).D()],a.yG(p,1,o,l),p[0].isNaN()?d.Oa():d.Cb(p[0]),r;var y=(r=o.sc()).bf(),w=90*y,S=180*y,k=360*y,C=o.zi(),O=.5*y,R=new u.l;p.A(R);var N=o.Vr(),j=o.PQ(),G=N.getType()==197;if(o=new u.l,N.A(o),l==A.PannableFold&&(l=r.Oe().R(),o.v=C-.5*l,o.C=o.v+l),R.G<-w||R.H>w){if(new u.l().K(R.v-y,-w,R.C+y,w),(p=u.ri.Nu(p,o,r,NaN,0,d)).B())return p;p.A(R)}if(j&&(o.H<R.G||o.G>R.H))return p.Ia();if(R.R()>k&&(p=a.Hp(p,C-S,k,r,!0,0,!0,d)).A(R),(w=a.eO(R.v,R.C,o.v,o.C,k))!=0&&R.move(w,0),R.C>o.C||R.v<o.v){if(R.C>o.C)for(;R.v>=o.C;)R.move(-k,0),w-=k;for(;R.v<o.C-k;)R.move(k,0),w+=k}if(l=u.ta.Hu(r,N),w!=0&&((y=new u.Dd).gg(w,0),p.Oc(y)),j){if(G&&o.contains(R))return p;for(j=[null,null],w=0;2>w;w++){if(G?y=u.aa.Hc(g)?u.ri.clip(p,o,l,O,d):u.ri.clip(p,o,l,0,d):(y=u.Xj.local().V(p,N,r,d))==N&&(y=u.aa.jg(y)),o.v<=R.v&&o.C>=R.C||o.v>=R.v&&o.C<=R.C)return y;j[w]=y,w==0&&(R.move(-k,0),(y=new u.Dd).gg(-k,0),p.Oc(y))}if(g==550)j[0].Fd(j[1],0,-1);else if(u.aa.Hc(g))j[0].add(j[1],!1);else{if(g!=33)throw u.i.fa("intersect_with_GCS_horizon: unexpected geometry type");j[0].B()&&(j[0]=j[1])}return j[0]}if(o.H<R.G||o.G>R.H)return p;for(g=0;!p.B()&&R.C>o.v;)g!=0&&((y=new u.Dd).gg(g,0),p.Oc(y)),u.dj.local().V(4,p,N,r,d)||N==(p=u.kp.local().V(p,N,r,d))&&(p=u.aa.jg(p)),g!=0&&((O=new u.Dd).gg(-g,0),p.Oc(O)),g-=k,R.move(-k,0);return p},a.yG=function(r,o,l,d){if(o!=0&&d!=A.DontClip)if(d==A.PannableFold){d=l.HR();for(var p=o,g=0;g<o;g++)(r[g].y>d.H||r[g].y<d.G)&&(r[g].Rc(),p--);p!=0&&a.av(r,o,d.v,d.R())}else{var y=90*(d=l.bf()),w=180*d;for(d*=360,p=o,g=0;g<o;g++)(r[g].y>y||r[g].y<-y)&&(r[g].Rc(),p--);if(p!=0){(p=new u.l).Zw(r,o),y=l.Vr();var S=l.hv();g=y.getType()==197;var k=new u.l;if(y.A(k),!S||!(k.H<p.G||k.G>p.H))if(S)if(a.av(r,o,k.gk()-w,d),p=o,g)for(g=0;g<o;g++)k.contains(r[g])||(r[g].Rc(),p--);else for(l=u.ta.Hu(l.sc(),y),g=0;g<o;g++)(w=u.hd.Yd(y,r[g],l)!=0)||(r[g].Rc(),p--);else for(a.av(r,o,-w,d),p=o,l=u.ta.Hu(l.sc(),y),g=0;g<o;g++)(w=r[g]).isNaN()&&p--,S=a.tE(w.x,k.v,k.C,d),w.x+=S,(w=u.hd.Yd(y,w,l)!=0)&&(r[g].Rc(),p--)}}},a.Hp=function(r,o,l,d,p,g,y,w){var S=r.getType(),k=o+l;if(S===33){var C=(d=p?r:r.Of()).Lg();return(C<o||C>=k||y&&C==k)&&(C+=Math.ceil((o-C)/l)*l,C=u.O.Rk(C,o,k),d.cC(C)),d}if(r.B()||(C=new u.l,r.A(C),C.B()))return r;var O=new u.Nc;C.cn(O);var R=new u.Nc;if(R.K(o,k),R.contains(O))return r;if((k=new u.l).K(C),S===550){for(w=(d=p?r:r.Of()).ub(0),S=2*d.I(),k=!1,o=0;o<S;o+=2)((C=w.read(o))<R.oa||C>=R.va||y&&C==R.va)&&(k=!0,C+=Math.ceil((R.oa-C)/l)*l,C=R.It(C),w.write(o,C));return k&&d.Pc(1993),d}if(S==197)return l=p?r:r.Of(),C.Ea(k),l.Xo(C),l;var N=.1*Math.max(C.ca(),C.R());for(k.W(0,N),y=r,R=d.Xd(0),r=u.Gh.local(),p=new u.Dd;;){var j=Math.floor((O.oa-o)/l),G=Math.ceil((O.va-o)/l);if(!(3<G-j))break;j=Math.floor(.5*(G+j)),k.v=C.v-N,k.C=o+l*j;var D=u.ri.clip(y,k,R,g,w);k.v=k.C,k.C=C.C+N;var V=u.ri.clip(y,k,R,g,w);p.gg((j-G)*l,0),V.Oc(p),S==1736?y=r.V(D,V,d,null):(y=D).add(V,!1),y.A(C),C.cn(O)}for(k.v=o,k.C=o+l,(o=new u.l).K(k),o.W(R,0),(o=Math.floor((C.v-k.v)/l)*l)!=0?(k.move(o,0),p.gg(-o,0)):p.RB(),o=S==1607?new u.Ta(y.description):new u.Da(y.description),g=new u.l,O=new u.l;C.C>k.v;)(N=u.ri.clip(y,k,R,0,w)).A(O),(S==1607?!N.B()&&(O.R()>R||O.ca()>R):!N.B()&&(S!=1736||O.R()>R))&&(N.Oc(p),N.A(O),o.A(g),g.W(R,R),g.isIntersecting(O)&&S==1736?o=r.V(o,N,d,null):o.add(N,!1)),k.move(l,0),p.shift(-l,0);return o},a.av=function(r,o,l,d){for(var p=l+d,g=0;g<o;g++){var y=r[g].x;l<=y&&y<p||!(y<l||y>p||y==p)||(y+=Math.ceil((l-y)/d)*d,y=u.O.Rk(y,l,p),r[g].x=y)}},a.Fn=function(r,o,l,d,p,g){if(!o.Wc())throw u.i.fa("fold_into_360_degree_range");if(r.B())return r;if(o.Sb()==2){l=o.pv();var y=o.ov()-l}else{var w=o.bf();y=360*w,l-=180*w}return a.Hp(r,l,y,o,d,p,!0,g)},a.qF=function(r,o,l,d){if(l.Sb()==2)d=l.pv(),l=l.ov()-d;else{var p=l.bf();l=360*p,d-=180*p}a.av(r,o,d,l)},a.lj=function(r,o){var l=o.Oe();if(r.getType()==33){var d=r.ih();return l.G<=d&&d<=l.H?r:r.Ia()}d=new u.l,r.A(d);var p=new u.l;return p.K(l),p.v=d.v,p.C=d.C,p.W(.01*p.ca(),0),l=u.ta.uy(o,d),p.contains(d)?r:u.ri.clip(r,p,l,0,null)},a.ir=function(r,o,l){return r>o.C&&r-o.C<l?o.C:r<o.v&&o.v-r<l?o.v:r},a.FX=function(r,o,l,d){d.x=a.ir(r.x,o,l),d.y=r.y},a.EX=function(r,o,l,d){for(var p=0;p<o;p++)r[p].y<l.G||r[p].y>l.H?r[p].Rc():r[p].x=a.ir(r[p].x,l,d)},a.Jt=function(r,o,l,d){if(!r.B()){var p=r.getType();if(!d||p!=1736)if(u.aa.xj(p)){d=r.ub(0),p=0;for(var g=r.I();p<g;p++){var y=d.read(2*p),w=a.ir(y,o,l);w!=y&&d.write(2*p,w)}r.Pc(1993)}else if(p==197)d=new u.l,r.A(d),d.v=a.ir(d.v,o,l),d.C=a.ir(d.C,o,l),r.Xo(d);else{if(p!=33)throw u.i.fa("internal error");r.cC(a.ir(r.Lg(),o,l))}}},a.uS=function(r,o,l,d){var p=new u.gd,g=p.Ib(r);return r=u.ta.Hu(o,r),a.ks(p,g,o,r,l,!0,d),p.Ne(g)},a.ks=function(r,o,l,d,p,g,y){if(!l.Wc())throw u.i.N("invalid call");var w=l.Oe(),S=l.sc(),k=S.eh().getDatum().getSpheroid();S=S.Hd().ai;var C=k.getFlattening();k=k.getAxis(),C*=2-C;var O=new u.Nc;w.cn(O);var R=null,N=[[0,0],[0,0]];if(l.Sb()==2?(R=l.eh(),g?(N[0][0]=a.Zm(y,O),N[0][1]=w.Jp(),u.ej.projToGeog(R,1,N),w=N[0][0]*S):(N[0][0]=w.gk(),N[0][1]=y,u.ej.projToGeog(R,1,N),w=N[0][1]*S)):w=y*S,!g&&w!=0&&p!=c.GreatElliptic)throw u.i.fa("invalid argument");var j=new u.ga,G=[0],D=new u.h,V=new u.h,Z=new u.h,q=[null,null],ne=new u.h,ee=new u.h,he=new u.h,ye=new u.h;for(o=r.Ob(o);o!=-1;o=r.Rb(o)){var ge=r.Xa(o);r.D(ge,ne);for(var Le=!1,Te=ge=r.U(ge);Te!=-1;Te=r.U(Te)){if(Te==ge){if(Le)break;Le=!0}if(r.D(Te,ee),g&&(d<y-ne.x&&ee.x-y>d||d<y-ee.x&&ne.x-y>d)||!g&&(y!=0||d<-ne.y&&ee.y>d||d<-ee.y&&ne.y>d))do if(!(Math.abs(ne.x-ee.x)>=.5*O.R())){if(l.Sb()==2?(N[0][0]=a.Zm(ne.x,O),N[0][1]=ne.y,N[1][0]=a.Zm(ee.x,O),N[1][1]=ee.y,u.ej.projToGeogCenter(R,2,N,0),he.x=N[0][0]*S,he.y=N[0][1]*S,ye.y=N[1][1]*S):(he.x=ne.x*S,he.y=ne.y*S,ye.y=ee.y*S),ye.x=2*(ee.x-ne.x)*Math.PI/O.R()+he.x,g){if(V.x=w,V.y=a.Nz(k,C,he,ye,w,p),isNaN(V.y))break;q[0]=V;var Je=1}else if(p==c.GreatElliptic){var We=[0,0];if((Je=u.Ox.Oz(C,he,ye,w,We))==0)break;V.x=We[0],V.y=w,q[0]=V,Je==2&&(Z.x=We[1],Z.y=w,q[1]=Z)}else{if(V.x=a.Lz(k,C,he,ye,p),isNaN(V.x))break;V.y=0,q[0]=V,Je=1}var Oe=-1;for(We=0;We<Je;We++){u.kb.wd(k,C,he.x,he.y,ye.x,ye.y,j,null,null,p);var Dt=j.u;u.kb.wd(k,C,he.x,he.y,q[We].x,q[We].y,j,null,null,p);var Ri=j.u;if(l.Sb()==2?(N[0][0]=q[We].x/S,N[0][1]=q[We].y/S,u.ej.geogToProj(R,1,N),g?(D.y=N[0][1],D.x=y):(D.x=a.os(N[0][0],ne.x,ee.x,O),D.y=y)):g?(D.x=y,D.y=q[We].y/S):(D.x=a.os(q[We].x/S,ne.x,ee.x,O),D.y=y),G[0]=0<Dt?u.O.Rk(Ri/Dt,0,1):.5,G[0]==0||G[0]==1)break;Oe>G[0]||(Oe=r.Ma(Te),r.Ul(Oe,G,1),r.Cb(r.U(Oe),D.x,D.y),Oe=G[0])}}while(!1);ne.L(ee)}}},a.Zm=function(r,o){var l=o.va-o.oa;return o.It(r-Math.floor((r-o.oa)/l)*l)},a.os=function(r,o,l,d){var p=new u.Nc;for(p.K(o,l),l=d.R(),r=Math.floor((r-o)/l)*l+r,p=p.sf();Math.abs(r-p)>Math.abs(r+l-p);)r+=l;return r},a.Sn=function(r,o,l){return r=u.qr.Cp(r),o=u.qr.mx(r,u.qr.Cp(o)),(l=u.qr.mx(r,u.qr.Cp(l)))==0||0<o&&0<l&&l<=o||0>o&&0>l&&l>=o},a.Nz=function(r,o,l,d,p,g){if(g==c.GreatElliptic)return u.Ox.SS(o,l,d,p);if(Math.abs(l.x-d.x)>=Math.PI||!a.Sn(l.x,d.x,p))return NaN;if(l.x>d.x)var y=d;else y=l,l=d;d=new u.ga;var w=new u.ga,S=new u.ga;u.kb.wd(r,o,y.x,y.y,l.x,l.y,w,d,null,g);var k=w.u,C=0,O=1,R=new u.h;for(R.L(y);k*(O-C)>1e-12*r;){var N=.5*(C+O);if(u.kb.oj(r,o,y.x,y.y,k*N,d.u,w,S,g),R.x=w.u,R.y=S.u,R.x==p)break;if(a.Sn(y.x,R.x,p))O=N;else{if(!a.Sn(l.x,R.x,p))return NaN;C=N}}return R.y},a.Lz=function(r,o,l,d,p){if(p==c.GreatElliptic)return r=[0,0],u.Ox.Oz(o,l,d,0,r),r[0];if(l.y>d.y)var g=d;else g=l,l=d;if((d=new u.Nc).K(g.y,l.y),!d.contains(0)||Math.abs(g.x-l.x)>=Math.PI)return NaN;if(g.x==l.x)return g.x;var y=new u.ga,w=new u.ga,S=new u.ga;u.kb.wd(r,o,g.x,g.y,l.x,l.y,w,y,null,p);var k=w.u,C=0,O=1,R=new u.h;for(R.L(g);k*(O-C)>1e-12*r;){var N=.5*(C+O);if(u.kb.oj(r,o,g.x,g.y,k*N,y.u,w,S,p),R.x=w.u,R.y=S.u,d.K(g.y,R.y),R.y==0)break;if(d.contains(0))O=N;else{if(d.K(l.y,R.y),!d.contains(0))return NaN;C=N}}return R.x},a.WI=function(r,o,l,d){if(!r.ef.Wc())return!1;var p=new u.de(o.description);if(p.Fd(o,0,-1),d=u.Hx.local().V(p,r,d),p=o.I(),l.Oa(),p!=d.I())return!1;var g=new u.l;o.A(g);var y=new u.l;if(d.A(y),g=g.R(),y=y.R(),g!=0&&y!=0){if(y/=g,r=r.Yf.gh().R()/r.ef.gh().R(),1e-10<Math.abs(y/r-1))return!1}else if(g!=0||y!=0)return!1;for(l.add(o,!1),o=new u.h,r=0;r<p;r++)d.D(r,o),l.Cb(r,o);return!0},a.qN=function(r,o){return(r%=360*o)>=180*o&&(r-=360*o),r},a.UI=function(r,o,l,d){if(l==A.Clip){var p=o.ml();p.getType()==197?(l=new u.l,p.A(l),p=u.ta.uy(o,l),r=u.ri.clip(r,l,p,5e4*o.pm(),d)):u.dj.local().V(1,p,r,o,d)||(r=u.Xj.local().V(r,p,o,d))==p&&(r=u.Vk.jg(r))}else o.Wc()&&(d=new u.l,r.xc(d),o.Oe().contains(d)||(a.Jt(r,o.Oe(),o.Xd(0),!0),l==A.PannableFold&&(r=a.lj(r,o)),r=a.Fn(r,o,0,!0,1e5*o.pm(),null)));return r},a.XD=function(r,o,l){var d=o.Wr();if(d==null)return r;var p=(o=o.sc()).Oe().R(),g=new u.l;r.xc(g);var y=new u.Nc;g.cn(y),g=d.Ga(),d=null;for(var w=new u.Dd;g.$a();)for(;g.Ha();){var S=g.ha(),k=S.Tg(0,0),C=new u.Nc;for(C.K(k.oa,k.va),k=0;C.va>y.oa;)C.move(-p),--k;for(;C.oa<=y.va;){if(C.isIntersecting(y)){d==null&&(d=new u.Ta);var O=u.yb.cP(S.ac(),S.wc());k!=0&&(w.gg(k*p,0),O.Oc(w)),d.oc(O,!0)}C.move(p),++k}}return d!=null?(o=u.ta.gO(o,d),o=u.ta.Er(o),u.$t.lP(r,d,o,l)):r},a.eO=function(r,o,l,d,p){return r>=l&&o<=d?0:a.tE(.5*(o+r),l,d,p)},a.tE=function(r,o,l,d){return u.lc.round((.5*(l+o)-r)/d)*d},a.VQ=function(r,o,l,d,p,g,y,w){var S=a.dv(d,p),k=S.R(),C=k/360,O=a.pE*C,R=r.ub(0),N=o.Wc(),j=N?k/o.Oe().R():0;o=r.Ia();for(var G=0,D=l.da();G<D;++G){var V=N,Z=new u.Ta(l.description);Z.addPath(l,G,!0);var q=l.dc(G);y!=0&&(q=a.PD(q,Z,S.H-w,S.H,y))&&(V=!1);var ne=-1;q=Z.I();var ee=!1;V&&(ne=r.Ba(G),ee=r.dc(G));var he=Z.ub(0),ye=0,ge=he.read(0),Le=0,Te=3*d.Xd(0),Je=!1,We=new u.h;We.Rc();var Oe=new u.h;Oe.Rc();for(var Dt=!1,Ri=1;Ri<q;++Ri){var Gt=u.h.construct(he.eg(2*Ri),he.eg(2*Ri+1)),bt=Gt.x,wt=bt+ye,ot=wt-ge;if(Gt.x=wt,Math.abs(ot)>O){if(V){var Xt=ne+Ri-1,rt=ne;(!ee||Ri+1<q)&&(rt+=Ri),Xt=R.read(2*Xt),rt=(R.read(2*rt)-Xt)*j,Math.abs(ot-rt)>1*C&&(N=!1)}V||(wt=bt+(ye-=u.lc.Cn(k,wt-ge)),++Le,Dt=ye!=0,Gt.x=wt)}else Je||u.ta.AG(We,Oe,Gt,Te)&&(Je=!0);Dt&&he.write(2*Ri,wt),ge=wt,We.L(Oe),Oe.L(Gt)}Le!=0&&Z.Pc(1993),V=Z.Na(0),q=Z.Na(q-1),u.h.tb(V,q),Z=a.wQ(Z,d,isNaN(p)?0:p,g),o.add(Z,!1)}return r=d.Xd(0),l=S.R()/180,a.Jt(o,S,.1*r,!1),u.ri.clip(o,S,r,l,g)},a.wQ=function(r,o,l,d){return a.Fn(r,o,l,!0,0,d)},a.OS=function(r,o,l,d){var p=r.getType();if(p==1736)for(o=o!=null?o.Xd(0):0,p=0;p<d;p++)u.hd.Yd(r,l[p],o)!=1&&l[p].Rc();else{if(p!=197)throw u.i.N();for(p=0;p<d;p++)r.dP(l[p])||l[p].Rc()}},a.$k=function(r,o,l,d){if(32>l)for(var p=new u.Sa,g=0;g<l;g++)p.Cb(o[g]),r.$k(p,d).D(o[g]);else{var y=new u.de;for(y.re(3),y.HD(o,l),p=y.ub(3),g=0;g<l;g++)p.write(g,g);for(g=r.$k(y,d),r=g.ub(0),p=g.ub(3),d=u.h.construct(NaN,NaN),y=0;y<l;y++)o[y]=d;for(l=g.I(),g=0;g<l;g++)d=p.read(g),r.tc(2*g,o[d])}},a.Zk=function(r,o,l,d){if(32>l)for(var p=new u.Sa,g=0;g<l;g++)p.Cb(o[g]),r.Zk(p,d).D(o[g]);else{var y=new u.de;for(y.re(3),y.HD(o,l),p=y.ub(3),g=0;g<l;g++)p.write(g,g);for(g=r.Zk(y,d),r=g.ub(0),p=g.ub(3),d=u.h.construct(NaN,NaN),y=0;y<l;y++)o[y]=d;for(l=g.I(),g=0;g<l;g++)d=p.read(g),r.tc(2*g,o[d])}},a.pE=210,a}()}(B||(B={})),function(u){var A;(A=u.UL||(u.UL={}))[A.rightSide=1]="rightSide";var b=function(){function c(a,r,o){this.Bs=new u.h,a===void 0?this.Io=-1:(this.Bs.L(a),this.Io=r,this.Ka=o,this.nw=0)}return c.prototype.WJ=function(a){this.nw=a?1|this.nw:-2&this.nw},c.prototype.B=function(){return 0>this.Io},c.prototype.fz=function(){if(this.B())throw u.i.fa("invalid call");return new u.Sa(this.Bs.x,this.Bs.y)},c.prototype.Ua=function(){if(this.B())throw u.i.fa("invalid call");return this.Io},c.prototype.hz=function(){if(this.B())throw u.i.fa("invalid call");return this.Ka},c.prototype.Sz=function(){return!!(1&this.nw)},c.prototype.ey=function(a,r,o,l){this.Bs.x=a,this.Bs.y=r,this.Io=o,this.Ka=l},c}();u.$l=b}(B||(B={})),function(u){var A=function(){function c(){}return c.prototype.Uo=function(a,r){if(this.th.resize(0),this.Ii.length=0,this.tk=-1,a.xc(this.Ek),this.Ek.W(r,r),this.Ek.isIntersecting(this.Fb.Ca)){var o=a.getType();(this.vs=u.aa.yd(o))?(this.TH=a.ac(),this.SH=a.wc(),this.qa=r):this.qa=NaN,this.th.add(this.Fb.kf),this.Ii.push(this.Fb.Ca),this.Qs=this.Fb.Ur(this.Fb.kf)}else this.Qs=-1},c.prototype.Xi=function(a,r){this.th.resize(0),this.Ii.length=0,this.tk=-1,this.Ek.K(a),this.Ek.W(r,r),this.qa=NaN,this.Ek.isIntersecting(this.Fb.Ca)?(this.th.add(this.Fb.kf),this.Ii.push(this.Fb.Ca),this.Qs=this.Fb.Ur(this.Fb.kf),this.vs=!1):this.Qs=-1},c.prototype.next=function(){if(this.th.size==0)return-1;this.tk=this.Qs;var a=null,r=null,o=null,l=null;this.vs&&(a=new u.h,r=new u.h,o=new u.l);for(var d=!1;!d;){for(;this.tk!=-1;){var p=this.Fb.bz(this.Fb.fv(this.tk));if(p.isIntersecting(this.Ek)){if(!this.vs){d=!0;break}if(a.L(this.TH),r.L(this.SH),o.K(p),o.W(this.qa,this.qa),0<o.zy(a,r)){d=!0;break}}this.tk=this.Fb.nv(this.tk)}if(this.tk==-1){p=this.th.Fc();var g=this.Ii[this.Ii.length-1];for(l==null&&((l=[])[0]=new u.l,l[1]=new u.l,l[2]=new u.l,l[3]=new u.l),b.EJ(g,l),this.th.If(),--this.Ii.length,g=0;4>g;g++){var y=this.Fb.Lp(p,g);if(y!=-1&&0<this.Fb.WR(y)&&l[g].isIntersecting(this.Ek))if(this.vs){if(a.L(this.TH),r.L(this.SH),o.K(l[g]),o.W(this.qa,this.qa),0<o.zy(a,r)){var w=new u.l;w.K(l[g]),this.th.add(y),this.Ii.push(w)}}else(w=new u.l).K(l[g]),this.th.add(y),this.Ii.push(w)}if(this.th.size==0)return-1;this.tk=this.Fb.Ur(this.th.get(this.th.size-1))}}return this.Qs=this.Fb.nv(this.tk),this.tk},c.bP=function(a,r,o){var l=new c;return l.Fb=a,l.Ek=new u.l,l.th=new u.ia(0),l.Ii=[],l.Uo(r,o),l},c.aP=function(a,r,o){var l=new c;return l.Fb=a,l.Ek=new u.l,l.th=new u.ia(0),l.Ii=[],l.Xi(r,o),l},c.$O=function(a){var r=new c;return r.Fb=a,r.Ek=new u.l,r.th=new u.ia(0),r.Ii=[],r},c}();u.GY=A;var b=function(){function c(a,r){this.jf=new u.$c(11),this.Zh=new u.$c(5),this.ws=[],this.gw=new u.ia(0),this.Ca=new u.l,this.Nk(a,r)}return c.prototype.reset=function(a,r){this.jf.mj(!1),this.Zh.mj(!1),this.ws.length=0,this.gw.clear(!1),this.Nk(a,r)},c.prototype.vj=function(a,r){return this.zv(a,r,0,this.Ca,this.kf,!1,-1)},c.prototype.Jz=function(a,r,o){o=o==-1?this.kf:this.WF(o);var l=this.ca(o),d=this.oR(o);return this.zv(a,r,l,d,o,!1,-1)},c.prototype.ja=function(a){return this.jR(a)},c.prototype.GF=function(a){return this.bz(this.fv(a))},c.prototype.ca=function(a){return this.jv(a)},c.prototype.oR=function(a){var r=new u.l;r.K(this.Ca);var o=this.jv(a);a=this.QF(a);for(var l=0;l<2*o;l+=2){var d=u.O.truncate(3&a>>l);d==0?(r.v=.5*(r.v+r.C),r.G=.5*(r.G+r.H)):d==1?(r.C=.5*(r.v+r.C),r.G=.5*(r.G+r.H)):(d==2?r.C=.5*(r.v+r.C):r.v=.5*(r.v+r.C),r.H=.5*(r.G+r.H))}return r},c.prototype.WR=function(a){return this.Az(a)},c.prototype.vR=function(a,r){return A.bP(this,a,r)},c.prototype.MF=function(a,r){return A.aP(this,a,r)},c.prototype.getIterator=function(){return A.$O(this)},c.prototype.Nk=function(a,r){if(0>r||32<2*r)throw u.i.N("invalid height");this.BT=r,this.Ca.K(a),this.kf=this.jf.Ce(),this.jx(this.kf,0),this.ax(this.kf,0),this.NJ(this.kf,0),this.KJ(this.kf,0)},c.prototype.zv=function(a,r,o,l,d,p,g){if(!l.contains(r))return o==0?-1:this.zv(a,r,0,this.Ca,this.kf,p,g);if(!p)for(var y=d;y!=-1;y=this.IR(y))this.jx(y,this.Az(y)+1);(y=new u.l).K(l),l=d;var w=[];for(w[0]=new u.l,w[1]=new u.l,w[2]=new u.l,w[3]=new u.l;o<this.BT&&this.iO(l);o++){c.EJ(y,w);for(var S=!1,k=0;4>k;k++)if(w[k].contains(r)){S=!0;var C=this.Lp(l,k);C==-1&&(C=this.rP(l,k)),this.jx(C,this.Az(C)+1),l=C,y.K(w[k]);break}if(!S)break}return this.sS(a,r,o,y,l,p,d,g)},c.prototype.sS=function(a,r,o,l,d,p,g,y){var w=this.NF(d);if(p){if(d==g)return y;this.SP(y),p=y}else p=this.tP(),this.NB(p,a),this.KW(this.fv(p),r);return this.mX(p,d),w!=-1?(this.hx(p,w),this.bx(w,p)):this.GJ(d,p),this.SB(d,p),this.ax(d,this.lv(d)+1),this.hO(d)&&this.MQ(o,l,d),p},c.prototype.SP=function(a){var r=this.WF(a),o=this.NF(r),l=this.OR(a),d=this.nv(a);this.Ur(r)==a?(d!=-1?this.hx(d,-1):this.SB(r,-1),this.GJ(r,d)):o==a?(this.bx(l,-1),this.SB(r,l)):(this.hx(d,l),this.bx(l,d)),this.hx(a,-1),this.bx(a,-1),this.ax(r,this.lv(r)-1)},c.EJ=function(a,r){var o=.5*(a.v+a.C),l=.5*(a.G+a.H);r[0].K(o,l,a.C,a.H),r[1].K(a.v,l,o,a.H),r[2].K(a.v,a.G,o,l),r[3].K(o,a.G,a.C,l)},c.prototype.hO=function(a){return this.lv(a)==8&&!this.gG(a)},c.prototype.MQ=function(a,r,o){var l=this.Ur(o);do{var d=this.fv(l),p=this.Zh.T(l,0);d=this.bz(d),this.zv(p,d,a,r,o,!0,l),l=p=this.nv(l)}while(l!=-1)},c.prototype.iO=function(a){return 8<=this.lv(a)||this.gG(a)},c.prototype.gG=function(a){return this.Lp(a,0)!=-1||this.Lp(a,1)!=-1||this.Lp(a,2)!=-1||this.Lp(a,3)!=-1},c.prototype.rP=function(a,r){var o=this.jf.Ce();return this.OW(a,r,o),this.jx(o,0),this.ax(o,0),this.Pk(o,a),this.KJ(o,this.jv(a)+1),this.NJ(o,r<<2*this.jv(a)|this.QF(a)),o},c.prototype.tP=function(){var a=this.Zh.Ce();if(0<this.gw.size){var r=this.gw.Fc();this.gw.If()}else r=this.ws.length,this.ws.push(new u.l);return this.LW(a,r),a},c.prototype.Lp=function(a,r){return this.jf.T(a,r)},c.prototype.OW=function(a,r,o){this.jf.S(a,r,o)},c.prototype.Ur=function(a){return this.jf.T(a,4)},c.prototype.GJ=function(a,r){this.jf.S(a,4,r)},c.prototype.NF=function(a){return this.jf.T(a,5)},c.prototype.SB=function(a,r){this.jf.S(a,5,r)},c.prototype.QF=function(a){return this.jf.T(a,6)},c.prototype.NJ=function(a,r){this.jf.S(a,6,r)},c.prototype.lv=function(a){return this.jf.T(a,7)},c.prototype.Az=function(a){return this.jf.T(a,8)},c.prototype.ax=function(a,r){this.jf.S(a,7,r)},c.prototype.jx=function(a,r){this.jf.S(a,8,r)},c.prototype.IR=function(a){return this.jf.T(a,9)},c.prototype.Pk=function(a,r){this.jf.S(a,9,r)},c.prototype.jv=function(a){return this.jf.T(a,10)},c.prototype.KJ=function(a,r){this.jf.S(a,10,r)},c.prototype.jR=function(a){return this.Zh.T(a,0)},c.prototype.NB=function(a,r){this.Zh.S(a,0,r)},c.prototype.OR=function(a){return this.Zh.T(a,1)},c.prototype.nv=function(a){return this.Zh.T(a,2)},c.prototype.hx=function(a,r){this.Zh.S(a,1,r)},c.prototype.bx=function(a,r){this.Zh.S(a,2,r)},c.prototype.WF=function(a){return this.Zh.T(a,3)},c.prototype.mX=function(a,r){this.Zh.S(a,3,r)},c.prototype.fv=function(a){return this.Zh.T(a,4)},c.prototype.LW=function(a,r){this.Zh.S(a,4,r)},c.prototype.bz=function(a){return this.ws[a]},c.prototype.KW=function(a,r){this.ws[a].K(r)},c}();u.du=b}(B||(B={})),function(u){var A;(A=u.aL||(u.aL={}))[A.Outside=0]="Outside",A[A.Inside=1]="Inside",A[A.Border=2]="Border";var b=function(){function a(r,o){this.PT=o,this.Vh=r}return a.prototype.setColor=function(r,o){this.iH!=o&&r.flush(),this.iH=o},a.prototype.gF=function(r,o){for(var l=0;l<o;)for(var d=r[l++],p=r[l++],g=r[l++]*this.PT;d<p;d++)this.Vh[g+(d>>4)]|=this.iH<<2*(15&d)},a}();u.HY=b;var c=function(){function a(r,o,l){this.Vh=null,this.SA=this.Ik=this.cI=this.aI=this.Es=this.qH=this.Gf=this.Um=0,this.Ri=this.Jk=this.vl=null,this.Fz(r,o,l)}return a.create=function(r,o,l){if(!a.zE(r))throw u.i.N();return a.wP(r,o,l)},a.pW=function(r){switch(r){case 0:r=1024;break;case 1:r=16384;break;case 2:r=262144;break;default:throw u.i.fa("Internal Error")}return r},a.zE=function(r){return!(r.B()||r.getType()!=1607&&r.getType()!=1736)},a.prototype.rQ=function(r,o){o=o.Ga();for(var l=new u.h,d=new u.h;o.$a();)for(;o.Ha();){var p=o.ha();if(p.getType()!=322)throw u.i.fa("Internal Error");r.Eh(p.ac(),l),r.Eh(p.wc(),d),this.Ri.jy(l.x,l.y,d.x,d.y)}this.Ri.iJ(u.Px.Cx)},a.prototype.sQ=function(){throw u.i.fa("Internal Error")},a.prototype.Ry=function(r,o){for(var l=1;4>l;l++)r.jy(o[l-1].x,o[l-1].y,o[l].x,o[l].y);r.jy(o[3].x,o[3].y,o[0].x,o[0].y),this.Ri.iJ(u.Px.Cx)},a.prototype.rK=function(r,o,l){for(var d=[null,null,null,null],p=0;p<d.length;p++)d[p]=new u.h;o=o.Ga(),l=this.Jk.dY(l)+1.5,p=new u.h;for(var g=new u.h,y=new u.h,w=new u.h,S=new u.h,k=new u.l,C=new u.h;o.$a();){var O=!1,R=!0;for(C.ma(0,0);o.Ha();){var N=o.ha();if(w.x=N.sa,w.y=N.na,S.x=N.pa,S.y=N.la,k.Oa(),k.Zb(w.x,w.y),k.Lk(S.x,S.y),this.vl.HG(k)){this.Jk.Eh(S,S),R?(this.Jk.Eh(w,w),C.L(w),R=!1):w.L(C),p.uc(S,w);var j=.5>(N=p.length());N==0?p.ma(1,0):(j||C.L(S),p.scale(l/N),g.ma(-p.y,p.x),y.ma(p.y,-p.x),w.sub(p),S.add(p),d[0].add(w,g),d[1].add(w,y),d[2].add(S,y),d[3].add(S,g),j?O=!0:this.Ry(r,d))}else O&&(this.Ry(r,d),O=!1),R=!0}O&&this.Ry(r,d)}},a.prototype.sC=function(r){return u.O.truncate(r*this.qH+this.aI)},a.prototype.tC=function(r){return u.O.truncate(r*this.Es+this.cI)},a.wP=function(r,o,l){return new a(r,o,l)},a.prototype.Fz=function(r,o,l){this.Gf=Math.max(u.O.truncate(2*Math.sqrt(l)+.5),64),this.Um=u.O.truncate((2*this.Gf+31)/32),this.vl=new u.l,this.Ik=o,l=0;for(var d=this.Gf,p=this.Um;8<=d;)l+=d*p,d=u.O.truncate(d/2),p=u.O.truncate((2*d+31)/32);this.Vh=u.O.lg(l,0),this.Ri=new u.Px,l=new b(this.Vh,this.Um,this),this.Ri.AX(this.Gf,this.Gf,l),r.A(this.vl),this.vl.W(o,o),d=new u.l;var g=o*(p=u.l.construct(1,1,this.Gf-2,this.Gf-2)).R();switch(o*=p.ca(),d.K(this.vl.sf(),Math.max(g,this.vl.R()),Math.max(o,this.vl.ca())),this.SA=this.Ik,this.Jk=new u.Dd,this.Jk.pS(d,p),new u.Dd,r.getType()){case 550:l.setColor(this.Ri,2),this.sQ();break;case 1607:l.setColor(this.Ri,2),this.rK(this.Ri,r,this.SA);break;case 1736:l.setColor(this.Ri,1),this.rQ(this.Jk,r),l.setColor(this.Ri,2),this.rK(this.Ri,r,this.SA)}this.qH=this.Jk.bb,this.Es=this.Jk.ab,this.aI=this.Jk.Gb,this.cI=this.Jk.Lb,this.XN()},a.prototype.XN=function(){this.Ri.flush();for(var r=0,o=this.Gf*this.Um,l=this.Gf,d=u.O.truncate(this.Gf/2),p=this.Um,g=u.O.truncate((2*d+31)/32);8<l;){for(l=0;l<d;l++)for(var y=2*l,w=2*l+1,S=0;S<d;S++){var k=2*S,C=2*S+1,O=k>>4;k=2*(15&k);var R=C>>4;C=2*(15&C);var N=this.Vh[r+p*y+O]>>k&3;N|=this.Vh[r+p*y+R]>>C&3,N|=this.Vh[r+p*w+O]>>k&3,N|=this.Vh[r+p*w+R]>>C&3,this.Vh[o+g*l+(S>>4)]|=N<<2*(15&S)}l=d,p=g,r=o,d=u.O.truncate(l/2),g=u.O.truncate((2*d+31)/32),o=r+p*l}},a.prototype.So=function(r,o){return this.vl.contains(r,o)?(r=this.sC(r),o=this.tC(o),0>r||r>=this.Gf||0>o||o>=this.Gf||(o=this.Vh[this.Um*o+(r>>4)]>>2*(15&r)&3)==0?0:o==1?1:2):0},a.prototype.Ro=function(r){if(!r.Ea(this.vl))return 0;var o=this.sC(r.v),l=this.sC(r.C),d=this.tC(r.G);if(r=this.tC(r.H),0>o&&(o=0),0>d&&(d=0),l>=this.Gf&&(l=this.Gf-1),r>=this.Gf&&(r=this.Gf-1),o>l||d>r)return 0;for(var p=Math.max(l-o,1)*Math.max(r-d,1),g=0,y=this.Um,w=this.Gf,S=0;;){if(32>p||16>w){for(p=d;p<=r;p++)for(var k=o;k<=l;k++)if(1<(S=this.Vh[g+y*p+(k>>4)]>>2*(15&k)&3))return 2;if(S==0)return 0;if(S==1)return 1}g+=y*w,w=u.O.truncate(w/2),y=u.O.truncate((2*w+31)/32),o=u.O.truncate(o/2),d=u.O.truncate(d/2),l=u.O.truncate(l/2),r=u.O.truncate(r/2),p=Math.max(l-o,1)*Math.max(r-d,1)}},a.prototype.RR=function(){return this.Gf*this.Um},a}();u.Nx=c}(B||(B={})),function(u){var A;(A=u.VL||(u.VL={}))[A.contains=1]="contains",A[A.within=2]="within",A[A.equals=3]="equals",A[A.disjoint=4]="disjoint",A[A.touches=8]="touches",A[A.crosses=16]="crosses",A[A.overlaps=32]="overlaps",A[A.unknown=0]="unknown",A[A.intersects=1073741824]="intersects";var b=function(){function a(){}return a.construct=function(r,o,l,d,p,g,y,w){var S=new a;return S.pw=r,S.Mm=o,S.Kj=l,S.Si=d,S.BH=p,S.SY=g,S.TY=y,S.UY=w,S},a}();u.Vt=function(){function a(){}return a.CD=function(r,o,l){if(a.wy(r)){var d=u.ta.kj(o,r,!1);o=!1,u.Uk.CE(r)&&(o=o||r.lu(d,l)),(d=r.getType())!=1736&&d!=1607||!u.Uk.AE(r)||l==0||(o=o||r.fj(l)),d!=1736&&d!=1607||!u.Uk.BE(r)||l==0||o||r.hM()}},a.wy=function(r){return u.Uk.CE(r)||u.Uk.AE(r)||u.Uk.BE(r)},a}();var c=function(){function a(){this.rh=[]}return a.zB=function(r,o,l,d,p){var g=r.getType(),y=o.getType();if(g==197){if(y==197)return a.tW(r,o,l,d);if(y==33)return d==2?d=1:d==1&&(d=2),a.hJ(o,r,l,d)}else if(g==33){if(y==197)return a.hJ(r,o,l,d);if(y==33)return a.vW(r,o,l,d)}if(r.B()||o.B())return d==4;var w=new u.l;r.A(w);var S=new u.l;o.A(S);var k=new u.l;if(k.K(w),k.Zb(S),l=u.ta.Wd(l,k,!1),a.dk(w,S,l))return d==4;switch(w=!1,u.Vk.yd(g)&&((g=new u.Ta(r.description)).oc(r,!0),r=g,g=1607),u.Vk.yd(y)&&((y=new u.Ta(o.description)).oc(o,!0),o=y,y=1607),g!=197&&y!=197?(r.Db()<o.Db()||g==33&&y==550)&&(d==2?d=1:d==1&&(d=2)):g!=1736&&y!=197&&(d==2?d=1:d==1&&(d=2)),g){case 1736:switch(y){case 1736:w=a.rt(r,o,l,d,p);break;case 1607:w=a.$m(r,o,l,d,p);break;case 33:w=a.qt(r,o,l,d);break;case 550:w=a.pt(r,o,l,d,p);break;case 197:w=a.GI(r,o,l,d,p)}break;case 1607:switch(y){case 1736:w=a.$m(o,r,l,d,p);break;case 1607:w=a.gB(r,o,l,d,p);break;case 33:w=a.tt(r,o,l,d,p);break;case 550:w=a.st(r,o,l,d,p);break;case 197:w=a.MI(r,o,l,d)}break;case 33:switch(y){case 1736:w=a.qt(o,r,l,d);break;case 1607:w=a.tt(o,r,l,d,p);break;case 550:w=a.lt(o,r,l,d)}break;case 550:switch(y){case 1736:w=a.pt(o,r,l,d,p);break;case 1607:w=a.st(o,r,l,d,p);break;case 550:w=a.ZA(r,o,l,d,p);break;case 33:w=a.lt(r,o,l,d);break;case 197:w=a.hI(r,o,l,d)}break;case 197:switch(y){case 1736:w=a.GI(o,r,l,d,p);break;case 1607:w=a.MI(o,r,l,d);break;case 550:w=a.hI(o,r,l,d)}}return w},a.tW=function(r,o,l,d){if(r.B()||o.B())return d==4;var p=new u.l,g=new u.l,y=new u.l;switch(r.A(p),o.A(g),y.K(p),y.Zb(g),r=u.ta.Wd(l,y,!1),d){case 4:return a.dk(p,g,r);case 2:return a.jF(g,p,r);case 1:return a.jF(p,g,r);case 3:return a.ek(p,g,r);case 8:return a.cQ(p,g,r);case 32:return a.bQ(p,g,r);case 16:return a.aQ(p,g,r)}return!1},a.hJ=function(r,o,l,d){if(r.B()||o.B())return d==4;r=r.D();var p=new u.l,g=new u.l;switch(o.A(p),g.K(r),g.Zb(p),o=u.ta.Wd(l,g,!1),d){case 4:return a.Rw(r,p,o);case 2:return a.eB(r,p,o);case 1:return a.RU(r,p,o);case 3:return a.vI(r,p,o);case 8:return a.dB(r,p,o)}return!1},a.vW=function(r,o,l,d){if(r.B()||o.B())return d==4;r=r.D(),o=o.D();var p=new u.l;switch(p.K(r),p.Zb(o),l=u.ta.Wd(l,p,!1),d){case 4:return a.SU(r,o,l);case 2:return a.uI(o,r,l);case 1:return a.uI(r,o,l);case 3:return a.wI(r,o,l)}return!1},a.rt=function(r,o,l,d,p){switch(d){case 4:return a.kV(r,o,l);case 2:return a.Sw(o,r,l,p);case 1:return a.Sw(r,o,l,p);case 3:return a.nV(r,o,l);case 8:return a.vV(r,o,l);case 32:return a.qV(r,o,l,p)}return!1},a.$m=function(r,o,l,d,p){switch(d){case 4:return a.lV(r,o,l);case 1:return a.fB(r,o,l,p);case 8:return a.wV(r,o,l,p);case 16:return a.gV(r,o,l)}return!1},a.qt=function(r,o,l,d){switch(d){case 4:return a.jV(r,o,l);case 1:return a.dV(r,o,l);case 8:return a.uV(r,o,l)}return!1},a.pt=function(r,o,l,d){switch(d){case 4:return a.iV(r,o,l);case 1:return a.cV(r,o,l);case 8:return a.tV(r,o,l);case 16:return a.fV(r,o,l)}return!1},a.GI=function(r,o,l,d,p){if(a.hV(r,o,l))return d==4;if(d==4)return!1;switch(d){case 2:return a.xV(r,o,l);case 1:return a.bV(r,o,l);case 3:return a.mV(r,o,l);case 8:return a.sV(r,o,l,p);case 32:return a.pV(r,o,l,p);case 16:return a.eV(r,o,l,p)}return!1},a.gB=function(r,o,l,d){switch(d){case 4:return a.GV(r,o,l);case 2:return a.KI(o,r,l);case 1:return a.KI(r,o,l);case 3:return a.IV(r,o,l);case 8:return a.NI(r,o,l);case 32:return a.MV(r,o,l);case 16:return a.LI(r,o,l)}return!1},a.tt=function(r,o,l,d){switch(d){case 4:return a.FV(r,o,l);case 1:return a.AV(r,o,l);case 8:return a.QV(r,o,l)}return!1},a.st=function(r,o,l,d){switch(d){case 4:return a.EV(r,o,l);case 1:return a.zV(r,o,l);case 8:return a.PV(r,o,l);case 16:return a.CV(r,o,l)}return!1},a.MI=function(r,o,l,d){if(a.DV(r,o,l))return d==4;if(d==4)return!1;switch(d){case 2:return a.RV(r,o,l);case 1:return a.yV(r,o,l);case 3:return a.HV(r,o,l);case 8:return a.OV(r,o,l);case 32:return a.LV(r,o,l);case 16:return a.BV(r,o,l)}return!1},a.ZA=function(r,o,l,d){switch(d){case 4:return a.gU(r,o,l);case 2:return a.eI(o,r,l);case 1:return a.eI(r,o,l);case 3:return a.iU(r,o,l);case 32:return a.oU(r,o,l)}return!1},a.lt=function(r,o,l,d){switch(d){case 4:return a.fI(r,o,l);case 2:return a.sU(r,o,l);case 1:return a.dU(r,o,l);case 3:return a.Nw(r,o,l)}return!1},a.hI=function(r,o,l,d){switch(d){case 4:return a.fU(r,o,l);case 2:return a.rU(r,o,l);case 1:return a.cU(r,o,l);case 3:return a.hU(r,o,l);case 8:return a.qU(r,o,l);case 16:return a.eU(r,o,l)}return!1},a.nV=function(r,o,l){var d=new u.l,p=new u.l;return r.A(d),o.A(p),!!a.ek(d,p,l)&&(d=a.qc(r,o,!1))!=4&&d!=1&&d!=2&&(!!a.dI(r,o,l)||(d=r.Qb(),p=o.Qb(),!(Math.abs(d-p)>4*Math.max(r.I(),o.I())*l)&&a.Wz(r,o,l,!0)))},a.kV=function(r,o,l){var d=a.qc(r,o,!0);return d==4||d!=1&&d!=2&&d!=1073741824&&a.EI(r,o,l)},a.vV=function(r,o,l){var d=a.qc(r,o,!1);return d!=4&&d!=1&&d!=2&&a.II(r,o,l,null)},a.qV=function(r,o,l,d){var p=a.qc(r,o,!1);return p!=4&&p!=1&&p!=2&&a.FI(r,o,l,d)},a.Sw=function(r,o,l,d){var p=new u.l,g=new u.l;return r.A(p),o.A(g),!!a.zc(p,g,l)&&(p=a.qc(r,o,!1))!=4&&p!=2&&(p==1||a.BI(r,o,l,d))},a.lV=function(r,o,l){var d=a.qc(r,o,!0);return d==4||d!=1&&d!=1073741824&&a.EI(r,o,l)},a.wV=function(r,o,l,d){var p=a.qc(r,o,!1);return p!=4&&p!=1&&a.JI(r,o,l,d)},a.gV=function(r,o,l){var d=a.qc(r,o,!1);return d!=4&&d!=1&&a.DI(r,o,l,null)},a.fB=function(r,o,l,d){var p=new u.l,g=new u.l;return r.A(p),o.A(g),!!a.zc(p,g,l)&&(p=a.qc(r,o,!1))!=4&&(p==1||a.CI(r,o,l,d))},a.jV=function(r,o,l){return u.hd.KG(r,o,l)==0},a.uV=function(r,o,l){return o=o.D(),a.HI(r,o,l)},a.dV=function(r,o,l){return o=o.D(),a.AI(r,o,l)},a.iV=function(r,o,l){var d=a.qc(r,o,!1);if(d==4)return!0;if(d==1)return!1;d=new u.l,r.A(d),d.W(l,l);for(var p=new u.h,g=0;g<o.I();g++)if(o.D(g,p),d.contains(p)){var y=u.hd.Yd(r,p,l);if(y==1||y==2)return!1}return!0},a.tV=function(r,o,l){var d=this.qc(r,o,!1);if(d==4||d==1)return!1;d=new u.l,r.A(d),d.W(l,l);for(var p=!1,g=r,y=!1,w=0;w<o.I();w++){var S=o.Na(w);if(d.contains(S)){if((S=u.hd.Yd(g,S,l))==2)p=!0;else if(S==1)return!1}y||(!u.Dg.Ml(r,o.I()-1)||r.Bb!=null&&r.Bb.Fb!=null?g=r:(g=new u.Da,r.copyTo(g),g.fj(1)),y=!0)}return!!p},a.fV=function(r,o,l){var d=this.qc(r,o,!1);if(d==4||d==1)return!1;var p=new u.l;d=new u.l;var g=new u.l;r.A(p),o.A(g),d.K(p),d.W(l,l),g=p=!1;for(var y=r,w=!1,S=0;S<o.I();S++){var k=o.Na(S);if(d.contains(k)?(k=u.hd.Yd(y,k,l))==0?g=!0:k==1&&(p=!0):g=!0,p&&g)return!0;w||(!u.Dg.Ml(r,o.I()-1)||r.Bb!=null&&r.Bb.Fb!=null?y=r:(y=new u.Da,r.copyTo(y),y.fj(1)),w=!0)}return!1},a.cV=function(r,o,l){var d=new u.l,p=new u.l;if(r.A(d),o.A(p),!this.zc(d,p,l)||(p=this.qc(r,o,!1))==4)return!1;if(p==1)return!0;p=!1;for(var g=r,y=!1,w=0;w<o.I();w++){var S=o.Na(w);if(!d.contains(S))return!1;if((S=u.hd.Yd(g,S,l))==1)p=!0;else if(S==0)return!1;y||(!u.Dg.Ml(r,o.I()-1)||r.Bb!=null&&r.Bb.Fb!=null?g=r:(g=new u.Da,r.copyTo(g),g.fj(1)),y=!0)}return p},a.mV=function(r,o,l){var d=new u.l,p=new u.l;return r.A(d),o.A(p),!!a.ek(d,p,l)&&((d=new u.Da).ad(o,!1),a.Wz(r,d,l,!0))},a.hV=function(r,o,l){var d=a.qc(r,o,!1);if(d==4)return!0;if(d==1||d==2)return!1;var p=new u.l;if(d=new u.l,r.A(p),o.A(d),a.zc(d,p,l)||(p=new u.h,d.dn(p),(o=u.hd.Yd(r,p,l))!=0)||(d.$I(p),(o=u.hd.Yd(r,p,l))!=0)||(d.en(p),(o=u.hd.Yd(r,p,l))!=0)||(d.cJ(p),(o=u.hd.Yd(r,p,l))!=0))return!1;o=r.ub(0),(p=new u.l).K(d),p.W(l,l);for(var g=0,y=r.I();g<y;g++){var w=o.read(2*g),S=o.read(2*g+1);if(p.contains(w,S))return!1}return!a.TG(r,d,l)},a.sV=function(r,o,l,d){var p=a.qc(r,o,!1);if(p==4||p==1||p==2)return!1;p=new u.l;var g=new u.l;return r.A(p),o.A(g),!a.zc(g,p,l)&&(g.R()<=l&&g.ca()<=l?(o=o.Ip(),a.HI(r,o,l)):g.R()<=l||g.ca()<=l?(p=new u.Ta,g=new u.Sa,o.Hf(0,g),p.nf(g),o.Hf(2,g),p.lineTo(g),a.JI(r,p,l,d)):((p=new u.Da).ad(o,!1),a.II(r,p,l,d)))},a.pV=function(r,o,l,d){var p=a.qc(r,o,!1);if(p==4||p==1||p==2)return!1;p=new u.l;var g=new u.l;return r.A(p),o.A(g),!(a.zc(g,p,l)||g.R()<=l||g.ca()<=l)&&((p=new u.Da).ad(o,!1),a.FI(r,p,l,d))},a.xV=function(r,o,l){var d=new u.l,p=new u.l;return r.A(d),o.A(p),a.zc(p,d,l)},a.bV=function(r,o,l){var d=new u.l,p=new u.l;return r.A(d),o.A(p),!!a.zc(d,p,l)&&(d=a.qc(r,o,!1))!=4&&d!=2&&(d==1||(p.R()<=l&&p.ca()<=l?(o=o.Ip(),a.AI(r,o,l)):p.R()<=l||p.ca()<=l?(p=new u.Ta,d=new u.Sa,o.Hf(0,d),p.nf(d),o.Hf(2,d),p.lineTo(d),a.CI(r,p,l,null)):((p=new u.Da).ad(o,!1),a.BI(r,p,l,null))))},a.eV=function(r,o,l,d){var p=new u.l,g=new u.l;return r.A(p),o.A(g),!(a.zc(g,p,l)||g.ca()>l&&g.R()>l||g.ca()<=l&&g.R()<=l)&&(p=new u.Ta,g=new u.Sa,o.Hf(0,g),p.nf(g),o.Hf(2,g),p.lineTo(g),a.DI(r,p,l,d))},a.IV=function(r,o,l){var d=new u.l,p=new u.l;return r.A(d),o.A(p),!(!a.ek(d,p,l)||a.qc(r,o,!1)==4)&&(!!a.dI(r,o,l)||a.Wz(r,o,l,!1))},a.GV=function(r,o,l){return this.qc(r,o,!1)==4||!!new u.Zl(r,o,l,!0).next()&&!this.UG(r,o,l)},a.NI=function(r,o,l){if(a.qc(r,o,!1)==4)return!1;var d=new u.be(0);if(a.Xz(r,o,l,d)!=0)return!1;for(var p=new u.de,g=0;g<d.size;g+=2){var y=d.read(g),w=d.read(g+1);p.Bu(y,w)}return r=r.mg(),o=o.mg(),r.Fd(o,0,o.I()),a.Mw(r,p,l)},a.LI=function(r,o,l){if(a.qc(r,o,!1)==4)return!1;var d=new u.be(0);if(a.Xz(r,o,l,d)!=0)return!1;for(var p=new u.de,g=0;g<d.size;g+=2){var y=d.read(g),w=d.read(g+1);p.Bu(y,w)}return r=r.mg(),o=o.mg(),r.Fd(o,0,o.I()),!a.Mw(r,p,l)},a.MV=function(r,o,l){return a.qc(r,o,!1)!=4&&a.WG(r,o,l)},a.KI=function(r,o,l){var d=new u.l,p=new u.l;return r.A(d),o.A(p),!(!a.zc(d,p,l)||a.qc(r,o,!1)==4)&&a.ym(o,r,l,!1)},a.FV=function(r,o,l){return a.qc(r,o,!1)==4||(o=o.D(),!a.Yz(r,o,l))},a.QV=function(r,o,l){return a.qc(r,o,!1)!=4&&(o=o.D(),a.Zz(r,o,l))},a.AV=function(r,o,l){return a.qc(r,o,!1)!=4&&(o=o.D(),a.SG(r,o,l))},a.EV=function(r,o,l){return a.qc(r,o,!1)==4||!a.VG(r,o,l,!1)},a.PV=function(r,o,l){if(this.qc(r,o,!1)==4)return!1;var d=r.Ga(),p=new u.l,g=new u.l,y=new u.l;r.A(p),o.A(g),p.W(l,l),g.W(l,l),y.K(p),y.Ea(g),p=null;var w=r.Bb;if(w!=null){var S=w.Fb;p=w.zo,S==null&&(S=w=u.ta.jj(r,y))}else S=w=u.ta.jj(r,y);var k=S.getIterator(),C=null;p!=null&&(C=p.getIterator());var O=new u.h,R=new u.h,N=!1,j=l*l;for(p=new u.pn(o.I()),w=0;w<o.I();w++)p.write(w,0);for(w=0;w<o.I();w++)if(o.D(w,O),y.contains(O)){if(g.K(O.x,O.y,O.x,O.y),C!=null&&(C.Xi(g,l),C.next()==-1))continue;k.Xi(g,l);for(var G=k.next();G!=-1;G=k.next())if(d.Vb(S.ja(G)),(G=d.ha()).hc(G.fe(O,!1),R),u.h.yc(O,R)<=j){p.write(w,1),N=!0;break}}if(!N)return!1;for(r=r.mg(),d=new u.de,g=new u.h,w=0;w<o.I();w++)p.read(w)!=0&&(o.D(w,g),d.Bu(g.x,g.y));return this.Mw(r,d,l)},a.CV=function(r,o,l){if(this.qc(r,o,!1)==4)return!1;var d=r.Ga(),p=new u.l,g=new u.l,y=new u.l;r.A(p),o.A(g),p.W(l,l),g.W(l,l),y.K(p),y.Ea(g),p=null;var w=r.Bb;if(w!=null){var S=w.Fb;p=w.zo,S==null&&(S=w=u.ta.jj(r,y))}else S=w=u.ta.jj(r,y);var k=S.getIterator(),C=null;p!=null&&(C=p.getIterator());var O=new u.h,R=new u.h,N=!1,j=!1,G=l*l;for(p=new u.pn(o.I()),w=0;w<o.I();w++)p.write(w,0);for(w=0;w<o.I();w++)if(o.D(w,O),y.contains(O)){if(g.K(O.x,O.y,O.x,O.y),C!=null&&(C.Xi(g,l),C.next()==-1)){j=!0;continue}k.Xi(g,l);for(var D=!1,V=k.next();V!=-1;V=k.next())if(d.Vb(S.ja(V)),(V=d.ha()).hc(V.fe(O,!1),R),u.h.yc(O,R)<=G){p.write(w,1),D=N=!0;break}D||(j=!0)}else j=!0;if(!N||!j)return!1;for(r=r.mg(),d=new u.de,g=new u.h,w=0;w<o.I();w++)p.read(w)!=0&&(o.D(w,g),d.Bu(g.x,g.y));return!this.Mw(r,d,l)},a.zV=function(r,o,l){var d=new u.l,p=new u.l;return r.A(d),o.A(p),!(!a.zc(d,p,l)||a.qc(r,o,!1)==4||!a.VG(r,o,l,!0))&&(r=r.mg(),!a.gI(r,o,l))},a.HV=function(r,o,l){var d=new u.l,p=new u.l;return r.A(d),o.A(p),!(p.ca()>l&&p.R()>l)&&a.ek(d,p,l)},a.DV=function(r,o,l){var d=new u.l,p=new u.l;return r.A(d),o.A(p),!a.zc(p,d,l)&&!a.TG(r,p,l)},a.OV=function(r,o,l){var d=new u.l,p=new u.l;if(r.A(d),o.A(p),p.ca()<=l&&p.R()<=l)return p=o.Ip(),a.Zz(r,p,l);if(p.ca()<=l||p.R()<=l)return p=new u.Ta,d=new u.Sa,o.Hf(0,d),p.nf(d),o.Hf(2,d),p.lineTo(d),a.NI(r,p,l);r=r.Ga(),o=new u.l,d=new u.l,o.K(p),d.K(p),o.W(-l,-l),d.W(l,l),p=!1;for(var g=new u.l,y=new u.l;r.$a();)for(;r.Ha();){if(r.ha().A(g),y.K(o),y.Ea(g),!y.B()&&(y.ca()>l||y.R()>l))return!1;y.K(d),y.Ea(g),y.B()||(p=!0)}return p},a.LV=function(r,o,l){var d=new u.l,p=new u.l;return r.A(d),o.A(p),!(a.zc(d,p,l)||a.zc(p,d,l)||a.zc(p,d,l)||p.ca()>l&&p.R()>l||p.ca()<=l&&p.R()<=l)&&(d=new u.Ta,p=new u.Sa,o.Hf(0,p),d.nf(p),o.Hf(2,p),d.lineTo(p),a.WG(r,d,l))},a.RV=function(r,o,l){var d=new u.l,p=new u.l;if(r.A(d),o.A(p),!a.zc(p,d,l)||p.ca()<=l&&p.R()<=l)return!1;if(p.ca()<=l||p.R()<=l)return a.zc(p,d,l);r=r.Ga(),(o=new u.l).K(p),o.W(-l,-l),p=!1,d=new u.l;for(var g=new u.l;r.$a();)for(;r.Ha();)r.ha().A(d),o.hm(d)?p=!0:(g.K(o),g.Ea(d),!g.B()&&(g.ca()>l||g.R()>l)&&(p=!0));return p},a.yV=function(r,o,l){var d=new u.l,p=new u.l;return o.A(p),r.A(d),!(!a.zc(d,p,l)||p.ca()>l&&p.R()>l)&&(p.ca()<=l&&p.R()<=l?(o=o.Ip(),a.SG(r,o,l)):(d=new u.Ta,p=new u.Sa,o.Hf(0,p),d.nf(p),o.Hf(2,p),d.lineTo(p),a.ym(d,r,l,!1)))},a.BV=function(r,o,l){var d=new u.l,p=new u.l;if(r.A(d),o.A(p),a.zc(p,d,l)||p.ca()<=l&&p.R()<=l)return!1;if(p.ca()<=l||p.R()<=l)return d=new u.Ta,p=new u.Sa,o.Hf(0,p),d.nf(p),o.Hf(2,p),d.lineTo(p),a.LI(r,d,l);r=r.Ga(),o=new u.l,(d=new u.l).K(p),o.K(p),d.W(-l,-l),o.W(l,l);for(var g=p=!1,y=new u.l,w=new u.l;r.$a();)for(;r.Ha();)if(r.ha().A(y),g||o.contains(y)||(g=!0),p||(w.K(d),w.Ea(y),!w.B()&&(w.ca()>l||w.R()>l)&&(p=!0)),p&&g)return!0;return!1},a.iU=function(r,o,l){var d=new u.l,p=new u.l;return r.A(d),o.A(p),!!a.ek(d,p,l)&&(!!a.jU(r,o,l)||a.YA(r,o,l,!1,!0,!1))},a.gU=function(r,o,l){return!a.gI(r,o,l)},a.oU=function(r,o,l){return a.YA(r,o,l,!1,!1,!0)},a.eI=function(r,o,l){var d=new u.l,p=new u.l;return r.A(d),o.A(p),!!a.zc(d,p,l)&&a.YA(o,r,l,!0,!1,!1)},a.Mw=function(r,o,l){l*=l;for(var d=new u.h,p=new u.h,g=0;g<o.I();g++){o.D(g,p);for(var y=!1,w=0;w<r.I();w++)if(r.D(w,d),u.h.yc(d,p)<=l){y=!0;break}if(!y)return!1}return!0},a.Nw=function(r,o,l){var d=new u.l,p=new u.l;return r.A(d),o.A(p),a.ek(d,p,l)},a.fI=function(r,o,l){return o=o.D(),a.kt(r,o,l)},a.sU=function(r,o,l){return a.Nw(r,o,l)},a.dU=function(r,o,l){return!a.fI(r,o,l)},a.hU=function(r,o,l){var d=new u.l,p=new u.l;return r.A(d),o.A(p),!(p.ca()>l||p.R()>l)&&a.ek(d,p,l)},a.fU=function(r,o,l){var d=new u.l,p=new u.l;if(r.A(d),o.A(p),a.zc(p,d,l))return!1;for((o=new u.l).K(p),o.W(l,l),l=new u.h,p=0;p<r.I();p++)if(r.D(p,l),o.contains(l))return!1;return!0},a.qU=function(r,o,l){var d=new u.l,p=new u.l,g=new u.l;if(o.A(d),d.ca()<=l&&d.R()<=l)return!1;if(d.ca()<=l||d.R()<=l){o=new u.h;var y=!1;p.K(d),g.K(d),p.W(l,l),d.ca()>l?g.W(0,-l):g.W(-l,0);for(var w=0;w<r.I();w++)if(r.D(w,o),p.contains(o)){if(d.ca()>l){if(o.y>g.G&&o.y<g.H)return!1}else if(o.x>g.v&&o.x<g.C)return!1;y=!0}return y}for(p.K(d),g.K(d),p.W(l,l),g.W(-l,-l),o=new u.h,y=!1,w=0;w<r.I();w++)if(r.D(w,o),p.contains(o)){if(g.hm(o))return!1;y=!0}return y},a.rU=function(r,o,l){var d=new u.l,p=new u.l;if(r.A(d),o.A(p),!a.zc(p,d,l))return!1;if(p.ca()<=l&&p.R()<=l)return a.ek(d,p,l);if(p.ca()<=l||p.R()<=l){o=!1,d=new u.l;var g=new u.l;d.K(p),g.K(p),p.ca()>l?d.W(0,-l):d.W(-l,0),g.W(l,l);for(var y=new u.h,w=0;w<r.I();w++){if(r.D(w,y),!g.contains(y))return!1;p.ca()>l?y.y>d.G&&y.y<d.H&&(o=!0):y.x>d.v&&y.x<d.C&&(o=!0)}return o}for(o=!1,d=new u.l,g=new u.l,d.K(p),g.K(p),d.W(-l,-l),g.W(l,l),y=new u.h,w=0;w<r.I();w++){if(r.D(w,y),!g.contains(y))return!1;d.hm(y)&&(o=!0)}return o},a.cU=function(r,o,l){var d=new u.l,p=new u.l;return r.A(d),o.A(p),!(!a.zc(d,p,l)||p.ca()>l||p.R()>l)&&(o=o.Ip(),!a.kt(r,o,l))},a.eU=function(r,o,l){var d=new u.l,p=new u.l;if(r.A(d),o.A(p),a.zc(p,d,l)||p.ca()<=l&&p.R()<=l)return!1;if(p.ca()<=l||p.R()<=l){o=new u.l,d=new u.l,o.K(p),p.ca()>l?o.W(0,-l):o.W(-l,0),d.K(p),d.W(l,l);for(var g=new u.h,y=!1,w=!1,S=0;S<r.I();S++)if(r.D(S,g),y||(p.ca()>l?g.y>o.G&&g.y<o.H&&(y=!0):g.x>o.v&&g.x<o.C&&(y=!0)),w||d.contains(g)||(w=!0),y&&w)return!0;return!1}for(o=new u.l,d=new u.l,o.K(p),o.W(-l,-l),d.K(p),d.W(l,l),g=new u.h,w=y=!1,S=0;S<r.I();S++)if(r.D(S,g),!y&&o.hm(g)&&(y=!0),w||d.contains(g)||(w=!0),y&&w)return!0;return!1},a.wI=function(r,o,l){return u.h.yc(r,o)<=l*l},a.SU=function(r,o,l){return u.h.yc(r,o)>l*l},a.uI=function(r,o,l){return a.wI(r,o,l)},a.vI=function(r,o,l){var d=new u.l;return d.K(r),a.ek(d,o,l)},a.Rw=function(r,o,l){var d=new u.l;return d.K(o),d.W(l,l),!d.contains(r)},a.dB=function(r,o,l){if(o.ca()<=l&&o.R()<=l)return!1;var d=new u.l,p=new u.l;if(d.K(o),d.W(l,l),!d.contains(r))return!1;if(o.ca()<=l||o.R()<=l){if(p.K(o),o.ca()>l?p.W(0,-l):p.W(-l,0),o.ca()>l){if(r.y>p.G&&r.y<p.H)return!1}else if(r.x>p.v&&r.x<p.C)return!1;return!0}return p.K(o),p.W(-l,-l),!p.hm(r)},a.eB=function(r,o,l){if(o.ca()<=l&&o.R()<=l)return!0;if(o.ca()<=l||o.R()<=l){var d=new u.l;d.K(o),o.ca()>l?d.W(0,-l):d.W(-l,0);var p=!1;return o.ca()>l?r.y>d.G&&r.y<d.H&&(p=!0):r.x>d.v&&r.x<d.C&&(p=!0),p}return(d=new u.l).K(o),d.W(-l,-l),d.hm(r)},a.RU=function(r,o,l){return a.vI(r,o,l)},a.ek=function(r,o,l){return a.zc(r,o,l)&&a.zc(o,r,l)},a.dk=function(r,o,l){var d=new u.l;return d.K(o),d.W(l,l),!r.isIntersecting(d)},a.cQ=function(r,o,l){if(r.ca()<=l&&r.R()<=l){var d=r.sf();return a.dB(d,o,l)}if(o.ca()<=l&&o.R()<=l)return d=o.sf(),a.dB(d,r,l);if(r.ca()>l&&r.R()>l&&(o.ca()<=l||o.R()<=l)?d=o:(d=r,r=o),d.ca()<=l||d.R()<=l){if(r.ca()<=l||r.R()<=l){o=new u.yb;var p=new u.yb,g=[0,0],y=[0,0],w=new u.h;return d.dn(w),o.Dc(w),d.en(w),o.Qc(w),r.dn(w),p.Dc(w),r.en(w),p.Qc(w),o.Ea(p,null,g,y,l),o.Ea(p,null,null,null,l)==1&&(g[0]==0||g[1]==1||y[0]==0||y[1]==1)}return o=new u.l,p=new u.l,o.K(r),o.W(-l,-l),p.K(o),p.Ea(d),!(!p.B()&&(p.ca()>l||p.R()>l))}return r.W(l,l),(p=new u.l).K(d),p.Ea(r),!(p.B()||!p.B()&&p.ca()>l&&p.R()>l)},a.bQ=function(r,o,l){if(a.zc(r,o,l)||a.zc(o,r,l)||r.ca()<=l&&r.R()<=l||o.ca()<=l&&o.R()<=l)return!1;if(r.ca()<=l||r.R()<=l){if(o.ca()>l&&o.R()>l)return!1;var d=new u.yb,p=new u.yb,g=[0,0],y=[0,0],w=new u.h;return r.dn(w),d.Dc(w),r.en(w),d.Qc(w),o.dn(w),p.Dc(w),o.en(w),p.Qc(w),d.Ea(p,null,g,y,l),d.Ea(p,null,null,null,l)==2&&(0<g[0]||1>g[1])&&(0<y[0]||1>y[1])}return!(o.ca()<=l||o.R()<=l)&&((d=new u.l).K(r),d.Ea(o),!(d.B()||d.ca()<=l||d.R()<=l))},a.jF=function(r,o,l){if(!a.zc(r,o,l))return!1;if(r.ca()<=l&&r.R()<=l)return r=r.sf(),a.eB(r,o,l);if(o.ca()<=l&&o.R()<=l)return o=o.sf(),a.eB(o,r,l);if(r.ca()<=l||r.R()<=l)return a.zc(r,o,l);if(o.ca()<=l||o.R()<=l){var d=new u.l;return d.K(r),d.W(-l,-l),d.hm(o)?!0:((r=new u.l).K(d),r.Ea(o),!(r.B()||r.ca()<=l&&r.R()<=l))}return a.zc(r,o,l)},a.aQ=function(r,o,l){if(a.zc(r,o,l)||a.zc(o,r,l)||r.ca()<=l&&r.R()<=l||o.ca()<=l&&o.R()<=l||o.ca()>l&&o.R()>l&&r.ca()>l&&r.R()>l)return!1;if(r.ca()>l&&r.R()>l)var d=o;else d=r,r=o;if(r.ca()>l&&r.R()>l){o=new u.l;var p=new u.l;return p.K(r),p.W(-l,-l),o.K(p),o.Ea(d),!(o.B()||o.ca()<=l&&o.R()<=l)}o=new u.yb,p=new u.yb;var g=[0,0],y=[0,0],w=new u.h;return d.dn(w),o.Dc(w),d.en(w),o.Qc(w),r.dn(w),p.Dc(w),r.en(w),p.Qc(w),o.Ea(p,null,g,y,l),o.Ea(p,null,null,null,l)==1&&0<g[0]&&1>g[1]&&0<y[0]&&1>y[1]},a.EI=function(r,o,l){var d=new u.l,p=new u.l,g=new u.Zl(r,o,l,!0);if(!g.next())return!0;if(this.UG(r,o,l))return!1;var y=r,w=null;o.getType()==1736&&(w=o);var S=!1,k=!1;do{var C=g.nl(),O=g.hl();if(O=o.Na(o.Ba(O)),d.K(g.uz()),d.W(l,l),d.contains(O)&&(O=u.hd.Yd(y,O,0))!=0||o.getType()==1736&&(C=r.Na(r.Ba(C)),p.K(g.az()),p.W(l,l),p.contains(C)&&(O=u.hd.Yd(w,C,0))!=0))return!1;S||(!u.Dg.Ml(r,o.da()-1)||r.Bb!=null&&r.Bb.Fb!=null?y=r:(y=new u.Da,r.copyTo(y),y.fj(1)),S=!0),o.getType()!=1736||k||(k=o,!u.Dg.Ml(k,r.da()-1)||o.Bb!=null&&o.Bb.Fb!=null?w=o:(w=new u.Da,k.copyTo(w),w.fj(1)),k=!0)}while(g.next());return!0},a.zc=function(r,o,l){var d=new u.l;return d.K(r),d.W(l,l),d.contains(o)},a.ls=function(r,o,l){var d=new u.l;return d.K(o),d.W(l,l),o=new u.h,r.dn(o),!d.contains(o)||(r.$I(o),!d.contains(o)||(r.cJ(o),!d.contains(o)||(r.en(o),!d.contains(o))))},a.dI=function(r,o,l){if(r.da()!=o.da()||r.I()!=o.I())return!1;var d=new u.h,p=new u.h,g=!0;l*=l;for(var y=0;y<r.da();y++){if(r.Vc(y)!=o.Vc(y)){g=!1;break}for(var w=r.Ba(y);w<o.Vc(y);w++)if(r.D(w,d),o.D(w,p),u.h.yc(d,p)>l){g=!1;break}if(!g)break}return!!g},a.jU=function(r,o,l){if(r.I()!=o.I())return!1;var d=new u.h,p=new u.h,g=!0;l*=l;for(var y=0;y<r.I();y++)if(r.D(y,d),o.D(y,p),u.h.yc(d,p)>l){g=!1;break}return!!g},a.YA=function(r,o,l,d,p,g){var y=!1;if(r.I()>o.I()){d&&(d=!1,y=!0);var w=o}else w=r,r=o;if(o=null,p||g||y){o=new u.pn(r.I());for(var S=0;S<r.I();S++)o.write(S,0)}S=new u.l;var k=new u.l,C=new u.l;w.A(S),r.A(k),S.W(l,l),k.W(l,l),C.K(S),C.Ea(k),k=new u.h;for(var O=new u.h,R=!0,N=u.ta.oE(r,C),j=N.getIterator(),G=l*l,D=0;D<w.I();D++)if(w.D(D,k),C.contains(k)){var V=!1;S.K(k.x,k.y,k.x,k.y),j.Xi(S,l);for(var Z=j.next();Z!=-1&&(Z=N.ja(Z),r.D(Z,O),!(u.h.yc(k,O)<=G&&((p||g||y)&&o.write(Z,1),V=!0,d)));Z=j.next());if(!V&&(R=!1,p||d))return!1}else{if(p||d)return!1;R=!1}if(g&&R)return!1;if(d)return!0;for(S=0;S<r.I();S++)if(o.read(S)==1){if(g)return!0}else if(p||y)return!1;return!g},a.gI=function(r,o,l){if(r.I()>o.I())var d=o;else d=r,r=o;o=new u.l;var p=new u.l,g=new u.l;d.A(o),r.A(p),o.W(l,l),p.W(l,l),g.K(o),g.Ea(p),p=new u.h;for(var y=new u.h,w=l*l,S=u.ta.oE(r,g),k=S.getIterator(),C=0;C<d.I();C++)if(d.D(C,p),g.contains(p)){o.K(p.x,p.y,p.x,p.y),k.Xi(o,l);for(var O=k.next();O!=-1;O=k.next())if(r.D(S.ja(O),y),u.h.yc(p,y)<=w)return!0}return!1},a.Wz=function(r,o,l,d){return a.ym(r,o,l,d)&&a.ym(o,r,l,d)},a.ym=function(r,o,l,d){function p(Le,Te){return O.QE(Le,Te)}var g,y=!0,w=[0,0],S=[0,0],k=0,C=new u.ia(0),O=new a,R=new u.l,N=new u.l,j=new u.l;r.A(R),o.A(N),R.W(l,l),N.W(l,l),j.K(R),j.Ea(N),r=r.Ga(),N=o.Ga();var G=null,D=G=null,V=o.Bb;for(V!=null?(G=V.Fb,D=V.zo,G==null&&(G=u.ta.jj(o,j))):G=u.ta.jj(o,j),o=G.getIterator(),V=null,D!=null&&(V=D.getIterator());r.$a();)for(;r.Ha();){var Z=!1,q=r.ha();if(q.A(R),!R.isIntersecting(j)||V!=null&&(V.Xi(R,l),V.next()==-1))return!1;for(D=q.Qb(),o.Uo(q,l),g=o.next();g!=-1;g=o.next()){N.Vb(G.ja(g)),g=N.ha();var ne=q.Ea(g,null,w,S,l);if(ne==2&&(!d||S[0]<=S[1])){ne=w[0];var ee=w[1],he=S[0],ye=S[1];if(ne*D<=l&&(1-ee)*D<=l){Z=!0,k=0,C.resize(0),O.rh.length=0;var ge=r.wb();for(he=!0;he;){if(r.Ha()){if(D=(q=r.ha()).Qb(),(ne=q.Ea(g,null,w,S,l))==2&&(!d||S[0]<=S[1])&&(ne=w[0],ee=w[1],ne*D<=l&&(1-ee)*D<=l)){ge=r.wb();continue}if(N.Ha()&&(g=N.ha(),(ne=q.Ea(g,null,w,S,l))==2&&(!d||S[0]<=S[1])&&(ne=w[0],ee=w[1],ne*D<=l&&(1-ee)*D<=l))){ge=r.wb();continue}}he=!1}ge!=r.wb()&&(r.Vb(ge),r.ha());break}ge=r.wb(),g=b.construct(ge,r.gb,ne,ee,N.wb(),N.gb,he,ye),O.rh.push(g),C.add(C.size)}}if(!Z){if(k==O.rh.length)return!1;for(1<C.size-k&&C.Vd(k,C.size,p),Z=0;k<O.rh.length;k++)if(!((g=O.rh[C.get(k)]).Kj<Z&&g.Si<Z)){if(D*(g.Kj-Z)>l)return!1;if(D*(1-(Z=g.Si))<=l||Z==1)break}if(D*(1-Z)>l)return!1;k=0,C.resize(0),O.rh.length=0}}return y},a.WG=function(r,o,l){if(1>a.Xz(r,o,l,null))return!1;var d=new u.l,p=new u.l;r.A(d),o.A(p);var g=a.ls(d,p,l);return d=a.ls(p,d,l),!(!g||!d)||(g&&!d?!a.ym(o,r,l,!1):d&&!g?!a.ym(r,o,l,!1):!a.ym(r,o,l,!1)&&!a.ym(o,r,l,!1))},a.Xz=function(r,o,l,d){function p(Oe,Dt){return R.QE(Oe,Dt)}if(r.yz()>o.yz())var g=o,y=r;else g=r,y=o;r=g.Ga(),o=y.Ga();var w=[0,0],S=[0,0],k=-1,C=0,O=new u.ia(0),R=new a,N=new u.l,j=new u.l,G=new u.l;g.A(N),y.A(j),N.W(l,l),j.W(l,l),G.K(N),G.Ea(j),g=null,d!=null&&(g=new u.h);var D=j=j=null,V=y.Bb;for(V!=null?(j=V.Fb,D=V.zo,j==null&&(j=u.ta.jj(y,G))):j=u.ta.jj(y,G),y=j.getIterator(),V=null,D!=null&&(V=D.getIterator());r.$a();)for(D=0;r.Ha();){var Z=r.ha();if(Z.A(N),N.isIntersecting(G)){if(V!=null&&(V.Xi(N,l),V.next()==-1))continue;var q=Z.Qb();y.Uo(Z,l);for(var ne=y.next();ne!=-1;ne=y.next()){var ee=j.ja(ne);o.Vb(ee);var he=o.ha(),ye=he.Qb(),ge=Z.Ea(he,null,w,S,l);if(0<ge){ne=w[0],k=S[0];var Le=ge==2?w[1]:NaN,Te=ge==2?S[1]:NaN;if(ge==2){if(q*(Le-ne)>l)return 1;var Je=q*(Le-ne);if(o.Ha()){if(he=o.ha(),(ge=Z.Ea(he,null,w,null,l))==2){ge=w[0];var We=w[1];if(Je+(ge=q*(We-ge))>l)return 1}o.Vb(ee),o.ha()}if(!o.vm()){if(o.li(),he=o.li(),(ge=Z.Ea(he,null,w,null,l))==2&&(ge=w[0],Je+(ge=q*((We=w[1])-ge))>l))return 1;o.Vb(ee),o.ha()}if(r.Ha()){if(ee=r.wb(),(ge=(Z=r.ha()).Ea(he,null,w,null,l))==2&&(ge=w[0],Je+(ge=q*((We=w[1])-ge))>l))return 1;r.Vb(ee),r.ha()}if(!r.vm()){if(ee=r.wb(),r.li(),(ge=(Z=r.li()).Ea(he,null,w,null,l))==2&&(ge=w[0],Je+(ge=ye*((We=w[1])-ge))>l))return 1;r.Vb(ee),r.ha()}he=b.construct(r.wb(),r.gb,ne,Le,o.wb(),o.gb,k,Te),R.rh.push(he),O.add(O.size)}k=0,d!=null&&(Z.hc(ne,g),d.add(g.x),d.add(g.y))}}if(C<R.rh.length){for(O.Vd(C,O.size,p),Z=0,ne=R.rh[O.get(C)].Mm;C<R.rh.length;C++)if(!((he=R.rh[O.get(C)]).Kj<Z&&he.Si<Z))if(q*(he.Kj-Z)>l)D=q*(he.Si-he.Kj),Z=he.Si,ne=he.Mm;else{if(he.Mm!=ne?(D=q*(he.Si-he.Kj),ne=he.Mm):D+=q*(he.Si-he.Kj),D>l)return 1;if((Z=he.Si)==1)break}q*(1-Z)>l&&(D=0),C=0,O.resize(0),R.rh.length=0}}}return k},a.UG=function(r,o,l){var d=r.Ga(),p=o.Ga();for(r=new u.Zl(r,o,l,!1);r.next();){o=r.nl();var g=r.hl();if(d.Vb(o),p.Vb(g),o=d.ha(),0<p.ha().Ea(o,null,null,null,l))return!0}return!1},a.VG=function(r,o,l,d){var p=r.Ga(),g=new u.l,y=new u.l,w=new u.l;r.A(g),o.A(y),g.W(l,l),g.contains(y),y.W(l,l),w.K(g),w.Ea(y),(g=r.Bb)!=null?(g=g.Fb)==null&&(g=u.ta.jj(r,w)):g=u.ta.jj(r,w),r=g.getIterator();for(var S=new u.h,k=new u.h,C=l*l,O=0;O<o.I();O++)if(o.D(O,S),w.contains(S)){y.K(S.x,S.y,S.x,S.y),r.Xi(y,l);for(var R=!1,N=r.next();N!=-1;N=r.next())if(p.Vb(g.ja(N)),(N=p.ha()).hc(N.fe(S,!1),k),u.h.yc(k,S)<=C){R=!0;break}if(d){if(!R)return!1}else if(R)return!0}return!!d},a.Yz=function(r,o,l){var d=new u.h,p=l*l,g=r.Ga();if((r=r.Bb)!=null&&(r=r.Fb)!=null){var y=new u.l;for(y.K(o),y=(l=r.MF(y,l)).next();y!=-1;y=l.next())if(g.Vb(r.ja(y)),g.Ha()){var w=(y=g.ha()).fe(o,!1);if(y.hc(w,d),u.h.yc(o,d)<=p)return!0}return!1}for(r=new u.l;g.$a();)for(;g.Ha();)if((y=g.ha()).A(r),r.W(l,l),r.contains(o)&&(w=y.fe(o,!1),y.hc(w,d),u.h.yc(o,d)<=p))return!0;return!1},a.SG=function(r,o,l){return a.Yz(r,o,l)&&!a.Zz(r,o,l)},a.Zz=function(r,o,l){return r=r.mg(),!a.kt(r,o,l)},a.TG=function(r,o,l){if(r.tm()){var d=new u.yb(o.v,o.G,o.v,o.H),p=new u.yb(o.v,o.H,o.C,o.H),g=new u.yb(o.C,o.H,o.C,o.G);for(o=new u.yb(o.C,o.G,o.v,o.G),r=r.Ga();r.$a();)for(;r.Ha();){var y=r.ha();if(y.isIntersecting(d,l)||y.isIntersecting(p,l)||y.isIntersecting(g,l)||y.isIntersecting(o,l))return!0}}else{(d=new u.l).K(o),d.W(l,l),l=r.ub(0),p=new u.h,g=new u.h,o=new u.h,y=new u.h;for(var w=0,S=r.da();w<S;w++)for(var k=!0,C=r.Ba(w),O=r.Vc(w);C<O;C++)if(k)l.tc(2*C,g),k=!1;else{if(l.tc(2*C,p),o.L(g),y.L(p),d.zy(o,y)!=0)return!0;g.L(p)}}return!1},a.qc=function(r,o,l){var d=r.getType(),p=o.getType();if(u.aa.xj(d)){var g=r.Bb;if(g!=null&&(g=g.Fk)!=null)if(p==33){var y=o.D();if((y=g.So(y.x,y.y))==1)return 1;if(y==0)return 4}else{if(y=new u.l,o.A(y),(y=g.Ro(y))==1)return 1;if(y==0)return 4;if(l&&u.aa.xj(p)&&a.HE(o,g))return 1073741824}}if(u.aa.xj(p)&&(g=o.Bb)!=null&&(g=g.Fk)!=null)if(d==33){if(r=r.D(),(y=g.So(r.x,r.y))==1)return 2;if(y==0)return 4}else{if(o=new u.l,r.A(o),(y=g.Ro(o))==1)return 2;if(y==0)return 4;if(l&&u.aa.xj(d)&&a.HE(r,g))return 1073741824}return 0},a.HE=function(r,o){for(var l=r.I(),d=new u.h,p=0;p<l;p++)if(r.D(p,d),o.So(d.x,d.y)==1)return!0;return!1},a.II=function(r,o,l,d){for(var p=1<=r.om(0)&&1<=o.om(0),g=r.Ga(),y=o.Ga(),w=[0,0],S=[0,0],k=new u.Zl(r,o,l,!1),C=!1;k.next();){var O=k.nl(),R=k.hl();if(g.Vb(O),y.Vb(R),O=g.ha(),(R=y.ha().Ea(O,null,S,w,l))==2){if(C=w[0],R=w[1],O=O.Qb(),p&&(R-C)*O>l)return!1;C=!0}else if(R!=0){if(C=w[0],O=S[0],0<C&&1>C&&0<O&&1>O)return!1;C=!0}}return!!C&&(g=new u.l,y=new u.l,p=new u.l,r.A(g),o.A(y),g.W(1e3*l,1e3*l),y.W(1e3*l,1e3*l),p.K(g),p.Ea(y),!(10<r.I()&&(r=u.Ud.clip(r,p,l,0),r.B())||10<o.I()&&(o=u.Ud.clip(o,p,l,0),o.B()))&&u.am.rt(r,o,l,"F********",d))},a.FI=function(r,o,l,d){var p=1<=r.om(0)&&1<=o.om(0),g=new u.l,y=new u.l,w=new u.l;r.A(g),o.A(y);for(var S=!1,k=a.ls(g,y,l),C=a.ls(y,g,l),O=r.Ga(),R=o.Ga(),N=[0,0],j=[0,0],G=new u.Zl(r,o,l,!1);G.next();){var D=G.nl(),V=G.hl();if(O.Vb(D),R.Vb(V),V=O.ha(),(D=R.ha().Ea(V,null,j,N,l))==2){D=N[0];var Z=N[1];if(V=V.Qb(),p&&(Z-D)*V>l&&(S=!0,k&&C))return!0}else if(D!=0&&(D=N[0],V=j[0],0<D&&1>D&&0<V&&1>V))return!0}if(p=new u.l,O=new u.l,p.K(g),p.W(1e3*l,1e3*l),O.K(y),O.W(1e3*l,1e3*l),w.K(p),w.Ea(O),g="",g=S?g+"**":g+"T*",k){if(10<o.I()&&(o=u.Ud.clip(o,w,l,0)).B())return!1;g+="****"}else g+="T***";if(C){if(10<r.I()&&(r=u.Ud.clip(r,w,l,0)).B())return!1;g+="***"}else g+="T**";return u.am.rt(r,o,l,g.toString(),d)},a.BI=function(r,o,l,d){var p=[!1],g=a.zI(r,o,l,p);return p[0]?g:(p=new u.l,o.A(p),p.W(1e3*l,1e3*l),!(10<r.I()&&(r=u.Ud.clip(r,p,l,0),r.B()))&&u.am.Sw(r,o,l,d))},a.zI=function(r,o,l,d){d[0]=!1;for(var p=r.Ga(),g=o.Ga(),y=[0,0],w=[0,0],S=new u.Zl(r,o,l,!1),k=!1;S.next();){var C=S.nl(),O=S.hl();if(p.Vb(C,-1),g.Vb(O,-1),C=p.ha(),(C=g.ha().Ea(C,null,w,y,l))!=0&&(k=!0,C==1&&(C=y[0],O=w[0],0<C&&1>C&&0<O&&1>O)))return d[0]=!0,!1}if(!k){for(d[0]=!0,y=new u.l,r.A(y),y.W(l,l),S=r,k=!1,w=new u.l,d=0,p=o.da();d<p;d++)if(0<o.Ja(d)){if(o.Rj(d,w),!y.isIntersecting(w)||(g=o.Na(o.Ba(d)),(g=u.Dg.wm(S,g,0))==0))return!1;k||(!u.Dg.Ml(r,o.da()-1)||r.Bb!=null&&r.Bb.Fb!=null?S=r:(g=new u.Da,r.copyTo(g),g.fj(1),S=g),k=!0)}if(r.da()==1||o.getType()==1607)return!0;for(y=new u.l,o.A(y),y.W(l,l),w=o,S=!1,l=new u.l,d=0,p=r.da();d<p;d++)if(0<r.Ja(d)){if(r.Rj(d,l),y.isIntersecting(l)&&(g=r.Na(r.Ba(d)),(g=u.Dg.wm(w,g,0))==1))return!1;S||(!u.Dg.Ml(o,r.da()-1)||o.Bb!=null&&o.Bb.Fb!=null?w=o:(g=new u.Da,o.copyTo(g),g.fj(1),w=g),S=!0)}return!0}return!1},a.JI=function(r,o,l,d){for(var p=r.Ga(),g=o.Ga(),y=[0,0],w=[0,0],S=new u.Zl(r,o,l,!1),k=!1;S.next();){var C=S.nl(),O=S.hl();if(p.Vb(C),g.Vb(O),C=p.ha(),(C=g.ha().Ea(C,null,w,y,l))==2)k=!0;else if(C!=0){if(k=y[0],C=w[0],0<k&&1>k&&0<C&&1>C)return!1;k=!0}}return!!k&&(g=new u.l,y=new u.l,p=new u.l,r.A(g),o.A(y),g.W(1e3*l,1e3*l),y.W(1e3*l,1e3*l),p.K(g),p.Ea(y),!(10<r.I()&&(r=u.Ud.clip(r,p,l,0),r.B())||10<o.I()&&(o=u.Ud.clip(o,p,l,0),o.B()))&&u.am.$m(r,o,l,"F********",d))},a.DI=function(r,o,l,d){for(var p=r.Ga(),g=o.Ga(),y=[0,0],w=[0,0],S=new u.Zl(r,o,l,!1),k=!1;S.next();){var C=S.nl(),O=S.hl();if(p.Vb(C),g.Vb(O),C=p.ha(),(C=g.ha().Ea(C,null,w,y,l))==2)k=!0;else if(C!=0){if(k=y[0],C=w[0],0<k&&1>k&&0<C&&1>C)return!0;k=!0}}return!!k&&(g=new u.l,y=new u.l,w=new u.l,S=new u.l,p=new u.l,r.A(g),o.A(y),a.ls(y,g,l)?(w.K(g),w.W(1e3*l,1e3*l),S.K(y),S.W(1e3*l,1e3*l),p.K(w),p.Ea(S),!(10<r.I()&&(r=u.Ud.clip(r,p,l,0),r.B())||10<o.I()&&(o=u.Ud.clip(o,p,l,0),o.B()))&&(l=u.am.$m(r,o,l,"T********",d))):l=u.am.$m(r,o,l,"T*****T**",d))},a.CI=function(r,o,l,d){var p=[!1],g=a.zI(r,o,l,p);return p[0]?g:(p=new u.l,o.A(p),p.W(1e3*l,1e3*l),!(10<r.I()&&(r=u.Ud.clip(r,p,l,0),r.B()))&&u.am.fB(r,o,l,d))},a.AI=function(r,o,l){return u.hd.Yd(r,o,l)==1},a.HI=function(r,o,l){return u.hd.Yd(r,o,l)==2},a.kt=function(r,o,l){var d=new u.h;l*=l;for(var p=0;p<r.I();p++)if(r.D(p,d),u.h.yc(d,o)<=l)return!1;return!0},a.prototype.QE=function(r,o){return r=this.rh[r],o=this.rh[o],r.Mm<o.Mm||r.Mm==o.Mm&&(r.pw<o.pw||r.pw==o.pw&&(r.Kj<o.Kj||r.Kj==o.Kj&&(r.Si<o.Si||r.Si==o.Si&&r.BH<o.BH)))?-1:1},a}();u.ud=c}(B||(B={})),function(u){var A,b,c;(b=A||(A={}))[b.InteriorInterior=0]="InteriorInterior",b[b.InteriorBoundary=1]="InteriorBoundary",b[b.InteriorExterior=2]="InteriorExterior",b[b.BoundaryInterior=3]="BoundaryInterior",b[b.BoundaryBoundary=4]="BoundaryBoundary",b[b.BoundaryExterior=5]="BoundaryExterior",b[b.ExteriorInterior=6]="ExteriorInterior",b[b.ExteriorBoundary=7]="ExteriorBoundary",b[b.ExteriorExterior=8]="ExteriorExterior",function(a){a[a.AreaAreaPredicates=0]="AreaAreaPredicates",a[a.AreaLinePredicates=1]="AreaLinePredicates",a[a.LineLinePredicates=2]="LineLinePredicates",a[a.AreaPointPredicates=3]="AreaPointPredicates",a[a.LinePointPredicates=4]="LinePointPredicates",a[a.PointPointPredicates=5]="PointPointPredicates"}(c||(c={})),A=function(){function a(){this.le=0,this.j=new u.iu,this.J=[0,0,0,0,0,0,0,0,0],this.Za=[0,0,0,0,0,0,0,0,0],this.ea=[!1,!1,!1,!1,!1,!1,!1,!1,!1],this.Sm=this.vw=-1}return a.yB=function(r,o,l,d,p){if(d.length!=9)throw u.i.fa("relation string length has to be 9 characters");for(var g=0;9>g;g++){var y=d.charAt(g);if(y!="*"&&y!="T"&&y!="F"&&y!="0"&&y!="1"&&y!="2")throw u.i.fa("relation string")}if((g=this.MR(d,r.Db(),o.Db()))!=0)return u.ud.zB(r,o,l,g,p);g=new u.l,r.A(g),y=new u.l,o.A(y);var w=new u.l;if(w.K(g),w.Zb(y),l=u.ta.Wd(l,w,!1),r=this.WE(r,l),o=this.WE(o,l),r.B()||o.B())return this.uW(r,o,d);switch(g=r.getType(),y=o.getType(),w=!1,g){case 1736:switch(y){case 1736:w=this.rt(r,o,l,d,p);break;case 1607:w=this.$m(r,o,l,d,p);break;case 33:w=this.qt(r,o,l,d);break;case 550:w=this.pt(r,o,l,d,p)}break;case 1607:switch(y){case 1736:w=this.$m(o,r,l,this.Zp(d),p);break;case 1607:w=this.gB(r,o,l,d,p);break;case 33:w=this.tt(r,o,l,d,p);break;case 550:w=this.st(r,o,l,d,p)}break;case 33:switch(y){case 1736:w=this.qt(o,r,l,this.Zp(d));break;case 1607:w=this.tt(o,r,l,this.Zp(d),p);break;case 33:w=this.$U(r,o,l,d);break;case 550:w=this.lt(o,r,l,this.Zp(d))}break;case 550:switch(y){case 1736:w=this.pt(o,r,l,this.Zp(d),p);break;case 1607:w=this.st(o,r,l,this.Zp(d),p);break;case 550:w=this.ZA(r,o,l,d,p);break;case 33:w=this.lt(r,o,l,d)}break;default:w=!1}return w},a.rt=function(r,o,l,d,p){var g=new a;g.Yi(),g.bj(d),g.xJ();var y=new u.l,w=new u.l;return r.A(y),o.A(w),d=!1,u.ud.dk(y,w,l)&&(g.Cu(r,o),d=!0),d||((y=u.ud.qc(r,o,!1))==4?(g.Cu(r,o),d=!0):y==1?(g.ly(o),d=!0):y==2&&(g.ZD(r),d=!0)),d||(r=(d=new u.gd).Ib(r),o=d.Ib(o),g.Wo(d,l,p),g.Bp(r,o),g.j.Ug()),a.fg(g.J,g.Xc)},a.Sw=function(r,o,l,d){var p=new a;p.Yi(),p.bj("T*****F**"),p.xJ();var g=new u.l,y=new u.l;r.A(g),o.A(y);var w=!1;return u.ud.dk(g,y,l)&&(p.Cu(r,o),w=!0),w||((g=u.ud.qc(r,o,!1))==4?(p.Cu(r,o),w=!0):g==1?(p.ly(o),w=!0):g==2&&(p.ZD(r),w=!0)),w?this.fg(p.J,p.Xc):(r=(w=new u.gd).Ib(r),g=w.Ib(o),u.Tk.V(w,l,d,!1),l=w.Ne(g).mg(),w.Gp(0,!0,!0),u.rn.V(w,r,-1,!1,d),w.I(r)!=0&&(u.rn.V(w,g,-1,!1,d),p.er(w,d),(o=w.I(g)==0)||(p.Bp(r,g),p.j.Ug(),g=this.fg(p.J,p.Xc))?(r=w.Ne(r),r=(w=new u.gd).Ib(r),g=w.Ib(l),p.er(w,d),p.le=0,p.Yi(),p.bj(o?"T*****F**":"******F**"),p.IB(),p.Bp(r,g),p.j.Ug(),this.fg(p.J,p.Xc)):g))},a.$m=function(r,o,l,d,p){var g=new a;g.Yi(),g.bj(d),g.IB();var y=new u.l,w=new u.l;return r.A(y),o.A(w),d=!1,u.ud.dk(y,w,l)&&(g.Du(r,o),d=!0),d||((y=u.ud.qc(r,o,!1))==4?(g.Du(r,o),d=!0):y==1&&(g.$D(o),d=!0)),d||(r=(d=new u.gd).Ib(r),o=d.Ib(o),g.Wo(d,l,p),g.kh=g.j.Dp(),a.Jw(o,g.j,g.kh),g.Bp(r,o),g.j.Ep(g.kh),g.j.Ug()),a.fg(g.J,g.Xc)},a.fB=function(r,o,l,d){var p=new a;p.Yi(),p.bj("T*****F**"),p.IB();var g=new u.l,y=new u.l;r.A(g),o.A(y);var w=!1;return u.ud.dk(g,y,l)&&(p.Du(r,o),w=!0),w||((g=u.ud.qc(r,o,!1))==4?(p.Du(r,o),w=!0):g==1&&(p.$D(o),w=!0)),w?this.fg(p.J,p.Xc):(r=(w=new u.gd).Ib(r),o=w.Ib(o),p.Wo(w,l,d),w.I(r)!=0&&(p.Bp(r,o),p.j.Ug(),this.fg(p.J,p.Xc)))},a.pt=function(r,o,l,d,p){var g=new a;g.Yi(),g.bj(d),g.yJ();var y=new u.l,w=new u.l;return r.A(y),o.A(w),d=!1,u.ud.dk(y,w,l)&&(g.Eu(r),d=!0),d||((y=u.ud.qc(r,o,!1))==4?(g.Eu(r),d=!0):y==1&&(g.zN(),d=!0)),d||(r=(d=new u.gd).Ib(r),o=d.Ib(o),g.Wo(d,l,p),g.Gy(r,o),g.j.Ug()),a.fg(g.J,g.Xc)},a.gB=function(r,o,l,d,p){var g=new a;g.Yi(),g.bj(d),g.eX(),d=new u.l;var y=new u.l;r.A(d),o.A(y);var w=!1;return u.ud.dk(d,y,l)&&(g.PG(r,o),w=!0),w||u.ud.qc(r,o,!1)!=4||(g.PG(r,o),w=!0),w||(r=(d=new u.gd).Ib(r),o=d.Ib(o),g.Wo(d,l,p),g.Yh=g.j.Dp(),g.kh=g.j.Dp(),a.Jw(r,g.j,g.Yh),a.Jw(o,g.j,g.kh),g.Bp(r,o),g.j.Ep(g.Yh),g.j.Ep(g.kh),g.j.Ug()),a.fg(g.J,g.Xc)},a.st=function(r,o,l,d,p){var g=new a;g.Yi(),g.bj(d),g.MJ(),d=new u.l;var y=new u.l;r.A(d),o.A(y);var w=!1;return u.ud.dk(d,y,l)&&(g.Vz(r),w=!0),w||u.ud.qc(r,o,!1)!=4||(g.Vz(r),w=!0),w||(r=(d=new u.gd).Ib(r),o=d.Ib(o),g.Wo(d,l,p),g.Yh=g.j.Dp(),a.Jw(r,g.j,g.Yh),g.Gy(r,o),g.j.Ep(g.Yh),g.j.Ug()),a.fg(g.J,g.Xc)},a.ZA=function(r,o,l,d,p){var g=new a;g.Yi(),g.bj(d),g.RJ(),d=new u.l;var y=new u.l;r.A(d),o.A(y);var w=!1;return u.ud.dk(d,y,l)&&(g.yI(),w=!0),w||(r=(d=new u.gd).Ib(r),o=d.Ib(o),g.Wo(d,l,p),g.Gy(r,o),g.j.Ug()),a.fg(g.J,g.Xc)},a.qt=function(r,o,l,d){var p=new a;p.Yi(),p.bj(d),p.yJ();var g=new u.l;r.A(g),o=o.D();var y=!1;return u.ud.Rw(o,g,l)&&(p.Eu(r),y=!0),y||((l=u.hd.Yd(r,o,l))==1?(p.J[0]=0,p.J[2]=2,p.J[3]=-1,p.J[5]=1,p.J[6]=-1):l==2?(p.J[6]=-1,r.Ke()!=0?(p.J[0]=-1,p.J[3]=0,p.J[2]=2,p.J[5]=1):(p.J[0]=0,p.J[3]=-1,p.J[5]=-1,l=new u.l,r.A(l),p.J[2]=l.ca()==0&&l.R()==0?-1:1)):p.Eu(r)),this.fg(p.J,d)},a.tt=function(r,o,l,d,p){var g=new a;g.Yi(),g.bj(d),g.MJ();var y=new u.l;r.A(y),d=o.D();var w=!1;if(u.ud.Rw(d,y,l)&&(g.Vz(r),w=!0),!w){y=null;var S=w=!1;(g.ea[0]||g.ea[6])&&(u.ud.Yz(r,d,l)?(g.ea[0]&&(y=u.pi.gm(r,p),S=!u.ud.kt(y,d,l),w=!0,g.J[0]=S?-1:0),g.J[6]=-1):(g.J[0]=-1,g.J[6]=0)),g.ea[3]&&(y!=null&&y.B()?g.J[3]=-1:(w||(y==null&&(y=u.pi.gm(r,p)),S=!u.ud.kt(y,d,l),w=!0),g.J[3]=S?0:-1)),g.ea[5]&&(y!=null&&y.B()?g.J[5]=-1:w&&!S?g.J[5]=0:(y==null&&(y=u.pi.gm(r,p)),p=u.ud.Nw(y,o,l),g.J[5]=p?-1:0)),g.ea[2]&&(r.Qb()!=0?g.J[2]=1:((p=new u.de(r.description)).Fd(r,0,r.I()),r=u.ud.Nw(p,o,l),g.J[2]=r?-1:0))}return this.fg(g.J,g.Xc)},a.lt=function(r,o,l,d){var p=new a;p.Yi(),p.bj(d),p.RJ();var g=new u.l;r.A(g),o=o.D();var y=!1;if(u.ud.Rw(o,g,l)&&(p.yI(),y=!0),!y){g=!1,y=!0,l*=l;for(var w=0;w<r.I();w++){var S=r.Na(w);if(u.h.yc(S,o)<=l?g=!0:y=!1,g&&!y)break}g?(p.J[0]=0,p.J[2]=y?-1:0,p.J[6]=-1):(p.J[0]=-1,p.J[2]=0,p.J[6]=0)}return a.fg(p.J,d)},a.$U=function(r,o,l,d){r=r.D(),o=o.D();for(var p=[],g=0;9>g;g++)p[g]=-1;return u.h.yc(r,o)<=l*l?p[0]=0:(p[2]=0,p[6]=0),p[8]=2,a.fg(p,d)},a.fg=function(r,o){for(var l=0;9>l;l++)switch(o.charAt(l)){case"T":if(r[l]==-1)return!1;break;case"F":if(r[l]!=-1)return!1;break;case"0":if(r[l]!=0)return!1;break;case"1":if(r[l]!=1)return!1;break;case"2":if(r[l]!=2)return!1}return!0},a.uW=function(r,o,l){var d=[-1,-1,-1,-1,-1,-1,-1,-1,-1];if(r.B()&&o.B()){for(var p=0;9>p;p++)d[p]=-1;return this.fg(d,l)}return p=!1,r.B()&&(r=o,p=!0),d[0]=-1,d[1]=-1,d[3]=-1,d[4]=-1,d[6]=-1,d[7]=-1,d[8]=2,o=r.getType(),u.aa.Hc(o)?o==1736?r.Ke()!=0?(d[2]=2,d[5]=1):(d[5]=-1,o=new u.l,r.A(o),d[2]=o.ca()==0&&o.R()==0?0:1):(o=r.Qb()!=0,d[2]=o?1:0,d[5]=u.pi.aq(r)?0:-1):(d[2]=0,d[5]=-1),p&&this.vK(d),this.fg(d,l)},a.MR=function(r,o,l){return a.dQ(r)?3:a.UP(r)?4:a.cY(r,o,l)?8:a.CP(r,o,l)?16:a.eP(r)?1:a.EU(r,o,l)?32:0},a.dQ=function(r){return r.charAt(0)=="T"&&r.charAt(1)=="*"&&r.charAt(2)=="F"&&r.charAt(3)=="*"&&r.charAt(4)=="*"&&r.charAt(5)=="F"&&r.charAt(6)=="F"&&r.charAt(7)=="F"&&r.charAt(8)=="*"},a.UP=function(r){return r.charAt(0)=="F"&&r.charAt(1)=="F"&&r.charAt(2)=="*"&&r.charAt(3)=="F"&&r.charAt(4)=="F"&&r.charAt(5)=="*"&&r.charAt(6)=="*"&&r.charAt(7)=="*"&&r.charAt(8)=="*"},a.cY=function(r,o,l){return(o!=0||l!=0)&&((o!=2||l!=2)&&(r.charAt(0)=="F"&&r.charAt(1)=="*"&&r.charAt(2)=="*"&&r.charAt(3)=="T"&&r.charAt(4)=="*"&&r.charAt(5)=="*"&&r.charAt(6)=="*"&&r.charAt(7)=="*"&&r.charAt(8)=="*"||o==1&&l==1&&r.charAt(0)=="F"&&r.charAt(1)=="T"&&r.charAt(2)=="*"&&r.charAt(3)=="*"&&r.charAt(4)=="*"&&r.charAt(5)=="*"&&r.charAt(6)=="*"&&r.charAt(7)=="*"&&r.charAt(8)=="*")||l!=0&&r.charAt(0)=="F"&&r.charAt(1)=="*"&&r.charAt(2)=="*"&&r.charAt(3)=="*"&&r.charAt(4)=="T"&&r.charAt(5)=="*"&&r.charAt(6)=="*"&&r.charAt(7)=="*"&&r.charAt(8)=="*")},a.CP=function(r,o,l){return o>l?r.charAt(0)=="T"&&r.charAt(1)=="*"&&r.charAt(2)=="*"&&r.charAt(3)=="*"&&r.charAt(4)=="*"&&r.charAt(5)=="*"&&r.charAt(6)=="T"&&r.charAt(7)=="*"&&r.charAt(8)=="*":o==1&&l==1&&r.charAt(0)=="0"&&r.charAt(1)=="*"&&r.charAt(2)=="*"&&r.charAt(3)=="*"&&r.charAt(4)=="*"&&r.charAt(5)=="*"&&r.charAt(6)=="*"&&r.charAt(7)=="*"&&r.charAt(8)=="*"},a.eP=function(r){return r.charAt(0)=="T"&&r.charAt(1)=="*"&&r.charAt(2)=="*"&&r.charAt(3)=="*"&&r.charAt(4)=="*"&&r.charAt(5)=="*"&&r.charAt(6)=="F"&&r.charAt(7)=="F"&&r.charAt(8)=="*"},a.EU=function(r,o,l){if(o==l){if(o!=1)return r.charAt(0)=="T"&&r.charAt(1)=="*"&&r.charAt(2)=="T"&&r.charAt(3)=="*"&&r.charAt(4)=="*"&&r.charAt(5)=="*"&&r.charAt(6)=="T"&&r.charAt(7)=="*"&&r.charAt(8)=="*";if(r.charAt(0)=="1"&&r.charAt(1)=="*"&&r.charAt(2)=="T"&&r.charAt(3)=="*"&&r.charAt(4)=="*"&&r.charAt(5)=="*"&&r.charAt(6)=="T"&&r.charAt(7)=="*"&&r.charAt(8)=="*")return!0}return!1},a.Jw=function(r,o,l){r=o.La(r);for(var d=o.Re;d!=-1;d=o.Rf(d))if(o.xd(d)&r){var p=o.Me(d);if(p==-1)o.nn(d,l,0);else{var g=p,y=0;do o.dh(g)&r&&y++,g=o.jc(o.xa(g));while(g!=p);o.nn(d,l,y)}}},a.Zp=function(r){var o=""+r.charAt(0);return o+=r.charAt(3),o+=r.charAt(6),o+=r.charAt(1),o+=r.charAt(4),o+=r.charAt(7),o+=r.charAt(2),(o+=r.charAt(5))+r.charAt(8)},a.prototype.Yi=function(){for(var r=0;9>r;r++)this.J[r]=-2,this.Za[r]=-2},a.vK=function(r){var o=r[1],l=r[2],d=r[5];r[1]=r[3],r[2]=r[6],r[5]=r[7],r[3]=o,r[6]=l,r[7]=d},a.prototype.bj=function(r){for(this.Xc=r,r=0;9>r;r++)this.Xc.charAt(r)!="*"?(this.ea[r]=!0,this.le++):this.ea[r]=!1},a.prototype.UJ=function(){for(var r=0;9>r;r++)this.ea[r]&&this.J[r]==-2&&(this.J[r]=-1,this.ea[r]=!1)},a.prototype.pc=function(r){return this.J[r]!=-2&&(this.J[r]==-1?(this.ea[r]=!1,this.le--,!0):this.Xc.charAt(r)!="T"&&this.Xc.charAt(r)!="F"?!(this.J[r]<this.Za[r])&&(this.ea[r]=!1,this.le--,!0):(this.ea[r]=!1,this.le--,!0))},a.prototype.xJ=function(){this.vw=0,this.Za[0]=2,this.Za[1]=1,this.Za[2]=2,this.Za[3]=1,this.Za[4]=1,this.Za[5]=1,this.Za[6]=2,this.Za[7]=1,this.Za[8]=2,this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},a.prototype.IB=function(){this.vw=1,this.Sm=3,this.Za[0]=1,this.Za[1]=0,this.Za[2]=2,this.Za[3]=1,this.Za[4]=0,this.Za[5]=1,this.Za[6]=1,this.Za[7]=0,this.Za[8]=2,this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},a.prototype.eX=function(){this.vw=2,this.Sm=4,this.Za[0]=1,this.Za[1]=0,this.Za[2]=1,this.Za[3]=0,this.Za[4]=0,this.Za[5]=0,this.Za[6]=1,this.Za[7]=0,this.Za[8]=2,this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},a.prototype.yJ=function(){this.Sm=3,this.Za[0]=0,this.Za[1]=-1,this.Za[2]=2,this.Za[3]=0,this.Za[4]=-1,this.Za[5]=1,this.Za[6]=0,this.Za[7]=-1,this.Za[8]=2,this.ea[1]&&(this.J[1]=-1,this.ea[1]=!1,this.le--),this.ea[4]&&(this.J[4]=-1,this.ea[4]=!1,this.le--),this.ea[7]&&(this.J[7]=-1,this.ea[7]=!1,this.le--),this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},a.prototype.MJ=function(){this.Sm=4,this.Za[0]=0,this.Za[1]=-1,this.Za[2]=1,this.Za[3]=0,this.Za[4]=-1,this.Za[5]=0,this.Za[6]=0,this.Za[7]=-1,this.Za[8]=2,this.ea[1]&&(this.J[1]=-1,this.ea[1]=!1,this.le--),this.ea[4]&&(this.J[4]=-1,this.ea[4]=!1,this.le--),this.ea[7]&&(this.J[7]=-1,this.ea[7]=!1,this.le--),this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},a.prototype.RJ=function(){this.Sm=5,this.Za[0]=0,this.Za[1]=-1,this.Za[2]=0,this.Za[3]=-1,this.Za[4]=-1,this.Za[5]=-1,this.Za[6]=0,this.Za[7]=-1,this.Za[8]=2,this.ea[1]&&(this.J[1]=-1,this.ea[1]=!1,this.le--),this.ea[3]&&(this.J[3]=-1,this.ea[3]=!1,this.le--),this.ea[4]&&(this.J[4]=-1,this.ea[4]=!1,this.le--),this.ea[5]&&(this.J[5]=-1,this.ea[5]=!1,this.le--),this.ea[7]&&(this.J[7]=-1,this.ea[7]=!1,this.le--),this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},a.prototype.xN=function(r,o,l){var d=!0;return this.ea[0]&&(this.CS(r,o,l),d=d&&this.pc(0)),this.ea[1]&&(this.sG(r,o,1),d=d&&this.pc(1)),this.ea[2]&&(this.tG(r,o,l,2),d=d&&this.pc(2)),this.ea[3]&&(this.sG(r,l,3),d=d&&this.pc(3)),this.ea[4]&&(this.BN(r,o,l),d=d&&this.pc(4)),this.ea[5]&&(this.eE(r,l,5),d=d&&this.pc(5)),this.ea[6]&&(this.tG(r,l,o,6),d=d&&this.pc(6)),this.ea[7]&&(this.eE(r,o,7),d=d&&this.pc(7)),d},a.prototype.Cu=function(r,o){this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.Fr(r,this.ea[2]?2:-1,this.Xc.charAt(2),this.ea[5]?5:-1,this.Xc.charAt(5)),this.Fr(o,this.ea[6]?6:-1,this.Xc.charAt(6),this.ea[7]?7:-1,this.Xc.charAt(7))},a.prototype.Fr=function(r,o,l,d,p){o==-1&&d==-1||((l!="T"&&l!="F"&&o!=-1||p!="T"&&p!="F"&&d!=-1)&&r.Ke()==0?(d!=-1&&(this.J[d]=-1),o!=-1&&(l=new u.l,r.A(l),this.J[o]=l.ca()==0&&l.R()==0?0:1)):(o!=-1&&(this.J[o]=2),d!=-1&&(this.J[d]=1)))},a.prototype.ly=function(r){this.J[2]=2,this.J[3]=-1,this.J[4]=-1,this.J[5]=1,this.J[6]=-1,this.J[7]=-1,this.Fr(r,this.ea[0]?0:-1,this.Xc.charAt(0),this.ea[1]?1:-1,this.Xc.charAt(1))},a.prototype.ZD=function(r){this.ly(r),a.vK(this.J)},a.prototype.Du=function(r,o){if(this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.ea[6]){var l=this.Xc.charAt(6);l=l=="T"||l=="F"||o.Qb()!=0,this.J[6]=l?1:0}this.ea[7]&&(o=u.pi.aq(o),this.J[7]=o?0:-1),this.Fr(r,this.ea[2]?2:-1,this.Xc.charAt(2),this.ea[5]?5:-1,this.Xc.charAt(5))},a.prototype.$D=function(r){if(this.ea[0]){var o=this.Xc.charAt(0);o=o=="T"||o=="F"||r.Qb()!=0,this.J[0]=o?1:0}this.ea[1]&&(r=u.pi.aq(r),this.J[1]=r?0:-1),this.J[2]=2,this.J[3]=-1,this.J[4]=-1,this.J[5]=1,this.J[6]=-1,this.J[7]=-1},a.prototype.Eu=function(r){this.J[0]=-1,this.J[3]=-1,this.J[6]=0,this.Fr(r,this.ea[2]?2:-1,this.Xc.charAt(2),this.ea[5]?5:-1,this.Xc.charAt(5))},a.prototype.zN=function(){this.J[0]=0,this.J[2]=2,this.J[3]=-1,this.J[5]=1,this.J[6]=-1},a.prototype.PG=function(r,o){if(this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.ea[2]){var l=this.Xc.charAt(2);l=l=="T"||l=="F"||r.Qb()!=0,this.J[2]=l?1:0}this.ea[5]&&(r=u.pi.aq(r),this.J[5]=r?0:-1),this.ea[6]&&(l=(l=this.Xc.charAt(6))=="T"||l=="F"||o.Qb()!=0,this.J[6]=l?1:0),this.ea[7]&&(o=u.pi.aq(o),this.J[7]=o?0:-1)},a.prototype.Vz=function(r){if(this.J[0]=-1,this.J[3]=-1,this.ea[2]){var o=this.Xc.charAt(2);o=o=="T"||o=="F"||r.Qb()!=0,this.J[2]=o?1:0}this.ea[5]&&(r=u.pi.aq(r),this.J[5]=r?0:-1),this.J[6]=0},a.prototype.yI=function(){this.J[0]=-1,this.J[2]=0,this.J[6]=0},a.prototype.yN=function(r,o,l){var d=!0;return this.ea[0]&&(this.DS(r,o),d=d&&this.pc(0)),this.ea[1]&&(this.zS(r,o,l,this.kh),d=d&&this.pc(1)),this.ea[2]&&(this.AS(r,o),d=d&&this.pc(2)),this.ea[3]&&(this.FN(r,o,l,this.kh),d=d&&this.pc(3)),this.ea[4]&&(this.CN(r,o,l,this.kh),d=d&&this.pc(4)),this.ea[5]&&(this.DN(r,o,l),d=d&&this.pc(5)),this.ea[6]&&(this.lQ(r,o),d=d&&this.pc(6)),this.ea[7]&&(this.kQ(r,o,l,this.kh),d=d&&this.pc(7)),d},a.prototype.mT=function(r,o,l){var d=!0;return this.ea[0]&&(this.GS(r,o,l,this.Yh,this.kh),d=d&&this.pc(0)),this.ea[1]&&(this.uG(r,o,l,this.Yh,this.kh,1),d=d&&this.pc(1)),this.ea[2]&&(this.vG(r,o,l,2),d=d&&this.pc(2)),this.ea[3]&&(this.uG(r,l,o,this.kh,this.Yh,3),d=d&&this.pc(3)),this.ea[4]&&(this.HN(r,o,l,this.Yh,this.kh),d=d&&this.pc(4)),this.ea[5]&&(this.fE(r,l,this.Yh,5),d=d&&this.pc(5)),this.ea[6]&&(this.vG(r,l,o,6),d=d&&this.pc(6)),this.ea[7]&&(this.fE(r,o,this.kh,7),d=d&&this.pc(7)),d},a.prototype.aE=function(r,o,l){var d=!0;return this.ea[0]&&(this.ES(r,o),d=d&&this.pc(0)),this.ea[2]&&(this.BS(r,o),d=d&&this.pc(2)),this.ea[3]&&(this.GN(r,o,l),d=d&&this.pc(3)),this.ea[5]&&(this.EN(r,o),d=d&&this.pc(5)),this.ea[6]&&(this.mQ(r,o),d=d&&this.pc(6)),d},a.prototype.QG=function(r,o,l){var d=!0;return this.ea[0]&&(this.HS(r,o,l,this.Yh),d=d&&this.pc(0)),this.ea[2]&&(this.FS(r,l),d=d&&this.pc(2)),this.ea[3]&&(this.JN(r,o,l,this.Yh),d=d&&this.pc(3)),this.ea[5]&&(this.IN(r,o,l,this.Yh),d=d&&this.pc(5)),this.ea[6]&&(this.nQ(r,o,l),d=d&&this.pc(6)),d},a.prototype.ZU=function(r,o,l){var d=!0;return this.ea[0]&&(this.IS(r,o,l),d=d&&this.pc(0)),this.ea[2]&&(this.wG(r,o,l,2),d=d&&this.pc(2)),this.ea[6]&&(this.wG(r,l,o,6),d=d&&this.pc(6)),d},a.prototype.CS=function(r,o,l){this.J[0]!=2&&(r=this.j.af(r))&o&&r&l&&(this.J[0]=2)},a.prototype.sG=function(r,o,l){if(this.J[l]!=1){var d=this.j.af(this.j.xa(r));this.j.af(r)&o&&d&o&&(this.J[l]=1)}},a.prototype.tG=function(r,o,l,d){this.J[d]!=2&&(r=this.j.af(r))&o&&!(r&l)&&(this.J[d]=2)},a.prototype.BN=function(r,o,l){if(this.J[4]!=1){var d=this.j.dh(r);d&o&&d&l?this.J[4]=1:this.J[4]!=0&&this.j.Ab(this.j.te(this.j.xa(r)),this.Ui)!=1&&(r=this.j.xd(this.j.uf(r)))&o&&r&l&&(this.J[4]=0)}},a.prototype.eE=function(r,o,l){if(this.J[l]!=1){var d=this.j.af(this.j.xa(r));!(this.j.af(r)&o)&&!(d&o)&&(this.J[l]=1)}},a.prototype.DS=function(r,o){if(this.J[0]!=1){var l=this.j.af(this.j.xa(r));this.j.af(r)&o&&l&o&&(this.J[0]=1)}},a.prototype.zS=function(r,o,l,d){if(this.J[1]!=0&&this.j.Ab(this.j.te(this.j.xa(r)),this.Ui)!=1){var p=this.j.uf(r),g=this.j.xd(p);!(g&o)&&this.j.af(r)&o&&(r=this.j.ng(p,d),g&l&&r%2!=0&&(this.J[1]=0))}},a.prototype.AS=function(r,o){this.J[2]!=2&&this.j.dh(r)&o&&(this.J[2]=2)},a.prototype.FN=function(r,o,l,d){if(this.J[3]!=1){var p=this.j.dh(r);p&o&&p&l?this.J[3]=1:this.J[3]!=0&&this.j.Ab(this.j.te(this.j.xa(r)),this.Ui)!=1&&(p=this.j.uf(r),(r=this.j.xd(p))&o&&(o=this.j.ng(p,d),r&l&&o%2==0&&(this.J[3]=0)))}},a.prototype.CN=function(r,o,l,d){if(this.J[4]!=0&&this.j.Ab(this.j.te(this.j.xa(r)),this.Ui)!=1){var p=this.j.uf(r);(r=this.j.xd(p))&o&&(o=this.j.ng(p,d),r&l&&o%2!=0&&(this.J[4]=0))}},a.prototype.DN=function(r,o,l){this.J[5]!=1&&(r=this.j.dh(r))&o&&!(r&l)&&(this.J[5]=1)},a.prototype.lQ=function(r,o){if(this.J[6]!=1){var l=this.j.af(this.j.xa(r));!(this.j.af(r)&o)&&!(l&o)&&(this.J[6]=1)}},a.prototype.kQ=function(r,o,l,d){if(this.J[7]!=0&&this.j.Ab(this.j.te(this.j.xa(r)),this.Ui)!=1){var p=this.j.uf(r),g=this.j.xd(p);!(g&o)&&!(this.j.af(r)&o)&&(r=this.j.ng(p,d),g&l&&r%2!=0&&(this.J[7]=0))}},a.prototype.GS=function(r,o,l,d,p){if(this.J[0]!=1){var g=this.j.dh(r);g&o&&g&l?this.J[0]=1:this.J[0]!=0&&this.j.Ab(this.j.te(this.j.xa(r)),this.Ui)!=1&&(r=this.j.uf(r),(g=this.j.xd(r))&o&&g&l&&(o=this.j.ng(r,d),p=this.j.ng(r,p),o%2==0&&p%2==0&&(this.J[0]=0)))}},a.prototype.uG=function(r,o,l,d,p,g){if(this.J[g]!=0&&this.j.Ab(this.j.te(this.j.xa(r)),this.Ui)!=1){r=this.j.uf(r);var y=this.j.xd(r);y&o&&y&l&&(o=this.j.ng(r,d),p=this.j.ng(r,p),o%2==0&&p%2!=0&&(this.J[g]=0))}},a.prototype.vG=function(r,o,l,d){this.J[d]!=1&&(r=this.j.dh(r))&o&&!(r&l)&&(this.J[d]=1)},a.prototype.HN=function(r,o,l,d,p){if(this.J[4]!=0&&this.j.Ab(this.j.te(this.j.xa(r)),this.Ui)!=1){r=this.j.uf(r);var g=this.j.xd(r);g&o&&g&l&&(o=this.j.ng(r,d),p=this.j.ng(r,p),o%2!=0&&p%2!=0&&(this.J[4]=0))}},a.prototype.fE=function(r,o,l,d){this.J[d]!=0&&this.j.Ab(this.j.te(this.j.xa(r)),this.Ui)!=1&&(r=this.j.uf(r),!(this.j.xd(r)&o)&&this.j.ng(r,l)%2!=0&&(this.J[d]=0))},a.prototype.ES=function(r,o){this.J[0]!=0&&!(this.j.xd(r)&o)&&this.j.hk(this.j.cz(r))&o&&(this.J[0]=0)},a.prototype.BS=function(r,o){this.J[2]!=2&&this.j.xd(r)&o&&(this.J[2]=2)},a.prototype.GN=function(r,o,l){this.J[3]!=0&&(r=this.j.xd(r))&o&&r&l&&(this.J[3]=0)},a.prototype.EN=function(r,o){this.J[5]!=1&&this.j.xd(r)&o&&(this.J[5]=1)},a.prototype.mQ=function(r,o){this.J[6]!=0&&!(this.j.xd(r)&o)&&!(this.j.hk(this.j.cz(r))&o)&&(this.J[6]=0)},a.prototype.HS=function(r,o,l,d){if(this.J[0]!=0){var p=this.j.xd(r);p&o&&p&l&&this.j.ng(r,d)%2==0&&(this.J[0]=0)}},a.prototype.FS=function(r,o){this.J[2]!=1&&(this.j.Me(r)!=-1?this.J[2]=1:this.J[2]!=0&&!(this.j.xd(r)&o)&&(this.J[2]=0))},a.prototype.JN=function(r,o,l,d){if(this.J[3]!=0){var p=this.j.xd(r);p&o&&p&l&&this.j.ng(r,d)%2!=0&&(this.J[3]=0)}},a.prototype.IN=function(r,o,l,d){if(this.J[5]!=0){var p=this.j.xd(r);p&o&&!(p&l)&&this.j.ng(r,d)%2!=0&&(this.J[5]=0)}},a.prototype.nQ=function(r,o,l){this.J[6]!=0&&!((r=this.j.xd(r))&o)&&r&l&&(this.J[6]=0)},a.prototype.IS=function(r,o,l){this.J[0]!=0&&(r=this.j.xd(r))&o&&r&l&&(this.J[0]=0)},a.prototype.wG=function(r,o,l,d){this.J[d]!=0&&(r=this.j.xd(r))&o&&!(r&l)&&(this.J[d]=0)},a.prototype.Bp=function(r,o){var l=!1;r=this.j.La(r),o=this.j.La(o),this.Ui=this.j.$g();for(var d=this.j.Re;d!=-1;d=this.j.Rf(d)){var p=this.j.Me(d);if(p==-1){if(this.Sm!=-1)switch(this.Sm){case 3:l=this.aE(d,r,o);break;case 4:l=this.QG(d,r,o);break;default:throw u.i.fa("internal error")}}else{var g=p;do{var y=g;if(this.j.Ab(y,this.Ui)!=1)do{switch(this.vw){case 0:l=this.xN(y,r,o);break;case 1:l=this.yN(y,r,o);break;case 2:l=this.mT(y,r,o);break;default:throw u.i.fa("internal error")}if(l)break;this.j.Kb(y,this.Ui,1),y=this.j.jc(y)}while(y!=g&&!l);if(l)break;g=this.j.jc(this.j.xa(y))}while(g!=p);if(l)break}}l||this.UJ(),this.j.Jg(this.Ui)},a.prototype.Gy=function(r,o){var l=!1;r=this.j.La(r),o=this.j.La(o);for(var d=this.j.Re;d!=-1;d=this.j.Rf(d)){switch(this.Sm){case 3:l=this.aE(d,r,o);break;case 4:l=this.QG(d,r,o);break;case 5:l=this.ZU(d,r,o);break;default:throw u.i.Qa()}if(l)break}l||this.UJ()},a.prototype.er=function(r,o){this.j.dr(r,o)},a.prototype.Wo=function(r,o,l){this.YP(r,o,l),this.er(r,l)},a.prototype.YP=function(r,o,l){for(u.Tk.V(r,o,l,!1),r.Gp(0,!0,!0),o=r.ld;o!=-1;o=r.ue(o))r.ic(o)==1736&&u.rn.V(r,o,-1,!1,l)},a.WE=function(r,o){var l=r.getType();return u.aa.yd(l)?((o=new u.Ta(r.description)).oc(r,!0),o):l==197?(l=new u.l,r.A(l),l.ca()<=o&&l.R()<=o?(o=new u.Sa(r.description),r.sf(o),o):l.ca()<=o||l.R()<=o?(o=new u.Ta(r.description),l=new u.Sa,r.Hf(0,l),o.nf(l),r.Hf(2,l),o.lineTo(l),o):((o=new u.Da(r.description)).ad(r,!1),o)):r},a}(),u.am=A}(B||(B={})),function(u){var A=function(){function a(r){this.Em=new u.ia(0),this.dw=new u.ia(0),this.wt=new u.h,this.xt=new u.h,this.g=r,this.Hs=-1}return a.prototype.bc=function(r){return this.g.bc(this.zz(r))},a.prototype.Bv=function(r){var o=this.iz(r);if(r=this.HF(r),this.g.Ma(o)==r){var l=o;o=r,r=l}return this.g.Gc(o,this.wt),this.g.Gc(r,this.xt),this.wt.y<this.xt.y},a.prototype.zz=function(r){var o=this.iz(r);return r=this.HF(r),this.g.U(o)==r?o:r},a.prototype.iz=function(r){return this.Em.get(r)},a.prototype.HF=function(r){return this.dw.get(r)},a.prototype.rF=function(r){this.Em.set(r,this.Hs),this.Hs=r},a.prototype.nI=function(r){if(this.Hs!=-1){var o=this.Hs;return this.Hs=this.Em.get(o),this.Em.set(o,r),this.dw.set(o,this.g.U(r)),o}return this.Em==null&&(this.Em=new u.ia(0),this.dw=new u.ia(0)),o=this.Em.size,this.Em.add(r),this.dw.add(this.g.U(r)),o},a.prototype.rz=function(r){return this.g.bd(this.iz(r))},a}();u.yY=A;var b=function(){function a(r){this.Be=r,this.ie=new u.yb,this.Nm=new u.yb,this.CH=0,this.Ao=null,this.yA=-1}return a.prototype.compare=function(r,o,l){l=r.ja(l);var d=this.Be.hb;if(this.yA==o)var p=this.CH;else this.Ao=d.bc(o),this.Ao==null?((r=d.g).ed(d.zz(o),this.ie),this.Ao=this.ie,p=this.ie.Pe(this.Be.yh,0)):p=this.Ao.Pe(this.Be.yh,0),this.CH=p,this.yA=o;if((r=d.bc(l))==null){(r=d.g).ed(d.zz(l),this.Nm),r=this.Nm;var g=this.Nm.Pe(this.Be.yh,0)}else g=r.Pe(this.Be.yh,0);return p==g&&(o=d.Bv(o),l=d.Bv(l),(o=.5*((l=Math.min(o?this.Ao.la:this.Ao.na,l?r.la:r.na))+this.Be.yh))==this.Be.yh&&(o=l),p=this.Ao.Pe(o,0),g=r.Pe(o,0)),p<g?-1:p>g?1:0},a.prototype.reset=function(){this.yA=-1},a}(),c=function(){function a(){this.Wm=this.Gl=null,this.fb=new u.Yj,this.fb.RP(),this.$d=new b(this),this.fb.Vo(this.$d)}return a.prototype.HQ=function(){var r=!1;if(this.fw&&(r=this.IQ()),this.g.da(this.X)==1){var o=this.g.Ob(this.X);return r=this.g.wz(o),this.g.PB(o,!0),0>r&&(r=this.g.Xa(o),this.g.pJ(r),this.g.Wg(o,this.g.Ma(r)),!0)}for(this.El=this.g.Ky(),this.wo=this.g.Ky(),o=this.g.Ob(this.X);o!=-1;o=this.g.Rb(o))this.g.gr(o,this.El,0),this.g.gr(o,this.wo,-1);o=new u.ia(0),this.yh=NaN;var l=new u.h;this.et=this.g.da(this.X),this.ro=this.g.Gd(),this.Rs=this.g.Gd();for(var d=this.Gl.rc(this.Gl.je);d!=-1;d=this.Gl.lb(d)){var p=this.Gl.getData(d);if(this.g.Gc(p,l),l.y!=this.yh&&o.size!=0&&(r=this.ut(o)||r,this.$d.reset(),o.clear(!1)),o.add(p),this.yh=l.y,this.et==0)break}for(0<this.et&&(r=this.ut(o)||r,o.clear(!1)),this.g.Td(this.ro),this.g.Td(this.Rs),o=this.g.Ob(this.X);o!=-1;)if(this.g.sj(o,this.El)==3){for(this.g.PB(o,!0),l=o,o=this.g.sj(o,this.wo);o!=-1;)d=this.g.sj(o,this.wo),this.g.ZT(this.X,this.g.Rb(l),o),l=o,o=d;o=this.g.Rb(l)}else this.g.PB(o,!1),o=this.g.Rb(o);return this.g.CB(this.El),this.g.CB(this.wo),r},a.prototype.ut=function(r){return this.$V(r)},a.prototype.$V=function(r){var o=!1;this.hb==null&&(this.hb=new A(this.g)),this.Wm==null?(this.Wm=new u.ia(0),this.Wm.Jb(16)):this.Wm.clear(!1),this.ZV(r);for(var l=0,d=r.size;l<d;l++){var p=r.get(l);p!=-1&&this.oG(p,-1)}for(l=0;l<this.Wm.size&&0<this.et;l++)if(r=this.Wm.get(l),p=this.hb.rz(this.fb.ja(r)),d=-1,this.g.sj(p,this.El)==0){p=this.fb.we(r);for(var g,y=r;p!=-1;){var w=this.fb.ja(p),S=this.hb.rz(w),k=this.g.sj(S,this.El);if(k!=0){d=S;break}y=p,p=this.fb.we(p)}p==-1?(g=!0,p=y):(w=this.fb.ja(p),g=this.hb.Bv(w),p=this.fb.lb(p),g=!g);do{if(w=this.fb.ja(p),S=this.hb.rz(w),(k=this.g.sj(S,this.El))==0&&(g!=this.hb.Bv(w)&&(o=this.g.Xa(S),this.g.pJ(o),this.g.Wg(S,this.g.Ma(o)),o=!0),this.g.gr(S,this.El,g?3:2),g||(y=this.g.sj(d,this.wo),this.g.gr(d,this.wo,S),this.g.gr(S,this.wo,y)),this.et--,this.et==0))return o;d=S,y=p,p=this.fb.lb(p),g=!g}while(y!=r)}return o},a.prototype.ZV=function(r){for(var o=0,l=r.size;o<l;o++){var d=r.get(o),p=this.g.Pa(d,this.ro),g=this.g.Pa(d,this.Rs);if(p!=-1){var y=this.fb.ja(p);this.hb.rF(y),this.g.Ra(d,this.ro,-1)}g!=-1&&(y=this.fb.ja(g),this.hb.rF(y),this.g.Ra(d,this.Rs,-1)),y=-1,p!=-1&&g!=-1?(this.fb.vd(p,-1),this.fb.vd(g,-1),r.set(o,-1)):y=p!=-1?p:g,y!=-1&&(this.oG(d,y)||this.fb.vd(y,-1),r.set(o,-1))}},a.prototype.oG=function(r,o){var l=new u.h,d=new u.h;this.g.Gc(r,l);var p=this.g.U(r);this.g.Gc(p,d);var g=!1;if(l.y<d.y){g=!0;var y=this.hb.nI(r);if(o==-1)var w=this.fb.addElement(y,-1);else w=o,this.fb.Sj(w,y);(y=this.g.Pa(p,this.ro))==-1?this.g.Ra(p,this.ro,w):this.g.Ra(p,this.Rs,w),p=this.g.bd(r),this.g.sj(p,this.El)==0&&this.Wm.add(w)}return p=this.g.Ma(r),this.g.Gc(p,d),l.y<d.y&&(g=!0,y=this.hb.nI(p),o==-1?w=this.fb.addElement(y,-1):(w=o,this.fb.Sj(w,y)),(y=this.g.Pa(p,this.ro))==-1?this.g.Ra(p,this.ro,w):this.g.Ra(p,this.Rs,w),p=this.g.bd(r),this.g.sj(p,this.El)==0&&this.Wm.add(w)),g},a.V=function(r,o,l,d){var p=new a;return p.g=r,p.X=o,p.Gl=l,p.fw=d,p.HQ()},a.prototype.IQ=function(){var r=new u.ia(0),o=new u.ia(0),l=-1,d=-1,p=new u.h;p.Rc();for(var g=-1,y=-1,w=-1,S=new u.h,k=this.Gl.rc(this.Gl.je);k!=-1;k=this.Gl.lb(k)){var C=this.Gl.getData(k);this.g.Gc(C,S);var O=this.g.bd(C);p.qb(S)&&y==O?(d==-1&&(l=this.g.Ky(),d=this.g.Gd()),w==-1&&(w=o.size,this.g.Ra(g,d,w),o.add(1),this.g.sj(O,l)==-1&&(this.g.gr(O,l,g),r.add(O))),this.g.Ra(C,d,w),o.bX(o.Fc()+1)):(w=-1,p.L(S)),g=C,y=O}if(r.size==0)return!1;for(p=new u.ia(0),g=new u.ia(0),y=0,w=r.size;y<w;y++){O=r.get(y);var R=this.g.sj(O,l);for(C=this.g.Pa(R,d),p.clear(!1),g.clear(!1),p.add(R),g.add(C),C=this.g.U(R);C!=R;C=this.g.U(C)){var N=C;if((S=this.g.Pa(N,d))!=-1)if(g.size==0)g.add(S),p.add(N);else if(g.Fc()==S){k=p.Fc();var j=this.g.U(k);R=this.g.U(N),this.g.Bc(k,R),this.g.Cc(R,k),this.g.Bc(N,j),this.g.Cc(j,N),N=[!1],j=this.g.nG(this.X,j,this.g.Xa(O),N),this.g.Ra(C,d,-1),N[0]&&this.g.Jf(O,R),C=this.g.Ja(O),C-=R=this.g.Ja(j),this.g.Vj(O,C),o.set(S,o.get(S)-1),o.get(S)==1&&(o.set(S,0),g.If(),p.If()),C=R=k}else p.add(C),g.add(S)}}return this.g.CB(l),this.g.Td(d),!0},a}();u.WL=c}(B||(B={})),function(u){var A=function(){function b(){}return b.prototype.ig=function(){this.PA=this.sb=null},b.prototype.get=function(){return this.PA},b.prototype.set=function(c){if(this.PA=c,c!=null)throw c.getType()==322&&(this.sb=c),u.i.Qa()},b.prototype.create=function(c){if(c!=322)throw u.i.fa("Not Implemented");this.Or()},b.prototype.Or=function(){this.sb==null&&(this.sb=new u.yb),this.PA=this.sb},b}();u.ig=A}(B||(B={})),function(u){(u=u.XL||(u.XL={}))[u.enumLineSeg=1]="enumLineSeg",u[u.enumBezierSeg=2]="enumBezierSeg",u[u.enumArcSeg=4]="enumArcSeg",u[u.enumNonlinearSegmentMask=6]="enumNonlinearSegmentMask",u[u.enumSegmentMask=7]="enumSegmentMask",u[u.enumDensified=8]="enumDensified"}(B||(B={})),function(u){var A=function(c){this.$i=c,this.qC=this.rC=1,this.sB=this.rB=this.tB=0},b=function(){function c(){this.Fq=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.Bk=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.Bf=new u.Sa,this.qa=this.Cw=0,this.mo=[],this.$s=[],this.yw=[],this.Iq=[],this.MA=[]}return c.prototype.wB=function(a){if(a!=null){for(var r=0,o=a.length;r<o;r++)this.rW(a[r]);a.length=0}},c.prototype.rW=function(a){a.$i=null,this.Iq.push(a)},c.prototype.Ow=function(a){if(this.Iq.length===0)var r=new A(a);else(r=this.Iq[this.Iq.length-1]).$i=a,--this.Iq.length;return r},c.prototype.SR=function(a,r){return a==0?this.$s[r]:this.yw[r]},c.prototype.aB=function(){this.Cw>=this.MA.length&&this.MA.push(new u.ig);var a=this.MA[this.Cw];return this.Cw++,a},c.prototype.clear=function(){this.wB(this.mo),this.wB(this.$s),this.wB(this.yw),this.Cw=0},c.prototype.Oo=function(a){this.mo.push(this.Ow(a))},c.prototype.ol=function(a){return a==0?this.$s.length:this.yw.length},c.prototype.Vp=function(a,r){return this.SR(a,r).$i},c.prototype.Ea=function(a,r){if(this.mo.length!=2)throw u.i.Qa();this.qa=a;var o=u.lc.ox(.01*a),l=!1,d=this.mo[0],p=this.mo[1];if(r||5&d.$i.zr(p.$i,a,!0)){if(d.$i.getType()==322){var g=d.$i;if(p.$i.getType()==322){r=p.$i;var y=u.yb.Zx(g,r,null,this.Fq,this.Bk,a);if(y==0)throw u.yb.Zx(g,r,null,this.Fq,this.Bk,a),u.i.Qa();a=Array(9),u.O.$u(a,null);for(var w=0;w<y;w++){var S=this.Fq[w],k=this.Bk[w],C=d.sB,O=1;S==0?(C=d.tB,O=d.rC):S==1&&(C=d.rB,O=d.qC);var R=p.sB,N=1;k==0?(R=p.tB,N=p.rC):k==1&&(R=p.rB,N=p.qC);var j=new u.h;C==R?(C=new u.h,g.hc(S,C),S=new u.h,r.hc(k,S),N/=k=O+N,u.lc.OG(C,S,N,j),u.h.yc(j,C)+u.h.yc(j,S)>o&&(l=!0)):C>R?(g.hc(S,j),S=new u.h,r.hc(k,S),u.h.yc(j,S)>o&&(l=!0)):(r.hc(k,j),C=new u.h,g.hc(S,C),u.h.yc(j,C)>o&&(l=!0)),a[w]=j}for(d=0,p=-1,w=0;w<=y;w++)(N=w<y?this.Fq[w]:1)!=d&&(o=this.aB(),g.ah(d,N,o),p!=-1&&o.get().Dc(a[p]),w!=y&&o.get().Qc(a[w]),d=N,this.$s.push(this.Ow(o.get()))),p=w;for(g=[0,0,0,0,0,0,0,0,0],w=0;w<y;w++)g[w]=w;for(1<y&&this.Bk[0]>this.Bk[1]&&(N=this.Bk[0],this.Bk[0]=this.Bk[1],this.Bk[1]=N,w=g[0],g[0]=g[1],g[1]=w),d=0,p=-1,w=0;w<=y;w++)(N=w<y?this.Bk[w]:1)!=d&&(o=this.aB(),r.ah(d,N,o),p!=-1&&(d=g[p],o.get().Dc(a[d])),w!=y&&(d=g[w],o.get().Qc(a[d])),d=N,this.yw.push(this.Ow(o.get()))),p=w;return l}}throw u.i.Qa()}return!1},c.prototype.Kz=function(a,r,o){if(r.copyTo(this.Bf),this.mo.length!=1)throw u.i.Qa();this.qa=a;var l=this.mo[0];if(o||l.$i.ru(r.D(),a,!0)){if(l.$i.getType()!=322)throw u.i.Qa();var d=(a=l.$i).fe(r.D(),!1);this.Fq[0]=d;var p=l.sB;for(o=1,d==0?(p=l.tB,o=l.rC):d==1&&(p=l.rB,o=l.qC),l=new u.h,p==0?(p=new u.h,a.hc(d,p),r=r.D(),u.lc.OG(p,r,1/(o+1),l)):0<p?(l=new u.h,a.hc(d,l)):l=r.D(),o=0,d=-1,p=0;1>=p;p++){if((r=1>p?this.Fq[p]:1)!=o){var g=this.aB();a.ah(o,r,g),d!=-1&&g.get().Dc(l),p!=1&&g.get().Qc(l),o=r,this.$s.push(this.Ow(g.get()))}d=p}this.Bf.Cb(l)}},c}();u.TC=b}(B||(B={})),function(u){var A=function(){function b(c){this.Ds=this.rk=this.sb=null,this.ag=0,this.zm=!1,this.zf=-1,this.Cl=this.Jd=0,this.gb=-1,this.ib=c,this.ag=this.Wx(this.Cl),this.zm=!1,this.rk=null,this.Ds=new u.h}return b.prototype.BW=function(c){if(this.ib!=c.ib)throw u.i.Hb();this.zf=c.zf,this.Jd=c.Jd,this.gb=c.gb,this.Cl=c.Cl,this.ag=c.ag,this.zm=c.zm,this.rk=null},b.prototype.ha=function(){if(this.zf!=this.Jd&&this.BD(),this.zm)this.Jd=(this.Jd+1)%this.ag;else{if(this.Jd==this.ag)throw u.i.ce();this.Jd++}return this.rk},b.prototype.li=function(){if(this.zm)this.Jd=(this.ag+this.Jd-1)%this.ag;else{if(this.Jd==0)throw u.i.ce();this.Jd--}return this.Jd!=this.zf&&this.BD(),this.rk},b.prototype.DW=function(){this.zf=-1,this.Jd=0},b.prototype.EW=function(){this.Jd=this.ag,this.zf=-1},b.prototype.Vb=function(c,a){if(a===void 0&&(a=-1),0<=this.gb&&this.gb<this.ib.da()){var r=this.IM();if(c>=r&&c<this.ib.Vc(this.gb))return this.zf=-1,void(this.Jd=c-r)}a=0<=a&&a<this.ib.da()&&c>=this.ib.Ba(a)&&c<this.ib.Vc(a)?a:this.ib.sz(c),this.Cl=a+1,this.gb=a,this.zf=-1,this.Jd=c-this.ib.Ba(a),this.ag=this.Wx(a),this.ib.Ba(this.gb),this.ib.dc(this.gb)},b.prototype.$a=function(){return this.gb=this.Cl,!(this.gb>=this.ib.da())&&(this.zf=-1,this.Jd=0,this.ag=this.Wx(this.gb),this.ib.Ba(this.gb),this.ib.dc(this.gb),this.Cl++,!0)},b.prototype.Zi=function(){this.ag=this.Jd=this.zf=-1,this.Cl=0,this.gb=-1},b.prototype.Wx=function(c){if(this.ib.Ac())return 0;var a=1;return this.ib.dc(c)&&(a=0),this.ib.Ja(c)-a},b.prototype.On=function(){return this.zf==this.ag-1&&this.ib.dc(this.gb)},b.prototype.JB=function(){this.zm=!0},b.prototype.wb=function(){return this.ib.nb.o[this.gb]+this.zf},b.prototype.IM=function(){return this.ib.Ba(this.gb)},b.prototype.ik=function(){return this.On()?this.ib.Ba(this.gb):this.wb()+1},b.prototype.vm=function(){return this.zf==0},b.prototype.Qn=function(){return this.zf==this.ag-1},b.prototype.Ha=function(){return this.Jd<this.ag},b.prototype.Ez=function(){return 0<this.Jd},b.prototype.Of=function(){var c=new b(this.ib);return c.zf=this.zf,c.Jd=this.Jd,c.ag=this.ag,c.gb=this.gb,c.Cl=this.Cl,c.ib=this.ib,c.zm=this.zm,c},b.prototype.BD=function(){if(0>this.Jd||this.Jd>=this.ag)throw u.i.ce();this.zf=this.Jd;var c=this.wb();this.ib.mc();var a=this.ib.Ve,r=1;switch(a!=null&&(r=7&a.read(c)),a=this.ib.description,r){case 1:this.sb==null&&(this.sb=new u.yb),this.rk=this.sb;break;case 2:throw u.i.fa("internal error");default:throw u.i.Qa()}this.rk.Nf(a),r=this.ik(),this.ib.Gc(c,this.Ds),this.rk.Dc(this.Ds),this.ib.Gc(r,this.Ds),this.rk.Qc(this.Ds);for(var o=1,l=a.Aa;o<l;o++)for(var d=a.kd(o),p=u.ra.Va(d),g=0;g<p;g++){var y=this.ib.Uc(d,c,g);this.rk.YB(d,g,y),y=this.ib.Uc(d,r,g),this.rk.OB(d,g,y)}},b.prototype.$S=function(){return this.gb==this.ib.da()-1},b.prototype.Pn=function(){var c=this.ib.VR();return c!=null&&(7&c.read(this.zf))!=1},b}();u.YL=A}(B||(B={})),function(u){var A=function(){function b(c){c instanceof u.aa?(this.xH=c,this.ya=-1,this.Ei=1):(this.vT=c.slice(0),this.ya=-1,this.Ei=c.length)}return b.prototype.La=function(){return this.ya},b.prototype.next=function(){return this.ya<this.Ei-1?(this.ya++,this.xH!=null?this.xH:this.vT[this.ya]):null},b.prototype.qe=function(){},b}();u.Zc=A}(B||(B={})),function(u){var A=function(){this.next=null},b=function(){function c(){this.Tq=this.Kw=this.Lw=0,this.kF=!1,this.gK=0,this.gn=this.Kf=this.Wl=this.Jh=null,this.Ol=0,this.vy=null,this.pl=this.oi=-1}return c.prototype.AX=function(a,r,o){this.oi=a,this.pl=r,this.Jh=this.Wl=null,this.Tq=0,this.vy=o,this.gn==null&&(this.gn=u.O.lg(384,0)),this.nK()},c.prototype.R=function(){return this.oi},c.prototype.ca=function(){return this.pl},c.prototype.flush=function(){0<this.Ol&&(this.vy.gF(this.gn,this.Ol),this.Ol=0)},c.prototype.nK=function(){if(0<this.Tq){for(var a=0;a<this.pl;a++){for(var r=this.Wl[a];r!=null;){var o=r;r=r.next,o.next=null}this.Wl[a]=null}this.Jh=null}this.Lw=this.pl,this.Kw=-1,this.Tq=0},c.prototype.iJ=function(a){for(this.kF=a==c.Cx,a=this.Lw;a<=this.Kw;a++)this.sN(),this.lN(a),this.ZP();this.nK()},c.prototype.jy=function(a,r,o,l){if(r!=l){var d=1;if(r>l&&(d=a,a=o,o=d,d=r,r=l,l=d,d=-1),!(0>l||r>=this.pl)){0>a&&0>o?o=a=-1:a>=this.oi&&o>=this.oi&&(o=a=this.oi);var p=(o-a)/(l-r);l>this.pl&&(o=p*((l=this.pl)-r)+a),0>r&&(a=p*(0-r)+a,r=0);var g=Math.max(this.oi+1,8388607);-8388607>a?(r=(0-a)/p+r,a=0):a>g&&(r=(this.oi-a)/p+r,a=this.oi),-8388607>o?l=(0-a)/p+r:o>g&&(l=(this.oi-a)/p+r),(r=u.O.truncate(r))!=(l=u.O.truncate(l))&&((o=new A).x=u.O.truncate(4294967296*a),o.y=r,o.H=l,o.WP=u.O.truncate(4294967296*p),o.dir=d,this.Wl==null&&(this.Wl=u.O.lg(this.pl,null)),o.next=this.Wl[o.y],this.Wl[o.y]=o,o.y<this.Lw&&(this.Lw=o.y),o.H>this.Kw&&(this.Kw=o.H),this.Tq++)}}},c.prototype.sN=function(){if(this.Jh!=null){for(var a=!1,r=null,o=this.Jh;o!=null;)if(o.y++,o.y==o.H){var l=o;o=o.next,r!=null?r.next=o:this.Jh=o,l.next=null}else o.x+=o.WP,r!=null&&r.x>o.x&&(a=!0),r=o,o=o.next;a&&(this.Jh=this.fK(this.Jh))}},c.prototype.lN=function(a){if(!(a>=this.pl)){var r=this.Wl[a];if(r!=null){this.Wl[a]=null,r=this.fK(r),this.Tq-=this.gK,a=this.Jh;for(var o=!0,l=r,d=null;a!=null&&l!=null;)a.x>l.x?(o&&(this.Jh=l),o=l.next,l.next=a,d!=null&&(d.next=l),d=l,l=o):(o=a.next,a.next=l,d!=null&&(d.next=a),d=a,a=o),o=!1;this.Jh==null&&(this.Jh=r)}}},c.eK=function(a,r){return 0>a?0:a>r?r:a},c.prototype.ZP=function(){if(this.Jh!=null){for(var a=0,r=this.Jh,o=u.O.truncate(u.O.XG(r.x)),l=r.next;l!=null;l=l.next)if(a=this.kF?1^a:a+l.dir,l.x>r.x){var d=u.O.truncate(u.O.XG(l.x));a!=0&&(r=c.eK(o,this.oi),(o=c.eK(d,this.oi))>r&&r<this.oi&&(this.gn[this.Ol++]=r,this.gn[this.Ol++]=o,this.gn[this.Ol++]=l.y,this.Ol==this.gn.length&&(this.vy.gF(this.gn,this.Ol),this.Ol=0))),r=l,o=d}}},c.prototype.fK=function(a){for(var r=0,o=a;o!=null;o=o.next)r++;if(this.gK=r,r==1)return a;this.Kf==null?this.Kf=u.O.lg(Math.max(r,16),null):this.Kf.length<r&&(this.Kf=u.O.lg(Math.max(r,2*this.Kf.length),null));var l=0;for(o=a;o!=null;o=o.next)this.Kf[l++]=o;for(r==2?this.Kf[0].x>this.Kf[1].x&&(a=this.Kf[0],this.Kf[0]=this.Kf[1],this.Kf[1]=a):c.AN(this.Kf,r,function(d,p){return d==p?0:d.x<p.x?-1:d.x>p.x?1:0}),a=this.Kf[0],this.Kf[0]=null,o=a,l=1;l<r;l++)o.next=this.Kf[l],o=this.Kf[l],this.Kf[l]=null;return o.next=null,a},c.AN=function(a,r,o){if(r==a.length)a.sort(o);else{var l=a.slice(0,0),d=a.slice(r);r=a.slice(0,r).sort(o),a.length=0,a.push.apply(a,l.concat(r).concat(d))}},c.Cx=0,c}();u.Px=b}(B||(B={})),function(u){var A=function(){function b(){}return b.prototype.ui=function(c,a){var r=this.g.Pa(c,this.Pq);if(this.Dl==r&&(this.Dl=this.oe.lb(this.Dl)),this.ho==r&&(this.ho=this.oe.lb(this.ho)),this.oe.jd(this.RA,r),this.bk(c),a&&(a=this.g.bd(c))!=-1&&this.g.Xa(a)==c){var o=this.g.U(c);if(o!=c){if((r=this.g.bd(o))==a)return void this.g.Jf(a,o);if((o=this.g.Ma(c))!=c&&(r=this.g.bd(o))==a)return void this.g.Jf(a,o)}this.g.Jf(a,-1),this.g.Wg(a,-1)}},b.prototype.pD=function(){for(var c=!1,a=new u.h;;){this.Wh==null?(this.Wh=new u.ia(0),this.zs=new u.ia(0),this.xe=new u.ia(0)):(this.Wh.clear(!1),this.zs.clear(!1),this.xe.clear(!1));for(var r=this.ho,o=0,l=!0;r!=this.Dl;){var d=this.oe.getData(r),p=new u.h;this.g.Gc(d,p),l&&(this.g.Gc(d,a),l=!1),p=this.g.Ma(d);var g=this.g.U(d);this.g.Pa(p,this.zg)!=-559038737&&(this.Wh.add(p),this.g.Ra(p,this.zg,-559038737),this.zs.add(d),this.xe.add(o++)),this.g.Pa(g,this.zg)!=-559038737&&(this.Wh.add(g),this.g.Ra(g,this.zg,-559038737),this.zs.add(d),this.xe.add(o++)),r=this.oe.lb(r)}if(2>this.Wh.size)break;var y=this;for(this.xe.Vd(0,this.xe.size,function(w,S){return y.pM(w,S)}),r=0,o=this.xe.size;r<o;r++)l=this.xe.get(r),l=this.Wh.get(l),this.g.Ra(l,this.zg,r),p=new u.h,this.g.Gc(l,p);for(p=this.TM(a),r=0,o=this.xe.size;r<o;r++)(l=this.xe.get(r))!=-1&&(l=this.Wh.get(l),this.g.Ra(l,this.zg,-1));if(!p)break;c=!0}return c},b.prototype.TM=function(c){for(var a=!1,r=!0;r;){r=!1;var o=0;this.xe.get(o)==-1&&(o=this.cm(o));for(var l=this.cm(o),d=0,p=this.xe.size;d<p&&o!=-1&&l!=-1&&o!=l;d++){var g=this.xe.get(o);l=this.xe.get(l),g=this.Wh.get(g),l=this.Wh.get(l);var y=this.g.U(g);this.g.Dv(y,c)||(y=this.g.Ma(g));var w=this.g.U(l);this.g.Dv(w,c)||(w=this.g.Ma(l));var S=this.pu(y,g),k=this.pu(w,l),C=S?this.g.Ma(y):this.g.U(y),O=k?this.g.Ma(w):this.g.U(w),R=!1;(this.sp(y)||this.sp(w)||this.sp(g)||this.sp(l)||this.sp(C)||this.sp(O))&&(R=!0),!R&&this.g.fq(g,l)&&(R=!0,this.tD(S,k,y,g,w,l)),!R&&this.g.fq(C,O)&&(R=!0,this.tD(!S,!k,y,C,w,O)),R&&(a=!0),r=r||R,o=this.cm(o),l=this.cm(o)}}if(!a)for(o=0,this.xe.get(o)==-1&&(o=this.cm(o)),l=this.cm(o),d=0,p=this.xe.size;d<p&&o!=-1&&l!=-1&&o!=l;d++)g=this.xe.get(o),l=this.xe.get(l),g=this.Wh.get(g),l=this.Wh.get(l),y=this.g.U(g),this.g.Dv(y,c)||(y=this.g.Ma(g)),w=this.g.U(l),this.g.Dv(w,c)||(w=this.g.Ma(l)),S=this.pu(y,g),k=this.pu(w,l),C=S?this.g.Ma(y):this.g.U(y),O=k?this.g.Ma(w):this.g.U(w),this.DM(S,k,g,y,C,l,w,O)&&(a=!0),o=this.cm(o),l=this.cm(o);return a},b.prototype.XM=function(){this.g.ic(this.X)==1736&&this.g.In(this.X)==1&&new u.Fg().MU(this.fw,this.g,this.X,this.nd);var c=!1,a=!0;this.zg=this.Pq=-1;var r=this.g.I(this.X),o=new u.ia(0);o.Jb(r);for(var l=this.g.Ob(this.X);l!=-1;l=this.g.Rb(l))for(var d=this.g.Xa(l),p=0,g=this.g.Ja(l);p<g;p++)o.add(d),d=this.g.U(d);var y=this.g.td.o,w=this.g.td.stride;this.g.vb.mc();var S=this.g.vb.za[0].o;for(o.Vd(0,r,function(C,O){var R=y[w*C],N=y[w*O],j=S[2*R];R=S[2*R+1];var G=S[2*N];return(j=R<(N=S[2*N+1])?-1:R>N?1:j<G?-1:j>G?1:0)==0&&(j=(C=y[w*C+3])<(O=y[w*O+3])?-1:C==O?0:1),j}),this.Pq=this.g.Gd(),this.oe=new u.jp,this.RA=this.oe.Ph(0),this.oe.fn(r),l=0;l<r;l++)d=o.get(l),p=this.oe.addElement(this.RA,d),this.g.Ra(d,this.Pq,p);for(this.zg=this.g.Gd(),this.Dl=-1,this.cD()&&(c=!0);a;){a=!1,r=0,o=!1;do{o=!1,this.ho=-1,g=0,l=new u.h,p=new u.h;for(var k=this.oe.rc(this.RA);k!=-1;)d=this.oe.getData(k),this.ho!=-1?(this.g.Gc(d,p),l.qb(p)?g++:(l.L(p),this.Dl=k,0<g&&(d=this.pD())&&(o=!0,this.Dl!=-1&&(d=this.oe.getData(this.Dl),this.g.Gc(d,l))),this.ho=k=this.Dl,g=0)):(this.ho=k,this.g.Gc(this.oe.getData(k),l),g=0),k!=-1&&(k=this.oe.lb(k));if(this.Dl=-1,0<g&&(d=this.pD())&&(o=!0),10<r++)throw u.i.Qa();o&&this.GM(),this.cD()&&(o=!0),a=a||o&&!1,c=c||o}while(o)}return this.g.Td(this.Pq),this.g.Td(this.zg),u.WL.V(this.g,this.X,this.oe,this.fw)||c},b.prototype.pu=function(c,a){return this.g.U(a)!=c},b.prototype.DM=function(c,a,r,o,l,d,p,g){if(o==p)return this.bk(r),this.bk(d),!1;var y=this.g.Pa(r,this.zg),w=this.g.Pa(l,this.zg),S=this.g.Pa(d,this.zg),k=this.g.Pa(g,this.zg),C=[0,0,0,0];for((r=[0,0,0,0,0,0,0,0])[0]=0,C[0]=y,r[1]=0,C[1]=w,r[2]=1,C[2]=S,r[3]=1,C[3]=k,y=1;4>y;y++){for(w=C[y],S=r[y],k=y-1;0<=k&&C[k]>w;)C[k+1]=C[k],r[k+1]=r[k],k--;C[k+1]=w,r[k+1]=S}return C=0,r[0]!=0&&(C|=1),r[1]!=0&&(C|=2),r[2]!=0&&(C|=4),r[3]!=0&&(C|=8),(C==5||C==10)&&(c==a?c?(this.g.Bc(g,o),this.g.Cc(o,g),this.g.Bc(l,p),this.g.Cc(p,l)):(this.g.Cc(g,o),this.g.Bc(o,g),this.g.Cc(l,p),this.g.Bc(p,l)):c?(this.g.Cc(o,d),this.g.Bc(d,o),this.g.Cc(p,l),this.g.Bc(l,p)):(this.g.Bc(o,d),this.g.Cc(d,o),this.g.Bc(p,l),this.g.Cc(l,p)),!0)},b.prototype.tD=function(c,a,r,o,l,d){this.MY?this.VM():this.UM(c,a,r,o,l,d)},b.prototype.VM=function(){throw u.i.fa("not implemented.")},b.prototype.UM=function(c,a,r,o,l,d){if(c!=a)c?(this.g.Bc(r,l),this.g.Cc(l,r),this.g.Bc(d,o),this.g.Cc(o,d),this.vn(l,r),this.ui(l,!0),this.g.mi(l,!0),this.bk(r),this.vn(d,o),this.ui(d,!0),this.g.mi(d,!1)):(this.g.Bc(l,r),this.g.Cc(r,l),this.g.Bc(o,d),this.g.Cc(d,o),this.vn(l,r),this.ui(l,!0),this.g.mi(l,!1),this.bk(r),this.vn(d,o),this.ui(d,!0),this.g.mi(d,!0)),this.bk(o);else{var p=c?r:o,g=a?l:d;for(c=c?o:r,a=a?d:l,l=!1,this.g.Bc(p,g),this.g.Bc(g,p),this.g.Cc(c,a),this.g.Cc(a,c),d=a;d!=g;)r=this.g.Ma(d),o=this.g.U(d),this.g.Cc(d,o),this.g.Bc(d,r),l=l||d==p,d=o;l||(r=this.g.Ma(g),o=this.g.U(g),this.g.Cc(g,o),this.g.Bc(g,r)),this.vn(g,p),this.ui(g,!0),this.g.mi(g,!1),this.bk(p),this.vn(a,c),this.ui(a,!0),this.g.mi(a,!1),this.bk(c)}},b.prototype.cD=function(){for(var c=!1,a=this.g.Ob(this.X);a!=-1;){for(var r=this.g.Xa(a),o=0,l=this.g.Ja(a);o<l&&1<l;){var d=this.g.Ma(r),p=this.g.U(r);this.g.fq(d,p)?(c=!0,this.ui(r,!1),this.g.pd(r,!0),this.ui(p,!1),this.g.pd(p,!0),r=d,o=0,l=this.g.Ja(a)):(r=p,o++)}if(2>this.g.Ja(a)){for(c=this.g.Xa(a),o=0,l=this.g.Ja(a);o<l;o++)this.ui(c,!1),c=this.g.U(c);a=this.g.Zq(a),c=!0}else a=this.g.Rb(a)}return c},b.prototype.sp=function(c){for(var a=!1;;){var r=this.g.U(c),o=this.g.Ma(c);if(r==c)return this.ui(c,!0),this.g.mi(c,!1),!0;if(!this.g.fq(r,o)||(a=!0,this.bk(o),this.bk(r),this.ui(c,!0),this.g.mi(c,!1),this.vn(r,o),this.ui(r,!0),this.g.mi(r,!0),r==o))break;c=o}return a},b.prototype.GM=function(){for(var c=0,a=this.oe.rc(this.oe.je);a!=-1;a=this.oe.lb(a)){var r=this.oe.getData(a);this.g.aj(r,-1)}for(var o=0,l=this.g.Ob(this.X);l!=-1;)if((a=this.g.Xa(l))==-1||this.g.bd(a)!=-1)r=l,l=this.g.Rb(l),this.g.$q(r);else{this.g.aj(a,l);var d=1;for(r=this.g.U(a);r!=a;r=this.g.U(r))this.g.aj(r,l),d++;this.g.cp(l,!1),this.g.Vj(l,d),this.g.Wg(l,this.g.Ma(a)),o+=d,c++,l=this.g.Rb(l)}for(a=this.oe.rc(this.oe.je);a!=-1;a=this.oe.lb(a))r=this.oe.getData(a),this.g.bd(r)==-1&&(l=this.g.nG(this.X,r,r,null),o+=this.g.Ja(l),c++);for(this.g.Rl(this.X,c),this.g.Tj(this.X,o),c=0,o=this.g.ld;o!=-1;o=this.g.ue(o))c+=this.g.I(o);this.g.bC(c)},b.prototype.cm=function(c){for(var a=0,r=this.xe.size-1;a<r;a++)if(c=(c+1)%this.xe.size,this.xe.get(c)!=-1)return c;return-1},b.prototype.vn=function(c,a){var r=this.g.Pa(a,this.Pq),o=this.g.Pa(a,this.zg);this.g.lC(c,a),this.g.Ra(a,this.Pq,r),this.g.Ra(a,this.zg,o)},b.prototype.bk=function(c){var a=this.g.Pa(c,this.zg);a!=-1&&(this.xe.set(a,-1),this.g.Ra(c,this.zg,-1))},b.V=function(c,a,r,o,l){var d=new b;return d.g=c,d.X=a,d.xA=r,d.fw=o,d.nd=l,d.XM()},b.prototype.pM=function(c,a){var r=this.Wh.get(c),o=new u.h;this.g.Gc(r,o),r=new u.h;var l=this.Wh.get(a);return this.g.Gc(l,r),o.qb(r)?0:(l=this.zs.get(c),c=new u.h,this.g.Gc(l,c),l=this.zs.get(a),a=new u.h,this.g.Gc(l,a),(l=new u.h).uc(o,c),(o=new u.h).uc(r,a),u.h.nu(l,o))},b}();u.rn=A}(B||(B={})),function(u){var A;(A=u.$L||(u.$L={}))[A.Local=0]="Local",A[A.Geographic=1]="Geographic",A[A.Projected=2]="Projected",A[A.Image=3]="Image",A[A.Unknown=4]="Unknown",function(c){c[c.Integer32=0]="Integer32",c[c.Integer64=1]="Integer64",c[c.FloatingPoint=2]="FloatingPoint"}(u.TL||(u.TL={}));var b=function(){function c(){this.mA=null,this.pp="",this.su=null,this.dg=0,this.ZH=this.Ho=-1,this.wh=null}return c.prototype.Ec=function(){return this.dg},c.prototype.VF=function(){return 1},c.prototype.VW=function(a){this.mA=a},c.prototype.Xd=function(){if(this.mA!==null)return this.mA;var a=.001;return this.dg!=0?a=u.wr.CQ(this.dg):this.wh!=null&&(a=u.XC.DQ(this.wh)),a},c.prototype.Bz=function(){return this.wh},c.prototype.Hd=function(){return this.dg!=0?u.Tc.Zg(u.wr.Sy(this.dg)):this.wh!=null?u.XC.EQ(this.wh):void 0},c.Sb=function(a){if(a.dg!=0){if(u.wr.ZS(a.dg)===!0)return 1;if(u.wr.aT(a.dg)===!0)return 2}return 4},c.prototype.$r=function(){var a=this.Ec();return this.Ho!=-1?this.Ho:(this.Ho=u.wr.FK(a),this.Ho!=-1?this.Ho:a)},c.create=function(a){if(0>=a)throw u.i.N("Invalid or unsupported wkid: "+a);var r=new c;return r.dg=a,r},c.qP=function(a){if(a==null||a.length==0)throw u.i.N("Cannot create SpatialReference from null or empty text.");var r=new c;return r.wh=a,r},c.prototype.Nb=function(a){return this==a||a!=null&&this.constructor==a.constructor&&this.dg==a.dg&&(this.dg!=0||this.wh===a.wh)},c.prototype.toString=function(){return"[ tol: "+this.Kn()+"; wkid: "+this.Ec()+"; wkt: "+this.Bz()+"]"},c.prototype.cc=function(){if(this.pp!=="")return this.pp;var a=this.toString();if(Array.prototype.reduce)return this.pp="S"+a.split("").reduce(function(l,d){return 0|(l=(l<<5)-l+d.charCodeAt(0))},0);var r=0;if(a.length===0)return"";for(var o=0;o<a.length;o++)r=(r<<5)-r+a.charCodeAt(o),r&=r;return this.pp="S"+r},c.prototype.Kn=function(){return this.Xd(0)},c.prototype.fh=function(){return this.su!==null?this.su:this.su=u.gu.yP(this)},c.ZN=2147483645,c.$N=9007199254740990,c}();u.Eg=b}(B||(B={})),function(u){var A=function(b){function c(){var a=b!==null&&b.apply(this,arguments)||this;return a.Ji=null,a.ST=null,a.Hq=new u.ZL,a.Eo=null,a.jw=null,a}return Qe(c,b),c.yP=function(a){var r=new c;if(r.dg=a.dg,r.Ho=a.Ho,r.ZH=a.ZH,r.wh=a.wh,r.wh!==""&&r.wh!==null){a=c.kM(r.wh);var o=c.iM(r.wh);r.Hq.Xx(a,o,u.hu.Integer64),r.by(a),r.gy(o),r.dg=a.$r()}else a=c.jM(r.dg),r.by(a),r.gy(null),r.Hq.Xx(a,null,u.hu.Integer64);return r},c.prototype.Xd=function(a){return this.Hq.Kn(a)},c.iM=function(a){if(0>=a.length)throw u.i.N();var r=null;try{r=u.NC.fromString(a)}catch{r=null}return r==null?null:c.bD(r,!0)},c.prototype.by=function(a){this.Kd=a,this.Eo=this.Kd.Hd()},c.prototype.gy=function(a){this.KH=a,this.ST=this.KH!=null?this.KH.Eo:null},c.prototype.Wc=function(){return this.Sb()!=0&&this.Sb()!=3&&this.Kd.Wc()},c.prototype.IG=function(){return this.Sb()!=0&&(this.Sb()==3?this.Ji.fk().Wc():this.Kd.Wc())},c.prototype.eh=function(){return this.Kd!=null?this.Kd.Ue:null},c.prototype.pm=function(){return this.Kd.pm()},c.prototype.bf=function(){return this.Kd.bf()},c.prototype.hh=function(){return this.Kd!=null?this.Kd.sw:NaN},c.prototype.Up=function(){return this.Kd.Up()},c.prototype.Wr=function(){return this.Kd.Wr()},c.prototype.kk=function(){return this.Kd.kk()},c.prototype.kS=function(a){return u.OC.Py(this.Kd,a.Kd)},c.prototype.ml=function(){return this.Kd.ml()},c.prototype.Vr=function(){return this.Kd.Vr()},c.prototype.zi=function(){return this.Sb()==3?this.Ji.fk().zi():this.Kd.zi()},c.prototype.gh=function(){if(!this.Wc())throw u.i.N("!isPannable()");var a=new u.l;return this.Kd.gh(a),a},c.prototype.Oe=function(){if(!this.Wc())throw u.i.N("!isPannable()");return this.Kd.so},c.prototype.HR=function(){if(!this.Wc())throw u.i.N("!isPannable()");var a=new u.l;return this.Kd.GR(a),a},c.prototype.pv=function(){if(!this.Wc())throw u.i.N("!isPannable()");return this.Kd.pv()},c.prototype.ov=function(){if(!this.Wc())throw u.i.N("!isPannable()");return this.Kd.ov()},c.prototype.Xr=function(){return this.Ji!=null?this.Ji.fk().Xr():this.Kd.Xr()},c.prototype.PQ=function(){return this.Kd.hv()},c.prototype.Qp=function(){return this.Eo.getUnitFactor()},c.prototype.vz=function(a){return this.Hq.vz(a)},c.prototype.sc=function(){var a=this.Sb();if(a==1)return this;if(a==3)return this.Ji.fk().sc();if(a==0||a===4)throw u.i.fa("invalid call");if(this.jw!==null)return this.jw;if((a=this.eh().getGeogcs())==null)throw u.i.Qa();return this.jw=c.bF(a,this.Hq.VF())},c.bF=function(a,r){if(a==null)throw u.i.N("null pointer.");var o=new c;return a=c.mu(a,!0),o.Hq.Xx(a,null,r),o.by(a),o.gy(null),o.dg=a.$r(),o},c.prototype.Sb=function(){var a=this.eh();if(a!=null)switch(a.getType()){case u.Sc.PE_TYPE_GEOGCS:return 1;case u.Sc.PE_TYPE_PROJCS:return 2}return 4},c.prototype.hv=function(){return this.Kd.hv()},c.mu=function(a,r){var o=a.getCode();if(0>=o&&0<(o=u.pf.getCode(a))){if((a=u.pf.coordsys(o))==null)throw u.i.N("Text to wkid mapping had failed: "+o);return c.mu(a,r)}if(r&&0<o&&(r=c.qx[o]))return r;r=u.zb.xv(a,o,!1);var l=c.lK[r];return l||(a=0>=o?a:u.pf.coordsys(o),a=new u.OC(a),c.lK[r]=a,0<o&&(c.qx[o]=a),a)},c.jM=function(a){if(0>=a)throw u.i.N("Invalid or unsupported wkid: "+a);var r=c.qx[a];if(r!=null)return r;if((r=u.pf.coordsys(a))==null)throw u.i.N("Invalid or unsupported wkid: "+a);return(r=c.mu(r,!1)).$r()!=a&&(c.qx[a]=r),r},c.kM=function(a){if(a==null||a===void 0||a.length==0)throw u.i.N("Cannot create SpatialReference from null or empty text.");var r=null;try{r=u.pf.fromString(u.Sc.PE_TYPE_COORDSYS,a)}catch(o){throw u.i.N("Cannot create SpatialReference from text. "+o.message)}if(r===null)throw u.i.N("Cannot create SpatialReference from text. ");return c.mu(r,!0)},c.bD=function(a,r){var o,l=a.getCode();if(0>=l&&0<(l=u.pf.getCode(a))){if((l=u.pf.vertcs(l))===null)throw u.i.N();return c.bD(l,r)}if(r&&0<l&&(r=c.kK[l])||(a=u.zb.xv(a,l,!1),r=c.mK[a]))return r;if(0>=l||(o=u.pf.vertcs(l)),o===null)throw u.i.N();return o=new u.PL(o),c.mK[a]=o,0<l&&(c.kK[l]=o),o},c.sI=function(a,r){if(r===null||r.B())return null;var o=new u.l;if(r!==null&&a.Sb()!=1){var l=a.sc(),d=l.eh();a=u.vr.Nr(a,l,null,null),(r=u.Hx.local().V(r,a,null)).A(o)}else d=a.eh(),r.A(o);return r=d.getPrimem().getLongitude(),d=d.getUnit().getUnitFactor(),new u.LC(o.v,o.G,o.C,o.H,r,d)},c.lD=function(a){var r={name:"",steps:[],_pt:null,_entry:null},o=0;for(a=a.getEntries();o<a.length;o++){var l=a[o],d={LY:!1,ZY:"",YY:-1,geogtran:null};l.getDirection()===0?d.isInverse=!1:d.isInverse=!0;var p=l.getGeogtran().getCode();-1<p?d.wkid=p:d.wkt=l.getGeogtran().toString(),r.steps.push(d)}return r},c.XR=function(a,r,o,l){return o===void 0&&(o=null),o=c.sI(l,o),a=u.lp.getGTlist(a.eh(),r.eh(),2,u.lp.PE_GTLIST_OPTS_COMMON,o,1),r=null,a&&0<a.length&&(r=this.lD(a[0]),u.Mx.destroy(a)),o!==null&&o.destroy(),r},c.YR=function(a,r,o,l){var d;if(o===void 0&&(o=null),l===void 0&&(l=null),d===void 0&&(d=30),o=c.sI(l,o),a=u.lp.getGTlist(a.eh(),r.eh(),2,u.lp.PE_GTLIST_OPTS_COMMON,o,d),r=[],a&&0<a.length){for(d=0;d<a.length;d++)r.push(this.lD(a[d]));u.Mx.destroy(a)}return o!==null&&o.destroy(),r},c.qx={},c.lK={},c.kK={},c.mK={},c}(u.Eg);u.gu=A}(B||(B={})),function(u){var A,b;(b=A=u.hu||(u.hu={}))[b.Integer32=0]="Integer32",b[b.Integer64=1]="Integer64",b[b.FloatingPoint=2]="FloatingPoint";var c=function(){function a(){this.qp()}return a.prototype.assign=function(r){this.Fm=r.Fm,this.Gm=r.Gm,this.Pj=r.Pj,this.sA=r.sA,this.Fo=r.Fo,this.rA=r.rA,this.Ik=r.Ik,this.Mq=r.Mq,this.Lq=r.Lq,this.Rm=r.Rm},a.prototype.VF=function(){return this.Rm},a.prototype.qp=function(){this.Gm=this.Fm=0,this.Pj=1,this.sA=0,this.Fo=1,this.rA=0,this.Lq=this.Mq=this.Ik=2220446049250313e-29,this.Rm=A.FloatingPoint},a.prototype.Xx=function(r,o,l){if(this.qp(),this.Rm=l,l!=A.FloatingPoint){var d=new u.l;r.hR(d),this.Fm=d.v,this.Gm=d.G}else this.Gm=this.Fm=-17976931348623157e292;(d=r.Ue.getType())==u.Sc.PE_TYPE_GEOGCS?(d=(l==A.Integer64?1e-9:1/18e5)*r.bf(),this.Pj=1/d):d==u.Sc.PE_TYPE_PROJCS&&(d=(l==A.Integer64?1e-4:.001)*r.pm(),this.Pj=1/d),o!=null?(d=(l==A.Integer32?.001:1e-4)*o.IH,this.Fo=1/d):this.Fo=1e4,this.YM(),this.Ik=r.sw,this.Mq=o!=null?.001*o.IH:.001,this.Lq=2220446049250313e-29},a.prototype.YM=function(){if(this.Rm!=A.FloatingPoint){var r=this.Rm==A.Integer64?u.Eg.$N:u.Eg.ZN,o=r/this.Pj,l=this.Fm+o,d=u.O.truncate((l-this.Fm)*this.Pj);d>r&&(this.Pj=r/(l-this.Fm)),o=this.Gm+o,(d=u.O.truncate((o-this.Gm)*this.Pj))>r&&(this.Pj=r/(o-this.Gm))}},a.prototype.aC=function(r){switch(r){case 0:this.Ik=void 0;case 1:this.Mq=void 0;case 2:this.Lq=void 0}},a.prototype.Kn=function(r){switch(r){case 0:return this.Ik;case 1:return this.Mq;case 2:return this.Lq}return 0},a.prototype.vz=function(r){if(this.Rm==A.FloatingPoint)return 0;switch(r){case 0:return 1/this.Pj;case 1:case 2:return 1/this.Fo;default:return 0}},a.prototype.toString=function(){var r="SRPD [m_toleranceXY: "+this.Ik.toString();return(r=(r=(r=(r=(r=(r=(r=(r=(r=r+";m_falseX: "+this.Fm.toString())+";m_falseY: "+this.Gm.toString())+";m_unitsXY: "+this.Pj.toString())+";m_falseZ: "+this.sA.toString())+";m_unitsZ: "+this.Fo.toString())+";m_falseM: "+this.rA.toString())+";m_toleranceZ: "+this.Mq.toString())+";m_toleranceM: "+this.Lq.toString())+";m_precision: "+this.Rm.toString())+"] "},a}();u.ZL=c}(B||(B={})),function(u){function A(l,d){return 89.99999<d?d=89.99999:-89.99999>d&&(d=-89.99999),d*=.017453292519943,[111319.49079327169*l,31890685e-1*Math.log((1+Math.sin(d))/(1-Math.sin(d)))]}function b(l,d,p){return l=l/6378137*57.29577951308232,p?[l,57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*d/6378137)))]:[l-360*Math.floor((l+180)/360),57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*d/6378137)))]}function c(l,d,p){var g=l.Of();if(l.getType()===33)d=d(g.Lg(),g.ih()),g.Cb(d[0],d[1]);else if(l.getType()===197){var y=d(l.es(),l.gs(),p);d=d(l.ds(),l.fs(),p),g.K(y[0],y[1],d[0],d[1])}else for(y=new u.h,l=0;l<g.I();l++){g.D(l,y);var w=d(y.x,y.y,p);y.ma(w[0],w[1]),g.Cb(l,y)}return g}function a(l){return c(l,b,!0)}function r(l){return c(l,A,!0)}var o=Math.PI/180;u.UK=function(){function l(){}return l.vu=function(d){var p=Math.sqrt(.006694379990197414),g=Math.sin(d.y*o);return u.h.construct(6378137*d.x*o,3.1677196636462314e6*(g/(1-.006694379990197414*g*g)-1/(2*p)*Math.log((1-p*g)/(1+p*g))))},l.Vx=function(d,p,g,y){var w=.0033528106647474805,S=Math.sin(g);g=Math.cos(g);var k=(1-w)*Math.tan(d),C=k*(d=1/Math.sqrt(1+k*k)),O=Math.atan2(k,g),R=(k=d*S)*k,N=1-R,j=27233160610754688e-5*N/4040829998466145e-2,G=1+j/16384*(4096+j*(j*(320-175*j)-768)),D=j/1024*(256+j*(j*(74-47*j)-128));j=y/(635675231424518e-8*G);for(var V,Z,q,ne=2*Math.PI;1e-12<Math.abs(j-ne);)q=Math.cos(2*O+j),ne=j,j=y/(635675231424518e-8*G)+D*(V=Math.sin(j))*(q+D/4*((Z=Math.cos(j))*(2*q*q-1)-D/6*q*(4*V*V-3)*(4*q*q-3)));return y=C*V-d*Z*g,N=w/16*N*(4+w*(4-3*N)),u.h.construct((p+(Math.atan2(V*S,d*Z-C*V*g)-(1-N)*w*k*(j+N*V*(q+N*Z*(2*q*q-1)))))/o,Math.atan2(C*Z+d*V*g,(1-w)*Math.sqrt(R+y*y))/o)},l.MM=function(d,p,g,y){var w=.0033528106647474805,S=y-p,k=Math.atan((1-w)*Math.tan(d)),C=Math.atan((1-w)*Math.tan(g)),O=Math.sin(k);k=Math.cos(k);var R=Math.sin(C);C=Math.cos(C);var N=S,j=1e3;do{var G=Math.sin(N),D=Math.cos(N),V=Math.sqrt(C*G*C*G+(k*R-O*C*D)*(k*R-O*C*D));if(V===0)return 0;D=O*R+k*C*D;var Z=Math.atan2(V,D),q=k*C*G/V,ne=1-q*q;G=D-2*O*R/ne,isNaN(G)&&(G=0);var ee=w/16*ne*(4+w*(4-3*ne)),he=N;N=S+(1-ee)*w*q*(Z+ee*V*(G+ee*D*(2*G*G-1)))}while(1e-12<Math.abs(N-he)&&0<--j);return j===0?(O=y-p,{azimuth:Math.atan2(Math.sin(O)*Math.cos(g),Math.cos(d)*Math.sin(g)-Math.sin(d)*Math.cos(g)*Math.cos(O)),geodesicDistance:6371008771415059e-9*Math.acos(Math.sin(d)*Math.sin(g)+Math.cos(d)*Math.cos(g)*Math.cos(y-p))}):(p=(d=27233160610754688e-5*ne/4040829998466145e-2)/1024*(256+d*(d*(74-47*d)-128)),{azimuth:Math.atan2(C*Math.sin(N),k*R-O*C*Math.cos(N)),YQ:635675231424518e-8*(1+d/16384*(4096+d*(d*(320-175*d)-768)))*(Z-p*V*(G+p/4*(D*(2*G*G-1)-p/6*G*(4*V*V-3)*(4*G*G-3)))),XY:Math.atan2(k*Math.sin(N),k*R*Math.cos(N)-O*C)})},l.jQ=function(d){var p=d.hasAttribute(1),g=d.hasAttribute(2),y=[],w=d.da(),S=null,k=null;p&&(S=d.ub(1)),g&&(k=d.ub(2));for(var C=new u.h,O=0;O<w;O++){for(var R=d.Ba(O),N=d.Ja(O),j=0,G=0,D=NaN,V=NaN,Z=NaN,q=NaN,ne=d.dc(O),ee=[],he=R;he<R+N;he++){d.D(he,C),q=Z=NaN;var ye=[C.x,C.y];p&&(Z=S.get(he),ye.push(Z)),g&&(w=k.get(he),ye.push(q)),he==R&&ne&&(j=C.x,G=C.y,D=Z,V=q),ee.push(ye)}!ne||j==C.x&&G==C.y&&(!p||isNaN(D)&&isNaN(Z)||D==Z)&&(!g||isNaN(V)&&isNaN(q)||V==q)||ee.push(ee[0].slice(0)),y.push(ee)}return y},l.Wy=function(d,p){d=l.jQ(d),637.100877141506>p&&(p=637.100877141506);for(var g,y=[],w=0;w<d.length;w++){var S,k,C=d[w];y.push(g=[]),g.push([C[0][0],C[0][1]]);var O=C[0][0]*o,R=C[0][1]*o;for(S=0;S<C.length-1;S++){var N=C[S+1][0]*o,j=C[S+1][1]*o;if(O!==N||R!==j){N=(j=l.MM(R,O,j,N)).azimuth;var G=(j=j.YQ)/p;if(1<G){for(k=1;k<=G-1;k++){var D=l.Vx(R,O,N,k*p);g.push([D.x,D.y])}k=l.Vx(R,O,N,(j+Math.floor(G-1)*p)/2),g.push([k.x,k.y])}R=l.Vx(R,O,N,j),g.push([R.x,R.y]),O=R.x*o,R=R.y*o}}}return{qJ:y}},l.XQ=function(d){for(var p=[],g=0;g<d.length;g++){var y=d[g];y=l.Wy(y,1e4),p.push(y)}d=[];for(var w=0;w<p.length;w++){y=p[w];var S=0;for(g=0;g<y.qJ.length;g++){var k,C=y.qJ[g],O=l.vu(u.h.construct(C[0][0],C[0][1])),R=l.vu(u.h.construct(C[C.length-1][0],C[C.length-1][1])),N=R.x*O.y-O.x*R.y;for(k=0;k<C.length-1;k++)O=l.vu(u.h.construct(C[k+1][0],C[k+1][1])),N+=(R=l.vu(u.h.construct(C[k][0],C[k][1]))).x*O.y-O.x*R.y;S+=N}S/=1,d.push(S/-2)}return d},l}(),u.cb=function(){function l(){}return l.xB=function(d,p,g,y,w,S,k){l.gD[d.cc()]=p,isNaN(g)==0&&(l.mD[d.cc()]=g),isNaN(y)==0&&(l.zD[d.cc()]=y),isNaN(w)==0&&(l.aD[d.cc()]=w),l.nD[d.cc()]=S,k!==null&&(l.oD[d.cc()]=k)},l.Ww=function(d,p,g){l.sD[d.cc()+"-"+p.cc()]=g},l.sc=function(d){if((d=l.gD[d.cc()])==null)throw u.i.Ie();return d},l.bf=function(d){if((d=l.mD[d.cc()])==null)throw u.i.Ie();return d},l.vv=function(d){if((d=l.zD[d.cc()])==null)throw u.i.Ie();return d},l.ev=function(d){if((d=l.aD[d.cc()])==null)throw u.i.Ie();return d},l.gh=function(d){if((d=l.oD[d.cc()])==null)throw u.i.Ie();return u.l.construct(d[0],d[1],d[2],d[3])},l.Wc=function(d){if((d=l.nD[d.cc()])==null)throw u.i.Ie();return d},l.zh=function(d,p,g){if(p.Nb(g))return d;var y=l.sD[p.cc()+"-"+g.cc()];if(y!==void 0)return y(d,p,g);throw u.i.Ie()},l.vt=function(){throw u.i.Ie()},l.bR=function(){throw u.i.Ie()},l.dW=function(){throw u.i.Ie()},l.ml=function(){throw u.i.Ie()},l.sW=function(){var d=u.Eg.create(102100),p=u.Eg.create(3857),g=u.Eg.create(4326);u.cb.xB(d,g,NaN,NaN,NaN,!1,null),u.cb.xB(g,g,1,.0033528106647474805,6378137,!0,[-180,-90,180,90]),u.cb.xB(p,g,NaN,NaN,NaN,!1,null),u.cb.Ww(d,g,a),u.cb.Ww(g,d,r),u.cb.Ww(p,g,a),u.cb.Ww(g,p,r)},l.gD=[],l.mD=[],l.zD=[],l.aD=[],l.nD=[],l.oD=[],l.sD=[],l}()}(B||(B={})),B.cb.sW(),function(u){var A=function(){function b(c){this.o=new Int32Array(0),this.io=-1,this.Hg=this.size=this.Bl=0,this.stride=c}return b.prototype.jd=function(c){c<this.Bl?(this.o[c*this.stride]=this.io,this.io=c):this.Bl--,this.size--},b.prototype.T=function(c,a){return this.o[c*this.stride+a]},b.prototype.S=function(c,a,r){this.o[c*this.stride+a]=r},b.prototype.Ce=function(){var c=this.io;if(c==-1){if(this.Bl==this.Hg){if(2147483647<(c=this.Hg!=0?u.O.truncate(3*(this.Hg+1)/2):1)&&(c=2147483647),c==this.Hg)throw u.i.ce();this.Dz(c)}c=this.Bl,this.Bl++}else this.io=this.o[c*this.stride];this.size++;for(var a=c*this.stride;a<c*this.stride+this.stride;a++)this.o[a]=-1;return c},b.prototype.Ll=function(c){var a=this.io;if(a==-1){if(this.Bl==this.Hg){if(2147483647<(a=this.Hg!=0?u.O.truncate(3*(this.Hg+1)/2):1)&&(a=2147483647),a==this.Hg)throw u.i.ce();this.Dz(a)}a=this.Bl,this.Bl++}else this.io=this.o[a*this.stride];this.size++;for(var r=a*this.stride,o=0;o<c.length;o++)this.o[r+o]=c[o];return a},b.prototype.mj=function(c){this.io=-1,this.size=this.Bl=0,c&&(this.o=null,this.Hg=0)},b.prototype.De=function(c){c>this.Hg&&this.Dz(c)},b.prototype.tx=function(c,a){c*=this.stride,a*=this.stride;for(var r=0;r<this.stride;r++){var o=this.o[a+r];this.o[a+r]=this.o[c+r],this.o[c+r]=o}},b.prototype.gC=function(c,a,r){var o=this.o[this.stride*a+r];this.o[this.stride*a+r]=this.o[this.stride*c+r],this.o[this.stride*c+r]=o},b.LG=function(c){return 0<=c},b.prototype.Dz=function(c){this.o==null&&(this.o=new Int32Array(0));var a=new Int32Array(this.stride*c);a.set(this.o,0),this.o=a,this.Hg=c},b}();u.$c=A}(B||(B={})),function(u){var A,b;(b=A||(A={}))[b.enumInputModeBuildGraph=0]="enumInputModeBuildGraph",b[b.enumInputModeSimplifyAlternate=4]="enumInputModeSimplifyAlternate",b[b.enumInputModeSimplifyWinding=5]="enumInputModeSimplifyWinding",b[b.enumInputModeIsSimplePolygon=7]="enumInputModeIsSimplePolygon";var c=function(){function r(o){this.Be=o,this.yh=NaN,this.eH=new u.ig,this.fH=new u.ig,this.ms=new u.Nc,this.ns=new u.Nc}return r.prototype.compare=function(o,l,d){if(o=o.ja(d),this.Be.pB(l,this.eH),this.Be.pB(o,this.fH),l=this.eH.get(),o=this.fH.get(),this.ms.K(l.sa,l.pa),this.ns.K(o.sa,o.pa),this.ms.va<this.ns.oa)return-1;if(this.ms.oa>this.ns.va)return 1;d=l.na==l.la;var p=o.na==o.la;if(d||p){if(d&&p)return 0;if(l.na==o.na&&l.sa==o.sa)return d?1:-1;if(l.la==o.la&&l.pa==o.pa)return d?-1:1}return(d=l.Pe(this.yh,this.ms.oa))==(p=o.Pe(this.yh,this.ns.oa))&&((p=.5*((d=Math.min(l.la,o.la))+this.yh))==this.yh&&(p=d),d=l.Pe(p,this.ms.oa),p=o.Pe(p,this.ns.oa)),d<p?-1:d>p?1:0},r.prototype.aK=function(o){this.yh=o},r}(),a=function(){function r(o){this.ib=o,this.WH=new u.ig,this.Bf=new u.h,this.wA=new u.Nc}return r.prototype.kX=function(o){this.Bf.L(o)},r.prototype.compare=function(o,l){return this.ib.pB(o.ja(l),this.WH),o=this.WH.get(),this.wA.K(o.sa,o.pa),this.Bf.x<this.wA.oa?-1:this.Bf.x>this.wA.va?1:(o=o.Pe(this.Bf.y,this.Bf.x),this.Bf.x<o?-1:this.Bf.x>o?1:0)},r}();A=function(){function r(){this.hH=this.Di=this.Gi=this.kA=this.Yn=this.ye=this.Kc=this.jh=this.ge=null,this.Go=this.xg=-1,this.gH=!0,this.pA=!1,this.lA=NaN,this.Ni=new u.Md,this.bO=2147483647,this.aO=u.O.truncate(-2147483648),this.cg=this.ae=this.Hl=this.Cq=this.Cm=this.Bq=this.Os=this.Re=-1,this.wa=0}return r.prototype.yy=function(o){this.lA=o},r.prototype.Ym=function(){this.ge==null&&(this.ge=new u.$c(8));var o=this.ge.Ce();return this.ge.S(o,1,0),o},r.prototype.vU=function(){this.Kc==null&&(this.Kc=new u.$c(8));var o=this.Kc.Ce();this.Kc.S(o,2,0),this.Kc.S(o,3,0);var l=this.Kc.Ce();return this.Kc.S(l,2,0),this.Kc.S(l,3,0),this.JJ(o,l),this.JJ(l,o),o},r.prototype.mI=function(){this.ye==null&&(this.ye=new u.$c(8));var o=this.ye.Ce();return this.ye.S(o,2,0),o},r.prototype.TW=function(o,l){this.ge.S(o,7,l)},r.prototype.mn=function(o,l){this.ge.S(o,2,l)},r.prototype.SW=function(o,l){this.ge.S(o,1,l)},r.prototype.lX=function(o,l){this.ge.S(o,3,l)},r.prototype.iX=function(o,l){this.ge.S(o,4,l)},r.prototype.cr=function(o,l){this.ge.S(o,5,l)},r.prototype.eR=function(o){return this.ge.T(o,5)},r.prototype.RW=function(o,l){this.ge.S(o,6,l)},r.prototype.cN=function(o,l){this.RW(l,o)},r.prototype.IJ=function(o,l){this.Kc.S(o,1,l)},r.prototype.JJ=function(o,l){this.Kc.S(o,4,l)},r.prototype.Tl=function(o,l){this.Kc.S(o,5,l)},r.prototype.Sl=function(o,l){this.Kc.S(o,6,l)},r.prototype.$W=function(o,l){this.Kc.S(o,2,l)},r.prototype.$w=function(o,l){this.Kc.S(o,3,l)},r.prototype.LF=function(o){return this.Kc.T(o,3)},r.prototype.Gt=function(o,l){this.Kc.S(o,7,l)},r.prototype.EK=function(o,l){if(this.mm(o)!=-1)for(l=l?-1:o,o=this.mm(o);o!=-1;o=this.js(o))this.g.Ra(this.tj(o),this.Cq,l)},r.prototype.yx=function(o,l){o!=-1&&(this.EK(o,l),this.EK(this.xa(o),l))},r.prototype.Dt=function(o,l){this.ye.S(o,1,l)},r.prototype.Vg=function(o,l){this.ye.S(o,2,l)},r.prototype.jn=function(o,l){this.ye.S(o,3,l),this.NW(o,this.dR(l)),this.MW(l,o)},r.prototype.MW=function(o,l){this.ye.S(o,4,l)},r.prototype.NW=function(o,l){this.ye.S(o,5,l)},r.prototype.DJ=function(o,l){this.ye.S(o,6,l)},r.prototype.BJ=function(o,l){this.ye.S(o,7,l)},r.prototype.AJ=function(o,l){this.Yn.write(o,l)},r.prototype.CJ=function(o,l){this.kA.write(o,l)},r.prototype.kY=function(o){var l=0,d=0,p=this.AF(o),g=new u.h,y=new u.h,w=new u.h;this.Yr(p,g),y.L(g);var S=p;do this.lm(S,w),d+=u.h.tb(y,w),this.$e(this.xa(S))!=o&&(l+=(w.x-g.x-(y.x-g.x))*(w.y-g.y+(y.y-g.y))*.5),y.L(w),S=this.jc(S);while(S!=p);this.Yn.write(o,l),this.kA.write(o,d)},r.prototype.PU=function(o,l){var d=new c(this),p=new u.Yj;p.De(u.O.truncate(this.wa/2)),p.Vo(d);for(var g=new u.ia(0),y=this.$g(),w=null,S=0,k=new u.h,C=this.Re;C!=-1;C=this.Rf(C)){if(!(255&++S||l==null||l.progress(-1,-1)))throw u.i.WC();var O=this.Me(C);if(O!=-1){if(g.Bh(0),!this.gY(p,y,g,O)){this.D(C,k),d.aK(k.y);var R=O;do{var N=this.Ab(R,y);N!=-1&&(p.vd(N,-1),this.Kb(R,y,-2)),R=this.jc(this.xa(R))}while(O!=R);R=O;do(N=this.Ab(R,y))==-1&&(N=p.addElement(R,-1),g.add(N)),R=this.jc(this.xa(R));while(O!=R)}for(O=g.size-1;0<=O;O--)N=g.get(O),R=p.ja(N),this.Kb(this.xa(R),y,N),this.OU(p,N,o)}else this.cz(C)==-1&&(w==null&&(w=new a(this)),this.D(C,k),w.kX(k),R=p.IW(w),O=this.Hl,R!=-1&&(N=p.ja(R),this.$e(N)==this.$e(this.xa(N))&&(N=this.OF(p,R)),N!=-1&&(O=this.$e(N))),this.cN(O,C))}this.Jg(y)},r.prototype.OU=function(o,l,d){var p=o.ja(l),g=this.$e(p);if(this.Gn(g)==-1){var y=this.OF(o,l),w=this.xa(p),S=this.$e(w);this.Kp(g),this.Kp(S);var k=this.Gn(g),C=this.Gn(S);if(y==-1&&k==-1&&(S==g?(this.jn(S,this.Hl),k=C=this.Hl):(C==-1&&(this.jn(S,this.Hl),C=this.Hl),this.jn(g,S),k=S)),y!=-1){var O=this.$e(y);C==-1&&(0>=this.Kp(O)?(C=this.Gn(O),this.jn(S,C)):(this.jn(S,O),C=O),S==g&&(k=C))}k==-1&&this.hY(g,S),d==0?this.jW(o,l,p,y,g,S):d==5?this.kW(o,l,p,w,g,S):d==4&&this.iW(p,y,g,S)}},r.prototype.jW=function(o,l,d,p,g,y){var w=this.hk(g);if(p!=-1){var S=this.hk(y),k=this.hk(this.$e(p));p=w&S&k,k^=k&this.dh(d),(k|=p)!=0&&(this.Vg(y,S|k),this.Vg(g,k|w),w=w||k)}for(l=o.lb(l);l!=-1&&(p=o.ja(l),d=this.$e(this.xa(p)),g=this.hk(d),y=this.dh(p),S=this.$e(p),p=g&(k=this.hk(S))&w,w^=w&y,(w|=p)!=0);l=o.lb(l))this.Vg(d,g|w),this.Vg(S,k|w)},r.prototype.kW=function(o,l,d,p,g,y){if(g!=y){d=this.Ab(d,this.cg),d+=this.Ab(p,this.cg),p=0;var w=new u.ia(0),S=new u.ia(0);S.add(0);for(var k=o.rc(-1);k!=l;k=o.lb(k)){var C=o.ja(k),O=this.xa(C),R=this.$e(C),N=this.$e(O);if(R!=N){if(C=this.Ab(C,this.cg),p+=C+=this.Ab(O,this.cg),O=!1,w.size!=0&&w.Fc()==N&&(S.If(),w.If(),O=!0),this.Gn(N)==-1)throw u.i.Qa();O&&this.Gn(N)==R||(S.add(p),w.add(R))}}p+=d,w.size!=0&&w.Fc()==y&&(S.If(),w.If()),p!=0?S.Fc()==0&&(o=this.g.ld,o=this.La(o),this.Vg(g,o)):S.Fc()!=0&&(o=this.g.ld,o=this.La(o),this.Vg(g,o))}},r.prototype.iW=function(o,l,d,p){var g=this.La(this.g.ld);if(l==-1)this.Vg(p,this.Go),1&(o=this.Ab(o,this.xg))?this.Vg(d,g):this.Vg(d,this.Go);else{var y=this.hk(p);y==0?(y=this.hk(this.$e(l)),this.Vg(p,y),1&(o=this.Ab(o,this.xg))?this.Vg(d,y==g?this.Go:g):this.Vg(d,y)):1&(o=this.Ab(o,this.xg))?this.Vg(d,y==g?this.Go:g):this.Vg(d,y)}},r.prototype.gY=function(o,l,d,p){var g=p,y=-1,w=-1,S=0;do{if(S==2)return!1;var k=this.Ab(g,l);if(k!=-1){if(y!=-1)return!1;y=k}else{if(w!=-1)return!1;w=g}S++,g=this.jc(this.xa(g))}while(p!=g);return w!=-1&&y!=-1&&(this.Kb(o.ja(y),l,-2),o.Sj(y,w),d.add(y),!0)},r.prototype.hY=function(o,l){var d=this.Kp(o);if(d!=0){var p=this.Kp(l);0<d&&0>p||0>d&&0<p?this.jn(o,l):(l=this.Gn(l))!=-1&&this.jn(o,l)}},r.prototype.vP=function(o,l){this.Cq=this.g.Gd();for(var d=0,p=l.size;d<p;d++){var g=l.get(d),y=this.g.Pa(g,this.Cm),w=this.g.Qf(this.g.bd(g)),S=this.g.ic(w);if(u.aa.Hc(S)){var k=this.g.U(g);if(k!=-1){var C=this.g.Pa(k,this.Cm);if(y!=C){var O=this.vU(),R=this.xa(O),N=this.jh.Ce();this.jh.S(N,0,g),this.jh.S(N,1,-1),this.Gt(O,N),this.IJ(O,y),(N=this.Me(y))==-1?(this.mn(y,O),this.Tl(O,R),this.Sl(R,O)):(y=this.te(N),this.Tl(N,R),this.Sl(R,N),this.Sl(y,O),this.Tl(O,y)),this.IJ(R,C),(y=this.Me(C))==-1?(this.mn(C,R),this.Sl(O,R),this.Tl(R,O)):(C=this.te(y),this.Tl(y,O),this.Sl(O,y),this.Sl(C,R),this.Tl(R,C)),w=this.La(w),o==0?(this.Kb(R,this.ae,0),this.Kb(O,this.ae,S==1736?w:0)):o==5?(C=new u.h,this.g.D(g,C),g=new u.h,this.g.D(k,g),y=k=0,0>C.compare(g)?k=1:y=-1,this.Kb(R,this.ae,0),this.Kb(O,this.ae,0),this.Kb(O,this.cg,k),this.Kb(R,this.cg,y)):o==7?(this.Kb(R,this.ae,this.Go),this.Kb(O,this.ae,S==1736?w:0)):o==4&&(this.Kb(R,this.ae,0),this.Kb(O,this.ae,0),this.Kb(O,this.xg,1),this.Kb(R,this.xg,1)),S=S==1736?this.aO:0,this.$w(O,w|S),this.$w(R,w|S)}}}}},r.prototype.VT=function(o,l){var d=this.mm(l);if(d!=-1){var p=this.mm(o);this.jh.S(d,1,p),this.Gt(o,d),this.Gt(l,-1)}o=this.xa(o),l=this.xa(l),(d=this.mm(l))!=-1&&(p=this.mm(o),this.jh.S(d,1,p),this.Gt(o,d),this.Gt(l,-1))},r.prototype.IX=function(o){function l(Z,q){return p.HO(Z,q)}var d=new u.ia(0);d.Jb(10);for(var p=this,g=this.Re;g!=-1;g=this.Rf(g)){d.clear(!1);var y=this.Me(g);if(y!=-1){var w=y;do d.add(w),w=this.jc(this.xa(w));while(w!=y);if(1<d.size){if(w=!0,2<d.size)d.Vd(0,d.size,l),d.add(d.get(0));else if(0<this.GO(d.get(0),d.get(1))){var S=d.get(0);d.set(0,d.get(1)),d.set(1,S)}else w=!1;for(var k=S=d.get(0),C=this.uf(k),O=this.xa(k),R=-1,N=1,j=d.size;N<j;N++){var G=d.get(N),D=this.xa(G),V=this.jk(D);if(V==C&&G!=k){if(o==0)R=this.LF(k)|this.LF(G),this.$w(k,R),this.$w(O,R),this.Kb(k,this.ae,this.Ab(k,this.ae)|this.Ab(G,this.ae)),this.Kb(O,this.ae,this.Ab(O,this.ae)|this.Ab(D,this.ae));else if(this.cg!=-1)R=this.Ab(k,this.cg)+this.Ab(G,this.cg),D=this.Ab(O,this.cg)+this.Ab(D,this.cg),this.Kb(k,this.cg,R),this.Kb(O,this.cg,D);else{if(o==7)return void(this.Ni=new u.Md(5,g,-1));this.xg!=-1&&(R=this.Ab(k,this.xg)+this.Ab(G,this.xg),D=this.Ab(O,this.xg)+this.Ab(D,this.xg),this.Kb(k,this.xg,R),this.Kb(O,this.xg,D))}this.VT(k,G),this.Ly(G),R=k,d.set(N,-1),G==S&&(d.set(0,-1),S=-1)}else this.yx(R,!1),R=-1,k=G,C=V,O=D}if(this.yx(R,!1),R=-1,w){for(S=-1,N=0,j=d.size;N<j;N++)if((G=d.get(N))!=-1){if(S==-1)k=S=G,C=this.uf(k),O=this.xa(k);else if(G!=k&&(D=this.xa(G),V=this.jk(D),this.Sl(O,G),this.Tl(G,O),k=G,C=V,O=D,o==7&&(this.Ab(G,this.ae)|this.Ab(this.te(G),this.ae))==(1|this.Go)))return void(this.Ni=new u.Md(5,g,-1))}this.mn(g,S)}else{for(S=-1,N=0,j=d.size;N<j;N++)if((G=d.get(N))!=-1){S=G;break}y!=S&&this.mn(g,S)}}}}},r.prototype.WN=function(){for(var o=-1,l=this.$g(),d=this.Re;d!=-1;d=this.Rf(d)){var p=this.Me(d);if(p!=-1){var g=p;do{if(this.Ab(g,l)!=1){var y=this.mI();this.Dt(y,g),this.BJ(y,o),o!=-1&&this.DJ(o,y),o=y;var w=0,S=g;do w|=this.Ab(S,this.ae),this.$W(S,y),this.Kb(S,l,1),S=this.jc(S);while(S!=g);this.Vg(y,w)}g=this.jc(this.xa(g))}while(g!=p)}}y=this.mI(),this.Dt(y,-1),this.BJ(y,o),o!=-1&&this.DJ(o,y),this.Hl=y,this.Yn=u.be.qf(this.ye.size,NaN),this.kA=u.be.qf(this.ye.size,NaN),this.AJ(this.Hl,1/0),this.CJ(this.Hl,1/0),this.Jg(l)},r.prototype.sR=function(o,l,d){if((l=l!=-1?l:this.Me(o))==-1)return-1;for(o=l;;){if(this.Ab(l,d)!=1)return l;if((l=this.jc(this.xa(l)))==o)return-1}},r.prototype.yW=function(){for(var o=this.$g(),l=this.Re;l!=-1;l=this.Rf(l))for(var d=-1;;){var p=this.sR(l,d,o);if(p==-1)break;d=this.jc(this.xa(p));for(var g=p;;){var y=this.jc(g),w=this.te(g),S=this.xa(g);if(w==S){if(this.IP(g),d!=g&&d!=S||(d=-1),g==p||w==p){if(g==(p=y)||w==p)break;g=y;continue}}else this.Kb(g,o,1);if((g=y)==p)break}}this.Jg(o)},r.prototype.MB=function(o,l,d,p,g){this.Ug(),this.gH=g,this.g=o,this.Bq=this.g.aF(),(o=new u.ia(0)).Jb(d!=null?this.g.I(d.get(0)):this.g.fd);var y=0,w=1,S=d!=null?d.get(0):this.g.ld;for(g=1;S!=-1;){this.g.HJ(S,this.Bq,w),w<<=1;for(var k=this.g.Ob(S);k!=-1;k=this.g.Rb(k))for(var C=this.g.Xa(k),O=0,R=this.g.Ja(k);O<R;O++)o.add(C),C=this.g.U(C);u.aa.Rn(this.g.ic(S))||(y+=this.g.da(S)),d!=null?(S=g<d.size?d.get(g):-1,g++):S=this.g.ue(S)}for(this.Go=w,this.wa=o.size,this.g.nx(o,this.wa),this.jh==null&&(this.jh=new u.$c(2),this.ge=new u.$c(8),this.Kc=new u.$c(8),this.ye=new u.$c(8)),this.jh.De(this.wa),u.mp.zp(p),this.ge.De(this.wa+10),this.Kc.De(2*this.wa+32),this.ye.De(Math.max(32,y)),this.Cm=this.g.Gd(),d=new u.h,g=0,y=new u.h,d.Rc(),w=0;w<=this.wa;w++)if(w<this.wa?(C=o.get(w),this.g.D(C,y)):y.Rc(),!d.qb(y)){if(g<w){for(C=this.Ym(),R=O=-1;g<w;g++)R=o.get(g),this.g.Ra(R,this.Cm,C),S=this.jh.Ce(),this.jh.S(S,0,R),this.jh.S(S,1,O),O=S,k=this.g.bd(R),S=this.g.Qf(k),S=this.La(S),this.SW(C,this.xd(C)|S);this.TW(C,O),this.cr(C,this.g.Ua(R)),this.Os!=-1&&this.iX(this.Os,C),this.lX(C,this.Os),this.Os=C,this.Re==-1&&(this.Re=C)}g=w,d.L(y)}u.mp.zp(p),this.ae=this.$g(),l==5&&(this.cg=this.$g()),l==4&&(this.xg=this.$g()),this.vP(l,o),this.Ni.Jj==0&&(this.IX(l),this.Ni.Jj==0&&(isNaN(this.lA)||this.xO()?(this.WN(),this.Ni.Jj==0&&(this.Jg(this.ae),this.ae=-1,this.gH&&this.PU(l,p))):this.pA=!0))},r.prototype.Ly=function(o){var l=this.jc(o),d=this.te(o),p=this.xa(o),g=this.jc(p),y=this.te(p);l!=p&&(this.Sl(y,l),this.Tl(l,y)),d!=p&&(this.Sl(d,g),this.Tl(g,d)),d=this.jk(o),this.Me(d)==o&&(g!=o?this.mn(d,g):this.mn(d,-1)),g=this.jk(p),this.Me(g)==p&&(l!=p?this.mn(g,l):this.mn(g,-1)),this.Kc.jd(o),this.Kc.jd(p)},r.prototype.OF=function(o,l){for(;;){if((l=o.we(l))==-1)return-1;var d=o.ja(l);if(this.$e(d)!=this.$e(this.xa(d)))return d}},r.prototype.dr=function(o,l){var d;d===void 0&&(d=!0),this.MB(o,0,null,l,d)},r.prototype.vJ=function(o,l,d){var p=new u.ia(0);p.add(l),this.MB(o,4,p,d,o.ic(l)==1736)},r.prototype.wJ=function(o,l,d){var p=new u.ia(0);p.add(l),this.MB(o,5,p,d,!0)},r.prototype.Ug=function(){this.g!=null&&(this.Bq!=-1&&(this.g.xW(this.Bq),this.Bq=-1),this.Cm!=-1&&(this.g.Td(this.Cm),this.Cm=-1),this.Cq!=-1&&(this.g.Td(this.Cq),this.Cq=-1),this.ae!=-1&&(this.Jg(this.ae),this.ae=-1),this.cg!=-1&&(this.Jg(this.cg),this.cg=-1),this.xg!=-1&&(this.Jg(this.xg),this.xg=-1),this.g=null,this.ge.mj(!0),this.jh.mj(!0),this.Os=this.Re=-1,this.Kc!=null&&this.Kc.mj(!0),this.Gi!=null&&(this.Gi.length=0),this.Di!=null&&(this.Di.length=0),this.hH!=null&&(this.hH.length=0),this.ye!=null&&this.ye.mj(!0),this.Hl=-1,this.Yn=null)},r.prototype.Me=function(o){return this.ge.T(o,2)},r.prototype.D=function(o,l){this.g.dG(this.eR(o),l)},r.prototype.xd=function(o){return this.ge.T(o,1)},r.prototype.Rf=function(o){return this.ge.T(o,4)},r.prototype.cz=function(o){return this.ge.T(o,6)},r.prototype.km=function(o){return this.ge.T(o,7)},r.prototype.js=function(o){return this.jh.T(o,1)},r.prototype.tj=function(o){return this.jh.T(o,0)},r.prototype.ng=function(o,l){return(l=this.Di[l]).size<=o?-1:l.read(o)},r.prototype.nn=function(o,l,d){(l=this.Di[l]).size<=o&&l.resize(this.ge.size,-1),l.write(o,d)},r.prototype.Dp=function(){this.Di==null&&(this.Di=[]);for(var o=u.ia.qf(this.ge.Hg,-1),l=0,d=this.Di.length;l<d;l++)if(this.Di[l]==null)return this.Di[l]=o,l;return this.Di.push(o),this.Di.length-1},r.prototype.Ep=function(o){this.Di[o]=null},r.prototype.jk=function(o){return this.Kc.T(o,1)},r.prototype.uf=function(o){return this.jk(this.xa(o))},r.prototype.xa=function(o){return this.Kc.T(o,4)},r.prototype.te=function(o){return this.Kc.T(o,5)},r.prototype.jc=function(o){return this.Kc.T(o,6)},r.prototype.$e=function(o){return this.Kc.T(o,2)},r.prototype.af=function(o){return this.hk(this.Kc.T(o,2))},r.prototype.mm=function(o){return this.Kc.T(o,7)},r.prototype.Yr=function(o,l){this.D(this.jk(o),l)},r.prototype.lm=function(o,l){this.D(this.uf(o),l)},r.prototype.dh=function(o){return this.Kc.T(o,3)&this.bO},r.prototype.Ab=function(o,l){return(l=this.Gi[l]).size<=o?-1:l.read(o)},r.prototype.Kb=function(o,l,d){(l=this.Gi[l]).size<=o&&l.resize(this.Kc.size,-1),l.write(o,d)},r.prototype.$g=function(){this.Gi==null&&(this.Gi=[]);for(var o=u.ia.qf(this.Kc.Hg,-1),l=0,d=this.Gi.length;l<d;l++)if(this.Gi[l]==null)return this.Gi[l]=o,l;return this.Gi.push(o),this.Gi.length-1},r.prototype.Jg=function(o){this.Gi[o]=null},r.prototype.IP=function(o){var l=this.$e(o),d=this.xa(o),p=this.jc(o);p==d&&(p=this.jc(p))==o&&(p=-1);var g=this.AF(l);g!==o&&g!=d||this.Dt(l,p),d=this.Yn.read(l),isNaN(d)||(this.AJ(l,NaN),this.CJ(l,NaN)),this.yx(o,!0),this.Ly(o)},r.prototype.JP=function(o){for(var l=0,d=o.size;l<d;l++){var p=o.get(l),g=this.$e(this.xa(p));this.Dt(this.$e(p),-1),this.Dt(g,-1),this.yx(p,!0),this.Ly(p)}},r.prototype.AF=function(o){return this.ye.T(o,1)},r.prototype.hk=function(o){return this.ye.T(o,2)},r.prototype.Gn=function(o){return this.ye.T(o,3)},r.prototype.dR=function(o){return this.ye.T(o,4)},r.prototype.Kp=function(o){var l=this.Yn.read(o);return isNaN(l)&&(this.kY(o),l=this.Yn.read(o)),l},r.prototype.La=function(o){return this.g.KF(o,this.Bq)},r.prototype.Le=function(o){return this.g.Pa(o,this.Cm)},r.prototype.uR=function(o){return this.g.Pa(o,this.Cq)},r.prototype.tR=function(o,l){var d=this.Me(o);if(d==-1)return-1;var p=d,g=-1,y=-1;do{if(this.uf(p)==l)return p;if(g==-1){if((g=this.Me(l))==-1)break;y=g}if(this.uf(y)==o)return this.xa(y);p=this.jc(this.xa(p)),y=this.jc(this.xa(y))}while(p!=d&&y!=g);return-1},r.prototype.pB=function(o,l){l.Or(),l=l.get();var d=new u.h;this.Yr(o,d),l.Dc(d),this.lm(o,d),l.Qc(d)},r.prototype.HO=function(o,l){if(o==l)return 0;var d=new u.h;this.lm(o,d);var p=new u.h;return this.lm(l,p),d.qb(p)?0:(l=new u.h,this.Yr(o,l),(o=new u.h).uc(d,l),(d=new u.h).uc(p,l),u.h.nu(o,d))},r.prototype.GO=function(o,l){if(o==l)return 0;var d=new u.h;this.lm(o,d);var p=new u.h;return this.lm(l,p),d.qb(p)?0:(l=new u.h,this.Yr(o,l),(o=new u.h).uc(d,l),(d=new u.h).uc(p,l),0<=d.y&&0<o.y?u.h.nu(o,d):0)},r.prototype.xO=function(){for(var o=u.lc.ox(this.lA),l=new u.h,d=new u.h,p=new u.h,g=new u.h,y=new u.h,w=this.Re;w!=-1;w=this.Rf(w)){var S=this.Me(w);if(S!=-1){var k=S;this.Yr(k,l),this.lm(k,d),y.uc(d,l);var C=y.Sk();do{var O=k;if((k=this.jc(this.xa(k)))!=O){this.lm(k,p),g.uc(p,l),O=g.Sk();var R=g.wi(y);if(R*R/(O*C)*Math.min(O,C)<=o)return!1;y.L(g),C=O,d.L(p)}}while(k!=S)}}return!0},r}(),u.iu=A}(B||(B={})),function(u){var A=function(){function b(){this.j=null,this.oH=new u.h,this.pH=new u.h,this.Gj=null,this.Mv=!1,this.tl=-1}return b.prototype.cf=function(c){return c<this.Gj.length&&this.Gj[c]},b.prototype.dl=function(c,a,r,o){var l=u.aa.tf(this.j.g.ic(r));if(u.aa.tf(this.j.g.ic(a))!=2||l!=1)throw u.i.Qa();this.FP(c,a,r,o)},b.prototype.dr=function(c,a){this.j==null&&(this.j=new u.iu),this.j.dr(c,a)},b.prototype.Ft=function(c,a,r){for(u.Tk.V(c,a,r,!0),a=c.ld;a!=-1;a=c.ue(a))c.ic(a)==1736&&u.rn.V(c,a,-1,this.Mv,r);this.dr(c,r)},b.prototype.ME=function(c,a,r,o,l){var d=this.j.g;if(d.ic(c)==1736)for(c=d.Ob(c);c!=-1;c=d.Rb(c)){var p=d.Xa(c);this.j.Le(p),this.j.Le(d.U(p));var g=this.j.uR(p);if(g!=-1){var y=this.j.Ab(g,r);if(y!=1&&y!=2)if(this.cf(this.j.af(g))){this.j.Kb(g,r,1),y=d.vf(a,-1);var w=g,S=this.j.Le(p),k=1;do{var C=this.sm(p,l);d.ij(y,C),o!=-1&&this.j.nn(S,o,1),this.j.Kb(w,r,1),w=this.j.jc(w);do var O=(C=k==1?d.U(p):d.Ma(p))!=-1?this.j.Le(C):-1;while(O==S);var R=this.j.jk(w);if(R!=O){do O=(C=k==1?d.Ma(p):d.U(p))!=-1?this.j.Le(C):-1;while(O==S);R!=O?(O=R,C=this.j.tj(this.j.km(O))):k=-k}S=O,p=C}while(w!=g);d.kn(y,!0)}else this.j.Kb(g,r,2)}}},b.prototype.eF=function(){for(var c=this.j.$g(),a=new u.ia(0),r=this.j.Re;r!=-1;r=this.j.Rf(r)){var o=this.j.Me(r),l=o;if(o!=-1)do{if(this.j.Ab(l,c)!=1){var d=this.j.xa(l);this.j.Kb(d,c,1),this.j.Kb(l,c,1),this.cf(this.j.af(l))&&this.cf(this.j.af(d))&&a.add(l)}l=this.j.jc(this.j.xa(l))}while(l!=o)}this.j.Jg(c),this.j.JP(a)},b.prototype.sm=function(c,a){return a==-1?c:this.aS(c,a)},b.prototype.aS=function(c,a){var r=this.j.g,o=this.j.km(this.j.Le(c));do{var l=this.j.tj(o);if(r.Qf(r.bd(l))==a)return l;o=this.j.js(o)}while(o!=-1);return c},b.prototype.Ot=function(c,a,r){this.eF();var o=this.j.g,l=o.Ig(1736),d=this.j.$g();return this.uK(c,a,l,r,d,-1),this.j.Jg(d),u.rn.V(o,l,1,this.Mv,null),l},b.prototype.uK=function(c,a,r,o,l,d){for(this.ME(c,r,l,d,o),a!=-1&&this.ME(a,r,l,d,o),c=this.j.g,a=this.j.Re;a!=-1;a=this.j.Rf(a)){var p=this.j.Me(a);if(p!=-1){var g=p;do{var y=this.j.Ab(g,l);if(y!=1&&y!=2)if(this.cf(this.j.af(g))){y=c.vf(r,-1);var w=g;do{var S=this.j.mm(w);S!=-1?S=this.j.tj(S):(S=this.j.tj(this.j.mm(this.j.xa(w))),S=this.j.g.U(S)),S=this.sm(S,o),c.ij(y,S),this.j.Kb(w,l,1),d!=-1&&(S=this.j.Le(S),this.j.nn(S,d,1)),w=this.j.jc(w)}while(w!=g);c.kn(y,!0)}else this.j.Kb(g,l,2);g=this.j.jc(this.j.xa(g))}while(g!=p)}}},b.prototype.aY=function(c,a,r){var o=this.j.g,l=o.Ig(1736),d=o.Ig(1607),p=o.Ig(550);this.eF();var g=-1,y=this.j.$g(),w=this.j.Dp();for(this.uK(c,a,l,r,y,w),c=this.j.Re;c!=-1;c=this.j.Rf(c))if((a=this.j.Me(c))!=-1){var S=a;do{var k=this.j.Ab(S,y),C=this.j.Ab(this.j.xa(S),y);if((k|=C)==2)if(k=this.j.dh(S),this.cf(k)){var O=o.vf(d,-1),R=S;k=this.Yw(c,o),k=this.sm(k,r),o.ij(O,k),this.j.nn(c,w,1);do{if(k=this.j.uf(R),C=this.Yw(k,o),C=this.sm(C,r),o.ij(O,C),this.j.Kb(R,y,1),this.j.Kb(this.j.xa(R),y,1),this.j.nn(k,w,1),R=this.j.jc(R),k=this.j.Ab(R,y),(k|=C=this.j.Ab(this.j.xa(R),y))!=2)break;if(k=this.j.dh(R),!this.cf(k)){this.j.Kb(R,y,1),this.j.Kb(this.j.xa(R),y,1);break}}while(R!=S)}else this.j.Kb(S,y,1),this.j.Kb(this.j.xa(S),y,1);S=this.j.jc(this.j.xa(S))}while(S!=a)}for(c=this.j.Re;c!=-1;c=this.j.Rf(c))(k=this.j.ng(c,w))!=1&&(k=this.j.xd(c),this.cf(k)&&(g==-1&&(g=o.vf(p,-1)),(a=this.j.km(c))!=-1&&(a=this.j.tj(a),k=this.sm(a,r),o.ij(g,k))));return this.j.Ep(w),this.j.Jg(y),u.rn.V(o,l,1,this.Mv,null),(r=[])[0]=p,r[1]=d,r[2]=l,r},b.prototype.Yw=function(c,a){var r=-1;for(c=this.j.km(c);c!=-1;c=this.j.js(c)){var o=this.j.tj(c);r==-1&&(r=o);var l=this.j.La(a.Qf(a.bd(o)));if(this.cf(l)){r=o;break}}return r},b.prototype.lB=function(c,a){for(var r=this.jl(a),o=this.j.jk(a),l=this.j.uf(a),d=0,p=0,g=this.j.km(o);g!=-1;g=this.j.js(g)){var y=this.j.tj(g),w=c.bd(y),S=this.j.La(c.Qf(w));w=c.Xa(w),(S=!!(S&r))&&w==y&&(this.tl=a);var k=c.U(y);k!=-1&&this.j.Le(k)==l?(d++,S&&(this.tl===-1&&w==k&&(y=this.j.jc(a),this.cf(this.jl(y))&&(this.tl=y)),p++)):(y=c.Ma(y))!=-1&&this.j.Le(y)==l&&(d--,S&&(this.tl===-1&&w===y&&(y=this.j.jc(a),this.cf(this.jl(y))&&(this.tl=y)),p--))}return this.j.D(o,this.oH),this.j.D(l,this.pH),(p!=0?p:d)*(c=u.h.tb(this.oH,this.pH))},b.prototype.jl=function(c){return this.j.dh(c)|this.j.af(c)|this.j.af(this.j.xa(c))},b.prototype.xK=function(c){for(var a=this.j.xa(this.j.te(c)),r=-1;a!=c;){if(this.cf(this.jl(a))){if(r!=-1)return-1;r=a}a=this.j.xa(this.j.te(a))}return r!=-1?this.j.xa(r):-1},b.prototype.yK=function(c){for(var a=this.j.xa(this.j.jc(c)),r=-1;a!=c;){if(this.cf(this.jl(a))){if(r!=-1)return-1;r=a}a=this.j.xa(this.j.jc(a))}return r!=-1?this.j.xa(r):-1},b.prototype.mJ=function(c,a,r,o,l){var d=this.j.g,p=c,g=this.j.xa(p);this.j.Kb(p,r,1),this.j.Kb(g,r,1),this.tl=-1;for(var y=this.lB(d,p),w=p,S=-1,k=!1,C=1;;){var O=this.j.te(p);if(O==g)break;if(g=this.j.jc(g),this.j.xa(O)!=g){if((p=this.xK(p))==-1){k=!0;break}g=this.j.xa(p)}else p=O;if(p==c){S=c;break}if(O=this.jl(p),!this.cf(O))break;this.j.Kb(p,r,1),this.j.Kb(g,r,1),w=p,y+=this.lB(d,p),C++}if(S==-1)for(p=c,g=this.j.xa(p),S=p;(c=this.j.jc(p))!=g;){if(g=this.j.te(g),this.j.xa(c)!=g){if((p=this.yK(p))==-1){k=!0;break}g=this.j.xa(p)}else p=c;if(O=this.jl(p),!this.cf(O))break;this.j.Kb(p,r,1),this.j.Kb(g,r,1),S=p,y+=this.lB(d,p),C++}else if(this.tl!=-1&&(w=this.tl,S=this.j.te(this.tl),this.j.xa(S)!=this.j.jc(this.j.xa(w))&&(S=this.xK(w))==-1))throw u.i.Qa();for(0<=y||(p=S,S=this.j.xa(w),w=this.j.xa(p)),r=d.vf(a,-1),p=w,w=this.j.jk(w),k=this.j.uf(S)==w&&k,y=this.Yw(w,d),y=this.sm(y,l),d.ij(r,y),o!=-1&&this.j.nn(w,o,1),w=0,C=k?u.O.truncate((C+1)/2):-1;c=this.j.uf(p),y=this.Yw(c,d),y=this.sm(y,l),d.ij(r,y),w++,o!=-1&&this.j.nn(c,o,1),k&&w==C&&(r=d.vf(a,-1),d.ij(r,y)),p!=S;)if(c=this.j.jc(p),this.j.te(this.j.xa(p))!=this.j.xa(c)){if((p=this.yK(p))==-1)throw u.i.Qa()}else p=c},b.prototype.Pt=function(c){for(var a=this.j.g.Ig(1607),r=this.j.$g(),o=this.j.Re;o!=-1;o=this.j.Rf(o)){var l=this.j.Me(o),d=l;do this.j.Ab(d,r)!=1&&this.cf(this.jl(d))&&this.mJ(d,a,r,-1,c),d=this.j.jc(this.j.xa(d));while(d!=l)}return this.j.Jg(r),a},b.prototype.bY=function(c){for(var a=this.j.g,r=a.Ig(1607),o=a.Ig(550),l=this.j.$g(),d=this.j.Dp(),p=-1,g=this.j.Re;g!=-1;g=this.j.Rf(g)){var y=this.j.Me(g),w=y;do{var S=this.j.Ab(w,l);S!=1&&(S=this.jl(w),this.cf(S)&&this.mJ(w,r,l,d,c)),w=this.j.jc(this.j.xa(w))}while(w!=y)}for(g=this.j.Re;g!=-1;g=this.j.Rf(g))(S=this.j.ng(g,d))!=1&&(S=this.j.xd(g),this.cf(S)&&(p==-1&&(p=a.vf(o,-1)),(y=this.j.km(g))!=-1&&(y=this.j.tj(y),y=this.sm(y,c),a.ij(p,y))));return this.j.Jg(l),this.j.Ep(d),(c=[])[0]=o,c[1]=r,c},b.prototype.mr=function(){for(var c=this.j.g,a=c.Ig(550),r=c.vf(a,-1),o=this.j.Re;o!=-1;o=this.j.Rf(o))if(this.cf(this.j.xd(o))){for(var l=-1,d=this.j.km(o);d!=-1;d=this.j.js(d)){var p=this.j.tj(d);l==-1&&(l=p);var g=this.j.La(c.Qf(c.bd(p)));if(this.cf(g)){l=p;break}}c.ij(r,l)}return a},b.prototype.bq=function(c){this.Gj=[];for(var a=0;a<c;a++)this.Gj[a]=!1},b.aW=function(c,a,r){var o=c.Ia(),l=Array(1e3);u.O.$u(l,null);var d=u.O.lg(1e3,0),p=c.I(),g=!0,y=a.Db()==2;if(a.Db()!=1&&a.Db()!=2)throw u.i.Qa();for(var w=0;w<p;){var S=u.O.truncate(c.lW(l,w)-w);y?u.hd.sK(a,l,S,r,d):u.hd.tK(a,l,S,r,d);for(var k=0,C=0;C<S;C++)d[C]==0&&(g&&(g=!1,o.Fd(c,0,w)),k!=C&&o.Fd(c,w+k,w+C),k=C+1);g||k==S||o.Fd(c,w+k,w+S),w+=S}return g?c:o},b.zG=function(c,a,r){return c instanceof u.de?b.aW(c,a,r):a instanceof u.Sa?c.B()||a.B()?c.Ia():u.Tk.zU(r,c,a)?u.Tk.CO(c,a):c.Ia():b.bW(c,a,r)},b.Av=function(c,a,r,o){var l=new u.l;c.A(l);var d=new u.l;a.A(d);var p=new u.l;if(p.K(l),p.Zb(d),r=u.ta.Wd(r,p,!0),(p=new u.l).K(d),d=u.ta.Er(r),p.W(d,d),!l.isIntersecting(p)){if(c.Db()<=a.Db())return b.ki(b.Xe(c.Ia()),c,"&");if(c.Db()>a.Db())return b.ki(b.Xe(a.Ia()),c,"&")}return d=new b,p=(l=new u.gd).Ib(b.Xe(c)),a=l.Ib(b.Xe(a)),d.Ft(l,r,o),o=d.Av(p,a),c=b.ki(l.Ne(o),c,"&"),u.aa.Hc(c.getType())&&(c.Ch(2,r),c.getType()==1736&&c.fm()),c},b.bW=function(c,a,r){if(c.B()||a.B())return c.Ia();var o=[null],l=[0],d=a.Db()==2;if(a.Db()!=1&&a.Db()!=2)throw u.i.Qa();return o[0]=c.D(),d?u.hd.sK(a,o,1,r,l):u.hd.tK(a,o,1,r,l),l[0]==0?c.Ia():c},b.prototype.LU=function(c,a,r,o,l){if(c.B())return c;var d=new u.gd;return c=d.Ib(c),this.Mk(d,c,a,r,o,l)},b.prototype.NU=function(c,a,r,o,l,d){if(l&&c.ic(a)!=550){var p=new u.RC;p.TX(c,r),p.Ng?(u.Tk.V(c,r,d,!0),l=!1):this.j.yy(r)}else u.Tk.V(c,r,d,!0),l=!1;if(o&&c.ic(a)!=550?this.j.wJ(c,a,d):this.j.vJ(c,a,d),this.j.pA)return this.j.Ug(),this.j=null,this.Mk(c,a,r,o,!1,d);if(this.j.yy(NaN),d=this.j.La(a),this.bq(d+1),this.Gj[d]=!0,c.ic(a)==1736||o&&c.ic(a)!=550)return c.Yo(a,0),a=this.Ot(a,-1,-1),(c=c.Ne(a)).Yo(0),l?c.Ch(1,0):(c.Ch(2,r),c.fm()),c;if(c.ic(a)==1607)return a=this.Pt(-1),c=c.Ne(a),l||c.Ch(2,r),c;if(c.ic(a)==550)return a=this.mr(),c=c.Ne(a),l||c.Ch(2,r),c;throw u.i.Qa()},b.prototype.Mk=function(c,a,r,o,l,d){this.j=new u.iu;try{return this.NU(c,a,r,o,l,d)}finally{this.j.Ug()}},b.Mk=function(c,a,r,o,l){return new b().LU(c,a,r,o,l)},b.prototype.MU=function(c,a,r,o){this.Mv=c,this.j=new u.iu,c=a.In(r);var l=a.ic(r);if(c!=1||l==550?this.j.vJ(a,r,o):this.j.wJ(a,r,o),!this.j.pA)if(this.j.yy(NaN),o=this.j.La(r),this.bq(o+1),this.Gj[o]=!0,a.ic(r)==1736||c==1&&a.ic(r)!=550)a.Yo(r,0),o=this.Ot(r,-1,-1),a.hC(o,r),a.BB(o);else if(a.ic(r)==1607)o=this.Pt(-1),a.hC(o,r),a.BB(o);else{if(a.ic(r)!=550)throw u.i.fa("internal error");o=this.mr(),a.hC(o,r),a.BB(o)}},b.prototype.im=function(c,a){var r=u.aa.tf(this.j.g.ic(c)),o=u.aa.tf(this.j.g.ic(a));if(r>o)return c;var l=this.j.La(c),d=this.j.La(a);if(this.bq(1+(l|d)),this.Gj[this.j.La(c)]=!0,r==2&&o==2)return this.Ot(c,a,-1);if(r==1&&o==2||r==1&&o==1)return this.Pt(-1);if(r==0)return this.mr();throw u.i.Qa()},b.prototype.Av=function(c,a){var r=u.aa.tf(this.j.g.ic(c)),o=u.aa.tf(this.j.g.ic(a)),l=this.j.La(c),d=this.j.La(a);if(this.bq(1+(l|d)),this.Gj[this.j.La(c)|this.j.La(a)]=!0,l=-1,1<this.j.g.ht.Aa&&(l=c),r==2&&o==2)return this.Ot(c,a,l);if(r==1&&0<o||o==1&&0<r)return this.Pt(l);if(r==0||o==0)return this.mr();throw u.i.Qa()},b.prototype.Pz=function(c,a){var r=u.aa.tf(this.j.g.ic(c)),o=u.aa.tf(this.j.g.ic(a)),l=this.j.La(c),d=this.j.La(a);if(this.bq(1+(l|d)),this.Gj[this.j.La(c)|this.j.La(a)]=!0,l=-1,1<this.j.g.ht.Aa&&(l=c),r==2&&o==2)return this.aY(c,a,l);if(r==1&&0<o||o==1&&0<r)return this.bY(l);if(r==0||o==0)return(c=[])[0]=this.mr(),c;throw u.i.Qa()},b.prototype.ep=function(c,a){var r=u.aa.tf(this.j.g.ic(c)),o=u.aa.tf(this.j.g.ic(a)),l=this.j.La(c),d=this.j.La(a);if(this.bq(1+(l|d)),this.Gj[this.j.La(c)]=!0,this.Gj[this.j.La(a)]=!0,r==2&&o==2)return this.Ot(c,a,-1);if(r==1&&o==1)return this.Pt(-1);if(r==0&&o==0)return this.mr();throw u.i.Qa()},b.Xe=function(c){var a=c.getType();return a==197?(a=new u.Da(c.description),c.B()||a.ad(c,!1),a):a==33?(a=new u.de(c.description),c.B()||a.add(c),a):a==322?(a=new u.Ta(c.description),c.B()||a.oc(c,!0),a):c},b.ki=function(c,a,r){var o=c.getType();return o==197?(a=new u.Da(c.description),c.B()||a.ad(c,!1),a):o!=33||r!="|"&&r!="^"?o==322?(a=new u.Ta(c.description),c.B()||a.oc(c,!0),a):o==33&&r=="-"&&a.getType()==33||o==550&&r=="&"&&a.getType()==33?(a=new u.Sa(c.description),c.B()||c.ve(0,a),a):c:(a=new u.de(c.description),c.B()||a.add(c),a)},b.im=function(c,a,r,o){if(c.B()||a.B()||c.Db()>a.Db())return b.ki(b.Xe(c),c,"-");var l=new u.l;c.A(l);var d=new u.l;if(a.A(d),!l.isIntersecting(d))return b.ki(b.Xe(c),c,"-");var p=new u.l;return p.K(l),p.Zb(d),r=u.ta.Wd(r,p,!0),d=new b,p=(l=new u.gd).Ib(b.Xe(c)),a=l.Ib(b.Xe(a)),d.Ft(l,r,o),o=d.im(p,a),o=l.Ne(o),c=b.ki(o,c,"-"),u.aa.Hc(c.getType())&&(c.Ch(2,r),c.getType()==1736&&c.fm()),c},b.VP=function(c,a,r){if(2>c.length)throw u.i.N("not enough geometries to dissolve");for(var o=0,l=0,d=c.length;l<d;l++)o=Math.max(c[l].Db(),o);var p=new u.l;p.Oa();var g=new u.gd,y=-1,w=0,S=-1;for(l=0,d=c.length;l<d;l++)if(c[l].Db()==o)if(c[l].B())S==-1&&(S=l);else{S=l,y==-1?y=g.Ib(b.Xe(c[l])):g.uN(y,b.Xe(c[l]));var k=new u.l;c[l].xc(k),p.Zb(k),w++}return 2>w?b.Xe(c[S]):(c=o==2,a=u.ta.Wd(o==0?a:null,p,!0),new b().Mk(g,y,a,c,!0,r))},b.Pz=function(c,a,r,o){var l=[null,null,null],d=new u.l;c.A(d);var p=new u.l;a.A(p);var g=new u.l;if(g.K(d),g.Zb(p),r=u.ta.Wd(r,g,!0),(g=new u.l).K(p),p=u.ta.Er(r),g.W(p,p),!d.isIntersecting(g)){if(c.Db()<=a.Db())return l[(c=b.ki(b.Xe(c.Ia()),c,"&")).Db()]=c,l;if(c.Db()>a.Db())return l[(c=b.ki(b.Xe(a.Ia()),c,"&")).Db()]=c,l}for(p=new b,g=(d=new u.gd).Ib(b.Xe(c)),a=d.Ib(b.Xe(a)),p.Ft(d,r,o),o=p.Pz(g,a),a=0;a<o.length;a++)p=b.ki(d.Ne(o[a]),c,"&"),u.aa.Hc(p.getType())&&(p.Ch(2,r),p.getType()==1736&&p.fm()),l[p.Db()]=p;return l},b.ep=function(c,a,r,o){if(c.Db()>a.Db())return b.ki(b.Xe(c),c,"^");if(c.Db()<a.Db()||c.B())return b.ki(b.Xe(a),c,"^");if(a.B())return b.ki(b.Xe(c),c,"^");var l=new u.l;c.A(l);var d=new u.l;a.A(d);var p=new u.l;return p.K(l),p.Zb(d),r=u.ta.Wd(r,p,!0),d=new b,p=(l=new u.gd).Ib(b.Xe(c)),a=l.Ib(b.Xe(a)),d.Ft(l,r,o),o=d.ep(p,a),c=b.ki(l.Ne(o),c,"^"),u.aa.Hc(c.getType())&&(c.Ch(2,r),c.getType()==1736&&c.fm()),c},b.prototype.LQ=function(c,a){var r=this.j.g;c=r.vf(c,-1);for(var o=a.size,l=0;l<o;l++){var d=a.get(l);r.ij(c,d)}r.kn(c,!0)},b.prototype.aX=function(c,a){for(var r=this.j.g,o=r.ld;o!=-1;o=r.ue(o))if(o==a)for(var l=r.Ob(o);l!=-1;l=r.Rb(l)){var d=r.Xa(l);if(d!=-1)for(var p=r.U(d);p!=-1;){d=this.j.Le(d);var g=this.j.Le(p);(d=this.j.tR(d,g))!=-1&&(g=this.j.xa(d),this.j.Kb(d,c,1),this.j.Kb(g,c,2)),d=p,p=r.U(d)}}},b.prototype.cW=function(c,a,r,o){r=this.j.La(r),o=this.j.La(o);var l=new u.ia(0);l.Jb(256);for(var d=this.j.g,p=this.j.$g(),g=this.j.Re;g!=-1;g=this.j.Rf(g)){var y=this.j.Me(g);if(y!=-1){var w=y;do{if(this.j.Ab(w,p)!=1){var S=w,k=w,C=!1,O=0;do{if(this.j.Kb(S,p,1),!C){var R=this.j.dh(S);R&o&&this.j.af(S)&r&&(k=S,C=!0)}C&&(l.add(this.j.tj(this.j.km(this.j.jk(S)))),c!=-1&&(R=this.j.dh(S))&o&&(O|=R=this.j.Ab(S,c))),S=this.j.jc(S)}while(S!=k);C&&0<this.j.Kp(this.j.$e(k))&&(S=d.Ig(1736),this.LQ(S,l),a!=-1&&d.HJ(S,a,O)),l.clear(!1)}w=this.j.jc(this.j.xa(w))}while(w!=y)}}this.j.Jg(p)},b.prototype.FP=function(c,a,r,o){this.j.yW();var l=-1;c!=-1&&(l=this.j.$g(),this.aX(l,r)),this.cW(l,c,a,r),l!=-1&&(this.j.Jg(l),l=-1);var d=this.j.g;for(c=0,l=d.ld;l!=-1;l=d.ue(l))l!=a&&l!=r&&(o.add(l),c++);o.Vd(0,c,function(p,g){return(p=d.wz(d.Ob(p)))<(g=d.wz(d.Ob(g)))?-1:p==g?0:1})},b.prototype.Ug=function(){this.j!=null&&(this.j.Ug(),this.j=null)},b}();u.Fg=A}(B||(B={})),function(u){var A=function(){function b(c){c!==void 0?this.setScale(c):this.RB()}return b.prototype.lx=function(){this.Lb=this.Gb=this.jb=this.eb=this.ab=this.bb=0},b.prototype.Nb=function(c){return this==c||c instanceof b&&this.bb==c.bb&&this.eb==c.eb&&this.Gb==c.Gb&&this.jb==c.jb&&this.ab==c.ab&&this.Lb==c.Lb},b.prototype.cc=function(){return u.O.uj(),u.O.uj(),u.O.uj(),u.O.uj(),u.O.uj(),u.O.uj()},b.prototype.Eh=function(c,a){var r=this.jb*c.x+this.ab*c.y+this.Lb;a.x=this.bb*c.x+this.eb*c.y+this.Gb,a.y=r},b.prototype.eY=function(c,a,r){for(var o=0;o<a;o++){var l=c[o].x,d=c[o].y,p=this.bb*l+this.eb*d+this.Gb;l=this.jb*l+this.ab*d+this.Lb,r[o]!=null?r[o].ma(p,l):r[o]=u.h.construct(p,l)}},b.prototype.multiply=function(c){b.multiply(this,c,this)},b.multiply=function(c,a,r){var o=c.bb*a.bb+c.jb*a.eb,l=c.eb*a.bb+c.ab*a.eb,d=c.Gb*a.bb+c.Lb*a.eb+a.Gb,p=c.bb*a.jb+c.jb*a.ab,g=c.eb*a.jb+c.ab*a.ab;c=c.Gb*a.jb+c.Lb*a.ab+a.Lb,r.bb=o,r.eb=l,r.Gb=d,r.jb=p,r.ab=g,r.Lb=c},b.prototype.Of=function(){var c=new b;return c.bb=this.bb,c.eb=this.eb,c.Gb=this.Gb,c.jb=this.jb,c.ab=this.ab,c.Lb=this.Lb,c},b.prototype.mC=function(c){if(!c.B()){for(var a=[],r=0;4>r;r++)a[r]=new u.h;c.nB(a),this.fY(a,a),c.Zw(a,4)}},b.prototype.fY=function(c,a){for(var r=0;r<c.length;r++){var o=new u.h,l=c[r];o.x=this.bb*l.x+this.eb*l.y+this.Gb,o.y=this.jb*l.x+this.ab*l.y+this.Lb,a[r]=o}},b.prototype.pS=function(c,a){c.B()||a.B()||c.R()==0||c.ca()==0?this.lx():(this.eb=this.jb=0,this.bb=a.R()/c.R(),this.ab=a.ca()/c.ca(),this.Gb=a.v-c.v*this.bb,this.Lb=a.G-c.G*this.ab)},b.prototype.dY=function(c){var a=new u.h,r=new u.h;a.ma(this.bb,this.jb),r.ma(this.eb,this.ab),a.sub(a);var o=.5*a.Sk();return a.ma(this.bb,this.jb),r.ma(this.eb,this.ab),a.add(r),c*(o>(a=.5*a.Sk())?Math.sqrt(o):Math.sqrt(a))},b.prototype.RB=function(){this.bb=1,this.jb=this.Gb=this.eb=0,this.ab=1,this.Lb=0},b.prototype.isIdentity=function(c){if(c!==void 0){var a=u.h.construct(0,1);return this.Eh(a,a),a.sub(u.h.construct(0,1)),a.Sk()>c*c?!1:(a.ma(0,0),this.Eh(a,a),!(a.Sk()>c*c)&&(a.ma(1,0),this.Eh(a,a),a.sub(u.h.construct(1,0)),a.Sk()<=c*c))}return this.bb==1&&this.ab==1&&this.eb==0&&this.Gb==0&&this.jb==0&&this.Lb==0},b.prototype.Bi=function(c){return Math.abs(this.bb*this.ab-this.jb*this.eb)<=2*c*(Math.abs(this.bb*this.ab)+Math.abs(this.jb*this.eb))},b.prototype.gg=function(c,a){this.bb=1,this.eb=0,this.Gb=c,this.jb=0,this.ab=1,this.Lb=a},b.prototype.setScale=function(c,a){a!==void 0?(this.bb=c,this.jb=this.Gb=this.eb=0,this.ab=a,this.Lb=0):this.setScale(c,c)},b.prototype.$B=function(){this.bb=0,this.eb=1,this.Gb=0,this.jb=1,this.Lb=this.ab=0},b.prototype.setRotate=function(c){this.pX(Math.cos(c),Math.sin(c))},b.prototype.pX=function(c,a){this.bb=c,this.eb=-a,this.Gb=0,this.jb=a,this.ab=c,this.Lb=0},b.prototype.shift=function(c,a){this.Gb+=c,this.Lb+=a},b.prototype.scale=function(c,a){this.bb*=c,this.eb*=c,this.Gb*=c,this.jb*=a,this.ab*=a,this.Lb*=a},b.prototype.flipX=function(c,a){this.bb=-this.bb,this.eb=-this.eb,this.Gb=c+a-this.Gb},b.prototype.flipY=function(c,a){this.jb=-this.jb,this.ab=-this.ab,this.Lb=c+a-this.Lb},b.prototype.rotate=function(c){var a=new b;a.setRotate(c),this.multiply(a)},b.prototype.inverse=function(c){if(c!==void 0){var a=this.bb*this.ab-this.eb*this.jb;a==0?c.lx():(a=1/a,c.Gb=(this.eb*this.Lb-this.Gb*this.ab)*a,c.Lb=(this.Gb*this.jb-this.bb*this.Lb)*a,c.bb=this.ab*a,c.eb=-this.eb*a,c.jb=-this.jb*a,c.ab=this.bb*a)}else this.inverse(this)},b}();u.Dd=A}(B||(B={})),function(u){var A=function(){function b(){}return b.prototype.lx=function(){this.hg=this.Lb=this.Gb=this.He=this.Fe=this.Ee=this.Ge=this.ab=this.eb=this.Ze=this.jb=this.bb=0},b.prototype.setScale=function(c,a,r){this.bb=c,this.eb=this.Ze=this.jb=0,this.ab=a,this.Fe=this.Ee=this.Ge=0,this.He=r,this.hg=this.Lb=this.Gb=0},b.prototype.setTranslate=function(c,a,r){this.bb=1,this.eb=this.Ze=this.jb=0,this.ab=1,this.Fe=this.Ee=this.Ge=0,this.He=1,this.Gb=c,this.Lb=a,this.hg=r},b.prototype.translate=function(c,a,r){this.Gb+=c,this.Lb+=a,this.hg+=r},b.prototype.mC=function(c){if(!c.B()){for(var a=new u.Nd[8],r=0;8>r;r++)a[r]=new u.Nd;c.nB(a),this.transform(a,8,a),c.Zw(a)}},b.prototype.transform=function(c,a,r){for(var o=0;o<a;o++){var l=new u.Nd,d=c[o];l.x=this.bb*d.x+this.eb*d.y+this.Ee*d.z+this.Gb,l.y=this.jb*d.x+this.ab*d.y+this.Fe*d.z+this.Lb,l.z=this.Ze*d.x+this.Ge*d.y+this.He*d.z+this.hg,r[o]=l}},b.prototype.fp=function(c){var a=new u.Nd;return a.x=this.bb*c.x+this.eb*c.y+this.Ee*c.z+this.Gb,a.y=this.jb*c.x+this.ab*c.y+this.Fe*c.z+this.Lb,a.z=this.Ze*c.x+this.Ge*c.y+this.He*c.z+this.hg,a},b.prototype.Ag=function(c){b.multiply(this,c,this)},b.multiply=function(c,a,r){var o=c.bb*a.bb+c.jb*a.eb+c.Ze*a.Ee,l=c.bb*a.jb+c.jb*a.ab+c.Ze*a.Fe,d=c.bb*a.Ze+c.jb*a.Ge+c.Ze*a.He,p=c.eb*a.bb+c.ab*a.eb+c.Ge*a.Ee,g=c.eb*a.jb+c.ab*a.ab+c.Ge*a.Fe,y=c.eb*a.Ze+c.ab*a.Ge+c.Ge*a.He,w=c.Ee*a.bb+c.Fe*a.eb+c.He*a.Ee,S=c.Ee*a.jb+c.Fe*a.ab+c.He*a.Fe,k=c.Ee*a.Ze+c.Fe*a.Ge+c.He*a.He,C=c.Gb*a.bb+c.Lb*a.eb+c.hg*a.Ee+a.Gb,O=c.Gb*a.jb+c.Lb*a.ab+c.hg*a.Fe+a.Lb;c=c.Gb*a.Ze+c.Lb*a.Ge+c.hg*a.He+a.hg,r.bb=o,r.jb=l,r.Ze=d,r.eb=p,r.ab=g,r.Ge=y,r.Ee=w,r.Fe=S,r.He=k,r.Gb=C,r.Lb=O,r.hg=c},b.inverse=function(c,a){var r=c.bb*(c.ab*c.He-c.Ge*c.Fe)-c.jb*(c.eb*c.He-c.Ge*c.Ee)+c.Ze*(c.eb*c.Fe-c.ab*c.Ee);if(r==0)throw u.i.fa("math singularity");var o=1/r;r=(c.ab*c.He-c.Ge*c.Fe)*o;var l=-(c.eb*c.He-c.Ge*c.Ee)*o,d=(c.eb*c.Fe-c.ab*c.Ee)*o,p=-(c.jb*c.He-c.Fe*c.Ze)*o,g=(c.bb*c.He-c.Ze*c.Ee)*o,y=-(c.bb*c.Fe-c.jb*c.Ee)*o,w=(c.jb*c.Ge-c.Ze*c.ab)*o,S=-(c.bb*c.Ge-c.Ze*c.eb)*o;o*=c.bb*c.ab-c.jb*c.eb;var k=-(c.Gb*r+c.Lb*l+c.hg*d),C=-(c.Gb*p+c.Lb*g+c.hg*y);c=-(c.Gb*w+c.Lb*S+c.hg*o),a.bb=r,a.jb=p,a.Ze=w,a.eb=l,a.ab=g,a.Ge=S,a.Ee=d,a.Fe=y,a.He=o,a.Gb=k,a.Lb=C,a.hg=c},b.prototype.Of=function(){var c=new b;return c.bb=this.bb,c.jb=this.jb,c.Ze=this.Ze,c.eb=this.eb,c.ab=this.ab,c.Ge=this.Ge,c.Ee=this.Ee,c.Fe=this.Fe,c.He=this.He,c.Gb=this.Gb,c.Lb=this.Lb,c.hg=this.hg,c},b}();u.JY=A}(B||(B={})),function(u){var A=function(c){function a(r){if(r!==void 0)r=c.call(this,r.cc(),r)||this;else{(r=c.call(this)||this).bg=[],r.bg[0]=0,r.Aa=1,r.uh=[];for(var o=0;10>o;o++)r.uh[o]=-1;r.uh[r.bg[0]]=0}return r.jq=!0,r}return Qe(a,c),a.prototype.re=function(r){this.hasAttribute(r)||(this.uh[r]=0,this.jD())},a.prototype.removeAttribute=function(r){if(r==0)throw u.i.N("Position attribue cannot be removed");this.hasAttribute(r)&&(this.uh[r]=-1,this.jD())},a.prototype.reset=function(){this.bg[0]=0,this.Aa=1;for(var r=0;r<this.uh.length;r++)this.uh[r]=-1;this.uh[this.bg[0]]=0,this.jq=!0},a.prototype.EF=function(){return b.kz().add(this)},a.og=function(){return b.kz().$R()},a.prototype.tM=function(){var r=this.cc();return new u.ra(r,this)},a.prototype.jD=function(){for(var r=this.Aa=0,o=0;10>r;r++)0<=this.uh[r]&&(this.bg[o]=r,this.uh[r]=o,o++,this.Aa++);this.jq=!0},a.prototype.cc=function(){return this.jq&&(this.wl=this.An(),this.jq=!1),this.wl},a.prototype.Nb=function(r){if(r==null)return!1;if(r==this)return!0;if(!(r instanceof a)||r.Aa!=this.Aa)return!1;for(var o=0;o<this.Aa;o++)if(this.bg[o]!=r.bg[o])return!1;return this.jq==r.jq},a.prototype.GG=function(r){if(r.Aa!=this.Aa)return!1;for(var o=0;o<this.Aa;o++)if(this.bg[o]!=r.bg[o])return!1;return!0},a.Iw=function(r,o){for(var l=[],d=0;d<r.Aa;d++)l[d]=-1;d=0;for(var p=r.Aa;d<p;d++)l[d]=o.Pf(r.kd(d));return l},a.BR=function(r,o){return(r=new a(r)).re(o),r.EF()},a.CR=function(r,o){for(var l=null,d=0;10>d;d++)!r.hasAttribute(d)&&o.hasAttribute(d)&&(l==null&&(l=new a(r)),l.re(d));return l!=null?l.EF():r},a}(u.ra);u.ee=A;var b=function(){function c(){this.map=[];var a=new A;this.add(a),(a=new A).re(1),this.add(a)}return c.kz=function(){return c.bL},c.prototype.$R=function(){return c.ft},c.prototype.add=function(a){var r=a.cc();if(c.ft!=null&&c.ft.cc()==r&&a.GG(c.ft))return c.ft;if(c.Dw!=null&&c.Dw.cc()==r&&a.GG(c.Dw))return c.Dw;var o=null;return this.map[r]!==void 0&&(o=this.map[r]),o==null&&((o=a.tM()).Aa==1?c.ft=o:o.Aa==2&&o.kd(1)==1?c.Dw=o:this.map[r]=o),o},c.bL=new c,c}()}(B||(B={}));var Zi={feet:9002,kilometers:9036,meters:9001,miles:9093,"nautical-miles":9030,yards:9096},ty={acres:109402,ares:109463,hectares:109401,"square-feet":109405,"square-kilometers":109414,"square-meters":109404,"square-miles":109439,"square-yards":109442},gl=new(function(){function u(){this.RM=50,this.np=new Map,this.gj=[]}return u.prototype.clear=function(){this.gj.length=0,this.np.clear()},u.prototype.delete=function(A){return!!this.np.delete(A)&&(this.gj.splice(this.gj.indexOf(A),1),!0)},u.prototype.get=function(A){var b=this.np.get(A);if(b!==void 0)return this.gj[0]!==A&&(this.gj.splice(this.gj.indexOf(A),1),this.gj.unshift(A)),b},u.prototype.has=function(A){return this.np.has(A)},u.prototype.set=function(A,b){return this.get(A)!==void 0&&this.delete(A),this.gj.unshift(A),this.np.set(A,b),this.oM(),this},u.prototype.oM=function(){for(;this.gj.length&&this.gj.length>this.RM;){var A=this.gj.pop();this.np.delete(A)}},u}()),ke=(($i={}).convertJSONToGeometry=function(u){return B.$b.fP(u)},$i.hasM=function(u){return u.hasAttribute(B.Ih.M)},$i.hasZ=function(u){return u.hasAttribute(B.Ih.Z)},$i.getPointX=function(u){return u.Lg()},$i.getPointY=function(u){return u.ih()},$i.getPointZ=function(u){return u.bS()},$i.getPointM=function(u){return u.zR()},$i.getXMin=function(u){return u.es()},$i.getYMin=function(u){return u.gs()},$i.getXMax=function(u){return u.ds()},$i.getYMax=function(u){return u.fs()},$i.getZExtent=function(u){return u.Tg(B.Ih.Z,0)},$i.getMExtent=function(u){return u.Tg(B.Ih.M,0)},$i.exportPaths=function(u){var A=[],b=u.da(),c=null,a=null,r=u.hasAttribute(B.Ih.Z),o=u.hasAttribute(B.Ih.M);r&&(c=u.ub(B.Ih.Z)),o&&(a=u.ub(B.Ih.M));for(var l=new B.h,d=0;d<b;d++){for(var p=u.Ba(d),g=u.Ja(d),y=0,w=0,S=NaN,k=NaN,C=NaN,O=NaN,R=u.dc(d),N=[],j=p;j<p+g;j++){u.D(j,l),O=C=NaN;var G=[l.x,l.y];r&&(C=c.get(j),G.push(C)),o&&(O=a.get(j),G.push(O)),j==p&&R&&(y=l.x,w=l.y,S=C,k=O),N.push(G)}!R||y==l.x&&w==l.y&&(!r||isNaN(S)&&isNaN(C)||S==C)&&(!o||isNaN(k)&&isNaN(O)||k==O)||N.push(N[0].slice(0)),A.push(N)}return A},$i.exportPathsFlat=function(){},$i.exportPoints=function(u){var A=u.hasAttribute(B.Ih.Z),b=u.hasAttribute(B.Ih.M),c=null,a=null;A&&(c=u.ub(B.Ih.Z)),b&&(a=u.ub(B.Ih.M));for(var r=new B.h,o=u.I(),l=[],d=0;d<o;d++){u.D(d,r);var p=[r.x,r.y];A&&p.push(c.get(d)),b&&p.push(a.get(d)),l.push(p)}return l},$i.exportPointsFlat=function(){},$i),Rc=new Map;return function(){function u(){}return u.buffer=je,u.clip=I,u.contains=L,u.convexHull=we,u.crosses=z,u.cut=P,u.densify=pi,u.difference=ve,u.disjoint=te,u.distance=F,u.equals=U,u.extendedSpatialReferenceInfo=$,u.generalize=or,u.geodesicArea=_o,u.geodesicBuffer=Ge,u.geodesicDensify=wi,u.geodesicLength=fl,u.intersect=ce,u.intersects=W,u.isSimple=de,u.nearestCoordinate=mt,u.nearestVertex=jt,u.nearestVertices=ki,u.offset=Ae,u.overlaps=ie,u.planarArea=wo,u.planarLength=Is,u.relate=le,u.simplify=xe,u.symmetricDifference=se,u.touches=K,u.union=ue,u.within=J,u.rotate=B.Ex.rotate,u.flipHorizontal=B.Ex.JQ,u.flipVertical=B.Ex.KQ,u.intersectLinesToPoints=Pc,u.ExtendedParams=B.yC,u.clearDefaultSpatialReferenceTolerance=dp,u.changeDefaultSpatialReferenceTolerance=Oc,u._enableProjection=la,u._project=Ac,u._getTransformation=up,u._getTransformationBySuitability=xo,u}()}var n=i();n!==void 0&&(t.exports=n)})(HV);var BV=HV.exports;const dt=Gz(BV),Rbe=Pbe({__proto__:null,default:dt},[BV]),Lbe=Object.freeze(Object.defineProperty({__proto__:null,G:dt,g:Rbe},Symbol.toStringTag,{value:"Module"})),Et={convertToGEGeometry:Nbe,exportPoint:Dbe,exportPolygon:zbe,exportPolyline:Fbe,exportMultipoint:jbe,exportExtent:Gbe};function Nbe(t,e){if(e==null)return null;let i="cache"in e?e.cache._geVersion:void 0;return i==null&&(i=t.convertJSONToGeometry(e),"cache"in e&&(e.cache._geVersion=i)),i}function Dbe(t,e,i){const n=t.hasZ(e),s=t.hasM(e),h=new De({x:t.getPointX(e),y:t.getPointY(e),spatialReference:i});return n&&(h.z=t.getPointZ(e)),s&&(h.m=t.getPointM(e)),h.cache._geVersion=e,h}function zbe(t,e,i){const n=new En({rings:t.exportPaths(e),hasZ:t.hasZ(e),hasM:t.hasM(e),spatialReference:i});return n.cache._geVersion=e,n}function Fbe(t,e,i){const n=new br({paths:t.exportPaths(e),hasZ:t.hasZ(e),hasM:t.hasM(e),spatialReference:i});return n.cache._geVersion=e,n}function jbe(t,e,i){const n=new y0({hasZ:t.hasZ(e),hasM:t.hasM(e),points:t.exportPoints(e),spatialReference:i});return n.cache._geVersion=e,n}function Gbe(t,e,i){const n=t.hasZ(e),s=t.hasM(e),h=new Lt({xmin:t.getXMin(e),ymin:t.getYMin(e),xmax:t.getXMax(e),ymax:t.getYMax(e),spatialReference:i});if(n){const f=t.getZExtent(e);h.zmin=f.vmin,h.zmax=f.vmax}if(s){const f=t.getMExtent(e);h.mmin=f.vmin,h.mmax=f.vmax}return h.cache._geVersion=e,h}const Vbe=Object.freeze(Object.defineProperty({__proto__:null,hydratedAdapter:Et},Symbol.toStringTag,{value:"Module"}));function It(t){return Array.isArray(t)?t[0].spatialReference:t&&t.spatialReference}function Hbe(t){return dt.extendedSpatialReferenceInfo(t)}function Bbe(t,e){return dt.clip(Et,It(t),t,e)}function Ube(t,e){return dt.cut(Et,It(t),t,e)}function qbe(t,e){return dt.contains(Et,It(t),t,e)}function Wbe(t,e){return dt.crosses(Et,It(t),t,e)}function UV(t,e,i){return dt.distance(Et,It(t),t,e,i)}function Zbe(t,e){return dt.equals(Et,It(t),t,e)}function Jbe(t,e){return dt.intersects(Et,It(t),t,e)}function Kbe(t,e){return dt.touches(Et,It(t),t,e)}function Ybe(t,e){return dt.within(Et,It(t),t,e)}function Xbe(t,e){return dt.disjoint(Et,It(t),t,e)}function Qbe(t,e){return dt.overlaps(Et,It(t),t,e)}function e2e(t,e,i){return dt.relate(Et,It(t),t,e,i)}function t2e(t){return dt.isSimple(Et,It(t),t)}function qV(t){return dt.simplify(Et,It(t),t)}function i2e(t,e=!1){return dt.convexHull(Et,It(t),t,e)}function n2e(t,e){return dt.difference(Et,It(t),t,e)}function r2e(t,e){return dt.symmetricDifference(Et,It(t),t,e)}function s2e(t,e){return dt.intersect(Et,It(t),t,e)}function o2e(t,e=null){return dt.union(Et,It(t),t,e)}function a2e(t,e,i,n,s,h){return dt.offset(Et,It(t),t,e,i,n,s,h)}function l2e(t,e,i,n=!1){return dt.buffer(Et,It(t),t,e,i,n)}function c2e(t,e,i,n,s,h){return dt.geodesicBuffer(Et,It(t),t,e,i,n,s,h)}function h2e(t,e,i=!0){return dt.nearestCoordinate(Et,It(t),t,e,i)}function u2e(t,e){return dt.nearestVertex(Et,It(t),t,e)}function d2e(t,e,i,n){return dt.nearestVertices(Et,It(t),t,e,i,n)}function B7(t){var e;return"xmin"in t?"center"in t?t.center:null:"x"in t?t:"extent"in t?((e=t.extent)==null?void 0:e.center)??null:null}function p2e(t,e,i){if(t==null)throw new u0;const n=t.spatialReference;if((i=i??B7(t))==null)throw new u0;const s=t.constructor.fromJSON(dt.rotate(t,e,i));return s.spatialReference=n,s}function f2e(t,e){if(t==null)throw new u0;const i=t.spatialReference;if((e=e??B7(t))==null)throw new u0;const n=t.constructor.fromJSON(dt.flipHorizontal(t,e));return n.spatialReference=i,n}function g2e(t,e){if(t==null)throw new u0;const i=t.spatialReference;if((e=e??B7(t))==null)throw new u0;const n=t.constructor.fromJSON(dt.flipVertical(t,e));return n.spatialReference=i,n}function m2e(t,e,i,n){return dt.generalize(Et,It(t),t,e,i,n)}function y2e(t,e,i){return dt.densify(Et,It(t),t,e,i)}function v2e(t,e,i,n=0){return dt.geodesicDensify(Et,It(t),t,e,i,n)}function b2e(t,e){return dt.planarArea(Et,It(t),t,e)}function w2e(t,e){return dt.planarLength(Et,It(t),t,e)}function _2e(t,e,i){return dt.geodesicArea(Et,It(t),t,e,i)}function U7(t,e,i){return dt.geodesicLength(Et,It(t),t,e,i)}function x2e(t,e){return dt.intersectLinesToPoints(Et,It(t),t,e)}function S2e(t,e){dt.changeDefaultSpatialReferenceTolerance(t,e)}function T2e(t){dt.clearDefaultSpatialReferenceTolerance(t)}let u0=class extends Error{constructor(){super("Illegal Argument Exception")}};const REe=Object.freeze(Object.defineProperty({__proto__:null,buffer:l2e,changeDefaultSpatialReferenceTolerance:S2e,clearDefaultSpatialReferenceTolerance:T2e,clip:Bbe,contains:qbe,convexHull:i2e,crosses:Wbe,cut:Ube,densify:y2e,difference:n2e,disjoint:Xbe,distance:UV,equals:Zbe,extendedSpatialReferenceInfo:Hbe,flipHorizontal:f2e,flipVertical:g2e,generalize:m2e,geodesicArea:_2e,geodesicBuffer:c2e,geodesicDensify:v2e,geodesicLength:U7,intersect:s2e,intersectLinesToPoints:x2e,intersects:Jbe,isSimple:t2e,nearestCoordinate:h2e,nearestVertex:u2e,nearestVertices:d2e,offset:a2e,overlaps:Qbe,planarArea:b2e,planarLength:w2e,relate:e2e,rotate:p2e,simplify:qV,symmetricDifference:r2e,touches:Kbe,union:o2e,within:Ybe},Symbol.toStringTag,{value:"Module"}));function LEe(t){return au(t)&&O0(t)||Ms(t)}function WV(t,e,i,...n){return au(t)&&O0(t)?e.apply(void 0,n):Ms(t)?i.apply(void 0,n):null}function NEe(t){const{spatialReference:e}=t;return WV(e,k2e,$2e,t)}function DEe(t,e){if(!bi(t.spatialReference,e.spatialReference))return null;const{spatialReference:i}=t;return iv[0]=t.x,iv[1]=t.y,iv[2]=t.hasZ?t.z:0,nv[0]=e.x,nv[1]=e.y,nv[2]=e.hasZ?e.z:0,q7(iv,nv,i)}function q7(t,e,i){return WV(i,M2e,E2e,t,e,i)}function M2e(t,e,i){return A0(R0(I2e,t,e,i).distance,"meters")}function E2e(t,e,i){return A0(U7(C2e(t,e,i),"meters"),"meters")}function k2e(t){return A0(Eme([t],"meters")[0],"meters")}function $2e(t){return A0(U7(t,"meters"),"meters")}function C2e(t,e,i){return{type:"polyline",spatialReference:i,paths:[[[...t],[...e]]]}}const I2e=new P0,iv=Se(),nv=Se();let A2e=class extends z3{snapNewVertex(e,i){const n=i.editGeometryOperations.data.components[0],s=n.edges.length,h=[];if(s<1)return h;const{spatialReference:f}=i,m=tr(e,f,Ai,this.view),{view:v}=this,x=n.edges[s-1];let M=x;do{if(this.edgeExceedsShortLineThreshold(M,i)){const $=ow(M,v,i);this._processCandidateProposal($.left,$.right,e,m,i,h)}M=M.leftVertex.leftEdge}while(M&&M!==x);return h}snapExistingVertex(e,i){const n=[],s=i.vertexHandle,h=s.component;if(h.edges.length<2)return n;const{view:f}=this,{spatialReference:m}=i,v=tr(e,m,Ai,f),x=s.leftEdge,M=s.rightEdge;x&&M&&this.edgeExceedsShortLineThreshold(x,i)&&this.edgeExceedsShortLineThreshold(M,i)&&this._processCandidateProposal(nn(x.leftVertex.pos,f,i),nn(M.rightVertex.pos,f,i),e,v,i,n);const $=h.edges[0];let I=$;do{if(I!==s.leftEdge&&I!==s.rightEdge&&this.edgeExceedsShortLineThreshold(I,i)){const P=ow(I,f,i);this._processCandidateProposal(P.left,P.right,e,v,i,n)}I=I.rightVertex.rightEdge}while(I&&I!==$);return n}_processCandidateProposal(e,i,n,s,h,f){var $;const{spatialReference:m,pointer:v}=h,x=Se();O2e(x,e,i,n,h);const M=Vh(x);hp(s,tr(M,m,Ai,this.view))<this.squaredProximityThreshold(v)&&f.push(new VV({lineStart:e,lineEnd:i,targetPoint:M,isDraped:(($=h.elevationInfo)==null?void 0:$.mode)==="on-the-ground"}))}};function O2e(t,e,i,n,s){P2e(t,e,i,n,s)||R2e(t,n,e,i)}function P2e(t,e,i,n,{spatialReference:s}){const h=dm(e,i,s,s);if(h==null)return!1;const f=dm(i,n,s,s);if(f==null)return!1;const m=q7(i,n,s);if(m==null)return!1;const v=Math.abs(ZZ.shortestSignedDiff(h,f))>Math.PI/2?ZO.normalize(h+Math.PI):h;return h7(t,i,s,lp(m,"meters"),oo(v,"radians","geographic"),"geodesic"),t[2]=n[2],!0}function R2e(t,e,i,n){$7(e,{start:i,end:n,type:ri.LINE},t),t[2]=e[2]}let L2e=class ZV extends D3{constructor(e,i,n,s=vn.ALL){super(n,s),this.lineStart=e,this.lineEnd=i}equals(e){return e instanceof ZV&&Wt(this.lineStart,e.lineStart)&&Wt(this.lineEnd,e.lineEnd)}},JV=class extends z0{constructor({referenceLine:e,lineStart:i,targetPoint:n,isDraped:s}){const h=so(i),{left:f,right:m}=e;di(h,yr(h,h,m),f),super(n,new IV(i,h),s,vn.SELF),this._referenceLines=[{edge:e,fadeLeft:!0,fadeRight:!0}]}get hints(){return[new sl(ao.TARGET,this.constraint.start,this.targetPoint,this.isDraped,this.domain),new L2e(this.constraint.start,this.targetPoint,this.isDraped,this.domain),...this._referenceLines.map(e=>new sl(ao.REFERENCE,e.edge.left,e.edge.right,this.isDraped,this.domain,e.fadeLeft,e.fadeRight))]}addReferenceLine(e){const i={edge:e,fadeLeft:!0,fadeRight:!0};this._referenceLines.forEach(n=>{Wt(e.right,n.edge.left)&&(n.fadeLeft=!1,i.fadeRight=!1),Wt(e.right,n.edge.right)&&(n.fadeRight=!1,i.fadeRight=!1),Wt(e.left,n.edge.right)&&(n.fadeRight=!1,i.fadeLeft=!1),Wt(e.left,n.edge.left)&&(n.fadeLeft=!1,i.fadeLeft=!1)}),this._referenceLines.push(i)}},N2e=class extends z3{snapNewVertex(e,i){const n=i.editGeometryOperations.data.components[0],s=n.edges.length,h=n.vertices.length,f=[];if(s<2)return f;const{view:m}=this,v=tr(e,i.spatialReference,Ai,m),x=nn(n.vertices[h-1].pos,m,i),M=nn(n.vertices[0].pos,m,i),$=n.edges[s-1];let I=$;do{if(this.edgeExceedsShortLineThreshold(I,i)){const P=ow(I,m,i);this._checkEdgeForParallelLines(P,x,e,v,i,f),this._checkEdgeForParallelLines(P,M,e,v,i,f)}I=I.leftVertex.leftEdge}while(I&&I!==$);return f}snapExistingVertex(e,i){const n=[],s=i.vertexHandle,h=s.component;if(h.edges.length<3)return n;const{view:f}=this,m=tr(e,i.spatialReference,Ai,f),v=s.leftEdge,x=s.rightEdge,M=h.vertices[0],$=nn(M.pos,f,i),I=h.vertices.length,P=h.vertices[I-1],L=nn(P.pos,f,i),z=h.edges[0];let F=z;do{if(F!==v&&F!==x&&this.edgeExceedsShortLineThreshold(F,i)){const U=ow(F,f,i);v&&this._checkEdgeForParallelLines(U,nn(v.leftVertex.pos,f,i),e,m,i,n),x&&this._checkEdgeForParallelLines(U,nn(x.rightVertex.pos,f,i),e,m,i,n),s===M?this._checkEdgeForParallelLines(U,L,e,m,i,n):s===P&&this._checkEdgeForParallelLines(U,$,e,m,i,n)}F=F.rightVertex.rightEdge}while(F&&F!==z);return n}_checkEdgeForParallelLines(e,i,n,s,h,f){var I;const m=e.left,v=e.right;if(l6(dd,i,m,v),sa(dd,i)<fc.parallelLineThreshold)return;l6(dd,n,m,v,i);const{spatialReference:x,pointer:M}=h,$=Vh(aa(dd[0],dd[1],n[2]));if(hp(s,tr($,x,Ai,this.view))<this.squaredProximityThreshold(M)){if(this.isVertical($,i,h)||this.isVertical(m,v,h)||D2e(e,f))return;f.push(new JV({referenceLine:e,lineStart:i,targetPoint:$,isDraped:((I=h.elevationInfo)==null?void 0:I.mode)==="on-the-ground"}))}}};function D2e(t,e){const i=t.left,n=t.right;for(const s of e)if(l6(dd,n,s.constraint.start,s.constraint.end,i),sa(dd,n)<fc.parallelLineThreshold)return s.addReferenceLine(t),!0;return!1}const dd=nt();let z2e=class extends z3{snapNewVertex(e,i){const n=i.editGeometryOperations.data.components[0],s=[];if(n.vertices.length<2)return s;const{view:h}=this,f=tr(e,i.spatialReference,Ai,h),m=n.vertices.at(-1);this._checkForSnappingCandidate(zh.LastVertex,s,m.leftEdge,m,m.leftEdge.leftVertex,e,f,i);const v=n.vertices[0];return this._checkForSnappingCandidate(zh.FirstVertex,s,v.rightEdge,v,v.rightEdge.rightVertex,e,f,i),s}snapExistingVertex(e,i){const n=[],s=i.vertexHandle;if(s.component.vertices.length<3)return n;const{view:h}=this,f=tr(e,i.spatialReference,Ai,h),m=s.leftEdge,v=s.rightEdge;if(m!=null&&m.leftVertex.leftEdge){const x=m.leftVertex.leftEdge;this._checkForSnappingCandidate(zh.ExistingEdge,n,x,x.rightVertex,x.leftVertex,e,f,i)}if(v!=null&&v.rightVertex.rightEdge){const x=v.rightVertex.rightEdge;this._checkForSnappingCandidate(zh.ExistingEdge,n,x,x.leftVertex,x.rightVertex,e,f,i)}return n}_checkForSnappingCandidate(e,i,n,s,h,f,m,v){if(!this.edgeExceedsShortLineThreshold(n,v))return;const x=this.view,M=nn(s.pos,x,v),$=nn(h.pos,x,v);F2e(IC,$,M,f,v),this._checkForSnappingCandidateAlongProjectedRay(e,i,$,M,IC,f,m,v)}_checkForSnappingCandidateAlongProjectedRay(e,i,n,s,h,f,m,v){var F;const{spatialReference:x,pointer:M}=v,$=Mi(p6,f,s),I=ll(h,$)/tl(h),P=no(p6,s,h,I),L=Vh(aa(P[0],P[1],f[2]));if(hp(m,tr(L,x,Ai,this.view))>this.squaredProximityThreshold(M)||this.isVertical(L,s,v)||this.isVertical(s,n,v))return;const z=yn(Se(),s,h,Math.sign(I));i.push(new H7({targetPoint:L,constraint:new z7(s,z),previousVertex:n,otherVertex:s,otherVertexType:h0.CENTER,selfSnappingType:e,isDraped:((F=v.elevationInfo)==null?void 0:F.mode)==="on-the-ground"}))}};function F2e(t,e,i,n,s){j2e(t,e,i,n,s)||G2e(t,e,i)}function j2e(t,e,i,n,{spatialReference:s}){const h=dm(e,i,s,s);if(h==null)return!1;const f=dm(i,n,s,s);if(f==null)return!1;const m=Math.sign(ZO.shortestSignedDiff(h,f))*Math.PI*.5,v=oo(h+m,"radians","geographic"),x=Se(),M=q7(i,n,s);return M!=null&&(h7(x,i,s,lp(M,"meters"),v,"geodesic"),di(t,x,i),!0)}function G2e(t,e,i){const n=Mi(p6,i,e);si(t,n[1],-n[0],0)}const p6=nt(),IC=Se();let KV=class extends z0{constructor({targetPoint:e,point1:i,point2:n,isDraped:s}){super(e,new R7(Tm(Se(),i,n,.5),.5*kc(i,n)),s,vn.SELF),this._p1=i,this._p2=n}get hints(){return[new sl(ao.REFERENCE,this.targetPoint,this._p1,this.isDraped,this.domain),new sl(ao.REFERENCE,this.targetPoint,this._p2,this.isDraped,this.domain),new jV(this._p1,this.targetPoint,this._p2,this.isDraped,this.domain)]}},V2e=class extends z3{snapNewVertex(e,i){const n=i.editGeometryOperations.data.components[0],s=[],h=n.vertices.length;if(i.editGeometryOperations.data.type!=="polygon"||h<2)return s;const{view:f}=this,m=n.vertices[0],v=n.vertices[h-1],x=nn(m.pos,f,i),M=nn(v.pos,f,i);return this._processCandidateProposal(x,M,e,i,s),s}snapExistingVertex(e,i){const n=[],s=i.vertexHandle,h=s.component;if(h.edges.length<2||i.editGeometryOperations.data.type==="polyline"&&(s.index===0||s.index===h.vertices.length-1))return n;const{view:f}=this,m=nn(s.leftEdge.leftVertex.pos,f,i),v=nn(s.rightEdge.rightVertex.pos,f,i);return this._processCandidateProposal(m,v,e,i,n),n}_processCandidateProposal(e,i,n,s,h){var P;if(!this.exceedsShortLineThreshold(e,i,s))return;const f=s3(AC,e,i,.5),m=.5*kc(e,i),v=Vve(AC,n,f,m),x=Vh(aa(v[0],v[1],n[2])),{spatialReference:M,pointer:$}=s,I=tr(n,M,Ai,this.view);if(hp(I,tr(x,M,Ai,this.view))<this.squaredProximityThreshold($)){if(this.isVertical(e,x,s)||this.isVertical(x,i,s))return;h.push(new KV({targetPoint:x,point1:e,point2:i,isDraped:((P=s.elevationInfo)==null?void 0:P.mode)==="on-the-ground"}))}}};const AC=nt();let cf=class extends Re{constructor(e){super(e),this.updating=!1,this._snappers=new Pe,this._domain=vn.SELF}initialize(){this._snappers.push(new N2e(this.view,this.options),new A2e(this.view,this.options),new z2e(this.view,this.options),new V2e(this.view,this.options))}set options(e){this._set("options",e);for(const i of this._snappers)i.options=e}async fetchCandidates(e,i,n){if(!(i&this._domain&&this.options.effectiveSelfEnabled))return[];const s=[];for(const h of this._snappers.items)for(const f of h.snap(e,n))s.push(f);return G7(e,s),s}};_([T({readOnly:!0})],cf.prototype,"updating",void 0),_([T({constructOnly:!0})],cf.prototype,"view",void 0),_([T()],cf.prototype,"options",null),cf=_([Y("esri.views.interactive.snapping.SelfSnappingEngine")],cf);function H2e(t,e){return[new cf({view:t,options:e}),new vh({view:t,options:e,spatialReference:t.spatialReference})]}let bh=class extends Re{constructor(e){super(e),this.layer=null,this.enabled=!0,this.updating=!1,this.availability=1,this.sublayerSources=new Pe}};_([T({constructOnly:!0})],bh.prototype,"layer",void 0),_([T()],bh.prototype,"enabled",void 0),_([T()],bh.prototype,"updating",void 0),_([T()],bh.prototype,"availability",void 0),_([T()],bh.prototype,"sublayerSources",void 0),bh=_([Y("esri.views.interactive.snapping.FeatureSnappingLayerSource")],bh);const W7=bh;let qn=class extends Re{constructor(e){super(e),this.enabled=!1,this.enabledToggled=!1,this.forceDisabled=!1,this.selfEnabled=!0,this.featureEnabled=!0,this.attributeRulesEnabled=!1,this.featureSources=new Pe,this.distance=fc.distance,this.touchSensitivityMultiplier=fc.touchSensitivityMultiplier}get effectiveEnabled(){return!this.forceDisabled&&(this.enabledToggled?!this.enabled:this.enabled)}get effectiveSelfEnabled(){return this.effectiveEnabled&&this.selfEnabled}get effectiveFeatureEnabled(){return this.effectiveEnabled&&this.featureEnabled}get _effectiveFeatureSources(){var v;const e=this.featureSources;e.some(OC)&&Ce.getLogger(this).warnOnce("Do not configure SubtypeGroupLayer sources in SnappingOptions.featureSources directly. Create a FeatureSnappingLayerSource for each SubtypeSublayer.");const i=e.filter(U2e),n=((v=this._get("_effectiveFeatureSources"))==null?void 0:v.filter(OC))??new Pe;for(const x of i){const M=n.find($=>$.layer===x.layer.parent);if(M)M.sublayerSources.includes(x)||M.sublayerSources.add(x);else if(x.layer.parent){const $=new W7({layer:x.layer.parent});$.sublayerSources.add(x),n.add($)}}for(const x of n){const M=x.sublayerSources.filter($=>!i.includes($));x.sublayerSources.removeMany(M)}n.removeMany(n.filter(x=>x.sublayerSources.length===0));const s=e.filter(B2e),h=this._get("_effectiveFeatureSources")??new Pe,{added:f,removed:m}=C5(h.toArray(),[...s,...n]);return h.removeMany(m),h.addMany(f),h}};_([T()],qn.prototype,"enabled",void 0),_([T()],qn.prototype,"enabledToggled",void 0),_([T()],qn.prototype,"forceDisabled",void 0),_([T()],qn.prototype,"selfEnabled",void 0),_([T()],qn.prototype,"featureEnabled",void 0),_([T()],qn.prototype,"attributeRulesEnabled",void 0),_([T({type:Pe.ofType(W7)})],qn.prototype,"featureSources",void 0),_([T()],qn.prototype,"distance",void 0),_([T()],qn.prototype,"touchSensitivityMultiplier",void 0),_([T({readOnly:!0})],qn.prototype,"effectiveEnabled",null),_([T({readOnly:!0})],qn.prototype,"effectiveSelfEnabled",null),_([T({readOnly:!0})],qn.prototype,"effectiveFeatureEnabled",null),_([T({readOnly:!0})],qn.prototype,"_effectiveFeatureSources",null),qn=_([Y("esri.views.interactive.snapping.SnappingOptions")],qn);const Qm=qn;function OC(t){return t.layer.type==="subtype-group"}function B2e(t){return t.layer.type!=="subtype-group"}function U2e(t){return t.layer.type==="subtype-sublayer"}let q2e=class YV extends D3{constructor(e,i,n=vn.ALL){super(i,n),this.intersectionPoint=e}equals(e){return e instanceof YV&&Wt(this.intersectionPoint,e.intersectionPoint)}},Mb=class extends z0{constructor(e,i,n,s){super(e,new cp(e),s,vn.ALL),this.first=i,this.second=n}get hints(){return this.first.targetPoint=this.targetPoint,this.second.targetPoint=this.targetPoint,[...this.first.hints,...this.second.hints,new q2e(this.targetPoint,this.isDraped,this.domain)]}},jo=class extends ln.EventedMixin(Re){constructor(e){super(e),this.options=new Qm,this.snappingEnginesFactory=H2e,this._engines=[],this._currentMainCandidate=null,this._currentOtherActiveCandidates=[],this._currentSnappedType=Xl.MAIN}initialize(){this.addHandles([Ee(()=>{const{effectiveFeatureEnabled:e,effectiveSelfEnabled:i,touchSensitivityMultiplier:n,distance:s}=this.options;return{effectiveFeatureEnabled:e,effectiveSelfEnabled:i,touchSensitivityMultiplier:n,distance:s}},()=>{this.doneSnapping(),this.emit("changed")},Ya),Ee(()=>this.options,e=>{for(const i of this._engines)i.options=e},Ya),Ee(()=>({viewReady:this.view.ready,viewSpatialReference:this.view.spatialReference,snappingEnginesFactory:this.snappingEnginesFactory}),({viewReady:e,snappingEnginesFactory:i})=>this._recreateEngines(e,i),xi)])}destroy(){this._destroyEngines()}get updating(){return this._engines.some(e=>e.updating)}_recreateEngines(e,i){if(this._destroyEngines(),!e)return;const{view:n,options:s}=this;this._engines=i(n,s)}_destroyEngines(){for(const e of this._engines)e.destroy();this._engines=[]}get _squaredMouseProximityThreshold(){return this.options.distance*this.options.distance}get _squaredTouchProximityThreshold(){const{distance:e,touchSensitivityMultiplier:i}=this.options,n=e*i;return n*n}snap(e){return J2e(e)?this._snapMultiPoint(e):this._snapSinglePoint(e)}update(e){const{point:i,context:n}=e;this._removeVisualization();const s=this._currentMainCandidate;if(s==null)return i;const h=this._selectUpdateInput(e);if(h==null)return i;const{spatialReference:f}=n,m=Wr(h,f);if(m==null)return i;const{view:v}=this,{elevationInfo:x,visualizer:M}=n,$=[],I=Nh(m,v,x),P=s.constraint.closestTo(I);if(!this._arePointsWithinScreenThreshold(I,P,n)||!m5(s,n.drawConstraints))return this._resetSnappingState(),i;s.targetPoint=Vh(P),$.push(...s.hints);for(const L of this._currentOtherActiveCandidates)m5(L,n.drawConstraints)&&(L.targetPoint=Vh(P),$.push(...L.hints));return M!=null&&this.addHandles(M.draw($,{spatialReference:f,elevationInfo:K2e(n),view:v,selfSnappingZ:n.selfSnappingZ}),g5),s6(P,v,i,n)}doneSnapping(){this._removeVisualization(),this._resetSnappingState()}_selectUpdateInput({point:e,scenePoint:i}){switch(this._currentSnappedType){case Xl.MAIN:return e;case Xl.SCENE:return i}}_resetSnappingState(){this._currentMainCandidate=null,this._currentOtherActiveCandidates=[],this._currentSnappedType=Xl.MAIN}_removeVisualization(){this.removeHandles(g5)}async _snapSinglePoint({point:e,context:i,signal:n}){const{view:s}=this,{elevationInfo:h}=i,f=Nh(e,s,h),m=await this._fetchCandidates(f,vn.ALL,i,n);return this._createSnapResult(f,Xl.MAIN,m,s,e,i,n)}async _snapMultiPoint({point:e,scenePoint:i,context:n,signal:s}){const{view:h}=this,{coordinateHelper:f,elevationInfo:m,spatialReference:v}=n;await Dw(i.spatialReference,v);const x=Wr(i,v),M=Nh(x,h,m),$=await this._fetchCandidates(M,vn.FEATURE,n,s);if($.length>0){const L=await this._fetchCandidates(M,vn.SELF,n,s);return this._createSnapResult(M,Xl.SCENE,[...$,...L],h,x,n,s)}const I=Nh(e,h,m),P=await this._fetchCandidates(I,vn.SELF,n,s);return this._createSnapResult(I,Xl.MAIN,P,h,{z:f.hasZ()&&e.hasZ?e.z??0:void 0,m:f.hasM()&&e.hasM?e.m??0:void 0},n,s)}async _fetchCandidates(e,i,n,s){return(await Promise.all(this._engines.map(h=>h.fetchCandidates(e,i,n,s)))).flat()}_createSnapResult(e,i,n,s,h,f,m){return{get valid(){return!Ss(m)},apply:()=>{const{spatialReference:v}=f,{snappedPoint:x,hints:M}=this._processCandidates(e,i,n,f);return this._removeVisualization(),f.visualizer!=null&&this.addHandles(f.visualizer.draw(M,{spatialReference:v,elevationInfo:Ai,view:s,selfSnappingZ:f.selfSnappingZ}),g5),s6(x,s,h,f)}}}_processCandidates(e,i,n,s){if(n.length<1)return this.doneSnapping(),{snappedPoint:e,hints:[]};this._currentSnappedType!==i&&this._resetSnappingState(),G7(e,n);const h=this._currentMainCandidate;if(h!=null){const f=Z2e(h,n);if(f>=0){if(!(n[f]instanceof Mb))return this._intersectWithOtherCandidates(f,n,e,i,s);if(this._arePointsWithinScreenThreshold(e,h.targetPoint,s))return this._updateSnappingCandidate(h,i,n,s)}}return this._intersectWithOtherCandidates(0,n,e,i,s)}_intersectWithOtherCandidates(e,i,n,s,h){const{coordinateHelper:f}=h,m=i[e],v=[];for(let x=0;x<i.length;++x){if(x===e)continue;const M=i[x],$=m.constraint.intersect(M.constraint);if($)for(const I of $.closestPoints(m.targetPoint))v.push([new Mb(Vh(I),m,M,M.isDraped),this._squaredScreenDistance(n,I,f)])}return v.length>0&&(v.sort((x,M)=>x[1]-M[1]),v[0][1]<this._squaredPointProximityThreshold(h.pointer))?this._updateSnappingCandidate(v[0][0],s,i,h):m5(m,h.drawConstraints)?this._updateSnappingCandidate(m,s,i,h):{snappedPoint:n,hints:[]}}_updateSnappingCandidate(e,i,n,s){this.doneSnapping(),this._currentMainCandidate=e,this._currentSnappedType=i;const h=this._currentMainCandidate.targetPoint,f=[];f.push(...e.hints);for(const m of n){if(e instanceof Mb){if(m.constraint.equals(e.first.constraint)||m.constraint.equals(e.second.constraint))continue}else if(m.constraint.equals(e.constraint))continue;const v=m.constraint.closestTo(h);this._squaredScreenDistance(v,h,s.coordinateHelper)<W2e()&&(m.targetPoint=h,this._currentOtherActiveCandidates.push(m),f.push(...m.hints))}return{snappedPoint:h,hints:f}}_squaredPointProximityThreshold(e){return e==="touch"?this._squaredTouchProximityThreshold:this._squaredMouseProximityThreshold}_arePointsWithinScreenThreshold(e,i,n){return this._squaredScreenDistance(e,i,n.coordinateHelper)<this._squaredPointProximityThreshold(n.pointer)}_squaredScreenDistance(e,i,n){return hp(this._toScreen(e,n),this._toScreen(i,n))}_toScreen(e,i){return tr(e,i.spatialReference,Ai,this.view)}get test(){}};var Xl;_([T({constructOnly:!0})],jo.prototype,"view",void 0),_([T()],jo.prototype,"options",void 0),_([T({readOnly:!0})],jo.prototype,"updating",null),_([T()],jo.prototype,"snappingEnginesFactory",void 0),_([T()],jo.prototype,"_engines",void 0),_([T()],jo.prototype,"_squaredMouseProximityThreshold",null),_([T()],jo.prototype,"_squaredTouchProximityThreshold",null),jo=_([Y("esri.views.interactive.snapping.SnappingManager")],jo),function(t){t[t.MAIN=0]="MAIN",t[t.SCENE=1]="SCENE"}(Xl||(Xl={}));const g5="visualization-handle";function W2e(){return fc.satisfiesConstraintScreenThreshold*fc.satisfiesConstraintScreenThreshold}function m5(t,e){return!e||e.direction==null&&e.distance==null||!(t instanceof zV||t instanceof FV||t instanceof VV||t instanceof JV||t instanceof KV)&&(!(t instanceof H7)||e.direction==null&&t.selfSnappingType===zh.LastVertex)}function Z2e(t,e){return t instanceof Mb?y5(e,t.first)>=0&&y5(e,t.second)>=0?0:-1:y5(e,t)}function y5(t,e){let i=-1;for(let n=0;n<t.length;++n)if(e.constraint.equals(t[n].constraint)){i=n;break}return i}function J2e(t){return t.scenePoint!=null}function K2e({coordinateHelper:t,elevationInfo:e}){return t.hasZ()?Ai:e}function Y2e(t){return(t==null?void 0:t.type)==="graphic"}function X2e(t){return t.find(Y2e)??null}let Rn=class extends ln.EventedAccessor{constructor(e){super(e),this.cancelled=!1,this.history={undo:[],redo:[]},this.type=null}get tool(){if(!this.activeComponent)return null;switch(this.activeComponent.type){case"graphic-mover":case"move-3d":return"move";case"box":case"transform-3d":return"transform";case"reshape":case"reshape-3d":return"reshape";case"draw-2d":case"draw-3d":return this.activeComponent.geometryType;default:this.activeComponent}return null}addToHistory(e){this.history.redo=[],this.history.undo.push(e)}resetHistory(){this.history.redo=[],this.history.undo=[]}canUndo(){return this.history.undo.length>0}canRedo(){return this.history.redo.length>0}complete(){this._reset(),this.onEnd(),this.emit("complete")}cancel(){this.cancelled=!0,this.complete()}_reset(){var e;(e=this.activeComponent)==null||e.reset()}refreshComponent(){const e=this.activeComponent;e&&(e.type!=="box"&&e.type!=="reshape"&&e.type!=="graphic-mover"||e.refresh())}set undo(e){this._set("undo",()=>{this.canUndo()&&e()})}set redo(e){this._set("redo",()=>{this.canRedo()&&e()})}};_([T()],Rn.prototype,"activeComponent",void 0),_([T()],Rn.prototype,"cancelled",void 0),_([T()],Rn.prototype,"history",void 0),_([T()],Rn.prototype,"tool",null),_([T()],Rn.prototype,"type",void 0),_([T()],Rn.prototype,"canUndo",null),_([T()],Rn.prototype,"canRedo",null),_([T()],Rn.prototype,"onEnd",void 0),_([T()],Rn.prototype,"undo",null),_([T()],Rn.prototype,"redo",null),_([T()],Rn.prototype,"toggleTool",void 0),_([T()],Rn.prototype,"addToSelection",void 0),_([T()],Rn.prototype,"removeFromSelection",void 0),Rn=_([Y("esri.widgets.Sketch.support.OperationHandle")],Rn);let Eb=class extends Rn{};_([T()],Eb.prototype,"activeComponent",void 0),Eb=_([Y("esri.widgets.Sketch.support.OperationHandle.CreateOperationHandle")],Eb);let nc=class extends Rn{};_([T()],nc.prototype,"activeComponent",void 0),nc=_([Y("esri.widgets.Sketch.support.OperationHandle.UpdateOperationHandle")],nc);const PC={defaultZ:0},l1={reshapeOptions:{edgeOperation:"split",shapeOperation:"move",vertexOperation:"move"},enableMoveAllGraphics:!0,enableRotation:!0,enableScaling:!0,multipleSelectionEnabled:!0,preserveAspectRatio:!1,toggleToolOnClick:!0,enableZ:!0,highlightOptions:{enabled:!0},tool:"transform"};let zt=class extends ln.EventedAccessor{constructor(e){var i;super(e),this._numUpdating=0,this._defaultSnappingManager=null,this._internalGraphicsLayer=new IG({listMode:"hide",internal:!0,title:"SVM Internal"}),this._operationHandle=null,this._viewHandlesKey="viewHandles",this.activeFillSymbol=null,this.activeLineSymbol=null,this.activeVertexSymbol=null,this.allowDeleteKey=!0,this.layer=null,this.pointSymbol=new Xf({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),this.polygonSymbol=new Gm({color:[150,150,150,.2],outline:{color:[50,50,50],width:2}}),this.polylineSymbol=new Ec({color:[130,130,130,1],width:2}),this.meshSymbol=new e3({symbolLayers:new Pe([new T0])}),this.updateGraphics=new Pe,this.updateOnGraphicClick=!0,this.vertexSymbol=new Xf({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),this.sketchOptions=new k3,this._moduleLoaderAbortController=null,this._viewReadyAbortController=null,this._originalPopupEnabled=null,this.defaultCreateOptions=PC,this.defaultUpdateOptions=l1,this.snappingOptions=((i=e==null?void 0:e.snappingManager)==null?void 0:i.options)??(e==null?void 0:e.snappingOptions)??new Qm}initialize(){this.addHandles([Es(()=>{var e,i;return(i=(e=this.view)==null?void 0:e.map)==null?void 0:i.layers},"change",e=>{e.removed.includes(this.layer)&&this.cancel()}),Es(()=>{var e;return(e=this.layer)==null?void 0:e.graphics},"change",e=>{if(this._operationHandle!=null)for(const i of e.removed)this.updateGraphics.includes(i)&&(this.updateGraphics.length>1?this._operationHandle.removeFromSelection(i):this._operationHandle.cancel())}),Ee(()=>{var e;return((e=this.layer)==null?void 0:e.elevationInfo)??null},e=>{e!==this._internalGraphicsLayer.elevationInfo&&(this.cancel(),this._internalGraphicsLayer.elevationInfo=e)},xi),Ee(()=>this.view,e=>{this._defaultSnappingManager=yt(this._defaultSnappingManager),e&&(this.snappingManager||(this._defaultSnappingManager=new jo({view:e,options:this.snappingOptions})),e.type==="2d"?be(()=>import("./editingTools-C4HtHKST.js"),__vite__mapDeps([283,284,72,285,279,286,48,132,60,287,288,92,289,113,290,276,138,85,291,87,31,108,292]),import.meta.url):e.type==="3d"&&(be(()=>import("./editingTools-BBcAQ15l.js"),__vite__mapDeps([293,108,286,48,132,60,207,114,37,113,294,118,295,43,73,120,78,41,121,212,40,289,213,225,211,103,49,35,99,52,34,36,296,92,39,288,199,276,42,44,23,201,75,285,279,287,290,297,298,137,138,85,299,170,300,301,302,291,87,31]),import.meta.url),be(()=>import("./WaterSurface.glsl-DAfDxRv3.js").then(i=>i.G),__vite__mapDeps([303,294,118,295,43,73,120,78,37,41,121,212,40,289,113,213,225,211,103,48,49,35,99,52,34,36,296,92,39,114,288,199,276,42,44,23,201,75,142,141,140,101,110,143,87,31,144,139,145,28,26,146,108,85,2,3,67,304,117,119,305,148,50,53,306,307,12,13,20,21,15,16,45,81,82,83,84,72,69,86,76,138,137,308,215,309,51,147,18,235,310,231]),import.meta.url)))},xi),Ee(()=>{var e;return(e=this.view)==null?void 0:e.spatialReference},(e,i)=>{e&&i&&!e.equals(i)&&this.cancel()})]),NV(this)}destroy(){this.cancel(),this._removeDefaultLayer(),this._defaultSnappingManager=yt(this._defaultSnappingManager),this._set("snappingManager",null),this._set("view",null),this.emit("destroy")}get updating(){return this._numUpdating>0||this.snappingManager!=null&&this.snappingManager.updating}get activeTool(){var e;return((e=this._operationHandle)==null?void 0:e.tool)??null}get activeComponent(){var e;return((e=this._operationHandle)==null?void 0:e.activeComponent)??null}get createGraphic(){return this.activeComponent==null||this.activeComponent.type!=="draw-3d"&&this.activeComponent.type!=="draw-2d"?this._get("createGraphic"):this.activeComponent.graphic}get defaultCreateOptions(){return this._get("defaultCreateOptions")}set defaultCreateOptions(e){this._set("defaultCreateOptions",{...PC,...e})}get defaultUpdateOptions(){return this._get("defaultUpdateOptions")}set defaultUpdateOptions(e){this._set("defaultUpdateOptions",{...l1,...e,reshapeOptions:{...l1.reshapeOptions,...e==null?void 0:e.reshapeOptions},highlightOptions:{...l1.highlightOptions,...e==null?void 0:e.highlightOptions}})}get labelOptions(){return this.sketchOptions.labels}set labelOptions(e){this.sketchOptions.labels=e}get snappingOptions(){var e;return((e=this.snappingManager)==null?void 0:e.options)??this._get("snappingOptions")}set snappingOptions(e){this._defaultSnappingManager!=null&&(this._defaultSnappingManager.options=e),this._set("snappingOptions",e)}get snappingManager(){return this._isOverridden("snappingManager")&&this._get("snappingManager"),this._defaultSnappingManager}set snappingManager(e){if(e)this._isOverridden("snappingManager")||(this._defaultSnappingManager=yt(this._defaultSnappingManager)),this._override("snappingManager",e);else{const{view:i}=this;!this._defaultSnappingManager&&i&&(this._defaultSnappingManager=new jo({options:this.snappingOptions,view:i})),this._clearOverride("snappingManager")}}get state(){var n;const e=!(!((n=this.view)!=null&&n.ready)||!this.layer),i=this._operationHandle;return e&&i?"active":e?"ready":"disabled"}get tooltipOptions(){return this.sketchOptions.tooltips}set tooltipOptions(e){this.sketchOptions.tooltips=e}get valueOptions(){return this.sketchOptions.values}set valueOptions(e){this.sketchOptions.values=e}get view(){return this._get("view")}set view(e){const i=this._get("view");if(i){const{container:s,map:h}=i;s&&(i.cursor=null),h==null||h.remove(this._internalGraphicsLayer),this.removeHandles(this._viewHandlesKey),this.cancel()}const n="view-ready";this.removeHandles(n),e&&this.addHandles(nr(()=>e.ready,s=>{this.removeHandles(this._viewHandlesKey),s&&this.addHandles(this._generateViewHandles(e),this._viewHandlesKey)},xi),n),this._set("view",e)}cancel(){this._moduleLoaderAbortController=ms(this._moduleLoaderAbortController),this._viewReadyAbortController=ms(this._viewReadyAbortController),this._operationHandle&&this._operationHandle.cancel()}complete(){this._operationHandle&&this._operationHandle.complete()}delete(){const{state:e,updateGraphics:i}=this;if(e==="active"&&i.length){const{activeTool:n,layer:s}=this,h=i.toArray();s.removeMany(h),this.cancel(),this._emitDeleteEvent({graphics:h,tool:n})}}duplicate(){if(this.state==="active"&&this.updateGraphics.length){const e=this.updateGraphics.map(i=>i.clone()).toArray();return this.layer.addMany(e),this.emit("duplicate",{graphics:e,type:"duplicate"}),e}return[]}async create(e,i){this.cancel(),await this._waitViewReady();const{view:n,layer:s}=this;if(!n||this.state==="disabled")throw s||this._logMissingLayer(),Yt();if(n.activeTool!=null&&(n.activeTool=null),!e)return void this._logError("sketch:missing-parameter","Missing parameter 'tool'.");vC(n,this._internalGraphicsLayer);const h=await this._setupCreateOperation(e,i);if(h==null||this.destroyed)return void n.map.remove(this._internalGraphicsLayer);const f=()=>{var m;if(h===this._operationHandle){const v=this.createGraphic,x=this._operationHandle.cancelled;this._operationHandle.destroy(),this._operationHandle=null,this._set("createGraphic",null),(m=this.view)!=null&&m.map&&this.view.map.remove(this._internalGraphicsLayer),h.cancelled||v==null||s.add(v),this.emit("create",{graphic:v,state:x?"cancel":"complete",tool:e,toolEventInfo:null,type:"create"})}};h.on("complete",f),this._operationHandle=h,n.ready&&n.focus()}async place(e,i){return this.create("mesh",{mode:"click",hasZ:e.hasZ,geometryToPlace:e,...i})}async update(e,i){this.cancel(),await this._waitViewReady();const{layer:n,view:s,state:h}=this;if(!s||h==="disabled")throw n||this._logMissingLayer(),Yt();s.activeTool!=null&&(s.activeTool=null);const f=Array.isArray(e)?e:[e];if(e==null||!(f!=null&&f.length))return void this._logError("sketch:missing-parameter","Missing parameter 'graphics'.");if(f.some(v=>v.layer!==n?(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics missing from the supplied GraphicsLayer."),!0):v.geometry==null&&(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics with an unsupported geometry."),!0)))return;const m=await this._setupUpdateOperation(f,i);this.destroyed||m==null||Ki(m)||(vC(s,this._internalGraphicsLayer),this._setUpdateOperationHandle(m,i),this.emit("update",{graphics:f,state:"start",aborted:!1,tool:m.tool,toolEventInfo:null,type:"update"}))}async _updateSpatialReference(e){const i=this.view;if(i){this._beginAsyncOperation(),e=Array.isArray(e)?e:[e];for(const n of e)n.geometry==null||n.geometry.type==="mesh"||bi(n.geometry.spatialReference,i.spatialReference)||(ks(n.geometry.spatialReference,i.spatialReference)||ol()||await Qa(),n.geometry=Wr(n.geometry,i.spatialReference));this._endAsyncOperation()}else this._logMissingView()}undo(){var e;this.canUndo()&&((e=this._operationHandle)==null||e.undo())}redo(){var e;this.canRedo()&&((e=this._operationHandle)==null||e.redo())}canUndo(){var e;return!!((e=this._operationHandle)!=null&&e.canUndo())}canRedo(){var e;return!!((e=this._operationHandle)!=null&&e.canRedo())}toggleUpdateTool(){var e;(e=this._operationHandle)==null||e.toggleTool()}async _getFirstHit(e){const i=this.view;if(!i)return this._logMissingView(),null;if(i.type==="2d"){const h=[];i.map.allLayers.forEach(m=>{m.type!=="vector-tile"&&m.type!=="imagery"||h.push(m)});const f=await i.hitTest(e,{exclude:h});return X2e(f.results)}const n=[i.map.ground];i.map.allLayers.forEach(h=>{qte(h.type)&&n.push(h)});const s=await i.hitTest(e,{exclude:n});if(s.results.length>0){const h=s.results[0];if(h!=null&&h.type==="graphic"&&h.graphic&&(!s.ground.mapPoint||i.map.ground.opacity<1||s.ground.distance-(h.distance??0)>-Math.min(3*s.ground.distance,i.viewingMode==="global"?uS(i.renderCoordsHelper.spatialReference).radius/i.renderCoordsHelper.unitInMeters:Number.POSITIVE_INFINITY)))return h}return null}_generateViewHandles(e){return[e.on("immediate-click",async i=>{var f;const n=this.state==="active"&&((f=this._operationHandle)==null?void 0:f.type)==="create";if(this.state==="disabled"||n||!this.updateOnGraphicClick)return;this._beginAsyncOperation();const s=await i.async(()=>this._getFirstHit(Us(i)));let h=null;if(s!=null){const m=s.graphic;this.updateGraphics.includes(m)||m.layer===this.layer?(i.stopPropagation(),h=m):e.type!=="2d"||this._isComponentGraphic(m)||this.state!=="active"||this.cancel()}else this.state==="active"&&this.cancel();h==null||this.updateGraphics.includes(h)||await this.update([h],{...this.defaultUpdateOptions,reshapeOptions:{...this.defaultUpdateOptions.reshapeOptions}}),this._endAsyncOperation()},Ut.WIDGET)]}async _setupCreateOperation(e,i){const n=this.view;if(!n)return this._logMissingView(),null;const s={hasZ:n.type==="3d",...this.defaultCreateOptions,...i},h=await this._setupDrawGraphicTool(e,n,s);return h==null?null:(n.tools.add(h),n.activeTool=h,this._setupCreateOperationHandle(h))}async _setupDrawGraphicTool(e,i,n){if(e==="multipoint"&&i.type==="3d")return this._logError("sketch:create","Multipoint geometries are not supported in SceneView."),null;if(!i)return this._logMissingView(),null;const{cursor:s,defaultZ:h,hasZ:f,geometryToPlace:m,graphicProperties:v,mode:x,preserveAspectRatio:M}=n,$=e==="rectangle"||e==="circle"?"hybrid":"click",I=M??e!=="rectangle",P={centered:e!=="rectangle"&&!(e==="circle"&&!I),cursor:s,defaultZ:h,forceUniformSize:I,graphicProperties:v,geometryToPlace:m,geometryType:e,graphicSymbol:this._getGraphicSymbolFromTool(e),hasZ:f,mode:x??$,snappingManager:this.snappingManager,snapToScene:!1,view:i};return i.type==="2d"?this._makeDrawGraphicTool2D(P):this._makeDrawGraphicTool3D(P)}async _makeDrawGraphicTool2D(e){const i=await this._requireModule(be(()=>import("./editingTools-C4HtHKST.js"),__vite__mapDeps([283,284,72,285,279,286,48,132,60,287,288,92,289,113,290,276,138,85,291,87,31,108,292]),import.meta.url));return Ki(i)||this.destroyed?null:new i.module.DrawGraphicTool2D({...e,activeVertexSymbol:this.activeVertexSymbol,regularVerticesSymbol:this.vertexSymbol,activeLineSymbol:this.activeLineSymbol,activeFillSymbol:ewe(e.geometryType)?this.activeFillSymbol:null,sketchOptions:this.sketchOptions})}async _makeDrawGraphicTool3D(e){const i=await this._requireModule(be(()=>import("./editingTools-BBcAQ15l.js"),__vite__mapDeps([293,108,286,48,132,60,207,114,37,113,294,118,295,43,73,120,78,41,121,212,40,289,213,225,211,103,49,35,99,52,34,36,296,92,39,288,199,276,42,44,23,201,75,285,279,287,290,297,298,137,138,85,299,170,300,301,302,291,87,31]),import.meta.url));if(Ki(i)||this.destroyed)return null;const{elevationInfo:n}=this.layer;return new i.module.DrawGraphicTool3D({...e,elevationInfo:n,snapToScene:!0,sketchOptions:this.sketchOptions})}_setupCreateOperationHandle(e){const i=this.view;if(!i)return this._logMissingView(),null;let n=null;const s=e.forceUniformSize,h=e.centered,f=[i.on("key-down",v=>{if(v.key===ui.pan)v.stopPropagation(),v.repeat||(e.enabled=!1);else if(v.key===ui.complete)v.stopPropagation(),e.completeCreateOperation();else if(v.key!==ui.vertexAdd||v.repeat)v.key===ui.undo?(v.stopPropagation(),m.undo()):v.key===ui.redo?(v.stopPropagation(),m.redo()):v.key!==ui.constraint||e.geometryType!=="rectangle"&&e.geometryType!=="circle"||v.repeat?v.key===ui.center&&(v.repeat||(e.centered=!h,v.stopPropagation())):(e.forceUniformSize=!s,v.stopPropagation());else{const x=e.drawOperation.geometryType;x!=="polyline"&&x!=="polygon"&&x!=="multipoint"||(v.stopPropagation(),e.drawOperation.commitStagedVertex())}},Ut.WIDGET),i.on("key-up",v=>{v.key===ui.pan?e.enabled=!0:v.key!==ui.constraint||e.geometryType!=="rectangle"&&e.geometryType!=="circle"?v.key===ui.center&&(e.centered=h,v.stopPropagation()):(e.forceUniformSize=s,v.stopPropagation())},Ut.WIDGET),e.on("vertex-add",v=>{switch(n=n==null?"start":"active",v.operation){case"apply":this.emit("create",{graphic:e.graphic,state:n,tool:this.activeTool,toolEventInfo:v,type:"create"});break;case"undo":this._emitUndoEvent({graphics:[e.graphic],tool:e.geometryType});break;case"redo":this._emitRedoEvent({graphics:[e.graphic],tool:e.geometryType})}}),e.on("cursor-update",v=>{e.drawOperation.numCommittedVertices>0&&this.emit("create",{graphic:e.graphic,state:"active",tool:this.activeTool,toolEventInfo:{coordinates:v.vertices[0].coordinates,type:"cursor-update"},type:"create"})}),e.on("vertex-remove",v=>{switch(v.operation){case"apply":this.emit("create",{graphic:e.graphic,state:"active",tool:this.activeTool,toolEventInfo:v,type:"create"});break;case"undo":this._emitUndoEvent({graphics:[e.graphic],tool:e.geometryType});break;case"redo":this._emitRedoEvent({graphics:[e.graphic],tool:e.geometryType})}}),e.on("complete",v=>{this._set("createGraphic",v.graphic),n="complete",v.aborted?m&&m.cancel():m&&m.complete()}),Ee(()=>this._getGraphicSymbolFromTool(e.geometryType),v=>{e.graphicSymbol=v})],m=new Eb({activeComponent:e,tool:e.geometryType,type:"create",onEnd:()=>{var v;f.forEach(x=>x.remove()),f.length=0,(v=i.tools)==null||v.remove(e)},undo:()=>{e.canUndo&&e.undo()},redo:()=>{e.canRedo&&e.redo()},canUndo:()=>e.canUndo,canRedo:()=>e.canRedo});return m}_getGraphicSymbolFromTool(e){switch(e){case"point":case"multipoint":return this.pointSymbol;case"polyline":return this.polylineSymbol;case"circle":case"rectangle":case"polygon":return this.polygonSymbol;case"mesh":return this.meshSymbol}}async _setupUpdateOperation(e,i){var m;const{layer:n,view:s}=this;if(!s)return this._logMissingView(),null;const h={...this.defaultUpdateOptions,...i,reshapeOptions:{...this.defaultUpdateOptions.reshapeOptions,...i==null?void 0:i.reshapeOptions},highlightOptions:{...this.defaultUpdateOptions.highlightOptions,...i==null?void 0:i.highlightOptions}};let f=h.tool??l1.tool;for(const v of e)n.remove(v),n.add(v);if(s.type==="3d"){if(e.length===0)return null;switch(f){case"move":return this._setupMove3DOperation(e,h,s,f);case"reshape":return e.length>1?(this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null):this._setupReshape3DOperation(e[0],h,s);case"transform":return this._setupGraphicTransform3DOperation(e,h,s)}}switch(f){case"move":return this._setupMove2DOperation(e,h,s);case"reshape":return e.length>1?(this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null):this._setupTransformOrReshape2DOperation(e,f,h,s);case"transform":if(e.length===1){const v=(m=e[0].geometry)==null?void 0:m.type;v!=="point"&&v!=="multipoint"||(f="reshape")}return this._setupTransformOrReshape2DOperation(e,f,h,s)}}async _setupMove3DOperation(e,i,n,s,h=!1){const f=await this._requireModule(be(()=>import("./editingTools-BBcAQ15l.js"),__vite__mapDeps([293,108,286,48,132,60,207,114,37,113,294,118,295,43,73,120,78,41,121,212,40,289,213,225,211,103,49,35,99,52,34,36,296,92,39,288,199,276,42,44,23,201,75,285,279,287,290,297,298,137,138,85,299,170,300,301,302,291,87,31]),import.meta.url));if(Ki(f))return f;const{ManipulatedObject3DGraphic:m,MoveTool3D:v}=f.module,x=new Map,M=()=>{x.forEach(L=>L.destroy()),x.clear()};for(const L of e){const z=new m({view:n,graphic:L}),F=wye(z);if(F!==Kt.SUPPORTED)return M(),this._logError("sketch:move",`Move operation not supported for provided graphic(s) (${yC(F)}).`),null;x.set(L,z)}const $=new v({view:n,enableZ:i.enableZ,snappingManager:this.snappingManager,sketchOptions:this.sketchOptions});n.tools.add($),$.objects.addMany(Array.from(x.values())),h||this.updateGraphics.addMany(e);const I=[],P=new nc({activeComponent:$,tool:s,type:"update",onEnd:()=>{var L;I.forEach(z=>z.remove()),I.length=0,(L=n.tools)==null||L.remove($),$.destroyed||$.destroy(),M()},undo:()=>{LC(this.view,$),rv(P,this.updateGraphics.toArray()),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:s})},redo:()=>{sv(P,this.updateGraphics.toArray()),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:s})},addToSelection:L=>{this.updateGraphics.push(L);const z=new m({view:n,graphic:L});x.set(L,z),$.objects.push(z),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[L],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:L=>{const z=this.updateGraphics.indexOf(L);if(P.history.undo.forEach(U=>U.updates.splice(z,1)),P.history.redo.forEach(U=>U.updates.splice(z,1)),this.updateGraphics.remove(L),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[L],type:"selection-change"},type:"update"}),this.updateGraphics.length===0)return void P.complete();const F=x.get(L);F&&($.objects.remove(F),F.destroy(),x.delete(L))},toggleTool:async()=>{if(this.updateGraphics.length!==1||i.toggleToolOnClick===!1||s!=="transform")return;const L=this.updateGraphics.at(0),z=await this._setupReshape3DOperation(L,i,n,!0);z&&!Ki(z)&&(P.onEnd(),P.destroy(),this._setUpdateOperationHandle(z,i))}});return I.push(...this._getHandlesForComponent(P,i),n.on("immediate-click",L=>this._getCommonUpdateOperationClickHandlers(P,L,i),Ut.WIDGET),n.on("key-down",L=>{this._getCommonUpdateOperationKeyDownHandlers(P,L)},Ut.WIDGET)),P}_setupGraphicTransform3DOperation(e,i,n,s=!1){if(e.length===1&&Sye(e[0])===Kt.SUPPORTED){const h=e[0],f=h.geometry;if(f!=null&&(f.type==="point"||f.type==="mesh"))return this._setupPointTransform3DOperation(h,i,n);if(f!=null&&(f.type==="polygon"||f.type==="polyline"))return this._setupPolyTransform3DOperation(h,i,n,s)}return this._setupMove3DOperation(e,i,n,"transform",s)}async _setupPointTransform3DOperation(e,i,n){const s="transform",{enableRotation:h,enableScaling:f,enableZ:m}=i,v=await this._requireModule(be(()=>import("./editingTools-BBcAQ15l.js"),__vite__mapDeps([293,108,286,48,132,60,207,114,37,113,294,118,295,43,73,120,78,41,121,212,40,289,213,225,211,103,49,35,99,52,34,36,296,92,39,288,199,276,42,44,23,201,75,285,279,287,290,297,298,137,138,85,299,170,300,301,302,291,87,31]),import.meta.url));if(Ki(v))return v;const{TransformTool3D:x,ManipulatedObject3DGraphic:M}=v.module,$=new M({graphic:e,view:n}),I=new x({object:$,view:n,enableRotation:h,enableScaling:f,enableZ:m,snappingManager:this.snappingManager,sketchOptions:this.sketchOptions});n.tools.add(I),this.updateGraphics.add(e);const P=[],L=new nc({activeComponent:I,tool:s,type:"update",onEnd:()=>{var z;P.forEach(F=>F.remove()),P.length=0,(z=n.tools)==null||z.remove(I),I.destroyed||I.destroy(),$.destroy()},undo:()=>{LC(this.view,I),rv(L,this.updateGraphics.toArray()),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:s})},redo:()=>{sv(L,this.updateGraphics.toArray()),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:s})},addToSelection:async z=>{this.updateGraphics.add(z),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[z],removed:[],type:"selection-change"},type:"update"}),L.onEnd(),L.destroy();const F=await this._setupMove3DOperation(this.updateGraphics.toArray(),i,n,"transform",!0);Ki(F)||this._setUpdateOperationHandle(F,i)},removeFromSelection:z=>{this.updateGraphics.remove(z),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[z],type:"selection-change"},type:"update"}),L.complete()},toggleTool:()=>{}});return P.push(...this._getHandlesForComponent(L,i),n.on("immediate-click",z=>this._getCommonUpdateOperationClickHandlers(L,z,i),Ut.WIDGET),n.on("key-down",z=>{this._getCommonUpdateOperationKeyDownHandlers(L,z)},Ut.WIDGET)),L}async _setupPolyTransform3DOperation(e,i,n,s=!1){var W,K;const h="transform",{enableRotation:f,enableScaling:m,enableZ:v,preserveAspectRatio:x}=i,M=await this._requireModule(be(()=>import("./editingTools-BBcAQ15l.js"),__vite__mapDeps([293,108,286,48,132,60,207,114,37,113,294,118,295,43,73,120,78,41,121,212,40,289,213,225,211,103,49,35,99,52,34,36,296,92,39,288,199,276,42,44,23,201,75,285,279,287,290,297,298,137,138,85,299,170,300,301,302,291,87,31]),import.meta.url));if(Ki(M))return M;const{ManipulatedObject3DGraphic:$,ExtentTransformTool:I}=M.module,P=(K=(W=this.view)==null?void 0:W.inputManager)==null?void 0:K.isModifierKeyDown(ui.constraint),L=new $({view:n,graphic:e}),z=new I({object:L,view:n,enableRotation:f,enableScaling:m,enableZ:v,preserveAspectRatio:!!x!=!!P,sketchOptions:this.sketchOptions});n.tools.add(z),s||this.updateGraphics.add(e);const F=[],U=new nc({activeComponent:z,tool:h,type:"update",onEnd:()=>{var J;F.forEach(te=>te.remove()),F.length=0,(J=n.tools)==null||J.remove(z),z.destroyed||z.destroy(),L.destroy()},canUndo:()=>z.canUndo,undo:()=>{z.undo(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:h})},canRedo:()=>z.canRedo,redo:()=>{z.redo(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:h})},addToSelection:async J=>{this.updateGraphics.add(J),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[J],removed:[],type:"selection-change"},type:"update"}),U.onEnd(),U.destroy();const te=await this._setupMove3DOperation(this.updateGraphics.toArray(),i,n,"transform",!0);Ki(te)||this._setUpdateOperationHandle(te,i)},removeFromSelection:J=>{this.updateGraphics.remove(J),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[J],type:"selection-change"},type:"update"}),U.complete()},toggleTool:async()=>{if(this.updateGraphics.length!==1||i.toggleToolOnClick===!1)return;const J=await this._setupReshape3DOperation(e,i,n,!0);J&&!Ki(J)&&(U.onEnd(),U.destroy(),this._setUpdateOperationHandle(J,i))}});return F.push(...this._getHandlesForComponent(U,i),n.on("immediate-click",J=>this._getCommonUpdateOperationClickHandlers(U,J,i),Ut.WIDGET),n.on("key-down",J=>this._getCommonUpdateOperationKeyDownHandlers(U,J),Ut.WIDGET),n.on("key-down",J=>{J.key!==ui.constraint||J.repeat||(z.preserveAspectRatio=!z.preserveAspectRatio,J.stopPropagation())},Ut.WIDGET),n.on("key-up",J=>{J.key===ui.constraint&&(z.preserveAspectRatio=!z.preserveAspectRatio,J.stopPropagation())},Ut.WIDGET)),U}async _setupMove2DOperation(e,i,n){const s="move";this.updateGraphics.addMany(e),await this._updateSpatialReference(e);const h=await this._getGraphicMover(e,i,n);if(Ki(h))return h;const f=new nc({activeComponent:h,tool:s,type:"update",onEnd:()=>{var M;this._displayDefaultCursor(),x.forEach($=>$.remove()),v.forEach($=>$.remove()),x=[],v=[],h.destroy(),(M=this._internalGraphicsLayer)==null||M.removeMany([...this.updateGraphics.toArray()])},undo:()=>{const M=this.updateGraphics.toArray();rv(f,M),f.refreshComponent(),this._emitUndoEvent({graphics:M,tool:s})},redo:()=>{const M=this.updateGraphics.toArray();sv(f,M),f.refreshComponent(),this._emitRedoEvent({graphics:M,tool:s})},addToSelection:async M=>{await this._updateSpatialReference(M),this.updateGraphics.push(M),h.graphics=this.updateGraphics.toArray(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[M],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:M=>{const $=this.updateGraphics.indexOf(M);f.history.undo.forEach(P=>P.updates.splice($,1)),f.history.redo.forEach(P=>P.updates.splice($,1)),this.updateGraphics.remove(M);const I=this.updateGraphics.toArray();this.emit("update",{graphics:I,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[M],type:"selection-change"},type:"update"}),this.updateGraphics.length!==0?h.graphics=I:f.complete()}});let m=!1,v=[n.on("immediate-click",M=>this._getCommonUpdateOperationClickHandlers(f,M,i),Ut.WIDGET),n.on("key-down",M=>{this._getCommonUpdateOperationKeyDownHandlers(f,M),M.key!==ui.constraint||M.repeat||(m=!0,h.enableMoveAllGraphics=!h.enableMoveAllGraphics)},Ut.WIDGET),n.on("key-up",M=>{M.key===ui.constraint&&m&&(m=!1,h.enableMoveAllGraphics=!h.enableMoveAllGraphics)},Ut.WIDGET)],x=this._getHandlesForComponent(f,i);return f}async _setupReshape3DOperation(e,i,n,s=!1){const h="reshape",f=await this._requireModule(be(()=>import("./editingTools-BBcAQ15l.js"),__vite__mapDeps([293,108,286,48,132,60,207,114,37,113,294,118,295,43,73,120,78,41,121,212,40,289,213,225,211,103,49,35,99,52,34,36,296,92,39,288,199,276,42,44,23,201,75,285,279,287,290,297,298,137,138,85,299,170,300,301,302,291,87,31]),import.meta.url));if(Ki(f))return f;const{ManipulatedObject3DGraphic:m,ReshapeTool3D:v}=f.module,x=new m({view:n,graphic:e}),M=_ye(x);if(M!==Kt.SUPPORTED)return x.destroy(),this._logError("sketch:reshape",`Reshape operation not supported for provided graphic(s) (${yC(M)}).`),null;const $=i.reshapeOptions,I=new v({view:n,object:x,enableZVertex:i.enableZ&&($==null?void 0:$.vertexOperation)==="move",enableZShape:i.enableZ&&($==null?void 0:$.shapeOperation)==="move",enableMoveObject:($==null?void 0:$.shapeOperation)==="move"||($==null?void 0:$.shapeOperation)==="move-xy",enableMidpoints:($==null?void 0:$.edgeOperation)==="split",enableEdgeOffset:($==null?void 0:$.edgeOperation)==="offset",snappingManager:this.snappingManager,sketchOptions:this.sketchOptions});n.tools.add(I),s||this.updateGraphics.add(x.graphic);const P=[],L=new nc({activeComponent:I,tool:h,type:"update",onEnd:()=>{var z;P.forEach(F=>F.remove()),P.length=0,(z=n.tools)==null||z.remove(I),I.destroyed||I.destroy(),x.destroy()},canUndo:()=>I.canUndo,undo:()=>{I.undo(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:h})},canRedo:()=>I.canRedo,redo:()=>{I.redo(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:h})},addToSelection:async z=>{this.updateGraphics.add(z),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[z],removed:[],type:"selection-change"},type:"update"}),L.onEnd(),L.destroy();const F=await this._setupMove3DOperation(this.updateGraphics.toArray(),i,n,"transform",!0);Ki(F)||this._setUpdateOperationHandle(F,i)},removeFromSelection:z=>{this.updateGraphics.remove(z),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[z],type:"selection-change"},type:"update"}),L.complete()},toggleTool:async()=>{if(i.toggleToolOnClick===!1)return;L.onEnd(),L.destroy();const z=await this._setupGraphicTransform3DOperation(this.updateGraphics.toArray(),i,n,!0);Ki(z)||this._setUpdateOperationHandle(z,i)}});return P.push(...this._getHandlesForComponent(L,i),n.on("immediate-click",z=>this._getCommonUpdateOperationClickHandlers(L,z,i),Ut.WIDGET),n.on("key-down",z=>{this._getCommonUpdateOperationKeyDownHandlers(L,z)},Ut.WIDGET)),L}async _setupTransformOrReshape2DOperation(e,i,n,s){this.updateGraphics.addMany(e),await this._updateSpatialReference(e);const h=i==="transform"?await this._getBox(e,n,s):await this._getReshape(e,n,s);if(Ki(h))return h;const f=new nc({activeComponent:h,type:"update",onEnd:()=>{v.forEach(x=>x.remove()),m.forEach(x=>x.remove()),v=[],m=[],f.activeComponent&&!f.activeComponent.destroyed&&f.activeComponent.destroy(),this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray())},undo:()=>{rv(f,this.updateGraphics.toArray()),f.refreshComponent(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:f.tool})},redo:()=>{sv(f,this.updateGraphics.toArray()),f.refreshComponent(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:f.tool})},addToSelection:async x=>{let M=f.activeComponent;if((M==null?void 0:M.type)==="reshape"){const $=[...this.updateGraphics,x];this.updateGraphics.removeAll(),f.onEnd(),f.destroy();const I=await this._setupTransformOrReshape2DOperation($,"transform",n,s);if(Ki(I))return;this._setUpdateOperationHandle(I,n)}else this.updateGraphics.add(x),M.graphics=this.updateGraphics.toArray(),M.refresh(),f.resetHistory();this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[x],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:async x=>{const M=this.updateGraphics.indexOf(x);f.history.undo.forEach(I=>I.updates.splice(M,1)),f.history.redo.forEach(I=>I.updates.splice(M,1)),this.updateGraphics.remove(x);const $=this.updateGraphics.toArray();if($.length===0)f.complete();else{const I=$[0].geometry;$.length!==1||I==null||I.type!=="point"&&I.type!=="multipoint"?f.activeComponent.graphics=$:f.toggleTool()}this.emit("update",{graphics:$,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[x],type:"selection-change"},type:"update"})},toggleTool:async()=>{var I;if(this.updateGraphics.length>1)return;const x=this.updateGraphics.at(0),M=x.geometry;if(M!=null&&(f.tool==="reshape"&&(M.type==="point"||M.type==="multipoint")||f.tool==="transform"&&M.type==="extent"))return;let $=null;f.tool==="transform"?$=await this._getReshape([x],n,s):f.tool==="reshape"&&($=await this._getBox([x],n,s)),Ki($)||((I=f.activeComponent)==null||I.destroy(),f.activeComponent=$,f.activeComponent&&(v.forEach(P=>P.remove()),v=this._getHandlesForComponent(f,n)))}});let m=[s.on("immediate-click",x=>this._getCommonUpdateOperationClickHandlers(f,x,n),Ut.WIDGET),s.on("key-down",x=>{if(this._getCommonUpdateOperationKeyDownHandlers(f,x),x.key===ui.constraint&&!x.repeat&&f){const M=f.activeComponent;M&&M.type==="box"&&(M.preserveAspectRatio=!M.preserveAspectRatio)}},Ut.WIDGET),s.on("key-up",x=>{if(x.key===ui.constraint&&f){const M=f.activeComponent;M&&M.type==="box"&&(M.preserveAspectRatio=!M.preserveAspectRatio)}},Ut.WIDGET)],v=this._getHandlesForComponent(f,n);return f}async _getGraphicMover(e,i,n){const{enableMoveAllGraphics:s,highlightOptions:h}=i,f=await this._requireModule(be(()=>import("./GraphicMover-Bf8yQ7fM.js").then(m=>m.G),__vite__mapDeps([311,292,135,4,291,87,31]),import.meta.url));return Ki(f)?f:new f.module.default({enableMoveAllGraphics:s,highlightsEnabled:!!(h!=null&&h.enabled),indicatorsEnabled:!1,graphics:e,view:n,callbacks:{onGraphicMoveStart:({dx:m,dy:v,graphic:x})=>{this._displayGrabbingCursor(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:m,dy:v,mover:x,type:"move-start"},type:"update"})},onGraphicMove:({dx:m,dy:v,graphic:x})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:m,dy:v,mover:x,type:"move"},type:"update"}),onGraphicMoveStop:({dx:m,dy:v,graphic:x})=>{this._displayPointerCursor(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:m,dy:v,mover:x,type:"move-stop"},type:"update"})},onGraphicPointerOver:()=>this._displayPointerCursor(),onGraphicPointerOut:()=>this._displayDefaultCursor()}})}async _getBox(e,i,n){var M,$;const{enableRotation:s,enableScaling:h,highlightOptions:f,preserveAspectRatio:m}=i,v=await this._requireModule(be(()=>import("./Box-DekH1xw2.js"),__vite__mapDeps([312,292,311,135,4,291,87,31,313,286,48,132,60,302,298]),import.meta.url));if(Ki(v))return v;const x=($=(M=this.view)==null?void 0:M.inputManager)==null?void 0:$.isModifierKeyDown(ui.constraint);return new v.module.default({graphics:e,enableRotation:s,enableScaling:h,highlightsEnabled:!!(f!=null&&f.enabled),preserveAspectRatio:!!m!=!!x,layer:this._internalGraphicsLayer,view:n,sketchOptions:this.sketchOptions,callbacks:{onMoveStart:I=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...I},type:"update"}),onMove:I=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...I},type:"update"}),onMoveStop:I=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...I},type:"update"}),onScaleStart:I=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...I},type:"update"}),onScale:I=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...I},type:"update"}),onScaleStop:I=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...I},type:"update"}),onRotateStart:I=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...I},type:"update"}),onRotate:I=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...I},type:"update"}),onRotateStop:I=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...I},type:"update"})}})}async _getReshape(e,i,n){var v,x,M;const s=((v=i.reshapeOptions)==null?void 0:v.edgeOperation)==="split",h=((x=i.reshapeOptions)==null?void 0:x.shapeOperation)==="move",f=!!((M=i.highlightOptions)!=null&&M.enabled),m=await this._requireModule(be(()=>import("./Reshape-C0bGX7z-.js"),__vite__mapDeps([314,284,72,285,279,286,48,132,60,287,288,92,289,113,292,311,135,4,291,87,31,297,298,313]),import.meta.url));return Ki(m)?m:new m.module.default({enableMidpoints:s,enableMovement:h,graphic:e[0],highlightsEnabled:f,layer:this._internalGraphicsLayer,snappingManager:this.snappingManager,sketchOptions:this.sketchOptions,view:n,callbacks:{onReshapeStart:$=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...$},type:"update"}),onReshape:$=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...$},type:"update"}),onReshapeStop:({mover:$,type:I})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:$,type:I},type:"update"}),onMoveStart:({dx:$,dy:I,mover:P,type:L})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:$,dy:I,mover:P,type:L},type:"update"}),onMove:({dx:$,dy:I,mover:P,type:L})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:$,dy:I,mover:P,type:L},type:"update"}),onMoveStop:({dx:$,dy:I,mover:P,type:L})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:$,dy:I,mover:P,type:L},type:"update"}),onVertexAdd:({added:$,type:I,vertices:P})=>{const L=$.map(z=>s8(z.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:L,vertices:P,type:I},type:"update"})},onVertexRemove:({removed:$,type:I,vertices:P})=>{const L=$.map(z=>s8(z.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{removed:L,vertices:P,type:I},type:"update"})}}})}_getHandlesForComponent(e,i){const n=e.activeComponent;if(!n)return[];switch(n.type){case"graphic-mover":return[n.on("graphic-click",({graphic:s,viewEvent:h})=>{var f;(f=h.native)!=null&&f.shiftKey&&(h.stopPropagation(),e.removeFromSelection(s))}),n.on("graphic-move-start",s=>e.addToHistory(Uc(s.allGraphics)))];case"box":return[n.on("graphic-click",s=>this._onTransformOrReshape2DGraphicClick(e,i,s)),n.on("move-start",s=>e.addToHistory(Uc(s.graphics))),n.on("rotate-start",s=>e.addToHistory(Uc(s.graphics))),n.on("scale-start",s=>e.addToHistory(Uc(s.graphics)))];case"reshape":return[n.on("graphic-click",s=>this._onTransformOrReshape2DGraphicClick(e,i,s)),n.on("move-start",s=>e.addToHistory(Uc([s.mover]))),n.on("reshape-start",s=>e.addToHistory(Uc([s.graphic]))),n.on("vertex-add",s=>e.addToHistory(Uc([s.oldGraphic]))),n.on("vertex-remove",s=>e.addToHistory(Uc([s.oldGraphic])))];case"move-3d":return[n.events.on("record-undo",({updates:s})=>{e.addToHistory({updates:s})}),n.events.on("move-start",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:s.objects.length>0?s.objects[0].graphic:null,type:"move-start"},type:"update"})}),n.events.on("move",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:s.dx,dy:s.dy,mover:s.objects.length>0?s.objects[0].graphic:null,type:"move"},type:"update"})}),n.events.on("move-stop",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:s.objects.length>0?s.objects[0].graphic:null,type:"move-stop"},type:"update"})}),n.events.on("immediate-click",s=>{s.shiftKey?this._toggleSelection([s.object.graphic],e,i):e.toggleTool()})];case"transform-3d":return[n.events.on("record-undo",({updates:s})=>{e.addToHistory({updates:s})}),n.events.on("translate-start",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:s.object.graphic,dx:s.dxScreen,dy:s.dyScreen,type:"move-start"},type:"update"})}),n.events.on("translate-stop",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:s.object.graphic,dx:s.dxScreen,dy:s.dyScreen,type:"move-stop"},type:"update"})}),n.events.on("rotate-start",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:s.object.graphic,angle:s.angle,type:"rotate-start"},type:"update"})}),n.events.on("rotate-stop",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:s.object.graphic,angle:s.angle,type:"rotate-stop"},type:"update"})}),n.events.on("scale-start",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:s.object.graphic,xScale:s.xScale,yScale:s.yScale,type:"scale-start"},type:"update"})}),n.events.on("scale-stop",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:s.object.graphic,xScale:s.xScale,yScale:s.yScale,type:"scale-stop"},type:"update"})}),n.events.on("translate",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:s.object.graphic,dx:s.dxScreen,dy:s.dyScreen,type:"move"},type:"update"})}),n.events.on("rotate",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:s.object.graphic,angle:s.angle,type:"rotate"},type:"update"})}),n.events.on("scale",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:s.object.graphic,xScale:s.xScale,yScale:s.yScale,type:"scale"},type:"update"})}),n.events.on("immediate-click",s=>{s.shiftKey?this._toggleSelection([s.object.graphic],e,i):e.toggleTool()})];case"reshape-3d":return[n.events.on("reshape",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...s,mover:s.object.graphic},type:"update"})}),n.events.on("move",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...s,mover:s.object.graphic},type:"update"})}),n.events.on("vertex-add",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:s,type:"update"})}),n.events.on("vertex-remove",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:s,type:"update"})}),n.events.on("immediate-click",s=>{s.shiftKey?this._toggleSelection([s.object.graphic],e,i):e.toggleTool()})]}}_onTransformOrReshape2DGraphicClick(e,i,n){var f;const{graphic:s,viewEvent:h}=n;return(f=h.native)!=null&&f.shiftKey&&s.layer===this.layer?(h.stopPropagation(),e.removeFromSelection(s)):i.toggleToolOnClick?(h.stopPropagation(),e.toggleTool()):void 0}_setUpdateOperationHandle(e,i){var h;this._operationHandle=e;const n=(h=this.view)==null?void 0:h.map;this._disablePopup(i);const s=()=>{if(e===this._operationHandle){const f=this.updateGraphics.toArray(),m=this._operationHandle.tool;this._operationHandle.destroy(),this._operationHandle=null,this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray()),this.updateGraphics.removeAll(),n&&n.remove(this._internalGraphicsLayer),this._restorePopup(i),this.emit("update",{graphics:f,state:"complete",aborted:e.cancelled,tool:m,toolEventInfo:null,type:"update"})}};e.on("complete",s)}async _getCommonUpdateOperationClickHandlers(e,i,n){const s=Us(i),h=await i.async(()=>this._getFirstHit(s));if(h==null)return void e.complete();if(i.native.shiftKey&&this._toggleSelection([h.graphic],e,n))return void i.stopPropagation();this.updateGraphics.includes(h.graphic)?i.stopPropagation():e.complete()}_toggleSelection(e,i,n){const s=!!n.multipleSelectionEnabled;return e.some(h=>h!=null&&!(!s||h.layer!==this.layer)&&(this.updateGraphics.includes(h)?i.removeFromSelection(h):i.addToSelection(h),!0))}_getCommonUpdateOperationKeyDownHandlers(e,i){if(!e)return;const n=i.key;n===ui.undo&&e.canUndo()?(i.stopPropagation(),e.undo()):n===ui.redo&&e.canRedo()?(i.stopPropagation(),e.redo()):n===ui.cancel?(i.stopPropagation(),e.cancel()):this.allowDeleteKey&&ui.delete.includes(n)&&this._onDeleteKey(i)}_onDeleteKey(e){var s;if(!this._operationHandle||this._operationHandle.type!=="update")return;const i=this.activeComponent,n=this.updateGraphics.toArray();i!=null&&(i.type!=="reshape"||n.length===1&&((s=n[0].geometry)==null?void 0:s.type)==="point")&&(e.stopPropagation(),this.delete())}_removeDefaultLayer(){var e,i;this._internalGraphicsLayer&&((i=(e=this.view)==null?void 0:e.map)==null||i.remove(this._internalGraphicsLayer),this._internalGraphicsLayer=yt(this._internalGraphicsLayer))}_isComponentGraphic(e){var n;const{activeComponent:i}=this;return!(!e||i==null)&&(((n=e.attributes)==null?void 0:n.esriSketchTool)||i.type==="draw-2d"&&i.graphic===e||(i.type==="box"||i.type==="reshape")&&i.isUIGraphic(e))}_displayPointerCursor(){var e;(e=this.view)!=null&&e.container&&this.view.cursor!=="pointer"&&(this.view.cursor="pointer")}_displayGrabbingCursor(){var e;(e=this.view)!=null&&e.container&&this.view.cursor!=="grabbing"&&(this.view.cursor="grabbing")}_displayDefaultCursor(){var e;(e=this.view)!=null&&e.container&&this.view.cursor!==null&&(this.view.cursor=null)}_logError(e,i,n){Ce.getLogger(this).error(new fe(e,i,n))}async _requireModule(e){const i=new AbortController;this._moduleLoaderAbortController=i;const n=await e;return this._moduleLoaderAbortController!==i||i.signal.aborted?{requireError:"aborted"}:{module:n}}_emitUndoEvent(e){this.emit("undo",{...e,type:"undo"})}_emitRedoEvent(e){this.emit("redo",{...e,type:"redo"})}_emitDeleteEvent(e){this.emit("delete",{...e,type:"delete"})}get test(){}wait(){return Zh(()=>!this.updating)}_beginAsyncOperation(){this._numUpdating+=1,this.notifyChange("updating")}_endAsyncOperation(){this._numUpdating-=1,this.notifyChange("updating")}_disablePopupEnabled(e){var i;return((i=this.view)==null?void 0:i.type)!=="3d"||this.updateOnGraphicClick||((e==null?void 0:e.toggleToolOnClick)??!1)}_disablePopup(e){this._disablePopupEnabled(e)&&this.view&&this._originalPopupEnabled==null&&(this._originalPopupEnabled=this.view.popupEnabled,this.view.popupEnabled=!1)}_restorePopup(e){this._disablePopupEnabled(e)&&this.view&&this._originalPopupEnabled!=null&&(this.view.popupEnabled=this._originalPopupEnabled,this._originalPopupEnabled=null)}async _waitViewReady(){const e=this.view;e?(ms(this._viewReadyAbortController),this._viewReadyAbortController=new AbortController,await bm(Zh(()=>e==null?void 0:e.ready),this._viewReadyAbortController.signal)):this._logMissingView()}_logMissingView(){this._logError("sketch:missing-property",RC("view"))}_logMissingLayer(){this._logError(Q2e,RC("layer"))}};_([T()],zt.prototype,"_defaultSnappingManager",void 0),_([T()],zt.prototype,"updating",null),_([T()],zt.prototype,"_operationHandle",void 0),_([T({readOnly:!0})],zt.prototype,"activeTool",null),_([T()],zt.prototype,"activeFillSymbol",void 0),_([T()],zt.prototype,"activeLineSymbol",void 0),_([T()],zt.prototype,"activeVertexSymbol",void 0),_([T()],zt.prototype,"allowDeleteKey",void 0),_([T({readOnly:!0})],zt.prototype,"createGraphic",null),_([T()],zt.prototype,"defaultCreateOptions",null),_([T()],zt.prototype,"defaultUpdateOptions",null),_([T({type:Jm,nonNullable:!0})],zt.prototype,"labelOptions",null),_([T()],zt.prototype,"layer",void 0),_([T({types:xd})],zt.prototype,"pointSymbol",void 0),_([T({types:xd})],zt.prototype,"polygonSymbol",void 0),_([T({types:xd})],zt.prototype,"polylineSymbol",void 0),_([T()],zt.prototype,"meshSymbol",void 0),_([T({type:Qm,nonNullable:!0})],zt.prototype,"snappingOptions",null),_([T()],zt.prototype,"snappingManager",null),_([T({readOnly:!0})],zt.prototype,"state",null),_([T({type:y7,nonNullable:!0})],zt.prototype,"tooltipOptions",null),_([T({readOnly:!0})],zt.prototype,"updateGraphics",void 0),_([T()],zt.prototype,"updateOnGraphicClick",void 0),_([T({type:S3,nonNullable:!0})],zt.prototype,"valueOptions",null),_([T({types:xd})],zt.prototype,"vertexSymbol",void 0),_([T({value:null})],zt.prototype,"view",null),_([T({constructOnly:!0,type:k3})],zt.prototype,"sketchOptions",void 0),zt=_([Y("esri.widgets.Sketch.SketchViewModel")],zt);const Q2e="sketch:missing-property",RC=t=>`Property '${t}' is missing on SketchViewModel.`;function ewe(t){return t==="polygon"||t==="rectangle"||t==="circle"}function rv(t,e){XV("undo",t.history.undo,t.history.redo,e)}function sv(t,e){XV("redo",t.history.redo,t.history.undo,e)}function XV(t,e,i,n){const s=e.pop();if(!s)return;const h=s.updates,f=[];n.forEach((m,v)=>{const x=h[v];x!=null&&("geometry"in x&&x.geometry!=null&&(f.push({geometry:m.geometry}),m.geometry=x.geometry),"symbol"in x&&x.symbol!=null&&(f.push({symbol:m.symbol}),m.symbol=x.symbol),"undo"in x&&(f.push(x),x[t](m)))}),i.push({updates:f})}function LC(t,e){t!=null&&e.hasGrabbedManipulators&&(t.activeTool=null)}function Uc(t){return{updates:t.map(({geometry:e})=>(e==null?void 0:e.type)==="mesh"?{geometry:e.cloneShallow()}:{geometry:e})}}function Ki(t){return"requireError"in t&&t.requireError==="aborted"}const twe=zt;let Wl=class extends Re{constructor(e){super(e),this.enabledToggle=!0,this.featureEnabledToggle=!0,this.header=!1,this.layerList=!0,this.layerListToggleLayersButton=!0,this.selfEnabledToggle=!0}};_([T({type:Boolean,nonNullable:!0})],Wl.prototype,"enabledToggle",void 0),_([T({type:Boolean,nonNullable:!0})],Wl.prototype,"featureEnabledToggle",void 0),_([T({type:Boolean,nonNullable:!0})],Wl.prototype,"header",void 0),_([T({type:Boolean,nonNullable:!0})],Wl.prototype,"layerList",void 0),_([T({type:Boolean,nonNullable:!0})],Wl.prototype,"layerListToggleLayersButton",void 0),_([T({type:Boolean,nonNullable:!0})],Wl.prototype,"selfEnabledToggle",void 0),Wl=_([Y("esri.widgets.support.SnappingControls.VisibleElements")],Wl);const F3=Wl;let Go=class extends Re{constructor(e){super(e),this.point=!0,this.polyline=!0,this.polygon=!0,this.rectangle=!0,this.circle=!0,this.multipoint=!0,this.mesh=!0}};_([T({type:Boolean,nonNullable:!0})],Go.prototype,"point",void 0),_([T({type:Boolean,nonNullable:!0})],Go.prototype,"polyline",void 0),_([T({type:Boolean,nonNullable:!0})],Go.prototype,"polygon",void 0),_([T({type:Boolean,nonNullable:!0})],Go.prototype,"rectangle",void 0),_([T({type:Boolean,nonNullable:!0})],Go.prototype,"circle",void 0),_([T({type:Boolean,nonNullable:!0})],Go.prototype,"multipoint",void 0),_([T({type:Boolean,nonNullable:!0})],Go.prototype,"mesh",void 0),Go=_([Y("esri.widgets.Sketch.VisibleElements.CreateToolVisibilityMap")],Go);let pd=class extends Re{constructor(e){super(e),this["rectangle-selection"]=!0,this["lasso-selection"]=!0,this["custom-selection"]=!0}};_([T({nonNullable:!0})],pd.prototype,"rectangle-selection",void 0),_([T({nonNullable:!0})],pd.prototype,"lasso-selection",void 0),_([T({nonNullable:!0})],pd.prototype,"custom-selection",void 0),pd=_([Y("esri.widgets.Sketch.VisibleElements.SelectionToolVisibilityMap")],pd);let cs=class extends Re{constructor(e){super(e),this.createTools=new Go,this.directionModePicker=!1,this.duplicateButton=!0,this.labelsToggle=!0,this.selectionTools=new pd,this.settingsMenu=!0,this.snappingControls=!0,this.snappingControlsElements=new F3,this.tooltipsToggle=!0,this.undoRedoMenu=!0}};_([T({type:Go,nonNullable:!0})],cs.prototype,"createTools",void 0),_([T({type:Boolean,nonNullable:!0})],cs.prototype,"directionModePicker",void 0),_([T({type:Boolean,nonNullable:!0})],cs.prototype,"duplicateButton",void 0),_([T({type:Boolean,nonNullable:!0})],cs.prototype,"labelsToggle",void 0),_([T({type:pd,nonNullable:!0})],cs.prototype,"selectionTools",void 0),_([T({type:Boolean,nonNullable:!0})],cs.prototype,"settingsMenu",void 0),_([T({type:Boolean,nonNullable:!0})],cs.prototype,"snappingControls",void 0),_([T({type:F3,nonNullable:!0})],cs.prototype,"snappingControlsElements",void 0),_([T({type:Boolean,nonNullable:!0})],cs.prototype,"tooltipsToggle",void 0),_([T({type:Boolean,nonNullable:!0})],cs.prototype,"undoRedoMenu",void 0),cs=_([Y("esri.widgets.Sketch.VisibleElements")],cs);const QV=cs;function NC(t){let e,i,n=[],s=!1;function h(...f){return s&&e===this&&iwe(f,n)||(i=t.apply(this,f),e=this,n=f,s=!0),i}return h}function iwe(t,e){if(t.length!==e.length)return!1;for(let i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}let nwe=class{constructor(e){this._observable=new v0,this._set=new Set(e)}get size(){return Ve(this._observable),this._set.size}add(e){const i=this._set.size;return this._set.add(e),this._set.size!==i&&this._observable.notify(),this}clear(){this._set.size>0&&(this._set.clear(),this._observable.notify())}delete(e){const i=this._set.delete(e);return i&&this._observable.notify(),i}entries(){return Ve(this._observable),this._set.entries()}forEach(e,i){Ve(this._observable),this._set.forEach((n,s)=>e.call(i,n,s,this),i)}has(e){return Ve(this._observable),this._set.has(e)}keys(){return Ve(this._observable),this._set.keys()}values(){return Ve(this._observable),this._set.values()}[Symbol.iterator](){return Ve(this._observable),this._set[Symbol.iterator]()}get[Symbol.toStringTag](){return this._set[Symbol.toStringTag]}};const rwe=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function f6(t){return t instanceof Re}function DC(t){return t instanceof Pe?Object.keys(t.items):f6(t)?gc(t).keys():t?Object.keys(t):[]}function ov(t,e){return t instanceof Pe?t.items[e]:t[e]}function swe(t,e){return!(!Array.isArray(t)||!Array.isArray(e))&&t.length!==e.length}function Pg(t){return t?t.declaredClass:null}function eH(t,e){var $;const i=t.diff;if(i&&typeof i=="function")return i(t,e);const n=DC(t),s=DC(e);if(n.length===0&&s.length===0)return;if(!n.length||!s.length||swe(t,e))return{type:"complete",oldValue:t,newValue:e};const h=s.filter(I=>!n.includes(I)),f=n.filter(I=>!s.includes(I)),m=n.filter(I=>s.includes(I)&&ov(t,I)!==ov(e,I)).concat(h,f).sort(),v=Pg(t);if(v&&rwe.has(v)&&m.length)return{type:"complete",oldValue:t,newValue:e};let x;const M=f6(t)&&f6(e);for(const I of m){const P=ov(t,I),L=ov(e,I);let z;if((M||typeof P!="function"&&typeof L!="function")&&P!==L&&(P!=null||L!=null)){if(i&&i[I]&&typeof i[I]=="function")z=($=i[I])==null?void 0:$.call(i,P,L);else if(P instanceof Date&&L instanceof Date){if(P.getTime()===L.getTime())continue;z={type:"complete",oldValue:P,newValue:L}}else z=typeof P=="object"&&typeof L=="object"&&Pg(P)===Pg(L)?eH(P,L):{type:"complete",oldValue:P,newValue:L};z!=null&&(x!=null?x.diff[I]=z:x={type:"partial",diff:{[I]:z}})}}return x}function rke(t,e){return owe(t,e)}function owe(t,e){if(t==null)return!1;const i=e.split(".");let n=t;for(const s of i){if(n.type==="complete")return!0;if(n.type!=="partial")return!1;{const h=n.diff[s];if(!h)return!1;n=h}}return!0}function ske(t,e){if(!t)return!1;if(t.type==="partial"){const i=Object.keys(t.diff);return i.length===1&&i[0]===e}return!1}function awe(t,e){if(typeof t!="function"&&typeof e!="function"&&(t!=null||e!=null))return t==null||e==null||typeof t=="object"&&typeof e=="object"&&Pg(t)!==Pg(e)?{type:"complete",oldValue:t,newValue:e}:eH(t,e)}function av(t){if(t==null)return!0;switch(t.type){case"complete":return!1;case"collection":{const e=t;for(const i of e.added)if(!av(i))return!1;for(const i of e.removed)if(!av(i))return!1;for(const i of e.changed)if(!av(i))return!1;return!0}case"partial":for(const e in t.diff)if(!av(t.diff[e]))return!1;return!0}}function kb(t,e){return t===e||t!=null&&e!=null&&bi(t.spatialReference,e.spatialReference)&&t.x===e.x&&t.y===e.y&&t.z===e.z&&t.m===e.m}function v5(t,e,i){return t===e||t!=null&&e!=null&&bi(t.spatialReference,e.spatialReference)&&gs(t.x,e.x,i)&&gs(t.y,e.y,i)&&gs(t.z??0,e.z??0,i)&&gs(t.m??0,e.m??0,i)}const tH="click";let lwe=class{constructor({consumesClicks:e,grabbableForEvent:i}){this.events=new ln,this.interactive=!0,this.selectable=!1,this.cursor=null,this.grabbable=!0,this.consumesClicks=e,this.grabbableForEvent=i}destroy(){}intersectionDistance(e,i){return 0}attach(){}detach(){}onElevationChange(){}onViewChange(){}};var Hi;(function(t){t[t.Z=0]="Z",t[t.M=1]="M"})(Hi||(Hi={}));let cwe=class{constructor(e){this.spatialReference=e}createVector(){return this._tag(nt())}pointToVector(e){return this._tag(ws(e.x,e.y))}arrayToVector(e){return this._tag(ws(e[0],e[1]))}vectorToArray(e){return[e[0],e[1]]}pointToArray(e){return[e.x,e.y]}vectorToPoint(e,i=new De){return i.x=e[0],i.y=e[1],i.z=void 0,i.m=void 0,i.spatialReference=this.spatialReference,i}arrayToPoint(e,i=new De){return i.x=e[0],i.y=e[1],i.z=void 0,i.m=void 0,i.spatialReference=this.spatialReference,i}vectorToDehydratedPoint(e,i){if(e)return i??(i={x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"}),i.x=e[0],i.y=e[1],i.z=void 0,i.m=void 0,i.hasZ=!1,i.hasM=!1,i.spatialReference=this.spatialReference,i}lerp(e,i,n,s){return s3(s,e,i,n)}addDelta(e,i,n){e[0]+=i,e[1]+=n}distance(e,i){return kc(e,i)}getZ(e,i=void 0){return i}hasZ(){return!1}getM(e,i=void 0){return i}hasM(){return!1}clone(e){return this._tag(FD(e))}copy(e,i){return Ad(i,e)}fromXYZ(e){return this._tag(ws(e[0],e[1]))}toXYZ(e,i=Se()){return si(i,e[0],e[1],0)}pointToXYZ(e,i=Se()){return si(i,e.x,e.y,0)}equals(e,i){return XD(e,i)}_tag(e){return e}},zC=class{constructor(e,i){this._valueType=e,this.spatialReference=i}createVector(){return this._tag(Se())}pointToVector(e){return this._tag(wr(e.x,e.y,this._valueType===Hi.Z?e.z:e.m))}arrayToVector(e){return this._tag(wr(e[0],e[1],e[2]||0))}vectorToArray(e){return[e[0],e[1],e[2]]}pointToArray(e){return this._valueType===Hi.Z?[e.x,e.y,e.z]:[e.x,e.y,e.m]}vectorToPoint(e,i=new De){return i.x=e[0],i.y=e[1],i.z=this._valueType===Hi.Z?e[2]:void 0,i.m=this._valueType===Hi.M?e[2]:void 0,i.spatialReference=this.spatialReference,i}arrayToPoint(e,i=new De){return i.x=e[0],i.y=e[1],i.z=this._valueType===Hi.Z?e[2]:void 0,i.m=this._valueType===Hi.M?e[2]:void 0,i.spatialReference=this.spatialReference,i}vectorToDehydratedPoint(e,i){if(!e)return;i??(i={x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"});const n=this._valueType===Hi.Z,s=this._valueType===Hi.M;return i.x=e[0],i.y=e[1],i.z=n?e[2]:void 0,i.m=s?e[2]:void 0,i.hasZ=n,i.hasM=s,i.spatialReference=this.spatialReference,i}lerp(e,i,n,s){return Tm(s,e,i,n)}addDelta(e,i,n,s){e[0]+=i,e[1]+=n,this._valueType===Hi.Z&&(e[2]+=s)}distance(e,i){return this._valueType===Hi.Z?lu(e,i):kc(e,i)}getZ(e,i=void 0){return this._valueType===Hi.Z?e[2]:i}hasZ(){return this._valueType===Hi.Z}getM(e,i=void 0){return this._valueType===Hi.M?e[2]:i}hasM(){return this._valueType===Hi.M}clone(e){return this._tag(PO(e))}copy(e,i){return Yn(i,e)}fromXYZ(e,i=0,n=0){return this._tag(wr(e[0],e[1],this._valueType===Hi.Z?e.length>2?e[2]:i:n))}toXYZ(e,i=Se()){return si(i,e[0],e[1],this._valueType===Hi.Z?e[2]:0)}pointToXYZ(e,i=Se()){return si(i,e.x,e.y,this._valueType===Hi.Z?e.z??0:0)}equals(e,i){return Ug(e,i)}_tag(e){return e}},hwe=class{constructor(e){this.spatialReference=e}createVector(){return this._tag(gu())}pointToVector(e){return this._tag(Qo(e.x,e.y,e.z,e.m))}arrayToVector(e){return this._tag(Qo(e[0],e[1],e[2]||0,e[3]||0))}vectorToArray(e){return[e[0],e[1],e[2],e[3]]}pointToArray(e){return[e.x,e.y,e.z,e.m]}vectorToPoint(e,i=new De){return i.x=e[0],i.y=e[1],i.z=e[2],i.m=e[3],i.spatialReference=this.spatialReference,i}arrayToPoint(e,i=new De){return i.x=e[0],i.y=e[1],i.z=e[2],i.m=e[3],i.spatialReference=this.spatialReference,i}vectorToDehydratedPoint(e,i){if(e)return i??(i={x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"}),i.x=e[0],i.y=e[1],i.z=e[2],i.m=e[3],i.hasZ=!0,i.hasM=!0,i.spatialReference=this.spatialReference,i}lerp(e,i,n,s){return x7(s,e,i,n)}addDelta(e,i,n,s){e[0]+=i,e[1]+=n,e[2]+=s}distance(e,i){return lu(e,i)}getZ(e){return e[2]}hasZ(){return!0}getM(e){return e[3]}hasM(){return!0}clone(e){return this._tag(JG(e))}copy(e,i){return l0(i,e)}fromXYZ(e,i=0,n=0){return this._tag(Qo(e[0],e[1],e.length>2?e[2]:i,n))}toXYZ(e,i=Se()){return si(i,e[0],e[1],e[2])}pointToXYZ(e,i=Se()){return si(i,e.x,e.y,e.z??0)}equals(e,i){return Km(e,i)}_tag(e){return e}};function iH(t,e,i){return t&&e?new hwe(i):e?new zC(Hi.M,i):t?new zC(Hi.Z,i):new cwe(i)}let sg=class extends lo(Fe){constructor(e){super(e),this.type="georeferenced",this.origin=null}};_([Ke({georeferenced:"georeferenced"},{readOnly:!0})],sg.prototype,"type",void 0),_([T({type:[Number],nonNullable:!1,json:{write:!0}})],sg.prototype,"origin",void 0),sg=_([Y("esri.geometry.support.MeshGeoreferencedVertexSpace")],sg);const uwe=sg;let og=class extends lo(Fe){constructor(e){super(e),this.type="local",this.origin=Se()}};_([Ke({local:"local"},{readOnly:!0})],og.prototype,"type",void 0),_([T({type:[Number],nonNullable:!0,json:{write:!0}})],og.prototype,"origin",void 0),og=_([Y("esri.geometry.support.MeshLocalVertexSpace")],og);const dwe=og;function FC(){return Ce.getLogger("esri.geometry.Mesh")}function dke(t){return!Z7(t)}function Z7(t){return t.origin!=null}function pwe(t){return Z7(t.vertexSpace)}function pke(t,e){if(!Z7(t))return null;const[i,n,s]=t.origin;return new De({x:i,y:n,z:s,spatialReference:e})}function fke(t,e){const{x:i,y:n,z:s,spatialReference:h}=t,f=[i,n,s??0];return(e==null?void 0:e.geographic)!==void 0&&(Bh(FC(),"option: geographic",{replacement:"Use the `vertexSpace` option instead.",version:"4.29",warnOnce:!0}),e.vertexSpace&&FC().warn("Deprecated geographic flag ignored since vertexSpace option is provided.")),((e==null?void 0:e.vertexSpace)??gwe(e==null?void 0:e.geographic)??fwe(h))==="local"?new dwe({origin:f}):new uwe({origin:f})}function fwe(t){return t.isGeographic||t.isWebMercator?"local":"georeferenced"}function gwe(t){return t==null?void 0:t?"local":"georeferenced"}function gke(t,e){return t.type===e.type&&(t.origin===e.origin||t.origin!=null&&e.origin!=null&&Wt(t.origin,e.origin))}function mwe(t){return"declaredClass"in t}function jC(t){return"declaredClass"in t}function ywe(t){return"declaredClass"in t}function mke(t,e){return t?ywe(t)?t:new Ud({layer:e,sourceLayer:e,visible:t.visible,symbol:_e(t.symbol),attributes:_e(t.attributes),geometry:vwe(t.geometry)}):null}function vwe(t){return t==null?null:mwe(t)?t:Bd(bwe(t))}function bwe(t){const{wkid:e,wkt:i,wkt2:n,latestWkid:s}=t.spatialReference,h={wkid:e,wkt:i,wkt2:n,latestWkid:s};switch(t.type){case"point":{const{x:f,y:m,z:v,m:x}=t;return{x:f,y:m,z:v,m:x,spatialReference:h}}case"polygon":{const{rings:f,hasZ:m,hasM:v}=t;return{rings:GC(f),hasZ:m,hasM:v,spatialReference:h}}case"polyline":{const{paths:f,hasZ:m,hasM:v}=t;return{paths:GC(f),hasZ:m,hasM:v,spatialReference:h}}case"extent":{const{xmin:f,xmax:m,ymin:v,ymax:x,zmin:M,zmax:$,mmin:I,mmax:P,hasZ:L,hasM:z}=t;return{xmin:f,xmax:m,ymin:v,ymax:x,zmin:M,zmax:$,mmin:I,mmax:P,hasZ:L,hasM:z,spatialReference:h}}case"multipoint":{const{points:f,hasZ:m,hasM:v}=t;return{points:rH(f)?nH(f):f,hasZ:m,hasM:v,spatialReference:h}}default:return}}function GC(t){return wwe(t)?t.map(e=>nH(e)):t}function nH(t){return t.map(e=>Array.from(e))}function wwe(t){for(const e of t)if(e.length!==0)return rH(e);return!1}function rH(t){return t.length>0&&(pm(t[0])||fm(t[0]))}function j3(t,e){if(!t)return null;let i;if(jC(t)){if(e==null)return t.clone();if(jC(e))return e.copy(t)}return e!=null?(i=e,i.x=t.x,i.y=t.y,i.spatialReference=t.spatialReference,t.hasZ?(i.z=t.z,i.hasZ=t.hasZ):(i.z=void 0,i.hasZ=!1),t.hasM?(i.m=t.m,i.hasM=!0):(i.m=void 0,i.hasM=!1)):(i=pl(t.x,t.y,t.z,t.spatialReference),t.hasM&&(i.m=t.m,i.hasM=!0)),i}function _we(t){const{wkid:e,wkt:i,wkt2:n,latestWkid:s}=t,h={wkid:e,wkt:i,wkt2:n,latestWkid:s};return tt.fromJSON(h)}function xwe(t,e){if(!e.supported)return;let i=1/0,n=-1/0;const s=e.upperBoundX-e.lowerBoundX;t.forEach(f=>{let m=f.pos[0];for(;m<e.lowerBoundX;)m+=s;for(;m>e.upperBoundX;)m-=s;i=Math.min(i,m),n=Math.max(n,m),f.pos[0]=m});const h=n-i;s-h<h&&t.forEach(f=>{f.pos[0]<0&&(f.pos[0]+=s)})}function Swe(t,e){const i=er(t);return e===ra.Global&&i?{supported:!0,lowerBoundX:i.valid[0],upperBoundX:i.valid[1]}:{supported:!1,lowerBoundX:null,upperBoundX:null}}let ey=class{constructor(e){this.component=e,this.leftEdge=null,this.rightEdge=null,this.type="vertex",this.index=null}get pos(){return this._pos}set pos(e){this._pos=e,this.component.unnormalizeVertexPositions()}},wc=class{constructor(e,i,n){this.component=e,this.leftVertex=i,this.rightVertex=n,this.type="edge",i.rightEdge=this,n.leftEdge=this}},G3=class{constructor(e,i){this._spatialReference=e,this._viewingMode=i,this.vertices=[],this.edges=[],this.index=null}unnormalizeVertexPositions(){this.vertices.length<=1||xwe(this.vertices,Swe(this._spatialReference,this._viewingMode))}updateVertexIndex(e,i){if(this.vertices.length===0)return;const n=this.vertices[0];let s=null,h=e,f=i;do s=h,s.index=f++,h=s.rightEdge?s.rightEdge.rightVertex:null;while(h!=null&&h!==n);s.leftEdge&&s!==this.vertices[this.vertices.length-1]&&this.swapVertices(this.vertices.indexOf(s),this.vertices.length-1)}getFirstVertex(){return this.vertices.at(0)}getLastVertex(){return this.vertices.at(-1)}isClosed(){return this.vertices.length>2&&this.vertices[0].leftEdge!==null}swapVertices(e,i){const n=this.vertices[e];this.vertices[e]=this.vertices[i],this.vertices[i]=n}iterateVertices(e){if(this.vertices.length===0)return;const i=this.vertices[0];let n=i;do e(n,n.index),n=n.rightEdge!=null?n.rightEdge.rightVertex:null;while(n!==i&&n!=null)}},g6=class sH extends ln{constructor(e,i){super(),this.type=e,this.coordinateHelper=i,this._geometry=null,this._dirty=!0,this.components=[]}get geometry(){if(this._dirty){switch(this.type){case"point":this._geometry=this._toPoint();break;case"polyline":this._geometry=this._toPolyline();break;case"polygon":this._geometry=this._toPolygon();break;case"mesh":break;default:this.type}this._dirty=!1}return this._geometry}get spatialReference(){return this.coordinateHelper.spatialReference}get allVertices(){return Array.from(this.iterateVertices())}*iterateVertices(){for(const e of this.components)for(const i of e.vertices)yield i}notifyChanges(e){this._dirty=!0,this.emit("change",e)}_toPoint(){return this.components.length===0||this.components[0].vertices.length===0?null:this.coordinateHelper.vectorToPoint(this.components[0].vertices[0].pos)}_toPolyline(){const e=[],i=this.coordinateHelper.vectorToArray;for(const n of this.components){if(n.vertices.length<1)continue;const s=[];let h=n.vertices.find(m=>m.leftEdge==null);const f=h;do s.push(i(h.pos)),h=h.rightEdge?h.rightEdge.rightVertex:null;while(h&&h!==f);e.push(s)}return new br({paths:e,spatialReference:this.spatialReference,hasZ:this.coordinateHelper.hasZ(),hasM:this.coordinateHelper.hasM()})}_toPolygon(){const e=[],i=this.coordinateHelper.vectorToArray;for(const n of this.components){if(n.vertices.length<1)continue;const s=[],h=n.vertices[0];let f=h;const m=f;do s.push(i(f.pos)),f=f.rightEdge!=null?f.rightEdge.rightVertex:null;while(f&&f!==m);n.isClosed()&&s.push(i(h.pos)),e.push(s)}return new En({rings:e,spatialReference:this.spatialReference,hasZ:this.coordinateHelper.hasZ(),hasM:this.coordinateHelper.hasM()})}static fromGeometry(e,i){const n=e.spatialReference,s=iH(e.hasZ,e.hasM,n),h=new sH(e.type,s);switch(e.type){case"polygon":Twe(h,e,i);break;case"polyline":Mwe(h,e,i);break;case"point":VC(h,e,i);break;case"mesh":VC(h,e.anchor,i),h._geometry=e,h._dirty=!1}return h}};function Twe(t,e,i){const n=e.spatialReference,s=t.coordinateHelper,h=e.rings;for(let f=0;f<h.length;++f){const m=h[f],v=new G3(n,i);v.index=f;const x=m.length>2&&Za(m[0],m[m.length-1]),M=x?m.length-1:m.length;for(let I=0;I<M;++I){const P=s.arrayToVector(m[I]),L=new ey(v);v.vertices.push(L),L.pos=P,L.index=I}const $=v.vertices.length-1;for(let I=0;I<$;++I){const P=v.vertices[I],L=v.vertices[I+1],z=new wc(v,P,L);v.edges.push(z)}if(x){const I=new wc(v,v.vertices[v.vertices.length-1],v.vertices[0]);v.edges.push(I)}t.components.push(v)}}function Mwe(t,e,i){const n=e.spatialReference,s=t.coordinateHelper,h=e.paths;for(let f=0;f<h.length;++f){const m=h[f],v=new G3(n,i);v.index=f;const x=m.length;for(let $=0;$<x;++$){const I=s.arrayToVector(m[$]),P=new ey(v);v.vertices.push(P),P.pos=I,P.index=$}const M=v.vertices.length-1;for(let $=0;$<M;++$){const I=v.vertices[$],P=v.vertices[$+1],L=new wc(v,I,P);v.edges.push(L)}t.components.push(v)}}function VC(t,e,i){const n=e.spatialReference,s=t.coordinateHelper,h=new G3(n,i);h.index=0;const f=new ey(h);f.index=0,f.pos=s.pointToVector(e),h.vertices.push(f),t.components.push(h)}function c1(t){return t.type==="mesh"}var Dr;(function(t){t[t.NEW_STEP=0]="NEW_STEP",t[t.ACCUMULATE_STEPS=1]="ACCUMULATE_STEPS"})(Dr||(Dr={}));let Ewe=class{constructor(e,i,n){this._editGeometry=e,this._component=i,this._pos=n,this._addedVertex=null,this._originalEdge=null,this._left=null,this._right=null}apply(){let e="redo";this._addedVertex==null&&(e="apply",this._addedVertex=new ey(this._component));const i=this._component.getLastVertex();if(i==null)this._component.vertices.push(this._addedVertex),this._addedVertex.pos=this._pos,this._addedVertex.index=0;else{let n=null;i.rightEdge&&(this._originalEdge=i.rightEdge,n=this._originalEdge.rightVertex,this._component.edges.splice(this._component.edges.indexOf(this._originalEdge),1)),this._component.vertices.push(this._addedVertex),this._addedVertex.pos=this._pos,this._left==null&&(this._left=new wc(this._component,i,this._addedVertex)),this._component.edges.push(this._left),i.rightEdge=this._left,this._originalEdge!=null&&n!=null&&(this._right==null&&(this._right=new wc(this._component,this._addedVertex,n)),this._component.edges.push(this._right),n.leftEdge=this._right),this._component.updateVertexIndex(this._addedVertex,i.index+1)}this._editGeometry.notifyChanges({operation:e,addedVertices:[this._addedVertex]})}undo(){this._addedVertex!=null&&(this._component.vertices.splice(this._component.vertices.indexOf(this._addedVertex),1),this._left!=null&&(this._component.edges.splice(this._component.edges.indexOf(this._left),1),this._left.leftVertex.rightEdge=null),this._right!=null&&(this._component.edges.splice(this._component.edges.indexOf(this._right),1),this._right.rightVertex.leftEdge=null),this._originalEdge!=null&&(this._component.edges.push(this._originalEdge),this._originalEdge.leftVertex.rightEdge=this._originalEdge,this._originalEdge.rightVertex.leftEdge=this._originalEdge),this._left!=null?this._component.updateVertexIndex(this._left.leftVertex,this._left.leftVertex.index):this._component.updateVertexIndex(this._addedVertex,0),this._editGeometry.notifyChanges({operation:"undo",removedVertices:[this._addedVertex]}))}accumulate(){return!1}},kwe=class oH{constructor(e,i,n){this._editGeometry=e,this._vertices=i,this.operation=n,this._undone=!1}apply(){this._vertices.forEach(e=>this.operation.apply(e)),this._editGeometry.components.forEach(e=>e.unnormalizeVertexPositions()),this._editGeometry.notifyChanges({operation:this._undone?"redo":"apply",updatedVertices:this._vertices})}undo(){this._vertices.forEach(e=>this.operation.undo(e)),this._editGeometry.notifyChanges({operation:"undo",updatedVertices:this._vertices}),this._undone=!0}canAccumulate(e){if(this._undone||e._vertices.length!==this._vertices.length)return!1;for(let i=0;i<e._vertices.length;++i)if(e._vertices[i]!==this._vertices[i])return!1;return this.operation.canAccumulate(e.operation)}accumulate(e){return!!(e instanceof oH&&this.canAccumulate(e))&&(this._vertices.forEach(i=>this.operation.accumulate(i,e.operation)),this.operation.accumulateParams(e.operation),this._editGeometry.components.forEach(i=>i.unnormalizeVertexPositions()),this._editGeometry.notifyChanges({operation:"apply",updatedVertices:this._vertices}),!0)}};var eo;(function(t){t[t.CUMULATIVE=0]="CUMULATIVE",t[t.REPLACE=1]="REPLACE"})(eo||(eo={}));let $we=class{constructor(e,i,n=0){this._editGeometry=e,this._vertices=i,this._minNumberOfVertices=n,this.removedVertices=null}apply(){let e="redo";if(this.removedVertices==null){const i=this.removedVertices=[];this._vertices.forEach(n=>{const s=this._removeVertex(n);s!=null&&i.push(s)}),e="apply"}else this.removedVertices.forEach(i=>{this._removeVertex(i.removedVertex)});this._editGeometry.notifyChanges({operation:e,removedVertices:this._vertices})}undo(){var e;(e=this.removedVertices)==null||e.forEach(i=>{this._undoRemoveVertex(i)}),this._editGeometry.notifyChanges({operation:"undo",addedVertices:this._vertices})}accumulate(){return!1}_removeVertex(e){const i=e.component;if(i.vertices.length<=this._minNumberOfVertices)return null;const n={removedVertex:e,createdEdge:null},s=e.leftEdge,h=e.rightEdge;return i.vertices.splice(i.vertices.indexOf(e),1),s&&(i.edges.splice(i.edges.indexOf(s),1),s.leftVertex.rightEdge=null),h&&(i.edges.splice(i.edges.indexOf(h),1),h.rightVertex.leftEdge=null),e.index===0&&h&&this._vertices.length>0&&i.swapVertices(i.vertices.indexOf(h.rightVertex),0),s&&h&&(n.createdEdge=new wc(i,s.leftVertex,h.rightVertex),i.edges.push(n.createdEdge)),h&&i.updateVertexIndex(h.rightVertex,h.rightVertex.index-1),n}_undoRemoveVertex(e){const i=e.removedVertex,n=e.removedVertex.component,s=i.leftEdge,h=i.rightEdge;e.createdEdge&&n.edges.splice(n.edges.indexOf(e.createdEdge),1),n.vertices.push(i),s&&(n.edges.push(s),s.leftVertex.rightEdge=s),h&&(n.edges.push(h),h.rightVertex.leftEdge=h),n.updateVertexIndex(i,i.index)}},Cwe=class{constructor(e,i,n){this._editGeometry=e,this._edge=i,this._t=n,this.createdVertex=null,this._left=null,this._right=null}apply(){let e="redo";const i=this._edge,n=i.component,s=i.leftVertex,h=i.rightVertex;n.edges.splice(n.edges.indexOf(i),1),this.createdVertex==null&&(e="apply",this.createdVertex=new ey(i.component)),n.vertices.push(this.createdVertex),this.createdVertex.pos=this._editGeometry.coordinateHelper.lerp(i.leftVertex.pos,i.rightVertex.pos,this._t,this._editGeometry.coordinateHelper.createVector()),this._left==null&&(this._left=new wc(n,s,this.createdVertex)),this._left.leftVertex.leftEdge?n.edges.push(this._left):n.edges.unshift(this._left),s.rightEdge=this._left,this._right==null&&(this._right=new wc(n,this.createdVertex,h)),n.edges.push(this._right),h.leftEdge=this._right,n.updateVertexIndex(this.createdVertex,s.index+1),this._editGeometry.notifyChanges({operation:e,addedVertices:[this.createdVertex]})}undo(){if(this.createdVertex==null||this._left==null||this._right==null)return null;const e=this._edge,i=e.component,n=this.createdVertex.leftEdge,s=this.createdVertex.rightEdge,h=n==null?void 0:n.leftVertex,f=s==null?void 0:s.rightVertex;i.vertices.splice(i.vertices.indexOf(this.createdVertex),1),i.edges.splice(i.edges.indexOf(this._left),1),i.edges.splice(i.edges.indexOf(this._right),1),this._edge.leftVertex.leftEdge?i.edges.push(this._edge):i.edges.unshift(this._edge),h&&(h.rightEdge=e),f&&(f.leftEdge=e),h&&i.updateVertexIndex(h,h.index),this._editGeometry.notifyChanges({operation:"undo",removedVertices:[this.createdVertex]})}accumulate(){return!1}},Iwe=class aH{constructor(e,i,n){this._editGeometry=e,this._vertex=i,this._pos=n}apply(){const e=this._originalPosition==null;e&&(this._originalPosition=this._vertex.pos),this._apply(e?"apply":"redo")}undo(){this._vertex.pos=this._originalPosition,this._editGeometry.notifyChanges({operation:"undo",updatedVertices:[this._vertex]})}accumulate(e){return e instanceof aH&&e._vertex===this._vertex&&(this._pos=e._pos,this._apply("apply"),!0)}_apply(e){this._vertex.pos=this._pos,this._editGeometry.components.forEach(i=>i.unnormalizeVertexPositions()),this._editGeometry.notifyChanges({operation:e,updatedVertices:[this._vertex]})}},Awe=class{constructor(e,i){this._editGeometry=e,this._component=i,this._createdEdge=null}apply(){let e="redo";if(this._createdEdge==null){e="apply";const i=this._component.getFirstVertex(),n=this._component.getLastVertex();if(this._component.isClosed()||this._component.vertices.length<3||i==null||n==null)return;this._createdEdge=new wc(this._component,n,i)}this._createdEdge.leftVertex.rightEdge=this._createdEdge,this._createdEdge.rightVertex.leftEdge=this._createdEdge,this._component.edges.push(this._createdEdge),this._editGeometry.notifyChanges({operation:e})}undo(){this._createdEdge!=null&&(I6(this._component.edges,this._createdEdge),this._createdEdge.leftVertex.rightEdge=null,this._createdEdge.rightVertex.leftEdge=null,this._editGeometry.notifyChanges({operation:"undo"}))}accumulate(){return!1}},HC=class lH{constructor(e,i,n,s){this._editGeometry=e,this.dx=i,this.dy=n,this.dz=s,this._firstTime=!0}apply(){const e=this._firstTime?"apply":"redo";this._firstTime=!1,this._apply(e,this.dx,this.dy,this.dz)}undo(){this._apply("undo",-this.dx,-this.dy,-this.dz)}accumulate(e){const i=this._editGeometry.geometry;return e instanceof lH&&e._editGeometry.geometry===i&&(this._apply("apply",e.dx,e.dy,e.dz),this.dx+=e.dx,this.dy+=e.dy,this.dz+=e.dz,!0)}_apply(e,i,n,s){const h=this._editGeometry.geometry;h.offset(i,n,s);const f=this._editGeometry.components[0].getFirstVertex();if(!f)return;const m=this._editGeometry.coordinateHelper;f.pos=m.pointToVector(h.anchor),this._editGeometry.notifyChanges({operation:e,updatedVertices:[f]})}},Owe=class cH{constructor(e,i,n,s){this._helper=e,this.dx=i,this.dy=n,this.dz=s}_move(e,i,n,s){this._helper.addDelta(e.pos,i,n,s)}apply(e){this._move(e,this.dx,this.dy,this.dz)}undo(e){this._move(e,-this.dx,-this.dy,-this.dz)}canAccumulate(e){return e instanceof cH}accumulate(e,i){this._move(e,i.dx,i.dy,i.dz)}accumulateParams(e){this.dx+=e.dx,this.dy+=e.dy,this.dz+=e.dz}},Pwe=class m6{get plane(){return this._plane}get requiresSplitEdgeLeft(){return!this._left.isOriginalDirection}get requiresSplitEdgeRight(){return!this._right.isOriginalDirection}get edgeDirection(){return this._edgeDirection}constructor(e,i,n,s=0,h=Rg.IMMEDIATE){this._helper=e,this._planeType=i,this._edge=n,this.distance=s,this._plane=rr(),this._offsetPlane=rr(),this._minDistance=-1/0,this._maxDistance=1/0,this._selectedArrow=1,h===Rg.IMMEDIATE&&this._initialize()}_initialize(){this._initializeNeighbors(),this._initializePlane(),this._initializeDistanceConstraints()}_initializeNeighbors(){var h,f,m,v;const e=this._toXYZ(this._edge.leftVertex.pos),i=this._toXYZ((f=(h=this._edge.leftVertex.leftEdge)==null?void 0:h.leftVertex)==null?void 0:f.pos),n=this._toXYZ(this._edge.rightVertex.pos),s=this._toXYZ((v=(m=this._edge.rightVertex.rightEdge)==null?void 0:m.rightVertex)==null?void 0:v.pos);this._edgeDirection=px(Se(),e,n),i?(this._left=this._computeNeighbor(e,i,this._edgeDirection),this._right=this._computeNeighbor(n,s,this._edgeDirection,this._left)):(this._right=this._computeNeighbor(n,s,this._edgeDirection),this._left=this._computeNeighbor(e,i,this._edgeDirection,this._right))}_toXYZ(e){return e!=null?this._helper.toXYZ(e):null}_pointToXYZ(e){return this._toXYZ(this._helper.pointToVector(e))}_computeNeighbor(e,i,n,s){const h=Se();if(i){px(h,e,i);const f=!this._passesBisectingAngleThreshold(h,n);return{start:e,end:i,direction:f?this._bisectVectorsPerpendicular(n,h):h,isOriginalDirection:!f}}return this._helper.hasZ()?s&&(rn(h,n,s.direction),rn(h,h,n),Ln(h,h),Math.sign(h[1])!==Math.sign(n[0])&&xr(h,h,-1)):si(h,-n[1],n[0],0),{start:e,end:i,direction:h,isOriginalDirection:!0}}_passesBisectingAngleThreshold(e,i){const n=Math.abs(iV(i,e));return n>=BC&&n<=Math.PI-BC}_bisectVectorsPerpendicular(e,i){const n=xt(e,i)<0?e:ux(Se(),e),s=Math.abs(xt(n,i));if(!(s<UC||s>1-UC))return this._bisectDirection(n,i);const h=rn(Se(),n,[0,0,1]);return Ln(h,h)}_bisectDirection(e,i){const n=yr(Se(),e,i);return Ln(n,n)}_initializePlane(){const e=this._computeNormalDirection(this._left),i=this._computeNormalDirection(this._right);xt(e,i)<0&&ux(i,i),D0(this._left.start,this._bisectDirection(e,i),this._plane)}_computeNormalDirection(e){const i=rn(Se(),e.direction,this._edgeDirection);Ln(i,i);const n=rn(Se(),this._edgeDirection,i);return this._planeType===y6.XY&&(n[2]=0),Ln(n,n)}_initializeDistanceConstraints(){this._left.end==null||this.requiresSplitEdgeLeft||this._updateDistanceConstraint(Dh(this._plane,this._left.end)),this._right.end==null||this.requiresSplitEdgeRight||this._updateDistanceConstraint(Dh(this._plane,this._right.end)),this._updateIntersectDistanceConstraint(this._plane)}_updateDistanceConstraint(e){e<=0&&(this._minDistance=Math.max(this._minDistance,e)),e>=0&&(this._maxDistance=Math.min(this._maxDistance,e))}_updateIntersectDistanceConstraint(e){const i=e,n=this._edgeDirection,s=yr(Se(),this._left.start,this._left.direction),h=yr(Se(),this._right.start,this._right.direction),f=this._pointInBasis2D(nt(),i,n,this._left.start),m=this._pointInBasis2D(nt(),i,n,s),v=this._pointInBasis2D(nt(),i,n,this._right.start),x=this._pointInBasis2D(nt(),i,n,h),[M]=Hve({start:m,end:f,type:ri.LINE},{start:x,end:v,type:ri.LINE});if(!M)return;const $=Mi(nt(),f,m);$2($,$);const I=Mi(nt(),M,m),P=ll($,I),L=yr(Se(),s,xr(Se(),this._left.direction,-P)),z=Dh(e,L);this._updateDistanceConstraint(z)}_pointInBasis2D(e,i,n,s){return e[0]=Og(i,s),e[1]=Og(n,s),e}_offset(e,i){Number.isFinite(this._minDistance)&&(i=Math.max(this._minDistance,i)),Number.isFinite(this._maxDistance)&&(i=Math.min(this._maxDistance,i)),Sb(this._offsetPlane,this._plane),this._offsetPlane[3]-=i;const n=(h,f,m)=>f!=null&&M7(this._offsetPlane,h,yr(Se(),h,f),m),s=Se();(e===this._edge.leftVertex?n(this._left.start,this._left.direction,s):n(this._right.start,this._right.direction,s))&&this._helper.copy(this._helper.fromXYZ(s,void 0,this._helper.getM(e.pos)),e.pos)}selectArrowFromStartPoint(e){this._selectedArrow=oV(this.plane,this._pointToXYZ(e))?1:-1}get selectedArrow(){return this._selectedArrow}signedDistanceToPoint(e){return Dh(this.plane,this._pointToXYZ(e))}apply(e){this._offset(e,this.distance)}undo(e){this._offset(e,0)}canAccumulate(e){return e instanceof m6&&this._edge.leftVertex.index===e._edge.leftVertex.index&&this._edge.rightVertex.index===e._edge.rightVertex.index&&this._edge.component===e._edge.component&&this._maybeEqualsVec3(this._left.direction,e._left.direction)&&this._maybeEqualsVec3(this._right.direction,e._right.direction)&&Ug(this._plane,e._plane)}accumulate(e,i){const n=this._plane[3]-i._plane[3]+i.distance;this._offset(e,n)}accumulateParams(e){const i=e.distance-e._plane[3];this.distance=i+this._plane[3]}clone(){const e=new m6(this._helper,this._planeType,this._edge,this.distance,Rg.DEFERRED);return Sb(e._plane,this._plane),Sb(e._offsetPlane,this._offsetPlane),e._maxDistance=this._maxDistance,e._minDistance=this._minDistance,e._left=this._cloneNeighbor(this._left),e._right=this._cloneNeighbor(this._right),e._edgeDirection=Yn(Se(),this._edgeDirection),e}_maybeEqualsVec3(e,i){return e==null&&i==null||e!=null&&i!=null&&Ug(e,i)}_cloneNeighbor({start:e,end:i,direction:n,isOriginalDirection:s}){return{start:Yn(Se(),e),end:i!=null?Yn(Se(),i):null,direction:Yn(Se(),n),isOriginalDirection:s}}};const BC=ac(15),UC=.001;var y6,Rg;(function(t){t[t.XYZ=0]="XYZ",t[t.XY=1]="XY"})(y6||(y6={})),function(t){t[t.IMMEDIATE=0]="IMMEDIATE",t[t.DEFERRED=1]="DEFERRED"}(Rg||(Rg={}));let Rwe=class hH{constructor(e,i,n=eo.CUMULATIVE){this.origin=e,this.angle=i,this._accumulationType=n}_rotate(e,i){KD(e.pos,e.pos,this.origin,i)}apply(e){this._rotate(e,this.angle)}undo(e){this._rotate(e,-this.angle)}canAccumulate(e){return e instanceof hH&&Za(this.origin,e.origin)}accumulate(e,i){const n=i._accumulationType===eo.REPLACE;this._rotate(e,n?i.angle-this.angle:i.angle)}accumulateParams(e){const i=e._accumulationType===eo.REPLACE;this.angle=i?e.angle:this.angle+e.angle}},Lwe=class uH{constructor(e,i,n,s,h=eo.CUMULATIVE){this.origin=e,this.axis1=i,this.factor1=n,this.factor2=s,this._accumulationType=h,this.axis2=ws(i[1],-i[0])}_scale(e,i,n){S4(e.pos,e.pos,this.origin,this.axis1,i),S4(e.pos,e.pos,this.origin,this.axis2,n)}apply(e){this._scale(e,this.factor1,this.factor2)}undo(e){this._scale(e,1/this.factor1,1/this.factor2)}canAccumulate(e){return e instanceof uH&&Za(this.origin,e.origin)&&Za(this.axis1,e.axis1)}accumulate(e,i){i._accumulationType===eo.REPLACE?this._scale(e,i.factor1/this.factor1,i.factor2/this.factor2):this._scale(e,i.factor1,i.factor2)}accumulateParams(e){const i=e._accumulationType===eo.REPLACE;this.factor1=i?e.factor1:this.factor1*e.factor1,this.factor2=i?e.factor2:this.factor2*e.factor2}},Nwe=class dH{constructor(e,i){this._editGeometry=e,this._newPositions=i}apply(){const e=this._originalPositions==null?"apply":"redo";if(!this._originalPositions){const i=this._editGeometry.coordinateHelper;this._originalPositions=this._editGeometry.allVertices.map(n=>i.clone(n.pos))}this._apply(e,this._newPositions)}undo(){this._originalPositions&&this._apply("undo",this._originalPositions)}accumulate(e){return e instanceof dH&&(this._newPositions=e._newPositions,this._apply("apply",this._newPositions),!0)}_apply(e,i){const n=this._editGeometry.coordinateHelper,s=this._editGeometry.allVertices;for(let h=0;h<s.length;h++)n.copy(i[h],s[h].pos);this._editGeometry.components.forEach(h=>h.unnormalizeVertexPositions()),this._editGeometry.notifyChanges({operation:e,updatedVertices:s})}};var pH;const Dwe=Symbol();let zwe=class{constructor(e){this._operations=[],this._closed=!1,this[pH]=!0,e&&(this._operations=e,this._closed=!0)}close(){this._closed=!0}apply(){for(const e of this._operations)e.apply()}undo(){for(let e=this._operations.length-1;e>=0;e--)this._operations[e].undo()}accumulate(e){if(this._closed)return!1;const i=this._operations.length?this._operations[this._operations.length-1]:null;return i&&i.accumulate(e)||(this._operations.push(e),e.apply()),!0}};pH=Dwe;let v6=class fH extends ln{constructor(e,i){super(),this.data=e,this.viewingMode=i,this._undoStack=[],this._redoStack=[],this._listener=this.data.on("change",n=>{n.addedVertices&&this.emit("vertex-add",{type:"vertex-add",vertices:n.addedVertices,operation:n.operation}),n.removedVertices&&this.emit("vertex-remove",{type:"vertex-remove",vertices:n.removedVertices,operation:n.operation}),n.updatedVertices&&this.emit("vertex-update",{type:"vertex-update",vertices:n.updatedVertices,operation:n.operation})})}destroy(){this._listener.remove()}splitEdge(e,i){return this._apply(new Cwe(this.data,e,i))}updateVertices(e,i,n=Dr.ACCUMULATE_STEPS){return this._apply(new kwe(this.data,e,i),n)}move(e,i,n,s=Dr.ACCUMULATE_STEPS){return c1(this.data)?this._apply(new HC(this.data,e,i,n),s):this.moveVertices(this.data.allVertices,e,i,n,s)}moveVertices(e,i,n,s,h=Dr.ACCUMULATE_STEPS){return c1(this.data)?this._apply(new HC(this.data,i,n,s),h):this.updateVertices(e,new Owe(this.data.coordinateHelper,i,n,s),h)}scale(e,i,n,s,h=Dr.ACCUMULATE_STEPS,f=eo.CUMULATIVE){return this.scaleVertices(this.data.allVertices,e,i,n,s,h,f)}scaleVertices(e,i,n,s,h,f=Dr.ACCUMULATE_STEPS,m=eo.CUMULATIVE){return this.updateVertices(e,new Lwe(i,n,s,h,m),f)}rotate(e,i,n=Dr.ACCUMULATE_STEPS,s=eo.CUMULATIVE){return this.rotateVertices(this.data.allVertices,e,i,n,s)}rotateVertices(e,i,n,s=Dr.ACCUMULATE_STEPS,h=eo.CUMULATIVE){return this.updateVertices(e,new Rwe(i,n,h),s)}removeVertices(e){return this._apply(new $we(this.data,e,this._minNumVerticesPerType))}appendVertex(e){return this.data.components.length===0?null:this._apply(new Ewe(this.data,this.data.components[0],e))}setVertexPosition(e,i){return this._apply(new Iwe(this.data,e,i))}offsetEdge(e,i,n,s=Dr.ACCUMULATE_STEPS){return this.updateVertices([i.leftVertex,i.rightVertex],new Pwe(this.data.coordinateHelper,e,i,n),s)}trySetGeometry(e,i=Dr.ACCUMULATE_STEPS){const{data:n}=this,{coordinateHelper:s}=n;if(n.type!==e.type||!n.spatialReference.equals(e.spatialReference)||s.hasZ()!==e.hasZ||s.hasM()!==e.hasM||!SJ(n.geometry,e)||c1(n))return;const h=Array.from(g6.fromGeometry(e,this.viewingMode).iterateVertices(),f=>f.pos);return this.setVertexPositions(h,i)}setVertexPositions(e,i=Dr.ACCUMULATE_STEPS){return this._apply(new Nwe(this.data,e),i)}createResetState(){if(c1(this.data))return this._createResetStateMesh();const e=this.data.geometry.clone();return ut(()=>this.trySetGeometry(e))}closeComponent(e){return this.data.components.includes(e)?this._apply(new Awe(this.data,e)):null}canRemoveVertex(e){return e.vertices.length>this._minNumVerticesPerType}createUndoGroup(){const e=new zwe;return this._apply(e),ut(()=>e.close())}undo(){if(this._undoStack.length>0){const e=this._undoStack.pop();return e.undo(),this._redoStack.push(e),e}return null}redo(){if(this._redoStack.length>0){const e=this._redoStack.pop();return e.apply(),this._undoStack.push(e),e}return null}get canUndo(){return this._undoStack.length>0}get canRedo(){return this._redoStack.length>0}get lastOperation(){return this._undoStack.length>0?this._undoStack[this._undoStack.length-1]:null}get _minNumVerticesPerType(){switch(this.data.type){case"point":return 1;case"polyline":return 2;case"polygon":return 3;default:return 0}}_apply(e,i=Dr.ACCUMULATE_STEPS){return i!==Dr.NEW_STEP&&this.lastOperation!=null&&this.lastOperation.accumulate(e)||(e.apply(),this._undoStack.push(e),this._redoStack=[]),e}_createResetStateMesh(){if(!c1(this.data))return ut();const e=this.data.geometry,{vertexSpace:i}=e;if(i.origin){const s=so(i.origin);return ut(()=>{e.vertexSpace.origin=s})}const n=e.vertexAttributes.clonePositional();return ut(()=>{e.vertexAttributes=n,e.vertexAttributesChanged()})}static fromGeometry(e,i){return new fH(g6.fromGeometry(e,i),i)}};function Fwe(t,e){let i=null,n=null;return s=>{if(s.action==="cancel")return void(n!=null&&(n.execute({action:"cancel"}),i=null,n=null));const h={action:s.action,screenStart:s.start,screenEnd:s.screenPoint};s.action==="start"&&i==null&&(i=new b6,n=new b6,e(t,i,n,s.pointerType,h)),i!=null&&i.execute(h),s.action==="end"&&i!=null&&(i=null,n=null)}}function b5(t,e){return t.events.on("drag",Fwe(t,e))}function Mke(t,e){const i=[t.x,t.y,t.z??0],n=e,s=[Math.cos(n),Math.sin(n)],h=Math.sqrt(s[0]*s[0]+s[1]*s[1]);if(h===0)return null;s[0]/=h,s[1]/=h;const f=m=>{const v=(m.x-i[0])*s[0]+(m.y-i[1])*s[1];m.x=i[0]+v*s[0],m.y=i[1]+v*s[1]};return m=>(f(m.mapStart),f(m.mapEnd),{...m,axis:s})}function jwe(t){let e=null;return i=>{if(i.action==="start"&&(e=Gwe(t,i.mapStart.spatialReference)),e==null)return null;const n=i.mapEnd.x-i.mapStart.x,s=i.mapEnd.y-i.mapStart.y,h=(i.mapEnd.z??0)-(i.mapStart.z??0);return e.move(n,s,h,i.action),{...i,translationX:n,translationY:s,translationZ:h}}}function qC(t,e){return t==null?null:t.spatialReference.equals(e)?t.clone():Wr(t,e)}function Gwe(t,e){const i=t.operations;if(!i)return null;const n=i.data.geometry,s=_we(e);if(n.spatialReference.equals(s))return w5(t,i,()=>{});if(n.type!=="mesh"){const h=qC(n,s);if(h==null)return null;const f=n.spatialReference;return w5(t,v6.fromGeometry(h,i.viewingMode),()=>{const m=Wr(n,f);i.trySetGeometry(m)})}if(pwe(n)){const h=qC(n.origin,s);if(!h)return null;const f=n.spatialReference,m=v6.fromGeometry(h,i.viewingMode);return w5(t,i,()=>{const v=Wr(m.data.geometry,f),x=v.x-n.origin.x,M=v.y-n.origin.y,$=(v.z??0)-(n.origin.z??0);i.move(x,M,$)})}return null}function w5(t,e,i){let n=0,s=0,h=0;return{move:(f,m,v,x)=>{var P;x==="start"&&(n=0,s=0,h=0);const M=f-n,$=m-s,I=v-h;e.move(M,$,I),n+=M,s+=$,h+=I,i(),x==="end"&&((P=t.endInteraction)==null||P.call(t))}}}function Eke(t,e=null,i){var f;let n=null;const s=e==null||(f=t.spatialReference)!=null&&f.equals(e)?m=>m:m=>m!=null?Wr(m,e):m,h={exclude:[],...i};return m=>{if(m.action==="start"&&(n=s(t.toMap(m.screenStart,h))),n==null)return null;const v=s(t.toMap(m.screenEnd,h));return v!=null?{...m,mapStart:n,mapEnd:v}:null}}function kke(t){const e=t.map(i=>jwe(i)).filter(ji);return i=>{const n=i.mapEnd.x-i.mapStart.x,s=i.mapEnd.y-i.mapStart.y,h=i.mapEnd.z-i.mapStart.z;return e.forEach(f=>f(i)),{...i,translationX:n,translationY:s,translationZ:h}}}function Vwe(t){var i;const e=(i=t.operations)==null?void 0:i.createResetState();return n=>(e==null||e.remove(),n)}function $ke(t){const e=t.map(i=>Vwe(i)).filter(i=>i!=null);return i=>(e.forEach(n=>n(i)),i)}function Cke(){let t=0,e=0,i=0;return n=>{n.action==="start"&&(t=n.mapStart.x,e=n.mapStart.y,i=n.mapStart.z);const s=n.mapEnd.x-t,h=n.mapEnd.y-e,f=n.mapEnd.z-i;return t=n.mapEnd.x,e=n.mapEnd.y,i=n.mapEnd.z,{...n,mapDeltaX:s,mapDeltaY:h,mapDeltaZ:f,mapDeltaSpatialReference:n.mapStart.spatialReference}}}function Ike(){let t=0,e=0;return i=>{i.action==="start"&&(t=i.screenStart.x,e=i.screenStart.y);const n=i.screenEnd.x-t,s=i.screenEnd.y-e;return t=i.screenEnd.x,e=i.screenEnd.y,{...i,screenDeltaX:n,screenDeltaY:s}}}function Ake(t,e){let i=null,n=0,s=0;return h=>{var x;if(h.action==="start"&&(i=(x=t.toScreen)==null?void 0:x.call(t,e),i!=null&&(i.x<0||i.x>t.width||i.y<0||i.y>t.height?i=null:(n=h.screenStart.x-i.x,s=h.screenStart.y-i.y))),i==null)return null;const f=qr(h.screenEnd.x-n,0,t.width),m=qr(h.screenEnd.y-s,0,t.height),v=Fi(f,m);return h.screenStart=i,h.screenEnd=v,h}}const Hwe=()=>{};let b6=class gH{constructor(){this.execute=Hwe}next(e,i=new gH){return e!=null&&(this.execute=n=>{const s=e(n);s!=null&&i.execute(s)}),i}};function Bwe(t,e,i=[]){if(t.type==="2d")return s=>s;let n=null;return s=>{s.action==="start"&&(n=t.toMap(s.screenStart,{exclude:i}),n!=null&&(n.z=tw(n,t,e)));const h=t.toMap(s.screenEnd,{exclude:i});h!=null&&(h.z=tw(h,t,e));const f=n!=null&&h!=null?{sceneStart:n,sceneEnd:h}:null;return{...s,scenePoints:f}}}function WC(t,e,i){const n=e.elevationProvider.getElevation(t.x,t.y,t.z??0,t.spatialReference,"scene")??0,s=j3(t);return s.z=n,s.hasZ=!0,s.z=tw(s,e,i),s}function Oke(t,e){if(t.type==="2d")return n=>n;let i=null;return n=>{n.action==="start"&&(i=WC(n.mapStart,t,e));const s=WC(n.mapEnd,t,e),h=i!=null&&s!=null?{sceneStart:i,sceneEnd:s}:null;return{...n,scenePoints:h}}}function Pke(t,e,i,n,s,h){let f="geodesic",m=ew(i);const v=_n();return Nh(t,e,n,v),v[2]=0,m&&su(v,i,v,m)||(f="euclidean",m=i),{mode:f,view:e,elevationInfo:n,hasZ:s,directionMode:h,spatialReference:t.spatialReference,measurementSR:m,origin:v}}function Uwe(t,e,i){if(e==null||t==null)return;const n=iZ(i.measurementSR);if(n==null)return;const s=V3(t,i);if(s==null)return;const h=lp(e,n);return new R7(s,h)}function qwe(t,e,i,n){if(i==null||t==null)return;const s=V3(t,n);if(s==null)return;const h=rl(i),f=10,m=x=>{if(x==null)return;const M=_n(),$=oo(x,"degrees","geographic");return h7(M,s,n.measurementSR,f,$,n.mode)?new z7(s,M):void 0},v=()=>{if(e!=null&&t!=null)return rl(c7(e,t))};switch(n.directionMode){case tn.Absolute:return m(h);case tn.Relative:{const x=v();return x==null?void 0:m(x+h)}case tn.RelativeBilateral:{const x=v();return x==null?void 0:Xm([m(x+h),m(x-h)])}}}function mH(t,e){const i=Xwe(t,e);return i!=null?new CV(i):void 0}function yH(t,e,i){const{context:n,longitude:s,latitude:h,direction:f,distance:m,elevation:v}=i;if(s!=null||h!=null||m!=null||v!=null||f!=null){if(s!=null||h!=null){const x=rl(s),M=rl(h),$=J7(v,n);return new F7(x,M,$)}return Wwe(t,e,i)}}function Wwe(t,e,{context:i,direction:n,distance:s,elevation:h}){if(e==null)return mH(h,i);const{view:f,elevationInfo:m,measurementSR:v}=i,x=Nh(e,f,m);if(!v||!su(x,e.spatialReference,ZC,v))return;const[M,$]=ZC,I=s!=null?lp(s,"meters"):void 0,P=rl(n),L=J7(h,i),z=U=>{const W=new OV([M,$],v,I,L,U);return I==null||U==null||L==null&&i.hasZ?W:new cp(W.closestTo(x))};if(P==null)return z(void 0);const F=()=>{if(t!=null&&e!=null)return rl(c7(t,e))};switch(i.directionMode){case tn.Absolute:return z(P);case tn.Relative:{const U=F();return U==null?void 0:z(U+P)}case tn.RelativeBilateral:{const U=F();return U==null?void 0:Xm([z(U+P),z(U-P)])}}}function Zwe(t){return t.context.mode==="geodesic"?yH(null,null,t):vH(t)}function Jwe(t,e,i){const{context:n,x:s,y:h,distance:f,direction:m,elevation:v}=i;return n.mode==="geodesic"?yH(e,t,i):s!=null||h!=null?vH(i):Kwe([Uwe(t,f,n),qwe(t,e,m,n),mH(v,n)])}function vH({x:t,y:e,elevation:i,context:n}){lv.x=(t==null?void 0:t.value)??0,lv.y=(e==null?void 0:e.value)??0,lv.spatialReference=n.spatialReference;const s=V3(lv,n,Qwe);return new F7(t!=null&&s!=null?s[0]:void 0,e!=null&&s!=null?s[1]:void 0,J7(i,n))}function Kwe(t){let e;for(const i of t)i&&(e=(e==null?void 0:e.intersect(i))??i);return e}function V3(t,e,i=_n()){const{view:n,elevationInfo:s,measurementSR:h,origin:f,mode:m}=e;if(Nh(t,n,s,i),su(i,t.spatialReference,i,h))return m!=="geodesic"&&di(i,i,f),i}function Ywe(t,e,i,n){const{view:s,measurementSR:h,spatialReference:f,origin:m,mode:v}=i;if(v==="geodesic"?Yn(h1,t):yr(h1,t,m),su(h1,h,h1,f))return s6(h1,s,e,i,n)}function Xwe(t,e){var i;return((i=bH(t,e))==null?void 0:i.value)??void 0}function J7(t,e){const i=bH(t,e);return i!=null?lp(i,"meters"):void 0}function bH(t,{view:e,origin:i,elevationInfo:n,hasZ:s,measurementSR:h}){if(t==null||!s)return;const f=CO(h);if(f==null)return;const[m,v]=i,x=lp(t,f),M=(e==null?void 0:e.type)==="3d"?E3(e,m,v,x,h,n):x;return M!=null?A0(M,f):void 0}const ZC=_n(),Qwe=_n(),h1=_n(),lv=pl(0,0,0,tt.WGS84);let w6=class{constructor(e){this.vertexHandle=null,this.excludeFeature=null,this.visualizer=null,this.selfSnappingZ=null,this.drawConstraints=null,this.editGeometryOperations=e.editGeometryOperations,this.elevationInfo=e.elevationInfo,this.pointer=e.pointer,this.vertexHandle=e.vertexHandle,this.excludeFeature=e.excludeFeature,this.feature=e.feature,this.visualizer=e.visualizer,this.selfSnappingZ=e.selfSnappingZ,this.drawConstraints=e.drawConstraints}get coordinateHelper(){return this.editGeometryOperations.data.coordinateHelper}get spatialReference(){return this.coordinateHelper.spatialReference}};const wH=Symbol("Yield");let e3e=class{constructor(){this._tasks=new Array,this._runningTasks=Yg(0)}get length(){return this._tasks.length}get running(){return this._runningTasks.value>0}destroy(){this.cancelAll()}runTask(e){if(this.length===0)return wH;for(;!e.done&&this._process(e);)e.madeProgress()}push(e,i,n){return++this._runningTasks.value,new Promise((s,h)=>this._tasks.push(new JC(s,h,e,i,n))).finally(()=>--this._runningTasks.value)}unshift(e,i,n){return++this._runningTasks.value,new Promise((s,h)=>this._tasks.unshift(new JC(s,h,e,i,n))).finally(()=>--this._runningTasks.value)}_process(e){var n;if(this._tasks.length===0)return!1;const i=this._tasks.shift();try{const s=Ss(i.signal);if(s&&!i.abortCallback)i.reject(Yt());else{const h=s?(n=i.abortCallback)==null?void 0:n.call(i,Yt()):i.callback(e);Tc(h)?h.then(i.resolve,i.reject):i.resolve(h)}}catch(s){i.reject(s)}return!0}cancelAll(){const e=Yt();for(const i of this._tasks)if(i.abortCallback){const n=i.abortCallback(e);i.resolve(n)}else i.reject(e);this._tasks.length=0}},JC=class{constructor(e,i,n,s=void 0,h=void 0){this.resolve=e,this.reject=i,this.callback=n,this.signal=s,this.abortCallback=h}},ag=class extends Re{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};_([T()],ag.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),_([T()],ag.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),ag=_([Y("esri.views.support.debugFlags")],ag);const t3e=new ag;var us;(function(t){t[t.ANIMATING=0]="ANIMATING",t[t.INTERACTING=1]="INTERACTING",t[t.IDLE=2]="IDLE"})(us||(us={}));var lt;(function(t){t.RESOURCE_CONTROLLER_IMMEDIATE="immediate",t.RESOURCE_CONTROLLER="schedule",t.SLIDE="slide",t.STREAM_DATA_LOADER="stream loader",t.ELEVATION_QUERY="elevation query",t.TERRAIN_SURFACE="terrain",t.SURFACE_GEOMETRY_UPDATES="surface geometry updates",t.LOD_RENDERER="LoD renderer",t.GRAPHICS_CORE="Graphics3D",t.I3S_CONTROLLER="I3S",t.POINT_CLOUD_LAYER="point cloud",t.FEATURE_TILE_FETCHER="feature fetcher",t.OVERLAY="overlay",t.STAGE="stage",t.GRAPHICS_DECONFLICTOR="graphics deconflictor",t.FILTER_VISIBILITY="Graphics3D filter visibility",t.SCALE_VISIBILITY="Graphics3D scale visibility",t.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",t.POINT_OF_INTEREST_FREQUENT="POI frequent",t.POINT_OF_INTEREST_INFREQUENT="POI infrequent",t.LABELER="labeler",t.FEATURE_QUERY_ENGINE="feature query",t.FEATURE_TILE_TREE="feature tile tree",t.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",t.ELEVATION_ALIGNMENT="elevation alignment",t.ELEVATION_ALIGNMENT_SCENE="elevation alignment scene",t.TEXT_TEXTURE_ATLAS="text texture atlas",t.TEXTURE_UNLOAD="texture unload",t.LINE_OF_SIGHT_TOOL="line of sight tool",t.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",t.ELEVATION_PROFILE="elevation profile",t.SNAPPING="snapping",t.SHADOW_ACCUMULATOR="shadow accumulator",t.CLOUDS_GENERATOR="clouds generator",t[t.NONE=0]="NONE",t[t.TEST_PRIO=1]="TEST_PRIO"})(lt||(lt={}));const Fa=0,KC=new Map([[lt.RESOURCE_CONTROLLER_IMMEDIATE,Fa],[lt.RESOURCE_CONTROLLER,4],[lt.SLIDE,Fa],[lt.STREAM_DATA_LOADER,Fa],[lt.ELEVATION_QUERY,Fa],[lt.TERRAIN_SURFACE,1],[lt.SURFACE_GEOMETRY_UPDATES,1],[lt.LOD_RENDERER,2],[lt.GRAPHICS_CORE,2],[lt.I3S_CONTROLLER,2],[lt.POINT_CLOUD_LAYER,2],[lt.FEATURE_TILE_FETCHER,2],[lt.OVERLAY,4],[lt.STAGE,4],[lt.GRAPHICS_DECONFLICTOR,4],[lt.FILTER_VISIBILITY,4],[lt.SCALE_VISIBILITY,4],[lt.FRUSTUM_VISIBILITY,4],[lt.CLOUDS_GENERATOR,4],[lt.POINT_OF_INTEREST_FREQUENT,6],[lt.POINT_OF_INTEREST_INFREQUENT,30],[lt.LABELER,8],[lt.FEATURE_QUERY_ENGINE,8],[lt.FEATURE_TILE_TREE,16],[lt.FEATURE_TILE_TREE_ACTIVE,Fa],[lt.ELEVATION_ALIGNMENT,12],[lt.ELEVATION_ALIGNMENT_SCENE,14],[lt.TEXT_TEXTURE_ATLAS,12],[lt.TEXTURE_UNLOAD,12],[lt.LINE_OF_SIGHT_TOOL,16],[lt.LINE_OF_SIGHT_TOOL_INTERACTIVE,Fa],[lt.SNAPPING,Fa],[lt.SHADOW_ACCUMULATOR,30]]);function YC(t){return KC.has(t)?KC.get(t):typeof t=="number"?t:1}const i3e=6.5,XC=1,n3e=30,r3e=1e3/30,s3e=100,QC=.9;var _6,Tu;(function(t){class e{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(h=>h.needsUpdate)}constructor(){this._updating=Yg(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new ug("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new n,this._state=us.INTERACTING,this._tasks=new dg,this._runQueue=new dg,this._load=0,this._idleStateCallbacks=new dg,this._idleUpdatesStartFired=!1,this._forceTask=!1,this._debug=!1,this._debugHandle=Ee(()=>t3e.SCHEDULER_LOG_SLOW_TASKS,h=>this._debug=h,Pt);for(const h of Object.keys(lt))this.performanceInfo.tasks.set(lt[h],new ug(lt[h]))}destroy(){this._tasks.toArray().forEach(h=>h.remove()),this._tasks.clear(),Rt(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(h){this._updatingChanged(),h&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this.frame())}))}registerTask(h,f){const m=new i(this,h,f);return this._tasks.push(m),this._updatingChanged(),this.performanceInfo.tasks.has(h)||this.performanceInfo.tasks.set(h,new ug(h)),m}registerIdleStateCallbacks(h,f){const m={idleBegin:h,idleEnd:f};this._idleStateCallbacks.push(m),this.state===us.IDLE&&this._idleUpdatesStartFired&&m.idleBegin();const v=this;return{remove:()=>this._removeIdleStateCallbacks(m),set idleBegin(x){v._idleUpdatesStartFired&&(m.idleEnd(),v._state===us.IDLE&&x()),m.idleBegin=x},set idleEnd(x){m.idleEnd=x}}}get load(){return this._load}set state(h){this._state!==h&&(this._state=h,this.state!==us.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(f=>f.idleEnd())))}get state(){return this._state}updateBudget(h){++this._frameNumber;let f=i3e,m=h.frameDuration,v=XC;switch(this.state){case us.IDLE:f=0,m=Math.max(s3e,h.frameDuration),v=n3e;break;case us.INTERACTING:m=Math.max(r3e,h.frameDuration);case us.ANIMATING:}return m=m-h.elapsedFrameTime-f,this.state!==us.IDLE&&m<XC&&!this._forceTask?(this._forceTask=!0,!1):(m=Math.max(m,v),this._budget.reset(m,this.state),this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case us.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(h=>h.idleBegin())),this._runIdle();break;case us.INTERACTING:this._runInteracting();break;default:this._runAnimating()}}stopFrame(){this._budget.reset(0,this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(h){this._idleUpdatesStartFired&&h.idleEnd(),this._idleStateCallbacks.removeUnordered(h)}removeTask(h){this._tasks.removeUnordered(h),this._runQueue.removeUnordered(h),this._updatingChanged()}_updateTask(h){this._tasks.forAll(f=>{f.name===h&&f.setPriority(h)})}_getState(h){if(this._runQueue.some(m=>m.name===h))return Tu.SCHEDULED;let f=Tu.IDLE;return this._tasks.forAll(m=>{m.name===h&&m.needsUpdate&&(m.schedulePriority<=1?f=Tu.READY:f!==Tu.READY&&(f=Tu.WAITING))}),f}_getRuntime(h){let f=0;return this._tasks.forAll(m=>{m.name===h&&(f+=m.runtime)}),f}_resetRuntimes(){this._tasks.forAll(h=>h.runtime=0)}_getRunning(){const h=new Map;if(this._tasks.forAll(m=>{m.needsUpdate&&h.set(m.name,(h.get(m.name)||0)+1)}),h.size===0)return null;let f="";return h.forEach((m,v)=>{f+=m>1?` ${m}x ${v}`:` ${v}`}),f}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const h=this._tasks.reduce((f,m)=>m.needsUpdate?++f:f,0);this._load=this._load*QC+h*(1-QC)}_schedule(){for(this._runQueue.filterInPlace(h=>!!h.needsUpdate||(h.schedulePriority=h.basePriority,!1)),this._tasks.forAll(h=>{h.basePriority===Fa&&h.needsUpdate&&!this._runQueue.includes(h)&&h.blockFrame!==this._frameNumber&&this._runQueue.unshift(h)});this._runQueue.length===0;){let h=!1,f=0;if(this._tasks.forAll(m=>{m.needsUpdate&&m.schedulePriority!==0&&m.basePriority!==Fa&&m.blockFrame!==this._frameNumber&&(h=!0,f=Math.max(f,m.basePriority),m.schedulePriority===1?(m.schedulePriority=0,this._runQueue.push(m)):--m.schedulePriority)}),!h)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){const h=this._budget.now();this._startFrameTaskTimes();do for(;this._runQueue.length>0;){const f=this._budget.now(),m=this._runQueue.pop();this._budget.resetProgress();try{m.task.runTask(this._budget)===wH&&(m.blockFrame=this._frameNumber)}catch(x){Ce.getLogger("esri.views.support.Scheduler").error(`Exception in task "${m.name}"`,x),m.blockFrame=this._frameNumber}!this._budget.hasProgressed&&m.blockFrame!==this._frameNumber&&m.needsUpdate&&(m.name,lt.I3S_CONTROLLER,m.blockFrame=this._frameNumber),m.schedulePriority=m.basePriority;const v=this._budget.now()-f;if(m.runtime+=v,this._frameTaskTimes.set(m.priority,this._frameTaskTimes.get(m.priority)+v),this._budget.remaining<=0)return this._updatingChanged(),void this._recordFrameTaskTimes(this._budget.now()-h)}while(this._schedule());this._updatingChanged(),this._recordFrameTaskTimes(this._budget.now()-h)}_startFrameTaskTimes(){for(const h of Object.keys(lt))this._frameTaskTimes.set(lt[h],0)}_recordFrameTaskTimes(h){this._frameTaskTimes.forEach((f,m)=>this.performanceInfo.tasks.get(m).record(f)),this.performanceInfo.total.record(h)}get test(){}}t.Scheduler=e;class i{get task(){return this._task.value}get updating(){return this._queue.running}constructor(h,f,m){this._scheduler=h,this.name=f,this.blockFrame=0,this.runtime=0,this._queue=new e3e,this._handles=new f0,this._basePriority=YC(f),this.schedulePriority=this._basePriority,this._task=Yg(m??this._queue),this._handles.add(nr(()=>this.task.running,v=>h.taskRunningChanged(v)))}remove(){this.processQueue(_H),this._scheduler.removeTask(this),this.schedule=aw.schedule,this.reschedule=aw.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(h){if(this.name===h)return;this.name=h;const f=YC(h);this._basePriority!==Fa&&this.schedulePriority===0||(this.schedulePriority=f),this._basePriority=f}get priority(){return this.name}set priority(h){this.setPriority(h)}get needsUpdate(){return this.updating||this.task.running}schedule(h,f,m){return this._queue.push(h,f,m)}reschedule(h,f,m){return this._queue.unshift(h,f,m)}processQueue(h){return this._queue.runTask(h)}}class n{constructor(){this._begin=typeof performance<"u"?performance.now():0,this._budget=0,this._state=us.IDLE,this._done=!1,this._progressed=!1,this._enabled=!0}run(h){return!this.done&&(h()===!0&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get state(){return this._state}get enabled(){return this._enabled}set enabled(h){this._enabled=h}reset(h,f){this._begin=this.now(),this._budget=h,this._state=f,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return this.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}}t.Budget=n})(_6||(_6={})),function(t){t.SCHEDULED="s",t.READY="r",t.WAITING="w",t.IDLE="i"}(Tu||(Tu={}));const _H=(()=>{const t=new _6.Budget;return t.enabled=!1,t})();let o3e=class{remove(){}processQueue(){}schedule(e,i,n){try{if(Ss(i)){const s=Yt();return n?Promise.resolve(n(s)):Promise.reject(s)}return L5(e(_H))}catch(s){return Promise.reject(s)}}reschedule(e,i,n){return this.schedule(e,i,n)}};const aw=new o3e;function a3e({predicate:t=()=>!0,snappingManager:e,snappingContext:i,updatingHandles:n,useZ:s=!0}){const h=new b6;if(e==null)return{snappingStep:[eI,h],cancelSnapping:eI};let f,m=null,v=null,x=null;const M=()=>{m=ms(m),e.doneSnapping(),v==null||v.frameTask.remove(),v=null,f=Rt(f),x=null},$=l3e(e,s,h);let I=null,P=null,L=null;return{snappingStep:[z=>{if(!t(z))return z;const{action:F}=z;if(F==="start"){const{info:U}=z,W=c3e(e.view);if(v=h3e(i,z,W),v.context.selfSnappingZ=null,!s&&U!=null){const K=d3e(i.coordinateHelper,U.handle.component);K!=null&&(v.context.selfSnappingZ={value:K,elevationInfo:i.elevationInfo??Ai})}}if(v!=null){const{context:U,originalScenePos:W,originalPos:K}=v,{mapEnd:J,mapStart:te,scenePoints:ie}=z,le=xH(K,x6(J,te)),de=x6(te,K),xe={...z,action:"update"},we=v.context,ve=u3e(W,ie),se=e.update({point:le,scenePoint:ve,context:U});if(L=se,SH(J,se,de,s),I=le,P=ve,F!=="end"){const{frameTask:ce}=v;m==null&&(m=new AbortController),x=ue=>{n.addPromise(ro($({frameTask:ce,event:xe,context:we,point:le,scenePoint:ve,delta:de,getLastState:()=>({point:I,scenePoint:P,updatePoint:ue.forceUpdate?null:L})},m.signal)))},x({forceUpdate:!1}),f==null&&(f=Ee(()=>e.options.effectiveEnabled,()=>x==null?void 0:x({forceUpdate:!0})))}}return F==="end"&&M(),z},h],cancelSnapping:z=>(M(),z)}}function l3e(t,e,i){return fw(async({frameTask:n,point:s,scenePoint:h,context:f,event:m,delta:v,getLastState:x},M)=>{const $=await n.schedule(()=>t.snap({point:s,scenePoint:h,context:f,signal:M}),M);if($.valid){let I=await n.schedule(()=>$.apply(),M);const P=x();P.point!=null&&s!==P.point&&(I=t.update({point:P.point,scenePoint:P.scenePoint,context:f})),P.updatePoint!=null&&kb(I,P.updatePoint)||(SH(m.mapEnd,I,v,e),i.execute(m))}})}function c3e(t){return t.type==="3d"?t.resourceController.scheduler.registerTask(lt.SNAPPING):aw}function h3e(t,e,i){return{context:new w6({editGeometryOperations:t.editGeometryOperations,elevationInfo:t.elevationInfo,pointer:t.pointer,vertexHandle:e.info!=null?e.info.handle:null,excludeFeature:t.excludeFeature,feature:t.feature,visualizer:t.visualizer}),originalPos:e.snapOrigin!=null?t.coordinateHelper.vectorToDehydratedPoint(e.snapOrigin):e.mapStart,originalScenePos:e.scenePoints!=null?e.scenePoints.sceneStart:null,frameTask:i}}function xH(t,[e,i,n]){const s=j3(t);return s.x+=e,s.y+=i,s.hasZ&&(s.z+=n),s}function u3e(t,e){return t==null||e==null?null:xH(t,x6(e.sceneEnd,e.sceneStart))}function x6(t,e){const i=t.hasZ&&e.hasZ?t.z-e.z:0;return[t.x-e.x,t.y-e.y,i]}function SH(t,e,[i,n,s],h){t.x=e.x+i,t.y=e.y+n,h&&t.hasZ&&e.hasZ&&(t.z=e.z+s)}function d3e(t,e){if(!t.hasZ())return null;const i=e.vertices;let n=null;for(const s of i){const h=t.getZ(s.pos);if(n!=null&&h!=null&&Math.abs(h-n)>1e-6)return null;n==null&&(n=h)}return n}function eI(t){return t}let id=class extends Re{constructor(e){super(e),this.constrainResult=i=>i,this._snapPoints=null,this._frameTask=null,this._abortController=null,this._stagedPoint=null,this._snap=fw(async(i,n,s,h)=>{const f=this._frameTask;if(f==null)return;const m=await f.schedule(()=>n.snap({...i,context:s,signal:h}),h);m.valid&&await f.schedule(()=>{this.stagedPoint=m.apply(),i!==this._snapPoints&&this._snapPoints!=null&&(this.stagedPoint=n.update({...this._snapPoints,context:s}))},h)})}get stagedPoint(){return this._stagedPoint}set stagedPoint(e){this._stagedPoint=this.constrainResult(e)}initialize(){var i,n;const e=this.view.type==="3d"?(n=(i=this.view)==null?void 0:i.resourceController)==null?void 0:n.scheduler:null;this._frameTask=e!=null?e.registerTask(lt.SNAPPING):aw}destroy(){this._abortController=ms(this._abortController),this._frameTask=Rt(this._frameTask)}update(e,i,n){this._snapPoints=e;const{point:s,scenePoint:h}=e,f=i.update({point:s,scenePoint:h,context:n});return this.stagedPoint=f,f}async snap(e,i,n){const{point:s,scenePoint:h}=e;return this.stagedPoint=i.update({point:s,scenePoint:h,context:n}),this._snapPoints=e,this._abortController==null&&(this._abortController=new AbortController),this._snap(e,i,n,this._abortController.signal)}async snapAgainNearPreviousMapPoint(e,i){this._snapPoints!=null&&await this.snap(this._snapPoints,e,i)}abort(){this._abortController=ms(this._abortController),this._snapPoints=null}};_([T({constructOnly:!0})],id.prototype,"view",void 0),_([T()],id.prototype,"stagedPoint",null),_([T()],id.prototype,"constrainResult",void 0),_([T()],id.prototype,"_stagedPoint",void 0),id=_([Y("esri.views.interactive.snapping.SnappingOperation")],id);const p3e="crosshair",f3e="progress",tI=Symbol(),iI=Symbol();let ft=class extends ln.EventedMixin(Re){constructor(e){super(e),this._createOperationCompleted=!1,this._hideDefaultCursor=!1,this._pointerDownStates=new nwe,this._stagedScreenPoint=null,this._stagedPointerType=null,this._updatingHandles=new uc,this._stagedPointerId=null,this.constraintsEnabled=!1,this.constraints=void 0,this._getPointConstraint=NC(Zwe),this._getPolylineOrPolygonConstraint=NC(Jwe),this.constraintZ=null,this.defaultZ=null,this.isDraped=!0,this.labelOptions=new Jm,this.cursor=null,this.loading=!1,this.snapToSceneEnabled=null,this.firstVertex=null,this.lastVertex=null,this.secondToLastVertex=null,e.elevationInfo==null&&(this.elevationInfo=OG(!!e.hasZ))}initialize(){const{geometryType:e,view:i}=this,n=i.spatialReference,s="viewingMode"in i.state?i.state.viewingMode:ra.Local,h=e==="segment"||e==="multipoint"?"polyline":e;this.coordinateHelper=iH(this.hasZ,this.hasM,n),this._editGeometryOperations=new v6(new g6(h,this.coordinateHelper),s),this._snappingOperation=new id({view:i}),this.addHandles([Ee(()=>({stagedPoint:this._snappingOperation.stagedPoint,constraint:this._constraint}),({stagedPoint:v,constraint:x},M)=>{const{snappingOptions:$}=this;if($&&($.forceDisabled=x!=null&&qs(x)),M!=null&&v===M.stagedPoint&&x!==M.constraint)return this._onKeyboardBasedChange();this._processCursor(v??this._screenToMap(this._stagedScreenPoint))},{equals:(v,x)=>v.stagedPoint===x.stagedPoint&&rA(v.constraint,x.constraint)}),Ee(()=>this.view.viewpoint,(v,x)=>{v&&x&&awe(v,x)&&this._onKeyboardBasedChange()})]),this._activeComponent=new G3(n,s),this._editGeometryOperations.data.components.push(this._activeComponent);const f=this.segmentLabels;f!=null&&(f.context={view:i,editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,labelOptions:this.labelOptions},this.addHandles(Ee(()=>this.labelOptions.enabled,v=>{f.visible=v},xi))),this.addHandles(this._editGeometryOperations.on(["vertex-add","vertex-update","vertex-remove"],v=>{var L,z,F,U;const x=v.vertices.map(W=>({componentIndex:0,vertexIndex:W.index,coordinates:this.coordinateHelper.vectorToArray(W.pos)})),M=x.map(W=>W.coordinates),$=this.coordinateHelper.vectorToDehydratedPoint((L=this._activeComponent.getFirstVertex())==null?void 0:L.pos)??null;kb($,this.firstVertex)||(this.firstVertex=$);const I=this.coordinateHelper.vectorToDehydratedPoint((z=this._activeComponent.getLastVertex())==null?void 0:z.pos)??null;kb(I,this.lastVertex)||(this.lastVertex=I);const P=this.coordinateHelper.vectorToDehydratedPoint((U=(F=this._activeComponent.edges.at(-1))==null?void 0:F.leftVertex)==null?void 0:U.pos)??null;switch(kb(P,this.secondToLastVertex)||(this.secondToLastVertex=P),this._processCursor(this.cursorVertex),v.type){case"vertex-add":this.emit(v.type,{...v,added:M,vertices:x});break;case"vertex-update":this.emit(v.type,{...v,updated:M,vertices:x});break;case"vertex-remove":this.emit(v.type,{...v,removed:M,vertices:x})}}));const m=this._manipulator=new lwe({consumesClicks:!1,grabbableForEvent:v=>this.drawingMode!=="click"||v.pointerType==="touch"&&this._snappingEnabled&&this._pointerDownStates.size===1});this.manipulators.add(m),m.grabbable=e!=="point",this.addHandles([m.events.on("immediate-click",v=>this._onImmediateClick(v)),m.events.on("immediate-double-click",v=>this._onImmediateDoubleClick(v)),Ee(()=>this.drawingMode,()=>{this.removeHandles(tI),this.addHandles(this._createManipulatorDragPipeline(m),tI)},xi),Ee(()=>({effectiveCursor:this.effectiveCursor}),({effectiveCursor:v})=>{m.cursor=v},xi)]),NV(this,()=>{const v=this.view.inputManager.latestPointerType??"mouse",x=this._getSnappingContext(v);if(this.snappingManager!=null){const M=this._snappingOperation.snapAgainNearPreviousMapPoint(this.snappingManager,x);this._updatingHandles.addPromise(ro(M))}})}destroy(){yt(this.segmentLabels),yt(this._snappingOperation),this._editGeometryOperations=yt(this._editGeometryOperations),this._updatingHandles.destroy()}get _isDragging(){const{_stagedPointerId:e,_manipulator:i}=this;return e!=null&&this._pointerDownStates.has(e)||i.grabbing||!i.interactive}get _snappingEnabled(){return this.snappingManager!=null&&this.snappingManager.options.effectiveEnabled}get _requiresScenePoint(){const e=this._updateAndGetEffectiveDrawSurface();return this.view.type==="3d"&&this.drawSurface!==e}get canRedo(){return this._editGeometryOperations.canRedo}get canUndo(){return this._editGeometryOperations.canUndo}get committedVertices(){return this._activeComponent.vertices.map(e=>this.coordinateHelper.vectorToArray(e.pos))}get _constraint(){const{constraints:e,constraintsEnabled:i}=this;if(e&&i)switch(this.geometryType){case"point":return this._getPointConstraint(e);case"polygon":case"polyline":return this._getPolylineOrPolygonConstraint(this.lastVertex,this.secondToLastVertex,e)}}set drawingMode(e){this._set("drawingMode",e??tH)}get effectiveCursor(){return this.loading?f3e:this._hideDefaultCursor?null:this.cursor||p3e}get interactive(){return this._manipulator.interactive}set interactive(e){this._manipulator.interactive=e}get isCompleted(){return this._createOperationCompleted}get numCommittedVertices(){return this._activeComponent.vertices.length}get snappingOptions(){return this.snappingManager!=null?this.snappingManager.options:null}get cursorVertex(){return this._get("cursorVertex")}get visualizationCursorVertex(){return this._stagedPointerType==="mouse"?this.cursorVertex:null}get committableVertex(){const{cursorVertex:e,lastVertex:i,firstVertex:n,geometryType:s}=this;return s==="polygon"&&v5(e,n)||v5(e,i)?null:e}get updating(){return this._updatingHandles.updating}get geometryIncludingUncommittedVertices(){const{committedVertices:e,committableVertex:i,coordinateHelper:n}=this,s=e.slice();return i!=null&&s.push(n.pointToArray(i)),s}cancel(){this.complete({aborted:!0})}commitStagedVertex(){this._snappingOperation.abort();const{committableVertex:e}=this;e!=null&&this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(e))}complete(e){var f;const i=(e==null?void 0:e.aborted)||!1;this._snappingOperation.abort(),(f=this.snappingManager)==null||f.doneSnapping();const{geometryType:n,numCommittedVertices:s}=this,h=n==="multipoint"&&s===0||n==="polyline"&&s<2||n==="polygon"&&s<3;n!=="segment"&&n!=="point"||this.commitStagedVertex(),this._createOperationCompleted=!h,(this.isCompleted||i)&&(this._stagedScreenPoint=null,this._stagedPointerId=null,this._stagedPointerType=null,this._processCursor(null),this.emit("complete",{vertices:this.committedVertices.map((m,v)=>({componentIndex:0,vertexIndex:v,coordinates:m})),aborted:i,type:"complete"}))}onInputEvent(e){switch(e.type){case"pointer-down":this._pointerDownStates.add(e.pointerId);break;case"pointer-up":this._pointerDownStates.delete(e.pointerId)}switch(e.type){case"pointer-move":return this._onPointerMove(e);case"hold":return this._onHold(e)}}redo(){this._editGeometryOperations.redo()}undo(){this.snappingManager!=null&&this.snappingManager.doneSnapping(),this._editGeometryOperations.undo()}_processCursor(e){var m,v;const i=_e(this.cursorVertex),n=_e(e),s=n&&(((m=this._updateAndGetEffectiveDrawSurface())==null?void 0:m.constrainZ(n))??n),h=this._snapToClosingVertex(s),f=this._applyConstraints(h);v5(i,f)||(this._set("cursorVertex",f),(v=this.segmentLabels)==null||v.set("stagedVertex",f!=null?this.coordinateHelper.pointToVector(f):null),f==null||this._stagedPointerType!=="mouse"?this.emit("cursor-remove"):this.emit("cursor-update",{updated:null,vertices:[{componentIndex:0,vertexIndex:this._activeComponent.vertices.length,coordinates:this.coordinateHelper.pointToArray(f)}],operation:"apply",type:"vertex-update"}))}_snapToClosingVertex(e){if(e==null||this._isDragging||this.geometryType!=="polygon"||this.numCommittedVertices<=2)return e;const i=this._mapToScreen(e);if(!i)return e;const n=this._activeComponent;return this._vertexWithinPointerDistance(n.vertices[0].pos,i)?this.firstVertex:this._vertexWithinPointerDistance(n.vertices.at(-1).pos,i)?this.lastVertex:e}_createManipulatorDragPipeline(e){switch(this.drawingMode){case"click":return this._createManipulatorDragPipelineClick(e);case"freehand":return this._createManipulatorDragPipelineFreehand(e);case"hybrid":return this._createManipulatorDragPipelineHybrid(e)}}_createManipulatorDragPipelineClick(e){return b5(e,(i,n,s,h)=>{const f=h==="touch"&&this._snappingEnabled;if(this.isCompleted||!f)return;const{snappingStep:m,cancelSnapping:v}=a3e({predicate:()=>f,snappingManager:this.snappingManager,snappingContext:new w6({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,feature:this.graphic,pointer:h,visualizer:this.snappingVisualizer,drawConstraints:this.constraints}),updatingHandles:this._updatingHandles,useZ:!this._requiresScenePoint});s=s.next(x=>(f&&this.snappingManager!=null&&this.snappingManager.doneSnapping(),x)).next(v),n.next(this._screenToMapDragEventStep()).next(x=>(x.action==="start"&&(this._processCursor(x.mapStart),(this.geometryType==="segment"||f&&!this.numCommittedVertices)&&this.commitStagedVertex()),x)).next(Bwe(this.view,this.elevationInfo)).next(...m).next(x=>(f&&(this._processCursor(x.mapEnd),x.action==="end"&&this.commitStagedVertex()),x)).next(x=>(x.action==="end"&&(this._stagedPointerType!=="mouse"&&this._snappingOperation.abort(),this.geometryType!=="segment"&&this.geometryType!=="point"||this.complete()),x))})}_createManipulatorDragPipelineFreehand(e){return b5(e,(i,n)=>{this.isCompleted||n.next(this._screenToMapDragEventStep()).next(s=>(s.action==="start"&&(this._snappingOperation.abort(),this.committableVertex==null&&this._processCursor(s.mapStart),this.geometryType==="segment"&&this.commitStagedVertex()),s)).next(s=>{switch(s.action){case"start":case"update":this._processCursor(s.mapEnd),this.geometryType!=="polygon"&&this.geometryType!=="polyline"||this.commitStagedVertex();break;case"end":this.complete()}return s})})}_createManipulatorDragPipelineHybrid(e){return b5(e,(i,n)=>{this.isCompleted||n.next(this._screenToMapDragEventStep()).next(s=>(s.action==="start"&&(this._snappingOperation.abort(),this.addHandles(this._editGeometryOperations.createUndoGroup(),iI),this._processCursor(s.mapStart),this.commitStagedVertex()),s)).next(s=>{switch(s.action){case"start":case"update":this._processCursor(s.mapEnd),this.geometryType!=="polygon"&&this.geometryType!=="polyline"||this.commitStagedVertex();break;case"end":this._stagedPointerType!=="mouse"&&this._snappingOperation.abort(),this.removeHandles(iI),this.geometryType!=="segment"&&this.geometryType!=="point"||this.complete()}return s})})}get _drawAtFixedElevation(){const{constraintsEnabled:e,constraintZ:i,geometryType:n,numCommittedVertices:s}=this;return e?i!=null||n==="segment"&&s>0:(n==="segment"||n==="polygon")&&s>0}_updateAndGetEffectiveDrawSurface(){var x;const{constraintsEnabled:e,coordinateHelper:i,drawSurface:n,elevationDrawSurface:s,snapToSceneEnabled:h}=this;if(s==null)return n;if(!this.hasZ)return s.defaultZ=null,s;const f=(x=this.elevationInfo)==null?void 0:x.mode;let m=this.defaultZ,v=e||f==="absolute-height";return h!=null&&(v=h),f==="on-the-ground"&&(v=!1),this._drawAtFixedElevation&&(m=(e?this.constraintZ:null)??i.getZ(this._activeComponent.vertices[0].pos),v=!1),v?n:(s.defaultZ=m,s)}_mapToScreen(e){var i;return(i=this._updateAndGetEffectiveDrawSurface())==null?void 0:i.mapToScreen(e)}_onHold(e){this._snappingOperation.abort(),this.drawingMode==="click"&&e.pointerType==="touch"&&this._snappingEnabled&&this._processCursor(e.mapPoint),e.stopPropagation()}_onImmediateClick(e){if(!(e.pointerType==="mouse"&&e.button===2||this._manipulator.dragging))try{const{drawingMode:i,geometryType:n}=this;this._stagedPointerType=e.pointerType,this._stagedScreenPoint=e.screenPoint;const s=this._screenToMap(e.screenPoint);if(s==null||s==null||i==="freehand"&&n!=="point")return;if(this._snappingEnabled&&this.cursorVertex!=null||this._processCursor(s),this.committableVertex==null)return void this.complete();this.commitStagedVertex(),e.pointerType!=="mouse"&&this._processCursor(null),(i==="freehand"||n==="point"||n==="segment"&&this.numCommittedVertices===2||n==="segment"&&i==="hybrid"&&this.numCommittedVertices===1)&&this.complete()}finally{e.stopPropagation()}}_onImmediateDoubleClick(e){this._manipulator.dragging||this.geometryType==="point"||(this.complete(),e.stopPropagation())}_onPointerMove(e){const i=Fi(e.x,e.y);this._stagedScreenPoint=i,this._stagedPointerType=e.pointerType,this._stagedPointerId=e.pointerId,this._isDragging?this._snappingOperation.abort():(e.stopPropagation(),this._processCursorMovementRelativeToSurface(i,e.pointerType))}_onKeyboardBasedChange(){this._stagedPointerType==="mouse"&&this._stagedScreenPoint&&this._stagedPointerId!=null&&!this._isDragging?this._processCursorMovementRelativeToSurface(this._stagedScreenPoint,this._stagedPointerType):this._snappingOperation.abort()}_processCursorMovementRelativeToSurface(e,i){var v;const n=this._snappingOperation,s=this._screenToMap(e),h=this._requiresScenePoint?(v=this.drawSurface)==null?void 0:v.screenToMap(e):null;if(s==null)return this._hideDefaultCursor=!0,this._processCursor(null),void n.abort();this._hideDefaultCursor=!1;const f=this.snappingManager;if(f==null)return this._processCursor(s),void n.abort();const m=this._getSnappingContext(i);this._updatingHandles.addPromise(ro(n.snap({point:s,scenePoint:h},f,m)))}_applyConstraints(e){const{_constraint:i,constraints:n}=this;if(!e||!n||!i)return e;const{context:s}=n,h=V3(e,s),f=h?i.closestTo(h):void 0;if(!f)return e;const m=Ywe(f,e,s),v=this.view.type==="2d"||s.elevationInfo.mode!=="absolute-height";return m!=null&&v&&this.constraintZ!=null&&this.hasZ&&(m.z=this.constraintZ),m}_screenToMap(e){var i;return e?(i=this._updateAndGetEffectiveDrawSurface())==null?void 0:i.screenToMap(e):null}_screenToMapDragEventStep(){let e=null;return i=>{if(i.action==="start"&&(e=this._screenToMap(i.screenStart)),e==null)return null;const n=this._screenToMap(i.screenEnd);return n!=null?{...i,mapStart:e,mapEnd:n}:null}}_vertexWithinPointerDistance(e,i){const s=this._mapToScreen(this.coordinateHelper.vectorToDehydratedPoint(e));return s!=null&&g3e(s,i,25)}_getSnappingContext(e){var n;const i=this._drawAtFixedElevation?(n=this.elevationDrawSurface)==null?void 0:n.defaultZ:null;return new w6({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,pointer:e,feature:this.graphic,visualizer:this.snappingVisualizer,selfSnappingZ:i!=null?{value:i,elevationInfo:this.elevationInfo}:null,drawConstraints:this.constraints})}};function g3e(t,e,i){const n=t.x-e.x,s=t.y-e.y;return n*n+s*s<=i}_([T()],ft.prototype,"_hideDefaultCursor",void 0),_([T()],ft.prototype,"_stagedPointerId",void 0),_([T()],ft.prototype,"_isDragging",null),_([T()],ft.prototype,"_snappingOperation",void 0),_([T()],ft.prototype,"_snappingEnabled",null),_([T({constructOnly:!0})],ft.prototype,"graphic",void 0),_([T()],ft.prototype,"constraintsEnabled",void 0),_([T()],ft.prototype,"constraints",void 0),_([T()],ft.prototype,"_constraint",null),_([T()],ft.prototype,"constraintZ",void 0),_([T()],ft.prototype,"defaultZ",void 0),_([T()],ft.prototype,"isDraped",void 0),_([T({value:tH})],ft.prototype,"drawingMode",null),_([T({constructOnly:!0})],ft.prototype,"elevationDrawSurface",void 0),_([T({constructOnly:!0})],ft.prototype,"elevationInfo",void 0),_([T({constructOnly:!0,type:Jm})],ft.prototype,"labelOptions",void 0),_([T({constructOnly:!0})],ft.prototype,"geometryType",void 0),_([T({constructOnly:!0})],ft.prototype,"hasM",void 0),_([T({constructOnly:!0})],ft.prototype,"hasZ",void 0),_([T()],ft.prototype,"cursor",void 0),_([T()],ft.prototype,"effectiveCursor",null),_([T()],ft.prototype,"loading",void 0),_([T({constructOnly:!0})],ft.prototype,"manipulators",void 0),_([T({constructOnly:!0})],ft.prototype,"drawSurface",void 0),_([T({constructOnly:!0})],ft.prototype,"segmentLabels",void 0),_([T({constructOnly:!0})],ft.prototype,"snappingManager",void 0),_([T({constructOnly:!0})],ft.prototype,"snappingVisualizer",void 0),_([T()],ft.prototype,"snapToSceneEnabled",void 0),_([T({readOnly:!0})],ft.prototype,"cursorVertex",null),_([T({readOnly:!0})],ft.prototype,"visualizationCursorVertex",null),_([T()],ft.prototype,"committableVertex",null),_([T()],ft.prototype,"firstVertex",void 0),_([T()],ft.prototype,"lastVertex",void 0),_([T()],ft.prototype,"secondToLastVertex",void 0),_([T()],ft.prototype,"updating",null),_([T({constructOnly:!0})],ft.prototype,"view",void 0),ft=_([Y("esri.views.draw.DrawOperation")],ft);let Gke=class{constructor(e,i,n,s=null){this._elevationInfo=e,this.defaultZ=i,this._view=n,this._excludeGraphics=s}screenToMap(e){const{defaultZ:i,_view:n}=this,s=n.sceneIntersectionHelper.intersectElevationFromScreen(ZL(e.x,e.y),this._elevationInfo,i??0,this._excludeGraphics);return i==null&&s!=null&&(s.z=void 0),s}mapToScreen(e){const i=pl(e.x,e.y,m7(this._view,e,this._elevationInfo),e.spatialReference);return this._view.toScreen(i)}constrainZ(e){const{defaultZ:i}=this;return i!=null&&e.z!==i&&((e=j3(e)).z=i),e}},Hke=class{constructor(e,i,n=[]){this.view=e,this.elevationInfo=i,this.exclude=n}screenToMap(e){const i=this.view.toMap(e,{exclude:this.exclude,excludeHud:!0});return i!=null&&(i.z=tw(i,this.view,this.elevationInfo)),i}mapToScreen(e){let i=e;return this.elevationInfo!=null&&(i=pl(e.x,e.y,m7(this.view,e,this.elevationInfo),e.spatialReference)),this.view.toScreen(i)}constrainZ(e){return e}},Uke=class{constructor(e,i=!1,n=0){this.view=e,this.hasZ=i,this.defaultZ=n,this.mapToScreen=s=>e.toScreen(s),this.screenToMap=i?s=>{const h=e.toMap(s);return h.z=n,h}:s=>e.toMap(s)}constrainZ(e){const{defaultZ:i}=this;return this.hasZ&&e.z!==i&&((e=j3(e)).z=i),e}},S6=class TH{screenToMap(e){const{x:i,y:n}=e;return new De({x:i,y:n,spatialReference:TH.spatialReference})}mapToScreen(e){return Fi(e.x,e.y)}constrainZ(e){return e}};S6.spatialReference=new tt;var T6;let wh=T6=class extends En{constructor(...t){super(...t),this.center=null,this.geodesic=!1,this.numberOfPoints=60,this.radius=1e3,this.radiusUnit="meters"}normalizeCtorArgs(t,e){let i;if(t!=null&&t.center)i=t;else{if(t!=null&&t.rings)return super.normalizeCtorArgs(t,e);i={center:t}}return{...super.normalizeCtorArgs(),...i,...e}}initialize(){const t=this.center,e=this.numberOfPoints;if(this.hasZ=(t==null?void 0:t.hasZ)??!1,this.rings.length!==0||!t)return;const i=ii(this.radius,this.radiusUnit,"meters"),n=t.spatialReference;let s,h="geographic";if(n.isWebMercator?h="webMercator":((n.wkid&&H[n.wkid])!=null||(n.wkt2||n.wkt)&&dS(n.wkt2||n.wkt))&&(h="projected"),this.geodesic){let f;switch(h){case"webMercator":f=Oh(t);break;case"projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case"geographic":f=t}s=this._createGeodesicCircle(f,i,e),h==="webMercator"&&(s=hc(s))}else{let f;h==="webMercator"||h==="projected"?f=i/kO(t.spatialReference):h==="geographic"&&(f=TO(i,"meters",uS(t.spatialReference).radius)),s=this._createPlanarCircle(t,f,e)}this.spatialReference=s.spatialReference,this.addRing(s.rings[0])}clone(){const{center:t,numberOfPoints:e,radius:i,radiusUnit:n,geodesic:s}=this;return new T6({center:t==null?void 0:t.clone(),numberOfPoints:e,radius:i,radiusUnit:n,geodesic:s})}_createGeodesicCircle(t,e,i){let n=0;const s=[];for(;n<360;){const h=[0,0],f=[t.x,t.y];Gh(h,f,n,e,tt.WGS84),this.hasZ&&h.push(t.z),s.push(h),n+=360/i}return s.push(s[0]),new En(s)}_createPlanarCircle(t,e,i){const n=[],s=2*Math.PI/i;for(let h=0;h<i;++h){const f=s*h,m=[t.x+Math.cos(-f)*e,t.y+Math.sin(-f)*e];this.hasZ&&m.push(t.z),n.push(m)}return n.push(n[0]),new En({spatialReference:t.spatialReference,rings:[n]})}};_([T({type:De})],wh.prototype,"center",void 0),_([T()],wh.prototype,"geodesic",void 0),_([T()],wh.prototype,"numberOfPoints",void 0),_([T()],wh.prototype,"radius",void 0),_([T()],wh.prototype,"radiusUnit",void 0),wh=T6=_([Y("esri.geometry.Circle")],wh);const m3e=wh;function y3e(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function MH(t,e,i){i*=.5;const n=Math.sin(i);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(i),t}function v3e(t,e){const i=2*Math.acos(e[3]),n=Math.sin(i/2);return n>Ti()?(t[0]=e[0]/n,t[1]=e[1]/n,t[2]=e[2]/n):(t[0]=1,t[1]=0,t[2]=0),i}function EH(t,e,i){const n=e[0],s=e[1],h=e[2],f=e[3],m=i[0],v=i[1],x=i[2],M=i[3];return t[0]=n*M+f*m+s*x-h*v,t[1]=s*M+f*v+h*m-n*x,t[2]=h*M+f*x+n*v-s*m,t[3]=f*M-n*m-s*v-h*x,t}function b3e(t,e,i){i*=.5;const n=e[0],s=e[1],h=e[2],f=e[3],m=Math.sin(i),v=Math.cos(i);return t[0]=n*v+f*m,t[1]=s*v+h*m,t[2]=h*v-s*m,t[3]=f*v-n*m,t}function w3e(t,e,i){i*=.5;const n=e[0],s=e[1],h=e[2],f=e[3],m=Math.sin(i),v=Math.cos(i);return t[0]=n*v-h*m,t[1]=s*v+f*m,t[2]=h*v+n*m,t[3]=f*v-s*m,t}function _3e(t,e,i){i*=.5;const n=e[0],s=e[1],h=e[2],f=e[3],m=Math.sin(i),v=Math.cos(i);return t[0]=n*v+s*m,t[1]=s*v-n*m,t[2]=h*v+f*m,t[3]=f*v-h*m,t}function x3e(t,e){const i=e[0],n=e[1],s=e[2];return t[0]=i,t[1]=n,t[2]=s,t[3]=Math.sqrt(Math.abs(1-i*i-n*n-s*s)),t}function $b(t,e,i,n){const s=e[0],h=e[1],f=e[2],m=e[3];let v,x,M,$,I,P=i[0],L=i[1],z=i[2],F=i[3];return x=s*P+h*L+f*z+m*F,x<0&&(x=-x,P=-P,L=-L,z=-z,F=-F),1-x>Ti()?(v=Math.acos(x),M=Math.sin(v),$=Math.sin((1-n)*v)/M,I=Math.sin(n*v)/M):($=1-n,I=n),t[0]=$*s+I*P,t[1]=$*h+I*L,t[2]=$*f+I*z,t[3]=$*m+I*F,t}function S3e(t){const e=Sm,i=e(),n=e(),s=e(),h=Math.sqrt(1-i),f=Math.sqrt(i);return t[0]=h*Math.sin(2*Math.PI*n),t[1]=h*Math.cos(2*Math.PI*n),t[2]=f*Math.sin(2*Math.PI*s),t[3]=f*Math.cos(2*Math.PI*s),t}function kH(t,e){const i=e[0],n=e[1],s=e[2],h=e[3],f=i*i+n*n+s*s+h*h,m=f?1/f:0;return t[0]=-i*m,t[1]=-n*m,t[2]=-s*m,t[3]=h*m,t}function T3e(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function $H(t,e){const i=e[0]+e[4]+e[8];let n;if(i>0)n=Math.sqrt(i+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{let s=0;e[4]>e[0]&&(s=1),e[8]>e[3*s+s]&&(s=2);const h=(s+1)%3,f=(s+2)%3;n=Math.sqrt(e[3*s+s]-e[3*h+h]-e[3*f+f]+1),t[s]=.5*n,n=.5/n,t[3]=(e[3*h+f]-e[3*f+h])*n,t[h]=(e[3*h+s]+e[3*s+h])*n,t[f]=(e[3*f+s]+e[3*s+f])*n}return t}function M3e(t,e,i,n){const s=.5*Math.PI/180;e*=s,i*=s,n*=s;const h=Math.sin(e),f=Math.cos(e),m=Math.sin(i),v=Math.cos(i),x=Math.sin(n),M=Math.cos(n);return t[0]=h*v*M-f*m*x,t[1]=f*m*M+h*v*x,t[2]=f*v*x-h*m*M,t[3]=f*v*M+h*m*x,t}function E3e(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}const k3e=l0,$3e=v7,C3e=jG,I3e=EH,A3e=BG,O3e=_7,P3e=x7,CH=b7,R3e=CH,IH=w7,L3e=IH,K7=WG,N3e=ZG,D3e=Km;function AH(t,e,i){const n=xt(e,i);return n<-.999999?(rn(da,z3e,e),HO(da)<1e-6&&rn(da,F3e,e),Ln(da,da),MH(t,da,Math.PI),t):n>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(rn(da,e,i),t[0]=da[0],t[1]=da[1],t[2]=da[2],t[3]=1+n,K7(t,t))}const da=Se(),z3e=wr(1,0,0),F3e=wr(0,1,0);function j3e(t,e,i,n,s,h){return $b(nI,e,s,h),$b(rI,i,n,h),$b(t,nI,rI,2*h*(1-h)),t}const nI=Kd(),rI=Kd();function G3e(t,e,i,n){const s=V3e;return s[0]=i[0],s[3]=i[1],s[6]=i[2],s[1]=n[0],s[4]=n[1],s[7]=n[2],s[2]=-e[0],s[5]=-e[1],s[8]=-e[2],K7(t,$H(t,s))}const V3e=$3();Object.freeze(Object.defineProperty({__proto__:null,add:C3e,calculateW:x3e,conjugate:T3e,copy:k3e,dot:O3e,equals:D3e,exactEquals:N3e,fromEuler:M3e,fromMat3:$H,getAxisAngle:v3e,identity:y3e,invert:kH,len:R3e,length:CH,lerp:P3e,mul:I3e,multiply:EH,normalize:K7,random:S3e,rotateX:b3e,rotateY:w3e,rotateZ:_3e,rotationTo:AH,scale:A3e,set:$3e,setAxes:G3e,setAxisAngle:MH,slerp:$b,sqlerp:j3e,sqrLen:L3e,squaredLength:IH,str:E3e},Symbol.toStringTag,{value:"Module"}));function lw(t,e,i=null){return i!=null?[t,e,i]:[t,e]}function ti(t,e,i=null){return i!=null?{x:t,y:e,z:i}:{x:t,y:e}}let OH=class{constructor(e){this.spatialReference=e}mapToLocalMultiple(e){return e.map(i=>this.mapToLocal(i)).filter(ji)}get doUnnormalization(){return!1}};class PH extends OH{constructor(e,i,n=null){super(i),this._defaultZ=n,this.transform=Yo(),this.transformInv=Yo(),this.transform=nz(e),a3(this.transformInv,this.transform)}makeMapPoint(e,i){return lw(e,i,this._defaultZ)}mapToLocal(e){return ti(this.transform[0]*e[0]+this.transform[2]*e[1]+this.transform[4],this.transform[1]*e[0]+this.transform[3]*e[1]+this.transform[5])}localToMap(e){return lw(this.transformInv[0]*e.x+this.transformInv[2]*e.y+this.transformInv[4],this.transformInv[1]*e.x+this.transformInv[3]*e.y+this.transformInv[5],this._defaultZ)}}let H3e=class extends OH{constructor(e,i){super(e.spatialReference),this.view=e,this.defaultZ=null,this.pWS=Se(),this.tangentFrameUpWS=Se(),this.tangentFrameRightWS=Se(),this.tangentFrameForwardWS=Se(),this.localFrameRightWS=Se(),this.localFrameUpWS=Se(),this.worldToLocalTransform=Kd(),this.localToWorldTransform=Kd(),this.scale=1,this.scale=e.resolution,this.referenceMapPoint=i,this.defaultZ=i.hasZ?i.z:null;const n=e.state.camera.viewRight;this.view.renderCoordsHelper.toRenderCoords(this.referenceMapPoint,this.pWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,Zo.X,this.tangentFrameRightWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,Zo.Y,this.tangentFrameUpWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,Zo.Z,this.tangentFrameForwardWS);const s=Se();xr(s,this.tangentFrameForwardWS,xt(n,this.tangentFrameForwardWS)),di(this.localFrameRightWS,n,s),Ln(this.localFrameRightWS,this.localFrameRightWS),rn(this.localFrameUpWS,this.tangentFrameForwardWS,this.localFrameRightWS),AH(this.worldToLocalTransform,this.localFrameRightWS,this.tangentFrameRightWS),kH(this.localToWorldTransform,this.worldToLocalTransform)}get doUnnormalization(){return this.view.viewingMode==="global"}makeMapPoint(e,i){return lw(e,i,this.defaultZ)}mapToLocal(e){const i=Se();this.view.renderCoordsHelper.toRenderCoords(new De({x:e[0],y:e[1],spatialReference:this.spatialReference}),i),dx(i,i,this.worldToLocalTransform);const n=this.view.renderCoordsHelper.fromRenderCoords(i,new De({spatialReference:this.view.spatialReference}));return n!=null?ti(n.x/this.scale,n.y/this.scale):null}localToMap(e){const i=Se();this.view.renderCoordsHelper.toRenderCoords(new De({x:e.x*this.scale,y:e.y*this.scale,spatialReference:this.spatialReference}),i),dx(i,i,this.localToWorldTransform);const n=this.view.renderCoordsHelper.fromRenderCoords(i,new De({spatialReference:this.view.spatialReference}));return n!=null?lw(n.x,n.y,this.defaultZ):null}};function Jke(t,e){if(t.type==="2d")return new PH(t.state.transform,t.spatialReference,e.length>2?e[2]:null);if(t.type==="3d"){const i=e.length>2?new De({x:e[0],y:e[1],z:e[2],spatialReference:t.spatialReference}):new De({x:e[0],y:e[1],spatialReference:t.spatialReference});return new H3e(t,i)}return null}function Md(t,e){const i=new De({x:t[0],y:t[1],spatialReference:e});return t.length>2&&(i.z=t[2]),i}function Kke(t,e){return new y0({points:t,spatialReference:e})}function Yke(t,e,i){const n=new br({paths:t,spatialReference:e});return i&&rP(n),n}function H3(t,e,i,n=!0){const s=_e(t);s.forEach(f=>{const m=f[0],v=f[f.length-1];Za(m,v)&&f.length!==1||f.push(f[0])});let h=new En({rings:s,spatialReference:e});return h.rings.forEach(f=>{$w(f)||f.reverse()}),i&&rP(h),n&&h.isSelfIntersecting&&vr(e)&&(h=qV(h)),h}function B3e(t,e,i){const n=e.mapToLocalMultiple(t),s=[],h={x:n[0].x,y:n[0].y},f={x:n[1].x,y:n[1].y},m=Math.round(f.x-h.x),v=Math.round(f.y-h.y),x=Math.max(Math.abs(m),Math.abs(v));if(i){const M={x:h.x+x,y:h.y+x},$={x:h.x-x,y:h.y-x};s.push(ti(M.x,$.y),ti($.x,$.y),ti($.x,M.y),ti(M.x,M.y))}else{const M={x:m>0?h.x+x:h.x-x,y:v>0?h.y+x:h.y-x};s.push(ti(h.x,h.y),ti(M.x,h.y),ti(M.x,M.y),ti(h.x,M.y))}return RH(H3([s.map(M=>e.localToMap(M)).filter(ji)],e.spatialReference,e.doUnnormalization,!0),s,e)}function U3e(t,e,i){let n=e.mapToLocalMultiple(t);if(n.length===1){const v=n[0];n=[ti(v.x-48,v.y+48),ti(v.x+48,v.y-48),ti(v.x+48,v.y-48),ti(v.x-48,v.y+48)]}const s=[],h={x:n[0].x,y:n[0].y},f={x:n[1].x,y:n[1].y};if(i){const m=Math.round(f.x-h.x),v=Math.round(f.y-h.y);s.push(ti(h.x-m,h.y-v),ti(f.x,h.y-v),ti(f.x,f.y),ti(h.x-m,f.y))}else s.push(ti(h.x,h.y),ti(f.x,h.y),ti(f.x,f.y),ti(h.x,f.y));return RH(H3([s.map(m=>e.localToMap(m)).filter(ji)],e.spatialReference,e.doUnnormalization,!0),s,e)}function RH(t,e,i){const n=cv(e[3],e[2],i),s=cv(e[1],e[2],i),h=cv(e[0],e[1],i),f=cv(e[0],e[3],i);return{geometry:t,midpoints:n!=null&&s!=null&&h!=null&&f!=null?{top:n,right:s,bottom:h,left:f}:null}}function cv(t,e,i){Op[0]=t.x,Op[1]=t.y,Op[2]=0,Pp[0]=e.x,Pp[1]=e.y,Pp[2]=0,Tm(Op,Op,Pp,.5),hv.x=Op[0],hv.y=Pp[1],hv.z=Pp[2];const n=i.localToMap(hv);return n!=null?Md(n,i.spatialReference):null}const hv=ti(0,0,0),Op=Se(),Pp=Se();function q3e(t,e,i,n){const s=e.mapToLocalMultiple(t);let h=null,f=null;if(i)h=s[0],f=s[1];else{const L=s[0],z=s[1],F=Math.round(z.x-L.x),U=Math.round(z.y-L.y),W=Math.max(Math.abs(F),Math.abs(U));h=ti(F>0?L.x+W/2:L.x-W/2,U>0?L.y+W/2:L.y-W/2),f=ti(Math.abs(F)>Math.abs(U)?h.x-W/2:h.x,Math.abs(F)>Math.abs(U)?h.y:h.y-W/2)}const m=e.localToMap(h),v=e.localToMap(f);if(m==null||v==null)return null;e.doUnnormalization&&sP([[m,v]],e.spatialReference);const x=Md(m,e.spatialReference),M=Md(v,e.spatialReference),$=ir(e.spatialReference);let I=0;if(vr(e.spatialReference))I=$*UV(x,M,null);else{const L=h.x-f.x,z=h.y-f.y;I=$*Math.sqrt(L*L+z*z)*(n||1)}const P=new m3e({center:x,radius:I,radiusUnit:"meters",spatialReference:e.spatialReference});return{geometry:H3(P.rings,P.spatialReference,!1),center:x,edge:M}}function W3e(t,e,i){const n=e.mapToLocalMultiple(t),s=n[0],h=n[1],f=Math.round(h.x-s.x),m=Math.round(h.y-s.y),v=ti(i?s.x:s.x+f/2,i?s.y:s.y+m/2),x=i?f:f/2,M=i?m:m/2,$=60,I=[],P=2*Math.PI/$;function L(ie){const le=Math.cos(ie),de=Math.sin(ie);return ti(x*le+v.x,M*de+v.y)}for(let ie=0;ie<$;ie++)I.push(L(ie*P));I.push(I[0]);const{spatialReference:z,doUnnormalization:F}=e,U=H3([I.map(ie=>e.localToMap(ie)).filter(ji)],z,F,!1),W=e.localToMap(L(Math.PI/2)),K=e.localToMap(L(0)),J=e.localToMap(L(-Math.PI/2)),te=e.localToMap(L(Math.PI));return{geometry:U,midpoints:W!=null&&K!=null&&J!=null&&te!=null?{top:Md(W,z),right:Md(K,z),bottom:Md(J,z),left:Md(te,z)}:null}}var fd;(function(t){t[t.WhenToolEditable=0]="WhenToolEditable",t[t.WhenToolNotEditable=1]="WhenToolNotEditable",t[t.Always=2]="Always"})(fd||(fd={}));let Z3e=class{constructor(){this._isToolEditable=!0,this._manipulators=new Pe,this._resourceContexts={manipulator3D:{}},this._attached=!1}set isToolEditable(e){this._isToolEditable=e}get length(){return this._manipulators.length}add(e,i=fd.WhenToolEditable){this.addMany([e],i)}addMany(e,i=fd.WhenToolEditable){for(const n of e){const s={manipulator:n,visibilityPredicate:i,attached:!1};this._manipulators.add(s),this._attached&&this._updateManipulatorAttachment(s)}}remove(e){for(let i=0;i<this._manipulators.length;i++)if(this._manipulators.at(i).manipulator===e){const n=this._manipulators.splice(i,1)[0];this._detachManipulator(n);break}}removeAll(){this._manipulators.forEach(e=>{this._detachManipulator(e)}),this._manipulators.removeAll()}attach(){this._manipulators.forEach(e=>{this._updateManipulatorAttachment(e)}),this._attached=!0}detach(){this._manipulators.forEach(e=>{this._detachManipulator(e)}),this._attached=!1}destroy(){this.detach(),this._manipulators.forEach(({manipulator:e})=>e.destroy()),this._manipulators.destroy(),this._resourceContexts=null}on(e,i){return this._manipulators.on(e,n=>{i(n)})}forEach(e){for(const i of this._manipulators.items)e(i)}some(e){return this._manipulators.items.some(e)}toArray(){const e=[];return this.forEach(i=>e.push(i.manipulator)),e}intersect(e,i){let n=null,s=Number.MAX_VALUE;return this._manipulators.forEach(({manipulator:h,attached:f})=>{if(!f||!h.interactive)return;const m=h.intersectionDistance(e,i);m!=null&&m<s&&(s=m,n=h)}),n}_updateManipulatorAttachment(e){this._isManipulatorItemVisible(e)?this._attachManipulator(e):this._detachManipulator(e)}_attachManipulator(e){e.attached||(e.manipulator.attach&&e.manipulator.attach(this._resourceContexts),e.attached=!0)}_detachManipulator(e){if(!e.attached)return;const i=e.manipulator;i.grabbing=!1,i.dragging=!1,i.hovering=!1,i.selected=!1,i.detach&&i.detach(this._resourceContexts),e.attached=!1}_isManipulatorItemVisible(e){return e.visibilityPredicate===fd.Always||(this._isToolEditable?e.visibilityPredicate===fd.WhenToolEditable:e.visibilityPredicate===fd.WhenToolNotEditable)}},On=class extends Re{constructor(e){super(e),this.manipulators=new Z3e,this.automaticManipulatorSelection=!0,this.hasGrabbedManipulators=!1,this.hasHoveredManipulators=!1,this.firstGrabbedManipulator=null,this.created=!1,this.removeIncompleteOnCancel=!0,this._editableFlags=new Map([[Zs.MANAGER,!0],[Zs.USER,!0]]),this._creationFinishedResolver=Ts()}get active(){return this.view!=null&&this.view.activeTool===this}set visible(e){this._get("visible")!==e&&(this._set("visible",e),this._syncVisible())}get editable(){return this.getEditableFlag(Zs.USER)}set editable(e){this.setEditableFlag(Zs.USER,e)}get updating(){return!1}get cursor(){return null}get hasFocusedManipulators(){return this.hasGrabbedManipulators||this.hasHoveredManipulators}destroy(){this.manipulators.destroy(),this._set("view",null)}onAdd(){this._syncVisible()}activate(){this.view!=null&&(this.view.focus(),this.onActivate())}deactivate(){this.onDeactivate()}handleInputEvent(e){this.onInputEvent(e)}handleInputEventAfter(e){this.onInputEventAfter(e)}setEditableFlag(e,i){this._editableFlags.set(e,i),this.manipulators.isToolEditable=this.internallyEditable,this._updateManipulatorAttachment(),e===Zs.USER&&this.notifyChange("editable"),this.onEditableChange(),this.onManipulatorSelectionChanged()}getEditableFlag(e){return this._editableFlags.get(e)??!1}whenCreated(){return this._creationFinishedResolver.promise}onManipulatorSelectionChanged(){}onActivate(){}onDeactivate(){}onShow(){}onHide(){}onEditableChange(){}onInputEvent(e){}onInputEventAfter(e){}get internallyEditable(){return this.getEditableFlag(Zs.USER)&&this.getEditableFlag(Zs.MANAGER)}finishToolCreation(){this.created||this._creationFinishedResolver.resolve(this),this._set("created",!0)}_syncVisible(){if(this.initialized){if(this.visible)this._show();else if(this._hide(),this.active)return void(this.view.activeTool=null)}}_show(){this._updateManipulatorAttachment(),this.onShow()}_hide(){this._updateManipulatorAttachment(),this.onHide()}_updateManipulatorAttachment(){this.visible?this.manipulators.attach():this.manipulators.detach()}};_([T({constructOnly:!0})],On.prototype,"view",void 0),_([T({readOnly:!0})],On.prototype,"active",null),_([T({value:!0})],On.prototype,"visible",null),_([T({value:!0})],On.prototype,"editable",null),_([T({readOnly:!0})],On.prototype,"manipulators",void 0),_([T({readOnly:!0})],On.prototype,"updating",null),_([T()],On.prototype,"cursor",null),_([T({readOnly:!0})],On.prototype,"automaticManipulatorSelection",void 0),_([T()],On.prototype,"hasFocusedManipulators",null),_([T()],On.prototype,"hasGrabbedManipulators",void 0),_([T()],On.prototype,"hasHoveredManipulators",void 0),_([T()],On.prototype,"firstGrabbedManipulator",void 0),_([T({readOnly:!0})],On.prototype,"created",void 0),_([T({readOnly:!0})],On.prototype,"removeIncompleteOnCancel",void 0),On=_([Y("esri.views.interactive.InteractiveToolBase")],On);let pr=class extends Re{constructor(e){super(e),this.coordinates=void 0,this.strokeDash=[],this.strokeWidth=1,this.strokeColor=[0,0,0,1],this.strokeDashColor=[255,255,255,1],this.fillColor=[0,0,0,0],this.visible=!0,this.isDecoration=!0}get _strokeStyle(){const e=this.strokeColor;return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]})`}get _strokeBackgroundStyle(){const e=this.strokeDashColor;return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]})`}get _fillStyle(){const e=this.fillColor;return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]})`}get _renderCoordinates(){const e=[];if(!this.coordinates)return{coordinates:e,rect:r2};const i=DJ(PJ(sn(r2),this.coordinates),2*this.strokeWidth);i[0]=Math.floor(i[0]),i[1]=Math.floor(i[1]),i[2]=Math.ceil(i[2]+.5),i[3]=Math.ceil(i[3]+.5);for(const n of this.coordinates)e.push([Math.floor(n[0]-i[0])+.5,Math.floor(n[1]-i[1])+.5]);return e.reverse(),{coordinates:e,rect:i}}render(){const{coordinates:e,rect:i}=this._renderCoordinates,n=vS(i),s=bS(i);return ae("div",{classes:{"esri-outline-overlay-item":!0},styles:{left:i[0]+"px",top:i[1]+"px",width:n+"px",height:s+"px",visibility:this.visible?"visible":"hidden"}},ae("svg",{height:s,styles:{display:"block"},width:n},ae("polygon",{fill:this._fillStyle,points:e.map(([h,f])=>`${h},${f}`).join(" "),stroke:this._strokeBackgroundStyle,"stroke-width":this.strokeWidth}),ae("polygon",{fill:"transparent",points:e.map(([h,f])=>`${h},${f}`).join(" "),stroke:this._strokeStyle,"stroke-dasharray":this.strokeDash.length?this.strokeDash.join(" "):void 0,"stroke-width":this.strokeWidth})))}renderCanvas(){}};_([T()],pr.prototype,"coordinates",void 0),_([T()],pr.prototype,"strokeDash",void 0),_([T()],pr.prototype,"strokeWidth",void 0),_([T()],pr.prototype,"strokeColor",void 0),_([T()],pr.prototype,"strokeDashColor",void 0),_([T()],pr.prototype,"fillColor",void 0),_([T()],pr.prototype,"visible",void 0),_([T()],pr.prototype,"isDecoration",void 0),_([T({readOnly:!0})],pr.prototype,"_strokeStyle",null),_([T({readOnly:!0})],pr.prototype,"_strokeBackgroundStyle",null),_([T({readOnly:!0})],pr.prototype,"_fillStyle",null),_([T({readOnly:!0})],pr.prototype,"_renderCoordinates",null),pr=_([Y("esri.views.overlay.OutlineOverlayItem")],pr);const J3e=pr;let hs=class extends ln.EventedMixin(On){constructor(e){super(e),this._overlayItem=void 0,this.geometryType=null,this.mode=null,this.type="draw-screen"}initialize(){this.drawOperation=this._makeDrawOperation();const e=i=>this.drawOperation.on(i,n=>{this._updateVisuals(),this.emit(i,n)});this.addHandles([e("vertex-add"),e("vertex-remove"),e("vertex-update"),e("cursor-update"),e("complete")]),this.finishToolCreation()}destroy(){this.drawOperation=yt(this.drawOperation),this._set("view",null)}get canRedo(){return this.drawOperation.canRedo}get canUndo(){return this.drawOperation.canUndo}set centeredToggled(e){this._set("centeredToggled",e),this._updateVisuals()}set enabled(e){this.drawOperation.interactive=e,this._set("enabled",e)}set uniformSizeToggled(e){this._set("uniformSizeToggled",e),this._updateVisuals()}get updating(){var e;return((e=this.drawOperation)==null?void 0:e.updating)??!1}get cursor(){return this.geometryType==="point"?"default":"crosshair"}completeCreateOperation(){this.drawOperation.complete()}onInputEvent(e){this.destroyed||this.drawOperation.onInputEvent(e)}redo(){this.drawOperation.redo()}undo(){this.drawOperation.undo()}reset(){}_makeDrawOperation(){const{view:e}=this;return new ft({view:e,manipulators:this.manipulators,geometryType:K3e(this.geometryType),drawingMode:this.mode,hasZ:!1,defaultZ:0,snapToSceneEnabled:!1,drawSurface:new S6,hasM:!1,snappingManager:null,snappingVisualizer:null,graphic:null,cursor:this.cursor})}get coordinates(){var f,m,v;const{drawOperation:e}=this;if(!(e!=null&&e.geometryIncludingUncommittedVertices.length))return[];const{coordinateHelper:i}=e,n=e.committableVertex,s=e.committedVertices.slice();n!=null&&s.push(i.pointToArray(n));const h=s.length;switch(this.geometryType){case"circle":case"rectangle":{const x=new PH(rz,S6.spatialReference),M=this.geometryType==="circle"?q3e:B3e,$=this.geometryType==="circle"?W3e:U3e;if(h===1&&e.isCompleted){const I=s[0],P=x.makeMapPoint(I[0]+Y3e,I[1]);return((f=M([I,P],x,!0))==null?void 0:f.geometry.rings[0])??[]}if(h===2){const I=this.geometryType!=="rectangle",P=this.centeredToggled!==I,L=this.geometryType!=="rectangle";return(this.uniformSizeToggled!==L?(m=M(s,x,P))==null?void 0:m.geometry.rings[0]:(v=$(s,x,P))==null?void 0:v.geometry.rings[0])??[]}return[]}}return s}_updateVisuals(){var e;if(!this._overlayItem){const i=new J3e({strokeDash:[5],strokeDashColor:[255,255,255,255]});(e=this.view.overlay)==null||e.addItem(i),this.addHandles(ut(()=>{var n;(n=this.view.overlay)==null||n.removeItem(i),i==null||i.destroy(),this._overlayItem=void 0})),this._overlayItem=i}this._overlayItem.coordinates=this.coordinates}onDeactivate(){this.drawOperation.isCompleted||this.drawOperation.cancel()}};function K3e(t){switch(t){case"polygon":case"point":return t;case"circle":case"rectangle":return"segment"}}_([T({value:!1})],hs.prototype,"centeredToggled",null),_([T()],hs.prototype,"drawOperation",void 0),_([T({value:!0})],hs.prototype,"enabled",null),_([T({value:!1})],hs.prototype,"uniformSizeToggled",null),_([T({constructOnly:!0})],hs.prototype,"geometryType",void 0),_([T({constructOnly:!0})],hs.prototype,"mode",void 0),_([T({readOnly:!0})],hs.prototype,"type",void 0),_([T({readOnly:!0})],hs.prototype,"updating",null),_([T({constructOnly:!0,nonNullable:!0})],hs.prototype,"view",void 0),_([T()],hs.prototype,"cursor",null),hs=_([Y("esri.views.draw.DrawScreenTool")],hs);const Y3e=48;function _5(t,e){return e?"xoffset"in e&&e.xoffset?Math.max(t,Math.abs(e.xoffset)):"yoffset"in e&&e.yoffset?Math.max(t,Math.abs(e.yoffset||0)):t:t}function X3e(t){let e=0,i=0;for(let n=0;n<t.length;n++){const s=t[n].size;typeof s=="number"&&(e+=s,i++)}return e/i}function sI(t,e){var i;return typeof t=="number"?t:(i=t==null?void 0:t.stops)!=null&&i.length?X3e(t.stops):e}function Q3e(t,e){if(!e)return t;const i=e.filter(f=>f.type==="size").map(f=>{const{maxSize:m,minSize:v}=f;return(sI(m,t)+sI(v,t))/2});let n=0;const s=i.length;if(s===0)return t;for(let f=0;f<s;f++)n+=i[f];const h=Math.floor(n/s);return Math.max(h,t)}function LH(t){var h;const e=t==null?void 0:t.renderer,i=t==null?void 0:t.pointerType,n=i==="touch"?9:6;if(!e)return n;const s="visualVariables"in e?Q3e(n,e.visualVariables):n;if(e.type==="simple")return _5(s,e.symbol);if(e.type==="unique-value"){let f=s;return(h=e.uniqueValueInfos)==null||h.forEach(m=>{f=_5(f,m.symbol)}),f}if(e.type==="class-breaks"){let f=s;return e.classBreakInfos.forEach(m=>{f=_5(f,m.symbol)}),f}return e.type==="dot-density"||e.type,s}function NH(t,e,i,n=new Lt){let s=0;if(i.type==="2d")s=e*(i.resolution??0);else if(i.type==="3d"){const M=i.overlayPixelSizeInMapUnits(t),$=i.basemapSpatialReference;s=$==null||$.equals(i.spatialReference)?e*M:ir($)/ir(i.spatialReference)}const h=t.x-s,f=t.y-s,m=t.x+s,v=t.y+s,{spatialReference:x}=i;return n.xmin=Math.min(h,m),n.ymin=Math.min(f,v),n.xmax=Math.max(h,m),n.ymax=Math.max(f,v),n.spatialReference=x,n}function i$e(t,e,i){const n=i.toMap(t);return n==null?!1:NH(n,LH(),i,e_e).intersects(e)}const e_e=new Lt;async function t_e(){return be(()=>import("./geometryEngineJSON-D2MUeDZI.js").then(t=>t.g),__vite__mapDeps([8,9]),import.meta.url)}async function i_e(){return t_e().then(({contains:t,intersects:e,overlaps:i,simplify:n})=>({contains:t,intersects:e,overlaps:i,simplify:n}))}async function n_e(t){const{currentSelection:e,selector:i,signal:n,sources:s,view:h}=t;if(!(s!=null&&s.length))return{added:[],removed:[]};const{layers:f,layerViews:m,graphicsLayers:v}=a_e(s),x=(await bm(Promise.all([s_e(i,f,h,n),o_e(i,m,h,n),r_e(i,v,h)]),n)).flat();if(!e)return{added:x,removed:[]};const M=e.toArray(),$=x.filter(P=>!oI(M,P)),I=M.filter(P=>!oI(x,P));return e.removeMany(I),e.addMany($),{added:$,removed:I}}const r_e=async(t,e,i)=>u_e({candidates:e.flatMap(n=>n.graphics.toArray())??[],selector:t,view:i}),s_e=async(t,e,i,n)=>{const s=await ro(c_e({selector:t,signal:n,layers:e,view:i}));return s?DH(s):[]},o_e=async(t,e,i,n)=>{const s=await ro(l_e({selector:t,signal:n,layerViews:e,view:i}));return s?DH(s):[]};function DH(t){const e=[];for(let i=0;i<t.length;i++){const n=t[i];n.status==="fulfilled"&&e.push(...n.value)}return e}function a_e(t){const e=[],i=[],n=[];return t.forEach(s=>{var h,f;Vv(s)?e.push(s):(FL(s)||jL(s))&&((h=s.layers)!=null&&h.length)?e.push(...s.layers.toArray()):Hte(s)&&((f=s.sublayers)!=null&&f.length)?n.push(...s.sublayers.toArray()):Vte(s)?n.push(s):bb(s)&&i.push(s)}),{layers:e,layerViews:i,graphicsLayers:n}}function oI(t,e){if(t.includes(e))return!0;const i=e.getObjectId(),n=i!=null,{layer:s,uid:h}=e;return n?t.some(f=>{if(s===f.layer)return i===f.getObjectId()}):t.some(f=>{if(s===f.layer)return h===f.uid})}async function l_e(t){const{layerViews:e,selector:i,signal:n,view:s}=t;return bm(Promise.allSettled(e.map(async h=>{const f=h.createQuery(),{geometry:m}=zH(i,h.layer,s);return f.outFields=["*"],f.geometry=m,f.returnGeometry=!0,f.outSpatialReference=s.spatialReference,h.queryFeatures(f,{signal:n}).then(({features:v})=>v)})),n)}async function c_e(t){const{layers:e,selector:i,signal:n,view:s}=t;return bm(Promise.allSettled(e.map(async h=>h.queryFeatures(h_e(h.createQuery(),i,h,s),{signal:n}).then(({features:f})=>f))),n)}function zH(t,e,i){const n="displayField"in e?e.displayField:null,s=ire({displayField:n,fields:e.fields}),h=[e.objectIdField];s!=null&&e.fieldsIndex.has(s)&&h.push(s);const f="renderer"in e?LH({renderer:e.renderer}):0;return{geometry:t.type==="point"?NH(t,f,i):t,outFields:h}}function h_e(t,e,i,n){const{outFields:s,geometry:h}=zH(e,i,n);return t.outFields=s,t.geometry=h,t.returnGeometry=!0,t.outSpatialReference=n.spatialReference,t}async function u_e(t){const{selector:e,candidates:i,view:n}=t;if(!(i!=null&&i.length)||!e)return[];const{spatialReference:s}=n,h=e,f=await i_e();return i.filter(m=>f.intersects(s,h,m.geometry))}const d_e=100;let nd=class extends ln.EventedAccessor{constructor(e){super(e),this._processTask=null,this.options=null,this.selection=new Pe,this.sources=null,this._process=fw(async(i,n)=>{const{callback:s,selector:h,completed:f}=i,m=$m(async v=>{var I;const{sources:x,selection:M,view:$}=this;if(!(!(x!=null&&x.length)&&!($!=null&&$.selectionManager.sources.length))&&$){if(h&&x!=null){const P=await n_e({currentSelection:M,selector:h,signal:v,sources:x,view:$});f&&((I=$.selectionManager)==null||I.updateSelection({current:M.toArray(),...P}))}s&&s()}else M.removeAll()});return ys(n,()=>m.abort()),this._processTask=m,m.promise},d_e)}initialize(){this._setup()}cancel(){var e;this.removeAllHandles(),(e=this._processTask)==null||e.abort()}async _setup(){const{view:e}=this;if(await e.whenReady(),this.destroyed)return;const i=this.options,n=(i==null?void 0:i.createTool)??"rectangle",s=(i==null?void 0:i.mode)??(n==="polygon"?"click":"hybrid"),h=Symbol();this._tool=new hs({view:e,mode:s,geometryType:n}),i!=null&&i.selectOnComplete||this.addHandles(this._tool.on(["cursor-update","vertex-add","vertex-remove"],()=>ro(this._process({selector:this._selectionArea}))),h),this.addHandles([e.on("key-down",f=>{if(!f.repeat)switch(f.key){case ui.constraint:this._tool.uniformSizeToggled=!0,f.stopPropagation();break;case ui.center:this._tool.centeredToggled=!0,f.stopPropagation()}}),e.on("key-up",f=>{switch(f.key){case ui.constraint:this._tool.uniformSizeToggled=!1,f.stopPropagation();break;case ui.center:this._tool.centeredToggled=!1,f.stopPropagation()}}),this._tool.on("complete",async f=>{this.removeHandles(h);const m=()=>{this.removeAllHandles(),this.emit("complete",{aborted:f.aborted,selection:this.selection.toArray()})};f.aborted?(this.cancel(),this.selection.removeAll(),m()):await this._process({selector:this._selectionArea,callback:m,completed:!0})})],h),this.addHandles(ut(()=>e.tools.remove(this._tool))),e.addAndActivateTool(this._tool)}get _selectionArea(){const e=Fi(),i=this._tool.coordinates,n=this.view.spatialReference,s=f=>{e.x=f[0],e.y=f[1];const{x:m,y:v}=this.view.toMap(e);return[m,v]};if(i.length===1){const[f,m]=s(i[0]);return new De({x:f,y:m,spatialReference:n})}const h=this._tool.coordinates.map(s);if(h.length!==0)return $w(h)||h.reverse(),new En({spatialReference:n,rings:[h]})}};_([T()],nd.prototype,"options",void 0),_([T({readOnly:!0})],nd.prototype,"selection",void 0),_([T()],nd.prototype,"sources",void 0),_([T({constructOnly:!0})],nd.prototype,"view",void 0),nd=_([Y("esri.widgets.support.Selector2D.SelectionOperation")],nd);const p_e=nd;let Zl=class extends ln.EventedAccessor{constructor(t){super(t),this._operationHandlesGroup=null,this.activeOperation=null,this.sources=null}initialize(){this.addHandles([Ee(()=>this._sources,t=>{this.activeOperation&&(this.activeOperation.sources=t)})])}destroy(){this._operationHandlesGroup=Rt(this._operationHandlesGroup)}get _sources(){const{sources:t,view:e}=this;return e&&(t!=null&&t.length)?t.flatMap(i=>{if(bb(i))return i;if(FL(i)||jL(i)){const s=i.layers||[],h=s.map(f=>{const m=bC(e,f)||void 0;return bb(m)?m:f});return h.length?h.toArray():s.length?s.toArray():i}const n=bC(e,i)||void 0;return bb(n)?n:i}):[]}get layers(){return Ob(Ce.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.sources}set layers(t){Ob(Ce.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.sources=t}get state(){const{_sources:t,view:e}=this,i=!(t!=null&&t.length)&&!(e!=null&&e.selectionManager.sources.length);return this.activeOperation?"active":e!=null&&e.ready&&!i?"ready":"disabled"}cancel(){var t;this.state==="active"&&((t=this.activeOperation)==null||t.cancel(),this._set("activeOperation",null))}activate(t){const{_sources:e,state:i,view:n}=this,s=!(e!=null&&e.length)&&!(n!=null&&n.selectionManager.sources.length);if(i==="disabled"||s||!this.view)return;i==="active"&&this.cancel();const h=new p_e({view:this.view,sources:e,options:t});return this._operationHandlesGroup=Sc([h.selection.on("change",f=>this.emit("selection-change",f)),h.once("complete",f=>this._onOperationComplete(f))]),this._set("activeOperation",h),h}_onOperationComplete(t){this._operationHandlesGroup=Rt(this._operationHandlesGroup),this._set("activeOperation",null),this.emit("complete",t)}};_([T()],Zl.prototype,"_sources",null),_([T({readOnly:!0})],Zl.prototype,"activeOperation",void 0),_([T()],Zl.prototype,"layers",null),_([T()],Zl.prototype,"sources",void 0),_([T({readOnly:!0})],Zl.prototype,"state",null),_([T()],Zl.prototype,"view",void 0),Zl=_([Y("esri.widgets.support.SelectionToolbar.SelectionToolbarViewModel")],Zl);const f_e=Zl,aI={lassoTool:!0,rectangleTool:!0},g_e={createTool:"polygon",mode:"freehand"},m_e={createTool:"rectangle"},x5="esri-selection-toolbar",S5={base:x5,container:`${x5}__container`,toolButton:`${x5}__tool-button`};let Lr=class extends Cs{constructor(e,i){super(e,i),this._viewModelHandlesGroup=null,this.activeToolInfo=null,this.messages=null,this.toolConfigs=[],this.viewModel=new f_e,this.visibleElements={...aI},this._viewModelHandlesGroup=Sc([this.viewModel.on("complete",n=>{this._set("activeToolInfo",null),this.emit("complete",n)})])}destroy(){this._viewModelHandlesGroup=Rt(this._viewModelHandlesGroup)}loadDependencies(){return cl({action:()=>be(()=>import("./calcite-action-DRgqJUGS.js"),[],import.meta.url),icon:()=>be(()=>import("./calcite-icon-BSz57Dah.js"),[],import.meta.url)})}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get layers(){return Ob(Ce.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.viewModel.sources}set layers(e){Ob(Ce.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.viewModel.sources=e}get sources(){return this.viewModel.sources}set sources(e){this.viewModel.sources=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}castVisibleElements(e){return{...aI,...e}}get visibleToolCount(){const{view:e,toolConfigs:i,visibleElements:n}=this;return((i==null?void 0:i.length)??0)+((e==null?void 0:e.type)==="2d"?(n.lassoTool?1:0)+(n.rectangleTool?1:0):0)}activate(e){if(this.cancel(),this.viewModel.state!=="disabled")switch(e){case"lasso":this._activateTool("lasso");break;case"rectangle":this._activateTool("rectangle");break;default:this._activateTool(e)}}cancel(){this.viewModel.cancel(),this._set("activeToolInfo",null)}render(){return ae("div",{"aria-label":this.label,class:this.classes(S5.base,Ye.widget)},ae("div",{class:S5.container},this._renderDefaultTools(),this._renderCustomTools()))}_renderDefaultTools(){var e;if(((e=this.view)==null?void 0:e.type)==="2d")return[this._renderRectangleTool(),this._renderLassoTool()]}_renderCustomTools(){var e;if((e=this.toolConfigs)!=null&&e.length)return this.toolConfigs.map(({toolName:i,icon:n})=>{var s;return ae("calcite-action",{active:((s=this.activeToolInfo)==null?void 0:s.toolName)===i,bind:this,class:S5.toolButton,disabled:this.viewModel.state==="disabled",onclick:()=>this._onCustomToolClick(i),scale:"s",text:i,title:i},ae("calcite-icon",{icon:n||"selection",scale:"s"}))})}_renderLassoTool(){const{activeToolInfo:e,messages:i,visibleElements:n}=this;if(!n.lassoTool)return;const s=i.selectByLasso;return ae("calcite-action",{active:(e==null?void 0:e.toolName)==="lasso",bind:this,disabled:this.viewModel.state==="disabled",onclick:this._onLassoToolClick,scale:"s",text:s,title:s},ae("calcite-icon",{icon:"lasso-select",scale:"s"}))}_renderRectangleTool(){const{activeToolInfo:e,messages:i,visibleElements:n}=this;if(!n.rectangleTool)return;const s=i.selectByRectangle;return ae("calcite-action",{active:(e==null?void 0:e.toolName)==="rectangle",bind:this,disabled:this.viewModel.state==="disabled",onclick:this._onRectangleToolClick,scale:"s",text:s,title:s},ae("calcite-icon",{icon:"cursor-marquee",scale:"s"}))}_onCustomToolClick(e){this._toggleTool(e)}_onLassoToolClick(){this._toggleTool("lasso")}_onRectangleToolClick(){this._toggleTool("rectangle")}_activateTool(e){const i=this._getToolOptions(e);if(!i)return;const n=this.viewModel.activate(i);n&&this._set("activeToolInfo",{toolName:e,operation:n})}_toggleTool(e){if(this.activeToolInfo){const i=this.activeToolInfo.toolName;if(this.cancel(),i===e)return}this._activateTool(e)}_getToolOptions(e){return e==="lasso"?g_e:e==="rectangle"?m_e:this.toolConfigs.find(i=>i.toolName===e)}};_([T({readOnly:!0})],Lr.prototype,"activeToolInfo",void 0),_([T()],Lr.prototype,"label",null),_([T()],Lr.prototype,"layers",null),_([T(),Sr("esri/widgets/support/SelectionToolbar/t9n/SelectionToolbar")],Lr.prototype,"messages",void 0),_([T()],Lr.prototype,"sources",null),_([T()],Lr.prototype,"toolConfigs",void 0),_([T()],Lr.prototype,"view",null),_([T()],Lr.prototype,"viewModel",void 0),_([T()],Lr.prototype,"visibleElements",void 0),_([qi("visibleElements")],Lr.prototype,"castVisibleElements",null),_([T()],Lr.prototype,"visibleToolCount",null),Lr=_([Y("esri.widgets.support.SelectionToolbar")],Lr);const y_e=Lr,v_e={absolute:"absolute-direction",relative:"relative-direction"},FH=()=>Promise.all([cl({icon:()=>be(()=>import("./calcite-icon-BSz57Dah.js"),[],import.meta.url),label:()=>be(()=>import("./calcite-label-CkkuqRud.js"),[],import.meta.url),switch:()=>be(()=>import("./calcite-switch-CgUzMTIJ.js"),[],import.meta.url),tooltip:()=>be(()=>Promise.resolve().then(()=>Dge),void 0,import.meta.url)})]),uv="esri-labeled-switch",dv={label:`${uv}__label`,labelContent:`${uv}__label-content`,icon:`${uv}__icon`,tooltip:`${uv}__tooltip`};function Lg({checked:t,disabled:e,hint:i,key:n,label:s,onChange:h}){return ae("calcite-label",{class:dv.label,disabled:e,key:n,layout:"inline-space-between",scale:"s"},ae("div",{class:dv.labelContent,key:"label-content"},i?ae(bde,null,ae("div",null,s),ae("calcite-icon",{class:dv.icon,icon:"information",id:n,scale:"s"}),ae("calcite-tooltip",{class:dv.tooltip,referenceElement:n},i)):s),ae("calcite-switch",{checked:t,disabled:e,scale:"s",onCalciteSwitchChange:f=>h(f.target.checked)}))}let rd=class extends Re{constructor(e){super(e),this.directionModePicker=!1,this.header=!1,this.labelsToggle=!0,this.tooltipsToggle=!0}};_([T({type:Boolean,nonNullable:!0})],rd.prototype,"directionModePicker",void 0),_([T({type:Boolean,nonNullable:!0})],rd.prototype,"header",void 0),_([T({type:Boolean,nonNullable:!0})],rd.prototype,"labelsToggle",void 0),_([T({type:Boolean,nonNullable:!0})],rd.prototype,"tooltipsToggle",void 0),rd=_([Y("esri.widgets.support.SketchTooltipControls.VisibleElements")],rd);const jH=rd,u1="esri-sketch-tooltip-controls",pv={base:u1,block:`${u1}__block`,blockContent:`${u1}__block-content`,hintIcon:`${u1}__hint-icon`,radioButtonLabelWrapper:`${u1}__radio-button-label-wrapper`};let _h=class extends Cs{constructor(e,i){super(e,i),this.viewModel=null,this.visibleElements=new jH,this.sketchOptions=new k3,this.viewType=void 0,this._onTooltipsEnabledChange=n=>{this.sketchOptions.tooltips.enabled=n},this._onLabelsEnabledChange=n=>{this.sketchOptions.labels.enabled=n},this._onDirectionModeChange=n=>{this.sketchOptions.values.directionMode=n.target.selectedItem.value}}loadDependencies(){return Promise.all([cl({block:()=>be(()=>import("./calcite-block-B_HL1ze2.js"),__vite__mapDeps([315,316]),import.meta.url),label:()=>be(()=>import("./calcite-label-CkkuqRud.js"),[],import.meta.url),icon:()=>be(()=>import("./calcite-icon-BSz57Dah.js"),[],import.meta.url),"radio-button":()=>be(()=>import("./calcite-radio-button-BLBNzT8h.js"),[],import.meta.url),"radio-button-group":()=>be(()=>import("./calcite-radio-button-group-DDcKyPxL.js"),[],import.meta.url)}),FH()])}render(){const{label:e,visibleElements:i}=this,n=this._renderContent();return ae("div",{"aria-label":e,class:this.classes(pv.base,Ye.widget)},n?ae("calcite-block",{class:pv.block,heading:i.header?this.label:"",key:"content-block",open:!0},ae("div",{class:pv.blockContent,key:"content"},n)):void 0)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}_renderContent(){const{visibleElements:e,viewType:i}=this,n=[e.tooltipsToggle?this._renderTooltipsToggle():null,e.labelsToggle&&i!=="2d"?this._renderLabelsToggle():null,e.directionModePicker?this._renderDirectionModePicker():null].filter(ji);return n.length===0?null:n}_renderTooltipsToggle(){const{messages:e,sketchOptions:i}=this;return ae(Lg,{checked:i.tooltips.effectiveEnabled,hint:e.tooltipsToggleHint,key:`${this.id}__tooltips`,label:e.tooltipsToggle,onChange:this._onTooltipsEnabledChange})}_renderLabelsToggle(){const{messages:e,sketchOptions:i}=this;return ae(Lg,{checked:i.labels.enabled,hint:e.labelsToggleHint,key:`${this.id}__labels`,label:e.labelsToggle,onChange:this._onLabelsEnabledChange})}_renderDirectionModePicker(){const{messages:e,sketchOptions:i}=this,{directionMode:n}=i.values;return ae("calcite-label",{key:"direction-mode",layout:"default",scale:"s"},e.directionModePicker,ae("calcite-radio-button-group",{key:"radio-button-group",layout:"horizontal",name:this.id,scale:"s",value:n,onCalciteRadioButtonGroupChange:this._onDirectionModeChange},this._renderDirectionModeOption("relative",n,e.directionModeRelative),this._renderDirectionModeOption("absolute",n,e.directionModeAbsolute)))}_renderDirectionModeOption(e,i,n){return ae("calcite-label",{key:e,layout:"inline",scale:"s"},ae("calcite-radio-button",{checked:e===i,scale:"s",value:e}),ae("div",{class:pv.radioButtonLabelWrapper,key:"label-wrapper"},ae("calcite-icon",{icon:v_e[e],scale:"s"}),n))}};_([T()],_h.prototype,"label",null),_([T({type:jH,nonNullable:!0})],_h.prototype,"visibleElements",void 0),_([T(),Sr("esri/widgets/support/SketchTooltipControls/t9n/SketchTooltipControls")],_h.prototype,"messages",void 0),_([T({nonNullable:!0,type:k3})],_h.prototype,"sketchOptions",void 0),_([T({type:String})],_h.prototype,"viewType",void 0),_h=_([Y("esri.widgets.support.SketchTooltipControls")],_h);const b_e=_h,w_e={hide:"hide",hideChildren:"hide-children"};function cw(t){return(t==null?void 0:t.listMode)??void 0}function __e(t){if(!t)return"inherited";const e=x_e(VH(t)?t.layer:t);return e!=null?e?"independent":"inherited":"visibilityMode"in t&&t.visibilityMode!=null?t.visibilityMode:"independent"}function GH(t){if(t&&(!("type"in t)||t.type!=="wmts"))return"sublayers"in t?"sublayers":"layers"in t?"layers":void 0}function Y7(t){return cw(t)!==w_e.hide}function lI(t){const e=t==null?void 0:t.layer;return e&&"layers"in e?e.layers:null}function VH(t){return t!=null&&"layer"in t&&t.layer!=null}function x_e(t){const e=S_e(t);return e!=null&&"supportsSublayerVisibility"in e?e.supportsSublayerVisibility:void 0}function S_e(t){return t&&"capabilities"in t&&t.capabilities!=null&&"exportMap"in t.capabilities?t.capabilities.exportMap:void 0}var M6;let xh=M6=class extends Rm{constructor(t){super(t),this.displayValueEnabled=!1,this.max=1,this.min=0,this.step=.1,this.type="slider",this.value=null}clone(){return new M6({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,displayValueEnabled:this.displayValueEnabled,max:this.max,min:this.min,step:this.step,value:this.value})}};_([T()],xh.prototype,"displayValueEnabled",void 0),_([T()],xh.prototype,"max",void 0),_([T()],xh.prototype,"min",void 0),_([T()],xh.prototype,"step",void 0),_([T()],xh.prototype,"value",void 0),xh=M6=_([Y("esri.support.actions.ActionSlider")],xh);const T_e=xh;let Pn=class extends np(Cs){constructor(e,i){super(e,i),this._legend=null,this.className=null,this.content=null,this.flowEnabled=!1,this.image=null,this.listItem=null,this.open=!1,this.visible=!0}initialize(){this.addHandles([Ee(()=>this._canCreateLegend,()=>this._createLegend(),Pt),Ee(()=>[this._legend,this._legendOptions],()=>this._updateLegend(),Pt)])}destroy(){this._legend=yt(this._legend)}get _canCreateLegend(){const{content:e,listItem:i}=this;if(!i)return!1;const n="legend";return e===n||e!=null&&!!Array.isArray(e)&&e.includes(n)}get _legendOptions(){const{listItem:e,_legendLayerInfo:i}=this,n=e==null?void 0:e.view;return i&&n?{view:n,layerInfos:[i]}:{}}get _legendLayerInfo(){var f;const e=(f=this.listItem)==null?void 0:f.layer;if(!e||e.type==="subtype-sublayer")return null;const i=VH(e)?e:null,n=e==null?void 0:e.parent,s=n!=null&&"type"in n&&n.type==="map-image"?i==null?void 0:i.source:null,h="";return s&&n?{layer:n,title:h,sublayerIds:[s.mapLayerId]}:{layer:e,title:h}}get disabled(){var s;const{listItem:e,_legend:i,content:n}=this;return!e||!(Array.isArray(n)&&n.length>1)&&!!i&&(!((s=i.activeLayerInfos)!=null&&s.length)||!e.visibleAtCurrentScale||!e.visible)}set disabled(e){this._overrideIfSome("disabled",e)}get icon(){const{image:e}=this,i=this._getFirstWidget();return this._get("icon")??(!e&&i?i.icon:null)}set icon(e){this._overrideIfSome("icon",e)}get title(){var e;return this._get("title")||(((e=this._getFirstWidget())==null?void 0:e.label)??"")}set title(e){this._override("title",e)}render(){return ae("div",{class:"esri-list-item-panel"},this._renderContents())}_renderContent(e){const{_legend:i,disabled:n,open:s}=this;return e&&!n&&s?e==="legend"&&i?ae("div",{key:"legend-widget"},i.render()):typeof e=="string"?ae("div",{innerHTML:e,key:e}):Cg(e)?ae("div",{key:"content-widget"},e.render()):e instanceof HTMLElement?ae("div",{afterCreate:this._attachToNode,bind:e,key:"content-element"}):null:null}_renderContents(){const{content:e,open:i}=this;return i?Array.isArray(e)?e.map(n=>this._renderContent(n)):this._renderContent(e):null}async _createLegend(){if(yt(this._legend),this._legend=null,!this._canCreateLegend)return;const{default:e}=await be(()=>import("./Legend-jntMEjYM.js"),__vite__mapDeps([317,238,205,259,234,106,139,140,101,110,141,142,143,87,31,144,23,145,28,26,146,108,85,2,3,304,72,138,136,137,4,147,148]),import.meta.url),i=new e(this._legendOptions);this._legend=i}_attachToNode(e){e.appendChild(this)}_updateLegend(){const e=this._legend;e&&e.set(this._legendOptions)}_getWidget(e){return e==="legend"?this._legend:Cg(e)?e:null}_getFirstWidget(){const{content:e}=this;return Array.isArray(e)?e.map(i=>this._getWidget(i)).find(i=>i):this._getWidget(e)}};_([T()],Pn.prototype,"_legend",void 0),_([T()],Pn.prototype,"_canCreateLegend",null),_([T()],Pn.prototype,"_legendOptions",null),_([T()],Pn.prototype,"_legendLayerInfo",null),_([T()],Pn.prototype,"className",void 0),_([T()],Pn.prototype,"content",void 0),_([T()],Pn.prototype,"disabled",null),_([T()],Pn.prototype,"flowEnabled",void 0),_([T()],Pn.prototype,"icon",null),_([T()],Pn.prototype,"image",void 0),_([T()],Pn.prototype,"listItem",void 0),_([T()],Pn.prototype,"open",void 0),_([T()],Pn.prototype,"title",null),_([T()],Pn.prototype,"visible",void 0),Pn=_([Y("esri.widgets.LayerList.ListItemPanel")],Pn);const HH=Pn;var lg;const M_e=Pe.ofType({key:"type",defaultKeyValue:"button",base:Rm,typeMap:{button:zN,toggle:FN,slider:T_e}}),BH=Pe.ofType(M_e),T5="layer",fv="child-list-mode",E_e="hide";let Bt=lg=class extends np(Re){constructor(t){super(t),this.actionsSections=new BH,this.actionsOpen=!1,this.checkPublishStatusEnabled=!1,this.children=new(Pe.ofType(lg)),this.childrenSortable=!0,this.hidden=!1,this.layer=null,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.open=!1,this.panel=null,this.parent=null,this.view=null}initialize(){if(this.addHandles([Ee(()=>{var t;return[this.layer,(t=this.layer)==null?void 0:t.listMode,this.listModeDisabled]},()=>this._watchLayerProperties(this.layer),Pt),Ee(()=>this.checkPublishStatusEnabled,t=>this._updateChildrenPublishing(t),Pt),Ee(()=>this.view,t=>this._updateChildrenView(t),Pt),Ee(()=>this.panel,t=>this._setListItemOnPanel(t),Pt)]),typeof this.listItemCreatedFunction=="function"){const t={item:this};this.listItemCreatedFunction.call(null,t)}}destroy(){var t;(t=this.panel)==null||t.destroy(),this.children.destroyAll(),this.view=null}get connectionStatus(){const{layerView:t,publishing:e}=this;if(!e&&t&&"connectionStatus"in t)return t.connectionStatus}get error(){var t;return(t=this.layer)==null?void 0:t.loadError}get incompatible(){const{layerView:t}=this;return!(!t||!("spatialReferenceSupported"in t))&&!t.spatialReferenceSupported}get layerView(){const{layer:t,view:e}=this;if(!t||!e||t.type==="sublayer")return null;const i=t.type==="subtype-sublayer"?t.parent:t;return e.allLayerViews.find(n=>n.layer===i)??null}castPanel(t){var e;return(e=this.panel)!=null&&e.open&&!t.hasOwnProperty("open")&&(t.open=!0),t?new HH(t):null}get sortable(){var t;return((t=this.layer)==null?void 0:t.type)!=="knowledge-graph-sublayer"&&this._get("sortable")}set sortable(t){this._set("sortable",t)}get title(){const t=Br(this,"layer.layer");return(!t||t&&Br(this,"layer.layer.loaded"))&&Br(this,"layer.title")||Br(this,"layer.attributes.title")||""}set title(t){this._override("title",t)}get publishing(){var i;const{layer:t,checkPublishStatusEnabled:e}=this;return e&&t&&"publishingInfo"in t&&((i=t.publishingInfo)==null?void 0:i.status)==="publishing"}get updating(){const{layerView:t,connectionStatus:e,layer:i,publishing:n}=this;return!n&&!e&&(t?t.updating:(i==null?void 0:i.loadStatus)==="loading"||!1)}get visible(){var t;return(t=this.layer)==null?void 0:t.visible}set visible(t){const e=this.layer;e&&(e.visible=t)}get visibleAtCurrentScale(){var t;return((t=this.layerView)==null?void 0:t.visibleAtCurrentScale)??!0}get visibleAtCurrentTimeExtent(){var t;return((t=this.layerView)==null?void 0:t.visibleAtCurrentTimeExtent)??!0}get visibilityMode(){return __e(this.layer)}clone(){return new lg({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,checkPublishStatusEnabled:this.checkPublishStatusEnabled,children:this.children.clone(),childrenSortable:this.childrenSortable,hidden:this.hidden,layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,open:this.open,panel:this.panel,parent:this.parent,sortable:this.sortable,title:this.title,view:this.view,visible:this.visible})}_setListItemOnPanel(t){t&&(t.listItem=this)}_updateChildrenPublishing(t){const e=this.children;e&&e.forEach(i=>i.checkPublishStatusEnabled=t)}_updateChildrenView(t){const e=this.children;e&&e.forEach(i=>i.view=t)}_createChildren(t){const{listModeDisabled:e,children:i}=this,n=t.filter(s=>!i.some(h=>h.layer===s));i.addMany(this._createChildItems(n,e))}_destroyChildren(t){const{children:e}=this,i=e.filter(n=>!t.includes(n.layer));e.destroyMany(i)}_sortChildren(t){this.children.sort((e,i)=>t.indexOf(i.layer)-t.indexOf(e.layer))}_destroyAllChildren(){this.removeHandles(fv),this.children.destroyAll()}_watchChildLayerListMode(t){this.removeHandles(fv),this.listModeDisabled||this.addHandles(t.toArray().map(e=>Ee(()=>e.listMode,()=>this._compileChildren(t))),fv)}_compileChildren(t){const e=this.listModeDisabled?t:t==null?void 0:t.filter(i=>cw(i)!==E_e);e!=null&&e.length?(this._createChildren(e),this._destroyChildren(e),this._sortChildren(e),this._watchChildLayerListMode(t)):this._destroyAllChildren()}_watchSublayerChanges(t){t&&this.addHandles(t.on("change",()=>this._compileChildren(t)),T5)}_initializeChildLayers(t){this._compileChildren(t),this._watchSublayerChanges(t)}_createChildItems(t,e){return t.map(i=>e||Y7(i)?new lg({layer:i,checkPublishStatusEnabled:this.checkPublishStatusEnabled,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,parent:this,view:this.view}):null).filter(ji).reverse()}_watchLayerProperties(t){if(this.removeHandles(T5),this.removeHandles(fv),!t)return;if((!this.listModeDisabled&&cw(t))==="hide-children")return void this.children.destroyAll();const e=GH(t);e&&this.addHandles(Ee(()=>t[e],i=>{t.hasOwnProperty(e)&&this._initializeChildLayers(i)},Pt),T5)}};_([T({type:BH})],Bt.prototype,"actionsSections",void 0),_([T()],Bt.prototype,"actionsOpen",void 0),_([T()],Bt.prototype,"checkPublishStatusEnabled",void 0),_([T({type:Pe})],Bt.prototype,"children",void 0),_([T()],Bt.prototype,"childrenSortable",void 0),_([T({readOnly:!0})],Bt.prototype,"connectionStatus",null),_([T({readOnly:!0})],Bt.prototype,"error",null),_([T()],Bt.prototype,"hidden",void 0),_([T({readOnly:!0})],Bt.prototype,"incompatible",null),_([T()],Bt.prototype,"layer",void 0),_([T({readOnly:!0})],Bt.prototype,"layerView",null),_([T()],Bt.prototype,"listItemCreatedFunction",void 0),_([T({nonNullable:!0})],Bt.prototype,"listModeDisabled",void 0),_([T()],Bt.prototype,"open",void 0),_([T({type:HH})],Bt.prototype,"panel",void 0),_([qi("panel")],Bt.prototype,"castPanel",null),_([T()],Bt.prototype,"parent",void 0),_([T({value:!0})],Bt.prototype,"sortable",null),_([T()],Bt.prototype,"title",null),_([T({readOnly:!0})],Bt.prototype,"publishing",null),_([T({readOnly:!0})],Bt.prototype,"updating",null),_([T()],Bt.prototype,"view",void 0),_([T()],Bt.prototype,"visible",null),_([T({readOnly:!0})],Bt.prototype,"visibleAtCurrentScale",null),_([T({readOnly:!0})],Bt.prototype,"visibleAtCurrentTimeExtent",null),_([T({readOnly:!0})],Bt.prototype,"visibilityMode",null),Bt=lg=_([Y("esri.widgets.LayerList.ListItem")],Bt);const X7=Bt,Co={view:"view",viewLayers:"view-layers",mapLayers:"map-layers",layerViews:"layer-views",layerListMode:"layer-list-mode"},k_e="hide",UH=Pe.ofType(X7);let Oa=class extends ln.EventedAccessor{constructor(e){super(e),this.checkPublishStatusEnabled=!1,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.operationalItems=new UH,this.view=null}initialize(){this.addHandles([Ee(()=>{var e;return((e=this.view)==null?void 0:e.ready)===!0},()=>this._viewHandles(),Pt),Ee(()=>[this.listItemCreatedFunction,this.checkPublishStatusEnabled,this.listModeDisabled],()=>this._recompileList())],Co.view)}destroy(){this._removeAllItems(),this.view=null}get state(){const{view:e}=this;return e!=null&&e.ready?"ready":e?"loading":"disabled"}get totalItems(){return this.operationalItems.flatten(e=>e.children).length}triggerAction(e,i){e&&!e.disabled&&this.emit("trigger-action",{action:e,item:i})}moveListItem(e,i,n,s){var P,L;const h=e==null?void 0:e.layer;if(!h||h.type==="subtype-sublayer"||h.type==="sublayer")return;const f=(L=(P=this.view)==null?void 0:P.map)==null?void 0:L.layers,m=i?lI(i):f,v=n?lI(n):f;if(!m||!v)return;const{operationalItems:x}=this,M=(i==null?void 0:i.children)||x,$=(n==null?void 0:n.children)||x,I=v.length-s;e.parent=n||null,M.remove(e),m.remove(h),$.includes(e)||$.add(e,I),v.includes(h)||v.add(h,I),this._compileList()}_createLayerViewHandles(e){this.removeHandles(Co.layerViews),this._compileList(),e&&this.addHandles(e.on("change",()=>this._compileList()),Co.layerViews)}_createMapLayerHandles(e){this.removeHandles(Co.mapLayers),this._compileList(),e&&this.addHandles(e.on("change",()=>this._compileList()),Co.mapLayers)}_createListItem(e){const{view:i,listItemCreatedFunction:n,checkPublishStatusEnabled:s,listModeDisabled:h}=this;return new X7({checkPublishStatusEnabled:s,listModeDisabled:h,layer:e,listItemCreatedFunction:n,view:i})}_removeAllItems(){this.operationalItems.destroyAll()}_getViewableLayers(e){return e?this.listModeDisabled?e:e.filter(i=>cw(i)!==k_e):void 0}_watchLayersListMode(e){this.removeHandles(Co.layerListMode),e&&!this.listModeDisabled&&this.addHandles(Ee(()=>e.filter(i=>"listMode"in i).map(i=>i.listMode).toArray(),()=>this._compileList()),Co.layerListMode)}_compileList(){var n,s;const e=(s=(n=this.view)==null?void 0:n.map)==null?void 0:s.layers;this._watchLayersListMode(e);const i=this._getViewableLayers(e);i!=null&&i.length?(this._createNewItems(i),this._removeItems(i),this._sortItems(i)):this._removeAllItems()}_createNewItems(e){const{operationalItems:i}=this;e.forEach(n=>{i.some(s=>s.layer===n)||i.add(this._createListItem(n))})}_removeItems(e){const{operationalItems:i}=this,n=[];i.forEach(s=>{s&&e&&e.includes(s.layer)||n.push(s)}),i.destroyMany(n)}_sortItems(e){const{operationalItems:i}=this;i.sort((n,s)=>{const h=e.indexOf(n.layer),f=e.indexOf(s.layer);return h>f?-1:h<f?1:0})}_recompileList(){this._removeAllItems(),this._compileList()}_viewHandles(){const{view:e}=this;this.removeHandles([Co.mapLayers,Co.layerViews,Co.viewLayers]),e!=null&&e.ready?this.addHandles([Ee(()=>{var i,n;return(n=(i=this.view)==null?void 0:i.map)==null?void 0:n.allLayers},i=>this._createMapLayerHandles(i),Pt),Ee(()=>{var i;return(i=this.view)==null?void 0:i.allLayerViews},i=>this._createLayerViewHandles(i),Pt)],Co.viewLayers):this._removeAllItems()}};_([T()],Oa.prototype,"checkPublishStatusEnabled",void 0),_([T()],Oa.prototype,"listItemCreatedFunction",void 0),_([T({nonNullable:!0})],Oa.prototype,"listModeDisabled",void 0),_([T({type:UH})],Oa.prototype,"operationalItems",void 0),_([T({readOnly:!0})],Oa.prototype,"state",null),_([T()],Oa.prototype,"totalItems",null),_([T()],Oa.prototype,"view",void 0),Oa=_([Y("esri.widgets.LayerList.LayerListViewModel")],Oa);const $_e=Oa,Q7=t=>C_e(t)||I_e(t),C_e=t=>{if(!("type"in t))return!1;switch(t.type){case"feature":case"geojson":case"csv":case"graphics":case"wfs":case"map-notes":case"oriented-imagery":case"scene":case"building-scene":case"subtype-sublayer":return!0;default:return!1}},I_e=t=>{const e=GH(t);if(e!=null&&t.hasOwnProperty(e)&&t[e]!=null){for(const i of t[e])if(Q7(i))return!0}return!1},Cb=(t,e)=>e!=null&&t!=null&&(e.test(t.title)?"self":!!t.children.some(i=>Cb(i,e)!==!1)&&"children");var E6;let Jl=E6=class extends X7{constructor(t){super(t),this.children=new Pe,this.parent=null}get enabled(){const{children:t}=this;if(t.length===0)return this.featureSource!=null&&this.featureSource.enabled?"enabled":"disabled";let e=!1,i=!1;for(const n of t){if(n.enabled==="indeterminate")return n.enabled;if(n.enabled==="enabled"?e=!0:n.enabled==="disabled"&&(i=!0),i&&e)return"indeterminate"}return i?"disabled":"enabled"}get childLayerIds(){return this.children.toArray().flatMap(t=>[t.layer.id,...t.childLayerIds])}get featureSource(){const{layer:t,getFeatureSnappingSources:e}=this;return e().find(i=>i.layer===t)}_initializeChildLayers(t){if(!t)return;const e=t.filter(Q7);super._initializeChildLayers(e)}_createChildItems(t){return t.map(e=>Y7(e)?new E6({layer:e,parent:this,view:this.view,getFeatureSnappingSources:this.getFeatureSnappingSources}):null).filter(ji).reverse()}};_([T()],Jl.prototype,"enabled",null),_([T()],Jl.prototype,"children",void 0),_([T()],Jl.prototype,"childLayerIds",null),_([T()],Jl.prototype,"featureSource",null),_([T({constructOnly:!0})],Jl.prototype,"getFeatureSnappingSources",void 0),_([T()],Jl.prototype,"parent",void 0),Jl=E6=_([Y("esri.widgets.support.SnappingControls.SnappingListItem")],Jl);let sd=class extends $_e{constructor(){super(...arguments),this.featureSnappingSources=new Pe}get operationalItemsFlat(){return this.operationalItems.flatten(t=>t.children)}get selectableItems(){return this.operationalItemsFlat.filter(t=>{var e;return!((e=t.children)!=null&&e.length)})}_compileList(){var n,s;const t=(s=(n=this.view)==null?void 0:n.map)==null?void 0:s.layers;if(!t)return;const e=t.filter(Q7);this._watchLayersListMode(e);const i=this._getViewableLayers(e);i!=null&&i.length?(this._createNewItems(i),this._removeItems(i),this._sortItems(i)):this._removeAllItems()}_createListItem(t){return new Jl({layer:t,view:this.view,getFeatureSnappingSources:()=>this.featureSnappingSources})}};_([T()],sd.prototype,"featureSnappingSources",void 0),_([T()],sd.prototype,"operationalItems",void 0),_([T()],sd.prototype,"operationalItemsFlat",null),_([T()],sd.prototype,"selectableItems",null),sd=_([Y("esri.widgets.support.SnappingControls.SnappingLayerListViewModel")],sd);let Pa=class extends Re{constructor(t){super(t),this.layerListViewModel=new sd,this.snappingOptions=new Qm,this.view=null}initialize(){this.addHandles([Ee(()=>({viewModel:this.layerListViewModel,view:this.view}),({viewModel:t,view:e})=>{t.view=e},Pt),Ee(()=>{var t;return{viewModel:this.layerListViewModel,sources:(t=this.snappingOptions)==null?void 0:t.featureSources}},({viewModel:t,sources:e})=>{t.featureSnappingSources=e},Pt)])}get allLayersEnabled(){var t;return(((t=this.layerListViewModel)==null?void 0:t.selectableItems)??[]).every(e=>e.enabled==="enabled")}get allLayersDisabled(){var t;return(((t=this.layerListViewModel)==null?void 0:t.selectableItems)??[]).every(e=>!e.enabled)}get layersEnabledCount(){var t,e;return((e=(t=this.layerListViewModel)==null?void 0:t.selectableItems)==null?void 0:e.filter(i=>i.enabled==="enabled").length)??0}get state(){return this.snappingOptions?"ready":"disabled"}toggleSnappingForLayers(t,e){t==null||t.forEach(i=>e?this.enableSnappingForLayer(i):this.disableSnappingForLayer(i))}toggleSnappingForAllLayers(t){this.layerListViewModel.selectableItems.forEach(({layer:{id:e}})=>{t?this.enableSnappingForLayer(e):this.disableSnappingForLayer(e)})}enableSnappingForLayer(t){const e=this._findSnappingSourceForLayer(t)??this._makeSnappingSourceForLayer(t);e&&(e.enabled=!0)}disableSnappingForLayer(t){const e=this._findSnappingSourceForLayer(t);e&&(e.enabled=!1)}updateEnabledFeatureSources(t){for(const e of this.snappingOptions.featureSources)Y7(e.layer)&&(e.enabled=t.includes(e.layer.id))}_findSnappingSourceForLayer(t){return this.snappingOptions.featureSources.find(e=>e.layer.id===t)}_makeSnappingSourceForLayer(t){var n;const e=(n=this.layerListViewModel.operationalItemsFlat.find(s=>s.layer.id===t))==null?void 0:n.layer;if(!e)throw new fe("snapping-controls:layer-not-found",`cannot enable snapping for layer with id ${t} because no such layer was found in the view`);if(e.type==="group")return;const i=new W7({layer:e});return this.snappingOptions.featureSources.add(i),i}};_([T()],Pa.prototype,"allLayersEnabled",null),_([T()],Pa.prototype,"allLayersDisabled",null),_([T({constructOnly:!0})],Pa.prototype,"layerListViewModel",void 0),_([T()],Pa.prototype,"layersEnabledCount",null),_([T({type:Qm,nonNullable:!0})],Pa.prototype,"snappingOptions",void 0),_([T()],Pa.prototype,"state",null),_([T()],Pa.prototype,"view",void 0),Pa=_([Y("esri.widgets.support.SnappingControls.SnappingControlsViewModel")],Pa);const A_e=Pa,Io="esri-snapping-controls",pa={base:Io,container:`${Io}__container`,item:`${Io}__item`,toggleBlock:`${Io}__toggle-block`,layerListBlock:`${Io}__layer-list-block`,layerList:`${Io}__layer-list`,layerListFilter:`${Io}__layer-list__filter`,layerListButton:`${Io}__layer-list__button`,layerListItem:`${Io}__layer-list__item`,layerListGroup:`${Io}__layer-list__group`,nestedContainer:`${Io}__nested-container`};let Nr=class extends Cs{constructor(t,e){super(t,e),this._defaultViewModel=null,this._layerListFilter=null,this.layerListOpen=!0,this.messages=null,this.visibleElements=new F3,this._enableSnappingSwitchChange=h=>{this.snappingOptions.enabled=h},this._featureEnabledSwitchChange=h=>{this.snappingOptions.featureEnabled=h},this._selfEnabledSwitchChange=h=>{this.snappingOptions.selfEnabled=h},this._onToggleLayersButtonClick=h=>{this.viewModel.toggleSnappingForAllLayers(!this.viewModel.allLayersEnabled),requestAnimationFrame(()=>h.target.setFocus())};const{snappingOptions:i,view:n,viewModel:s}=t;this.viewModel=s??(this._defaultViewModel=new A_e({snappingOptions:i,view:n}))}normalizeCtorArgs(t){const{snappingOptions:e,view:i,viewModel:n,...s}=t;return s}destroy(){this.viewModel!==this._defaultViewModel&&(this._defaultViewModel=yt(this._defaultViewModel))}loadDependencies(){return Promise.all([cl({block:()=>be(()=>import("./calcite-block-B_HL1ze2.js"),__vite__mapDeps([315,316]),import.meta.url),button:()=>be(()=>import("./calcite-button-BQ85dayr.js"),[],import.meta.url),input:()=>be(()=>import("./calcite-input-Cv8wWHZn.js"),[],import.meta.url),list:()=>be(()=>import("./calcite-list-2dXhpAad.js"),__vite__mapDeps([318,319,320]),import.meta.url),"list-item":()=>be(()=>import("./calcite-list-item-D2xj56kv.js"),__vite__mapDeps([321,320,319,316]),import.meta.url),checkbox:()=>be(()=>import("./calcite-checkbox-Bd-KKHvP.js"),[],import.meta.url)}),FH()])}get icon(){return"snap-to-point"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get snappingOptions(){return this.viewModel.snappingOptions}set snappingOptions(t){this.viewModel.snappingOptions=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}set viewModel(t){t!==this._get("viewModel")&&(this._defaultViewModel!=null&&this._defaultViewModel===t||(this._defaultViewModel=yt(this._defaultViewModel)),this._set("viewModel",t))}render(){const{label:t}=this;return ae("div",{"aria-label":t,class:this.classes(pa.base,Ye.widget)},ae("div",{class:pa.container},this._renderContent()))}_renderContent(){return[this._renderToggles(),this._renderLayerList()]}_renderToggles(){const{visibleElements:t}=this,e=[t.selfEnabledToggle?this._renderSelfEnabledToggle():null,t.featureEnabledToggle?this._renderFeatureEnabledToggle():null].filter(ji),i=[t.enabledToggle?this._renderEnabledToggle():null,e.length>0?ae("div",{class:pa.nestedContainer},e):null].filter(ji);return i.length===0?null:ae("calcite-block",{class:pa.toggleBlock,heading:t.header?this.label:"",key:"toggle-block",open:!0},i)}_renderEnabledToggle(){const{messages:t,viewModel:e}=this,{snappingOptions:i}=e;return ae(Lg,{checked:i.enabled,disabled:this._enabledToggleDisabled,key:`${this.id}__enabled-toggle`,label:t.enableSnapping,onChange:this._enableSnappingSwitchChange})}_renderSelfEnabledToggle(){const{messages:t,viewModel:e}=this,{snappingOptions:i}=e,n=i.enabled&&i.selfEnabled;return ae(Lg,{checked:n,disabled:this._secondaryElementsDisabled,key:`${this.id}__self-enabled-toggle`,label:t.geometryGuides,onChange:this._selfEnabledSwitchChange})}_renderFeatureEnabledToggle(){const{messages:t,viewModel:e}=this,{snappingOptions:i}=e,n=i.enabled&&i.featureEnabled;return ae(Lg,{checked:n,disabled:this._secondaryElementsDisabled,key:`${this.id}__feature-enabled-toggle`,label:t.featureToFeature,onChange:this._featureEnabledSwitchChange})}_renderLayerList(){if(!this.visibleElements.layerList)return null;const{messages:t,viewModel:e}=this,i=({target:{value:f}})=>{this._layerListFilter=f===""?null:new RegExp(f,"i")},n=e.layerListViewModel.operationalItems.length>9?ae("calcite-input",{class:pa.layerListFilter,clearable:!0,placeholder:t==null?void 0:t.searchLayers,onCalciteInputInput:i}):null,s=this._secondaryElementsDisabled,h=this.layerListOpen&&!s;return ae("calcite-block",{class:pa.layerListBlock,collapsible:!0,disabled:this._secondaryElementsDisabled,heading:t.snappingLayers,key:"list-block",open:h,onCalciteBlockToggle:f=>this.layerListOpen=f.target.open},n,this._renderToggleLayersButton(),ae("calcite-list",{class:pa.layerList,selectionMode:"none"},this._renderLayerListItemCollection(e.layerListViewModel.operationalItems)))}_renderLayerListItemCollection(t){const e=this._layerListFilter;return t.map(i=>{switch(e?Cb(i,e):null){case"children":{const n=i.children.filter(s=>Cb(s,e)!==!1);return this._renderLayerListItemGroup(i,n)}case"self":case null:return this._renderLayerListItemOrGroup(i);case!1:return Cb(i.parent,e)==="self"?this._renderLayerListItemOrGroup(i):null}}).toArray().filter(ji)}_renderToggleLayersButton(){if(!this.visibleElements.layerListToggleLayersButton)return null;const{viewModel:{allLayersEnabled:t},messages:e}=this,i=t?e.disableAllLayers:e.enableAllLayers;return ae("calcite-button",{appearance:"transparent",class:pa.layerListButton,label:i,name:"layer-toggle",onclick:this._onToggleLayersButtonClick},i)}_renderLayerListItemOrGroup(t){if(t.children.length)return this._renderLayerListItemGroup(t);const{messages:{untitledLayer:e}}=this,i=t.title||e,n=()=>{this.viewModel.toggleSnappingForLayers([t.layer.id],t.enabled!=="enabled")};return ae("calcite-list-item",{class:pa.layerListItem,key:`${this.id}-list-item-${t.uid}`,label:i,onCalciteListItemSelect:s=>{s.stopPropagation(),n()}},ae("calcite-checkbox",{checked:t.enabled==="enabled",slot:"actions-start",onCalciteCheckboxChange:n}))}_renderLayerListItemGroup(t,e){const{children:i,title:n}=t,s=n||this.messages.untitledLayer,h=n&&n!==""?n:_f(),f=!!(e!=null&&e.length),m=e??i,v=()=>{this.viewModel.toggleSnappingForLayers(t.childLayerIds,t.enabled!=="enabled")};return ae("calcite-list-item",{class:pa.layerListGroup,key:h,label:s,open:f,onCalciteListItemSelect:x=>{x.stopPropagation(),v()}},ae("calcite-checkbox",{checked:t.enabled==="enabled",indeterminate:t.enabled==="indeterminate",slot:"actions-start",onCalciteCheckboxChange:v}),ae("calcite-list",null,this._renderLayerListItemCollection(m)))}get _enabledToggleDisabled(){const t=this.snappingOptions;return t.enabledToggled||t.forceDisabled}get _secondaryElementsDisabled(){return this._enabledToggleDisabled||!this.snappingOptions.enabled}};_([T()],Nr.prototype,"_defaultViewModel",void 0),_([T()],Nr.prototype,"_layerListFilter",void 0),_([T()],Nr.prototype,"label",null),_([T({type:Boolean,nonNullable:!0})],Nr.prototype,"layerListOpen",void 0),_([T(),Sr("esri/widgets/support/SnappingControls/t9n/SnappingControls")],Nr.prototype,"messages",void 0),_([T()],Nr.prototype,"snappingOptions",null),_([T()],Nr.prototype,"view",null),_([T()],Nr.prototype,"viewModel",null),_([T({type:F3,nonNullable:!0})],Nr.prototype,"visibleElements",void 0),_([T()],Nr.prototype,"_enabledToggleDisabled",null),_([T()],Nr.prototype,"_secondaryElementsDisabled",null),Nr=_([Y("esri.widgets.support.SnappingControls")],Nr);const O_e=Nr,un="esri-sketch",dn={base:un,verticalLayout:`${un}--vertical`,horizontalLayout:`${un}--horizontal`,panel:`${un}__panel`,infoPanel:`${un}__info-panel`,section:`${un}__section`,toolSection:`${un}__tool-section`,infoSection:`${un}__info-section`,infoCountSection:`${un}__info-count-section`,menuContainer:`${un}__menu-container`,menuHeader:`${un}__menu-header`,menuTitle:`${un}__menu-title`,featureCountBadge:`${un}__feature-count-badge`,featureCountText:`${un}__feature-count-text`,featureCountNumber:`${un}__feature-count-number`,actionToggle:`${un}__action-toggle`,actionToggleOn:`${un}__action-toggle--on`,actionTitle:`${un}__item-action-title`,actionIcon:`${un}__item-action-icon`};let mi=class extends Cs{constructor(t,e){super(t,e),this._activeCreateOptions=null,this._menuOpen=!1,this._selectionToolbar=null,this._viewModelHandlesGroup=null,this.availableCreateTools=["point","polyline","polygon","rectangle","circle"],this.creationMode="continuous",this.layout="horizontal",this.messages=null,this.messagesCommon=null,this.visibleElements=new QV,this._activateCreateTool=this._activateCreateTool.bind(this),this.viewModel=(t==null?void 0:t.viewModel)||new twe}initialize(){const{layer:t,view:e}=this,i=new y_e({view:(e==null?void 0:e.type)==="2d"?e:null,sources:t?[t]:null});this.addHandles([Ee(()=>this.viewModel,n=>{this._viewModelHandlesGroup=Rt(this._viewModelHandlesGroup),n&&(this._viewModelHandlesGroup=Sc([n.on("create",s=>{this.scheduleRender(),this._onCreateOperation(s)}),n.on("update",()=>this.scheduleRender()),n.on("delete",s=>this.emit("delete",s)),n.on("undo",()=>this.scheduleRender()),n.on("redo",()=>this.scheduleRender()),Ee(()=>n.layer,s=>{this._selectionToolbar&&(this._selectionToolbar.sources=s?[s]:null)}),Ee(()=>n.view,s=>{this._selectionToolbar&&(this._selectionToolbar.view=(s==null?void 0:s.type)==="2d"?s:null)}),Ee(()=>n.state,()=>this.notifyChange("state"))]))},xi),nr(()=>i.activeToolInfo,()=>this.viewModel.cancel()),i.on("complete",n=>this._onSelectionOperationComplete(n)),Ee(()=>{const{selectionTools:n}=this.visibleElements;return{lassoTool:!!(n!=null&&n["lasso-selection"]),rectangleTool:!!(n!=null&&n["rectangle-selection"])}},n=>{Object.assign(i.visibleElements,n)},xi)]),this._selectionToolbar=i}loadDependencies(){return cl({action:()=>be(()=>import("./calcite-action-DRgqJUGS.js"),[],import.meta.url),icon:()=>be(()=>import("./calcite-icon-BSz57Dah.js"),[],import.meta.url)})}destroy(){var t;(t=this._selectionToolbar)==null||t.destroy(),this._viewModelHandlesGroup=Rt(this._viewModelHandlesGroup)}get activeTool(){var e;const t=(e=this._selectionToolbar)==null?void 0:e.activeToolInfo;if(t)switch(t.toolName){case"lasso":return"lasso-selection";case"rectangle":return"rectangle-selection";case"default":return"custom-selection"}return this.viewModel.activeTool}get createGraphic(){return this.viewModel.createGraphic}get defaultCreateOptions(){return this.viewModel.defaultCreateOptions}set defaultCreateOptions(t){this.viewModel.defaultCreateOptions=t}get defaultUpdateOptions(){return this.viewModel.defaultUpdateOptions}set defaultUpdateOptions(t){this.viewModel.defaultUpdateOptions=t}get icon(){return"pencil"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get labelOptions(){return this.viewModel.labelOptions}set labelOptions(t){this.viewModel.labelOptions=t}get layer(){return this.viewModel.layer}set layer(t){this.viewModel.layer=t}get snappingOptions(){return this.viewModel.snappingOptions}set snappingOptions(t){this.viewModel.snappingOptions=t}get state(){var t;return(t=this._selectionToolbar)!=null&&t.activeToolInfo?"active":this.viewModel.state}get tooltipOptions(){return this.viewModel.tooltipOptions}set tooltipOptions(t){this.viewModel.tooltipOptions=t}get updateGraphics(){return this.viewModel.updateGraphics}get valueOptions(){return this.viewModel.valueOptions}set valueOptions(t){this.viewModel.valueOptions=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}set viewModel(t){const e=this._get("viewModel");t!==e&&(e&&yt(e),this._set("viewModel",t))}get _effectiveAvailableCreateTools(){const{availableCreateTools:t,visibleElements:e}=this;return t==null?void 0:t.filter(i=>{var n;return!!((n=e.createTools)!=null&&n[i])})}create(t,e){return this._activeCreateOptions=e||null,ro(this.viewModel.create(t,e))}update(t,e){return ro(this.viewModel.update(t,e))}complete(){this.viewModel.complete()}cancel(){var t;(t=this._selectionToolbar)==null||t.cancel(),this.viewModel.cancel()}undo(){var t;this.viewModel.undo(),(t=this.view)==null||t.focus()}redo(){var t;this.viewModel.redo(),(t=this.view)==null||t.focus()}delete(){this.viewModel.delete()}duplicate(){return this.viewModel.duplicate()}render(){const{label:t,layout:e,viewModel:{state:i}}=this;return ae("div",{"aria-label":t,class:this.classes(dn.base,Ye.widget,{[Ye.disabled]:i==="disabled",[dn.verticalLayout]:e==="vertical",[dn.horizontalLayout]:e==="horizontal"})},ae("div",{class:dn.panel,role:"toolbar"},this._renderTopPanelContents()),ae("div",{class:this.classes(dn.panel,dn.infoPanel)},this._renderInfoPanelContents()))}_renderTopPanelContents(){var s;const t=this.classes(dn.section,dn.toolSection),{_effectiveAvailableCreateTools:e,visibleElements:i,viewModel:n}=this;return[n.updateOnGraphicClick||(s=this._selectionToolbar)!=null&&s.visibleToolCount?ae("div",{class:t,key:"selection-button-container",role:"menu"},this._renderDefaultSelectionButton(),this._renderSelectionToolbar()):null,e!=null&&e.length?ae("div",{class:t,role:"menu"},this._renderDrawActions()):null,i.undoRedoMenu?ae("div",{class:t,key:"undo-redo-menu-button-container",role:"menu"},this._renderUndoRedoMenuButtons()):null,i.settingsMenu?ae("div",{class:dn.section,key:"settings-menu-button-container"},this._renderSettingsMenuButton()):null]}_renderInfoPanelContents(){return this._menuOpen?this._renderSettingsMenu():this.updateGraphics.length?[ae("div",{class:this.classes(dn.section,dn.infoSection,dn.infoCountSection),key:"feature-count-container"},this._renderFeatureCount()),ae("div",{class:this.classes(dn.section,dn.infoSection),key:"delete-button-container"},this._renderDuplicateButton(),this._renderDeleteButton())]:void 0}_renderSettingsMenu(){const{messagesCommon:t,snappingOptions:e,view:i,viewModel:n,visibleElements:s}=this,h={directionModePicker:s.directionModePicker,labelsToggle:s.labelsToggle,tooltipsToggle:s.tooltipsToggle};return ae("div",{class:dn.menuContainer,"data-testid":"menu",key:"settings-menu-container",role:"menu"},ae("header",{class:dn.menuHeader,key:"settings-menu-header"},ae("span",{class:dn.menuTitle},t.settings)),Hee(h)?ae(b_e,{sketchOptions:n.sketchOptions,viewType:i==null?void 0:i.type,visibleElements:h}):void 0,s.snappingControls&&i&&e?ae(O_e,{snappingOptions:e,view:i,visibleElements:s.snappingControlsElements}):void 0)}_renderFeatureCount(){const{layout:t,messages:e,updateGraphics:{length:i}}=this,n=jS(e.selectedCount,{count:i});return ae("div",{"aria-label":n,class:dn.featureCountBadge},ae("span",{class:dn.featureCountNumber},t==="vertical"?i:n))}_renderDuplicateButton(){if(!this.visibleElements.duplicateButton)return;const t=this.messages,e=this.updateGraphics.length>1?t.duplicateFeatures:t.duplicateFeature;return ae("calcite-action",{bind:this,onclick:this._onDuplicateSelect,scale:"s",text:e,title:e},ae("calcite-icon",{icon:"copy",scale:"s"}))}_renderDeleteButton(){const t=this.messages,e=this.updateGraphics.length>1?t.deleteFeatures:t.deleteFeature;return ae("calcite-action",{bind:this,onclick:this.delete,scale:"s",text:e,title:e},ae("calcite-icon",{icon:"trash",scale:"s"}))}_renderDefaultSelectionButton(){if(!this.viewModel.updateOnGraphicClick)return;const{messages:t,state:e}=this,i=t.selectFeature;return ae("calcite-action",{active:e==="ready",bind:this,disabled:e==="disabled",onclick:this._activateDefaultSelectTool,scale:"s",text:i,title:i},ae("calcite-icon",{icon:"cursor",scale:"s"}))}_renderSelectionToolbar(){var t;if(((t=this.view)==null?void 0:t.type)==="2d"&&this._selectionToolbar)return this._selectionToolbar.render()}_renderDrawActions(){var e;const{messages:t}=this;return(e=this._effectiveAvailableCreateTools)==null?void 0:e.map(i=>{switch(i){case"point":return this._renderAction(i,t.drawPoint,"pin");case"polyline":return this._renderAction(i,t.drawPolyline,"line");case"polygon":return this._renderAction(i,t.drawPolygon,"polygon");case"rectangle":return this._renderAction(i,t.drawRectangle,"rectangle");case"circle":return this._renderAction(i,t.drawCircle,"circle");default:return}})}_renderAction(t,e,i){return ae("calcite-action",{active:this.activeTool===t,bind:this,disabled:this.state==="disabled",onclick:()=>this._activateCreateTool(t),scale:"s",text:e,title:e},ae("calcite-icon",{icon:i,scale:"s"}))}_renderUndoRedoMenuButtons(){return[this._renderUndoButton(),this._renderRedoButton()]}_renderUndoButton(){const t=this.messages.undo;return ae("calcite-action",{bind:this,disabled:!this.viewModel.canUndo()||this.state==="disabled",onclick:this.undo,scale:"s",text:t,title:t},ae("calcite-icon",{icon:Nx(this.container)?"redo":"undo",scale:"s"}))}_renderRedoButton(){const t=this.messages.redo;return ae("calcite-action",{bind:this,disabled:!this.viewModel.canRedo()||this.state==="disabled",onclick:this.redo,scale:"s",text:t,title:t},ae("calcite-icon",{icon:Nx(this.container)?"undo":"redo",scale:"s"}))}_renderSettingsMenuButton(){const t=this.messagesCommon.settings;return ae("calcite-action",{active:this._menuOpen,bind:this,"data-testid":"settings-menu-action",disabled:this.state==="disabled",onclick:this._toggleMenu,scale:"s",text:t,title:t},ae("calcite-icon",{icon:"gear",scale:"s"}))}_activateCreateTool(t){var e;this.activeTool!==t?((e=this._selectionToolbar)==null||e.cancel(),this.create(t)):this.cancel()}_onCreateOperation(t){if(t.state!=="complete")return;const{creationMode:e}=this,{type:i}=t;if(i==="create"){const{tool:n,graphic:s}=t,h=this._activeCreateOptions;this._activeCreateOptions=null,e==="continuous"?this.create(n,h):e==="update"&&this.update([s])}}_toggleMenu(){this._menuOpen=!this._menuOpen,this.scheduleRender()}_onDuplicateSelect(){const t=this.duplicate(),e=this.viewModel.activeTool;e!=="transform"&&e!=="reshape"||this.update(t,{tool:e})}_onSelectionOperationComplete(t){const{viewModel:{defaultUpdateOptions:e}}=this,{selection:i}=t;if(!t.aborted&&i.length){const n=e.tool,s=i.length>1&&n==="reshape"?"transform":n;this.update(i,{...e,tool:s})}this.notifyChange("state")}_activateDefaultSelectTool(){var t;this.cancel(),(t=this.view)==null||t.focus()}};_([T()],mi.prototype,"activeTool",null),_([T({cast:t=>{if(!(t!=null&&t.length))return null;const e=new Set(["point","polyline","polygon","rectangle","circle"]);return t.filter(i=>e.has(i))}})],mi.prototype,"availableCreateTools",void 0),_([T({readOnly:!0})],mi.prototype,"createGraphic",null),_([T()],mi.prototype,"creationMode",void 0),_([T()],mi.prototype,"defaultCreateOptions",null),_([T()],mi.prototype,"defaultUpdateOptions",null),_([T()],mi.prototype,"icon",null),_([T()],mi.prototype,"label",null),_([T()],mi.prototype,"labelOptions",null),_([T()],mi.prototype,"layer",null),_([T({type:["horizontal","vertical"]})],mi.prototype,"layout",void 0),_([T(),Sr("esri/widgets/Sketch/t9n/Sketch")],mi.prototype,"messages",void 0),_([T(),Sr("esri/t9n/common")],mi.prototype,"messagesCommon",void 0),_([T()],mi.prototype,"snappingOptions",null),_([T()],mi.prototype,"state",null),_([T()],mi.prototype,"tooltipOptions",null),_([T({readOnly:!0})],mi.prototype,"updateGraphics",null),_([T({type:S3,nonNullable:!0})],mi.prototype,"valueOptions",null),_([T()],mi.prototype,"view",null),_([T(),UF(["create","update","undo","redo"])],mi.prototype,"viewModel",null),_([T({type:QV,nonNullable:!0})],mi.prototype,"visibleElements",void 0),_([T()],mi.prototype,"_effectiveAvailableCreateTools",null),mi=_([Y("esri.widgets.Sketch")],mi);const P_e=mi;function R_e(t){let e;return{c(){e=Ze("h1"),e.textContent="Map getting ready..."},m(i,n){ou(i,e,n)},d(i){i&&xc(e)}}}function L_e(t){let e,i,n;return{c(){e=Ze("div")},m(s,h){ou(s,e,h),i||(n=cB(t[1].call(null,e)),i=!0)},d(s){s&&xc(e),i=!1,n()}}}function N_e(t){let e;function i(h,f){return h[0]&&h[0].map?L_e:R_e}let n=i(t),s=n(t);return{c(){s.c(),e=hB()},m(h,f){s.m(h,f),ou(h,e,f)},p(h,[f]){n!==(n=i(h))&&(s.d(1),s=n(h),s&&(s.c(),s.m(e.parentNode,e)))},i:on,o:on,d(h){h&&xc(e),s.d(h)}}}function D_e(t,e,i){let n;return gd(t,Ka,h=>i(0,n=h)),[n,h=>{const f=new IG({id:"sketchLayer"});n.map.add(f);const m=new P_e({view:n,layer:f,container:h,creationMode:"update",availableCreateTools:["rectangle"]}),v=x=>{Ka.set(x.graphic.extent)};m.on("create",v)}]}class z_e extends p0{constructor(e){super(),d0(this,e,D_e,N_e,Yd,{})}}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */const gv={icon:"icon",iconContainer:"icon-container",select:"select",wrapper:"wrapper"},F_e=`:host{--calcite-icon-size:1rem;--calcite-spacing-eighth:0.125rem;--calcite-spacing-quarter:0.25rem;--calcite-spacing-half:0.5rem;--calcite-spacing-three-quarters:0.75rem;--calcite-spacing:1rem;--calcite-spacing-plus-quarter:1.25rem;--calcite-spacing-plus-half:1.5rem;--calcite-spacing-double:2rem;--calcite-menu-min-width:10rem;--calcite-header-min-height:3rem;--calcite-footer-min-height:3rem}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;flex-direction:column}.wrapper{position:relative;display:flex;align-items:stretch;inline-size:var(--select-width)}.wrapper:focus-within .icon,.wrapper:active .icon,.wrapper:hover .icon{color:var(--calcite-color-text-1)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([scale=s]){--calcite-select-font-size:var(--calcite-font-size--2);--calcite-select-spacing-inline:0.5rem 2rem}:host([scale=s]) .wrapper{block-size:1.5rem}:host([scale=s]) .icon-container{padding-inline:0.5rem}:host([scale=m]){--calcite-select-font-size:var(--calcite-font-size--1);--calcite-select-spacing-inline:0.75rem 2.5rem}:host([scale=m]) .wrapper{block-size:2rem}:host([scale=m]) .icon-container{padding-inline:0.75rem}:host([scale=l]){--calcite-select-font-size:var(--calcite-font-size-0);--calcite-select-spacing-inline:1rem 3rem}:host([scale=l]) .wrapper{block-size:44px}:host([scale=l]) .icon-container{padding-inline:1rem}:host([width=auto]){inline-size:auto}:host([width=half]){inline-size:50%}:host([width=full]){inline-size:100%}.select{margin:0px;box-sizing:border-box;inline-size:100%;cursor:pointer;appearance:none;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;border-radius:0px;border-width:1px;border-style:solid;border-color:var(--calcite-color-border-input);background-color:var(--calcite-color-foreground-1);font-family:inherit;color:var(--calcite-color-text-2);outline-color:transparent;font-size:var(--calcite-select-font-size);padding-inline:var(--calcite-select-spacing-inline);border-inline-end-width:0px}.select:focus{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}select:disabled{border-color:var(--calcite-color-border-input);--tw-bg-opacity:1}.icon-container{pointer-events:none;position:absolute;inset-block:0px;display:flex;align-items:center;border-width:0px;border-style:solid;border-color:var(--calcite-color-border-input);background-color:transparent;color:var(--calcite-color-text-2);inset-inline-end:0px;border-inline-width:0px 1px}.icon-container .icon{color:var(--calcite-color-text-3)}:host([status=invalid]) select,:host([status=invalid]) .icon-container{border-color:var(--calcite-color-status-danger)}:host([status=invalid]) select:focus,:host([status=invalid]) .icon-container:focus{outline:2px solid var(--calcite-color-status-danger);outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}.select:focus~.icon-container{border-color:transparent}.validation-container{display:flex;flex-direction:column;align-items:flex-start;align-self:stretch}:host([scale=m]) .validation-container,:host([scale=l]) .validation-container{padding-block-start:0.5rem}:host([scale=s]) .validation-container{padding-block-start:0.25rem}::slotted(input[slot=hidden-form-input]){margin:0 !important;opacity:0 !important;outline:none !important;padding:0 !important;position:absolute !important;inset:0 !important;transform:none !important;-webkit-appearance:none !important;z-index:-1 !important}:host([hidden]){display:none}[hidden]{display:none}`,j_e=F_e;function mv(t){return t.tagName==="CALCITE-OPTION"}function G_e(t){return t.tagName==="CALCITE-OPTION-GROUP"}const V_e=oi(class extends ai{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteSelectChange=qe(this,"calciteSelectChange",6),this.componentToNativeEl=new Map,this.mutationObserver=Wi("mutation",()=>this.populateInternalSelect()),this.handleInternalSelectChange=()=>{const e=this.selectEl.selectedOptions[0];this.selectFromNativeOption(e),requestAnimationFrame(()=>this.emitChangeEvent())},this.populateInternalSelect=()=>{const e=Array.from(this.el.children).filter(i=>i.tagName==="CALCITE-OPTION"||i.tagName==="CALCITE-OPTION-GROUP");this.clearInternalSelect(),e.forEach(i=>{var n;return(n=this.selectEl)==null?void 0:n.append(this.toNativeElement(i))})},this.storeSelectRef=e=>{this.selectEl=e,this.populateInternalSelect();const i=this.selectEl.selectedOptions[0];this.selectFromNativeOption(i)},this.emitChangeEvent=()=>{this.calciteSelectChange.emit()},this.disabled=!1,this.form=void 0,this.label=void 0,this.validationMessage=void 0,this.validationIcon=void 0,this.validity={valid:!1,badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1},this.name=void 0,this.required=!1,this.scale="m",this.status="idle",this.value=null,this.selectedOption=void 0,this.width="auto"}valueHandler(e){this.updateItemsFromValue(e)}selectedOptionHandler(e){this.value=e==null?void 0:e.value}connectedCallback(){var i;const{el:e}=this;(i=this.mutationObserver)==null||i.observe(e,{subtree:!0,childList:!0}),$c(this),C0(this),JT(this)}disconnectedCallback(){var e;(e=this.mutationObserver)==null||e.disconnect(),Cc(this),m3(this),KT(this)}componentWillLoad(){co(this),typeof this.value=="string"&&this.updateItemsFromValue(this.value)}componentDidLoad(){var e;ho(this),o0e(this,((e=this.selectedOption)==null?void 0:e.value)??"")}componentDidRender(){ul(this)}async setFocus(){await uo(this),i0(this.selectEl)}handleOptionOrGroupChange(e){e.stopPropagation();const i=e.target,n=this.componentToNativeEl.get(i);n&&(this.updateNativeElement(i,n),mv(i)&&i.selected&&(this.deselectAllExcept(i),this.selectedOption=i))}onLabelClick(){this.setFocus()}updateItemsFromValue(e){this.el.querySelectorAll("calcite-option").forEach(i=>i.selected=i.value===e)}updateNativeElement(e,i){if(i.disabled=e.disabled,i.label=e.label,mv(e)){const n=i;n.selected=e.selected,n.value=e.value,n.innerText=e.label}}clearInternalSelect(){this.componentToNativeEl.forEach(e=>e.remove()),this.componentToNativeEl.clear()}selectFromNativeOption(e){if(!e)return;let i;this.componentToNativeEl.forEach((n,s)=>{mv(s)&&n===e&&(s.selected=!0,i=s,this.deselectAllExcept(s))}),i&&(this.selectedOption=i)}toNativeElement(e){if(mv(e)){const i=document.createElement("option");return this.updateNativeElement(e,i),this.componentToNativeEl.set(e,i),i}if(G_e(e)){const i=document.createElement("optgroup");return this.updateNativeElement(e,i),Array.from(e.children).forEach(n=>{const s=this.toNativeElement(n);i.append(s),this.componentToNativeEl.set(e,s)}),this.componentToNativeEl.set(e,i),i}throw new Error("unsupported element child provided")}deselectAllExcept(e){this.el.querySelectorAll("calcite-option").forEach(i=>{i!==e&&(i.selected=!1)})}renderChevron(){return X("div",{class:gv.iconContainer},X("calcite-icon",{class:gv.icon,icon:"chevron-down",scale:Ui(this.scale)}))}render(){const{disabled:e}=this;return X(cn,{key:"80f3cb1fef4ae35fe2b6e9deb524abf4d60f62aa"},X(dl,{key:"293fc389614ae9921328f34dafc1849bd129c6a9",disabled:e},X("div",{key:"09f5e5312cf8ba805fec4d7c1102981890834d09",class:gv.wrapper},X("select",{key:"cc6a95b4dc105b3e4aeec499bf6007957e22a6ec","aria-label":am(this),class:gv.select,disabled:e,onChange:this.handleInternalSelectChange,ref:this.storeSelectRef},X("slot",{key:"f03975d523f1bd67cbe0ac0593a2fe2397f9d129"})),this.renderChevron(),X(YT,{key:"4f89ff06734e30f384dc900aeec831b075de1df9",component:this})),this.validationMessage&&this.status==="invalid"?X(a7,{icon:this.validationIcon,message:this.validationMessage,scale:this.scale,status:this.status}):null))}get el(){return this}static get watchers(){return{value:["valueHandler"],selectedOption:["selectedOptionHandler"]}}static get style(){return j_e}},[1,"calcite-select",{disabled:[516],form:[513],label:[1],validationMessage:[1,"validation-message"],validationIcon:[520,"validation-icon"],validity:[1040],name:[513],required:[516],scale:[513],status:[513],value:[1025],selectedOption:[1040],width:[513],setFocus:[64]},[[0,"calciteInternalOptionChange","handleOptionOrGroupChange"],[0,"calciteInternalOptionGroupChange","handleOptionOrGroupChange"]],{value:["valueHandler"],selectedOption:["selectedOptionHandler"]}]);function H_e(){if(typeof customElements>"u")return;["calcite-select","calcite-icon","calcite-input-message"].forEach(e=>{switch(e){case"calcite-select":customElements.get(e)||customElements.define(e,V_e);break;case"calcite-icon":customElements.get(e)||Mr();break;case"calcite-input-message":customElements.get(e)||_3();break}})}H_e();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */const B_e=":host{display:block}:host([hidden]){display:none}[hidden]{display:none}",U_e=B_e,q_e=oi(class extends ai{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteInternalOptionChange=qe(this,"calciteInternalOptionChange",6),this.mutationObserver=Wi("mutation",()=>{this.ensureTextContentDependentProps(),this.calciteInternalOptionChange.emit()}),this.disabled=!1,this.label=void 0,this.selected=void 0,this.value=void 0}handlePropChange(e,i,n){(n==="label"||n==="value")&&this.ensureTextContentDependentProps(),this.calciteInternalOptionChange.emit()}ensureTextContentDependentProps(){const{el:{textContent:e},internallySetLabel:i,internallySetValue:n,label:s,value:h}=this;(!s||s===i)&&(this.label=e,this.internallySetLabel=e),(h==null||h===n)&&(this.value=e,this.internallySetValue=e)}connectedCallback(){var e;this.ensureTextContentDependentProps(),(e=this.mutationObserver)==null||e.observe(this.el,{attributeFilter:["label","value"],characterData:!0,childList:!0,subtree:!0})}disconnectedCallback(){var e;(e=this.mutationObserver)==null||e.disconnect()}render(){return X("slot",{key:"1fc4aa5b4af5d736dcf52c530167f225f465f195"},this.label)}get el(){return this}static get watchers(){return{disabled:["handlePropChange"],label:["handlePropChange"],selected:["handlePropChange"],value:["handlePropChange"]}}static get style(){return U_e}},[1,"calcite-option",{disabled:[516],label:[1025],selected:[516],value:[1032]},void 0,{disabled:["handlePropChange"],label:["handlePropChange"],selected:["handlePropChange"],value:["handlePropChange"]}]);function W_e(){if(typeof customElements>"u")return;["calcite-option"].forEach(e=>{switch(e){case"calcite-option":customElements.get(e)||customElements.define(e,q_e);break}})}W_e();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */const Z_e={dropdownTrigger:"trigger"},J_e=":host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline-block}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host .calcite-dropdown-wrapper{--calcite-floating-ui-z-index:var(--calcite-z-index-dropdown);display:block;position:absolute;z-index:var(--calcite-floating-ui-z-index);visibility:hidden}.calcite-dropdown-wrapper .calcite-floating-ui-anim{position:relative;transition:var(--calcite-floating-ui-transition);transition-property:transform, visibility, opacity;opacity:0;box-shadow:0 0 16px 0 rgba(0, 0, 0, 0.16);z-index:var(--calcite-z-index);border-radius:0.25rem}.calcite-dropdown-wrapper[data-placement^=bottom] .calcite-floating-ui-anim{transform:translateY(-5px)}.calcite-dropdown-wrapper[data-placement^=top] .calcite-floating-ui-anim{transform:translateY(5px)}.calcite-dropdown-wrapper[data-placement^=left] .calcite-floating-ui-anim{transform:translateX(5px)}.calcite-dropdown-wrapper[data-placement^=right] .calcite-floating-ui-anim{transform:translateX(-5px)}.calcite-dropdown-wrapper[data-placement] .calcite-floating-ui-anim--active{opacity:1;transform:translate(0)}:host([open]) .calcite-dropdown-wrapper{visibility:visible}:host .calcite-dropdown-content{max-block-size:45vh;inline-size:auto;overflow-y:auto;overflow-x:hidden;background-color:var(--calcite-color-foreground-1);inline-size:var(--calcite-dropdown-width)}.calcite-trigger-container{position:relative;display:flex;block-size:100%;flex:1 1 auto;word-wrap:break-word;word-break:break-word}@media (forced-colors: active){:host([open]) .calcite-dropdown-wrapper{border:1px solid canvasText}}:host([width-scale=s]){--calcite-dropdown-width:12rem}:host([width-scale=m]){--calcite-dropdown-width:14rem}:host([width-scale=l]){--calcite-dropdown-width:16rem}:host([hidden]){display:none}[hidden]{display:none}",K_e=J_e,Y_e=oi(class extends ai{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteDropdownSelect=qe(this,"calciteDropdownSelect",6),this.calciteDropdownBeforeClose=qe(this,"calciteDropdownBeforeClose",6),this.calciteDropdownClose=qe(this,"calciteDropdownClose",6),this.calciteDropdownBeforeOpen=qe(this,"calciteDropdownBeforeOpen",6),this.calciteDropdownOpen=qe(this,"calciteDropdownOpen",6),this.items=[],this.groups=[],this.mutationObserver=Wi("mutation",()=>this.updateItems()),this.resizeObserver=Wi("resize",e=>this.resizeObserverCallback(e)),this.openTransitionProp="opacity",this.guid=`calcite-dropdown-${hl()}`,this.defaultAssignedElements=[],this.slotChangeHandler=e=>{this.defaultAssignedElements=e.target.assignedElements({flatten:!0}),this.updateItems()},this.setFilteredPlacements=()=>{const{el:e,flipPlacements:i}=this;this.filteredFlipPlacements=i?gG(i,e):null},this.updateTriggers=e=>{this.triggers=e.target.assignedElements({flatten:!0}),this.reposition(!0)},this.updateItems=()=>{this.items=this.groups.map(e=>Array.from(e==null?void 0:e.querySelectorAll("calcite-dropdown-item"))).reduce((e,i)=>[...e,...i],[]),this.updateSelectedItems(),this.reposition(!0),this.items.forEach(e=>e.scale=this.scale)},this.updateGroups=e=>{const i=e.target.assignedElements({flatten:!0}).filter(n=>n==null?void 0:n.matches("calcite-dropdown-group"));this.groups=i,this.updateItems(),this.updateGroupScale()},this.resizeObserverCallback=e=>{e.forEach(i=>{const{target:n}=i;n===this.referenceEl?this.setDropdownWidth():n===this.scrollerEl&&this.setMaxScrollerHeight()})},this.setDropdownWidth=()=>{const{referenceEl:e,scrollerEl:i}=this,n=e==null?void 0:e.clientWidth;!n||!i||(i.style.minWidth=`${n}px`)},this.setMaxScrollerHeight=()=>{const{scrollerEl:e}=this;if(!e)return;this.reposition(!0);const i=this.getMaxScrollerHeight();e.style.maxHeight=i>0?`${i}px`:"",this.reposition(!0)},this.setScrollerAndTransitionEl=e=>{this.resizeObserver.observe(e),this.scrollerEl=e,this.transitionEl=e},this.setReferenceEl=e=>{this.referenceEl=e,bf(this,this.referenceEl,this.floatingEl),this.resizeObserver.observe(e)},this.setFloatingEl=e=>{this.floatingEl=e,bf(this,this.referenceEl,this.floatingEl)},this.keyDownHandler=e=>{if(!e.composedPath().includes(this.referenceEl))return;const{defaultPrevented:i,key:n}=e;if(!i){if(this.open){if(n==="Escape"){this.closeCalciteDropdown(),e.preventDefault();return}else if(e.shiftKey&&n==="Tab"){this.closeCalciteDropdown(),e.preventDefault();return}}y3(n)?(this.openCalciteDropdown(),e.preventDefault()):n==="Escape"&&(this.closeCalciteDropdown(),e.preventDefault())}},this.focusOnFirstActiveOrFirstItem=()=>{this.getFocusableElement(this.getTraversableItems().find(e=>e.selected)||this.items[0])},this.toggleOpenEnd=()=>{this.focusOnFirstActiveOrFirstItem(),this.el.removeEventListener("calciteDropdownOpen",this.toggleOpenEnd)},this.openCalciteDropdown=()=>{this.open=!this.open,this.open&&this.el.addEventListener("calciteDropdownOpen",this.toggleOpenEnd)},this.open=!1,this.closeOnSelectDisabled=!1,this.disabled=!1,this.flipPlacements=void 0,this.maxItems=0,this.overlayPositioning="absolute",this.placement=Sge,this.selectedItems=[],this.type="click",this.widthScale=void 0,this.scale="m"}openHandler(){if(pc(this),this.disabled){this.open=!1;return}this.reposition(!0)}handleDisabledChange(e){e||(this.open=!1)}flipPlacementsHandler(){this.setFilteredPlacements(),this.reposition(!0)}maxItemsHandler(){this.setMaxScrollerHeight()}overlayPositioningHandler(){this.reposition(!0)}placementHandler(){this.reposition(!0)}handlePropsChange(){this.updateItems(),this.updateGroupScale()}async setFocus(){await uo(this),this.el.focus()}connectedCallback(){var e;(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0}),this.setFilteredPlacements(),this.open&&(this.openHandler(),pc(this)),$c(this),this.updateItems(),bf(this,this.referenceEl,this.floatingEl)}componentWillLoad(){co(this)}componentDidLoad(){ho(this),bf(this,this.referenceEl,this.floatingEl)}componentDidRender(){ul(this)}disconnectedCallback(){var e,i;(e=this.mutationObserver)==null||e.disconnect(),(i=this.resizeObserver)==null||i.disconnect(),Cc(this),w3(this,this.referenceEl,this.floatingEl)}render(){const{open:e,guid:i}=this;return X(cn,{key:"660d6b0944d2dc3d79357dae7b66a6d2c8f9c3a9"},X(dl,{key:"1f32f4c315d77b8248c575eea7a38117bf57f1df",disabled:this.disabled},X("div",{key:"6f1658b0c35a39f8c2614cf0dd95e07d2b0c5c9a",class:"calcite-trigger-container",id:`${i}-menubutton`,onClick:this.openCalciteDropdown,onKeyDown:this.keyDownHandler,ref:this.setReferenceEl},X("slot",{key:"3e97cec359dc5a14ebb285fa8d616c6f30d46b88","aria-controls":`${i}-menu`,"aria-expanded":bn(e),"aria-haspopup":"menu",name:Z_e.dropdownTrigger,onSlotchange:this.updateTriggers})),X("div",{key:"cfc6e225664a43cb6c9bd44785999d2fc9e0ce33","aria-hidden":bn(!e),class:"calcite-dropdown-wrapper",ref:this.setFloatingEl},X("div",{key:"1f27f69083e5a67a34a9824e5bd513fe500775fb","aria-labelledby":`${i}-menubutton`,class:{"calcite-dropdown-content":!0,[o0.animation]:!0,[o0.animationActive]:e},id:`${i}-menu`,ref:this.setScrollerAndTransitionEl,role:"menu"},X("slot",{key:"66b2dce743680e932ac668f18bcd59df0647b165",onSlotchange:this.updateGroups})))))}async reposition(e=!1){const{floatingEl:i,referenceEl:n,placement:s,overlayPositioning:h,filteredFlipPlacements:f}=this;return o7(this,{floatingEl:i,referenceEl:n,overlayPositioning:h,placement:s,flipPlacements:f,type:"menu"},e)}closeCalciteDropdownOnClick(e){this.disabled||!this.open||e.composedPath().includes(this.el)||this.closeCalciteDropdown(!1)}closeCalciteDropdownOnEvent(e){this.closeCalciteDropdown(),e.stopPropagation()}closeCalciteDropdownOnOpenEvent(e){e.composedPath().includes(this.el)||(this.open=!1)}pointerEnterHandler(){this.disabled||this.type!=="hover"||this.openCalciteDropdown()}pointerLeaveHandler(){this.disabled||this.type!=="hover"||this.closeCalciteDropdown()}getTraversableItems(){return this.items.filter(e=>!e.disabled&&!e.hidden)}calciteInternalDropdownItemKeyEvent(e){const{keyboardEvent:i}=e.detail,n=i.target,s=this.getTraversableItems();switch(i.key){case"Tab":this.open=!1,this.updateTabIndexOfItems(n);break;case"ArrowDown":ig(s,n,"next");break;case"ArrowUp":ig(s,n,"previous");break;case"Home":ig(s,n,"first");break;case"End":ig(s,n,"last");break}e.stopPropagation()}handleItemSelect(e){this.updateSelectedItems(),e.stopPropagation(),this.calciteDropdownSelect.emit(),(!this.closeOnSelectDisabled||e.detail.requestedDropdownGroup.selectionMode==="none")&&this.closeCalciteDropdown(),e.stopPropagation()}updateGroupScale(){var e;(e=this.groups)==null||e.forEach(i=>i.scale=this.scale)}onBeforeOpen(){this.calciteDropdownBeforeOpen.emit()}onOpen(){this.calciteDropdownOpen.emit()}onBeforeClose(){this.calciteDropdownBeforeClose.emit()}onClose(){this.calciteDropdownClose.emit()}updateSelectedItems(){this.selectedItems=this.items.filter(e=>e.selected)}getMaxScrollerHeight(){const{maxItems:e,items:i}=this;let n=0,s=0,h;return this.groups.forEach(f=>{e>0&&n<e&&Array.from(f.children).forEach((m,v)=>{v===0&&(isNaN(h)&&(h=m.offsetTop),s+=h),n<e&&(s+=m.offsetHeight,n+=1)})}),i.length>e?s:0}closeCalciteDropdown(e=!0){this.open=!1,e&&i0(this.triggers[0])}getFocusableElement(e){e&&i0(e)}updateTabIndexOfItems(e){this.items.forEach(i=>{i.tabIndex=e!==i?-1:0})}static get delegatesFocus(){return!0}get el(){return this}static get watchers(){return{open:["openHandler"],disabled:["handleDisabledChange"],flipPlacements:["flipPlacementsHandler"],maxItems:["maxItemsHandler"],overlayPositioning:["overlayPositioningHandler"],placement:["placementHandler"],scale:["handlePropsChange"]}}static get style(){return K_e}},[17,"calcite-dropdown",{open:[1540],closeOnSelectDisabled:[516,"close-on-select-disabled"],disabled:[516],flipPlacements:[16],maxItems:[514,"max-items"],overlayPositioning:[513,"overlay-positioning"],placement:[513],selectedItems:[1040],type:[513],widthScale:[513,"width-scale"],scale:[513],setFocus:[64],reposition:[64]},[[8,"click","closeCalciteDropdownOnClick"],[0,"calciteInternalDropdownCloseRequest","closeCalciteDropdownOnEvent"],[8,"calciteDropdownOpen","closeCalciteDropdownOnOpenEvent"],[1,"pointerenter","pointerEnterHandler"],[1,"pointerleave","pointerLeaveHandler"],[0,"calciteInternalDropdownItemKeyEvent","calciteInternalDropdownItemKeyEvent"],[0,"calciteInternalDropdownItemSelect","handleItemSelect"]],{open:["openHandler"],disabled:["handleDisabledChange"],flipPlacements:["flipPlacementsHandler"],maxItems:["maxItemsHandler"],overlayPositioning:["overlayPositioningHandler"],placement:["placementHandler"],scale:["handlePropsChange"]}]);function X_e(){if(typeof customElements>"u")return;["calcite-dropdown"].forEach(e=>{switch(e){case"calcite-dropdown":customElements.get(e)||customElements.define(e,Y_e);break}})}X_e();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */const Sh={container:"container",containerNone:"container--none-selection",icon:"dropdown-item-icon",iconEnd:"dropdown-item-icon--end",iconStart:"dropdown-item-icon--start",itemContent:"dropdown-item-content",link:"dropdown-link"};/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */const Q_e=":host{position:relative;display:block}.container{text-align:start}.dropdown-title{margin-block-end:-1px;display:block;cursor:default;overflow-wrap:break-word;border-width:0px;border-block-end-width:1px;border-style:solid;border-color:var(--calcite-color-border-3);font-weight:var(--calcite-font-weight-bold);color:var(--calcite-color-text-2)}.dropdown-separator{display:block;block-size:1px;background-color:var(--calcite-color-border-3)}:host([scale=s]){font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s]) .dropdown-title{padding:0.5rem}:host([scale=m]){font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) .dropdown-title{padding:0.75rem}:host([scale=l]){font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) .dropdown-title{padding:1rem}:host([hidden]){display:none}[hidden]{display:none}",e5e=Q_e,qH=oi(class extends ai{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteInternalDropdownItemChange=qe(this,"calciteInternalDropdownItemChange",6),this.updateItems=()=>{Array.from(this.el.querySelectorAll("calcite-dropdown-item")).forEach(e=>e.selectionMode=this.selectionMode)},this.mutationObserver=Wi("mutation",()=>this.updateItems()),this.groupTitle=void 0,this.scale="m",this.selectionMode="single"}handlePropsChange(){this.updateItems()}connectedCallback(){var e;this.updateItems(),(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0})}componentWillLoad(){this.groupPosition=this.getGroupPosition()}disconnectedCallback(){var e;(e=this.mutationObserver)==null||e.disconnect()}render(){const e=this.groupTitle?X("span",{"aria-hidden":"true",class:"dropdown-title"},this.groupTitle):null,i=this.groupPosition>0?X("div",{class:"dropdown-separator",role:"separator"}):null;return X(cn,{key:"316d4d5c0cc68f5a34a2e53054ec6b4420e04092","aria-label":this.groupTitle,role:"group"},X("div",{key:"3eaadb9712203a1981d811ada11d91537f91cc03",class:{[Sh.container]:!0}},i,e,X("slot",{key:"8c0623959ab646c6ce923f388a3eaa6587b777cf"})))}updateActiveItemOnChange(e){this.requestedDropdownGroup=e.detail.requestedDropdownGroup,this.requestedDropdownItem=e.detail.requestedDropdownItem,this.calciteInternalDropdownItemChange.emit({requestedDropdownGroup:this.requestedDropdownGroup,requestedDropdownItem:this.requestedDropdownItem})}getGroupPosition(){return Array.prototype.indexOf.call(this.el.parentElement.querySelectorAll("calcite-dropdown-group"),this.el)}static get delegatesFocus(){return!0}get el(){return this}static get watchers(){return{selectionMode:["handlePropsChange"]}}static get style(){return e5e}},[17,"calcite-dropdown-group",{groupTitle:[513,"group-title"],scale:[513],selectionMode:[513,"selection-mode"]},[[0,"calciteInternalDropdownItemSelect","updateActiveItemOnChange"]],{selectionMode:["handlePropsChange"]}]);function WH(){if(typeof customElements>"u")return;["calcite-dropdown-group"].forEach(e=>{switch(e){case"calcite-dropdown-group":customElements.get(e)||customElements.define(e,qH);break}})}WH();const t5e=qH,i5e=WH,p$e=Object.freeze(Object.defineProperty({__proto__:null,CalciteDropdownGroup:t5e,defineCustomElement:i5e},Symbol.toStringTag,{value:"Module"}));/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */const n5e=`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{position:relative;display:flex;flex-grow:1;align-items:center;outline-color:transparent}.container{position:relative;display:flex;flex-grow:1;cursor:pointer;align-items:center;color:var(--calcite-color-text-3);text-decoration-line:none;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);text-align:start}.container a{position:relative;display:flex;flex-grow:1;cursor:pointer;align-items:center;color:var(--calcite-color-text-3);text-decoration-line:none;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);outline-color:transparent}.dropdown-item-content{flex:1 1 auto;padding-block:0.125rem}.dropdown-item-icon{position:relative;opacity:0;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transform:scale(0.9)}:host([scale=s]) .container{padding-block:0.25rem;padding-inline:0.5rem;font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s]) .dropdown-item-icon,:host([scale=s]) .dropdown-item-icon--start{padding-inline-end:var(--calcite-spacing-sm)}:host([scale=s]) .dropdown-item-icon--end{padding-inline-start:var(--calcite-spacing-sm)}:host([scale=m]) .container{padding-block:0.5rem;padding-inline:0.75rem;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) .dropdown-item-icon,:host([scale=m]) .dropdown-item-icon--start{padding-inline-end:var(--calcite-spacing-md)}:host([scale=m]) .dropdown-item-icon--end{padding-inline-start:var(--calcite-spacing-md)}:host([scale=l]) .container{padding-block:0.625rem;padding-inline:1rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) .dropdown-item-icon,:host([scale=l]) .dropdown-item-icon--start{padding-inline-end:var(--calcite-spacing-xl)}:host([scale=l]) .dropdown-item-icon--end{padding-inline-start:var(--calcite-spacing-xl)}:host(:focus){outline:2px solid transparent;outline-offset:2px;outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}:host(:focus) .container{color:var(--calcite-color-text-1);text-decoration-line:none}:host(:hover:not([disabled])) .container,:host(:active:not([disabled])) .container{background-color:var(--calcite-color-foreground-2);color:var(--calcite-color-text-1);text-decoration-line:none}:host(:hover:not([disabled])) .dropdown-link,:host(:active:not([disabled])) .dropdown-link{color:var(--calcite-color-text-1)}:host(:active:not([disabled])) .container{background-color:var(--calcite-color-foreground-3)}:host([selected]) .container:not(.container--none-selection),:host([selected]) .dropdown-link{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1)}:host([selected]) .container:not(.container--none-selection) calcite-icon,:host([selected]) .dropdown-link calcite-icon{color:var(--calcite-color-brand)}:host(:hover:not([disabled])) .dropdown-item-icon{color:var(--calcite-color-border-1);opacity:1}:host([selected]) .dropdown-item-icon{color:var(--calcite-color-brand);opacity:1}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}`,r5e=n5e,ZH=oi(class extends ai{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteDropdownItemSelect=qe(this,"calciteDropdownItemSelect",6),this.calciteInternalDropdownItemSelect=qe(this,"calciteInternalDropdownItemSelect",6),this.calciteInternalDropdownItemKeyEvent=qe(this,"calciteInternalDropdownItemKeyEvent",6),this.calciteInternalDropdownCloseRequest=qe(this,"calciteInternalDropdownCloseRequest",6),this.disabled=!1,this.href=void 0,this.iconFlipRtl=void 0,this.iconStart=void 0,this.iconEnd=void 0,this.label=void 0,this.rel=void 0,this.selected=!1,this.target=void 0,this.selectionMode="single",this.scale="m"}async setFocus(){var e;await uo(this),(e=this.el)==null||e.focus()}componentWillLoad(){co(this),this.initialize()}componentDidLoad(){ho(this)}connectedCallback(){this.initialize()}componentDidRender(){ul(this)}render(){const{href:e,selectionMode:i,label:n,iconFlipRtl:s}=this,h=X("calcite-icon",{key:"7a49a68a114bbce2e5952ac3e1155bf1ab8988de",class:Sh.iconStart,flipRtl:s==="start"||s==="both",icon:this.iconStart,scale:Ui(this.scale)}),f=X("span",{key:"8b288dfdc41b23e69be84228b5fc9457f054221a",class:Sh.itemContent},X("slot",{key:"845d4d31ab01bf4cf37f8a03f8a129a3c297070d"})),m=X("calcite-icon",{key:"d25c100431814a69d32ee8b1e2ae24ea507ccd49",class:Sh.iconEnd,flipRtl:s==="end"||s==="both",icon:this.iconEnd,scale:Ui(this.scale)}),v=this.iconStart&&this.iconEnd?[h,f,m]:this.iconStart?[h,f]:this.iconEnd?[f,m]:f,x=e?X("a",{"aria-label":n,class:Sh.link,href:e,ref:P=>this.childLink=P,rel:this.rel,tabIndex:-1,target:this.target},v):v,M=e?null:i==="single"?"menuitemradio":i==="multiple"?"menuitemcheckbox":"menuitem",$=i!=="none"?bn(this.selected):null,{disabled:I}=this;return X(cn,{key:"b74558167715baacec14b7d5fa65fc39ae4c7892","aria-checked":$,"aria-label":e?"":n,role:M,tabIndex:I?-1:0},X(dl,{key:"70846dbb6b6619591122384f00a0bbbbfe367376",disabled:I},X("div",{key:"7143c055705c6d83183986e0418011048c01f184",class:{[Sh.container]:!0,[Sh.containerNone]:i==="none"}},i!=="none"?X("calcite-icon",{class:Sh.icon,icon:i==="multiple"?"check":"bullet-point",scale:Ui(this.scale)}):null,x)))}onClick(){this.emitRequestedItem()}keyDownHandler(e){switch(e.key){case" ":case"Enter":this.emitRequestedItem(),this.href&&this.childLink.click(),e.preventDefault();break;case"Escape":this.calciteInternalDropdownCloseRequest.emit(),e.preventDefault();break;case"Tab":this.calciteInternalDropdownItemKeyEvent.emit({keyboardEvent:e});break;case"ArrowUp":case"ArrowDown":case"Home":case"End":e.preventDefault(),this.calciteInternalDropdownItemKeyEvent.emit({keyboardEvent:e});break}}updateActiveItemOnChange(e){e.composedPath().includes(this.parentDropdownGroupEl)&&(this.requestedDropdownGroup=e.detail.requestedDropdownGroup,this.requestedDropdownItem=e.detail.requestedDropdownItem,this.determineActiveItem()),e.stopPropagation()}initialize(){this.parentDropdownGroupEl=this.el.closest("calcite-dropdown-group"),this.selectionMode==="none"&&(this.selected=!1)}determineActiveItem(){switch(this.selectionMode){case"multiple":this.el===this.requestedDropdownItem&&(this.selected=!this.selected);break;case"single":this.el===this.requestedDropdownItem?this.selected=!0:this.requestedDropdownGroup===this.parentDropdownGroupEl&&(this.selected=!1);break;case"none":this.selected=!1;break}}emitRequestedItem(){this.calciteDropdownItemSelect.emit(),this.calciteInternalDropdownItemSelect.emit({requestedDropdownItem:this.el,requestedDropdownGroup:this.parentDropdownGroupEl})}get el(){return this}static get style(){return r5e}},[1,"calcite-dropdown-item",{disabled:[516],href:[513],iconFlipRtl:[513,"icon-flip-rtl"],iconStart:[513,"icon-start"],iconEnd:[513,"icon-end"],label:[1],rel:[513],selected:[1540],target:[513],selectionMode:[1,"selection-mode"],scale:[513],setFocus:[64]},[[0,"click","onClick"],[0,"keydown","keyDownHandler"],[16,"calciteInternalDropdownItemChange","updateActiveItemOnChange"]]]);function JH(){if(typeof customElements>"u")return;["calcite-dropdown-item","calcite-icon"].forEach(e=>{switch(e){case"calcite-dropdown-item":customElements.get(e)||customElements.define(e,ZH);break;case"calcite-icon":customElements.get(e)||Mr();break}})}JH();const s5e=ZH,o5e=JH,g$e=Object.freeze(Object.defineProperty({__proto__:null,CalciteDropdownItem:s5e,defineCustomElement:o5e},Symbol.toStringTag,{value:"Module"}));function cI(t){let e,i;return e=new z_e({}),{c(){p1(e.$$.fragment)},m(n,s){hf(e,n,s),i=!0},i(n){i||(oc(e.$$.fragment,n),i=!0)},o(n){yd(e.$$.fragment,n),i=!1},d(n){uf(e,n)}}}function a5e(t){let e,i,n,s,h,f,m,v,x,M,$,I=t[0].extType!==t[1].MAP&&cI();return{c(){e=Ze("div"),i=Ze("calcite-label"),n=ja(`Map size
    `),s=Ze("calcite-select"),s.innerHTML='<calcite-option value="full-size">Full size</calcite-option> <calcite-option value="size-1">900px x 400px</calcite-option>',h=Xi(),f=Ze("div"),m=Ze("calcite-dropdown"),m.innerHTML='<calcite-button id="typeBtn" slot="trigger">Use extent from MAP</calcite-button> <calcite-dropdown-group group-title="Extent type"><calcite-dropdown-item label="MAP">Map</calcite-dropdown-item> <calcite-dropdown-item label="EXTENT">Extent</calcite-dropdown-item></calcite-dropdown-group>',v=Xi(),I&&I.c(),Ie(m,"width","m"),jr(e,"class","cntrl-container")},m(P,L){ou(P,e,L),Ne(e,i),Ne(i,n),Ne(i,s),Ne(e,h),Ne(e,f),Ne(f,m),Ne(e,v),I&&I.m(e,null),x=!0,M||($=[Wn(s,"calciteSelectChange",t[2]),Wn(m,"calciteDropdownSelect",t[3])],M=!0)},p(P,[L]){P[0].extType!==P[1].MAP?I?L&1&&oc(I,1):(I=cI(),I.c(),oc(I,1),I.m(e,null)):I&&(vB(),yd(I,1,1,()=>{I=null}),bB())},i(P){x||(oc(I),x=!0)},o(P){yd(I),x=!1},d(P){P&&xc(e),I&&I.d(),M=!1,_c($)}}}function l5e(t,e,i){const n=Object.freeze({MAP:"MAP",GRAPHIC:"GRAPHIC"});let s={extType:n.MAP};return[s,n,m=>{AO.set(m.target.value)},m=>{console.log("Drop down select did change"),i(0,s.extType=m.target.selectedItems[0].label,s),document.getElementById("typeBtn").innerHTML=`Use extent from ${s.extType}`}]}class c5e extends p0{constructor(e){super(),d0(this,e,l5e,a5e,Yd,{})}}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */const h5e=":host{position:relative;display:block;inline-size:100%}.track,.bar{position:absolute;inset-block-start:0px;block-size:2px}.track{z-index:var(--calcite-z-index);inline-size:100%;overflow:hidden;background:var(--calcite-color-border-3)}.bar{z-index:var(--calcite-z-index);background-color:var(--calcite-color-brand)}@media (forced-colors: active){.track{background-color:highlightText}.bar{background-color:linkText}}.indeterminate{inline-size:20%;animation:looping-progress-bar-ani calc(var(--calcite-internal-animation-timing-medium) / var(--calcite-internal-duration-factor) * 11 / var(--calcite-internal-duration-factor)) linear infinite}.indeterminate.calcite--rtl{animation-name:looping-progress-bar-ani-rtl}.reversed{animation-direction:reverse}.text{padding-inline:0px;padding-block:1rem 0px;text-align:center;font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-2)}@keyframes looping-progress-bar-ani{0%{transform:translate3d(-100%, 0, 0)}50%{inline-size:40%}100%{transform:translate3d(600%, 0, 0)}}@keyframes looping-progress-bar-ani-rtl{0%{transform:translate3d(100%, 0, 0)}50%{inline-size:40%}100%{transform:translate3d(-600%, 0, 0)}}:host([hidden]){display:none}[hidden]{display:none}",u5e=h5e,d5e=oi(class extends ai{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.type="determinate",this.value=0,this.label=void 0,this.text=void 0,this.reversed=!1}render(){const i=this.type==="determinate"?{width:`${this.value*100}%`}:{},n=Ua(this.el);return X("div",{key:"cd55f92523bbf44ed5dc50711af93d67314a4c2e","aria-label":this.label||this.text,"aria-valuemax":1,"aria-valuemin":0,"aria-valuenow":this.value,role:"progressbar"},X("div",{key:"d5c47f3fab3f877c00e8f349522e26a79355c89a",class:"track"},X("div",{key:"e5b081de209ba8570296470ccb00b9d809fabded",class:{bar:!0,indeterminate:this.type==="indeterminate",[tc.rtl]:n==="rtl",reversed:this.reversed},style:i})),this.text?X("div",{class:"text"},this.text):null)}get el(){return this}static get style(){return u5e}},[1,"calcite-progress",{type:[513],value:[2],label:[1],text:[1],reversed:[516]}]);function KH(){if(typeof customElements>"u")return;["calcite-progress"].forEach(e=>{switch(e){case"calcite-progress":customElements.get(e)||customElements.define(e,d5e);break}})}KH();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */const jn={loader:"loader",clearButton:"clear-button",editingEnabled:"editing-enabled",inlineChild:"inline-child",inputIcon:"icon",prefix:"prefix",suffix:"suffix",numberButtonWrapper:"number-button-wrapper",buttonItemHorizontal:"number-button-item--horizontal",wrapper:"element-wrapper",inputWrapper:"wrapper",actionWrapper:"action-wrapper",resizeIconWrapper:"resize-icon-wrapper",numberButtonItem:"number-button-item"},hI={tel:"phone",password:"lock",email:"email-address",date:"calendar",time:"clock",search:"search"},p5e={action:"action"},f5e=`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:block}:host([scale=s]) input,:host([scale=s]) .prefix,:host([scale=s]) .suffix{block-size:1.5rem;padding-inline:0.5rem;font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s]) textarea{block-size:1.5rem;min-block-size:1.5rem}:host([scale=s]) .number-button-wrapper,:host([scale=s]) .action-wrapper calcite-button,:host([scale=s]) .action-wrapper calcite-button button{block-size:1.5rem}:host([scale=s]) input[type=file]{block-size:1.5rem}:host([scale=s]) .clear-button{min-block-size:1.5rem;min-inline-size:1.5rem}:host([scale=s]) textarea{block-size:auto;padding-block:0.25rem;padding-inline:0.5rem;font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=m]) input,:host([scale=m]) .prefix,:host([scale=m]) .suffix{block-size:2rem;padding-inline:0.75rem;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) textarea{min-block-size:2rem}:host([scale=m]) .number-button-wrapper,:host([scale=m]) .action-wrapper calcite-button,:host([scale=m]) .action-wrapper calcite-button button{block-size:2rem}:host([scale=m]) input[type=file]{block-size:2rem}:host([scale=m]) .clear-button{min-block-size:2rem;min-inline-size:2rem}:host([scale=m]) textarea{block-size:auto;padding-block:0.5rem;padding-inline:0.75rem;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=l]) input,:host([scale=l]) .prefix,:host([scale=l]) .suffix{block-size:2.75rem;padding-inline:1rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) textarea{min-block-size:2.75rem}:host([scale=l]) .number-button-wrapper,:host([scale=l]) .action-wrapper calcite-button,:host([scale=l]) .action-wrapper calcite-button button{block-size:2.75rem}:host([scale=l]) input[type=file]{block-size:2.75rem}:host([scale=l]) .clear-button{min-block-size:2.75rem;min-inline-size:2.75rem}:host([scale=l]) textarea{block-size:auto;padding-block:0.75rem;padding-inline:1rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([disabled]) textarea{resize:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}textarea,input{transition:var(--calcite-animation-timing), block-size 0, outline-offset 0s;-webkit-appearance:none;position:relative;margin:0px;box-sizing:border-box;display:flex;max-block-size:100%;inline-size:100%;max-inline-size:100%;flex:1 1 0%;border-radius:0px;background-color:var(--calcite-color-foreground-1);font-family:inherit;font-weight:var(--calcite-font-weight-normal);color:var(--calcite-color-text-1)}input[type=search]::-webkit-search-decoration{-webkit-appearance:none}input,textarea{text-overflow:ellipsis;border-width:1px;border-style:solid;border-color:var(--calcite-color-border-input);color:var(--calcite-color-text-1)}input:placeholder-shown,textarea:placeholder-shown{text-overflow:ellipsis}input:focus,textarea:focus{border-color:var(--calcite-color-brand);color:var(--calcite-color-text-1)}input[readonly],textarea[readonly]{background-color:var(--calcite-color-background);font-weight:var(--calcite-font-weight-medium)}input[readonly]:focus,textarea[readonly]:focus{color:var(--calcite-color-text-1)}calcite-icon{color:var(--calcite-color-text-3)}textarea,input{outline-color:transparent}textarea:focus,input:focus{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}:host([status=invalid]) input,:host([status=invalid]) textarea{border-color:var(--calcite-color-status-danger)}:host([status=invalid]) input:focus,:host([status=invalid]) textarea:focus{outline:2px solid var(--calcite-color-status-danger);outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}:host([scale=s]) .icon{inset-inline-start:0.5rem}:host([scale=m]) .icon{inset-inline-start:0.75rem}:host([scale=l]) .icon{inset-inline-start:1rem}:host([icon][scale=s]) input{padding-inline-start:2rem}:host([icon][scale=m]) input{padding-inline-start:2.5rem}:host([icon][scale=l]) input{padding-inline-start:3.5rem}.element-wrapper{position:relative;order:3;display:inline-flex;flex:1 1 0%;align-items:center}.icon{pointer-events:none;position:absolute;display:block;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}.icon,.resize-icon-wrapper{z-index:var(--calcite-z-index)}input[type=text]::-ms-clear,input[type=text]::-ms-reveal{display:none;block-size:0px;inline-size:0px}input[type=search]::-webkit-search-decoration,input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-results-button,input[type=search]::-webkit-search-results-decoration,input[type=date]::-webkit-clear-button,input[type=time]::-webkit-clear-button{display:none}.clear-button{pointer-events:initial;order:4;margin:0px;box-sizing:border-box;display:flex;min-block-size:100%;cursor:pointer;align-items:center;justify-content:center;align-self:stretch;border-width:1px;border-style:solid;border-color:var(--calcite-color-border-input);background-color:var(--calcite-color-foreground-1);outline-color:transparent;border-inline-start-width:0px}.clear-button:hover{background-color:var(--calcite-color-foreground-2);transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}.clear-button:hover calcite-icon{color:var(--calcite-color-text-1);transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}.clear-button:active{background-color:var(--calcite-color-foreground-3)}.clear-button:active calcite-icon{color:var(--calcite-color-text-1)}.clear-button:focus{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}.clear-button:disabled{opacity:var(--calcite-opacity-disabled)}.loader{inset-block-start:1px;inset-inline:1px;pointer-events:none;position:absolute;display:block}.action-wrapper{order:7;display:flex}.prefix,.suffix{box-sizing:border-box;display:flex;block-size:auto;min-block-size:100%;-webkit-user-select:none;user-select:none;align-content:center;align-items:center;overflow-wrap:break-word;border-width:1px;border-style:solid;border-color:var(--calcite-color-border-input);background-color:var(--calcite-color-background);font-weight:var(--calcite-font-weight-medium);line-height:1;color:var(--calcite-color-text-2)}.prefix{order:2;border-inline-end-width:0px}.suffix{order:5;border-inline-start-width:0px}:host([alignment=start]) textarea,:host([alignment=start]) input{text-align:start}:host([alignment=end]) textarea,:host([alignment=end]) input{text-align:end}input[type=number]{-moz-appearance:textfield}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{-webkit-appearance:none;-moz-appearance:textfield;margin:0px}.number-button-wrapper{pointer-events:none;order:6;box-sizing:border-box;display:flex;flex-direction:column;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}:host([number-button-type=vertical]) .wrapper{flex-direction:row;display:flex}:host([number-button-type=vertical]) input,:host([number-button-type=vertical]) textarea{order:2}:host([number-button-type=horizontal]) .calcite--rtl .number-button-item[data-adjustment=down] calcite-icon{transform:rotate(-90deg)}:host([number-button-type=horizontal]) .calcite--rtl .number-button-item[data-adjustment=up] calcite-icon{transform:rotate(-90deg)}.number-button-item.number-button-item--horizontal[data-adjustment=down],.number-button-item.number-button-item--horizontal[data-adjustment=up]{order:1;max-block-size:100%;min-block-size:100%;align-self:stretch}.number-button-item.number-button-item--horizontal[data-adjustment=down] calcite-icon,.number-button-item.number-button-item--horizontal[data-adjustment=up] calcite-icon{transform:rotate(90deg)}.number-button-item.number-button-item--horizontal[data-adjustment=down]{border-width:1px;border-style:solid;border-color:var(--calcite-color-border-input);border-inline-end-width:0px}.number-button-item.number-button-item--horizontal[data-adjustment=down]:hover{background-color:var(--calcite-color-foreground-2)}.number-button-item.number-button-item--horizontal[data-adjustment=down]:hover calcite-icon{color:var(--calcite-color-text-1)}.number-button-item.number-button-item--horizontal[data-adjustment=up]{order:5}.number-button-item.number-button-item--horizontal[data-adjustment=up]:hover{background-color:var(--calcite-color-foreground-2)}.number-button-item.number-button-item--horizontal[data-adjustment=up]:hover calcite-icon{color:var(--calcite-color-text-1)}:host([number-button-type=vertical]) .number-button-item[data-adjustment=down]:hover{background-color:var(--calcite-color-foreground-2)}:host([number-button-type=vertical]) .number-button-item[data-adjustment=down]:hover calcite-icon{color:var(--calcite-color-text-1)}:host([number-button-type=vertical]) .number-button-item[data-adjustment=up]:hover{background-color:var(--calcite-color-foreground-2)}:host([number-button-type=vertical]) .number-button-item[data-adjustment=up]:hover calcite-icon{color:var(--calcite-color-text-1)}:host([number-button-type=vertical]) .number-button-item[data-adjustment=down]{border-block-start-width:0px}.number-button-item{max-block-size:50%;min-block-size:50%;pointer-events:initial;margin:0px;box-sizing:border-box;display:flex;cursor:pointer;align-items:center;align-self:center;border-width:1px;border-style:solid;border-color:var(--calcite-color-border-input);background-color:var(--calcite-color-foreground-1);padding-block:0px;padding-inline:0.5rem;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;border-inline-start-width:0px}.number-button-item calcite-icon{pointer-events:none;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}.number-button-item:focus{background-color:var(--calcite-color-foreground-2)}.number-button-item:focus calcite-icon{color:var(--calcite-color-text-1)}.number-button-item:active{background-color:var(--calcite-color-foreground-3)}.number-button-item:disabled{pointer-events:none}.wrapper{position:relative;display:flex;flex-direction:row;align-items:center}:input::-webkit-calendar-picker-indicator{display:none}input[type=date]::-webkit-input-placeholder{visibility:hidden !important}textarea::-webkit-resizer{position:absolute;inset-block-end:0px;box-sizing:border-box;padding-block:0px;padding-inline:0.25rem;inset-inline-end:0}.resize-icon-wrapper{inset-block-end:2px;inset-inline-end:2px;pointer-events:none;position:absolute;block-size:0.75rem;inline-size:0.75rem;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-3)}.resize-icon-wrapper calcite-icon{inset-block-end:0.25rem;inset-inline-end:0.25rem;transform:rotate(-45deg)}.calcite--rtl .resize-icon-wrapper calcite-icon{transform:rotate(45deg)}:host([type=color]) input{padding:0.25rem}:host([type=file]) input{cursor:pointer;border-width:1px;border-style:dashed;border-color:var(--calcite-color-border-input);background-color:var(--calcite-color-foreground-1);text-align:center}:host([type=file][scale=s]) input{padding-block:1px;padding-inline:0.5rem}:host([type=file][scale=m]) input{padding-block:0.25rem;padding-inline:0.75rem}:host([type=file][scale=l]) input{padding-block:0.5rem;padding-inline:1rem}:host(.no-bottom-border) input{border-block-end-width:0px}:host(.border-top-color-one) input{border-block-start-color:var(--calcite-color-border-1)}input.inline-child{background-color:transparent;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}input.inline-child .editing-enabled{background-color:inherit}input.inline-child:not(.editing-enabled){display:flex;cursor:pointer;text-overflow:ellipsis;border-color:transparent;padding-inline-start:0}.validation-container{display:flex;flex-direction:column;align-items:flex-start;align-self:stretch}:host([scale=m]) .validation-container,:host([scale=l]) .validation-container{padding-block-start:0.5rem}:host([scale=s]) .validation-container{padding-block-start:0.25rem}::slotted(input[slot=hidden-form-input]){margin:0 !important;opacity:0 !important;outline:none !important;padding:0 !important;position:absolute !important;inset:0 !important;transform:none !important;-webkit-appearance:none !important;z-index:-1 !important}:host([hidden]){display:none}[hidden]{display:none}`,g5e=f5e,m5e=oi(class extends ai{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteInternalInputFocus=qe(this,"calciteInternalInputFocus",6),this.calciteInternalInputBlur=qe(this,"calciteInternalInputBlur",6),this.calciteInputInput=qe(this,"calciteInputInput",7),this.calciteInputChange=qe(this,"calciteInputChange",6),this.childElType="input",this.previousValueOrigin="initial",this.mutationObserver=Wi("mutation",()=>this.setDisabledAction()),this.userChangedValue=!1,this.keyDownHandler=e=>{this.readOnly||this.disabled||e.defaultPrevented||(this.isClearable&&e.key==="Escape"&&(this.clearInputValue(e),e.preventDefault()),e.key==="Enter"&&Aj(this)&&e.preventDefault())},this.clearInputValue=e=>{this.setValue({committing:!0,nativeEvent:e,origin:"user",value:""})},this.emitChangeIfUserModified=()=>{this.previousValueOrigin==="user"&&this.value!==this.previousEmittedValue&&(this.calciteInputChange.emit(),this.setPreviousEmittedValue(this.value))},this.inputBlurHandler=()=>{window.clearInterval(this.nudgeNumberValueIntervalId),this.calciteInternalInputBlur.emit(),this.emitChangeIfUserModified()},this.clickHandler=e=>{if(this.disabled)return;const i=q4(this.el,"action");e.target!==i&&this.setFocus()},this.inputFocusHandler=()=>{this.calciteInternalInputFocus.emit()},this.inputChangeHandler=()=>{this.type==="file"&&(this.files=this.childEl.files)},this.inputInputHandler=e=>{this.disabled||this.readOnly||this.setValue({nativeEvent:e,origin:"user",value:e.target.value})},this.inputKeyDownHandler=e=>{this.disabled||this.readOnly||e.key==="Enter"&&this.emitChangeIfUserModified()},this.inputNumberInputHandler=e=>{if(this.disabled||this.readOnly||this.value==="Infinity"||this.value==="-Infinity")return;const i=e.target.value;ps.numberFormatOptions={locale:this.effectiveLocale,numberingSystem:this.numberingSystem,useGrouping:this.groupSeparator};const n=ps.delocalize(i);e.inputType==="insertFromPaste"?(za(n)||e.preventDefault(),this.setValue({nativeEvent:e,origin:"user",value:S0e(n)}),this.childNumberEl.value=this.displayedValue):this.setValue({nativeEvent:e,origin:"user",value:n})},this.inputNumberKeyDownHandler=e=>{if(this.type!=="number"||this.disabled||this.readOnly)return;if(this.value==="Infinity"||this.value==="-Infinity"){e.preventDefault(),(e.key==="Backspace"||e.key==="Delete")&&this.clearInputValue(e);return}if(e.key==="ArrowUp"){e.preventDefault(),this.nudgeNumberValue("up",e);return}if(e.key==="ArrowDown"){this.nudgeNumberValue("down",e);return}const i=[...XT,"ArrowLeft","ArrowRight","Backspace","Delete","Enter","Escape","Tab"];if(e.altKey||e.ctrlKey||e.metaKey)return;const n=e.shiftKey&&e.key==="Tab";if(i.includes(e.key)||n){e.key==="Enter"&&this.emitChangeIfUserModified();return}ps.numberFormatOptions={locale:this.effectiveLocale,numberingSystem:this.numberingSystem,useGrouping:this.groupSeparator},!(e.key===ps.decimal&&(!this.value&&!this.childNumberEl.value||this.value&&this.childNumberEl.value.indexOf(ps.decimal)===-1))&&(/[eE]/.test(e.key)&&(!this.value&&!this.childNumberEl.value||this.value&&!/[eE]/.test(this.childNumberEl.value))||e.key==="-"&&(!this.value&&!this.childNumberEl.value||this.value&&this.childNumberEl.value.split("-").length<=2)||e.preventDefault())},this.nudgeNumberValue=(e,i)=>{if(i instanceof KeyboardEvent&&i.repeat||this.type!=="number")return;const n=this.maxString?parseFloat(this.maxString):null,s=this.minString?parseFloat(this.minString):null,h=150;this.incrementOrDecrementNumberValue(e,n,s,i),this.nudgeNumberValueIntervalId&&window.clearInterval(this.nudgeNumberValueIntervalId);let f=!0;this.nudgeNumberValueIntervalId=window.setInterval(()=>{if(f){f=!1;return}this.incrementOrDecrementNumberValue(e,n,s,i)},h)},this.numberButtonPointerUpAndOutHandler=()=>{window.clearInterval(this.nudgeNumberValueIntervalId)},this.numberButtonPointerDownHandler=e=>{if(!W4(e))return;e.preventDefault();const i=e.target.dataset.adjustment;this.disabled||this.nudgeNumberValue(i,e)},this.onHiddenFormInputInput=e=>{e.target.name===this.name&&this.setValue({value:e.target.value,origin:"direct"}),this.setFocus(),e.stopPropagation()},this.setChildElRef=e=>{this.childEl=e},this.setChildNumberElRef=e=>{this.childNumberEl=e},this.setInputValue=e=>{this.type==="text"&&!this.childEl||this.type==="number"&&!this.childNumberEl||(this[`child${this.type==="number"?"Number":""}El`].value=e)},this.setPreviousEmittedValue=e=>{this.previousEmittedValue=this.normalizeValue(e)},this.setPreviousValue=e=>{this.previousValue=this.normalizeValue(e)},this.setValue=({committing:e=!1,nativeEvent:i,origin:n,previousValue:s,value:h})=>{var f,m;if(this.setPreviousValue(s??this.value),this.previousValueOrigin=n,this.type==="number"){ps.numberFormatOptions={locale:this.effectiveLocale,numberingSystem:this.numberingSystem,useGrouping:this.groupSeparator,signDisplay:"never"};const v=((f=this.previousValue)==null?void 0:f.length)>h.length||((m=this.value)==null?void 0:m.length)>h.length,x=h.charAt(h.length-1)===".",M=x&&v?h:$0e(h),$=h&&!M?za(this.previousValue)?this.previousValue:"":M;let I=ps.localize($);n!=="connected"&&!x&&(I=O0e(I,$,ps)),this.displayedValue=x&&v?`${I}${ps.decimal}`:I,this.userChangedValue=n==="user"&&this.value!==$,this.value=["-","."].includes($)?"":$}else this.userChangedValue=n==="user"&&this.value!==h,this.value=h;n==="direct"&&(this.setInputValue(h),this.previousEmittedValue=h),i&&(this.calciteInputInput.emit().defaultPrevented?(this.value=this.previousValue,this.displayedValue=this.type==="number"?ps.localize(this.previousValue):this.previousValue):e&&this.emitChangeIfUserModified())},this.inputKeyUpHandler=()=>{window.clearInterval(this.nudgeNumberValueIntervalId)},this.alignment="start",this.autofocus=void 0,this.clearable=!1,this.disabled=!1,this.enterKeyHint=void 0,this.form=void 0,this.groupSeparator=!1,this.icon=void 0,this.iconFlipRtl=!1,this.inputMode=void 0,this.label=void 0,this.loading=!1,this.numberingSystem=void 0,this.localeFormat=!1,this.max=void 0,this.min=void 0,this.maxLength=void 0,this.minLength=void 0,this.validationMessage=void 0,this.validationIcon=void 0,this.validity={valid:!1,badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1},this.name=void 0,this.numberButtonType="vertical",this.placeholder=void 0,this.prefixText=void 0,this.readOnly=!1,this.required=!1,this.scale="m",this.status="idle",this.step=void 0,this.autocomplete=void 0,this.pattern=void 0,this.accept=void 0,this.multiple=!1,this.suffixText=void 0,this.editingEnabled=!1,this.type="text",this.value="",this.files=void 0,this.messages=void 0,this.messageOverrides=void 0,this.defaultMessages=void 0,this.effectiveLocale="",this.displayedValue=void 0,this.slottedActionElDisabledInternally=!1}handleGlobalAttributesChanged(){pu(this)}disabledWatcher(){this.setDisabledAction()}maxWatcher(){var e;this.maxString=((e=this.max)==null?void 0:e.toString())||null}minWatcher(){var e;this.minString=((e=this.min)==null?void 0:e.toString())||null}onMessagesChange(){}valueWatcher(e,i){if(!this.userChangedValue){if(this.type==="number"&&(e==="Infinity"||e==="-Infinity")){this.displayedValue=e,this.previousEmittedValue=e;return}this.setValue({origin:"direct",previousValue:i,value:e==null||e==""?"":this.type==="number"?za(e)?e:this.previousValue||"":e}),this.warnAboutInvalidNumberValue(e)}this.userChangedValue=!1}updateRequestedIcon(){this.requestedIcon=sm(hI,this.icon,this.type)}get isClearable(){var e;return!this.isTextarea&&(this.clearable||this.type==="search")&&((e=this.value)==null?void 0:e.length)>0}get isTextarea(){return this.childElType==="textarea"}effectiveLocaleChange(){mo(this,this.effectiveLocale)}connectedCallback(){var e;$c(this),po(this),yo(this),this.inlineEditableEl=this.el.closest("calcite-inline-editable"),this.inlineEditableEl&&(this.editingEnabled=this.inlineEditableEl.editingEnabled||!1),C0(this),JT(this),(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0}),this.setDisabledAction(),this.el.addEventListener(K4,this.onHiddenFormInputInput)}disconnectedCallback(){var e;Cc(this),m3(this),KT(this),fo(this),vo(this),(e=this.mutationObserver)==null||e.disconnect(),this.el.removeEventListener(K4,this.onHiddenFormInputInput)}async componentWillLoad(){var e,i;co(this),this.childElType=this.type==="textarea"?"textarea":"input",this.maxString=(e=this.max)==null?void 0:e.toString(),this.minString=(i=this.min)==null?void 0:i.toString(),this.requestedIcon=sm(hI,this.icon,this.type),await go(this),this.setPreviousEmittedValue(this.value),this.setPreviousValue(this.value),this.type==="number"&&(this.value==="Infinity"||this.value==="-Infinity"?(this.displayedValue=this.value,this.previousEmittedValue=this.value):(this.warnAboutInvalidNumberValue(this.value),this.setValue({origin:"connected",value:za(this.value)?this.value:""})))}componentDidLoad(){ho(this)}componentShouldUpdate(e,i,n){return this.type==="number"&&n==="value"&&e&&!za(e)?(this.setValue({origin:"reset",value:i}),!1):!0}componentDidRender(){ul(this)}async setFocus(){var e,i;await uo(this),this.type==="number"?(e=this.childNumberEl)==null||e.focus():(i=this.childEl)==null||i.focus()}async selectText(){var e,i;this.type==="number"?(e=this.childNumberEl)==null||e.select():(i=this.childEl)==null||i.select()}onLabelClick(){this.setFocus()}incrementOrDecrementNumberValue(e,i,n,s){const{value:h}=this;if(h==="Infinity"||h==="-Infinity")return;const f=e==="up"?1:-1,m=this.step==="any"?1:Math.abs(this.step||1),x=new Ot(h!==""?h:"0").add(`${m*f}`),M=()=>typeof n=="number"&&!isNaN(n)&&x.subtract(`${n}`).isNegative,$=()=>typeof i=="number"&&!isNaN(i)&&!x.subtract(`${i}`).isNegative,I=M()?`${n}`:$()?`${i}`:x.toString();this.setValue({committing:!0,nativeEvent:s,origin:"user",value:I})}syncHiddenFormInput(e){xG(this.type,this,e)}setDisabledAction(){const e=q4(this.el,"action");e&&(this.disabled?(e.getAttribute("disabled")==null&&(this.slottedActionElDisabledInternally=!0),e.setAttribute("disabled","")):this.slottedActionElDisabledInternally&&(e.removeAttribute("disabled"),this.slottedActionElDisabledInternally=!1))}normalizeValue(e){return this.type==="number"?za(e)?e:"":e}warnAboutInvalidNumberValue(e){this.type==="number"&&e&&!za(e)&&console.warn(`The specified value "${e}" cannot be parsed, or is out of range.`)}render(){const e=Ua(this.el),i=X("div",{key:"91ca290797296d930565c4d5c8c1c5adcfadd42f",class:jn.loader},X("calcite-progress",{key:"2721ebc8dcf7fa5dfb17455f2e7bbfd925548856",label:this.messages.loading,type:"indeterminate"})),n=X("button",{key:"9cdd4f14b0c4128281b12fd6156e8274b579968b","aria-label":this.messages.clear,class:jn.clearButton,disabled:this.disabled||this.readOnly,onClick:this.clearInputValue,tabIndex:-1,type:"button"},X("calcite-icon",{key:"cb77c42adac45d939293624cda425fa8ff1fccdc",icon:"x",scale:Ui(this.scale)})),s=X("calcite-icon",{key:"2e285859d4f3bfaaed8ffb284ba4595d88a05a0f",class:jn.inputIcon,flipRtl:this.iconFlipRtl,icon:this.requestedIcon,scale:Ui(this.scale)}),h=this.numberButtonType==="horizontal",f=X("button",{key:"657b0297a616e827e7f9b4f6c216d216dd87e193","aria-hidden":"true",class:{[jn.numberButtonItem]:!0,[jn.buttonItemHorizontal]:h},"data-adjustment":"up",disabled:this.disabled||this.readOnly,onPointerDown:this.numberButtonPointerDownHandler,onPointerOut:this.numberButtonPointerUpAndOutHandler,onPointerUp:this.numberButtonPointerUpAndOutHandler,tabIndex:-1,type:"button"},X("calcite-icon",{key:"77a3bf36286924aafc9e3352e02acc578c3b5856",icon:"chevron-up",scale:Ui(this.scale)})),m=X("button",{key:"0deaf9efe2a4cb059ad24b8a2c8363ed1392726e","aria-hidden":"true",class:{[jn.numberButtonItem]:!0,[jn.buttonItemHorizontal]:h},"data-adjustment":"down",disabled:this.disabled||this.readOnly,onPointerDown:this.numberButtonPointerDownHandler,onPointerOut:this.numberButtonPointerUpAndOutHandler,onPointerUp:this.numberButtonPointerUpAndOutHandler,tabIndex:-1,type:"button"},X("calcite-icon",{key:"13b751be5ad896baa26ccf6c234844b0d17abd06",icon:"chevron-down",scale:Ui(this.scale)})),v=X("div",{key:"b738d15248ccf6cfe5447e1c34c9b1f65fc8a4e4",class:jn.numberButtonWrapper},f,m),x=X("div",{key:"e9b94004e6a6e0d4fafebc5a2e4d75f4d4b4e216",class:jn.prefix},this.prefixText),M=X("div",{key:"6cbe0d708f7a3a6deac4877b868f5bef28148c01",class:jn.suffix},this.suffixText),$=this.el.autofocus||this.el.hasAttribute("autofocus")?!0:null,I=this.el.enterKeyHint||this.el.getAttribute("enterkeyhint"),P=this.el.inputMode||this.el.getAttribute("inputmode"),L=this.type==="number"?X("input",{accept:this.accept,"aria-label":am(this),autocomplete:this.autocomplete,autofocus:$,defaultValue:this.defaultValue,disabled:this.disabled?!0:null,enterKeyHint:I,inputMode:P,key:"localized-input",maxLength:this.maxLength,minLength:this.minLength,multiple:this.multiple,name:void 0,onBlur:this.inputBlurHandler,onFocus:this.inputFocusHandler,onInput:this.inputNumberInputHandler,onKeyDown:this.inputNumberKeyDownHandler,onKeyUp:this.inputKeyUpHandler,pattern:this.pattern,placeholder:this.placeholder||"",readOnly:this.readOnly,ref:this.setChildNumberElRef,type:"text",value:this.displayedValue}):null,z=this.type!=="number"?[X(this.childElType,{accept:this.accept,"aria-label":am(this),autocomplete:this.autocomplete,autofocus:$,class:{[jn.editingEnabled]:this.editingEnabled,[jn.inlineChild]:!!this.inlineEditableEl},defaultValue:this.defaultValue,disabled:this.disabled?!0:null,enterKeyHint:I,inputMode:P,max:this.maxString,maxLength:this.maxLength,min:this.minString,minLength:this.minLength,multiple:this.multiple,name:this.name,onBlur:this.inputBlurHandler,onChange:this.inputChangeHandler,onFocus:this.inputFocusHandler,onInput:this.inputInputHandler,onKeyDown:this.inputKeyDownHandler,onKeyUp:this.inputKeyUpHandler,pattern:this.pattern,placeholder:this.placeholder||"",readOnly:this.readOnly,ref:this.setChildElRef,required:this.required?!0:null,step:this.step,tabIndex:this.disabled||this.inlineEditableEl&&!this.editingEnabled?-1:null,type:this.type,value:this.value}),this.isTextarea?X("div",{class:jn.resizeIconWrapper},X("calcite-icon",{icon:"chevron-down",scale:Ui(this.scale)})):null]:null;return X(cn,{key:"d64b5741e88f8a1f0fa7bf57b1fcd1c653ebb4e1",onClick:this.clickHandler,onKeyDown:this.keyDownHandler},X(dl,{key:"c2a88b41ad40cc71430241b92162c39b9e95e91f",disabled:this.disabled},X("div",{key:"93a830ba649218eaa1d82e5fcb6e86e9c7f1125b",class:{[jn.inputWrapper]:!0,[tc.rtl]:e==="rtl"}},this.type==="number"&&this.numberButtonType==="horizontal"&&!this.readOnly?m:null,this.prefixText?x:null,X("div",{key:"4c0265736053dbccd3d0bca070c3b00716c1753e",class:jn.wrapper},L,z,this.isClearable?n:null,this.requestedIcon?s:null,this.loading?i:null),X("div",{key:"c3fee68974f3d04d6f843e30f598049861c9312a",class:jn.actionWrapper},X("slot",{key:"1ba027e1883626596fe1b06cb86fe3e6720c62b5",name:p5e.action})),this.type==="number"&&this.numberButtonType==="vertical"&&!this.readOnly?v:null,this.suffixText?M:null,this.type==="number"&&this.numberButtonType==="horizontal"&&!this.readOnly?f:null,X(YT,{key:"2770f59360cbc7cfacb854d8b6b9345c98fa7967",component:this})),this.validationMessage&&this.status==="invalid"?X(a7,{icon:this.validationIcon,message:this.validationMessage,scale:this.scale,status:this.status}):null))}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{autofocus:["handleGlobalAttributesChanged"],enterkeyhint:["handleGlobalAttributesChanged"],inputmode:["handleGlobalAttributesChanged"],disabled:["disabledWatcher"],max:["maxWatcher"],min:["minWatcher"],messageOverrides:["onMessagesChange"],value:["valueWatcher"],icon:["updateRequestedIcon"],type:["updateRequestedIcon"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return g5e}},[1,"calcite-input",{alignment:[513],autofocus:[4],clearable:[516],disabled:[516],enterKeyHint:[1,"enter-key-hint"],form:[513],groupSeparator:[516,"group-separator"],icon:[520],iconFlipRtl:[516,"icon-flip-rtl"],inputMode:[1,"input-mode"],label:[1],loading:[516],numberingSystem:[513,"numbering-system"],localeFormat:[4,"locale-format"],max:[514],min:[514],maxLength:[514,"max-length"],minLength:[514,"min-length"],validationMessage:[1,"validation-message"],validationIcon:[520,"validation-icon"],validity:[1040],name:[513],numberButtonType:[513,"number-button-type"],placeholder:[1],prefixText:[1,"prefix-text"],readOnly:[516,"read-only"],required:[516],scale:[513],status:[513],step:[520],autocomplete:[1],pattern:[1],accept:[1],multiple:[4],suffixText:[1,"suffix-text"],editingEnabled:[1540,"editing-enabled"],type:[513],value:[1025],files:[16],messages:[1040],messageOverrides:[1040],defaultMessages:[32],effectiveLocale:[32],displayedValue:[32],slottedActionElDisabledInternally:[32],setFocus:[64],selectText:[64]},void 0,{autofocus:["handleGlobalAttributesChanged"],enterkeyhint:["handleGlobalAttributesChanged"],inputmode:["handleGlobalAttributesChanged"],disabled:["disabledWatcher"],max:["maxWatcher"],min:["minWatcher"],messageOverrides:["onMessagesChange"],value:["valueWatcher"],icon:["updateRequestedIcon"],type:["updateRequestedIcon"],effectiveLocale:["effectiveLocaleChange"]}]);function y5e(){if(typeof customElements>"u")return;["calcite-input","calcite-icon","calcite-input-message","calcite-progress"].forEach(e=>{switch(e){case"calcite-input":customElements.get(e)||customElements.define(e,m5e);break;case"calcite-icon":customElements.get(e)||Mr();break;case"calcite-input-message":customElements.get(e)||_3();break;case"calcite-progress":customElements.get(e)||KH();break}})}y5e();function v5e(t){let e,i,n,s,h,f,m;return{c(){e=Ze("div"),i=Ze("calcite-label"),n=ja(`Add a reference layer by its itemID
    `),s=Ze("calcite-input"),h=Ze("calcite-button"),h.textContent="Add to map",Ie(h,"type","button"),Ie(h,"id","addLayerBtn"),Ie(h,"slot","action"),Ie(h,"role","button"),Ie(h,"tabindex","0"),Ie(s,"id","itemIdInput"),Ie(s,"placeholder","b5d71d19fd4b43fbb88abf07773ec0c7"),jr(e,"class","cntrl-container")},m(v,x){ou(v,e,x),Ne(e,i),Ne(i,n),Ne(i,s),Ne(s,h),f||(m=[Wn(h,"click",t[0]),Wn(h,"keyup",t[1])],f=!0)},p:on,i:on,o:on,d(v){v&&xc(e),f=!1,_c(m)}}}function b5e(t,e,i){let n;gd(t,Ka,m=>i(2,n=m));const s=DI();return[()=>{const m=document.getElementById("itemIdInput").value;m&&tT.fromPortalItem({portalItem:{id:m}}).then(v=>{n.map.add(v),v.when(()=>{lB(Ka,n.extent=v.fullExtent,n)})},v=>{s("add-layer",`${v.message}`)})},m=>{console.log("button keyup")}]}class w5e extends p0{constructor(e){super(),d0(this,e,b5e,v5e,Yd,{})}}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */let Ib;const _5e={childList:!0};function YH(t){Ib||(Ib=Wi("mutation",x5e)),Ib.observe(t.el,_5e)}function XH(t){Ib.unobserve(t.el)}function x5e(t){t.forEach(({target:e})=>{pu(e)})}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */const uI=(t,e,i)=>Math.max(e,Math.min(t,i));/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */const Mu={container:"container",content:"content",contentHeader:"content__header",contentBody:"content__body",contentFloat:"content--float",contentOverlay:"content--overlay",separator:"separator"},dI={actionBar:"action-bar",header:"header"},S5e=`:host{pointer-events:none;position:relative;display:flex;flex:0 1 auto;align-items:stretch;z-index:var(--calcite-shell-panel-z-index, var(--calcite-z-index));--calcite-shell-panel-detached-max-height:unset;--calcite-shell-panel-max-height:unset;--calcite-shell-panel-shadow-block-start-internal:0 4px 8px -1px rgba(0, 0, 0, 0.08),
    0 2px 4px -1px rgba(0, 0, 0, 0.04);--calcite-shell-panel-shadow-block-end-internal:0 -4px 8px -1px rgba(0, 0, 0, 0.08),
    0 -2px 4px -1px rgba(0, 0, 0, 0.04);--calcite-shell-panel-shadow-inline-start-internal:4px 0 8px -1px rgba(0, 0, 0, 0.08),
    2px 0 4px -1px rgba(0, 0, 0, 0.04);--calcite-shell-panel-shadow-inline-end-internal:-4px 0 8px -1px rgba(0, 0, 0, 0.08),
    -2px 0 4px -1px rgba(0, 0, 0, 0.04)}.calcite--rtl.content--overlay{--calcite-shell-panel-shadow-inline-start-internal:-4px 0 8px -1px rgba(0, 0, 0, 0.08),
    -2px 0 4px -1px rgba(0, 0, 0, 0.04);--calcite-shell-panel-shadow-inline-end-internal:4px 0 8px -1px rgba(0, 0, 0, 0.08),
    2px 0 4px -1px rgba(0, 0, 0, 0.04)}:host([layout=vertical]){z-index:var(--calcite-shell-panel-z-index, calc(var(--calcite-z-index) + 1))}:host([layout=vertical][display-mode=overlay]){z-index:var(--calcite-shell-panel-z-index, calc(var(--calcite-z-index-header) + 1))}:host([layout=vertical][width-scale=s]) .content{--calcite-shell-panel-width-internal:var(--calcite-shell-panel-width, 12vw);--calcite-shell-panel-max-width-internal:var(--calcite-shell-panel-max-width, 300px);--calcite-shell-panel-min-width-internal:var(--calcite-shell-panel-min-width, 150px)}:host([layout=vertical][width-scale=m]) .content{--calcite-shell-panel-width-internal:var(--calcite-shell-panel-width, 20vw);--calcite-shell-panel-max-width-internal:var(--calcite-shell-panel-max-width, 420px);--calcite-shell-panel-min-width-internal:var(--calcite-shell-panel-min-width, 240px)}:host([layout=vertical][width-scale=l]) .content{--calcite-shell-panel-width-internal:var(--calcite-shell-panel-width, 45vw);--calcite-shell-panel-max-width-internal:var(--calcite-shell-panel-max-width, 680px);--calcite-shell-panel-min-width-internal:var(--calcite-shell-panel-min-width, 340px)}:host([layout=horizontal][height-scale=s]) .content{--calcite-shell-panel-max-height-internal:var(
    --calcite-shell-panel-max-height,
    var(--calcite-shell-panel-detached-max-height, 20vh)
  )}:host([layout=horizontal]) .content{--calcite-shell-panel-min-height-internal:var(--calcite-shell-panel-min-height, 5vh);--calcite-shell-panel-max-height-internal:var(
    --calcite-shell-panel-max-height,
    var(--calcite-shell-panel-detached-max-height, 30vh)
  )}:host([layout=horizontal][height-scale=l]) .content{--calcite-shell-panel-max-height-internal:var(
    --calcite-shell-panel-max-height,
    var(--calcite-shell-panel-detached-max-height, 40vh)
  )}.container{pointer-events:none;box-sizing:border-box;display:flex;flex:1 1 auto;align-items:stretch;background-color:transparent;font-size:var(--calcite-font-size--1);color:var(--calcite-color-text-2)}.container *{box-sizing:border-box}:host([layout=horizontal]) .container{flex-direction:column}:host(:hover) .separator:not(:hover):not(:focus),:host(:focus-within) .separator:not(:hover):not(:focus){opacity:1;background-color:var(--calcite-color-border-3)}.separator{pointer-events:auto;position:absolute;display:flex;background-color:transparent;opacity:0;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;cursor:col-resize;outline:none}.separator:hover{opacity:1;background-color:var(--calcite-color-border-2)}.separator:focus{background-color:var(--calcite-color-brand);opacity:1}:host([layout=vertical]) .separator{inset-block:0px;block-size:100%;inline-size:0.125rem;cursor:col-resize}:host([layout=horizontal][position=start]) .separator{inset-block-end:0px}:host([layout=horizontal][position=end]) .separator{inset-block-start:0px}:host([layout=horizontal]) .separator{inset-inline-end:0px;block-size:0.125rem;inline-size:100%;cursor:row-resize}:host([layout=vertical][position=start]) .separator{inset-inline-end:-2px}:host([layout=horizontal][position=start]) .separator{inset-block-end:-2px}:host([layout=vertical][position=end]) .separator{inset-inline-start:-2px}:host([layout=horizontal][position=end]) .separator{inset-block-start:-2px}::slotted(calcite-panel),::slotted(calcite-flow){block-size:100%;inline-size:100%;flex:1 1 auto;max-block-size:unset;max-inline-size:unset}::slotted(.calcite-match-height){display:flex;flex:1 1 auto;overflow:hidden}.content{pointer-events:auto;display:flex;flex-direction:column;flex-wrap:nowrap;align-items:stretch;align-self:stretch;background-color:var(--calcite-color-background);padding:0px;transition:max-block-size var(--calcite-animation-timing), max-inline-size var(--calcite-animation-timing)}:host([layout=vertical]) .content{inline-size:var(--calcite-shell-panel-width-internal);max-inline-size:var(--calcite-shell-panel-max-width-internal);min-inline-size:var(--calcite-shell-panel-min-width-internal)}:host([layout=horizontal]) .content{block-size:var(--calcite-shell-panel-height-internal);max-block-size:var(--calcite-shell-panel-max-height-internal);min-block-size:var(--calcite-shell-panel-min-height-internal)}.content__header{display:flex;flex:0 1 auto;flex-direction:column;flex-wrap:nowrap;align-items:stretch}.content__body{display:flex;flex:1 1 auto;flex-direction:column;overflow:hidden}.content--overlay{position:absolute;--tw-shadow:0 4px 8px -1px rgba(0, 0, 0, 0.08), 0 2px 4px -1px rgba(0, 0, 0, 0.04);--tw-shadow-colored:0 4px 8px -1px var(--tw-shadow-color), 0 2px 4px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}:host([layout=vertical]) .content--overlay{inset-block-start:0px;block-size:100%}:host([layout=horizontal]) .content--overlay{inset-inline-start:0px;inline-size:100%}:host([layout=vertical][position=start]) .content--overlay{inset-inline-start:100%;box-shadow:var(--calcite-shell-panel-shadow-inline-start-internal)}:host([layout=vertical][position=end]) .content--overlay{inset-inline-end:100%;box-shadow:var(--calcite-shell-panel-shadow-inline-end-internal)}:host([layout=horizontal][position=start]) .content--overlay{inset-block-start:100%;box-shadow:var(--calcite-shell-panel-shadow-block-start-internal)}:host([layout=horizontal][position=end]) .content--overlay{inset-block-end:100%;box-shadow:var(--calcite-shell-panel-shadow-block-end-internal)}.content--float{margin-inline:0.5rem;margin-block:0.5rem auto;block-size:auto;overflow:hidden;border-radius:0.25rem;--tw-shadow:0 4px 8px -1px rgba(0, 0, 0, 0.08), 0 2px 4px -1px rgba(0, 0, 0, 0.04);--tw-shadow-colored:0 4px 8px -1px var(--tw-shadow-color), 0 2px 4px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);max-block-size:var(--calcite-shell-panel-max-height-internal, calc(100% - 1rem))}.content--float ::slotted(calcite-panel),.content--float ::slotted(calcite-flow){max-block-size:unset}:host([layout=horizontal]) .content--float{margin-block:0.5rem}:host([position=start]) .content--float ::slotted(calcite-panel),:host([position=start]) .content--float ::slotted(calcite-flow),:host([position=end]) .content--float ::slotted(calcite-panel),:host([position=end]) .content--float ::slotted(calcite-flow){border-style:none}.content[hidden]{display:none}slot[name=action-bar]::slotted(calcite-action-bar),.content ::slotted(calcite-flow),.content ::slotted(calcite-panel:not([closed])){border-width:1px;border-style:solid;border-color:var(--calcite-color-border-3)}:host([position=start]:not([slot=panel-end])) slot[name=action-bar]::slotted(calcite-action-bar),:host([position=start]:not([slot=panel-end])) .content ::slotted(calcite-flow),:host([position=start]:not([slot=panel-end])) .content ::slotted(calcite-panel),:host([position=end][slot=panel-start]) slot[name=action-bar]::slotted(calcite-action-bar),:host([position=end][slot=panel-start]) .content ::slotted(calcite-flow),:host([position=end][slot=panel-start]) .content ::slotted(calcite-panel){border-inline-start:none}:host([position=end]:not([slot=panel-start])) slot[name=action-bar]::slotted(calcite-action-bar),:host([position=end]:not([slot=panel-start])) .content ::slotted(calcite-flow),:host([position=end]:not([slot=panel-start])) .content ::slotted(calcite-panel),:host([position=start][slot=panel-end]) slot[name=action-bar]::slotted(calcite-action-bar),:host([position=start][slot=panel-end]) .content ::slotted(calcite-flow),:host([position=start][slot=panel-end]) .content ::slotted(calcite-panel){border-inline-end:none}:host([layout=horizontal]) slot[name=action-bar]::slotted(calcite-action-bar){border-inline:0}:host([layout=horizontal][position=start]) .content ::slotted(calcite-flow),:host([layout=horizontal][position=start]) .content ::slotted(calcite-panel){border-inline:0;border-block-start:0}:host([layout=horizontal][position=end]) .content ::slotted(calcite-flow),:host([layout=horizontal][position=end]) .content ::slotted(calcite-panel){border-inline:0;border-block-end:0}:host([hidden]){display:none}[hidden]{display:none}`,T5e=S5e,M5e=oi(class extends ai{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteInternalShellPanelResizeStart=qe(this,"calciteInternalShellPanelResizeStart",6),this.calciteInternalShellPanelResizeEnd=qe(this,"calciteInternalShellPanelResizeEnd",6),this.initialContentWidth=null,this.initialContentHeight=null,this.initialClientX=null,this.initialClientY=null,this.contentWidthMax=null,this.contentWidthMin=null,this.contentHeightMax=null,this.contentHeightMin=null,this.step=1,this.stepMultiplier=10,this.actionBars=[],this.storeContentEl=e=>{this.contentEl=e},this.getKeyAdjustedSize=e=>{const{key:i}=e,{el:n,step:s,stepMultiplier:h,layout:f,contentWidthMin:m,contentWidthMax:v,initialContentWidth:x,initialContentHeight:M,contentHeightMin:$,contentHeightMax:I,position:P}=this,L=s*h;["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Home","End","PageUp","PageDown"].indexOf(i)>-1&&e.preventDefault();const F=Ua(n),U=["ArrowLeft","ArrowRight"],W=["ArrowDown","ArrowUp"],K=F==="rtl"&&U.includes(i)?-1:1;if(f==="horizontal"?P==="end"?i===W[1]||i===U[0]:i===W[0]||i===U[1]:i===W[1]||(P==="end"?i===U[0]:i===U[1])){const ie=e.shiftKey?L:s;return f==="horizontal"?M+K*ie:x+K*ie}if(f==="horizontal"?P==="end"?i===W[0]||i===U[0]:i===W[1]||i===U[1]:i===W[0]||(P==="end"?i===U[1]:i===U[0])){const ie=e.shiftKey?L:s;return f==="horizontal"?M-K*ie:x-K*ie}return i==="Home"&&f==="horizontal"&&typeof $=="number"?$:i==="Home"&&f==="vertical"&&typeof m=="number"?m:i==="End"&&f==="horizontal"&&typeof I=="number"?I:i==="End"&&f==="vertical"&&typeof v=="number"?v:i==="PageDown"?f==="horizontal"?M-L:x-L:i==="PageUp"?f==="horizontal"?M+L:x+L:null},this.initialKeydownWidth=e=>{this.setInitialContentWidth();const i=this.getKeyAdjustedSize(e);typeof i=="number"&&this.setContentWidth(i)},this.initialKeydownHeight=e=>{this.setInitialContentHeight();const i=this.getKeyAdjustedSize(e);typeof i=="number"&&this.setContentHeight(i)},this.separatorKeyDown=e=>{this.layout==="horizontal"?this.initialKeydownHeight(e):this.initialKeydownWidth(e)},this.separatorPointerMove=e=>{e.preventDefault();const{el:i,layout:n,initialContentWidth:s,initialContentHeight:h,position:f,initialClientX:m,initialClientY:v}=this,x=n==="horizontal"?e.clientY-v:e.clientX-m,M=n==="vertical"&&Ua(i)==="rtl"?-1:1,$=f==="end"?-M*x:M*x;n==="horizontal"?this.setContentHeight(h+$):this.setContentWidth(s+$)},this.separatorPointerUp=e=>{W4(e)&&(this.calciteInternalShellPanelResizeEnd.emit(),e.preventDefault(),window.removeEventListener("pointerup",this.separatorPointerUp),window.removeEventListener("pointermove",this.separatorPointerMove))},this.setInitialContentHeight=()=>{var e;this.initialContentHeight=(e=this.contentEl)==null?void 0:e.getBoundingClientRect().height},this.setInitialContentWidth=()=>{var e;this.initialContentWidth=(e=this.contentEl)==null?void 0:e.getBoundingClientRect().width},this.separatorPointerDown=e=>{if(!W4(e))return;this.calciteInternalShellPanelResizeStart.emit(),e.preventDefault();const{separatorEl:i}=this;i&&document.activeElement!==i&&i.focus(),this.layout==="horizontal"?(this.setInitialContentHeight(),this.initialClientY=e.clientY):(this.setInitialContentWidth(),this.initialClientX=e.clientX),window.addEventListener("pointerup",this.separatorPointerUp),window.addEventListener("pointermove",this.separatorPointerMove)},this.connectSeparator=e=>{this.disconnectSeparator(),this.separatorEl=e,e==null||e.addEventListener("pointerdown",this.separatorPointerDown)},this.disconnectSeparator=()=>{var e;(e=this.separatorEl)==null||e.removeEventListener("pointerdown",this.separatorPointerDown)},this.setActionBarsLayout=e=>{e.forEach(i=>i.layout=this.layout)},this.handleActionBarSlotChange=e=>{const i=Nf(e).filter(n=>n==null?void 0:n.matches("calcite-action-bar"));this.actionBars=i,this.setActionBarsLayout(i)},this.handleHeaderSlotChange=e=>{this.hasHeader=Di(e)},this.collapsed=!1,this.detached=!1,this.displayMode="dock",this.detachedHeightScale=void 0,this.heightScale=void 0,this.widthScale="m",this.layout="vertical",this.position="start",this.resizable=!1,this.messages=void 0,this.messageOverrides=void 0,this.contentWidth=null,this.contentHeight=null,this.defaultMessages=void 0,this.effectiveLocale="",this.hasHeader=!1}handleDetached(e){e?this.displayMode="float":this.displayMode==="float"&&(this.displayMode="dock")}handleDisplayMode(e){this.detached=e==="float"}handleDetachedHeightScale(e){this.heightScale=e}handleHeightScale(e){this.detachedHeightScale=e}layoutHandler(){this.setActionBarsLayout(this.actionBars)}onMessagesChange(){}connectedCallback(){YH(this),po(this),yo(this)}async componentWillLoad(){await go(this)}disconnectedCallback(){XH(this),this.disconnectSeparator(),fo(this),vo(this)}componentDidLoad(){this.updateAriaValues()}effectiveLocaleChange(){mo(this,this.effectiveLocale)}renderHeader(){return X("div",{class:Mu.contentHeader,hidden:!this.hasHeader,key:"header"},X("slot",{name:dI.header,onSlotchange:this.handleHeaderSlotChange}))}render(){const{collapsed:e,position:i,initialContentWidth:n,initialContentHeight:s,contentWidth:h,contentWidthMax:f,contentWidthMin:m,contentHeight:v,contentHeightMax:x,contentHeightMin:M,resizable:$,layout:I,displayMode:P}=this,L=Ua(this.el),z=P!=="float"&&$,F=z?I==="horizontal"?v?{height:`${v}px`}:null:h?{width:`${h}px`}:null:null,U=!e&&z?X("div",{"aria-label":this.messages.resize,"aria-orientation":I==="horizontal"?"vertical":"horizontal","aria-valuemax":I=="horizontal"?x:f,"aria-valuemin":I=="horizontal"?M:m,"aria-valuenow":I=="horizontal"?v??s:h??n,class:Mu.separator,key:"separator",onKeyDown:this.separatorKeyDown,ref:this.connectSeparator,role:"separator",tabIndex:0,"touch-action":"none"}):null,W=()=>I==="horizontal"?i==="start"?tc.calciteAnimateInDown:tc.calciteAnimateInUp:L==="ltr"&&i==="end"||L==="rtl"&&i==="start"?tc.calciteAnimateInLeft:tc.calciteAnimateInRight,K=X("div",{class:{[tc.rtl]:L==="rtl",[Mu.content]:!0,[Mu.contentOverlay]:P==="overlay",[Mu.contentFloat]:P==="float",[tc.calciteAnimate]:P==="overlay",[W()]:P==="overlay"},hidden:e,key:"content",ref:this.storeContentEl,style:F},this.renderHeader(),X("div",{class:Mu.contentBody},X("slot",null)),U),te=[X("slot",{key:"action-bar",name:dI.actionBar,onSlotchange:this.handleActionBarSlotChange}),K];return i==="end"&&te.reverse(),X("div",{class:{[Mu.container]:!0}},te)}setContentWidth(e){const{contentWidthMax:i,contentWidthMin:n}=this,s=Math.round(e);this.contentWidth=typeof i=="number"&&typeof n=="number"?uI(s,n,i):s}updateAriaValues(){const{contentEl:e}=this,i=e&&getComputedStyle(e);i&&(this.layout==="horizontal"?this.updateHeights(i):this.updateWidths(i),pu(this))}setContentHeight(e){const{contentHeightMax:i,contentHeightMin:n}=this,s=Math.round(e);this.contentHeight=typeof i=="number"&&typeof n=="number"?uI(s,n,i):s}updateWidths(e){const i=parseInt(e.getPropertyValue("max-width"),10),n=parseInt(e.getPropertyValue("min-width"),10),s=parseInt(e.getPropertyValue("width"),10);typeof s=="number"&&!isNaN(s)&&(this.initialContentWidth=s),typeof i=="number"&&!isNaN(i)&&(this.contentWidthMax=i),typeof n=="number"&&!isNaN(n)&&(this.contentWidthMin=n)}updateHeights(e){const i=parseInt(e.getPropertyValue("max-height"),10),n=parseInt(e.getPropertyValue("min-height"),10),s=parseInt(e.getPropertyValue("height"),10);typeof s=="number"&&!isNaN(s)&&(this.initialContentHeight=s),typeof i=="number"&&!isNaN(i)&&(this.contentHeightMax=i),typeof n=="number"&&!isNaN(n)&&(this.contentHeightMin=n)}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{detached:["handleDetached"],displayMode:["handleDisplayMode"],detachedHeightScale:["handleDetachedHeightScale"],heightScale:["handleHeightScale"],layout:["layoutHandler"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return T5e}},[1,"calcite-shell-panel",{collapsed:[516],detached:[516],displayMode:[513,"display-mode"],detachedHeightScale:[513,"detached-height-scale"],heightScale:[513,"height-scale"],widthScale:[513,"width-scale"],layout:[513],position:[513],resizable:[516],messages:[1040],messageOverrides:[1040],contentWidth:[32],contentHeight:[32],defaultMessages:[32],effectiveLocale:[32],hasHeader:[32]},void 0,{detached:["handleDetached"],displayMode:["handleDisplayMode"],detachedHeightScale:["handleDetachedHeightScale"],heightScale:["handleHeightScale"],layout:["layoutHandler"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function E5e(){if(typeof customElements>"u")return;["calcite-shell-panel"].forEach(e=>{switch(e){case"calcite-shell-panel":customElements.get(e)||customElements.define(e,M5e);break}})}E5e();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */function pI(t,e){return(t+e)%e}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */const Ao={button:"button",buttonTextVisible:"button--text-visible",buttonCompact:"button--compact",indicatorText:"indicator-text",iconContainer:"icon-container",slotContainer:"slot-container",slotContainerHidden:"slot-container--hidden",textContainer:"text-container",textContainerVisible:"text-container--visible",indicatorWithIcon:"indicator-with-icon",indicatorWithoutIcon:"indicator-without-icon"},k5e={tooltip:"tooltip"},$5e=`:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;background-color:transparent;--calcite-action-indicator-color:var(--calcite-color-brand);--calcite-action-color-transparent-hover:var(--calcite-color-transparent-hover);--calcite-action-color-transparent-press:var(--calcite-color-transparent-press)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.button{position:relative;margin:0px;display:flex;inline-size:auto;cursor:pointer;align-items:center;justify-content:flex-start;border-style:none;background-color:var(--calcite-color-foreground-1);fill:var(--calcite-color-text-3);font-family:var(--calcite-font-family);font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-3);outline-color:transparent;text-align:unset;flex:1 0 auto}.button:hover{background-color:var(--calcite-color-foreground-2);fill:var(--calcite-color-text-1);color:var(--calcite-color-text-1)}.button:focus{background-color:var(--calcite-color-foreground-2);fill:var(--calcite-color-text-1);color:var(--calcite-color-text-1);outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}.button:active{background-color:var(--calcite-color-foreground-3)}.button .icon-container{pointer-events:none;margin:0px;display:flex;align-items:center;justify-content:center;min-inline-size:1rem;min-block-size:1.5rem}.button .text-container{margin:0px;inline-size:0px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:1.5rem;opacity:0;transition-property:opacity;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-property:margin;transition-property:inline-size}.button .text-container--visible{inline-size:auto;flex:1 1 auto;opacity:1}:host([data-active]) .button{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}:host([scale=s]) .button{padding-inline:0.5rem;padding-block:0.25rem;font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-normal)}:host([scale=s]) .button--text-visible .icon-container{margin-inline-end:0.5rem}:host([scale=m]) .button{padding-inline:1rem;padding-block:0.75rem;font-size:var(--calcite-font-size--1);line-height:1rem;font-weight:var(--calcite-font-weight-normal)}:host([scale=m]) .button--text-visible .icon-container{margin-inline-end:0.75rem}:host([scale=l]) .button{padding:1.25rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;font-weight:var(--calcite-font-weight-normal)}:host([scale=l]) .button--text-visible .icon-container{margin-inline-end:1rem}:host([alignment=center]) .button{justify-content:center}:host([alignment=end]) .button{justify-content:flex-end}:host([alignment=center]) .button .text-container--visible,:host([alignment=end]) .button .text-container--visible{flex:0 1 auto}:host([scale=s][compact]) .button,:host([scale=m][compact]) .button,:host([scale=l][compact]) .button{padding-inline:0px}.slot-container{display:flex}.slot-container--hidden{display:none}.button--text-visible{inline-size:100%}:host([active]) .button,:host([active]) .button:hover,:host([active]) .button:focus,:host([active][loading]) .button{background-color:var(--calcite-color-foreground-3);fill:var(--calcite-color-text-1);color:var(--calcite-color-text-1)}:host([appearance=transparent]) .button{background-color:transparent;transition-property:box-shadow;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}:host([active]) .button:active{background-color:var(--calcite-color-foreground-1)}:host([appearance=transparent][active]) .button,:host([appearance=transparent]) .button:hover,:host([appearance=transparent]) .button:focus{background-color:var(--calcite-action-color-transparent-hover)}:host([appearance=transparent]) .button:active{background-color:var(--calcite-action-color-transparent-press)}:host([appearance=transparent][disabled]) .button{background-color:transparent}:host([loading][appearance=solid]) .button,:host([loading][appearance=solid]) .button:hover,:host([loading][appearance=solid]) .button:focus{background-color:var(--calcite-color-foreground-1)}:host([loading][appearance=solid]) .button .text-container,:host([loading][appearance=solid]) .button:hover .text-container,:host([loading][appearance=solid]) .button:focus .text-container{opacity:var(--calcite-opacity-disabled)}:host([loading]) calcite-loader[inline]{color:var(--calcite-color-text-3);margin-inline-end:0px}:host([disabled]) .button,:host([disabled]) .button:hover,:host([disabled]) .button:focus{cursor:default;background-color:var(--calcite-color-foreground-1);opacity:var(--calcite-opacity-disabled)}:host([disabled][active]) .button,:host([disabled][active]) .button:hover,:host([disabled][active]) .button:focus{background-color:var(--calcite-color-foreground-3);opacity:var(--calcite-opacity-disabled)}.indicator-with-icon{position:relative}.indicator-with-icon::after{content:"";position:absolute;block-size:0.5rem;inline-size:0.5rem;border-radius:9999px;inset-block-end:-0.275rem;inset-inline-end:-0.275rem;background-color:var(--calcite-action-indicator-color)}.indicator-without-icon{margin-inline:0.25rem;inline-size:1rem;position:relative}.indicator-without-icon::after{content:"";position:absolute;block-size:0.5rem;inline-size:0.5rem;border-radius:9999px;inset-block-end:-0.275rem;inset-inline-end:-0.275rem;background-color:var(--calcite-action-indicator-color)}.indicator-text{position:absolute;inline-size:1px;block-size:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}:host([hidden]){display:none}[hidden]{display:none}`,C5e=$5e,I5e=oi(class extends ai{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.mutationObserver=Wi("mutation",()=>pu(this)),this.guid=`calcite-action-${hl()}`,this.indicatorId=`${this.guid}-indicator`,this.buttonId=`${this.guid}-button`,this.handleTooltipSlotChange=e=>{const n=e.target.assignedElements({flatten:!0}).filter(s=>s==null?void 0:s.matches("calcite-tooltip"))[0];n&&(n.referenceElement=this.buttonEl)},this.active=!1,this.alignment=void 0,this.appearance="solid",this.compact=!1,this.disabled=!1,this.icon=void 0,this.iconFlipRtl=!1,this.indicator=!1,this.label=void 0,this.loading=!1,this.scale="m",this.text=void 0,this.textEnabled=!1,this.messages=void 0,this.messageOverrides=void 0,this.effectiveLocale="",this.defaultMessages=void 0}onMessagesChange(){}effectiveLocaleChange(){mo(this,this.effectiveLocale)}connectedCallback(){var e;$c(this),po(this),yo(this),(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0})}async componentWillLoad(){co(this),await go(this)}componentDidLoad(){ho(this)}disconnectedCallback(){var e;Cc(this),fo(this),vo(this),(e=this.mutationObserver)==null||e.disconnect()}componentDidRender(){ul(this)}async setFocus(){var e;await uo(this),(e=this.buttonEl)==null||e.focus()}renderTextContainer(){const{text:e,textEnabled:i}=this,n={[Ao.textContainer]:!0,[Ao.textContainerVisible]:i};return e?X("div",{class:n,key:"text-container"},e):null}renderIndicatorText(){const{indicator:e,messages:i,indicatorId:n,buttonId:s}=this;return X("div",{"aria-labelledby":s,"aria-live":"polite",class:Ao.indicatorText,id:n,role:"region"},e?i.indicator:null)}renderIconContainer(){var P;const{loading:e,icon:i,scale:n,el:s,iconFlipRtl:h,indicator:f}=this,m=n==="l"?"l":"m",v=e?X("calcite-loader",{inline:!0,label:this.messages.loading,scale:m}):null,x=i?X("calcite-icon",{class:{[Ao.indicatorWithIcon]:f},flipRtl:h,icon:i,scale:Ui(this.scale)}):null,M=v||x,$=M||((P=s.children)==null?void 0:P.length),I=X("div",{class:{[Ao.slotContainer]:!0,[Ao.slotContainerHidden]:e}},X("slot",null));return $?X("div",{"aria-hidden":"true",class:Ao.iconContainer,key:"icon-container"},M,I):null}render(){const{active:e,compact:i,disabled:n,icon:s,loading:h,textEnabled:f,label:m,text:v,indicator:x,indicatorId:M,buttonId:$,messages:I}=this,P=m||v,L=P?`${P}${x?` (${I.indicator})`:""}`:"",z={[Ao.button]:!0,[Ao.buttonTextVisible]:f,[Ao.buttonCompact]:i};return X(cn,{key:"65eaab1b65898e61d89af57f9d16048496eaf035"},X(dl,{key:"6b412d3af4e4300d12024a8afec2e80d77d00c01",disabled:n},X("button",{key:"d6553a8c2fa4f4d81519bbfa1723e0992cc24092","aria-busy":bn(h),"aria-controls":x?M:null,"aria-disabled":bn(n),"aria-label":L,"aria-pressed":bn(e),class:z,disabled:n,id:$,ref:F=>this.buttonEl=F},this.renderIconContainer(),this.renderTextContainer(),!s&&x&&X("div",{class:Ao.indicatorWithoutIcon,key:"indicator-no-icon"})),X("slot",{key:"7b3ff5bf2884b655e5704ae0b68c0ff71c1177d1",name:k5e.tooltip,onSlotchange:this.handleTooltipSlotChange}),this.renderIndicatorText()))}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return C5e}},[1,"calcite-action",{active:[516],alignment:[513],appearance:[513],compact:[516],disabled:[516],icon:[1],iconFlipRtl:[516,"icon-flip-rtl"],indicator:[516],label:[1],loading:[516],scale:[513],text:[1],textEnabled:[516,"text-enabled"],messages:[1040],messageOverrides:[1040],effectiveLocale:[32],defaultMessages:[32],setFocus:[64]},void 0,{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function B3(){if(typeof customElements>"u")return;["calcite-action","calcite-icon","calcite-loader"].forEach(e=>{switch(e){case"calcite-action":customElements.get(e)||customElements.define(e,I5e);break;case"calcite-icon":customElements.get(e)||Mr();break;case"calcite-loader":customElements.get(e)||fu();break}})}B3();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 *//*!
* focus-trap 7.5.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function fI(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),i.push.apply(i,n)}return i}function gI(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?fI(Object(i),!0).forEach(function(n){A5e(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):fI(Object(i)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))})}return t}function A5e(t,e,i){return e=P5e(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function O5e(t,e){if(typeof t!="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var n=i.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function P5e(t){var e=O5e(t,"string");return typeof e=="symbol"?e:String(e)}var mI={activateTrap:function(e,i){if(e.length>0){var n=e[e.length-1];n!==i&&n.pause()}var s=e.indexOf(i);s===-1||e.splice(s,1),e.push(i)},deactivateTrap:function(e,i){var n=e.indexOf(i);n!==-1&&e.splice(n,1),e.length>0&&e[e.length-1].unpause()}},R5e=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},L5e=function(e){return(e==null?void 0:e.key)==="Escape"||(e==null?void 0:e.key)==="Esc"||(e==null?void 0:e.keyCode)===27},Ng=function(e){return(e==null?void 0:e.key)==="Tab"||(e==null?void 0:e.keyCode)===9},N5e=function(e){return Ng(e)&&!e.shiftKey},D5e=function(e){return Ng(e)&&e.shiftKey},yI=function(e){return setTimeout(e,0)},vI=function(e,i){var n=-1;return e.every(function(s,h){return i(s)?(n=h,!1):!0}),n},d1=function(e){for(var i=arguments.length,n=new Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];return typeof e=="function"?e.apply(void 0,n):e},yv=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},z5e=[],F5e=function(e,i){var n=(i==null?void 0:i.document)||document,s=(i==null?void 0:i.trapStack)||z5e,h=gI({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:N5e,isKeyBackward:D5e},i),f={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},m,v=function(se,ce,ue){return se&&se[ce]!==void 0?se[ce]:h[ue||ce]},x=function(se,ce){var ue=typeof(ce==null?void 0:ce.composedPath)=="function"?ce.composedPath():void 0;return f.containerGroups.findIndex(function(Ae){var je=Ae.container,Ge=Ae.tabbableNodes;return je.contains(se)||(ue==null?void 0:ue.includes(je))||Ge.find(function(He){return He===se})})},M=function(se){var ce=h[se];if(typeof ce=="function"){for(var ue=arguments.length,Ae=new Array(ue>1?ue-1:0),je=1;je<ue;je++)Ae[je-1]=arguments[je];ce=ce.apply(void 0,Ae)}if(ce===!0&&(ce=void 0),!ce){if(ce===void 0||ce===!1)return ce;throw new Error("`".concat(se,"` was specified but was not a node, or did not return a node"))}var Ge=ce;if(typeof ce=="string"&&(Ge=n.querySelector(ce),!Ge))throw new Error("`".concat(se,"` as selector refers to no known node"));return Ge},$=function(){var se=M("initialFocus");if(se===!1)return!1;if(se===void 0||!e5(se,h.tabbableOptions))if(x(n.activeElement)>=0)se=n.activeElement;else{var ce=f.tabbableGroups[0],ue=ce&&ce.firstTabbableNode;se=ue||M("fallbackFocus")}if(!se)throw new Error("Your focus-trap needs to have at least one focusable element");return se},I=function(){if(f.containerGroups=f.containers.map(function(se){var ce=Sj(se,h.tabbableOptions),ue=Lfe(se,h.tabbableOptions),Ae=ce.length>0?ce[0]:void 0,je=ce.length>0?ce[ce.length-1]:void 0,Ge=ue.find(function(jt){return Cp(jt)}),He=ue.slice().reverse().find(function(jt){return Cp(jt)}),mt=!!ce.find(function(jt){return hd(jt)>0});return{container:se,tabbableNodes:ce,focusableNodes:ue,posTabIndexesFound:mt,firstTabbableNode:Ae,lastTabbableNode:je,firstDomTabbableNode:Ge,lastDomTabbableNode:He,nextTabbableNode:function(ki){var or=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,pi=ce.indexOf(ki);return pi<0?or?ue.slice(ue.indexOf(ki)+1).find(function(wi){return Cp(wi)}):ue.slice(0,ue.indexOf(ki)).reverse().find(function(wi){return Cp(wi)}):ce[pi+(or?1:-1)]}}}),f.tabbableGroups=f.containerGroups.filter(function(se){return se.tabbableNodes.length>0}),f.tabbableGroups.length<=0&&!M("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(f.containerGroups.find(function(se){return se.posTabIndexesFound})&&f.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},P=function ve(se){var ce=se.activeElement;if(ce)return ce.shadowRoot&&ce.shadowRoot.activeElement!==null?ve(ce.shadowRoot):ce},L=function ve(se){if(se!==!1&&se!==P(document)){if(!se||!se.focus){ve($());return}se.focus({preventScroll:!!h.preventScroll}),f.mostRecentlyFocusedNode=se,R5e(se)&&se.select()}},z=function(se){var ce=M("setReturnFocus",se);return ce||(ce===!1?!1:se)},F=function(se){var ce=se.target,ue=se.event,Ae=se.isBackward,je=Ae===void 0?!1:Ae;ce=ce||yv(ue),I();var Ge=null;if(f.tabbableGroups.length>0){var He=x(ce,ue),mt=He>=0?f.containerGroups[He]:void 0;if(He<0)je?Ge=f.tabbableGroups[f.tabbableGroups.length-1].lastTabbableNode:Ge=f.tabbableGroups[0].firstTabbableNode;else if(je){var jt=vI(f.tabbableGroups,function(Is){var _o=Is.firstTabbableNode;return ce===_o});if(jt<0&&(mt.container===ce||e5(ce,h.tabbableOptions)&&!Cp(ce,h.tabbableOptions)&&!mt.nextTabbableNode(ce,!1))&&(jt=He),jt>=0){var ki=jt===0?f.tabbableGroups.length-1:jt-1,or=f.tabbableGroups[ki];Ge=hd(ce)>=0?or.lastTabbableNode:or.lastDomTabbableNode}else Ng(ue)||(Ge=mt.nextTabbableNode(ce,!1))}else{var pi=vI(f.tabbableGroups,function(Is){var _o=Is.lastTabbableNode;return ce===_o});if(pi<0&&(mt.container===ce||e5(ce,h.tabbableOptions)&&!Cp(ce,h.tabbableOptions)&&!mt.nextTabbableNode(ce))&&(pi=He),pi>=0){var wi=pi===f.tabbableGroups.length-1?0:pi+1,wo=f.tabbableGroups[wi];Ge=hd(ce)>=0?wo.firstTabbableNode:wo.firstDomTabbableNode}else Ng(ue)||(Ge=mt.nextTabbableNode(ce))}}else Ge=M("fallbackFocus");return Ge},U=function(se){var ce=yv(se);if(!(x(ce,se)>=0)){if(d1(h.clickOutsideDeactivates,se)){m.deactivate({returnFocus:h.returnFocusOnDeactivate});return}d1(h.allowOutsideClick,se)||se.preventDefault()}},W=function(se){var ce=yv(se),ue=x(ce,se)>=0;if(ue||ce instanceof Document)ue&&(f.mostRecentlyFocusedNode=ce);else{se.stopImmediatePropagation();var Ae,je=!0;if(f.mostRecentlyFocusedNode)if(hd(f.mostRecentlyFocusedNode)>0){var Ge=x(f.mostRecentlyFocusedNode),He=f.containerGroups[Ge].tabbableNodes;if(He.length>0){var mt=He.findIndex(function(jt){return jt===f.mostRecentlyFocusedNode});mt>=0&&(h.isKeyForward(f.recentNavEvent)?mt+1<He.length&&(Ae=He[mt+1],je=!1):mt-1>=0&&(Ae=He[mt-1],je=!1))}}else f.containerGroups.some(function(jt){return jt.tabbableNodes.some(function(ki){return hd(ki)>0})})||(je=!1);else je=!1;je&&(Ae=F({target:f.mostRecentlyFocusedNode,isBackward:h.isKeyBackward(f.recentNavEvent)})),L(Ae||f.mostRecentlyFocusedNode||$())}f.recentNavEvent=void 0},K=function(se){var ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;f.recentNavEvent=se;var ue=F({event:se,isBackward:ce});ue&&(Ng(se)&&se.preventDefault(),L(ue))},J=function(se){if(L5e(se)&&d1(h.escapeDeactivates,se)!==!1){se.preventDefault(),m.deactivate();return}(h.isKeyForward(se)||h.isKeyBackward(se))&&K(se,h.isKeyBackward(se))},te=function(se){var ce=yv(se);x(ce,se)>=0||d1(h.clickOutsideDeactivates,se)||d1(h.allowOutsideClick,se)||(se.preventDefault(),se.stopImmediatePropagation())},ie=function(){if(f.active)return mI.activateTrap(s,m),f.delayInitialFocusTimer=h.delayInitialFocus?yI(function(){L($())}):L($()),n.addEventListener("focusin",W,!0),n.addEventListener("mousedown",U,{capture:!0,passive:!1}),n.addEventListener("touchstart",U,{capture:!0,passive:!1}),n.addEventListener("click",te,{capture:!0,passive:!1}),n.addEventListener("keydown",J,{capture:!0,passive:!1}),m},le=function(){if(f.active)return n.removeEventListener("focusin",W,!0),n.removeEventListener("mousedown",U,!0),n.removeEventListener("touchstart",U,!0),n.removeEventListener("click",te,!0),n.removeEventListener("keydown",J,!0),m},de=function(se){var ce=se.some(function(ue){var Ae=Array.from(ue.removedNodes);return Ae.some(function(je){return je===f.mostRecentlyFocusedNode})});ce&&L($())},xe=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(de):void 0,we=function(){xe&&(xe.disconnect(),f.active&&!f.paused&&f.containers.map(function(se){xe.observe(se,{subtree:!0,childList:!0})}))};return m={get active(){return f.active},get paused(){return f.paused},activate:function(se){if(f.active)return this;var ce=v(se,"onActivate"),ue=v(se,"onPostActivate"),Ae=v(se,"checkCanFocusTrap");Ae||I(),f.active=!0,f.paused=!1,f.nodeFocusedBeforeActivation=n.activeElement,ce==null||ce();var je=function(){Ae&&I(),ie(),we(),ue==null||ue()};return Ae?(Ae(f.containers.concat()).then(je,je),this):(je(),this)},deactivate:function(se){if(!f.active)return this;var ce=gI({onDeactivate:h.onDeactivate,onPostDeactivate:h.onPostDeactivate,checkCanReturnFocus:h.checkCanReturnFocus},se);clearTimeout(f.delayInitialFocusTimer),f.delayInitialFocusTimer=void 0,le(),f.active=!1,f.paused=!1,we(),mI.deactivateTrap(s,m);var ue=v(ce,"onDeactivate"),Ae=v(ce,"onPostDeactivate"),je=v(ce,"checkCanReturnFocus"),Ge=v(ce,"returnFocus","returnFocusOnDeactivate");ue==null||ue();var He=function(){yI(function(){Ge&&L(z(f.nodeFocusedBeforeActivation)),Ae==null||Ae()})};return Ge&&je?(je(z(f.nodeFocusedBeforeActivation)).then(He,He),this):(He(),this)},pause:function(se){if(f.paused||!f.active)return this;var ce=v(se,"onPause"),ue=v(se,"onPostPause");return f.paused=!0,ce==null||ce(),le(),we(),ue==null||ue(),this},unpause:function(se){if(!f.paused||!f.active)return this;var ce=v(se,"onUnpause"),ue=v(se,"onPostUnpause");return f.paused=!1,ce==null||ce(),I(),ie(),we(),ue==null||ue(),this},updateContainerElements:function(se){var ce=[].concat(se).filter(Boolean);return f.containers=ce.map(function(ue){return typeof ue=="string"?n.querySelector(ue):ue}),f.active&&I(),we(),this}},m.updateContainerElements(e),m};function j5e(t,e){const{el:i}=t,n=i;if(!n)return;const s={clickOutsideDeactivates:!0,escapeDeactivates:!1,fallbackFocus:n,setReturnFocus:h=>(i0(h),!1),...e==null?void 0:e.focusTrapOptions,document:i.ownerDocument,tabbableOptions:Tj,trapStack:rue};t.focusTrap=F5e(n,s)}function bI(t,e){var i;t.focusTrapDisabled||(i=t.focusTrap)==null||i.activate(e)}function M5(t,e){var i;(i=t.focusTrap)==null||i.deactivate(e)}function G5e(t){var e;(e=t.focusTrap)==null||e.updateContainerElements(t.el)}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */const QH=(t,e)=>{const i=t.level?`h${t.level}`:"div";return delete t.level,X(i,{...t},e)};/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */class V5e{constructor(){this.registeredElements=new Map,this.registeredElementCount=0,this.queryPopover=e=>{const{registeredElements:i}=this,n=e.find(s=>i.has(s));return i.get(n)},this.togglePopovers=e=>{const i=e.composedPath(),n=this.queryPopover(i);n&&!n.triggerDisabled&&(n.open=!n.open),Array.from(this.registeredElements.values()).filter(s=>s!==n&&s.autoClose&&s.open&&!i.includes(s)).forEach(s=>s.open=!1)},this.keyDownHandler=e=>{e.defaultPrevented||(e.key==="Escape"?this.closeAllPopovers():y3(e.key)&&this.togglePopovers(e))},this.clickHandler=e=>{Zfe(e)||this.togglePopovers(e)}}registerElement(e,i){this.registeredElementCount++,this.registeredElements.set(e,i),this.registeredElementCount===1&&this.addListeners()}unregisterElement(e){this.registeredElements.delete(e)&&this.registeredElementCount--,this.registeredElementCount===0&&this.removeListeners()}closeAllPopovers(){Array.from(this.registeredElements.values()).forEach(e=>e.open=!1)}addListeners(){window.addEventListener("click",this.clickHandler),window.addEventListener("keydown",this.keyDownHandler)}removeListeners(){window.removeEventListener("click",this.clickHandler),window.removeEventListener("keydown",this.keyDownHandler)}}const kl={container:"container",imageContainer:"image-container",closeButtonContainer:"close-button-container",closeButton:"close-button",content:"content",hasHeader:"has-header",header:"header",headerContent:"header-content",heading:"heading"},H5e="auto",wI="aria-controls",_I="aria-expanded",B5e=":host{--calcite-floating-ui-z-index:var(--calcite-popover-z-index, var(--calcite-z-index-popup));display:block;position:absolute;z-index:var(--calcite-floating-ui-z-index)}.calcite-floating-ui-anim{position:relative;transition:var(--calcite-floating-ui-transition);transition-property:transform, visibility, opacity;opacity:0;box-shadow:0 0 16px 0 rgba(0, 0, 0, 0.16);z-index:var(--calcite-z-index);border-radius:0.25rem}:host([data-placement^=bottom]) .calcite-floating-ui-anim{transform:translateY(-5px)}:host([data-placement^=top]) .calcite-floating-ui-anim{transform:translateY(5px)}:host([data-placement^=left]) .calcite-floating-ui-anim{transform:translateX(5px)}:host([data-placement^=right]) .calcite-floating-ui-anim{transform:translateX(-5px)}:host([data-placement]) .calcite-floating-ui-anim--active{opacity:1;transform:translate(0)}:host([calcite-hydrated-hidden]){visibility:hidden !important;pointer-events:none}.calcite-floating-ui-arrow{pointer-events:none;position:absolute;z-index:calc(var(--calcite-z-index) * -1);fill:var(--calcite-color-foreground-1)}.calcite-floating-ui-arrow__stroke{stroke:var(--calcite-color-border-3)}:host([scale=s]) .heading{padding-inline:0.75rem;padding-block:0.5rem;font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=m]) .heading{padding-inline:1rem;padding-block:0.75rem;font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=l]) .heading{padding-inline:1.25rem;padding-block:1rem;font-size:var(--calcite-font-size-1);line-height:1.375}:host{pointer-events:none}:host([open]){pointer-events:initial}.calcite-floating-ui-anim{border-radius:0.25rem;border-width:1px;border-style:solid;border-color:var(--calcite-color-border-3);background-color:var(--calcite-color-foreground-1)}.arrow::before{outline:1px solid var(--calcite-color-border-3)}.header{display:flex;flex:1 1 auto;align-items:stretch;justify-content:flex-start;border-width:0px;border-block-end-width:1px;border-style:solid;border-block-end-color:var(--calcite-color-border-3)}.heading{margin:0px;display:block;flex:1 1 auto;align-self:center;white-space:normal;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1);word-wrap:break-word;word-break:break-word}.container{position:relative;display:flex;block-size:100%;flex-direction:row;flex-wrap:nowrap;border-radius:0.25rem;color:var(--calcite-color-text-1)}.container.has-header{flex-direction:column}.content{display:flex;block-size:100%;inline-size:100%;flex-direction:column;flex-wrap:nowrap;align-self:center;word-wrap:break-word;word-break:break-word}.close-button-container{display:flex;overflow:hidden;flex:0 0 auto;border-start-end-radius:0.25rem;border-end-end-radius:0.25rem}.has-header .close-button-container{border-end-end-radius:none}::slotted(calcite-panel),::slotted(calcite-flow){block-size:100%}:host([hidden]){display:none}[hidden]{display:none}",U5e=B5e,xI=new V5e,q5e=oi(class extends ai{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calcitePopoverBeforeClose=qe(this,"calcitePopoverBeforeClose",6),this.calcitePopoverClose=qe(this,"calcitePopoverClose",6),this.calcitePopoverBeforeOpen=qe(this,"calcitePopoverBeforeOpen",6),this.calcitePopoverOpen=qe(this,"calcitePopoverOpen",6),this.mutationObserver=Wi("mutation",()=>this.updateFocusTrapElements()),this.guid=`calcite-popover-${hl()}`,this.openTransitionProp="opacity",this.hasLoaded=!1,this.setTransitionEl=e=>{this.transitionEl=e},this.setFilteredPlacements=()=>{const{el:e,flipPlacements:i}=this;this.filteredFlipPlacements=i?gG(i,e):null},this.setUpReferenceElement=(e=!0)=>{this.removeReferences(),this.effectiveReferenceElement=this.getReferenceElement(),bf(this,this.effectiveReferenceElement,this.el);const{el:i,referenceElement:n,effectiveReferenceElement:s}=this;e&&n&&!s&&console.warn(`${i.tagName}: reference-element id "${n}" was not found.`,{el:i}),this.addReferences()},this.getId=()=>this.el.id||this.guid,this.setExpandedAttr=()=>{const{effectiveReferenceElement:e,open:i}=this;e&&"setAttribute"in e&&e.setAttribute(_I,bn(i))},this.addReferences=()=>{const{effectiveReferenceElement:e}=this;if(!e)return;const i=this.getId();"setAttribute"in e&&e.setAttribute(wI,i),xI.registerElement(e,this.el),this.setExpandedAttr()},this.removeReferences=()=>{const{effectiveReferenceElement:e}=this;e&&("removeAttribute"in e&&(e.removeAttribute(wI),e.removeAttribute(_I)),xI.unregisterElement(e))},this.hide=()=>{this.open=!1},this.storeArrowEl=e=>{this.arrowEl=e,this.reposition(!0)},this.autoClose=!1,this.closable=!1,this.flipDisabled=!1,this.focusTrapDisabled=!1,this.pointerDisabled=!1,this.flipPlacements=void 0,this.heading=void 0,this.headingLevel=void 0,this.label=void 0,this.messageOverrides=void 0,this.messages=void 0,this.offsetDistance=yG,this.offsetSkidding=0,this.open=!1,this.overlayPositioning="absolute",this.placement=H5e,this.referenceElement=void 0,this.scale="m",this.triggerDisabled=!1,this.effectiveLocale="",this.floatingLayout="vertical",this.effectiveReferenceElement=void 0,this.defaultMessages=void 0}handleFocusTrapDisabled(e){this.open&&(e?M5(this):bI(this))}flipPlacementsHandler(){this.setFilteredPlacements(),this.reposition(!0)}onMessagesChange(){}offsetDistanceOffsetHandler(){this.reposition(!0)}offsetSkiddingHandler(){this.reposition(!0)}openHandler(){pc(this),this.reposition(!0),this.setExpandedAttr()}overlayPositioningHandler(){this.reposition(!0)}placementHandler(){this.reposition(!0)}referenceElementHandler(){this.setUpReferenceElement(),this.reposition(!0)}effectiveLocaleChange(){mo(this,this.effectiveLocale)}connectedCallback(){this.setFilteredPlacements(),po(this),yo(this),j5e(this),requestAnimationFrame(()=>this.setUpReferenceElement(this.hasLoaded))}async componentWillLoad(){await go(this),co(this)}componentDidLoad(){ho(this),this.referenceElement&&!this.effectiveReferenceElement&&this.setUpReferenceElement(),this.open&&pc(this),this.hasLoaded=!0}disconnectedCallback(){this.removeReferences(),fo(this),vo(this),w3(this,this.effectiveReferenceElement,this.el),M5(this)}async reposition(e=!1){const{el:i,effectiveReferenceElement:n,placement:s,overlayPositioning:h,flipDisabled:f,filteredFlipPlacements:m,offsetDistance:v,offsetSkidding:x,arrowEl:M}=this;return o7(this,{floatingEl:i,referenceEl:n,overlayPositioning:h,placement:s,flipDisabled:f,flipPlacements:m,offsetDistance:v,offsetSkidding:x,arrowEl:M,type:"popover"},e)}async setFocus(){await uo(this),pu(this.el),$j(this.el)}async updateFocusTrapElements(){G5e(this)}getReferenceElement(){const{referenceElement:e,el:i}=this;return(typeof e=="string"?f3(i,{id:e}):e)||null}onBeforeOpen(){this.calcitePopoverBeforeOpen.emit()}onOpen(){this.calcitePopoverOpen.emit(),bI(this)}onBeforeClose(){this.calcitePopoverBeforeClose.emit()}onClose(){this.calcitePopoverClose.emit(),M5(this)}renderCloseButton(){const{messages:e,closable:i}=this;return i?X("div",{class:kl.closeButtonContainer,key:kl.closeButtonContainer},X("calcite-action",{appearance:"transparent",class:kl.closeButton,onClick:this.hide,ref:n=>this.closeButtonEl=n,scale:this.scale,text:e.close},X("calcite-icon",{icon:"x",scale:Ui(this.scale)}))):null}renderHeader(){const{heading:e,headingLevel:i}=this,n=e?X(QH,{class:kl.heading,level:i},e):null;return n?X("div",{class:kl.header,key:kl.header},n,this.renderCloseButton()):null}render(){const{effectiveReferenceElement:e,heading:i,label:n,open:s,pointerDisabled:h,floatingLayout:f}=this,m=e&&s,v=!m,x=h?null:X(vG,{floatingLayout:f,key:"floating-arrow",ref:this.storeArrowEl});return X(cn,{key:"693d249566ca53960cbfd2a5710b56c7bc239d70","aria-hidden":bn(v),"aria-label":n,"aria-live":"polite","calcite-hydrated-hidden":v,id:this.getId(),role:"dialog"},X("div",{key:"5e8b8a5c280cd88f1633787e779e063869e7f568",class:{[o0.animation]:!0,[o0.animationActive]:m},ref:this.setTransitionEl},x,X("div",{key:"e30ef0aac5309e6139f6680b2b5fa8ccbf926bd8",class:{[kl.hasHeader]:!!i,[kl.container]:!0}},this.renderHeader(),X("div",{key:"77ef34667e847684b38d0b131e6340b1ba10ece3",class:kl.content},X("slot",{key:"6f8c40b34eda273acefa8f9ffdd9831726668713"})),i?null:this.renderCloseButton())))}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{focusTrapDisabled:["handleFocusTrapDisabled"],flipPlacements:["flipPlacementsHandler"],messageOverrides:["onMessagesChange"],offsetDistance:["offsetDistanceOffsetHandler"],offsetSkidding:["offsetSkiddingHandler"],open:["openHandler"],overlayPositioning:["overlayPositioningHandler"],placement:["placementHandler"],referenceElement:["referenceElementHandler"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return U5e}},[1,"calcite-popover",{autoClose:[516,"auto-close"],closable:[516],flipDisabled:[516,"flip-disabled"],focusTrapDisabled:[516,"focus-trap-disabled"],pointerDisabled:[516,"pointer-disabled"],flipPlacements:[16],heading:[1],headingLevel:[514,"heading-level"],label:[1],messageOverrides:[1040],messages:[1040],offsetDistance:[514,"offset-distance"],offsetSkidding:[514,"offset-skidding"],open:[1540],overlayPositioning:[513,"overlay-positioning"],placement:[513],referenceElement:[1,"reference-element"],scale:[513],triggerDisabled:[516,"trigger-disabled"],effectiveLocale:[32],floatingLayout:[32],effectiveReferenceElement:[32],defaultMessages:[32],reposition:[64],setFocus:[64],updateFocusTrapElements:[64]},void 0,{focusTrapDisabled:["handleFocusTrapDisabled"],flipPlacements:["flipPlacementsHandler"],messageOverrides:["onMessagesChange"],offsetDistance:["offsetDistanceOffsetHandler"],offsetSkidding:["offsetSkiddingHandler"],open:["openHandler"],overlayPositioning:["overlayPositioningHandler"],placement:["placementHandler"],referenceElement:["referenceElementHandler"],effectiveLocale:["effectiveLocaleChange"]}]);function eM(){if(typeof customElements>"u")return;["calcite-popover","calcite-action","calcite-icon","calcite-loader"].forEach(e=>{switch(e){case"calcite-popover":customElements.get(e)||customElements.define(e,q5e);break;case"calcite-action":customElements.get(e)||B3();break;case"calcite-icon":customElements.get(e)||Mr();break;case"calcite-loader":customElements.get(e)||fu();break}})}eM();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */const SI={menu:"menu",defaultTrigger:"default-trigger"},k6={tooltip:"tooltip",trigger:"trigger"},W5e={menu:"ellipsis"},Z5e="data-active",J5e=":host{box-sizing:border-box;display:flex;flex-direction:column;font-size:var(--calcite-font-size-1);color:var(--calcite-color-text-2)}::slotted(calcite-action-group){border-block-end:1px solid var(--calcite-color-border-3)}::slotted(calcite-action-group:last-child){border-block-end:0}.default-trigger{position:relative;block-size:100%;flex:0 1 auto;align-self:stretch}slot[name=trigger]::slotted(calcite-action),calcite-action::slotted([slot=trigger]){position:relative;block-size:100%;flex:0 1 auto;align-self:stretch}.menu{max-block-size:45vh;flex-direction:column;flex-wrap:nowrap;overflow-y:auto;overflow-x:hidden;outline:2px solid transparent;outline-offset:2px}:host([hidden]){display:none}[hidden]{display:none}",K5e=J5e,Y5e=["ArrowUp","ArrowDown","End","Home"],X5e=oi(class extends ai{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteActionMenuOpen=qe(this,"calciteActionMenuOpen",6),this.actionElements=[],this.guid=`calcite-action-menu-${hl()}`,this.menuId=`${this.guid}-menu`,this.menuButtonId=`${this.guid}-menu-button`,this.connectMenuButtonEl=()=>{const{menuButtonId:e,menuId:i,open:n,label:s}=this,h=this.slottedMenuButtonEl||this.defaultMenuButtonEl;this.menuButtonEl!==h&&(this.disconnectMenuButtonEl(),this.menuButtonEl=h,this.setTooltipReferenceElement(),h&&(h.active=n,h.setAttribute("aria-controls",i),h.setAttribute("aria-expanded",bn(n)),h.setAttribute("aria-haspopup","true"),h.id||(h.id=e),h.label||(h.label=s),h.text||(h.text=s),h.addEventListener("click",this.menuButtonClick),h.addEventListener("keydown",this.menuButtonKeyDown)))},this.disconnectMenuButtonEl=()=>{const{menuButtonEl:e}=this;e&&(e.removeEventListener("click",this.menuButtonClick),e.removeEventListener("keydown",this.menuButtonKeyDown))},this.setMenuButtonEl=e=>{const i=e.target.assignedElements({flatten:!0}).filter(n=>n==null?void 0:n.matches("calcite-action"));this.slottedMenuButtonEl=i[0],this.connectMenuButtonEl()},this.setDefaultMenuButtonEl=e=>{this.defaultMenuButtonEl=e,this.connectMenuButtonEl()},this.handleCalciteActionClick=()=>{this.open=!1,this.setFocus()},this.menuButtonClick=()=>{this.toggleOpen()},this.updateTooltip=e=>{const i=e.target.assignedElements({flatten:!0}).filter(n=>n==null?void 0:n.matches("calcite-tooltip"));this.tooltipEl=i[0],this.setTooltipReferenceElement()},this.setTooltipReferenceElement=()=>{const{tooltipEl:e,expanded:i,menuButtonEl:n,open:s}=this;e&&(e.referenceElement=!i&&!s?n:null)},this.updateAction=(e,i)=>{const{guid:n,activeMenuItemIndex:s}=this,h=`${n}-action-${i}`;e.tabIndex=-1,e.setAttribute("role","menuitem"),e.id||(e.id=h),e.toggleAttribute(Z5e,i===s)},this.updateActions=e=>{e==null||e.forEach(this.updateAction)},this.handleDefaultSlotChange=e=>{const i=e.target.assignedElements({flatten:!0}).reduce((n,s)=>s!=null&&s.matches("calcite-action")?(n.push(s),n):s!=null&&s.matches("calcite-action-group")?n.concat(Array.from(s.querySelectorAll("calcite-action"))):n,[]);this.actionElements=i.filter(n=>!n.disabled&&!n.hidden)},this.menuButtonKeyDown=e=>{const{key:i}=e,{actionElements:n,activeMenuItemIndex:s,open:h}=this;if(n.length){if(y3(i)){if(e.preventDefault(),!h){this.toggleOpen();return}const f=n[s];f?f.click():this.toggleOpen(!1)}if(i==="Tab"){this.open=!1;return}if(i==="Escape"){this.toggleOpen(!1),e.preventDefault();return}this.handleActionNavigation(e,i,n)}},this.handleActionNavigation=(e,i,n)=>{if(!this.isValidKey(i,Y5e))return;if(e.preventDefault(),!this.open){this.toggleOpen(),(i==="Home"||i==="ArrowDown")&&(this.activeMenuItemIndex=0),(i==="End"||i==="ArrowUp")&&(this.activeMenuItemIndex=n.length-1);return}i==="Home"&&(this.activeMenuItemIndex=0),i==="End"&&(this.activeMenuItemIndex=n.length-1);const s=this.activeMenuItemIndex;i==="ArrowUp"&&(this.activeMenuItemIndex=pI(Math.max(s-1,-1),n.length)),i==="ArrowDown"&&(this.activeMenuItemIndex=pI(s+1,n.length))},this.toggleOpenEnd=()=>{this.setFocus(),this.el.removeEventListener("calcitePopoverOpen",this.toggleOpenEnd)},this.toggleOpen=(e=!this.open)=>{this.el.addEventListener("calcitePopoverOpen",this.toggleOpenEnd),this.open=e},this.handlePopoverOpen=()=>{this.open=!0},this.handlePopoverClose=()=>{this.open=!1},this.appearance="solid",this.expanded=!1,this.flipPlacements=void 0,this.label=void 0,this.open=!1,this.overlayPositioning="absolute",this.placement="auto",this.scale=void 0,this.menuButtonEl=void 0,this.activeMenuItemIndex=-1}connectedCallback(){this.connectMenuButtonEl()}componentWillLoad(){co(this)}componentDidLoad(){ho(this)}disconnectedCallback(){this.disconnectMenuButtonEl()}expandedHandler(){this.open=!1,this.setTooltipReferenceElement()}openHandler(e){this.activeMenuItemIndex=this.open?0:-1,this.menuButtonEl&&(this.menuButtonEl.active=e),this.calciteActionMenuOpen.emit(),this.setTooltipReferenceElement()}activeMenuItemIndexHandler(){this.updateActions(this.actionElements)}async setFocus(){return await uo(this),i0(this.menuButtonEl)}renderMenuButton(){const{appearance:e,label:i,scale:n,expanded:s}=this;return X("slot",{name:k6.trigger,onSlotchange:this.setMenuButtonEl},X("calcite-action",{appearance:e,class:SI.defaultTrigger,icon:W5e.menu,ref:this.setDefaultMenuButtonEl,scale:n,text:i,textEnabled:s}))}renderMenuItems(){const{actionElements:e,activeMenuItemIndex:i,open:n,menuId:s,menuButtonEl:h,label:f,placement:m,overlayPositioning:v,flipPlacements:x}=this,M=e[i],$=(M==null?void 0:M.id)||null;return X("calcite-popover",{autoClose:!0,flipPlacements:x,focusTrapDisabled:!0,label:f,offsetDistance:0,onCalcitePopoverClose:this.handlePopoverClose,onCalcitePopoverOpen:this.handlePopoverOpen,open:n,overlayPositioning:v,placement:m,pointerDisabled:!0,referenceElement:h},X("div",{"aria-activedescendant":$,"aria-labelledby":h==null?void 0:h.id,class:SI.menu,id:s,onClick:this.handleCalciteActionClick,role:"menu",tabIndex:-1},X("slot",{onSlotchange:this.handleDefaultSlotChange})))}render(){return X(jT,{key:"9feaace5a0750686cc4ad4e7ac83859cc26a7a20"},this.renderMenuButton(),this.renderMenuItems(),X("slot",{key:"ba73adb74c8c729467f300fd4ff33c7af23f2ad7",name:k6.tooltip,onSlotchange:this.updateTooltip}))}isValidKey(e,i){return!!i.find(n=>n===e)}get el(){return this}static get watchers(){return{expanded:["expandedHandler"],open:["openHandler"],activeMenuItemIndex:["activeMenuItemIndexHandler"]}}static get style(){return K5e}},[1,"calcite-action-menu",{appearance:[513],expanded:[516],flipPlacements:[16],label:[1],open:[1540],overlayPositioning:[513,"overlay-positioning"],placement:[513],scale:[513],menuButtonEl:[32],activeMenuItemIndex:[32],setFocus:[64]},void 0,{expanded:["expandedHandler"],open:["openHandler"],activeMenuItemIndex:["activeMenuItemIndexHandler"]}]);function eB(){if(typeof customElements>"u")return;["calcite-action-menu","calcite-action","calcite-icon","calcite-loader","calcite-popover"].forEach(e=>{switch(e){case"calcite-action-menu":customElements.get(e)||customElements.define(e,X5e);break;case"calcite-action":customElements.get(e)||B3();break;case"calcite-icon":customElements.get(e)||Mr();break;case"calcite-loader":customElements.get(e)||fu();break;case"calcite-popover":customElements.get(e)||eM();break}})}eB();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */const TI={scrim:"scrim",content:"content"},MI={s:72,l:480},Q5e=":host{--calcite-scrim-background:var(--calcite-color-transparent-scrim);position:absolute;inset:0px;z-index:var(--calcite-z-index-overlay);display:flex;block-size:100%;inline-size:100%;flex-direction:column;align-items:stretch}@keyframes calcite-scrim-fade-in{0%{--tw-bg-opacity:0}100%{--tw-text-opacity:1}}.scrim{position:absolute;inset:0px;display:flex;flex-direction:column;align-content:center;align-items:center;justify-content:center;overflow:hidden;animation:calcite-scrim-fade-in var(--calcite-internal-animation-timing-medium) ease-in-out;background-color:var(--calcite-scrim-background, var(--calcite-color-transparent-scrim))}.content{padding:1rem}:host([hidden]){display:none}[hidden]{display:none}",exe=Q5e,txe=oi(class extends ai{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.resizeObserver=Wi("resize",()=>this.handleResize()),this.handleDefaultSlotChange=e=>{this.hasContent=Bfe(e)},this.storeLoaderEl=e=>{this.loaderEl=e,this.handleResize()},this.loading=!1,this.messages=void 0,this.messageOverrides=void 0,this.loaderScale=void 0,this.defaultMessages=void 0,this.effectiveLocale="",this.hasContent=!1}onMessagesChange(){}effectiveLocaleChange(){mo(this,this.effectiveLocale)}connectedCallback(){var e;po(this),yo(this),(e=this.resizeObserver)==null||e.observe(this.el)}async componentWillLoad(){await go(this)}disconnectedCallback(){var e;fo(this),vo(this),(e=this.resizeObserver)==null||e.disconnect()}render(){const{hasContent:e,loading:i,messages:n}=this;return X("div",{key:"f2c728581805bc3a8b98931e55b4d56bc34bd3e0",class:TI.scrim},i?X("calcite-loader",{label:n.loading,ref:this.storeLoaderEl,scale:this.loaderScale}):null,X("div",{key:"eafea949b7d533d951125cae482cab4a7334c003",class:TI.content,hidden:!e},X("slot",{key:"0eebfe6fbe3206b6f75a81086b6abb1b91ea7905",onSlotchange:this.handleDefaultSlotChange})))}getScale(e){return e<MI.s?"s":e>=MI.l?"l":"m"}handleResize(){const{loaderEl:e,el:i}=this;e&&(this.loaderScale=this.getScale(Math.min(i.clientHeight,i.clientWidth)??0))}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return exe}},[1,"calcite-scrim",{loading:[516],messages:[1040],messageOverrides:[1040],loaderScale:[32],defaultMessages:[32],effectiveLocale:[32],hasContent:[32]},void 0,{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function tB(){if(typeof customElements>"u")return;["calcite-scrim","calcite-loader"].forEach(e=>{switch(e){case"calcite-scrim":customElements.get(e)||customElements.define(e,txe);break;case"calcite-loader":customElements.get(e)||fu();break}})}tB();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */const Tn={actionBarContainer:"action-bar-container",backButton:"back-button",container:"container",contentBottom:"content-bottom",contentTop:"content-top",header:"header",headerContainer:"header-container",headerContainerBorderEnd:"header-container--border-end",heading:"heading",summary:"summary",description:"description",headerContent:"header-content",headerActions:"header-actions",headerActionsEnd:"header-actions--end",headerActionsStart:"header-actions--start",contentWrapper:"content-wrapper",fabContainer:"fab-container",footer:"footer"},vv={close:"x",menu:"ellipsis",backLeft:"chevron-left",backRight:"chevron-right",expand:"chevron-down",collapse:"chevron-up"},Ls={actionBar:"action-bar",contentBottom:"content-bottom",contentTop:"content-top",headerActionsStart:"header-actions-start",headerActionsEnd:"header-actions-end",headerMenuActions:"header-menu-actions",headerContent:"header-content",fab:"fab",footer:"footer",footerEnd:"footer-end",footerStart:"footer-start",footerActions:"footer-actions"},ixe=":host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{position:relative;display:flex;block-size:100%;inline-size:100%;flex:1 1 auto;overflow:hidden;--calcite-min-header-height:calc(var(--calcite-icon-size) * 3)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.header{margin:0px;display:flex;align-content:space-between;align-items:center;fill:var(--calcite-color-text-2);color:var(--calcite-color-text-2)}.heading{margin:0px;padding:0px;font-weight:var(--calcite-font-weight-medium)}.header .heading{flex:1 1 auto;padding:0.5rem}:host([scale=s]) .content-top,:host([scale=s]) .content-bottom{padding:var(--calcite-spacing-sm)}:host([scale=m]) .content-top,:host([scale=m]) .content-bottom{padding:var(--calcite-spacing-md)}:host([scale=l]) .content-top,:host([scale=l]) .content-bottom{padding:var(--calcite-spacing-xl)}.content-top,.content-bottom{display:flex;align-items:flex-start;align-self:stretch;padding:var(--calcite-spacing-md);border-block-start:1px solid var(--calcite-color-border-3);background-color:var(--calcite-color-foreground-1)}.container{position:relative;margin:0px;display:flex;inline-size:100%;flex:1 1 auto;flex-direction:column;align-items:stretch;background-color:var(--calcite-color-background);padding:0px;transition:max-block-size var(--calcite-animation-timing), inline-size var(--calcite-animation-timing)}.container[hidden]{display:none}.header{z-index:var(--calcite-z-index-header);display:flex;flex-direction:column;background-color:var(--calcite-color-foreground-1);border-block-end:var(--calcite-panel-header-border-block-end, 1px solid var(--calcite-color-border-3))}.header-container{display:flex;inline-size:100%;flex-direction:row;align-items:stretch;justify-content:flex-start;flex:0 0 auto}.header-container--border-end{border-block-end:1px solid var(--calcite-color-border-3)}.action-bar-container{inline-size:100%}.action-bar-container ::slotted(calcite-action-bar){inline-size:100%}.header-content{display:flex;flex-direction:column;overflow:hidden;padding-inline:0.75rem;padding-block:0.875rem;margin-inline-end:auto}.header-content .heading,.header-content .description{display:block;overflow-wrap:break-word;padding:0px}.header-content .heading{margin-inline:0px;margin-block:0px 0.25rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;font-weight:var(--calcite-font-weight-medium)}.header-content .heading:only-child{margin-block-end:0px}.header-content .description{font-size:var(--calcite-font-size--1);line-height:1rem;color:var(--calcite-color-text-2)}.back-button{border-width:0px;border-style:solid;border-color:var(--calcite-color-border-3);border-inline-end-width:1px}.header-actions{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:stretch}.header-actions--end{margin-inline-start:auto}.content-wrapper{display:flex;block-size:100%;flex:1 1 auto;flex-direction:column;flex-wrap:nowrap;align-items:stretch;overflow:auto;background-color:var(--calcite-color-background)}.footer{margin-block-start:auto;display:flex;flex-direction:row;align-content:space-between;align-items:center;justify-content:center;background-color:var(--calcite-color-foreground-1);border-block-start:1px solid var(--calcite-color-border-3);padding:var(--calcite-spacing-sm);column-gap:0;row-gap:var(--calcite-spacing-md)}slot[name=footer-start]::slotted(*),*::slotted([slot=footer-start]){display:flex;align-self:center;font-size:var(--calcite-font-size--2);line-height:1.375;margin-inline-end:auto;gap:var(--calcite-spacing-md)}slot[name=footer-end]::slotted(*),*::slotted([slot=footer-end]){display:flex;align-self:center;font-size:var(--calcite-font-size--2);line-height:1.375;gap:var(--calcite-spacing-md)}.fab-container{position:sticky;inset-block-end:0px;z-index:var(--calcite-z-index-sticky);margin-block:0px;margin-inline:auto;display:block;padding:0.5rem;inset-inline:0;inline-size:-moz-fit-content;inline-size:fit-content}:host([hidden]){display:none}[hidden]{display:none}",nxe=ixe,rxe=oi(class extends ai{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calcitePanelClose=qe(this,"calcitePanelClose",6),this.calcitePanelToggle=qe(this,"calcitePanelToggle",6),this.calcitePanelScroll=qe(this,"calcitePanelScroll",6),this.resizeObserver=Wi("resize",()=>this.resizeHandler()),this.resizeHandler=()=>{const{panelScrollEl:e}=this;!e||typeof e.scrollHeight!="number"||typeof e.offsetHeight!="number"||(e.tabIndex=e.scrollHeight>e.offsetHeight?0:-1)},this.setContainerRef=e=>{this.containerEl=e},this.panelKeyDownHandler=e=>{this.closable&&e.key==="Escape"&&!e.defaultPrevented&&(this.close(),e.preventDefault())},this.close=()=>{this.closed=!0,this.calcitePanelClose.emit()},this.collapse=()=>{this.collapsed=!this.collapsed,this.calcitePanelToggle.emit()},this.panelScrollHandler=()=>{this.calcitePanelScroll.emit()},this.handleHeaderActionsStartSlotChange=e=>{this.hasStartActions=Di(e)},this.handleHeaderActionsEndSlotChange=e=>{this.hasEndActions=Di(e)},this.handleHeaderMenuActionsSlotChange=e=>{this.hasMenuItems=Di(e)},this.handleActionBarSlotChange=e=>{const i=Nf(e).filter(n=>n==null?void 0:n.matches("calcite-action-bar"));i.forEach(n=>n.layout="horizontal"),this.hasActionBar=!!i.length},this.handleHeaderContentSlotChange=e=>{this.hasHeaderContent=Di(e)},this.handleFabSlotChange=e=>{this.hasFab=Di(e)},this.handleFooterActionsSlotChange=e=>{this.hasFooterActions=Di(e)},this.handleFooterEndSlotChange=e=>{this.hasFooterEndContent=Di(e)},this.handleFooterStartSlotChange=e=>{this.hasFooterStartContent=Di(e)},this.handleFooterSlotChange=e=>{this.hasFooterContent=Di(e)},this.contentBottomSlotChangeHandler=e=>{this.hasContentBottom=Di(e)},this.contentTopSlotChangeHandler=e=>{this.hasContentTop=Di(e)},this.setPanelScrollEl=e=>{var i,n;this.panelScrollEl=e,(i=this.resizeObserver)==null||i.disconnect(),e&&((n=this.resizeObserver)==null||n.observe(e),this.resizeHandler())},this.closed=!1,this.disabled=!1,this.closable=!1,this.collapsed=!1,this.collapseDirection="down",this.collapsible=!1,this.headingLevel=void 0,this.loading=!1,this.heading=void 0,this.description=void 0,this.menuOpen=!1,this.messageOverrides=void 0,this.messages=void 0,this.overlayPositioning="absolute",this.hasStartActions=!1,this.hasEndActions=!1,this.hasMenuItems=!1,this.hasHeaderContent=!1,this.hasActionBar=!1,this.hasContentBottom=!1,this.hasContentTop=!1,this.hasFab=!1,this.hasFooterActions=!1,this.hasFooterContent=!1,this.hasFooterEndContent=!1,this.hasFooterStartContent=!1,this.defaultMessages=void 0,this.effectiveLocale="",this.showHeaderContent=!1}onMessagesChange(){}connectedCallback(){$c(this),po(this),yo(this)}async componentWillLoad(){co(this),await go(this)}componentDidLoad(){ho(this)}componentDidRender(){ul(this)}disconnectedCallback(){var e;Cc(this),fo(this),vo(this),(e=this.resizeObserver)==null||e.disconnect()}effectiveLocaleChange(){mo(this,this.effectiveLocale)}async setFocus(){await uo(this),$j(this.containerEl)}async scrollContentTo(e){var i;(i=this.panelScrollEl)==null||i.scrollTo(e)}renderHeaderContent(){const{heading:e,headingLevel:i,description:n,hasHeaderContent:s}=this,h=e?X(QH,{class:Tn.heading,level:i},e):null,f=n?X("span",{class:Tn.description},n):null;return!s&&(h||f)?X("div",{class:Tn.headerContent,key:"header-content"},h,f):null}renderActionBar(){return X("div",{class:Tn.actionBarContainer,hidden:!this.hasActionBar},X("slot",{name:Ls.actionBar,onSlotchange:this.handleActionBarSlotChange}))}renderHeaderSlottedContent(){return X("div",{class:Tn.headerContent,hidden:!this.hasHeaderContent,key:"slotted-header-content"},X("slot",{name:Ls.headerContent,onSlotchange:this.handleHeaderContentSlotChange}))}renderHeaderStartActions(){const{hasStartActions:e}=this;return X("div",{class:{[Tn.headerActionsStart]:!0,[Tn.headerActions]:!0},hidden:!e,key:"header-actions-start"},X("slot",{name:Ls.headerActionsStart,onSlotchange:this.handleHeaderActionsStartSlotChange}))}renderHeaderActionsEnd(){const{hasEndActions:e,messages:i,closable:n,collapsed:s,collapseDirection:h,collapsible:f,hasMenuItems:m}=this,{collapse:v,expand:x,close:M}=i,$=[vv.expand,vv.collapse];h==="up"&&$.reverse();const I=f?X("calcite-action",{"aria-expanded":bn(!s),"aria-label":v,"data-test":"collapse",icon:s?$[0]:$[1],onClick:this.collapse,text:v,title:s?x:v}):null,P=n?X("calcite-action",{"aria-label":M,"data-test":"close",icon:vv.close,onClick:this.close,text:M,title:M}):null,L=X("slot",{name:Ls.headerActionsEnd,onSlotchange:this.handleHeaderActionsEndSlotChange}),z=e||I||P||m;return X("div",{class:{[Tn.headerActionsEnd]:!0,[Tn.headerActions]:!0},hidden:!z,key:"header-actions-end"},L,this.renderMenu(),I,P)}renderMenu(){const{hasMenuItems:e,messages:i,menuOpen:n}=this;return X("calcite-action-menu",{flipPlacements:["top","bottom"],hidden:!e,key:"menu",label:i.options,open:n,overlayPositioning:this.overlayPositioning,placement:"bottom-end"},X("calcite-action",{icon:vv.menu,slot:k6.trigger,text:i.options}),X("slot",{name:Ls.headerMenuActions,onSlotchange:this.handleHeaderMenuActionsSlotChange}))}renderHeaderNode(){const{hasHeaderContent:e,hasStartActions:i,hasEndActions:n,closable:s,collapsible:h,hasMenuItems:f,hasActionBar:m}=this,v=this.renderHeaderContent(),x=e||!!v||i||n||h||s||f;return this.showHeaderContent=x,X("header",{class:Tn.header,hidden:!(x||m)},X("div",{class:{[Tn.headerContainer]:!0,[Tn.headerContainerBorderEnd]:m},hidden:!x},this.renderHeaderStartActions(),this.renderHeaderSlottedContent(),v,this.renderHeaderActionsEnd()),this.renderActionBar(),this.renderContentTop())}renderFooterNode(){const{hasFooterEndContent:e,hasFooterStartContent:i,hasFooterContent:n,hasFooterActions:s}=this,h=i||e||n||s;return X("footer",{class:Tn.footer,hidden:!h},X("slot",{name:Ls.footer,onSlotchange:this.handleFooterSlotChange},X("slot",{name:Ls.footerStart,onSlotchange:this.handleFooterStartSlotChange}),X("slot",{name:Ls.footerEnd,onSlotchange:this.handleFooterEndSlotChange})),X("slot",{key:"footer-actions-slot",name:Ls.footerActions,onSlotchange:this.handleFooterActionsSlotChange}))}renderContent(){return X("div",{class:Tn.contentWrapper,hidden:this.collapsible&&this.collapsed,onScroll:this.panelScrollHandler,ref:this.setPanelScrollEl},X("slot",null),this.renderFab())}renderContentBottom(){return X("div",{class:Tn.contentBottom,hidden:!this.hasContentBottom},X("slot",{name:Ls.contentBottom,onSlotchange:this.contentBottomSlotChangeHandler}))}renderContentTop(){return X("div",{class:Tn.contentTop,hidden:!this.hasContentTop},X("slot",{name:Ls.contentTop,onSlotchange:this.contentTopSlotChangeHandler}))}renderFab(){return X("div",{class:Tn.fabContainer,hidden:!this.hasFab},X("slot",{name:Ls.fab,onSlotchange:this.handleFabSlotChange}))}render(){const{disabled:e,loading:i,panelKeyDownHandler:n,closed:s,closable:h}=this,f=X("article",{key:"a9ec3de60dbfa095ed5c18040738603975f35882","aria-busy":bn(i),class:Tn.container,hidden:s,ref:this.setContainerRef,tabIndex:h?0:-1},this.renderHeaderNode(),this.renderContent(),this.renderContentBottom(),this.renderFooterNode());return X(cn,{key:"d2dfb299ed634f2e67d3390c5d29386c6faa0373",onKeyDown:n},X(dl,{key:"2f139a9fcb0f57682e0e85ba1a6aec5b53a499d7",disabled:e},i?X("calcite-scrim",{loading:i}):null,f))}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return nxe}},[1,"calcite-panel",{closed:[1540],disabled:[516],closable:[516],collapsed:[516],collapseDirection:[1,"collapse-direction"],collapsible:[516],headingLevel:[514,"heading-level"],loading:[516],heading:[1],description:[1],menuOpen:[516,"menu-open"],messageOverrides:[1040],messages:[1040],overlayPositioning:[513,"overlay-positioning"],hasStartActions:[32],hasEndActions:[32],hasMenuItems:[32],hasHeaderContent:[32],hasActionBar:[32],hasContentBottom:[32],hasContentTop:[32],hasFab:[32],hasFooterActions:[32],hasFooterContent:[32],hasFooterEndContent:[32],hasFooterStartContent:[32],defaultMessages:[32],effectiveLocale:[32],showHeaderContent:[32],setFocus:[64],scrollContentTo:[64]},void 0,{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function sxe(){if(typeof customElements>"u")return;["calcite-panel","calcite-action","calcite-action-menu","calcite-icon","calcite-loader","calcite-popover","calcite-scrim"].forEach(e=>{switch(e){case"calcite-panel":customElements.get(e)||customElements.define(e,rxe);break;case"calcite-action":customElements.get(e)||B3();break;case"calcite-action-menu":customElements.get(e)||eB();break;case"calcite-icon":customElements.get(e)||Mr();break;case"calcite-loader":customElements.get(e)||fu();break;case"calcite-popover":customElements.get(e)||eM();break;case"calcite-scrim":customElements.get(e)||tB();break}})}sxe();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */const oxe={brand:"lightbulb",danger:"exclamationMarkTriangle",info:"information",success:"checkCircle",warning:"exclamationMarkTriangle"};/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */const Ar={title:"title",close:"close",imageContainer:"image-container",chipIcon:"chip-icon",textSlotted:"text--slotted",container:"container",imageSlotted:"image--slotted",closable:"closable",multiple:"multiple",selectable:"selectable",selectIcon:"select-icon",selectIconActive:"select-icon--active",nonInteractive:"non-interactive",isCircle:"is-circle"},axe={image:"image"},bv={close:"x",unchecked:"circle",checkedSingle:"circle-f",checked:"check-circle-f"},lxe=`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host([scale=s]){block-size:1.5rem;font-size:var(--calcite-font-size--2);--calcite-chip-spacing-s-internal:0.25rem;--calcite-chip-spacing-l-internal:0.5rem}:host([scale=s]) .close,:host([scale=s]) .select-icon--active{block-size:1rem;inline-size:1rem}:host([scale=s]) .image-container{block-size:1.25rem;inline-size:1.25rem}:host([scale=s]) .container.is-circle{block-size:1.5rem;inline-size:1.5rem}:host([scale=m]){block-size:2rem;font-size:var(--calcite-font-size--1);--calcite-chip-spacing-s-internal:0.375rem;--calcite-chip-spacing-l-internal:0.5rem}:host([scale=m]) .close,:host([scale=m]) .image-container,:host([scale=m]) .select-icon--active{block-size:1.5rem;inline-size:1.5rem}:host([scale=m]) .container.is-circle{block-size:2rem;inline-size:2rem}:host([scale=l]){block-size:2.75rem;font-size:var(--calcite-font-size-0);--calcite-chip-spacing-s-internal:0.5rem;--calcite-chip-spacing-l-internal:0.75rem}:host([scale=l]) .image-container,:host([scale=l]) .close,:host([scale=l]) .select-icon--active{block-size:2rem;inline-size:2rem}:host([scale=l]) .container.is-circle{block-size:2.75rem;inline-size:2.75rem}:host{display:inline-flex;cursor:default;border-radius:9999px}.container{box-sizing:border-box;display:inline-flex;block-size:100%;max-inline-size:100%;align-items:center;justify-content:center;border-radius:9999px;border-width:1px;border-style:solid;border-color:var(--calcite-color-border-1);font-weight:var(--calcite-font-weight-medium);outline-color:transparent}.container:not(.is-circle){padding-inline:var(--calcite-chip-spacing-s-internal)}.container.selectable{cursor:pointer}.container:not(.non-interactive):focus{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}:host([scale=s]) .container.image--slotted{padding-inline-start:calc(0.125rem / 2)}:host([scale=s]) .container.is-circle{padding-inline:0}.container.text--slotted .title{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding-inline:var(--calcite-chip-spacing-s-internal)}.container:not(.text--slotted) .title{display:none}.container:not(.image--slotted) .image-container{display:none}.container.closable{padding-inline-end:calc(var(--calcite-chip-spacing-l-internal) / 2)}.container:not(.is-circle).image--slotted{padding-inline-start:calc(var(--calcite-chip-spacing-l-internal) / 2)}.container:not(.is-circle).image--slotted .image-container{margin-inline-end:var(--calcite-chip-spacing-s-internal)}.container:not(.is-circle).image--slotted .image-container~.chip-icon{margin-inline-start:var(--calcite-chip-spacing-s-internal)}.container:not(.is-circle).selectable:not(.text--slotted) .chip-icon{margin-inline-end:var(--calcite-chip-spacing-s-internal)}.container:not(.is-circle):not(.selectable):not(.text--slotted) .chip-icon{margin-inline-start:var(--calcite-chip-spacing-s-internal)}.container:not(.is-circle):not(.text--slotted) .chip-icon{margin-inline-end:var(--calcite-chip-spacing-s-internal)}.container:not(.is-circle):not(.text-slotted).image--slotted .image-container{margin-inline-end:var(--calcite-chip-spacing-s-internal)}.container:not(.is-circle):not(.closable):not(.text--slotted).image--slotted.selectable .image-container{margin-inline-end:0}.container:not(.is-circle):not(.closable):not(.text--slotted).image--slotted.selectable .image-container~.chip-icon{margin-inline-start:calc(var(--calcite-chip-spacing-s-internal) * 2)}.chip-icon{position:relative;margin-block:0px;display:inline-flex;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);margin-inline:var(--calcite-chip-spacing-s-internal)}.image-container{display:inline-flex;overflow:hidden;align-items:center;justify-content:center;pointer-events:none}.close{margin:0px;cursor:pointer;align-items:center;border-style:none;background-color:transparent;color:var(--calcite-color-text-1);outline-color:transparent;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;-webkit-appearance:none;display:flex;border-radius:50%;align-content:center;justify-content:center;--calcite-chip-transparent-hover:var(--calcite-color-transparent-hover);--calcite-chip-transparent-press:var(--calcite-color-transparent-press)}.close:hover{background-color:var(--calcite-chip-transparent-hover)}.close:focus{background-color:var(--calcite-chip-transparent-hover);outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}.close:active{background-color:var(--calcite-chip-transparent-press)}.close calcite-icon{color:inherit}.select-icon{align-self:center;justify-content:center;align-items:center;display:flex;inset-block-start:-1px;position:relative;visibility:hidden;inline-size:0;opacity:0;transition:opacity 0.15s ease-in-out, inline-size 0.15s ease-in-out}.select-icon.select-icon--active{visibility:visible;opacity:0.5}.container:not(.is-circle).image--slotted .select-icon.select-icon--active{margin-inline-end:var(--calcite-chip-spacing-s-internal)}:host([selected]) .select-icon{opacity:1}.container:hover .select-icon--active{opacity:1}slot[name=image]::slotted(*){display:flex;block-size:100%;inline-size:100%;overflow:hidden;border-radius:50%}:host([kind=neutral]){background-color:var(--calcite-color-foreground-2);color:var(--calcite-color-text-1)}:host([kind=neutral]) .container{border-color:transparent}:host([kind=neutral]) .close{color:var(--calcite-color-text-3)}:host([kind=neutral]) .chip-icon{color:var(--calcite-ui-icon-color, var(--calcite-color-text-3))}:host([kind=inverse]){background-color:var(--calcite-color-inverse);color:var(--calcite-color-text-inverse)}:host([kind=inverse]) .container{border-color:transparent}:host([kind=inverse]) .close{color:var(--calcite-color-text-inverse)}:host([kind=inverse]) .chip-icon{color:var(--calcite-ui-icon-color, var(--calcite-color-text-inverse))}:host([kind=brand]){background-color:var(--calcite-color-brand);color:var(--calcite-color-text-inverse)}:host([kind=brand]) .container{border-color:transparent}:host([kind=brand]) .close{color:var(--calcite-color-text-inverse)}:host([kind=brand]) .chip-icon{color:var(--calcite-ui-icon-color, var(--calcite-color-text-inverse))}:host([appearance=outline-fill]),:host([appearance=outline]){background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-1)}:host([appearance=outline-fill]) .close,:host([appearance=outline]) .close{color:var(--calcite-color-text-3)}:host([appearance=outline-fill]) .chip-icon,:host([appearance=outline]) .chip-icon{color:var(--calcite-ui-icon-color, var(--calcite-color-text-3))}:host([appearance=outline-fill]){background-color:var(--calcite-color-foreground-1)}:host([appearance=outline]){background-color:transparent}:host([kind=neutral][appearance=outline-fill]) .container,:host([kind=neutral][appearance=outline]) .container{border-color:var(--calcite-color-border-1)}:host([kind=inverse][appearance=outline-fill]) .container,:host([kind=inverse][appearance=outline]) .container{border-color:var(--calcite-color-border-inverse)}:host([kind=brand][appearance=outline-fill]) .container,:host([kind=brand][appearance=outline]) .container{border-color:var(--calcite-color-brand)}:host([kind=brand][appearance=solid]) button,:host([kind=inverse][appearance=solid]) button{outline-color:var(--calcite-color-text-inverse)}:host([closed]){display:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([hidden]){display:none}[hidden]{display:none}`,cxe=lxe,hxe=oi(class extends ai{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteChipClose=qe(this,"calciteChipClose",6),this.calciteChipSelect=qe(this,"calciteChipSelect",6),this.calciteInternalChipKeyEvent=qe(this,"calciteInternalChipKeyEvent",6),this.calciteInternalChipSelect=qe(this,"calciteInternalChipSelect",6),this.calciteInternalSyncSelectedChips=qe(this,"calciteInternalSyncSelectedChips",6),this.handleDefaultSlotChange=()=>{this.updateHasText()},this.close=()=>{this.calciteChipClose.emit(),this.selected=!1,this.closed=!0},this.closeButtonKeyDownHandler=e=>{y3(e.key)&&(e.preventDefault(),this.close())},this.handleSlotImageChange=e=>{this.hasImage=Di(e)},this.handleEmittingEvent=()=>{this.interactive&&this.calciteChipSelect.emit()},this.disabled=!1,this.appearance="solid",this.kind="neutral",this.closable=!1,this.icon=void 0,this.iconFlipRtl=!1,this.scale="m",this.label=void 0,this.value=void 0,this.closed=!1,this.selectionMode="none",this.selected=!1,this.messageOverrides=void 0,this.messages=void 0,this.interactive=!1,this.parentChipGroup=void 0,this.defaultMessages=void 0,this.effectiveLocale=void 0,this.hasText=!1,this.hasImage=!1}watchSelected(e){this.selectionMode!=="none"&&this.handleSelectionPropertyChange(e)}onMessagesChange(){}effectiveLocaleChange(){mo(this,this.effectiveLocale)}connectedCallback(){$c(this),po(this),yo(this)}componentDidLoad(){ho(this),this.selectionMode!=="none"&&this.interactive&&this.selected&&this.handleSelectionPropertyChange(this.selected)}componentDidRender(){ul(this)}disconnectedCallback(){Cc(this),fo(this),vo(this)}async componentWillLoad(){co(this),await go(this),this.updateHasText()}keyDownHandler(e){if(e.target===this.el)switch(e.key){case" ":case"Enter":this.handleEmittingEvent(),e.preventDefault();break;case"ArrowRight":case"ArrowLeft":case"Home":case"End":this.calciteInternalChipKeyEvent.emit(e),e.preventDefault();break}}clickHandler(){!this.interactive&&this.closable&&this.closeButtonEl.focus()}async setFocus(){var e,i;await uo(this),!this.disabled&&this.interactive?(e=this.containerEl)==null||e.focus():!this.disabled&&this.closable&&((i=this.closeButtonEl)==null||i.focus())}updateHasText(){this.hasText=this.el.textContent.trim().length>0}handleSelectionPropertyChange(e){this.selectionMode==="single"&&this.calciteInternalSyncSelectedChips.emit(),!this.parentChipGroup.selectedItems.includes(this.el)&&e&&this.selectionMode!=="multiple"&&this.calciteInternalChipSelect.emit(),this.selectionMode!=="single"&&this.calciteInternalSyncSelectedChips.emit()}renderChipImage(){return X("div",{class:Ar.imageContainer},X("slot",{name:axe.image,onSlotchange:this.handleSlotImageChange}))}renderSelectionIcon(){const e=this.selectionMode==="multiple"&&this.selected?bv.checked:this.selectionMode==="multiple"?bv.unchecked:this.selected?bv.checkedSingle:void 0;return X("div",{class:{[Ar.selectIcon]:!0,[Ar.selectIconActive]:this.selectionMode==="multiple"||this.selected}},e?X("calcite-icon",{icon:e,scale:Ui(this.scale)}):null)}renderCloseButton(){return X("button",{"aria-label":this.messages.dismissLabel,class:Ar.close,onClick:this.close,onKeyDown:this.closeButtonKeyDownHandler,ref:e=>this.closeButtonEl=e,tabIndex:this.disabled?-1:0},X("calcite-icon",{icon:bv.close,scale:Ui(this.scale)}))}renderIcon(){return X("calcite-icon",{class:Ar.chipIcon,flipRtl:this.iconFlipRtl,icon:this.icon,scale:Ui(this.scale)})}render(){const{disabled:e}=this,i=e||!e&&!this.interactive,n=this.selectionMode==="multiple"&&this.interactive?"checkbox":this.selectionMode!=="none"&&this.interactive?"radio":this.interactive?"button":void 0;return X(cn,{key:"cb78643416dd22830dfe6e7d6c42a4e07baf62fa"},X(dl,{key:"7e96047819c7f823aaeabef5c74ca8ff1602c15b",disabled:e},X("div",{key:"34e57dc8c3cfdf2f225d83d7cc9a7adfedd788ae","aria-checked":this.selectionMode!=="none"&&this.interactive?bn(this.selected):void 0,"aria-disabled":i?bn(e):void 0,"aria-label":this.label,class:{[Ar.container]:!0,[Ar.textSlotted]:this.hasText,[Ar.imageSlotted]:this.hasImage,[Ar.selectable]:this.selectionMode!=="none",[Ar.multiple]:this.selectionMode==="multiple",[Ar.closable]:this.closable,[Ar.nonInteractive]:!this.interactive,[Ar.isCircle]:!this.closable&&!this.hasText&&(!this.icon||!this.hasImage)&&(this.selectionMode==="none"||!!this.selectionMode&&this.selectionMode!=="multiple"&&!this.selected)},onClick:this.handleEmittingEvent,ref:s=>this.containerEl=s,role:n,tabIndex:i?-1:0},this.selectionMode!=="none"&&this.renderSelectionIcon(),this.renderChipImage(),this.icon&&this.renderIcon(),X("span",{key:"0e748e3745a3338e2f317728894702b9fb0d370d",class:Ar.title},X("slot",{key:"d21ba7e9353d591b955517f1a254d22d3599e37b",onSlotchange:this.handleDefaultSlotChange})),this.closable&&this.renderCloseButton())))}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{selected:["watchSelected"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return cxe}},[1,"calcite-chip",{disabled:[516],appearance:[513],kind:[513],closable:[516],icon:[513],iconFlipRtl:[516,"icon-flip-rtl"],scale:[513],label:[1],value:[8],closed:[1540],selectionMode:[1,"selection-mode"],selected:[1540],messageOverrides:[1040],messages:[1040],interactive:[4],parentChipGroup:[16],defaultMessages:[32],effectiveLocale:[32],hasText:[32],hasImage:[32],setFocus:[64]},[[0,"keydown","keyDownHandler"],[0,"click","clickHandler"]],{selected:["watchSelected"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function iB(){if(typeof customElements>"u")return;["calcite-chip","calcite-icon"].forEach(e=>{switch(e){case"calcite-chip":customElements.get(e)||customElements.define(e,hxe);break;case"calcite-icon":customElements.get(e)||Mr();break}})}iB();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */const E5={slow:14e3,medium:1e4,fast:6e3},wv={actionsEnd:"actions-end",title:"title",message:"message",link:"link"},Ns={actionsEnd:"actions-end",close:"close",container:"container",containerBottom:"container--bottom",containerBottomEnd:"container--bottom-end",containerBottomStart:"container--bottom-start",containerQueued:"container--queued",containerTop:"container--top",containerTopEnd:"container--top-end",containerTopStart:"container--top-start",content:"content",contentContainer:"content-container",dismissProgress:"dismiss-progress",footer:"footer",icon:"icon",containerSlottedInShell:"container--slotted-in-shell",queueCount:"queue-count",queueCountActive:"queue-count--active",textContainer:"text-container",focused:"focused"},uxe=`:host{--calcite-alert-edge-distance:2rem;--calcite-alert-dismiss-progress-background:var(--calcite-color-transparent-tint);display:block}.container{pointer-events:none;position:fixed;z-index:var(--calcite-z-index-toast);margin-inline:auto;margin-block:0px;box-sizing:border-box;display:flex;inline-size:100%;min-inline-size:min-content;align-items:center;justify-content:center;background-color:var(--calcite-color-foreground-1);text-align:start;opacity:0;--tw-shadow:0 6px 20px -4px rgba(0, 0, 0, 0.1), 0 4px 12px -2px rgba(0, 0, 0, 0.08);--tw-shadow-colored:0 6px 20px -4px var(--tw-shadow-color), 0 4px 12px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);border-radius:var(--calcite-border-radius);border-block-start:0 solid transparent;border-inline:1px solid var(--calcite-color-border-3);border-block-end:1px solid var(--calcite-color-border-3);inline-size:var(--calcite-alert-width);max-inline-size:calc(100% - var(--calcite-alert-edge-distance) * 2);transition:var(--calcite-internal-animation-timing-slow) cubic-bezier(0.215, 0.44, 0.42, 0.88), opacity var(--calcite-internal-animation-timing-slow) cubic-bezier(0.215, 0.44, 0.42, 0.88), all var(--calcite-animation-timing) ease-in-out}.container--bottom,.container--top{inset-inline-end:0;inset-inline-start:0}.container[class*=bottom]{transform:translate3d(0, var(--calcite-alert-edge-distance), 0);inset-block-end:var(--calcite-alert-edge-distance)}.container[class*=top]{transform:translate3d(0, calc(-1 * var(--calcite-alert-edge-distance)), 0);inset-block-start:var(--calcite-alert-edge-distance)}.container[class*=start]{inset-inline-start:var(--calcite-alert-edge-distance);inset-inline-end:auto}.container[class*=end]{inset-inline-end:var(--calcite-alert-edge-distance);inset-inline-start:auto}.icon{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:0px;margin-block:auto;margin-inline-end:auto;padding-inline-start:var(--calcite-alert-spacing-token-large)}.close{display:flex;cursor:pointer;align-items:center;justify-content:flex-end;align-self:stretch;border-style:none;background-color:transparent;color:var(--calcite-color-text-3);outline:2px solid transparent;outline-offset:2px;-webkit-appearance:none;padding:var(--calcite-alert-spacing-token-large);outline-color:transparent}.close:focus{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}.close:hover,.close:focus{background-color:var(--calcite-color-foreground-2);color:var(--calcite-color-text-1)}.close:active{background-color:var(--calcite-color-foreground-3)}.queue-count{visibility:hidden;display:flex;min-inline-size:min-content;cursor:default;align-items:center;justify-content:space-around;align-self:stretch;overflow:hidden;background-color:var(--calcite-color-foreground-1);text-align:center;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-2);opacity:0;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;border-inline:0 solid transparent;border-start-end-radius:0}.queue-count--active{visibility:visible;opacity:1}.dismiss-progress{position:absolute;display:block;inline-size:100%;overflow:hidden;inset-inline:0;inset-block-start:-2px;block-size:2px;border-radius:var(--calcite-border-radius) var(--calcite-border-radius) 0 0}.dismiss-progress::after{position:absolute;inset-block-start:0px;display:block;block-size:2px;content:"";background-color:var(--calcite-alert-dismiss-progress-background);inset-inline-end:0}.actions-end{display:flex;align-self:stretch}.text-container{box-sizing:border-box;display:flex;min-inline-size:0px;flex:1 1 auto;flex-direction:column;overflow-wrap:break-word;padding-block:var(--calcite-alert-spacing-token-small);padding-inline:var(--calcite-alert-spacing-token-large) var(--calcite-alert-spacing-token-small)}.footer{position:relative;display:flex;inline-size:auto;justify-content:flex-end;align-self:stretch;padding-block-start:1px;block-size:inherit}:host([scale=s]){--calcite-alert-width:40em;--calcite-alert-spacing-token-small:0.5rem;--calcite-alert-spacing-token-large:0.75rem;--calcite-alert-footer-height:2rem;--calcite-alert-footer-divider-gap:0.125rem}:host([scale=s]) slot[name=title]::slotted(*),:host([scale=s]) *::slotted([slot=title]){font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=s]) slot[name=message]::slotted(*),:host([scale=s]) *::slotted([slot=message]){font-size:var(--calcite-font-size--2);line-height:1.375}:host([scale=s]) slot[name=link]::slotted(*),:host([scale=s]) *::slotted([slot=link]){font-size:var(--calcite-font-size--2);line-height:1.375}:host([scale=s]) .queue-count{margin-inline:0.5rem}:host([scale=s]) .container{--calcite-alert-min-height:3.5rem}:host([scale=m]){--calcite-alert-width:50em;--calcite-alert-spacing-token-small:0.75rem;--calcite-alert-spacing-token-large:1rem;--calcite-alert-footer-height:3rem;--calcite-alert-footer-divider-gap:0.25rem}:host([scale=m]) slot[name=title]::slotted(*),:host([scale=m]) *::slotted([slot=title]){font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=m]) slot[name=message]::slotted(*),:host([scale=m]) *::slotted([slot=message]){font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=m]) slot[name=link]::slotted(*),:host([scale=m]) *::slotted([slot=link]){font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=m]) .queue-count{margin-inline:0.75rem}:host([scale=m]) .container{--calcite-alert-min-height:4.1875rem}:host([scale=l]){--calcite-alert-width:60em;--calcite-alert-spacing-token-small:1rem;--calcite-alert-spacing-token-large:1.25rem;--calcite-alert-footer-height:4rem;--calcite-alert-footer-divider-gap:0.5rem}:host([scale=l]) slot[name=title]::slotted(*),:host([scale=l]) *::slotted([slot=title]){margin-block-end:0.25rem;font-size:var(--calcite-font-size-1);line-height:1.375}:host([scale=l]) slot[name=message]::slotted(*),:host([scale=l]) *::slotted([slot=message]){font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=l]) slot[name=link]::slotted(*),:host([scale=l]) *::slotted([slot=link]){font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=l]) .queue-count{margin-inline:1rem}:host([scale=l]) .container{--calcite-alert-min-height:5.625rem}:host([open]) .container:not(.container--queued){border-block-start-width:2px;opacity:1;pointer-events:initial}:host([open]) .container:not(.container--queued)[class*=bottom]{transform:translate3d(0, calc(-1 * var(--calcite-alert-edge-distance)), inherit)}:host([open]) .container:not(.container--queued)[class*=top]{transform:translate3d(0, var(--calcite-alert-edge-distance), inherit)}:host([auto-close])>.queue-count{border-inline-end:0 solid transparent}slot[name=title]::slotted(*),*::slotted([slot=title]){font-size:var(--calcite-font-size-0);line-height:1.375;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1)}slot[name=message]::slotted(*),*::slotted([slot=message]){margin:0px;display:inline;font-size:var(--calcite-font-size--1);line-height:1.375;font-weight:var(--calcite-font-weight-normal);color:var(--calcite-color-text-2);margin-inline-end:0.5rem}slot[name=link]::slotted(*),*::slotted([slot=link]){display:inline-flex;color:var(--calcite-color-text-link)}:host([kind=brand]) .container{border-block-start-color:var(--calcite-color-brand)}:host([kind=brand]) .container .icon{color:var(--calcite-color-brand)}:host([kind=info]) .container{border-block-start-color:var(--calcite-color-status-info)}:host([kind=info]) .container .icon{color:var(--calcite-color-status-info)}:host([kind=danger]) .container{border-block-start-color:var(--calcite-color-status-danger)}:host([kind=danger]) .container .icon{color:var(--calcite-color-status-danger)}:host([kind=success]) .container{border-block-start-color:var(--calcite-color-status-success)}:host([kind=success]) .container .icon{color:var(--calcite-color-status-success)}:host([kind=warning]) .container{border-block-start-color:var(--calcite-color-status-warning)}:host([kind=warning]) .container .icon{color:var(--calcite-color-status-warning)}:host([auto-close-duration=fast]) .dismiss-progress:after{animation:dismissProgress 6000ms ease-out}:host(:hover[auto-close-duration=fast]) .dismiss-progress:after,:host(:focus[auto-close-duration=fast]) .dismiss-progress:after{animation-play-state:paused}:host([auto-close-duration=medium]) .dismiss-progress:after{animation:dismissProgress 10000ms ease-out}:host(:hover[auto-close-duration=medium]) .dismiss-progress:after,:host(:focus[auto-close-duration=medium]) .dismiss-progress:after{animation-play-state:paused}:host([auto-close-duration=slow]) .dismiss-progress:after{animation:dismissProgress 14000ms ease-out}:host(:hover[auto-close-duration=slow]) .dismiss-progress:after,:host(:focus[auto-close-duration=slow]) .dismiss-progress:after{animation-play-state:paused}.container.focused .dismiss-progress::after{animation-play-state:paused}@keyframes dismissProgress{0%{inline-size:0px;opacity:0.75}100%{inline-size:100%;opacity:1}}.container--slotted-in-shell{position:absolute}:host([hidden]){display:none}[hidden]{display:none}:host([calcite-hydrated-hidden]){visibility:hidden !important;pointer-events:none}`,dxe=uxe,pxe=oi(class extends ai{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteAlertBeforeClose=qe(this,"calciteAlertBeforeClose",6),this.calciteAlertClose=qe(this,"calciteAlertClose",6),this.calciteAlertBeforeOpen=qe(this,"calciteAlertBeforeOpen",6),this.calciteAlertOpen=qe(this,"calciteAlertOpen",6),this.calciteInternalAlertSync=qe(this,"calciteInternalAlertSync",6),this.calciteInternalAlertRegister=qe(this,"calciteInternalAlertRegister",6),this.handleKeyBoardFocus=()=>{this.keyBoardFocus=!0,this.handleFocus()},this.handleKeyBoardBlur=()=>{this.keyBoardFocus=!1,this.mouseFocus||this.handleBlur()},this.autoCloseTimeoutId=null,this.totalOpenTime=0,this.totalHoverTime=0,this.openTransitionProp="opacity",this.setTransitionEl=e=>{this.transitionEl=e},this.closeAlert=()=>{this.autoCloseTimeoutId=null,this.queued=!1,this.open=!1,this.queue=this.queue.filter(e=>e!==this.el),this.determineActiveAlert(),this.calciteInternalAlertSync.emit({queue:this.queue})},this.actionsEndSlotChangeHandler=e=>{this.hasEndActions=Di(e)},this.handleMouseOver=()=>{this.mouseFocus=!0,this.handleFocus()},this.handleMouseLeave=()=>{this.mouseFocus=!1,this.keyBoardFocus||this.handleBlur()},this.handleFocus=()=>{window.clearTimeout(this.autoCloseTimeoutId),this.autoCloseTimeoutId=null,this.totalOpenTime=Date.now()-this.initialOpenTime,this.lastMouseOverBegin=Date.now()},this.handleBlur=()=>{const e=Date.now()-this.lastMouseOverBegin,i=E5[this.autoCloseDuration]-this.totalOpenTime+this.totalHoverTime;this.totalHoverTime=this.totalHoverTime?e+this.totalHoverTime:e,this.autoCloseTimeoutId=window.setTimeout(()=>this.closeAlert(),i)},this.open=!1,this.autoClose=!1,this.autoCloseDuration="medium",this.kind="brand",this.icon=void 0,this.iconFlipRtl=!1,this.label=void 0,this.numberingSystem=void 0,this.placement="bottom",this.scale="m",this.messages=void 0,this.messageOverrides=void 0,this.slottedInShell=void 0,this.defaultMessages=void 0,this.effectiveLocale="",this.numberStringFormatter=new Wj,this.hasEndActions=!1,this.queue=[],this.queueLength=0,this.queued=!1,this.keyBoardFocus=!1}openHandler(){pc(this),this.open&&!this.queued&&this.calciteInternalAlertRegister.emit(),this.open||(this.queue=this.queue.filter(e=>e!==this.el),this.calciteInternalAlertSync.emit({queue:this.queue}))}onMessagesChange(){}updateDuration(){this.autoClose&&this.autoCloseTimeoutId&&(window.clearTimeout(this.autoCloseTimeoutId),this.autoCloseTimeoutId=window.setTimeout(()=>this.closeAlert(),E5[this.autoCloseDuration]))}connectedCallback(){po(this),yo(this),this.open&&!this.queued&&this.calciteInternalAlertRegister.emit(),this.numberStringFormatter.numberFormatOptions={locale:this.effectiveLocale,numberingSystem:this.numberingSystem,signDisplay:"always"}}async componentWillLoad(){co(this),await go(this),this.open&&pc(this)}componentDidLoad(){ho(this)}disconnectedCallback(){window.dispatchEvent(new CustomEvent("calciteInternalAlertUnregister",{detail:{alert:this.el}})),window.clearTimeout(this.autoCloseTimeoutId),this.autoCloseTimeoutId=null,window.clearTimeout(this.queueTimeout),fo(this),vo(this),this.slottedInShell=!1}render(){const{open:e,autoClose:i,label:n,placement:s,queued:h}=this,f=i?"alert":"alertdialog",m=!e,v=sm(oxe,this.icon,this.kind),x=this.queueLength>1;return X(cn,{key:"5b85226946398df7cf023211a8b358e735dd8f11","aria-hidden":bn(m),"aria-label":n,"calcite-hydrated-hidden":m,role:f},X("div",{key:"effb5efa631fc898ddec2b93950d2fbf14472d23",class:{[Ns.container]:!0,[Ns.containerQueued]:h,[`${Ns.container}--${s}`]:!0,[Ns.containerSlottedInShell]:this.slottedInShell,[Ns.focused]:this.keyBoardFocus},onPointerEnter:this.autoClose&&this.autoCloseTimeoutId?this.handleMouseOver:null,onPointerLeave:this.autoClose?this.handleMouseLeave:null,ref:this.setTransitionEl},v&&this.renderIcon(v),X("div",{key:"ab4d405229b2e840b737cb90b076ad3313d9f7e9",class:Ns.textContainer,onFocusin:this.autoClose&&this.autoCloseTimeoutId?this.handleKeyBoardFocus:null,onFocusout:this.autoClose?this.handleKeyBoardBlur:null},X("slot",{key:"ec2ac78702d4e9cc288b4a632aab39ff5df2a0a3",name:wv.title}),X("slot",{key:"69861e0572b10cbe09dc2424815132f1dd4588b7",name:wv.message}),X("slot",{key:"4d53bfd49c5c9894cdc93856888c6da5d4cbf100",name:wv.link})),this.renderActionsEnd(),x?this.renderQueueCount():null,this.renderCloseButton(),e&&!h&&i?X("div",{class:Ns.dismissProgress}):null))}renderCloseButton(){return X("button",{"aria-label":this.messages.close,class:Ns.close,key:"close",onClick:this.closeAlert,onFocusin:this.autoClose?this.handleKeyBoardFocus:null,onFocusout:this.autoClose?this.handleKeyBoardBlur:null,ref:e=>this.closeButton=e,type:"button"},X("calcite-icon",{icon:"x",scale:Ui(this.scale)}))}renderQueueCount(){const e=this.queueLength>2?this.queueLength-1:1,i=this.numberStringFormatter.numberFormatter.format(e);return X("div",{class:{[Ns.queueCount]:!0,[Ns.queueCountActive]:this.queueLength>1},key:"queue-count"},X("calcite-chip",{scale:this.scale,value:i},i))}renderActionsEnd(){return X("div",{class:Ns.actionsEnd},X("slot",{name:wv.actionsEnd,onSlotchange:this.actionsEndSlotChangeHandler}))}renderIcon(e){return X("div",{class:Ns.icon},X("calcite-icon",{flipRtl:this.iconFlipRtl,icon:e,scale:Ui(this.scale)}))}alertSync(e){this.queue!==e.detail.queue&&(this.queue=e.detail.queue),this.queueLength=this.queue.length,this.determineActiveAlert(),e.stopPropagation()}alertRegister(){this.open&&!this.queue.includes(this.el)&&(this.queued=!0,this.queue.push(this.el)),this.calciteInternalAlertSync.emit({queue:this.queue}),this.determineActiveAlert()}alertUnregister(e){const i=this.queue.filter(n=>n!==e.detail.alert);this.queue=i,window.dispatchEvent(new CustomEvent("calciteInternalAlertSync",{detail:{queue:i}}))}async setFocus(){await uo(this);const e=q4(this.el,{selector:"calcite-link"});if(!(!this.closeButton&&!e)){if(e)return e.setFocus();this.closeButton&&this.closeButton.focus()}}effectiveLocaleChange(){mo(this,this.effectiveLocale),this.numberStringFormatter.numberFormatOptions={locale:this.effectiveLocale,numberingSystem:this.numberingSystem,signDisplay:"always"}}numberingSystemChange(){this.numberStringFormatter.numberFormatOptions={locale:this.effectiveLocale,numberingSystem:this.numberingSystem,signDisplay:"always"}}determineActiveAlert(){var e;if(((e=this.queue)==null?void 0:e[0])===this.el)this.openAlert(),this.autoClose&&!this.autoCloseTimeoutId&&(this.initialOpenTime=Date.now(),this.autoCloseTimeoutId=window.setTimeout(()=>this.closeAlert(),E5[this.autoCloseDuration]));else return}onBeforeOpen(){this.calciteAlertBeforeOpen.emit()}onOpen(){this.calciteAlertOpen.emit()}onBeforeClose(){this.calciteAlertBeforeClose.emit()}onClose(){this.calciteAlertClose.emit()}openAlert(){window.clearTimeout(this.queueTimeout),this.queueTimeout=window.setTimeout(()=>this.queued=!1,300)}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{open:["openHandler"],messageOverrides:["onMessagesChange"],autoCloseDuration:["updateDuration"],effectiveLocale:["effectiveLocaleChange"],numberingSystem:["numberingSystemChange"]}}static get style(){return dxe}},[1,"calcite-alert",{open:[1540],autoClose:[516,"auto-close"],autoCloseDuration:[513,"auto-close-duration"],kind:[513],icon:[520],iconFlipRtl:[516,"icon-flip-rtl"],label:[1],numberingSystem:[513,"numbering-system"],placement:[513],scale:[513],messages:[1040],messageOverrides:[1040],slottedInShell:[1028,"slotted-in-shell"],defaultMessages:[32],effectiveLocale:[32],numberStringFormatter:[32],hasEndActions:[32],queue:[32],queueLength:[32],queued:[32],keyBoardFocus:[32],setFocus:[64]},[[8,"calciteInternalAlertSync","alertSync"],[8,"calciteInternalAlertRegister","alertRegister"],[8,"calciteInternalAlertUnregister","alertUnregister"]],{open:["openHandler"],messageOverrides:["onMessagesChange"],autoCloseDuration:["updateDuration"],effectiveLocale:["effectiveLocaleChange"],numberingSystem:["numberingSystemChange"]}]);function fxe(){if(typeof customElements>"u")return;["calcite-alert","calcite-chip","calcite-icon"].forEach(e=>{switch(e){case"calcite-alert":customElements.get(e)||customElements.define(e,pxe);break;case"calcite-chip":customElements.get(e)||iB();break;case"calcite-icon":customElements.get(e)||Mr();break}})}fxe();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */const qc={main:"main",content:"content",contentBehind:"content--behind",contentNonInteractive:"content--non-interactive",footer:"footer",positionedSlotWrapper:"positioned-slot-wrapper",container:"container",contentBehindCenterContent:"center-content"},fa={centerRow:"center-row",panelStart:"panel-start",panelEnd:"panel-end",panelTop:"panel-top",panelBottom:"panel-bottom",header:"header",footer:"footer",alerts:"alerts",sheets:"sheets",modals:"modals"},gxe=":host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host{position:absolute;inset:0px;display:flex;block-size:100%;inline-size:100%;flex-direction:column;overflow:hidden;--calcite-shell-tip-spacing:26vw}.main{position:relative;display:flex;block-size:100%;inline-size:100%;flex:1 1 auto;flex-direction:row;justify-content:space-between;overflow:hidden}.content,.content--non-interactive{display:flex;block-size:100%;inline-size:100%;flex-direction:column;flex-wrap:nowrap}.content{overflow:auto}.content ::slotted(calcite-shell-center-row),.content ::slotted(calcite-panel),.content ::slotted(calcite-flow){flex:1 1 auto;align-self:stretch;max-block-size:unset}.content--behind{position:absolute;inset:0px;border-width:0px;z-index:calc(var(--calcite-z-index) - 1);display:initial}.content--non-interactive{pointer-events:none}::slotted(calcite-shell-center-row){inline-size:unset}::slotted(.header .heading){font-size:var(--calcite-font-size--2);line-height:1.375;font-weight:var(--calcite-font-weight-normal)}slot[name=panel-end]::slotted(calcite-shell-panel){margin-inline-start:auto}::slotted(calcite-panel),::slotted(calcite-flow){border-width:1px;border-inline-start-width:0px;border-inline-end-width:0px;border-style:solid;border-color:var(--calcite-color-border-3)}slot[name=center-row]::slotted(calcite-shell-center-row:not([detached])),slot[name=panel-top]::slotted(calcite-shell-center-row:not([detached])),slot[name=panel-bottom]::slotted(calcite-shell-center-row:not([detached])){border-inline-start-width:1px;border-inline-end-width:1px;border-color:var(--calcite-color-border-3)}.center-content{display:flex;flex-direction:column;justify-content:space-between;block-size:100%;inline-size:100%;min-inline-size:0}::slotted(calcite-shell-center-row){flex:none;align-self:stretch}::slotted(calcite-tip-manager){position:absolute;z-index:var(--calcite-z-index-toast);box-sizing:border-box}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}::slotted(calcite-tip-manager){animation:in-up var(--calcite-internal-animation-timing-slow) ease-in-out;border-radius:0.25rem;--tw-shadow:0 6px 20px -4px rgba(0, 0, 0, 0.1), 0 4px 12px -2px rgba(0, 0, 0, 0.08);--tw-shadow-colored:0 6px 20px -4px var(--tw-shadow-color), 0 4px 12px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);inset-block-end:0.5rem;inset-inline:var(--calcite-shell-tip-spacing)}slot[name=center-row]::slotted(calcite-shell-center-row),slot[name=panel-bottom]::slotted(calcite-shell-center-row){margin-block-start:auto}slot[name=panel-top]::slotted(calcite-shell-center-row){margin-block-end:auto}.position-wrapper{position:absolute;pointer-events:none;inset:0}:host([hidden]){display:none}[hidden]{display:none}",mxe=gxe,yxe=oi(class extends ai{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.handleHeaderSlotChange=e=>{this.hasHeader=!!Di(e)},this.handleFooterSlotChange=e=>{this.hasFooter=!!Di(e)},this.handleAlertsSlotChange=e=>{var i;this.hasAlerts=!!Di(e),(i=Nf(e))==null||i.map(n=>{n.nodeName==="CALCITE-ALERT"&&(n.slottedInShell=!0)})},this.handleSheetsSlotChange=e=>{var i;this.hasSheets=!!Di(e),(i=Nf(e))==null||i.map(n=>{n.nodeName==="CALCITE-SHEET"&&(n.slottedInShell=!0)})},this.handleModalsSlotChange=e=>{var i;this.hasModals=!!Di(e),(i=Nf(e))==null||i.map(n=>{n.nodeName==="CALCITE-MODAL"&&(n.slottedInShell=!0)})},this.contentBehind=!1,this.hasHeader=!1,this.hasFooter=!1,this.hasAlerts=!1,this.hasModals=!1,this.hasSheets=!1,this.panelIsResizing=!1}handleCalciteInternalShellPanelResizeStart(e){this.panelIsResizing=!0,e.stopPropagation()}handleCalciteInternalShellPanelResizeEnd(e){this.panelIsResizing=!1,e.stopPropagation()}connectedCallback(){YH(this)}disconnectedCallback(){XH(this)}renderHeader(){return X("div",{hidden:!this.hasHeader},X("slot",{key:"header",name:fa.header,onSlotchange:this.handleHeaderSlotChange}))}renderFooter(){return X("div",{class:qc.footer,hidden:!this.hasFooter,key:"footer"},X("slot",{name:fa.footer,onSlotchange:this.handleFooterSlotChange}))}renderAlerts(){return X("div",{hidden:!this.hasAlerts},X("slot",{key:"alerts",name:fa.alerts,onSlotchange:this.handleAlertsSlotChange}))}renderSheets(){return X("div",{hidden:!this.hasSheets},X("slot",{key:"sheets",name:fa.sheets,onSlotchange:this.handleSheetsSlotChange}))}renderModals(){return X("div",{hidden:!this.hasModals},X("slot",{key:"modals",name:fa.modals,onSlotchange:this.handleModalsSlotChange}))}renderContent(){const{panelIsResizing:e}=this,i=X("slot",{key:"default-slot"}),n=e?X("div",{class:qc.contentNonInteractive},i):i,s=X("slot",{key:"center-row-slot",name:fa.centerRow}),h=X("slot",{key:"panel-bottom-slot",name:fa.panelBottom}),f=X("slot",{key:"panel-top-slot",name:fa.panelTop}),m="content-container";return this.contentBehind?[X("div",{class:{[qc.content]:!0,[qc.contentBehind]:!0},key:m},n),X("div",{class:qc.contentBehindCenterContent},f,h,s)]:[X("div",{class:qc.content,key:m},f,n,h,s)]}renderMain(){return X("div",{class:qc.main},X("slot",{name:fa.panelStart}),this.renderContent(),X("slot",{name:fa.panelEnd}))}renderPositionedSlots(){return X("div",{class:qc.positionedSlotWrapper},this.renderAlerts(),this.renderModals(),this.renderSheets())}render(){return X(jT,{key:"d5ca9178c4e9c74dae958a6105655a5d30de1584"},this.renderHeader(),this.renderMain(),this.renderFooter(),this.renderPositionedSlots())}get el(){return this}static get style(){return mxe}},[1,"calcite-shell",{contentBehind:[516,"content-behind"],hasHeader:[32],hasFooter:[32],hasAlerts:[32],hasModals:[32],hasSheets:[32],panelIsResizing:[32]},[[0,"calciteInternalShellPanelResizeStart","handleCalciteInternalShellPanelResizeStart"],[0,"calciteInternalShellPanelResizeEnd","handleCalciteInternalShellPanelResizeEnd"]]]);function vxe(){if(typeof customElements>"u")return;["calcite-shell"].forEach(e=>{switch(e){case"calcite-shell":customElements.get(e)||customElements.define(e,yxe);break}})}vxe();function bxe(t){let e,i,n,s,h,f,m,v,x,M,$,I,P,L;return f=new c5e({}),v=new w5e({}),v.$on("add-layer",t[0]),M=new _me({}),M.$on("copy",t[0]),P=new bfe({}),{c(){e=Ze("main"),i=Ze("calcite-shell"),n=Ze("calcite-alert"),n.innerHTML='<div slot="message" name="alertMessage" id="alertMessage"></div> <div slot="title" name="alertTitle" id="alertTitle"></div>',s=Xi(),h=Ze("calcite-shell-panel"),p1(f.$$.fragment),m=Xi(),p1(v.$$.fragment),x=Xi(),p1(M.$$.fragment),$=Xi(),I=Ze("calcite-panel"),p1(P.$$.fragment),Ie(n,"id","copyAlert"),Ie(n,"auto-close",""),Ie(n,"auto-close-duration","fast"),Ie(n,"placement","bottom-start"),Ie(h,"slot","panel-end"),Ie(h,"position","end"),Ie(h,"id","shell-panel-start")},m(z,F){ou(z,e,F),Ne(e,i),Ne(i,n),Ne(i,s),Ne(i,h),hf(f,h,null),Ne(h,m),hf(v,h,null),Ne(h,x),hf(M,h,null),Ne(i,$),Ne(i,I),hf(P,I,null),L=!0},p:on,i(z){L||(oc(f.$$.fragment,z),oc(v.$$.fragment,z),oc(M.$$.fragment,z),oc(P.$$.fragment,z),L=!0)},o(z){yd(f.$$.fragment,z),yd(v.$$.fragment,z),yd(M.$$.fragment,z),yd(P.$$.fragment,z),L=!1},d(z){z&&xc(e),uf(f),uf(v),uf(M),uf(P)}}}function wxe(t){return[i=>{const n=document.getElementById("copyAlert");n.setAttribute("icon","copy-to-clipboard"),n.setAttribute("kind","success"),document.getElementById("alertTitle").innerHTML="Copy value",document.getElementById("alertMessage").innerHTML=`${i.detail.label} <b>${i.detail.value}</b> copied to the clipboard`,n.open=!0}]}class _xe extends p0{constructor(e){super(),d0(this,e,wxe,bxe,Yd,{})}}eF(location.href);new _xe({target:document.getElementById("app")});export{Pe as $,fe as A,e1e as B,hxe as C,Soe as D,F9e as E,_r as F,B6e as G,ai as H,Z0e as I,Id as J,wce as K,j7e as L,V7e as M,NH as N,ut as O,rxe as P,bi as Q,Zr as R,txe as S,tu as T,Ce as U,_ as V,T as W,Y as X,Ee as Y,Pt as Z,be as _,iB as a,Ms as a$,aT as a0,yt as a1,Ud as a2,ji as a3,BD as a4,Xh as a5,AL as a6,Es as a7,o9e as a8,qg as a9,gt as aA,Qo as aB,vt as aC,xP as aD,Re as aE,pe as aF,_e as aG,$G as aH,fne as aI,gne as aJ,Cm as aK,Bz as aL,TP as aM,SS as aN,MP as aO,SP as aP,JE as aQ,mTe as aR,$4e as aS,nA as aT,qr as aU,e0 as aV,Tz as aW,iA as aX,N6 as aY,sn as aZ,er as a_,WI as aa,ZI as ab,kxe as ac,IB as ad,Uxe as ae,Hg as af,Bq as ag,zi as ah,ESe as ai,Tre as aj,ISe as ak,ASe as al,TSe as am,Kg as an,zS as ao,Xn as ap,G6 as aq,ia as ar,CSe as as,Z5 as at,uSe as au,EX as av,Xf as aw,Ec as ax,Gm as ay,Vm as az,Qj as b,jse as b$,Dy as b0,j4e as b1,sz as b2,wJ as b3,Sd as b4,u4e as b5,Qd as b6,Gz as b7,nt as b8,DL as b9,Bm as bA,k2 as bB,an as bC,Ct as bD,Hse as bE,_t as bF,km as bG,tt as bH,Fe as bI,Bd as bJ,Pm as bK,z9e as bL,OTe as bM,kg as bN,q9 as bO,u7e as bP,Xd as bQ,Zt as bR,W6e as bS,R9e as bT,cc as bU,CP as bV,RL as bW,rW as bX,Ww as bY,pSe as bZ,lo as b_,$s as ba,SA as bb,qt as bc,r6e as bd,n6e as be,Kh as bf,Jte as bg,LSe as bh,wN as bi,NSe as bj,h2 as bk,l6e as bl,l7 as bm,ii as bn,JO as bo,K9e as bp,X9e as bq,Y9e as br,Q9e as bs,e4e as bt,t4e as bu,kSe as bv,$Se as bw,a6e as bx,o6e as by,s6e as bz,Mr as c,ahe as c$,rT as c0,h7e as c1,vc as c2,IN as c3,_Se as c4,Dre as c5,S2 as c6,x2 as c7,ire as c8,xSe as c9,De as cA,ks as cB,tx as cC,vi as cD,ex as cE,nx as cF,Xb as cG,XR as cH,X3 as cI,hT as cJ,KE as cK,V4e as cL,YSe as cM,vTe as cN,wEe as cO,iT as cP,BMe as cQ,db as cR,b7e as cS,_z as cT,CT as cU,M4 as cV,Xae as cW,xz as cX,fz as cY,dg as cZ,I5 as c_,Qh as ca,J6e as cb,x7 as cc,gu as cd,lx as ce,SQ as cf,Tb as cg,Kme as ch,Yme as ci,Oh as cj,Dw as ck,Wr as cl,Z6e as cm,f7 as cn,np as co,Gw as cp,ln as cq,uc as cr,qMe as cs,wSe as ct,Mt as cu,ol as cv,Qa as cw,Lt as cx,ir as cy,En as cz,tB as d,yZ as d$,FI as d0,I5e as d1,B3 as d2,bg as d3,xM as d4,p6e as d5,I6 as d6,br as d7,Mi as d8,Z8e as d9,bEe as dA,oV as dB,aV as dC,di as dD,Og as dE,Wt as dF,JL as dG,hu as dH,VO as dI,oEe as dJ,lEe as dK,YL as dL,Zo as dM,Ln as dN,Mw as dO,S7 as dP,Fd as dQ,s8 as dR,Bf as dS,BO as dT,D3 as dU,PO as dV,MH as dW,jie as dX,ene as dY,Kd as dZ,mZ as d_,JD as da,rp as db,fc as dc,Se as dd,rr as de,wr as df,vve as dg,so as dh,sEe as di,Yn as dj,Sb as dk,hEe as dl,xr as dm,kn as dn,yr as dp,si as dq,nV as dr,uEe as ds,lu as dt,ea as du,dEe as dv,px as dw,UO as dx,xt as dy,pEe as dz,sxe as e,XH as e$,FO as e0,ac as e1,Fie as e2,v3e as e3,EH as e4,rn as e5,zZ as e6,BW as e7,cS as e8,hS as e9,z4e as eA,PJ as eB,S0 as eC,ole as eD,g4e as eE,qae as eF,RZ as eG,KM as eH,fZ as eI,ave as eJ,KL as eK,tne as eL,ax as eM,oS as eN,aS as eO,$3 as eP,Ei as eQ,qi as eR,Di as eS,mo as eT,YH as eU,$c as eV,po as eW,yo as eX,Cc as eY,fo as eZ,vo as e_,UW as ea,_w as eb,xw as ec,b8e as ed,Rxe as ee,CB as ef,zA as eg,uw as eh,YS as ei,Vw as ej,Xg as ek,dA as el,vs as em,Rte as en,tS as eo,Lte as ep,OT as eq,ww as er,N9e as es,G9e as et,V6e as eu,h4e as ev,gj as ew,Xpe as ex,pTe as ey,tTe as ez,q5e as f,lt as f$,go as f0,ul as f1,q4 as f2,QH as f3,bn as f4,dl as f5,eB as f6,r1e as f7,s1e as f8,a7 as f9,PSe as fA,vr as fB,WZ as fC,Ks as fD,Sw as fE,P6 as fF,R6 as fG,jxe as fH,lW as fI,jf as fJ,nS as fK,DB as fL,ZJ as fM,l7e as fN,Vh as fO,zV as fP,FV as fQ,aa as fR,V7 as fS,cp as fT,P8e as fU,NC as fV,xEe as fW,_Ee as fX,bm as fY,TA as fZ,G7 as f_,_3 as fa,m5e as fb,y5e as fc,Gfe as fd,VW as fe,zE as ff,Ke as fg,gTe as fh,Ur as fi,jB as fj,uwe as fk,gke as fl,f4e as fm,ux as fn,Mie as fo,i4e as fp,SG as fq,vO as fr,Gse as fs,MSe as ft,$m as fu,Em as fv,qh as fw,Ere as fx,RSe as fy,Mre as fz,eM as g,Sc as g$,TB as g0,s9e as g1,vd as g2,cO as g3,Za as g4,Ts as g5,Yte as g6,bMe as g7,Sae as g8,OSe as g9,Vg as gA,wm as gB,k6 as gC,Ls as gD,Y0e as gE,sm as gF,oxe as gG,Ui as gH,Fxe as gI,_Te as gJ,sTe as gK,wTe as gL,C5 as gM,q6e as gN,c3 as gO,h3 as gP,yw as gQ,p0e as gR,Y_e as gS,X_e as gT,hMe as gU,Mc as gV,Tc as gW,hc as gX,P9e as gY,B9e as gZ,fw as g_,au as ga,_m as gb,rye as gc,sye as gd,sr as ge,jm as gf,tT as gg,kZ as gh,$Z as gi,Hr as gj,D8e as gk,R8e as gl,N8e as gm,P5 as gn,HMe as go,Qb as gp,PL as gq,i6e as gr,Ii as gs,A4e as gt,IQ as gu,F4e as gv,C4e as gw,IG as gx,r2 as gy,Js as gz,qe as h,pI as h$,ro as h0,Ya as h1,Bk as h2,ms as h3,bW as h4,Y6 as h5,nr as h6,vm as h7,en as h8,yS as h9,_M as hA,M_ as hB,S9e as hC,OJ as hD,Zae as hE,Kae as hF,wz as hG,f0 as hH,Fi as hI,dye as hJ,eSe as hK,sa as hL,i$e as hM,ZL as hN,iE as hO,f6e as hP,g6e as hQ,oe as hR,Iie as hS,aQ as hT,qw as hU,sV as hV,$w as hW,y0 as hX,k3 as hY,vC as hZ,xi as h_,hJ as ha,cSe as hb,_4e as hc,Tt as hd,ATe as he,Z4e as hf,pC as hg,gZ as hh,io as hi,wn as hj,Yl as hk,UL as hl,Jf as hm,hye as hn,wMe as ho,H6 as hp,k9e as hq,E9e as hr,NU as hs,Vne as ht,B6 as hu,zTe as hv,J4e as hw,rc as hx,z6 as hy,Qae as hz,Wi as i,yT as i$,i0,pu as i1,hl as i2,C0 as i3,JT as i4,m3 as i5,KT as i6,am as i7,YT as i8,y3 as i9,Vxe as iA,B4e as iB,Tf as iC,pW as iD,Ja as iE,c7e as iF,iG,Nf as iH,Kxe as iI,$q as iJ,Pq as iK,Nq as iL,Br as iM,Si as iN,FTe as iO,GTe as iP,U6e as iQ,Tr as iR,Pne as iS,t3 as iT,Qw as iU,i3 as iV,e3 as iW,T0 as iX,Xre as iY,zm as iZ,n3 as i_,df as ia,Ox as ib,_f as ic,Oxe as id,T3e as ie,dx as ig,yn as ih,E7 as ii,$ve as ij,zve as ik,Fne as il,zne as im,Ane as io,IE as ip,gc as iq,GQ as ir,na as is,LQ as it,Fv as iu,V9e as iv,F6 as iw,Z7 as ix,dSe as iy,Zh as iz,n8e as j,dwe as j$,Fm as j0,DTe as j1,qxe as j2,Zw as j3,Pxe as j4,EU as j5,Ss as j6,ys as j7,Yt as j8,I3 as j9,bC as jA,dpe as jB,Us as jC,Ut as jD,iH as jE,T4e as jF,v6 as jG,w6 as jH,iP as jI,ui as jJ,aye as jK,u2 as jL,OD as jM,d7e as jN,p7e as jO,lb as jP,mw as jQ,Yg as jR,QA as jS,FQ as jT,V6 as jU,qp as jV,et as jW,f7e as jX,kP as jY,xd as jZ,BL as j_,vEe as ja,pve as jb,Nye as jc,dve as jd,rV as je,fEe as jf,cV as jg,yEe as jh,A3 as ji,Pve as jj,Tm as jk,y8e as jl,uve as jm,tve as jn,$3e as jo,iEe as jp,MZ as jq,HZ as jr,i2 as js,rle as jt,GW as ju,UR as jv,ra as jw,EZ as jx,jO as jy,uS as jz,M5 as k,_H as k$,lP as k0,NJ as k1,Cve as k2,W8e as k3,Rt as k4,oA as k5,bU as k6,a9e as k7,fke as k8,LH as k9,uT as kA,QSe as kB,KSe as kC,PG as kD,H as kE,W9e as kF,gm as kG,MJ as kH,TJ as kI,N4e as kJ,I2 as kK,Sr as kL,Cs as kM,cl as kN,ae as kO,jS as kP,Bhe as kQ,AB as kR,L9e as kS,Hq as kT,bw as kU,H9e as kV,wP as kW,H4e as kX,M4e as kY,pw as kZ,cse as k_,ape as ka,Qg as kb,ez as kc,vz as kd,em as ke,o3 as kf,$2 as kg,_T as kh,E0 as ki,w9e as kj,UMe as kk,W3 as kl,JG as km,W2 as kn,w1e as ko,eG as kp,b1e as kq,a1e as kr,x1e as ks,Z2 as kt,KH as ku,ps as kv,hx as kw,Bo as kx,YR as ky,rA as kz,bI as l,q2e as l$,kA as l0,g9e as l1,f9e as l2,AU as l3,$A as l4,Axe as l5,$B as l6,P4e as l7,Tw as l8,Ev as l9,bO as lA,NM as lB,LL as lC,Lhe as lD,U9e as lE,Mxe as lF,QD as lG,tae as lH,xT as lI,l3 as lJ,_E as lK,TTe as lL,xTe as lM,ft as lN,Uke as lO,b5 as lP,Eke as lQ,Dr as lR,On as lS,IL as lT,b6 as lU,eo as lV,g6 as lW,X2e as lX,F8e as lY,Noe as lZ,j8e as l_,xm as la,aJ as lb,fJ as lc,Mm as ld,b4e as le,NTe as lf,v7 as lg,Jh as lh,iye as li,nye as lj,Vre as lk,fSe as ll,L8e as lm,ZF as ln,mT as lo,iD as lp,Ese as lq,M0 as lr,g1 as ls,pl as lt,_1 as lu,$C as lv,t3e as lw,qI as lx,rO as ly,O9e as lz,ho as m,oW as m$,sl as m0,L2e as m1,jV as m2,k8e as m3,Ug as m4,z8e as m5,rl as m6,CO as m7,lp as m8,oo as m9,xA as mA,lSe as mB,hse as mC,eTe as mD,Bh as mE,eS as mF,pwe as mG,Gie as mH,zie as mI,IZ as mJ,Die as mK,pke as mL,QI as mM,N3e as mN,lve as mO,M3e as mP,Wse as mQ,ele as mR,hSe as mS,eu as mT,KU as mU,Jw as mV,Ob as mW,ld as mX,Nxe as mY,Dxe as mZ,Lxe as m_,g8e as ma,A0 as mb,m8e as mc,$me as md,_8e as me,lC as mf,tn as mg,w8e as mh,Sme as mi,LEe as mj,YO as mk,n4e as ml,su as mm,gEe as mn,WV as mo,T8e as mp,_2e as mq,Jae as mr,KD as ms,s3 as mt,ws as mu,d4e as mv,fS as mw,eT as mx,ep as my,D9e as mz,j5e as n,UT as n$,Oie as n0,rve as n1,Tie as n2,Eie as n3,UI as n4,mr as n5,Nx as n6,_L as n7,Hhe as n8,Vv as n9,Foe as nA,joe as nB,kwe as nC,Owe as nD,Rwe as nE,Lwe as nF,DZ as nG,S4 as nH,xce as nI,_K as nJ,q9e as nK,Jo as nL,d3 as nM,dz as nN,gz as nO,$ae as nP,w7e as nQ,Dae as nR,Ad as nS,_7e as nT,im as nU,vle as nV,awe as nW,owe as nX,PTe as nY,RTe as nZ,LTe as n_,VS as na,$S as nb,D2 as nc,npe as nd,FMe as ne,Ye as nf,Mte as ng,jN as nh,pye as ni,mye as nj,E3 as nk,Ai as nl,E8e as nm,x8e as nn,Pke as no,Jke as np,q3e as nq,W3e as nr,B3e as ns,U3e as nt,H3 as nu,Yke as nv,kb as nw,Kke as nx,tEe as ny,ll as nz,pc as o,Jz as o$,_Z as o0,iSe as o1,GO as o2,Jne as o3,Xa as o4,w4e as o5,Ga as o6,jTe as o7,zB as o8,VTe as o9,jW as oA,e2 as oB,iZ as oC,DEe as oD,NEe as oE,q7 as oF,r4e as oG,bde as oH,ED as oI,kU as oJ,d9e as oK,tZ as oL,Z9e as oM,J9e as oN,v_e as oO,Uhe as oP,yJ as oQ,x4e as oR,G4e as oS,FJ as oT,E4e as oU,bJ as oV,k4e as oW,Uae as oX,Xw as oY,I4e as oZ,Yo as o_,Fse as oa,DN as ob,yc as oc,p9e as od,SM as oe,Rre as of,s4e as og,o4e as oh,gs as oi,Tbe as oj,SSe as ok,mSe as ol,vSe as om,ySe as on,bSe as oo,cM as op,gSe as oq,iae as or,fhe as os,zxe as ot,yx as ou,pO as ov,sS as ow,rx as ox,c6e as oy,Ew as oz,oi as p,Zye as p$,Ff as p0,pMe as p1,j9e as p2,$y as p3,_6e as p4,Bc as p5,Cg as p6,zre as p7,Nre as p8,T2 as p9,Exe as pA,VZ as pB,Cie as pC,kie as pD,$ie as pE,wie as pF,cu as pG,_W as pH,sle as pI,nne as pJ,ine as pK,uTe as pL,dTe as pM,dt as pN,nEe as pO,D4e as pP,aP as pQ,BG as pR,Km as pS,ZG as pT,l0 as pU,Hie as pV,x4 as pW,qG as pX,Wie as pY,K6e as pZ,us as p_,E2 as pa,Hxe as pb,ope as pc,Rm as pd,zN as pe,FN as pf,MF as pg,nwe as ph,w$ as pi,UF as pj,Loe as pk,nve as pl,Sle as pm,Tle as pn,EB as po,a4e as pp,qse as pq,oq as pr,gx as ps,Q4e as pt,wO as pu,vK as pv,ske as pw,rke as px,zf as py,Fk as pz,Ua as q,kke as q$,Dh as q0,Jye as q1,ZD as q2,bve as q3,Cxe as q4,IU as q5,qie as q6,D0 as q7,Sve as q8,vwe as q9,uye as qA,Ti as qB,O8e as qC,X6e as qD,ak as qE,_we as qF,Y6e as qG,L4e as qH,g7 as qI,ok as qJ,BS as qK,BB as qL,Wxe as qM,gye as qN,hTe as qO,tw as qP,eEe as qQ,jwe as qR,Vwe as qS,Ake as qT,Mke as qU,Ike as qV,Rie as qW,Aie as qX,Cke as qY,wye as qZ,Kt as q_,C8e as qa,hQ as qb,Yoe as qc,mwe as qd,S4e as qe,j3 as qf,NQ as qg,qye as qh,Lm as qi,Nm as qj,Dm as qk,kO as ql,LG as qm,$be as qn,Q6e as qo,K8e as qp,bye as qq,vn as qr,J8e as qs,Y8e as qt,ao as qu,rTe as qv,cTe as qw,OG as qx,Hke as qy,Gke as qz,X as r,$ke as r0,a3e as r1,m7 as r2,v8e as r3,y6 as r4,Pwe as r5,sve as r6,Bwe as r7,sk as r8,ZZ as r9,Mve as rA,nTe as rB,bTe as rC,Qf as rD,Poe as rE,p4e as rF,Boe as rG,FD as rH,aEe as rI,wH as rJ,l9e as rK,ste as rL,aw as rM,e3e as rN,b9e as rO,av as rP,cE as rQ,tSe as rR,mke as rS,cEe as rT,R4e as rU,m6e as rV,v6e as rW,REe as rX,p$e as rY,g$e as rZ,Oke as ra,Vie as rb,AH as rc,Eoe as rd,g7e as re,A8e as rf,S8e as rg,yTe as rh,lTe as ri,oTe as rj,Bxe as rk,CTe as rl,$Te as rm,Ixe as rn,iTe as ro,O4e as rp,fTe as rq,aTe as rr,_ie as rs,XSe as rt,gf as ru,dke as rv,Txe as rw,SB as rx,Sxe as ry,rEe as rz,co as s,tc as t,cn as u,uo as v,$j as w,G5e as x,fu as y,wT as z};
