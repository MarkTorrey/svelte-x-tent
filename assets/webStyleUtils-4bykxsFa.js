import{c as u,a as b}from"./devEnvironmentUtils-3qgG8Z2w.js";import{s as m,b0 as l,a$ as f,I as p,dh as w}from"./index-rwr9l75y.js";import{c as d,w as h,b as i,p as c,d as $}from"./styleUtils-u-o4YNNJ.js";import{getStyleItemFromStyle as g}from"./webStyleSymbolUtils-7xd9beLg.js";import"./jsonUtils-1tkaaT9f.js";async function U(e,a,t){if(!e.name)throw new m("style-symbol-reference-name-missing","Missing name in style symbol reference");if(e.styleName&&e.styleName==="Esri2DPointSymbolsStyle")return S(e,t);try{return N(await d(e,a,t),e.name,a,t)}catch(n){return l(n),null}}async function S(e,a){const t=h.replaceAll(/\{SymbolName\}/gi,e.name);try{const n=await i(t,a);return c(n.data)}catch(n){return l(n),null}}async function N(e,a,t,n){const y={portal:(t==null?void 0:t.portal)!=null?t.portal:f.getDefault(),url:p(e.baseUrl),origin:"portal-item"},s=g(a,e.data);if(!s)throw new m("symbolstyleutils:symbol-name-not-found",`The symbol name '${a}' could not be found`,{symbolName:a});let r=w($(s,"cimRef"),y);u()&&(r=b(r));try{const o=await i(r,n);return c(o.data)}catch(o){return l(o),null}}export{U as fetchCIMSymbolReference};
