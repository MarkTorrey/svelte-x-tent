import{W as e,X as o,Y as p,dx as S,aL as z,oM as ze,gz as Ie,dk as l,dl as u,sa as tt,dy as Pe,sb as it,a8 as L,p_ as ot,q0 as Fe,mF as Ze,sc as Te,sd as Oe,se as st,gq as pe,sf as nt,sg as rt,da as pt,jz as lt,a0 as Me,aq as Re,jC as at,V as ut,jD as dt}from"./index-BdDnxAOC.js";import{c as yt,a as ct,v as mt,j as ht,y as vt}from"./commonProperties-BBSEfxbj.js";import{g as ft,B as xt,X as Y,V as wt,D as gt,G as bt}from"./featureLayerUtils-Cr_P5BEF.js";import{p as jt}from"./LayerFloorInfo-DYBlEgwK.js";import{p as $t}from"./Relationship-CL5GSwc1.js";import{i as St}from"./serviceCapabilitiesUtils-CxD1SJab.js";var le;let F=le=class extends S{constructor(t){super(t),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new le({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};e([o({type:String,json:{write:!0}})],F.prototype,"expression",void 0),e([o({type:String,json:{write:!0}})],F.prototype,"name",void 0),e([o({type:["boolean","date","number","string"],json:{write:!0}})],F.prototype,"returnType",void 0),e([o({type:String,json:{write:!0}})],F.prototype,"title",void 0),F=le=e([p("esri.form.ExpressionInfo")],F);const It=F;let T=class extends S{constructor(i){super(i),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};e([o({type:String,json:{write:!0}})],T.prototype,"description",void 0),e([o({type:String,json:{write:!0}})],T.prototype,"label",void 0),e([o()],T.prototype,"type",void 0),e([o({type:String,json:{write:!0}})],T.prototype,"visibilityExpression",void 0),T=e([p("esri.form.elements.Element")],T);const O=T;let P=class extends z(S){constructor(i){super(i),this.type=null}};e([o()],P.prototype,"type",void 0),P=e([p("esri.form.elements.inputs.attachments.Input")],P);const E=P,K=["any","capture","upload"];let R=class extends E{constructor(i){super(i),this.type="audio",this.inputMethod="any",this.maxDuration=null}};e([o({type:["audio"],readOnly:!0,json:{write:!0}})],R.prototype,"type",void 0),e([o({type:K,json:{write:!0}})],R.prototype,"inputMethod",void 0),e([o({type:Number,json:{write:!0}})],R.prototype,"maxDuration",void 0),R=e([p("esri.form.elements.inputs.attachments.AudioInput")],R);const De=R;let G=class extends E{constructor(i){super(i),this.type="document",this.maxFileSize=null}};e([o({type:["document"],readOnly:!0,json:{write:!0}})],G.prototype,"type",void 0),e([o({type:Number,json:{write:!0}})],G.prototype,"maxFileSize",void 0),G=e([p("esri.form.elements.inputs.attachments.DocumentInput")],G);const Ve=G;let D=class extends E{constructor(i){super(i),this.type="image",this.inputMethod="any",this.maxImageSize=null}};e([o({type:["image"],readOnly:!0,json:{write:!0}})],D.prototype,"type",void 0),e([o({type:K,json:{write:!0}})],D.prototype,"inputMethod",void 0),e([o({type:Number,json:{write:!0}})],D.prototype,"maxImageSize",void 0),D=e([p("esri.form.elements.inputs.attachments.ImageInput")],D);const Ne=D;let W=class extends E{constructor(i){super(i),this.type="signature",this.inputMethod="any"}};e([o({type:["signature"],readOnly:!0,json:{write:!0}})],W.prototype,"type",void 0),e([o({type:K,json:{write:!0}})],W.prototype,"inputMethod",void 0),W=e([p("esri.form.elements.inputs.attachments.SignatureInput")],W);const Be=W;let V=class extends E{constructor(i){super(i),this.type="video",this.inputMethod="any",this.maxDuration=null}};e([o({type:["video"],readOnly:!0,json:{write:!0}})],V.prototype,"type",void 0),e([o({type:K,json:{write:!0}})],V.prototype,"inputMethod",void 0),e([o({type:Number,json:{write:!0}})],V.prototype,"maxDuration",void 0),V=e([p("esri.form.elements.inputs.attachments.VideoInput")],V);const ke=V;function He(t){return{nestableTypes:{base:E,key:"type",typeMap:{audio:De,document:Ve,image:Ne,signature:Be,video:ke}},allTypes:{base:E,key:"type",typeMap:{attachment:t,audio:De,document:Ve,image:Ne,signature:Be,video:ke}}}}function Et(t,i,n){return t?t.map(s=>ze(i.nestableTypes,s)):null}function Ft(t,i,n){if(!t)return null;const s=i.nestableTypes.typeMap;return t.filter(r=>s[r.type]).map(r=>s[r.type].fromJSON(r))}function Tt(t,i,n){if(!t)return null;const s=i.nestableTypes.typeMap;return t.filter(r=>s[r.type]).map(r=>r.toJSON())}let x=class extends E{constructor(i){super(i),this.type="attachment",this.attachmentAssociationType="exact",this.inputTypes=null}castInputs(i){return Et(i,ee)}readInputs(i,n){return Ft(n.inputTypes,ee)}writeInputs(i,n){n.inputTypes=Tt(i,ee)}};e([o({type:["attachment"],readOnly:!0,json:{write:!0}})],x.prototype,"type",void 0),e([o({type:["any","exact","exactOrNone"],json:{write:!0}})],x.prototype,"attachmentAssociationType",void 0),e([o({json:{write:{isRequired:!0}}})],x.prototype,"inputTypes",void 0),e([Ie("inputTypes")],x.prototype,"castInputs",null),e([l("inputTypes")],x.prototype,"readInputs",null),e([u("inputTypes")],x.prototype,"writeInputs",null),x=e([p("esri.form.elements.inputs.attachments.AttachmentInput")],x);const ee=He(x),Ot=x;var ae;const Mt=He(Ot);let y=ae=class extends O{constructor(t){super(t),this.allowUserRename=!0,this.attachmentKeyword=null,this.displayFilename=!1,this.editableExpression=null,this.filenameExpression="{attachmentKeyword}_{now}",this.input=null,this.maxAttachmentCount=null,this.minAttachmentCount=null,this.type="attachment",this.useOriginalFilename=!0}clone(){var t;return new ae({allowUserRename:this.allowUserRename,attachmentKeyword:this.attachmentKeyword,description:this.description,displayFilename:this.displayFilename,editableExpression:this.editableExpression,filenameExpression:this.filenameExpression,input:(t=this.input)==null?void 0:t.clone(),label:this.label,maxAttachmentCount:this.maxAttachmentCount,minAttachmentCount:this.minAttachmentCount,useOriginalFilename:this.useOriginalFilename,visibilityExpression:this.visibilityExpression})}};e([o({type:Boolean,json:{write:!0}})],y.prototype,"allowUserRename",void 0),e([o({type:String,json:{write:{isRequired:!0}}})],y.prototype,"attachmentKeyword",void 0),e([o({type:Boolean,json:{write:!0}})],y.prototype,"displayFilename",void 0),e([o({type:String,json:{write:!0}})],y.prototype,"editableExpression",void 0),e([o({type:String,json:{write:!0}})],y.prototype,"filenameExpression",void 0),e([o({types:Mt.allTypes,json:{read:{source:"inputType"},write:{target:"inputType",isRequired:!0}}})],y.prototype,"input",void 0),e([o({type:Number,json:{write:!0}})],y.prototype,"maxAttachmentCount",void 0),e([o({type:Number,json:{write:!0}})],y.prototype,"minAttachmentCount",void 0),e([o({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],y.prototype,"type",void 0),e([o({type:Boolean,json:{write:!0}})],y.prototype,"useOriginalFilename",void 0),y=ae=e([p("esri.form.elements.AttachmentElement")],y);const Ue=y;let Z=class extends S{constructor(i){super(i),this.type=null}};e([o()],Z.prototype,"type",void 0),Z=e([p("esri.form.elements.inputs.Input")],Z);const I=Z;let Q=class extends I{constructor(i){super(i),this.maxLength=null,this.minLength=0}};e([o({type:Number,json:{write:!0}})],Q.prototype,"maxLength",void 0),e([o({type:Number,json:{write:!0}})],Q.prototype,"minLength",void 0),Q=e([p("esri.form.elements.inputs.TextInput")],Q);const Ee=Q;var ue;let H=ue=class extends Ee{constructor(t){super(t),this.type="barcode-scanner"}clone(){return new ue({maxLength:this.maxLength,minLength:this.minLength})}};e([o({type:["barcode-scanner"],json:{read:!1,write:!0}})],H.prototype,"type",void 0),H=ue=e([p("esri.form.elements.inputs.BarcodeScannerInput")],H);const Rt=H;var de;let N=de=class extends I{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new de({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};e([o({type:String,json:{write:!0}})],N.prototype,"noValueOptionLabel",void 0),e([o({type:Boolean,json:{write:!0}})],N.prototype,"showNoValueOption",void 0),e([o({type:["combo-box"],json:{read:!1,write:!0}})],N.prototype,"type",void 0),N=de=e([p("esri.form.elements.inputs.ComboBoxInput")],N);const Dt=N;var ye;function Ae(t){return t??null}function Le(t){return t??null}let f=ye=class extends I{constructor(t){super(t),this.max=null,this.min=null,this.type="date-picker"}readMax(t,i){return Ae(i.max)}writeMax(t,i){i.max=Le(t)}readMin(t,i){return Ae(i.min)}writeMin(t,i){i.min=Le(t)}clone(){return new ye({max:this.max,min:this.min})}};e([o({type:String,json:{type:String,write:!0}})],f.prototype,"max",void 0),e([l("max")],f.prototype,"readMax",null),e([u("max")],f.prototype,"writeMax",null),e([o({type:String,json:{type:String,write:!0}})],f.prototype,"min",void 0),e([l("min")],f.prototype,"readMin",null),e([u("min")],f.prototype,"writeMin",null),e([o({type:["date-picker"],json:{read:!1,write:!0}})],f.prototype,"type",void 0),f=ye=e([p("esri.form.elements.inputs.DatePickerInput")],f);const Vt=f;var ce;function te(t){return t??null}function ie(t){return t??null}let d=ce=class extends I{constructor(t){super(t),this.includeTimeOffset=!0,this.max=null,this.min=null,this.timeResolution="minutes",this.type="datetimeoffset-picker"}readMax(t,i){return te(i.max)}writeMax(t,i){i.max=ie(t)}readMin(t,i){return te(i.min)}writeMin(t,i){i.min=ie(t)}readTimeResolution(t,i){return te(i.timeResolution)}writeTimeResolution(t,i){i.timeResolution=ie(t)}clone(){return new ce({includeTimeOffset:this.includeTimeOffset,max:this.max,min:this.min,timeResolution:this.timeResolution})}};e([o({type:Boolean,json:{write:!0}})],d.prototype,"includeTimeOffset",void 0),e([o({type:String,json:{type:String,write:!0}})],d.prototype,"max",void 0),e([l("max")],d.prototype,"readMax",null),e([u("max")],d.prototype,"writeMax",null),e([o({type:String,json:{type:String,write:!0}})],d.prototype,"min",void 0),e([l("min")],d.prototype,"readMin",null),e([u("min")],d.prototype,"writeMin",null),e([o({type:String,json:{type:String,write:!0}})],d.prototype,"timeResolution",void 0),e([l("timeResolution")],d.prototype,"readTimeResolution",null),e([u("timeResolution")],d.prototype,"writeTimeResolution",null),e([o({type:["datetimeoffset-picker"],json:{read:!1,write:!0}})],d.prototype,"type",void 0),d=ce=e([p("esri.form.elements.inputs.DateTimeOffsetPickerInput")],d);const Nt=d;var me;function Ce(t){return t!=null?new Date(t):null}function Ge(t){return t?t.getTime():null}let h=me=class extends I{constructor(t){super(t),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(t,i){return Ce(i.max)}writeMax(t,i){i.max=Ge(t)}readMin(t,i){return Ce(i.min)}writeMin(t,i){i.min=Ge(t)}clone(){return new me({includeTime:this.includeTime,max:this.max,min:this.min})}};e([o({type:Boolean,json:{write:!0}})],h.prototype,"includeTime",void 0),e([o({type:Date,json:{type:Number,write:!0}})],h.prototype,"max",void 0),e([l("max")],h.prototype,"readMax",null),e([u("max")],h.prototype,"writeMax",null),e([o({type:Date,json:{type:Number,write:!0}})],h.prototype,"min",void 0),e([l("min")],h.prototype,"readMin",null),e([u("min")],h.prototype,"writeMin",null),e([o({type:["datetime-picker"],json:{read:!1,write:!0}})],h.prototype,"type",void 0),h=me=e([p("esri.form.elements.inputs.DateTimePickerInput")],h);const Bt=h;var he;let B=he=class extends I{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new he({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};e([o({type:String,json:{write:!0}})],B.prototype,"noValueOptionLabel",void 0),e([o({type:Boolean,json:{write:!0}})],B.prototype,"showNoValueOption",void 0),e([o({type:["radio-buttons"],json:{read:!1,write:!0}})],B.prototype,"type",void 0),B=he=e([p("esri.form.elements.inputs.RadioButtonsInput")],B);const kt=B;var ve;let k=ve=class extends I{constructor(t){super(t),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new ve({offValue:this.offValue,onValue:this.onValue})}};e([o({type:[String,Number],json:{write:!0}})],k.prototype,"offValue",void 0),e([o({type:[String,Number],json:{write:!0}})],k.prototype,"onValue",void 0),e([o({type:["switch"],json:{read:!1,write:!0}})],k.prototype,"type",void 0),k=ve=e([p("esri.form.elements.inputs.SwitchInput")],k);const Ut=k;var fe;let J=fe=class extends Ee{constructor(t){super(t),this.type="text-area"}clone(){return new fe({maxLength:this.maxLength,minLength:this.minLength})}};e([o({type:["text-area"],json:{read:!1,write:!0}})],J.prototype,"type",void 0),J=fe=e([p("esri.form.elements.inputs.TextAreaInput")],J);const At=J;var xe;let _=xe=class extends Ee{constructor(t){super(t),this.type="text-box"}clone(){return new xe({maxLength:this.maxLength,minLength:this.minLength})}};e([o({type:["text-box"],json:{read:!1,write:!0}})],_.prototype,"type",void 0),_=xe=e([p("esri.form.elements.inputs.TextBoxInput")],_);const Lt=_;var we;function oe(t){return t??null}function se(t){return t??null}let c=we=class extends I{constructor(t){super(t),this.max=null,this.min=null,this.timeResolution="minutes",this.type="time-picker"}readMax(t,i){return oe(i.max)}writeMax(t,i){i.max=se(t)}readMin(t,i){return oe(i.min)}writeMin(t,i){i.min=se(t)}readTimeResolution(t,i){return oe(i.timeResolution)}writeTimeResolution(t,i){i.timeResolution=se(t)}clone(){return new we({max:this.max,min:this.min,timeResolution:this.timeResolution})}};e([o({type:String,json:{type:String,write:!0}})],c.prototype,"max",void 0),e([l("max")],c.prototype,"readMax",null),e([u("max")],c.prototype,"writeMax",null),e([o({type:String,json:{type:String,write:!0}})],c.prototype,"min",void 0),e([l("min")],c.prototype,"readMin",null),e([u("min")],c.prototype,"writeMin",null),e([o({type:String,json:{type:String,write:!0}})],c.prototype,"timeResolution",void 0),e([l("timeResolution")],c.prototype,"readTimeResolution",null),e([u("timeResolution")],c.prototype,"writeTimeResolution",null),e([o({type:["time-picker"],json:{read:!1,write:!0}})],c.prototype,"type",void 0),c=we=e([p("esri.form.elements.inputs.TimePickerInput")],c);const Ct=c,Gt={base:I,key:"type",typeMap:{"barcode-scanner":Rt,"combo-box":Dt,"date-picker":Vt,"datetime-picker":Bt,"datetimeoffset-picker":Nt,"radio-buttons":kt,switch:Ut,"text-area":At,"text-box":Lt,"time-picker":Ct}};var ge;let m=ge=class extends O{constructor(t){super(t),this.domain=null,this.editable=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}clone(){return new ge({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};e([o({types:tt,json:{read:{reader:Pe},write:!0}})],m.prototype,"domain",void 0),e([o({type:Boolean,json:{write:!0}})],m.prototype,"editable",void 0),e([o({type:String,json:{write:!0}})],m.prototype,"editableExpression",void 0),e([o({type:String,json:{write:!0}})],m.prototype,"fieldName",void 0),e([o({type:String,json:{write:!0}})],m.prototype,"hint",void 0),e([o({types:Gt,json:{read:{source:"inputType"},write:{target:"inputType"}}})],m.prototype,"input",void 0),e([o({type:String,json:{write:!0}})],m.prototype,"requiredExpression",void 0),e([o({type:String,json:{read:!1,write:!0}})],m.prototype,"type",void 0),e([o({type:String,json:{write:!0}})],m.prototype,"valueExpression",void 0),m=ge=e([p("esri.form.elements.FieldElement")],m);const We=m;var be;let b=be=class extends O{constructor(t){super(t),this.displayCount=null,this.displayType="list",this.editableExpression=null,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new be({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editableExpression:this.editableExpression,label:this.label,orderByFields:L(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};e([o({type:Number,json:{write:!0}})],b.prototype,"displayCount",void 0),e([o({type:["list"],json:{write:!0}})],b.prototype,"displayType",void 0),e([o({type:String,json:{write:!0}})],b.prototype,"editableExpression",void 0),e([o({type:[it],json:{write:!0}})],b.prototype,"orderByFields",void 0),e([o({type:Number,json:{write:!0}})],b.prototype,"relationshipId",void 0),e([o({type:["relationship"],json:{read:!1,write:!0}})],b.prototype,"type",void 0),b=be=e([p("esri.form.elements.RelationshipElement")],b);const Qe=b;var je;let U=je=class extends O{constructor(t){super(t),this.text=null,this.textFormat="plain-text",this.type="text"}clone(){return new je({text:this.text,textFormat:this.textFormat,visibilityExpression:this.visibilityExpression})}};e([o({type:String,json:{write:!0}})],U.prototype,"text",void 0),e([o({type:String,json:{write:!0}})],U.prototype,"textFormat",void 0),e([o({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],U.prototype,"type",void 0),U=je=e([p("esri.form.elements.TextElement")],U);const qe=U;function Je(t){return{typesWithGroup:{base:O,key:"type",typeMap:{attachment:Ue,field:We,group:t,relationship:Qe,text:qe}},typesWithoutGroup:{base:O,key:"type",typeMap:{attachment:Ue,field:We,relationship:Qe,text:qe}}}}function _e(t,i,n=!0){if(!t)return null;const s=n?i.typesWithGroup.typeMap:i.typesWithoutGroup.typeMap;return t.filter(r=>s[r.type]).map(r=>s[r.type].fromJSON(r))}function Ke(t,i,n=!0){if(!t)return null;const s=n?i.typesWithGroup.typeMap:i.typesWithoutGroup.typeMap;return t.filter(r=>s[r.type]).map(r=>r.toJSON())}function Xe(t,i,n=!0){return t?t.map(s=>ze(n?i.typesWithGroup:i.typesWithoutGroup,s)):null}var $e;let w=$e=class extends O{constructor(t){super(t),this.elements=null,this.initialState="expanded",this.type="group"}castElements(t){return Xe(t,ne,!1)}readElements(t,i){return _e(i.formElements,ne,!1)}writeElements(t,i){i.formElements=Ke(t,ne,!1)}clone(){return new $e({description:this.description,elements:L(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};e([o({json:{write:!0}})],w.prototype,"elements",void 0),e([Ie("elements")],w.prototype,"castElements",null),e([l("elements",["formElements"])],w.prototype,"readElements",null),e([u("elements")],w.prototype,"writeElements",null),e([o({type:["collapsed","expanded"],json:{write:!0}})],w.prototype,"initialState",void 0),e([o({type:String,json:{read:!1,write:!0}})],w.prototype,"type",void 0),w=$e=e([p("esri.form.elements.GroupElement")],w);const ne=Je(w),Wt=w,Qt=t=>t.type==="field",qt=t=>t.type==="group",zt=t=>t.type==="text";var Se;const re=Je(Wt);let v=Se=class extends S{constructor(t){super(t),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(t){return Xe(t,re)}readElements(t,i){return _e(i.formElements,re)}writeElements(t,i){i.formElements=Ke(t,re)}clone(){return new Se({description:this.description,expressionInfos:L(this.expressionInfos),elements:L(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}async getFieldsUsed(t,i){const n=new Set,{description:s,elements:r,expressionInfos:a,title:C}=this;if(q(n,t,s),q(n,t,C),!r)return[];const M=Pt(r,a).map(X=>ot(n,t,X));await Promise.all(M);for(const X of r)Ye(n,{fieldsIndex:t,relationships:i},X);return Array.from(n).sort()}};function Ye(t,i,n){var r;const{fieldsIndex:s}=i;if(!s||s.fields.length!==t.size)switch(q(t,s,n.label),q(t,s,n.description),n.type){case"field":Fe(t,s,n.fieldName);break;case"group":n.elements.forEach(a=>Ye(t,i,a));break;case"relationship":if(i.relationships){const a=i.relationships.find(C=>C.id===n.relationshipId);a&&Fe(t,s,a.keyField)}Ze(t,s,(r=n.orderByFields)==null?void 0:r.map(a=>a.field));break;case"text":q(t,s,n.text)}}function Pt(t,i){if(!i||i.length===0)return[];const n=et(t),s=[];for(const r of i)n.has(r.name)&&s.push(r.expression);return s}function et(t){const i=new Set;for(const n of t)if(Te(i,n.visibilityExpression),!zt(n)){if(qt(n))Oe(i,et(n.elements));else if(Te(i,n.editableExpression),Qt(n)){const{requiredExpression:s,valueExpression:r}=n;Oe(i,[s,r])}}return i}function q(t,i,n){Ze(t,i,st(n))}e([o({type:String,json:{write:!0}})],v.prototype,"description",void 0),e([o({json:{write:!0}})],v.prototype,"elements",void 0),e([Ie("elements")],v.prototype,"castElements",null),e([l("elements",["formElements"])],v.prototype,"readElements",null),e([u("elements")],v.prototype,"writeElements",null),e([o({type:[It],json:{write:!0}})],v.prototype,"expressionInfos",void 0),e([o({type:Boolean,json:{default:!1,write:!0}})],v.prototype,"preserveFieldValuesWhenHidden",void 0),e([o({type:String,json:{write:!0}})],v.prototype,"title",void 0),v=Se=e([p("esri.form.FormTemplate")],v);const yi=v;let j=class extends z(S){constructor(t){super(t),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.timeZone=null}};e([o()],j.prototype,"creatorField",void 0),e([o()],j.prototype,"creationDateField",void 0),e([o()],j.prototype,"editorField",void 0),e([o()],j.prototype,"editDateField",void 0),e([o()],j.prototype,"realm",void 0),e([o(pe("dateFieldsTimeReference",!0))],j.prototype,"timeZone",void 0),j=e([p("esri.layers.support.EditFieldsInfo")],j);const Zt=j;let g=class extends z(S){constructor(t){super(t)}};e([o({constructOnly:!0,json:{write:!0}})],g.prototype,"name",void 0),e([o({constructOnly:!0,json:{write:!0}})],g.prototype,"fields",void 0),e([o({constructOnly:!0,json:{write:!0}})],g.prototype,"isAscending",void 0),e([o({constructOnly:!0,json:{write:!0}})],g.prototype,"indexType",void 0),e([o({constructOnly:!0,json:{write:!0}})],g.prototype,"isUnique",void 0),e([o({constructOnly:!0,json:{write:!0}})],g.prototype,"description",void 0),g=e([p("esri.layers.support.FeatureIndex")],g);let A=class extends z(S){constructor(t){super(t),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};e([o({type:String,json:{read:{source:"shapeAreaFieldName"}}})],A.prototype,"shapeAreaField",void 0),e([o({type:String,json:{read:{source:"shapeLengthFieldName"}}})],A.prototype,"shapeLengthField",void 0),e([o({type:String,json:{read:t=>nt.read(t)||rt.read(t)}})],A.prototype,"units",void 0),A=e([p("esri.layers.support.GeometryFieldsInfo")],A);const Ht=A;let $=class extends z(S){constructor(t){super(t),this.code=null,this.defaultValues={},this.domains=null,this.name=null}readDomains(t){if(!t)return null;const i={};for(const n of Object.keys(t))i[n]=Pe(t[n]);return i}writeDomains(t,i){var s;if(!t)return;const n={};for(const r of Object.keys(t))t[r]&&(n[r]=(s=t[r])==null?void 0:s.toJSON());i.domains=n}};e([o({type:Number,json:{write:!0}})],$.prototype,"code",void 0),e([o({type:Object,json:{write:!0}})],$.prototype,"defaultValues",void 0),e([o({json:{write:!0}})],$.prototype,"domains",void 0),e([l("domains")],$.prototype,"readDomains",null),e([u("domains")],$.prototype,"writeDomains",null),e([o({type:String,json:{write:!0}})],$.prototype,"name",void 0),$=e([p("esri.layers.support.Subtype")],$);const Jt=$,ci=t=>{let i=class extends t{constructor(){super(...arguments),this.copyright=null,this.capabilities=null,this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.definitionExpression=null,this.displayField=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.globalIdField=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.indexes=new(Me.ofType(g)),this.isTable=!1,this.layerId=void 0,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.preferredTimeZone=null,this.relationships=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.sourceJSON=null,this.spatialReference=Re.WGS84,this.subtypeField=null,this.subtypes=null,this.trackIdField=null,this.version=void 0}get authenticationTriggerEvent(){var r;if(!this.url)return null;const{capabilities:n}=this;if(n){const{query:a,operations:C,editing:M}=n;if(!a.supportsQueryByOthers||!a.supportsQueryByAnonymous||C.supportsEditing&&!(M.supportsUpdateByOthers&&M.supportsUpdateByAnonymous&&M.supportsDeleteByOthers&&M.supportsDeleteByAnonymous))return"load"}if((r=this.serviceDefinitionExpression)!=null&&r.toLowerCase().includes("current_user"))return"load";if(this.userHasUpdateItemPrivileges){if(xt(this))return"load";if(this.hasUpdateItemRestrictions)return n.operations.supportsQuery?"editing":"load"}if(this.userHasFullEditingPrivileges&&this.hasFullEditingRestrictions)return"editing";const s=this.editFieldsInfo;return(s!=null&&s.creatorField||s!=null&&s.editorField)&&(n!=null&&n.operations.supportsEditing)?"editing":null}readCapabilitiesFromService(n,s){return St(s,this.url)}readEditingInfo(n,s){const{editingInfo:r}=s;return r?{lastEditDate:r.lastEditDate!=null?new Date(r.lastEditDate):null}:null}get effectiveCapabilities(){const n=this.capabilities;if(!n)return null;const s=L(n),{operations:r,editing:a}=s;return Y(this)?(this.userHasUpdateItemPrivileges&&(r.supportsQuery=!0),s):this.userHasUpdateItemPrivileges?(r.supportsAdd=r.supportsDelete=r.supportsEditing=r.supportsQuery=r.supportsUpdate=a.supportsDeleteByOthers=a.supportsGeometryUpdate=a.supportsUpdateByOthers=!0,s):(this.userHasFullEditingPrivileges&&r.supportsEditing&&(r.supportsAdd=r.supportsDelete=r.supportsUpdate=a.supportsGeometryUpdate=!0),s)}readGlobalIdFieldFromService(n,s){return wt(s)}get hasFullEditingRestrictions(){const n=this.capabilities;if(!n||Y(this))return!1;const{operations:s,editing:r}=n;return s.supportsEditing&&!(s.supportsAdd&&s.supportsDelete&&s.supportsUpdate&&r.supportsGeometryUpdate)}get hasUpdateItemRestrictions(){const n=this.capabilities;if(!n)return!1;const{operations:s,editing:r}=n;return Y(this)?!s.supportsQuery:!(s.supportsAdd&&s.supportsDelete&&s.supportsEditing&&s.supportsQuery&&s.supportsUpdate&&r.supportsDeleteByOthers&&r.supportsGeometryUpdate&&r.supportsUpdateByOthers)}readIsTableFromService(n,s){return s.type==="Table"}readMaxScale(n,s){return s.effectiveMaxScale||n||0}readMinScale(n,s){return s.effectiveMinScale||n||0}readObjectIdFieldFromService(n,s){return gt(s)}readServiceDefinitionExpression(n,s){return s.definitionQuery||s.definitionExpression}set url(n){if(n==null)return void this._set("url",n);const s=at({layer:this,url:n,nonStandardUrlAllowed:!0,logger:ut.getLogger(this)});this._set("url",s.url),s.layerId!=null&&this._set("layerId",s.layerId)}writeUrl(n,s,r,a){dt(this,n,null,s,a)}readVersion(n,s){return bt(s)}};return e([o({readOnly:!0})],i.prototype,"authenticationTriggerEvent",null),e([o({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],i.prototype,"copyright",void 0),e([o({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","isDataBranchVersioned","isDataVersioned","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],i.prototype,"capabilities",void 0),e([l("service","capabilities")],i.prototype,"readCapabilitiesFromService",null),e([o(pe("dateFieldsTimeReference"))],i.prototype,"dateFieldsTimeZone",void 0),e([o({type:Boolean})],i.prototype,"datesInUnknownTimezone",void 0),e([o({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],i.prototype,"definitionExpression",void 0),e([o({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],i.prototype,"displayField",void 0),e([o({readOnly:!0,type:Zt})],i.prototype,"editFieldsInfo",void 0),e([o({readOnly:!0})],i.prototype,"editingInfo",void 0),e([l("editingInfo")],i.prototype,"readEditingInfo",null),e([o({readOnly:!0})],i.prototype,"effectiveCapabilities",null),e([o((()=>{const n=L(yt),s=n.json.origins;return s["web-map"]={read:!1,write:!1},s["portal-item"]={read:!1,write:!1},n})())],i.prototype,"elevationInfo",void 0),e([o({type:jt,json:{name:"layerDefinition.floorInfo",write:!0,origins:{"web-scene":{name:"layerDefinition.floorInfo",write:{enabled:!0,layerContainerTypes:ct}}}}})],i.prototype,"floorInfo",void 0),e([o({type:pt,json:{origins:{service:{read:{source:"extent"}}}}})],i.prototype,"fullExtent",void 0),e([o()],i.prototype,"gdbVersion",void 0),e([o({readOnly:!0,type:Ht,json:{read:{source:"geometryProperties"}}})],i.prototype,"geometryFieldsInfo",void 0),e([o({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:ft.read}}}})],i.prototype,"geometryType",void 0),e([o({type:String})],i.prototype,"globalIdField",void 0),e([l("service","globalIdField",["globalIdField","fields"])],i.prototype,"readGlobalIdFieldFromService",null),e([o({readOnly:!0})],i.prototype,"hasFullEditingRestrictions",null),e([o({type:Boolean,json:{origins:{service:{read:!0}}}})],i.prototype,"hasM",void 0),e([o({readOnly:!0})],i.prototype,"hasUpdateItemRestrictions",null),e([o({type:Boolean,json:{origins:{service:{read:!0}}}})],i.prototype,"hasZ",void 0),e([o({readOnly:!0,type:lt})],i.prototype,"heightModelInfo",void 0),e([o({type:Date})],i.prototype,"historicMoment",void 0),e([o({type:Me.ofType(g),readOnly:!0})],i.prototype,"indexes",void 0),e([o({readOnly:!0})],i.prototype,"isTable",void 0),e([l("service","isTable",["type"])],i.prototype,"readIsTableFromService",null),e([o({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],i.prototype,"layerId",void 0),e([o(mt)],i.prototype,"maxScale",void 0),e([l("service","maxScale",["maxScale","effectiveMaxScale"])],i.prototype,"readMaxScale",null),e([o(ht)],i.prototype,"minScale",void 0),e([l("service","minScale",["minScale","effectiveMinScale"])],i.prototype,"readMinScale",null),e([o({type:String})],i.prototype,"objectIdField",void 0),e([l("service","objectIdField",["objectIdField","fields"])],i.prototype,"readObjectIdFieldFromService",null),e([o(pe("preferredTimeReference"))],i.prototype,"preferredTimeZone",void 0),e([o({type:[$t],readOnly:!0})],i.prototype,"relationships",void 0),e([o({type:Boolean})],i.prototype,"returnM",void 0),e([o({type:Boolean})],i.prototype,"returnZ",void 0),e([o({readOnly:!0,json:{write:!1}})],i.prototype,"serverGens",void 0),e([o({readOnly:!0})],i.prototype,"serviceDefinitionExpression",void 0),e([l("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],i.prototype,"readServiceDefinitionExpression",null),e([o({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],i.prototype,"serviceItemId",void 0),e([o()],i.prototype,"sourceJSON",void 0),e([o({type:Re,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],i.prototype,"spatialReference",void 0),e([o({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],i.prototype,"subtypeField",void 0),e([o({type:[Jt],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],i.prototype,"subtypes",void 0),e([o({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],i.prototype,"trackIdField",void 0),e([o(vt)],i.prototype,"url",null),e([u("url")],i.prototype,"writeUrl",null),e([o({json:{origins:{service:{read:!0}},read:!1}})],i.prototype,"version",void 0),e([l("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],i.prototype,"readVersion",null),i=e([p("esri.layers.mixins.FeatureLayerBase")],i),i};export{ci as B,yi as V};
