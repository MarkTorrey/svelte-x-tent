var CG=Object.defineProperty;var IG=(t,e,i)=>e in t?CG(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i;var Bw=(t,e,i)=>(IG(t,typeof e!="symbol"?e+"":e,i),i);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function i(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=i(r);fetch(r.href,s)}})();function Dt(){}function gL(t){return t()}function SM(){return Object.create(null)}function xp(t){t.forEach(gL)}function m1(t){return typeof t=="function"}function bd(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function OG(t){return Object.keys(t).length===0}function yL(t,...e){if(t==null){for(const n of e)n(void 0);return Dt}const i=t.subscribe(...e);return i.unsubscribe?()=>i.unsubscribe():i}function Nu(t,e,i){t.$$.on_destroy.push(yL(e,i))}function $M(t){return t??""}function AG(t,e,i){return t.set(i),e}function LG(t){return t&&m1(t.destroy)?t.destroy:Dt}function ne(t,e){t.appendChild(e)}function Sc(t,e,i){t.insertBefore(e,i||null)}function Wa(t){t.parentNode&&t.parentNode.removeChild(t)}function fe(t){return document.createElement(t)}function bo(t){return document.createTextNode(t)}function ci(){return bo(" ")}function PG(){return bo("")}function Gl(t,e,i,n){return t.addEventListener(e,i,n),()=>t.removeEventListener(e,i,n)}function Sn(t,e,i){i==null?t.removeAttribute(e):t.getAttribute(e)!==i&&t.setAttribute(e,i)}function Q(t,e,i){const n=e.toLowerCase();n in t?t[n]=typeof t[n]=="boolean"&&i===""?!0:i:e in t?t[e]=typeof t[e]=="boolean"&&i===""?!0:i:Sn(t,e,i)}function RG(t){return Array.from(t.childNodes)}function NG(t,e,{bubbles:i=!1,cancelable:n=!1}={}){return new CustomEvent(t,{detail:e,bubbles:i,cancelable:n})}let jm;function mm(t){jm=t}function vL(){if(!jm)throw new Error("Function called outside component initialization");return jm}function DG(t){vL().$$.on_mount.push(t)}function bL(){const t=vL();return(e,i,{cancelable:n=!1}={})=>{const r=t.$$.callbacks[e];if(r){const s=NG(e,i,{cancelable:n});return r.slice().forEach(o=>{o.call(t,s)}),!s.defaultPrevented}return!0}}const Jd=[],xM=[];let Dh=[];const TM=[],FG=Promise.resolve();let IS=!1;function zG(){IS||(IS=!0,FG.then(wL))}function OS(t){Dh.push(t)}const qw=new Set;let Rd=0;function wL(){if(Rd!==0)return;const t=jm;do{try{for(;Rd<Jd.length;){const e=Jd[Rd];Rd++,mm(e),jG(e.$$)}}catch(e){throw Jd.length=0,Rd=0,e}for(mm(null),Jd.length=0,Rd=0;xM.length;)xM.pop()();for(let e=0;e<Dh.length;e+=1){const i=Dh[e];qw.has(i)||(qw.add(i),i())}Dh.length=0}while(Jd.length);for(;TM.length;)TM.pop()();IS=!1,qw.clear(),mm(t)}function jG(t){if(t.fragment!==null){t.update(),xp(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(OS)}}function GG(t){const e=[],i=[];Dh.forEach(n=>t.indexOf(n)===-1?e.push(n):i.push(n)),i.forEach(n=>n()),Dh=e}const M0=new Set;let UG;function kh(t,e){t&&t.i&&(M0.delete(t),t.i(e))}function wf(t,e,i,n){if(t&&t.o){if(M0.has(t))return;M0.add(t),UG.c.push(()=>{M0.delete(t),n&&(i&&t.d(1),n())}),t.o(e)}else n&&n()}function _f(t){t&&t.c()}function Mh(t,e,i){const{fragment:n,after_update:r}=t.$$;n&&n.m(e,i),OS(()=>{const s=t.$$.on_mount.map(gL).filter(m1);t.$$.on_destroy?t.$$.on_destroy.push(...s):xp(s),t.$$.on_mount=[]}),r.forEach(OS)}function Ch(t,e){const i=t.$$;i.fragment!==null&&(GG(i.after_update),xp(i.on_destroy),i.fragment&&i.fragment.d(e),i.on_destroy=i.fragment=null,i.ctx=[])}function HG(t,e){t.$$.dirty[0]===-1&&(Jd.push(t),zG(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Tp(t,e,i,n,r,s,o=null,a=[-1]){const l=jm;mm(t);const u=t.$$={fragment:null,ctx:[],props:s,update:Dt,not_equal:r,bound:SM(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:SM(),dirty:a,skip_bound:!1,root:e.target||l.$$.root};o&&o(u.root);let p=!1;if(u.ctx=i?i(t,e.props||{},(f,m,...g)=>{const y=g.length?g[0]:m;return u.ctx&&r(u.ctx[f],u.ctx[f]=y)&&(!u.skip_bound&&u.bound[f]&&u.bound[f](y),p&&HG(t,f)),m}):[],u.update(),p=!0,xp(u.before_update),u.fragment=n?n(u.ctx):!1,e.target){if(e.hydrate){const f=RG(e.target);u.fragment&&u.fragment.l(f),f.forEach(Wa)}else u.fragment&&u.fragment.c();e.intro&&kh(t.$$.fragment),Mh(t,e.target,e.anchor),wL()}mm(l)}class Ep{constructor(){Bw(this,"$$");Bw(this,"$$set")}$destroy(){Ch(this,1),this.$destroy=Dt}$on(e,i){if(!m1(i))return Dt;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(i),()=>{const r=n.indexOf(i);r!==-1&&n.splice(r,1)}}$set(e){this.$$set&&!OG(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const VG="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(VG);const Nd=[];function BG(t,e){return{subscribe:hT(t,e).subscribe}}function hT(t,e=Dt){let i;const n=new Set;function r(a){if(bd(t,a)&&(t=a,i)){const l=!Nd.length;for(const u of n)u[1](),Nd.push(u,t);if(l){for(let u=0;u<Nd.length;u+=2)Nd[u][0](Nd[u+1]);Nd.length=0}}}function s(a){r(a(t))}function o(a,l=Dt){const u=[a,l];return n.add(u),n.size===1&&(i=e(r,s)||Dt),a(t),()=>{n.delete(u),n.size===0&&i&&(i(),i=null)}}return{set:r,update:s,subscribe:o}}function pT(t,e,i){const n=!Array.isArray(t),r=n?[t]:t;if(!r.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const s=e.length<2;return BG(i,(o,a)=>{let l=!1;const u=[];let p=0,f=Dt;const m=()=>{if(p)return;f();const y=e(n?u[0]:u,o,a);s?o(y):f=m1(y)?y:Dt},g=r.map((y,v)=>yL(y,b=>{u[v]=b,p&=~(1<<v),l&&m()},()=>{p|=1<<v}));return l=!0,m(),function(){xp(g),f(),l=!1}})}let Ww=class Zc{constructor(e=1){this._seed=e}set seed(e){this._seed=e??Math.random()*Zc._m}getInt(){return this._seed=(Zc._a*this._seed+Zc._c)%Zc._m,this._seed}getFloat(){return this.getInt()/(Zc._m-1)}getIntRange(e,i){return Math.round(this.getFloatRange(e,i))}getFloatRange(e,i){const n=i-e;return e+this.getInt()/Zc._m*n}};Ww._m=2147483647,Ww._a=48271,Ww._c=0;const qG=1.5,Ebe=1/qG,kbe=.5;function Mbe(t,e){return e?t.filter((i,n,r)=>r.findIndex(e.bind(null,i))===n):Array.from(new Set(t))}function vg(t,e,i){if(t==null&&e==null)return!0;if(t==null||e==null||t.length!==e.length)return!1;if(i){for(let n=0;n<t.length;n++)if(!i(t[n],e[n]))return!1}else for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Cbe(t,e){let i=t.length!==e.length;i&&(t.length=e.length);for(let n=0;n<e.length;++n)t[n]!==e[n]&&(t[n]=e[n],i=!0);return i}function Ibe(t,e,i){let n,r;return i?(n=e.filter(s=>!t.some(o=>i(o,s))),r=t.filter(s=>!e.some(o=>i(o,s)))):(n=e.filter(s=>!t.includes(s)),r=t.filter(s=>!e.includes(s))),{added:n,removed:r}}function Obe(t){return t&&typeof t.length=="number"}const WG=!!Array.prototype.fill;function Abe(t,e){if(WG)return new Array(t).fill(e);const i=new Array(t);for(let n=0;n<t;n++)i[n]=e;return i}function Lbe(t,e){e===void 0&&(e=t,t=0);const i=new Array(e-t);for(let n=t;n<e;n++)i[n-t]=n;return i}let _L=class{constructor(){this.last=0}};const SL=new _L;function AS(t,e,i,n){n=n||SL;const r=Math.max(0,n.last-10);for(let o=r;o<i;++o)if(t[o]===e)return n.last=o,o;const s=Math.min(r,i);for(let o=0;o<s;++o)if(t[o]===e)return n.last=o,o;return-1}function $L(t,e,i,n){const r=i??t.length,s=AS(t,e,r,n);if(s!==-1)return t[s]=t[r-1],i==null&&t.pop(),e}const Ur=new Set;function ZG(t,e,i=t.length,n=e.length,r,s){if(n===0||i===0)return i;Ur.clear();for(let a=0;a<n;++a)Ur.add(e[a]);r=r||SL;const o=Math.max(0,r.last-10);for(let a=o;a<i;++a)if(Ur.has(t[a])&&(s==null||s.push(t[a]),Ur.delete(t[a]),t[a]=t[i-1],--i,--a,Ur.size===0||i===0))return Ur.clear(),i;for(let a=0;a<o;++a)if(Ur.has(t[a])&&(s==null||s.push(t[a]),Ur.delete(t[a]),t[a]=t[i-1],--i,--a,Ur.size===0||i===0))return Ur.clear(),i;return Ur.clear(),i}function Rbe(t,e){let i=0;for(let n=0;n<t.length;++n){const r=t[n];e(r,n)&&(t[i]=r,i++)}t.length=i}function KG(t,e){const i=t.indexOf(e);return i!==-1?(t.splice(i,1),e):null}function Qi(t,e){return t!=null}const Nbe=[];function xL(t){return 32+t.length}function fT(){return 16}function Dbe(t){if(!t)return 0;let e=EL;for(const i in t)if(t.hasOwnProperty(i)){const n=t[i];switch(typeof n){case"string":e+=xL(n);break;case"number":e+=fT();break;case"boolean":e+=4}}return e}function JG(t){if(!t)return 0;if(Array.isArray(t))return YG(t);let e=EL;for(const i in t)t.hasOwnProperty(i)&&(e+=TL(t[i]));return e}function YG(t){const e=t.length;if(e===0||typeof t[0]=="number")return 32+8*e;let i=kL;for(let n=0;n<e;n++)i+=TL(t[n]);return i}function TL(t){switch(typeof t){case"object":return JG(t);case"string":return xL(t);case"number":return fT();case"boolean":return 4;default:return 8}}function XG(t,e){return kL+t.length*e}const EL=32,kL=32;let Jl;function z(t){return typeof Jl[t]=="function"?Jl[t]=Jl[t](globalThis):Jl[t]}var lL,cL,uL,dL;Jl=(lL=globalThis.dojoConfig)!=null&&lL.has||(cL=globalThis.esriConfig)!=null&&cL.has?{...(uL=globalThis.dojoConfig)==null?void 0:uL.has,...(dL=globalThis.esriConfig)==null?void 0:dL.has}:{},z.add=(t,e,i,n)=>((n||Jl[t]===void 0)&&(Jl[t]=e),i&&z(t)),z.cache=Jl,z.add("big-integer-warning-enabled",!0),z.add("esri-deprecation-warnings",!0),z.add("esri-tests-disable-screenshots",!1),z.add("esri-tests-use-full-window",!1),z.add("esri-tests-post-to-influx",!0),(()=>{var e;z.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const t=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(z.add("host-browser",t),z.add("host-node",typeof globalThis.process=="object"&&((e=globalThis.process.versions)==null?void 0:e.node)&&globalThis.process.versions.v8),z.add("dom",t),z("host-browser")){const i=navigator,n=i.userAgent,r=i.appVersion,s=parseFloat(r);if(z.add("wp",parseFloat(n.split("Windows Phone")[1])||void 0),z.add("msapp",parseFloat(n.split("MSAppHost/")[1])||void 0),z.add("khtml",r.includes("Konqueror")?s:void 0),z.add("edge",parseFloat(n.split("Edge/")[1])||void 0),z.add("opr",parseFloat(n.split("OPR/")[1])||void 0),z.add("webkit",!z("wp")&&!z("edge")&&parseFloat(n.split("WebKit/")[1])||void 0),z.add("chrome",!z("edge")&&!z("opr")&&parseFloat(n.split("Chrome/")[1])||void 0),z.add("android",!z("wp")&&parseFloat(n.split("Android ")[1])||void 0),z.add("safari",!r.includes("Safari")||z("wp")||z("chrome")||z("android")||z("edge")||z("opr")?void 0:parseFloat(r.split("Version/")[1])),z.add("mac",r.includes("Macintosh")),!z("wp")&&/(iPhone|iPod|iPad)/.test(n)){const o=RegExp.$1.replace(/P/,"p"),a=/OS ([\d_]+)/.test(n)?RegExp.$1:"1",l=parseFloat(a.replace(/_/,".").replaceAll("_",""));z.add(o,l),z.add("ios",l)}z("webkit")||(!n.includes("Gecko")||z("wp")||z("khtml")||z("edge")||z.add("mozilla",s),z("mozilla")&&z.add("ff",parseFloat(n.split("Firefox/")[1]||n.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const t=navigator.userAgent,e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(t),i=/iPhone/i.test(t);e&&z.add("esri-mobile",e),i&&z.add("esri-iPhone",i),z.add("esri-geolocation",!!navigator.geolocation)}z.add("esri-wasm","WebAssembly"in globalThis),z.add("esri-performance-mode-frames-between-render",20),z.add("esri-force-performance-mode",!1),z.add("esri-shared-array-buffer",()=>{const t="SharedArrayBuffer"in globalThis,e=globalThis.crossOriginIsolated===!1;return t&&!e}),z.add("wasm-simd",()=>{const t=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(t))}),z.add("esri-atomics","Atomics"in globalThis),z.add("esri-workers","Worker"in globalThis),z.add("web-feat:cache","caches"in globalThis),z.add("esri-workers-arraybuffer-transfer",!z("safari")||Number(z("safari"))>=12),z.add("workers-pool-size",8),z.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),z.add("featurelayer-simplify-payload-size-factors",[1,1,4]),z.add("featurelayer-animation-enabled",!0),z.add("featurelayer-snapshot-enabled",!0),z.add("featurelayer-snapshot-point-min-threshold",8e4),z.add("featurelayer-snapshot-point-max-threshold",4e5),z.add("featurelayer-snapshot-point-coverage",.1),z.add("featurelayer-advanced-symbols",!1),z.add("featurelayer-pbf",!0),z.add("featurelayer-pbf-statistics",!1),z.add("feature-layers-workers",!0),z.add("feature-polyline-generalization-factor",1),z.add("mapview-transitions-duration",200),z.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),z.add("mapserver-pbf-version-support",10.81),z.add("mapservice-popup-identify-max-tolerance",20),z.add("heatmap-allow-raster-fallback",!1),z.add("heatmap-force-raster",!1),z("host-webworker")||z("host-browser")&&(z.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),z.add("esri-image-decode",()=>{if("decode"in new Image){const t=new Image;return t.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void t.decode().then(()=>{z.add("esri-image-decode",!0,!0,!0)}).catch(()=>{z.add("esri-image-decode",!1,!0,!0)})}return!1}),z.add("esri-url-encodes-apostrophe",()=>{const t=window.document.createElement("a");return t.href="?'",t.href.includes("?%27")}))})();function Fbe(t){return t instanceof ArrayBuffer}function mT(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int8Array"}function ML(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint8Array"}function CL(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint8ClampedArray"}function gT(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int16Array"}function IL(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint16Array"}function yT(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int32Array"}function OL(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint32Array"}function g1(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Float32Array"}function y1(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Float64Array"}function QG(t){return!("buffer"in t)}function zbe(...t){return t.reduce((e,i)=>e+(i?QG(i)?XG(i,fT()):i.byteLength+e7:0),0)}const e7=145,jbe=1024;function Gbe(t){return y1(t)||g1(t)||yT(t)||gT(t)||mT(t)}function Ube(t){return y1(t)||g1(t)}function Hbe(t){return y1(t)?179769e303:g1(t)?3402823e32:OL(t)?4294967295:IL(t)?65535:ML(t)||CL(t)?255:yT(t)?2147483647:gT(t)?32767:mT(t)?127:256}function AL(t,e){let i;if(e)for(i in t)t.hasOwnProperty(i)&&(t[i]===void 0?delete t[i]:t[i]instanceof Object&&AL(t[i],!0));else for(i in t)t.hasOwnProperty(i)&&t[i]===void 0&&delete t[i];return t}function q(t){if(!t||typeof t!="object"||typeof t=="function")return t;const e=RL(t);if(e!=null)return e;if(Iv(t))return t.clone();if(LL(t))return t.map(q);if(PL(t))return t.clone();const i={};for(const n of Object.getOwnPropertyNames(t))i[n]=q(t[n]);return i}function LS(t){if(!t||typeof t!="object"||typeof t=="function"||"HTMLElement"in globalThis&&t instanceof HTMLElement)return t;const e=RL(t);if(e!=null)return e;if(LL(t)){let i=!0;const n=t.map(r=>{const s=LS(r);return r!=null&&s==null&&(i=!1),s});return i?n:null}if(Iv(t))return t.clone();if(t instanceof File||t instanceof Blob)return t;if(!PL(t)){const i=new(Object.getPrototypeOf(t)).constructor;for(const n of Object.getOwnPropertyNames(t)){const r=t[n],s=LS(r);if(r!=null&&s==null)return null;i[n]=s}return i}return null}function Iv(t){return typeof t.clone=="function"}function LL(t){return typeof t.map=="function"&&typeof t.forEach=="function"}function PL(t){return typeof t.notifyChange=="function"&&typeof t.watch=="function"}function EM(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function RL(t){if(mT(t)||ML(t)||CL(t)||gT(t)||IL(t)||yT(t)||OL(t)||g1(t)||y1(t))return t.slice();if(t instanceof Date)return new Date(t.getTime());if(t instanceof ArrayBuffer)return t.slice(0,t.byteLength);if(t instanceof Map){const e=new Map;for(const[i,n]of t)e.set(i,q(n));return e}if(t instanceof Set){const e=new Set;for(const i of t)e.add(q(i));return e}return null}function vT(t,e){return t===e||typeof t=="number"&&isNaN(t)&&typeof e=="number"&&isNaN(e)||typeof(t==null?void 0:t.getTime)=="function"&&typeof(e==null?void 0:e.getTime)=="function"&&t.getTime()===e.getTime()||!1}function NL(t,e){return t===e||(t==null||typeof t=="string"?t===e:typeof t=="number"?t===e||typeof e=="number"&&isNaN(t)&&isNaN(e):t instanceof Date?e instanceof Date&&t.getTime()===e.getTime():Array.isArray(t)?Array.isArray(e)&&vg(t,e):t instanceof Set?e instanceof Set&&i7(t,e):t instanceof Map?e instanceof Map&&n7(t,e):!!EM(t)&&EM(e)&&t7(t,e))}function t7(t,e){if(t===null||e===null)return!1;const i=Object.keys(t);if(e===null||Object.keys(e).length!==i.length)return!1;for(const n of i)if(t[n]!==e[n]||!Object.prototype.hasOwnProperty.call(e,n))return!1;return!0}function i7(t,e){if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}function n7(t,e){if(t.size!==e.size)return!1;for(const[i,n]of t){const r=e.get(i);if(r!==n||r===void 0&&!e.has(i))return!1}return!0}function c(t,e,i,n){var r,s=arguments.length,o=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,i):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,i,o):r(e,i))||o);return s>3&&o&&Object.defineProperty(e,i,o),o}function Vbe(t,e,i,n){function r(s){return s instanceof i?s:new i(function(o){o(s)})}return new(i||(i=Promise))(function(s,o){function a(p){try{u(n.next(p))}catch(f){o(f)}}function l(p){try{u(n.throw(p))}catch(f){o(f)}}function u(p){p.done?s(p.value):r(p.value).then(a,l)}u((n=n.apply(t,e||[])).next())})}const kM=new Set;function r7(t,e,i=!1){i&&kM.has(e)||(i&&kM.add(e),t.warn(`ðŸ›‘ DEPRECATED - ${e}`))}function DL(t,e,i={}){if(z("esri-deprecation-warnings")){const{moduleName:n}=i;ep(t,`Function: ${(n?n+"::":"")+e+"()"}`,i)}}function Ov(t,e,i={}){if(z("esri-deprecation-warnings")){const{moduleName:n}=i;ep(t,`Property: ${(n?n+"::":"")+e}`,i)}}function ep(t,e,i={}){if(z("esri-deprecation-warnings")){const{replacement:n,version:r,see:s,warnOnce:o}=i;let a=e;n&&(a+=`
	ðŸ› ï¸ Replacement: ${n}`),r&&(a+=`
	âš™ï¸ Version: ${r}`),s&&(a+=`
	ðŸ”— See ${s} for more details.`),r7(t,a,o)}}function Bbe(t){const e=[];return function*(){yield*e;for(const i of t)e.push(i),yield i}}function s7(t,e){for(const i of t)if(i!=null&&e(i))return i}function Av(t){return t!=null&&typeof t[Symbol.iterator]=="function"}let v1=class PS{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach(i=>{e+=i.length}),e}add(e,i){if(Av(e)){const n=this._getOrCreateGroup(i);for(const r of e)this._isHandle(r)&&n.push(r)}else this._isHandle(e)&&this._getOrCreateGroup(i).push(e);return this}forEach(e,i){if(typeof e=="function")this._groups.forEach(n=>n.forEach(e));else{const n=this._getGroup(e);n&&i&&n.forEach(i)}}has(e){return this._groups.has(this._ensureGroupKey(e))}remove(e){if(typeof e!="string"&&Av(e)){for(const i of e)this.remove(i);return this}return this.has(e)?(this._removeAllFromGroup(this._getGroup(e)),this._groups.delete(this._ensureGroupKey(e)),this):this}removeAll(){return this._groups.forEach(e=>this._removeAllFromGroup(e)),this._groups.clear(),this}_isHandle(e){return e&&(!!e.remove||e instanceof PS)}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const i=[];return this._groups.set(this._ensureGroupKey(e),i),i}_getGroup(e){return this._groups.get(this._ensureGroupKey(e))}_ensureGroupKey(e){return e||"_default_"}_removeAllFromGroup(e){for(const i of e)i instanceof PS?i.removeAll():i.remove()}};function o7(t,e,i=!1){return zL(t,e,i)}function bg(t,e){if(e!=null)return e[t]||FL(t.split("."),!1,e)}function wd(t,e,i){const n=t.split("."),r=n.pop(),s=FL(n,!0,i);s&&r&&(s[r]=e)}function FL(t,e,i){let n=i;for(const r of t){if(n==null)return;if(!(r in n)){if(!e)return;n[r]={}}n=n[r]}return n}function zL(t,e,i){return e?Object.keys(e).reduce((n,r)=>{let s=n[r],o=e[r];return s===o?n:s===void 0?(n[r]=q(o),n):(Array.isArray(o)||Array.isArray(n)?(s=s?Array.isArray(s)?n[r]=s.concat():n[r]=[s]:n[r]=[],o&&(Array.isArray(o)||(o=[o]),i?o.forEach(a=>{s.includes(a)||s.push(a)}):n[r]=o.concat())):o&&typeof o=="object"?n[r]=zL(s,o,i):n.hasOwnProperty(r)&&!e.hasOwnProperty(r)||(n[r]=o),n)},t||{}):t}var hL;const Ae={apiKey:void 0,applicationName:"",applicationUrl:(hL=globalThis.location)==null?void 0:hL.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!0,portalUrl:"https://www.arcgis.com",routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(o7(Ae,globalThis.esriConfig,!0),delete Ae.has),!Ae.assetsPath){{const t="4.28";Ae.assetsPath=`https://js.arcgis.com/${t}/@arcgis/core/assets`}Ae.defaultAssetsPath=Ae.assetsPath}const a7=/\{([^\}]+)\}/g;function MM(t){return t??""}function bT(t,e){return e?t.replaceAll(a7,typeof e=="object"?(i,n)=>MM(bg(n,e)):(i,n)=>MM(e(n))):t}function l7(t,e){return t.replaceAll(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,i=>e&&e.includes(i)?i:`\\${i}`)}function jL(t){let e=0;for(let i=0;i<t.length;i++)e=(e<<5)-e+t.charCodeAt(i),e|=0;return e}function qbe(t){return new DOMParser().parseFromString(t||"","text/html").body.innerText||""}function Wbe(t,e){return new RegExp(`{${e}}`,"ig").test(t)}const CM={info:0,warn:1,error:2,none:3};let J=class Oi{constructor(e){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},e.level!=null&&(this.level=e.level),e.writer!=null&&(this.writer=e.writer),this._module=e.module,Oi._loggers.set(this.module,this);const i=this.module.lastIndexOf(".");i!==-1&&(this._parent=Oi.getLogger(this.module.slice(0,i)))}get module(){return this._module}get parent(){return this._parent}error(...e){this._log("error","always",...e)}warn(...e){this._log("warn","always",...e)}info(...e){this._log("info","always",...e)}errorOnce(...e){this._log("error","once",...e)}warnOnce(...e){this._log("warn","once",...e)}infoOnce(...e){this._log("info","once",...e)}errorOncePerTick(...e){this._log("error","oncePerTick",...e)}warnOncePerTick(...e){this._log("warn","oncePerTick",...e)}infoOncePerTick(...e){this._log("info","oncePerTick",...e)}get test(){const e=this;return{loggedMessages:e._loggedMessages,clearLoggedWarnings:()=>e._loggedMessages.warn.clear()}}static get test(){return{resetLoggers(e=new Map){const i=Oi._loggers;return Oi._loggers=e,i},set throttlingDisabled(e){Oi._throttlingDisabled=e}}}static getLogger(e){return e=typeof e!="string"?e.declaredClass:e,Oi._loggers.get(e)||new Oi({module:e})}_log(e,i,...n){if(this._matchLevel(e)){if(i!=="always"&&!Oi._throttlingDisabled){const r=this._argsToKey(n),s=this._loggedMessages[e].get(r);if(i==="once"&&s!=null||i==="oncePerTick"&&s&&s>=Oi._tickCounter)return;this._loggedMessages[e].set(r,Oi._tickCounter),Oi._scheduleTickCounterIncrement()}for(const r of Ae.log.interceptors)if(r(e,this.module,...n))return;this._inheritedWriter()(e,this.module,...n)}}_parentWithMember(e,i){let n=this;for(;n!=null;){const r=n[e];if(r!=null)return r;n=n.parent}return i}_inheritedWriter(){return this._parentWithMember("writer",this._consoleWriter)}_consoleWriter(e,i,...n){console[e](`[${i}]`,...n)}_matchLevel(e){const i=Ae.log.level||"warn";return CM[this._parentWithMember("level",i)]<=CM[e]}_argsToKey(...e){return jL(JSON.stringify(e,(n,r)=>typeof r!="object"||Array.isArray(r)?r:"[Object]"))}static _scheduleTickCounterIncrement(){Oi._tickCounterScheduled||(Oi._tickCounterScheduled=!0,Promise.resolve().then(()=>{Oi._tickCounter++,Oi._tickCounterScheduled=!1}))}};J._loggers=new Map,J._tickCounter=0,J._tickCounterScheduled=!1,J._throttlingDisabled=!1;function GL(t,e){if(t==null)throw new Error(e??"value is None")}function Oe(t){return t==null||t.destroy(),null}function Zbe(t){return t==null||t.dispose(),null}function Je(t){return t==null||t.remove(),null}function _s(t){return t==null||t.abort(),null}function Kbe(t){return t==null||t.release(),null}function c7(t,e,i){return t!=null&&e!=null?i!=null?i(t,e):t.equals(e):t===e}function u7(t,e){let i;return t.some((n,r)=>(i=e(n,r),i!=null)),i??void 0}const UL=Symbol("Accessor-beforeDestroy"),d7={remove:()=>{}};function Ye(t){return t?{remove(){t&&(t(),t=void 0)}}:d7}function h7(t){t.forEach(e=>e==null?void 0:e.remove())}function $c(t){return Ye(()=>h7(t))}function Jbe(t){return Ye(()=>{var e;return(e=t())==null?void 0:e.remove()})}function HL(t){return Ye(t!=null?()=>t.destroy():void 0)}function lc(t){return t.__accessor__??null}function p7(t,e){var i;return((i=t==null?void 0:t.metadatas)==null?void 0:i[e])!=null}function C0(t,e,i){return i?Lv(t,e,{policy:i,path:""}):Lv(t,e,null)}function Lv(t,e,i){return e?Object.keys(e).reduce((n,r)=>{const s=r;let o=null,a="merge";if(i&&(o=i.path?`${i.path}.${r}`:r,a=i.policy(o)),a==="replace"||a==="replace-arrays"&&Array.isArray(n[s]))return n[s]=e[s],n;if(n[s]===void 0)return n[s]=q(e[s]),n;let l=n[s],u=e[s];if(l===u)return n;if(Array.isArray(u)||Array.isArray(n))l=l?Array.isArray(l)?n[s]=l.concat():n[s]=[l]:n[s]=[],u&&(Array.isArray(u)||(u=[u]),u.forEach(p=>{l.includes(p)||l.push(p)}));else if(u&&typeof u=="object")if(i){const p=i.path;i.path=o,n[s]=Lv(l,u,i),i.path=p}else n[s]=Lv(l,u,null);else n.hasOwnProperty(r)&&!e.hasOwnProperty(r)||(n[s]=u);return n},t||{}):t}function VL(t){return Array.isArray(t)?t:t.split(".")}function IM(t){return t.includes(",")?t.split(",").map(e=>e.trim()):[t.trim()]}function f7(t){if(Array.isArray(t)){const e=[];for(const i of t)e.push(...IM(i));return e}return IM(t)}function BL(t,e,i,n){const r=f7(e);if(r.length!==1){const s=r.map(o=>n(t,o,i));return $c(s)}return n(t,r[0],i)}function qL(t,e){const i=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const r=parseInt(i,10);if(!isNaN(r))return Array.isArray(e)?e[r]:e.at(r)}const n=lc(e);return p7(n,i)?n.get(i):e[i]}function WL(t,e,i){if(t==null)return t;const n=qL(e[i],t);return!n&&i<e.length-1?void 0:i===e.length-1?n:WL(n,e,i+1)}function wg(t,e,i=0){return typeof e!="string"||e.includes(".")?WL(t,VL(e),i):qL(e,t)}function Tn(t,e){return wg(t,e)}function OM(t,e){return wg(e,t)!==void 0}function _g(t){let e=t.constructor.__accessorMetadata__;const i=Object.prototype.hasOwnProperty.call(t.constructor,"__accessorMetadata__");if(e){if(!i){e=Object.create(e);for(const n in e)e[n]=q(e[n]);Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0})}}else e={},Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0});return t.constructor.__accessorMetadata__}function b1(t,e){const i=_g(t);let n=i[e];return n||(n=i[e]={}),n}function m7(t,e){return C0(t,e,y7)}const g7=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function y7(t){return g7.test(t)?"replace":"merge"}function v7(t){return(t==null?void 0:t.release)&&typeof t.release=="function"}function b7(t){return(t==null?void 0:t.acquire)&&typeof t.acquire=="function"}let _d=class RS{constructor(e,i,n,r=1,s=0){if(this._ctor=e,this._acquireFunction=i,this._releaseFunction=n,this.allocationSize=r,this._pool=new Array(s),this._initialSize=s,this._ctor)for(let o=0;o<s;o++)this._pool[o]=new this._ctor;this.allocationSize=Math.max(r,1)}destroy(){this.prune(0)}acquire(...e){let i;if(RS.test.disabled)i=new this._ctor;else{if(this._pool.length===0){const n=this.allocationSize;for(let r=0;r<n;r++)this._pool[r]=new this._ctor}i=this._pool.pop()}return this._acquireFunction?this._acquireFunction(i,...e):b7(i)&&i.acquire(...e),i}release(e){e&&!RS.test.disabled&&(this._releaseFunction?this._releaseFunction(e):v7(e)&&e.release(),this._pool.push(e))}prune(e=this._initialSize){if(!(e>=this._pool.length)){for(let i=e;i<this._pool.length;++i){const n=this._pool[i];this._dispose(n)}this._pool.length=e}}_dispose(e){e.dispose&&typeof e.dispose=="function"&&e.dispose()}};_d.test={disabled:!1};var Oa;(function(t){t[t.INITIALIZING=0]="INITIALIZING",t[t.CONSTRUCTING=1]="CONSTRUCTING",t[t.CONSTRUCTED=2]="CONSTRUCTED"})(Oa||(Oa={}));let w7=class{constructor(e,i){this._observers=e,this._observer=i}remove(){KG(this._observers,this._observer)}},ZL=class{constructor(){this._observers=null,this.destroyed=!1}observe(e){if(this.destroyed||e.destroyed)return _7;this._observers==null&&(this._observers=[]);const i=this._observers;let n=!1,r=!1;const s=i.length;for(let o=0;o<s;++o){const a=i[o];if(a.destroyed)r=!0;else if(a===e){n=!0;break}}return n||(i.push(e),r&&this._removeDestroyedObservers()),new w7(i,e)}_removeDestroyedObservers(){const e=this._observers;if(!e||e.length===0)return;const i=e.length;let n=0;for(let r=0;r<i;++r){for(;r+n<i&&e[r+n].destroyed;)++n;if(n>0){if(!(r+n<i))break;e[r]=e[r+n]}}e.length=i-n}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this._observers;if(e!=null){for(const i of e)i.onCommitted();this._observers=null}}};const _7=Ye();var Le;(function(t){t[t.DEFAULTS=0]="DEFAULTS",t[t.COMPUTED=1]="COMPUTED",t[t.SERVICE=2]="SERVICE",t[t.PORTAL_ITEM=3]="PORTAL_ITEM",t[t.WEB_SCENE=4]="WEB_SCENE",t[t.WEB_MAP=5]="WEB_MAP",t[t.LINK_CHART=6]="LINK_CHART",t[t.USER=7]="USER"})(Le||(Le={}));const Qbe=Le.USER+1;function KL(t){switch(t){case"defaults":return Le.DEFAULTS;case"service":return Le.SERVICE;case"portal-item":return Le.PORTAL_ITEM;case"web-scene":return Le.WEB_SCENE;case"web-map":return Le.WEB_MAP;case"link-chart":return Le.LINK_CHART;case"user":return Le.USER;default:return null}}function NS(t){switch(t){case Le.DEFAULTS:return"defaults";case Le.SERVICE:return"service";case Le.PORTAL_ITEM:return"portal-item";case Le.WEB_SCENE:return"web-scene";case Le.WEB_MAP:return"web-map";case Le.LINK_CHART:return"link-chart";case Le.USER:return"user"}}function S7(t){return NS(t)}var Ue;(function(t){t[t.Dirty=1]="Dirty",t[t.Overriden=2]="Overriden",t[t.Computing=4]="Computing",t[t.NonNullable=8]="NonNullable",t[t.HasDefaultValue=16]="HasDefaultValue",t[t.DepTrackingInitialized=32]="DepTrackingInitialized",t[t.AutoTracked=64]="AutoTracked",t[t.ExplicitlyTracking=128]="ExplicitlyTracking"})(Ue||(Ue={}));const Pv={onObservableAccessed:()=>{},onTrackingEnd:()=>{}},Sf=[];let gm=Pv;function ue(t){gm.onObservableAccessed(t)}let I0=!1,O0=!1;function za(t,e,i){if(I0)return wT(t,e,i);JL(t);const n=e.call(i);return YL(),n}function $7(t,e){return za(Pv,t,e)}function wT(t,e,i){const n=I0;I0=!0,JL(t);let r=null;try{r=e.call(i)}catch(s){O0&&J.getLogger("esri.core.accessorSupport.tracking").error(s)}return YL(),I0=n,r}function JL(t){gm=t,Sf.push(t)}function YL(){const t=Sf.length;if(t>1){const e=Sf.pop();gm=Sf[t-2],e.onTrackingEnd()}else if(t===1){const e=Sf.pop();gm=Pv,e.onTrackingEnd()}else gm=Pv}function XL(t,e){if(e.flags&Ue.DepTrackingInitialized)return;const i=O0;O0=!1,e.flags&Ue.AutoTracked?wT(e,e.metadata.get,t):QL(t,e),O0=i}const x7=[];function QL(t,e){e.flags&Ue.ExplicitlyTracking||(e.flags|=Ue.ExplicitlyTracking,wT(e,()=>{const i=e.metadata.dependsOn||x7;for(const n of i)if(typeof n!="string"||n.includes(".")){const r=VL(n);for(let s=0,o=t;s<r.length&&o!=null&&typeof o=="object";++s)o=AM(o,r[s],s!==r.length-1)}else AM(t,n,!1)}),e.flags&=~Ue.ExplicitlyTracking)}function AM(t,e,i){const n=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const s=parseInt(n,10);if(!isNaN(s))return Array.isArray(t)?t[s]:t.at(s)}const r=lc(t);if(r){const s=r.propertiesByName.get(n);s&&(ue(s),XL(t,s))}return i?t[n]:void 0}let LM=class extends ZL{constructor(e,i){super(),this.propertyName=e,this.metadata=i,this._accessed=null,this._handles=null,this.flags=0,this.flags=Ue.Dirty|(i.nonNullable?Ue.NonNullable:0)|(i.hasOwnProperty("value")?Ue.HasDefaultValue:0)|(i.get===void 0?Ue.DepTrackingInitialized:0)|(i.dependsOn===void 0?Ue.AutoTracked:0)}destroy(){this.flags&Ue.Dirty&&this.onCommitted(),super.destroy(),this._accessed=null,this._clearObservationHandles()}getComputed(e){ue(this);const i=e.store,n=this.propertyName,r=this.flags,s=i.get(n);if(r&Ue.Computing||~r&Ue.Dirty&&i.has(n))return s;this.flags|=Ue.Computing;const o=e.host;let a;r&Ue.AutoTracked?a=za(this,this.metadata.get,o):(QL(o,this),a=this.metadata.get.call(o)),i.set(n,a,Le.COMPUTED);const l=i.get(n);return l===s?this.flags&=~Ue.Dirty:$7(this.commit,this),this.flags&=~Ue.Computing,l}onObservableAccessed(e){if(e===this)return;let i=this._accessed;if(i==null)i=[],this._accessed=i;else if(i.includes(e))return;i.push(e)}onTrackingEnd(){this._clearObservationHandles(),this.flags|=Ue.DepTrackingInitialized;const e=this._accessed;if(e==null||e.length===0)return;let i=this._handles;i==null&&(i=[],this._handles=i);for(let n=0;n<e.length;++n)i.push(e[n].observe(this));e.length=0}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=~Ue.Dirty,this.onCommitted()}_clearObservationHandles(){const e=this._handles;if(e!==null){for(let i=0;i<e.length;++i)e[i].remove();e.length=0}}onInvalidated(){~this.flags&Ue.Overriden&&(this.flags|=Ue.Dirty);const e=this._observers;if(e&&e.length>0)for(const i of e)i.onInvalidated()}onCommitted(){const e=this._observers;if(e&&e.length>0){const i=e.slice();for(const n of i)n.onCommitted()}}},T7=class eP{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const i=new eP;return this._values.forEach((n,r)=>{e&&e.has(r)||i.set(r,q(n))}),i}get(e){return this._values.get(e)}originOf(){return Le.USER}keys(){return[...this._values.keys()]}set(e,i){this._values.set(e,i)}delete(e){this._values.delete(e)}has(e){return this._values.has(e)}forEach(e){this._values.forEach(e)}};function gy(t,e,i){return t!==void 0}function PM(t,e,i,n){return t!==void 0&&(!(i==null&&t.flags&Ue.NonNullable)||(n.lifecycle,Oa.INITIALIZING,!1))}function E7(t){return t&&typeof t.destroy=="function"}J.getLogger("esri.core.accessorSupport.Properties");let k7=class{constructor(e){this.host=e,this.propertiesByName=new Map,this.ctorArgs=null,this.destroyed=!1,this.lifecycle=Oa.INITIALIZING,this.store=new T7,this._origin=Le.USER;const i=this.host.constructor.__accessorMetadata__;for(const n in i){const r=new LM(n,i[n]);this.propertiesByName.set(n,r)}this.metadatas=i}initialize(){this.lifecycle=Oa.CONSTRUCTING}constructed(){this.lifecycle=Oa.CONSTRUCTED}destroy(){this.destroyed=!0;for(const[e,i]of this.propertiesByName){if(i.metadata.autoDestroy){const n=this.internalGet(e);n&&E7(n)&&(n.destroy(),~i.flags&Ue.NonNullable&&this._internalSet(i,null))}i.destroy()}}get initialized(){return this.lifecycle!==Oa.INITIALIZING}get(e){const i=this.propertiesByName.get(e);if(i.metadata.get)return i.getComputed(this);ue(i);const n=this.store;return n.has(e)?n.get(e):i.metadata.value}originOf(e){const i=this.store.originOf(e);if(i===void 0){const n=this.propertiesByName.get(e);if(n!==void 0&&n.flags&Ue.HasDefaultValue)return"defaults"}return NS(i)}has(e){return!!this.propertiesByName.has(e)&&this.store.has(e)}keys(){return[...this.propertiesByName.keys()]}internalGet(e){const i=this.propertiesByName.get(e);if(gy(i))return this.store.has(e)?this.store.get(e):i.metadata.value}internalSet(e,i){const n=this.propertiesByName.get(e);gy(n)&&this._internalSet(n,i)}getDependsInfo(e,i,n){const r=this.propertiesByName.get(i);if(!gy(r))return"";const s=new Set,o=za({onObservableAccessed:l=>s.add(l),onTrackingEnd:()=>{}},()=>{var l;return(l=r.metadata.get)==null?void 0:l.call(e)});let a=`${n}${e.declaredClass.split(".").pop()}.${i}: ${o}
`;if(s.size===0)return a;n+="  ";for(const l of s)l instanceof LM&&(a+=`${n}${l.propertyName}: undefined
`);return a}setAtOrigin(e,i,n){const r=this.propertiesByName.get(e);if(gy(r))return this._setAtOrigin(r,i,n)}isOverridden(e){const i=this.propertiesByName.get(e);return i!==void 0&&!!(i.flags&Ue.Overriden)}clearOverride(e){const i=this.propertiesByName.get(e);i&&i.flags&Ue.Overriden&&(i.flags&=~Ue.Overriden,i.notifyChange())}override(e,i){const n=this.propertiesByName.get(e);if(!PM(n,e,i,this))return;const r=n.metadata.cast;if(r){const s=this._cast(r,i),{valid:o,value:a}=s;if(Zw.release(s),!o)return;i=a}n.flags|=Ue.Overriden,this._internalSet(n,i)}set(e,i){const n=this.propertiesByName.get(e);if(!PM(n,e,i,this))return;const r=n.metadata.cast;if(r){const o=this._cast(r,i),{valid:a,value:l}=o;if(Zw.release(o),!a)return;i=l}const s=n.metadata.set;s?s.call(this.host,i):this._internalSet(n,i)}setDefaultOrigin(e){this._origin=KL(e)}getDefaultOrigin(){return NS(this._origin)}notifyChange(e){const i=this.propertiesByName.get(e);i!==void 0&&i.notifyChange()}invalidate(e){const i=this.propertiesByName.get(e);i!==void 0&&i.invalidate()}commit(e){const i=this.propertiesByName.get(e);i!==void 0&&i.commit()}_internalSet(e,i){const n=this.lifecycle!==Oa.INITIALIZING?this._origin:Le.DEFAULTS;this._setAtOrigin(e,i,n)}_setAtOrigin(e,i,n){const r=this.store,s=e.propertyName;r.has(s,n)&&vT(i,r.get(s))&&~e.flags&Ue.Overriden&&n===r.originOf(s)||(e.invalidate(),r.set(s,i,n),e.commit(),XL(this.host,e))}_cast(e,i){const n=Zw.acquire();return n.valid=!0,n.value=i,e&&(n.value=e.call(this.host,i,n)),n}},M7=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const Zw=new _d(M7);function C7(t,e){return t.replaceAll(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,(i,n)=>n===""?"$":(bg(n,e)??"").toString())}let tP=class{constructor(e,i,n){this.name=e,this.details=n,this.message=(i&&C7(i,n))??""}toString(){return"["+this.name+"]: "+this.message}},F=class iP extends tP{constructor(e,i,n){super(e,i,n)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(e,i)=>{if(i&&typeof i=="object"&&typeof i.toJSON=="function")return i;try{return q(i)}catch{return"[object]"}}))}}catch(e){throw J.getLogger("esri.core.Error").error(e),e}return{name:this.name,message:this.message,details:this.details}}static fromJSON(e){return new iP(e.name,e.message,e.details)}};F.prototype.type="error";function Rv(t,e,i){if(t&&e)if(typeof e=="object")for(const n of Object.getOwnPropertyNames(e))Rv(t,n,e[n]);else{if(e.includes(".")){const r=e.split("."),s=r.splice(-1,1)[0];return void Rv(Tn(t,r),s,i)}const n=t.__accessor__;n!=null&&I7(e,n),t[e]=i}}function I7(t,e){if(z("esri-unknown-property-errors")&&!O7(t,e))throw new F("set:unknown-property",A7(t,e))}function O7(t,e){return e.metadatas[t]!=null}function A7(t,e){return"setting unknown property '"+t+"' on instance of "+e.host.declaredClass}let L7;function P7(){return L7}var RM;(function(t){t[t.Ignore=0]="Ignore",t[t.Destroy=1]="Destroy",t[t.ThrowError=2]="ThrowError"})(RM||(RM={}));function R7(t){t.length=0}let Xi=class{constructor(e=50,i=50){this._pool=new _d(Array,void 0,R7,i,e)}acquire(){return this._pool.acquire()}release(e){this._pool.release(e)}prune(){this._pool.prune(0)}static acquire(){return Kw.acquire()}static release(e){return Kw.release(e)}static prune(){Kw.prune()}};const Kw=new Xi(100);let nP=class extends _d{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...e){const i=super.acquire(...e);return this._set.delete(i),i}release(e){e&&!this._set.has(e)&&(super.release(e),this._set.add(e))}_dispose(e){this._set.delete(e),super._dispose(e)}};const yy=[];function tp(t){yy.push(t),yy.length===1&&queueMicrotask(()=>{const e=yy.slice();yy.length=0;for(const i of e)i()})}let ym=class{constructor(e,i=30){this.name=e,this._counter=0,this._samples=new Array(i)}record(e){e!=null&&(this._samples[++this._counter%this._samples.length]=e)}get median(){return this._samples.slice().sort((e,i)=>e-i)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((e,i)=>e+i,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};var DS;(function(t){const e=(s,o,a,l)=>{let u=o,p=o;const f=a>>>1,m=s[u-1];for(;p<=f;){p=u<<1,p<a&&l(s[p-1],s[p])<0&&++p;const g=s[p-1];if(l(g,m)<=0)break;s[u-1]=g,u=p}s[u-1]=m},i=(s,o)=>s<o?-1:s>o?1:0;function n(s,o,a,l){o===void 0&&(o=0),a===void 0&&(a=s.length),l===void 0&&(l=i);for(let p=a>>>1;p>o;p--)e(s,p,a,l);const u=o+1;for(let p=a-1;p>o;p--){const f=s[o];s[o]=s[p],s[p]=f,e(s,u,p,l)}}function*r(s,o,a,l){o===void 0&&(o=0),a===void 0&&(a=s.length),l===void 0&&(l=i);for(let p=a>>>1;p>o;p--)e(s,p,a,l),yield;const u=o+1;for(let p=a-1;p>o;p--){const f=s[o];s[o]=s[p],s[p]=f,e(s,u,p,l),yield}}t.sort=n,t.iterableSort=r})(DS||(DS={}));const NM=DS,N7=1.5,D7=1.1;let vm=class{constructor(e){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new _L,e&&(e.initialSize&&(this.data=new Array(e.initialSize)),e.allocator&&(this._allocator=e.allocator),e.deallocator!==void 0&&(this._deallocator=e.deallocator),e.shrink&&(this._shrink=()=>DM(this)))}toArray(){return this.data.slice(0,this.length)}filter(e){const i=new Array;for(let n=0;n<this._length;n++){const r=this.data[n];e(r)&&i.push(r)}return i}at(e){if((e=Math.trunc(e)||0)<0&&(e+=this._length),!(e<0||e>=this._length))return this.data[e]}includes(e,i){const n=this.data.indexOf(e,i);return n!==-1&&n<this.length}get length(){return this._length}set length(e){if(e>this._length){if(this._allocator){for(;this._length<e;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=e}else{if(this._deallocator)for(let i=e;i<this._length;++i)this.data[i]=this._deallocator(this.data[i]);this._length=e,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(e){this.data[this._length++]=e}pushArray(e,i=e.length){for(let n=0;n<i;n++)this.data[this._length++]=e[n]}fill(e,i){for(let n=0;n<i;n++)this.data[this._length++]=e}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const e=this.data[this._length];return++this._length,e}unshift(e){this.data.unshift(e),this._length++,DM(this)}pop(){if(this.length===0)return;const e=this.data[this.length-1];return this.length=this.length-1,this._shrink(),e}remove(e){const i=AS(this.data,e,this.length,this._hint);if(i!==-1)return this.data.splice(i,1),this.length=this.length-1,e}removeUnordered(e){return this.removeUnorderedIndex(AS(this.data,e,this.length,this._hint))}removeUnorderedIndex(e){if(!(e>=this.length||e<0))return this.swapElements(e,this.length-1),this.pop()}removeUnorderedMany(e,i=e.length,n){this.length=ZG(this.data,e,this.length,i,this._hint,n),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(e,i){if(e>=this.length||i>=this.length||e===i)return;const n=this.data[e];this.data[e]=this.data[i],this.data[i]=n}sort(e){NM.sort(this.data,0,this.length,e)}iterableSort(e){return NM.iterableSort(this.data,0,this.length,e)}some(e,i){for(let n=0;n<this.length;++n)if(e.call(i,this.data[n],n,this.data))return!0;return!1}find(e,i){for(let n=0;n<this.length;++n){const r=this.data[n];if(e.call(i,r,n))return r}}filterInPlace(e,i){let n=0;for(let r=0;r<this._length;++r){const s=this.data[r];e.call(i,s,r,this.data)&&(this.data[r]=this.data[n],this.data[n]=s,n++)}if(this._deallocator)for(let r=n;r<this._length;r++)this.data[r]=this._deallocator(this.data[r]);return this._length=n,this._shrink(),this}forAll(e,i){const n=this.length,r=this.data;for(let s=0;s<n;++s)e.call(i,r[s],s,r)}forEach(e,i){for(let n=0;n<this.length;++n)e.call(i,this.data[n],n,this.data)}map(e,i){const n=new Array(this.length);for(let r=0;r<this.length;++r)n[r]=e.call(i,this.data[r],r,this.data);return n}reduce(e,i){let n=i;for(let r=0;r<this.length;++r)n=e(n,this.data[r],r,this.data);return n}has(e){const i=this.length,n=this.data;for(let r=0;r<i;++r)if(n[r]===e)return!0;return!1}};function DM(t){t.data.length>N7*t.length&&(t.data.length=Math.floor(t.length*D7))}function F7(t){return{setTimeout:(e,i)=>{const n=t.setTimeout(e,i);return Ye(()=>t.clearTimeout(n))}}}const kp=F7(globalThis);function w1(t){return t&&(typeof t.on=="function"||typeof t.addEventListener=="function")}function Sg(t,e,i){if(!w1(t))throw new TypeError("target is not a Evented or EventTarget object");if("on"in t)return t.on(e,i);if(Array.isArray(e)){const n=e.slice();for(const r of n)t.addEventListener(r,i);return Ye(()=>{for(const r of n)t.removeEventListener(r,i)})}return t.addEventListener(e,i),Ye(()=>t.removeEventListener(e,i))}function rP(t,e,i){if(!w1(t))throw new TypeError("target is not a Evented or EventTarget object");if("once"in t)return t.once(e,i);const n=Sg(t,e,r=>{n.remove(),i.call(t,r)});return n}const z7={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};function A0({key:t}){return z7[t]||t}function Xe(t="Aborted"){return new F("AbortError",t)}function Qe(t,e="Aborted"){if(er(t))throw Xe(e)}function _1(t){return t!=null?"aborted"in t?t:t.signal:t}function er(t){const e=_1(t);return e!=null&&e.aborted}function sP(t){if(en(t))throw t}function FM(t){if(!en(t))throw t}function Mr(t,e){const i=_1(t);if(i!=null){if(!i.aborted)return rP(i,"abort",()=>e());e()}}function _T(t,e){const i=_1(t);if(i!=null)return Qe(i),rP(i,"abort",()=>e(Xe()))}function S1(t,e){return _1(e)==null?t:new Promise((i,n)=>{let r=Mr(e,()=>n(Xe()));const s=()=>{r=Je(r)};t.then(s,s),t.then(i,n)})}function en(t){return(t==null?void 0:t.name)==="AbortError"}async function cc(t){try{return await t}catch(e){if(!en(e))throw e;return}}async function Yl(t){if(!t)return;if(typeof t.forEach!="function"){const i=Object.keys(t),n=i.map(o=>t[o]),r=await Yl(n),s={};return i.map((o,a)=>s[o]=r[a]),s}const e=t;return Promise.allSettled(e).then(i=>Array.from(e,(n,r)=>{const s=i[r];return s.status==="fulfilled"?{promise:n,value:s.value}:{promise:n,error:s.reason}}))}async function j7(t){return(await Yl(t)).filter(e=>!!e.value).map(e=>e.value)}async function G7(t){return(await Promise.allSettled(t)).filter(e=>e.status==="fulfilled").map(e=>e.value)}async function l1e(t){return(await Promise.allSettled(t)).filter(e=>e.status==="rejected").map(e=>e.reason)}function ST(t,e=void 0,i){const n=new AbortController;return Mr(i,()=>n.abort()),new Promise((r,s)=>{let o=setTimeout(()=>{o=0,r(e)},t);Mr(n,()=>{o&&(clearTimeout(o),s(Xe()))})})}function Za(t){return t&&typeof t.then=="function"}function FS(t){return Za(t)?t:Promise.resolve(t)}function oP(t,e=-1){let i,n,r,s,o=null;const a=(...l)=>{if(i){n=l,s&&s.reject(Xe()),s=Or();const m=s.promise;if(o){const g=o;o=null,g.abort()}return m}if(r=s||Or(),s=null,e>0){const m=new AbortController;i=FS(t(...l,m.signal));const g=i;ST(e).then(()=>{i===g&&(s?m.abort():o=m)})}else i=1,i=FS(t(...l));const u=()=>{const m=n;n=r=i=o=null,m!=null&&a(...m)},p=i,f=r;return p.then(u,u),p.then(f.resolve,f.reject),f.promise};return a}function Or(){let t,e;const i=new Promise((r,s)=>{t=r,e=s}),n=r=>{t(r)};return n.resolve=r=>t(r),n.reject=r=>e(r),n.timeout=(r,s)=>kp.setTimeout(()=>n.reject(s),r),n.promise=i,n}async function zM(t){await Promise.resolve(),Qe(t)}function c1e(t){return t}function u1e(t){return 1e3*t}function d1e(t){return t}function h1e(t){return .001*t}let U7=class{constructor(e){this.phases=e,this.paused=!1,this.ticks=-1,this.removed=!1}},H7=class{constructor(e){this.callback=e,this.isActive=!0}remove(){this.isActive=!1}},zS=0;const Kp={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},jS=["prepare","preRender","render","postRender","update","finish"],GS=[],nd=new vm;let V7=class{constructor(e){this._task=e}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}};const Nv={frameTasks:nd,willDispatch:!1,clearFrameTasks:B7,dispatch:cP,executeFrameTasks:q7};function $g(t){const e=new H7(t);return GS.push(e),Nv.willDispatch||(Nv.willDispatch=!0,tp(cP)),e}function ip(t){const e=new U7(t);return nd.push(e),Dv==null&&(zS=performance.now(),Dv=requestAnimationFrame(aP)),new V7(e)}let Dv=null;function B7(t=!1){nd.forAll(e=>{e.removed=!0}),t&&lP()}function aP(){const t=performance.now();Dv=null,Dv=nd.length>0?requestAnimationFrame(aP):null,Nv.executeFrameTasks(t)}function q7(t){const e=t-zS;zS=t;const i=1e3/60,n=Math.max(0,e-i);Kp.time=t,Kp.frameDuration=i-n;for(let r=0;r<jS.length;r++){const s=performance.now(),o=jS[r];nd.forAll(a=>{var l;a.paused||a.removed||(r===0&&a.ticks++,a.phases[o]&&(Kp.elapsedFrameTime=performance.now()-t,Kp.deltaTime=a.ticks===0?0:e,(l=a.phases[o])==null||l.call(a,Kp)))}),W7[r].record(performance.now()-s)}lP(),Z7.record(performance.now()-t)}const vy=new vm;function lP(){nd.forAll(t=>{t.removed&&vy.push(t)}),nd.removeUnorderedMany(vy.data,vy.length),vy.clear()}function cP(){for(;GS.length;){const t=GS.shift();t.isActive&&t.callback()}Nv.willDispatch=!1}function g1e(t=1,e){const i=Or(),n=()=>{er(e)?i.reject(Xe()):t===0?i():(--t,tp(()=>n()))};return n(),i.promise}const W7=jS.map(t=>new ym(t)),Z7=new ym("total");function K7(t,e){for(const i of t.entries())if(e(i[0]))return!0;return!1}function jM(t,e){if(!e)return t;for(const i of e)t.add(i);return t}function J7(t,e){const i=new Set;return jM(i,t),jM(i,e),i}function Y7(t,e){const i=new Set;for(const n of e)t.has(n)&&i.add(n);return i}function y1e(t,e){if(!t||!e)return!1;if(t===e)return!0;for(const i of t)if(!e.has(i))return!1;return!0}function v1e(t,e){if(t==null&&e==null)return!0;if(t==null||e==null||t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}function b1e(t,e){const i=new Set(t);for(const n of e)i.delete(n);return i}let X7=0;function Fh(){return++X7}let $1=class{constructor(e){this._accessed=[],this._handles=[],this._observerObject=new Q7(e),GM.register(this,new WeakRef(this._observerObject),this)}destroy(){var e;GM.unregister(this._observerObject),this._accessed.length=0,(e=this._observerObject)==null||e.destroy(),this.clear()}onObservableAccessed(e){const i=this._accessed;i.includes(e)||i.push(e)}onTrackingEnd(){const e=this._handles,i=this._accessed,n=this._observerObject;for(let r=0;r<i.length;++r)e.push(i[r].observe(n));i.length=0}clear(){const e=this._handles;for(let i=0;i<e.length;++i)e[i].remove();e.length=0}},Q7=class{constructor(e){this._notify=e,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const e=this._invalidCount;if(e===1)return this._invalidCount=0,void this._notify();this._invalidCount=e>0?e-1:0}destroy(){this.destroyed=!0,this._notify=eU}};const GM=new FinalizationRegistry(t=>{var e;(e=t.deref())==null||e.destroy()});function eU(){}let zh=!1;const Fv=[];function uP(t,e){let i=new $1(s),n=null,r=!1;function s(){if(!i||r)return;if(zh)return void hP(s);const a=n;i.clear(),zh=!0,r=!0,n=za(i,t),r=!1,zh=!1,e(n,a),pP()}function o(){i&&(i.destroy(),i=null,n=null)}return r=!0,n=za(i,t),r=!1,Ye(o)}function dP(t,e){let i=new $1(r),n=null;function r(){e(n,o)}function s(){i&&(i.destroy(),i=null),n=null}function o(){return i?(i.clear(),n=za(i,t),n):null}return o(),Ye(s)}function tU(t){let e=new $1(n),i=!1;function n(){e&&!i&&(zh?hP(n):(e.clear(),zh=!0,i=!0,za(e,t),i=!1,zh=!1,pP()))}function r(){e&&(e.destroy(),e=null)}return i=!0,za(e,t),i=!1,Ye(r)}function hP(t){Fv.includes(t)||Fv.unshift(t)}function pP(){for(;Fv.length;)Fv.pop()()}var bm;(function(t){t[t.Untracked=0]="Untracked",t[t.Tracked=1]="Tracked"})(bm||(bm={}));let Gm=class{constructor(){this.uid=Fh(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(e,i,n,r,s){return this.pool.acquire(bm.Untracked,e,i,n,r,s,vT)}static acquireTracked(e,i,n,r){return this.pool.acquire(bm.Tracked,e,i,n,null,null,r)}notify(e,i){this.type===bm.Untracked?this.callback.call(this.target,e,i,this.path,this.target):this.callback.call(null,e,i,void 0,void 0)}acquire(e,i,n,r,s,o,a){this.uid=Fh(),this.removed=!1,this.type=e,this.oldValue=i,this.callback=n,this.getValue=r,this.target=s,this.path=o,this.equals=a}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=Fh(),this.removed=!0}};Gm.pool=new nP(Gm);const L0=new Xi,La=new Set;let zv;function jv(t){La.delete(t),La.add(t),zv||(zv=$g(rU))}function iU(t){if(t.removed)return;const e=t.oldValue,i=t.getValue();t.equals(e,i)||(t.oldValue=i,t.notify(i,e))}function nU(t){for(const e of La.values())e.target===t&&(e.removed=!0)}function rU(){let t=10;for(;zv&&t--;){zv=null;const e=sU(),i=L0.acquire();for(const n of e){const r=n.uid;iU(n),r===n.uid&&n.removed&&i.push(n)}for(const n of La)n.removed&&(i.push(n),La.delete(n));for(const n of i)Gm.pool.release(n);L0.release(i),L0.release(e),US.forEach(n=>n())}}function sU(){const t=L0.acquire();t.length=La.size;let e=0;for(const i of La)t[e]=i,++e;return La.clear(),t}const US=new Set;function oU(t){return US.add(t),Ye(()=>US.delete(t))}function aU(t,e,i){let n=BL(t,e,i,(r,s,o)=>{let a,l,u=dP(()=>wg(r,s),(p,f)=>{r.__accessor__.destroyed||a&&a.uid!==l?n.remove():(a||(a=Gm.acquireUntracked(p,o,f,r,s),l=a.uid),jv(a))});return Ye(()=>{u.remove(),a&&(a.uid!==l||a.removed||(a.removed=!0,jv(a)),a=null),n=u=null})});return n}function lU(t,e,i){const n=BL(t,e,i,(r,s,o)=>{let a=!1;return uP(()=>wg(r,s),(l,u)=>{r.__accessor__.destroyed?n.remove():a||(a=!0,vT(u,l)||o.call(r,l,u,s,r),a=!1)})});return n}function cU(t,e,i,n=!1){return!t.__accessor__||t.__accessor__.destroyed?Ye():n?lU(t,e,i):aU(t,e,i)}function uU(t,e,i){let n,r,s=dP(t,(o,a)=>{n&&n.uid!==r?s.remove():(n||(n=Gm.acquireTracked(o,e,a,i),r=n.uid),jv(n))});return Ye(()=>{s.remove(),n&&(n.uid!==r||n.removed||(n.removed=!0,jv(n)),n=null),s=null})}function dU(t,e,i){let n=!1;return uP(t,(r,s)=>{n||(n=!0,i(s,r)||e(r,s),n=!1)})}function hU(t,e,i=!1,n=NL){return i?dU(t,e,n):uU(t,e,n)}function UM(t){return K7(La,e=>e.oldValue===t)}function x1(t,e){for(const[i,n]of t)if(e(n,i))return!0;return!1}function $1e(t,e){for(const[i,n]of t)if(e(n,i))return n;return null}function pU(t,e,i){const n=t.get(e);if(n!==void 0)return n;const r=i();return t.set(e,r),r}const jh=J.getLogger("esri.core.accessorSupport.ensureTypes");function fU(t){return t==null?t:new Date(t)}function mU(t){return t==null?t:!!t}function gU(t){return t==null?t:t.toString()}function gs(t){return t==null?t:(t=parseFloat(t),isNaN(t)?0:t)}function $T(t){return t==null?t:Math.round(parseFloat(t))}function fP(t){return(t==null?void 0:t.constructor)&&t.constructor.__accessorMetadata__!==void 0}function Gv(t,e){return e!=null&&t&&!(e instanceof t)}function mP(t){return t&&"isCollection"in t}function HM(t){return t!=null&&t.Type?typeof t.Type=="function"?t.Type:t.Type.base:null}function yU(t,e){if(!(e!=null&&e.constructor)||!mP(e.constructor))return HS(t,e)?e:new t(e);const i=HM(t.prototype.itemType),n=HM(e.constructor.prototype.itemType);return i?n?i===n?e:i.prototype.isPrototypeOf(n.prototype)?new t(e):(HS(t,e),e):new t(e):e}function HS(t,e){return!!fP(e)&&(jh.error("Accessor#set","Assigning an instance of '"+(e.declaredClass||"unknown")+"' which is not a subclass of '"+E1(t)+"'"),!0)}function T1(t,e){return e==null?e:mP(t)?yU(t,e):Gv(t,e)?HS(t,e)?e:new t(e):e}function E1(t){var e;return((e=t==null?void 0:t.prototype)==null?void 0:e.declaredClass)||"unknown"}const vU=new WeakMap;function bU(t){switch(t){case Number:return gs;case Et:return $T;case Boolean:return mU;case String:return gU;case Date:return fU;default:return pU(vU,t,()=>T1.bind(null,t))}}function ti(t,e){const i=bU(t);return arguments.length===1?i:i(e)}function Um(t,e,i){return arguments.length===1?Um.bind(null,t):e&&(Array.isArray(e)?e.map(n=>t(n,i)):[t(e,i)])}function wU(t,e){return arguments.length===1?Um(i=>ti(t,i)):Um(i=>ti(t,i),e)}function gP(t,e,i){return e!==0&&Array.isArray(i)?i.map(n=>gP(t,e-1,n)):t(i)}function Uv(t,e,i){if(arguments.length===2)return s=>Uv(t,e,s);if(!i)return i;i=gP(t,e,i);let n=e,r=i;for(;n>0&&Array.isArray(r);)n--,r=r[0];if(r!==void 0)for(let s=0;s<n;s++)i=[i];return i}function _U(t,e,i){return arguments.length===2?Uv(n=>ti(t,n),e):Uv(n=>ti(t,n),e,i)}function yP(t){return!!Array.isArray(t)&&!t.some(e=>{const i=typeof e;return!(i==="string"||i==="number"||i==="function"&&t.length>1)})}function VS(t,e){if(arguments.length===2)return VS(t).call(null,e);const i=new Set,n=t.filter(a=>typeof a!="function"),r=t.filter(a=>typeof a=="function");for(const a of t)typeof a!="string"&&typeof a!="number"||i.add(a);let s=null,o=null;return(a,l)=>{if(a==null)return a;const u=typeof a,p=u==="string"||u==="number";return p&&(i.has(a)||r.some(f=>u==="string"&&f===String||u==="number"&&f===Number))||u==="object"&&r.some(f=>!Gv(a,f))?a:(p&&n.length?(s||(s=n.map(f=>typeof f=="string"?`'${f}'`:`${f}`).join(", ")),jh.error("Accessor#set",`'${a}' is not a valid value for this property, only the following values are valid: ${s}`)):typeof a=="object"&&r.length?(o||(o=r.map(f=>E1(f)).join(", ")),jh.error("Accessor#set",`'${a}' is not a valid value for this property, value must be one of ${o}`)):jh.error("Accessor#set",`'${a}' is not a valid value for this property`),l&&(l.valid=!1),null)}}function ja(t,e){if(arguments.length===2)return ja(t).call(null,e);const i={},n=[],r=[];for(const l in t.typeMap){const u=t.typeMap[l];i[l]=ti(u),n.push(E1(u)),r.push(l)}const s=()=>`'${n.join("', '")}'`,o=()=>`'${r.join("', '")}'`,a=typeof t.key=="string"?l=>l[t.key]:t.key;return l=>{if(t.base&&!Gv(t.base,l)||l==null)return l;const u=a(l)||t.defaultKeyValue,p=i[u];if(!p)return jh.error("Accessor#set",`Invalid property value, value needs to be one of ${s()}, or a plain object that can autocast (having .type = ${o()})`),null;if(!Gv(t.typeMap[u],l))return l;if(typeof t.key=="string"&&!fP(l)){const f={};for(const m in l)m!==t.key&&(f[m]=l[m]);return p(f)}return p(l)}}let Et=class{};const T1e={native:t=>({type:"native",value:t}),array:t=>({type:"array",value:t}),oneOf:t=>({type:"one-of",values:t})};function SU(t){if(!t||!("type"in t))return!1;switch(t.type){case"native":case"array":case"one-of":return!0}return!1}function vP(t){switch(t.type){case"native":return ti(t.value);case"array":return Um(vP(t.value));case"one-of":return $U(t);default:return null}}function $U(t){let e=null;return(i,n)=>qS(i,t)?i:(e==null&&(e=BS(t)),jh.error("Accessor#set",`Invalid property value, value needs to be of type ${e}`),n&&(n.valid=!1),null)}function BS(t){switch(t.type){case"native":switch(t.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case Et:return"integer";case Date:return"date";default:return E1(t.value)}case"array":return`array of ${BS(t.value)}`;case"one-of":{const e=t.values.map(i=>BS(i));return`one of ${e.slice(0,-1)} or ${e[e.length-1]}`}}return"unknown"}function qS(t,e){if(t==null)return!0;switch(e.type){case"native":switch(e.value){case Number:case Et:return typeof t=="number";case Boolean:return typeof t=="boolean";case String:return typeof t=="string"}return t instanceof e.value;case"array":return!!Array.isArray(t)&&!t.some(i=>!qS(i,e.value));case"one-of":return e.values.some(i=>qS(t,i))}}function d(t={}){return(e,i)=>{if(e===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${e.name}.${i}. Accessor does not support static properties.`);const n=Object.getOwnPropertyDescriptor(e,i),r=b1(e,i);n&&(n.get||n.set?(r.get=n.get||r.get,r.set=n.set||r.set):"value"in n&&("value"in t&&J.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${i}" on "${e.constructor.name}" already defined in the metadata`,t),r.value=t.value=n.value)),t.readOnly!=null&&(r.readOnly=t.readOnly);const s=t.aliasOf;if(s){const l=typeof s=="string"?s:s.source,u=typeof s=="string"?null:s.overridable===!0;let p;r.dependsOn=[l],r.get=function(){let f=Tn(this,l);if(typeof f=="function"){p||(p=l.split(".").slice(0,-1).join("."));const m=Tn(this,p);m&&(f=f.bind(m))}return f},r.readOnly||(r.set=u?function(f){this._override(i,f)}:function(f){Rv(this,l,f)})}const o=t.type,a=t.types;r.cast||(o?r.cast=xU(o):a&&(Array.isArray(a)?r.cast=Um(ja(a[0])):r.cast=ja(a))),m7(r,t),t.range&&(r.cast=TU(r.cast,t.range))}}function bP(t,e,i){const n=b1(t,i);n.json||(n.json={});let r=n.json;return e!==void 0&&(r.origins||(r.origins={}),r.origins[e]||(r.origins[e]={}),r=r.origins[e]),r}function xU(t){let e=0,i=t;if(SU(t))return vP(t);for(;Array.isArray(i)&&i.length===1&&typeof i[0]!="string"&&typeof i[0]!="number";)i=i[0],e++;const n=i;if(yP(n))return e===0?VS(n):Uv(VS(n),e);if(e===1)return wU(n);if(e>1)return _U(n,e);const r=t;return r.from?r.from:ti(r)}function TU(t,e){return i=>{let n=+t(i);return e.step!=null&&(n=Math.round(n/e.step)*e.step),e.min!=null&&(n=Math.max(e.min,n)),e.max!=null&&(n=Math.min(e.max,n)),n}}function EU(t){if(t.json&&t.json.origins){const e=t.json.origins,i={"web-document":["web-scene","web-map"]};for(const n in i)if(e[n]){const r=e[n];i[n].forEach(s=>{e[s]=r}),delete e[n]}}}let Ga=class extends tP{constructor(e,i,n){super(e,i,n)}};Ga.prototype.type="warning";function wP(t){var e;return!!t&&((e=t.prototype)==null?void 0:e.declaredClass)&&t.prototype.declaredClass.indexOf("esri.core.Collection")===0}const WS=J.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function VM(t,e,i){var n,r;t&&(!i&&!e.read||(n=e.read)!=null&&n.reader||((r=e.read)==null?void 0:r.enabled)===!1||CU(t)&&wd("read.reader",xT(t),e))}function xT(t){var i,n;const e=t.ndimArray??0;if(e>1)return MU(t);if(e===1)return BM(t);if("type"in t&&SP(t.type)){const r=(n=(i=t.type.prototype)==null?void 0:i.itemType)==null?void 0:n.Type,s=BM(typeof r=="function"?{type:r}:{types:r});return(o,a,l)=>{const u=s(o,a,l);return u&&new t.type(u)}}return TT(t)}function TT(t){return"type"in t?kU(t.type):IU(t.types)}function kU(t){return t.prototype.read?(e,i,n)=>{if(e==null)return e;const r=typeof e;if(r!=="object")return void WS.error(`Expected JSON value of type 'object' to deserialize type '${t.prototype.declaredClass}', but got '${r}'`);const s=new t;return s.read(e,n),s}:t.fromJSON}function _P(t,e,i,n){return n!==0&&Array.isArray(e)?e.map(r=>_P(t,r,i,n-1)):t(e,void 0,i)}function MU(t){const e=TT(t),i=_P.bind(null,e),n=t.ndimArray??0;return(r,s,o)=>{if(r==null)return r;r=i(r,o,n);let a=n,l=r;for(;a>0&&Array.isArray(l);)a--,l=l[0];if(l!==void 0)for(let u=0;u<a;u++)r=[r];return r}}function BM(t){const e=TT(t);return(i,n,r)=>{if(i==null)return i;if(Array.isArray(i)){const o=[];for(const a of i){const l=e(a,void 0,r);l!==void 0&&o.push(l)}return o}const s=e(i,void 0,r);return s!==void 0?[s]:void 0}}function SP(t){if(!wP(t))return!1;const e=t.prototype.itemType;return!(!e||!e.Type)&&(typeof e.Type=="function"?ET(e.Type):$P(e.Type))}function CU(t){return"types"in t?$P(t.types):ET(t.type)}function ET(t){return!Array.isArray(t)&&!!t&&t.prototype&&("read"in t.prototype||"fromJSON"in t||SP(t))}function $P(t){for(const e in t.typeMap)if(!ET(t.typeMap[e]))return!1;return!0}function IU(t){let e=null;const i=t.errorContext??"type",n=t.validate;return(r,s,o)=>{if(r==null)return r;const a=typeof r;if(a!=="object")return void WS.error(`Expected JSON value of type 'object' to deserialize, but got '${a}'`);e||(e=OU(t));const l=t.key;if(typeof l!="string")return;const u=r[l],p=u?e[u]:t.defaultKeyValue?t.typeMap[t.defaultKeyValue]:void 0;if(!p){const m=`Type '${u||"unknown"}' is not supported`;return o!=null&&o.messages&&r&&o.messages.push(new Ga(`${i}:unsupported`,m,{definition:r,context:o})),void WS.error(m)}const f=new p;return f.read(r,o),n?n(f):f}}function OU(t){var i,n;const e={};for(const r in t.typeMap){const s=t.typeMap[r],o=_g(s.prototype);if(typeof t.key=="function")continue;const a=o[t.key];if(!a)continue;(i=a.json)!=null&&i.type&&Array.isArray(a.json.type)&&a.json.type.length===1&&typeof a.json.type[0]=="string"&&(e[a.json.type[0]]=s);const l=(n=a.json)==null?void 0:n.write;if(!(l!=null&&l.writer)){e[r]=s;continue}const u=l.target,p=typeof u=="string"?u:t.key,f={};l.writer(r,f,p),f[p]&&(e[f[p]]=s)}return e}function AU(t){if(t.json||(t.json={}),WM(t.json),ZM(t.json),qM(t.json),t.json.origins)for(const e in t.json.origins)WM(t.json.origins[e]),ZM(t.json.origins[e]),qM(t.json.origins[e]);return!0}function qM(t){t.name&&(t.read&&typeof t.read=="object"?t.read.source===void 0&&(t.read.source=t.name):t.read={source:t.name},t.write&&typeof t.write=="object"?t.write.target===void 0&&(t.write.target=t.name):t.write={target:t.name})}function WM(t){typeof t.read=="boolean"?t.read={enabled:t.read}:typeof t.read=="function"?t.read={enabled:!0,reader:t.read}:t.read&&typeof t.read=="object"&&t.read.enabled===void 0&&(t.read.enabled=!0)}function ZM(t){typeof t.write=="boolean"?t.write={enabled:t.write}:typeof t.write=="function"?t.write={enabled:!0,writer:t.write}:t.write&&typeof t.write=="object"&&t.write.enabled===void 0&&(t.write.enabled=!0)}function KM(t,e){if(!e.write||e.write.writer||e.write.enabled===!1&&!e.write.overridePolicy)return;const i=(t==null?void 0:t.ndimArray)??0;t&&(i===1||"type"in t&&wP(t.type))?e.write.writer=RU:i>1?e.write.writer=NU(i):e.types?Array.isArray(e.types)?e.write.writer=PU(e.types[0]):e.write.writer=LU(e.types):e.write.writer=Hm}function LU(t){return(e,i,n,r)=>e?xP(e,t,r)?Hm(e,i,n,r):void 0:Hm(e,i,n,r)}function xP(t,e,i){for(const n in e.typeMap)if(t instanceof e.typeMap[n])return!0;if(i!=null&&i.messages){const n=e.errorContext??"type",r=`Values of type '${(typeof e.key!="function"?t[e.key]:t.declaredClass)??"Unknown"}' cannot be written`;i&&i.messages&&t&&i.messages.push(new F(`${n}:unsupported`,r,{definition:t,context:i})),J.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(r)}return!1}function PU(t){return(e,i,n,r)=>!e||!Array.isArray(e)?Hm(e,i,n,r):Hm(e.filter(s=>xP(s,t,r)),i,n,r)}function Hm(t,e,i,n){wd(i,Hv(t,n),e)}function Hv(t,e){return t&&typeof t.write=="function"?t.write({},e):t&&typeof t.toJSON=="function"?t.toJSON():typeof t=="number"?Vv(t):t}function Vv(t){return t===-1/0?-Number.MAX_VALUE:t===1/0?Number.MAX_VALUE:isNaN(t)?null:t}function RU(t,e,i,n){let r;t===null?r=null:t&&typeof t.map=="function"?(r=t.map(s=>Hv(s,n)),typeof r.toArray=="function"&&(r=r.toArray())):r=[Hv(t,n)],wd(i,r,e)}function TP(t,e,i){return i!==0&&Array.isArray(t)?t.map(n=>TP(n,e,i-1)):Hv(t,e)}function NU(t){return(e,i,n,r)=>{let s;if(e===null)s=null;else{s=TP(e,r,t);let o=t,a=s;for(;o>0&&Array.isArray(a);)o--,a=a[0];if(a!==void 0)for(let l=0;l<o;l++)s=[s]}wd(n,s,i)}}function DU(t,e){return kT(t,"any",e==null?void 0:e.origin)}function ZS(t,e){return kT(t,"read",e==null?void 0:e.origin)}function EP(t,e){return kT(t,"write",e==null?void 0:e.origin)}function kT(t,e,i){let n=t==null?void 0:t.json;if(n!=null&&n.origins&&i){let r;r=i==="link-chart"?n.origins[i]&&(e==="any"||e in n.origins[i])?n.origins[i]:n.origins["web-map"]:n.origins[i],r&&(e==="any"||e in r)&&(n=r)}return n}function FU(t){const e=zU(t);if(t.json.origins)for(const i in t.json.origins){const n=t.json.origins[i],r=n.types?jU(n):e;VM(r,n,!1),n.types&&!n.write&&t.json.write&&t.json.write.enabled&&(n.write={...t.json.write}),KM(r,n)}VM(e,t.json,!0),KM(e,t.json)}function zU(t){return t.json.types?KS(t.json):t.type?kP(t):KS(t)}function jU(t){return t.type?kP(t):KS(t)}function kP(t){if(!t.type)return;let e=0,i=t.type;for(;Array.isArray(i)&&!yP(i);)i=i[0],e++;return{type:i,ndimArray:e}}function KS(t){if(!t.types)return;let e=0,i=t.types;for(;Array.isArray(i);)i=i[0],e++;return{types:i,ndimArray:e}}function GU(t){AU(t)&&(EU(t),FU(t))}const Jw=new Set,Yw=new Set;function S(t){return e=>{t??(t="esri.core.Accessor"),e.prototype.declaredClass=t,HU(e);const i=[],n=[];let r=e.prototype;for(;r;)r.hasOwnProperty("initialize")&&!Jw.has(r.initialize)&&(Jw.add(r.initialize),i.push(r.initialize)),r.hasOwnProperty("destroy")&&!Yw.has(r.destroy)&&(Yw.add(r.destroy),n.push(r.destroy)),r=Object.getPrototypeOf(r);Jw.clear(),Yw.clear();const s=class extends e{constructor(...a){if(super(...a),this.constructor===s&&typeof this.postscript=="function"){if(i.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let l=i.length-1;l>=0;l--)i[l].call(this)}}),n.length){let l=!1;const u=this[UL];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!l){l=!0,u.call(this);for(let p=0;p<n.length;p++)n[p].call(this)}}})}this.postscript(...a)}}};s.__accessorMetadata__=_g(e.prototype),s.prototype.declaredClass=t;const o=(t||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(s,"name",{value:o,configurable:!0}),s}}function UU(t,e){return e.get==null?function(){const i=this.__accessor__,n=i.propertiesByName.get(t);if(n===void 0)return;ue(n);const r=i.store;return r.has(t)?r.get(t):n.metadata.value}:function(){const i=this.__accessor__,n=i.propertiesByName.get(t);if(n!==void 0)return n.getComputed(i)}}function HU(t){const e=t.prototype,i=_g(e),n={};for(const r of Object.getOwnPropertyNames(i)){const s=i[r];GU(s),n[r]={enumerable:!0,configurable:!0,get:UU(r,s),set(o){const a=this.__accessor__;if(a!==void 0){if(!Object.isFrozen(this)){if(a.initialized&&s.readOnly)throw new TypeError(`[accessor] cannot assign to read-only property '${r}' of ${this.declaredClass}`);if(a.lifecycle===Oa.CONSTRUCTED&&s.constructOnly)throw new TypeError(`[accessor] cannot assign to construct-only property '${r}' of ${this.declaredClass}`);a.set(r,o)}}else Object.defineProperty(this,r,{enumerable:!0,configurable:!0,writable:!0,value:o})}}}Object.defineProperties(t.prototype,n)}var MP,CP;function VU(t){var e;if(t==null)return{value:t};if(Array.isArray(t))return{type:[t[0]],value:null};switch(typeof t){case"object":return(e=t.constructor)!=null&&e.__accessorMetadata__||t instanceof Date?{type:t.constructor,value:t}:t;case"boolean":return{type:Boolean,value:t};case"string":return{type:String,value:t};case"number":return{type:Number,value:t};case"function":return{type:t,value:null};default:return}}const hl=Symbol("Accessor-Handles"),JS=Symbol("Accessor-Initialized");let X=class IP{static createSubclass(e={}){if(Array.isArray(e))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:i,declaredClass:n,constructor:r}=e;delete e.declaredClass,delete e.properties,delete e.constructor;const s=this;class o extends s{constructor(...l){super(...l),this.inherited=null,r&&r.apply(this,l)}}_g(o.prototype);for(const a in e){const l=e[a];o.prototype[a]=typeof l=="function"?function(...u){const p=this.inherited;let f;this.inherited=function(...m){if(s.prototype[a])return s.prototype[a].apply(this,m)};try{f=l.apply(this,u)}catch(m){throw this.inherited=p,m}return this.inherited=p,f}:e[a]}for(const a in i){const l=VU(i[a]);d(l)(o.prototype,a)}return S(n)(o)}constructor(...e){if(this[MP]=null,this[CP]=!1,this.constructor===IP)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const i=new k7(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:i}),e.length>0&&this.normalizeCtorArgs&&(i.ctorArgs=this.normalizeCtorArgs.apply(this,e))}postscript(e){const i=this.__accessor__,n=i.ctorArgs||e;i.initialize(),n&&(this.set(n),i.ctorArgs=null),i.constructed(),this.initialize(),this[JS]=!0}initialize(){}[UL](){this[hl]=Oe(this[hl])}destroy(){var e;this.destroyed||(nU(this),this.__accessor__.destroy(),(e=P7())==null||e.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[JS]}get destroyed(){return this.__accessor__&&this.__accessor__.destroyed||!1}commitProperty(e){Tn(this,e)}get(e){return DL(J.getLogger(this),"`Accessor.get` is deprecated in favor of using optional chaining",{version:"4.28",see:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining"}),Tn(this,e)}hasOwnProperty(e){return this.__accessor__?this.__accessor__.has(e):Object.prototype.hasOwnProperty.call(this,e)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(e,i){return Rv(this,e,i),this}watch(e,i,n){return cU(this,e,i,n)}addHandles(e,i){if(this.destroyed){const r=Array.isArray(e)?e:[e];for(const s of r)s.remove();return}let n=this[hl];n==null&&(n=this[hl]=new v1),n.add(e,i)}removeHandles(e){const i=this[hl];i!=null&&i.remove(e)}removeAllHandles(){const e=this[hl];e!=null&&e.removeAll()}hasHandles(e){const i=this[hl];return i!=null&&i.has(e)}_override(e,i){i===void 0?this.__accessor__.clearOverride(e):this.__accessor__.override(e,i)}_clearOverride(e){return this.__accessor__.clearOverride(e)}_overrideIfSome(e,i){i==null?this.__accessor__.clearOverride(e):this.__accessor__.override(e,i)}_isOverridden(e){return this.__accessor__.isOverridden(e)}notifyChange(e){this.__accessor__.notifyChange(e)}_get(e){return this.__accessor__.internalGet(e)}_set(e,i){return this.__accessor__.internalSet(e,i),this}};MP=hl,CP=JS;let BU=class OP{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const i=new OP;return this._values.forEach((n,r)=>{e&&e.has(r)||i.set(r,q(n.value),n.origin)}),i}get(e,i){i=this._normalizeOrigin(i);const n=this._values.get(e);return i==null||(n==null?void 0:n.origin)===i?n==null?void 0:n.value:void 0}originOf(e){var i;return((i=this._values.get(e))==null?void 0:i.origin)??Le.USER}keys(e){e=this._normalizeOrigin(e);const i=[...this._values.keys()];return e==null?i:i.filter(n=>{var r;return((r=this._values.get(n))==null?void 0:r.origin)===e})}set(e,i,n){if((n=this._normalizeOrigin(n))===Le.DEFAULTS){const r=this._values.get(e);if((r==null?void 0:r.origin)!=null&&r.origin>n)return}this._values.set(e,new qU(i,n))}delete(e,i){var n;(i=this._normalizeOrigin(i))!=null&&((n=this._values.get(e))==null?void 0:n.origin)!==i||this._values.delete(e)}has(e,i){var n;return(i=this._normalizeOrigin(i))!=null?((n=this._values.get(e))==null?void 0:n.origin)===i:this._values.has(e)}forEach(e){this._values.forEach(({value:i},n)=>e(i,n))}_normalizeOrigin(e){if(e!=null)return e===Le.DEFAULTS?e:Le.USER}},qU=class{constructor(e,i){this.value=e,this.origin=i}};function WU(t,e,i){e.keys().forEach(r=>{i.set(r,e.get(r),Le.DEFAULTS)});const n=t.metadatas;Object.keys(n).forEach(r=>{t.internalGet(r)&&i.set(r,t.internalGet(r),Le.DEFAULTS)})}function ZU(t,e,i){if(!(t!=null&&t.read)||t.read.enabled===!1||!t.read.source)return!1;const n=t.read.source;if(typeof n=="string"){if(n===e||n.includes(".")&&n.indexOf(e)===0&&OM(n,i))return!0}else for(const r of n)if(r===e||r.includes(".")&&r.indexOf(e)===0&&OM(r,i))return!0;return!1}function KU(t){return t&&(!t.read||t.read.enabled!==!1&&!t.read.source)}function JU(t,e,i,n,r){let s=ZS(e[i],r);KU(s)&&(t[i]=!0);for(const o of Object.getOwnPropertyNames(e))s=ZS(e[o],r),ZU(s,i,n)&&(t[o]=!0)}function YU(t,e,i,n){const r=i.metadatas,s=DU(r[e],n),o=s==null?void 0:s.default;if(o===void 0)return;const a=typeof o=="function"?o.call(t,e,n):o;a!==void 0&&i.set(e,a)}const AP={origin:"service"};function XU(t,e,i=AP){if(!e||typeof e!="object")return;const n=lc(t),r=n.metadatas,s={};for(const o of Object.getOwnPropertyNames(e))JU(s,r,o,e,i);n.setDefaultOrigin(i.origin);for(const o of Object.getOwnPropertyNames(s)){const a=ZS(r[o],i).read,l=a==null?void 0:a.source;let u;u=l&&typeof l=="string"?wg(e,l):e[o],a!=null&&a.reader&&(u=a.reader.call(t,u,e,i)),u!==void 0&&n.set(o,u)}if(!i||!i.ignoreDefaults){n.setDefaultOrigin("defaults");for(const o of Object.getOwnPropertyNames(r))s[o]||YU(t,o,n,i)}n.setDefaultOrigin("user")}function M1e(t,e,i,n=AP){var s;const r={...n,messages:[]};i(r),(s=r.messages)==null||s.forEach(o=>{o.type!=="warning"||t.loaded?n!=null&&n.messages&&n.messages.push(o):t.loadWarnings.push(o)})}function QU(t,e,i,n,r){var o,a;const s={};return(a=(o=e.write)==null?void 0:o.writer)==null||a.call(t,n,s,i,r),s}function LP(t,e,i,n,r,s){if(!(n!=null&&n.write))return!1;const o=Tn(t,i);if(!r&&n.write.overridePolicy){const a=n.write.overridePolicy.call(t,o,i,s??void 0);a!==void 0&&(r=a)}if(r||(r=n.write),!r||r.enabled===!1||r.layerContainerTypes&&(s!=null&&s.layerContainerType)&&!r.layerContainerTypes.includes(s.layerContainerType))return!1;if((o===null&&!r.allowNull&&!r.writerEnsuresNonNull||o===void 0)&&r.isRequired){const a=new F("web-document-write:property-required",`Missing value for required property '${i}' on '${t.declaredClass}'`,{propertyName:i,target:t});return a&&(s!=null&&s.messages)?s.messages.push(a):a&&!s&&J.getLogger("esri.core.accessorSupport.write").error(a.name,a.message),!1}return!(o===void 0||o===null&&!r.allowNull&&!r.writerEnsuresNonNull||!r.alwaysWriteDefaults&&(!e.store.multipleOriginsSupported||e.store.originOf(i)===Le.DEFAULTS)&&eH(t,i,s,n,o)||!r.ignoreOrigin&&(s!=null&&s.origin)&&e.store.multipleOriginsSupported&&e.store.originOf(i)<KL(s.origin))}function eH(t,e,i,n,r){const s=n.default;if(s===void 0)return!1;if(n.defaultEquals!=null)return n.defaultEquals(r);if(typeof s=="function"){if(Array.isArray(r)){const o=s.call(t,e,i??void 0);return vg(o,r)}return!1}return s===r}function C1e(t,e,i,n){const r=lc(t),s=r.metadatas,o=EP(s[e],n);return!!o&&LP(t,r,e,o,i,n)}function tH(t,e,i){var s,o;if(t&&typeof t.toJSON=="function"&&(!t.toJSON.isDefaultToJSON||!t.write))return C0(e,t.toJSON(i));const n=lc(t),r=n.metadatas;for(const a in r){const l=EP(r[a],i);if(!LP(t,n,a,l,void 0,i))continue;const u=Tn(t,a),p=QU(t,l,l.write&&typeof l.write.target=="string"?l.write.target:a,u,i);Object.keys(p).length>0&&(e=C0(e,p),(o=(s=i==null?void 0:i.resources)==null?void 0:s.pendingOperations)!=null&&o.length&&i.resources.pendingOperations.push(Promise.all(i.resources.pendingOperations).then(()=>C0(e,p,()=>"replace-arrays"))),i!=null&&i.writtenProperties&&i.writtenProperties.push({target:t,propName:a,oldOrigin:S7(n.store.originOf(a)),newOrigin:i.origin}))}return e}const xg=t=>{let e=class extends t{constructor(...i){super(...i);const n=lc(this),r=n.store,s=new BU;n.store=s,WU(n,r,s)}read(i,n){XU(this,i,n)}write(i,n){return tH(this,i??{},n)}toJSON(i){return this.write({},i)}static fromJSON(i,n){return iH.call(this,i,n)}};return e=c([S("esri.core.JSONSupport")],e),e.prototype.toJSON.isDefaultToJSON=!0,e};function iH(t,e){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const i=new this;return i.read(t,e),i}function YS(t){return t&&typeof t=="object"&&"toJSON"in t&&typeof t.toJSON=="function"}let ie=class extends xg(X){};ie=c([S("esri.core.JSONSupport")],ie);let Kt=class{constructor(e,i={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=e,this._options=i,this.apiValues=[],this.jsonValues=[],this._apiToJSON=this._invertMap(e),this.apiValues=this._getKeysSorted(this._apiToJSON),this.jsonValues=this._getKeysSorted(this._jsonToAPI),this.read=n=>this.fromJSON(n),this.write=(n,r,s)=>{const o=this.toJSON(n);o!==void 0&&wd(s,o,r)},this.write.isJSONMapWriter=!0}toJSON(e){if(e==null)return null;if(this._apiToJSON.hasOwnProperty(e)){const i=this._apiToJSON[e];return this._options.useNumericKeys?+i:i}return this._options.ignoreUnknown?void 0:e}fromJSON(e){return e!=null&&this._jsonToAPI.hasOwnProperty(e)?this._jsonToAPI[e]:this._options.ignoreUnknown?void 0:e}_invertMap(e){const i={};for(const n in e)i[e[n]]=n;return i}_getKeysSorted(e){const i=[];for(const n in e)i.push(n);return i.sort(),i}};function sn(){return function(t,e){return new Kt(t,{ignoreUnknown:!0,...e})}}let MT=class{constructor(e,i,n,r){this.semiMajorAxis=e,this.flattening=i,this.outerAtmosphereRimWidth=n;const s=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*s,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=r||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const lt=new MT(6378137,1/298.257223563,3e5,.006694379990137799),Pa=new MT(3396190,1/169.8944472236118,23e4),uc=new MT(1737400,0,0),nH="modulepreload",rH=function(t,e){return new URL(t,e).href},JM={},V=function(e,i,n){let r=Promise.resolve();if(i&&i.length>0){const s=document.getElementsByTagName("link");r=Promise.all(i.map(o=>{if(o=rH(o,n),o in JM)return;JM[o]=!0;const a=o.endsWith(".css"),l=a?'[rel="stylesheet"]':"";if(!!n)for(let f=s.length-1;f>=0;f--){const m=s[f];if(m.href===o&&(!a||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${l}`))return;const p=document.createElement("link");if(p.rel=a?"stylesheet":nH,a||(p.as="script",p.crossOrigin=""),p.href=o,document.head.appendChild(p),a)return new Promise((f,m)=>{p.addEventListener("load",f),p.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${o}`)))})}))}return r.then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})},sH=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,oH={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function YM(t){const e=t==null?void 0:t.match(sH);if(!e)return null;const[,i,n,r]=e;if(!i)return null;let s=null,o=null,a=null;const{devext:l,qaext:u,www:p}=oH;if(n)if(s=i,r)switch(r.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=l);break;case"qa":({customBaseUrl:o,portalHostname:a}=u);break;default:return null}else({customBaseUrl:o,portalHostname:a}=p);else switch(i.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=l);break;case"qaext":({customBaseUrl:o,portalHostname:a}=u);break;case"www":({customBaseUrl:o,portalHostname:a}=p);break;default:return null}return{customBaseUrl:o,isPortal:!1,portalHostname:a,urlKey:s}}function aH(t){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(t)}function lH(t){const e=atob(t),i=new Uint8Array(e.length);for(let n=0;n<e.length;n++)i[n]=e.charCodeAt(n);return i.buffer}function cH(t){const e=new Uint8Array(t);let i="";for(let n=0;n<e.length;n++)i+=String.fromCharCode(e[n]);return btoa(i)}const uH=J.getLogger("esri.core.urlUtils"),Mp=Ae.request,XM="esri/config: esriConfig.request.proxyUrl is not set.",PP=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,RP=/^\s*http:/i,dH=/^\s*https:/i,hH=/^\s*file:/i,pH=/:\d+$/,fH=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,mH=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),gH=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$");let Gh=class{constructor(e=""){this.uri=e,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let i=this.uri.match(mH);this.scheme=i[2]||(i[1]?"":null),this.authority=i[4]||(i[3]?"":null),this.path=i[5],this.query=i[7]||(i[6]?"":null),this.fragment=i[9]||(i[8]?"":null),this.authority!=null&&(i=this.authority.match(gH),this.user=i[3]||null,this.password=i[4]||null,this.host=i[6]||i[7],this.port=i[9]||null)}toString(){return this.uri}};const by={},yH=new Gh(Ae.applicationUrl);let Di=yH;const vH=bH();let CT=vH;const IT=()=>Di,P1e=()=>CT;function bH(){const t=Di.path,e=t.substring(0,t.lastIndexOf(t.split("/")[t.split("/").length-1]));return`${`${Di.scheme}://${Di.host}${Di.port!=null?`:${Di.port}`:""}`}${e}`}function Gi(t){if(!t)return null;const e={path:null,query:null},i=new Gh(t),n=t.indexOf("?");return i.query===null?e.path=t:(e.path=t.substring(0,n),e.query=OT(i.query)),i.fragment&&(e.hash=i.fragment,i.query===null&&(e.path=e.path.substring(0,e.path.length-(i.fragment.length+1)))),e}function OT(t){const e=t.split("&"),i={};for(const n of e){if(!n)continue;const r=n.indexOf("=");let s,o;r<0?(s=decodeURIComponent(n),o=""):(s=decodeURIComponent(n.slice(0,r)),o=decodeURIComponent(n.slice(r+1)));let a=i[s];typeof a=="string"&&(a=i[s]=[a]),Array.isArray(a)?a.push(o):i[s]=o}return i}function Vm(t,e){return t?e&&typeof e=="function"?Object.keys(t).map(i=>encodeURIComponent(i)+"="+encodeURIComponent(e(i,t[i]))).join("&"):Object.keys(t).map(i=>{const n=t[i];if(n==null)return"";const r=encodeURIComponent(i)+"=",s=e==null?void 0:e[i];return s?r+encodeURIComponent(s(n)):Array.isArray(n)?n.map(o=>YS(o)?r+encodeURIComponent(JSON.stringify(o)):r+encodeURIComponent(o)).join("&"):YS(n)?r+encodeURIComponent(JSON.stringify(n)):r+encodeURIComponent(n)}).filter(i=>i).join("&"):""}function wH(t=!1){let e,i=Mp.proxyUrl;if(typeof t=="string"){e=kH(t);const n=k1(t);n&&(i=n.proxyUrl)}else e=!!t;if(!i)throw uH.warn(XM),new F("urlutils:proxy-not-set",XM);return e&&XS()&&(i=DT(i)),Gi(i)}function R1e(t){const e=k1(t);let i,n;if(e){const r=AT(e.proxyUrl);i=r.path,n=r.query?OT(r.query):null}if(i){const r=Gi(t);t=i+"?"+r.path;const s=Vm({...n,...r.query});s&&(t=`${t}?${s}`)}return t}const Jp={path:"",query:""};function AT(t){const e=t.indexOf("?");return e!==-1?(Jp.path=t.slice(0,e),Jp.query=t.slice(e+1)):(Jp.path=t,Jp.query=null),Jp}function NP(t){return t=(t=qv(t=AH(t=AT(t).path),!0)).toLowerCase()}function _H(t){const e={proxyUrl:t.proxyUrl,urlPrefix:NP(t.urlPrefix)},i=Mp.proxyRules,n=e.urlPrefix;let r=i.length;for(let s=0;s<i.length;s++){const o=i[s].urlPrefix;if(n.indexOf(o)===0){if(n.length===o.length)return-1;r=s;break}o.indexOf(n)===0&&(r=s+1)}return i.splice(r,0,e),r}function k1(t){const e=Mp.proxyRules,i=NP(t);for(let n=0;n<e.length;n++)if(i.indexOf(e[n].urlPrefix)===0)return e[n]}function N1e(t,e){if(!t||!e)return!1;t=Bv(t),e=Bv(e);const i=YM(t),n=YM(e);return i!=null&&n!=null?i.portalHostname===n.portalHostname:i==null&&n==null&&np(t,e,!0)}function SH(t,e){return t=Bv(t),e=Bv(e),qv(t)===qv(e)}function Bv(t){const e=(t=Ra(t)).indexOf("/sharing");return e>0?t.substring(0,e):t.replace(/\/+$/,"")}function DP(t){const e=n=>n==null||n instanceof RegExp&&n.test(t)||typeof n=="string"&&t.startsWith(n),i=Mp.interceptors;if(i){for(const n of i)if(Array.isArray(n.urls)){if(n.urls.some(e))return n}else if(e(n.urls))return n}return null}function np(t,e,i=!1){if(!t||!e)return!1;const n=e$(t),r=e$(e);return!(!i&&n.scheme!==r.scheme)&&n.host!=null&&r.host!=null&&n.host.toLowerCase()===r.host.toLowerCase()&&n.port===r.port}function LT(t){if(typeof t=="string"){if(!Zn(t))return!0;t=e$(t)}if(np(t,Di))return!0;const e=Mp.trustedServers||[];for(let i=0;i<e.length;i++){const n=$H(e[i]);for(let r=0;r<n.length;r++)if(np(t,n[r]))return!0}return!1}function $H(t){return by[t]||(NT(t)||ko(t)?by[t]=[new Gh($r(t))]:by[t]=[new Gh(`http://${t}`),new Gh(`https://${t}`)]),by[t]}function $r(t,e=CT,i){return ko(t)?i&&i.preserveProtocolRelative?t:Di.scheme==="http"&&Di.authority===Ss(t).slice(2)?`http:${t}`:`https:${t}`:NT(t)?t:M1(t[0]==="/"?OH(e):e,t)}function PT(t,e=CT,i){if(t==null||!Zn(t))return t;const n=Ra(t),r=n.toLowerCase(),s=Ra(e).toLowerCase().replace(/\/+$/,""),o=i?Ra(i).toLowerCase().replace(/\/+$/,""):null;if(o&&s.indexOf(o)!==0)return t;const a=(f,m,g)=>(g=f.indexOf(m,g))===-1?f.length:g;let l=a(r,"/",r.indexOf("//")+2),u=-1;for(;r.slice(0,l+1)===s.slice(0,l)+"/"&&(u=l+1,l!==r.length);)l=a(r,"/",l+1);if(u===-1||o&&u<o.length)return t;t=n.slice(u);const p=s.slice(u-1).replaceAll(/[^/]+/g,"").length;if(p>0)for(let f=0;f<p;f++)t=`../${t}`;else t=`./${t}`;return t}function Ra(t){return t=RH(t=PH(t=LH(t=$r(t=t.trim()))))}function M1(...t){const e=t.filter(Qi);if(!(e!=null&&e.length))return;const i=[];if(Zn(e[0])){const r=e[0],s=r.indexOf("//");s!==-1&&(i.push(r.slice(0,s+1)),CH(e[0])&&(i[0]+="/"),e[0]=r.slice(s+2))}else e[0][0]==="/"&&i.push("");const n=e.reduce((r,s)=>s?r.concat(s.split("/")):r,[]);for(let r=0;r<n.length;r++){const s=n[r];s===".."&&i.length>0&&i[i.length-1]!==".."?i.pop():(!s&&r===n.length-1||s&&(s!=="."||i.length===0))&&i.push(s)}return i.join("/")}function Ss(t,e=!1){if(t==null||RT(t)||Sd(t))return null;let i=t.indexOf("://");if(i===-1&&ko(t))i=2;else{if(i===-1)return null;i+=3}const n=t.indexOf("/",i);return n!==-1&&(t=t.slice(0,n)),e&&(t=qv(t,!0)),t}function Zn(t){return ko(t)||NT(t)}function RT(t){return t!=null&&t.slice(0,5)==="blob:"}function Sd(t){return t!=null&&t.slice(0,5)==="data:"}function xH(t){const e=Bm(t);return e&&e.isBase64?lH(e.data):null}function D1e(t){return cH(t).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const TH=/^data:(.*?)(;base64)?,(.*)$/;function Bm(t){const e=t.match(TH);if(!e)return null;const[,i,n,r]=e;return{mediaType:i,isBase64:!!n,data:r}}function FP(t){return t.isBase64?`data:${t.mediaType};base64,${t.data}`:`data:${t.mediaType},${t.data}`}async function F1e(t){return(await fetch(t)).blob()}function z1e(t){const e=xH(t);if(!e)return null;const i=Bm(t);return new Blob([e],{type:i.mediaType})}function j1e(t,e){EH(t,e)}function EH(t,e){if(!t)return!1;const i=document.createElement("a");if(!("download"in i))return!1;const n=URL.createObjectURL(t);return i.download=e,i.href=n,i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(n),!0}function ko(t){return t!=null&&t[0]==="/"&&t[1]==="/"}function NT(t){return t!=null&&PP.test(t)}function kH(t){return t!=null&&dH.test(t)||Di.scheme==="https"&&ko(t)}function MH(t){return t!=null&&RP.test(t)||Di.scheme==="http"&&ko(t)}function CH(t){return t!=null&&hH.test(t)}function DT(t){return ko(t)?`https:${t}`:t.replace(RP,"https:")}function IH(){return Di.scheme==="http"}function XS(){return Di.scheme==="https"}function qv(t,e=!1){return ko(t)?t.slice(2):(t=t.replace(PP,""),e&&t.length>1&&t[0]==="/"&&t[1]==="/"&&(t=t.slice(2)),t)}function OH(t){const e=t.indexOf("//"),i=t.indexOf("/",e+2);return i===-1?t:t.slice(0,i)}function G1e(t){let e=0;if(Zn(t)){const n=t.indexOf("//");n!==-1&&(e=n+2)}const i=t.lastIndexOf("/");return i<e?t:t.slice(0,i+1)}function U1e(t,e){if(!t)return"";const i=Gi(t).path.replace(/\/+$/,""),n=i.substring(i.lastIndexOf("/")+1);if(!(e!=null&&e.length))return n;const r=new RegExp(`.(${e.join("|")})$`,"ig");return n.replace(r,"")}function AH(t){return t.endsWith("/")?t:`${t}/`}function zP(t){return t.replace(/\/+$/,"")}function LH(t){if(/^https?:\/\//i.test(t)){const e=AT(t);t=(t=e.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),e.query&&(t+=`?${e.query}`)}return t}function PH(t){return t.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function RH(t){const e=Mp.httpsDomains;if(!MH(t))return t;const i=t.indexOf("/",7);let n;if(n=i===-1?t:t.slice(0,i),n=n.toLowerCase().slice(7),pH.test(n)){if(!n.endsWith(":80"))return t;n=n.slice(0,-3),t=t.replace(":80","")}return IH()&&n===Di.authority&&!fH.test(t)||(XS()&&n===Di.authority||e&&e.some(r=>n===r||n.endsWith(`.${r}`))||XS()&&!k1(t))&&(t=DT(t)),t}function QS(t,e,i){if(!(e&&i&&t&&Zn(t)))return t;const n=t.indexOf("//"),r=t.indexOf("/",n+2),s=t.indexOf(":",n+2),o=Math.min(r<0?t.length:r,s<0?t.length:s);return t.slice(n+2,o).toLowerCase()!==e.toLowerCase()?t:`${t.slice(0,n+2)}${i}${t.slice(o)}`}function e$(t){return typeof t=="string"?new Gh($r(t)):(t.scheme||(t.scheme=Di.scheme),t)}function H1e(t){return NH.test(t)}function jP(t,e){const i=Gi(t),n=Object.keys(i.query||{});return n.length>0&&e&&e.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${n.join(", ")}.`),i.path}function GP(t,e,i){const n=Gi(t),r=n.query||{};return r[e]=String(i),`${n.path}?${Vm(r)}`}function Xw(t,e){if(!e)return t;const i=Gi(t),n=i.query||{};for(const[s,o]of Object.entries(e))o!=null&&(n[s]=o);const r=Vm(n);return r?`${i.path}?${r}`:i.path}function V1e(t){if(t==null)return null;const e=t.match(UP);return e?e[2]:null}function QM(t){if(t==null)return null;const e=t.match(UP);return e?{path:e[1],extension:e[2]}:{path:t,extension:null}}async function B1e(t){return typeof t=="string"?Bm(t)??{data:t}:new Promise((e,i)=>{const n=new FileReader;n.readAsDataURL(t),n.onload=()=>e(Bm(n.result)),n.onerror=r=>i(r)})}const UP=/([^.]*)\.([^\/]*)$/,NH=/(^data:image\/svg|\.svg$)/i,HP="20231115",VP="a6fcf2901ef678ef17a528e11b93ffe09e3ec267";Symbol.dispose??(Symbol.dispose=Symbol("Symbol.dispose")),Symbol.asyncDispose??(Symbol.asyncDispose=Symbol("Symbol.asyncDispose"));const DH="4.28";let at,FT=DH;FT="4.28.10";function q1e(t){at=t}function W1e(t){const e=at==null?void 0:at.findCredential(t);return e!=null&&e.token?GP(t,"token",e.token):t}z("host-webworker");const FH=new Set(["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"]);function BP(t){const e=Ss(t,!0);return!!e&&e.endsWith(".arcgis.com")&&!FH.has(e)&&!t.endsWith("/sharing/rest/generateToken")}function zH(t,e,i=!1,n){return new Promise((r,s)=>{if(er(n))return void s(eC());let o=()=>{u(),s(new Error(`Unable to load ${e}`))},a=()=>{const p=t;u(),r(p)},l=()=>{if(!t)return;const p=t;u(),p.src="",s(eC())};const u=()=>{z("esri-image-decode")||(t.removeEventListener("error",o),t.removeEventListener("load",a)),o=null,a=null,t=null,n!=null&&n.removeEventListener("abort",l),l=null,i&&URL.revokeObjectURL(e)};n!=null&&n.addEventListener("abort",l),z("esri-image-decode")?t.decode().then(a,o):(t.addEventListener("error",o),t.addEventListener("load",a))})}function eC(){try{return new DOMException("Aborted","AbortError")}catch{const t=new Error;return t.name="AbortError",t}}const jH="Timeout exceeded";function GH(){return new Error(jH)}function UH(t){Ae.request.crossOriginNoCorsDomains||(Ae.request.crossOriginNoCorsDomains={});const e=Ae.request.crossOriginNoCorsDomains;for(let i of t)i=i.toLowerCase(),/^https?:\/\//.test(i)?e[Ss(i)??""]=0:(e[Ss("http://"+i)??""]=0,e[Ss("https://"+i)??""]=0)}function HH(t){const e=Ae.request.crossOriginNoCorsDomains;if(e){let i=Ss(t);if(i)return i=i.toLowerCase(),!np(i,IT())&&e[i]<Date.now()-36e5}return!1}async function VH(t){var r;const e=Ae.request.crossOriginNoCorsDomains,i=Ss(t);e&&i&&(e[i.toLowerCase()]=Date.now());const n=Gi(t);t=n.path,((r=n.query)==null?void 0:r.f)==="json"&&(t+="?f=json");try{await fetch(t,{mode:"no-cors",credentials:"include"})}catch{}}async function $t(t,e){var u;t instanceof URL&&(t=t.toString()),(e==null?void 0:e.query)instanceof URLSearchParams&&(e.query=OT(e.query.toString().replaceAll("+"," ")));const i=Sd(t),n=RT(t);n||i||(t=Ra(t));const r={url:t,requestOptions:{...e}};let s=DP(t);if(s){const p=await XH(s,r);if(p!=null)return{data:p,getHeader:zT,httpStatus:200,requestOptions:r.requestOptions,url:r.url};s.after||s.error||(s=null)}if(t=r.url,(e=r.requestOptions).responseType==="image"&&(z("host-webworker")||z("host-node")))throw So("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),r);if(e.method==="head"){if(e.body)throw So("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),r);if(i||n)throw So("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),r)}if(await KH(),Wv)return Wv.execute(t,e);const o=new AbortController;Mr(e,()=>o.abort());const a={controller:o,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:s,params:r,redoRequest:!1,useIdentity:ps.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},l=await eV(a);return(u=s==null?void 0:s.after)==null||u.call(s,l),l}let Wv;const ps=Ae.request,qP="FormData"in globalThis,BH=new Set([499,498,403,401]),qH=new Set(["COM_0056","COM_0057","SB_0008"]),WH=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],zT=()=>null,Zv=Symbol();function ZH(t){const e=Ss(t);e&&!$t._corsServers.includes(e)&&$t._corsServers.push(e)}function tC(t){const e=Ss(t);return!e||e.endsWith(".arcgis.com")||$t._corsServers.includes(e)||LT(e)}function So(t,e,i,n){let r="Error";const s={url:i.url,requestOptions:i.requestOptions,getHeader:zT,ssl:!1};if(e instanceof F)return e.details?(e.details=q(e.details),e.details.url=i.url,e.details.requestOptions=i.requestOptions):e.details=s,e;if(e){const o=n&&(u=>n.headers.get(u)),a=n==null?void 0:n.status,l=e.message;l&&(r=l),o&&(s.getHeader=o),s.httpStatus=(e.httpCode!=null?e.httpCode:e.code)||a||0,s.subCode=e.subcode,s.messageCode=e.messageCode,typeof e.details=="string"?s.messages=[e.details]:s.messages=e.details,s.raw=Zv in e?e[Zv]:e}return en(e)?Xe():new F(t,r,s)}async function KH(){z("host-webworker")?Wv||(Wv=await V(()=>import("./request--58L3p9U.js"),__vite__mapDeps([]),import.meta.url)):$t._abortableFetch||($t._abortableFetch=globalThis.fetch.bind(globalThis))}async function t$(){at||await V(()=>import("./IdentityManager-21MTYTup.js"),__vite__mapDeps([]),import.meta.url)}async function JH(t){var a;const e=t.params.url,i=t.params.requestOptions,n=t.controller.signal,r=i.body;let s=null,o=null;if(qP&&"HTMLFormElement"in globalThis&&(r instanceof FormData?s=r:r instanceof HTMLFormElement&&(s=new FormData(r))),typeof r=="string"&&(o=r),t.fetchOptions={cache:i.cacheBust&&!("polyfill"in $t._abortableFetch)?"no-cache":"default",credentials:"same-origin",headers:i.headers||{},method:i.method==="head"?"HEAD":"GET",mode:"cors",priority:ps.priority,redirect:"follow",signal:n},(s||o)&&(t.fetchOptions.body=s||o),i.authMode==="anonymous"&&(t.useIdentity=!1),t.hasToken=!!(/token=/i.test(e)||(a=i.query)!=null&&a.token||s!=null&&s.get("token")),!t.hasToken&&Ae.apiKey&&BP(e)&&(i.query||(i.query={}),i.query.token=Ae.apiKey,t.hasToken=!0),t.useIdentity&&!t.hasToken&&!t.credentialToken&&!WP(e)&&!er(n)){let l;i.authMode==="immediate"?(await t$(),l=await at.getCredential(e,{signal:n}),t.credential=l):i.authMode==="no-prompt"?(await t$(),l=await at.getCredential(e,{prompt:!1,signal:n}).catch(()=>{}),t.credential=l):at&&(l=at.findCredential(e)),l&&(t.credentialToken=l.token,t.useSSL=!!l.ssl)}}function WP(t){return WH.some(e=>e.test(t))}async function YH(t){let e=t.params.url;const i=t.params.requestOptions,n=t.fetchOptions??{},r=RT(e)||Sd(e),s=i.responseType||"json",o=r?0:i.timeout!=null?i.timeout:ps.timeout;let a=!1;if(!r){t.useSSL&&(e=DT(e)),i.cacheBust&&n.cache==="default"&&(e=GP(e,"request.preventCache",Date.now()));let m={...i.query};t.credentialToken&&(m.token=t.credentialToken);let g=Vm(m);z("esri-url-encodes-apostrophe")&&(g=g.replaceAll("'","%27"));const y=e.length+1+g.length;let v;a=i.method==="delete"||i.method==="post"||i.method==="put"||!!i.body||y>ps.maxUrlLength;const b=i.useProxy||!!k1(e);if(b){const _=wH(e);v=_.path,!a&&v.length+1+y>ps.maxUrlLength&&(a=!0),_.query&&(m={..._.query,...m})}if(n.method==="HEAD"&&(a||b)){if(a)throw y>ps.maxUrlLength?So("request:invalid-parameters",new Error("URL exceeds maximum length"),t.params):So("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),t.params);if(b)throw So("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),t.params)}if(a?(n.method=i.method==="delete"?"DELETE":i.method==="put"?"PUT":"POST",i.body?e=Xw(e,m):(n.body=Vm(m),n.headers||(n.headers={}),n.headers["Content-Type"]="application/x-www-form-urlencoded")):e=Xw(e,m),b&&(t.useProxy=!0,e=`${v}?${e}`),m.token&&qP&&n.body instanceof FormData&&!aH(e)&&n.body.set("token",m.token),i.hasOwnProperty("withCredentials"))t.withCredentials=i.withCredentials;else if(!np(e,IT())){if(LT(e))t.withCredentials=!0;else if(at){const _=at.findServerInfo(e);_!=null&&_.webTierAuth&&(t.withCredentials=!0)}}t.withCredentials&&(n.credentials="include",HH(e)&&await VH(a?Xw(e,m):e))}let l,u,p=0,f=!1;o>0&&(p=setTimeout(()=>{f=!0,t.controller.abort()},o));try{if(i.responseType==="native-request-init")u=n,u.url=e;else if(i.responseType!=="image"||n.cache!=="default"||n.method!=="GET"||a||QH(i.headers)||!r&&!t.useProxy&&ps.proxyUrl&&!tC(e)){if(l=await $t._abortableFetch(e,n),t.useProxy||ZH(e),i.responseType==="native")u=l;else if(n.method!=="HEAD")if(l.ok){switch(s){case"array-buffer":u=await l.arrayBuffer();break;case"blob":case"image":u=await l.blob();break;default:u=await l.text()}if(p&&(clearTimeout(p),p=0),s==="json"||s==="xml"||s==="document")if(u)switch(s){case"json":u=JSON.parse(u);break;case"xml":u=iC(u,"application/xml");break;case"document":u=iC(u,"text/html")}else u=null;if(u){if(s==="array-buffer"||s==="blob"){const m=l.headers.get("Content-Type");if(m&&/application\/json|text\/plain/i.test(m)&&u[s==="blob"?"size":"byteLength"]<=750)try{const g=await new Response(u).json();g.error&&(u=g)}catch{}}s==="image"&&u instanceof Blob&&(u=await nC(URL.createObjectURL(u),t,!0))}}else{u=await l.text();try{u=JSON.parse(u)}catch{}}}else u=await nC(e,t)}catch(m){if(m.name==="AbortError")throw f?GH():Xe("Request canceled");if(!(!l&&m instanceof TypeError&&ps.proxyUrl)||i.body||i.method==="delete"||i.method==="head"||i.method==="post"||i.method==="put"||t.useProxy||tC(e))throw m;t.redoRequest=!0,_H({proxyUrl:ps.proxyUrl,urlPrefix:Ss(e)??""})}finally{p&&clearTimeout(p)}return[l,u]}async function XH(t,e){if(t.responseData!=null)return t.responseData;if(t.headers&&(e.requestOptions.headers={...e.requestOptions.headers,...t.headers}),t.query&&(e.requestOptions.query={...e.requestOptions.query,...t.query}),t.before){let i,n;try{n=await t.before(e)}catch(r){i=So("request:interceptor",r,e)}if((n instanceof Error||n instanceof F)&&(i=So("request:interceptor",n,e)),i)throw t.error&&t.error(i),i;return n}}function QH(t){if(t){for(const e of Object.getOwnPropertyNames(t))if(t[e])return!0}return!1}function iC(t,e){let i;try{i=new DOMParser().parseFromString(t,e)}catch{}if(!i||i.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return i}async function eV(t){var s,o;let e,i;await JH(t);try{do[e,i]=await YH(t);while(!await tV(t,e,i))}catch(a){const l=So("request:server",a,t.params,e);throw l.details.ssl=t.useSSL,(s=t.interceptor)!=null&&s.error&&t.interceptor.error(l),l}const n=t.params.url;if(i&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(n)){if(!t.hasToken&&!t.credentialToken&&((o=i.user)!=null&&o.username)&&!LT(n)){const a=Ss(n,!0);a&&ps.trustedServers.push(a)}Array.isArray(i.authorizedCrossOriginNoCorsDomains)&&UH(i.authorizedCrossOriginNoCorsDomains)}const r=t.credential;if(r&&at){const a=at.findServerInfo(r.server);let l=a==null?void 0:a.owningSystemUrl;if(l){l=l.replace(/\/?$/,"/sharing");const u=at.findCredential(l,r.userId);u&&at._getIdenticalSvcIdx(l,u)===-1&&u.resources.unshift(l)}}return{data:i,getHeader:e?a=>e==null?void 0:e.headers.get(a):zT,httpStatus:(e==null?void 0:e.status)??200,requestOptions:t.params.requestOptions,ssl:t.useSSL,url:t.params.url}}async function tV(t,e,i){var u;if(t.redoRequest)return t.redoRequest=!1,!1;const n=t.params.requestOptions;if(!e||n.responseType==="native"||n.responseType==="native-request-init")return!0;let r,s;if(i&&(i.error?r=i.error:i.status==="error"&&Array.isArray(i.messages)&&(r={...i},r[Zv]=i,r.details=i.messages)),!r&&!e.ok)throw r=new Error(`Unable to load ${e.url} status: ${e.status}`),r[Zv]=i,r;let o,a=null;r&&(s=Number(r.code),a=r.hasOwnProperty("subcode")?Number(r.subcode):null,o=r.messageCode,o=o==null?void 0:o.toUpperCase());const l=n.authMode;if(s===403&&(a===4||(u=r.message)!=null&&u.toLowerCase().includes("ssl")&&!r.message.toLowerCase().includes("permission"))){if(!t.useSSL)return t.useSSL=!0,!1}else if(!t.hasToken&&t.useIdentity&&(l!=="no-prompt"||s===498)&&s!==void 0&&BH.has(s)&&!WP(t.params.url)&&(s!==403||(!o||!qH.has(o))&&(a==null||a===2&&t.credentialToken))){await t$();try{const p=await at.getCredential(t.params.url,{error:So("request:server",r,t.params),prompt:l!=="no-prompt",signal:t.controller.signal,token:t.credentialToken});return t.credential=p,t.credentialToken=p.token,t.useSSL=t.useSSL||p.ssl,!1}catch(p){if(l==="no-prompt")return t.credential=void 0,t.credentialToken=void 0,!1;r=p}}if(r)throw r;return!0}function nC(t,e,i=!1){const n=e.controller.signal,r=new Image;return e.withCredentials?r.crossOrigin="use-credentials":r.crossOrigin="anonymous",r.alt="",r.fetchPriority=ps.priority,r.src=t,zH(r,t,i,n)}$t._abortableFetch=null,$t._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];const iV=J.getLogger("esri.assets");function Ge(t){if(!Ae.assetsPath)throw iV.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new F("assets:path-not-set","config.assetsPath is not set");return M1(Ae.assetsPath,t)}let Qw,O=null;function jT(){return!!O}function nV(){return!!z("esri-wasm")}function ZP(){return Qw||(Qw=V(()=>import("./pe-wasm-qoLSgWKc.js"),__vite__mapDeps([]),import.meta.url).then(t=>t.p).then(({default:t})=>t({locateFile:e=>Ge(`esri/geometry/support/${e}`)})).then(t=>{JP(t)}),Qw)}var i$,vt,n$;(function(t){function e(s,o,a){O.ensureCache.prepare();const l=Eu(a),u=a===l,p=O.ensureFloat64(l),f=O._pe_geog_to_proj(O.getPointer(s),o,p);return f&&Zl(a,o,p,u),f}function i(s,o,a,l){switch(l){case vt.PE_TRANSFORM_P_TO_G:return n(s,o,a);case vt.PE_TRANSFORM_G_TO_P:return e(s,o,a)}return 0}function n(s,o,a){return r(s,o,a,0)}function r(s,o,a,l){O.ensureCache.prepare();const u=Eu(a),p=a===u,f=O.ensureFloat64(u),m=O._pe_proj_to_geog_center(O.getPointer(s),o,f,l);return m&&Zl(a,o,f,p),m}t.geogToProj=e,t.projGeog=i,t.projToGeog=n,t.projToGeogCenter=r})(i$||(i$={})),function(t){function e(){t.PE_BUFFER_MAX=O.PeDefs.prototype.PE_BUFFER_MAX,t.PE_NAME_MAX=O.PeDefs.prototype.PE_NAME_MAX,t.PE_MGRS_MAX=O.PeDefs.prototype.PE_MGRS_MAX,t.PE_USNG_MAX=O.PeDefs.prototype.PE_USNG_MAX,t.PE_DD_MAX=O.PeDefs.prototype.PE_DD_MAX,t.PE_DDM_MAX=O.PeDefs.prototype.PE_DDM_MAX,t.PE_DMS_MAX=O.PeDefs.prototype.PE_DMS_MAX,t.PE_UTM_MAX=O.PeDefs.prototype.PE_UTM_MAX,t.PE_PARM_MAX=O.PeDefs.prototype.PE_PARM_MAX,t.PE_TYPE_NONE=O.PeDefs.prototype.PE_TYPE_NONE,t.PE_TYPE_GEOGCS=O.PeDefs.prototype.PE_TYPE_GEOGCS,t.PE_TYPE_PROJCS=O.PeDefs.prototype.PE_TYPE_PROJCS,t.PE_TYPE_GEOGTRAN=O.PeDefs.prototype.PE_TYPE_GEOGTRAN,t.PE_TYPE_COORDSYS=O.PeDefs.prototype.PE_TYPE_COORDSYS,t.PE_TYPE_UNIT=O.PeDefs.prototype.PE_TYPE_UNIT,t.PE_TYPE_LINUNIT=O.PeDefs.prototype.PE_TYPE_LINUNIT,t.PE_STR_OPTS_NONE=O.PeDefs.prototype.PE_STR_OPTS_NONE,t.PE_STR_AUTH_NONE=O.PeDefs.prototype.PE_STR_AUTH_NONE,t.PE_STR_AUTH_TOP=O.PeDefs.prototype.PE_STR_AUTH_TOP,t.PE_STR_NAME_CANON=O.PeDefs.prototype.PE_STR_NAME_CANON,t.PE_STR_FMT_WKT=O.PeDefs.prototype.PE_STR_FMT_WKT,t.PE_STR_FMT_WKT2=O.PeDefs.prototype.PE_STR_FMT_WKT2,t.PE_PARM_X0=O.PeDefs.prototype.PE_PARM_X0,t.PE_PARM_ND=O.PeDefs.prototype.PE_PARM_ND,t.PE_TRANSFORM_1_TO_2=O.PeDefs.prototype.PE_TRANSFORM_1_TO_2,t.PE_TRANSFORM_2_TO_1=O.PeDefs.prototype.PE_TRANSFORM_2_TO_1,t.PE_TRANSFORM_P_TO_G=O.PeDefs.prototype.PE_TRANSFORM_P_TO_G,t.PE_TRANSFORM_G_TO_P=O.PeDefs.prototype.PE_TRANSFORM_G_TO_P,t.PE_HORIZON_RECT=O.PeDefs.prototype.PE_HORIZON_RECT,t.PE_HORIZON_POLY=O.PeDefs.prototype.PE_HORIZON_POLY,t.PE_HORIZON_LINE=O.PeDefs.prototype.PE_HORIZON_LINE,t.PE_HORIZON_DELTA=O.PeDefs.prototype.PE_HORIZON_DELTA}t.init=e}(vt||(vt={})),function(t){const e={},i={},n=g=>{if(g){const y=g.getType();switch(y){case vt.PE_TYPE_GEOGCS:g=O.castObject(g,O.PeGeogcs);break;case vt.PE_TYPE_PROJCS:g=O.castObject(g,O.PeProjcs);break;case vt.PE_TYPE_GEOGTRAN:g=O.castObject(g,O.PeGeogtran);break;default:y&vt.PE_TYPE_UNIT&&(g=O.castObject(g,O.PeUnit))}}return g};function r(){O.PeFactory.prototype.initialize(null)}function s(g){return o(vt.PE_TYPE_COORDSYS,g)}function o(g,y){let v=null,b=e[g];if(b||(b={},e[g]=b),b.hasOwnProperty(String(y)))v=b[y];else{const _=O.PeFactory.prototype.factoryByType(g,y);O.compare(_,O.NULL)||(v=_,b[y]=v)}return v=n(v),v}function a(g,y){let v=null,b=i[g];if(b||(b={},i[g]=b),b.hasOwnProperty(y))v=b[y];else{const _=O.PeFactory.prototype.fromString(g,y);O.compare(_,O.NULL)||(v=_,b[y]=v)}return v=n(v),v}function l(g){return o(vt.PE_TYPE_GEOGCS,g)}function u(g){return o(vt.PE_TYPE_GEOGTRAN,g)}function p(g){return O.PeFactory.prototype.getCode(g)}function f(g){return o(vt.PE_TYPE_PROJCS,g)}function m(g){return o(vt.PE_TYPE_UNIT,g)}t.initialize=r,t.coordsys=s,t.factoryByType=o,t.fromString=a,t.geogcs=l,t.geogtran=u,t.getCode=p,t.projcs=f,t.unit=m}(n$||(n$={}));let KP=null;var Kv,r$,s$,o$,Jv,a$,Yv,Xv,l$;function JP(t){function e(s,o,a){s[o]=a(s[o])}O=t,vt.init(),Kv.init(),Jv.init(),Yv.init(),Xv.init(),KP=class extends O.PeGCSExtent{destroy(){O.destroy(this)}};const i=[O.PeDatum,O.PeGeogcs,O.PeGeogtran,O.PeObject,O.PeParameter,O.PePrimem,O.PeProjcs,O.PeSpheroid,O.PeUnit];for(const s of i)e(s.prototype,"getName",o=>function(){return o.call(this,new Array(vt.PE_NAME_MAX))});for(const s of[O.PeGeogtran,O.PeProjcs])e(s.prototype,"getParameters",o=>function(){const a=new Array(vt.PE_PARM_MAX);let l=o.call(this);for(let u=0;u<a.length;u++){const p=O.getValue(l,"*");a[u]=p?O.wrapPointer(p,O.PeParameter):null,l+=Int32Array.BYTES_PER_ELEMENT}return a});e(O.PeHorizon.prototype,"getCoord",s=>function(){const o=this.getSize();if(!o)return null;const a=[];return Zl(a,o,s.call(this)),a}),e(O.PeGTlistExtendedEntry.prototype,"getEntries",s=>{const o=O._pe_getPeGTlistExtendedGTsSize();return function(){let a=null;const l=s.call(this);if(!O.compare(l,O.NULL)){a=[l];const u=this.getSteps();if(u>1){const p=O.getPointer(l);for(let f=1;f<u;f++)a.push(O.wrapPointer(p+o*f,O.PeGTlistExtendedGTs))}}return a}});const n=O._pe_getPeHorizonSize(),r=s=>function(){let o=this._cache;if(o||(o=new Map,this._cache=o),o.has(s))return o.get(s);let a=null;const l=s.call(this);if(!O.compare(l,O.NULL)){a=[l];const u=l.getNump();if(u>1){const p=O.getPointer(l);for(let f=1;f<u;f++)a.push(O.wrapPointer(p+n*f,O.PeHorizon))}}return o.set(s,a),a};e(O.PeProjcs.prototype,"horizonGcsGenerate",r),e(O.PeProjcs.prototype,"horizonPcsGenerate",r),O.PeObject.prototype.toString=function(s=vt.PE_STR_OPTS_NONE){O.ensureCache.prepare();const o=O.getPointer(this),a=O.ensureInt8(new Array(vt.PE_BUFFER_MAX));return O.UTF8ToString(O._pe_object_to_string_ext(o,s,a))}}function Wo(t){if(!t)return;const e=O.getClass(t);if(!e)return;const i=O.getCache(e);if(!i)return;const n=O.getPointer(t);n&&delete i[n]}function wy(t,e){const i=[],n=new Array(e);for(let r=0;r<t;r++)i.push(O.ensureInt8(n));return i}function Eu(t){let e;return Array.isArray(t[0])?(e=[],t.forEach(i=>{e.push(i[0],i[1])})):e=t,e}function Zl(t,e,i,n=!1){if(n)for(let r=0;r<2*e;r++)t[r]=O.getValue(i+r*Float64Array.BYTES_PER_ELEMENT,"double");else{const r=t.length===0;for(let s=0;s<e;s++)r&&(t[s]=new Array(2)),t[s][0]=O.getValue(i,"double"),t[s][1]=O.getValue(i+Float64Array.BYTES_PER_ELEMENT,"double"),i+=2*Float64Array.BYTES_PER_ELEMENT}}(function(t){let e;function i(){t.PE_GTLIST_OPTS_COMMON=O.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,e=O._pe_getPeGTlistExtendedEntrySize()}function n(r,s,o,a,l,u){let p=null;const f=new O.PeInteger(u);try{const m=O.PeGTlistExtended.prototype.getGTlist(r,s,o,a,l,f);if((u=f.val)&&(p=[m],u>1)){const g=O.getPointer(m);for(let y=1;y<u;y++)p.push(O.wrapPointer(g+e*y,O.PeGTlistExtendedEntry))}}finally{O.destroy(f)}return p}t.init=i,t.getGTlist=n})(Kv||(Kv={})),function(t){function e(i){if(i!=null&&i.length){for(const n of i)Wo(n),n.getEntries().forEach(r=>{Wo(r);const s=r.getGeogtran();Wo(s),s.getParameters().forEach(Wo),[s.getGeogcs1(),s.getGeogcs2()].forEach(o=>{Wo(o);const a=o.getDatum();Wo(a),Wo(a.getSpheroid()),Wo(o.getPrimem()),Wo(o.getUnit())})});O.PeGTlistExtendedEntry.prototype.Delete(i[0])}}t.destroy=e}(r$||(r$={})),function(t){function e(i,n,r,s,o){O.ensureCache.prepare();const a=Eu(r),l=r===a,u=O.ensureFloat64(a);let p=0;s&&(p=O.ensureFloat64(s));const f=O._pe_geog_to_geog(O.getPointer(i),n,u,p,o);return f&&Zl(r,n,u,l),f}t.geogToGeog=e}(s$||(s$={})),function(t){const e=(u,p,f,m,g,y)=>{let v,b;switch(O.ensureCache.prepare(),u){case"dd":v=O._pe_geog_to_dd,b=vt.PE_DD_MAX;break;case"ddm":v=O._pe_geog_to_ddm,b=vt.PE_DDM_MAX;break;case"dms":v=O._pe_geog_to_dms,b=vt.PE_DMS_MAX}let _=0;p&&(_=O.getPointer(p));const $=Eu(m),x=O.ensureFloat64($),E=wy(f,b),C=v(_,f,x,g,O.ensureInt32(E));if(C)for(let M=0;M<f;M++)y[M]=O.UTF8ToString(E[M]);return C},i=(u,p,f,m,g)=>{let y;switch(O.ensureCache.prepare(),u){case"dd":y=O._pe_dd_to_geog;break;case"ddm":y=O._pe_ddm_to_geog;break;case"dms":y=O._pe_dms_to_geog}let v=0;p&&(v=O.getPointer(p));const b=m.map(E=>O.ensureString(E)),_=O.ensureInt32(b),$=O.ensureFloat64(new Array(2*f)),x=y(v,f,_,$);return x&&Zl(g,f,$),x};function n(u,p,f,m,g){return e("dms",u,p,f,m,g)}function r(u,p,f,m){return i("dms",u,p,f,m)}function s(u,p,f,m,g){return e("ddm",u,p,f,m,g)}function o(u,p,f,m){return i("ddm",u,p,f,m)}function a(u,p,f,m,g){return e("dd",u,p,f,m,g)}function l(u,p,f,m){return i("dd",u,p,f,m)}t.geogToDms=n,t.dmsToGeog=r,t.geogToDdm=s,t.ddmToGeog=o,t.geogToDd=a,t.ddToGeog=l}(o$||(o$={})),function(t){function e(){t.PE_MGRS_STYLE_NEW=O.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,t.PE_MGRS_STYLE_OLD=O.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,t.PE_MGRS_STYLE_AUTO=O.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,t.PE_MGRS_180_ZONE_1_PLUS=O.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,t.PE_MGRS_ADD_SPACES=O.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function i(r,s,o,a,l,u,p){O.ensureCache.prepare();let f=0;r&&(f=O.getPointer(r));const m=Eu(o),g=O.ensureFloat64(m),y=wy(s,vt.PE_MGRS_MAX),v=O.ensureInt32(y),b=O._pe_geog_to_mgrs_extended(f,s,g,a,l,u,v);if(b)for(let _=0;_<s;_++)p[_]=O.UTF8ToString(y[_]);return b}function n(r,s,o,a,l){O.ensureCache.prepare();let u=0;r&&(u=O.getPointer(r));const p=o.map(y=>O.ensureString(y)),f=O.ensureInt32(p),m=O.ensureFloat64(new Array(2*s)),g=O._pe_mgrs_to_geog_extended(u,s,f,a,m);return g&&Zl(l,s,m),g}t.init=e,t.geogToMgrsExtended=i,t.mgrsToGeogExtended=n}(Jv||(Jv={})),function(t){function e(n,r,s,o,a,l,u){O.ensureCache.prepare();let p=0;n&&(p=O.getPointer(n));const f=Eu(s),m=O.ensureFloat64(f),g=wy(r,vt.PE_MGRS_MAX),y=O.ensureInt32(g),v=O._pe_geog_to_usng(p,r,m,o,a,l,y);if(v)for(let b=0;b<r;b++)u[b]=O.UTF8ToString(g[b]);return v}function i(n,r,s,o){O.ensureCache.prepare();let a=0;n&&(a=O.getPointer(n));const l=s.map(m=>O.ensureString(m)),u=O.ensureInt32(l),p=O.ensureFloat64(new Array(2*r)),f=O._pe_usng_to_geog(a,r,u,p);return f&&Zl(o,r,p),f}t.geogToUsng=e,t.usngToGeog=i}(a$||(a$={})),function(t){function e(){t.PE_UTM_OPTS_NONE=O.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,t.PE_UTM_OPTS_ADD_SPACES=O.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,t.PE_UTM_OPTS_NS=O.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function i(r,s,o,a,l){O.ensureCache.prepare();let u=0;r&&(u=O.getPointer(r));const p=Eu(o),f=O.ensureFloat64(p),m=wy(s,vt.PE_UTM_MAX),g=O.ensureInt32(m),y=O._pe_geog_to_utm(u,s,f,a,g);if(y)for(let v=0;v<s;v++)l[v]=O.UTF8ToString(m[v]);return y}function n(r,s,o,a,l){O.ensureCache.prepare();let u=0;r&&(u=O.getPointer(r));const p=o.map(y=>O.ensureString(y)),f=O.ensureInt32(p),m=O.ensureFloat64(new Array(2*s)),g=O._pe_utm_to_geog(u,s,f,a,m);return g&&Zl(l,s,m),g}t.init=e,t.geogToUtm=i,t.utmToGeog=n}(Yv||(Yv={})),function(t){const e=new Map;function i(){t.PE_PCSINFO_OPTION_NONE=O.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,t.PE_PCSINFO_OPTION_DOMAIN=O.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,t.PE_POLE_OUTSIDE_BOUNDARY=O.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,t.PE_POLE_POINT=O.PePCSInfo.prototype.PE_POLE_POINT}function n(r,s=t.PE_PCSINFO_OPTION_DOMAIN){let o=null,a=null;return e.has(r)&&(a=e.get(r),a[s]&&(o=a[s])),o||(o=O.PePCSInfo.prototype.generate(r,s),a||(a=[],e.set(r,a)),a[s]=o),o}t.init=i,t.generate=n}(Xv||(Xv={})),function(t){function e(){return O.PeVersion.prototype.version_string()}t.versionString=e}(l$||(l$={}));const rV=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return i$},get PeDefs(){return vt},get PeFactory(){return n$},get PeGCSExtent(){return KP},get PeGTTransformations(){return s$},get PeGTlistExtended(){return Kv},get PeGTlistExtendedEntry(){return r$},get PeNotationDms(){return o$},get PeNotationMgrs(){return Jv},get PeNotationUsng(){return a$},get PeNotationUtm(){return Yv},get PePCSInfo(){return Xv},get PeVersion(){return l$},_init:JP,get _pe(){return O},isLoaded:jT,isSupported:nV,load:ZP},Symbol.toStringTag,{value:"Module"}));var xr;(function(t){t[t.CGCS2000=4490]="CGCS2000",t[t.GCSMARS2000=104971]="GCSMARS2000",t[t.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",t[t.GCSMOON2000=104903]="GCSMOON2000"})(xr||(xr={}));let h;const w={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9895:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,10160:0,10183:0,10188:0,10194:0,10199:0,10207:0,10212:0,10217:0,10222:0,10227:0,10235:0,10240:0,10250:0,10254:0,10270:0,10275:0,10280:0,10306:0,10329:0,10471:0,20002:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2,103897:1};for(h=2e3;h<=2045;h++)w[h]=0;for(h=2056;h<=2065;h++)w[h]=0;for(h=2067;h<=2135;h++)w[h]=0;for(h=2137;h<=2154;h++)w[h]=0;for(h=2161;h<=2170;h++)w[h]=0;for(h=2172;h<=2193;h++)w[h]=0;for(h=2195;h<=2198;h++)w[h]=0;for(h=2200;h<=2203;h++)w[h]=0;for(h=2205;h<=2217;h++)w[h]=0;for(h=2222;h<=2224;h++)w[h]=1;for(h=2225;h<=2250;h++)w[h]=2;for(h=2251;h<=2253;h++)w[h]=1;for(h=2257;h<=2264;h++)w[h]=2;for(h=2274;h<=2279;h++)w[h]=2;for(h=2280;h<=2282;h++)w[h]=1;for(h=2283;h<=2289;h++)w[h]=2;for(h=2290;h<=2292;h++)w[h]=0;for(h=2308;h<=2313;h++)w[h]=0;for(h=2315;h<=2491;h++)w[h]=0;for(h=2494;h<=2866;h++)w[h]=0;for(h=2867;h<=2869;h++)w[h]=1;for(h=2870;h<=2888;h++)w[h]=2;for(h=2891;h<=2895;h++)w[h]=2;for(h=2896;h<=2898;h++)w[h]=1;for(h=2902;h<=2908;h++)w[h]=2;for(h=2915;h<=2920;h++)w[h]=2;for(h=2921;h<=2923;h++)w[h]=1;for(h=2924;h<=2930;h++)w[h]=2;for(h=2931;h<=2962;h++)w[h]=0;for(h=2964;h<=2968;h++)w[h]=2;for(h=2969;h<=2973;h++)w[h]=0;for(h=2975;h<=2991;h++)w[h]=0;for(h=2995;h<=3051;h++)w[h]=0;for(h=3054;h<=3079;h++)w[h]=0;for(h=3081;h<=3088;h++)w[h]=0;for(h=3092;h<=3101;h++)w[h]=0;for(h=3106;h<=3138;h++)w[h]=0;for(h=3146;h<=3151;h++)w[h]=0;for(h=3153;h<=3166;h++)w[h]=0;for(h=3168;h<=3172;h++)w[h]=0;for(h=3174;h<=3203;h++)w[h]=0;for(h=3294;h<=3358;h++)w[h]=0;for(h=3367;h<=3403;h++)w[h]=0;for(h=3408;h<=3416;h++)w[h]=0;for(h=3417;h<=3438;h++)w[h]=2;for(h=3441;h<=3446;h++)w[h]=2;for(h=3447;h<=3450;h++)w[h]=0;for(h=3451;h<=3459;h++)w[h]=2;for(h=3460;h<=3478;h++)w[h]=0;for(h=3554;h<=3559;h++)w[h]=0;for(h=3560;h<=3570;h++)w[h]=2;for(h=3571;h<=3581;h++)w[h]=0;for(h=3594;h<=3597;h++)w[h]=0;for(h=3601;h<=3604;h++)w[h]=0;for(h=3637;h<=3639;h++)w[h]=0;for(h=3665;h<=3667;h++)w[h]=0;for(h=3693;h<=3695;h++)w[h]=0;for(h=3701;h<=3727;h++)w[h]=0;for(h=3728;h<=3739;h++)w[h]=2;for(h=3740;h<=3751;h++)w[h]=0;for(h=3753;h<=3760;h++)w[h]=2;for(h=3761;h<=3773;h++)w[h]=0;for(h=3775;h<=3777;h++)w[h]=0;for(h=3779;h<=3781;h++)w[h]=0;for(h=3783;h<=3785;h++)w[h]=0;for(h=3788;h<=3791;h++)w[h]=0;for(h=3797;h<=3802;h++)w[h]=0;for(h=3814;h<=3816;h++)w[h]=0;for(h=3825;h<=3829;h++)w[h]=0;for(h=3832;h<=3841;h++)w[h]=0;for(h=3844;h<=3852;h++)w[h]=0;for(h=3873;h<=3885;h++)w[h]=0;for(h=3890;h<=3893;h++)w[h]=0;for(h=3907;h<=3912;h++)w[h]=0;for(h=3942;h<=3950;h++)w[h]=0;for(h=3968;h<=3970;h++)w[h]=0;for(h=3973;h<=3976;h++)w[h]=0;for(h=3986;h<=3989;h++)w[h]=0;for(h=3994;h<=3997;h++)w[h]=0;for(h=4048;h<=4051;h++)w[h]=0;for(h=4056;h<=4063;h++)w[h]=0;for(h=4093;h<=4096;h++)w[h]=0;for(h=4390;h<=4398;h++)w[h]=0;for(h=4399;h<=4413;h++)w[h]=2;for(h=4418;h<=4433;h++)w[h]=2;for(h=4455;h<=4457;h++)w[h]=2;for(h=4484;h<=4489;h++)w[h]=0;for(h=4491;h<=4554;h++)w[h]=0;for(h=4568;h<=4589;h++)w[h]=0;for(h=4652;h<=4656;h++)w[h]=0;for(h=4766;h<=4800;h++)w[h]=0;for(h=5014;h<=5016;h++)w[h]=0;for(h=5069;h<=5072;h++)w[h]=0;for(h=5105;h<=5130;h++)w[h]=0;for(h=5167;h<=5188;h++)w[h]=0;for(h=5253;h<=5259;h++)w[h]=0;for(h=5269;h<=5275;h++)w[h]=0;for(h=5292;h<=5311;h++)w[h]=0;for(h=5329;h<=5331;h++)w[h]=0;for(h=5343;h<=5349;h++)w[h]=0;for(h=5355;h<=5357;h++)w[h]=0;for(h=5387;h<=5389;h++)w[h]=0;for(h=5459;h<=5463;h++)w[h]=0;for(h=5479;h<=5482;h++)w[h]=0;for(h=5518;h<=5520;h++)w[h]=0;for(h=5530;h<=5539;h++)w[h]=0;for(h=5550;h<=5552;h++)w[h]=0;for(h=5562;h<=5583;h++)w[h]=0;for(h=5623;h<=5625;h++)w[h]=2;for(h=5631;h<=5639;h++)w[h]=0;for(h=5649;h<=5653;h++)w[h]=0;for(h=5663;h<=5680;h++)w[h]=0;for(h=5682;h<=5685;h++)w[h]=0;for(h=5875;h<=5877;h++)w[h]=0;for(h=5896;h<=5899;h++)w[h]=0;for(h=5921;h<=5940;h++)w[h]=0;for(h=6050;h<=6125;h++)w[h]=0;for(h=6244;h<=6275;h++)w[h]=0;for(h=6328;h<=6348;h++)w[h]=0;for(h=6350;h<=6356;h++)w[h]=0;for(h=6366;h<=6372;h++)w[h]=0;for(h=6381;h<=6387;h++)w[h]=0;for(h=6393;h<=6404;h++)w[h]=0;for(h=6480;h<=6483;h++)w[h]=0;for(h=6511;h<=6514;h++)w[h]=0;for(h=6579;h<=6581;h++)w[h]=0;for(h=6619;h<=6624;h++)w[h]=0;for(h=6625;h<=6627;h++)w[h]=2;for(h=6628;h<=6632;h++)w[h]=0;for(h=6634;h<=6637;h++)w[h]=0;for(h=6669;h<=6692;h++)w[h]=0;for(h=6707;h<=6709;h++)w[h]=0;for(h=6720;h<=6723;h++)w[h]=0;for(h=6732;h<=6738;h++)w[h]=0;for(h=6931;h<=6933;h++)w[h]=0;for(h=6956;h<=6959;h++)w[h]=0;for(h=7005;h<=7007;h++)w[h]=0;for(h=7057;h<=7070;h++)w[h]=2;for(h=7074;h<=7082;h++)w[h]=0;for(h=7109;h<=7118;h++)w[h]=0;for(h=7119;h<=7127;h++)w[h]=1;for(h=7374;h<=7376;h++)w[h]=0;for(h=7528;h<=7586;h++)w[h]=0;for(h=7587;h<=7645;h++)w[h]=2;for(h=7692;h<=7696;h++)w[h]=0;for(h=7755;h<=7787;h++)w[h]=0;for(h=7791;h<=7795;h++)w[h]=0;for(h=7799;h<=7801;h++)w[h]=0;for(h=7803;h<=7805;h++)w[h]=0;for(h=7825;h<=7831;h++)w[h]=0;for(h=7845;h<=7859;h++)w[h]=0;for(h=8013;h<=8032;h++)w[h]=0;for(h=8065;h<=8068;h++)w[h]=1;for(h=8518;h<=8529;h++)w[h]=2;for(h=8533;h<=8536;h++)w[h]=2;for(h=8538;h<=8540;h++)w[h]=2;for(h=8677;h<=8679;h++)w[h]=0;for(h=8836;h<=8840;h++)w[h]=0;for(h=8857;h<=8859;h++)w[h]=0;for(h=8908;h<=8910;h++)w[h]=0;for(h=9154;h<=9159;h++)w[h]=0;for(h=9205;h<=9218;h++)w[h]=0;for(h=9271;h<=9273;h++)w[h]=0;for(h=9295;h<=9297;h++)w[h]=0;for(h=9356;h<=9360;h++)w[h]=0;for(h=9404;h<=9407;h++)w[h]=0;for(h=9476;h<=9482;h++)w[h]=0;for(h=9487;h<=9494;h++)w[h]=0;for(h=9697;h<=9699;h++)w[h]=0;for(h=9821;h<=9865;h++)w[h]=0;for(h=10285;h<=10291;h++)w[h]=0;for(h=10314;h<=10317;h++)w[h]=0;for(h=10448;h<=10465;h++)w[h]=0;for(h=11114;h<=11118;h++)w[h]=0;for(h=20004;h<=20032;h++)w[h]=0;for(h=20047;h<=20049;h++)w[h]=0;for(h=20062;h<=20092;h++)w[h]=0;for(h=20135;h<=20138;h++)w[h]=0;for(h=20248;h<=20258;h++)w[h]=0;for(h=20348;h<=20358;h++)w[h]=0;for(h=20436;h<=20440;h++)w[h]=0;for(h=20822;h<=20824;h++)w[h]=0;for(h=20904;h<=20932;h++)w[h]=0;for(h=20934;h<=20936;h++)w[h]=0;for(h=21004;h<=21032;h++)w[h]=0;for(h=21035;h<=21037;h++)w[h]=0;for(h=21095;h<=21097;h++)w[h]=0;for(h=21148;h<=21150;h++)w[h]=0;for(h=21207;h<=21264;h++)w[h]=0;for(h=21307;h<=21364;h++)w[h]=0;for(h=21413;h<=21423;h++)w[h]=0;for(h=21453;h<=21463;h++)w[h]=0;for(h=21473;h<=21483;h++)w[h]=0;for(h=21780;h<=21782;h++)w[h]=0;for(h=21891;h<=21894;h++)w[h]=0;for(h=21896;h<=21899;h++)w[h]=0;for(h=22171;h<=22177;h++)w[h]=0;for(h=22181;h<=22187;h++)w[h]=0;for(h=22191;h<=22197;h++)w[h]=0;for(h=22207;h<=22222;h++)w[h]=0;for(h=22229;h<=22232;h++)w[h]=0;for(h=22234;h<=22236;h++)w[h]=0;for(h=22243;h<=22250;h++)w[h]=0;for(h=22262;h<=22265;h++)w[h]=0;for(h=22307;h<=22322;h++)w[h]=0;for(h=22348;h<=22357;h++)w[h]=0;for(h=22407;h<=22422;h++)w[h]=0;for(h=22462;h<=22465;h++)w[h]=0;for(h=22521;h<=22525;h++)w[h]=0;for(h=22607;h<=22622;h++)w[h]=0;for(h=22641;h<=22646;h++)w[h]=0;for(h=22648;h<=22657;h++)w[h]=0;for(h=22707;h<=22722;h++)w[h]=0;for(h=22762;h<=22765;h++)w[h]=0;for(h=22807;h<=22822;h++)w[h]=0;for(h=22991;h<=22994;h++)w[h]=0;for(h=23028;h<=23038;h++)w[h]=0;for(h=23301;h<=23333;h++)w[h]=2;for(h=23830;h<=23853;h++)w[h]=0;for(h=23866;h<=23872;h++)w[h]=0;for(h=23877;h<=23884;h++)w[h]=0;for(h=23886;h<=23894;h++)w[h]=0;for(h=23946;h<=23948;h++)w[h]=0;for(h=24311;h<=24313;h++)w[h]=0;for(h=24342;h<=24347;h++)w[h]=0;for(h=24370;h<=24374;h++)w[h]=10;for(h=24375;h<=24381;h++)w[h]=0;for(h=24718;h<=24721;h++)w[h]=0;for(h=24817;h<=24821;h++)w[h]=0;for(h=24877;h<=24882;h++)w[h]=0;for(h=24891;h<=24893;h++)w[h]=0;for(h=25391;h<=25395;h++)w[h]=0;for(h=25828;h<=25838;h++)w[h]=0;for(h=26191;h<=26195;h++)w[h]=0;for(h=26391;h<=26393;h++)w[h]=0;for(h=26701;h<=26722;h++)w[h]=0;for(h=26729;h<=26799;h++)w[h]=2;for(h=26801;h<=26803;h++)w[h]=2;for(h=26811;h<=26813;h++)w[h]=2;for(h=26847;h<=26870;h++)w[h]=2;for(h=26891;h<=26899;h++)w[h]=0;for(h=26901;h<=26923;h++)w[h]=0;for(h=26929;h<=26946;h++)w[h]=0;for(h=26948;h<=26998;h++)w[h]=0;for(h=27037;h<=27040;h++)w[h]=0;for(h=27205;h<=27232;h++)w[h]=0;for(h=27258;h<=27260;h++)w[h]=0;for(h=27391;h<=27398;h++)w[h]=0;for(h=27561;h<=27564;h++)w[h]=0;for(h=27571;h<=27574;h++)w[h]=0;for(h=27581;h<=27584;h++)w[h]=0;for(h=27591;h<=27594;h++)w[h]=0;for(h=28191;h<=28193;h++)w[h]=0;for(h=28348;h<=28358;h++)w[h]=0;for(h=28402;h<=28432;h++)w[h]=0;for(h=28462;h<=28492;h++)w[h]=0;for(h=29118;h<=29122;h++)w[h]=0;for(h=29168;h<=29172;h++)w[h]=0;for(h=29177;h<=29185;h++)w[h]=0;for(h=29187;h<=29195;h++)w[h]=0;for(h=29900;h<=29903;h++)w[h]=0;for(h=30161;h<=30179;h++)w[h]=0;for(h=30491;h<=30494;h++)w[h]=0;for(h=30729;h<=30732;h++)w[h]=0;for(h=31251;h<=31259;h++)w[h]=0;for(h=31265;h<=31268;h++)w[h]=0;for(h=31275;h<=31279;h++)w[h]=0;for(h=31281;h<=31297;h++)w[h]=0;for(h=31461;h<=31469;h++)w[h]=0;for(h=31491;h<=31495;h++)w[h]=0;for(h=31917;h<=31922;h++)w[h]=0;for(h=31965;h<=32e3;h++)w[h]=0;for(h=32001;h<=32003;h++)w[h]=2;for(h=32005;h<=32031;h++)w[h]=2;for(h=32033;h<=32060;h++)w[h]=2;for(h=32064;h<=32067;h++)w[h]=2;for(h=32074;h<=32077;h++)w[h]=2;for(h=32081;h<=32086;h++)w[h]=0;for(h=32107;h<=32130;h++)w[h]=0;for(h=32133;h<=32159;h++)w[h]=0;for(h=32164;h<=32167;h++)w[h]=2;for(h=32180;h<=32199;h++)w[h]=0;for(h=32201;h<=32260;h++)w[h]=0;for(h=32301;h<=32360;h++)w[h]=0;for(h=32401;h<=32460;h++)w[h]=0;for(h=32501;h<=32560;h++)w[h]=0;for(h=32601;h<=32662;h++)w[h]=0;for(h=32664;h<=32667;h++)w[h]=2;for(h=32701;h<=32761;h++)w[h]=0;for(h=53001;h<=53004;h++)w[h]=0;for(h=53008;h<=53019;h++)w[h]=0;for(h=53021;h<=53032;h++)w[h]=0;for(h=53034;h<=53037;h++)w[h]=0;for(h=53042;h<=53046;h++)w[h]=0;for(h=53074;h<=53080;h++)w[h]=0;for(h=54001;h<=54004;h++)w[h]=0;for(h=54008;h<=54019;h++)w[h]=0;for(h=54021;h<=54032;h++)w[h]=0;for(h=54034;h<=54037;h++)w[h]=0;for(h=54042;h<=54046;h++)w[h]=0;for(h=54048;h<=54053;h++)w[h]=0;for(h=54074;h<=54080;h++)w[h]=0;for(h=54098;h<=54101;h++)w[h]=0;for(h=102001;h<=102040;h++)w[h]=0;for(h=102042;h<=102063;h++)w[h]=0;for(h=102065;h<=102067;h++)w[h]=0;for(h=102070;h<=102117;h++)w[h]=0;for(h=102122;h<=102216;h++)w[h]=0;for(h=102221;h<=102377;h++)w[h]=0;for(h=102382;h<=102388;h++)w[h]=0;for(h=102389;h<=102398;h++)w[h]=2;for(h=102399;h<=102444;h++)w[h]=0;for(h=102445;h<=102447;h++)w[h]=2;for(h=102448;h<=102458;h++)w[h]=0;for(h=102459;h<=102468;h++)w[h]=2;for(h=102469;h<=102499;h++)w[h]=0;for(h=102500;h<=102519;h++)w[h]=1;for(h=102520;h<=102524;h++)w[h]=0;for(h=102525;h<=102529;h++)w[h]=2;for(h=102530;h<=102588;h++)w[h]=0;for(h=102590;h<=102598;h++)w[h]=0;for(h=102601;h<=102603;h++)w[h]=0;for(h=102605;h<=102628;h++)w[h]=0;for(h=102629;h<=102646;h++)w[h]=2;for(h=102648;h<=102700;h++)w[h]=2;for(h=102701;h<=102703;h++)w[h]=0;for(h=102707;h<=102730;h++)w[h]=2;for(h=102733;h<=102758;h++)w[h]=2;for(h=102767;h<=102900;h++)w[h]=0;for(h=102901;h<=102933;h++)w[h]=2;for(h=102934;h<=102950;h++)w[h]=13;for(h=102951;h<=102955;h++)w[h]=0;for(h=102961;h<=102963;h++)w[h]=0;for(h=102965;h<=102969;h++)w[h]=0;for(h=102971;h<=102973;h++)w[h]=0;for(h=102975;h<=102989;h++)w[h]=0;for(h=102990;h<=102992;h++)w[h]=1;for(h=102997;h<=103002;h++)w[h]=0;for(h=103003;h<=103008;h++)w[h]=2;for(h=103009;h<=103011;h++)w[h]=0;for(h=103012;h<=103014;h++)w[h]=2;for(h=103019;h<=103021;h++)w[h]=0;for(h=103022;h<=103024;h++)w[h]=2;for(h=103029;h<=103031;h++)w[h]=0;for(h=103032;h<=103034;h++)w[h]=2;for(h=103065;h<=103068;h++)w[h]=0;for(h=103074;h<=103076;h++)w[h]=0;for(h=103077;h<=103079;h++)w[h]=1;for(h=103080;h<=103082;h++)w[h]=0;for(h=103083;h<=103085;h++)w[h]=2;for(h=103090;h<=103093;h++)w[h]=0;for(h=103097;h<=103099;h++)w[h]=0;for(h=103100;h<=103102;h++)w[h]=2;for(h=103107;h<=103109;h++)w[h]=0;for(h=103110;h<=103112;h++)w[h]=2;for(h=103113;h<=103116;h++)w[h]=0;for(h=103117;h<=103120;h++)w[h]=2;for(h=103153;h<=103157;h++)w[h]=0;for(h=103158;h<=103162;h++)w[h]=2;for(h=103163;h<=103165;h++)w[h]=0;for(h=103166;h<=103168;h++)w[h]=1;for(h=103169;h<=103171;h++)w[h]=2;for(h=103186;h<=103188;h++)w[h]=0;for(h=103189;h<=103191;h++)w[h]=2;for(h=103192;h<=103195;h++)w[h]=0;for(h=103196;h<=103199;h++)w[h]=2;for(h=103200;h<=103224;h++)w[h]=0;for(h=103225;h<=103227;h++)w[h]=1;for(h=103232;h<=103237;h++)w[h]=0;for(h=103238;h<=103243;h++)w[h]=2;for(h=103244;h<=103246;h++)w[h]=0;for(h=103247;h<=103249;h++)w[h]=2;for(h=103254;h<=103256;h++)w[h]=0;for(h=103257;h<=103259;h++)w[h]=2;for(h=103264;h<=103266;h++)w[h]=0;for(h=103267;h<=103269;h++)w[h]=2;for(h=103300;h<=103375;h++)w[h]=0;for(h=103381;h<=103383;h++)w[h]=0;for(h=103384;h<=103386;h++)w[h]=1;for(h=103387;h<=103389;h++)w[h]=0;for(h=103390;h<=103392;h++)w[h]=2;for(h=103397;h<=103399;h++)w[h]=0;for(h=103400;h<=103471;h++)w[h]=2;for(h=103476;h<=103478;h++)w[h]=0;for(h=103479;h<=103481;h++)w[h]=2;for(h=103486;h<=103488;h++)w[h]=0;for(h=103489;h<=103491;h++)w[h]=2;for(h=103492;h<=103495;h++)w[h]=0;for(h=103496;h<=103499;h++)w[h]=2;for(h=103528;h<=103543;h++)w[h]=0;for(h=103544;h<=103548;h++)w[h]=2;for(h=103549;h<=103551;h++)w[h]=0;for(h=103552;h<=103554;h++)w[h]=1;for(h=103555;h<=103557;h++)w[h]=2;for(h=103558;h<=103560;h++)w[h]=0;for(h=103571;h<=103573;h++)w[h]=0;for(h=103574;h<=103576;h++)w[h]=2;for(h=103577;h<=103580;h++)w[h]=0;for(h=103581;h<=103583;h++)w[h]=2;for(h=103595;h<=103694;h++)w[h]=0;for(h=103696;h<=103699;h++)w[h]=0;for(h=103700;h<=103793;h++)w[h]=2;for(h=103794;h<=103890;h++)w[h]=0;for(h=103891;h<=103896;h++)w[h]=2;for(h=103900;h<=103971;h++)w[h]=2;for(h=103972;h<=103977;h++)w[h]=0;for(h=112e3;h<=112101;h++)w[h]=0;const sV={102113:!0,102100:!0,3857:!0,3785:!0},oV={4326:!0,3785:!0,3857:!0,102113:!0,102100:!0,104905:!0,104971:!0},rC='PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',_y=[-20037508342788905e-9,20037508342788905e-9],Sy=[-20037508342787e-6,20037508342787e-6],YP={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:_y,origin:Sy,dx:1e-5},102100:{wkTemplate:rC,valid:_y,origin:Sy,dx:1e-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:_y,origin:Sy,dx:1e-5},3857:{wkTemplate:rC,valid:_y,origin:Sy,dx:1e-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function xt(t,e){if(t===e)return!0;if(t==null||e==null)return!1;if(t.wkid!=null||e.wkid!=null)return t.wkid===e.wkid||rd(t)&&rd(e)||e.latestWkid!=null&&t.wkid===e.latestWkid||t.latestWkid!=null&&e.wkid===t.latestWkid;const i=t.wkt2??t.wkt,n=e.wkt2??e.wkt;return!(!i||!n)&&i.toUpperCase()===n.toUpperCase()}function En(t){return fi(t)&&t.wkid&&YP[t.wkid]||null}function Qv(t){if(!t)return;if(t.wkid)return String(t.wkid);const e=t.wkt||t.wkt2;return JSON.stringify(e?{wkt:e}:{})}function C1(t){if(!fi(t))return!1;if(t.wkid)return w[t.wkid]==null;const e=t.wkt2||t.wkt;return!!e&&/^\s*(?:GEOGCS|GEOGCRS|GEOGRAPHICCRS)/i.test(e)}function aV(t){return!(Tg(t)||Eg(t))}function qm(t){return fi(t)&&t.wkid===4326}function Z1e(t){return/^\s*(?:GEOD|GEODETIC|GEOG|GEOGRAPHIC|PROJ|PROJECTED|VERT|VERTICAL|ENG|ENGINEERING|PARAMETRIC|TIME|DERIVEDPROJ|COMPOUND|BOUND)CRS/i.test(t)}function K1e(t){return fi(t)&&t.wkid===xr.CGCS2000}function rd(t){return fi(t)&&t.wkid!=null&&sV[t.wkid]===!0}function lV(t){return fi(t)&&t.wkid===32662}function GT(t){return t===xr.GCSMARS2000||t===xr.GCSMARS2000_SPHERE}function Tg(t){return fi(t)&&t.wkid!=null&&GT(t.wkid)}function UT(t){return t===xr.GCSMOON2000}function Eg(t){return fi(t)&&t.wkid!=null&&UT(t.wkid)}function cV(t){return fi(t)&&t.wkid!=null&&oV[t.wkid]===!0}function fi(t){return t!=null&&(t.wkid!=null&&t.wkid>=2e3||t.wkt2!=null||t.wkt!=null)}const uV={wkid:4326,wkt:bT(YP[4326].wkTemplate,{Central_Meridian:"0.0"})},dV={wkid:102100,latestWkid:3857},hV={wkid:32662};function HT(t){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${t.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const pV=HT(lt),VT=HT(Pa),BT=HT(uc),fV={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${lt.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`};function qT(t){return t!=null&&(Tg(t)||xt(t,VT))?Pa:t!=null&&(Eg(t)||xt(t,BT))?uc:lt}function J1e(t){return GT(t)?Pa:UT(t)?uc:lt}function eb(t){return xt(t,pV)}function dc(t){return eb(t)||xt(t,VT)||xt(t,BT)}const XP=39.37,mV=lt.radius*Math.PI/200,QP=/(?:LENGTH)?UNIT\[([^\]]+)]]$/i,Zu=w,eR=/UNIT\[([^\]]+)]/i,gV=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),yV=sn()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),Us=t=>t*t,tl=t=>t*t*t,Wm={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:Us(.001)},"square-centimeters":{inBaseUnits:Us(.01)},"square-decimeters":{inBaseUnits:Us(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:Us(1e3)},"square-inches":{inBaseUnits:Us(.0254)},"square-feet":{inBaseUnits:Us(.3048)},"square-yards":{inBaseUnits:Us(.9144)},"square-miles":{inBaseUnits:Us(1609.344)},"square-us-feet":{inBaseUnits:Us(1200/3937)},acres:{inBaseUnits:.0015625*Us(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*tl(.001)},"cubic-centimeters":{inBaseUnits:1e3*tl(.01)},"cubic-decimeters":{inBaseUnits:1e3*tl(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*tl(1e3)},"cubic-inches":{inBaseUnits:1e3*tl(.0254)},"cubic-feet":{inBaseUnits:1e3*tl(.3048)},"cubic-yards":{inBaseUnits:1e3*tl(.9144)},"cubic-miles":{inBaseUnits:1e3*tl(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},vV=(()=>{const t={};for(const e in Wm)for(const i in Wm[e].units)t[i]=e;return t})();function bV(t,e,i){return t*Wm[i].units[e].inBaseUnits}function wV(t,e,i){return t/Wm[i].units[e].inBaseUnits}const tR=["metric","imperial","inches","feet","yards","miles","nautical-miles","us-feet","meters","kilometers"],_V=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]);function c$(t){const e=vV[t];if(!e)throw new Error("unknown type");return e}function sC(t,e=null){return e=e||c$(t),Wm[e].baseUnit===t}function Rt(t,e,i){if(e===i)return t;const n=c$(e);if(n!==c$(i))throw new Error("incompatible units");const r=sC(e,n)?t:bV(t,e,n);return sC(i,n)?r:wV(r,i,n)}function SV(t){switch(t){case"metric":return"meters";case"imperial":return"feet";default:return t}}function Y1e(t){return SV(t)}function X1e(t){switch(t){case"metric":return"square-meters";case"imperial":return"square-feet";default:return t}}function Q1e(t,e){const i=Rt(t,e,"meters");return Math.abs(i)<3e3?"meters":"kilometers"}function ewe(t,e){const i=Rt(t,e,"meters");return Math.abs(i)<1e5?"meters":"kilometers"}function twe(t,e){const i=Rt(t,e,"feet");return Math.abs(i)<1e3?"feet":"miles"}function iwe(t,e){const i=Rt(t,e,"feet");return Math.abs(i)<1e5?"feet":"miles"}function nwe(t,e){const i=Rt(t,e,"square-meters");return Math.abs(i)<3e6?"square-meters":"square-kilometers"}function rwe(t,e){const i=Rt(t,e,"square-feet");return Math.abs(i)<1e6?"square-feet":"square-miles"}function iR(t,e,i){return Rt(t,e,"meters")/(i*Math.PI/180)}function nR(t){return yV.fromJSON(t.toLowerCase())||null}function u$(t){if(t!=null&&!aV(t))return 1;const e=Cn(t);return e>1e5?1:e}function rR(t){return Cn(t)>=qT(t).metersPerDegree?"meters":kg(t)}function Cn(t,e=lt.metersPerDegree){return sR(t,!0)??e}function sR(t,e=!1){const i=(t==null?void 0:t.wkid)??null,n=(t==null?void 0:t.wkt2)??(t==null?void 0:t.wkt)??null;let r=null;if(i){if(GT(i))return Pa.metersPerDegree;if(UT(i))return uc.metersPerDegree;r=Zu.values[Zu[i]],!r&&e&&gV.has(i)&&(r=mV)}else n&&(WT(n)?r=oC(QP.exec(n),r):aR(n)&&(r=oC(eR.exec(n),r)));return r}function swe(t){return C1(t)?1:Cn(t)}function oC(t,e){return t!=null&&t[1]?oR(t[1]):e}function oR(t){return parseFloat(t.split(",")[1])}function kg(t){const e=(t==null?void 0:t.wkid)??null,i=(t==null?void 0:t.wkt2)??(t==null?void 0:t.wkt)??null;let n=null;if(e)n=Zu.units[Zu[e]];else if(i){const r=WT(i)?QP:aR(i)?eR:null;if(r){const s=r.exec(i);s!=null&&s[1]&&(n=xV(s[1]))}}return n!=null?nR(n):null}function owe(t){const e=kg(t);return e!=null&&tR.includes(e)?e:null}function awe(t){const e=rR(t);return e!=null&&tR.includes(e)?e:null}function lwe(t){const e=kg(t);return e==null?null:_V.get(e)}function aR(t){return/^GEOCCS/i.test(t)}function WT(t){return/^\s*(?:PROJCS|PROJCRS|PROJECTEDCRS)/i.test(t)}const $V=1e-7;function xV(t){const e=/[\\"']{1}([^\\"']+)/.exec(t);let i=e==null?void 0:e[1];if(!i||!Zu.units.includes(i)){const n=oR(t);i=null;const r=Zu.values;for(let s=0;s<r.length;++s)if(Math.abs(n-r[s])<$V){i=Zu.units[s];break}}return i}function cwe(t){const e=kg(t);if(e==null)return null;switch(e){case"feet":case"us-feet":case"clarke-feet":case"clarke-yards":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"benoit-1895-b-chains":case"indian-yards":case"indian-1937-yards":case"gold-coast-feet":case"sears-1922-truncated-chains":return"imperial";case"50-kilometers":case"150-kilometers":case"meters":return"metric"}return null}const TV={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},EV={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},kV={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},uwe=sn()(TV),dwe=sn()(EV),hwe=sn()(kV);function Ie(t,e,i){let n,r;return e===void 0?(r=t,n=[void 0]):typeof e!="string"?(r=t,n=[void 0],i=e):(r=e,n=Array.isArray(t)?t:[t]),(s,o)=>{const a=s.constructor.prototype;for(const l of n){const u=bP(s,l,r);u.write&&typeof u.write=="object"||(u.write={}),i&&(u.write.target=i),u.write.writer=a[o]}}}var Ws;let Pe=Ws=class extends ie{static fromJSON(t){if(!t)return null;if(t.wkid){if(t.wkid===102100)return Ws.WebMercator;if(t.wkid===4326)return Ws.WGS84}const e=new Ws;return e.read(t),e}constructor(t){super(t),this.latestWkid=null,this.wkid=null,this.wkt=null,this.wkt2=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(t){return t&&typeof t=="object"?t:{[typeof t=="string"?"wkt":"wkid"]:t}}get isWGS84(){return qm(this)}get isWebMercator(){return rd(this)}get isGeographic(){return C1(this)}get isWrappable(){return cV(this)}get metersPerUnit(){return Cn(this)}get unit(){return kg(this)||(this.isGeographic?"degrees":null)}writeWkt(t,e){this.wkid||(e.wkt=t)}clone(){if(this===Ws.WGS84)return Ws.WGS84;if(this===Ws.WebMercator)return Ws.WebMercator;const t=new Ws;return this.wkid!=null?(t.wkid=this.wkid,this.latestWkid!=null&&(t.latestWkid=this.latestWkid),this.vcsWkid!=null&&(t.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(t.latestVcsWkid=this.latestVcsWkid)):(this.wkt!=null&&(t.wkt=this.wkt),this.wkt2!=null&&(t.wkt2=this.wkt2)),this.imageCoordinateSystem&&(t.imageCoordinateSystem=q(this.imageCoordinateSystem)),t}equals(t){if(t==null)return!1;if(this.imageCoordinateSystem||t.imageCoordinateSystem){if(this.imageCoordinateSystem==null||t.imageCoordinateSystem==null)return!1;const{id:e,referenceServiceName:i}=t.imageCoordinateSystem,{geodataXform:n}=t.imageCoordinateSystem,r=this.imageCoordinateSystem;return e==null||n?JSON.stringify(r)===JSON.stringify(t.imageCoordinateSystem):i?r.id===e&&r.referenceServiceName===i:r.id===e}return xt(this,t)}toJSON(t){return this.write(void 0,t)}};Pe.GCS_NAD_1927=null,Pe.WGS84=null,Pe.WebMercator=null,Pe.PlateCarree=null,c([d({readOnly:!0})],Pe.prototype,"isWGS84",null),c([d({readOnly:!0})],Pe.prototype,"isWebMercator",null),c([d({readOnly:!0})],Pe.prototype,"isGeographic",null),c([d({readOnly:!0})],Pe.prototype,"isWrappable",null),c([d({type:Et,json:{write:!0}})],Pe.prototype,"latestWkid",void 0),c([d({readOnly:!0})],Pe.prototype,"metersPerUnit",null),c([d({readOnly:!0})],Pe.prototype,"unit",null),c([d({type:Et,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],Pe.prototype,"wkid",void 0),c([d({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],Pe.prototype,"wkt",void 0),c([Ie("wkt"),Ie("web-scene","wkt")],Pe.prototype,"writeWkt",null),c([d({type:String,json:{write:!1}})],Pe.prototype,"wkt2",void 0),c([d({type:Et,json:{write:!0}})],Pe.prototype,"vcsWkid",void 0),c([d({type:Et,json:{write:!0}})],Pe.prototype,"latestVcsWkid",void 0),c([d()],Pe.prototype,"imageCoordinateSystem",void 0),Pe=Ws=c([S("esri.geometry.SpatialReference")],Pe),Pe.prototype.toJSON.isDefaultToJSON=!0,Pe.GCS_NAD_1927=new Pe({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'}),Pe.WGS84=new Pe(uV),Pe.WebMercator=new Pe(dV),Pe.PlateCarree=new Pe(hV),Object.freeze&&(Object.freeze(Pe.GCS_NAD_1927),Object.freeze(Pe.WGS84),Object.freeze(Pe.WebMercator));const xe=Pe,MV=57.29577951308232,CV=.017453292519943;function aC(t){return t*MV}function lC(t){return t*CV}function cC(t){return t/lt.radius}function uC(t){return Math.PI/2-2*Math.atan(Math.exp(-t/lt.radius))}function d$(t){return t.wkid!=null||t.wkt!=null}const e_=[0,0];function tb(t,e,i,n,r){const s=t,o=r;if(o.spatialReference=i,"x"in s&&"x"in o)[o.x,o.y]=e(s.x,s.y,e_,n);else if("xmin"in s&&"xmin"in o)[o.xmin,o.ymin]=e(s.xmin,s.ymin,e_,n),[o.xmax,o.ymax]=e(s.xmax,s.ymax,e_,n);else if("paths"in s&&"paths"in o||"rings"in s&&"rings"in o){const a="paths"in s?s.paths:s.rings,l=[];let u;for(let p=0;p<a.length;p++){const f=a[p];u=[],l.push(u);for(let m=0;m<f.length;m++)u.push(e(f[m][0],f[m][1],[0,0],n)),f[m].length>2&&u[m].push(f[m][2]),f[m].length>3&&u[m].push(f[m][3])}"paths"in o?o.paths=l:o.rings=l}else if("points"in s&&"points"in o){const a=s.points,l=[];for(let u=0;u<a.length;u++)l[u]=e(a[u][0],a[u][1],[0,0],n),a[u].length>2&&l[u].push(a[u][2]),a[u].length>3&&l[u].push(a[u][3]);o.points=l}return r}function P0(t,e){const i=t&&(d$(t)?t:t.spatialReference),n=e&&(d$(e)?e:e.spatialReference);return!(t&&"type"in t&&t.type==="mesh"||e&&"type"in e&&e.type==="mesh"||!i||!n)&&(!!xt(n,i)||rd(n)&&qm(i)||rd(i)&&qm(n))}function I1(t,e){if(t==null)return null;const i=t.spatialReference,n=e&&(d$(e)?e:e.spatialReference);return P0(i,n)?xt(i,n)?q(t):rd(n)?tb(t,Ih,xe.WebMercator,!1,q(t)):qm(n)?tb(t,wm,xe.WGS84,!1,q(t)):null:null}function Ih(t,e,i=[0,0]){e>89.99999?e=89.99999:e<-89.99999&&(e=-89.99999);const n=lC(e);return i[0]=lC(t)*lt.radius,i[1]=lt.halfSemiMajorAxis*Math.log((1+Math.sin(n))/(1-Math.sin(n))),i}function wm(t,e,i=[0,0],n=!1){const r=aC(t/lt.radius);return i[0]=n?r:r-360*Math.floor((r+180)/360),i[1]=aC(Math.PI/2-2*Math.atan(Math.exp(-e/lt.radius))),i}function Na(t,e=!1,i=q(t)){return tb(t,Ih,xe.WebMercator,e,i)}function Xl(t,e=!1,i=q(t)){return tb(t,wm,xe.WGS84,e,i)}const Ua=hT({center:{x:0,y:0},scale:0,extent:{}}),IV=pT(Ua,t=>Xl(t.center)),OV=pT(Ua,t=>JSON.stringify(t.extent,null,4)),AV=pT(Ua,t=>{const e=Xl(t.extent);return JSON.stringify(e,null,4)}),lR=hT("full-size"),No=t=>{let e=class extends t{clone(){var l;const i=lc(this);GL(i,"unable to clone instance of non-accessor class");const n=i.metadatas,r=i.store,s={},o=new Map;for(const u in n){const p=n[u],f=r==null?void 0:r.originOf(u),m=p.clonable;if(p.readOnly||m===!1||f!==Le.USER&&f!==Le.DEFAULTS&&f!==Le.WEB_MAP&&f!==Le.WEB_SCENE)continue;const g=this[u];let y=null;y=typeof m=="function"?m(g):m==="reference"?g:LS(g),g!=null&&y==null||(f===Le.DEFAULTS?o.set(u,y):s[u]=y)}const a=new(Object.getPrototypeOf(this)).constructor(s);if(o.size){const u=(l=lc(a))==null?void 0:l.store;if(u)for(const[p,f]of o)u.set(p,f,Le.DEFAULTS)}return a}};return e=c([S("esri.core.Clonable")],e),e};let dC=class extends No(X){};dC=c([S("esri.core.Clonable")],dC);function se(){return[0,0,0]}function tr(t){return[t[0],t[1],t[2]]}function kn(t,e,i){return[t,e,i]}function LV(t,e=se()){const i=Math.min(3,t.length);for(let n=0;n<i;++n)e[n]=t[n];return e}function cR(t,e){return new Float64Array(t,e,3)}function uR(){return se()}function dR(){return kn(1,1,1)}function hR(){return kn(1,0,0)}function pR(){return kn(0,1,0)}function fR(){return kn(0,0,1)}const PV=uR(),RV=dR(),NV=hR(),DV=pR(),mR=fR();Object.freeze(Object.defineProperty({__proto__:null,ONES:RV,UNIT_X:NV,UNIT_Y:DV,UNIT_Z:mR,ZEROS:PV,clone:tr,create:se,createView:cR,fromArray:LV,fromValues:kn,ones:dR,unitX:hR,unitY:pR,unitZ:fR,zeros:uR},Symbol.toStringTag,{value:"Module"}));let ZT=1e-6;function Vi(){return ZT}function FV(t){ZT=t}const O1=Math.random,zV=Math.PI/180,jV=180/Math.PI;function KT(t){return t*zV}function GV(t){return t*jV}function UV(t,e){return Math.abs(t-e)<=ZT*Math.max(1,Math.abs(t),Math.abs(e))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:O1,equals:UV,getEpsilon:Vi,setEpsilon:FV,toDegree:GV,toRadian:KT},Symbol.toStringTag,{value:"Module"}));function ks(t){const e=t[0],i=t[1],n=t[2];return Math.sqrt(e*e+i*i+n*n)}function In(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function xi(t,e,i,n){return t[0]=e,t[1]=i,t[2]=n,t}function Do(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t}function kt(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t}function gR(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t}function yR(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t}function HV(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function VV(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function BV(t,e){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t}function qV(t,e){return t[0]=Math.sign(e[0]),t[1]=Math.sign(e[1]),t[2]=Math.sign(e[2]),t}function WV(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t}function ZV(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t}function KV(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function Dr(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function Kn(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t}function Cp(t,e){const i=e[0]-t[0],n=e[1]-t[1],r=e[2]-t[2];return Math.sqrt(i*i+n*n+r*r)}function sd(t,e){const i=e[0]-t[0],n=e[1]-t[1],r=e[2]-t[2];return i*i+n*n+r*r}function Mg(t){const e=t[0],i=t[1],n=t[2];return e*e+i*i+n*n}function JV(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function YV(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function Mo(t,e){const i=e[0],n=e[1],r=e[2];let s=i*i+n*n+r*r;return s>0&&(s=1/Math.sqrt(s),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s),t}function qe(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Ms(t,e,i){const n=e[0],r=e[1],s=e[2],o=i[0],a=i[1],l=i[2];return t[0]=r*l-s*a,t[1]=s*o-n*l,t[2]=n*a-r*o,t}function JT(t,e,i,n){const r=e[0],s=e[1],o=e[2];return t[0]=r+n*(i[0]-r),t[1]=s+n*(i[1]-s),t[2]=o+n*(i[2]-o),t}function XV(t,e,i,n,r,s){const o=s*s,a=o*(2*s-3)+1,l=o*(s-2)+s,u=o*(s-1),p=o*(3-2*s);return t[0]=e[0]*a+i[0]*l+n[0]*u+r[0]*p,t[1]=e[1]*a+i[1]*l+n[1]*u+r[1]*p,t[2]=e[2]*a+i[2]*l+n[2]*u+r[2]*p,t}function QV(t,e,i,n,r,s){const o=1-s,a=o*o,l=s*s,u=a*o,p=3*s*a,f=3*l*o,m=l*s;return t[0]=e[0]*u+i[0]*p+n[0]*f+r[0]*m,t[1]=e[1]*u+i[1]*p+n[1]*f+r[1]*m,t[2]=e[2]*u+i[2]*p+n[2]*f+r[2]*m,t}function eB(t,e){e=e||1;const i=O1,n=2*i()*Math.PI,r=2*i()-1,s=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*s,t[1]=Math.sin(n)*s,t[2]=r*e,t}function vR(t,e,i){const n=e[0],r=e[1],s=e[2];return t[0]=i[0]*n+i[4]*r+i[8]*s+i[12],t[1]=i[1]*n+i[5]*r+i[9]*s+i[13],t[2]=i[2]*n+i[6]*r+i[10]*s+i[14],t}function tB(t,e,i){const n=e[0],r=e[1],s=e[2];return t[0]=n*i[0]+r*i[3]+s*i[6],t[1]=n*i[1]+r*i[4]+s*i[7],t[2]=n*i[2]+r*i[5]+s*i[8],t}function iB(t,e,i){const n=i[0],r=i[1],s=i[2],o=i[3],a=e[0],l=e[1],u=e[2];let p=r*u-s*l,f=s*a-n*u,m=n*l-r*a,g=r*m-s*f,y=s*p-n*m,v=n*f-r*p;const b=2*o;return p*=b,f*=b,m*=b,g*=2,y*=2,v*=2,t[0]=a+p+g,t[1]=l+f+y,t[2]=u+m+v,t}function nB(t,e,i,n){const r=[],s=[];return r[0]=e[0]-i[0],r[1]=e[1]-i[1],r[2]=e[2]-i[2],s[0]=r[0],s[1]=r[1]*Math.cos(n)-r[2]*Math.sin(n),s[2]=r[1]*Math.sin(n)+r[2]*Math.cos(n),t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t}function rB(t,e,i,n){const r=[],s=[];return r[0]=e[0]-i[0],r[1]=e[1]-i[1],r[2]=e[2]-i[2],s[0]=r[2]*Math.sin(n)+r[0]*Math.cos(n),s[1]=r[1],s[2]=r[2]*Math.cos(n)-r[0]*Math.sin(n),t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t}function sB(t,e,i,n){const r=[],s=[];return r[0]=e[0]-i[0],r[1]=e[1]-i[1],r[2]=e[2]-i[2],s[0]=r[0]*Math.cos(n)-r[1]*Math.sin(n),s[1]=r[0]*Math.sin(n)+r[1]*Math.cos(n),s[2]=r[2],t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t}function oB(t,e){In($y,t),In(xy,e),Mo($y,$y),Mo(xy,xy);const i=qe($y,xy);return i>1?0:i<-1?Math.PI:Math.acos(i)}const $y=se(),xy=se();function aB(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function pt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function bR(t,e){if(t===e)return!0;const i=t[0],n=t[1],r=t[2],s=e[0],o=e[1],a=e[2],l=Vi();return Math.abs(i-s)<=l*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(n-o)<=l*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-a)<=l*Math.max(1,Math.abs(r),Math.abs(a))}function lB(t,e,i){const n=i[0]-e[0],r=i[1]-e[1],s=i[2]-e[2];let o=n*n+r*r+s*s;return o>0?(o=1/Math.sqrt(o),t[0]=n*o,t[1]=r*o,t[2]=s*o,t):(t[0]=0,t[1]=0,t[2]=0,t)}const xn=kt,cB=gR,uB=yR,dB=Cp,hB=sd,pB=ks,ib=Mg;Object.freeze(Object.defineProperty({__proto__:null,abs:BV,add:Do,angle:oB,bezier:QV,ceil:HV,copy:In,cross:Ms,direction:lB,dist:dB,distance:Cp,div:uB,divide:yR,dot:qe,equals:bR,exactEquals:pt,floor:VV,hermite:XV,inverse:YV,len:pB,length:ks,lerp:JT,max:ZV,min:WV,mul:cB,multiply:gR,negate:JV,normalize:Mo,random:eB,rotateX:nB,rotateY:rB,rotateZ:sB,round:KV,scale:Dr,scaleAndAdd:Kn,set:xi,sign:qV,sqrDist:hB,sqrLen:ib,squaredDistance:sd,squaredLength:Mg,str:aB,sub:xn,subtract:kt,transformMat3:tB,transformMat4:vR,transformQuat:iB},Symbol.toStringTag,{value:"Module"}));function nb(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function fB(t,e,i,n,r){return t[0]=e,t[1]=i,t[2]=n,t[3]=r,t}function mB(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t}function wR(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t}function _R(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t[3]=e[3]*i[3],t}function SR(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t[3]=e[3]/i[3],t}function gB(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function yB(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function vB(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t[3]=Math.min(e[3],i[3]),t}function bB(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t[3]=Math.max(e[3],i[3]),t}function wB(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function _B(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t}function SB(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t[3]=e[3]+i[3]*n,t}function $R(t,e){const i=e[0]-t[0],n=e[1]-t[1],r=e[2]-t[2],s=e[3]-t[3];return Math.sqrt(i*i+n*n+r*r+s*s)}function xR(t,e){const i=e[0]-t[0],n=e[1]-t[1],r=e[2]-t[2],s=e[3]-t[3];return i*i+n*n+r*r+s*s}function TR(t){const e=t[0],i=t[1],n=t[2],r=t[3];return Math.sqrt(e*e+i*i+n*n+r*r)}function ER(t){const e=t[0],i=t[1],n=t[2],r=t[3];return e*e+i*i+n*n+r*r}function $B(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function xB(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function TB(t,e){const i=e[0],n=e[1],r=e[2],s=e[3];let o=i*i+n*n+r*r+s*s;return o>0&&(o=1/Math.sqrt(o),t[0]=i*o,t[1]=n*o,t[2]=r*o,t[3]=s*o),t}function EB(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function kB(t,e,i,n){const r=e[0],s=e[1],o=e[2],a=e[3];return t[0]=r+n*(i[0]-r),t[1]=s+n*(i[1]-s),t[2]=o+n*(i[2]-o),t[3]=a+n*(i[3]-a),t}function MB(t,e){const i=O1;let n,r,s,o,a,l;e=e||1;do n=2*i()-1,r=2*i()-1,a=n*n+r*r;while(a>=1);do s=2*i()-1,o=2*i()-1,l=s*s+o*o;while(l>=1);const u=Math.sqrt((1-a)/l);return t[0]=e*n,t[1]=e*r,t[2]=e*s*u,t[3]=e*o*u,t}function CB(t,e,i){const n=e[0],r=e[1],s=e[2],o=e[3];return t[0]=i[0]*n+i[4]*r+i[8]*s+i[12]*o,t[1]=i[1]*n+i[5]*r+i[9]*s+i[13]*o,t[2]=i[2]*n+i[6]*r+i[10]*s+i[14]*o,t[3]=i[3]*n+i[7]*r+i[11]*s+i[15]*o,t}function IB(t,e,i){const n=e[0],r=e[1],s=e[2],o=i[0],a=i[1],l=i[2],u=i[3],p=u*n+a*s-l*r,f=u*r+l*n-o*s,m=u*s+o*r-a*n,g=-o*n-a*r-l*s;return t[0]=p*u+g*-o+f*-l-m*-a,t[1]=f*u+g*-a+m*-o-p*-l,t[2]=m*u+g*-l+p*-a-f*-o,t[3]=e[3],t}function OB(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function AB(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function YT(t,e){const i=t[0],n=t[1],r=t[2],s=t[3],o=e[0],a=e[1],l=e[2],u=e[3],p=Vi();return Math.abs(i-o)<=p*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(n-a)<=p*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-l)<=p*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(s-u)<=p*Math.max(1,Math.abs(s),Math.abs(u))}const LB=wR,PB=_R,RB=SR,NB=$R,DB=xR,FB=TR,zB=ER;Object.freeze(Object.defineProperty({__proto__:null,add:mB,ceil:gB,copy:nb,dist:NB,distance:$R,div:RB,divide:SR,dot:EB,equals:YT,exactEquals:AB,floor:yB,inverse:xB,len:FB,length:TR,lerp:kB,max:bB,min:vB,mul:PB,multiply:_R,negate:$B,normalize:TB,random:MB,round:wB,scale:_B,scaleAndAdd:SB,set:fB,sqrDist:DB,sqrLen:zB,squaredDistance:xR,squaredLength:ER,str:OB,sub:LB,subtract:wR,transformMat4:CB,transformQuat:IB},Symbol.toStringTag,{value:"Module"}));const hC=new Float32Array(1);function fwe(t){--t;for(let e=1;e<32;e<<=1)t|=t>>e;return t+1}function Ar(t,e,i){return Math.min(Math.max(t,e),i)}function mwe(t){return(t&t-1)==0}function gwe(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}function jB(t,e,i){return t+(e-t)*i}function ywe(t,e,i,n,r){return jB(n,r,(t-e)/(i-e))}function $f(t){return t*Math.PI/180}function kR(t){return 180*t/Math.PI}function vwe(t,e=1e-6){return(t<0?-1:1)/Math.max(Math.abs(t),e)}function MR(t){return Math.acos(Ar(t,-1,1))}function CR(t){return Math.asin(Ar(t,-1,1))}function $o(t,e,i=1e-6){return t===e?!0:!Number.isFinite(t)||!Number.isFinite(e)?!1:(t>e?t-e:e-t)<=i}const rb=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function GB(t){return rb.setFloat64(0,t),rb.getBigInt64(0)}function UB(t){return rb.setBigInt64(0,t),rb.getFloat64(0)}const t_=BigInt("1000000");HB(1);function HB(t){const e=GB(t=Math.abs(t)),i=UB(e<=t_?t_:e-t_);return Math.abs(t-i)}function VB(t,e,i=1e-6){if(t===e)return!0;if(!Number.isFinite(t)||!Number.isFinite(e))return!1;const n=Math.abs(t-e),r=Math.abs(t),s=Math.abs(e);if(t===0||e===0||r<1e-12&&s<1e-12){if(n>.01*i)return!1}else if(n/(r+s)>i)return!1;return!0}function BB(t){return IR(Math.max(-h$,Math.min(t,h$)))}function IR(t){return hC[0]=t,hC[0]}function pC(t,e){const i=ks(t),n=CR(t[2]/i),r=Math.atan2(t[1]/i,t[0]/i);return xi(e,i,n,r),e}function bwe(t){const e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[3]*t[3]+t[4]*t[4]+t[5]*t[5],n=t[6]*t[6]+t[7]*t[7]+t[8]*t[8];return!($o(e,1)&&$o(i,1)&&$o(n,1))}const h$=IR(34028234663852886e22);let XT=class{constructor(e,i){this.min=e,this.max=i,this.range=i-e}ndiff(e,i=0){return Math.ceil((e-i)/this.range)*this.range+i}_normalize(e,i,n,r=0,s=!1){return(n-=r)<e?n+=this.ndiff(e-n):n>i&&(n-=this.ndiff(n-i)),s&&n===i&&(n=e),n+r}normalize(e,i=0,n=!1){return this._normalize(this.min,this.max,e,i,n)}clamp(e,i=0){return Ar(e-i,this.min,this.max)+i}monotonic(e,i,n){return e<i?i:i+this.ndiff(e-i,n)}minimalMonotonic(e,i,n){return this._normalize(e,e+this.range,i,n)}center(e,i,n){return i=this.monotonic(e,i,n),this.normalize((e+i)/2,n)}diff(e,i,n){return this.monotonic(e,i,n)-e}shortestSignedDiff(e,i){e=this.normalize(e);const n=(i=this.normalize(i))-e,r=i<e?this.minimalMonotonic(e,i)-e:i-this.minimalMonotonic(i,e);return Math.abs(n)<Math.abs(r)?n:r}contains(e,i,n){return i=this.minimalMonotonic(e,i),(n=this.minimalMonotonic(e,n))>e&&n<i}};function QT(t){for(const e in t){const i=t[e];i instanceof Function&&(t[e]=i.bind(t))}return t}QT(new XT(0,2*Math.PI));const _we=QT(new XT(-Math.PI,Math.PI)),qB=QT(new XT(0,360)),WB=Object.prototype.toString;function ZB(t){const e="__accessorMetadata__"in t?ti(t):t;return function(...i){if(i.push(e),typeof i[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return KB.apply(this,i)}}function KB(t,e,i,n){b1(t,e).cast=n}function JB(t){return(e,i)=>{b1(e,t).cast=e[i]}}function zt(...t){if(t.length!==3||typeof t[1]!="string")return t.length===1&&WB.call(t[0])==="[object Function]"?ZB(t[0]):t.length===1&&typeof t[0]=="string"?JB(t[0]):void 0}function Ne(t,e,i){let n,r;return e===void 0||Array.isArray(e)?(r=t,i=e,n=[void 0]):(r=e,n=Array.isArray(t)?t:[t]),(s,o)=>{const a=s.constructor.prototype;n.forEach(l=>{const u=bP(s,l,r);u.read&&typeof u.read=="object"||(u.read={}),u.read.reader=a[o],i&&(u.read.source=(u.read.source||[]).concat(i))})}}let Zs=class extends ie{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=xe.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,i){if(e instanceof xe)return e;if(e!=null){const n=new xe;return n.read(e,i),n}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,i){this.cache[e]=i}};c([d()],Zs.prototype,"type",void 0),c([d({readOnly:!0})],Zs.prototype,"cache",null),c([d({readOnly:!0})],Zs.prototype,"extent",null),c([d({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Zs.prototype,"hasM",void 0),c([d({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Zs.prototype,"hasZ",void 0),c([d({type:xe,json:{write:!0},value:xe.WGS84})],Zs.prototype,"spatialReference",void 0),c([Ne("spatialReference")],Zs.prototype,"readSpatialReference",null),Zs=c([S("esri.geometry.Geometry")],Zs);const xc=Zs;function YB(t,e){const i=t.x-e.x,n=t.y-e.y,r=t.hasZ&&e.hasZ?t.z-e.z:0;return Math.sqrt(i*i+n*n+r*r)}var R0;const Yp=[0,0];function fC(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let Bi=R0=class extends xc{static copy(t,e){e._set("x",t._get("x")),e._set("y",t._get("y")),e._set("z",t._get("z")),e._set("m",t._get("m"));const i=t._get("spatialReference");e._set("spatialReference",Object.isFrozen(i)?i:i.clone())}constructor(...t){super(...t),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(t,e,i,n,r){let s;if(Array.isArray(t))s=t,r=e,t=s[0],e=s[1],i=s[2],n=s[3];else if(t&&typeof t=="object"){if(s=t,t=s.x!=null?s.x:s.longitude,e=s.y!=null?s.y:s.latitude,i=s.z,n=s.m,(r=s.spatialReference)&&r.declaredClass!=="esri.geometry.SpatialReference"&&(r=new xe(r)),s.longitude!=null||s.latitude!=null){if(s.longitude==null)J.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(s.latitude==null)J.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!s.declaredClass&&r&&r.isWebMercator){const a=Ih(s.longitude,s.latitude,Yp);t=a[0],e=a[1]}}}else fC(i)?(r=i,i=null):fC(n)&&(r=n,n=null);const o={x:t,y:e};return o.x==null&&o.y!=null?J.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):o.y==null&&o.x!=null&&J.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),r!=null&&(o.spatialReference=r),i!=null&&(o.z=i),n!=null&&(o.m=n),o}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(t){t!==(this._get("m")!==void 0)&&(this._set("m",t?0:void 0),this._set("hasM",t))}get hasZ(){return this.z!==void 0}set hasZ(t){t!==(this._get("z")!==void 0)&&(this._set("z",t?0:void 0),this._set("hasZ",t))}get latitude(){const{spatialReference:t,x:e,y:i}=this;if(t){if(t.isWebMercator)return wm(e,i,Yp)[1];if(t.isGeographic)return i}return null}set latitude(t){const{spatialReference:e,x:i}=this;t!=null&&e&&(e.isWebMercator?this._set("y",Ih(i,t,Yp)[1]):e.isGeographic&&this._set("y",t),this._set("latitude",t))}get longitude(){const{x:t,y:e,spatialReference:i}=this;if(i){if(i.isWebMercator)return wm(t,e,Yp)[0];if(i.isGeographic)return t}return null}set longitude(t){const{y:e,spatialReference:i}=this;t!=null&&i&&(i.isWebMercator?this._set("x",Ih(t,e,Yp)[0]):i.isGeographic&&this._set("x",t),this._set("longitude",t))}writeX(t,e,i){e[i]=isNaN(t)?"NaN":t}readX(t){return typeof t=="string"?NaN:t}clone(){const t=new R0;return t.x=this.x,t.y=this.y,t.z=this.z,t.m=this.m,t.spatialReference=this.spatialReference,t}copy(t){return R0.copy(t,this),this}equals(t){if(t==null)return!1;const{x:e,y:i,z:n,m:r,spatialReference:s}=this,{z:o,m:a}=t;let{x:l,y:u,spatialReference:p}=t;if(!s.equals(p))if(s.isWebMercator&&p.isWGS84)[l,u]=Ih(l,u),p=s;else{if(!s.isWGS84||!p.isWebMercator)return!1;[l,u]=wm(l,u),p=s}return e===l&&i===u&&n===o&&r===a&&s.wkid===p.wkid}offset(t,e,i){return this.x+=t,this.y+=e,i!=null&&(this.z=(this.z??0)+i),this}normalize(){if(!this.spatialReference)return this;const t=En(this.spatialReference);if(!t)return this;let e=this.x;const[i,n]=t.valid,r=2*n;let s;return e>n?(s=Math.ceil(Math.abs(e-n)/r),e-=s*r):e<i&&(s=Math.ceil(Math.abs(e-i)/r),e+=s*r),this._set("x",e),this}distance(t){return YB(this,t)}toArray(){const t=this.hasZ,e=this.hasM;return t&&e?[this.x,this.y,this.z,this.m]:t?[this.x,this.y,this.z]:e?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(t){return this.write({},t)}};c([d({readOnly:!0})],Bi.prototype,"cache",null),c([d({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Bi.prototype,"hasM",null),c([d({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Bi.prototype,"hasZ",null),c([d({type:Number})],Bi.prototype,"latitude",null),c([d({type:Number})],Bi.prototype,"longitude",null),c([d({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),zt(t=>isNaN(t)?t:gs(t))],Bi.prototype,"x",void 0),c([Ie("x")],Bi.prototype,"writeX",null),c([Ne("x")],Bi.prototype,"readX",null),c([d({type:Number,json:{write:!0}})],Bi.prototype,"y",void 0),c([d({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Bi.prototype,"z",void 0),c([d({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],Bi.prototype,"m",void 0),Bi=R0=c([S("esri.geometry.Point")],Bi),Bi.prototype.toJSON.isDefaultToJSON=!0;const he=Bi;let sa=class extends No(ie){constructor(...e){super(...e),this.position=new he([0,0,0]),this.heading=0,this.tilt=0,this.fov=55}normalizeCtorArgs(e,i,n,r){if(e&&typeof e=="object"&&("x"in e||Array.isArray(e))){const s={position:e};return i!=null&&(s.heading=i),n!=null&&(s.tilt=n),r!=null&&(s.fov=r),s}return e}writePosition(e,i,n,r){const s=e.clone();s.x=gs(e.x||0),s.y=gs(e.y||0),s.z=e.hasZ?gs(e.z||0):e.z,i[n]=s.write({},r)}readPosition(e,i){const n=new he;return n.read(e,i),n.x=gs(n.x||0),n.y=gs(n.y||0),n.z=n.hasZ?gs(n.z||0):n.z,n}equals(e){return e!=null&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)}};c([d({type:he,json:{write:{isRequired:!0}}})],sa.prototype,"position",void 0),c([Ie("position")],sa.prototype,"writePosition",null),c([Ne("position")],sa.prototype,"readPosition",null),c([d({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),zt(t=>qB.normalize(gs(t)))],sa.prototype,"heading",void 0),c([d({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),zt(t=>Ar(gs(t),-180,180))],sa.prototype,"tilt",void 0),c([d({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],sa.prototype,"fov",void 0),sa=c([S("esri.Camera")],sa);const XB=sa,i_=[0,0];function A1(t,e){return e!=null&&Ji(t,e.x,e.y,e.z)}function xwe(t,e){if(!e.points||e.points.length)return!1;for(const i of e.points)if(!rp(t,i))return!1;return!0}function QB(t,e){const{xmin:i,ymin:n,zmin:r,xmax:s,ymax:o,zmax:a}=e;return t.hasZ&&e.hasZ?Ji(t,i,n,r)&&Ji(t,i,o,r)&&Ji(t,s,o,r)&&Ji(t,s,n,r)&&Ji(t,i,n,a)&&Ji(t,i,o,a)&&Ji(t,s,o,a)&&Ji(t,s,n,a):Ji(t,i,n)&&Ji(t,i,o)&&Ji(t,s,o)&&Ji(t,s,n)}function rp(t,e){return Ji(t,e[0],e[1])}function eq(t,e){return Ji(t,e[0],e[1],e[2])}function Ji(t,e,i,n){return e>=t.xmin&&e<=t.xmax&&i>=t.ymin&&i<=t.ymax&&(n==null||!t.hasZ||n>=t.zmin&&n<=t.zmax)}function OR(t,e){return i_[1]=e.y,i_[0]=e.x,tq(t,i_)}function tq(t,e){return AR(t.rings,e)}function AR(t,e){if(!t)return!1;if(iq(t))return mC(!1,t,e);let i=!1;for(let n=0,r=t.length;n<r;n++)i=mC(i,t[n],e);return i}function iq(t){return!Array.isArray(t[0][0])}function mC(t,e,i){const[n,r]=i;let s=t,o=0;for(let a=0,l=e.length;a<l;a++){o++,o===l&&(o=0);const[u,p]=e[a],[f,m]=e[o];(p<r&&m>=r||m<r&&p>=r)&&u+(r-p)/(m-p)*(f-u)<n&&(s=!s)}return s}function nq(t,e){return A1(t,e)}function rq(t,e){const i=t.hasZ&&e.hasZ;let n,r,s;if(t.xmin<=e.xmin){if(n=e.xmin,t.xmax<n)return!1}else if(n=t.xmin,e.xmax<n)return!1;if(t.ymin<=e.ymin){if(r=e.ymin,t.ymax<r)return!1}else if(r=t.ymin,e.ymax<r)return!1;if(i&&e.hasZ){if(t.zmin<=e.zmin){if(s=e.zmin,t.zmax<s)return!1}else if(s=t.zmin,e.zmax<s)return!1}return!0}function sq(t,e){const{points:i,hasZ:n}=e,r=n?eq:rp;for(const s of i)if(r(t,s))return!0;return!1}const od=[0,0],ad=[0,0],ld=[0,0],cd=[0,0],oq=[od,ad,ld,cd],LR=[[ld,od],[od,ad],[ad,cd],[cd,ld]];function aq(t,e){return lq(t,e.rings)}function lq(t,e){od[0]=t.xmin,od[1]=t.ymax,ad[0]=t.xmax,ad[1]=t.ymax,ld[0]=t.xmin,ld[1]=t.ymin,cd[0]=t.xmax,cd[1]=t.ymin;for(const i of oq)if(AR(e,i))return!0;for(const i of e){if(!i.length)continue;let n=i[0];if(rp(t,n))return!0;for(let r=1;r<i.length;r++){const s=i[r];if(rp(t,s)||PR(n,s,LR))return!0;n=s}}return!1}function cq(t,e){od[0]=t.xmin,od[1]=t.ymax,ad[0]=t.xmax,ad[1]=t.ymax,ld[0]=t.xmin,ld[1]=t.ymin,cd[0]=t.xmax,cd[1]=t.ymin;const i=e.paths;for(const n of i){if(!i.length)continue;let r=n[0];if(rp(t,r))return!0;for(let s=1;s<n.length;s++){const o=n[s];if(rp(t,o)||PR(r,o,LR))return!0;r=o}}return!1}const oi=[0,0];function uq(t){for(let e=0;e<t.length;e++){const i=t[e];for(let r=0;r<i.length-1;r++){const s=i[r],o=i[r+1];for(let a=e+1;a<t.length;a++)for(let l=0;l<t[a].length-1;l++){const u=t[a][l],p=t[a][l+1];if(p$(s,o,u,p,oi)&&!(oi[0]===s[0]&&oi[1]===s[1]||oi[0]===u[0]&&oi[1]===u[1]||oi[0]===o[0]&&oi[1]===o[1]||oi[0]===p[0]&&oi[1]===p[1]))return!0}}const n=i.length;if(!(n<=4))for(let r=0;r<n-3;r++){let s=n-1;r===0&&(s=n-2);const o=i[r],a=i[r+1];for(let l=r+2;l<s;l++){const u=i[l],p=i[l+1];if(p$(o,a,u,p,oi)&&!(oi[0]===o[0]&&oi[1]===o[1]||oi[0]===u[0]&&oi[1]===u[1]||oi[0]===a[0]&&oi[1]===a[1]||oi[0]===p[0]&&oi[1]===p[1]))return!0}}}return!1}function PR(t,e,i){for(let n=0;n<i.length;n++)if(p$(t,e,i[n][0],i[n][1]))return!0;return!1}function p$(t,e,i,n,r){const[s,o]=t,[a,l]=e,[u,p]=i,[f,m]=n,g=f-u,y=s-u,v=a-s,b=m-p,_=o-p,$=l-o,x=b*v-g*$;if(x===0)return!1;const E=(g*_-b*y)/x,C=(v*_-$*y)/x;return E>=0&&E<=1&&C>=0&&C<=1&&(r&&(r[0]=s+E*(a-s),r[1]=o+E*(l-o)),!0)}function dq(t){switch(t){case"esriGeometryEnvelope":case"extent":return rq;case"esriGeometryMultipoint":case"multipoint":return sq;case"esriGeometryPoint":case"point":return nq;case"esriGeometryPolygon":case"polygon":return aq;case"esriGeometryPolyline":case"polyline":return cq}}var cr;function hq(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}function il(t,e,i){return e==null?i:i==null?e:t(e,i)}let Yt=cr=class extends xc{constructor(...t){super(...t),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(t,e,i,n,r){return hq(t)?{spatialReference:t,xmin:0,ymin:0,xmax:0,ymax:0}:typeof t=="object"?(t.spatialReference=t.spatialReference==null?xe.WGS84:t.spatialReference,t):{xmin:t,ymin:e,xmax:i,ymax:n,spatialReference:r??xe.WGS84}}static fromBounds(t,e){return new cr({xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3],spatialReference:e})}static fromPoint(t){return new cr({xmin:t.x,ymin:t.y,zmin:t.z,xmax:t.x,ymax:t.y,zmax:t.z,spatialReference:t.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const t=new he({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(t.z=.5*(this.zmin+this.zmax)),this.hasM&&(t.m=.5*(this.mmin+this.mmax)),t}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(t){const e=this.center;return t.z!=null&&this.hasZ?this.offset(t.x-e.x,t.y-e.y,t.z-e.z):this.offset(t.x-e.x,t.y-e.y)}clone(){const t=new cr;return t.xmin=this.xmin,t.ymin=this.ymin,t.xmax=this.xmax,t.ymax=this.ymax,t.spatialReference=this.spatialReference,this.zmin!=null&&(t.zmin=this.zmin,t.zmax=this.zmax),this.mmin!=null&&(t.mmin=this.mmin,t.mmax=this.mmax),t}contains(t){if(!t)return!1;const e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&P0(e,i)&&(t=e.isWebMercator?Na(t):Xl(t,!0)),t.type==="point"?A1(this,t):t.type==="extent"&&QB(this,t)}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&P0(e,i)&&(t=e.isWebMercator?Na(t):Xl(t,!0)),this.xmin===t.xmin&&this.ymin===t.ymin&&this.zmin===t.zmin&&this.mmin===t.mmin&&this.xmax===t.xmax&&this.ymax===t.ymax&&this.zmax===t.zmax&&this.mmax===t.mmax}expand(t){const e=.5*(1-t),i=this.width*e,n=this.height*e;if(this.xmin+=i,this.ymin+=n,this.xmax-=i,this.ymax-=n,this.hasZ){const r=(this.zmax-this.zmin)*e;this.zmin+=r,this.zmax-=r}if(this.hasM){const r=(this.mmax-this.mmin)*e;this.mmin+=r,this.mmax-=r}return this}intersects(t){if(t==null)return!1;t.type==="mesh"&&(t=t.extent);const e=this.spatialReference,i=t.spatialReference;return e&&i&&!xt(e,i)&&P0(e,i)&&(t=e.isWebMercator?Na(t):Xl(t,!0)),dq(t.type)(this,t)}normalize(){const t=this._normalize(!1,!0);return Array.isArray(t)?t:[t]}offset(t,e,i){return this.xmin+=t,this.ymin+=e,this.xmax+=t,this.ymax+=e,i!=null&&(this.zmin+=i,this.zmax+=i),this}shiftCentralMeridian(){return this._normalize(!0)}union(t){return this===t||(this.xmin=Math.min(this.xmin,t.xmin),this.ymin=Math.min(this.ymin,t.ymin),this.xmax=Math.max(this.xmax,t.xmax),this.ymax=Math.max(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=il(Math.min,this.zmin,t.zmin),this.zmax=il(Math.max,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=il(Math.min,this.mmin,t.mmin),this.mmax=il(Math.max,this.mmax,t.mmax))),this}intersection(t){return this===t?this:t!=null&&this.intersects(t)?(this.xmin=Math.max(this.xmin,t.xmin),this.ymin=Math.max(this.ymin,t.ymin),this.xmax=Math.min(this.xmax,t.xmax),this.ymax=Math.min(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=il(Math.max,this.zmin,t.zmin),this.zmax=il(Math.min,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=il(Math.max,this.mmin,t.mmin),this.mmax=il(Math.min,this.mmax,t.mmax)),this):null}toJSON(t){return this.write({},t)}_shiftCM(t=En(this.spatialReference)){if(!t||!this.spatialReference)return this;const e=this.spatialReference,i=this._getCM(t);if(i){const n=e.isWebMercator?Xl(i):i;this.xmin-=i.x,this.xmax-=i.x,e.isWebMercator||(n.x=this._normalizeX(n.x,t).x),this.spatialReference=new xe(bT((e.isWGS84?t.altTemplate:null)??t.wkTemplate,{Central_Meridian:n.x}))}return this}_getCM(t){let e=null;const[i,n]=t.valid,r=this.xmin,s=this.xmax;return r>=i&&r<=n&&s>=i&&s<=n||(e=this.center),e}_normalize(t,e,i){const n=this.spatialReference;if(!n)return this;const r=i??En(n);if(r==null)return this;const s=this._getParts(r).map(l=>l.extent);if(s.length<2)return s[0]||this;if(s.length>2)return t?this._shiftCM(r):this.set({xmin:r.valid[0],xmax:r.valid[1]});if(t)return this._shiftCM(r);if(e)return s;let o=!0,a=!0;return s.forEach(l=>{l.hasZ||(o=!1),l.hasM||(a=!1)}),{rings:s.map(l=>{const u=[[l.xmin,l.ymin],[l.xmin,l.ymax],[l.xmax,l.ymax],[l.xmax,l.ymin],[l.xmin,l.ymin]];if(o){const p=(l.zmax-l.zmin)/2;for(let f=0;f<u.length;f++)u[f].push(p)}if(a){const p=(l.mmax-l.mmin)/2;for(let f=0;f<u.length;f++)u[f].push(p)}return u}),hasZ:o,hasM:a,spatialReference:n}}_getParts(t){let e=this.cache._parts;if(!e){e=[];const{ymin:r,ymax:s,spatialReference:o}=this,a=this.width,l=this.xmin,u=this.xmax;let p;t=t||En(o);const[f,m]=t.valid;p=this._normalizeX(this.xmin,t);const g=p.x,y=p.frameId;p=this._normalizeX(this.xmax,t);const v=p.x,b=p.frameId,_=g===v&&a>0;if(a>2*m){const $=new cr(l<u?g:v,r,m,s,o),x=new cr(f,r,l<u?v:g,s,o),E=new cr(0,r,m,s,o),C=new cr(f,r,0,s,o),M=[],N=[];$.contains(E)&&M.push(y),$.contains(C)&&N.push(y),x.contains(E)&&M.push(b),x.contains(C)&&N.push(b);for(let G=y+1;G<b;G++)M.push(G),N.push(G);e.push({extent:$,frameIds:[y]},{extent:x,frameIds:[b]},{extent:E,frameIds:M},{extent:C,frameIds:N})}else g>v||_?e.push({extent:new cr(g,r,m,s,o),frameIds:[y]},{extent:new cr(f,r,v,s,o),frameIds:[b]}):e.push({extent:new cr(g,r,v,s,o),frameIds:[y]});this.cache._parts=e}const i=this.hasZ,n=this.hasM;if(i||n){const r={};i&&(r.zmin=this.zmin,r.zmax=this.zmax),n&&(r.mmin=this.mmin,r.mmax=this.mmax);for(let s=0;s<e.length;s++)e[s].extent.set(r)}return e}_normalizeX(t,e){const[i,n]=e.valid,r=2*n;let s,o=0;return t>n?(s=Math.ceil(Math.abs(t-n)/r),t-=s*r,o=s):t<i&&(s=Math.ceil(Math.abs(t-i)/r),t+=s*r,o=-s),{x:t,frameId:o}}};c([d({readOnly:!0})],Yt.prototype,"cache",null),c([d({readOnly:!0})],Yt.prototype,"center",null),c([d({readOnly:!0})],Yt.prototype,"extent",null),c([d({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Yt.prototype,"hasM",null),c([d({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Yt.prototype,"hasZ",null),c([d({readOnly:!0})],Yt.prototype,"height",null),c([d({readOnly:!0})],Yt.prototype,"width",null),c([d({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],Yt.prototype,"xmin",void 0),c([d({type:Number,json:{write:!0}})],Yt.prototype,"ymin",void 0),c([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Yt.prototype,"mmin",void 0),c([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Yt.prototype,"zmin",void 0),c([d({type:Number,json:{write:!0}})],Yt.prototype,"xmax",void 0),c([d({type:Number,json:{write:!0}})],Yt.prototype,"ymax",void 0),c([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Yt.prototype,"mmax",void 0),c([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Yt.prototype,"zmax",void 0),Yt=cr=c([S("esri.geometry.Extent")],Yt),Yt.prototype.toJSON.isDefaultToJSON=!0;const Ve=Yt;function sp(t,e,i=!1){let{hasM:n,hasZ:r}=t;Array.isArray(e)?e.length!==4||n||r?e.length===3&&i&&!n?(r=!0,n=!1):e.length===3&&n&&r&&(n=!1,r=!1):(n=!0,r=!0):(r=!r&&e.hasZ&&(!n||e.hasM),n=!n&&e.hasM&&(!r||e.hasZ)),t.hasZ=r,t.hasM=n}var f$;function gC(t){return(e,i)=>e==null?i:i==null?e:t(e,i)}function pq(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let pl=f$=class extends xc{constructor(...t){super(...t),this.points=[],this.type="multipoint"}normalizeCtorArgs(t,e){var r;if(!t&&!e)return{};const i={};Array.isArray(t)?(i.points=t,i.spatialReference=e):pq(t)?i.spatialReference=t:(t.points&&(i.points=t.points),t.spatialReference&&(i.spatialReference=t.spatialReference),t.hasZ&&(i.hasZ=t.hasZ),t.hasM&&(i.hasM=t.hasM));const n=(r=i.points)==null?void 0:r[0];return n&&(i.hasZ===void 0&&i.hasM===void 0?(i.hasZ=n.length>2,i.hasM=!1):i.hasZ===void 0?i.hasZ=n.length>3:i.hasM===void 0&&(i.hasM=n.length>3)),i}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const t=this.points;if(!t.length)return null;const e=new Ve,i=this.hasZ,n=this.hasM,r=i?3:2,s=t[0],o=gC(Math.min),a=gC(Math.max);let l,u,p,f,[m,g]=s,[y,v]=s;for(let b=0,_=t.length;b<_;b++){const $=t[b],[x,E]=$;if(m=o(m,x),g=o(g,E),y=a(y,x),v=a(v,E),i&&$.length>2){const C=$[2];l=o(l,C),p=a(p,C)}if(n&&$.length>r){const C=$[r];u=o(u,C),f=a(f,C)}}return e.xmin=m,e.ymin=g,e.xmax=y,e.ymax=v,e.spatialReference=this.spatialReference,i?(e.zmin=l,e.zmax=p):(e.zmin=void 0,e.zmax=void 0),n?(e.mmin=u,e.mmax=f):(e.mmin=void 0,e.mmax=void 0),e}writePoints(t,e){e.points=q(this.points)}addPoint(t){return sp(this,t),Array.isArray(t)?this.points.push(t):this.points.push(t.toArray()),this.notifyChange("points"),this}clone(){const t={points:q(this.points),spatialReference:this.spatialReference};return this.hasZ&&(t.hasZ=!0),this.hasM&&(t.hasM=!0),new f$(t)}getPoint(t){if(!this._validateInputs(t))return null;const e=this.points[t],i={x:e[0],y:e[1],spatialReference:this.spatialReference};let n=2;return this.hasZ&&(i.z=e[2],n=3),this.hasM&&(i.m=e[n]),new he(i)}removePoint(t){if(!this._validateInputs(t))return null;const e=new he(this.points.splice(t,1)[0],this.spatialReference);return this.notifyChange("points"),e}setPoint(t,e){return this._validateInputs(t)?(sp(this,e),Array.isArray(e)||(e=e.toArray()),this.points[t]=e,this.notifyChange("points"),this):this}toJSON(t){return this.write({},t)}_validateInputs(t){return t!=null&&t>=0&&t<this.points.length}};c([d({readOnly:!0})],pl.prototype,"cache",null),c([d()],pl.prototype,"extent",null),c([d({type:[[Number]],json:{write:{isRequired:!0}}})],pl.prototype,"points",void 0),c([Ie("points")],pl.prototype,"writePoints",null),pl=f$=c([S("esri.geometry.Multipoint")],pl),pl.prototype.toJSON.isDefaultToJSON=!0;const L1=pl;function Twe(t){const e=[];for(t.reset();t.nextPath();){const i=[];for(;t.nextPoint();)i.push([t.x,t.y]);e.push(i)}return t.reset(),e}function fq(t){const e=[];for(;t.nextPoint();)e.push([t.x,t.y]);return t.seekPathStart(),e}var ic;(function(t){t[t.X=0]="X",t[t.Y=1]="Y",t[t.Z=2]="Z"})(ic||(ic={}));function yC(t){if(!t)return null;if(Array.isArray(t))return t;const e=t.hasZ,i=t.hasM;if(t.type==="point")return i&&e?[t.x,t.y,t.z,t.m]:e?[t.x,t.y,t.z]:i?[t.x,t.y,t.m]:[t.x,t.y];if(t.type==="polygon")return t.rings.slice(0);if(t.type==="polyline")return t.paths.slice(0);if(t.type==="multipoint")return t.points.slice(0);if(t.type==="extent"){const n=t.clone().normalize();if(!n)return null;let r=!1,s=!1;return n.forEach(o=>{o.hasZ&&(r=!0),o.hasM&&(s=!0)}),n.map(o=>{const a=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(r&&o.hasZ){const l=.5*(o.zmax-o.zmin);for(let u=0;u<a.length;u++)a[u].push(l)}if(s&&o.hasM){const l=.5*(o.mmax-o.mmin);for(let u=0;u<a.length;u++)a[u].push(l)}return a})}return null}function P1(t,e){const i=e[0]-t[0],n=e[1]-t[1];if(t.length>2&&e.length>2){const r=t[2]-e[2];return Math.sqrt(i*i+n*n+r*r)}return Math.sqrt(i*i+n*n)}function RR(t,e,i){const n=t[0]+i*(e[0]-t[0]),r=t[1]+i*(e[1]-t[1]);return t.length>2&&e.length>2?[n,r,t[2]+i*(e[2]-t[2])]:[n,r]}function mq(t,e,i,n){return gq(t,e,i[n],i[n+1])}function gq(t,e,i,n){const[r,s]=e,[o,a]=i,[l,u]=n,p=l-o,f=u-a,m=p*p+f*f,g=(r-o)*p+(s-a)*f,y=Math.min(1,Math.max(0,g/m));return t[0]=o+p*y,t[1]=a+f*y,t}function NR(t,e){return RR(t,e,.5)}function Ewe(t){const e=t.length;let i=0;for(let n=0;n<e-1;++n)i+=P1(t[n],t[n+1]);return i}function kwe(t,e){if(e<=0)return t[0];const i=t.length;let n=0;for(let r=0;r<i-1;++r){const s=P1(t[r],t[r+1]);if(e-n<s){const o=(e-n)/s;return RR(t[r],t[r+1],o)}n+=s}return t[i-1]}function DR(t,e=ic.X,i=ic.Y){let n=0;const r=t.length;let s=t[0];for(let o=0;o<r-1;o++){const a=t[o+1];n+=(a[e]-s[e])*(a[i]+s[i]),s=a}return n>=0}function yq(t){const e=t.length;return e>2&&vg(t[0],t[e-1])}function Mwe(t){if("rings"in t&&(vq(t),t.rings.length>0&&!DR(t.rings[0])))for(const e of t.rings)e.reverse()}function vq(t){if("rings"in t)for(const e of t.rings)yq(e)||e.push(e[0].slice())}function Cwe(t){return t.type!=="polygon"&&t.type!=="polyline"||bq(t.type==="polygon"?t.rings:t.paths,t.spatialReference),t}function bq(t,e){const i=En(e);if(!i)return;const n=i.valid[0],r=i.valid[1],s=r-n;for(const o of t){let a=1/0,l=-1/0;for(const p of o){const f=wq(p[0],n,r);a=Math.min(a,f),l=Math.max(l,f),p[0]=f}const u=l-a;s-u<u&&o.forEach(p=>{p[0]<0&&(p[0]+=s)})}}function wq(t,e,i){const n=i-e;return t<e?i-(e-t)%n:t>i?e+(t-e)%n:t}function Iwe(t,e){if(t===e)return!0;if(t.type!==e.type)return!1;if(t.type==="point"||t.type==="mesh"||t.type==="extent")return!0;if(t.type==="multipoint")return t.points.length===e.points.length;const[i,n]=t.type==="polyline"?[t.paths,e.paths]:[t.rings,e.rings];return i.length===n.length&&i.every((r,s)=>r.length===n[s].length)}function Owe(t){return t?t.hasZ?[t.xmax-t.xmin/2,t.ymax-t.ymin/2,t.zmax-t.zmin/2]:[t.xmax-t.xmin/2,t.ymax-t.ymin/2]:null}function _q(t){return t?Sq(t.rings,t.hasZ??!1):null}function Sq(t,e){if(!(t!=null&&t.length))return null;const i=[],n=[],r=e?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let s=0,o=t.length;s<o;s++){const a=FR(t[s],e,r);a&&n.push(a)}if(n.sort((s,o)=>{let a=s[2]-o[2];return a===0&&e&&(a=s[4]-o[4]),a}),n.length&&(i[0]=n[0][0],i[1]=n[0][1],e&&(i[2]=n[0][3]),(i[0]<r[0]||i[0]>r[1]||i[1]<r[2]||i[1]>r[3]||e&&(i[2]<r[4]||i[2]>r[5]))&&(i.length=0)),!i.length){const s=t[0]&&t[0].length?$q(t[0],e):null;if(!s)return null;i[0]=s[0],i[1]=s[1],e&&s.length>2&&(i[2]=s[2])}return i}function FR(t,e,i){let n=0,r=0,s=0,o=0,a=0;const l=t.length?t[0][0]:0,u=t.length?t[0][1]:0,p=t.length&&e?t[0][2]:0;for(let m=0;m<t.length;m++){const g=t[m],y=t[(m+1)%t.length],[v,b,_]=g,$=v-l,x=b-u,[E,C,M]=y,N=E-l,G=C-u,U=$*G-N*x;if(o+=U,n+=($+N)*U,r+=(x+G)*U,e&&g.length>2&&y.length>2){const B=_-p,H=M-p,L=$*H-N*B;s+=(B+H)*L,a+=L}v<i[0]&&(i[0]=v),v>i[1]&&(i[1]=v),b<i[2]&&(i[2]=b),b>i[3]&&(i[3]=b),e&&(_<i[4]&&(i[4]=_),_>i[5]&&(i[5]=_))}if(o>0&&(o*=-1),a>0&&(a*=-1),!o)return null;o*=.5,a*=.5;const f=[n/(6*o)+l,r/(6*o)+u,o];return e&&(i[4]===i[5]||a===0?(f[3]=(i[4]+i[5])/2,f[4]=0):(f[3]=s/(6*a)+p,f[4]=a)),f}function Awe(t,e){let i=0,n=0,r=0;t.nextPoint();const s=t.pathSize?t.x:0,o=t.pathSize?t.y:0;for(let a=0;a<t.pathSize;a++){t.seekInPath(a);const l=[t.x,t.y];t.seekInPath((a+1)%t.pathSize);const u=[t.x,t.y],[p,f]=l,m=p-s,g=f-o,[y,v]=u,b=y-s,_=v-o,$=m*_-b*g;r+=$,i+=(m+b)*$,n+=(g+_)*$,p<e[0]&&(e[0]=p),p>e[1]&&(e[1]=p),f<e[2]&&(e[2]=f),f>e[3]&&(e[3]=f)}return r>0&&(r*=-1),r?(r*=.5,[i/(6*r)+s,n/(6*r)+o,r]):null}function $q(t,e){const i=e?[0,0,0]:[0,0],n=e?[0,0,0]:[0,0];let r=0,s=0,o=0,a=0;for(let l=0,u=t.length;l<u-1;l++){const p=t[l],f=t[l+1];if(p&&f){i[0]=p[0],i[1]=p[1],n[0]=f[0],n[1]=f[1],e&&p.length>2&&f.length>2&&(i[2]=p[2],n[2]=f[2]);const m=P1(i,n);if(m){r+=m;const g=NR(p,f);s+=m*g[0],o+=m*g[1],e&&g.length>2&&(a+=m*g[2])}}}return r>0?e?[s/r,o/r,a/r]:[s/r,o/r]:t.length?t[0]:null}function xq(t){const{hasZ:e,totalSize:i}=t;if(i===0)return null;const n=[],r=[],s=e?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(t.reset();t.nextPath();){const o=FR(fq(t),t.hasZ,s);o&&r.push(o)}if(r.sort((o,a)=>{let l=o[2]-a[2];return l===0&&e&&(l=o[4]-a[4]),l}),r.length&&(n[0]=r[0][0],n[1]=r[0][1],e&&(n[2]=r[0][3]),(n[0]<s[0]||n[0]>s[1]||n[1]<s[2]||n[1]>s[3]||e&&(n[2]<s[4]||n[2]>s[5]))&&(n.length=0)),!n.length){t.reset(),t.nextPath();const o=t.pathSize?Tq(t):null;if(!o)return null;n[0]=o[0],n[1]=o[1],e&&o.length>2&&(n[2]=o[2])}return n}function Tq(t){const{hasZ:e}=t,i=e?[0,0,0]:[0,0],n=e?[0,0,0]:[0,0];let r=0,s=0,o=0,a=0;if(t.nextPoint()){let l=t.x,u=t.y,p=t.z;for(;t.nextPoint();){const f=t.x,m=t.y,g=t.z;i[0]=l,i[1]=u,n[0]=f,n[1]=m,e&&(i[2]=p,n[2]=g);const y=P1(i,n);if(y){r+=y;const v=NR(i,n);s+=y*v[0],o+=y*v[1],e&&v.length>2&&(a+=y*v[2])}l=f,u=m,p=g}}return r>0?e?[s/r,o/r,a/r]:[s/r,o/r]:t.pathSize?(t.seekPathStart(),t.nextPoint(),[t.x,t.y]):null}const Eq=1e-6;function Lwe(t){let e=0;for(t.reset();t.nextPath();)e+=t.getCurrentRingArea();if(e<Eq){const r=xq(t);return r?[r[0],r[1]]:null}const i=[0,0];if(t.reset(),!t.nextPath()||!t.nextPoint())return null;const n=[t.x,t.y];for(t.reset();t.nextPath();)Mq(i,n,t);return i[0]*=1/e,i[1]*=1/e,i[0]+=n[0],i[1]+=n[1],i}const kq=1/3;function Mq(t,e,i){if(!t||!i||i.pathSize<3)return null;i.nextPoint();const n=i.x,r=i.y;i.nextPoint();let s,o=i.x-n,a=i.y-r,l=0,u=0;for(;i.nextPoint();)l=i.x-n,u=i.y-r,s=.5*kq*(l*a-u*o),t[0]+=s*(o+l),t[1]+=s*(a+u),o=l,a=u;const p=i.getCurrentRingArea(),f=[n,r];return f[0]-=e[0],f[1]-=e[1],f[0]*=p,f[1]*=p,t[0]+=f[0],t[1]+=f[1],t}function tn(t=Rq){return[t[0],t[1],t[2],t[3]]}function Pwe(t){return[t[0],t[1],t[2],t[3]]}function zR(t,e){return t!==e&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]),t}function Rwe(t,e,i,n,r=tn()){return r[0]=t,r[1]=e,r[2]=i,r[3]=n,r}function Cq(t,e=tn()){return e[0]=t.xmin,e[1]=t.ymin,e[2]=t.xmax,e[3]=t.ymax,e}function Nwe(t,e){return new Ve({xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3],spatialReference:e})}function Dwe(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function Fwe(t,e,i){if(e!=null)if("length"in e)m$(e)?(i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i[2]=Math.max(t[2],e[2]),i[3]=Math.max(t[3],e[3])):e.length!==2&&e.length!==3||(i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i[2]=Math.max(t[2],e[0]),i[3]=Math.max(t[3],e[1]));else switch(e.type){case"extent":i[0]=Math.min(t[0],e.xmin),i[1]=Math.min(t[1],e.ymin),i[2]=Math.max(t[2],e.xmax),i[3]=Math.max(t[3],e.ymax);break;case"point":i[0]=Math.min(t[0],e.x),i[1]=Math.min(t[1],e.y),i[2]=Math.max(t[2],e.x),i[3]=Math.max(t[3],e.y)}else zR(i,t)}function zwe(t,e,i=t){const n=e.length;let r=t[0],s=t[1],o=t[2],a=t[3];for(let l=0;l<n;l++){const u=e[l];r=Math.min(r,u[0]),s=Math.min(s,u[1]),o=Math.max(o,u[0]),a=Math.max(a,u[1])}return i[0]=r,i[1]=s,i[2]=o,i[3]=a,i}function jwe(t){for(let e=0;e<4;e++)if(!isFinite(t[e]))return!1;return!0}function Iq(t){return t==null||t[0]>=t[2]?0:t[2]-t[0]}function Oq(t){return t==null||t[1]>=t[3]?0:t[3]-t[1]}function Gwe(t){return Iq(t)*Oq(t)}function Uwe(t,e=[0,0]){return e[0]=(t[0]+t[2])/2,e[1]=(t[1]+t[3])/2,e}function Aq(t,e){return jR(t,e[0],e[1])}function Hwe(t,e){return jR(t,e.x,e.y)}function jR(t,e,i){return e>=t[0]&&i>=t[1]&&e<=t[2]&&i<=t[3]}function Lq(t,e,i){return e[0]>=t[0]-i&&e[1]>=t[1]-i&&e[0]<=t[2]+i&&e[1]<=t[3]+i}function Vwe(t,e){return Math.max(e[0],t[0])<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])<=Math.min(e[3],t[3])}function Pq(t,e){return e[0]>=t[0]&&e[2]<=t[2]&&e[1]>=t[1]&&e[3]<=t[3]}function Bwe(t,e,i,n=t){return n[0]=t[0]+e,n[1]=t[1]+i,n[2]=t[2]+e,n[3]=t[3]+i,n}function qwe(t){return t?zR(t,vC):tn(vC)}function m$(t){return t!=null&&t.length===4}function Wwe(t,e){return m$(t)&&m$(e)?t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]:t===e}const vC=[1/0,1/0,-1/0,-1/0],Rq=[0,0,0,0];function GR(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function UR(t){return t.points!==void 0}function HR(t){return t.x!==void 0&&t.y!==void 0}function VR(t){return t.paths!==void 0}function BR(t){return t.rings!==void 0}function qR(t){function e(i,n){return i==null?n:n==null?i:t(i,n)}return e}const Ql=qR(Math.min),ec=qR(Math.max);function Zwe(t,e){return VR(e)?op(t,e.paths,!1,!1):BR(e)?op(t,e.rings,!1,!1):UR(e)?eE(t,e.points,!1,!1,!1,!1):GR(e)?WR(t,e):(HR(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.x,t[3]=e.y),t)}function Kwe(t){let e,i,n,r;for(t.reset(),e=n=1/0,i=r=-1/0;t.nextPath();){const s=Nq(t);e=Math.min(s[0],e),n=Math.min(s[1],n),i=Math.max(s[2],i),r=Math.max(s[3],r)}return tn([e,n,i,r])}function Nq(t){let e,i,n,r;for(e=n=1/0,i=r=-1/0;t.nextPoint();)e=Math.min(t.x,e),n=Math.min(t.y,n),i=Math.max(t.x,i),r=Math.max(t.y,r);return tn([e,n,i,r])}function Jwe(t,e){return VR(e)?op(t,e.paths,!0,!1):BR(e)?op(t,e.rings,!0,!1):UR(e)?eE(t,e.points,!0,!1,!0,!1):GR(e)?WR(t,e,!0,!1,!0,!1):(HR(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.x,t[4]=e.y,t[5]=e.z),t)}function op(t,e,i,n){const r=i?3:2;if(!e.length||!e[0].length)return null;let s,o,a,l,[u,p]=e[0][0],[f,m]=e[0][0];for(let g=0;g<e.length;g++){const y=e[g];for(let v=0;v<y.length;v++){const b=y[v],[_,$]=b;if(u=Ql(u,_),p=Ql(p,$),f=ec(f,_),m=ec(m,$),i&&b.length>2){const x=b[2];s=Ql(s,x),o=ec(o,x)}if(n&&b.length>r){const x=b[r];a=Ql(s,x),l=ec(o,x)}}}return i?n?(t[0]=u,t[1]=p,t[2]=s,t[3]=a,t[4]=f,t[5]=m,t[6]=o,t[7]=l,t.length=8,t):(t[0]=u,t[1]=p,t[2]=s,t[3]=f,t[4]=m,t[5]=o,t.length=6,t):n?(t[0]=u,t[1]=p,t[2]=a,t[3]=f,t[4]=m,t[5]=l,t.length=6,t):(t[0]=u,t[1]=p,t[2]=f,t[3]=m,t.length=4,t)}function WR(t,e,i,n,r,s){const o=e.xmin,a=e.xmax,l=e.ymin,u=e.ymax;let p=e.zmin,f=e.zmax,m=e.mmin,g=e.mmax;return r?(p=p||0,f=f||0,s?(m=m||0,g=g||0,t[0]=o,t[1]=l,t[2]=p,t[3]=m,t[4]=a,t[5]=u,t[6]=f,t[7]=g,t):(t[0]=o,t[1]=l,t[2]=p,t[3]=a,t[4]=u,t[5]=f,t)):s?(m=m||0,g=g||0,t[0]=o,t[1]=l,t[2]=m,t[3]=a,t[4]=u,t[5]=g,t):(t[0]=o,t[1]=l,t[2]=a,t[3]=u,t)}function eE(t,e,i,n,r,s){const o=i?3:2,a=n&&s,l=i&&r;if(!e.length||!e[0].length)return null;let u,p,f,m,[g,y]=e[0],[v,b]=e[0];for(let _=0;_<e.length;_++){const $=e[_],[x,E]=$;if(g=Ql(g,x),y=Ql(y,E),v=ec(v,x),b=ec(b,E),l&&$.length>2){const C=$[2];u=Ql(u,C),p=ec(p,C)}if(a&&$.length>o){const C=$[o];f=Ql(u,C),m=ec(p,C)}}return r?(u=u||0,p=p||0,s?(f=f||0,m=m||0,t[0]=g,t[1]=y,t[2]=u,t[3]=f,t[4]=v,t[5]=b,t[6]=p,t[7]=m,t):(t[0]=g,t[1]=y,t[2]=u,t[3]=v,t[4]=b,t[5]=p,t)):s?(f=f||0,m=m||0,t[0]=g,t[1]=y,t[2]=f,t[3]=v,t[4]=b,t[5]=m,t):(t[0]=g,t[1]=y,t[2]=v,t[3]=b,t)}function Dq(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function Fq(t){return t.points!==void 0}function zq(t){return t.x!==void 0&&t.y!==void 0}function jq(t){return t.paths!==void 0}function Gq(t){return t.rings!==void 0}const tE=[];function ZR(t,e,i,n){return{xmin:t,ymin:e,xmax:i,ymax:n}}function KR(t,e,i,n,r,s){return{xmin:t,ymin:e,zmin:i,xmax:n,ymax:r,zmax:s}}function JR(t,e,i,n,r,s){return{xmin:t,ymin:e,mmin:i,xmax:n,ymax:r,mmax:s}}function YR(t,e,i,n,r,s,o,a){return{xmin:t,ymin:e,zmin:i,mmin:n,xmax:r,ymax:s,zmax:o,mmax:a}}function iE(t,e=!1,i=!1){return e?i?YR(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]):KR(t[0],t[1],t[2],t[3],t[4],t[5]):i?JR(t[0],t[1],t[2],t[3],t[4],t[5]):ZR(t[0],t[1],t[2],t[3])}function Ywe(t){return t?Dq(t)?t:zq(t)?Hq(t):Gq(t)?XR(t):jq(t)?QR(t):Fq(t)?Uq(t):null:null}function Uq(t){const{hasZ:e,hasM:i,points:n}=t;return iE(eE(tE,n,e??!1,i??!1),e,i)}function Hq(t){const{x:e,y:i,z:n,m:r}=t,s=r!=null;return n!=null?s?YR(e,i,n,r,e,i,n,r):KR(e,i,n,e,i,n):s?JR(e,i,r,e,i,r):ZR(e,i,e,i)}function XR(t){const{hasZ:e,hasM:i,rings:n}=t,r=op(tE,n,e??!1,i??!1);return r?iE(r,e,i):null}function QR(t){const{hasZ:e,hasM:i,paths:n}=t,r=op(tE,n,e??!1,i??!1);return r?iE(r,e,i):null}var N0;function bC(t){return!Array.isArray(t[0])}let Ks=N0=class extends xc{static fromExtent(t){const e=t.clone().normalize(),i=t.spatialReference;let n=!1,r=!1;for(const o of e)o.hasZ&&(n=!0),o.hasM&&(r=!0);const s={rings:e.map(o=>{const a=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(n&&o.hasZ){const l=o.zmin+.5*(o.zmax-o.zmin);for(let u=0;u<a.length;u++)a[u].push(l)}if(r&&o.hasM){const l=o.mmin+.5*(o.mmax-o.mmin);for(let u=0;u<a.length;u++)a[u].push(l)}return a}),spatialReference:i};return n&&(s.hasZ=!0),r&&(s.hasM=!0),new N0(s)}constructor(...t){super(...t),this.rings=[],this.type="polygon"}normalizeCtorArgs(t,e){var o,a;let i,n,r=null,s=null;return t&&!Array.isArray(t)?(r=t.rings??null,e||(t.spatialReference?e=t.spatialReference:t.rings||(e=t)),i=t.hasZ,n=t.hasM):r=t,r=r||[],e=e||xe.WGS84,r.length&&((o=r[0])==null?void 0:o[0])!=null&&typeof r[0][0]=="number"&&(r=[r]),s=(a=r[0])==null?void 0:a[0],s&&(i===void 0&&n===void 0?(i=s.length>2,n=s.length>3):i===void 0?i=n?s.length>3:s.length>2:n===void 0&&(n=i?s.length>3:s.length>2)),{rings:r,spatialReference:e,hasZ:i,hasM:n}}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const t=_q(this);if(!t||isNaN(t[0])||isNaN(t[1])||this.hasZ&&isNaN(t[2]))return null;const e=new he;return e.x=t[0],e.y=t[1],e.spatialReference=this.spatialReference,this.hasZ&&(e.z=t[2]),e}get extent(){const{spatialReference:t}=this,e=XR(this);if(!e)return null;const i=new Ve(e);return i.spatialReference=t,i}get isSelfIntersecting(){return uq(this.rings)}writeRings(t,e){e.rings=q(this.rings)}addRing(t){if(!t)return;const e=this.rings,i=e.length;if(bC(t)){const n=[];for(let r=0,s=t.length;r<s;r++)n[r]=t[r].toArray();e[i]=n}else e[i]=t.concat();return this.notifyChange("rings"),this}clone(){const t=new N0;return t.spatialReference=this.spatialReference,t.rings=q(this.rings),t.hasZ=this.hasZ,t.hasM=this.hasM,t}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,i=t.spatialReference;if(e!=null!=(i!=null)||e!=null&&i!=null&&!e.equals(i)||this.rings.length!==t.rings.length)return!1;const n=([r,s,o,a],[l,u,p,f])=>r===l&&s===u&&(o==null&&p==null||o===p)&&(a==null&&f==null||a===f);for(let r=0;r<this.rings.length;r++){const s=this.rings[r],o=t.rings[r];if(!vg(s,o,n))return!1}return!0}contains(t){if(!t)return!1;const e=I1(t,this.spatialReference);return OR(this,e??t)}isClockwise(t){let e;return e=bC(t)?t.map(i=>this.hasZ?this.hasM?[i.x,i.y,i.z,i.m]:[i.x,i.y,i.z]:[i.x,i.y]):t,DR(e)}getPoint(t,e){if(!this._validateInputs(t,e))return null;const i=this.rings[t][e],n=this.hasZ,r=this.hasM;return n&&!r?new he(i[0],i[1],i[2],void 0,this.spatialReference):r&&!n?new he(i[0],i[1],void 0,i[2],this.spatialReference):n&&r?new he(i[0],i[1],i[2],i[3],this.spatialReference):new he(i[0],i[1],this.spatialReference)}insertPoint(t,e,i){return this._validateInputs(t,e,!0)?(sp(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t].splice(e,0,i),this.notifyChange("rings"),this):this}removePoint(t,e){if(!this._validateInputs(t,e))return null;const i=new he(this.rings[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("rings"),i}removeRing(t){if(!this._validateInputs(t,null))return null;const e=this.rings.splice(t,1)[0],i=this.spatialReference,n=e.map(r=>new he(r,i));return this.notifyChange("rings"),n}setPoint(t,e,i){return this._validateInputs(t,e)?(sp(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t][e]=i,this.notifyChange("rings"),this):this}_validateInputs(t,e,i=!1){if(t==null||t<0||t>=this.rings.length)return!1;if(e!=null){const n=this.rings[t];if(i&&(e<0||e>n.length)||!i&&(e<0||e>=n.length))return!1}return!0}toJSON(t){return this.write({},t)}};c([d({readOnly:!0})],Ks.prototype,"cache",null),c([d({readOnly:!0})],Ks.prototype,"centroid",null),c([d({readOnly:!0})],Ks.prototype,"extent",null),c([d({readOnly:!0})],Ks.prototype,"isSelfIntersecting",null),c([d({type:[[[Number]]],json:{write:{isRequired:!0}}})],Ks.prototype,"rings",void 0),c([Ie("rings")],Ks.prototype,"writeRings",null),Ks=N0=c([S("esri.geometry.Polygon")],Ks),Ks.prototype.toJSON.isDefaultToJSON=!0;const Mn=Ks;var g$;function Vq(t){return!Array.isArray(t[0])}let fl=g$=class extends xc{constructor(...t){super(...t),this.paths=[],this.type="polyline"}normalizeCtorArgs(t,e){var o,a;let i,n,r=null,s=null;return t&&!Array.isArray(t)?(r=t.paths??null,e||(t.spatialReference?e=t.spatialReference:t.paths||(e=t)),i=t.hasZ,n=t.hasM):r=t,r=r||[],e=e||xe.WGS84,r.length&&((o=r[0])==null?void 0:o[0])!=null&&typeof r[0][0]=="number"&&(r=[r]),s=(a=r[0])==null?void 0:a[0],s&&(i===void 0&&n===void 0?(i=s.length>2,n=!1):i===void 0?i=!n&&s.length>3:n===void 0&&(n=!i&&s.length>3)),{paths:r,spatialReference:e,hasZ:i,hasM:n}}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:t}=this,e=QR(this);if(!e)return null;const i=new Ve(e);return i.spatialReference=t,i}writePaths(t,e){e.paths=q(this.paths)}addPath(t){if(!t)return;const e=this.paths,i=e.length;if(Vq(t)){const n=[];for(let r=0,s=t.length;r<s;r++)n[r]=t[r].toArray();e[i]=n}else e[i]=t.concat();return this.notifyChange("paths"),this}clone(){const t=new g$;return t.spatialReference=this.spatialReference,t.paths=q(this.paths),t.hasZ=this.hasZ,t.hasM=this.hasM,t}getPoint(t,e){if(!this._validateInputs(t,e))return null;const i=this.paths[t][e],n=this.hasZ,r=this.hasM;return n&&!r?new he(i[0],i[1],i[2],void 0,this.spatialReference):r&&!n?new he(i[0],i[1],void 0,i[2],this.spatialReference):n&&r?new he(i[0],i[1],i[2],i[3],this.spatialReference):new he(i[0],i[1],this.spatialReference)}insertPoint(t,e,i){return this._validateInputs(t,e,!0)?(sp(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t].splice(e,0,i),this.notifyChange("paths"),this):this}removePath(t){if(!this._validateInputs(t,null))return null;const e=this.paths.splice(t,1)[0],i=this.spatialReference,n=e.map(r=>new he(r,i));return this.notifyChange("paths"),n}removePoint(t,e){if(!this._validateInputs(t,e))return null;const i=new he(this.paths[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("paths"),i}setPoint(t,e,i){return this._validateInputs(t,e)?(sp(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t][e]=i,this.notifyChange("paths"),this):this}_validateInputs(t,e,i=!1){if(t==null||t<0||t>=this.paths.length)return!1;if(e!=null){const n=this.paths[t];if(i&&(e<0||e>n.length)||!i&&(e<0||e>=n.length))return!1}return!0}toJSON(t){return this.write({},t)}};c([d({readOnly:!0})],fl.prototype,"cache",null),c([d({readOnly:!0})],fl.prototype,"extent",null),c([d({type:[[[Number]]],json:{write:{isRequired:!0}}})],fl.prototype,"paths",void 0),c([Ie("paths")],fl.prototype,"writePaths",null),fl=g$=c([S("esri.geometry.Polyline")],fl),fl.prototype.toJSON.isDefaultToJSON=!0;const Tr=fl,Bq=sn()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),Xwe=sn()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"});function eN(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function tN(t){return t.points!==void 0}function iN(t){return t.x!==void 0&&t.y!==void 0}function nN(t){return t.paths!==void 0}function nE(t){return t.rings!==void 0}function ap(t){return t==null?null:t instanceof xc?t:iN(t)?he.fromJSON(t):nN(t)?Tr.fromJSON(t):nE(t)?Mn.fromJSON(t):tN(t)?L1.fromJSON(t):eN(t)?Ve.fromJSON(t):null}function Cg(t){return t?iN(t)?"esriGeometryPoint":nN(t)?"esriGeometryPolyline":nE(t)?"esriGeometryPolygon":eN(t)?"esriGeometryEnvelope":tN(t)?"esriGeometryMultipoint":null:null}const qq={esriGeometryPoint:he,esriGeometryPolyline:Tr,esriGeometryPolygon:Mn,esriGeometryEnvelope:Ve,esriGeometryMultipoint:L1};function Wq(t){return t&&qq[t]||null}const Ig={base:xc,key:"type",typeMap:{extent:Ve,multipoint:L1,point:he,polyline:Tr,polygon:Mn}};ja(Ig);var y$;let ml=y$=class extends ie{constructor(t){super(t),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(t){return(t%=360)<0&&(t+=360),t}clone(){return new y$({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry!=null?this.targetGeometry.clone():null,camera:this.camera!=null?this.camera.clone():null})}};function n_(){return{enabled:!this.camera}}c([d({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:n_}}}}})],ml.prototype,"rotation",void 0),c([zt("rotation")],ml.prototype,"castRotation",null),c([d({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:n_}}}}})],ml.prototype,"scale",void 0),c([d({types:Ig,json:{read:ap,write:!0,origins:{"web-scene":{read:ap,write:{overridePolicy:n_}}}}})],ml.prototype,"targetGeometry",void 0),c([d({type:XB,json:{write:!0}})],ml.prototype,"camera",void 0),ml=y$=c([S("esri.Viewpoint")],ml);const xo=ml;let D0=class rN{constructor(){this._emitter=new rN.EventEmitter(this)}emit(e,i){return this._emitter.emit(e,i)}on(e,i){return this._emitter.on(e,i)}once(e,i){return this._emitter.once(e,i)}hasEventListener(e){return this._emitter.hasEventListener(e)}};(function(t){class e{constructor(r=null){this._target=r,this._listenersMap=null}clear(){var r;(r=this._listenersMap)==null||r.clear(),this._listenersMap=null}destroy(){this.clear()}emit(r,s){var u;let o=(u=this._listenersMap)==null?void 0:u.get(r);if(!o)return!1;const a=this._target||this;let l=!1;for(const p of o.slice()){const f="deref"in p?p.deref():p;f?f==null||f.call(a,s):l=!0}return l&&(o=o.filter(p=>!("deref"in p)||p.deref()!=null),this._listenersMap.set(r,o)),o.length>0}on(r,s){if(Array.isArray(r)){const a=r.map(l=>this.on(l,s));return $c(a)}if(r.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap??(this._listenersMap=new Map);const o=this._listenersMap.get(r)||[];return o.push(s),this._listenersMap.set(r,o),Ye(()=>{var u;const a=(u=this._listenersMap)==null?void 0:u.get(r),l=(a==null?void 0:a.indexOf(s))??-1;l>=0&&a.splice(l,1)})}once(r,s){const o=this.on(r,a=>{o.remove();const l="deref"in s?s.deref():s;l==null||l.call(null,a)});return o}hasEventListener(r){var o;const s=(o=this._listenersMap)==null?void 0:o.get(r);return s!=null&&s.length>0}}t.EventEmitter=e,t.EventedMixin=n=>{let r=class extends n{constructor(){super(...arguments),this._emitter=new e}destroy(){this._emitter.clear()}emit(s,o){return this._emitter.emit(s,o)}on(s,o){return this._emitter.on(s,o)}once(s,o){return this._emitter.once(s,o)}hasEventListener(s){return this._emitter.hasEventListener(s)}};return r=c([S("esri.core.Evented")],r),r};let i=class extends X{constructor(){super(...arguments),this._emitter=new D0.EventEmitter(this)}destroy(){this._emitter.clear()}emit(n,r){return this._emitter.emit(n,r)}on(n,r){return this._emitter.on(n,r)}once(n,r){return this._emitter.once(n,r)}hasEventListener(n){return this._emitter.hasEventListener(n)}};i=c([S("esri.core.Evented")],i),t.EventedAccessor=i})(D0||(D0={}));const An=D0;var Fe;(function(t){t[t.ADD=1]="ADD",t[t.REMOVE=2]="REMOVE",t[t.MOVE=4]="MOVE"})(Fe||(Fe={}));function sN(t){return(e,i)=>{e[i]=t}}let Og=class extends ZL{notify(){const e=this._observers;if(e&&e.length>0){const i=e.slice();for(const n of i)n.onInvalidated(),n.onCommitted()}}};var ka;let Zq=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(e){this.defaultPrevented=!1,this.item=e}},Kq=class{constructor(e,i,n,r,s){this.target=e,this.added=i,this.removed=n,this.start=r,this.deleteCount=s}};const or=new _d(Zq,void 0,t=>{t.item=null,t.target=null,t.defaultPrevented=!1,t.cancellable=!1});function r_(t){return t?t instanceof ku?t.toArray():t.length?Array.prototype.slice.apply(t):[]:[]}function s_(t){if(t!=null&&t.length)return t[0]}function Jq(t,e,i,n){const r=Math.min(t.length-i,e.length-n);let s=0;for(;s<r&&t[i+s]===e[n+s];)s++;return s}function oN(t,e,i,n){e&&e.forEach((r,s,o)=>{t.push(r),oN(t,i.call(n,r,s,o),i,n)})}const nl=new Set,rl=new Set,sl=new Set,o_=new Map;let Yq=0,ku=ka=class extends An.EventedAccessor{static isCollection(t){return t!=null&&t instanceof ka}constructor(t){super(t),this._chgListeners=[],this._notifications=null,this._timer=null,this._observable=new Og,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:Yq++})}normalizeCtorArgs(t){return t?Array.isArray(t)||t instanceof ka?{items:t}:t:{}}destroy(){this._removeAllRaw()}*[Symbol.iterator](){yield*this.items}get items(){return ue(this._observable),this._items}set items(t){this._emitBeforeChanges(Fe.ADD)||(this._splice(0,this.length,r_(t)),this._emitAfterChanges(Fe.ADD))}hasEventListener(t){return t==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(t)}on(t,e){if(t==="change"){const i=this._chgListeners,n={removed:!1,callback:e};return i.push(n),this._notifications&&this._notifications.push({listeners:i.slice(),items:this._items.slice(),changes:[]}),Ye(()=>{n.removed=!0,i.splice(i.indexOf(n),1)})}return this._emitter.on(t,e)}once(t,e){const i="deref"in e?()=>e.deref():()=>e,n=this.on(t,r=>{var s;(s=i())==null||s.call(null,r),n.remove()});return n}add(t,e){if(ue(this._observable),this._emitBeforeChanges(Fe.ADD))return this;const i=this.getNextIndex(e??null);return this._splice(i,0,[t]),this._emitAfterChanges(Fe.ADD),this}addMany(t,e=this._items.length){if(ue(this._observable),!(t!=null&&t.length))return this;if(this._emitBeforeChanges(Fe.ADD))return this;const i=this.getNextIndex(e);return this._splice(i,0,r_(t)),this._emitAfterChanges(Fe.ADD),this}at(t){if(ue(this._observable),(t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this._items[t]}removeAll(){if(ue(this._observable),!this.length||this._emitBeforeChanges(Fe.REMOVE))return[];const t=this._removeAllRaw();return this._emitAfterChanges(Fe.REMOVE),t}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return ue(this._observable),this._createNewInstance({items:this._items.map(q)})}concat(...t){ue(this._observable);const e=t.map(r_);return this._createNewInstance({items:this._items.concat(...e)})}drain(t,e){if(ue(this._observable),!this.length||this._emitBeforeChanges(Fe.REMOVE))return;const i=this._splice(0,this.length),n=i.length;for(let r=0;r<n;r++)t.call(e,i[r],r,i);this._emitAfterChanges(Fe.REMOVE)}every(t,e){return ue(this._observable),this._items.every(t,e)}filter(t,e){let i;return ue(this._observable),i=arguments.length===2?this._items.filter(t,e):this._items.filter(t),this._createNewInstance({items:i})}find(t,e){return ue(this._observable),this._items.find(t,e)}findIndex(t,e){return ue(this._observable),this._items.findIndex(t,e)}flatten(t,e){ue(this._observable);const i=[];return oN(i,this,t,e),new ka(i)}forEach(t,e){return ue(this._observable),this._items.forEach(t,e)}getItemAt(t){return ue(this._observable),this._items[t]}getNextIndex(t){ue(this._observable);const e=this.length;return(t=t??e)<0?t=0:t>e&&(t=e),t}includes(t,e=0){return ue(this._observable),this._items.includes(t,e)}indexOf(t,e=0){return ue(this._observable),this._items.indexOf(t,e)}join(t=","){return ue(this._observable),this._items.join(t)}lastIndexOf(t,e=this.length-1){return ue(this._observable),this._items.lastIndexOf(t,e)}map(t,e){ue(this._observable);const i=this._items.map(t,e);return new ka({items:i})}reorder(t,e=this.length-1){ue(this._observable);const i=this.indexOf(t);if(i!==-1){if(e<0?e=0:e>=this.length&&(e=this.length-1),i!==e){if(this._emitBeforeChanges(Fe.MOVE))return t;this._splice(i,1),this._splice(e,0,[t]),this._emitAfterChanges(Fe.MOVE)}return t}}pop(){if(ue(this._observable),!this.length||this._emitBeforeChanges(Fe.REMOVE))return;const t=s_(this._splice(this.length-1,1));return this._emitAfterChanges(Fe.REMOVE),t}push(...t){return ue(this._observable),this._emitBeforeChanges(Fe.ADD)||(this._splice(this.length,0,t),this._emitAfterChanges(Fe.ADD)),this.length}reduce(t,e){ue(this._observable);const i=this._items;return arguments.length===2?i.reduce(t,e):i.reduce(t)}reduceRight(t,e){ue(this._observable);const i=this._items;return arguments.length===2?i.reduceRight(t,e):i.reduceRight(t)}remove(t){return ue(this._observable),this.removeAt(this.indexOf(t))}removeAt(t){if(ue(this._observable),t<0||t>=this.length||this._emitBeforeChanges(Fe.REMOVE))return;const e=s_(this._splice(t,1));return this._emitAfterChanges(Fe.REMOVE),e}removeMany(t){if(ue(this._observable),!(t!=null&&t.length)||this._emitBeforeChanges(Fe.REMOVE))return[];const e=t instanceof ka?t.toArray():t,i=this._items,n=[],r=e.length;for(let s=0;s<r;s++){const o=e[s],a=i.indexOf(o);if(a>-1){const l=1+Jq(e,i,s+1,a+1),u=this._splice(a,l);u&&u.length>0&&n.push.apply(n,u),s+=l-1}}return this._emitAfterChanges(Fe.REMOVE),n}reverse(){if(ue(this._observable),this._emitBeforeChanges(Fe.MOVE))return this;const t=this._splice(0,this.length);return t&&(t.reverse(),this._splice(0,0,t)),this._emitAfterChanges(Fe.MOVE),this}shift(){if(ue(this._observable),!this.length||this._emitBeforeChanges(Fe.REMOVE))return;const t=s_(this._splice(0,1));return this._emitAfterChanges(Fe.REMOVE),t}slice(t=0,e=this.length){return ue(this._observable),this._createNewInstance({items:this._items.slice(t,e)})}some(t,e){return ue(this._observable),this._items.some(t,e)}sort(t){if(ue(this._observable),!this.length||this._emitBeforeChanges(Fe.MOVE))return this;const e=this._splice(0,this.length);return arguments.length?e.sort(t):e.sort(),this._splice(0,0,e),this._emitAfterChanges(Fe.MOVE),this}splice(t,e,...i){ue(this._observable);const n=(e?Fe.REMOVE:0)|(i.length?Fe.ADD:0);if(this._emitBeforeChanges(n))return[];const r=this._splice(t,e,i)||[];return this._emitAfterChanges(n),r}toArray(){return ue(this._observable),this._items.slice()}toJSON(){return ue(this._observable),this.toArray()}toLocaleString(){return ue(this._observable),this._items.toLocaleString()}toString(){return ue(this._observable),this._items.toString()}unshift(...t){return ue(this._observable),!t.length||this._emitBeforeChanges(Fe.ADD)||(this._splice(0,0,t),this._emitAfterChanges(Fe.ADD)),this.length}_createNewInstance(t){return new this.constructor(t)}_splice(t,e,i){const n=this._items,r=this.itemType;let s,o;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=$g(()=>this._dispatchChange())),t<0&&(t+=this.length),e){if(o=n.splice(t,e),this.hasEventListener("before-remove")){const a=or.acquire();a.target=this,a.cancellable=!0;for(let l=0,u=o.length;l<u;l++)s=o[l],a.reset(s),this.emit("before-remove",a),a.defaultPrevented&&(o.splice(l,1),n.splice(t,0,s),t+=1,l-=1,u-=1);or.release(a)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const a=or.acquire();a.target=this,a.cancellable=!1;const l=o.length;for(let u=0;u<l;u++)a.reset(o[u]),this.emit("after-remove",a);or.release(a)}}if(i!=null&&i.length){if(r){const p=[];for(const f of i){const m=r.ensureType(f);m==null&&f!=null||p.push(m)}i=p}const a=this.hasEventListener("before-add"),l=this.hasEventListener("after-add"),u=t===this.length;if(a||l){const p=or.acquire();p.target=this,p.cancellable=!0;const f=or.acquire();f.target=this,f.cancellable=!1;for(const m of i)a?(p.reset(m),this.emit("before-add",p),p.defaultPrevented||(u?n.push(m):n.splice(t++,0,m),this._set("length",n.length),l&&(f.reset(m),this.emit("after-add",f)))):(u?n.push(m):n.splice(t++,0,m),this._set("length",n.length),f.reset(m),this.emit("after-add",f));or.release(f),or.release(p)}else{if(u)for(const p of i)n.push(p);else n.splice(t,0,...i);this._set("length",n.length)}}if((i!=null&&i.length||o!=null&&o.length)&&this._notifyChangeEvent(i,o),this.hasEventListener("after-splice")){const a=new Kq(this,i,o,t,e);this.emit("after-splice",a)}return o}_emitBeforeChanges(t){let e=!1;if(this.hasEventListener("before-changes")){const i=or.acquire();i.target=this,i.cancellable=!0,i.type=t,this.emit("before-changes",i),e=i.defaultPrevented,or.release(i)}return e}_emitAfterChanges(t){if(this.hasEventListener("after-changes")){const e=or.acquire();e.target=this,e.cancellable=!1,e.type=t,this.emit("after-changes",e),or.release(e)}this._observable.notify()}_notifyChangeEvent(t,e){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:t,removed:e})}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),!this._notifications)return;const t=this._notifications;this._notifications=null;for(const e of t){const i=e.changes;nl.clear(),rl.clear(),sl.clear();for(const{added:l,removed:u}of i){if(l)if(sl.size===0&&rl.size===0)for(const p of l)nl.add(p);else for(const p of l)rl.has(p)?(sl.add(p),rl.delete(p)):sl.has(p)||nl.add(p);if(u)if(sl.size===0&&nl.size===0)for(const p of u)rl.add(p);else for(const p of u)nl.has(p)?nl.delete(p):(sl.delete(p),rl.add(p))}const n=Xi.acquire();nl.forEach(l=>{n.push(l)});const r=Xi.acquire();rl.forEach(l=>{r.push(l)});const s=this._items,o=e.items,a=Xi.acquire();if(sl.forEach(l=>{o.indexOf(l)!==s.indexOf(l)&&a.push(l)}),e.listeners&&(n.length||r.length||a.length)){const l={target:this,added:n,removed:r,moved:a},u=e.listeners.length;for(let p=0;p<u;p++){const f=e.listeners[p];f.removed||f.callback.call(this,l)}}Xi.release(n),Xi.release(r),Xi.release(a)}nl.clear(),rl.clear(),sl.clear()}};ku.ofType=t=>{if(!t)return ka;if(o_.has(t))return o_.get(t);let e=null;if(typeof t=="function")e=t.prototype.declaredClass;else if(t.base)e=t.base.prototype.declaredClass;else for(const n in t.typeMap){const r=t.typeMap[n].prototype.declaredClass;e?e+=` | ${r}`:e=r}let i=class extends ka{};return c([sN({Type:t,ensureType:typeof t=="function"?ti(t):ja(t)})],i.prototype,"itemType",void 0),i=c([S(`esri.core.Collection<${e}>`)],i),o_.set(t,i),i},c([d()],ku.prototype,"length",void 0),c([d()],ku.prototype,"items",null),ku=ka=c([S("esri.core.Collection")],ku);const te=ku;function i_e(t,e,i){return Yl(t.map((n,r)=>e.apply(i,[n,r])))}async function Xq(t,e,i){return(await Yl(t.map((n,r)=>e.apply(i,[n,r])))).map(n=>n.value)}function rE(t){return{ok:!0,value:t}}function sE(t){return{ok:!1,error:t}}function Qq(t){return t!=null&&t.ok===!0?t.value:null}function eW(t){return t!=null&&t.ok===!1?t.error:null}async function aN(t){if(t==null)return{ok:!1,error:new Error("no promise provided")};try{return rE(await t)}catch(e){return sE(e)}}async function n_e(t){try{return rE(await t)}catch(e){return sP(e),sE(e)}}function R1(t,e){return new gl(t,e)}let gl=class extends X{get value(){return Qq(this._result)}get error(){return eW(this._result)}get finished(){return this._result!=null}constructor(e,i){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=_s(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:n}=this._abortController;this.promise=e(n),this.promise.then(r=>{this._result=rE(r),this._cleanup()},r=>{this._result=sE(r),this._cleanup()}),this._abortHandle=Mr(i,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=Je(this._abortHandle),this._abortController=null}};c([d()],gl.prototype,"value",null),c([d()],gl.prototype,"error",null),c([d()],gl.prototype,"finished",null),c([d()],gl.prototype,"promise",void 0),c([d()],gl.prototype,"_result",void 0),gl=c([S("esri.core.asyncUtils.ReactiveTask")],gl);let Yd=class extends te{constructor(e){super(e),this.getCollections=null}initialize(){this.addHandles(tU(()=>this._refresh()))}destroy(){this.getCollections=null}_refresh(){const e=this.getCollections!=null?this.getCollections():null;if(e==null)return void this.removeAll();let i=0;for(const n of e)n!=null&&(i=this._processCollection(i,n));this.splice(i,this.length)}_createNewInstance(e){return new te(e)}_processCollection(e,i){if(!i)return e;const n=this.itemFilterFunction??(r=>!!r);for(const r of i)if(r){if(n(r)){const s=this.indexOf(r,e);s>=0?s!==e&&this.reorder(r,e):this.add(r,e),++e}if(this.getChildrenFunction){const s=this.getChildrenFunction(r);if(Array.isArray(s))for(const o of s)e=this._processCollection(e,o);else e=this._processCollection(e,s)}}return e}};c([d()],Yd.prototype,"getCollections",void 0),c([d()],Yd.prototype,"getChildrenFunction",void 0),c([d()],Yd.prototype,"itemFilterFunction",void 0),Yd=c([S("esri.core.CollectionFlattener")],Yd);const Zm=Yd;function Z(t,e,i={}){return oE(t,e,i,lN)}function On(t,e,i={}){return oE(t,e,i,cN)}function oE(t,e,i={},n){let r=null;const s=i.once?(o,a)=>{n(o)&&(Je(r),e(o,a))}:(o,a)=>{n(o)&&e(o,a)};if(r=hU(t,s,i.sync,i.equals),i.initial){const o=t();s(o,o)}return r}function Lr(t,e,i,n={}){let r=null,s=null,o=null;function a(){var p;r&&s&&(s.remove(),(p=n.onListenerRemove)==null||p.call(n,r),r=null,s=null)}function l(p){n.once&&n.once&&Je(o),i(p)}const u=Z(t,(p,f)=>{var m;a(),w1(p)&&(r=p,s=Sg(p,e,l),(m=n.onListenerAdd)==null||m.call(n,p))},{sync:n.sync,initial:!0});return o=Ye(()=>{u.remove(),a()}),o}function Ha(t,e){return tW(t,cN,e)}function tW(t,e,i){if(er(i))return Promise.reject(Xe());const n=t();if(e!=null&&e(n))return Promise.resolve(n);let r=null;function s(){r=Je(r)}return new Promise((o,a)=>{r=$c([Mr(i,()=>{s(),a(Xe())}),oE(t,l=>{s(),o(l)},{sync:!1,once:!0},e??lN)])})}function lN(t){return!0}function cN(t){return!!t}function iW(t,e,i={}){let n=!1;const r=Z(t,(s,o)=>{n||e(s,o)},i);return{remove(){r.remove()},pause(){n=!0},resume(){n=!1}}}function nW(t,e){const i=new te,n=Lr(t,"after-splice",({added:r,start:s,deleteCount:o})=>{const a=i.splice(s,o);for(const l of a)l.remove();if(r!=null&&r.length){const l=r.map(e);i.addMany(l,s)}},{sync:!0,onListenerRemove:()=>i.drain(r=>r.remove()),onListenerAdd:r=>i.addMany(r.items.map(e))});return i.addHandles(n),i}function rW(t,e){const i=new te,n=nW(t,a=>R1(async l=>{const u=await e(a,l);if(er(l))throw u.remove(),Xe();return u})),r=()=>null,s=async a=>{const l=await a.promise,u=n.indexOf(a);u<0||i.splice(u,1,l)};i.addMany(n.items.map(r));for(const a of n)cc(s(a));const o=n.on("after-splice",({added:a,start:l,deleteCount:u})=>{const p=i.splice(l,u);for(const f of p)f==null||f.remove();if(a!=null&&a.length){i.addMany(a.map(r),l);for(const f of a)cc(s(f))}});return i.addHandles([HL(n),o]),i}const hc={sync:!0},De={initial:!0},di={sync:!0,initial:!0};let sb=class{constructor(e=i=>i.values().next().value){this._peeker=e,this._observable=new Og,this._items=new Set}get length(){return ue(this._observable),this._items.size}clear(){this.length!==0&&(this._items.clear(),this._observable.notify())}last(){if(this.length===0)return;let e;for(e of this._items);return e}peek(){if(this.length!==0)return this._peeker(this._items)}push(e){this.contains(e)||(this._items.add(e),this._observable.notify())}contains(e){return ue(this._observable),this._items.has(e)}pop(){if(this.length===0)return;const e=this.peek();return this._items.delete(e),this._observable.notify(),e}popLast(){if(this.length===0)return;const e=this.last();return this._items.delete(e),this._observable.notify(),e}remove(e){this.contains(e)&&(this._items.delete(e),this._observable.notify())}filter(e){const i=this.length;return this._items.forEach(n=>{e(n)||this._items.delete(n)}),i!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){ue(this._observable),yield*this._items}};const uN=new FinalizationRegistry(t=>{t.close()});function sW(t,e){uN.register(t,e,e)}function oW(t){uN.unregister(t)}const aW={statsWorker:()=>V(()=>import("./statsWorker-lpLq1ohV.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url),geometryEngineWorker:()=>V(()=>import("./geometryEngineWorker-T8ritq2p.js"),__vite__mapDeps([6,7,8,9]),import.meta.url),CSVSourceWorker:()=>V(()=>import("./CSVSourceWorker-YDsg2kRP.js"),__vite__mapDeps([10,11,9,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,2,1,3,4,5,28,29,30,31,32]),import.meta.url),EdgeProcessingWorker:()=>V(()=>import("./EdgeProcessingWorker-TRDYpL4N.js"),__vite__mapDeps([33,34,35,36,37,38,39,40,41,42,43,44]),import.meta.url),ElevationSamplerWorker:()=>V(()=>import("./ElevationSamplerWorker-SemMvA4A.js"),__vite__mapDeps([45,18,46,47,48,49,50,51,52,53,36]),import.meta.url),FeatureServiceSnappingSourceWorker:()=>V(()=>import("./FeatureServiceSnappingSourceWorker-wNa8jf8q.js"),__vite__mapDeps([54,14,15,12,16,13,17,18,19,20,9,21,22,23,24,25,26,27,2,1,3,4,5,28,29,55,56,57,58,59]),import.meta.url),GeoJSONSourceWorker:()=>V(()=>import("./GeoJSONSourceWorker-aiWmntJA.js"),__vite__mapDeps([60,15,12,16,13,14,17,18,19,20,9,21,22,23,24,25,26,27,2,1,3,4,5,28,29,61,11,31,32,62]),import.meta.url),LercWorker:()=>V(()=>import("./LercWorker-vW6rOAmg.js"),__vite__mapDeps([]),import.meta.url),MemorySourceWorker:()=>V(()=>import("./MemorySourceWorker-xtVzMTuN.js"),__vite__mapDeps([63,15,12,16,13,64,14,17,18,19,20,9,21,22,23,24,25,26,27,2,1,3,4,5,28,29,31,32,62,11]),import.meta.url),PBFDecoderWorker:()=>V(()=>import("./PBFDecoderWorker-LIQlMbZg.js"),__vite__mapDeps([65,66,15,12,16,13,56,57]),import.meta.url),Pipeline:()=>V(()=>import("./Pipeline-eCgpt9nN.js"),__vite__mapDeps([67,15,12,16,13,22,23,24,25,26,19,20,9,27,2,1,3,4,5,28,29,68,69,70,71,72,73,74,75,76,43,44,77,78,61,11,31,32,58,56,57,59,79,80]),import.meta.url),PointCloudWorker:()=>V(()=>import("./PointCloudWorker-fqwunBAI.js"),__vite__mapDeps([81,49,82,83,84,85,86,41]),import.meta.url),RasterWorker:()=>V(()=>import("./RasterWorker-N4Bx_4uM.js"),__vite__mapDeps([87,88,89,90,91,92,93,94]),import.meta.url),SceneLayerSnappingSourceWorker:()=>V(()=>import("./SceneLayerSnappingSourceWorker-k9lHFydx.js"),__vite__mapDeps([95,96,97,38,39,40,35,36,37,41,42,43,44]),import.meta.url),SceneLayerWorker:()=>V(()=>import("./SceneLayerWorker-gKEhSx2Y.js"),__vite__mapDeps([98,50,51,52,53]),import.meta.url),WFSSourceWorker:()=>V(()=>import("./WFSSourceWorker-JTUzgB8W.js"),__vite__mapDeps([99,15,12,16,13,14,17,18,19,20,9,21,22,23,24,25,26,27,2,1,3,4,5,28,29,61,11,62,100,101]),import.meta.url),WorkerTileHandler:()=>V(()=>import("./WorkerTileHandler-35C4clxq.js"),__vite__mapDeps([102,103,104,105,106,107,76,57,108,73,109,43,44,91,110,111]),import.meta.url)};var hi;(function(t){t[t.HANDSHAKE=0]="HANDSHAKE",t[t.OPEN=1]="OPEN",t[t.OPENED=2]="OPENED",t[t.RESPONSE=3]="RESPONSE",t[t.INVOKE=4]="INVOKE",t[t.ABORT=5]="ABORT",t[t.CLOSE=6]="CLOSE",t[t.OPEN_PORT=7]="OPEN_PORT",t[t.ON=8]="ON"})(hi||(hi={}));let lW=0;function dN(){return lW++}function cW(t){return t&&typeof t=="object"&&("result"in t||"transferList"in t)}function Km(t){return t?typeof t=="string"?JSON.stringify({name:"message",message:t}):t.toJSON?JSON.stringify(t):JSON.stringify({name:t.name,message:t.message,details:t.details||{stack:t.stack}}):null}function aE(t,e,i,n){if(e.type===hi.OPEN_PORT)return void t.postMessage(e,[e.port]);if(e.type!==hi.INVOKE&&e.type!==hi.RESPONSE)return void t.postMessage(e);let r;if(cW(i)?(r=wC(i.transferList),e.data=i.result):(r=wC(n),e.data=i),r){if(z("ff")){for(const s of r)if("byteLength"in s&&s.byteLength>267386880){const o="Worker call with large ArrayBuffer would crash Firefox";switch(e.type){case hi.INVOKE:throw o;case hi.RESPONSE:return void aE(t,{type:hi.RESPONSE,jobId:e.jobId,error:Km(o)})}}}t.postMessage(e,r)}else t.postMessage(e)}function Jm(t){if(!t)return null;const e=t.data;return e?typeof e=="string"?JSON.parse(e):e:null}function wC(t){if(!(t!=null&&t.length))return null;if(z("esri-workers-arraybuffer-transfer"))return t;const e=t.filter(i=>!uW(i));return e.length?e:null}function uW(t){var e;return t instanceof ArrayBuffer||((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="ArrayBuffer"}const{CLOSE:_C,ABORT:SC,INVOKE:$C,RESPONSE:Xp,OPEN_PORT:xC,ON:dW}=hi,hW=2;let pW=class{constructor(e){this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=e,this._timer=null,this._process=this._process.bind(this)}push(e){e.type===hi.ABORT?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const e of this._invokeMessages)this._cancelledJobIds.has(e.jobId)||this._invoke(e);this._cancelledJobIds.clear(),this._invokeMessages.length=0}},pc=class Xd{static connect(e){const i=new MessageChannel;let n;n=typeof e=="function"?new e:"default"in e&&typeof e.default=="function"?new e.default:e;const r=new Xd(i.port1,{channel:i,client:n});return typeof n=="object"&&"remoteClient"in n&&(n.remoteClient=r),Xd.clients.set(r,n),i.port2}static loadWorker(e){const i=aW[e];return i?i():Promise.resolve(null)}constructor(e,i,n){this._port=e,this._jobQueue=n,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new pW(r=>this._onInvokeMessage(r)),this._client=i.client,this._onMessage=this._onMessage.bind(this),this._channel=i.channel,this._schedule=i.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:_C}),this._close()}isBusy(){return this._outJobs.size>0}invoke(e,i,n){const r=n==null?void 0:n.signal,s=n==null?void 0:n.transferList;if(!this._port)return Promise.reject(new F("worker:port-closed",`Cannot call invoke('${e}'), port is closed`,{methodName:e,data:i}));const o=dN();return new Promise((a,l)=>{if(er(r))return this._processWork(),void l(Xe());const u=Mr(r,()=>{const f=this._outJobs.get(o);f&&(this._outJobs.delete(o),this._processWork(),Je(f.abortHandle),this._post({type:SC,jobId:o}),l(Xe()))}),p={resolve:a,reject:l,abortHandle:u,debugInfo:e};this._outJobs.set(o,p),this._post({type:$C,jobId:o,methodName:e,abortable:r!=null},i,s)})}on(e,i){const n=new MessageChannel;function r(s){i(s.data)}return this._port.postMessage({type:hi.ON,eventType:e,port:n.port2},[n.port2]),n.port1.addEventListener("message",r),n.port1.start(),Ye(()=>{n.port1.postMessage({type:hi.CLOSE}),n.port1.close(),n.port1.removeEventListener("message",r)})}jobAdded(){this._processWork()}openPort(){const e=new MessageChannel;return this._post({type:xC,port:e.port2}),e.port1}_processWork(){var o;if(this._outJobs.size>=hW)return;const e=(o=this._jobQueue)==null?void 0:o.pop();if(!e)return;const{methodName:i,data:n,invokeOptions:r,resolver:s}=e;this.invoke(i,n,r).then(a=>s.resolve(a)).catch(a=>s.reject(a))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(e=>{Je(e.abortHandle),e.reject(Xe(`Worker closing, aborting job calling '${e.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null}_onMessage(e){this._schedule!=null?this._schedule(()=>this._processMessage(e)):this._processMessage(e)}_processMessage(e){const i=Jm(e);if(i)switch(i.type){case Xp:this._onResponseMessage(i);break;case $C:this._invokeQueue.push(i);break;case SC:this._onAbortMessage(i);break;case _C:this._onCloseMessage();break;case xC:this._onOpenPortMessage(i);break;case dW:this._onOnMessage(i)}}_onAbortMessage(e){const i=this._inJobs,n=e.jobId,r=i.get(n);this._invokeQueue.push(e),r&&(r.controller&&r.controller.abort(),i.delete(n))}_onCloseMessage(){const e=this._client;this._close(),e&&"destroy"in e&&Xd.clients.get(this)===e&&e.destroy(),Xd.clients.delete(this),e!=null&&e.remoteClient&&(e.remoteClient=null)}_onInvokeMessage(e){const{methodName:i,jobId:n,data:r,abortable:s}=e,o=s?new AbortController:null,a=this._inJobs;let l,u=this._client,p=u[i];try{if(!p&&i&&i.includes(".")){const f=i.split(".");for(let m=0;m<f.length-1;m++)u=u[f[m]],p=u[f[m+1]]}if(typeof p!="function")throw new TypeError(`${i} is not a function`);l=p.call(u,r,{client:this,signal:o?o.signal:null})}catch(f){return void this._post({type:Xp,jobId:n,error:Km(f)})}Za(l)?(a.set(n,{controller:o,promise:l}),l.then(f=>{a.has(n)&&(a.delete(n),this._post({type:Xp,jobId:n},f))},f=>{a.has(n)&&(a.delete(n),en(f)||this._post({type:Xp,jobId:n,error:Km(f||{message:`Error encountered at method ${i}`})}))})):this._post({type:Xp,jobId:n},l)}_onOpenPortMessage(e){new Xd(e.port,{client:this._client})}_onOnMessage(e){const{port:i}=e,n=this._client.on(e.eventType,s=>{i.postMessage(s)}),r=Sg(e.port,"message",s=>{const o=Jm(s);(o==null?void 0:o.type)===hi.CLOSE&&(r.remove(),n.remove(),i.close())})}_onResponseMessage(e){const{jobId:i,error:n,data:r}=e,s=this._outJobs;if(!s.has(i))return;const o=s.get(i);s.delete(i),this._processWork(),Je(o.abortHandle),n?o.reject(F.fromJSON(JSON.parse(n))):o.resolve(r)}_post(e,i,n){return aE(this._port,e,i,n)}};pc.kernelInfo={buildDate:HP,fullVersion:FT,revision:VP},pc.clients=new Map;let fW=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new sb}destroy(){this.close()}get closed(){var e;return!((e=this._clients)!=null&&e.length)}open(e,i){return new Promise((n,r)=>{let s=!0;const o=a=>{Qe(i.signal),s&&(s=!1,a())};this._clients.length=e.length,this._clientPromises.length=e.length,this._inUseClients.length=e.length;for(let a=0;a<e.length;++a){const l=e[a];Za(l)?this._clientPromises[a]=l.then(u=>(this._clients[a]=new pc(u,i,this._ongoingJobsQueue),o(n),this._clients[a]),()=>(o(r),null)):(this._clients[a]=new pc(l,i,this._ongoingJobsQueue),this._clientPromises[a]=Promise.resolve(this._clients[a]),o(n))}})}broadcast(e,i,n){const r=new Array(this._clientPromises.length);for(let s=0;s<this._clientPromises.length;++s){const o=this._clientPromises[s];r[s]=o.then(a=>a==null?void 0:a.invoke(e,i,n))}return r}close(){let e;for(;e=this._ongoingJobsQueue.pop();)e.resolver.reject(Xe(`Worker closing, aborting job calling '${e.methodName}'`));for(const i of this._clientPromises)i.then(n=>n==null?void 0:n.close());this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0,oW(this)}invoke(e,i,n){let r;Array.isArray(n)?(J.getLogger("esri.core.workers.Connection").warn("invoke()","The transferList parameter is deprecated, use the options object instead"),r={transferList:n}):r=n;const s=Or();this._ongoingJobsQueue.push({methodName:e,data:i,invokeOptions:r,resolver:s});for(let o=0;o<this._clientPromises.length;o++){const a=this._clients[o];a?a.jobAdded():this._clientPromises[o].then(l=>l==null?void 0:l.jobAdded())}return s.promise}on(e,i){return Promise.all(this._clientPromises).then(()=>$c(this._clients.map(n=>n.on(e,i))))}openPorts(){return new Promise(e=>{const i=new Array(this._clientPromises.length);let n=i.length;for(let r=0;r<this._clientPromises.length;++r)this._clientPromises[r].then(s=>{s&&(i[r]=s.openPort()),--n==0&&e(i)})})}get test(){return{numClients:this._clients.length}}};const mW={async request(t,e){var o,a;const i=t.options,n=i.responseType;i.signal=e==null?void 0:e.signal,i.responseType=n==="native"||n==="native-request-init"?"native-request-init":n&&["blob","json","text"].includes(n)&&((o=DP(t.url))!=null&&o.after)?n:"array-buffer";const r=await $t(t.url,i),s={data:r.data,httpStatus:r.httpStatus,ssl:r.ssl};switch((a=r.requestOptions)==null?void 0:a.responseType){case"native-request-init":return delete s.data.signal,s;case"blob":s.data=await s.data.arrayBuffer();break;case"json":s.data=new TextEncoder().encode(JSON.stringify(s.data)).buffer;break;case"text":s.data=new TextEncoder().encode(s.data).buffer}return{result:s,transferList:[s.data]}}};let _m;var pL,fL;const gW=((pL=globalThis.esriConfig)==null?void 0:pL.locale)??((fL=globalThis.dojoConfig)==null?void 0:fL.locale);function hN(){var t;return gW??((t=globalThis.navigator)==null?void 0:t.language)??"en"}function Jn(){return _m===void 0&&(_m=hN()),_m}function yW(t=Jn()){const e=/^([a-zA-Z]{2,3})(?:[_\-]\w+)*$/.exec(t);return e==null?void 0:e[1].toLowerCase()}const Sm=[];function N1(t){return Sm.push(t),Ye(()=>Sm.splice(Sm.indexOf(t),1))}const v$=[];function lE(t){return v$.push(t),Ye(()=>Sm.splice(v$.indexOf(t),1))}function vW(){const t=hN();_m!==t&&(_m=t,[...v$].forEach(e=>{e.call(null,t)}),[...Sm].forEach(e=>{e.call(null,t)}))}var mL;(mL=globalThis.addEventListener)==null||mL.call(globalThis,"languagechange",vW);const TC=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Almaty"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);class $d extends Error{}class bW extends $d{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class wW extends $d{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class _W extends $d{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class Oh extends $d{}class pN extends $d{constructor(e){super(`Invalid unit ${e}`)}}class $n extends $d{}class ol extends $d{constructor(){super("Zone is an abstract class")}}const ee="numeric",Cs="short",Yn="long",ob={year:ee,month:ee,day:ee},fN={year:ee,month:Cs,day:ee},SW={year:ee,month:Cs,day:ee,weekday:Cs},mN={year:ee,month:Yn,day:ee},gN={year:ee,month:Yn,day:ee,weekday:Yn},yN={hour:ee,minute:ee},vN={hour:ee,minute:ee,second:ee},bN={hour:ee,minute:ee,second:ee,timeZoneName:Cs},wN={hour:ee,minute:ee,second:ee,timeZoneName:Yn},_N={hour:ee,minute:ee,hourCycle:"h23"},SN={hour:ee,minute:ee,second:ee,hourCycle:"h23"},$N={hour:ee,minute:ee,second:ee,hourCycle:"h23",timeZoneName:Cs},xN={hour:ee,minute:ee,second:ee,hourCycle:"h23",timeZoneName:Yn},TN={year:ee,month:ee,day:ee,hour:ee,minute:ee},EN={year:ee,month:ee,day:ee,hour:ee,minute:ee,second:ee},kN={year:ee,month:Cs,day:ee,hour:ee,minute:ee},MN={year:ee,month:Cs,day:ee,hour:ee,minute:ee,second:ee},$W={year:ee,month:Cs,day:ee,weekday:Cs,hour:ee,minute:ee},CN={year:ee,month:Yn,day:ee,hour:ee,minute:ee,timeZoneName:Cs},IN={year:ee,month:Yn,day:ee,hour:ee,minute:ee,second:ee,timeZoneName:Cs},ON={year:ee,month:Yn,day:ee,weekday:Yn,hour:ee,minute:ee,timeZoneName:Yn},AN={year:ee,month:Yn,day:ee,weekday:Yn,hour:ee,minute:ee,second:ee,timeZoneName:Yn};class Ag{get type(){throw new ol}get name(){throw new ol}get ianaName(){return this.name}get isUniversal(){throw new ol}offsetName(e,i){throw new ol}formatOffset(e,i){throw new ol}offset(e){throw new ol}equals(e){throw new ol}get isValid(){throw new ol}}let a_=null;class D1 extends Ag{static get instance(){return a_===null&&(a_=new D1),a_}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:i,locale:n}){return GN(e,i,n)}formatOffset(e,i){return $m(this.offset(e),i)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}let F0={};function xW(t){return F0[t]||(F0[t]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),F0[t]}const TW={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function EW(t,e){const i=t.format(e).replace(/\u200E/g,""),n=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(i),[,r,s,o,a,l,u,p]=n;return[o,r,s,a,l,u,p]}function kW(t,e){const i=t.formatToParts(e),n=[];for(let r=0;r<i.length;r++){const{type:s,value:o}=i[r],a=TW[s];s==="era"?n[a]=o:we(a)||(n[a]=parseInt(o,10))}return n}let Ty={};class Is extends Ag{static create(e){return Ty[e]||(Ty[e]=new Is(e)),Ty[e]}static resetCache(){Ty={},F0={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=Is.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:i,locale:n}){return GN(e,i,n,this.name)}formatOffset(e,i){return $m(this.offset(e),i)}offset(e){const i=new Date(e);if(isNaN(i))return NaN;const n=xW(this.name);let[r,s,o,a,l,u,p]=n.formatToParts?kW(n,i):EW(n,i);a==="BC"&&(r=-Math.abs(r)+1);const m=z1({year:r,month:s,day:o,hour:l===24?0:l,minute:u,second:p,millisecond:0});let g=+i;const y=g%1e3;return g-=y>=0?y:1e3+y,(m-g)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let EC={};function MW(t,e={}){const i=JSON.stringify([t,e]);let n=EC[i];return n||(n=new Intl.ListFormat(t,e),EC[i]=n),n}let b$={};function w$(t,e={}){const i=JSON.stringify([t,e]);let n=b$[i];return n||(n=new Intl.DateTimeFormat(t,e),b$[i]=n),n}let _$={};function CW(t,e={}){const i=JSON.stringify([t,e]);let n=_$[i];return n||(n=new Intl.NumberFormat(t,e),_$[i]=n),n}let S$={};function IW(t,e={}){const{base:i,...n}=e,r=JSON.stringify([t,n]);let s=S$[r];return s||(s=new Intl.RelativeTimeFormat(t,e),S$[r]=s),s}let xf=null;function OW(){return xf||(xf=new Intl.DateTimeFormat().resolvedOptions().locale,xf)}let kC={};function AW(t){let e=kC[t];if(!e){const i=new Intl.Locale(t);e="getWeekInfo"in i?i.getWeekInfo():i.weekInfo,kC[t]=e}return e}function LW(t){const e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));const i=t.indexOf("-u-");if(i===-1)return[t];{let n,r;try{n=w$(t).resolvedOptions(),r=t}catch{const l=t.substring(0,i);n=w$(l).resolvedOptions(),r=l}const{numberingSystem:s,calendar:o}=n;return[r,s,o]}}function PW(t,e,i){return(i||e)&&(t.includes("-u-")||(t+="-u"),i&&(t+=`-ca-${i}`),e&&(t+=`-nu-${e}`)),t}function RW(t){const e=[];for(let i=1;i<=12;i++){const n=ye.utc(2009,i,1);e.push(t(n))}return e}function NW(t){const e=[];for(let i=1;i<=7;i++){const n=ye.utc(2016,11,13+i);e.push(t(n))}return e}function Ey(t,e,i,n){const r=t.listingMode();return r==="error"?null:r==="en"?i(e):n(e)}function DW(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||new Intl.DateTimeFormat(t.intl).resolvedOptions().numberingSystem==="latn"}class FW{constructor(e,i,n){this.padTo=n.padTo||0,this.floor=n.floor||!1;const{padTo:r,floor:s,...o}=n;if(!i||Object.keys(o).length>0){const a={useGrouping:!1,...n};n.padTo>0&&(a.minimumIntegerDigits=n.padTo),this.inf=CW(e,a)}}format(e){if(this.inf){const i=this.floor?Math.floor(e):e;return this.inf.format(i)}else{const i=this.floor?Math.floor(e):hE(e,3);return Wt(i,this.padTo)}}}class zW{constructor(e,i,n){this.opts=n,this.originalZone=void 0;let r;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const o=-1*(e.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;e.offset!==0&&Is.create(a).valid?(r=a,this.dt=e):(r="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,r=e.zone.name):(r="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const s={...this.opts};s.timeZone=s.timeZone||r,this.dtf=w$(i,s)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(i=>{if(i.type==="timeZoneName"){const n=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...i,value:n}}else return i}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class jW{constructor(e,i,n){this.opts={style:"long",...n},!i&&zN()&&(this.rtf=IW(e,n))}format(e,i){return this.rtf?this.rtf.format(e,i):oZ(i,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,i){return this.rtf?this.rtf.formatToParts(e,i):[]}}const GW={firstDay:1,minimalDays:4,weekend:[6,7]};class tt{static fromOpts(e){return tt.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,i,n,r,s=!1){const o=e||Nt.defaultLocale,a=o||(s?"en-US":OW()),l=i||Nt.defaultNumberingSystem,u=n||Nt.defaultOutputCalendar,p=$$(r)||Nt.defaultWeekSettings;return new tt(a,l,u,p,o)}static resetCache(){xf=null,b$={},_$={},S$={}}static fromObject({locale:e,numberingSystem:i,outputCalendar:n,weekSettings:r}={}){return tt.create(e,i,n,r)}constructor(e,i,n,r,s){const[o,a,l]=LW(e);this.locale=o,this.numberingSystem=i||a||null,this.outputCalendar=n||l||null,this.weekSettings=r,this.intl=PW(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=DW(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),i=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&i?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:tt.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,$$(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,i=!1){return Ey(this,e,VN,()=>{const n=i?{month:e,day:"numeric"}:{month:e},r=i?"format":"standalone";return this.monthsCache[r][e]||(this.monthsCache[r][e]=RW(s=>this.extract(s,n,"month"))),this.monthsCache[r][e]})}weekdays(e,i=!1){return Ey(this,e,WN,()=>{const n=i?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},r=i?"format":"standalone";return this.weekdaysCache[r][e]||(this.weekdaysCache[r][e]=NW(s=>this.extract(s,n,"weekday"))),this.weekdaysCache[r][e]})}meridiems(){return Ey(this,void 0,()=>ZN,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[ye.utc(2016,11,13,9),ye.utc(2016,11,13,19)].map(i=>this.extract(i,e,"dayperiod"))}return this.meridiemCache})}eras(e){return Ey(this,e,KN,()=>{const i={era:e};return this.eraCache[e]||(this.eraCache[e]=[ye.utc(-40,1,1),ye.utc(2017,1,1)].map(n=>this.extract(n,i,"era"))),this.eraCache[e]})}extract(e,i,n){const r=this.dtFormatter(e,i),s=r.formatToParts(),o=s.find(a=>a.type.toLowerCase()===n);return o?o.value:null}numberFormatter(e={}){return new FW(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,i={}){return new zW(e,this.intl,i)}relFormatter(e={}){return new jW(this.intl,this.isEnglish(),e)}listFormatter(e={}){return MW(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:jN()?AW(this.locale):GW}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}}let l_=null;class zi extends Ag{static get utcInstance(){return l_===null&&(l_=new zi(0)),l_}static instance(e){return e===0?zi.utcInstance:new zi(e)}static parseSpecifier(e){if(e){const i=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(i)return new zi(j1(i[1],i[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${$m(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${$m(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,i){return $m(this.fixed,i)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class UW extends Ag{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Kl(t,e){if(we(t)||t===null)return e;if(t instanceof Ag)return t;if(BW(t)){const i=t.toLowerCase();return i==="default"?e:i==="local"||i==="system"?D1.instance:i==="utc"||i==="gmt"?zi.utcInstance:zi.parseSpecifier(i)||Is.create(t)}else return Ku(t)?zi.instance(t):typeof t=="object"&&"offset"in t&&typeof t.offset=="function"?t:new UW(t)}let MC=()=>Date.now(),CC="system",IC=null,OC=null,AC=null,LC=60,PC,RC=null;class Nt{static get now(){return MC}static set now(e){MC=e}static set defaultZone(e){CC=e}static get defaultZone(){return Kl(CC,D1.instance)}static get defaultLocale(){return IC}static set defaultLocale(e){IC=e}static get defaultNumberingSystem(){return OC}static set defaultNumberingSystem(e){OC=e}static get defaultOutputCalendar(){return AC}static set defaultOutputCalendar(e){AC=e}static get defaultWeekSettings(){return RC}static set defaultWeekSettings(e){RC=$$(e)}static get twoDigitCutoffYear(){return LC}static set twoDigitCutoffYear(e){LC=e%100}static get throwOnInvalid(){return PC}static set throwOnInvalid(e){PC=e}static resetCaches(){tt.resetCache(),Is.resetCache()}}class vs{constructor(e,i){this.reason=e,this.explanation=i}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const LN=[0,31,59,90,120,151,181,212,243,273,304,334],PN=[0,31,60,91,121,152,182,213,244,274,305,335];function Er(t,e){return new vs("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function cE(t,e,i){const n=new Date(Date.UTC(t,e-1,i));t<100&&t>=0&&n.setUTCFullYear(n.getUTCFullYear()-1900);const r=n.getUTCDay();return r===0?7:r}function RN(t,e,i){return i+(Lg(t)?PN:LN)[e-1]}function NN(t,e){const i=Lg(t)?PN:LN,n=i.findIndex(s=>s<e),r=e-i[n];return{month:n+1,day:r}}function uE(t,e){return(t-e+7)%7+1}function ab(t,e=4,i=1){const{year:n,month:r,day:s}=t,o=RN(n,r,s),a=uE(cE(n,r,s),i);let l=Math.floor((o-a+14-e)/7),u;return l<1?(u=n-1,l=Ym(u,e,i)):l>Ym(n,e,i)?(u=n+1,l=1):u=n,{weekYear:u,weekNumber:l,weekday:a,...G1(t)}}function NC(t,e=4,i=1){const{weekYear:n,weekNumber:r,weekday:s}=t,o=uE(cE(n,1,e),i),a=Uh(n);let l=r*7+s-o-7+e,u;l<1?(u=n-1,l+=Uh(u)):l>a?(u=n+1,l-=Uh(n)):u=n;const{month:p,day:f}=NN(u,l);return{year:u,month:p,day:f,...G1(t)}}function c_(t){const{year:e,month:i,day:n}=t,r=RN(e,i,n);return{year:e,ordinal:r,...G1(t)}}function DC(t){const{year:e,ordinal:i}=t,{month:n,day:r}=NN(e,i);return{year:e,month:n,day:r,...G1(t)}}function FC(t,e){if(!we(t.localWeekday)||!we(t.localWeekNumber)||!we(t.localWeekYear)){if(!we(t.weekday)||!we(t.weekNumber)||!we(t.weekYear))throw new Oh("Cannot mix locale-based week fields with ISO-based week fields");return we(t.localWeekday)||(t.weekday=t.localWeekday),we(t.localWeekNumber)||(t.weekNumber=t.localWeekNumber),we(t.localWeekYear)||(t.weekYear=t.localWeekYear),delete t.localWeekday,delete t.localWeekNumber,delete t.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function HW(t,e=4,i=1){const n=F1(t.weekYear),r=kr(t.weekNumber,1,Ym(t.weekYear,e,i)),s=kr(t.weekday,1,7);return n?r?s?!1:Er("weekday",t.weekday):Er("week",t.weekNumber):Er("weekYear",t.weekYear)}function VW(t){const e=F1(t.year),i=kr(t.ordinal,1,Uh(t.year));return e?i?!1:Er("ordinal",t.ordinal):Er("year",t.year)}function DN(t){const e=F1(t.year),i=kr(t.month,1,12),n=kr(t.day,1,lb(t.year,t.month));return e?i?n?!1:Er("day",t.day):Er("month",t.month):Er("year",t.year)}function FN(t){const{hour:e,minute:i,second:n,millisecond:r}=t,s=kr(e,0,23)||e===24&&i===0&&n===0&&r===0,o=kr(i,0,59),a=kr(n,0,59),l=kr(r,0,999);return s?o?a?l?!1:Er("millisecond",r):Er("second",n):Er("minute",i):Er("hour",e)}function we(t){return typeof t>"u"}function Ku(t){return typeof t=="number"}function F1(t){return typeof t=="number"&&t%1===0}function BW(t){return typeof t=="string"}function qW(t){return Object.prototype.toString.call(t)==="[object Date]"}function zN(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function jN(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function WW(t){return Array.isArray(t)?t:[t]}function zC(t,e,i){if(t.length!==0)return t.reduce((n,r)=>{const s=[e(r),r];return n&&i(n[0],s[0])===n[0]?n:s},null)[1]}function ZW(t,e){return e.reduce((i,n)=>(i[n]=t[n],i),{})}function lp(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function $$(t){if(t==null)return null;if(typeof t!="object")throw new $n("Week settings must be an object");if(!kr(t.firstDay,1,7)||!kr(t.minimalDays,1,7)||!Array.isArray(t.weekend)||t.weekend.some(e=>!kr(e,1,7)))throw new $n("Invalid week settings");return{firstDay:t.firstDay,minimalDays:t.minimalDays,weekend:Array.from(t.weekend)}}function kr(t,e,i){return F1(t)&&t>=e&&t<=i}function KW(t,e){return t-e*Math.floor(t/e)}function Wt(t,e=2){const i=t<0;let n;return i?n="-"+(""+-t).padStart(e,"0"):n=(""+t).padStart(e,"0"),n}function Ul(t){if(!(we(t)||t===null||t===""))return parseInt(t,10)}function Rc(t){if(!(we(t)||t===null||t===""))return parseFloat(t)}function dE(t){if(!(we(t)||t===null||t==="")){const e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function hE(t,e,i=!1){const n=10**e;return(i?Math.trunc:Math.round)(t*n)/n}function Lg(t){return t%4===0&&(t%100!==0||t%400===0)}function Uh(t){return Lg(t)?366:365}function lb(t,e){const i=KW(e-1,12)+1,n=t+(e-i)/12;return i===2?Lg(n)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function z1(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function jC(t,e,i){return-uE(cE(t,1,e),i)+e-1}function Ym(t,e=4,i=1){const n=jC(t,e,i),r=jC(t+1,e,i);return(Uh(t)-n+r)/7}function x$(t){return t>99?t:t>Nt.twoDigitCutoffYear?1900+t:2e3+t}function GN(t,e,i,n=null){const r=new Date(t),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};n&&(s.timeZone=n);const o={timeZoneName:e,...s},a=new Intl.DateTimeFormat(i,o).formatToParts(r).find(l=>l.type.toLowerCase()==="timezonename");return a?a.value:null}function j1(t,e){let i=parseInt(t,10);Number.isNaN(i)&&(i=0);const n=parseInt(e,10)||0,r=i<0||Object.is(i,-0)?-n:n;return i*60+r}function UN(t){const e=Number(t);if(typeof t=="boolean"||t===""||Number.isNaN(e))throw new $n(`Invalid unit value ${t}`);return e}function cb(t,e){const i={};for(const n in t)if(lp(t,n)){const r=t[n];if(r==null)continue;i[e(n)]=UN(r)}return i}function $m(t,e){const i=Math.trunc(Math.abs(t/60)),n=Math.trunc(Math.abs(t%60)),r=t>=0?"+":"-";switch(e){case"short":return`${r}${Wt(i,2)}:${Wt(n,2)}`;case"narrow":return`${r}${i}${n>0?`:${n}`:""}`;case"techie":return`${r}${Wt(i,2)}${Wt(n,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function G1(t){return ZW(t,["hour","minute","second","millisecond"])}const JW=["January","February","March","April","May","June","July","August","September","October","November","December"],HN=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],YW=["J","F","M","A","M","J","J","A","S","O","N","D"];function VN(t){switch(t){case"narrow":return[...YW];case"short":return[...HN];case"long":return[...JW];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const BN=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],qN=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],XW=["M","T","W","T","F","S","S"];function WN(t){switch(t){case"narrow":return[...XW];case"short":return[...qN];case"long":return[...BN];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const ZN=["AM","PM"],QW=["Before Christ","Anno Domini"],eZ=["BC","AD"],tZ=["B","A"];function KN(t){switch(t){case"narrow":return[...tZ];case"short":return[...eZ];case"long":return[...QW];default:return null}}function iZ(t){return ZN[t.hour<12?0:1]}function nZ(t,e){return WN(e)[t.weekday-1]}function rZ(t,e){return VN(e)[t.month-1]}function sZ(t,e){return KN(e)[t.year<0?0:1]}function oZ(t,e,i="always",n=!1){const r={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(t)===-1;if(i==="auto"&&s){const f=t==="days";switch(e){case 1:return f?"tomorrow":`next ${r[t][0]}`;case-1:return f?"yesterday":`last ${r[t][0]}`;case 0:return f?"today":`this ${r[t][0]}`}}const o=Object.is(e,-0)||e<0,a=Math.abs(e),l=a===1,u=r[t],p=n?l?u[1]:u[2]||u[1]:l?r[t][0]:t;return o?`${a} ${p} ago`:`in ${a} ${p}`}function GC(t,e){let i="";for(const n of t)n.literal?i+=n.val:i+=e(n.val);return i}const aZ={D:ob,DD:fN,DDD:mN,DDDD:gN,t:yN,tt:vN,ttt:bN,tttt:wN,T:_N,TT:SN,TTT:$N,TTTT:xN,f:TN,ff:kN,fff:CN,ffff:ON,F:EN,FF:MN,FFF:IN,FFFF:AN};class Fi{static create(e,i={}){return new Fi(e,i)}static parseFormat(e){let i=null,n="",r=!1;const s=[];for(let o=0;o<e.length;o++){const a=e.charAt(o);a==="'"?(n.length>0&&s.push({literal:r||/^\s+$/.test(n),val:n}),i=null,n="",r=!r):r||a===i?n+=a:(n.length>0&&s.push({literal:/^\s+$/.test(n),val:n}),n=a,i=a)}return n.length>0&&s.push({literal:r||/^\s+$/.test(n),val:n}),s}static macroTokenToFormatOpts(e){return aZ[e]}constructor(e,i){this.opts=i,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,i){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...i}).format()}dtFormatter(e,i={}){return this.loc.dtFormatter(e,{...this.opts,...i})}formatDateTime(e,i){return this.dtFormatter(e,i).format()}formatDateTimeParts(e,i){return this.dtFormatter(e,i).formatToParts()}formatInterval(e,i){return this.dtFormatter(e.start,i).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,i){return this.dtFormatter(e,i).resolvedOptions()}num(e,i=0){if(this.opts.forceSimple)return Wt(e,i);const n={...this.opts};return i>0&&(n.padTo=i),this.loc.numberFormatter(n).format(e)}formatDateTimeFromString(e,i){const n=this.loc.listingMode()==="en",r=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(g,y)=>this.loc.extract(e,g,y),o=g=>e.isOffsetFixed&&e.offset===0&&g.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,g.format):"",a=()=>n?iZ(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(g,y)=>n?rZ(e,g):s(y?{month:g}:{month:g,day:"numeric"},"month"),u=(g,y)=>n?nZ(e,g):s(y?{weekday:g}:{weekday:g,month:"long",day:"numeric"},"weekday"),p=g=>{const y=Fi.macroTokenToFormatOpts(g);return y?this.formatWithSystemDefault(e,y):g},f=g=>n?sZ(e,g):s({era:g},"era"),m=g=>{switch(g){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return a();case"d":return r?s({day:"numeric"},"day"):this.num(e.day);case"dd":return r?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return u("short",!0);case"cccc":return u("long",!0);case"ccccc":return u("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return u("short",!1);case"EEEE":return u("long",!1);case"EEEEE":return u("narrow",!1);case"L":return r?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return r?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return r?s({month:"numeric"},"month"):this.num(e.month);case"MM":return r?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return r?s({year:"numeric"},"year"):this.num(e.year);case"yy":return r?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return r?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return r?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return f("short");case"GG":return f("long");case"GGGGG":return f("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return p(g)}};return GC(Fi.parseFormat(i),m)}formatDurationFromString(e,i){const n=l=>{switch(l[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},r=l=>u=>{const p=n(u);return p?this.num(l.get(p),u.length):u},s=Fi.parseFormat(i),o=s.reduce((l,{literal:u,val:p})=>u?l:l.concat(p),[]),a=e.shiftTo(...o.map(n).filter(l=>l));return GC(s,r(a))}}const JN=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Ip(...t){const e=t.reduce((i,n)=>i+n.source,"");return RegExp(`^${e}$`)}function Op(...t){return e=>t.reduce(([i,n,r],s)=>{const[o,a,l]=s(e,r);return[{...i,...o},a||n,l]},[{},null,1]).slice(0,2)}function Ap(t,...e){if(t==null)return[null,null];for(const[i,n]of e){const r=i.exec(t);if(r)return n(r)}return[null,null]}function YN(...t){return(e,i)=>{const n={};let r;for(r=0;r<t.length;r++)n[t[r]]=Ul(e[i+r]);return[n,null,i+r]}}const XN=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,lZ=`(?:${XN.source}?(?:\\[(${JN.source})\\])?)?`,pE=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,QN=RegExp(`${pE.source}${lZ}`),fE=RegExp(`(?:T${QN.source})?`),cZ=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,uZ=/(\d{4})-?W(\d\d)(?:-?(\d))?/,dZ=/(\d{4})-?(\d{3})/,hZ=YN("weekYear","weekNumber","weekDay"),pZ=YN("year","ordinal"),fZ=/(\d{4})-(\d\d)-(\d\d)/,e5=RegExp(`${pE.source} ?(?:${XN.source}|(${JN.source}))?`),mZ=RegExp(`(?: ${e5.source})?`);function Hh(t,e,i){const n=t[e];return we(n)?i:Ul(n)}function gZ(t,e){return[{year:Hh(t,e),month:Hh(t,e+1,1),day:Hh(t,e+2,1)},null,e+3]}function Lp(t,e){return[{hours:Hh(t,e,0),minutes:Hh(t,e+1,0),seconds:Hh(t,e+2,0),milliseconds:dE(t[e+3])},null,e+4]}function Pg(t,e){const i=!t[e]&&!t[e+1],n=j1(t[e+1],t[e+2]),r=i?null:zi.instance(n);return[{},r,e+3]}function Rg(t,e){const i=t[e]?Is.create(t[e]):null;return[{},i,e+1]}const yZ=RegExp(`^T?${pE.source}$`),vZ=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function bZ(t){const[e,i,n,r,s,o,a,l,u]=t,p=e[0]==="-",f=l&&l[0]==="-",m=(g,y=!1)=>g!==void 0&&(y||g&&p)?-g:g;return[{years:m(Rc(i)),months:m(Rc(n)),weeks:m(Rc(r)),days:m(Rc(s)),hours:m(Rc(o)),minutes:m(Rc(a)),seconds:m(Rc(l),l==="-0"),milliseconds:m(dE(u),f)}]}const wZ={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function mE(t,e,i,n,r,s,o){const a={year:e.length===2?x$(Ul(e)):Ul(e),month:HN.indexOf(i)+1,day:Ul(n),hour:Ul(r),minute:Ul(s)};return o&&(a.second=Ul(o)),t&&(a.weekday=t.length>3?BN.indexOf(t)+1:qN.indexOf(t)+1),a}const _Z=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function SZ(t){const[,e,i,n,r,s,o,a,l,u,p,f]=t,m=mE(e,r,n,i,s,o,a);let g;return l?g=wZ[l]:u?g=0:g=j1(p,f),[m,new zi(g)]}function $Z(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const xZ=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,TZ=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,EZ=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function UC(t){const[,e,i,n,r,s,o,a]=t;return[mE(e,r,n,i,s,o,a),zi.utcInstance]}function kZ(t){const[,e,i,n,r,s,o,a]=t;return[mE(e,a,i,n,r,s,o),zi.utcInstance]}const MZ=Ip(cZ,fE),CZ=Ip(uZ,fE),IZ=Ip(dZ,fE),OZ=Ip(QN),t5=Op(gZ,Lp,Pg,Rg),AZ=Op(hZ,Lp,Pg,Rg),LZ=Op(pZ,Lp,Pg,Rg),PZ=Op(Lp,Pg,Rg);function RZ(t){return Ap(t,[MZ,t5],[CZ,AZ],[IZ,LZ],[OZ,PZ])}function NZ(t){return Ap($Z(t),[_Z,SZ])}function DZ(t){return Ap(t,[xZ,UC],[TZ,UC],[EZ,kZ])}function FZ(t){return Ap(t,[vZ,bZ])}const zZ=Op(Lp);function jZ(t){return Ap(t,[yZ,zZ])}const GZ=Ip(fZ,mZ),UZ=Ip(e5),HZ=Op(Lp,Pg,Rg);function VZ(t){return Ap(t,[GZ,t5],[UZ,HZ])}const HC="Invalid Duration",i5={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},BZ={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...i5},ar=146097/400,Dd=146097/4800,qZ={years:{quarters:4,months:12,weeks:ar/7,days:ar,hours:ar*24,minutes:ar*24*60,seconds:ar*24*60*60,milliseconds:ar*24*60*60*1e3},quarters:{months:3,weeks:ar/28,days:ar/4,hours:ar*24/4,minutes:ar*24*60/4,seconds:ar*24*60*60/4,milliseconds:ar*24*60*60*1e3/4},months:{weeks:Dd/7,days:Dd,hours:Dd*24,minutes:Dd*24*60,seconds:Dd*24*60*60,milliseconds:Dd*24*60*60*1e3},...i5},Du=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],WZ=Du.slice(0).reverse();function al(t,e,i=!1){const n={values:i?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new Re(n)}function n5(t,e){let i=e.milliseconds??0;for(const n of WZ.slice(1))e[n]&&(i+=e[n]*t[n].milliseconds);return i}function VC(t,e){const i=n5(t,e)<0?-1:1;Du.reduceRight((n,r)=>{if(we(e[r]))return n;if(n){const s=e[n]*i,o=t[r][n],a=Math.floor(s/o);e[r]+=a*i,e[n]-=a*o*i}return r},null),Du.reduce((n,r)=>{if(we(e[r]))return n;if(n){const s=e[n]%1;e[n]-=s,e[r]+=s*t[n][r]}return r},null)}function ZZ(t){const e={};for(const[i,n]of Object.entries(t))n!==0&&(e[i]=n);return e}class Re{constructor(e){const i=e.conversionAccuracy==="longterm"||!1;let n=i?qZ:BZ;e.matrix&&(n=e.matrix),this.values=e.values,this.loc=e.loc||tt.create(),this.conversionAccuracy=i?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=n,this.isLuxonDuration=!0}static fromMillis(e,i){return Re.fromObject({milliseconds:e},i)}static fromObject(e,i={}){if(e==null||typeof e!="object")throw new $n(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new Re({values:cb(e,Re.normalizeUnit),loc:tt.fromObject(i),conversionAccuracy:i.conversionAccuracy,matrix:i.matrix})}static fromDurationLike(e){if(Ku(e))return Re.fromMillis(e);if(Re.isDuration(e))return e;if(typeof e=="object")return Re.fromObject(e);throw new $n(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,i){const[n]=FZ(e);return n?Re.fromObject(n,i):Re.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,i){const[n]=jZ(e);return n?Re.fromObject(n,i):Re.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,i=null){if(!e)throw new $n("need to specify a reason the Duration is invalid");const n=e instanceof vs?e:new vs(e,i);if(Nt.throwOnInvalid)throw new _W(n);return new Re({invalid:n})}static normalizeUnit(e){const i={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!i)throw new pN(e);return i}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,i={}){const n={...i,floor:i.round!==!1&&i.floor!==!1};return this.isValid?Fi.create(this.loc,n).formatDurationFromString(this,e):HC}toHuman(e={}){if(!this.isValid)return HC;const i=Du.map(n=>{const r=this.values[n];return we(r)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:n.slice(0,-1)}).format(r)}).filter(n=>n);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(i)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=hE(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const i=this.toMillis();return i<0||i>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},ye.fromMillis(i,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?n5(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const i=Re.fromDurationLike(e),n={};for(const r of Du)(lp(i.values,r)||lp(this.values,r))&&(n[r]=i.get(r)+this.get(r));return al(this,{values:n},!0)}minus(e){if(!this.isValid)return this;const i=Re.fromDurationLike(e);return this.plus(i.negate())}mapUnits(e){if(!this.isValid)return this;const i={};for(const n of Object.keys(this.values))i[n]=UN(e(this.values[n],n));return al(this,{values:i},!0)}get(e){return this[Re.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const i={...this.values,...cb(e,Re.normalizeUnit)};return al(this,{values:i})}reconfigure({locale:e,numberingSystem:i,conversionAccuracy:n,matrix:r}={}){const o={loc:this.loc.clone({locale:e,numberingSystem:i}),matrix:r,conversionAccuracy:n};return al(this,o)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return VC(this.matrix,e),al(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=ZZ(this.normalize().shiftToAll().toObject());return al(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(o=>Re.normalizeUnit(o));const i={},n={},r=this.toObject();let s;for(const o of Du)if(e.indexOf(o)>=0){s=o;let a=0;for(const u in n)a+=this.matrix[u][o]*n[u],n[u]=0;Ku(r[o])&&(a+=r[o]);const l=Math.trunc(a);i[o]=l,n[o]=(a*1e3-l*1e3)/1e3}else Ku(r[o])&&(n[o]=r[o]);for(const o in n)n[o]!==0&&(i[s]+=o===s?n[o]:n[o]/this.matrix[s][o]);return VC(this.matrix,i),al(this,{values:i},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const i of Object.keys(this.values))e[i]=this.values[i]===0?0:-this.values[i];return al(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function i(n,r){return n===void 0||n===0?r===void 0||r===0:n===r}for(const n of Du)if(!i(this.values[n],e.values[n]))return!1;return!0}}const Fd="Invalid Interval";function KZ(t,e){return!t||!t.isValid?At.invalid("missing or invalid start"):!e||!e.isValid?At.invalid("missing or invalid end"):e<t?At.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}class At{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,i=null){if(!e)throw new $n("need to specify a reason the Interval is invalid");const n=e instanceof vs?e:new vs(e,i);if(Nt.throwOnInvalid)throw new wW(n);return new At({invalid:n})}static fromDateTimes(e,i){const n=ef(e),r=ef(i),s=KZ(n,r);return s??new At({start:n,end:r})}static after(e,i){const n=Re.fromDurationLike(i),r=ef(e);return At.fromDateTimes(r,r.plus(n))}static before(e,i){const n=Re.fromDurationLike(i),r=ef(e);return At.fromDateTimes(r.minus(n),r)}static fromISO(e,i){const[n,r]=(e||"").split("/",2);if(n&&r){let s,o;try{s=ye.fromISO(n,i),o=s.isValid}catch{o=!1}let a,l;try{a=ye.fromISO(r,i),l=a.isValid}catch{l=!1}if(o&&l)return At.fromDateTimes(s,a);if(o){const u=Re.fromISO(r,i);if(u.isValid)return At.after(s,u)}else if(l){const u=Re.fromISO(n,i);if(u.isValid)return At.before(a,u)}}return At.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",i){if(!this.isValid)return NaN;const n=this.start.startOf(e,i);let r;return i!=null&&i.useLocaleWeeks?r=this.end.reconfigure({locale:n.locale}):r=this.end,r=r.startOf(e,i),Math.floor(r.diff(n,e).get(e))+(r.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:i}={}){return this.isValid?At.fromDateTimes(e||this.s,i||this.e):this}splitAt(...e){if(!this.isValid)return[];const i=e.map(ef).filter(o=>this.contains(o)).sort((o,a)=>o.toMillis()-a.toMillis()),n=[];let{s:r}=this,s=0;for(;r<this.e;){const o=i[s]||this.e,a=+o>+this.e?this.e:o;n.push(At.fromDateTimes(r,a)),r=a,s+=1}return n}splitBy(e){const i=Re.fromDurationLike(e);if(!this.isValid||!i.isValid||i.as("milliseconds")===0)return[];let{s:n}=this,r=1,s;const o=[];for(;n<this.e;){const a=this.start.plus(i.mapUnits(l=>l*r));s=+a>+this.e?this.e:a,o.push(At.fromDateTimes(n,s)),n=s,r+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const i=this.s>e.s?this.s:e.s,n=this.e<e.e?this.e:e.e;return i>=n?null:At.fromDateTimes(i,n)}union(e){if(!this.isValid)return this;const i=this.s<e.s?this.s:e.s,n=this.e>e.e?this.e:e.e;return At.fromDateTimes(i,n)}static merge(e){const[i,n]=e.sort((r,s)=>r.s-s.s).reduce(([r,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[r,s.union(o)]:[r.concat([s]),o]:[r,o],[[],null]);return n&&i.push(n),i}static xor(e){let i=null,n=0;const r=[],s=e.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),o=Array.prototype.concat(...s),a=o.sort((l,u)=>l.time-u.time);for(const l of a)n+=l.type==="s"?1:-1,n===1?i=l.time:(i&&+i!=+l.time&&r.push(At.fromDateTimes(i,l.time)),i=null);return At.merge(r)}difference(...e){return At.xor([this].concat(e)).map(i=>this.intersection(i)).filter(i=>i&&!i.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} â€“ ${this.e.toISO()})`:Fd}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=ob,i={}){return this.isValid?Fi.create(this.s.loc.clone(i),e).formatInterval(this):Fd}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:Fd}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Fd}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:Fd}toFormat(e,{separator:i=" â€“ "}={}){return this.isValid?`${this.s.toFormat(e)}${i}${this.e.toFormat(e)}`:Fd}toDuration(e,i){return this.isValid?this.e.diff(this.s,e,i):Re.invalid(this.invalidReason)}mapEndpoints(e){return At.fromDateTimes(e(this.s),e(this.e))}}class ky{static hasDST(e=Nt.defaultZone){const i=ye.now().setZone(e).set({month:12});return!e.isUniversal&&i.offset!==i.set({month:6}).offset}static isValidIANAZone(e){return Is.isValidZone(e)}static normalizeZone(e){return Kl(e,Nt.defaultZone)}static getStartOfWeek({locale:e=null,locObj:i=null}={}){return(i||tt.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:i=null}={}){return(i||tt.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:i=null}={}){return(i||tt.create(e)).getWeekendDays().slice()}static months(e="long",{locale:i=null,numberingSystem:n=null,locObj:r=null,outputCalendar:s="gregory"}={}){return(r||tt.create(i,n,s)).months(e)}static monthsFormat(e="long",{locale:i=null,numberingSystem:n=null,locObj:r=null,outputCalendar:s="gregory"}={}){return(r||tt.create(i,n,s)).months(e,!0)}static weekdays(e="long",{locale:i=null,numberingSystem:n=null,locObj:r=null}={}){return(r||tt.create(i,n,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:i=null,numberingSystem:n=null,locObj:r=null}={}){return(r||tt.create(i,n,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return tt.create(e).meridiems()}static eras(e="short",{locale:i=null}={}){return tt.create(i,null,"gregory").eras(e)}static features(){return{relative:zN(),localeWeek:jN()}}}function BC(t,e){const i=r=>r.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),n=i(e)-i(t);return Math.floor(Re.fromMillis(n).as("days"))}function JZ(t,e,i){const n=[["years",(l,u)=>u.year-l.year],["quarters",(l,u)=>u.quarter-l.quarter+(u.year-l.year)*4],["months",(l,u)=>u.month-l.month+(u.year-l.year)*12],["weeks",(l,u)=>{const p=BC(l,u);return(p-p%7)/7}],["days",BC]],r={},s=t;let o,a;for(const[l,u]of n)i.indexOf(l)>=0&&(o=l,r[l]=u(t,e),a=s.plus(r),a>e?(r[l]--,t=s.plus(r),t>e&&(a=t,r[l]--,t=s.plus(r))):t=a);return[t,r,a,o]}function YZ(t,e,i,n){let[r,s,o,a]=JZ(t,e,i);const l=e-r,u=i.filter(f=>["hours","minutes","seconds","milliseconds"].indexOf(f)>=0);u.length===0&&(o<e&&(o=r.plus({[a]:1})),o!==r&&(s[a]=(s[a]||0)+l/(o-r)));const p=Re.fromObject(s,n);return u.length>0?Re.fromMillis(l,n).shiftTo(...u).plus(p):p}const gE={arab:"[Ù -Ù©]",arabext:"[Û°-Û¹]",bali:"[á­-á­™]",beng:"[à§¦-à§¯]",deva:"[à¥¦-à¥¯]",fullwide:"[ï¼-ï¼™]",gujr:"[à«¦-à«¯]",hanidec:"[ã€‡|ä¸€|äºŒ|ä¸‰|å››|äº”|å…­|ä¸ƒ|å…«|ä¹]",khmr:"[áŸ -áŸ©]",knda:"[à³¦-à³¯]",laoo:"[à»-à»™]",limb:"[á¥†-á¥]",mlym:"[àµ¦-àµ¯]",mong:"[á -á ™]",mymr:"[á€-á‰]",orya:"[à­¦-à­¯]",tamldec:"[à¯¦-à¯¯]",telu:"[à±¦-à±¯]",thai:"[à¹-à¹™]",tibt:"[à¼ -à¼©]",latn:"\\d"},qC={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},XZ=gE.hanidec.replace(/[\[|\]]/g,"").split("");function QZ(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let i=0;i<t.length;i++){const n=t.charCodeAt(i);if(t[i].search(gE.hanidec)!==-1)e+=XZ.indexOf(t[i]);else for(const r in qC){const[s,o]=qC[r];n>=s&&n<=o&&(e+=n-s)}}return parseInt(e,10)}else return e}function Hr({numberingSystem:t},e=""){return new RegExp(`${gE[t||"latn"]}${e}`)}const eK="missing Intl.DateTimeFormat.formatToParts support";function je(t,e=i=>i){return{regex:t,deser:([i])=>e(QZ(i))}}const tK="Â ",r5=`[ ${tK}]`,s5=new RegExp(r5,"g");function iK(t){return t.replace(/\./g,"\\.?").replace(s5,r5)}function WC(t){return t.replace(/\./g,"").replace(s5," ").toLowerCase()}function Vr(t,e){return t===null?null:{regex:RegExp(t.map(iK).join("|")),deser:([i])=>t.findIndex(n=>WC(i)===WC(n))+e}}function ZC(t,e){return{regex:t,deser:([,i,n])=>j1(i,n),groups:e}}function My(t){return{regex:t,deser:([e])=>e}}function nK(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function rK(t,e){const i=Hr(e),n=Hr(e,"{2}"),r=Hr(e,"{3}"),s=Hr(e,"{4}"),o=Hr(e,"{6}"),a=Hr(e,"{1,2}"),l=Hr(e,"{1,3}"),u=Hr(e,"{1,6}"),p=Hr(e,"{1,9}"),f=Hr(e,"{2,4}"),m=Hr(e,"{4,6}"),g=b=>({regex:RegExp(nK(b.val)),deser:([_])=>_,literal:!0}),v=(b=>{if(t.literal)return g(b);switch(b.val){case"G":return Vr(e.eras("short"),0);case"GG":return Vr(e.eras("long"),0);case"y":return je(u);case"yy":return je(f,x$);case"yyyy":return je(s);case"yyyyy":return je(m);case"yyyyyy":return je(o);case"M":return je(a);case"MM":return je(n);case"MMM":return Vr(e.months("short",!0),1);case"MMMM":return Vr(e.months("long",!0),1);case"L":return je(a);case"LL":return je(n);case"LLL":return Vr(e.months("short",!1),1);case"LLLL":return Vr(e.months("long",!1),1);case"d":return je(a);case"dd":return je(n);case"o":return je(l);case"ooo":return je(r);case"HH":return je(n);case"H":return je(a);case"hh":return je(n);case"h":return je(a);case"mm":return je(n);case"m":return je(a);case"q":return je(a);case"qq":return je(n);case"s":return je(a);case"ss":return je(n);case"S":return je(l);case"SSS":return je(r);case"u":return My(p);case"uu":return My(a);case"uuu":return je(i);case"a":return Vr(e.meridiems(),0);case"kkkk":return je(s);case"kk":return je(f,x$);case"W":return je(a);case"WW":return je(n);case"E":case"c":return je(i);case"EEE":return Vr(e.weekdays("short",!1),1);case"EEEE":return Vr(e.weekdays("long",!1),1);case"ccc":return Vr(e.weekdays("short",!0),1);case"cccc":return Vr(e.weekdays("long",!0),1);case"Z":case"ZZ":return ZC(new RegExp(`([+-]${a.source})(?::(${n.source}))?`),2);case"ZZZ":return ZC(new RegExp(`([+-]${a.source})(${n.source})?`),2);case"z":return My(/[a-z_+-/]{1,256}?/i);case" ":return My(/[^\S\n\r]/);default:return g(b)}})(t)||{invalidReason:eK};return v.token=t,v}const sK={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function oK(t,e,i){const{type:n,value:r}=t;if(n==="literal"){const l=/^\s+$/.test(r);return{literal:!l,val:l?" ":r}}const s=e[n];let o=n;n==="hour"&&(e.hour12!=null?o=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?o="hour12":o="hour24":o=i.hour12?"hour12":"hour24");let a=sK[o];if(typeof a=="object"&&(a=a[s]),a)return{literal:!1,val:a}}function aK(t){return[`^${t.map(i=>i.regex).reduce((i,n)=>`${i}(${n.source})`,"")}$`,t]}function lK(t,e,i){const n=t.match(e);if(n){const r={};let s=1;for(const o in i)if(lp(i,o)){const a=i[o],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(r[a.token.val[0]]=a.deser(n.slice(s,s+l))),s+=l}return[n,r]}else return[n,{}]}function cK(t){const e=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let i=null,n;return we(t.z)||(i=Is.create(t.z)),we(t.Z)||(i||(i=new zi(t.Z)),n=t.Z),we(t.q)||(t.M=(t.q-1)*3+1),we(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),we(t.u)||(t.S=dE(t.u)),[Object.keys(t).reduce((s,o)=>{const a=e(o);return a&&(s[a]=t[o]),s},{}),i,n]}let u_=null;function uK(){return u_||(u_=ye.fromMillis(1555555555555)),u_}function dK(t,e){if(t.literal)return t;const i=Fi.macroTokenToFormatOpts(t.val),n=l5(i,e);return n==null||n.includes(void 0)?t:n}function o5(t,e){return Array.prototype.concat(...t.map(i=>dK(i,e)))}function a5(t,e,i){const n=o5(Fi.parseFormat(i),t),r=n.map(o=>rK(o,t)),s=r.find(o=>o.invalidReason);if(s)return{input:e,tokens:n,invalidReason:s.invalidReason};{const[o,a]=aK(r),l=RegExp(o,"i"),[u,p]=lK(e,l,a),[f,m,g]=p?cK(p):[null,null,void 0];if(lp(p,"a")&&lp(p,"H"))throw new Oh("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:n,regex:l,rawMatches:u,matches:p,result:f,zone:m,specificOffset:g}}}function hK(t,e,i){const{result:n,zone:r,specificOffset:s,invalidReason:o}=a5(t,e,i);return[n,r,s,o]}function l5(t,e){if(!t)return null;const n=Fi.create(e,t).dtFormatter(uK()),r=n.formatToParts(),s=n.resolvedOptions();return r.map(o=>oK(o,t,s))}const d_="Invalid DateTime",KC=864e13;function Cy(t){return new vs("unsupported zone",`the zone "${t.name}" is not supported`)}function h_(t){return t.weekData===null&&(t.weekData=ab(t.c)),t.weekData}function p_(t){return t.localWeekData===null&&(t.localWeekData=ab(t.c,t.loc.getMinDaysInFirstWeek(),t.loc.getStartOfWeek())),t.localWeekData}function Nc(t,e){const i={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new ye({...i,...e,old:i})}function c5(t,e,i){let n=t-e*60*1e3;const r=i.offset(n);if(e===r)return[n,e];n-=(r-e)*60*1e3;const s=i.offset(n);return r===s?[n,r]:[t-Math.min(r,s)*60*1e3,Math.max(r,s)]}function Iy(t,e){t+=e*60*1e3;const i=new Date(t);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:i.getUTCHours(),minute:i.getUTCMinutes(),second:i.getUTCSeconds(),millisecond:i.getUTCMilliseconds()}}function z0(t,e,i){return c5(z1(t),e,i)}function JC(t,e){const i=t.o,n=t.c.year+Math.trunc(e.years),r=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,s={...t.c,year:n,month:r,day:Math.min(t.c.day,lb(n,r))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},o=Re.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),a=z1(s);let[l,u]=c5(a,i,t.zone);return o!==0&&(l+=o,u=t.zone.offset(l)),{ts:l,o:u}}function Qp(t,e,i,n,r,s){const{setZone:o,zone:a}=i;if(t&&Object.keys(t).length!==0||e){const l=e||a,u=ye.fromObject(t,{...i,zone:l,specificOffset:s});return o?u:u.setZone(a)}else return ye.invalid(new vs("unparsable",`the input "${r}" can't be parsed as ${n}`))}function Oy(t,e,i=!0){return t.isValid?Fi.create(tt.create("en-US"),{allowZ:i,forceSimple:!0}).formatDateTimeFromString(t,e):null}function f_(t,e){const i=t.c.year>9999||t.c.year<0;let n="";return i&&t.c.year>=0&&(n+="+"),n+=Wt(t.c.year,i?6:4),e?(n+="-",n+=Wt(t.c.month),n+="-",n+=Wt(t.c.day)):(n+=Wt(t.c.month),n+=Wt(t.c.day)),n}function YC(t,e,i,n,r,s){let o=Wt(t.c.hour);return e?(o+=":",o+=Wt(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!i)&&(o+=":")):o+=Wt(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!i)&&(o+=Wt(t.c.second),(t.c.millisecond!==0||!n)&&(o+=".",o+=Wt(t.c.millisecond,3))),r&&(t.isOffsetFixed&&t.offset===0&&!s?o+="Z":t.o<0?(o+="-",o+=Wt(Math.trunc(-t.o/60)),o+=":",o+=Wt(Math.trunc(-t.o%60))):(o+="+",o+=Wt(Math.trunc(t.o/60)),o+=":",o+=Wt(Math.trunc(t.o%60)))),s&&(o+="["+t.zone.ianaName+"]"),o}const u5={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},pK={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},fK={ordinal:1,hour:0,minute:0,second:0,millisecond:0},d5=["year","month","day","hour","minute","second","millisecond"],mK=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],gK=["year","ordinal","hour","minute","second","millisecond"];function yK(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new pN(t);return e}function XC(t){switch(t.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return yK(t)}}function QC(t,e){const i=Kl(e.zone,Nt.defaultZone),n=tt.fromObject(e),r=Nt.now();let s,o;if(we(t.year))s=r;else{for(const u of d5)we(t[u])&&(t[u]=u5[u]);const a=DN(t)||FN(t);if(a)return ye.invalid(a);const l=i.offset(r);[s,o]=z0(t,l,i)}return new ye({ts:s,zone:i,loc:n,o})}function eI(t,e,i){const n=we(i.round)?!0:i.round,r=(o,a)=>(o=hE(o,n||i.calendary?0:2,!0),e.loc.clone(i).relFormatter(i).format(o,a)),s=o=>i.calendary?e.hasSame(t,o)?0:e.startOf(o).diff(t.startOf(o),o).get(o):e.diff(t,o).get(o);if(i.unit)return r(s(i.unit),i.unit);for(const o of i.units){const a=s(o);if(Math.abs(a)>=1)return r(a,o)}return r(t>e?-0:0,i.units[i.units.length-1])}function tI(t){let e={},i;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],i=Array.from(t).slice(0,t.length-1)):i=Array.from(t),[e,i]}class ye{constructor(e){const i=e.zone||Nt.defaultZone;let n=e.invalid||(Number.isNaN(e.ts)?new vs("invalid input"):null)||(i.isValid?null:Cy(i));this.ts=we(e.ts)?Nt.now():e.ts;let r=null,s=null;if(!n)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(i))[r,s]=[e.old.c,e.old.o];else{const a=i.offset(this.ts);r=Iy(this.ts,a),n=Number.isNaN(r.year)?new vs("invalid input"):null,r=n?null:r,s=n?null:a}this._zone=i,this.loc=e.loc||tt.create(),this.invalid=n,this.weekData=null,this.localWeekData=null,this.c=r,this.o=s,this.isLuxonDateTime=!0}static now(){return new ye({})}static local(){const[e,i]=tI(arguments),[n,r,s,o,a,l,u]=i;return QC({year:n,month:r,day:s,hour:o,minute:a,second:l,millisecond:u},e)}static utc(){const[e,i]=tI(arguments),[n,r,s,o,a,l,u]=i;return e.zone=zi.utcInstance,QC({year:n,month:r,day:s,hour:o,minute:a,second:l,millisecond:u},e)}static fromJSDate(e,i={}){const n=qW(e)?e.valueOf():NaN;if(Number.isNaN(n))return ye.invalid("invalid input");const r=Kl(i.zone,Nt.defaultZone);return r.isValid?new ye({ts:n,zone:r,loc:tt.fromObject(i)}):ye.invalid(Cy(r))}static fromMillis(e,i={}){if(Ku(e))return e<-KC||e>KC?ye.invalid("Timestamp out of range"):new ye({ts:e,zone:Kl(i.zone,Nt.defaultZone),loc:tt.fromObject(i)});throw new $n(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,i={}){if(Ku(e))return new ye({ts:e*1e3,zone:Kl(i.zone,Nt.defaultZone),loc:tt.fromObject(i)});throw new $n("fromSeconds requires a numerical input")}static fromObject(e,i={}){e=e||{};const n=Kl(i.zone,Nt.defaultZone);if(!n.isValid)return ye.invalid(Cy(n));const r=tt.fromObject(i),s=cb(e,XC),{minDaysInFirstWeek:o,startOfWeek:a}=FC(s,r),l=Nt.now(),u=we(i.specificOffset)?n.offset(l):i.specificOffset,p=!we(s.ordinal),f=!we(s.year),m=!we(s.month)||!we(s.day),g=f||m,y=s.weekYear||s.weekNumber;if((g||p)&&y)throw new Oh("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(m&&p)throw new Oh("Can't mix ordinal dates with month/day");const v=y||s.weekday&&!g;let b,_,$=Iy(l,u);v?(b=mK,_=pK,$=ab($,o,a)):p?(b=gK,_=fK,$=c_($)):(b=d5,_=u5);let x=!1;for(const B of b){const H=s[B];we(H)?x?s[B]=_[B]:s[B]=$[B]:x=!0}const E=v?HW(s,o,a):p?VW(s):DN(s),C=E||FN(s);if(C)return ye.invalid(C);const M=v?NC(s,o,a):p?DC(s):s,[N,G]=z0(M,u,n),U=new ye({ts:N,zone:n,o:G,loc:r});return s.weekday&&g&&e.weekday!==U.weekday?ye.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${U.toISO()}`):U}static fromISO(e,i={}){const[n,r]=RZ(e);return Qp(n,r,i,"ISO 8601",e)}static fromRFC2822(e,i={}){const[n,r]=NZ(e);return Qp(n,r,i,"RFC 2822",e)}static fromHTTP(e,i={}){const[n,r]=DZ(e);return Qp(n,r,i,"HTTP",i)}static fromFormat(e,i,n={}){if(we(e)||we(i))throw new $n("fromFormat requires an input string and a format");const{locale:r=null,numberingSystem:s=null}=n,o=tt.fromOpts({locale:r,numberingSystem:s,defaultToEN:!0}),[a,l,u,p]=hK(o,e,i);return p?ye.invalid(p):Qp(a,l,n,`format ${i}`,e,u)}static fromString(e,i,n={}){return ye.fromFormat(e,i,n)}static fromSQL(e,i={}){const[n,r]=VZ(e);return Qp(n,r,i,"SQL",e)}static invalid(e,i=null){if(!e)throw new $n("need to specify a reason the DateTime is invalid");const n=e instanceof vs?e:new vs(e,i);if(Nt.throwOnInvalid)throw new bW(n);return new ye({invalid:n})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,i={}){const n=l5(e,tt.fromObject(i));return n?n.map(r=>r?r.val:null).join(""):null}static expandFormat(e,i={}){return o5(Fi.parseFormat(e),tt.fromObject(i)).map(r=>r.val).join("")}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?h_(this).weekYear:NaN}get weekNumber(){return this.isValid?h_(this).weekNumber:NaN}get weekday(){return this.isValid?h_(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?p_(this).weekday:NaN}get localWeekNumber(){return this.isValid?p_(this).weekNumber:NaN}get localWeekYear(){return this.isValid?p_(this).weekYear:NaN}get ordinal(){return this.isValid?c_(this.c).ordinal:NaN}get monthShort(){return this.isValid?ky.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?ky.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?ky.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?ky.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,i=6e4,n=z1(this.c),r=this.zone.offset(n-e),s=this.zone.offset(n+e),o=this.zone.offset(n-r*i),a=this.zone.offset(n-s*i);if(o===a)return[this];const l=n-o*i,u=n-a*i,p=Iy(l,o),f=Iy(u,a);return p.hour===f.hour&&p.minute===f.minute&&p.second===f.second&&p.millisecond===f.millisecond?[Nc(this,{ts:l}),Nc(this,{ts:u})]:[this]}get isInLeapYear(){return Lg(this.year)}get daysInMonth(){return lb(this.year,this.month)}get daysInYear(){return this.isValid?Uh(this.year):NaN}get weeksInWeekYear(){return this.isValid?Ym(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?Ym(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:i,numberingSystem:n,calendar:r}=Fi.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:i,numberingSystem:n,outputCalendar:r}}toUTC(e=0,i={}){return this.setZone(zi.instance(e),i)}toLocal(){return this.setZone(Nt.defaultZone)}setZone(e,{keepLocalTime:i=!1,keepCalendarTime:n=!1}={}){if(e=Kl(e,Nt.defaultZone),e.equals(this.zone))return this;if(e.isValid){let r=this.ts;if(i||n){const s=e.offset(this.ts),o=this.toObject();[r]=z0(o,s,e)}return Nc(this,{ts:r,zone:e})}else return ye.invalid(Cy(e))}reconfigure({locale:e,numberingSystem:i,outputCalendar:n}={}){const r=this.loc.clone({locale:e,numberingSystem:i,outputCalendar:n});return Nc(this,{loc:r})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const i=cb(e,XC),{minDaysInFirstWeek:n,startOfWeek:r}=FC(i,this.loc),s=!we(i.weekYear)||!we(i.weekNumber)||!we(i.weekday),o=!we(i.ordinal),a=!we(i.year),l=!we(i.month)||!we(i.day),u=a||l,p=i.weekYear||i.weekNumber;if((u||o)&&p)throw new Oh("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(l&&o)throw new Oh("Can't mix ordinal dates with month/day");let f;s?f=NC({...ab(this.c,n,r),...i},n,r):we(i.ordinal)?(f={...this.toObject(),...i},we(i.day)&&(f.day=Math.min(lb(f.year,f.month),f.day))):f=DC({...c_(this.c),...i});const[m,g]=z0(f,this.o,this.zone);return Nc(this,{ts:m,o:g})}plus(e){if(!this.isValid)return this;const i=Re.fromDurationLike(e);return Nc(this,JC(this,i))}minus(e){if(!this.isValid)return this;const i=Re.fromDurationLike(e).negate();return Nc(this,JC(this,i))}startOf(e,{useLocaleWeeks:i=!1}={}){if(!this.isValid)return this;const n={},r=Re.normalizeUnit(e);switch(r){case"years":n.month=1;case"quarters":case"months":n.day=1;case"weeks":case"days":n.hour=0;case"hours":n.minute=0;case"minutes":n.second=0;case"seconds":n.millisecond=0;break}if(r==="weeks")if(i){const s=this.loc.getStartOfWeek(),{weekday:o}=this;o<s&&(n.weekNumber=this.weekNumber-1),n.weekday=s}else n.weekday=1;if(r==="quarters"){const s=Math.ceil(this.month/3);n.month=(s-1)*3+1}return this.set(n)}endOf(e,i){return this.isValid?this.plus({[e]:1}).startOf(e,i).minus(1):this}toFormat(e,i={}){return this.isValid?Fi.create(this.loc.redefaultToEN(i)).formatDateTimeFromString(this,e):d_}toLocaleString(e=ob,i={}){return this.isValid?Fi.create(this.loc.clone(i),e).formatDateTime(this):d_}toLocaleParts(e={}){return this.isValid?Fi.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:i=!1,suppressMilliseconds:n=!1,includeOffset:r=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;const o=e==="extended";let a=f_(this,o);return a+="T",a+=YC(this,o,i,n,r,s),a}toISODate({format:e="extended"}={}){return this.isValid?f_(this,e==="extended"):null}toISOWeekDate(){return Oy(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:i=!1,includeOffset:n=!0,includePrefix:r=!1,extendedZone:s=!1,format:o="extended"}={}){return this.isValid?(r?"T":"")+YC(this,o==="extended",i,e,n,s):null}toRFC2822(){return Oy(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Oy(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?f_(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:i=!1,includeOffsetSpace:n=!0}={}){let r="HH:mm:ss.SSS";return(i||e)&&(n&&(r+=" "),i?r+="z":e&&(r+="ZZ")),Oy(this,r,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():d_}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const i={...this.c};return e.includeConfig&&(i.outputCalendar=this.outputCalendar,i.numberingSystem=this.loc.numberingSystem,i.locale=this.loc.locale),i}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,i="milliseconds",n={}){if(!this.isValid||!e.isValid)return Re.invalid("created by diffing an invalid DateTime");const r={locale:this.locale,numberingSystem:this.numberingSystem,...n},s=WW(i).map(Re.normalizeUnit),o=e.valueOf()>this.valueOf(),a=o?this:e,l=o?e:this,u=YZ(a,l,s,r);return o?u.negate():u}diffNow(e="milliseconds",i={}){return this.diff(ye.now(),e,i)}until(e){return this.isValid?At.fromDateTimes(this,e):this}hasSame(e,i,n){if(!this.isValid)return!1;const r=e.valueOf(),s=this.setZone(e.zone,{keepLocalTime:!0});return s.startOf(i,n)<=r&&r<=s.endOf(i,n)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const i=e.base||ye.fromObject({},{zone:this.zone}),n=e.padding?this<i?-e.padding:e.padding:0;let r=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(r=e.unit,s=void 0),eI(i,this.plus(n),{...e,numeric:"always",units:r,unit:s})}toRelativeCalendar(e={}){return this.isValid?eI(e.base||ye.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(ye.isDateTime))throw new $n("min requires all arguments be DateTimes");return zC(e,i=>i.valueOf(),Math.min)}static max(...e){if(!e.every(ye.isDateTime))throw new $n("max requires all arguments be DateTimes");return zC(e,i=>i.valueOf(),Math.max)}static fromFormatExplain(e,i,n={}){const{locale:r=null,numberingSystem:s=null}=n,o=tt.fromOpts({locale:r,numberingSystem:s,defaultToEN:!0});return a5(o,e,i)}static fromStringExplain(e,i,n={}){return ye.fromFormatExplain(e,i,n)}static get DATE_SHORT(){return ob}static get DATE_MED(){return fN}static get DATE_MED_WITH_WEEKDAY(){return SW}static get DATE_FULL(){return mN}static get DATE_HUGE(){return gN}static get TIME_SIMPLE(){return yN}static get TIME_WITH_SECONDS(){return vN}static get TIME_WITH_SHORT_OFFSET(){return bN}static get TIME_WITH_LONG_OFFSET(){return wN}static get TIME_24_SIMPLE(){return _N}static get TIME_24_WITH_SECONDS(){return SN}static get TIME_24_WITH_SHORT_OFFSET(){return $N}static get TIME_24_WITH_LONG_OFFSET(){return xN}static get DATETIME_SHORT(){return TN}static get DATETIME_SHORT_WITH_SECONDS(){return EN}static get DATETIME_MED(){return kN}static get DATETIME_MED_WITH_SECONDS(){return MN}static get DATETIME_MED_WITH_WEEKDAY(){return $W}static get DATETIME_FULL(){return CN}static get DATETIME_FULL_WITH_SECONDS(){return IN}static get DATETIME_HUGE(){return ON}static get DATETIME_HUGE_WITH_SECONDS(){return AN}}function ef(t){if(ye.isDateTime(t))return t;if(t&&t.valueOf&&Ku(t.valueOf()))return ye.fromJSDate(t);if(t&&typeof t=="object")return ye.fromObject(t);throw new $n(`Unknown datetime argument: ${t}, of type ${typeof t}`)}const Co="system",yE="unknown",Xm="UTC",vK=Intl.DateTimeFormat().resolvedOptions().timeZone,bK="shortOffset";function wK(t){return"timeZoneIANA"in t}function _K(t){return t.startsWith("UTC")}function c_e(t,e=!1){return{json:{read:{source:t,reader:(i,n)=>n[t]?SK(n[t]):null},write:!!e&&{allowNull:!0,writer(i,n){n[t]=i?$K(i):null}}}}}function SK(t,e=Co){return t?wK(t)?t.timeZoneIANA:xK(t,e):e}function $K(t){return{timeZoneIANA:t}}function xK(t,e=Co){if(!t||!TC.has(t.timeZone))return e;const i=TC.get(t.timeZone);return _K(t.timeZone)||t.respectsDaylightSaving?i:TK(i)}function TK(t){const e=ye.local().setZone(t),i=Math.min(e.set({month:1,day:1}).offset,e.set({month:5}).offset);return i===0?"Etc/UTC":`Etc/GMT${zi.instance(-i).formatOffset(0,"narrow")}`}function u_e(t,e,i,n,r){if(e&&r==="date")return{timeZone:Xm,timeZoneName:void 0};const s=n.timeStyle||n.hour,o=i===yE;return{timeZone:o?r==="timestamp-offset"?void 0:t??Xm:i,timeZoneName:o&&s?bK:void 0}}const EK={year:void 0,month:void 0,day:void 0,weekday:void 0},kK={hour:void 0,minute:void 0,second:void 0},h5={timeZone:Xm},Hs={year:"numeric",month:"numeric",day:"numeric"},tf={year:"numeric",month:"long",day:"numeric"},nf={year:"numeric",month:"short",day:"numeric"},rf={year:"numeric",month:"long",weekday:"long",day:"numeric"},Hl={hour:"numeric",minute:"numeric"},Kc={...Hl,second:"numeric"},p5={hourCycle:"h23"},sf={...Hl,...p5},of={...Kc,...p5},f5={"short-date":Hs,"short-date-short-time":{...Hs,...Hl},"short-date-short-time-24":{...Hs,...sf},"short-date-long-time":{...Hs,...Kc},"short-date-long-time-24":{...Hs,...of},"short-date-le":Hs,"short-date-le-short-time":{...Hs,...Hl},"short-date-le-short-time-24":{...Hs,...sf},"short-date-le-long-time":{...Hs,...Kc},"short-date-le-long-time-24":{...Hs,...of},"long-month-day-year":tf,"long-month-day-year-short-time":{...tf,...Hl},"long-month-day-year-short-time-24":{...tf,...sf},"long-month-day-year-long-time":{...tf,...Kc},"long-month-day-year-long-time-24":{...tf,...of},"day-short-month-year":nf,"day-short-month-year-short-time":{...nf,...Hl},"day-short-month-year-short-time-24":{...nf,...sf},"day-short-month-year-long-time":{...nf,...Kc},"day-short-month-year-long-time-24":{...nf,...of},"long-date":rf,"long-date-short-time":{...rf,...Hl},"long-date-short-time-24":{...rf,...sf},"long-date-long-time":{...rf,...Kc},"long-date-long-time-24":{...rf,...of},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":Hl,"long-time":Kc},MK=sn()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),m5={ar:"ar-u-nu-latn-ca-gregory"};let T$=new WeakMap;const U1=f5["short-date-short-time"];function CK(t){let e=T$.get(t);if(!e){const i=Jn(),n=m5[i]||i,r=vE(t.timeZone??Co),s={...t,timeZone:r};e=new Intl.DateTimeFormat(n,s),T$.set(t,e)}return e}function d_e(t){return f5[t]}function fc(t,e=U1){return CK(e).format(t)}function h_e(t,e=U1){return fc(new Date(t),{...e,...h5,...kK})}function p_e(t,e=U1){return fc(new Date(`1970-01-01T${t}Z`),{...e,...h5,...EK})}function f_e(t,e=U1){if(e.timeZone)return fc(new Date(t),e);const i=ye.fromISO(t,{setZone:!0}),n=Jn(),r=m5[n]??n,s=i.offset===0?Xm:e.timeZone,o={...e,timeZone:s};return i.toLocaleString(o,{locale:r})}function vE(t){switch(t){case Co:return vK;case yE:return Xm;default:return t}}lE(()=>{T$=new WeakMap});const IK={ar:"ar-u-nu-latn"};let j0=new WeakMap,g5={};function OK(t){const e=t||g5;if(!j0.has(e)){const i=Jn(),n=IK[Jn()]||i;j0.set(e,new Intl.NumberFormat(n,t))}return j0.get(e)}function m_e(t={}){const e={};return t.digitSeparator!=null&&(e.useGrouping=t.digitSeparator),t.places!=null&&(e.minimumFractionDigits=e.maximumFractionDigits=t.places),e}function ub(t,e){return Object.is(t,-0)&&(t=0),OK(e).format(t)}lE(()=>{j0=new WeakMap,g5={}});const y5=J.getLogger("esri.intl.substitute");function bE(t,e,i={}){const{format:n={}}=i;return bT(t,r=>AK(r,e,n))}function AK(t,e,i){let n,r;const s=t.indexOf(":");if(s===-1?n=t.trim():(n=t.slice(0,s).trim(),r=t.slice(s+1).trim()),!n)return"";const o=bg(n,e);if(o==null)return"";const a=(r?i==null?void 0:i[r]:null)??(i==null?void 0:i[n]);return a?LK(o,a):r?PK(o,r):wE(o)}function LK(t,e){switch(e.type){case"date":return fc(t,e.intlOptions);case"number":return ub(t,e.intlOptions);default:return y5.warn("missing format descriptor for key {key}"),wE(t)}}function PK(t,e){switch(e.toLowerCase()){case"dateformat":return fc(t);case"numberformat":return ub(t);default:return y5.warn(`inline format is unsupported since 4.12: ${e}`),/^(dateformat|datestring)/i.test(e)?fc(t):/^numberformat/i.test(e)?ub(t):wE(t)}}function wE(t){switch(typeof t){case"string":return t;case"number":return ub(t);case"boolean":return""+t;default:return t instanceof Date?fc(t):""}}const iI=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,RK={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function nI(t){return t in RK}const Tf=[],Vh=new Map;function rI(t){for(const e of Vh.keys())v5(t.pattern,e)&&Vh.delete(e)}function NK(t){return Tf.includes(t)||(rI(t),Tf.unshift(t)),Ye(()=>{const e=Tf.indexOf(t);e>-1&&(Tf.splice(e,1),rI(t))})}async function H1(t){const e=Jn();Vh.has(t)||Vh.set(t,FK(t,e));const i=Vh.get(t);return i&&await zK.add(i),i}function DK(t){if(!iI.test(t))return null;const e=iI.exec(t);if(e===null)return null;const[,i,n]=e,r=i+(n?"-"+n.toUpperCase():"");return nI(r)?r:nI(i)?i:null}async function FK(t,e){const i=[];for(const n of Tf)if(v5(n.pattern,t))try{return await n.fetchMessageBundle(t,e)}catch(r){i.push(r)}throw i.length?new F("intl:message-bundle-error",`Errors occurred while loading "${t}"`,{errors:i}):new F("intl:no-message-bundle-loader",`No loader found for message bundle "${t}"`)}function v5(t,e){return typeof t=="string"?e.startsWith(t):t.test(e)}lE(()=>{Vh.clear()});const zK=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(t){return this._increase(),t.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=Or())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function jK(t,e,i,n){const r=e.exec(i);if(!r)throw new F("esri-intl:invalid-bundle",`Bundle id "${i}" is not compatible with the pattern "${e}"`);const s=r[1]?`${r[1]}/`:"",o=r[2],a=DK(n),l=`${s}${o}.json`,u=a?`${s}${o}_${a}.json`:l;let p;try{p=await sI(t(u))}catch(f){if(u===l)throw new F("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:f});try{p=await sI(t(l))}catch(m){throw new F("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:m})}}return p}async function sI(t){if(oI.fetchBundleAsset!=null)return oI.fetchBundleAsset(t);const e=await $t(t,{responseType:"text"});return JSON.parse(e.data)}let GK=class{constructor({base:e="",pattern:i,location:n=new URL(window.location.href)}){let r;r=typeof n=="string"?s=>new URL(s,new URL(n,window.location.href)).href:n instanceof URL?s=>new URL(s,n).href:n,this.pattern=typeof i=="string"?new RegExp(`^${i}`):i,this.getAssetUrl=r,e=e?e.endsWith("/")?e:e+"/":"",this.matcher=new RegExp(`^${e}(?:(.*)/)?(.*)$`)}fetchMessageBundle(e,i){return jK(this.getAssetUrl,this.matcher,e,i)}};function UK(t){return new GK(t)}const oI={};NK(UK({pattern:"esri/",location:Ge}));const HK={};function VK(t){var i;const e={async:t.async,isDebug:t.isDebug,locale:t.locale,baseUrl:t.baseUrl,has:{...t.has},map:{...t.map},packages:((i=t.packages)==null?void 0:i.concat())||[],paths:{...t.paths}};return t.hasOwnProperty("async")||(e.async=!0),t.hasOwnProperty("isDebug")||(e.isDebug=!1),t.baseUrl||(e.baseUrl=HK.baseUrl),e}let BK=class{constructor(){const e=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(i=>{this[i]=(...n)=>e[i](...n)})}},G0=class{constructor(){this._dispatcher=new BK,this._workerPostMessage({type:hi.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener("message",e)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(e){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener("messageerror",e)}get onerror(){return this._onerrorHandler}set onerror(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener("error",e)}postMessage(e){tp(()=>{this._workerMessageHandler(new MessageEvent("message",{data:e}))})}dispatchEvent(e){return this._dispatcher.dispatchEvent(e)}addEventListener(e,i,n){this._dispatcher.addEventListener(e,i,n)}removeEventListener(e,i,n){this._dispatcher.removeEventListener(e,i,n)}_workerPostMessage(e){tp(()=>{this.dispatchEvent(new MessageEvent("message",{data:e}))})}async _workerMessageHandler(e){const i=Jm(e);if(i&&i.type===hi.OPEN){const{modulePath:n,jobId:r}=i;let s=await pc.loadWorker(n);s||(s=await V(()=>import(n),__vite__mapDeps([]),import.meta.url));const o=pc.connect(s);this._workerPostMessage({type:hi.OPENED,jobId:r,data:o})}}};const E$=J.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:qK}=hi,WK='let globalId=0;const outgoing=new Map,configuration=JSON.parse("{CONFIGURATION}");self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;return new Promise(((r,s)=>{if(t){if(t.aborted)return s(createAbortError());t.addEventListener("abort",(()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:ABORT,jobId:n}),s(createAbortError()))}))}outgoing.set(n,{resolve:r,reject:s}),self.postMessage({type:INVOKE,jobId:n,methodName:e,abortable:null!=t,data:o})}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\\nModules version: ${r}\\nAssets version: ${n??s}\\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case OPEN:let n;function t(e){const o=n.connect(e);self.postMessage({type:OPENED,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case RESPONSE:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let Ay,Ly;const aI="Failed to create Worker. Fallback to execute module in main thread";async function ZK(){if(!z("esri-workers"))return lI(new G0);if(!Ay&&!Ly)try{const e=WK.split('"{CONFIGURATION}"').join(`'${KK()}'`);Ay=URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}catch(e){Ly=e||{}}let t;if(Ay)try{t=new Worker(Ay,{name:"esri-worker-"+JK++})}catch{E$.warn(aI,Ly),t=new G0}else E$.warn(aI,Ly),t=new G0;return lI(t)}async function lI(t){return new Promise(e=>{function i(r){const s=Jm(r);s&&s.type===qK&&(t.removeEventListener("message",i),t.removeEventListener("error",n),e(t))}function n(r){r.preventDefault(),t.removeEventListener("message",i),t.removeEventListener("error",n),E$.warn("Failed to create Worker. Fallback to execute module in main thread",r),(t=new G0).addEventListener("message",i),t.addEventListener("error",n)}t.addEventListener("message",i),t.addEventListener("error",n)})}function KK(){let t;if(Ae.default!=null){const r={...Ae};delete r.default,t=JSON.parse(JSON.stringify(r))}else t=JSON.parse(JSON.stringify(Ae));t.assetsPath=$r(t.assetsPath),t.defaultAssetsPath=t.defaultAssetsPath?$r(t.defaultAssetsPath):void 0,t.request.interceptors=[],t.log.interceptors=[],t.locale=Jn(),t.has={"esri-csp-restrictions":z("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":z("esri-2d-update-debug"),"esri-2d-log-updating":z("esri-2d-log-updating"),"featurelayer-pbf":z("featurelayer-pbf"),"featurelayer-simplify-thresholds":z("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":z("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":z("featurelayer-simplify-mobile-factor"),"esri-atomics":z("esri-atomics"),"esri-shared-array-buffer":z("esri-shared-array-buffer"),"esri-tiles-debug":z("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":z("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":z("feature-polyline-generalization-factor"),"host-webworker":1},t.workers.loaderUrl&&(t.workers.loaderUrl=$r(t.workers.loaderUrl)),t.workers.workerPath?t.workers.workerPath=$r(t.workers.workerPath):t.workers.workerPath=$r(Ge("esri/core/workers/RemoteClient.js")),t.workers.useDynamicImport=!1;const e=Ae.workers.loaderConfig,i=VK({baseUrl:e==null?void 0:e.baseUrl,locale:Jn(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...e==null?void 0:e.has},map:{...e==null?void 0:e.map},paths:{...e==null?void 0:e.paths},packages:(e==null?void 0:e.packages)||[]});return JSON.stringify({esriConfig:t,loaderConfig:i,kernelInfo:{buildDate:HP,fullVersion:FT,revision:VP}})}let JK=0;const{ABORT:cI,INVOKE:YK,OPEN:XK,OPENED:QK,RESPONSE:af}=hi;let eJ=class b5{static async create(e){const i=await ZK();return new b5(i,e)}constructor(e,i){this._outJobs=new Map,this._inJobs=new Map,this.worker=e,this.id=i,e.addEventListener("message",this._onMessage.bind(this)),e.addEventListener("error",n=>{n.preventDefault(),J.getLogger("esri.core.workers.WorkerOwner").error(n)})}terminate(){this.worker.terminate()}async open(e,i={}){const{signal:n}=i,r=dN();return new Promise((s,o)=>{const a={resolve:s,reject:o,abortHandle:_T(n,()=>{this._outJobs.delete(r),this._post({type:cI,jobId:r})})};this._outJobs.set(r,a),this._post({type:XK,jobId:r,modulePath:e})})}_onMessage(e){const i=Jm(e);if(i)switch(i.type){case QK:this._onOpenedMessage(i);break;case af:this._onResponseMessage(i);break;case cI:this._onAbortMessage(i);break;case YK:this._onInvokeMessage(i)}}_onAbortMessage(e){const i=this._inJobs,n=e.jobId,r=i.get(n);r&&(r.controller&&r.controller.abort(),i.delete(n))}_onInvokeMessage(e){const{methodName:i,jobId:n,data:r,abortable:s}=e,o=s?new AbortController:null,a=this._inJobs,l=mW[i];let u;try{if(typeof l!="function")throw new TypeError(`${i} is not a function`);u=l.call(null,r,{signal:o?o.signal:null})}catch(p){return void this._post({type:af,jobId:n,error:Km(p)})}Za(u)?(a.set(n,{controller:o,promise:u}),u.then(p=>{a.has(n)&&(a.delete(n),this._post({type:af,jobId:n},p))},p=>{a.has(n)&&(a.delete(n),p||(p={message:"Error encountered at method"+i}),en(p)||this._post({type:af,jobId:n,error:Km(p||{message:`Error encountered at method ${i}`})}))})):this._post({type:af,jobId:n},u)}_onOpenedMessage(e){const{jobId:i,data:n}=e,r=this._outJobs.get(i);r&&(this._outJobs.delete(i),Je(r.abortHandle),r.resolve(n))}_onResponseMessage(e){const{jobId:i,error:n,data:r}=e,s=this._outJobs.get(i);s&&(this._outJobs.delete(i),Je(s.abortHandle),n?s.reject(F.fromJSON(JSON.parse(n))):s.resolve(r))}_post(e,i,n){return aE(this.worker,e,i,n)}};const uI=z("host-browser")?Math.min(navigator.hardwareConcurrency-1,z("workers-pool-size")):0;let Fu=z("esri-mobile")?Math.min(uI,3):uI;Fu||(Fu=z("safari")&&z("mac")?7:2);let dI=0;const U0=[];function tJ(){w5()}async function Py(t,e){const i=new fW,{registryTarget:n,...r}=e;return await i.open(t,r),n&&sW(n,i),i}async function b_e(t,e={}){if(typeof t!="string")throw new F("workers:undefined-module","modulePath is missing");let i=e.strategy||"distributed";if(z("host-webworker")&&!z("esri-workers")&&(i="local"),i==="local"){let n=await pc.loadWorker(t);n||(n=await V(()=>import(t),__vite__mapDeps([]),import.meta.url)),Qe(e.signal);const r=e.client||n;return Py([pc.connect(n)],{...e,client:r})}if(await w5(),Qe(e.signal),i==="dedicated"){const n=dI++%Fu;return Py([await U0[n].open(t,e)],e)}if(e.maxNumWorkers&&e.maxNumWorkers>0){const n=Math.min(e.maxNumWorkers,Fu);if(n<Fu){const r=new Array(n);for(let s=0;s<n;++s){const o=dI++%Fu;r[s]=U0[o].open(t,e)}return Py(r,e)}}return Py(U0.map(n=>n.open(t,e)),e)}let Ry=null;async function w5(){if(Ry)return Ry;new AbortController;const t=[];for(let e=0;e<Fu;e++){const i=eJ.create(e).then(n=>(U0[e]=n,n));t.push(i)}return Ry=Promise.all(t),Ry}const wn=Math.PI/180,iJ=/(?:SPHEROID|ELLIPSOID)\[([^\]]+)]/i,ll=lt.radius,Br=lt.eccentricitySquared,nJ={a1:ll*Br,a2:ll*Br*ll*Br,a3:ll*Br*Br/2,a4:ll*Br*ll*Br*2.5,a5:ll*Br+ll*Br*Br/2,a6:1-Br},rJ={4267:{a:63782064e-1,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:lt.radius,f:lt.flattening},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:uc.radius,f:uc.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:Pa.radius,f:Pa.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:Pa.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}};var I;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",t[t.WGS84=2]="WGS84",t[t.WEB_MERCATOR=3]="WEB_MERCATOR",t[t.WGS84_ECEF=4]="WGS84_ECEF",t[t.CGCS2000=5]="CGCS2000",t[t.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT",t[t.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF",t[t.GCSMARS2000=8]="GCSMARS2000",t[t.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF",t[t.GCSMOON2000=10]="GCSMOON2000",t[t.LON_LAT=11]="LON_LAT",t[t.PLATE_CARREE=12]="PLATE_CARREE"})(I||(I={}));const _5={[I.WGS84]:{[I.CGCS2000]:null,[I.GCSMARS2000]:null,[I.GCSMOON2000]:null,[I.LON_LAT]:Ke,[I.WGS84_COMPARABLE_LON_LAT]:Ke,[I.SPHERICAL_ECEF]:Gu,[I.SPHERICAL_MARS_PCPF]:null,[I.SPHERICAL_MOON_PCPF]:null,[I.UNKNOWN]:null,[I.WEB_MERCATOR]:Qm,[I.PLATE_CARREE]:zu,[I.WGS84]:Ke,[I.WGS84_ECEF]:Hu},[I.CGCS2000]:{[I.CGCS2000]:Ke,[I.GCSMARS2000]:null,[I.GCSMOON2000]:null,[I.LON_LAT]:Ke,[I.WGS84_COMPARABLE_LON_LAT]:Ke,[I.SPHERICAL_ECEF]:Gu,[I.SPHERICAL_MARS_PCPF]:null,[I.SPHERICAL_MOON_PCPF]:null,[I.UNKNOWN]:null,[I.WEB_MERCATOR]:null,[I.PLATE_CARREE]:zu,[I.WGS84]:null,[I.WGS84_ECEF]:Hu},[I.GCSMARS2000]:{[I.CGCS2000]:null,[I.GCSMARS2000]:Ke,[I.GCSMOON2000]:null,[I.LON_LAT]:Ke,[I.WGS84_COMPARABLE_LON_LAT]:null,[I.SPHERICAL_ECEF]:null,[I.SPHERICAL_MARS_PCPF]:mI,[I.SPHERICAL_MOON_PCPF]:null,[I.UNKNOWN]:null,[I.WEB_MERCATOR]:null,[I.PLATE_CARREE]:null,[I.WGS84]:null,[I.WGS84_ECEF]:null},[I.GCSMOON2000]:{[I.CGCS2000]:null,[I.GCSMARS2000]:null,[I.GCSMOON2000]:Ke,[I.LON_LAT]:Ke,[I.WGS84_COMPARABLE_LON_LAT]:null,[I.SPHERICAL_ECEF]:null,[I.SPHERICAL_MARS_PCPF]:null,[I.SPHERICAL_MOON_PCPF]:fI,[I.UNKNOWN]:null,[I.WEB_MERCATOR]:null,[I.PLATE_CARREE]:null,[I.WGS84]:null,[I.WGS84_ECEF]:null},[I.WEB_MERCATOR]:{[I.CGCS2000]:null,[I.GCSMARS2000]:null,[I.GCSMOON2000]:null,[I.LON_LAT]:Bh,[I.WGS84_COMPARABLE_LON_LAT]:Bh,[I.SPHERICAL_ECEF]:oJ,[I.SPHERICAL_MARS_PCPF]:null,[I.SPHERICAL_MOON_PCPF]:null,[I.UNKNOWN]:null,[I.WEB_MERCATOR]:Ke,[I.PLATE_CARREE]:cJ,[I.WGS84]:Bh,[I.WGS84_ECEF]:aJ},[I.WGS84_ECEF]:{[I.CGCS2000]:Vu,[I.GCSMARS2000]:null,[I.GCSMOON2000]:null,[I.LON_LAT]:Vu,[I.WGS84_COMPARABLE_LON_LAT]:Vu,[I.SPHERICAL_ECEF]:vJ,[I.SPHERICAL_MARS_PCPF]:null,[I.SPHERICAL_MOON_PCPF]:null,[I.UNKNOWN]:null,[I.WEB_MERCATOR]:bJ,[I.PLATE_CARREE]:uJ,[I.WGS84]:Vu,[I.WGS84_ECEF]:Ke},[I.SPHERICAL_ECEF]:{[I.CGCS2000]:Uu,[I.GCSMARS2000]:null,[I.GCSMOON2000]:null,[I.LON_LAT]:Uu,[I.WGS84_COMPARABLE_LON_LAT]:Uu,[I.SPHERICAL_ECEF]:Ke,[I.SPHERICAL_MARS_PCPF]:null,[I.SPHERICAL_MOON_PCPF]:null,[I.UNKNOWN]:null,[I.WEB_MERCATOR]:mJ,[I.PLATE_CARREE]:dJ,[I.WGS84]:Uu,[I.WGS84_ECEF]:gJ},[I.SPHERICAL_MARS_PCPF]:{[I.CGCS2000]:null,[I.GCSMARS2000]:yI,[I.GCSMOON2000]:null,[I.LON_LAT]:yI,[I.WGS84_COMPARABLE_LON_LAT]:null,[I.SPHERICAL_ECEF]:null,[I.SPHERICAL_MARS_PCPF]:Ke,[I.SPHERICAL_MOON_PCPF]:null,[I.UNKNOWN]:null,[I.WEB_MERCATOR]:null,[I.PLATE_CARREE]:null,[I.WGS84]:null,[I.WGS84_ECEF]:null},[I.SPHERICAL_MOON_PCPF]:{[I.CGCS2000]:null,[I.GCSMARS2000]:null,[I.GCSMOON2000]:gI,[I.LON_LAT]:gI,[I.WGS84_COMPARABLE_LON_LAT]:null,[I.SPHERICAL_ECEF]:null,[I.SPHERICAL_MARS_PCPF]:null,[I.SPHERICAL_MOON_PCPF]:Ke,[I.UNKNOWN]:null,[I.WEB_MERCATOR]:null,[I.PLATE_CARREE]:null,[I.WGS84]:null,[I.WGS84_ECEF]:null},[I.UNKNOWN]:{[I.CGCS2000]:null,[I.GCSMARS2000]:null,[I.GCSMOON2000]:null,[I.LON_LAT]:null,[I.WGS84_COMPARABLE_LON_LAT]:null,[I.SPHERICAL_ECEF]:null,[I.SPHERICAL_MARS_PCPF]:null,[I.SPHERICAL_MOON_PCPF]:null,[I.UNKNOWN]:Ke,[I.WEB_MERCATOR]:null,[I.PLATE_CARREE]:null,[I.WGS84]:null,[I.WGS84_ECEF]:null},[I.LON_LAT]:{[I.CGCS2000]:Ke,[I.GCSMARS2000]:Ke,[I.GCSMOON2000]:Ke,[I.LON_LAT]:Ke,[I.WGS84_COMPARABLE_LON_LAT]:Ke,[I.SPHERICAL_ECEF]:Gu,[I.SPHERICAL_MARS_PCPF]:mI,[I.SPHERICAL_MOON_PCPF]:fI,[I.UNKNOWN]:null,[I.WEB_MERCATOR]:Qm,[I.PLATE_CARREE]:zu,[I.WGS84]:Ke,[I.WGS84_ECEF]:Hu},[I.WGS84_COMPARABLE_LON_LAT]:{[I.CGCS2000]:null,[I.GCSMARS2000]:null,[I.GCSMOON2000]:null,[I.LON_LAT]:Ke,[I.WGS84_COMPARABLE_LON_LAT]:Ke,[I.SPHERICAL_ECEF]:Gu,[I.SPHERICAL_MARS_PCPF]:null,[I.SPHERICAL_MOON_PCPF]:null,[I.UNKNOWN]:null,[I.WEB_MERCATOR]:null,[I.PLATE_CARREE]:zu,[I.WGS84]:Ke,[I.WGS84_ECEF]:Hu},[I.PLATE_CARREE]:{[I.CGCS2000]:ju,[I.GCSMARS2000]:null,[I.GCSMOON2000]:null,[I.LON_LAT]:ju,[I.WGS84_COMPARABLE_LON_LAT]:ju,[I.SPHERICAL_ECEF]:hJ,[I.SPHERICAL_MARS_PCPF]:null,[I.SPHERICAL_MOON_PCPF]:null,[I.UNKNOWN]:null,[I.WEB_MERCATOR]:pJ,[I.PLATE_CARREE]:Ke,[I.WGS84]:ju,[I.WGS84_ECEF]:fJ}};function sJ(t){const e=k$(t,_J);return _5[e][I.WGS84_COMPARABLE_LON_LAT]}function S5(t,e,i=$5()){return t==null||e==null?null:wJ(t,e,i).projector}function k$(t,e){return t?e.spatialReference===t?e.spatialReferenceId:(e.spatialReference=t,"metersPerUnit"in e&&(e.metersPerUnit=Cn(t,1)),eb(t)?e.spatialReferenceId=I.SPHERICAL_ECEF:qm(t)?e.spatialReferenceId=I.WGS84:rd(t)?e.spatialReferenceId=I.WEB_MERCATOR:lV(t)?e.spatialReferenceId=I.PLATE_CARREE:t.wkt===fV.wkt?e.spatialReferenceId=I.WGS84_ECEF:t.wkid===xr.CGCS2000?e.spatialReferenceId=I.CGCS2000:t.wkt===VT.wkt?e.spatialReferenceId=I.SPHERICAL_MARS_PCPF:t.wkt===BT.wkt?e.spatialReferenceId=I.SPHERICAL_MOON_PCPF:Tg(t)?e.spatialReferenceId=I.GCSMARS2000:Eg(t)?e.spatialReferenceId=I.GCSMOON2000:e.spatialReferenceId=I.UNKNOWN):I.UNKNOWN}function Ke(t,e,i,n){t!==i&&(i[n++]=t[e++],i[n++]=t[e++],i[n]=t[e])}function Bh(t,e,i,n){i[n++]=up*(t[e++]/lt.radius),i[n++]=up*(Math.PI/2-2*Math.atan(Math.exp(-t[e++]/lt.radius))),i[n]=t[e]}function oJ(t,e,i,n){Bh(t,e,i,n),Gu(i,n,i,n)}function aJ(t,e,i,n){Bh(t,e,i,n),Hu(i,n,i,n)}function lJ(t,e,i,n,r){const s=.4999999*Math.PI,o=Ar(cp*t[e+1],-s,s),a=Math.sin(o);i[n++]=cp*t[e]*r.radius,i[n++]=r.halfSemiMajorAxis*Math.log((1+a)/(1-a)),i[n]=t[e+2]}function Qm(t,e,i,n){lJ(t,e,i,n,lt)}const hI=lt.radius*Math.PI/180,pI=180/(lt.radius*Math.PI);function zu(t,e,i,n){i[n]=t[e]*hI,i[n+1]=t[e+1]*hI,i[n+2]=t[e+2]}function ju(t,e,i,n){i[n]=t[e]*pI,i[n+1]=t[e+1]*pI,i[n+2]=t[e+2]}function cJ(t,e,i,n){Bh(t,e,i,n),zu(i,n,i,n)}function uJ(t,e,i,n){Vu(t,e,i,n),zu(i,n,i,n)}function dJ(t,e,i,n){Uu(t,e,i,n),zu(i,n,i,n)}function hJ(t,e,i,n){ju(t,e,i,n),Gu(i,n,i,n)}function pJ(t,e,i,n){ju(t,e,i,n),Qm(i,n,i,n)}function fJ(t,e,i,n){ju(t,e,i,n),Hu(i,n,i,n)}function _E(t,e,i,n,r){const s=r+t[e+2],o=cp*t[e+1],a=cp*t[e],l=Math.cos(o);i[n++]=Math.cos(a)*l*s,i[n++]=Math.sin(a)*l*s,i[n]=Math.sin(o)*s}function fI(t,e,i,n){_E(t,e,i,n,uc.radius)}function mI(t,e,i,n){_E(t,e,i,n,Pa.radius)}function Gu(t,e,i,n){_E(t,e,i,n,lt.radius)}function SE(t,e,i,n,r){const s=t[e],o=t[e+1],a=t[e+2],l=Math.sqrt(s*s+o*o+a*a),u=CR(a/(l===0?1:l)),p=Math.atan2(o,s);i[n++]=up*p,i[n++]=up*u,i[n]=l-r}function gI(t,e,i,n){SE(t,e,i,n,uc.radius)}function yI(t,e,i,n){SE(t,e,i,n,Pa.radius)}function Uu(t,e,i,n){SE(t,e,i,n,lt.radius)}function mJ(t,e,i,n){Uu(t,e,i,n),Qm(i,n,i,n)}function gJ(t,e,i,n){Uu(t,e,i,n),Hu(i,n,i,n)}function yJ(t,e,i,n,r){const s=cp*t[e],o=cp*t[e+1],a=t[e+2],l=Math.sin(o),u=Math.cos(o),p=r.radius/Math.sqrt(1-r.eccentricitySquared*l*l);i[n++]=(p+a)*u*Math.cos(s),i[n++]=(p+a)*u*Math.sin(s),i[n++]=(p*(1-r.eccentricitySquared)+a)*l}function Hu(t,e,i,n){yJ(t,e,i,n,lt)}function Vu(t,e,i,n){const r=nJ,s=t[e],o=t[e+1],a=t[e+2];let l,u,p,f,m,g,y,v,b,_,$,x,E,C,M,N,G,U,B,H,L;l=Math.abs(a),u=s*s+o*o,p=Math.sqrt(u),f=u+a*a,m=Math.sqrt(f),H=Math.atan2(o,s),g=a*a/f,y=u/f,C=r.a2/m,M=r.a3-r.a4/m,y>.3?(v=l/m*(1+y*(r.a1+C+g*M)/m),B=Math.asin(v),_=v*v,b=Math.sqrt(1-_)):(b=p/m*(1-g*(r.a5-C-y*M)/m),B=Math.acos(b),_=1-b*b,v=Math.sqrt(_)),$=1-lt.eccentricitySquared*_,x=lt.radius/Math.sqrt($),E=r.a6*x,C=p-x*b,M=l-E*v,G=b*C+v*M,N=b*M-v*C,U=N/(E/$+G),B+=U,L=G+N*U/2,a<0&&(B=-B),i[n++]=up*H,i[n++]=up*B,i[n]=L}function vJ(t,e,i,n){Vu(t,e,i,n),Gu(i,n,i,n)}function bJ(t,e,i,n){Vu(t,e,i,n),Qm(i,n,i,n)}function wJ(t,e,i){if(t==null||e==null||i.source.spatialReference===t&&i.dest.spatialReference===e)return i;const n=k$(t,i.source),r=k$(e,i.dest);return n===I.UNKNOWN&&r===I.UNKNOWN?xt(t,e)?i.projector=Ke:i.projector=null:i.projector=_5[n][r],i}function $5(){return{source:{spatialReference:null,spatialReferenceId:I.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:I.UNKNOWN,metersPerUnit:1},projector:Ke}}const _J={spatialReference:null,spatialReferenceId:I.UNKNOWN},w_e={spatialReference:null,spatialReferenceId:I.UNKNOWN},x5=$5(),cp=$f(1),up=kR(1);function Ng(t,e,i,n,r,s,o=1){const a=S5(e,r,x5);if(a==null)return!1;if(a===Ke){if(t===n&&i===s)return!0;const u=i+3*o;for(let p=i,f=s;p<u;p++,f++)n[f]=t[p];return!0}const l=i+3*o;for(let u=i,p=s;u<l;u+=3,p+=3)a(t,u,n,p);return!0}const __e=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:Ng},Symbol.toStringTag,{value:"Module"}));function vI(t,e,i,n,r,s){return Ny[0]=t,Ny[1]=e,Ny[2]=i,Ng(Ny,n,0,r,s,0,1)}const Ny=se();let Dy=0,m_=class M${static fromGE(e){const i=new M$;return i._wkt=e.wkt,i._wkid=e.wkid,i._isInverse=e.isInverse,i}constructor(e){this.uid=Dy++,e?(this._wkt=e.wkt!=null?e.wkt:null,this._wkid=e.wkid!=null?e.wkid:-1,this._isInverse=e.isInverse!=null&&e.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(e){this._wkt=e,this.uid=Dy++}get wkid(){return this._wkid}set wkid(e){this._wkid=e,this.uid=Dy++}get isInverse(){return this._isInverse}set isInverse(e){this._isInverse=e,this.uid=Dy++}getInverse(){const e=new M$;return e._wkt=this.wkt,e._wkid=this._wkid,e._isInverse=!this.isInverse,e}},db=class Ef{static cacheKey(e,i){var n,r,s,o,a,l;return[((n=e.wkid)==null?void 0:n.toString())??"-1",((r=e.wkt)==null?void 0:r.toString())??"",((s=e.wkt2)==null?void 0:s.toString())??"",((o=i.wkid)==null?void 0:o.toString())??"-1",((a=i.wkt)==null?void 0:a.toString())??"",((l=i.wkt2)==null?void 0:l.toString())??""].join()}static fromGE(e){const i=new Ef;let n="";for(const r of e.steps){const s=m_.fromGE(r);i.steps.push(s),n+=s.uid.toString()+","}return i._cachedProjection={},i._gtlistentry=null,i._chain=n,i}constructor(e){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,e==null?void 0:e.steps)for(const i of e.steps)i instanceof m_?this.steps.push(i):this.steps.push(new m_({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}))}getInverse(){const e=new Ef;e.steps=[];for(let i=this.steps.length-1;i>=0;i--){const n=this.steps[i];e.steps.push(n.getInverse())}return e}getGTListEntry(){let e="";for(const i of this.steps)e+=i.uid.toString()+",";return e!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=e),this._gtlistentry}assignCachedGe(e,i,n){this._cachedProjection[Ef.cacheKey(e,i)]=n}getCachedGeTransformation(e,i){let n="";for(const s of this.steps)n+=s.uid.toString()+",";n!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=n);const r=this._cachedProjection[Ef.cacheKey(e,i)];return r===void 0?null:r}};function SJ(t,e,i){if(e==null||i==null||i.vcsWkid||xt(e,i)||dc(e)||dc(i))return null;const n=u$(e)/u$(i);if(n===1)return null;switch(t){case"point":case"esriGeometryPoint":return r=>$J(r,n);case"polyline":case"esriGeometryPolyline":return r=>TJ(r,n);case"polygon":case"esriGeometryPolygon":return r=>xJ(r,n);case"multipoint":case"esriGeometryMultipoint":return r=>EJ(r,n);case"extent":case"esriGeometryEnvelope":return r=>kJ(r,n);default:return null}}function $J(t,e){(t==null?void 0:t.z)!=null&&(t.z*=e)}function xJ(t,e){if(t)for(const i of t.rings)for(const n of i)n.length>2&&(n[2]*=e)}function TJ(t,e){if(t)for(const i of t.paths)for(const n of i)n.length>2&&(n[2]*=e)}function EJ(t,e){if(t)for(const i of t.points)i.length>2&&(i[2]*=e)}function kJ(t,e){t&&t.zmin!=null&&t.zmax!=null&&(t.zmin*=e,t.zmax*=e)}let $s=null,mc=null,xm=null,H0={};const $E=new Og;function Ka(){return!!$s&&jT()}function T5(){return!!Ka()||(ue($E),Io(),!1)}function Io(t){return xm==null&&(xm=Promise.all([ZP(),V(()=>import("./geometryEngineBase-x-VXhX-U.js"),__vite__mapDeps([]),import.meta.url).then(e=>e.g),V(()=>import("./hydrated-FT1rqPfv.js"),__vite__mapDeps([]),import.meta.url)])),xm.then(([,e,{hydratedAdapter:i}])=>{Qe(t),mc=i,$s=e.default,$s._enableProjection(rV),$E.notify()})}function Oo(t,e,i=null,n=null){return Array.isArray(t)?t.length===0?[]:C$(mc,t,t[0].spatialReference,e,i,n):C$(mc,[t],t.spatialReference,e,i,n)[0]}function C$(t,e,i,n,r=null,s=null){if(i==null||n==null)return e;if(Os(i,n,r))return e.map(o=>V0(o,i,n));if(r==null&&eb(i))return e.map(o=>V0(o,i,xe.WGS84)).map(o=>eg(o,n));if(r==null&&eb(n))return e.map(o=>eg(o,xe.WGS84)).map(o=>V0(o,xe.WGS84,n));if(r==null){const o=db.cacheKey(i,n);H0[o]!==void 0?r=H0[o]:((r=k5(i,n,void 0))==null&&(r=new db),H0[o]=r)}if($s==null||t==null)throw new V1;return s!=null?$s._project(t,e,i,n,r,s):$s._project(t,e,i,n,r)}function MJ(t,e){const i=E5([t],e);return i.pending!=null?{pending:i.pending,geometry:null}:i.geometries!=null?{pending:null,geometry:i.geometries[0]}:{pending:null,geometry:null}}function E5(t,e){if(!Ka()){for(const i of t)if(i!=null&&!xt(i.spatialReference,e)&&fi(i.spatialReference)&&fi(e)&&!Os(i.spatialReference,e))return ue($E),{pending:Io(),geometries:null}}return{pending:null,geometries:t.map(i=>i==null?null:xt(i.spatialReference,e)?i:fi(i.spatialReference)&&fi(e)?eg(i,e):null)}}function k5(t,e,i=null){if(t==null||e==null)return null;if($s==null||mc==null)throw new V1;const n=$s._getTransformation(mc,t,e,i,i==null?void 0:i.spatialReference);return n!==null?db.fromGE(n):null}function CJ(t,e,i=null){if($s==null||mc==null)throw new V1;const n=$s._getTransformationBySuitability(mc,t,e,i,i==null?void 0:i.spatialReference);if(n!==null){const r=[];for(const s of n)r.push(db.fromGE(s));return r}return[]}let V1=class extends F{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};function IJ(){$s=null,mc=null,xm=null,H0={}}const OJ={get loadPromise(){return xm}};function eg(t,e){try{const i=Oo(t,e);if(i==null)return null;"xmin"in t&&"xmin"in i&&(i.zmin=t.zmin,i.zmax=t.zmax);const n=SJ(i.type,t.spatialReference,e);return n!=null&&n(i),i}catch(i){if(!(i instanceof V1))throw i;return null}}async function AJ(t,e,i){const n=t.spatialReference;return n!=null&&e!=null&&await xE(n,e,null,i),eg(t,e)}function Os(t,e,i){return!i&&(!!xt(t,e)||fi(t)&&fi(e)&&!!S5(t,e,x5))}async function xE(t,e,i,n){if(Ka())return zM(n);if(Array.isArray(t)){for(const{source:r,dest:s,geographicTransformation:o}of t)if(!Os(r,s,o))return Io(n)}else if(!Os(t,e,i))return Io(n);return zM(n)}function V0(t,e,i){return t?"x"in t?M5(t,e,new he,i,0):"xmin"in t?A5(t,e,new Ve,i,0):"rings"in t?O5(t,e,new Mn,i,0):"paths"in t?I5(t,e,new Tr,i,0):"points"in t?C5(t,e,new L1,i,0):null:null}function LJ(t,e,i=e.spatialReference,n=0){return i!=null&&t.spatialReference!=null&&M5(t,t.spatialReference,e,i,n)!=null}function M5(t,e,i,n,r){Ni[0]=t.x,Ni[1]=t.y;const s=t.z;return Ni[2]=s!==void 0?s:r,Ng(Ni,e,0,Ni,n,0,1)?(i.x=Ni[0],i.y=Ni[1],i.spatialReference=n,s!==void 0||dc(n)?(i.z=Ni[2],i.hasZ=!0):(i.z=void 0,i.hasZ=!1),t.m===void 0?(i.m=void 0,i.hasM=!1):(i.m=t.m,i.hasM=!0),i):null}function PJ(t,e,i=e.spatialReference,n=0){return t.spatialReference!=null&&i!=null&&C5(t,t.spatialReference,e,i,n)!=null}function C5(t,e,i,n,r){const{points:s,hasZ:o,hasM:a}=t,l=[],u=s.length,p=[];for(const m of s)p.push(m[0],m[1],o?m[2]:r);if(!Ng(p,e,0,p,n,0,u))return null;const f=o||dc(n);for(let m=0;m<u;++m){const g=3*m,y=p[g],v=p[g+1];f&&a?l.push([y,v,p[g+2],s[m][3]]):f?l.push([y,v,p[g+2]]):a?l.push([y,v,s[m][2]]):l.push([y,v])}return i.points=l,i.spatialReference=n,i.hasZ=o,i.hasM=a,i}function RJ(t,e,i=e.spatialReference,n=0){return t.spatialReference!=null&&i!=null&&I5(t,t.spatialReference,e,i,n)!=null}function I5(t,e,i,n,r){const{paths:s,hasZ:o,hasM:a}=t,l=[];if(!L5(s,o??!1,a??!1,e,l,n,r))return null;const u=o||dc(n);return i.paths=l,i.spatialReference=n,i.hasZ=u,i.hasM=a,i}function NJ(t,e,i=e.spatialReference,n=0){return t.spatialReference!=null&&i!=null&&O5(t,t.spatialReference,e,i,n)!=null}function O5(t,e,i,n,r){const{rings:s,hasZ:o,hasM:a}=t,l=[];if(!L5(s,o??!1,a??!1,e,l,n,r))return null;const u=o||dc(n);return i.rings=l,i.spatialReference=n,i.hasZ=u,i.hasM=a,i}function DJ(t,e,i=e.spatialReference,n=0){return t.spatialReference!=null&&i!=null&&A5(t,t.spatialReference,e,i,n)!=null}function A5(t,e,i,n,r){const{xmin:s,ymin:o,xmax:a,ymax:l,hasZ:u,hasM:p}=t,f=u?t.zmin:r;if(!vI(s,o,f,e,Ni,n))return null;const m=u||dc(n);i.xmin=Ni[0],i.ymin=Ni[1],m&&(i.zmin=Ni[2]);const g=u?t.zmax:r;return vI(a,l,g,e,Ni,n)?(i.xmax=Ni[0],i.ymax=Ni[1],m&&(i.zmax=Ni[2]),p&&(i.mmin=t.mmin,i.mmax=t.mmax),i.spatialReference=n,i):null}function L5(t,e,i,n,r,s,o=0){const a=new Array;for(const p of t)for(const f of p)a.push(f[0],f[1],e?f[2]:o);if(!Ng(a,n,0,a,s,0,a.length/3))return!1;let l=0;r.length=0;const u=e||dc(s);for(const p of t){const f=new Array;for(const m of p)u&&i?f.push([a[l++],a[l++],a[l++],m[3]]):u?f.push([a[l++],a[l++],a[l++]]):i?(f.push([a[l++],a[l++],m[2]]),l++):(f.push([a[l++],a[l++]]),l++);r.push(f)}return!0}function B1(t){return t!=null&&sJ(t)!=null}const Ni=se(),$_e=Object.freeze(Object.defineProperty({__proto__:null,canProjectToWGS84ComparableLonLat:B1,canProjectWithoutEngine:Os,getTransformation:k5,getTransformations:CJ,initializeProjection:xE,isLoaded:Ka,isLoadedOrLoad:T5,load:Io,project:Oo,projectExtent:DJ,projectMany:C$,projectMultipoint:PJ,projectOrLoad:MJ,projectOrLoadMany:E5,projectPoint:LJ,projectPolygon:NJ,projectPolyline:RJ,projectWithZConversion:AJ,projectWithoutEngine:V0,test:OJ,tryProjectWithZConversion:eg,unload:IJ},Symbol.toStringTag,{value:"Module"}));var I$;let Js=I$=class extends ie{constructor(t){super(t),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new I$({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};c([d({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Js.prototype,"cols",void 0),c([d({type:Et,json:{write:!0}})],Js.prototype,"level",void 0),c([d({type:String,json:{write:!0}})],Js.prototype,"levelValue",void 0),c([d({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Js.prototype,"origin",void 0),c([d({type:Number,json:{write:!0}})],Js.prototype,"resolution",void 0),c([d({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Js.prototype,"rows",void 0),c([d({type:Number,json:{write:!0}})],Js.prototype,"scale",void 0),Js=I$=c([S("esri.layers.support.LOD")],Js);const Sr=Js;let FJ=class{constructor(e,i,n,r,s=void 0){this.id=e,this.level=i,this.row=n,this.col=r,this.extent=s}};var yl;const bI=new Kt({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let bi=yl=class extends ie{static create(t={}){const{resolutionFactor:e=1,scales:i,size:n=256,spatialReference:r=xe.WebMercator,numLODs:s=24}=t;if(!fi(r)){const f=[];if(i)for(let m=0;m<i.length;m++){const g=i[m];f.push(new Sr({level:m,scale:g,resolution:g}))}else{let m=5e-4;for(let g=s-1;g>=0;g--)f.unshift(new Sr({level:g,scale:m,resolution:m})),m*=2}return new yl({dpi:96,lods:f,origin:new he(0,0,r),size:[n,n],spatialReference:r})}const o=En(r),a=t.origin?new he({x:t.origin.x,y:t.origin.y,spatialReference:r}):new he(o?{x:o.origin[0],y:o.origin[1],spatialReference:r}:{x:0,y:0,spatialReference:r}),l=96,u=1/(Cn(r)*39.37*l),p=[];if(i)for(let f=0;f<i.length;f++){const m=i[f],g=m*u;p.push(new Sr({level:f,scale:m,resolution:g}))}else{let f=C1(r)?512/n*5916575275917094e-7:256/n*591657527591555e-6;const m=Math.ceil(s/e);p.push(new Sr({level:0,scale:f,resolution:f*u}));for(let g=1;g<m;g++){const y=f/2**e,v=y*u;p.push(new Sr({level:g,scale:y,resolution:v})),f=y}}return new yl({dpi:l,lods:p,origin:a,size:[n,n],spatialReference:r})}constructor(t){super(t),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:t,origin:e}=this;if(t&&e){const i=En(t);return t.isWrappable&&!!i&&Math.abs(i.origin[0]-e.x)<=i.dx}return!1}readOrigin(t,e){return he.fromJSON({spatialReference:e.spatialReference,...t})}set lods(t){let e=0,i=0;const n=[],r=this._levelToLOD={};t&&(e=-1/0,i=1/0,t.forEach(s=>{n.push(s.scale),e=s.scale>e?s.scale:e,i=s.scale<i?s.scale:i,r[s.level]=s})),this._set("scales",n),this._set("lods",t),this._initializeUpsampleLevels()}readSize(t,e){return[e.cols,e.rows]}writeSize(t,e){e.cols=t[0],e.rows=t[1]}zoomToScale(t){const e=this.scales;if(t<=0)return e[0];if(t>=e.length-1)return e[e.length-1];const i=Math.floor(t),n=i+1;return e[i]/(e[i]/e[n])**(t-i)}scaleToZoom(t){const e=this.scales,i=e.length-1;let n=0;for(;n<i;n++){const r=e[n],s=e[n+1];if(r<=t)return n;if(s===t)return n+1;if(r>t&&s<t)return n+Math.log(r/t)/Math.log(r/s)}return n}snapScale(t,e=.95){const i=this.scaleToZoom(t);return i%Math.floor(i)>=e?this.zoomToScale(Math.ceil(i)):this.zoomToScale(Math.floor(i))}tileAt(t,e,i,n){const r=this.lodAt(t);if(!r)return null;let s,o;if(typeof e=="number")s=e,o=i;else if(xt(e.spatialReference,this.spatialReference))s=e.x,o=e.y,n=i;else{const u=I1(e,this.spatialReference);if(u==null)return null;s=u.x,o=u.y,n=i}const a=r.resolution*this.size[0],l=r.resolution*this.size[1];return n||(n=new FJ(null,0,0,0,tn())),n.level=t,n.row=Math.floor((this.origin.y-o)/l+.001),n.col=Math.floor((s-this.origin.x)/a+.001),this.updateTileInfo(n),n}updateTileInfo(t,e=yl.ExtrapolateOptions.NONE){let i=this.lodAt(t.level);if(!i&&e===yl.ExtrapolateOptions.POWER_OF_TWO){const o=this.lods[this.lods.length-1];o.level<t.level&&(i=o)}if(!i)return;const n=t.level-i.level,r=i.resolution*this.size[0]/2**n,s=i.resolution*this.size[1]/2**n;t.id=`${t.level}/${t.row}/${t.col}`,t.extent||(t.extent=tn()),t.extent[0]=this.origin.x+t.col*r,t.extent[1]=this.origin.y-(t.row+1)*s,t.extent[2]=t.extent[0]+r,t.extent[3]=t.extent[1]+s}upsampleTile(t){const e=this._upsampleLevels[t.level];return!(!e||e.parentLevel===-1)&&(t.level=e.parentLevel,t.row=Math.floor(t.row/e.factor+.001),t.col=Math.floor(t.col/e.factor+.001),this.updateTileInfo(t),!0)}getTileBounds(t,e){const i=this.lodAt(e.level);if(i==null)return null;const{resolution:n}=i,r=n*this.size[0],s=n*this.size[1];return t[0]=this.origin.x+e.col*r,t[1]=this.origin.y-(e.row+1)*s,t[2]=t[0]+r,t[3]=t[1]+s,t}lodAt(t){var e;return((e=this._levelToLOD)==null?void 0:e[t])??null}clone(){return yl.fromJSON(this.write({}))}getOrCreateCompatible(t,e){if(this.size[0]===256&&this.size[1]===256)return t===256?this:null;const i=[],n=this.lods.length;for(let r=0;r<n;r++){const s=this.lods[r],o=s.resolution*e;i.push(new Sr({level:s.level,scale:s.scale,resolution:o}))}return new yl({size:[t,t],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:i})}_initializeUpsampleLevels(){const t=this.lods;this._upsampleLevels=[];let e=null;for(let i=0;i<t.length;i++){const n=t[i];this._upsampleLevels[n.level]={parentLevel:e?e.level:-1,factor:e?e.resolution/n.resolution:0},e=n}}};c([d({type:Number,json:{write:!0}})],bi.prototype,"compressionQuality",void 0),c([d({type:Number,json:{write:!0}})],bi.prototype,"dpi",void 0),c([d({type:String,json:{read:bI.read,write:bI.write,origins:{"web-scene":{read:!1,write:!1}}}})],bi.prototype,"format",void 0),c([d({readOnly:!0})],bi.prototype,"isWrappable",null),c([d({type:he,json:{write:!0}})],bi.prototype,"origin",void 0),c([Ne("origin")],bi.prototype,"readOrigin",null),c([d({type:[Sr],value:null,json:{write:!0}})],bi.prototype,"lods",null),c([d({readOnly:!0})],bi.prototype,"scales",void 0),c([d({cast:t=>Array.isArray(t)?t:typeof t=="number"?[t,t]:[256,256]})],bi.prototype,"size",void 0),c([Ne("size",["rows","cols"])],bi.prototype,"readSize",null),c([Ie("size",{cols:{type:Et},rows:{type:Et}})],bi.prototype,"writeSize",null),c([d({type:xe,json:{write:!0}})],bi.prototype,"spatialReference",void 0),bi=yl=c([S("esri.layers.support.TileInfo")],bi),function(t){var e;(e=t.ExtrapolateOptions||(t.ExtrapolateOptions={}))[e.NONE=0]="NONE",e[e.POWER_OF_TWO=1]="POWER_OF_TWO"}(bi||(bi={}));const Tm=bi,B0={widthBreakpoint:{getValue(t){const e=t.viewSize[0],i=t.breakpoints,n=this.values;return e<=i.xsmall?n.xsmall:e<=i.small?n.small:e<=i.medium?n.medium:e<=i.large?n.large:n.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(t){const e=t.viewSize[1],i=t.breakpoints,n=this.values;return e<=i.xsmall?n.xsmall:e<=i.small?n.small:e<=i.medium?n.medium:e<=i.large?n.large:n.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(t){const e=t.viewSize,i=e[0],n=e[1],r=this.values;return n>=i?r.portrait:r.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},g_={xsmall:544,small:768,medium:992,large:1200};function zJ(t){const e=t;return e&&e.xsmall<e.small&&e.small<e.medium&&e.medium<e.large}function y_(t,e){return e?B0[t].valueToClassName[e].split(" "):[]}const jJ=t=>{let e=class extends t{constructor(...i){super(...i),this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=g_}initialize(){this.addHandles(Z(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),De))}destroy(){this.destroyed||this._removeActiveClassNames()}set breakpoints(i){if(i===this._get("breakpoints"))return;const n=zJ(i);if(!n){const r=JSON.stringify(g_,null,2);console.warn("provided breakpoints are not valid, using defaults:"+r)}i=n?i:g_,this._set("breakpoints",{...i})}_updateClassNames(){if(!this.container)return;const i=Xi.acquire(),n=Xi.acquire();let r,s=!1;for(r in B0){const o=this[r],a=B0[r].getValue({viewSize:this.size,breakpoints:this.breakpoints});o!==a&&(s=!0,this[r]=a,y_(r,o).forEach(l=>n.push(l)),y_(r,a).forEach(l=>i.push(l)))}s&&(this._applyClassNameChanges(i,n),Xi.release(i),Xi.release(n))}_applyClassNameChanges(i,n){const r=this.container;r&&(n.forEach(s=>r.classList.remove(s)),i.forEach(s=>r.classList.add(s)))}_removeActiveClassNames(){const i=this.container;if(!i)return;let n;for(n in B0)y_(n,this[n]).forEach(r=>i.classList.remove(r))}};return c([d()],e.prototype,"breakpoints",null),c([d()],e.prototype,"orientation",void 0),c([d()],e.prototype,"widthBreakpoint",void 0),c([d()],e.prototype,"heightBreakpoint",void 0),e=c([S("esri.views.BreakpointsOwner")],e),e};function TE(t){return typeof t=="string"?document.getElementById(t):t??null}function P5(t){for(;t.hasChildNodes();)t.removeChild(t.firstChild)}function wI(t,e){const i=e.parentNode;i&&i.insertBefore(t,e)}function _I(t,e){for(;;){const i=t.firstChild;if(!i)break;e.appendChild(i)}}let nc=class extends X{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll()}add(e,i,n={}){return this._installWatch(e,i,n,Z)}addWhen(e,i,n={}){return this._installWatch(e,i,n,On)}addOnCollectionChange(e,i,{initial:n=!1,final:r=!1}={}){const s=++this._handleId;return this.addHandles([Lr(e,"after-changes",this._createSyncUpdatingCallback(),hc),Lr(e,"change",i,{onListenerAdd:n?o=>i({added:o.toArray(),removed:[]}):void 0,onListenerRemove:r?o=>i({added:[],removed:o.toArray()}):void 0})],s),Ye(()=>this.removeHandles(s))}addPromise(e){if(e==null)return e;const i=++this._handleId;this.addHandles(Ye(()=>{this._pendingPromises.delete(e)&&(this._pendingPromises.size!==0||this.hasHandles(Fy)||this._set("updating",!1))}),i),this._pendingPromises.add(e),this._set("updating",!0);const n=()=>this.removeHandles(i);return e.then(n,n),e}removeAll(){this._pendingPromises.clear(),this.removeAllHandles(),this._set("updating",!1)}_installWatch(e,i,n={},r){const s=++this._handleId;n.sync||this._installSyncUpdatingWatch(e,s);const o=r(e,i,n);return this.addHandles(o,s),Ye(()=>this.removeHandles(s))}_installSyncUpdatingWatch(e,i){const n=this._createSyncUpdatingCallback(),r=Z(e,n,{sync:!0,equals:()=>!1});return this.addHandles(r,i),r}_createSyncUpdatingCallback(){return()=>{this.removeHandles(Fy),++this._scheduleHandleId;const e=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this.addHandles($g(()=>{e===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this.removeHandles(Fy))}),Fy)}}};c([d({readOnly:!0})],nc.prototype,"updating",void 0),nc=c([S("esri.core.support.UpdatingHandles")],nc);const Fy=-42;/*!
 * @esri/arcgis-html-sanitizer - v3.0.1 - Tue Nov 15 2022 09:46:54 GMT-0800 (Pacific Standard Time)
 * Copyright (c) 2022 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei(é›·å®—æ°‘) <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 */var GJ=function(t){if(typeof t!="object"||t===null||Object.prototype.toString.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},Mu={exports:{}},Mt={},tg={exports:{}},xd={};function R5(){var t={};return t["align-content"]=!1,t["align-items"]=!1,t["align-self"]=!1,t["alignment-adjust"]=!1,t["alignment-baseline"]=!1,t.all=!1,t["anchor-point"]=!1,t.animation=!1,t["animation-delay"]=!1,t["animation-direction"]=!1,t["animation-duration"]=!1,t["animation-fill-mode"]=!1,t["animation-iteration-count"]=!1,t["animation-name"]=!1,t["animation-play-state"]=!1,t["animation-timing-function"]=!1,t.azimuth=!1,t["backface-visibility"]=!1,t.background=!0,t["background-attachment"]=!0,t["background-clip"]=!0,t["background-color"]=!0,t["background-image"]=!0,t["background-origin"]=!0,t["background-position"]=!0,t["background-repeat"]=!0,t["background-size"]=!0,t["baseline-shift"]=!1,t.binding=!1,t.bleed=!1,t["bookmark-label"]=!1,t["bookmark-level"]=!1,t["bookmark-state"]=!1,t.border=!0,t["border-bottom"]=!0,t["border-bottom-color"]=!0,t["border-bottom-left-radius"]=!0,t["border-bottom-right-radius"]=!0,t["border-bottom-style"]=!0,t["border-bottom-width"]=!0,t["border-collapse"]=!0,t["border-color"]=!0,t["border-image"]=!0,t["border-image-outset"]=!0,t["border-image-repeat"]=!0,t["border-image-slice"]=!0,t["border-image-source"]=!0,t["border-image-width"]=!0,t["border-left"]=!0,t["border-left-color"]=!0,t["border-left-style"]=!0,t["border-left-width"]=!0,t["border-radius"]=!0,t["border-right"]=!0,t["border-right-color"]=!0,t["border-right-style"]=!0,t["border-right-width"]=!0,t["border-spacing"]=!0,t["border-style"]=!0,t["border-top"]=!0,t["border-top-color"]=!0,t["border-top-left-radius"]=!0,t["border-top-right-radius"]=!0,t["border-top-style"]=!0,t["border-top-width"]=!0,t["border-width"]=!0,t.bottom=!1,t["box-decoration-break"]=!0,t["box-shadow"]=!0,t["box-sizing"]=!0,t["box-snap"]=!0,t["box-suppress"]=!0,t["break-after"]=!0,t["break-before"]=!0,t["break-inside"]=!0,t["caption-side"]=!1,t.chains=!1,t.clear=!0,t.clip=!1,t["clip-path"]=!1,t["clip-rule"]=!1,t.color=!0,t["color-interpolation-filters"]=!0,t["column-count"]=!1,t["column-fill"]=!1,t["column-gap"]=!1,t["column-rule"]=!1,t["column-rule-color"]=!1,t["column-rule-style"]=!1,t["column-rule-width"]=!1,t["column-span"]=!1,t["column-width"]=!1,t.columns=!1,t.contain=!1,t.content=!1,t["counter-increment"]=!1,t["counter-reset"]=!1,t["counter-set"]=!1,t.crop=!1,t.cue=!1,t["cue-after"]=!1,t["cue-before"]=!1,t.cursor=!1,t.direction=!1,t.display=!0,t["display-inside"]=!0,t["display-list"]=!0,t["display-outside"]=!0,t["dominant-baseline"]=!1,t.elevation=!1,t["empty-cells"]=!1,t.filter=!1,t.flex=!1,t["flex-basis"]=!1,t["flex-direction"]=!1,t["flex-flow"]=!1,t["flex-grow"]=!1,t["flex-shrink"]=!1,t["flex-wrap"]=!1,t.float=!1,t["float-offset"]=!1,t["flood-color"]=!1,t["flood-opacity"]=!1,t["flow-from"]=!1,t["flow-into"]=!1,t.font=!0,t["font-family"]=!0,t["font-feature-settings"]=!0,t["font-kerning"]=!0,t["font-language-override"]=!0,t["font-size"]=!0,t["font-size-adjust"]=!0,t["font-stretch"]=!0,t["font-style"]=!0,t["font-synthesis"]=!0,t["font-variant"]=!0,t["font-variant-alternates"]=!0,t["font-variant-caps"]=!0,t["font-variant-east-asian"]=!0,t["font-variant-ligatures"]=!0,t["font-variant-numeric"]=!0,t["font-variant-position"]=!0,t["font-weight"]=!0,t.grid=!1,t["grid-area"]=!1,t["grid-auto-columns"]=!1,t["grid-auto-flow"]=!1,t["grid-auto-rows"]=!1,t["grid-column"]=!1,t["grid-column-end"]=!1,t["grid-column-start"]=!1,t["grid-row"]=!1,t["grid-row-end"]=!1,t["grid-row-start"]=!1,t["grid-template"]=!1,t["grid-template-areas"]=!1,t["grid-template-columns"]=!1,t["grid-template-rows"]=!1,t["hanging-punctuation"]=!1,t.height=!0,t.hyphens=!1,t.icon=!1,t["image-orientation"]=!1,t["image-resolution"]=!1,t["ime-mode"]=!1,t["initial-letters"]=!1,t["inline-box-align"]=!1,t["justify-content"]=!1,t["justify-items"]=!1,t["justify-self"]=!1,t.left=!1,t["letter-spacing"]=!0,t["lighting-color"]=!0,t["line-box-contain"]=!1,t["line-break"]=!1,t["line-grid"]=!1,t["line-height"]=!1,t["line-snap"]=!1,t["line-stacking"]=!1,t["line-stacking-ruby"]=!1,t["line-stacking-shift"]=!1,t["line-stacking-strategy"]=!1,t["list-style"]=!0,t["list-style-image"]=!0,t["list-style-position"]=!0,t["list-style-type"]=!0,t.margin=!0,t["margin-bottom"]=!0,t["margin-left"]=!0,t["margin-right"]=!0,t["margin-top"]=!0,t["marker-offset"]=!1,t["marker-side"]=!1,t.marks=!1,t.mask=!1,t["mask-box"]=!1,t["mask-box-outset"]=!1,t["mask-box-repeat"]=!1,t["mask-box-slice"]=!1,t["mask-box-source"]=!1,t["mask-box-width"]=!1,t["mask-clip"]=!1,t["mask-image"]=!1,t["mask-origin"]=!1,t["mask-position"]=!1,t["mask-repeat"]=!1,t["mask-size"]=!1,t["mask-source-type"]=!1,t["mask-type"]=!1,t["max-height"]=!0,t["max-lines"]=!1,t["max-width"]=!0,t["min-height"]=!0,t["min-width"]=!0,t["move-to"]=!1,t["nav-down"]=!1,t["nav-index"]=!1,t["nav-left"]=!1,t["nav-right"]=!1,t["nav-up"]=!1,t["object-fit"]=!1,t["object-position"]=!1,t.opacity=!1,t.order=!1,t.orphans=!1,t.outline=!1,t["outline-color"]=!1,t["outline-offset"]=!1,t["outline-style"]=!1,t["outline-width"]=!1,t.overflow=!1,t["overflow-wrap"]=!1,t["overflow-x"]=!1,t["overflow-y"]=!1,t.padding=!0,t["padding-bottom"]=!0,t["padding-left"]=!0,t["padding-right"]=!0,t["padding-top"]=!0,t.page=!1,t["page-break-after"]=!1,t["page-break-before"]=!1,t["page-break-inside"]=!1,t["page-policy"]=!1,t.pause=!1,t["pause-after"]=!1,t["pause-before"]=!1,t.perspective=!1,t["perspective-origin"]=!1,t.pitch=!1,t["pitch-range"]=!1,t["play-during"]=!1,t.position=!1,t["presentation-level"]=!1,t.quotes=!1,t["region-fragment"]=!1,t.resize=!1,t.rest=!1,t["rest-after"]=!1,t["rest-before"]=!1,t.richness=!1,t.right=!1,t.rotation=!1,t["rotation-point"]=!1,t["ruby-align"]=!1,t["ruby-merge"]=!1,t["ruby-position"]=!1,t["shape-image-threshold"]=!1,t["shape-outside"]=!1,t["shape-margin"]=!1,t.size=!1,t.speak=!1,t["speak-as"]=!1,t["speak-header"]=!1,t["speak-numeral"]=!1,t["speak-punctuation"]=!1,t["speech-rate"]=!1,t.stress=!1,t["string-set"]=!1,t["tab-size"]=!1,t["table-layout"]=!1,t["text-align"]=!0,t["text-align-last"]=!0,t["text-combine-upright"]=!0,t["text-decoration"]=!0,t["text-decoration-color"]=!0,t["text-decoration-line"]=!0,t["text-decoration-skip"]=!0,t["text-decoration-style"]=!0,t["text-emphasis"]=!0,t["text-emphasis-color"]=!0,t["text-emphasis-position"]=!0,t["text-emphasis-style"]=!0,t["text-height"]=!0,t["text-indent"]=!0,t["text-justify"]=!0,t["text-orientation"]=!0,t["text-overflow"]=!0,t["text-shadow"]=!0,t["text-space-collapse"]=!0,t["text-transform"]=!0,t["text-underline-position"]=!0,t["text-wrap"]=!0,t.top=!1,t.transform=!1,t["transform-origin"]=!1,t["transform-style"]=!1,t.transition=!1,t["transition-delay"]=!1,t["transition-duration"]=!1,t["transition-property"]=!1,t["transition-timing-function"]=!1,t["unicode-bidi"]=!1,t["vertical-align"]=!1,t.visibility=!1,t["voice-balance"]=!1,t["voice-duration"]=!1,t["voice-family"]=!1,t["voice-pitch"]=!1,t["voice-range"]=!1,t["voice-rate"]=!1,t["voice-stress"]=!1,t["voice-volume"]=!1,t.volume=!1,t["white-space"]=!1,t.widows=!1,t.width=!0,t["will-change"]=!1,t["word-break"]=!0,t["word-spacing"]=!0,t["word-wrap"]=!0,t["wrap-flow"]=!1,t["wrap-through"]=!1,t["writing-mode"]=!1,t["z-index"]=!1,t}function UJ(t,e,i){}function HJ(t,e,i){}var VJ=/javascript\s*\:/img;function BJ(t,e){return VJ.test(e)?"":e}xd.whiteList=R5();xd.getDefaultWhiteList=R5;xd.onAttr=UJ;xd.onIgnoreAttr=HJ;xd.safeAttrValue=BJ;var qJ={indexOf:function(t,e){var i,n;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var n,r;if(Array.prototype.forEach)return t.forEach(e,i);for(n=0,r=t.length;n<r;n++)e.call(i,t[n],n,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(t){return String.prototype.trimRight?t.trimRight():t.replace(/(\s*$)/g,"")}},lf=qJ;function WJ(t,e){t=lf.trimRight(t),t[t.length-1]!==";"&&(t+=";");var i=t.length,n=!1,r=0,s=0,o="";function a(){if(!n){var p=lf.trim(t.slice(r,s)),f=p.indexOf(":");if(f!==-1){var m=lf.trim(p.slice(0,f)),g=lf.trim(p.slice(f+1));if(m){var y=e(r,o.length,m,g,p);y&&(o+=y+"; ")}}}r=s+1}for(;s<i;s++){var l=t[s];if(l==="/"&&t[s+1]==="*"){var u=t.indexOf("*/",s+2);if(u===-1)break;s=u+1,r=s+1,n=!1}else l==="("?n=!0:l===")"?n=!1:l===";"?n||a():l===`
`&&a()}return lf.trim(o)}var ZJ=WJ,zy=xd,KJ=ZJ;function SI(t){return t==null}function JJ(t){var e={};for(var i in t)e[i]=t[i];return e}function N5(t){t=JJ(t||{}),t.whiteList=t.whiteList||zy.whiteList,t.onAttr=t.onAttr||zy.onAttr,t.onIgnoreAttr=t.onIgnoreAttr||zy.onIgnoreAttr,t.safeAttrValue=t.safeAttrValue||zy.safeAttrValue,this.options=t}N5.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,n=i.whiteList,r=i.onAttr,s=i.onIgnoreAttr,o=i.safeAttrValue,a=KJ(t,function(l,u,p,f,m){var g=n[p],y=!1;if(g===!0?y=g:typeof g=="function"?y=g(f):g instanceof RegExp&&(y=g.test(f)),y!==!0&&(y=!1),f=o(p,f),!!f){var v={position:u,sourcePosition:l,source:m,isWhite:y};if(y){var b=r(p,f,v);return SI(b)?p+":"+f:b}else{var b=s(p,f,v);if(!SI(b))return b}}});return a};var YJ=N5;(function(t,e){var i=xd,n=YJ;function r(o,a){var l=new n(a);return l.process(o)}e=t.exports=r,e.FilterCSS=n;for(var s in i)e[s]=i[s]})(tg,tg.exports);var EE={indexOf:function(t,e){var i,n;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var n,r;if(Array.prototype.forEach)return t.forEach(e,i);for(n=0,r=t.length;n<r;n++)e.call(i,t[n],n,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(t){var e=/\s|\n|\t/,i=e.exec(t);return i?i.index:-1}},XJ=tg.exports.FilterCSS,QJ=tg.exports.getDefaultWhiteList,hb=EE;function D5(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var F5=new XJ;function eY(t,e,i){}function tY(t,e,i){}function iY(t,e,i){}function nY(t,e,i){}function z5(t){return t.replace(sY,"&lt;").replace(oY,"&gt;")}function rY(t,e,i,n){if(i=B5(i),e==="href"||e==="src"){if(i=hb.trim(i),i==="#")return"#";if(!(i.substr(0,7)==="http://"||i.substr(0,8)==="https://"||i.substr(0,7)==="mailto:"||i.substr(0,4)==="tel:"||i.substr(0,11)==="data:image/"||i.substr(0,6)==="ftp://"||i.substr(0,2)==="./"||i.substr(0,3)==="../"||i[0]==="#"||i[0]==="/"))return""}else if(e==="background"){if(jy.lastIndex=0,jy.test(i))return""}else if(e==="style"){if($I.lastIndex=0,$I.test(i)||(xI.lastIndex=0,xI.test(i)&&(jy.lastIndex=0,jy.test(i))))return"";n!==!1&&(n=n||F5,i=n.process(i))}return i=q5(i),i}var sY=/</g,oY=/>/g,aY=/"/g,lY=/&quot;/g,cY=/&#([a-zA-Z0-9]*);?/gim,uY=/&colon;?/gim,dY=/&newline;?/gim,jy=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,$I=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,xI=/u\s*r\s*l\s*\(.*/gi;function j5(t){return t.replace(aY,"&quot;")}function G5(t){return t.replace(lY,'"')}function U5(t){return t.replace(cY,function(i,n){return n[0]==="x"||n[0]==="X"?String.fromCharCode(parseInt(n.substr(1),16)):String.fromCharCode(parseInt(n,10))})}function H5(t){return t.replace(uY,":").replace(dY," ")}function V5(t){for(var e="",i=0,n=t.length;i<n;i++)e+=t.charCodeAt(i)<32?" ":t.charAt(i);return hb.trim(e)}function B5(t){return t=G5(t),t=U5(t),t=H5(t),t=V5(t),t}function q5(t){return t=j5(t),t=z5(t),t}function hY(){return""}function pY(t,e){typeof e!="function"&&(e=function(){});var i=!Array.isArray(t);function n(o){return i?!0:hb.indexOf(t,o)!==-1}var r=[],s=!1;return{onIgnoreTag:function(o,a,l){if(n(o))if(l.isClosing){var u="[/removed]",p=l.position+u.length;return r.push([s!==!1?s:l.position,p]),s=!1,u}else return s||(s=l.position),"[removed]";else return e(o,a,l)},remove:function(o){var a="",l=0;return hb.forEach(r,function(u){a+=o.slice(l,u[0]),l=u[1]}),a+=o.slice(l),a}}}function fY(t){for(var e="",i=0;i<t.length;){var n=t.indexOf("<!--",i);if(n===-1){e+=t.slice(i);break}e+=t.slice(i,n);var r=t.indexOf("-->",n);if(r===-1)break;i=r+3}return e}function mY(t){var e=t.split("");return e=e.filter(function(i){var n=i.charCodeAt(0);return n===127?!1:n<=31?n===10||n===13:!0}),e.join("")}Mt.whiteList=D5();Mt.getDefaultWhiteList=D5;Mt.onTag=eY;Mt.onIgnoreTag=tY;Mt.onTagAttr=iY;Mt.onIgnoreTagAttr=nY;Mt.safeAttrValue=rY;Mt.escapeHtml=z5;Mt.escapeQuote=j5;Mt.unescapeQuote=G5;Mt.escapeHtmlEntities=U5;Mt.escapeDangerHtml5Entities=H5;Mt.clearNonPrintableCharacter=V5;Mt.friendlyAttrValue=B5;Mt.escapeAttrValue=q5;Mt.onIgnoreTagStripAll=hY;Mt.StripTagBody=pY;Mt.stripCommentTag=fY;Mt.stripBlankChar=mY;Mt.cssFilter=F5;Mt.getDefaultCSSWhiteList=QJ;var q1={},Vl=EE;function gY(t){var e=Vl.spaceIndex(t),i;return e===-1?i=t.slice(1,-1):i=t.slice(1,e+1),i=Vl.trim(i).toLowerCase(),i.slice(0,1)==="/"&&(i=i.slice(1)),i.slice(-1)==="/"&&(i=i.slice(0,-1)),i}function yY(t){return t.slice(0,2)==="</"}function vY(t,e,i){var n="",r=0,s=!1,o=!1,a=0,l=t.length,u="",p="";e:for(a=0;a<l;a++){var f=t.charAt(a);if(s===!1){if(f==="<"){s=a;continue}}else if(o===!1){if(f==="<"){n+=i(t.slice(r,a)),s=a,r=a;continue}if(f===">"){n+=i(t.slice(r,s)),p=t.slice(s,a+1),u=gY(p),n+=e(s,n.length,u,p,yY(p)),r=a+1,s=!1;continue}if(f==='"'||f==="'")for(var m=1,g=t.charAt(a-m);g.trim()===""||g==="=";){if(g==="="){o=f;continue e}g=t.charAt(a-++m)}}else if(f===o){o=!1;continue}}return r<t.length&&(n+=i(t.substr(r))),n}var bY=/[^a-zA-Z0-9\\_:.-]/gim;function wY(t,e){var i=0,n=0,r=[],s=!1,o=t.length;function a(m,g){if(m=Vl.trim(m),m=m.replace(bY,"").toLowerCase(),!(m.length<1)){var y=e(m,g||"");y&&r.push(y)}}for(var l=0;l<o;l++){var u=t.charAt(l),p,f;if(s===!1&&u==="="){s=t.slice(i,l),i=l+1,n=t.charAt(i)==='"'||t.charAt(i)==="'"?i:SY(t,l+1);continue}if(s!==!1&&l===n){if(f=t.indexOf(u,l+1),f===-1)break;p=Vl.trim(t.slice(n+1,f)),a(s,p),s=!1,l=f,i=l+1;continue}if(/\s|\n|\t/.test(u))if(t=t.replace(/\s|\n|\t/g," "),s===!1)if(f=_Y(t,l),f===-1){p=Vl.trim(t.slice(i,l)),a(p),s=!1,i=l+1;continue}else{l=f-1;continue}else if(f=$Y(t,l-1),f===-1){p=Vl.trim(t.slice(i,l)),p=TI(p),a(s,p),s=!1,i=l+1;continue}else continue}return i<t.length&&(s===!1?a(t.slice(i)):a(s,TI(Vl.trim(t.slice(i))))),Vl.trim(r.join(" "))}function _Y(t,e){for(;e<t.length;e++){var i=t[e];if(i!==" ")return i==="="?e:-1}}function SY(t,e){for(;e<t.length;e++){var i=t[e];if(i!==" ")return i==="'"||i==='"'?e:-1}}function $Y(t,e){for(;e>0;e--){var i=t[e];if(i!==" ")return i==="="?e:-1}}function xY(t){return t[0]==='"'&&t[t.length-1]==='"'||t[0]==="'"&&t[t.length-1]==="'"}function TI(t){return xY(t)?t.substr(1,t.length-2):t}q1.parseTag=vY;q1.parseAttr=wY;var TY=tg.exports.FilterCSS,hs=Mt,W5=q1,EY=W5.parseTag,kY=W5.parseAttr,q0=EE;function Gy(t){return t==null}function MY(t){var e=q0.spaceIndex(t);if(e===-1)return{html:"",closing:t[t.length-2]==="/"};t=q0.trim(t.slice(e+1,-1));var i=t[t.length-1]==="/";return i&&(t=q0.trim(t.slice(0,-1))),{html:t,closing:i}}function CY(t){var e={};for(var i in t)e[i]=t[i];return e}function IY(t){var e={};for(var i in t)Array.isArray(t[i])?e[i.toLowerCase()]=t[i].map(function(n){return n.toLowerCase()}):e[i.toLowerCase()]=t[i];return e}function Z5(t){t=CY(t||{}),t.stripIgnoreTag&&(t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),t.onIgnoreTag=hs.onIgnoreTagStripAll),t.whiteList||t.allowList?t.whiteList=IY(t.whiteList||t.allowList):t.whiteList=hs.whiteList,t.onTag=t.onTag||hs.onTag,t.onTagAttr=t.onTagAttr||hs.onTagAttr,t.onIgnoreTag=t.onIgnoreTag||hs.onIgnoreTag,t.onIgnoreTagAttr=t.onIgnoreTagAttr||hs.onIgnoreTagAttr,t.safeAttrValue=t.safeAttrValue||hs.safeAttrValue,t.escapeHtml=t.escapeHtml||hs.escapeHtml,this.options=t,t.css===!1?this.cssFilter=!1:(t.css=t.css||{},this.cssFilter=new TY(t.css))}Z5.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,n=i.whiteList,r=i.onTag,s=i.onIgnoreTag,o=i.onTagAttr,a=i.onIgnoreTagAttr,l=i.safeAttrValue,u=i.escapeHtml,p=e.cssFilter;i.stripBlankChar&&(t=hs.stripBlankChar(t)),i.allowCommentTag||(t=hs.stripCommentTag(t));var f=!1;i.stripIgnoreTagBody&&(f=hs.StripTagBody(i.stripIgnoreTagBody,s),s=f.onIgnoreTag);var m=EY(t,function(g,y,v,b,_){var $={sourcePosition:g,position:y,isClosing:_,isWhite:Object.prototype.hasOwnProperty.call(n,v)},x=r(v,b,$);if(!Gy(x))return x;if($.isWhite){if($.isClosing)return"</"+v+">";var E=MY(b),C=n[v],M=kY(E.html,function(N,G){var U=q0.indexOf(C,N)!==-1,B=o(v,N,G,U);return Gy(B)?U?(G=l(v,N,G,p),G?N+'="'+G+'"':N):(B=a(v,N,G,U),Gy(B)?void 0:B):B});return b="<"+v,M&&(b+=" "+M),E.closing&&(b+=" /"),b+=">",b}else return x=s(v,b,$),Gy(x)?u(b):x},u);return f&&(m=f.remove(m)),m};var OY=Z5;(function(t,e){var i=Mt,n=q1,r=OY;function s(a,l){var u=new r(l);return u.process(a)}e=t.exports=s,e.filterXSS=s,e.FilterXSS=r,function(){for(var a in i)e[a]=i[a];for(var l in n)e[l]=n[l]}();function o(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}o()&&(self.filterXSS=t.exports)})(Mu,Mu.exports);var AY=function(){function t(e,i){var n=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],audio:["autoplay","controls","loop","muted","preload"],b:[],br:[],dd:["style"],div:["align","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],ol:[],p:["style"],source:["media","src","type"],span:["style"],strong:[],sub:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(s,o,a,l){return s==="a"&&o==="href"||(s==="img"||s==="source")&&o==="src"?n.sanitizeUrl(a):Mu.exports.safeAttrValue(s,o,a,l)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var r;e&&!i?r=e:e&&i?(r=Object.create(this.arcgisFilterOptions),Object.keys(e).forEach(function(s){s==="whiteList"?r.whiteList=n._extendObjectOfArrays([n.arcgisWhiteList,e.whiteList||{}]):r[s]=e[s]})):(r=Object.create(this.arcgisFilterOptions),r.whiteList=this.arcgisWhiteList),this.xssFilterOptions=r,this._xssFilter=new Mu.exports.FilterXSS(r)}return t.prototype.sanitize=function(e,i){switch(i===void 0&&(i={}),typeof e){case"number":return isNaN(e)||!isFinite(e)?null:e;case"boolean":return e;case"string":return this._xssFilter.process(e);case"object":return this._iterateOverObject(e,i);default:return i.allowUndefined&&typeof e>"u"?void 0:null}},t.prototype.sanitizeUrl=function(e,i){var n=(i??{}).isProtocolRequired,r=n===void 0?!0:n,s=this._trim(e.substring(0,e.indexOf(":"))),o=e==="/",a=/^#/.test(e),l=s&&this.allowedProtocols.indexOf(s.toLowerCase())>-1;return o||a||l?Mu.exports.escapeAttrValue(e):!s&&!r?Mu.exports.escapeAttrValue("https://".concat(e)):""},t.prototype.sanitizeHTMLAttribute=function(e,i,n,r){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(e,i,n,r):Mu.exports.safeAttrValue(e,i,n,r)},t.prototype.validate=function(e,i){i===void 0&&(i={});var n=this.sanitize(e,i);return{isValid:e===n,sanitized:n}},t.prototype.encodeHTML=function(e){var i=this;return String(e).replace(/[&<>"'\/]/g,function(n){return i._entityMap[n]})},t.prototype.encodeAttrValue=function(e){var i=/^[a-zA-Z0-9]$/;return String(e).replace(/[\x00-\xFF]/g,function(n,r){return i.test(n)?n:"&#x".concat(Number(e.charCodeAt(r)).toString(16),";")})},t.prototype._extendObjectOfArrays=function(e){var i={};return e.forEach(function(n){Object.keys(n).forEach(function(r){Array.isArray(n[r])&&Array.isArray(i[r])?i[r]=i[r].concat(n[r]):i[r]=n[r]})}),i},t.prototype._iterateOverObject=function(e,i){var n=this;i===void 0&&(i={});try{var r=!1,s=void 0;if(Array.isArray(e))s=e.reduce(function(a,l){var u=n.validate(l,i);return u.isValid?a.concat([l]):(r=!0,a.concat([u.sanitized]))},[]);else if(GJ(e)){var o=Object.keys(e);s=o.reduce(function(a,l){var u=e[l],p=n.validate(u,i);return p.isValid?a[l]=u:(r=!0,a[l]=p.sanitized),a},{})}else return i.allowUndefined&&typeof e>"u"?void 0:null;return r?s:e}catch{return null}},t.prototype._trim=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},t}();const W1=new Map;function K5(){W1.clear()}function LY(t){return W1.get(t)}function PY(t,e){W1.set(t,e)}function v_(t){W1.delete(t)}const RY=J.getLogger("esri.widgets.support.widgetUtils");function J5(t){const e=Xi.acquire();for(let n=0;n<arguments.length;n++){const r=arguments[n],s=typeof r;if(s==="string")e.push(r);else if(Array.isArray(r))e.push.apply(e,r);else if(s==="object")for(const o in r)r[o]&&e.push(o)}const i=e.join(" ");return Xi.release(e),i}const NY=(()=>{const t=new Map,e=new ResizeObserver(n=>{var r;K5();for(const s of n)(r=t.get(s.target))==null||r(s)}),i=(n,r,s)=>(t.has(n)&&RY.error("Already observing element",n),t.set(n,r),e.observe(n,s),Ye(()=>{e.unobserve(n),t.delete(n)}));return(n,r,s)=>{let o=null;return $c([Z(()=>typeof n=="function"?n():n,a=>{o==null||o.remove(),a&&(o=i(a,r,s))},di),Ye(()=>o==null?void 0:o.remove())])}})();function O$(t){const e=t==null?void 0:t.closest("[dir]");return e!==null&&e instanceof HTMLElement&&e.dir==="rtl"||document.dir==="rtl"}function E_e(t){const e="data-node-ref";this[t.getAttribute(e)]=null}function Uy(t){const e="data-node-ref";this[t.getAttribute(e)]=t}const DY=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],FY=DY.reduce((t,e)=>(t[e]=[],t),{}),zY=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],Y5=new AY({whiteList:FY,onTagAttr:(t,e,i)=>{const n=`${e}="${i}"`;if(zY.includes(e))return n},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function jY(t,e){const i=t.getBoundingClientRect(),n=e.getBoundingClientRect(),r=i.top+i.height,s=n.top+n.height,o=i.top,a=n.top;(r>s||o<a)&&t.scrollIntoView({block:"end"})}function X5(t){return t==="Enter"||t===" "}const Q5="http://www.w3.org/",Z1=`${Q5}2000/svg`,eD=`${Q5}1999/xlink`;let EI=[],kE=(t,e)=>{let i={};return Object.keys(t).forEach(n=>{i[n]=t[n]}),e&&Object.keys(e).forEach(n=>{i[n]=e[n]}),i},ME=(t,e)=>t.vnodeSelector===e.vnodeSelector&&(t.properties&&e.properties?t.properties.key===e.properties.key&&t.properties.bind===e.properties.bind:!t.properties&&!e.properties),tD=t=>{if(typeof t!="string")throw new Error("Style values must be strings")},GY=(t,e,i)=>{if(e.vnodeSelector!==""){for(let n=i;n<t.length;n++)if(ME(t[n],e))return n}return-1},b_=(t,e,i,n)=>{let r=t[e];if(r.vnodeSelector==="")return;let s=r.properties;if(!(s&&(s.key===void 0?s.bind:s.key))){for(let o=0;o<t.length;o++)if(o!==e){let a=t[o];if(ME(a,r))throw new Error(`${i.vnodeSelector} had a ${r.vnodeSelector} child ${n==="added"?n:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},UY=t=>{if(t.properties){let e=t.properties.enterAnimation;e&&e(t.domNode,t.properties)}},A$=[],L$=!1,iD=t=>{(t.children||[]).forEach(iD),t.properties&&t.properties.afterRemoved&&t.properties.afterRemoved.apply(t.properties.bind||t.properties,[t.domNode])},kI=()=>{L$=!1,A$.forEach(iD),A$.length=0},MI=t=>{A$.push(t),L$||(L$=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(kI,{timeout:16}):setTimeout(kI,16))},CI=t=>{let e=t.domNode;if(t.properties){let i=t.properties.exitAnimation;if(i)return e.style.pointerEvents="none",void i(e,()=>{e.parentNode&&(e.parentNode.removeChild(e),MI(t))},t.properties)}e.parentNode&&(e.parentNode.removeChild(e),MI(t))},HY=(t,e,i)=>{if(!e)return;let n=i.eventHandlerInterceptor,r=Object.keys(e),s=r.length;for(let o=0;o<s;o++){let a=r[o],l=e[a];if(a==="className")throw new Error('Property "className" is not supported, use "class".');if(a==="class")R$(t,l,!0);else if(a==="classes"){let u=Object.keys(l),p=u.length;for(let f=0;f<p;f++){let m=u[f];l[m]&&t.classList.add(m)}}else if(a==="styles"){let u=Object.keys(l),p=u.length;for(let f=0;f<p;f++){let m=u[f],g=l[m];g&&(tD(g),i.styleApplyer(t,m,g))}}else if(a!=="key"&&l!=null){let u=typeof l;u==="function"?(a.lastIndexOf("on",0)===0&&(n&&(l=n(a,l,t,e)),a==="oninput"&&function(){let p=l;l=function(f){p.apply(this,[f]),f.target["oninput-value"]=f.target.value}}()),t[a]=l):i.namespace===Z1?a==="href"?t.setAttributeNS(eD,a,l):t.setAttribute(a,l):u==="string"&&a!=="value"?a==="innerHTML"?t[a]=Y5.sanitize(l):P$(t)&&a in t?t[a]=l:t.setAttribute(a,l):t[a]=l}}};function P$(t){if(!(t instanceof Element&&t.tagName.includes("-")))return!1;const e=window.customElements.get(t.tagName.toLowerCase());return!!e&&t instanceof e}let pb,VY=(t,e,i)=>{if(e)for(let n of e)Ah(n,t,void 0,i)},nD=(t,e,i)=>{VY(t,e.children,i),e.text&&(t.textContent=e.text),HY(t,e.properties,i),e.properties&&e.properties.afterCreate&&e.properties.afterCreate.apply(e.properties.bind||e.properties,[t,i,e.vnodeSelector,e.properties,e.children])},Ah=(t,e,i,n)=>{let r,s=0,o=t.vnodeSelector,a=e.ownerDocument;if(o==="")r=t.domNode=a.createTextNode(t.text),i!==void 0?e.insertBefore(r,i):e.appendChild(r);else{for(let l=0;l<=o.length;++l){let u=o.charAt(l);if(l===o.length||u==="."||u==="#"){let p=o.charAt(s-1),f=o.slice(s,l);p==="."?r.classList.add(f):p==="#"?r.id=f:(f==="svg"&&(n=kE(n,{namespace:Z1})),n.namespace!==void 0?r=t.domNode=a.createElementNS(n.namespace,f):(r=t.domNode=t.domNode||a.createElement(f),f==="input"&&t.properties&&t.properties.type!==void 0&&r.setAttribute("type",t.properties.type)),i!==void 0?e.insertBefore(r,i):r.parentNode!==e&&e.appendChild(r)),s=l+1}}nD(r,t,n)}},R$=(t,e,i)=>{e&&e.split(" ").forEach(n=>{n&&t.classList.toggle(n,i)})},BY=(t,e,i,n)=>{if(!i)return;let r=!1,s=Object.keys(i),o=s.length;for(let a=0;a<o;a++){let l=s[a],u=i[l],p=e[l];if(l==="class")p!==u&&(R$(t,p,!1),R$(t,u,!0));else if(l==="classes"){let f=t.classList,m=Object.keys(u),g=m.length;for(let y=0;y<g;y++){let v=m[y],b=!!u[v];b!==!!p[v]&&(r=!0,b?f.add(v):f.remove(v))}}else if(l==="styles"){let f=Object.keys(u),m=f.length;for(let g=0;g<m;g++){let y=f[g],v=u[y];v!==p[y]&&(r=!0,v?(tD(v),n.styleApplyer(t,y,v)):n.styleApplyer(t,y,""))}}else if(u||typeof p!="string"||(u=""),l!=="value"||P$(t)){if(u!==p){let f=typeof u;f==="function"&&n.eventHandlerInterceptor||(n.namespace===Z1?l==="href"?t.setAttributeNS(eD,l,u):t.setAttribute(l,u):f==="string"?l==="innerHTML"?t[l]=Y5.sanitize(u):l==="role"&&u===""?t.removeAttribute(l):P$(t)&&l in t?t[l]=u:t.setAttribute(l,u):t[l]!==u&&(t[l]=u),r=!0)}}else{let f=t[l];f!==u&&(t["oninput-value"]?f===t["oninput-value"]:u!==p)&&(t[l]=u,t["oninput-value"]=void 0),u!==p&&(r=!0)}}return r},qY=(t,e,i,n,r)=>{if(i===n)return!1;n=n||EI;let s,o=(i=i||EI).length,a=n.length,l=0,u=0,p=!1;for(;u<a;){let f=l<o?i[l]:void 0,m=n[u];if(f!==void 0&&ME(f,m))p=pb(f,m,r)||p,l++;else{let g=GY(i,m,l+1);if(g>=0){for(s=l;s<g;s++)CI(i[s]),b_(i,s,t,"removed");p=pb(i[g],m,r)||p,l=g+1}else Ah(m,e,l<o?i[l].domNode:void 0,r),UY(m),b_(n,u,t,"added")}u++}if(o>l)for(s=l;s<o;s++)CI(i[s]),b_(i,s,t,"removed");return p};pb=(t,e,i)=>{let n=t.domNode,r=!1;if(t===e)return!1;let s=!1;if(e.vnodeSelector===""){if(e.text!==t.text){let o=n.ownerDocument.createTextNode(e.text);return n.parentNode.replaceChild(o,n),e.domNode=o,r=!0,r}e.domNode=n}else e.vnodeSelector.lastIndexOf("svg",0)===0&&(i=kE(i,{namespace:Z1})),t.text!==e.text&&(s=!0,e.text===void 0?n.removeChild(n.firstChild):n.textContent=e.text),e.domNode=n,s=qY(e,n,t.children,e.children,i)||s,s=BY(n,t.properties,e.properties,i)||s,e.properties&&e.properties.afterUpdate&&e.properties.afterUpdate.apply(e.properties.bind||e.properties,[n,i,e.vnodeSelector,e.properties,e.children]);return s&&e.properties&&e.properties.updateAnimation&&e.properties.updateAnimation(n,e.properties,t.properties),r};let cf=(t,e)=>({getLastRender:()=>t,update:i=>{if(t.vnodeSelector!==i.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let n=t;t=i,pb(n,i,e)},domNode:t.domNode});const WY={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,i)=>{e.charAt(0)==="-"?t.style.setProperty(e,i):t.style[e]=i}};let Qd=t=>kE(WY,t),tc={create:(t,e)=>(e=Qd(e),Ah(t,document.createElement("div"),void 0,e),cf(t,e)),append:(t,e,i)=>(i=Qd(i),Ah(e,t,void 0,i),cf(e,i)),insertBefore:(t,e,i)=>(i=Qd(i),Ah(e,t.parentNode,t,i),cf(e,i)),merge:(t,e,i)=>(i=Qd(i),e.domNode=t,nD(t,e,i),cf(e,i)),replace:(t,e,i)=>(i=Qd(i),Ah(e,t.parentNode,t,i),t.parentNode.removeChild(t),cf(e,i))},rD,ZY=(t,e)=>{let i=[];for(;t&&t!==e;)i.push(t),t=t.parentNode;return i};rD=Array.prototype.find?(t,e)=>t.find(e):(t,e)=>t.filter(e)[0];let KY=(t,e)=>{let i=t;return e.forEach(n=>{i=i&&i.children?rD(i.children,r=>r.domNode===n):void 0}),i},JY=(t,e,i)=>{let n=function(r){i("domEvent",r);let s=e(),o=ZY(r.currentTarget,s.domNode);o.reverse();let a,l=KY(s.getLastRender(),o);return t.scheduleRender(),l&&(a=l.properties[`on${r.type}`].apply(l.properties.bind||this,arguments)),i("domEventProcessed",r),a};return(r,s,o,a)=>n},II=t=>{let e,i,n=Qd(t),r=n.performanceLogger,s=!0,o=!1,a=[],l=[],u=(f,m,g)=>{let y,v=()=>y;n.eventHandlerInterceptor=JY(e,v,r),y=f(m,g(),n),a.push(y),l.push(g)},p=()=>{if(i=void 0,s){s=!1,r("renderStart",void 0);for(let f=0;f<a.length;f++){let m=l[f]();r("rendered",void 0),a[f].update(m),r("patched",void 0)}r("renderDone",void 0),s=!0}};return e={renderNow:p,scheduleRender:()=>{i||o||(i=requestAnimationFrame(p))},stop:()=>{i&&(cancelAnimationFrame(i),i=void 0),o=!0},resume:()=>{o=!1,s=!0,e.scheduleRender()},append:(f,m)=>{u(tc.append,f,m)},insertBefore:(f,m)=>{u(tc.insertBefore,f,m)},merge:(f,m)=>{u(tc.merge,f,m)},replace:(f,m)=>{u(tc.replace,f,m)},detach:f=>{for(let m=0;m<l.length;m++)if(l[m]===f)return l.splice(m,1),a.splice(m,1)[0];throw new Error("renderFunction was not found")}},e},vl=class extends X{constructor(){super(...arguments),this.items=new te,this._watchUpdatingTracking=new nc,this._callbacks=new Map,this._projector=II(),this._hiddenProjector=II()}get needsRender(){return this.items.length>0}get updating(){var e;return((e=this._watchUpdatingTracking)==null?void 0:e.updating)??!1}initialize(){const e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,i=>{for(const n of i.added){const r=()=>n.render();this._callbacks.set(n,r),this._projector.append(this.surface,r)}for(const n of i.removed){const r=this._projector.detach(this._callbacks.get(n));this.surface.removeChild(r.domNode),this._callbacks.delete(n)}})}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach(e=>this._projector.detach(e)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){const i=this._hiddenSurface,n=this._hiddenProjector;let r;const s=()=>(r=e.render(),r);n.append(i,s),n.renderNow();const o={left:0,top:0,right:0,bottom:0};if(r!=null&&r.domNode){const a=r.domNode.getBoundingClientRect();o.left=a.left,o.top=a.top,o.right=a.right,o.bottom=a.bottom}for(n.detach(s);i.firstChild;)i.removeChild(i.firstChild);return o}overlaps(e,i){const n=this.computeBoundingRect(e),r=this.computeBoundingRect(i);return Math.max(n.left,r.left)<=Math.min(n.right,r.right)&&Math.max(n.top,r.top)<=Math.min(n.bottom,r.bottom)}get hasVisibleItems(){return this.items.some(e=>e.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(e,i){const n=!!(i!=null&&i.disableDecorations);if(!this.items.some(s=>s.visible&&!(n&&s.isDecoration)))return;const r=e.getContext("2d");r.save(),r.font=this._fontString(),this.items.forEach(s=>{n&&s.isDecoration||(r.save(),s.renderCanvas(r),r.restore())}),r.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};c([d({readOnly:!0})],vl.prototype,"surface",void 0),c([d({readOnly:!0})],vl.prototype,"items",void 0),c([d({readOnly:!0})],vl.prototype,"needsRender",null),c([d({readOnly:!0})],vl.prototype,"_watchUpdatingTracking",void 0),c([d({readOnly:!0})],vl.prototype,"updating",null),vl=c([S("esri.views.overlay.ViewOverlay")],vl);const OI=vl,w_=[0,0];function YY(t){const e=(t.ownerDocument||window.document).defaultView,i=t.getBoundingClientRect();return w_[0]=i.left+((e==null?void 0:e.pageXOffset)??0),w_[1]=i.top+((e==null?void 0:e.pageYOffset)??0),w_}function AI(t){t&&(P5(t),t.parentNode&&t.parentNode.removeChild(t))}function XY(t){const e=document.createElement("div");return t.appendChild(e),e}const uf=16,Hy=750,QY=512,eX=2,tX=t=>{let e=class extends t{constructor(...i){super(...i),this._freqInfo={freq:uf,time:Hy},this._overlayRenderTaskHandle=null,this.height=0,this.messagesCommon=null,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([Z(()=>this.cursor,n=>{const{surface:r}=this;r&&r.setAttribute("data-cursor",n)}),Z(()=>this.navigating,n=>{const{surface:r}=this;r&&r.setAttribute("data-navigating",n.toString())})])}initialize(){const i=z("mac"),n=async()=>{i&&(await Ha(()=>this.ready),this.messagesCommon=await H1("esri/t9n/common").catch(()=>{}))};n(),this.addHandles([Z(()=>this.ui,(r,s)=>this._handleUIChange(r,s),De),this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused")),N1(n)])}destroy(){this.destroyed||(this.ui=Oe(this.ui),this.container=null)}get container(){return this._get("container")??null}set container(i){const n=this._get("container"),r=TE(i);if(r||typeof i!="string"||J.getLogger(this).error("#container",`element with id '${i}' not found`),n===r)return;if(this._stopMeasuring(),n&&(n.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(AI(this.root),this._set("root",null)),this.userContent&&(_I(this.userContent,n),AI(this.userContent),this._set("userContent",null))),!r)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);r.classList.add("esri-view");const s=document.createElement("div");s.className="esri-view-user-storage",_I(r,s),r.appendChild(s),this._set("userContent",s);const o=document.createElement("div");o.className="esri-view-root",r.insertBefore(o,r.firstChild),this._set("root",o);const a=document.createElement("div");a.className="esri-view-surface",a.setAttribute("role","application"),a.tabIndex=0,o.appendChild(a),this._set("surface",a);const l=new OI;o.appendChild(l.surface),this._set("overlay",l),this.addHandles(Z(()=>l.needsRender,u=>{u&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=ip({render:()=>{var p;return(p=this.overlay)==null?void 0:p.render()}}):this._overlayRenderTaskHandle=Je(this._overlayRenderTaskHandle)})),this.forceDOMReadyCycle(),this._set("container",r),this._startMeasuring()}get focused(){const i=document.activeElement===this.surface;return document.hasFocus()&&i}get size(){return[this.width,this.height]}blur(){var i;(i=this.surface)==null||i.blur()}focus(){var i;(i=this.surface)==null||i.focus()}pageToContainer(i,n,r){const s=this.position;return i-=s?s[0]:0,n-=s?s[1]:0,r?(r[0]=i,r[1]=n):r=[i,n],r}containerToPage(i,n,r){const s=this.position;return i+=s?s[0]:0,n+=s?s[1]:0,r?(r[0]=i,r[1]=n):r=[i,n],r}_handleUIChange(i,n){this.removeHandles("ui"),n&&n!==i&&n.destroy(),i&&(i.view=this,this.addHandles(Z(()=>this.root,r=>{i.container=r?XY(r):null},De),"ui")),this._set("ui",i)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const i=this._freqInfo;i.freq=uf,i.time=Hy,this.addHandles([Sg(window,"resize",()=>{i.freq=uf,i.time=Hy}),ip({prepare:n=>{const r=this._measure(),s=this._freqInfo;if(s.time+=n.deltaTime,r&&(s.freq=uf,this._get("resizing")||this._set("resizing",!0)),s.time<s.freq)return;s.time=0;const o=this._position();s.freq=o||r?uf:Math.min(Hy,s.freq*eX),!r&&s.freq>=QY&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){const i=this.container,n=i?i.clientWidth:0,r=i?i.clientHeight:0;if(n===0||r===0)return this.suspended||this._set("suspended",!0),!1;const s=this.width,o=this.height;return n===s&&r===o?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",n),this._set("height",r),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:s,oldHeight:o,width:n,height:r}),!0)}_position(){const i=this.container,n=this.position,r=i&&YY(i);return!!r&&(!n||r[0]!==n[0]||r[1]!==n[1])&&(this._set("position",[r[0],r[1]]),!0)}forceDOMReadyCycle(){}};return c([d()],e.prototype,"container",null),c([d({readOnly:!0})],e.prototype,"focused",null),c([d({readOnly:!0})],e.prototype,"height",void 0),c([d()],e.prototype,"messagesCommon",void 0),c([d({type:OI})],e.prototype,"overlay",void 0),c([d({readOnly:!0})],e.prototype,"position",void 0),c([d({readOnly:!0})],e.prototype,"resizing",void 0),c([d({readOnly:!0})],e.prototype,"root",void 0),c([d({value:null,readOnly:!0})],e.prototype,"size",null),c([d({readOnly:!0})],e.prototype,"surface",void 0),c([d({readOnly:!0})],e.prototype,"suspended",void 0),c([d()],e.prototype,"ui",void 0),c([d({readOnly:!0})],e.prototype,"userContent",void 0),c([d({readOnly:!0})],e.prototype,"width",void 0),c([d()],e.prototype,"widthBreakpoint",void 0),e=c([S("esri.views.DOMContainer")],e),e};let iX=class{constructor(e,i){this._owner=i,this._properties={},this._afterDispatchHandle=null;for(const n in e){const r=e[n],s=new nP(r,void 0,void 0,2,2);this._properties[n]={pool:s,acquired:[]}}this._afterDispatchHandle=oU(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const e in this._properties){const i=this._properties[e];for(const n of i.acquired)UM(n)||i.pool.release(n);i.pool.destroy(),i.pool=null,i.acquired=null}this._properties=null,this._owner=null}get(e){const i=this._owner._get(e),n=this._properties[e];let r=n.pool.acquire();for(n.acquired.push(r);r===i;)n.acquired.push(r),r=n.pool.acquire();return r}_release(){for(const e in this._properties){const i=this._properties[e];let n=0;for(const r of i.acquired)UM(r)?i.acquired[n++]=r:i.pool.release(r);i.acquired.length=n}}};const nX=z("mac")?"Meta":"Ctrl",K1={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(let t=48;t<58;t++)K1[t]=String.fromCharCode(t);for(let t=1;t<25;t++)K1[111+t]=`F${t}`;for(let t=65;t<91;t++)K1[t]=[String.fromCharCode(t+32),String.fromCharCode(t)];function rX(t){if(t.key!==void 0)return A0(t);const e=K1[t.keyCode];return Array.isArray(e)?t.shiftKey?e[1]:e[0]:e}function sX(t){switch(t){case"Ctrl":case"Alt":case"Shift":case"Meta":case"Primary":return!0}return!1}let oX=class{constructor(e,i=[]){this.eventType=e,this.keyModifiers=i}matches(e){if(e.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const i=e.modifiers;for(const n of this.keyModifiers)if(!i.has(n))return!1;return!0}};const LI=J.getLogger("esri.views.input.InputHandler");let ni=class{constructor(e){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=e}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const e in this._incoming){const i=this._incoming[e];for(const n of i)this._incomingEventMatches.push(n.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(e=>e.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(e){this._manager?LI.error("This InputHandler has already been registered with an InputManager"):(e.setEventCallback(i=>this._handleEvent(i)),e.setUninstallCallback(()=>this._onUninstall()),this._manager=e)}onUninstall(){}registerIncoming(e,i,n){let r;typeof i=="function"?(n=i,r=[]):r=i||[];const s=typeof e=="string"?new oX(e,r):e,o=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},a=p=>{const f=this._incoming[p.match.eventType];if(f){const m=f.indexOf(p);f.splice(m,1),o(),this._manager&&this._manager.updateDependencies()}},l=new aX(s,n,{onPause:a,onRemove:a,onResume:p=>{const f=this._incoming[p.match.eventType];f&&!f.includes(p)&&(f.push(p),o(),this._manager&&this._manager.updateDependencies())}});let u=this._incoming[s.eventType];return u||(u=[],this._incoming[s.eventType]=u),u.push(l),o(),this._manager&&this._manager.updateDependencies(),l}registerOutgoing(e){if(this._outgoing[e])throw new Error("There is already a callback registered for this outgoing InputEvent: "+e);const i=new lX(e,{onEmit:(n,r,s,o)=>{var a;(a=this._manager)==null||a.emit(n.eventType,r,s,o)},onRemove:n=>{var r;delete this._outgoing[n.eventType],(r=this._manager)==null||r.updateDependencies()}});return this._outgoing[e]=i,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),i}startCapturingPointer(e){var i;(i=this._manager)==null||i.setPointerCapture(e,!0)}stopCapturingPointer(e){var i;(i=this._manager)==null||i.setPointerCapture(e,!1)}refreshHasPendingInputs(){var e;(e=this._manager)==null||e.refreshHasPendingInputs()}_onUninstall(){this._manager?(this.onUninstall(),this._manager=null):LI.error("This InputHandler is not registered with an InputManager")}_handleEvent(e){var n;const i=this._incoming[e.type];if(i){for(const r of i)if(r.match.matches(e)&&((n=r.callback)==null||n.call(r,e),e.shouldStopPropagation()))break}}},aX=class{constructor(e,i,n){this.match=e,this._callback=i,this._handler=n}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},lX=class{constructor(e,i){this.eventType=e,this._removed=!1,this._handler=i}emit(e,i,n){this._removed||this._handler.onEmit(this,e,i,n)}remove(){this._removed=!0,this._handler.onRemove(this)}},cX=class extends ni{constructor(e){super(!0),this._onChange=e,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",i=>{this._update(i.data)})}_update(e){const i=e.native.pointerType==="touch"?"touch":"mouse",{x:n,y:r}=e;i===this._value&&this._x===n&&this._y===r||(this._value=i,this._x=n,this._y=r,this._onChange(i,n,r))}},uX=class{constructor(e,i){this._observable=new Og,this._value=e,this._equalityFunction=i}get value(){return ue(this._observable),this._value}set value(e){this._equalityFunction(e,this._value)||(this._value=e,this._observable.notify())}mutate(e){e(this._value),this._observable.notify()}};function ig(t,e=NL){return new uX(t,e)}let dX=class extends ni{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=ig(!1),this._onPointerAdd=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.add(e.native.pointerId),this._update())},this._onPointerRemove=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.delete(e.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}},ur=class extends X{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=nX,this._latestPointerType="mouse",this._propertiesPool=new iX({latestPointerLocation:fX},this),this.latestPointerLocation=null,this._paused=!1,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const i of e)this.uninstallHandlers(i);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(e=>e.handler.hasPendingInputs)}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get updating(){return this.hasPendingInputs||this._paused}installHandlers(e,i,n=et.INTERNAL){if(this._nameToGroup[e])return void J.getLogger(this).error("There is already an InputHandler group registered under the name `"+e+"`");if(i.length===0)return void J.getLogger(this).error("Can't register a group of zero handlers");const r={name:e,handlers:i.map(s=>({handler:s,active:!0,removed:!1,priorityIndex:0,groupPriority:n,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[e]=r;for(let s=r.handlers.length-1;s>=0;s--){const o=r.handlers[s];this._handlers.push(o),o.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(a,l,u,p,f)=>{this._emitInputEvent(o.priorityIndex+1,a,l,u,f,p)},setPointerCapture:(a,l)=>{this._setPointerCapture(r,o,a,l)},setEventCallback:a=>{o.eventCallback=a},setUninstallCallback:a=>{o.uninstallCallback=a},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const i=this._nameToGroup[e];i?(i.handlers.forEach(n=>{var r;n.removed=!0,(r=n.uninstallCallback)==null||r.call(n)}),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):J.getLogger(this).error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return this._nameToGroup[e]!==void 0}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,i=new Set;this._handlersPriority=[];for(let n=this._handlers.length-1;n>=0;n--){const r=this._handlers[n];r.priorityIndex=n,this._handlersPriority.push(r)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let n=this._handlersPriority.length-1;n>=0;n--){const r=this._handlersPriority[n];r.priorityIndex=n;let s=r.handler.hasSideEffects;if(!s){for(const o of r.handler.outgoingEventTypes)if(e.has(o)){s=!0;break}}if(s)for(const o of r.handler.incomingEventMatches){e.add(o.eventType);for(const a of o.keyModifiers)sX(a)||i.add(a)}r.active=s}this._sourceEvents=e,this._keyModifiers=i,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,i,n){this._latestPointerType=e;const r=this._get("latestPointerLocation");if(r==null||r.x!==i||r.y!==n){const s=this._propertiesPool.get("latestPointerLocation");s.x=i,s.y=n,this._set("latestPointerLocation",s)}}_onEventReceived(e,i){if(e==="pointer-capture-lost"){const s=i;this._pointerCaptures.delete(s.native.pointerId)}this._updateKeyModifiers(e,i);const n=this.test.timestamp!=null?this.test.timestamp:i.native?i.native.timestamp:void 0,r=i.native?i.native.cancelable:void 0;this._emitInputEventFromSource(e,i,n,r)}_updateKeyModifiers(e,i){if(!i)return;let n=!1;const r=()=>{if(!n){const a=new Set;this._activeKeyModifiers.forEach(l=>{a.add(l)}),this._activeKeyModifiers=a,n=!0}},s=(a,l)=>{l&&!this._activeKeyModifiers.has(a)?(r(),this._activeKeyModifiers.add(a)):!l&&this._activeKeyModifiers.has(a)&&(r(),this._activeKeyModifiers.delete(a))};if(e==="key-down"||e==="key-up"){const a=i.key;this._keyModifiers.has(a)&&s(a,e==="key-down")}const o=i.native;s("Alt",!(!o||!o.altKey)),s("Ctrl",!(!o||!o.ctrlKey)),s("Shift",!(!o||!o.shiftKey)),s("Meta",!(!o||!o.metaKey)),s("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new cX((e,i,n)=>this._setLatestPointer(e,i,n)),this._multiTouchHandler=new dX,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],et.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,et.INTERNAL)}_setPointerCapture(e,i,n,r){const s=e.name+"-"+i.priorityIndex,o=this._pointerCaptures.get(n.pointerId)||new Set;this._pointerCaptures.set(n.pointerId,o),r?(o.add(s),o.size===1&&this.eventSource&&this.eventSource.setPointerCapture(n,!0)):o.has(s)&&(o.delete(s),o.size===0&&(this._pointerCaptures.delete(n.pointerId),this.eventSource&&this.eventSource.setPointerCapture(n,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(e=>!e.removed),this.updateDependencies()}_emitInputEventFromSource(e,i,n,r){this._emitInputEvent(0,e,i,n,r)}_emitInputEvent(e,i,n,r,s,o){const a=r!==void 0?r:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),l=s!==void 0&&s,u={event:new hX(i,n,a,o||this._activeKeyModifiers,l),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(u):this._doNewPropagation(u)}_doNewPropagation(e){this._currentPropagation={events:new sb,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){var i,n,r;this._paused=!1;const e=this._currentPropagation;if(e){for(;e.events.length>0;){const{event:s,priorityIndex:o}=e.events.pop(),a=(i=s.data)==null?void 0:i.eventId;if(!(a!=null&&this._stoppedPropagationEventIds.has(a)))for(e.currentHandler=this._handlersPriority[o];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!s.shouldStopPropagation()&&((r=(n=e.currentHandler).eventCallback)==null||r.call(n,s)),s.shouldStopPropagation()){a!=null&&this._stoppedPropagationEventIds.add(a);break}if(s.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:s,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(e){const i=new sb;i.push(e);const n=this._currentPropagation;if(n){for(;n.events.length;)i.push(n.events.pop());n.events=i,n.currentHandler=null,this._paused=!0}}_compareHandlerPriority(e,i){if(e.handler.hasSideEffects!==i.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==i.groupPriority)return e.groupPriority>i.groupPriority?-1:1;for(const n of e.handler.incomingEventMatches)for(const r of i.handler.incomingEventMatches){if(n.eventType!==r.eventType)continue;const s=n.keyModifiers.filter(o=>r.keyModifiers.includes(o));if(s.length===n.keyModifiers.length!=(s.length===r.keyModifiers.length))return n.keyModifiers.length>r.keyModifiers.length?-1:1}return e.priorityIndex>i.priorityIndex?-1:1}_sortHandlersPriority(e){const i=[];for(const n of e){let r=0;for(;r<i.length&&this._compareHandlerPriority(n,i[r])>=0;)r++;i.splice(r,0,n)}return i}get debug(){const e=i=>{const n=this._setPointerCapture;this._setPointerCapture=()=>{},i(),this._setPointerCapture=n};return{injectEvent:(i,n)=>{e(()=>{this._onEventReceived(i,n)})},disablePointerCapture:e}}};c([d({readOnly:!0})],ur.prototype,"hasPendingInputs",null),c([d({constructOnly:!0})],ur.prototype,"eventSource",void 0),c([d({constructOnly:!0})],ur.prototype,"recognizers",void 0),c([d()],ur.prototype,"_latestPointerType",void 0),c([d()],ur.prototype,"latestPointerType",null),c([d()],ur.prototype,"multiTouchActive",null),c([d({readOnly:!0})],ur.prototype,"latestPointerLocation",void 0),c([d()],ur.prototype,"_paused",void 0),c([d({readOnly:!0})],ur.prototype,"updating",null),ur=c([S("esri.views.input.InputManager")],ur);let hX=class{constructor(e,i,n,r,s){this.type=e,this.data=i,this.timestamp=n,this.modifiers=r,this.cancelable=s,this._propagationState=Bl.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=Bl.STOPPED}shouldStopPropagation(){return(this._propagationState&Bl.STOPPED)!=0}async(e){this._propagationState|=Bl.PAUSED;const i=(n,r)=>{this._propagationState&=~Bl.PAUSED;const s=this._resumeCallback;if(this._resumeCallback=null,s&&s(),r)throw n;return n};return(typeof e=="function"?e():e).then(n=>i(n,!1),n=>i(n,!0))}shouldPausePropagation(e){return!!(this._propagationState&Bl.PAUSED)&&(this._resumeCallback=e,!0)}preventDefault(){this.data.native.preventDefault()}};var Bl;(function(t){t[t.NONE=0]="NONE",t[t.STOPPED=1]="STOPPED",t[t.PAUSED=2]="PAUSED"})(Bl||(Bl={}));const et={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};let pX=class{};const fX=pX;function Vs(t){return t!=null&&"open"in t&&"declaredClass"in t}function PI(t){return t!=null&&"declaredClass"in t&&"dockOptions"in t}const mX=t=>{let e=class extends t{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([Z(()=>[this.ui,this.popup],([i,n],r)=>{const s="popup",o="manual";if(r){const[a,l]=r;a&&Vs(l)&&(l.view=null,PI(l)&&a.remove(l,s))}i&&Vs(n)&&(n.view=this,PI(n)&&i.add(n,{key:s,position:o,internal:!0}))},De),this.on("click",i=>{this.popup&&this.popupEnabled&&(i.pointerType!=="mouse"||i.button===0)&&(!Vs(this.popup)&&"autoOpenEnabled"in this.popup&&this.popup.autoOpenEnabled===!1||(Vs(this.popup)?this.popup.viewModel.handleViewClick(i):i.async(async()=>{await this.setupPopup(),Vs(this.popup)&&!this.destroyed&&this.ready&&this.popupEnabled&&this.popup.viewModel.handleViewClick(i)})))},et.WIDGET)]),Ha(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>{V(()=>import("./Popup-tokhx1Ms.js"),__vite__mapDeps([112,113,114,115,116,117,4,118,85,119,120,121,23,122,123,84,70,124,93,125,126,127,128,29,26,3,91,129,130,131,58,56,57,13,12,16,59,132,15,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,32,156,157,158,159,160,161,162,163,164,165,166,167,168,169]),import.meta.url)})}destroy(){this.destroyed||this.closePopup()}async openPopup(i){if(Vs(this.popup))return this.popup.open(i);try{if(await this.setupPopup(),!this.popup)return void J.getLogger(this).error(new F("view:null-popup","Popup is null and can't be opened"));this.popup.open(i)}catch{}}closePopup(){var i;(i=this._popupSetupTask)==null||i.abort(),Vs(this.popup)&&this.popup.close()}async fetchPopupFeatures(i,n){await this.when();const{location:r,queryArea:s,layerViewsAndGraphics:o,clientOnlyGraphics:a}=await this._prepareFetchPopupFeatures(i,n),l=Promise.resolve(a),u=this._queryLayerPopupFeatures(s,o,n),p=u.map(f=>f.promise);return{location:r,clientOnlyGraphics:a,allGraphicsPromise:j7([l,...p]).then(f=>Array.from(new Set(f.flat()))),promisesPerLayerView:u}}async setupPopup(){var i;if((i=this._popupSetupTask)==null||i.abort(),this.popup&&!Vs(this.popup))return this._popupSetupTask=R1(async n=>{const{default:r}=await V(()=>import("./Popup-tokhx1Ms.js"),__vite__mapDeps([112,113,114,115,116,117,4,118,85,119,120,121,23,122,123,84,70,124,93,125,126,127,128,29,26,3,91,129,130,131,58,56,57,13,12,16,59,132,15,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,32,156,157,158,159,160,161,162,163,164,165,166,167,168,169]),import.meta.url);if(Qe(n),!this.popup||Vs(this.popup))return;const s=this.popup;delete s.open,delete s.close,this.popup=new r(s)}),this._popupSetupTask.promise}_queryLayerPopupFeatures(i,n,r){return n.map(({layerView:s,graphics:o})=>{const a={clientGraphics:o,event:r!=null?r.event:void 0,signal:r!=null?r.signal:void 0,defaultPopupTemplateEnabled:r!=null&&!!r.defaultPopupTemplateEnabled},l=s.fetchPopupFeatures(i,a);return{layerView:s,promise:l}})}_isValidPopupGraphic(i,n){return i&&!!i.getEffectivePopupTemplate(n!=null&&n.defaultPopupTemplateEnabled)}async _prepareFetchPopupFeatures(i,n){const{clientGraphics:r,queryArea:s,location:o}=await this._popupHitTestGraphics(i,n),a=this._getFetchPopupLayerViews(),{layerViewsAndGraphics:l,clientOnlyGraphics:u}=this._graphicsPerFetchPopupLayerView(r,a);return{clientOnlyGraphics:u,layerViewsAndGraphics:l,queryArea:s,location:o}}async _popupHitTestGraphics(i,n){const r=await this.popupHitTest(i),s=r.results,o=r.mapPoint,a=s.filter(u=>u.type==="graphic"&&this._isValidPopupGraphic(u.graphic,n)),l=a.length?a[0].mapPoint:null;return{clientGraphics:a.map(u=>u.graphic),queryArea:o,location:o||l}}_getFetchPopupLayerViews(){const i=[];return this.allLayerViews.forEach(n=>{this._isValidPopupLayerView(n)&&i.push(n)}),this.graphicsView!=null&&this._isValidPopupLayerView(this.graphicsView)&&i.push(this.graphicsView),i.reverse()}_isValidPopupLayerView(i){return i!=null&&(!("layer"in i)||!i.suspended)&&"fetchPopupFeatures"in i}_graphicsPerFetchPopupLayerView(i,n){const r=[],s=new Map,o=n.map(a=>{const l=[];return"layer"in a?s.set(a.layer,l):s.set(a.graphics,l),{layerView:a,graphics:l}});for(const a of i){const l=s.get(a.layer)||s.get(a.sourceLayer)||null;l?l.push(a):r.push(a)}return{layerViewsAndGraphics:o,clientOnlyGraphics:r}}};return c([d({cast(i){return!i||Vs(i)||typeof i=="object"&&(i.open=n=>(ep(J.getLogger(this),"view.popup is no longer created by default. view.popup.open() will stop working when the popup isn't created",{replacement:"Use view.openPopup() instead.",version:"4.27"}),this.openPopup(n)),i.close=()=>(ep(J.getLogger(this),"view.popup is no longer created by default. view.popup.close() will stop working when the popup isn't created",{replacement:"Use view.closePopup() instead.",version:"4.27"}),this.closePopup())),i}})],e.prototype,"popup",void 0),c([d()],e.prototype,"popupEnabled",void 0),e=c([S("esri.views.PopupView")],e),e};function ud(t,e,i=te){return e||(e=new i),e===t||(e.removeAll(),gX(t)?e.addMany(t):t&&e.add(t)),e}function sD(t){return t}function gX(t){return t&&(Array.isArray(t)||"items"in t&&Array.isArray(t.items))}var ql;(function(t){t[t.PENDING=0]="PENDING",t[t.RESOLVED=1]="RESOLVED",t[t.REJECTED=2]="REJECTED"})(ql||(ql={}));let yX=class{constructor(){this._resolver=Or(),this._status=ql.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=ql.RESOLVED,this._cleanUp()},()=>{this._status=ql.REJECTED,this._cleanUp()}),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(e){this._resolvingPromises.push(e),this._tryResolve()}isResolved(){return this._status===ql.RESOLVED}isRejected(){return this._status===ql.REJECTED}isFulfilled(){return this._status!==ql.PENDING}abort(){this._resolver.reject(Xe())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const e=Or(),i=[...this._resolvingPromises,e.promise],n=this._allPromise=Promise.all(i);n.then(()=>{this.isFulfilled()||this._allPromise!==n||this._resolver.resolve()},r=>{this.isFulfilled()||this._allPromise!==n||en(r)||this._resolver.reject(r)}),e.resolve()}};const J1=t=>{let e=class extends t{constructor(...i){super(...i),this._promiseProps=new yX,this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(i,n){return this._promiseProps.promise.then(()=>this).then(i,n)}catch(i){return this.when(null,i)}addResolvingPromise(i){i&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in i?i.when():i)}};return e=c([S("esri.core.Promise")],e),e};let fb=class extends J1(X){};fb=c([S("esri.core.Promise")],fb);const vX="not-loaded",bX="loading",wX="failed",RI="loaded",oD=t=>{let e=class extends t{constructor(...i){super(...i),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(n=>{const r=this.load.bind(this);this.load=s=>{const o=new Promise((a,l)=>{const u=_T(s,l);this.destroyed&&l(new F("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(a,l).finally(()=>{u&&u.remove()})});if(this.loadStatus===vX){this._set("loadStatus",bX);const a=this._loadController=new AbortController;r({signal:a.signal})}return n(),o}})),this.when(()=>{this._set("loadStatus",RI),this._loadController=null},n=>{this._set("loadStatus",wX),this._set("loadError",n),this._loadController=null})}destroy(){this._loadController&&(this._loadController=_s(this._loadController),this._promiseProps.abort()),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===RI}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var i;return this.isFulfilled()||(this._set("loadError",new F("load:cancelled","Cancelled")),(i=this._loadController)==null||i.abort(),this._promiseProps.abort()),this}};return c([d({readOnly:!0})],e.prototype,"loaded",null),c([d({readOnly:!0})],e.prototype,"loadError",void 0),c([d({clonable:!1})],e.prototype,"loadStatus",void 0),c([d({type:[Ga],readOnly:!0})],e.prototype,"loadWarnings",null),e=c([S("esri.core.Loadable")],e),e};let kf=class extends oD(fb){};kf=c([S("esri.core.Loadable")],kf),function(t){function e(i){return!(!i||!i.load)}t.LoadableMixin=oD,t.isLoadable=e}(kf||(kf={}));const As=kf;async function aD(t,e){return await t.load(),_X(t,e)}async function _X(t,e){const i=[],n=(...s)=>{for(const o of s)o!=null&&(Array.isArray(o)?n(...o):te.isCollection(o)?o.forEach(a=>n(a)):As.isLoadable(o)&&i.push(o))};e(n);let r=null;if(await Xq(i,async s=>{const o=await aN(SX(s)?s.loadAll():s.load());o.ok!==!1||r||(r=o)}),r)throw r.error;return t}function SX(t){return"loadAll"in t&&typeof t.loadAll=="function"}let Vy;function $X(t){return Vy&&!Vy.destroyed||(Vy=t()),Vy}var N$;const xX=new Kt({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let dr=N$=class extends X{constructor(t){super(t),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(t){t!=="asc"&&t!=="desc"||this._set("sortOrder",t)}clone(){return new N$({categories:this.categories?q(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(t,e){let i=[];this.categories&&(i=this.categories.map(o=>Array.isArray(o)?JSON.stringify(o):o));let n="";if(this.extent){const o=I1(this.extent,xe.WGS84);o!=null&&(n=`${o.xmin},${o.ymin},${o.xmax},${o.ymax}`)}let r=this.query;!this.disableExtraQuery&&t.extraQuery&&(r="("+r+")"+t.extraQuery);const s={categories:i,bbox:n,q:r,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(s.sortField=this.sortField.split(",").map(o=>xX.toJSON(o.trim())).join(","),s.sortOrder=this.sortOrder),{query:{...e,...s}}}};c([d()],dr.prototype,"categories",void 0),c([d()],dr.prototype,"disableExtraQuery",void 0),c([d({type:Ve})],dr.prototype,"extent",void 0),c([d()],dr.prototype,"filter",void 0),c([d()],dr.prototype,"num",void 0),c([d()],dr.prototype,"query",void 0),c([d()],dr.prototype,"sortField",void 0),c([d()],dr.prototype,"sortOrder",null),c([d()],dr.prototype,"start",void 0),dr=N$=c([S("esri.portal.PortalQueryParams")],dr);const Aa=dr;var D$;let Vt=D$=class extends ie{constructor(t){super(t),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.sourceJSON=null,this.tags=null,this.title=null}get thumbnailUrl(){var i;const t=this.url,e=this.thumbnail;return t&&e&&this.portal?(i=this.portal)==null?void 0:i.normalizeUrl(`${t}/info/${e}?f=json`):null}get url(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t?t+"/community/groups/"+this.id:null}fetchCategorySchema(t){return this.portal.request(this.url+"/categorySchema",t).then(e=>{const i=e.categorySchema||[];return i.some(n=>n.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",t):i})}fetchMembers(t){return this.portal.request(this.url+"/users",t)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}toJSON(){throw new F("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new D$;return e.sourceJSON=t,e.read(t),e}queryItems(t,e){let i=ti(Aa,t);const n=this.portal;return parseFloat(n.currentVersion)>5?(i=i||new Aa,n.queryPortal(`/content/groups/${this.id}/search`,i,"PortalItem",e)):(i=i?i.clone():new Aa,i.query="group:"+this.id+(i.query?" "+i.query:""),n.queryItems(i,e))}_fetchCategorySchemaSet(t,e){const i=this.portal;return i.fetchSelf(i.authMode,!0,e).then(n=>{const r=n.contentCategorySetsGroupQuery;if(r){const s=new Aa;return s.disableExtraQuery=!0,s.num=1,s.query=r,i.queryGroups(s,e)}throw new F("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(n=>{if(n.total){const r=n.results[0],s=new Aa;return s.num=1,s.query=`typekeywords:"${t}"`,r.queryItems(s,e)}throw new F("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(n=>n.total?n.results[0].fetchData("json",e).then(r=>{const s=r==null?void 0:r.categorySchema;return s!=null&&s.length?s:[]}):[])}};c([d()],Vt.prototype,"access",void 0),c([d({type:Date})],Vt.prototype,"created",void 0),c([d()],Vt.prototype,"description",void 0),c([d()],Vt.prototype,"id",void 0),c([d()],Vt.prototype,"isInvitationOnly",void 0),c([d({type:Date})],Vt.prototype,"modified",void 0),c([d()],Vt.prototype,"owner",void 0),c([d()],Vt.prototype,"portal",void 0),c([d()],Vt.prototype,"snippet",void 0),c([d()],Vt.prototype,"sortField",void 0),c([d()],Vt.prototype,"sortOrder",void 0),c([d()],Vt.prototype,"sourceJSON",void 0),c([d()],Vt.prototype,"tags",void 0),c([d()],Vt.prototype,"thumbnail",void 0),c([d({readOnly:!0})],Vt.prototype,"thumbnailUrl",null),c([d()],Vt.prototype,"title",void 0),c([d({readOnly:!0})],Vt.prototype,"url",null),Vt=D$=c([S("esri.portal.PortalGroup")],Vt);const F$=Vt;let Jc=class extends X{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};c([d()],Jc.prototype,"nextQueryParams",void 0),c([d()],Jc.prototype,"queryParams",void 0),c([d()],Jc.prototype,"results",void 0),c([d()],Jc.prototype,"total",void 0),Jc=c([S("esri.portal.PortalQueryResult")],Jc);const TX=Jc;let oa=class extends ie{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){var i;const e=(i=this.portal)==null?void 0:i.restUrl;return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new F("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};c([d({type:Date})],oa.prototype,"created",void 0),c([d()],oa.prototype,"id",void 0),c([d()],oa.prototype,"portal",void 0),c([d()],oa.prototype,"title",void 0),c([d({readOnly:!0})],oa.prototype,"url",null),c([d()],oa.prototype,"username",void 0),oa=c([S("esri.portal.PortalFolder")],oa);const EX=oa;var z$;let ct=z$=class extends ie{constructor(...t){super(...t),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userType=null}get thumbnailUrl(){const t=this.url,e=this.thumbnail;return t&&e?this.portal.normalizeUrl(`${t}/info/${e}?f=json`):null}get userContentUrl(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t?`${t}/content/users/${this.username}`:null}get url(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t?`${t}/community/users/${this.username}`:null}addItem(t){const e=t&&t.item,i=t==null?void 0:t.data,n=t==null?void 0:t.folder,r={method:"post"};e&&(r.query=e.createPostQuery(),i!=null&&(typeof i=="string"?r.query.text=i:typeof i=="object"&&(r.query.text=JSON.stringify(i))));let s=this.userContentUrl;return n&&(s+="/"+(typeof n=="string"?n:n.id)),this.portal.request(s+"/addItem",r).then(o=>(e.id=o.id,e.portal=this.portal,e.loaded?e.reload():e.load()))}deleteItem(t){let e=this.userContentUrl;return t.ownerFolder&&(e+="/"+t.ownerFolder),this.portal.request(e+`/items/${t.id}/delete`,{method:"post"}).then(()=>{t.id=null,t.portal=null})}deleteItems(t){const e=this.userContentUrl+"/deleteItems",i=t.map(n=>n.id);if(i.length){const n={method:"post",query:{items:i.join(",")}};return this.portal.request(e,n).then(()=>{t.forEach(r=>{r.id=null,r.portal=null})})}return Promise.resolve(void 0)}fetchFolders(){const t={query:{num:1}};return this.portal.request(this.userContentUrl??"",t).then(e=>{let i;return i=e&&e.folders?e.folders.map(n=>{const r=EX.fromJSON(n);return r.portal=this.portal,r}):[],i})}fetchGroups(){return this.portal.request(this.url??"").then(t=>{let e;return e=t&&t.groups?t.groups.map(i=>{const n=F$.fromJSON(i);return n.portal=this.portal,n}):[],e})}fetchItems(t){const e=t??{};let i,n=this.userContentUrl??"";return e.folder&&(n+="/"+e.folder.id),V(()=>Promise.resolve().then(()=>uD),void 0,import.meta.url).then(({default:r})=>{i=r;const s={folders:!1,num:e.num||10,start:e.start||1,sortField:e.sortField||"created",sortOrder:e.sortOrder||"asc"};return this.portal.request(n,{query:s})}).then(r=>{let s;return r!=null&&r.items?(s=r.items.map(o=>{const a=i.fromJSON(o);return a.portal=this.portal,a}),Promise.all(s.map(o=>o.load())).catch(o=>o).then(()=>({items:s,nextStart:r.nextStart,total:r.total}))):{items:[],nextStart:-1,total:0}})}fetchTags(){return this.portal.request(this.url+"/tags").then(t=>t.tags)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}queryFavorites(t){return this.favGroupId?(this._favGroup||(this._favGroup=new F$({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(t)):Promise.reject(new F("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}toJSON(){throw new F("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new z$;return e.sourceJSON=t,e.read(t),e}};c([d()],ct.prototype,"access",void 0),c([d({type:Date})],ct.prototype,"created",void 0),c([d()],ct.prototype,"culture",void 0),c([d()],ct.prototype,"description",void 0),c([d()],ct.prototype,"email",void 0),c([d()],ct.prototype,"favGroupId",void 0),c([d()],ct.prototype,"fullName",void 0),c([d({type:Date})],ct.prototype,"modified",void 0),c([d()],ct.prototype,"orgId",void 0),c([d()],ct.prototype,"portal",void 0),c([d()],ct.prototype,"preferredView",void 0),c([d()],ct.prototype,"privileges",void 0),c([d()],ct.prototype,"region",void 0),c([d()],ct.prototype,"role",void 0),c([d()],ct.prototype,"roleId",void 0),c([d()],ct.prototype,"sourceJSON",void 0),c([d()],ct.prototype,"thumbnail",void 0),c([d({readOnly:!0})],ct.prototype,"thumbnailUrl",null),c([d()],ct.prototype,"units",void 0),c([d({readOnly:!0})],ct.prototype,"userContentUrl",null),c([d({readOnly:!0})],ct.prototype,"url",null),c([d()],ct.prototype,"username",void 0),c([d()],ct.prototype,"userType",void 0),ct=z$=c([S("esri.portal.PortalUser")],ct);const lD=ct;var aa;let By;const NI={PortalGroup:()=>Promise.resolve({default:F$}),PortalItem:()=>V(()=>Promise.resolve().then(()=>uD),void 0,import.meta.url),PortalUser:()=>Promise.resolve({default:lD})};let K=aa=class extends xg(As){constructor(t){super(t),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=Ae.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(t){return typeof t=="string"?{url:t}:t}destroy(){DI.unregister(this),this.defaultBasemap=Oe(this.defaultBasemap),this.defaultDevBasemap=Oe(this.defaultDevBasemap),this.defaultVectorBasemap=Oe(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=Je(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(t){if(t)for(const e of t)Ae.request.trustedServers.includes(e)||Ae.request.trustedServers.push(e);return t}readDefaultBasemap(t){return this._readBasemap(t)}readDefaultDevBasemap(t){return this._readBasemap(t)}readDefaultVectorBasemap(t){return this._readBasemap(t)}get extraQuery(){var i;const t=(i=this.user)==null?void 0:i.orgId,e=!t||this.canSearchPublic;return this.id&&!e?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let t=this.url;if(t){const e=t.indexOf("/sharing");t=e>0?t.substring(0,e):this.url.replace(/\/+$/,""),t+="/sharing/rest"}return t}get thumbnailUrl(){const t=this.restUrl,e=this.thumbnail;return t&&e?this._normalizeSSL(t+"/portals/self/resources/"+e):null}readUrlKey(t){return t&&t.toLowerCase()}readUser(t){let e=null;return t&&(e=lD.fromJSON(t),e.portal=this),e}load(t){const e=V(()=>Promise.resolve().then(()=>tQ),void 0,import.meta.url).then(({default:i})=>{Qe(t),By=i}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,t)).then(i=>{var n;if(at){const r=at;this.credential=r.findCredential(this.restUrl),this.credential||this.authMode!==aa.AUTH_MODE_AUTO||((n=this._esriIdCredentialCreateHandle)==null||n.remove(),this._esriIdCredentialCreateHandle=r.on("credential-create",kX(new WeakRef(this))),DI.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(e),Promise.resolve(this)}async createElevationLayers(){await this.load();const t=this._getHelperService("defaultElevationLayers"),e=(await V(()=>import("./ElevationLayer-UGx99-aI.js"),__vite__mapDeps([170,136,171,172,173,23,144,156,137,158,159,174]),import.meta.url)).default;return t?t.map(i=>new e({id:i.id,url:i.url})):[]}async fetchBasemaps(t,e){const i=await this._fetchBasemaps(t,e);if((e==null?void 0:e.include3d)===!0&&this.use3dBasemaps!==!1){const n=await this._fetchBasemaps3D(t,e);i.unshift(...n)}return i}fetchCategorySchema(t){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",t).then(e=>e.categorySchema):er(t)?Promise.reject(Xe()):Promise.resolve([])}fetchFeaturedGroups(t){const e=this.featuredGroups,i=new Aa;if(i.num=100,i.sortField="title",e&&e.length){const n=[];for(const r of e)n.push(`(title:"${r.title}" AND owner:${r.owner})`);return i.query=n.join(" OR "),this.queryGroups(i,t).then(r=>r.results)}return er(t)?Promise.reject(Xe()):Promise.resolve([])}fetchRegions(t){var i;const e=((i=this.user)==null?void 0:i.culture)||this.culture||Jn();return this.request(this.restUrl+"/portals/regions",{...t,query:{culture:e}})}fetchSettings(t){var i;const e=((i=this.user)==null?void 0:i.culture)||this.culture||Jn();return this.request(this.restUrl+"/portals/self/settings",{...t,query:{culture:e}})}static getDefault(){return $X(()=>new aa)}queryGroups(t,e){return this.queryPortal("/community/groups",t,"PortalGroup",e)}queryItems(t,e){return this.queryPortal("/search",t,"PortalItem",e)}queryUsers(t,e){return t.sortField||(t.sortField="username"),this.queryPortal("/community/users",t,"PortalUser",e)}fetchSelf(t=this.authMode,e=!1,i){const n=this.restUrl+"/portals/self",r={authMode:t,query:{culture:Jn().toLowerCase()},...i};return r.authMode==="auto"&&(r.authMode="no-prompt"),e&&(r.query.default=!0),this.request(n,r)}queryPortal(t,e,i,n){const r=ti(Aa,e),s=o=>this.request(this.restUrl+t,{...r.toRequestOptions(this),...n}).then(a=>{const l=r.clone();return l.start=a.nextStart,new TX({nextQueryParams:l,queryParams:r,total:a.total,results:aa._resultsToTypedArray(o,{portal:this},a,n)})}).then(a=>Promise.all(a.results.map(l=>typeof l.when=="function"?l.when():a)).then(()=>a,l=>(sP(l),a)));return i&&NI[i]?NI[i]().then(({default:o})=>(Qe(n),s(o))):s()}signIn(){if(this.authMode===aa.AUTH_MODE_ANONYMOUS)return Promise.reject(new F("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const t=e=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(e||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=e,this.fetchSelf("immediate"))):this.user&&this.credential===e?null:(this.credential=e,this.fetchSelf("immediate"))).then(i=>{i&&(this.sourceJSON=i,this.read(i))});return at?at.getCredential(this.restUrl).then(e=>t(e)):t(this.credential)}normalizeUrl(t){var i;const e=(i=this.credential)==null?void 0:i.token;return this._normalizeSSL(e?t+(t.includes("?")?"&":"?")+"token="+e:t)}requestToTypedArray(t,e,i){return this.request(t,e).then(n=>{const r=aa._resultsToTypedArray(i,{portal:this},n);return Promise.all(r.map(s=>typeof s.when=="function"?s.when():n)).then(()=>r,()=>r)})}request(t,e={}){const i={f:"json",...e.query},{authMode:n=this.authMode===aa.AUTH_MODE_ANONYMOUS?"anonymous":"auto",body:r=null,cacheBust:s=!1,method:o="auto",responseType:a="json",signal:l}=e,u={authMode:n,body:r,cacheBust:s,method:o,query:i,responseType:a,timeout:0,signal:l};return $t(this._normalizeSSL(t),u).then(p=>p.data)}toJSON(){throw new F("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new aa({sourceJSON:t})}_getHelperService(t){const e=this.helperServices&&this.helperServices[t];if(!e)throw new F("portal:service-not-found",`The \`helperServices\` do not include an entry named "${t}"`);return e}async _fetchBasemaps(t,e){const i=new Aa;i.query=t||(Ae.apiKey&&BP(this.url)?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),i.disableExtraQuery=!0;const n=await this.queryGroups(i,e);if(!n.total)return[];const r=n.results[0];i.num=100,i.query='type:"Web Map" -type:"Web Application"',i.sortField=r.sortField||"name",i.sortOrder=r.sortOrder||"desc";const s=await r.queryItems(i,e);return s.total?s.results.filter(o=>o.type==="Web Map").map(o=>new By({portalItem:o})):[]}async _fetchBasemaps3D(t,e){const i=t||this.basemapGalleryGroupQuery3D;if(!i)return[];const n=new Aa({query:i,disableExtraQuery:!0}),r=await this.queryGroups(n,e);if(!r.total)return[];const s=r.results[0];n.num=100,n.query='type:"Web Scene"',n.sortField=s.sortField||"name",n.sortOrder=s.sortOrder||"desc";const o=await s.queryItems(n,e);return o.total?o.results.filter(a=>a.type==="Web Scene").map(a=>new By({portalItem:a})):[]}_normalizeSSL(t){return t.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(t){if(t){const e=By.fromJSON(t);return e.portalItem={portal:this},e}return null}static _resultsToTypedArray(t,e,i,n){let r=[];if(i){const s=n!=null?n.signal:null;r=i.listings||i.notifications||i.userInvitations||i.tags||i.items||i.groups||i.comments||i.provisions||i.results||i.relatedItems||i,(t||e)&&(r=r.map(o=>{const a=Object.assign(t?t.fromJSON(o):o,e);return typeof a.load=="function"&&a.load(s),a}))}else r=[];return r}};K.AUTH_MODE_ANONYMOUS="anonymous",K.AUTH_MODE_AUTO="auto",K.AUTH_MODE_IMMEDIATE="immediate",c([d()],K.prototype,"access",void 0),c([d()],K.prototype,"allSSL",void 0),c([d()],K.prototype,"authMode",void 0),c([d()],K.prototype,"authorizedCrossOriginDomains",void 0),c([Ne("authorizedCrossOriginDomains")],K.prototype,"readAuthorizedCrossOriginDomains",null),c([d()],K.prototype,"basemapGalleryGroupQuery",void 0),c([d({json:{name:"3DBasemapGalleryGroupQuery"}})],K.prototype,"basemapGalleryGroupQuery3D",void 0),c([d()],K.prototype,"bingKey",void 0),c([d()],K.prototype,"canListApps",void 0),c([d()],K.prototype,"canListData",void 0),c([d()],K.prototype,"canListPreProvisionedItems",void 0),c([d()],K.prototype,"canProvisionDirectPurchase",void 0),c([d()],K.prototype,"canSearchPublic",void 0),c([d()],K.prototype,"canShareBingPublic",void 0),c([d()],K.prototype,"canSharePublic",void 0),c([d()],K.prototype,"canSignInArcGIS",void 0),c([d()],K.prototype,"canSignInIDP",void 0),c([d()],K.prototype,"colorSetsGroupQuery",void 0),c([d()],K.prototype,"commentsEnabled",void 0),c([d({type:Date})],K.prototype,"created",void 0),c([d()],K.prototype,"credential",void 0),c([d()],K.prototype,"culture",void 0),c([d()],K.prototype,"currentVersion",void 0),c([d()],K.prototype,"customBaseUrl",void 0),c([d()],K.prototype,"defaultBasemap",void 0),c([Ne("defaultBasemap")],K.prototype,"readDefaultBasemap",null),c([d()],K.prototype,"defaultDevBasemap",void 0),c([Ne("defaultDevBasemap")],K.prototype,"readDefaultDevBasemap",null),c([d({type:Ve})],K.prototype,"defaultExtent",void 0),c([d()],K.prototype,"defaultVectorBasemap",void 0),c([Ne("defaultVectorBasemap")],K.prototype,"readDefaultVectorBasemap",null),c([d()],K.prototype,"description",void 0),c([d()],K.prototype,"devBasemapGalleryGroupQuery",void 0),c([d()],K.prototype,"eueiEnabled",void 0),c([d({readOnly:!0})],K.prototype,"extraQuery",null),c([d()],K.prototype,"featuredGroups",void 0),c([d()],K.prototype,"featuredItemsGroupQuery",void 0),c([d()],K.prototype,"galleryTemplatesGroupQuery",void 0),c([d()],K.prototype,"livingAtlasGroupQuery",void 0),c([d()],K.prototype,"hasCategorySchema",void 0),c([d()],K.prototype,"helpBase",void 0),c([d()],K.prototype,"helperServices",void 0),c([d()],K.prototype,"helpMap",void 0),c([d()],K.prototype,"homePageFeaturedContent",void 0),c([d()],K.prototype,"homePageFeaturedContentCount",void 0),c([d()],K.prototype,"httpPort",void 0),c([d()],K.prototype,"httpsPort",void 0),c([d()],K.prototype,"id",void 0),c([d()],K.prototype,"ipCntryCode",void 0),c([d({readOnly:!0})],K.prototype,"isOrganization",null),c([d()],K.prototype,"isPortal",void 0),c([d()],K.prototype,"isReadOnly",void 0),c([d({readOnly:!0})],K.prototype,"itemPageUrl",null),c([d()],K.prototype,"layerTemplatesGroupQuery",void 0),c([d()],K.prototype,"maxTokenExpirationMinutes",void 0),c([d({type:Date})],K.prototype,"modified",void 0),c([d()],K.prototype,"name",void 0),c([d()],K.prototype,"portalHostname",void 0),c([d()],K.prototype,"portalMode",void 0),c([d()],K.prototype,"portalProperties",void 0),c([d()],K.prototype,"region",void 0),c([d({readOnly:!0})],K.prototype,"restUrl",null),c([d()],K.prototype,"rotatorPanels",void 0),c([d()],K.prototype,"showHomePageDescription",void 0),c([d()],K.prototype,"sourceJSON",void 0),c([d()],K.prototype,"staticImagesUrl",void 0),c([d({json:{name:"2DStylesGroupQuery"}})],K.prototype,"stylesGroupQuery2d",void 0),c([d({json:{name:"stylesGroupQuery"}})],K.prototype,"stylesGroupQuery3d",void 0),c([d()],K.prototype,"supportsHostedServices",void 0),c([d()],K.prototype,"symbolSetsGroupQuery",void 0),c([d()],K.prototype,"templatesGroupQuery",void 0),c([d()],K.prototype,"thumbnail",void 0),c([d({readOnly:!0})],K.prototype,"thumbnailUrl",null),c([d()],K.prototype,"units",void 0),c([d()],K.prototype,"url",void 0),c([d()],K.prototype,"urlKey",void 0),c([Ne("urlKey")],K.prototype,"readUrlKey",null),c([d()],K.prototype,"user",void 0),c([Ne("user")],K.prototype,"readUser",null),c([d()],K.prototype,"use3dBasemaps",void 0),c([d()],K.prototype,"useStandardizedQuery",void 0),c([d()],K.prototype,"useVectorBasemaps",void 0),c([d()],K.prototype,"vectorBasemapGalleryGroupQuery",void 0),K=aa=c([S("esri.portal.Portal")],K);const ir=K,DI=new FinalizationRegistry(t=>{t.remove()});function kX(t){const e=at;return()=>{const i=t.deref();i&&e.findCredential(i.restUrl)&&i.signIn().catch(()=>{})}}let la=class extends X{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e!=null&&e.portalItem&&e.path?{...e,path:this._normalizePath(e.path,e.portalItem)}:e}set path(e){e!=null&&Zn(e)?J.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return this._normalizePath(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",i){const n=this.cdnUrl;if(n==null)throw new F("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(n,{responseType:e,query:{token:this.portalItem.apiKey},signal:i==null?void 0:i.signal})}async update(e,i){const{addOrUpdateResource:n}=await V(()=>import("./resourceUtils-N0TRohcb.js"),__vite__mapDeps([]),import.meta.url);return n(this,"update",e,i)}hasPath(){return this.path!=null}_normalizePath(e,i){return e==null?e:(e=e.replace(/^\/+/,""),i!=null&&Zn(e)&&(e=PT(e,i.itemUrl)),e==null?void 0:e.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}};c([d()],la.prototype,"portalItem",void 0),c([d({type:String,value:null})],la.prototype,"path",null),c([zt("path")],la.prototype,"_castPath",null),c([d({type:String,readOnly:!0})],la.prototype,"url",null),c([d({type:String,readOnly:!0})],la.prototype,"cdnUrl",null),c([d({type:String,readOnly:!0})],la.prototype,"itemRelativeUrl",null),la=c([S("esri.portal.PortalItemResource")],la);const MX=la;let Mf=class extends X{constructor(e){super(e),this.created=null,this.rating=null}};c([d()],Mf.prototype,"created",void 0),c([d()],Mf.prototype,"rating",void 0),Mf=c([S("esri.portal.PortalRating")],Mf);const __=Mf;var Yc;const CX=new Set(["Map Service","Feature Service","Feature Collection","Scene Service","Image Service","Stream Service","Vector Tile Service","GeoJson","CSV","KML","WFS","WMTS","WMS","Feed"]),IX=new Set(["KML","GeoJson","CSV"]);let ve=Yc=class extends xg(As){static from(t){return T1(Yc,t)}constructor(t){super(t),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const t=this.type,e=this.typeKeywords||[];let i=t;return t==="Feature Service"||t==="Feature Collection"?i=e.includes("Table")?"Table":e.includes("Route Layer")?"Route Layer":e.includes("Markup")?"Markup":"Feature Layer":t==="Image Service"?i=e.includes("Elevation 3D Layer")?"Elevation Layer":e.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":t==="Scene Service"?i="Scene Layer":t==="Video Service"?i="Video Layer":t==="Scene Package"?i="Scene Layer Package":t==="Stream Service"?i="Feature Layer":t==="Geoprocessing Service"?i=e.includes("Web Tool")?"Tool":"Geoprocessing Service":t==="Geocoding Service"?i="Locator":t==="Geoenrichment Service"?i="GeoEnrichment Service":t==="Microsoft Powerpoint"?i="Microsoft PowerPoint":t==="GeoJson"?i="GeoJSON":t==="Globe Service"?i="Globe Layer":t==="Vector Tile Service"?i="Tile Layer":t==="netCDF"?i="NetCDF":t==="Map Service"?i=e.includes("Spatiotemporal")||!e.includes("Hosted Service")&&!e.includes("Tiled")||e.includes("Relational")?"Map Image Layer":"Tile Layer":t&&t.toLowerCase().includes("add in")?i=t.replaceAll(/(add in)/gi,"Add-In"):t==="datastore catalog service"?i="Big Data File Share":t==="Compact Tile Package"?i="Tile Package (tpkx)":t==="OGCFeatureServer"?i="OGC Feature Layer":t==="web mapping application"&&e.includes("configurableApp")?i="Instant App":t==="Insights Page"?i="Insights Report":t==="Excalibur Imagery Project"&&(i="Excalibur Project"),i}readExtent(t){return t&&t.length?new Ve(t[0][0],t[0][1],t[1][0],t[1][1]):null}get iconUrl(){var m;const t=((m=this.type)==null?void 0:m.toLowerCase())||"",e=this.typeKeywords||[],i="esri/images/portal/",n="16";let r,s=!1,o=!1,a=!1,l=!1,u=!1,p=!1,f=!1;return t.indexOf("service")>0||t==="feature collection"||t==="kml"||t==="wms"||t==="wmts"||t==="wfs"?(s=e.includes("Hosted Service"),t==="feature service"||t==="feature collection"||t==="kml"||t==="wfs"?(o=e.includes("Table"),a=e.includes("Route Layer"),l=e.includes("Markup"),u=e.includes("Spatiotemporal"),p=e.includes("UtilityNetwork"),r=u&&o?"spatiotemporaltable":o?"table":a?"routelayer":l?"markup":u?"spatiotemporal":s?"featureshosted":p?"utilitynetwork":"features"):r=t==="map service"||t==="wms"||t==="wmts"?s||e.includes("Tiled")||t==="wmts"?"maptiles":"mapimages":t==="scene service"?e.includes("Line")?"sceneweblayerline":e.includes("3DObject")?"sceneweblayermultipatch":e.includes("Point")?"sceneweblayerpoint":e.includes("IntegratedMesh")?"sceneweblayermesh":e.includes("PointCloud")?"sceneweblayerpointcloud":e.includes("Polygon")?"sceneweblayerpolygon":e.includes("Building")?"sceneweblayerbuilding":e.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":t==="image service"?e.includes("Elevation 3D Layer")?"elevationlayer":e.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":t==="stream service"?"streamlayer":t==="video service"?e.includes("Live Stream")?"livestreamvideolayer":"videolayer":t==="vector tile service"?"vectortile":t==="datastore catalog service"?"datastorecollection":t==="geocoding service"?"geocodeservice":t==="geoprocessing service"?e.includes("Web Tool")?"tool":"layers":t==="geodata service"?"geodataservice":t==="3dtiles service"?"3dtileslayer":"layers"):t==="web map"||t==="cityengine web scene"?r="maps":t==="web scene"?r=e.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":t==="web mapping application"&&e.includes("configurableApp")?r="instantapps":t==="web mapping application"||t==="mobile application"||t==="application"||t==="operation view"||t==="desktop application"?r="apps":t==="map document"||t==="map package"||t==="published map"||t==="scene document"||t==="globe document"||t==="basemap package"||t==="mobile basemap package"||t==="mobile map package"||t==="project package"||t==="project template"||t==="pro map"||t==="layout"||t==="layer"&&e.includes("ArcGIS Pro")||t==="explorer map"&&e.indexOf("Explorer Document")?r="mapsgray":t==="service definition"||t==="csv"||t==="shapefile"||t==="cad drawing"||t==="geojson"||t==="netcdf"||t==="administrative report"?r="datafiles":t==="explorer add in"||t==="desktop add in"||t==="windows viewer add in"||t==="windows viewer configuration"?r="appsgray":t==="360 vr experience"?r="360vr":t==="arcgis pro add in"||t==="arcgis pro configuration"?r="addindesktop":t==="rule package"||t==="file geodatabase"||t==="sqlite geodatabase"||t==="csv collection"||t==="kml collection"||t==="windows mobile package"||t==="map template"||t==="desktop application template"||t==="gml"||t==="arcpad package"||t==="code sample"||t==="document link"||t==="earth configuration"||t==="operations dashboard add in"||t==="rules package"||t==="image"||t==="workflow manager package"||t==="explorer map"&&e.includes("Explorer Mapping Application")||e.includes("Document")?r="datafilesgray":t==="network analysis service"||t==="geoprocessing service"||t==="geodata service"||t==="geometry service"||t==="geoprocessing package"||t==="locator package"||t==="geoprocessing sample"||t==="workflow manager service"?r="toolsgray":t==="layer"||t==="layer package"||t==="explorer layer"?r="layersgray":t==="scene package"?r="scenepackage":t==="3dtiles package"?r="3dtileslayerpackage":t==="mobile scene package"?r="mobilescenepackage":t==="tile package"||t==="compact tile package"?r="tilepackage":t==="task file"?r="taskfile":t==="report template"?r="report-template":t==="statistical data collection"?r="statisticaldatacollection":t==="insights workbook"?r="workbook":t==="insights model"?r="insightsmodel":t==="insights page"?r="insightspage":t==="insights theme"?r="insightstheme":t==="hub initiative"?r="hubinitiative":t==="hubpage"?r="hubpage":t==="hub event"?r="hubevent":t==="hub site application"?r="hubsite":t==="hub project"?r="hubproject":t==="relational database connection"?r="relationaldatabaseconnection":t==="big data file share"?r="datastorecollection":t==="image collection"?r="imagecollection":t==="style"?r="style":t==="desktop style"?r="desktopstyle":t==="dashboard"?r="dashboard":t==="raster function template"?r="rasterprocessingtemplate":t==="vector tile package"?r="vectortilepackage":t==="ortho mapping project"?r="orthomappingproject":t==="ortho mapping template"?r="orthomappingtemplate":t==="solution"?r="solutions":t==="geopackage"?r="geopackage":t==="deep learning package"?r="deeplearningpackage":t==="real time analytic"?r="realtimeanalytics":t==="big data analytic"?r="bigdataanalytics":t==="feed"?r="feed":t==="excalibur imagery project"?r="excaliburimageryproject":t==="notebook"?r="notebook":t==="storymap"?r="storymap":t==="survey123 add in"?r="survey123addin":t==="mission"?r="mission":t==="mission report"?r="missionreport":t==="mission template"?r="missiontemplate":t==="quickcapture project"?r="quickcaptureproject":t==="pro report"?r="proreport":t==="pro report template"?r="proreporttemplate":t==="urban model"?r="urbanmodel":t==="web experience"?r="experiencebuilder":t==="web experience template"?r="webexperiencetemplate":t==="experience builder widget"?r="experiencebuilderwidget":t==="experience builder widget package"?r="experiencebuilderwidgetpackage":t==="workflow"?r="workflow":t==="insights script"?r="insightsscript":t==="kernel gateway connection"?r="kernelgatewayconnection":t==="hub initiative template"?r="hubinitiativetemplate":t==="storymap theme"?r="storymaptheme":t==="knowledge graph"?r="knowledgegraph":t==="knowledge studio project"?r="knowledgestudio":t==="native application"?r="nativeapp":t==="native application installer"?r="nativeappinstaller":t==="link chart"?r="linkchart":t==="investigation"?r="investigation":t==="ogcfeatureserver"?r="features":t==="pro project"?r="proproject":t==="insights workbook package"?r="insightsworkbookpackage":t==="apache parquet"?r="apacheparquet":t==="notebook code snippets"||t==="notebook code snippet library"?r="notebookcodesnippets":t==="suitability model"?r="suitabilitymodel":t==="esri classifier definition"?r="classifierdefinition":t==="esri classification schema"?r="classificationschema":t==="insights data engineering workbook"?r="dataengineeringworkbook":t==="insights data engineering model"?r="dataengineeringmodel":t==="deep learning studio project"?r="deeplearningproject":t==="discussion"?r="discussion":t==="allsource project"?r="allsourceproject":t==="api key"?r="apikey":t==="data pipeline"?r="datapipelines":t==="group layer"?(f=e.includes("Map"),r=f?"layergroup2d":"layergroup"):r=t==="media layer"?"onlinemedialayer":t==="form"?e.includes("Survey123")?"survey":"datafilesgray":"maps",r?Ge(i+r+n+".png"):null}get isLayer(){return this.type!=null&&CX.has(this.type)}get itemCdnUrl(){let t=this.itemUrl;return t&&at&&!at.findCredential(t)&&(t=at._normalizeAGOLorgDomain(t),t=t.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),t=t.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),t=t.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),t}get itemPageUrl(){var e;const t=(e=this.portal)==null?void 0:e.itemPageUrl;return t&&this.id?`${t}?id=${this.id}`:null}get itemUrl(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t&&this.id?`${t}/content/items/${this.id}`:null}get thumbnailUrl(){var i;const t=this.itemUrl,e=this.thumbnail;return t&&e?((i=this.portal)==null?void 0:i.normalizeUrl(`${t}/info/${e}?f=json`))??null:null}get userItemUrl(){var i,n,r;const t=(i=this.portal)==null?void 0:i.restUrl;if(!t)return null;const e=this.owner||((r=(n=this.portal)==null?void 0:n.user)==null?void 0:r.username);return e?`${t}/content/users/${this.ownerFolder?`${e}/${this.ownerFolder}`:e}/items/${this.id}`:null}load(t){const e=this.portal??(this.portal=ir.getDefault()),i=e.load(t).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?e.request(this.itemUrl,{signal:t!=null?t.signal:null,query:{token:this.apiKey}}):{}).then(n=>{this.sourceJSON=n,this.read(n)});return this.addResolvingPromise(i),Promise.resolve(this)}async addRating(t){const e={method:"post",query:{}};return t instanceof __&&(t=t.rating),t==null||isNaN(t)||typeof t!="number"||(e.query.rating=t),this.portal?(await this.portal.request(this.itemUrl+"/addRating",e),new __({rating:t,created:new Date})):null}clone(){const t={access:this.access,accessInformation:this.accessInformation,applicationProxies:q(this.applicationProxies),avgRating:this.avgRating,categories:q(this.categories),created:q(this.created),culture:this.culture,description:this.description,extent:q(this.extent),groupCategories:q(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:q(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:q(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:q(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:q(this.typeKeywords),url:this.url};this.loaded&&(t.loadStatus="loaded");const e=new Yc({sourceJSON:this.sourceJSON}).set(t);return e._set("isOrgItem",this.isOrgItem),e}createPostQuery(){var i;const t=this.toJSON();for(const n of["tags","typeKeywords","categories"])t[n]=(i=t[n])==null?void 0:i.join(", ");const{extent:e}=t;return e&&(t.extent=JSON.stringify(e)),t}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(t="json",e){return this.portal.request(this.itemUrl+"/data",{responseType:t,...e,query:{token:this.apiKey}})}async fetchRating(t){const e=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...t});return e.rating!=null?(e.created=new Date(e.created),new __(e)):null}fetchRelatedItems(t,e){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...t,token:this.apiKey},...e},Yc)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(t=>(this.sourceJSON=t,this.read(t),this))}update(t){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const e=t==null?void 0:t.data,i={method:"post"};i.query=this.createPostQuery();for(const n in i.query)i.query[n]===null&&(i.query[n]="");return i.query.clearEmptyFields=!0,e!=null&&(typeof e=="string"?i.query.text=e:typeof e=="object"&&(i.query.text=JSON.stringify(e))),this.portal.request(`${this.userItemUrl}/update`,i).then(()=>this.reload())}):Promise.reject(new F("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(t){if(!this.id)throw new F("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:e,itemUrl:i}=this;await e.signIn();const{copyResources:n,folder:r,tags:s,title:o}=t||{},a={method:"post",query:{copyPrivateResources:n==="all",folder:typeof r=="string"?r:r==null?void 0:r.id,includeResources:!!n,tags:s==null?void 0:s.join(","),title:o}},{itemId:l}=await e.request(`${i}/copy`,a);return new Yc({id:l,portal:e})}updateThumbnail(t){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const e=t.thumbnail,i=t.filename,n={method:"post"};if(typeof e=="string")Sd(e)?n.query={data:e}:n.query={url:$r(e)},i!=null&&(n.query.filename=i);else{const r=new FormData;i!=null?r.append("file",e,i):r.append("file",e),n.body=r}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,n).then(()=>this.reload())}):Promise.reject(new F("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(t={},e){const{fetchResources:i}=await V(()=>import("./resourceUtils-N0TRohcb.js"),__vite__mapDeps([]),import.meta.url);return i(this,t,e)}async addResource(t,e,i){const{addOrUpdateResource:n}=await V(()=>import("./resourceUtils-N0TRohcb.js"),__vite__mapDeps([]),import.meta.url);return t.portalItem=this,n(t,"add",e,i)}async removeResource(t,e){const{removeResource:i}=await V(()=>import("./resourceUtils-N0TRohcb.js"),__vite__mapDeps([]),import.meta.url);if(t.portalItem&&t.portalItem.itemUrl!==this.itemUrl)throw new F("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return i(this,t,e)}async removeAllResources(t){const{removeAllResources:e}=await V(()=>import("./resourceUtils-N0TRohcb.js"),__vite__mapDeps([]),import.meta.url);return e(this,t)}resourceFromPath(t){return new MX({portalItem:this,path:t})}toJSON(){var i,n;const t=this.extent,e={accessInformation:this.accessInformation,categories:q(this.categories),created:(i=this.created)==null?void 0:i.getTime(),description:this.description,extent:t&&[[t.xmin,t.ymin],[t.xmax,t.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:(n=this.modified)==null?void 0:n.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:q(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:q(this.typeKeywords),url:this.url};return AL(e)}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new Yc({sourceJSON:t})}_getPostQuery(){const t=this.toJSON();for(const e in t)e==="tags"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="typeKeywords"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="extent"&&t[e]&&(t[e]=JSON.stringify(t[e]));return t}};c([d({type:["private","shared","org","public"]})],ve.prototype,"access",void 0),c([d()],ve.prototype,"accessInformation",void 0),c([d({type:String})],ve.prototype,"apiKey",void 0),c([d({json:{read:{source:"appProxies"}}})],ve.prototype,"applicationProxies",void 0),c([d()],ve.prototype,"avgRating",void 0),c([d()],ve.prototype,"categories",void 0),c([d({type:Date})],ve.prototype,"created",void 0),c([d()],ve.prototype,"culture",void 0),c([d()],ve.prototype,"description",void 0),c([d({readOnly:!0})],ve.prototype,"displayName",null),c([d({type:Ve})],ve.prototype,"extent",void 0),c([Ne("extent")],ve.prototype,"readExtent",null),c([d()],ve.prototype,"groupCategories",void 0),c([d({readOnly:!0})],ve.prototype,"iconUrl",null),c([d()],ve.prototype,"id",void 0),c([d({readOnly:!0})],ve.prototype,"isLayer",null),c([d({type:Boolean,readOnly:!0})],ve.prototype,"isOrgItem",void 0),c([d()],ve.prototype,"itemControl",void 0),c([d({readOnly:!0})],ve.prototype,"itemPageUrl",null),c([d({readOnly:!0})],ve.prototype,"itemUrl",null),c([d()],ve.prototype,"licenseInfo",void 0),c([d({type:Date})],ve.prototype,"modified",void 0),c([d()],ve.prototype,"name",void 0),c([d()],ve.prototype,"numComments",void 0),c([d()],ve.prototype,"numRatings",void 0),c([d()],ve.prototype,"numViews",void 0),c([d()],ve.prototype,"owner",void 0),c([d()],ve.prototype,"ownerFolder",void 0),c([d({type:ir})],ve.prototype,"portal",void 0),c([d()],ve.prototype,"screenshots",void 0),c([d()],ve.prototype,"size",void 0),c([d()],ve.prototype,"snippet",void 0),c([d()],ve.prototype,"sourceJSON",void 0),c([d({type:String})],ve.prototype,"sourceUrl",void 0),c([d({type:String})],ve.prototype,"spatialReference",void 0),c([d()],ve.prototype,"tags",void 0),c([d()],ve.prototype,"thumbnail",void 0),c([d({readOnly:!0})],ve.prototype,"thumbnailUrl",null),c([d()],ve.prototype,"title",void 0),c([d()],ve.prototype,"type",void 0),c([d()],ve.prototype,"typeKeywords",void 0),c([d({type:String,json:{read(t,e){var i;if(IX.has(e.type)){const n=(i=this.portal)==null?void 0:i.restUrl;t||(t=n&&this.id?`${n}/content/items/${this.id}/data`:null)}return t}}})],ve.prototype,"url",void 0),c([d({readOnly:!0})],ve.prototype,"userItemUrl",null),ve=Yc=c([S("esri.portal.PortalItem")],ve);const cD=ve,uD=Object.freeze(Object.defineProperty({__proto__:null,default:cD},Symbol.toStringTag,{value:"Module"}));async function OX(t){if(!t)return;const e=t.includes("-vector")?t.slice(0,t.indexOf("-vector")):t.includes("-3d")?t.slice(0,t.indexOf("-3d")):t,i=await H1("esri/t9n/basemaps");return i[t]||i[e]}const dp={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return Ge("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return Ge("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return Ge("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return Ge("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return Ge("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return Ge("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get"dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return Ge("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return Ge("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return Ge("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return Ge("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return Ge("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return Ge("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return Ge("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return Ge("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"arcgis-imagery":{get thumbnailUrl(){return Ge("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return Ge("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return Ge("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return Ge("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return Ge("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return Ge("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return Ge("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return Ge("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return Ge("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return Ge("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]},"arcgis-human-geography":{title:"Human Geography",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Base",title:"Human Geography Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Detail",title:"Human Geography Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Label",title:"Human Geography Label",isReference:!0}]},"arcgis-human-geography-dark":{title:"Human Geography (Dark)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Base",title:"Human Geography Dark Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Detail",title:"Human Geography Dark Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Label",title:"Human Geography Dark Label",isReference:!0}]}},AX=new Set(["ar","bs","ca","hr","cs","da","nl","en","et","fi","fr","de","el","he","hu","id","it","ja","ko","lv","lt","nb","pl","ro","ru","sr","es","sv","th","tr","uk","vi"]);let eh=class extends X{constructor(e){super(e),this.id=null,this.language=null,this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/webmaps"}getLanguageParamValue(){if(this.language)return this.language;const e=Jn().toLowerCase();switch(e){case"pt-br":return"pt-BR";case"pt-pt":return"pt-PT";case"zh-cn":return"zh-CN";case"zh-hk":return"zh-HK";case"zh-tw":return"zh-TW"}const i=yW(e);return i==="pt"?"pt-BR":i&&AX.has(i)?i:"global"}};c([d()],eh.prototype,"id",void 0),c([d()],eh.prototype,"language",void 0),c([d()],eh.prototype,"serviceUrl",void 0),eh=c([S("esri.support.BasemapStyle")],eh);const LX=eh;function PX(t){return hD(t)||DX(t)}function W0(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="feature"}function RX(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="graphics"}function NX(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="map-notes"&&"sublayers"in t}function dD(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="knowledge-graph"&&"layers"in t}function DX(t){return(t==null?void 0:t.type)==="scene"}function FX(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="subtype-group"&&"sublayers"in t}function hD(t){const e=t==null?void 0:t.type;return e==="imagery-tile"||e==="tile"||e==="open-street-map"||e==="vector-tile"||e==="web-tile"||e==="wmts"}function zX(t){const e=t==null?void 0:t.type;return e==="base-tile"||e==="tile"||e==="elevation"||e==="imagery-tile"||e==="base-elevation"||e==="open-street-map"||e==="wcs"||e==="web-tile"||e==="wmts"||e==="vector-tile"}const W_e={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function Z_e(t){const e=t==null?void 0:t.type;return e==="building-scene"||e==="integrated-mesh"||e==="point-cloud"||e==="scene"}function Y1(t){var e;return(t==null?void 0:t.type)==="feature"&&!t.url&&((e=t.source)==null?void 0:e.type)==="memory"}function K_e(t){var e;return((t==null?void 0:t.type)==="feature"||(t==null?void 0:t.type)==="subtype-group")&&((e=t.source)==null?void 0:e.type)==="feature-layer"}function jX(t){if(t.activeLayer){const e=t.activeLayer.tileMatrixSet;if(e)return e;const i=t.activeLayer.tileMatrixSets;if(i)return i}return null}async function J_e(t,e){const i=at==null?void 0:at.findServerInfo(t);if((i==null?void 0:i.currentVersion)!=null)return i.owningSystemUrl||null;const n=t.toLowerCase().indexOf("/rest/services");if(n===-1)return null;const r=`${t.substring(0,n)}/rest/info`,s=e!=null?e.signal:null,{data:o}=await $t(r,{query:{f:"json"},responseType:"json",signal:s});return(o==null?void 0:o.owningSystemUrl)||null}function GX(t){if(!("capabilities"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function UX(t){return GX(t)?"effectiveCapabilities"in t?t.effectiveCapabilities:t.capabilities:null}function HX(t){if(!("editingEnabled"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}function VX(t){return!!HX(t)&&("effectiveEditingEnabled"in t?t.effectiveEditingEnabled:t.editingEnabled)}const BX=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),qX=new Set(["csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","map-image","map-notes","media","ogc-feature","oriented-imagery","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function WX(t){return t.layerContainerType==="basemap"?BX:t.layerContainerType==="operational-layers"?qX:null}function ZX(t,e){if(e.restrictedWebMapWriting){const i=WX(e);return i==null||i.has(t.type)&&!Y1(t)}return!0}function KX(t,e){var i;if(e)if(Y1(t)){const n=bg("featureCollection.layers",e),r=(i=n==null?void 0:n[0])==null?void 0:i.layerDefinition;r&&FI(t,r)}else t.type!=="group"&&FI(t,e)}function FI(t,e){"maxScale"in t&&(e.maxScale=Vv(t.maxScale)??void 0),"minScale"in t&&(e.minScale=Vv(t.minScale)??void 0)}function JX(t,e){if(KX(t,e),e&&(e.id=t.id,"blendMode"in t&&(e.blendMode=t.blendMode,e.blendMode==="normal"&&delete e.blendMode),e.opacity=Vv(t.opacity)??void 0,e.title=t.title||"Layer",e.visibility=t.visible,"legendEnabled"in t&&t.type!=="wmts"))if(Y1(t)){const i=e.featureCollection;i&&(i.showLegend=t.legendEnabled)}else e.showLegend=t.legendEnabled}function zI(t,e,i){if(!t.persistenceEnabled)return null;if(!("write"in t)||!t.write)return i!=null&&i.messages&&i.messages.push(new F("layer:unsupported",`Layers (${t.title}, ${t.id}) of type '${t.declaredClass}' cannot be persisted`,{layer:t})),null;if(Y1(t)&&!t.isTable)e=t.resourceInfo;else if(ZX(t,i)){const n={};return t.write(n,i)?n:null}return e!=null&&JX(t,e=q(e)),e}var Cf;let YX=0;const XX="esri.Basemap";let zn=Cf=class extends xg(As){constructor(t){super(t),this.id=null,this.portalItem=null,this.spatialReference=null,this.style=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+YX++,this.baseLayers=new te,this.referenceLayers=new te;const e=n=>{n.parent&&n.parent!==this&&"remove"in n.parent&&n.parent.remove(n),n.parent=this,n.type==="elevation"&&J.getLogger(this).error(`Layer '${n.title}, id:${n.id}' of type '${n.type}' is not supported as a basemap layer and will therefore be ignored.`)},i=n=>{n.parent=null};this.addHandles([this.baseLayers.on("after-add",n=>e(n.item)),this.referenceLayers.on("after-add",n=>e(n.item)),this.baseLayers.on("after-remove",n=>i(n.item)),this.referenceLayers.on("after-remove",n=>i(n.item))])}initialize(){this.when().catch(t=>{J.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,t)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const t=this.baseLayers.toArray();for(const i of t)i.destroy();const e=this.referenceLayers.toArray();for(const i of e)i.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),this.portalItem=Oe(this.portalItem)}normalizeCtorArgs(t){return t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),delete(t={...t}).resourceInfo),t}set baseLayers(t){this._set("baseLayers",ud(t,this._get("baseLayers")))}_writeBaseLayers(t,e,i){const n=[];t&&(i={...i,layerContainerType:"basemap"},this.baseLayers.forEach(r=>{const s=zI(r,i.webmap?i.webmap.getLayerJSONFromResourceInfo(r):null,i);s!=null&&n.push(s)}),this.referenceLayers.forEach(r=>{const s=zI(r,i.webmap?i.webmap.getLayerJSONFromResourceInfo(r):null,i);s!=null&&(r.type!=="scene"&&(s.isReference=!0),n.push(s))})),e.baseMapLayers=n}set referenceLayers(t){this._set("referenceLayers",ud(t,this._get("referenceLayers")))}writeTitle(t,e){e.title=t||"Basemap"}load(t){return this.addResolvingPromise(this._loadFromSource(t)),Promise.resolve(this)}loadAll(){return aD(this,t=>{t(this.baseLayers,this.referenceLayers)})}clone(){const t={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(e=>Iv(e)?e.clone():e),referenceLayers:this.referenceLayers.map(e=>Iv(e)?e.clone():e)};return this.loaded&&(t.loadStatus="loaded"),new Cf({resourceInfo:this.resourceInfo}).set(t)}read(t,e){this.resourceInfo||this._set("resourceInfo",{data:t,context:e}),super.read(t,e)}write(t,e){var i;return t=t||{},e!=null&&e.origin||(e={origin:"web-map",...e}),super.write(t,e),!this.loaded&&((i=this.resourceInfo)!=null&&i.data.baseMapLayers)&&(t.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(n=>{const r=q(n);return r.url&&ko(r.url)&&(r.url=`https:${r.url}`),r.templateUrl&&ko(r.templateUrl)&&(r.templateUrl=`https:${r.templateUrl}`),r})),t}async _loadFromSource(t){const{resourceInfo:e,portalItem:i,style:n}=this;Qe(t);const r=[];if(e){const s=e.context?e.context.url:null;if(r.push(this._loadLayersFromJSON(e.data,s,t)),e.data.id&&!e.data.title){const o=e.data.id;r.push(OX(o).then(a=>{a&&this.read({title:a},e.context)}))}}else i?r.push(this._loadFromItem(i,t)):n&&r.push(this._loadFromStylesService(n,t));await Promise.all(r)}async _loadLayersFromJSON(t,e,i){var l,u;const n=(l=this.resourceInfo)==null?void 0:l.context,r=((u=this.portalItem)==null?void 0:u.portal)||(n==null?void 0:n.portal)||null,s=eQ[(n==null?void 0:n.origin)||""]??"web-map",{populateOperationalLayers:o}=await V(()=>import("./layersCreator-PX7PzyU1.js"),__vite__mapDeps([175,176,177,178,159,167]),import.meta.url),a=[];if(Qe(i),t.baseMapLayers&&Array.isArray(t.baseMapLayers)){const p={context:{...n,origin:s,url:e,portal:r,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},f=y=>s==="web-scene"&&y.layerType==="ArcGISSceneServiceLayer"||y.isReference,m=o(this.baseLayers,t.baseMapLayers.filter(y=>!f(y)),p);a.push(m);const g=o(this.referenceLayers,t.baseMapLayers.filter(f),p);a.push(g)}await Promise.allSettled(a)}async _loadFromItem(t,e){const i=await t.load(e),n=await i.fetchData("json",e),r=Gi(t.itemUrl??"");return this._set("resourceInfo",{data:n.baseMap??{},context:{origin:QX[t.type||""]??"web-map",portal:t.portal||ir.getDefault(),url:r}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:n.spatialReference},this.resourceInfo.context),this.read({title:t.title,thumbnailUrl:t.thumbnailUrl},{origin:"portal-item",portal:t.portal||ir.getDefault(),url:r}),this._loadLayersFromJSON(this.resourceInfo.data,r,e)}async _loadFromStylesService(t,e){var s;const i=`${t.serviceUrl}/${t.id}`,n=(await $t(i,{query:{language:t.getLanguageParamValue()},signal:e==null?void 0:e.signal})).data;if(n.baseMap&&Array.isArray(n.baseMap.baseMapLayers)){for(const o of n.baseMap.baseMapLayers)if(!o.customParameters&&((s=o.styleUrl)!=null&&s.includes("?"))){const a=Gi(o.styleUrl);a.query&&(o.styleUrl=a.path,o.customParameters=a.query)}}const r=Gi(i);return this._set("resourceInfo",{data:n.baseMap??{},context:{origin:"web-map",url:r}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:n.spatialReference},this.resourceInfo.context),this._loadLayersFromJSON(this.resourceInfo.data,r,e)}static fromId(t){const e=dp[t];return e?e.itemId?new Cf({portalItem:{id:e.itemId,portal:{url:"https://www.arcgis.com"}}}):Cf.fromJSON(e,{origin:e.is3d?"web-scene":"web-map"}):null}};c([d({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(t,e,i,n){this._writeBaseLayers(t,e,n)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:te}},writer(t,e,i,n){this._writeBaseLayers(t,e,n)}}}}}})],zn.prototype,"baseLayers",null),c([d({type:String,json:{origins:{"web-scene":{write:!0}}}})],zn.prototype,"id",void 0),c([d({type:cD})],zn.prototype,"portalItem",void 0),c([d()],zn.prototype,"referenceLayers",null),c([d({readOnly:!0})],zn.prototype,"resourceInfo",void 0),c([d({type:xe})],zn.prototype,"spatialReference",void 0),c([d({type:LX})],zn.prototype,"style",void 0),c([d()],zn.prototype,"thumbnailUrl",void 0),c([d({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],zn.prototype,"title",void 0),c([Ie("title")],zn.prototype,"writeTitle",null),zn=Cf=c([S(XX)],zn);const QX={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},eQ={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"},rc=zn,tQ=Object.freeze(Object.defineProperty({__proto__:null,default:rc},Symbol.toStringTag,{value:"Module"})),mb={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function pD(t){return!!mb[t]||!!mb[t.toLowerCase()]}function CE(t){return mb[t]??mb[t.toLowerCase()]}function iQ(t){return[...CE(t)]}function S_(t,e,i){i<0&&++i,i>1&&--i;const n=6*i;return n<1?t+(e-t)*n:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}function fD(t,e,i,n=1){const r=(t%360+360)%360/360,s=i<=.5?i*(e+1):i+e-i*e,o=2*i-s;return[Math.round(255*S_(o,s,r+1/3)),Math.round(255*S_(o,s,r)),Math.round(255*S_(o,s,r-1/3)),n]}function nQ(t){const e=t.length>5,i=e?8:4,n=(1<<i)-1,r=e?1:17,s=e?t.length===9:t.length===5;let o=+("0x"+t.substr(1));if(isNaN(o))return null;const a=[0,0,0,1];let l;return s&&(l=o&n,o>>=i,a[3]=r*l/255),l=o&n,o>>=i,a[2]=r*l,l=o&n,o>>=i,a[1]=r*l,l=o&n,o>>=i,a[0]=r*l,a}function qy(t){return Ar($T(t),0,255)}function Wy(t,e,i){return t=Number(t),isNaN(t)?i:t<e?e:t>i?i:t}function Zy(t,e){const i=t.toString(16).padStart(2,"0");return e?i.substring(0,1):i}let Z0=class Xt{static blendColors(e,i,n,r=new Xt){return r.r=Math.round(e.r+(i.r-e.r)*n),r.g=Math.round(e.g+(i.g-e.g)*n),r.b=Math.round(e.b+(i.b-e.b)*n),r.a=e.a+(i.a-e.a)*n,r._sanitize()}static fromRgb(e,i){const n=e.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(n){const r=n[2].split(/\s*,\s*/),s=n[1];if(s==="rgb"&&r.length===3||s==="rgba"&&r.length===4){const o=r[0];if(o.charAt(o.length-1)==="%"){const a=r.map(l=>2.56*parseFloat(l));return r.length===4&&(a[3]=parseFloat(r[3])),Xt.fromArray(a,i)}return Xt.fromArray(r.map(a=>parseFloat(a)),i)}if(s==="hsl"&&r.length===3||s==="hsla"&&r.length===4)return Xt.fromArray(fD(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100,parseFloat(r[3])),i)}return null}static fromHex(e,i=new Xt){if(e[0]!=="#"||isNaN(+`0x${e.substring(1)}`))return null;switch(e.length){case 4:case 5:{const n=parseInt(e.substring(1,2),16),r=parseInt(e.substring(2,3),16),s=parseInt(e.substring(3,4),16),o=e.length===5?15:parseInt(e.substring(4),16);return Xt.fromArray([n+16*n,r+16*r,s+16*s,(o+16*o)/255],i)}case 7:case 9:{const n=parseInt(e.substring(1,3),16),r=parseInt(e.substring(3,5),16),s=parseInt(e.substring(5,7),16),o=e.length===7?255:parseInt(e.substring(7),16);return Xt.fromArray([n,r,s,o/255],i)}default:return null}}static fromArray(e,i=new Xt){return i._set(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3])),isNaN(i.a)&&(i.a=1),i._sanitize()}static fromString(e,i){const n=pD(e)?CE(e):null;return n&&Xt.fromArray(n,i)||Xt.fromRgb(e,i)||Xt.fromHex(e,i)}static fromJSON(e){return e!=null?new Xt([e[0],e[1],e[2],(e[3]??255)/255]):void 0}static toUnitRGB(e){return e!=null?[e.r/255,e.g/255,e.b/255]:null}static toUnitRGBA(e){return e!=null?[e.r/255,e.g/255,e.b/255,e.a!=null?e.a:1]:null}constructor(e){this.r=255,this.g=255,this.b=255,this.a=1,e&&this.setColor(e)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(e){return typeof e=="string"?Xt.fromString(e,this):Array.isArray(e)?Xt.fromArray(e,this):(this._set(e.r??0,e.g??0,e.b??0,e.a??1),e instanceof Xt||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(e){const i=(e==null?void 0:e.capitalize)??!1,n=(e==null?void 0:e.digits)??6,r=n===3||n===4,s=n===4||n===8,o=`#${Zy(this.r,r)}${Zy(this.g,r)}${Zy(this.b,r)}${s?Zy(Math.round(255*this.a),r):""}`;return i?o.toUpperCase():o}toCss(e=!1){const i=this.r+", "+this.g+", "+this.b;return e?`rgba(${i}, ${this.a})`:`rgb(${i})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(e=Xt.AlphaMode.ALWAYS){const i=qy(this.r),n=qy(this.g),r=qy(this.b);return e===Xt.AlphaMode.ALWAYS||this.a!==1?[i,n,r,qy(255*this.a)]:[i,n,r]}clone(){return new Xt(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(e){return e!=null&&e.r===this.r&&e.g===this.g&&e.b===this.b&&e.a===this.a}_sanitize(){return this.r=Math.round(Wy(this.r,0,255)),this.g=Math.round(Wy(this.g,0,255)),this.b=Math.round(Wy(this.b,0,255)),this.a=Wy(this.a,0,1),this}_set(e,i,n,r){this.r=e,this.g=i,this.b=n,this.a=r}};Z0.prototype.declaredClass="esri.Color",function(t){var e;(e=t.AlphaMode||(t.AlphaMode={}))[e.ALWAYS=0]="ALWAYS",e[e.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(Z0||(Z0={}));const Me=Z0;function Y_e(t){}function rQ(t){return()=>t}function me(t,e={}){const i=t instanceof Kt?t:new Kt(t,e),n={type:(e==null?void 0:e.ignoreUnknown)??1?i.apiValues:String,json:{type:i.jsonValues,read:!(e!=null&&e.readOnly)&&{reader:i.read},write:{writer:i.write}}};return(e==null?void 0:e.readOnly)!==void 0&&(n.readOnly=!!e.readOnly),(e==null?void 0:e.default)!==void 0&&(n.json.default=e.default),(e==null?void 0:e.name)!==void 0&&(n.json.name=e.name),(e==null?void 0:e.nonNullable)!==void 0&&(n.nonNullable=e.nonNullable),d(n)}var j$;let K0=j$=class extends ie{constructor(t){super(t),this.type="none"}clone(){return new j$({type:this.type})}};c([me({none:"none",stayAbove:"stay-above"})],K0.prototype,"type",void 0),K0=j$=c([S("esri.ground.NavigationConstraint")],K0);function mD(t){const e=$T(100*(1-t));return Math.max(0,Math.min(e,100))}function gD(t){const e=1-t/100;return Math.max(0,Math.min(e,1))}var G$;let ca=G$=class extends xg(As){constructor(t){super(t),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new te;const e=n=>{n.parent&&n.parent!==this&&"remove"in n.parent&&n.parent.remove(n),n.parent=this,n.type!=="elevation"&&n.type!=="base-elevation"&&J.getLogger(this).error(`Layer '${n.title}, id:${n.id}' of type '${n.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},i=n=>{n.parent=null};this.addHandles([this.layers.on("after-add",n=>e(n.item)),this.layers.on("after-remove",n=>i(n.item))])}initialize(){this.when().catch(t=>{en(t)||J.getLogger(this).error("#load()","Failed to load ground",t)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const t=this.layers.removeAll();for(const e of t)Oe(e);this.layers.destroy()}normalizeCtorArgs(t){return t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),delete(t={...t}).resourceInfo),t}set layers(t){this._set("layers",ud(t,this._get("layers")))}writeLayers(t,e,i,n){const r=[];t&&(n={...n,layerContainerType:"ground"},t.forEach(s=>{if("write"in s){const o={};rQ(s)().write(o,n)&&r.push(o)}else n!=null&&n.messages&&n.messages.push(new F("layer:unsupported",`Layers (${s.title}, ${s.id}) of type '${s.declaredClass}' cannot be persisted in the ground`,{layer:s}))})),e.layers=r}load(t){return this.addResolvingPromise(this._loadFromSource(t)),Promise.resolve(this)}loadAll(){return aD(this,t=>{t(this.layers)})}async queryElevation(t,e){await this.load({signal:e==null?void 0:e.signal});const{ElevationQuery:i}=await V(()=>import("./ElevationQuery-JLP5F3Jj.js"),__vite__mapDeps([]),import.meta.url);Qe(e);const n=new i,r=this.layers.filter(jI).toArray();return n.queryAll(r,t,e)}async createElevationSampler(t,e){await this.load({signal:e==null?void 0:e.signal});const{ElevationQuery:i}=await V(()=>import("./ElevationQuery-JLP5F3Jj.js"),__vite__mapDeps([]),import.meta.url);Qe(e);const n=new i,r=this.layers.filter(jI).toArray();return n.createSamplerAll(r,t,e)}clone(){const t={opacity:this.opacity,surfaceColor:q(this.surfaceColor),navigationConstraint:q(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(t.loadStatus="loaded"),new G$({resourceInfo:this.resourceInfo}).set(t)}read(t,e){this.resourceInfo||this._set("resourceInfo",{data:t,context:e}),super.read(t,e)}_loadFromSource(t){const e=this.resourceInfo;return e?this._loadLayersFromJSON(e.data,e.context,t):Promise.resolve()}async _loadLayersFromJSON(t,e,i){const n=(e==null?void 0:e.origin)||"web-scene",r=(e==null?void 0:e.portal)||null,s=(e==null?void 0:e.url)||null,{populateOperationalLayers:o}=await V(()=>import("./layersCreator-PX7PzyU1.js"),__vite__mapDeps([175,176,177,178,159,167]),import.meta.url);Qe(i);const a=[];if(t.layers&&Array.isArray(t.layers)){const l={context:{origin:n,url:s,portal:r,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};a.push(o(this.layers,t.layers,l))}await Promise.allSettled(a)}};function sQ(t){return t&&"createElevationSampler"in t}function jI(t){return t.type==="elevation"||sQ(t)}c([d({json:{read:!1}})],ca.prototype,"layers",null),c([Ie("layers")],ca.prototype,"writeLayers",null),c([d({readOnly:!0})],ca.prototype,"resourceInfo",void 0),c([d({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:Et,read:{reader:gD,source:"transparency"},write:{writer:(t,e)=>{e.transparency=mD(t)},target:"transparency"}}})],ca.prototype,"opacity",void 0),c([d({type:Me,json:{type:[Et],write:(t,e)=>{e.surfaceColor=t.toJSON().slice(0,3)}}})],ca.prototype,"surfaceColor",void 0),c([d({type:K0,json:{write:!0}})],ca.prototype,"navigationConstraint",void 0),ca=G$=c([S("esri.Ground")],ca);const gb=ca,oQ=[["binary","application/octet-stream","bin",""]];function X_e(t,e){return bD(e.name,(t==null?void 0:t.supportedFormats)??[])!=null}function Q_e(t,e){if(!t)return!1;const i=aQ(e,t.supportedFormats??[]);return i!=null&&t.editFormats.includes(i)}function yD(t,e){return OE(cQ(t,e))}function vD(t,e){return OE(bD(t,e))}function eSe(t,e){return wD(lQ(t,e))}function aQ(t,e){return vD(t.name,e)??yD(t.type,e)}function IE(t){return[...oQ,...t]}function lQ(t,e){return IE(e).find(i=>OE(i)===t)}function cQ(t,e){const i=t.toLowerCase();return IE(e).find(n=>wD(n)===i)}function bD(t,e){const i=t.toLowerCase();return IE(e).find(n=>uQ(n).some(r=>i.endsWith(r)))}function OE(t){return t==null?void 0:t[0]}function wD(t){return t==null?void 0:t[1].toLowerCase()}function uQ(t){return(t==null?void 0:t[2].split(",").map(e=>e.toLowerCase()))??[]}function tSe(t){var e;return(e=t.tables)==null?void 0:e.find(i=>i.role==="assetMaps")}function dQ(t){var e,i;return!(!(t&&typeof t=="object"&&"loaded"in t&&t.loaded&&((i=(e=UX(t))==null?void 0:e.operations)!=null&&i.supportsEditing)&&"type"in t)||"editingEnabled"in t&&!VX(t)||t.type==="scene"&&!hQ(t))}function hQ(t){const{associatedLayer:e}=t,i=e==null?void 0:e.infoFor3D;if(!i)return!0;const{supportedFormats:n,queryFormats:r}=i,s=yD("model/gltf-binary",n)??vD("glb",n);if(!(s!=null&&r.includes(s)))return J.getLogger("esri.layers.support.editableLayers").warnOnce(`SceneLayer (${t.title??"Untitled layer"}, ${t.id}) is not editable because it does not support GLB queries.`),!1;const o=t.spatialReference,a=e.spatialReference;if(!xt(o,a))return J.getLogger("esri.layers.support.editableLayers").warnOnce(`SceneLayer (${t.title??"Untitled layer"}, ${t.id}) is not editable because its spatial reference (wkid:${o.wkid}) is different from its associated FeatureLayer's spatial reference (wkid:${a.wkid}).`),!1;const l=e.sourceJSON.sourceSpatialReference;return!(l!=null&&!xt(l,a))||(J.getLogger("esri.layers.support.editableLayers").warnOnce(`SceneLayer (${t.title??"Untitled layer"}, ${t.id}) is not editable because the spatial reference of its associated FeatureLayer's service (wkid:${a.wkid}) is different from its source spatial reference (wkid:${l.wkid}).`),!1)}const pQ=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,fQ="screenUtils.toPt: input not recognized!",_D=96;function iSe(t){return t?t/72*_D:0}function gc(t){return t?72*t/_D:0}function St(t){if(typeof t=="string"){const e=t.match(pQ);if(e){const i=Number(e[1]),n=e[3]&&e[3].toLowerCase(),r=t.charAt(0)==="-",s=n==="px"?gc(i):i;return r?-s:s}return console.warn(fQ),null}return t}function ji(t=0,e=0){return{x:t,y:e}}function mQ(t=0,e=0){return[t,e]}function nSe(t=0,e=0,i=0){return[t,e,i]}function rSe(t){return t}function sSe(t){return t}function oSe(t){return t}function aSe(t,e){return e?(e[0]=t.x,e[1]=t.y,e.length>2&&(e[2]=0),e):[t.x,t.y]}function X1(){const t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function gQ(t){const e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function yQ(t,e,i,n,r,s,o,a,l,u,p,f,m,g,y,v){const b=new Float32Array(16);return b[0]=t,b[1]=e,b[2]=i,b[3]=n,b[4]=r,b[5]=s,b[6]=o,b[7]=a,b[8]=l,b[9]=u,b[10]=p,b[11]=f,b[12]=m,b[13]=g,b[14]=y,b[15]=v,b}function vQ(t,e){return new Float32Array(t,e,16)}const bQ=X1();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:bQ,clone:gQ,create:X1,createView:vQ,fromValues:yQ},Symbol.toStringTag,{value:"Module"}));function wQ(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Tc(t,e,i,n,r,s,o,a,l,u,p,f,m,g,y,v,b){return t[0]=e,t[1]=i,t[2]=n,t[3]=r,t[4]=s,t[5]=o,t[6]=a,t[7]=l,t[8]=u,t[9]=p,t[10]=f,t[11]=m,t[12]=g,t[13]=y,t[14]=v,t[15]=b,t}function Q1(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Ec(t,e){if(t===e){const i=e[1],n=e[2],r=e[3],s=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=i,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=s,t[11]=e[14],t[12]=r,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function _Q(t,e){return SD(t,e)||Q1(t),t}function SD(t,e){const i=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],p=e[8],f=e[9],m=e[10],g=e[11],y=e[12],v=e[13],b=e[14],_=e[15],$=i*a-n*o,x=i*l-r*o,E=i*u-s*o,C=n*l-r*a,M=n*u-s*a,N=r*u-s*l,G=p*v-f*y,U=p*b-m*y,B=p*_-g*y,H=f*b-m*v,L=f*_-g*v,R=m*_-g*b;let D=$*R-x*L+E*H+C*B-M*U+N*G;return D?(D=1/D,t[0]=(a*R-l*L+u*H)*D,t[1]=(r*L-n*R-s*H)*D,t[2]=(v*N-b*M+_*C)*D,t[3]=(m*M-f*N-g*C)*D,t[4]=(l*B-o*R-u*U)*D,t[5]=(i*R-r*B+s*U)*D,t[6]=(b*E-y*N-_*x)*D,t[7]=(p*N-m*E+g*x)*D,t[8]=(o*L-a*B+u*G)*D,t[9]=(n*B-i*L-s*G)*D,t[10]=(y*M-v*E+_*$)*D,t[11]=(f*E-p*M-g*$)*D,t[12]=(a*U-o*H-l*G)*D,t[13]=(i*H-n*U+r*G)*D,t[14]=(v*x-y*C-b*$)*D,t[15]=(p*C-f*x+m*$)*D,t):null}function SQ(t,e){const i=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],p=e[8],f=e[9],m=e[10],g=e[11],y=e[12],v=e[13],b=e[14],_=e[15];return t[0]=a*(m*_-g*b)-f*(l*_-u*b)+v*(l*g-u*m),t[1]=-(n*(m*_-g*b)-f*(r*_-s*b)+v*(r*g-s*m)),t[2]=n*(l*_-u*b)-a*(r*_-s*b)+v*(r*u-s*l),t[3]=-(n*(l*g-u*m)-a*(r*g-s*m)+f*(r*u-s*l)),t[4]=-(o*(m*_-g*b)-p*(l*_-u*b)+y*(l*g-u*m)),t[5]=i*(m*_-g*b)-p*(r*_-s*b)+y*(r*g-s*m),t[6]=-(i*(l*_-u*b)-o*(r*_-s*b)+y*(r*u-s*l)),t[7]=i*(l*g-u*m)-o*(r*g-s*m)+p*(r*u-s*l),t[8]=o*(f*_-g*v)-p*(a*_-u*v)+y*(a*g-u*f),t[9]=-(i*(f*_-g*v)-p*(n*_-s*v)+y*(n*g-s*f)),t[10]=i*(a*_-u*v)-o*(n*_-s*v)+y*(n*u-s*a),t[11]=-(i*(a*g-u*f)-o*(n*g-s*f)+p*(n*u-s*a)),t[12]=-(o*(f*b-m*v)-p*(a*b-l*v)+y*(a*m-l*f)),t[13]=i*(f*b-m*v)-p*(n*b-r*v)+y*(n*m-r*f),t[14]=-(i*(a*b-l*v)-o*(n*b-r*v)+y*(n*l-r*a)),t[15]=i*(a*m-l*f)-o*(n*m-r*f)+p*(n*l-r*a),t}function $Q(t){const e=t[0],i=t[1],n=t[2],r=t[3],s=t[4],o=t[5],a=t[6],l=t[7],u=t[8],p=t[9],f=t[10],m=t[11],g=t[12],y=t[13],v=t[14],b=t[15];return(e*o-i*s)*(f*b-m*v)-(e*a-n*s)*(p*b-m*y)+(e*l-r*s)*(p*v-f*y)+(i*a-n*o)*(u*b-m*g)-(i*l-r*o)*(u*v-f*g)+(n*l-r*a)*(u*y-p*g)}function $D(t,e,i){const n=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],u=e[6],p=e[7],f=e[8],m=e[9],g=e[10],y=e[11],v=e[12],b=e[13],_=e[14],$=e[15];let x=i[0],E=i[1],C=i[2],M=i[3];return t[0]=x*n+E*a+C*f+M*v,t[1]=x*r+E*l+C*m+M*b,t[2]=x*s+E*u+C*g+M*_,t[3]=x*o+E*p+C*y+M*$,x=i[4],E=i[5],C=i[6],M=i[7],t[4]=x*n+E*a+C*f+M*v,t[5]=x*r+E*l+C*m+M*b,t[6]=x*s+E*u+C*g+M*_,t[7]=x*o+E*p+C*y+M*$,x=i[8],E=i[9],C=i[10],M=i[11],t[8]=x*n+E*a+C*f+M*v,t[9]=x*r+E*l+C*m+M*b,t[10]=x*s+E*u+C*g+M*_,t[11]=x*o+E*p+C*y+M*$,x=i[12],E=i[13],C=i[14],M=i[15],t[12]=x*n+E*a+C*f+M*v,t[13]=x*r+E*l+C*m+M*b,t[14]=x*s+E*u+C*g+M*_,t[15]=x*o+E*p+C*y+M*$,t}function xQ(t,e,i){const n=i[0],r=i[1],s=i[2];if(e===t)t[12]=e[0]*n+e[4]*r+e[8]*s+e[12],t[13]=e[1]*n+e[5]*r+e[9]*s+e[13],t[14]=e[2]*n+e[6]*r+e[10]*s+e[14],t[15]=e[3]*n+e[7]*r+e[11]*s+e[15];else{const o=e[0],a=e[1],l=e[2],u=e[3],p=e[4],f=e[5],m=e[6],g=e[7],y=e[8],v=e[9],b=e[10],_=e[11];t[0]=o,t[1]=a,t[2]=l,t[3]=u,t[4]=p,t[5]=f,t[6]=m,t[7]=g,t[8]=y,t[9]=v,t[10]=b,t[11]=_,t[12]=o*n+p*r+y*s+e[12],t[13]=a*n+f*r+v*s+e[13],t[14]=l*n+m*r+b*s+e[14],t[15]=u*n+g*r+_*s+e[15]}return t}function TQ(t,e,i){const n=i[0],r=i[1],s=i[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function EQ(t,e,i,n){let r,s,o,a,l,u,p,f,m,g,y,v,b,_,$,x,E,C,M,N,G,U,B,H,L=n[0],R=n[1],D=n[2],Y=Math.sqrt(L*L+R*R+D*D);return Y<Vi()?null:(Y=1/Y,L*=Y,R*=Y,D*=Y,r=Math.sin(i),s=Math.cos(i),o=1-s,a=e[0],l=e[1],u=e[2],p=e[3],f=e[4],m=e[5],g=e[6],y=e[7],v=e[8],b=e[9],_=e[10],$=e[11],x=L*L*o+s,E=R*L*o+D*r,C=D*L*o-R*r,M=L*R*o-D*r,N=R*R*o+s,G=D*R*o+L*r,U=L*D*o+R*r,B=R*D*o-L*r,H=D*D*o+s,t[0]=a*x+f*E+v*C,t[1]=l*x+m*E+b*C,t[2]=u*x+g*E+_*C,t[3]=p*x+y*E+$*C,t[4]=a*M+f*N+v*G,t[5]=l*M+m*N+b*G,t[6]=u*M+g*N+_*G,t[7]=p*M+y*N+$*G,t[8]=a*U+f*B+v*H,t[9]=l*U+m*B+b*H,t[10]=u*U+g*B+_*H,t[11]=p*U+y*B+$*H,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function kQ(t,e,i){const n=Math.sin(i),r=Math.cos(i),s=e[4],o=e[5],a=e[6],l=e[7],u=e[8],p=e[9],f=e[10],m=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*r+u*n,t[5]=o*r+p*n,t[6]=a*r+f*n,t[7]=l*r+m*n,t[8]=u*r-s*n,t[9]=p*r-o*n,t[10]=f*r-a*n,t[11]=m*r-l*n,t}function MQ(t,e,i){const n=Math.sin(i),r=Math.cos(i),s=e[0],o=e[1],a=e[2],l=e[3],u=e[8],p=e[9],f=e[10],m=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*r-u*n,t[1]=o*r-p*n,t[2]=a*r-f*n,t[3]=l*r-m*n,t[8]=s*n+u*r,t[9]=o*n+p*r,t[10]=a*n+f*r,t[11]=l*n+m*r,t}function CQ(t,e,i){const n=Math.sin(i),r=Math.cos(i),s=e[0],o=e[1],a=e[2],l=e[3],u=e[4],p=e[5],f=e[6],m=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*r+u*n,t[1]=o*r+p*n,t[2]=a*r+f*n,t[3]=l*r+m*n,t[4]=u*r-s*n,t[5]=p*r-o*n,t[6]=f*r-a*n,t[7]=m*r-l*n,t}function IQ(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function OQ(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function xD(t,e,i){if(e===0)return Q1(t);let n,r,s,o=i[0],a=i[1],l=i[2],u=Math.sqrt(o*o+a*a+l*l);return u<Vi()?null:(u=1/u,o*=u,a*=u,l*=u,n=Math.sin(e),r=Math.cos(e),s=1-r,t[0]=o*o*s+r,t[1]=a*o*s+l*n,t[2]=l*o*s-a*n,t[3]=0,t[4]=o*a*s-l*n,t[5]=a*a*s+r,t[6]=l*a*s+o*n,t[7]=0,t[8]=o*l*s+a*n,t[9]=a*l*s-o*n,t[10]=l*l*s+r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function AQ(t,e){const i=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function LQ(t,e){const i=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function PQ(t,e){const i=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function TD(t,e,i){const n=e[0],r=e[1],s=e[2],o=e[3],a=n+n,l=r+r,u=s+s,p=n*a,f=n*l,m=n*u,g=r*l,y=r*u,v=s*u,b=o*a,_=o*l,$=o*u;return t[0]=1-(g+v),t[1]=f+$,t[2]=m-_,t[3]=0,t[4]=f-$,t[5]=1-(p+v),t[6]=y+b,t[7]=0,t[8]=m+_,t[9]=y-b,t[10]=1-(p+g),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function RQ(t,e){const i=NQ,n=-e[0],r=-e[1],s=-e[2],o=e[3],a=e[4],l=e[5],u=e[6],p=e[7],f=n*n+r*r+s*s+o*o;return f>0?(i[0]=2*(a*o+p*n+l*s-u*r)/f,i[1]=2*(l*o+p*r+u*n-a*s)/f,i[2]=2*(u*o+p*s+a*r-l*n)/f):(i[0]=2*(a*o+p*n+l*s-u*r),i[1]=2*(l*o+p*r+u*n-a*s),i[2]=2*(u*o+p*s+a*r-l*n)),TD(t,e,i),t}const NQ=se();function DQ(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function FQ(t,e){const i=e[0],n=e[1],r=e[2],s=e[4],o=e[5],a=e[6],l=e[8],u=e[9],p=e[10];return t[0]=Math.sqrt(i*i+n*n+r*r),t[1]=Math.sqrt(s*s+o*o+a*a),t[2]=Math.sqrt(l*l+u*u+p*p),t}function zQ(t,e){const i=e[0]+e[5]+e[10];let n=0;return i>0?(n=2*Math.sqrt(i+1),t[3]=.25*n,t[0]=(e[6]-e[9])/n,t[1]=(e[8]-e[2])/n,t[2]=(e[1]-e[4])/n):e[0]>e[5]&&e[0]>e[10]?(n=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/n,t[0]=.25*n,t[1]=(e[1]+e[4])/n,t[2]=(e[8]+e[2])/n):e[5]>e[10]?(n=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/n,t[0]=(e[1]+e[4])/n,t[1]=.25*n,t[2]=(e[6]+e[9])/n):(n=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/n,t[0]=(e[8]+e[2])/n,t[1]=(e[6]+e[9])/n,t[2]=.25*n),t}function jQ(t,e,i,n){const r=e[0],s=e[1],o=e[2],a=e[3],l=r+r,u=s+s,p=o+o,f=r*l,m=r*u,g=r*p,y=s*u,v=s*p,b=o*p,_=a*l,$=a*u,x=a*p,E=n[0],C=n[1],M=n[2];return t[0]=(1-(y+b))*E,t[1]=(m+x)*E,t[2]=(g-$)*E,t[3]=0,t[4]=(m-x)*C,t[5]=(1-(f+b))*C,t[6]=(v+_)*C,t[7]=0,t[8]=(g+$)*M,t[9]=(v-_)*M,t[10]=(1-(f+y))*M,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function GQ(t,e,i,n,r){const s=e[0],o=e[1],a=e[2],l=e[3],u=s+s,p=o+o,f=a+a,m=s*u,g=s*p,y=s*f,v=o*p,b=o*f,_=a*f,$=l*u,x=l*p,E=l*f,C=n[0],M=n[1],N=n[2],G=r[0],U=r[1],B=r[2],H=(1-(v+_))*C,L=(g+E)*C,R=(y-x)*C,D=(g-E)*M,Y=(1-(m+_))*M,le=(b+$)*M,re=(y+x)*N,oe=(b-$)*N,ke=(1-(m+v))*N;return t[0]=H,t[1]=L,t[2]=R,t[3]=0,t[4]=D,t[5]=Y,t[6]=le,t[7]=0,t[8]=re,t[9]=oe,t[10]=ke,t[11]=0,t[12]=i[0]+G-(H*G+D*U+re*B),t[13]=i[1]+U-(L*G+Y*U+oe*B),t[14]=i[2]+B-(R*G+le*U+ke*B),t[15]=1,t}function UQ(t,e){const i=e[0],n=e[1],r=e[2],s=e[3],o=i+i,a=n+n,l=r+r,u=i*o,p=n*o,f=n*a,m=r*o,g=r*a,y=r*l,v=s*o,b=s*a,_=s*l;return t[0]=1-f-y,t[1]=p+_,t[2]=m-b,t[3]=0,t[4]=p-_,t[5]=1-u-y,t[6]=g+v,t[7]=0,t[8]=m+b,t[9]=g-v,t[10]=1-u-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function HQ(t,e,i,n,r,s,o){const a=1/(i-e),l=1/(r-n),u=1/(s-o);return t[0]=2*s*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*s*l,t[6]=0,t[7]=0,t[8]=(i+e)*a,t[9]=(r+n)*l,t[10]=(o+s)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*s*2*u,t[15]=0,t}function VQ(t,e,i,n,r){const s=1/Math.tan(e/2);let o;return t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,r!=null&&r!==1/0?(o=1/(n-r),t[10]=(r+n)*o,t[14]=2*r*n*o):(t[10]=-1,t[14]=-2*n),t}function BQ(t,e,i,n){const r=Math.tan(e.upDegrees*Math.PI/180),s=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),a=Math.tan(e.rightDegrees*Math.PI/180),l=2/(o+a),u=2/(r+s);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=-(o-a)*l*.5,t[9]=(r-s)*u*.5,t[10]=n/(i-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*i/(i-n),t[15]=0,t}function qQ(t,e,i,n,r,s,o){const a=1/(e-i),l=1/(n-r),u=1/(s-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+i)*a,t[13]=(r+n)*l,t[14]=(o+s)*u,t[15]=1,t}function WQ(t,e,i,n){const r=e[0],s=e[1],o=e[2];let a=r-i[0],l=s-i[1],u=o-i[2];const p=Vi();if(Math.abs(a)<p&&Math.abs(l)<p&&Math.abs(u)<p)return void Q1(t);let f=1/Math.sqrt(a*a+l*l+u*u);a*=f,l*=f,u*=f;const m=n[0],g=n[1],y=n[2];let v=g*u-y*l,b=y*a-m*u,_=m*l-g*a;f=Math.sqrt(v*v+b*b+_*_),f?(f=1/f,v*=f,b*=f,_*=f):(v=0,b=0,_=0);let $=l*_-u*b,x=u*v-a*_,E=a*b-l*v;f=Math.sqrt($*$+x*x+E*E),f?(f=1/f,$*=f,x*=f,E*=f):($=0,x=0,E=0),t[0]=v,t[1]=$,t[2]=a,t[3]=0,t[4]=b,t[5]=x,t[6]=l,t[7]=0,t[8]=_,t[9]=E,t[10]=u,t[11]=0,t[12]=-(v*r+b*s+_*o),t[13]=-($*r+x*s+E*o),t[14]=-(a*r+l*s+u*o),t[15]=1}function ZQ(t,e,i,n){const r=e[0],s=e[1],o=e[2],a=n[0],l=n[1],u=n[2];let p=r-i[0],f=s-i[1],m=o-i[2],g=p*p+f*f+m*m;g>0&&(g=1/Math.sqrt(g),p*=g,f*=g,m*=g);let y=l*m-u*f,v=u*p-a*m,b=a*f-l*p;return g=y*y+v*v+b*b,g>0&&(g=1/Math.sqrt(g),y*=g,v*=g,b*=g),t[0]=y,t[1]=v,t[2]=b,t[3]=0,t[4]=f*b-m*v,t[5]=m*y-p*b,t[6]=p*v-f*y,t[7]=0,t[8]=p,t[9]=f,t[10]=m,t[11]=0,t[12]=r,t[13]=s,t[14]=o,t[15]=1,t}function KQ(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function JQ(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2+t[9]**2+t[10]**2+t[11]**2+t[12]**2+t[13]**2+t[14]**2+t[15]**2)}function YQ(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t[9]=e[9]+i[9],t[10]=e[10]+i[10],t[11]=e[11]+i[11],t[12]=e[12]+i[12],t[13]=e[13]+i[13],t[14]=e[14]+i[14],t[15]=e[15]+i[15],t}function ED(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t[9]=e[9]-i[9],t[10]=e[10]-i[10],t[11]=e[11]-i[11],t[12]=e[12]-i[12],t[13]=e[13]-i[13],t[14]=e[14]-i[14],t[15]=e[15]-i[15],t}function XQ(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12]*i,t[13]=e[13]*i,t[14]=e[14]*i,t[15]=e[15]*i,t}function QQ(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t[3]=e[3]+i[3]*n,t[4]=e[4]+i[4]*n,t[5]=e[5]+i[5]*n,t[6]=e[6]+i[6]*n,t[7]=e[7]+i[7]*n,t[8]=e[8]+i[8]*n,t[9]=e[9]+i[9]*n,t[10]=e[10]+i[10]*n,t[11]=e[11]+i[11]*n,t[12]=e[12]+i[12]*n,t[13]=e[13]+i[13]*n,t[14]=e[14]+i[14]*n,t[15]=e[15]+i[15]*n,t}function eee(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function tee(t,e){if(t===e)return!0;const i=t[0],n=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=t[6],u=t[7],p=t[8],f=t[9],m=t[10],g=t[11],y=t[12],v=t[13],b=t[14],_=t[15],$=e[0],x=e[1],E=e[2],C=e[3],M=e[4],N=e[5],G=e[6],U=e[7],B=e[8],H=e[9],L=e[10],R=e[11],D=e[12],Y=e[13],le=e[14],re=e[15],oe=Vi();return Math.abs(i-$)<=oe*Math.max(1,Math.abs(i),Math.abs($))&&Math.abs(n-x)<=oe*Math.max(1,Math.abs(n),Math.abs(x))&&Math.abs(r-E)<=oe*Math.max(1,Math.abs(r),Math.abs(E))&&Math.abs(s-C)<=oe*Math.max(1,Math.abs(s),Math.abs(C))&&Math.abs(o-M)<=oe*Math.max(1,Math.abs(o),Math.abs(M))&&Math.abs(a-N)<=oe*Math.max(1,Math.abs(a),Math.abs(N))&&Math.abs(l-G)<=oe*Math.max(1,Math.abs(l),Math.abs(G))&&Math.abs(u-U)<=oe*Math.max(1,Math.abs(u),Math.abs(U))&&Math.abs(p-B)<=oe*Math.max(1,Math.abs(p),Math.abs(B))&&Math.abs(f-H)<=oe*Math.max(1,Math.abs(f),Math.abs(H))&&Math.abs(m-L)<=oe*Math.max(1,Math.abs(m),Math.abs(L))&&Math.abs(g-R)<=oe*Math.max(1,Math.abs(g),Math.abs(R))&&Math.abs(y-D)<=oe*Math.max(1,Math.abs(y),Math.abs(D))&&Math.abs(v-Y)<=oe*Math.max(1,Math.abs(v),Math.abs(Y))&&Math.abs(b-le)<=oe*Math.max(1,Math.abs(b),Math.abs(le))&&Math.abs(_-re)<=oe*Math.max(1,Math.abs(_),Math.abs(re))}function iee(t){const e=Vi(),i=t[0],n=t[1],r=t[2],s=t[4],o=t[5],a=t[6],l=t[8],u=t[9],p=t[10];return Math.abs(1-(i*i+s*s+l*l))<=e&&Math.abs(1-(n*n+o*o+u*u))<=e&&Math.abs(1-(r*r+a*a+p*p))<=e}function nee(t){return t[0]===1&&t[1]===0&&t[2]===0&&t[4]===0&&t[5]===1&&t[6]===0&&t[8]===0&&t[9]===0&&t[10]===1}const ree=$D,see=ED;Object.freeze(Object.defineProperty({__proto__:null,add:YQ,adjoint:SQ,copy:wQ,determinant:$Q,equals:tee,exactEquals:eee,frob:JQ,fromQuat:UQ,fromQuat2:RQ,fromRotation:xD,fromRotationTranslation:TD,fromRotationTranslationScale:jQ,fromRotationTranslationScaleOrigin:GQ,fromScaling:OQ,fromTranslation:IQ,fromXRotation:AQ,fromYRotation:LQ,fromZRotation:PQ,frustum:HQ,getRotation:zQ,getScaling:FQ,getTranslation:DQ,hasIdentityRotation:nee,identity:Q1,invert:SD,invertOrIdentity:_Q,isOrthoNormal:iee,lookAt:WQ,mul:ree,multiply:$D,multiplyScalar:XQ,multiplyScalarAndAdd:QQ,ortho:qQ,perspective:VQ,perspectiveFromFieldOfView:BQ,rotate:EQ,rotateX:kQ,rotateY:MQ,rotateZ:CQ,scale:TQ,set:Tc,str:KQ,sub:see,subtract:ED,targetTo:ZQ,translate:xQ,transpose:Ec},Symbol.toStringTag,{value:"Module"}));const oee=(t,e)=>{const i=Tc(t,e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1);return Ec(i,i)},aee=(t,e)=>{const i=Tc(t,e,0,0,.5-.5*e,0,e,0,.5-.5*e,0,0,e,.5-.5*e,0,0,0,1);return Ec(i,i)},lee=(t,e)=>{const i=1-e,n=Tc(t,.2126+.7874*i,.7152-.7152*i,.0722-.0722*i,0,.2126-.2126*i,.7152+.2848*i,.0722-.0722*i,0,.2126-.2126*i,.7152-.7152*i,.0722+.9278*i,0,0,0,0,1);return Ec(n,n)},cee=(t,e)=>{const i=Math.sin(e*Math.PI/180),n=Math.cos(e*Math.PI/180),r=Tc(t,.213+.787*n-.213*i,.715-.715*n-.715*i,.072-.072*n+.928*i,0,.213-.213*n+.143*i,.715+.285*n+.14*i,.072-.072*n-.283*i,0,.213-.213*n-.787*i,.715-.715*n+.715*i,.072+.928*n+.072*i,0,0,0,0,1);return Ec(r,r)},uee=(t,e)=>{const i=1-2*e,n=Tc(t,i,0,0,e,0,i,0,e,0,0,i,e,0,0,0,1);return Ec(n,n)},dee=(t,e)=>{const i=Tc(t,.213+.787*e,.715-.715*e,.072-.072*e,0,.213-.213*e,.715+.285*e,.072-.072*e,0,.213-.213*e,.715-.715*e,.072+.928*e,0,0,0,0,1);return Ec(i,i)},hee=(t,e)=>{const i=1-e,n=Tc(t,.393+.607*i,.769-.769*i,.189-.189*i,0,.349-.349*i,.686+.314*i,.168-.168*i,0,.272-.272*i,.534-.534*i,.131+.869*i,0,0,0,0,1);return Ec(n,n)};let kD=class MD{constructor(e,i,n){this.strength=e,this.radius=i,this.threshold=n,this.type="bloom"}interpolate(e,i,n){this.strength=_n(e.strength,i.strength,n),this.radius=_n(e.radius,i.radius,n),this.threshold=_n(e.threshold,i.threshold,n)}clone(){return new MD(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:Em(this.radius),strength:this.strength,threshold:this.threshold}}},CD=class ID{constructor(e){this.radius=e,this.type="blur"}interpolate(e,i,n){this.radius=Math.round(_n(e.radius,i.radius,n))}clone(){return new ID(this.radius)}toJSON(){return{type:"blur",radius:Em(this.radius)}}},U$=class OD{constructor(e,i){this.type=e,this.amount=i,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,i,n){this.amount=_n(e.amount,i.amount,n),this._updateMatrix()}clone(){return new OD(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const e=this._colorMatrix||X1();switch(this.type){case"brightness":this._colorMatrix=oee(e,this.amount);break;case"contrast":this._colorMatrix=aee(e,this.amount);break;case"grayscale":this._colorMatrix=lee(e,this.amount);break;case"invert":this._colorMatrix=uee(e,this.amount);break;case"saturate":this._colorMatrix=dee(e,this.amount);break;case"sepia":this._colorMatrix=hee(e,this.amount)}}},AD=class LD{constructor(e,i,n,r){this.offsetX=e,this.offsetY=i,this.blurRadius=n,this.color=r,this.type="drop-shadow"}interpolate(e,i,n){this.offsetX=_n(e.offsetX,i.offsetX,n),this.offsetY=_n(e.offsetY,i.offsetY,n),this.blurRadius=_n(e.blurRadius,i.blurRadius,n),this.color[0]=Math.round(_n(e.color[0],i.color[0],n)),this.color[1]=Math.round(_n(e.color[1],i.color[1],n)),this.color[2]=Math.round(_n(e.color[2],i.color[2],n)),this.color[3]=_n(e.color[3],i.color[3],n)}clone(){return new LD(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const e=[...this.color];return e[3]*=255,{type:"drop-shadow",xoffset:Em(this.offsetX),yoffset:Em(this.offsetY),blurRadius:Em(this.blurRadius),color:e}}},PD=class RD{constructor(e){this.angle=e,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,i,n){this.angle=_n(e.angle,i.angle,n),this._updateMatrix()}clone(){return new RD(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const e=this._colorMatrix||X1();this._colorMatrix=cee(e,this.angle)}},ND=class DD{constructor(e){this.amount=e,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(e,i,n){this.amount=_n(e.amount,i.amount,n)}clone(){return new DD(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}};function _n(t,e,i){return t+(e-t)*i}function Em(t){return Math.round(1e3*gc(t))/1e3}function pee(t){switch(t.type){case"grayscale":case"sepia":case"invert":return new U$(t.type,0);case"saturate":case"brightness":case"contrast":return new U$(t.type,1);case"opacity":return new ND(1);case"hue-rotate":return new PD(0);case"blur":return new CD(0);case"drop-shadow":return new AD(0,0,0,[...CE("transparent")]);case"bloom":return new kD(0,0,1)}}function fee(t,e){const i=t.length>e.length?t:e;return(t.length>e.length?e:t).every((n,r)=>n.type===i[r].type)}function mee(t,e){const i=t.length>e.length?t:e,n=t.length>e.length?e:t;for(let r=n.length;r<i.length;r++)n.push(pee(i[r]))}function gee(t){const e=t[0];return!!e&&"type"in e}function yee(t,e){return JSON.stringify(t??null)===JSON.stringify(e??null)}const GI=J.getLogger("esri.support.basemapUtils");function vee(){return{}}function bee(t){for(const e in t){const i=t[e];Oe(i),delete t[e]}}function wee(t,e){let i;if(typeof t=="string"){const n=t in dp,r=!n&&t.includes("/");if(!n&&!r){const s=Object.entries(dp).filter(([o,a])=>Ae.apiKey&&!a.classic||!Ae.apiKey&&(a.classic||a.is3d)).map(([o])=>`"${o}"`).sort().join(", ");return GI.warn(`Unable to find basemap definition for: ${t}. Try one of these: ${s}`),null}e&&(i=e[t]),i||(i=n?rc.fromId(t):new rc({style:{id:t}}),e&&(e[t]=i))}else i=ti(rc,t);return i!=null&&i.destroyed&&(GI.warn("The provided basemap is already destroyed",{basemap:i}),i=null),i}function _ee(t){var e;return((e=t.portalItem)==null?void 0:e.type)==="Web Scene"}function See(t){var e,i;return!!((i=(e=t==null?void 0:t.portalItem)==null?void 0:e.tags)!=null&&i.some(n=>n.toLowerCase()==="beta"))}function lSe(t,e){var i,n,r,s;return((n=(i=t.basemap)==null?void 0:i.referenceLayers)==null?void 0:n.some(o=>o.uid===e))||((s=(r=t.basemap)==null?void 0:r.baseLayers)==null?void 0:s.some(o=>o.uid===e))}function $ee(t){let e=null;const i=H$(t),n=!(i!=null&&i.baseLayers.length);for(const r in dp){const s=zD(i,FD(dp[r]),{mustMatchReferences:n});if(s==="equal"){e=r;break}s==="base-layers-equal"&&(e=r)}return e}function xee(t,e){var i,n;return t===e||((i=t==null?void 0:t.portalItem)==null?void 0:i.id)!=null&&t.portalItem.id===((n=e==null?void 0:e.portalItem)==null?void 0:n.id)?!0:zD(H$(t),H$(e),{mustMatchReferences:!0})==="equal"}function Tee(t,e){var s;if(e==null||t==null)return{spatialReference:null,updating:!1};if(e.loadStatus==="not-loaded")return e.load(),{spatialReference:null,updating:!0};if(e.spatialReference)return{spatialReference:e.spatialReference,updating:!1};if(e.baseLayers.length===0)return{spatialReference:null,updating:!1};const i=e.baseLayers.at(0);switch(i.loadStatus){case"not-loaded":i.load();case"loading":return{spatialReference:null,updating:!0};case"failed":return{spatialReference:null,updating:!1}}const n=(("supportedSpatialReferences"in i?i.supportedSpatialReferences:null)||["tileInfo"in i?(s=i.tileInfo)==null?void 0:s.spatialReference:i.spatialReference]).filter(Boolean),r=t.spatialReference;return r?{spatialReference:n.find(o=>r.equals(o))??n[0]??null,updating:!1}:{spatialReference:n[0],updating:!1}}function H$(t){return t?!t.loaded&&t.resourceInfo?FD(t.resourceInfo.data):{baseLayers:UI(t.baseLayers),referenceLayers:UI(t.referenceLayers)}:null}function UI(t){return(te.isCollection(t)?t.toArray():t).map(Eee)}function Eee(t){var e,i;return{type:t.type,effect:"effect"in t?t.effect:void 0,url:jD("urlTemplate"in t&&t.urlTemplate||t.url||"styleUrl"in t&&t.styleUrl||""),minScale:"minScale"in t&&t.minScale!=null?t.minScale:0,maxScale:"maxScale"in t&&t.maxScale!=null?t.maxScale:0,opacity:t.opacity!=null?t.opacity:1,visible:t.visible==null||!!t.visible,sublayers:t.type!=="map-image"&&t.type!=="wms"||t.sublayers==null||(e=t.sublayers)==null?void 0:e.map(n=>({id:n.id,visible:n.visible})),activeLayerId:t.type==="wmts"?(i=t.activeLayer)==null?void 0:i.id:void 0}}function HI(t){return t.isReference||t.layerType==="ArcGISSceneServiceLayer"}function FD(t){return t?{baseLayers:VI((t.baseMapLayers??[]).filter(e=>!HI(e))),referenceLayers:VI((t.baseMapLayers??[]).filter(e=>HI(e)))}:null}function VI(t){return t.map(e=>kee(e))}function kee(t){let e;switch(t.layerType){case"VectorTileLayer":e="vector-tile";break;case"ArcGISTiledMapServiceLayer":e="tile";break;case"ArcGISSceneServiceLayer":e="scene";break;default:e="unknown"}return{type:e,effect:t.effect,url:jD(t.templateUrl||t.urlTemplate||t.styleUrl||t.url),minScale:t.minScale??0,maxScale:t.maxScale??0,opacity:t.opacity??1,visible:t.visibility==null||!!t.visibility,sublayers:void 0,activeLayerId:void 0}}function zD(t,e,i){return t!=null!=(e!=null)?"not-equal":!t||!e?"equal":BI(t.baseLayers,e.baseLayers)?BI(t.referenceLayers,e.referenceLayers)?"equal":i.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal"}function BI(t,e){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(!Mee(t[i],e[i]))return!1;return!0}function Mee(t,e){if(t.type!==e.type||t.url!==e.url||t.minScale!==e.minScale||t.maxScale!==e.maxScale||t.visible!==e.visible||t.opacity!==e.opacity||!yee(t.effect,e.effect))return!1;if(t.activeLayerId!=null||e.activeLayerId!=null)return t.activeLayerId===e.activeLayerId;if(t.sublayers!=null||e.sublayers!=null){if(t.sublayers==null||e.sublayers==null||t.sublayers.length!==e.sublayers.length)return!1;for(let i=0;i<t.sublayers.length;i++){const n=t.sublayers.at(i),r=e.sublayers.at(i);if((n==null?void 0:n.id)!==(r==null?void 0:r.id)||(n==null?void 0:n.visible)!==(r==null?void 0:r.visible))return!1}}return!0}function jD(t){return t?Ra(t).replace(/^\s*https?:/i,"").toLowerCase():""}function Cee(t){if(!t)return null;const{thumbnailUrl:e}=t;if(e)return e;const i=$ee(t);return i?dp[i].thumbnailUrl:u7(t.baseLayers,Iee)}function Iee(t){var e;return"portalItem"in t?(e=t.portalItem)==null?void 0:e.thumbnailUrl:void 0}function Oee(t){return new Zm({getCollections:()=>[t.tables,t.layers],getChildrenFunction:e=>{const i=[];return"tables"in e&&i.push(e.tables),"layers"in e&&i.push(e.layers),i},itemFilterFunction:e=>{const i=e.parent;return!!i&&"tables"in i&&i.tables.includes(e)}})}function $_(t){for(const e of t.values())e==null||e.destroy();t.clear()}const qI={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function Aee(t){let e=null;if(typeof t=="string")if(t in qI){const i=qI[t];e=new gb({resourceInfo:{data:{layers:[i]}}})}else J.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${t}. Try "world-elevation"`);else e=ti(gb,t);return e}let GD=0;const Td=t=>{let e=class extends t{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+GD++})}};return e=c([S("esri.core.Identifiable")],e),e},AE=t=>{let e=class extends t{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:GD++})}};return e=c([S("esri.core.NumericIdentifiable")],e),e};let WI=class extends Td(class{}){};WI=c([S("esri.core.Identifiable")],WI);async function Lee(t){const e="portalItem"in t?t:{portalItem:t},{fromItem:i}=await V(()=>import("./portalLayers-UpS2HqeU.js").then(n=>n.p),__vite__mapDeps([176,177,178,159]),import.meta.url);try{return await i(e)}catch(n){const r=e&&e.portalItem,s=(r==null?void 0:r.id)||"unset",o=r&&r.portal&&r.portal.url||Ae.portalUrl;throw J.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+o+"', id: '"+s+"')",n),n}}let Pee=0,Bt=class extends An.EventedMixin(Td(As)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new Ve(-180,-90,180,90,xe.WGS84),this.id=Date.now().toString(16)+"-layer-"+Pee++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=xe.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static async fromArcGISServerUrl(e){const i=typeof e=="string"?{url:e}:e;return(await V(()=>import("./arcgisLayers-9jksFGSM.js"),__vite__mapDeps([179,177,180,178]),import.meta.url)).fromUrl(i)}static fromPortalItem(e){return Lee(e)}initialize(){this.when().catch(e=>{en(e)||J.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})})}destroy(){const e=this.parent;if(e){const i=this;"layers"in e&&e.layers.includes(i)?e.layers.remove(i):"tables"in e&&e.tables.includes(i)?e.tables.remove(i):"baseLayers"in e&&e.baseLayers.includes(i)?e.baseLayers.remove(i):"referenceLayers"in e&&e.referenceLayers.includes(i)&&e.referenceLayers.remove(i),this._set("parent",null)}}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){return Gi(this.url)}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await $t(e,{query:{f:"json"},responseType:"json"})).data;throw new F("layer:no-attribution-data","Layer does not have attribution data")}};c([d({type:String})],Bt.prototype,"attributionDataUrl",void 0),c([d({type:Ve})],Bt.prototype,"fullExtent",void 0),c([d({readOnly:!0})],Bt.prototype,"hasAttributionData",null),c([d({type:String,clonable:!1})],Bt.prototype,"id",void 0),c([d({type:Boolean,nonNullable:!0})],Bt.prototype,"legendEnabled",void 0),c([d({type:["show","hide","hide-children"]})],Bt.prototype,"listMode",void 0),c([d({type:Number,range:{min:0,max:1},nonNullable:!0})],Bt.prototype,"opacity",void 0),c([d({clonable:!1})],Bt.prototype,"parent",void 0),c([d({readOnly:!0})],Bt.prototype,"parsedUrl",null),c([d({type:Boolean,readOnly:!0})],Bt.prototype,"persistenceEnabled",void 0),c([d({type:Boolean})],Bt.prototype,"popupEnabled",void 0),c([d({type:Boolean})],Bt.prototype,"attributionVisible",void 0),c([d({type:xe})],Bt.prototype,"spatialReference",void 0),c([d({type:String})],Bt.prototype,"title",void 0),c([d({readOnly:!0,json:{read:!1}})],Bt.prototype,"type",void 0),c([d()],Bt.prototype,"url",void 0),c([d({type:Boolean,nonNullable:!0})],Bt.prototype,"visible",void 0),Bt=c([S("esri.layers.Layer")],Bt);const LE=Bt;function V$(t,e,i){let n,r;if(t)for(let s=0,o=t.length;s<o;s++){if(n=t.at(s),(n==null?void 0:n[e])===i)return n;if((n==null?void 0:n.type)==="group"&&(r=V$(n.layers,e,i),r))return r}}const Ree=t=>{let e=class extends t{constructor(...i){super(...i),this.layers=new te;const n=o=>{o.parent&&"remove"in o.parent&&o.parent.remove(o)},r=o=>{o.parent=this,this.layerAdded(o),o.type!=="elevation"&&o.type!=="base-elevation"||J.getLogger(this).error(`Layer 'title:${o.title}, id:${o.id}' of type '${o.type}' is not supported as an operational layer and will therefore be ignored.`)},s=o=>{o.parent=null,this.layerRemoved(o)};this.addHandles([this.layers.on("before-add",o=>n(o.item)),this.layers.on("after-add",o=>r(o.item)),this.layers.on("after-remove",o=>s(o.item))])}destroy(){const i=this.layers.toArray();for(const n of i)n.destroy();this.layers.destroy()}set layers(i){this._set("layers",ud(i,this._get("layers")))}add(i,n){const r=this.layers;if(n=r.getNextIndex(n),i instanceof LE){const s=i;s.parent===this?this.reorder(s,n):r.add(s,n)}else Za(i)?i.then(s=>{this.destroyed||this.add(s,n)}):J.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(i,n){const r=this.layers;let s=r.getNextIndex(n);i.slice().forEach(o=>{o.parent!==this?(r.add(o,s),s+=1):this.reorder(o,s)})}findLayerById(i){return V$(this.layers,"id",i)}findLayerByUid(i){return V$(this.layers,"uid",i)}remove(i){return this.layers.remove(i)}removeMany(i){return this.layers.removeMany(i)}removeAll(){return this.layers.removeAll()}reorder(i,n){return this.layers.reorder(i,n)}layerAdded(i){}layerRemoved(i){}};return c([d()],e.prototype,"layers",null),e=c([S("esri.support.LayersMixin")],e),e};function B$(t,e,i){if(t)for(let n=0,r=t.length;n<r;n++){const s=t.at(n);if(s[e]===i)return s;if((s==null?void 0:s.type)==="group"){const o=B$(s.tables,e,i);if(o)return o}}}const Nee=t=>{let e=class extends t{constructor(...i){super(...i),this.tables=new te,this.addHandles([this.tables.on("after-add",n=>{const r=n.item;r.parent&&r.parent!==this&&"tables"in r.parent&&r.parent.tables.remove(r),r.parent=this,r.type!=="feature"&&J.getLogger(this).error(`Layer 'title:${r.title}, id:${r.id}' of type '${r.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",n=>{n.item.parent=null})])}destroy(){const i=this.tables.toArray();for(const n of i)n.destroy();this.tables.destroy()}set tables(i){this._set("tables",ud(i,this._get("tables")))}findTableById(i){return B$(this.tables,"id",i)}findTableByUid(i){return B$(this.tables,"uid",i)}};return c([d()],e.prototype,"tables",null),e=c([S("esri.support.TablesMixin")],e),e};let Ys=class extends Nee(Ree(An.EventedMixin(X))){constructor(e){super(e),this.allLayers=new Zm({getCollections:()=>{var i,n,r;return[(i=this.basemap)==null?void 0:i.baseLayers,(n=this.ground)==null?void 0:n.layers,this.layers,(r=this.basemap)==null?void 0:r.referenceLayers]},getChildrenFunction:i=>"layers"in i?i.layers:null}),this.allTables=Oee(this),this.basemap=null,this.editableLayers=new Zm({getCollections:()=>[this.allLayers],itemFilterFunction:dQ}),this.ground=new gb,this._basemapCache=vee()}destroy(){bee(this._basemapCache),this._basemapCache=null,this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.basemap=Oe(this.basemap),Oe(this.ground),this._set("ground",null)}castBasemap(e){return wee(e,this._basemapCache)}castGround(e){return Aee(e)??this._get("ground")}findLayerById(e){return this.allLayers.find(i=>i.id===e)}findTableById(e){return this.allTables.find(i=>i.id===e)}};c([d({readOnly:!0,dependsOn:[]})],Ys.prototype,"allLayers",void 0),c([d({readOnly:!0})],Ys.prototype,"allTables",void 0),c([d({type:rc,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],Ys.prototype,"basemap",void 0),c([zt("basemap")],Ys.prototype,"castBasemap",null),c([d({readOnly:!0})],Ys.prototype,"editableLayers",void 0),c([d({type:gb,nonNullable:!0})],Ys.prototype,"ground",void 0),c([zt("ground")],Ys.prototype,"castGround",null),Ys=c([S("esri.Map")],Ys);const Dee=Ys,ZI={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function x_(t,e,i,n=Co){const r=new Is(vE(n)),s=ye.fromJSDate(t,{zone:r}),o=i==="decades"||i==="centuries"?"year":UD(i);return i==="decades"&&(e*=10),i==="centuries"&&(e*=100),s.plus({[o]:e}).toJSDate()}function KI(t,e,i=Co){const n=new Is(vE(i)),r=ye.fromJSDate(t,{zone:n});if(e==="decades"||e==="centuries"){const o=r.startOf("year"),{year:a}=o,l=a-a%(e==="decades"?10:100);return o.set({year:l}).toJSDate()}const s=UD(e);return r.startOf(s).toJSDate()}function hSe(t,e,i){return t===0?0:t*ZI[e]/ZI[i]}function Fee(t,e){return t&&e?t.intersection(e):t||e}function UD(t){switch(t){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}var Xr;let Bn=Xr=class extends ie{static get allTime(){return JI}static get empty(){return zee}constructor(t){super(t),this.end=null,this.start=null}readEnd(t,e){return e.end!=null?new Date(e.end):null}writeEnd(t,e){e.end=(t==null?void 0:t.getTime())??null}get isAllTime(){return this.equals(Xr.allTime)}get isEmpty(){return this.equals(Xr.empty)}readStart(t,e){return e.start!=null?new Date(e.start):null}writeStart(t,e){e.start=(t==null?void 0:t.getTime())??null}clone(){return new Xr({end:this.end,start:this.start})}equals(t){var s,o,a,l;if(!t)return!1;const e=((s=this.start)==null?void 0:s.getTime())??this.start,i=((o=this.end)==null?void 0:o.getTime())??this.end,n=((a=t.start)==null?void 0:a.getTime())??t.start,r=((l=t.end)==null?void 0:l.getTime())??t.end;return e===n&&i===r}expandTo(t,e=Co){if(this.isEmpty||this.isAllTime)return this.clone();let i=this.start;i&&(i=KI(i,t,e));let n=this.end;if(n){const r=KI(n,t,e);n=n.getTime()===r.getTime()?r:x_(r,1,t,e)}return new Xr({start:i,end:n})}intersection(t){var a,l,u,p;if(!t)return this.clone();if(this.isEmpty||t.isEmpty)return Xr.empty;if(this.isAllTime)return t.clone();if(t.isAllTime)return this.clone();const e=((a=this.start)==null?void 0:a.getTime())??-1/0,i=((l=this.end)==null?void 0:l.getTime())??1/0,n=((u=t.start)==null?void 0:u.getTime())??-1/0,r=((p=t.end)==null?void 0:p.getTime())??1/0;let s,o;if(n>=e&&n<=i?s=n:e>=n&&e<=r&&(s=e),i>=n&&i<=r?o=i:r>=e&&r<=i&&(o=r),s!=null&&o!=null&&!isNaN(s)&&!isNaN(o)){const f=new Xr;return f.start=s===-1/0?null:new Date(s),f.end=o===1/0?null:new Date(o),f}return Xr.empty}offset(t,e,i=Co){if(this.isEmpty||this.isAllTime)return this.clone();const n=new Xr,{start:r,end:s}=this;return r!=null&&(n.start=x_(r,t,e,i)),s!=null&&(n.end=x_(s,t,e,i)),n}union(t){if(!t||t.isEmpty)return this.clone();if(this.isEmpty)return t.clone();if(this.isAllTime||t.isAllTime)return JI.clone();const e=this.start!=null&&t.start!=null?new Date(Math.min(this.start.getTime(),t.start.getTime())):null,i=this.end!=null&&t.end!=null?new Date(Math.max(this.end.getTime(),t.end.getTime())):null;return new Xr({start:e,end:i})}};c([d({type:Date,json:{write:{allowNull:!0}}})],Bn.prototype,"end",void 0),c([Ne("end")],Bn.prototype,"readEnd",null),c([Ie("end")],Bn.prototype,"writeEnd",null),c([d({readOnly:!0,json:{read:!1}})],Bn.prototype,"isAllTime",null),c([d({readOnly:!0,json:{read:!1}})],Bn.prototype,"isEmpty",null),c([d({type:Date,json:{write:{allowNull:!0}}})],Bn.prototype,"start",void 0),c([Ne("start")],Bn.prototype,"readStart",null),c([Ie("start")],Bn.prototype,"writeStart",null),Bn=Xr=c([S("esri.TimeExtent")],Bn);const JI=new Bn,zee=new Bn({start:void 0,end:void 0}),PE=Bn;let km=class extends te{constructor(e){super(e),this.addHandles([this.on("before-add",i=>{i.item==null&&i.preventDefault()}),this.on("after-add",i=>this._own(i.item)),this.on("after-remove",i=>this._release(i.item))])}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(te.ofType(this.itemType.Type))(e):new te(e)}};function q$(t,e){return{type:t,cast:sD,set(i){const n=ud(i,this._get(e),t);n.owner=this,this._set(e,n)}}}c([d()],km.prototype,"owner",null),km=c([S("esri.core.support.OwningCollection")],km);var If;const yb=sn()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),HD=yb.jsonValues.slice();$L(HD,"orthometric");const Mm=sn()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let Qr=If=class extends ie{constructor(t){super(t),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(t,e,i){return yb.write(t,e,i)}readHeightModel(t,e,i){return yb.read(t)||(i!=null&&i.messages&&i.messages.push(jee(t,{context:i})),null)}readHeightUnit(t,e,i){return Mm.read(t)||(i!=null&&i.messages&&i.messages.push(YI(t,{context:i})),null)}readHeightUnitService(t,e,i){return nR(t)||Mm.read(t)||(i!=null&&i.messages&&i.messages.push(YI(t,{context:i})),null)}readVertCRS(t,e){return e.vertCRS||e.ellipsoid||e.geoid}clone(){return new If({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(t){return!!t&&(this===t||this.heightModel===t.heightModel&&this.heightUnit===t.heightUnit&&this.vertCRS===t.vertCRS)}static deriveUnitFromSR(t,e){const i=rR(e);return new If({heightModel:t.heightModel,heightUnit:i,vertCRS:t.vertCRS})}write(t,e){return e={origin:"web-scene",...e},super.write(t,e)}static fromJSON(t){if(!t)return null;const e=new If;return e.read(t,{origin:"web-scene"}),e}};function YI(t,e){return new Ga("height-unit:unsupported",`Height unit of value '${t}' is not supported`,e)}function jee(t,e){return new Ga("height-model:unsupported",`Height model of value '${t}' is not supported`,e)}c([d({type:yb.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:HD,default:"ellipsoidal"}}}})],Qr.prototype,"heightModel",void 0),c([Ie("web-scene","heightModel")],Qr.prototype,"writeHeightModel",null),c([Ne(["web-scene","service"],"heightModel")],Qr.prototype,"readHeightModel",null),c([d({type:Mm.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:Mm.jsonValues,write:Mm.write}}}})],Qr.prototype,"heightUnit",void 0),c([Ne("web-scene","heightUnit")],Qr.prototype,"readHeightUnit",null),c([Ne("service","heightUnit")],Qr.prototype,"readHeightUnitService",null),c([d({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],Qr.prototype,"vertCRS",void 0),c([Ne("service","vertCRS",["vertCRS","ellipsoid","geoid"])],Qr.prototype,"readVertCRS",null),Qr=If=c([S("esri.geometry.HeightModelInfo")],Qr);const ew=Qr;let vb=class extends km{constructor(e){super(e),this.addHandles(this.on("before-add",i=>{i.item!=null&&i.item.parent===this.owner&&(J.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),i.preventDefault())}))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};vb=c([S("esri.support.AnalysesCollection")],vb);async function Gee(t,e){const{WhereClause:i}=await V(()=>import("./WhereClause-apv-PO0T.js").then(n=>n.W),__vite__mapDeps([24,25,26]),import.meta.url);return i.create(t,e)}function RE(t,e){return t!=null?e!=null?`(${t}) AND (${e})`:t:e}function zd(t){return typeof t=="string"||t instanceof String}const Uee="yyyy-MM-dd",Hee="TT";var Cm;(function(t){t.HM="HH:mm",t.HMS="HH:mm:ss",t.HMS_MS="HH:mm:ss.SSS"})(Cm||(Cm={}));const Vee=[Cm.HMS_MS,Cm.HMS,Cm.HM,Hee];function XI(t){return ye.fromFormat(t,Uee)}function QI(t){let e=null;return Vee.find(i=>(e=ye.fromFormat(t,i),e.isValid)),e}function eO(t){return ye.fromISO(t)}var hp;(function(t){t.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",t.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(hp||(hp={}));const Bee=new Set(["integer","small-integer","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"]);function qee(t){return t!=null&&Bee.has(t.type)}function VD(t){return t!=null&&(t.type==="date-only"||t.type==="esriFieldTypeDateOnly")}function BD(t){return t!=null&&(t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset")}function qD(t){return t!=null&&(t.type==="time-only"||t.type==="esriFieldTypeTimeOnly")}function Wee(t,e){const i=t==null?void 0:t.domain;if(!i)return null;switch(i.type){case"range":{const{min:n,max:r}=Zee(t);if(n!=null&&+e<n||r!=null&&+e>r)return hp.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(i.codedValues==null||i.codedValues.every(n=>n==null||n.code!==e))return hp.INVALID_CODED_VALUE}return null}function Zee(t,e){const i=e??(t==null?void 0:t.domain);if(!i||i.type!=="range")return;const n="range"in i?i.range[0]:i.minValue,r="range"in i?i.range[1]:i.maxValue,s=qee(t);return VD(t)||qD(t)||BD(t)?{...Kee(t,r,n),isInteger:s}:{min:n!=null&&typeof n=="number"?n:null,max:r!=null&&typeof r=="number"?r:null,rawMin:n,rawMax:r,isInteger:s}}function Kee(t,e,i){return VD(t)?{min:i!=null&&zd(i)?XI(i).toMillis():null,max:e!=null&&zd(e)?XI(e).toMillis():null,rawMin:i,rawMax:e}:qD(t)?{min:i!=null&&zd(i)?QI(i).toMillis():null,max:e!=null&&zd(e)?QI(e).toMillis():null,rawMin:i,rawMax:e}:BD(t)?{min:i!=null&&zd(i)?eO(i).toMillis():null,max:e!=null&&zd(e)?eO(e).toMillis():null,rawMin:i,rawMax:e}:{max:null,min:null}}const Jee=J.getLogger("esri.support.arcadeOnDemand");let T_;function WD(){return T_||(T_=(async()=>{const t=await V(()=>import("./arcadeUtils-00qTnDg6.js").then(e=>e.aD),__vite__mapDeps([181,25,26,30,15,12,16,13,29]),import.meta.url);return{arcade:t.arcade,arcadeUtils:t,Dictionary:t.Dictionary,Feature:t.arcadeFeature}})()),T_}const mSe=(t,e,i)=>NE.create(t,e,i,null,["$feature","$view"],[]),gSe=(t,e,i)=>NE.create(t,e,i,null,["$feature","$view"],[]),ySe=(t,e,i,n)=>NE.create(t,e,i,n,["$feature","$view"],[]);let NE=class ZD{constructor(e,i,n,r,s,o,a){this.services=null,this.script=e,this.evaluate=r;const l=Array.isArray(o)?o:o.fields;this.fields=l,this._syntaxTree=n,this._arcade=i,this._arcadeFeature=s,this._spatialReference=a,this._referencesGeometry=i.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(e,i,n,r,s,o){const{arcade:a,Feature:l,Dictionary:u}=await WD(),p=xe.fromJSON(i);let f;try{f=a.parseScript(e,o)}catch(G){return Jee.error(new F("arcade-bad-expression","Failed to parse arcade script",{script:e,error:G})),null}const m=s.reduce((G,U)=>({...G,[U]:null}),{});let g=null;r!=null&&(g=new u(r),g.immutable=!0,m.$config=null);const y=a.scriptUsesGeometryEngine(f),v=y&&a.enableGeometrySupport(),b=a.scriptUsesFeatureSet(f)&&a.enableFeatureSetSupport(),_=a.scriptIsAsync(f),$=_&&a.enableAsyncSupport(),x={vars:m,spatialReference:p,useAsync:!!$};await Promise.all([v,b,$]);const E=new Set;await a.loadDependentModules(E,f,null,_,y);const C=new u;C.immutable=!1,C.setField("scale",0);const M=a.compileScript(f,x),N=(G,U)=>{var H;const B=(H=G.$view)==null?void 0:H.timeZone;return"$view"in G&&G.$view&&(C.setField("scale",typeof G.$view=="object"&&"scale"in G.$view?G.$view.scale:void 0),G.$view=C),g&&(G.$config=g),M({vars:G,spatialReference:p,services:U,timeZone:B})};return new ZD(e,a,f,N,new l,n,p)}repurposeFeature(e){return e.geometry&&!e.geometry.spatialReference&&(e.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(e.geometry,e.attributes,{fields:this.fields}),this._arcadeFeature}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}};const Yee=/^([0-9_])/,Xee=/[^a-z0-9_\u0080-\uffff]+/gi;function vSe(t){return t==null?null:t.trim().replaceAll(Xee,"_").replace(Yee,"F$1")||null}const Qee=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],ete=["field","normalizationField"];function bSe(t,e){if(t!=null&&e!=null){for(const i of Array.isArray(t)?t:[t])if(tO(Qee,i,e),"visualVariables"in i&&i.visualVariables)for(const n of i.visualVariables)tO(ete,n,e)}}function tO(t,e,i){if(t)for(const n of t){const r=bg(n,e),s=r&&typeof r!="function"&&i.get(r);s&&wd(n,s.name,e)}}function wSe(t,e){var i;if(t!=null&&((i=e==null?void 0:e.fields)!=null&&i.length))if("startField"in t){const n=e.get(t.startField),r=e.get(t.endField);t.startField=(n==null?void 0:n.name)??null,t.endField=(r==null?void 0:r.name)??null}else{const n=e.get(t.startTimeField),r=e.get(t.endTimeField);t.startTimeField=(n==null?void 0:n.name)??null,t.endTimeField=(r==null?void 0:r.name)??null}}const E_=new Set;function KD(t,e){return t&&e?(E_.clear(),ng(E_,t,e),Array.from(E_).sort()):[]}function ng(t,e,i){var n;if(i)if((n=e==null?void 0:e.fields)!=null&&n.length)if(i.includes("*"))for(const{name:r}of e.fields)t.add(r);else for(const r of i)tw(t,e,r);else{if(i.includes("*"))return t.clear(),void t.add("*");for(const r of i)r!=null&&t.add(r)}}function tw(t,e,i){if(typeof i=="string")if(e){const n=e.get(i);n&&t.add(n.name)}else t.add(i)}function _Se(t,e){return e==null||t==null?[]:e.includes("*")?(t.fields??[]).map(i=>i.name):e}async function yc(t,e,i){var s;if(!i)return;const{arcadeUtils:n}=await WD(),r=n.extractFieldNames(i,(s=e==null?void 0:e.fields)==null?void 0:s.map(o=>o.name));for(const o of r)tw(t,e,o)}async function JD(t,e,i){if(i&&i!=="1=1"){const n=await Gee(i,e);if(!n.isStandardized)throw new F("fieldUtils:collectFilterFields","Where clause is not standardized",{where:i});ng(t,e,n.fieldNames)}}function tte({displayField:t,fields:e}){return t||(e!=null&&e.length?k_(e,"name-or-title")||k_(e,"unique-identifier")||k_(e,"type-or-category")||ite(e):null)}function ite(t){for(const e of t){if(!(e!=null&&e.name))continue;const i=e.name.toLowerCase();if(i.includes("name")||i.includes("title"))return e.name}return null}function k_(t,e){for(const i of t)if(i!=null&&i.valueType&&i.valueType===e)return i.name;return null}async function SSe(t,e){var n;if(!e)return;const i=(n=e.elevationInfo)==null?void 0:n.featureExpressionInfo;return i?i.collectRequiredFields(t,e.fieldsIndex):void 0}function nte(t,e,i){i.onStatisticExpression?yc(t,e,i.onStatisticExpression.expression):t.add(i.onStatisticField)}async function $Se(t,e,i){if(!e||!i||!("fields"in i))return;const n=[],r=i.popupTemplate;n.push(rte(t,e,r)),i.fields&&n.push(...i.fields.map(async s=>nte(t,e.fieldsIndex,s))),await Promise.all(n)}async function rte(t,e,i){const n=[];i!=null&&i.expressionInfos&&n.push(...i.expressionInfos.map(s=>yc(t,e.fieldsIndex,s.expression)));const r=i==null?void 0:i.content;if(Array.isArray(r))for(const s of r)s.type==="expression"&&s.expressionInfo&&n.push(yc(t,e.fieldsIndex,s.expressionInfo.expression));await Promise.all(n)}async function xSe(t,e,i){e&&(e.timeInfo&&(i!=null&&i.timeExtent)&&ng(t,e.fieldsIndex,[e.timeInfo.startField,e.timeInfo.endField]),e.floorInfo&&ng(t,e.fieldsIndex,[e.floorInfo.floorField]),(i==null?void 0:i.where)!=null&&await JD(t,e.fieldsIndex,i.where))}async function TSe(t,e,i){e&&i&&await Promise.all(i.map(n=>ste(t,e,n)))}async function ste(t,e,i){e&&i&&(i.valueExpression?await yc(t,e.fieldsIndex,i.valueExpression):i.field&&tw(t,e.fieldsIndex,i.field))}function ESe(t){return t?KD(t.fieldsIndex,YD(t)):[]}function ote(t){if(!t)return[];const e=t.geometryFieldsInfo;return e?KD(t.fieldsIndex,[e.shapeAreaField,e.shapeLengthField]):[]}const ate=new Set(["oid","global-id","guid"]),lte=new Set(["oid","global-id"]),cte=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,/objectid/i,/_i$/i];function ute(t){const e=new Set;XD(t).forEach(n=>e.add(n)),ote(t).forEach(n=>e.add(n.toLowerCase()));const i=t&&"infoFor3D"in t?t.infoFor3D:void 0;return i&&(Object.values(i.assetMapFieldRoles).forEach(n=>e.add(n.toLowerCase())),Object.values(i.transformFieldRoles).forEach(n=>e.add(n.toLowerCase()))),Array.from(e)}function YD(t){if(!t)return[];const e="editFieldsInfo"in t&&t.editFieldsInfo;if(!e)return[];const{creationDateField:i,creatorField:n,editDateField:r,editorField:s}=e;return[i,n,r,s].filter(Boolean)}function XD(t){return YD(t).map(e=>e.toLowerCase())}function kSe(t,e){var i;return t.editable&&!ate.has(t.type)&&!XD(e).includes(((i=t.name)==null?void 0:i.toLowerCase())??"")}function MSe(t,e){var n;const i=((n=t.name)==null?void 0:n.toLowerCase())??"";return!((e==null?void 0:e.objectIdField)!=null&&i===e.objectIdField.toLowerCase()||(e==null?void 0:e.globalIdField)!=null&&i===e.globalIdField.toLowerCase()||ute(e).includes(i)||lte.has(t.type)||cte.some(r=>r.test(i)))}async function CSe(t,e){const{labelingInfo:i,fieldsIndex:n}=e;i!=null&&i.length&&await Promise.all(i.map(r=>dte(t,n,r)))}async function dte(t,e,i){if(!i)return;const n=i.getLabelExpression(),r=i.where;if(n.type==="arcade")await yc(t,e,n.expression);else{const s=n.expression.match(/{[^}]*}/g);s&&s.forEach(o=>{tw(t,e,o.slice(1,-1))})}await JD(t,e,r)}function ISe(t){const e=t.defaultValue;return e!==void 0&&t4(t,e)?e:t.nullable?null:void 0}function OSe(t){const e=typeof t=="string"?{type:t}:t;return xte(e)?255:e.type==="esriFieldTypeDate"||e.type==="date"?8:void 0}function QD(t){return typeof t=="number"&&!isNaN(t)&&isFinite(t)}function hte(t){return t===null||QD(t)}function pte(t){return t===null||Number.isInteger(t)}function e4(t){return t!=null&&typeof t=="string"}function fte(t){return t===null||e4(t)}function mte(){return!0}function t4(t,e){let i;switch(t.type){case"date":case"integer":case"long":case"small-integer":case"big-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":case"esriFieldTypeBigInteger":i=t.nullable?pte:Number.isInteger;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=t.nullable?hte:QD;break;case"string":case"esriFieldTypeString":i=t.nullable?fte:e4;break;default:i=mte}return arguments.length===1?i:i(e)}const gte=["integer","small-integer","big-integer"],yte=["single","double"],vte=["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"],bte=["esriFieldTypeSingle","esriFieldTypeDouble"],wte=new Set([...gte,...vte]),_te=new Set([...yte,...bte]),Ste=J7(wte,_te);function $te(t){return t!=null&&Ste.has(t.type)}function xte(t){return t!=null&&(t.type==="string"||t.type==="esriFieldTypeString")}function ASe(t){return t!=null&&(t.type==="date"||t.type==="esriFieldTypeDate")}function LSe(t){return t!=null&&(t.type==="date-only"||t.type==="esriFieldTypeDateOnly")}function PSe(t){return t!=null&&(t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset")}function RSe(t){return t!=null&&(t.type==="time-only"||t.type==="esriFieldTypeTimeOnly")}function NSe(t){return t!=null&&(t.type==="oid"||t.type==="esriFieldTypeOID")}function DSe(t){return t!=null&&(t.type==="global-id"||t.type==="esriFieldTypeGlobalID")}function FSe(t,e){return Tte(t,e)===null}var bb,wb;function zSe(t){return t==null||typeof t=="number"&&isNaN(t)?null:t}function Tte(t,e){return t==null||t.nullable&&e===null?null:$te(t)&&!Ete(t.type,Number(e))?bb.OUT_OF_RANGE:t4(t,e)?t.domain?Wee(t,e):null:wb.INVALID_TYPE}function Ete(t,e){const i=typeof t=="string"?i4(t):t;if(!i)return!1;const n=i.min,r=i.max;return i.isInteger?Number.isInteger(e)&&e>=n&&e<=r:e>=n&&e<=r}function i4(t){switch(t){case"esriFieldTypeSmallInteger":case"small-integer":return kte;case"esriFieldTypeInteger":case"integer":return Mte;case"esriFieldTypeBigInteger":case"big-integer":return Cte;case"esriFieldTypeSingle":case"single":return Ite;case"esriFieldTypeDouble":case"double":return Ote}}(function(t){t.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(bb||(bb={})),function(t){t.INVALID_TYPE="type-validation-error::invalid-type"}(wb||(wb={}));const kte={min:-32768,max:32767,isInteger:!0,rawMin:-32768,rawMax:32767},Mte={min:-2147483648,max:2147483647,isInteger:!0,rawMin:-2147483648,rawMax:2147483647},Cte={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0,rawMin:-Number.MAX_SAFE_INTEGER,rawMax:Number.MAX_SAFE_INTEGER},Ite={min:-34e37,max:12e37,isInteger:!1,rawMin:-34e37,rawMax:12e37},Ote={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1,rawMin:-Number.MAX_VALUE,rawMax:Number.MAX_VALUE};function jSe(t,e,i){switch(t){case hp.INVALID_CODED_VALUE:return`Value ${i} is not in the coded domain - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case hp.VALUE_OUT_OF_RANGE:return`Value ${i} is out of the range of valid values - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case wb.INVALID_TYPE:return`Value ${i} is not a valid value for the field type - field: ${e.name}, type: ${e.type}, nullable: ${e.nullable}`;case bb.OUT_OF_RANGE:{const{min:n,max:r}=i4(e.type);return`Value ${i} is out of range for the number type - field: ${e.name}, type: ${e.type}, value range is ${n} to ${r}`}}}function GSe(t,e){return!Ate(t,e,null)}function Ate(t,e,i){if(!(e!=null&&e.attributes)||!t){if(i!=null)for(const s of t??[])i.add(s);return!0}const n=new Set(Object.keys(e.attributes));let r=!1;for(const s of t)if(!n.has(s)){if(r=!0,i==null)break;i.add(s)}return r}function USe(t){return!!t&&["raster.itempixelvalue","raster.servicepixelvalue"].some(e=>t.toLowerCase().startsWith(e))}let J0=class extends ie{constructor(e){super(e),this.type=null}};c([d({type:["attachments","custom","fields","media","text","expression","relationship"],readOnly:!0,json:{read:!1,write:!0}})],J0.prototype,"type",void 0),J0=c([S("esri.popup.content.Content")],J0);const kc=J0;var W$;let Xc=W$=class extends kc{constructor(t){super(t),this.description=null,this.displayType="auto",this.title=null,this.type="attachments"}clone(){return new W$({description:this.description,displayType:this.displayType,title:this.title})}};c([d({type:String,json:{write:!0}})],Xc.prototype,"description",void 0),c([d({type:["auto","preview","list"],json:{write:!0}})],Xc.prototype,"displayType",void 0),c([d({type:String,json:{write:!0}})],Xc.prototype,"title",void 0),c([d({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],Xc.prototype,"type",void 0),Xc=W$=c([S("esri.popup.content.AttachmentsContent")],Xc);const _b=Xc;var Z$;let Qc=Z$=class extends kc{constructor(t){super(t),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new Z$({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?q(this.outFields):null})}};c([d()],Qc.prototype,"creator",void 0),c([d()],Qc.prototype,"destroyer",void 0),c([d()],Qc.prototype,"outFields",void 0),c([d({type:["custom"],readOnly:!0})],Qc.prototype,"type",void 0),Qc=Z$=c([S("esri.popup.content.CustomContent")],Qc);const Lte=Qc;var K$;let th=K$=class extends ie{constructor(t){super(t),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new K$({title:this.title,expression:this.expression})}};c([d({type:String,json:{write:!0}})],th.prototype,"title",void 0),c([d({type:String,json:{write:!0}})],th.prototype,"expression",void 0),c([d({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],th.prototype,"returnType",void 0),th=K$=c([S("esri.popup.ElementExpressionInfo")],th);const Pte=th;var J$;let Of=J$=class extends kc{constructor(t){super(t),this.expressionInfo=null,this.type="expression"}clone(){var t;return new J$({expressionInfo:(t=this.expressionInfo)==null?void 0:t.clone()})}};c([d({type:Pte,json:{write:!0}})],Of.prototype,"expressionInfo",void 0),c([d({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],Of.prototype,"type",void 0),Of=J$=c([S("esri.popup.content.ExpressionContent")],Of);const DE=Of;let ih=class extends No(ie){constructor(e){super(e),this.dateFormat=null,this.digitSeparator=!1,this.places=null}};c([me(MK)],ih.prototype,"dateFormat",void 0),c([d({type:Boolean,json:{write:!0}})],ih.prototype,"digitSeparator",void 0),c([d({type:Et,json:{write:!0}})],ih.prototype,"places",void 0),ih=c([S("esri.popup.support.FieldInfoFormat")],ih);const Rte=ih;var Y$;let es=Y$=class extends ie{constructor(t){super(t),this.fieldName=null,this.format=null,this.isEditable=!0,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){return new Y$({fieldName:this.fieldName,format:this.format?q(this.format):null,isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};c([d({type:String,json:{write:!0}})],es.prototype,"fieldName",void 0),c([d({type:Rte,json:{write:!0}})],es.prototype,"format",void 0),c([d({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],es.prototype,"isEditable",void 0),c([d({type:String,json:{write:!0}})],es.prototype,"label",void 0),c([me(new Kt({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],es.prototype,"stringFieldOption",void 0),c([d({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],es.prototype,"statisticType",void 0),c([d({type:String,json:{write:!0}})],es.prototype,"tooltip",void 0),c([d({type:Boolean,json:{write:!0}})],es.prototype,"visible",void 0),es=Y$=c([S("esri.popup.FieldInfo")],es);const n4=es;var X$;let ua=X$=class extends kc{constructor(t){super(t),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(t,e){e.fieldInfos=t&&t.map(i=>i.toJSON())}clone(){return new X$(q({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};c([d({type:Object,json:{write:!0}})],ua.prototype,"attributes",void 0),c([d({type:String,json:{write:!0}})],ua.prototype,"description",void 0),c([d({type:[n4]})],ua.prototype,"fieldInfos",void 0),c([Ie("fieldInfos")],ua.prototype,"writeFieldInfos",null),c([d({type:String,json:{write:!0}})],ua.prototype,"title",void 0),c([d({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],ua.prototype,"type",void 0),ua=X$=c([S("esri.popup.content.FieldsContent")],ua);const Sb=ua;let eu=class extends ie{constructor(e){super(e),this.altText=null,this.caption="",this.title="",this.type=null}};c([d({type:String,json:{write:!0}})],eu.prototype,"altText",void 0),c([d({type:String,json:{write:!0}})],eu.prototype,"caption",void 0),c([d({type:String,json:{write:!0}})],eu.prototype,"title",void 0),c([d({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],eu.prototype,"type",void 0),eu=c([S("esri.popup.content.mixins.MediaInfo")],eu);const FE=eu;var Q$;let tu=Q$=class extends X{constructor(t){super(t),this.color=null,this.fieldName=null,this.tooltip=null,this.value=null}clone(){return new Q$({fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};c([d()],tu.prototype,"color",void 0),c([d()],tu.prototype,"fieldName",void 0),c([d()],tu.prototype,"tooltip",void 0),c([d()],tu.prototype,"value",void 0),tu=Q$=c([S("esri.popup.content.support.ChartMediaInfoValueSeries")],tu);const Nte=tu;var ex;let bl=ex=class extends ie{constructor(t){super(t),this.colors=null,this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new ex({colors:q(this.colors),fields:q(this.fields),normalizeField:this.normalizeField,tooltipField:this.tooltipField})}};c([d({type:[Me],json:{type:[[Et]],write:!0}})],bl.prototype,"colors",void 0),c([d({type:[String],json:{write:!0}})],bl.prototype,"fields",void 0),c([d({type:String,json:{write:!0}})],bl.prototype,"normalizeField",void 0),c([d({type:[Nte],json:{read:!1}})],bl.prototype,"series",void 0),c([d({type:String,json:{write:!0}})],bl.prototype,"tooltipField",void 0),bl=ex=c([S("esri.popup.content.support.ChartMediaInfoValue")],bl);const Dte=bl;let Af=class extends FE{constructor(e){super(e),this.type=null,this.value=null}};c([d({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],Af.prototype,"type",void 0),c([d({type:Dte,json:{write:!0}})],Af.prototype,"value",void 0),Af=c([S("esri.popup.content.mixins.ChartMediaInfo")],Af);const iw=Af,nw=sn()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var tx;let Y0=tx=class extends iw{constructor(t){super(t),this.type="bar-chart"}clone(){return new tx({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};c([d({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:nw.write}})],Y0.prototype,"type",void 0),Y0=tx=c([S("esri.popup.content.BarChartMediaInfo")],Y0);const r4=Y0;var ix;let X0=ix=class extends iw{constructor(t){super(t),this.type="column-chart"}clone(){return new ix({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};c([d({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:nw.write}})],X0.prototype,"type",void 0),X0=ix=c([S("esri.popup.content.ColumnChartMediaInfo")],X0);const s4=X0;var nx;let Lf=nx=class extends ie{constructor(t){super(t),this.linkURL=null,this.sourceURL=null}clone(){return new nx({linkURL:this.linkURL,sourceURL:this.sourceURL})}};c([d({type:String,json:{write:!0}})],Lf.prototype,"linkURL",void 0),c([d({type:String,json:{write:!0}})],Lf.prototype,"sourceURL",void 0),Lf=nx=c([S("esri.popup.content.support.ImageMediaInfoValue")],Lf);const Fte=Lf;var rx;let nh=rx=class extends FE{constructor(t){super(t),this.refreshInterval=null,this.type="image",this.value=null}clone(){return new rx({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})}};c([d({type:Number,json:{write:!0}})],nh.prototype,"refreshInterval",void 0),c([d({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],nh.prototype,"type",void 0),c([d({type:Fte,json:{write:!0}})],nh.prototype,"value",void 0),nh=rx=c([S("esri.popup.content.ImageMediaInfo")],nh);const o4=nh;var sx;let Q0=sx=class extends iw{constructor(t){super(t),this.type="line-chart"}clone(){return new sx({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};c([d({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:nw.write}})],Q0.prototype,"type",void 0),Q0=sx=c([S("esri.popup.content.LineChartMediaInfo")],Q0);const a4=Q0;var ox;let ev=ox=class extends iw{constructor(t){super(t),this.type="pie-chart"}clone(){return new ox({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};c([d({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:nw.write}})],ev.prototype,"type",void 0),ev=ox=c([S("esri.popup.content.PieChartMediaInfo")],ev);const l4=ev,c4={base:FE,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":r4,"column-chart":s4,"line-chart":a4,"pie-chart":l4,image:o4}};var ax;let ts=ax=class extends kc{constructor(t){super(t),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(t){return t&&t.map(e=>e.type==="image"?o4.fromJSON(e):e.type==="barchart"?r4.fromJSON(e):e.type==="columnchart"?s4.fromJSON(e):e.type==="linechart"?a4.fromJSON(e):e.type==="piechart"?l4.fromJSON(e):void 0).filter(Boolean)}writeMediaInfos(t,e){e.mediaInfos=t&&t.map(i=>i.toJSON())}clone(){return new ax(q({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};c([d()],ts.prototype,"activeMediaInfoIndex",void 0),c([d({type:Object,json:{write:!0}})],ts.prototype,"attributes",void 0),c([d({type:String,json:{write:!0}})],ts.prototype,"description",void 0),c([d({types:[c4]})],ts.prototype,"mediaInfos",void 0),c([Ne("mediaInfos")],ts.prototype,"readMediaInfos",null),c([Ie("mediaInfos")],ts.prototype,"writeMediaInfos",null),c([d({type:String,json:{write:!0}})],ts.prototype,"title",void 0),c([d({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],ts.prototype,"type",void 0),ts=ax=c([S("esri.popup.content.MediaContent")],ts);const $b=ts;var lx;let Pf=lx=class extends ie{constructor(t){super(t),this.field=null,this.order=null}clone(){return new lx({field:this.field,order:this.order})}};c([d({type:String,json:{write:!0}})],Pf.prototype,"field",void 0),c([d({type:["asc","desc"],json:{write:!0}})],Pf.prototype,"order",void 0),Pf=lx=c([S("esri.popup.support.RelatedRecordsInfoFieldOrder")],Pf);const u4=Pf;let Xs=class extends No(kc){constructor(e){super(e),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};c([d({type:String,json:{write:!0}})],Xs.prototype,"description",void 0),c([d({type:Number,json:{type:Et,write:!0}})],Xs.prototype,"displayCount",void 0),c([d({type:["list"],json:{write:!0}})],Xs.prototype,"displayType",void 0),c([d({type:[u4],json:{write:!0}})],Xs.prototype,"orderByFields",void 0),c([d({type:Number,json:{type:Et,write:!0}})],Xs.prototype,"relationshipId",void 0),c([d({type:String,json:{write:!0}})],Xs.prototype,"title",void 0),c([d({type:["relationship"],readOnly:!0,json:{read:!1,write:!0}})],Xs.prototype,"type",void 0),Xs=c([S("esri.popup.content.RelationshipContent")],Xs);const xb=Xs;var cx;let Rf=cx=class extends kc{constructor(t){super(t),this.text=null,this.type="text"}clone(){return new cx({text:this.text})}};c([d({type:String,json:{write:!0}})],Rf.prototype,"text",void 0),c([d({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],Rf.prototype,"type",void 0),Rf=cx=c([S("esri.popup.content.TextContent")],Rf);const Tb=Rf,zte={base:null,key:"type",typeMap:{attachment:_b,media:$b,text:Tb,expression:DE,field:Sb,relationship:xb}};var ux;let iu=ux=class extends ie{constructor(t){super(t),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new ux({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};c([d({type:String,json:{write:!0}})],iu.prototype,"name",void 0),c([d({type:String,json:{write:!0}})],iu.prototype,"title",void 0),c([d({type:String,json:{write:!0}})],iu.prototype,"expression",void 0),c([d({type:["string","number"],json:{write:!0}})],iu.prototype,"returnType",void 0),iu=ux=c([S("esri.popup.ExpressionInfo")],iu);const jte=iu;var dx;let Nf=dx=class extends ie{constructor(t){super(t),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new dx({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};c([d({type:Boolean,json:{write:!0}})],Nf.prototype,"returnTopmostRaster",void 0),c([d({type:Boolean,json:{write:!0}})],Nf.prototype,"showNoDataRecords",void 0),Nf=dx=c([S("esri.popup.LayerOptions")],Nf);const Gte=Nf;var hx;let Df=hx=class extends ie{constructor(t){super(t),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new hx({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?q(this.orderByFields):null})}};c([d({type:Boolean,json:{write:!0}})],Df.prototype,"showRelatedRecords",void 0),c([d({type:[u4],json:{write:!0}})],Df.prototype,"orderByFields",void 0),Df=hx=c([S("esri.popup.RelatedRecordsInfo")],Df);const Ute=Df;var px;let hr=px=class extends Td(X){constructor(t){super(t),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new px({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};c([d()],hr.prototype,"active",void 0),c([d()],hr.prototype,"className",void 0),c([d()],hr.prototype,"disabled",void 0),c([d()],hr.prototype,"icon",void 0),c([d()],hr.prototype,"id",void 0),c([d()],hr.prototype,"indicator",void 0),c([d()],hr.prototype,"title",void 0),c([d()],hr.prototype,"type",void 0),c([d()],hr.prototype,"visible",void 0),hr=px=c([S("esri.support.actions.ActionBase")],hr);const Dg=hr;var fx;let tv=fx=class extends Dg{constructor(t){super(t),this.image=null,this.type="button"}clone(){return new fx({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};c([d()],tv.prototype,"image",void 0),tv=fx=c([S("esri.support.Action.ActionButton")],tv);const d4=tv;var mx;let Ff=mx=class extends Dg{constructor(t){super(t),this.image=null,this.type="toggle",this.value=!1}clone(){return new mx({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};c([d()],Ff.prototype,"image",void 0),c([d()],Ff.prototype,"value",void 0),Ff=mx=c([S("esri.support.Action.ActionToggle")],Ff);const h4=Ff,Hte="esri.PopupTemplate",Vte=J.getLogger(Hte),df="relationships/",iO="expression/",Bte=te.ofType({key:"type",defaultKeyValue:"button",base:Dg,typeMap:{button:d4,toggle:h4}}),qte={base:kc,key:"type",typeMap:{media:$b,custom:Lte,text:Tb,attachments:_b,fields:Sb,expression:DE,relationship:xb}},Wte=new Set(["attachments","fields","media","text","expression","relationship"]);let Qt=class extends No(ie){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(e){return Array.isArray(e)?e.map(i=>ja(qte,i)):typeof e=="string"||typeof e=="function"||e instanceof HTMLElement||Za(e)?e:(Vte.error("content error","unsupported content value",{value:e}),null)}readContent(e,i){const{popupElements:n}=i;return Array.isArray(n)&&n.length>0?this._readPopupInfoElements(i.description,i.mediaInfos,n):this._readPopupInfo(i)}writeContent(e,i,n,r){typeof e!="string"?Array.isArray(e)&&(i.popupElements=e.filter(s=>Wte.has(s.type)).map(s=>s==null?void 0:s.toJSON(r)),i.popupElements.forEach(s=>{s.type==="attachments"?this._writeAttachmentContent(i):s.type==="media"?this._writeMediaContent(s,i):s.type==="text"?this._writeTextContent(s,i):s.type==="relationship"&&this._writeRelationshipContent(s,i)})):i.description=e}writeFieldInfos(e,i,n,r){const{content:s}=this,o=Array.isArray(s)?s:null;if(e){const a=o?o.filter(u=>u.type==="fields"):[],l=a.length&&a.every(u=>{var p;return(p=u.fieldInfos)==null?void 0:p.length});i.fieldInfos=e.filter(Boolean).map(u=>{const p=u.toJSON(r);return l&&(p.visible=!1),p})}if(o)for(const a of o)a.type==="fields"&&this._writeFieldsContent(a,i)}writeLayerOptions(e,i,n,r){i[n]=!e||e.showNoDataRecords===null&&e.returnTopmostRaster===null?null:e.toJSON(r)}writeTitle(e,i){i.title=e||""}async collectRequiredFields(e,i){const n=this.expressionInfos||[];await this._collectExpressionInfoFields(e,i,[...n,...this._getContentExpressionInfos(this.content,n)]),ng(e,i,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e){const i=new Set;return await this.collectRequiredFields(i,e),[...i].sort()}_writeFieldsContent(e,i){if(!Array.isArray(e.fieldInfos)||!e.fieldInfos.length)return;const n=q(e.fieldInfos);Array.isArray(i.fieldInfos)?n.forEach(r=>{const s=i.fieldInfos.find(o=>o.fieldName.toLowerCase()===r.fieldName.toLowerCase());s?s.visible=!0:i.fieldInfos.push(r)}):i.fieldInfos=n}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeRelationshipContent(e,i){var s,o;const n=((s=e.orderByFields)==null?void 0:s.map(a=>this._toFieldOrderJSON(a,e.relationshipId)))||[],r=[...((o=i.relatedRecordsInfo)==null?void 0:o.orderByFields)||[],...n];i.relatedRecordsInfo={showRelatedRecords:!0,...(r==null?void 0:r.length)&&{orderByFields:r}}}_writeTextContent(e,i){!i.description&&e.text&&(i.description=e.text)}_writeMediaContent(e,i){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const n=q(e.mediaInfos);Array.isArray(i.mediaInfos)?i.mediaInfos=[...i.mediaInfos,...n]:i.mediaInfos=n}_readPopupInfoElements(e,i,n){const r={description:!1,mediaInfos:!1};return n.map(s=>s.type==="media"?(s.mediaInfos||!i||r.mediaInfos||(s.mediaInfos=i,r.mediaInfos=!0),$b.fromJSON(s)):s.type==="text"?(s.text||!e||r.description||(s.text=e,r.description=!0),Tb.fromJSON(s)):s.type==="attachments"?_b.fromJSON(s):s.type==="fields"?Sb.fromJSON(s):s.type==="expression"?DE.fromJSON(s):s.type==="relationship"?xb.fromJSON(s):void 0).filter(Boolean)}_toRelationshipContent(e){const{field:i,order:n}=e;if(!(i!=null&&i.startsWith(df)))return null;const r=i.replace(df,"").split("/");if(r.length!==2)return null;const s=parseInt(r[0],10),o=r[1];return typeof s=="number"&&o?xb.fromJSON({relationshipId:s,orderByFields:[{field:o,order:n}]}):null}_toFieldOrderJSON(e,i){const{order:n,field:r}=e;return{field:`${df}${i}/${r}`,order:n}}_readPopupInfo({description:e,mediaInfos:i,showAttachments:n,relatedRecordsInfo:r={showRelatedRecords:!1}}){const s=[];e?s.push(new Tb({text:e})):s.push(new Sb),Array.isArray(i)&&i.length&&s.push($b.fromJSON({mediaInfos:i})),n&&s.push(_b.fromJSON({displayType:"auto"}));const{showRelatedRecords:o,orderByFields:a}=r;return o&&(a!=null&&a.length)&&a.forEach(l=>{const u=this._toRelationshipContent(l);u&&s.push(u)}),s.length?s:e}_getContentElementFields(e){const i=e==null?void 0:e.type;if(i==="attachments")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if(i==="custom")return e.outFields||[];if(i==="fields")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields(e.fieldInfos??this.fieldInfos)];if(i==="media"){const n=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...n.reduce((r,s)=>[...r,...this._getMediaInfoFields(s)],[])]}return i==="text"?this._extractFieldNames(e.text):[]}_getMediaInfoFields(e){const{caption:i,title:n,value:r}=e,s=r||{},{fields:o,normalizeField:a,tooltipField:l,sourceURL:u,linkURL:p}=s,f=[...this._extractFieldNames(n),...this._extractFieldNames(i),...this._extractFieldNames(u),...this._extractFieldNames(p),...o??[]];return a&&f.push(a),l&&f.push(l),f}_getContentExpressionInfos(e,i){return Array.isArray(e)?e.reduce((n,r)=>[...n,...r.type==="expression"&&r.expressionInfo?[r.expressionInfo]:[]],i):[]}_getContentFields(e){return typeof e=="string"?this._extractFieldNames(e):Array.isArray(e)?e.reduce((i,n)=>[...i,...this._getContentElementFields(n)],[]):[]}async _collectExpressionInfoFields(e,i,n){n&&await Promise.all(n.map(r=>yc(e,i,r.expression)))}_getFieldInfoFields(e){return e?e.filter(i=>i.visible===void 0||!!i.visible).map(i=>i.fieldName).filter(i=>!i.startsWith(df)&&!i.startsWith(iO)):[]}_getActionsFields(e){return e?e.toArray().reduce((i,n)=>[...i,...this._getActionFields(n)],[]):[]}_getActionFields(e){const{className:i,title:n,type:r}=e,s=r==="button"||r==="toggle"?e.image:"";return[...this._extractFieldNames(n),...this._extractFieldNames(i),...this._extractFieldNames(s)]}_getTitleFields(e){return typeof e=="string"?this._extractFieldNames(e):[]}_extractFieldNames(e){if(!e||typeof e!="string")return[];const i=/{[^}]*}/g,n=e.match(i);if(!n)return[];const r=/\{(\w+):.+\}/,s=n.filter(o=>!(o.indexOf(`{${df}`)===0||o.indexOf(`{${iO}`)===0)).map(o=>o.replace(r,"{$1}"));return s?s.map(o=>o.slice(1,-1)):[]}};c([d({type:Bte})],Qt.prototype,"actions",void 0),c([d()],Qt.prototype,"content",void 0),c([zt("content")],Qt.prototype,"castContent",null),c([Ne("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],Qt.prototype,"readContent",null),c([Ie("content",{popupElements:{type:te.ofType(zte)},showAttachments:{type:Boolean},mediaInfos:{type:te.ofType(c4)},description:{type:String},relatedRecordsInfo:{type:Ute}})],Qt.prototype,"writeContent",null),c([d({type:[jte],json:{write:!0}})],Qt.prototype,"expressionInfos",void 0),c([d({type:[n4]})],Qt.prototype,"fieldInfos",void 0),c([Ie("fieldInfos")],Qt.prototype,"writeFieldInfos",null),c([d({type:Gte})],Qt.prototype,"layerOptions",void 0),c([Ie("layerOptions")],Qt.prototype,"writeLayerOptions",null),c([d({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],Qt.prototype,"lastEditInfoEnabled",void 0),c([d()],Qt.prototype,"outFields",void 0),c([d()],Qt.prototype,"overwriteActions",void 0),c([d()],Qt.prototype,"returnGeometry",void 0),c([d({json:{type:String}})],Qt.prototype,"title",void 0),c([Ie("title")],Qt.prototype,"writeTitle",null),Qt=c([S("esri.PopupTemplate")],Qt);const zE=Qt,nO=new Kt({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let Zte=0,rh=class extends ie{constructor(e){super(e),this.id="sym"+Zte++,this.type=null,this.color=new Me([0,0,0,1])}readColor(e){return(e==null?void 0:e[0])!=null?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,i){}hash(){return JSON.stringify(this.toJSON())}clone(){}};c([d({type:nO.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:nO.write}}})],rh.prototype,"type",void 0),c([d({type:Me,json:{write:{allowNull:!0}}})],rh.prototype,"color",void 0),c([Ne("color")],rh.prototype,"readColor",null),rh=c([S("esri.symbols.Symbol")],rh);const nr=rh;var gx;let wl=gx=class extends nr{constructor(t){super(t),this.data=null,this.type="cim"}readData(t,e){return e}writeData(t,e){Object.assign(e,t)}async collectRequiredFields(t,e){var i;if(((i=this.data)==null?void 0:i.type)==="CIMSymbolReference"){const n=this.data.primitiveOverrides;if(n){const r=n.map(s=>{const o=s.valueExpressionInfo;return yc(t,e,o.expression)});await Promise.all(r)}}}clone(){return new gx({data:q(this.data)})}hash(){return jL(JSON.stringify(this.data)).toString()}};c([d({json:{write:!1}})],wl.prototype,"color",void 0),c([d({json:{write:!0}})],wl.prototype,"data",void 0),c([Ne("data",["symbol"])],wl.prototype,"readData",null),c([Ie("data",{})],wl.prototype,"writeData",null),c([me({CIMSymbolReference:"cim"},{readOnly:!0})],wl.prototype,"type",void 0),wl=gx=c([S("esri.symbols.CIMSymbol")],wl);const rw=wl;let sh=class extends ie{constructor(e){super(e),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(e,i,n){e||(i[n]=e)}};c([d({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],sh.prototype,"enabled",void 0),c([Ie("enabled")],sh.prototype,"writeEnabled",null),c([d({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],sh.prototype,"type",void 0),sh=c([S("esri.symbols.Symbol3DLayer")],sh);const Fo=sh;function Kte(t,e){const i=e.transparency!=null?gD(e.transparency):1,n=e.color;return n&&Array.isArray(n)?new Me([n[0]||0,n[1]||0,n[2]||0,i]):null}function Jte(t,e){e.color=t.toJSON().slice(0,3);const i=mD(t.a);i!==0&&(e.transparency=i)}const Mc={type:Me,json:{type:[Et],default:null,read:{source:["color","transparency"],reader:Kte},write:{target:{color:{type:[Et]},transparency:{type:Et}},writer:Jte}}},Ao={type:Number,cast:St,json:{write:!0}};let nu=class extends ie{constructor(e){super(e),this.color=new Me([0,0,0,1]),this.extensionLength=0,this.size=gc(1)}clone(){}cloneProperties(){return{color:q(this.color),size:this.size,extensionLength:this.extensionLength}}};c([d({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],nu.prototype,"type",void 0),c([d(Mc)],nu.prototype,"color",void 0),c([d({...Ao,json:{write:{overridePolicy:t=>({enabled:!!t})}}})],nu.prototype,"extensionLength",void 0),c([d(Ao)],nu.prototype,"size",void 0),nu=c([S("esri.symbols.edges.Edges3D")],nu);const jE=nu;var yx;let iv=yx=class extends jE{constructor(t){super(t),this.type="sketch"}clone(){return new yx(this.cloneProperties())}};c([me({sketch:"sketch"},{readOnly:!0})],iv.prototype,"type",void 0),iv=yx=c([S("esri.symbols.edges.SketchEdges3D")],iv);const Yte=iv;var vx;let nv=vx=class extends jE{constructor(t){super(t),this.type="solid"}clone(){return new vx(this.cloneProperties())}};c([me({solid:"solid"},{readOnly:!0})],nv.prototype,"type",void 0),nv=vx=c([S("esri.symbols.support.SolidEdges3D")],nv);const Xte=nv,p4={types:{key:"type",base:jE,typeMap:{solid:Xte,sketch:Yte}},json:{write:!0}};var bx;let Cr=bx=class extends ie{constructor(t){super(t),this.color=null}clone(){const t={color:this.color!=null?this.color.clone():null};return new bx(t)}};c([d(Mc)],Cr.prototype,"color",void 0),Cr=bx=c([S("esri.symbols.support.Symbol3DMaterial")],Cr);var wx;let _l=wx=class extends Fo{constructor(t){super(t),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new wx({edges:this.edges&&this.edges.clone(),enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,size:this.size})}};c([me({Extrude:"extrude"},{readOnly:!0})],_l.prototype,"type",void 0),c([d({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],_l.prototype,"size",void 0),c([d({type:Cr,json:{write:!0}})],_l.prototype,"material",void 0),c([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],_l.prototype,"castShadows",void 0),c([d(p4)],_l.prototype,"edges",void 0),_l=wx=c([S("esri.symbols.ExtrudeSymbol3DLayer")],_l);const f4=_l;let zf=class extends nr{constructor(e){super(e),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};c([me({esriSLS:"simple-line"},{readOnly:!0})],zf.prototype,"type",void 0),c([d({type:Number,cast:St,json:{write:!0}})],zf.prototype,"width",void 0),zf=c([S("esri.symbols.LineSymbol")],zf);const Qte=zf,eie=["begin","end","begin-end"],m4=["arrow","circle","square","diamond","cross","x"];var _x;let Qs=_x=class extends ie{constructor(t){super(t),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(t,e,i,n){e[i]=(n==null?void 0:n.origin)==="web-map"?"arrow":t}set color(t){this._set("color",t)}readColor(t){return(t==null?void 0:t[0])!=null?[t[0],t[1],t[2],t[3]/255]:t}writeColor(t,e,i,n){(n==null?void 0:n.origin)==="web-map"||(e[i]=t)}clone(){return new _x({color:q(this.color),placement:this.placement,style:this.style})}hash(){var t;return`${this.placement}.${(t=this.color)==null?void 0:t.hash()}.${this.style}`}};c([d({type:["begin","end","begin-end"],json:{write:!0}})],Qs.prototype,"placement",void 0),c([me({"line-marker":"line-marker"},{readOnly:!0}),d({json:{origins:{"web-map":{write:!1}}}})],Qs.prototype,"type",void 0),c([d({type:m4})],Qs.prototype,"style",void 0),c([Ie("style")],Qs.prototype,"writeStyle",null),c([d({type:Me,value:null,json:{write:{allowNull:!0}}})],Qs.prototype,"color",null),c([Ne("color")],Qs.prototype,"readColor",null),c([Ie("color")],Qs.prototype,"writeColor",null),Qs=_x=c([S("esri.symbols.LineSymbolMarker")],Qs);const tie=Qs;var Sx;const M_=new Kt({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let da=Sx=class extends Qte{constructor(...t){super(...t),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(t,e,i,n,r,s){if(t&&typeof t!="string")return t;const o={};return t!=null&&(o.style=t),e!=null&&(o.color=e),i!=null&&(o.width=St(i)),n!=null&&(o.cap=n),r!=null&&(o.join=r),s!=null&&(o.miterLimit=St(s)),o}clone(){var t;return new Sx({color:q(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(t=this.marker)==null?void 0:t.clone()})}hash(){var t,e;return`${super.hash()}.${(t=this.color)==null?void 0:t.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(e=this.marker)==null?void 0:e.hash()}`}};c([me({esriSLS:"simple-line"},{readOnly:!0})],da.prototype,"type",void 0),c([d({type:M_.apiValues,json:{read:M_.read,write:M_.write}})],da.prototype,"style",void 0),c([d({type:["butt","round","square"],json:{write:{overridePolicy:(t,e,i)=>({enabled:t!=="round"&&(i==null?void 0:i.origin)==null})}}})],da.prototype,"cap",void 0),c([d({type:["miter","round","bevel"],json:{write:{overridePolicy:(t,e,i)=>({enabled:t!=="round"&&(i==null?void 0:i.origin)==null})}}})],da.prototype,"join",void 0),c([d({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":tie}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],da.prototype,"marker",void 0),c([d({type:Number,json:{read:!1,write:!1}})],da.prototype,"miterLimit",void 0),da=Sx=c([S("esri.symbols.SimpleLineSymbol")],da);const Ja=da;let jf=class extends nr{constructor(e){super(e),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline&&this.outline.hash()}`}};c([d({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Ja}},json:{default:null,write:!0}})],jf.prototype,"outline",void 0),c([d({type:["simple-fill","picture-fill"],readOnly:!0})],jf.prototype,"type",void 0),jf=c([S("esri.symbols.FillSymbol")],jf);const g4=jf;let rv=class extends ie{constructor(e){super(e)}clone(){}};c([d({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],rv.prototype,"type",void 0),rv=c([S("esri.symbols.patterns.LinePattern3D")],rv);const y4=rv,iie=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var $x;const nie=sn()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let Gf=$x=class extends y4{constructor(t){super(t),this.type="style",this.style="solid"}clone(){const t={style:this.style};return new $x(t)}};c([d({type:["style"]})],Gf.prototype,"type",void 0),c([me(nie),d({type:iie})],Gf.prototype,"style",void 0),Gf=$x=c([S("esri.symbols.patterns.LineStylePattern3D")],Gf);const GE=Gf;let sv=class extends ie{constructor(e){super(e)}clone(){}};c([d({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],sv.prototype,"type",void 0),sv=c([S("esri.symbols.patterns.Pattern3D")],sv);const v4=sv,rie=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var xx;let Uf=xx=class extends v4{constructor(t){super(t),this.type="style",this.style="solid"}clone(){const t={style:this.style};return new xx(t)}};c([d({type:["style"]})],Uf.prototype,"type",void 0),c([d({type:rie,json:{read:!0,write:!0}})],Uf.prototype,"style",void 0),Uf=xx=c([S("esri.symbols.patterns.StylePattern3D")],Uf);const b4=Uf,sie={types:{key:"type",base:v4,typeMap:{style:b4}},json:{write:!0}},w4={types:{key:"type",base:y4,typeMap:{style:GE}},json:{write:!0}},Im=new Me("white");new Me("black");const oie=new Me([255,255,255,0]);function aie(t){return t.r===0&&t.g===0&&t.b===0}var Tx;let Om=Tx=class extends Cr{constructor(t){super(t),this.colorMixMode=null}clone(){const t={color:this.color!=null?this.color.clone():null,colorMixMode:this.colorMixMode};return new Tx(t)}};c([me({multiply:"multiply",replace:"replace",tint:"tint"})],Om.prototype,"colorMixMode",void 0),Om=Tx=c([S("esri.symbols.support.Symbol3DFillMaterial")],Om);function UE(t=uie){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function HE(t,e,i,n,r,s,o=UE()){return o[0]=t,o[1]=e,o[2]=i,o[3]=n,o[4]=r,o[5]=s,o}function i$e(t,e){const i=isFinite(t[2])||isFinite(t[5]);return new Ve(i?{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],zmin:t[2],zmax:t[5],spatialReference:e}:{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],spatialReference:e})}function n$e(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[3]),t[4]=Math.max(t[4],e[4]),t[5]=Math.max(t[5],e[5])}function r$e(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[3]=Math.max(t[3],e[2]),t[4]=Math.max(t[4],e[3])}function s$e(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[0]),t[4]=Math.max(t[4],e[1]),t[5]=Math.max(t[5],e[2])}function o$e(t,e,i=0,n=e.length/3){let r=t[0],s=t[1],o=t[2],a=t[3],l=t[4],u=t[5];for(let p=0;p<n;p++)r=Math.min(r,e[i+3*p]),s=Math.min(s,e[i+3*p+1]),o=Math.min(o,e[i+3*p+2]),a=Math.max(a,e[i+3*p]),l=Math.max(l,e[i+3*p+1]),u=Math.max(u,e[i+3*p+2]);t[0]=r,t[1]=s,t[2]=o,t[3]=a,t[4]=l,t[5]=u}function a$e(t,e,i){const n=e.length;let r=t[0],s=t[1],o=t[2],a=t[3],l=t[4],u=t[5];if(i)for(let p=0;p<n;p++){const f=e[p];r=Math.min(r,f[0]),s=Math.min(s,f[1]),o=Math.min(o,f[2]),a=Math.max(a,f[0]),l=Math.max(l,f[1]),u=Math.max(u,f[2])}else for(let p=0;p<n;p++){const f=e[p];r=Math.min(r,f[0]),s=Math.min(s,f[1]),a=Math.max(a,f[0]),l=Math.max(l,f[1])}t[0]=r,t[1]=s,t[2]=o,t[3]=a,t[4]=l,t[5]=u}function l$e(t){for(let e=0;e<6;e++)if(!isFinite(t[e]))return!1;return!0}function Fg(t){return t[0]>=t[3]?0:t[3]-t[0]}function zg(t){return t[1]>=t[4]?0:t[4]-t[1]}function jg(t){return t[2]>=t[5]?0:t[5]-t[2]}function c$e(t){const e=Fg(t),i=jg(t),n=zg(t);return Math.sqrt(e*e+i*i+n*n)}function u$e(t,e=[0,0,0]){return e[0]=t[0]+Fg(t)/2,e[1]=t[1]+zg(t)/2,e[2]=t[2]+jg(t)/2,e}function d$e(t,e=[0,0,0]){return e[0]=Fg(t),e[1]=zg(t),e[2]=jg(t),e}function h$e(t,e){return e[0]>=t[0]&&e[1]>=t[1]&&e[2]>=t[2]&&e[0]<=t[3]&&e[1]<=t[4]&&e[2]<=t[5]}function lie(t,e){return Math.max(e[0],t[0])<=Math.min(e[3],t[3])&&Math.max(e[1],t[1])<=Math.min(e[4],t[4])&&Math.max(e[2],t[2])<=Math.min(e[5],t[5])}function p$e(t,e){return e==null||lie(t,e)}function f$e(t,e,i,n,r=t){return r[0]=t[0]+e,r[1]=t[1]+i,r[2]=t[2]+n,r[3]=t[3]+e,r[4]=t[4]+i,r[5]=t[5]+n,r}function m$e(t,e,i=t){const n=t[0]+Fg(t)/2,r=t[1]+zg(t)/2,s=t[2]+jg(t)/2;return i[0]=n+(t[0]-n)*e,i[1]=r+(t[1]-r)*e,i[2]=s+(t[2]-s)*e,i[3]=n+(t[3]-n)*e,i[4]=r+(t[4]-r)*e,i[5]=s+(t[5]-s)*e,i}function g$e(t,e){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function y$e(t,e,i=t){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i!==t&&(i[3]=t[3],i[4]=t[4],i[5]=t[5]),i}function v$e(t,e,i=t){return i[3]=e[0],i[4]=e[1],i[5]=e[2],i!==t&&(i[0]=t[0],i[1]=t[1],i[2]=t[2]),t}function cie(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function b$e(t){return t?cie(t,sO):UE(sO)}function w$e(t,e){return e||(e=tn()),e[0]=t[0],e[1]=t[1],e[2]=t[3],e[3]=t[4],e}function _$e(t,e){return t[0]=e[0],t[1]=e[1],t[2]=Number.NEGATIVE_INFINITY,t[3]=e[2],t[4]=e[3],t[5]=Number.POSITIVE_INFINITY,t}function S$e(t,e,i,n,r){return t[0]=e,t[1]=i,t[2]=Number.NEGATIVE_INFINITY,t[3]=n,t[4]=r,t[5]=Number.POSITIVE_INFINITY,t}function rO(t){return t.length===6}function $$e(t){return Fg(t)===0&&zg(t)===0&&jg(t)===0}function x$e(t,e,i){if(t==null||e==null)return t===e;if(!rO(t)||!rO(e))return!1;if(i){for(let n=0;n<t.length;n++)if(!i(t[n],e[n]))return!1}else for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}const sO=[1/0,1/0,1/0,-1/0,-1/0,-1/0],uie=[0,0,0,0,0,0];UE();function T$e(t,{isPrimitive:e,width:i,depth:n,height:r}){const s=e?10:1;if(i==null&&r==null&&n==null)return[s*t[0],s*t[1],s*t[2]];const o=kn(i,n,r);let a;for(let l=0;l<3;l++){const u=o[l];if(u!=null){a=u/t[l];break}}for(let l=0;l<3;l++)o[l]==null&&(o[l]=t[l]*a);return o}const die=HE(-.5,-.5,-.5,.5,.5,.5),hie=HE(-.5,-.5,0,.5,.5,1),pie=HE(-.5,-.5,0,.5,.5,.5);function E$e(t){switch(t){case"sphere":case"cube":case"diamond":return die;case"cylinder":case"cone":case"inverted-cone":return hie;case"tetrahedron":return pie;default:return}}const VE=["butt","square","round"],fie=[...VE,"none"],_4=["miter","bevel","round"];var Ex;let ru=Ex=class extends ie{constructor(t){super(t),this.color=new Me([0,0,0,1]),this.size=gc(1),this.pattern=null,this.patternCap="butt"}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new Ex(t)}};c([d(Mc)],ru.prototype,"color",void 0),c([d(Ao)],ru.prototype,"size",void 0),c([d(w4)],ru.prototype,"pattern",void 0),c([d({type:VE,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],ru.prototype,"patternCap",void 0),ru=Ex=c([S("esri.symbols.support.Symbol3DOutline")],ru);var ov;let ha=ov=class extends Fo{constructor(t){super(t),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const t={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new ov(t)}static fromSimpleFillSymbol(t){var n,r,s;const e=t.outline&&t.outline.style&&t.outline.style!=="inside-frame"&&t.outline.style!=="solid"?new GE({style:t.outline.style}):null,i={size:((n=t.outline)==null?void 0:n.width)??0,color:(((r=t.outline)==null?void 0:r.color)??Im).clone(),pattern:e};return e&&((s=t.outline)!=null&&s.cap)&&(i.patternCap=t.outline.cap),new ov({material:new Om({color:(t.color??oie).clone()}),pattern:t.style&&t.style!=="solid"?new b4({style:t.style}):null,outline:i})}};c([me({Fill:"fill"},{readOnly:!0})],ha.prototype,"type",void 0),c([d({type:Om,json:{write:!0}})],ha.prototype,"material",void 0),c([d(sie)],ha.prototype,"pattern",void 0),c([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],ha.prototype,"castShadows",void 0),c([d({type:ru,json:{write:!0}})],ha.prototype,"outline",void 0),c([d(p4)],ha.prototype,"edges",void 0),ha=ov=c([S("esri.symbols.FillSymbol3DLayer")],ha);const Pp=ha,mie=["none","underline","line-through"],gie=["normal","italic","oblique"],yie=["normal","lighter","bold","bolder"],S4={type:Number,cast:t=>{const e=gs(t);return e===0?1:Ar(e,.1,4)},nonNullable:!0},vie=["left","right","center"],bie=["baseline","top","middle","bottom"],$4={type:vie,nonNullable:!0},x4={type:bie,nonNullable:!0},k$e=8;var kx;let pa=kx=class extends ie{constructor(t){super(t),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(t){return St(t)}clone(){return new kx({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};c([d({type:mie,json:{default:"none",write:!0}})],pa.prototype,"decoration",void 0),c([d({type:String,json:{write:!0}})],pa.prototype,"family",void 0),c([d({type:Number,json:{write:{overridePolicy:(t,e,i)=>({enabled:!i||!i.textSymbol3D})}}})],pa.prototype,"size",void 0),c([zt("size")],pa.prototype,"castSize",null),c([d({type:gie,json:{default:"normal",write:!0}})],pa.prototype,"style",void 0),c([d({type:yie,json:{default:"normal",write:!0}})],pa.prototype,"weight",void 0),pa=kx=c([S("esri.symbols.Font")],pa);const sw=pa;function Gg(t,e){var n;const i=(n=e==null?void 0:e.url)==null?void 0:n.path;if(t&&i&&(t=$r(t,i,{preserveProtocolRelative:!0}),e.portalItem&&e.readResourcePaths)){const r=PT(t,e.portalItem.itemUrl);r!=null&&wie.test(r)&&e.readResourcePaths.push(e.portalItem.resourceFromPath(r).path)}return Mx(t,e==null?void 0:e.portal)}function ow(t,e,i=rg.YES){var r,s;if(t==null)return t;!Zn(t)&&(e!=null&&e.blockedRelativeUrls)&&e.blockedRelativeUrls.push(t);let n=$r(t);if(e){const o=((r=e.verifyItemRelativeUrls)==null?void 0:r.rootPath)||((s=e.url)==null?void 0:s.path);if(o){const a=Mx(o,e.portal),l=Mx(n,e.portal);n=PT(l,a,a),n!=null&&n!==l&&n!==t&&e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.writtenUrls.push(n)}}return n=E4(n,e==null?void 0:e.portal),Zn(n)&&(n=Ra(n)),e!=null&&e.resources&&(e!=null&&e.portalItem)&&!Zn(n)&&!Sd(n)&&i===rg.YES&&e.resources.toKeep.push({resource:e.portalItem.resourceFromPath(n),compress:!1}),n}function BE(t,e,i){return Gg(t,i)}function pp(t,e,i,n){const r=ow(t,n);r!==void 0&&(e[i]=r)}const T4=/\/items\/([^\/]+)\/resources\/(.*)/,wie=/^\.\/resources\//;function _ie(t){const e=(t==null?void 0:t.match(T4))??null;return(e==null?void 0:e[1])??null}function Sie(t){const e=(t==null?void 0:t.match(T4))??null;if(e==null)return null;const i=e[2],n=i.lastIndexOf("/");if(n===-1){const{path:o,extension:a}=QM(i);return{prefix:null,filename:o,extension:a}}const{path:r,extension:s}=QM(i.slice(n+1));return{prefix:i.slice(0,n),filename:r,extension:s}}function E4(t,e){return e&&!e.isPortal&&e.urlKey&&e.customBaseUrl?QS(t,`${e.urlKey}.${e.customBaseUrl}`,e.portalHostname):t}function Mx(t,e){if(!e||e.isPortal||!e.urlKey||!e.customBaseUrl)return t;const i=`${e.urlKey}.${e.customBaseUrl}`,n=IT();return np(n,`${n.scheme}://${i}`)?QS(t,e.portalHostname,i):QS(t,i,e.portalHostname)}var rg;(function(t){t[t.YES=0]="YES",t[t.NO=1]="NO"})(rg||(rg={}));const M$e=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return rg},ensureMainOnlineDomain:E4,fromJSON:Gg,itemIdFromResourceUrl:_ie,prefixAndFilenameFromResourceUrl:Sie,read:BE,toJSON:ow,write:pp},Symbol.toStringTag,{value:"Module"}));var Cx;const $ie=sn()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let su=Cx=class extends ie{constructor(t){super(t)}readHref(t,e,i){return t?Gg(t,i):e.dataURI}writeHref(t,e,i,n){t&&(Sd(t)?e.dataURI=t:(e.href=ow(t,n),Zn(e.href)&&(e.href=Ra(e.href))))}clone(){return new Cx({href:this.href,primitive:this.primitive})}};c([d({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],su.prototype,"href",void 0),c([Ne("href")],su.prototype,"readHref",null),c([Ie("href",{href:{type:String},dataURI:{type:String}})],su.prototype,"writeHref",null),c([me($ie)],su.prototype,"primitive",void 0),su=Cx=c([S("esri.symbols.support.IconSymbol3DLayerResource")],su);const C$e="circle";var Ix;let Lh=Ix=class extends X{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new Ix({x:this.x,y:this.y})}};c([d({type:Number})],Lh.prototype,"x",void 0),c([d({type:Number})],Lh.prototype,"y",void 0),Lh=Ix=c([S("esri.symbols.support.Symbol3DAnchorPosition2D")],Lh);var Ox;let Hf=Ox=class extends ie{constructor(t){super(t),this.color=new Me([0,0,0,1]),this.size=gc(1)}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size};return new Ox(t)}};c([d(Mc)],Hf.prototype,"color",void 0),c([d(Ao)],Hf.prototype,"size",void 0),Hf=Ox=c([S("esri.symbols.support.Symbol3DIconOutline")],Hf);var oh;const k4="esri.symbols.IconSymbol3DLayer";let eo=oh=class extends Fo{constructor(t){super(t),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null}clone(){return new oh({anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),enabled:this.enabled,material:this.material!=null?this.material.clone():null,outline:this.outline!=null?this.outline.clone():null,resource:this.resource&&this.resource.clone(),size:this.size})}static fromSimpleMarkerSymbol(t){const e=t.color||Im,i=oO(t),n=t.outline&&t.outline.width>0?{size:t.outline.width,color:(t.outline.color||Im).clone()}:null;return new oh({size:t.size,resource:{primitive:Tie(t.style)},material:{color:e},outline:n,anchor:i?"relative":void 0,anchorPosition:i})}static fromPictureMarkerSymbol(t){const e=!t.color||aie(t.color)?Im:t.color,i=oO(t);return new oh({size:t.width<=t.height?t.height:t.width,resource:{href:t.url},material:{color:e.clone()},anchor:i?"relative":void 0,anchorPosition:i})}static fromCIMSymbol(t){return new oh({resource:{href:FP({mediaType:"application/json",data:JSON.stringify(t.data)})}})}};function oO(t){const e="width"in t?t.width:t.size,i="height"in t?t.height:t.size,n=aO(t.xoffset),r=aO(t.yoffset);return(n||r)&&e&&i?{x:-n/e,y:r/i}:null}function aO(t){return isFinite(t)?t:0}c([d({type:Cr,json:{write:!0}})],eo.prototype,"material",void 0),c([d({type:su,json:{write:!0}})],eo.prototype,"resource",void 0),c([me({Icon:"icon"},{readOnly:!0})],eo.prototype,"type",void 0),c([d(Ao)],eo.prototype,"size",void 0),c([me({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),d({json:{default:"center"}})],eo.prototype,"anchor",void 0),c([d({type:Lh,json:{type:[Number],read:{reader:t=>new Lh({x:t[0],y:t[1]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],eo.prototype,"anchorPosition",void 0),c([d({type:Hf,json:{write:!0}})],eo.prototype,"outline",void 0),eo=oh=c([S(k4)],eo);const xie={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function Tie(t){return xie[t]||(J.getLogger(k4).warn(`${t} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const Bu=eo;let ou=class extends No(ie){constructor(e){super(e),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(e){return e!=null&&e.placement===this.placement&&e.style===this.style&&(this.color==null&&e.color==null||this.color!=null&&e.color!=null&&this.color.toJSON()===e.color.toJSON())}};c([d({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],ou.prototype,"type",void 0),c([d({type:eie,json:{default:"begin-end",write:!0}})],ou.prototype,"placement",void 0),c([d({type:m4,json:{default:"arrow",write:!0}})],ou.prototype,"style",void 0),c([d({type:Me,json:{type:[Et],default:null,write:!0}})],ou.prototype,"color",void 0),ou=c([S("esri.symbols.LineStyleMarker3D")],ou);const Ax=ou;var av;let to=av=class extends Fo{constructor(t){super(t),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=gc(1),this.pattern=null,this.marker=null}clone(){const t={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new av(t)}static fromSimpleLineSymbol(t){var i;const e={enabled:!0,size:t.width??gc(1),cap:t.cap||"butt",join:t.join||"miter",pattern:t.style&&t.style!=="inside-frame"?new GE({style:t.style}):null,material:new Cr({color:(t.color||Im).clone()}),marker:t.marker?new Ax({placement:t.marker.placement,style:t.marker.style,color:((i=t.marker.color)==null?void 0:i.clone())??null}):null};return new av(e)}};c([d({type:Cr,json:{write:!0}})],to.prototype,"material",void 0),c([me({Line:"line"},{readOnly:!0})],to.prototype,"type",void 0),c([d({type:_4,json:{write:!0,default:"miter"}})],to.prototype,"join",void 0),c([d({type:VE,json:{write:!0,default:"butt"}})],to.prototype,"cap",void 0),c([d(Ao)],to.prototype,"size",void 0),c([d(w4)],to.prototype,"pattern",void 0),c([d({types:{key:"type",base:Ax,typeMap:{style:Ax}},json:{write:!0}})],to.prototype,"marker",void 0),to=av=c([S("esri.symbols.LineSymbol3DLayer")],to);const Ug=to;var Lx;const Eie=sn()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let Vf=Lx=class extends ie{clone(){return new Lx({href:this.href,primitive:this.primitive})}};c([d({type:String,json:{read:BE,write:pp}})],Vf.prototype,"href",void 0),c([me(Eie)],Vf.prototype,"primitive",void 0),Vf=Lx=c([S("esri.symbols.support.ObjectSymbol3DLayerResource")],Vf);const O$e="sphere";var Px;let Cu=Px=class extends X{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new Px({x:this.x,y:this.y,z:this.z})}};c([d({type:Number})],Cu.prototype,"x",void 0),c([d({type:Number})],Cu.prototype,"y",void 0),c([d({type:Number})],Cu.prototype,"z",void 0),Cu=Px=c([S("esri.symbols.support.Symbol3DAnchorPosition3D")],Cu);var Rx;let Ai=Rx=class extends Fo{constructor(t){super(t),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){var t,e,i;return new Rx({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:(t=this.anchorPosition)==null?void 0:t.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:((e=this.material)==null?void 0:e.clone())??null,castShadows:this.castShadows,resource:(i=this.resource)==null?void 0:i.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};c([d({type:Cr,json:{write:!0}})],Ai.prototype,"material",void 0),c([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Ai.prototype,"castShadows",void 0),c([d({type:Vf,json:{write:!0}})],Ai.prototype,"resource",void 0),c([me({Object:"object"},{readOnly:!0})],Ai.prototype,"type",void 0),c([d({type:Number,json:{write:!0}})],Ai.prototype,"width",void 0),c([d({type:Number,json:{write:!0}})],Ai.prototype,"height",void 0),c([d({type:Number,json:{write:!0}})],Ai.prototype,"depth",void 0),c([me({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),d({json:{default:"origin"}})],Ai.prototype,"anchor",void 0),c([d({type:Cu,json:{type:[Number],read:{reader:t=>new Cu({x:t[0],y:t[1],z:t[2]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y,t.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Ai.prototype,"anchorPosition",void 0),c([d({type:Number,json:{write:!0}})],Ai.prototype,"heading",void 0),c([d({type:Number,json:{write:!0}})],Ai.prototype,"tilt",void 0),c([d({type:Number,json:{write:!0}})],Ai.prototype,"roll",void 0),c([d({readOnly:!0})],Ai.prototype,"isPrimitive",null),Ai=Rx=c([S("esri.symbols.ObjectSymbol3DLayer")],Ai);const qE=Ai;var Nx;let qi=Nx=class extends Fo{constructor(t){super(t),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(t,e){return t??(e.height==null&&e.size!=null?e.size:void 0)}readHeight(t,e){return t??(e.width==null&&e.size!=null?e.size:void 0)}clone(){return new Nx({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};c([d({type:Cr,json:{write:!0}})],qi.prototype,"material",void 0),c([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],qi.prototype,"castShadows",void 0),c([me({Path:"path"},{readOnly:!0})],qi.prototype,"type",void 0),c([d({type:["circle","quad"],json:{write:!0,default:"circle"}})],qi.prototype,"profile",void 0),c([d({type:_4,json:{write:!0,default:"miter"}})],qi.prototype,"join",void 0),c([d({type:fie,json:{write:!0,default:"butt"}})],qi.prototype,"cap",void 0),c([d({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],qi.prototype,"width",void 0),c([Ne("width",["width","size","height"])],qi.prototype,"readWidth",null),c([d({type:Number,json:{write:!0}})],qi.prototype,"height",void 0),c([Ne("height",["height","size","width"])],qi.prototype,"readHeight",null),c([d({type:["center","bottom","top"],json:{write:!0,default:"center"}})],qi.prototype,"anchor",void 0),c([d({type:["heading","all"],json:{write:!0,default:"all"}})],qi.prototype,"profileRotation",void 0),qi=Nx=c([S("esri.symbols.PathSymbol3DLayer")],qi);const WE=qi;var Dx;let Ph=Dx=class extends ie{constructor(){super(...arguments),this.color=new Me([0,0,0,1]),this.size=0}clone(){const t={color:q(this.color),size:this.size};return new Dx(t)}};c([d(Mc)],Ph.prototype,"color",void 0),c([d(Ao)],Ph.prototype,"size",void 0),Ph=Dx=c([S("esri.symbols.support.Symbol3DHalo")],Ph);let Am=class extends No(ie){constructor(e){super(e),this.color=null}};c([d(Mc)],Am.prototype,"color",void 0),Am=c([S("esri.symbols.support.Symbol3DTextBackground")],Am);var lv;let pn=lv=class extends Fo{constructor(t){super(t),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(t){t!=null&&this._userSize!=null&&(t.size=this._userSize),this._set("font",t)}writeFont(t,e,i,n){const r={...n,textSymbol3D:!0};e.font=t.write({},r),delete e.font.size}get size(){var t;return this._userSize!=null?this._userSize:((t=this.font)==null?void 0:t.size)!=null?this.font.size:9}set size(t){this._userSize=t,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const t=new lv({enabled:this.enabled,font:this.font&&q(this.font),halo:this.halo&&q(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:q(this.background)});return t._userSize=this._userSize,t}static fromTextSymbol(t){return new lv({font:t.font!=null?t.font.clone():new sw,halo:kie(t.haloColor,t.haloSize),horizontalAlignment:t.horizontalAlignment,lineHeight:t.lineHeight,material:t.color?new Cr({color:t.color.clone()}):null,text:t.text,verticalAlignment:t.verticalAlignment,background:t.backgroundColor?new Am({color:t.backgroundColor.clone()}):null})}};function kie(t,e){return t&&e!=null&&e>0?new Ph({color:q(t),size:e}):null}c([d({type:sw,json:{write:!0}})],pn.prototype,"font",null),c([Ie("font")],pn.prototype,"writeFont",null),c([d({type:Ph,json:{write:!0}})],pn.prototype,"halo",void 0),c([d({...$4,json:{default:"center",write:!0}})],pn.prototype,"horizontalAlignment",void 0),c([d({...S4,json:{default:1,write:!0}})],pn.prototype,"lineHeight",void 0),c([d({type:Cr,json:{write:!0}})],pn.prototype,"material",void 0),c([d({type:Am,json:{write:!0}})],pn.prototype,"background",void 0),c([d(Ao)],pn.prototype,"size",null),c([d({type:String,json:{write:!0}})],pn.prototype,"text",void 0),c([me({Text:"text"},{readOnly:!0})],pn.prototype,"type",void 0),c([d({...x4,json:{default:"baseline",write:!0}})],pn.prototype,"verticalAlignment",void 0),pn=lv=c([S("esri.symbols.TextSymbol3DLayer")],pn);const Rp=pn;var Fx;let Sl=Fx=class extends Fo{constructor(t){super(t),this.color=zx.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new Fx({color:q(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};c([d({type:Me,nonNullable:!0,json:{type:[Et],write:(t,e,i)=>e[i]=t.toArray(Me.AlphaMode.UNLESS_OPAQUE),default:()=>zx.clone(),defaultEquals:t=>t.toCss(!0)===zx.toCss(!0)}})],Sl.prototype,"color",void 0),c([me({Water:"water"},{readOnly:!0})],Sl.prototype,"type",void 0),c([d({type:["small","medium","large"],json:{write:!0,default:"medium"}})],Sl.prototype,"waterbodySize",void 0),c([d({type:Number,json:{write:!0,default:null}})],Sl.prototype,"waveDirection",void 0),c([d({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],Sl.prototype,"waveStrength",void 0),Sl=Fx=c([S("esri.symbols.WaterSymbol3DLayer")],Sl);const zx=new Me([0,119,190]),M4=Sl;var jx;let au=jx=class extends X{constructor(t){super(t),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new jx({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};c([d({type:String})],au.prototype,"name",void 0),c([d({type:String})],au.prototype,"styleUrl",void 0),c([d({type:String})],au.prototype,"styleName",void 0),c([d({type:ir})],au.prototype,"portal",void 0),au=jx=c([S("esri.symbols.support.StyleOrigin")],au);const Gx=au;var Ux;let Lm=Ux=class extends X{constructor(){super(...arguments),this.url=""}clone(){return new Ux({url:this.url})}};c([d({type:String})],Lm.prototype,"url",void 0),Lm=Ux=c([S("esri.symbols.support.Thumbnail")],Lm);const C4={icon:Bu,object:qE,line:Ug,path:WE,fill:Pp,extrude:f4,text:Rp,water:M4},Mie=te.ofType({base:Fo,key:"type",typeMap:C4,errorContext:"symbol-layer"});let io=class extends nr{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const i=this.__accessor__&&this.__accessor__.metadatas&&this.__accessor__.metadatas.symbolLayers,n=i==null?void 0:i.type,r=n||te;this._set("symbolLayers",new r)}get color(){return null}set color(e){this.constructed&&J.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){ud(e,this._get("symbolLayers"))}readStyleOrigin(e,i,n){if(e.styleUrl&&e.name){const r=Gg(e.styleUrl,n);return new Gx({styleUrl:r,name:e.name})}if(e.styleName&&e.name)return new Gx({portal:(n==null?void 0:n.portal)||ir.getDefault(),styleName:e.styleName,name:e.name});n!=null&&n.messages&&n.messages.push(new Ga("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:n,definition:e}))}writeStyleOrigin(e,i,n,r){if(e.styleUrl&&e.name){let s=ow(e.styleUrl,r);Zn(s)&&(s=Ra(s)),i.styleOrigin={styleUrl:s,name:e.name}}else e.styleName&&e.name&&(e.portal&&(r!=null&&r.portal)&&!SH(e.portal.restUrl,r.portal.restUrl)?r!=null&&r.messages&&r.messages.push(new Ga("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):i.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof Fo||e&&C4[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};c([d({json:{read:!1,write:!1}})],io.prototype,"color",null),c([d({type:Mie,nonNullable:!0,json:{write:!0}}),zt(sD)],io.prototype,"symbolLayers",null),c([d({type:Gx})],io.prototype,"styleOrigin",void 0),c([Ne("styleOrigin")],io.prototype,"readStyleOrigin",null),c([Ie("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],io.prototype,"writeStyleOrigin",null),c([d({type:Lm,json:{read:!1}})],io.prototype,"thumbnail",void 0),c([d({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],io.prototype,"type",void 0),io=c([S("esri.symbols.Symbol3D")],io);const Hg=io;let Bf=class extends ie{constructor(e){super(e),this.visible=!0}clone(){}};c([d({type:["line"],constructOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],Bf.prototype,"type",void 0),c([d({readOnly:!0})],Bf.prototype,"visible",void 0),Bf=c([S("esri.symbols.callouts.Callout3D")],Bf);const I4=Bf;var Hx;let cv=Hx=class extends ie{constructor(t){super(t),this.color=new Me("white")}clone(){return new Hx({color:q(this.color)})}};c([d(Mc)],cv.prototype,"color",void 0),cv=Hx=c([S("esri.symbols.callouts.LineCallout3DBorder")],cv);const Cie=cv;var Vx;let $l=Vx=class extends I4{constructor(t){super(t),this.type="line",this.color=new Me([0,0,0,1]),this.size=gc(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new Vx({color:q(this.color),size:this.size,border:q(this.border)})}};c([me({line:"line"})],$l.prototype,"type",void 0),c([d(Mc)],$l.prototype,"color",void 0),c([d(Ao)],$l.prototype,"size",void 0),c([d({type:Cie,json:{write:!0}})],$l.prototype,"border",void 0),c([d({readOnly:!0})],$l.prototype,"visible",null),$l=Vx=c([S("esri.symbols.callouts.LineCallout3D")],$l);const O4=$l;function ZE(t){if(!t)return!1;const e=t.verticalOffset;return!!e&&!(e.screenLength<=0||e.maxWorldLength!=null&&e.maxWorldLength<=0)}function A4(t){if(!t||!t.supportsCallout||!t.supportsCallout())return!1;const e=t.callout;return!!e&&!!e.visible&&!!ZE(t)}function R$e(t){return t.type==="point-3d"||t.type==="label-3d"}function N$e(t){return t.horizontalAlignment==="center"}const L4={types:{key:"type",base:I4,typeMap:{line:O4}},json:{write:!0}};var Bx;let ah=Bx=class extends ie{constructor(t){super(t),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new Bx({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};c([d(Ao)],ah.prototype,"screenLength",void 0),c([d({type:Number,nonNullable:!0,json:{write:!0,default:0}})],ah.prototype,"minWorldLength",void 0),c([d({type:Number,json:{write:!0}})],ah.prototype,"maxWorldLength",void 0),ah=Bx=c([S("esri.symbols.support.Symbol3DVerticalOffset")],ah);const KE=ah;var uv;const P4=te.ofType({base:null,key:"type",typeMap:{text:Rp}});let xl=uv=class extends Hg{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new P4,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return A4(this)}hasVisibleVerticalOffset(){return ZE(this)}clone(){return new uv({styleOrigin:q(this.styleOrigin),symbolLayers:q(this.symbolLayers),thumbnail:q(this.thumbnail),callout:q(this.callout),verticalOffset:q(this.verticalOffset)})}static fromTextSymbol(t){return new uv({symbolLayers:new te([Rp.fromTextSymbol(t)])})}};c([d({type:KE,json:{write:!0}})],xl.prototype,"verticalOffset",void 0),c([d(L4)],xl.prototype,"callout",void 0),c([d({json:{read:!1,write:!1}})],xl.prototype,"styleOrigin",void 0),c([d({type:P4})],xl.prototype,"symbolLayers",void 0),c([me({LabelSymbol3D:"label-3d"},{readOnly:!0})],xl.prototype,"type",void 0),xl=uv=c([S("esri.symbols.LabelSymbol3D")],xl);const JE=xl;var dv;const R4=te.ofType({base:null,key:"type",typeMap:{line:Ug,path:WE}}),Iie=te.ofType({base:null,key:"type",typeMap:{line:Ug,path:WE}});let qf=dv=class extends Hg{constructor(t){super(t),this.symbolLayers=new R4,this.type="line-3d"}clone(){return new dv({styleOrigin:q(this.styleOrigin),symbolLayers:q(this.symbolLayers),thumbnail:q(this.thumbnail)})}static fromSimpleLineSymbol(t){return new dv({symbolLayers:new te([Ug.fromSimpleLineSymbol(t)])})}};c([d({type:R4,json:{type:Iie}})],qf.prototype,"symbolLayers",void 0),c([me({LineSymbol3D:"line-3d"},{readOnly:!0})],qf.prototype,"type",void 0),qf=dv=c([S("esri.symbols.LineSymbol3D")],qf);const YE=qf;let Tl=class extends nr{constructor(e){super(e),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};c([d({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],Tl.prototype,"angle",void 0),c([d({type:["simple-marker","picture-marker"],readOnly:!0})],Tl.prototype,"type",void 0),c([d({type:Number,cast:St,json:{write:!0}})],Tl.prototype,"xoffset",void 0),c([d({type:Number,cast:St,json:{write:!0}})],Tl.prototype,"yoffset",void 0),c([d({type:Number,cast:t=>t==="auto"?t:St(t),json:{write:!0}})],Tl.prototype,"size",void 0),Tl=c([S("esri.symbols.MarkerSymbol")],Tl);const N4=Tl;var hv;const D4=te.ofType({base:null,key:"type",typeMap:{fill:Pp}});let Wf=hv=class extends Hg{constructor(t){super(t),this.symbolLayers=new D4,this.type="mesh-3d"}clone(){return new hv({styleOrigin:q(this.styleOrigin),symbolLayers:q(this.symbolLayers),thumbnail:q(this.thumbnail)})}static fromSimpleFillSymbol(t){return new hv({symbolLayers:new te([Pp.fromSimpleFillSymbol(t)])})}};c([d({type:D4})],Wf.prototype,"symbolLayers",void 0),c([me({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],Wf.prototype,"type",void 0),Wf=hv=c([S("esri.symbols.MeshSymbol3D")],Wf);const aw=Wf;function Oie(t,e,i){return e.imageData?FP({mediaType:e.contentType||"image/png",isBase64:!0,data:e.imageData}):F4(e.url,i)}function F4(t,e){var i;return Lie(e)&&!Zn(t)&&((i=e==null?void 0:e.layer)!=null&&i.parsedUrl)?M1(e.layer.parsedUrl.path,"images",t):Gg(t,e)}function Aie(t,e,i,n){if(Sd(t)){const r=Bm(t);if(!r)return;e.contentType=r.mediaType,e.imageData=r.data,i&&i.imageData===e.imageData&&i.url&&pp(i.url,e,"url",n)}else pp(t,e,"url",n)}const z4={json:{read:{source:["imageData","url"],reader:Oie},write:{writer(t,e,i,n){Aie(t,e,this.source,n)}}}},j4={readOnly:!0,json:{read:{source:["imageData","url"],reader(t,e,i){const n={};return e.imageData&&(n.imageData=e.imageData),e.contentType&&(n.contentType=e.contentType),e.url&&(n.url=F4(e.url,i)),n}}}};function Lie(t){var e,i;return!(t==null||t.origin!=="service"&&t.origin!=="portal-item"||((e=t.layer)==null?void 0:e.type)!=="feature"&&((i=t.layer)==null?void 0:i.type)!=="stream")}var qx;let pr=qx=class extends g4{constructor(...t){super(...t),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(t,e,i,n){if(t&&typeof t!="string"&&t.imageData==null)return t;const r={};return t&&(r.url=t),e&&(r.outline=e),i!=null&&(r.width=St(i)),n!=null&&(r.height=St(n)),r}clone(){const t=new qx({color:q(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return t._set("source",q(this.source)),t}hash(){var t;return`${super.hash()}.${(t=this.color)==null?void 0:t.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};c([me({esriPFS:"picture-fill"},{readOnly:!0})],pr.prototype,"type",void 0),c([d(z4)],pr.prototype,"url",void 0),c([d({type:Number,json:{write:!0}})],pr.prototype,"xscale",void 0),c([d({type:Number,json:{write:!0}})],pr.prototype,"yscale",void 0),c([d({type:Number,cast:St,json:{write:!0}})],pr.prototype,"width",void 0),c([d({type:Number,cast:St,json:{write:!0}})],pr.prototype,"height",void 0),c([d({type:Number,cast:St,json:{write:!0}})],pr.prototype,"xoffset",void 0),c([d({type:Number,cast:St,json:{write:!0}})],pr.prototype,"yoffset",void 0),c([d(j4)],pr.prototype,"source",void 0),pr=qx=c([S("esri.symbols.PictureFillSymbol")],pr);const G4=pr;var Wx;let is=Wx=class extends N4{constructor(...t){super(...t),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string"&&t.imageData==null)return t;const n={};return t&&(n.url=t),e!=null&&(n.width=St(e)),i!=null&&(n.height=St(i)),n}readHeight(t,e){return e.size||t}readWidth(t,e){return e.size||t}clone(){const t=new Wx({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return t._set("source",q(this.source)),t}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};c([d({json:{write:!1}})],is.prototype,"color",void 0),c([me({esriPMS:"picture-marker"},{readOnly:!0})],is.prototype,"type",void 0),c([d(z4)],is.prototype,"url",void 0),c([d(j4)],is.prototype,"source",void 0),c([d({type:Number,cast:St,json:{write:!0}})],is.prototype,"height",void 0),c([Ne("height",["height","size"])],is.prototype,"readHeight",null),c([d({type:Number,cast:St,json:{write:!0}})],is.prototype,"width",void 0),c([d({json:{write:!1}})],is.prototype,"size",void 0),is=Wx=c([S("esri.symbols.PictureMarkerSymbol")],is);const lw=is;var lu;const U4=te.ofType({base:null,key:"type",typeMap:{icon:Bu,object:qE,text:Rp}});let cu=lu=class extends Hg{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.symbolLayers=new U4,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const t of this.symbolLayers.items)switch(t.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return A4(this)}hasVisibleVerticalOffset(){return ZE(this)}clone(){return new lu({verticalOffset:q(this.verticalOffset),callout:q(this.callout),styleOrigin:q(this.styleOrigin),symbolLayers:q(this.symbolLayers),thumbnail:q(this.thumbnail)})}static fromSimpleMarkerSymbol(t){return new lu({symbolLayers:new te([Bu.fromSimpleMarkerSymbol(t)])})}static fromPictureMarkerSymbol(t){return new lu({symbolLayers:new te([Bu.fromPictureMarkerSymbol(t)])})}static fromCIMSymbol(t){var n,r;if(((r=(n=t.data)==null?void 0:n.symbol)==null?void 0:r.type)!=="CIMPointSymbol")return null;const i=t.data.symbol;return new lu(i!=null&&i.callout?{symbolLayers:new te([Bu.fromCIMSymbol(t)]),callout:new O4({size:.5,color:new Me([0,0,0])}),verticalOffset:new KE({screenLength:40})}:{symbolLayers:new te([Bu.fromCIMSymbol(t)])})}static fromTextSymbol(t){return new lu({symbolLayers:new te([Rp.fromTextSymbol(t)])})}};c([d({type:KE,json:{write:!0}})],cu.prototype,"verticalOffset",void 0),c([d(L4)],cu.prototype,"callout",void 0),c([d({type:U4,json:{origins:{"web-scene":{write:!0}}}})],cu.prototype,"symbolLayers",void 0),c([me({PointSymbol3D:"point-3d"},{readOnly:!0})],cu.prototype,"type",void 0),cu=lu=c([S("esri.symbols.PointSymbol3D")],cu);const XE=cu;var Zf;const H4=te.ofType({base:null,key:"type",typeMap:{extrude:f4,fill:Pp,icon:Bu,line:Ug,object:qE,text:Rp,water:M4}});let Kf=Zf=class extends Hg{constructor(t){super(t),this.symbolLayers=new H4,this.type="polygon-3d"}initialize(){const t=e=>{e.type==="line"&&ep(J.getLogger(this),"LineSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use FillSymbol3DLayer.outline instead.",version:"4.28"}),e.type==="text"&&ep(J.getLogger(this),"TextSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use Labels instead.",version:"4.28"})};for(const e of this.symbolLayers)t(e);this.addHandles(Lr(()=>this.symbolLayers,"after-add",({item:e})=>t(e),hc))}clone(){return new Zf({styleOrigin:q(this.styleOrigin),symbolLayers:q(this.symbolLayers),thumbnail:q(this.thumbnail)})}static fromJSON(t){var i;const e=new Zf;if(e.read(t),e.symbolLayers.length===2&&e.symbolLayers.at(0).type==="fill"&&e.symbolLayers.at(1).type==="line"){const n=e.symbolLayers.at(0),r=e.symbolLayers.at(1);!r.enabled||(i=t.symbolLayers)!=null&&i[1]&&t.symbolLayers[1].enable===!1||(n.outline={size:r.size,color:r.material!=null?r.material.color:null}),e.symbolLayers.removeAt(1)}return e}static fromSimpleFillSymbol(t){return new Zf({symbolLayers:new te([Pp.fromSimpleFillSymbol(t)])})}};c([d({type:H4,json:{write:!0}})],Kf.prototype,"symbolLayers",void 0),c([me({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],Kf.prototype,"type",void 0),Kf=Zf=c([S("esri.symbols.PolygonSymbol3D")],Kf);const QE=Kf;var Zx;const C_=new Kt({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let uu=Zx=class extends g4{constructor(...t){super(...t),this.color=new Me([0,0,0,.25]),this.outline=new Ja,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string")return t;const n={};return t&&(n.style=t),e&&(n.outline=e),i&&(n.color=i),n}clone(){return new Zx({color:q(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};c([d()],uu.prototype,"color",void 0),c([d()],uu.prototype,"outline",void 0),c([me({esriSFS:"simple-fill"},{readOnly:!0})],uu.prototype,"type",void 0),c([d({type:C_.apiValues,json:{read:C_.read,write:C_.write}})],uu.prototype,"style",void 0),uu=Zx=c([S("esri.symbols.SimpleFillSymbol")],uu);const Vg=uu;var Kx;const I_=new Kt({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let no=Kx=class extends N4{constructor(...t){super(...t),this.color=new Me([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new Ja}normalizeCtorArgs(t,e,i,n){if(t&&typeof t!="string")return t;const r={};return t&&(r.style=t),e!=null&&(r.size=St(e)),i&&(r.outline=i),n&&(r.color=n),r}writeColor(t,e){t&&this.style!=="x"&&this.style!=="cross"&&(e.color=t.toJSON()),t===null&&(e.color=null)}set path(t){this.style="path",this._set("path",t)}clone(){return new Kx({angle:this.angle,color:q(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var t;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(t=this.outline)==null?void 0:t.hash()}`}};c([d()],no.prototype,"color",void 0),c([Ie("color")],no.prototype,"writeColor",null),c([me({esriSMS:"simple-marker"},{readOnly:!0})],no.prototype,"type",void 0),c([d()],no.prototype,"size",void 0),c([d({type:I_.apiValues,json:{read:I_.read,write:I_.write}})],no.prototype,"style",void 0),c([d({type:String,json:{write:!0}})],no.prototype,"path",null),c([d({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Ja}},json:{default:null,write:!0}})],no.prototype,"outline",void 0),no=Kx=c([S("esri.symbols.SimpleMarkerSymbol")],no);const fp=no;var Jx;let gt=Jx=class extends nr{constructor(...t){super(...t),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new sw,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string")return t;const n={};return t&&(n.text=t),e&&(n.font=e),i&&(n.color=i),n}writeLineWidth(t,e,i,n){n&&typeof n!="string"?n.origin:e[i]=t}castLineWidth(t){return St(t)}writeLineHeight(t,e,i,n){n&&typeof n!="string"?n.origin:e[i]=t}clone(){return new Jx({angle:this.angle,backgroundColor:q(this.backgroundColor),borderLineColor:q(this.borderLineColor),borderLineSize:this.borderLineSize,color:q(this.color),font:this.font&&this.font.clone(),haloColor:q(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var t,e,i;return`${(t=this.backgroundColor)==null?void 0:t.hash()}.${this.borderLineColor}.${this.borderLineSize}.${(e=this.color)==null?void 0:e.hash()}.${this.font&&this.font.hash()}.${(i=this.haloColor)==null?void 0:i.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};c([d({type:Me,json:{write:!0}})],gt.prototype,"backgroundColor",void 0),c([d({type:Me,json:{write:!0}})],gt.prototype,"borderLineColor",void 0),c([d({type:Number,json:{write:!0},cast:St})],gt.prototype,"borderLineSize",void 0),c([d({type:sw,json:{write:!0}})],gt.prototype,"font",void 0),c([d({...$4,json:{write:!0}})],gt.prototype,"horizontalAlignment",void 0),c([d({type:Boolean,json:{write:!0}})],gt.prototype,"kerning",void 0),c([d({type:Me,json:{write:!0}})],gt.prototype,"haloColor",void 0),c([d({type:Number,cast:St,json:{write:!0}})],gt.prototype,"haloSize",void 0),c([d({type:Boolean,json:{write:!0}})],gt.prototype,"rightToLeft",void 0),c([d({type:Boolean,json:{write:!0}})],gt.prototype,"rotated",void 0),c([d({type:String,json:{write:!0}})],gt.prototype,"text",void 0),c([me({esriTS:"text"},{readOnly:!0})],gt.prototype,"type",void 0),c([d({...x4,json:{write:!0}})],gt.prototype,"verticalAlignment",void 0),c([d({type:Number,cast:St,json:{write:!0}})],gt.prototype,"xoffset",void 0),c([d({type:Number,cast:St,json:{write:!0}})],gt.prototype,"yoffset",void 0),c([d({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],gt.prototype,"angle",void 0),c([d({type:Number,json:{write:!0}})],gt.prototype,"width",void 0),c([d({type:Number})],gt.prototype,"lineWidth",void 0),c([Ie("lineWidth")],gt.prototype,"writeLineWidth",null),c([zt("lineWidth")],gt.prototype,"castLineWidth",null),c([d(S4)],gt.prototype,"lineHeight",void 0),c([Ie("lineHeight")],gt.prototype,"writeLineHeight",null),gt=Jx=c([S("esri.symbols.TextSymbol")],gt);const Bg=gt;var Yx;let ns=Yx=class extends nr{constructor(t){super(t),this.color=null,this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const t=this.portal!=null?this.portal:ir.getDefault(),e=t.user?t.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${e}:${t.url}`}read(t,e){this.portal=e==null?void 0:e.portal,super.read(t,e)}clone(){return new Yx({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(t){return this._fetchSymbol("webRef",t)}fetchCIMSymbol(t){return this._fetchSymbol("cimRef",t)}async _fetchSymbol(t,e){const i=e!=null?e.cache:null,n=i?this._fetchCacheKey:null;if(i!=null){const a=n&&i.get(n);if(a)return a.clone()}const{resolveWebStyleSymbol:r}=await V(()=>import("./webStyleSymbolUtils-kjfVwPY4.js"),__vite__mapDeps([129,130,125,126]),import.meta.url);Qe(e);const s=r(this,{portal:this.portal},t,e);s.catch(a=>{J.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",a)});const o=await s;return t==="webRef"&&o.type==="point-3d"||t==="cimRef"&&o.type==="cim"?(i!=null&&i.set(n,o.clone()),o):null}};c([d({json:{write:!1}})],ns.prototype,"color",void 0),c([d({type:String,json:{write:!0}})],ns.prototype,"styleName",void 0),c([d({type:ir,json:{write:!1}})],ns.prototype,"portal",void 0),c([d({type:String,json:{read:BE,write:pp}})],ns.prototype,"styleUrl",void 0),c([d({type:Lm,json:{read:!1}})],ns.prototype,"thumbnail",void 0),c([d({type:String,json:{write:!0}})],ns.prototype,"name",void 0),c([me({styleSymbolReference:"web-style"},{readOnly:!0})],ns.prototype,"type",void 0),c([d()],ns.prototype,"_fetchCacheKey",null),ns=Yx=c([S("esri.symbols.WebStyleSymbol")],ns);const cw=ns;function F$e(t){if(!t)return!1;switch(t.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function z$e(t){if(!t)return!1;switch(t.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const qu={base:nr,key:"type",typeMap:{"simple-fill":Vg,"picture-fill":G4,"picture-marker":lw,"simple-line":Ja,"simple-marker":fp,text:Bg,"label-3d":JE,"line-3d":YE,"mesh-3d":aw,"point-3d":XE,"polygon-3d":QE,"web-style":cw,cim:rw},errorContext:"symbol"},j$e={base:nr,key:"type",typeMap:{"picture-marker":lw,"simple-marker":fp,text:Bg,"web-style":cw,cim:rw},errorContext:"symbol"},G$e=xT({types:qu}),U$e={base:nr,key:"type",typeMap:{"simple-fill":Vg,"picture-fill":G4,"picture-marker":lw,"simple-line":Ja,"simple-marker":fp,text:Bg,"line-3d":YE,"mesh-3d":aw,"point-3d":XE,"polygon-3d":QE,"web-style":cw,cim:rw},errorContext:"symbol"},H$e={base:nr,key:"type",typeMap:{text:Bg,"label-3d":JE},errorContext:"symbol"},V$e={base:nr,key:"type",typeMap:{"line-3d":YE,"mesh-3d":aw,"point-3d":XE,"polygon-3d":QE,"web-style":cw,cim:rw},errorContext:"symbol"},B$e={base:nr,key:"type",typeMap:{"label-3d":JE},errorContext:"symbol"},q$e=ja(qu);var Xx;function Pie(t){if(!t)return null;const e={};for(const i in t){const n=ap(t[i]);n&&(e[i]=n)}return Object.keys(e).length!==0?e:null}function Rie(t){if(t==null)return null;const e={};for(const i in t){const n=t[i];n&&(e[i]=n.toJSON())}return Object.keys(e).length!==0?e:null}let fn=Xx=class extends No(ie){constructor(...t){super(...t),this.isAggregate=!1,this.layer=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:Fh(),configurable:!0})}normalizeCtorArgs(t,e,i,n){return t&&!t.declaredClass?t:{geometry:t,symbol:e,attributes:i,popupTemplate:n}}set aggregateGeometries(t){const e=this._get("aggregateGeometries");JSON.stringify(e)!==JSON.stringify(t)&&this._set("aggregateGeometries",t)}set attributes(t){const e=this._get("attributes");e!==t&&(this._set("attributes",t),this._notifyLayer("attributes",e,t))}set geometry(t){const e=this._get("geometry");e!==t&&(this._set("geometry",t),this._notifyLayer("geometry",e,t))}set symbol(t){const e=this._get("symbol");e!==t&&(this._set("symbol",t),this._notifyLayer("symbol",e,t))}set visible(t){const e=this._get("visible");e!==t&&(this._set("visible",t),this._notifyLayer("visible",e,t))}cloneShallow(){return new Xx({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible})}getEffectivePopupTemplate(t=!1){if(this.popupTemplate)return this.popupTemplate;for(const e of[this.sourceLayer,this.layer])if(e){if("popupTemplate"in e&&e.popupTemplate)return e.popupTemplate;if(t&&"defaultPopupTemplate"in e&&e.defaultPopupTemplate!=null)return e.defaultPopupTemplate}return null}getAttribute(t){var e;return(e=this.attributes)==null?void 0:e[t]}setAttribute(t,e){if(this.attributes){const i=this.getAttribute(t);this.attributes[t]=e,this._notifyLayer("attributes",i,e,t)}else this.attributes={[t]:e},this._notifyLayer("attributes",void 0,e,t)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){var t;return{aggregateGeometries:Rie(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:YS(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:((t=this.popupTemplate)==null?void 0:t.toJSON())??null}}notifyGeometryChanged(){this._notifyLayer("geometry",this.geometry,this.geometry)}notifyMeshTransformChanged(t={}){const{geometry:e}=this;if((e==null?void 0:e.type)==="mesh"){const i={origin:e.origin,transform:e.transform};this._notifyLayer("origin-transform",i,i,t.action)}}_notifyLayer(t,e,i,n){if(!this.layer||!("graphicChanged"in this.layer))return;const r={graphic:this,property:t,oldValue:e,newValue:i};t==="origin-transform"&&(r.action=n),t==="attributes"&&(r.attributeName=n),this.layer.graphicChanged(r)}};c([d({value:null,json:{read:Pie}})],fn.prototype,"aggregateGeometries",null),c([d({value:null})],fn.prototype,"attributes",null),c([d({value:null,types:Ig,json:{read:ap}})],fn.prototype,"geometry",null),c([d({type:Boolean})],fn.prototype,"isAggregate",void 0),c([d({clonable:"reference"})],fn.prototype,"layer",void 0),c([d({type:zE})],fn.prototype,"popupTemplate",void 0),c([d({clonable:"reference"})],fn.prototype,"sourceLayer",void 0),c([d({value:null,types:qu})],fn.prototype,"symbol",null),c([d({type:Boolean,value:!0})],fn.prototype,"visible",null),fn=Xx=c([S("esri.Graphic")],fn),function(t){t.generateUID=Fh}(fn||(fn={}));const mp=fn;let Ju=class extends km{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};c([sN({Type:mp,ensureType:ti(mp)})],Ju.prototype,"itemType",void 0),Ju=c([S("esri.support.GraphicsCollection")],Ju);let El=class extends X{constructor(e){super(e),this.view=null,this.baseLayerViews=new te,this.referenceLayerViews=new te,this._loadingHandle=Z(()=>{var i,n;return(n=(i=this.view)==null?void 0:i.map)==null?void 0:n.basemap},i=>{i&&i.load().catch(()=>{})},De)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null);for(const e of this.baseLayerViews)e.destroy();this.baseLayerViews.length=0;for(const e of this.referenceLayerViews)e.destroy();this.referenceLayerViews.length=0}get suspended(){return!this.view||this.view.suspended}get updating(){var i,n;if(this.view&&this.view.suspended)return!1;const e=(n=(i=this.view)==null?void 0:i.map)==null?void 0:n.basemap;return!!e&&!!e.loaded&&(this.baseLayerViews.some(r=>r.updating)||this.referenceLayerViews.some(r=>r.updating))}};c([d({constructOnly:!0})],El.prototype,"view",void 0),c([d({readOnly:!0})],El.prototype,"baseLayerViews",void 0),c([d({readOnly:!0})],El.prototype,"referenceLayerViews",void 0),c([d({readOnly:!0})],El.prototype,"suspended",null),c([d({type:Boolean,readOnly:!0})],El.prototype,"updating",null),El=c([S("esri.views.BasemapView")],El);function Nie(t){return"tryRecycleWith"in t}let Die=class{constructor(e,i,n){this.layer=e,this.view=i,this.layerViewImporter=n,this._controller=new AbortController,this._deferred=Or(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,Mr(this._controller.signal,()=>{const r=new F("cancelled:layerview-create","layerview creation cancelled",{layer:e});this._deferred.reject(r)})}tryRecycle(e){if(!this.done||!this.layerView||!Nie(this.layerView))return null;const i=this.layer.type,n=this._controller.signal;for(let r=0;r<e.length;r++){const s=e[r];if(s.type!==i)continue;const o=this.layerView.tryRecycleWith(s,{signal:n});if(o){e.splice(r,1),this.layer=s;const a=this.layerView,l=a.view;return this.promise=Promise.race([o.then(()=>(Qe(this._controller.signal),s.emit("layerview-destroy",{view:l,layerView:a}),l.emit("layerview-destroy",{view:l,layerView:a}),s.emit("layerview-create",{view:l,layerView:a}),l.emit("layerview-create",{view:l,layerView:a}),a)),new Promise((u,p)=>Mr(this._controller.signal,()=>p(Xe())))]),this.promise}}return null}destroy(){this._controller.abort();const{layerView:e}=this;if(e){const{layer:i,view:n}=this;i.emit("layerview-destroy",{view:n,layerView:e}),n.emit("layerview-destroy",{layer:i,layerView:e})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null}async start(){var r,s;if(this._started)return;this._started=!0;const{_controller:{signal:e},layer:i,view:n}=this;this._map=n.map;try{let o,a;if(await i.load({signal:e}),i.prefetchResources&&await i.prefetchResources({signal:e}),zie(i))o=await i.createLayerView(n,{signal:e});else{if(!this.layerViewImporter.hasLayerViewModule(i))throw new F("layer:view-not-supported","No layerview implementation was found");const p=await this.layerViewImporter.importLayerView(i);Qe(e),o="default"in p?new p.default({layer:i,view:n}):new p({layer:i,view:n})}const l=()=>{a=Je(a),o.destroyed||o.destroy(),o.layer=null,o.parent=null,o.view=null,this.done=!0};a=Mr(e,l),Qe(e);try{await o.when()}catch(p){throw l(),p}if(!((s=(r=this._map)==null?void 0:r.allLayers)==null?void 0:s.includes(i)))return l(),void this._deferred.reject(new F("view:no-layerview-for-layer","The layer has been removed from the map",{layer:i}));this.layerView=o,i.emit("layerview-create",{view:n,layerView:o}),n.emit("layerview-create",{layer:i,layerView:o}),this.done=!0,this._deferred.resolve(o)}catch(o){i.emit("layerview-create-error",{view:n,error:o}),n.emit("layerview-create-error",{layer:i,error:o}),this.done=!0,this._deferred.reject(new F("layerview:create-error","layerview creation failed",{layer:i,error:o}))}}},fr=class extends X{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new nc,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var n;const i=(n=this.view.map)==null?void 0:n.allLayers;if(i)for(const r of i)this.layerViewImporter.hasLayerViewModule(r)&&this.layerViewImporter.importLayerView(r)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=Or(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles($g(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var l,u,p;if(this.destroyed)return;const i=this.view.map;if(this._map!==i&&(this.clear(),this._map=i),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const n=new Set,r=[],s=this.view.ready,o=f=>{if(f!=null){for(const m of f)if(m){n.add(m);const g=this._layerLayerViewInfoMap.get(m);g&&s?g.start():g||this._recyclingInfoMap.has(m)||r.push(m),"layers"in m&&m.layers&&o(m.layers)}}};for(const f of this._rootCollectionNames)o(Tn(this,f));for(const[f,m]of this._layerLayerViewInfoMap)if(!n.has(f)){this._layerLayerViewInfoMap.delete(m.layer);const g=m.tryRecycle(r);g?(this.notifyChange("updating"),this._recyclingInfoMap.set(m.layer,m),g.then(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(m.layer),this._layerLayerViewInfoMap.set(m.layer,m),this._reschedule()}).catch(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(m.layer),m.destroy(),this._reschedule()})):m.destroy()}for(const[f,m]of this._recyclingInfoMap)n.has(f)||(this.notifyChange("updating"),this._recyclingInfoMap.delete(m.layer),m.destroy());for(const f of r)this._createLayerView(f);this._refreshCollections();const a=[(l=i==null?void 0:i.ground)==null?void 0:l.layers,(u=i==null?void 0:i.basemap)==null?void 0:u.baseLayers,(p=i==null?void 0:i.basemap)==null?void 0:p.referenceLayers,i==null?void 0:i.layers].filter(f=>!!f);n.forEach(f=>"layers"in f&&a.push(f.layers)),this.addHandles(a.map(f=>this._watchUpdatingTracking.addOnCollectionChange(()=>f,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.addHandles([Lr(()=>{var e,i;return(i=(e=this.view)==null?void 0:e.map)==null?void 0:i.allLayers},"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),Z(()=>{const e=this.view,i=e==null?void 0:e.map;return[i==null?void 0:i.basemap,i==null?void 0:i.ground,i==null?void 0:i.layers,e==null?void 0:e.ready]},()=>this._reschedule(),di)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),$_(this._recyclingInfoMap),$_(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(Xe()),this._workPromise=null)}get _layersToLayerViews(){const e=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&e.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(e)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||x1(this._layerLayerViewInfoMap,e=>!e.done)||this._recyclingInfoMap.size>0}get updatingRemaining(){let e=0;for(const i of this._layerLayerViewInfoMap.values())i.done||++e;return e}clear(){this.destroyed||($_(this._layerLayerViewInfoMap),this._refreshCollections())}async whenLayerView(e){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(e)){if(this._recyclingInfoMap.has(e))return this._recyclingInfoMap.get(e).promise;throw new F("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e})}return this._layerLayerViewInfoMap.get(e).promise}_refreshCollections(){for(const[e,i]of this._layersToLayerViews)this._populateLayerViewsOwners(Tn(this,e),Tn(this,i),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(e,i,n){if(!e||!i)return void(i&&i.removeAll());let r=0;for(const s of e){const o=this._layerLayerViewInfoMap.get(s);if(!(o!=null&&o.layerView))continue;const a=o.layerView;a.layer=s,a.parent=n,i.at(r)!==a&&i.splice(r,0,a),s.layers&&this._populateLayerViewsOwners(s.layers,a.layerViews,a),r+=1}r<i.length&&i.splice(r,i.length)}_createLayerView(e){e.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const i=new Die(e,this.view,this.layerViewImporter);i.promise.then(()=>this._refreshCollections(),n=>{n&&(en(n)||n.name==="cancelled:layerview-create")||J.getLogger(this).error(`Failed to create layerview for layer title:'${e.title??"no title"}', id:'${e.id??"no id"}' of type '${e.type}'.`,{layer:e,error:n}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(e,i),this.view.ready&&i.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};c([d()],fr.prototype,"_workPromise",void 0),c([d({readOnly:!0})],fr.prototype,"_watchUpdatingTracking",void 0),c([d({readOnly:!0})],fr.prototype,"_layersToLayerViews",null),c([d({readOnly:!0})],fr.prototype,"_rootCollectionNames",null),c([d()],fr.prototype,"layerViewImporter",void 0),c([d()],fr.prototype,"supportsGround",void 0),c([d({readOnly:!0})],fr.prototype,"updating",null),c([d({readOnly:!0})],fr.prototype,"updatingRemaining",null),c([d({constructOnly:!0})],fr.prototype,"view",void 0),fr=c([S("esri.views.LayerViewManager")],fr);const Fie=fr;function zie(t){return"createLayerView"in t&&t.createLayerView!=null}let jn=class extends X{constructor(e){super(e),this.factor=1.5,this.offset=ji(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};c([d({type:Number})],jn.prototype,"factor",void 0),c([d({nonNullable:!0})],jn.prototype,"offset",void 0),c([d()],jn.prototype,"position",void 0),c([d({type:Number,range:{min:0}})],jn.prototype,"size",void 0),c([d()],jn.prototype,"maskUrl",void 0),c([d()],jn.prototype,"maskEnabled",void 0),c([d()],jn.prototype,"overlayUrl",void 0),c([d()],jn.prototype,"overlayEnabled",void 0),c([d({readOnly:!0})],jn.prototype,"version",null),c([d({type:Boolean})],jn.prototype,"visible",void 0),jn=c([S("esri.views.Magnifier")],jn);const V4=jn;let Jf=class extends No(X){constructor(e){super(e),this.accentColor=new Me([255,127,0]),this.textColor=new Me([255,255,255])}};c([d({type:Me,nonNullable:!0})],Jf.prototype,"accentColor",void 0),c([d({type:Me,nonNullable:!0})],Jf.prototype,"textColor",void 0),Jf=c([S("esri.views.Theme")],Jf);const Qx=Jf;var lO;(function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right"})(lO||(lO={}));const B4=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],q4={};function W4(t){return!!q4[t]}function jie(t){for(const e of t)if(!W4(e))return!1;return!0}B4.forEach(t=>{q4[t]=!0});let Gie=class{constructor(e){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=e,this.inputManager=null}connect(e){e&&this.disconnect(),this.inputManager=e,this._handlers.forEach(({handler:i,priority:n},r)=>{var s;return(s=this.inputManager)==null?void 0:s.installHandlers(r,[i],n)})}disconnect(){this.inputManager&&this._handlers.forEach((e,i)=>{var n;return(n=this.inputManager)==null?void 0:n.uninstallHandlers(i)}),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(e,i,n,r){const s=Array.isArray(e)?e:e.split(",");if(!jie(s))return s.some(W4)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let o,a;Array.isArray(i)?a=i:(o=i,a=[]),typeof n=="function"?o=n:r=n,r=r??et.DEFAULT;const l=this._createUniqueGroupName(),u=new Uie(this.view,s,a,o);this._handlers.set(l,{handler:u,priority:r});for(const p of s){const f=this._handlerCounts.get(p)||0;this._handlerCounts.set(p,f+1)}return this.inputManager&&this.inputManager.installHandlers(l,[u],r),Ye(()=>this._removeHandler(l,s))}hasHandler(e){return!!this._handlerCounts.get(e)}_removeHandler(e,i){if(this._handlers.has(e)){this._handlers.delete(e);for(const n of i){const r=this._handlerCounts.get(n);r===void 0?console.error("Trying to remove handler for event that has no handlers registered: ",n):r===1?this._handlerCounts.delete(n):this._handlerCounts.set(n,r-1)}}this.inputManager&&this.inputManager.uninstallHandlers(e)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},Uie=class extends ni{constructor(e,i,n,r){super(!0),this._latestDragStart=void 0,this.view=e;for(const s of i)switch(s){case"click":this.registerIncoming("click",n,o=>r(this._wrapClick(o)));break;case"double-click":this.registerIncoming("double-click",n,o=>r(this._wrapDoubleClick(o)));break;case"immediate-click":this.registerIncoming("immediate-click",n,o=>r(this._wrapImmediateClick(o)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",n,o=>r(this._wrapImmediateDoubleClick(o)));break;case"hold":this.registerIncoming("hold",n,o=>r(this._wrapHold(o)));break;case"drag":this.registerIncoming("drag",n,o=>{const a=this._wrapDrag(o);a&&r(a)});break;case"key-down":this.registerIncoming("key-down",n,o=>r(this._wrapKeyDown(o)));break;case"key-up":this.registerIncoming("key-up",n,o=>r(this._wrapKeyUp(o)));break;case"pointer-down":this.registerIncoming("pointer-down",n,o=>r(this._wrapPointer(o,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",n,o=>r(this._wrapPointer(o,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",n,o=>r(this._wrapPointer(o,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",n,o=>r(this._wrapPointerDrag(o)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",n,o=>r(this._wrapMouseWheel(o)));break;case"pointer-enter":this.registerIncoming("pointer-enter",n,o=>r(this._wrapPointer(o,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",n,o=>r(this._wrapPointer(o,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",n,o=>{r(this._wrapGamepad(o))});break;case"focus":this.registerIncoming("focus",n,o=>{r(this._wrapFocus(o))});break;case"blur":this.registerIncoming("blur",n,o=>{r(this._wrapBlur(o))})}}_wrapFocus(e){return{type:"focus",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:i=>e.async(i),preventDefault:()=>e.preventDefault()}}_wrapBlur(e){return{type:"blur",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:i=>e.async(i),preventDefault:()=>e.preventDefault()}}_wrapClick(e){const{pointerType:i,button:n,buttons:r,x:s,y:o,native:a,eventId:l}=e.data,{cancelable:u,timestamp:p}=e;return{type:"click",pointerType:i,button:n,buttons:r,x:s,y:o,native:a,timestamp:p,screenPoint:ji(s,o),mapPoint:this._getMapPoint(s,o),eventId:l,cancelable:u,stopPropagation:()=>e.stopPropagation(),async:f=>e.async(f),preventDefault:()=>e.preventDefault()}}_wrapDoubleClick(e){const{pointerType:i,button:n,buttons:r,x:s,y:o,native:a,eventId:l}=e.data,{cancelable:u,timestamp:p}=e;return{type:"double-click",pointerType:i,button:n,buttons:r,x:s,y:o,native:a,timestamp:p,mapPoint:this._getMapPoint(s,o),eventId:l,cancelable:u,stopPropagation:()=>e.stopPropagation(),async:f=>e.async(f),preventDefault:()=>e.preventDefault()}}_wrapImmediateClick(e){const{pointerType:i,button:n,buttons:r,x:s,y:o,native:a,eventId:l}=e.data,u=a.pointerId,{cancelable:p,timestamp:f}=e;return{type:"immediate-click",pointerId:u,pointerType:i,button:n,buttons:r,x:s,y:o,native:a,timestamp:f,mapPoint:this._getMapPoint(s,o),eventId:l,cancelable:p,stopPropagation:()=>e.stopPropagation(),async:m=>e.async(m),preventDefault:()=>e.preventDefault()}}_wrapImmediateDoubleClick(e){const{pointerType:i,button:n,buttons:r,x:s,y:o,native:a,eventId:l}=e.data,u=a.pointerId,{cancelable:p,timestamp:f}=e;return{type:"immediate-double-click",pointerId:u,pointerType:i,button:n,buttons:r,x:s,y:o,native:a,timestamp:f,mapPoint:this._getMapPoint(s,o),eventId:l,cancelable:p,stopPropagation:()=>e.stopPropagation(),async:m=>e.async(m),preventDefault:()=>e.preventDefault()}}_wrapHold(e){const{pointerType:i,button:n,buttons:r,x:s,y:o,native:a}=e.data,{cancelable:l,timestamp:u}=e;return{type:"hold",pointerType:i,button:n,buttons:r,x:s,y:o,native:a,timestamp:u,mapPoint:this._getMapPoint(s,o),cancelable:l,stopPropagation:()=>e.stopPropagation(),async:p=>e.async(p),preventDefault:()=>e.preventDefault()}}_getMapPoint(e,i){return this.view.toMap(ji(e,i),{exclude:[]})}_wrapDrag(e){const i=e.data,{x:n,y:r}=i.center,{action:s,pointerType:o,button:a}=i;if(s==="start"&&(this._latestDragStart=i),!this._latestDragStart)return;const l=i.pointer.native,u=i.buttons,{cancelable:p,timestamp:f}=e,m={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return s==="end"&&(this._latestDragStart=void 0),{type:"drag",action:s,x:n,y:r,origin:m,pointerType:o,button:a,buttons:u,radius:i.radius,angle:kR(i.angle),native:l,timestamp:f,cancelable:p,stopPropagation:()=>e.stopPropagation(),async:g=>e.async(g),preventDefault:()=>e.preventDefault()}}_wrapKeyDown(e){const{key:i,repeat:n,native:r}=e.data,{cancelable:s,timestamp:o}=e;return{type:"key-down",key:i,repeat:n,native:r,timestamp:o,cancelable:s,stopPropagation:()=>e.stopPropagation(),async:a=>e.async(a),preventDefault:()=>e.preventDefault()}}_wrapKeyUp(e){const{key:i,native:n}=e.data,{cancelable:r,timestamp:s}=e;return{type:"key-up",key:i,native:n,timestamp:s,cancelable:r,stopPropagation:()=>e.stopPropagation(),async:o=>e.async(o),preventDefault:()=>e.preventDefault()}}_wrapPointer(e,i){const{x:n,y:r,button:s,buttons:o,native:a,eventId:l}=e.data,u=a.pointerId,p=a.pointerType,{cancelable:f,timestamp:m}=e;return{type:i,x:n,y:r,pointerId:u,pointerType:p,button:s,buttons:o,native:a,timestamp:m,eventId:l,cancelable:f,stopPropagation:()=>e.stopPropagation(),async:g=>e.async(g),preventDefault:()=>e.preventDefault()}}_wrapPointerDrag(e){const{x:i,y:n,buttons:r,native:s,eventId:o}=e.data.currentEvent,{button:a}=e.data.startEvent,l=e.data.startEvent.native.pointerId,u=e.data.startEvent.native.pointerType,p=e.data.action,f={x:e.data.startEvent.x,y:e.data.startEvent.y},{cancelable:m,timestamp:g}=e;return{type:"pointer-drag",x:i,y:n,pointerId:l,pointerType:u,button:a,buttons:r,action:p,origin:f,native:s,timestamp:g,eventId:o,cancelable:m,stopPropagation:()=>e.stopPropagation(),async:y=>e.async(y),preventDefault:()=>e.preventDefault()}}_wrapMouseWheel(e){const{cancelable:i,data:n,timestamp:r}=e,{x:s,y:o,deltaY:a,native:l}=n;return{type:"mouse-wheel",x:s,y:o,deltaY:a,native:l,timestamp:r,cancelable:i,stopPropagation:()=>e.stopPropagation(),async:u=>e.async(u),preventDefault:()=>e.preventDefault()}}_wrapGamepad(e){const{action:i,state:n,device:r}=e.data,{cancelable:s,timestamp:o}=e,{buttons:a,axes:l}=n;return{type:"gamepad",device:r,timestamp:o,action:i,buttons:a,axes:l,cancelable:s,stopPropagation:()=>e.stopPropagation(),async:u=>e.async(u),preventDefault:()=>e.preventDefault()}}};var sg,cO,uO;(function(t){t[t.USER=0]="USER",t[t.MANAGER=1]="MANAGER"})(sg||(sg={})),function(t){t[t.None=0]="None",t[t.Unfocused=1]="Unfocused",t[t.Focused=2]="Focused",t[t.Unselected=4]="Unselected",t[t.Selected=8]="Selected",t[t.All=15]="All"}(cO||(cO={})),function(t){t[t.None=0]="None",t[t.Custom1=16]="Custom1",t[t.Custom2=32]="Custom2",t[t.Custom3=64]="Custom3",t[t.Custom4=128]="Custom4",t[t.Custom5=256]="Custom5",t[t.Custom6=512]="Custom6",t[t.Custom7=1024]="Custom7",t[t.Custom8=2048]="Custom8",t[t.Custom9=4096]="Custom9",t[t.Custom10=8192]="Custom10",t[t.Custom11=16384]="Custom11",t[t.Custom12=32768]="Custom12",t[t.All=65520]="All"}(uO||(uO={}));function Hie(t){return[t.on("before-add",e=>{const i=e.item;if(i==null||t.includes(i))return J.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void e.preventDefault();i.onAdd()}),t.on("after-remove",e=>{const i=e.item;i.active&&(i.view.activeTool=null),i.destroy()})]}function e2(t){return t.visible&&t.getEditableFlag!=null&&t.getEditableFlag(sg.USER)&&t.getEditableFlag(sg.MANAGER)}function br(t){return ji(t.x,t.y)}function Z4(t,e){var n;const i=(n=t instanceof HTMLElement?t:t.surface)==null?void 0:n.getBoundingClientRect();return i?ji(e.clientX-i.left,e.clientY-i.top):ji(0,0)}function K4(t,e){return e instanceof Event?Z4(t,e):br(e)}function J4(t){if(t instanceof Event)return!0;if(typeof t=="object"&&"type"in t)switch(t.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let Vie=class{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(e,i){const n=()=>e.stopPropagation();switch(e.type){case"pointer-move":dO(e.pointerType)&&this._pointerLocations.set(e.pointerId,{x:e.x,y:e.y,pointerType:e.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(n(),e.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!hO(e))break;const r=br(e),s=this._intersect(r,e.pointerType,i.forEachTool);if(s==null)break;const o=s.manipulator,a=s.tool;o==null||a==null||!o.interactive||o.grabbable&&o.grabbableForEvent(e)||!o.grabbing||o.dragging||this._ungrabManipulatorBeforeDragging(o,e,i),o!=null&&a!=null&&o.interactive&&o.grabbable&&o.grabbableForEvent(e)&&!o.grabbing&&(this._grabbedManipulators.set(e.pointerId,{manipulator:o,tool:a,start:r,pointerType:e.pointerType}),this._grabbedManipulators.size===1&&i.activeTool==null&&(this._revertToNullActiveTool=!0,i.setActiveTool(s.tool)),o.grabbing=!0,o.events.emit("grab-changed",{action:"start",pointerType:e.pointerType,screenPoint:r}),n());break}case"pointer-up":this._draggedManipulators.has(e.pointerId)||this._handlePointerEnd(e,i);break;case"pointer-drag":{if(!hO(e))break;const r=this._grabbedManipulators.get(e.pointerId),s=r==null?void 0:r.manipulator,o=r==null?void 0:r.tool;if(s==null||o==null)break;const a=br(e);a.x=Ar(a.x,0,i.view.width),a.y=Ar(a.y,0,i.view.height);const l=r.start,u=this._draggedManipulators.get(e.pointerId);switch(e.action){case"start":case"update":e.action!=="update"&&this._grabbedManipulators.size!==1||(s.dragging=!0,u?s.events.emit("drag",{action:"update",start:l,screenPoint:a}):s.events.emit("drag",{action:"start",start:l,screenPoint:a,pointerType:e.pointerType}),this._draggedManipulators.set(e.pointerId,{tool:o,manipulator:s,start:l}));break;case"end":s.dragging=!1,u&&s.events.emit("drag",{action:"end",start:l,screenPoint:a}),this._draggedManipulators.delete(e.pointerId),this._handlePointerEnd(e,i)}n();break}case"immediate-click":{const r=br(e),s=this._intersect(r,e.pointerType,i.forEachTool);if(Bie(e)||i.forEachTool(u=>{if((s==null||s.tool!==u||u.automaticManipulatorSelection)&&u.manipulators){let p=!1;u.manipulators.forEach(({manipulator:f})=>{f.selected&&(f.selected=!1,p=!0)}),p&&u.onManipulatorSelectionChanged&&u.onManipulatorSelectionChanged()}}),s==null)break;const{manipulator:o,tool:a}=s;if(!o.interactive)break;o.selectable&&a.automaticManipulatorSelection&&(o.selected=!o.selected,a.onManipulatorSelectionChanged&&a.onManipulatorSelectionChanged());const l=e.native.shiftKey;o.events.emit("immediate-click",{screenPoint:r,button:e.button,pointerType:e.pointerType,shiftKey:l,stopPropagation:n}),O_(o,n);break}case"click":{const r=br(e),s=this._intersect(r,e.pointerType,i.forEachTool),o=s==null?void 0:s.manipulator;if(o==null||!o.interactive)break;const a=e.native.shiftKey;o.events.emit(e.type,{screenPoint:r,button:e.button,pointerType:e.pointerType,shiftKey:a}),n();break}case"double-click":{const r=br(e),s=this._intersect(r,e.pointerType,i.forEachTool),o=s!=null?s.manipulator:null;if(o==null||!o.interactive)break;const a=e.native.shiftKey;o.events.emit("double-click",{screenPoint:r,button:e.button,pointerType:e.pointerType,shiftKey:a,stopPropagation:n}),O_(o,n);break}case"immediate-double-click":{const r=br(e),s=this._intersect(r,e.pointerType,i.forEachTool),o=s!=null?s.manipulator:null;if(o==null||!o.interactive)break;const a=e.native.shiftKey;o.events.emit("immediate-double-click",{screenPoint:r,button:e.button,pointerType:e.pointerType,shiftKey:a,stopPropagation:n}),O_(o,n);break}}this._onFocusChange(i.forEachTool)}_ungrabManipulatorBeforeDragging(e,i,n){e.grabbing=!1,e.events.emit("grab-changed",{action:"end",pointerType:i.pointerType,screenPoint:br(i)}),this._grabbedManipulators.forEach(({manipulator:r},s)=>{r===e&&this._grabbedManipulators.delete(s)}),this._afterManipulatorUngrab(n.setActiveTool)}_handlePointerEnd(e,i){var r;const n=(r=this._grabbedManipulators.get(e.pointerId))==null?void 0:r.manipulator;n!=null&&n.grabbing&&(n.grabbing=!1,n.events.emit("grab-changed",{action:"end",pointerType:e.pointerType,screenPoint:br(e)}),this._grabbedManipulators.delete(e.pointerId),this._afterManipulatorUngrab(i.setActiveTool))}_cursorFromMap(e){let i=null;return x1(e,({manipulator:n})=>!(n==null||!n.interactive)&&(n.grabbing&&n.grabCursor?(i=n.grabCursor,!0):!!n.cursor&&(i=n.cursor,!0))),i}_onFocusChange(e){this._updateCursor(),this._updateFocusedManipulatorTools(e)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=this._cursorFromMap(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=this._cursorFromMap(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(e){const i=new Set,n=new Set;this._grabbedManipulators.forEach(({tool:r})=>{i.add(r)}),this._hoveredManipulators.forEach(({tool:r})=>{n.add(r)}),e(r=>{r.hasGrabbedManipulators=i.has(r),r.hasHoveredManipulators=n.has(r);const s=this._grabbedManipulators.values(),o=s7(s,({tool:a})=>a===r);r.firstGrabbedManipulator=o!=null?o.manipulator:null})}clearPointers(e,{forEachTool:i,setActiveTool:n},r=!0,s){const o=(a,l)=>a===e&&(s==null||s===l);this._grabbedManipulators.forEach(({tool:a,manipulator:l,pointerType:u},p)=>{o(a,l)&&(this._grabbedManipulators.delete(p),l.grabbing=!1,l.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:u}))}),this._draggedManipulators.forEach(({tool:a,manipulator:l},u)=>{o(a,l)&&(this._draggedManipulators.delete(u),l.dragging=!1,l.events.emit("drag",{action:"cancel"}))}),r&&this._hoveredManipulators.forEach(({tool:a,manipulator:l},u)=>{o(a,l)&&(this._hoveredManipulators.delete(u),l.hovering=!1)}),this._afterManipulatorUngrab(n),this._onFocusChange(i)}_intersect(e,i,n){let r=null;return n(s=>{if(s.manipulators==null||!e2(s))return!1;const o=s.manipulators.intersect(e,i);return o!=null&&(r={tool:s,manipulator:o},!0)}),r}updateHoveredStateFromKnownPointers(e){this._pointerLocations.forEach((i,n)=>{this._updateHoveredStateForPointerAtScreenPosition(ji(i.x,i.y),n,i.pointerType,e)})}handleHoverEvent(e,i){e.type!=="pointer-up"&&e.type!=="immediate-click"&&e.type!=="pointer-move"||!dO(e.pointerType)||this._updateHoveredStateForPointerAtScreenPosition(br(e),e.pointerId,e.pointerType,i)}_updateHoveredStateForPointerAtScreenPosition(e,i,n,r){var a;let s=this._intersect(e,n,r);const o=(a=this._hoveredManipulators.get(i))==null?void 0:a.manipulator;s==null||s.manipulator.interactive||(s=null),s!=null&&o===s.manipulator||(o!=null&&(o.hovering=!1),s!=null?(s.manipulator.hovering=!0,this._hoveredManipulators.set(i,s)):this._hoveredManipulators.delete(i),this._onFocusChange(r))}_afterManipulatorUngrab(e){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(e(null),this._revertToNullActiveTool=!1)}};function dO(t){return t==="mouse"}function hO(t){return t.pointerType!=="mouse"||t.button===0}function Bie(t){return!!t.native.shiftKey}function O_(t,e){t!=null&&t.consumesClicks&&e()}const pO="attached",A_="tools",fO=1e3;let ro=class extends X{constructor(e){super(e),this._updatingHandles=new nc,this._clock=kp,this._manipulatorState=new Vie,this.tools=new te,this.cursor=null,this._interacting=!1,this._interactingTimeout=fO,this._interactingTimeoutHandle=null,this._forEachTool=i=>{for(const n of this.tools.items)if(i(n))return}}initialize(){this.addHandles([this.view.on(B4,e=>{this._handleInputEvent(e)},et.TOOL),...Hie(this.tools),this.tools.on("before-add",({item:e})=>{this._updateToolEditableFlag(e)}),this.tools.on("before-remove",({item:e})=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.activeTool=null,this.tools.drain(e=>e.destroy()),this._clearInteractingTimeout(),this._interacting=!1,this._updatingHandles.destroy()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:e=>{this.activeTool=e},view:this.view}}set activeTool(e){if(e!=null&&!this.view.ready)return void J.getLogger(this).error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return;const i=this.activeTool;this._set("activeTool",e),i!=null&&i.deactivate(),e!=null&&e.activate(),this._removeIncompleteTools(e);for(const n of this.tools){this._updateToolEditableFlag(n);const r=e2(n);this.activeTool!=null&&r||this._manipulatorState.clearPointers(n,this._manipulatorStateEventArgs,!r)}this._updateCursor()}get updating(){return this._updatingHandles.updating||this.tools.some(e=>e.updating)}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeoutHandle=Je(this._interactingTimeoutHandle)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeoutHandle=this._clock.setTimeout(()=>this._interacting=!1,this._interactingTimeout)}attach(){var e;this.view.type==="3d"?this.addHandles([Z(()=>{const{state:i}=this.view;return"camera"in i&&i.camera},()=>this._forEachManipulator(i=>i.onViewChange())),(e=this.view.elevationProvider)==null?void 0:e.on("elevation-change",i=>this._forEachManipulator(n=>n.onElevationChange(i)))],pO):this.addHandles(Z(()=>this.view.extent,()=>this._forEachManipulator(i=>i.onViewChange())))}detach(){this.activeTool=null,this.tools.removeAll(),this.removeHandles(pO),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(e){this._forEachTool(i=>{i.manipulators&&i.manipulators.forEach(({manipulator:n})=>e(n,i))})}_handleInputEvent(e){let i=!1;const n={...e,stopPropagation:()=>{i=!0,e.stopPropagation()}};this.activeTool!=null?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(n):this._forEachTool(r=>{!i&&r.visible&&r.handleInputEvent(n)}),!i&&e.type==="key-down"&&e.key==="Escape"&&this.activeTool&&(e.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(n,this._manipulatorStateEventArgs),i||this.activeTool==null||this.activeTool.handleInputEventAfter(n),this._manipulatorState.handleHoverEvent(n,this._forEachTool),this._updateCursor(),e.type==="pointer-move"&&(this._manipulatorState.hasFocusedManipulators()||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.removeHandles(A_),this._forEachTool(e=>{if(e instanceof X){const i=Z(()=>[e.cursor,e.visible,e.editable],()=>{e2(e)||this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()});this.addHandles(i,A_)}e.manipulators&&this.addHandles([e.manipulators.on("after-remove",i=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs,!0,i.item.manipulator)}),e.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()})],A_)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(e){var i;(i=e.setEditableFlag)==null||i.call(e,sg.MANAGER,this.activeTool==null||e===this.activeTool)}_updateCursor(){let e=this._manipulatorState.cursor;e==null&&this._forEachTool(i=>!(i.cursor==null||!i.visible)&&(e=i.cursor,!0)),this._get("cursor")!==e&&this._set("cursor",e)}_removeIncompleteTools(e){this.tools.filter(i=>(e==null||i!==e)&&!i.created&&i.removeIncompleteOnCancel).forEach(i=>{this.tools.remove(i)})}get test(){const e=this;return{setClock:i=>this._clock=i,set interactingTimeoutEnabled(i){e._interactingTimeout=i?fO:0},get interactingTimeoutEnabled(){return e._interactingTimeout!==0}}}};c([d({constructOnly:!0,nonNullable:!0})],ro.prototype,"view",void 0),c([d({value:null})],ro.prototype,"activeTool",null),c([d({readOnly:!0,type:te})],ro.prototype,"tools",void 0),c([d({readOnly:!0})],ro.prototype,"cursor",void 0),c([d({readOnly:!0})],ro.prototype,"updating",null),c([d()],ro.prototype,"_interacting",void 0),c([d({readOnly:!0})],ro.prototype,"interacting",null),ro=c([S("esri.views.ToolViewManager")],ro);let lh=class extends X{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",e.mapping==="standard"?this._detectedDeviceType="standard":qie.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){const e=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<e.length?e[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return Wie[this.deviceType]}};c([d({nonNullable:!0,readOnly:!0})],lh.prototype,"nativeIndex",void 0),c([d({type:String,readOnly:!0})],lh.prototype,"deviceType",null),c([d({type:Number,readOnly:!0})],lh.prototype,"axisThreshold",null),lh=c([S("esri.views.input.gamepad.GamepadInputDevice")],lh);const qie=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),Wie={standard:.15,spacemouse:.025,unknown:0},ek=lh;let Yf=class extends X{constructor(...e){super(...e),this.devices=new te,this.enabledFocusMode="document"}};c([d({type:te.ofType(ek),readOnly:!0})],Yf.prototype,"devices",void 0),c([d({type:["document","view","none"]})],Yf.prototype,"enabledFocusMode",void 0),Yf=c([S("esri.views.input.gamepad.GamepadSettings")],Yf);const Zie=Yf;let pv=class extends X{constructor(){super(...arguments),this.gamepad=new Zie}};c([d({readOnly:!0})],pv.prototype,"gamepad",void 0),pv=c([S("esri.views.input.Input")],pv);const Kie=pv;let kl=class extends X{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};c([d({type:Boolean,nonNullable:!0})],kl.prototype,"enabled",void 0),c([d({type:ek})],kl.prototype,"device",void 0),c([d({type:["pan","zoom"],nonNullable:!0})],kl.prototype,"mode",void 0),c([d({type:["forward-down","forward-up"],nonNullable:!0})],kl.prototype,"tiltDirection",void 0),c([d({type:Number,nonNullable:!0})],kl.prototype,"velocityFactor",void 0),kl=c([S("esri.views.navigation.gamepad.GamepadSettings")],kl);const Y4=kl;let du=class extends X{constructor(e){super(e),this.browserTouchPanEnabled=!0,this.gamepad=new Y4,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}};c([d({type:Boolean})],du.prototype,"browserTouchPanEnabled",void 0),c([d({type:Y4,nonNullable:!0})],du.prototype,"gamepad",void 0),c([d({type:Boolean})],du.prototype,"momentumEnabled",void 0),c([d({type:Boolean})],du.prototype,"mouseWheelZoomEnabled",void 0),du=c([S("esri.views.navigation.Navigation")],du);const X4=du,Q4={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},eF=Object.values(Q4),tF=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${eF.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),Jie=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${eF.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),Yie=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function lxe(t){return!!tF.test(t)}function tk(t){if(t==null)return null;const e=Gi(t),i=(e==null?void 0:e.path.match(tF))||(e==null?void 0:e.path.match(Jie));if(!i)return null;const[,n,r,s,o]=i,a=r.indexOf("/");return{title:iF(a!==-1?r.slice(a+1):r),serverType:Q4[s.toLowerCase()],sublayer:o!=null&&o!==""?parseInt(o,10):null,url:{path:n}}}function Xie(t){const e=Gi(t).path.match(Yie);return e?{serviceUrl:e[1],sublayerId:Number(e[2])}:null}function iF(t){return(t=t.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+t.slice(1)}function cxe(t,e){const i=[];if(t){const n=tk(t);n!=null&&n.title&&i.push(n.title)}if(e){const n=iF(e);i.push(n)}if(i.length===2){if(i[0].toLowerCase().includes(i[1].toLowerCase()))return i[0];if(i[1].toLowerCase().includes(i[0].toLowerCase()))return i[1]}return i.join(" - ")}function uxe(t){if(!t)return!1;const e=".arcgis.com/",i="//services",n="//tiles",r="//features",s=(t=t.toLowerCase()).includes(e),o=t.includes(i)||t.includes(n)||t.includes(r);return s&&o}function dxe(t,e){return t&&zP(jP(t,e))}function hxe(t){let{url:e}=t;if(!e)return{url:e};e=jP(e,t.logger);const i=Gi(e),n=tk(i.path);let r;if(n!=null)n.sublayer!=null&&t.layer.layerId==null&&(r=n.sublayer),e=n.url.path;else if(t.nonStandardUrlAllowed){const s=Xie(i.path);s!=null&&(e=s.serviceUrl,r=s.sublayerId)}return{url:zP(e),layerId:r}}function pxe(t,e,i,n,r){pp(e,n,"url",r),n.url&&t.layerId!=null&&(n.url=M1(n.url,i,t.layerId.toString()))}function fxe(t){if(!t)return!1;const e=t.toLowerCase(),i=e.includes("/services/"),n=e.includes("/mapserver/wmsserver"),r=e.includes("/imageserver/wmsserver"),s=e.includes("/wmsserver");return i&&(n||r||s)}function mxe(t,e,i){const n=nF(t),r=e,s=Qie(n,r,i);if(n){const o=ew.deriveUnitFromSR(n,t.spatialReference).heightUnit;if(!i&&o!==n.heightUnit){const a=new F("layerview:unmatched-height-unit",`The vertical units of the layer must match the horizontal units (${o})`,{horizontalUnit:o});return new F("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:n,error:a})}}if(!ene(t)||s===bn.Unsupported)return new F("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:n});switch(s){case bn.Units:{const o=(n==null?void 0:n.heightUnit)||"unknown",a=(r==null?void 0:r.heightUnit)||"unknown",l=new F("layerview:incompatible-height-unit",`The vertical units of the layer (${o}) must match the vertical units of the scene (${a})`,{layerUnit:o,sceneUnit:a});return new F("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:n,sceneHeightModelInfo:r,error:l})}case bn.HeightModel:{const o=(n==null?void 0:n.heightModel)||"unknown",a=(r==null?void 0:r.heightModel)||"unknown",l=new F("layerview:incompatible-height-model",`The height model of the layer (${o}) must match the height model of the scene (${a})`,{layerHeightModel:o,sceneHeightModel:a});return new F("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:n,sceneHeightModelInfo:r,error:l})}case bn.CRS:{const o=(n==null?void 0:n.vertCRS)||"unknown",a=(r==null?void 0:r.vertCRS)||"unknown",l=new F("layerview:incompatible-vertical-datum",`The vertical datum of the layer (${o}) must match the vertical datum of the scene (${a})`,{layerDatum:o,sceneDatum:a});return new F("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:n,sceneHeightModelInfo:r,error:l})}}return null}function Qie(t,e,i){if(!mO(t)||!mO(e))return bn.Unsupported;if(t==null||e==null)return bn.Ok;if(!i&&t.heightUnit!==e.heightUnit)return bn.Units;if(t.heightModel!==e.heightModel)return bn.HeightModel;switch(t.heightModel){case"gravity-related-height":return bn.Ok;case"ellipsoidal":return t.vertCRS===e.vertCRS?bn.Ok:bn.CRS;default:return bn.Unsupported}}var bn;function mO(t){return t==null||t.heightModel!=null&&t.heightUnit!=null}function ene(t){return"heightModelInfo"in t&&t.heightModelInfo!=null||t.spatialReference!=null||!oF(t)}function nF(t){var n;const e=t.url?tk(t.url):void 0;return!(((n=t.spatialReference)==null?void 0:n.vcsWkid)==null&&e!=null&&e.serverType==="ImageServer")&&rF(t)&&t.heightModelInfo?t.heightModelInfo:oF(t)?ew.deriveUnitFromSR(ine,t.spatialReference):null}function rF(t){return"heightModelInfo"in t}function sF(t){if(t.type==="unknown"||!("capabilities"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function oF(t){return sF(t)?!!(t.capabilities&&t.capabilities.data&&t.capabilities.data.supportsZ):aF(t)}function tne(t){return t.layers!=null||aF(t)||sF(t)||rF(t)}function aF(t){switch(t.type){case"building-scene":case"elevation":case"integrated-mesh":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"csv":case"dimension":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(t){t[t.Ok=0]="Ok",t[t.Units=1]="Units",t[t.HeightModel=2]="HeightModel",t[t.CRS=3]="CRS",t[t.Unsupported=4]="Unsupported"})(bn||(bn={}));const ine=new ew({heightModel:"gravity-related-height"});var Va;function gO(t){return t===Va.Global?"global":"local"}(function(t){t[t.Global=1]="Global",t[t.Local=2]="Local"})(Va||(Va={}));let t2,L_=null;async function nne(t){L_||(L_=V(()=>import("./geometryServiceUtils-SZUkmQMv.js"),__vite__mapDeps([]),import.meta.url).then(e=>t2=e)),await L_,Qe(t)}async function lF(t,e,i,n){if(!t)return null;const r=t.spatialReference;return Ka()||Os(r,e)?Oo(t,e):t2?t2.projectGeometry(t,e,i,n):(await Promise.race([nne(n),Io(n)]),lF(t,e,i,n))}let Ze=class extends X{constructor(e){super(e),this.required={tileInfo:!1,heightModelInfo:!1,extent:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=_s(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference!=null?this.userSpatialReference:this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){var n,r,s,o;const e=(n=this.map)==null?void 0:n.call(this),i=[];return this.priorityCollection!=null&&i.push(this.priorityCollection),i.push({parent:e==null?void 0:e.basemap,layers:(r=e==null?void 0:e.basemap)==null?void 0:r.baseLayers},{layers:e==null?void 0:e.layers},{parent:e==null?void 0:e.ground,layers:(s=e==null?void 0:e.ground)==null?void 0:s.layers},{parent:e==null?void 0:e.basemap,layers:(o=e==null?void 0:e.basemap)==null?void 0:o.referenceLayers}),i}get _allLayers(){return this._collectLayers(this.mapCollections)}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};const{layers:e,updating:i}=this._allLayers;let n=null;for(const s of e){const o=this._getSupportedSpatialReferences(s);if(o.length>0){const a=this._narrowDownSpatialReferenceCandidates(n,o);a!=null&&(n=a)}if(n!=null&&n.length===1)break}if(i&&(n==null||n.length!==1))return{updating:!0};const r=this._pickSpatialReferenceCandidate(n);return{spatialReference:r!=null?r.spatialReference:null,viewingMode:r!=null?r.viewingMode:null,updating:!1}}get _tileInfoTask(){var n,r,s,o,a,l,u;if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const{layers:e,updating:i}=this._collectLayers([{parent:(r=(n=this.map)==null?void 0:n.call(this))==null?void 0:r.basemap,layers:(a=(o=(s=this.map)==null?void 0:s.call(this))==null?void 0:o.basemap)==null?void 0:a.baseLayers},{layers:(u=(l=this.map)==null?void 0:l.call(this))==null?void 0:u.layers}]);if(e&&e.length>0&&"tileInfo"in e[0]){const p=e[0].tileInfo;return{tileInfo:p&&p.spatialReference.equals(this.spatialReference)?p:null,updating:!1}}return{updating:i}}get _heightModelInfoTask(){var n,r,s;if(!this.required.heightModelInfo||this.suspended&&((n=this._get("_heightModelInfoTask"))!=null&&n.heightModelInfo))return this._get("_heightModelInfoTask")??{updating:!1};const{layers:e,updating:i}=this._allLayers;for(const o of e)if(tne(o)){const a=nF(o);if(a)return{heightModelInfo:a,vcsWkid:(r=o.spatialReference)==null?void 0:r.vcsWkid,latestVcsWkid:(s=o.spatialReference)==null?void 0:s.latestVcsWkid,updating:!1}}return{updating:i}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const e=this._allLayers,i=e.updating,n=[];for(const r of e.layers){const s="fullExtents"in r&&r.fullExtents||(r.fullExtent!=null?[r.fullExtent]:[]),o=this.requiresExtentInSpatialReference?null:s[0],a=s.find(l=>l.spatialReference.equals(this.spatialReference))??o;if(a)return{candidates:[{extent:a,layer:r}],updating:!1};if(this._getSupportedSpatialReferences(r).length>0)for(const l of s)n.push({extent:l,layer:r})}return{candidates:n,updating:i}}get _extentTask(){const{candidates:e,updating:i}=this._extentCandidatesTask;if(i)return{updating:i};if(e==null||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const n=this._pickExtentCandidate(e),r=this.spatialReference;return n.extent.equals(this._projectExtentTask.input)&&r.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=_s(this._projectExtentTask.task)),this._projectExtentTask={input:n.extent.clone(),output:null,spatialReference:r.clone(),task:R1(async s=>{try{const o=await lF(n.extent,r,"portalItem"in n.layer?n.layer.portalItem:void 0,s);this._projectExtentTask={...this._projectExtentTask,task:null,output:o}}catch{if(er(s))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,i){if(e==null)return i;const n=[],r=(s,o)=>s!=null?o!=null?s===o&&s:s:o;for(const s of e)for(const o of i){if(!s.spatialReference.equals(o.spatialReference))continue;const a=r(s.viewingMode,o.viewingMode);if(a!==!1){n.push({spatialReference:s.spatialReference,viewingMode:a});break}}return n.length>0?n:null}_pickSpatialReferenceCandidate(e){const i=this.defaultSpatialReference;return e==null||e.length<1?i!=null?{spatialReference:i,viewingMode:null}:null:(i!=null&&e.length>1&&e.some(({spatialReference:n})=>n.equals(i))&&(e=e.filter(({spatialReference:n})=>n.equals(i))),e.length>1&&e.some(({viewingMode:n})=>n!==Va.Local)&&(e=e.filter(({viewingMode:n})=>n!==Va.Local)),e[0])}_getSupportedSpatialReferences(e){const i="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(i.length===0)return[];const n=[];for(const r of i){const s=this.getSpatialReferenceSupport({spatialReference:r,layer:e});if(s!=null){const o=s.constraints!=null?s.constraints:[{spatialReference:r,viewingMode:null}];for(const{spatialReference:a,viewingMode:l}of o)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!a.equals(this.userSpatialReference)||n.push({spatialReference:a,viewingMode:l})}}return n}_pickExtentCandidate(e){const i=this.spatialReference;return e.find(({extent:n})=>i.equals(n.spatialReference))||e[0]}_collectLayers(e){var n;if(this._loadMaybe((n=this.map)==null?void 0:n.call(this))!=="loaded")return{layers:[],updating:!0};const i=new rne;for(const r of e)if(this._collectCollection(r,i),i.preloading===this.sourcePreloadCount)break;return{layers:i.layers,updating:i.updating}}_collectCollection(e,i){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return i.updating=!0,void++i.preloading;case"failed":return}for(const n of e.layers){switch(this._loadMaybe(n)){case"failed":continue;case"loading":i.updating=!0,++i.preloading;break;case"loaded":i.updating||i.layers.push(n),"layers"in n&&this._collectCollection({layers:n.layers},i)}if(i.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e&&e.loadStatus!=null?e.loadStatus==="not-loaded"?(e.load().catch(i=>{en(i)||console.log(i)}),"loading"):e.loadStatus:"loaded"}};c([d()],Ze.prototype,"required",void 0),c([d({constructOnly:!0})],Ze.prototype,"map",void 0),c([d({constructOnly:!0})],Ze.prototype,"getSpatialReferenceSupport",void 0),c([d()],Ze.prototype,"defaultSpatialReference",void 0),c([d()],Ze.prototype,"userSpatialReference",void 0),c([d()],Ze.prototype,"sourcePreloadCount",void 0),c([d()],Ze.prototype,"priorityCollection",void 0),c([d()],Ze.prototype,"requiresExtentInSpatialReference",void 0),c([d()],Ze.prototype,"suspended",void 0),c([d({readOnly:!0})],Ze.prototype,"ready",null),c([d({readOnly:!0})],Ze.prototype,"heightModelInfoReady",null),c([d({readOnly:!0})],Ze.prototype,"spatialReference",null),c([d({readOnly:!0})],Ze.prototype,"extent",null),c([d({readOnly:!0})],Ze.prototype,"heightModelInfo",null),c([d({readOnly:!0})],Ze.prototype,"vcsWkid",null),c([d({readOnly:!0})],Ze.prototype,"latestVcsWkid",null),c([d({readOnly:!0})],Ze.prototype,"viewingMode",null),c([d({readOnly:!0})],Ze.prototype,"tileInfo",null),c([d({readOnly:!0})],Ze.prototype,"mapCollections",null),c([d({readOnly:!0})],Ze.prototype,"_allLayers",null),c([d({readOnly:!0})],Ze.prototype,"_spatialReferenceTask",null),c([d({readOnly:!0})],Ze.prototype,"_tileInfoTask",null),c([d({readOnly:!0})],Ze.prototype,"_heightModelInfoTask",null),c([d({readOnly:!0})],Ze.prototype,"_extentCandidatesTask",null),c([d()],Ze.prototype,"_extentTask",null),c([d()],Ze.prototype,"_projectExtentTask",void 0),Ze=c([S("esri.views.support.DefaultsFromMap")],Ze);let rne=class{constructor(){this.layers=new Array,this.preloading=-1,this.updating=!1}};var Xf;let ce=Xf=class extends An.EventedMixin(J1(X)){constructor(t){super(t),this._userSpatialReference=null,this._cursor=null,this.handles=new v1,this.updatingHandles=new nc,this.allLayerViews=new Zm({getCollections:()=>{var e,i,n;return[(e=this.basemapView)==null?void 0:e.baseLayerViews,(i=this.groundView)==null?void 0:i.layerViews,this.layerViews,(n=this.basemapView)==null?void 0:n.referenceLayerViews]},getChildrenFunction:one}),this.groundView=null,this.basemapView=null,this.fatalError=null,this.graphics=new Ju,this.analyses=new vb,this.typeSpecificPreconditionsReady=!0,this.layerViews=new te,this.magnifier=new V4,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.timeExtent=null,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new Kie,this.navigation=new X4,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new Gie(this),this.persistableViewModels=new te,this._isValid=!1,this._readyCycleForced=!1,this._lockedSpatialReference=null,this._userTimeZone=null,this._lockedTimeZone=null,this.theme=null,this.handles.add(Z(()=>this.preconditionsReady,e=>{var i,n;e?(this._lockedSpatialReference=this.spatialReference,this._lockedTimeZone=this.timeZone,Xf.views.add(this)):(this._lockedSpatialReference=null,Xf.views.remove(this)),this.notifyChange("spatialReference"),!e&&this.ready?((i=this.toolViewManager)==null||i.detach(),this.analysisViewManager!=null&&this.analysisViewManager.detach(),(n=this.layerViewManager)==null||n.clear(),this._teardown()):e&&!this.ready&&(this._startup(),this.analysisViewManager!=null&&this.analysisViewManager.attach(),this.toolViewManager.attach())},hc))}initialize(){this.addResolvingPromise(Promise.all([this.loadAsyncDependencies(),this.validate()]).then(()=>(this._isValid=!0,Ha(()=>this.ready)))),this.basemapView=new El({view:this}),this.layerViewManager=new Fie({view:this,layerViewImporter:{importLayerView:t=>this.importLayerView(t),hasLayerViewModule:t=>this.hasLayerViewModule(t)},supportsGround:this.supportsGround}),this.toolViewManager=new ro({view:this}),this._setupSpatialReferenceLogger(),this.addHandles([Z(()=>this.initialExtentRequired,t=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:t},{sync:!0,initial:!0}),Z(()=>this.ready,t=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=t,this.defaultsFromMap.userSpatialReference=t?this.spatialReference:this._userSpatialReference)},{sync:!0}),Z(()=>this._userSpatialReference,t=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=t)},{sync:!0,initial:!0})])}_setupSpatialReferenceLogger(){let t=null;this.addHandles([Z(()=>{var e;return(e=this.defaultsFromMap)==null?void 0:e.ready},e=>{var n;const i=((n=this.map)==null?void 0:n.allLayers.length)>0;if(e&&!this.spatialReference&&i){if(t!=null)return;const r=Ye(()=>t=_s(t));t=R1(async s=>{try{await ST(this.spatialReferenceWarningDelay,null,s)}catch{return}finally{t=null}J.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),this.addHandles(r,"spatial-reference-logger-task")}else this.removeHandles("spatial-reference-logger-task")},{sync:!0})])}destroy(){var t,e;this.destroyed||(Xf.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=Oe(this.graphics),this.analyses=Oe(this.analyses),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),Oe(this.analysisViewManager),this.toolViewManager=Oe(this.toolViewManager),this.layerViewManager=Oe(this.layerViewManager),this.basemapView=Oe(this.basemapView),(t=this.groundView)==null||t.destroy(),(e=this.layerViews)==null||e.forEach(i=>i.destroy()),this.layerViews.length=0,this.invalidate(),this._emitter.clear(),this.handles.destroy(),this.map=Oe(this.map),this.updatingHandles.destroy())}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return J.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){var t;return(t=this.toolViewManager)==null?void 0:t.activeTool}set activeTool(t){this.toolViewManager&&(this.toolViewManager.activeTool=t)}get animation(){return this._get("animation")}set animation(t){this._set("animation",t)}get center(){return null}get _defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new Ze({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:t=>this.getSpatialReferenceSupport(t),...this._defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(t){this._set("extent",t)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){var t;return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||As.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._lockedSpatialReference&&!((t=this.defaultsFromMap)!=null&&t.ready)||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(t){t!==this._get("map")&&(t!=null&&t.destroyed&&(J.getLogger(this).warn("#map","The provided map is already destroyed",{map:t}),t=null),As.isLoadable(t)&&t.load().catch(()=>{}),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._lockedSpatialReference=null),this._set("map",t))}get spatialReference(){var e,i;let t=this._userSpatialReference||this._lockedSpatialReference||this.getDefaultSpatialReference()||null;return t&&((i=(e=this.defaultsFromMap)==null?void 0:e.required)!=null&&i.heightModelInfo)&&(t=t.clone(),t.vcsWkid=this.defaultsFromMap.vcsWkid,t.latestVcsWkid=this.defaultsFromMap.latestVcsWkid),t}set spatialReference(t){const e=!xt(t,this._get("spatialReference"));this._set("_userSpatialReference",t),e&&(this._set("spatialReference",t),this._spatialReferenceChanged(t))}_spatialReferenceChanged(t){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get timeZone(){return this._userTimeZone??this._lockedTimeZone??this.getDefaultTimeZone()??Co}set timeZone(t){const e=new Set(["etc/utc","etc/gmt","gmt"]),i=new Set(Intl.supportedValuesOf("timeZone").map(n=>n.toLowerCase()));this._userTimeZone=t,t===Co||t===yE||e.has(t.toLowerCase())||i.has(t.toLowerCase())||J.getLogger(this).warn("#timeZone",`the parsed value '${t}' may not be a valid IANA time zone`)}get tools(){var t;return(t=this.toolViewManager)==null?void 0:t.tools}get initialExtent(){var t;return(t=this.defaultsFromMap)==null?void 0:t.extent}get cursor(){var t;return((t=this.toolViewManager)==null?void 0:t.cursor)??this._cursor??"default"}set cursor(t){this._cursor=t,this.notifyChange("cursor")}get size(){return[this.width,this.height]}get effectiveTheme(){return this.theme??new Qx}whenLayerView(t){var e;return((e=this.layerViewManager)==null?void 0:e.whenLayerView(t))??Promise.reject()}getDefaultSpatialReference(){var t;return(t=this.defaultsFromMap)==null?void 0:t.spatialReference}getDefaultHeightModelInfo(){var t;return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??((t=this.defaultsFromMap)==null?void 0:t.heightModelInfo)??null}getDefaultTimeZone(){return null}importLayerView(t){throw new F("importLayerView() not implemented")}hasLayerViewModule(t){return!1}async validate(){}async loadAsyncDependencies(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(t){return this.getSpatialReferenceSupport({spatialReference:t})!=null}when(t,e){return this.isResolved()&&!this.ready&&J.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(t,e)}forceReadyCycle(){this.ready&&(On(()=>this.destroyed||this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(t){this.toolViewManager.tools.add(t),this.activeTool=t}tryFatalErrorRecovery(){this.fatalError=null}};ce.views=new te,c([d()],ce.prototype,"_userSpatialReference",void 0),c([d()],ce.prototype,"activeTool",null),c([d({readOnly:!0})],ce.prototype,"allLayerViews",void 0),c([d()],ce.prototype,"groundView",void 0),c([d()],ce.prototype,"animation",null),c([d()],ce.prototype,"basemapView",void 0),c([d()],ce.prototype,"center",null),c([d({readOnly:!0})],ce.prototype,"_defaultsFromMapSettings",null),c([d()],ce.prototype,"defaultsFromMap",null),c([d()],ce.prototype,"fatalError",void 0),c([d({type:Ve})],ce.prototype,"extent",null),c([d(q$(Ju,"graphics"))],ce.prototype,"graphics",void 0),c([d(q$(vb,"analyses"))],ce.prototype,"analyses",void 0),c([d({readOnly:!0,type:ew})],ce.prototype,"heightModelInfo",null),c([d({readOnly:!0})],ce.prototype,"interacting",null),c([d({readOnly:!0})],ce.prototype,"navigating",null),c([d({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_lockedSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],ce.prototype,"preconditionsReady",null),c([d({readOnly:!0})],ce.prototype,"typeSpecificPreconditionsReady",void 0),c([d({type:te,readOnly:!0})],ce.prototype,"layerViews",void 0),c([d()],ce.prototype,"resolution",null),c([d({type:V4})],ce.prototype,"magnifier",void 0),c([d({value:null,type:Dee})],ce.prototype,"map",null),c([d()],ce.prototype,"padding",void 0),c([d({readOnly:!0})],ce.prototype,"ready",void 0),c([d({type:xe})],ce.prototype,"spatialReference",null),c([d()],ce.prototype,"spatialReferenceWarningDelay",void 0),c([d()],ce.prototype,"stationary",null),c([d({readOnly:!0})],ce.prototype,"supportsGround",void 0),c([d({type:PE})],ce.prototype,"timeExtent",void 0),c([d({type:String,nonNullable:!0})],ce.prototype,"timeZone",null),c([d()],ce.prototype,"tools",null),c([d()],ce.prototype,"toolViewManager",void 0),c([d({readOnly:!0})],ce.prototype,"type",void 0),c([d({type:Number})],ce.prototype,"scale",void 0),c([d({readOnly:!0})],ce.prototype,"updating",void 0),c([d({readOnly:!0})],ce.prototype,"initialExtentRequired",void 0),c([d({readOnly:!0})],ce.prototype,"initialExtent",null),c([d()],ce.prototype,"cursor",null),c([d({readOnly:!0})],ce.prototype,"input",void 0),c([d({type:X4,nonNullable:!0})],ce.prototype,"navigation",void 0),c([d()],ce.prototype,"layerViewManager",void 0),c([d()],ce.prototype,"analysisViewManager",void 0),c([d()],ce.prototype,"width",void 0),c([d()],ce.prototype,"height",void 0),c([d({readOnly:!0})],ce.prototype,"resizing",void 0),c([d({value:null,readOnly:!0})],ce.prototype,"size",null),c([d({readOnly:!0})],ce.prototype,"suspended",void 0),c([d({readOnly:!0})],ce.prototype,"viewEvents",void 0),c([d({readOnly:!0})],ce.prototype,"persistableViewModels",void 0),c([d()],ce.prototype,"_isValid",void 0),c([d()],ce.prototype,"_readyCycleForced",void 0),c([d()],ce.prototype,"_lockedSpatialReference",void 0),c([d()],ce.prototype,"_userTimeZone",void 0),c([d()],ce.prototype,"_lockedTimeZone",void 0),c([d({type:Qx})],ce.prototype,"theme",void 0),c([d({readOnly:!0,type:Qx})],ce.prototype,"effectiveTheme",null),ce=Xf=c([S("esri.views.View")],ce);const sne=ce;function one(t){return t.layerViews}let Ml=class extends fb{constructor(e){super(e),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=Or(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state==="finished"||this.state==="stopped"}stop(){var e;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),(e=this._resolver)==null||e.reject(new F("ViewAnimation stopped")))}finish(){var e;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),(e=this._resolver)==null||e.resolve())}update(e,i){i||(i=Za(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",i)}};c([d({readOnly:!0})],Ml.prototype,"done",null),c([d({readOnly:!0,type:String})],Ml.prototype,"state",void 0),c([d()],Ml.prototype,"target",void 0),Ml=c([S("esri.views.ViewAnimation")],Ml),function(t){t.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(Ml||(Ml={}));const i2=Ml;function Iu(t,e,i,n){const r=3*t,s=3*(i-t)-r,o=1-r-s,a=3*e,l=3*(n-e)-a,u=1-a-l;function p(y){return((o*y+s)*y+r)*y}function f(y){return((u*y+l)*y+a)*y}function m(y){return(3*o*y+2*s)*y+r}function g(y,v){let b,_,$,x,E,C;for($=y,C=0;C<8;C++){if(x=p($)-y,Math.abs(x)<v)return $;if(E=m($),Math.abs(E)<1e-6)break;$-=x/E}if(b=0,_=1,$=y,$<b)return b;if($>_)return _;for(;b<_;){if(x=p($),Math.abs(x-y)<v)return $;y>x?b=$:_=$,$=.5*(_-b)+b}return $}return function(y,v=1e-6){return f(g(y,v))}}const ane=/^cubic-bezier\((.*)\)/,_r={};function lne(t){let e=_r[t]||null;if(!e){const i=ane.exec(t);if(i){const n=i[1].split(",").map(r=>parseFloat(r.trim()));n.length!==4||n.some(r=>isNaN(r))||(e=Iu.apply(Iu,n))}}return e}_r.ease=Iu(.25,.1,.25,1),_r.linear=Iu(0,0,1,1),_r.easeIn=_r["ease-in"]=Iu(.42,0,1,1),_r.easeOut=_r["ease-out"]=Iu(0,0,.58,1),_r.easeInOut=_r["ease-in-out"]=Iu(.42,0,.58,1);function cne(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function une(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function dne(t,e,i,n,r,s,o){return t[0]=e,t[1]=i,t[2]=n,t[3]=r,t[4]=s,t[5]=o,t}function ik(t,e){const i=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5];let l=i*s-n*r;return l?(l=1/l,t[0]=s*l,t[1]=-n*l,t[2]=-r*l,t[3]=i*l,t[4]=(r*a-s*o)*l,t[5]=(n*o-i*a)*l,t):null}function hne(t){return t[0]*t[3]-t[1]*t[2]}function cF(t,e,i){const n=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],u=i[0],p=i[1],f=i[2],m=i[3],g=i[4],y=i[5];return t[0]=n*u+s*p,t[1]=r*u+o*p,t[2]=n*f+s*m,t[3]=r*f+o*m,t[4]=n*g+s*y+a,t[5]=r*g+o*y+l,t}function uw(t,e,i){const n=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],u=Math.sin(i),p=Math.cos(i);return t[0]=n*p+s*u,t[1]=r*p+o*u,t[2]=n*-u+s*p,t[3]=r*-u+o*p,t[4]=a,t[5]=l,t}function nk(t,e,i){const n=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],u=i[0],p=i[1];return t[0]=n*u,t[1]=r*u,t[2]=s*p,t[3]=o*p,t[4]=a,t[5]=l,t}function og(t,e,i){const n=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],u=i[0],p=i[1];return t[0]=n,t[1]=r,t[2]=s,t[3]=o,t[4]=n*u+s*p+a,t[5]=r*u+o*p+l,t}function uF(t,e){const i=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=i,t[2]=-i,t[3]=n,t[4]=0,t[5]=0,t}function dF(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function rk(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function pne(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function fne(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+1)}function mne(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t}function hF(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t}function gne(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t}function yne(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t[3]=e[3]+i[3]*n,t[4]=e[4]+i[4]*n,t[5]=e[5]+i[5]*n,t}function vne(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function bne(t,e){const i=t[0],n=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=e[0],u=e[1],p=e[2],f=e[3],m=e[4],g=e[5],y=Vi();return Math.abs(i-l)<=y*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(n-u)<=y*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(r-p)<=y*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(s-f)<=y*Math.max(1,Math.abs(s),Math.abs(f))&&Math.abs(o-m)<=y*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-g)<=y*Math.max(1,Math.abs(a),Math.abs(g))}const wne=cF,_ne=hF;Object.freeze(Object.defineProperty({__proto__:null,add:mne,copy:cne,determinant:hne,equals:bne,exactEquals:vne,frob:fne,fromRotation:uF,fromScaling:dF,fromTranslation:rk,identity:une,invert:ik,mul:wne,multiply:cF,multiplyScalar:gne,multiplyScalarAndAdd:yne,rotate:uw,scale:nk,set:dne,str:pne,sub:_ne,subtract:hF,translate:og},Symbol.toStringTag,{value:"Module"}));function sc(){return[1,0,0,1,0,0]}function Sne(t){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function $ne(t,e,i,n,r,s){return[t,e,i,n,r,s]}function xne(t,e){return new Float64Array(t,e,6)}Object.freeze(Object.defineProperty({__proto__:null,clone:Sne,create:sc,createView:xne,fromValues:$ne},Symbol.toStringTag,{value:"Module"}));function ag(t,e){return t[0]=e[0],t[1]=e[1],t}function ei(t,e,i){return t[0]=e,t[1]=i,t}function sk(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t}function Lt(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t}function pF(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t}function fF(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t}function Tne(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function Ene(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function kne(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t}function Mne(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t}function Cne(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function Np(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t}function Ir(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t}function Dp(t,e){const i=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(i*i+n*n)}function Pr(t,e){const i=e[0]-t[0],n=e[1]-t[1];return i*i+n*n}function gp(t){const e=t[0],i=t[1];return Math.sqrt(e*e+i*i)}function Lo(t){const e=t[0],i=t[1];return e*e+i*i}function mF(t,e){return t[0]=-e[0],t[1]=-e[1],t}function Ine(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function n2(t,e){const i=e[0],n=e[1];let r=i*i+n*n;return r>0&&(r=1/Math.sqrt(r),t[0]=e[0]*r,t[1]=e[1]*r),t}function Ya(t,e){return t[0]*e[0]+t[1]*e[1]}function gF(t,e,i){const n=e[0]*i[1]-e[1]*i[0];return t[0]=t[1]=0,t[2]=n,t}function ok(t,e,i,n){const r=e[0],s=e[1];return t[0]=r+n*(i[0]-r),t[1]=s+n*(i[1]-s),t}function One(t,e){e=e||1;const i=2*O1()*Math.PI;return t[0]=Math.cos(i)*e,t[1]=Math.sin(i)*e,t}function Ane(t,e,i){const n=e[0],r=e[1];return t[0]=i[0]*n+i[2]*r,t[1]=i[1]*n+i[3]*r,t}function fs(t,e,i){const n=e[0],r=e[1];return t[0]=i[0]*n+i[2]*r+i[4],t[1]=i[1]*n+i[3]*r+i[5],t}function Lne(t,e,i){const n=e[0],r=e[1];return t[0]=i[0]*n+i[3]*r+i[6],t[1]=i[1]*n+i[4]*r+i[7],t}function Pne(t,e,i){const n=e[0],r=e[1];return t[0]=i[0]*n+i[4]*r+i[12],t[1]=i[1]*n+i[5]*r+i[13],t}function Rne(t,e,i,n){const r=e[0]-i[0],s=e[1]-i[1],o=Math.sin(n),a=Math.cos(n);return t[0]=r*a-s*o+i[0],t[1]=r*o+s*a+i[1],t}function Nne(t,e){const i=t[0],n=t[1],r=e[0],s=e[1];let o=i*i+n*n;o>0&&(o=1/Math.sqrt(o));let a=r*r+s*s;a>0&&(a=1/Math.sqrt(a));const l=(i*r+n*s)*o*a;return l>1?0:l<-1?Math.PI:Math.acos(l)}function Dne(t){return"vec2("+t[0]+", "+t[1]+")"}function Fne(t,e){return t[0]===e[0]&&t[1]===e[1]}function zne(t,e){const i=t[0],n=t[1],r=e[0],s=e[1],o=Vi();return Math.abs(i-r)<=o*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(n-s)<=o*Math.max(1,Math.abs(n),Math.abs(s))}function jne(t,e,i,n,r){let s=e[0]-i[0],o=e[1]-i[1];const a=(n[0]*s+n[1]*o)*(r-1);return s=n[0]*a,o=n[1]*a,t[0]=e[0]+s,t[1]=e[1]+o,t}const Gne=gp,dw=Lt,Une=pF,Hne=fF,Vne=Dp,Bne=Pr,qne=Lo;Object.freeze(Object.defineProperty({__proto__:null,add:sk,angle:Nne,ceil:Tne,copy:ag,cross:gF,dist:Vne,distance:Dp,div:Hne,divide:fF,dot:Ya,equals:zne,exactEquals:Fne,floor:Ene,inverse:Ine,len:Gne,length:gp,lerp:ok,max:Mne,min:kne,mul:Une,multiply:pF,negate:mF,normalize:n2,projectAndScale:jne,random:One,rotate:Rne,round:Cne,scale:Np,scaleAndAdd:Ir,set:ei,sqrDist:Bne,sqrLen:qne,squaredDistance:Pr,squaredLength:Lo,str:Dne,sub:dw,subtract:Lt,transformMat2:Ane,transformMat2d:fs,transformMat3:Lne,transformMat4:Pne},Symbol.toStringTag,{value:"Module"}));function Ce(){return[0,0]}function yF(t){return[t[0],t[1]]}function oc(t,e){return[t,e]}function Wne(t,e=Ce()){const i=Math.min(2,t.length);for(let n=0;n<i;++n)e[n]=t[n];return e}function vF(t,e){return new Float64Array(t,e,2)}function bF(){return Ce()}function wF(){return oc(1,1)}function _F(){return oc(1,0)}function SF(){return oc(0,1)}const $F=bF(),Zne=wF(),Kne=_F(),Jne=SF();Object.freeze(Object.defineProperty({__proto__:null,ONES:Zne,UNIT_X:Kne,UNIT_Y:Jne,ZEROS:$F,clone:yF,create:Ce,createView:vF,fromArray:Wne,fromValues:oc,ones:wF,unitX:_F,unitY:SF,zeros:bF},Symbol.toStringTag,{value:"Module"}));const Ky={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new Tr({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:xe.WebMercator}),minus180Line:new Tr({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:xe.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new Tr({paths:[[[180,-180],[180,180]]],spatialReference:xe.WGS84}),minus180Line:new Tr({paths:[[[-180,-180],[-180,180]]],spatialReference:xe.WGS84})}};function Wu(t,e){return Math.ceil((t-e)/(2*e))}function xF(t,e){const i=Pm(t);for(const n of i)for(const r of n)r[0]+=e;return t}function Pm(t){return nE(t)?t.rings:t.paths}function hw(t,e){return e?{...e,query:{...t??{},...e.query}}:{query:t}}function qg(t){return typeof t=="string"?Gi(t):q(t)}function pw(t,e,i){const n={};for(const r in t){if(r==="declaredClass")continue;const s=t[r];if(s!=null&&typeof s!="function")if(Array.isArray(s)){n[r]=[];for(let o=0;o<s.length;o++)n[r][o]=pw(s[o])}else if(typeof s=="object")if(s.toJSON){const o=s.toJSON(i==null?void 0:i[r]);n[r]=e?o:JSON.stringify(o)}else n[r]=e?s:JSON.stringify(s);else n[r]=s}return n}async function Yne(t,e,i,n){const r=qg(t),s=e[0].spatialReference,o={...n,responseType:"json",query:{...r.query,f:"json",sr:Qv(s),target:JSON.stringify({geometryType:Cg(e[0]),geometries:e}),cutter:JSON.stringify(i)}},a=await $t(r.path+"/cut",o),{cutIndexes:l,geometries:u=[]}=a.data;return{cutIndexes:l,geometries:u.map(p=>{const f=ap(p);return f.spatialReference=s,f})}}function Xne(t){return{geometryType:Cg(t[0]),geometries:t.map(e=>e.toJSON())}}function TF(t,e,i){const n=Wq(e);return t.map(r=>{const s=n.fromJSON(r);return s.spatialReference=i,s})}async function Qne(t,e,i){const n=typeof t=="string"?Gi(t):t,r=e[0].spatialReference,s=Cg(e[0]),o={...i,query:{...n.query,f:"json",sr:Qv(r),geometries:JSON.stringify(Xne(e))}},{data:a}=await $t(n.path+"/simplify",o);return TF(a.geometries,s,r)}const EF=J.getLogger("esri.geometry.support.normalizeUtils");function ere(t){return t.type==="polygon"}function tre(t){return t[0].type==="polygon"}function ire(t){return t[0].type==="polyline"}function yO(t){const e=[];let i=0,n=0;for(let r=0;r<t.length;r++){const s=t[r];let o=null;for(let a=0;a<s.length;a++)o=s[a],e.push(o),a===0?(i=o[0],n=i):(i=Math.min(i,o[0]),n=Math.max(n,o[0]));o&&e.push([(i+n)/2,0])}return e}function nre(t,e){if(!(t instanceof Tr||t instanceof Mn)){const r="straightLineDensify: the input geometry is neither polyline nor polygon";throw EF.error(r),new F(r)}const i=Pm(t),n=[];for(const r of i){const s=[];n.push(s),s.push([r[0][0],r[0][1]]);for(let o=0;o<r.length-1;o++){const a=r[o][0],l=r[o][1],u=r[o+1][0],p=r[o+1][1],f=Math.sqrt((u-a)*(u-a)+(p-l)*(p-l)),m=(p-l)/f,g=(u-a)/f,y=f/e;if(y>1){for(let $=1;$<=y-1;$++){const x=$*e,E=g*x+a,C=m*x+l;s.push([E,C])}const v=(f+Math.floor(y-1)*e)/2,b=g*v+a,_=m*v+l;s.push([b,_])}s.push([u,p])}}return ere(t)?new Mn({rings:n,spatialReference:t.spatialReference}):new Tr({paths:n,spatialReference:t.spatialReference})}function vO(t,e,i){if(e){const n=nre(t,1e6);t=Xl(n,!0)}return i&&(t=xF(t,i)),t}function bO(t,e,i){if(Array.isArray(t)){const n=t[0];if(n>e){const r=Wu(n,e);t[0]=n+r*(-2*e)}else if(n<i){const r=Wu(n,i);t[0]=n+r*(-2*i)}}else{const n=t.x;if(n>e){const r=Wu(n,e);t=t.clone().offset(r*(-2*e),0)}else if(n<i){const r=Wu(n,i);t=t.clone().offset(r*(-2*i),0)}}return t}function rre(t,e){let i=-1;for(let n=0;n<e.cutIndexes.length;n++){const r=e.cutIndexes[n],s=e.geometries[n],o=Pm(s);for(let a=0;a<o.length;a++){const l=o[a];l.some(u=>{if(u[0]<180)return!0;{let p=0;for(let m=0;m<l.length;m++){const g=l[m][0];p=g>p?g:p}p=Number(p.toFixed(9));const f=-360*Wu(p,180);for(let m=0;m<l.length;m++){const g=s.getPoint(a,m);s.setPoint(a,m,g.clone().offset(f,0))}return!0}})}if(r===i){if(tre(t))for(const a of Pm(s))t[r]=t[r].addRing(a);else if(ire(t))for(const a of Pm(s))t[r]=t[r].addPath(a)}else i=r,t[r]=s}return t}async function sre(t,e,i){if(!Array.isArray(t))return sre([t],e);e&&typeof e!="string"&&EF.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const n=typeof e=="string"?e:(e==null?void 0:e.url)??Ae.geometryServiceUrl;let r,s,o,a,l,u,p,f,m=0;const g=[],y=[];for(const E of t)if(E!=null)if(r||(r=E.spatialReference,s=En(r),o=r.isWebMercator,u=o?102100:4326,a=Ky[u].maxX,l=Ky[u].minX,p=Ky[u].plus180Line,f=Ky[u].minus180Line),s)if(E.type==="mesh")y.push(E);else if(E.type==="point")y.push(bO(E.clone(),a,l));else if(E.type==="multipoint"){const C=E.clone();C.points=C.points.map(M=>bO(M,a,l)),y.push(C)}else if(E.type==="extent"){const C=E.clone()._normalize(!1,!1,s);y.push(C.rings?new Mn(C):C)}else if(E.extent){const C=E.extent,M=Wu(C.xmin,l)*(2*a);let N=M===0?E.clone():xF(E.clone(),M);C.offset(M,0),C.intersects(p)&&C.xmax!==a?(m=C.xmax>m?C.xmax:m,N=vO(N,o),g.push(N),y.push("cut")):C.intersects(f)&&C.xmin!==l?(m=C.xmax*(2*a)>m?C.xmax*(2*a):m,N=vO(N,o,360),g.push(N),y.push("cut")):y.push(N)}else y.push(E.clone());else y.push(E);else y.push(E);let v=Wu(m,a),b=-90;const _=v,$=new Tr;for(;v>0;){const E=360*v-180;$.addPath([[E,b],[E,-1*b]]),b*=-1,v--}if(g.length>0&&_>0){const E=rre(g,await Yne(n,g,$,i)),C=[],M=[];for(let U=0;U<y.length;U++){const B=y[U];if(B!=="cut")M.push(B);else{const H=E.shift(),L=t[U];L!=null&&L.type==="polygon"&&L.rings&&L.rings.length>1&&H.rings.length>=L.rings.length?(C.push(H),M.push("simplify")):M.push(o?Na(H):H)}}if(!C.length)return M;const N=await Qne(n,C,i),G=[];for(let U=0;U<M.length;U++){const B=M[U];B!=="simplify"?G.push(B):G.push(o?Na(N.shift()):N.shift())}return G}const x=[];for(let E=0;E<y.length;E++){const C=y[E];if(C!=="cut")x.push(C);else{const M=g.shift();x.push(o===!0?Na(M):M)}}return x}function ore(t){if(!t)return null;const e=t.extent;if(!e)return null;const i=t.spatialReference&&En(t.spatialReference);if(!i)return e;const[n,r]=i.valid,s=2*r,{width:o}=e;let a,{xmin:l,xmax:u}=e;if([l,u]=[u,l],t.type==="extent"||o===0||o<=r||o>s||l<n||u>r)return e;switch(t.type){case"polygon":if(!(t.rings.length>1))return e;a=yO(t.rings);break;case"polyline":if(!(t.paths.length>1))return e;a=yO(t.paths);break;case"multipoint":a=t.points}const p=e.clone();for(let f=0;f<a.length;f++){let m=a[f][0];m<0?(m+=r,u=Math.max(m,u)):(m-=r,l=Math.min(m,l))}return p.xmin=l,p.xmax=u,p.width<o?(p.xmin-=r,p.xmax-=r,p):e}function kF(t,e,i){const n=En(i);if(n==null)return t;const[r,s]=n.valid,o=2*s;let a=0,l=0;e>s?a=Math.ceil(Math.abs(e-s)/o):e<r&&(a=-Math.ceil(Math.abs(e-r)/o)),t>s?l=Math.ceil(Math.abs(t-s)/o):t<r&&(l=-Math.ceil(Math.abs(t-r)/o));let u=t+(a-l)*o;const p=u-e;return p>s?u-=o:p<r&&(u+=o),u}function bxe(t,e){const i=En(e);if(i){const[n,r]=i.valid,s=r-n;if(t<n)for(;t<n;)t+=s;if(t>r)for(;t>r;)t-=s}return t}const MF=96,CF=39.37,are=180/Math.PI;function IF(t){return t.wkid?t:t.spatialReference||xe.WGS84}function ak(t,e){return e.type?ei(t,e.x,e.y):ag(t,e)}function OF(t){return Cn(t)}function qh(t,e){const i=Math.max(1,e[0]),n=Math.max(1,e[1]);return Math.max(t.width/i,t.height/n)*gre(t.spatialReference)}async function Qf(t,e,i,n){var a,l;let r,s;if(!t||Array.isArray(t)&&!t.length)return null;if(te.isCollection(t)&&(t=t.toArray()),Array.isArray(t)&&t.length&&typeof t[0]=="object"){const u=t.every(m=>"attributes"in m),p=t.some(m=>!m.geometry);let f=t;if(u&&p&&e&&e.allLayerViews){const m=new Map;for(const b of t){const _=b.layer,$=m.get(_)||[],x=b.attributes[_.objectIdField];x!=null&&$.push(x),m.set(_,$)}const g=[];m.forEach((b,_)=>{const $=e.allLayerViews.find(x=>x.layer.id===_.id);if($&&"queryFeatures"in $){const x=_.createQuery();x.objectIds=b,x.returnGeometry=!0,g.push($.queryFeatures(x))}});const y=await Promise.all(g),v=[];for(const b of y)if(b&&b.features&&b.features.length)for(const _ of b.features)_.geometry!=null&&v.push(_.geometry);f=v}for(const m of f)n=await Qf(m,e,i,n);return n}if(Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number")r=new he(t);else if(t instanceof xc)r=t;else if("geometry"in t){if(t.geometry)r=t.geometry;else if(t.layer){const u=t.layer,p=e.allLayerViews.find(f=>f.layer.id===u.id);if(p&&"queryFeatures"in p){const f=u.createQuery();f.objectIds=[t.attributes[u.objectIdField]],f.returnGeometry=!0;const m=await p.queryFeatures(f);r=(l=(a=m==null?void 0:m.features)==null?void 0:a[0])==null?void 0:l.geometry}}}if(r==null)return null;switch(r.type){case"point":s=new Ve({xmin:r.x,ymin:r.y,xmax:r.x,ymax:r.y,spatialReference:r.spatialReference});break;case"extent":case"multipoint":case"polygon":case"polyline":s=ore(r);break;default:s=r.extent}if(!s)return null;Ka()||Os(s.spatialReference,i)||await Io();const o=Oo(s,i);return o?n=n?n.union(o):o:null}function lre(t){var e;if(t&&(!Array.isArray(t)||typeof t[0]!="number")&&(typeof t=="object"||Array.isArray(t)&&typeof t[0]=="object")){if("layer"in t&&((e=t.layer)==null?void 0:e.minScale)!=null&&t.layer.maxScale!=null){const i=t.layer;return{min:i.minScale,max:i.maxScale}}if(Array.isArray(t)&&t.length&&t.every(i=>"layer"in i)){let i=0,n=0;for(const r of t){const s=r.layer;s!=null&&s.minScale&&s.maxScale&&(i=s.minScale<i?s.minScale:i,n=s.maxScale>n?s.maxScale:n)}return i&&n?{min:i,max:n}:null}}}function P_(t,e){return xt(IF(t),e)?t:Oo(t,e)}async function cre(t,e){var v;if(!t||!e)return new xo({targetGeometry:new he,scale:0,rotation:0});let i=e.spatialReference;const{constraints:n,padding:r,viewpoint:s,size:o}=e,a=[r?o[0]-r.left-r.right:o[0],r?o[1]-r.top-r.bottom:o[1]];let l=null;t instanceof xo?l=t:t.viewpoint?l=t.viewpoint:t.target&&t.target.declaredClass==="esri.Viewpoint"&&(l=t.target);let u=null;l!=null&&l.targetGeometry?u=l.targetGeometry:t instanceof Ve?u=t:(t||t&&("center"in t||"extent"in t||"target"in t))&&(u=await Qf(t.center,e,i)||await Qf(t.extent,e,i)||await Qf(t.target,e,i)||await Qf(t,e,i)),!u&&(s!=null&&s.targetGeometry)?u=s.targetGeometry:!u&&e.extent&&(u=e.extent),i||(i=IF(e.spatialReference||e.extent||u)),Ka()||xt(u.spatialReference,i)||Os(u.spatialReference,i)||await Io();const p=P_("center"in u?u.center:u,i);e.pickClosestTarget!==!1&&p.type==="point"&&((v=s.targetGeometry)==null?void 0:v.type)==="point"&&(p.x=kF(p.x,s.targetGeometry.x,p.spatialReference));let f=0;if((l==null?void 0:l.targetGeometry)!=null&&l.targetGeometry.type==="point")f=l.scale;else if("scale"in t&&t.scale)f=t.scale;else if("zoom"in t&&t.zoom!==-1&&n&&n.effectiveLODs)f=n.zoomToScale(t.zoom);else if(Array.isArray(u)||u.type==="point"||u.type==="extent"&&u.width===0&&u.height===0){const b=P_(e.extent,i);f=b!=null?qh(b,a):e.extent?qh(e.extent,a):s.scale}else f=qh(P_(u.extent,i),a);const m=lre(t.target??t);m&&(m.min&&m.min<f?f=m.min:m.max&&m.max>f&&(f=m.max));let g=0;l?g=l.rotation:t.hasOwnProperty("rotation")?g=t.rotation:s&&(g=s.rotation);let y=new xo({targetGeometry:p,scale:f,rotation:g});return n&&(y=n.fit(y),n.constrainByGeometry(y),n.rotationEnabled||(y.rotation=s.rotation)),y}function Ls(t,e){const i=t.targetGeometry,n=e.targetGeometry;return i.x=n.x,i.y=n.y,i.spatialReference=n.spatialReference,t.scale=e.scale,t.rotation=e.rotation,t}function ure(t,e,i){return i?ei(t,.5*(e[0]-i.right+i.left),.5*(e[1]-i.bottom+i.top)):Np(t,e,.5)}const dre=function(){const t=Ce();return function(e,i,n){const r=i.targetGeometry;ak(t,r);const s=.5*Fp(i);return e.xmin=t[0]-s*n[0],e.ymin=t[1]-s*n[1],e.xmax=t[0]+s*n[0],e.ymax=t[1]+s*n[1],e.spatialReference=r.spatialReference,e}}();function hre(t,e,i,n,r){var s;return r2(t,e,i.center),t.scale=qh(i,n),(s=r==null?void 0:r.constraints)==null||s.constrain(t),t}function pre(t,e,i,n){return uk(t,e,i,n),ik(t,t)}const AF=function(){const t=Ce();return function(e,i,n){return dw(e,yre(e,i),ure(t,i,n))}}(),fre=function(){const t=sc(),e=Ce();return function(i,n,r,s){const o=Fp(n),a=lk(n);return ei(e,o,o),dF(t,e),uw(t,t,a),og(t,t,AF(e,r,s)),og(t,t,[0,s.top-s.bottom]),ei(i,t[4],t[5])}}();function Fp(t){return t.scale*mre(t.targetGeometry)}function mre(t){return t!=null&&fi(t.spatialReference)?1/(OF(t.spatialReference)*CF*MF):1}function lk(t){return KT(t.rotation)||0}function gre(t){return fi(t)?OF(t)*CF*MF:1}function yre(t,e){return Np(t,e,.5)}const ck=function(){const t=Ce(),e=Ce(),i=Ce();return function(n,r,s,o,a,l){return mF(t,r),Np(e,s,.5*l),ei(i,1/o*l,-1/o*l),rk(n,e),a&&uw(n,n,a),nk(n,n,i),og(n,n,t),n}}(),uk=function(){const t=Ce();return function(e,i,n,r){const s=Fp(i),o=lk(i);return ak(t,i.targetGeometry),ck(e,t,n,s,o,r)}}(),vre=function(){const t=Ce();return function(e,i,n,r){const s=Fp(i);return ak(t,i.targetGeometry),ck(e,t,n,s,0,r)}}();function bre(t){const e=En(t);return e?e.valid[1]-e.valid[0]:0}function wre(t,e){return Math.round(bre(t)/e)}const _re=function(){const t=Ce(),e=Ce(),i=[0,0,0];return function(n,r,s){Lt(t,n,r),n2(t,t),Lt(e,n,s),n2(e,e),gF(i,t,e);let o=Math.acos(Ya(t,e)/(gp(t)*gp(e)))*are;return i[2]<0&&(o=-o),isNaN(o)&&(o=0),o}}(),Sre=function(){const t=Ce();return function(e,i,n,r){const s=e.targetGeometry;return Ls(e,i),fre(t,i,n,r),s.x+=t[0],s.y+=t[1],e}}(),r2=function(t,e,i){Ls(t,e);const n=t.targetGeometry;return n.x=i.x,n.y=i.y,n.spatialReference=i.spatialReference,t},$re=function(){const t=Ce();return function(e,i,n,r,s){s||(s="center"),dw(t,n,r),Np(t,t,.5);const o=t[0],a=t[1];switch(s){case"center":ei(t,0,0);break;case"left":ei(t,-o,0);break;case"top":ei(t,0,a);break;case"right":ei(t,o,0);break;case"bottom":ei(t,0,-a);break;case"top-left":ei(t,-o,a);break;case"bottom-left":ei(t,-o,-a);break;case"top-right":ei(t,o,a);break;case"bottom-right":ei(t,o,-a)}return fw(e,i,t),e}}();function wxe(t,e,i){return Ls(t,e),t.rotation+=i,t}function xre(t,e,i){return Ls(t,e),t.rotation=i,t}const Tre=function(){const t=Ce();return function(e,i,n,r,s){return Ls(e,i),isNaN(n)||n===0||(PF(t,r,i,s),e.scale=i.scale*n,RF(t,t,e,s),fw(e,e,ei(t,t[0]-r[0],r[1]-t[1]))),e}}();function wO(t,e,i){return Ls(t,e),t.scale=i,t}const LF=function(){const t=Ce();return function(e,i,n,r,s,o){return Ls(e,i),isNaN(n)||n===0||(PF(t,s,i,o),e.scale=i.scale*n,e.rotation+=r,RF(t,t,e,o),fw(e,e,ei(t,t[0]-s[0],s[1]-t[1]))),e}}(),_xe=function(){const t=Ce(),e=Ce();return function(i,n,r,s,o,a,l){return AF(e,a,l),sk(t,o,e),s?LF(i,n,r,s,t,a):Tre(i,n,r,t,a)}}(),PF=function(){const t=sc();return function(e,i,n,r){return fs(e,i,pre(t,n,r,1))}}(),RF=function(){const t=sc();return function(e,i,n,r){return fs(e,i,uk(t,n,r,1))}}(),fw=function(){const t=Ce(),e=sc();return function(i,n,r){Ls(i,n);const s=Fp(n),o=i.targetGeometry;return uF(e,lk(n)),nk(e,e,oc(s,s)),fs(t,r,e),o.x+=t[0],o.y+=t[1],i}}();let Ere=class{constructor(e,i,n,r){const s=e.targetGeometry,o=i.targetGeometry;r?typeof r=="string"&&(r=lne(r)||_r.ease):r=_r.ease,this.easing=r,this.duration=n,this.sCenterX=s.x,this.sCenterY=s.y,this.sScale=e.scale,this.sRotation=e.rotation,this.tCenterX=o.x,this.tCenterY=o.y,this.tScale=i.scale,this.tRotation=i.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360)}applyRatio(e,i){const n=this.easing(i);let r,s,o,a;i>=1?(r=this.tCenterX,s=this.tCenterY,o=this.tRotation,a=this.tScale):(r=this.sCenterX+n*this.dCenterX,s=this.sCenterY+n*this.dCenterY,o=this.sRotation+n*this.dRotation,a=this.sScale+n*this.dScale),e.targetGeometry.x=r,e.targetGeometry.y=s,e.scale=a,e.rotation=o}},fa=class extends X{constructor(e){super(e),this.updateFunction=null,this.animation=null,this.duration=200,this.transition=null,this.easing=_r.ease,this.view=null,this.viewpoint=new xo({targetGeometry:new he,scale:0,rotation:0}),this._updateTask=ip({postRender:this._postRender.bind(this)}),this._updateTask.pause()}destroy(){this._updateTask=Je(this._updateTask)}animate(e,i,n){this.stop();const r=this.viewpoint;Ls(r,i),this.transition=new Ere(this.viewpoint,e.target,(n==null?void 0:n.duration)||this.duration,(n==null?void 0:n.easing)||this.easing);const s=()=>{var o,a;this.animation===e&&this._updateTask&&(e.state==="finished"&&((o=this.transition)==null||o.applyRatio(this.viewpoint,1),(a=this.view)!=null&&a.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(s,s),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinous(e,i){this.stop(),this.updateFunction=i,this.viewpoint=e;const n=new i2({target:e.clone()}),r=()=>{this.animation===n&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return n.when(r,r),this._startTime=performance.now(),this._updateTask.resume(),this.animation=n,n}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){var n,r;const i=this.animation;if(i&&i.state!==i2.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime);else{const s=this.transition,o=(performance.now()-this._startTime)/s.duration,a=o>=1;s.applyRatio(this.viewpoint,o),a&&((n=this.animation)==null||n.finish())}(r=this.view)!=null&&r.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};c([d()],fa.prototype,"animation",void 0),c([d()],fa.prototype,"duration",void 0),c([d()],fa.prototype,"transition",void 0),c([d()],fa.prototype,"easing",void 0),c([d()],fa.prototype,"view",void 0),c([d()],fa.prototype,"viewpoint",void 0),fa=c([S("esri.views.2d.AnimationManager")],fa);const kre=fa;let Mre=class{constructor(e){this.view=e,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this.stationary=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions)},this.update=()=>{var o,a;if(this._updateRequested=!1,(o=this.view)==null?void 0:o.destroyed)return;const{allLayerViews:i,graphicsView:n,labelManager:r,state:{id:s}}=this.view;i.forEach(this._updateLayerView,this),r!=null&&(r.lastUpdateId!==s&&(r.viewChange(),r.lastUpdateId=s),r.updateRequested&&r.processUpdate(this._updateParameters)),n!=null&&(n.lastUpdateId!==s&&(n.viewChange(),n.lastUpdateId=s),n.updateRequested&&n.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||((a=this._frameTaskHandle)==null||a.pause())}}destroy(){this.stop()}start(){if(this._frameTaskHandle)return;const e=this.view;this.stationary=e.stationary,this._updateParameters={state:e.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:e.renderingOptions},this._stationaryHandle=Z(()=>e.stationary,i=>{this.stationary=i,this.requestFrame()}),this._frameTaskHandle=ip(this),this.requestUpdate()}stop(){var e;this._frameTaskHandle&&(this._updateRequested=!1,(e=this._stationaryHandle)==null||e.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(e){var r;if(!e.attached)return void this.requestUpdate();const i=this.view.state,n=e.lastUpdateId;n!=null&&(this.stationary||e.moving)||(e.moving=!0,e.moveStart()),n!==i.id&&e.viewChange(),this.stationary&&e.moving&&(e.moving=!1,e.moveEnd()),e.lastUpdateId=i.id,e.updateRequested&&e.processUpdate(this._updateParameters),"layerViews"in e&&((r=e.layerViews)==null||r.forEach(this._updateLayerView,this))}},fv=class extends X{constructor(e){super(e),this._gotoTask=null}destroy(){this._gotoTask=null}async goTo(e,i){if(!e)return void J.getLogger(this).error("#goTo()","target cannot be null or undefined");this.view.animation&&(this.view.animation=null);const n=this._createAnimation();await Ha(()=>this.view.ready,i);const r={animate:!0,...i},{extent:s,spatialReference:o,size:a,viewpoint:l,constraints:u,padding:p,allLayerViews:f}=this.view,m=cre(e,{extent:s,spatialReference:o,size:a,viewpoint:l,constraints:u,padding:p,allLayerViews:f,pickClosestTarget:(i==null?void 0:i.pickClosestTarget)??!0});return n==null||n.update(m),this._gotoTask={},r.animate?this._gotoAnimated(m,r):this._gotoImmediate(m,r)}_gotoImmediate(e,i){const n=this._gotoTask,r=this.view.animation,s=e.then(o=>{if(Qe(i),n!==this._gotoTask)throw new F("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=r.target=o,r.finish()});return this._cancellableGoTo(n,r,s)}_gotoAnimated(e,i){const n=this._gotoTask,r=this.view.animation;if(!r)return Promise.resolve();const s=e.then(o=>{if(Qe(i),n!==this._gotoTask)throw new F("view:goto-interrupted","Goto was interrupted");return r.update(o),this.view.animationManager.animate(r,this.view.viewpoint,i),r.when().then(()=>{},()=>{})});return this._cancellableGoTo(n,r,s)}_createAnimation(){return this.view.animation&&!this.view.animation.done||(this.view.animation=new i2),this.view.animation}_cancellableGoTo(e,i,n){const r=()=>e===this._gotoTask;return n.finally(()=>{r()&&(i.done||i.stop(),this.view.animation=null)})}};c([d({constructOnly:!0})],fv.prototype,"view",void 0),fv=c([S("esri.views.2d.GoToManager")],fv);function Tt(){return Promise.all([V(()=>import("./webglDeps-9UdcV4l_.js"),__vite__mapDeps([182,183,184,43,185,186,187]),import.meta.url),V(()=>import("./mapViewDeps-J1uAldVZ.js"),__vite__mapDeps([188,189,190,191,192,193,73,43,184,194,195,196,70,165,153,154,155,32,125,75,76,44,77,197,183,187,198,185,199,200,3,107,106,110,15,12,16,13,74,201,111,72,104,121,105,202,2,203,204,150,151,124,93,84,205,103,182,186,206,207,208,57,209,210,211,108,23,69,212,113,71,29,26,25,213,214,215,216,217,218,20,9,219,220,221,222,82,223]),import.meta.url)])}const hf=()=>Tt().then(()=>V(()=>import("./TileLayerView2D-6KNKvvXo.js"),__vite__mapDeps([224,193,192,73,43,184,194,195,196,70,165,153,154,155,32,125,75,76,44,77,197,183,187,198,185,199,200,3,107,106,110,15,12,16,13,74,201,190,111,72,104,121,105,202,2,203,204,150,151,124,93,84,205,103,206,207,208,57,209,210,211,108,23,69,212,113,71,29,26,25,214,215,217,218,20,9,82,225,226,227,222,228,229,220,221,230,231,232,233,234]),import.meta.url)),jd=()=>Tt().then(()=>V(()=>import("./FeatureLayerView2D-AHj272U4.js"),__vite__mapDeps([235,193,132,73,228,192,43,184,195,196,70,165,153,154,155,32,125,75,76,44,77,197,183,187,198,185,199,200,3,107,106,110,15,12,16,13,74,201,190,111,72,104,121,105,202,2,203,204,150,151,124,93,84,205,226,227,222,69,194,221,137,148,234,230,231]),import.meta.url)),_O={"base-dynamic":()=>Tt().then(()=>V(()=>import("./BaseDynamicLayerView2D-UZZZXrWx.js"),__vite__mapDeps([236,237,197,73,183,184,43,187,44,198,75,76,77,185,199,200,3,107,106,192,193,110,15,12,16,13,228,238,227,230,231]),import.meta.url)),"base-tile":hf,"bing-maps":hf,csv:jd,"geo-rss":()=>Tt().then(()=>V(()=>import("./GeoRSSLayerView2D-swFe2Iq4.js"),__vite__mapDeps([239,122,123,84,70,124,93,85,125,126,127,23,128,29,26,3,132,228,192,193,73,43,184,219,75,76,44,77,220,221,195,196,165,153,154,155,32,197,183,187,198,185,199,200,107,106,110,15,12,16,13,74,201,190,111,72,104,121,105,202,2,203,204,150,151,205,222,82,217,218,20,9,210,211,108,71,25,230]),import.meta.url)),feature:jd,geojson:jd,graphics:()=>Tt().then(()=>V(()=>import("./GraphicsLayerView2D-UqXdm41R.js"),__vite__mapDeps([240,228,192,193,73,43,184,219,75,76,44,77,220,221,195,196,70,165,153,154,155,32,125,197,183,187,198,185,199,200,3,107,106,110,15,12,16,13,74,201,190,111,72,104,121,105,202,2,203,204,150,151,124,93,84,205,222,82,217,218,20,9,210,211,108,23,71,29,26,25,230]),import.meta.url)),group:()=>Tt().then(()=>V(()=>import("./GroupLayerView2D-Ex7ZUEjO.js"),__vite__mapDeps([241,228,192,193,73,43,184,230]),import.meta.url)),imagery:()=>Tt().then(()=>V(()=>import("./ImageryLayerView2D-zSg7sj9l.js"),__vite__mapDeps([242,243,183,184,43,187,44,88,89,197,73,198,75,76,77,185,199,200,3,107,106,192,193,110,15,12,16,13,228,217,201,190,111,72,104,121,105,202,2,203,218,20,9,155,32,195,196,70,165,153,154,125,74,204,150,151,124,93,84,205,210,211,108,23,71,29,26,25,229,220,221,222,82,237,227,238,94,137,234,230,231]),import.meta.url)),"imagery-tile":()=>Tt().then(()=>V(()=>import("./ImageryTileLayerView2D-fVbdKHjR.js"),__vite__mapDeps([244,245,243,183,184,43,187,44,88,89,197,73,198,75,76,77,185,199,200,3,107,106,192,193,110,15,12,16,13,228,246,196,222,247,94,205,137,234,230,231]),import.meta.url)),kml:()=>Tt().then(()=>V(()=>import("./KMLLayerView2D-HR6PjOtC.js"),__vite__mapDeps([248,249,122,123,84,70,124,93,85,125,126,127,23,128,29,26,3,132,227,192,193,73,43,184,237,197,183,187,44,198,75,76,77,185,199,200,107,106,110,15,12,16,13,228,219,220,221,195,196,165,153,154,155,32,74,201,190,111,72,104,121,105,202,2,203,204,150,151,205,222,82,217,218,20,9,210,211,108,71,25,230,94,213,182,186,214,215,212,216,246]),import.meta.url)),"knowledge-graph":()=>Tt().then(()=>V(()=>import("./KnowledgeGraphLayerView2D-2DAAdqTT.js"),__vite__mapDeps([250,228,192,193,73,43,184,230]),import.meta.url)),"link-chart":()=>Tt().then(()=>V(()=>import("./KnowledgeGraphLayerView2D-2DAAdqTT.js"),__vite__mapDeps([250,228,192,193,73,43,184,230]),import.meta.url)),"knowledge-graph-sublayer":jd,"map-image":()=>Tt().then(()=>V(()=>import("./MapImageLayerView2D-KbDsTvYA.js"),__vite__mapDeps([251,237,197,73,183,184,43,187,44,198,75,76,77,185,199,200,3,107,106,192,193,110,15,12,16,13,228,217,201,190,111,72,104,121,105,202,2,203,218,20,9,155,32,195,196,70,165,153,154,125,74,204,150,151,124,93,84,205,210,211,108,23,71,29,26,25,229,220,221,222,82,238,227,230,137,252,233,231,232,234]),import.meta.url)),"map-notes":()=>Tt().then(()=>V(()=>import("./MapNotesLayerView2D-hZMT77ly.js"),__vite__mapDeps([253,228,192,193,73,43,184,219,75,76,44,77,220,221,195,196,70,165,153,154,155,32,125,197,183,187,198,185,199,200,3,107,106,110,15,12,16,13,74,201,190,111,72,104,121,105,202,2,203,204,150,151,124,93,84,205,222,82,217,218,20,9,210,211,108,23,71,29,26,25,230]),import.meta.url)),media:()=>Tt().then(()=>V(()=>import("./MediaLayerView2D-aIRQtFLU.js"),__vite__mapDeps([254,123,84,70,124,93,85,125,126,122,127,23,128,29,26,3,255,218,193,192,73,43,184,194,195,196,165,153,154,155,32,75,76,44,77,197,183,187,198,185,199,200,107,106,110,15,12,16,13,74,201,190,111,72,104,121,105,202,2,203,204,150,151,205,103,206,207,208,57,209,210,211,108,69,212,113,71,25,214,215,217,20,9,82,228,230]),import.meta.url)),"ogc-feature":()=>Tt().then(()=>V(()=>import("./OGCFeatureLayerView2D-DT2oIas8.js"),__vite__mapDeps([256,235,193,132,73,228,192,43,184,195,196,70,165,153,154,155,32,125,75,76,44,77,197,183,187,198,185,199,200,3,107,106,110,15,12,16,13,74,201,190,111,72,104,121,105,202,2,203,204,150,151,124,93,84,205,226,227,222,69,194,221,137,148,234,230,231]),import.meta.url)),"open-street-map":hf,"oriented-imagery":jd,route:()=>Tt().then(()=>V(()=>import("./RouteLayerView2D-WPCXI4lV.js"),__vite__mapDeps([257,258,228,192,193,73,43,184,219,75,76,44,77,220,221,195,196,70,165,153,154,155,32,125,197,183,187,198,185,199,200,3,107,106,110,15,12,16,13,74,201,190,111,72,104,121,105,202,2,203,204,150,151,124,93,84,205,222,82,217,218,20,9,210,211,108,23,71,29,26,25,230]),import.meta.url)),stream:()=>Tt().then(()=>V(()=>import("./StreamLayerView2D-YN5trEnj.js"),__vite__mapDeps([259,132,235,193,73,228,192,43,184,195,196,70,165,153,154,155,32,125,75,76,44,77,197,183,187,198,185,199,200,3,107,106,110,15,12,16,13,74,201,190,111,72,104,121,105,202,2,203,204,150,151,124,93,84,205,226,227,222,69,194,221,137,148,234,230,231]),import.meta.url)),"subtype-group":()=>Tt().then(()=>V(()=>import("./SubtypeGroupLayerView2D-0ZqYj26Z.js"),__vite__mapDeps([260,235,193,132,73,228,192,43,184,195,196,70,165,153,154,155,32,125,75,76,44,77,197,183,187,198,185,199,200,3,107,106,110,15,12,16,13,74,201,190,111,72,104,121,105,202,2,203,204,150,151,124,93,84,205,226,227,222,69,194,221,137,148,234,230,231]),import.meta.url)),tile:hf,"vector-tile":()=>Tt().then(()=>V(()=>import("./VectorTileLayerView2D-ts_JFIft.js"),__vite__mapDeps([261,70,103,105,43,184,57,208,203,23,183,187,106,196,192,193,73,107,76,75,44,77,222,197,198,185,199,200,3,110,15,12,16,13,109,91,104,228,230]),import.meta.url)),video:()=>Tt().then(()=>V(()=>import("./VideoLayerView2D-GS0T_KOC.js"),__vite__mapDeps([262,228,192,193,73,43,184,219,75,76,44,77,220,221,195,196,70,165,153,154,155,32,125,197,183,187,198,185,199,200,3,107,106,110,15,12,16,13,74,201,190,111,72,104,121,105,202,2,203,204,150,151,124,93,84,205,222,82,217,218,20,9,210,211,108,23,71,29,26,25,230]),import.meta.url)),wcs:()=>Tt().then(()=>V(()=>import("./ImageryTileLayerView2D-fVbdKHjR.js"),__vite__mapDeps([244,245,243,183,184,43,187,44,88,89,197,73,198,75,76,77,185,199,200,3,107,106,192,193,110,15,12,16,13,228,246,196,222,247,94,205,137,234,230,231]),import.meta.url)),"web-tile":hf,wfs:jd,wms:()=>Tt().then(()=>V(()=>import("./WMSLayerView2D-H149SGv5.js"),__vite__mapDeps([263,237,197,73,183,184,43,187,44,198,75,76,77,185,199,200,3,107,106,192,193,110,15,12,16,13,228,238,227,230,231,137,264]),import.meta.url)),wmts:()=>Tt().then(()=>V(()=>import("./WMTSLayerView2D-wrLk8Wtm.js"),__vite__mapDeps([265,225,226,227,192,193,73,43,184,196,197,183,187,44,198,75,76,77,185,199,200,3,107,106,110,15,12,16,13,222,228,230,231]),import.meta.url)),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};function Cre(t){const e=t.declaredClass?t.declaredClass.slice(t.declaredClass.lastIndexOf(".")+1):"Unknown",i=e.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new F(`${i}:view-not-supported`,`${e} is not supported in 2D`)}const SO={hasLayerViewModule:t=>_O[t.type]!=null,importLayerView:t=>{const e=_O[t.type];if(e==null)throw Cre(t);return e(t)}};function Ire(t,e){const{spatialReference:i}=e,n=[e.x,e.y];let r=Number.POSITIVE_INFINITY,s=0,o=0;const a=[0,0],l=t.type==="extent"?[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]:t.rings;for(const u of l)for(let p=0;p<u.length-1;p++){mq(a,n,u,p);const f=Dp(n,a);f<r&&(r=f,s=a[0],o=a[1])}return{coordinate:new he({x:s,y:o,spatialReference:i}),distance:r}}var s2;let Ou=s2=class extends AE(X){constructor(t){super(t),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return Oo(this.geometry,this.spatialReference)}catch(t){return J.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:t}),null}return this.geometry}constrain(t,e){if(this.normalizedGeometry==null)return t;const i=t.targetGeometry;if(this.normalizedGeometry.type==="extent"?A1(this.normalizedGeometry,i):OR(this.normalizedGeometry,i))return t;const{coordinate:n}=Ire(this.normalizedGeometry,i);return n&&(t.targetGeometry=n),t}clone(){var t,e;return new s2({geometry:(t=this.geometry)==null?void 0:t.clone(),spatialReference:(e=this.spatialReference)==null?void 0:e.clone()})}};c([d({constructOnly:!0})],Ou.prototype,"geometry",void 0),c([d({readOnly:!0})],Ou.prototype,"normalizedGeometry",null),c([d({constructOnly:!0})],Ou.prototype,"spatialReference",void 0),Ou=s2=c([S("esri.views.2d.constraints.GeometryConstraint")],Ou);var o2;let em=o2=class extends AE(X){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(t,e){return this.enabled&&e&&(this.rotationEnabled||(t.rotation=e.rotation)),t}clone(){return new o2({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};c([d()],em.prototype,"enabled",void 0),c([d()],em.prototype,"rotationEnabled",void 0),em=o2=c([S("esri.views.2d.constraints.RotationConstraint")],em);const NF=em;var a2;let mn=a2=class extends AE(X){constructor(t){super(t),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let t,{lods:e,minScale:i,maxScale:n,minZoom:r,maxZoom:s}=this,o=-1,a=-1,l=!1,u=!1;if(i!==0&&n!==0&&i<n&&([i,n]=[n,i]),!(e!=null&&e.length))return this._set("effectiveMinScale",i),void this._set("effectiveMaxScale",n);e=e.map(p=>p.clone()),e.sort((p,f)=>f.scale-p.scale),e.forEach((p,f)=>p.level=f);for(const p of e)!l&&i>0&&i>=p.scale&&(o=p.level,l=!0),!u&&n>0&&n>=p.scale&&(a=t?t.level:-1,u=!0),t=p;r===-1&&(r=i===0?0:o),s===-1&&(s=n===0?e.length-1:a),r=Math.max(r,0),r=Math.min(r,e.length-1),s=Math.max(s,0),s=Math.min(s,e.length-1),r>s&&([r,s]=[s,r]),i=e[r].scale,n=e[s].scale,e.splice(0,r),e.splice(s-r+1,e.length),e.forEach((p,f)=>{this._lodByScale[p.scale]=p,this._scales[f]=p.scale}),this._set("effectiveLODs",e),this._set("effectiveMinZoom",r),this._set("effectiveMaxZoom",s),this._set("effectiveMinScale",i),this._set("effectiveMaxScale",n)}constrain(t,e){if(e&&t.scale===e.scale)return t;const i=this.effectiveMinScale,n=this.effectiveMaxScale,r=t.targetGeometry,s=e&&e.targetGeometry,o=n!==0&&t.scale<n,a=i!==0&&t.scale>i;if(o||a){const l=a?i:n;if(e&&s){const u=(l-e.scale)/(t.scale-e.scale);r.x=s.x+(r.x-s.x)*u,r.y=s.y+(r.y-s.y)*u}t.scale=l}return this.snapToZoom&&this.effectiveLODs&&(t.scale=this._getClosestScale(t.scale)),t}fit(t){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(t,null);const e=this.scaleToZoom(t.scale),i=Math.abs(e-Math.floor(e));return t.scale=this.zoomToScale(i>.99?Math.round(e):Math.floor(e)),t}zoomToScale(t){if(!this.effectiveLODs)return 0;t-=this.effectiveMinZoom,t=Math.max(0,t);const e=this._scales;if(t<=0)return e[0];if(t>=e.length)return e[e.length-1];const i=Math.round(t-.5),n=Math.round(t);return e[n]+(n-t)*(e[i]-e[n])}scaleToZoom(t){if(!this.effectiveLODs)return-1;const e=this._scales;let i,n;if(t>=e[0])return this.effectiveMinZoom;if(t<=e[e.length-1])return this.effectiveMaxZoom;for(let r=0;r<e.length-1;r++){if(i=e[r],n=e[r+1],n===t)return r+this.effectiveMinZoom+1;if(i>t&&n<t)return r+this.effectiveMinZoom+1-(t-n)/(i-n)}return-1}snapToClosestScale(t){if(!this.effectiveLODs)return t;const e=this.scaleToZoom(t);return this.zoomToScale(Math.round(e))}snapToNextScale(t,e=.5){if(!this.effectiveLODs)return t*e;const i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i+1)}snapToPreviousScale(t,e=2){if(!this.effectiveLODs)return t*e;const i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i-1)}clone(){return new a2({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(t){return this._lodByScale[t]||(t=this._scales.reduce((e,i)=>Math.abs(i-t)<=Math.abs(e-t)?i:e,this._scales[0])),this._lodByScale[t].scale}};c([d({readOnly:!0})],mn.prototype,"effectiveLODs",void 0),c([d({readOnly:!0})],mn.prototype,"effectiveMinZoom",void 0),c([d({readOnly:!0})],mn.prototype,"effectiveMaxZoom",void 0),c([d({readOnly:!0})],mn.prototype,"effectiveMinScale",void 0),c([d({readOnly:!0})],mn.prototype,"effectiveMaxScale",void 0),c([d()],mn.prototype,"lods",void 0),c([d()],mn.prototype,"minZoom",void 0),c([d()],mn.prototype,"maxZoom",void 0),c([d()],mn.prototype,"minScale",void 0),c([d()],mn.prototype,"maxScale",void 0),c([d()],mn.prototype,"snapToZoom",void 0),mn=a2=c([S("esri.views.2d.constraints.ZoomConstraint")],mn);const DF=mn,Ore={base:null,key:"type",typeMap:{extent:Ve,polygon:Mn}};let Ot=class extends X{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new te}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){var e,i,n;return`${(e=this._zoom)==null?void 0:e.uid}/${(i=this._rotation)==null?void 0:i.uid}/${(n=this._geometry)==null?void 0:n.uid}`}get _geometry(){var i,n;const e=this._get("_geometry");return e&&this.geometry===e.geometry&&((i=this.view)==null?void 0:i.constraintsInfo.spatialReference)===e.spatialReference?e:new Ou({geometry:this.geometry,spatialReference:(n=this.view)==null?void 0:n.constraintsInfo.spatialReference})}get _rotation(){return new NF({rotationEnabled:this.rotationEnabled})}get _zoom(){var l;const e=this._get("_zoom"),i=this.lods||((l=this.view)==null?void 0:l.constraintsInfo.lods),n=this.minZoom,r=this.maxZoom,s=this.minScale,o=this.maxScale,a=this.snapToZoom;return e&&e.lods===i&&e.minZoom===n&&e.maxZoom===r&&e.minScale===s&&e.maxScale===o&&e.snapToZoom===a?e:new DF({lods:i,minZoom:n,maxZoom:r,minScale:s,maxScale:o,snapToZoom:a})}canZoomInTo(e){const i=this.effectiveMaxScale;return i===0||e>=i}canZoomOutTo(e){const i=this.effectiveMinScale;return i===0||e<=i}constrain(e,i){return this._zoom.constrain(e,i),this._rotation.constrain(e,i),this._geometry.constrain(e,i),this.customConstraints.forEach(n=>n.constrain(e,i)),e}constrainByGeometry(e){return this._geometry.constrain(e),this.customConstraints.forEach(i=>{var n;return(n=i.applyPanConstraint)==null?void 0:n.call(i,e)}),e}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};c([d({readOnly:!0})],Ot.prototype,"effectiveLODs",null),c([d({readOnly:!0})],Ot.prototype,"effectiveMinScale",null),c([d({readOnly:!0})],Ot.prototype,"effectiveMaxScale",null),c([d({readOnly:!0})],Ot.prototype,"effectiveMinZoom",null),c([d({readOnly:!0})],Ot.prototype,"effectiveMaxZoom",null),c([d({types:Ore,value:null})],Ot.prototype,"geometry",null),c([d({type:[Sr]})],Ot.prototype,"lods",void 0),c([d()],Ot.prototype,"minScale",void 0),c([d()],Ot.prototype,"maxScale",void 0),c([d()],Ot.prototype,"minZoom",void 0),c([d()],Ot.prototype,"maxZoom",void 0),c([d()],Ot.prototype,"rotationEnabled",void 0),c([d()],Ot.prototype,"snapToZoom",void 0),c([d({type:te})],Ot.prototype,"customConstraints",void 0),c([d()],Ot.prototype,"view",void 0),c([d({readOnly:!0})],Ot.prototype,"version",null),c([d({type:Ou,readOnly:!0})],Ot.prototype,"_geometry",null),c([d({type:NF})],Ot.prototype,"_rotation",null),c([d({readOnly:!0,type:DF})],Ot.prototype,"_zoom",null),Ot=c([S("esri.views.2d.MapViewConstraints")],Ot);const FF=Ot;let dd=class hu{static getId(e,i,n,r){return typeof e=="object"?`${e.level}/${e.row}/${e.col}/${e.world}`:`${e}/${i}/${n}/${r}`}constructor(e,i,n,r){this.set(e,i,n,r)}get key(){return this}get id(){return this.toString()}set id(e){this.set(e)}get hash(){const e=4095&this.row,i=4095&this.col,n=63&this.level;return(3&this.world)<<30|i<<22|e<<8|n}acquire(e,i,n,r){this.set(e,i,n,r)}contains(e){const i=e.level-this.level;return i>=0&&this.row===e.row>>i&&this.col===e.col>>i&&this.world===e.world}equals(e){return this.level===e.level&&this.row===e.row&&this.col===e.col&&this.world===e.world}clone(){return new hu(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(e,i,n,r){if(e==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof e=="object")this.level=e.level||0,this.row=e.row||0,this.col=e.col||0,this.world=e.world||0;else if(typeof e=="string"){const[s,o,a,l]=e.split("/");this.level=parseFloat(s),this.row=parseFloat(o),this.col=parseFloat(a),this.world=parseFloat(l)}else this.level=+e,this.row=+i,this.col=+n,this.world=+r||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new hu(this.level-1,this.row>>1,this.col>>1,this.world)}getChildKeys(){const e=this.level+1,i=this.row<<1,n=this.col<<1,r=this.world;return[new hu(e,i,n,r),new hu(e,i,n+1,r),new hu(e,i+1,n,r),new hu(e,i+1,n+1,r)]}compareRowMajor(e){return this.row<e.row?-1:this.row>e.row?1:this.col<e.col?-1:this.col>e.col?1:0}};dd.pool=new _d(dd,null,null,25,50);function cl(t,e){return[t,e]}function Dc(t,e,i){return t[0]=e,t[1]=i,t}function Are(t,e,i,n,r){return t[0]=e,t[1]=i,t[2]=n,t[3]=r,t}const qr=new dd("0/0/0/0");let Lre=class zF{static create(e,i,n=null){const r=En(e.spatialReference),s=i.origin||cl(e.origin.x,e.origin.y),o=cl(e.size[0]*i.resolution,e.size[1]*i.resolution),a=cl(-1/0,-1/0),l=cl(1/0,1/0),u=cl(1/0,1/0);n!=null&&(Dc(a,Math.max(0,Math.floor((n.xmin-s[0])/o[0])),Math.max(0,Math.floor((s[1]-n.ymax)/o[1]))),Dc(l,Math.max(0,Math.floor((n.xmax-s[0])/o[0])),Math.max(0,Math.floor((s[1]-n.ymin)/o[1]))),Dc(u,l[0]-a[0]+1,l[1]-a[1]+1));const{cols:p,rows:f}=i;let m,g,y,v;return!n&&p&&f&&(Dc(a,p[0],f[0]),Dc(l,p[1],f[1]),Dc(u,p[1]-p[0]+1,f[1]-f[0]+1)),e.isWrappable?(m=cl(Math.ceil(Math.round((r.valid[1]-r.valid[0])/i.resolution)/e.size[0]),u[1]),g=cl(Math.floor((r.origin[0]-s[0])/o[0]),a[1]),y=cl(m[0]+g[0]-1,l[1]),v=!0):(g=a,y=l,m=u,v=!1),new zF(i.level,i.resolution,i.scale,s,a,l,u,o,g,y,m,v)}constructor(e,i,n,r,s,o,a,l,u,p,f,m){this.level=e,this.resolution=i,this.scale=n,this.origin=r,this.first=s,this.last=o,this.size=a,this.norm=l,this.worldStart=u,this.worldEnd=p,this.worldSize=f,this.wrap=m}normalizeCol(e){if(!this.wrap)return e;const i=this.worldSize[0];return e<0?i-1-Math.abs((e+1)%i):e%i}denormalizeCol(e,i){return this.wrap?this.worldSize[0]*i+e:e}getWorldForColumn(e){return this.wrap?Math.floor(e/this.worldSize[0]):0}getFirstColumnForWorld(e){return e*this.worldSize[0]+this.first[0]}getLastColumnForWorld(e){return e*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(e){return(e-this.origin[0])/this.norm[0]}getXForColumn(e){return this.origin[0]+e*this.norm[0]}getRowForY(e){return(this.origin[1]-e)/this.norm[1]}getYForRow(e){return this.origin[1]-e*this.norm[1]}getTileBounds(e,i,n=!1){qr.set(i);const r=n?qr.col:this.denormalizeCol(qr.col,qr.world),s=qr.row;return Are(e,this.getXForColumn(r),this.getYForRow(s+1),this.getXForColumn(r+1),this.getYForRow(s)),e}getTileCoords(e,i,n=!1){qr.set(i);const r=n?qr.col:this.denormalizeCol(qr.col,qr.world);return Array.isArray(e)?Dc(e,this.getXForColumn(r),this.getYForRow(qr.row)):(e.x=this.getXForColumn(r),e.y=this.getYForRow(qr.row)),e}},lg=class{constructor(){this.spans=[]}acquire(e){this.lodInfo=e}release(){this.lodInfo=null,this.spans.length=0}forEach(e,i){const{spans:n,lodInfo:r}=this,{level:s}=r;if(n.length!==0)for(const{row:o,colFrom:a,colTo:l}of n)for(let u=a;u<=l;u++)e.call(i,s,o,r.normalizeCol(u),r.getWorldForColumn(u))}};lg.pool=new _d(lg);let R_=class{constructor(e,i,n){this.row=e,this.colFrom=i,this.colTo=n}};const mt=new dd("0/0/0/0");let Pre=class jF{static create(e,i){e[1]>i[1]&&([e,i]=[i,e]);const[n,r]=e,[s,o]=i,a=s-n,l=o-r,u=l!==0?a/l:0,p=(Math.ceil(r)-r)*u,f=(Math.floor(r)-r)*u;return new jF(n,Math.floor(r),Math.ceil(o),u,a<0?p:f,a<0?f:p,a<0?s:n,a<0?n:s)}constructor(e,i,n,r,s,o,a,l){this.x=e,this.ymin=i,this.ymax=n,this.invM=r,this.leftAdjust=s,this.rightAdjust=o,this.leftBound=a,this.rightBound=l}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}};const Nn=[[0,0],[0,0],[0,0],[0,0]],Rre=1e-6;let Nre=class{constructor(e,i=null,n=e.lods[0].level,r=e.lods[e.lods.length-1].level){this.tileInfo=e,this.fullExtent=i,this.scales=[],this._infoByScale={},this._infoByLevel={};const s=e.lods.filter(a=>a.level>=n&&a.level<=r);this.minScale=s[0].scale,this.maxScale=s[s.length-1].scale;const o=this._lodInfos=s.map(a=>Lre.create(e,a,i));s.forEach((a,l)=>{this._infoByLevel[a.level]=o[l],this._infoByScale[a.scale]=o[l],this.scales[l]=a.scale},this),this._wrap=e.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(e){return this._infoByLevel[typeof e=="number"?e:e.level]}getTileBounds(e,i,n=!1){mt.set(i);const r=this._infoByLevel[mt.level];return r?r.getTileBounds(e,mt,n):e}getTileCoords(e,i,n=!1){mt.set(i);const r=this._infoByLevel[mt.level];return r?r.getTileCoords(e,mt,n):e}getTileCoverage(e,i=192,n=!0,r="closest"){if(!n&&(e.scale>this.minScale||e.scale<this.maxScale))return null;const s=r==="closest"?this.getClosestInfoForScale(e.scale):this.getSmallestInfoForScale(e.scale),o=lg.pool.acquire(s),a=this._wrap;let l,u,p,f=1/0,m=-1/0;const g=o.spans;Nn[0][0]=Nn[0][1]=Nn[1][1]=Nn[3][0]=-i,Nn[1][0]=Nn[2][0]=e.size[0]+i,Nn[2][1]=Nn[3][1]=e.size[1]+i;for(const _ of Nn)e.toMap(_,_),_[0]=s.getColumnForX(_[0]),_[1]=s.getRowForY(_[1]);const y=[];let v=3;for(let _=0;_<4;_++){if(Nn[_][1]===Nn[v][1]){v=_;continue}const $=Pre.create(Nn[_],Nn[v]);f=Math.min($.ymin,f),m=Math.max($.ymax,m),y[$.ymin]===void 0&&(y[$.ymin]=[]),y[$.ymin].push($),v=_}if(f==null||m==null||m-f>100)return null;let b=[];for(l=f;l<m;){y[l]!=null&&(b=b.concat(y[l])),u=1/0,p=-1/0;for(let _=b.length-1;_>=0;_--){const $=b[_];u=Math.min(u,$.getLeftCol()),p=Math.max(p,$.getRightCol())}if(u=Math.floor(u),p=Math.floor(p),l>=s.first[1]&&l<=s.last[1])if(a)if(s.size[0]<s.worldSize[0]){const _=Math.floor(p/s.worldSize[0]);for(let $=Math.floor(u/s.worldSize[0]);$<=_;$++)g.push(new R_(l,Math.max(s.getFirstColumnForWorld($),u),Math.min(s.getLastColumnForWorld($),p)))}else g.push(new R_(l,u,p));else u>s.last[0]||p<s.first[0]||(u=Math.max(u,s.first[0]),p=Math.min(p,s.last[0]),g.push(new R_(l,u,p)));l+=1;for(let _=b.length-1;_>=0;_--){const $=b[_];$.ymax>=l?$.incrRow():b.splice(_,1)}}return o}getTileParentId(e){mt.set(e);const i=this._infoByLevel[mt.level],n=this._lodInfos.indexOf(i)-1;return n<0?null:(this._getTileIdAtLOD(mt,this._lodInfos[n],mt),mt.id)}getTileResolution(e){const i=this._infoByLevel[typeof e=="object"?e.level:e];return i?i.resolution:-1}getTileScale(e){const i=this._infoByLevel[e.level];return i?i.scale:-1}intersects(e,i){mt.set(i);const n=this._infoByLevel[mt.level],r=e.lodInfo;if(r.resolution>n.resolution){this._getTileIdAtLOD(mt,r,mt);const o=r.denormalizeCol(mt.col,mt.world);for(const a of e.spans)if(a.row===mt.row&&a.colFrom<=o&&a.colTo>=o)return!0}if(r.resolution<n.resolution){const[o,a,l,u]=e.spans.reduce((v,b)=>(v[0]=Math.min(v[0],b.row),v[1]=Math.max(v[1],b.row),v[2]=Math.min(v[2],b.colFrom),v[3]=Math.max(v[3],b.colTo),v),[1/0,-1/0,1/0,-1/0]),p=n.denormalizeCol(mt.col,mt.world),f=r.getColumnForX(n.getXForColumn(p)),m=r.getRowForY(n.getYForRow(mt.row)),g=r.getColumnForX(n.getXForColumn(p+1))-1,y=r.getRowForY(n.getYForRow(mt.row+1))-1;return!(f>u||g<l||m>a||y<o)}const s=r.denormalizeCol(mt.col,mt.world);return e.spans.some(o=>o.row===mt.row&&o.colFrom<=s&&o.colTo>=s)}normalizeBounds(e,i,n){if(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],this._wrap){const r=En(this.tileInfo.spatialReference),s=-n*(r.valid[1]-r.valid[0]);e[0]+=s,e[2]+=s}return e}getSmallestInfoForScale(e){const i=this.scales;if(this._infoByScale[e])return this._infoByScale[e];if(e>i[0])return this._infoByScale[i[0]];for(let n=1;n<i.length-1;n++)if(e>i[n]+Rre)return this._infoByScale[i[n-1]];return this._infoByScale[i[i.length-1]]}getClosestInfoForScale(e){const i=this.scales;return this._infoByScale[e]||(e=i.reduce((n,r)=>Math.abs(r-e)<Math.abs(n-e)?r:n,i[0])),this._infoByScale[e]}scaleToLevel(e){const i=this.scales;if(this._infoByScale[e])return this._infoByScale[e].level;for(let n=i.length-1;n>=0;n--)if(e<i[n])return n===i.length-1?this._infoByScale[i[i.length-1]].level:this._infoByScale[i[n]].level+(i[n]-e)/(i[n]-i[n+1]);return this._infoByScale[i[0]].level}scaleToZoom(e){return this.tileInfo.scaleToZoom(e)}_getTileIdAtLOD(e,i,n){const r=this._infoByLevel[n.level];return e.set(n),i.resolution<r.resolution?null:(i.resolution===r.resolution||(e.level=i.level,e.col=Math.floor(n.col*r.resolution/i.resolution+.01),e.row=Math.floor(n.row*r.resolution/i.resolution+.01)),e)}},N_=class{constructor(){this._map=new Map,this._observable=new Og}get size(){return ue(this._observable),this._map.size}clear(){this._map.size>0&&(this._map.clear(),this._observable.notify())}delete(e){const i=this._map.delete(e);return i&&this._observable.notify(),i}entries(){return ue(this._observable),this._map.entries()}forEach(e,i){ue(this._observable),this._map.forEach((n,r)=>e.call(i,n,r,this),i)}get(e){return ue(this._observable),this._map.get(e)}has(e){return ue(this._observable),this._map.has(e)}keys(){return ue(this._observable),this._map.keys()}set(e,i){return this._map.set(e,i),this._observable.notify(),this}values(){return ue(this._observable),this._map.values()}[Symbol.iterator](){return ue(this._observable),this._map[Symbol.iterator]()}get[Symbol.toStringTag](){return this._map[Symbol.toStringTag]}},Dre=class{constructor(e,i){this.item=e,this.controller=i,this.promise=null}},Fre=class{constructor(e){this._schedule=null,this._task=null,this._deferreds=new N_,this._controllers=new N_,this._processingItems=new N_,this._pausedSignal=ig(!1),this.concurrency=1,e.concurrency&&(this.concurrency=e.concurrency),this._queue=new sb(e.peeker),this.process=e.process;const i=e.scheduler;e.priority&&i&&(this._task=i.registerTask(e.priority,this))}destroy(){this.clear(),this._schedule=Je(this._schedule),this._task=Je(this._task)}get updating(){var e;return!!((e=this._task)!=null&&e.updating)||this.running}get length(){return this._processingItems.size+this._queue.length}abort(e){const i=this._controllers.get(e);i&&i.abort()}clear(){this._queue.clear();const e=[];this._controllers.forEach(i=>e.push(i)),this._controllers.clear(),e.forEach(i=>i.abort()),this._processingItems.clear(),this._cancelNext()}forEach(e){this._deferreds.forEach((i,n)=>e(n))}get(e){const i=this._deferreds.get(e);return i?i.promise:void 0}isOngoing(e){return this._processingItems.has(e)}has(e){return this._deferreds.has(e)}pause(){this._pausedSignal.value||(this._pausedSignal.value=!0,this._cancelNext())}push(e,i){const n=this.get(e);if(n)return n;const r=new AbortController;let s=null;i&&(s=Mr(i,()=>r.abort()));const o=()=>{const p=this._processingItems.get(e);p&&p.controller.abort(),a(),u.reject(Xe())},a=()=>{l.remove(),s!=null&&s.remove(),this._deferreds.delete(e),this._controllers.delete(e),this._queue.remove(e),this._processingItems.delete(e),this._scheduleNext()},l=_T(r.signal,o),u=Or();return this._deferreds.set(e,u),this._controllers.set(e,r),u.promise.then(a,a),this._queue.push(e),this._scheduleNext(),u.promise}last(){return this._queue.last()}peek(){return this._queue.peek()}popLast(){return this._queue.popLast()}reset(){const e=[];this._processingItems.forEach(i=>e.push(i)),this._processingItems.clear();for(const i of e)this._queue.push(i.item),i.controller.abort();this._scheduleNext()}resume(){this._pausedSignal.value&&(this._pausedSignal.value=!1,this._scheduleNext())}takeAll(){const e=[];for(;this._queue.length;)e.push(this._queue.pop());return this.clear(),e}get running(){return!this._pausedSignal.value&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(e){for(;!e.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),e.madeProgress()}_scheduleNext(){this._task||this._pausedSignal.value||this._schedule||(this._schedule=$g(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(e,i){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).resolve(i))}_processError(e,i){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).reject(i))}_canProcessFulfillment(e){return!!this._deferreds.get(e.item)&&this._processingItems.get(e.item)===e}_process(e){if(e==null)return;let i;const n=new AbortController,r=new Dre(e,n);this._processingItems.set(e,r);try{i=this.process(e,n.signal)}catch(s){this._processError(r,s)}Za(i)?(r.promise=i,i.then(s=>this._processResult(r,s),s=>this._processError(r,s))):this._processResult(r,i)}get test(){return{update:e=>this.runTask(e)}}};function zre(t,e){return t.length=0,e.forEach(i=>t.push(i)),t}const D_=new Set,Jy=[],Gd=new Map,$O=[0,0];let Cl=class extends X{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:i,strategy:n}=this;this._queue=new Fre({concurrency:e,process:(r,s)=>{const o=this._keyToItem.get(r);return i(o,{signal:s})},peeker:n==="scale-first"?r=>this._peekByScaleFirst(r):r=>this._peekByCenterFirst(r)})}destroy(){this.clear(),this._queue=Oe(this._queue)}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}abort(e){const i=typeof e=="string"?e:e.id;this._queue.abort(i)}clear(){this._queue.clear(),this._keyToItem.clear()}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const i=typeof e=="string"?e:e.id;return this.has(i)&&this._queue.isOngoing(i)}pause(){this._queue.pause()}push(e){const i=e.key.id;if(this._queue.has(i))return this._queue.get(i);const n=this._queue.push(i),r=()=>{this._keyToItem.delete(i)};return this._keyToItem.set(i,e),n.then(r,r),n}reset(){this._queue.reset()}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const i=this.tileInfoView;let n=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;e.forEach(p=>{const f=this._keyToItem.get(p),m=this.tileInfoView.getTileScale(f.key);Gd.has(m)||(Gd.set(m,[]),n=Math.max(m,n),r=Math.min(m,r)),Gd.get(m).push(f.key),D_.add(m)});let s=this.state.scale;Gd.has(s)||(zre(Jy,D_),Jy.sort((p,f)=>p-f),s=Jy.reduce((p,f)=>Math.abs(f-s)<Math.abs(p-s)?f:p,Jy[0])),s=Math.min(s,n),s=Math.max(s,r);const o=Gd.get(s),a=i.getClosestInfoForScale(s),l=a.getColumnForX(this.state.center[0]),u=a.getRowForY(this.state.center[1]);return o.sort((p,f)=>{const m=a.denormalizeCol(p.col,p.world),g=a.denormalizeCol(f.col,f.world);return Math.sqrt((l-m)*(l-m)+(u-p.row)*(u-p.row))-Math.sqrt((l-g)*(l-g)+(u-f.row)*(u-f.row))}),D_.clear(),Gd.clear(),o[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const i=this.tileInfoView,n=this.state.center;let r,s=Number.POSITIVE_INFINITY;return e.forEach(o=>{const a=this._keyToItem.get(o);i.getTileCoords($O,a.key);const l=Dp($O,n);l<s&&(s=l,r=a.key)}),r.id}};c([d({constructOnly:!0})],Cl.prototype,"concurrency",void 0),c([d({constructOnly:!0})],Cl.prototype,"process",void 0),c([d()],Cl.prototype,"state",void 0),c([d({constructOnly:!0})],Cl.prototype,"strategy",void 0),c([d({constructOnly:!0})],Cl.prototype,"tileInfoView",void 0),Cl=c([S("esri.views.2d.tiling.TileQueue")],Cl);const Pxe=Cl;let jre=class{constructor(e,i,n){this.maxSize=e,this._tileInfoView=i,this._removedFunc=n,this._tilePerId=new Map,this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear(),this._tileKeysPerLevel=[]}has(e){return this._tilePerId.has(e)}get(e){return this._tilePerId.get(e)}pop(e){const i=this._tilePerId.get(e);if(!i)return;const n=i.key.level,r=this._tileKeysPerLevel[n];xO(this._tilePerId,e);for(let s=0;s<r.length;s++)if(r[s].id===e){r.splice(s,1);break}return i.visible=!0,i}add(e){e.visible=!1;const i=e.key,n=i.id;if(this._tilePerId.has(n))return;this._tilePerId.set(n,e);const r=i.level;this._tileKeysPerLevel[r]||(this._tileKeysPerLevel[r]=[]),this._tileKeysPerLevel[r].push(i)}prune(e,i,n){let r=this._tilePerId.size;if(r<=this.maxSize)return;let s=this._tileKeysPerLevel.length-1;for(;r>this.maxSize&&s>=0;)s!==e&&(r=this._pruneAroundCenterTile(r,i,n,s)),s--;r>this.maxSize&&(r=this._pruneAroundCenterTile(r,i,n,e))}_pruneAroundCenterTile(e,i,n,r){const s=this._tileKeysPerLevel[r];if(!s||s.length===0)return e;const{size:o,origin:a}=this._tileInfoView.tileInfo,l=n*o[0],u=n*o[1],p=[0,0],f=[0,0];for(s.sort((m,g)=>(p[0]=a.x+l*(m.col+.5),p[1]=a.y-u*(m.row+.5),f[0]=a.x+l*(g.col+.5),f[1]=a.y-u*(g.row+.5),Pr(p,i)-Pr(f,i)));s.length>0;){const m=s.pop();if(this._removeTile(m.id),--e===this.maxSize)break}return e}_removeTile(e){const i=this._tilePerId.get(e);this._removedFunc&&i&&this._removedFunc(i),xO(this._tilePerId,e)}};function xO(t,e){t.delete(e)}const Fc=new dd(0,0,0,0),Zo=new Map,zc=[],F_=[];let Nxe=class{constructor(e){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,e.resampling!=null&&(this.resampling=e.resampling),e.cachePolicy&&(this.cachePolicy=e.cachePolicy),e.coveragePolicy&&(this.coveragePolicy=e.coveragePolicy),e.buffer!=null&&(this.buffer=e.buffer),e.cacheSize&&(this._tileCache=new jre(e.cacheSize,this.tileInfoView,i=>{this.releaseTile(i)}))}destroy(){this.tileIndex.clear()}update(e){var _,$;const{resampling:i,tileIndex:n}=this,{scale:r,center:s,resolution:o}=e.state,{minScale:a,maxScale:l}=this.tileInfoView,u=!e.stationary&&r>this._previousScale;if(this._previousScale=r,!i&&(r>a||r<l))return this.tiles.length=0,void this.clear();const p=this.tileInfoView.getTileCoverage(e.state,this.buffer,this.resampling,this.coveragePolicy);if(!p)return this.tiles.length=0,void this.clear();const{spans:f,lodInfo:m}=p,{level:g}=m;this.tiles.length=0,n.forEach(x=>x.visible=!0);let y=0,v=0;if(f.length>0)for(const{row:x,colFrom:E,colTo:C}of f)for(let M=E;M<=C;M++){y++;const N=Fc.set(g,x,m.normalizeCol(M),m.getWorldForColumn(M)).id;let G=n.get(N);if(G)G.isReady?(Zo.set(N,G),v++):u||this._addParentTile(N,Zo);else{if((_=this._tileCache)!=null&&_.has(N)){if(G=this._tileCache.pop(N),this.tileIndex.set(N,G),G.isReady){Zo.set(N,G),v++;continue}}else G=this.acquireTile(Fc),this.tileIndex.set(N,G);u||this._addParentTile(N,Zo)}}const b=v===y;for(const[x,E]of n){if(Zo.has(x))continue;Fc.set(x);const C=this.tileInfoView.intersects(p,Fc),M=this.cachePolicy==="purge"?Fc.level!==g:Fc.level>g;!C||!u&&b?!M&&C||zc.push(E):E.isReady?M&&this.cachePolicy==="purge"&&this._hasReadyAncestor(Fc,g)?zc.push(E):F_.push(E):M&&zc.push(E)}for(const x of F_)x.isReady&&Zo.set(x.key.id,x);for(const x of zc)this._tileCache?this._tileCache.add(x):this.releaseTile(x),n.delete(x.key.id);for(const x of Zo.values())this.tiles.push(x);for(const x of n.values())Zo.has(x.key.id)||(x.visible=!1);($=this._tileCache)==null||$.prune(g,s,o),lg.pool.release(p),F_.length=0,zc.length=0,Zo.clear()}clear(){const{tileIndex:e}=this;for(const i of e.values())this.releaseTile(i);e.clear()}refresh(e){var i;for(const n of this.tileIndex.values())this.tiles.includes(n)?e(n):zc.push(n);for(const n of zc)this.releaseTile(n),this.tileIndex.delete(n.key.id);(i=this._tileCache)==null||i.clear()}updateCacheSize(e){this._tileCache&&(this._tileCache.maxSize=e)}_addParentTile(e,i){var s;let n=e,r=null;for(;n=this.tileInfoView.getTileParentId(n),n;)if(this.tileIndex.has(n)){if(r=this.tileIndex.get(n),r==null?void 0:r.isReady){i.has(r.key.id)||i.set(r.key.id,r);break}}else if((s=this._tileCache)!=null&&s.has(n)&&(r=this._tileCache.pop(n),this.tileIndex.set(n,r),r==null?void 0:r.isReady)){i.has(r.key.id)||i.set(r.key.id,r);break}}_hasReadyAncestor(e,i){const n=tn();this.tileInfoView.getTileBounds(n,e,!0);for(const r of this.tileIndex.values())if(r.isReady&&r.key.level>=i&&r.key.level<e.level){const s=tn();if(this.tileInfoView.getTileBounds(s,r.key,!0),Pq(s,n))return!0}return!1}};function GF(){const t=new Float32Array(6);return t[0]=1,t[3]=1,t}function Gre(t){const e=new Float32Array(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Ure(t,e,i,n,r,s){const o=new Float32Array(6);return o[0]=t,o[1]=e,o[2]=i,o[3]=n,o[4]=r,o[5]=s,o}function Hre(t,e){return new Float32Array(t,e,6)}function UF(t,e,i,n){const r=e[n],s=e[n+1];t[n]=i[0]*r+i[2]*s+i[4],t[n+1]=i[1]*r+i[3]*s+i[5]}function Vre(t,e,i,n=0,r=0,s=2){const o=r||e.length/s;for(let a=n;a<o;a++)UF(t,e,i,a*s)}Object.freeze(Object.defineProperty({__proto__:null,clone:Gre,create:GF,createView:Hre,fromValues:Ure,transform:UF,transformMany:Vre},Symbol.toStringTag,{value:"Module"}));function Bre(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function qre(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function HF(t,e,i,n,r,s,o,a,l,u){return t[0]=e,t[1]=i,t[2]=n,t[3]=r,t[4]=s,t[5]=o,t[6]=a,t[7]=l,t[8]=u,t}function VF(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Wre(t,e){if(t===e){const i=e[1],n=e[2],r=e[5];t[1]=e[3],t[2]=e[6],t[3]=i,t[5]=e[7],t[6]=n,t[7]=r}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function Zre(t,e){const i=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],p=e[8],f=p*o-a*u,m=-p*s+a*l,g=u*s-o*l;let y=i*f+n*m+r*g;return y?(y=1/y,t[0]=f*y,t[1]=(-p*n+r*u)*y,t[2]=(a*n-r*o)*y,t[3]=m*y,t[4]=(p*i-r*l)*y,t[5]=(-a*i+r*s)*y,t[6]=g*y,t[7]=(-u*i+n*l)*y,t[8]=(o*i-n*s)*y,t):null}function Kre(t,e){const i=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],p=e[8];return t[0]=o*p-a*u,t[1]=r*u-n*p,t[2]=n*a-r*o,t[3]=a*l-s*p,t[4]=i*p-r*l,t[5]=r*s-i*a,t[6]=s*u-o*l,t[7]=n*l-i*u,t[8]=i*o-n*s,t}function Jre(t){const e=t[0],i=t[1],n=t[2],r=t[3],s=t[4],o=t[5],a=t[6],l=t[7],u=t[8];return e*(u*s-o*l)+i*(-u*r+o*a)+n*(l*r-s*a)}function dk(t,e,i){const n=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],u=e[6],p=e[7],f=e[8],m=i[0],g=i[1],y=i[2],v=i[3],b=i[4],_=i[5],$=i[6],x=i[7],E=i[8];return t[0]=m*n+g*o+y*u,t[1]=m*r+g*a+y*p,t[2]=m*s+g*l+y*f,t[3]=v*n+b*o+_*u,t[4]=v*r+b*a+_*p,t[5]=v*s+b*l+_*f,t[6]=$*n+x*o+E*u,t[7]=$*r+x*a+E*p,t[8]=$*s+x*l+E*f,t}function l2(t,e,i){const n=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],u=e[6],p=e[7],f=e[8],m=i[0],g=i[1];return t[0]=n,t[1]=r,t[2]=s,t[3]=o,t[4]=a,t[5]=l,t[6]=m*n+g*o+u,t[7]=m*r+g*a+p,t[8]=m*s+g*l+f,t}function BF(t,e,i){const n=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],u=e[6],p=e[7],f=e[8],m=Math.sin(i),g=Math.cos(i);return t[0]=g*n+m*o,t[1]=g*r+m*a,t[2]=g*s+m*l,t[3]=g*o-m*n,t[4]=g*a-m*r,t[5]=g*l-m*s,t[6]=u,t[7]=p,t[8]=f,t}function Yre(t,e,i){const n=i[0],r=i[1],s=i[2];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=r*e[3],t[4]=r*e[4],t[5]=r*e[5],t[6]=s*e[6],t[7]=s*e[7],t[8]=s*e[8],t}function Xre(t,e,i){const n=i[0],r=i[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=r*e[3],t[4]=r*e[4],t[5]=r*e[5],t}function Qre(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function ese(t,e){const i=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=i,t[2]=0,t[3]=-i,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function tse(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function ise(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function nse(t,e){const i=e[0],n=e[1],r=e[2],s=e[3],o=i+i,a=n+n,l=r+r,u=i*o,p=n*o,f=n*a,m=r*o,g=r*a,y=r*l,v=s*o,b=s*a,_=s*l;return t[0]=1-f-y,t[3]=p-_,t[6]=m+b,t[1]=p+_,t[4]=1-u-y,t[7]=g-v,t[2]=m-b,t[5]=g+v,t[8]=1-u-f,t}function rse(t,e){const i=e[0],n=e[1],r=e[2],s=e[4],o=e[5],a=e[6],l=e[8],u=e[9],p=e[10],f=p*o-a*u,m=-p*s+a*l,g=u*s-o*l,y=i*f+n*m+r*g;if(!y)return null;const v=1/y;return t[0]=f*v,t[1]=(-p*n+r*u)*v,t[2]=(a*n-r*o)*v,t[3]=m*v,t[4]=(p*i-r*l)*v,t[5]=(-a*i+r*s)*v,t[6]=g*v,t[7]=(-u*i+n*l)*v,t[8]=(o*i-n*s)*v,t}function sse(t,e){const i=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],p=e[8],f=e[9],m=e[10],g=e[11],y=e[12],v=e[13],b=e[14],_=e[15],$=i*a-n*o,x=i*l-r*o,E=i*u-s*o,C=n*l-r*a,M=n*u-s*a,N=r*u-s*l,G=p*v-f*y,U=p*b-m*y,B=p*_-g*y,H=f*b-m*v,L=f*_-g*v,R=m*_-g*b;let D=$*R-x*L+E*H+C*B-M*U+N*G;return D?(D=1/D,t[0]=(a*R-l*L+u*H)*D,t[1]=(l*B-o*R-u*U)*D,t[2]=(o*L-a*B+u*G)*D,t[3]=(r*L-n*R-s*H)*D,t[4]=(i*R-r*B+s*U)*D,t[5]=(n*B-i*L-s*G)*D,t[6]=(v*N-b*M+_*C)*D,t[7]=(b*E-y*N-_*x)*D,t[8]=(y*M-v*E+_*$)*D,t):null}function ose(t,e,i){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function ase(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function lse(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2)}function cse(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t}function qF(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t}function use(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t}function dse(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t[3]=e[3]+i[3]*n,t[4]=e[4]+i[4]*n,t[5]=e[5]+i[5]*n,t[6]=e[6]+i[6]*n,t[7]=e[7]+i[7]*n,t[8]=e[8]+i[8]*n,t}function hse(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function pse(t,e){const i=t[0],n=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=t[6],u=t[7],p=t[8],f=e[0],m=e[1],g=e[2],y=e[3],v=e[4],b=e[5],_=e[6],$=e[7],x=e[8],E=Vi();return Math.abs(i-f)<=E*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(n-m)<=E*Math.max(1,Math.abs(n),Math.abs(m))&&Math.abs(r-g)<=E*Math.max(1,Math.abs(r),Math.abs(g))&&Math.abs(s-y)<=E*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(o-v)<=E*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(a-b)<=E*Math.max(1,Math.abs(a),Math.abs(b))&&Math.abs(l-_)<=E*Math.max(1,Math.abs(l),Math.abs(_))&&Math.abs(u-$)<=E*Math.max(1,Math.abs(u),Math.abs($))&&Math.abs(p-x)<=E*Math.max(1,Math.abs(p),Math.abs(x))}function fse(t){const e=Vi(),i=t[0],n=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=t[6],u=t[7],p=t[8];return Math.abs(1-(i*i+s*s+l*l))<=e&&Math.abs(1-(n*n+o*o+u*u))<=e&&Math.abs(1-(r*r+a*a+p*p))<=e}const mse=dk,gse=qF;Object.freeze(Object.defineProperty({__proto__:null,add:cse,adjoint:Kre,copy:qre,determinant:Jre,equals:pse,exactEquals:hse,frob:lse,fromMat2d:ise,fromMat4:Bre,fromQuat:nse,fromRotation:ese,fromScaling:tse,fromTranslation:Qre,identity:VF,invert:Zre,isOrthoNormal:fse,mul:mse,multiply:dk,multiplyScalar:use,multiplyScalarAndAdd:dse,normalFromMat4:sse,normalFromMat4Legacy:rse,projection:ose,rotate:BF,scale:Yre,scaleByVec2:Xre,set:HF,str:ase,sub:gse,subtract:qF,translate:l2,transpose:Wre},Symbol.toStringTag,{value:"Module"}));function mv(){const t=new Float32Array(9);return t[0]=1,t[4]=1,t[8]=1,t}function yse(t){const e=new Float32Array(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function vse(t,e,i,n,r,s,o,a,l){const u=new Float32Array(9);return u[0]=t,u[1]=e,u[2]=i,u[3]=n,u[4]=r,u[5]=s,u[6]=o,u[7]=a,u[8]=l,u}function bse(t,e){return new Float32Array(t,e,9)}Object.freeze(Object.defineProperty({__proto__:null,clone:yse,create:mv,createView:bse,fromValues:vse},Symbol.toStringTag,{value:"Module"}));function WF(){return new Float32Array(2)}function wse(t){const e=new Float32Array(2);return e[0]=t[0],e[1]=t[1],e}function yp(t,e){const i=new Float32Array(2);return i[0]=t,i[1]=e,i}function _se(t,e){return new Float32Array(t,e,2)}function ZF(){return WF()}function KF(){return yp(1,1)}function JF(){return yp(1,0)}function YF(){return yp(0,1)}const Sse=ZF(),$se=KF(),xse=JF(),Tse=YF();Object.freeze(Object.defineProperty({__proto__:null,ONES:$se,UNIT_X:xse,UNIT_Y:Tse,ZEROS:Sse,clone:wse,create:WF,createView:_se,fromValues:yp,ones:KF,unitX:JF,unitY:YF,zeros:ZF},Symbol.toStringTag,{value:"Module"}));function Ese(t){return t instanceof Float32Array&&t.length>=2}function kse(t){return Array.isArray(t)&&t.length>=2}function Yy(t){return Ese(t)||kse(t)}var c2;const Ei=[0,0];let Il=c2=class extends ie{constructor(t){super(t),this._viewpoint2D={center:Ce(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new Ve,this.id=0,this.inverseTransform=sc(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=sc(),this.transformNoRotation=sc(),this.displayMat3=mv(),this.displayViewMat3=mv(),this.viewMat3=mv(),this.viewMat2d=GF(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(t){this._set("pixelRatio",t),this._update()}set size(t){this._set("size",t),this._update()}set viewpoint(t){if(t){const e=this._viewpoint2D,i=t.targetGeometry;e.center[0]=i.x,e.center[1]=i.y,e.rotation=t.rotation,e.scale=t.scale,e.spatialReference=i.spatialReference}this._update()}copy(t){const e=this.size,i=this.viewpoint;return i&&e?(this.viewpoint=Ls(i,t.viewpoint),this._set("size",ag(e,t.size))):(this.viewpoint=t.viewpoint.clone(),this._set("size",[t.size[0],t.size[1]])),this._set("pixelRatio",t.pixelRatio),this}clone(){return new c2({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(t,e,i){return Yy(e)?fs(t,e,this.inverseTransform):(Ei[0]=e,Ei[1]=i,fs(t,Ei,this.inverseTransform))}toScreen(t,e,i){return Yy(e)?fs(t,e,this.transform):(Ei[0]=e,Ei[1]=i,fs(t,Ei,this.transform))}toScreenNoRotation(t,e,i){return Yy(e)?fs(t,e,this.transformNoRotation):(Ei[0]=e,Ei[1]=i,fs(t,Ei,this.transformNoRotation))}toScreenClosest(t,e,i){Yy(e)?(Ei[0]=e[0],Ei[1]=e[1]):(Ei[0]=e,Ei[1]=i);const[n]=Ei,{center:r,extent:s,spatialReference:o,transform:a}=this;return(n<s.xmin||n>s.xmax)&&(Ei[0]=kF(n,r[0],o)),fs(t,Ei,a)}getScreenTransform(t,e){const{center:i}=this._viewpoint2D,n=this._get("pixelRatio")||1,r=this._get("size");return ck(t,i,r,e,0,n),t}_update(){const{center:t,spatialReference:e,scale:i,rotation:n}=this._viewpoint2D,r=this._get("pixelRatio")||1,s=this._get("size"),o=new xo({targetGeometry:new he(t[0],t[1],e),scale:i,rotation:n});if(this._set("viewpoint",o),!s||!e||!i)return;this.resolution=Fp(o),this.rotation=n,this.scale=i,this.spatialReference=e,ag(this.center,t);const a=s[0]!==0?2/s[0]:0,l=s[1]!==0?-2/s[1]:0;HF(this.displayMat3,a,0,0,0,l,0,-1,1,1);const u=VF(this.viewMat3),p=yp(s[0]/2,s[1]/2),f=yp(-s[0]/2,-s[1]/2),m=KT(n);l2(u,u,p),BF(u,u,m),l2(u,u,f),dk(this.displayViewMat3,this.displayMat3,u);const g=rk(this.viewMat2d,p);return uw(g,g,m),og(g,g,f),dre(this.extent,o,s),uk(this.transform,o,s,r),ik(this.inverseTransform,this.transform),vre(this.transformNoRotation,o,s,r),this.worldScreenWidth=wre(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};c([d({readOnly:!0})],Il.prototype,"id",void 0),c([d({value:1,json:{write:!0}})],Il.prototype,"pixelRatio",null),c([d({json:{write:!0}})],Il.prototype,"size",null),c([d()],Il.prototype,"spatialReference",void 0),c([d({type:xo,json:{write:!0}})],Il.prototype,"viewpoint",null),Il=c2=c([S("esri.views.2d.ViewState")],Il);const TO=Il;var u2,d2;let Ma=u2=class extends X{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new u2({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};c([d()],Ma.prototype,"left",void 0),c([d()],Ma.prototype,"top",void 0),c([d()],Ma.prototype,"right",void 0),c([d()],Ma.prototype,"bottom",void 0),Ma=u2=c([S("esri.views.2d.PaddedViewState.Padding")],Ma);let ch=d2=class extends TO{constructor(...t){super(...t),this.paddedViewState=new TO,this._updateContent=(()=>{const e=Ce();return()=>{const i=this._get("size"),n=this._get("padding");if(!i||!n)return;const r=this.paddedViewState;ei(e,n.left+n.right,n.top+n.bottom),Lt(e,i,e),ag(r.size,e);const s=r.viewpoint;s&&(this.viewpoint=s)}})(),this.addHandles(Z(()=>[this.size,this.padding],()=>this._updateContent(),hc)),this.padding=new Ma,this.size=[0,0]}set padding(t){this._set("padding",t||new Ma)}set viewpoint(t){if(t){const e=t.clone();this.paddedViewState.viewpoint=t,Sre(e,t,this._get("size"),this._get("padding"));const i=this._viewpoint2D,n=e.targetGeometry;i.center[0]=n.x,i.center[1]=n.y,i.rotation=e.rotation,i.scale=e.scale,i.spatialReference=n.spatialReference,this._update()}}clone(){return new d2({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};c([d()],ch.prototype,"paddedViewState",void 0),c([d({type:Ma})],ch.prototype,"padding",null),c([d()],ch.prototype,"viewpoint",null),ch=d2=c([S("esri.views.2d.PaddedViewState")],ch);const Mse=ch;let Wi=class extends X{constructor(e){super(e),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([Z(()=>{var i;return(i=this.constraints)==null?void 0:i.version},i=>{this.constraints&&i&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},hc)])}get center(){if(!this.ready)return this._get("center");const{center:e,spatialReference:i}=this.state.paddedViewState;return this.state.commitProperty("id"),new he({x:e[0],y:e[1],spatialReference:i})}set center(e){if(e==null)return;if(!this.ready)return void this._set("center",e);let i;try{i=this._project(e,this.state.spatialReference)}catch(r){return void J.getLogger(this).error(new F("mapview:invalid-center","could not project the value in the view's spatial reference",{input:e,error:r}))}const n=this.viewpoint;r2(n,n,i),this.viewpoint=n}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(e){if(e==null)return;if(!e.width||!e.height)return void J.getLogger(this).error(new F("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",e),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let i;try{i=this._project(e,this.state.spatialReference)}catch(r){return void J.getLogger(this).error(new F("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:r}))}const n=this.viewpoint;hre(n,n,i,this.state.size,{constraints:this.constraints}),this.viewpoint=n}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);const i=this.viewpoint;xre(i,i,e),this.viewpoint=i}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",void 0);const n=this._get("extent");return void(n&&(this._set("extent",void 0),this._set("center",n.center)))}const i=this.viewpoint;wO(i,i,e),this.viewpoint=i}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(e){var s;if(e==null)return;if(!this.ready)return this._set("viewpoint",e),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let i,n;try{i=this._project(e,this.state.spatialReference),!e.scale||isNaN(e.scale)?n=new F("mapview:invalid-viewpoint",`invalid scale value of ${e.scale}`):e.targetGeometry==null&&(n=new F("mapview:invalid-viewpoint","geometry not defined"))}catch(o){n=new F("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:o})}if(n)return void J.getLogger(this).error(n);this._scaleBeforeChangingSpatialReference=null;const r=new xo({targetGeometry:new he,scale:0,rotation:0});Ls(r,i),(s=this.constraints)==null||s.constrain(r,this.state.paddedViewState.viewpoint),this.state.viewpoint=r,this._set("viewpoint",r)}get zoom(){var e;return this.ready?((e=this.constraints)==null?void 0:e.scaleToZoom(this.scale))??-1:this._get("zoom")}set zoom(e){var r,s;if(!(e>=0))return;if(!this.ready){this._set("zoom",e),this._set("scale",void 0);const o=this._get("extent");return void(o&&(this._set("extent",void 0),this._set("center",o.center)))}const i=((r=this.constraints)==null?void 0:r.zoomToScale(e))??0;if(!i)return void this._set("zoom",-1);const n=this.viewpoint;wO(n,n,i),this.viewpoint=n,this._set("zoom",((s=this.constraints)==null?void 0:s.scaleToZoom(this.scale))??-1)}getUserStartupOptions(e){if(!e[0]&&!e[1])return{center:void 0,rotation:void 0,scale:void 0};const{padding:i,constraints:n}=this,r=this._get("center"),s=this._get("extent"),o=this._get("scale"),a=this._get("rotation"),l=this._get("viewpoint"),u=this._get("zoom"),p=u!=null&&n!=null&&n.zoomToScale(u)||void 0;let f,m,g;const y=l==null?void 0:l.rotation,v=l==null?void 0:l.targetGeometry;(v==null?void 0:v.type)==="extent"?f=v:(v==null?void 0:v.type)==="point"&&(m=v,g=l==null?void 0:l.scale);const b=s??f;return{center:r??m??(b==null?void 0:b.center),rotation:a??y,scale:(o??p??g??(b&&qh(b,[e[0]-i.left-i.right,e[1]-i.top-i.bottom])))||void 0}}startup(e,i,n,r){var o;const s=e.targetGeometry;try{this._project(e,n)}catch(a){J.getLogger(this).warn(new Ga("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:s.toJSON(),spatialReference:n,error:a})),e.targetGeometry=r||new he({x:0,y:0,spatialReference:n})}(o=this.constraints)==null||o.fit(e),this._set("state",new Mse({padding:this.padding,size:i,viewpoint:e})),this._set("ready",!0)}teardown(){this._set("ready",!1);const{center:[e,i],spatialReference:n,rotation:r,scale:s}=this.state.paddedViewState,o=new he({x:e,y:i,spatialReference:n});this._set("viewpoint",null),this._set("extent",null),this._set("center",o),this._set("zoom",-1),this._set("rotation",r),this._set("scale",s),this._set("state",null)}changeSpatialReference(e){var l;const i=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=i.scale;else{const u=i.viewpoint.clone();u.scale=this._scaleBeforeChangingSpatialReference,i.viewpoint=u}const n=i.clone(),[r,s]=i.center;let o=null;try{o=this._project(new he({x:r,y:s,spatialReference:i.spatialReference}),e)}catch(u){jT()||J.getLogger(this).warn(new Ga("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:o==null?void 0:o.toJSON(),spatialReference:e,error:u}))}o||(o=new he({x:0,y:0,spatialReference:e}));const a=r2(new xo({targetGeometry:new he,scale:0,rotation:0}),i.viewpoint,o);n.viewpoint=a;try{const p=[i.size[0]/2,i.size[1]/2],f=[p[0]+20,p[1]],m=i.toMap([0,0],f),{x:g,y}=this._project(new he({x:m[0],y:m[1],spatialReference:i.spatialReference}),e);m[0]=g,m[1]=y,n.toScreen(m,m);const v=_re(p,m,f),b=Math.hypot(m[0]-p[0],m[1]-p[1])/20;!Number.isFinite(b)||Math.abs(b)>4?(a.rotation=0,a.targetGeometry=new he({x:0,y:0,spatialReference:e})):(a.scale*=b,a.scale>z("mapview-srswitch-adjust-rotation-scale-threshold")?a.rotation=0:a.rotation+=Number.isFinite(v)?v:0)}catch{}(l=this._get("constraints"))==null||l.constrain(a,void 0),this._get("state").viewpoint=a}resize(e,i){var o;if(!this.ready)return;const n=this.state;let r=this.state.paddedViewState.viewpoint;const s=this.state.paddedViewState.size.concat();n.size=[e,i],$re(r,r,s,this.state.paddedViewState.size,this.resizeAlign),r=((o=this.constraints)==null?void 0:o.constrain(r,void 0))??r,this.state.viewpoint=r}toMap(e){if(!this.ready)return null;const i=[0,0],[n,r]=this.state.toMap(i,[e.x,e.y]),s=this.state.spatialReference;return new he({x:n,y:r,spatialReference:s})}toScreen(e,i){if(!this.ready)return null;const n=this._project(e,this.state.spatialReference),r=[n.x,n.y];return(i==null?void 0:i.pickClosestTarget)===!1?this.state.toScreen(r,r):this.state.toScreenClosest(r,r),ji(r[0],r[1])}_project(e,i){var s;const n=(e==null?void 0:e.targetGeometry)||e;if(!i)return e;if(!n)return null;if(i.imageCoordinateSystem||(s=n.spatialReference)!=null&&s.imageCoordinateSystem||xt(i,n.spatialReference))return e;const r=Oo(n,i);if(!r)throw new F("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:n,spatialReference:i});return Cse(e)?(e.targetGeometry=r,e):r}};function Cse(t){return(t==null?void 0:t.declaredClass)==="esri.Viewpoint"}c([d({type:he})],Wi.prototype,"center",null),c([d()],Wi.prototype,"constraints",void 0),c([d({type:Ve})],Wi.prototype,"extent",null),c([d({value:{top:0,right:0,bottom:0,left:0},cast:t=>({top:0,right:0,bottom:0,left:0,...t})})],Wi.prototype,"padding",null),c([d()],Wi.prototype,"ready",void 0),c([d()],Wi.prototype,"resizeAlign",void 0),c([d({readOnly:!0})],Wi.prototype,"resolution",null),c([d({type:Number})],Wi.prototype,"rotation",null),c([d({type:Number})],Wi.prototype,"scale",null),c([d({readOnly:!0})],Wi.prototype,"state",void 0),c([d({type:xo})],Wi.prototype,"viewpoint",null),c([d()],Wi.prototype,"zoom",null),Wi=c([S("esri.views.2d.ViewStateManager")],Wi);function hk(t,e){switch(e){case"primary":return t.pointerType==="touch"||t.button===0;case"secondary":return t.pointerType!=="touch"&&t.button===2;case"tertiary":return t.pointerType!=="touch"&&t.button===1}}let EO=class extends ni{constructor(e,i){super(!0),this._view=e,this.registerIncoming("double-click",i,n=>this._handleDoubleClick(n,i))}_handleDoubleClick(e,i){hk(e.data,"primary")&&(e.stopPropagation(),i?this._view.mapViewNavigation.zoomOut([e.data.x,e.data.y]):this._view.mapViewNavigation.zoomIn([e.data.x,e.data.y]))}},Ise=class extends ni{constructor(e,i,n){super(!0),this.view=e,this.pointerType=i,this.registerIncoming("double-tap-drag",n,r=>this._handleDoubleTapDrag(r))}_handleDoubleTapDrag(e){const{data:i}=e,{pointerType:n}=i;if(n!==this.pointerType)return;e.stopPropagation();const{action:r,delta:s}=i,{view:o}=this,{mapViewNavigation:a}=o;switch(r){case"begin":{const{scale:l}=o;this._startScale=l,this._currentScale=l,this._previousDelta=s,a.begin();break}case"update":{if(this._previousDelta.y===s.y)return;this._previousDelta=s;const l=1.015**s.y,u=this._startScale*l,p=u/this._currentScale;a.setViewpointImmediate(p),this._currentScale=u;break}case"end":{const{constraints:l}=o,{effectiveLODs:u,snapToZoom:p}=l;if(!p||!u)return void a.end();const f=l.snapScale(this._currentScale),m=(s.y>0?Math.max(f,l.snapToPreviousScale(this._startScale)):Math.min(f,l.snapToNextScale(this._startScale)))/this._currentScale;a.zoom(m);break}}}},mw=class{constructor(e){this._callbacks=e,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(e){const i=e.data,n=i.pointers.size;switch(i.action){case"start":this._currentCount=n,this._emitStart(e);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=n,this._emitStart(e);break;case"update":this._emitUpdate(e);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=n,this._emitStart(e);break;case"end":this._emitEnd(e),this._currentCount=0}this._previousEvent=e}_emitStart(e){var i,n;this._startEvent=e,(n=(i=this._callbacks).condition)!=null&&n.call(i,this._currentCount,e)&&this._callbacks.start(this._currentCount,e,this._startEvent)}_emitUpdate(e){var i,n;(n=(i=this._callbacks).condition)!=null&&n.call(i,this._currentCount,e)&&this._callbacks.update(this._currentCount,e,this._startEvent)}_emitEnd(e){var i,n;(n=(i=this._callbacks).condition)!=null&&n.call(i,this._currentCount,e)&&this._callbacks.end(this._currentCount,e,this._startEvent),this._startEvent=null}},Ose=class extends ni{constructor(e,i,n){super(!0),this.view=e,this.pointerAction=i,this.registerIncoming("drag",n,r=>this._handleDrag(r)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(e){super.onInstall(e),this._dragEventSeparator=new mw({start:(i,n)=>{this.view.mapViewNavigation.pan.begin(this.view,n.data),n.stopPropagation()},update:(i,n)=>{this.view.mapViewNavigation.pan.update(this.view,n.data),n.stopPropagation()},end:(i,n)=>{this.view.mapViewNavigation.pan.end(this.view,n.data),n.stopPropagation()},condition:(i,n)=>i===1&&hk(n.data,this.pointerAction)})}_handleDrag(e){const i=this.view.mapViewNavigation;i.pinch.zoomMomentum||i.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(e)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},Ase=class extends ni{constructor(e,i,n){super(!0),this._view=e,this.pointerAction=i;const r=this._view.mapViewNavigation;this._dragEventSeparator=new mw({start:(s,o)=>{r.rotate.begin(this._view,o.data),o.stopPropagation()},update:(s,o)=>{r.rotate.update(this._view,o.data),o.stopPropagation()},end:(s,o)=>{r.rotate.end(),o.stopPropagation()},condition:(s,o)=>s===1&&hk(o.data,this.pointerAction)}),this.registerIncoming("drag",n,s=>this._dragEventSeparator.handle(s))}};function Wr(t){let e=t*t;return t<0&&(e*=-1),e}function Lse(t){return t.translation[0]=0,t.translation[1]=0,t.translation[2]=0,t.heading=0,t.tilt=0,t}function Pse(t,e,i){const n=i,r=t.state,s=t.device,o=e.tiltDirection==="forward-down"?1:-1,a=1;return s.deviceType==="standard"?(n.translation[0]=Wr(r.axes[0]),n.translation[1]=Wr(r.axes[1]),n.translation[2]=Wr(r.buttons[7])-Wr(r.buttons[6]),n.heading=Wr(r.axes[2]),n.tilt=Wr(r.axes[3])):s.deviceType==="spacemouse"&&(n.translation[0]=1.2*Wr(r.axes[0]),n.translation[1]=1.2*Wr(r.axes[1]),n.translation[2]=2*-Wr(r.axes[2]),n.heading=1.2*Wr(r.axes[5]),n.tilt=1.2*Wr(r.axes[3])),n.tilt*=o,Dr(n.translation,n.translation,a),n}function Rse(t){return t.translation[0]===0&&t.translation[1]===0&&t.translation[2]===0&&t.heading===0&&t.tilt===0&&t.zoom===0}let Nse=class extends ni{constructor(e){super(!0),this._view=e,this._frameTask=null,this._watchHandles=new v1,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",i=>this._handleGamePadEvent(i)),this._handle.pause()}onInstall(e){super.onInstall(e),this._watchHandles.add([Z(()=>{var i;return(i=this._view.navigation.gamepad)==null?void 0:i.enabled},i=>{i?(this._handle.resume(),this._frameTask||(this._frameTask=ip({update:n=>this._frameUpdate(n.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},De)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(e){const i=this._view.navigation.gamepad.device;i&&e.data.device!==i||this._currentDevice&&this._currentDevice!==e.data.device||(e.data.action==="end"?(this._currentDevice=null,Lse(this._transformation)):(this._currentDevice=e.data.device,Pse(e.data,this._view.navigation.gamepad,this._transformation)))}_frameUpdate(e){const i=this._transformation;if(Rse(i))return;const n=this._view.viewpoint.clone(),r=this._view.navigation.gamepad.velocityFactor,s=Fse*r*e;fw(n,n,[i.translation[0]*s,-i.translation[1]*s]);const o=1+i.translation[2]*zse*e,a=this._view.constraints.rotationEnabled?-i.heading*Dse*e:0,l=this._view.size,u=[l[0]/2,l[1]];LF(n,n,o,a,u,l);const p=this._view.constraints.constrain(n,this._view.viewpoint);this._view.viewpoint=p}};const Dse=.06,Fse=.7,zse=6e-4;function XF(t){const e=()=>t(document.visibilityState==="visible");return document.addEventListener("visibilitychange",e),{remove:()=>document.addEventListener("visibilitychange",e)}}let jse=class extends ni{constructor(e,i,n){super(!0),this.view=e,this.keys=i,this._isSticky=!1,this._pressedKeys=new Set,this._timeout=void 0,this._currentDirection=void 0,this._stickyKeyDuration=200,this._handleKey=r=>{const s=this._keyMap[r.data.key];if(r.modifiers.has("Meta")||r.modifiers.has("Ctrl"))return void this._stopMovement();if(s==null)return;r.stopPropagation(),r.preventDefault();const o=r.type==="key-down";if(this._pressedKeys[o?"add":"delete"](s),o){if(this._direction===s)return;this._direction=s,this._isSticky=!1,this._setTimeout(()=>{this._isSticky&&this._handlePopKey()})}else{const a=this._timeout===void 0,l=this._pressedKeys.size>0;a||l?this._handlePopKey():this._isSticky=!0}},this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop(),this._direction==null&&this._stopMovement()},this._stopMovement=()=>{this._isSticky=!1,this._direction=void 0,this._pressedKeys.clear(),this._setTimeout(void 0)},this._keyMap={[i.left]:"left",[i.right]:"right",[i.up]:"up",[i.down]:"down"},this.registerIncoming("key-down",n,this._handleKey),this.registerIncoming("key-up",n,this._handleKey),this.registerIncoming("blur",n,this._stopMovement),this._visibilityHandle=XF(r=>r?null:this._stopMovement())}onUninstall(){var e;this._stopMovement(),(e=this._visibilityHandle)==null||e.remove()}get _direction(){return this._currentDirection}set _direction(e){const i=this._currentDirection!=null;if(e!=null){if(i||this.view.mapViewNavigation.begin(),this._currentDirection!==e)switch(e){case"left":this.view.mapViewNavigation.continousPanLeft();break;case"right":this.view.mapViewNavigation.continousPanRight();break;case"up":this.view.mapViewNavigation.continousPanUp();break;case"down":this.view.mapViewNavigation.continousPanDown()}}else i&&this.view.mapViewNavigation.stop();this._currentDirection=e}_setTimeout(e){clearTimeout(this._timeout),this._timeout=e===void 0?void 0:setTimeout(()=>{this._timeout=void 0,e()},this._stickyKeyDuration)}},Gse=class extends ni{constructor(e,i,n){super(!0),this.view=e,this.keys=i,this._pressed=!1,this._keyToDirection={[i.clockwiseOption1]:"clockwise",[i.clockwiseOption2]:"clockwise",[i.counterClockwiseOption1]:"counterClockwise",[i.counterClockwiseOption2]:"counterClockwise",[i.resetOption1]:"reset",[i.resetOption2]:"reset"},this.registerIncoming("key-down",n,r=>this._handleKeyDown(r)),this.registerIncoming("key-up",n,r=>this._handleKeyUp(r)),this.registerIncoming("blur",n,()=>this._handleStop()),this._visibilityHandle=XF(r=>r?null:this._handleStop())}onUninstall(){var e;(e=this._visibilityHandle)==null||e.remove(),this._handleStop()}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,i){const n=e.modifiers;if(n.size>0&&!n.has("Shift")||!this.view.constraints.rotationEnabled)return;const r=this._keyToDirection[e.data.key];if(this._pressed=r!=null,this._pressed){if(e.preventDefault(),i)switch(this.view.mapViewNavigation.begin(),r){case"clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}};var Rh;(function(t){t[t.IN=0]="IN",t[t.OUT=1]="OUT"})(Rh||(Rh={}));let Use=class extends ni{constructor(e,i,n){super(!0),this.view=e,this.keys=i,this._keysToZoomAction={},this.registerIncoming("key-down",n,r=>this._handleKeyDown(r)),i.zoomIn.forEach(r=>this._keysToZoomAction[r]=Rh.IN),i.zoomOut.forEach(r=>this._keysToZoomAction[r]=Rh.OUT)}_handleKeyDown(e){this._handleKey(e)}_handleKey(e){const i=e.modifiers;if(i.size>0&&!i.has("Shift"))return;const{key:n}=e.data;if(!(n in this._keysToZoomAction))return;const r=this._keysToZoomAction[n],{mapViewNavigation:s}=this.view;let o=null;switch(r){case Rh.IN:o=s.zoomIn();break;case Rh.OUT:o=s.zoomOut();break;default:return}s.begin(),o.then(()=>s.end()),e.stopPropagation()}};const Hse=.6;let Vse=class extends ni{constructor(e,i){super(!0),this._view=e,this._canZoom=!0,this.registerIncoming("mouse-wheel",i,n=>this._handleMouseWheel(n))}_handleMouseWheel(e){if(!this._view.navigation.mouseWheelZoomEnabled||(e.preventDefault(),e.stopPropagation(),!this._canZoom))return;const i=this._view.mapViewNavigation,{x:n,y:r,deltaY:s}=e.data,o=1/Hse**(1/60*s),a=i.zoom(o,[n,r]);a&&(this._canZoom=!1,a.catch(()=>{}).then(()=>{this._canZoom=!0,i.end()}))}},Bse=class extends ni{constructor(e){super(!0),this.view=e,this.registerIncoming("drag",n=>this._handleDrag(n)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const i=this.view.mapViewNavigation;this._dragEventSeparator=new mw({start:(n,r)=>{i.pinch.begin(this.view,r.data),r.stopPropagation()},update:(n,r)=>{i.pinch.update(this.view,r.data),r.stopPropagation()},end:(n,r)=>{i.pinch.end(this.view),r.stopPropagation()},condition:n=>n>=2})}_handleDrag(e){this._dragEventSeparator.handle(e)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function kO(t){const e=t.native;return e?{buttons:e.buttons.map(i=>i.pressed?i.value||1:0),axes:e.axes.map(i=>Zse(i,t.axisThreshold))}:{buttons:[],axes:[]}}function qse(t,e){if(t.axes.length!==e.axes.length||t.buttons.length!==e.buttons.length)return!1;for(let i=0;i<t.axes.length;i++)if(t.axes[i]!==e.axes[i])return!1;for(let i=0;i<t.buttons.length;i++)if(t.buttons[i]!==e.buttons[i])return!1;return!0}function Wse(t){for(let e=0;e<t.axes.length;e++)if(t.axes[e]!==0)return!1;for(let e=0;e<t.buttons.length;e++)if(t.buttons[e]!==0)return!1;return!0}function Zse(t,e){const i=Math.abs(t);return i<e?0:Math.sign(t)*(i-e)/(1-e)}let Kse=class{constructor(e,i){this._element=e,this._input=i,this._hasEventListeners=!1,this._onConnectGamepad=s=>{this._connectGamepad(s.gamepad)},this._onDisconnectGamepad=s=>{const o=s.gamepad,a=o.index,l=this._inputDevices[a];l&&(this._emitGamepadEvent(o,kO(l),!1),this._inputDevices.splice(a,1),this._latestUpdate.splice(a,1),this._input.gamepad.devices.remove(l),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const n="getGamepads"in window.navigator,r=window.isSecureContext;this.supported=n&&r,this.supported&&(this._forEachGamepad(s=>this._connectGamepad(s)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(e){this._hasEventListeners!==e&&(this._hasEventListeners=e,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(e){this._callback=e}_connectGamepad(e){const i=new ek(e);i.deviceType!=="unknown"&&(this._inputDevices[e.index]=i,this._input.gamepad.devices.add(i)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=ip({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const e=document.hasFocus(),i=this._element.contains(document.activeElement),n=this._input.gamepad.enabledFocusMode==="document"&&!e||this._input.gamepad.enabledFocusMode==="view"&&!i;this._forEachGamepad(r=>{const s=this._inputDevices[r.index];if(!s)return;const o=this._latestUpdate[r.index],a=kO(s),l=n||Wse(a);o&&(o.timestamp===r.timestamp||!o.active&&l||qse(o.state,a))||this._emitGamepadEvent(r,a,!l)})}_forEachGamepad(e){const i=window.navigator.getGamepads();for(let n=0;n<i.length;n++){const r=i[n];this._validate(r)&&e(r)}}_emitGamepadEvent(e,i,n){const r=this._latestUpdate[e.index],s=r&&r.active;if(!s&&!n)return;const o=!s&&n?"start":s&&n?"update":"end";this._latestUpdate[e.index]={timestamp:e.timestamp,state:i,active:n},this._callback&&this._callback({device:this._inputDevices[e.index],state:i,action:o})}_validate(e){if(!e||!e.connected)return!1;for(let i=0;i<e.axes.length;i++)if(isNaN(e.axes[i]))return!1;return!0}};const MO=z("edge"),Jse=z("chrome"),Yse=z("ff"),Xse=z("safari"),CO="esri-view-surface",Ud={touchNone:`${CO}--touch-none`,touchPan:`${CO}--touch-pan`};let QF=class e6{constructor(e,i){this._input=i,this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=e,e.getAttribute("tabindex")||e.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new Kse(e,this._input),this._gamepadSource.onEvent=n=>this._callback("gamepad",n)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(e=>{this._releasePointerCaptureSafe(e)}),this._gamepadSource=Oe(this._gamepadSource),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(e){this._browserTouchPanningEnabled=e,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(e){this._callback=e}set activeEvents(e){for(const i in this._active)if(!e||!e.has(i)){const n=this._active[i];this._element.removeEventListener(z_[i],n),delete this._active[i]}e&&e.forEach(i=>{if(!this._active[i]&&z_[i]){const n=(this._eventHandlers[i]||this._handleDefault).bind(this,i);this._element.addEventListener(z_[i],n),this._active[i]=n}}),this._gamepadSource.hasEventListeners=(e==null?void 0:e.has("gamepad"))??!1}setPointerCapture(e,i){i?this._setPointerCatpureSafe(e.pointerId):(this._releasePointerCaptureSafe(e.pointerId),this._activePointerCaptures.delete(e.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?Ud.touchNone:Ud.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?Ud.touchPan:Ud.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(Ud.touchNone),this._element.classList.remove(Ud.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCatpureSafe(e){try{this._element.setPointerCapture(e),this._activePointerCaptures.add(e)}catch{}}_releasePointerCaptureSafe(e){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(e))return;this._element.releasePointerCapture(e)}catch{}}_updateNormalizedPointerLikeEvent(e,i){const n=Z4(this._element,e);return e6.test.disableSubpixelCoordinates&&(n.x=Math.round(n.x),n.y=Math.round(n.y)),i.x=n.x,i.y=n.y,i}_handleKey(e,i){const n=rX(i);n&&e==="key-up"&&this._keyDownState.delete(n);const r={native:i,key:n,repeat:!!n&&this._keyDownState.has(n)};n&&e==="key-down"&&this._keyDownState.add(r.key),this._callback(e,r)}_handlePointer(e,i){const n=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});this._callback(e,n)}_handlePointerPreventDefault(e,i){const n=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});i.preventDefault(),this._callback(e,n)}_handleMouseWheel(e,i){let n=i.deltaY;switch(i.deltaMode){case 0:MO&&(n=n/document.documentElement.clientHeight*600);break;case 1:n*=30;break;case 2:n*=900}MO?n*=.7:Jse||Xse?n*=.6:Yse&&(n*=1.375);const r=100,s=Math.abs(n);s>r&&(n=n/s*200/(1+Math.exp(-.02*(s-r))));const o=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,deltaY:n});this._callback(e,o)}_handlePointerCaptureLost(e,i){this._activePointerCaptures.delete(i.pointerId),this._handleDefault(e,i)}_handleDefault(e,i){const n={native:i};i.preventDefault(),this._callback(e,n)}_preventAltKeyDefault(e){e.key==="Alt"&&e.preventDefault()}_preventMultiTouchPanning(e){e.touches.length>1&&e.preventDefault()}};QF.test={disableSubpixelCoordinates:!1};const z_={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let Qse=class extends ni{constructor(){super(!0),this.registerIncoming("context-menu",e=>{e.data.native.preventDefault()})}};const $i={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500,maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};function Eb(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}function eoe(t,e){const i=e.x-t.x,n=e.y-t.y;return Math.sqrt(i*i+n*n)}function toe(t,e){if(e?(e.radius=0,e.center.x=0,e.center.y=0):e={radius:0,center:ji()},t.length===0)return e;if(t.length===1)return e.center.x=t[0].x,e.center.y=t[0].y,e;if(t.length===2){const[x,E]=t,[C,M]=[E.x-x.x,E.y-x.y];return e.radius=Math.sqrt(C*C+M*M)/2,e.center.x=(x.x+E.x)/2,e.center.y=(x.y+E.y)/2,e}let i=0,n=0;for(let x=0;x<t.length;x++)i+=t[x].x,n+=t[x].y;i/=t.length,n/=t.length;const r=t.map(x=>x.x-i),s=t.map(x=>x.y-n);let o=0,a=0,l=0,u=0,p=0,f=0,m=0;for(let x=0;x<r.length;x++){const E=r[x],C=s[x],M=E*E,N=C*C;o+=M,a+=N,l+=E*C,u+=M*E,p+=N*C,f+=E*N,m+=C*M}const g=.5*(u+f),y=.5*(p+m),v=o*a-l*l,b=(g*a-y*l)/v,_=(o*y-l*g)/v,$=ji(b+i,_+n);return{radius:Math.sqrt(b*b+_*_+(o+a)/t.length),center:$}}function Yu(t){const{native:e}=t,{pointerId:i,button:n,pointerType:r}=e;return r==="mouse"?`${i}:${n}`:`${r}`}let ioe=class extends ni{constructor(e=$i.maximumDoubleClickDelay,i=$i.maximumDoubleClickDistance,n=$i.maximumDoubleTouchDelay,r=$i.maximumDoubleTouchDistance,s=kp){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=n,this._maximumDoubleTouchDistance=r,this._clock=s,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=ji(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new mw({start:(o,a)=>this._dragStart(o,a),update:(o,a)=>this._dragUpdate(a),end:(o,a)=>this._dragEnd(a)}),this.registerIncoming("drag",o=>this._dragEventSeparator.handle(o)),this.registerIncoming("pointer-down",o=>this._handlePointerDown(o)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(e=>{e.doubleTapTimeout=Je(e.doubleTapTimeout)})}get hasPendingInputs(){return x1(this._pointerState,e=>e.doubleTapTimeout!=null)}_clearPointerDown(e){const i=this._pointerState.get(e);i&&(i.doubleTapTimeout=Je(i.doubleTapTimeout),this._pointerState.delete(e),this.refreshHasPendingInputs())}_createDoubleTapDragData(e,i,n){const{button:r,buttons:s,pointer:o,pointers:a,pointerType:l,timestamp:u}=n;return{action:e,delta:i,button:r,buttons:s,pointer:o,pointers:a,pointerType:l,timestamp:u}}_dragStart(e,i){if(!this._doubleTapDragReady||e!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:n,modifiers:r}=i,{center:s}=n;this._dragStartCenter=s;const o=this._createDoubleTapDragData("begin",ji(0,0),n);this._doubleTapDrag.emit(o,void 0,r),i.stopPropagation()}_dragUpdate(e){if(!this._doubleTapDragActive)return;const{data:i,modifiers:n}=e,{center:r}=i,s=ji(r.x-this._dragStartCenter.x,r.y-this._dragStartCenter.y),o=this._createDoubleTapDragData("update",s,i);this._doubleTapDrag.emit(o,void 0,n),e.stopPropagation()}_dragEnd(e){if(!this._doubleTapDragActive)return;const{data:i,modifiers:n}=e,{center:r}=i,s=ji(r.x-this._dragStartCenter.x,r.y-this._dragStartCenter.y),o=this._createDoubleTapDragData("end",s,i);this._doubleTapDrag.emit(o,void 0,n),this._doubleTapDragActive=!1,e.stopPropagation()}_handlePointerDown(e){const{data:i}=e,n=Yu(i),r=this._pointerState.get(n),{pointerType:s}=i.native;if(r){const o=s==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;this._clearPointerDown(n),Eb(r.event.data,i)>o?this._storePointerDown(e):this._doubleTapDragReady=!0}else this._storePointerDown(e)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(e){const{data:i}=e,{pointerType:n}=i.native,r=Yu(i),s=n==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._clearPointerDown(r),s);this._pointerState.set(r,{event:e,doubleTapTimeout:o}),this.refreshHasPendingInputs()}},noe=class extends ni{constructor(e){super(!1),this._navigationTouch=e,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(e,i,n,r){return{action:e,pointerType:this._pointerType,button:this._mouseButton,buttons:i.buttons,timestamp:r,pointers:roe(this._activePointerMap),pointer:i,angle:n.angle,radius:n.radius,center:n.center}}_addPointer(e){const i=e.native.pointerId,n=Xy(this._activePointerMap).angle,r={event:e,initialAngle:0,lastAngle:0};this._activePointerMap.set(i,r);const s=gv(r,t6(this._activePointerMap));r.initialAngle=s,r.lastAngle=s,this._updatePointerAngles(n)}_updatePointer(e){if(e&&e.x==null&&e.y==null)return;const i=e.native.pointerId,n=this._activePointerMap.get(i);n?n.event=e:this._addPointer(e)}_removePointer(e){const i=Xy(this._activePointerMap).angle;this._activePointerMap.delete(e),this._updatePointerAngles(i)}_updatePointerAngles(e){const i=Xy(this._activePointerMap);this._activePointerMap.forEach(n=>{n.initialAngle=gv(n,i)-e,n.lastAngle=gv(n,i)-e})}_emitEvent(e,i,n){const r=Xy(this._activePointerMap);this._drag.emit(this._createPayload(e,i,r,n),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(e){const i=e.data.native.pointerId,n=e.timestamp;this._activePointerMap.get(i)&&(this._activePointerMap.size===1?(this._updatePointer(e.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",e.data,n),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(i)):(this._removePointer(i),this._emitEvent("removed",e.data,e.timestamp)))}_handlePointerDrag(e){const i=e.data,n=i.currentEvent,r=e.timestamp;switch(i.action){case"start":case"update":this._isDragging?this._activePointerMap.has(n.native.pointerId)?(this._updatePointer(n),!this._isCurrentDragSuppressed&&this._emitEvent("update",n,r)):(this._addPointer(n),this._emitEvent("added",n,r),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(n),this._pointerType=e.data.startEvent.pointerType,this._mouseButton=e.data.startEvent.button,this._startStateModifiers=e.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",n,r))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function t6(t){const e=[];return t.forEach(i=>{e.push(ji(i.event.x,i.event.y))}),toe(e)}function Xy(t){const e=t6(t);let i=0;return t.forEach(n=>{let r=gv(n,e),s=r-n.lastAngle;for(;s>Math.PI;)s-=2*Math.PI;for(;s<-Math.PI;)s+=2*Math.PI;r=n.lastAngle+s,n.lastAngle=r;const o=r-n.initialAngle;i+=o}),i/=t.size||1,{angle:i,radius:e.radius,center:e.center}}function roe(t){const e=new Map;return t.forEach((i,n)=>e.set(n,i.event)),e}function gv(t,e){const i=t.event,n=i.x-e.center.x,r=i.y-e.center.y;return Math.atan2(r,n)}var IO;(function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right",t[t.Back=3]="Back",t[t.Forward=4]="Forward",t[t.Undefined=-1]="Undefined"})(IO||(IO={}));let soe=class extends ni{constructor(e=$i.maximumDoubleClickDelay,i=$i.maximumDoubleClickDistance,n=$i.maximumDoubleTouchDelay,r=$i.maximumDoubleTouchDistance,s=kp){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=n,this._maximumDoubleTouchDistance=r,this._clock=s,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(e=>{e.immediateDoubleClick&&e.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(e){const i=e.data,n=Yu(i);if(!this._pointerState.has(n)){const r={downButton:i.native.button,x:i.x,y:i.y,immediateDoubleClick:null};this._pointerState.set(n,r),this.startCapturingPointer(i.native)}}_handlePointerUp(e){const i=e.data,n=Yu(i),r=this._pointerState.get(n);if(r&&r.downButton===i.native.button){const s=r.immediateDoubleClick,o=e.data.native.pointerType==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;s?(s.timeoutHandle.remove(),Eb(s,e.data)>o?this._startImmediateDoubleClick(e,r):(this._immediateDoubleClick.emit(e.data,void 0,s.modifiers),this._removeState(i))):Eb(r,e.data)>o?this._removeState(i):this._startImmediateDoubleClick(e,r)}}_startImmediateDoubleClick(e,i){const n=e.data.native.pointerType==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay;i.immediateDoubleClick={x:e.data.x,y:e.data.y,modifiers:e.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(e.data),n)}}_removeState(e){const i=Yu(e);this._pointerState.delete(i),this.stopCapturingPointer(e.native),this.refreshHasPendingInputs()}},ooe=class extends ni{constructor(e=$i.maximumClickDelay,i=$i.movementUntilMouseDrag,n=$i.movementUntilPenDrag,r=$i.movementUntilTouchDrag,s=$i.holdDelay,o=kp){super(!1),this._maximumClickDelay=e,this._movementUntilMouseDrag=i,this._movementUntilPenDrag=n,this._movementUntilTouchDrag=r,this._holdDelay=s,this._clock=o,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",a=>{this._handlePointerLoss(a,"pointer-up")}),this.registerIncoming("pointer-capture-lost",a=>{this._handlePointerLoss(a,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",a=>{this._handlePointerLoss(a,"pointer-cancel")}),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(e=>{e.holdTimeout=Je(e.holdTimeout)}),super.onUninstall()}_handlePointerDown(e){const i=e.data,n=i.native.pointerId;let r=null;this._pointerState.size===0&&(r=this._clock.setTimeout(()=>{const o=this._pointerState.get(n);if(o){if(!o.isDragging){const a=o.previousEvent;this._pointerHold.emit(a,void 0,e.modifiers),o.holdEmitted=!0}o.holdTimeout=null}},this._holdDelay));const s={startEvent:i,previousEvent:i,startTimestamp:e.timestamp,isDragging:!1,downButton:i.native.button,holdTimeout:r,modifiers:new Set};this._pointerState.set(n,s),this.startCapturingPointer(i.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(e)}_createPointerDragData(e,i,n){return{action:e,startEvent:i.startEvent,previousEvent:i.previousEvent,currentEvent:n}}_handlePointerMove(e){const i=e.data,n=i.native.pointerId,r=this._pointerState.get(n);r&&(r.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",r,i),void 0,r.modifiers):eoe(i,r.startEvent)>this._getDragThreshold(i.native.pointerType)&&this._startDragging(e),r.previousEvent=i)}_getDragThreshold(e){switch(e){case"touch":return this._movementUntilTouchDrag;case"pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(e){const i=e.data,n=i.native.pointerId;this._pointerState.forEach(r=>{r.holdTimeout!=null&&(r.holdTimeout.remove(),r.holdTimeout=null),r.isDragging||(r.modifiers=e.modifiers,r.isDragging=!0,n===r.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",r,i)):this._pointerDrag.emit(this._createPointerDragData("start",r,r.previousEvent),e.timestamp))})}_handlePointerLoss(e,i){const n=e.data,r=n.native.pointerId,s=this._pointerState.get(r);s&&(s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",s,i==="pointer-up"?n:s.previousEvent),void 0,s.modifiers):i==="pointer-up"&&s.downButton===n.native.button&&e.timestamp-s.startTimestamp<=this._maximumClickDelay&&!s.holdEmitted&&this._immediateClick.emit(n),this._pointerState.delete(r),this.stopCapturingPointer(n.native),this._pointerState.size===0&&this._moveHandle.pause())}},aoe=class extends ni{constructor(e=$i.maximumDoubleClickDelay,i=$i.maximumDoubleClickDistance,n=$i.maximumDoubleTouchDelay,r=$i.maximumDoubleTouchDistance,s=kp){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=n,this._maximumDoubleTouchDistance=r,this._clock=s,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this))}onUninstall(){this._pointerState.forEach(e=>e.doubleClickTimer=Je(e.doubleClickTimer))}get hasPendingInputs(){return x1(this._pointerState,e=>e.doubleClickTimer!=null)}_clearDoubleClickTimer(e,i){const n=this._pointerState.get(e);n&&(n.doubleClickTimer=Je(n.doubleClickTimer),i&&this._click.emit(n.event.data,void 0,n.event.modifiers),this._pointerState.delete(e),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(e){const i=this._pointerState.get(e);i.pointerDownCount===1&&this._click.emit(i.event.data,void 0,i.event.modifiers),i.doubleClickTimer=null,this._pointerState.delete(e),this.refreshHasPendingInputs()}_getPointerId(e){const{pointerId:i,pointerType:n,button:r}=e.native;return n==="mouse"?`${i}:${r}`:`${n}`}_handleImmediateClick(e){const i=e.data,{pointerType:n}=i.native,r=this._getPointerId(i);if(!this._pointerState.has(r))return void this._startClick(e);const s=this._pointerState.get(r),{data:o,modifiers:a}=s.event,l=n==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;Eb(o,i)>l?(this._clearDoubleClickTimer(r,!0),this._startClick(e)):(this._clearDoubleClickTimer(r,!1),s.pointerDownCount===2&&this._doubleClick.emit(o,void 0,a))}_handlePointerDown(e){const i=Yu(e.data),n=this._pointerState.get(i);n&&(n.pointerDownCount+=1)}_startClick(e){const{data:i}=e,{native:{pointerType:n}}=i,r=Yu(i),s=n==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(r),s),a=1;this._pointerState.set(r,{event:e,doubleClickTimer:o,pointerDownCount:a}),this.refreshHasPendingInputs()}};const Qy={counter:"Ctrl",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}};let pu=class extends X{initialize(){const e=()=>{var i;return(i=this.view)==null?void 0:i.ready};this.addHandles([On(()=>!e(),()=>this._disconnect()),On(e,()=>this._connect())])}destroy(){this._disconnect()}get latestPointerType(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerType}get latestPointerLocation(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerLocation}get multiTouchActive(){var e;return((e=this._inputManager)==null?void 0:e.multiTouchActive)??!1}_disconnect(){this.view.viewEvents.disconnect(),this._inputManager=Oe(this._inputManager)}_connect(){const e=this.view.surface,i=new QF(e,this.view.input),n=[new soe,new ooe,new aoe,new noe(this.view.navigation),new ioe],r=new ur({eventSource:i,recognizers:n});r.installHandlers("prevent-context-menu",[new Qse],et.INTERNAL),r.installHandlers("navigation",[new Bse(this.view),new Nse(this.view),new Vse(this.view),new EO(this.view),new EO(this.view,[Qy.counter]),new Ose(this.view,"primary"),new jse(this.view,Qy.pan),new Use(this.view,Qy.zoom),new Gse(this.view,Qy.rotate),new Ase(this.view,"secondary"),new Ise(this.view,"touch")],et.INTERNAL),this.view.viewEvents.connect(r),this._source=i,this._inputManager=r,Z(()=>{var s,o;return(o=(s=this.view)==null?void 0:s.navigation)==null?void 0:o.browserTouchPanEnabled},s=>{this._source&&(this._source.browserTouchPanningEnabled=!s)},De)}get test(){return{inputManager:this._inputManager}}};c([d()],pu.prototype,"view",void 0),c([d()],pu.prototype,"latestPointerType",null),c([d()],pu.prototype,"latestPointerLocation",null),c([d()],pu.prototype,"multiTouchActive",null),pu=c([S("esri.views.2d.input.MapViewInputManager")],pu);const loe=pu;var r2e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function coe(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var OO,AO,LO,h2={exports:{}};h2.exports,OO=h2,AO=function(){function t(r,s,o,a,l){e(r,s,o||0,a||r.length-1,l||n)}function e(r,s,o,a,l){for(;a>o;){if(a-o>600){var u=a-o+1,p=s-o+1,f=Math.log(u),m=.5*Math.exp(2*f/3),g=.5*Math.sqrt(f*m*(u-m)/u)*(p-u/2<0?-1:1);e(r,s,Math.max(o,Math.floor(s-p*m/u+g)),Math.min(a,Math.floor(s+(u-p)*m/u+g)),l)}var y=r[s],v=o,b=a;for(i(r,o,s),l(r[a],y)>0&&i(r,o,a);v<b;){for(i(r,v,b),v++,b--;l(r[v],y)<0;)v++;for(;l(r[b],y)>0;)b--}l(r[o],y)===0?i(r,o,b):i(r,++b,a),b<=s&&(o=b+1),s<=b&&(a=b-1)}}function i(r,s,o){var a=r[s];r[s]=r[o],r[o]=a}function n(r,s){return r<s?-1:r>s?1:0}return t},(LO=AO())!==void 0&&(OO.exports=LO);const uoe=coe(h2.exports);function kb(t,e){if(!(this instanceof kb))return new kb(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&(typeof e=="function"?this.toBBox=e:this._initFormat(e)),this.clear()}function doe(t,e,i){if(!i)return e.indexOf(t);for(var n=0;n<e.length;n++)if(i(t,e[n]))return n;return-1}function Hd(t,e){tm(t,0,t.children.length,e,t)}function tm(t,e,i,n,r){r||(r=uh(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var s,o=e;o<i;o++)s=t.children[o],im(r,t.leaf?n(s):s);return r}function im(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function PO(t,e){return t.minX-e.minX}function RO(t,e){return t.minY-e.minY}function j_(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function e0(t){return t.maxX-t.minX+(t.maxY-t.minY)}function hoe(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function poe(t,e){var i=Math.max(t.minX,e.minX),n=Math.max(t.minY,e.minY),r=Math.min(t.maxX,e.maxX),s=Math.min(t.maxY,e.maxY);return Math.max(0,r-i)*Math.max(0,s-n)}function G_(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function t0(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function uh(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function NO(t,e,i,n,r){for(var s,o=[e,i];o.length;)(i=o.pop())-(e=o.pop())<=n||(s=e+Math.ceil((i-e)/n/2)*n,uoe(t,s,e,i,r),o.push(e,s,s,i))}kb.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],n=this.toBBox;if(!t0(t,e))return i;for(var r,s,o,a,l=[];e;){for(r=0,s=e.children.length;r<s;r++)o=e.children[r],t0(t,a=e.leaf?n(o):o)&&(e.leaf?i.push(o):G_(t,a)?this._all(o,i):l.push(o));e=l.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!t0(t,e))return!1;for(var n,r,s,o,a=[];e;){for(n=0,r=e.children.length;n<r;n++)if(s=e.children[n],t0(t,o=e.leaf?i(s):s)){if(e.leaf||G_(t,o))return!0;a.push(s)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=uh([]),this},remove:function(t,e){if(!t)return this;for(var i,n,r,s,o=this.data,a=this.toBBox(t),l=[],u=[];o||l.length;){if(o||(o=l.pop(),n=l[l.length-1],i=u.pop(),s=!0),o.leaf&&(r=doe(t,o.children,e))!==-1)return o.children.splice(r,1),l.push(o),this._condense(l),this;s||o.leaf||!G_(o,a)?n?(i++,o=n.children[i],s=!1):o=null:(l.push(o),u.push(i),i=0,n=o,o=o.children[0])}return this},toBBox:function(t){return t},compareMinX:PO,compareMinY:RO,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,n){var r,s=i-e+1,o=this._maxEntries;if(s<=o)return Hd(r=uh(t.slice(e,i+1)),this.toBBox),r;n||(n=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,n-1))),(r=uh([])).leaf=!1,r.height=n;var a,l,u,p,f=Math.ceil(s/o),m=f*Math.ceil(Math.sqrt(o));for(NO(t,e,i,m,this.compareMinX),a=e;a<=i;a+=m)for(NO(t,a,u=Math.min(a+m-1,i),f,this.compareMinY),l=a;l<=u;l+=f)p=Math.min(l+f-1,u),r.children.push(this._build(t,l,p,n-1));return Hd(r,this.toBBox),r},_chooseSubtree:function(t,e,i,n){for(var r,s,o,a,l,u,p,f;n.push(e),!e.leaf&&n.length-1!==i;){for(p=f=1/0,r=0,s=e.children.length;r<s;r++)l=j_(o=e.children[r]),(u=hoe(t,o)-l)<f?(f=u,p=l<p?l:p,a=o):u===f&&l<p&&(p=l,a=o);e=a||e.children[0]}return e},_insert:function(t,e,i){var n=this.toBBox,r=i?t:n(t),s=[],o=this._chooseSubtree(r,this.data,e,s);for(o.children.push(t),im(o,r);e>=0&&s[e].children.length>this._maxEntries;)this._split(s,e),e--;this._adjustParentBBoxes(r,s,e)},_split:function(t,e){var i=t[e],n=i.children.length,r=this._minEntries;this._chooseSplitAxis(i,r,n);var s=this._chooseSplitIndex(i,r,n),o=uh(i.children.splice(s,i.children.length-s));o.height=i.height,o.leaf=i.leaf,Hd(i,this.toBBox),Hd(o,this.toBBox),e?t[e-1].children.push(o):this._splitRoot(i,o)},_splitRoot:function(t,e){this.data=uh([t,e]),this.data.height=t.height+1,this.data.leaf=!1,Hd(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){var n,r,s,o,a,l,u,p;for(l=u=1/0,n=e;n<=i-e;n++)o=poe(r=tm(t,0,n,this.toBBox),s=tm(t,n,i,this.toBBox)),a=j_(r)+j_(s),o<l?(l=o,p=n,u=a<u?a:u):o===l&&a<u&&(u=a,p=n);return p},_chooseSplitAxis:function(t,e,i){var n=t.leaf?this.compareMinX:PO,r=t.leaf?this.compareMinY:RO;this._allDistMargin(t,e,i,n)<this._allDistMargin(t,e,i,r)&&t.children.sort(n)},_allDistMargin:function(t,e,i,n){t.children.sort(n);var r,s,o=this.toBBox,a=tm(t,0,e,o),l=tm(t,i-e,i,o),u=e0(a)+e0(l);for(r=e;r<i-e;r++)s=t.children[r],im(a,t.leaf?o(s):s),u+=e0(a);for(r=i-e-1;r>=e;r--)s=t.children[r],im(l,t.leaf?o(s):s),u+=e0(l);return u},_adjustParentBBoxes:function(t,e,i){for(var n=i;n>=0;n--)im(e[n],t)},_condense:function(t){for(var e,i=t.length-1;i>=0;i--)t[i].children.length===0?i>0?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():Hd(t[i],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};var p2;const DO=new Kt({upperLeft:"upper-left",lowerLeft:"lower-left"});let fu=p2=class extends ie{constructor(t){super(t),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new p2(q({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};c([d({type:Ve,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],fu.prototype,"extent",void 0),c([d({type:["view","edit"],json:{write:!0}})],fu.prototype,"mode",void 0),c([d({type:String,json:{read:DO.read,write:DO.write}})],fu.prototype,"originPosition",void 0),c([d({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],fu.prototype,"tolerance",void 0),fu=p2=c([S("esri.rest.support.QuantizationParameters")],fu);const i6=fu;let FO=class n6{constructor(e,i){this.key=new dd(0,0,0,0),this.bounds=tn(),this.objectIds=new Set,this.key.set(i);const n=e.getLODInfoAt(this.key);this.tileInfoView=e,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=n.resolution,this.scale=n.scale,this.level=n.level}get id(){return this.key.id}get extent(){return Ve.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createChildTiles(){const e=this.key.getChildKeys(),i=Xi.acquire();for(let n=0;n<e.length;n++)i[n]=new n6(this.tileInfoView,e[n]);return i}getQuantizationParameters(){return i6.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}};const jc={added:[],removed:[]},U_=new Set,foe=new dd(0,0,0,0);let moe=class extends An{constructor(e){super(),this._tiles=new Map,this._index=kb(9,z("esri-csp-restrictions")?i=>({minX:i.bounds[0],minY:i.bounds[1],maxX:i.bounds[2],maxY:i.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=e}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(e){return this._tiles.has(e)}get(e){return this._tiles.get(e)}boundsIntersections(e){return this._index.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]})}updateTiles(e){const i={added:[],removed:[]};for(const n of e.added)if(!this.has(n)){const r=new FO(this.tileScheme,n);this._tiles.set(n,r),this._index.insert(r),i.added.push(r)}for(const n of e.removed)if(this.has(n)){const r=this.get(n);this._tiles.delete(n),this._index.remove(r),i.removed.push(r)}this.tiles.length=0,this._tiles.forEach(n=>this.tiles.push(n)),(i.added.length||i.removed.length)&&this.emit("update",i)}setViewState(e){const i=this.tileScheme.getTileCoverage(e,0);if(!i)return;const{spans:n,lodInfo:r}=i,{level:s}=r;if(n.length>0)for(const{row:o,colFrom:a,colTo:l}of n)for(let u=a;u<=l;u++){const p=foe.set(s,o,r.normalizeCol(u),r.getWorldForColumn(u)).id;if(U_.add(p),!this.has(p)){const f=new FO(this.tileScheme,p);this._tiles.set(p,f),this._index.insert(f),this.tiles.push(f),jc.added.push(f)}}for(let o=this.tiles.length-1;o>=0;o--){const a=this.tiles[o];U_.has(a.id)||(this._tiles.delete(a.id),this.tiles.splice(o,1),this._index.remove(a),jc.removed.push(a))}(jc.added.length||jc.removed.length)&&this.emit("update",jc),lg.pool.release(i),U_.clear(),jc.added.length=0,jc.removed.length=0}},mu=class extends X{constructor(){super(...arguments),this.color=new Me([0,255,255]),this.haloOpacity=1,this.fillOpacity=.25}equals(e){return this.color.equals(e.color)&&(this.haloColor||this.color).equals(e.haloColor||e.color)&&this.haloOpacity===e.haloOpacity&&this.fillOpacity===e.fillOpacity}};c([d({type:Me})],mu.prototype,"color",void 0),c([d({type:Me})],mu.prototype,"haloColor",void 0),c([d()],mu.prototype,"haloOpacity",void 0),c([d()],mu.prototype,"fillOpacity",void 0),mu=c([S("esri.views.2d.support.HighlightOptions")],mu);const r6=mu;async function goe(t,e,i){const n=J4(e)?K4(t,e):e;if(!t.ready||isNaN(n.x)||isNaN(n.y))return{screenPoint:n,results:[]};let r=new Set;const s=new Set;let o=!1,a=null,l=null;i!=null&&i.include?jO(i.include,zO(t,m=>{r.add(m),H_(m,g=>s.add(g))},(m,g)=>{s.add(m),r.add(g)},m=>{a||(a=new Set),a.add(m)},m=>r.add(m),()=>o=!0)):(o=!0,r=new Set(t.allLayerViews),r.forEach(m=>{H_(m,g=>s.add(g))})),i!=null&&i.exclude&&jO(i.exclude,zO(t,m=>{r.delete(m),H_(m,g=>s.delete(g))},m=>s.delete(m),m=>{l||(l=new Set),l.add(m)}));const u=t.allLayerViews.filter(m=>!m.suspended&&r.has(m)).reverse(),p=t.toMap(n);let f=[...o?t.graphicsView.hitTest(p).map(m=>({type:"graphic",graphic:m,layer:null,mapPoint:p})):[],...await Promise.all(u.map(m=>m.hitTest(p,n)).toArray())].filter(Qi).flat().filter(Qi);return f=f.filter(m=>{var g;return m.type!=="graphic"||((g=m.layer)==null?void 0:g.type)!=="subtype-group"||s.has(m.graphic.layer)}),a&&(f=f.filter(m=>!("graphic"in m)||!m.graphic||(a==null?void 0:a.has(f2(m.graphic))))),l&&(f=f.filter(m=>!("graphic"in m)||!m.graphic||!(l!=null&&l.has(f2(m.graphic))))),{screenPoint:n,results:f}}function zO(t,e,i,n,r,s){return o=>{if(o instanceof mp){if(o.layer===t)s==null||s();else{const a=t.allLayerViews.find(l=>l.layer===o.layer);a&&(r==null||r(a))}n(f2(o))}else if(o.type==="subtype-sublayer"){const a=t.allLayerViews.find(l=>l.layer===o.parent);a&&i(o,a)}else{const a=t.allLayerViews.find(l=>l.layer===o);a&&e(a)}}}function jO(t,e){if(t)if(Av(t))for(const i of t)if(Av(i))for(const n of i)e(n);else e(i);else e(t)}function f2(t){var i,n;const e=t.getObjectId();return e?`${((i=t.layer)==null?void 0:i.uid)??((n=t.sourceLayer)==null?void 0:n.uid)??"MapView"}/${e}`:`"MapView/${t.uid}`}function H_({layer:t},e){t.type==="subtype-group"&&t.sublayers.forEach(i=>{e(i)})}function yoe(t,e,i){const{ctx:n,canvas:r}=s6(t,i),s=n.getImageData(0,0,t.width,t.height),o=woe(r,e);return o6(r),{dataUrl:o,data:s}}function voe(t,e){const{ctx:i,canvas:n}=s6(t,e),r=i.getImageData(0,0,t.width,t.height);return o6(n),r}function s6(t,e){const i=boe();e.premultipliedAlpha&&Toe(t),i.width=t.width,i.height=t.height;const n=i.getContext("2d",{willReadFrequently:!0});return n.putImageData(t,0,0),e.flipY&&xoe(n),{ctx:n,canvas:i}}function o6(t){t.width=0,t.height=0}function boe(){return V_==null&&(V_=document.createElement("canvas")),V_}let V_=null;function woe(t,e){const i=Eoe[e.format],n=e.quality/100;return t.toDataURL(i,n)}function _oe(t,e){const i=$oe(t),n=Moe[i];return{format:i,quality:Ar(e??n,0,100)}}function Soe(t,e){return e/Math.max(t[0],t[1])}function a2e(t,e,i,n=0,r=0,s=t.width-n,o=t.height-r,a=!1){const{data:l}=t,{width:u,height:p,data:f}=e,m=s/u,g=o/p,y=Math.ceil(m/2),v=Math.ceil(g/2),b=t.width;for(let _=0;_<p;_++)for(let $=0;$<u;$++){const x=4*($+(a?p-_-1:_)*u);let E=0,C=0,M=0,N=0,G=0,U=0;const B=(_+.5)*g;for(let H=Math.floor(_*g);H<(_+1)*g;H++){const L=Math.abs(B-(H+.5))/v,R=($+.5)*m,D=L*L;for(let Y=Math.floor($*m);Y<($+1)*m;Y++){const le=Math.abs(R-(Y+.5))/y,re=Math.sqrt(D+le*le);if(re>=1)continue;let oe=2*re*re*re-3*re*re+1;const ke=4*(n+Y+(r+H)*b);U+=oe*l[ke+3],C+=oe,!i&&l[ke+3]<255&&(oe=oe*l[ke+3]/255),M+=oe*l[ke],N+=oe*l[ke+1],G+=oe*l[ke+2],E+=oe}}f[x]=M/E,f[x+1]=N/E,f[x+2]=G/E,f[x+3]=U/C}return e}function $oe(t){switch(t){case"png":case"jpg":case"jpeg":return t;default:return koe}}function xoe(t){t.save(),t.globalCompositeOperation="copy",t.scale(1,-1),t.translate(0,-t.canvas.height),t.drawImage(t.canvas,0,0),t.restore()}function Toe(t){const e=t.data,i=e.length;for(let n=0;n<i;n+=4){const r=e[n+3];if(r!==255&&r>0){const s=255/r;e[n]=e[n]*s,e[n+1]=e[n+1]*s,e[n+2]=e[n+2]*s}}}const Eoe={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},GO=98,koe="png",Moe={png:100,jpg:GO,jpeg:GO},a6={flipY:!0,premultipliedAlpha:!0};async function Coe(t,e){const i=await l6(t,e),{format:n,quality:r}=_oe(e==null?void 0:e.format,e==null?void 0:e.quality);return yoe(i,{format:n,quality:r,rotation:0,disableDecorations:!1},a6)}async function Ioe(t,e){const i=await l6(t,e);return voe(i,a6)}function l6(t,e){const i=Loe(e||{},Aoe(t.stage,t.size),t.size,t.padding),n=Ooe(e,t.allLayerViews);return t.stage.takeScreenshot(i,n,t.backgroundColor,e==null?void 0:e.rotation)}function Ooe(t={},e){if(!t.layers)return;const i=[];return t.layers.forEach(n=>{const r=e.find(s=>s.layer.id===n.id);r!=null&&r.container&&i.push(r.container)}),i}function Aoe(t,e){return Math.min(4,Soe(e,Math.min(4096,t.context.parameters.maxTextureSize)))}function Loe(t,e,i,n){t.ignorePadding&&(n={left:0,right:0,top:0,bottom:0});let r=null;t.width!=null&&t.height!=null?r=[t.width,t.height]:t.width==null&&t.height!=null?r=[t.height,t.height]:t.width!=null&&t.height==null?r=[t.width,t.width]:t.width==null&&t.height==null&&(r=null);const s=i[0]-(n.left+n.right),o=i[1]-(n.top+n.bottom);let a,l,u=t.area||{x:0,y:0,width:s,height:o};if(r){const p=s/o,f=r[0]/r[1];if(f>p){const m=u.width/f;u={x:u.x,y:Math.round(u.y+(u.height-m)/2),width:u.width,height:Math.round(m)}}else{const m=u.height*f;u={x:Math.round(u.x+(u.width-m)/2),y:u.y,width:Math.round(m),height:u.height}}}else r=[u.width,u.height];return r[0]>u.width?(a=Math.min(r[0]/u.width,e),l=r[0]/u.width/a):(a=1,l=r[0]/u.width),{cropArea:{x:Math.round((u.x+n.left)*a),y:Math.round((u.y+n.top)*a),width:Math.round(u.width*a),height:Math.round(u.height*a)},outputScale:l,resolutionScale:a}}const UO=160;let nm=class extends X{constructor(){super(...arguments),this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now(),this._timer==null&&(this._timer=setInterval(()=>{performance.now()-this._timestamp>=UO&&this.clear()},UO))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};c([d()],nm.prototype,"_timer",void 0),c([d()],nm.prototype,"stationary",null),nm=c([S("esri.views.2d.support.StationaryManager")],nm);const Poe=t=>t.includes("Brush");let c6=class{constructor(){this._names=new Map}begin(e){this._names.has(e)||(this._names.set(e,!1),Poe(e)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${e}.Start`))}end(e){this._names.has(e)&&!this._names.get(e)&&(this._names.set(e,!0),performance.mark(`Esri.${e}.End`))}record(e){this._names.has(e)||(this._names.set(e,!0),performance.mark(`Esri.${e}`))}};var Zt;function m2(t,e,i={}){const n=e===Zt.WEBGL1?"webgl":"webgl2";return t.getContext(n,i)||null}function u2e(t,e,i={}){const n=u6(t);for(const r of n){const s=m2(e,r,i);if(s)return s}return null}function u6(t){if(t==="3d")return[Zt.WEBGL2];const e=z("esri-force-webgl");return e===Zt.WEBGL1||e===Zt.WEBGL2?[e]:z("mac")&&z("chrome")?[Zt.WEBGL1,Zt.WEBGL2]:[Zt.WEBGL2,Zt.WEBGL1]}(function(t){t[t.WEBGL1=1]="WEBGL1",t[t.WEBGL2=2]="WEBGL2"})(Zt||(Zt={}));let B_,q_;function Roe(t){const e=u6(t);for(;e.length>1;){const i=HO(e.shift());if(i.available)return i}return HO(e.shift())}function HO(t){switch(t){case Zt.WEBGL1:return Noe();case Zt.WEBGL2:return Doe()}}function Noe(){return B_||(B_=joe()),B_}function Doe(){return q_||(q_=Goe()),q_}let d6=class{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsElementIndexUint=!1,this.supportsStandardDerivatives=!1,this.supportsInstancedArrays=!1,this.supportsTextureFloat=!1,this.supportsTextureHalfFloat=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1}},Foe=class extends d6{constructor(){super(...arguments),this.type=Zt.WEBGL1}},zoe=class extends d6{constructor(){super(...arguments),this.type=Zt.WEBGL2,this.supportsElementIndexUint=!0,this.supportsStandardDerivatives=!0,this.supportsInstancedArrays=!0,this.supportsTextureFloat=!0,this.supportsTextureHalfFloat=!0}};function h6(t,e){if(t===Zt.WEBGL1&&typeof WebGLRenderingContext>"u"||t===Zt.WEBGL2&&typeof WebGL2RenderingContext>"u")return null;const i=document.createElement("canvas");if(!i)return null;let n=m2(i,t,{failIfMajorPerformanceCaveat:!0});if(n==null&&(n=m2(i,t),n!=null&&(e.majorPerformanceCaveat=!0)),n==null)return n;if(t===Zt.WEBGL1){const s=n.getParameter(n.VERSION),o=s==null?void 0:s.match(/^WebGL\s+([\d.]*)/);if(o){const a=parseFloat(o[1]);e.available=a>=.94}}else e.available=!0;e.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),e.supportsVertexShaderSamplers=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const r=n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT);return r&&(e.supportsHighPrecisionFragment=r.precision>0),n}function joe(){const t=new Foe,e=h6(Zt.WEBGL1,t);return e==null||(t.supportsElementIndexUint=e.getExtension("OES_element_index_uint")!==null,t.supportsStandardDerivatives=e.getExtension("OES_standard_derivatives")!==null,t.supportsInstancedArrays=e.getExtension("ANGLE_instanced_arrays")!==null,t.supportsTextureFloat=e.getExtension("OES_texture_float")!==null,t.supportsTextureHalfFloat=e.getExtension("OES_texture_half_float")!==null,t.supportsColorBufferFloat=e.getExtension("WEBGL_color_buffer_float")!==null,t.supportsColorBufferFloatBlend=e.getExtension("EXT_float_blend")!==null,t.supportsColorBufferHalfFloat=e.getExtension("EXT_color_buffer_half_float")!==null),t}function Goe(){const t=new zoe,e=h6(Zt.WEBGL2,t);return e==null||(t.supportsColorBufferFloat=e.getExtension("EXT_color_buffer_float")!==null,t.supportsColorBufferFloatBlend=e.getExtension("EXT_float_blend")!==null,t.supportsColorBufferHalfFloat=t.supportsColorBufferFloat||e.getExtension("EXT_color_buffer_half_float")!==null),t}function Uoe(t){const e=Roe(t);if(!e.available)return new F("webgl:required",t==="3d"?"WebGL2 is required but not supported.":"WebGL is required but not supported.",new Error().stack);if(t==="3d"&&e.majorPerformanceCaveat)return new F("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.");if(!e.supportsHighPrecisionFragment)return new F("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported.");if(!e.supportsVertexShaderSamplers)return new F("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported.");if(e.type===Zt.WEBGL1){if(!e.supportsElementIndexUint)return new F("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported.");if(!e.supportsStandardDerivatives)return new F("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported.");if(!e.supportsInstancedArrays)return new F("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported.")}return null}function Hoe(t){return t&&"nodeType"in t}function Voe(t){return t&&typeof t.render=="function"}const VO={component:"esri-component"};let gu=class extends X{constructor(){super(...arguments),this.widget=null}destroy(){var e;this.node=null,(e=this.widget)==null||e.destroy()}get id(){var e,i;return this._get("id")??((e=this.widget)==null?void 0:e.id)??((i=this.node)==null?void 0:i.id)}set id(e){this._set("id",e)}set node(e){const i=this._get("node");e!==i&&(e&&e.classList.add(VO.component),i&&i.classList.remove(VO.component),this._set("node",e))}castNode(e){var i;return(i=this.widget)==null||i.destroy(),e?typeof e=="string"||Hoe(e)?(this._set("widget",null),TE(e)):(Voe(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};c([d()],gu.prototype,"id",null),c([d()],gu.prototype,"node",null),c([zt("node")],gu.prototype,"castNode",null),c([d({readOnly:!0})],gu.prototype,"widget",void 0),gu=c([S("esri.views.ui.Component")],gu);const yv=gu,p6="calcite-mode-";function Boe(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-mode-name").replaceAll(/\s|'|"/g,"")}function qoe(){return Boe().startsWith("dark")}function Woe(){return`${p6}${qoe()?"dark":"light"}`}function Zoe(t){Koe(t),t.classList.add(Woe())}function Koe(t){Array.from(t.classList).forEach(e=>{e.startsWith(p6)&&t.classList.remove(e)})}const Joe={left:0,top:0,bottom:0,right:0},f6={bottom:30,top:15,right:15,left:15},Ko="esri-ui",ln={ui:Ko,corner:`${Ko}-corner`,innerContainer:`${Ko}-inner-container`,manualContainer:`${Ko}-manual-container`,cornerContainer:`${Ko}-corner-container`,topLeft:`${Ko}-top-left`,topRight:`${Ko}-top-right`,bottomLeft:`${Ko}-bottom-left`,bottomRight:`${Ko}-bottom-right`};function Yoe(t){return t&&!t._started&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}function i0(t){return t===0?"0":`${t}px`}function W_(t){const e=typeof t=="object"&&t!==null&&Object.getPrototypeOf(t);return(e===null||e===Object.prototype)&&("component"in t||"index"in t||"position"in t)?t:null}function Z_(t,{top:e,bottom:i,left:n,right:r}){t.style.top=e,t.style.bottom=i,t.style.left=n,t.style.right=r}let so=class extends An.EventedAccessor{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._locale=Jn(),this.view=null,this._applyViewPadding=()=>{const i=this.container;i&&Z_(i,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const i=this._innerContainer;i&&Z_(i,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([Z(()=>{var e;return[(e=this.view)==null?void 0:e.padding,this.container]},this._applyViewPadding,De),Z(()=>this.padding,this._applyUIPadding,De),Z(()=>[this.container,this._locale],([e,i])=>{e&&e.setAttribute("lang",i)},De),N1(e=>{this._locale=e})])}destroy(){this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._componentMap.clear()}set container(e){const i=this._get("container");e!==i&&(e&&(e.classList.add(ln.ui),Zoe(e),this._attachContainers(e)),i&&(i.classList.remove(ln.ui),Z_(i,{top:"",bottom:"",left:"",right:""}),P5(i)),this._set("container",e))}get height(){var s;const e=((s=this.view)==null?void 0:s.height)??0;if(e===0)return e;const i=this._getViewPadding(),{top:n,bottom:r}=i;return Math.max(e-n-r,0)}get padding(){return this._get("padding")}set padding(e){this._overrideIfSome("padding",e)}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:{...f6,...e}}get width(){var s;const e=((s=this.view)==null?void 0:s.width)??0;if(e===0)return e;const i=this._getViewPadding(),{left:n,right:r}=i;return Math.max(e-n-r,0)}add(e,i){let n,r,s;if(Array.isArray(e))return void e.forEach(a=>this.add(a,i));const o=W_(e);o&&({index:n,position:i,component:e,key:r}=o),i&&typeof i=="object"&&({index:n,key:r,position:i,internal:s}=i),!e||i&&!this._isValidPosition(i)||this._add(e,i,n,r,s)}remove(e,i){var r;if(!e)return;if(Array.isArray(e))return e.map(s=>this.remove(s,i));const n=this._find(e);if(n){if(this._componentMap.has(n)&&((r=this._componentMap.get(n))==null?void 0:r.key)!==i)return;const s=this._components.indexOf(n),o=n.node.parentNode;return o==null||o.removeChild(n.node),this._componentMap.delete(n),this._components.splice(s,1)[0]}}empty(e,i={removeInternal:!1}){if(Array.isArray(e)){for(const s of e)this.empty(s,i);return}const n=this._positionNameToContainerLookup[e??"manual"],r=Array.prototype.slice.call(n.children).map(s=>this._findByNode(s)).filter(s=>{var o;return s==null?!1:!(((o=this._componentMap.get(s))==null?void 0:o.internal)??!1)||i.removeInternal});for(const s of r)this.remove(s)}move(e,i){if(Array.isArray(e)&&e.forEach(o=>this.move(o,i)),!e)return;let n;const r=W_(e)||W_(i);if(r&&(n=r.index,i=r.position,e=r.component||e),i&&!this._isValidPosition(i))return;const s=this.remove(e);s&&this.add(s,{position:i,index:n})}find(e){if(!e)return null;const i=this._findById(e);return i&&(i.widget||i.node)}getComponents(e,i={includeInternal:!1}){return e?Array.isArray(e)?e.flatMap(n=>this._getComponentsAtPosition(n,i)):this._getComponentsAtPosition(e,i):this._components.filter(n=>{var r;return i.includeInternal||!((r=this._componentMap.get(n))!=null&&r.internal)}).map(({widget:n,node:r})=>n??r)}getPosition(e){for(const i in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[i].contains(e))return i;return null}_add(e,i,n,r,s){e instanceof yv||(e=new yv({node:e})),this._place({component:e,position:i,index:n}),this._components.push(e),this._componentMap.set(e,{key:r,internal:s})}_find(e){return e?e instanceof yv?this._findByComponent(e):typeof e=="string"?this._findById(e):this._findByNode(e.domNode||e):null}_getViewPadding(){var e;return((e=this.view)==null?void 0:e.padding)??Joe}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(ln.innerContainer,ln.cornerContainer);const i=document.createElement("div");i.classList.add(ln.innerContainer,ln.manualContainer);const n=document.createElement("div");n.classList.add(ln.topLeft,ln.corner),e.appendChild(n);const r=document.createElement("div");r.classList.add(ln.topRight,ln.corner),e.appendChild(r);const s=document.createElement("div");s.classList.add(ln.bottomLeft,ln.corner),e.appendChild(s);const o=document.createElement("div");o.classList.add(ln.bottomRight,ln.corner),e.appendChild(o),this._innerContainer=e,this._manualContainer=i;const a=O$();this._cornerNameToContainerLookup={"top-left":n,"top-right":r,"bottom-left":s,"bottom-right":o,"top-leading":a?r:n,"top-trailing":a?n:r,"bottom-leading":a?o:s,"bottom-trailing":a?s:o},this._positionNameToContainerLookup={manual:i,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){const i=e.position??"manual",{component:n,index:r}=e,s=this._positionNameToContainerLookup[i],o=r!=null&&r>-1;if(Yoe(n.widget)&&n.widget.startup(),!o)return void s.appendChild(n.node);const a=Array.from(s.children);if(r===0)return void(s.firstChild?wI(n.node,s.firstChild):s.appendChild(n.node));r>=a.length?s.appendChild(n.node):wI(n.node,a[r])}_toPixelPosition(e){return{top:i0(e.top),left:i0(e.left),right:i0(e.right),bottom:i0(e.bottom)}}_findByComponent(e){return this._components.find(i=>i===e)??null}_findById(e){return this._components.find(({id:i})=>i===e)??null}_findByNode(e){return this._components.find(({node:i})=>i===e)??null}_getComponentsAtPosition(e,i){const n=this._positionNameToContainerLookup[e];return Array.prototype.slice.call(n.children).map(r=>this._findByNode(r)).filter(Qi).filter(r=>{var s;return i.includeInternal||!((s=this._componentMap.get(r))!=null&&s.internal)}).map(({widget:r,node:s})=>r??s)}};c([d()],so.prototype,"_locale",void 0),c([d()],so.prototype,"container",null),c([d()],so.prototype,"height",null),c([d({value:f6})],so.prototype,"padding",null),c([zt("padding")],so.prototype,"castPadding",null),c([d()],so.prototype,"view",void 0),c([d()],so.prototype,"width",null),so=c([S("esri.views.ui.UI")],so);const Xoe=so,Qoe="randomUUID"in crypto;function pk(){if(Qoe)return crypto.randomUUID();const t=crypto.getRandomValues(new Uint16Array(8));t[3]=4095&t[3]|16384,t[4]=16383&t[4]|32768;const e=i=>t[i].toString(16).padStart(4,"0");return e(0)+e(1)+"-"+e(2)+"-"+e(3)+"-"+e(4)+"-"+e(5)+e(6)+e(7)}function g2e(){return`{${pk().toUpperCase()}}`}function y2e(){return`{${pk()}}`}const eae={handleInterceptedEvent:(t,e,i,n)=>(t.scheduleRender(),e.properties[`on${n.type}`].apply(e.properties.bind||i,[n]))},tae={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,i)=>{e.charAt(0)==="-"?t.style.setProperty(e,i):t.style[e]=i}},iae=t=>({...tae,...t}),nae=(t,e)=>{const i=[];for(;t&&t!==e;)i.push(t),t=t.parentNode;return i},rae=(t,e)=>t.find(e),BO=(t,e,i=!1)=>{let n=t;return e.forEach((r,s)=>{const o=n!=null&&n.children?rae(n.children,a=>a.domNode===r):void 0;i&&!o&&s!==e.length-1||(n=o)}),n},sae=t=>{let e;const i={...eae,...t},n=iae(i),r=n.performanceLogger;let s,o=!0,a=!1;const l=[],u=[],p=(m,g,y)=>{var _;let v;n.eventHandlerInterceptor=($,x,E,C)=>function(M){let N;r("domEvent",M);const G=nae(M.currentTarget,v.domNode),U=G.some(H=>{var L;return customElements.get((L=H==null?void 0:H.tagName)==null?void 0:L.toLowerCase())});if(M.eventPhase===Event.CAPTURING_PHASE||!U)G.reverse(),N=BO(v.getLastRender(),G);else{const H=M.composedPath(),L=H.slice(H.indexOf(M.currentTarget),H.indexOf(v.domNode)).reverse();N=BO(v.getLastRender(),L,!0)}let B;return N&&(B=i.handleInterceptedEvent(e,N,this,M)),r("domEventProcessed",M),B},(_=i.postProcessProjectionOptions)==null||_.call(i,n);const b=y();v=m(g,b,n),n.eventHandlerInterceptor=void 0,l.push(v),u.push(y),i.afterFirstVNodeRendered&&i.afterFirstVNodeRendered(v,b)};let f=()=>{if(s=void 0,o){o=!1,r("renderStart",void 0);for(let m=0;m<l.length;m++){const g=u[m]();r("rendered",void 0),l[m].update(g),r("patched",void 0)}r("renderDone",void 0),o=!0}};return i.modifyDoRenderImplementation&&(f=i.modifyDoRenderImplementation(f,l,u)),e={renderNow:f,scheduleRender:()=>{s||a||(s=requestAnimationFrame(f))},stop:()=>{s&&(cancelAnimationFrame(s),s=void 0),a=!0},resume:()=>{a=!1,o=!0,e.scheduleRender()},append:(m,g)=>{p(tc.append,m,g)},insertBefore:(m,g)=>{p(tc.insertBefore,m,g)},merge:(m,g)=>{p(tc.merge,m,g)},replace:(m,g)=>{p(tc.replace,m,g)},detach:m=>{for(let g=0;g<u.length;g++)if(u[g]===m)return u.splice(g,1),l.splice(g,1)[0];throw new Error("renderFunction was not found")}},e},dh={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,safari10:!1,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,cssVarShim:!1,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,dynamicImportShim:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0};let hh,m6,gw,g6=!1,Mb=!1,fk=!1,qn=!1,qO=null,g2=!1;const oae=t=>{const e=new URL(t,yi.$resourcesUrl$);return e.origin!==Kg.location.origin?e.href:e.pathname},aae=t=>yi.$resourcesUrl$=t,hd=(t,e="")=>()=>{},WO="http://www.w3.org/1999/xlink",ZO={},lae="http://www.w3.org/2000/svg",cae="http://www.w3.org/1999/xhtml",uae=t=>t!=null,mk=t=>(t=typeof t,t==="object"||t==="function");function dae(t){var e,i,n;return(n=(i=(e=t.head)===null||e===void 0?void 0:e.querySelector('meta[name="csp-nonce"]'))===null||i===void 0?void 0:i.getAttribute("content"))!==null&&n!==void 0?n:void 0}const y6=(t,e,...i)=>{let n=null,r=null,s=null,o=!1,a=!1;const l=[],u=f=>{for(let m=0;m<f.length;m++)n=f[m],Array.isArray(n)?u(n):n!=null&&typeof n!="boolean"&&((o=typeof t!="function"&&!mk(n))&&(n=String(n)),o&&a?l[l.length-1].$text$+=n:l.push(o?Cb(null,n):n),a=o)};if(u(i),e){e.key&&(r=e.key),e.name&&(s=e.name);{const f=e.className||e.class;f&&(e.class=typeof f!="object"?f:Object.keys(f).filter(m=>f[m]).join(" "))}}if(typeof t=="function")return t(e===null?{}:e,l,fae);const p=Cb(t,null);return p.$attrs$=e,l.length>0&&(p.$children$=l),p.$key$=r,p.$name$=s,p},Cb=(t,e)=>{const i={$flags$:0,$tag$:t,$text$:e,$elm$:null,$children$:null};return i.$attrs$=null,i.$key$=null,i.$name$=null,i},hae={},pae=t=>t&&t.$tag$===hae,fae={forEach:(t,e)=>t.map(KO).forEach(e),map:(t,e)=>t.map(KO).map(e).map(mae)},KO=t=>({vattrs:t.$attrs$,vchildren:t.$children$,vkey:t.$key$,vname:t.$name$,vtag:t.$tag$,vtext:t.$text$}),mae=t=>{if(typeof t.vtag=="function"){const i=Object.assign({},t.vattrs);return t.vkey&&(i.key=t.vkey),t.vname&&(i.name=t.vname),y6(t.vtag,i,...t.vchildren||[])}const e=Cb(t.vtag,t.vtext);return e.$attrs$=t.vattrs,e.$children$=t.vchildren,e.$key$=t.vkey,e.$name$=t.vname,e},gae=t=>Hae.map(e=>e(t)).find(e=>!!e),yae=(t,e)=>t!=null&&!mk(t)?e&4?t==="false"?!1:t===""||!!t:e&2?parseFloat(t):e&1?String(t):t:t,vae=t=>t,v2e=(t,e,i)=>{const n=vae(t);return{emit:r=>bae(n,e,{bubbles:!!(i&4),composed:!!(i&2),cancelable:!!(i&1),detail:r})}},bae=(t,e,i)=>{const n=yi.ce(e,i);return t.dispatchEvent(n),n},JO=new WeakMap,wae=(t,e,i)=>{let n=Ob.get(t);qae&&i?(n=n||new CSSStyleSheet,typeof n=="string"?n=e:n.replaceSync(e)):n=e,Ob.set(t,n)},_ae=(t,e,i,n)=>{var r;let s=v6(e,i);const o=Ob.get(s);if(t=t.nodeType===11?t:xs,o)if(typeof o=="string"){t=t.head||t;let a=JO.get(t),l;if(a||JO.set(t,a=new Set),!a.has(s)){{l=xs.createElement("style"),l.innerHTML=o;const u=(r=yi.$nonce$)!==null&&r!==void 0?r:dae(xs);u!=null&&l.setAttribute("nonce",u),t.insertBefore(l,t.querySelector("link"))}a&&a.add(s)}}else t.adoptedStyleSheets.includes(o)||(t.adoptedStyleSheets=[...t.adoptedStyleSheets,o]);return s},Sae=t=>{const e=t.$cmpMeta$,i=t.$hostElement$,n=e.$flags$,r=hd("attachStyles",e.$tagName$),s=_ae(i.shadowRoot?i.shadowRoot:i.getRootNode(),e,t.$modeName$);n&10&&(i["s-sc"]=s,i.classList.add(s+"-h"),n&2&&i.classList.add(s+"-s")),r()},v6=(t,e)=>"sc-"+(e&&t.$flags$&32?t.$tagName$+"-"+e:t.$tagName$),YO=(t,e,i,n,r,s)=>{if(i!==n){let o=t3(t,e),a=e.toLowerCase();if(e==="class"){const l=t.classList,u=XO(i),p=XO(n);l.remove(...u.filter(f=>f&&!p.includes(f))),l.add(...p.filter(f=>f&&!u.includes(f)))}else if(e==="style"){for(const l in i)(!n||n[l]==null)&&(l.includes("-")?t.style.removeProperty(l):t.style[l]="");for(const l in n)(!i||n[l]!==i[l])&&(l.includes("-")?t.style.setProperty(l,n[l]):t.style[l]=n[l])}else if(e!=="key")if(e==="ref")n&&n(t);else if(!t.__lookupSetter__(e)&&e[0]==="o"&&e[1]==="n")e[2]==="-"?e=e.slice(3):t3(Kg,a)?e=a.slice(2):e=a[2]+e.slice(3),i&&yi.rel(t,e,i,!1),n&&yi.ael(t,e,n,!1);else{const l=mk(n);if((o||l&&n!==null)&&!r)try{if(t.tagName.includes("-"))t[e]=n;else{const p=n??"";e==="list"?o=!1:(i==null||t[e]!=p)&&(t[e]=p)}}catch{}let u=!1;a!==(a=a.replace(/^xlink\:?/,""))&&(e=a,u=!0),n==null||n===!1?(n!==!1||t.getAttribute(e)==="")&&(u?t.removeAttributeNS(WO,e):t.removeAttribute(e)):(!o||s&4||r)&&!l&&(n=n===!0?"":n,u?t.setAttributeNS(WO,e,n):t.setAttribute(e,n))}}},$ae=/\s/,XO=t=>t?t.split($ae):[],b6=(t,e,i,n)=>{const r=e.$elm$.nodeType===11&&e.$elm$.host?e.$elm$.host:e.$elm$,s=t&&t.$attrs$||ZO,o=e.$attrs$||ZO;for(n in s)n in o||YO(r,n,s[n],void 0,i,e.$flags$);for(n in o)YO(r,n,s[n],o[n],i,e.$flags$)},Ib=(t,e,i,n)=>{const r=e.$children$[i];let s=0,o,a,l;if(g6||(fk=!0,r.$tag$==="slot"&&(hh&&n.classList.add(hh+"-s"),r.$flags$|=r.$children$?2:1)),r.$text$!==null)o=r.$elm$=xs.createTextNode(r.$text$);else if(r.$flags$&1)o=r.$elm$=xs.createTextNode("");else{if(qn||(qn=r.$tag$==="svg"),o=r.$elm$=xs.createElementNS(qn?lae:cae,r.$flags$&2?"slot-fb":r.$tag$),qn&&r.$tag$==="foreignObject"&&(qn=!1),b6(null,r,qn),uae(hh)&&o["s-si"]!==hh&&o.classList.add(o["s-si"]=hh),r.$children$)for(s=0;s<r.$children$.length;++s)a=Ib(t,r,s,o),a&&o.appendChild(a);r.$tag$==="svg"?qn=!1:o.tagName==="foreignObject"&&(qn=!0)}return o["s-hn"]=gw,r.$flags$&3&&(o["s-sr"]=!0,o["s-cr"]=m6,o["s-sn"]=r.$name$||"",l=t&&t.$children$&&t.$children$[i],l&&l.$tag$===r.$tag$&&t.$elm$&&cg(t.$elm$,!1)),o},cg=(t,e)=>{yi.$flags$|=1;const i=t.childNodes;for(let n=i.length-1;n>=0;n--){const r=i[n];r["s-hn"]!==gw&&r["s-ol"]&&(S6(r).insertBefore(r,gk(r)),r["s-ol"].remove(),r["s-ol"]=void 0,fk=!0),e&&cg(r,e)}yi.$flags$&=-2},w6=(t,e,i,n,r,s)=>{let o=t["s-cr"]&&t["s-cr"].parentNode||t,a;for(o.shadowRoot&&o.tagName===gw&&(o=o.shadowRoot);r<=s;++r)n[r]&&(a=Ib(null,i,r,t),a&&(n[r].$elm$=a,o.insertBefore(a,gk(e))))},_6=(t,e,i,n,r)=>{for(;e<=i;++e)(n=t[e])&&(r=n.$elm$,T6(n),Mb=!0,r["s-ol"]?r["s-ol"].remove():cg(r,!0),r.remove())},xae=(t,e,i,n)=>{let r=0,s=0,o=0,a=0,l=e.length-1,u=e[0],p=e[l],f=n.length-1,m=n[0],g=n[f],y,v;for(;r<=l&&s<=f;)if(u==null)u=e[++r];else if(p==null)p=e[--l];else if(m==null)m=n[++s];else if(g==null)g=n[--f];else if(n0(u,m))ph(u,m),u=e[++r],m=n[++s];else if(n0(p,g))ph(p,g),p=e[--l],g=n[--f];else if(n0(u,g))(u.$tag$==="slot"||g.$tag$==="slot")&&cg(u.$elm$.parentNode,!1),ph(u,g),t.insertBefore(u.$elm$,p.$elm$.nextSibling),u=e[++r],g=n[--f];else if(n0(p,m))(u.$tag$==="slot"||g.$tag$==="slot")&&cg(p.$elm$.parentNode,!1),ph(p,m),t.insertBefore(p.$elm$,u.$elm$),p=e[--l],m=n[++s];else{for(o=-1,a=r;a<=l;++a)if(e[a]&&e[a].$key$!==null&&e[a].$key$===m.$key$){o=a;break}o>=0?(v=e[o],v.$tag$!==m.$tag$?y=Ib(e&&e[s],i,o,t):(ph(v,m),e[o]=void 0,y=v.$elm$),m=n[++s]):(y=Ib(e&&e[s],i,s,t),m=n[++s]),y&&S6(u.$elm$).insertBefore(y,gk(u.$elm$))}r>l?w6(t,n[f+1]==null?null:n[f+1].$elm$,i,n,s,f):s>f&&_6(e,r,l)},n0=(t,e)=>t.$tag$===e.$tag$?t.$tag$==="slot"?t.$name$===e.$name$:t.$key$===e.$key$:!1,gk=t=>t&&t["s-ol"]||t,S6=t=>(t["s-ol"]?t["s-ol"]:t).parentNode,ph=(t,e)=>{const i=e.$elm$=t.$elm$,n=t.$children$,r=e.$children$,s=e.$tag$,o=e.$text$;let a;o===null?(qn=s==="svg"?!0:s==="foreignObject"?!1:qn,s==="slot"||b6(t,e,qn),n!==null&&r!==null?xae(i,n,e,r):r!==null?(t.$text$!==null&&(i.textContent=""),w6(i,null,e,r,0,r.length-1)):n!==null&&_6(n,0,n.length-1),qn&&s==="svg"&&(qn=!1)):(a=i["s-cr"])?a.parentNode.textContent=o:t.$text$!==o&&(i.data=o)},$6=t=>{const e=t.childNodes;let i,n,r,s,o,a;for(n=0,r=e.length;n<r;n++)if(i=e[n],i.nodeType===1){if(i["s-sr"]){for(o=i["s-sn"],i.hidden=!1,s=0;s<r;s++)if(a=e[s].nodeType,e[s]["s-hn"]!==i["s-hn"]||o!==""){if(a===1&&o===e[s].getAttribute("slot")){i.hidden=!0;break}}else if(a===1||a===3&&e[s].textContent.trim()!==""){i.hidden=!0;break}}$6(i)}},ys=[],x6=t=>{let e,i,n,r,s,o,a=0;const l=t.childNodes,u=l.length;for(;a<u;a++){if(e=l[a],e["s-sr"]&&(i=e["s-cr"])&&i.parentNode)for(n=i.parentNode.childNodes,r=e["s-sn"],o=n.length-1;o>=0;o--)i=n[o],!i["s-cn"]&&!i["s-nr"]&&i["s-hn"]!==e["s-hn"]&&(QO(i,r)?(s=ys.find(p=>p.$nodeToRelocate$===i),Mb=!0,i["s-sn"]=i["s-sn"]||r,s?s.$slotRefNode$=e:ys.push({$slotRefNode$:e,$nodeToRelocate$:i}),i["s-sr"]&&ys.map(p=>{QO(p.$nodeToRelocate$,i["s-sn"])&&(s=ys.find(f=>f.$nodeToRelocate$===i),s&&!p.$slotRefNode$&&(p.$slotRefNode$=s.$slotRefNode$))})):ys.some(p=>p.$nodeToRelocate$===i)||ys.push({$nodeToRelocate$:i}));e.nodeType===1&&x6(e)}},QO=(t,e)=>t.nodeType===1?t.getAttribute("slot")===null&&e===""||t.getAttribute("slot")===e:t["s-sn"]===e?!0:e==="",T6=t=>{t.$attrs$&&t.$attrs$.ref&&t.$attrs$.ref(null),t.$children$&&t.$children$.map(T6)},Tae=(t,e)=>{const i=t.$hostElement$,n=t.$cmpMeta$,r=t.$vnode$||Cb(null,null),s=pae(e)?e:y6(null,null,e);gw=i.tagName,n.$attrsToReflect$&&(s.$attrs$=s.$attrs$||{},n.$attrsToReflect$.map(([o,a])=>s.$attrs$[a]=i[o])),s.$tag$=null,s.$flags$|=4,t.$vnode$=s,s.$elm$=r.$elm$=i.shadowRoot||i,hh=i["s-sc"],m6=i["s-cr"],g6=(n.$flags$&1)!==0,Mb=!1,ph(r,s);{if(yi.$flags$|=1,fk){x6(s.$elm$);let o,a,l,u,p,f,m=0;for(;m<ys.length;m++)o=ys[m],a=o.$nodeToRelocate$,a["s-ol"]||(l=xs.createTextNode(""),l["s-nr"]=a,a.parentNode.insertBefore(a["s-ol"]=l,a));for(m=0;m<ys.length;m++)if(o=ys[m],a=o.$nodeToRelocate$,o.$slotRefNode$){for(u=o.$slotRefNode$.parentNode,p=o.$slotRefNode$.nextSibling,l=a["s-ol"];l=l.previousSibling;)if(f=l["s-nr"],f&&f["s-sn"]===a["s-sn"]&&u===f.parentNode&&(f=f.nextSibling,!f||!f["s-nr"])){p=f;break}(!p&&u!==a.parentNode||a.nextSibling!==p)&&a!==p&&(!a["s-hn"]&&a["s-ol"]&&(a["s-hn"]=a["s-ol"].parentNode.nodeName),u.insertBefore(a,p))}else a.nodeType===1&&(a.hidden=!0)}Mb&&$6(s.$elm$),yi.$flags$&=-2,ys.length=0}},Eae=(t,e)=>{},yk=(t,e)=>(t.$flags$|=16,Eae(t,t.$ancestorComponent$),Zae(()=>kae(t,e))),kae=(t,e)=>{const i=t.$hostElement$,n=hd("scheduleUpdate",t.$cmpMeta$.$tagName$),r=i;let s;return e?s=Wh(r,"componentWillLoad"):s=Wh(r,"componentWillUpdate"),s=e3(s,()=>Wh(r,"componentWillRender")),n(),e3(s,()=>Mae(t,r,e))},Mae=async(t,e,i)=>{const n=t.$hostElement$,r=hd("update",t.$cmpMeta$.$tagName$);n["s-rc"],i&&Sae(t);const s=hd("render",t.$cmpMeta$.$tagName$);Cae(t,e,n),s(),r(),Iae(t)},Cae=(t,e,i)=>{try{qO=e,e=e.render&&e.render(),t.$flags$&=-17,t.$flags$|=2,(dh.hasRenderFn||dh.reflect)&&(dh.vdomRender||dh.reflect)&&(dh.hydrateServerSide||Tae(t,e))}catch(a){Zg(a,t.$hostElement$)}return qO=null,null},Iae=t=>{const e=t.$cmpMeta$.$tagName$,i=t.$hostElement$,n=hd("postUpdate",e),r=i;t.$ancestorComponent$,Wh(r,"componentDidRender"),t.$flags$&64?(Wh(r,"componentDidUpdate"),n()):(t.$flags$|=64,Wh(r,"componentDidLoad"),n())},b2e=t=>{{const e=Wg(t),i=e.$hostElement$.isConnected;return i&&(e.$flags$&18)===2&&yk(e,!1),i}},Wh=(t,e,i)=>{if(t&&t[e])try{return t[e](i)}catch(n){Zg(n)}},e3=(t,e)=>t&&t.then?t.then(e):e(),Oae=(t,e)=>Wg(t).$instanceValues$.get(e),Aae=(t,e,i,n)=>{const r=Wg(t),s=t,o=r.$instanceValues$.get(e),a=r.$flags$,l=s;i=yae(i,n.$members$[e][0]);const u=Number.isNaN(o)&&Number.isNaN(i);if(i!==o&&!u){r.$instanceValues$.set(e,i);{if(n.$watchers$&&a&128){const f=n.$watchers$[e];f&&f.map(m=>{try{l[m](i,o,e)}catch(g){Zg(g,s)}})}if((a&18)===2){if(l.componentShouldUpdate&&l.componentShouldUpdate(i,o,e)===!1)return;yk(r,!1)}}}},Lae=(t,e,i)=>{if(e.$members$){t.watchers&&(e.$watchers$=t.watchers);const n=Object.entries(e.$members$),r=t.prototype;n.map(([s,[o]])=>{(o&31||o&32)&&Object.defineProperty(r,s,{get(){return Oae(this,s)},set(a){Aae(this,s,a,e)},configurable:!0,enumerable:!0})});{const s=new Map;r.attributeChangedCallback=function(o,a,l){yi.jmp(()=>{const u=s.get(o);if(this.hasOwnProperty(u))l=this[u],delete this[u];else if(r.hasOwnProperty(u)&&typeof this[u]=="number"&&this[u]==l)return;this[u]=l===null&&typeof this[u]=="boolean"?!1:l})},t.observedAttributes=n.filter(([o,a])=>a[0]&15).map(([o,a])=>{const l=a[1]||o;return s.set(l,o),a[0]&512&&e.$attrsToReflect$.push([o,l]),l})}}return t},Pae=async(t,e,i,n,r)=>{if(!(e.$flags$&32)&&(r=t.constructor,e.$flags$|=32,customElements.whenDefined(i.$tagName$).then(()=>e.$flags$|=128),r.style)){let o=r.style;typeof o!="string"&&(o=o[e.$modeName$=gae(t)]);const a=v6(i,e.$modeName$);if(!Ob.has(a)){const l=hd("registerStyles",i.$tagName$);wae(a,o,!!(i.$flags$&1)),l()}}e.$ancestorComponent$,yk(e,!0)},Rae=t=>{},Nae=t=>{if(!(yi.$flags$&1)){const e=Wg(t),i=e.$cmpMeta$,n=hd("connectedCallback",i.$tagName$);e.$flags$&1?(E6(t,e,i.$listeners$),Rae(e.$lazyInstance$)):(e.$flags$|=1,i.$flags$&12&&Dae(t),i.$members$&&Object.entries(i.$members$).map(([r,[s]])=>{if(s&31&&t.hasOwnProperty(r)){const o=t[r];delete t[r],t[r]=o}}),Pae(t,e,i)),n()}},Dae=t=>{const e=t["s-cr"]=xs.createComment("");e["s-cn"]=!0,t.insertBefore(e,t.firstChild)},Fae=t=>{if(!(yi.$flags$&1)){const e=Wg(t);e.$rmListeners$&&(e.$rmListeners$.map(i=>i()),e.$rmListeners$=void 0)}},w2e=(t,e)=>{const i={$flags$:e[0],$tagName$:e[1]};i.$members$=e[2],i.$listeners$=e[3],i.$watchers$=t.$watchers$,i.$attrsToReflect$=[];const n=t.prototype.connectedCallback,r=t.prototype.disconnectedCallback;return Object.assign(t.prototype,{__registerHost(){Uae(this,i)},connectedCallback(){Nae(this),n&&n.call(this)},disconnectedCallback(){Fae(this),r&&r.call(this)},__attachShadow(){this.attachShadow({mode:"open",delegatesFocus:!!(i.$flags$&16)})}}),t.is=i.$tagName$,Lae(t,i)},_2e=(t,e)=>e,E6=(t,e,i,n)=>{i&&i.map(([r,s,o])=>{const a=jae(t,r),l=zae(e,o),u=Gae(r);yi.ael(a,s,l,u),(e.$rmListeners$=e.$rmListeners$||[]).push(()=>yi.rel(a,s,l,u))})},zae=(t,e)=>i=>{try{dh.lazyLoad||t.$hostElement$[e](i)}catch(n){Zg(n)}},jae=(t,e)=>e&4?xs:e&8?Kg:e&16?xs.body:t,Gae=t=>Vae?{passive:(t&1)!==0,capture:(t&2)!==0}:(t&2)!==0,k6=new WeakMap,Wg=t=>k6.get(t),Uae=(t,e)=>{const i={$flags$:0,$hostElement$:t,$cmpMeta$:e,$instanceValues$:new Map};return E6(t,i,e.$listeners$),k6.set(t,i)},t3=(t,e)=>e in t,Zg=(t,e)=>(0,console.error)(t,e),Ob=new Map,Hae=[],Kg=typeof window<"u"?window:{},xs=Kg.document||{head:{}},S2e=Kg.HTMLElement||class{},yi={$flags$:0,$resourcesUrl$:"",jmp:t=>t(),raf:t=>requestAnimationFrame(t),ael:(t,e,i,n)=>t.addEventListener(e,i,n),rel:(t,e,i,n)=>t.removeEventListener(e,i,n),ce:(t,e)=>new CustomEvent(t,e)},Vae=(()=>{let t=!1;try{xs.addEventListener("e",null,Object.defineProperty({},"passive",{get(){t=!0}}))}catch{}return t})(),Bae=t=>Promise.resolve(t),qae=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),y2=[],M6=[],C6=(t,e)=>i=>{t.push(i),g2||(g2=!0,e&&yi.$flags$&4?Wae(v2):yi.raf(v2))},i3=t=>{for(let e=0;e<t.length;e++)try{t[e](performance.now())}catch(i){Zg(i)}t.length=0},v2=()=>{i3(y2),i3(M6),(g2=y2.length>0)&&yi.raf(v2)},Wae=t=>Bae().then(t),$2e=C6(y2,!1),Zae=C6(M6,!0);/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v1.11.0
 */const I6="calcite-mode-auto",O6="calcite-mode-dark",Kae="calcite-mode-light",x2e={autoMode:I6,darkMode:O6,lightMode:Kae,rtl:"calcite--rtl",calciteAnimate:"calcite-animate",calciteAnimateIn:"calcite-animate__in",calciteAnimateInUp:"calcite-animate__in-up",calciteAnimateInDown:"calcite-animate__in-down",calciteAnimateInRight:"calcite-animate__in-right",calciteAnimateInLeft:"calcite-animate__in-left",calciteAnimateInScale:"calcite-animate__in-scale"};/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var A6=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Ab=A6.join(","),L6=typeof Element>"u",pd=L6?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Lb=!L6&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},Pb=function t(e,i){var n;i===void 0&&(i=!0);var r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"inert"),s=r===""||r==="true",o=s||i&&e&&t(e.parentNode);return o},Jae=function(e){var i,n=e==null||(i=e.getAttribute)===null||i===void 0?void 0:i.call(e,"contenteditable");return n===""||n==="true"},P6=function(e,i,n){if(Pb(e))return[];var r=Array.prototype.slice.apply(e.querySelectorAll(Ab));return i&&pd.call(e,Ab)&&r.unshift(e),r=r.filter(n),r},R6=function t(e,i,n){for(var r=[],s=Array.from(e);s.length;){var o=s.shift();if(!Pb(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),l=a.length?a:o.children,u=t(l,!0,n);n.flatten?r.push.apply(r,u):r.push({scopeParent:o,candidates:u})}else{var p=pd.call(o,Ab);p&&n.filter(o)&&(i||!e.includes(o))&&r.push(o);var f=o.shadowRoot||typeof n.getShadowRoot=="function"&&n.getShadowRoot(o),m=!Pb(f,!1)&&(!n.shadowRootFilter||n.shadowRootFilter(o));if(f&&m){var g=t(f===!0?o.children:f.children,!0,n);n.flatten?r.push.apply(r,g):r.push({scopeParent:o,candidates:g})}else s.unshift.apply(s,o.children)}}return r},N6=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},D6=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||Jae(e))&&!N6(e)?0:e.tabIndex},Yae=function(e,i){var n=D6(e);return n<0&&i&&!N6(e)?0:n},Xae=function(e,i){return e.tabIndex===i.tabIndex?e.documentOrder-i.documentOrder:e.tabIndex-i.tabIndex},F6=function(e){return e.tagName==="INPUT"},Qae=function(e){return F6(e)&&e.type==="hidden"},ele=function(e){var i=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(n){return n.tagName==="SUMMARY"});return i},tle=function(e,i){for(var n=0;n<e.length;n++)if(e[n].checked&&e[n].form===i)return e[n]},ile=function(e){if(!e.name)return!0;var i=e.form||Lb(e),n=function(a){return i.querySelectorAll('input[type="radio"][name="'+a+'"]')},r;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")r=n(window.CSS.escape(e.name));else try{r=n(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var s=tle(r,e.form);return!s||s===e},nle=function(e){return F6(e)&&e.type==="radio"},rle=function(e){return nle(e)&&!ile(e)},sle=function(e){var i,n=e&&Lb(e),r=(i=n)===null||i===void 0?void 0:i.host,s=!1;if(n&&n!==e){var o,a,l;for(s=!!((o=r)!==null&&o!==void 0&&(a=o.ownerDocument)!==null&&a!==void 0&&a.contains(r)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!s&&r;){var u,p,f;n=Lb(r),r=(u=n)===null||u===void 0?void 0:u.host,s=!!((p=r)!==null&&p!==void 0&&(f=p.ownerDocument)!==null&&f!==void 0&&f.contains(r))}}return s},n3=function(e){var i=e.getBoundingClientRect(),n=i.width,r=i.height;return n===0&&r===0},ole=function(e,i){var n=i.displayCheck,r=i.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=pd.call(e,"details>summary:first-of-type"),o=s?e.parentElement:e;if(pd.call(o,"details:not([open]) *"))return!0;if(!n||n==="full"||n==="legacy-full"){if(typeof r=="function"){for(var a=e;e;){var l=e.parentElement,u=Lb(e);if(l&&!l.shadowRoot&&r(l)===!0)return n3(e);e.assignedSlot?e=e.assignedSlot:!l&&u!==e.ownerDocument?e=u.host:e=l}e=a}if(sle(e))return!e.getClientRects().length;if(n!=="legacy-full")return!0}else if(n==="non-zero-area")return n3(e);return!1},ale=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var i=e.parentElement;i;){if(i.tagName==="FIELDSET"&&i.disabled){for(var n=0;n<i.children.length;n++){var r=i.children.item(n);if(r.tagName==="LEGEND")return pd.call(i,"fieldset[disabled] *")?!0:!r.contains(e)}return!0}i=i.parentElement}return!1},Rb=function(e,i){return!(i.disabled||Pb(i)||Qae(i)||ole(i,e)||ele(i)||ale(i))},b2=function(e,i){return!(rle(i)||D6(i)<0||!Rb(e,i))},lle=function(e){var i=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(i)||i>=0)},cle=function t(e){var i=[],n=[];return e.forEach(function(r,s){var o=!!r.scopeParent,a=o?r.scopeParent:r,l=Yae(a,o),u=o?t(r.candidates):a;l===0?o?i.push.apply(i,u):i.push(a):n.push({documentOrder:s,tabIndex:l,item:r,isScope:o,content:u})}),n.sort(Xae).reduce(function(r,s){return s.isScope?r.push.apply(r,s.content):r.push(s.content),r},[]).concat(i)},ule=function(e,i){i=i||{};var n;return i.getShadowRoot?n=R6([e],i.includeContainer,{filter:b2.bind(null,i),flatten:!1,getShadowRoot:i.getShadowRoot,shadowRootFilter:lle}):n=P6(e,i.includeContainer,b2.bind(null,i)),cle(n)},T2e=function(e,i){i=i||{};var n;return i.getShadowRoot?n=R6([e],i.includeContainer,{filter:Rb.bind(null,i),flatten:!0,getShadowRoot:i.getShadowRoot}):n=P6(e,i.includeContainer,Rb.bind(null,i)),n},E2e=function(e,i){if(i=i||{},!e)throw new Error("No node provided");return pd.call(e,Ab)===!1?!1:b2(i,e)},dle=A6.concat("iframe").join(","),k2e=function(e,i){if(i=i||{},!e)throw new Error("No node provided");return pd.call(e,dle)===!1?!1:Rb(i,e)};const hle={getShadowRoot:!0};function M2e(t){const e="dir",i=`[${e}]`,n=ple(t,i);return n?n.getAttribute(e):"ltr"}function vk(t){return t.getRootNode()}function C2e(t){const e=vk(t);return"host"in e?e:null}function z6(t){return t.host||null}function I2e(t,{selector:e,id:i}){function n(r){if(!r)return null;r.assignedSlot&&(r=r.assignedSlot);const s=vk(r),o=i?"getElementById"in s?s.getElementById(i):null:e?s.querySelector(e):null,a=z6(s);return o||(a?n(a):null)}return n(t)}function ple(t,e){function i(n){return n?n.closest(e)||i(z6(vk(n))):null}return i(t)}function fle(t,e){return j6(t,e)}function j6(t,e){if(!t)return;const i=e(t);if(i!==void 0)return i;const{parentNode:n}=t;return j6(n instanceof ShadowRoot?n.host:n,e)}function O2e(t,e){return!!fle(e,i=>i===t?!0:void 0)}function mle(t){return typeof(t==null?void 0:t.setFocus)=="function"}async function A2e(t){if(t)return mle(t)?t.setFocus():t.focus()}function L2e(t){t&&(ule(t,hle)[0]||t).focus()}const ug=":not([slot])";function P2e(t,e,i){e&&!Array.isArray(e)&&typeof e!="string"&&(i=e,e=null);const n=e?Array.isArray(e)?e.map(r=>`[slot="${r}"]`).join(","):`[slot="${e}"]`:ug;return i!=null&&i.all?gle(t,n,i):yle(t,n,i)}function G6(t,e){return t?Array.from(t.children||[]).filter(i=>i==null?void 0:i.matches(e)):[]}function gle(t,e,i){let n=e===ug?G6(t,ug):Array.from(t.querySelectorAll(e));n=i&&i.direct===!1?n:n.filter(s=>s.parentElement===t),n=i!=null&&i.matches?n.filter(s=>s==null?void 0:s.matches(i.matches)):n;const r=i==null?void 0:i.selector;return r?n.map(s=>Array.from(s.querySelectorAll(r))).reduce((s,o)=>[...s,...o],[]).filter(s=>!!s):n}function yle(t,e,i){let n=e===ug?G6(t,ug)[0]||null:t.querySelector(e);n=i&&i.direct===!1||(n==null?void 0:n.parentElement)===t?n:null,n=i!=null&&i.matches?n!=null&&n.matches(i.matches)?n:null:n;const r=i==null?void 0:i.selector;return r?n==null?void 0:n.querySelector(r):n}function R2e(t,e,i){if(typeof e=="string"&&e!=="")return e;if(e==="")return t[i]}function N2e(t){return(!!t).toString()}function D2e(t){return _le(t)||ble(t)}function vle(t){return wle(t).filter(e=>e.nodeType===Node.TEXT_NODE).map(e=>e.textContent).join("").trim()}function ble(t){return!!vle(t)}function wle(t){return t.target.assignedNodes({flatten:!0})}function _le(t){return!!Sle(t).length}function Sle(t){return t.target.assignedElements({flatten:!0})}function F2e(t){return!!(t.isPrimary&&t.button===0)}function z2e(t,e){if(t.parentNode!==e.parentNode)return!1;const i=Array.from(t.parentNode.children);return i.indexOf(t)<i.indexOf(e)}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v1.11.0
 */function r3(){const{classList:t}=document.body,e=window.matchMedia("(prefers-color-scheme: dark)").matches,i=()=>t.contains(O6)||t.contains(I6)&&e?"dark":"light",n=o=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:o}})),r=o=>{s!==o&&n(o),s=o};let s=i();n(s),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o=>r(o.matches?"dark":"light")),new MutationObserver(()=>r(i())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}function $le(){typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document&&(document.readyState==="interactive"?r3():document.addEventListener("DOMContentLoaded",()=>r3(),{once:!0}))}const xle=$le;xle();let U6;function Tle(){try{oae(".")}catch{aae($r(Ge(U6)))}}function Cc(t){var i;const e=[];for(const n of Object.keys(t))customElements.get(`calcite-${n}`)||e.push((i=t[n])==null?void 0:i.call(t));return e.length>0?Promise.all(e):null}U6="components/assets";const H6=Symbol("widget"),V6=Symbol("widget-test-data"),Ele=[],kle={},Nb=new WeakMap;function B6(t,e){let i=e.children;if(i!=null&&i.length)for(let r=0;r<i.length;++r)i[r]=B6(t,i[r]);else i=Ele;const n=e.vnodeSelector;if(Db(n)){const r=e.properties||kle,s=r.key||n;return{vnodeSelector:"div",properties:{key:s,afterCreate:Mle,afterUpdate:Cle,afterRemoved:q6,parentWidget:t,widgetConstructor:n,widgetProperties:{...r,key:s,children:i}},children:void 0,text:void 0,domNode:null}}return e}function Mle(t,e,i,{parentWidget:n,widgetConstructor:r,widgetProperties:s}){var a;const o=new r(s);o.container=t,Nb.set(t,o),(a=o.afterCreate)==null||a.call(o,o,t),n.addHandles(Ye(()=>q6(t))),queueMicrotask(()=>{o[V6].projector.renderNow()})}function Cle(t,e,i,{widgetProperties:n}){var s;const r=Nb.get(t);r&&(r.set(n),(s=r.afterUpdate)==null||s.call(r,r,t))}function q6(t){var i;const e=Nb.get(t);e&&((i=e.afterRemoved)==null||i.call(e,e,t),e.destroy(),Nb.delete(t))}function Db(t){return typeof t=="function"&&t[H6]}const ot={arrowDown:"esri-icon-arrow-down",arrowUp:"esri-icon-arrow-up",basemap:"esri-icon-basemap",bookmark:"esri-icon-bookmark",calendar:"esri-icon-calendar",checkMark:"esri-icon-check-mark",checkboxUnchecked:"esri-icon-checkbox-unchecked",close:"esri-icon-close",collapse:"esri-icon-collapse",defaultAction:"esri-icon-default-action",description:"esri-icon-description",directions:"esri-icon-directions",dockBottom:"esri-icon-dock-bottom",dockLeft:"esri-icon-dock-left",dockRight:"esri-icon-dock-right",down:"esri-icon-down",downArrow:"esri-icon-down-arrow",download:"esri-icon-download",dragHorizontal:"esri-icon-drag-horizontal",dragVertical:"esri-icon-drag-vertical",duplicate:"esri-icon-duplicate",edit:"esri-icon-edit",elevationProfile:"esri-icon-elevation-profile",environmentSettings:"esri-icon-environment-settings",erase:"esri-icon-erase",error:"esri-icon-error",expand:"esri-icon-expand",fontFallbackText:"esri-icon-font-fallback-text",forward:"esri-icon-forward",gear:"esri-icon-gear",handleHorizontal:"esri-icon-handle-horizontal",handleVertical:"esri-icon-handle-vertical",home:"esri-icon-home",icon:"esri-icon",launchLinkExternal:"esri-icon-launch-link-external",layerList:"esri-icon-layer-list",layers:"esri-icon-layers",left:"esri-icon-left",leftArrows:"esri-icon-left-arrow",leftTriangleArrow:"esri-icon-left-triangle-arrow",lineOfSight:"esri-icon-line-of-sight",link:"esri-icon-link",linkExternal:"esri-icon-link-external",linkHorizontal:"esri-icon-link-horizontal",loadingIndicator:"esri-icon-loading-indicator",locate:"esri-icon-locate",locateCircled:"esri-icon-locate-circled",locked:"esri-icon-locked",mapPin:"esri-icon-map-pin",maximize:"esri-icon-maximize",measure:"esri-icon-measure",measureArea:"esri-icon-measure-area",measureBuildingHeightShadow:"esri-icon-measure-building-height-shadow",measureLine:"esri-icon-measure-line",menu:"esri-icon-menu",minimize:"esri-icon-minimize",minus:"esri-icon-minus",nonVisible:"esri-icon-non-visible",northNavigation:"esri-icon-north-navigation",noticeTriangle:"esri-icon-notice-triangle",organization:"esri-icon-organization",pan:"esri-icon-pan",pan2:"esri-icon-pan2",partlyCloudy:"esri-icon-partly-cloudy",pause:"esri-icon-pause",play:"esri-icon-play",playCircled:"esri-icon-play-circled",plus:"esri-icon-plus",polyline:"esri-icon-polyline",printer:"esri-icon-printer",radioChecked:"esri-icon-radio-checked",radioUnchecked:"esri-icon-radio-unchecked",refresh:"esri-icon-refresh",reverse:"esri-icon-reverse",right:"esri-icon-right",rightArrow:"esri-icon-right-arrow",rightTriangleArrow:"esri-icon-right-triangle-arrow",rotate:"esri-icon-rotate",save:"esri-icon-save",search:"esri-icon-search",settings2:"esri-icon-settings2",slice:"esri-icon-slice",swap:"esri-icon-swap",table:"esri-icon-table",timeClock:"esri-icon-time-clock",tracking:"esri-icon-tracking",trash:"esri-icon-trash",unlockedLinkHorizontal:"esri-icon-unlocked-link-horizontal",up:"esri-icon-up",upArrow:"esri-icon-up-arrow",upDownArrows:"esri-icon-up-down-arrows",urbanModel:"esri-icon-urban-model",vertexGps:"esri-icon-vertex-gps",visible:"esri-icon-visible",zoomInFixed:"esri-icon-zoom-in-fixed",zoomInMagnifyingGlass:"esri-icon-zoom-in-magnifying-glass",zoomOutFixed:"esri-icon-zoom-out-fixed",zoomToObject:"esri-icon-zoom-to-object"},s3=new Set;function Ile(t){s3.add(t),t.finally(()=>s3.delete(t))}var W6;const Ole="esri.widgets.Widget";let Ale=0;const Lle={widgetIcon:ot.checkboxUnchecked};function Z6(t,e){for(const i in e)t[i]!=null&&(typeof t[i]=="object"&&typeof e[i]=="object"?Z6(t[i],e==null?void 0:e[i]):t[i]=e[i]);return t}const Ple=sae({postProcessProjectionOptions(t){const e=t.eventHandlerInterceptor,i=/capture$/i;t.eventHandlerInterceptor=(n,r,s,o)=>{const a=e==null?void 0:e(n,r,s,o),l=i.test(n);if(!((n=n.replace(i,"")).toLowerCase()in s)||l){const u=n[2].toLowerCase()+n.slice(3),p=g=>a==null?void 0:a.call(s,g);s.addEventListener(u,p,l);const f=()=>s.removeEventListener(u,p,l),m=o.afterRemoved;o.afterRemoved=g=>{m==null||m(g),f()}}return a}},handleInterceptedEvent(t,e,i,n){const{eventPhase:r,type:s}=n,o=r===Event.CAPTURING_PHASE;let a=`on${s}${o?"capture":""}`;const l=e.properties;(l&&a in l||(a=`on${s[0].toUpperCase()}${s.slice(1)}${o?"Capture":""}`,l&&a in l))&&(K5(),t.scheduleRender(),l[a].call(l.bind||i,n))}});let K_=!1,qt=class extends J1(An.EventedAccessor){constructor(e,i){super(e,i),this._attached=!1,this._projector=Ple,this._readyForTrueRender=!1,this.iconClass=Lle.widgetIcon,this.icon=null,this.key=this,this._loadLocale=oP(async()=>{var a;if((a=this._messageBundleProps)!=null&&a.length){const l=await Promise.allSettled(this._messageBundleProps.map(async({bundlePath:u,propertyName:p})=>{if(this.destroyed)return;let f=await H1(u);this.uiStrings&&Object.keys(this.uiStrings)&&(f=Z6(q(f),this.uiStrings)),this[p]=f}));if(this.destroyed)return;for(const u of l)u.status==="rejected"&&J.getLogger(this).error("widget-intl:locale-error",this.declaredClass,u.reason)}await this.loadLocale()}),Tle();const n="esri-widget-uid-"+pk(),r=this.render.bind(this);this._trackingTarget=new $1(()=>this.scheduleRender());const s=()=>{var f;if(!this._readyForTrueRender||this.destroyed)return null;const a=r();let{properties:l}=a;l||(a.properties=l={});const{key:u}=l;if(u||(l.key=n),Db(a.vnodeSelector)){if(!this.visible)return{vnodeSelector:"div",properties:{key:`${n}-hidden`,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0}}else this.visible?l.styles||(l.styles={}):(l.class="",l.styles={display:"none"}),l.styles.display||(l.styles.display="");let p=0;return(f=a.children)==null||f.forEach(m=>{if(Db(m.vnodeSelector))return;let{properties:g}=m;g||(m.properties=g={}),g.key||(g.key=`${this.id}--${p++}`)}),B6(this,a)};this.render=()=>{if(K_)return s();let a=LY(this)??null;if(a)return a;this._trackingTarget.clear(),K_=!0;try{a=za(this._trackingTarget,s)}catch(l){throw console.error(l),l}finally{K_=!1}return a&&PY(this,a),a};const o=this.beforeFirstRender();o?this._resourcesFetch=o.then(()=>{this._readyForTrueRender=!0,this._postInitialize()}):(this._resourcesFetch=Promise.resolve().then(()=>{this._postInitialize()}),this._readyForTrueRender=!0),this.addResolvingPromise(this._resourcesFetch),Ile(this._resourcesFetch)}normalizeCtorArgs(e,i){const n={...e};return i&&(n.container=i),n}postInitialize(){}beforeFirstRender(){var i;const e=this.loadDependencies();return(i=this._messageBundleProps)!=null&&i.length||e?Promise.all([e,this._loadLocale()]).then(()=>{}).catch(FM):null}loadDependencies(){return null}loadLocale(){return null}destroy(){this.destroyed||(Oe(this._trackingTarget),Oe(this.viewModel),this._detach(this.container),this._set("container",null),this._emitter.clear(),this.render=()=>null,this._projector=null,v_(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return TE(e)}get domNode(){return this.container}set domNode(e){this.container=e}get id(){var e;return this._get("id")||((e=this.container)==null?void 0:e.id)||Date.now().toString(16)+"-widget-"+Ale++}set id(e){e&&this._set("id",e)}get label(){return this.declaredClass.split(".").pop()}set label(e){this._overrideIfSome("label",e)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(e){this._set("visible",e)}get[(W6=H6,V6)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(v_(this),this._projector.scheduleRender())}own(e){DL(J.getLogger(this.declaredClass),"`Widget.own()` is deprecated in favor of Widget.addHandles()'",{replacement:"Widget.addHandles()",version:"4.28"}),this.addHandles(e)}classes(...e){return J5.apply(this,e)}renderNow(){v_(this),this._projector.renderNow()}_postInitialize(){var i;if(this.destroyed)return;this.scheduleRender(),(i=this._delegatedEventNames)!=null&&i.length&&this.addHandles(Z(()=>this.viewModel,(n,r)=>{r&&this.removeHandles("delegated-events"),n&&w1(n)&&this.addHandles(this._delegatedEventNames.map(s=>Sg(n,s,o=>{this.emit(s,o)})),"delegated-events")},di)),this.postInitialize();const e=async()=>{await this._loadLocale().catch(FM),this.scheduleRender()};this.addHandles([N1(e),Z(()=>this.uiStrings,e),On(()=>this.container,n=>{this.destroyed||this._attach(n)},{initial:!0,once:!0})])}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){var i;this._attached&&(this._projector.detach(this.render),this._attached=!1),(i=e==null?void 0:e.parentNode)==null||i.removeChild(e)}};qt[W6]=!0,c([d()],qt.prototype,"_readyForTrueRender",void 0),c([d({value:null})],qt.prototype,"container",null),c([zt("container")],qt.prototype,"castContainer",null),c([d()],qt.prototype,"iconClass",void 0),c([d()],qt.prototype,"icon",void 0),c([d()],qt.prototype,"id",null),c([d()],qt.prototype,"label",null),c([d()],qt.prototype,"renderable",null),c([d()],qt.prototype,"uiStrings",void 0),c([d()],qt.prototype,"viewModel",void 0),c([d({value:!0})],qt.prototype,"visible",null),c([d()],qt.prototype,"key",void 0),c([d()],qt.prototype,"children",void 0),c([d()],qt.prototype,"afterCreate",void 0),c([d()],qt.prototype,"afterUpdate",void 0),c([d()],qt.prototype,"afterRemoved",void 0),qt=c([S(Ole)],qt);const Ln=qt;function o3(t,e){return t&&"copyright"in t&&(!e||typeof t.originOf=="function"&&t.originOf("copyright")==="user")}function Rle(t,e){return t.length!==e.length||t.some((i,n)=>i.text!==e[n].text)}function r0(t,e,i){!i||!e||t.find(n=>n.layerView===e&&n.text===i)||t.push({text:i,layerView:e})}function Nle(t){return t.type==="bing-maps"}const ul=[];let fh=class extends X{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.removeHandles("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new te,this.view=null,this._allLayerViewsChange=i=>{var r;this.removeHandles("suspension");const n=(r=this.view)==null?void 0:r.allLayerViews;n&&this.addHandles(n.map(s=>Z(()=>{var o;return[s.suspended,(o=s.layer)==null?void 0:o.attributionVisible]},()=>this._updateAttributionItems())).toArray(),"suspension"),i!=null&&i.removed&&i.removed.forEach(s=>{this._pendingAttributions.delete(s),this._fetchedAttributionData.delete(s)}),this._updateAttributionItems()},this.addHandles([Lr(()=>{var i;return(i=this.view)==null?void 0:i.allLayerViews},"change",i=>this._allLayerViewsChange(i),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),On(()=>{var i;return((i=this.view)==null?void 0:i.stationary)===!0},()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){var e;return(e=this.view)!=null&&e.ready?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const e=this.view,i=e==null?void 0:e.allLayerViews;ul.length=0,e&&i?(i.forEach(n=>{var o,a;if(n.suspended||!((o=n.layer)!=null&&o.attributionVisible))return;const r=n.layer;if(o3(r,"user"))return void r0(ul,n,r.copyright);if(r.hasAttributionData){if(this._fetchedAttributionData.has(n)){const l=this._fetchedAttributionData.get(n);return void(l?r0(ul,n,this._getDynamicAttribution(l,e,r)):o3(r)&&r0(ul,n,r.copyright))}return void this._fetchAttributionData(n)}const s="portalItem"in r?(a=r.portalItem)==null?void 0:a.accessInformation:void 0;r0(ul,n,s||r.copyright)}),Rle(this.items,ul)&&(this.items.removeAll(),this.items.addMany(ul)),ul.length=0,this.notifyChange("state")):this._clear()}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const i=await aN(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const n=i.ok?this._createContributionIndex(i.value,Nle(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,n)}this._updateAttributionItems()}_createContributionIndex(e,i){const n=e.contributors,r={};if(!n)return r;for(let s=0;s<n.length;s++){const o=n[s],a=o.coverageAreas;if(!a)return;for(const l of a){const u=l.bbox,p=l.zoomMin-(i&&l.zoomMin?1:0),f=l.zoomMax-(i&&l.zoomMax?1:0),m=new Ve({xmin:u[1],ymin:u[0],xmax:u[3],ymax:u[2],spatialReference:xe.WGS84}),g={extent:Na(m),attribution:o.attribution||"",score:l.score!=null?l.score:100,id:s};for(let y=p;y<=f;y++)r[y]??(r[y]=[]),r[y].push(g)}}return r.maxKey=Math.max.apply(null,Object.keys(r)),r}_getDynamicAttribution(e,i,n){var p;const{extent:r,scale:s}=i;let o=((p=n.tileInfo)==null?void 0:p.scaleToZoom(s))??0;if(o=Math.min(e.maxKey??0,Math.round(o)),!r||o==null||o<=-1)return"";const a=e[o],l=I1(r.center.clone().normalize(),i.spatialReference),u=new Set;return a?a.filter(f=>{const m=f.id,g=!u.has(m)&&l&&f.extent&&A1(f.extent,l);return g&&u.add(m),g}).sort((f,m)=>m.score-f.score||f.objectId-m.objectId).map(f=>f.attribution).join(", "):""}};c([d({readOnly:!0,type:te})],fh.prototype,"items",void 0),c([d({readOnly:!0})],fh.prototype,"state",null),c([d()],fh.prototype,"view",void 0),fh=c([S("esri.widgets.Attribution.AttributionViewModel")],fh);const K6=fh,pe={anchor:"esri-widget__anchor",anchorDisabled:"esri-widget__anchor--disabled",button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",disabled:"esri-disabled",disabledElement:"esri-disabled-element",empty:"esri-widget__content--empty",emptyIllustration:"esri-widget__content-illustration--empty",heading:"esri-widget__heading",hidden:"esri-hidden",input:"esri-input",interactive:"esri-interactive",loader:"esri-widget__loader",loaderAnimation:"esri-widget__loader-animation",loaderText:"esri-widget__loader-text",menu:"esri-menu",menuHeader:"esri-menu__header",menuItem:"esri-menu__list-item",menuItemActive:"esri-menu__list-item--active",menuItemFocus:"esri-menu__list-item--focus",menuList:"esri-menu__list",noBookmarksIcon:"esri-widget__no-bookmark-icon",panel:"esri-widget--panel",panelHeightOnly:"esri-widget--panel-height-only",primaryTick:"primary-tick",primaryTickAmPm:"primary-tick__ampm",primaryTickLabel:"primary-tick__label",rotating:"esri-rotating",secondaryTick:"secondary-tick",select:"esri-select",table:"esri-widget__table",widget:"esri-widget",widgetButton:"esri-widget--button",widgetButtonActive:"esri-widget--button-active",widgetDisabled:"esri-widget--disabled"};function fd(){return function(t,e){if(!t[e])throw new TypeError(`Cannot auto bind undefined function '${String(e)}'`);return{value:Fle(t[e])}}}function Dle(t){const e=t==null?void 0:t.type;return t instanceof KeyboardEvent||e==="keyup"||e==="keydown"||e==="keypress"}function Fle(t){return function(e,...i){Dle(e)?X5(e.key)&&(e.preventDefault(),e.stopPropagation(),e.target.click()):t.call(this,e,...i)}}function nn(t){return(e,i)=>{e.hasOwnProperty("_messageBundleProps")||(e._messageBundleProps=e._messageBundleProps?e._messageBundleProps.slice():[]),e._messageBundleProps.push({bundlePath:t,propertyName:i})}}var zle=function(t){return{vnodeSelector:"",properties:void 0,children:void 0,text:t.toString(),domNode:null}},J6=function(t,e){for(var i=0,n=t.length;i<n;i++){var r=t[i];Array.isArray(r)?J6(r,e):r!=null&&r!==!1&&(r.hasOwnProperty("vnodeSelector")||(r=zle(r)),e.push(r))}},jle=function(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];if(i.length===1&&typeof i[0]=="string")return{vnodeSelector:t,properties:e||void 0,children:void 0,text:i[0],domNode:null};var r=[];return J6(i,r),{vnodeSelector:t,properties:e||void 0,children:r,text:void 0,domNode:null}};function A(t,e,...i){return typeof t!="function"||Db(t)?jle(t,e,...i):t(e,...i)}function Gle(...t){return t}const Vd="esri-attribution",Gc={base:Vd,poweredBy:`${Vd}__powered-by`,sources:`${Vd}__sources`,open:`${Vd}--open`,sourcesOpen:`${Vd}__sources--open`,link:`${Vd}__link`,widgetIcon:ot.description};let Li=class extends Ln{constructor(e,i){super(e,i),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(n=>n.forEach(({target:r})=>this._checkSourceTextOverflow(r))),this.iconClass=Gc.widgetIcon,this.icon=null,this.itemDelimiter=" | ",this.messages=null,this.viewModel=new K6}initialize(){this.addHandles(Lr(()=>{var e;return(e=this.viewModel)==null?void 0:e.items},"change",()=>this.scheduleRender()))}destroy(){var e;(e=this._resizeObserver)==null||e.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((e,i)=>(e.includes(i.text)||e.push(i.text),e),[]).join(this.itemDelimiter)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e={[Gc.open]:this._isOpen};return A("div",{bind:this,class:this.classes(Gc.base,pe.widget,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return A("div",{class:Gc.poweredBy},"Powered by"," ",A("a",{class:Gc.link,href:"http://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}_renderSourcesNode(){const e=this._isOpen,i=this._isInteractive,n=i?0:void 0,{attributionText:r}=this,s={[Gc.sourcesOpen]:e,[pe.interactive]:i};return A("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(Gc.sources,s),innerHTML:r,tabIndex:n})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._resizeObserver.observe(e)}_checkSourceTextOverflow(e){let i=!1;const{clientHeight:n,clientWidth:r,scrollWidth:s}=e,o=s>r,a=this._attributionTextOverflowed!==o;if(this._attributionTextOverflowed=o,a&&(i=!0),this._isOpen){const l=n<this._prevSourceNodeHeight;this._prevSourceNodeHeight=n,l&&(this._isOpen=!1,i=!0)}i&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};c([d()],Li.prototype,"_isOpen",void 0),c([d()],Li.prototype,"_isInteractive",null),c([d()],Li.prototype,"_attributionTextOverflowed",void 0),c([d()],Li.prototype,"_prevSourceNodeHeight",void 0),c([d({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],Li.prototype,"attributionText",null),c([d()],Li.prototype,"iconClass",void 0),c([d()],Li.prototype,"icon",void 0),c([d()],Li.prototype,"itemDelimiter",void 0),c([d()],Li.prototype,"label",null),c([d(),nn("esri/widgets/Attribution/t9n/Attribution")],Li.prototype,"messages",void 0),c([d()],Li.prototype,"view",null),c([d({type:K6})],Li.prototype,"viewModel",void 0),c([fd()],Li.prototype,"_toggleState",null),Li=c([S("esri.widgets.Attribution")],Li);const Ule=Li;function Hle(t){var e,i;return((e=t==null?void 0:t.spatialReference)==null?void 0:e.isWebMercator)||((i=t==null?void 0:t.spatialReference)==null?void 0:i.isGeographic)||!1}const Y6=t=>{let e=class extends t{constructor(...i){super(...i),this.goToOverride=null,this.view=null}callGoTo(i){const{view:n}=this;return GL(n),this.goToOverride?this.goToOverride(n,i):n.goTo(i.target,i.options)}};return c([d()],e.prototype,"goToOverride",void 0),c([d()],e.prototype,"view",void 0),e=c([S("esri.widgets.support.GoTo")],e),e},Vle="esri.widgets.CompassViewModel";let yu=class extends Y6(X){constructor(e){super(e),this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this.addHandles(Z(()=>this.view,this._updateRotationWatcher,De))}destroy(){this.view=null}get canShowNorth(){return Hle(this.view)}get state(){var e;return!((e=this.view)!=null&&e.ready)||this.view.type==="2d"&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}reset(){var i,n;if(!((i=this.view)!=null&&i.ready))return;const e={};((n=this.view)==null?void 0:n.type)==="2d"?e.rotation=0:e.heading=0,this.callGoTo({target:e})}_updateForRotation(e){e!=null&&(this.orientation={z:e})}_updateForCamera(e){if(!e)return;const i=-e.heading;this.orientation={x:0,y:0,z:i}}_updateRotationWatcher(e){this.removeAllHandles(),e&&this.addHandles(e.type==="2d"?Z(()=>e==null?void 0:e.rotation,this._updateForRotation,De):Z(()=>e==null?void 0:e.camera,this._updateForCamera,De))}};c([d({readOnly:!0})],yu.prototype,"canShowNorth",null),c([d()],yu.prototype,"orientation",void 0),c([d({readOnly:!0})],yu.prototype,"state",null),c([d()],yu.prototype,"view",void 0),yu=c([S(Vle)],yu);const X6=yu,a3="esri-compass",J_={base:a3,widgetIcon:ot.locateCircled,iconContainer:`${a3}__icon-container`};let oo=class extends Ln{constructor(e,i){super(e,i),this.iconClass=J_.widgetIcon,this.icon=null,this.messages=null,this.viewModel=new X6,this._reset=()=>{this.viewModel.reset()},this._toRotationTransform=n=>({transform:`rotateZ(${n.z}deg)`})}loadDependencies(){return Cc({button:()=>V(()=>import("./calcite-button-3vurRxLj.js"),__vite__mapDeps([266,267,268,269,270,271,272,273,274,275,276,277]),import.meta.url),icon:()=>V(()=>import("./calcite-icon-uORPeLj9.js"),__vite__mapDeps([278,275,273]),import.meta.url)})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:i}=this.viewModel,n=i==="rotation"?"arrow-up":"compass-needle",{messages:r}=this;return A("div",{class:this.classes(J_.base,pe.widget)},A("calcite-button",{"aria-label":r.reset,class:pe.widgetButton,disabled:i==="disabled",kind:"neutral",onclick:this._reset,round:!0,scale:"s",title:r.reset},A("div",{"aria-hidden":"true",class:J_.iconContainer,title:r.reset},A("calcite-icon",{icon:n,scale:"m",styles:this._toRotationTransform(e)}))))}};c([d()],oo.prototype,"goToOverride",null),c([d()],oo.prototype,"iconClass",void 0),c([d()],oo.prototype,"icon",void 0),c([d()],oo.prototype,"label",null),c([d(),nn("esri/widgets/Compass/t9n/Compass")],oo.prototype,"messages",void 0),c([d()],oo.prototype,"view",null),c([d({type:X6})],oo.prototype,"viewModel",void 0),oo=c([S("esri.widgets.Compass")],oo);const Ble=oo,Bd="esri-navigation-toggle",Jo={base:Bd,widgetIcon:ot.pan2,button:`${Bd}__button`,activeButton:`${Bd}__button--active`,panButton:`${Bd}__button--pan`,rotateButton:`${Bd}__button--rotate`,isLayoutHorizontal:`${Bd}--horizontal`};let mh=class extends X{constructor(e){super(e),this.navigationMode="pan",this.view=null}initialize(){this.addHandles(On(()=>{var e;return(e=this.view)==null?void 0:e.inputManager},()=>this._setNavigationMode()))}destroy(){this.view=null}get state(){var e,i;return(e=this.view)!=null&&e.ready&&((i=this.view)==null?void 0:i.type)==="3d"?"ready":"disabled"}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate",this._setNavigationMode())}_setNavigationMode(){var i;const e=(i=this.view)==null?void 0:i.inputManager;e&&(e.primaryDragAction=this.navigationMode==="pan"?"pan":"rotate")}};c([d({readOnly:!0})],mh.prototype,"state",null),c([d()],mh.prototype,"navigationMode",void 0),c([d()],mh.prototype,"view",void 0),mh=c([S("esri.widgets.NavigationToggleViewModel")],mh);const Q6=mh;let rs=class extends Ln{constructor(e,i){super(e,i),this.iconClass=Jo.widgetIcon,this.icon=null,this.messages=null,this.viewModel=new Q6}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}toggle(){return this.viewModel.toggle()}render(){var l,u;const e=((l=this.viewModel)==null?void 0:l.state)==="disabled",i=((u=this.viewModel)==null?void 0:u.navigationMode)==="pan",n={[pe.disabled]:e,[Jo.isLayoutHorizontal]:this.layout==="horizontal"},r={[Jo.activeButton]:i},s={[Jo.activeButton]:!i},o=e?-1:0,a=this.messages.toggle;return A("div",{"aria-label":a,bind:this,class:this.classes(Jo.base,pe.widget,n),onclick:this._toggle,onkeydown:this._toggle,tabIndex:o,title:a},A("div",{class:this.classes(Jo.button,pe.widgetButton,Jo.panButton,r)},A("span",{class:ot.pan})),A("div",{class:this.classes(Jo.button,pe.widgetButton,Jo.rotateButton,s)},A("span",{class:ot.rotate})))}_toggle(){this.toggle()}};c([d()],rs.prototype,"iconClass",void 0),c([d()],rs.prototype,"icon",void 0),c([d()],rs.prototype,"label",null),c([d({value:"vertical"})],rs.prototype,"layout",null),c([d(),nn("esri/widgets/NavigationToggle/t9n/NavigationToggle")],rs.prototype,"messages",void 0),c([d()],rs.prototype,"view",null),c([d({type:Q6})],rs.prototype,"viewModel",void 0),c([fd()],rs.prototype,"_toggle",null),rs=c([S("esri.widgets.NavigationToggle")],rs);const qle=rs,ai="esri-feature",Wle={base:ai,container:`${ai}__size-container`,title:`${ai}__title`,main:`${ai}__main-container`,btn:`${ai}__button`,icon:`${ai}__icon`,content:`${ai}__content`,contentNode:`${ai}__content-node`,contentNodeText:`${ai}__content-node--text`,contentElement:`${ai}__content-element`,text:`${ai}__text`,lastEditedInfo:`${ai}__last-edited-info`,fields:`${ai}__fields`,fieldHeader:`${ai}__field-header`,fieldData:`${ai}__field-data`,fieldDataDate:`${ai}__field-data--date`,loadingSpinnerContainer:`${ai}__loading-container`,spinner:`${ai}__loading-spinner`};let ma=class extends Ln{constructor(){super(...arguments),this.enabled=!0,this.iconClass=null,this.icon=null,this.title=""}render(){const e=this.enabled?0:-1,i={[pe.disabled]:!this.enabled,[pe.interactive]:this.enabled};return A("div",{bind:this,class:this.classes(pe.widgetButton,pe.widget,i),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:e,title:this.title},A("span",{"aria-hidden":"true",class:this.classes(Wle.icon,this.iconClass??""),role:"presentation"}),A("span",{class:ot.fontFallbackText},this.title))}_triggerAction(){this.action.call(this)}};c([d()],ma.prototype,"action",void 0),c([d()],ma.prototype,"enabled",void 0),c([d()],ma.prototype,"iconClass",void 0),c([d()],ma.prototype,"icon",void 0),c([d()],ma.prototype,"title",void 0),c([fd()],ma.prototype,"_triggerAction",null),ma=c([S("esri.widgets.IconButton")],ma);const l3=ma;let vu=class extends X{get canZoomIn(){var n,r,s;if(!((n=this.view)==null?void 0:n.ready))return!1;const i=(s=(r=this.view)==null?void 0:r.constraints)==null?void 0:s.effectiveMaxScale;return i===0||this._scale>i}get canZoomOut(){var r;const{view:e}=this;if(!(e==null?void 0:e.ready))return!1;const n=(r=e.constraints)==null?void 0:r.effectiveMinScale;return n===0||this._scale<n}get _scale(){var i,n,r;const e=(n=(i=this.view)==null?void 0:i.animation)==null?void 0:n.target;return(e&&"then"in e||e==null?void 0:e.scale)??((r=this.view)==null?void 0:r.scale)??0}};c([d({readOnly:!0})],vu.prototype,"canZoomIn",null),c([d({readOnly:!0})],vu.prototype,"canZoomOut",null),c([d()],vu.prototype,"view",void 0),c([d()],vu.prototype,"_scale",null),vu=c([S("esri.widgets.Zoom.ZoomConditions2D")],vu);const Zle=vu;let gh=class extends X{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};c([d({readOnly:!0})],gh.prototype,"canZoomIn",null),c([d({readOnly:!0})],gh.prototype,"canZoomOut",null),c([d()],gh.prototype,"view",void 0),gh=c([S("esri.widgets.Zoom.ZoomConditions3D")],gh);const Kle=gh;let Ol=class extends X{constructor(e){super(e)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){var e;return this._zoomConditions!=null&&((e=this._zoomConditions)==null?void 0:e.canZoomOut)}get state(){var e;return(e=this.view)!=null&&e.ready?"ready":"disabled"}set view(e){e?e.type==="2d"?this._zoomConditions=new Zle({view:e}):e.type==="3d"&&(this._zoomConditions=new Kle({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){if(!this.canZoomIn)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomIn():cc(e.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomOut():cc(e.goTo({zoomFactor:.5}))}};c([d()],Ol.prototype,"_zoomConditions",void 0),c([d()],Ol.prototype,"canZoomIn",null),c([d()],Ol.prototype,"canZoomOut",null),c([d({readOnly:!0})],Ol.prototype,"state",null),c([d()],Ol.prototype,"view",null),Ol=c([S("esri.widgets.Zoom.ZoomViewModel")],Ol);const ez=Ol,Y_={base:"esri-zoom",widgetIcon:ot.zoomInMagnifyingGlass,horizontalLayout:"esri-zoom--horizontal"};let ao=class extends Ln{constructor(e,i){super(e,i),this.iconClass=Y_.widgetIcon,this.icon=null,this.messages=null,this.viewModel=new ez}initialize(){this._zoomInButton=new l3({action:this.zoomIn.bind(this),iconClass:ot.plus}),this._zoomOutButton=new l3({action:this.zoomOut.bind(this),iconClass:ot.minus})}destroy(){this._zoomInButton=Oe(this._zoomInButton),this._zoomOutButton=Oe(this._zoomOutButton)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}set view(e){this.viewModel.view=e}get view(){return this.viewModel.view}render(){const e=this.viewModel,i={[Y_.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:n,canZoomOut:r}=e;this._zoomInButton.enabled=n,this._zoomOutButton.enabled=r;const{zoomIn:s,zoomOut:o}=this.messages;return this._zoomInButton.title=s,this._zoomOutButton.title=o,A("div",{class:this.classes(Y_.base,pe.widget,i)},this._zoomInButton.render(),this._zoomOutButton.render())}zoomIn(){return this.viewModel.zoomIn()}zoomOut(){return this.viewModel.zoomOut()}};c([d()],ao.prototype,"iconClass",void 0),c([d()],ao.prototype,"icon",void 0),c([d()],ao.prototype,"label",null),c([d({value:"vertical"})],ao.prototype,"layout",null),c([d(),nn("esri/widgets/Zoom/t9n/Zoom")],ao.prototype,"messages",void 0),c([d()],ao.prototype,"view",null),c([d({type:ez})],ao.prototype,"viewModel",void 0),ao=c([S("esri.widgets.Zoom")],ao);const Jle=ao;function Yle(t){return(t==null?void 0:t.view)!==void 0}let vv=class extends Xoe{constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=i=>{this.components.forEach(n=>{const r=this._find(n),s=r==null?void 0:r.widget;Yle(s)&&(s.view=i)})},this._componentsWatcher=(i,n)=>{this._removeComponents(n),this._addComponents(i),this._adjustPadding(i)}}initialize(){this.addHandles([Z(()=>this.components,this._componentsWatcher,De),Z(()=>this.view,this._updateViewAwareWidgets,De)])}_add(e,i,n,r,s){let o=e;if(typeof e=="string"&&this._defaultPositionLookup[e]){if(this._find(e))return;o=this._createComponent(e)}super._add(o,i,n,r,s)}_removeComponents(e){e.forEach(i=>{const n=this._find(i);n&&(this.remove(n),n.destroy())})}_adjustPadding(e){if(!e.includes("attribution")&&!this._isOverridden("padding")){const{top:i}=this.padding;this.padding=i}}_addComponents(e){this.constructed&&e.forEach(i=>this.add(this._createComponent(i),this._defaultPositionLookup[i]))}_createComponent(e){const i=this._createWidget(e);return new yv({id:e,node:i})}_createWidget(e){const{view:i}=this;switch(e){case"attribution":return new Ule({view:i});case"compass":return new Ble({view:i});case"navigation-toggle":return new qle({view:i});case"zoom":return new Jle({view:i})}}};c([d()],vv.prototype,"components",void 0),vv=c([S("esri.views.ui.DefaultUI")],vv);const tz=vv;let bv=class extends tz{constructor(e){super(e),this.components=["attribution","zoom"]}};c([d()],bv.prototype,"components",void 0),bv=c([S("esri.views.ui.2d.DefaultUI2D")],bv);const iz=bv;var w2;let wv=w2=class extends ie{constructor(t){super(t),this.color=new Me([0,0,0,1])}clone(){return new w2(q({color:this.color}))}};c([d({type:Me,json:{write:!0}})],wv.prototype,"color",void 0),wv=w2=c([S("esri.webmap.background.ColorBackground")],wv);const Xle=wv;let nz,rz,sz,oz,az,lz;async function Qle(){const[,{GraphicsView2D:t,GraphicContainer:e,LabelManager:i,MapViewNavigation:n,MagnifierView2D:r,Stage:s}]=await Promise.all([V(()=>import("./webglDeps-9UdcV4l_.js"),__vite__mapDeps([182,183,184,43,185,186,187]),import.meta.url),V(()=>import("./mapViewDeps-J1uAldVZ.js"),__vite__mapDeps([188,189,190,191,192,193,73,43,184,194,195,196,70,165,153,154,155,32,125,75,76,44,77,197,183,187,198,185,199,200,3,107,106,110,15,12,16,13,74,201,111,72,104,121,105,202,2,203,204,150,151,124,93,84,205,103,182,186,206,207,208,57,209,210,211,108,23,69,212,113,71,29,26,25,213,214,215,216,217,218,20,9,219,220,221,222,82,223]),import.meta.url)]);rz=t,sz=e,oz=i,az=n,lz=r,nz=s}let ge=class extends jJ(mX(tX(sne))){constructor(e){super(e),this._magnifierView=null,this.stage=null,this._resolveWhenReady=[],this.rootLayerViews=new Zm({getCollections:()=>{var i,n;return[(i=this.basemapView)==null?void 0:i.baseLayerViews,this.layerViews,(n=this.basemapView)==null?void 0:n.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.goToManager=new fv({view:this}),this.graphicsView=null,this.stateManager=new Wi({constraints:new FF({view:this})}),this.stationaryManager=new nm,this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this.frameTask=new Mre(this),this.floors=new te,this.highlightOptions=new r6,this.inputManager=new loe({view:this}),this.map=null,this.spatialReferenceLocked=!1,this.timeline=new c6,this.type="2d",this.ui=new iz,this.test={takeScreenshot:async i=>Ioe(this._getScreenshotView(i),i)},this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([Z(()=>this.viewpoint,()=>this.stationaryManager.flip(),hc),this.on("resize",i=>this.stateManager.resize(i.width,i.height)),Z(()=>{var i;return(i=this.animationManager)==null?void 0:i.animation},i=>{this.animation=i})]),tJ()}destroy(){this._set("preconditionsReady",!1),this.frameTask=Oe(this.frameTask),this.goToManager.destroy(),this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new moe(this.featuresTilingScheme)}get constraintsInfo(){var n,r;const e=(n=this.defaultsFromMap)==null?void 0:n.tileInfo,i=this.spatialReference;return{lods:(r=e==null?void 0:e.spatialReference)!=null&&r.equals(i)?e.lods:null,spatialReference:i}}get state(){return this.stateManager.state}get initialExtentRequired(){var a;if(!this.stateManager)return!1;const{scale:e,constraints:i,center:n,viewpoint:r,extent:s}=this;let o=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&((a=this.map.initialViewProperties)!=null&&a.viewpoint))&&!s&&(i!=null&&i.effectiveLODs||(o=-1),(!n||e===0&&o===-1)&&((r==null?void 0:r.targetGeometry)==null||r.targetGeometry.type!=="extent"&&!r.scale))}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const i=this.spatialReference,n=e.targetGeometry;return!!Os(n.spatialReference,i)||T5()}set animation(e){const i=this._get("animation");if(e===i)return;if(i&&i.stop(),!e||e.isFulfilled())return this._set("animation",null),void(this.frameTask.animationInProgress=!1);this._set("animation",e),this.frameTask.animationInProgress=!0;const n=()=>{var r;e===this._get("animation")&&(this._set("animation",null),(r=this.frameTask)==null||r.requestFrame()),this.frameTask.animationInProgress=!1};e.when(n,n)}get background(){return c3(this.map)?this.map.initialViewProperties.background:null}set background(e){this._override("background",e)}get center(){var e;return((e=this.stateManager)==null?void 0:e.center)??null}set center(e){this.stateManager.center=e}get constraints(){var e;return(e=this.stateManager)==null?void 0:e.constraints}set constraints(e){e.view=this;const i=this.stateManager.constraints;this.stateManager.constraints=e,i==null||i.destroy()}get extent(){var e;return((e=this.stateManager)==null?void 0:e.extent)??null}set extent(e){this.stateManager.extent=e}get padding(){var e;return(e=this.stateManager)==null?void 0:e.padding}set padding(e){this.stateManager&&(this.stateManager.padding=e)}get rendering(){var e;return((e=this.stage)==null?void 0:e.renderRequested)??!1}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(e){this.stateManager.resizeAlign=e}get resolution(){return this.stateManager.resolution??0}get rotation(){return this.stateManager.rotation??0}set rotation(e){const{rotationEnabled:i}=this.constraints;this.constraints.rotationEnabled=!0,this.stateManager.rotation=e,this.constraints.rotationEnabled=i}get scale(){var e;return((e=this.stateManager)==null?void 0:e.scale)??0}set scale(e){this.stateManager&&(this.stateManager.scale=e)}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}get updating(){var i,n,r;const e=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(s=>!s.destroyed&&!("layerViews"in s)&&s.updating===!0));if(z("esri-2d-log-updating")){const s=this.allLayerViews.reduce((o,a)=>({...o,[a.layer.id]:!a.destroyed&&!("layerViews"in a)&&a.updating}),{});console.log(`Updating MapView: ${e}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${(i=this.layerViewManager)==null?void 0:i.updating}
-> labelManager.updating: ${(n=this.labelManager)==null?void 0:n.updating}
-> graphicsView.updating: ${(r=this.graphicsView)==null?void 0:r.updating}
-> allLayerViews: ${JSON.stringify(s)}
`)}return e}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(e){this.stateManager.viewpoint=e,this.frameTask.requestFrame()}get zoom(){return this.stateManager.zoom??-1}set zoom(e){this.stateManager.zoom=e}get navigating(){var e;return((e=this.mapViewNavigation)==null?void 0:e.interacting)??!1}goTo(e,i){return this.goToManager.goTo(e,i)}async hitTest(e,i){return goe(this,e,i)}async takeScreenshot(e){return Coe(this._getScreenshotView(e),e)}toMap(e){if(!this.ready)return null;const i=J4(e)?K4(this,e):e;return this.stateManager.toMap(i)}toScreen(e,i){return this.stateManager.toScreen(e,i)}on(e,i,n,r){return this.inputManager&&this.viewEvents.on(e,i,n,r)||super.on(e,i)}hasEventListener(e){return super.hasEventListener(e)||this.viewEvents.hasHandler(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var e,i,n;return this.map&&"initialViewProperties"in this.map&&((i=(e=this.map)==null?void 0:e.initialViewProperties)==null?void 0:i.spatialReference)||((n=this.defaultsFromMap)==null?void 0:n.spatialReference)||null}getDefaultTimeZone(){return c3(this.map)?this.map.initialViewProperties.timeZone:null}hasLayerViewModule(e){return SO.hasLayerViewModule(e)}importLayerView(e){return SO.importLayerView(e)}pixelSizeAt(){return this.ready?this.resolution:(J.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}popupHitTest(e){return this.hitTest(e).then(i=>({...i,mapPoint:this.toMap(e)}))}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}async validate(){let e=Uoe(this.type);if(z("safari")&&z("safari")<9&&(e=new F("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:z("safari")})),e!=null)throw J.getLogger(this).warn("#validate()",e.message),e}loadAsyncDependencies(){return Qle()}_getDefaultViewpoint(){var b;const{constraints:e,initialExtent:i,map:n,padding:r,size:s}=this;if(!e)return null;const o=n&&"initialViewProperties"in n?n.initialViewProperties:void 0,a=this.stateManager.getUserStartupOptions(this.size),l=o==null?void 0:o.viewpoint,u=((b=l==null?void 0:l.targetGeometry)==null?void 0:b.extent)??i,p=u==null?void 0:u.center,f=(l==null?void 0:l.rotation)??0,m=(l==null?void 0:l.scale)||u&&qh(u,[s[0]-r.left-r.right,s[1]-r.top-r.bottom]),g=a.center??p,y=a.rotation??f,v=a.scale??m;return g&&v?new xo({targetGeometry:g,scale:v,rotation:y}):null}_startup(){var a;this.timeline.begin("MapView Startup");const e=this._getDefaultViewpoint();this.stateManager.startup(e,this.size,this.spatialReference,(a=this.defaultsFromMap.extent)==null?void 0:a.center),this.graphics.owner=this;const i=new nz(this.surface,{canvas:this.renderCanvas,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this.stage=i,this._magnifierView=new lz,this._magnifierView.magnifier=this.magnifier;const n=new oz({view:this});this._set("labelManager",n);const r=new kre({view:this});this._set("animationManager",r);const s=new az({view:this,animationManager:r});this._set("mapViewNavigation",s),this._setupSpatialReferenceDependentProperties(),this.addHandles([this.rootLayerViews.on("change",()=>this._updateStageChildren()),i.on("webgl-error",l=>this.fatalError=l.error),Z(()=>this.stationary,l=>i.stationary=l,di),Z(()=>this.background,l=>{i.backgroundColor=l==null?void 0:l.color,this._magnifierView.backgroundColor=l==null?void 0:l.color},di),Z(()=>this.magnifier,l=>this._magnifierView.magnifier=l,di),Z(()=>this.renderingOptions,l=>i.renderingOptions=l,di),Z(()=>this.highlightOptions,l=>i.highlightOptions=l,di),Z(()=>this.state.id,()=>i.state=this.state,di)],"map-view"),this._updateStageChildren();const o=this._resolveWhenReady;this._resolveWhenReady=[],o.forEach(l=>l(this)),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.removeHandles("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this.stage.destroy(),this.stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this.stationaryManager.clear(),this._set("ready",!1),this.stateManager.teardown(),this.animation=null}_updateStageChildren(){this.stage.removeAllChildren(),this.rootLayerViews.forEach(i=>{this.stage.addChild(i.container)});const e=this.graphicsView;this.stage.addChild(e.container),this.stage.addChild(this._magnifierView)}_setupSpatialReferenceDependentProperties(){const e=new Nre(Tm.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const i=new rz({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new sz(e)});this._set("graphicsView",i)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),e.destroy(),this._set("featuresTilingScheme",null)}_getScreenshotView(e){var o;const{allLayerViews:i,padding:n,size:r,stage:s}=this;return{allLayerViews:i,backgroundColor:e!=null&&e.ignoreBackground?null:(o=this.background)==null?void 0:o.color,padding:n,size:r,stage:s}}_spatialReferenceChanged(e){if(this.ready){this.frameTask.stop();for(const i of this.allLayerViews)i.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(e),this.stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const i of this.allLayerViews)i.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}};ge.type="2d",c([d({readOnly:!0})],ge.prototype,"animationManager",void 0),c([d({constructOnly:!0})],ge.prototype,"deactivatedWebGLExtensions",void 0),c([d({constructOnly:!0})],ge.prototype,"debugWebGLExtensions",void 0),c([d({readOnly:!0})],ge.prototype,"featuresTilingScheme",void 0),c([d({readOnly:!0})],ge.prototype,"fullOpacity",void 0),c([d()],ge.prototype,"goToManager",void 0),c([d({readOnly:!0})],ge.prototype,"graphicsTileStore",null),c([d()],ge.prototype,"graphicsView",void 0),c([d()],ge.prototype,"stateManager",void 0),c([d()],ge.prototype,"constraintsInfo",null),c([d({readOnly:!0})],ge.prototype,"state",null),c([d()],ge.prototype,"initialExtentRequired",null),c([d()],ge.prototype,"labelManager",void 0),c([d({readOnly:!0})],ge.prototype,"mapViewNavigation",void 0),c([d({constructOnly:!0})],ge.prototype,"renderCanvas",void 0),c([d()],ge.prototype,"renderingOptions",void 0),c([d({constructOnly:!0})],ge.prototype,"supersampleScreenshotsEnabled",void 0),c([d({readOnly:!0})],ge.prototype,"supportsGround",void 0),c([d()],ge.prototype,"_defaultsFromMapSettings",null),c([d({readOnly:!0})],ge.prototype,"typeSpecificPreconditionsReady",null),c([d()],ge.prototype,"animation",null),c([d({type:Xle})],ge.prototype,"background",null),c([d()],ge.prototype,"center",null),c([d({type:FF})],ge.prototype,"constraints",null),c([d()],ge.prototype,"extent",null),c([d()],ge.prototype,"floors",void 0),c([d({type:r6})],ge.prototype,"highlightOptions",void 0),c([d({readOnly:!0})],ge.prototype,"inputManager",void 0),c([d()],ge.prototype,"map",void 0),c([d()],ge.prototype,"padding",null),c([d({readOnly:!0})],ge.prototype,"rendering",null),c([d()],ge.prototype,"resizeAlign",null),c([d({readOnly:!0})],ge.prototype,"resolution",null),c([d()],ge.prototype,"rotation",null),c([d()],ge.prototype,"scale",null),c([d({constructOnly:!0})],ge.prototype,"spatialReferenceLocked",void 0),c([d()],ge.prototype,"stationary",null),c([d({type:c6,readOnly:!0})],ge.prototype,"timeline",void 0),c([d({readOnly:!0})],ge.prototype,"type",void 0),c([d({readOnly:!0})],ge.prototype,"updating",null),c([d()],ge.prototype,"viewpoint",null),c([d()],ge.prototype,"zoom",null),c([d({readOnly:!0})],ge.prototype,"navigating",null),c([d(),zt(t=>t instanceof tz?t:T1(iz,t))],ge.prototype,"ui",void 0),ge=c([S("esri.views.MapView")],ge);const ece=ge;function c3(t){return(t==null?void 0:t.declaredClass)==="esri.WebMap"}function yw(){return[0,0,0,0]}function tce(t){return[t[0],t[1],t[2],t[3]]}function Ic(t,e,i,n){return[t,e,i,n]}function ice(t,e=yw()){const i=Math.min(4,t.length);for(let n=0;n<i;++n)e[n]=t[n];return e}function cz(t,e){return new Float64Array(t,e,4)}function uz(){return yw()}function dz(){return Ic(1,1,1,1)}function hz(){return Ic(1,0,0,0)}function pz(){return Ic(0,1,0,0)}function fz(){return Ic(0,0,1,0)}function mz(){return Ic(0,0,0,1)}const nce=uz(),rce=dz(),sce=hz(),oce=pz(),ace=fz(),lce=mz();Object.freeze(Object.defineProperty({__proto__:null,ONES:rce,UNIT_W:lce,UNIT_X:sce,UNIT_Y:oce,UNIT_Z:ace,ZEROS:nce,clone:tce,create:yw,createView:cz,fromArray:ice,fromValues:Ic,ones:dz,unitW:mz,unitX:hz,unitY:pz,unitZ:fz,zeros:uz},Symbol.toStringTag,{value:"Module"}));let cce=class{constructor(e){this.message=e}toString(){return`AssertException: ${this.message}`}};function gz(t,e){if(!t){e=e||"Assertion";const i=new Error(e).stack;throw new cce(`${e} at ${i}`)}}function iTe(t,e){t||(e=e||"",console.warn("Verify failed: "+e+`
`+new Error("verify").stack))}function nTe(t,e,i,n){let r,s=(i[0]-t[0])/e[0],o=(n[0]-t[0])/e[0];s>o&&(r=s,s=o,o=r);let a=(i[1]-t[1])/e[1],l=(n[1]-t[1])/e[1];if(a>l&&(r=a,a=l,l=r),s>l||a>o)return!1;a>s&&(s=a),l<o&&(o=l);let u=(i[2]-t[2])/e[2],p=(n[2]-t[2])/e[2];return u>p&&(r=u,u=p,p=r),!(s>p||u>o)&&(p<o&&(o=p),!(o<0))}function rTe(t,e,i,n,r,s=Ce()){const o=(n[r]-i[r])*(e[0]-t[0])-(n[0]-i[0])*(e[r]-t[r]),a=(n[0]-i[0])*(t[r]-i[r])-(n[r]-i[r])*(t[0]-i[0]);if(o===0)return!1;const l=a/o;return s[0]=t[0]+l*(e[0]-t[0]),s[1]=t[r]+l*(e[r]-t[r]),!0}function sTe(t,e){return Math.log(t)/Math.log(e)}function oTe(t,e,i,n){t[12]=e,t[13]=i,t[14]=n}function aTe(t){return t[0]===1&&t[1]===0&&t[2]===0&&t[3]===0&&t[4]===0&&t[5]===1&&t[6]===0&&t[7]===0&&t[8]===0&&t[9]===0&&t[10]===1&&t[11]===0&&t[15]===1}let uce=class{constructor(e){this.client=e,this._cancelled=!1,this.size=0,this.duration=0}},dce=class{constructor(e){this.typeWorkerQuota=e,this.tasks=new Array,this.numWorkers=0,this.statistics=new hce}},hce=class{constructor(){this.requests=0,this.size=0,this.duration=0,this.speed=0}},pce=class{constructor(e,i,n,r){this._workerFunc=e,this._callbackFunc=i,this._maxTotalNumWorkers=n,this._totalNumWorkers=0,this._clients=r.map(s=>new dce(s))}destroy(){this._clients.length=0}hasQuota(e){const i=this._clients[e];return!!i&&(this._totalNumWorkers<this._maxTotalNumWorkers||i.numWorkers+i.tasks.length<i.typeWorkerQuota)}push(e){const i=this._clients[e.client];i&&(this._totalNumWorkers<this._maxTotalNumWorkers?(i.numWorkers++,this._totalNumWorkers++,this._workerFunc(e,(n,r)=>this._taskCallback(n,r))):i.tasks.push(e))}cancel(e){this._taskFinished(e),e._cancelled=!0}_taskFinished(e){const i=this._clients[e.client];this._totalNumWorkers--,i&&(i.numWorkers--,i.statistics.requests++,i.statistics.size+=e.size||0,i.statistics.duration+=e.duration||0,i.statistics.speed=i.statistics.duration>0?i.statistics.size/i.statistics.duration:0,gz(i.numWorkers>=0)),this._next()}_next(){for(const e of this._clients)if(e&&e.numWorkers<e.typeWorkerQuota&&this._processQueue(e))return;for(const e of this._clients)if(e&&this._processQueue(e))return}_processQueue(e){for(;e.tasks.length>0;)if(this._workerFunc(e.tasks.shift(),(i,n)=>this._taskCallback(i,n)))return e.numWorkers++,this._totalNumWorkers++,!0;return!1}_taskCallback(e,i){e._cancelled||(this._callbackFunc(e,i),this._taskFinished(e))}getStatsForType(e){const i=this._clients[e];return i?{quota:i.typeWorkerQuota,workers:i.numWorkers,queueSize:i.tasks.length,requestStats:i.statistics}:null}get test(){const e=this;return{set workerFunc(i){e._workerFunc=i}}}},fce=class{constructor(){this._tasks=new Array,this._running=ig(!1)}get length(){return this._tasks.length}get running(){return this._running.value}destroy(){this.cancelAll()}runTask(e){for(;!e.done&&this._process(e);)e.madeProgress()}push(e,i,n){return this._running.value=!0,new Promise((r,s)=>this._tasks.push(new u3(r,s,e,i,n)))}unshift(e,i,n){return this._running.value=!0,new Promise((r,s)=>this._tasks.unshift(new u3(r,s,e,i,n)))}_process(e){var n;if(this._tasks.length===0)return!1;const i=this._tasks.shift();try{const r=er(i.signal);if(r&&!i.abortCallback)i.reject(Xe());else{const s=r?(n=i.abortCallback)==null?void 0:n.call(i,Xe()):i.callback(e);Za(s)?s.then(i.resolve,i.reject):i.resolve(s)}}catch(r){i.reject(r)}return this._running.value=this._tasks.length>0,!0}cancelAll(){const e=Xe();for(const i of this._tasks)if(i.abortCallback){const n=i.abortCallback(e);i.resolve(n)}else i.reject(e);this._tasks.length=0,this._running.value=!1}},u3=class{constructor(e,i,n,r=void 0,s=void 0){this.resolve=e,this.reject=i,this.callback=n,this.signal=r,this.abortCallback=s}},rm=class extends X{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};c([d()],rm.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),c([d()],rm.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),rm=c([S("esri.views.support.DebugFlags")],rm);const mce=new rm;var Vn;(function(t){t[t.ANIMATING=0]="ANIMATING",t[t.INTERACTING=1]="INTERACTING",t[t.IDLE=2]="IDLE"})(Vn||(Vn={}));var _2,Ee;(function(t){t[t.YIELD=1]="YIELD"})(_2||(_2={})),function(t){t.RESOURCE_CONTROLLER_IMMEDIATE="immediate",t.RESOURCE_CONTROLLER="schedule",t.SLIDE="slide",t.STREAM_DATA_LOADER="stream loader",t.ELEVATION_QUERY="elevation query",t.TERRAIN_SURFACE="terrain",t.SURFACE_GEOMETRY_UPDATES="surface geometry updates",t.LOD_RENDERER="LoD renderer",t.GRAPHICS_CORE="Graphics3D",t.I3S_CONTROLLER="I3S",t.POINT_CLOUD_LAYER="point cloud",t.FEATURE_TILE_FETCHER="feature fetcher",t.OVERLAY="overlay",t.STAGE="stage",t.GRAPHICS_DECONFLICTOR="graphics deconflictor",t.FILTER_VISIBILITY="Graphics3D filter visibility",t.SCALE_VISIBILITY="Graphics3D scale visibility",t.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",t.POINT_OF_INTEREST_FREQUENT="POI frequent",t.POINT_OF_INTEREST_INFREQUENT="POI infrequent",t.LABELER="labeler",t.FEATURE_QUERY_ENGINE="feature query",t.FEATURE_TILE_TREE="feature tile tree",t.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",t.ELEVATION_ALIGNMENT="elevation alignment",t.TEXT_TEXTURE_ATLAS="text texture atlas",t.TEXTURE_UNLOAD="texture unload",t.LINE_OF_SIGHT_TOOL="line of sight tool",t.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",t.ELEVATION_PROFILE="elevation profile",t.SNAPPING="snapping",t.SHADOW_ACCUMULATOR="shadow accumulator",t.CLOUDS_GENERATOR="clouds generator",t[t.NONE=0]="NONE",t[t.TEST_PRIO=1]="TEST_PRIO"}(Ee||(Ee={}));const yo=0,d3=new Map([[Ee.RESOURCE_CONTROLLER_IMMEDIATE,yo],[Ee.RESOURCE_CONTROLLER,4],[Ee.SLIDE,yo],[Ee.STREAM_DATA_LOADER,yo],[Ee.ELEVATION_QUERY,yo],[Ee.TERRAIN_SURFACE,1],[Ee.SURFACE_GEOMETRY_UPDATES,1],[Ee.LOD_RENDERER,2],[Ee.GRAPHICS_CORE,2],[Ee.I3S_CONTROLLER,2],[Ee.POINT_CLOUD_LAYER,2],[Ee.FEATURE_TILE_FETCHER,2],[Ee.OVERLAY,4],[Ee.STAGE,4],[Ee.GRAPHICS_DECONFLICTOR,4],[Ee.FILTER_VISIBILITY,4],[Ee.SCALE_VISIBILITY,4],[Ee.FRUSTUM_VISIBILITY,4],[Ee.CLOUDS_GENERATOR,4],[Ee.POINT_OF_INTEREST_FREQUENT,6],[Ee.POINT_OF_INTEREST_INFREQUENT,30],[Ee.LABELER,8],[Ee.FEATURE_QUERY_ENGINE,8],[Ee.FEATURE_TILE_TREE,16],[Ee.FEATURE_TILE_TREE_ACTIVE,yo],[Ee.ELEVATION_ALIGNMENT,12],[Ee.TEXT_TEXTURE_ATLAS,12],[Ee.TEXTURE_UNLOAD,12],[Ee.LINE_OF_SIGHT_TOOL,16],[Ee.LINE_OF_SIGHT_TOOL_INTERACTIVE,yo],[Ee.SNAPPING,yo],[Ee.SHADOW_ACCUMULATOR,30]]);function h3(t){return d3.has(t)?d3.get(t):typeof t=="number"?t:1}const p3=6.5,f3=1,gce=30,m3=1e3/30,g3=100,y3=.9;var S2,Uc;(function(t){class e{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(s=>s.needsUpdate)}constructor(){this._updating=ig(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new ym("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new n,this._state=Vn.INTERACTING,this._tasks=new vm,this._runQueue=new vm,this._load=0,this._idleStateCallbacks=new vm,this._idleUpdatesStartFired=!1,this._forceTask=!1,this._debug=!1,this._debugHandle=Z(()=>mce.SCHEDULER_LOG_SLOW_TASKS,o=>this._debug=o,De);for(const o of Object.keys(Ee))this.performanceInfo.tasks.set(Ee[o],new ym(Ee[o]));const s=this;this._test={FRAME_SAFETY_BUDGET:p3,INTERACTING_BUDGET:m3,IDLE_BUDGET:g3,get availableBudget(){return s._budget.budget},usedBudget:0,getBudget:()=>s._budget,setBudget:o=>s._budget=o,updateTask:o=>this._updateTask(o),getState:o=>this._getState(o),getRuntime:o=>this._getRuntime(o),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}destroy(){this._tasks.toArray().forEach(s=>s.remove()),this._tasks.clear(),Je(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(s){this._updatingChanged(),s&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this.frame())}))}registerTask(s,o){const a=h3(s),l=new i(this,s,o,a);return this._tasks.push(l),this._updatingChanged(),this.performanceInfo.tasks.has(s)||this.performanceInfo.tasks.set(s,new ym(s)),l}registerIdleStateCallbacks(s,o){const a={idleBegin:s,idleEnd:o};this._idleStateCallbacks.push(a),this.state===Vn.IDLE&&this._idleUpdatesStartFired&&a.idleBegin();const l=this;return{remove:()=>this._removeIdleStateCallbacks(a),set idleBegin(u){l._idleUpdatesStartFired&&(a.idleEnd(),l._state===Vn.IDLE&&u()),a.idleBegin=u},set idleEnd(u){a.idleEnd=u}}}get load(){return this._load}set state(s){this._state!==s&&(this._state=s,this.state!==Vn.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(o=>o.idleEnd())))}get state(){return this._state}updateBudget(s){this._test.usedBudget=0,++this._frameNumber;let o=p3,a=s.frameDuration,l=f3;switch(this.state){case Vn.IDLE:o=0,a=Math.max(g3,s.frameDuration),l=gce;break;case Vn.INTERACTING:a=Math.max(m3,s.frameDuration);case Vn.ANIMATING:}return a=a-s.elapsedFrameTime-o,this.state!==Vn.IDLE&&a<f3&&!this._forceTask?(this._forceTask=!0,!1):(a=Math.max(a,l),this._budget.reset(a,this.state),this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case Vn.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(s=>s.idleBegin())),this._runIdle();break;case Vn.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed}stopFrame(){this._budget.reset(0,this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(s){this._idleUpdatesStartFired&&s.idleEnd(),this._idleStateCallbacks.removeUnordered(s)}removeTask(s){this._tasks.removeUnordered(s),this._runQueue.removeUnordered(s),this._updatingChanged()}_updateTask(s){this._tasks.forAll(o=>{o.name===s&&o.setPriority(s)})}_getState(s){if(this._runQueue.some(a=>a.name===s))return Uc.SCHEDULED;let o=Uc.IDLE;return this._tasks.forAll(a=>{a.name===s&&a.needsUpdate&&(a.schedulePriority<=1?o=Uc.READY:o!==Uc.READY&&(o=Uc.WAITING))}),o}_getRuntime(s){let o=0;return this._tasks.forAll(a=>{a.name===s&&(o+=a.runtime)}),o}_resetRuntimes(){this._tasks.forAll(s=>s.runtime=0)}_getRunning(){const s=new Map;if(this._tasks.forAll(a=>{a.needsUpdate&&s.set(a.name,(s.get(a.name)||0)+1)}),s.size===0)return null;let o="";return s.forEach((a,l)=>{o+=a>1?` ${a}x ${l}`:` ${l}`}),o}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const s=this._tasks.reduce((o,a)=>a.needsUpdate?++o:o,0);this._load=this._load*y3+s*(1-y3)}_schedule(){for(this._runQueue.filterInPlace(s=>!!s.needsUpdate||(s.schedulePriority=s.basePriority,!1)),this._tasks.forAll(s=>{s.basePriority===yo&&s.needsUpdate&&!this._runQueue.includes(s)&&s.blockFrame!==this._frameNumber&&this._runQueue.unshift(s)});this._runQueue.length===0;){let s=!1,o=0;if(this._tasks.forAll(a=>{a.needsUpdate&&a.schedulePriority!==0&&a.basePriority!==yo&&a.blockFrame!==this._frameNumber&&(s=!0,o=Math.max(o,a.basePriority),a.schedulePriority===1?(a.schedulePriority=0,this._runQueue.push(a)):--a.schedulePriority)}),!s)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){const s=this._budget.now();this._startFrameTaskTimes();do for(;this._runQueue.length>0;){const o=this._budget.now(),a=this._runQueue.pop();this._budget.resetProgress();try{a.task.runTask(this._budget)===_2.YIELD&&(a.blockFrame=this._frameNumber)}catch(u){J.getLogger("esri.views.support.Scheduler").error(`Exception in task "${a.name}"`,u),a.blockFrame=this._frameNumber}!this._budget.hasProgressed&&a.blockFrame!==this._frameNumber&&a.needsUpdate&&(a.name,Ee.I3S_CONTROLLER,a.blockFrame=this._frameNumber),a.schedulePriority=a.basePriority;const l=this._budget.now()-o;if(a.runtime+=l,this._frameTaskTimes.set(a.priority,this._frameTaskTimes.get(a.priority)+l),this._debug&&l>2*this._budget.budget&&console.log("Task",a.name,"used",l,"of max",this._budget.budget,"ms"),this._budget.remaining<=0)return this._updatingChanged(),void this._recordFrameTaskTimes(this._budget.now()-s)}while(this._schedule());this._updatingChanged(),this._recordFrameTaskTimes(this._budget.now()-s)}_startFrameTaskTimes(){for(const s of Object.keys(Ee))this._frameTaskTimes.set(Ee[s],0)}_recordFrameTaskTimes(s){this._frameTaskTimes.forEach((o,a)=>this.performanceInfo.tasks.get(a).record(o)),this.performanceInfo.total.record(s)}get test(){return this._test}}t.Scheduler=e;class i{get task(){return this._task.value}get updating(){return this._queue.running}constructor(s,o,a,l){this._scheduler=s,this.name=o,this._basePriority=l,this.blockFrame=0,this.runtime=0,this._queue=new fce,this._handles=new v1,this.schedulePriority=this._basePriority,this._task=ig(a??this._queue),this._handles.add(On(()=>this.task.running,u=>s.taskRunningChanged(u)))}remove(){this.processQueue(yz),this._scheduler.removeTask(this),this.schedule=v3.schedule,this.reschedule=v3.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(s){this.name=s;const o=h3(s);this._basePriority!==yo&&this.schedulePriority===0||(this.schedulePriority=o),this._basePriority=o}get priority(){return this.name}set priority(s){this.setPriority(s)}get needsUpdate(){return this.updating||this.task.running}schedule(s,o,a){return this._queue.push(s,o,a)}reschedule(s,o,a){return this._queue.unshift(s,o,a)}processQueue(s){this._queue.runTask(s)}}class n{constructor(){this._begin=typeof performance<"u"?performance.now():0,this._budget=0,this._state=Vn.IDLE,this._done=!1,this._progressed=!1,this._enabled=!0}run(s){return!this.done&&(s()===!0&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get state(){return this._state}get enabled(){return this._enabled}set enabled(s){this._enabled=s}reset(s,o){this._begin=this.now(),this._budget=s,this._state=o,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return performance.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}}t.Budget=n})(S2||(S2={})),function(t){t.SCHEDULED="s",t.READY="r",t.WAITING="w",t.IDLE="i"}(Uc||(Uc={}));const yz=(()=>{const t=new S2.Budget;return t.enabled=!1,t})();let yce=class{remove(){}processQueue(){}schedule(e,i,n){try{if(er(i)){const r=Xe();return n?Promise.resolve(n(r)):Promise.reject(r)}return FS(e(yz))}catch(r){return Promise.reject(r)}}reschedule(e,i,n){return this.schedule(e,i,n)}};const v3=new yce;let X_=class extends X{constructor(){super(...arguments),this._tasks=new Map,this._onLoadQueue=new Array,this._doneQueue=new Array,this.updating=!1}setup(e,i,n){this._loadQueue=new pce((r,s)=>this._startLoading(r,s),(r,s)=>this._doneLoadingCB(r,s),e,i),n&&(this._frameTask=n.registerTask(Ee.STREAM_DATA_LOADER,this))}destroy(){this._frameTask=Je(this._frameTask),this._tasks.forEach(e=>_s(e.abortController)),this._loadQueue=Oe(this._loadQueue),this._onLoadQueue=null,this._doneQueue=null,this._tasks=null}hasDownloadSlots(e){return this._loadQueue.hasQuota(e)}request(e,i,n,r={}){const s=Or();s.__signal=r!=null?r.signal:null;const o=this._createOrUpdateTask(e,i,n,r,s);return Mr(r,()=>this._cancelRequest(o,s)),s.promise}_createTask(e,i,n,r,s,o){const a=new _ce(e,i,n,r,s);return this._updateTask(a,o),this._tasks.set(s,a),this._tasks.size===1&&this._set("updating",!0),this._loadQueue.push(a),a}_cancelRequest(e,i){var n;$L(e.resolvers,i),i.reject(Xe()),e.resolvers.length===0&&(e.status===wr.DOWNLOADING&&(e.status=wr.CANCELLED,this._loadQueue.cancel(e),(n=e.abortController)==null||n.abort(),e.request=null,e.abortController=null),e.status=wr.CANCELLED,this._tasks.delete(e.key),this._tasks.size===0&&this._set("updating",!1))}_updateTask(e,i){e.resolvers.push(i)}_createOrUpdateTask(e,i,n,r,s){const o=Sce((r==null?void 0:r.uid)||e,i,n),a=this._tasks.get(o);return a?(this._updateTask(a,s),a):this._createTask(e,r,i,n,o,s)}_doneLoadingCB(e,i){this._loadQueue&&(gz(e.status===wr.DOWNLOADING),e.status=wr.DOWNLOADED,this._frameTask?this._doneQueue.push({task:e,err:i}):this._doneLoading(e,i))}get running(){return this._doneQueue.length>0||this._onLoadQueue.length>0}runTask(e){for(;!e.done&&this._onLoadQueue.length>0;){const i=this._onLoadQueue.shift();Qe(i.task.abortController),i.task.abortController=null,i.callback(i.task),e.madeProgress()}for(;!e.done&&this._doneQueue.length>0;){const i=this._doneQueue.shift();i.task.status!==wr.DOWNLOADED&&(i.err=i.err||Xe()),this._doneLoading(i.task,i.err),e.madeProgress()}}_doneLoading(e,i){if(i&&!en(i)&&e.numRetries>0)return--e.numRetries,void this._loadQueue.push(e);let n=e.result instanceof HTMLImageElement?0:e.resolvers.length;for(const r of e.resolvers)if(i)en(i)?r.reject(i):r.reject(new F("stream-data-loader:request-error",`Failed to request resource at '${e.url}'. ${i}`,{url:e.url,error:i}));else{--n;const s=n>0?q(e.result):e.result;r.resolve(s)}this._tasks.delete(e.key),this._tasks.size===0&&this._set("updating",!1)}_startLoading(e,i){if(e.status===wr.CANCELLED)return!1;let n,r;switch(e.startTime=performance.now(),e.status=wr.DOWNLOADING,e.docType){case"binary":r="array-buffer",n=0;break;case"image":r="image";break;case"image+type":r="array-buffer";break;default:r="json"}e.abortController=new AbortController;const s=e.abortController.signal;e.request=$t(e.url,{...e.options,responseType:r,timeout:n,signal:s});let o=()=>{};const a=u=>{e.duration=performance.now()-e.startTime,e.size=u instanceof ArrayBuffer?u.byteLength:e.size||0,e.result=u,this._frameTask?this._onLoadQueue.push({callback:i,task:e}):(e.abortController=null,i(e))},l=u=>{e.status===wr.DOWNLOADING&&i(e,u),o()};return e.docType!=="image+type"?(e.request.then(u=>a(u.data),l),!0):(e.request.then(u=>{const p=u.data,f=bce(p);if(r="image",e.size=p.byteLength,f==="unknown")return e.request=$t(e.url,{responseType:r,timeout:n,signal:s}),void e.request.then(y=>a(y.data),l);const m=new Blob([p],{type:f}),g=window.URL.createObjectURL(m);o=()=>window.URL.revokeObjectURL(g),e.request=$t(g,{responseType:r,timeout:n,signal:s}),e.request.then(y=>a(new wce(y.data,f,o)),l)},l),!0)}get test(){return{loadQueue:this._loadQueue}}};c([d({readOnly:!0})],X_.prototype,"updating",void 0),X_=c([S("esri.views.3d.support.StreamDataLoader")],X_);const vce={numRetries:0};function bce(t){if(t.byteLength<2)return"unknown";const e=new Uint8Array(t,0,t.byteLength);return e[0]===137&&e[1]===80?"image/png":e[0]===71&&e[1]===73?"image/gif":e[0]===66&&e[1]===77?"image/bmp":e[0]===255&&e[1]===216?"image/jpeg":"unknown"}let wce=class{constructor(e,i,n){this.image=e,this.type=i,this.release=n}get isOpaque(){return this.type==="image/jpeg"}},_ce=class extends uce{constructor(e,i,n,r,s){super(r),this.url=e,this.options=i,this.docType=n,this.key=s,this.result=null,this.status=wr.QUEUED,this.request=null,this.abortController=null,this.resolvers=new Array,this.startTime=0,this.numRetries=vce.numRetries}};function Sce(t,e,i){return`${t}:${e}:${i}`}var wr;(function(t){t[t.QUEUED=1]="QUEUED",t[t.DOWNLOADING=2]="DOWNLOADING",t[t.DOWNLOADED=3]="DOWNLOADED",t[t.CANCELLED=4]="CANCELLED"})(wr||(wr={}));var b3,wo;(function(t){t[t.INSIDE=0]="INSIDE",t[t.INTERSECTS=1]="INTERSECTS",t[t.OUTSIDE=2]="OUTSIDE"})(b3||(b3={})),function(t){t[t.NORTH=0]="NORTH",t[t.NORTH_EAST=1]="NORTH_EAST",t[t.EAST=2]="EAST",t[t.SOUTH_EAST=3]="SOUTH_EAST",t[t.SOUTH=4]="SOUTH",t[t.SOUTH_WEST=5]="SOUTH_WEST",t[t.WEST=6]="WEST",t[t.NORTH_WEST=7]="NORTH_WEST"}(wo||(wo={}));const $ce=12;let Da=class Zi{constructor(e){const i=Zi.checkUnsupported(e);if(i!=null)throw i;const n=e;this.spatialReference=n.spatialReference,this._isWebMercator=this.spatialReference.isWebMercator,this._isGCS=B1(this.spatialReference)||Tg(this.spatialReference)||Eg(this.spatialReference),this.origin=[n.origin.x,n.origin.y],this.pixelSize=n.size[0],this.dpi=n.dpi;const r=n.lods.reduce((u,p,f)=>(p.level<u.min&&(u.min=p.level,u.minIndex=f),u.max=Math.max(u.max,p.level),u),{min:1/0,minIndex:0,max:-1/0}),s=n.lods[r.minIndex],o=2**s.level;let a=s.resolution*o,l=s.scale*o;this.levels=new Array(r.max+1);for(let u=0;u<this.levels.length;u++)this.levels[u]={resolution:a,scale:l,tileSize:[a*n.size[0],a*n.size[1]]},a/=2,l/=2}clone(){return new Zi(this.toTileInfo())}toTileInfo(){return new Tm({dpi:this.dpi,origin:new he({x:this.origin[0],y:this.origin[1],spatialReference:this.spatialReference}),size:[this.pixelSize,this.pixelSize],spatialReference:this.spatialReference,lods:this.levels.map((e,i)=>new Sr({level:i,scale:e.scale,resolution:e.resolution}))})}getExtent(e,i,n,r){const s=this.levels[e],o=s.tileSize[0],a=s.tileSize[1];r[0]=this.origin[0]+n*o,r[2]=this.origin[0]+(n+1)*o,r[3]=this.origin[1]-i*a,r[1]=this.origin[1]-(i+1)*a}convertExtentToRadians(e,i){this._isWebMercator?(i[0]=cC(e[0]),i[1]=uC(e[1]),i[2]=cC(e[2]),i[3]=uC(e[3])):this._isGCS&&(i[0]=$f(e[0]),i[1]=$f(e[1]),i[2]=$f(e[2]),i[3]=$f(e[3]))}getExtentGeometry(e,i,n,r=new Ve){return this.getExtent(e,i,n,Bs),r.spatialReference=this.spatialReference,r.xmin=Bs[0],r.ymin=Bs[1],r.xmax=Bs[2],r.ymax=Bs[3],r.zmin=void 0,r.zmax=void 0,r}ensureMaxLod(e){if(e==null)return!1;let i=!1;for(;this.levels.length<=e;){const n=this.levels[this.levels.length-1],r=n.resolution/2;this.levels.push({resolution:r,scale:n.scale/2,tileSize:[r*this.pixelSize,r*this.pixelSize]}),i=!0}return i}capMaxLod(e){this.levels.length>e+1&&(this.levels.length=e+1)}getMaxLod(){return this.levels.length-1}scaleAtLevel(e){return this.levels[0].scale/2**e}levelAtScale(e){const i=this.levels[0].scale;return e>=i?0:Math.log(i/e)*Math.LOG2E}resolutionAtLevel(e){return this.levels[0].resolution/2**e}compatibleWith(e){if(!(e instanceof Zi)){if(Zi.checkUnsupported(e))return!1;e=new Zi(e)}if(!e.spatialReference.equals(this.spatialReference)||e.pixelSize!==this.pixelSize)return!1;const i=Math.min(this.levels.length,e.levels.length)-1,n=this.levels[i].resolution;let r=.5*n;return!$o(e.origin[0],this.origin[0],r)||!$o(e.origin[1],this.origin[1],r)?!1:(r=.5*n/2**i/this.pixelSize*$ce,$o(n,e.levels[i].resolution,r))}rootTilesInExtent(e,i=null,n=1/0){const r=new Array,s=this.levels[0].tileSize;if(e==null||s[0]===0||s[1]===0)return r;Zi.computeRowColExtent(e,s,this.origin,Bs);let o=Bs[1],a=Bs[3],l=Bs[0],u=Bs[2];const p=u-l,f=a-o;if(p*f>n){const m=Math.floor(Math.sqrt(n));f>m&&(o=o+Math.floor(.5*f)-Math.floor(.5*m),a=o+m),p>m&&(l=l+Math.floor(.5*p)-Math.floor(.5*m),u=l+m)}for(let m=o;m<a;m++)for(let g=l;g<u;g++)r.push([0,m,g]);return i!=null&&(i[0]=this.origin[0]+l*s[0],i[1]=this.origin[1]-a*s[1],i[2]=this.origin[0]+u*s[0],i[3]=this.origin[1]-o*s[1]),r}static computeRowColExtent(e,i,n,r){const s=.001*(e[2]-e[0]+(e[3]-e[1]));r[0]=Math.max(0,Math.floor((e[0]+s-n[0])/i[0])),r[2]=Math.max(0,Math.ceil((e[2]-s-n[0])/i[0])),r[1]=Math.max(0,Math.floor((n[1]-e[3]+s)/i[1])),r[3]=Math.max(0,Math.ceil((n[1]-e[1]-s)/i[1]))}static isPowerOfTwo(e){const i=e.lods,n=i[0].resolution*2**i[0].level;return!i.some(r=>!VB(r.resolution,n/2**r.level))}static hasGapInLevels(e){const i=e.lods.map(n=>n.level);i.sort((n,r)=>n-r);for(let n=1;n<i.length;n++)if(i[n]!==i[0]+n)return!0;return!1}static tileSizeSupported(e){const i=e.size[1];return i===e.size[0]&&(i&i-1)==0&&i>=128&&i<=512}static hasOriginPerLODs(e){const i=e.origin;return e.lods.some(n=>n.origin!=null&&(n.origin[0]!==i.x||n.origin[1]!==i.y))}static getMissingTileInfoError(){return new F("tilingscheme:tile-info-missing","Tiling scheme must have tiling information")}static checkUnsupported(e){return e==null?bk():e.lods.length<1?new F("tilingscheme:generic","Tiling scheme must have at least one level"):Zi.isPowerOfTwo(e)?Zi.hasGapInLevels(e)?new F("tilingscheme:gaps","Tiling scheme levels must not have gaps between min and max level"):Zi.tileSizeSupported(e)?Zi.hasOriginPerLODs(e)?new F("tilingscheme:multiple-origin","Tiling scheme levels must not have their own origin"):null:new F("tilingscheme:tile-size","Tiles must be square and size must be one of [128, 256, 512]"):new F("tilingscheme:power-of-two","Tiling scheme must be power of two")}static fromExtent(e,i){const n=e[2]-e[0],r=e[3]-e[1],s=Cn(i),o=1.2*Math.max(n,r),a=256,l=96,u=.0254,p=new Zi(new Tm({size:[a,a],origin:new he({x:e[0]-.5*(o-n),y:e[3]+.5*(o-r)}),lods:[new Sr({level:0,resolution:o/a,scale:1/(a/l*u/(o*s))})],spatialReference:i}));return p.ensureMaxLod(20),p}static makeWebMercatorAuxiliarySphere(e){const i=new Zi(Zi.WebMercatorAuxiliarySphereTileInfo);return i.ensureMaxLod(e),i}static makeGCSWithTileSize(e,i=256,n=16){const r=256/i,s=new Zi(new Tm({size:[i,i],origin:new he({x:-180,y:90,spatialReference:e}),spatialReference:e,lods:[new Sr({level:0,resolution:.703125*r,scale:295497598570834e-6*r})]}));return s.ensureMaxLod(n),s}get test(){return{isWebMercator:this._isWebMercator,isGCS:this._isGCS}}};function bk(){return new F("tilingscheme:tile-info-missing","Tiling scheme must have tiling information")}Da.WebMercatorAuxiliarySphereTileInfo=new Tm({size:[256,256],origin:new he({x:-20037508342787e-6,y:20037508342787e-6,spatialReference:xe.WebMercator}),spatialReference:xe.WebMercator,lods:[new Sr({level:0,resolution:156543.03392800014,scale:591657527591555e-6})]}),Da.WebMercatorAuxiliarySphere=Da.makeWebMercatorAuxiliarySphere(19);const Bs=tn(),w3=64;BB(h$/10);const xce=tn();Da.WebMercatorAuxiliarySphere.getExtent(0,0,0,xce);tn([-180,-90,180,90]);const qd=se(),Tce=se(),Yo=se(),Xo=se();function Ece(t,e,i=0){const n=t.extent;if(n==null)return!1;if(i===0)return Aq(n,e);const r=Math.min(n[2]-n[0],n[3]-n[1]);return Lq(n,e,i*r)}function s0(t,e,i,n){In(qd,i),qd[n]=e[n];const r=kt(qd,qd,e),s=kt(Tce,t,e),o=qe(s,r),a=qe(r,r);let l;l=o<=0?e:a<=o?i:Do(qd,e,Dr(r,r,o/a));const u=kt(qd,t,l);return Math.PI/2-Math.atan(u[2]/Math.sqrt(u[0]*u[0]+u[1]*u[1]))}function kce(t,e,i){const n=t.extent;if(n==null)return 0;Yo[0]=n[0],Yo[1]=n[1],Yo[2]=i,Xo[0]=n[2],Xo[1]=n[3],Xo[2]=i;let r=1/0,s=1/0;return e[0]<Yo[0]?r=s0(e,Yo,Xo,0):e[0]>Xo[0]&&(r=s0(e,Xo,Yo,0)),e[1]<Yo[1]?s=s0(e,Yo,Xo,1):e[1]>Xo[1]&&(s=s0(e,Xo,Yo,1)),Math.min(r,s)}function Mce(t,e,i){if(t==null)return bk();if(t.spatialReference.isGeographic&&!B1(t.spatialReference))return new F("tilingscheme:local-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in local scenes");const n=Da.checkUnsupported(t);if(n!=null)return n;if(i==null)return new F("tilingscheme:extent-not-exist","The layer does not provide a layer extent.");const r=Cce(t,i);if(r)return r;const s=t.spatialReference;return e==null||s.equals(e)||e.isWGS84&&s.isWebMercator?null:new F("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the local scene")}function Cce(t,e){const i=t.lods,n=i[0].resolution*2**i[0].level,r=[n*t.size[0],n*t.size[1]],s=[t.origin.x,t.origin.y],o=Cq(e),a=tn();Da.computeRowColExtent(o,r,s,a);const l=(a[2]-a[0])*(a[3]-a[1]);if(l>w3){const u=i[0].scale*2**i[0].level;let p=Math.max((o[3]-o[1])/t.size[1],(o[2]-o[0])/t.size[0])*u/n;const f=Math.floor(Math.log(p)/Math.log(10));return p=Math.ceil(p/10**f)*10**f,new F("tilingscheme:too-many-root-tiles","Scale of level 0 of the tiling scheme (1:"+Math.floor(u).toLocaleString()+") is too large for the layer's extent. Suggested scale: 1:"+p.toLocaleString()+".",{level0Scale:u,suggestedLevel0Scale:p,requiredNumRootTiles:l,allowedNumRootTiles:w3})}return null}const Ice=Object.freeze(Object.defineProperty({__proto__:null,checkIfTileInfoSupportedForViewSR:Mce,isInsideExtent:Ece,tiltToExtentEdge:kce},Symbol.toStringTag,{value:"Module"}));function Oce(){return!0}function Ace(){return 0}function Lce(t,e){if(t==null)return bk();const i=t.lods.length-1,n=t.spatialReference,r=B1(n)||Tg(n)||Eg(n);if(n.isWebMercator){if(!Da.makeWebMercatorAuxiliarySphere(i).compatibleWith(t))return new F("tilingscheme:incompatible-global-web-mercator","The tiling scheme is not compatible with the ArcGIS Online Web Mercator tiling scheme")}else{if(!r)return new F("tilingscheme:global-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in global scenes");if(!Da.makeGCSWithTileSize(t.spatialReference,t.size[0],i).compatibleWith(t))return t.spatialReference.isWGS84?new F("tilingscheme:incompatible-global-wgs84","The tiling scheme is not compatible with the ArcGIS Online WGS84 tiling scheme"):new F("tilingscheme:incompatible-global","The tiling scheme is not compatible with the ArcGIS Online tiling scheme")}return e==null||t.spatialReference.equals(e)?void 0:new F("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the global scene")}const Pce=Object.freeze(Object.defineProperty({__proto__:null,checkIfTileInfoSupportedForViewSR:Lce,isInsideExtent:Oce,tiltToExtentEdge:Ace},Symbol.toStringTag,{value:"Module"})),Rce={[Va.Global]:Pce,[Va.Local]:Ice};function $2(t,e,i,n){return Rce[n].checkIfTileInfoSupportedForViewSR(t,i,e)}function Nce(t,e,i){const n=jX(t);if(n!=null){if(!te.isCollection(n))return{tileInfo:n.tileInfo,fullExtent:n.fullExtent};{const r=n.find(s=>$2(s.tileInfo,s.fullExtent,e,i)==null);if(r)return{tileInfo:r.tileInfo,fullExtent:r.fullExtent}}}return{tileInfo:null,fullExtent:null}}wo.NORTH,wo.EAST,wo.SOUTH,wo.WEST;wo.NORTH_EAST,wo.SOUTH_EAST,wo.SOUTH_WEST,wo.NORTH_WEST;function Dce(t,e){return t!=null&&(e==null||(e===Va.Local?!t.isGeographic||t.isWGS84||t.wkid===xr.CGCS2000:t.isWebMercator||t.isWGS84||t.wkid===xr.CGCS2000||t.wkid===xr.GCSMARS2000||t.wkid===xr.GCSMARS2000_SPHERE||t.wkid===xr.GCSMOON2000))}async function Fce(t,e={}){const{basemap:i,view:n}=t;await i.load(e),jce(i),await Uce(i,n,e),Qe(e)}async function zce(t,e={}){var o;const{basemap:i,view:n}=t;if(Qe(e),!n||"spatialReferenceLocked"in n&&!n.spatialReferenceLocked||(await i.load(e),Qe(e),i.baseLayers.length===0))return;const r=i.baseLayers.at(0);if(!zX(r))return;if(i.spatialReference){if(n.spatialReference.equals(i.spatialReference))return;_3()}await r.load(e),Qe(e);const s=(("supportedSpatialReferences"in r?r.supportedSpatialReferences:null)||["tileInfo"in r?(o=r.tileInfo)==null?void 0:o.spatialReference:null]).filter(Qi);s.length!==0&&s.every(a=>!n.spatialReference.equals(a))&&_3()}function _3(){throw new F("basemap-compatibility:incompatible-spatial-reference","Basemap spatial reference is not compatible with the view")}function jce(t){if(t.baseLayers.length===0&&t.referenceLayers.length===0)return;const e=t.baseLayers.concat(t.referenceLayers).toArray().filter(i=>!PX(i)).map(i=>Gce(i));if(e.length)throw e[0]}function Gce(t){return new F("basemap-compatibility:unsupported-basemap-layer-type","Unsupported basemap layer type ${operationalLayerType}",{layer:t,operationalLayerType:t.operationalLayerType||"unknown"})}async function Uce(t,e,i){if(t.baseLayers.length===0)return;const n=t.baseLayers.at(0);if(hD(n)){try{await n.load(i)}catch(r){const s="basemap-compatibility:unknown-error",o="Unknown basemap compatibility error",{name:a=s,message:l=o,details:u}=r;throw new F(a,l,u)}Hce(n,e)}}function Hce(t,e){var l;const i=e.state.viewingMode;if(!i)return;let n,r;if((t==null?void 0:t.type)==="wmts"){const u=Nce(t,e.spatialReference,i);if(u.tileInfo==null)throw new F("basemapgalleryitem:tiling-scheme-incompatible","Basemap tiling scheme is incompatible with the view");n=u.tileInfo,r=u.fullExtent}else n=t.tileInfo,r=t.fullExtent;if(n==null)return;if(!Dce(n.spatialReference,i))throw new F(`basemapgalleryitem:spatial-reference-unsupported-${gO(i)}`,`Basemap spatial reference is unsupported in ${gO(i)} mode`);const s=n.spatialReference.isGeographic,o=(t==null?void 0:t.type)==="vector-tile"?n.getOrCreateCompatible(256,s?1:2):null;if(i===Va.Global){let u=$2(n,r,null,i);if(u&&(t==null?void 0:t.type)==="vector-tile"&&r!=null&&o&&!$2(o,r,null,i)&&(u=null),u){const p=n.spatialReference.isWebMercator?"web-mercator":"wgs84";throw new F(`basemapgalleryitem:tiling-scheme-unsupported-${p}-global`,"Basemap tiling scheme is unsupported in global mode",{error:u})}}else if(Da.checkUnsupported(n))throw new F("basemapgalleryitem:tiling-scheme-unsupported-local","Basemap tiling scheme is unsupported in local mode");const a=(l=e.basemapTerrain)==null?void 0:l.tilingScheme;if(a&&!a.compatibleWith(n)&&((t==null?void 0:t.type)!=="vector-tile"||!o||!a.compatibleWith(o)))throw new F("basemapgalleryitem:tiling-scheme-incompatible","Basemap tiling scheme is incompatible with the view")}let lo=class extends Td(X){constructor(e){super(e),this.compatibilityFunction=null,this.error=null,this.state="loading",this.view=null}initialize(){const e=()=>this.refresh();this.addHandles([Z(()=>{var i;return(i=this.basemap)==null?void 0:i.loadStatus},e),Z(()=>this.compatibilityFunction,e),Z(()=>{var i;return this.view&&"basemapTerrain"in this.view&&((i=this.view.basemapTerrain)==null?void 0:i.tilingScheme)},e),Z(()=>{var i;return(i=this.view)==null?void 0:i.ready},e),Z(()=>{var i;return(i=this.view)==null?void 0:i.spatialReference},e)]),this.refresh()}destroy(){this._cancelRefresh(),this.basemap=null,this.compatibilityFunction=null,this.view=null}get _spatialReferenceTask(){return Tee(this.view,this.basemap)}set basemap(e){e&&e.load().catch(()=>{}),this._set("basemap",e)}get spatialReference(){return this._spatialReferenceTask.spatialReference}refresh(){var r;this._cancelRefresh(),this._set("state","loading");const e=(r=this.basemap)==null?void 0:r.loadStatus;if(e!=="loaded"&&e!=="failed")return;if(!this.compatibilityFunction)return void(e==="loaded"?(this._set("state","ready"),this._set("error",null)):(this._set("state","error"),this._set("error",this.basemap.loadError)));const i=new AbortController,{signal:n}=i;this.compatibilityFunction(this,{signal:n}).then(()=>Ha(()=>!this._spatialReferenceTask.updating,n)).then(()=>{this._set("state","ready"),this._set("error",null)}).catch(s=>{en(s)||(this._set("state","error"),this._set("error",s))}),this._refreshController=i}_cancelRefresh(){this._refreshController&&(this._refreshController.abort(),this._refreshController=null)}};c([d({readOnly:!0})],lo.prototype,"_spatialReferenceTask",null),c([d()],lo.prototype,"basemap",null),c([d()],lo.prototype,"compatibilityFunction",void 0),c([d({readOnly:!0})],lo.prototype,"error",void 0),c([d({readOnly:!0})],lo.prototype,"spatialReference",null),c([d({readOnly:!0})],lo.prototype,"state",void 0),c([d()],lo.prototype,"view",void 0),lo=c([S("esri.widgets.BasemapGallery.support.BasemapGalleryItem")],lo);const vz=lo,bz=te.ofType(rc);let sm=class extends X{constructor(e){super(e),this.basemaps=new bz}destroy(){this.basemaps.forEach(e=>e.destroy())}get state(){return"ready"}refresh(){}};c([d({type:bz})],sm.prototype,"basemaps",void 0),c([d({readOnly:!0})],sm.prototype,"state",null),sm=c([S("esri.widgets.BasemapGallery.support.LocalBasemapsSource")],sm);const wz=sm,_z=te.ofType(rc);let co=class extends As.LoadableMixin(J1(wz)){constructor(e){super(e),this._lastPortalBasemapFetchController=null,this.basemaps=new _z,this.filterFunction=null,this.portal=ir.getDefault(),this.query=null,this.updateBasemapsCallback=null,this.viewType=null}initialize(){this.addHandles([Z(()=>{var e,i,n;return[this.filterFunction,this.loadStatus,(e=this.portal)==null?void 0:e.basemapGalleryGroupQuery,(i=this.portal)==null?void 0:i.basemapGalleryGroupQuery3D,(n=this.portal)==null?void 0:n.user,this.query,this.updateBasemapsCallback]},()=>this.refresh(),De)])}destroy(){this.filterFunction=null,this.portal=null,this.basemaps.forEach(e=>e.destroy())}get state(){return this.loadStatus==="not-loaded"?"not-loaded":this.loadStatus==="loading"||this._lastPortalBasemapFetchController?"loading":"ready"}load(e){return this.addResolvingPromise(this.portal.load(e)),Promise.resolve(this)}async refresh(){if(this.loadStatus!=="loaded")return;this._lastPortalBasemapFetchController&&(this._lastPortalBasemapFetchController.abort(),this._lastPortalBasemapFetchController=null);const e=this.portal,i=new AbortController;this._lastPortalBasemapFetchController=i,this.notifyChange("state");try{const n=await e.fetchBasemaps(this._toQueryString(this.query),{signal:i.signal,include3d:this.viewType==="3d"||void 0});await this._updateBasemaps(n)}catch(n){if(en(n))throw n;J.getLogger(this).warn(new F("basemap-source:fetch-basemaps-error","Could not fetch basemaps from portal.",{error:n})),await this._updateBasemaps()}this._lastPortalBasemapFetchController=null,this.notifyChange("state")}_toQueryString(e){return e&&typeof e!="string"?Object.keys(e).map(i=>`${i}:${e[i]}`).join(" AND "):e}async _updateBasemaps(e=[]){let i=await this._filterBasemaps(e);i=this.updateBasemapsCallback?this.updateBasemapsCallback(i):i,this.basemaps.removeAll(),this.basemaps.addMany(i)}async _filterBasemaps(e){if(!this.filterFunction)return e;const i=e.map(this.filterFunction),n=await Promise.all(i);return e.filter((r,s)=>n[s])}};c([d({readOnly:!0,type:_z})],co.prototype,"basemaps",void 0),c([d()],co.prototype,"filterFunction",void 0),c([d({type:ir})],co.prototype,"portal",void 0),c([d()],co.prototype,"query",void 0),c([d({readOnly:!0})],co.prototype,"state",null),c([d()],co.prototype,"updateBasemapsCallback",void 0),c([d()],co.prototype,"viewType",void 0),co=c([S("esri.widgets.BasemapGallery.support.PortalBasemapsSource")],co);const om=co,Sz=te.ofType(vz);function Vce(t){return t&&t.declaredClass==="esri.portal.Portal"}function Bce(t){return t&&!(t instanceof om)&&(!!t.portal||!!t.query)}function qce(t){return t&&"basemaps"in t&&"state"in t&&"refresh"in t}let Ki=class extends As{constructor(e){super(e),this._loadingProjectionEngine=!1,this._originalActiveBasemap=null,this.includeCurrentBasemap=!1,this.items=new Sz,this.source=new om,this.view=null}initialize(){const e=()=>this._recreateItems();this.addHandles([Z(()=>{var i;return[this.view,(i=this.view)==null?void 0:i.ready]},()=>{var i;(i=this.view)!=null&&i.ready&&(this._originalActiveBasemap=this.activeBasemap)},{initial:!0}),Z(()=>this.state==="ready"?this.compatibilityFunction:null,()=>this._updateItems()),Z(()=>[this._effectiveIncludeCurrentBasemap,this._originalActiveBasemap],e),Lr(()=>{var i;return(i=this.source)==null?void 0:i.basemaps},"change",e,{onListenerAdd:e}),On(()=>this.view,()=>{var i;this.source instanceof om&&(this.source.viewType=(i=this.view)==null?void 0:i.type)},{once:!0})])}destroy(){var i;const e=this.source.basemaps.find(n=>n===this.activeBasemap);e&&this.source.basemaps.remove(e),(i=this.source)==null||i.destroy()}get _effectiveIncludeCurrentBasemap(){var e;return this.includeCurrentBasemap&&((e=this.source)==null?void 0:e.basemaps.every(i=>i.loadStatus!=="loading"))}get activeBasemap(){var e,i;return((i=(e=this.view)==null?void 0:e.map)==null?void 0:i.basemap)??null}set activeBasemap(e){var s,o;const i=this.view;if(!(i!=null&&i.map))return;const n=typeof e=="string"?rc.fromId(e):e;if(!n||!i.ready)return i.map.basemap=n,void this._clearOverride("activeBasemap");const r=n.spatialReference||((o=(s=this.items)==null?void 0:s.find(a=>this.basemapEquals(n,a.basemap)))==null?void 0:o.spatialReference);if(r&&"spatialReferenceLocked"in i&&!i.spatialReferenceLocked){const a=i.spatialReference;if(r!=null&&!xt(a,r)&&!Os(i.spatialReference,r)&&!Ka())return this._override("activeBasemap",n),this._loadingProjectionEngine=!0,void Io().then(()=>{this._get("activeBasemap")===e&&(i.map.basemap=e,i.spatialReference=r,this._clearOverride("activeBasemap"))},()=>{}).then(()=>{this._loadingProjectionEngine=!1});i.map.basemap=n,this._clearOverride("activeBasemap"),r==null||xt(i.spatialReference,r)||(i.spatialReference=r)}else i.map.basemap=n,this._clearOverride("activeBasemap")}get activeBasemapIndex(){const{state:e,activeBasemap:i}=this;return e!=="ready"?-1:this._findBasemapIndex(i)}get compatibilityFunction(){var e;return((e=this.view)==null?void 0:e.type)==="3d"?Fce:zce}set compatibilityFunction(e){this._overrideIfSome("compatibilityFunction",e)}castSource(e){return Array.isArray(e)||te.isCollection(e)?new wz({basemaps:e}):Vce(e)?new om({portal:e}):Bce(e)?new om(e):qce(e)?e:null}get state(){var e;return(e=this.view)!=null&&e.ready&&this.source?this._loadingProjectionEngine?"loading":"ready":"disabled"}basemapEquals(e,i){return xee(e,i)}refresh(){this._recreateItems()}load(e){return this.addResolvingPromise(As.isLoadable(this.source)?this.source.load(e):null),Promise.resolve(this)}_findBasemapIndex(e){const{items:i}=this,n=i.findIndex(r=>r.basemap===e);return n===-1?i.findIndex(r=>this.basemapEquals(r.basemap,e)):n}_recreateItems(){var a;const e=(a=this.source)==null?void 0:a.basemaps,{view:i,compatibilityFunction:n}=this,r=new Map(this.items.map(l=>[l.basemap,l]));function s(l){const u=r.get(l);return u?(r.delete(l),u):new vz({basemap:l,compatibilityFunction:n,view:i})}this.items.removeAll(),e&&this.items.addMany(e.map(s));const o=this._findBasemapIndex(this._originalActiveBasemap)!==-1;this._effectiveIncludeCurrentBasemap&&!o&&this._originalActiveBasemap!=null&&this.items.unshift(s(this._originalActiveBasemap)),r.forEach(l=>l.destroy())}_updateItems(){for(const e of this.items)e.compatibilityFunction=this.compatibilityFunction,e.view=this.view}};c([d()],Ki.prototype,"_effectiveIncludeCurrentBasemap",null),c([d()],Ki.prototype,"_loadingProjectionEngine",void 0),c([d()],Ki.prototype,"_originalActiveBasemap",void 0),c([d()],Ki.prototype,"activeBasemap",null),c([d({readOnly:!0})],Ki.prototype,"activeBasemapIndex",null),c([d()],Ki.prototype,"compatibilityFunction",null),c([d()],Ki.prototype,"includeCurrentBasemap",void 0),c([d({readOnly:!0,type:Sz})],Ki.prototype,"items",void 0),c([d()],Ki.prototype,"source",void 0),c([zt("source")],Ki.prototype,"castSource",null),c([d({readOnly:!0})],Ki.prototype,"state",null),c([d()],Ki.prototype,"view",void 0),Ki=c([S("esri.widgets.BasemapGallery.BasemapGalleryViewModel")],Ki);const Wce=Ki,Dn="esri-basemap-gallery",cn={base:Dn,widgetIcon:ot.basemap,sourceLoading:`${Dn}--source-loading`,layoutGrid:`${Dn}--grid`,narrowItems:`${Dn}--narrow-items`,loader:`${Dn}__loader`,item:`${Dn}__item`,itemContainer:`${Dn}__item-container`,itemContent:`${Dn}__item-content`,itemTitle:`${Dn}__item-title`,itemTagsContainer:`${Dn}__item-tags-container`,itemThumbnail:`${Dn}__item-thumbnail`,selectedItem:`${Dn}__item--selected`,itemError:`${Dn}__item--error`};function Zce({level:t,class:e,...i},n){const r=$z(t);return A(`h${r}`,{...i,"aria-level":String(r),class:J5(pe.heading,e),role:"heading"},n)}function $z(t){return Ar(Math.ceil(t),1,6)}function $Te(t,e=1){return $z(t+e)}const Q_={small:200,default:280,wide:420};let wi=class extends Ln{constructor(e,i){super(e,i),this.disabled=!1,this.headingLevel=2,this.iconClass=cn.widgetIcon,this.icon=null,this.messages=null,this.viewModel=new Wce,this._focusBasemapItemEnabled=!1,this._container=null,this._width=0,this._onContainerCreated=n=>{this._container=n}}initialize(){this.addHandles([NY(()=>this._container,({contentRect:e})=>{this._width=e.width}),On(()=>this.source,()=>this.viewModel.load(),{sync:!0,initial:!0,once:!0})])}loadDependencies(){return Cc({scrim:()=>V(()=>import("./calcite-scrim-ZgWt1Yec.js"),__vite__mapDeps([279,280,271,272,273,276,277]),import.meta.url),chip:()=>V(()=>import("./calcite-chip-ZaBt7-Ix.js"),__vite__mapDeps([281,282,273,270,271,272,268,274,275]),import.meta.url)})}get activeBasemap(){return this.viewModel.activeBasemap}set activeBasemap(e){this.viewModel.activeBasemap=e}get includeCurrentBasemap(){return this.viewModel.includeCurrentBasemap}set includeCurrentBasemap(e){this.viewModel.includeCurrentBasemap=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get source(){return this.viewModel.source}set source(e){this.viewModel.source=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e=this.source.state==="loading",i=this.disabled||this.viewModel.state==="disabled",n=this.viewModel.items,r={[cn.sourceLoading]:e,[pe.disabled]:i},s=this._width;s<=Q_.small||s>=Q_.wide?r[cn.layoutGrid]=!0:s<Q_.default&&(r[cn.narrowItems]=!0);const o=e?A("div",{class:cn.loader,key:"loader"}):null,a=e?null:n.length>0?A("ul",{"aria-disabled":this.disabled,"aria-label":this.label,bind:this,class:cn.itemContainer,key:"item-container",onkeydown:this._handleKeyDown,role:"radiogroup"},n.map((l,u)=>this._renderBasemapGalleryItem(l,u)).toArray()):A("div",{class:pe.empty,key:"empty-message"},A(Zce,{level:this.headingLevel},this.messages.noBasemaps));return A("div",{afterCreate:this._onContainerCreated,class:this.classes(cn.base,pe.widget,pe.panelHeightOnly,r),key:"container"},this._width===0?null:[o,a])}_getRoundRobinIndex(e,i){return(e+i)%i}_handleKeyDown(e){const{key:i}=e;if(!["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(i))return;e.preventDefault();const{items:n,activeBasemapIndex:r}=this.viewModel,s=i==="ArrowUp"||i==="ArrowLeft"?this._getRoundRobinIndex(Math.max(r-1,-1),n.length):this._getRoundRobinIndex(r+1,n.length),o=n.at(s);(o==null?void 0:o.state)==="ready"&&(this.viewModel.activeBasemap=o.basemap),this._focusBasemapItemEnabled=!0}_focusBasemapItem(e){this._focusBasemapItemEnabled&&e.tabIndex===0&&(e.focus(),this._focusBasemapItemEnabled=!1)}_handleClick(e){const i=e.currentTarget["data-item"];i.state==="ready"&&(this.viewModel.activeBasemap=i.basemap)}_renderBasemapGalleryItem(e,i){var v,b;const n=Cee(e.basemap)||Ge("esri/themes/base/images/basemap-toggle-64.svg"),r=e.basemap.title,s=(v=e.basemap.portalItem)==null?void 0:v.snippet,o=((b=e.error)==null?void 0:b.message)||s||r,{viewModel:{state:a,activeBasemapIndex:l}}=this,u=this.disabled||a==="disabled",p=l===i,f=p||l===-1&&i===0?0:-1,m=a==="loading",g={[cn.selectedItem]:p,[cn.itemError]:e.state==="error"},y=`basemapgallery-item-${e.uid}`;return A("li",{afterUpdate:this._focusBasemapItem,"aria-checked":p.toString(),"aria-disabled":u.toString(),"aria-labelledby":y,bind:this,class:this.classes(cn.item,g),"data-item":e,key:e.uid,onclick:this._handleClick,onkeydown:this._handleClick,role:"radio",tabIndex:f,title:o},A("img",{alt:"",class:cn.itemThumbnail,src:n}),A("div",{class:cn.itemContent,key:"content"},A("div",{class:cn.itemTitle,key:"title"},A("span",{id:y},r)),_ee(e.basemap)?this._renderTags(e.basemap):null),e.state==="loading"||p&&m?A("calcite-scrim",null,A("span",{"aria-hidden":"true",class:pe.loaderAnimation,key:"loader",role:"presentation"})):null)}_renderTags(e){return A("div",{class:cn.itemTagsContainer,key:"tag"},this._render3DTag(),See(e)?this._renderBetaTag():null)}_render3DTag(){const{messages:e}=this;return A("calcite-chip",{key:"tag-3d",scale:"s",value:e.tag3D},this.messages.tag3D)}_renderBetaTag(){const{messages:e}=this;return A("calcite-chip",{appearance:"outline-fill",key:"tag-beta",scale:"s",value:e.tagBeta},this.messages.tagBeta)}};c([d()],wi.prototype,"activeBasemap",null),c([d()],wi.prototype,"disabled",void 0),c([d()],wi.prototype,"headingLevel",void 0),c([d()],wi.prototype,"iconClass",void 0),c([d()],wi.prototype,"icon",void 0),c([d()],wi.prototype,"label",null),c([d(),nn("esri/widgets/BasemapGallery/t9n/BasemapGallery")],wi.prototype,"messages",void 0),c([d()],wi.prototype,"source",null),c([d()],wi.prototype,"view",null),c([d()],wi.prototype,"viewModel",void 0),c([d()],wi.prototype,"_focusBasemapItemEnabled",void 0),c([d()],wi.prototype,"_container",void 0),c([d()],wi.prototype,"_width",void 0),c([fd()],wi.prototype,"_handleClick",null),wi=c([S("esri.widgets.BasemapGallery")],wi);const Kce=wi;let Al=class extends X{constructor(e){super(e),this._viewpointHandle=null,this.group=null}initialize(){this.addHandles(Lr(()=>{var e;return(e=this.view)==null?void 0:e.ui},"expand",e=>{const{target:i}=e;i&&i!==this&&i.expanded&&i.group&&i.group===this.group&&this._collapse()}))}destroy(){this._viewpointHandle=null,this.view=null}set autoCollapse(e){this._set("autoCollapse",e),this._watchViewpoint()}set expanded(e){var r;const i=!!e;this._set("expanded",i);const n=(r=this.view)==null?void 0:r.ui;n&&n.emit("expand",{target:this}),this._viewpointHandleChange(i)}get state(){var e;return(e=this.view)!=null&&e.ready?"ready":"disabled"}set view(e){this._get("view")!==e&&(this._set("view",e),e&&On(()=>e.ready,()=>{this.view===e&&this._watchViewpoint()},{once:!0,initial:!0}))}_viewpointHandleChange(e){this._viewpointHandle&&(e?On(()=>{var i;return(i=this.view)==null?void 0:i.stationary},()=>{var i;return(i=this._viewpointHandle)==null?void 0:i.resume()},{once:!0,initial:!0}):this._viewpointHandle.pause())}_watchViewpoint(){const e="viewpoint";this.removeHandles(e),this._viewpointHandle=null;const{autoCollapse:i,view:n}=this;if(!n||!i)return;const r=iW(()=>n.type==="3d"?n.camera:n.viewpoint,()=>this._collapse());this.addHandles(r,e),this._viewpointHandle=r}_collapse(){this.expanded=!1}};c([d({value:!1})],Al.prototype,"autoCollapse",null),c([d({value:!1})],Al.prototype,"expanded",null),c([d()],Al.prototype,"group",void 0),c([d({readOnly:!0})],Al.prototype,"state",null),c([d({value:null})],Al.prototype,"view",null),Al=c([S("esri.widgets.Expand.ExpandViewModel")],Al);const xz=Al;function Tz(t){return e=>{e.hasOwnProperty("_delegatedEventNames")||(e._delegatedEventNames=e._delegatedEventNames?e._delegatedEventNames.slice():[]);const i=e._delegatedEventNames,n=Array.isArray(t)?t:Jce(t);i.push(...n)}}function Jce(t){return t.split(",").map(e=>e.trim())}function Rm(t){return t&&typeof t.render=="function"}function Yce(t){return t&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}const un="esri-expand",ki={base:un,modeAuto:`${un}--auto`,modeDrawer:`${un}--drawer`,modeFloating:`${un}--floating`,container:`${un}__container`,containerExpanded:`${un}__container--expanded`,panel:`${un}__panel`,icon:"esri-collapse__icon",iconExpanded:`${un}__icon--expanded`,iconNumber:`${un}__icon-number`,iconNumberExpanded:`${un}__icon-number--expanded`,content:`${un}__content`,contentExpanded:`${un}__content--expanded`,expandMask:`${un}__mask`,expandMaskExpanded:`${un}__mask--expanded`};let ut=class extends Ln{constructor(e,i){super(e,i),this.closeOnEsc=!0,this.collapseIcon=null,this.collapseTooltip="",this.content="",this.expandTooltip="",this.iconClass=null,this.icon=null,this.iconNumber=0,this.messages=null,this.messagesCommon=null,this.mode="auto",this.viewModel=new xz,this._handleKeyDown=n=>{const{closeOnEsc:r,_toggleButtonEl:s,expanded:o}=this;!o||!r||n.target===s||n.key!=="Escape"||(typeof r=="function"?r(n):r)&&(this.expanded=!1,s==null||s.focus())}}loadDependencies(){return Cc({icon:()=>V(()=>import("./calcite-icon-uORPeLj9.js"),__vite__mapDeps([278,275,273]),import.meta.url)})}get contentId(){return`${this.id}_controls_content`}get expandTitle(){const{expanded:e,messagesCommon:i,collapseTooltip:n,expandTooltip:r}=this;return(e?n||(i==null?void 0:i.collapse):r||(i==null?void 0:i.expand))??""}get autoCollapse(){return this.viewModel.autoCollapse}set autoCollapse(e){this.viewModel.autoCollapse=e}get collapseIconClass(){return ot.collapse}set collapseIconClass(e){this._overrideIfSome("collapseIconClass",e)}get expanded(){return this.viewModel.expanded}set expanded(e){this.viewModel.expanded=e}get expandIconClass(){return Rm(this.content)?this.content.iconClass:ot.expand}set expandIconClass(e){this._overrideIfSome("expandIconClass",e)}get expandIcon(){return Rm(this.content)?this.content.icon:void 0}set expandIcon(e){this._overrideIfSome("expandIcon",e)}get group(){return this.viewModel.group}set group(e){this.viewModel.group=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}expand(){this.viewModel.expanded=!0}collapse(){this.viewModel.expanded=!1}toggle(){this.viewModel.expanded=!this.viewModel.expanded}render(){const{mode:e}=this,i={[ki.modeAuto]:e==="auto",[ki.modeDrawer]:e==="drawer",[ki.modeFloating]:e==="floating"};return A("div",{class:this.classes(ki.base,pe.widget,i),onkeydown:this._handleKeyDown},this._renderMask(),this._renderContainer())}_renderContainer(){const{expanded:e}=this,i={[ki.containerExpanded]:e};return A("div",{class:this.classes(ki.container,i)},this._renderPanel(),this._renderContent())}_renderMask(){const{expanded:e}=this,i={[ki.expandMaskExpanded]:e};return A("div",{bind:this,class:this.classes(ki.expandMask,i),onclick:this._toggle})}_renderBadgeNumber(){const{expanded:e,iconNumber:i}=this;return i&&!e?A("span",{class:ki.iconNumber,key:"expand__icon-number"},i):null}_renderPanelNumber(){const{iconNumber:e,expanded:i}=this;return e&&i?A("span",{class:this.classes(ki.iconNumber,ki.iconNumberExpanded),key:"expand__expand-icon-number"},e):null}_renderIcon(){const e=(this.expanded?this.collapseIcon:this.expandIcon)??"";return A("calcite-icon",{icon:e,key:"icon",scale:"s"})}_renderLegacyIcon(){const{collapseIconClass:e,expandIconClass:i,expanded:n}=this,r={[ki.iconExpanded]:n};return i!=null&&(r[i]=!n),e!=null&&(r[e]=e===i||n),A("span",{"aria-hidden":"true",class:this.classes(ki.icon,r),key:"legacy-icon"})}_renderTitle(){return A("span",{class:ot.fontFallbackText},this.expandTitle)}_renderExpandButton(){const{expanded:e,expandTitle:i,expandIcon:n,collapseIcon:r,contentId:s}=this;return A("div",{afterCreate:this._storeToggleButtonEl,"aria-controls":s,"aria-expanded":e?"true":"false",bind:this,class:pe.widgetButton,onclick:this._toggle,onkeydown:this._toggle,role:"button",tabIndex:0,title:i},this._renderBadgeNumber(),!e&&n!=null||e&&r!=null?this._renderIcon():this._renderLegacyIcon(),this._renderTitle())}_renderPanel(){return A("div",{class:ki.panel},this._renderExpandButton(),this._renderPanelNumber())}_renderContent(){const{expanded:e,contentId:i,content:n}=this,r={[ki.contentExpanded]:e},s={id:i,role:"region",class:this.classes(ki.content,r)};return typeof n=="string"?A("div",{innerHTML:n,key:"content__string",...s}):Rm(n)?A("div",{key:"content__widget",...s},n.render()):n instanceof HTMLElement?A("div",{afterCreate:this._attachToNode,bind:n,key:"content__html-element",...s}):Yce(n)?A("div",{afterCreate:this._attachToNode,bind:n.domNode,key:"content__node",...s}):null}_toggle(){this.toggle()}_attachToNode(e){const i=this;e.appendChild(i)}_storeToggleButtonEl(e){this._toggleButtonEl=e}};c([d({readOnly:!0})],ut.prototype,"contentId",null),c([d({readOnly:!0})],ut.prototype,"expandTitle",null),c([d()],ut.prototype,"autoCollapse",null),c([d()],ut.prototype,"closeOnEsc",void 0),c([d()],ut.prototype,"collapseIconClass",null),c([d()],ut.prototype,"collapseIcon",void 0),c([d()],ut.prototype,"collapseTooltip",void 0),c([d()],ut.prototype,"content",void 0),c([d()],ut.prototype,"expanded",null),c([d()],ut.prototype,"expandIconClass",null),c([d()],ut.prototype,"expandIcon",null),c([d()],ut.prototype,"expandTooltip",void 0),c([d()],ut.prototype,"group",null),c([d()],ut.prototype,"iconClass",void 0),c([d()],ut.prototype,"icon",void 0),c([d()],ut.prototype,"iconNumber",void 0),c([d()],ut.prototype,"label",null),c([d(),nn("esri/widgets/Expand/t9n/Expand")],ut.prototype,"messages",void 0),c([d(),nn("esri/t9n/common")],ut.prototype,"messagesCommon",void 0),c([d()],ut.prototype,"mode",void 0),c([d()],ut.prototype,"view",null),c([d({type:xz})],ut.prototype,"viewModel",void 0),c([fd()],ut.prototype,"_toggle",null),ut=c([S("esri.widgets.Expand")],ut);const S3=ut,nt="esri-search",Be={base:nt,widgetIcon:ot.search,hasMultipleSources:`${nt}--multiple-sources`,isLoading:`${nt}--loading`,isSearching:`${nt}--searching`,showSuggestions:`${nt}--show-suggestions`,showSources:`${nt}--sources`,showWarning:`${nt}--warning`,container:`${nt}__container`,input:`${nt}__input`,inputContainer:`${nt}__input-container`,form:`${nt}__form`,submitButton:`${nt}__submit-button`,sourcesButton:`${nt}__sources-button`,sourcesButtonDown:`${nt}__sources-button--down`,sourcesButtonUp:`${nt}__sources-button--up`,clearButton:`${nt}__clear-button`,sourceName:`${nt}__source-name`,suggestionsMenu:`${nt}__suggestions-menu`,suggestionList:`${nt}__suggestions-list`,suggestionListCurrentLocation:`${nt}__suggestions-list--current-location`,sourcesMenu:`${nt}__sources-menu`,source:`${nt}__source`,warningMenu:`${nt}__warning-menu`,warningMenuBody:`${nt}__warning-body`,warningMenuHeader:`${nt}__warning-header`,warningMenuText:`${nt}__warning-text`,noValueText:`${nt}__no-value-text`},Hc="esri-search-result-renderer",Vc={base:Hc,showMoreResults:`${Hc}__more-results--show-more-results`,moreResults:`${Hc}__more-results`,moreResultsList:`${Hc}__more-results-list`,moreResultsHeader:`${Hc}__more-results-header`,moreResultsItem:`${Hc}__more-results-item`,moreResultsListHeader:`${Hc}__more-results-list-header`};function Xce(t){return t&&typeof t.highlight=="function"}function kTe(t,e,i){return t==null||t>i&&(e===0||t<e)}function _v(t){return t!=null&&typeof t=="object"&&"createQuery"in t&&"queryFeatures"in t&&"layer"in t&&"view"in t}let Pt=class extends Td(ie){constructor(e){super(e),this.autoNavigate=null,this.filter=null,this.getResults=null,this.getSuggestions=null,this.maxResults=null,this.maxSuggestions=null,this.minSuggestCharacters=null,this.outFields=null,this.placeholder="",this.popupEnabled=null,this.popupTemplate=null,this.prefix="",this.resultGraphicEnabled=null,this.resultSymbol=null,this.suggestionsEnabled=null,this.suffix="",this.withinViewEnabled=!1,this.zoomScale=null}};c([d()],Pt.prototype,"autoNavigate",void 0),c([d()],Pt.prototype,"filter",void 0),c([d()],Pt.prototype,"getResults",void 0),c([d()],Pt.prototype,"getSuggestions",void 0),c([d()],Pt.prototype,"maxResults",void 0),c([d()],Pt.prototype,"maxSuggestions",void 0),c([d()],Pt.prototype,"minSuggestCharacters",void 0),c([d()],Pt.prototype,"outFields",void 0),c([d()],Pt.prototype,"placeholder",void 0),c([d()],Pt.prototype,"popupEnabled",void 0),c([d()],Pt.prototype,"popupTemplate",void 0),c([d()],Pt.prototype,"prefix",void 0),c([d()],Pt.prototype,"resultGraphicEnabled",void 0),c([d()],Pt.prototype,"resultSymbol",void 0),c([d()],Pt.prototype,"suggestionsEnabled",void 0),c([d()],Pt.prototype,"suffix",void 0),c([d()],Pt.prototype,"withinViewEnabled",void 0),c([d()],Pt.prototype,"zoomScale",void 0),Pt=c([S("esri.widgets.Search.SearchSource")],Pt);const wk=Pt;let bu=class extends No(ie){constructor(e){super(e),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};c([d({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],bu.prototype,"onFields",void 0),c([d({type:String,json:{write:!0}})],bu.prototype,"operator",void 0),c([d({type:String,json:{write:!0}})],bu.prototype,"searchTerm",void 0),c([d({type:String,json:{write:!0}})],bu.prototype,"searchType",void 0),bu=c([S("esri.rest.support.FullTextSearch")],bu);const Ez=bu,kz=96;function ITe(t,e){const i=e||t.extent,n=t.width,r=Cn(i==null?void 0:i.spatialReference);return i&&n?i.width/n*r*XP*kz:0}function Qce(t,e){return t/(Cn(e)*XP*kz)}function eue(t,e){const i=t.extent,n=t.width-(t.padding?t.padding.left+t.padding.right:0),r=Qce(e,i.spatialReference);return i.clone().expand(r*n/i.width)}function OTe(t,e,i){return tue(t,e)&&iue(t,i)}function tue(t,e){return e===0||$o(t,e)||t<e}function iue(t,e){return e===0||$o(t,e)||t>e}const $3=J.getLogger("esri.widgets.Search.support.geometryUtils");function nue(t,e){var n,r;if(!e)return $3.error("missing-parameter: view is missing."),Promise.reject(new F("searchgeometryutils:missing-parameter","view is missing."));if(!t)return $3.error("missing-parameter: point is missing."),Promise.reject(new F("searchgeometryutils:missing-parameter","point is missing."));if(t.hasZ||e.type==="2d")return Promise.resolve(t);const i=(n=e==null?void 0:e.map)==null?void 0:n.ground;return i!=null&&i.layers.length?i.queryElevation(t,{cache:(r=e.basemapTerrain)==null?void 0:r.elevationQueryCache}).then(s=>s.geometry):Promise.resolve(t)}function x3(t){if(t==null)return null;switch(t.type){case"point":return t;case"extent":return t.center;case"polygon":return t.centroid;case"multipoint":return t.getPoint(0);case"polyline":return t.getPoint(0,0)}return null}function _k(t,e,i){return t==null?null:t.type==="extent"?t:t.type==="multipoint"||t.type==="polygon"||t.type==="polyline"?t.extent:t.type==="point"?Mz(t,e,i):void 0}function x2(t,e,i){return t==null||e==null?null:Mz(t.center,e,i)}function Mz(t,e,i){const n=t.hasZ?t.z:void 0;return e!=null&&e.map?(i!=null?eue(e,i):e.extent).clone().centerAt(t).set({zmax:n,zmin:n}):new Ve({xmin:t.x-.25,ymin:t.y-.25,xmax:t.x+.25,ymax:t.y+.25,spatialReference:t.spatialReference,zmin:n,zmax:n})}const rue=/https?:\/\/services.*\.arcgis\.com/i,sue=/(?:\{([^}]+)\})/g,Zh=J.getLogger("esri.widgets.Search.support.layerSearchUtils");function oue(t,e){const{exactMatch:i=!1,location:n,maxResults:r,spatialReference:s,source:o,sourceIndex:a,suggestResult:l,view:u}=t,{layer:p,filter:f,zoomScale:m}=o,g=u==null?void 0:u.scale,y=Cz(o,u),v=e==null?void 0:e.signal;return Oz(p).then(()=>{const b=p.popupTemplate;return b?b.getRequiredFields(p.fieldsIndex):null}).then(b=>{var H,L,R,D;const{objectIdField:_,returnZ:$}=p,x=Dz(o);if(!Sk(p,x))throw Zh.error("invalid-field: displayField is invalid."),new F("getResults():invalid-field","displayField is invalid.");const E=b&&b.length?b:[x],C=o.outFields||E,M=Iz(C);if(C.includes(_)||M||C.push(_),(H=p.floorInfo)!=null&&H.floorField&&C.push(p.floorInfo.floorField),!(M||Fb(p,C)))throw Zh.error("invalid-field: outField is invalid."),new F("getResults():invalid-field","outField is invalid.");const N=p.createQuery(),{orderByFields:G}=o;if(G&&(N.orderByFields=G),s){N.outSpatialReference=s;const Y=1/Cn(s);Y&&(N.maxAllowableOffset=Y)}const U=p.geometryType==="mesh"||p.geometryType==="multipatch",B=((R=(L=p.capabilities)==null?void 0:L.data)==null?void 0:R.supportsZ)&&!U;if(N.returnZ=B&&$!==!1,N.returnGeometry=!0,N.multipatchOption=U?"xyFootprint":null,C&&(N.outFields=C),n)N.geometry=n;else if(l.key)N.objectIds=[l.key];else{const Y=o.searchFields||[x];if(!Fb(p,Y))throw Zh.error("invalid-field: search field is invalid."),new F("getResults():invalid-field","search field is invalid.");if(Nz(p)&&(N.num=r),y&&(N.geometry=y),!((D=l.text)==null?void 0:D.trim()))return[];const re=l.text,{prefix:oe="",suffix:ke=""}=o,it=Fz(`${oe}${re}${ke}`);Rz(p)&&Lz(p,Y)&&!i&&re&&(N.fullText=Pz({text:re,searchFields:Y}));const wt=zz({searchTerm:it,layer:p,searchFields:Y,filter:f,exactMatch:i,query:N,type:"search"});if(N.where=wt,!Az(N))return[]}return p.queryFeatures(N,{signal:v}).then(Y=>bue(Y,u,o,a,x,g,m))})}function aue(t,e){const{source:i,spatialReference:n,view:r,suggestTerm:s,maxSuggestions:o,sourceIndex:a,exactMatch:l}=t,{layer:u,filter:p}=i,f=e==null?void 0:e.signal,m=Cz(i,r);return Oz(u).then(()=>{if(!Nz(u))return[];const g=Dz(i),y=i.searchFields||[g],v=[];i.suggestionTemplate?i.suggestionTemplate.replaceAll(sue,(B,H)=>(v.push(H),B)):v.push(g);const b=Iz(v);v.includes(u.objectIdField)||b||v.push(u.objectIdField);const _=Sk(u,g),$=b||Fb(u,v),x=Fb(u,y);if(!_)throw Zh.error("invalid-field: displayField is invalid."),new F("getSuggestions():invalid-field","displayField is invalid.");if(!$)throw Zh.error("invalid-field: outField is invalid."),new F("getSuggestions():invalid-field","outField is invalid.");if(!x)throw Zh.error("invalid-field: search field is invalid."),new F("getSuggestions():invalid-field","search field is invalid.");const E=u.createQuery(),{orderByFields:C}=i;if(C&&(E.orderByFields=C),E.outSpatialReference=n,E.returnGeometry=!1,E.num=o,E.outFields=v,m&&(E.geometry=m),!s.trim())return[];const{prefix:M="",suffix:N=""}=i,G=Fz(`${M}${s}${N}`);Rz(u)&&Lz(u,y)&&!l&&s&&(E.fullText=Pz({text:s,searchFields:y}));const U=zz({searchTerm:G,layer:u,searchFields:y,filter:p,exactMatch:l,query:E,type:"suggest"});return E.where=U,Az(E)?u.queryFeatures(E,{signal:f}).then(B=>gue(B,i,a,g)):[]})}function Cz(t,e){const{filter:i,withinViewEnabled:n}=t,r=e==null?void 0:e.extent;return(i==null?void 0:i.geometry)??(n&&r?r:void 0)}function Iz(t){return t&&t.includes("*")}async function Oz(t){t&&await t.load()}function Az(t){return!(!t.fullText&&!t.where)}function Lz(t,e){const i=t==null?void 0:t.indexes;return!i||!(e!=null&&e.length)?!1:i.filter(n=>n.indexType==="FullText").some(n=>{var s;const r=((s=n.fields)==null?void 0:s.split(",").map(o=>o.trim().toLowerCase()))||[];return e.every(o=>r.includes(o.toLowerCase()))})}function Pz({text:t,searchFields:e}){return t.trim().split(" ").filter(i=>!!i.trim()).map(i=>new Ez({onFields:e,searchTerm:i,searchType:"prefix"}))}function Rz(t){var e,i;return((i=(e=t==null?void 0:t.capabilities)==null?void 0:e.query)==null?void 0:i.supportsFullTextSearch)??!1}function Nz(t){var e,i;return((i=(e=t==null?void 0:t.capabilities)==null?void 0:e.query)==null?void 0:i.supportsPagination)??!1}function lue(t){var e,i,n;return((n=(i=(e=t==null?void 0:t.fieldsIndex)==null?void 0:e.fields)==null?void 0:i.find(r=>r.type==="string"))==null?void 0:n.name)??""}function Dz(t){return t.displayField||t.layer.displayField||lue(t.layer)}function Fb(t,e){return!(!t||!(e!=null&&e.length))&&e.every(i=>Sk(t,i))}function Sk(t,e){return!!t.getField(e)}function cue(t){for(let e=0;e<t.length;e++)if(t.charCodeAt(e)>255)return!0;return!1}function uue(t,e,i){let n=null;const{codedValues:r}=t;return r&&r.some(s=>{const o=s.name,a=i?o:o.toLowerCase();return(i?e:e.toLowerCase())===a&&(n=s.code.toString(),!0)}),n}function Fz(t){return t.replaceAll("'","''")}function pf(t,e){const i=e==null?void 0:e.where;return i?`(${t}) AND (${i})`:t}function due({currentTerm:t,field:e,filter:i,exactMatch:n,url:r,type:s}){const o=e==null?void 0:e.type,a=e==null?void 0:e.name;if(o==="string"||o==="date"||o==="global-id"){const l=rue.test(r??""),u=l&&cue(t)?"N":"";return pf(n&&s==="search"?`${a} = ${u}'${t}'`:l?`${a} LIKE ${u}${`'${t}%'`}`:`${`LOWER(${a})`} LIKE ${u}${`'${t.toLowerCase()}%'`}`,i)}if(o==="oid"||o==="small-integer"||o==="integer"||o==="single"||o==="double"){const l=Number(t);return isNaN(l)?null:pf(`${a} = ${l}`,i)}return pf(`${a} = ${t}`,i)}function hue(t,e){return t?` OR (${e})`:`(${e})`}function zz({searchTerm:t,layer:e,searchFields:i,filter:n,exactMatch:r,query:s,type:o}){const{definitionExpression:a,url:l}=e;let u="";return!s.fullText&&t&&i&&i.forEach(p=>{const f=e.getField(p),m=typeof e.getFieldDomain=="function"&&e.getFieldDomain(p),g=(m&&m.type==="coded-value"?uue(m,t,r):null)||t||null;if(g!==null){const y=due({currentTerm:g,field:f,filter:n,exactMatch:r,url:l,type:o});y&&(u+=hue(u,y))}}),a&&u?`(${a}) AND (${u})`:a||u}function pue(t,e){let i=null;const{codedValues:n}=t;return n&&n.length&&n.some(r=>r.code===e&&(i=r.name,!0)),i}function fue(t,e){return t[Object.keys(t).find(i=>i.toLowerCase()===e.toLowerCase())]}function jz(t,e,i){const n=t.sourceLayer,{attributes:r}=t,s=typeof n.getFieldDomain=="function"&&n.getFieldDomain(i);if(e)return bE(e,r);if(i&&r){const o=n.getField(i),a=fue(r,i);return a==null?"":s&&s.type==="coded-value"?pue(s,a)??"":(o==null?void 0:o.type)==="date"?fc(new Date(a)):typeof a=="number"?a.toString():typeof a!="string"?"":a.trim()}return""}function mue(t,e,i,n){const r=t.sourceLayer,{attributes:s}=t,{objectIdField:o}=r,a=o?s[o]:null;return{text:jz(t,e.suggestionTemplate,n),key:a,sourceIndex:i}}function gue(t,e,i,n){return t.features.map(r=>mue(r,e,i,n))}function yue(t){return t!=null&&t.minScale!=null&&t.maxScale!=null}function vue(t,e,i,n,r,s,o){const a=t.clone(),l=t.sourceLayer,u=l==null?void 0:l.objectIdField,p=u?t.attributes[u]:null,f=jz(t,i.searchTemplate,r);s!=null&&yue(l)&&(l.minScale&&l.minScale<s?s=l.minScale:l.maxScale&&l.maxScale>s&&(s=l.maxScale));const m=_k(a.geometry,e,s),g=typeof o=="number"?x2(q(m),e,o):m,y=t.clone();return g!=null&&(y.geometry=Mn.fromExtent(g)),{extent:g,target:y,feature:a,key:p,name:f,sourceIndex:n}}function bue(t,e,i,n,r,s,o){return t.features.map(a=>vue(a,e,i,n,r,s,o))}var T2;let ss=T2=class extends wk{constructor(t){super(t),this.displayField=null,this.exactMatch=null,this.orderByFields=null,this.searchFields=null,this.searchTemplate=null,this.suggestionTemplate=null,this.getResults=(e,i)=>oue({source:this,...e},i),this.getSuggestions=(e,i)=>aue({source:this,...e},i)}set layer(t){this._set("layer",t),t&&t.load().catch(()=>{})}get name(){return this._getLayerTitle()??""}set name(t){this._overrideIfSome("name",t)}clone(){return new T2({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?q(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,layer:this.layer,searchFields:this.searchFields?q(this.searchFields):null,suggestionTemplate:this.suggestionTemplate,zoomScale:this.zoomScale})}_getFirstStringField(){var t,e;return((e=(t=this.layer.fieldsIndex)==null?void 0:t.fields.find(i=>i.type==="string"))==null?void 0:e.name)??""}_getDisplayField(){return this.displayField||this.layer.displayField||this._getFirstStringField()}_getSearchFieldsString(){const{layer:t,searchFields:e}=this;return t.loaded?`: ${(e||[this._getDisplayField()]).map(i=>{const n=t.getField(i);return(n==null?void 0:n.alias)||i}).join(", ")}`:""}_getLayerTitle(){const{layer:t}=this;if(!t)return;const{title:e}=t;return e?`${e}${this._getSearchFieldsString()}`:void 0}};c([d({json:{read:{source:"field.name"},write:{target:"field.name"}}})],ss.prototype,"displayField",void 0),c([d({json:{read:{source:"field.exactMatch"},write:{target:"field.exactMatch"}}})],ss.prototype,"exactMatch",void 0),c([d({value:null})],ss.prototype,"layer",null),c([d()],ss.prototype,"name",null),c([d({type:[String],json:{write:!0}})],ss.prototype,"orderByFields",void 0),c([d()],ss.prototype,"searchFields",void 0),c([d()],ss.prototype,"searchTemplate",void 0),c([d()],ss.prototype,"suggestionTemplate",void 0),ss=T2=c([S("esri.widgets.Search.LayerSearchSource")],ss);const yh=ss;function wue(t){return!!t&&typeof t.x=="number"&&typeof t.y=="number"}function _ue(t){return t&&typeof t.xmin=="number"&&typeof t.ymin=="number"&&typeof t.xmax=="number"&&typeof t.ymax=="number"}let Ll=class extends ie{constructor(e){super(e),this.address=null,this.attributes=null,this.extent=null,this.location=null,this.score=null}};c([d({type:String,json:{write:!0}})],Ll.prototype,"address",void 0),c([d({type:Object,json:{write:!0}})],Ll.prototype,"attributes",void 0),c([d({type:Ve,json:{write:!0}})],Ll.prototype,"extent",void 0),c([d({type:he,json:{write:!0}})],Ll.prototype,"location",void 0),c([d({type:Number,json:{write:!0}})],Ll.prototype,"score",void 0),Ll=c([S("esri.rest.support.AddressCandidate")],Ll);const Gz=Ll,$k={type:String,json:{read:{source:"token"},write:{target:"token"}}};let _i=class extends ie{constructor(e){super(e),this.address=null,this.apiKey=null,this.categories=null,this.countryCode=null,this.forStorage=null,this.location=null,this.locationType=null,this.magicKey=null,this.maxLocations=null,this.outFields=null,this.outSpatialReference=null,this.searchExtent=null}};c([d({type:Object,json:{write:!0}})],_i.prototype,"address",void 0),c([d($k)],_i.prototype,"apiKey",void 0),c([d({type:[String],json:{read:{source:"category",reader:t=>t?t.split(","):null},write:{target:"category",writer:(t,e)=>{e.category=t?t.join(","):null}}}})],_i.prototype,"categories",void 0),c([d({type:String,json:{write:!0}})],_i.prototype,"countryCode",void 0),c([d({type:Boolean,json:{write:!0}})],_i.prototype,"forStorage",void 0),c([d({type:he,json:{write:{writer:(t,e)=>{e.location=t?t.clone().normalize():null}}}})],_i.prototype,"location",void 0),c([d({type:String,json:{write:!0}})],_i.prototype,"locationType",void 0),c([d({type:String,json:{write:!0}})],_i.prototype,"magicKey",void 0),c([d({type:Number,json:{write:!0}})],_i.prototype,"maxLocations",void 0),c([d({type:[String],json:{write:{writer:(t,e)=>{e.outFields=t?t.join(","):null}}}})],_i.prototype,"outFields",void 0),c([d({type:xe,json:{read:{source:"outSR"},write:{target:"outSR"}}})],_i.prototype,"outSpatialReference",void 0),c([d({type:Ve,json:{write:{writer:(t,e)=>{const i=t?t.shiftCentralMeridian():null;e.searchExtent=i}}}})],_i.prototype,"searchExtent",void 0),_i=c([S("esri.rest.support.AddressToLocationsParameters")],_i),_i.from=ti(_i);const Uz=_i;async function Sue(t,e,i){e=Uz.from(e);const n=qg(t),{address:r,...s}=e.toJSON(),o={...r,...s,f:"json"},a=pw({...n.query,...o}),l=hw(a,i),u=`${n.path}/findAddressCandidates`;return $t(u,l).then($ue)}function $ue({data:t}){if(!t)return[];const{candidates:e,spatialReference:i}=t;return e?e.map(n=>{if(!n)return;const{extent:r,location:s}=n,o=!r||_ue(r);return wue(s)&&o?(r&&(r.spatialReference=i),s&&(s.spatialReference=i),Gz.fromJSON(n)):void 0}):[]}let ga=class extends ie{constructor(e){super(e),this.apiKey=null,this.location=null,this.locationType=null,this.outSpatialReference=null}};c([d($k)],ga.prototype,"apiKey",void 0),c([d({type:he,json:{write:{writer:(t,e)=>{const i=t?t.clone().normalize():null,n=i!==void 0;e.location=n?i:null}}}})],ga.prototype,"location",void 0),c([d({type:String,json:{write:!0}})],ga.prototype,"locationType",void 0),c([d({type:xe,json:{read:{source:"outSR"},write:{target:"outSR"}}})],ga.prototype,"outSpatialReference",void 0),ga=c([S("esri.rest.support.LocationToAddressParameters")],ga),ga.from=ti(ga);const Hz=ga;async function xue(t,e,i){e=Hz.from(e);const n=qg(t),r={...e.toJSON(),f:"json"},s=pw({...n.query,...r}),o=hw(s,i),a=`${n.path}/reverseGeocode`;return $t(a,o).then(Tue)}function Tue({data:t}){if(!t)return;const{address:e,location:i}=t,n=(e==null?void 0:e.Match_addr)||"";return Gz.fromJSON({address:n,attributes:e||{},location:i,score:100})}let vh=class extends ie{constructor(e){super(e),this.isCollection=null,this.magicKey=null,this.text=null}};c([d({type:Boolean,json:{write:!0}})],vh.prototype,"isCollection",void 0),c([d({type:String,json:{write:!0}})],vh.prototype,"magicKey",void 0),c([d({type:String,json:{write:!0}})],vh.prototype,"text",void 0),vh=c([S("esri.rest.support.SuggestionCandidate")],vh);const Eue=vh;let Gn=class extends ie{constructor(e){super(e),this.apiKey=null,this.categories=null,this.countryCode=null,this.location=null,this.maxSuggestions=null,this.outSpatialReference=null,this.searchExtent=null,this.text=null}};c([d($k)],Gn.prototype,"apiKey",void 0),c([d({type:[String],json:{read:{source:"category",reader:t=>t?t.split(","):null},write:{target:"category",writer:(t,e)=>{e.category=t?t.join(","):null}}}})],Gn.prototype,"categories",void 0),c([d({type:String,json:{write:!0}})],Gn.prototype,"countryCode",void 0),c([d({type:he,json:{write:{writer:(t,e)=>{e.location=t?t.clone().normalize():null}}}})],Gn.prototype,"location",void 0),c([d({type:Number,json:{write:!0}})],Gn.prototype,"maxSuggestions",void 0),c([d({type:xe,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Gn.prototype,"outSpatialReference",void 0),c([d({type:Ve,json:{write:{writer:(t,e)=>{const i=t?t.shiftCentralMeridian():null;e.searchExtent=JSON.stringify(i)}}}})],Gn.prototype,"searchExtent",void 0),c([d({type:String,json:{write:!0}})],Gn.prototype,"text",void 0),Gn=c([S("esri.rest.support.SuggestLocationsParameters")],Gn),Gn.from=ti(Gn);const Vz=Gn;async function kue(t,e,i){const n=qg(t),r={...(e=Vz.from(e)).toJSON(),f:"json"},s=pw({...n.query,...r}),o=hw(s,i),a=`${n.path}/suggest`;return $t(a,o).then(Mue)}function Mue(t){const{data:e}=t;if(!e)return[];const{suggestions:i}=e;return i?i.map(n=>new Eue(n)):[]}const Cue="Single Line Input",Iue=3e5;function Oue(t,e){return t.location?Nue(t,e):Due(t,e)}function Bz(t,e){var n;if(e.localSearchDisabled)return null;const i=t==null?void 0:t.scale;return typeof i=="number"&&i<=Iue?(n=t==null?void 0:t.extent)==null?void 0:n.center:null}async function Aue(t,e){const{source:i,spatialReference:n,view:r,suggestTerm:s,maxSuggestions:o,sourceIndex:a}=t,l=new Vz,{apiKey:u,url:p}=i,f=qz(i,r),m=e==null?void 0:e.signal;if(!p)return null;u&&(l.apiKey=u),i.categories&&(l.categories=i.categories),n&&(l.outSpatialReference=n);const g=Bz(r,i);if(g&&(l.location=g),!s.trim())return null;const{prefix:y="",suffix:v=""}=i,b=`${y}${s}${v}`;return l.text=b,f&&(l.searchExtent=f),l.maxSuggestions=o,i.countryCode&&(l.countryCode=i.countryCode),kue(p,l,{signal:m}).then(_=>zue(_,a))}function Lue(t){return!!t&&/(?:geocode\-api\.arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(t)}function Pue(t){return!!t&&/(?:\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/i.test(t)}function T3(t){return!!t&&/(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(t)}const Rue="https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer";async function Nue(t,e){const{source:i,spatialReference:n,location:r,sourceIndex:s,view:o}=t,{apiKey:a,url:l,zoomScale:u,defaultZoomScale:p}=i;if(l==null)return[];const f=o==null?void 0:o.scale,m=e==null?void 0:e.signal,g=new Hz;g.location=r,a&&(g.apiKey=a),n&&(g.outSpatialReference=n);try{return Wz([await xue(l,g,{signal:m})],{sourceIndex:s,scale:f,view:o,zoomScale:u,defaultZoomScale:p})}catch{return[]}}function qz(t,e){const{filter:i,withinViewEnabled:n}=t,r=e==null?void 0:e.scale,s=e==null?void 0:e.extent,o=i==null?void 0:i.geometry;return _k(o,e,r)||(n&&s?s:void 0)}async function Due(t,e){var N;const{source:i,suggestResult:n,spatialReference:r,view:s,maxResults:o,sourceIndex:a}=t,l=i==null?void 0:i.zoomScale,u=i==null?void 0:i.defaultZoomScale;if(!((N=n.text)==null?void 0:N.trim()))return null;const f=!n.key&&i.prefix?i.prefix:"",m=!n.key&&i.suffix?i.suffix:"",g=`${f}${n.text}${m}`,y=new Uz,{apiKey:v,url:b}=i,_=s==null?void 0:s.scale,$=qz(i,s),x=e==null?void 0:e.signal;if(v&&(y.apiKey=v),!b)return null;i.categories&&(y.categories=i.categories),i.locationType&&(y.locationType=i.locationType),r&&(y.outSpatialReference=r);const E=Bz(s,i);E&&(y.location=E),y.maxLocations=o,$&&(y.searchExtent=$),i.countryCode&&(y.countryCode=i.countryCode);const{key:C}=n,M=`${C}`;return C&&(y.magicKey=M),y.address={},y.address[i.singleLineFieldName||Cue]=g,i.outFields&&(y.outFields=i.outFields),Sue(b,y,{signal:x}).then(G=>Wz(G,{key:M,scale:_,sourceIndex:a,view:s,zoomScale:l,defaultZoomScale:u}))}function Fue(t,e){return{text:t.text,key:t.magicKey,sourceIndex:e}}function zue(t,e){return t.map(i=>Fue(i,e))}function jue(t,e){const{key:i,scale:n,sourceIndex:r,view:s,zoomScale:o,defaultZoomScale:a}=e,{attributes:l,extent:u,location:p,address:f}=t,m=new mp({geometry:p,attributes:l}),g=u||p,y=_k(g,s,n),v=typeof o=="number"?x2(y,s,o):typeof a=="number"&&(g==null?void 0:g.type)==="point"?x2(y,s,a):y,b=p?`${p.x},${p.y}`:"",_=f||b,$=m.clone();return v!=null&&($.geometry=Mn.fromExtent(v)),{extent:v,feature:m,target:$,key:i,name:_,sourceIndex:r}}function Wz(t,e){return t.filter(Boolean).map(i=>jue(i,e))}var E2;const Gue="esri.widgets.Search.LocatorSearchSource";let Pi=E2=class extends wk{constructor(t){super(t),this.apiKey=null,this.categories=null,this.countryCode=null,this.defaultZoomScale=null,this.localSearchDisabled=!1,this.locationType=null,this.name="",this.placeholder="",this.searchTemplate="",this.singleLineFieldName=null,this.suggestionsEnabled=null,this.url=null,this.zoomScale=null,this.getResults=(e,i)=>Oue({source:this,...e},i),this.getSuggestions=(e,i)=>Aue({source:this,...e},i)}clone(){return new E2({apiKey:this.apiKey,autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?q(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,categories:this.categories?q(this.categories):null,countryCode:this.countryCode,locationType:this.locationType,searchTemplate:this.searchTemplate,singleLineFieldName:this.singleLineFieldName,zoomScale:this.zoomScale})}};c([d()],Pi.prototype,"apiKey",void 0),c([d()],Pi.prototype,"categories",void 0),c([d()],Pi.prototype,"countryCode",void 0),c([d({json:{write:!0}})],Pi.prototype,"defaultZoomScale",void 0),c([d()],Pi.prototype,"localSearchDisabled",void 0),c([d()],Pi.prototype,"locationType",void 0),c([d({json:{write:!0}})],Pi.prototype,"name",void 0),c([d({json:{write:!0}})],Pi.prototype,"placeholder",void 0),c([d()],Pi.prototype,"searchTemplate",void 0),c([d({json:{write:!0}})],Pi.prototype,"singleLineFieldName",void 0),c([d({json:{read:{source:"suggest"},write:{target:"suggest"}}})],Pi.prototype,"suggestionsEnabled",void 0),c([d({json:{write:!0}})],Pi.prototype,"url",void 0),c([d({json:{write:!0}})],Pi.prototype,"zoomScale",void 0),Pi=E2=c([S(Gue)],Pi);const Zz=Pi;let wu=class extends ie{constructor(e){super(e),this.geometries=[],this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map(r=>r.toJSON()),i=this.geometries[0],n={};return n.outSR=Qv(this.outSpatialReference),n.inSR=Qv(i.spatialReference),n.geometries=JSON.stringify({geometryType:Cg(i),geometries:e}),this.transformation&&(n.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),this.transformForward!=null&&(n.transformForward=this.transformForward),n}};c([d()],wu.prototype,"geometries",void 0),c([d({json:{read:{source:"outSR"}}})],wu.prototype,"outSpatialReference",void 0),c([d()],wu.prototype,"transformation",void 0),c([d()],wu.prototype,"transformForward",void 0),wu=c([S("esri.rest.support.ProjectParameters")],wu);const Kz=wu,Uue=ti(Kz);async function Hue(t,e,i){e=Uue(e);const n=qg(t),r={...n.query,f:"json",...e.toJSON()},s=e.outSpatialReference,o=Cg(e.geometries[0]),a=hw(r,i);return $t(n.path+"/project",a).then(({data:{geometries:l}})=>TF(l,o,s))}const Jz=J.getLogger("esri.widgets.support.geolocationUtils"),Vue={maximumAge:0,timeout:15e3,enableHighAccuracy:!0};function Bue(){const t=z("esri-geolocation");return t||Jz.warn("geolocation-unsupported","Geolocation unsupported."),t}function que(){const t=window.isSecureContext;return t||Jz.warn("insecure-context","Geolocation requires a secure origin."),t}function E3(){return Bue()&&que()}function Wue(t){return t||(t=Vue),new Promise((i,n)=>{setTimeout(()=>n(new F("geolocation:timeout","getting the current geolocation position timed out")),15e3),navigator.geolocation.getCurrentPosition(i,n,t??void 0)})}function Zue(t,e){const{position:i,view:n}=t,r=Kue(i),s=r==null?void 0:r.coords;if(!s)throw new F("geometry-service:no-coords","Geolocation has no coordinates");return Yue(Jue(s),n,e)}function Kue(t){const e=t&&t.coords||{},i={accuracy:e.accuracy,altitude:e.altitude,altitudeAccuracy:e.altitudeAccuracy,heading:e.heading,latitude:e.latitude,longitude:e.longitude,speed:e.speed};return t&&{coords:i,timestamp:t.timestamp}}function Jue({longitude:t,latitude:e,altitude:i}){return new he({longitude:t,latitude:e,z:i||void 0,spatialReference:{wkid:4326}})}function Yue(t,e,i){if(!e)return Promise.resolve(t);const n=e.spatialReference;return n.isWGS84?Promise.resolve(t):n.isWebMercator?Promise.resolve(Na(t)):Xue(i).then(r=>{if(!r)throw new F("geometry-service:missing-url","Geometry service URL is missing");const s=new Kz({geometries:[t],outSpatialReference:n});return Hue(r,s,i).then(o=>o[0])})}function Xue(t){if(Ae.geometryServiceUrl)return Promise.resolve(Ae.geometryServiceUrl);const e=ir.getDefault();return e.load(t).catch(()=>{}).then(()=>{var i,n;return(n=(i=e.helperServices)==null?void 0:i.geometry)==null?void 0:n.url})}function Mi(t,e){return t.hasOwnProperty(e)&&t[e]!=null&&t[e]!==""}const Que=()=>H1("esri/widgets/Search/t9n/Search"),Yz="esri.widgets.Search.SearchViewModel",Qo=J.getLogger(Yz),k3="highlight",Sv=te.ofType({key:t=>t.layer?"layer":"locator",base:wk,typeMap:{layer:yh,locator:Zz}}),M3=xe.WGS84,ede="esri/images/search/search-symbol-32.png",tde=/<[\s\S]*?>/g,bh=-1;let _e=class extends Y6(An.EventedMixin(X)){constructor(e){super(e),this._gotoController=null,this._searching=null,this._updatingPromise=null,this._createdFeatureLayers=[],this.autoNavigate=!0,this.autoSelect=!0,this.defaultPopupTemplate=null,this.defaultSources=new Sv,this.defaultSymbols={point:new lw({url:Ge(ede),size:24,width:24,height:24}),polyline:new Ja({color:[130,130,130,1],width:2}),polygon:new Vg({color:[235,235,235,.4],outline:{color:[130,130,130,1],width:2}})},this.includeDefaultSources=!0,this.maxInputLength=128,this.maxResults=6,this.maxSuggestions=6,this.messages=null,this.minSuggestCharacters=3,this.popupEnabled=!0,this.popupTemplate=null,this.portal=ir.getDefault(),this.resultCount=null,this.resultGraphicEnabled=!0,this.resultGraphic=null,this.results=null,this.selectedSuggestion=null,this.searchAllEnabled=!0,this.selectedResult=null,this.sources=new Sv,this.suggestionDelay=350,this.suggestionCount=null,this.suggestions=null,this.suggestionsEnabled=!0,this.view=null}initialize(){const e=async()=>{const i=await Que();this.messages=i,this.defaultPopupTemplate=new zE({title:i.searchResult,content:"{Match_addr}"})};e(),this.addHandles([Z(()=>[this.includeDefaultSources,this.view,this.portal],()=>this._update(),De),N1(e)])}destroy(){this._destroyFeatureLayers(),this._abortGoTo(),this.clearGraphics()}get activeSource(){return this.allSources.at(this.activeSourceIndex)??null}get activeSourceIndex(){return this.allSources.length===1||!this.searchAllEnabled?0:bh}set activeSourceIndex(e){this._overrideIfSome("activeSourceIndex",e)}get allPlaceholder(){var e;return(e=this.messages)==null?void 0:e.allPlaceholder}set allPlaceholder(e){this._overrideIfSome("allPlaceholder",e)}get allSources(){const{sources:e,defaultSources:i,includeDefaultSources:n}=this,r=typeof n=="function"?n.call(null,{sources:e,defaultSources:i}):n?i.concat(e):e,s=this._get("allSources")||new Sv;return s.removeAll(),s.addMany(r.filter(Boolean)),s}get locationEnabled(){return this._get("locationEnabled")||E3()}set locationEnabled(e){if(e===void 0)return void this._clearOverride("locationEnabled");const i=E3();if(e&&!i){const n=new F("locationEnabled:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});Qo.error(n)}this._override("locationEnabled",!!e&&i)}get placeholder(){const{allSources:e,activeSourceIndex:i,allPlaceholder:n}=this;if(i===bh)return n??"";const r=e.at(i);return(r==null?void 0:r.placeholder)??""}set searchTerm(e){this._set("searchTerm",e||""),this.clearGraphics(),this.selectedSuggestion&&this.selectedSuggestion.text!==e&&this._set("selectedSuggestion",null),e===""&&this._clear()}get searchTerm(){return this._get("searchTerm")||""}get state(){return this._searching?"searching":this.updating?"loading":this.allSources.length===0?"disabled":"ready"}get updating(){return this._updatingPromise!=null}clear(){this.searchTerm=""}clearGraphics(){this._removeHighlight(),this._closePopup();const{view:e,resultGraphic:i}=this;e&&i&&e.graphics.remove(i),this._set("resultGraphic",null)}search(e,i){this.emit("search-start"),this.clearGraphics();const n=this._createSuggestionForSearch(e),r=(async()=>{var s;try{await this.when();const o=await this._getResultsFromSources(n,i);if((s=i==null?void 0:i.signal)!=null&&s.aborted)return null;const a={activeSourceIndex:this.activeSourceIndex,searchTerm:n.text??"",numResults:0,numErrors:0,errors:[],results:[]};this._formatResponse(a,o,n);const l=this._getFirstResult(a.results),u=n.location&&l?l.name:n.text,p=u==null?void 0:u.replace(tde,"");return this._set("searchTerm",p),(n.key&&typeof n.sourceIndex=="number"||n.location)&&this._set("selectedSuggestion",n),this._set("results",a.results),this._set("resultCount",a.results.reduce((f,m)=>{var g;return f+(((g=m.results)==null?void 0:g.length)??0)},0)),this.emit("search-complete",a),await this._selectFirstResult(l),a}finally{this._clearSearching()}})();return this._searching=r,r}async searchNearby(e){if(!this.locationEnabled){const n=new F("searchNearby:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});throw Qo.error(n),n}const i=(async()=>{try{const n=await Wue(),r=await Zue({position:n,view:this.view},e);return await this.search(r,e)}finally{this._clearSearching()}})();return this._searching=i,i}async select(e){if(this.clearGraphics(),!e){const U=new F("select:missing-parameter","Cannot select without a searchResult.",{searchResult:e});throw Qo.error(U),U}const{view:i}=this,n=Mi(e,"sourceIndex")?e.sourceIndex:this._getSourceIndexOfResult(e),r=n!=null?this.allSources.at(n):null;if(!r){const U=new F("select:missing-source","Cannot select without a source.",{source:r});throw Qo.error(U),U}const s=r instanceof yh?this._getLayerSourcePopupTemplate(r):r.popupTemplate,o=r.resultSymbol||this._getDefaultSymbol(e),a=Mi(r,"resultGraphicEnabled")?r.resultGraphicEnabled:this.resultGraphicEnabled,l=Mi(r,"autoNavigate")?r.autoNavigate:this.autoNavigate,u=(Mi(r,"popupEnabled")?r.popupEnabled:this.popupEnabled)?s||this.popupTemplate||this.defaultPopupTemplate:null,{feature:p}=e;if(!p){const U=new F("select:missing-feature","Cannot select without a feature.",{feature:p});throw Qo.error(U),U}const{attributes:f,geometry:m,layer:g,sourceLayer:y}=p,v=x3(m),b={layerViewQuery:this._getLayerView(p),elevationQuery:i&&v!=null?nue(v,i).catch(()=>v):Promise.resolve(v)},_=await Yl(b),$=_.layerViewQuery.value,x=_.elevationQuery.value;o instanceof Bg&&(o.text=e.name);const E=i&&l?e.target||e.extent:null;await(E!=null?this._goToSearchResult(E):Promise.resolve());const M=$?p:new mp({geometry:m,symbol:o,attributes:f,layer:g,sourceLayer:y,popupTemplate:u}),N=i==null?void 0:i.popup,G=N&&M.getEffectivePopupTemplate(N.defaultPopupTemplateEnabled);return G&&await i.openPopup({features:[M],location:x}),$&&Xce($)&&!G&&this._highlightFeature({graphic:M,layerView:$}),!$&&a&&i&&i.graphics.push(M),this._setResultFloor(e),this._set("selectedResult",e),this._set("resultGraphic",M),this.emit("select-result",{result:e,source:r,sourceIndex:n}),e}async suggest(e,i,n){const r=e||this.searchTerm;this.emit("suggest-start",{searchTerm:r}),await this._suggestTimer(i,n);const s=await this._suggestImmediate(r,n);return this._set("suggestions",s==null?void 0:s.results),this._set("suggestionCount",(s==null?void 0:s.results.reduce((o,a)=>{var l;return o+(((l=a.results)==null?void 0:l.length)??0)},0))??null),this.emit("suggest-complete",s),s}async when(){await Ha(()=>!this.updating)}async _update(){const{portal:e,view:i}=this;if(this.includeDefaultSources){const n=this._updatingPromise=Yl([e==null?void 0:e.load(),i==null?void 0:i.when()]);if(this.destroyed||(await n,n!==this._updatingPromise))return}await Ha(()=>this.messages),this.destroyed||this._updateDefaultSources(),this._updatingPromise=null}_clearSearching(){this._searching=null}_convertHelperServices(){var i,n;const e=(n=(i=this.portal)==null?void 0:i.helperServices)==null?void 0:n.geocode;return e?e.map(r=>{var l;if(r.placefinding===!1)return;const s=Ae.apiKey&&T3(r.url)?{url:Rue}:null,o=Zz.fromJSON({...r,...s}),a=o.url;if(T3(a)||Pue(a)||Lue(a)){const u=o.outFields??["Addr_type","Match_addr","StAddr","City"],p=(o.placeholder||((l=this.messages)==null?void 0:l.placeholder))??"",f=typeof o.defaultZoomScale=="number"?o.defaultZoomScale:2500;o.singleLineFieldName="SingleLine",o.outFields=u,o.placeholder=p,o.defaultZoomScale=f}return o.singleLineFieldName?o:void 0}).filter(Qi):[]}_destroyFeatureLayers(){this._createdFeatureLayers.forEach(e=>e==null?void 0:e.destroy()),this._createdFeatureLayers=[]}_getLayerSources(e,i){var r;const n=(r=this.view)==null?void 0:r.map;return e.map(s=>{const o=n.findLayerById(s.id);if(!o)return;const a=this._getLayerJSON(s),l=yh.fromJSON(a);return l.placeholder=i,this._getLayer(o,a).then(u=>{l.layer=u}),l}).filter(Qi).toArray()}_getTableSources(e,i){var r;const n=(r=this.view)==null?void 0:r.map;return e.map(s=>{if(!s.id)return;const o=n.findTableById(s.id);if(!o)return;const a=this._getLayerJSON(s),l=yh.fromJSON(a);return l.placeholder=i,this._getLayer(o,a).then(u=>{l.layer=u}),l}).filter(Qi).toArray()}_convertApplicationProperties(){var a,l,u;const e=(a=this.view)==null?void 0:a.map,i=(u=(l=e==null?void 0:e.applicationProperties)==null?void 0:l.viewing)==null?void 0:u.search;if(!i)return[];const{enabled:n,hintText:r,layers:s,tables:o}=i;return n?[...this._getLayerSources(s,r),...this._getTableSources(o,r)]:[]}async _getSubLayer(e,i){var s;if(await e.load(),!e.allSublayers)throw new Error;const n=e.allSublayers.find(o=>o.id===i.subLayer);if(!n)throw new Error;const r=await((s=n.createFeatureLayer)==null?void 0:s.call(n));if(!r)throw new Error;return this._createdFeatureLayers.push(r),r}async _getBuildingSubLayer(e,i){await e.load();const n=e.allSublayers.find(r=>r.id===i.subLayer);if((n==null?void 0:n.type)!=="building-component")throw new Error;if(await n.load(),n.associatedLayer==null)throw new Error;return await n.associatedLayer.load(),n}async _getLayer(e,i){if(e.type==="feature"||e.type==="scene"||e.type==="csv"||e.type==="geojson"||e.type==="ogc-feature")return e;if(e.type==="map-image")try{return await this._getSubLayer(e,i)}catch{const r=new F("search:create-featurelayer","Could not create a FeatureLayer from the MapImageLayer",{layer:e});return Qo.error(r),null}return e.type==="building-scene"?this._getBuildingSubLayer(e,i):null}_getLayerJSON(e){return typeof e.toJSON=="function"?e.toJSON():e}_updateDefaultSources(){const{defaultSources:e,includeDefaultSources:i}=this;this._destroyFeatureLayers(),e.removeAll(),i&&e.addMany([...this._convertApplicationProperties(),...this._convertHelperServices()])}_abortGoTo(){this._gotoController&&this._gotoController.abort(),this._gotoController=null}_clear(){this._abortGoTo(),this._set("resultCount",null),this._set("results",null),this._set("suggestions",null),this._set("suggestionCount",null),this._set("selectedResult",null),this._set("selectedSuggestion",null),this.emit("search-clear")}_closePopup(){var s;const e=(s=this.view)==null?void 0:s.popup,{resultGraphic:i}=this;if(!e||!i)return;const n="selectedFeature"in e,r=n?e.selectedFeature:null;n&&r&&r===i&&e.close()}_suggestTimer(e,i){const n=e??this.suggestionDelay;return ST(n,null,i==null?void 0:i.signal)}_createLocationForSearch(e){return e instanceof mp?x3(e.geometry):e instanceof he?e:Array.isArray(e)&&e.length===2?new he({longitude:e[0],latitude:e[1]}):null}_createSuggestionForSearch(e){if(e&&Mi(e,"key")&&Mi(e,"text")&&Mi(e,"sourceIndex"))return e;const i=this._createLocationForSearch(e),n=typeof e=="string"?e:this.searchTerm,{selectedSuggestion:r,selectedResult:s}=this,o=!e&&r&&s,a=o&&r.key===s.key&&r.sourceIndex===s.sourceIndex,l=o&&r.location;return a||l?r:{location:i,text:i?"":n,sourceIndex:null,key:null}}_getFirstResult(e){let i=null;return e&&e.some(n=>{const{results:r}=n,s=r==null?void 0:r[0],o=!!s;return o&&(i=s),o}),i}async _selectFirstResult(e){return this.autoSelect&&e?this.select(e):null}async _suggestImmediate(e,i){var s;await this.when();const n=await this._getSuggestionsFromSources(e,i);if((s=i==null?void 0:i.signal)!=null&&s.aborted)return null;const r={activeSourceIndex:this.activeSourceIndex,searchTerm:e??"",numResults:0,numErrors:0,errors:[],results:[]};return this._formatResponse(r,n),r}_formatSourceResponse(e,i,n){const r=(i==null?void 0:i.value)||[],s=i==null?void 0:i.error,o=this.allSources.at(n);if(s){const a={sourceIndex:n,source:o,error:s};e.errors.push(a),Qo.error(s),e.numErrors++}else{const a={sourceIndex:n,source:o,results:r};e.results.push(a),e.numResults+=r.length}}_formatResponse(e,i,n){if(i)if(e.activeSourceIndex===bh){const r=n&&Mi(n,"sourceIndex")&&n.sourceIndex!==-1?n.sourceIndex:void 0;i.forEach((s,o)=>{const a=r!==void 0?r:o;this._formatSourceResponse(e,s,a)})}else this._formatSourceResponse(e,i[0],e.activeSourceIndex)}async _getResultsFromSources(e,i){const{allSources:n}=this,r=!e.location&&Mi(e,"sourceIndex")?e.sourceIndex:this.activeSourceIndex,s=[];if(!n.length){const o=new F("search:no-sources-defined","At least one source is required.",{allSources:n});throw Qo.error(o),o}return r===bh?n.forEach((o,a)=>{s.push(this._getResultsFromSource(e,a,i))}):s.push(this._getResultsFromSource(e,r,i)),Yl(s)}async _getSuggestionsFromSources(e,i){const{allSources:n,activeSourceIndex:r}=this,s=[];if(!n.length){const o=new F("suggest:no-sources-defined","At least one source is required.",{allSources:n});throw Qo.error(o),o}return r===bh?n.forEach((o,a)=>{s.push(this._getSuggestionsFromSource(e,a,i))}):s.push(this._getSuggestionsFromSource(e,r,i)),Yl(s)}async _getResultsFromSource(e,i,n){var p,f;const r=i!=null?this.allSources.at(i):null;if(!r)return null;const{location:s=null}=e,o=((p=this.view)==null?void 0:p.spatialReference)||M3,a=Mi(r,"maxResults")?r.maxResults:this.maxResults,l=!!(r instanceof yh&&Mi(r,"exactMatch"))&&r.exactMatch,{view:u}=this;return(f=r.getResults)==null?void 0:f.call(r,{view:u,sourceIndex:i,location:s,suggestResult:e,spatialReference:o,exactMatch:l,maxResults:a},n)}async _getSuggestionsFromSource(e,i,n){var l,u;const r=this.allSources.at(i);if(!r)return null;e??(e="");const s=Mi(r,"suggestionsEnabled")?r.suggestionsEnabled:this.suggestionsEnabled,o=e==null?void 0:e.length,a=Mi(r,"minSuggestCharacters")?r.minSuggestCharacters:this.minSuggestCharacters;if(s&&e.trim()&&o>=a){const p=((l=this.view)==null?void 0:l.spatialReference)||M3,f=Mi(r,"maxSuggestions")?r.maxSuggestions:this.maxSuggestions,{view:m}=this,g=!!(r instanceof yh&&Mi(r,"exactMatch"))&&r.exactMatch;return(u=r.getSuggestions)==null?void 0:u.call(r,{view:m,sourceIndex:i,suggestTerm:e,spatialReference:p,maxSuggestions:f,exactMatch:g},n)}return null}_getLayerSourcePopupTemplate(e){const{layer:i}=e;if(i)return Mi(e,"popupTemplate")?e.popupTemplate:i.popupTemplate}_getSourceIndexOfResult(e){const i=this.results;if(!i)return null;let n=null;return i.some(r=>r.results.some(s=>s===e&&(n=r.sourceIndex,!0))),n}async _goToSearchResult(e){this._abortGoTo();const i=new AbortController;this._gotoController=i;const n={target:{target:e},options:{signal:i.signal}};e||(n.options.animate=!1),await this.callGoTo(n),this._gotoController=null}_getDefaultSymbol(e){var r;const{defaultSymbols:i}=this,n=(r=e.feature)==null?void 0:r.geometry;if(n==null)return null;switch(n.type){case"point":case"multipoint":return i.point;case"polyline":return i.polyline;case"extent":case"polygon":return i.polygon;default:return null}}_removeHighlight(){this.removeHandles(k3)}async _getLayerView(e){var r,s;const{view:i}=this;if(!e||!i||((r=e.layer)==null?void 0:r.type)==="building-component"||((s=e.layer)==null?void 0:s.type)==="subtype-sublayer")return null;const{layer:n}=e;return n?(await i.when(),i.whenLayerView(n)):null}_highlightFeature(e){const{graphic:i,layerView:n}=e,{attributes:r,layer:s}=i,{objectIdField:o}=s,a=(o&&(r==null?void 0:r[o]))??null,l=n.highlight(a??i);this.addHandles(l,k3)}_setResultFloor(e){var s,o,a;const{view:i}=this,n=(s=e.feature)==null?void 0:s.attributes,r=(o=e.feature)==null?void 0:o.sourceLayer;if(r&&"floorInfo"in r&&((a=r==null?void 0:r.floorInfo)!=null&&a.floorField)&&n){const l=n[r.floorInfo.floorField];i==null||i.emit("select-result-floor",l)}}};_e.ALL_INDEX=bh,c([d()],_e.prototype,"_searching",void 0),c([d()],_e.prototype,"_updatingPromise",void 0),c([d({readOnly:!0,value:null})],_e.prototype,"activeSource",null),c([d()],_e.prototype,"activeSourceIndex",null),c([d()],_e.prototype,"allPlaceholder",null),c([d({readOnly:!0})],_e.prototype,"allSources",null),c([d()],_e.prototype,"autoNavigate",void 0),c([d()],_e.prototype,"autoSelect",void 0),c([d()],_e.prototype,"defaultPopupTemplate",void 0),c([d({readOnly:!0})],_e.prototype,"defaultSources",void 0),c([d()],_e.prototype,"defaultSymbols",void 0),c([d()],_e.prototype,"includeDefaultSources",void 0),c([d()],_e.prototype,"locationEnabled",null),c([d()],_e.prototype,"maxInputLength",void 0),c([d()],_e.prototype,"maxResults",void 0),c([d()],_e.prototype,"maxSuggestions",void 0),c([d()],_e.prototype,"messages",void 0),c([d()],_e.prototype,"minSuggestCharacters",void 0),c([d({readOnly:!0})],_e.prototype,"placeholder",null),c([d()],_e.prototype,"popupEnabled",void 0),c([d({type:zE})],_e.prototype,"popupTemplate",void 0),c([d({type:ir})],_e.prototype,"portal",void 0),c([d()],_e.prototype,"resultCount",void 0),c([d()],_e.prototype,"resultGraphicEnabled",void 0),c([d({readOnly:!0})],_e.prototype,"resultGraphic",void 0),c([d({readOnly:!0})],_e.prototype,"results",void 0),c([d({readOnly:!0})],_e.prototype,"selectedSuggestion",void 0),c([d()],_e.prototype,"searchAllEnabled",void 0),c([d({readOnly:!0})],_e.prototype,"selectedResult",void 0),c([d()],_e.prototype,"searchTerm",null),c([d({type:Sv})],_e.prototype,"sources",void 0),c([d({readOnly:!0})],_e.prototype,"state",null),c([d()],_e.prototype,"suggestionDelay",void 0),c([d()],_e.prototype,"suggestionCount",void 0),c([d({readOnly:!0})],_e.prototype,"suggestions",void 0),c([d()],_e.prototype,"suggestionsEnabled",void 0),c([d({readOnly:!0})],_e.prototype,"updating",null),c([d()],_e.prototype,"view",void 0),c([d()],_e.prototype,"clear",null),_e=c([S(Yz)],_e);const Nh=_e;let Pl=class extends Ln{constructor(e,i){super(e,i),this.messages=null,this.showMoreResultsOpen=!1,this.viewModel=null}destroy(){this.viewModel=null}render(){const e={[Vc.showMoreResults]:this.showMoreResultsOpen};return A("div",{class:this.classes(Vc.base,pe.widget)},A("div",{class:this.classes(Vc.moreResults,e),key:"esri-search-renderer__container"},this._renderSearchResultName(),this._renderMoreResults()))}_renderMoreResults(){return A("div",{key:"esri-search-renderer__more-results"},this._renderMoreResultsButton(),this._renderMoreResultsLists())}_renderSearchResultName(){var n;const e=(n=this.viewModel)==null?void 0:n.selectedResult,i=(e==null?void 0:e.name)||"";return A("div",{class:Vc.moreResultsItem,key:"esri-search-renderer__result-name"},i)}_renderMoreResultsLists(){const{viewModel:e}=this;if(!e)return[];const i=e.results;if((e.resultCount??0)<2)return null;const n=i==null?void 0:i.map(r=>this._renderMoreResultsList(r));return A("div",{class:Vc.moreResultsList,key:"esri-search-renderer__more-results-container"},n)}_renderMoreResultsButton(){const{messages:e,viewModel:i}=this;return i?(i.resultCount??0)<2?null:A("div",{class:Vc.moreResultsItem,key:"esri-search-renderer__more-results-button"},A("a",{bind:this,class:pe.anchor,href:"#",onclick:this._showMoreResultsClick,onkeydown:this._showMoreResultsClick},this.showMoreResultsOpen?e.hideMoreResults:e.showMoreResults)):null}_renderMoreResultsHeader(e,i){return A("div",{class:Vc.moreResultsListHeader,key:`esri-search-result-renderer__header-${i}`},e)}_renderMoreResultsList(e){var f,m,g;const{results:i}=e,n=(i==null?void 0:i.length)??0,r=n>0,s=(f=this.viewModel)==null?void 0:f.selectedResult,o=n===1&&i[0]===s,a=this._getSourceName(e.source,e.sourceIndex),l=(((g=(m=this.viewModel)==null?void 0:m.results)==null?void 0:g.length)??0)>1&&!o?this._renderMoreResultsHeader(a,e.sourceIndex):null,u=r&&i.map((y,v)=>this._renderMoreResultsListItem(y,v)),p=r&&!o?A("ul",{key:`esri-search-result-renderer__list-${e.sourceIndex}`},u):null;return r?A("div",{key:`esri-search-result-renderer__results-${e.sourceIndex}`},l,p):null}_renderMoreResultsListItem(e,i){var r;const n=(r=this.viewModel)==null?void 0:r.selectedResult;return e!==n?A("li",{key:`esri-search-result-renderer__list-item-${i}`},A("a",{bind:this,class:pe.anchor,"data-result":e,href:"#",onclick:this._selectResultClick,onkeydown:this._selectResultClick,tabIndex:0},e.name)):null}_showMoreResultsClick(e){var n,r;e.preventDefault(),this.showMoreResultsOpen=!this.showMoreResultsOpen;const i=(r=(n=this.viewModel)==null?void 0:n.view)==null?void 0:r.popup;i&&"reposition"in i&&i.reposition()}_selectResultClick(e){var n;e.preventDefault();const i=e.currentTarget["data-result"];(n=this.viewModel)==null||n.select(i)}_getSourceName(e,i){return i===Nh.ALL_INDEX?this.messages.all:e.name}};c([d(),nn("esri/widgets/Search/t9n/Search")],Pl.prototype,"messages",void 0),c([d()],Pl.prototype,"showMoreResultsOpen",void 0),c([d()],Pl.prototype,"viewModel",void 0),c([fd()],Pl.prototype,"_showMoreResultsClick",null),c([fd()],Pl.prototype,"_selectResultClick",null),Pl=c([S("esri.widgets.Search.SearchResultRenderer")],Pl);const ide=Pl,nde=/<[a-z/][\s\S]*>/i,rde=(t,e)=>{const i=l7(e).split(/\s/),n=new RegExp(`(${i.join("|")})`,"gi");return t.replace(n,r=>`<strong>${r}</strong>`)};let Se=class extends Ln{constructor(e,i){super(e,i),this._activeMenuItemIndex=-1,this._inputNode=null,this._menuItemCount=0,this._sourceMenuButtonNode=null,this._sourceListNode=null,this._suggestionListNode=null,this._searchResultRenderer=new ide,this._suggestController=null,this._searchController=null,this._locateFailed=!1,this._container=null,this.activeMenu="none",this.disabled=!1,this.iconClass=Be.widgetIcon,this.icon=null,this.messages=null,this.messagesCommon=null,this.viewModel=new Nh,this._clearActiveMenu=()=>{this.activeMenu="none"},this._removeActiveMenu=n=>{var s;const r=n.relatedTarget;r&&((s=this._container)!=null&&s.contains(r))||this._clearActiveMenu()},this.addHandles([Z(()=>this.searchTerm,n=>{var r,s;(n&&this.activeMenu==="warning"||!n&&!((s=(r=this.viewModel)==null?void 0:r.selectedSuggestion)!=null&&s.location))&&this._clearActiveMenu()}),Lr(()=>{var n;return(n=this.viewModel)==null?void 0:n.allSources},"change",()=>this._watchSourceChanges()),Z(()=>this.activeMenu,()=>this._resetActiveMenuItemIndex(),De),Z(()=>{var n;return(n=this.viewModel)==null?void 0:n.defaultPopupTemplate},n=>{n&&(n.content=this._renderSearchResultsContent.bind(this))},De)])}destroy(){this._cancelSuggest(),this._cancelSearch(),this._searchResultRenderer=Oe(this._searchResultRenderer)}get displayedSearchTerm(){return`${this.viewModel.searchTerm}`.trim()}get inputId(){return this._buildId("input")}get suggestionsMenuId(){return this._buildId("suggest-menu")}get sourceMenuId(){return this._buildId("source-menu")}get sourceMenuButtonId(){return this._buildId("source-menu-button")}get activeSource(){var e;return(e=this.viewModel)==null?void 0:e.activeSource}get activeSourceIndex(){return this.viewModel.activeSourceIndex}set activeSourceIndex(e){this.viewModel.activeSourceIndex=e}get allPlaceholder(){return this.viewModel.allPlaceholder}set allPlaceholder(e){this.viewModel.allPlaceholder=e}get allSources(){return this.viewModel.allSources}get autoNavigate(){return this.viewModel.autoNavigate}set autoNavigate(e){this.viewModel.autoNavigate=e}get autoSelect(){return this.viewModel.autoSelect}set autoSelect(e){this.viewModel.autoSelect=e}get defaultSources(){return this.viewModel.defaultSources}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get includeDefaultSources(){return this.viewModel.includeDefaultSources}set includeDefaultSources(e){this.viewModel.includeDefaultSources=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get locationEnabled(){return this.viewModel.locationEnabled}set locationEnabled(e){this.viewModel.locationEnabled=e}get maxResults(){return this.viewModel.maxResults}set maxResults(e){this.viewModel.maxResults=e}get maxSuggestions(){return this.viewModel.maxSuggestions}set maxSuggestions(e){this.viewModel.maxSuggestions=e}get minSuggestCharacters(){return this.viewModel.minSuggestCharacters}set minSuggestCharacters(e){this.viewModel.minSuggestCharacters=e}get popupEnabled(){return this.viewModel.popupEnabled}set popupEnabled(e){this.viewModel.popupEnabled=e}get popupTemplate(){return this.viewModel.popupTemplate}set popupTemplate(e){this.viewModel.popupTemplate=e}get portal(){var e;return(e=this.viewModel)==null?void 0:e.portal}set portal(e){this.viewModel&&(this.viewModel.portal=e)}get resultGraphic(){return this.viewModel.resultGraphic}set resultGraphic(e){this.viewModel.resultGraphic=e}get resultGraphicEnabled(){return this.viewModel.resultGraphicEnabled}set resultGraphicEnabled(e){this.viewModel.resultGraphicEnabled=e}get results(){return this.viewModel.results}get searchAllEnabled(){return this.viewModel.searchAllEnabled}set searchAllEnabled(e){this.viewModel.searchAllEnabled=e}get searchTerm(){return this.viewModel.searchTerm}set searchTerm(e){this.viewModel.searchTerm=e}get selectedResult(){return this.viewModel.selectedResult}get sources(){return this.viewModel.sources}set sources(e){this.viewModel.sources=e}get suggestions(){return this.viewModel.suggestions}get suggestionsEnabled(){return this.viewModel.suggestionsEnabled}set suggestionsEnabled(e){this.viewModel.suggestionsEnabled=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}clear(){this.viewModel.clear()}focus(){var e;(e=this._inputNode)==null||e.focus(),this.emit("search-focus")}blur(){var e;(e=this._inputNode)==null||e.blur(),this.emit("search-blur")}async search(e){this._clearActiveMenu(),this._cancelSuggest(),this._cancelSearch();const i=new AbortController,{signal:n}=i;this._searchController=i;try{const r=await this.viewModel.search(e,{signal:n});return this._searchController!==i?void 0:(this.activeMenu=r!=null&&r.numResults?"none":"warning",this._searchController=null,r)}catch{return this._searchController!==i?void 0:(this._clearActiveMenu(),void(this._searchController=null))}}async suggest(e){this._cancelSuggest();const i=new AbortController,{signal:n}=i;this._suggestController=i;try{const r=await this.viewModel.suggest(e,null,{signal:n});return this._suggestController!==i?void 0:(this._suggestController=null,r!=null&&r.numResults&&this._openSuggestionMenu(),this._scrollToTopSuggestion(),r)}catch{return this._suggestController!==i||(this._suggestController=null),null}}render(){const{state:e}=this.viewModel,i={[pe.disabled]:e==="disabled",[pe.widgetDisabled]:this.disabled};return A("div",{class:this.classes(Be.base,pe.widget,i)},e==="loading"?this._renderLoader():this._renderContainer())}_renderSubmitButton(){const{messages:e,disabled:i}=this;return A("button",{"aria-label":e.searchButtonTitle,bind:this,class:this.classes(Be.submitButton,pe.widgetButton),disabled:i,key:"esri-search__submit-button",onclick:this._handleSearchButtonClick,title:e.searchButtonTitle,type:"button"},A("span",{"aria-hidden":"true",class:ot.search}))}_renderWarningMenu(){return A("div",{class:this.classes(pe.menu,Be.warningMenu),key:"esri-search__error-menu"},A("div",{class:Be.warningMenuBody},this._renderWarning()))}_renderSourceMenuButton(){const{messages:e,activeMenu:i,sourceMenuId:n,sourceMenuButtonId:r,disabled:s}=this,{activeSourceIndex:o,allSources:a}=this.viewModel;return a.length>1?A("button",{afterCreate:Uy,"aria-controls":n,"aria-expanded":(i==="source").toString(),"aria-haspopup":"true","aria-label":e.searchIn,bind:this,class:this.classes(Be.sourcesButton,pe.widgetButton),"data-node-ref":"_sourceMenuButtonNode",disabled:s,id:r,key:"esri-search__source-menu-button",onclick:this._handleSourcesMenuToggleClick,onfocus:this._handleSourcesMenuToggleFocus,title:e.searchIn,type:"button"},A("span",{"aria-hidden":"true",class:this.classes(ot.downArrow,Be.sourcesButtonDown)}),A("span",{"aria-hidden":"true",class:this.classes(ot.upArrow,Be.sourcesButtonUp)}),A("span",{class:Be.sourceName},this._getSourceName(o))):null}_renderSourcesList(){const{allSources:e,searchAllEnabled:i}=this.viewModel,{_activeMenuItemIndex:n,activeMenu:r,sourceMenuId:s,sourceMenuButtonId:o}=this,a=r==="source"&&n>-1?this._buildId("source-item",n):null;return e.length>1?A("ul",{afterCreate:Uy,"aria-activedescendant":a,"aria-labelledby":o,bind:this,class:pe.menuList,"data-node-ref":"_sourceListNode",id:s,onkeydown:this._handleSourceMenuKeydown,onkeyup:this._handleSourceMenuKeyup,role:"menu",tabIndex:-1},i?this._renderSource(Nh.ALL_INDEX):null,e.map((l,u)=>this._renderSource(u)).toArray()):null}_renderSourcesMenu(){const{allSources:e}=this.viewModel;return e.length>1?A("div",{class:this.classes(pe.menu,Be.sourcesMenu),key:"esri-search__source-menu"},this._renderSourcesList()):null}_renderLoader(){const{messages:e,messagesCommon:i,disabled:n}=this;return A("div",{class:pe.loader,key:"base-loader",tabIndex:n?-1:void 0},A("span",{"aria-hidden":"true",class:pe.loaderAnimation}),A("span",{class:ot.fontFallbackText},e.searchButtonTitle),A("span",{class:pe.loaderText},i.loading))}_renderContainer(){const{allSources:e,state:i}=this.viewModel,{activeMenu:n}=this,r={[Be.hasMultipleSources]:e.length>1,[Be.isLoading]:i==="loading",[Be.isSearching]:i==="searching",[Be.showWarning]:n==="warning",[Be.showSources]:n==="source",[Be.showSuggestions]:n==="suggestion"};return A("div",{afterCreate:s=>{this._container=s,s.addEventListener("focusout",this._removeActiveMenu)},afterRemoved:s=>{s.removeEventListener("focusout",this._removeActiveMenu)},class:this.classes(r,Be.container),key:"base-container",tabIndex:-1},this._renderSourceMenuButton(),this._renderSourcesMenu(),this._renderInputContainer(),this._renderSubmitButton(),this._renderWarningMenu())}_renderClearButton(){return this.searchTerm?A("button",{bind:this,class:this.classes(Be.clearButton,pe.widgetButton),disabled:this.disabled,key:"esri-search__clear-button",onclick:this._handleClearButtonClick,onfocus:this._clearActiveMenu,title:this.messages.clearButtonTitle,type:"button"},A("span",{"aria-hidden":"true",class:ot.close})):null}_renderLocationGroup(){const{messages:e,locationEnabled:i,displayedSearchTerm:n}=this,r=i&&!n,s=this.activeMenu==="suggestion"&&this._activeMenuItemIndex===0;return r?A("ul",{class:this.classes(pe.menuList,Be.suggestionList,Be.suggestionListCurrentLocation),key:"esri-search__suggestion-list-current-location",role:"group"},A("li",{"aria-selected":(this.activeMenu==="suggestion"&&this._activeMenuItemIndex===0).toString(),bind:this,class:this.classes(pe.menuItem,s?pe.menuItemFocus:null),"data-current-location-item":!0,id:this._buildId("suggestion-item",0),onclick:this._handleUseCurrentLocationClick,role:"option"},A("span",{"aria-hidden":"true",class:ot.locateCircled})," ",e.useCurrentLocation)):null}_renderInput(){const{activeMenu:e,locationEnabled:i,displayedSearchTerm:n,messages:r,suggestionsMenuId:s,inputId:o,_activeMenuItemIndex:a,disabled:l}=this,{maxInputLength:u,placeholder:p,searchTerm:f,suggestionCount:m}=this.viewModel,g=!(!(i&&!n)&&!m),y=e==="suggestion"&&a>-1?this._buildId("suggestion-item",a):null;return A("input",{afterCreate:Uy,"aria-activedescendant":y,"aria-autocomplete":"list","aria-controls":g?s:null,"aria-expanded":(g&&e==="suggestion").toString(),"aria-haspopup":"listbox","aria-label":r.searchButtonTitle,autocomplete:"off",bind:this,class:this.classes(pe.input,Be.input),"data-node-ref":"_inputNode",disabled:l,id:o,maxlength:u,onblur:this.blur,onclick:this._openSuggestionMenu,onfocus:this.focus,oninput:this._handleInputPaste,onkeyup:this._handleInputKeyup,onpaste:this._handleInputPaste,placeholder:p,role:"combobox",title:f?"":p,type:"text",value:f})}_renderForm(){return A("form",{bind:this,class:Be.form,disabled:this.disabled,key:"esri-search__form",onsubmit:this._formSubmit,role:"search"},this._renderInput())}_renderSuggestList(e){const{sourceIndex:i}=e,{results:n}=e;return(n==null?void 0:n.length)?A("ul",{class:this.classes(pe.menuList,Be.suggestionList),key:`esri-search__suggestion-list-${i}`,role:"group"},n==null?void 0:n.map(s=>this._renderSuggestion(s,this._menuItemCount++))):null}_renderSuggestionsGroup(){const{suggestions:e}=this.viewModel;return e?e.map(i=>[this._renderSuggestionHeader(i),this._renderSuggestList(i)]):[]}_renderSuggestionsMenu(){const{displayedSearchTerm:e,locationEnabled:i,suggestionsMenuId:n,inputId:r}=this,{suggestionCount:s}=this.viewModel,o=i&&!e||s;return this._menuItemCount=0,o?A("div",{afterCreate:Uy,"aria-labelledby":r,bind:this,class:this.classes(pe.menu,Be.suggestionsMenu),"data-node-ref":"_suggestionListNode",id:n,key:"esri-search__suggestions-menu",role:"listbox"},this._renderLocationGroup(),this._renderSuggestionsGroup()):null}_renderInputContainer(){return A("div",{class:Be.inputContainer,key:"esri-search__input-container"},this._renderForm(),this._renderSuggestionsMenu(),this._renderClearButton())}_renderSuggestionHeader(e){var a;const{allSources:i,activeSourceIndex:n}=this.viewModel,{sourceIndex:r}=e,s=(a=e.results)==null?void 0:a.length,o=i.length>1&&n===Nh.ALL_INDEX;return s&&o?A("div",{class:pe.menuHeader,key:`esri-search__suggestion-header-${r}`},this._getSourceName(r)):null}_renderSuggestion(e,i){const{_activeMenuItemIndex:n,viewModel:{searchTerm:r}}=this;if(!r)return;const s=this.activeMenu==="suggestion"&&n===i;return A("li",{"aria-selected":(this.activeMenu==="suggestion"&&this._activeMenuItemIndex===i).toString(),bind:this,class:this.classes(pe.menuItem,s?pe.menuItemFocus:null),"data-suggestion":e,id:this._buildId("suggestion-item",i),innerHTML:this._getSuggestResultHTML(e.text,r),key:`esri-search__suggestion_${i}`,onclick:this._handleSuggestionClick,role:"option"})}_renderSource(e){const{activeSourceIndex:i,searchAllEnabled:n}=this.viewModel,r={[pe.menuItemActive]:e===i,[pe.menuItemFocus]:this.activeMenu==="source"&&e===(n?this._activeMenuItemIndex-1:this._activeMenuItemIndex)},s=n?e+1:e;return A("li",{"aria-checked":(e===i).toString(),bind:this,class:this.classes(Be.source,pe.menuItem,r),"data-source-index":e,id:this._buildId("source-item",s),key:`esri-search__source-${e}`,onclick:this._handleSourceClick,role:"menuitemradio"},this._getSourceName(e))}_renderNoResultsWarning(e){const{messages:i}=this,n=e?bE(i.noResultsFoundForValue,{value:`"${e}"`}):i.noResultsFound;return A("div",{key:"esri-search__no_results"},A("div",{class:Be.warningMenuHeader},i.noResults),A("div",{class:Be.warningMenuText},n))}_renderEmptySearchWarning(){const{messages:e}=this;return A("div",{key:"esri-search__empty-search"},A("span",{"aria-hidden":"true",class:ot.noticeTriangle}),A("span",{class:Be.noValueText},e.emptyValue))}_renderLocateWarning(){const{messages:e}=this;return A("div",{key:"esri-search__locate-error"},A("span",{"aria-hidden":"true",class:ot.noticeTriangle}),A("span",{class:Be.noValueText},e.locateError))}_renderWarning(){var r;const{displayedSearchTerm:e,_locateFailed:i}=this,{viewModel:n}=this;return i?this._renderLocateWarning():(r=n.selectedSuggestion)!=null&&r.location||e?this._renderNoResultsWarning(e):this._renderEmptySearchWarning()}_resetActiveMenuItemIndex(){this._activeMenuItemIndex=-1}_buildId(e,i){return`${this.id}-${e}${i===void 0?"":`-${i}`}`}_watchSourceChanges(){const{viewModel:{allSources:e}}=this,i="sources";this.removeHandles(i),e.forEach(n=>this.addHandles(Z(()=>n.name,()=>this.scheduleRender()),i))}_handleSourcesMenuToggleFocus(){this.activeMenu!=="source"&&this._clearActiveMenu()}_handleSourcesMenuToggleClick(){var i;const e=this.activeMenu==="source";this.activeMenu=e?"none":"source",this.renderNow(),this.activeMenu==="source"&&((i=this._sourceListNode)==null||i.focus())}_handleClearButtonClick(){this.viewModel.clear(),this._focus()}_handleSearchButtonClick(){this.search()}_handleSuggestionClick(e){const i=C3(e.currentTarget);i&&(this._focus(),this.search(i))}_handleUseCurrentLocationClick(){this._useCurrentLocation()}_useCurrentLocation(){this._focus("none"),this._cancelSuggest(),this._cancelSearch();const e=new AbortController,{signal:i}=e;this._searchController=e,(async()=>{try{const n=await this.viewModel.searchNearby({signal:i});this.activeMenu=n!=null&&n.numResults?"none":"warning"}catch{this._locateFailed=!0,this.activeMenu="warning"}finally{this._searchController=null}})()}_handleSourceClick(e){this._setSourceFromMenuItem(e.currentTarget)}_setSourceFromMenuItem(e){var n;if(!e)return;const i=sde(e);i!=null&&(this.viewModel.activeSourceIndex=i,this._clearActiveMenu(),(n=this._sourceMenuButtonNode)==null||n.focus())}_cancelSuggest(){this._suggestController=_s(this._suggestController)}_cancelSearch(){this._searchController=_s(this._searchController),this._locateFailed=!1}_handleInputKeyup(e){var s;const i=A0(e);if(e.ctrlKey||e.metaKey||i==="Copy"||i==="ArrowLeft"||i==="ArrowRight"||i==="Shift")return;if(i==="Tab"||i==="Escape"||e.shiftKey&&i==="Tab")return this._cancelSuggest(),void(i==="Escape"&&this._clearActiveMenu());const n=i==="Home"||i==="End"||i==="ArrowUp"||i==="ArrowDown";if(i==="Enter"&&this._activeMenuItemIndex<0)return void this._cancelSuggest();const r=(s=this._suggestionListNode)==null?void 0:s.getElementsByTagName("li");if(r!=null&&r.length){if(this.activeMenu!=="suggestion"&&this._openSuggestionMenu(),n)return e.preventDefault(),this._cancelSuggest(),void this._handleItemNavigation(i,r,this._suggestionListNode);const o=r[this._activeMenuItemIndex];if(i==="Enter"&&o){const a=C3(o);return void(a?(this._focus(),this.search(a)):ode(o)&&this._useCurrentLocation())}}this.viewModel.searchTerm&&this.suggest()}_handleItemNavigation(e,i,n){const r=this._activeMenuItemIndex;e==="Home"&&(this._activeMenuItemIndex=0),e==="End"&&(this._activeMenuItemIndex=i.length-1),e==="ArrowUp"&&(this._activeMenuItemIndex=this._activeMenuItemIndex<=0?i.length-1:this._activeMenuItemIndex-1),e==="ArrowDown"&&(this._activeMenuItemIndex=this._activeMenuItemIndex===i.length-1?0:this._activeMenuItemIndex+1),r!==this._activeMenuItemIndex&&n&&jY(i[this._activeMenuItemIndex],n)}_scrollToTopSuggestion(){this._suggestionListNode&&(this._suggestionListNode.scrollTop=0)}_openSuggestionMenu(){this.activeMenu="suggestion"}_handleInputPaste(e){const i=e.target;this.viewModel.searchTerm!==i.value&&(this.viewModel.searchTerm=i.value),this.viewModel.searchTerm&&this.suggest()}_handleSourceMenuKeydown(e){var n;const i=A0(e);if(X5(i)){e.preventDefault();const r=(n=this._sourceListNode)==null?void 0:n.getElementsByTagName("li"),s=r==null?void 0:r[this._activeMenuItemIndex];this._setSourceFromMenuItem(s)}else i!=="ArrowUp"&&i!=="ArrowDown"&&i!=="End"&&i!=="Home"||e.preventDefault()}_handleSourceMenuKeyup(e){var s,o,a;const i=A0(e),n=i==="ArrowUp"||i==="ArrowDown"||i==="End"||i==="Home";if(n&&e.preventDefault(),i==="Escape")return this._clearActiveMenu(),void((s=this._sourceMenuButtonNode)==null?void 0:s.focus());const r=(o=this._sourceListNode)==null?void 0:o.getElementsByTagName("li");return r&&r.length!==0&&n?(this.activeMenu!=="source"&&(this.activeMenu="source"),void this._handleItemNavigation(i,r,(a=this._sourceListNode)==null?void 0:a.parentElement)):void 0}_focus(e){this.focus(),e&&(this.activeMenu=e)}_formSubmit(e){e.preventDefault(),this._activeMenuItemIndex===-1&&this.search()}_getSourceName(e){const{messages:i}=this,n=this.viewModel,{allSources:r}=n,s=r.at(e);return e===Nh.ALL_INDEX?i.all:s&&s.name||i.untitledSource}_getSuggestResultHTML(e,i){return e?nde.test(e)?e:rde(e,i):this.messages.untitledResult}_renderSearchResultsContent(){return this._searchResultRenderer.showMoreResultsOpen=!1,this._searchResultRenderer.viewModel=this.viewModel,this._searchResultRenderer}};function C3(t){return t==null?void 0:t["data-suggestion"]}function sde(t){return t==null?void 0:t["data-source-index"]}function ode(t){return!!(t!=null&&t["data-current-location-item"])}c([d()],Se.prototype,"_activeMenuItemIndex",void 0),c([d()],Se.prototype,"displayedSearchTerm",null),c([d({readOnly:!0})],Se.prototype,"inputId",null),c([d({readOnly:!0})],Se.prototype,"suggestionsMenuId",null),c([d({readOnly:!0})],Se.prototype,"sourceMenuId",null),c([d({readOnly:!0})],Se.prototype,"sourceMenuButtonId",null),c([d()],Se.prototype,"activeMenu",void 0),c([d({readOnly:!0})],Se.prototype,"activeSource",null),c([d()],Se.prototype,"activeSourceIndex",null),c([d()],Se.prototype,"allPlaceholder",null),c([d({readOnly:!0})],Se.prototype,"allSources",null),c([d()],Se.prototype,"autoNavigate",null),c([d()],Se.prototype,"autoSelect",null),c([d({readOnly:!0})],Se.prototype,"defaultSources",null),c([d()],Se.prototype,"disabled",void 0),c([d()],Se.prototype,"goToOverride",null),c([d()],Se.prototype,"iconClass",void 0),c([d()],Se.prototype,"icon",void 0),c([d()],Se.prototype,"includeDefaultSources",null),c([d()],Se.prototype,"label",null),c([d()],Se.prototype,"locationEnabled",null),c([d()],Se.prototype,"maxResults",null),c([d()],Se.prototype,"maxSuggestions",null),c([d(),nn("esri/widgets/Search/t9n/Search")],Se.prototype,"messages",void 0),c([d(),nn("esri/t9n/common")],Se.prototype,"messagesCommon",void 0),c([d()],Se.prototype,"minSuggestCharacters",null),c([d()],Se.prototype,"popupEnabled",null),c([d()],Se.prototype,"popupTemplate",null),c([d()],Se.prototype,"portal",null),c([d()],Se.prototype,"resultGraphic",null),c([d()],Se.prototype,"resultGraphicEnabled",null),c([d({readOnly:!0})],Se.prototype,"results",null),c([d()],Se.prototype,"searchAllEnabled",null),c([d()],Se.prototype,"searchTerm",null),c([d({readOnly:!0})],Se.prototype,"selectedResult",null),c([d()],Se.prototype,"sources",null),c([d({readOnly:!0})],Se.prototype,"suggestions",null),c([d()],Se.prototype,"suggestionsEnabled",null),c([d()],Se.prototype,"view",null),c([Tz(["search-complete","search-clear","search-start","select-result","suggest-start","suggest-complete"]),d({type:Nh})],Se.prototype,"viewModel",void 0),Se=c([S("esri.widgets.Search")],Se);const ade=Se;function lde(t){let e,i,n,r;return{c(){e=fe("div"),i=fe("div"),n=fe("div"),Sn(n,"id","mapDiv"),Sn(n,"class","svelte-1avm01t"),Sn(i,"class",r=$M(`view-container-${t[0]}`)+" svelte-1avm01t"),Sn(e,"id","map-container"),Sn(e,"class","svelte-1avm01t")},m(s,o){Sc(s,e,o),ne(e,i),ne(i,n)},p(s,[o]){o&1&&r!==(r=$M(`view-container-${s[0]}`)+" svelte-1avm01t")&&Sn(i,"class",r)},i:Dt,o:Dt,d(s){s&&Wa(e)}}}function cde(t,e,i){let n;return Nu(t,lR,r=>i(0,n=r)),DG(()=>{const r=new ece({container:"mapDiv",map:{basemap:"gray-vector"},constraints:{snapToZoom:!0},center:[-80.84521293637971,35.22535861915421],zoom:16}),s=()=>{Z(()=>[r.stationary,r.scale,r.zoom,r.center,r.extent],([p,f,m,g,y])=>{p&&Ua.set(r)}),Ua.set(r)},o=new Kce({view:r}),a=new S3({expandIcon:"basemap",view:r,content:o,autoCollapse:!0,closeOnEsc:!0}),l=new ade({view:r}),u=new S3({expandIcon:"search",view:r,content:l,group:"top-left"});r.ui.add([a,u],"top-left"),r.when(s)}),[n]}class ude extends Ep{constructor(e){super(),Tp(this,e,cde,lde,bd,{})}}const Au={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,formAssociated:!1,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0,experimentalSlotFixes:!1};let wh,Xz,vw,Qz=!1,zb=!1,xk=!1,Wn=!1,I3=null,k2=!1;const e8=t=>{const e=new URL(t,vi.$resourcesUrl$);return e.origin!==Qg.location.origin?e.href:e.pathname},dde=t=>vi.$resourcesUrl$=t,md=(t,e="")=>()=>{},hde="slot-fb{display:contents}slot-fb[hidden]{display:none}",O3="http://www.w3.org/1999/xlink",A3={},pde="http://www.w3.org/2000/svg",fde="http://www.w3.org/1999/xhtml",mde=t=>t!=null,Tk=t=>(t=typeof t,t==="object"||t==="function");function gde(t){var e,i,n;return(n=(i=(e=t.head)===null||e===void 0?void 0:e.querySelector('meta[name="csp-nonce"]'))===null||i===void 0?void 0:i.getAttribute("content"))!==null&&n!==void 0?n:void 0}const k=(t,e,...i)=>{let n=null,r=null,s=null,o=!1,a=!1;const l=[],u=f=>{for(let m=0;m<f.length;m++)n=f[m],Array.isArray(n)?u(n):n!=null&&typeof n!="boolean"&&((o=typeof t!="function"&&!Tk(n))&&(n=String(n)),o&&a?l[l.length-1].$text$+=n:l.push(o?jb(null,n):n),a=o)};if(u(i),e){e.key&&(r=e.key),e.name&&(s=e.name);{const f=e.className||e.class;f&&(e.class=typeof f!="object"?f:Object.keys(f).filter(m=>f[m]).join(" "))}}if(typeof t=="function")return t(e===null?{}:e,l,vde);const p=jb(t,null);return p.$attrs$=e,l.length>0&&(p.$children$=l),p.$key$=r,p.$name$=s,p},jb=(t,e)=>{const i={$flags$:0,$tag$:t,$text$:e,$elm$:null,$children$:null};return i.$attrs$=null,i.$key$=null,i.$name$=null,i},Pn={},yde=t=>t&&t.$tag$===Pn,vde={forEach:(t,e)=>t.map(L3).forEach(e),map:(t,e)=>t.map(L3).map(e).map(bde)},L3=t=>({vattrs:t.$attrs$,vchildren:t.$children$,vkey:t.$key$,vname:t.$name$,vtag:t.$tag$,vtext:t.$text$}),bde=t=>{if(typeof t.vtag=="function"){const i=Object.assign({},t.vattrs);return t.vkey&&(i.key=t.vkey),t.vname&&(i.name=t.vname),k(t.vtag,i,...t.vchildren||[])}const e=jb(t.vtag,t.vtext);return e.$attrs$=t.vattrs,e.$children$=t.vchildren,e.$key$=t.vkey,e.$name$=t.vname,e},wde=t=>Zde.map(e=>e(t)).find(e=>!!e),_de=(t,e)=>t!=null&&!Tk(t)?e&4?t==="false"?!1:t===""||!!t:e&2?parseFloat(t):e&1?String(t):t:t,Sde=t=>t,$e=(t,e,i)=>{const n=Sde(t);return{emit:r=>$de(n,e,{bubbles:!!(i&4),composed:!!(i&2),cancelable:!!(i&1),detail:r})}},$de=(t,e,i)=>{const n=vi.ce(e,i);return t.dispatchEvent(n),n},P3=new WeakMap,xde=(t,e,i)=>{let n=Ub.get(t);Yde&&i?(n=n||new CSSStyleSheet,typeof n=="string"?n=e:n.replaceSync(e)):n=e,Ub.set(t,n)},Tde=(t,e,i)=>{var n;const r=t8(e,i),s=Ub.get(r);if(t=t.nodeType===11?t:Ts,s)if(typeof s=="string"){t=t.head||t;let o=P3.get(t),a;if(o||P3.set(t,o=new Set),!o.has(r)){{a=Ts.createElement("style"),a.innerHTML=s;const l=(n=vi.$nonce$)!==null&&n!==void 0?n:gde(Ts);l!=null&&a.setAttribute("nonce",l),t.insertBefore(a,t.querySelector("link"))}e.$flags$&4&&(a.innerHTML+=hde),o&&o.add(r)}}else t.adoptedStyleSheets.includes(s)||(t.adoptedStyleSheets=[...t.adoptedStyleSheets,s]);return r},Ede=t=>{const e=t.$cmpMeta$,i=t.$hostElement$,n=e.$flags$,r=md("attachStyles",e.$tagName$),s=Tde(i.shadowRoot?i.shadowRoot:i.getRootNode(),e,t.$modeName$);n&10&&(i["s-sc"]=s,i.classList.add(s+"-h"),n&2&&i.classList.add(s+"-s")),r()},t8=(t,e)=>"sc-"+(e&&t.$flags$&32?t.$tagName$+"-"+e:t.$tagName$),R3=(t,e,i,n,r,s)=>{if(i!==n){let o=j3(t,e),a=e.toLowerCase();if(e==="class"){const l=t.classList,u=N3(i),p=N3(n);l.remove(...u.filter(f=>f&&!p.includes(f))),l.add(...p.filter(f=>f&&!u.includes(f)))}else if(e==="style"){for(const l in i)(!n||n[l]==null)&&(l.includes("-")?t.style.removeProperty(l):t.style[l]="");for(const l in n)(!i||n[l]!==i[l])&&(l.includes("-")?t.style.setProperty(l,n[l]):t.style[l]=n[l])}else if(e!=="key")if(e==="ref")n&&n(t);else if(!t.__lookupSetter__(e)&&e[0]==="o"&&e[1]==="n"){if(e[2]==="-"?e=e.slice(3):j3(Qg,a)?e=a.slice(2):e=a[2]+e.slice(3),i||n){const l=e.endsWith(i8);e=e.replace(Mde,""),i&&vi.rel(t,e,i,l),n&&vi.ael(t,e,n,l)}}else{const l=Tk(n);if((o||l&&n!==null)&&!r)try{if(t.tagName.includes("-"))t[e]=n;else{const p=n??"";e==="list"?o=!1:(i==null||t[e]!=p)&&(t[e]=p)}}catch{}let u=!1;a!==(a=a.replace(/^xlink\:?/,""))&&(e=a,u=!0),n==null||n===!1?(n!==!1||t.getAttribute(e)==="")&&(u?t.removeAttributeNS(O3,e):t.removeAttribute(e)):(!o||s&4||r)&&!l&&(n=n===!0?"":n,u?t.setAttributeNS(O3,e,n):t.setAttribute(e,n))}}},kde=/\s/,N3=t=>t?t.split(kde):[],i8="Capture",Mde=new RegExp(i8+"$"),n8=(t,e,i,n)=>{const r=e.$elm$.nodeType===11&&e.$elm$.host?e.$elm$.host:e.$elm$,s=t&&t.$attrs$||A3,o=e.$attrs$||A3;for(n in s)n in o||R3(r,n,s[n],void 0,i,e.$flags$);for(n in o)R3(r,n,s[n],o[n],i,e.$flags$)},Gb=(t,e,i,n)=>{var r;const s=e.$children$[i];let o=0,a,l,u;if(Qz||(xk=!0,s.$tag$==="slot"&&(wh&&n.classList.add(wh+"-s"),s.$flags$|=s.$children$?2:1)),s.$text$!==null)a=s.$elm$=Ts.createTextNode(s.$text$);else if(s.$flags$&1)a=s.$elm$=Ts.createTextNode("");else{if(Wn||(Wn=s.$tag$==="svg"),a=s.$elm$=Ts.createElementNS(Wn?pde:fde,s.$flags$&2?"slot-fb":s.$tag$),Wn&&s.$tag$==="foreignObject"&&(Wn=!1),n8(null,s,Wn),mde(wh)&&a["s-si"]!==wh&&a.classList.add(a["s-si"]=wh),s.$children$)for(o=0;o<s.$children$.length;++o)l=Gb(t,s,o,a),l&&a.appendChild(l);s.$tag$==="svg"?Wn=!1:a.tagName==="foreignObject"&&(Wn=!0)}return a["s-hn"]=vw,s.$flags$&3&&(a["s-sr"]=!0,a["s-fs"]=(r=s.$attrs$)===null||r===void 0?void 0:r.slot,a["s-cr"]=Xz,a["s-sn"]=s.$name$||"",u=t&&t.$children$&&t.$children$[i],u&&u.$tag$===s.$tag$&&t.$elm$&&dg(t.$elm$,!1)),a},dg=(t,e)=>{var i;vi.$flags$|=1;const n=t.childNodes;for(let r=n.length-1;r>=0;r--){const s=n[r];s["s-hn"]!==vw&&s["s-ol"]&&(o8(s).insertBefore(s,Ek(s)),s["s-ol"].remove(),s["s-ol"]=void 0,s["s-sh"]=void 0,s.nodeType===1&&s.setAttribute("slot",(i=s["s-sn"])!==null&&i!==void 0?i:""),xk=!0),e&&dg(s,e)}vi.$flags$&=-2},r8=(t,e,i,n,r,s)=>{let o=t["s-cr"]&&t["s-cr"].parentNode||t,a;for(o.shadowRoot&&o.tagName===vw&&(o=o.shadowRoot);r<=s;++r)n[r]&&(a=Gb(null,i,r,t),a&&(n[r].$elm$=a,o.insertBefore(a,Ek(e))))},s8=(t,e,i)=>{for(let n=e;n<=i;++n){const r=t[n];if(r){const s=r.$elm$;c8(r),s&&(zb=!0,s["s-ol"]?s["s-ol"].remove():dg(s,!0),s.remove())}}},Cde=(t,e,i,n)=>{let r=0,s=0,o=0,a=0,l=e.length-1,u=e[0],p=e[l],f=n.length-1,m=n[0],g=n[f],y,v;for(;r<=l&&s<=f;)if(u==null)u=e[++r];else if(p==null)p=e[--l];else if(m==null)m=n[++s];else if(g==null)g=n[--f];else if(o0(u,m))_h(u,m),u=e[++r],m=n[++s];else if(o0(p,g))_h(p,g),p=e[--l],g=n[--f];else if(o0(u,g))(u.$tag$==="slot"||g.$tag$==="slot")&&dg(u.$elm$.parentNode,!1),_h(u,g),t.insertBefore(u.$elm$,p.$elm$.nextSibling),u=e[++r],g=n[--f];else if(o0(p,m))(u.$tag$==="slot"||g.$tag$==="slot")&&dg(p.$elm$.parentNode,!1),_h(p,m),t.insertBefore(p.$elm$,u.$elm$),p=e[--l],m=n[++s];else{for(o=-1,a=r;a<=l;++a)if(e[a]&&e[a].$key$!==null&&e[a].$key$===m.$key$){o=a;break}o>=0?(v=e[o],v.$tag$!==m.$tag$?y=Gb(e&&e[s],i,o,t):(_h(v,m),e[o]=void 0,y=v.$elm$),m=n[++s]):(y=Gb(e&&e[s],i,s,t),m=n[++s]),y&&o8(u.$elm$).insertBefore(y,Ek(u.$elm$))}r>l?r8(t,n[f+1]==null?null:n[f+1].$elm$,i,n,s,f):s>f&&s8(e,r,l)},o0=(t,e)=>t.$tag$===e.$tag$?t.$tag$==="slot"?t.$name$===e.$name$:t.$key$===e.$key$:!1,Ek=t=>t&&t["s-ol"]||t,o8=t=>(t["s-ol"]?t["s-ol"]:t).parentNode,_h=(t,e)=>{const i=e.$elm$=t.$elm$,n=t.$children$,r=e.$children$,s=e.$tag$,o=e.$text$;let a;o===null?(Wn=s==="svg"?!0:s==="foreignObject"?!1:Wn,s==="slot"||n8(t,e,Wn),n!==null&&r!==null?Cde(i,n,e,r):r!==null?(t.$text$!==null&&(i.textContent=""),r8(i,null,e,r,0,r.length-1)):n!==null&&s8(n,0,n.length-1),Wn&&s==="svg"&&(Wn=!1)):(a=i["s-cr"])?a.parentNode.textContent=o:t.$text$!==o&&(i.data=o)},a8=t=>{const e=t.childNodes;for(const i of e)if(i.nodeType===1){if(i["s-sr"]){const n=i["s-sn"];i.hidden=!1;for(const r of e)if(r!==i){if(r["s-hn"]!==i["s-hn"]||n!==""){if(r.nodeType===1&&(n===r.getAttribute("slot")||n===r["s-sn"])){i.hidden=!0;break}}else if(r.nodeType===1||r.nodeType===3&&r.textContent.trim()!==""){i.hidden=!0;break}}}a8(i)}},Ca=[],l8=t=>{let e,i,n;for(const r of t.childNodes){if(r["s-sr"]&&(e=r["s-cr"])&&e.parentNode){i=e.parentNode.childNodes;const s=r["s-sn"];for(n=i.length-1;n>=0;n--)if(e=i[n],!e["s-cn"]&&!e["s-nr"]&&e["s-hn"]!==r["s-hn"]&&!Au.experimentalSlotFixes)if(D3(e,s)){let o=Ca.find(a=>a.$nodeToRelocate$===e);zb=!0,e["s-sn"]=e["s-sn"]||s,o?(o.$nodeToRelocate$["s-sh"]=r["s-hn"],o.$slotRefNode$=r):(e["s-sh"]=r["s-hn"],Ca.push({$slotRefNode$:r,$nodeToRelocate$:e})),e["s-sr"]&&Ca.map(a=>{D3(a.$nodeToRelocate$,e["s-sn"])&&(o=Ca.find(l=>l.$nodeToRelocate$===e),o&&!a.$slotRefNode$&&(a.$slotRefNode$=o.$slotRefNode$))})}else Ca.some(o=>o.$nodeToRelocate$===e)||Ca.push({$nodeToRelocate$:e})}r.nodeType===1&&l8(r)}},D3=(t,e)=>t.nodeType===1?t.getAttribute("slot")===null&&e===""||t.getAttribute("slot")===e:t["s-sn"]===e?!0:e==="",c8=t=>{t.$attrs$&&t.$attrs$.ref&&t.$attrs$.ref(null),t.$children$&&t.$children$.map(c8)},Ide=(t,e,i=!1)=>{var n,r;const s=t.$hostElement$,o=t.$cmpMeta$,a=t.$vnode$||jb(null,null),l=yde(e)?e:k(null,null,e);if(vw=s.tagName,o.$attrsToReflect$&&(l.$attrs$=l.$attrs$||{},o.$attrsToReflect$.map(([u,p])=>l.$attrs$[p]=s[u])),i&&l.$attrs$)for(const u of Object.keys(l.$attrs$))s.hasAttribute(u)&&!["key","ref","style","class"].includes(u)&&(l.$attrs$[u]=s[u]);l.$tag$=null,l.$flags$|=4,t.$vnode$=l,l.$elm$=a.$elm$=s.shadowRoot||s,wh=s["s-sc"],Xz=s["s-cr"],Qz=(o.$flags$&1)!==0,zb=!1,_h(a,l);{if(vi.$flags$|=1,xk){l8(l.$elm$);for(const u of Ca){const p=u.$nodeToRelocate$;if(!p["s-ol"]){const f=Ts.createTextNode("");f["s-nr"]=p,p.parentNode.insertBefore(p["s-ol"]=f,p)}}for(const u of Ca){const p=u.$nodeToRelocate$,f=u.$slotRefNode$;if(f){const m=f.parentNode;let g=f.nextSibling;{let y=(n=p["s-ol"])===null||n===void 0?void 0:n.previousSibling;for(;y;){let v=(r=y["s-nr"])!==null&&r!==void 0?r:null;if(v&&v["s-sn"]===p["s-sn"]&&m===v.parentNode&&(v=v.nextSibling,!v||!v["s-nr"])){g=v;break}y=y.previousSibling}}(!g&&m!==p.parentNode||p.nextSibling!==g)&&p!==g&&(!p["s-hn"]&&p["s-ol"]&&(p["s-hn"]=p["s-ol"].parentNode.nodeName),m.insertBefore(p,g))}else p.nodeType===1&&(p.hidden=!0)}}zb&&a8(l.$elm$),vi.$flags$&=-2,Ca.length=0}},Ode=(t,e)=>{},kk=(t,e)=>(t.$flags$|=16,Ode(t,t.$ancestorComponent$),ehe(()=>Ade(t,e))),Ade=(t,e)=>{const i=t.$hostElement$,n=md("scheduleUpdate",t.$cmpMeta$.$tagName$),r=i;let s;return e?s=Kh(r,"componentWillLoad"):s=Kh(r,"componentWillUpdate"),s=F3(s,()=>Kh(r,"componentWillRender")),n(),F3(s,()=>Pde(t,r,e))},F3=(t,e)=>Lde(t)?t.then(e):e(),Lde=t=>t instanceof Promise||t&&t.then&&typeof t.then=="function",Pde=async(t,e,i)=>{const n=t.$hostElement$,r=md("update",t.$cmpMeta$.$tagName$);n["s-rc"],i&&Ede(t);const s=md("render",t.$cmpMeta$.$tagName$);Rde(t,e,n,i),s(),r(),Nde(t)},Rde=(t,e,i,n)=>{try{I3=e,e=e.render&&e.render(),t.$flags$&=-17,t.$flags$|=2,(Au.hasRenderFn||Au.reflect)&&(Au.vdomRender||Au.reflect)&&(Au.hydrateServerSide||Ide(t,e,n))}catch(l){Xg(l,t.$hostElement$)}return I3=null,null},Nde=t=>{const e=t.$cmpMeta$.$tagName$,i=t.$hostElement$,n=md("postUpdate",e),r=i;t.$ancestorComponent$,Kh(r,"componentDidRender"),t.$flags$&64?(Kh(r,"componentDidUpdate"),n()):(t.$flags$|=64,Kh(r,"componentDidLoad"),n())},Jg=t=>{{const e=zp(t),i=e.$hostElement$.isConnected;return i&&(e.$flags$&18)===2&&kk(e,!1),i}},Kh=(t,e,i)=>{if(t&&t[e])try{return t[e](i)}catch(n){Xg(n)}},Dde=(t,e)=>zp(t).$instanceValues$.get(e),Fde=(t,e,i,n)=>{const r=zp(t),s=t,o=r.$instanceValues$.get(e),a=r.$flags$,l=s;i=_de(i,n.$members$[e][0]);const u=Number.isNaN(o)&&Number.isNaN(i);if(i!==o&&!u){r.$instanceValues$.set(e,i);{if(n.$watchers$&&a&128){const f=n.$watchers$[e];f&&f.map(m=>{try{l[m](i,o,e)}catch(g){Xg(g,s)}})}if((a&18)===2){if(l.componentShouldUpdate&&l.componentShouldUpdate(i,o,e)===!1)return;kk(r,!1)}}}},zde=(t,e,i)=>{var n;if(e.$members$){t.watchers&&(e.$watchers$=t.watchers);const r=Object.entries(e.$members$),s=t.prototype;r.map(([o,[a]])=>{(a&31||a&32)&&Object.defineProperty(s,o,{get(){return Dde(this,o)},set(l){Fde(this,o,l,e)},configurable:!0,enumerable:!0})});{const o=new Map;s.attributeChangedCallback=function(a,l,u){vi.jmp(()=>{const p=o.get(a);if(this.hasOwnProperty(p))u=this[p],delete this[p];else{if(s.hasOwnProperty(p)&&typeof this[p]=="number"&&this[p]==u)return;if(p==null){const f=zp(this),m=f==null?void 0:f.$flags$;if(!(m&8)&&m&128&&u!==l){const y=this,v=e.$watchers$[a];v==null||v.forEach(b=>{y[b]!=null&&y[b].call(y,u,l,a)})}return}}this[p]=u===null&&typeof this[p]=="boolean"?!1:u})},t.observedAttributes=Array.from(new Set([...Object.keys((n=e.$watchers$)!==null&&n!==void 0?n:{}),...r.filter(([a,l])=>l[0]&15).map(([a,l])=>{const u=l[1]||a;return o.set(u,a),l[0]&512&&e.$attrsToReflect$.push([a,u]),u})]))}}return t},jde=async(t,e,i,n)=>{let r;if(!(e.$flags$&32)&&(e.$flags$|=32,r=t.constructor,customElements.whenDefined(i.$tagName$).then(()=>e.$flags$|=128),r.style)){let o=r.style;typeof o!="string"&&(o=o[e.$modeName$=wde(t)]);const a=t8(i,e.$modeName$);if(!Ub.has(a)){const l=md("registerStyles",i.$tagName$);xde(a,o,!!(i.$flags$&1)),l()}}e.$ancestorComponent$,kk(e,!0)},z3=t=>{},Gde=t=>{if(!(vi.$flags$&1)){const e=zp(t),i=e.$cmpMeta$,n=md("connectedCallback",i.$tagName$);e.$flags$&1?(u8(t,e,i.$listeners$),e!=null&&e.$lazyInstance$?z3(e.$lazyInstance$):e!=null&&e.$onReadyPromise$&&e.$onReadyPromise$.then(()=>z3(e.$lazyInstance$))):(e.$flags$|=1,i.$flags$&12&&Ude(t),i.$members$&&Object.entries(i.$members$).map(([r,[s]])=>{if(s&31&&t.hasOwnProperty(r)){const o=t[r];delete t[r],t[r]=o}}),jde(t,e,i)),n()}},Ude=t=>{const e=t["s-cr"]=Ts.createComment("");e["s-cn"]=!0,t.insertBefore(e,t.firstChild)},Hde=async t=>{if(!(vi.$flags$&1)){const e=zp(t);e.$rmListeners$&&(e.$rmListeners$.map(i=>i()),e.$rmListeners$=void 0)}},Ct=(t,e)=>{const i={$flags$:e[0],$tagName$:e[1]};i.$members$=e[2],i.$listeners$=e[3],i.$watchers$=t.$watchers$,i.$attrsToReflect$=[];const n=t.prototype.connectedCallback,r=t.prototype.disconnectedCallback;return Object.assign(t.prototype,{__registerHost(){Wde(this,i)},connectedCallback(){Gde(this),n&&n.call(this)},disconnectedCallback(){Hde(this),r&&r.call(this)},__attachShadow(){this.attachShadow({mode:"open",delegatesFocus:!!(i.$flags$&16)})}}),t.is=i.$tagName$,zde(t,i)},Yg=(t,e)=>e,u8=(t,e,i,n)=>{i&&i.map(([r,s,o])=>{const a=Bde(t,r),l=Vde(e,o),u=qde(r);vi.ael(a,s,l,u),(e.$rmListeners$=e.$rmListeners$||[]).push(()=>vi.rel(a,s,l,u))})},Vde=(t,e)=>i=>{try{Au.lazyLoad||t.$hostElement$[e](i)}catch(n){Xg(n)}},Bde=(t,e)=>e&4?Ts:e&8?Qg:e&16?Ts.body:t,qde=t=>Kde?{passive:(t&1)!==0,capture:(t&2)!==0}:(t&2)!==0,d8=new WeakMap,zp=t=>d8.get(t),Wde=(t,e)=>{const i={$flags$:0,$hostElement$:t,$cmpMeta$:e,$instanceValues$:new Map};return u8(t,i,e.$listeners$),d8.set(t,i)},j3=(t,e)=>e in t,Xg=(t,e)=>(0,console.error)(t,e),Ub=new Map,Zde=[],Qg=typeof window<"u"?window:{},Ts=Qg.document||{head:{}},It=Qg.HTMLElement||class{},vi={$flags$:0,$resourcesUrl$:"",jmp:t=>t(),raf:t=>requestAnimationFrame(t),ael:(t,e,i,n)=>t.addEventListener(e,i,n),rel:(t,e,i,n)=>t.removeEventListener(e,i,n),ce:(t,e)=>new CustomEvent(t,e)},Kde=(()=>{let t=!1;try{Ts.addEventListener("e",null,Object.defineProperty({},"passive",{get(){t=!0}}))}catch{}return t})(),Jde=t=>Promise.resolve(t),Yde=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),M2=[],h8=[],p8=(t,e)=>i=>{t.push(i),k2||(k2=!0,e&&vi.$flags$&4?Xde(C2):vi.raf(C2))},G3=t=>{for(let e=0;e<t.length;e++)try{t[e](performance.now())}catch(i){Xg(i)}t.length=0},C2=()=>{G3(M2),G3(h8),(k2=M2.length>0)&&vi.raf(C2)},Xde=t=>Jde().then(t),Qde=p8(M2,!1),ehe=p8(h8,!0);/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */function the(t){return t.map(e=>{let i="";for(let n=0;n<e;n++)i+=((1+Math.random())*65536|0).toString(16).substring(1);return i}).join("-")}const Oc=()=>the([2,1,1,1,3]);/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */const f8="calcite-mode-auto",m8="calcite-mode-dark",ihe="calcite-mode-light",Wl={autoMode:f8,darkMode:m8,lightMode:ihe,rtl:"calcite--rtl",calciteAnimate:"calcite-animate",calciteAnimateIn:"calcite-animate__in",calciteAnimateInUp:"calcite-animate__in-up",calciteAnimateInDown:"calcite-animate__in-down",calciteAnimateInRight:"calcite-animate__in-right",calciteAnimateInLeft:"calcite-animate__in-left",calciteAnimateInScale:"calcite-animate__in-scale"};/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 *//*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var g8=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Hb=g8.join(","),y8=typeof Element>"u",gd=y8?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Vb=!y8&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},Bb=function t(e,i){var n;i===void 0&&(i=!0);var r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"inert"),s=r===""||r==="true",o=s||i&&e&&t(e.parentNode);return o},nhe=function(e){var i,n=e==null||(i=e.getAttribute)===null||i===void 0?void 0:i.call(e,"contenteditable");return n===""||n==="true"},v8=function(e,i,n){if(Bb(e))return[];var r=Array.prototype.slice.apply(e.querySelectorAll(Hb));return i&&gd.call(e,Hb)&&r.unshift(e),r=r.filter(n),r},b8=function t(e,i,n){for(var r=[],s=Array.from(e);s.length;){var o=s.shift();if(!Bb(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),l=a.length?a:o.children,u=t(l,!0,n);n.flatten?r.push.apply(r,u):r.push({scopeParent:o,candidates:u})}else{var p=gd.call(o,Hb);p&&n.filter(o)&&(i||!e.includes(o))&&r.push(o);var f=o.shadowRoot||typeof n.getShadowRoot=="function"&&n.getShadowRoot(o),m=!Bb(f,!1)&&(!n.shadowRootFilter||n.shadowRootFilter(o));if(f&&m){var g=t(f===!0?o.children:f.children,!0,n);n.flatten?r.push.apply(r,g):r.push({scopeParent:o,candidates:g})}else s.unshift.apply(s,o.children)}}return r},w8=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},Lu=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||nhe(e))&&!w8(e)?0:e.tabIndex},rhe=function(e,i){var n=Lu(e);return n<0&&i&&!w8(e)?0:n},she=function(e,i){return e.tabIndex===i.tabIndex?e.documentOrder-i.documentOrder:e.tabIndex-i.tabIndex},_8=function(e){return e.tagName==="INPUT"},ohe=function(e){return _8(e)&&e.type==="hidden"},ahe=function(e){var i=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(n){return n.tagName==="SUMMARY"});return i},lhe=function(e,i){for(var n=0;n<e.length;n++)if(e[n].checked&&e[n].form===i)return e[n]},che=function(e){if(!e.name)return!0;var i=e.form||Vb(e),n=function(a){return i.querySelectorAll('input[type="radio"][name="'+a+'"]')},r;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")r=n(window.CSS.escape(e.name));else try{r=n(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var s=lhe(r,e.form);return!s||s===e},uhe=function(e){return _8(e)&&e.type==="radio"},dhe=function(e){return uhe(e)&&!che(e)},hhe=function(e){var i,n=e&&Vb(e),r=(i=n)===null||i===void 0?void 0:i.host,s=!1;if(n&&n!==e){var o,a,l;for(s=!!((o=r)!==null&&o!==void 0&&(a=o.ownerDocument)!==null&&a!==void 0&&a.contains(r)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!s&&r;){var u,p,f;n=Vb(r),r=(u=n)===null||u===void 0?void 0:u.host,s=!!((p=r)!==null&&p!==void 0&&(f=p.ownerDocument)!==null&&f!==void 0&&f.contains(r))}}return s},U3=function(e){var i=e.getBoundingClientRect(),n=i.width,r=i.height;return n===0&&r===0},phe=function(e,i){var n=i.displayCheck,r=i.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=gd.call(e,"details>summary:first-of-type"),o=s?e.parentElement:e;if(gd.call(o,"details:not([open]) *"))return!0;if(!n||n==="full"||n==="legacy-full"){if(typeof r=="function"){for(var a=e;e;){var l=e.parentElement,u=Vb(e);if(l&&!l.shadowRoot&&r(l)===!0)return U3(e);e.assignedSlot?e=e.assignedSlot:!l&&u!==e.ownerDocument?e=u.host:e=l}e=a}if(hhe(e))return!e.getClientRects().length;if(n!=="legacy-full")return!0}else if(n==="non-zero-area")return U3(e);return!1},fhe=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var i=e.parentElement;i;){if(i.tagName==="FIELDSET"&&i.disabled){for(var n=0;n<i.children.length;n++){var r=i.children.item(n);if(r.tagName==="LEGEND")return gd.call(i,"fieldset[disabled] *")?!0:!r.contains(e)}return!0}i=i.parentElement}return!1},qb=function(e,i){return!(i.disabled||Bb(i)||ohe(i)||phe(i,e)||ahe(i)||fhe(i))},I2=function(e,i){return!(dhe(i)||Lu(i)<0||!qb(e,i))},mhe=function(e){var i=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(i)||i>=0)},ghe=function t(e){var i=[],n=[];return e.forEach(function(r,s){var o=!!r.scopeParent,a=o?r.scopeParent:r,l=rhe(a,o),u=o?t(r.candidates):a;l===0?o?i.push.apply(i,u):i.push(a):n.push({documentOrder:s,tabIndex:l,item:r,isScope:o,content:u})}),n.sort(she).reduce(function(r,s){return s.isScope?r.push.apply(r,s.content):r.push(s.content),r},[]).concat(i)},S8=function(e,i){i=i||{};var n;return i.getShadowRoot?n=b8([e],i.includeContainer,{filter:I2.bind(null,i),flatten:!1,getShadowRoot:i.getShadowRoot,shadowRootFilter:mhe}):n=v8(e,i.includeContainer,I2.bind(null,i)),ghe(n)},yhe=function(e,i){i=i||{};var n;return i.getShadowRoot?n=b8([e],i.includeContainer,{filter:qb.bind(null,i),flatten:!0,getShadowRoot:i.getShadowRoot}):n=v8(e,i.includeContainer,qb.bind(null,i)),n},Wd=function(e,i){if(i=i||{},!e)throw new Error("No node provided");return gd.call(e,Hb)===!1?!1:I2(i,e)},vhe=g8.concat("iframe").join(","),eS=function(e,i){if(i=i||{},!e)throw new Error("No node provided");return gd.call(e,vhe)===!1?!1:qb(i,e)};const $8={getShadowRoot:!0};function x8(t){return Array.isArray(t)?t:Array.from(t)}function Es(t){const e="dir",i=`[${e}]`,n=jp(t,i);return n?n.getAttribute(e):"ltr"}function Mk(t){return t.getRootNode()}function bhe(t){const e=Mk(t);return"host"in e?e:null}function T8(t){return t.host||null}function bw(t,{selector:e,id:i}){function n(r){if(!r)return null;r.assignedSlot&&(r=r.assignedSlot);const s=Mk(r),o=i?"getElementById"in s?s.getElementById(i):null:e?s.querySelector(e):null,a=T8(s);return o||(a?n(a):null)}return n(t)}function jp(t,e){function i(n){return n?n.closest(e)||i(T8(Mk(n))):null}return i(t)}function whe(t,e){return E8(t,e)}function E8(t,e){if(!t)return;const i=e(t);if(i!==void 0)return i;const{parentNode:n}=t;return E8(n instanceof ShadowRoot?n.host:n,e)}function _he(t,e){return!!whe(e,i=>i===t?!0:void 0)}function She(t){return typeof(t==null?void 0:t.setFocus)=="function"}async function ww(t){if(t)return She(t)?t.setFocus():t.focus()}function $he(t){if(t)return S8(t,$8)[0]??t}function k8(t){var e;(e=$he(t))==null||e.focus()}const hg=":not([slot])";function O2(t,e,i){e&&!Array.isArray(e)&&typeof e!="string"&&(i=e,e=null);const n=e?Array.isArray(e)?e.map(r=>`[slot="${r}"]`).join(","):`[slot="${e}"]`:hg;return i!=null&&i.all?xhe(t,n,i):The(t,n,i)}function M8(t,e){return t?Array.from(t.children||[]).filter(i=>i==null?void 0:i.matches(e)):[]}function xhe(t,e,i){let n=e===hg?M8(t,hg):Array.from(t.querySelectorAll(e));n=i&&i.direct===!1?n:n.filter(s=>s.parentElement===t),n=i!=null&&i.matches?n.filter(s=>s==null?void 0:s.matches(i.matches)):n;const r=i==null?void 0:i.selector;return r?n.map(s=>Array.from(s.querySelectorAll(r))).reduce((s,o)=>[...s,...o],[]).filter(s=>!!s):n}function The(t,e,i){let n=e===hg?M8(t,hg)[0]||null:t.querySelector(e);n=i&&i.direct===!1||(n==null?void 0:n.parentElement)===t?n:null,n=i!=null&&i.matches?n!=null&&n.matches(i.matches)?n:null:n;const r=i==null?void 0:i.selector;return r?n==null?void 0:n.querySelector(r):n}function H3(t,e){return Array.from(t.children).filter(i=>i.matches(e))}function A2(t,e,i){if(typeof e=="string"&&e!=="")return e;if(e==="")return t[i]}function Ui(t){return(!!t).toString()}function Ehe(t){return ui(t)||Mhe(t)}function khe(t){return Che(t).filter(e=>e.nodeType===Node.TEXT_NODE).map(e=>e.textContent).join("").trim()}function Mhe(t){return!!khe(t)}function Che(t){return t.target.assignedNodes({flatten:!0})}function ui(t){return!!Jh(t).length}function Jh(t){return t.target.assignedElements({flatten:!0})}function yd(t){return!!(t.isPrimary&&t.button===0)}const Ihe=(t,e,i,n=!0)=>{const r=t.indexOf(e),s=r===0,o=r===t.length-1;n&&(i=i==="previous"&&s?"last":i==="next"&&o?"first":i);let a;return i==="previous"?a=t[r-1]||t[n?t.length-1:r]:i==="next"?a=t[r+1]||t[n?0:r]:i==="last"?a=t[t.length-1]:a=t[0],ww(a),a};function Ohe(t,e){if(t.parentNode!==e.parentNode)return!1;const i=Array.from(t.parentNode.children);return i.indexOf(t)<i.indexOf(e)}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */const L2="hidden-form-input";function Ck(t){return"checked"in t}const P2=new WeakMap,Ik=new WeakSet;function Ahe(t,e){if(jp(e.parentElement,"[form]"))return!0;const n="calciteInternalFormComponentRegister";let r=!1;return t.addEventListener(n,s=>{r=s.composedPath().some(o=>Ik.has(o)),s.stopPropagation()},{once:!0}),e.dispatchEvent(new CustomEvent(n,{bubbles:!0,composed:!0})),r}function C8(t){const{formEl:e}=t;return e?(e.requestSubmit(),!0):!1}function Lhe(t){var e;(e=t.formEl)==null||e.reset()}function Ok(t){const{el:e,value:i}=t,n=I8(t);if(!n||Ahe(n,e))return;t.formEl=n,t.defaultValue=i,Ck(t)&&(t.defaultChecked=t.checked);const r=(t.onFormReset||Phe).bind(t);n.addEventListener("reset",r),P2.set(t.el,r),Ik.add(e)}function I8(t){const{el:e,form:i}=t;return i?bw(e,{id:i}):jp(e,"form")}function Phe(){if(Ck(this)){this.checked=this.defaultChecked;return}this.value=this.defaultValue}function Ak(t){const{el:e,formEl:i}=t;if(!i)return;const n=P2.get(e);i.removeEventListener("reset",n),P2.delete(e),t.formEl=null,Ik.delete(e)}function Rhe(t,e){t.defaultValue=e}const O8=t=>{t.target.dispatchEvent(new CustomEvent("calciteInternalHiddenInputChange",{bubbles:!0}))},V3=t=>t.removeEventListener("change",O8);function Nhe(t){const{el:e,formEl:i,name:n,value:r}=t,{ownerDocument:s}=e,o=e.querySelectorAll(`input[slot="${L2}"]`);if(!i||!n){o.forEach(f=>{V3(f),f.remove()});return}const a=Array.isArray(r)?r:[r],l=[],u=new Set;o.forEach(f=>{const m=a.find(g=>g==f.value);m!=null?(u.add(m),B3(t,f,m)):l.push(f)});let p;a.forEach(f=>{if(u.has(f))return;let m=l.pop();m||(m=s.createElement("input"),m.slot=L2),p||(p=s.createDocumentFragment()),p.append(m),m.addEventListener("change",O8),B3(t,m,f)}),p&&e.append(p),l.forEach(f=>{V3(f),f.remove()})}function B3(t,e,i){var l;const{defaultValue:n,disabled:r,form:s,name:o,required:a}=t;e.defaultValue=n,e.disabled=r,e.name=o,e.required=a,e.tabIndex=-1,s?e.setAttribute("form",s):e.removeAttribute("form"),Ck(t)?(e.checked=t.checked,e.defaultChecked=t.defaultChecked,e.value=t.checked?i||"on":""):e.value=i||"",(l=t.syncHiddenFormInput)==null||l.call(t,e)}const Lk=({component:t})=>(Nhe(t),k("slot",{name:L2}));/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */function Dhe(){return navigator.userAgentData}function Fhe(){const t=Dhe();return t!=null&&t.brands?t.brands.map(({brand:e,version:i})=>`${e}/${i}`).join(" "):navigator.userAgent}const Ed=/firefox/i.test(Fhe()),ey=Ed?new WeakMap:null;function zhe(){const{disabled:t}=this;t||HTMLElement.prototype.click.call(this)}function A8(t){const e=t.target;if(Ed&&!ey.get(e))return;const{disabled:i}=e;i&&t.preventDefault()}const L8=["mousedown","mouseup","click"];function P8(t){if(Ed&&!ey.get(t.target))return;const{disabled:e}=t.target;e&&(t.stopImmediatePropagation(),t.preventDefault())}const Wb={capture:!0};function Ac(t,e=!1){if(t.disabled){t.el.setAttribute("tabindex","-1"),t.el.setAttribute("aria-disabled","true"),t.el.contains(document.activeElement)&&document.activeElement.blur(),R8(t);return}D8(t),typeof e=="function"?t.el.setAttribute("tabindex",e.call(t)?"0":"-1"):e===!0?t.el.setAttribute("tabindex","0"):e===!1&&t.el.removeAttribute("tabindex"),t.el.removeAttribute("aria-disabled")}function R8(t){t.el.click=zhe,jhe(Ed?N8(t):t.el)}function jhe(t){t&&(t.addEventListener("pointerdown",A8,Wb),L8.forEach(e=>t.addEventListener(e,P8,Wb)))}function N8(t){return ey.get(t.el)}function D8(t){delete t.el.click,Ghe(Ed?N8(t):t.el)}function Ghe(t){t&&(t.removeEventListener("pointerdown",A8,Wb),L8.forEach(e=>t.removeEventListener(e,P8,Wb)))}function Lc(t){if(!t.disabled||!Ed)return;const e=t.el.parentElement||t.el;ey.set(t.el,e),R8(t)}function Pc(t){Ed&&(ey.delete(t.el),D8(t))}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */function pi(t){return t==="l"?"m":"s"}async function Uhe(t){await(Hhe(t)?t.componentOnReady():new Promise(e=>requestAnimationFrame(()=>e())))}function Hhe(t){return typeof t.componentOnReady=="function"}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */const F8="calciteInternalLabelClick",_w="calciteInternalLabelConnected",Zb="calciteInternalLabelDisconnected",q3="calcite-label",vp=new WeakMap,Nm=new WeakMap,pg=new WeakMap,Kb=new WeakMap,Xu=new Set,Vhe=t=>{const{id:e}=t,i=e&&bw(t,{selector:`${q3}[for="${e}"]`});if(i)return i;const n=jp(t,q3);return!n||Bhe(n,t)?null:n};function Bhe(t,e){let i;const n="custom-element-ancestor-check",r=o=>{o.stopImmediatePropagation();const a=o.composedPath();i=a.slice(a.indexOf(e),a.indexOf(t))};return t.addEventListener(n,r,{once:!0}),e.dispatchEvent(new CustomEvent(n,{composed:!0,bubbles:!0})),t.removeEventListener(n,r),i.filter(o=>o!==e&&o!==t).filter(o=>{var a;return(a=o.tagName)==null?void 0:a.includes("-")}).length>0}function Gp(t){if(!t)return;const e=Vhe(t.el);if(Nm.has(e)&&e===t.labelEl||!e&&Xu.has(t))return;const i=Whe.bind(t);if(e){t.labelEl=e;const n=vp.get(e)||[];n.push(t),vp.set(e,n.sort(z8)),Nm.has(t.labelEl)||(Nm.set(t.labelEl,W3),t.labelEl.addEventListener(F8,W3)),Xu.delete(t),document.removeEventListener(_w,pg.get(t)),Kb.set(t,i),document.addEventListener(Zb,i)}else Xu.has(t)||(i(),document.removeEventListener(Zb,Kb.get(t)))}function Sw(t){if(!t||(Xu.delete(t),document.removeEventListener(_w,pg.get(t)),document.removeEventListener(Zb,Kb.get(t)),pg.delete(t),Kb.delete(t),!t.labelEl))return;const e=vp.get(t.labelEl);e.length===1&&(t.labelEl.removeEventListener(F8,Nm.get(t.labelEl)),Nm.delete(t.labelEl)),vp.set(t.labelEl,e.filter(i=>i!==t).sort(z8)),t.labelEl=null}function z8(t,e){return Ohe(t.el,e.el)?-1:1}function fg(t){var e,i;return t.label||((i=(e=t.labelEl)==null?void 0:e.textContent)==null?void 0:i.trim())||""}function W3(t){const e=t.detail.sourceEvent.target,i=vp.get(this),n=i.find(o=>o.el===e);if(i.includes(n))return;const s=i[0];s.disabled||s.onLabelClick(t)}function qhe(){Xu.has(this)&&Gp(this)}function Whe(){Xu.add(this);const t=pg.get(this)||qhe.bind(this);pg.set(this,t),document.addEventListener(_w,t)}async function Zhe(t){var n;if(await Uhe(t),vp.has(t))return;const i=(n=t.ownerDocument)==null?void 0:n.getElementById(t.for);i&&requestAnimationFrame(()=>{for(const r of Xu)if(r.el===i){Gp(r);break}})}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */const j8=new WeakMap,G8=new WeakMap;function zo(t){G8.set(t,new Promise(e=>j8.set(t,e)))}function jo(t){j8.get(t)()}function R2(t){return G8.get(t)}async function Go(t){return await R2(t),Jg(t),new Promise(e=>requestAnimationFrame(()=>e()))}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */function Pk(t){return t==="Enter"||t===" "}const Rk=["0","1","2","3","4","5","6","7","8","9"];/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */function ii(t,e,i){const n=Khe(t);return new n(e,i)}function Khe(t){class e extends window.MutationObserver{constructor(n){super(n),this.observedEntry=[],this.callback=n}observe(n,r){return this.observedEntry.push({target:n,options:r}),super.observe(n,r)}unobserve(n){const r=this.observedEntry.filter(s=>s.target!==n);this.observedEntry=[],this.callback(super.takeRecords(),this),this.disconnect(),r.forEach(s=>this.observe(s.target,s.options))}}return function(){return t==="intersection"?window.IntersectionObserver:t==="mutation"?e:window.ResizeObserver}()}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */const Jhe=new RegExp("\\.(0+)?$"),Yhe=new RegExp("0+$");class ze{constructor(e){if(e instanceof ze)return e;const[i,n]=spe(e).split(".").concat("");this.value=BigInt(i+n.padEnd(ze.DECIMALS,"0").slice(0,ze.DECIMALS))+BigInt(ze.ROUNDED&&n[ze.DECIMALS]>="5"),this.isNegative=e.charAt(0)==="-"}getIntegersAndDecimals(){const e=this.value.toString().replace("-","").padStart(ze.DECIMALS+1,"0"),i=e.slice(0,-ze.DECIMALS),n=e.slice(-ze.DECIMALS).replace(Yhe,"");return{integers:i,decimals:n}}toString(){const{integers:e,decimals:i}=this.getIntegersAndDecimals();return`${this.isNegative?"-":""}${e}${i.length?"."+i:""}`}formatToParts(e){const{integers:i,decimals:n}=this.getIntegersAndDecimals(),r=e.numberFormatter.formatToParts(BigInt(i));return this.isNegative&&r.unshift({type:"minusSign",value:e.minusSign}),n.length&&(r.push({type:"decimal",value:e.decimal}),n.split("").forEach(s=>r.push({type:"fraction",value:s}))),r}format(e){const{integers:i,decimals:n}=this.getIntegersAndDecimals(),r=`${this.isNegative?e.minusSign:""}${e.numberFormatter.format(BigInt(i))}`,s=n.length?`${e.decimal}${n.split("").map(o=>e.numberFormatter.format(Number(o))).join("")}`:"";return`${r}${s}`}add(e){return ze.fromBigInt(this.value+new ze(e).value)}subtract(e){return ze.fromBigInt(this.value-new ze(e).value)}multiply(e){return ze._divRound(this.value*new ze(e).value,ze.SHIFT)}divide(e){return ze._divRound(this.value*ze.SHIFT,new ze(e).value)}}ze.DECIMALS=100;ze.ROUNDED=!0;ze.SHIFT=BigInt("1"+"0".repeat(ze.DECIMALS));ze._divRound=(t,e)=>ze.fromBigInt(t/e+(ze.ROUNDED?t*BigInt(2)/e%BigInt(2):BigInt(0)));ze.fromBigInt=t=>Object.assign(Object.create(ze.prototype),{value:t,isNegative:t<BigInt(0)});function vo(t){return!(!t||isNaN(Number(t)))}function Xhe(t){return!t||!ope(t)?"":Jb(t,e=>{let i=!1;const n=e.split("").filter((r,s)=>r.match(/\./g)&&!i?(i=!0,!0):r.match(/\-/g)&&s===0?!0:Rk.includes(r)).join("");return vo(n)?new ze(n).toString():""})}const U8=/^([-0])0+(?=\d)/,Qhe=/(?!^\.)\.$/,epe=/(?!^-)-/g,tpe=/^-\b0\b\.?0*$/,ipe=/0*$/,npe=t=>Jb(t,e=>{const i=e.replace(epe,"").replace(Qhe,"").replace(U8,"$1");return vo(i)?tpe.test(i)?i:rpe(i):e});function rpe(t){const e=t.split(".")[1],i=new ze(t).toString(),[n,r]=i.split(".");return e&&r!==e?`${n}.${e}`:i}function Jb(t,e){if(!t)return t;const i=t.toLowerCase().indexOf("e")+1;return i?t.replace(/[eE]*$/g,"").substring(0,i).concat(t.slice(i).replace(/[eE]/g,"")).split(/[eE]/).map((n,r)=>e(r===1?n.replace(/\./g,""):n)).join("e").replace(/^e/,"1e"):e(t)}function spe(t){const e=t.split(/[eE]/);if(e.length===1)return t;const i=+t;if(Number.isSafeInteger(i))return`${i}`;const n=t.charAt(0)==="-",r=+e[1],s=e[0].split("."),o=(n?s[0].substring(1):s[0])||"",a=s[1]||"",l=(f,m)=>{const g=Math.abs(m)-f.length,y=g>0?`${"0".repeat(g)}${f}`:f;return`${y.slice(0,m)}.${y.slice(m)}`},u=(f,m)=>{const g=m>f.length?`${f}${"0".repeat(m-f.length)}`:f;return`${g.slice(0,m)}.${g.slice(m)}`},p=r>0?`${o}${u(a,r)}`:`${l(o,r)}${a}`;return`${n?"-":""}${p.charAt(0)==="."?"0":""}${p.replace(Jhe,"").replace(U8,"")}`}function ope(t){return Rk.some(e=>t.includes(e))}function ape(t,e,i){const n=e.split(".")[1];if(n){const r=n.match(ipe)[0];if(r&&i.delocalize(t).length!==e.length&&n.indexOf("e")===-1){const s=i.decimal;return t=t.includes(s)?t:`${t}${s}`,t.padEnd(t.length+r.length,i.localize("0"))}}return t}const vc="en",lpe=["ar","bg","bs","ca","cs","da","de","el",vc,"es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","no","nl","pl","pt-BR","pt-PT","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-HK","zh-TW"],cpe=["ar","bg","bs","ca","cs","da","de","de-AT","de-CH","el",vc,"en-AU","en-CA","en-GB","es","es-MX","et","fi","fr","fr-CH","he","hi","hr","hu","id","it","it-CH","ja","ko","lt","lv","mk","no","nl","pl","pt","pt-PT","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-HK","zh-TW"],upe=["arab","arabext","latn"],H8=t=>upe.includes(t),tS=new Intl.NumberFormat().resolvedOptions().numberingSystem,V8=tS==="arab"||!H8(tS)?"latn":tS,dpe=t=>H8(t)?t:V8;function B8(t,e="cldr"){const i=e==="cldr"?cpe:lpe;return t?i.includes(t)?t:(t=t.toLowerCase(),t==="nb"?"no":e==="t9n"&&t==="pt"?"pt-BR":(t.includes("-")&&(t=t.replace(/(\w+)-(\w+)/,(n,r,s)=>`${r}-${s.toUpperCase()}`),i.includes(t)||(t=t.split("-")[0])),t==="zh"?"zh-CN":i.includes(t)?t:(console.warn(`Translations for the "${t}" locale are not available and will fall back to the default, English (en).`),vc))):vc}const mg=new Set;function Ps(t){hpe(t),mg.size===0&&($v==null||$v.observe(document.documentElement,{attributes:!0,attributeFilter:["lang"],subtree:!0})),mg.add(t)}function hpe(t){t.effectiveLocale=ppe(t)}function Rs(t){mg.delete(t),mg.size===0&&$v.disconnect()}const $v=ii("mutation",t=>{t.forEach(e=>{const i=e.target;mg.forEach(n=>{if(!_he(i,n.el))return;const s=jp(n.el,"[lang]");if(!s){n.effectiveLocale=vc;return}const o=s.lang;n.effectiveLocale=s.hasAttribute("lang")&&o===""?vc:o})})});function ppe(t){var e;return t.el.lang||((e=jp(t.el,"[lang]"))==null?void 0:e.lang)||document.documentElement.lang||vc}class fpe{constructor(){this.delocalize=e=>this._numberFormatOptions?Jb(e,i=>i.replace(new RegExp(`[${this._minusSign}]`,"g"),"-").replace(new RegExp(`[${this._group}]`,"g"),"").replace(new RegExp(`[${this._decimal}]`,"g"),".").replace(new RegExp(`[${this._digits.join("")}]`,"g"),this._getDigitIndex)):e,this.localize=e=>this._numberFormatOptions?Jb(e,i=>vo(i.trim())?new ze(i.trim()).format(this).replace(new RegExp(`[${this._actualGroup}]`,"g"),this._group):i):e}get group(){return this._group}get decimal(){return this._decimal}get minusSign(){return this._minusSign}get digits(){return this._digits}get numberFormatter(){return this._numberFormatter}get numberFormatOptions(){return this._numberFormatOptions}set numberFormatOptions(e){if(e.locale=B8(e==null?void 0:e.locale),e.numberingSystem=dpe(e==null?void 0:e.numberingSystem),!this._numberFormatOptions&&e.locale===vc&&e.numberingSystem===V8&&Object.keys(e).length===2||JSON.stringify(this._numberFormatOptions)===JSON.stringify(e))return;this._numberFormatOptions=e,this._numberFormatter=new Intl.NumberFormat(this._numberFormatOptions.locale,this._numberFormatOptions),this._digits=[...new Intl.NumberFormat(this._numberFormatOptions.locale,{useGrouping:!1,numberingSystem:this._numberFormatOptions.numberingSystem}).format(9876543210)].reverse();const i=new Map(this._digits.map((r,s)=>[r,s])),n=new Intl.NumberFormat(this._numberFormatOptions.locale,{numberingSystem:this._numberFormatOptions.numberingSystem}).formatToParts(-123456789e-1);this._actualGroup=n.find(r=>r.type==="group").value,this._group=this._actualGroup.trim().length===0||this._actualGroup==" "?"Â ":this._actualGroup,this._decimal=n.find(r=>r.type==="decimal").value,this._minusSign=n.find(r=>r.type==="minusSign").value,this._getDigitIndex=r=>i.get(r)}}const Yi=new fpe;/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */const a0={};async function mpe(t,e){const i=`${e}_${t}`;return a0[i]||(a0[i]=fetch(e8(`./assets/${e}/t9n/messages_${t}.json`)).then(n=>(n.ok||Z3(),n.json())).catch(()=>Z3())),a0[i]}function Z3(){throw new Error("could not fetch component message bundle")}function Nk(t){t.messages={...t.defaultMessages,...t.messageOverrides}}async function Ns(t){t.defaultMessages=await q8(t,t.effectiveLocale),Nk(t)}async function q8(t,e){const{el:i}=t,r=i.tagName.toLowerCase().replace("calcite-","");return mpe(B8(e,"t9n"),r)}async function Ds(t,e){t.defaultMessages=await q8(t,e),Nk(t)}function Fs(t){t.onMessagesChange=gpe}function zs(t){t.onMessagesChange=void 0}function gpe(){Nk(this)}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */const ype=["lang","role","aria-expanded"],Yb=new Map;let Yh;function W8(t,e,i=!1){const{el:n}=t,r=i?t.globalAttributes:{};e.filter(s=>!!ype.includes(s)&&!!n.hasAttribute(s)).forEach(s=>{const o=n.getAttribute(s);o!==null&&(r[s]=o)}),t.globalAttributes=r}function Z8(t){t.forEach(({target:e})=>{const[i,n]=Yb.get(e);W8(i,n.attributeFilter)})}function vpe(t,e){const{el:i}=t,n={attributeFilter:e};Yb.set(i,[t,n]),W8(t,e,!0),Yh||(Yh=ii("mutation",Z8)),Yh.observe(i,n)}function bpe(t){Yb.delete(t.el),Z8(Yh.takeRecords()),Yh.disconnect();for(const[e,[,i]]of Yb.entries())Yh.observe(e,i)}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */const wpe={icon:"icon",flipRtl:"flip-rtl"},iS={},nS={},K8={s:16,m:24,l:32};async function _pe({icon:t,scale:e}){const i=K8[e],n=Spe(t),r=n.charAt(n.length-1)==="F",o=`${r?n.substring(0,n.length-1):n}${i}${r?"F":""}`;if(iS[o])return iS[o];nS[o]||(nS[o]=fetch(e8(`./assets/icon/${o}.json`)).then(l=>l.json()).catch(()=>(console.error(`"${o}" is not a valid calcite-ui-icon name`),"")));const a=await nS[o];return iS[o]=a,a}function Spe(t){const e=!isNaN(Number(t.charAt(0))),i=t.split("-");if(i.length>0){const r=/[a-z]/i;t=i.map((s,o)=>s.replace(r,function(l,u){return o===0&&u===0?l:l.toUpperCase()})).join("")}return e?`i${t}`:t}const $pe=":host{display:inline-flex;color:var(--calcite-ui-icon-color)}:host([scale=s]){inline-size:16px;block-size:16px;min-inline-size:16px;min-block-size:16px}:host([scale=m]){inline-size:24px;block-size:24px;min-inline-size:24px;min-block-size:24px}:host([scale=l]){inline-size:32px;block-size:32px;min-inline-size:32px;min-block-size:32px}.flip-rtl{transform:scaleX(-1)}.svg{display:block}:host([hidden]){display:none}[hidden]{display:none}",xpe=Ct(class extends It{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.icon=null,this.flipRtl=!1,this.scale="m",this.textLabel=void 0,this.pathData=void 0,this.visible=!1}connectedCallback(){this.waitUntilVisible(()=>{this.visible=!0,this.loadIconPathData()})}disconnectedCallback(){var e;(e=this.intersectionObserver)==null||e.disconnect(),this.intersectionObserver=null}async componentWillLoad(){this.loadIconPathData()}render(){const{el:e,flipRtl:i,pathData:n,scale:r,textLabel:s}=this,o=Es(e),a=K8[r],l=!!s,u=[].concat(n||"");return k(Pn,{"aria-hidden":Ui(!l),"aria-label":l?s:null,role:l?"img":null},k("svg",{"aria-hidden":"true",class:{[wpe.flipRtl]:o==="rtl"&&i,svg:!0},fill:"currentColor",height:"100%",viewBox:`0 0 ${a} ${a}`,width:"100%",xmlns:"http://www.w3.org/2000/svg"},u.map(p=>typeof p=="string"?k("path",{d:p}):k("path",{d:p.d,opacity:"opacity"in p?p.opacity:1}))))}async loadIconPathData(){const{icon:e,scale:i,visible:n}=this;if(!e||!n)return;const r=await _pe({icon:e,scale:i});e===this.icon&&(this.pathData=r)}waitUntilVisible(e){if(this.intersectionObserver=ii("intersection",i=>{i.forEach(n=>{n.isIntersecting&&(this.intersectionObserver.disconnect(),this.intersectionObserver=null,e())})},{rootMargin:"50px"}),!this.intersectionObserver){e();return}this.intersectionObserver.observe(this.el)}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{icon:["loadIconPathData"],scale:["loadIconPathData"]}}static get style(){return $pe}},[1,"calcite-icon",{icon:[513],flipRtl:[516,"flip-rtl"],scale:[513],textLabel:[1,"text-label"],pathData:[32],visible:[32]},void 0,{icon:["loadIconPathData"],scale:["loadIconPathData"]}]);function js(){if(typeof customElements>"u")return;["calcite-icon"].forEach(e=>{switch(e){case"calcite-icon":customElements.get(e)||customElements.define(e,xpe);break}})}js();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */const Tpe='@charset "UTF-8";@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:host{position:relative;margin-inline:auto;display:none;align-items:center;justify-content:center;opacity:1;min-block-size:var(--calcite-loader-size);font-size:var(--calcite-loader-font-size);stroke:var(--calcite-color-brand);stroke-width:3;fill:none;transform:scale(1, 1);animation:loader-color-shift calc(var(--calcite-internal-animation-timing-slow) / var(--calcite-internal-duration-factor) * 2 / var(--calcite-internal-duration-factor)) alternate-reverse infinite linear;padding-block:var(--calcite-loader-padding, 4rem)}:host([scale=s]){--calcite-loader-font-size:var(--calcite-font-size--2);--calcite-loader-size:2rem;--calcite-loader-size-inline:0.75rem}:host([scale=m]){--calcite-loader-font-size:var(--calcite-font-size-0);--calcite-loader-size:4rem;--calcite-loader-size-inline:1rem}:host([scale=l]){--calcite-loader-font-size:var(--calcite-font-size-2);--calcite-loader-size:6rem;--calcite-loader-size-inline:1.5rem}:host([no-padding]){padding-block:0px}:host{display:flex}.loader__text{display:block;text-align:center;font-size:var(--calcite-font-size--2);line-height:1rem;color:var(--calcite-color-text-1);margin-block-start:calc(var(--calcite-loader-size) + 1.5rem)}.loader__percentage{position:absolute;display:block;text-align:center;color:var(--calcite-color-text-1);font-size:var(--calcite-loader-font-size);inline-size:var(--calcite-loader-size);inset-inline-start:50%;margin-inline-start:calc(var(--calcite-loader-size) / 2 * -1);line-height:0.25;transform:scale(1, 1)}.loader__svgs{position:absolute;overflow:visible;opacity:1;inline-size:var(--calcite-loader-size);block-size:var(--calcite-loader-size);inset-inline-start:50%;margin-inline-start:calc(var(--calcite-loader-size) / 2 * -1);animation-iteration-count:infinite;animation-timing-function:linear;animation-duration:calc(var(--calcite-internal-animation-timing-slow) / var(--calcite-internal-duration-factor) * 6.66 / var(--calcite-internal-duration-factor));animation-name:loader-clockwise}.loader__svg{position:absolute;inset-block-start:0px;transform-origin:center;overflow:visible;inset-inline-start:0;inline-size:var(--calcite-loader-size);block-size:var(--calcite-loader-size);animation-iteration-count:infinite;animation-timing-function:linear}@supports (display: grid){.loader__svg--1{animation-name:loader-offset-1}.loader__svg--2{animation-name:loader-offset-2}.loader__svg--3{animation-name:loader-offset-3}}:host([type=determinate]){animation:none;stroke:var(--calcite-color-border-3)}:host([type=determinate]) .loader__svgs{animation:none}:host([type=determinate]) .loader__svg--3{animation:none;stroke:var(--calcite-color-brand);stroke-dasharray:150.79632;transform:rotate(-90deg);transition:all var(--calcite-internal-animation-timing-fast) linear}:host([inline]){position:relative;margin:0px;animation:none;stroke:currentColor;stroke-width:2;padding-block:0px;block-size:var(--calcite-loader-size-inline);min-block-size:var(--calcite-loader-size-inline);inline-size:var(--calcite-loader-size-inline);margin-inline-end:calc(var(--calcite-loader-size-inline) * 0.5);vertical-align:calc(var(--calcite-loader-size-inline) * -1 * 0.2)}:host([inline]) .loader__svgs{inset-block-start:0px;margin:0px;inset-inline-start:0;inline-size:var(--calcite-loader-size-inline);block-size:var(--calcite-loader-size-inline)}:host([inline]) .loader__svg{inline-size:var(--calcite-loader-size-inline);block-size:var(--calcite-loader-size-inline)}:host([complete]){opacity:0;transform:scale(0.75, 0.75);transform-origin:center;transition:opacity var(--calcite-internal-animation-timing-medium) linear 1000ms, transform var(--calcite-internal-animation-timing-medium) linear 1000ms}:host([complete]) .loader__svgs{opacity:0;transform:scale(0.75, 0.75);transform-origin:center;transition:opacity calc(180ms * var(--calcite-internal-duration-factor)) linear 800ms, transform calc(180ms * var(--calcite-internal-duration-factor)) linear 800ms}:host([complete]) .loader__percentage{color:var(--calcite-color-brand);transform:scale(1.05, 1.05);transform-origin:center;transition:color var(--calcite-internal-animation-timing-medium) linear, transform var(--calcite-internal-animation-timing-medium) linear}.loader__svg--1{stroke-dasharray:27.9252444444 139.6262222222;animation-duration:calc(var(--calcite-internal-animation-timing-slow) / var(--calcite-internal-duration-factor) * 4.8 / var(--calcite-internal-duration-factor))}@keyframes loader-offset-1{0%{stroke-dasharray:27.9252444444 251.3272;stroke-dashoffset:0}50%{stroke-dasharray:139.6262222222 139.6262222222;stroke-dashoffset:-83.7757333333}100%{stroke-dasharray:27.9252444444 251.3272;stroke-dashoffset:-279.2524444444}}.loader__svg--2{stroke-dasharray:55.8504888889 139.6262222222;animation-duration:calc(var(--calcite-internal-animation-timing-slow) / var(--calcite-internal-duration-factor) * 6.4 / var(--calcite-internal-duration-factor))}@keyframes loader-offset-2{0%{stroke-dasharray:55.8504888889 223.4019555556;stroke-dashoffset:0}50%{stroke-dasharray:139.6262222222 139.6262222222;stroke-dashoffset:-97.7383555556}100%{stroke-dasharray:55.8504888889 223.4019555556;stroke-dashoffset:-279.2524444444}}.loader__svg--3{stroke-dasharray:13.9626222222 139.6262222222;animation-duration:calc(var(--calcite-internal-animation-timing-slow) / var(--calcite-internal-duration-factor) * 7.734 / var(--calcite-internal-duration-factor))}@keyframes loader-offset-3{0%{stroke-dasharray:13.9626222222 265.2898222222;stroke-dashoffset:0}50%{stroke-dasharray:139.6262222222 139.6262222222;stroke-dashoffset:-76.7944222222}100%{stroke-dasharray:13.9626222222 265.2898222222;stroke-dashoffset:-279.2524444444}}@keyframes loader-color-shift{0%{stroke:var(--calcite-color-brand)}33%{stroke:var(--calcite-color-brand-press)}66%{stroke:var(--calcite-color-brand-hover)}100%{stroke:var(--calcite-color-brand)}}@keyframes loader-clockwise{100%{transform:rotate(360deg)}}:host([hidden]){display:none}[hidden]{display:none}',Epe=Ct(class extends It{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.inline=!1,this.label=void 0,this.scale="m",this.type=void 0,this.value=0,this.text=""}render(){const{el:e,inline:i,label:n,scale:r,text:s,type:o,value:a}=this,l=e.id||Oc(),u=.45,p=i?this.getInlineSize(r):this.getSize(r),f=p*u,m=`0 0 ${p} ${p}`,g=o==="determinate",y=2*f*Math.PI,v=a/100*y,b=y-v,_=Math.floor(a),$={"aria-valuenow":_,"aria-valuemin":0,"aria-valuemax":100,complete:_===100},x={r:f,cx:p/2,cy:p/2},E={"stroke-dasharray":`${v} ${b}`};return k(Pn,{"aria-label":n,id:l,role:"progressbar",...g?$:{}},k("div",{class:"loader__svgs"},k("svg",{"aria-hidden":"true",class:"loader__svg loader__svg--1",viewBox:m},k("circle",{...x})),k("svg",{"aria-hidden":"true",class:"loader__svg loader__svg--2",viewBox:m},k("circle",{...x})),k("svg",{"aria-hidden":"true",class:"loader__svg loader__svg--3",viewBox:m,...g?{style:E}:{}},k("circle",{...x}))),s&&k("div",{class:"loader__text"},s),g&&k("div",{class:"loader__percentage"},a))}getSize(e){return{s:32,m:56,l:80}[e]}getInlineSize(e){return{s:12,m:16,l:20}[e]}get el(){return this}static get style(){return Tpe}},[1,"calcite-loader",{inline:[516],label:[1],scale:[513],type:[513],value:[2],text:[1]}]);function kd(){if(typeof customElements>"u")return;["calcite-loader"].forEach(e=>{switch(e){case"calcite-loader":customElements.get(e)||customElements.define(e,Epe);break}})}kd();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */const Fn={buttonLoader:"calcite-button--loader",content:"content",contentSlotted:"content--slotted",icon:"icon",iconStart:"icon--start",iconEnd:"icon--end",loadingIn:"loading-in",loadingOut:"loading-out",iconStartEmpty:"icon-start-empty",iconEndEmpty:"icon-end-empty",buttonPadding:"button-padding",buttonPaddingShrunk:"button-padding--shrunk"},kpe=`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline-block;inline-size:auto;vertical-align:middle}:host([round]){border-radius:50px}:host([round]) a,:host([round]) button{border-radius:50px}:host button,:host a{outline-color:transparent}:host button:focus,:host a:focus{outline:2px solid var(--calcite-color-brand);outline-offset:calc(
            2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}:host button,:host a{--calcite-button-content-margin-internal:0.5rem;--calcite-button-padding-x-internal:7px;--calcite-button-padding-y-internal:3px;padding-block:var(--calcite-button-padding-y-internal);padding-inline:var(--calcite-button-padding-x-internal);position:relative;box-sizing:border-box;display:flex;block-size:100%;inline-size:100%;cursor:pointer;-webkit-user-select:none;user-select:none;appearance:none;align-items:center;justify-content:center;border-radius:0px;border-style:none;text-align:center;font-family:inherit;font-weight:var(--calcite-font-weight-normal);text-decoration-line:none;transition:color var(--calcite-animation-timing) ease-in-out, background-color var(--calcite-animation-timing) ease-in-out, box-shadow var(--calcite-animation-timing) ease-in-out, outline-color var(--calcite-internal-animation-timing-fast) ease-in-out}:host button:hover,:host a:hover{text-decoration-line:none}:host button span,:host a span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.content{margin-inline:var(--calcite-button-content-margin-internal)}.icon-start-empty .content{margin-inline-start:unset}.icon-end-empty .content{margin-inline-end:unset}:host([scale=m]) button,:host([scale=m]) a{--calcite-button-content-margin-internal:0.75rem}:host([scale=l]) button,:host([scale=l]) a{--calcite-button-content-margin-internal:1rem}:host([width=auto]){inline-size:auto}:host([width=half]){inline-size:50%}:host([width=full]){inline-size:100%}:host([alignment=center]:not([width=auto])) a,:host([alignment=center]:not([width=auto])) button{justify-content:center}:host([alignment=start]:not([width=auto])) a,:host([alignment=start]:not([width=auto])) button{justify-content:flex-start}:host([alignment=end]:not([width=auto])) a,:host([alignment=end]:not([width=auto])) button{justify-content:flex-end}:host([alignment*=space-between]:not([width=auto])) a,:host([alignment*=space-between]:not([width=auto])) button{justify-content:space-between}:host([alignment=icon-start-space-between]:not([width=auto])) .icon--start{margin-inline-end:auto}:host([alignment=icon-start-space-between]:not([width=auto])) a,:host([alignment=icon-start-space-between]:not([width=auto])) button{text-align:unset}:host([alignment=icon-end-space-between]:not([width=auto])) .icon--end{margin-inline-start:auto}:host([alignment=icon-end-space-between]:not([width=auto])) a,:host([alignment=icon-end-space-between]:not([width=auto])) button{text-align:unset}:host([alignment=center]) a:not(.content--slotted) .icon--start+.icon--end,:host([alignment=center]) button:not(.content--slotted) .icon--start+.icon--end{margin-inline-start:var(--calcite-button-content-margin-internal)}.icon{position:relative;margin:0px;display:inline-flex;font-weight:var(--calcite-font-weight-normal);line-height:inherit}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}@keyframes loader-in{0%{inline-size:0;opacity:0;transform:scale(0.5)}100%{inline-size:1em;opacity:1;transform:scale(1)}}@keyframes loader-out{0%{inline-size:1em;opacity:1;transform:scale(1)}100%{inline-size:0;opacity:0;transform:scale(0.5)}}.calcite-button--loader{display:flex}.calcite-button--loader calcite-loader{margin:0px;transition:inline-size var(--calcite-internal-animation-timing-slow) ease-in-out, opacity var(--calcite-internal-animation-timing-slow) ease-in-out, transform var(--calcite-internal-animation-timing-slow) ease-in-out}.calcite-button--loader calcite-loader.loading-in{animation-name:loader-in;animation-duration:var(--calcite-internal-animation-timing-slow)}.calcite-button--loader calcite-loader.loading-out{animation-name:loader-out;animation-duration:var(--calcite-internal-animation-timing-slow)}:host([loading]) button.content--slotted .calcite-button--loader calcite-loader,:host([loading]) a.content--slotted .calcite-button--loader calcite-loader{margin-inline-end:var(--calcite-button-content-margin-internal)}:host([loading]) button:not(.content--slotted) .icon--start,:host([loading]) button:not(.content--slotted) .icon--end,:host([loading]) a:not(.content--slotted) .icon--start,:host([loading]) a:not(.content--slotted) .icon--end{display:none}:host([appearance]) button,:host([appearance]) a{border-width:1px;border-style:solid;border-color:transparent}:host([kind=brand]) button,:host([kind=brand]) a{background-color:var(--calcite-color-brand);color:var(--calcite-color-text-inverse)}:host([kind=brand]) button:hover,:host([kind=brand]) button:focus,:host([kind=brand]) a:hover,:host([kind=brand]) a:focus{background-color:var(--calcite-color-brand-hover)}:host([kind=brand]) button:active,:host([kind=brand]) a:active{background-color:var(--calcite-color-brand-press)}:host([kind=brand]) button calcite-loader,:host([kind=brand]) a calcite-loader{color:var(--calcite-color-text-inverse)}:host([kind=danger]) button,:host([kind=danger]) a{background-color:var(--calcite-color-status-danger);color:var(--calcite-color-text-inverse)}:host([kind=danger]) button:hover,:host([kind=danger]) button:focus,:host([kind=danger]) a:hover,:host([kind=danger]) a:focus{background-color:var(--calcite-color-status-danger-hover)}:host([kind=danger]) button:active,:host([kind=danger]) a:active{background-color:var(--calcite-color-status-danger-press)}:host([kind=danger]) button calcite-loader,:host([kind=danger]) a calcite-loader{color:var(--calcite-color-text-inverse)}:host([kind=neutral]) button,:host([kind=neutral]) a{background-color:var(--calcite-color-foreground-3);color:var(--calcite-color-text-1)}:host([kind=neutral]) button:hover,:host([kind=neutral]) button:focus,:host([kind=neutral]) a:hover,:host([kind=neutral]) a:focus{background-color:var(--calcite-color-foreground-2)}:host([kind=neutral]) button:active,:host([kind=neutral]) a:active{background-color:var(--calcite-color-foreground-1)}:host([kind=neutral]) button calcite-loader,:host([kind=neutral]) a calcite-loader{color:var(--calcite-color-text-1)}:host([kind=inverse]) button,:host([kind=inverse]) a{color:var(--calcite-color-text-inverse);background-color:var(--calcite-color-inverse)}:host([kind=inverse]) button:hover,:host([kind=inverse]) button:focus,:host([kind=inverse]) a:hover,:host([kind=inverse]) a:focus{background-color:var(--calcite-color-inverse-hover)}:host([kind=inverse]) button:active,:host([kind=inverse]) a:active{background-color:var(--calcite-color-inverse-press)}:host([kind=inverse]) button calcite-loader,:host([kind=inverse]) a calcite-loader{color:var(--calcite-color-text-inverse)}:host([appearance=outline-fill]) button,:host([appearance=outline-fill]) a{border-width:1px;border-style:solid;background-color:var(--calcite-color-foreground-1);box-shadow:inset 0 0 0 1px transparent}:host([appearance=outline-fill][kind=brand]) button,:host([appearance=outline-fill][kind=brand]) a{border-color:var(--calcite-color-brand);background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-brand)}:host([appearance=outline-fill][kind=brand]) button:hover,:host([appearance=outline-fill][kind=brand]) a:hover{border-color:var(--calcite-color-brand-hover);color:var(--calcite-color-brand-hover);box-shadow:inset 0 0 0 1px var(--calcite-color-brand-hover)}:host([appearance=outline-fill][kind=brand]) button:focus,:host([appearance=outline-fill][kind=brand]) a:focus{border-color:var(--calcite-color-brand);color:var(--calcite-color-brand);box-shadow:inset 0 0 0 2px var(--calcite-color-brand)}:host([appearance=outline-fill][kind=brand]) button:active,:host([appearance=outline-fill][kind=brand]) a:active{border-color:var(--calcite-color-brand-press);color:var(--calcite-color-brand-press);box-shadow:inset 0 0 0 2px var(--calcite-color-brand-press)}:host([appearance=outline-fill][kind=brand]) button calcite-loader,:host([appearance=outline-fill][kind=brand]) a calcite-loader{color:var(--calcite-color-brand)}:host([appearance=outline-fill][kind=danger]) button,:host([appearance=outline-fill][kind=danger]) a{border-color:var(--calcite-color-status-danger);background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-status-danger)}:host([appearance=outline-fill][kind=danger]) button:hover,:host([appearance=outline-fill][kind=danger]) a:hover{border-color:var(--calcite-color-status-danger-hover);color:var(--calcite-color-status-danger-hover);box-shadow:inset 0 0 0 1px var(--calcite-color-status-danger-hover)}:host([appearance=outline-fill][kind=danger]) button:focus,:host([appearance=outline-fill][kind=danger]) a:focus{border-color:var(--calcite-color-status-danger);color:var(--calcite-color-status-danger);box-shadow:inset 0 0 0 2px var(--calcite-color-status-danger)}:host([appearance=outline-fill][kind=danger]) button:active,:host([appearance=outline-fill][kind=danger]) a:active{border-color:var(--calcite-color-status-danger-press);color:var(--calcite-color-status-danger-press);box-shadow:inset 0 0 0 2px var(--calcite-color-status-danger-press)}:host([appearance=outline-fill][kind=danger]) button calcite-loader,:host([appearance=outline-fill][kind=danger]) a calcite-loader{color:var(--calcite-color-status-danger)}:host([appearance=outline-fill][kind=neutral]) button,:host([appearance=outline-fill][kind=neutral]) a{background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-1);border-color:var(--calcite-color-border-1)}:host([appearance=outline-fill][kind=neutral]) button:hover,:host([appearance=outline-fill][kind=neutral]) a:hover{box-shadow:inset 0 0 0 1px var(--calcite-color-foreground-3)}:host([appearance=outline-fill][kind=neutral]) button:focus,:host([appearance=outline-fill][kind=neutral]) a:focus{box-shadow:inset 0 0 0 2px var(--calcite-color-foreground-3)}:host([appearance=outline-fill][kind=neutral]) button:active,:host([appearance=outline-fill][kind=neutral]) a:active{box-shadow:inset 0 0 0 2px var(--calcite-color-foreground-3)}:host([appearance=outline-fill][kind=neutral]) button calcite-loader,:host([appearance=outline-fill][kind=neutral]) a calcite-loader{color:var(--calcite-color-text-1)}:host([appearance=outline-fill][kind=inverse]) button,:host([appearance=outline-fill][kind=inverse]) a{background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-1);border-color:var(--calcite-color-inverse)}:host([appearance=outline-fill][kind=inverse]) button:hover,:host([appearance=outline-fill][kind=inverse]) a:hover{border-color:var(--calcite-color-inverse-hover);box-shadow:inset 0 0 0 1px var(--calcite-color-inverse-hover)}:host([appearance=outline-fill][kind=inverse]) button:focus,:host([appearance=outline-fill][kind=inverse]) a:focus{border-color:var(--calcite-color-inverse);box-shadow:inset 0 0 0 2px var(--calcite-color-inverse)}:host([appearance=outline-fill][kind=inverse]) button:active,:host([appearance=outline-fill][kind=inverse]) a:active{border-color:var(--calcite-color-inverse-press);box-shadow:inset 0 0 0 2px var(--calcite-color-inverse-press)}:host([appearance=outline-fill][kind=inverse]) button calcite-loader,:host([appearance=outline-fill][kind=inverse]) a calcite-loader{color:var(--calcite-color-text-1)}:host([appearance=outline]) button,:host([appearance=outline]) a{border-width:1px;border-style:solid;background-color:transparent;box-shadow:inset 0 0 0 1px transparent}:host([appearance=outline][kind=brand]) button,:host([appearance=outline][kind=brand]) a{border-color:var(--calcite-color-brand);background-color:transparent;color:var(--calcite-color-brand)}:host([appearance=outline][kind=brand]) button:hover,:host([appearance=outline][kind=brand]) a:hover{border-color:var(--calcite-color-brand-hover);color:var(--calcite-color-brand-hover);box-shadow:inset 0 0 0 1px var(--calcite-color-brand-hover)}:host([appearance=outline][kind=brand]) button:focus,:host([appearance=outline][kind=brand]) a:focus{border-color:var(--calcite-color-brand);color:var(--calcite-color-brand);box-shadow:inset 0 0 0 2px var(--calcite-color-brand)}:host([appearance=outline][kind=brand]) button:active,:host([appearance=outline][kind=brand]) a:active{border-color:var(--calcite-color-brand-press);color:var(--calcite-color-brand-press);box-shadow:inset 0 0 0 2px var(--calcite-color-brand-press)}:host([appearance=outline][kind=brand]) button calcite-loader,:host([appearance=outline][kind=brand]) a calcite-loader{color:var(--calcite-color-brand)}:host([appearance=outline][kind=danger]) button,:host([appearance=outline][kind=danger]) a{border-color:var(--calcite-color-status-danger);background-color:transparent;color:var(--calcite-color-status-danger)}:host([appearance=outline][kind=danger]) button:hover,:host([appearance=outline][kind=danger]) a:hover{border-color:var(--calcite-color-status-danger-hover);color:var(--calcite-color-status-danger-hover);box-shadow:inset 0 0 0 1px var(--calcite-color-status-danger-hover)}:host([appearance=outline][kind=danger]) button:focus,:host([appearance=outline][kind=danger]) a:focus{border-color:var(--calcite-color-status-danger);color:var(--calcite-color-status-danger);box-shadow:inset 0 0 0 2px var(--calcite-color-status-danger)}:host([appearance=outline][kind=danger]) button:active,:host([appearance=outline][kind=danger]) a:active{border-color:var(--calcite-color-status-danger-press);color:var(--calcite-color-status-danger-press);box-shadow:inset 0 0 0 2px var(--calcite-color-status-danger-press)}:host([appearance=outline][kind=danger]) button calcite-loader,:host([appearance=outline][kind=danger]) a calcite-loader{color:var(--calcite-color-status-danger)}:host([appearance=outline][kind=neutral]) button,:host([appearance=outline][kind=neutral]) a{background-color:transparent;color:var(--calcite-color-text-1);border-color:var(--calcite-color-border-1)}:host([appearance=outline][kind=neutral]) button:hover,:host([appearance=outline][kind=neutral]) a:hover{box-shadow:inset 0 0 0 1px var(--calcite-color-foreground-3)}:host([appearance=outline][kind=neutral]) button:focus,:host([appearance=outline][kind=neutral]) a:focus{box-shadow:inset 0 0 0 2px var(--calcite-color-foreground-3)}:host([appearance=outline][kind=neutral]) button:active,:host([appearance=outline][kind=neutral]) a:active{box-shadow:inset 0 0 0 2px var(--calcite-color-foreground-3)}:host([appearance=outline][kind=neutral]) button calcite-loader,:host([appearance=outline][kind=neutral]) a calcite-loader{color:var(--calcite-color-text-1)}:host([appearance=outline][kind=inverse]) button,:host([appearance=outline][kind=inverse]) a{background-color:transparent;color:var(--calcite-color-text-1);border-color:var(--calcite-color-inverse)}:host([appearance=outline][kind=inverse]) button:hover,:host([appearance=outline][kind=inverse]) a:hover{border-color:var(--calcite-color-inverse-hover);box-shadow:inset 0 0 0 1px var(--calcite-color-inverse-hover)}:host([appearance=outline][kind=inverse]) button:focus,:host([appearance=outline][kind=inverse]) a:focus{border-color:var(--calcite-color-inverse);box-shadow:inset 0 0 0 2px var(--calcite-color-inverse)}:host([appearance=outline][kind=inverse]) button:active,:host([appearance=outline][kind=inverse]) a:active{border-color:var(--calcite-color-inverse-press);box-shadow:inset 0 0 0 2px var(--calcite-color-inverse-press)}:host([appearance=outline][kind=inverse]) button calcite-loader,:host([appearance=outline][kind=inverse]) a calcite-loader{color:var(--calcite-color-text-1)}:host([appearance=outline-fill][split-child=primary]) button,:host([appearance=outline][split-child=primary]) button{border-inline-end-width:0;border-inline-start-width:1px}:host([appearance=outline-fill][split-child=secondary]) button,:host([appearance=outline][split-child=secondary]) button{border-inline-start-width:0;border-inline-end-width:1px}:host([appearance=transparent]:not(.enable-editing-button)) button,:host([appearance=transparent]:not(.enable-editing-button)) a{background-color:transparent}:host([appearance=transparent]:not(.enable-editing-button)) button:hover,:host([appearance=transparent]:not(.enable-editing-button)) button:focus,:host([appearance=transparent]:not(.enable-editing-button)) a:hover,:host([appearance=transparent]:not(.enable-editing-button)) a:focus{background-color:var(--calcite-color-transparent-hover)}:host([appearance=transparent]:not(.enable-editing-button)) button:active,:host([appearance=transparent]:not(.enable-editing-button)) a:active{background-color:var(--calcite-color-transparent-press)}:host([appearance=transparent][kind=brand]) button,:host([appearance=transparent][kind=brand]) a{color:var(--calcite-color-brand)}:host([appearance=transparent][kind=brand]) button:hover,:host([appearance=transparent][kind=brand]) a:hover{color:var(--calcite-color-brand-hover)}:host([appearance=transparent][kind=brand]) button:focus,:host([appearance=transparent][kind=brand]) a:focus{color:var(--calcite-color-brand)}:host([appearance=transparent][kind=brand]) button:active,:host([appearance=transparent][kind=brand]) a:active{color:var(--calcite-color-brand-press)}:host([appearance=transparent][kind=brand]) button calcite-loader,:host([appearance=transparent][kind=brand]) a calcite-loader{color:var(--calcite-color-brand)}:host([appearance=transparent][kind=danger]) button,:host([appearance=transparent][kind=danger]) a{color:var(--calcite-color-status-danger)}:host([appearance=transparent][kind=danger]) button:hover,:host([appearance=transparent][kind=danger]) a:hover{color:var(--calcite-color-status-danger-hover)}:host([appearance=transparent][kind=danger]) button:focus,:host([appearance=transparent][kind=danger]) a:focus{color:var(--calcite-color-status-danger)}:host([appearance=transparent][kind=danger]) button:active,:host([appearance=transparent][kind=danger]) a:active{color:var(--calcite-color-status-danger-press)}:host([appearance=transparent][kind=danger]) button calcite-loader,:host([appearance=transparent][kind=danger]) a calcite-loader{color:var(--calcite-color-status-danger)}:host([appearance=transparent][kind=neutral]:not(.cancel-editing-button)) button,:host([appearance=transparent][kind=neutral]:not(.cancel-editing-button)) a,:host([appearance=transparent][kind=neutral]:not(.cancel-editing-button)) calcite-loader{color:var(--calcite-color-text-1)}:host([appearance=transparent][kind=neutral].cancel-editing-button) button{border-block-start-width:1px;border-block-end-width:1px;color:var(--calcite-color-text-3);border-block-start-color:var(--calcite-color-border-input);border-block-end-color:var(--calcite-color-border-input);border-block-style:solid}:host([appearance=transparent][kind=neutral].cancel-editing-button) button:not(.content--slotted){--calcite-button-padding-y-internal:0}:host([appearance=transparent][kind=neutral].cancel-editing-button) button:hover{color:var(--calcite-color-text-1)}:host([appearance=transparent][kind=neutral].enable-editing-button) button{background-color:transparent}:host(.confirm-changes-button) button:focus,:host(.cancel-editing-button) button:focus,:host(.enable-editing-button) button:focus{outline-offset:-2px}:host([appearance=transparent][kind=inverse]) button,:host([appearance=transparent][kind=inverse]) a,:host([appearance=transparent][kind=inverse]) calcite-loader{color:var(--calcite-color-text-inverse)}:host([scale=s]) button.content--slotted,:host([scale=s]) a.content--slotted{font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s][appearance=transparent]) button.content--slotted,:host([scale=s][appearance=transparent]) a.content--slotted{--calcite-button-padding-x-internal:0.5rem}:host([scale=s]) button,:host([scale=s]) a{--calcite-button-padding-y-internal:3px}:host([scale=m]) button.content--slotted,:host([scale=m]) a.content--slotted{--calcite-button-padding-x-internal:11px;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) button,:host([scale=m]) a{--calcite-button-padding-y-internal:7px}:host([scale=m][appearance=transparent]) button.content--slotted,:host([scale=m][appearance=transparent]) a.content--slotted{--calcite-button-padding-x-internal:0.75rem}:host([scale=l]) button.content--slotted,:host([scale=l]) a.content--slotted{--calcite-button-padding-x-internal:15px;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) .button-padding{--calcite-button-padding-x-internal:1rem;--calcite-button-padding-y-internal:11px}:host([scale=l]) .button-padding--shrunk{--calcite-button-padding-y-internal:9px}:host([scale=s]) button:not(.content--slotted),:host([scale=s]) a:not(.content--slotted){--calcite-button-padding-x-internal:0.125rem;--calcite-button-padding-y-internal:3px;inline-size:1.5rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-block-size:1.5rem}:host([scale=m]) button:not(.content--slotted),:host([scale=m]) a:not(.content--slotted){--calcite-button-padding-x-internal:0.125rem;--calcite-button-padding-y-internal:7px;inline-size:2rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-block-size:2rem}:host([scale=l]) button:not(.content--slotted),:host([scale=l]) a:not(.content--slotted){--calcite-button-padding-x-internal:0.125rem;--calcite-button-padding-y-internal:9px;inline-size:2.75rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-block-size:2.75rem}:host([scale=l][appearance=transparent]) button:not(.content--slotted),:host([scale=l][appearance=transparent]) a:not(.content--slotted){--calcite-button-padding-y-internal:0.625rem}:host([scale=s][icon-start][icon-end]) button:not(.content--slotted),:host([scale=s][icon-start][icon-end]) a:not(.content--slotted){--calcite-button-padding-x-internal:23px;block-size:1.5rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=s][icon-start][icon-end][appearance=transparent]) button:not(.content--slotted),:host([scale=s][icon-start][icon-end][appearance=transparent]) a:not(.content--slotted){--calcite-button-padding-x-internal:1.5rem}:host([scale=m][icon-start][icon-end]) button:not(.content--slotted),:host([scale=m][icon-start][icon-end]) a:not(.content--slotted){--calcite-button-padding-x-internal:2rem;block-size:2rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=m][icon-start][icon-end][appearance=transparent]) button:not(.content--slotted),:host([scale=m][icon-start][icon-end][appearance=transparent]) a:not(.content--slotted){--calcite-button-padding-x-internal:33px}:host([scale=l][icon-start][icon-end]) button:not(.content--slotted),:host([scale=l][icon-start][icon-end]) a:not(.content--slotted){--calcite-button-padding-x-internal:43px;block-size:2.75rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l][icon-start][icon-end]) button:not(.content--slotted) .icon--start+.icon--end,:host([scale=l][icon-start][icon-end]) a:not(.content--slotted) .icon--start+.icon--end{margin-inline-start:1rem}:host([scale=l][icon-start][icon-end][appearance=transparent]) button:not(.content--slotted),:host([scale=l][icon-start][icon-end][appearance=transparent]) a:not(.content--slotted){--calcite-button-padding-x-internal:2.75rem}:host([hidden]){display:none}[hidden]{display:none}`,Mpe=Ct(class extends It{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.mutationObserver=ii("mutation",()=>this.updateHasContent()),this.resizeObserver=ii("resize",()=>this.setTooltipText()),this.handleClick=()=>{const{type:e}=this;this.href||(e==="submit"?C8(this):e==="reset"&&Lhe(this))},this.setTooltipText=()=>{const{contentEl:e}=this;e&&(this.tooltipText=e.offsetWidth<e.scrollWidth?this.el.innerText:null)},this.setChildEl=e=>{var i;this.childEl=e,e&&((i=this.resizeObserver)==null||i.observe(e))},this.alignment="center",this.appearance="solid",this.label=void 0,this.kind="brand",this.disabled=!1,this.form=void 0,this.href=void 0,this.iconEnd=void 0,this.iconFlipRtl=void 0,this.iconStart=void 0,this.loading=!1,this.name=void 0,this.rel=void 0,this.round=!1,this.scale="m",this.splitChild=!1,this.target=void 0,this.type="button",this.width="auto",this.messages=void 0,this.messageOverrides=void 0,this.hasContent=!1,this.hasLoader=!1,this.effectiveLocale="",this.defaultMessages=void 0,this.tooltipText=void 0,this.globalAttributes={ariaExpanded:void 0}}loadingChanged(e,i){e&&!i&&(this.hasLoader=!0),!e&&i&&window.setTimeout(()=>{this.hasLoader=!1},300)}onMessagesChange(){}async connectedCallback(){Lc(this),Ps(this),Fs(this),vpe(this,["aria-expanded"]),this.hasLoader=this.loading,this.setupTextContentObserver(),Gp(this),this.formEl=I8(this)}disconnectedCallback(){var e,i;(e=this.mutationObserver)==null||e.disconnect(),Pc(this),Sw(this),Rs(this),zs(this),(i=this.resizeObserver)==null||i.disconnect(),this.formEl=null,bpe(this)}async componentWillLoad(){zo(this),this.updateHasContent(),await Ns(this)}componentDidLoad(){jo(this),this.setTooltipText()}componentDidRender(){Ac(this)}render(){const e=this.href?"a":"button",i=e,n=this.hasLoader?k("div",{class:Fn.buttonLoader},k("calcite-loader",{class:this.loading?Fn.loadingIn:Fn.loadingOut,inline:!0,label:this.messages.loading,scale:this.scale==="l"?"m":"s"})):null,r=!this.iconStart&&!this.iconEnd,s=k("calcite-icon",{class:{[Fn.icon]:!0,[Fn.iconStart]:!0},flipRtl:this.iconFlipRtl==="start"||this.iconFlipRtl==="both",icon:this.iconStart,scale:pi(this.scale)}),o=k("calcite-icon",{class:{[Fn.icon]:!0,[Fn.iconEnd]:!0},flipRtl:this.iconFlipRtl==="end"||this.iconFlipRtl==="both",icon:this.iconEnd,scale:pi(this.scale)}),a=k("span",{class:Fn.content,ref:l=>this.contentEl=l},k("slot",null));return k(i,{"aria-disabled":e==="a"?Ui(this.disabled||this.loading):null,"aria-label":this.loading?this.messages.loading:fg(this),"aria-live":"polite",class:{[Fn.buttonPadding]:r,[Fn.buttonPaddingShrunk]:!r,[Fn.contentSlotted]:this.hasContent,[Fn.iconStartEmpty]:!this.iconStart,[Fn.iconEndEmpty]:!this.iconEnd},disabled:e==="button"?this.disabled||this.loading:null,href:e==="a"&&this.href,name:e==="button"&&this.name,onClick:this.handleClick,rel:e==="a"&&this.rel,tabIndex:this.disabled?-1:null,target:e==="a"&&this.target,title:this.tooltipText,type:e==="button"&&this.type,...this.globalAttributes,ref:this.setChildEl},n,this.iconStart?s:null,this.hasContent?a:null,this.iconEnd?o:null)}async setFocus(){var e;await Go(this),(e=this.childEl)==null||e.focus()}effectiveLocaleChange(){Ds(this,this.effectiveLocale)}updateHasContent(){var i,n;const e=this.el.textContent.trim().length>0||this.el.childNodes.length>0;this.hasContent=this.el.childNodes.length===1&&((i=this.el.childNodes[0])==null?void 0:i.nodeName)==="#text"?((n=this.el.textContent)==null?void 0:n.trim().length)>0:e}setupTextContentObserver(){var e;(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0})}onLabelClick(){this.handleClick(),this.setFocus()}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{loading:["loadingChanged"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return kpe}},[1,"calcite-button",{alignment:[513],appearance:[513],label:[1],kind:[513],disabled:[516],form:[513],href:[513],iconEnd:[513,"icon-end"],iconFlipRtl:[513,"icon-flip-rtl"],iconStart:[513,"icon-start"],loading:[516],name:[513],rel:[513],round:[516],scale:[513],splitChild:[520,"split-child"],target:[513],type:[513],width:[513],messages:[1040],messageOverrides:[1040],hasContent:[32],hasLoader:[32],effectiveLocale:[32],defaultMessages:[32],tooltipText:[32],globalAttributes:[32],setFocus:[64]},void 0,{loading:["loadingChanged"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function Cpe(){if(typeof customElements>"u")return;["calcite-button","calcite-icon","calcite-loader"].forEach(e=>{switch(e){case"calcite-button":customElements.get(e)||customElements.define(e,Mpe);break;case"calcite-icon":customElements.get(e)||js();break;case"calcite-loader":customElements.get(e)||kd();break}})}Cpe();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */const Ipe={container:"container"},Ope=":host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex}:host([alignment=start]){text-align:start}:host([alignment=end]){text-align:end}:host([alignment=center]){text-align:center}:host([scale=s]) .container{gap:0.25rem;font-size:var(--calcite-font-size--2);line-height:1rem;margin-block-end:var(--calcite-label-margin-bottom, 0.5rem)}:host([scale=m]) .container{gap:0.5rem;font-size:var(--calcite-font-size--1);line-height:1rem;margin-block-end:var(--calcite-label-margin-bottom, 0.75rem)}:host([scale=l]) .container{gap:0.5rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;margin-block-end:var(--calcite-label-margin-bottom, 1rem)}:host .container{margin-inline:0px;margin-block-start:0px;inline-size:100%;line-height:1.375;color:var(--calcite-color-text-1)}:host([layout=default]) .container{display:flex;flex-direction:column}:host([layout=inline]) .container,:host([layout=inline-space-between]) .container{display:flex;flex-direction:row;align-items:center;gap:0.5rem}:host([layout=inline][scale=l]) .container{gap:0.75rem}:host([layout=inline-space-between]) .container{justify-content:space-between}:host([disabled])>.container{opacity:var(--calcite-opacity-disabled)}:host([disabled]) ::slotted(*[disabled]),:host([disabled]) ::slotted(*[disabled] *){--tw-bg-opacity:1}:host([disabled]) ::slotted(calcite-input-message:not([active])){--tw-bg-opacity:0}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}:host([hidden]){display:none}[hidden]{display:none}",Ape=Ct(class extends It{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteInternalLabelClick=$e(this,"calciteInternalLabelClick",2),this.labelClickHandler=e=>{this.calciteInternalLabelClick.emit({sourceEvent:e})},this.alignment="start",this.for=void 0,this.scale="m",this.layout="default"}handleForChange(){Zhe(this.el)}connectedCallback(){document.dispatchEvent(new CustomEvent(_w))}disconnectedCallback(){document.dispatchEvent(new CustomEvent(Zb))}render(){return k(Pn,{onClick:this.labelClickHandler},k("div",{class:Ipe.container},k("slot",null)))}get el(){return this}static get watchers(){return{for:["handleForChange"]}}static get style(){return Ope}},[1,"calcite-label",{alignment:[513],for:[513],scale:[513],layout:[513]},void 0,{for:["handleForChange"]}]);function Lpe(){if(typeof customElements>"u")return;["calcite-label"].forEach(e=>{switch(e){case"calcite-label":customElements.get(e)||customElements.define(e,Ape);break}})}Lpe();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */var Ppe=typeof global=="object"&&global&&global.Object===Object&&global,Rpe=typeof self=="object"&&self&&self.Object===Object&&self,J8=Ppe||Rpe||Function("return this")(),Xb=J8.Symbol,Y8=Object.prototype,Npe=Y8.hasOwnProperty,Dpe=Y8.toString,ff=Xb?Xb.toStringTag:void 0;function Fpe(t){var e=Npe.call(t,ff),i=t[ff];try{t[ff]=void 0;var n=!0}catch{}var r=Dpe.call(t);return n&&(e?t[ff]=i:delete t[ff]),r}var zpe=Object.prototype,jpe=zpe.toString;function Gpe(t){return jpe.call(t)}var Upe="[object Null]",Hpe="[object Undefined]",K3=Xb?Xb.toStringTag:void 0;function Vpe(t){return t==null?t===void 0?Hpe:Upe:K3&&K3 in Object(t)?Fpe(t):Gpe(t)}function Bpe(t){return t!=null&&typeof t=="object"}var qpe="[object Symbol]";function Wpe(t){return typeof t=="symbol"||Bpe(t)&&Vpe(t)==qpe}var Zpe=/\s/;function Kpe(t){for(var e=t.length;e--&&Zpe.test(t.charAt(e)););return e}var Jpe=/^\s+/;function Ype(t){return t&&t.slice(0,Kpe(t)+1).replace(Jpe,"")}function Qb(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var J3=NaN,Xpe=/^[-+]0x[0-9a-f]+$/i,Qpe=/^0b[01]+$/i,efe=/^0o[0-7]+$/i,tfe=parseInt;function Y3(t){if(typeof t=="number")return t;if(Wpe(t))return J3;if(Qb(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Qb(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Ype(t);var i=Qpe.test(t);return i||efe.test(t)?tfe(t.slice(2),i?2:8):Xpe.test(t)?J3:+t}var rS=function(){return J8.Date.now()},ife="Expected a function",nfe=Math.max,rfe=Math.min;function X8(t,e,i){var n,r,s,o,a,l,u=0,p=!1,f=!1,m=!0;if(typeof t!="function")throw new TypeError(ife);e=Y3(e)||0,Qb(i)&&(p=!!i.leading,f="maxWait"in i,s=f?nfe(Y3(i.maxWait)||0,e):s,m="trailing"in i?!!i.trailing:m);function g(M){var N=n,G=r;return n=r=void 0,u=M,o=t.apply(G,N),o}function y(M){return u=M,a=setTimeout(_,e),p?g(M):o}function v(M){var N=M-l,G=M-u,U=e-N;return f?rfe(U,s-G):U}function b(M){var N=M-l,G=M-u;return l===void 0||N>=e||N<0||f&&G>=s}function _(){var M=rS();if(b(M))return $(M);a=setTimeout(_,v(M))}function $(M){return a=void 0,m&&n?g(M):(n=r=void 0,o)}function x(){a!==void 0&&clearTimeout(a),u=0,n=l=r=a=void 0}function E(){return a===void 0?o:$(rS())}function C(){var M=rS(),N=b(M);if(n=arguments,r=this,l=M,N){if(a===void 0)return y(l);if(f)return clearTimeout(a),a=setTimeout(_,e),g(l)}return a===void 0&&(a=setTimeout(_,e)),o}return C.cancel=x,C.flush=E,C}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */const Q8=["top","right","bottom","left"],X3=["start","end"],Q3=Q8.reduce((t,e)=>t.concat(e,e+"-"+X3[0],e+"-"+X3[1]),[]),bp=Math.min,Qu=Math.max,e1=Math.round,l0=Math.floor,bc=t=>({x:t,y:t}),sfe={left:"right",right:"left",bottom:"top",top:"bottom"},ofe={start:"end",end:"start"};function N2(t,e,i){return Qu(t,bp(e,i))}function Md(t,e){return typeof t=="function"?t(e):t}function Ba(t){return t.split("-")[0]}function To(t){return t.split("-")[1]}function ej(t){return t==="x"?"y":"x"}function Dk(t){return t==="y"?"height":"width"}function $w(t){return["top","bottom"].includes(Ba(t))?"y":"x"}function Fk(t){return ej($w(t))}function tj(t,e,i){i===void 0&&(i=!1);const n=To(t),r=Fk(t),s=Dk(r);let o=r==="x"?n===(i?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=i1(o)),[o,i1(o)]}function afe(t){const e=i1(t);return[t1(t),e,t1(e)]}function t1(t){return t.replace(/start|end/g,e=>ofe[e])}function lfe(t,e,i){const n=["left","right"],r=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return i?e?r:n:e?n:r;case"left":case"right":return e?s:o;default:return[]}}function cfe(t,e,i,n){const r=To(t);let s=lfe(Ba(t),i==="start",n);return r&&(s=s.map(o=>o+"-"+r),e&&(s=s.concat(s.map(t1)))),s}function i1(t){return t.replace(/left|right|bottom|top/g,e=>sfe[e])}function ufe(t){return{top:0,right:0,bottom:0,left:0,...t}}function ij(t){return typeof t!="number"?ufe(t):{top:t,right:t,bottom:t,left:t}}function n1(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function eA(t,e,i){let{reference:n,floating:r}=t;const s=$w(e),o=Fk(e),a=Dk(o),l=Ba(e),u=s==="y",p=n.x+n.width/2-r.width/2,f=n.y+n.height/2-r.height/2,m=n[a]/2-r[a]/2;let g;switch(l){case"top":g={x:p,y:n.y-r.height};break;case"bottom":g={x:p,y:n.y+n.height};break;case"right":g={x:n.x+n.width,y:f};break;case"left":g={x:n.x-r.width,y:f};break;default:g={x:n.x,y:n.y}}switch(To(e)){case"start":g[o]-=m*(i&&u?-1:1);break;case"end":g[o]+=m*(i&&u?-1:1);break}return g}const dfe=async(t,e,i)=>{const{placement:n="bottom",strategy:r="absolute",middleware:s=[],platform:o}=i,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:r}),{x:p,y:f}=eA(u,n,l),m=n,g={},y=0;for(let v=0;v<a.length;v++){const{name:b,fn:_}=a[v],{x:$,y:x,data:E,reset:C}=await _({x:p,y:f,initialPlacement:n,placement:m,strategy:r,middlewareData:g,rects:u,platform:o,elements:{reference:t,floating:e}});if(p=$??p,f=x??f,g={...g,[b]:{...g[b],...E}},C&&y<=50){y++,typeof C=="object"&&(C.placement&&(m=C.placement),C.rects&&(u=C.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:r}):C.rects),{x:p,y:f}=eA(u,m,l)),v=-1;continue}}return{x:p,y:f,placement:m,strategy:r,middlewareData:g}};async function gg(t,e){var i;e===void 0&&(e={});const{x:n,y:r,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:u="clippingAncestors",rootBoundary:p="viewport",elementContext:f="floating",altBoundary:m=!1,padding:g=0}=Md(e,t),y=ij(g),b=a[m?f==="floating"?"reference":"floating":f],_=n1(await s.getClippingRect({element:(i=await(s.isElement==null?void 0:s.isElement(b)))==null||i?b:b.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:u,rootBoundary:p,strategy:l})),$=f==="floating"?{...o.floating,x:n,y:r}:o.reference,x=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),E=await(s.isElement==null?void 0:s.isElement(x))?await(s.getScale==null?void 0:s.getScale(x))||{x:1,y:1}:{x:1,y:1},C=n1(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:$,offsetParent:x,strategy:l}):$);return{top:(_.top-C.top+y.top)/E.y,bottom:(C.bottom-_.bottom+y.bottom)/E.y,left:(_.left-C.left+y.left)/E.x,right:(C.right-_.right+y.right)/E.x}}const hfe=t=>({name:"arrow",options:t,async fn(e){const{x:i,y:n,placement:r,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:u,padding:p=0}=Md(t,e)||{};if(u==null)return{};const f=ij(p),m={x:i,y:n},g=Fk(r),y=Dk(g),v=await o.getDimensions(u),b=g==="y",_=b?"top":"left",$=b?"bottom":"right",x=b?"clientHeight":"clientWidth",E=s.reference[y]+s.reference[g]-m[g]-s.floating[y],C=m[g]-s.reference[g],M=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let N=M?M[x]:0;(!N||!await(o.isElement==null?void 0:o.isElement(M)))&&(N=a.floating[x]||s.floating[y]);const G=E/2-C/2,U=N/2-v[y]/2-1,B=bp(f[_],U),H=bp(f[$],U),L=B,R=N-v[y]-H,D=N/2-v[y]/2+G,Y=N2(L,D,R),le=!l.arrow&&To(r)!=null&&D!=Y&&s.reference[y]/2-(D<L?B:H)-v[y]/2<0,re=le?D<L?D-L:D-R:0;return{[g]:m[g]+re,data:{[g]:Y,centerOffset:D-Y-re,...le&&{alignmentOffset:re}},reset:le}}});function pfe(t,e,i){return(t?[...i.filter(r=>To(r)===t),...i.filter(r=>To(r)!==t)]:i.filter(r=>Ba(r)===r)).filter(r=>t?To(r)===t||(e?t1(r)!==r:!1):!0)}const ffe=function(t){return t===void 0&&(t={}),{name:"autoPlacement",options:t,async fn(e){var i,n,r;const{rects:s,middlewareData:o,placement:a,platform:l,elements:u}=e,{crossAxis:p=!1,alignment:f,allowedPlacements:m=Q3,autoAlignment:g=!0,...y}=Md(t,e),v=f!==void 0||m===Q3?pfe(f||null,g,m):m,b=await gg(e,y),_=((i=o.autoPlacement)==null?void 0:i.index)||0,$=v[_];if($==null)return{};const x=tj($,s,await(l.isRTL==null?void 0:l.isRTL(u.floating)));if(a!==$)return{reset:{placement:v[0]}};const E=[b[Ba($)],b[x[0]],b[x[1]]],C=[...((n=o.autoPlacement)==null?void 0:n.overflows)||[],{placement:$,overflows:E}],M=v[_+1];if(M)return{data:{index:_+1,overflows:C},reset:{placement:M}};const N=C.map(B=>{const H=To(B.placement);return[B.placement,H&&p?B.overflows.slice(0,2).reduce((L,R)=>L+R,0):B.overflows[0],B.overflows]}).sort((B,H)=>B[1]-H[1]),U=((r=N.filter(B=>B[2].slice(0,To(B[0])?2:3).every(H=>H<=0))[0])==null?void 0:r[0])||N[0][0];return U!==a?{data:{index:_+1,overflows:C},reset:{placement:U}}:{}}}},tA=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var i,n;const{placement:r,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:u}=e,{mainAxis:p=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:v=!0,...b}=Md(t,e);if((i=s.arrow)!=null&&i.alignmentOffset)return{};const _=Ba(r),$=Ba(a)===a,x=await(l.isRTL==null?void 0:l.isRTL(u.floating)),E=m||($||!v?[i1(a)]:afe(a));!m&&y!=="none"&&E.push(...cfe(a,v,y,x));const C=[a,...E],M=await gg(e,b),N=[];let G=((n=s.flip)==null?void 0:n.overflows)||[];if(p&&N.push(M[_]),f){const L=tj(r,o,x);N.push(M[L[0]],M[L[1]])}if(G=[...G,{placement:r,overflows:N}],!N.every(L=>L<=0)){var U,B;const L=(((U=s.flip)==null?void 0:U.index)||0)+1,R=C[L];if(R)return{data:{index:L,overflows:G},reset:{placement:R}};let D=(B=G.filter(Y=>Y.overflows[0]<=0).sort((Y,le)=>Y.overflows[1]-le.overflows[1])[0])==null?void 0:B.placement;if(!D)switch(g){case"bestFit":{var H;const Y=(H=G.map(le=>[le.placement,le.overflows.filter(re=>re>0).reduce((re,oe)=>re+oe,0)]).sort((le,re)=>le[1]-re[1])[0])==null?void 0:H[0];Y&&(D=Y);break}case"initialPlacement":D=a;break}if(r!==D)return{reset:{placement:D}}}return{}}}};function iA(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function nA(t){return Q8.some(e=>t[e]>=0)}const mfe=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:i}=e,{strategy:n="referenceHidden",...r}=Md(t,e);switch(n){case"referenceHidden":{const s=await gg(e,{...r,elementContext:"reference"}),o=iA(s,i.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:nA(o)}}}case"escaped":{const s=await gg(e,{...r,altBoundary:!0}),o=iA(s,i.floating);return{data:{escapedOffsets:o,escaped:nA(o)}}}default:return{}}}}};async function gfe(t,e){const{placement:i,platform:n,elements:r}=t,s=await(n.isRTL==null?void 0:n.isRTL(r.floating)),o=Ba(i),a=To(i),l=$w(i)==="y",u=["left","top"].includes(o)?-1:1,p=s&&l?-1:1,f=Md(e,t);let{mainAxis:m,crossAxis:g,alignmentAxis:y}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof y=="number"&&(g=a==="end"?y*-1:y),l?{x:g*p,y:m*u}:{x:m*u,y:g*p}}const yfe=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:i,y:n}=e,r=await gfe(e,t);return{x:i+r.x,y:n+r.y,data:r}}}},vfe=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:i,y:n,placement:r}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:b=>{let{x:_,y:$}=b;return{x:_,y:$}}},...l}=Md(t,e),u={x:i,y:n},p=await gg(e,l),f=$w(Ba(r)),m=ej(f);let g=u[m],y=u[f];if(s){const b=m==="y"?"top":"left",_=m==="y"?"bottom":"right",$=g+p[b],x=g-p[_];g=N2($,g,x)}if(o){const b=f==="y"?"top":"left",_=f==="y"?"bottom":"right",$=y+p[b],x=y-p[_];y=N2($,y,x)}const v=a.fn({...e,[m]:g,[f]:y});return{...v,data:{x:v.x-i,y:v.y-n}}}}};function wc(t){return nj(t)?(t.nodeName||"").toLowerCase():"#document"}function Xn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Xa(t){var e;return(e=(nj(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function nj(t){return t instanceof Node||t instanceof Xn(t).Node}function qa(t){return t instanceof Element||t instanceof Xn(t).Element}function Po(t){return t instanceof HTMLElement||t instanceof Xn(t).HTMLElement}function rA(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Xn(t).ShadowRoot}function ty(t){const{overflow:e,overflowX:i,overflowY:n,display:r}=Rr(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+i)&&!["inline","contents"].includes(r)}function bfe(t){return["table","td","th"].includes(wc(t))}function zk(t){const e=jk(),i=Rr(t);return i.transform!=="none"||i.perspective!=="none"||(i.containerType?i.containerType!=="normal":!1)||!e&&(i.backdropFilter?i.backdropFilter!=="none":!1)||!e&&(i.filter?i.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(i.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(i.contain||"").includes(n))}function wfe(t){let e=wp(t);for(;Po(e)&&!xw(e);){if(zk(e))return e;e=wp(e)}return null}function jk(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function xw(t){return["html","body","#document"].includes(wc(t))}function Rr(t){return Xn(t).getComputedStyle(t)}function Tw(t){return qa(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function wp(t){if(wc(t)==="html")return t;const e=t.assignedSlot||t.parentNode||rA(t)&&t.host||Xa(t);return rA(e)?e.host:e}function rj(t){const e=wp(t);return xw(e)?t.ownerDocument?t.ownerDocument.body:t.body:Po(e)&&ty(e)?e:rj(e)}function yg(t,e,i){var n;e===void 0&&(e=[]),i===void 0&&(i=!0);const r=rj(t),s=r===((n=t.ownerDocument)==null?void 0:n.body),o=Xn(r);return s?e.concat(o,o.visualViewport||[],ty(r)?r:[],o.frameElement&&i?yg(o.frameElement):[]):e.concat(r,yg(r,[],i))}function sj(t){const e=Rr(t);let i=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const r=Po(t),s=r?t.offsetWidth:i,o=r?t.offsetHeight:n,a=e1(i)!==s||e1(n)!==o;return a&&(i=s,n=o),{width:i,height:n,$:a}}function Gk(t){return qa(t)?t:t.contextElement}function Xh(t){const e=Gk(t);if(!Po(e))return bc(1);const i=e.getBoundingClientRect(),{width:n,height:r,$:s}=sj(e);let o=(s?e1(i.width):i.width)/n,a=(s?e1(i.height):i.height)/r;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const _fe=bc(0);function oj(t){const e=Xn(t);return!jk()||!e.visualViewport?_fe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Sfe(t,e,i){return e===void 0&&(e=!1),!i||e&&i!==Xn(t)?!1:e}function vd(t,e,i,n){e===void 0&&(e=!1),i===void 0&&(i=!1);const r=t.getBoundingClientRect(),s=Gk(t);let o=bc(1);e&&(n?qa(n)&&(o=Xh(n)):o=Xh(t));const a=Sfe(s,i,n)?oj(s):bc(0);let l=(r.left+a.x)/o.x,u=(r.top+a.y)/o.y,p=r.width/o.x,f=r.height/o.y;if(s){const m=Xn(s),g=n&&qa(n)?Xn(n):n;let y=m.frameElement;for(;y&&n&&g!==m;){const v=Xh(y),b=y.getBoundingClientRect(),_=Rr(y),$=b.left+(y.clientLeft+parseFloat(_.paddingLeft))*v.x,x=b.top+(y.clientTop+parseFloat(_.paddingTop))*v.y;l*=v.x,u*=v.y,p*=v.x,f*=v.y,l+=$,u+=x,y=Xn(y).frameElement}}return n1({width:p,height:f,x:l,y:u})}function $fe(t){let{rect:e,offsetParent:i,strategy:n}=t;const r=Po(i),s=Xa(i);if(i===s)return e;let o={scrollLeft:0,scrollTop:0},a=bc(1);const l=bc(0);if((r||!r&&n!=="fixed")&&((wc(i)!=="body"||ty(s))&&(o=Tw(i)),Po(i))){const u=vd(i);a=Xh(i),l.x=u.x+i.clientLeft,l.y=u.y+i.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-o.scrollLeft*a.x+l.x,y:e.y*a.y-o.scrollTop*a.y+l.y}}function xfe(t){return Array.from(t.getClientRects())}function aj(t){return vd(Xa(t)).left+Tw(t).scrollLeft}function Tfe(t){const e=Xa(t),i=Tw(t),n=t.ownerDocument.body,r=Qu(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),s=Qu(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let o=-i.scrollLeft+aj(t);const a=-i.scrollTop;return Rr(n).direction==="rtl"&&(o+=Qu(e.clientWidth,n.clientWidth)-r),{width:r,height:s,x:o,y:a}}function Efe(t,e){const i=Xn(t),n=Xa(t),r=i.visualViewport;let s=n.clientWidth,o=n.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;const u=jk();(!u||u&&e==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:s,height:o,x:a,y:l}}function kfe(t,e){const i=vd(t,!0,e==="fixed"),n=i.top+t.clientTop,r=i.left+t.clientLeft,s=Po(t)?Xh(t):bc(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=r*s.x,u=n*s.y;return{width:o,height:a,x:l,y:u}}function sA(t,e,i){let n;if(e==="viewport")n=Efe(t,i);else if(e==="document")n=Tfe(Xa(t));else if(qa(e))n=kfe(e,i);else{const r=oj(t);n={...e,x:e.x-r.x,y:e.y-r.y}}return n1(n)}function lj(t,e){const i=wp(t);return i===e||!qa(i)||xw(i)?!1:Rr(i).position==="fixed"||lj(i,e)}function Mfe(t,e){const i=e.get(t);if(i)return i;let n=yg(t,[],!1).filter(a=>qa(a)&&wc(a)!=="body"),r=null;const s=Rr(t).position==="fixed";let o=s?wp(t):t;for(;qa(o)&&!xw(o);){const a=Rr(o),l=zk(o);!l&&a.position==="fixed"&&(r=null),(s?!l&&!r:!l&&a.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||ty(o)&&!l&&lj(t,o))?n=n.filter(p=>p!==o):r=a,o=wp(o)}return e.set(t,n),n}function Cfe(t){let{element:e,boundary:i,rootBoundary:n,strategy:r}=t;const o=[...i==="clippingAncestors"?Mfe(e,this._c):[].concat(i),n],a=o[0],l=o.reduce((u,p)=>{const f=sA(e,p,r);return u.top=Qu(f.top,u.top),u.right=bp(f.right,u.right),u.bottom=bp(f.bottom,u.bottom),u.left=Qu(f.left,u.left),u},sA(e,a,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Ife(t){return sj(t)}function Ofe(t,e,i){const n=Po(e),r=Xa(e),s=i==="fixed",o=vd(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=bc(0);if(n||!n&&!s)if((wc(e)!=="body"||ty(r))&&(a=Tw(e)),n){const u=vd(e,!0,s,e);l.x=u.x+e.clientLeft,l.y=u.y+e.clientTop}else r&&(l.x=aj(r));return{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function oA(t,e){return!Po(t)||Rr(t).position==="fixed"?null:e?e(t):t.offsetParent}function cj(t,e){const i=Xn(t);if(!Po(t))return i;let n=oA(t,e);for(;n&&bfe(n)&&Rr(n).position==="static";)n=oA(n,e);return n&&(wc(n)==="html"||wc(n)==="body"&&Rr(n).position==="static"&&!zk(n))?i:n||wfe(t)||i}const Afe=async function(t){let{reference:e,floating:i,strategy:n}=t;const r=this.getOffsetParent||cj,s=this.getDimensions;return{reference:Ofe(e,await r(i),n),floating:{x:0,y:0,...await s(i)}}};function Lfe(t){return Rr(t).direction==="rtl"}const D2={convertOffsetParentRelativeRectToViewportRelativeRect:$fe,getDocumentElement:Xa,getClippingRect:Cfe,getOffsetParent:cj,getElementRects:Afe,getClientRects:xfe,getDimensions:Ife,getScale:Xh,isElement:qa,isRTL:Lfe};function Pfe(t,e){let i=null,n;const r=Xa(t);function s(){clearTimeout(n),i&&i.disconnect(),i=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:u,top:p,width:f,height:m}=t.getBoundingClientRect();if(a||e(),!f||!m)return;const g=l0(p),y=l0(r.clientWidth-(u+f)),v=l0(r.clientHeight-(p+m)),b=l0(u),$={rootMargin:-g+"px "+-y+"px "+-v+"px "+-b+"px",threshold:Qu(0,bp(1,l))||1};let x=!0;function E(C){const M=C[0].intersectionRatio;if(M!==l){if(!x)return o();M?o(!1,M):n=setTimeout(()=>{o(!1,1e-7)},100)}x=!1}try{i=new IntersectionObserver(E,{...$,root:r.ownerDocument})}catch{i=new IntersectionObserver(E,$)}i.observe(t)}return o(!0),s}function Rfe(t,e,i,n){n===void 0&&(n={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,u=Gk(t),p=r||s?[...u?yg(u):[],...yg(e)]:[];p.forEach(_=>{r&&_.addEventListener("scroll",i,{passive:!0}),s&&_.addEventListener("resize",i)});const f=u&&a?Pfe(u,i):null;let m=-1,g=null;o&&(g=new ResizeObserver(_=>{let[$]=_;$&&$.target===u&&g&&(g.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{g&&g.observe(e)})),i()}),u&&!l&&g.observe(u),g.observe(e));let y,v=l?vd(t):null;l&&b();function b(){const _=vd(t);v&&(_.x!==v.x||_.y!==v.y||_.width!==v.width||_.height!==v.height)&&i(),v=_,y=requestAnimationFrame(b)}return i(),()=>{p.forEach(_=>{r&&_.removeEventListener("scroll",i),s&&_.removeEventListener("resize",i)}),f&&f(),g&&g.disconnect(),g=null,l&&cancelAnimationFrame(y)}}const Nfe=(t,e,i)=>{const n=new Map,r={platform:D2,...i},s={...r.platform,_c:n};return dfe(t,e,{...r,platform:s})};function Dfe(t){return Ffe(t)}function sS(t){return t.assignedSlot?t.assignedSlot:t.parentNode instanceof ShadowRoot?t.parentNode.host:t.parentNode}function Ffe(t){for(let e=t;e;e=sS(e))if(e instanceof Element&&getComputedStyle(e).display==="none")return null;for(let e=sS(t);e;e=sS(e)){if(!(e instanceof Element))continue;const i=getComputedStyle(e);if(i.display!=="contents"&&(i.position!=="static"||i.filter!=="none"||e.tagName==="BODY"))return e}return null}(function(){{const e=D2.getOffsetParent;D2.getOffsetParent=i=>e(i,Dfe)}})();function aA(t){const e=window.devicePixelRatio||1;return Math.round(t*e)/e}const uj=async(t,{referenceEl:e,floatingEl:i,overlayPositioning:n="absolute",placement:r,flipDisabled:s,flipPlacements:o,offsetDistance:a,offsetSkidding:l,arrowEl:u,type:p})=>{var E;if(!e||!i)return null;const{x:f,y:m,placement:g,strategy:y,middlewareData:v}=await Nfe(e,i,{strategy:n,placement:r==="auto"||r==="auto-start"||r==="auto-end"?void 0:Ufe(i,r),middleware:jfe({placement:r,flipDisabled:s,flipPlacements:o,offsetDistance:a,offsetSkidding:l,arrowEl:u,type:p})});if(u&&v.arrow){const{x:C,y:M}=v.arrow,N=g.split("-")[0],G=C!=null?"left":"top",U=Vfe[N],B={left:"",top:"",bottom:"",right:""};"floatingLayout"in t&&(t.floatingLayout=N==="left"||N==="right"?"horizontal":"vertical"),Object.assign(u.style,{...B,[G]:`${G=="left"?C:M}px`,[N]:"100%",transform:U})}const _=((E=v.hide)==null?void 0:E.referenceHidden)?"hidden":null,$=_?"none":null;i.setAttribute(zfe,g);const{open:x}=t;Object.assign(i.style,{visibility:_,pointerEvents:$,position:y,transform:x?`translate(${aA(f)}px,${aA(m)}px)`:"",left:x?"0":"",top:x?"0":""})},zfe="data-placement",lA=100,cA=["top","bottom","right","left","top-start","top-end","bottom-start","bottom-end","right-start","right-end","left-start","left-end"],r1={animation:"calcite-floating-ui-anim",animationActive:"calcite-floating-ui-anim--active"};function jfe({placement:t,flipDisabled:e,flipPlacements:i,offsetDistance:n,offsetSkidding:r,arrowEl:s,type:o}){const a=[vfe(),mfe()];if(o==="menu")return[...a,tA({fallbackPlacements:i||["top-start","top","top-end","bottom-start","bottom","bottom-end"]})];if(o==="popover"||o==="tooltip"){const l=[...a,yfe({mainAxis:typeof n=="number"?n:0,crossAxis:typeof r=="number"?r:0})];return t==="auto"||t==="auto-start"||t==="auto-end"?l.push(ffe({alignment:t==="auto-start"?"start":t==="auto-end"?"end":null})):e||l.push(tA(i?{fallbackPlacements:i}:{})),s&&l.push(hfe({element:s})),l}return[]}function Gfe(t,e){const i=t.filter(n=>cA.includes(n));return i.length!==t.length&&console.warn(`${e.tagName}: Invalid value found in: flipPlacements. Try any of these: ${cA.map(n=>`"${n}"`).join(", ").trim()}`,{el:e}),i}function Ufe(t,e){const i=["left","right"];return Es(t)==="rtl"&&i.reverse(),e.replace(/leading/gi,i[0]).replace(/trailing/gi,i[1])}async function dj(t,e,i=!1){return(i?Hfe(t):uj)(t,e)}function Hfe(t){let e=s1.get(t);return e||(e=X8(uj,lA,{leading:!0,maxWait:lA}),s1.set(t,e),e)}const Vfe={top:"",left:"rotate(-90deg)",bottom:"rotate(180deg)",right:"rotate(90deg)"},F2=new WeakMap,s1=new WeakMap;function o1(t,e,i){if(!i||!e)return;Uk(t,e,i),Object.assign(i.style,{visibility:"hidden",pointerEvents:"none",position:t.overlayPositioning,top:"0",left:"0"});const n=Rfe;F2.set(t,n(e,i,()=>t.reposition()))}function Uk(t,e,i){var n,r;!i||!e||((n=F2.get(t))==null||n(),F2.delete(t),(r=s1.get(t))==null||r.cancel(),s1.delete(t))}const uA=4,hj=Math.ceil(Math.hypot(uA,uA));/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */function a1(t){return"opened"in t?t.opened:t.open}function dA(t,e=!1){(e?t[t.transitionProp]:a1(t))?t.onBeforeOpen():t.onBeforeClose(),(e?t[t.transitionProp]:a1(t))?t.onOpen():t.onClose()}function ed(t,e=!1){Qde(()=>{if(t.transitionEl){let u=function(f){f.propertyName===t.openTransitionProp&&f.target===t.transitionEl&&(clearTimeout(l),t.transitionEl.removeEventListener("transitionstart",u),(e?t[t.transitionProp]:a1(t))?t.onBeforeOpen():t.onBeforeClose())},p=function(f){f.propertyName===t.openTransitionProp&&f.target===t.transitionEl&&((e?t[t.transitionProp]:a1(t))?t.onOpen():t.onClose(),t.transitionEl.removeEventListener("transitionend",p),t.transitionEl.removeEventListener("transitioncancel",p))};const{transitionDuration:i,transitionProperty:n}=getComputedStyle(t.transitionEl),r=i.split(","),o=n.split(",").indexOf(t.openTransitionProp),a=r[o]??r[0];if(a==="0s"){dA(t,e);return}const l=setTimeout(()=>{t.transitionEl.removeEventListener("transitionstart",u),t.transitionEl.removeEventListener("transitionend",p),t.transitionEl.removeEventListener("transitioncancel",p),dA(t,e)},parseFloat(a)*1e3);t.transitionEl.addEventListener("transitionstart",u),t.transitionEl.addEventListener("transitionend",p),t.transitionEl.addEventListener("transitioncancel",p)}})}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */const hA={arrow:"calcite-floating-ui-arrow",arrowStroke:"calcite-floating-ui-arrow__stroke"},Bfe={width:12,height:6,strokeWidth:1},pj=({floatingLayout:t,key:e,ref:i})=>{const{width:n,height:r,strokeWidth:s}=Bfe,o=n/2,a=t==="vertical",l=`M0,0 H${n} L${n-o},${r} Q${o},${r} ${o},${r} Z`;return k("svg",{"aria-hidden":"true",class:hA.arrow,height:n,key:e,viewBox:`0 0 ${n} ${n+(a?0:s)}`,width:n+(a?s:0),ref:i},s>0&&k("path",{class:hA.arrowStroke,d:l,fill:"none","stroke-width":s+1}),k("path",{d:l,stroke:"none"}))};/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */const qfe={container:"container"},Wfe=300,Zfe=500,pA="aria-describedby";function fj(t){const{referenceElement:e}=t;return(typeof e=="string"?bw(t,{id:e}):e)||null}class Kfe{constructor(){this.registeredElements=new WeakMap,this.registeredShadowRootCounts=new WeakMap,this.hoverOpenTimeout=null,this.hoverCloseTimeout=null,this.hoveredTooltip=null,this.clickedTooltip=null,this.activeTooltip=null,this.registeredElementCount=0,this.queryTooltip=e=>{const{registeredElements:i}=this,n=e.find(r=>i.has(r));return i.get(n)},this.keyDownHandler=e=>{if(e.key==="Escape"&&!e.defaultPrevented){const{activeTooltip:i}=this;if(i!=null&&i.open){this.clearHoverTimeout(),this.closeActiveTooltip();const n=fj(i);n instanceof Element&&n.contains(e.target)&&e.preventDefault()}}},this.pointerMoveHandler=e=>{const i=e.composedPath(),{activeTooltip:n}=this;if((n==null?void 0:n.open)&&i.includes(n)){this.clearHoverTimeout();return}const s=this.queryTooltip(i);this.hoveredTooltip=s,!this.isClosableClickedTooltip(s)&&(this.clickedTooltip=null,s?this.openHoveredTooltip(s):n&&this.closeHoveredTooltip())},this.pointerDownHandler=e=>{if(!yd(e))return;const i=this.queryTooltip(e.composedPath());this.clickedTooltip=i,i!=null&&i.closeOnClick&&(this.toggleTooltip(i,!1),this.clearHoverTimeout())},this.focusInHandler=e=>{this.queryFocusedTooltip(e,!0)},this.focusOutHandler=e=>{this.queryFocusedTooltip(e,!1)},this.openHoveredTooltip=e=>{this.hoverOpenTimeout=window.setTimeout(()=>{this.hoverOpenTimeout!==null&&(this.clearHoverCloseTimeout(),this.activeTooltip!==this.hoveredTooltip&&(this.closeActiveTooltip(),e===this.hoveredTooltip&&this.toggleTooltip(e,!0)))},this.activeTooltip?0:Wfe)},this.closeHoveredTooltip=()=>{this.hoverCloseTimeout=window.setTimeout(()=>{this.hoverCloseTimeout!==null&&this.closeActiveTooltip()},Zfe)}}registerElement(e,i){this.registeredElementCount++,this.registeredElements.set(e,i);const n=this.getReferenceElShadowRootNode(e);n&&this.registerShadowRoot(n),this.registeredElementCount===1&&this.addListeners()}unregisterElement(e){const i=this.getReferenceElShadowRootNode(e);i&&this.unregisterShadowRoot(i),this.registeredElements.delete(e)&&this.registeredElementCount--,this.registeredElementCount===0&&this.removeListeners()}addShadowListeners(e){e.addEventListener("focusin",this.focusInHandler,{capture:!0}),e.addEventListener("focusout",this.focusOutHandler,{capture:!0})}removeShadowListeners(e){e.removeEventListener("focusin",this.focusInHandler,{capture:!0}),e.removeEventListener("focusout",this.focusOutHandler,{capture:!0})}addListeners(){window.addEventListener("keydown",this.keyDownHandler,{capture:!0}),window.addEventListener("pointermove",this.pointerMoveHandler,{capture:!0}),window.addEventListener("pointerdown",this.pointerDownHandler,{capture:!0}),window.addEventListener("focusin",this.focusInHandler,{capture:!0}),window.addEventListener("focusout",this.focusOutHandler,{capture:!0})}removeListeners(){window.removeEventListener("keydown",this.keyDownHandler,{capture:!0}),window.removeEventListener("pointermove",this.pointerMoveHandler,{capture:!0}),window.removeEventListener("pointerdown",this.pointerDownHandler,{capture:!0}),window.removeEventListener("focusin",this.focusInHandler,{capture:!0}),window.removeEventListener("focusout",this.focusOutHandler,{capture:!0})}clearHoverOpenTimeout(){window.clearTimeout(this.hoverOpenTimeout),this.hoverOpenTimeout=null}clearHoverCloseTimeout(){window.clearTimeout(this.hoverCloseTimeout),this.hoverCloseTimeout=null}clearHoverTimeout(){this.clearHoverOpenTimeout(),this.clearHoverCloseTimeout()}closeActiveTooltip(){const{activeTooltip:e}=this;e!=null&&e.open&&this.toggleTooltip(e,!1)}toggleFocusedTooltip(e,i){this.closeActiveTooltip(),i&&this.clearHoverTimeout(),this.toggleTooltip(e,i)}toggleTooltip(e,i){e.open=i,this.activeTooltip=i?e:null}queryFocusedTooltip(e,i){const n=this.queryTooltip(e.composedPath());!n||this.isClosableClickedTooltip(n)||this.toggleFocusedTooltip(n,i)}isClosableClickedTooltip(e){return(e==null?void 0:e.closeOnClick)&&e===this.clickedTooltip}registerShadowRoot(e){const{registeredShadowRootCounts:i}=this,n=(i.get(e)??0)+1;n===1&&this.addShadowListeners(e),i.set(e,n)}unregisterShadowRoot(e){const{registeredShadowRootCounts:i}=this,n=i.get(e)-1;n===0&&this.removeShadowListeners(e),i.set(e,n)}getReferenceElShadowRootNode(e){return e instanceof Element?bhe(e):null}}const Jfe=":host{--calcite-floating-ui-z-index:var(--calcite-tooltip-z-index, var(--calcite-z-index-tooltip));display:block;position:absolute;z-index:var(--calcite-floating-ui-z-index)}.calcite-floating-ui-anim{position:relative;transition:var(--calcite-floating-ui-transition);transition-property:transform, visibility, opacity;opacity:0;box-shadow:0 0 16px 0 rgba(0, 0, 0, 0.16);z-index:var(--calcite-z-index);border-radius:0.25rem}:host([data-placement^=bottom]) .calcite-floating-ui-anim{transform:translateY(-5px)}:host([data-placement^=top]) .calcite-floating-ui-anim{transform:translateY(5px)}:host([data-placement^=left]) .calcite-floating-ui-anim{transform:translateX(5px)}:host([data-placement^=right]) .calcite-floating-ui-anim{transform:translateX(-5px)}:host([data-placement]) .calcite-floating-ui-anim--active{opacity:1;transform:translate(0)}:host([calcite-hydrated-hidden]){visibility:hidden !important;pointer-events:none}.calcite-floating-ui-arrow{pointer-events:none;position:absolute;z-index:calc(var(--calcite-z-index) * -1);fill:var(--calcite-color-foreground-1)}.calcite-floating-ui-arrow__stroke{stroke:var(--calcite-color-border-3)}.container{position:relative;overflow:hidden;border-radius:0.25rem;padding-block:0.75rem;padding-inline:1rem;font-size:var(--calcite-font-size--2);line-height:1.375;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1);max-inline-size:20rem;max-block-size:20rem;text-align:start}.calcite-floating-ui-anim{border-radius:0.25rem;border-width:1px;border-style:solid;border-color:var(--calcite-color-border-3);background-color:var(--calcite-color-foreground-1)}.arrow::before{outline:1px solid var(--calcite-color-border-3)}:host([hidden]){display:none}[hidden]{display:none}",fA=new Kfe,Yfe=Ct(class extends It{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteTooltipBeforeClose=$e(this,"calciteTooltipBeforeClose",6),this.calciteTooltipClose=$e(this,"calciteTooltipClose",6),this.calciteTooltipBeforeOpen=$e(this,"calciteTooltipBeforeOpen",6),this.calciteTooltipOpen=$e(this,"calciteTooltipOpen",6),this.guid=`calcite-tooltip-${Oc()}`,this.hasLoaded=!1,this.openTransitionProp="opacity",this.setTransitionEl=e=>{this.transitionEl=e},this.setUpReferenceElement=(e=!0)=>{this.removeReferences(),this.effectiveReferenceElement=fj(this.el),o1(this,this.effectiveReferenceElement,this.el);const{el:i,referenceElement:n,effectiveReferenceElement:r}=this;e&&n&&!r&&console.warn(`${i.tagName}: reference-element id "${n}" was not found.`,{el:i}),this.addReferences()},this.getId=()=>this.el.id||this.guid,this.addReferences=()=>{const{effectiveReferenceElement:e}=this;if(!e)return;const i=this.getId();"setAttribute"in e&&e.setAttribute(pA,i),fA.registerElement(e,this.el)},this.removeReferences=()=>{const{effectiveReferenceElement:e}=this;e&&("removeAttribute"in e&&e.removeAttribute(pA),fA.unregisterElement(e))},this.closeOnClick=!1,this.label=void 0,this.offsetDistance=hj,this.offsetSkidding=0,this.open=!1,this.overlayPositioning="absolute",this.placement="auto",this.referenceElement=void 0,this.effectiveReferenceElement=void 0,this.floatingLayout="vertical"}offsetDistanceOffsetHandler(){this.reposition(!0)}offsetSkiddingHandler(){this.reposition(!0)}openHandler(){ed(this)}overlayPositioningHandler(){this.reposition(!0)}placementHandler(){this.reposition(!0)}referenceElementHandler(){this.setUpReferenceElement()}connectedCallback(){this.setUpReferenceElement(this.hasLoaded),this.open&&ed(this),o1(this,this.effectiveReferenceElement,this.el)}async componentWillLoad(){this.open&&ed(this)}componentDidLoad(){this.referenceElement&&!this.effectiveReferenceElement&&this.setUpReferenceElement(),this.reposition(!0),this.hasLoaded=!0}disconnectedCallback(){this.removeReferences(),Uk(this,this.effectiveReferenceElement,this.el)}async reposition(e=!1){const{el:i,effectiveReferenceElement:n,placement:r,overlayPositioning:s,offsetDistance:o,offsetSkidding:a,arrowEl:l}=this;return dj(this,{floatingEl:i,referenceEl:n,overlayPositioning:s,placement:r,offsetDistance:o,offsetSkidding:a,arrowEl:l,type:"tooltip"},e)}onBeforeOpen(){this.reposition(!0),this.calciteTooltipBeforeOpen.emit()}onOpen(){this.calciteTooltipOpen.emit()}onBeforeClose(){this.calciteTooltipBeforeClose.emit()}onClose(){this.calciteTooltipClose.emit(),this.reposition(!0)}render(){const{effectiveReferenceElement:e,label:i,open:n,floatingLayout:r}=this,s=e&&n,o=!s;return k(Pn,{"aria-hidden":Ui(o),"aria-label":i,"aria-live":"polite","calcite-hydrated-hidden":o,id:this.getId(),role:"tooltip"},k("div",{class:{[r1.animation]:!0,[r1.animationActive]:s},ref:this.setTransitionEl},k(pj,{floatingLayout:r,ref:a=>this.arrowEl=a}),k("div",{class:qfe.container},k("slot",null))))}get el(){return this}static get watchers(){return{offsetDistance:["offsetDistanceOffsetHandler"],offsetSkidding:["offsetSkiddingHandler"],open:["openHandler"],overlayPositioning:["overlayPositioningHandler"],placement:["placementHandler"],referenceElement:["referenceElementHandler"]}}static get style(){return Jfe}},[1,"calcite-tooltip",{closeOnClick:[516,"close-on-click"],label:[1],offsetDistance:[514,"offset-distance"],offsetSkidding:[514,"offset-skidding"],open:[516],overlayPositioning:[513,"overlay-positioning"],placement:[513],referenceElement:[1,"reference-element"],effectiveReferenceElement:[32],floatingLayout:[32],reposition:[64]},void 0,{offsetDistance:["offsetDistanceOffsetHandler"],offsetSkidding:["offsetSkiddingHandler"],open:["openHandler"],overlayPositioning:["overlayPositioningHandler"],placement:["placementHandler"],referenceElement:["referenceElementHandler"]}]);function Xfe(){if(typeof customElements>"u")return;["calcite-tooltip"].forEach(e=>{switch(e){case"calcite-tooltip":customElements.get(e)||customElements.define(e,Yfe);break}})}Xfe();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */const Qfe={titleGroup:"title-group"},eme=":host{display:flex;flex-direction:column}:host([bordered]){box-shadow:inset 0 1px 0 var(--calcite-color-border-1);background-color:var(--calcite-color-foreground-1)}:host([bordered]:not([position=bottom])) ::slotted(calcite-tab-nav){margin-block-end:-1px}:host([bordered][position=bottom]){box-shadow:inset 0 1px 0 var(--calcite-color-border-1), inset 0 -1px 0 var(--calcite-color-border-1)}:host([bordered]) section{border-width:1px;border-style:solid;border-color:var(--calcite-color-border-1)}:host([bordered][scale=s]) section{padding:0.75rem}:host([bordered][scale=m]) section{padding:0.5rem}:host([bordered][scale=l]) section{padding:1rem}:host([position=bottom]){flex-direction:column-reverse}section{display:flex;flex-grow:1;overflow:hidden;border-block-start-width:1px;border-block-start-color:var(--calcite-color-border-1);border-block-start-style:solid}:host([position=bottom]) section{flex-direction:column-reverse;border-block-start-width:0px;border-block-end-width:1px;border-block-end-color:var(--calcite-color-border-1)}:host([position=bottom]:not([bordered])) section{border-block-end-style:solid}@media (forced-colors: active){:host([bordered]) section{border-block-start-width:0px;border-block-end-width:1px}:host([position=bottom][bordered]) section{border-block-start-width:1px;border-block-end-width:0px}}:host([hidden]){display:none}[hidden]{display:none}",tme=Ct(class extends It{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.mutationObserver=ii("mutation",e=>{for(const i of e){const n=i.target;(n.nodeName==="CALCITE-TAB-NAV"||n.nodeName==="CALCITE-TAB-TITLE"||n.nodeName==="CALCITE-TAB")&&this.updateItems()}}),this.layout="inline",this.position="top",this.scale="m",this.bordered=!1,this.titles=[],this.tabs=[]}handleInheritableProps(){this.updateItems()}connectedCallback(){this.mutationObserver.observe(this.el,{childList:!0}),this.updateItems()}async componentWillLoad(){this.updateItems()}disconnectedCallback(){var e;(e=this.mutationObserver)==null||e.disconnect()}render(){return k(Yg,null,k("slot",{name:Qfe.titleGroup}),k("section",null,k("slot",null)))}calciteInternalTabTitleRegister(e){this.titles=[...this.titles,e.target],this.registryHandler(),e.stopPropagation()}calciteTabTitleUnregister(e){this.titles=this.titles.filter(i=>i!==e.detail),this.registryHandler(),e.stopPropagation()}calciteInternalTabRegister(e){this.tabs=[...this.tabs,e.target],this.registryHandler(),e.stopPropagation()}calciteTabUnregister(e){this.tabs=this.tabs.filter(i=>i!==e.detail),this.registryHandler(),e.stopPropagation()}updateItems(){const{position:e,scale:i}=this,n=this.el.querySelector("calcite-tab-nav");n&&(n.position=e,n.scale=i),Array.from(this.el.querySelectorAll("calcite-tab")).forEach(r=>{r.parentElement===this.el&&(r.scale=i)}),Array.from(this.el.querySelectorAll("calcite-tab-nav > calcite-tab-title")).forEach(r=>{r.position=e,r.scale=i})}async registryHandler(){let e,i;if(this.tabs.some(n=>n.tab)||this.titles.some(n=>n.tab))e=this.tabs.sort((n,r)=>n.tab.localeCompare(r.tab)).map(n=>n.id),i=this.titles.sort((n,r)=>n.tab.localeCompare(r.tab)).map(n=>n.id);else{const n=await Promise.all(this.tabs.map(s=>s.getTabIndex())),r=await Promise.all(this.titles.map(s=>s.getTabIndex()));e=n.reduce((s,o,a)=>(s[o]=this.tabs[a].id,s),[]),i=r.reduce((s,o,a)=>(s[o]=this.titles[a].id,s),[])}this.tabs.forEach(n=>n.updateAriaInfo(e,i)),this.titles.forEach(n=>n.updateAriaInfo(e,i))}get el(){return this}static get watchers(){return{position:["handleInheritableProps"],scale:["handleInheritableProps"]}}static get style(){return eme}},[1,"calcite-tabs",{layout:[513],position:[513],scale:[513],bordered:[4],titles:[32],tabs:[32]},[[0,"calciteInternalTabTitleRegister","calciteInternalTabTitleRegister"],[16,"calciteTabTitleUnregister","calciteTabTitleUnregister"],[0,"calciteInternalTabRegister","calciteInternalTabRegister"],[16,"calciteTabUnregister","calciteTabUnregister"]],{position:["handleInheritableProps"],scale:["handleInheritableProps"]}]);function ime(){if(typeof customElements>"u")return;["calcite-tabs"].forEach(e=>{switch(e){case"calcite-tabs":customElements.get(e)||customElements.define(e,tme);break}})}ime();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */const nme={container:"tab-nav"},rme=":host{position:relative;display:flex}.scale-s{min-block-size:1.5rem}.scale-m{min-block-size:2rem}.scale-l{min-block-size:2.75rem}:host([layout=center]:not([bordered])){padding-inline:1.25rem}:host([layout=center]:not([bordered])) .tab-nav ::slotted(calcite-tab-title:last-child){margin-inline-end:0px}:host(:not([bordered])) .scale-l ::slotted(calcite-tab-title){margin-inline-end:1.5rem}:host(:not([bordered])) .scale-m ::slotted(calcite-tab-title){margin-inline-end:1.25rem}:host(:not([bordered])) .scale-s ::slotted(calcite-tab-title){margin-inline-end:1rem}.tab-nav{display:flex;inline-size:100%;justify-content:flex-start;overflow:auto}.tab-nav-active-indicator-container{position:absolute;inset-inline:0px;inset-block-end:0px;block-size:0.125rem;inline-size:100%;overflow:hidden}.tab-nav-active-indicator{position:absolute;inset-block-end:0px;display:block;block-size:0.125rem;background-color:var(--calcite-color-brand);transition-property:all;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms;transition-timing-function:cubic-bezier(0, 0, 0.2, 1)}:host([layout=center]) .tab-nav{justify-content:space-evenly}:host .position-bottom .tab-nav-active-indicator{inset-block-end:unset;inset-block-start:0px}:host .position-bottom .tab-nav-active-indicator-container{inset-block-end:unset;inset-block-start:0px}:host([bordered]) .tab-nav-active-indicator-container{inset-block-end:unset}:host([bordered]) .position-bottom .tab-nav-active-indicator-container{inset-block-end:0;inset-block-start:unset}@media (forced-colors: active){.tab-nav-active-indicator{background-color:highlight}}:host([hidden]){display:none}[hidden]{display:none}",sme=Ct(class extends It{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteTabChange=$e(this,"calciteTabChange",6),this.calciteInternalTabChange=$e(this,"calciteInternalTabChange",6),this.animationActiveDuration=.3,this.resizeObserver=ii("resize",()=>{this.activeIndicatorEl&&(this.activeIndicatorEl.style.transitionDuration="0s",this.updateActiveWidth(),this.updateOffsetPosition())}),this.handleTabFocus=(e,i,n)=>{Ihe(this.enabledTabTitles,i,n),e.stopPropagation()},this.handleContainerScroll=()=>{this.activeIndicatorEl.style.transitionDuration="0s",this.updateOffsetPosition()},this.storageId=void 0,this.syncId=void 0,this.selectedTitle=null,this.scale="m",this.layout="inline",this.position="bottom",this.bordered=!1,this.indicatorOffset=void 0,this.indicatorWidth=void 0,this.selectedTabId=void 0}async selectedTabIdChanged(){localStorage&&this.storageId&&this.selectedTabId!==void 0&&this.selectedTabId!==null&&localStorage.setItem(`calcite-tab-nav-${this.storageId}`,JSON.stringify(this.selectedTabId)),this.calciteInternalTabChange.emit({tab:this.selectedTabId}),this.selectedTitle=await this.getTabTitleById(this.selectedTabId)}selectedTitleChanged(){this.updateOffsetPosition(),this.updateActiveWidth(),this.activeIndicatorEl.style.transitionDuration=`${this.animationActiveDuration}s`}connectedCallback(){var e;this.parentTabsEl=this.el.closest("calcite-tabs"),(e=this.resizeObserver)==null||e.observe(this.el)}componentWillLoad(){const e=`calcite-tab-nav-${this.storageId}`;if(localStorage&&this.storageId&&localStorage.getItem(e)){const i=JSON.parse(localStorage.getItem(e));this.selectedTabId=i}}componentWillRender(){const{parentTabsEl:e}=this;this.layout=e==null?void 0:e.layout,this.bordered=e==null?void 0:e.bordered,this.selectedTitle&&this.updateOffsetPosition()}componentDidRender(){this.tabTitles.length&&this.tabTitles.every(e=>!e.selected)&&!this.selectedTabId&&this.tabTitles[0].getTabIdentifier().then(e=>{this.calciteInternalTabChange.emit({tab:e})})}disconnectedCallback(){var e;(e=this.resizeObserver)==null||e.disconnect()}render(){const e=Es(this.el),i=`${this.indicatorWidth}px`,n=`${this.indicatorOffset}px`,r=e!=="rtl"?{width:i,left:n}:{width:i,right:n};return k(Pn,{role:"tablist"},k("div",{class:{[nme.container]:!0,[`scale-${this.scale}`]:!0,[`position-${this.position}`]:!0},onScroll:this.handleContainerScroll,ref:s=>this.tabNavEl=s},k("slot",null),k("div",{class:"tab-nav-active-indicator-container",ref:s=>this.activeIndicatorContainerEl=s},k("div",{class:"tab-nav-active-indicator",style:r,ref:s=>this.activeIndicatorEl=s}))))}focusPreviousTabHandler(e){this.handleTabFocus(e,e.target,"previous")}focusNextTabHandler(e){this.handleTabFocus(e,e.target,"next")}focusFirstTabHandler(e){this.handleTabFocus(e,e.target,"first")}focusLastTabHandler(e){this.handleTabFocus(e,e.target,"last")}internalActivateTabHandler(e){this.selectedTabId=e.detail.tab?e.detail.tab:this.getIndexOfTabTitle(e.target),e.stopPropagation()}activateTabHandler(e){this.calciteTabChange.emit(),e.stopPropagation()}internalCloseTabHandler(e){const i=e.target;this.handleTabTitleClose(i),e.stopPropagation()}updateTabTitles(e){e.target.selected&&(this.selectedTabId=e.detail)}globalInternalTabChangeHandler(e){this.syncId&&e.target!==this.el&&e.target.syncId===this.syncId&&this.selectedTabId!==e.detail.tab&&(this.selectedTabId=e.detail.tab),e.stopPropagation()}iconStartChangeHandler(){this.updateActiveWidth(),this.updateOffsetPosition()}updateOffsetPosition(){var o,a,l,u,p;const e=Es(this.el),i=(o=this.activeIndicatorContainerEl)==null?void 0:o.offsetWidth,n=(a=this.selectedTitle)==null?void 0:a.offsetLeft,r=(l=this.selectedTitle)==null?void 0:l.offsetWidth,s=i-(n+r);this.indicatorOffset=e!=="rtl"?n-((u=this.tabNavEl)==null?void 0:u.scrollLeft):s+((p=this.tabNavEl)==null?void 0:p.scrollLeft)}updateActiveWidth(){var e;this.indicatorWidth=(e=this.selectedTitle)==null?void 0:e.offsetWidth}getIndexOfTabTitle(e,i=this.tabTitles){return i.indexOf(e)}async getTabTitleById(e){return Promise.all(this.tabTitles.map(i=>i.getTabIdentifier())).then(i=>this.tabTitles[i.indexOf(e)])}get tabTitles(){return H3(this.el,"calcite-tab-title")}get enabledTabTitles(){return H3(this.el,"calcite-tab-title:not([disabled])").filter(e=>!e.closed)}handleTabTitleClose(e){const{tabTitles:i}=this,n=i.reduce((s,o,a)=>o.closed?s:[...s,a],[]),r=n.length;if(r===1&&i[n[0]].closable)i[n[0]].closable=!1,this.selectedTabId=n[0];else if(r>1){const s=i.findIndex(a=>a===e),o=n.find(a=>a>s);this.selectedTabId===s&&(this.selectedTabId=o||r-1)}requestAnimationFrame(()=>{this.updateOffsetPosition(),this.updateActiveWidth(),i[this.selectedTabId].focus()})}get el(){return this}static get watchers(){return{selectedTabId:["selectedTabIdChanged"],selectedTitle:["selectedTitleChanged"]}}static get style(){return rme}},[1,"calcite-tab-nav",{storageId:[513,"storage-id"],syncId:[513,"sync-id"],selectedTitle:[1040],scale:[1],layout:[1537],position:[1],bordered:[1540],indicatorOffset:[1026,"indicator-offset"],indicatorWidth:[1026,"indicator-width"],selectedTabId:[32]},[[0,"calciteInternalTabsFocusPrevious","focusPreviousTabHandler"],[0,"calciteInternalTabsFocusNext","focusNextTabHandler"],[0,"calciteInternalTabsFocusFirst","focusFirstTabHandler"],[0,"calciteInternalTabsFocusLast","focusLastTabHandler"],[0,"calciteInternalTabsActivate","internalActivateTabHandler"],[0,"calciteTabsActivate","activateTabHandler"],[0,"calciteInternalTabsClose","internalCloseTabHandler"],[0,"calciteInternalTabTitleRegister","updateTabTitles"],[16,"calciteInternalTabChange","globalInternalTabChangeHandler"],[0,"calciteInternalTabIconChanged","iconStartChangeHandler"]],{selectedTabId:["selectedTabIdChanged"],selectedTitle:["selectedTitleChanged"]}]);function ome(){if(typeof customElements>"u")return;["calcite-tab-nav"].forEach(e=>{switch(e){case"calcite-tab-nav":customElements.get(e)||customElements.define(e,sme);break}})}ome();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */const ea={closeButton:"close-button",container:"container",content:"content",contentHasText:"content--has-text",iconEnd:"icon-end",iconPresent:"icon-present",iconStart:"icon-start",titleIcon:"calcite-tab-title--icon"},ame={close:"x"},lme=`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:block;outline:2px solid transparent;outline-offset:2px;margin-inline-start:0px}:host([layout=inline]){flex:0 1 auto}:host([layout=center]){flex:1 1 auto}:host([layout=center]) .scale-s,:host([layout=center]) .scale-m,:host([layout=center]) .scale-l{margin-block:0px;text-align:center;flex-basis:12rem}:host([layout=center]) .scale-s .content,:host([layout=center]) .scale-m .content,:host([layout=center]) .scale-l .content{margin:auto}:host([layout=center][closable]) .content{padding-inline-start:32px}:host([layout=center][bordered][closable]) .scale-s .content{padding-inline-start:36px}:host([layout=center][bordered][closable]) .scale-m .content{padding-inline-start:40px}:host([layout=center][closable]) .scale-l .content{padding-inline-start:40px}:host([layout=center][closable][bordered]) .scale-s .content{padding-inline-start:52px}:host([position=bottom]) .container{border-block-end-width:0px;border-block-start-width:2px;border-block-start-color:transparent;border-block-start-style:solid}:host([closed]){display:none}.container{outline-color:transparent}:host(:focus) .container{outline:2px solid var(--calcite-color-brand);outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}:host(:focus) .container:focus-within{outline-color:transparent}:host(:active) a,:host(:focus) a,:host(:hover) a{border-color:var(--calcite-color-border-2);color:var(--calcite-color-text-1);text-decoration-line:none}:host([selected]) .container{border-color:transparent;color:var(--calcite-color-text-1)}:host([disabled]) .container{pointer-events:none;opacity:0.5}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.scale-s .content{padding-block:0.25rem;font-size:var(--calcite-font-size--2);line-height:1rem}.scale-m .content{padding-block:0.5rem;font-size:var(--calcite-font-size--1);line-height:1rem}.scale-l .content{padding-block:0.625rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}.container{box-sizing:border-box;display:flex;block-size:100%;inline-size:100%;cursor:pointer;align-content:center;justify-content:space-between;border-block-end-width:2px;padding-inline:0px;font-size:var(--calcite-font-size--1);line-height:1rem;color:var(--calcite-color-text-3);transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;border-block-end-color:transparent;border-block-end-style:solid}.content{display:flex;align-items:center;justify-content:center}.calcite-tab-title--icon{position:relative;margin:0px;display:inline-flex;align-self:center}.calcite-tab-title--icon svg{transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}.content--has-text{padding:0.25rem}.content--has-text .calcite-tab-title--icon.icon-start{margin-inline-end:0.5rem}.content--has-text .calcite-tab-title--icon.icon-end{margin-inline-start:0.5rem}.close-button{display:flex;cursor:pointer;appearance:none;align-content:center;align-items:center;justify-content:center;align-self:center;border-style:none;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-3);outline-color:transparent;transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;block-size:calc(100% - 2px);background-color:var(--calcite-button-transparent-1);margin-inline-start:auto}.close-button:focus{outline:2px solid var(--calcite-color-brand);outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          );outline-offset:-1px}.close-button:focus,.close-button:hover{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-2)}.close-button:active{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-3)}.close-button calcite-icon{color:inherit}:host([icon-start][icon-end]) .calcite-tab-title--icon:first-child{margin-inline-end:0.5rem}:host([bordered]){margin-inline-end:0}:host([bordered][selected]){box-shadow:inset 0px -2px var(--calcite-color-foreground-1)}:host([bordered][selected][position=bottom]){box-shadow:inset 0 2px 0 var(--calcite-color-foreground-1)}:host([bordered]:hover) .container,:host([bordered]:focus) .container,:host([bordered]:active) .container{position:relative}:host([bordered]:hover) .container{background-color:var(--calcite-color-transparent-hover)}:host([closable]) .container,:host([bordered]) .container{border-inline-start:1px solid transparent;border-inline-end:1px solid transparent}:host([closable]) .container .close-button,:host([bordered]) .container .close-button{margin-inline:0}:host([closable]) .content{box-sizing:border-box;block-size:100%;border-block-end-color:transparent}:host([closable][position=bottom]) .container,:host([bordered][position=bottom]) .container{border-block-start-style:unset}:host([selected][bordered]) .container{border-inline-start-color:var(--calcite-color-border-1);border-inline-end-color:var(--calcite-color-border-1)}:host([bordered]) .content{padding-inline:0.75rem}:host([bordered]) .scale-s .content{padding-inline:0.5rem}:host([bordered]) .scale-l .content{padding-inline:1rem}@media (forced-colors: active){:host{outline-width:0;outline-offset:0}:host(:focus) .container{outline-color:highlight}:host([bordered]) .container{border-block-end-style:solid}:host([bordered][position=bottom]) .container{border-block-start-style:solid}:host([bordered][selected]) .container{border-block-end-style:none}:host([bordered][position=bottom][selected]) .container{border-block-start-style:none}.close-button{z-index:var(--calcite-z-index)}}:host([hidden]){display:none}[hidden]{display:none}`,cme=Ct(class extends It{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteTabsActivate=$e(this,"calciteTabsActivate",6),this.calciteInternalTabsActivate=$e(this,"calciteInternalTabsActivate",6),this.calciteTabsClose=$e(this,"calciteTabsClose",6),this.calciteInternalTabsClose=$e(this,"calciteInternalTabsClose",6),this.calciteInternalTabsFocusNext=$e(this,"calciteInternalTabsFocusNext",6),this.calciteInternalTabsFocusPrevious=$e(this,"calciteInternalTabsFocusPrevious",6),this.calciteInternalTabsFocusFirst=$e(this,"calciteInternalTabsFocusFirst",6),this.calciteInternalTabsFocusLast=$e(this,"calciteInternalTabsFocusLast",6),this.calciteInternalTabTitleRegister=$e(this,"calciteInternalTabTitleRegister",6),this.calciteInternalTabIconChanged=$e(this,"calciteInternalTabIconChanged",6),this.closeClickHandler=()=>{this.closeTabTitleAndNotify()},this.mutationObserver=ii("mutation",()=>this.updateHasText()),this.resizeObserver=ii("resize",()=>{this.calciteInternalTabIconChanged.emit()}),this.guid=`calcite-tab-title-${Oc()}`,this.selected=!1,this.closable=!1,this.closed=!1,this.disabled=!1,this.iconEnd=void 0,this.iconFlipRtl=void 0,this.iconStart=void 0,this.layout=void 0,this.position="top",this.scale="m",this.bordered=!1,this.tab=void 0,this.messages=void 0,this.messageOverrides=void 0,this.controls=void 0,this.defaultMessages=void 0,this.effectiveLocale=void 0,this.hasText=!1}selectedHandler(){this.selected&&this.emitActiveTab(!1)}onMessagesChange(){}connectedCallback(){Lc(this),Ps(this),Fs(this),this.setupTextContentObserver(),this.parentTabNavEl=this.el.closest("calcite-tab-nav"),this.parentTabsEl=this.el.closest("calcite-tabs")}disconnectedCallback(){var e,i,n;(e=this.mutationObserver)==null||e.disconnect(),(i=document.body)==null||i.dispatchEvent(new CustomEvent("calciteTabTitleUnregister",{detail:this.el})),(n=this.resizeObserver)==null||n.disconnect(),Pc(this),Rs(this),zs(this)}async componentWillLoad(){await Ns(this),this.updateHasText(),this.tab&&this.selected&&this.emitActiveTab(!1)}componentWillRender(){this.parentTabsEl&&(this.layout=this.parentTabsEl.layout,this.bordered=this.parentTabsEl.bordered)}render(){const{el:e,closed:i}=this,n=e.id||this.guid,r=k("calcite-icon",{class:{[ea.titleIcon]:!0,[ea.iconStart]:!0},flipRtl:this.iconFlipRtl==="start"||this.iconFlipRtl==="both",icon:this.iconStart,scale:pi(this.scale)}),s=k("calcite-icon",{class:{[ea.titleIcon]:!0,[ea.iconEnd]:!0},flipRtl:this.iconFlipRtl==="end"||this.iconFlipRtl==="both",icon:this.iconEnd,scale:pi(this.scale)});return k(Pn,{"aria-controls":this.controls,"aria-selected":Ui(this.selected),id:n,role:"tab",tabIndex:this.selected?0:-1},k("div",{class:{container:!0,[ea.iconPresent]:!!this.iconStart||!!this.iconEnd,[`scale-${this.scale}`]:!0},hidden:i,ref:o=>{var a;return(a=this.resizeObserver)==null?void 0:a.observe(o)}},k("div",{class:{[ea.content]:!0,[ea.contentHasText]:this.hasText}},this.iconStart?r:null,k("slot",null),this.iconEnd?s:null),this.renderCloseButton()))}renderCloseButton(){const{closable:e,messages:i}=this;return e?k("button",{"aria-label":i.close,class:ea.closeButton,disabled:!1,key:ea.closeButton,onClick:this.closeClickHandler,title:i.close,type:"button",ref:n=>this.closeButtonEl=n},k("calcite-icon",{icon:ame.close,scale:pi(this.scale)})):null}async componentDidLoad(){this.calciteInternalTabTitleRegister.emit(await this.getTabIdentifier())}componentDidRender(){Ac(this,()=>this.selected)}internalTabChangeHandler(e){e.composedPath().find(n=>n.tagName==="CALCITE-TABS")===this.parentTabsEl&&(this.tab?this.selected=this.tab===e.detail.tab:this.getTabIndex().then(n=>{this.selected=n===e.detail.tab}),e.stopPropagation())}onClick(){this.disabled||this.emitActiveTab()}keyDownHandler(e){switch(e.key){case" ":case"Enter":e.composedPath().includes(this.closeButtonEl)||(this.emitActiveTab(),e.preventDefault());break;case"ArrowRight":e.preventDefault(),Es(this.el)==="ltr"?this.calciteInternalTabsFocusNext.emit():this.calciteInternalTabsFocusPrevious.emit();break;case"ArrowLeft":e.preventDefault(),Es(this.el)==="ltr"?this.calciteInternalTabsFocusPrevious.emit():this.calciteInternalTabsFocusNext.emit();break;case"Home":e.preventDefault(),this.calciteInternalTabsFocusFirst.emit();break;case"End":e.preventDefault(),this.calciteInternalTabsFocusLast.emit();break}}async getTabIndex(){return Array.prototype.indexOf.call(x8(this.el.parentElement.children).filter(e=>e.matches("calcite-tab-title")),this.el)}async getTabIdentifier(){return this.tab?this.tab:this.getTabIndex()}async updateAriaInfo(e=[],i=[]){this.controls=e[i.indexOf(this.el.id)]||null}effectiveLocaleChange(){Ds(this,this.effectiveLocale)}updateHasText(){this.hasText=this.el.textContent.trim().length>0}setupTextContentObserver(){var e;(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0})}emitActiveTab(e=!0){if(this.disabled||this.closed)return;const i={tab:this.tab};this.calciteInternalTabsActivate.emit(i),e&&requestAnimationFrame(()=>this.calciteTabsActivate.emit())}closeTabTitleAndNotify(){this.closed=!0,this.calciteInternalTabsClose.emit({tab:this.tab}),this.calciteTabsClose.emit()}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{selected:["selectedHandler"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return lme}},[1,"calcite-tab-title",{selected:[1540],closable:[516],closed:[1540],disabled:[516],iconEnd:[513,"icon-end"],iconFlipRtl:[513,"icon-flip-rtl"],iconStart:[513,"icon-start"],layout:[1537],position:[1],scale:[1],bordered:[1540],tab:[513],messages:[1040],messageOverrides:[1040],controls:[32],defaultMessages:[32],effectiveLocale:[32],hasText:[32],getTabIndex:[64],getTabIdentifier:[64],updateAriaInfo:[64]},[[16,"calciteInternalTabChange","internalTabChangeHandler"],[0,"click","onClick"],[0,"keydown","keyDownHandler"]],{selected:["selectedHandler"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function ume(){if(typeof customElements>"u")return;["calcite-tab-title","calcite-icon"].forEach(e=>{switch(e){case"calcite-tab-title":customElements.get(e)||customElements.define(e,cme);break;case"calcite-icon":customElements.get(e)||js();break}})}ume();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */const mA={container:"container",content:"content"},dme=":host([selected]) section,:host([selected]) .container{display:block}:host{display:none;block-size:100%;inline-size:100%}:host([selected]){display:block;block-size:100%;inline-size:100%;overflow:auto}.scale-s .content{padding-block:0.25rem;font-size:var(--calcite-font-size--2);line-height:1rem}.scale-m .content{padding-block:0.5rem;font-size:var(--calcite-font-size--1);line-height:1rem}.scale-l .content{padding-block:0.625rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}section,.container{display:none;block-size:100%;inline-size:100%}:host([hidden]){display:none}[hidden]{display:none}",hme=Ct(class extends It{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteInternalTabRegister=$e(this,"calciteInternalTabRegister",6),this.guid=`calcite-tab-title-${Oc()}`,this.tab=void 0,this.selected=!1,this.scale="m",this.labeledBy=void 0}render(){const e=this.el.id||this.guid;return k(Pn,{"aria-labelledby":this.labeledBy,id:e},k("div",{class:{[mA.container]:!0,[`scale-${this.scale}`]:!0},role:"tabpanel",tabIndex:this.selected?0:-1},k("section",{class:mA.content},k("slot",null))))}connectedCallback(){this.parentTabsEl=this.el.closest("calcite-tabs")}componentDidLoad(){this.calciteInternalTabRegister.emit()}disconnectedCallback(){var e;(e=document.body)==null||e.dispatchEvent(new CustomEvent("calciteTabUnregister",{detail:this.el}))}internalTabChangeHandler(e){e.composedPath().find(n=>n.tagName==="CALCITE-TABS")===this.parentTabsEl&&(this.tab?this.selected=this.tab===e.detail.tab:this.getTabIndex().then(n=>{this.selected=n===e.detail.tab}),e.stopPropagation())}async getTabIndex(){return Array.prototype.indexOf.call(x8(this.el.parentElement.children).filter(e=>e.matches("calcite-tab")),this.el)}async updateAriaInfo(e=[],i=[]){this.labeledBy=i[e.indexOf(this.el.id)]||null}get el(){return this}static get style(){return dme}},[1,"calcite-tab",{tab:[513],selected:[1540],scale:[1],labeledBy:[32],getTabIndex:[64],updateAriaInfo:[64]},[[16,"calciteInternalTabChange","internalTabChangeHandler"]]]);function pme(){if(typeof customElements>"u")return;["calcite-tab"].forEach(e=>{switch(e){case"calcite-tab":customElements.get(e)||customElements.define(e,hme);break}})}pme();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */var fme="Expected a function";function mme(t,e,i){var n=!0,r=!0;if(typeof t!="function")throw new TypeError(fme);return Qb(i)&&(n="leading"in i?!!i.leading:n,r="trailing"in i?!!i.trailing:r),X8(t,e,{leading:n,maxWait:e,trailing:r})}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */const dn={assistiveText:"assistive-text",characterLimit:"character-limit",content:"content",container:"container",footer:"footer",resizeDisabled:"resize--disabled",resizeDisabledX:"resize--disabled-x",resizeDisabledY:"resize--disabled-y",characterOverLimit:"character--over-limit",readOnly:"readonly",textAreaInvalid:"text-area--invalid",footerSlotted:"footer--slotted",borderColor:"border--color",hide:"hide",blockSizeFull:"block-size--full",footerEndSlotOnly:"footer--end-only"},gA={footerStart:"footer-start",footerEnd:"footer-end"},gme=100,yme=`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{position:relative;display:inline-block;block-size:100%;inline-size:100%}textarea{position:relative;margin:0px;box-sizing:border-box;display:block;inline-size:100%;border-width:1px;border-color:var(--calcite-color-border-input);background-color:var(--calcite-color-foreground-1);font-family:var(--calcite-sans-family);color:var(--calcite-color-text-1);min-inline-size:12rem;border-block-end:1px solid var(--calcite-color-border-3)}@media screen and (max-width: 480px){textarea{resize:none}}textarea:focus{outline:2px solid var(--calcite-color-brand);outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}textarea.text-area--invalid{border-width:1px;border-block-end-width:1px;border-style:solid;border-color:var(--calcite-color-status-danger)}textarea.text-area--invalid:focus{outline:2px solid var(--calcite-color-status-danger);outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}textarea.footer--slotted{min-inline-size:18rem}.footer{box-sizing:border-box;display:flex;align-items:center;border-width:1px;border-block-start-width:0px;border-style:solid;border-color:var(--calcite-color-border-input);background-color:var(--calcite-color-foreground-1)}.character-limit{display:flex;align-items:center;justify-content:flex-end;white-space:nowrap;font-weight:var(--calcite-font-weight-normal);color:var(--calcite-color-text-2)}.character--over-limit{font-weight:var(--calcite-font-weight-bold);color:var(--calcite-color-status-danger)}:host([resize=none]) textarea{resize:none}:host([resize=horizontal]) textarea{resize:horizontal}:host([resize=vertical]) textarea{resize:vertical}:host([scale=s]){font-size:var(--calcite-font-size--2)}:host([scale=s]) .footer{padding-block:0.25rem;padding-inline:0.5rem;min-block-size:1.75rem}:host([scale=s]) textarea{padding-block:0.25rem;padding-inline:0.5rem}:host([scale=s]) textarea,:host([scale=s]) .footer,:host([scale=s]) .character-limit{padding-inline-start:0.5rem;font-size:var(--calcite-font-size--2)}:host([scale=m]) textarea{padding-block:0.5rem;padding-inline:0.75rem}:host([scale=m]) .footer{padding-block:0.5rem;padding-inline:0.75rem;min-block-size:2.25rem}:host([scale=m]) textarea,:host([scale=m]) .footer,:host([scale=m]) .character-limit{padding-inline-start:0.75rem;font-size:var(--calcite-font-size--1)}:host([scale=l]){font-size:var(--calcite-font-size-0)}:host([scale=l]) textarea{padding-block:0.75rem;padding-inline:1rem}:host([scale=l]) .footer{padding-block:0.75rem;padding-inline:1rem;min-block-size:2.75rem}:host([scale=l]) textarea,:host([scale=l]) .footer,:host([scale=l]) .character-limit{padding-inline-start:1rem;font-size:var(--calcite-font-size-0)}:host([status=invalid]) textarea{border-color:var(--calcite-color-status-danger)}:host([status=invalid]) textarea:focus{outline:2px solid var(--calcite-color-status-danger);outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}.readonly{background-color:var(--calcite-color-background);font-weight:var(--calcite-font-weight-medium)}:host([disabled]) textarea,:host([disabled]) footer{opacity:0.5}.border--color{border-block-end-width:1px;border-color:var(--calcite-color-border-input)}.border--color:focus{border-block-end-width:2px}textarea.block-size--full{block-size:100%}.content,.hide{display:none}.container{display:flex;inline-size:100%;justify-content:space-between}.footer--end-only{justify-content:flex-end}.assistive-text{position:absolute;inline-size:1px;block-size:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}::slotted(input[slot=hidden-form-input]){margin:0 !important;opacity:0 !important;outline:none !important;padding:0 !important;position:absolute !important;inset:0 !important;transform:none !important;-webkit-appearance:none !important;z-index:-1 !important}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}:host([hidden]){display:none}[hidden]{display:none}`,vme=Ct(class extends It{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteTextAreaInput=$e(this,"calciteTextAreaInput",7),this.calciteTextAreaChange=$e(this,"calciteTextAreaChange",7),this.guid=Oc(),this.handleInput=e=>{this.value=e.target.value,this.calciteTextAreaInput.emit()},this.handleChange=()=>{this.calciteTextAreaChange.emit()},this.contentSlotChangeHandler=()=>{this.value||this.el.childNodes.forEach(i=>{i.nodeName==="#text"&&(this.value=i.nodeValue.trim())})},this.renderCharacterLimit=()=>this.maxLength?(this.localizedCharacterLengthObj=this.getLocalizedCharacterLength(),k("span",{class:dn.characterLimit},k("span",{class:{[dn.characterOverLimit]:this.isCharacterLimitExceeded()}},this.localizedCharacterLengthObj.currentLength),"/",this.localizedCharacterLengthObj.maxLength)):null,this.resizeObserver=ii("resize",async()=>{await R2(this);const{textAreaHeight:e,textAreaWidth:i,elHeight:n,elWidth:r,footerHeight:s,footerWidth:o}=this.getHeightAndWidthOfElements();o>0&&o!==i&&(this.footerEl.style.width=`${i}px`),(r!==i||n!==e+(s||0))&&this.setHeightAndWidthToAuto()}),this.setTextAreaEl=e=>{this.textAreaEl=e,this.resizeObserver.observe(e)},this.setHeightAndWidthToAuto=mme(()=>{(this.resize==="vertical"||this.resize==="both")&&(this.el.style.height="auto"),(this.resize==="horizontal"||this.resize==="both")&&(this.el.style.width="auto")},gme,{leading:!1}),this.autofocus=!1,this.columns=void 0,this.disabled=!1,this.form=void 0,this.groupSeparator=!1,this.label=void 0,this.maxLength=void 0,this.messages=void 0,this.name=void 0,this.numberingSystem=void 0,this.placeholder=void 0,this.readOnly=!1,this.required=!1,this.resize="both",this.rows=void 0,this.scale="m",this.status="idle",this.value=void 0,this.wrap="soft",this.messageOverrides=void 0,this.defaultMessages=void 0,this.endSlotHasElements=void 0,this.startSlotHasElements=void 0,this.effectiveLocale="",this.localizedCharacterLengthObj=void 0}onMessagesChange(){}connectedCallback(){Lc(this),Gp(this),Ok(this),Ps(this),Fs(this)}async componentWillLoad(){zo(this),await Ns(this)}componentDidLoad(){jo(this)}componentDidRender(){Ac(this),this.setTextAreaHeight()}disconnectedCallback(){var e;Pc(this),Sw(this),Ak(this),Rs(this),zs(this),(e=this.resizeObserver)==null||e.disconnect()}render(){const e=this.startSlotHasElements||this.endSlotHasElements||!!this.maxLength;return k(Pn,null,k("textarea",{"aria-describedby":this.guid,"aria-invalid":Ui(this.isCharacterLimitExceeded()),"aria-label":fg(this),autofocus:this.autofocus,class:{[dn.readOnly]:this.readOnly,[dn.textAreaInvalid]:this.isCharacterLimitExceeded(),[dn.footerSlotted]:this.endSlotHasElements&&this.startSlotHasElements,[dn.blockSizeFull]:!e,[dn.borderColor]:!e},cols:this.columns,disabled:this.disabled,name:this.name,onChange:this.handleChange,onInput:this.handleInput,placeholder:this.placeholder,readonly:this.readOnly,required:this.required,rows:this.rows,value:this.value,wrap:this.wrap,ref:this.setTextAreaEl}),k("span",{class:{[dn.content]:!0}},k("slot",{onSlotchange:this.contentSlotChangeHandler})),k("footer",{class:{[dn.footer]:!0,[dn.readOnly]:this.readOnly,[dn.hide]:!e},ref:i=>this.footerEl=i},k("div",{class:{[dn.container]:!0,[dn.footerEndSlotOnly]:!this.startSlotHasElements&&this.endSlotHasElements}},k("slot",{name:gA.footerStart,onSlotchange:i=>this.startSlotHasElements=ui(i)}),k("slot",{name:gA.footerEnd,onSlotchange:i=>this.endSlotHasElements=ui(i)})),this.renderCharacterLimit()),k(Lk,{component:this}),this.isCharacterLimitExceeded()&&k("span",{"aria-hidden":!0,"aria-live":"polite",class:dn.assistiveText,id:this.guid},this.replacePlaceHoldersInMessages()))}async setFocus(){await Go(this),this.textAreaEl.focus()}async selectText(){await R2(this),this.textAreaEl.select()}effectiveLocaleChange(){Ds(this,this.effectiveLocale)}onFormReset(){this.value=this.defaultValue}onLabelClick(){this.setFocus()}getLocalizedCharacterLength(){const e=this.value?this.value.length.toString():"0",i=this.maxLength.toString();return this.numberingSystem==="latn"?{currentLength:e,maxLength:i}:(Yi.numberFormatOptions={locale:this.effectiveLocale,numberingSystem:this.numberingSystem,signDisplay:"never",useGrouping:this.groupSeparator},{currentLength:Yi.localize(e),maxLength:Yi.localize(i)})}syncHiddenFormInput(e){e.setCustomValidity(""),this.isCharacterLimitExceeded()&&e.setCustomValidity(this.replacePlaceHoldersInMessages())}setTextAreaHeight(){const{textAreaHeight:e,elHeight:i,footerHeight:n}=this.getHeightAndWidthOfElements();n>0&&e+n!=i&&(this.textAreaEl.style.height=`${i-n}px`)}getHeightAndWidthOfElements(){var a;const{height:e,width:i}=this.textAreaEl.getBoundingClientRect(),{height:n,width:r}=this.el.getBoundingClientRect(),{height:s,width:o}=(a=this.footerEl)==null?void 0:a.getBoundingClientRect();return{textAreaHeight:e,textAreaWidth:i,elHeight:n,elWidth:r,footerHeight:s,footerWidth:o}}replacePlaceHoldersInMessages(){return this.messages.tooLong.replace("{maxLength}",this.localizedCharacterLengthObj.maxLength).replace("{currentLength}",this.localizedCharacterLengthObj.currentLength)}isCharacterLimitExceeded(){var e;return((e=this.value)==null?void 0:e.length)>this.maxLength}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return yme}},[1,"calcite-text-area",{autofocus:[516],columns:[514],disabled:[516],form:[513],groupSeparator:[516,"group-separator"],label:[1],maxLength:[514,"max-length"],messages:[1040],name:[513],numberingSystem:[1,"numbering-system"],placeholder:[1],readOnly:[516,"read-only"],required:[516],resize:[513],rows:[514],scale:[513],status:[513],value:[1025],wrap:[513],messageOverrides:[1040],defaultMessages:[32],endSlotHasElements:[32],startSlotHasElements:[32],effectiveLocale:[32],localizedCharacterLengthObj:[32],setFocus:[64],selectText:[64]},void 0,{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function bme(){if(typeof customElements>"u")return;["calcite-text-area"].forEach(e=>{switch(e){case"calcite-text-area":customElements.get(e)||customElements.define(e,vme);break}})}bme();function wme(t){let e,i,n,r,s,o,a,l,u,p,f,m,g,y,v,b,_,$,x,E,C,M,N,G,U,B,H,L,R,D,Y,le,re,oe,ke,it,wt,jt,Ti,on,Ho,Fr,Rn,ay,Vo,Od,Bo,Ad,ly,Ld,cy,Qa,uy,zr,jr,dy,Pd,Wp,hy;return{c(){e=fe("div"),i=fe("h3"),i.textContent="Map",n=ci(),r=fe("calcite-label"),s=bo(`Zoom level
    `),o=fe("calcite-input"),a=fe("div"),l=fe("calcite-button"),p=ci(),f=fe("calcite-tooltip"),f.textContent="Copy zoom level",m=ci(),g=fe("calcite-label"),y=bo(`Scale
    `),v=fe("calcite-input"),b=fe("div"),_=fe("calcite-button"),x=ci(),E=fe("calcite-tooltip"),E.textContent="Copy scale",C=ci(),M=fe("calcite-tabs"),N=fe("calcite-tab-nav"),N.innerHTML='<calcite-tab-title selected="">WGS84 (4326)</calcite-tab-title> <calcite-tab-title>WebMercator (102100)</calcite-tab-title>',G=ci(),U=fe("calcite-tab"),B=fe("calcite-label"),H=bo(`Center
        `),L=fe("calcite-input"),R=fe("div"),D=fe("calcite-button"),le=ci(),re=fe("calcite-tooltip"),re.textContent="Copy WGS center point",oe=ci(),ke=fe("calcite-label"),it=bo(`Extent
        `),wt=fe("calcite-text-area"),jt=fe("calcite-button"),jt.innerHTML="",Ti=ci(),on=fe("calcite-tooltip"),on.textContent="Copy scale",Ho=ci(),Fr=fe("calcite-tab"),Rn=fe("calcite-label"),ay=bo(`Center
        `),Vo=fe("calcite-input"),Od=fe("div"),Bo=fe("calcite-button"),ly=ci(),Ld=fe("calcite-tooltip"),Ld.textContent="Copy WGS84 center point",cy=ci(),Qa=fe("calcite-label"),uy=bo(`Extent
        `),zr=fe("calcite-text-area"),jr=fe("calcite-button"),jr.innerHTML="",dy=ci(),Pd=fe("calcite-tooltip"),Pd.textContent="Copy Web Mercator extent",Q(l,"data-copy-id","zoomInput"),Q(l,"data-copy-msg","Zoom level"),Q(l,"id","zoomBtn"),Q(l,"icon-start","copy-to-clipboard"),Sn(a,"slot","action"),Q(o,"id","zoomInput"),Q(o,"read-only",""),Q(o,"value",u=t[0].zoom||0),Q(f,"reference-element","zoomBtn"),Q(_,"id","scaleBtn"),Q(_,"data-copy-id","scaleInput"),Q(_,"data-copy-msg","Scale level"),Q(_,"icon-start","copy-to-clipboard"),Sn(b,"slot","action"),Q(v,"id","scaleInput"),Q(v,"read-only",""),Q(v,"value",$=t[0].scale),Q(E,"reference-element","scaleBtn"),Q(N,"slot","title-group"),Q(D,"data-copy-id","wgsCenterCntrl"),Q(D,"data-copy-msg","WGS84 center point"),Q(D,"id","wgsCenterBtn"),Q(D,"icon-start","copy-to-clipboard"),Sn(R,"slot","action"),Q(L,"id","wgsCenterCntrl"),Q(L,"value",Y=`${t[1].x.toFixed(4)}, ${t[1].y.toFixed(4)}`),Q(L,"read-only",""),Q(re,"reference-element","wgsCenterBtn"),Q(jt,"data-copy-id","wgsExtentCntrl"),Q(jt,"data-copy-msg","WGS84 extent"),Q(jt,"id","wgsExtentBtn"),Q(jt,"slot","footer-end"),Q(jt,"icon-start","copy-to-clipboard"),Q(wt,"id","wgsExtentCntrl"),Q(wt,"name","wgsExtentCntrl"),Q(wt,"rows","10"),Q(wt,"read-only",""),Q(wt,"value",t[2]),Q(on,"reference-element","wgsExtentBtn"),Q(U,"selected",""),Q(Bo,"data-copy-id","wmCenterCntrl"),Q(Bo,"data-copy-msg","Web mercator center point"),Q(Bo,"id","copyCenterBtn"),Q(Bo,"icon-start","copy-to-clipboard"),Sn(Od,"slot","action"),Q(Vo,"id","wmCenterCntrl"),Q(Vo,"read-only",""),Q(Vo,"value",Ad=`${t[0].center.x.toFixed(4)}, ${t[0].center.y.toFixed(4)}`),Q(Ld,"reference-element","copyCenterBtn"),Q(jr,"data-copy-id","wmExtentCntrl"),Q(jr,"data-copy-msg","Web mercator extent"),Q(jr,"id","wmExtentBtn"),Q(jr,"slot","footer-end"),Q(jr,"icon-start","copy-to-clipboard"),Q(zr,"id","wmExtentCntrl"),Q(zr,"name","wmExtentCntrl"),Q(zr,"rows","10"),Q(zr,"read-only",""),Q(zr,"value",t[3]),Q(Pd,"reference-element","wmExtentBtn"),Q(M,"bordered",""),Q(M,"layout","center"),Sn(e,"class","cntrl-container")},m(an,Gr){Sc(an,e,Gr),ne(e,i),ne(e,n),ne(e,r),ne(r,s),ne(r,o),ne(o,a),ne(a,l),ne(r,p),ne(r,f),ne(e,m),ne(e,g),ne(g,y),ne(g,v),ne(v,b),ne(b,_),ne(g,x),ne(g,E),ne(e,C),ne(e,M),ne(M,N),ne(M,G),ne(M,U),ne(U,B),ne(B,H),ne(B,L),ne(L,R),ne(R,D),ne(B,le),ne(B,re),ne(U,oe),ne(U,ke),ne(ke,it),ne(ke,wt),ne(wt,jt),ne(ke,Ti),ne(ke,on),ne(M,Ho),ne(M,Fr),ne(Fr,Rn),ne(Rn,ay),ne(Rn,Vo),ne(Vo,Od),ne(Od,Bo),ne(Rn,ly),ne(Rn,Ld),ne(Fr,cy),ne(Fr,Qa),ne(Qa,uy),ne(Qa,zr),ne(zr,jr),ne(Qa,dy),ne(Qa,Pd),Wp||(hy=[Gl(l,"click",t[4]),Gl(_,"click",t[4]),Gl(D,"click",t[4]),Gl(jt,"click",t[4]),Gl(Bo,"click",t[4]),Gl(jr,"click",t[4])],Wp=!0)},p(an,[Gr]){Gr&1&&u!==(u=an[0].zoom||0)&&Q(o,"value",u),Gr&1&&$!==($=an[0].scale)&&Q(v,"value",$),Gr&2&&Y!==(Y=`${an[1].x.toFixed(4)}, ${an[1].y.toFixed(4)}`)&&Q(L,"value",Y),Gr&4&&Q(wt,"value",an[2]),Gr&1&&Ad!==(Ad=`${an[0].center.x.toFixed(4)}, ${an[0].center.y.toFixed(4)}`)&&Q(Vo,"value",Ad),Gr&8&&Q(zr,"value",an[3])},i:Dt,o:Dt,d(an){an&&Wa(e),Wp=!1,xp(hy)}}}function _me(t,e,i){let n,r,s,o;Nu(t,Ua,u=>i(0,n=u)),Nu(t,IV,u=>i(1,r=u)),Nu(t,AV,u=>i(2,s=u)),Nu(t,OV,u=>i(3,o=u));const a=bL();return[n,r,s,o,u=>{const p=document.getElementById(u.target.dataset.copyId);navigator.clipboard.writeText(p.value).then(()=>{a("copy",{label:u.target.dataset.copyMsg,value:p.value,type:"success"})},f=>{console.log("error copying to cp")})}]}class Sme extends Ep{constructor(e){super(),Tp(this,e,_me,wme,bd,{})}}var yA,vA,z2={exports:{}};z2.exports,vA=function(){function t(r,s){function o(){this.constructor=r}o.prototype=s.prototype,r.prototype=new o}function e(r,s,o,a){var l=Error.call(this,r);return Object.setPrototypeOf&&Object.setPrototypeOf(l,e.prototype),l.expected=s,l.found=o,l.location=a,l.name="SyntaxError",l}function i(r,s,o){return o=o||" ",r.length>s?r:(s-=r.length,r+(o+=o.repeat(s)).slice(0,s))}function n(r,s){var o,a={},l=(s=s!==void 0?s:{}).grammarSource,u={start:wM},p=wM,f="none",m=")",g=",",y="(",v="%",b="px",_="cm",$="mm",x="in",E="pt",C="pc",M="deg",N="rad",G="grad",U="turn",B="#",H=".",L="e",R=/^[ \t\n\r]/,D=/^[a-z\-]/,Y=/^[0-9a-fA-F]/,le=/^[+\-]/,re=/^[0-9]/,oe=qo("none"),ke=ri("none",!1),it=ri(")",!1),wt=ri(",",!1),jt=qo("whitespace"),Ti=Zp([" ","	",`
`,"\r"],!1,!1),on=qo("function"),Ho=ri("(",!1),Fr=qo("identifier"),Rn=Zp([["a","z"],"-"],!1,!1),ay=qo("percentage"),Vo=ri("%",!1),Od=qo("length"),Bo=ri("px",!1),Ad=ri("cm",!1),ly=ri("mm",!1),Ld=ri("in",!1),cy=ri("pt",!1),Qa=ri("pc",!1),uy=qo("angle"),zr=ri("deg",!1),jr=ri("rad",!1),dy=ri("grad",!1),Pd=ri("turn",!1),Wp=qo("number"),hy=qo("color"),an=ri("#",!1),Gr=Zp([["0","9"],["a","f"],["A","F"]],!1,!1),yM=Zp(["+","-"],!1,!1),el=Zp([["0","9"]],!1,!1),B9=ri(".",!1),q9=ri("e",!1),W9=function(){return[]},Z9=function(T,j){return{type:"function",name:T,parameters:j||[]}},K9=function(T,j){return j.length>0?MG(T,j,3):[T]},J9=function(T){return{type:"quantity",value:T.value,unit:T.unit}},Y9=function(T){return{type:"color",colorType:T.type,value:T.value}},X9=function(T){return T},Q9=function(){return fy()},eG=function(T){return{value:T,unit:"%"}},tG=function(T){return{value:T,unit:"px"}},iG=function(T){return{value:T,unit:"cm"}},nG=function(T){return{value:T,unit:"mm"}},rG=function(T){return{value:T,unit:"in"}},sG=function(T){return{value:T,unit:"pt"}},oG=function(T){return{value:T,unit:"pc"}},aG=function(T){return{value:T,unit:"deg"}},lG=function(T){return{value:T,unit:"rad"}},cG=function(T){return{value:T,unit:"grad"}},uG=function(T){return{value:T,unit:"turn"}},dG=function(T){return{value:T,unit:null}},hG=function(){return{type:"hex",value:fy()}},pG=function(T){return{type:"function",value:T}},fG=function(){return{type:"named",value:fy()}},mG=function(){return parseFloat(fy())},P=0,_t=0,py=[{line:1,column:1}],Gs=0,Uw=[],ae=0;if("startRule"in s){if(!(s.startRule in u))throw new Error(`Can't start parsing from rule "`+s.startRule+'".');p=u[s.startRule]}function fy(){return r.substring(_t,P)}function ri(T,j){return{type:"literal",text:T,ignoreCase:j}}function Zp(T,j,W){return{type:"class",parts:T,inverted:j,ignoreCase:W}}function gG(){return{type:"end"}}function qo(T){return{type:"other",description:T}}function vM(T){var j,W=py[T];if(W)return W;for(j=T-1;!py[j];)j--;for(W={line:(W=py[j]).line,column:W.column};j<T;)r.charCodeAt(j)===10?(W.line++,W.column=1):W.column++,j++;return py[T]=W,W}function bM(T,j,W){var Te=vM(T),Gt=vM(j),We={source:l,start:{offset:T,line:Te.line,column:Te.column},end:{offset:j,line:Gt.line,column:Gt.column}};return W&&l&&typeof l.offset=="function"&&(We.start=l.offset(We.start),We.end=l.offset(We.end)),We}function be(T){P<Gs||(P>Gs&&(Gs=P,Uw=[]),Uw.push(T))}function yG(T,j,W){return new e(e.buildMessage(T,j),T,j,W)}function wM(){var T;return(T=vG())===a&&(T=bG()),T}function vG(){var T,j;return ae++,T=P,si(),r.substr(P,4)===f?(j=f,P+=4):(j=a,ae===0&&be(ke)),j!==a?(si(),_t=T,T=W9()):(P=T,T=a),ae--,T===a&&ae===0&&be(oe),T}function bG(){var T,j;if(T=[],(j=Hw())!==a)for(;j!==a;)T.push(j),j=Hw();else T=a;return T}function Hw(){var T,j,W,Te;return T=P,si(),(j=_G())!==a?(si(),(W=wG())===a&&(W=null),si(),r.charCodeAt(P)===41?(Te=m,P++):(Te=a,ae===0&&be(it)),Te!==a?(si(),_t=T,T=Z9(j,W)):(P=T,T=a)):(P=T,T=a),T}function wG(){var T,j,W,Te,Gt,We,sr,my;if(T=P,(j=Vw())!==a){for(W=[],Te=P,Gt=si(),r.charCodeAt(P)===44?(We=g,P++):(We=a,ae===0&&be(wt)),We===a&&(We=null),sr=si(),(my=Vw())!==a?Te=Gt=[Gt,We,sr,my]:(P=Te,Te=a);Te!==a;)W.push(Te),Te=P,Gt=si(),r.charCodeAt(P)===44?(We=g,P++):(We=a,ae===0&&be(wt)),We===a&&(We=null),sr=si(),(my=Vw())!==a?Te=Gt=[Gt,We,sr,my]:(P=Te,Te=a);_t=T,T=K9(j,W)}else P=T,T=a;return T}function Vw(){var T,j;return T=P,(j=SG())===a&&(j=$G())===a&&(j=xG())===a&&(j=TG()),j!==a&&(_t=T,j=J9(j)),(T=j)===a&&(T=P,(j=EG())!==a&&(_t=T,j=Y9(j)),T=j),T}function si(){var T,j;for(ae++,T=[],R.test(r.charAt(P))?(j=r.charAt(P),P++):(j=a,ae===0&&be(Ti));j!==a;)T.push(j),R.test(r.charAt(P))?(j=r.charAt(P),P++):(j=a,ae===0&&be(Ti));return ae--,j=a,ae===0&&be(jt),T}function _G(){var T,j,W;return ae++,T=P,(j=_M())!==a?(r.charCodeAt(P)===40?(W=y,P++):(W=a,ae===0&&be(Ho)),W!==a?(_t=T,T=X9(j)):(P=T,T=a)):(P=T,T=a),ae--,T===a&&(j=a,ae===0&&be(on)),T}function _M(){var T,j,W;if(ae++,T=P,j=[],D.test(r.charAt(P))?(W=r.charAt(P),P++):(W=a,ae===0&&be(Rn)),W!==a)for(;W!==a;)j.push(W),D.test(r.charAt(P))?(W=r.charAt(P),P++):(W=a,ae===0&&be(Rn));else j=a;return j!==a&&(_t=T,j=Q9()),ae--,(T=j)===a&&(j=a,ae===0&&be(Fr)),T}function SG(){var T,j,W;return ae++,T=P,si(),(j=rr())!==a?(r.charCodeAt(P)===37?(W=v,P++):(W=a,ae===0&&be(Vo)),W!==a?(_t=T,T=eG(j)):(P=T,T=a)):(P=T,T=a),ae--,T===a&&ae===0&&be(ay),T}function $G(){var T,j,W;return ae++,T=P,si(),(j=rr())!==a?(r.substr(P,2)===b?(W=b,P+=2):(W=a,ae===0&&be(Bo)),W!==a?(_t=T,T=tG(j)):(P=T,T=a)):(P=T,T=a),T===a&&(T=P,si(),(j=rr())!==a?(r.substr(P,2)===_?(W=_,P+=2):(W=a,ae===0&&be(Ad)),W!==a?(_t=T,T=iG(j)):(P=T,T=a)):(P=T,T=a),T===a&&(T=P,si(),(j=rr())!==a?(r.substr(P,2)===$?(W=$,P+=2):(W=a,ae===0&&be(ly)),W!==a?(_t=T,T=nG(j)):(P=T,T=a)):(P=T,T=a),T===a&&(T=P,si(),(j=rr())!==a?(r.substr(P,2)===x?(W=x,P+=2):(W=a,ae===0&&be(Ld)),W!==a?(_t=T,T=rG(j)):(P=T,T=a)):(P=T,T=a),T===a&&(T=P,si(),(j=rr())!==a?(r.substr(P,2)===E?(W=E,P+=2):(W=a,ae===0&&be(cy)),W!==a?(_t=T,T=sG(j)):(P=T,T=a)):(P=T,T=a),T===a&&(T=P,si(),(j=rr())!==a?(r.substr(P,2)===C?(W=C,P+=2):(W=a,ae===0&&be(Qa)),W!==a?(_t=T,T=oG(j)):(P=T,T=a)):(P=T,T=a)))))),ae--,T===a&&ae===0&&be(Od),T}function xG(){var T,j,W;return ae++,T=P,(j=rr())!==a?(r.substr(P,3)===M?(W=M,P+=3):(W=a,ae===0&&be(zr)),W!==a?(_t=T,T=aG(j)):(P=T,T=a)):(P=T,T=a),T===a&&(T=P,(j=rr())!==a?(r.substr(P,3)===N?(W=N,P+=3):(W=a,ae===0&&be(jr)),W!==a?(_t=T,T=lG(j)):(P=T,T=a)):(P=T,T=a),T===a&&(T=P,(j=rr())!==a?(r.substr(P,4)===G?(W=G,P+=4):(W=a,ae===0&&be(dy)),W!==a?(_t=T,T=cG(j)):(P=T,T=a)):(P=T,T=a),T===a&&(T=P,(j=rr())!==a?(r.substr(P,4)===U?(W=U,P+=4):(W=a,ae===0&&be(Pd)),W!==a?(_t=T,T=uG(j)):(P=T,T=a)):(P=T,T=a)))),ae--,T===a&&(j=a,ae===0&&be(uy)),T}function TG(){var T,j;return ae++,T=P,si(),(j=rr())!==a?(_t=T,T=dG(j)):(P=T,T=a),ae--,T===a&&ae===0&&be(Wp),T}function EG(){var T,j,W,Te;if(ae++,T=P,r.charCodeAt(P)===35?(j=B,P++):(j=a,ae===0&&be(an)),j!==a){if(W=[],Y.test(r.charAt(P))?(Te=r.charAt(P),P++):(Te=a,ae===0&&be(Gr)),Te!==a)for(;Te!==a;)W.push(Te),Y.test(r.charAt(P))?(Te=r.charAt(P),P++):(Te=a,ae===0&&be(Gr));else W=a;W!==a?(_t=T,T=hG()):(P=T,T=a)}else P=T,T=a;return T===a&&(T=P,(j=Hw())!==a&&(_t=T,j=pG(j)),(T=j)===a&&(T=P,(j=_M())!==a&&(_t=T,j=fG()),T=j)),ae--,T===a&&(j=a,ae===0&&be(hy)),T}function rr(){var T,j,W,Te,Gt,We,sr;for(T=P,le.test(r.charAt(P))?(r.charAt(P),P++):ae===0&&be(yM),j=P,W=[],re.test(r.charAt(P))?(Te=r.charAt(P),P++):(Te=a,ae===0&&be(el));Te!==a;)W.push(Te),re.test(r.charAt(P))?(Te=r.charAt(P),P++):(Te=a,ae===0&&be(el));if(r.charCodeAt(P)===46?(Te=H,P++):(Te=a,ae===0&&be(B9)),Te!==a){if(Gt=[],re.test(r.charAt(P))?(We=r.charAt(P),P++):(We=a,ae===0&&be(el)),We!==a)for(;We!==a;)Gt.push(We),re.test(r.charAt(P))?(We=r.charAt(P),P++):(We=a,ae===0&&be(el));else Gt=a;Gt!==a?j=W=[W,Te,Gt]:(P=j,j=a)}else P=j,j=a;if(j===a)if(j=[],re.test(r.charAt(P))?(W=r.charAt(P),P++):(W=a,ae===0&&be(el)),W!==a)for(;W!==a;)j.push(W),re.test(r.charAt(P))?(W=r.charAt(P),P++):(W=a,ae===0&&be(el));else j=a;if(j!==a){if(W=P,r.charCodeAt(P)===101?(Te=L,P++):(Te=a,ae===0&&be(q9)),Te!==a){if(le.test(r.charAt(P))?(Gt=r.charAt(P),P++):(Gt=a,ae===0&&be(yM)),Gt===a&&(Gt=null),We=[],re.test(r.charAt(P))?(sr=r.charAt(P),P++):(sr=a,ae===0&&be(el)),sr!==a)for(;sr!==a;)We.push(sr),re.test(r.charAt(P))?(sr=r.charAt(P),P++):(sr=a,ae===0&&be(el));else We=a;We!==a?W=Te=[Te,Gt,We]:(P=W,W=a)}else P=W,W=a;W===a&&(W=null),_t=T,T=mG()}else P=T,T=a;return T}function kG(T,j){return T.map(function(W){return W[j]})}function MG(T,j,W){return[T].concat(kG(j,W))}if((o=p())!==a&&P===r.length)return o;throw o!==a&&P<r.length&&be(gG()),yG(Uw,Gs<r.length?r.charAt(Gs):null,Gs<r.length?bM(Gs,Gs+1):bM(Gs,Gs))}return t(e,Error),e.prototype.format=function(r){var s="Error: "+this.message;if(this.location){var o,a=null;for(o=0;o<r.length;o++)if(r[o].source===this.location.source){a=r[o].text.split(/\r\n|\n|\r/g);break}var l=this.location.start,u=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(l):l,p=this.location.source+":"+u.line+":"+u.column;if(a){var f=this.location.end,m=i("",u.line.toString().length," "),g=a[l.line-1],y=(l.line===f.line?f.column:g.length+1)-l.column||1;s+=`
 --> `+p+`
`+m+` |
`+u.line+" | "+g+`
`+m+" | "+i("",l.column-1," ")+i("",y,"^")}else s+=`
 at `+p}return s},e.buildMessage=function(r,s){var o={literal:function(g){return'"'+l(g.text)+'"'},class:function(g){var y=g.parts.map(function(v){return Array.isArray(v)?u(v[0])+"-"+u(v[1]):u(v)});return"["+(g.inverted?"^":"")+y.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(g){return g.description}};function a(g){return g.charCodeAt(0).toString(16).toUpperCase()}function l(g){return g.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(y){return"\\x0"+a(y)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(y){return"\\x"+a(y)})}function u(g){return g.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(y){return"\\x0"+a(y)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(y){return"\\x"+a(y)})}function p(g){return o[g.type](g)}function f(g){var y,v,b=g.map(p);if(b.sort(),b.length>0){for(y=1,v=1;y<b.length;y++)b[y-1]!==b[y]&&(b[v]=b[y],v++);b.length=v}switch(b.length){case 1:return b[0];case 2:return b[0]+" or "+b[1];default:return b.slice(0,-1).join(", ")+", or "+b[b.length-1]}}function m(g){return g?'"'+l(g)+'"':"end of input"}return"Expected "+f(r)+" but "+m(s)+" found."},{SyntaxError:e,parse:n}},(yA=z2).exports&&(yA.exports=vA());var $me=z2.exports;function mj(t){if(!t||t.length===0)return null;if(typeof t=="string"){const i=bA(t);return i&&i.length!==0?i:null}const e=t.map(i=>{if(!Number.isFinite(i.scale)||i.scale<=0)throw new F("effect:invalid-scale","scale must be finite and greater than 0",{stop:i});return{scale:i.scale,effects:bA(i.value)}});e.sort((i,n)=>n.effects.length-i.effects.length);for(let i=0;i<e.length-1;i++){if(!fee(e[i].effects,e[i+1].effects))throw new F("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:e[i].effects,b:e[i+1].effects});mee(e[i].effects,e[i+1].effects)}return e.sort((i,n)=>n.scale-i.scale),e}function bA(t){let e;if(!t)return[];try{e=$me.parse(t)}catch(i){throw new F("effect:invalid-syntax","Invalid effect syntax",{value:t,error:i})}return e.map(i=>xme(i))}function xme(t){try{switch(t.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return Tme(t);case"opacity":return Eme(t);case"hue-rotate":return kme(t);case"blur":return Mme(t);case"drop-shadow":return Cme(t);case"bloom":return Ime(t)}}catch(e){throw e.details.filter=t,e}throw new F("effect:unknown-effect",`Effect '${t.name}' is not supported`,{effect:t})}function Tme(t){let e=1;return Up(t.parameters,1),t.parameters.length===1&&(e=ms(t.parameters[0])),new U$(t.name,e)}function Eme(t){let e=1;return Up(t.parameters,1),t.parameters.length===1&&(e=ms(t.parameters[0])),new ND(e)}function kme(t){let e=0;return Up(t.parameters,1),t.parameters.length===1&&(e=Nme(t.parameters[0])),new PD(e)}function Mme(t){let e=0;return Up(t.parameters,1),t.parameters.length===1&&(e=Bk(t.parameters[0]),iy(e,t.parameters[0])),new CD(e)}function Cme(t){const e=[];let i=null;for(const n of t.parameters)if(n.type==="color"){if(e.length&&Object.freeze(e),i)throw new F("effect:type-error","Accepts only one color",{});i=Dme(n)}else{const r=Bk(n);if(Object.isFrozen(e))throw new F("effect:type-error","<length> parameters not consecutive",{lengths:e});e.push(r),e.length===3&&iy(r,n)}if(e.length<2||e.length>3)throw new F("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${e.length}}`,{lengths:e});return new AD(e[0],e[1],e[2]||0,i||gj("black"))}function Ime(t){let e=1,i=0,n=0;return Up(t.parameters,3),t.parameters[0]&&(e=ms(t.parameters[0])),t.parameters[1]&&(i=Bk(t.parameters[1]),iy(i,t.parameters[1])),t.parameters[2]&&(n=ms(t.parameters[2])),new kD(e,i,n)}function Up(t,e){if(t.length>e)throw new F("effect:type-error",`Function supports up to ${e} parameters, Actual: ${t.length}`,{parameters:t})}function Ew(t){if(t.type==="color")return"<color>";if(t.unit){if(t.unit in Vk)return"<length>";if(t.unit in Hk)return"<angle>";if(t.unit==="%")return"<percentage>"}return"<double>"}function iy(t,e){if(t<0)throw new F("effect:type-error",`Negative values are not allowed, Actual: ${t}`,{term:e})}function Ome(t){if(t.type!=="quantity"||t.unit!==null)throw new F("effect:type-error",`Expected <double>, Actual: ${Ew(t)}`,{term:t})}function Ame(t){if(t.type!=="quantity"||t.unit!==null&&t.unit!=="%")throw new F("effect:type-error",`Expected <double> or <percentage>, Actual: ${Ew(t)}`,{term:t})}const Hk={deg:1,grad:.9,rad:180/Math.PI,turn:360};function Lme(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&Hk[t.unit]!=null))throw new F("effect:type-error",`Expected <angle>, Actual: ${Ew(t)}`,{term:t})}const Vk={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function Pme(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&Vk[t.unit]!=null))throw new F("effect:type-error",`Expected <length>, Actual: ${Ew(t)}`,{term:t})}function ms(t){Ame(t);const e=t.value;return iy(e,t),t.unit==="%"?.01*e:e}function Rme(t){return Ome(t),iy(t.value,t),t.value}function Nme(t){return Lme(t),t.value*Hk[t.unit]||0}function Bk(t){return Pme(t),t.value*Vk[t.unit]||0}function Dme(t){switch(t.colorType){case"hex":return nQ(t.value);case"named":return gj(t.value);case"function":return jme(t.value)}}function gj(t){if(!pD(t))throw new F("effect:unknown-color",`color '${t}' isn't valid`,{namedColor:t});return iQ(t)}const Fme=/^rgba?/i,zme=/^hsla?/i;function jme(t){if(Up(t.parameters,4),Fme.test(t.name))return[ms(t.parameters[0]),ms(t.parameters[1]),ms(t.parameters[2]),t.parameters[3]?ms(t.parameters[3]):1];if(zme.test(t.name))return fD(Rme(t.parameters[0]),ms(t.parameters[1]),ms(t.parameters[2]),t.parameters[3]?ms(t.parameters[3]):1);throw new F("effect:syntax-error",`Invalid color function '${t.name}'`,{colorFunction:t})}function Gme(t,e,i){var n;try{return Vme(t)}catch(r){(n=i==null?void 0:i.messages)==null||n.push(r)}return null}function Ume(t,e,i,n){try{const r=Hme(t);wd(i,r,e)}catch(r){n.messages&&n.messages.push(r)}}function Hme(t){const e=mj(t);return e?gee(e)?e.map(i=>i.toJSON()):e.map(({scale:i,effects:n})=>({scale:i,value:n.map(r=>r.toJSON())})):null}function Vme(t){if(!t||t.length===0)return null;if(Bme(t)){const e=[];for(const i of t)e.push({scale:i.scale,value:wA(i.value)});return e}return wA(t)}function Bme(t){const e=t[0];return!!e&&"scale"in e}function wA(t){if(!(t!=null&&t.length))return"";const e=[];for(const i of t){let n=[];switch(i.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":n=[ta(i,"amount")];break;case"blur":n=[ta(i,"radius","pt")];break;case"hue-rotate":n=[ta(i,"angle","deg")];break;case"drop-shadow":n=[ta(i,"xoffset","pt"),ta(i,"yoffset","pt"),ta(i,"blurRadius","pt"),qme(i,"color")];break;case"bloom":n=[ta(i,"strength"),ta(i,"radius","pt"),ta(i,"threshold")]}const r=`${i.type}(${n.filter(Boolean).join(" ")})`;mj(r),e.push(r)}return e.join(" ")}function ta(t,e,i){if(t[e]==null)throw new F("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});return i?t[e]+i:""+t[e]}function qme(t,e){if(t[e]==null)throw new F("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});const i=t[e];return`rgba(${i[0]||0}, ${i[1]||0}, ${i[2]||0}, ${i[3]/255||0})`}const _A={read:{reader:Gme},write:{allowNull:!0,writer:Ume}},Wme=t=>{let e=class extends t{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return c([d({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}})],e.prototype,"blendMode",void 0),c([d({json:{read:!1,write:!1,origins:{"web-map":_A,"portal-item":_A}}})],e.prototype,"effect",void 0),e=c([S("esri.layers.mixins.BlendLayer")],e),e},Zme=t=>{let e=class extends t{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const i={minScale:this.minScale,maxScale:this.maxScale},n=this.parent;n&&"effectiveScaleRange"in n&&Kme(i,n.effectiveScaleRange);const r=this._get("effectiveScaleRange");return r&&r.minScale===i.minScale&&r.maxScale===i.maxScale?r:i}};return c([d({type:Number,nonNullable:!0,json:{write:!0}})],e.prototype,"minScale",void 0),c([d({type:Number,nonNullable:!0,json:{write:!0}})],e.prototype,"maxScale",void 0),c([d({readOnly:!0})],e.prototype,"effectiveScaleRange",null),e=c([S("esri.layers.mixins.ScaleRangeLayer")],e),e};function Kme(t,e){return t.minScale=t.minScale>0?e.minScale>0?Math.min(t.minScale,e.minScale):t.minScale:e.minScale,t.maxScale=t.maxScale>0?e.maxScale>0?Math.max(t.maxScale,e.maxScale):t.maxScale:e.maxScale,t}var j2;let am=j2=class extends ie{constructor(t){super(t)}async collectRequiredFields(t,e){return yc(t,e,this.expression)}clone(){return new j2({expression:this.expression,title:this.title})}equals(t){return this.expression===t.expression&&this.title===t.title}};c([d({type:String,json:{write:!0}})],am.prototype,"expression",void 0),c([d({type:String,json:{write:!0}})],am.prototype,"title",void 0),am=j2=c([S("esri.layers.support.FeatureExpressionInfo")],am);const SA=am,qk={unknown:1,inches:Rt(1,"meters","inches"),feet:Rt(1,"meters","feet"),"us-feet":Rt(1,"meters","us-feet"),yards:Rt(1,"meters","yards"),miles:Rt(1,"meters","miles"),"nautical-miles":Rt(1,"meters","nautical-miles"),millimeters:Rt(1,"meters","millimeters"),centimeters:Rt(1,"meters","centimeters"),decimeters:Rt(1,"meters","decimeters"),meters:Rt(1,"meters","meters"),kilometers:Rt(1,"meters","kilometers"),"decimal-degrees":1/iR(1,"meters",lt.radius)};function YTe(t){return!!t&&qk[t]!=null}function Jme(t){return 1/(qk[t]||1)}function Yme(){const t=Object.keys(qk);return t.sort(),t}const Xme=Yme();var G2;const c0=sn()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),$A=new Kt({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let ya=G2=class extends ie{constructor(t){super(t),this.offset=null}readFeatureExpressionInfo(t,e){return t??(e.featureExpression&&e.featureExpression.value===0?{expression:"0"}:void 0)}writeFeatureExpressionInfo(t,e,i,n){e[i]=t.write({},n),t.expression==="0"&&(e.featureExpression={value:0})}get mode(){const{offset:t,featureExpressionInfo:e}=this;return this._isOverridden("mode")?this._get("mode"):t!=null||e?"relative-to-ground":"on-the-ground"}set mode(t){this._override("mode",t)}set unit(t){this._set("unit",t)}write(t,e){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(t,e):null}clone(){return new G2({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(t){return this.mode===t.mode&&this.offset===t.offset&&this.unit===t.unit&&c7(this.featureExpressionInfo,t.featureExpressionInfo)}};c([d({type:SA,json:{write:!0}})],ya.prototype,"featureExpressionInfo",void 0),c([Ne("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],ya.prototype,"readFeatureExpressionInfo",null),c([Ie("featureExpressionInfo",{featureExpressionInfo:{type:SA},"featureExpression.value":{type:[0]}})],ya.prototype,"writeFeatureExpressionInfo",null),c([d({type:c0.apiValues,nonNullable:!0,json:{type:c0.jsonValues,read:c0.read,write:{writer:c0.write,isRequired:!0}}})],ya.prototype,"mode",null),c([d({type:Number,json:{write:!0}})],ya.prototype,"offset",void 0),c([d({type:Xme,json:{type:String,read:$A.read,write:$A.write}})],ya.prototype,"unit",null),ya=G2=c([S("esri.layers.support.ElevationInfo")],ya);const Qme=ya;let va=class extends Wme(Zme(LE)){constructor(e){super(e),this.elevationInfo=null,this.graphics=new Ju,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(e){return this.graphics.add(e),this}addMany(e){return this.graphics.addMany(e),this}removeAll(){return this.graphics.removeAll(),this}remove(e){this.graphics.remove(e)}removeMany(e){this.graphics.removeMany(e)}on(e,i){return super.on(e,i)}graphicChanged(e){this.emit("graphic-update",e)}};c([d({type:Qme})],va.prototype,"elevationInfo",void 0),c([d(q$(Ju,"graphics"))],va.prototype,"graphics",void 0),c([d({type:["show","hide"]})],va.prototype,"listMode",void 0),c([d()],va.prototype,"screenSizePerspectiveEnabled",void 0),c([d({readOnly:!0})],va.prototype,"type",void 0),c([d({constructOnly:!0})],va.prototype,"internal",void 0),va=c([S("esri.layers.GraphicsLayer")],va);const Wk=va;function oS(t){switch(t){case He.SUPPORTED:break;case He.GRAPHICS_LAYER_MISSING:return"not owned by a graphics layer";case He.GEOMETRY_MISSING:return"no geometry";case He.GEOMETRY_TYPE_UNSUPPORTED:return"the geometry type is not supported";case He.ELEVATION_MODE_UNSUPPORTED:return"the elevation mode is not supported";case He.SYMBOL_TYPE_UNSUPPORTED:return"the symbol type is not supported"}return""}var He;(function(t){t[t.SUPPORTED=0]="SUPPORTED",t[t.GRAPHICS_LAYER_MISSING=1]="GRAPHICS_LAYER_MISSING",t[t.GEOMETRY_MISSING=2]="GEOMETRY_MISSING",t[t.GEOMETRY_TYPE_UNSUPPORTED=3]="GEOMETRY_TYPE_UNSUPPORTED",t[t.ELEVATION_MODE_UNSUPPORTED=4]="ELEVATION_MODE_UNSUPPORTED",t[t.SYMBOL_TYPE_UNSUPPORTED=5]="SYMBOL_TYPE_UNSUPPORTED"})(He||(He={}));function yj(t){return t?Ft:sge}function ege(t,e){return e!=null&&e.mode?e.mode:yj(t).mode}function tge(t,e){return e??yj(t)}function vj(t,e){return ege(t!=null&&t.hasZ,e)}function QTe(t,e){return tge(t!=null&&!!t.hasZ,e)}function kw(t){const e=Kk(t);return vj(t.geometry,e)}function eEe(t){const e=Kk(t),i=vj(t.geometry,e);return{mode:i,offset:e!=null&&i!=="on-the-ground"?(e.offset??0)*Jme(e.unit??"meters"):0}}function Zk(t){if(kw(t)==="on-the-ground")return!1;const e=Kk(t),i=e!=null&&e.featureExpressionInfo?e.featureExpressionInfo.expression:null;return!(!i||i==="0")}function Kk(t){return t.layer&&"elevationInfo"in t.layer?t.layer.elevationInfo:null}function tEe(t,e,i){if(!(i!=null&&i.mode))return;const n=t.hasZ?t.z:0,r=i.offset!=null?i.offset:0;switch(i.mode){case"absolute-height":return n-r;case"on-the-ground":return 0;case"relative-to-ground":return n-((e.elevationProvider.getElevation(t.x,t.y,n,t.spatialReference,"ground")??0)+r);case"relative-to-scene":return n-((e.elevationProvider.getElevation(t.x,t.y,n,t.spatialReference,"scene")??0)+r)}}function ige(t,e,i,n=null){return wj(t,e.x,e.y,e.hasZ?e.z:0,e.spatialReference,i,n)}function bj(t,e,i,n,r=null){return wj(t,e[0],e[1],e.length>2?e[2]:0,i,n,r)}function wj(t,e,i,n,r,s,o=null){if(s==null)return;const a=o!=null?o.mode:"absolute-height";if(a==="on-the-ground")return 0;const{absoluteZ:l}=nge(e,i,n,r,t,s);return rge(l,e,i,n,r,t,o,a)}function nge(t,e,i,n,r,s){const o=s.offset!=null?s.offset:0;switch(s.mode){case"absolute-height":return{absoluteZ:i+o,elevation:0};case"on-the-ground":{const a=r.elevationProvider.getElevation(t,e,0,n,"ground")??0;return{absoluteZ:a,elevation:a}}case"relative-to-ground":{const a=r.elevationProvider.getElevation(t,e,i,n,"ground")??0;return{absoluteZ:i+a+o,elevation:a}}case"relative-to-scene":{const a=r.elevationProvider.getElevation(t,e,i,n,"scene")??0;return{absoluteZ:i+a+o,elevation:a}}}}function rge(t,e,i,n,r,s,o,a){const l=(o==null?void 0:o.offset)!=null?o.offset:0;switch(a){case"absolute-height":return t-l;case"relative-to-ground":return t-((s.elevationProvider.getElevation(e,i,n,r,"ground")??0)+l);case"relative-to-scene":return t-((s.elevationProvider.getElevation(e,i,n,r,"scene")??0)+l)}}function iEe(t,e){if(e==null)return!1;const{mode:i}=e;return i!=null&&(t==="scene"&&i==="relative-to-scene"||t==="ground"&&i!=="absolute-height")}function nEe(t,e,i){return i&&i.mode!==e?`${t} only support ${e} elevation mode`:null}function rEe(t,e,i){return(i==null?void 0:i.mode)===e?`${t} do not support ${e} elevation mode`:null}function sEe(t,e){return(e==null?void 0:e.featureExpressionInfo)!=null&&e.featureExpressionInfo.expression!=="0"?`${t} do not support featureExpressionInfo`:null}function oEe(t,e){e&&t.warn(".elevationInfo=",e)}const Ft={mode:"absolute-height",offset:0},sge={mode:"on-the-ground",offset:null};function oge(t){var e;if(((e=t.layer)==null?void 0:e.type)!=="graphics")return He.GRAPHICS_LAYER_MISSING;if(t.geometry==null)return He.GEOMETRY_MISSING;switch(t.geometry.type){case"polygon":case"point":case"polyline":case"mesh":break;default:return He.GEOMETRY_TYPE_UNSUPPORTED}return kw(t)!=="on-the-ground"&&Zk(t)?He.ELEVATION_MODE_UNSUPPORTED:He.SUPPORTED}function _j(t){if(!t)return null;if(C1(t)&&t.wkid){const i=rJ[t.wkid];if(i)return i}const e=t.wkt2||t.wkt;if(e){const i=age(e);if(i)return i}return null}function age(t){const e=iJ.exec(t);if(!e||e.length!==2)return null;const i=e[1].split(",");if(!i||i.length<3)return null;const n=parseFloat(i[1]),r=parseFloat(i[2]);return isNaN(n)||isNaN(r)?null:{a:n,f:r===0?0:1/r}}function Mw(t){const e=_j(t??xe.WGS84);if(lge(e))return e;const i=e.a*(1-e.f);return Object.assign(e,{b:i,eSq:1-(i/e.a)**2,radius:(2*e.a+i)/3,densificationRatio:1e4/((2*e.a+i)/3)})}function lge(t){return t!=null&&"b"in t&&"eSq"in t&&"radius"in t}function u0(t,e,i){const{a:n,eSq:r}=Mw(i),s=Math.sqrt(r),o=Math.sin(e[1]*wn),a=n*e[0]*wn;let l;return r>0?l=n*((1-r)*(o/(1-r*(o*o))-1/(2*s)*Math.log((1-s*o)/(1+s*o))))*.5:l=n*o,t[0]=a,t[1]=l,t}function Jk(t){return _j(t)!==null}function aEe(t,e="square-meters"){if(t.some(o=>!Jk(o.spatialReference)))throw new F("geodesic-areas:invalid-spatial-reference","the input geometries spatial reference is not supported");const i=[];for(let o=0;o<t.length;o++){const a=t[o],l=a.spatialReference,{radius:u,densificationRatio:p}=Mw(l),f=u*p;i.push(cge(a,f))}const n=[],r=[0,0],s=[0,0];for(let o=0;o<i.length;o++){const{rings:a,spatialReference:l}=i[o];let u=0;for(let p=0;p<a.length;p++){const f=a[p];u0(r,f[0],l),u0(s,f[f.length-1],l);let m=s[0]*r[1]-r[0]*s[1];for(let g=0;g<f.length-1;g++)u0(r,f[g+1],l),u0(s,f[g],l),m+=s[0]*r[1]-r[0]*s[1];u+=m}u=Rt(u,"square-meters",e),n.push(u/-2)}return n}function lEe(t,e="meters"){if(!t)throw new F("geodesic-lengths:invalid-geometries","the input geometries type is not supported");if(t.some(n=>!Jk(n.spatialReference)))throw new F("geodesic-lengths:invalid-spatial-reference","the input geometries spatial reference is not supported");const i=[];for(let n=0;n<t.length;n++){const r=t[n],{spatialReference:s}=r,o=r.type==="polyline"?r.paths:r.rings;let a=0;for(let l=0;l<o.length;l++){const u=o[l];let p=0;for(let f=1;f<u.length;f++){const m=u[f-1][0],g=u[f][0],y=u[f-1][1],v=u[f][1];if(y!==v||m!==g){const b=new Sj;$j(b,[m,y],[g,v],s),p+=b.distance}}a+=p}a=Rt(a,"meters",e),i.push(a)}return i}function cge(t,e){if(t.type!=="polyline"&&t.type!=="polygon")throw new F("geodesic-densify:invalid-geometry","the input geometry is neither polyline nor polygon");const{spatialReference:i}=t;if(!Jk(i))throw new F("geodesic-densify:invalid-spatial-reference","the input geometry spatial reference is not supported");const n=t.type==="polyline"?t.paths:t.rings,r=[],s=[0,0],o=new Sj;for(const a of n){const l=[];r.push(l),l.push([a[0][0],a[0][1]]);let u,p,f=a[0][0],m=a[0][1];for(let g=0;g<a.length-1;g++){if(u=a[g+1][0],p=a[g+1][1],f===u&&m===p)continue;const y=[f,m];$j(o,[f,m],[u,p],i);const{azimuth:v,distance:b}=o,_=b/e;if(_>1){for(let $=1;$<=_-1;$++)xv(s,y,v,$*e,i),l.push(s.slice(0));xv(s,y,v,(b+Math.floor(_-1)*e)/2,i),l.push(s.slice(0))}xv(s,y,v,b,i),l.push(s.slice(0)),f=s[0],m=s[1]}}return t.type==="polyline"?new Tr({paths:r,spatialReference:i}):new Mn({rings:r,spatialReference:i})}let Sj=class{constructor(e=0,i=void 0,n=void 0){this.distance=e,this.azimuth=i,this.reverseAzimuth=n}};function xv(t,e,i,n,r){const s=e[0],o=e[1],a=s*wn,l=o*wn,u=(i??0)*wn,{a:p,b:f,f:m}=Mw(r),g=Math.sin(u),y=Math.cos(u),v=(1-m)*Math.tan(l),b=1/Math.sqrt(1+v*v),_=v*b,$=Math.atan2(v,y),x=b*g,E=x*x,C=1-E,M=C*(p*p-f*f)/(f*f),N=1+M/16384*(4096+M*(M*(320-175*M)-768)),G=M/1024*(256+M*(M*(74-47*M)-128));let U,B,H,L,R=n/(f*N),D=2*Math.PI;for(;Math.abs(R-D)>1e-12;)H=Math.cos(2*$+R),U=Math.sin(R),B=Math.cos(R),L=G*U*(H+G/4*(B*(2*H*H-1)-G/6*H*(4*U*U-3)*(4*H*H-3))),D=R,R=n/(f*N)+L;const Y=_*U-b*B*y,le=Math.atan2(_*B+b*U*y,(1-m)*Math.sqrt(E+Y*Y)),re=Math.atan2(U*g,b*B-_*U*y),oe=m/16*C*(4+m*(4-3*C)),ke=le/wn,it=(a+(re-(1-oe)*m*x*(R+oe*U*(H+oe*B*(2*H*H-1)))))/wn;return t[0]=it,t[1]=ke,t}function $j(t,e,i,n){const r=e[0]*wn,s=e[1]*wn,o=i[0]*wn,a=i[1]*wn,{a:l,b:u,f:p,radius:f}=Mw(n),m=o-r,g=Math.atan((1-p)*Math.tan(s)),y=Math.atan((1-p)*Math.tan(a)),v=Math.sin(g),b=Math.cos(g),_=Math.sin(y),$=Math.cos(y);let x,E,C,M,N,G,U,B,H,L,R=1e3,D=m;do{if(U=Math.sin(D),B=Math.cos(D),C=Math.sqrt($*U*($*U)+(b*_-v*$*B)*(b*_-v*$*B)),C===0)return t.distance=0,t.azimuth=void 0,t.reverseAzimuth=void 0,t;N=v*_+b*$*B,G=Math.atan2(C,N),H=b*$*U/C,E=1-H*H,M=N-2*v*_/E,isNaN(M)&&(M=0),L=p/16*E*(4+p*(4-3*E)),x=D,D=m+(1-L)*p*H*(G+L*C*(M+L*N*(2*M*M-1)))}while(Math.abs(D-x)>1e-12&&--R>0);if(R===0){const it=f,wt=Math.acos(Math.sin(s)*Math.sin(a)+Math.cos(s)*Math.cos(a)*Math.cos(o-r))*it,jt=o-r,Ti=Math.sin(jt)*Math.cos(a),on=Math.cos(s)*Math.sin(a)-Math.sin(s)*Math.cos(a)*Math.cos(jt),Ho=Math.atan2(Ti,on);return t.azimuth=Ho/wn,t.distance=wt,t.reverseAzimuth=void 0,t}const Y=E*(l*l-u*u)/(u*u),le=Y/1024*(256+Y*(Y*(74-47*Y)-128)),re=u*(1+Y/16384*(4096+Y*(Y*(320-175*Y)-768)))*(G-le*C*(M+le/4*(N*(2*M*M-1)-le/6*M*(4*C*C-3)*(4*M*M-3)))),oe=Math.atan2($*Math.sin(D),b*_-v*$*Math.cos(D)),ke=Math.atan2(b*Math.sin(D),b*_*Math.cos(D)-v*$);return t.azimuth=oe/wn,t.distance=re,t.reverseAzimuth=ke/wn,t}var U2;let Rl=U2=class extends Mn{constructor(...t){super(...t),this.center=null,this.geodesic=!1,this.numberOfPoints=60,this.radius=1e3,this.radiusUnit="meters"}normalizeCtorArgs(t,e){let i;if(t!=null&&t.center)i=t;else{if(t!=null&&t.rings)return super.normalizeCtorArgs(t,e);i={center:t}}return{...super.normalizeCtorArgs(),...i,...e}}initialize(){const t=this.center,e=this.numberOfPoints;if(this.hasZ=(t==null?void 0:t.hasZ)??!1,this.rings.length!==0||!t)return;const i=Rt(this.radius,this.radiusUnit,"meters"),n=t.spatialReference;let r,s="geographic";if(n.isWebMercator?s="webMercator":((n.wkid&&w[n.wkid])!=null||(n.wkt2||n.wkt)&&WT(n.wkt2||n.wkt))&&(s="projected"),this.geodesic){let o;switch(s){case"webMercator":o=Xl(t);break;case"projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case"geographic":o=t}r=this._createGeodesicCircle(o,i,e),s==="webMercator"&&(r=Na(r))}else{let o;s==="webMercator"||s==="projected"?o=i/sR(t.spatialReference):s==="geographic"&&(o=iR(i,"meters",qT(t.spatialReference).radius)),r=this._createPlanarCircle(t,o,e)}this.spatialReference=r.spatialReference,this.addRing(r.rings[0])}clone(){const{center:t,numberOfPoints:e,radius:i,radiusUnit:n,geodesic:r}=this;return new U2({center:t==null?void 0:t.clone(),numberOfPoints:e,radius:i,radiusUnit:n,geodesic:r})}_createGeodesicCircle(t,e,i){let n=0;const r=[];for(;n<360;){const s=[0,0],o=[t.x,t.y];xv(s,o,n,e),this.hasZ&&s.push(t.z),r.push(s),n+=360/i}return r.push(r[0]),new Mn(r)}_createPlanarCircle(t,e,i){const n=[],r=2*Math.PI/i;for(let s=0;s<i;++s){const o=r*s,a=[t.x+Math.cos(-o)*e,t.y+Math.sin(-o)*e];this.hasZ&&a.push(t.z),n.push(a)}return n.push(n[0]),new Mn({spatialReference:t.spatialReference,rings:[n]})}};c([d({type:he})],Rl.prototype,"center",void 0),c([d()],Rl.prototype,"geodesic",void 0),c([d()],Rl.prototype,"numberOfPoints",void 0),c([d()],Rl.prototype,"radius",void 0),c([d()],Rl.prototype,"radiusUnit",void 0),Rl=U2=c([S("esri.geometry.Circle")],Rl);const uge=Rl;function d0(t){return xj(t).result}function uEe(t){return xj(t).geometry}function xj(t){var n;if(((n=t.layer)==null?void 0:n.type)!=="graphics")return{result:He.GRAPHICS_LAYER_MISSING,geometry:null};const{geometry:e}=t;if(e==null)return{result:He.GEOMETRY_MISSING,geometry:null};if(kw(t)!=="on-the-ground"&&Zk(t))return{result:He.ELEVATION_MODE_UNSUPPORTED,geometry:null};const i=e.type;return i!=="point"&&i!=="mesh"&&i!=="polyline"&&(i!=="polygon"||t.geometry instanceof uge)?{result:He.GEOMETRY_TYPE_UNSUPPORTED,geometry:null}:{result:He.SUPPORTED,geometry:e}}function dge(t){var i;if(((i=t.layer)==null?void 0:i.type)!=="graphics")return He.GRAPHICS_LAYER_MISSING;if(t.geometry==null)return He.GEOMETRY_MISSING;switch(t.geometry.type){case"point":break;case"polygon":case"polyline":case"multipoint":case"extent":case"mesh":return He.SUPPORTED;default:return He.GEOMETRY_TYPE_UNSUPPORTED}const e=t.symbol!=null&&t.symbol.type==="point-3d"&&t.symbol.symbolLayers;return!e||!e.some(n=>n.type==="object")?He.SYMBOL_TYPE_UNSUPPORTED:kw(t)!=="on-the-ground"&&Zk(t)?He.ELEVATION_MODE_UNSUPPORTED:He.SUPPORTED}function xA(t,e,i){if(!e||!(t!=null&&t.map))return;const{map:n}=t,r=n.layers.find(s=>s===e);r||n.add(e,i),r&&i!=null&&n.layers.reorder(r,i)}function TA(t,e){const i=(e==null?void 0:e.type)==="subtype-sublayer"?e.parent:e;return t.allLayerViews.find(n=>{const r=n.layer;return r===i||"sublayers"in r&&r.sublayers!=null&&r.sublayers.includes(i)})}const Ut={redo:"r",undo:"z",center:"Alt",constraint:"Shift",cancel:"Escape",delete:["Backspace","Delete"],complete:"Enter",vertexAdd:"f",pan:" "},EA={toggle:"Control"},dEe={enterInputMode:"Tab",commit:"Enter",discard:"Escape",next:"Tab"};let Tv=class extends X{constructor(e){super(e),this.enabled=!1}};c([d({type:Boolean,nonNullable:!0})],Tv.prototype,"enabled",void 0),Tv=c([S("esri.views.interactive.sketch.SketchLabelOptions")],Tv);const Cw=Tv;let Dm=class extends X{constructor(e){super(e),this.mode="absolute-height"}toJSON(){return{mode:this.mode}}};c([d({type:String,nonNullable:!0})],Dm.prototype,"mode",void 0),Dm=c([S("esri.widgets.Sketch.SketchTooltipOptions.ElevationOptions")],Dm);let vn=class extends X{constructor(e){super(e),this.area=!0,this.distance=!0,this.elevation=!0,this.helpMessage=!1,this.orientation=!0,this.radius=!0,this.rotation=!0,this.scale=!0,this.size=!0,this.totalLength=!0}toJSON(){return{area:this.area,distance:this.distance,elevation:this.elevation,helpMessage:this.helpMessage,orientation:this.orientation,radius:this.radius,rotation:this.rotation,scale:this.scale,size:this.size,totalLength:this.totalLength}}};c([d({type:Boolean,nonNullable:!0})],vn.prototype,"area",void 0),c([d({type:Boolean,nonNullable:!0})],vn.prototype,"distance",void 0),c([d({type:Boolean,nonNullable:!0})],vn.prototype,"elevation",void 0),c([d({type:Boolean,nonNullable:!0})],vn.prototype,"helpMessage",void 0),c([d({type:Boolean,nonNullable:!0})],vn.prototype,"orientation",void 0),c([d({type:Boolean,nonNullable:!0})],vn.prototype,"radius",void 0),c([d({type:Boolean,nonNullable:!0})],vn.prototype,"rotation",void 0),c([d({type:Boolean,nonNullable:!0})],vn.prototype,"scale",void 0),c([d({type:Boolean,nonNullable:!0})],vn.prototype,"size",void 0),c([d({type:Boolean,nonNullable:!0})],vn.prototype,"totalLength",void 0),vn=c([S("esri.widgets.Sketch.SketchTooltipOptions.VisibleElements")],vn);let Nl=class extends X{constructor(e){super(e),this.enabled=!1,this.inputEnabled=!1,this.elevation=new Dm,this.visibleElements=new vn,this.visualVariables=null}toJSON(){return{enabled:this.enabled,elevation:this.elevation,visibleElements:this.visibleElements}}};c([d({type:Boolean,nonNullable:!0})],Nl.prototype,"enabled",void 0),c([d({type:Boolean,nonNullable:!0})],Nl.prototype,"inputEnabled",void 0),c([d({type:Dm,nonNullable:!0})],Nl.prototype,"elevation",void 0),c([d({type:vn,nonNullable:!0})],Nl.prototype,"visibleElements",void 0),c([d()],Nl.prototype,"visualVariables",void 0),Nl=c([S("esri.widgets.Sketch.SketchTooltipOptions")],Nl);const Iw=Nl;function td(t,e,i,n){return{x:t,y:e,z:i,hasZ:i!=null,hasM:!1,spatialReference:n,type:"point"}}function gEe(t,e,i){return kn(t,e,i)}function yEe(t){return t}function _c(t,e,i){return kn(t,e,i)}function _p(t){return tr(t)}function ht(t,e,{coordinateHelper:i,elevationInfo:n}){return t?lm(i.vectorToDehydratedPoint(t,hge),e,n):null}function lm(t,e,i){if(t==null)return null;if(e==null)return kn(t.x,t.y,t.z??0);if(e.type==="2d")return kn(t.x,t.y,0);const n=ige(e,t,i,Ft)??0;return kn(t.x,t.y,n)}function vEe(t,e){return td(t[0],t[1],t[2],e)}const hge=td(0,0,0,null);let bs=class extends ie{constructor(){super(...arguments),this.enabled=!0}};c([d({type:Boolean})],bs.prototype,"enabled",void 0),bs=c([S("esri.views.interactive.snapping.Settings.DefaultSnappingAlgorithm")],bs);let dt=class extends ie{constructor(e){super(e),this.lineSnapper=new bs,this.parallelLineSnapper=new bs,this.rightAngleSnapper=new bs,this.rightAngleTriangleSnapper=new bs,this.shortLineThreshold=15,this.distance=5,this.pointThreshold=1e-6,this.intersectionParallelLineThreshold=1e-6,this.parallelLineThreshold=1e-6,this.verticalLineThreshold=.1,this.touchSensitivityMultiplier=1.5,this.pointOnLineThreshold=1e-6,this.orange=new Me([255,127,0]),this.orangeTransparent=new Me([255,127,0,.5]),this.lineHintWidthReference=3,this.lineHintWidthTarget=3,this.lineHintFadedExtensions=.3,this.parallelLineHintWidth=2,this.parallelLineHintLength=24,this.parallelLineHintOffset=1.5,this.rightAngleHintSize=24,this.rightAngleHintOutlineSize=1.5,this.satisfiesConstraintScreenThreshold=1}};c([d({type:bs,constructOnly:!0,nonNullable:!0,json:{write:!0}})],dt.prototype,"lineSnapper",void 0),c([d({type:bs,constructOnly:!0,nonNullable:!0,json:{write:!0}})],dt.prototype,"parallelLineSnapper",void 0),c([d({type:bs,constructOnly:!0,nonNullable:!0,json:{write:!0}})],dt.prototype,"rightAngleSnapper",void 0),c([d({type:bs,constructOnly:!0,nonNullable:!0,json:{write:!0}})],dt.prototype,"rightAngleTriangleSnapper",void 0),c([d({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],dt.prototype,"shortLineThreshold",void 0),c([d({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],dt.prototype,"distance",void 0),c([d({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],dt.prototype,"pointThreshold",void 0),c([d({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],dt.prototype,"intersectionParallelLineThreshold",void 0),c([d({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],dt.prototype,"parallelLineThreshold",void 0),c([d({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],dt.prototype,"verticalLineThreshold",void 0),c([d({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],dt.prototype,"touchSensitivityMultiplier",void 0),c([d({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],dt.prototype,"pointOnLineThreshold",void 0),c([d({type:Me,nonNullable:!0})],dt.prototype,"orange",void 0),c([d({type:Me,nonNullable:!0})],dt.prototype,"orangeTransparent",void 0),c([d({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],dt.prototype,"lineHintWidthReference",void 0),c([d({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],dt.prototype,"lineHintWidthTarget",void 0),c([d({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],dt.prototype,"lineHintFadedExtensions",void 0),c([d({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],dt.prototype,"parallelLineHintWidth",void 0),c([d({type:Number,nonNullable:!0,range:{min:0,max:50},json:{write:!0}})],dt.prototype,"parallelLineHintLength",void 0),c([d({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],dt.prototype,"parallelLineHintOffset",void 0),c([d({type:Number,nonNullable:!0,range:{min:0,max:46},json:{write:!0}})],dt.prototype,"rightAngleHintSize",void 0),c([d({type:Number,nonNullable:!0,range:{min:0,max:6},json:{write:!0}})],dt.prototype,"rightAngleHintOutlineSize",void 0),c([d({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],dt.prototype,"satisfiesConstraintScreenThreshold",void 0),dt=c([S("esri.views.interactive.snapping.Settings.Defaults")],dt);const Fa=new dt;var mi;(function(t){t[t.FEATURE=1]="FEATURE",t[t.SELF=2]="SELF",t[t.ALL=3]="ALL"})(mi||(mi={}));let pge=class{constructor(e){this._allocator=e,this._items=[],this._itemsPtr=0,this._grow()}get(){return this._itemsPtr===0&&tp(()=>this._reset()),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const e=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*kA);this._items.length=Math.min(e,this._items.length),this._itemsPtr=0}_grow(){for(let e=0;e<Math.max(8,Math.min(this._items.length,kA));e++)this._items.push(this._allocator())}};const kA=1024;var H2;(function(t){t[t.KILOBYTES=1024]="KILOBYTES",t[t.MEGABYTES=1048576]="MEGABYTES",t[t.GIGABYTES=1073741824]="GIGABYTES"})(H2||(H2={}));function fge(){return[1,0,0,0,1,0,0,0,1]}function mge(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]}function gge(t,e,i,n,r,s,o,a,l){return[t,e,i,n,r,s,o,a,l]}function Tj(t,e){return new Float64Array(t,e,9)}Object.freeze(Object.defineProperty({__proto__:null,clone:mge,create:fge,createView:Tj,fromValues:gge},Symbol.toStringTag,{value:"Module"}));function Ej(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function yge(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}function vge(t,e,i,n,r,s,o,a,l,u,p,f,m,g,y,v){return[t,e,i,n,r,s,o,a,l,u,p,f,m,g,y,v]}function kj(t,e){return new Float64Array(t,e,16)}const bge=Ej();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:bge,clone:yge,create:Ej,createView:kj,fromValues:vge},Symbol.toStringTag,{value:"Module"}));function Mj(){return[0,0,0,1]}function wge(t){return[t[0],t[1],t[2],t[3]]}function _ge(t,e,i,n){return[t,e,i,n]}function Cj(t,e){return new Float64Array(t,e,4)}const Sge=Mj();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:Sge,clone:wge,create:Mj,createView:Cj,fromValues:_ge},Symbol.toStringTag,{value:"Module"}));let Hp=class _u{constructor(e,i,n){this._itemByteSize=e,this._itemCreate=i,this._buffers=new Array,this._items=new Array,this._itemsPtr=0,this._itemsPerBuffer=Math.ceil(n/this._itemByteSize)}get(){this._itemsPtr===0&&tp(()=>this._reset());const e=Math.floor(this._itemsPtr/this._itemsPerBuffer);for(;this._buffers.length<=e;){const i=new ArrayBuffer(this._itemsPerBuffer*this._itemByteSize);for(let n=0;n<this._itemsPerBuffer;++n)this._items.push(this._itemCreate(i,n*this._itemByteSize));this._buffers.push(i)}return this._items[this._itemsPtr++]}_reset(){const e=2*(Math.floor(this._itemsPtr/this._itemsPerBuffer)+1);for(;this._buffers.length>e;)this._buffers.pop(),this._items.length=this._buffers.length*this._itemsPerBuffer;this._itemsPtr=0}static createVec2f64(e=Zd){return new _u(16,vF,e)}static createVec3f64(e=Zd){return new _u(24,cR,e)}static createVec4f64(e=Zd){return new _u(32,cz,e)}static createMat3f64(e=Zd){return new _u(72,Tj,e)}static createMat4f64(e=Zd){return new _u(128,kj,e)}static createQuatf64(e=Zd){return new _u(32,Cj,e)}get test(){return{size:this._buffers.length*this._itemsPerBuffer*this._itemByteSize}}};const Zd=4*H2.KILOBYTES,SEe=Hp.createVec2f64(),gi=Hp.createVec3f64(),$ge=Hp.createVec4f64();Hp.createMat3f64();const xge=Hp.createMat4f64(),$Ee=Hp.createQuatf64();function ny(t){return t?MA(tr(t.origin),tr(t.direction)):MA(se(),se())}function MA(t,e){return{origin:t,direction:e}}function xEe(t,e){const i=Mge.get();return i.origin=t,i.direction=e,i}function TEe(t,e=ny()){return Ege(t.origin,t.direction,e)}function Tge(t,e,i=ny()){return In(i.origin,t),kt(i.direction,e,t),i}function Ege(t,e,i=ny()){return In(i.origin,t),In(i.direction,e),i}function EEe(t,e){const i=Ms(gi.get(),Mo(gi.get(),t.direction),kt(gi.get(),e,t.origin));return qe(i,i)}function kge(t,e,i){const n=qe(t.direction,kt(i,e,t.origin));return Do(i,t.origin,Dr(i,t.direction,n)),i}const Mge=new pge(()=>ny());function kEe(t,e,i){const n=qe(t,e)/qe(t,t);return Dr(i,t,n)}function aS(t,e){return qe(t,e)/ks(t)}function Cge(t,e){const i=qe(t,e)/(ks(t)*ks(e));return-MR(i)}const Ige=ry();function ry(){return yw()}const Ij=YT,Oge=YT;function Oj(t,e=ry()){return nb(e,t)}function Aj(t,e){return Ic(t[0],t[1],t[2],e)}function Age(t){return t}function Lge(t){t[0]=t[1]=t[2]=t[3]=0}function Pge(t,e){return t[0]=t[1]=t[2]=0,t[3]=e,t}function Ow(t){return t[3]}function Rge(t){return t}function Nge(t,e,i,n){return Ic(t,e,i,n)}function Dge(t,e,i){return t!==i&&In(i,t),i[3]=t[3]+e,i}function Fge(t,e,i){return J.getLogger("esri.geometry.support.sphere").error("sphere.setExtent is not yet supported"),t===i?i:Oj(t,i)}function Aw(t,e,i){if(e==null||!Pj(t,e,l1))return!1;let{t0:n,t1:r}=l1;if((n<0||r<n&&r>0)&&(n=r),n<0)return!1;if(i){const{origin:s,direction:o}=e;i[0]=s[0]+o[0]*n,i[1]=s[1]+o[1]*n,i[2]=s[2]+o[2]*n}return!0}function Lj(t,e,i){const n=Tge(e,i);if(!Pj(t,n,l1))return[];const{origin:r,direction:s}=n,{t0:o,t1:a}=l1,l=u=>{const p=se();return Kn(p,r,s,u),Lw(t,p,p)};return Math.abs(o-a)<Vi()?[l(o)]:[l(o),l(a)]}const l1={t0:0,t1:0};function Pj(t,e,i){const{origin:n,direction:r}=e,s=zge;s[0]=n[0]-t[0],s[1]=n[1]-t[1],s[2]=n[2]-t[2];const o=r[0]*r[0]+r[1]*r[1]+r[2]*r[2];if(o===0)return!1;const a=2*(r[0]*s[0]+r[1]*s[1]+r[2]*s[2]),l=a*a-4*o*(s[0]*s[0]+s[1]*s[1]+s[2]*s[2]-t[3]*t[3]);if(l<0)return!1;const u=Math.sqrt(l);return i.t0=(-a-u)/(2*o),i.t1=(-a+u)/(2*o),!0}const zge=se();function jge(t,e){return Aw(t,e,null)}function Gge(t,e,i){if(Aw(t,e,i))return i;const n=Rj(t,e,gi.get());return Do(i,e.origin,Dr(gi.get(),e.direction,Cp(e.origin,n)/ks(e.direction))),i}function Rj(t,e,i){const n=gi.get(),r=xge.get();Ms(n,e.origin,e.direction);const s=Ow(t);Ms(i,n,e.origin),Dr(i,i,1/ks(i)*s);const o=Nj(t,e.origin),a=Cge(e.origin,i);return xD(r,a+o,n),vR(i,i,r),i}function Uge(t,e,i){return Aw(t,e,i)?i:(kge(e,t,i),Lw(t,i,i))}function Lw(t,e,i){const n=kt(gi.get(),e,t),r=Dr(gi.get(),n,t[3]/ks(n));return Do(i,r,t)}function Hge(t,e){const i=kt(gi.get(),e,t),n=Mg(i),r=t[3]*t[3];return Math.sqrt(Math.abs(n-r))}function Nj(t,e){const i=kt(gi.get(),e,t),n=ks(i),r=Ow(t),s=r+Math.abs(r-n);return MR(r/s)}const lS=se();function Dj(t,e,i,n){const r=kt(lS,e,t);switch(i){case ic.X:{const s=pC(r,lS)[2];return xi(n,-Math.sin(s),Math.cos(s),0)}case ic.Y:{const s=pC(r,lS),o=s[1],a=s[2],l=Math.sin(o);return xi(n,-l*Math.cos(a),-l*Math.sin(a),Math.cos(o))}case ic.Z:return Mo(n,r);default:return}}function Fj(t,e){const i=kt(V2,e,t);return ks(i)-t[3]}function Vge(t,e,i,n){const r=Fj(t,e),s=Dj(t,e,ic.Z,V2),o=Dr(V2,s,i-r);return Do(n,e,o)}function Bge(t,e){const i=sd(t,e),n=Ow(t);return i<=n*n}function qge(t,e,i=ry()){const n=Cp(t,e),r=t[3],s=e[3];return n+s<r?(nb(i,t),i):n+r<s?(nb(i,e),i):(JT(i,t,e,(n+s-r)/(2*n)),i[3]=(n+r+s)/2,i)}const V2=se(),Wge=ry(),MEe=Object.freeze(Object.defineProperty({__proto__:null,NullSphere:Ige,altitudeAt:Fj,angleToSilhouette:Nj,axisAt:Dj,clear:Lge,closestPoint:Uge,closestPointOnSilhouette:Rj,containsPoint:Bge,copy:Oj,create:ry,distanceToSilhouette:Hge,elevate:Dge,equals:Oge,exactEquals:Ij,fromCenterAndRadius:Aj,fromRadius:Pge,fromValues:Nge,getCenter:Rge,getRadius:Ow,intersectLine:Lj,intersectRay:Aw,intersectRayClosestSilhouette:Gge,intersectsRay:jge,projectPoint:Lw,setAltitudeAt:Vge,setExtent:Fge,tmpSphere:Wge,union:qge,wrap:Age},Symbol.toStringTag,{value:"Module"}));function CEe(t){const e=t[0]*t[0]+t[4]*t[4]+t[8]*t[8],i=t[1]*t[1]+t[5]*t[5]+t[9]*t[9],n=t[2]*t[2]+t[6]*t[6]+t[10]*t[10];return Math.sqrt(Math.max(e,i,n))}function IEe(t,e){const i=Math.sqrt(e[0]*e[0]+e[4]*e[4]+e[8]*e[8]),n=Math.sqrt(e[1]*e[1]+e[5]*e[5]+e[9]*e[9]),r=Math.sqrt(e[2]*e[2]+e[6]*e[6]+e[10]*e[10]);return xi(t,i,n,r),t}function zj(t,e,i){Math.abs(t[0])>Math.abs(t[1])?xi(e,0,1,0):xi(e,1,0,0),Ms(i,t,e),Mo(e,e),Ms(e,i,t),Mo(i,i)}function rn(t=cm){return[t[0],t[1],t[2],t[3]]}function OEe(t=cm[0],e=cm[1],i=cm[2],n=cm[3]){return jj(t,e,i,n,$ge.get())}function Zge(t,e){return jj(e[0],e[1],e[2],e[3],t)}function jj(t,e,i,n,r=rn()){return r[0]=t,r[1]=e,r[2]=i,r[3]=n,r}function sy(t,e,i){const n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=Math.abs(n-1)>1e-5&&n>1e-12?1/Math.sqrt(n):1;return i[0]=e[0]*r,i[1]=e[1]*r,i[2]=e[2]*r,i[3]=-(i[0]*t[0]+i[1]*t[1]+i[2]*t[2]),i}function Gj(t,e,i,n=rn()){const r=i[0]-e[0],s=i[1]-e[1],o=i[2]-e[2],a=t[0]-e[0],l=t[1]-e[1],u=t[2]-e[2],p=s*u-o*l,f=o*a-r*u,m=r*l-s*a,g=p*p+f*f+m*m,y=Math.abs(g-1)>1e-5&&g>1e-12?1/Math.sqrt(g):1;return n[0]=p*y,n[1]=f*y,n[2]=m*y,n[3]=-(n[0]*t[0]+n[1]*t[1]+n[2]*t[2]),n}function Uj(t,e,i,n=0,r=Math.floor(i*(1/3)),s=Math.floor(i*(2/3))){if(i<3)return!1;e(mf,n);let o=r,a=!1;for(;o<i-1&&!a;)e(Kd,o),o++,a=!pt(mf,Kd);if(!a)return!1;for(o=Math.max(o,s),a=!1;o<i&&!a;)e(Pu,o),o++,kt(h0,mf,Kd),Mo(h0,h0),kt(p0,Kd,Pu),Mo(p0,p0),a=!pt(mf,Pu)&&!pt(Kd,Pu)&&Math.abs(qe(h0,p0))<Kge;return a?(Gj(mf,Kd,Pu,t),!0):(n!==0||r!==1||s!==2)&&Uj(t,e,i,0,1,2)}function AEe(t,e,i=!0){const n=e.length/3;return Uj(t,(r,s)=>xi(r,e[3*s+0],e[3*s+1],e[3*s+2]),i?n-1:n)}const Kge=.99619469809,mf=se(),Kd=se(),Pu=se(),h0=se(),p0=se();function LEe(t,e,i){return e!==t&&Zge(t,e),t[3]=-qe(t,i),t}function PEe(t,e){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function REe(t,e,i,n){return Ms(Pu,e,t),sy(i,Pu,n)}function Hj(t,e,i,n){return Rw(t,e,kt(gi.get(),i,e),Qge,n)}function NEe(t,e,i){return e!=null&&Rw(t,e.origin,e.direction,eye,i)}function DEe(t,e,i){return Rw(t,e.origin,e.vector,Eo.NONE,i)}function FEe(t,e,i){return Rw(t,e.origin,e.vector,Eo.CLAMP,i)}const Jge=(()=>{const t=se();return(e,i,n)=>{const r=e,s=i;if(Ms(t,r,s),Mg(t)<Vi())return!1;Mo(t,t);const[o,a,l]=t,u=n.origin,p=Math.abs(o),f=Math.abs(a),m=Math.abs(l),[g,y,v]=r,[b,_,$]=s,x=e[3],E=i[3];return p>f&&p>m?(u[1]=(E*v-x*$)/o,u[2]=(x*_-E*y)/o):f>m?(u[0]=(x*$-E*v)/a,u[2]=(E*g-x*b)/a):(u[0]=(E*y-x*_)/l,u[1]=(x*b-E*g)/l),In(n.direction,t),!0}})();function Yge(t,e){return Pw(t,e)>=0}function zEe(t,e){const i=qe(t,e.ray.direction),n=-Pw(t,e.ray.origin);if(i>-1e-6&&i<1e-6)return n>0;const r=n/i;return i>0?r<e.c1&&(e.c1=r):r>e.c0&&(e.c0=r),e.c0<=e.c1}function Vj(t,e,i){const n=Dr(gi.get(),t,-t[3]),r=Xge(t,kt(gi.get(),e,n),gi.get());return Do(i,r,n),i}function jEe(t,e,i,n){const r=t,s=gi.get(),o=gi.get();zj(r,s,o);const a=kt(gi.get(),i,e),l=aS(s,a),u=aS(o,a),p=aS(r,a);return xi(n,l,u,p)}function Xge(t,e,i){const n=Dr(gi.get(),t,qe(t,e));return kt(i,e,n),i}function B2(t,e){return Math.abs(Pw(t,e))}function Pw(t,e){return qe(t,e)+t[3]}function Rw(t,e,i,n,r){const s=qe(t,i);if(s===0)return!1;let o=-(qe(t,e)+t[3])/s;return n&Eo.CLAMP&&(o=Ar(o,0,1)),!(!(n&Eo.INFINITE_MIN)&&o<0||!(n&Eo.INFINITE_MAX)&&o>1)&&(Do(r,e,Dr(r,i,o)),!0)}function GEe(t){return t}function CA(t){return Math.abs(t[2])<Vi()}const cm=[0,0,1,0];var Eo;(function(t){t[t.NONE=0]="NONE",t[t.CLAMP=1]="CLAMP",t[t.INFINITE_MIN=4]="INFINITE_MIN",t[t.INFINITE_MAX=8]="INFINITE_MAX"})(Eo||(Eo={}));const Qge=Eo.INFINITE_MIN|Eo.INFINITE_MAX,eye=Eo.INFINITE_MAX;function cS(t,e){return t[0]*e[1]-t[1]*e[0]}function tye(t,e,i){const n=Ya(i,e)/Lo(i);return Np(t,i,n)}function uS(t,e,i,n,r=i){return Lt(id,n,i),Lt(c1,e,r),tye(Sp,c1,id),sk(t,r,Sp)}function iye(t,e,i,n){Lt(id,e,i);const r=n/gp(id);return Ir(t,i,id,r)}function UEe(t,e){const i=t.start,n=t.end,r=e.start,s=e.end,o=Lt(id,n,i),a=Lt(Bj,s,r),l=cS(o,a);if(Math.abs(l)<=rye)return[];const u=Lt(c1,i,r),p=cS(a,u)/l,f=cS(o,u)/l;if(p>=0){if(f>=0||e.type===ft.LINE)return[Ir(Sp,i,o,p)]}else if(t.type===ft.LINE&&(f>=0||e.type===ft.LINE))return[Ir(Sp,i,o,p)];return[]}function nye(t,e,i){const n=[],r=Lt(id,t.end,t.start),s=Lt(Bj,t.start,e),o=Lo(r),a=2*Ya(r,s),l=a*a-4*o*(Lo(s)-i*i);if(l===0){const u=-a/(2*o);(t.type===ft.LINE||u>=0)&&n.push(Ir(Sp,t.start,r,u))}else if(l>0){const u=Math.sqrt(l),p=(-a+u)/(2*o);(t.type===ft.LINE||p>=0)&&n.push(Ir(Sp,t.start,r,p));const f=(-a-u)/(2*o);(t.type===ft.LINE||f>=0)&&n.push(Ir(c1,t.start,r,f))}return n}var ft;(function(t){t[t.RAY=0]="RAY",t[t.LINE=1]="LINE"})(ft||(ft={}));const rye=1e-6,id=Ce(),Bj=Ce(),c1=Ce(),Sp=Ce();function Yk({start:t,end:e,type:i},n,r){const s=[],o=Lt(Cd,e,t),a=Lt(Vp,t,n),l=Lo(o),u=2*Ya(o,a),p=u*u-4*l*(Lo(a)-r*r);if(p===0){const f=-u/(2*l);(i===Qn.PLANE||f>=0)&&s.push(Ir(Ce(),t,o,f))}else if(p>0){const f=Math.sqrt(p),m=(-u+f)/(2*l);(i===Qn.PLANE||m>=0)&&s.push(Ir(Ce(),t,o,m));const g=(-u-f)/(2*l);(i===Qn.PLANE||g>=0)&&s.push(Ir(Ce(),t,o,g))}return s}function qj(t,e){const i=t.start,n=t.end,r=Lt(Cd,n,i),s=xi(Vp,-r[1],r[0],0),o=e.start,a=e.end,l=xn(eM,a,o),u=qe(l,s),p=xi(t9,i[0],i[1],0),f=xn(i9,p,o),m=qe(f,s);if(Math.abs(u)<_o)return[];const g=Kn(n9,o,l,m/u);if(e.type===ft.RAY){const y=xn(d1,g,o);if(qe(y,l)<-_o)return[]}if(t.type===Qn.HALF_PLANE){const y=dw(d1,g,i);if(Ya(y,r)<-_o)return[]}return[tr(g)]}function sye(t,e){return oye(u1(tM,e[2],t),e)}function Wj(t,e){const n=Xj(u1(tM,0,t),u1(dye,0,e)),r=[];for(const s of n)r.push(yF(s));return r}function Zj(t,e){return Xk(t,u1(tM,t[2],e))}function Kj(t,e,i){const n=Lt(Cd,t,e),r=i/gp(n),s=Ir(se(),e,n,r);return s[2]=t[2],s}function Xk(t,{start:e,end:i,type:n}){const r=xn(Cd,t,e),s=xn(Vp,i,e),o=qe(r,s)/qe(s,s);return Kn(se(),e,s,n===ft.RAY?Math.max(o,0):o)}const Jj=(()=>{const t=se(),e=se(),i=se();return({start:n,end:r},{center:s,radius:o,normal:a,slicePlane:l})=>{const u=se(),p=sy(s,a,uye);if(bt(B2(p,n),0)&&bt(B2(p,r),0)){zj(a,t,e);const f=(y,v)=>(kt(i,v,s),ei(y,qe(i,t),qe(i,e)),y),m=nye({start:f(e9,n),end:f(cye,r),type:ft.LINE},$F,o),g=[];for(const[y,v]of m){const b=In(se(),s);Kn(b,b,t,y),Kn(b,b,e,v),l&&!ac(l,b)||g.push(b)}return g}return Hj(p,n,r,u)?!bt(Cp(u,s),o)||l&&!ac(l,u)?[]:[u]:[]}})();function Yj({start:t,end:e,type:i},n,r){const s=[],o=kt(Cd,e,t),a=Lt(Vp,t,n),l=Lo(o),u=2*Ya(o,a),p=u*u-4*l*(Lo(a)-r*r);if(p===0){const f=-u/(2*l);(i===ft.LINE||f>=0)&&s.push(Kn(se(),t,o,f))}else if(p>0){const f=Math.sqrt(p),m=(-u+f)/(2*l);(i===ft.LINE||m>=0)&&s.push(Kn(se(),t,o,m));const g=(-u-f)/(2*l);(i===ft.LINE||g>=0)&&s.push(Kn(se(),t,o,g))}return s}function Xj(t,e){const i=t.start,n=t.end,r=e.start,s=e.end,o=xn(Cd,n,i),a=xn(Vp,s,r),l=xn(eM,r,i),u=Ms(t9,o,a),p=qe(l,u);if(!$o(p,0,_o))return[];const f=ib(u);if($o(f,0,_o))return[];const m=Ms(i9,l,a),g=qe(m,u)/f,y=Kn(n9,i,o,g);if(t.type===ft.RAY){const v=xn(d1,y,i);if(qe(o,v)<-_o)return[]}if(e.type===ft.RAY){const v=xn(d1,y,r);if(qe(a,v)<-_o)return[]}return[tr(y)]}function oye({start:t,end:e,type:i},n){const r=xn(Cd,n,t),s=xn(Vp,e,t),o=Ms(eM,s,r);if(ib(o)/ib(s)<_o)switch(i){case ft.LINE:return[tr(n)];case ft.RAY:return qe(s,r)<-_o?[]:[tr(n)]}return[]}function Qk(t,e,i,n){const[r,s]=t,[o,a]=i,l=o-r,u=a-s,p=l*l+u*u,f=Math.sqrt(p);if(f>e+n)return[];if(f<Math.abs(e-n))return[];if(bt(f,0)&&bt(e,n))return[];const m=(e*e-n*n+p)/(2*f),g=Math.sqrt(e*e-m*m),y=g*u/f,v=g*l/f,[b,_]=ok(e9,t,i,m/f);return bt(y,v)?[oc(b,_)]:[oc(b+y,_-v),oc(b-y,_+v)]}function u1(t,e,{start:i,end:n,type:r}){return xi(t.start,i[0],i[1],e),xi(t.end,n[0],n[1],e),t.type=lye[r],t}function Qj(t,e){return bt(t[2],e[2])}function bt(t,e){return Math.abs(t-e)<_o}function aye(t,e){return e.filter(i=>ac(t,i))}function ac(t,e){return Yge(t,e)}var Qn;(function(t){t[t.PLANE=0]="PLANE",t[t.HALF_PLANE=1]="HALF_PLANE"})(Qn||(Qn={}));const lye={[Qn.PLANE]:ft.LINE,[Qn.HALF_PLANE]:ft.RAY},_o=1e-6,e9=Ce(),cye=Ce(),Cd=se(),Vp=se(),eM=se(),t9=se(),i9=se(),n9=se(),d1=se(),uye=rn(),tM={start:se(),end:se(),type:ft.LINE},dye={start:se(),end:se(),type:ft.LINE};class Uo{intersect(e){return ba(this,e)}closestPoints(e){return[this.closestTo(e)]}}class Bp extends Uo{constructor(e){super(),this.point=e}equals(e){return this===e||po(e)&&pt(this.point,e.point)}closestTo(){return _p(this.point)}}class iM extends Uo{constructor(e,i,n){super(),this.start=e,this.end=i,this.lineLike={start:e,end:i,type:n}}equals(e){return this===e||fo(e)&&this.lineLike.type===e.lineLike.type&&pt(this.start,e.start)&&pt(this.end,e.end)}closestTo(e){const i=Xk(e,this.lineLike);return i}}let nM=class extends iM{constructor(e,i){super(e,i,ft.LINE)}},hye=class extends iM{constructor(e,i){super(e,i,ft.RAY)}};class r9 extends Uo{constructor(e){super(),this.constraints=e}equals(e){return this===e||q2(e)&&vg(this.constraints,e.constraints,(i,n)=>i.equals(n))}closestTo(e){let i,n=1/0;for(const r of this.constraints){const s=r.closestTo(e),o=sd(e,s);o<n&&(n=o,i=s)}return i?_p(i):e}closestPoints(e){return this.constraints.flatMap(i=>i===this?[]:i.closestPoints(e))}}class s9 extends Uo{constructor(e,i){super(),this.center=e,this.radius=i}equals(e){return this===e||go(e)&&this.center[0]===e.center[0]&&this.center[1]===e.center[1]&&this.radius===e.radius}closestTo(e){const i=Kj(e,this.center,this.radius);return i}}let rM=class extends Uo{constructor(e,i){super(),this.center=e,this.radius=i}equals(e){return this===e||_a(e)&&pt(this.center,e.center)&&this.radius===e.radius}closestTo(e){const i=Kj(e,this.center,this.radius);return i[2]=this.center[2],i}asCircle(){return new sM(_p(this.center),this.radius,_c(0,0,1))}};class sM extends Uo{constructor(e,i,n,r=void 0){super(),this.center=e,this.radius=i,this.normal=n,this.slicePlane=r}equals(e){return this===e||Dl(e)&&pt(this.center,e.center)&&pt(this.normal,e.normal)&&this.radius===e.radius}closestTo(e){const{center:i,radius:n}=this;Vj(this.getPlane(pye),e,dS);const r=xn(dS,dS,i),s=Mg(r);if(bt(s,0))return _p(e);const o=n/Math.sqrt(s),a=Kn(se(),i,r,o),{slicePlane:l}=this;if(l&&!ac(l,a)){const u=aM(l,this);return(u==null?void 0:u.closestTo(e))??_p(e)}return a}getPlane(e=rn()){return sy(this.center,this.normal,e)}}const dS=se(),pye=rn();class fye extends Uo{constructor(e){super(),this.z=e}equals(e){return this===e||wa(e)&&this.z===e.z}closestTo(e){return kn(e[0],e[1],this.z)}getPlane(e=rn()){return xi(IA,0,0,this.z),sy(IA,mR,e)}}const IA=se();class oM extends Uo{constructor(e,i,n){super(),this.start=e,this.end=i,this.planeLike={start:e,end:i,type:n}}equals(e){return this===e||mo(e)&&this.planeLike.type===e.planeLike.type&&pt(this.start,e.start)&&pt(this.end,e.end)}closestTo(e){return Zj(e,this.planeLike)}closestEndTo(e){const{start:i,end:n}=this;return Math.sign(Ya(Lt(mye,n,i),Lt(gye,e,i)))>0?n:i}getPlane(e=rn()){const i=In(OA,this.end);return i[2]+=1,Gj(this.start,this.end,i,e)}getSlicePlane(e=rn()){const{start:i,end:n,type:r}=this.planeLike;if(r===Qn.PLANE)return;const s=xi(OA,i[0],i[1],0),o=xi(AA,n[0],n[1],0),a=kt(AA,o,s);return sy(s,a,e),e}}const mye=Ce(),gye=Ce(),OA=se(),AA=se();class o9 extends oM{constructor(e,i){super(e,i,Qn.HALF_PLANE)}}class a9 extends oM{constructor(e,i){super(e,i,Qn.PLANE)}}class yye extends Uo{constructor(e,i){super(),this.sphere=Aj(e,i)}equals(e){return this===e||Sa(e)&&Ij(this.sphere,e.sphere)}closestTo(e){const i=Lw(this.sphere,e,se());return i}get center(){return this.sphere}get radius(){return this.sphere[3]}}class l9 extends Uo{constructor(e,i,n){super(),this.start=e,this.end=i,this.getZ=n,this.planeLike={start:e,end:i,type:Qn.PLANE}}equals(e){return this===e||h1(e)&&pt(this.start,e.start)&&pt(this.end,e.end)&&this.getZ===e.getZ}closestTo(e){return vye(this,e)}addIfOnTheGround(e,i){for(const n of i){const r=this.getZ(n[0],n[1])??0;bt(n[2],r)&&(n[2]=r,e.push(n))}}}function vye(t,e){const i=Zj(e,t.planeLike);return i[2]=t.getZ(i[0],i[1])??u9,i}function ba(t,e){if(q2(t)){const i=[];for(const n of t.constraints){const r=n.intersect(e);r&&i.push(r)}return lM(i)}if(q2(e))return ba(e,t);if(h1(t))return LA(t,e);if(h1(e))return LA(e,t);if(po(t)){const{point:i}=t,n=e.closestTo(i);return bR(n,i)?t:void 0}if(fo(t)){if(po(e))return ba(e,t);if(fo(e))return ws(Xj(t.lineLike,e.lineLike));if(wa(e))return bye(t,e);if(mo(e))return ws(qj(e.planeLike,t.lineLike));if(go(e))return ws(Yj(t.lineLike,e.center,e.radius));if(Dl(e))return ws(Jj(t.lineLike,e));if(_a(e))return wye(t,e);if(Sa(e))return _ye(t,e)}else if(wa(t)){if(po(e)||fo(e))return ba(e,t);if(wa(e))return Sye(t,e);if(mo(e))return $ye(t,e);if(go(e))return xye(t,e);if(Dl(e))return Eye(t,e);if(_a(e))return Tye(t,e);if(Sa(e))return kye(t,e)}else if(mo(t)){if(po(e)||fo(e)||wa(e))return ba(e,t);if(mo(e))return hS(Wj(t.planeLike,e.planeLike));if(go(e))return hS(Yk(t.planeLike,e.center,e.radius));if(Dl(e))return Cye(t,e);if(_a(e))return Mye(t,e);if(Sa(e))return Iye(t,e)}else if(go(t)){if(po(e)||fo(e)||wa(e)||mo(e))return ba(e,t);if(go(e))return hS(Qk(t.center,t.radius,e.center,e.radius));if(Dl(e))return void 0;if(_a(e))return Oye(t,e);if(Sa(e))return void 0}else if(Dl(t)){if(po(e)||fo(e)||wa(e)||mo(e)||go(e))return ba(e,t);if(Dl(e))return void 0;if(_a(e))return e.asCircle(),void 0;if(Sa(e))return void 0}else if(_a(t)){if(po(e)||fo(e)||wa(e)||mo(e)||go(e)||Dl(e))return ba(e,t);if(_a(e))return Aye(e,t);if(Sa(e))return void 0}else if(Sa(t)){if(po(e)||fo(e)||wa(e)||mo(e)||go(e)||_a(e))return ba(e,t);if(Sa(e))return void 0}}const bye=(()=>{const t=rn();return(e,i)=>{const{start:n,end:r}=e;if(Qj(n,r)&&bt(n[2],i.z))return e;const s=se();return Hj(i.getPlane(t),n,r,s)?new Bp(s):void 0}})();function wye({lineLike:t},{center:e,radius:i}){const n=e[2];return ws(Yj(t,e,i).filter(r=>bt(r[2],n)))}function _ye({lineLike:t},{sphere:e}){return ws(Lj(e,t.start,t.end))}const aM=(()=>{const t=ny(),e=rn(),i={start:se(),end:se(),type:ft.LINE};return(n,r,s)=>{const{normal:o,center:a,radius:l}=r,u=qe(o,n),p=bt(B2(n,a),0);if(bt(u,1))return p?r:void 0;if(r.getPlane(e),p&&bt(u,0)&&CA(n)&&CA(e)){if(bt(l,0))return!s||ac(s,a)?new Bp(_p(a)):void 0;const m=tr(a);m[2]+=l;const g=tr(a);g[2]-=l;const y=[];return s&&!ac(s,m)||y.push(m),s&&!ac(s,g)||y.push(g),ws(y)}if(!Jge(n,e,t))return;In(i.start,t.origin),Do(i.end,t.origin,t.direction);const f=Jj(i,r);return ws(s?aye(s,f):f)}})();function Sye(t,e){return bt(t.z,e.z)?t:void 0}function $ye({z:t},{planeLike:e}){const[i,n]=e.start,[r,s]=e.end,o=_c(i,n,t),a=_c(r,s,t);return e.type===Qn.PLANE?new nM(o,a):new hye(o,a)}function xye(t,e){const[i,n]=e.center;return new rM(_c(i,n,t.z),e.radius)}function Tye(t,e){return bt(e.center[2],t.z)?e:void 0}const Eye=(()=>{const t=rn();return(e,i)=>aM(e.getPlane(t),i)})();function kye(t,{center:e,radius:i}){const n=Math.abs(e[2]-t.z);if(n>i&&!bt(n,i))return;const r=_c(e[0],e[1],t.z),s=Math.sqrt(i**2-n**2);return bt(s,0)?void 0:new rM(r,s)}const Mye=(()=>{const t=rn();return(e,{center:i,radius:n})=>{const r=Yk(e.planeLike,i,n),s=i[2];e.getSlicePlane(t);const o=[];for(const[a,l]of r){const u=[a,l,s];ac(t,u)&&o.push(u)}return ws(o)}})(),Cye=(()=>{const t=rn(),e=rn();return(i,n)=>aM(i.getPlane(t),n,i.getSlicePlane(e))})(),Iye=(()=>{const t=rn();return(e,{center:i,radius:n})=>{const r=e.getPlane(t),s=Pw(r,i),o=Math.abs(s);if(o>n&&!bt(o,n))return;const a=tr(r),l=Kn(se(),i,a,s),u=Math.sqrt(n**2-s**2);return bt(u,0)?new Bp(Vj(r,i,se())):new sM(l,u,a,e.getSlicePlane())}})();function Oye(t,e){const i=Pr(t.center,e.center);return bt(i,0)&&bt(t.radius,e.radius)?e:c9(Qk(t.center,t.radius,e.center,e.radius),e.center[2])}function Aye(t,e){if(!Qj(t.center,e.center))return;const i=Pr(t.center,e.center);return bt(i,0)&&bt(t.radius,e.radius)?t:c9(Qk(t.center,t.radius,e.center,e.radius),t.center[2])}function LA(t,e){const{planeLike:i,getZ:n}=t,r=[];if(po(e))t.addIfOnTheGround(r,sye(i,e.point));else if(fo(e))t.addIfOnTheGround(r,qj(i,e.lineLike));else if(go(e))for(const[s,o]of Yk(i,e.center,e.radius)){const a=n(s,o);a!=null&&r.push(kn(s,o,a))}else if(mo(e)||h1(e))for(const[s,o]of Wj(i,e.planeLike)){const a=n(s,o)??u9;r.push(kn(s,o,a))}return ws(r)}function hS(t){return lM(t.map(([e,i])=>{const n=_c(e,i,0),r=_c(e,i,1);return new nM(n,r)}))}function ws(t){return lM(t.map(e=>e?new Bp(e):void 0))}function c9(t,e){return ws(t.map(([i,n])=>[i,n,e]))}function lM(t){if(t.length!==0)return t.length===1?t[0]??void 0:new r9(t.filter(Qi))}function q2(t){return t instanceof r9}function po(t){return t instanceof Bp}function fo(t){return t instanceof iM}function wa(t){return t instanceof fye}function mo(t){return t instanceof oM}function go(t){return t instanceof s9}function _a(t){return t instanceof rM}function Dl(t){return t instanceof sM}function Sa(t){return t instanceof yye}function h1(t){return t instanceof l9}const u9=0;var W2;let um=W2=class extends ie{constructor(t){super(t),this.name=null,this.code=null}clone(){return new W2({name:this.name,code:this.code})}};c([d({type:String,json:{write:!0}})],um.prototype,"name",void 0),c([d({type:[String,Number],json:{write:!0}})],um.prototype,"code",void 0),um=W2=c([S("esri.layers.support.CodedValue")],um);const Lye=new Kt({inherited:"inherited",codedValue:"coded-value",range:"range"});let dm=class extends ie{constructor(e){super(e),this.name=null,this.type=null}};c([d({type:String,json:{write:!0}})],dm.prototype,"name",void 0),c([me(Lye)],dm.prototype,"type",void 0),dm=c([S("esri.layers.support.Domain")],dm);const Nw=dm;var Z2;let hm=Z2=class extends Nw{constructor(t){super(t),this.codedValues=null,this.type="coded-value"}getName(t){let e=null;if(this.codedValues){const i=String(t);this.codedValues.some(n=>(String(n.code)===i&&(e=n.name),!!e))}return e}clone(){return new Z2({codedValues:q(this.codedValues),name:this.name})}};c([d({type:[um],json:{write:!0}})],hm.prototype,"codedValues",void 0),c([me({codedValue:"coded-value"})],hm.prototype,"type",void 0),hm=Z2=c([S("esri.layers.support.CodedValueDomain")],hm);const d9=hm;var K2;let Ev=K2=class extends Nw{constructor(t){super(t),this.type="inherited"}clone(){return new K2}};c([me({inherited:"inherited"})],Ev.prototype,"type",void 0),Ev=K2=c([S("esri.layers.support.InheritedDomain")],Ev);const h9=Ev;var J2;let Sh=J2=class extends Nw{constructor(t){super(t),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new J2({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};c([d({json:{type:[Number],read:{source:"range",reader:(t,e)=>{var i;return(i=e.range)==null?void 0:i[1]}},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(t,e,i){e[i]=[this.minValue||0,t]}}}})],Sh.prototype,"maxValue",void 0),c([d({json:{type:[Number],read:{source:"range",reader:(t,e)=>{var i;return(i=e.range)==null?void 0:i[0]}},write:{target:"range",writer(t,e,i){e[i]=[t,this.maxValue||0]}}}})],Sh.prototype,"minValue",void 0),c([me({range:"range"})],Sh.prototype,"type",void 0),Sh=J2=c([S("esri.layers.support.RangeDomain")],Sh);const p9=Sh,Pye={key:"type",base:Nw,typeMap:{range:p9,"coded-value":d9,inherited:h9}};function Rye(t){if(!(t!=null&&t.type))return null;switch(t.type){case"range":return p9.fromJSON(t);case"codedValue":return d9.fromJSON(t);case"inherited":return h9.fromJSON(t)}return null}const Nye=new Kt({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var Y2;const Dye=new Kt({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let Ri=Y2=class extends ie{constructor(t){super(t),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(t,{description:e}){let i=null;try{i=e?JSON.parse(e):null}catch{}return(i==null?void 0:i.value)??null}readValueType(t,{description:e}){let i=null;try{i=e?JSON.parse(e):null}catch{}return i?Dye.fromJSON(i.fieldValueType):null}clone(){return new Y2({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};c([d({type:String,json:{write:!0}})],Ri.prototype,"alias",void 0),c([d({type:[String,Number],json:{write:{allowNull:!0}}})],Ri.prototype,"defaultValue",void 0),c([d()],Ri.prototype,"description",void 0),c([Ne("description")],Ri.prototype,"readDescription",null),c([d({types:Pye,json:{read:{reader:Rye},write:!0}})],Ri.prototype,"domain",void 0),c([d({type:Boolean,json:{write:!0}})],Ri.prototype,"editable",void 0),c([d({type:Et,json:{write:{overridePolicy:t=>({enabled:Number.isFinite(t)})}}})],Ri.prototype,"length",void 0),c([d({type:String,json:{write:!0}})],Ri.prototype,"name",void 0),c([d({type:Boolean,json:{write:!0}})],Ri.prototype,"nullable",void 0),c([me(Nye)],Ri.prototype,"type",void 0),c([d()],Ri.prototype,"valueType",void 0),c([Ne("valueType",["description"])],Ri.prototype,"readValueType",null),c([d({type:Boolean,json:{read:!1}})],Ri.prototype,"visible",void 0),Ri=Y2=c([S("esri.layers.support.Field")],Ri);const Fye=Ri;var X2;let $h=X2=class extends ie{constructor(t){super(t),this.type="map-layer"}clone(){const{mapLayerId:t,gdbVersion:e}=this;return new X2({mapLayerId:t,gdbVersion:e})}};c([me({mapLayer:"map-layer"})],$h.prototype,"type",void 0),c([d({type:Et,json:{write:!0}})],$h.prototype,"mapLayerId",void 0),c([d({type:String,json:{write:!0}})],$h.prototype,"gdbVersion",void 0),$h=X2=c([S("esri.layers.support.source.MapLayerSource")],$h);var Q2;let $a=Q2=class extends ie{constructor(t){super(t),this.type="query-table"}clone(){const{workspaceId:t,query:e,oidFields:i,spatialReference:n,geometryType:r}=this,s={workspaceId:t,query:e,oidFields:i,spatialReference:(n==null?void 0:n.clone())??void 0,geometryType:r};return new Q2(s)}};c([me({queryTable:"query-table"})],$a.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],$a.prototype,"workspaceId",void 0),c([d({type:String,json:{write:!0}})],$a.prototype,"query",void 0),c([d({type:String,json:{write:!0}})],$a.prototype,"oidFields",void 0),c([d({type:xe,json:{write:!0}})],$a.prototype,"spatialReference",void 0),c([me(Bq)],$a.prototype,"geometryType",void 0),$a=Q2=c([S("esri.layers.support.source.QueryTableDataSource")],$a);var eT;let xh=eT=class extends ie{constructor(t){super(t),this.type="raster"}clone(){const{workspaceId:t,dataSourceName:e}=this;return new eT({workspaceId:t,dataSourceName:e})}};c([me({raster:"raster"})],xh.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],xh.prototype,"dataSourceName",void 0),c([d({type:String,json:{write:!0}})],xh.prototype,"workspaceId",void 0),xh=eT=c([S("esri.layers.support.source.RasterDataSource")],xh);var tT;let Su=tT=class extends ie{constructor(t){super(t),this.type="table"}clone(){const{workspaceId:t,gdbVersion:e,dataSourceName:i}=this;return new tT({workspaceId:t,gdbVersion:e,dataSourceName:i})}};c([me({table:"table"})],Su.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],Su.prototype,"workspaceId",void 0),c([d({type:String,json:{write:!0}})],Su.prototype,"gdbVersion",void 0),c([d({type:String,json:{write:!0}})],Su.prototype,"dataSourceName",void 0),Su=tT=c([S("esri.layers.support.source.TableDataSource")],Su);var iT,nT;const zye=sn()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let Un=iT=class extends ie{constructor(t){super(t),this.type="join-table"}readLeftTableSource(t,e,i){return PA()(t,e,i)}castLeftTableSource(t){return ja(rT(),t)}readRightTableSource(t,e,i){return PA()(t,e,i)}castRightTableSource(t){return ja(rT(),t)}clone(){const{leftTableKey:t,rightTableKey:e,leftTableSource:i,rightTableSource:n,joinType:r}=this,s={leftTableKey:t,rightTableKey:e,leftTableSource:(i==null?void 0:i.clone())??void 0,rightTableSource:(n==null?void 0:n.clone())??void 0,joinType:r};return new iT(s)}};c([me({joinTable:"join-table"})],Un.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],Un.prototype,"leftTableKey",void 0),c([d({type:String,json:{write:!0}})],Un.prototype,"rightTableKey",void 0),c([d({json:{write:!0}})],Un.prototype,"leftTableSource",void 0),c([Ne("leftTableSource")],Un.prototype,"readLeftTableSource",null),c([zt("leftTableSource")],Un.prototype,"castLeftTableSource",null),c([d({json:{write:!0}})],Un.prototype,"rightTableSource",void 0),c([Ne("rightTableSource")],Un.prototype,"readRightTableSource",null),c([zt("rightTableSource")],Un.prototype,"castRightTableSource",null),c([me(zye)],Un.prototype,"joinType",void 0),Un=iT=c([S("esri.layers.support.source.JoinTableDataSource")],Un);let pS=null;function PA(){return pS||(pS=xT({types:rT()})),pS}let fS=null;function rT(){return fS||(fS={key:"type",base:null,typeMap:{"data-layer":Ta,"map-layer":$h}}),fS}const jye={key:"type",base:null,typeMap:{"join-table":Un,"query-table":$a,raster:xh,table:Su}};let Ta=nT=class extends ie{constructor(t){super(t),this.type="data-layer"}clone(){const{fields:t,dataSource:e}=this;return new nT({fields:t,dataSource:e})}};c([me({dataLayer:"data-layer"})],Ta.prototype,"type",void 0),c([d({type:[Fye],json:{write:!0}})],Ta.prototype,"fields",void 0),c([d({types:jye,json:{write:!0}})],Ta.prototype,"dataSource",void 0),Ta=nT=c([S("esri.layers.support.source.DataLayerSource")],Ta),Ta.from=ti(Ta);var sT;const RA=new Kt({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let os=sT=class extends ie{constructor(t){super(t),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(t,e){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(e.statisticParameters=q(t))}clone(){return new sT({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:q(this.statisticParameters)})}};c([d({type:Number,json:{write:!0}})],os.prototype,"maxPointCount",void 0),c([d({type:Number,json:{write:!0}})],os.prototype,"maxRecordCount",void 0),c([d({type:Number,json:{write:!0}})],os.prototype,"maxVertexCount",void 0),c([d({type:String,json:{write:!0}})],os.prototype,"onStatisticField",void 0),c([d({type:String,json:{write:!0}})],os.prototype,"outStatisticFieldName",void 0),c([d({type:String,json:{read:{source:"statisticType",reader:RA.read},write:{target:"statisticType",writer:RA.write}}})],os.prototype,"statisticType",void 0),c([d({type:Object})],os.prototype,"statisticParameters",void 0),c([Ie("statisticParameters")],os.prototype,"writeStatisticParameters",null),os=sT=c([S("esri.rest.support.StatisticDefinition")],os);const Gye=os;var kv;const Uye=new Kt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),Hye=new Kt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let de=kv=class extends ie{static from(t){return T1(kv,t)}constructor(t){super(t),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(t){return typeof t=="number"||typeof t=="object"?t:null}writeHistoricMoment(t,e){e.historicMoment=t&&t.getTime()}writeParameterValues(t,e){if(t){const i={};for(const n in t){const r=t[n];Array.isArray(r)?i[n]=r.map(s=>s instanceof Date?s.getTime():s):r instanceof Date?i[n]=r.getTime():i[n]=r}e.parameterValues=i}}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10,e.where="1=1"}writeWhere(t,e){e.where=t||"1=1"}clone(){return new kv(q({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment!=null?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};de.MAX_MAX_RECORD_COUNT_FACTOR=5,c([d({json:{write:!0}})],de.prototype,"aggregateIds",void 0),c([d({type:Boolean,json:{write:!0}})],de.prototype,"cacheHint",void 0),c([d({type:Boolean,json:{default:!1,write:!0}})],de.prototype,"compactGeometryEnabled",void 0),c([d({json:{write:!0}})],de.prototype,"datumTransformation",void 0),c([zt("datumTransformation")],de.prototype,"castDatumTransformation",null),c([d({type:Boolean,json:{default:!1,write:!0}})],de.prototype,"defaultSpatialReferenceEnabled",void 0),c([d({type:Number,json:{write:{overridePolicy:t=>({enabled:t>0})}}})],de.prototype,"distance",void 0),c([d({type:Ta,json:{write:!0}})],de.prototype,"dynamicDataSource",void 0),c([d({type:String,json:{write:!0}})],de.prototype,"formatOf3DObjects",void 0),c([d({type:[Ez],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],de.prototype,"fullText",void 0),c([d({type:String,json:{write:!0}})],de.prototype,"gdbVersion",void 0),c([d({types:Ig,json:{read:ap,write:!0}})],de.prototype,"geometry",void 0),c([d({type:Number,json:{write:!0}})],de.prototype,"geometryPrecision",void 0),c([d({type:[String],json:{write:!0}})],de.prototype,"groupByFieldsForStatistics",void 0),c([d({type:String,json:{write:!0}})],de.prototype,"having",void 0),c([d({type:Date})],de.prototype,"historicMoment",void 0),c([Ie("historicMoment")],de.prototype,"writeHistoricMoment",null),c([d({type:Number,json:{write:!0}})],de.prototype,"maxAllowableOffset",void 0),c([d({type:Number,cast:t=>t<1?1:t>de.MAX_MAX_RECORD_COUNT_FACTOR?de.MAX_MAX_RECORD_COUNT_FACTOR:t,json:{write:{overridePolicy:t=>({enabled:t>1})}}})],de.prototype,"maxRecordCountFactor",void 0),c([d({type:["xyFootprint"],json:{write:!0}})],de.prototype,"multipatchOption",void 0),c([d({type:Number,json:{read:{source:"resultRecordCount"}}})],de.prototype,"num",void 0),c([d({json:{write:!0}})],de.prototype,"objectIds",void 0),c([d({type:[String],json:{write:!0}})],de.prototype,"orderByFields",void 0),c([d({type:[String],json:{write:!0}})],de.prototype,"outFields",void 0),c([d({type:xe,json:{name:"outSR",write:!0}})],de.prototype,"outSpatialReference",void 0),c([d({type:[Gye],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],de.prototype,"outStatistics",void 0),c([d({json:{write:!0}})],de.prototype,"parameterValues",void 0),c([Ie("parameterValues")],de.prototype,"writeParameterValues",null),c([d({type:he,json:{write:!0}})],de.prototype,"pixelSize",void 0),c([d({type:i6,json:{write:!0}})],de.prototype,"quantizationParameters",void 0),c([d({type:[Object],json:{write:!0}})],de.prototype,"rangeValues",void 0),c([d({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],de.prototype,"relationParameter",void 0),c([d({type:String,json:{write:!0}})],de.prototype,"resultType",void 0),c([d({type:Boolean,json:{default:!1,write:!0}})],de.prototype,"returnCentroid",void 0),c([d({type:Boolean,json:{default:!1,write:!0}})],de.prototype,"returnDistinctValues",void 0),c([d({type:Boolean,json:{default:!0,write:!0}})],de.prototype,"returnExceededLimitFeatures",void 0),c([d({type:Boolean,json:{write:!0}})],de.prototype,"returnGeometry",void 0),c([d({type:Boolean,json:{default:!1,write:!0}})],de.prototype,"returnQueryGeometry",void 0),c([d({type:Boolean,json:{default:!1,write:!0}})],de.prototype,"returnM",void 0),c([d({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],de.prototype,"returnZ",void 0),c([d({type:xe,json:{write:!0}})],de.prototype,"sourceSpatialReference",void 0),c([me(Uye,{ignoreUnknown:!1,name:"spatialRel"})],de.prototype,"spatialRelationship",void 0),c([d({type:Number,json:{read:{source:"resultOffset"}}})],de.prototype,"start",void 0),c([Ie("start"),Ie("num")],de.prototype,"writeStart",null),c([d({type:String,json:{write:!0}})],de.prototype,"sqlFormat",void 0),c([d({type:String,json:{write:!0}})],de.prototype,"text",void 0),c([d({type:PE,json:{write:!0}})],de.prototype,"timeExtent",void 0),c([d({type:Boolean,json:{default:!1,write:!0}})],de.prototype,"timeReferenceUnknownClient",void 0),c([me(Hye,{ignoreUnknown:!1}),d({json:{write:{overridePolicy(t){return{enabled:!!t&&this.distance!=null&&this.distance>0}}}}})],de.prototype,"units",void 0),c([d({type:String,json:{write:{overridePolicy(t){return{enabled:t!=null||this.start!=null&&this.start>0}}}}})],de.prototype,"where",void 0),c([Ie("where")],de.prototype,"writeWhere",null),de=kv=c([S("esri.rest.support.Query")],de);const f9=de;var oT;const mS=new Kt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),gS=new Kt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let uo=oT=class extends ie{constructor(t){super(t),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(t={}){const{where:e,geometry:i,spatialRelationship:n,timeExtent:r,objectIds:s,units:o,distance:a}=this;return new f9({geometry:q(i),objectIds:q(s),spatialRelationship:n,timeExtent:q(r),where:e,units:o,distance:a,...t})}clone(){const{where:t,geometry:e,spatialRelationship:i,timeExtent:n,objectIds:r,units:s,distance:o}=this;return new oT({geometry:q(e),objectIds:q(r),spatialRelationship:i,timeExtent:q(n),where:t,units:s,distance:o})}};c([d({type:String,json:{write:!0}})],uo.prototype,"where",void 0),c([d({types:Ig,json:{write:!0}})],uo.prototype,"geometry",void 0),c([d({type:mS.apiValues,json:{name:"spatialRel",read:{reader:mS.read},write:{allowNull:!1,writer:mS.write,overridePolicy(){return{enabled:this.geometry!=null}}}}})],uo.prototype,"spatialRelationship",void 0),c([d({type:Number,json:{write:{overridePolicy(t){return{enabled:t!=null&&this.geometry!=null}}}}})],uo.prototype,"distance",void 0),c([d({type:[Number],json:{write:!0}})],uo.prototype,"objectIds",void 0),c([d({type:gS.apiValues,json:{read:gS.read,write:{writer:gS.write,overridePolicy(t){return{enabled:t!=null&&this.geometry!=null}}}}})],uo.prototype,"units",void 0),c([d({type:PE,json:{write:!0}})],uo.prototype,"timeExtent",void 0),uo=oT=c([S("esri.layers.support.FeatureFilter")],uo);const Mv=uo;function Vye(t){var i;const e=t.layer;return"floorInfo"in e&&((i=e.floorInfo)!=null&&i.floorField)&&"floors"in t.view?m9(t.view.floors,e.floorInfo.floorField):null}function WEe(t,e){var i;return"floorInfo"in e&&((i=e.floorInfo)!=null&&i.floorField)?m9(t,e.floorInfo.floorField):null}function m9(t,e){if(!(t!=null&&t.length))return null;const i=t.filter(n=>n!=="").map(n=>`'${n}'`);return i.push("''"),`${e} IN (${i.join(",")}) OR ${e} IS NULL`}function Id(t,e){const i=t.x-e.x,n=t.y-e.y;return i*i+n*n}function Bye(t,e){return Math.sqrt(Id(t,e))}function cM(t,e){e.sort((i,n)=>sd(i.targetPoint,t)-sd(n.targetPoint,t))}var Nr;function ZEe({point:t,distance:e,returnEdge:i,vertexMode:n,coordinateHelper:{spatialReference:r},filter:s},o,a){return a=a!=null?a.clone():new f9({where:"1=1"}),s&&(a.geometry=s.geometry,a.distance=s.distance,a.spatialRelationship=s.spatialRelationship,a.where=RE(a.where,s.where),a.timeExtent=Fee(a.timeExtent,s.timeExtent),a.objectIds=qye(a.objectIds,s.objectIds)),{point:td(t[0],t[1],t[2],r.toJSON()),mode:o,distance:e,returnEdge:i,vertexMode:n,query:a.toJSON()}}function qye(t,e){return t||e?e?t?Array.from(Y7(new Set(t),new Set(e))):e:t:null}function p1(t,e,i){return{left:ht(t.leftVertex.pos,e,i),right:ht(t.rightVertex.pos,e,i)}}function KEe(t){return t.createQuery()}function Wye(t,e=()=>{}){const i=Z(()=>({view:t.view,snappingOptions:t.snappingOptions}),({view:n,snappingOptions:r})=>{const s="snapping-toggle",o=et.TOOL;if(t.removeHandles(s),n&&r!=null){const a=[n.on("key-down",l=>{l.key!==EA.toggle||l.repeat||(r.enabledToggled=!0,e())},o),n.on("key-up",l=>{l.key===EA.toggle&&(r.enabledToggled=!1,e())},o),n.on("pointer-move",l=>{const u=l.native.ctrlKey;r.enabledToggled!==u&&(r.enabledToggled=u,e())},o)];t.addHandles(a,s)}},di);t.addHandles(i)}function Zye(t){var e;return t!=null&&typeof t=="object"&&"declaredClass"in t&&t.declaredClass==="esri.WebMap"&&"utilityNetworks"in t&&!!((e=t==null?void 0:t.utilityNetworks)!=null&&e.length)}(function(t){t[t.TARGET=0]="TARGET",t[t.REFERENCE=1]="REFERENCE",t[t.REFERENCE_EXTENSION=2]="REFERENCE_EXTENSION"})(Nr||(Nr={}));let mr=class extends X{get layerView(){var e,i;return(i=(e=this.view)==null?void 0:e.allLayerViews)==null?void 0:i.find(n=>n.layer===this.layer)}get valid(){return this._valid}get subtypeFilter(){var r,s;const{layer:e}=this;if(!FX(e)||!((r=e.subtypes)!=null&&r.length))return{mode:"not-in-use",filter:null};const i=((s=e.fieldsIndex.get(e.subtypeField))==null?void 0:s.name)??e.subtypeField,n=e.sublayers.filter(o=>o.visible).map(o=>o.subtypeCode);return n.length?n.length===e.subtypes.length?{mode:"all-visible",filter:null}:n.length===1?{mode:"in-use",filter:`${i} = ${n.getItemAt(0)}`}:{mode:"in-use",filter:`${i} IN (${n.join(", ")})`}:{mode:"none-visible",filter:null}}get floorFilter(){const{view:e,layer:i}=this;return e&&i?Vye({view:e,layer:i}):null}constructor(e){super(e),this.rulesTable=null,this._valid=!1}initialize(){if(!this.snappingSource||!this.layer)return;const{layer:e,snappingSource:i}=this;if("refresh"in e){const n=e;this.addHandles(n.on("refresh",()=>i.refresh()))}this.loadRules(),this.addHandles([Z(()=>i.updating,n=>i.layerSource.updating=n,di),Z(()=>i.availability,n=>i.layerSource.availability=n,di)])}getFetchCandidatesParameters(e,i,n){var p,f;if(!this.valid)return[];const{layer:r,layerView:s,floorFilter:o,rulesTable:a,subtypeFilter:l}=this,u={distance:n,mode:((p=this.view)==null?void 0:p.type)??"2d",point:e,coordinateHelper:i.coordinateHelper,...this._types,filter:s&&"filter"in s?s.filter:null};if(o&&(u.filter=yS(u.filter,o)),l.mode!=="not-in-use"&&l.mode!=="all-visible"){if(l.mode==="none-visible")return[];u.filter?u.filter.where=RE(u.filter.where,l.mode):u.filter=new Mv({where:l.filter})}if(a){const m=i.feature,g=m==null?void 0:m.sourceLayer;if(!(m&&W0(r)&&r.layerId&&W0(g)&&a.loadStatus==="loaded"))return[];const y=[],v=r.layerId,b=(f=a.getFeatureSQL(g,m))==null?void 0:f[v];if(!b)return[];const _=b.anyVertex;let $=b.endVertex;return $&&_&&$===_&&($=""),$&&y.push({...u,returnEdge:!1,vertexMode:"ends",filter:yS(u.filter,$)}),_&&y.push({...u,returnEdge:!1,vertexMode:"all",filter:yS(u.filter,_)}),y}return[u]}async loadRules(){var n,r;const{layer:e,view:i}=this;if(e&&i&&Zye(i==null?void 0:i.map)&&W0(e)){const s=(n=i.map.utilityNetworks)==null?void 0:n.find(o=>o.isUtilityLayer(e));if(s)try{this.rulesTable=await s.getRulesTable(),await((r=this.rulesTable)==null?void 0:r.load()),this._valid=!0}catch{return void J.getLogger("esri.views.interactive.snapping.FeatureSnappingSourceInfo").error("Failed to load rules table for snapping source",e.title)}}else this._valid=!0}get _types(){return{returnEdge:!0,vertexMode:"all"}}remove(){this.destroy()}destroy(){var e;(e=this.snappingSource)==null||e.destroy()}};function yS(t,e){return t==null?new Mv({where:e}):t.where?new Mv({where:RE(t.where,e)}):new Mv({where:e})}c([d({constructOnly:!0})],mr.prototype,"layer",void 0),c([d({constructOnly:!0})],mr.prototype,"snappingSource",void 0),c([d({constructOnly:!0})],mr.prototype,"view",void 0),c([d()],mr.prototype,"layerView",null),c([d()],mr.prototype,"rulesTable",void 0),c([d()],mr.prototype,"valid",null),c([d()],mr.prototype,"subtypeFilter",null),c([d()],mr.prototype,"floorFilter",null),c([d()],mr.prototype,"_valid",void 0),mr=c([S("esri.views.interactive.snapping.FeatureSnappingSourceInfo")],mr);let qp=class{constructor(e,i,n,r){this.targetPoint=e,this.constraint=i,this.isDraped=n,this.domain=r}},uM=class extends qp{constructor({targetPoint:e,objectId:i,constraint:n,isDraped:r}){super(e,n,r,mi.FEATURE),this.objectId=i}},Dw=class{constructor(e,i){this.isDraped=e,this.domain=i}},Ro=class g9 extends Dw{constructor(e,i,n,r,s=mi.ALL,o=!0,a=!0){super(r,s),this.type=e,this.lineStart=i,this.lineEnd=n,this.fadeLeft=o,this.fadeRight=a}equals(e){return e instanceof g9&&this.type===e.type&&pt(this.lineStart,e.lineStart)&&pt(this.lineEnd,e.lineEnd)&&this.fadeLeft===e.fadeLeft&&this.fadeRight===e.fadeRight}get length(){return Cp(this.lineStart,this.lineEnd)}},Kye=class extends uM{constructor(e){super({...e,isDraped:!0,constraint:new l9(e.edgeStart,e.edgeEnd,e.getGroundElevation)})}get hints(){return[new Ro(Nr.REFERENCE,this.constraint.start,this.constraint.end,this.isDraped,this.domain)]}},Jye=class extends uM{constructor(e){super({...e,constraint:new nM(e.edgeStart,e.edgeEnd)})}get hints(){return[new Ro(Nr.REFERENCE,this.constraint.start,this.constraint.end,this.isDraped,this.domain)]}},y9=class v9 extends Dw{constructor(e,i,n,r,s=mi.ALL){super(r,s),this.previousVertex=e,this.centerVertex=i,this.nextVertex=n}equals(e){return e instanceof v9&&pt(this.previousVertex,e.previousVertex)&&pt(this.centerVertex,e.centerVertex)&&pt(this.nextVertex,e.nextVertex)}},b9=class extends qp{constructor({targetPoint:e,constraint:i,previousVertex:n,otherVertex:r,otherVertexType:s,objectId:o,isDraped:a}){super(e,i,a,mi.SELF),this.previousVertex=n,this.otherVertex=r,this.otherVertexType=s,this.objectId=o}get hints(){const e=this.previousVertex,i=this.otherVertexType===$p.CENTER?this.otherVertex:this.targetPoint,n=this.otherVertexType===$p.CENTER?this.targetPoint:this.otherVertex;return[new Ro(Nr.TARGET,i,n,this.isDraped,this.domain),new Ro(Nr.REFERENCE,e,i,this.isDraped,this.domain),new y9(this.previousVertex,i,n,this.isDraped,this.domain)]}};var $p;(function(t){t[t.NEXT=0]="NEXT",t[t.CENTER=1]="CENTER"})($p||($p={}));function Yye(t,e,i,n,r=se()){const s=In(aT,t);return s[2]=bj(n,s,e,i)||0,n.renderCoordsHelper.toRenderCoords(s,e,r),r}function Hi(t,e,i,n){return n.type==="2d"?(f0.x=t[0],f0.y=t[1],f0.spatialReference=e,n.toScreen(f0)):(Yye(t,e,i,n,aT),n.state.camera.projectToScreen(aT,vS),ji(vS[0],vS[1]))}const f0=td(0,0,0,null),aT=se(),vS=mQ();let Fl=class extends X{get updating(){return this._snappingSources.some(e=>e==null||e.valid&&e.snappingSource.updating)||this._updatingHandles.updating}constructor(e){super(e),this.options=null,this._domain=mi.FEATURE,this._updatingHandles=new nc,this._sourceModules={featureService:{module:null,loader:null},featureCollection:{module:null,loader:null},graphics:{module:null,loader:null},notes:{module:null,loader:null},scene:{module:null,loader:null}}}initialize(){const e=rW(()=>{var i;return(i=this.options)==null?void 0:i.featureSources},(i,n)=>this._createSourceInfo(i,n));this._snappingSources=e,this.addHandles(HL(e))}destroy(){this._set("options",null),this._updatingHandles.destroy()}async fetchCandidates(e,i,n,r){var l;if(!(i&this._domain&&this.options!=null&&this.options.effectiveFeatureEnabled))return[];const s=[],o=this._computeScreenSizeDistanceParameters(e,n);for(const u of this._snappingSources){if(u==null||!u.valid||!u.snappingSource.layerSource.enabled||(l=u.layerView)!=null&&l.suspended)continue;const p=u.getFetchCandidatesParameters(e,n,o);for(const f of p)s.push(u.snappingSource.fetchCandidates(f,r).then(m=>m.filter(g=>!this._candidateIsExcluded(u.snappingSource,g,n.excludeFeature))))}const a=(await G7(s)).flat();return this._addRightAngleCandidates(a,e,o,n),Qe(r),cM(e,a),a}_addRightAngleCandidates(e,i,n,r){var f,m,g,y,v,b,_,$;const s=r.vertexHandle!=null?(m=(f=r.vertexHandle.rightEdge)==null?void 0:f.rightVertex)==null?void 0:m.pos:r.editGeometryOperations!=null&&r.editGeometryOperations.data.type==="polygon"?(y=(g=r.editGeometryOperations.data.components[0])==null?void 0:g.getFirstVertex())==null?void 0:y.pos:null,o=r.vertexHandle!=null?(b=(v=r.vertexHandle.leftEdge)==null?void 0:v.leftVertex)==null?void 0:b.pos:r.editGeometryOperations!=null?($=(_=r.editGeometryOperations.data.components[0])==null?void 0:_.getLastVertex())==null?void 0:$.pos:null,{view:a}=this,l=ht(s,a,r),u=ht(o,a,r),p=e.length;for(let x=0;x<p;x++)this._addRightAngleCandidate(e[x],u,i,n,e),this._addRightAngleCandidate(e[x],l,i,n,e)}_addRightAngleCandidate(e,i,n,r,s){if(i==null||!Xye(e))return;const o=e.constraint.closestTo(i),a=(o[0]-n[0])/r.x,l=(o[1]-n[1])/r.y,{start:u,end:p}=e.constraint;if(a*a+l*l<=1){const f=new b9({targetPoint:o,otherVertex:i,otherVertexType:$p.NEXT,previousVertex:Pr(o,u)>Pr(o,p)?u:p,constraint:new o9(i,o),objectId:e.objectId,isDraped:e.isDraped});s.push(f)}}_computeScreenSizeDistanceParameters(e,i){let n=this.options!=null?this.options.distance*(i.pointer==="touch"?this.options.touchSensitivityMultiplier:1):0;return this.view==null?{x:n,y:n,z:n,distance:n}:this.view.type==="2d"?(n*=this.view.resolution,{x:n,y:n,z:n,distance:n}):this._computeScreenSizeDistanceParameters3D(e,n,this.view,i)}_computeScreenSizeDistanceParameters3D(e,i,n,r){const{spatialReference:s}=r;n.renderCoordsHelper.toRenderCoords(e,s,NA);const o=n.state.camera.computeScreenPixelSizeAt(NA),a=o*n.renderCoordsHelper.unitInMeters,l=a/Cn(s),u=a/u$(s),p=i*l,f=i*u,m=Hi(e,s,Ft,n),g=m?bS(m,e,l,0,0,n,r):0,y=m?bS(m,e,0,l,0,n,r):0,v=m?bS(m,e,0,0,u,n,r):0;return{x:g===0?0:p/g,y:y===0?0:p/y,z:v===0?0:f/v,distance:o*i}}_candidateIsExcluded(e,i,n){if(n==null)return!1;const r=this._getCandidateObjectId(i);if(r==null)return!1;const s=e.layerSource.layer;return s.type==="graphics"?n.uid===r:n.sourceLayer===s&&!(!n.attributes||!("objectIdField"in s))&&n.attributes[s.objectIdField]===r}_getCandidateObjectId(e){return e instanceof uM?e.objectId:null}async _createSourceInfo(e,i){const n=e.layer;n.loaded||(await n.load(),Qe(i));const{view:r}=this,s=await this._createFeatureSnappingSourceType(e);return Qe(i),new mr(s==null?{}:{snappingSource:s,view:r,layer:n})}async _createFeatureSnappingSourceType(e){switch(e.layer.type){case"feature":case"geojson":case"csv":case"oriented-imagery":case"subtype-group":case"wfs":return this._createFeatureSnappingSourceFeatureLayer(e);case"graphics":return this._createFeatureSnappingSourceGraphicsLayer(e);case"map-notes":return this._createFeatureSnappingSourceMapNotesLayer(e);case"scene":case"building-scene":return this._createFeatureSnappingSourceSceneLayer(e)}return null}async _createFeatureSnappingSourceSceneLayer(e){const{view:i}=this;return i==null||i.type!=="3d"?null:new(await this._getSourceModule("scene")).SceneLayerSnappingSource({layerSource:e,view:i})}async _createFeatureSnappingSourceFeatureLayer(e){var i;switch((i=e.layer.source)==null?void 0:i.type){case"feature-layer":case"oriented-imagery":return new(await this._getSourceModule("featureService")).FeatureServiceSnappingSource({spatialReference:this.spatialReference,view:this.view,layerSource:e});case"memory":case"csv":case"geojson":case"wfs":return e.layer.geometryType==="mesh"?null:new(await this._getSourceModule("featureCollection")).FeatureCollectionSnappingSource({layerSource:e,view:this.view})}return null}async _createFeatureSnappingSourceGraphicsLayer(e){return new(await this._getSourceModule("graphics")).GraphicsSnappingSource({getGraphicsLayers:()=>[e.layer],spatialReference:this.spatialReference,view:this.view,layerSource:e})}async _createFeatureSnappingSourceMapNotesLayer(e){return new(await this._getSourceModule("notes")).GraphicsSnappingSource({getGraphicsLayers:()=>{var i;return((i=e.layer.sublayers)==null?void 0:i.toArray())??[]},spatialReference:this.spatialReference,view:this.view,layerSource:e})}async _getSourceModule(e){const i=this._sourceModules[e];if(i.loader==null){const n=this._loadSourceModule(e),r={module:null,loader:n};this._sourceModules[e]=r;const s=await n,o={module:s,loader:n};return this._sourceModules[e]=o,s}return i.module==null?i.loader:i.module}_loadSourceModule(e){const i=this._updatingHandles;switch(e){case"featureService":return i.addPromise(V(()=>import("./FeatureServiceSnappingSource-pBm1M6ra.js"),__vite__mapDeps([283,284,285,96,286,287,288,174]),import.meta.url));case"featureCollection":return i.addPromise(V(()=>import("./FeatureCollectionSnappingSource-fIoEKGOM.js"),__vite__mapDeps([289,284,286,287,288,55,23]),import.meta.url));case"graphics":case"notes":return i.addPromise(V(()=>import("./GraphicsSnappingSource-50tCfoPx.js"),__vite__mapDeps([290,284,218,15,12,16,13,14,17,18,19,20,9,21,22,23,24,25,26,27,2,1,3,4,5,28,29,119,120,121,286,287,288,55]),import.meta.url));case"scene":return i.addPromise(V(()=>import("./SceneLayerSnappingSource-ykWCZ0z1.js"),__vite__mapDeps([291,174,34,35,36,37,38,39,40,41,42,43,44,287,288]),import.meta.url))}}get test(){return{snappingSources:this._snappingSources}}};function Xye(t){return(t instanceof Jye||t instanceof Kye)&&!Qye(t)}function Qye({constraint:{start:t,end:e}}){const i=sd(t,e),n=Pr(t,e);return i<Vi()||n/i<t0e}function bS(t,e,i,n,r,s,{spatialReference:o}){const a=In(e0e,e);a[0]+=i,a[1]+=n,a[2]+=r;const l=Hi(a,o,Ft,s);return l?Bye(l,t):1/0}c([d({constructOnly:!0})],Fl.prototype,"spatialReference",void 0),c([d({constructOnly:!0})],Fl.prototype,"view",void 0),c([d()],Fl.prototype,"options",void 0),c([d({readOnly:!0})],Fl.prototype,"updating",null),c([d()],Fl.prototype,"_snappingSources",void 0),Fl=c([S("esri.views.interactive.snapping.FeatureSnappingEngine")],Fl);const NA=se(),e0e=se(),t0e=1e-4;let Fw=class{constructor(e,i){this.view=e,this.options=i,this.squaredShortLineThreshold=Fa.shortLineThreshold*Fa.shortLineThreshold}snap(e,i){return i.vertexHandle!=null?i.vertexHandle.type!=="vertex"?[]:this.snapExistingVertex(e,i):this.snapNewVertex(e,i)}edgeExceedsShortLineThreshold(e,i){return this.exceedsShortLineThreshold(ht(e.leftVertex.pos,this.view,i),ht(e.rightVertex.pos,this.view,i),i)}exceedsShortLineThreshold(e,i,{spatialReference:n}){return this.squaredShortLineThreshold===0||Id(Hi(i,n,Ft,this.view),Hi(e,n,Ft,this.view))>this.squaredShortLineThreshold}isVertical(e,i){return Pr(e,i)<Fa.verticalLineThreshold}squaredProximityThreshold(e){return e==="touch"?this._squaredTouchProximityThreshold:this._squaredMouseProximityThreshold}get _squaredMouseProximityThreshold(){return this.options.distance*this.options.distance}get _squaredTouchProximityThreshold(){const{distance:e,touchSensitivityMultiplier:i}=this.options,n=e*i;return n*n}},i0e=class extends qp{constructor({lineStart:e,lineEnd:i,targetPoint:n,isDraped:r}){super(n,new a9(e,i),r,mi.SELF),this._referenceLineHint=new Ro(Nr.REFERENCE_EXTENSION,e,i,r,this.domain)}get hints(){return[this._referenceLineHint,new Ro(Nr.TARGET,this._lineEndClosestToTarget(),this.targetPoint,this.isDraped,this.domain)]}_lineEndClosestToTarget(){return this.constraint.closestEndTo(this.targetPoint)}},n0e=class extends Fw{snapNewVertex(e,i){const n=i.editGeometryOperations.data.components[0],r=n.edges.length,s=[];if(r<1)return s;const{spatialReference:o}=i,a=Hi(e,o,Ft,this.view),{view:l}=this,u=n.edges[r-1];let p=u;do{if(this.edgeExceedsShortLineThreshold(p,i)){const f=p1(p,l,i);this._processCandidateProposal(f.left,f.right,e,a,i,s)}p=p.leftVertex.leftEdge}while(p&&p!==u);return s}snapExistingVertex(e,i){const n=[],r=i.vertexHandle,s=r.component;if(s.edges.length<2)return n;const{view:o}=this,{spatialReference:a}=i,l=Hi(e,a,Ft,o),u=r.leftEdge,p=r.rightEdge;u&&p&&this.edgeExceedsShortLineThreshold(u,i)&&this.edgeExceedsShortLineThreshold(p,i)&&this._processCandidateProposal(ht(u.leftVertex.pos,o,i),ht(p.rightVertex.pos,o,i),e,l,i,n);const f=s.edges[0];let m=f;do{if(m!==r.leftEdge&&m!==r.rightEdge&&this.edgeExceedsShortLineThreshold(m,i)){const g=p1(m,o,i);this._processCandidateProposal(g.left,g.right,e,l,i,n)}m=m.rightVertex.rightEdge}while(m&&m!==f);return n}_processCandidateProposal(e,i,n,r,s,o){var p;const{spatialReference:a,pointer:l}=s,u=Xk(n,{start:e,end:i,type:ft.LINE});Id(r,Hi(u,a,Ft,this.view))<this.squaredProximityThreshold(l)&&o.push(new i0e({lineStart:e,lineEnd:i,targetPoint:u,isDraped:((p=s.elevationInfo)==null?void 0:p.mode)==="on-the-ground"}))}},r0e=class w9 extends Dw{constructor(e,i,n,r=mi.ALL){super(n,r),this.lineStart=e,this.lineEnd=i}equals(e){return e instanceof w9&&pt(this.lineStart,e.lineStart)&&pt(this.lineEnd,e.lineEnd)}},s0e=class extends qp{constructor({referenceLine:e,lineStart:i,targetPoint:n,isDraped:r}){const s=tr(i),{left:o,right:a}=e;kt(s,Do(s,s,a),o),super(n,new a9(i,s),r,mi.SELF),this._referenceLines=[{edge:e,fadeLeft:!0,fadeRight:!0}]}get hints(){return[new Ro(Nr.TARGET,this.constraint.start,this.targetPoint,this.isDraped,this.domain),new r0e(this.constraint.start,this.targetPoint,this.isDraped,this.domain),...this._referenceLines.map(e=>new Ro(Nr.REFERENCE,e.edge.left,e.edge.right,this.isDraped,this.domain,e.fadeLeft,e.fadeRight))]}addReferenceLine(e){const i={edge:e,fadeLeft:!0,fadeRight:!0};this._referenceLines.forEach(n=>{pt(e.right,n.edge.left)&&(n.fadeLeft=!1,i.fadeRight=!1),pt(e.right,n.edge.right)&&(n.fadeRight=!1,i.fadeRight=!1),pt(e.left,n.edge.right)&&(n.fadeRight=!1,i.fadeLeft=!1),pt(e.left,n.edge.left)&&(n.fadeLeft=!1,i.fadeLeft=!1)}),this._referenceLines.push(i)}},o0e=class extends Fw{snapNewVertex(e,i){const n=i.editGeometryOperations.data.components[0],r=n.edges.length,s=n.vertices.length,o=[];if(r<2)return o;const{view:a}=this,l=Hi(e,i.spatialReference,Ft,a),u=ht(n.vertices[s-1].pos,a,i),p=ht(n.vertices[0].pos,a,i),f=n.edges[r-1];let m=f;do{if(this.edgeExceedsShortLineThreshold(m,i)){const g=p1(m,a,i);this._checkEdgeForParallelLines(g,u,e,l,i,o),this._checkEdgeForParallelLines(g,p,e,l,i,o)}m=m.leftVertex.leftEdge}while(m&&m!==f);return o}snapExistingVertex(e,i){const n=[],r=i.vertexHandle,s=r.component;if(s.edges.length<3)return n;const{view:o}=this,a=Hi(e,i.spatialReference,Ft,o),l=r.leftEdge,u=r.rightEdge,p=s.vertices[0],f=ht(p.pos,o,i),m=s.vertices.length,g=s.vertices[m-1],y=ht(g.pos,o,i),v=s.edges[0];let b=v;do{if(b!==l&&b!==u&&this.edgeExceedsShortLineThreshold(b,i)){const _=p1(b,o,i);l&&this._checkEdgeForParallelLines(_,ht(l.leftVertex.pos,o,i),e,a,i,n),u&&this._checkEdgeForParallelLines(_,ht(u.rightVertex.pos,o,i),e,a,i,n),r===p?this._checkEdgeForParallelLines(_,y,e,a,i,n):r===g&&this._checkEdgeForParallelLines(_,f,e,a,i,n)}b=b.rightVertex.rightEdge}while(b&&b!==v);return n}_checkEdgeForParallelLines(e,i,n,r,s,o){var m;const a=e.left,l=e.right;if(uS(Bc,i,a,l),Pr(Bc,i)<Fa.parallelLineThreshold)return;uS(Bc,n,a,l,i);const{spatialReference:u,pointer:p}=s,f=_c(Bc[0],Bc[1],n[2]);if(Id(r,Hi(f,u,Ft,this.view))<this.squaredProximityThreshold(p)){if(this.isVertical(f,i)||this.isVertical(a,l)||this._parallelToPreviousCandidate(e,o))return;o.push(new s0e({referenceLine:e,lineStart:i,targetPoint:f,isDraped:((m=s.elevationInfo)==null?void 0:m.mode)==="on-the-ground"}))}}_parallelToPreviousCandidate(e,i){const n=e.left,r=e.right;for(const s of i)if(uS(Bc,r,s.constraint.start,s.constraint.end,n),Pr(Bc,r)<Fa.parallelLineThreshold)return s.addReferenceLine(e),!0;return!1}};const Bc=Ce();let a0e=class extends Fw{snapNewVertex(e,i){const n=i.editGeometryOperations.data.components[0],r=n.vertices.length,s=[];if(r<2)return s;const{view:o}=this,a=Hi(e,i.spatialReference,Ft,o),l=n.vertices[r-1];if(this.edgeExceedsShortLineThreshold(l.leftEdge,i)){const p=ht(l.pos,o,i),f=ht(l.leftEdge.leftVertex.pos,o,i);this._checkForSnappingCandidate(s,f,p,e,a,i)}const u=n.vertices[0];if(this.edgeExceedsShortLineThreshold(u.rightEdge,i)){const p=ht(u.pos,o,i),f=ht(u.rightEdge.rightVertex.pos,o,i);this._checkForSnappingCandidate(s,f,p,e,a,i)}return s}snapExistingVertex(e,i){const n=[],r=i.vertexHandle;if(r.component.vertices.length<3)return n;const{view:s}=this,o=Hi(e,i.spatialReference,Ft,s),a=r.leftEdge,l=r.rightEdge;if(a!=null&&a.leftVertex.leftEdge){const u=a.leftVertex.leftEdge;if(this.edgeExceedsShortLineThreshold(u,i)){const p=ht(u.rightVertex.pos,s,i),f=ht(u.leftVertex.pos,s,i);this._checkForSnappingCandidate(n,f,p,e,o,i)}}if(l!=null&&l.rightVertex.rightEdge){const u=l.rightVertex.rightEdge;if(this.edgeExceedsShortLineThreshold(u,i)){const p=ht(u.leftVertex.pos,s,i),f=ht(u.rightVertex.pos,s,i);this._checkForSnappingCandidate(n,f,p,e,o,i)}}return n}_checkForSnappingCandidate(e,i,n,r,s,o){var m;const{spatialReference:a,pointer:l}=o;Lt(m0,n,i);const u=xi(l0e,m0[1],-m0[0],0),p=Ya(u,Lt(m0,r,n))/Lo(u),f=Ir(tr(r),n,u,p);if(Id(s,Hi(f,a,Ft,this.view))<this.squaredProximityThreshold(l)){if(this.isVertical(f,n)||this.isVertical(n,i))return;const g=Kn(se(),n,u,Math.sign(p));e.push(new b9({targetPoint:f,constraint:new o9(n,g),previousVertex:i,otherVertex:n,otherVertexType:$p.CENTER,isDraped:((m=o.elevationInfo)==null?void 0:m.mode)==="on-the-ground"}))}}};const m0=Ce(),l0e=se();let c0e=class extends qp{constructor({targetPoint:e,point1:i,point2:n,isDraped:r}){super(e,new s9(JT(se(),i,n,.5),.5*Dp(i,n)),r,mi.SELF),this._p1=i,this._p2=n}get hints(){return[new Ro(Nr.REFERENCE,this.targetPoint,this._p1,this.isDraped,this.domain),new Ro(Nr.REFERENCE,this.targetPoint,this._p2,this.isDraped,this.domain),new y9(this._p1,this.targetPoint,this._p2,this.isDraped,this.domain)]}},u0e=class extends Fw{snapNewVertex(e,i){const n=i.editGeometryOperations.data.components[0],r=[],s=n.vertices.length;if(i.editGeometryOperations.data.type!=="polygon"||s<2)return r;const{view:o}=this,a=n.vertices[0],l=n.vertices[s-1],u=ht(a.pos,o,i),p=ht(l.pos,o,i);return this._processCandidateProposal(u,p,e,i,r),r}snapExistingVertex(e,i){const n=[],r=i.vertexHandle,s=r.component;if(s.edges.length<2||i.editGeometryOperations.data.type==="polyline"&&(r.index===0||r.index===s.vertices.length-1))return n;const{view:o}=this,a=ht(r.leftEdge.leftVertex.pos,o,i),l=ht(r.rightEdge.rightVertex.pos,o,i);return this._processCandidateProposal(a,l,e,i,n),n}_processCandidateProposal(e,i,n,r,s){var g;if(!this.exceedsShortLineThreshold(e,i,r))return;const o=ok(d0e,e,i,.5),a=.5*Dp(e,i),l=se();iye(l,n,o,a),l[2]=n[2];const u=l,{spatialReference:p,pointer:f}=r,m=Hi(n,p,Ft,this.view);if(Id(m,Hi(u,p,Ft,this.view))<this.squaredProximityThreshold(f)){if(this.isVertical(e,u)||this.isVertical(u,i))return;s.push(new c0e({targetPoint:u,point1:e,point2:i,isDraped:((g=r.elevationInfo)==null?void 0:g.mode)==="on-the-ground"}))}}};const d0e=Ce();let Th=class extends X{constructor(e){super(e),this.updating=!1,this._snappers=new te,this._domain=mi.SELF}initialize(){this._snappers.push(new o0e(this.view,this.options),new n0e(this.view,this.options),new a0e(this.view,this.options),new u0e(this.view,this.options))}set options(e){this._set("options",e);for(const i of this._snappers)i.options=e}async fetchCandidates(e,i,n){if(!(i&this._domain&&this.options.effectiveSelfEnabled))return[];const r=[];for(const s of this._snappers.items)for(const o of s.snap(e,n))r.push(o);return cM(e,r),r}};c([d({readOnly:!0})],Th.prototype,"updating",void 0),c([d({constructOnly:!0})],Th.prototype,"view",void 0),c([d()],Th.prototype,"options",null),Th=c([S("esri.views.interactive.snapping.SelfSnappingEngine")],Th);function h0e(t,e){return[new Th({view:t,options:e}),new Fl({view:t,options:e,spatialReference:t.spatialReference})]}let $u=class extends X{constructor(e){super(e),this.layer=null,this.enabled=!0,this.updating=!1,this.availability=1}};c([d({constructOnly:!0})],$u.prototype,"layer",void 0),c([d()],$u.prototype,"enabled",void 0),c([d()],$u.prototype,"updating",void 0),c([d()],$u.prototype,"availability",void 0),$u=c([S("esri.views.interactive.snapping.FeatureSnappingLayerSource")],$u);const _9=$u;let Hn=class extends X{constructor(e){super(e),this.enabled=!1,this.enabledToggled=!1,this.selfEnabled=!0,this.featureEnabled=!0,this.featureSources=new te,this.distance=Fa.distance,this.touchSensitivityMultiplier=Fa.touchSensitivityMultiplier}get effectiveEnabled(){return this.enabledToggled?!this.enabled:this.enabled}get effectiveSelfEnabled(){return this.effectiveEnabled&&this.selfEnabled}get effectiveFeatureEnabled(){return this.effectiveEnabled&&this.featureEnabled}};c([d()],Hn.prototype,"enabled",void 0),c([d()],Hn.prototype,"enabledToggled",void 0),c([d()],Hn.prototype,"selfEnabled",void 0),c([d()],Hn.prototype,"featureEnabled",void 0),c([d({type:te.ofType(_9)})],Hn.prototype,"featureSources",void 0),c([d()],Hn.prototype,"distance",void 0),c([d()],Hn.prototype,"touchSensitivityMultiplier",void 0),c([d({readOnly:!0})],Hn.prototype,"effectiveEnabled",null),c([d({readOnly:!0})],Hn.prototype,"effectiveSelfEnabled",null),c([d({readOnly:!0})],Hn.prototype,"effectiveFeatureEnabled",null),Hn=c([S("esri.views.interactive.snapping.SnappingOptions")],Hn);const oy=Hn;function DA(t,e,{z:i,m:n,spatialReference:r,elevationInfo:s}){if(i==null&&n==null){const l=td(t[0],t[1],void 0,r);return n!=null&&(l.m=n,l.hasM=!0),l}if(e==null||e.type==="2d"){const l=td(t[0],t[1],i,r);return n!=null&&(l.m=n,l.hasM=!0),l}const o=bj(e,t,r,Ft,s)??0,a=td(t[0],t[1],o,r);return n!=null&&(a.m=n,a.hasM=!0),a}let p0e=class S9 extends Dw{constructor(e,i,n=mi.ALL){super(i,n),this.intersectionPoint=e}equals(e){return e instanceof S9&&pt(this.intersectionPoint,e.intersectionPoint)}},g0=class extends qp{constructor(e,i,n,r){super(e,new Bp(e),r,mi.ALL),this.first=i,this.second=n}get hints(){return this.first.targetPoint=this.targetPoint,this.second.targetPoint=this.targetPoint,[...this.first.hints,...this.second.hints,new p0e(this.targetPoint,this.isDraped,this.domain)]}},as=class extends An.EventedMixin(X){constructor(e){super(e),this.options=new oy,this.snappingEnginesFactory=h0e,this._engines=[],this._currentMainCandidate=null,this._currentOtherActiveCandidates=[],this._currentSnappedType=Ea.MAIN}initialize(){this.addHandles([Z(()=>{const{effectiveFeatureEnabled:e,effectiveSelfEnabled:i,touchSensitivityMultiplier:n,distance:r}=this.options;return{effectiveFeatureEnabled:e,effectiveSelfEnabled:i,touchSensitivityMultiplier:n,distance:r}},()=>{this.doneSnapping(),this.emit("changed")},hc),Z(()=>this.options,e=>{for(const i of this._engines)i.options=e},hc),Z(()=>({viewReady:this.view.ready,viewSpatialReference:this.view.spatialReference,snappingEnginesFactory:this.snappingEnginesFactory}),({viewReady:e,snappingEnginesFactory:i})=>this._recreateEngines(e,i),di)])}destroy(){this._destroyEngines()}get updating(){return this._engines.some(e=>e.updating)}_recreateEngines(e,i){if(this._destroyEngines(),!e)return;const{view:n,options:r}=this;this._engines=i(n,r)}_destroyEngines(){for(const e of this._engines)e.destroy();this._engines=[]}get _squaredMouseProximityTreshold(){return this.options.distance*this.options.distance}get _squaredTouchProximityThreshold(){const{distance:e,touchSensitivityMultiplier:i}=this.options,n=e*i;return n*n}get _squaredSatisfiesConstraintThreshold(){return Fa.satisfiesConstraintScreenThreshold*Fa.satisfiesConstraintScreenThreshold}snap(e){return f0e(e)?this._snapMultiPoint(e):this._snapSinglePoint(e)}update(e){const{point:i,context:n}=e;this._removeVisualization();const r=this._currentMainCandidate;if(r==null)return i;const s=this._selectUpdateInput(e);if(s==null)return i;const{spatialReference:o}=n,a=Oo(s,o);if(a==null)return i;const{view:l}=this,{elevationInfo:u,visualizer:p}=n,f=[],m=lm(a,l,u),g=r.constraint.closestTo(m);if(!this._arePointsWithinScreenThreshold(m,g,n))return this._resetSnappingState(),i;r.targetPoint=g,f.push(...r.hints);for(const y of this._currentOtherActiveCandidates)y.targetPoint=g,f.push(...y.hints);return p!=null&&this.addHandles(p.draw(f,{spatialReference:o,elevationInfo:m0e(n),view:l,selfSnappingZ:n.selfSnappingZ}),y0),DA(g,l,{z:i.z,m:i.m,spatialReference:i.spatialReference,elevationInfo:u})}doneSnapping(){this._removeVisualization(),this._resetSnappingState()}_selectUpdateInput({point:e,scenePoint:i}){switch(this._currentSnappedType){case Ea.MAIN:return e;case Ea.SCENE:return i}}_resetSnappingState(){this._currentMainCandidate=null,this._currentOtherActiveCandidates=[],this._currentSnappedType=Ea.MAIN}_removeVisualization(){this.removeHandles(y0)}async _snapSinglePoint({point:e,context:i,signal:n}){const{view:r}=this,{elevationInfo:s}=i,o=lm(e,r,s),a=await this._fetchCandidates(o,mi.ALL,i,n);return this._createSnapResult(o,Ea.MAIN,a,r,i,{z:e.z,m:e.m,spatialReference:e.spatialReference,elevationInfo:s},n)}async _snapMultiPoint({point:e,scenePoint:i,context:n,signal:r}){const{view:s}=this,{coordinateHelper:o,elevationInfo:a,spatialReference:l}=n;await xE(i.spatialReference,l);const u=Oo(i,l),p=lm(u,s,a),f=await this._fetchCandidates(p,mi.FEATURE,n,r);if(f.length>0){const y=await this._fetchCandidates(p,mi.SELF,n,r);return this._createSnapResult(p,Ea.SCENE,[...f,...y],s,n,{z:u.z,m:u.m,spatialReference:u.spatialReference,elevationInfo:a},r)}const m=lm(e,s,a),g=await this._fetchCandidates(m,mi.SELF,n,r);return this._createSnapResult(m,Ea.MAIN,g,s,n,{z:o.hasZ()&&e.hasZ?e.z??0:void 0,m:o.hasM()&&e.hasM?e.m??0:void 0,spatialReference:e.spatialReference,elevationInfo:a},r)}async _fetchCandidates(e,i,n,r){return(await Promise.all(this._engines.map(s=>s.fetchCandidates(e,i,n,r)))).flat()}_createSnapResult(e,i,n,r,s,o,a){return{get valid(){return!er(a)},apply:()=>{const{spatialReference:l}=s,{snappedPoint:u,hints:p}=this._processCandidates(e,i,n,s);return this._removeVisualization(),s.visualizer!=null&&this.addHandles(s.visualizer.draw(p,{spatialReference:l,elevationInfo:Ft,view:r,selfSnappingZ:s.selfSnappingZ}),y0),DA(u,r,o)}}}_processCandidates(e,i,n,r){if(n.length<1)return this.doneSnapping(),{snappedPoint:e,hints:[]};this._currentSnappedType!==i&&this._resetSnappingState(),cM(e,n);const s=this._currentMainCandidate;if(s!=null){const o=this._findOldConstraintInNewCandidates(s,n);if(o>=0){if(!(n[o]instanceof g0))return this._intersectWithOtherCandidates(o,n,e,i,r);if(this._arePointsWithinScreenThreshold(e,s.targetPoint,r))return this._updateSnappingCandidate(s,i,n,r)}}return this._intersectWithOtherCandidates(0,n,e,i,r)}_findOldConstraintInNewCandidates(e,i){return e instanceof g0?this._findOldCandidateIndex(i,e.first)>=0&&this._findOldCandidateIndex(i,e.second)>=0?0:-1:this._findOldCandidateIndex(i,e)}_intersectWithOtherCandidates(e,i,n,r,s){const{coordinateHelper:o}=s,a=i[e],l=[];for(let u=0;u<i.length;++u){if(u===e)continue;const p=i[u],f=a.constraint.intersect(p.constraint);if(f)for(const m of f.closestPoints(a.targetPoint))l.push([new g0(m,a,p,p.isDraped),this._squaredScreenDistance(n,m,o)])}return l.length>0&&(l.sort((u,p)=>u[1]-p[1]),l[0][1]<this._squaredPointProximityThreshold(s.pointer))?this._updateSnappingCandidate(l[0][0],r,i,s):this._updateSnappingCandidate(a,r,i,s)}_updateSnappingCandidate(e,i,n,r){this.doneSnapping(),this._currentMainCandidate=e,this._currentSnappedType=i;const s=this._currentMainCandidate.targetPoint,o=[];o.push(...e.hints);for(const a of n){if(e instanceof g0){if(a.constraint.equals(e.first.constraint)||a.constraint.equals(e.second.constraint))continue}else if(a.constraint.equals(e.constraint))continue;const l=a.constraint.closestTo(s);this._squaredScreenDistance(l,s,r.coordinateHelper)<this._squaredSatisfiesConstraintThreshold&&(a.targetPoint=s,this._currentOtherActiveCandidates.push(a),o.push(...a.hints))}return{snappedPoint:s,hints:o}}_squaredPointProximityThreshold(e){return e==="touch"?this._squaredTouchProximityThreshold:this._squaredMouseProximityTreshold}_arePointsWithinScreenThreshold(e,i,n){return this._squaredScreenDistance(e,i,n.coordinateHelper)<this._squaredPointProximityThreshold(n.pointer)}_squaredScreenDistance(e,i,n){return Id(this._toScreen(e,n),this._toScreen(i,n))}_toScreen(e,i){return Hi(e,i.spatialReference,Ft,this.view)}_findOldCandidateIndex(e,i){let n=-1;for(let r=0;r<e.length;++r)if(i.constraint.equals(e[r].constraint)){n=r;break}return n}get test(){return{visualizationsActive:this.hasHandles(y0),engines:this._engines}}};var Ea;c([d({constructOnly:!0})],as.prototype,"view",void 0),c([d()],as.prototype,"options",void 0),c([d({readOnly:!0})],as.prototype,"updating",null),c([d()],as.prototype,"snappingEnginesFactory",void 0),c([d()],as.prototype,"_engines",void 0),c([d()],as.prototype,"_squaredMouseProximityTreshold",null),c([d()],as.prototype,"_squaredTouchProximityThreshold",null),c([d()],as.prototype,"_squaredSatisfiesConstraintThreshold",null),as=c([S("esri.views.interactive.snapping.SnappingManager")],as),function(t){t[t.MAIN=0]="MAIN",t[t.SCENE=1]="SCENE"}(Ea||(Ea={}));const y0="visualization-handle";function f0e(t){return t.scenePoint!=null}function m0e({coordinateHelper:t,elevationInfo:e}){return t.hasZ()?Ft:e}function g0e(t){return(t==null?void 0:t.type)==="graphic"}function y0e(t){return t.find(g0e)??null}let Si=class extends An.EventedAccessor{constructor(e){super(e),this.cancelled=!1,this.history={undo:[],redo:[]},this.type=null}get tool(){if(!this.activeComponent)return null;switch(this.activeComponent.type){case"graphic-mover":case"move-3d":return"move";case"box":case"transform-3d":return"transform";case"reshape":case"reshape-3d":return"reshape";case"draw-2d":case"draw-3d":return this.activeComponent.geometryType;default:this.activeComponent}return null}addToHistory(e){this.history.redo=[],this.history.undo.push(e)}resetHistory(){this.history.redo=[],this.history.undo=[]}canUndo(){return this.history.undo.length>0}canRedo(){return this.history.redo.length>0}complete(){this._reset(),this.onEnd(),this.emit("complete")}cancel(){this.cancelled=!0,this.complete()}_reset(){var e;(e=this.activeComponent)==null||e.reset()}refreshComponent(){const e=this.activeComponent;e&&(e.type!=="box"&&e.type!=="reshape"&&e.type!=="graphic-mover"||e.refresh())}set undo(e){this._set("undo",()=>{this.canUndo()&&e()})}set redo(e){this._set("redo",()=>{this.canRedo()&&e()})}};c([d()],Si.prototype,"activeComponent",void 0),c([d()],Si.prototype,"cancelled",void 0),c([d()],Si.prototype,"history",void 0),c([d()],Si.prototype,"tool",null),c([d()],Si.prototype,"type",void 0),c([d()],Si.prototype,"canUndo",null),c([d()],Si.prototype,"canRedo",null),c([d()],Si.prototype,"onEnd",void 0),c([d()],Si.prototype,"undo",null),c([d()],Si.prototype,"redo",null),c([d()],Si.prototype,"toggleTool",void 0),c([d()],Si.prototype,"addToSelection",void 0),c([d()],Si.prototype,"removeFromSelection",void 0),Si=c([S("esri.widgets.Sketch.support.OperationHandle")],Si);let Cv=class extends Si{};c([d()],Cv.prototype,"activeComponent",void 0),Cv=c([S("esri.widgets.Sketch.support.CreateOperationHandle")],Cv);let Ia=class extends Si{};c([d()],Ia.prototype,"activeComponent",void 0),Ia=c([S("esri.widgets.Sketch.support.UpdateOperationHandle")],Ia);const FA={defaultZ:0},gf={reshapeOptions:{edgeOperation:"split",shapeOperation:"move",vertexOperation:"move"},enableMoveAllGraphics:!0,enableRotation:!0,enableScaling:!0,multipleSelectionEnabled:!0,preserveAspectRatio:!1,toggleToolOnClick:!0,enableZ:!0,highlightOptions:{enabled:!0},tool:"transform"};let rt=class extends An.EventedAccessor{constructor(t){super(t),this._numUpdating=0,this._internalGraphicsLayer=new Wk({listMode:"hide",internal:!0,title:"SVM Internal"}),this._operationHandle=null,this._viewHandlesKey="viewHandles",this.activeFillSymbol=null,this.activeLineSymbol=null,this.activeVertexSymbol=null,this.allowDeleteKey=!0,this.labelOptions=new Cw,this.layer=null,this.pointSymbol=new fp({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),this.polygonSymbol=new Vg({color:[150,150,150,.2],outline:{color:[50,50,50],width:2}}),this.polylineSymbol=new Ja({color:[130,130,130,1],width:2}),this.meshSymbol=new aw({symbolLayers:new te([new Pp])}),this._snappingManager=null,this.tooltipOptions=new Iw,this.updateGraphics=new te,this.updateOnGraphicClick=!0,this.vertexSymbol=new fp({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),this._moduleLoaderAbortController=null,this._viewReadyAbortController=null,this._originalPopupEnabled=null,this.defaultCreateOptions=FA,this.defaultUpdateOptions=gf,this.snappingOptions=new oy}initialize(){this.addHandles([Lr(()=>{var t,e;return(e=(t=this.view)==null?void 0:t.map)==null?void 0:e.layers},"change",t=>{t.removed.includes(this.layer)&&this.cancel()}),Lr(()=>{var t;return(t=this.layer)==null?void 0:t.graphics},"change",t=>{if(this._operationHandle!=null)for(const e of t.removed)this.updateGraphics.includes(e)&&(this.updateGraphics.length>1?this._operationHandle.removeFromSelection(e):this._operationHandle.cancel())}),Z(()=>{var t;return((t=this.layer)==null?void 0:t.elevationInfo)??null},t=>{t!==this._internalGraphicsLayer.elevationInfo&&(this.cancel(),this._internalGraphicsLayer.elevationInfo=t)},di),Z(()=>this.view,t=>{Oe(this._snappingManager),t&&(this._snappingManager=new as({view:t,options:this.snappingOptions}),t.type==="2d"?V(()=>import("./editingTools-UTIJrqsg.js"),__vite__mapDeps([292,293,76,294,288,114,110,295,296,96,297,47,298,8,299,284,300,49,285,70,301,302,303,155,32,120,121,91]),import.meta.url):t.type==="3d"&&(V(()=>import("./editingTools-2pnjWbkh.js"),__vite__mapDeps([304,91,297,114,295,47,298,8,299,284,198,97,96,305,203,306,43,184,214,215,41,23,183,216,307,40,296,223,308,49,36,82,50,301,35,37,309,110,39,48,186,44,187,285,42,294,288,300,70,302,303,155,32,310,119,120,121,311,151,312,313,314]),import.meta.url),V(()=>import("./Pattern.glsl-QU10RXSC.js").then(e=>e.G),__vite__mapDeps([315,305,203,306,43,184,214,215,41,23,183,216,307,40,296,96,223,308,49,36,82,50,301,35,37,309,110,39,48,186,97,44,187,285,42,70,124,93,84,123,85,125,126,122,127,128,29,26,3,295,66,316,155,32,317,318,130,53,319,320,321,12,13,21,303,15,16,28,119,120,121,202,2,322,191,46,47,51,52,129,190,18,234,323,230]),import.meta.url)))},di),Z(()=>{var t;return(t=this.view)==null?void 0:t.spatialReference},(t,e)=>{t&&e&&!t.equals(e)&&this.cancel()})]),Wye(this)}destroy(){this.cancel(),this._removeDefaultLayer(),this._snappingManager=Oe(this._snappingManager),this._set("view",null),this.emit("destroy")}get _defaultUpdateTool(){var t;return((t=this.view)==null?void 0:t.type)==="3d"?"move":"transform"}get updating(){return this._numUpdating>0||this._snappingManager!=null&&this._snappingManager.updating}get activeTool(){var t;return((t=this._operationHandle)==null?void 0:t.tool)??null}get activeComponent(){var t;return((t=this._operationHandle)==null?void 0:t.activeComponent)??null}get createGraphic(){return this.activeComponent==null||this.activeComponent.type!=="draw-3d"&&this.activeComponent.type!=="draw-2d"?this._get("createGraphic"):this.activeComponent.graphic}get defaultCreateOptions(){return this._get("defaultCreateOptions")}set defaultCreateOptions(t){this._set("defaultCreateOptions",{...FA,...t})}get defaultUpdateOptions(){return this._get("defaultUpdateOptions")}set defaultUpdateOptions(t){this._set("defaultUpdateOptions",{...gf,...t,reshapeOptions:{...gf.reshapeOptions,...t==null?void 0:t.reshapeOptions},highlightOptions:{...gf.highlightOptions,...t==null?void 0:t.highlightOptions}})}set snappingOptions(t){this._snappingManager!=null&&(this._snappingManager.options=t),this._set("snappingOptions",t)}get state(){var i;const t=!(!((i=this.view)!=null&&i.ready)||!this.layer),e=this._operationHandle;return t&&e?"active":t?"ready":"disabled"}get view(){return this._get("view")}set view(t){const e=this._get("view");if(e){const{container:n,map:r}=e;n&&(e.cursor=null),r==null||r.remove(this._internalGraphicsLayer),this.removeHandles(this._viewHandlesKey),this.cancel()}const i="view-ready";this.removeHandles(i),t&&this.addHandles(On(()=>t.ready,n=>{this.removeHandles(this._viewHandlesKey),n&&this.addHandles(this._generateViewHandles(t),this._viewHandlesKey)},di),i),this._set("view",t)}cancel(){this._moduleLoaderAbortController=_s(this._moduleLoaderAbortController),this._viewReadyAbortController=_s(this._viewReadyAbortController),this._operationHandle&&this._operationHandle.cancel()}complete(){this._operationHandle&&this._operationHandle.complete()}delete(){const{state:t,updateGraphics:e}=this;if(t==="active"&&e.length){const{activeTool:i,layer:n}=this,r=e.toArray();n.removeMany(r),this.cancel(),this._emitDeleteEvent({graphics:r,tool:i})}}duplicate(){if(this.state==="active"&&this.updateGraphics.length){const t=this.updateGraphics.map(e=>e.clone()).toArray();return this.layer.addMany(t),this.emit("duplicate",{graphics:t,type:"duplicate"}),t}return[]}async create(t,e){this.cancel(),await this._waitViewReady();const{view:i,layer:n}=this;if(!i||this.state==="disabled")throw n||this._logMissingLayer(),Xe();if(i.activeTool!=null&&(i.activeTool=null),!t)return void this._logError("sketch:missing-parameter","Missing parameter 'tool'.");xA(i,this._internalGraphicsLayer);const r=await this._setupCreateOperation(t,e);if(r==null||this.destroyed)return void i.map.remove(this._internalGraphicsLayer);const s=()=>{var o;if(r===this._operationHandle){const a=this.createGraphic,l=this._operationHandle.cancelled;this._operationHandle.destroy(),this._operationHandle=null,this._set("createGraphic",null),(o=this.view)!=null&&o.map&&this.view.map.remove(this._internalGraphicsLayer),r.cancelled||a==null||n.add(a),this.emit("create",{graphic:a,state:l?"cancel":"complete",tool:t,toolEventInfo:null,type:"create"})}};r.on("complete",s),this._operationHandle=r,i.ready&&i.focus()}async update(t,e){this.cancel(),await this._waitViewReady();const{layer:i,view:n,state:r}=this;if(!n||r==="disabled")throw i||this._logMissingLayer(),Xe();n.activeTool!=null&&(n.activeTool=null);const s=Array.isArray(t)?t:[t];if(t==null||!(s!=null&&s.length))return void this._logError("sketch:missing-parameter","Missing parameter 'graphics'.");if(s.some(a=>a.layer!==i?(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics missing from the supplied GraphicsLayer."),!0):a.geometry==null&&(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics with an unsupported geometry."),!0)))return;const o=await this._setupUpdateOperation(s,e);this.destroyed||o==null||Ht(o)||(xA(n,this._internalGraphicsLayer),this._setUpdateOperationHandle(o,e),this.emit("update",{graphics:s,state:"start",aborted:!1,tool:o.tool,toolEventInfo:null,type:"update"}))}async _updateSpatialReference(t){const e=this.view;if(e){this._beginAsyncOperation(),t=Array.isArray(t)?t:[t];for(const i of t)i.geometry==null||i.geometry.type==="mesh"||xt(i.geometry.spatialReference,e.spatialReference)||(Os(i.geometry.spatialReference,e.spatialReference)||Ka()||await Io(),i.geometry=Oo(i.geometry,e.spatialReference));this._endAsyncOperation()}else this._logMissingView()}undo(){var t;this.canUndo()&&((t=this._operationHandle)==null||t.undo())}redo(){var t;this.canRedo()&&((t=this._operationHandle)==null||t.redo())}canUndo(){return!(!this._operationHandle||!this._operationHandle.canUndo())}canRedo(){return!(!this._operationHandle||!this._operationHandle.canRedo())}toggleUpdateTool(){this._operationHandle&&this._operationHandle.toggleTool&&this._operationHandle.toggleTool()}async _getFirstHit(t){const e=this.view;if(!e)return this._logMissingView(),null;if(e.type==="2d"){const r=[];e.map.allLayers.forEach(o=>{o.type!=="vector-tile"&&o.type!=="imagery"||r.push(o)});const s=await e.hitTest(t,{exclude:r});return y0e(s.results)}const i=[e.map.ground];e.map.allLayers.forEach(r=>{r.type==="integrated-mesh"&&i.push(r)});const n=await e.hitTest(t,{exclude:i});if(n.results.length>0){const r=n.results[0];if(r!=null&&r.type==="graphic"&&r.graphic&&(!n.ground.mapPoint||e.map.ground.opacity<1||n.ground.distance-(r.distance??0)>-Math.min(3*n.ground.distance,e.viewingMode==="global"?qT(e.renderCoordsHelper.spatialReference).radius/e.renderCoordsHelper.unitInMeters:Number.POSITIVE_INFINITY)))return r}return null}_generateViewHandles(t){return[t.on("immediate-click",async e=>{var s;const i=this.state==="active"&&((s=this._operationHandle)==null?void 0:s.type)==="create";if(this.state==="disabled"||i||!this.updateOnGraphicClick)return;this._beginAsyncOperation();const n=await e.async(()=>this._getFirstHit(br(e)));let r=null;if(n!=null){const o=n.graphic;this.updateGraphics.includes(o)||o.layer===this.layer?(e.stopPropagation(),r=o):t.type!=="2d"||this._isComponentGraphic(o)||this.state!=="active"||this.cancel()}else this.state==="active"&&this.cancel();r==null||this.updateGraphics.includes(r)||await this.update([r],{...this.defaultUpdateOptions,reshapeOptions:{...this.defaultUpdateOptions.reshapeOptions}}),this._endAsyncOperation()},et.WIDGET)]}async _setupCreateOperation(t,e){const i=this.view;if(!i)return this._logMissingView(),null;const n={hasZ:i.type==="3d",...this.defaultCreateOptions,...e},r=await this._setupDrawGraphicTool(t,i,n);return r==null?null:(i.tools.add(r),i.activeTool=r,this._setupCreateOperationHandle(r))}async _setupDrawGraphicTool(t,e,i){if(t==="multipoint"&&e.type==="3d")return this._logError("sketch:create","Multipoint geometries are not supported in SceneView."),null;if(!e)return this._logMissingView(),null;const n=t!=="rectangle",r=t!=="rectangle",s={view:e,mode:t==="rectangle"||t==="circle"?"hybrid":"click",...i,snapToScene:!1,geometryType:t,graphicSymbol:this._getGraphicSymbolFromTool(t),snappingManager:this._snappingManager,forceUniformSize:r,centered:n};return e.type==="2d"?this._makeDrawGraphicTool2D(s):this._makeDrawGraphicTool3D(s)}async _makeDrawGraphicTool2D(t){const e=await this._requireModule(V(()=>import("./editingTools-UTIJrqsg.js"),__vite__mapDeps([292,293,76,294,288,114,110,295,296,96,297,47,298,8,299,284,300,49,285,70,301,302,303,155,32,120,121,91]),import.meta.url));return Ht(e)||this.destroyed?null:new e.module.DrawGraphicTool2D({...t,activeVertexSymbol:this.activeVertexSymbol,regularVerticesSymbol:this.vertexSymbol,activeLineSymbol:this.activeLineSymbol,activeFillSymbol:b0e(t.geometryType)?this.activeFillSymbol:null,tooltipOptions:this.tooltipOptions})}async _makeDrawGraphicTool3D(t){const e=await this._requireModule(V(()=>import("./editingTools-2pnjWbkh.js"),__vite__mapDeps([304,91,297,114,295,47,298,8,299,284,198,97,96,305,203,306,43,184,214,215,41,23,183,216,307,40,296,223,308,49,36,82,50,301,35,37,309,110,39,48,186,44,187,285,42,294,288,300,70,302,303,155,32,310,119,120,121,311,151,312,313,314]),import.meta.url));if(Ht(e)||this.destroyed)return null;const{elevationInfo:i}=this.layer;return new e.module.DrawGraphicTool3D({...t,elevationInfo:i,snapToScene:i==null||i.mode==="absolute-height",labelOptions:this.labelOptions,tooltipOptions:this.tooltipOptions})}_setupCreateOperationHandle(t){const e=this.view;if(!e)return this._logMissingView(),null;let i=null;const n=t.forceUniformSize,r=t.centered,s=[e.on("key-down",a=>{if(a.key===Ut.pan)a.stopPropagation(),a.repeat||(t.enabled=!1);else if(a.key===Ut.complete)a.stopPropagation(),t.completeCreateOperation();else if(a.key!==Ut.vertexAdd||a.repeat)a.key===Ut.undo?(a.stopPropagation(),o.undo()):a.key===Ut.redo?(a.stopPropagation(),o.redo()):a.key!==Ut.constraint||t.geometryType!=="rectangle"&&t.geometryType!=="circle"||a.repeat?a.key===Ut.center&&(a.repeat||(t.centered=!r,a.stopPropagation())):(t.forceUniformSize=!n,a.stopPropagation());else{const l=t.drawOperation.geometryType;l!=="polyline"&&l!=="polygon"&&l!=="multipoint"||(a.stopPropagation(),t.drawOperation.commitStagedVertex())}},et.WIDGET),e.on("key-up",a=>{a.key===Ut.pan?t.enabled=!0:a.key!==Ut.constraint||t.geometryType!=="rectangle"&&t.geometryType!=="circle"?a.key===Ut.center&&(t.centered=r,a.stopPropagation()):(t.forceUniformSize=n,a.stopPropagation())},et.WIDGET),t.on("vertex-add",a=>{switch(i=i==null?"start":"active",a.operation){case"apply":this.emit("create",{graphic:t.graphic,state:i,tool:this.activeTool,toolEventInfo:a,type:"create"});break;case"undo":this._emitUndoEvent({graphics:[t.graphic],tool:t.geometryType});break;case"redo":this._emitRedoEvent({graphics:[t.graphic],tool:t.geometryType})}}),t.on("cursor-update",a=>{t.drawOperation.numCommittedVertices>0&&this.emit("create",{graphic:t.graphic,state:"active",tool:this.activeTool,toolEventInfo:{coordinates:a.vertices[0].coordinates,type:"cursor-update"},type:"create"})}),t.on("vertex-remove",a=>{switch(a.operation){case"apply":this.emit("create",{graphic:t.graphic,state:"active",tool:this.activeTool,toolEventInfo:a,type:"create"});break;case"undo":this._emitUndoEvent({graphics:[t.graphic],tool:t.geometryType});break;case"redo":this._emitRedoEvent({graphics:[t.graphic],tool:t.geometryType})}}),t.on("complete",a=>{this._set("createGraphic",a.graphic),i="complete",a.aborted?o&&o.cancel():o&&o.complete()}),Z(()=>this._getGraphicSymbolFromTool(t.geometryType),a=>{t.graphicSymbol=a})],o=new Cv({activeComponent:t,tool:t.geometryType,type:"create",onEnd:()=>{var a;s.forEach(l=>l.remove()),s.length=0,(a=e.tools)==null||a.remove(t)},undo:()=>{t.canUndo&&t.undo()},redo:()=>{t.canRedo&&t.redo()},canUndo:()=>t.canUndo,canRedo:()=>t.canRedo});return o}_getGraphicSymbolFromTool(t){switch(t){case"point":case"multipoint":return this.pointSymbol;case"polyline":return this.polylineSymbol;case"circle":case"rectangle":case"polygon":return this.polygonSymbol;case"mesh":return this.meshSymbol}}async _setupUpdateOperation(t,e){var o;const{layer:i,view:n}=this;if(!n)return this._logMissingView(),null;const r={tool:this._defaultUpdateTool,...this.defaultUpdateOptions,...e,reshapeOptions:{...this.defaultUpdateOptions.reshapeOptions,...e==null?void 0:e.reshapeOptions},highlightOptions:{...this.defaultUpdateOptions.highlightOptions,...e==null?void 0:e.highlightOptions}};let s=r.tool;for(const a of t)i.remove(a),i.add(a);if(n.type==="3d"){if(t.length===0)return null;switch(s){case"move":return this._setupMove3DOperation(t,r,n,s);case"reshape":{if(t.length>1)return this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null;const a=d0(t[0]);return a===He.SUPPORTED?this._setupReshape3DOperation(t[0],r,n):(this._logError("sketch:reshape",`Reshape operation not supported for provided graphic(s) (${oS(a)}).`),null)}case"transform":return this._setupGraphicTransform3DOperation(t,r,n)}}switch(s){case"move":return this._setupMove2DOperation(t,r,n);case"reshape":{if(t.length>1)return this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null;const a=d0(t[0]);return a===He.SUPPORTED?this._setupTransformOrReshape2DOperation(t,s,r,n):(this._logError("sketch:reshape",`Reshape operation not supported for provided graphic(s) (${oS(a)}).`),null)}case"transform":if(t.length===1){const a=(o=t[0].geometry)==null?void 0:o.type;a!=="point"&&a!=="multipoint"||(s="reshape")}return this._setupTransformOrReshape2DOperation(t,s,r,n)}}async _setupMove3DOperation(t,e,i,n,r=!1){for(const u of t){const p=oge(u);if(p!==He.SUPPORTED)return this._logError("sketch:move",`Move operation not supported for provided graphic(s) (${oS(p)}).`),null}const s=await this._requireModule(V(()=>import("./editingTools-2pnjWbkh.js"),__vite__mapDeps([304,91,297,114,295,47,298,8,299,284,198,97,96,305,203,306,43,184,214,215,41,23,183,216,307,40,296,223,308,49,36,82,50,301,35,37,309,110,39,48,186,44,187,285,42,294,288,300,70,302,303,155,32,310,119,120,121,311,151,312,313,314]),import.meta.url));if(Ht(s))return s;const o=new s.module.GraphicMoveTool({view:i,enableZ:e.enableZ,snappingManager:this._snappingManager,tooltipOptions:this.tooltipOptions});i.tools.add(o),o.graphics.addMany(t),r||this.updateGraphics.addMany(t);const a=[],l=new Ia({activeComponent:o,tool:n,type:"update",onEnd:()=>{var u;a.forEach(p=>p.remove()),a.length=0,(u=i.tools)==null||u.remove(o),o.destroyed||o.destroy()},undo:()=>{v0(l,this.updateGraphics.toArray()),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:n})},redo:()=>{b0(l,this.updateGraphics.toArray()),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:n})},addToSelection:u=>{this.updateGraphics.push(u),o.graphics.push(u),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[u],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:u=>{const p=this.updateGraphics.indexOf(u);l.history.undo.forEach(f=>f.updates.splice(p,1)),l.history.redo.forEach(f=>f.updates.splice(p,1)),this.updateGraphics.remove(u),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[u],type:"selection-change"},type:"update"}),this.updateGraphics.length!==0?o.graphics.remove(u):l.complete()},toggleTool:async()=>{if(this.updateGraphics.length!==1||e.toggleToolOnClick===!1||n!=="transform")return;const u=this.updateGraphics.at(0);if(d0(u)!==He.SUPPORTED)return;l.onEnd(),l.destroy();const p=await this._setupReshape3DOperation(u,e,i,!0);Ht(p)||this._setUpdateOperationHandle(p,e)}});return a.push(...this._getHandlesForComponent(l,e),i.on("immediate-click",u=>this._getCommonUpdateOperationClickHandlers(l,u,e),et.WIDGET),i.on("key-down",u=>{this._getCommonUpdateOperationKeyDownHandlers(l,u)},et.WIDGET)),l}_setupGraphicTransform3DOperation(t,e,i,n=!1){if(t.length===1&&dge(t[0])===He.SUPPORTED){const r=t[0],s=r.geometry;if(s!=null&&(s.type==="point"||s.type==="mesh"))return this._setupPointTransform3DOperation(r,e,i);if(s!=null&&(s.type==="polygon"||s.type==="polyline"))return this._setupPolyTransform3DOperation(r,e,i,n)}return this._setupMove3DOperation(t,e,i,"transform",n)}async _setupPointTransform3DOperation(t,e,i){const n="transform",{enableRotation:r,enableScaling:s,enableZ:o}=e,a=await this._requireModule(V(()=>import("./editingTools-2pnjWbkh.js"),__vite__mapDeps([304,91,297,114,295,47,298,8,299,284,198,97,96,305,203,306,43,184,214,215,41,23,183,216,307,40,296,223,308,49,36,82,50,301,35,37,309,110,39,48,186,44,187,285,42,294,288,300,70,302,303,155,32,310,119,120,121,311,151,312,313,314]),import.meta.url));if(Ht(a))return a;const l=new a.module.GraphicTransformTool({graphic:t,view:i,enableRotation:r,enableScaling:s,enableZ:o,snappingManager:this._snappingManager,tooltipOptions:this.tooltipOptions});i.tools.add(l),this.updateGraphics.add(t);const u=[],p=new Ia({activeComponent:l,tool:n,type:"update",onEnd:()=>{var f;u.forEach(m=>m.remove()),u.length=0,(f=i.tools)==null||f.remove(l),l.destroyed||l.destroy()},undo:()=>{v0(p,this.updateGraphics.toArray()),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:n})},redo:()=>{b0(p,this.updateGraphics.toArray()),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:n})},addToSelection:async f=>{this.updateGraphics.add(f),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[f],removed:[],type:"selection-change"},type:"update"}),p.onEnd(),p.destroy();const m=await this._setupMove3DOperation(this.updateGraphics.toArray(),e,i,"transform",!0);Ht(m)||this._setUpdateOperationHandle(m,e)},removeFromSelection:f=>{this.updateGraphics.remove(f),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[f],type:"selection-change"},type:"update"}),p.complete()},toggleTool:()=>{}});return u.push(...this._getHandlesForComponent(p,e),i.on("immediate-click",f=>this._getCommonUpdateOperationClickHandlers(p,f,e),et.WIDGET),i.on("key-down",f=>{this._getCommonUpdateOperationKeyDownHandlers(p,f)},et.WIDGET)),p}async _setupPolyTransform3DOperation(t,e,i,n=!1){const r="transform",{enableRotation:s,enableScaling:o,enableZ:a,preserveAspectRatio:l}=e,u=await this._requireModule(V(()=>import("./editingTools-2pnjWbkh.js"),__vite__mapDeps([304,91,297,114,295,47,298,8,299,284,198,97,96,305,203,306,43,184,214,215,41,23,183,216,307,40,296,223,308,49,36,82,50,301,35,37,309,110,39,48,186,44,187,285,42,294,288,300,70,302,303,155,32,310,119,120,121,311,151,312,313,314]),import.meta.url));if(Ht(u))return u;const p=new u.module.ExtentTransformTool({graphic:t,view:i,enableRotation:s,enableScaling:o,enableZ:a,preserveAspectRatio:l,tooltipOptions:this.tooltipOptions});i.tools.add(p),n||this.updateGraphics.add(t);const f=[],m=new Ia({activeComponent:p,tool:r,type:"update",onEnd:()=>{var g;f.forEach(y=>y.remove()),f.length=0,(g=i.tools)==null||g.remove(p),p.destroyed||p.destroy()},canUndo:()=>p.canUndo,undo:()=>{p.undo(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:r})},canRedo:()=>p.canRedo,redo:()=>{p.redo(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:r})},addToSelection:async g=>{this.updateGraphics.add(g),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[g],removed:[],type:"selection-change"},type:"update"}),m.onEnd(),m.destroy();const y=await this._setupMove3DOperation(this.updateGraphics.toArray(),e,i,"transform",!0);Ht(y)||this._setUpdateOperationHandle(y,e)},removeFromSelection:g=>{this.updateGraphics.remove(g),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[g],type:"selection-change"},type:"update"}),m.complete()},toggleTool:async()=>{if(this.updateGraphics.length!==1||e.toggleToolOnClick===!1)return;const g=this.updateGraphics.at(0);if(d0(g)!==He.SUPPORTED)return;m.onEnd(),m.destroy();const y=await this._setupReshape3DOperation(g,e,i,!0);Ht(y)||this._setUpdateOperationHandle(y,e)}});return f.push(...this._getHandlesForComponent(m,e),i.on("immediate-click",g=>this._getCommonUpdateOperationClickHandlers(m,g,e),et.WIDGET),i.on("key-down",g=>this._getCommonUpdateOperationKeyDownHandlers(m,g),et.WIDGET),i.on("key-down",g=>{g.key!==Ut.constraint||g.repeat||(p.preserveAspectRatio=!p.preserveAspectRatio,g.stopPropagation())},et.WIDGET),i.on("key-up",g=>{g.key===Ut.constraint&&(p.preserveAspectRatio=!p.preserveAspectRatio,g.stopPropagation())},et.WIDGET)),m}async _setupMove2DOperation(t,e,i){const n="move";this.updateGraphics.addMany(t),await this._updateSpatialReference(t);const r=await this._getGraphicMover(t,e,i);if(Ht(r))return r;const s=new Ia({activeComponent:r,tool:n,type:"update",onEnd:()=>{var u;this._displayDefaultCursor(),l.forEach(p=>p.remove()),a.forEach(p=>p.remove()),l=[],a=[],r.destroy(),(u=this._internalGraphicsLayer)==null||u.removeMany([...this.updateGraphics.toArray()])},undo:()=>{const u=this.updateGraphics.toArray();v0(s,u),s.refreshComponent(),this._emitUndoEvent({graphics:u,tool:n})},redo:()=>{const u=this.updateGraphics.toArray();b0(s,u),s.refreshComponent(),this._emitRedoEvent({graphics:u,tool:n})},addToSelection:async u=>{await this._updateSpatialReference(u),this.updateGraphics.push(u),r.graphics=this.updateGraphics.toArray(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[u],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:u=>{const p=this.updateGraphics.indexOf(u);s.history.undo.forEach(m=>m.updates.splice(p,1)),s.history.redo.forEach(m=>m.updates.splice(p,1)),this.updateGraphics.remove(u);const f=this.updateGraphics.toArray();this.emit("update",{graphics:f,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[u],type:"selection-change"},type:"update"}),this.updateGraphics.length!==0?r.graphics=f:s.complete()}});let o=!1,a=[i.on("immediate-click",u=>this._getCommonUpdateOperationClickHandlers(s,u,e),et.WIDGET),i.on("key-down",u=>{this._getCommonUpdateOperationKeyDownHandlers(s,u),u.key!==Ut.constraint||u.repeat||(o=!0,r.enableMoveAllGraphics=!r.enableMoveAllGraphics)},et.WIDGET),i.on("key-up",u=>{u.key===Ut.constraint&&o&&(o=!1,r.enableMoveAllGraphics=!r.enableMoveAllGraphics)},et.WIDGET)],l=this._getHandlesForComponent(s,e);return s}async _setupReshape3DOperation(t,e,i,n=!1){const r="reshape",s=await this._requireModule(V(()=>import("./editingTools-2pnjWbkh.js"),__vite__mapDeps([304,91,297,114,295,47,298,8,299,284,198,97,96,305,203,306,43,184,214,215,41,23,183,216,307,40,296,223,308,49,36,82,50,301,35,37,309,110,39,48,186,44,187,285,42,294,288,300,70,302,303,155,32,310,119,120,121,311,151,312,313,314]),import.meta.url));if(Ht(s))return s;const o=e.reshapeOptions,a=new s.module.GraphicReshapeTool({view:i,graphic:t,enableZVertex:e.enableZ&&(o==null?void 0:o.vertexOperation)==="move",enableZShape:e.enableZ&&(o==null?void 0:o.shapeOperation)==="move",enableMoveGraphic:(o==null?void 0:o.shapeOperation)==="move"||(o==null?void 0:o.shapeOperation)==="move-xy",enableMidpoints:(o==null?void 0:o.edgeOperation)==="split",enableEdgeOffset:(o==null?void 0:o.edgeOperation)==="offset",snappingManager:this._snappingManager,labelOptions:this.labelOptions,tooltipOptions:this.tooltipOptions});i.tools.add(a),n||this.updateGraphics.add(t);const l=[],u=new Ia({activeComponent:a,tool:r,type:"update",onEnd:()=>{var p;l.forEach(f=>f.remove()),l.length=0,(p=i.tools)==null||p.remove(a),a.destroyed||a.destroy()},canUndo:()=>a.canUndo,undo:()=>{a.undo(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:r})},canRedo:()=>a.canRedo,redo:()=>{a.redo(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:r})},addToSelection:async p=>{this.updateGraphics.add(p),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[p],removed:[],type:"selection-change"},type:"update"}),u.onEnd(),u.destroy();const f=await this._setupMove3DOperation(this.updateGraphics.toArray(),e,i,"transform",!0);Ht(f)||this._setUpdateOperationHandle(f,e)},removeFromSelection:p=>{this.updateGraphics.remove(p),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[p],type:"selection-change"},type:"update"}),u.complete()},toggleTool:async()=>{if(e.toggleToolOnClick===!1)return;u.onEnd(),u.destroy();const p=await this._setupGraphicTransform3DOperation(this.updateGraphics.toArray(),e,i,!0);Ht(p)||this._setUpdateOperationHandle(p,e)}});return l.push(...this._getHandlesForComponent(u,e),i.on("immediate-click",p=>this._getCommonUpdateOperationClickHandlers(u,p,e),et.WIDGET),i.on("key-down",p=>{this._getCommonUpdateOperationKeyDownHandlers(u,p)},et.WIDGET)),u}async _setupTransformOrReshape2DOperation(t,e,i,n){this.updateGraphics.addMany(t),await this._updateSpatialReference(t);const r=e==="transform"?await this._getBox(t,i,n):await this._getReshape(t,i,n);if(Ht(r))return r;const s=new Ia({activeComponent:r,type:"update",onEnd:()=>{a.forEach(l=>l.remove()),o.forEach(l=>l.remove()),a=[],o=[],s.activeComponent&&!s.activeComponent.destroyed&&s.activeComponent.destroy(),this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray())},undo:()=>{v0(s,this.updateGraphics.toArray()),s.refreshComponent(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:s.tool})},redo:()=>{b0(s,this.updateGraphics.toArray()),s.refreshComponent(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:s.tool})},addToSelection:async l=>{let u=s.activeComponent;if((u==null?void 0:u.type)==="reshape"){const p=[...this.updateGraphics,l];this.updateGraphics.removeAll(),s.onEnd(),s.destroy();const f=await this._setupMove2DOperation(p,i,n);if(Ht(f))return;this._setUpdateOperationHandle(f,i)}else this.updateGraphics.add(l),u.graphics=this.updateGraphics.toArray(),u.refresh(),s.resetHistory();this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[l],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:async l=>{const u=this.updateGraphics.indexOf(l);s.history.undo.forEach(f=>f.updates.splice(u,1)),s.history.redo.forEach(f=>f.updates.splice(u,1)),this.updateGraphics.remove(l);const p=this.updateGraphics.toArray();if(p.length===0)s.complete();else{const f=p[0].geometry;p.length!==1||f==null||f.type!=="point"&&f.type!=="multipoint"?s.activeComponent.graphics=p:s.toggleTool()}this.emit("update",{graphics:p,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[l],type:"selection-change"},type:"update"})},toggleTool:async()=>{var f;if(this.updateGraphics.length>1)return;const l=this.updateGraphics.at(0),u=l.geometry;if(u!=null&&(s.tool==="reshape"&&(u.type==="point"||u.type==="multipoint")||s.tool==="transform"&&u.type==="extent"))return;let p=null;s.tool==="transform"?p=await this._getReshape([l],i,n):s.tool==="reshape"&&(p=await this._getBox([l],i,n)),Ht(p)||((f=s.activeComponent)==null||f.destroy(),s.activeComponent=p,s.activeComponent&&(a.forEach(m=>m.remove()),a=this._getHandlesForComponent(s,i)))}});let o=[n.on("immediate-click",l=>this._getCommonUpdateOperationClickHandlers(s,l,i),et.WIDGET),n.on("key-down",l=>{if(this._getCommonUpdateOperationKeyDownHandlers(s,l),l.key===Ut.constraint&&!l.repeat&&s){const u=s.activeComponent;u&&u.type==="box"&&(u.preserveAspectRatio=!u.preserveAspectRatio)}},et.WIDGET),n.on("key-up",l=>{if(l.key===Ut.constraint&&s){const u=s.activeComponent;u&&u.type==="box"&&(u.preserveAspectRatio=!u.preserveAspectRatio)}},et.WIDGET)],a=this._getHandlesForComponent(s,i);return s}async _getGraphicMover(t,e,i){const{enableMoveAllGraphics:n,highlightOptions:r}=e,s=await this._requireModule(V(()=>import("./GraphicMover-gqXcJWyE.js").then(o=>o.G),__vite__mapDeps([324,302,303,155,32,117,4]),import.meta.url));return Ht(s)?s:new s.module.default({enableMoveAllGraphics:n,highlightsEnabled:!!(r!=null&&r.enabled),indicatorsEnabled:!1,graphics:t,view:i,callbacks:{onGraphicMoveStart:({dx:o,dy:a,graphic:l})=>{this._displayGrabbingCursor(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:o,dy:a,mover:l,type:"move-start"},type:"update"})},onGraphicMove:({dx:o,dy:a,graphic:l})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:o,dy:a,mover:l,type:"move"},type:"update"}),onGraphicMoveStop:({dx:o,dy:a,graphic:l})=>{this._displayPointerCursor(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:o,dy:a,mover:l,type:"move-stop"},type:"update"})},onGraphicPointerOver:()=>this._displayPointerCursor(),onGraphicPointerOut:()=>this._displayDefaultCursor()}})}async _getBox(t,e,i){const{enableRotation:n,enableScaling:r,highlightOptions:s,preserveAspectRatio:o}=e,a=await this._requireModule(V(()=>import("./Box-GMmtqlws.js"),__vite__mapDeps([325,114,302,303,155,32,324,117,4,326,91,314,297,295,47,298,8,299,284,310]),import.meta.url));return Ht(a)?a:new a.module.default({graphics:t,enableRotation:n,enableScaling:r,highlightsEnabled:!!(s!=null&&s.enabled),preserveAspectRatio:o,layer:this._internalGraphicsLayer,view:i,tooltipOptions:this.tooltipOptions,callbacks:{onMoveStart:l=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...l},type:"update"}),onMove:l=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...l},type:"update"}),onMoveStop:l=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...l},type:"update"}),onScaleStart:l=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...l},type:"update"}),onScale:l=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...l},type:"update"}),onScaleStop:l=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...l},type:"update"}),onRotateStart:l=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...l},type:"update"}),onRotate:l=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...l},type:"update"}),onRotateStop:l=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...l},type:"update"})}})}async _getReshape(t,e,i){var a,l,u;const n=((a=e.reshapeOptions)==null?void 0:a.edgeOperation)==="split",r=((l=e.reshapeOptions)==null?void 0:l.shapeOperation)==="move",s=!!((u=e.highlightOptions)!=null&&u.enabled),o=await this._requireModule(V(()=>import("./Reshape-GjknI149.js"),__vite__mapDeps([327,114,293,76,294,288,110,295,296,96,297,47,298,8,299,284,302,303,155,32,324,117,4,326,91,310]),import.meta.url));return Ht(o)?o:new o.module.default({enableMidpoints:n,enableMovement:r,graphic:t[0],highlightsEnabled:s,layer:this._internalGraphicsLayer,snappingManager:this._snappingManager,tooltipOptions:this.tooltipOptions,view:i,callbacks:{onReshapeStart:p=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...p},type:"update"}),onReshape:p=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...p},type:"update"}),onReshapeStop:({mover:p,type:f})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:p,type:f},type:"update"}),onMoveStart:({dx:p,dy:f,mover:m,type:g})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:p,dy:f,mover:m,type:g},type:"update"}),onMove:({dx:p,dy:f,mover:m,type:g})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:p,dy:f,mover:m,type:g},type:"update"}),onMoveStop:({dx:p,dy:f,mover:m,type:g})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:p,dy:f,mover:m,type:g},type:"update"}),onVertexAdd:({added:p,type:f,vertices:m})=>{const g=p.map(y=>yC(y.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:g,vertices:m,type:f},type:"update"})},onVertexRemove:({removed:p,type:f,vertices:m})=>{const g=p.map(y=>yC(y.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{removed:g,vertices:m,type:f},type:"update"})}}})}_getHandlesForComponent(t,e){const i=t.activeComponent;if(!i)return[];switch(i.type){case"graphic-mover":return[i.on("graphic-click",({graphic:n,viewEvent:r})=>{var s;(s=r.native)!=null&&s.shiftKey&&(r.stopPropagation(),t.removeFromSelection(n))}),i.on("graphic-move-start",n=>t.addToHistory(ia(n.allGraphics)))];case"box":return[i.on("graphic-click",n=>this._onTransformOrReshape2DGraphicClick(t,e,n)),i.on("move-start",n=>t.addToHistory(ia(n.graphics))),i.on("rotate-start",n=>t.addToHistory(ia(n.graphics))),i.on("scale-start",n=>t.addToHistory(ia(n.graphics)))];case"reshape":return[i.on("graphic-click",n=>this._onTransformOrReshape2DGraphicClick(t,e,n)),i.on("move-start",n=>t.addToHistory(ia([n.mover]))),i.on("reshape-start",n=>t.addToHistory(ia([n.graphic]))),i.on("vertex-add",n=>t.addToHistory(ia([n.oldGraphic]))),i.on("vertex-remove",n=>t.addToHistory(ia([n.oldGraphic])))];case"move-3d":return[i.on("graphic-move-start",n=>{t.addToHistory(ia(n.allGraphics)),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:n.allGraphics.length>0?n.allGraphics[0]:null,type:"move-start"},type:"update"})}),i.on("graphic-move",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:n.dx,dy:n.dy,mover:n.allGraphics.length>0?n.allGraphics[0]:null,type:"move"},type:"update"})}),i.on("graphic-move-stop",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:n.allGraphics.length>0?n.allGraphics[0]:null,type:"move-stop"},type:"update"})}),i.on("immediate-click",n=>{n.shiftKey?this._toggleSelection([n.graphic],t,e):t.toggleTool()})];case"transform-3d":return[i.on("record-undo",({record:n})=>{t.addToHistory({updates:[n]})}),i.on("graphic-translate-start",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:n.graphic,dx:n.dxScreen,dy:n.dyScreen,type:"move-start"},type:"update"})}),i.on("graphic-translate-stop",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:n.graphic,dx:n.dxScreen,dy:n.dyScreen,type:"move-stop"},type:"update"})}),i.on("graphic-rotate-start",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:n.graphic,angle:n.angle,type:"rotate-start"},type:"update"})}),i.on("graphic-rotate-stop",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:n.graphic,angle:n.angle,type:"rotate-stop"},type:"update"})}),i.on("graphic-scale-start",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:n.graphic,xScale:n.xScale,yScale:n.yScale,type:"scale-start"},type:"update"})}),i.on("graphic-scale-stop",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:n.graphic,xScale:n.xScale,yScale:n.yScale,type:"scale-stop"},type:"update"})}),i.on("graphic-translate",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:n.graphic,dx:n.dxScreen,dy:n.dyScreen,type:"move"},type:"update"})}),i.on("graphic-rotate",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:n.graphic,angle:n.angle,type:"rotate"},type:"update"})}),i.on("graphic-scale",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:n.graphic,xScale:n.xScale,yScale:n.yScale,type:"scale"},type:"update"})}),i.on("immediate-click",n=>{n.shiftKey?this._toggleSelection([n.graphic],t,e):t.toggleTool()})];case"reshape-3d":return[i.on("reshape",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:n,type:"update"})}),i.on("move",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:n,type:"update"})}),i.on("vertex-add",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:n,type:"update"})}),i.on("vertex-remove",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:n,type:"update"})}),i.on("immediate-click",n=>{n.shiftKey?this._toggleSelection([n.graphic],t,e):t.toggleTool()})]}}_onTransformOrReshape2DGraphicClick(t,e,i){var s;const{graphic:n,viewEvent:r}=i;return(s=r.native)!=null&&s.shiftKey&&n.layer===this.layer?(r.stopPropagation(),t.removeFromSelection(n)):e.toggleToolOnClick?(r.stopPropagation(),t.toggleTool()):void 0}_setUpdateOperationHandle(t,e){var r;this._operationHandle=t;const i=(r=this.view)==null?void 0:r.map;this._disablePopup(e);const n=()=>{if(t===this._operationHandle){const s=this.updateGraphics.toArray(),o=this._operationHandle.tool;this._operationHandle.destroy(),this._operationHandle=null,this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray()),this.updateGraphics.removeAll(),i&&i.remove(this._internalGraphicsLayer),this._restorePopup(e),this.emit("update",{graphics:s,state:"complete",aborted:t.cancelled,tool:o,toolEventInfo:null,type:"update"})}};t.on("complete",n)}async _getCommonUpdateOperationClickHandlers(t,e,i){const n=br(e),r=await e.async(()=>this._getFirstHit(n));if(r==null)return void t.complete();if(e.native.shiftKey&&this._toggleSelection([r.graphic],t,i))return void e.stopPropagation();this.updateGraphics.includes(r.graphic)?e.stopPropagation():t.complete()}_toggleSelection(t,e,i){const n=!!i.multipleSelectionEnabled;return t.some(r=>r!=null&&!(!n||r.layer!==this.layer)&&(this.updateGraphics.includes(r)?e.removeFromSelection(r):e.addToSelection(r),!0))}_getCommonUpdateOperationKeyDownHandlers(t,e){if(!t)return;const i=e.key;i===Ut.undo&&t.canUndo()?(e.stopPropagation(),t.undo()):i===Ut.redo&&t.canRedo()?(e.stopPropagation(),t.redo()):i===Ut.cancel?(e.stopPropagation(),t.cancel()):this.allowDeleteKey&&Ut.delete.includes(i)&&this._onDeleteKey(e)}_onDeleteKey(t){var n;if(!this._operationHandle||this._operationHandle.type!=="update")return;const e=this.activeComponent,i=this.updateGraphics.toArray();e!=null&&e.type!=="reshape-3d"&&(e.type!=="reshape"||i.length===1&&((n=i[0].geometry)==null?void 0:n.type)==="point")&&(t.stopPropagation(),this.delete())}_removeDefaultLayer(){var t,e;this._internalGraphicsLayer&&((e=(t=this.view)==null?void 0:t.map)==null||e.remove(this._internalGraphicsLayer),this._internalGraphicsLayer=Oe(this._internalGraphicsLayer))}_isComponentGraphic(t){var i;const{activeComponent:e}=this;return!(!t||e==null)&&(((i=t.attributes)==null?void 0:i.esriSketchTool)||e.type==="draw-2d"&&e.graphic===t||(e.type==="box"||e.type==="reshape")&&e.isUIGraphic(t))}_displayPointerCursor(){var t;(t=this.view)!=null&&t.container&&this.view.cursor!=="pointer"&&(this.view.cursor="pointer")}_displayGrabbingCursor(){var t;(t=this.view)!=null&&t.container&&this.view.cursor!=="grabbing"&&(this.view.cursor="grabbing")}_displayDefaultCursor(){var t;(t=this.view)!=null&&t.container&&this.view.cursor!==null&&(this.view.cursor=null)}_logError(t,e,i){J.getLogger(this).error(new F(t,e,i))}async _requireModule(t){const e=new AbortController;this._moduleLoaderAbortController=e;const i=await t;return this._moduleLoaderAbortController!==e||e.signal.aborted?{requireError:"aborted"}:{module:i}}_emitUndoEvent(t){this.emit("undo",{...t,type:"undo"})}_emitRedoEvent(t){this.emit("redo",{...t,type:"redo"})}_emitDeleteEvent(t){this.emit("delete",{...t,type:"delete"})}get test(){return{operationHandle:this._operationHandle,snappingManager:this._snappingManager,defaultUpdateOptions:gf}}wait(){return Ha(()=>!this.updating)}_beginAsyncOperation(){this._numUpdating+=1,this.notifyChange("updating")}_endAsyncOperation(){this._numUpdating-=1,this.notifyChange("updating")}_disablePopupEnabled(t){var e;return((e=this.view)==null?void 0:e.type)!=="3d"||this.updateOnGraphicClick||((t==null?void 0:t.toggleToolOnClick)??!1)}_disablePopup(t){this._disablePopupEnabled(t)&&this.view&&this._originalPopupEnabled==null&&(this._originalPopupEnabled=this.view.popupEnabled,this.view.popupEnabled=!1)}_restorePopup(t){this._disablePopupEnabled(t)&&this.view&&this._originalPopupEnabled!=null&&(this.view.popupEnabled=this._originalPopupEnabled,this._originalPopupEnabled=null)}async _waitViewReady(){const t=this.view;t?(_s(this._viewReadyAbortController),this._viewReadyAbortController=new AbortController,await S1(Ha(()=>t==null?void 0:t.ready),this._viewReadyAbortController.signal)):this._logMissingView()}_logMissingView(){this._logError("sketch:missing-property",zA("view"))}_logMissingLayer(){this._logError(v0e,zA("layer"))}};c([d()],rt.prototype,"updating",null),c([d()],rt.prototype,"_operationHandle",void 0),c([d({readOnly:!0})],rt.prototype,"activeTool",null),c([d()],rt.prototype,"activeFillSymbol",void 0),c([d()],rt.prototype,"activeLineSymbol",void 0),c([d()],rt.prototype,"activeVertexSymbol",void 0),c([d()],rt.prototype,"allowDeleteKey",void 0),c([d({readOnly:!0})],rt.prototype,"createGraphic",null),c([d()],rt.prototype,"defaultCreateOptions",null),c([d()],rt.prototype,"defaultUpdateOptions",null),c([d({type:Cw,nonNullable:!0})],rt.prototype,"labelOptions",void 0),c([d()],rt.prototype,"layer",void 0),c([d({types:qu})],rt.prototype,"pointSymbol",void 0),c([d({types:qu})],rt.prototype,"polygonSymbol",void 0),c([d({types:qu})],rt.prototype,"polylineSymbol",void 0),c([d()],rt.prototype,"meshSymbol",void 0),c([d({type:oy,nonNullable:!0})],rt.prototype,"snappingOptions",null),c([d()],rt.prototype,"_snappingManager",void 0),c([d({readOnly:!0})],rt.prototype,"state",null),c([d({type:Iw,nonNullable:!0})],rt.prototype,"tooltipOptions",void 0),c([d({readOnly:!0})],rt.prototype,"updateGraphics",void 0),c([d()],rt.prototype,"updateOnGraphicClick",void 0),c([d({types:qu})],rt.prototype,"vertexSymbol",void 0),c([d({value:null})],rt.prototype,"view",null),rt=c([S("esri.widgets.Sketch.SketchViewModel")],rt);const v0e="sketch:missing-property",zA=t=>`Property '${t}' is missing on SketchViewModel.`;function b0e(t){return t==="polygon"||t==="rectangle"||t==="circle"}function v0(t,e){$9("undo",t.history.undo,t.history.redo,e)}function b0(t,e){$9("redo",t.history.redo,t.history.undo,e)}function $9(t,e,i,n){const r=e.pop();if(!r)return;const s=r.updates,o=[];n.forEach((a,l)=>{const u=s[l];u!=null&&("geometry"in u&&u.geometry!=null&&(o.push({geometry:a.geometry}),a.geometry=u.geometry),"symbol"in u&&u.symbol!=null&&(o.push({symbol:a.symbol}),a.symbol=u.symbol),"undo"in u&&(o.push(u),u[t](a)))}),i.push({updates:o})}function ia(t){return{updates:t.map(e=>({geometry:e.geometry}))}}function Ht(t){return"requireError"in t&&t.requireError==="aborted"}const x9=rt;let Eh=class extends X{constructor(e){super(e),this.header=!1,this.labelsToggle=!0,this.tooltipsToggle=!0}};c([d({type:Boolean,nonNullable:!0})],Eh.prototype,"header",void 0),c([d({type:Boolean,nonNullable:!0})],Eh.prototype,"labelsToggle",void 0),c([d({type:Boolean,nonNullable:!0})],Eh.prototype,"tooltipsToggle",void 0),Eh=c([S("esri.widgets.support.SketchTooltipControls.VisibleElements")],Eh);const zw=Eh;let xa=class extends X{constructor(e){super(e),this.enabledToggle=!0,this.featureEnabledToggle=!0,this.header=!1,this.layerList=!0,this.layerListToggleLayersButton=!0,this.selfEnabledToggle=!0}};c([d({type:Boolean,nonNullable:!0})],xa.prototype,"enabledToggle",void 0),c([d({type:Boolean,nonNullable:!0})],xa.prototype,"featureEnabledToggle",void 0),c([d({type:Boolean,nonNullable:!0})],xa.prototype,"header",void 0),c([d({type:Boolean,nonNullable:!0})],xa.prototype,"layerList",void 0),c([d({type:Boolean,nonNullable:!0})],xa.prototype,"layerListToggleLayersButton",void 0),c([d({type:Boolean,nonNullable:!0})],xa.prototype,"selfEnabledToggle",void 0),xa=c([S("esri.widgets.support.SnappingControls.VisibleElements")],xa);const jw=xa;let ds=class extends X{constructor(e){super(e),this.point=!0,this.polyline=!0,this.polygon=!0,this.rectangle=!0,this.circle=!0,this.multipoint=!0,this.mesh=!0}};c([d({type:Boolean,nonNullable:!0})],ds.prototype,"point",void 0),c([d({type:Boolean,nonNullable:!0})],ds.prototype,"polyline",void 0),c([d({type:Boolean,nonNullable:!0})],ds.prototype,"polygon",void 0),c([d({type:Boolean,nonNullable:!0})],ds.prototype,"rectangle",void 0),c([d({type:Boolean,nonNullable:!0})],ds.prototype,"circle",void 0),c([d({type:Boolean,nonNullable:!0})],ds.prototype,"multipoint",void 0),c([d({type:Boolean,nonNullable:!0})],ds.prototype,"mesh",void 0),ds=c([S("esri.widgets.Sketch.VisibleElements.CreateToolVisibilityMap")],ds);let Ru=class extends X{constructor(e){super(e),this["rectangle-selection"]=!0,this["lasso-selection"]=!0,this["custom-selection"]=!0}};c([d({nonNullable:!0})],Ru.prototype,"rectangle-selection",void 0),c([d({nonNullable:!0})],Ru.prototype,"lasso-selection",void 0),c([d({nonNullable:!0})],Ru.prototype,"custom-selection",void 0),Ru=c([S("esri.widgets.Sketch.VisibleElements.SelectionToolVisibilityMap")],Ru);let gr=class extends X{constructor(e){super(e),this.createTools=new ds,this.duplicateButton=!0,this.selectionTools=new Ru,this.settingsMenu=!0,this.sketchTooltipControls=!0,this.sketchTooltipControlsElements=new zw,this.snappingControls=!0,this.snappingControlsElements=new jw,this.undoRedoMenu=!0}};c([d({type:ds,nonNullable:!0})],gr.prototype,"createTools",void 0),c([d({type:Boolean,nonNullable:!0})],gr.prototype,"duplicateButton",void 0),c([d({type:Ru,nonNullable:!0})],gr.prototype,"selectionTools",void 0),c([d({type:Boolean,nonNullable:!0})],gr.prototype,"settingsMenu",void 0),c([d({type:Boolean,nonNullable:!0})],gr.prototype,"sketchTooltipControls",void 0),c([d({type:zw,nonNullable:!0})],gr.prototype,"sketchTooltipControlsElements",void 0),c([d({type:Boolean,nonNullable:!0})],gr.prototype,"snappingControls",void 0),c([d({type:jw,nonNullable:!0})],gr.prototype,"snappingControlsElements",void 0),c([d({type:Boolean,nonNullable:!0})],gr.prototype,"undoRedoMenu",void 0),gr=c([S("esri.widgets.Sketch.VisibleElements")],gr);const T9=gr;function wS(t,e){return e?"xoffset"in e&&e.xoffset?Math.max(t,Math.abs(e.xoffset)):"yoffset"in e&&e.yoffset?Math.max(t,Math.abs(e.yoffset||0)):t:t}function w0e(t){let e=0,i=0;for(let n=0;n<t.length;n++){const r=t[n].size;typeof r=="number"&&(e+=r,i++)}return e/i}function jA(t,e){var i;return typeof t=="number"?t:(i=t==null?void 0:t.stops)!=null&&i.length?w0e(t.stops):e}function _0e(t,e){if(!e)return t;const i=e.filter(o=>o.type==="size").map(o=>{const{maxSize:a,minSize:l}=o;return(jA(a,t)+jA(l,t))/2});let n=0;const r=i.length;if(r===0)return t;for(let o=0;o<r;o++)n+=i[o];const s=Math.floor(n/r);return Math.max(s,t)}function E9(t){var s,o;const e=t==null?void 0:t.renderer,i=(s=t==null?void 0:t.event)==null?void 0:s.pointerType,n=i==="touch"?9:6;if(!e)return n;const r="visualVariables"in e?_0e(n,e.visualVariables):n;if(e.type==="simple")return wS(r,e.symbol);if(e.type==="unique-value"){let a=r;return(o=e.uniqueValueInfos)==null||o.forEach(l=>{a=wS(a,l.symbol)}),a}if(e.type==="class-breaks"){let a=r;return e.classBreakInfos.forEach(l=>{a=wS(a,l.symbol)}),a}return e.type==="dot-density"||e.type,r}function k9(t,e,i,n=new Ve){let r=0;if(i.type==="2d")r=e*(i.resolution??0);else if(i.type==="3d"){const p=i.overlayPixelSizeInMapUnits(t),f=i.basemapSpatialReference;r=f==null||f.equals(i.spatialReference)?e*p:Cn(f)/Cn(i.spatialReference)}const s=t.x-r,o=t.y-r,a=t.x+r,l=t.y+r,{spatialReference:u}=i;return n.xmin=Math.min(s,a),n.ymin=Math.min(o,l),n.xmax=Math.max(s,a),n.ymax=Math.max(o,l),n.spatialReference=u,n}function Tke(t,e,i){const n=i.toMap(t);return n==null?!1:k9(n,E9(),i,S0e).intersects(e)}const S0e=new Ve;async function $0e(){return V(()=>import("./geometryEngineJSON-QxO3KC6L.js").then(t=>t.g),__vite__mapDeps([7,8,9]),import.meta.url)}async function x0e(){return $0e().then(({contains:t,intersects:e,overlaps:i,simplify:n})=>({contains:t,intersects:e,overlaps:i,simplify:n}))}async function M9(t){const{currentSelection:e,options:i,selector:n,signal:r,sources:s,view:o}=t;if(!(s!=null&&s.length))return{added:[],removed:[]};const{layers:a,layerViews:l,graphicsLayers:u}=M0e(s),p=(await S1(Promise.all([E0e(n,a,o,r),k0e(n,l,o,r),T0e(n,u,i,o)]),r)).flat();if(!e)return{added:p,removed:[]};const f=p.filter(g=>GA(e.toArray(),g)),m=e.filter(g=>GA(p,g)).toArray();return e.removeMany(m),e.addMany(f),{added:f,removed:m}}const T0e=async(t,e,i,n)=>A0e({candidates:e.flatMap(r=>r.graphics.toArray())??[],selector:t,options:i,view:n}),E0e=async(t,e,i,n)=>{const r=await cc(I0e({selector:t,signal:n,layers:e,view:i}));return r?r.filter(s=>s.status==="fulfilled").flatMap(s=>s.value):[]},k0e=async(t,e,i,n)=>{const r=await cc(C0e({selector:t,signal:n,layerViews:e,view:i}));return r?r.filter(s=>s.status==="fulfilled").flatMap(s=>s.value):[]};function M0e(t){const e=[],i=[],n=[];return t.forEach(r=>{var s,o;W0(r)?e.push(r):dD(r)&&((s=r.layers)!=null&&s.length)?e.push(...r.layers.toArray()):NX(r)&&((o=r.sublayers)!=null&&o.length)?n.push(...r.sublayers.toArray()):RX(r)?n.push(r):_v(r)&&i.push(r)}),{layers:e,layerViews:i,graphicsLayers:n}}function GA(t,e){const i=t.includes(e),n=e.getObjectId(),r=n!=null,s=t.some(o=>{const a=e.layer===o.layer,l=r&&o.getObjectId()===n,u=e.uid===o.uid;return a&&(l||u)});return!i&&!s}async function C0e(t){const{layerViews:e,selector:i,signal:n,view:r}=t;return S1(Promise.allSettled(e.map(async s=>{const o=s.createQuery(),{outFields:a,geometry:l}=C9(i,s.layer,r);return o.outFields=a,o.geometry=l,o.returnGeometry=!0,o.outSpatialReference=r.spatialReference,s.queryFeatures(o,{signal:n}).then(({features:u})=>u)})),n)}async function I0e(t){const{layers:e,selector:i,signal:n,view:r}=t;return S1(Promise.allSettled(e.map(async s=>s.queryFeatures(O0e(s.createQuery(),i,s,r),{signal:n}).then(({features:o})=>o))),n)}function C9(t,e,i){const n="displayField"in e?e.displayField:null,r=tte({displayField:n,fields:e.fields}),s=[e.objectIdField];r!=null&&e.fieldsIndex.has(r)&&s.push(r);const o="renderer"in e?E9({renderer:e.renderer}):0;return{geometry:t.type==="point"?k9(t,o,i):t,outFields:s}}function O0e(t,e,i,n){const{outFields:r,geometry:s}=C9(e,i,n);return t.outFields=r,t.geometry=s,t.returnGeometry=!0,t.outSpatialReference=n.spatialReference,t}async function A0e(t){const{selector:e,candidates:i,options:n,view:r}=t;if(!(i!=null&&i.length)||!e||!n)return[];const{overlaps:s,intersects:o,contains:a}=n,{spatialReference:l}=r,u=e,p=await x0e();return i.filter(f=>{const m=f.geometry,g=s&&p.overlaps(l,u,m),y=o&&p.intersects(l,u,m),v=a&&p.contains(l,u,m);return g||y||v})}const L0e=100;let ls=class extends An.EventedAccessor{constructor({options:e,view:i}){super(),this._abortController=null,this._activeOptions=null,this._completed=!1,this._dashedFillSymbol=new Vg({color:[0,0,0,0],outline:{style:"dash",color:[12,207,255],width:2}}),this._dashedLineSymbol=new Ja({style:"dash",color:[12,207,255],width:2}),this._defaultOptions={createTool:"rectangle",selectionOptions:{overlaps:!0,intersects:!0,contains:!1}},this._processSelectionGeometry=async({canceled:l,completed:u,selector:p})=>{const{_activeOptions:f,sources:m,selection:g,view:y}=this;if(this._abortController&&this._abortController.abort(),(u||l)&&(this._completed=!0),l)return void this._onComplete([],!0);if(!p||!(m!=null&&m.length)||!y)return void g.removeAll();const v=new AbortController;this._abortController=v;const{added:b,removed:_}=await M9({currentSelection:g,sources:m,options:f.selectionOptions,selector:p,signal:v.signal,view:y});this._abortController===v&&(this._abortController=null),v.signal.aborted||(u?this._onComplete(this.selection.toArray(),!1):(b.length||_.length)&&this.emit("selection-change",{added:b,removed:_,type:"selection-change"}))},this._processDebounced=oP(this._processSelectionGeometry,L0e),this._sketchViewModel=new x9,this._sketchGraphicsLayer=new Wk({listMode:"hide",internal:!0}),this._transparentPointSymbol=new fp({color:[0,0,0,0],outline:{style:"none",width:0}}),this.options=null,this.selection=new te,this.sources=null,this.options=e,this.view=i;const{_dashedFillSymbol:n,_dashedLineSymbol:r,_sketchViewModel:s,_sketchGraphicsLayer:o,_transparentPointSymbol:a}=this;s.set({layer:o,activePointSymbol:a,activeLineSymbol:r,activeVertexSymbol:a,activeFillSymbol:n,pointSymbol:a,polygonSymbol:n,polylineSymbol:r,vertexSymbol:a,view:i}),this.addHandles([s.on("create",l=>this._onSketchEvent(l)),s.on(["undo","redo"],l=>this._onSketchEvent(l)),s.watch("activeComponent.forceUniformSize",()=>this._onSketchGeometryChange())])}initialize(){this._load()}set cursor(e){var n;const i=(n=this._sketchViewModel)==null?void 0:n.activeComponent;(i==null?void 0:i.type)!=="draw-2d"&&(i==null?void 0:i.type)!=="draw-3d"||(i.cursor=e),this._set("cursor",e)}get state(){const{_completed:e,_sketchViewModel:{state:i}}=this;return e?"complete":i==="active"?"active":"disabled"}set view(e){this._sketchViewModel.view=e,this._set("view",e)}cancel(){return this._sketchViewModel.cancel()}async _load(){var o,a,l;await((o=this.view)==null?void 0:o.whenReady());const{_defaultOptions:e,options:i}=this,n=((a=i==null?void 0:i.createOptions)==null?void 0:a.cursor)||this.cursor||((l=e.createOptions)==null?void 0:l.cursor),{createTool:r,createOptions:s}=this._activeOptions={...e,...i,createOptions:{...e.createOptions,cursor:n,...i==null?void 0:i.createOptions},selectionOptions:{...e.selectionOptions,...i==null?void 0:i.selectionOptions}};this._sketchViewModel.create(r,s)}_onSketchEvent(e){const i=e.type==="create"?e.graphic:e.graphics[0],n=i==null?void 0:i.geometry,r=e.type==="create"&&e.state==="cancel",s=e.type==="create"&&e.state==="complete";cc(this._processDebounced({canceled:r,completed:s,selector:n}))}_onSketchGeometryChange(){const e=this._sketchViewModel.createGraphic,i=e==null?void 0:e.geometry;i&&cc(this._processDebounced({canceled:!1,completed:!1,selector:i}))}_onComplete(e,i){this.removeAllHandles(),this.notifyChange("state"),this.emit("complete",{aborted:i,selection:e,type:"complete"})}};c([d()],ls.prototype,"_abortController",void 0),c([d()],ls.prototype,"_completed",void 0),c([d()],ls.prototype,"cursor",null),c([d()],ls.prototype,"options",void 0),c([d({readOnly:!0})],ls.prototype,"selection",void 0),c([d()],ls.prototype,"sources",void 0),c([d({readOnly:!0})],ls.prototype,"state",null),c([d()],ls.prototype,"view",null),ls=c([S("esri.widgets.support.Selector2D.SelectionOperation2D")],ls);const P0e=ls;let xu=class extends X{constructor(e){super(e),this._defaultSelectionOptions={intersects:!0,overlaps:!0,contains:!0},this.cursor=null,this.options=null,this.sources=null,this.view=null}draw(e){const{operationOptions:i}=e,{view:n}=this;return new P0e({cursor:this.cursor,sources:e.sources??this.sources??[],options:{...i,selectionOptions:{...this._defaultSelectionOptions,...this.options,...i==null?void 0:i.selectionOptions}},view:n})}async selectionFrom(e){const{view:i}=this,n=e.sources??this.sources??[];if(!n.length||!i)return[];const r=new te;return await M9({selector:e.geometry,currentSelection:r,sources:n,options:{...this._defaultSelectionOptions,...this.options,...e.selectionOptions},view:i}),r.toArray()}};c([d()],xu.prototype,"cursor",void 0),c([d()],xu.prototype,"options",void 0),c([d()],xu.prototype,"sources",void 0),c([d()],xu.prototype,"view",void 0),xu=c([S("esri.widgets.support.Selector2D")],xu);const R0e=xu;let cs=class extends An.EventedAccessor{constructor(e){super(e),this._operationHandlesGroup=null,this.activeOperation=null,this.selector=new R0e,this.sources=null}initialize(){this.addHandles([Z(()=>this._sources,e=>{this.selector.sources=e,this.activeOperation&&(this.activeOperation.sources=e)})])}destroy(){this._operationHandlesGroup=Je(this._operationHandlesGroup),this.selector.destroy()}get _sources(){const{sources:e,view:i}=this;return i&&(e!=null&&e.length)?e.flatMap(n=>{if(_v(n))return n;if(dD(n)){const s=n.layers||[],o=s.map(a=>{const l=TA(i,a)||void 0;return _v(l)?l:a});return o.length?o.toArray():s.length?s.toArray():n}const r=TA(i,n)||void 0;return _v(r)?r:n}):[]}set cursor(e){this.activeOperation&&(this.activeOperation.cursor=e),this.selector.cursor=e,this._set("cursor",e)}get layers(){return Ov(J.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.sources}set layers(e){Ov(J.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.sources=e}get state(){var e;return this.activeOperation?"active":(e=this.view)!=null&&e.ready&&this._sources.length?"ready":"disabled"}set view(e){this.selector.view=e,this._set("view",e)}async selectionFrom(e,i){const{_sources:n}=this;return this.view&&n.length?this.selector.selectionFrom({geometry:e,selectionOptions:i,sources:n}):[]}cancel(){var e;this.state==="active"&&((e=this.activeOperation)==null||e.cancel(),this._set("activeOperation",null))}activate(e){const{_sources:i,state:n}=this;if(n==="disabled"||!(i!=null&&i.length))return;n==="active"&&this.cancel();const r=this.selector.draw({sources:i,operationOptions:e});return this._operationHandlesGroup=$c([r.once("complete",s=>this._onOperationComplete(s)),r.on("selection-change",s=>this._onOperationSelectionChange(s))]),this._set("activeOperation",r),r}_onOperationSelectionChange(e){this.emit("selection-change",e)}_onOperationComplete(e){this._operationHandlesGroup=Je(this._operationHandlesGroup),this._set("activeOperation",null),this.emit("complete",e)}};c([d()],cs.prototype,"_sources",null),c([d({readOnly:!0})],cs.prototype,"activeOperation",void 0),c([d()],cs.prototype,"cursor",null),c([d()],cs.prototype,"layers",null),c([d({readOnly:!0})],cs.prototype,"selector",void 0),c([d()],cs.prototype,"sources",void 0),c([d({readOnly:!0})],cs.prototype,"state",null),c([d()],cs.prototype,"view",null),cs=c([S("esri.widgets.support.SelectionToolbar.SelectionToolbarViewModel")],cs);const N0e=cs,UA={lassoTool:!0,rectangleTool:!0},D0e={createTool:"polygon",createOptions:{mode:"freehand"}},F0e={createTool:"rectangle"},_S="esri-selection-toolbar",SS={base:_S,widgetIcon:ot.vertexGps,container:`${_S}__container`,toolButton:`${_S}__tool-button`};let gn=class extends Ln{constructor(e,i){super(e,i),this._viewModelHandlesGroup=null,this.activeToolInfo=null,this.messages=null,this.toolConfigs=[],this.viewModel=new N0e,this.visibleElements={...UA},this._viewModelHandlesGroup=$c([this.viewModel.on("selection-change",n=>this.emit("selection-change",n)),this.viewModel.on("complete",n=>{this._set("activeToolInfo",null),this.emit("complete",n)})])}destroy(){this._viewModelHandlesGroup=Je(this._viewModelHandlesGroup)}loadDependencies(){return Cc({action:()=>V(()=>import("./calcite-action-MFucn8My.js"),__vite__mapDeps([328,329,277,268,270,271,272,273,274,275,276]),import.meta.url),icon:()=>V(()=>import("./calcite-icon-uORPeLj9.js"),__vite__mapDeps([278,275,273]),import.meta.url)})}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get layers(){return Ov(J.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.viewModel.sources}set layers(e){Ov(J.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.viewModel.sources=e}get sources(){return this.viewModel.sources}set sources(e){this.viewModel.sources=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}castVisibleElements(e){return{...UA,...e}}get visibleToolCount(){const{view:e,toolConfigs:i,visibleElements:n}=this;return((i==null?void 0:i.length)??0)+((e==null?void 0:e.type)==="2d"?(n.lassoTool?1:0)+(n.rectangleTool?1:0):0)}activate(e){switch(this.cancel(),e){case"lasso":this._activateTool("lasso");break;case"rectangle":this._activateTool("rectangle");break;default:this._activateTool(e)}}cancel(){this.viewModel.cancel(),this._set("activeToolInfo",null)}render(){return A("div",{"aria-label":this.label,class:this.classes(SS.base,pe.widget)},A("div",{class:SS.container},this._renderDefaultTools(),this._renderCustomTools()))}_renderDefaultTools(){var e;if(((e=this.view)==null?void 0:e.type)==="2d")return[this._renderRectangleTool(),this._renderLassoTool()]}_renderCustomTools(){var e;if((e=this.toolConfigs)!=null&&e.length)return this.toolConfigs.map(i=>{var n;return A("calcite-action",{active:((n=this.activeToolInfo)==null?void 0:n.toolName)===i.toolName,bind:this,class:SS.toolButton,label:i.toolName,onclick:()=>this._onCustomToolClick(i.toolName),scale:"s",text:i.toolName,title:i.toolName},A("calcite-icon",{icon:i.icon||"selection",scale:"s"}))})}_renderLassoTool(){const{activeToolInfo:e,messages:i,visibleElements:n}=this;if(n.lassoTool)return A("calcite-action",{active:(e==null?void 0:e.toolName)==="lasso",bind:this,label:i.selectByLasso,onclick:this._onLassoToolClick,scale:"s",text:i.selectByLasso,title:i.selectByLasso},A("calcite-icon",{icon:"lasso-select",scale:"s"}))}_renderRectangleTool(){const{activeToolInfo:e,messages:i,visibleElements:n}=this;if(n.rectangleTool)return A("calcite-action",{active:(e==null?void 0:e.toolName)==="rectangle",bind:this,label:i.selectByRectangle,onclick:this._onRectangleToolClick,scale:"s",text:i.selectByRectangle,title:i.selectByRectangle},A("calcite-icon",{icon:"cursor-marquee",scale:"s"}))}_onCustomToolClick(e){this._toggleTool(e)}_onLassoToolClick(){this._toggleTool("lasso")}_onRectangleToolClick(){this._toggleTool("rectangle")}_activateTool(e){const i=this._getToolOptions(e);if(!i)return;const n=this.viewModel.activate(i);n&&this._set("activeToolInfo",{toolName:e,operation:n})}_toggleTool(e){if(this.activeToolInfo){const i=this.activeToolInfo.toolName;if(this.cancel(),i===e)return}this._activateTool(e)}_getToolOptions(e){if(e==="lasso")return D0e;if(e==="rectangle")return F0e;const i=this.toolConfigs.find(o=>o.toolName===e);if(!i)return;const{createTool:n,createOptions:r,selectionOptions:s}=i;return{createTool:n,createOptions:r,selectionOptions:s}}};c([d({readOnly:!0})],gn.prototype,"activeToolInfo",void 0),c([d()],gn.prototype,"label",null),c([d()],gn.prototype,"layers",null),c([d(),nn("esri/widgets/support/SelectionToolbar/t9n/SelectionToolbar")],gn.prototype,"messages",void 0),c([d()],gn.prototype,"sources",null),c([d()],gn.prototype,"toolConfigs",void 0),c([d()],gn.prototype,"view",null),c([d()],gn.prototype,"viewModel",void 0),c([d()],gn.prototype,"visibleElements",void 0),c([zt("visibleElements")],gn.prototype,"castVisibleElements",null),c([d()],gn.prototype,"visibleToolCount",null),gn=c([S("esri.widgets.support.SelectionToolbar")],gn);const z0e=gn,I9=()=>Promise.all([Cc({icon:()=>V(()=>import("./calcite-icon-uORPeLj9.js"),__vite__mapDeps([278,275,273]),import.meta.url),label:()=>V(()=>import("./calcite-label-tfqqnVXJ.js"),__vite__mapDeps([330,269]),import.meta.url),switch:()=>V(()=>import("./calcite-switch-bfYMgmin.js"),__vite__mapDeps([331,267,268,272,269,270]),import.meta.url),tooltip:()=>V(()=>import("./calcite-tooltip-b0B89j2Y.js"),__vite__mapDeps([332,333,334,277,335]),import.meta.url)})]),$S="esri-labeled-switch",xS={label:`${$S}__label`,labelContent:`${$S}__label-content`,icon:`${$S}__icon`};function Fm({checked:t,disabled:e,hint:i,key:n,label:r,onChange:s}){return A("calcite-label",{class:xS.label,disabled:e,key:n,layout:"inline-space-between",scale:"s"},A("div",{class:xS.labelContent,key:"label-content"},i?A(Gle,null,A("div",null,r),A("calcite-icon",{class:xS.icon,icon:"information",id:n,scale:"s"}),A("calcite-tooltip",{referenceElement:n},i)):r),A("calcite-switch",{checked:t,disabled:e,scale:"s",onCalciteSwitchChange:o=>s(o.target.checked)}))}const j0e="esri.widgets.support.SketchTooltipControls.SketchTooltipControlsViewModel";let pm=class extends X{constructor(e){super(e),this.labelOptions=new Cw,this.tooltipOptions=new Iw}};c([d({type:Cw,nonNullable:!0})],pm.prototype,"labelOptions",void 0),c([d({type:Iw,nonNullable:!0})],pm.prototype,"tooltipOptions",void 0),pm=c([S(j0e)],pm);const G0e=pm,w0="esri-sketch-tooltip-controls",_0={base:w0,widgetIcon:ot.gear,block:`${w0}__block`,blockContent:`${w0}__block-content`,hintIcon:`${w0}__hint-icon`};let yr=class extends Ln{constructor(e,i){super(e,i),this._defaultViewModel=null,this.icon=null,this.iconClass=_0.widgetIcon,this.visibleElements=new zw,this.viewType=void 0,this._onTooltipsEnabledChange=o=>{this.tooltipOptions.enabled=o},this._onLabelsEnabledChange=o=>{this.labelOptions.enabled=o};const{tooltipOptions:n,labelOptions:r,viewModel:s}=e;this.viewModel=s??(this._defaultViewModel=new G0e({tooltipOptions:n,labelOptions:r}))}loadDependencies(){return Promise.all([Cc({block:()=>V(()=>import("./calcite-block-xfdCTipm.js"),__vite__mapDeps([336,282,273,268,271,272,337,277,270,329,274,275,276,333,334,335,338,280]),import.meta.url)}),I9()])}render(){const{label:e,visibleElements:i}=this,n=this._renderContent();return A("div",{"aria-label":e,class:this.classes(_0.base,pe.widget)},n?A("calcite-block",{class:_0.block,heading:i.header?this.label:"",key:"content-block",open:!0},A("div",{class:_0.blockContent,key:"content"},n)):void 0)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get labelOptions(){return this.viewModel.labelOptions}set labelOptions(e){this.viewModel.labelOptions=e}get tooltipOptions(){return this.viewModel.tooltipOptions}set tooltipOptions(e){this.viewModel.tooltipOptions=e}set viewModel(e){e!==this._get("viewModel")&&(this._defaultViewModel!=null&&this._defaultViewModel===e||(this._defaultViewModel=Oe(this._defaultViewModel)),this._set("viewModel",e))}_renderContent(){const{visibleElements:e,viewType:i}=this,n=[e.tooltipsToggle?this._renderTooltipsToggle():null,e.labelsToggle&&i!=="2d"?this._renderLabelsToggle():null].filter(Qi);return n.length===0?null:n}_renderTooltipsToggle(){const{messages:e,tooltipOptions:i}=this;return A(Fm,{checked:i.enabled,hint:e.tooltipsToggleHint,key:`${this.id}__tooltips`,label:e.tooltipsToggle,onChange:this._onTooltipsEnabledChange})}_renderLabelsToggle(){const{messages:e,labelOptions:i}=this;return A(Fm,{checked:i.enabled,hint:e.labelsToggleHint,key:`${this.id}__labels`,label:e.labelsToggle,onChange:this._onLabelsEnabledChange})}};c([d()],yr.prototype,"icon",void 0),c([d()],yr.prototype,"iconClass",void 0),c([d()],yr.prototype,"label",null),c([d()],yr.prototype,"labelOptions",null),c([d()],yr.prototype,"tooltipOptions",null),c([d()],yr.prototype,"viewModel",null),c([d({type:zw,nonNullable:!0})],yr.prototype,"visibleElements",void 0),c([d(),nn("esri/widgets/support/SketchTooltipControls/t9n/SketchTooltipControls")],yr.prototype,"messages",void 0),c([d({type:String})],yr.prototype,"viewType",void 0),yr=c([S("esri.widgets.support.SketchTooltipControls")],yr);const U0e=yr,O9={hide:"hide",hideChildren:"hide-children"};function f1(t){if(t)return t.listMode!=null?t.listMode:void 0}function H0e(t){return t!=null&&"minScale"in t&&t.minScale!=null?t.minScale:void 0}function V0e(t){return t!=null&&"maxScale"in t&&t.maxScale!=null?t.maxScale:void 0}function B0e(t){if(!t)return"inherited";const e=Z0e(L9(t)?t.layer:t);return e!=null?e?"independent":"inherited":"visibilityMode"in t&&t.visibilityMode!=null?t.visibilityMode:"independent"}function A9(t){if(t&&(!("type"in t)||t.type!=="wmts")&&t.listMode!==O9.hideChildren)return"sublayers"in t?"sublayers":"layers"in t?"layers":void 0}function dM(t){return f1(t)!==O9.hide}function q0e(t,e){if(!t||e==null||isNaN(e))return!1;const i=H0e(t),n=V0e(t),r=i!=null&&!isNaN(i)&&i>0&&e>i,s=n!=null&&!isNaN(n)&&n>0&&e<n;return r||s}function HA(t){const e=t==null?void 0:t.layer;return e&&"layers"in e?e.layers:null}function W0e(t){const e=L9(t)?t:null,i=t==null?void 0:t.parent,n=i!=null&&"type"in i&&i.type==="map-image"?e==null?void 0:e.source:null,r="";return n&&i?{layer:i,title:r,sublayerIds:[n.mapLayerId]}:{layer:t,title:r}}function L9(t){return t!=null&&"layer"in t&&t.layer!=null}function Z0e(t){const e=K0e(t);return e!=null&&"supportsSublayerVisibility"in e?e.supportsSublayerVisibility:void 0}function K0e(t){return t&&"capabilities"in t&&t.capabilities!=null&&"exportMap"in t.capabilities?t.capabilities.exportMap:void 0}var lT;let zl=lT=class extends Dg{constructor(t){super(t),this.displayValueEnabled=!1,this.max=1,this.min=0,this.step=.1,this.type="slider",this.value=null}clone(){return new lT({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,displayValueEnabled:this.displayValueEnabled,max:this.max,min:this.min,step:this.step,value:this.value})}};c([d()],zl.prototype,"displayValueEnabled",void 0),c([d()],zl.prototype,"max",void 0),c([d()],zl.prototype,"min",void 0),c([d()],zl.prototype,"step",void 0),c([d()],zl.prototype,"value",void 0),zl=lT=c([S("esri.support.Action.ActionSlider")],zl);const J0e=zl,P9="esri-layer-list-panel",yf=`${P9}__content`,na={base:P9,content:yf,contentLegend:`${yf}--legend`,contentString:`${yf}--string`,contentElement:`${yf}--html-element`,contentWidget:`${yf}--widget`},Y0e="legends";let vr=class extends Td(Ln){constructor(e,i){super(e,i),this._legend=null,this.content=null,this.image=null,this.listItem=null,this.open=!1,this.visible=!0}initialize(){this.addHandles(Z(()=>this.content,e=>this._createLegend(e),De))}destroy(){this._legend=Oe(this._legend)}get className(){const{image:e}=this,i=this._getFirstWidget();return this._get("className")||(!e&&i?i.iconClass??"":"")}set className(e){this._override("className",e)}get disabled(){var r;const{listItem:e,_legend:i,content:n}=this;return!e||!(Array.isArray(n)&&n.length>1)&&!!i&&(!((r=i.activeLayerInfos)!=null&&r.length)||!e.visibleAtCurrentScale||!e.visible)}set disabled(e){this._overrideIfSome("disabled",e)}get title(){const e=this._getFirstWidget();return this._get("title")||((e==null?void 0:e.label)??"")}set title(e){this._override("title",e)}render(){return A("div",{class:na.base},this._renderContents())}_renderContent(e){const{_legend:i,disabled:n}=this;return!e||n?null:e==="legend"&&i?A("div",{class:this.classes(na.content,na.contentLegend),key:i},i.render()):typeof e=="string"?A("div",{class:this.classes(na.content,na.contentString),innerHTML:e,key:e}):Rm(e)?A("div",{class:this.classes(na.content,na.contentWidget),key:e},e.render()):e instanceof HTMLElement?A("div",{afterCreate:this._attachToNode,bind:e,class:this.classes(na.content,na.contentElement),key:e}):null}_renderContents(){const{content:e}=this;return Array.isArray(e)?e.map(i=>this._renderContent(i)):this._renderContent(e)}_getLegendOptions(){const{listItem:e}=this;if(!e)return{};const{layer:i,view:n}=e;return i&&n?{view:n,layerInfos:[W0e(i)]}:{}}async _createLegend(e){if(!this._hasLegend(e)||this._legend)return;const{default:i}=await V(()=>import("./Legend-4mbXL0iA.js"),__vite__mapDeps([339,193,252,137,233,89,122,123,84,70,124,93,85,125,126,127,23,128,29,26,3,316,4,120,121,118,119,91,129,130]),import.meta.url),{listItem:n}=this,r=new i(this._getLegendOptions());this._legend=r,this.notifyChange("className"),this.notifyChange("title");const s=Z(()=>{var o,a;return[n==null?void 0:n.view,n==null?void 0:n.layer,(o=n==null?void 0:n.layer)==null?void 0:o.source,(a=n==null?void 0:n.layer)==null?void 0:a.parent]},()=>this._updateLegend(r),De);this.addHandles(s,Y0e),this.scheduleRender()}_hasLegend(e){const i="legend";return e===i||e!=null&&!!Array.isArray(e)&&e.includes(i)}_attachToNode(e){e.appendChild(this)}_updateLegend(e){e.set(this._getLegendOptions()),this.scheduleRender()}_getWidget(e){return e==="legend"?this._legend:Rm(e)?e:null}_getFirstWidget(){const{content:e}=this;if(Array.isArray(e)){let i=null;return e.some(n=>{const r=this._getWidget(n);return r&&(i=r),!!r}),i}return this._getWidget(e)}};c([d()],vr.prototype,"_legend",void 0),c([d()],vr.prototype,"className",null),c([d()],vr.prototype,"content",void 0),c([d()],vr.prototype,"disabled",null),c([d()],vr.prototype,"image",void 0),c([d()],vr.prototype,"listItem",void 0),c([d()],vr.prototype,"title",null),c([d()],vr.prototype,"open",void 0),c([d()],vr.prototype,"visible",void 0),vr=c([S("esri.widgets.LayerList.ListItemPanel")],vr);const R9=vr;var fm;const X0e=te.ofType({key:"type",defaultKeyValue:"button",base:Dg,typeMap:{button:d4,toggle:h4,slider:J0e}}),N9=te.ofType(X0e),S0="layer",TS="child-list-mode",Q0e="hide",eve="esri.widgets.LayerList.ListItem";let st=fm=class extends Td(X){constructor(t){super(t),this.actionsSections=new N9,this.actionsOpen=!1,this.checkPublishStatusEnabled=!1,this.children=new(te.ofType(fm)),this.childrenSortable=!0,this.hidden=!1,this.layer=null,this.layerView=null,this.listItemCreatedFunction=null,this.open=!1,this.panel=null,this.parent=null,this.sortable=!0,this.view=null}initialize(){if(this.addHandles([Z(()=>this.layer,t=>this._watchLayerProperties(t),De),Z(()=>this.checkPublishStatusEnabled,t=>this._updateChildrenPublishing(t),De),Z(()=>this.view,t=>this._updateChildrenView(t),De),Z(()=>this.panel,t=>this._setListItemOnPanel(t),De),Z(()=>[this.layer,this.view],()=>this._getLayerView(),De)]),typeof this.listItemCreatedFunction=="function"){const t={item:this};this.listItemCreatedFunction.call(null,t)}}destroy(){this.view=null}get connectionStatus(){const{layerView:t,publishing:e}=this;if(!e&&t&&"connectionStatus"in t)return t.connectionStatus}get error(){var t;return(t=this.layer)==null?void 0:t.loadError}get incompatible(){const{layerView:t}=this;return!(!t||!("spatialReferenceSupported"in t))&&!t.spatialReferenceSupported}castPanel(t){var e;return(e=this.panel)!=null&&e.open&&!t.hasOwnProperty("open")&&(t.open=!0),t?new R9(t):null}get title(){const t=Tn(this,"layer.layer");return(!t||t&&Tn(this,"layer.layer.loaded"))&&Tn(this,"layer.title")||Tn(this,"layer.attributes.title")||""}set title(t){this._override("title",t)}get publishing(){var i;const{layer:t,checkPublishStatusEnabled:e}=this;return e&&t&&"publishingInfo"in t&&((i=t.publishingInfo)==null?void 0:i.status)==="publishing"}get updating(){const{layerView:t,connectionStatus:e,layer:i,publishing:n}=this;return!n&&!e&&(t?t.updating:(i==null?void 0:i.loadStatus)==="loading"||!1)}get visible(){var t;return(t=this.layer)==null?void 0:t.visible}set visible(t){const e=this.layer;e&&(e.visible=t)}get visibleAtCurrentScale(){var t;return!q0e(this.layer,(t=this.view)==null?void 0:t.scale)}get visibilityMode(){return B0e(this.layer)}clone(){return new fm({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,checkPublishStatusEnabled:this.checkPublishStatusEnabled,children:this.children.clone(),layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,open:this.open,panel:this.panel,title:this.title,view:this.view,visible:this.visible})}_setListItemOnPanel(t){t&&(t.listItem=this)}_updateChildrenPublishing(t){const e=this.children;e&&e.forEach(i=>i.checkPublishStatusEnabled=t)}_updateChildrenView(t){const e=this.children;e&&e.forEach(i=>i.view=t)}_addChildren(t){if(this.removeHandles(TS),this.children.removeAll(),!t)return;t.forEach(i=>{this.addHandles(Z(()=>i.listMode,()=>this._addChildren(t)),TS)});const e=t.filter(i=>f1(i)!==Q0e);this.children.addMany(this._makeChildren(e))}_watchSublayerChanges(t){t&&this.addHandles(t.on("change",()=>{this._addChildren(t)}),S0)}_initializeChildLayers(t){this._addChildren(t),this._watchSublayerChanges(t)}_makeChildren(t){return t.map(e=>dM(e)?new fm({layer:e,checkPublishStatusEnabled:this.checkPublishStatusEnabled,listItemCreatedFunction:this.listItemCreatedFunction,parent:this,view:this.view}):null).filter(Qi).reverse()}_watchLayerProperties(t){if(this.removeHandles(S0),this.removeHandles(TS),!t)return;if(this.addHandles(Z(()=>t.listMode,()=>this._watchLayerProperties(t)),S0),f1(t)==="hide-children")return void this.children.removeAll();const e=A9(t);e&&this.addHandles(Z(()=>t[e],i=>{t.hasOwnProperty(e)&&this._initializeChildLayers(i)},De),S0)}async _getLayerView(){const{layer:t,view:e}=this;if(t&&e)try{const i=await e.whenLayerView(t);if(i.layer!==this.layer)return;this._set("layerView",i)}catch{}}};c([d({type:N9})],st.prototype,"actionsSections",void 0),c([d()],st.prototype,"actionsOpen",void 0),c([d()],st.prototype,"checkPublishStatusEnabled",void 0),c([d({type:te})],st.prototype,"children",void 0),c([d()],st.prototype,"childrenSortable",void 0),c([d({readOnly:!0})],st.prototype,"connectionStatus",null),c([d({readOnly:!0})],st.prototype,"error",null),c([d()],st.prototype,"hidden",void 0),c([d({readOnly:!0})],st.prototype,"incompatible",null),c([d()],st.prototype,"layer",void 0),c([d({readOnly:!0})],st.prototype,"layerView",void 0),c([d()],st.prototype,"listItemCreatedFunction",void 0),c([d()],st.prototype,"open",void 0),c([d({type:R9})],st.prototype,"panel",void 0),c([zt("panel")],st.prototype,"castPanel",null),c([d()],st.prototype,"parent",void 0),c([d()],st.prototype,"sortable",void 0),c([d()],st.prototype,"title",null),c([d({readOnly:!0})],st.prototype,"publishing",null),c([d({readOnly:!0})],st.prototype,"updating",null),c([d()],st.prototype,"view",void 0),c([d()],st.prototype,"visible",null),c([d({readOnly:!0})],st.prototype,"visibleAtCurrentScale",null),c([d({readOnly:!0})],st.prototype,"visibilityMode",null),st=fm=c([S(eve)],st);const hM=st,Zr={view:"view",viewLayers:"view-layers",mapLayers:"map-layers",layerViews:"layer-views",layerListMode:"layer-list-mode"},tve="hide",D9=te.ofType(hM);let jl=class extends An.EventedAccessor{constructor(e){super(e),this.checkPublishStatusEnabled=!1,this.listItemCreatedFunction=null,this.operationalItems=new D9,this.view=null}initialize(){this.addHandles([Z(()=>{var e;return[this.view,(e=this.view)==null?void 0:e.ready]},()=>this._viewHandles(),De),Z(()=>[this.listItemCreatedFunction,this.checkPublishStatusEnabled],()=>this._recompileList())],Zr.view)}destroy(){this.view=null,this.operationalItems.removeAll()}get state(){const{view:e}=this;return e!=null&&e.ready?"ready":e?"loading":"disabled"}triggerAction(e,i){e&&!e.disabled&&this.emit("trigger-action",{action:e,item:i})}moveListItem(e,i,n,r){var g,y;const s=e==null?void 0:e.layer;if(!s)return;const o=(y=(g=this.view)==null?void 0:g.map)==null?void 0:y.layers,a=i?HA(i):o,l=n?HA(n):o;if(!a||!l)return;const{operationalItems:u}=this,p=(i==null?void 0:i.children)||u,f=(n==null?void 0:n.children)||u,m=l.length-r;e.parent=n||null,p.includes(e)&&p.remove(e),a.includes(s)&&a.remove(s),f.includes(e)||f.add(e,m),l.includes(s)||l.add(s,m)}_createLayerViewHandles(e){this.removeHandles(Zr.layerViews),this._compileList(),e&&this.addHandles(e.on("change",()=>this._compileList()),Zr.layerViews)}_createMapLayerHandles(e){this.removeHandles(Zr.mapLayers),this._compileList(),e&&this.addHandles(e.on("change",()=>this._compileList()),Zr.mapLayers)}_createListItem(e){const{view:i,listItemCreatedFunction:n,checkPublishStatusEnabled:r}=this;return new hM({checkPublishStatusEnabled:r,layer:e,listItemCreatedFunction:n,view:i})}_removeAllItems(){this.operationalItems.removeAll()}_getViewableLayers(e){if(e)return e.filter(i=>f1(i)!==tve)}_watchLayersListMode(e){this.removeHandles(Zr.layerListMode),e&&e.forEach(i=>{"listMode"in i&&this.addHandles(Z(()=>i.listMode,()=>this._compileList()),Zr.layerListMode)})}_compileList(){var n,r;const e=(r=(n=this.view)==null?void 0:n.map)==null?void 0:r.layers;this._watchLayersListMode(e);const i=this._getViewableLayers(e);i!=null&&i.length?(this._createNewItems(i),this._removeItems(i),this._sortItems(i)):this._removeAllItems()}_createNewItems(e){const{operationalItems:i}=this;e.forEach(n=>{i.find(r=>r.layer===n)||i.add(this._createListItem(n))})}_removeItems(e){const{operationalItems:i}=this,n=[];i.forEach(r=>{r&&e&&e.includes(r.layer)||n.push(r)}),i.removeMany(n)}_sortItems(e){const{operationalItems:i}=this;i.sort((n,r)=>{const s=e.indexOf(n.layer),o=e.indexOf(r.layer);return s>o?-1:s<o?1:0})}_recompileList(){this._removeAllItems(),this._compileList()}_viewHandles(){const{view:e}=this;this.removeHandles([Zr.mapLayers,Zr.layerViews,Zr.viewLayers]),this._recompileList(),e&&e.ready&&this.addHandles([Z(()=>{var i,n;return(n=(i=this.view)==null?void 0:i.map)==null?void 0:n.allLayers},i=>this._createMapLayerHandles(i),De),Z(()=>{var i;return(i=this.view)==null?void 0:i.allLayerViews},i=>this._createLayerViewHandles(i),De)],Zr.viewLayers)}};c([d()],jl.prototype,"checkPublishStatusEnabled",void 0),c([d()],jl.prototype,"listItemCreatedFunction",void 0),c([d({type:D9})],jl.prototype,"operationalItems",void 0),c([d({readOnly:!0})],jl.prototype,"state",null),c([d()],jl.prototype,"view",void 0),jl=c([S("esri.widgets.LayerList.LayerListViewModel")],jl);const ive=jl,pM=t=>nve(t)||rve(t),nve=t=>{if(!("type"in t))return!1;switch(t.type){case"feature":case"geojson":case"csv":case"graphics":case"wfs":case"map-notes":case"oriented-imagery":case"scene":case"building-scene":return!0;default:return!1}},rve=t=>{const e=A9(t);if(e!=null&&t.hasOwnProperty(e)&&t[e]!=null){for(const i of t[e])if(pM(i))return!0}return!1};var cT;let us=cT=class extends hM{constructor(t){super(t),this.children=new te,this.parent=null}get allChildrenEnabled(){return this.children.every(t=>t.enabled)??!1}get childLayerIds(){return this.children.map(t=>t.layer.id).toArray()}get enabled(){return this.featureSource!=null&&this.featureSource.enabled}get featureSource(){const{layer:t,getFeatureSnappingSources:e}=this;return e().find(i=>i.layer===t)}get hasChildrenEnabled(){return this.children.some(t=>t.enabled)}_initializeChildLayers(t){if(!t)return;const e=t.filter(pM);super._initializeChildLayers(e)}_makeChildren(t){return t.map(e=>dM(e)?new cT({layer:e,parent:this,view:this.view,getFeatureSnappingSources:this.getFeatureSnappingSources}):null).filter(Qi).reverse()}};c([d()],us.prototype,"allChildrenEnabled",null),c([d()],us.prototype,"children",void 0),c([d()],us.prototype,"childLayerIds",null),c([d()],us.prototype,"enabled",null),c([d()],us.prototype,"featureSource",null),c([d({constructOnly:!0})],us.prototype,"getFeatureSnappingSources",void 0),c([d()],us.prototype,"hasChildrenEnabled",null),c([d()],us.prototype,"parent",void 0),us=cT=c([S("esri.widgets.support.SnappingControls.SnappingListItem")],us);let Tu=class extends ive{constructor(){super(...arguments),this.featureSnappingSources=new te}get operationalItemsFlat(){return this.operationalItems.flatten(t=>t.children)}get selectableItems(){return this.operationalItemsFlat.filter(t=>{var e;return!((e=t.children)!=null&&e.length)})}_compileList(){var n,r;const t=(r=(n=this.view)==null?void 0:n.map)==null?void 0:r.layers;if(!t)return;const e=t.filter(pM);this._watchLayersListMode(e);const i=this._getViewableLayers(e);i!=null&&i.length?(this._createNewItems(i),this._removeItems(i),this._sortItems(i)):this._removeAllItems()}_createListItem(t){return new us({layer:t,view:this.view,getFeatureSnappingSources:()=>this.featureSnappingSources})}};c([d()],Tu.prototype,"featureSnappingSources",void 0),c([d()],Tu.prototype,"operationalItems",void 0),c([d()],Tu.prototype,"operationalItemsFlat",null),c([d()],Tu.prototype,"selectableItems",null),Tu=c([S("esri.widgets.support.SnappingControls.SnappingLayerListViewModel")],Tu);const sve="esri.widgets.support.SnappingControls.SnappingControlsViewModel";let ho=class extends X{constructor(e){super(e),this.layerListViewModel=new Tu,this.snappingOptions=new oy,this.view=null}initialize(){this.addHandles([Z(()=>({viewModel:this.layerListViewModel,view:this.view}),({viewModel:e,view:i})=>{e.view=i},De),Z(()=>{var e;return{viewModel:this.layerListViewModel,sources:(e=this.snappingOptions)==null?void 0:e.featureSources}},({viewModel:e,sources:i})=>{e.featureSnappingSources=i},De)])}get allLayersEnabled(){var e;return(((e=this.layerListViewModel)==null?void 0:e.selectableItems)??[]).every(i=>i.enabled)}get allLayersDisabled(){var e;return(((e=this.layerListViewModel)==null?void 0:e.selectableItems)??[]).every(i=>!i.enabled)}get layersEnabledCount(){var e,i;return((i=(e=this.layerListViewModel)==null?void 0:e.selectableItems)==null?void 0:i.filter(n=>n.enabled).length)??0}get state(){return this.snappingOptions?"ready":"disabled"}toggleSnappingForLayers(e,i){e==null||e.forEach(n=>i?this.enableSnappingForLayer(n):this.disableSnappingForLayer(n))}toggleSnappingForAllLayers(e){this.layerListViewModel.selectableItems.forEach(({layer:{id:i}})=>{e?this.enableSnappingForLayer(i):this.disableSnappingForLayer(i)})}enableSnappingForLayer(e){(this._findSnappingSourceForLayer(e)??this._makeSnappingSourceForLayer(e)).enabled=!0}disableSnappingForLayer(e){const i=this._findSnappingSourceForLayer(e);i&&(i.enabled=!1)}updateEnabledFeatureSources(e){for(const i of this.snappingOptions.featureSources)dM(i.layer)&&(i.enabled=e.includes(i.layer.id))}_findSnappingSourceForLayer(e){return this.snappingOptions.featureSources.find(i=>i.layer.id===e)}_makeSnappingSourceForLayer(e){var r;const i=(r=this.layerListViewModel.operationalItemsFlat.find(s=>s.layer.id===e))==null?void 0:r.layer;if(!i)throw new F("snapping-controls:layer-not-found",`cannot enable snapping for layer with id ${e} because no such layer was found in the view`);const n=new _9({layer:i});return this.snappingOptions.featureSources.add(n),n}};c([d()],ho.prototype,"allLayersEnabled",null),c([d()],ho.prototype,"allLayersDisabled",null),c([d({constructOnly:!0})],ho.prototype,"layerListViewModel",void 0),c([d()],ho.prototype,"layersEnabledCount",null),c([d({type:oy,nonNullable:!0})],ho.prototype,"snappingOptions",void 0),c([d()],ho.prototype,"state",null),c([d()],ho.prototype,"view",void 0),ho=c([S(sve)],ho);const ove=ho,Kr="esri-snapping-controls",lr={base:Kr,widgetIcon:ot.vertexGps,container:`${Kr}__container`,item:`${Kr}__item`,toggleBlock:`${Kr}__toggle-block`,layerListBlock:`${Kr}__layer-list-block`,layerList:`${Kr}__layer-list`,layerListFilter:`${Kr}__layer-list__filter`,layerListButton:`${Kr}__layer-list__button`,layerListItem:`${Kr}__layer-list__item`,layerListGroup:`${Kr}__layer-list__group`,nestedContainer:`${Kr}__nested-container`},vf={checked:"check-square-f",unchecked:"square",indeterminate:"minus-square"};let yn=class extends Ln{constructor(t,e){super(t,e),this._defaultViewModel=null,this._layerListFilter=null,this.iconClass=lr.widgetIcon,this.icon=null,this.layerListOpen=!0,this.messages=null,this.visibleElements=new jw,this._enableSnappingSwitchChange=s=>{this.snappingOptions.enabled=s},this._featureEnabledSwitchChange=s=>{this.snappingOptions.featureEnabled=s},this._selfEnabledSwitchChange=s=>{this.snappingOptions.selfEnabled=s},this._onToggleLayersButtonClick=s=>{this.viewModel.toggleSnappingForAllLayers(!this.viewModel.allLayersEnabled),requestAnimationFrame(()=>s.target.setFocus())};const{snappingOptions:i,view:n,viewModel:r}=t;this.viewModel=r??(this._defaultViewModel=new ove({snappingOptions:i,view:n}))}normalizeCtorArgs(t){const{snappingOptions:e,view:i,viewModel:n,...r}=t;return r}destroy(){this.viewModel!==this._defaultViewModel&&(this._defaultViewModel=Oe(this._defaultViewModel))}loadDependencies(){return Promise.all([Cc({accordion:()=>V(()=>import("./calcite-accordion-eyZVD5gy.js"),__vite__mapDeps([340,273]),import.meta.url),"accordion-item":()=>V(()=>import("./calcite-accordion-item-CNK8o1QJ.js"),__vite__mapDeps([341,282,273,274,275]),import.meta.url),action:()=>V(()=>import("./calcite-action-MFucn8My.js"),__vite__mapDeps([328,329,277,268,270,271,272,273,274,275,276]),import.meta.url),block:()=>V(()=>import("./calcite-block-xfdCTipm.js"),__vite__mapDeps([336,282,273,268,271,272,337,277,270,329,274,275,276,333,334,335,338,280]),import.meta.url),button:()=>V(()=>import("./calcite-button-3vurRxLj.js"),__vite__mapDeps([266,267,268,269,270,271,272,273,274,275,276,277]),import.meta.url),icon:()=>V(()=>import("./calcite-icon-uORPeLj9.js"),__vite__mapDeps([278,275,273]),import.meta.url),input:()=>V(()=>import("./calcite-input-iJ8NMqtW.js"),__vite__mapDeps([342,343,267,268,272,269,270,271,273,274,275]),import.meta.url),list:()=>V(()=>import("./calcite-list-pkTELC06.js"),__vite__mapDeps([344,268,273,345,270,334,271,272,275,343,267,269,274,276,277,280]),import.meta.url),"list-item":()=>V(()=>import("./calcite-list-item-NlJe8cMy.js"),__vite__mapDeps([346,268,345,271,272,273,270,329,277,274,275,276,338]),import.meta.url)}),I9()])}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get snappingOptions(){return this.viewModel.snappingOptions}set snappingOptions(t){this.viewModel.snappingOptions=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}set viewModel(t){t!==this._get("viewModel")&&(this._defaultViewModel!=null&&this._defaultViewModel===t||(this._defaultViewModel=Oe(this._defaultViewModel)),this._set("viewModel",t))}render(){const{label:t}=this;return A("div",{"aria-label":t,class:this.classes(lr.base,pe.widget)},A("div",{class:lr.container},this._renderContent()))}_renderContent(){return[this._renderToggles(),this._renderLayerList()]}_renderToggles(){const{visibleElements:t}=this,e=[t.selfEnabledToggle?this._renderSelfEnabledToggle():null,t.featureEnabledToggle?this._renderFeatureEnabledToggle():null].filter(Qi),i=[t.enabledToggle?this._renderEnabledToggle():null,e.length>0?A("div",{class:lr.nestedContainer},e):null].filter(Qi);return i.length===0?null:A("calcite-block",{class:lr.toggleBlock,heading:t.header?this.label:"",key:"toggle-block",open:!0},i)}_renderEnabledToggle(){const{messages:t,viewModel:e}=this,{snappingOptions:i}=e;return A(Fm,{checked:i.enabled,disabled:i.enabledToggled,key:`${this.id}__enabled-toggle`,label:t.enableSnapping,onChange:this._enableSnappingSwitchChange})}_renderSelfEnabledToggle(){const{messages:t,viewModel:e}=this,{snappingOptions:i}=e,n=i.enabled&&i.selfEnabled,r=i.enabledToggled||!i.enabled;return A(Fm,{checked:n,disabled:r,key:`${this.id}__self-enabled-toggle`,label:t.geometryGuides,onChange:this._selfEnabledSwitchChange})}_renderFeatureEnabledToggle(){const{messages:t,viewModel:e}=this,{snappingOptions:i}=e,n=i.enabled&&i.featureEnabled,r=i.enabledToggled||!i.enabled;return A(Fm,{checked:n,disabled:r,key:`${this.id}__feature-enabled-toggle`,label:t.featureToFeature,onChange:this._featureEnabledSwitchChange})}_renderLayerList(){if(!this.visibleElements.layerList)return null;const{messages:t,viewModel:e}=this,{snappingOptions:{enabled:i,enabledToggled:n}}=e,r=({target:{value:l}})=>{this._layerListFilter=l===""?null:new RegExp(l,"i")},s=e.layerListViewModel.operationalItems.length>9?A("calcite-input",{class:lr.layerListFilter,clearable:!0,placeholder:t==null?void 0:t.searchLayers,onCalciteInputInput:r}):null,o=n||!i,a=this.layerListOpen&&!o;return A("calcite-block",{class:lr.layerListBlock,collapsible:!0,disabled:o,heading:t.snappingLayers,key:"list-block",open:a,onCalciteBlockToggle:l=>this.layerListOpen=l.target.open},s,this._renderToggleLayersButton(),A("calcite-list",{class:lr.layerList},this._renderLayerListItemCollection(e.layerListViewModel.operationalItems,this._layerListFilter)))}_renderLayerListItemCollection(t,e){return t.map(i=>{if(!e||this._itemTitleMatchesFilter(i,e))return i.children.length>0?this._renderLayerListItemGroup(i):this._renderLayerListItem(i);const n=i.children.filter(r=>this._itemTitleMatchesFilter(r,e));return n.length>0?this._renderLayerListItemGroup(i,n):null}).toArray().filter(Qi)}_renderToggleLayersButton(){if(!this.visibleElements.layerListToggleLayersButton)return null;const{viewModel:{allLayersEnabled:t},messages:e}=this,i=t?e.disableAllLayers:e.enableAllLayers;return A("calcite-button",{appearance:"transparent",class:lr.layerListButton,label:i,name:"layer-toggle",onclick:this._onToggleLayersButtonClick,scale:"m"},i)}_renderLayerListItem(t){const{messages:{untitledLayer:e}}=this,i=t.title||e,n=t.enabled,r=()=>{this._handleLayerListItemChange({checked:!n,value:t.layer.id})};return A("calcite-list-item",{class:lr.layerListItem,key:`${this.id}-list-item-${t.uid}`,label:i,onCalciteListItemSelect:r},A("calcite-icon",{icon:n?vf.checked:vf.unchecked,scale:"s",slot:"content-start"}))}_renderLayerListItemGroup(t,e){const{allChildrenEnabled:i,children:n,hasChildrenEnabled:r,title:s}=t,o=this.messages,a=s||o.untitledLayer,l=s&&s!==""?s:Fh(),u=!!e,p=e??n,f=i?vf.checked:r?vf.indeterminate:vf.unchecked,m=i?o.disableAllLayers:o.enableAllLayers,g=()=>{this.viewModel.toggleSnappingForLayers(t.childLayerIds,!i)};return A("calcite-list-item",{class:lr.layerListItem,key:l},A("calcite-accordion",{appearance:"transparent",class:lr.layerListGroup},A("calcite-accordion-item",{expanded:u,heading:a,key:t.uid},A("calcite-action",{onclick:g,scale:"m",slot:"actions-start",text:m,textEnabled:!1},A("calcite-icon",{icon:f,scale:"s"})),A("calcite-list",null,this._renderLayerListItemCollection(p)))))}_itemTitleMatchesFilter(t,e){return e!=null&&e.test(t.title)}async _handleLayerListItemChange(t){t.checked?this.viewModel.enableSnappingForLayer(t.value):this.viewModel.disableSnappingForLayer(t.value)}};c([d()],yn.prototype,"_defaultViewModel",void 0),c([d()],yn.prototype,"_layerListFilter",void 0),c([d()],yn.prototype,"iconClass",void 0),c([d()],yn.prototype,"icon",void 0),c([d()],yn.prototype,"label",null),c([d({type:Boolean,nonNullable:!0})],yn.prototype,"layerListOpen",void 0),c([d(),nn("esri/widgets/support/SnappingControls/t9n/SnappingControls")],yn.prototype,"messages",void 0),c([d()],yn.prototype,"snappingOptions",null),c([d()],yn.prototype,"view",null),c([d()],yn.prototype,"viewModel",null),c([d({type:jw,nonNullable:!0})],yn.prototype,"visibleElements",void 0),yn=c([S("esri.widgets.support.SnappingControls")],yn);const ave=yn,li="esri-sketch",Jt={base:li,widgetIcon:ot.edit,verticalLayout:`${li}--vertical`,panel:`${li}__panel`,infoPanel:`${li}__info-panel`,section:`${li}__section`,toolSection:`${li}__tool-section`,infoSection:`${li}__info-section`,infoCountSection:`${li}__info-count-section`,menuContainer:`${li}__menu-container`,menuHeader:`${li}__menu-header`,menuTitle:`${li}__menu-title`,featureCountBadge:`${li}__feature-count-badge`,featureCountText:`${li}__feature-count-text`,featureCountNumber:`${li}__feature-count-number`,actionToggle:`${li}__action-toggle`,actionToggleOn:`${li}__action-toggle--on`,actionTitle:`${li}__item-action-title`,actionIcon:`${li}__item-action-icon`};let yt=class extends Ln{constructor(t,e){super(t,e),this._activeCreateOptions=null,this._menuOpen=!1,this._selectionToolbar=null,this._viewModelHandlesGroup=null,this.availableCreateTools=["point","polyline","polygon","rectangle","circle"],this.creationMode="continuous",this.iconClass=Jt.widgetIcon,this.icon=null,this.layout="horizontal",this.messages=null,this.messagesCommon=null,this.visibleElements=new T9,this._activateCreateTool=this._activateCreateTool.bind(this),this.viewModel=(t==null?void 0:t.viewModel)||new x9}initialize(){const{layer:t,view:e}=this,i=new z0e({view:(e==null?void 0:e.type)==="2d"?e:null,sources:t?[t]:null});this.addHandles([Z(()=>this.viewModel,n=>{this._viewModelHandlesGroup=Je(this._viewModelHandlesGroup),n&&(this._viewModelHandlesGroup=$c([n.on("create",r=>{this.scheduleRender(),this._onCreateOperation(r)}),n.on("update",()=>this.scheduleRender()),n.on("delete",r=>this.emit("delete",r)),n.on("undo",()=>this.scheduleRender()),n.on("redo",()=>this.scheduleRender()),Z(()=>n.layer,r=>{this._selectionToolbar&&(this._selectionToolbar.sources=r?[r]:null)}),Z(()=>n.view,r=>{this._selectionToolbar&&(this._selectionToolbar.view=(r==null?void 0:r.type)==="2d"?r:null)}),Z(()=>n.state,()=>this.notifyChange("state"))]))},di),On(()=>i.activeToolInfo,()=>this.viewModel.cancel()),i.on("complete",n=>this._onSelectionOperationComplete(n)),Z(()=>{const{selectionTools:n}=this.visibleElements;return{lassoTool:!!(n!=null&&n["lasso-selection"]),rectangleTool:!!(n!=null&&n["rectangle-selection"])}},n=>{Object.assign(i.visibleElements,n)},di)]),this._selectionToolbar=i}loadDependencies(){return Cc({action:()=>V(()=>import("./calcite-action-MFucn8My.js"),__vite__mapDeps([328,329,277,268,270,271,272,273,274,275,276]),import.meta.url),icon:()=>V(()=>import("./calcite-icon-uORPeLj9.js"),__vite__mapDeps([278,275,273]),import.meta.url)})}destroy(){var t;(t=this._selectionToolbar)==null||t.destroy(),this._viewModelHandlesGroup=Je(this._viewModelHandlesGroup)}get activeTool(){var e;const t=(e=this._selectionToolbar)==null?void 0:e.activeToolInfo;if(t)switch(t.toolName){case"lasso":return"lasso-selection";case"rectangle":return"rectangle-selection";case"default":return"custom-selection"}return this.viewModel.activeTool}get createGraphic(){return this.viewModel.createGraphic}get defaultCreateOptions(){return this.viewModel.defaultCreateOptions}set defaultCreateOptions(t){this.viewModel.defaultCreateOptions=t}get defaultUpdateOptions(){return this.viewModel.defaultUpdateOptions}set defaultUpdateOptions(t){this.viewModel.defaultUpdateOptions=t}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get labelOptions(){return this.viewModel.labelOptions}set labelOptions(t){this.viewModel.labelOptions=t}get layer(){return this.viewModel.layer}set layer(t){this.viewModel.layer=t}get snappingOptions(){return this.viewModel.snappingOptions}set snappingOptions(t){this.viewModel.snappingOptions=t}get state(){var t;return(t=this._selectionToolbar)!=null&&t.activeToolInfo?"active":this.viewModel.state}get tooltipOptions(){return this.viewModel.tooltipOptions}set tooltipOptions(t){this.viewModel.tooltipOptions=t}get updateGraphics(){return this.viewModel.updateGraphics}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}set viewModel(t){const e=this._get("viewModel");t!==e&&(e&&Oe(e),this._set("viewModel",t))}get _effectiveAvailableCreateTools(){const{availableCreateTools:t,visibleElements:e}=this;return t==null?void 0:t.filter(i=>{var n;return!!((n=e.createTools)!=null&&n[i])})}create(t,e){this._activeCreateOptions=e||null,this.viewModel.create(t,e)}update(t,e){return this.viewModel.update(t,e)}complete(){this.viewModel.complete()}cancel(){var t;(t=this._selectionToolbar)==null||t.cancel(),this.viewModel.cancel()}undo(){var t;this.viewModel.undo(),(t=this.view)==null||t.focus()}redo(){var t;this.viewModel.redo(),(t=this.view)==null||t.focus()}delete(){this.viewModel.delete()}duplicate(){return this.viewModel.duplicate()}render(){const{label:t,layout:e,viewModel:{state:i}}=this;return A("div",{"aria-label":t,class:this.classes(Jt.base,pe.widget,{[pe.disabled]:i==="disabled",[Jt.verticalLayout]:e==="vertical"})},A("div",{class:Jt.panel,role:"toolbar"},this._renderTopPanelContents()),A("div",{class:this.classes(Jt.panel,Jt.infoPanel)},this._renderInfoPanelContents()))}_renderTopPanelContents(){var r;const t=this.classes(Jt.section,Jt.toolSection),{_effectiveAvailableCreateTools:e,visibleElements:i,viewModel:n}=this;return[n.updateOnGraphicClick||(r=this._selectionToolbar)!=null&&r.visibleToolCount?A("div",{class:t,key:"selection-button-container",role:"menu"},this._renderDefaultSelectionButton(),this._renderSelectionToolbar()):null,e!=null&&e.length?A("div",{class:t,role:"menu"},this._renderDrawButtons()):null,i.undoRedoMenu?A("div",{class:t,key:"undo-redo-menu-button-container",role:"menu"},this._renderUndoRedoMenuButtons()):null,i.settingsMenu?A("div",{class:Jt.section,key:"settings-menu-button-container"},this._renderSettingsMenuButton()):null]}_renderInfoPanelContents(){return this._menuOpen?this._renderSettingsMenu():this.updateGraphics.length?[A("div",{class:this.classes(Jt.section,Jt.infoSection,Jt.infoCountSection),key:"feature-count-container"},this._renderFeatureCount()),A("div",{class:this.classes(Jt.section,Jt.infoSection),key:"delete-button-container"},this._renderDuplicateButton(),this._renderDeleteButton())]:void 0}_renderSettingsMenu(){const{labelOptions:t,messagesCommon:e,snappingOptions:i,tooltipOptions:n,view:r,visibleElements:s}=this;return[A("div",{class:Jt.menuContainer,"data-testid":"menu",key:"settings-menu-container",role:"menu"},A("header",{class:Jt.menuHeader,key:"settings-menu-header"},A("span",{class:Jt.menuTitle},e.settings)),s.sketchTooltipControls?A(U0e,{labelOptions:t,tooltipOptions:n,viewType:r==null?void 0:r.type,visibleElements:s.sketchTooltipControlsElements}):void 0,s.snappingControls&&r&&i?A(ave,{snappingOptions:i,view:r,visibleElements:s.snappingControlsElements}):void 0)]}_renderFeatureCount(){const{layout:t,messages:e,updateGraphics:{length:i}}=this,n=bE(e.selectedCount,{count:i});return A("div",{"aria-label":n,class:Jt.featureCountBadge},A("span",{class:Jt.featureCountNumber},t==="vertical"?i:n))}_renderDuplicateButton(){if(!this.visibleElements.duplicateButton)return;const t=this.messages,e=this.updateGraphics.length>1?t.duplicateFeatures:t.duplicateFeature;return A("calcite-action",{bind:this,label:e,onclick:this._onDuplicateSelect,scale:"s",text:e,title:e},A("calcite-icon",{icon:"copy",scale:"s"}))}_renderDeleteButton(){const t=this.messages,e=this.updateGraphics.length>1?t.deleteFeatures:t.deleteFeature;return A("calcite-action",{bind:this,label:e,onclick:this.delete,scale:"s",text:e,title:e},A("calcite-icon",{icon:"trash",scale:"s"}))}_renderDefaultSelectionButton(){if(!this.viewModel.updateOnGraphicClick)return;const t=this.messages.selectFeature;return A("calcite-action",{active:this.state==="ready",bind:this,label:t,onclick:this._activateDefaultSelectTool,scale:"s",text:t,title:t},A("calcite-icon",{icon:"cursor",scale:"s"}))}_renderSelectionToolbar(){var t;if(((t=this.view)==null?void 0:t.type)==="2d"&&this._selectionToolbar)return this._selectionToolbar.render()}_renderDrawButtons(){var t;return(t=this._effectiveAvailableCreateTools)==null?void 0:t.map(e=>{switch(e){case"point":return this._renderPointButton();case"polyline":return this._renderPolylineButton();case"polygon":return this._renderPolygonButton();case"rectangle":return this._renderRectangleButton();case"circle":return this._renderCircleButton();default:return}})}_renderPointButton(){const t="point",e=this.messages.drawPoint;return A("calcite-action",{active:this.activeTool===t,bind:this,label:e,onclick:()=>this._activateCreateTool(t),scale:"s",text:e,title:e},A("calcite-icon",{icon:"pin",scale:"s"}))}_renderPolygonButton(){const t="polygon",e=this.messages.drawPolygon;return A("calcite-action",{active:this.activeTool===t,bind:this,label:e,onclick:()=>this._activateCreateTool(t),scale:"s",text:e,title:e},A("calcite-icon",{icon:"polygon",scale:"s"}))}_renderPolylineButton(){const t="polyline",e=this.messages.drawPolyline;return A("calcite-action",{active:this.activeTool===t,bind:this,label:e,onclick:()=>this._activateCreateTool(t),scale:"s",text:e,title:e},A("calcite-icon",{icon:"line",scale:"s"}))}_renderCircleButton(){const t="circle",e=this.messages.drawCircle;return A("calcite-action",{active:this.activeTool===t,bind:this,label:e,onclick:()=>this._activateCreateTool(t),scale:"s",text:e,title:e},A("calcite-icon",{icon:"circle",scale:"s"}))}_renderRectangleButton(){const t="rectangle",e=this.messages.drawRectangle;return A("calcite-action",{active:this.activeTool===t,bind:this,label:e,onclick:()=>this._activateCreateTool(t),scale:"s",text:e,title:e},A("calcite-icon",{icon:"rectangle",scale:"s"}))}_renderUndoRedoMenuButtons(){return[this._renderUndoButton(),this._renderRedoButton()]}_renderUndoButton(){const t=this.messages.undo;return A("calcite-action",{bind:this,disabled:!this.viewModel.canUndo(),label:t,onclick:this.undo,scale:"s",text:t,title:t},A("calcite-icon",{icon:O$(this.container)?"redo":"undo",scale:"s"}))}_renderRedoButton(){const t=this.messages.redo;return A("calcite-action",{bind:this,disabled:!this.viewModel.canRedo(),label:t,onclick:this.redo,scale:"s",text:t,title:t},A("calcite-icon",{icon:O$(this.container)?"undo":"redo",scale:"s"}))}_renderSettingsMenuButton(){const t=this.messagesCommon.settings;return A("calcite-action",{active:this._menuOpen,bind:this,"data-testid":"settings-menu-action",label:t,onclick:this._toggleMenu,scale:"s",text:t,title:t},A("calcite-icon",{icon:"gear",scale:"s"}))}_activateCreateTool(t){var e;this.activeTool!==t?((e=this._selectionToolbar)==null||e.cancel(),this.create(t)):this.cancel()}_onCreateOperation(t){if(t.state!=="complete")return;const{creationMode:e}=this,{type:i}=t;if(i==="create"){const{tool:n,graphic:r}=t,s=this._activeCreateOptions;this._activeCreateOptions=null,e==="continuous"?this.create(n,s):e==="update"&&this.update([r])}}_toggleMenu(){this._menuOpen=!this._menuOpen,this.scheduleRender()}_onDuplicateSelect(){const t=this.duplicate(),e=this.viewModel.activeTool;e!=="transform"&&e!=="reshape"||this.update(t,{tool:e})}_onSelectionOperationComplete(t){const{viewModel:{defaultUpdateOptions:e}}=this,{selection:i}=t;if(!t.aborted&&i.length){const n=e.tool,r=i.length>1&&n==="reshape"?"transform":n;this.update(i,{...e,tool:r})}this.notifyChange("state")}_activateDefaultSelectTool(){var t;this.cancel(),(t=this.view)==null||t.focus()}};c([d()],yt.prototype,"activeTool",null),c([d({cast:t=>{if(!(t!=null&&t.length))return null;const e=new Set(["point","polyline","polygon","rectangle","circle"]);return t.filter(i=>e.has(i))}})],yt.prototype,"availableCreateTools",void 0),c([d({readOnly:!0})],yt.prototype,"createGraphic",null),c([d()],yt.prototype,"creationMode",void 0),c([d()],yt.prototype,"defaultCreateOptions",null),c([d()],yt.prototype,"defaultUpdateOptions",null),c([d()],yt.prototype,"iconClass",void 0),c([d()],yt.prototype,"icon",void 0),c([d()],yt.prototype,"label",null),c([d()],yt.prototype,"labelOptions",null),c([d()],yt.prototype,"layer",null),c([d({type:["horizontal","vertical"]})],yt.prototype,"layout",void 0),c([d(),nn("esri/widgets/Sketch/t9n/Sketch")],yt.prototype,"messages",void 0),c([d(),nn("esri/t9n/common")],yt.prototype,"messagesCommon",void 0),c([d()],yt.prototype,"snappingOptions",null),c([d()],yt.prototype,"state",null),c([d()],yt.prototype,"tooltipOptions",null),c([d({readOnly:!0})],yt.prototype,"updateGraphics",null),c([d()],yt.prototype,"view",null),c([d(),Tz(["create","update","undo","redo"])],yt.prototype,"viewModel",null),c([d({type:T9,nonNullable:!0})],yt.prototype,"visibleElements",void 0),c([d()],yt.prototype,"_effectiveAvailableCreateTools",null),yt=c([S("esri.widgets.Sketch")],yt);const lve=yt;function cve(t){let e;return{c(){e=fe("h1"),e.textContent="Map getting ready..."},m(i,n){Sc(i,e,n)},d(i){i&&Wa(e)}}}function uve(t){let e,i,n;return{c(){e=fe("div")},m(r,s){Sc(r,e,s),i||(n=LG(t[1].call(null,e)),i=!0)},d(r){r&&Wa(e),i=!1,n()}}}function dve(t){let e;function i(s,o){return s[0]&&s[0].map?uve:cve}let n=i(t),r=n(t);return{c(){r.c(),e=PG()},m(s,o){r.m(s,o),Sc(s,e,o)},p(s,[o]){n!==(n=i(s))&&(r.d(1),r=n(s),r&&(r.c(),r.m(e.parentNode,e)))},i:Dt,o:Dt,d(s){s&&Wa(e),r.d(s)}}}function hve(t,e,i){let n;return Nu(t,Ua,s=>i(0,n=s)),[n,s=>{const o=new Wk({id:"sketchLayer"});n.map.add(o),new lve({view:n,layer:o,container:s,creationMode:"update",availableCreateTools:["rectangle"]})}]}class pve extends Ep{constructor(e){super(),Tp(this,e,hve,dve,bd,{})}}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */const ES={icon:"icon",iconContainer:"icon-container",select:"select"},fve=`:host{--calcite-icon-size:1rem;--calcite-spacing-eighth:0.125rem;--calcite-spacing-quarter:0.25rem;--calcite-spacing-half:0.5rem;--calcite-spacing-three-quarters:0.75rem;--calcite-spacing:1rem;--calcite-spacing-plus-quarter:1.25rem;--calcite-spacing-plus-half:1.5rem;--calcite-spacing-double:2rem;--calcite-menu-min-width:10rem;--calcite-header-min-height:3rem;--calcite-footer-min-height:3rem}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{position:relative;display:flex;align-items:stretch;inline-size:var(--select-width)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}:host([scale=s]){block-size:1.5rem;--calcite-select-font-size:var(--calcite-font-size--2);--calcite-select-spacing-inline:0.5rem 2rem}:host([scale=s]) .icon-container{padding-inline:0.5rem}:host([scale=m]){block-size:2rem;--calcite-select-font-size:var(--calcite-font-size--1);--calcite-select-spacing-inline:0.75rem 2.5rem}:host([scale=m]) .icon-container{padding-inline:0.75rem}:host([scale=l]){block-size:44px;--calcite-select-font-size:var(--calcite-font-size-0);--calcite-select-spacing-inline:1rem 3rem}:host([scale=l]) .icon-container{padding-inline:1rem}:host([width=auto]){inline-size:auto}:host([width=half]){inline-size:50%}:host([width=full]){inline-size:100%}.select{margin:0px;box-sizing:border-box;inline-size:100%;cursor:pointer;appearance:none;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;border-radius:0px;border-width:1px;border-style:solid;border-color:var(--calcite-color-border-input);background-color:var(--calcite-color-foreground-1);font-family:inherit;color:var(--calcite-color-text-2);outline-color:transparent;font-size:var(--calcite-select-font-size);padding-inline:var(--calcite-select-spacing-inline);border-inline-end-width:0px}.select:focus{outline:2px solid var(--calcite-color-brand);outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}.select:hover{background-color:var(--calcite-color-foreground-2)}select:disabled{border-color:var(--calcite-color-border-input);--tw-bg-opacity:1}.icon-container{pointer-events:none;position:absolute;inset-block:0px;display:flex;align-items:center;border-width:0px;border-style:solid;border-color:var(--calcite-color-border-input);background-color:transparent;color:var(--calcite-color-text-2);inset-inline-end:0px;border-inline-width:0px 1px}:host([status=invalid]) select,:host([status=invalid]) .icon-container{border-color:var(--calcite-color-status-danger)}:host([status=invalid]) select:focus,:host([status=invalid]) .icon-container:focus{outline:2px solid var(--calcite-color-status-danger);outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}.select:focus~.icon-container{border-color:transparent}::slotted(input[slot=hidden-form-input]){margin:0 !important;opacity:0 !important;outline:none !important;padding:0 !important;position:absolute !important;inset:0 !important;transform:none !important;-webkit-appearance:none !important;z-index:-1 !important}:host([hidden]){display:none}[hidden]{display:none}`;function $0(t){return t.tagName==="CALCITE-OPTION"}function mve(t){return t.tagName==="CALCITE-OPTION-GROUP"}const gve=Ct(class extends It{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteSelectChange=$e(this,"calciteSelectChange",6),this.componentToNativeEl=new Map,this.mutationObserver=ii("mutation",()=>this.populateInternalSelect()),this.handleInternalSelectChange=()=>{const e=this.selectEl.selectedOptions[0];this.selectFromNativeOption(e),requestAnimationFrame(()=>this.emitChangeEvent())},this.populateInternalSelect=()=>{const e=Array.from(this.el.children).filter(i=>i.tagName==="CALCITE-OPTION"||i.tagName==="CALCITE-OPTION-GROUP");this.clearInternalSelect(),e.forEach(i=>{var n;return(n=this.selectEl)==null?void 0:n.append(this.toNativeElement(i))})},this.storeSelectRef=e=>{this.selectEl=e,this.populateInternalSelect();const i=this.selectEl.selectedOptions[0];this.selectFromNativeOption(i)},this.emitChangeEvent=()=>{this.calciteSelectChange.emit()},this.disabled=!1,this.form=void 0,this.label=void 0,this.name=void 0,this.required=!1,this.scale="m",this.status="idle",this.value=null,this.selectedOption=void 0,this.width="auto"}valueHandler(e){this.el.querySelectorAll("calcite-option").forEach(n=>n.selected=n.value===e)}selectedOptionHandler(e){this.value=e==null?void 0:e.value}connectedCallback(){var i;const{el:e}=this;(i=this.mutationObserver)==null||i.observe(e,{subtree:!0,childList:!0}),Lc(this),Gp(this),Ok(this)}disconnectedCallback(){var e;(e=this.mutationObserver)==null||e.disconnect(),Pc(this),Sw(this),Ak(this)}componentWillLoad(){zo(this)}componentDidLoad(){var e;jo(this),Rhe(this,((e=this.selectedOption)==null?void 0:e.value)??"")}componentDidRender(){Ac(this)}async setFocus(){await Go(this),ww(this.selectEl)}handleOptionOrGroupChange(e){e.stopPropagation();const i=e.target,n=this.componentToNativeEl.get(i);n&&(this.updateNativeElement(i,n),$0(i)&&i.selected&&(this.deselectAllExcept(i),this.selectedOption=i))}onLabelClick(){this.setFocus()}updateNativeElement(e,i){if(i.disabled=e.disabled,i.label=e.label,$0(e)){const n=i;n.selected=e.selected,n.value=e.value,n.innerText=e.label}}clearInternalSelect(){this.componentToNativeEl.forEach(e=>e.remove()),this.componentToNativeEl.clear()}selectFromNativeOption(e){if(!e)return;let i;this.componentToNativeEl.forEach((n,r)=>{$0(r)&&n===e&&(r.selected=!0,i=r,this.deselectAllExcept(r))}),i&&(this.selectedOption=i)}toNativeElement(e){if($0(e)){const i=document.createElement("option");return this.updateNativeElement(e,i),this.componentToNativeEl.set(e,i),i}if(mve(e)){const i=document.createElement("optgroup");return this.updateNativeElement(e,i),Array.from(e.children).forEach(n=>{const r=this.toNativeElement(n);i.append(r),this.componentToNativeEl.set(e,r)}),this.componentToNativeEl.set(e,i),i}throw new Error("unsupported element child provided")}deselectAllExcept(e){this.el.querySelectorAll("calcite-option").forEach(i=>{i!==e&&(i.selected=!1)})}renderChevron(){return k("div",{class:ES.iconContainer},k("calcite-icon",{class:ES.icon,icon:"chevron-down",scale:pi(this.scale)}))}render(){return k(Yg,null,k("select",{"aria-label":fg(this),class:ES.select,disabled:this.disabled,onChange:this.handleInternalSelectChange,ref:this.storeSelectRef},k("slot",null)),this.renderChevron(),k(Lk,{component:this}))}get el(){return this}static get watchers(){return{value:["valueHandler"],selectedOption:["selectedOptionHandler"]}}static get style(){return fve}},[1,"calcite-select",{disabled:[516],form:[513],label:[1],name:[513],required:[516],scale:[513],status:[513],value:[1025],selectedOption:[1040],width:[513],setFocus:[64]},[[0,"calciteInternalOptionChange","handleOptionOrGroupChange"],[0,"calciteInternalOptionGroupChange","handleOptionOrGroupChange"]],{value:["valueHandler"],selectedOption:["selectedOptionHandler"]}]);function yve(){if(typeof customElements>"u")return;["calcite-select","calcite-icon"].forEach(e=>{switch(e){case"calcite-select":customElements.get(e)||customElements.define(e,gve);break;case"calcite-icon":customElements.get(e)||js();break}})}yve();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */const vve=":host{display:block}:host([hidden]){display:none}[hidden]{display:none}",bve=Ct(class extends It{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteInternalOptionChange=$e(this,"calciteInternalOptionChange",6),this.mutationObserver=ii("mutation",()=>{this.ensureTextContentDependentProps(),this.calciteInternalOptionChange.emit()}),this.disabled=!1,this.label=void 0,this.selected=void 0,this.value=void 0}handlePropChange(e,i,n){(n==="label"||n==="value")&&this.ensureTextContentDependentProps(),this.calciteInternalOptionChange.emit()}ensureTextContentDependentProps(){const{el:{textContent:e},internallySetLabel:i,internallySetValue:n,label:r,value:s}=this;(!r||r===i)&&(this.label=e,this.internallySetLabel=e),(s==null||s===n)&&(this.value=e,this.internallySetValue=e)}connectedCallback(){var e;this.ensureTextContentDependentProps(),(e=this.mutationObserver)==null||e.observe(this.el,{attributeFilter:["label","value"],characterData:!0,childList:!0,subtree:!0})}disconnectedCallback(){var e;(e=this.mutationObserver)==null||e.disconnect()}render(){return k("slot",null,this.label)}get el(){return this}static get watchers(){return{disabled:["handlePropChange"],label:["handlePropChange"],selected:["handlePropChange"],value:["handlePropChange"]}}static get style(){return vve}},[1,"calcite-option",{disabled:[516],label:[1025],selected:[516],value:[1032]},void 0,{disabled:["handlePropChange"],label:["handlePropChange"],selected:["handlePropChange"],value:["handlePropChange"]}]);function wve(){if(typeof customElements>"u")return;["calcite-option"].forEach(e=>{switch(e){case"calcite-option":customElements.get(e)||customElements.define(e,bve);break}})}wve();function _ve(t){let e,i,n,r,s,o,a,l,u;return o=new pve({}),{c(){e=fe("div"),i=fe("calcite-label"),n=bo(`Map size
    `),r=fe("calcite-select"),r.innerHTML='<calcite-option value="full-size">Full size</calcite-option> <calcite-option value="size-1">900px x 400px</calcite-option>',s=ci(),_f(o.$$.fragment),Sn(e,"class","cntrl-container")},m(p,f){Sc(p,e,f),ne(e,i),ne(i,n),ne(i,r),ne(e,s),Mh(o,e,null),a=!0,l||(u=Gl(r,"calciteSelectChange",t[0]),l=!0)},p:Dt,i(p){a||(kh(o.$$.fragment,p),a=!0)},o(p){wf(o.$$.fragment,p),a=!1},d(p){p&&Wa(e),Ch(o),l=!1,u()}}}function Sve(t){return[i=>{lR.set(i.target.value)}]}class $ve extends Ep{constructor(e){super(),Tp(this,e,Sve,_ve,bd,{})}}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */const xve=":host{position:relative;display:block;inline-size:100%}.track,.bar{position:absolute;inset-block-start:0px;block-size:2px}.track{z-index:var(--calcite-z-index);inline-size:100%;overflow:hidden;background:var(--calcite-color-border-3)}.bar{z-index:var(--calcite-z-index);background-color:var(--calcite-color-brand)}@media (forced-colors: active){.track{background-color:highlightText}.bar{background-color:linkText}}.indeterminate{inline-size:20%;animation:looping-progress-bar-ani calc(var(--calcite-internal-animation-timing-medium) / var(--calcite-internal-duration-factor) * 11 / var(--calcite-internal-duration-factor)) linear infinite}.indeterminate.calcite--rtl{animation-name:looping-progress-bar-ani-rtl}.reversed{animation-direction:reverse}.text{padding-inline:0px;padding-block:1rem 0px;text-align:center;font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-2)}@keyframes looping-progress-bar-ani{0%{transform:translate3d(-100%, 0, 0)}50%{inline-size:40%}100%{transform:translate3d(600%, 0, 0)}}@keyframes looping-progress-bar-ani-rtl{0%{transform:translate3d(100%, 0, 0)}50%{inline-size:40%}100%{transform:translate3d(-600%, 0, 0)}}:host([hidden]){display:none}[hidden]{display:none}",Tve=Ct(class extends It{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.type="determinate",this.value=0,this.label=void 0,this.text=void 0,this.reversed=!1}render(){const i=this.type==="determinate"?{width:`${this.value*100}%`}:{},n=Es(this.el);return k("div",{"aria-label":this.label||this.text,"aria-valuemax":1,"aria-valuemin":0,"aria-valuenow":this.value,role:"progressbar"},k("div",{class:"track"},k("div",{class:{bar:!0,indeterminate:this.type==="indeterminate",[Wl.rtl]:n==="rtl",reversed:this.reversed},style:i})),this.text?k("div",{class:"text"},this.text):null)}get el(){return this}static get style(){return xve}},[1,"calcite-progress",{type:[513],value:[2],label:[1],text:[1],reversed:[516]}]);function F9(){if(typeof customElements>"u")return;["calcite-progress"].forEach(e=>{switch(e){case"calcite-progress":customElements.get(e)||customElements.define(e,Tve);break}})}F9();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */const Ci={loader:"loader",clearButton:"clear-button",editingEnabled:"editing-enabled",inlineChild:"inline-child",inputIcon:"icon",prefix:"prefix",suffix:"suffix",numberButtonWrapper:"number-button-wrapper",buttonItemHorizontal:"number-button-item--horizontal",wrapper:"element-wrapper",inputWrapper:"wrapper",actionWrapper:"action-wrapper",resizeIconWrapper:"resize-icon-wrapper",numberButtonItem:"number-button-item"},VA={tel:"phone",password:"lock",email:"email-address",date:"calendar",time:"clock",search:"search"},Eve={action:"action"},kve=`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:block}:host([scale=s]) input,:host([scale=s]) .prefix,:host([scale=s]) .suffix{block-size:1.5rem;padding-inline:0.5rem;font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s]) textarea{block-size:1.5rem;min-block-size:1.5rem}:host([scale=s]) .number-button-wrapper,:host([scale=s]) .action-wrapper calcite-button,:host([scale=s]) .action-wrapper calcite-button button{block-size:1.5rem}:host([scale=s]) input[type=file]{block-size:1.5rem}:host([scale=s]) .clear-button{min-block-size:1.5rem;min-inline-size:1.5rem}:host([scale=s]) textarea{block-size:auto;padding-block:0.25rem;padding-inline:0.5rem;font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=m]) input,:host([scale=m]) .prefix,:host([scale=m]) .suffix{block-size:2rem;padding-inline:0.75rem;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) textarea{min-block-size:2rem}:host([scale=m]) .number-button-wrapper,:host([scale=m]) .action-wrapper calcite-button,:host([scale=m]) .action-wrapper calcite-button button{block-size:2rem}:host([scale=m]) input[type=file]{block-size:2rem}:host([scale=m]) .clear-button{min-block-size:2rem;min-inline-size:2rem}:host([scale=m]) textarea{block-size:auto;padding-block:0.5rem;padding-inline:0.75rem;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=l]) input,:host([scale=l]) .prefix,:host([scale=l]) .suffix{block-size:2.75rem;padding-inline:1rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) textarea{min-block-size:2.75rem}:host([scale=l]) .number-button-wrapper,:host([scale=l]) .action-wrapper calcite-button,:host([scale=l]) .action-wrapper calcite-button button{block-size:2.75rem}:host([scale=l]) input[type=file]{block-size:2.75rem}:host([scale=l]) .clear-button{min-block-size:2.75rem;min-inline-size:2.75rem}:host([scale=l]) textarea{block-size:auto;padding-block:0.75rem;padding-inline:1rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([disabled]) textarea{resize:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}textarea,input{transition:var(--calcite-animation-timing), block-size 0, outline-offset 0s;-webkit-appearance:none;position:relative;margin:0px;box-sizing:border-box;display:flex;max-block-size:100%;inline-size:100%;max-inline-size:100%;flex:1 1 0%;border-radius:0px;background-color:var(--calcite-color-foreground-1);font-family:inherit;font-weight:var(--calcite-font-weight-normal);color:var(--calcite-color-text-1)}input[type=search]::-webkit-search-decoration{-webkit-appearance:none}input,textarea{text-overflow:ellipsis;border-width:1px;border-style:solid;border-color:var(--calcite-color-border-input);color:var(--calcite-color-text-1)}input:placeholder-shown,textarea:placeholder-shown{text-overflow:ellipsis}input:focus,textarea:focus{border-color:var(--calcite-color-brand);color:var(--calcite-color-text-1)}input[readonly],textarea[readonly]{background-color:var(--calcite-color-background);font-weight:var(--calcite-font-weight-medium)}input[readonly]:focus,textarea[readonly]:focus{color:var(--calcite-color-text-1)}calcite-icon{color:var(--calcite-color-text-3)}textarea,input{outline-color:transparent}textarea:focus,input:focus{outline:2px solid var(--calcite-color-brand);outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}:host([status=invalid]) input,:host([status=invalid]) textarea{border-color:var(--calcite-color-status-danger)}:host([status=invalid]) input:focus,:host([status=invalid]) textarea:focus{outline:2px solid var(--calcite-color-status-danger);outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}:host([scale=s]) .icon{inset-inline-start:0.5rem}:host([scale=m]) .icon{inset-inline-start:0.75rem}:host([scale=l]) .icon{inset-inline-start:1rem}:host([icon][scale=s]) input{padding-inline-start:2rem}:host([icon][scale=m]) input{padding-inline-start:2.5rem}:host([icon][scale=l]) input{padding-inline-start:3.5rem}.element-wrapper{position:relative;order:3;display:inline-flex;flex:1 1 0%;align-items:center}.icon{pointer-events:none;position:absolute;display:block;transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}.icon,.resize-icon-wrapper{z-index:var(--calcite-z-index)}input[type=text]::-ms-clear,input[type=text]::-ms-reveal{display:none;block-size:0px;inline-size:0px}input[type=search]::-webkit-search-decoration,input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-results-button,input[type=search]::-webkit-search-results-decoration,input[type=date]::-webkit-clear-button,input[type=time]::-webkit-clear-button{display:none}.clear-button{pointer-events:initial;order:4;margin:0px;box-sizing:border-box;display:flex;min-block-size:100%;cursor:pointer;align-items:center;justify-content:center;align-self:stretch;border-width:1px;border-style:solid;border-color:var(--calcite-color-border-input);background-color:var(--calcite-color-foreground-1);outline-color:transparent;border-inline-start-width:0px}.clear-button:hover{background-color:var(--calcite-color-foreground-2);transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}.clear-button:hover calcite-icon{color:var(--calcite-color-text-1);transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}.clear-button:active{background-color:var(--calcite-color-foreground-3)}.clear-button:active calcite-icon{color:var(--calcite-color-text-1)}.clear-button:focus{outline:2px solid var(--calcite-color-brand);outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}.clear-button:disabled{opacity:var(--calcite-opacity-disabled)}.loader{inset-block-start:1px;inset-inline:1px;pointer-events:none;position:absolute;display:block}.action-wrapper{order:7;display:flex}.prefix,.suffix{box-sizing:border-box;display:flex;block-size:auto;min-block-size:100%;-webkit-user-select:none;user-select:none;align-content:center;align-items:center;overflow-wrap:break-word;border-width:1px;border-style:solid;border-color:var(--calcite-color-border-input);background-color:var(--calcite-color-background);font-weight:var(--calcite-font-weight-medium);line-height:1;color:var(--calcite-color-text-2)}.prefix{order:2;border-inline-end-width:0px}.suffix{order:5;border-inline-start-width:0px}:host([alignment=start]) textarea,:host([alignment=start]) input{text-align:start}:host([alignment=end]) textarea,:host([alignment=end]) input{text-align:end}input[type=number]{-moz-appearance:textfield}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{-webkit-appearance:none;-moz-appearance:textfield;margin:0px}.number-button-wrapper{pointer-events:none;order:6;box-sizing:border-box;display:flex;flex-direction:column;transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}:host([number-button-type=vertical]) .wrapper{flex-direction:row;display:flex}:host([number-button-type=vertical]) input,:host([number-button-type=vertical]) textarea{order:2}:host([number-button-type=horizontal]) .calcite--rtl .number-button-item[data-adjustment=down] calcite-icon{transform:rotate(-90deg)}:host([number-button-type=horizontal]) .calcite--rtl .number-button-item[data-adjustment=up] calcite-icon{transform:rotate(-90deg)}.number-button-item.number-button-item--horizontal[data-adjustment=down],.number-button-item.number-button-item--horizontal[data-adjustment=up]{order:1;max-block-size:100%;min-block-size:100%;align-self:stretch}.number-button-item.number-button-item--horizontal[data-adjustment=down] calcite-icon,.number-button-item.number-button-item--horizontal[data-adjustment=up] calcite-icon{transform:rotate(90deg)}.number-button-item.number-button-item--horizontal[data-adjustment=down]{border-width:1px;border-style:solid;border-color:var(--calcite-color-border-input);border-inline-end-width:0px}.number-button-item.number-button-item--horizontal[data-adjustment=down]:hover{background-color:var(--calcite-color-foreground-2)}.number-button-item.number-button-item--horizontal[data-adjustment=down]:hover calcite-icon{color:var(--calcite-color-text-1)}.number-button-item.number-button-item--horizontal[data-adjustment=up]{order:5}.number-button-item.number-button-item--horizontal[data-adjustment=up]:hover{background-color:var(--calcite-color-foreground-2)}.number-button-item.number-button-item--horizontal[data-adjustment=up]:hover calcite-icon{color:var(--calcite-color-text-1)}:host([number-button-type=vertical]) .number-button-item[data-adjustment=down]:hover{background-color:var(--calcite-color-foreground-2)}:host([number-button-type=vertical]) .number-button-item[data-adjustment=down]:hover calcite-icon{color:var(--calcite-color-text-1)}:host([number-button-type=vertical]) .number-button-item[data-adjustment=up]:hover{background-color:var(--calcite-color-foreground-2)}:host([number-button-type=vertical]) .number-button-item[data-adjustment=up]:hover calcite-icon{color:var(--calcite-color-text-1)}:host([number-button-type=vertical]) .number-button-item[data-adjustment=down]{border-block-start-width:0px}.number-button-item{max-block-size:50%;min-block-size:50%;pointer-events:initial;margin:0px;box-sizing:border-box;display:flex;cursor:pointer;align-items:center;align-self:center;border-width:1px;border-style:solid;border-color:var(--calcite-color-border-input);background-color:var(--calcite-color-foreground-1);padding-block:0px;padding-inline:0.5rem;transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;border-inline-start-width:0px}.number-button-item calcite-icon{pointer-events:none;transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}.number-button-item:focus{background-color:var(--calcite-color-foreground-2)}.number-button-item:focus calcite-icon{color:var(--calcite-color-text-1)}.number-button-item:active{background-color:var(--calcite-color-foreground-3)}.number-button-item:disabled{pointer-events:none}.wrapper{position:relative;display:flex;flex-direction:row;align-items:center}:input::-webkit-calendar-picker-indicator{display:none}input[type=date]::-webkit-input-placeholder{visibility:hidden !important}textarea::-webkit-resizer{position:absolute;inset-block-end:0px;box-sizing:border-box;padding-block:0px;padding-inline:0.25rem;inset-inline-end:0}.resize-icon-wrapper{inset-block-end:2px;inset-inline-end:2px;pointer-events:none;position:absolute;block-size:0.75rem;inline-size:0.75rem;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-3)}.resize-icon-wrapper calcite-icon{inset-block-end:0.25rem;inset-inline-end:0.25rem;transform:rotate(-45deg)}.calcite--rtl .resize-icon-wrapper calcite-icon{transform:rotate(45deg)}:host([type=color]) input{padding:0.25rem}:host([type=file]) input{cursor:pointer;border-width:1px;border-style:dashed;border-color:var(--calcite-color-border-input);background-color:var(--calcite-color-foreground-1);text-align:center}:host([type=file][scale=s]) input{padding-block:1px;padding-inline:0.5rem}:host([type=file][scale=m]) input{padding-block:0.25rem;padding-inline:0.75rem}:host([type=file][scale=l]) input{padding-block:0.5rem;padding-inline:1rem}:host(.no-bottom-border) input{border-block-end-width:0px}:host(.border-top-color-one) input{border-block-start-color:var(--calcite-color-border-1)}input.inline-child{background-color:transparent;transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}input.inline-child .editing-enabled{background-color:inherit}input.inline-child:not(.editing-enabled){display:flex;cursor:pointer;text-overflow:ellipsis;border-color:transparent;padding-inline-start:0}::slotted(input[slot=hidden-form-input]){margin:0 !important;opacity:0 !important;outline:none !important;padding:0 !important;position:absolute !important;inset:0 !important;transform:none !important;-webkit-appearance:none !important;z-index:-1 !important}:host([hidden]){display:none}[hidden]{display:none}`,Mve=Ct(class extends It{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteInternalInputFocus=$e(this,"calciteInternalInputFocus",6),this.calciteInternalInputBlur=$e(this,"calciteInternalInputBlur",6),this.calciteInputInput=$e(this,"calciteInputInput",7),this.calciteInputChange=$e(this,"calciteInputChange",6),this.childElType="input",this.previousValueOrigin="initial",this.mutationObserver=ii("mutation",()=>this.setDisabledAction()),this.userChangedValue=!1,this.keyDownHandler=e=>{this.readOnly||this.disabled||(this.isClearable&&e.key==="Escape"&&(this.clearInputValue(e),e.preventDefault()),e.key==="Enter"&&!e.defaultPrevented&&C8(this)&&e.preventDefault())},this.clearInputValue=e=>{this.setValue({committing:!0,nativeEvent:e,origin:"user",value:""})},this.emitChangeIfUserModified=()=>{this.previousValueOrigin==="user"&&this.value!==this.previousEmittedValue&&(this.calciteInputChange.emit(),this.setPreviousEmittedValue(this.value))},this.inputBlurHandler=()=>{window.clearInterval(this.nudgeNumberValueIntervalId),this.calciteInternalInputBlur.emit(),this.emitChangeIfUserModified()},this.clickHandler=e=>{if(this.disabled)return;const i=O2(this.el,"action");e.target!==i&&this.setFocus()},this.inputFocusHandler=()=>{this.calciteInternalInputFocus.emit()},this.inputChangeHandler=()=>{this.type==="file"&&(this.files=this.childEl.files)},this.inputInputHandler=e=>{this.disabled||this.readOnly||this.setValue({nativeEvent:e,origin:"user",value:e.target.value})},this.inputKeyDownHandler=e=>{this.disabled||this.readOnly||e.key==="Enter"&&this.emitChangeIfUserModified()},this.inputNumberInputHandler=e=>{if(this.disabled||this.readOnly)return;const i=e.target.value;Yi.numberFormatOptions={locale:this.effectiveLocale,numberingSystem:this.numberingSystem,useGrouping:this.groupSeparator};const n=Yi.delocalize(i);e.inputType==="insertFromPaste"?(vo(n)||e.preventDefault(),this.setValue({nativeEvent:e,origin:"user",value:Xhe(n)}),this.childNumberEl.value=this.localizedValue):this.setValue({nativeEvent:e,origin:"user",value:n})},this.inputNumberKeyDownHandler=e=>{if(this.type!=="number"||this.disabled||this.readOnly)return;if(e.key==="ArrowUp"){e.preventDefault(),this.nudgeNumberValue("up",e);return}if(e.key==="ArrowDown"){this.nudgeNumberValue("down",e);return}const i=[...Rk,"ArrowLeft","ArrowRight","Backspace","Delete","Enter","Escape","Tab"];if(e.altKey||e.ctrlKey||e.metaKey)return;const n=e.shiftKey&&e.key==="Tab";if(i.includes(e.key)||n){e.key==="Enter"&&this.emitChangeIfUserModified();return}Yi.numberFormatOptions={locale:this.effectiveLocale,numberingSystem:this.numberingSystem,useGrouping:this.groupSeparator},!(e.key===Yi.decimal&&(!this.value&&!this.childNumberEl.value||this.value&&this.childNumberEl.value.indexOf(Yi.decimal)===-1))&&(/[eE]/.test(e.key)&&(!this.value&&!this.childNumberEl.value||this.value&&!/[eE]/.test(this.childNumberEl.value))||e.key==="-"&&(!this.value&&!this.childNumberEl.value||this.value&&this.childNumberEl.value.split("-").length<=2)||e.preventDefault())},this.nudgeNumberValue=(e,i)=>{if(i instanceof KeyboardEvent&&i.repeat||this.type!=="number")return;const n=this.maxString?parseFloat(this.maxString):null,r=this.minString?parseFloat(this.minString):null,s=150;this.incrementOrDecrementNumberValue(e,n,r,i),this.nudgeNumberValueIntervalId&&window.clearInterval(this.nudgeNumberValueIntervalId);let o=!0;this.nudgeNumberValueIntervalId=window.setInterval(()=>{if(o){o=!1;return}this.incrementOrDecrementNumberValue(e,n,r,i)},s)},this.numberButtonPointerUpAndOutHandler=()=>{window.clearInterval(this.nudgeNumberValueIntervalId)},this.numberButtonPointerDownHandler=e=>{if(!yd(e))return;e.preventDefault();const i=e.target.dataset.adjustment;this.disabled||this.nudgeNumberValue(i,e)},this.hiddenInputChangeHandler=e=>{e.target.name===this.name&&this.setValue({value:e.target.value,origin:"direct"}),e.stopPropagation()},this.setChildElRef=e=>{this.childEl=e},this.setChildNumberElRef=e=>{this.childNumberEl=e},this.setInputValue=e=>{this.type==="text"&&!this.childEl||this.type==="number"&&!this.childNumberEl||(this[`child${this.type==="number"?"Number":""}El`].value=e)},this.setPreviousEmittedValue=e=>{this.previousEmittedValue=this.normalizeValue(e)},this.setPreviousValue=e=>{this.previousValue=this.normalizeValue(e)},this.setValue=({committing:e=!1,nativeEvent:i,origin:n,previousValue:r,value:s})=>{var o,a;if(this.setPreviousValue(r??this.value),this.previousValueOrigin=n,this.type==="number"){Yi.numberFormatOptions={locale:this.effectiveLocale,numberingSystem:this.numberingSystem,useGrouping:this.groupSeparator,signDisplay:"never"};const l=((o=this.previousValue)==null?void 0:o.length)>s.length||((a=this.value)==null?void 0:a.length)>s.length,u=s.charAt(s.length-1)===".",p=u&&l?s:npe(s),f=s&&!p?vo(this.previousValue)?this.previousValue:"":p;let m=Yi.localize(f);n!=="connected"&&!u&&(m=ape(m,f,Yi)),this.localizedValue=u&&l?`${m}${Yi.decimal}`:m,this.userChangedValue=n==="user"&&this.value!==f,this.value=["-","."].includes(f)?"":f}else this.userChangedValue=n==="user"&&this.value!==s,this.value=s;n==="direct"&&(this.setInputValue(s),this.previousEmittedValue=s),i&&(this.calciteInputInput.emit().defaultPrevented?(this.value=this.previousValue,this.localizedValue=this.type==="number"?Yi.localize(this.previousValue):this.previousValue):e&&this.emitChangeIfUserModified())},this.inputKeyUpHandler=()=>{window.clearInterval(this.nudgeNumberValueIntervalId)},this.alignment="start",this.autofocus=!1,this.clearable=!1,this.disabled=!1,this.form=void 0,this.groupSeparator=!1,this.hidden=!1,this.icon=void 0,this.iconFlipRtl=!1,this.label=void 0,this.loading=!1,this.numberingSystem=void 0,this.localeFormat=!1,this.max=void 0,this.min=void 0,this.maxLength=void 0,this.minLength=void 0,this.name=void 0,this.numberButtonType="vertical",this.placeholder=void 0,this.prefixText=void 0,this.readOnly=!1,this.required=!1,this.scale="m",this.status="idle",this.step=void 0,this.autocomplete=void 0,this.pattern=void 0,this.accept=void 0,this.multiple=!1,this.inputMode="text",this.enterKeyHint=void 0,this.suffixText=void 0,this.editingEnabled=!1,this.type="text",this.value="",this.files=void 0,this.messages=void 0,this.messageOverrides=void 0,this.defaultMessages=void 0,this.effectiveLocale="",this.localizedValue=void 0,this.slottedActionElDisabledInternally=!1}disabledWatcher(){this.setDisabledAction()}maxWatcher(){var e;this.maxString=((e=this.max)==null?void 0:e.toString())||null}minWatcher(){var e;this.minString=((e=this.min)==null?void 0:e.toString())||null}onMessagesChange(){}valueWatcher(e,i){this.userChangedValue||(this.setValue({origin:"direct",previousValue:i,value:e==null||e==""?"":this.type==="number"?vo(e)?e:this.previousValue||"":e}),this.warnAboutInvalidNumberValue(e)),this.userChangedValue=!1}updateRequestedIcon(){this.requestedIcon=A2(VA,this.icon,this.type)}get isClearable(){var e;return!this.isTextarea&&(this.clearable||this.type==="search")&&((e=this.value)==null?void 0:e.length)>0}get isTextarea(){return this.childElType==="textarea"}effectiveLocaleChange(){Ds(this,this.effectiveLocale)}connectedCallback(){var e;Lc(this),Ps(this),Fs(this),this.inlineEditableEl=this.el.closest("calcite-inline-editable"),this.inlineEditableEl&&(this.editingEnabled=this.inlineEditableEl.editingEnabled||!1),Gp(this),Ok(this),this.setPreviousEmittedValue(this.value),this.setPreviousValue(this.value),this.type==="number"&&(this.warnAboutInvalidNumberValue(this.value),this.setValue({origin:"connected",value:vo(this.value)?this.value:""})),(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0}),this.setDisabledAction(),this.el.addEventListener("calciteInternalHiddenInputChange",this.hiddenInputChangeHandler)}disconnectedCallback(){var e;Pc(this),Sw(this),Ak(this),Rs(this),zs(this),(e=this.mutationObserver)==null||e.disconnect(),this.el.removeEventListener("calciteInternalHiddenInputChange",this.hiddenInputChangeHandler)}async componentWillLoad(){var e,i;zo(this),this.childElType=this.type==="textarea"?"textarea":"input",this.maxString=(e=this.max)==null?void 0:e.toString(),this.minString=(i=this.min)==null?void 0:i.toString(),this.requestedIcon=A2(VA,this.icon,this.type),await Ns(this)}componentDidLoad(){jo(this)}componentShouldUpdate(e,i,n){return this.type==="number"&&n==="value"&&e&&!vo(e)?(this.setValue({origin:"reset",value:i}),!1):!0}componentDidRender(){Ac(this)}async setFocus(){var e,i;await Go(this),this.type==="number"?(e=this.childNumberEl)==null||e.focus():(i=this.childEl)==null||i.focus()}async selectText(){var e,i;this.type==="number"?(e=this.childNumberEl)==null||e.select():(i=this.childEl)==null||i.select()}onLabelClick(){this.setFocus()}incrementOrDecrementNumberValue(e,i,n,r){const{value:s}=this,o=e==="up"?1:-1,a=this.step==="any"?1:Math.abs(this.step||1),u=new ze(s!==""?s:"0").add(`${a*o}`),p=()=>typeof n=="number"&&!isNaN(n)&&u.subtract(`${n}`).isNegative,f=()=>typeof i=="number"&&!isNaN(i)&&!u.subtract(`${i}`).isNegative,m=p()?`${n}`:f()?`${i}`:u.toString();this.setValue({committing:!0,nativeEvent:r,origin:"user",value:m})}onFormReset(){this.setValue({origin:"reset",value:this.defaultValue})}syncHiddenFormInput(e){var n,r;const{type:i}=this;e.type=i,i==="number"?(e.min=((n=this.min)==null?void 0:n.toString(10))??"",e.max=((r=this.max)==null?void 0:r.toString(10))??""):i==="text"&&(this.minLength!=null&&(e.minLength=this.minLength),this.maxLength!=null&&(e.maxLength=this.maxLength))}setDisabledAction(){const e=O2(this.el,"action");e&&(this.disabled?(e.getAttribute("disabled")==null&&(this.slottedActionElDisabledInternally=!0),e.setAttribute("disabled","")):this.slottedActionElDisabledInternally&&(e.removeAttribute("disabled"),this.slottedActionElDisabledInternally=!1))}normalizeValue(e){return this.type==="number"?vo(e)?e:"":e}warnAboutInvalidNumberValue(e){this.type==="number"&&e&&!vo(e)&&console.warn(`The specified value "${e}" cannot be parsed, or is out of range.`)}render(){const e=Es(this.el),i=k("div",{class:Ci.loader},k("calcite-progress",{label:this.messages.loading,type:"indeterminate"})),n=k("button",{"aria-label":this.messages.clear,class:Ci.clearButton,disabled:this.disabled||this.readOnly,onClick:this.clearInputValue,tabIndex:-1,type:"button"},k("calcite-icon",{icon:"x",scale:pi(this.scale)})),r=k("calcite-icon",{class:Ci.inputIcon,flipRtl:this.iconFlipRtl,icon:this.requestedIcon,scale:pi(this.scale)}),s=this.numberButtonType==="horizontal",o=k("button",{"aria-hidden":"true",class:{[Ci.numberButtonItem]:!0,[Ci.buttonItemHorizontal]:s},"data-adjustment":"up",disabled:this.disabled||this.readOnly,onPointerDown:this.numberButtonPointerDownHandler,onPointerOut:this.numberButtonPointerUpAndOutHandler,onPointerUp:this.numberButtonPointerUpAndOutHandler,tabIndex:-1,type:"button"},k("calcite-icon",{icon:"chevron-up",scale:pi(this.scale)})),a=k("button",{"aria-hidden":"true",class:{[Ci.numberButtonItem]:!0,[Ci.buttonItemHorizontal]:s},"data-adjustment":"down",disabled:this.disabled||this.readOnly,onPointerDown:this.numberButtonPointerDownHandler,onPointerOut:this.numberButtonPointerUpAndOutHandler,onPointerUp:this.numberButtonPointerUpAndOutHandler,tabIndex:-1,type:"button"},k("calcite-icon",{icon:"chevron-down",scale:pi(this.scale)})),l=k("div",{class:Ci.numberButtonWrapper},o,a),u=k("div",{class:Ci.prefix},this.prefixText),p=k("div",{class:Ci.suffix},this.suffixText),f=this.type==="number"?k("input",{accept:this.accept,"aria-label":fg(this),autocomplete:this.autocomplete,autofocus:this.autofocus?!0:null,defaultValue:this.defaultValue,disabled:this.disabled?!0:null,enterKeyHint:this.enterKeyHint,inputMode:this.inputMode,key:"localized-input",maxLength:this.maxLength,minLength:this.minLength,multiple:this.multiple,name:void 0,onBlur:this.inputBlurHandler,onFocus:this.inputFocusHandler,onInput:this.inputNumberInputHandler,onKeyDown:this.inputNumberKeyDownHandler,onKeyUp:this.inputKeyUpHandler,pattern:this.pattern,placeholder:this.placeholder||"",readOnly:this.readOnly,type:"text",value:this.localizedValue,ref:this.setChildNumberElRef}):null,m=this.type!=="number"?[k(this.childElType,{accept:this.accept,"aria-label":fg(this),autocomplete:this.autocomplete,autofocus:this.autofocus?!0:null,class:{[Ci.editingEnabled]:this.editingEnabled,[Ci.inlineChild]:!!this.inlineEditableEl},defaultValue:this.defaultValue,disabled:this.disabled?!0:null,enterKeyHint:this.enterKeyHint,inputMode:this.inputMode,max:this.maxString,maxLength:this.maxLength,min:this.minString,minLength:this.minLength,multiple:this.multiple,name:this.name,onBlur:this.inputBlurHandler,onChange:this.inputChangeHandler,onFocus:this.inputFocusHandler,onInput:this.inputInputHandler,onKeyDown:this.inputKeyDownHandler,onKeyUp:this.inputKeyUpHandler,pattern:this.pattern,placeholder:this.placeholder||"",readOnly:this.readOnly,required:this.required?!0:null,step:this.step,tabIndex:this.disabled||this.inlineEditableEl&&!this.editingEnabled?-1:null,type:this.type,value:this.value,ref:this.setChildElRef}),this.isTextarea?k("div",{class:Ci.resizeIconWrapper},k("calcite-icon",{icon:"chevron-down",scale:pi(this.scale)})):null]:null;return k(Pn,{onClick:this.clickHandler,onKeyDown:this.keyDownHandler},k("div",{class:{[Ci.inputWrapper]:!0,[Wl.rtl]:e==="rtl"}},this.type==="number"&&this.numberButtonType==="horizontal"&&!this.readOnly?a:null,this.prefixText?u:null,k("div",{class:Ci.wrapper},f,m,this.isClearable?n:null,this.requestedIcon?r:null,this.loading?i:null),k("div",{class:Ci.actionWrapper},k("slot",{name:Eve.action})),this.type==="number"&&this.numberButtonType==="vertical"&&!this.readOnly?l:null,this.suffixText?p:null,this.type==="number"&&this.numberButtonType==="horizontal"&&!this.readOnly?o:null,k(Lk,{component:this})))}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{disabled:["disabledWatcher"],max:["maxWatcher"],min:["minWatcher"],messageOverrides:["onMessagesChange"],value:["valueWatcher"],icon:["updateRequestedIcon"],type:["updateRequestedIcon"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return kve}},[1,"calcite-input",{alignment:[513],autofocus:[516],clearable:[516],disabled:[516],form:[513],groupSeparator:[516,"group-separator"],hidden:[516],icon:[520],iconFlipRtl:[516,"icon-flip-rtl"],label:[1],loading:[516],numberingSystem:[513,"numbering-system"],localeFormat:[4,"locale-format"],max:[514],min:[514],maxLength:[514,"max-length"],minLength:[514,"min-length"],name:[513],numberButtonType:[513,"number-button-type"],placeholder:[1],prefixText:[1,"prefix-text"],readOnly:[516,"read-only"],required:[516],scale:[513],status:[513],step:[520],autocomplete:[1],pattern:[1],accept:[1],multiple:[4],inputMode:[1,"input-mode"],enterKeyHint:[1,"enter-key-hint"],suffixText:[1,"suffix-text"],editingEnabled:[1540,"editing-enabled"],type:[513],value:[1025],files:[16],messages:[1040],messageOverrides:[1040],defaultMessages:[32],effectiveLocale:[32],localizedValue:[32],slottedActionElDisabledInternally:[32],setFocus:[64],selectText:[64]},void 0,{disabled:["disabledWatcher"],max:["maxWatcher"],min:["minWatcher"],messageOverrides:["onMessagesChange"],value:["valueWatcher"],icon:["updateRequestedIcon"],type:["updateRequestedIcon"],effectiveLocale:["effectiveLocaleChange"]}]);function Cve(){if(typeof customElements>"u")return;["calcite-input","calcite-icon","calcite-progress"].forEach(e=>{switch(e){case"calcite-input":customElements.get(e)||customElements.define(e,Mve);break;case"calcite-icon":customElements.get(e)||js();break;case"calcite-progress":customElements.get(e)||F9();break}})}Cve();function Ive(t){let e,i,n,r,s,o,a;return{c(){e=fe("div"),i=fe("calcite-label"),n=bo(`Add a reference layer by item ID
    `),r=fe("calcite-input"),s=fe("calcite-button"),s.textContent="Add to map",Q(s,"id","addLayerBtn"),Q(s,"slot","action"),Q(r,"id","itemIdInput"),Q(r,"placeholder","Layer item ID (b5d71d19fd4b43fbb88abf07773ec0c7)"),Sn(e,"class","cntrl-container")},m(l,u){Sc(l,e,u),ne(e,i),ne(i,n),ne(i,r),ne(r,s),o||(a=Gl(s,"click",t[0]),o=!0)},p:Dt,i:Dt,o:Dt,d(l){l&&Wa(e),o=!1,a()}}}function Ove(t,e,i){let n;Nu(t,Ua,o=>i(1,n=o));const r=bL();return[()=>{const o=document.getElementById("itemIdInput").value;o&&LE.fromPortalItem({portalItem:{id:o}}).then(a=>{n.map.add(a),a.when(()=>{AG(Ua,n.extent=a.fullExtent,n)})},a=>{r("add-layer",`${a.message}`)})}]}class Ave extends Ep{constructor(e){super(),Tp(this,e,Ove,Ive,bd,{})}}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */const BA=new Set;let Qh;const z9={childList:!0};function fM(t){Qh||(Qh=ii("mutation",j9)),Qh.observe(t.el,z9)}function mM(t){BA.delete(t.el),j9(Qh.takeRecords()),Qh.disconnect();for(const[e]of BA.entries())Qh.observe(e,z9)}function j9(t){t.forEach(({target:e})=>{Jg(e)})}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */const qA=(t,e,i)=>Math.max(e,Math.min(t,i));/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */const qc={container:"container",content:"content",contentHeader:"content__header",contentBody:"content__body",contentFloat:"content--float",contentOverlay:"content--overlay",separator:"separator"},WA={actionBar:"action-bar",header:"header"},Lve=`:host{pointer-events:none;position:relative;display:flex;flex:0 1 auto;align-items:stretch;z-index:var(--calcite-shell-panel-z-index, var(--calcite-z-index));--calcite-shell-panel-detached-max-height:unset;--calcite-shell-panel-max-height:unset;--calcite-shell-panel-shadow-block-start-internal:0 4px 8px -1px rgba(0, 0, 0, 0.08),
    0 2px 4px -1px rgba(0, 0, 0, 0.04);--calcite-shell-panel-shadow-block-end-internal:0 -4px 8px -1px rgba(0, 0, 0, 0.08),
    0 -2px 4px -1px rgba(0, 0, 0, 0.04);--calcite-shell-panel-shadow-inline-start-internal:4px 0 8px -1px rgba(0, 0, 0, 0.08),
    2px 0 4px -1px rgba(0, 0, 0, 0.04);--calcite-shell-panel-shadow-inline-end-internal:-4px 0 8px -1px rgba(0, 0, 0, 0.08),
    -2px 0 4px -1px rgba(0, 0, 0, 0.04)}.calcite--rtl.content--overlay{--calcite-shell-panel-shadow-inline-start-internal:-4px 0 8px -1px rgba(0, 0, 0, 0.08),
    -2px 0 4px -1px rgba(0, 0, 0, 0.04);--calcite-shell-panel-shadow-inline-end-internal:4px 0 8px -1px rgba(0, 0, 0, 0.08),
    2px 0 4px -1px rgba(0, 0, 0, 0.04)}:host([layout=vertical]){z-index:var(--calcite-shell-panel-z-index, calc(var(--calcite-z-index) + 1))}:host([layout=vertical][display-mode=overlay]){z-index:var(--calcite-shell-panel-z-index, calc(var(--calcite-z-index-header) + 1))}:host([layout=vertical][width-scale=s]) .content{--calcite-shell-panel-width-internal:var(--calcite-shell-panel-width, 12vw);--calcite-shell-panel-max-width-internal:var(--calcite-shell-panel-max-width, 300px);--calcite-shell-panel-min-width-internal:var(--calcite-shell-panel-min-width, 150px)}:host([layout=vertical][width-scale=m]) .content{--calcite-shell-panel-width-internal:var(--calcite-shell-panel-width, 20vw);--calcite-shell-panel-max-width-internal:var(--calcite-shell-panel-max-width, 420px);--calcite-shell-panel-min-width-internal:var(--calcite-shell-panel-min-width, 240px)}:host([layout=vertical][width-scale=l]) .content{--calcite-shell-panel-width-internal:var(--calcite-shell-panel-width, 45vw);--calcite-shell-panel-max-width-internal:var(--calcite-shell-panel-max-width, 680px);--calcite-shell-panel-min-width-internal:var(--calcite-shell-panel-min-width, 340px)}:host([layout=horizontal][height-scale=s]) .content{--calcite-shell-panel-max-height-internal:var(
    --calcite-shell-panel-max-height,
    var(--calcite-shell-panel-detached-max-height, 20vh)
  )}:host([layout=horizontal]) .content{--calcite-shell-panel-min-height-internal:var(--calcite-shell-panel-min-height, 5vh);--calcite-shell-panel-max-height-internal:var(
    --calcite-shell-panel-max-height,
    var(--calcite-shell-panel-detached-max-height, 30vh)
  )}:host([layout=horizontal][height-scale=l]) .content{--calcite-shell-panel-max-height-internal:var(
    --calcite-shell-panel-max-height,
    var(--calcite-shell-panel-detached-max-height, 40vh)
  )}.container{pointer-events:none;box-sizing:border-box;display:flex;flex:1 1 auto;align-items:stretch;background-color:transparent;font-size:var(--calcite-font-size--1);color:var(--calcite-color-text-2)}.container *{box-sizing:border-box}:host([layout=horizontal]) .container{flex-direction:column}:host(:hover) .separator:not(:hover):not(:focus),:host(:focus-within) .separator:not(:hover):not(:focus){opacity:1;background-color:var(--calcite-color-border-3)}.separator{pointer-events:auto;position:absolute;display:flex;background-color:transparent;opacity:0;transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;cursor:col-resize;outline:none}.separator:hover{opacity:1;background-color:var(--calcite-color-border-2)}.separator:focus{background-color:var(--calcite-color-brand);opacity:1}:host([layout=vertical]) .separator{inset-block:0px;block-size:100%;inline-size:0.125rem;cursor:col-resize}:host([layout=horizontal][position=start]) .separator{inset-block-end:0px}:host([layout=horizontal][position=end]) .separator{inset-block-start:0px}:host([layout=horizontal]) .separator{inset-inline-end:0px;block-size:0.125rem;inline-size:100%;cursor:row-resize}:host([layout=vertical][position=start]) .separator{inset-inline-end:-2px}:host([layout=horizontal][position=start]) .separator{inset-block-end:-2px}:host([layout=vertical][position=end]) .separator{inset-inline-start:-2px}:host([layout=horizontal][position=end]) .separator{inset-block-start:-2px}::slotted(calcite-panel),::slotted(calcite-flow){block-size:100%;inline-size:100%;flex:1 1 auto;max-block-size:unset;max-inline-size:unset}::slotted(.calcite-match-height){display:flex;flex:1 1 auto;overflow:hidden}.content{pointer-events:auto;display:flex;flex-direction:column;flex-wrap:nowrap;align-items:stretch;align-self:stretch;background-color:var(--calcite-color-background);padding:0px;transition:max-block-size var(--calcite-animation-timing), max-inline-size var(--calcite-animation-timing)}:host([layout=vertical]) .content{inline-size:var(--calcite-shell-panel-width-internal);max-inline-size:var(--calcite-shell-panel-max-width-internal);min-inline-size:var(--calcite-shell-panel-min-width-internal)}:host([layout=horizontal]) .content{block-size:var(--calcite-shell-panel-height-internal);max-block-size:var(--calcite-shell-panel-max-height-internal);min-block-size:var(--calcite-shell-panel-min-height-internal)}.content__header{display:flex;flex:0 1 auto;flex-direction:column;flex-wrap:nowrap;align-items:stretch}.content__body{display:flex;flex:1 1 auto;flex-direction:column;overflow:hidden}.content--overlay{position:absolute;--tw-shadow:0 4px 8px -1px rgba(0, 0, 0, 0.08), 0 2px 4px -1px rgba(0, 0, 0, 0.04);--tw-shadow-colored:0 4px 8px -1px var(--tw-shadow-color), 0 2px 4px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}:host([layout=vertical]) .content--overlay{inset-block-start:0px;block-size:100%}:host([layout=horizontal]) .content--overlay{inset-inline-start:0px;inline-size:100%}:host([layout=vertical][position=start]) .content--overlay{inset-inline-start:100%;box-shadow:var(--calcite-shell-panel-shadow-inline-start-internal)}:host([layout=vertical][position=end]) .content--overlay{inset-inline-end:100%;box-shadow:var(--calcite-shell-panel-shadow-inline-end-internal)}:host([layout=horizontal][position=start]) .content--overlay{inset-block-start:100%;box-shadow:var(--calcite-shell-panel-shadow-block-start-internal)}:host([layout=horizontal][position=end]) .content--overlay{inset-block-end:100%;box-shadow:var(--calcite-shell-panel-shadow-block-end-internal)}.content--float{margin-inline:0.5rem;margin-block:0.5rem auto;block-size:auto;overflow:hidden;border-radius:0.25rem;--tw-shadow:0 4px 8px -1px rgba(0, 0, 0, 0.08), 0 2px 4px -1px rgba(0, 0, 0, 0.04);--tw-shadow-colored:0 4px 8px -1px var(--tw-shadow-color), 0 2px 4px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);max-block-size:var(--calcite-shell-panel-max-height-internal, calc(100% - 1rem))}.content--float ::slotted(calcite-panel),.content--float ::slotted(calcite-flow){max-block-size:unset}:host([layout=horizontal]) .content--float{margin-block:0.5rem}:host([position=start]) .content--float ::slotted(calcite-panel),:host([position=start]) .content--float ::slotted(calcite-flow),:host([position=end]) .content--float ::slotted(calcite-panel),:host([position=end]) .content--float ::slotted(calcite-flow){border-style:none}.content[hidden]{display:none}slot[name=action-bar]::slotted(calcite-action-bar),.content ::slotted(calcite-flow),.content ::slotted(calcite-panel:not([closed])){border-width:1px;border-style:solid;border-color:var(--calcite-color-border-3)}:host([position=start]) slot[name=action-bar]::slotted(calcite-action-bar),:host([position=start]) .content ::slotted(calcite-flow),:host([position=start]) .content ::slotted(calcite-panel){border-inline-start:none}:host([position=end]) slot[name=action-bar]::slotted(calcite-action-bar),:host([position=end]) .content ::slotted(calcite-flow),:host([position=end]) .content ::slotted(calcite-panel){border-inline-end:none}:host([layout=horizontal]) slot[name=action-bar]::slotted(calcite-action-bar){border-inline:0}:host([layout=horizontal][position=start]) .content ::slotted(calcite-flow),:host([layout=horizontal][position=start]) .content ::slotted(calcite-panel){border-inline:0;border-block-start:0}:host([layout=horizontal][position=end]) .content ::slotted(calcite-flow),:host([layout=horizontal][position=end]) .content ::slotted(calcite-panel){border-inline:0;border-block-end:0}:host([hidden]){display:none}[hidden]{display:none}`,Pve=Ct(class extends It{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.initialContentWidth=null,this.initialContentHeight=null,this.initialClientX=null,this.initialClientY=null,this.contentWidthMax=null,this.contentWidthMin=null,this.contentHeightMax=null,this.contentHeightMin=null,this.step=1,this.stepMultiplier=10,this.actionBars=[],this.storeContentEl=e=>{this.contentEl=e},this.getKeyAdjustedSize=e=>{const{key:i}=e,{el:n,step:r,stepMultiplier:s,layout:o,contentWidthMin:a,contentWidthMax:l,initialContentWidth:u,initialContentHeight:p,contentHeightMin:f,contentHeightMax:m,position:g}=this,y=r*s;["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Home","End","PageUp","PageDown"].indexOf(i)>-1&&e.preventDefault();const b=Es(n),_=["ArrowLeft","ArrowRight"],$=["ArrowDown","ArrowUp"],x=b==="rtl"&&_.includes(i)?-1:1;if(o==="horizontal"?g==="end"?i===$[1]||i===_[0]:i===$[0]||i===_[1]:i===$[1]||(g==="end"?i===_[0]:i===_[1])){const M=e.shiftKey?y:r;return o==="horizontal"?p+x*M:u+x*M}if(o==="horizontal"?g==="end"?i===$[0]||i===_[0]:i===$[1]||i===_[1]:i===$[0]||(g==="end"?i===_[1]:i===_[0])){const M=e.shiftKey?y:r;return o==="horizontal"?p-x*M:u-x*M}return i==="Home"&&o==="horizontal"&&typeof f=="number"?f:i==="Home"&&o==="vertical"&&typeof a=="number"?a:i==="End"&&o==="horizontal"&&typeof m=="number"?m:i==="End"&&o==="vertical"&&typeof l=="number"?l:i==="PageDown"?o==="horizontal"?p-y:u-y:i==="PageUp"?o==="horizontal"?p+y:u+y:null},this.initialKeydownWidth=e=>{this.setInitialContentWidth();const i=this.getKeyAdjustedSize(e);typeof i=="number"&&this.setContentWidth(i)},this.initialKeydownHeight=e=>{this.setInitialContentHeight();const i=this.getKeyAdjustedSize(e);typeof i=="number"&&this.setContentHeight(i)},this.separatorKeyDown=e=>{this.layout==="horizontal"?this.initialKeydownHeight(e):this.initialKeydownWidth(e)},this.separatorPointerMove=e=>{e.preventDefault();const{el:i,layout:n,initialContentWidth:r,initialContentHeight:s,position:o,initialClientX:a,initialClientY:l}=this,u=n==="horizontal"?e.clientY-l:e.clientX-a,p=n==="vertical"&&Es(i)==="rtl"?-1:1,f=o==="end"?-p*u:p*u;n==="horizontal"?this.setContentHeight(s+f):this.setContentWidth(r+f)},this.separatorPointerUp=e=>{yd(e)&&(e.preventDefault(),window.removeEventListener("pointerup",this.separatorPointerUp),window.removeEventListener("pointermove",this.separatorPointerMove))},this.setInitialContentHeight=()=>{var e;this.initialContentHeight=(e=this.contentEl)==null?void 0:e.getBoundingClientRect().height},this.setInitialContentWidth=()=>{var e;this.initialContentWidth=(e=this.contentEl)==null?void 0:e.getBoundingClientRect().width},this.separatorPointerDown=e=>{if(!yd(e))return;e.preventDefault();const{separatorEl:i}=this;i&&document.activeElement!==i&&i.focus(),this.layout==="horizontal"?(this.setInitialContentHeight(),this.initialClientY=e.clientY):(this.setInitialContentWidth(),this.initialClientX=e.clientX),window.addEventListener("pointerup",this.separatorPointerUp),window.addEventListener("pointermove",this.separatorPointerMove)},this.connectSeparator=e=>{this.disconnectSeparator(),this.separatorEl=e,e==null||e.addEventListener("pointerdown",this.separatorPointerDown)},this.disconnectSeparator=()=>{var e;(e=this.separatorEl)==null||e.removeEventListener("pointerdown",this.separatorPointerDown)},this.setActionBarsLayout=e=>{e.forEach(i=>i.layout=this.layout)},this.handleActionBarSlotChange=e=>{const i=Jh(e).filter(n=>n==null?void 0:n.matches("calcite-action-bar"));this.actionBars=i,this.setActionBarsLayout(i)},this.handleHeaderSlotChange=e=>{this.hasHeader=ui(e)},this.collapsed=!1,this.detached=!1,this.displayMode="dock",this.detachedHeightScale=void 0,this.heightScale=void 0,this.widthScale="m",this.layout="vertical",this.position="start",this.resizable=!1,this.messages=void 0,this.messageOverrides=void 0,this.contentWidth=null,this.contentHeight=null,this.defaultMessages=void 0,this.effectiveLocale="",this.hasHeader=!1}handleDetached(e){e?this.displayMode="float":this.displayMode==="float"&&(this.displayMode="dock")}handleDisplayMode(e){this.detached=e==="float"}handleDetachedHeightScale(e){this.heightScale=e}handleHeightScale(e){this.detachedHeightScale=e}layoutHandler(){this.setActionBarsLayout(this.actionBars)}onMessagesChange(){}connectedCallback(){fM(this),Ps(this),Fs(this)}async componentWillLoad(){await Ns(this)}disconnectedCallback(){mM(this),this.disconnectSeparator(),Rs(this),zs(this)}componentDidLoad(){this.updateAriaValues()}effectiveLocaleChange(){Ds(this,this.effectiveLocale)}renderHeader(){return k("div",{class:qc.contentHeader,hidden:!this.hasHeader,key:"header"},k("slot",{name:WA.header,onSlotchange:this.handleHeaderSlotChange}))}render(){const{collapsed:e,position:i,initialContentWidth:n,initialContentHeight:r,contentWidth:s,contentWidthMax:o,contentWidthMin:a,contentHeight:l,contentHeightMax:u,contentHeightMin:p,resizable:f,layout:m,displayMode:g}=this,y=Es(this.el),v=g!=="float"&&f,b=v?m==="horizontal"?l?{height:`${l}px`}:null:s?{width:`${s}px`}:null:null,_=!e&&v?k("div",{"aria-label":this.messages.resize,"aria-orientation":m==="horizontal"?"vertical":"horizontal","aria-valuemax":m=="horizontal"?u:o,"aria-valuemin":m=="horizontal"?p:a,"aria-valuenow":m=="horizontal"?l??r:s??n,class:qc.separator,key:"separator",onKeyDown:this.separatorKeyDown,role:"separator",tabIndex:0,"touch-action":"none",ref:this.connectSeparator}):null,$=()=>m==="horizontal"?i==="start"?Wl.calciteAnimateInDown:Wl.calciteAnimateInUp:y==="ltr"&&i==="end"||y==="rtl"&&i==="start"?Wl.calciteAnimateInLeft:Wl.calciteAnimateInRight,x=k("div",{class:{[Wl.rtl]:y==="rtl",[qc.content]:!0,[qc.contentOverlay]:g==="overlay",[qc.contentFloat]:g==="float",[Wl.calciteAnimate]:g==="overlay",[$()]:g==="overlay"},hidden:e,key:"content",style:b,ref:this.storeContentEl},this.renderHeader(),k("div",{class:qc.contentBody},k("slot",null)),_),C=[k("slot",{key:"action-bar",name:WA.actionBar,onSlotchange:this.handleActionBarSlotChange}),x];return i==="end"&&C.reverse(),k("div",{class:{[qc.container]:!0}},C)}setContentWidth(e){const{contentWidthMax:i,contentWidthMin:n}=this,r=Math.round(e);this.contentWidth=typeof i=="number"&&typeof n=="number"?qA(r,n,i):r}updateAriaValues(){const{contentEl:e}=this,i=e&&getComputedStyle(e);i&&(this.layout==="horizontal"?this.updateHeights(i):this.updateWidths(i),Jg(this))}setContentHeight(e){const{contentHeightMax:i,contentHeightMin:n}=this,r=Math.round(e);this.contentHeight=typeof i=="number"&&typeof n=="number"?qA(r,n,i):r}updateWidths(e){const i=parseInt(e.getPropertyValue("max-width"),10),n=parseInt(e.getPropertyValue("min-width"),10),r=parseInt(e.getPropertyValue("width"),10);typeof r=="number"&&!isNaN(r)&&(this.initialContentWidth=r),typeof i=="number"&&!isNaN(i)&&(this.contentWidthMax=i),typeof n=="number"&&!isNaN(n)&&(this.contentWidthMin=n)}updateHeights(e){const i=parseInt(e.getPropertyValue("max-height"),10),n=parseInt(e.getPropertyValue("min-height"),10),r=parseInt(e.getPropertyValue("height"),10);typeof r=="number"&&!isNaN(r)&&(this.initialContentHeight=r),typeof i=="number"&&!isNaN(i)&&(this.contentHeightMax=i),typeof n=="number"&&!isNaN(n)&&(this.contentHeightMin=n)}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{detached:["handleDetached"],displayMode:["handleDisplayMode"],detachedHeightScale:["handleDetachedHeightScale"],heightScale:["handleHeightScale"],layout:["layoutHandler"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return Lve}},[1,"calcite-shell-panel",{collapsed:[516],detached:[516],displayMode:[513,"display-mode"],detachedHeightScale:[513,"detached-height-scale"],heightScale:[513,"height-scale"],widthScale:[513,"width-scale"],layout:[513],position:[513],resizable:[516],messages:[1040],messageOverrides:[1040],contentWidth:[32],contentHeight:[32],defaultMessages:[32],effectiveLocale:[32],hasHeader:[32]},void 0,{detached:["handleDetached"],displayMode:["handleDisplayMode"],detachedHeightScale:["handleDetachedHeightScale"],heightScale:["handleHeightScale"],layout:["layoutHandler"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function Rve(){if(typeof customElements>"u")return;["calcite-shell-panel"].forEach(e=>{switch(e){case"calcite-shell-panel":customElements.get(e)||customElements.define(e,Pve);break}})}Rve();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */function ZA(t,e){return(t+e)%e}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */const Jr={button:"button",buttonTextVisible:"button--text-visible",buttonCompact:"button--compact",indicatorText:"indicator-text",iconContainer:"icon-container",slotContainer:"slot-container",slotContainerHidden:"slot-container--hidden",textContainer:"text-container",textContainerVisible:"text-container--visible",indicatorWithIcon:"indicator-with-icon",indicatorWithoutIcon:"indicator-without-icon"},Nve={tooltip:"tooltip"},Dve=`:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;background-color:transparent;--calcite-action-indicator-color:var(--calcite-color-brand)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.button{position:relative;margin:0px;display:flex;inline-size:auto;cursor:pointer;align-items:center;justify-content:flex-start;border-style:none;background-color:var(--calcite-color-foreground-1);fill:var(--calcite-color-text-3);font-family:var(--calcite-sans-family);font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-3);outline-color:transparent;text-align:unset;flex:1 0 auto}.button:hover{background-color:var(--calcite-color-foreground-2);fill:var(--calcite-color-text-1);color:var(--calcite-color-text-1)}.button:focus{background-color:var(--calcite-color-foreground-2);fill:var(--calcite-color-text-1);color:var(--calcite-color-text-1);outline:2px solid var(--calcite-color-brand);outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}.button:active{background-color:var(--calcite-color-foreground-3)}.button .icon-container{pointer-events:none;margin:0px;display:flex;align-items:center;justify-content:center;min-inline-size:1rem;min-block-size:1rem}.button .text-container{margin:0px;inline-size:0px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:1.5rem;opacity:0;transition-property:opacity;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-property:margin;transition-property:inline-size}.button .text-container--visible{inline-size:auto;flex:1 1 auto;opacity:1}:host([data-active]) .button{outline:2px solid var(--calcite-color-brand);outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}:host([scale=s]) .button{padding-inline:0.5rem;padding-block:0.25rem;font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-normal)}:host([scale=s]) .button--text-visible .icon-container{margin-inline-end:0.5rem}:host([scale=m]) .button{padding-inline:1rem;padding-block:0.75rem;font-size:var(--calcite-font-size--1);line-height:1rem;font-weight:var(--calcite-font-weight-normal)}:host([scale=m]) .button--text-visible .icon-container{margin-inline-end:0.75rem}:host([scale=l]) .button{padding:1.25rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;font-weight:var(--calcite-font-weight-normal)}:host([scale=l]) .button--text-visible .icon-container{margin-inline-end:1rem}:host([alignment=center]) .button{justify-content:center}:host([alignment=end]) .button{justify-content:flex-end}:host([alignment=center]) .button .text-container--visible,:host([alignment=end]) .button .text-container--visible{flex:0 1 auto}:host([scale=s][compact]) .button,:host([scale=m][compact]) .button,:host([scale=l][compact]) .button{padding-inline:0px}.slot-container{display:flex}.slot-container--hidden{display:none}.button--text-visible{inline-size:100%}:host([active]) .button,:host([active]) .button:hover,:host([active]) .button:focus,:host([active][loading]) .button{background-color:var(--calcite-color-foreground-3);fill:var(--calcite-color-text-1);color:var(--calcite-color-text-1)}:host([active]) .button:active{background-color:var(--calcite-color-foreground-1)}:host([appearance=transparent]) .button{background-color:transparent}:host([appearance=transparent][active]) .button,:host([appearance=transparent]) .button:hover,:host([appearance=transparent]) .button:focus{background-color:var(--calcite-button-transparent-hover)}:host([appearance=transparent]) .button:active{background-color:var(--calcite-button-transparent-press)}:host([appearance=transparent][disabled]) .button{background-color:transparent}:host([loading][appearance=solid]) .button,:host([loading][appearance=solid]) .button:hover,:host([loading][appearance=solid]) .button:focus{background-color:var(--calcite-color-foreground-1)}:host([loading][appearance=solid]) .button .text-container,:host([loading][appearance=solid]) .button:hover .text-container,:host([loading][appearance=solid]) .button:focus .text-container{opacity:var(--calcite-opacity-disabled)}:host([loading]) calcite-loader[inline]{color:var(--calcite-color-text-3);margin-inline-end:0px}:host([disabled]) .button,:host([disabled]) .button:hover,:host([disabled]) .button:focus{cursor:default;background-color:var(--calcite-color-foreground-1);opacity:var(--calcite-opacity-disabled)}:host([disabled][active]) .button,:host([disabled][active]) .button:hover,:host([disabled][active]) .button:focus{background-color:var(--calcite-color-foreground-3);opacity:var(--calcite-opacity-disabled)}:host([appearance=transparent]) .button{background-color:transparent;transition-property:box-shadow;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}.indicator-with-icon{position:relative}.indicator-with-icon::after{content:"";position:absolute;block-size:0.5rem;inline-size:0.5rem;border-radius:9999px;inset-block-end:-0.275rem;inset-inline-end:-0.275rem;background-color:var(--calcite-action-indicator-color)}.indicator-without-icon{margin-inline:0.25rem;inline-size:1rem;position:relative}.indicator-without-icon::after{content:"";position:absolute;block-size:0.5rem;inline-size:0.5rem;border-radius:9999px;inset-block-end:-0.275rem;inset-inline-end:-0.275rem;background-color:var(--calcite-action-indicator-color)}.indicator-text{position:absolute;inline-size:1px;block-size:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}:host([hidden]){display:none}[hidden]{display:none}`,Fve=Ct(class extends It{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.mutationObserver=ii("mutation",()=>Jg(this)),this.guid=`calcite-action-${Oc()}`,this.indicatorId=`${this.guid}-indicator`,this.buttonId=`${this.guid}-button`,this.handleTooltipSlotChange=e=>{const n=e.target.assignedElements({flatten:!0}).filter(r=>r==null?void 0:r.matches("calcite-tooltip"))[0];n&&(n.referenceElement=this.buttonEl)},this.active=!1,this.alignment=void 0,this.appearance="solid",this.compact=!1,this.disabled=!1,this.icon=void 0,this.iconFlipRtl=!1,this.indicator=!1,this.label=void 0,this.loading=!1,this.scale="m",this.text=void 0,this.textEnabled=!1,this.messages=void 0,this.messageOverrides=void 0,this.effectiveLocale="",this.defaultMessages=void 0}onMessagesChange(){}effectiveLocaleChange(){Ds(this,this.effectiveLocale)}connectedCallback(){var e;Lc(this),Ps(this),Fs(this),(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0})}async componentWillLoad(){zo(this),await Ns(this)}componentDidLoad(){jo(this)}disconnectedCallback(){var e;Pc(this),Rs(this),zs(this),(e=this.mutationObserver)==null||e.disconnect()}componentDidRender(){Ac(this)}async setFocus(){var e;await Go(this),(e=this.buttonEl)==null||e.focus()}renderTextContainer(){const{text:e,textEnabled:i}=this,n={[Jr.textContainer]:!0,[Jr.textContainerVisible]:i};return e?k("div",{class:n,key:"text-container"},e):null}renderIndicatorText(){const{indicator:e,messages:i,indicatorId:n,buttonId:r}=this;return k("div",{"aria-labelledby":r,"aria-live":"polite",class:Jr.indicatorText,id:n,role:"region"},e?i.indicator:null)}renderIconContainer(){var g;const{loading:e,icon:i,scale:n,el:r,iconFlipRtl:s,indicator:o}=this,a=n==="l"?"l":"m",l=e?k("calcite-loader",{inline:!0,label:this.messages.loading,scale:a}):null,u=i?k("calcite-icon",{class:{[Jr.indicatorWithIcon]:o},flipRtl:s,icon:i,scale:pi(this.scale)}):null,p=l||u,f=p||((g=r.children)==null?void 0:g.length),m=k("div",{class:{[Jr.slotContainer]:!0,[Jr.slotContainerHidden]:e}},k("slot",null));return f?k("div",{"aria-hidden":"true",class:Jr.iconContainer,key:"icon-container"},p,m):null}render(){const{active:e,compact:i,disabled:n,icon:r,loading:s,textEnabled:o,label:a,text:l,indicator:u,indicatorId:p,buttonId:f,messages:m}=this,g=`${a||l}${u?` (${m.indicator})`:""}`,y={[Jr.button]:!0,[Jr.buttonTextVisible]:o,[Jr.buttonCompact]:i};return k(Pn,null,k("button",{"aria-busy":Ui(s),"aria-controls":u?p:null,"aria-disabled":Ui(n),"aria-label":g,"aria-pressed":Ui(e),class:y,disabled:n,id:f,ref:v=>this.buttonEl=v},this.renderIconContainer(),this.renderTextContainer(),!r&&u&&k("div",{class:Jr.indicatorWithoutIcon,key:"indicator-no-icon"})),k("slot",{name:Nve.tooltip,onSlotchange:this.handleTooltipSlotChange}),this.renderIndicatorText())}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return Dve}},[1,"calcite-action",{active:[516],alignment:[513],appearance:[513],compact:[516],disabled:[516],icon:[1],iconFlipRtl:[516,"icon-flip-rtl"],indicator:[516],label:[1],loading:[516],scale:[513],text:[1],textEnabled:[516,"text-enabled"],messages:[1040],messageOverrides:[1040],effectiveLocale:[32],defaultMessages:[32],setFocus:[64]},void 0,{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function Gw(){if(typeof customElements>"u")return;["calcite-action","calcite-icon","calcite-loader"].forEach(e=>{switch(e){case"calcite-action":customElements.get(e)||customElements.define(e,Fve);break;case"calcite-icon":customElements.get(e)||js();break;case"calcite-loader":customElements.get(e)||kd();break}})}Gw();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 *//*!
* focus-trap 7.5.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function KA(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),i.push.apply(i,n)}return i}function JA(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?KA(Object(i),!0).forEach(function(n){zve(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):KA(Object(i)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))})}return t}function zve(t,e,i){return e=Gve(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function jve(t,e){if(typeof t!="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var n=i.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Gve(t){var e=jve(t,"string");return typeof e=="symbol"?e:String(e)}var YA={activateTrap:function(e,i){if(e.length>0){var n=e[e.length-1];n!==i&&n.pause()}var r=e.indexOf(i);r===-1||e.splice(r,1),e.push(i)},deactivateTrap:function(e,i){var n=e.indexOf(i);n!==-1&&e.splice(n,1),e.length>0&&e[e.length-1].unpause()}},Uve=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},Hve=function(e){return(e==null?void 0:e.key)==="Escape"||(e==null?void 0:e.key)==="Esc"||(e==null?void 0:e.keyCode)===27},zm=function(e){return(e==null?void 0:e.key)==="Tab"||(e==null?void 0:e.keyCode)===9},Vve=function(e){return zm(e)&&!e.shiftKey},Bve=function(e){return zm(e)&&e.shiftKey},XA=function(e){return setTimeout(e,0)},QA=function(e,i){var n=-1;return e.every(function(r,s){return i(r)?(n=s,!1):!0}),n},bf=function(e){for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return typeof e=="function"?e.apply(void 0,n):e},x0=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},qve=[],Wve=function(e,i){var n=(i==null?void 0:i.document)||document,r=(i==null?void 0:i.trapStack)||qve,s=JA({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:Vve,isKeyBackward:Bve},i),o={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},a,l=function(L,R,D){return L&&L[R]!==void 0?L[R]:s[D||R]},u=function(L,R){var D=typeof(R==null?void 0:R.composedPath)=="function"?R.composedPath():void 0;return o.containerGroups.findIndex(function(Y){var le=Y.container,re=Y.tabbableNodes;return le.contains(L)||(D==null?void 0:D.includes(le))||re.find(function(oe){return oe===L})})},p=function(L){var R=s[L];if(typeof R=="function"){for(var D=arguments.length,Y=new Array(D>1?D-1:0),le=1;le<D;le++)Y[le-1]=arguments[le];R=R.apply(void 0,Y)}if(R===!0&&(R=void 0),!R){if(R===void 0||R===!1)return R;throw new Error("`".concat(L,"` was specified but was not a node, or did not return a node"))}var re=R;if(typeof R=="string"&&(re=n.querySelector(R),!re))throw new Error("`".concat(L,"` as selector refers to no known node"));return re},f=function(){var L=p("initialFocus");if(L===!1)return!1;if(L===void 0||!eS(L,s.tabbableOptions))if(u(n.activeElement)>=0)L=n.activeElement;else{var R=o.tabbableGroups[0],D=R&&R.firstTabbableNode;L=D||p("fallbackFocus")}if(!L)throw new Error("Your focus-trap needs to have at least one focusable element");return L},m=function(){if(o.containerGroups=o.containers.map(function(L){var R=S8(L,s.tabbableOptions),D=yhe(L,s.tabbableOptions),Y=R.length>0?R[0]:void 0,le=R.length>0?R[R.length-1]:void 0,re=D.find(function(it){return Wd(it)}),oe=D.slice().reverse().find(function(it){return Wd(it)}),ke=!!R.find(function(it){return Lu(it)>0});return{container:L,tabbableNodes:R,focusableNodes:D,posTabIndexesFound:ke,firstTabbableNode:Y,lastTabbableNode:le,firstDomTabbableNode:re,lastDomTabbableNode:oe,nextTabbableNode:function(wt){var jt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,Ti=R.indexOf(wt);return Ti<0?jt?D.slice(D.indexOf(wt)+1).find(function(on){return Wd(on)}):D.slice(0,D.indexOf(wt)).reverse().find(function(on){return Wd(on)}):R[Ti+(jt?1:-1)]}}}),o.tabbableGroups=o.containerGroups.filter(function(L){return L.tabbableNodes.length>0}),o.tabbableGroups.length<=0&&!p("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(o.containerGroups.find(function(L){return L.posTabIndexesFound})&&o.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},g=function H(L){var R=L.activeElement;if(R)return R.shadowRoot&&R.shadowRoot.activeElement!==null?H(R.shadowRoot):R},y=function H(L){if(L!==!1&&L!==g(document)){if(!L||!L.focus){H(f());return}L.focus({preventScroll:!!s.preventScroll}),o.mostRecentlyFocusedNode=L,Uve(L)&&L.select()}},v=function(L){var R=p("setReturnFocus",L);return R||(R===!1?!1:L)},b=function(L){var R=L.target,D=L.event,Y=L.isBackward,le=Y===void 0?!1:Y;R=R||x0(D),m();var re=null;if(o.tabbableGroups.length>0){var oe=u(R,D),ke=oe>=0?o.containerGroups[oe]:void 0;if(oe<0)le?re=o.tabbableGroups[o.tabbableGroups.length-1].lastTabbableNode:re=o.tabbableGroups[0].firstTabbableNode;else if(le){var it=QA(o.tabbableGroups,function(Fr){var Rn=Fr.firstTabbableNode;return R===Rn});if(it<0&&(ke.container===R||eS(R,s.tabbableOptions)&&!Wd(R,s.tabbableOptions)&&!ke.nextTabbableNode(R,!1))&&(it=oe),it>=0){var wt=it===0?o.tabbableGroups.length-1:it-1,jt=o.tabbableGroups[wt];re=Lu(R)>=0?jt.lastTabbableNode:jt.lastDomTabbableNode}else zm(D)||(re=ke.nextTabbableNode(R,!1))}else{var Ti=QA(o.tabbableGroups,function(Fr){var Rn=Fr.lastTabbableNode;return R===Rn});if(Ti<0&&(ke.container===R||eS(R,s.tabbableOptions)&&!Wd(R,s.tabbableOptions)&&!ke.nextTabbableNode(R))&&(Ti=oe),Ti>=0){var on=Ti===o.tabbableGroups.length-1?0:Ti+1,Ho=o.tabbableGroups[on];re=Lu(R)>=0?Ho.firstTabbableNode:Ho.firstDomTabbableNode}else zm(D)||(re=ke.nextTabbableNode(R))}}else re=p("fallbackFocus");return re},_=function(L){var R=x0(L);if(!(u(R,L)>=0)){if(bf(s.clickOutsideDeactivates,L)){a.deactivate({returnFocus:s.returnFocusOnDeactivate});return}bf(s.allowOutsideClick,L)||L.preventDefault()}},$=function(L){var R=x0(L),D=u(R,L)>=0;if(D||R instanceof Document)D&&(o.mostRecentlyFocusedNode=R);else{L.stopImmediatePropagation();var Y,le=!0;if(o.mostRecentlyFocusedNode)if(Lu(o.mostRecentlyFocusedNode)>0){var re=u(o.mostRecentlyFocusedNode),oe=o.containerGroups[re].tabbableNodes;if(oe.length>0){var ke=oe.findIndex(function(it){return it===o.mostRecentlyFocusedNode});ke>=0&&(s.isKeyForward(o.recentNavEvent)?ke+1<oe.length&&(Y=oe[ke+1],le=!1):ke-1>=0&&(Y=oe[ke-1],le=!1))}}else o.containerGroups.some(function(it){return it.tabbableNodes.some(function(wt){return Lu(wt)>0})})||(le=!1);else le=!1;le&&(Y=b({target:o.mostRecentlyFocusedNode,isBackward:s.isKeyBackward(o.recentNavEvent)})),y(Y||o.mostRecentlyFocusedNode||f())}o.recentNavEvent=void 0},x=function(L){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;o.recentNavEvent=L;var D=b({event:L,isBackward:R});D&&(zm(L)&&L.preventDefault(),y(D))},E=function(L){if(Hve(L)&&bf(s.escapeDeactivates,L)!==!1){L.preventDefault(),a.deactivate();return}(s.isKeyForward(L)||s.isKeyBackward(L))&&x(L,s.isKeyBackward(L))},C=function(L){var R=x0(L);u(R,L)>=0||bf(s.clickOutsideDeactivates,L)||bf(s.allowOutsideClick,L)||(L.preventDefault(),L.stopImmediatePropagation())},M=function(){if(o.active)return YA.activateTrap(r,a),o.delayInitialFocusTimer=s.delayInitialFocus?XA(function(){y(f())}):y(f()),n.addEventListener("focusin",$,!0),n.addEventListener("mousedown",_,{capture:!0,passive:!1}),n.addEventListener("touchstart",_,{capture:!0,passive:!1}),n.addEventListener("click",C,{capture:!0,passive:!1}),n.addEventListener("keydown",E,{capture:!0,passive:!1}),a},N=function(){if(o.active)return n.removeEventListener("focusin",$,!0),n.removeEventListener("mousedown",_,!0),n.removeEventListener("touchstart",_,!0),n.removeEventListener("click",C,!0),n.removeEventListener("keydown",E,!0),a},G=function(L){var R=L.some(function(D){var Y=Array.from(D.removedNodes);return Y.some(function(le){return le===o.mostRecentlyFocusedNode})});R&&y(f())},U=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(G):void 0,B=function(){U&&(U.disconnect(),o.active&&!o.paused&&o.containers.map(function(L){U.observe(L,{subtree:!0,childList:!0})}))};return a={get active(){return o.active},get paused(){return o.paused},activate:function(L){if(o.active)return this;var R=l(L,"onActivate"),D=l(L,"onPostActivate"),Y=l(L,"checkCanFocusTrap");Y||m(),o.active=!0,o.paused=!1,o.nodeFocusedBeforeActivation=n.activeElement,R==null||R();var le=function(){Y&&m(),M(),B(),D==null||D()};return Y?(Y(o.containers.concat()).then(le,le),this):(le(),this)},deactivate:function(L){if(!o.active)return this;var R=JA({onDeactivate:s.onDeactivate,onPostDeactivate:s.onPostDeactivate,checkCanReturnFocus:s.checkCanReturnFocus},L);clearTimeout(o.delayInitialFocusTimer),o.delayInitialFocusTimer=void 0,N(),o.active=!1,o.paused=!1,B(),YA.deactivateTrap(r,a);var D=l(R,"onDeactivate"),Y=l(R,"onPostDeactivate"),le=l(R,"checkCanReturnFocus"),re=l(R,"returnFocus","returnFocusOnDeactivate");D==null||D();var oe=function(){XA(function(){re&&y(v(o.nodeFocusedBeforeActivation)),Y==null||Y()})};return re&&le?(le(v(o.nodeFocusedBeforeActivation)).then(oe,oe),this):(oe(),this)},pause:function(L){if(o.paused||!o.active)return this;var R=l(L,"onPause"),D=l(L,"onPostPause");return o.paused=!0,R==null||R(),N(),B(),D==null||D(),this},unpause:function(L){if(!o.paused||!o.active)return this;var R=l(L,"onUnpause"),D=l(L,"onPostUnpause");return o.paused=!1,R==null||R(),m(),M(),B(),D==null||D(),this},updateContainerElements:function(L){var R=[].concat(L).filter(Boolean);return o.containers=R.map(function(D){return typeof D=="string"?n.querySelector(D):D}),o.active&&m(),B(),this}},a.updateContainerElements(e),a};const kS=globalThis.calciteConfig,Zve=(kS==null?void 0:kS.focusTrapStack)||[];function Kve(t,e){const{el:i}=t,n=(e==null?void 0:e.focusTrapEl)||i;if(!n)return;const r={clickOutsideDeactivates:!0,escapeDeactivates:!1,fallbackFocus:n,setReturnFocus:s=>(ww(s),!1),...e==null?void 0:e.focusTrapOptions,document:i.ownerDocument,tabbableOptions:$8,trapStack:Zve};t.focusTrap=Wve(n,r)}function eL(t,e){var i;t.focusTrapDisabled||(i=t.focusTrap)==null||i.activate(e)}function MS(t,e){var i;(i=t.focusTrap)==null||i.deactivate(e)}function Jve(t){var e;(e=t.focusTrap)==null||e.updateContainerElements(t.el)}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */const G9=(t,e)=>{const i=t.level?`h${t.level}`:"div";return delete t.level,k(i,{...t},e)};/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */const ra={container:"container",imageContainer:"image-container",closeButtonContainer:"close-button-container",closeButton:"close-button",content:"content",hasHeader:"has-header",header:"header",headerContent:"header-content",heading:"heading"},Yve="auto",tL="aria-controls",iL="aria-expanded";class Xve{constructor(){this.registeredElements=new Map,this.registeredElementCount=0,this.queryPopover=e=>{const{registeredElements:i}=this,n=e.find(r=>i.has(r));return i.get(n)},this.togglePopovers=e=>{const i=e.composedPath(),n=this.queryPopover(i);n&&!n.triggerDisabled&&(n.open=!n.open),Array.from(this.registeredElements.values()).filter(r=>r!==n&&r.autoClose&&r.open&&!i.includes(r)).forEach(r=>r.open=!1)},this.keyHandler=e=>{e.defaultPrevented||(e.key==="Escape"?this.closeAllPopovers():Pk(e.key)&&this.togglePopovers(e))},this.clickHandler=e=>{yd(e)&&this.togglePopovers(e)}}registerElement(e,i){this.registeredElementCount++,this.registeredElements.set(e,i),this.registeredElementCount===1&&this.addListeners()}unregisterElement(e){this.registeredElements.delete(e)&&this.registeredElementCount--,this.registeredElementCount===0&&this.removeListeners()}closeAllPopovers(){Array.from(this.registeredElements.values()).forEach(e=>e.open=!1)}addListeners(){window.addEventListener("pointerdown",this.clickHandler,{capture:!0}),window.addEventListener("keydown",this.keyHandler,{capture:!0})}removeListeners(){window.removeEventListener("pointerdown",this.clickHandler,{capture:!0}),window.removeEventListener("keydown",this.keyHandler,{capture:!0})}}const Qve=":host{--calcite-floating-ui-z-index:var(--calcite-popover-z-index, var(--calcite-z-index-popup));display:block;position:absolute;z-index:var(--calcite-floating-ui-z-index)}.calcite-floating-ui-anim{position:relative;transition:var(--calcite-floating-ui-transition);transition-property:transform, visibility, opacity;opacity:0;box-shadow:0 0 16px 0 rgba(0, 0, 0, 0.16);z-index:var(--calcite-z-index);border-radius:0.25rem}:host([data-placement^=bottom]) .calcite-floating-ui-anim{transform:translateY(-5px)}:host([data-placement^=top]) .calcite-floating-ui-anim{transform:translateY(5px)}:host([data-placement^=left]) .calcite-floating-ui-anim{transform:translateX(5px)}:host([data-placement^=right]) .calcite-floating-ui-anim{transform:translateX(-5px)}:host([data-placement]) .calcite-floating-ui-anim--active{opacity:1;transform:translate(0)}:host([calcite-hydrated-hidden]){visibility:hidden !important;pointer-events:none}.calcite-floating-ui-arrow{pointer-events:none;position:absolute;z-index:calc(var(--calcite-z-index) * -1);fill:var(--calcite-color-foreground-1)}.calcite-floating-ui-arrow__stroke{stroke:var(--calcite-color-border-3)}:host([scale=s]) .heading{padding-inline:0.75rem;padding-block:0.5rem;font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=m]) .heading{padding-inline:1rem;padding-block:0.75rem;font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=l]) .heading{padding-inline:1.25rem;padding-block:1rem;font-size:var(--calcite-font-size-1);line-height:1.375}:host{pointer-events:none}:host([open]){pointer-events:initial}.calcite-floating-ui-anim{border-radius:0.25rem;border-width:1px;border-style:solid;border-color:var(--calcite-color-border-3);background-color:var(--calcite-color-foreground-1)}.arrow::before{outline:1px solid var(--calcite-color-border-3)}.header{display:flex;flex:1 1 auto;align-items:stretch;justify-content:flex-start;border-width:0px;border-block-end-width:1px;border-style:solid;border-block-end-color:var(--calcite-color-border-3)}.heading{margin:0px;display:block;flex:1 1 auto;align-self:center;white-space:normal;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1);word-wrap:break-word;word-break:break-word}.container{position:relative;display:flex;block-size:100%;flex-direction:row;flex-wrap:nowrap;border-radius:0.25rem;color:var(--calcite-color-text-1)}.container.has-header{flex-direction:column}.content{display:flex;block-size:100%;inline-size:100%;flex-direction:column;flex-wrap:nowrap;align-self:center;word-wrap:break-word;word-break:break-word}.close-button-container{display:flex;overflow:hidden;flex:0 0 auto;border-start-end-radius:0.25rem;border-end-end-radius:0.25rem}::slotted(calcite-panel),::slotted(calcite-flow){block-size:100%}:host([hidden]){display:none}[hidden]{display:none}",nL=new Xve,ebe=Ct(class extends It{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calcitePopoverBeforeClose=$e(this,"calcitePopoverBeforeClose",6),this.calcitePopoverClose=$e(this,"calcitePopoverClose",6),this.calcitePopoverBeforeOpen=$e(this,"calcitePopoverBeforeOpen",6),this.calcitePopoverOpen=$e(this,"calcitePopoverOpen",6),this.mutationObserver=ii("mutation",()=>this.updateFocusTrapElements()),this.guid=`calcite-popover-${Oc()}`,this.openTransitionProp="opacity",this.hasLoaded=!1,this.setTransitionEl=e=>{this.transitionEl=e},this.setFilteredPlacements=()=>{const{el:e,flipPlacements:i}=this;this.filteredFlipPlacements=i?Gfe(i,e):null},this.setUpReferenceElement=(e=!0)=>{this.removeReferences(),this.effectiveReferenceElement=this.getReferenceElement(),o1(this,this.effectiveReferenceElement,this.el);const{el:i,referenceElement:n,effectiveReferenceElement:r}=this;e&&n&&!r&&console.warn(`${i.tagName}: reference-element id "${n}" was not found.`,{el:i}),this.addReferences()},this.getId=()=>this.el.id||this.guid,this.setExpandedAttr=()=>{const{effectiveReferenceElement:e,open:i}=this;e&&"setAttribute"in e&&e.setAttribute(iL,Ui(i))},this.addReferences=()=>{const{effectiveReferenceElement:e}=this;if(!e)return;const i=this.getId();"setAttribute"in e&&e.setAttribute(tL,i),nL.registerElement(e,this.el),this.setExpandedAttr()},this.removeReferences=()=>{const{effectiveReferenceElement:e}=this;e&&("removeAttribute"in e&&(e.removeAttribute(tL),e.removeAttribute(iL)),nL.unregisterElement(e))},this.hide=()=>{this.open=!1},this.storeArrowEl=e=>{this.arrowEl=e,this.reposition(!0)},this.autoClose=!1,this.closable=!1,this.flipDisabled=!1,this.focusTrapDisabled=!1,this.pointerDisabled=!1,this.flipPlacements=void 0,this.heading=void 0,this.headingLevel=void 0,this.label=void 0,this.messageOverrides=void 0,this.messages=void 0,this.offsetDistance=hj,this.offsetSkidding=0,this.open=!1,this.overlayPositioning="absolute",this.placement=Yve,this.referenceElement=void 0,this.scale="m",this.triggerDisabled=!1,this.effectiveLocale="",this.floatingLayout="vertical",this.effectiveReferenceElement=void 0,this.defaultMessages=void 0}handleFocusTrapDisabled(e){this.open&&(e?MS(this):eL(this))}flipPlacementsHandler(){this.setFilteredPlacements(),this.reposition(!0)}onMessagesChange(){}offsetDistanceOffsetHandler(){this.reposition(!0)}offsetSkiddingHandler(){this.reposition(!0)}openHandler(){ed(this),this.setExpandedAttr()}overlayPositioningHandler(){this.reposition(!0)}placementHandler(){this.reposition(!0)}referenceElementHandler(){this.setUpReferenceElement(),this.reposition(!0)}effectiveLocaleChange(){Ds(this,this.effectiveLocale)}connectedCallback(){this.setFilteredPlacements(),Ps(this),Fs(this),this.setUpReferenceElement(this.hasLoaded),Kve(this),this.open&&ed(this),o1(this,this.effectiveReferenceElement,this.el)}async componentWillLoad(){await Ns(this),zo(this)}componentDidLoad(){jo(this),this.referenceElement&&!this.effectiveReferenceElement&&this.setUpReferenceElement(),this.reposition(),this.hasLoaded=!0}disconnectedCallback(){this.removeReferences(),Rs(this),zs(this),Uk(this,this.effectiveReferenceElement,this.el),MS(this)}async reposition(e=!1){const{el:i,effectiveReferenceElement:n,placement:r,overlayPositioning:s,flipDisabled:o,filteredFlipPlacements:a,offsetDistance:l,offsetSkidding:u,arrowEl:p}=this;return dj(this,{floatingEl:i,referenceEl:n,overlayPositioning:s,placement:r,flipDisabled:o,flipPlacements:a,offsetDistance:l,offsetSkidding:u,arrowEl:p,type:"popover"},e)}async setFocus(){await Go(this),Jg(this.el),k8(this.el)}async updateFocusTrapElements(){Jve(this)}getReferenceElement(){const{referenceElement:e,el:i}=this;return(typeof e=="string"?bw(i,{id:e}):e)||null}onBeforeOpen(){this.reposition(!0),this.calcitePopoverBeforeOpen.emit()}onOpen(){this.calcitePopoverOpen.emit(),eL(this)}onBeforeClose(){this.calcitePopoverBeforeClose.emit()}onClose(){this.calcitePopoverClose.emit(),MS(this),this.reposition(!0)}renderCloseButton(){const{messages:e,closable:i}=this;return i?k("div",{class:ra.closeButtonContainer,key:ra.closeButtonContainer},k("calcite-action",{appearance:"transparent",class:ra.closeButton,onClick:this.hide,scale:this.scale,text:e.close,ref:n=>this.closeButtonEl=n},k("calcite-icon",{icon:"x",scale:pi(this.scale)}))):null}renderHeader(){const{heading:e,headingLevel:i}=this,n=e?k(G9,{class:ra.heading,level:i},e):null;return n?k("div",{class:ra.header,key:ra.header},n,this.renderCloseButton()):null}render(){const{effectiveReferenceElement:e,heading:i,label:n,open:r,pointerDisabled:s,floatingLayout:o}=this,a=e&&r,l=!a,u=s?null:k(pj,{floatingLayout:o,key:"floating-arrow",ref:this.storeArrowEl});return k(Pn,{"aria-hidden":Ui(l),"aria-label":n,"aria-live":"polite","calcite-hydrated-hidden":l,id:this.getId(),role:"dialog"},k("div",{class:{[r1.animation]:!0,[r1.animationActive]:a},ref:this.setTransitionEl},u,k("div",{class:{[ra.hasHeader]:!!i,[ra.container]:!0}},this.renderHeader(),k("div",{class:ra.content},k("slot",null)),i?null:this.renderCloseButton())))}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{focusTrapDisabled:["handleFocusTrapDisabled"],flipPlacements:["flipPlacementsHandler"],messageOverrides:["onMessagesChange"],offsetDistance:["offsetDistanceOffsetHandler"],offsetSkidding:["offsetSkiddingHandler"],open:["openHandler"],overlayPositioning:["overlayPositioningHandler"],placement:["placementHandler"],referenceElement:["referenceElementHandler"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return Qve}},[1,"calcite-popover",{autoClose:[516,"auto-close"],closable:[516],flipDisabled:[516,"flip-disabled"],focusTrapDisabled:[516,"focus-trap-disabled"],pointerDisabled:[516,"pointer-disabled"],flipPlacements:[16],heading:[1],headingLevel:[514,"heading-level"],label:[1],messageOverrides:[1040],messages:[1040],offsetDistance:[514,"offset-distance"],offsetSkidding:[514,"offset-skidding"],open:[1540],overlayPositioning:[513,"overlay-positioning"],placement:[513],referenceElement:[1,"reference-element"],scale:[513],triggerDisabled:[516,"trigger-disabled"],effectiveLocale:[32],floatingLayout:[32],effectiveReferenceElement:[32],defaultMessages:[32],reposition:[64],setFocus:[64],updateFocusTrapElements:[64]},void 0,{focusTrapDisabled:["handleFocusTrapDisabled"],flipPlacements:["flipPlacementsHandler"],messageOverrides:["onMessagesChange"],offsetDistance:["offsetDistanceOffsetHandler"],offsetSkidding:["offsetSkiddingHandler"],open:["openHandler"],overlayPositioning:["overlayPositioningHandler"],placement:["placementHandler"],referenceElement:["referenceElementHandler"],effectiveLocale:["effectiveLocaleChange"]}]);function gM(){if(typeof customElements>"u")return;["calcite-popover","calcite-action","calcite-icon","calcite-loader"].forEach(e=>{switch(e){case"calcite-popover":customElements.get(e)||customElements.define(e,ebe);break;case"calcite-action":customElements.get(e)||Gw();break;case"calcite-icon":customElements.get(e)||js();break;case"calcite-loader":customElements.get(e)||kd();break}})}gM();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */const rL={menu:"menu",defaultTrigger:"default-trigger"},uT={tooltip:"tooltip",trigger:"trigger"},tbe={menu:"ellipsis"},ibe="data-active",nbe=":host{box-sizing:border-box;display:flex;flex-direction:column;font-size:var(--calcite-font-size-1);color:var(--calcite-color-text-2)}::slotted(calcite-action-group){border-block-end:1px solid var(--calcite-color-border-3)}::slotted(calcite-action-group:last-child){border-block-end:0}.default-trigger{position:relative;block-size:100%;flex:0 1 auto;align-self:stretch}slot[name=trigger]::slotted(calcite-action),calcite-action::slotted([slot=trigger]){position:relative;block-size:100%;flex:0 1 auto;align-self:stretch}.menu{max-block-size:45vh;flex-direction:column;flex-wrap:nowrap;overflow-y:auto;overflow-x:hidden;outline:2px solid transparent;outline-offset:2px}:host([hidden]){display:none}[hidden]{display:none}",rbe=["ArrowUp","ArrowDown","End","Home"],sbe=Ct(class extends It{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteActionMenuOpen=$e(this,"calciteActionMenuOpen",6),this.actionElements=[],this.guid=`calcite-action-menu-${Oc()}`,this.menuId=`${this.guid}-menu`,this.menuButtonId=`${this.guid}-menu-button`,this.connectMenuButtonEl=()=>{const{menuButtonId:e,menuId:i,open:n,label:r}=this,s=this.slottedMenuButtonEl||this.defaultMenuButtonEl;this.menuButtonEl!==s&&(this.disconnectMenuButtonEl(),this.menuButtonEl=s,this.setTooltipReferenceElement(),s&&(s.active=n,s.setAttribute("aria-controls",i),s.setAttribute("aria-expanded",Ui(n)),s.setAttribute("aria-haspopup","true"),s.id||(s.id=e),s.label||(s.label=r),s.text||(s.text=r),s.addEventListener("pointerdown",this.menuButtonClick),s.addEventListener("keydown",this.menuButtonKeyDown)))},this.disconnectMenuButtonEl=()=>{const{menuButtonEl:e}=this;e&&(e.removeEventListener("pointerdown",this.menuButtonClick),e.removeEventListener("keydown",this.menuButtonKeyDown))},this.setMenuButtonEl=e=>{const i=e.target.assignedElements({flatten:!0}).filter(n=>n==null?void 0:n.matches("calcite-action"));this.slottedMenuButtonEl=i[0],this.connectMenuButtonEl()},this.setDefaultMenuButtonEl=e=>{this.defaultMenuButtonEl=e,this.connectMenuButtonEl()},this.handleCalciteActionClick=()=>{this.open=!1,this.setFocus()},this.menuButtonClick=e=>{yd(e)&&this.toggleOpen()},this.updateTooltip=e=>{const i=e.target.assignedElements({flatten:!0}).filter(n=>n==null?void 0:n.matches("calcite-tooltip"));this.tooltipEl=i[0],this.setTooltipReferenceElement()},this.setTooltipReferenceElement=()=>{const{tooltipEl:e,expanded:i,menuButtonEl:n,open:r}=this;e&&(e.referenceElement=!i&&!r?n:null)},this.updateAction=(e,i)=>{const{guid:n,activeMenuItemIndex:r}=this,s=`${n}-action-${i}`;e.tabIndex=-1,e.setAttribute("role","menuitem"),e.id||(e.id=s),e.toggleAttribute(ibe,i===r)},this.updateActions=e=>{e==null||e.forEach(this.updateAction)},this.handleDefaultSlotChange=e=>{const i=e.target.assignedElements({flatten:!0}).reduce((n,r)=>r!=null&&r.matches("calcite-action")?(n.push(r),n):r!=null&&r.matches("calcite-action-group")?n.concat(Array.from(r.querySelectorAll("calcite-action"))):n,[]);this.actionElements=i},this.menuButtonKeyDown=e=>{const{key:i}=e,{actionElements:n,activeMenuItemIndex:r,open:s}=this;if(n.length){if(Pk(i)){if(e.preventDefault(),!s){this.toggleOpen();return}const o=n[r];o?o.click():this.toggleOpen(!1)}if(i==="Tab"){this.open=!1;return}if(i==="Escape"){this.toggleOpen(!1),e.preventDefault();return}this.handleActionNavigation(e,i,n)}},this.handleActionNavigation=(e,i,n)=>{if(!this.isValidKey(i,rbe))return;if(e.preventDefault(),!this.open){this.toggleOpen(),(i==="Home"||i==="ArrowDown")&&(this.activeMenuItemIndex=0),(i==="End"||i==="ArrowUp")&&(this.activeMenuItemIndex=n.length-1);return}i==="Home"&&(this.activeMenuItemIndex=0),i==="End"&&(this.activeMenuItemIndex=n.length-1);const r=this.activeMenuItemIndex;i==="ArrowUp"&&(this.activeMenuItemIndex=ZA(Math.max(r-1,-1),n.length)),i==="ArrowDown"&&(this.activeMenuItemIndex=ZA(r+1,n.length))},this.toggleOpenEnd=()=>{this.setFocus(),this.el.removeEventListener("calcitePopoverOpen",this.toggleOpenEnd)},this.toggleOpen=(e=!this.open)=>{this.el.addEventListener("calcitePopoverOpen",this.toggleOpenEnd),this.open=e},this.appearance="solid",this.expanded=!1,this.flipPlacements=void 0,this.label=void 0,this.open=!1,this.overlayPositioning="absolute",this.placement="auto",this.scale=void 0,this.menuButtonEl=void 0,this.activeMenuItemIndex=-1}componentWillLoad(){zo(this)}componentDidLoad(){jo(this)}disconnectedCallback(){this.disconnectMenuButtonEl()}expandedHandler(){this.open=!1,this.setTooltipReferenceElement()}openHandler(e){this.activeMenuItemIndex=this.open?0:-1,this.menuButtonEl&&(this.menuButtonEl.active=e),this.calciteActionMenuOpen.emit(),this.setTooltipReferenceElement()}closeCalciteActionMenuOnClick(e){!yd(e)||e.composedPath().includes(this.el)||(this.open=!1)}activeMenuItemIndexHandler(){this.updateActions(this.actionElements)}async setFocus(){return await Go(this),ww(this.menuButtonEl)}renderMenuButton(){const{appearance:e,label:i,scale:n,expanded:r}=this;return k("slot",{name:uT.trigger,onSlotchange:this.setMenuButtonEl},k("calcite-action",{appearance:e,class:rL.defaultTrigger,icon:tbe.menu,scale:n,text:i,textEnabled:r,ref:this.setDefaultMenuButtonEl}))}renderMenuItems(){const{actionElements:e,activeMenuItemIndex:i,open:n,menuId:r,menuButtonEl:s,label:o,placement:a,overlayPositioning:l,flipPlacements:u}=this,p=e[i],f=(p==null?void 0:p.id)||null;return k("calcite-popover",{flipPlacements:u,focusTrapDisabled:!0,label:o,offsetDistance:0,open:n,overlayPositioning:l,placement:a,pointerDisabled:!0,referenceElement:s},k("div",{"aria-activedescendant":f,"aria-labelledby":s==null?void 0:s.id,class:rL.menu,id:r,onClick:this.handleCalciteActionClick,role:"menu",tabIndex:-1},k("slot",{onSlotchange:this.handleDefaultSlotChange})))}render(){return k(Yg,null,this.renderMenuButton(),this.renderMenuItems(),k("slot",{name:uT.tooltip,onSlotchange:this.updateTooltip}))}isValidKey(e,i){return!!i.find(n=>n===e)}get el(){return this}static get watchers(){return{expanded:["expandedHandler"],open:["openHandler"],activeMenuItemIndex:["activeMenuItemIndexHandler"]}}static get style(){return nbe}},[1,"calcite-action-menu",{appearance:[513],expanded:[516],flipPlacements:[16],label:[1],open:[1540],overlayPositioning:[513,"overlay-positioning"],placement:[513],scale:[513],menuButtonEl:[32],activeMenuItemIndex:[32],setFocus:[64]},[[9,"pointerdown","closeCalciteActionMenuOnClick"]],{expanded:["expandedHandler"],open:["openHandler"],activeMenuItemIndex:["activeMenuItemIndexHandler"]}]);function U9(){if(typeof customElements>"u")return;["calcite-action-menu","calcite-action","calcite-icon","calcite-loader","calcite-popover"].forEach(e=>{switch(e){case"calcite-action-menu":customElements.get(e)||customElements.define(e,sbe);break;case"calcite-action":customElements.get(e)||Gw();break;case"calcite-icon":customElements.get(e)||js();break;case"calcite-loader":customElements.get(e)||kd();break;case"calcite-popover":customElements.get(e)||gM();break}})}U9();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */const sL={scrim:"scrim",content:"content"},oL={s:72,l:480},obe=":host{--calcite-scrim-background:var(--calcite-color-transparent-scrim);position:absolute;inset:0px;z-index:var(--calcite-z-index-overlay);display:flex;block-size:100%;inline-size:100%;flex-direction:column;align-items:stretch}@keyframes calcite-scrim-fade-in{0%{--tw-bg-opacity:0}100%{--tw-text-opacity:1}}.scrim{position:absolute;inset:0px;display:flex;flex-direction:column;align-content:center;align-items:center;justify-content:center;overflow:hidden;animation:calcite-scrim-fade-in var(--calcite-internal-animation-timing-medium) ease-in-out;background-color:var(--calcite-scrim-background, var(--calcite-color-transparent-scrim))}.content{padding:1rem}:host([hidden]){display:none}[hidden]{display:none}",abe=Ct(class extends It{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.resizeObserver=ii("resize",()=>this.handleResize()),this.handleDefaultSlotChange=e=>{this.hasContent=Ehe(e)},this.storeLoaderEl=e=>{this.loaderEl=e,this.handleResize()},this.loading=!1,this.messages=void 0,this.messageOverrides=void 0,this.loaderScale=void 0,this.defaultMessages=void 0,this.effectiveLocale="",this.hasContent=!1}onMessagesChange(){}effectiveLocaleChange(){Ds(this,this.effectiveLocale)}connectedCallback(){var e;Ps(this),Fs(this),(e=this.resizeObserver)==null||e.observe(this.el)}async componentWillLoad(){await Ns(this)}disconnectedCallback(){var e;Rs(this),zs(this),(e=this.resizeObserver)==null||e.disconnect()}render(){const{hasContent:e,loading:i,messages:n}=this;return k("div",{class:sL.scrim},i?k("calcite-loader",{label:n.loading,scale:this.loaderScale,ref:this.storeLoaderEl}):null,k("div",{class:sL.content,hidden:!e},k("slot",{onSlotchange:this.handleDefaultSlotChange})))}getScale(e){return e<oL.s?"s":e>=oL.l?"l":"m"}handleResize(){const{loaderEl:e,el:i}=this;e&&(this.loaderScale=this.getScale(Math.min(i.clientHeight,i.clientWidth)??0))}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return obe}},[1,"calcite-scrim",{loading:[516],messages:[1040],messageOverrides:[1040],loaderScale:[32],defaultMessages:[32],effectiveLocale:[32],hasContent:[32]},void 0,{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function H9(){if(typeof customElements>"u")return;["calcite-scrim","calcite-loader"].forEach(e=>{switch(e){case"calcite-scrim":customElements.get(e)||customElements.define(e,abe);break;case"calcite-loader":customElements.get(e)||kd();break}})}H9();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */const Ii={actionBarContainer:"action-bar-container",backButton:"back-button",container:"container",header:"header",headerContainer:"header-container",headerContainerBorderEnd:"header-container--border-end",heading:"heading",summary:"summary",description:"description",headerContent:"header-content",headerActions:"header-actions",headerActionsEnd:"header-actions--end",headerActionsStart:"header-actions--start",contentWrapper:"content-wrapper",fabContainer:"fab-container",footer:"footer"},T0={close:"x",menu:"ellipsis",backLeft:"chevron-left",backRight:"chevron-right",expand:"chevron-down",collapse:"chevron-up"},dl={actionBar:"action-bar",headerActionsStart:"header-actions-start",headerActionsEnd:"header-actions-end",headerMenuActions:"header-menu-actions",headerContent:"header-content",fab:"fab",footer:"footer",footerActions:"footer-actions"},lbe=":host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{position:relative;display:flex;block-size:100%;inline-size:100%;flex:1 1 auto;--calcite-min-header-height:calc(var(--calcite-icon-size) * 3)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.header{margin:0px;display:flex;align-content:space-between;align-items:center;fill:var(--calcite-color-text-2);color:var(--calcite-color-text-2)}.heading{margin:0px;padding:0px;font-weight:var(--calcite-font-weight-medium)}.header .heading{flex:1 1 auto;padding:0.5rem}.container{margin:0px;display:flex;inline-size:100%;flex:1 1 auto;flex-direction:column;align-items:stretch;background-color:var(--calcite-color-background);padding:0px;transition:max-block-size var(--calcite-animation-timing), inline-size var(--calcite-animation-timing)}.container[hidden]{display:none}.header{z-index:var(--calcite-z-index-header);display:flex;flex-direction:column;background-color:var(--calcite-color-foreground-1);border-block-end:var(--calcite-panel-header-border-block-end, 1px solid var(--calcite-color-border-3))}.header-container{display:flex;inline-size:100%;flex-direction:row;align-items:stretch;justify-content:flex-start;flex:0 0 auto}.header-container--border-end{border-block-end:1px solid var(--calcite-color-border-3)}.action-bar-container{inline-size:100%}.action-bar-container ::slotted(calcite-action-bar){inline-size:100%}.header-content{display:flex;flex-direction:column;overflow:hidden;padding-inline:0.75rem;padding-block:0.875rem;margin-inline-end:auto}.header-content .heading,.header-content .description{display:block;overflow-wrap:break-word;padding:0px}.header-content .heading{margin-inline:0px;margin-block:0px 0.25rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;font-weight:var(--calcite-font-weight-medium)}.header-content .heading:only-child{margin-block-end:0px}.header-content .description{font-size:var(--calcite-font-size--1);line-height:1rem;color:var(--calcite-color-text-2)}.back-button{border-width:0px;border-style:solid;border-color:var(--calcite-color-border-3);border-inline-end-width:1px}.header-actions{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:stretch}.header-actions--end{margin-inline-start:auto}.content-wrapper{display:flex;block-size:100%;flex:1 1 auto;flex-direction:column;flex-wrap:nowrap;align-items:stretch;overflow:auto;background-color:var(--calcite-color-background)}.footer{display:flex;inline-size:100%;justify-content:space-evenly;background-color:var(--calcite-color-foreground-1);flex:0 0 auto;padding:var(--calcite-panel-footer-padding, 0.5rem);border-block-start:1px solid var(--calcite-color-border-3)}.fab-container{position:sticky;inset-block-end:0px;z-index:var(--calcite-z-index-sticky);margin-block:0px;margin-inline:auto;display:block;padding:0.5rem;inset-inline:0;inline-size:-moz-fit-content;inline-size:fit-content}:host([hidden]){display:none}[hidden]{display:none}",cbe=Ct(class extends It{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calcitePanelClose=$e(this,"calcitePanelClose",6),this.calcitePanelToggle=$e(this,"calcitePanelToggle",6),this.calcitePanelScroll=$e(this,"calcitePanelScroll",6),this.resizeObserver=ii("resize",()=>this.resizeHandler()),this.resizeHandler=()=>{const{panelScrollEl:e}=this;!e||typeof e.scrollHeight!="number"||typeof e.offsetHeight!="number"||(e.tabIndex=e.scrollHeight>e.offsetHeight?0:-1)},this.setContainerRef=e=>{this.containerEl=e},this.panelKeyDownHandler=e=>{this.closable&&e.key==="Escape"&&!e.defaultPrevented&&(this.close(),e.preventDefault())},this.close=()=>{this.closed=!0,this.calcitePanelClose.emit()},this.collapse=()=>{this.collapsed=!this.collapsed,this.calcitePanelToggle.emit()},this.panelScrollHandler=()=>{this.calcitePanelScroll.emit()},this.handleHeaderActionsStartSlotChange=e=>{this.hasStartActions=ui(e)},this.handleHeaderActionsEndSlotChange=e=>{this.hasEndActions=ui(e)},this.handleHeaderMenuActionsSlotChange=e=>{this.hasMenuItems=ui(e)},this.handleActionBarSlotChange=e=>{const i=Jh(e).filter(n=>n==null?void 0:n.matches("calcite-action-bar"));i.forEach(n=>n.layout="horizontal"),this.hasActionBar=!!i.length},this.handleHeaderContentSlotChange=e=>{this.hasHeaderContent=ui(e)},this.handleFooterSlotChange=e=>{this.hasFooterContent=ui(e)},this.handleFooterActionsSlotChange=e=>{this.hasFooterActions=ui(e)},this.handleFabSlotChange=e=>{this.hasFab=ui(e)},this.setPanelScrollEl=e=>{var i,n;this.panelScrollEl=e,(i=this.resizeObserver)==null||i.disconnect(),e&&((n=this.resizeObserver)==null||n.observe(e),this.resizeHandler())},this.closed=!1,this.disabled=!1,this.closable=!1,this.collapsed=!1,this.collapseDirection="down",this.collapsible=!1,this.headingLevel=void 0,this.loading=!1,this.heading=void 0,this.description=void 0,this.menuOpen=!1,this.messageOverrides=void 0,this.messages=void 0,this.hasStartActions=!1,this.hasEndActions=!1,this.hasMenuItems=!1,this.hasHeaderContent=!1,this.hasActionBar=!1,this.hasFooterContent=!1,this.hasFooterActions=!1,this.hasFab=!1,this.defaultMessages=void 0,this.effectiveLocale="",this.showHeaderContent=!1}onMessagesChange(){}connectedCallback(){Lc(this),Ps(this),Fs(this)}async componentWillLoad(){zo(this),await Ns(this)}componentDidLoad(){jo(this)}componentDidRender(){Ac(this)}disconnectedCallback(){var e;Pc(this),Rs(this),zs(this),(e=this.resizeObserver)==null||e.disconnect()}effectiveLocaleChange(){Ds(this,this.effectiveLocale)}async setFocus(){await Go(this),k8(this.containerEl)}async scrollContentTo(e){var i;(i=this.panelScrollEl)==null||i.scrollTo(e)}renderHeaderContent(){const{heading:e,headingLevel:i,description:n,hasHeaderContent:r}=this,s=e?k(G9,{class:Ii.heading,level:i},e):null,o=n?k("span",{class:Ii.description},n):null;return!r&&(s||o)?k("div",{class:Ii.headerContent,key:"header-content"},s,o):null}renderActionBar(){return k("div",{class:Ii.actionBarContainer,hidden:!this.hasActionBar},k("slot",{name:dl.actionBar,onSlotchange:this.handleActionBarSlotChange}))}renderHeaderSlottedContent(){return k("div",{class:Ii.headerContent,hidden:!this.hasHeaderContent,key:"slotted-header-content"},k("slot",{name:dl.headerContent,onSlotchange:this.handleHeaderContentSlotChange}))}renderHeaderStartActions(){const{hasStartActions:e}=this;return k("div",{class:{[Ii.headerActionsStart]:!0,[Ii.headerActions]:!0},hidden:!e,key:"header-actions-start"},k("slot",{name:dl.headerActionsStart,onSlotchange:this.handleHeaderActionsStartSlotChange}))}renderHeaderActionsEnd(){const{hasEndActions:e,messages:i,closable:n,collapsed:r,collapseDirection:s,collapsible:o,hasMenuItems:a}=this,{collapse:l,expand:u,close:p}=i,f=[T0.expand,T0.collapse];s==="up"&&f.reverse();const m=o?k("calcite-action",{"aria-expanded":Ui(!r),"aria-label":l,"data-test":"collapse",icon:r?f[0]:f[1],onClick:this.collapse,text:l,title:r?u:l}):null,g=n?k("calcite-action",{"aria-label":p,"data-test":"close",icon:T0.close,onClick:this.close,text:p,title:p}):null,y=k("slot",{name:dl.headerActionsEnd,onSlotchange:this.handleHeaderActionsEndSlotChange}),v=e||m||g||a;return k("div",{class:{[Ii.headerActionsEnd]:!0,[Ii.headerActions]:!0},hidden:!v,key:"header-actions-end"},y,this.renderMenu(),m,g)}renderMenu(){const{hasMenuItems:e,messages:i,menuOpen:n}=this;return k("calcite-action-menu",{flipPlacements:["top","bottom"],hidden:!e,key:"menu",label:i.options,open:n,placement:"bottom-end"},k("calcite-action",{icon:T0.menu,slot:uT.trigger,text:i.options}),k("slot",{name:dl.headerMenuActions,onSlotchange:this.handleHeaderMenuActionsSlotChange}))}renderHeaderNode(){const{hasHeaderContent:e,hasStartActions:i,hasEndActions:n,closable:r,collapsible:s,hasMenuItems:o,hasActionBar:a}=this,l=this.renderHeaderContent(),u=e||!!l||i||n||s||r||o;return this.showHeaderContent=u,k("header",{class:Ii.header,hidden:!(u||a)},k("div",{class:{[Ii.headerContainer]:!0,[Ii.headerContainerBorderEnd]:a},hidden:!u},this.renderHeaderStartActions(),this.renderHeaderSlottedContent(),l,this.renderHeaderActionsEnd()),this.renderActionBar())}renderFooterNode(){const{hasFooterContent:e,hasFooterActions:i}=this,n=e||i;return k("footer",{class:Ii.footer,hidden:!n},k("slot",{key:"footer-slot",name:dl.footer,onSlotchange:this.handleFooterSlotChange}),k("slot",{key:"footer-actions-slot",name:dl.footerActions,onSlotchange:this.handleFooterActionsSlotChange}))}renderContent(){return k("div",{class:Ii.contentWrapper,hidden:this.collapsible&&this.collapsed,onScroll:this.panelScrollHandler,ref:this.setPanelScrollEl},k("slot",null),this.renderFab())}renderFab(){return k("div",{class:Ii.fabContainer,hidden:!this.hasFab},k("slot",{name:dl.fab,onSlotchange:this.handleFabSlotChange}))}render(){const{loading:e,panelKeyDownHandler:i,closed:n,closable:r}=this,s=k("article",{"aria-busy":Ui(e),class:Ii.container,hidden:n,onKeyDown:i,tabIndex:r?0:-1,ref:this.setContainerRef},this.renderHeaderNode(),this.renderContent(),this.renderFooterNode());return k(Yg,null,e?k("calcite-scrim",{loading:e}):null,s)}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return lbe}},[1,"calcite-panel",{closed:[1540],disabled:[516],closable:[516],collapsed:[516],collapseDirection:[1,"collapse-direction"],collapsible:[516],headingLevel:[514,"heading-level"],loading:[516],heading:[1],description:[1],menuOpen:[516,"menu-open"],messageOverrides:[1040],messages:[1040],hasStartActions:[32],hasEndActions:[32],hasMenuItems:[32],hasHeaderContent:[32],hasActionBar:[32],hasFooterContent:[32],hasFooterActions:[32],hasFab:[32],defaultMessages:[32],effectiveLocale:[32],showHeaderContent:[32],setFocus:[64],scrollContentTo:[64]},void 0,{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function ube(){if(typeof customElements>"u")return;["calcite-panel","calcite-action","calcite-action-menu","calcite-icon","calcite-loader","calcite-popover","calcite-scrim"].forEach(e=>{switch(e){case"calcite-panel":customElements.get(e)||customElements.define(e,cbe);break;case"calcite-action":customElements.get(e)||Gw();break;case"calcite-action-menu":customElements.get(e)||U9();break;case"calcite-icon":customElements.get(e)||js();break;case"calcite-loader":customElements.get(e)||kd();break;case"calcite-popover":customElements.get(e)||gM();break;case"calcite-scrim":customElements.get(e)||H9();break}})}ube();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */var dT;(function(t){t.brand="lightbulb",t.danger="exclamationMarkTriangle",t.info="information",t.success="checkCircle",t.warning="exclamationMarkTriangle"})(dT||(dT={}));/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */const hn={title:"title",close:"close",imageContainer:"image-container",chipIcon:"chip-icon",textSlotted:"text--slotted",container:"container",imageSlotted:"image--slotted",closable:"closable",multiple:"multiple",selectable:"selectable",selectIcon:"select-icon",selectIconActive:"select-icon--active",nonInteractive:"non-interactive",isCircle:"is-circle"},dbe={image:"image"},E0={close:"x",unchecked:"circle",checkedSingle:"circle-f",checked:"check-circle-f"},hbe=`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host([scale=s]){block-size:1.5rem;font-size:var(--calcite-font-size--2);--calcite-chip-spacing-s-internal:0.25rem;--calcite-chip-spacing-l-internal:0.5rem}:host([scale=s]) .close,:host([scale=s]) .select-icon--active{block-size:1rem;inline-size:1rem}:host([scale=s]) .image-container{block-size:1.25rem;inline-size:1.25rem}:host([scale=s]) .container.is-circle{block-size:1.5rem;inline-size:1.5rem}:host([scale=m]){block-size:2rem;font-size:var(--calcite-font-size--1);--calcite-chip-spacing-s-internal:0.375rem;--calcite-chip-spacing-l-internal:0.5rem}:host([scale=m]) .close,:host([scale=m]) .image-container,:host([scale=m]) .select-icon--active{block-size:1.5rem;inline-size:1.5rem}:host([scale=m]) .container.is-circle{block-size:2rem;inline-size:2rem}:host([scale=l]){block-size:2.75rem;font-size:var(--calcite-font-size-0);--calcite-chip-spacing-s-internal:0.5rem;--calcite-chip-spacing-l-internal:0.75rem}:host([scale=l]) .image-container,:host([scale=l]) .close,:host([scale=l]) .select-icon--active{block-size:2rem;inline-size:2rem}:host([scale=l]) .container.is-circle{block-size:2.75rem;inline-size:2.75rem}:host{display:inline-flex;cursor:default;border-radius:9999px}.container{box-sizing:border-box;display:inline-flex;block-size:100%;max-inline-size:100%;align-items:center;justify-content:center;border-radius:9999px;border-width:1px;border-style:solid;border-color:var(--calcite-color-border-1);font-weight:var(--calcite-font-weight-medium);outline-color:transparent}.container:not(.is-circle){padding-inline:var(--calcite-chip-spacing-s-internal)}.container.selectable{cursor:pointer}.container:not(.non-interactive):focus{outline:2px solid var(--calcite-color-brand);outline-offset:calc(
            2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}:host([scale=s]) .container.image--slotted{padding-inline-start:calc(0.125rem / 2)}:host([scale=s]) .container.is-circle{padding-inline:0}.container.text--slotted .title{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding-inline:var(--calcite-chip-spacing-s-internal)}.container:not(.text--slotted) .title{display:none}.container:not(.image--slotted) .image-container{display:none}.container.closable{padding-inline-end:calc(var(--calcite-chip-spacing-l-internal) / 2)}.container:not(.is-circle).image--slotted{padding-inline-start:calc(var(--calcite-chip-spacing-l-internal) / 2)}.container:not(.is-circle).image--slotted .image-container{margin-inline-end:var(--calcite-chip-spacing-s-internal)}.container:not(.is-circle).image--slotted .image-container~.chip-icon{margin-inline-start:var(--calcite-chip-spacing-s-internal)}.container:not(.is-circle).selectable:not(.text--slotted) .chip-icon{margin-inline-end:var(--calcite-chip-spacing-s-internal)}.container:not(.is-circle):not(.selectable):not(.text--slotted) .chip-icon{margin-inline-start:var(--calcite-chip-spacing-s-internal)}.container:not(.is-circle):not(.text--slotted) .chip-icon{margin-inline-end:var(--calcite-chip-spacing-s-internal)}.container:not(.is-circle):not(.text-slotted).image--slotted .image-container{margin-inline-end:var(--calcite-chip-spacing-s-internal)}.container:not(.is-circle):not(.closable):not(.text--slotted).image--slotted.selectable .image-container{margin-inline-end:0}.container:not(.is-circle):not(.closable):not(.text--slotted).image--slotted.selectable .image-container~.chip-icon{margin-inline-start:calc(var(--calcite-chip-spacing-s-internal) * 2)}.chip-icon{position:relative;margin-block:0px;display:inline-flex;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);margin-inline:var(--calcite-chip-spacing-s-internal)}.image-container{display:inline-flex;overflow:hidden;align-items:center;justify-content:center;pointer-events:none}.close{margin:0px;cursor:pointer;align-items:center;border-style:none;background-color:transparent;color:var(--calcite-color-text-1);outline-color:transparent;transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;-webkit-appearance:none;display:flex;border-radius:50%;align-content:center;justify-content:center;--calcite-chip-transparent-hover:var(--calcite-color-transparent-hover);--calcite-chip-transparent-press:var(--calcite-color-transparent-press)}.close:hover{background-color:var(--calcite-chip-transparent-hover)}.close:focus{background-color:var(--calcite-chip-transparent-hover);outline:2px solid var(--calcite-color-brand);outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}.close:active{background-color:var(--calcite-chip-transparent-press)}.close calcite-icon{color:inherit}.select-icon{align-self:center;justify-content:center;align-items:center;display:flex;inset-block-start:-1px;position:relative;visibility:hidden;inline-size:0;opacity:0;transition:opacity 0.15s ease-in-out, inline-size 0.15s ease-in-out}.select-icon.select-icon--active{visibility:visible;opacity:0.5}.container:not(.is-circle).image--slotted .select-icon.select-icon--active{margin-inline-end:var(--calcite-chip-spacing-s-internal)}:host([selected]) .select-icon{opacity:1}.container:hover .select-icon--active{opacity:1}slot[name=image]::slotted(*){display:flex;block-size:100%;inline-size:100%;overflow:hidden;border-radius:50%}:host([kind=neutral]){background-color:var(--calcite-color-foreground-2);color:var(--calcite-color-text-1)}:host([kind=neutral]) .container{border-color:transparent}:host([kind=neutral]) .close{color:var(--calcite-color-text-3)}:host([kind=neutral]) .chip-icon{color:var(--calcite-ui-icon-color, var(--calcite-color-text-3))}:host([kind=inverse]){background-color:var(--calcite-color-inverse);color:var(--calcite-color-text-inverse)}:host([kind=inverse]) .container{border-color:transparent}:host([kind=inverse]) .close{color:var(--calcite-color-text-inverse)}:host([kind=inverse]) .chip-icon{color:var(--calcite-ui-icon-color, var(--calcite-color-text-inverse))}:host([kind=brand]){background-color:var(--calcite-color-brand);color:var(--calcite-color-text-inverse)}:host([kind=brand]) .container{border-color:transparent}:host([kind=brand]) .close{color:var(--calcite-color-text-inverse)}:host([kind=brand]) .chip-icon{color:var(--calcite-ui-icon-color, var(--calcite-color-text-inverse))}:host([appearance=outline-fill]),:host([appearance=outline]){background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-1)}:host([appearance=outline-fill]) .close,:host([appearance=outline]) .close{color:var(--calcite-color-text-3)}:host([appearance=outline-fill]) .chip-icon,:host([appearance=outline]) .chip-icon{color:var(--calcite-ui-icon-color, var(--calcite-color-text-3))}:host([appearance=outline-fill]){background-color:var(--calcite-color-foreground-1)}:host([appearance=outline]){background-color:transparent}:host([kind=neutral][appearance=outline-fill]) .container,:host([kind=neutral][appearance=outline]) .container{border-color:var(--calcite-color-border-1)}:host([kind=inverse][appearance=outline-fill]) .container,:host([kind=inverse][appearance=outline]) .container{border-color:var(--calcite-color-border-inverse)}:host([kind=brand][appearance=outline-fill]) .container,:host([kind=brand][appearance=outline]) .container{border-color:var(--calcite-color-brand)}:host([kind=brand][appearance=solid]) button,:host([kind=inverse][appearance=solid]) button{outline-color:var(--calcite-color-text-inverse)}:host([closed]){display:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}:host([hidden]){display:none}[hidden]{display:none}`,pbe=Ct(class extends It{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteChipClose=$e(this,"calciteChipClose",6),this.calciteChipSelect=$e(this,"calciteChipSelect",6),this.calciteInternalChipKeyEvent=$e(this,"calciteInternalChipKeyEvent",6),this.mutationObserver=ii("mutation",()=>this.updateHasText()),this.close=()=>{this.calciteChipClose.emit(),this.selected=!1,this.closed=!0},this.closeButtonKeyDownHandler=e=>{Pk(e.key)&&(e.preventDefault(),this.close())},this.handleSlotImageChange=e=>{this.hasImage=ui(e)},this.handleEmittingEvent=()=>{this.interactive&&this.calciteChipSelect.emit()},this.disabled=!1,this.appearance="solid",this.kind="neutral",this.closable=!1,this.icon=void 0,this.iconFlipRtl=!1,this.scale="m",this.label=void 0,this.value=void 0,this.closed=!1,this.selectionMode="none",this.selected=!1,this.messageOverrides=void 0,this.messages=void 0,this.interactive=!1,this.defaultMessages=void 0,this.effectiveLocale=void 0,this.hasText=!1,this.hasImage=!1}onMessagesChange(){}effectiveLocaleChange(){Ds(this,this.effectiveLocale)}connectedCallback(){var e;fM(this),Lc(this),Ps(this),Fs(this),(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0})}componentDidLoad(){jo(this)}componentDidRender(){Ac(this)}disconnectedCallback(){var e;mM(this),Pc(this),Rs(this),zs(this),(e=this.mutationObserver)==null||e.disconnect()}async componentWillLoad(){zo(this),await Ns(this),this.updateHasText()}keyDownHandler(e){if(e.target===this.el)switch(e.key){case" ":case"Enter":this.handleEmittingEvent(),e.preventDefault();break;case"ArrowRight":case"ArrowLeft":case"Home":case"End":this.calciteInternalChipKeyEvent.emit(e),e.preventDefault();break}}clickHandler(){!this.interactive&&this.closable&&this.closeButtonEl.focus()}async setFocus(){var e,i;await Go(this),!this.disabled&&this.interactive?(e=this.containerEl)==null||e.focus():!this.disabled&&this.closable&&((i=this.closeButtonEl)==null||i.focus())}updateHasText(){this.hasText=this.el.textContent.trim().length>0}renderChipImage(){return k("div",{class:hn.imageContainer},k("slot",{name:dbe.image,onSlotchange:this.handleSlotImageChange}))}renderSelectionIcon(){const e=this.selectionMode==="multiple"&&this.selected?E0.checked:this.selectionMode==="multiple"?E0.unchecked:this.selected?E0.checkedSingle:void 0;return k("div",{class:{[hn.selectIcon]:!0,[hn.selectIconActive]:this.selectionMode==="multiple"||this.selected}},k("calcite-icon",{icon:e,scale:pi(this.scale)}))}renderCloseButton(){return k("button",{"aria-label":this.messages.dismissLabel,class:hn.close,onClick:this.close,onKeyDown:this.closeButtonKeyDownHandler,tabIndex:this.disabled?-1:0,ref:e=>this.closeButtonEl=e},k("calcite-icon",{icon:E0.close,scale:pi(this.scale)}))}renderIcon(){return k("calcite-icon",{class:hn.chipIcon,flipRtl:this.iconFlipRtl,icon:this.icon,scale:pi(this.scale)})}render(){const e=this.disabled||!this.disabled&&!this.interactive,i=this.selectionMode==="multiple"&&this.interactive?"checkbox":this.selectionMode!=="none"&&this.interactive?"radio":this.interactive?"button":void 0;return k(Pn,null,k("div",{"aria-checked":this.selectionMode!=="none"&&this.interactive?Ui(this.selected):void 0,"aria-disabled":e?Ui(this.disabled):void 0,"aria-label":this.label,class:{[hn.container]:!0,[hn.textSlotted]:this.hasText,[hn.imageSlotted]:this.hasImage,[hn.selectable]:this.selectionMode!=="none",[hn.multiple]:this.selectionMode==="multiple",[hn.closable]:this.closable,[hn.nonInteractive]:!this.interactive,[hn.isCircle]:!this.closable&&!this.hasText&&(!this.icon||!this.hasImage)&&(this.selectionMode==="none"||!!this.selectionMode&&this.selectionMode!=="multiple"&&!this.selected)},onClick:this.handleEmittingEvent,role:i,tabIndex:e?-1:0,ref:n=>this.containerEl=n},this.selectionMode!=="none"&&this.renderSelectionIcon(),this.renderChipImage(),this.icon&&this.renderIcon(),k("span",{class:hn.title},k("slot",null)),this.closable&&this.renderCloseButton()))}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return hbe}},[1,"calcite-chip",{disabled:[516],appearance:[513],kind:[513],closable:[516],icon:[513],iconFlipRtl:[516,"icon-flip-rtl"],scale:[513],label:[1],value:[8],closed:[1540],selectionMode:[1,"selection-mode"],selected:[1540],messageOverrides:[1040],messages:[1040],interactive:[4],defaultMessages:[32],effectiveLocale:[32],hasText:[32],hasImage:[32],setFocus:[64]},[[0,"keydown","keyDownHandler"],[0,"click","clickHandler"]],{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function V9(){if(typeof customElements>"u")return;["calcite-chip","calcite-icon"].forEach(e=>{switch(e){case"calcite-chip":customElements.get(e)||customElements.define(e,pbe);break;case"calcite-icon":customElements.get(e)||js();break}})}V9();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */const CS={slow:14e3,medium:1e4,fast:6e3},k0={actionsEnd:"actions-end",title:"title",message:"message",link:"link"},Yr={actionsEnd:"actions-end",close:"close",container:"container",containerBottom:"container--bottom",containerBottomEnd:"container--bottom-end",containerBottomStart:"container--bottom-start",containerQueued:"container--queued",containerTop:"container--top",containerTopEnd:"container--top-end",containerTopStart:"container--top-start",content:"content",contentContainer:"content-container",dismissProgress:"dismiss-progress",footer:"footer",icon:"icon",containerSlottedInShell:"container--slotted-in-shell",queueCount:"queue-count",queueCountActive:"queue-count--active",textContainer:"text-container"},fbe=`:host{--calcite-alert-edge-distance:2rem;--calcite-alert-dismiss-progress-background:var(--calcite-color-transparent-tint);display:block}.container{pointer-events:none;position:fixed;z-index:var(--calcite-z-index-toast);margin-inline:auto;margin-block:0px;box-sizing:border-box;display:flex;inline-size:100%;min-inline-size:min-content;align-items:center;justify-content:center;background-color:var(--calcite-color-foreground-1);text-align:start;opacity:0;--tw-shadow:0 6px 20px -4px rgba(0, 0, 0, 0.1), 0 4px 12px -2px rgba(0, 0, 0, 0.08);--tw-shadow-colored:0 6px 20px -4px var(--tw-shadow-color), 0 4px 12px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);border-radius:var(--calcite-border-radius);border-block-start:0 solid transparent;border-inline:1px solid var(--calcite-color-border-3);border-block-end:1px solid var(--calcite-color-border-3);inline-size:var(--calcite-alert-width);max-inline-size:calc(100% - var(--calcite-alert-edge-distance) * 2);transition:var(--calcite-internal-animation-timing-slow) cubic-bezier(0.215, 0.44, 0.42, 0.88), opacity var(--calcite-internal-animation-timing-slow) cubic-bezier(0.215, 0.44, 0.42, 0.88), all var(--calcite-animation-timing) ease-in-out}.container--bottom,.container--top{inset-inline-end:0;inset-inline-start:0}.container[class*=bottom]{transform:translate3d(0, var(--calcite-alert-edge-distance), 0);inset-block-end:var(--calcite-alert-edge-distance)}.container[class*=top]{transform:translate3d(0, calc(-1 * var(--calcite-alert-edge-distance)), 0);inset-block-start:var(--calcite-alert-edge-distance)}.container[class*=start]{inset-inline-start:var(--calcite-alert-edge-distance);inset-inline-end:auto}.container[class*=end]{inset-inline-end:var(--calcite-alert-edge-distance);inset-inline-start:auto}.icon{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:0px;margin-block:auto;margin-inline-end:auto;padding-inline-start:var(--calcite-alert-spacing-token-large)}.close{display:flex;cursor:pointer;align-items:center;justify-content:flex-end;align-self:stretch;border-style:none;background-color:transparent;color:var(--calcite-color-text-3);outline:2px solid transparent;outline-offset:2px;-webkit-appearance:none;padding:var(--calcite-alert-spacing-token-large);outline-color:transparent}.close:focus{outline:2px solid var(--calcite-color-brand);outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}.close:hover,.close:focus{background-color:var(--calcite-color-foreground-2);color:var(--calcite-color-text-1)}.close:active{background-color:var(--calcite-color-foreground-3)}.queue-count{visibility:hidden;display:flex;min-inline-size:min-content;cursor:default;align-items:center;justify-content:space-around;align-self:stretch;overflow:hidden;background-color:var(--calcite-color-foreground-1);text-align:center;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-2);opacity:0;transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;border-inline:0 solid transparent;border-start-end-radius:0}.queue-count--active{visibility:visible;opacity:1}.dismiss-progress{position:absolute;display:block;inline-size:100%;overflow:hidden;inset-inline:0;inset-block-start:-2px;block-size:2px;border-radius:var(--calcite-border-radius) var(--calcite-border-radius) 0 0}.dismiss-progress:after{position:absolute;inset-block-start:0px;display:block;block-size:2px;content:"";background-color:var(--calcite-alert-dismiss-progress-background);inset-inline-end:0}.actions-end{display:flex;align-self:stretch}.text-container{box-sizing:border-box;display:flex;min-inline-size:0px;flex:1 1 auto;flex-direction:column;overflow-wrap:break-word;padding-block:var(--calcite-alert-spacing-token-small);padding-inline:var(--calcite-alert-spacing-token-large) var(--calcite-alert-spacing-token-small)}.footer{position:relative;display:flex;inline-size:auto;justify-content:flex-end;align-self:stretch;padding-block-start:1px;block-size:inherit}:host([scale=s]){--calcite-alert-width:40em;--calcite-alert-spacing-token-small:0.5rem;--calcite-alert-spacing-token-large:0.75rem;--calcite-alert-footer-height:2rem;--calcite-alert-footer-divider-gap:0.125rem}:host([scale=s]) slot[name=title]::slotted(*),:host([scale=s]) *::slotted([slot=title]){font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=s]) slot[name=message]::slotted(*),:host([scale=s]) *::slotted([slot=message]){font-size:var(--calcite-font-size--2);line-height:1.375}:host([scale=s]) slot[name=link]::slotted(*),:host([scale=s]) *::slotted([slot=link]){font-size:var(--calcite-font-size--2);line-height:1.375}:host([scale=s]) .queue-count{margin-inline:0.5rem}:host([scale=s]) .container{--calcite-alert-min-height:3.5rem}:host([scale=m]){--calcite-alert-width:50em;--calcite-alert-spacing-token-small:0.75rem;--calcite-alert-spacing-token-large:1rem;--calcite-alert-footer-height:3rem;--calcite-alert-footer-divider-gap:0.25rem}:host([scale=m]) slot[name=title]::slotted(*),:host([scale=m]) *::slotted([slot=title]){font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=m]) slot[name=message]::slotted(*),:host([scale=m]) *::slotted([slot=message]){font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=m]) slot[name=link]::slotted(*),:host([scale=m]) *::slotted([slot=link]){font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=m]) .queue-count{margin-inline:0.75rem}:host([scale=m]) .container{--calcite-alert-min-height:4.1875rem}:host([scale=l]){--calcite-alert-width:60em;--calcite-alert-spacing-token-small:1rem;--calcite-alert-spacing-token-large:1.25rem;--calcite-alert-footer-height:4rem;--calcite-alert-footer-divider-gap:0.5rem}:host([scale=l]) slot[name=title]::slotted(*),:host([scale=l]) *::slotted([slot=title]){margin-block-end:0.25rem;font-size:var(--calcite-font-size-1);line-height:1.375}:host([scale=l]) slot[name=message]::slotted(*),:host([scale=l]) *::slotted([slot=message]){font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=l]) slot[name=link]::slotted(*),:host([scale=l]) *::slotted([slot=link]){font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=l]) .queue-count{margin-inline:1rem}:host([scale=l]) .container{--calcite-alert-min-height:5.625rem}:host([open]) .container:not(.container--queued){border-block-start-width:2px;opacity:1;pointer-events:initial}:host([open]) .container:not(.container--queued)[class*=bottom]{transform:translate3d(0, calc(-1 * var(--calcite-alert-edge-distance)), inherit)}:host([open]) .container:not(.container--queued)[class*=top]{transform:translate3d(0, var(--calcite-alert-edge-distance), inherit)}:host([auto-close])>.queue-count{border-inline-end:0 solid transparent}slot[name=title]::slotted(*),*::slotted([slot=title]){font-size:var(--calcite-font-size-0);line-height:1.375;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1)}slot[name=message]::slotted(*),*::slotted([slot=message]){margin:0px;display:inline;font-size:var(--calcite-font-size--1);line-height:1.375;font-weight:var(--calcite-font-weight-normal);color:var(--calcite-color-text-2);margin-inline-end:0.5rem}slot[name=link]::slotted(*),*::slotted([slot=link]){display:inline-flex;color:var(--calcite-color-text-link)}:host([kind=brand]) .container{border-block-start-color:var(--calcite-color-brand)}:host([kind=brand]) .container .icon{color:var(--calcite-color-brand)}:host([kind=info]) .container{border-block-start-color:var(--calcite-color-status-info)}:host([kind=info]) .container .icon{color:var(--calcite-color-status-info)}:host([kind=danger]) .container{border-block-start-color:var(--calcite-color-status-danger)}:host([kind=danger]) .container .icon{color:var(--calcite-color-status-danger)}:host([kind=success]) .container{border-block-start-color:var(--calcite-color-status-success)}:host([kind=success]) .container .icon{color:var(--calcite-color-status-success)}:host([kind=warning]) .container{border-block-start-color:var(--calcite-color-status-warning)}:host([kind=warning]) .container .icon{color:var(--calcite-color-status-warning)}:host([auto-close-duration=fast]) .dismiss-progress:after{animation:dismissProgress 6000ms ease-out}:host(:hover[auto-close-duration=fast]) .dismiss-progress:after{animation-play-state:paused}:host([auto-close-duration=medium]) .dismiss-progress:after{animation:dismissProgress 10000ms ease-out}:host(:hover[auto-close-duration=medium]) .dismiss-progress:after{animation-play-state:paused}:host([auto-close-duration=slow]) .dismiss-progress:after{animation:dismissProgress 14000ms ease-out}:host(:hover[auto-close-duration=slow]) .dismiss-progress:after{animation-play-state:paused}@keyframes dismissProgress{0%{inline-size:0px;opacity:0.75}100%{inline-size:100%;opacity:1}}.container--slotted-in-shell{position:absolute}:host([hidden]){display:none}[hidden]{display:none}:host([calcite-hydrated-hidden]){visibility:hidden !important;pointer-events:none}`,mbe=Ct(class extends It{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteAlertBeforeClose=$e(this,"calciteAlertBeforeClose",6),this.calciteAlertClose=$e(this,"calciteAlertClose",6),this.calciteAlertBeforeOpen=$e(this,"calciteAlertBeforeOpen",6),this.calciteAlertOpen=$e(this,"calciteAlertOpen",6),this.calciteInternalAlertSync=$e(this,"calciteInternalAlertSync",6),this.calciteInternalAlertRegister=$e(this,"calciteInternalAlertRegister",6),this.autoCloseTimeoutId=null,this.totalOpenTime=0,this.totalHoverTime=0,this.openTransitionProp="opacity",this.setTransitionEl=e=>{this.transitionEl=e},this.closeAlert=()=>{this.autoCloseTimeoutId=null,this.queued=!1,this.open=!1,this.queue=this.queue.filter(e=>e!==this.el),this.determineActiveAlert(),this.calciteInternalAlertSync.emit({queue:this.queue})},this.actionsEndSlotChangeHandler=e=>{this.hasEndActions=ui(e)},this.handleMouseOver=()=>{window.clearTimeout(this.autoCloseTimeoutId),this.totalOpenTime=Date.now()-this.initialOpenTime,this.lastMouseOverBegin=Date.now()},this.handleMouseLeave=()=>{const e=Date.now()-this.lastMouseOverBegin,i=CS[this.autoCloseDuration]-this.totalOpenTime+this.totalHoverTime;this.totalHoverTime=this.totalHoverTime?e+this.totalHoverTime:e,this.autoCloseTimeoutId=window.setTimeout(()=>this.closeAlert(),i)},this.open=!1,this.autoClose=!1,this.autoCloseDuration="medium",this.kind="brand",this.icon=void 0,this.iconFlipRtl=!1,this.label=void 0,this.numberingSystem=void 0,this.placement="bottom",this.scale="m",this.messages=void 0,this.messageOverrides=void 0,this.slottedInShell=void 0,this.defaultMessages=void 0,this.effectiveLocale="",this.hasEndActions=!1,this.queue=[],this.queueLength=0,this.queued=!1}openHandler(){ed(this),this.open&&!this.queued&&this.calciteInternalAlertRegister.emit(),this.open||(this.queue=this.queue.filter(e=>e!==this.el),this.calciteInternalAlertSync.emit({queue:this.queue}))}onMessagesChange(){}updateDuration(){this.autoClose&&this.autoCloseTimeoutId&&(window.clearTimeout(this.autoCloseTimeoutId),this.autoCloseTimeoutId=window.setTimeout(()=>this.closeAlert(),CS[this.autoCloseDuration]))}connectedCallback(){Ps(this),Fs(this),this.open&&!this.queued&&this.calciteInternalAlertRegister.emit()}async componentWillLoad(){zo(this),await Ns(this),this.open&&ed(this)}componentDidLoad(){jo(this)}disconnectedCallback(){window.dispatchEvent(new CustomEvent("calciteInternalAlertUnregister",{detail:{alert:this.el}})),window.clearTimeout(this.autoCloseTimeoutId),window.clearTimeout(this.queueTimeout),Rs(this),zs(this),this.slottedInShell=!1}render(){Yi.numberFormatOptions={locale:this.effectiveLocale,numberingSystem:this.numberingSystem,signDisplay:"always"};const{open:e,autoClose:i,label:n,placement:r,queued:s}=this,o=i?"alert":"alertdialog",a=!e,l=A2(dT,this.icon,this.kind),u=this.queueLength>1;return k(Pn,{"aria-hidden":Ui(a),"aria-label":n,"calcite-hydrated-hidden":a,role:o},k("div",{class:{[Yr.container]:!0,[Yr.containerQueued]:s,[`${Yr.container}--${r}`]:!0,[Yr.containerSlottedInShell]:this.slottedInShell},onPointerEnter:this.autoClose&&this.autoCloseTimeoutId?this.handleMouseOver:null,onPointerLeave:this.autoClose&&this.autoCloseTimeoutId?this.handleMouseLeave:null,ref:this.setTransitionEl},l&&this.renderIcon(l),k("div",{class:Yr.textContainer},k("slot",{name:k0.title}),k("slot",{name:k0.message}),k("slot",{name:k0.link})),this.renderActionsEnd(),u?this.renderQueueCount():null,this.renderCloseButton(),e&&!s&&i?k("div",{class:Yr.dismissProgress}):null))}renderCloseButton(){return k("button",{"aria-label":this.messages.close,class:Yr.close,key:"close",onClick:this.closeAlert,type:"button",ref:e=>this.closeButton=e},k("calcite-icon",{icon:"x",scale:pi(this.scale)}))}renderQueueCount(){const e=this.queueLength>2?this.queueLength-1:1,i=Yi.numberFormatter.format(e);return k("div",{class:{[Yr.queueCount]:!0,[Yr.queueCountActive]:this.queueLength>1},key:"queue-count"},k("calcite-chip",{scale:this.scale,value:i},i))}renderActionsEnd(){return k("div",{class:Yr.actionsEnd},k("slot",{name:k0.actionsEnd,onSlotchange:this.actionsEndSlotChangeHandler}))}renderIcon(e){return k("div",{class:Yr.icon},k("calcite-icon",{flipRtl:this.iconFlipRtl,icon:e,scale:pi(this.scale)}))}alertSync(e){this.queue!==e.detail.queue&&(this.queue=e.detail.queue),this.queueLength=this.queue.length,this.determineActiveAlert(),e.stopPropagation()}alertRegister(){this.open&&!this.queue.includes(this.el)&&(this.queued=!0,this.queue.push(this.el)),this.calciteInternalAlertSync.emit({queue:this.queue}),this.determineActiveAlert()}alertUnregister(e){const i=this.queue.filter(n=>n!==e.detail.alert);this.queue=i,window.dispatchEvent(new CustomEvent("calciteInternalAlertSync",{detail:{queue:i}}))}async setFocus(){await Go(this);const e=O2(this.el,{selector:"calcite-link"});if(!(!this.closeButton&&!e)){if(e)return e.setFocus();this.closeButton&&this.closeButton.focus()}}effectiveLocaleChange(){Ds(this,this.effectiveLocale)}determineActiveAlert(){var e;if(((e=this.queue)==null?void 0:e[0])===this.el)this.openAlert(),this.autoClose&&!this.autoCloseTimeoutId&&(this.initialOpenTime=Date.now(),this.autoCloseTimeoutId=window.setTimeout(()=>this.closeAlert(),CS[this.autoCloseDuration]));else return}onBeforeOpen(){this.calciteAlertBeforeOpen.emit()}onOpen(){this.calciteAlertOpen.emit()}onBeforeClose(){this.calciteAlertBeforeClose.emit()}onClose(){this.calciteAlertClose.emit()}openAlert(){window.clearTimeout(this.queueTimeout),this.queueTimeout=window.setTimeout(()=>this.queued=!1,300)}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{open:["openHandler"],messageOverrides:["onMessagesChange"],autoCloseDuration:["updateDuration"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return fbe}},[1,"calcite-alert",{open:[1540],autoClose:[516,"auto-close"],autoCloseDuration:[513,"auto-close-duration"],kind:[513],icon:[520],iconFlipRtl:[516,"icon-flip-rtl"],label:[1],numberingSystem:[513,"numbering-system"],placement:[513],scale:[513],messages:[1040],messageOverrides:[1040],slottedInShell:[1028,"slotted-in-shell"],defaultMessages:[32],effectiveLocale:[32],hasEndActions:[32],queue:[32],queueLength:[32],queued:[32],setFocus:[64]},[[8,"calciteInternalAlertSync","alertSync"],[8,"calciteInternalAlertRegister","alertRegister"],[8,"calciteInternalAlertUnregister","alertUnregister"]],{open:["openHandler"],messageOverrides:["onMessagesChange"],autoCloseDuration:["updateDuration"],effectiveLocale:["effectiveLocaleChange"]}]);function gbe(){if(typeof customElements>"u")return;["calcite-alert","calcite-chip","calcite-icon"].forEach(e=>{switch(e){case"calcite-alert":customElements.get(e)||customElements.define(e,mbe);break;case"calcite-chip":customElements.get(e)||V9();break;case"calcite-icon":customElements.get(e)||js();break}})}gbe();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */const Wc={main:"main",content:"content",contentBehind:"content--behind",footer:"footer",positionedSlotWrapper:"positioned-slot-wrapper",container:"container",contentBehindCenterContent:"center-content"},qs={centerRow:"center-row",panelStart:"panel-start",panelEnd:"panel-end",panelTop:"panel-top",panelBottom:"panel-bottom",header:"header",footer:"footer",alerts:"alerts",sheets:"sheets",modals:"modals"},ybe=":host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host{position:absolute;inset:0px;display:flex;block-size:100%;inline-size:100%;flex-direction:column;overflow:hidden;--calcite-shell-tip-spacing:26vw}.main{position:relative;display:flex;block-size:100%;inline-size:100%;flex:1 1 auto;flex-direction:row;justify-content:space-between;overflow:hidden}.content{display:flex;block-size:100%;inline-size:100%;flex-direction:column;flex-wrap:nowrap;overflow:auto}.content ::slotted(calcite-shell-center-row),.content ::slotted(calcite-panel),.content ::slotted(calcite-flow){flex:1 1 auto;align-self:stretch;max-block-size:unset}.content--behind{position:absolute;inset:0px;border-width:0px;z-index:calc(var(--calcite-z-index) - 1);display:initial}::slotted(calcite-shell-center-row){inline-size:unset}::slotted(.header .heading){font-size:var(--calcite-font-size--2);line-height:1.375;font-weight:var(--calcite-font-weight-normal)}slot[name=panel-end]::slotted(calcite-shell-panel){margin-inline-start:auto}::slotted(calcite-panel),::slotted(calcite-flow){border-width:1px;border-inline-start-width:0px;border-inline-end-width:0px;border-style:solid;border-color:var(--calcite-color-border-3)}slot[name=center-row]::slotted(calcite-shell-center-row:not([detached])),slot[name=panel-top]::slotted(calcite-shell-center-row:not([detached])),slot[name=panel-bottom]::slotted(calcite-shell-center-row:not([detached])){border-inline-start-width:1px;border-inline-end-width:1px;border-color:var(--calcite-color-border-3)}.center-content{display:flex;flex-direction:column;justify-content:space-between;block-size:100%;inline-size:100%;min-inline-size:0}::slotted(calcite-shell-center-row){flex:none;align-self:stretch}::slotted(calcite-tip-manager){position:absolute;z-index:var(--calcite-z-index-toast);box-sizing:border-box}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}::slotted(calcite-tip-manager){animation:in-up var(--calcite-internal-animation-timing-slow) ease-in-out;border-radius:0.25rem;--tw-shadow:0 6px 20px -4px rgba(0, 0, 0, 0.1), 0 4px 12px -2px rgba(0, 0, 0, 0.08);--tw-shadow-colored:0 6px 20px -4px var(--tw-shadow-color), 0 4px 12px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);inset-block-end:0.5rem;inset-inline:var(--calcite-shell-tip-spacing)}slot[name=center-row]::slotted(calcite-shell-center-row),slot[name=panel-bottom]::slotted(calcite-shell-center-row){margin-block-start:auto}slot[name=panel-top]::slotted(calcite-shell-center-row){margin-block-end:auto}.position-wrapper{position:absolute;pointer-events:none;inset:0}:host([hidden]){display:none}[hidden]{display:none}",vbe=Ct(class extends It{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.handleHeaderSlotChange=e=>{this.hasHeader=!!ui(e)},this.handleFooterSlotChange=e=>{this.hasFooter=!!ui(e)},this.handleAlertsSlotChange=e=>{var i;this.hasAlerts=!!ui(e),(i=Jh(e))==null||i.map(n=>{n.nodeName==="CALCITE-ALERT"&&(n.slottedInShell=!0)})},this.handleSheetsSlotChange=e=>{var i;this.hasSheets=!!ui(e),(i=Jh(e))==null||i.map(n=>{n.nodeName==="CALCITE-SHEET"&&(n.slottedInShell=!0)})},this.handleModalsSlotChange=e=>{var i;this.hasModals=!!ui(e),(i=Jh(e))==null||i.map(n=>{n.nodeName==="CALCITE-MODAL"&&(n.slottedInShell=!0)})},this.contentBehind=!1,this.hasHeader=!1,this.hasFooter=!1,this.hasAlerts=!1,this.hasModals=!1,this.hasSheets=!1}connectedCallback(){fM(this)}disconnectedCallback(){mM(this)}renderHeader(){return k("div",{hidden:!this.hasHeader},k("slot",{key:"header",name:qs.header,onSlotchange:this.handleHeaderSlotChange}))}renderFooter(){return k("div",{class:Wc.footer,hidden:!this.hasFooter,key:"footer"},k("slot",{name:qs.footer,onSlotchange:this.handleFooterSlotChange}))}renderAlerts(){return k("div",{hidden:!this.hasAlerts},k("slot",{key:"alerts",name:qs.alerts,onSlotchange:this.handleAlertsSlotChange}))}renderSheets(){return k("div",{hidden:!this.hasSheets},k("slot",{key:"sheets",name:qs.sheets,onSlotchange:this.handleSheetsSlotChange}))}renderModals(){return k("div",{hidden:!this.hasModals},k("slot",{key:"modals",name:qs.modals,onSlotchange:this.handleModalsSlotChange}))}renderContent(){const e=k("slot",{key:"default-slot"}),i=k("slot",{key:"center-row-slot",name:qs.centerRow}),n=k("slot",{key:"panel-bottom-slot",name:qs.panelBottom}),r=k("slot",{key:"panel-top-slot",name:qs.panelTop}),s="content-container";return this.contentBehind?[k("div",{class:{[Wc.content]:!0,[Wc.contentBehind]:!0},key:s},e),k("div",{class:Wc.contentBehindCenterContent},r,n,i)]:[k("div",{class:Wc.content,key:s},r,e,n,i)]}renderMain(){return k("div",{class:Wc.main},k("slot",{name:qs.panelStart}),this.renderContent(),k("slot",{name:qs.panelEnd}))}renderPositionedSlots(){return k("div",{class:Wc.positionedSlotWrapper},this.renderAlerts(),this.renderModals(),this.renderSheets())}render(){return k(Yg,null,this.renderHeader(),this.renderMain(),this.renderFooter(),this.renderPositionedSlots())}get el(){return this}static get style(){return ybe}},[1,"calcite-shell",{contentBehind:[516,"content-behind"],hasHeader:[32],hasFooter:[32],hasAlerts:[32],hasModals:[32],hasSheets:[32]}]);function bbe(){if(typeof customElements>"u")return;["calcite-shell"].forEach(e=>{switch(e){case"calcite-shell":customElements.get(e)||customElements.define(e,vbe);break}})}bbe();function wbe(t){let e,i,n,r,s,o,a,l,u,p,f,m,g,y;return o=new $ve({}),l=new Ave({}),l.$on("add-layer",t[0]),p=new Sme({}),p.$on("copy",t[0]),g=new ude({}),{c(){e=fe("main"),i=fe("calcite-shell"),n=fe("calcite-alert"),n.innerHTML='<div slot="message" name="alertMessage" id="alertMessage"></div> <div slot="title" name="alertTitle" id="alertTitle"></div>',r=ci(),s=fe("calcite-shell-panel"),_f(o.$$.fragment),a=ci(),_f(l.$$.fragment),u=ci(),_f(p.$$.fragment),f=ci(),m=fe("calcite-panel"),_f(g.$$.fragment),Q(n,"id","copyAlert"),Q(n,"auto-close",""),Q(n,"auto-close-duration","fast"),Q(n,"placement","bottom-start"),Q(s,"slot","panel-end"),Q(s,"position","end"),Q(s,"id","shell-panel-start")},m(v,b){Sc(v,e,b),ne(e,i),ne(i,n),ne(i,r),ne(i,s),Mh(o,s,null),ne(s,a),Mh(l,s,null),ne(s,u),Mh(p,s,null),ne(i,f),ne(i,m),Mh(g,m,null),y=!0},p:Dt,i(v){y||(kh(o.$$.fragment,v),kh(l.$$.fragment,v),kh(p.$$.fragment,v),kh(g.$$.fragment,v),y=!0)},o(v){wf(o.$$.fragment,v),wf(l.$$.fragment,v),wf(p.$$.fragment,v),wf(g.$$.fragment,v),y=!1},d(v){v&&Wa(e),Ch(o),Ch(l),Ch(p),Ch(g)}}}function _be(t){return[i=>{const n=document.getElementById("copyAlert");n.setAttribute("icon","copy-to-clipboard"),n.setAttribute("kind","success"),document.getElementById("alertTitle").innerHTML="Copy value",document.getElementById("alertMessage").innerHTML=`${i.detail.label} <b>${i.detail.value}</b> copied to the clipboard`,n.open=!0}]}class Sbe extends Ep{constructor(e){super(),Tp(this,e,_be,wbe,bd,{})}}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */function aL(){const{classList:t}=document.body,e=window.matchMedia("(prefers-color-scheme: dark)").matches,i=()=>t.contains(m8)||t.contains(f8)&&e?"dark":"light",n=o=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:o}})),r=o=>{s!==o&&n(o),s=o};let s=i();n(s),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o=>r(o.matches?"dark":"light")),new MutationObserver(()=>r(i())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}function $be(){typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document&&(document.readyState==="interactive"?aL():document.addEventListener("DOMContentLoaded",()=>aL(),{once:!0}))}const xbe=$be;xbe();dde(location.href);new Sbe({target:document.getElementById("app")});export{nN as $,sD as A,Lr as B,Zm as C,z as D,Mv as E,GL as F,Kt as G,HF as H,Gi as I,dk as J,e7 as K,Zbe as L,Bm as M,lH as N,$t as O,De as P,tn as Q,En as R,YS as S,rd as T,Ky as U,te as V,iN as W,tN as X,eN as Y,nE as Z,V as _,W_e as a,he as a$,Zwe as a0,xF as a1,vq as a2,Wu as a3,Ih as a4,wm as a5,xE as a6,fi as a7,P0 as a8,C$ as a9,S$e as aA,Rwe as aB,gwe as aC,Ag as aD,_d as aE,Ar as aF,Sd as aG,bT as aH,gc as aI,iSe as aJ,kB as aK,yw as aL,coe as aM,ie as aN,w2e as aO,S2e as aP,D2e as aQ,y6 as aR,hae as aS,b2e as aT,M2e as aU,N2e as aV,oae as aW,cD as aX,ir as aY,sP as aZ,at as a_,Or as aa,fp as ab,Ja as ac,Vg as ad,Bg as ae,Ae as af,X as ag,q as ah,mj as ai,fee as aj,mee as ak,lc as al,ASe as am,$te as an,NSe as ao,DSe as ap,ISe as aq,Xm as ar,yE as as,zi as at,pU as au,RSe as av,vSe as aw,SK as ax,Is as ay,rO as az,U1e as b,Ume as b$,Mn as b0,Tr as b1,L1 as b2,Ve as b3,u_e as b4,fc as b5,UX as b6,GSe as b7,d_e as b8,WD as b9,dxe as bA,Qe as bB,J_e as bC,N1e as bD,Ra as bE,aN as bF,lD as bG,SH as bH,No as bI,Rye as bJ,KD as bK,uxe as bL,Ga as bM,n4 as bN,kSe as bO,Rte as bP,Sb as bQ,_b as bR,tte as bS,MSe as bT,jL as bU,ySe as bV,rw as bW,u$ as bX,SJ as bY,wd as bZ,Gme as b_,USe as ba,ub as bb,m_e as bc,LSe as bd,PSe as be,f_e as bf,p_e as bg,h_e as bh,Ie as bi,Me as bj,Et as bk,Ta as bl,xe as bm,ti as bn,qg as bo,f9 as bp,Ne as bq,Fye as br,Ig as bs,ap as bt,Ic as bu,Gg as bv,G1e as bw,z$e as bx,Lm as by,Gx as bz,k9 as c,Yge as c$,Xl as c0,Oo as c1,Td as c2,J1 as c3,An as c4,nc as c5,ESe as c6,Le as c7,Ka as c8,Io as c9,pge as cA,tr as cB,In as cC,kt as cD,gi as cE,qe as cF,Dr as cG,Do as cH,Mg as cI,sd as cJ,jbe as cK,QG as cL,rn as cM,kn as cN,OEe as cO,Zge as cP,REe as cQ,xi as cR,jj as cS,NEe as cT,Cp as cU,ks as cV,DEe as cW,lB as cX,MR as cY,FEe as cZ,EEe as c_,Cn as ca,Os as cb,n$ as cc,vt as cd,i$ as ce,s$ as cf,Xv as cg,k5 as ch,Xw as ci,UE as cj,sO as ck,Jwe as cl,n$e as cm,x$e as cn,WEe as co,RE as cp,OTe as cq,I2e as cr,ple as cs,z2e as ct,Tm as cu,zM as cv,b_e as cw,KG as cx,Ng as cy,se as cz,Xie as d,Hue as d$,Vj as d0,aS as d1,pt as d2,SD as d3,Ec as d4,vR as d5,GEe as d6,LEe as d7,xD as d8,ic as d9,O1 as dA,bP as dB,b1 as dC,BE as dD,ow as dE,rg as dF,KL as dG,Zn as dH,_ie as dI,RT as dJ,Sie as dK,pk as dL,M1 as dM,F1e as dN,V1e as dO,M$e as dP,fwe as dQ,wge as dR,Va as dS,iB as dT,BV as dU,WV as dV,xn as dW,Kn as dX,qV as dY,gR as dZ,Kz as d_,Mo as da,Ej as db,Ms as dc,pV as dd,VT as de,BT as df,fV as dg,Tg as dh,Eg as di,Dw as dj,gz as dk,Vi as dl,nb as dm,fB as dn,mB as dp,_B as dq,EB as dr,TR as ds,ER as dt,TB as du,AB as dv,YT as dw,pB as dx,Mj as dy,fge as dz,Ye as e,KEe as e$,b$e as e0,a$e as e1,qwe as e2,zwe as e3,vm as e4,AS as e5,uoe as e6,_L as e7,me as e8,Lt as e9,uV as eA,Nye as eB,OSe as eC,Cg as eD,qm as eE,Tte as eF,jSe as eG,xte as eH,zSe as eI,BB as eJ,I1 as eK,db as eL,Bbe as eM,kH as eN,np as eO,DT as eP,s7 as eQ,Bq as eR,lxe as eS,F2e as eT,C2e as eU,Kye as eV,Jye as eW,_c as eX,uM as eY,Bp as eZ,iEe as e_,gF as ea,Fa as eb,Ce as ec,Iw as ed,On as ee,iW as ef,Mwe as eg,Wk as eh,_s as ei,yC as ej,NR as ek,R1 as el,Ut as em,ji as en,xA as eo,et as ep,di as eq,v2e as er,L2e as es,P2e as et,$2e as eu,x2e as ev,_le as ew,_$e as ex,Jn as ey,l7 as ez,xt as f,VF as f$,ZEe as f0,S1 as f1,G7 as f2,cM as f3,Ee as f4,$L as f5,c1e as f6,l1e as f7,Yl as f8,BP as f9,E$e as fA,Ibe as fB,K_e as fC,vg as fD,aQ as fE,yD as fF,vD as fG,VX as fH,g2e as fI,FSe as fJ,hw as fK,pw as fL,T1 as fM,r2e as fN,mSe as fO,Gee as fP,Zee as fQ,xc as fR,Za as fS,R1e as fT,W1e as fU,hc as fV,DH as fW,OT as fX,$c as fY,mv as fZ,bxe as f_,xg as fa,Wme as fb,Zme as fc,nr as fd,lw as fe,LE as ff,ITe as fg,Qv as fh,PE as fi,aD as fj,c_e as fk,Fwe as fl,MJ as fm,Wwe as fn,Nwe as fo,sre as fp,vC as fq,Sr as fr,Vm as fs,$r as ft,zt as fu,$g as fv,Vbe as fw,k$e as fx,Lh as fy,d$e as fz,en as g,td as g$,l2 as g0,yp as g1,Yre as g2,BF as g3,Roe as g4,qk as g5,sb as g6,oP as g7,_T as g8,Xre as g9,c$ as gA,Rt as gB,qB as gC,H2 as gD,Q1e as gE,ewe as gF,twe as gG,iwe as gH,nwe as gI,rwe as gJ,y2e as gK,C1e as gL,M1e as gM,tU as gN,cc as gO,xT as gP,U$e as gQ,n_e as gR,Aa as gS,T1e as gT,Cq as gU,tB as gV,Wre as gW,ei as gX,Kre as gY,g1 as gZ,y1 as g_,FM as ga,Ge as gb,Twe as gc,Kwe as gd,Nq as ge,Awe as gf,gq as gg,p$ as gh,St as gi,H$e as gj,B$e as gk,Z_e as gl,cw as gm,XE as gn,YE as go,aw as gp,QE as gq,JE as gr,Hg as gs,G$e as gt,O2e as gu,F$e as gv,i_e as gw,wA as gx,RV as gy,Cr as gz,Nre as h,zEe as h$,$f as h0,Uj as h1,DR as h2,op as h3,R2e as h4,cV as h5,ZI as h6,Y_e as h7,Fh as h8,Fbe as h9,mwe as hA,bre as hB,AR as hC,aq as hD,Qbe as hE,WU as hF,XU as hG,NS as hH,tH as hI,Tn as hJ,x_ as hK,gD as hL,Kbe as hM,ew as hN,zbe as hO,Abe as hP,Mr as hQ,g1e as hR,er as hS,Xe as hT,ny as hU,TEe as hV,$D as hW,xge as hX,CB as hY,$ge as hZ,Gj as h_,ry as ha,Rge as hb,Bge as hc,A2e as hd,Nee as he,Ree as hf,Oee as hg,zI as hh,FJ as hi,gT as hj,yT as hk,As as hl,pp as hm,bSe as hn,wSe as ho,Ha as hp,qbe as hq,Xwe as hr,Gh as hs,AH as ht,ko as hu,Qme as hv,cxe as hw,Sle as hx,_2e as hy,Sg as hz,Ju as i,bge as i$,Oj as i0,xEe as i1,Ow as i2,nTe as i3,jge as i4,JT as i5,kR as i6,kw as i7,aSe as i8,Pr as i9,Obe as iA,ye as iB,sN as iC,qu as iD,mD as iE,j$e as iF,sn as iG,hSe as iH,k$ as iI,_J as iJ,w_e as iK,I as iL,_5 as iM,Q1 as iN,NV as iO,DV as iP,mR as iQ,oB as iR,LV as iS,jQ as iT,eee as iU,Bre as iV,uC as iW,K1e as iX,sse as iY,fse as iZ,PV as i_,Tke as ia,mQ as ib,ice as ic,TA as id,Xce as ie,br as ig,Jme as ih,iF as ii,hxe as ij,pxe as ik,NJ as il,oEe as im,nEe as io,sEe as ip,$T as iq,$h as ir,fxe as is,IQ as it,swe as iu,B1e as iv,ST as iw,tSe as ix,IL as iy,OL as iz,dd as j,nn as j$,tee as j0,TQ as j1,gSe as j2,kb as j3,jR as j4,Pq as j5,Nge as j6,yEe as j7,Je as j8,HL as j9,u1e as jA,d1e as jB,eSe as jC,Cbe as jD,Co as jE,XR as jF,Ywe as jG,_q as jH,Owe as jI,cie as jJ,yz as jK,kg as jL,C1 as jM,rq as jN,dq as jO,A1 as jP,xwe as jQ,Vwe as jR,J7 as jS,v1e as jT,y1e as jU,b1e as jV,Y7 as jW,Dbe as jX,XG as jY,Gwe as jZ,jte as j_,_Se as ja,rEe as jb,bwe as jc,E9 as jd,Qce as je,ng as jf,r6 as jg,Ww as jh,hle as ji,k2e as jj,ule as jk,T2e as jl,E2e as jm,D6 as jn,Lbe as jo,dC as jp,gs as jq,E5 as jr,c7 as js,HE as jt,s$e as ju,i$e as jv,vj as jw,w as jx,J1e as jy,bg as jz,J as k,Gye as k$,Ln as k0,A as k1,bE as k2,Uy as k3,Rm as k4,AL as k5,D1e as k6,aH as k7,k1 as k8,q1e as k9,YM as kA,E4 as kB,GF as kC,dne as kD,cF as kE,Mbe as kF,og as kG,une as kH,nk as kI,uw as kJ,II as kK,O$e as kL,C$e as kM,nX as kN,v1 as kO,n2 as kP,y0e as kQ,Kne as kR,gU as kS,Sge as kT,j1e as kU,PT as kV,Q_e as kW,X_e as kX,yc as kY,tw as kZ,Ov as k_,dB as ka,yge as kb,kTe as kc,KE as kd,O4 as ke,Cie as kf,Rp as kg,jB as kh,FX as ki,Zye as kj,mce as kk,gge as kl,Zre as km,Rne as kn,ok as ko,oc as kp,ywe as kq,KT as kr,AE as ks,z1e as kt,rP as ku,CL as kv,zP as kw,P1e as kx,Na as ky,dV as kz,c as l,bR as l$,Qre as l0,Iu as l1,O$ as l2,J5 as l3,qoe as l4,W0 as l5,H1 as l6,N1 as l7,fd as l8,Zce as l9,xSe as lA,$Se as lB,TSe as lC,fW as lD,j7 as lE,lt as lF,moe as lG,$k as lH,qG as lI,Lq as lJ,Pwe as lK,Iq as lL,Oq as lM,GV as lN,yR as lO,p0e as lP,Ro as lQ,r0e as lR,y9 as lS,lwe as lT,jEe as lU,sJ as lV,aEe as lW,Dp as lX,Wne as lY,ag as lZ,zne as l_,$Te as la,pe as lb,ot as lc,Ube as ld,Hbe as le,Gbe as lf,xH as lg,AQ as lh,xQ as li,EQ as lj,ML as lk,_X as ll,p4 as lm,Z1e as ln,V$e as lo,o7 as lp,q$e as lq,Xi as lr,lg as ls,yse as lt,ig as lu,Fre as lv,fb as lw,Vye as lx,CSe as ly,SSe as lz,d as m,_re as m$,Cge as m0,JV as m1,sy as m2,Pw as m3,UEe as m4,ft as m5,Ya as m6,Hj as m7,jne as m8,sc as m9,Wye as mA,vEe as mB,sB as mC,SEe as mD,kne as mE,Mne as mF,sk as mG,Np as mH,dwe as mI,uwe as mJ,hwe as mK,TU as mL,u2e as mM,c6 as mN,ip as mO,a2e as mP,H1e as mQ,Pye as mR,u4 as mS,ja as mT,WF as mU,xo as mV,fw as mW,AF as mX,LF as mY,ure as mZ,wxe as m_,Sne as ma,ik as mb,Cwe as mc,bq as md,uge as me,sg as mf,qT as mg,MEe as mh,Nne as mi,Jne as mj,$j as mk,Sj as ml,xv as mm,owe as mn,lm as mo,yye as mp,o9 as mq,awe as mr,fye as ms,Cw as mt,dEe as mu,ige as mv,tEe as mw,Ft as mx,v3 as my,tge as mz,S as n,nSe as n$,_xe as n0,uF as n1,fs as n2,Sse as n3,$se as n4,vse as n5,JG as n6,cwe as n7,Jk as n8,lEe as n9,sw as nA,Dwe as nB,NE as nC,h$ as nD,y$e as nE,v$e as nF,CQ as nG,kQ as nH,MQ as nI,wQ as nJ,Tc as nK,zH as nL,ZV as nM,rse as nN,nee as nO,iee as nP,m2 as nQ,CEe as nR,Bwe as nS,zR as nT,Vn as nU,HQ as nV,Fne as nW,xR as nX,ib as nY,hB as nZ,WQ as n_,Cc as na,SV as nb,Y1e as nc,X1e as nd,Gle as ne,Zoe as nf,pc as ng,E_e as nh,Nte as ni,A0 as nj,Pte as nk,$b as nl,Tb as nm,Wbe as nn,Wle as no,Yce as np,Og as nq,ue as nr,Dg as ns,d4 as nt,h4 as nu,Y6 as nv,Tz as nw,fq as nx,Lwe as ny,Vre as nz,Z as o,AJ as o$,nce as o0,aTe as o1,rce as o2,sTe as o3,mF as o4,iTe as o5,rTe as o6,Tge as o7,h1e as o8,x1 as o9,nge as oA,ege as oB,sSe as oC,uO as oD,rSe as oE,Hwe as oF,cO as oG,SE as oH,_o as oI,h7 as oJ,Jbe as oK,g$e as oL,kEe as oM,PQ as oN,OQ as oO,oge as oP,He as oQ,vge as oR,Iwe as oS,lO as oT,uEe as oU,d0 as oV,_we as oW,UQ as oX,$Ee as oY,tne as oZ,mxe as o_,Rbe as oa,oTe as ob,K7 as oc,qQ as od,Ige as oe,kwe as of,Ewe as og,Sq as oh,LJ as oi,tce as oj,Fg as ok,zg as ol,jg as om,YTe as on,lJ as oo,Vne as op,Yye as oq,oSe as or,o$e as os,sge as ot,Nr as ou,gEe as ov,mi as ow,u$e as ox,m$e as oy,eEe as oz,tk as p,QTe as p0,Pp as p1,Xte as p2,$$e as p3,f$e as p4,h$e as p5,N$e as p6,R$e as p7,uie as p8,Nbe as p9,__e as pA,$_e as pB,l$e as pa,jwe as pb,w$e as pc,p$e as pd,_Q as pe,r$e as pf,DQ as pg,kbe as ph,Ebe as pi,IEe as pj,Age as pk,c$e as pl,T$e as pm,gp as pn,yF as po,vwe as pp,Ane as pq,AEe as pr,_2 as ps,iX as pt,$1e as pu,vI as pv,lSe as pw,Aq as px,PEe as py,Uwe as pz,zE as q,Nxe as r,F as s,mp as t,Oe as u,Qi as v,Zt as w,$F as x,Pxe as y,ud as z};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./statsWorker-lpLq1ohV.js","./utils-WM7Tu82W.js","./quantizationUtils-DTwa03mn.js","./heatmapUtils-QdzYLNxE.js","./utils-ogjc0K8k.js","./generateRendererUtils-3gFntpPN.js","./geometryEngineWorker-T8ritq2p.js","./geometryEngineJSON-QxO3KC6L.js","./geometryEngineBase-x-VXhX-U.js","./json-v6EOeNTY.js","./CSVSourceWorker-YDsg2kRP.js","./date-be_IQzZd.js","./OptimizedFeature-5RGb7-P9.js","./OptimizedGeometry-CbNXANBG.js","./FeatureStore-fDdfu0NS.js","./featureConversionUtils-91rcTs0M.js","./OptimizedFeatureSet-smVI1ez9.js","./BoundsStore-vcsjlm-7.js","./PooledRBush-vORPUHCE.js","./timeSupport-S5YlMQCQ.js","./projectionSupport-7ZBNFFZX.js","./optimizedFeatureQueryEngineAdapter-v2zLUxFL.js","./QueryEngine-jwyOZ-jF.js","./LRUCache-mFQSPLKh.js","./WhereClause-apv-PO0T.js","./TimeOnly-WOAkj6tI.js","./UnknownTimeZone-iVS1S_Kf.js","./QueryEngineCapabilities-PzVpW5yD.js","./SnappingCandidate-JeTxy3r2.js","./FieldsIndex-_W1Us-oq.js","./number--mMhueri.js","./clientSideDefaults-U4Hwip-x.js","./defaultsJSON-x-mq3Ho7.js","./EdgeProcessingWorker-TRDYpL4N.js","./workerHelper-frtWbMOi.js","./InterleavedLayout-anHqp-yr.js","./BufferView-KywjVo63.js","./types-GBdbcYRa.js","./edgeProcessing-UOhTeKs_.js","./deduplicate-QfgWUagS.js","./Indices-bOD3sMcK.js","./VertexAttribute-h46lBfqy.js","./glUtil-eBq9W4Bb.js","./enums-8pc8f5Ge.js","./VertexElementDescriptor-0hGjloLE.js","./ElevationSamplerWorker-SemMvA4A.js","./georeference-IWrqLT4D.js","./spatialReferenceEllipsoidUtils-C7ZdwAmG.js","./MeshTransform-sCiW0N8P.js","./quat-7g9K7sUG.js","./DoubleArray-5XshLEpX.js","./MeshGeoreferencedRelativeVertexSpace-5FoxqUmg.js","./MeshLocalVertexSpace-Hd9uQrLZ.js","./vec32-wV5-40u9.js","./FeatureServiceSnappingSourceWorker-wNa8jf8q.js","./symbologySnappingCandidates-HmjxrDnS.js","./pbfQueryUtils-HEDqsMMp.js","./pbf-L_JjT3GM.js","./query-ROhOLudR.js","./queryZScale-ye882EvB.js","./GeoJSONSourceWorker-aiWmntJA.js","./geojson-mrmkWj0d.js","./sourceUtils-z_rGuRYe.js","./MemorySourceWorker-xtVzMTuN.js","./objectIdUtils-GktMsX8e.js","./PBFDecoderWorker-LIQlMbZg.js","./dehydratedFeatures-RW4WXA7F.js","./Pipeline-eCgpt9nN.js","./FeatureStore2D-uu2AKhdf.js","./CircularArray-1_thnT0U.js","./diffUtils-x5OXhJZZ.js","./ComputedAttributeStorage-JNIiBSw3.js","./labelPoint-mThgM4t0.js","./definitions-otzk_d_r.js","./visualVariablesUtils-lT9viKWj.js","./color-Y1HD3ytM.js","./enums--FbEXJ87.js","./number-sTjsTbdA.js","./ogcFeatureUtils-uS6cly1T.js","./createConnection-1fSEstbR.js","./geohashUtils-U0jvYCSY.js","./PointCloudWorker-fqwunBAI.js","./vec3f32-cbLeGFQ-.js","./PointCloudUniqueValueRenderer-O1DDyFXW.js","./LegendOptions-x-5oaDqO.js","./ColorStop-y1faJUUg.js","./I3SBinaryReader-tH5OwXH9.js","./RasterWorker-N4Bx_4uM.js","./dataUtils-XE5wpsnC.js","./pixelRangeUtils-mQ96StNY.js","./RasterSymbolizer-mxXx7akG.js","./colorUtils-d-fcXxMg.js","./utils-WWI2VGZG.js","./colorRamps-rojoPCoV.js","./rasterProjectionHelper-gn75jefg.js","./SceneLayerSnappingSourceWorker-k9lHFydx.js","./lineSegment-EzA48HN-.js","./Octree-zeHYSLTZ.js","./SceneLayerWorker-gKEhSx2Y.js","./WFSSourceWorker-JTUzgB8W.js","./wfsUtils-PW38V6KS.js","./xmlUtils-Q_9cB30b.js","./WorkerTileHandler-35C4clxq.js","./enums-W_WZ2jKy.js","./GeometryUtils-CEMOhUyj.js","./Rect-pT1ASav_.js","./config-z2KFXUcx.js","./StyleDefinition-ohiNeWtS.js","./TurboLine-lq2gJIeK.js","./StyleRepository-klVUWgh8.js","./earcut-wP_5WnqY.js","./BidiEngine-8z8MVveq.js","./Popup-tokhx1Ms.js","./throttle-SZpAiZ7F.js","./unitFormatUtils-14JHbQwR.js","./AttachmentInfo-51A6BUqb.js","./AttachmentQuery-R-ww4TCj.js","./featureUtils-imxwW6aX.js","./symbolUtils-5r1IAQ7f.js","./utils-NbMqmVX1.js","./cimSymbolUtils-i5s4LTBQ.js","./utils-jQLeeGOF.js","./jsonUtils-M3inctU9.js","./UniqueValueRenderer-hljh8Sos.js","./SizeVariable-221gAT5i.js","./jsonUtils-1IxKPsH1.js","./styleUtils-BMYfqyTs.js","./DictionaryLoader-W3_-N3pK.js","./Version-DuGO31mq.js","./webStyleSymbolUtils-kjfVwPY4.js","./devEnvironmentUtils-3qgG8Z2w.js","./executeQueryJSON-6B7-53C9.js","./FeatureSet-mcxSPZVd.js","./RelationshipQuery-ywbSZt88.js","./TopFeaturesQuery-1Hh7r5CS.js","./FeatureLayer-AoBB65O3.js","./MultiOriginJSONSupport-vWhNPmo6.js","./commonProperties-Z7yNesJQ.js","./FeatureLayerBase-Lbe3GcxU.js","./featureLayerUtils-C42jjnpg.js","./LayerFloorInfo-AjANTfIZ.js","./serviceCapabilitiesUtils-PyTiHyo_.js","./editsZScale-BnTBUWEJ.js","./APIKeyMixin-D4ISDt7k.js","./ArcGISService-ZNLoHKjp.js","./CustomParametersMixin-2_75FyjW.js","./EditBusLayer-mXoDWACi.js","./FeatureEffectLayer-O4uCk7qT.js","./FeatureEffect-PYWUFKjR.js","./FeatureReductionLayer-3noB1jhj.js","./clusterUtils-kJgVNgUU.js","./MD5-uECS9GB-.js","./FeatureReductionSelection-fon3mH9t.js","./LabelClass-Ii0xtB2a.js","./labelUtils-x_C8o7Up.js","./defaults--brCOrwa.js","./OperationalLayer-3ukEE_2z.js","./OrderedLayer-YP4Xj2eY.js","./PortalLayer-rHgWFtbi.js","./portalItemUtils-svYaQgLA.js","./RefreshableLayer-7Vl73DRX.js","./TemporalLayer-VuhNqDWS.js","./FeatureTemplate-w67ep4V4.js","./FeatureType-iHKb3B35.js","./fieldProperties-54Gh-jYe.js","./labelingInfo-Ik6k9hmR.js","./versionUtils-Cut1eB_D.js","./styleUtils-KC8yNoSs.js","./popupUtils-7Uqan4_S.js","./interfaces-JKqm7GXy.js","./ElevationLayer-UGx99-aI.js","./ArcGISCachedService-Z_DT95Vb.js","./TileInfoTilemapCache-Q4QZ7pXh.js","./TilemapCache-pqeHijOL.js","./WorkerHandle-g1Y81Hug.js","./layersCreator-PX7PzyU1.js","./portalLayers-UpS2HqeU.js","./associatedFeatureServiceUtils-ri3rxIXJ.js","./lazyLayerLoader-yzrHI9gA.js","./arcgisLayers-9jksFGSM.js","./fetchService-GBO3P7GB.js","./arcadeUtils-00qTnDg6.js","./webglDeps-9UdcV4l_.js","./FramebufferObject-FWwprw92.js","./Texture-4vQG0qLG.js","./ProgramTemplate-mAY_399P.js","./NestedMap-9UouPomH.js","./VertexArrayObject-whl5pCEr.js","./mapViewDeps-J1uAldVZ.js","./CIMResourceManager-RJnqsZ6j.js","./fontUtils-GE0ho--n.js","./imageUtils-tXDgLQzN.js","./Container-AO0ma2pG.js","./EffectView-eHJp2ynv.js","./BufferPool-U4f6W5v-.js","./AttributeStoreView-v_U2sesH.js","./TiledDisplayObject-yP0_0rbx.js","./WGLContainer-NUKBXko_.js","./vec4f32-NvfHy9q7.js","./GeometryUtils-PBUEihia.js","./alignmentUtils-XT3TYmYW.js","./cimAnalyzer-DsuWkQlK.js","./callExpressionWithFeature-rytrJuuz.js","./floatRGBA-9E5qKLsz.js","./ExpandedCIM-bbZk55Wb.js","./util-7E7JUKUD.js","./MagnifierPrograms-EPEetlg2.js","./Rasterizer-JVG-pIoh.js","./rasterizingUtils-vy6gAIzi.js","./imageutils-4dcLUfnP.js","./Matcher-Mv_XwJSb.js","./tileUtils-pcBJnprf.js","./testSVGPremultipliedAlpha-GARkqVUs.js","./RenderingContext-VnZ6evl6.js","./OrderIndependentTransparency-zg-ZjAWW.js","./basicInterfaces-IwaMq8O_.js","./doublePrecisionUtils-HJiLm-yC.js","./GraphicsView2D-i7e92lLy.js","./normalizeUtilsSync-vawo822E.js","./GraphicContainer-Pp_yEz1D.js","./BaseGraphicContainer-i9-NOgp7.js","./FeatureContainer-x5rBbMr_.js","./TileContainer-Dws-iayU.js","./requestImageUtils-YgTUQT6h.js","./TileLayerView2D-6KNKvvXo.js","./imageUtils-owCsLWb-.js","./BitmapTileContainer-zWhyqFAw.js","./Bitmap-Qg1VS7OT.js","./LayerView2D-fHeQM5c3.js","./HighlightGraphicContainer-_x6x_dgi.js","./LayerView-CRo_qb-x.js","./RefreshableLayerView-FnCvUyzs.js","./MapServiceLayerViewHelper-1ouFyiRg.js","./sublayerUtils-TUwx3ufc.js","./popupUtils-CDV9bUjJ.js","./FeatureLayerView2D-AHj272U4.js","./BaseDynamicLayerView2D-UZZZXrWx.js","./BitmapContainer-zXpYCSDr.js","./ExportStrategy-yriiTTrK.js","./GeoRSSLayerView2D-swFe2Iq4.js","./GraphicsLayerView2D-UqXdm41R.js","./GroupLayerView2D-Ex7ZUEjO.js","./ImageryLayerView2D-zSg7sj9l.js","./RasterVFDisplayObject-FTTabpwz.js","./ImageryTileLayerView2D-fVbdKHjR.js","./multidimensionalUtils-SOyWshGi.js","./rasterUtils-1tK0BxVI.js","./RawBlockCache-jjDLzKdU.js","./KMLLayerView2D-HR6PjOtC.js","./kmlUtils-OYCZ_JdB.js","./KnowledgeGraphLayerView2D-2DAAdqTT.js","./MapImageLayerView2D-KbDsTvYA.js","./ExportImageParameters-MtrtdR6K.js","./MapNotesLayerView2D-hZMT77ly.js","./MediaLayerView2D-aIRQtFLU.js","./perspectiveUtils-WzHBNlkx.js","./OGCFeatureLayerView2D-DT2oIas8.js","./RouteLayerView2D-WPCXI4lV.js","./Stop-0sA5wmG_.js","./StreamLayerView2D-YN5trEnj.js","./SubtypeGroupLayerView2D-0ZqYj26Z.js","./VectorTileLayerView2D-ts_JFIft.js","./VideoLayerView2D-GS0T_KOC.js","./WMSLayerView2D-H149SGv5.js","./ExportWMSImageParameters-DLrgEwpl.js","./WMTSLayerView2D-wrLk8Wtm.js","./calcite-button-3vurRxLj.js","./form-LcE6Lkpd.js","./interactive-2Bqh_3jm.js","./label2-hpOGNwRK.js","./loadable-C2NJ3dkg.js","./t9n-BOGCQY_s.js","./key-qdHumIlA.js","./observers-5FXfqfxe.js","./component-dtiBfYiX.js","./icon-1wOoQPvy.js","./loader-ykN72O3c.js","./guid-6vN-YNJI.js","./calcite-icon-uORPeLj9.js","./calcite-scrim-ZgWt1Yec.js","./scrim--avB_ZaJ.js","./calcite-chip-ZaBt7-Ix.js","./conditionalSlot-jVjX5ZxH.js","./FeatureServiceSnappingSource-pBm1M6ra.js","./memoize-uBdPJ80n.js","./boundedPlane-l8xUIJF_.js","./queryEngineUtils-SOTtx6Iw.js","./VertexSnappingCandidate-UrIt3CGy.js","./PointSnappingHint-gEubw2iI.js","./FeatureCollectionSnappingSource-fIoEKGOM.js","./GraphicsSnappingSource-50tCfoPx.js","./SceneLayerSnappingSource-ykWCZ0z1.js","./editingTools-UTIJrqsg.js","./SnappingVisualizer2D-zaupVCTe.js","./SnappingContext-Gx6YYzw1.js","./projectVectorToVector-EjL4REoi.js","./triangle-kBLwI83x.js","./Tooltip-xhgZnGbx.js","./geometryEngine-OntNUgGF.js","./hydrated-FT1rqPfv.js","./editPlaneUtils-u0lajn8N.js","./interfaces-uUGzHEiK.js","./GraphicManipulator-223uhWDV.js","./projectPointToVector-P8odY6kx.js","./editingTools-2pnjWbkh.js","./ColorMaterial.glsl-ymzfBx6s.js","./VertexColor.glsl-czCP619T.js","./Geometry-TfLywN1e.js","./orientedBoundingBox-frFJc-wI.js","./triangulationUtils-JJu18b-M.js","./TranslateTooltipInfos-z4r9iUvj.js","./persistable-judhLTgi.js","./multiOriginJSONSupportUtils-R5XHSAtL.js","./resourceExtension-l_fryPZh.js","./ExtentTooltipInfos-7VRnVrsv.js","./Pattern.glsl-QU10RXSC.js","./rendererConversion-fvISt8-K.js","./edgeUtils-MePQoKVe.js","./objectResourceUtils-0J0VkaRY.js","./DefaultMaterial_COLOR_GAMMA-Ix8HIOzJ.js","./resourceUtils-U9HveiKh.js","./symbolColorUtils-L3SXnlGD.js","./MeshComponent-rZoIZFgK.js","./geometryServiceUtils-SZUkmQMv.js","./GraphicMover-gqXcJWyE.js","./Box-GMmtqlws.js","./settings-AGYP9SGk.js","./Reshape-GjknI149.js","./calcite-action-MFucn8My.js","./action-T1dzGjMy.js","./calcite-label-tfqqnVXJ.js","./calcite-switch-bfYMgmin.js","./calcite-tooltip-b0B89j2Y.js","./FloatingArrow-R1XC6hp5.js","./debounce-HnHf1UOZ.js","./openCloseComponent-G7RMGb4m.js","./calcite-block-xfdCTipm.js","./action-menu--UkRZ0BY.js","./handle-r3Pl71Zd.js","./Legend-4mbXL0iA.js","./calcite-accordion-eyZVD5gy.js","./calcite-accordion-item-CNK8o1QJ.js","./calcite-input-iJ8NMqtW.js","./input-RWhP8e8n.js","./calcite-list-pkTELC06.js","./utils3-bGCdvjNm.js","./calcite-list-item-NlJe8cMy.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}