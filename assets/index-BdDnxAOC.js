const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./statsWorker-B048WY8L.js","./utils-Chs1SJpX.js","./quantizationUtils-BIIdN1xY.js","./heatmapUtils-BQROikav.js","./utils-DmAx5TEG.js","./utils-B7w1pNop.js","./ClassBreaksDefinition-C5Cld0P-.js","./geometryEngineWorker-g3Nx_xVR.js","./geometryEngineJSON-DoX2EDjQ.js","./json-Wa8cmqdu.js","./CSVSourceWorker-BW48it56.js","./date-DLgTylpo.js","./OptimizedFeature-6cJ-QFG5.js","./OptimizedGeometry-BF8iz5FO.js","./FeatureStore-Bbo435Kq.js","./featureConversionUtils-BCh95FQm.js","./OptimizedFeatureSet-Blu9Ckm7.js","./BoundsStore-KsIULnoH.js","./PooledRBush-CKDzTrD4.js","./timeSupport-BTKC7S1J.js","./queryUtils-DQi3qLST.js","./optimizedFeatureQueryEngineAdapter-BOPMFOve.js","./centroid-DdLmOD72.js","./QueryEngine-fI4EtBUM.js","./LRUCache-CSFO1iZh.js","./WhereClause-pNTvpIeY.js","./TimeOnly-Ck8NzzKB.js","./UnknownTimeZone-CDnwrDVp.js","./QueryEngineCapabilities-DjYb9CEb.js","./SnappingCandidate-O5eRSE6e.js","./FieldsIndex-DdufUIvd.js","./number-B0Ox8PcF.js","./clientSideDefaults-D1QYHY7E.js","./capabilities-Y9lFlGVh.js","./defaultsJSON-GKolV7NZ.js","./EdgeProcessingWorker-DhFciWt7.js","./workerHelper-Cwy48AtV.js","./InterleavedLayout-D4EIJKmV.js","./BufferView-DDmSnYbN.js","./types-D0PSWh4d.js","./Util-CMsZAslL.js","./edgeProcessing-DHP-xyIa.js","./deduplicate-v2YqCz9S.js","./Indices-DL2vOaxI.js","./VertexAttribute-Cq4MnHjR.js","./glUtil-Dw6UJ_iI.js","./VertexElementDescriptor-BOD-G50G.js","./Normals-DlV35zDh.js","./ElevationSamplerWorker-B7LUwwpw.js","./vertexSpaceConversion-xoU-pZCj.js","./spatialReferenceEllipsoidUtils-dsdmGygT.js","./computeTranslationToOriginAndRotation-BpuGNDNV.js","./vec3-r06WozNl.js","./vec4-Ct3FuunO.js","./FeatureServiceSnappingSourceWorker-CsuUtQvy.js","./symbologySnappingCandidates-CLXMu7zo.js","./pbfQueryUtils-DZpH09BK.js","./pbf-loJXkAL8.js","./query-Cagu3AtE.js","./queryZScale-C2obsE-l.js","./ByteSizeUnit-BsxeN7wM.js","./GeoJSONSourceWorker-BV_imW_x.js","./geojson-V7yWxdTz.js","./sourceUtils-Cl4uPLpW.js","./MemorySourceWorker-W6N9p-O8.js","./objectIdUtils-4dd1rf9p.js","./PBFDecoderWorker-DYXQWpsL.js","./dehydratedFeatures-IStvKfDq.js","./FeaturePipelineWorker-CHRci_Fs.js","./AttributeStore-vJIDWxy-.js","./LabelMetric-CP2ejxD5.js","./enums-CmIX1y88.js","./Program-BEbyLHne.js","./BufferObject-CMCaTtYE.js","./BoundingBox-Tk_OBeCC.js","./CIMSymbolHelper-vq9rAQVS.js","./BidiEngine-DNnuvc1i.js","./fontUtils-CiOfLTjw.js","./GeometryUtils-gjMcVHTd.js","./utils-DpS7XCOa.js","./Rect-CUzevAry.js","./defaults-BX3STjdr.js","./UpdateTracking2D-i6Vln34G.js","./BindType-BmZEZMMh.js","./labelUtils-CE2jIVKQ.js","./MeshWriterRegistry-OU3XRKFf.js","./PieChartMeshWriter-Csjyofne.js","./TurboLine-CCVEcfeZ.js","./earcut-Lltz9D9k.js","./constants-F8oTIn7N.js","./grouping-CLsMcTHU.js","./ogcFeatureUtils-5jKzfeSm.js","./CircularArray-CujHzHWW.js","./createConnection-rHaOeitk.js","./PointCloudWorker-Bq8kCLQE.js","./vec3f32-nZdmKIgz.js","./PointCloudUniqueValueRenderer-Bux4z2Md.js","./ColorStop-D1flJukn.js","./I3SBinaryReader-4zdF4rvW.js","./orientedBoundingBox-CDDAEjLg.js","./RasterWorker-DKzSKJBL.js","./dataUtils-WdO8U8dE.js","./pixelRangeUtils-DHjFxYEg.js","./RasterSymbolizer-B4jUkASD.js","./colorUtils-CXI_GYiL.js","./PolynomialTransform-BKPQncVB.js","./rasterProjectionHelper-NPTf_ANP.js","./colorRamps-feXPP0Fe.js","./SceneLayerSnappingSourceWorker-AW-YLFXG.js","./lineSegment-BdB5sSqU.js","./Octree-CHZqCJI3.js","./SceneLayerWorker-DXV6Q_c_.js","./I3SUtil-CCyjqQKB.js","./edgeUtils-DNOQ1mK8.js","./floatRGBA-CrOZxjHk.js","./symbolColorUtils-DgKVAaAs.js","./interfaces-CJw7Cnm-.js","./NormalAttribute.glsl-BvcOWU6V.js","./WFSSourceWorker-D35SxAfc.js","./wfsUtils-DKKRi19U.js","./xmlUtils-CtUoQO7q.js","./WorkerTileHandler-e3VDq4Zr.js","./enums-BRzLM11V.js","./config-MDUrh2eL.js","./StyleDefinition-BTt_i6C1.js","./SourceLayerData-DmZGNWEY.js","./StyleRepository-Cyzx-eQP.js","./Feature3DPipelineWorker-Ce78ShgD.js","./projectVectorToPoint-BtXdAAk7.js","./Geometry-0zkcBCci.js","./renderState-BKlWY516.js","./basicInterfaces-CZwQPxTp.js","./boundedPlane-CkcDH2eT.js","./AlphaCutoff-UcccL64p.js","./requestImageUtils-vR0S8NIj.js","./triangle-DshsWHpa.js","./HUDMaterial.glsl-tln8Kpvy.js","./NestedMap-GuqgquCN.js","./VertexArrayObject-BNd6u6rq.js","./dehydratedFeatureUtils-BOLOU81j.js","./IntersectorInterfaces-BgX4KEwK.js","./doublePrecisionUtils-B0owpBza.js","./DefaultMaterial-ZWi4WMy4.js","./RealisticTree.glsl-3n2GOgJt.js","./Popup-bPyXRFjM.js","./unitFormatUtils-CjHu92d5.js","./AttachmentInfo-CmmWN4rX.js","./featureLayerUtils-Cr_P5BEF.js","./jsonUtils-B03p0wkk.js","./UniqueValueRenderer-BWPFapkt.js","./sizeVariableUtils-Cmcuvw-4.js","./visualVariableUtils-CGgEbm3F.js","./jsonUtils-DM4hoWoB.js","./styleUtils-D8VmJ7nq.js","./OverrideHelper-cJgBvMlU.js","./featureUtils-5gfepsiW.js","./symbolUtils-BUs8Wbgp.js","./utils-Dq0Bk0UU.js","./cimSymbolUtils-Cz7fBoYZ.js","./webStyleSymbolUtils-C-w781HU.js","./devEnvironmentUtils-CnNDiFMM.js","./executeQueryJSON-DDHvBeeF.js","./FeatureSet-BSxK7X-2.js","./shared-B1ynWZ67.js","./FeatureLayer-BDZN5grg.js","./MultiOriginJSONSupport-BxqyqD-M.js","./commonProperties-BBSEfxbj.js","./FeatureLayerBase-W0b2Hl-T.js","./LayerFloorInfo-DYBlEgwK.js","./Relationship-CL5GSwc1.js","./serviceCapabilitiesUtils-CxD1SJab.js","./editsZScale-C1SPDSrQ.js","./APIKeyMixin-C2GGgg_6.js","./ArcGISService-BxLjDx2U.js","./CustomParametersMixin-AjotzixX.js","./EditBusLayer-j7Kkv1qk.js","./FeatureEffectLayer-BvH28EDx.js","./FeatureEffect-DVNjjsKx.js","./FeatureFilter-mttTrSds.js","./FeatureReductionLayer-BVPeBmyG.js","./FeatureReductionSelection-DsrBapHO.js","./labelingInfo-C81qEnrv.js","./MD5-C9MwAd2G.js","./OperationalLayer-EPpXepzU.js","./OrderedLayer-B2P-3Rdt.js","./OrderByInfo-NW2XP7xS.js","./PortalLayer-DVe9srog.js","./portalItemUtils-knUv3sqD.js","./RefreshableLayer-DdxF085B.js","./TemporalLayer-CQypAb8m.js","./TimeInfo-Kiz4nH72.js","./FeatureTemplate-Dyrv7v8V.js","./FeatureType-c5mpcoB0.js","./fieldProperties-CBBpMM_Y.js","./versionUtils-_ZHtErjP.js","./styleUtils-DtHx2LnQ.js","./popupUtils-CYXwczcX.js","./interfaces-CL2NbQte.js","./ElevationLayer-KuKPHoEu.js","./ArcGISCachedService-Cd08ZwuE.js","./TileInfoTilemapCache-B4EUUxC5.js","./TilemapCache-BvsKq02M.js","./WorkerHandle-Bn7k9sxQ.js","./layersCreator-VVKELQ4n.js","./portalLayers-vuDqGzrZ.js","./associatedFeatureServiceUtils-DGx_1kwC.js","./fetchService-BBXWKjiR.js","./arcgisLayers-D6Lj_b3o.js","./arcadeUtils-Cwhwjn4-.js","./languageUtils-BWJghrIP.js","./ImmutableArray-BPVd6ESQ.js","./webglDeps-DHwI-S1G.js","./ProgramTemplate-Dwf_s9I8.js","./mapViewDeps-C04MN2lW.js","./FeatureCommandQueue-WSFqrkMp.js","./WGLContainer-DzTbsEWo.js","./Container-C3Ew2ox5.js","./EffectView-CEbLCWgX.js","./SDFHelper-DhGVVNzU.js","./GridShader-CAsDstdc.js","./testSVGPremultipliedAlpha-CriigqKG.js","./RenderingContext-Bih-ck2l.js","./CIMResourceManager-DiZ9873h.js","./rasterizingUtils-8usOzwwF.js","./utils-BmwTqBlw.js","./GraphicsView2D-CJbb9JQt.js","./normalizeUtilsSync-Chqxc3Gu.js","./GraphicContainer-D_BrvAv9.js","./AGraphicContainer-Cghh_e-f.js","./TechniqueInstance-C7tjEbHB.js","./TileContainer-CAeBc3OW.js","./gridUtils-DhxsThy4.js","./TileLayerView2D-FGfdHBmX.js","./imageUtils-D9p7nTby.js","./Bitmap-BYZPeAnu.js","./LayerView2D-C4DUwP3E.js","./HighlightGraphicContainer-CAAxYjrF.js","./LayerView-C8i47HwB.js","./RefreshableLayerView-BG0mPyQL.js","./MapServiceLayerViewHelper-C-X-dgGe.js","./floorFilterUtils-DZ5C6FQv.js","./sublayerUtils-DCudlAhu.js","./highlightUtils-N39V61g4.js","./popupUtils-prBco07P.js","./FeatureLayerView2D-C18Jmwtp.js","./timeSupport-DKa-6YSI.js","./featureReductionUtils-Caulfaw_.js","./HighlightCounter-Czi-fdpx.js","./BaseDynamicLayerView2D-DnjXxlaL.js","./BitmapContainer-B5UAEl3U.js","./ExportStrategy-EBO5G-0j.js","./CatalogLayerView2D-DfZN-_xU.js","./CatalogDynamicGroupLayerView2D-Bpu6odSR.js","./CatalogFootprintLayerView2D-CmmByhHf.js","./GeoRSSLayerView2D-DTfocgV8.js","./GraphicsLayerView2D-BZzsMQX-.js","./GroupLayerView2D-dGz8fgJk.js","./ImageryLayerView2D-BY_U7_vD.js","./RasterVFDisplayObject-gA9sAI2D.js","./ImageryTileLayerView2D-rIBYX99i.js","./multidimensionalUtils-D1-92917.js","./rasterUtils-DbmDStmn.js","./RawBlockCache-BqRyY30e.js","./KMLLayerView2D-C50kBXBE.js","./kmlUtils-BJo2NjRf.js","./KnowledgeGraphLayerView2D-D2faiymY.js","./MapImageLayerView2D-Q-kkMAto.js","./ExportImageParameters-DADFq-s-.js","./MapNotesLayerView2D-DZlkRAld.js","./MediaLayerView2D-Dxz7hAv2.js","./perspectiveUtils-CbQMBwbY.js","./OverlayContainer-Dg5up3tG.js","./OGCFeatureLayerView2D-BzBqPUuL.js","./RouteLayerView2D-BqfPBoEs.js","./Stop-BmUEbswf.js","./StreamLayerView2D-EytdrvoW.js","./SubtypeGroupLayerView2D-CdIVCS0P.js","./VectorTileLayerView2D-RwvbJMU5.js","./VideoLayerView2D-CmO-Jpih.js","./TelemetryDisplay-Bi6TvMwI.js","./WMSLayerView2D-B8QeMF-J.js","./ExportWMSImageParameters-DpyleEgi.js","./WMTSLayerView2D-BN-cUdEN.js","./AreaMeasurement2D-CQV06spj.js","./SnappingVisualizer2D-COfBjc8Y.js","./SnappingVisualizer-CEf62Vs9.js","./PointSnappingHint-xTfZ1GaJ.js","./Draw-C1w3XcNt.js","./GraphicManipulator-B9jeyT_H.js","./MeasurementWidgetContent-D7GgJfyr.js","./AreaMeasurement3D-BVTIlml3.js","./Analysis-DgGlgmTN.js","./InteractiveAnalysisViewModel-D2sa0yQ5.js","./ShadedColorMaterial.glsl-BLEA2yV8.js","./RibbonLine.glsl-woeA5PUM.js","./ColorMaterial-F0dlOmQ4.js","./axisAngleDegrees-BmgwC-EO.js","./DistanceMeasurement2D-DU6b2sA2.js","./DirectLineMeasurement3D-CQOD5UCV.js","./SelfSnappingEngine-NZQN9MLL.js","./geodesicLengthMeasurementUtils-DRlq-BQ9.js","./GridSnappingEngine-MLjxIzg-.js","./FeatureSnappingEngine-CENvb8f2.js","./editingTools-CWB-wDyQ.js","./editPlaneUtils-DFgmtc2q.js","./automaticLengthMeasurementUtils-TATMKOid.js","./MeshTransform-Dkbvv2ur.js","./automaticAreaMeasurementUtils-C_4lG3ak.js","./drawUtils-B0CyO87v.js","./editingTools-DMBT1paf.js","./TextOverlayItem-CIZYQDt1.js","./DefaultLayouts-BxU9b09W.js","./triangulationUtils-BBKDV_G6.js","./SelectedVertexTooltipInfo-D-rIecam.js","./TranslateTooltipInfo-DOGruDRL.js","./persistable-CfsxyjVF.js","./multiOriginJSONSupportUtils-C0wm8_Yw.js","./resourceExtension-BjCeUZX2.js","./ExtentScaleTooltipInfo-DRWTUiLV.js","./LineCallout.glsl-zJ4UIp-z.js","./rendererConversion-TOiYU5OW.js","./geometryServiceUtils-CQiS0Lx5.js","./GraphicMover-CTHqNBWd.js","./Box-GHf-Mrkb.js","./settings-CkeGPwmF.js","./Reshape-BP4qesKQ.js","./calcite-block-CB0hihhS.js","./handle-C_1nVub1.js","./Legend-D4MgCXAk.js","./calcite-list-DEw22I49.js","./resources4-DXHY1U7R.js","./utils3-DG96c3HL.js","./calcite-list-item-BkUiULbs.js","./GridControls-jM4C2lse.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const h of s)if(h.type==="childList")for(const f of h.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&n(f)}).observe(document,{childList:!0,subtree:!0});function i(s){const h={};return s.integrity&&(h.integrity=s.integrity),s.referrerPolicy&&(h.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?h.credentials="include":s.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function n(s){if(s.ep)return;s.ep=!0;const h=i(s);fetch(s.href,h)}})();const qq="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(qq);let Gm=!1;function Wq(){Gm=!0}Wq();const Kq=1,Zq=2,Dr=Symbol(),Jq=["touchstart","touchmove"];function Yq(t){return Jq.includes(t)}const Xq=!1;var Z6=Array.isArray,Qq=Array.from,eW=Object.defineProperty,kg=Object.getOwnPropertyDescriptor,AO=Object.getOwnPropertyDescriptors,tW=Object.prototype,iW=Array.prototype,J6=Object.getPrototypeOf;const qh=()=>{};function nW(t){return t()}function g2(t){for(var e=0;e<t.length;e++)t[e]()}const ul=2,OO=4,Um=8,Y6=16,Tl=32,i3=64,Ox=128,rp=256,m2=512,Jr=1024,tu=2048,Bm=4096,Kf=8192,M0=16384,rW=32768,X6=65536,sW=1<<19,PO=1<<20,Cg=Symbol("$state"),oW=Symbol("");function RO(t){return t===this.v}function NO(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function aW(t){return!NO(t,this.v)}function lW(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function cW(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function hW(t){throw new Error("https://svelte.dev/e/effect_orphan")}function uW(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function dW(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function pW(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function fW(){throw new Error("https://svelte.dev/e/state_unsafe_local_read")}function gW(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Zo(t,e){var i={f:0,v:t,reactions:null,equals:RO,version:0};return i}function mW(t,e=!1){var n;const i=Zo(t);return e||(i.equals=aW),Gm&&Ti!==null&&Ti.l!==null&&((n=Ti.l).s??(n.s=[])).push(i),i}function Xa(t,e){return mi!==null&&nT()&&mi.f&(ul|Y6)&&(Rd===null||!Rd.includes(t))&&gW(),yW(t,e)}function yW(t,e){return t.equals(e)||(t.v=e,t.version=eP(),LO(t,tu),nT()&&Pt!==null&&Pt.f&Jr&&!(Pt.f&Tl)&&(tr!==null&&tr.includes(t)?(El(Pt,tu),s3(Pt)):Wh===null?AW([t]):Wh.push(t))),e}function LO(t,e){var i=t.reactions;if(i!==null)for(var n=nT(),s=i.length,h=0;h<s;h++){var f=i[h],m=f.f;m&tu||!n&&f===Pt||(El(f,e),m&(Jr|rp)&&(m&ul?LO(f,Bm):s3(f)))}}let vW=!1;function Up(t,e=null,i){if(typeof t!="object"||t===null||Cg in t)return t;const n=J6(t);if(n!==tW&&n!==iW)return t;var s=new Map,h=Z6(t),f=Zo(0);h&&s.set("length",Zo(t.length));var m;return new Proxy(t,{defineProperty(y,x,E){(!("value"in E)||E.configurable===!1||E.enumerable===!1||E.writable===!1)&&dW();var k=s.get(x);return k===void 0?(k=Zo(E.value),s.set(x,k)):Xa(k,Up(E.value,m)),!0},deleteProperty(y,x){var E=s.get(x);if(E===void 0)x in y&&s.set(x,Zo(Dr));else{if(h&&typeof x=="string"){var k=s.get("length"),I=Number(x);Number.isInteger(I)&&I<k.v&&Xa(k,I)}Xa(E,Dr),_7(f)}return!0},get(y,x,E){var L;if(x===Cg)return t;var k=s.get(x),I=x in y;if(k===void 0&&(!I||(L=kg(y,x))!=null&&L.writable)&&(k=Zo(Up(I?y[x]:Dr,m)),s.set(x,k)),k!==void 0){var P=_c(k);return P===Dr?void 0:P}return Reflect.get(y,x,E)},getOwnPropertyDescriptor(y,x){var E=Reflect.getOwnPropertyDescriptor(y,x);if(E&&"value"in E){var k=s.get(x);k&&(E.value=_c(k))}else if(E===void 0){var I=s.get(x),P=I==null?void 0:I.v;if(I!==void 0&&P!==Dr)return{enumerable:!0,configurable:!0,value:P,writable:!0}}return E},has(y,x){var P;if(x===Cg)return!0;var E=s.get(x),k=E!==void 0&&E.v!==Dr||Reflect.has(y,x);if(E!==void 0||Pt!==null&&(!k||(P=kg(y,x))!=null&&P.writable)){E===void 0&&(E=Zo(k?Up(y[x],m):Dr),s.set(x,E));var I=_c(E);if(I===Dr)return!1}return k},set(y,x,E,k){var Z;var I=s.get(x),P=x in y;if(h&&x==="length")for(var L=E;L<I.v;L+=1){var D=s.get(L+"");D!==void 0?Xa(D,Dr):L in y&&(D=Zo(Dr),s.set(L+"",D))}I===void 0?(!P||(Z=kg(y,x))!=null&&Z.writable)&&(I=Zo(void 0),Xa(I,Up(E,m)),s.set(x,I)):(P=I.v!==Dr,Xa(I,Up(E,m)));var j=Reflect.getOwnPropertyDescriptor(y,x);if(j!=null&&j.set&&j.set.call(k,E),!P){if(h&&typeof x=="string"){var H=s.get("length"),W=Number(x);Number.isInteger(W)&&W>=H.v&&Xa(H,W+1)}_7(f)}return!0},ownKeys(y){_c(f);var x=Reflect.ownKeys(y).filter(I=>{var P=s.get(I);return P===void 0||P.v!==Dr});for(var[E,k]of s)k.v!==Dr&&!(E in y)&&x.push(E);return x},setPrototypeOf(){pW()}})}function _7(t,e=1){Xa(t,t.v+e)}var x7,DO,zO;function bW(){if(x7===void 0){x7=window;var t=Element.prototype,e=Node.prototype;DO=kg(e,"firstChild").get,zO=kg(e,"nextSibling").get,t.__click=void 0,t.__className="",t.__attributes=null,t.__styles=null,t.__e=void 0,Text.prototype.__t=void 0}}function FO(t=""){return document.createTextNode(t)}function y2(t){return DO.call(t)}function Q6(t){return zO.call(t)}function wt(t,e){return y2(t)}function wW(t,e){{var i=y2(t);return i instanceof Comment&&i.data===""?Q6(i):i}}function zt(t,e=1,i=!1){let n=t;for(;e--;)n=Q6(n);return n}function _W(t){var e=ul|tu;Pt===null?e|=rp:Pt.f|=PO;var i=mi!==null&&mi.f&ul?mi:null;const n={children:null,ctx:Ti,deps:null,equals:RO,f:e,fn:t,reactions:null,v:null,version:0,parent:i??Pt};return i!==null&&(i.children??(i.children=[])).push(n),n}function jO(t){var e=t.children;if(e!==null){t.children=null;for(var i=0;i<e.length;i+=1){var n=e[i];n.f&ul?eT(n):Hd(n)}}}function xW(t){for(var e=t.parent;e!==null;){if(!(e.f&ul))return e;e=e.parent}return null}function GO(t){var e,i=Pt;pl(xW(t));try{jO(t),e=tP(t)}finally{pl(i)}return e}function UO(t){var e=GO(t),i=(Md||t.f&rp)&&t.deps!==null?Bm:Jr;El(t,i),t.equals(e)||(t.v=e,t.version=eP())}function eT(t){jO(t),sm(t,0),El(t,M0),t.v=t.children=t.deps=t.ctx=t.reactions=null}function BO(t){Pt===null&&mi===null&&hW(),mi!==null&&mi.f&rp&&cW(),iT&&lW()}function SW(t,e){var i=e.last;i===null?e.last=e.first=t:(i.next=t,t.prev=i,e.last=t)}function $0(t,e,i,n=!0){var s=(t&i3)!==0,h=Pt,f={ctx:Ti,deps:null,deriveds:null,nodes_start:null,nodes_end:null,f:t|tu,first:null,fn:e,last:null,next:null,parent:s?null:h,prev:null,teardown:null,transitions:null,version:0};if(i){var m=If;try{T7(!0),r3(f),f.f|=rW}catch(E){throw Hd(f),E}finally{T7(m)}}else e!==null&&s3(f);var y=i&&f.deps===null&&f.first===null&&f.nodes_start===null&&f.teardown===null&&(f.f&PO)===0;if(!y&&!s&&n&&(h!==null&&SW(f,h),mi!==null&&mi.f&ul)){var x=mi;(x.children??(x.children=[])).push(f)}return f}function HO(t){const e=$0(Um,null,!1);return El(e,Jr),e.teardown=t,e}function Px(t){BO();var e=Pt!==null&&(Pt.f&Tl)!==0&&Ti!==null&&!Ti.m;if(e){var i=Ti;(i.e??(i.e=[])).push({fn:t,effect:Pt,reaction:mi})}else{var n=tT(t);return n}}function TW(t){return BO(),MW(t)}function EW(t){const e=$0(i3,t,!0);return(i={})=>new Promise(n=>{i.outro?Lx(e,()=>{Hd(e),n(void 0)}):(Hd(e),n(void 0))})}function tT(t){return $0(OO,t,!1)}function MW(t){return $0(Um,t,!0)}function Rx(t){return VO(t)}function VO(t,e=0){return $0(Um|Y6|e,t,!0)}function Nx(t,e=!0){return $0(Um|Tl,t,!0,e)}function qO(t){var e=t.teardown;if(e!==null){const i=iT,n=mi;E7(!0),dl(null);try{e.call(null)}finally{E7(i),dl(n)}}}function WO(t){var e=t.deriveds;if(e!==null){t.deriveds=null;for(var i=0;i<e.length;i+=1)eT(e[i])}}function KO(t,e=!1){var i=t.first;for(t.first=t.last=null;i!==null;){var n=i.next;Hd(i,e),i=n}}function $W(t){for(var e=t.first;e!==null;){var i=e.next;e.f&Tl||Hd(e),e=i}}function Hd(t,e=!0){var i=!1;if((e||t.f&sW)&&t.nodes_start!==null){for(var n=t.nodes_start,s=t.nodes_end;n!==null;){var h=n===s?null:Q6(n);n.remove(),n=h}i=!0}KO(t,e&&!i),WO(t),sm(t,0),El(t,M0);var f=t.transitions;if(f!==null)for(const y of f)y.stop();qO(t);var m=t.parent;m!==null&&m.first!==null&&ZO(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=null}function ZO(t){var e=t.parent,i=t.prev,n=t.next;i!==null&&(i.next=n),n!==null&&(n.prev=i),e!==null&&(e.first===t&&(e.first=n),e.last===t&&(e.last=i))}function Lx(t,e){var i=[];JO(t,i,!0),kW(i,()=>{Hd(t),e&&e()})}function kW(t,e){var i=t.length;if(i>0){var n=()=>--i||e();for(var s of t)s.out(n)}else e()}function JO(t,e,i){if(!(t.f&Kf)){if(t.f^=Kf,t.transitions!==null)for(const f of t.transitions)(f.is_global||i)&&e.push(f);for(var n=t.first;n!==null;){var s=n.next,h=(n.f&X6)!==0||(n.f&Tl)!==0;JO(n,e,h?i:!1),n=s}}}function S7(t){YO(t,!0)}function YO(t,e){if(t.f&Kf){Hm(t)&&r3(t),t.f^=Kf;for(var i=t.first;i!==null;){var n=i.next,s=(i.f&X6)!==0||(i.f&Tl)!==0;YO(i,s?e:!1),i=n}if(t.transitions!==null)for(const h of t.transitions)(h.is_global||e)&&h.in()}}let Dx=!1,zx=[];function CW(){Dx=!1;const t=zx.slice();zx=[],g2(t)}function IW(t){Dx||(Dx=!0,queueMicrotask(CW)),zx.push(t)}function XO(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let ib=!1,v2=!1,b2=null,If=!1,iT=!1;function T7(t){If=t}function E7(t){iT=t}let Fx=[],Ig=0;let mi=null;function dl(t){mi=t}let Pt=null;function pl(t){Pt=t}let Rd=null,tr=null,bs=0,Wh=null;function AW(t){Wh=t}let QO=1,Md=!1,Ti=null;function eP(){return++QO}function nT(){return!Gm||Ti!==null&&Ti.l===null}function Hm(t){var x;var e=t.f;if(e&tu)return!0;if(e&Bm){var i=t.deps,n=(e&rp)!==0;if(i!==null){var s,h,f=(e&m2)!==0,m=n&&Pt!==null&&!Md,y=i.length;if(f||m){for(s=0;s<y;s++)h=i[s],(x=h==null?void 0:h.reactions)!=null&&x.includes(t)||(h.reactions??(h.reactions=[])).push(t);f&&(t.f^=m2)}for(s=0;s<y;s++)if(h=i[s],Hm(h)&&UO(h),h.version>t.version)return!0}(!n||Pt!==null&&!Md)&&El(t,Jr)}return!1}function OW(t,e){for(var i=e;i!==null;){if(i.f&Ox)try{i.fn(t);return}catch{i.f^=Ox}i=i.parent}throw ib=!1,t}function PW(t){return(t.f&M0)===0&&(t.parent===null||(t.parent.f&Ox)===0)}function n3(t,e,i,n){if(ib){if(i===null&&(ib=!1),PW(e))throw t;return}i!==null&&(ib=!0);{OW(t,e);return}}function tP(t){var I;var e=tr,i=bs,n=Wh,s=mi,h=Md,f=Rd,m=Ti,y=t.f;tr=null,bs=0,Wh=null,mi=y&(Tl|i3)?null:t,Md=!If&&(y&rp)!==0,Rd=null,Ti=t.ctx;try{var x=(0,t.fn)(),E=t.deps;if(tr!==null){var k;if(sm(t,bs),E!==null&&bs>0)for(E.length=bs+tr.length,k=0;k<tr.length;k++)E[bs+k]=tr[k];else t.deps=E=tr;if(!Md)for(k=bs;k<E.length;k++)((I=E[k]).reactions??(I.reactions=[])).push(t)}else E!==null&&bs<E.length&&(sm(t,bs),E.length=bs);return x}finally{tr=e,bs=i,Wh=n,mi=s,Md=h,Rd=f,Ti=m}}function RW(t,e){let i=e.reactions;if(i!==null){var n=i.indexOf(t);if(n!==-1){var s=i.length-1;s===0?i=e.reactions=null:(i[n]=i[s],i.pop())}}i===null&&e.f&ul&&(tr===null||!tr.includes(e))&&(El(e,Bm),e.f&(rp|m2)||(e.f^=m2),sm(e,0))}function sm(t,e){var i=t.deps;if(i!==null)for(var n=e;n<i.length;n++)RW(t,i[n])}function r3(t){var e=t.f;if(!(e&M0)){El(t,Jr);var i=Pt,n=Ti;Pt=t;try{e&Y6?$W(t):KO(t),WO(t),qO(t);var s=tP(t);t.teardown=typeof s=="function"?s:null,t.version=QO}catch(h){n3(h,t,i,n||t.ctx)}finally{Pt=i}}}function NW(){if(Ig>1e3){Ig=0;try{uW()}catch(t){if(b2!==null)n3(t,b2,null);else throw t}}Ig++}function LW(t){var e=t.length;if(e!==0){NW();var i=If;If=!0;try{for(var n=0;n<e;n++){var s=t[n];s.f&Jr||(s.f^=Jr);var h=[];iP(s,h),DW(h)}}finally{If=i}}}function DW(t){var e=t.length;if(e!==0)for(var i=0;i<e;i++){var n=t[i];if(!(n.f&(M0|Kf)))try{Hm(n)&&(r3(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null?ZO(n):n.fn=null))}catch(s){n3(s,n,null,n.ctx)}}}function zW(){if(v2=!1,Ig>1001)return;const t=Fx;Fx=[],LW(t),v2||(Ig=0,b2=null)}function s3(t){v2||(v2=!0,queueMicrotask(zW)),b2=t;for(var e=t;e.parent!==null;){e=e.parent;var i=e.f;if(i&(i3|Tl)){if(!(i&Jr))return;e.f^=Jr}}Fx.push(e)}function iP(t,e){var i=t.first,n=[];e:for(;i!==null;){var s=i.f,h=(s&Tl)!==0,f=h&&(s&Jr)!==0,m=i.next;if(!f&&!(s&Kf))if(s&Um){if(h)i.f^=Jr;else try{Hm(i)&&r3(i)}catch(k){n3(k,i,null,i.ctx)}var y=i.first;if(y!==null){i=y;continue}}else s&OO&&n.push(i);if(m===null){let k=i.parent;for(;k!==null;){if(t===k)break e;var x=k.next;if(x!==null){i=x;continue e}k=k.parent}}i=m}for(var E=0;E<n.length;E++)y=n[E],e.push(y),iP(y,e)}function _c(t){var E;var e=t.f,i=(e&ul)!==0;if(i&&e&M0){var n=GO(t);return eT(t),n}if(mi!==null){Rd!==null&&Rd.includes(t)&&fW();var s=mi.deps;tr===null&&s!==null&&s[bs]===t?bs++:tr===null?tr=[t]:tr.push(t),Wh!==null&&Pt!==null&&Pt.f&Jr&&!(Pt.f&Tl)&&Wh.includes(t)&&(El(Pt,tu),s3(Pt))}else if(i&&t.deps===null)for(var h=t,f=h.parent,m=h;f!==null;)if(f.f&ul){var y=f;m=y,f=y.parent}else{var x=f;(E=x.deriveds)!=null&&E.includes(m)||(x.deriveds??(x.deriveds=[])).push(m);break}return i&&(h=t,Hm(h)&&UO(h)),t.v}function Zf(t){const e=mi;try{return mi=null,t()}finally{mi=e}}const FW=~(tu|Bm|Jr);function El(t,e){t.f=t.f&FW|e}function sp(t,e=!1,i){Ti={p:Ti,c:null,e:null,m:!1,s:t,x:null,l:null},Gm&&!e&&(Ti.l={s:null,u:null,r1:[],r2:Zo(!1)})}function op(t){const e=Ti;if(e!==null){const f=e.e;if(f!==null){var i=Pt,n=mi;e.e=null;try{for(var s=0;s<f.length;s++){var h=f[s];pl(h.effect),dl(h.reaction),tT(h.fn)}}finally{pl(i),dl(n)}}Ti=e.p,e.m=!0}return{}}function jW(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(Cg in t)jx(t);else if(!Array.isArray(t))for(let e in t){const i=t[e];typeof i=="object"&&i&&Cg in i&&jx(i)}}}function jx(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let n in t)try{jx(t[n],e)}catch{}const i=J6(t);if(i!==Object.prototype&&i!==Array.prototype&&i!==Map.prototype&&i!==Set.prototype&&i!==Date.prototype){const n=AO(i);for(let s in n){const h=n[s].get;if(h)try{h.call(t)}catch{}}}}}function GW(t){var e=mi,i=Pt;dl(null),pl(null);try{return t()}finally{dl(e),pl(i)}}const UW=new Set,M7=new Set;function BW(t,e,i,n){function s(h){if(n.capture||O1.call(e,h),!h.cancelBubble)return GW(()=>i.call(this,h))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?IW(()=>{e.addEventListener(t,s,n)}):e.addEventListener(t,s,n),s}function Qn(t,e,i,n,s){var h={capture:n,passive:s},f=BW(t,e,i,h);(e===document.body||e===window||e===document)&&HO(()=>{e.removeEventListener(t,f,h)})}function O1(t){var W;var e=this,i=e.ownerDocument,n=t.type,s=((W=t.composedPath)==null?void 0:W.call(t))||[],h=s[0]||t.target,f=0,m=t.__root;if(m){var y=s.indexOf(m);if(y!==-1&&(e===document||e===window)){t.__root=e;return}var x=s.indexOf(e);if(x===-1)return;y<=x&&(f=y)}if(h=s[f]||t.target,h!==e){eW(t,"currentTarget",{configurable:!0,get(){return h||i}});var E=mi,k=Pt;dl(null),pl(null);try{for(var I,P=[];h!==null;){var L=h.assignedSlot||h.parentNode||h.host||null;try{var D=h["__"+n];if(D!==void 0&&!h.disabled)if(Z6(D)){var[j,...H]=D;j.apply(h,[t,...H])}else D.call(h,t)}catch(Z){I?P.push(Z):I=Z}if(t.cancelBubble||L===e||L===null)break;h=L}if(I){for(let Z of P)queueMicrotask(()=>{throw Z});throw I}}finally{t.__root=e,delete t.currentTarget,dl(E),pl(k)}}}function HW(t){var e=document.createElement("template");return e.innerHTML=t,e.content}function Gx(t,e){var i=Pt;i.nodes_start===null&&(i.nodes_start=t,i.nodes_end=e)}function ap(t,e){var i=(e&Kq)!==0,n=(e&Zq)!==0,s,h=!t.startsWith("<!>");return()=>{s===void 0&&(s=HW(h?t:"<!>"+t),i||(s=y2(s)));var f=n?document.importNode(s,!0):s.cloneNode(!0);if(i){var m=y2(f),y=f.lastChild;Gx(m,y)}else Gx(f,f);return f}}function VW(){var t=document.createDocumentFragment(),e=document.createComment(""),i=FO();return t.append(e,i),Gx(e,i),t}function Kh(t,e){t!==null&&t.before(e)}function qW(t,e){return WW(t,e)}const xp=new Map;function WW(t,{target:e,anchor:i,props:n={},events:s,context:h,intro:f=!0}){bW();var m=new Set,y=k=>{for(var I=0;I<k.length;I++){var P=k[I];if(!m.has(P)){m.add(P);var L=Yq(P);e.addEventListener(P,O1,{passive:L});var D=xp.get(P);D===void 0?(document.addEventListener(P,O1,{passive:L}),xp.set(P,1)):xp.set(P,D+1)}}};y(Qq(UW)),M7.add(y);var x=void 0,E=EW(()=>{var k=i??e.appendChild(FO());return Nx(()=>{if(h){sp({});var I=Ti;I.c=h}s&&(n.$$events=s),x=t(k,n)||{},h&&op()}),()=>{var L;for(var I of m){e.removeEventListener(I,O1);var P=xp.get(I);--P===0?(document.removeEventListener(I,O1),xp.delete(I)):xp.set(I,P)}M7.delete(y),k!==i&&((L=k.parentNode)==null||L.removeChild(k))}});return KW.set(x,E),x}let KW=new WeakMap;function nP(t,e,i=!1){var n=t,s=null,h=null,f=Dr,m=i?X6:0,y=!1;const x=(k,I=!0)=>{y=!0,E(I,k)},E=(k,I)=>{f!==(f=k)&&(f?(s?S7(s):I&&(s=Nx(()=>I(n))),h&&Lx(h,()=>{h=null})):(h?S7(h):I&&(h=Nx(()=>I(n))),s&&Lx(s,()=>{s=null})))};VO(()=>{y=!1,e(x),y||E(null,null)},m)}function ZW(t,e,i){tT(()=>{var n=Zf(()=>e(t,i==null?void 0:i())||{});if(n!=null&&n.destroy)return()=>n.destroy()})}function JW(t,e,i,n){var s=t.__attributes??(t.__attributes={});s[e]!==(s[e]=i)&&(e==="style"&&"__styles"in t&&(t.__styles={}),e==="loading"&&(t[oW]=i),i==null?t.removeAttribute(e):typeof i!="string"&&rP(t).includes(e)?t[e]=i:t.setAttribute(e,i))}function Ie(t,e,i){var n=mi,s=Pt;dl(null),pl(null);try{(Ux.has(t.nodeName)||customElements.get(t.tagName.toLowerCase())?rP(t).includes(e):i&&typeof i=="object")?t[e]=i:JW(t,e,i==null?i:String(i))}finally{dl(n),pl(s)}}var Ux=new Map;function rP(t){var e=Ux.get(t.nodeName);if(e)return e;Ux.set(t.nodeName,e=[]);for(var i,n=t,s=Element.prototype;s!==n;){i=AO(n);for(var h in i)i[h].set&&e.push(h);n=J6(n)}return e}function YW(t,e,i){var n=t.__className,s=XW(e);(n!==s||vW)&&(e==null&&!i?t.removeAttribute("class"):t.className=s,t.__className=s)}function XW(t,e){return(t??"")+""}function Vm(t=!1){const e=Ti,i=e.l.u;if(!i)return;let n=()=>jW(e.s);if(t){let s=0,h={};const f=_W(()=>{let m=!1;const y=e.s;for(const x in y)y[x]!==h[x]&&(h[x]=y[x],m=!0);return m&&s++,s});n=()=>_c(f)}i.b.length&&TW(()=>{$7(e,n),g2(i.b)}),Px(()=>{const s=Zf(()=>i.m.map(nW));return()=>{for(const h of s)typeof h=="function"&&h()}}),i.a.length&&Px(()=>{$7(e,n),g2(i.a)})}function $7(t,e){if(t.l.s)for(const i of t.l.s)_c(i);e()}function QW(t){var e=Zo(0);return function(){return arguments.length===1?(Xa(e,_c(e)+1),arguments[0]):(_c(e),t())}}function eK(t){Ti===null&&XO(),Gm&&Ti.l!==null?iK(Ti).m.push(t):Px(()=>{const e=Zf(t);if(typeof e=="function")return e})}function tK(t,e,{bubbles:i=!1,cancelable:n=!1}={}){return new CustomEvent(t,{detail:e,bubbles:i,cancelable:n})}function sP(){const t=Ti;return t===null&&XO(),(e,i,n)=>{var h;const s=(h=t.s.$$events)==null?void 0:h[e];if(s){const f=Z6(s)?s.slice():[s],m=tK(e,i,n);for(const y of f)y.call(t.x,m);return!m.defaultPrevented}return!0}}function iK(t){var e=t.l;return e.u??(e.u={a:[],b:[],m:[]})}function oP(t,e,i){if(t==null)return e(void 0),i&&i(void 0),qh;const n=Zf(()=>t.subscribe(e,i));return n.unsubscribe?()=>n.unsubscribe():n}function Fh(t,e,i){const n=i[e]??(i[e]={store:null,source:mW(void 0),unsubscribe:qh});if(n.store!==t)if(n.unsubscribe(),n.store=t??null,t==null)n.source.v=void 0,n.unsubscribe=qh;else{var s=!0;n.unsubscribe=oP(t,h=>{s?n.source.v=h:Xa(n.source,h)}),s=!1}return _c(n.source)}function o3(){const t={};return HO(()=>{for(var e in t)t[e].unsubscribe()}),t}function nK(t,e,i){return t.set(i),e}const Sp=[];function aP(t,e){return{subscribe:rT(t,e).subscribe}}function rT(t,e=qh){let i=null;const n=new Set;function s(m){if(NO(t,m)&&(t=m,i)){const y=!Sp.length;for(const x of n)x[1](),Sp.push(x,t);if(y){for(let x=0;x<Sp.length;x+=2)Sp[x][0](Sp[x+1]);Sp.length=0}}}function h(m){s(m(t))}function f(m,y=qh){const x=[m,y];return n.add(x),n.size===1&&(i=e(s,h)||qh),m(t),()=>{n.delete(x),n.size===0&&i&&(i(),i=null)}}return{set:s,update:h,subscribe:f}}function sT(t,e,i){const n=!Array.isArray(t),s=n?[t]:t;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const h=e.length<2;return aP(i,(f,m)=>{let y=!1;const x=[];let E=0,k=qh;const I=()=>{if(E)return;k();const L=e(n?x[0]:x,f,m);h?f(L):k=typeof L=="function"?L:qh},P=s.map((L,D)=>oP(L,j=>{x[D]=j,E&=~(1<<D),y&&I()},()=>{E|=1<<D}));return y=!0,I(),function(){g2(P),k(),y=!1}})}let nb=class Lu{constructor(e=1){this._seed=e}set seed(e){this._seed=e??Math.random()*Lu._m}getInt(){return this._seed=(Lu._a*this._seed+Lu._c)%Lu._m,this._seed}getFloat(){return this.getInt()/(Lu._m-1)}getIntRange(e,i){return Math.round(this.getFloatRange(e,i))}getFloatRange(e,i){const n=i-e;return e+this.getInt()/Lu._m*n}};nb._m=2147483647,nb._a=48271,nb._c=0;const rK=1.5,iTe=1/rK,nTe=.5;function rTe(t,e){return e?t.filter((i,n,s)=>s.findIndex(e.bind(null,i))===n):Array.from(new Set(t))}function fl(t,e,i){if(t==null&&e==null)return!0;if(t==null||e==null||t.length!==e.length)return!1;if(i){for(let n=0;n<t.length;n++)if(!i(t[n],e[n]))return!1}else for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Bx(t,e,i){let n,s;return i?(n=e.filter(h=>!t.some(f=>i(f,h))),s=t.filter(h=>!e.some(f=>i(f,h)))):(n=e.filter(h=>!t.includes(h)),s=t.filter(h=>!e.includes(h))),{added:n,removed:s}}function sTe(t){return t&&typeof t.length=="number"}let lP=class{constructor(){this.last=0}};const cP=new lP;function Hx(t,e,i,n){n=n||cP;const s=Math.max(0,n.last-10);for(let f=s;f<i;++f)if(t[f]===e)return n.last=f,f;const h=Math.min(s,i);for(let f=0;f<h;++f)if(t[f]===e)return n.last=f,f;return-1}function sK(t,e,i,n){const s=t.length,h=Hx(t,e,s,n);if(h!==-1)return t[h]=t[s-1],t.pop(),e}const Mo=new Set;function oK(t,e,i=t.length,n=e.length,s,h){if(n===0||i===0)return i;Mo.clear();for(let m=0;m<n;++m)Mo.add(e[m]);s=s||cP;const f=Math.max(0,s.last-10);for(let m=f;m<i;++m)if(Mo.has(t[m])&&(h==null||h.push(t[m]),Mo.delete(t[m]),t[m]=t[i-1],--i,--m,Mo.size===0||i===0))return Mo.clear(),i;for(let m=0;m<f;++m)if(Mo.has(t[m])&&(h==null||h.push(t[m]),Mo.delete(t[m]),t[m]=t[i-1],--i,--m,Mo.size===0||i===0))return Mo.clear(),i;return Mo.clear(),i}function aTe(t,e){let i=0;for(let n=0;n<t.length;++n){const s=t[n];e(s,n)&&(t[i]=s,i++)}t.length=i}function aK(t){return t?(k7.seed=t,()=>k7.getFloat()):Math.random}function lTe(t,e){const i=aK(e);for(let n=t.length-1;n>0;n--){const s=Math.floor(i()*(n+1)),h=t[n];t[n]=t[s],t[s]=h}return t}const k7=new nb;function a3(t,e){const i=t.indexOf(e);return i!==-1?(t.splice(i,1),e):null}function Yi(t,e){return t!=null}const cTe=[];function hP(t){return 32+t.length}function oT(){return 16}function hTe(t){if(!t)return 0;let e=dP;for(const i in t)if(t.hasOwnProperty(i)){const n=t[i];switch(typeof n){case"string":e+=hP(n);break;case"number":e+=oT();break;case"boolean":e+=4}}return e}function lK(t){if(!t)return 0;if(Array.isArray(t))return cK(t);let e=dP;for(const i in t)t.hasOwnProperty(i)&&(e+=uP(t[i]));return e}function cK(t){const e=t.length;if(e===0||typeof t[0]=="number")return 32+8*e;let i=pP;for(let n=0;n<e;n++)i+=uP(t[n]);return i}function uP(t){switch(typeof t){case"object":return lK(t);case"string":return hP(t);case"number":return oT();case"boolean":return 4;default:return 8}}function hK(t,e){return pP+t.length*e}const dP=32,pP=16;let jh;function de(t){return typeof jh[t]=="function"?jh[t]=jh[t](globalThis):jh[t]}var xO,SO,TO,EO;jh=(xO=globalThis.dojoConfig)!=null&&xO.has||(SO=globalThis.esriConfig)!=null&&SO.has?{...(TO=globalThis.dojoConfig)==null?void 0:TO.has,...(EO=globalThis.esriConfig)==null?void 0:EO.has}:{},de.add=(t,e,i,n)=>{(n||jh[t]===void 0)&&(jh[t]=e),i&&de(t)},de.cache=jh,de.add("big-integer-warning-enabled",!0),de.add("esri-deprecation-warnings",!0),de.add("esri-tests-disable-screenshots",!1),de.add("esri-tests-use-full-window",!1),de.add("esri-tests-post-to-influx",!0),de.add("esri-cim-animations-enable-status","enabled"),de.add("esri-cim-animations-spotlight",!1),de.add("esri-cim-animations-freeze-time",!1),de.add("enable-feature:multiple-highlights",!1),(()=>{var e;de.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const t=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(de.add("host-browser",t),de.add("host-node",typeof globalThis.process=="object"&&((e=globalThis.process.versions)==null?void 0:e.node)&&globalThis.process.versions.v8),de.add("dom",t),de("host-browser")){const i=navigator,n=i.userAgent,s=i.appVersion,h=parseFloat(s);if(de.add("wp",parseFloat(n.split("Windows Phone")[1])||void 0),de.add("msapp",parseFloat(n.split("MSAppHost/")[1])||void 0),de.add("khtml",s.includes("Konqueror")?h:void 0),de.add("edge",parseFloat(n.split("Edge/")[1])||void 0),de.add("opr",parseFloat(n.split("OPR/")[1])||void 0),de.add("webkit",!de("wp")&&!de("edge")&&parseFloat(n.split("WebKit/")[1])||void 0),de.add("chrome",!de("edge")&&!de("opr")&&parseFloat(n.split("Chrome/")[1])||void 0),de.add("android",!de("wp")&&parseFloat(n.split("Android ")[1])||void 0),de.add("safari",!s.includes("Safari")||de("wp")||de("chrome")||de("android")||de("edge")||de("opr")?void 0:parseFloat(s.split("Version/")[1])),de.add("mac",s.includes("Macintosh")),!de("wp")&&/(iPhone|iPod|iPad)/.test(n)){const f=RegExp.$1.replace(/P/,"p"),m=/OS ([\d_]+)/.test(n)?RegExp.$1:"1",y=parseFloat(m.replace(/_/,".").replaceAll("_",""));de.add(f,y),de.add("ios",y)}de("webkit")||(!n.includes("Gecko")||de("wp")||de("khtml")||de("edge")||de.add("mozilla",h),de("mozilla")&&de.add("ff",parseFloat(n.split("Firefox/")[1]||n.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const t=navigator.userAgent,e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(t),i=/iPhone/i.test(t);e&&de.add("esri-mobile",e),i&&de.add("esri-iPhone",i),de.add("esri-geolocation",!!navigator.geolocation)}de.add("esri-wasm","WebAssembly"in globalThis),de.add("esri-performance-mode-frames-between-render",20),de.add("esri-force-performance-mode",!1),de.add("esri-shared-array-buffer",()=>{const t="SharedArrayBuffer"in globalThis,e=globalThis.crossOriginIsolated===!1;return t&&!e}),de.add("wasm-simd",()=>{const t=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(t))}),de.add("esri-atomics","Atomics"in globalThis),de.add("esri-workers","Worker"in globalThis),de.add("web-feat:cache","caches"in globalThis),de.add("esri-workers-arraybuffer-transfer",!de("safari")||Number(de("safari"))>=12),de.add("workers-pool-size",8),de.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),de.add("featurelayer-simplify-payload-size-factors",[1,1,4]),de.add("featurelayer-fast-triangulation-enabled",!0),de.add("featurelayer-animation-enabled",!0),de.add("featurelayer-snapshot-enabled",!0),de.add("featurelayer-snapshot-point-min-threshold",8e4),de.add("featurelayer-snapshot-point-max-threshold",4e5),de.add("featurelayer-snapshot-point-coverage",.1),de.add("featurelayer-query-max-depth",4),de.add("featurelayer-query-pausing-enabled",!1),de.add("featurelayer-advanced-symbols",!1),de.add("featurelayer-pbf",!0),de.add("featurelayer-pbf-statistics",!1),de.add("feature-layers-workers",!0),de.add("feature-polyline-generalization-factor",1),de.add("mapview-transitions-duration",200),de.add("mapview-essential-goto-duration",200),de.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),de.add("mapserver-pbf-version-support",10.81),de.add("mapservice-popup-identify-max-tolerance",20),de("host-webworker")||de("host-browser")&&(de.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),de.add("esri-image-decode",()=>{if("decode"in new Image){const t=new Image;return t.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void t.decode().then(()=>{de.add("esri-image-decode",!0,!0,!0)}).catch(()=>{de.add("esri-image-decode",!1,!0,!0)})}return!1}),de.add("esri-url-encodes-apostrophe",()=>{const t=window.document.createElement("a");return t.href="?'",t.href.includes("?%27")}))})();function uTe(t){return t instanceof ArrayBuffer}function aT(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int8Array"}function fP(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint8Array"}function gP(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint8ClampedArray"}function lT(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int16Array"}function mP(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint16Array"}function cT(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int32Array"}function yP(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint32Array"}function qm(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Float32Array"}function Wm(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Float64Array"}function vP(t){return!("buffer"in t)}function dTe(...t){return t.reduce((e,i)=>e+(i?vP(i)?hK(i,oT()):i.byteLength+uK:0),0)}const uK=145,bP=1024;function pTe(t){return Wm(t)||qm(t)||cT(t)||lT(t)||aT(t)}function fTe(t){return Wm(t)||qm(t)}function gTe(t){return Wm(t)?179769e303:qm(t)?3402823e32:yP(t)?4294967295:mP(t)?65535:fP(t)||gP(t)?255:cT(t)?2147483647:lT(t)?32767:aT(t)?127:256}function dK(t,e){let i;for(i in t)t.hasOwnProperty(i)&&t[i]===void 0&&delete t[i];return t}function _e(t){if(!t||typeof t!="object"||typeof t=="function")return t;const e=xP(t);if(e!=null)return e;if(w2(t))return t.clone();if(wP(t))return t.map(_e);if(_P(t))return t.clone();const i={};for(const n of Object.getOwnPropertyNames(t))i[n]=_e(t[n]);return i}function Vx(t){if(!t||typeof t!="object"||typeof t=="function"||"HTMLElement"in globalThis&&t instanceof HTMLElement)return t;const e=xP(t);if(e!=null)return e;if(wP(t)){let i=!0;const n=t.map(s=>{const h=Vx(s);return s!=null&&h==null&&(i=!1),h});return i?n:null}if(w2(t))return t.clone();if(t instanceof File||t instanceof Blob)return t;if(!_P(t)){const i=new(Object.getPrototypeOf(t)).constructor;for(const n of Object.getOwnPropertyNames(t)){const s=t[n],h=Vx(s);if(s!=null&&h==null)return null;i[n]=h}return i}return null}function w2(t){return typeof t.clone=="function"}function wP(t){return typeof t.map=="function"&&typeof t.forEach=="function"}function _P(t){return typeof t.notifyChange=="function"&&typeof t.watch=="function"}function C7(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function xP(t){if(aT(t)||fP(t)||gP(t)||lT(t)||mP(t)||cT(t)||yP(t)||qm(t)||Wm(t))return t.slice();if(t instanceof Date)return new Date(t.getTime());if(t instanceof ArrayBuffer)return t.slice(0,t.byteLength);if(t instanceof Map){const e=new Map;for(const[i,n]of t)e.set(i,_e(n));return e}if(t instanceof Set){const e=new Set;for(const i of t)e.add(_e(i));return e}return null}function hT(t,e){return t===e||typeof t=="number"&&isNaN(t)&&typeof e=="number"&&isNaN(e)||typeof(t==null?void 0:t.getTime)=="function"&&typeof(e==null?void 0:e.getTime)=="function"&&t.getTime()===e.getTime()||!1}function SP(t,e){return t===e||(t==null||typeof t=="string"?t===e:typeof t=="number"?t===e||typeof e=="number"&&isNaN(t)&&isNaN(e):t instanceof Date?e instanceof Date&&t.getTime()===e.getTime():Array.isArray(t)?Array.isArray(e)&&fl(t,e):t instanceof Set?e instanceof Set&&fK(t,e):t instanceof Map?e instanceof Map&&gK(t,e):!!C7(t)&&C7(e)&&pK(t,e))}function pK(t,e){if(t===null||e===null)return!1;const i=Object.keys(t);if(e===null||Object.keys(e).length!==i.length)return!1;for(const n of i)if(t[n]!==e[n]||!Object.prototype.hasOwnProperty.call(e,n))return!1;return!0}function fK(t,e){if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}function gK(t,e){if(t.size!==e.size)return!1;for(const[i,n]of t){const s=e.get(i);if(s!==n||s===void 0&&!e.has(i))return!1}return!0}function _(t,e,i,n){var s,h=arguments.length,f=h<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,i):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(t,e,i,n);else for(var m=t.length-1;m>=0;m--)(s=t[m])&&(f=(h<3?s(f):h>3?s(e,i,f):s(e,i))||f);return h>3&&f&&Object.defineProperty(e,i,f),f}function mTe(t,e){return function(i,n){e(i,n,t)}}function yTe(t,e,i,n){function s(h){return h instanceof i?h:new i(function(f){f(h)})}return new(i||(i=Promise))(function(h,f){function m(E){try{x(n.next(E))}catch(k){f(k)}}function y(E){try{x(n.throw(E))}catch(k){f(k)}}function x(E){E.done?h(E.value):s(E.value).then(m,y)}x((n=n.apply(t,[])).next())})}const I7=new WeakMap;function mK(t,e,i=!1){const n=`ðŸ›‘ DEPRECATED - ${e}`;if(!i)return void t.warn(n);let s=I7.get(t);s||(s=new Set,I7.set(t,s)),s.has(e)||(s.add(e),t.warn(n))}function TP(t,e,i={}){if(de("esri-deprecation-warnings")){const{moduleName:n}=i;Jf(t,`Function: ${(n?n+"::":"")+e+"()"}`,i)}}function _2(t,e,i={}){if(de("esri-deprecation-warnings")){const{moduleName:n}=i;Jf(t,`Property: ${(n?n+"::":"")+e}`,i)}}function yK(t,e,i={}){de("esri-deprecation-warnings")&&Jf(t,`Multiple argument constructor: ${e}`,{warnOnce:!0,replacement:`new ${e}({ <your properties here> })`,...i})}function Jf(t,e,i={}){if(de("esri-deprecation-warnings")){const{replacement:n,version:s,see:h,warnOnce:f}=i;let m=e;n&&(m+=`
	ðŸ› ï¸ Replacement: ${n}`),s&&(m+=`
	âš™ï¸ Version: ${s}`),h&&(m+=`
	ðŸ”— See ${h} for more details.`),mK(t,m,f)}}function vTe(t){const e=[];return function*(){yield*e;for(const i of t)e.push(i),yield i}}function vK(t,e){for(const i of t)if(i!=null&&e(i))return i}function x2(t){return t!=null&&typeof t[Symbol.iterator]=="function"}let k0=class{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach(i=>{e+=i.length}),e}add(e,i){if(x2(e)){const n=this._getOrCreateGroup(i);for(const s of e)O7(s)&&n.push(s)}else O7(e)&&this._getOrCreateGroup(i).push(e);return this}forEach(e,i){if(typeof e=="function")this._groups.forEach(n=>n.forEach(e));else{const n=this._getGroup(e);n&&i&&n.forEach(i)}}has(e){return this._groups.has(Uy(e))}remove(e){if(typeof e!="string"&&x2(e)){for(const i of e)this.remove(i);return this}return this.has(e)?(A7(this._getGroup(e)),this._groups.delete(Uy(e)),this):this}removeAll(){return this._groups.forEach(A7),this._groups.clear(),this}removeReference(e){return this._groups.delete(e),this}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const i=[];return this._groups.set(Uy(e),i),i}_getGroup(e){return this._groups.get(Uy(e))}};function Uy(t){return t||"_default_"}function A7(t){for(const e of t)e instanceof k0?e.removeAll():e.remove()}function O7(t){return t!=null&&(!!t.remove||t instanceof k0)}function bK(t,e,i=!1){return MP(t,e,i)}function Km(t,e){if(e!=null)return e[t]||EP(t.split("."),!1,e)}function lp(t,e,i){const n=t.split("."),s=n.pop(),h=EP(n,!0,i);h&&s&&(h[s]=e)}function P7(t,e){if(t==null&&e==null)return!1;if(t==null||e==null)return!0;if(typeof t=="object"){if(Array.isArray(t)){const i=e;if(t.length!==i.length)return!0;for(let n=0;n<t.length;n++)if(P7(t[n],i[n]))return!0;return!1}if(Object.keys(t).length!==Object.keys(e).length)return!0;for(const i in t)if(P7(t[i],e[i]))return!0;return!1}return t!==e}function EP(t,e,i){let n=i;for(const s of t){if(n==null)return;if(!(s in n)){if(!e)return;n[s]={}}n=n[s]}return n}function MP(t,e,i){return e?Object.keys(e).reduce((n,s)=>{let h=n[s],f=e[s];return h===f?n:h===void 0?(n[s]=_e(f),n):(Array.isArray(f)||Array.isArray(n)?(h=h?Array.isArray(h)?n[s]=h.slice():n[s]=[h]:n[s]=[],f&&(Array.isArray(f)||(f=[f]),i?f.forEach(m=>{h.includes(m)||h.push(m)}):n[s]=f.slice())):f&&typeof f=="object"?n[s]=MP(h,f,i):n.hasOwnProperty(s)&&!e.hasOwnProperty(s)||(n[s]=f),n)},t||{}):t}var MO;const _t={apiKey:void 0,applicationName:"",applicationUrl:(MO=globalThis.location)==null?void 0:MO.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!0,portalUrl:"https://www.arcgis.com",respectPrefersReducedMotion:!0,routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],internalInterceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:62e3,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(bK(_t,globalThis.esriConfig,!0),delete _t.has),!_t.assetsPath){{const t="4.31";_t.assetsPath=`https://js.arcgis.com/${t}/@arcgis/core/assets`}_t.defaultAssetsPath=_t.assetsPath}const wK=/\{([^}]+)\}/g;function R7(t){return t??""}function uT(t,e){return e?t.replaceAll(wK,typeof e=="object"?(i,n)=>R7(Km(n,e)):(i,n)=>R7(e(n))):t}function _K(t,e){return t.replaceAll(/([.$?*|{}()[\]\\/+\-^])/g,i=>e!=null&&e.includes(i)?i:`\\${i}`)}function $P(t){let e=0;for(let i=0;i<t.length;i++)e=(e<<5)-e+t.charCodeAt(i),e|=0;return e}let N7;function wTe(t){return N7??(N7=new DOMParser),N7.parseFromString(t||"","text/html").body.innerText||""}function _Te(t,e){return new RegExp(`{${e}}`,"ig").test(t)}function xTe(t,...e){let i=t[0];for(let n=0;n<e.length;++n)i+=e[n]+t[n+1];return i}const L7={info:0,warn:1,error:2,none:3};let Ae=class us{constructor(e){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},e.level!=null&&(this.level=e.level),e.writer!=null&&(this.writer=e.writer),this._module=e.module,us._loggers.set(this.module,this);const i=this.module.lastIndexOf(".");i!==-1&&(this._parent=us.getLogger(this.module.slice(0,i)))}get module(){return this._module}get parent(){return this._parent}error(...e){this._log("error","always",...e)}warn(...e){this._log("warn","always",...e)}info(...e){this._log("info","always",...e)}errorOnce(...e){this._log("error","once",...e)}warnOnce(...e){this._log("warn","once",...e)}infoOnce(...e){this._log("info","once",...e)}errorOncePerTick(...e){this._log("error","oncePerTick",...e)}warnOncePerTick(...e){this._log("warn","oncePerTick",...e)}infoOncePerTick(...e){this._log("info","oncePerTick",...e)}get test(){}static get test(){}static getLogger(e){return e=typeof e!="string"?e.declaredClass:e,us._loggers.get(e)||new us({module:e})}_log(e,i,...n){if(this._matchLevel(e)){if(i!=="always"&&!us._throttlingDisabled){const s=SK(n),h=this._loggedMessages[e].get(s);if(i==="once"&&h!=null||i==="oncePerTick"&&h&&h>=us._tickCounter)return;this._loggedMessages[e].set(s,us._tickCounter),us._scheduleTickCounterIncrement()}for(const s of _t.log.interceptors)if(s(e,this.module,...n))return;this._inheritedWriter()(e,this.module,...n)}}_parentWithMember(e,i){let n=this;for(;n!=null;){const s=n[e];if(s!=null)return s;n=n.parent}return i}_inheritedWriter(){return this._parentWithMember("writer",xK)}_matchLevel(e){const i=_t.log.level||"warn";return L7[this._parentWithMember("level",i)]<=L7[e]}static _scheduleTickCounterIncrement(){us._tickCounterScheduled||(us._tickCounterScheduled=!0,Promise.resolve().then(()=>{us._tickCounter++,us._tickCounterScheduled=!1}))}};function xK(t,e,...i){console[t](`[${e}]`,...i)}function SK(...t){return $P(JSON.stringify(t,(i,n)=>typeof n!="object"||Array.isArray(n)?n:"[Object]"))}Ae._loggers=new Map,Ae._tickCounter=0,Ae._tickCounterScheduled=!1,Ae._throttlingDisabled=!1;function kP(t,e){if(t==null)throw new Error(e??"value is None")}function mt(t){return t==null||t.destroy(),null}function STe(t){return t==null||t.dispose(),null}function Rt(t){return t==null||t.remove(),null}function Ms(t){return t==null||t.abort(),null}function TTe(t){return t==null||t.release(),null}function CP(t,e,i){return t!=null&&e!=null?i!=null?i(t,e):t.equals(e):t===e}function om(t,e){let i;return t.some((n,s)=>(i=e(n,s),i!=null)),i??void 0}const IP=Symbol("Accessor-beforeDestroy"),TK={remove:()=>{}};function ct(t){return t?{remove(){t&&(t(),t=void 0)}}:TK}function AP(t){t.forEach(e=>e==null?void 0:e.remove())}function _a(t){AP(t),t.length=0}function Dc(t){return ct(()=>AP(t))}function ETe(t){return ct(()=>{var e;return(e=t())==null?void 0:e.remove()})}function MTe(t){return ct(()=>t==null?void 0:t.abort())}function EK(t){return ct(t!=null?()=>t.destroy():void 0)}function Cc(t){return t.__accessor__??null}function MK(t,e){var i;return((i=t==null?void 0:t.metadata)==null?void 0:i[e])!=null}function rb(t,e,i){return i?S2(t,e,{policy:i,path:""}):S2(t,e,null)}function S2(t,e,i){return e?Object.keys(e).reduce((n,s)=>{const h=s;let f=null,m="merge";if(i&&(f=i.path?`${i.path}.${s}`:s,m=i.policy(f)),m==="replace"||m==="replace-arrays"&&Array.isArray(n[h]))return n[h]=e[h],n;if(n[h]===void 0)return n[h]=_e(e[h]),n;let y=n[h],x=e[h];if(y===x)return n;if(Array.isArray(x)||Array.isArray(n))y=y?Array.isArray(y)?n[h]=y.slice():n[h]=[y]:n[h]=[],x&&(Array.isArray(x)||(x=[x]),x.forEach(E=>{y.includes(E)||y.push(E)}));else if(x&&typeof x=="object")if(i){const E=i.path;i.path=f,n[h]=S2(y,x,i),i.path=E}else n[h]=S2(y,x,null);else n.hasOwnProperty(s)&&!e.hasOwnProperty(s)||(n[h]=x);return n},t||{}):t}function OP(t){return Array.isArray(t)?t:t.split(".")}function D7(t){return t.includes(",")?t.split(",").map(e=>e.trim()):[t.trim()]}function $K(t){if(Array.isArray(t)){const e=[];for(const i of t)e.push(...D7(i));return e}return D7(t)}function PP(t,e,i,n){const s=$K(e);if(s.length!==1){const h=s.map(f=>n(t,f,i));return Dc(h)}return n(t,s[0],i)}function RP(t,e){const i=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const s=parseInt(i,10);if(!isNaN(s))return Array.isArray(e)?e[s]:e.at(s)}const n=Cc(e);return MK(n,i)?n.get(i):e[i]}function NP(t,e,i){if(t==null)return t;const n=RP(e[i],t);return!n&&i<e.length-1?void 0:i===e.length-1?n:NP(n,e,i+1)}function Zm(t,e,i=0){return typeof e!="string"||e.includes(".")?NP(t,OP(e),i):RP(e,t)}function Kr(t,e){return Zm(t,e)}function z7(t,e){return Zm(e,t)!==void 0}var qr;(function(t){t[t.INITIALIZING=0]="INITIALIZING",t[t.CONSTRUCTING=1]="CONSTRUCTING",t[t.CONSTRUCTED=2]="CONSTRUCTED",t[t.DESTROYED=3]="DESTROYED"})(qr||(qr={}));function Jm(t){let e=t.constructor.__accessorMetadata__;const i=Object.prototype.hasOwnProperty.call(t.constructor,"__accessorMetadata__");if(e){if(!i){e=Object.create(e);for(const n in e)e[n]=_e(e[n]);Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0})}}else e={},Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0});return t.constructor.__accessorMetadata__}function l3(t,e){const i=Jm(t);let n=i[e];return n||(n=i[e]={}),n}function kK(t,e){return rb(t,e,IK)}const CK=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function IK(t){return CK.test(t)?"replace":"merge"}function AK(t){return(t==null?void 0:t.release)&&typeof t.release=="function"}function OK(t){return(t==null?void 0:t.acquire)&&typeof t.acquire=="function"}let cp=class qx{constructor(e,i,n,s=1,h=0){this._ctor=e,this._acquireFunction=i,this._releaseFunction=n,this.allocationSize=s,this._pool=new Array(h),this._initialSize=h;for(let f=0;f<h;f++)this._pool[f]=new this._ctor;this.allocationSize=Math.max(s,1)}destroy(){this.prune(0)}acquire(...e){let i;if(qx.test.disabled)i=new this._ctor;else{if(this._pool.length===0){const n=this.allocationSize;for(let s=0;s<n;s++)this._pool[s]=new this._ctor}i=this._pool.pop()}return this._acquireFunction?this._acquireFunction(i,...e):OK(i)&&i.acquire(...e),i}release(e){e&&!qx.test.disabled&&(this._releaseFunction?this._releaseFunction(e):AK(e)&&e.release(),this._pool.push(e))}prune(e=this._initialSize){if(!(e>=this._pool.length)){for(let i=e;i<this._pool.length;++i){const n=this._pool[i];this._dispose(n)}this._pool.length=e}}_dispose(e){e.dispose&&typeof e.dispose=="function"&&e.dispose()}};cp.test={disabled:!1};let PK=class{constructor(e,i){this._observers=e,this._observer=i}remove(){a3(this._observers,this._observer)}},LP=class{constructor(){this._observers=null,this.destroyed=!1}observe(e){if(this.destroyed||e.destroyed)return RK;this._observers==null&&(this._observers=[]);const i=this._observers;let n=!1,s=!1;const h=i.length;for(let f=0;f<h;++f){const m=i[f];if(m.destroyed)s=!0;else if(m===e){n=!0;break}}return n||(i.push(e),s&&this._removeDestroyedObservers()),new PK(i,e)}_removeDestroyedObservers(){const e=this._observers;if(!e||e.length===0)return;const i=e.length;let n=0;for(let s=0;s<i;++s){for(;s+n<i&&e[s+n].destroyed;)++n;if(n>0){if(!(s+n<i))break;e[s]=e[s+n]}}e.length=i-n}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this._observers;if(e!=null){for(const i of e)i.onCommitted();this._observers=null}}};const RK=ct();var St;(function(t){t[t.DEFAULTS=0]="DEFAULTS",t[t.COMPUTED=1]="COMPUTED",t[t.SERVICE=2]="SERVICE",t[t.PORTAL_ITEM=3]="PORTAL_ITEM",t[t.WEB_SCENE=4]="WEB_SCENE",t[t.WEB_MAP=5]="WEB_MAP",t[t.LINK_CHART=6]="LINK_CHART",t[t.USER=7]="USER"})(St||(St={}));const CTe=St.USER+1;function DP(t){switch(t){case"defaults":return St.DEFAULTS;case"service":return St.SERVICE;case"portal-item":return St.PORTAL_ITEM;case"web-scene":return St.WEB_SCENE;case"web-map":return St.WEB_MAP;case"link-chart":return St.LINK_CHART;case"user":return St.USER;default:return null}}function Wx(t){switch(t){case St.DEFAULTS:return"defaults";case St.SERVICE:return"service";case St.PORTAL_ITEM:return"portal-item";case St.WEB_SCENE:return"web-scene";case St.WEB_MAP:return"web-map";case St.LINK_CHART:return"link-chart";case St.USER:return"user"}}function NK(t){return Wx(t)}var Ft;(function(t){t[t.Dirty=1]="Dirty",t[t.Overridden=2]="Overridden",t[t.Computing=4]="Computing",t[t.NonNullable=8]="NonNullable",t[t.HasDefaultValue=16]="HasDefaultValue",t[t.DepTrackingInitialized=32]="DepTrackingInitialized",t[t.AutoTracked=64]="AutoTracked",t[t.ExplicitlyTracking=128]="ExplicitlyTracking"})(Ft||(Ft={}));let c3=class{constructor(e){this.accessed=void 0,this._handles=void 0,this._observer=e}destroy(){var e;(e=this.accessed)==null||e.clear(),this.clear()}onAccessed(e){this._observer!=null&&e!==this._observer&&(this.accessed==null&&(this.accessed=new Set),this.accessed.add(e))}onTrackingEnd(){this._observer!=null&&(this.clear(),this.accessed!=null&&(this._handles==null&&(this._handles=[]),this.accessed.forEach(e=>{this._handles.push(e.observe(this._observer))}),this.accessed.clear()))}clear(){if(this._handles!=null){for(let e=0;e<this._handles.length;++e)this._handles[e].remove();this._handles.length=0}}};const T2=new c3,P1=[];let Ag=T2;function Ge(t){Ag.onAccessed(t)}let sb=!1,ob=!1;function Ic(t,e,i){if(sb)return dT(t,e,i);let n=null;return zP(t),n=e.call(i),FP(),n}function LK(t,e){return Ic(T2,t,e)}function dT(t,e,i){const n=sb;sb=!0,zP(t);let s=null;try{s=e.call(i)}catch(h){ob&&Ae.getLogger("esri.core.accessorSupport.tracking").error(h)}return FP(),sb=n,s}function zP(t){Ag=t,P1.push(t)}function FP(){const t=P1.length;if(t>1){const e=P1.pop();Ag=P1[t-2],e.onTrackingEnd()}else if(t===1){const e=P1.pop();Ag=T2,e.onTrackingEnd()}else Ag=T2}function jP(t,e){if(e.flags&Ft.DepTrackingInitialized)return;e.flags|=Ft.DepTrackingInitialized;const i=ob;ob=!1,e.flags&Ft.AutoTracked?dT(e.trackingTarget,e.metadata.get,t):GP(t,e),ob=i}const DK=[];function GP(t,e){e.flags&Ft.ExplicitlyTracking||(e.flags|=Ft.ExplicitlyTracking,dT(e.trackingTarget,()=>{const i=e.metadata.dependsOn||DK;for(const n of i)if(typeof n!="string"||n.includes(".")){const s=OP(n);for(let h=0,f=t;h<s.length&&f!=null&&typeof f=="object";++h)f=F7(f,s[h],h!==s.length-1)}else F7(t,n,!1)}),e.flags&=~Ft.ExplicitlyTracking)}function F7(t,e,i){const n=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const h=parseInt(n,10);if(!isNaN(h))return Array.isArray(t)?t[h]:t.at(h)}const s=Cc(t);if(s){const h=s.propertiesByName.get(n);h&&(Ge(h),jP(t,h))}return i?t[n]:void 0}let j7=class extends LP{constructor(e,i){super(),this.propertyName=e,this.metadata=i,this.trackingTarget=new c3(this),this.flags=0,this.flags=Ft.Dirty|(i.nonNullable?Ft.NonNullable:0)|(i.hasOwnProperty("value")?Ft.HasDefaultValue:0)|(i.get===void 0?Ft.DepTrackingInitialized:0)|(i.dependsOn===void 0?Ft.AutoTracked:0)}destroy(){this.flags&Ft.Dirty&&this.onCommitted(),super.destroy(),this.trackingTarget.destroy()}getComputed(e){e.mutable&&Ge(this);const i=e.store,n=this.propertyName,s=this.flags,h=i.get(n);if(s&Ft.Computing||~s&Ft.Dirty&&i.has(n))return h;this.flags|=Ft.Computing;const f=e.host;let m;s&Ft.AutoTracked?m=Ic(this.trackingTarget,this.metadata.get,f):(GP(f,this),m=this.metadata.get.call(f)),this.flags|=Ft.DepTrackingInitialized,i.set(n,m,St.COMPUTED);const y=i.get(n);return y===h?this.flags&=~Ft.Dirty:LK(this.commit,this),this.flags&=~Ft.Computing,y}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=~Ft.Dirty,this.onCommitted()}onInvalidated(){~this.flags&Ft.Overridden&&(this.flags|=Ft.Dirty);const e=this._observers;if(e&&e.length>0)for(const i of e)i.onInvalidated()}onCommitted(){const e=this._observers;if(e&&e.length>0){const i=e.slice();for(const n of i)n.onCommitted()}}},zK=class UP{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const i=new UP;return this._values.forEach((n,s)=>{e&&e.has(s)||i.set(s,_e(n))}),i}get(e){return this._values.get(e)}originOf(){return St.USER}keys(){return[...this._values.keys()]}set(e,i){this._values.set(e,i)}delete(e){this._values.delete(e)}has(e){return this._values.has(e)}forEach(e){this._values.forEach(e)}};function By(t,e,i){return t!==void 0}function G7(t,e,i,n){return t!==void 0&&(!(i==null&&t.flags&Ft.NonNullable)||(n.lifecycle,qr.INITIALIZING,!1))}let FK=class{constructor(e){this.host=e,this.propertiesByName=new Map,this.ctorArgs=null,this.lifecycle=qr.INITIALIZING,this.store=new zK,this.mutable=!0,this._origin=St.USER;const i=this.host.constructor.__accessorMetadata__;for(const n in i){const s=new j7(n,i[n]);this.propertiesByName.set(n,s)}this.metadata=i}initialize(){this.lifecycle=qr.CONSTRUCTING}constructed(){this.lifecycle=qr.CONSTRUCTED}destroy(){this.lifecycle=qr.DESTROYED,this.propertiesByName.forEach(e=>e.destroy())}get initialized(){return this.lifecycle!==qr.INITIALIZING}get(e){const i=this.propertiesByName.get(e);if(i.metadata.get)return i.getComputed(this);this.mutable&&Ge(i);const n=this.store;return n.has(e)?n.get(e):i.metadata.value}originOf(e){const i=this.store.originOf(e);if(i===void 0){const n=this.propertiesByName.get(e);if(n!==void 0&&n.flags&Ft.HasDefaultValue)return"defaults"}return Wx(i)}has(e){return this.propertiesByName.has(e)&&this.store.has(e)}keys(){return[...this.propertiesByName.keys()]}internalGet(e){const i=this.propertiesByName.get(e);if(By(i))return this.store.has(e)?this.store.get(e):i.metadata.value}internalSet(e,i){const n=this.propertiesByName.get(e);By(n)&&this._internalSet(n,i)}getDependsInfo(e,i,n){const s=this.propertiesByName.get(i);if(!By(s))return"";const h=new c3,f=Ic(h,()=>{var x;return(x=s.metadata.get)==null?void 0:x.call(e)});let m=`${n}${e.declaredClass.split(".").pop()}.${i}: ${f}
`;const y=h.accessed??new Set;if(y.size===0)return m;n+="  ";for(const x of y)x instanceof j7&&(m+=`${n}${x.propertyName}: undefined
`);return m}setAtOrigin(e,i,n){const s=this.propertiesByName.get(e);if(By(s))return this._setAtOrigin(s,i,n)}isOverridden(e){const i=this.propertiesByName.get(e);return i!==void 0&&!!(i.flags&Ft.Overridden)}clearOverride(e){const i=this.propertiesByName.get(e);i&&i.flags&Ft.Overridden&&(i.flags&=~Ft.Overridden,i.notifyChange())}override(e,i){const n=this.propertiesByName.get(e);if(!G7(n,e,i,this))return;const s=n.metadata.cast;if(s){const h=this._cast(s,i),{valid:f,value:m}=h;if(J_.release(h),!f)return;i=m}n.flags|=Ft.Overridden,this._internalSet(n,i)}set(e,i){const n=this.propertiesByName.get(e);if(!G7(n,e,i,this))return;const s=n.metadata.cast;if(s){const f=this._cast(s,i),{valid:m,value:y}=f;if(J_.release(f),!m)return;i=y}const h=n.metadata.set;h?h.call(this.host,i):this._internalSet(n,i)}setDefaultOrigin(e){this._origin=DP(e)}getDefaultOrigin(){return Wx(this._origin)}notifyChange(e){const i=this.propertiesByName.get(e);i!==void 0&&i.notifyChange()}invalidate(e){const i=this.propertiesByName.get(e);i!==void 0&&i.invalidate()}commit(e){const i=this.propertiesByName.get(e);i!==void 0&&i.commit()}_internalSet(e,i){const n=this.lifecycle!==qr.INITIALIZING?this._origin:St.DEFAULTS;this._setAtOrigin(e,i,n)}_setAtOrigin(e,i,n){const s=this.store,h=e.propertyName;s.has(h,n)&&hT(i,s.get(h))&&~e.flags&Ft.Overridden&&n===s.originOf(h)||(e.invalidate(),s.set(h,i,n),e.commit(),jP(this.host,e))}_cast(e,i){const n=J_.acquire();return n.valid=!0,n.value=i,e&&(n.value=e.call(this.host,i,n)),n}},jK=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const J_=new cp(jK);function GK(t,e){return t.replaceAll(/\$\{([^\s:}]*)(?::([^\s:}]+))?\}/g,(i,n)=>n===""?"$":(Km(n,e)??"").toString())}let BP=class{constructor(e,i,n=void 0){this.name=e,this.details=n,this.message=(i&&GK(i,n))??""}toString(){return"["+this.name+"]: "+this.message}},ce=class HP extends BP{constructor(e,i,n){super(e,i,n)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(e,i)=>{if(i&&typeof i=="object"&&typeof i.toJSON=="function")return i;try{return _e(i)}catch{return"[object]"}}))}}catch(e){throw Ae.getLogger("esri.core.Error").error(e),e}return{name:this.name,message:this.message,details:this.details}}static fromJSON(e){return new HP(e.name,e.message,e.details)}};ce.prototype.type="error";function E2(t,e,i){if(t&&e)if(typeof e=="object")for(const n of Object.getOwnPropertyNames(e))E2(t,n,e[n]);else{if(e.includes(".")){const s=e.split("."),h=s.splice(-1,1)[0];return void E2(Kr(t,s),h,i)}const n=t.__accessor__;n!=null&&UK(e,n),t[e]=i}}function UK(t,e){if(de("esri-unknown-property-errors")&&!BK(t,e))throw new ce("set:unknown-property",HK(t,e))}function BK(t,e){return e.metadata[t]!=null}function HK(t,e){return"setting unknown property '"+t+"' on instance of "+e.host.declaredClass}let VK;function qK(){return VK}var U7;(function(t){t[t.Ignore=0]="Ignore",t[t.Destroy=1]="Destroy",t[t.ThrowError=2]="ThrowError"})(U7||(U7={}));function WK(t){t.length=0}let _r=class{constructor(e=50,i=50){this._pool=new cp(Array,void 0,WK,i,e)}acquire(){return this._pool.acquire()}release(e){this._pool.release(e)}prune(){this._pool.prune(0)}static acquire(){return Y_.acquire()}static release(e){return Y_.release(e)}static prune(){Y_.prune()}};const Y_=new _r(100);let VP=class extends cp{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...e){const i=super.acquire(...e);return this._set.delete(i),i}release(e){e&&!this._set.has(e)&&(super.release(e),this._set.add(e))}_dispose(e){this._set.delete(e),super._dispose(e)}};const Hy=[];function Yf(t){Hy.push(t),Hy.length===1&&queueMicrotask(()=>{const e=Hy.slice();Hy.length=0;for(const i of e)i()})}let Og=class{constructor(e,i=30){this.name=e,this._counter=0,this._samples=new Array(i)}push(e){e!=null&&(this._samples[++this._counter%this._samples.length]=e)}set(e){e!=null&&(this._samples[this._counter%this._samples.length]=e)}get median(){return this._samples.slice().sort((e,i)=>e-i)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((e,i)=>e+i,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};var Kx;(function(t){const e=(h,f,m,y)=>{let x=f,E=f;const k=m>>>1,I=h[x-1];for(;E<=k;){E=x<<1,E<m&&y(h[E-1],h[E])<0&&++E;const P=h[E-1];if(y(P,I)<=0)break;h[x-1]=P,x=E}h[x-1]=I},i=(h,f)=>h<f?-1:h>f?1:0;function n(h,f,m,y){f===void 0&&(f=0),m===void 0&&(m=h.length),y===void 0&&(y=i);for(let E=m>>>1;E>f;E--)e(h,E,m,y);const x=f+1;for(let E=m-1;E>f;E--){const k=h[f];h[f]=h[E],h[E]=k,e(h,x,E,y)}}function*s(h,f,m,y){f===void 0&&(f=0),m===void 0&&(m=h.length),y===void 0&&(y=i);for(let E=m>>>1;E>f;E--)e(h,E,m,y),yield;const x=f+1;for(let E=m-1;E>f;E--){const k=h[f];h[f]=h[E],h[E]=k,e(h,x,E,y),yield}}t.sort=n,t.iterableSort=s})(Kx||(Kx={}));const B7=Kx,KK=1.5,ZK=1.1;let Pg=class{constructor(e){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new lP,e&&(e.initialSize&&(this.data=new Array(e.initialSize)),e.allocator&&(this._allocator=e.allocator),e.deallocator!==void 0&&(this._deallocator=e.deallocator),e.shrink&&(this._shrink=()=>H7(this)))}toArray(){return this.data.slice(0,this.length)}filter(e){const i=new Array;for(let n=0;n<this._length;n++){const s=this.data[n];e(s)&&i.push(s)}return i}at(e){if((e=Math.trunc(e)||0)<0&&(e+=this._length),!(e<0||e>=this._length))return this.data[e]}includes(e,i){const n=this.data.indexOf(e,i);return n!==-1&&n<this.length}get length(){return this._length}set length(e){if(e>this._length){if(this._allocator){for(;this._length<e;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=e}else{if(this._deallocator)for(let i=e;i<this._length;++i)this.data[i]=this._deallocator(this.data[i]);this._length=e,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(e){this.data[this._length++]=e}pushArray(e,i=e.length){for(let n=0;n<i;n++)this.data[this._length++]=e[n]}fill(e,i){for(let n=0;n<i;n++)this.data[this._length++]=e}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const e=this.data[this._length];return++this._length,e}unshift(e){this.data.unshift(e),this._length++,H7(this)}pop(){if(this.length===0)return;const e=this.data[this.length-1];return this.length=this.length-1,this._shrink(),e}remove(e){const i=Hx(this.data,e,this.length,this._hint);if(i!==-1)return this.data.splice(i,1),this.length=this.length-1,e}removeUnordered(e){return this.removeUnorderedIndex(Hx(this.data,e,this.length,this._hint))}removeUnorderedIndex(e){if(!(e>=this.length||e<0))return this.swapElements(e,this.length-1),this.pop()}removeUnorderedMany(e,i=e.length,n){this.length=oK(this.data,e,this.length,i,this._hint,n),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(e,i){if(e>=this.length||i>=this.length||e===i)return;const n=this.data[e];this.data[e]=this.data[i],this.data[i]=n}sort(e){B7.sort(this.data,0,this.length,e)}iterableSort(e){return B7.iterableSort(this.data,0,this.length,e)}some(e,i){for(let n=0;n<this.length;++n)if(e.call(i,this.data[n],n,this.data))return!0;return!1}find(e,i){const{data:n,length:s}=this;for(let h=0;h<s;++h)if(e.call(i,n[h]))return n[h]}filterInPlace(e,i){let n=0;for(let s=0;s<this._length;++s){const h=this.data[s];e.call(i,h,s,this.data)&&(this.data[s]=this.data[n],this.data[n]=h,n++)}if(this._deallocator)for(let s=n;s<this._length;s++)this.data[s]=this._deallocator(this.data[s]);return this._length=n,this._shrink(),this}forAll(e,i){const{data:n,length:s}=this;for(let h=0;h<s;++h)e.call(i,n[h],h,n)}forEach(e,i){this.data.slice(0,this.length).forEach(e,i)}map(e,i){const n=new Array(this.length);for(let s=0;s<this.length;++s)n[s]=e.call(i,this.data[s],s,this.data);return n}reduce(e,i){let n=i;for(let s=0;s<this.length;++s)n=e(n,this.data[s],s,this.data);return n}has(e){const i=this.length,n=this.data;for(let s=0;s<i;++s)if(n[s]===e)return!0;return!1}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.data[e]}};function H7(t){t.data.length>KK*t.length&&(t.data.length=Math.floor(t.length*ZK))}function JK(t){return{setTimeout:(e,i)=>{const n=t.setTimeout(e,i);return ct(()=>t.clearTimeout(n))}}}const C0=JK(globalThis);function h3(t){return YK(t)||qP(t)}function YK(t){return t!=null&&typeof t=="object"&&"on"in t&&typeof t.on=="function"}function qP(t){return t!=null&&typeof t=="object"&&"addEventListener"in t&&typeof t.addEventListener=="function"}function Ym(t,e,i){if(!h3(t))throw new TypeError("target is not a Evented or EventTarget object");return qP(t)?XK(t,e,i):t.on(e,i)}function XK(t,e,i,n){if(Array.isArray(e)){const s=e.slice();for(const h of s)t.addEventListener(h,i,n);return ct(()=>{for(const h of s)t.removeEventListener(h,i,n)})}return t.addEventListener(e,i,n),ct(()=>t.removeEventListener(e,i,n))}function WP(t,e,i){if(!h3(t))throw new TypeError("target is not a Evented or EventTarget object");if("once"in t)return t.once(e,i);const n=Ym(t,e,s=>{n.remove(),i.call(t,s)});return n}function ei(t="Aborted"){return new ce("AbortError",t)}function Jt(t,e="Aborted"){if(Ps(t))throw ei(e)}function Xm(t){return t instanceof AbortSignal?t:(t==null?void 0:t.signal)??void 0}function Ps(t){const e=Xm(t);return e!=null&&e.aborted}function KP(t){if(Ir(t))throw t}function V7(t){if(!Ir(t))throw t}function $s(t,e){const i=Xm(t);if(i!=null){if(!i.aborted)return WP(i,"abort",()=>e());e()}}function pT(t,e){const i=Xm(t);if(i!=null)return Jt(i),WP(i,"abort",()=>e(ei()))}function Qm(t,e){return Xm(e)==null?t:new Promise((i,n)=>{let s=$s(e,()=>n(ei()));const h=()=>{s=Rt(s)};t.then(h,h),t.then(i,n)})}function Ir(t){return(t==null?void 0:t.name)==="AbortError"}async function Yr(t){try{return await t}catch(e){if(!Ir(e))throw e;return}}async function $d(t){if(!t)return;if(typeof t.forEach!="function"){const i=Object.keys(t),n=i.map(f=>t[f]),s=await $d(n),h={};return i.map((f,m)=>h[f]=s[m]),h}const e=t;return Promise.allSettled(e).then(i=>Array.from(e,(n,s)=>{const h=i[s];return h.status==="fulfilled"?{promise:n,value:h.value}:{promise:n,error:h.reason}}))}async function QK(t){return(await Promise.allSettled(t)).filter(e=>e.status==="fulfilled").map(e=>e.value)}async function FTe(t){return(await Promise.allSettled(t)).filter(e=>e.status==="rejected").map(e=>e.reason)}function fT(t,e=void 0,i){const n=new AbortController;return $s(i,()=>n.abort()),new Promise((s,h)=>{let f=setTimeout(()=>{f=0,s(e)},t);$s(n,()=>{f&&(clearTimeout(f),h(ei()))})})}function eZ(t,e){const i=new AbortController,n=setTimeout(()=>i.abort(),e);return $s(t,()=>{i.abort(),clearTimeout(n)}),{...t,signal:i.signal}}function Ml(t){return t&&typeof t.then=="function"}function Zx(t){return Ml(t)?t:Promise.resolve(t)}function u3(t,e=-1){let i,n,s,h,f=null;const m=(...y)=>{if(i){n=y,h&&h.reject(ei()),h=Rs();const I=h.promise;if(f){const P=f;f=null,P.abort()}return I}if(s=h||Rs(),h=null,e>0){const I=new AbortController;i=Zx(t(...y,I.signal));const P=i;fT(e).then(()=>{i===P&&(h?I.abort():f=I)})}else i=1,i=Zx(t(...y));const x=()=>{const I=n;n=s=i=f=null,I!=null&&m(...I)},E=i,k=s;return E.then(x,x),E.then(k.resolve,k.reject),k.promise};return m}function Rs(){let t,e;const i=new Promise((s,h)=>{t=s,e=h}),n=s=>{t(s)};return n.resolve=s=>t(s),n.reject=s=>e(s),n.timeout=(s,h)=>C0.setTimeout(()=>n.reject(h),s),n.promise=i,n}async function q7(t){await Promise.resolve(),Jt(t)}function jTe(t){return t}function tZ(t){return 1e3*t}function GTe(t){return t}function UTe(t){return .001*t}let iZ=class{constructor(e){this.phases=e,this.paused=!1,this.ticks=-1,this.removed=!1}},nZ=class{constructor(e){this.callback=e,this.isActive=!0}remove(){this.isActive=!1}},Jx=0;const Y0={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},Yx=["prepare","preRender","render","postRender","update","finish"],Xx=[],Vd=new Pg;let rZ=class{constructor(e){this._task=e}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}};function sZ(){Nd!=null&&(cancelAnimationFrame(Nd),Nd=requestAnimationFrame(gT))}const M2={frameTasks:Vd,willDispatch:!1,clearFrameTasks:oZ,dispatch:JP,executeFrameTasks:aZ,reschedule:sZ};function ey(t){const e=new nZ(t);return Xx.push(e),M2.willDispatch||(M2.willDispatch=!0,Yf(JP)),e}function Xf(t){const e=new iZ(t);return Vd.push(e),Nd==null&&(Jx=performance.now(),Nd=requestAnimationFrame(gT)),new rZ(e)}let Nd=null;function oZ(t=!1){Vd.forAll(e=>{e.removed=!0}),t&&ZP()}function gT(){const t=performance.now();Nd=null,Nd=Vd.length>0?requestAnimationFrame(gT):null,M2.executeFrameTasks(t)}function aZ(t){const e=t-Jx;Jx=t;const i=1e3/60,n=Math.max(0,e-i);Y0.time=t,Y0.frameDuration=i-n;for(let s=0;s<Yx.length;s++){const h=performance.now(),f=Yx[s];Vd.forAll(m=>{var y;m.paused||m.removed||(s===0&&m.ticks++,m.phases[f]&&(Y0.elapsedFrameTime=performance.now()-t,Y0.deltaTime=m.ticks===0?0:e,(y=m.phases[f])==null||y.call(m,Y0)))}),hZ[s].push(performance.now()-h)}ZP(),uZ.push(performance.now()-t)}const Vy=new Pg;function ZP(){Vd.forAll(t=>{t.removed&&Vy.push(t)}),Vd.removeUnorderedMany(Vy.data,Vy.length),Vy.clear()}function JP(){for(;Xx.length;){const t=Xx.shift();t.isActive&&t.callback()}M2.willDispatch=!1}function lZ(t=1,e){const i=Rs(),n=()=>{Ps(e)?i.reject(ei()):t===0?i():(--t,Yf(()=>n()))};return n(),i.promise}function cZ(t){return lZ(1,t)}async function YP(t){await cZ(t),await new Promise(e=>requestAnimationFrame(()=>{t!=null&&t.aborted||e()}))}const hZ=Yx.map(t=>new Og(t)),uZ=new Og("total");function XP(t,e){for(const i of t.values())if(e(i))return!0;return!1}function W7(t,e){if(!e)return t;for(const i of e)i!=null&&t.add(i);return t}function qTe(t,e){return e!=null&&t.add(e),t}function QP(t,e){const i=new Set;return W7(i,t),W7(i,e),i}function eR(t,e){const i=new Set;for(const n of e)t.has(n)&&i.add(n);return i}function WTe(t,e){if(!t||!e)return!1;if(t===e)return!0;for(const i of t)if(!e.has(i))return!1;return!0}function KTe(t,e){if(t==null&&e==null)return!0;if(t==null||e==null||t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}function dZ(t,e){const i=new Set(t);for(const n of e)i.delete(n);return i}function pZ(t,e){return dZ(QP(t,e),eR(t,e))}let fZ=0;function Rg(){return++fZ}let d3=class extends c3{constructor(e){super(new gZ(e)),this._observer&&K7.register(this,new WeakRef(this._observer),this)}destroy(){var e,i;this._observer&&K7.unregister(this._observer),(e=this.accessed)==null||e.clear(),this.clear(),(i=this._observer)==null||i.destroy()}},gZ=class{constructor(e){this._notify=e,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const e=this._invalidCount;if(e===1)return this._invalidCount=0,void this._notify();this._invalidCount=e>0?e-1:0}destroy(){this.destroyed=!0,this._notify=mZ}};const K7=new FinalizationRegistry(t=>{var e;(e=t.deref())==null||e.destroy()});function mZ(){}let Af=!1;const $2=[];function tR(t,e){let i=new d3(h),n=null,s=!1;function h(){if(!i||s)return;if(Af)return void nR(h);const m=n;i.clear(),Af=!0,s=!0,n=Ic(i,t),s=!1,Af=!1,e(n,m),rR()}function f(){i&&(i.destroy(),i=null,n=null)}return s=!0,n=Ic(i,t),s=!1,ct(f)}function iR(t,e){let i=new d3(s),n=null;function s(){e(n,f)}function h(){i&&(i.destroy(),i=null),n=null}function f(){return i?(i.clear(),n=Ic(i,t),n):null}return f(),ct(h)}function yZ(t,e){let i=!1,n=!1;const s=!!(e!=null&&e.sync);let h=new d3(()=>{i||n||(n=!0,s?f():queueMicrotask(f))});function f(){n=!1,h&&!i&&(Af?nR(f):(h.clear(),Af=!0,i=!0,Ic(h,t),i=!1,Af=!1,rR()))}function m(){h&&(h.destroy(),h=null)}return i=!0,Ic(h,t),i=!1,ct(m)}function nR(t){$2.includes(t)||$2.unshift(t)}function rR(){for(;$2.length;)$2.pop()()}var Ng;(function(t){t[t.Untracked=0]="Untracked",t[t.Tracked=1]="Tracked"})(Ng||(Ng={}));let am=class{constructor(){this.uid=Rg(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(e,i,n,s,h){return this.pool.acquire(Ng.Untracked,e,i,n,s,h,hT)}static acquireTracked(e,i,n,s){return this.pool.acquire(Ng.Tracked,e,i,n,null,null,s)}notify(e,i){this.type===Ng.Untracked?this.callback.call(this.target,e,i,this.path,this.target):this.callback.call(null,e,i,void 0,void 0)}acquire(e,i,n,s,h,f,m){this.uid=Rg(),this.removed=!1,this.type=e,this.oldValue=i,this.callback=n,this.getValue=s,this.target=h,this.path=f,this.equals=m}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=Rg(),this.removed=!0}};am.pool=new VP(am);const ab=new _r,Sc=new Set;let k2;function C2(t){Sc.delete(t),Sc.add(t),k2||(k2=ey(wZ))}function vZ(t){if(t.removed)return;const e=t.oldValue,i=t.getValue();t.equals(e,i)||(t.oldValue=i,t.notify(i,e))}function bZ(t){for(const e of Sc.values())e.target===t&&(e.removed=!0)}function wZ(){let t=10;for(;k2&&t--;){k2=null;const e=_Z(),i=ab.acquire();for(const n of e){const s=n.uid;vZ(n),s===n.uid&&n.removed&&i.push(n)}for(const n of Sc)n.removed&&(i.push(n),Sc.delete(n));for(const n of i)am.pool.release(n);ab.release(i),ab.release(e),Qx.forEach(n=>n())}}function _Z(){const t=ab.acquire();t.length=Sc.size;let e=0;for(const i of Sc)t[e]=i,++e;return Sc.clear(),t}const Qx=new Set;function xZ(t){return Qx.add(t),ct(()=>Qx.delete(t))}function SZ(t,e,i){let n=PP(t,e,i,(s,h,f)=>{let m,y,x=iR(()=>Zm(s,h),(E,k)=>{var I;((I=s.__accessor__)==null?void 0:I.lifecycle)===qr.DESTROYED||m&&m.uid!==y?n.remove():(m||(m=am.acquireUntracked(E,f,k,s,h),y=m.uid),C2(m))});return ct(()=>{x.remove(),m&&(m.uid!==y||m.removed||(m.removed=!0,C2(m)),m=null),n=x=null})});return n}function TZ(t,e,i){const n=PP(t,e,i,(s,h,f)=>{let m=!1;return tR(()=>Zm(s,h),(y,x)=>{s.__accessor__.lifecycle!==qr.DESTROYED?m||(m=!0,hT(x,y)||f.call(s,y,x,h,s),m=!1):n.remove()})});return n}function EZ(t,e,i,n=!1){return t.__accessor__&&t.__accessor__.lifecycle!==qr.DESTROYED?n?TZ(t,e,i):SZ(t,e,i):ct()}function MZ(t,e,i){let n,s,h=iR(t,(f,m)=>{n&&n.uid!==s?h.remove():(n||(n=am.acquireTracked(f,e,m,i),s=n.uid),C2(n))});return ct(()=>{h.remove(),n&&(n.uid!==s||n.removed||(n.removed=!0,C2(n)),n=null),h=null})}function $Z(t,e,i){let n=!1;return tR(t,(s,h)=>{n||(n=!0,i(h,s)||e(s,h),n=!1)})}function kZ(t,e,i=!1,n=SP){return i?$Z(t,e,n):MZ(t,e,n)}function Z7(t){return XP(Sc,e=>e.oldValue===t)}function CZ(t,e){for(const i of t.values())if(e(i))return!0;return!1}function XTe(t,e){for(const i of t.values())if(e(i))return i;return null}function p3(t,e,i){const n=t.get(e);if(n!==void 0)return n;const s=i();return t.set(e,s),s}function QTe(t){const e=new Map;return i=>(e.has(i)||e.set(i,t(i)),e.get(i))}const Of=()=>Ae.getLogger("esri.core.accessorSupport.ensureTypes");function IZ(t){return t==null?t:new Date(t)}function AZ(t){return t==null?t:!!t}function OZ(t){return t==null?t:t.toString()}function Ss(t,e=0){return t==null?t:(t=parseFloat(t),isNaN(t)?e:t)}function mT(t){return t==null?t:Math.round(parseFloat(t))}function PZ(t){return null}function RZ(t,e){return i=>{let n=t(i);return e.step!=null&&(n=Math.round(n/e.step)*e.step),e.min!=null&&(n=Math.max(e.min,n)),e.max!=null&&(n=Math.min(e.max,n)),n}}function sR(t){return(t==null?void 0:t.constructor)&&t.constructor.__accessorMetadata__!==void 0}function I2(t,e){return e!=null&&t&&!(e instanceof t)}function oR(t){return t&&"isCollection"in t}function J7(t){return t!=null&&t.Type?typeof t.Type=="function"?t.Type:t.Type.base:null}function NZ(t,e){if(!(e!=null&&e.constructor)||!oR(e.constructor))return e9(t,e)?e:new t(e);const i=J7(t.prototype.itemType),n=J7(e.constructor.prototype.itemType);return i?n?i===n?e:i.prototype.isPrototypeOf(n.prototype)?new t(e):(e9(t,e),e):new t(e):e}function e9(t,e){return!!sR(e)&&(Of().error("Accessor#set","Assigning an instance of '"+(e.declaredClass||"unknown")+"' which is not a subclass of '"+f3(t)+"'"),!0)}function I0(t,e){return e==null?e:oR(t)?NZ(t,e):I2(t,e)?e9(t,e)?e:new t(e):e}function f3(t){var e;return((e=t==null?void 0:t.prototype)==null?void 0:e.declaredClass)||"unknown"}const LZ=new WeakMap;function DZ(t){switch(t){case Number:return e=>Ss(e);case gi:return mT;case Boolean:return AZ;case String:return OZ;case Date:return IZ;case yT:return PZ;default:return p3(LZ,t,()=>I0.bind(null,t))}}function _n(t,e){const i=DZ(t);return arguments.length===1?i:i(e)}function lm(t,e,i){return arguments.length===1?lm.bind(null,t):e&&(Array.isArray(e)?e.map(n=>t(n,i)):[t(e,i)])}function zZ(t,e){return arguments.length===1?lm(i=>_n(t,i)):lm(i=>_n(t,i),e)}function aR(t,e,i){return e!==0&&Array.isArray(i)?i.map(n=>aR(t,e-1,n)):t(i)}function A2(t,e,i){if(arguments.length===2)return h=>A2(t,e,h);if(!i)return i;i=aR(t,e,i);let n=e,s=i;for(;n>0&&Array.isArray(s);)n--,s=s[0];if(s!==void 0)for(let h=0;h<n;h++)i=[i];return i}function FZ(t,e,i){return arguments.length===2?A2(n=>_n(t,n),e):A2(n=>_n(t,n),e,i)}function lR(t){return!!Array.isArray(t)&&!t.some(e=>{const i=typeof e;return!(i==="string"||i==="number"||i==="function"&&t.length>1)})}function t9(t,e){if(arguments.length===2)return t9(t).call(null,e);const i=new Set,n=t.filter(m=>typeof m!="function"),s=t.filter(m=>typeof m=="function");for(const m of t)typeof m!="string"&&typeof m!="number"||i.add(m);let h=null,f=null;return(m,y)=>{if(m==null)return m;const x=typeof m,E=x==="string"||x==="number";return E&&(i.has(m)||s.some(k=>x==="string"&&k===String||x==="number"&&k===Number))||x==="object"&&s.some(k=>!I2(m,k))?m:(E&&n.length?(h||(h=n.map(k=>typeof k=="string"?`'${k}'`:`${k}`).join(", ")),Of().error("Accessor#set",`'${m}' is not a valid value for this property, only the following values are valid: ${h}`)):typeof m=="object"&&s.length?(f||(f=s.map(k=>f3(k)).join(", ")),Of().error("Accessor#set",`'${m}' is not a valid value for this property, value must be one of ${f}`)):Of().error("Accessor#set",`'${m}' is not a valid value for this property`),y&&(y.valid=!1),null)}}function Ac(t,e){if(arguments.length===2)return Ac(t).call(null,e);const i={},n=[],s=[];for(const y in t.typeMap){const x=t.typeMap[y];i[y]=_n(x),n.push(f3(x)),s.push(y)}const h=()=>`'${n.join("', '")}'`,f=()=>`'${s.join("', '")}'`,m=typeof t.key=="string"?y=>y[t.key]:t.key;return y=>{if(t.base&&!I2(t.base,y)||y==null)return y;const x=m(y)||t.defaultKeyValue,E=i[x];if(!E)return Of().error("Accessor#set",`Invalid property value, value needs to be one of ${h()}, or a plain object that can autocast (having .type = ${f()})`),null;if(!I2(t.typeMap[x],y))return y;if(typeof t.key=="string"&&!sR(y)){const k={};for(const I in y)I!==t.key&&(k[I]=y[I]);return E(k)}return E(y)}}let gi=class{},yT=class{};const iEe={native:t=>({type:"native",value:t}),array:t=>({type:"array",value:t}),oneOf:t=>({type:"one-of",values:t})};function jZ(t){if(!t||!("type"in t))return!1;switch(t.type){case"native":case"array":case"one-of":return!0}return!1}function cR(t){switch(t.type){case"native":return _n(t.value);case"array":return lm(cR(t.value));case"one-of":return GZ(t);default:return null}}function GZ(t){let e=null;return(i,n)=>n9(i,t)?i:(e==null&&(e=i9(t)),Of().error("Accessor#set",`Invalid property value, value needs to be of type ${e}`),n&&(n.valid=!1),null)}function i9(t){switch(t.type){case"native":switch(t.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case gi:return"integer";case Date:return"date";case yT:return"null";default:return f3(t.value)}case"array":return`array of ${i9(t.value)}`;case"one-of":{const e=t.values.map(i=>i9(i));return`one of ${e.slice(0,-1)} or ${e[e.length-1]}`}}return"unknown"}function n9(t,e){if(t==null)return!0;switch(e.type){case"native":switch(e.value){case Number:case gi:return typeof t=="number";case Boolean:return typeof t=="boolean";case String:return typeof t=="string";case yT:return t===null}return t instanceof e.value;case"array":return!!Array.isArray(t)&&!t.some(i=>!n9(i,e.value));case"one-of":return e.values.some(i=>n9(t,i))}}function S(t={}){return(e,i)=>{if(e===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${e.name}.${i}. Accessor does not support static properties.`);const n=Object.getOwnPropertyDescriptor(e,i),s=l3(e,i);n&&(n.get||n.set?(s.get=n.get||s.get,s.set=n.set||s.set):"value"in n&&("value"in t&&Ae.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${i}" on "${e.constructor.name}" already defined in the metadata`,t),s.value=t.value=n.value)),t.readOnly!=null&&(s.readOnly=t.readOnly);const h=t.aliasOf;if(h){const y=typeof h=="string"?h:h.source,x=typeof h=="string"?null:h.overridable===!0;let E;s.dependsOn=[y],s.get=function(){let k=Kr(this,y);if(typeof k=="function"){E||(E=y.split(".").slice(0,-1).join("."));const I=Kr(this,E);I&&(k=k.bind(I))}return k},s.readOnly||(s.set=x?function(k){this._override(i,k)}:function(k){E2(this,y,k)})}const f=t.type,m=t.types;if(!s.cast){let y;f?y=UZ(f):m&&(y=Array.isArray(m)?lm(Ac(m[0])):Ac(m)),t.cast=BZ(t.cast,y)}kK(s,t),t.range&&(s.cast=RZ(s.cast,t.range))}}function hR(t,e,i){const n=l3(t,i);n.json||(n.json={});let s=n.json;return e!==void 0&&(s.origins||(s.origins={}),s.origins[e]||(s.origins[e]={}),s=s.origins[e]),s}function UZ(t){let e=0,i=t;if(jZ(t))return cR(t);for(;Array.isArray(i)&&i.length===1&&typeof i[0]!="string"&&typeof i[0]!="number";)i=i[0],e++;const n=i;if(lR(n))return e===0?t9(n):A2(t9(n),e);if(e===1)return zZ(n);if(e>1)return FZ(n,e);const s=t;return s.from?s.from:_n(s)}function BZ(t,e){if(t||e)return t?e?(i,n)=>e(t(i,n),n):t:e}function HZ(t){if(t.json&&t.json.origins){const e=t.json.origins,i={"web-document":["web-scene","web-map"]};for(const n in i)if(e[n]){const s=e[n];i[n].forEach(h=>{e[h]=s}),delete e[n]}}}let Oc=class extends BP{constructor(e,i,n){super(e,i,n)}};Oc.prototype.type="warning";function uR(t){var e;return!!t&&((e=t.prototype)==null?void 0:e.declaredClass)&&t.prototype.declaredClass.indexOf("esri.core.Collection")===0}const r9=()=>Ae.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function Y7(t,e,i){var n,s;t&&(!i&&!e.read||(n=e.read)!=null&&n.reader||((s=e.read)==null?void 0:s.enabled)===!1||WZ(t)&&lp("read.reader",vT(t),e))}function vT(t){var i,n;const e=t.ndimArray??0;if(e>1)return qZ(t);if(e===1)return X7(t);if("type"in t&&pR(t.type)){const s=(n=(i=t.type.prototype)==null?void 0:i.itemType)==null?void 0:n.Type,h=X7(typeof s=="function"?{type:s}:{types:s});return(f,m,y)=>{const x=h(f,m,y);return x&&new t.type(x)}}return bT(t)}function bT(t){return"type"in t?VZ(t.type):KZ(t.types)}function VZ(t){return t.prototype.read?(e,i,n)=>{if(e==null)return e;const s=typeof e;if(s!=="object")return void r9().error(`Expected JSON value of type 'object' to deserialize type '${t.prototype.declaredClass}', but got '${s}'`);const h=new t;return h.read(e,n),h}:t.fromJSON}function dR(t,e,i,n){return n!==0&&Array.isArray(e)?e.map(s=>dR(t,s,i,n-1)):t(e,void 0,i)}function qZ(t){const e=bT(t),i=dR.bind(null,e),n=t.ndimArray??0;return(s,h,f)=>{if(s==null)return s;s=i(s,f,n);let m=n,y=s;for(;m>0&&Array.isArray(y);)m--,y=y[0];if(y!==void 0)for(let x=0;x<m;x++)s=[s];return s}}function X7(t){const e=bT(t);return(i,n,s)=>{if(i==null)return i;if(Array.isArray(i)){const f=[];for(const m of i){const y=e(m,void 0,s);y!==void 0&&f.push(y)}return f}const h=e(i,void 0,s);return h!==void 0?[h]:void 0}}function pR(t){if(!uR(t))return!1;const e=t.prototype.itemType;return!(!e||!e.Type)&&(typeof e.Type=="function"?wT(e.Type):fR(e.Type))}function WZ(t){return"types"in t?fR(t.types):wT(t.type)}function wT(t){return!Array.isArray(t)&&!!t&&t.prototype&&("read"in t.prototype||"fromJSON"in t||pR(t))}function fR(t){for(const e in t.typeMap)if(!wT(t.typeMap[e]))return!1;return!0}function KZ(t){let e=null;const i=t.errorContext??"type",n=t.validate;return(s,h,f)=>{if(s==null)return s;const m=typeof s;if(m!=="object")return void r9().error(`Expected JSON value of type 'object' to deserialize, but got '${m}'`);e||(e=ZZ(t));const y=t.key;if(typeof y!="string")return;const x=s[y],E=x?e[x]:t.defaultKeyValue?t.typeMap[t.defaultKeyValue]:void 0;if(!E){const I=`Type '${x||"unknown"}' is not supported`;return f!=null&&f.messages&&s&&f.messages.push(new Oc(`${i}:unsupported`,I,{definition:s,context:f})),void r9().error(I)}const k=new E;return k.read(s,f),n?n(k):k}}function ZZ(t){var i,n;const e={};for(const s in t.typeMap){const h=t.typeMap[s],f=Jm(h.prototype);if(typeof t.key=="function")continue;const m=f[t.key];if(!m)continue;if((i=m.json)!=null&&i.type&&Array.isArray(m.json.type)&&m.json.type.length===1&&typeof m.json.type[0]=="string"){e[m.json.type[0]]=h;continue}const y=(n=m.json)==null?void 0:n.write;if(!(y!=null&&y.writer)){e[s]=h;continue}const x=y.target,E=typeof x=="string"?x:t.key,k={};y.writer(s,k,E),k[E]&&(e[k[E]]=h)}return e}function JZ(t){if(t.json||(t.json={}),e8(t.json),t8(t.json),Q7(t.json),t.json.origins)for(const e in t.json.origins)e8(t.json.origins[e]),t8(t.json.origins[e]),Q7(t.json.origins[e]);return!0}function Q7(t){t.name&&(t.read&&typeof t.read=="object"?t.read.source===void 0&&(t.read.source=t.name):t.read={source:t.name},t.write&&typeof t.write=="object"?t.write.target===void 0&&(t.write.target=t.name):t.write={target:t.name})}function e8(t){typeof t.read=="boolean"?t.read={enabled:t.read}:typeof t.read=="function"?t.read={enabled:!0,reader:t.read}:t.read&&typeof t.read=="object"&&t.read.enabled===void 0&&(t.read.enabled=!0)}function t8(t){typeof t.write=="boolean"?t.write={enabled:t.write}:typeof t.write=="function"?t.write={enabled:!0,writer:t.write}:t.write&&typeof t.write=="object"&&t.write.enabled===void 0&&(t.write.enabled=!0)}function i8(t,e){if(!e.write||e.write.writer||e.write.enabled===!1&&!e.write.overridePolicy)return;const i=(t==null?void 0:t.ndimArray)??0;t&&(i===1||"type"in t&&uR(t.type))?e.write.writer=QZ:i>1?e.write.writer=eJ(i):e.types?Array.isArray(e.types)?e.write.writer=XZ(e.types[0]):e.write.writer=YZ(e.types):e.write.writer=cm}function YZ(t){return(e,i,n,s)=>e?gR(e,t,s)?cm(e,i,n,s):void 0:cm(e,i,n,s)}function gR(t,e,i){for(const n in e.typeMap)if(t instanceof e.typeMap[n])return!0;if(i!=null&&i.messages){const n=e.errorContext??"type",s=`Values of type '${(typeof e.key!="function"?t[e.key]:t.declaredClass)??"Unknown"}' cannot be written`;i&&i.messages&&t&&i.messages.push(new ce(`${n}:unsupported`,s,{definition:t,context:i})),Ae.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(s)}return!1}function XZ(t){return(e,i,n,s)=>!e||!Array.isArray(e)?cm(e,i,n,s):cm(e.filter(h=>gR(h,t,s)),i,n,s)}function cm(t,e,i,n){lp(i,O2(t,n),e)}function O2(t,e){return t&&typeof t.write=="function"?t.write({},e):t&&typeof t.toJSON=="function"?t.toJSON():typeof t=="number"?P2(t):t}function P2(t){return t===-1/0?-Number.MAX_VALUE:t===1/0?Number.MAX_VALUE:isNaN(t)?null:t}function QZ(t,e,i,n){let s;t===null?s=null:t&&typeof t.map=="function"?(s=t.map(h=>O2(h,n)),typeof s.toArray=="function"&&(s=s.toArray())):s=[O2(t,n)],lp(i,s,e)}function mR(t,e,i){return i!==0&&Array.isArray(t)?t.map(n=>mR(n,e,i-1)):O2(t,e)}function eJ(t){return(e,i,n,s)=>{let h;if(e===null)h=null;else{h=mR(e,s,t);let f=t,m=h;for(;f>0&&Array.isArray(m);)f--,m=m[0];if(m!==void 0)for(let y=0;y<f;y++)h=[h]}lp(n,h,i)}}function tJ(t,e){return _T(t,"any",e==null?void 0:e.origin)}function s9(t,e){return _T(t,"read",e==null?void 0:e.origin)}function yR(t,e){return _T(t,"write",e==null?void 0:e.origin)}function _T(t,e,i){let n=t==null?void 0:t.json;if(n!=null&&n.origins&&i){let s;s=i==="link-chart"?n.origins[i]&&(e==="any"||e in n.origins[i])?n.origins[i]:n.origins["web-map"]:n.origins[i],s&&(e==="any"||e in s)&&(n=s)}return n}function iJ(t){var i;const e=nJ(t);if(t.json.origins)for(const n in t.json.origins){const s=t.json.origins[n],h=s.types?rJ(s):e;Y7(h,s,!1),s.types&&!s.write&&((i=t.json.write)!=null&&i.enabled)&&(s.write={...t.json.write}),i8(h,s)}Y7(e,t.json,!0),i8(e,t.json)}function nJ(t){return t.json.types?o9(t.json):t.type?vR(t):o9(t)}function rJ(t){return t.type?vR(t):o9(t)}function vR(t){if(!t.type)return;let e=0,i=t.type;for(;Array.isArray(i)&&!lR(i);)i=i[0],e++;return{type:i,ndimArray:e}}function o9(t){if(!t.types)return;let e=0,i=t.types;for(;Array.isArray(i);)i=i[0],e++;return{types:i,ndimArray:e}}function sJ(t){JZ(t)&&(HZ(t),iJ(t))}const X_=new Set,Q_=new Set;function J(t){return e=>{t??(t="esri.core.Accessor"),e.prototype.declaredClass=t,aJ(e);const i=[],n=[];let s=e.prototype;for(;s;)s.hasOwnProperty("initialize")&&!X_.has(s.initialize)&&(X_.add(s.initialize),i.push(s.initialize)),s.hasOwnProperty("destroy")&&!Q_.has(s.destroy)&&(Q_.add(s.destroy),n.push(s.destroy)),s=Object.getPrototypeOf(s);X_.clear(),Q_.clear();const h=class extends e{constructor(...m){if(super(...m),this.constructor===h&&typeof this.postscript=="function"){if(i.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let y=i.length-1;y>=0;y--)i[y].call(this)}}),n.length){let y=!1;const x=this[IP];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!y){y=!0,x.call(this);for(let E=0;E<n.length;E++)n[E].call(this)}}})}Object.defineProperty(this,Symbol.dispose,{enumerable:!1,configurable:!0,value(){this.destroy()}}),this.postscript()}}};h.__accessorMetadata__=Jm(e.prototype),h.prototype.declaredClass=t;const f=(t||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(h,"name",{value:f,configurable:!0}),h}}function oJ(t,e){return e.get==null?function(){const i=this.__accessor__,n=i.propertiesByName.get(t);if(n===void 0)return;i.mutable&&Ge(n);const s=i.store;return s.has(t)?s.get(t):n.metadata.value}:function(){const i=this.__accessor__,n=i.propertiesByName.get(t);if(n!==void 0)return n.getComputed(i)}}function aJ(t){const e=t.prototype,i=Jm(e),n={};for(const s of Object.getOwnPropertyNames(i)){const h=i[s];sJ(h),n[s]={enumerable:!0,configurable:!0,get:oJ(s,h),set(f){const m=this.__accessor__;if(m!==void 0){if(m.mutable)return m.initialized&&h.readOnly?n8("read-only",s):m.lifecycle===qr.CONSTRUCTED&&h.constructOnly?n8("construct-only",s):void m.set(s,f)}else Object.defineProperty(this,s,{enumerable:!0,configurable:!0,writable:!0,value:f})}}}Object.defineProperties(t.prototype,n)}const n8=(t,e)=>{Ae.getLogger("esri.core.Accessor").error(`cannot assign to ${t} property '${e}'`)};var bR,wR;function lJ(t){var e;if(t==null)return{value:t};if(Array.isArray(t))return{type:[t[0]],value:null};switch(typeof t){case"object":return(e=t.constructor)!=null&&e.__accessorMetadata__||t instanceof Date?{type:t.constructor,value:t}:t;case"boolean":return{type:Boolean,value:t};case"string":return{type:String,value:t};case"number":return{type:Number,value:t};case"function":return{type:t,value:null};default:return}}const ka=Symbol("Accessor-Handles"),a9=Symbol("Accessor-Initialized");let Oe=class lb{static createSubclass(e={}){if(Array.isArray(e))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:i,declaredClass:n,constructor:s}=e;delete e.declaredClass,delete e.properties,delete e.constructor;const h=this;class f extends h{constructor(...y){super(...y),this.inherited=null,s&&s.apply(this,y)}}Jm(f.prototype);for(const m in e){const y=e[m];f.prototype[m]=typeof y=="function"?function(...x){const E=this.inherited;let k;this.inherited=function(...I){if(h.prototype[m])return h.prototype[m].apply(this,I)};try{k=y.apply(this,x)}catch(I){throw this.inherited=E,I}return this.inherited=E,k}:e[m]}for(const m in i){const y=lJ(i[m]);S(y)(f.prototype,m)}return J(n)(f)}static freeze(e){return e instanceof lb?e.__accessor__.mutable=!1:Object.freeze(e),e}static isFrozen(e){return e instanceof lb?!e.__accessor__.mutable:Object.isFrozen(e)}constructor(...e){var n;if(this[bR]=null,this[wR]=!1,this.constructor===lb)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const i=new FK(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:i}),e.length>0&&(i.ctorArgs=((n=this.normalizeCtorArgs)==null?void 0:n.apply(this,e))??e[0])}postscript(){const e=this.__accessor__,i=e.ctorArgs;e.initialize(),i&&(this.set(i),e.ctorArgs=null),e.constructed(),this.initialize(),this[a9]=!0}initialize(){}[IP](){this[ka]=mt(this[ka])}destroy(){var e;this.destroyed||(bZ(this),this.__accessor__.destroy(),(e=qK())==null||e.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[a9]}get destroyed(){var e;return((e=this.__accessor__)==null?void 0:e.lifecycle)===qr.DESTROYED||!1}commitProperty(e){Kr(this,e)}get(e){return TP(Ae.getLogger(this),"`Accessor.get` is deprecated in favor of using optional chaining",{version:"4.28",see:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining"}),Kr(this,e)}hasOwnProperty(e){return this.__accessor__?this.__accessor__.has(e):Object.prototype.hasOwnProperty.call(this,e)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(e,i){return E2(this,e,i),this}watch(e,i,n){return EZ(this,e,i,n)}addHandles(e,i){if(this.destroyed){const n=Array.isArray(e)?e:[e];for(const s of n)s.remove();return}(this[ka]??(this[ka]=new k0)).add(e,i)}removeHandles(e){var i;(i=this[ka])==null||i.remove(e)}removeAllHandles(){var e;(e=this[ka])==null||e.removeAll()}removeHandlesReference(e){var i;(i=this[ka])==null||i.removeReference(e)}hasHandles(e){var i;return((i=this[ka])==null?void 0:i.has(e))===!0}_override(e,i){i===void 0?this.__accessor__.clearOverride(e):this.__accessor__.override(e,i)}_clearOverride(e){return this.__accessor__.clearOverride(e)}_overrideIfSome(e,i){i==null?this.__accessor__.clearOverride(e):this.__accessor__.override(e,i)}_isOverridden(e){return this.__accessor__.isOverridden(e)}notifyChange(e){this.__accessor__.notifyChange(e)}_get(e){return this.__accessor__.internalGet(e)}_set(e,i){return this.__accessor__.internalSet(e,i),this}};bR=ka,wR=a9;let cJ=class _R{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const i=new _R;return this._values.forEach((n,s)=>{e&&e.has(s)||i.set(s,_e(n.value),n.origin)}),i}get(e,i){i=this._normalizeOrigin(i);const n=this._values.get(e);return i==null||(n==null?void 0:n.origin)===i?n==null?void 0:n.value:void 0}originOf(e){var i;return((i=this._values.get(e))==null?void 0:i.origin)??St.USER}keys(e){e=this._normalizeOrigin(e);const i=[...this._values.keys()];return e==null?i:i.filter(n=>{var s;return((s=this._values.get(n))==null?void 0:s.origin)===e})}set(e,i,n){if((n=this._normalizeOrigin(n))===St.DEFAULTS){const s=this._values.get(e);if((s==null?void 0:s.origin)!=null&&s.origin>n)return}this._values.set(e,new hJ(i,n))}delete(e,i){var n;(i=this._normalizeOrigin(i))!=null&&((n=this._values.get(e))==null?void 0:n.origin)!==i||this._values.delete(e)}has(e,i){var n;return(i=this._normalizeOrigin(i))!=null?((n=this._values.get(e))==null?void 0:n.origin)===i:this._values.has(e)}forEach(e){this._values.forEach(({value:i},n)=>e(i,n))}_normalizeOrigin(e){if(e!=null)return e===St.DEFAULTS?e:St.USER}},hJ=class{constructor(e,i){this.value=e,this.origin=i}};function uJ(t,e,i){e.keys().forEach(s=>{i.set(s,e.get(s),St.DEFAULTS)});const n=t.metadata;Object.keys(n).forEach(s=>{t.internalGet(s)&&i.set(s,t.internalGet(s),St.DEFAULTS)})}function dJ(t,e,i){if(!(t!=null&&t.read)||t.read.enabled===!1||!t.read.source)return!1;const n=t.read.source;if(typeof n=="string"){if(n===e||n.includes(".")&&n.indexOf(e)===0&&z7(n,i))return!0}else for(const s of n)if(s===e||s.includes(".")&&s.indexOf(e)===0&&z7(s,i))return!0;return!1}function pJ(t){return t&&(!t.read||t.read.enabled!==!1&&!t.read.source)}function fJ(t,e,i,n,s){let h=s9(e[i],s);pJ(h)&&(t[i]=!0);for(const f of Object.getOwnPropertyNames(e))h=s9(e[f],s),dJ(h,i,n)&&(t[f]=!0)}function gJ(t,e,i,n){const s=i.metadata,h=tJ(s[e],n),f=h==null?void 0:h.default;if(f===void 0)return;const m=typeof f=="function"?f.call(t,e,n):f;m!==void 0&&i.set(e,m)}const xR={origin:"service"};function mJ(t,e,i=xR){if(!e||typeof e!="object")return;const n=Cc(t),s=n.metadata,h={};for(const f of Object.getOwnPropertyNames(e))fJ(h,s,f,e,i);n.setDefaultOrigin(i.origin);for(const f of Object.getOwnPropertyNames(h)){const m=s9(s[f],i).read,y=m==null?void 0:m.source;let x;x=y&&typeof y=="string"?Zm(e,y):e[f],m!=null&&m.reader&&(x=m.reader.call(t,x,e,i)),x!==void 0&&n.set(f,x)}if(!i||!i.ignoreDefaults){n.setDefaultOrigin("defaults");for(const f of Object.getOwnPropertyNames(s))h[f]||gJ(t,f,n,i)}n.setDefaultOrigin("user")}function sEe(t,e,i,n=xR){var h;const s={...n,messages:[]};i(s),(h=s.messages)==null||h.forEach(f=>{f.type!=="warning"||t.loaded?n!=null&&n.messages&&n.messages.push(f):t.loadWarnings.push(f)})}function yJ(t,e,i,n,s){var f,m;const h={};return(m=(f=e.write)==null?void 0:f.writer)==null||m.call(t,n,h,i,s),h}function SR(t,e,i,n,s,h){if(!(n!=null&&n.write))return!1;const f=Kr(t,i);if(!s&&n.write.overridePolicy){const m=n.write.overridePolicy.call(t,f,i,h??void 0);m!==void 0&&(s=m)}if(s||(s=n.write),!s||s.enabled===!1||s.layerContainerTypes&&(h!=null&&h.layerContainerType)&&!s.layerContainerTypes.includes(h.layerContainerType))return!1;if((f===null&&!s.allowNull&&!s.writerEnsuresNonNull||f===void 0)&&s.isRequired){const m=new ce("web-document-write:property-required",`Missing value for required property '${i}' on '${t.declaredClass}'`,{propertyName:i,target:t});return m&&(h!=null&&h.messages)?h.messages.push(m):m&&!h&&Ae.getLogger("esri.core.accessorSupport.write").error(m.name,m.message),!1}return!(f===void 0||f===null&&!s.allowNull&&!s.writerEnsuresNonNull||!s.alwaysWriteDefaults&&(!e.store.multipleOriginsSupported||e.store.originOf(i)===St.DEFAULTS)&&vJ(t,i,h,n,f)||!s.ignoreOrigin&&(h!=null&&h.origin)&&e.store.multipleOriginsSupported&&e.store.originOf(i)<DP(h.origin))}function vJ(t,e,i,n,s){const h=n.default;if(h===void 0)return!1;if(n.defaultEquals!=null)return n.defaultEquals(s);if(typeof h=="function"){if(Array.isArray(s)){const f=h.call(t,e,i??void 0);return fl(f,s)}return!1}return h===s}function oEe(t,e,i,n){const s=Cc(t),h=s.metadata,f=yR(h[e],n);return!!f&&SR(t,s,e,f,i,n)}function bJ(t,e,i){var h,f;if(t&&typeof t.toJSON=="function"&&(!t.toJSON.isDefaultToJSON||!t.write))return rb(e,t.toJSON(i));const n=Cc(t),s=n.metadata;for(const m in s){const y=yR(s[m],i);if(!SR(t,n,m,y,void 0,i))continue;const x=Kr(t,m),E=yJ(t,y,y.write&&typeof y.write.target=="string"?y.write.target:m,x,i);Object.keys(E).length>0&&(e=rb(e,E),(f=(h=i==null?void 0:i.resources)==null?void 0:h.pendingOperations)!=null&&f.length&&i.resources.pendingOperations.push(Promise.all(i.resources.pendingOperations).then(()=>rb(e,E,()=>"replace-arrays"))),i!=null&&i.writtenProperties&&i.writtenProperties.push({target:t,propName:m,oldOrigin:NK(n.store.originOf(m)),newOrigin:i.origin}))}return e}const ty=t=>{let e=class extends t{constructor(...i){super(...i);const n=Cc(this),s=n.store,h=new cJ;n.store=h,uJ(n,s,h)}read(i,n){mJ(this,i,n)}write(i,n){return bJ(this,i??{},n)}toJSON(i){return this.write({},i)}static fromJSON(i,n){return wJ.call(this,i,n)}};return e=_([J("esri.core.JSONSupport")],e),e.prototype.toJSON.isDefaultToJSON=!0,e};function wJ(t,e){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const i=new this;return i.read(t,e),i}function l9(t){return t&&typeof t=="object"&&"toJSON"in t&&typeof t.toJSON=="function"}let De=class extends ty(Oe){};De=_([J("esri.core.JSONSupport")],De);let xn=class{constructor(e,i={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=e,this._options=i,this.apiValues=[],this.jsonValues=[],this._apiToJSON=_J(e),this.apiValues=r8(this._apiToJSON),this.jsonValues=r8(this._jsonToAPI),this.read=n=>this.fromJSON(n),this.write=(n,s,h)=>{const f=this.toJSON(n);f!==void 0&&lp(h,f,s)},this.write.isJSONMapWriter=!0}toJSON(e){if(e==null)return null;if(this._apiToJSON.hasOwnProperty(e)){const i=this._apiToJSON[e];return this._options.useNumericKeys?+i:i}return this._options.ignoreUnknown?void 0:e}fromJSON(e){return e!=null&&this._jsonToAPI.hasOwnProperty(e)?this._jsonToAPI[e]:this._options.ignoreUnknown?void 0:e}};function _J(t){const e={};for(const i in t)e[t[i]]=i;return e}function r8(t){const e=[];for(const i in t)e.push(i);return e.sort(),e}function Ar(){return function(t,e){return new xn(t,{ignoreUnknown:!0,...e})}}let xT=class{constructor(e,i,n,s,h,f){this.semiMajorAxis=e,this.flattening=i,this.outerAtmosphereRimWidth=n,this.atmosphereHeight=s,this.scaleHeight=h;const m=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*m,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=f||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const Ii=new xT(6378137,1/298.257223563,3e5,1e5,.085,.006694379990137799),ol=new xT(3396190,1/169.8944472236118,23e4,6e4,.111),iu=new xT(1737400,0,0,0,0),xJ="modulepreload",SJ=function(t,e){return new URL(t,e).href},s8={},ge=function(e,i,n){let s=Promise.resolve();if(i&&i.length>0){const f=document.getElementsByTagName("link"),m=document.querySelector("meta[property=csp-nonce]"),y=(m==null?void 0:m.nonce)||(m==null?void 0:m.getAttribute("nonce"));s=Promise.allSettled(i.map(x=>{if(x=SJ(x,n),x in s8)return;s8[x]=!0;const E=x.endsWith(".css"),k=E?'[rel="stylesheet"]':"";if(!!n)for(let L=f.length-1;L>=0;L--){const D=f[L];if(D.href===x&&(!E||D.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${x}"]${k}`))return;const P=document.createElement("link");if(P.rel=E?"stylesheet":xJ,E||(P.as="script"),P.crossOrigin="",P.href=x,y&&P.setAttribute("nonce",y),document.head.appendChild(P),E)return new Promise((L,D)=>{P.addEventListener("load",L),P.addEventListener("error",()=>D(new Error(`Unable to preload CSS for ${x}`)))})}))}function h(f){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=f,window.dispatchEvent(m),!m.defaultPrevented)throw f}return s.then(f=>{for(const m of f||[])m.status==="rejected"&&h(m.reason);return e().catch(h)})},TJ=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,EJ={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function o8(t){const e=t==null?void 0:t.match(TJ);if(!e)return null;const[,i,n,s]=e;if(!i)return null;let h=null,f=null,m=null;const{devext:y,qaext:x,www:E}=EJ;if(n)if(h=i,s)switch(s.toLowerCase()){case"devext":({customBaseUrl:f,portalHostname:m}=y);break;case"qa":({customBaseUrl:f,portalHostname:m}=x);break;default:return null}else({customBaseUrl:f,portalHostname:m}=E);else switch(i.toLowerCase()){case"devext":({customBaseUrl:f,portalHostname:m}=y);break;case"qaext":({customBaseUrl:f,portalHostname:m}=x);break;case"www":({customBaseUrl:f,portalHostname:m}=E);break;default:return null}return{customBaseUrl:f,isPortal:!1,portalHostname:m,urlKey:h}}function MJ(t){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(t)}function TR(t){const e=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,i=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,n=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return e.test(t)?t=t.replace(e,"https://www.arcgis.com"):i.test(t)?t=t.replace(i,"https://devext.arcgis.com"):n.test(t)&&(t=t.replace(n,"https://qaext.arcgis.com")),t}function ER(t){const e=atob(t),i=new Uint8Array(e.length);for(let n=0;n<e.length;n++)i[n]=e.charCodeAt(n);return i.buffer}function $J(t){const e=new Uint8Array(t);let i="";for(let n=0;n<e.length;n++)i+=String.fromCharCode(e[n]);return btoa(i)}const kJ=()=>Ae.getLogger("esri.core.urlUtils"),A0=_t.request,a8="esri/config: esriConfig.request.proxyUrl is not set.",MR=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,$R=/^\s*http:/i,CJ=/^\s*https:/i,IJ=/^\s*file:/i,AJ=/:\d+$/,OJ=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,PJ=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),RJ=new RegExp("^((([^[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^[:]*))(:([0-9]+))?$");let Pf=class{constructor(e=""){this.uri=e,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let i=this.uri.match(PJ);this.scheme=i[2]||(i[1]?"":null),this.authority=i[4]||(i[3]?"":null),this.path=i[5],this.query=i[7]||(i[6]?"":null),this.fragment=i[9]||(i[8]?"":null),this.authority!=null&&(i=this.authority.match(RJ),this.user=i[3]||null,this.password=i[4]||null,this.host=i[6]||i[7],this.port=i[9]||null)}toString(){return this.uri}};const qy={},NJ=new Pf(_t.applicationUrl);let rr=NJ;const LJ=DJ();let ST=LJ;const TT=()=>rr,uEe=()=>ST;function DJ(){const t=rr.path,e=t.slice(0,t.lastIndexOf("/")+1);return`${`${rr.scheme}://${rr.host}${rr.port!=null?`:${rr.port}`:""}`}${e}`}function $r(t){if(!t)return null;const e={path:null,query:null},i=new Pf(t),n=t.indexOf("?");return i.query===null?e.path=t:(e.path=t.slice(0,n),e.query=ET(i.query)),i.fragment&&(e.hash=i.fragment,i.query===null&&(e.path=e.path.slice(0,e.path.length-(i.fragment.length+1)))),e}function ET(t){const e=t.split("&"),i={};for(const n of e){if(!n)continue;const s=n.indexOf("=");let h,f;s<0?(h=decodeURIComponent(n),f=""):(h=decodeURIComponent(n.slice(0,s)),f=decodeURIComponent(n.slice(s+1)));let m=i[h];typeof m=="string"&&(m=i[h]=[m]),Array.isArray(m)?m.push(f):i[h]=f}return i}function hm(t,e){return t?Object.keys(t).map(i=>{const n=t[i];if(n==null)return"";const s=encodeURIComponent(i)+"=",h=e==null?void 0:e[i];return h?s+encodeURIComponent(h(n)):Array.isArray(n)?n.map(f=>l9(f)?s+encodeURIComponent(JSON.stringify(f)):s+encodeURIComponent(f)).join("&"):l9(n)?s+encodeURIComponent(JSON.stringify(n)):s+encodeURIComponent(n)}).filter(i=>i).join("&"):""}function kR(t=!1){let e,i=A0.proxyUrl;if(typeof t=="string"){e=BJ(t);const n=g3(t);n&&(i=n.proxyUrl)}else e=!!t;if(!i)throw kJ().warn(a8),new ce("urlUtils:proxy-not-set",a8);return e&&h9()&&(i=AT(i)),$r(i)}function dEe(t,e=!1){const i=g3(t);let n,s;if(i){const h=MT(i.proxyUrl);n=h.path,s=h.query?ET(h.query):null}else if(e){const h=kR(t);n=h.path,s=h.query}if(n){const h=$r(t);t=n+"?"+h.path;const f=hm({...s,...h.query});f&&(t=`${t}?${f}`)}return t}const X0={path:"",query:""};function MT(t){const e=t.indexOf("?");return e!==-1?(X0.path=t.slice(0,e),X0.query=t.slice(e+1)):(X0.path=t,X0.query=null),X0}function CR(t){return t=(t=N2(t=KJ(t=MT(t).path),!0)).toLowerCase()}function zJ(t){const e={proxyUrl:t.proxyUrl,urlPrefix:CR(t.urlPrefix)},i=A0.proxyRules,n=e.urlPrefix;let s=i.length;for(let h=0;h<i.length;h++){const f=i[h].urlPrefix;if(n.indexOf(f)===0){if(n.length===f.length)return-1;s=h;break}f.indexOf(n)===0&&(s=h+1)}return i.splice(s,0,e),s}function g3(t){const e=A0.proxyRules,i=CR(t);for(let n=0;n<e.length;n++)if(i.indexOf(e[n].urlPrefix)===0)return e[n]}function pEe(t,e){if(!t||!e)return!1;t=R2(t),e=R2(e);const i=o8(t),n=o8(e);return i!=null&&n!=null?i.portalHostname===n.portalHostname:i==null&&n==null&&Qf(t,e,!0)}function FJ(t,e){return t=R2(t),e=R2(e),N2(t)===N2(e)}function R2(t){const e=(t=Tc(t)).indexOf("/sharing");return e>0?t.slice(0,e):t.replace(/\/+$/,"")}function c9(t,e=A0.interceptors){const i=n=>n==null||n instanceof RegExp&&n.test(t)||typeof n=="string"&&t.startsWith(n);if(e){for(const n of e)if(Array.isArray(n.urls)){if(n.urls.some(i))return n}else if(i(n.urls))return n}return null}function Qf(t,e,i=!1){if(!t||!e)return!1;const n=d9(t),s=d9(e);return!(!i&&n.scheme!==s.scheme)&&n.host!=null&&s.host!=null&&n.host.toLowerCase()===s.host.toLowerCase()&&n.port===s.port}function $T(t){if(typeof t=="string"){if(!ks(t))return!0;t=d9(t)}if(Qf(t,rr))return!0;const e=A0.trustedServers||[];for(let i=0;i<e.length;i++){const n=jJ(e[i]);for(let s=0;s<n.length;s++)if(Qf(t,n[s]))return!0}return!1}function jJ(t){return qy[t]||(IT(t)||gl(t)?qy[t]=[new Pf(lo(t))]:qy[t]=[new Pf(`http://${t}`),new Pf(`https://${t}`)]),qy[t]}function lo(t,e=ST,i){return gl(t)?i!=null&&i.preserveProtocolRelative?t:rr.scheme==="http"&&rr.authority===mo(t).slice(2)?`http:${t}`:`https:${t}`:IT(t)?t:m3(t[0]==="/"?WJ(e):e,t)}function kT(t,e=ST,i){if(t==null||!ks(t))return t;const n=Tc(t),s=n.toLowerCase(),h=Tc(e).toLowerCase().replace(/\/+$/,""),f=i?Tc(i).toLowerCase().replace(/\/+$/,""):null;if(f&&h.indexOf(f)!==0)return t;const m=(k,I,P)=>(P=k.indexOf(I,P))===-1?k.length:P;let y=m(s,"/",s.indexOf("//")+2),x=-1;for(;s.slice(0,y+1)===h.slice(0,y)+"/"&&(x=y+1,y!==s.length);)y=m(s,"/",y+1);if(x===-1||f&&x<f.length)return t;t=n.slice(x);const E=h.slice(x-1).replaceAll(/[^/]+/g,"").length;if(E>0)for(let k=0;k<E;k++)t=`../${t}`;else t=`./${t}`;return t}function Tc(t){return t=YJ(t=JJ(t=ZJ(t=lo(t=t.trim()))))}function m3(...t){const e=t.filter(Yi);if(!(e!=null&&e.length))return;const i=[];if(ks(e[0])){const s=e[0],h=s.indexOf("//");h!==-1&&(i.push(s.slice(0,h+1)),VJ(e[0])&&(i[0]+="/"),e[0]=s.slice(h+2))}else e[0][0]==="/"&&i.push("");const n=e.reduce((s,h)=>h?s.concat(h.split("/")):s,[]);for(let s=0;s<n.length;s++){const h=n[s];h===".."&&i.length>0&&i[i.length-1]!==".."?i.pop():(!h&&s===n.length-1||h&&(h!=="."||i.length===0))&&i.push(h)}return i.join("/")}function mo(t,e=!1){if(t==null||CT(t)||hp(t))return null;let i=t.indexOf("://");if(i===-1&&gl(t))i=2;else{if(i===-1)return null;i+=3}const n=t.indexOf("/",i);return n!==-1&&(t=t.slice(0,n)),e&&(t=N2(t,!0)),t}function ks(t){return gl(t)||IT(t)}function CT(t){return t!=null&&t.slice(0,5)==="blob:"}function hp(t){return t!=null&&t.slice(0,5)==="data:"}function GJ(t){const e=e0(t);return e!=null&&e.isBase64?ER(e.data):null}function fEe(t){return $J(t).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const UJ=/^data:(.*?)(;base64)?,(.*)$/;function e0(t){const e=t.match(UJ);if(!e)return null;const[,i,n,s]=e;return{mediaType:i,isBase64:!!n,data:s}}function IR(t){return t.isBase64?`data:${t.mediaType};base64,${t.data}`:`data:${t.mediaType},${t.data}`}async function gEe(t){return(await fetch(t)).blob()}function mEe(t){const e=GJ(t);if(!e)return null;const i=e0(t);return new Blob([e],{type:i.mediaType})}function gl(t){return t!=null&&t[0]==="/"&&t[1]==="/"}function IT(t){return t!=null&&MR.test(t)}function BJ(t){return t!=null&&CJ.test(t)||rr.scheme==="https"&&gl(t)}function HJ(t){return t!=null&&$R.test(t)||rr.scheme==="http"&&gl(t)}function VJ(t){return t!=null&&IJ.test(t)}function AT(t){return gl(t)?`https:${t}`:t.replace($R,"https:")}function qJ(){return rr.scheme==="http"}function h9(){return rr.scheme==="https"}function N2(t,e=!1){return gl(t)?t.slice(2):(t=t.replace(MR,""),e&&t.length>1&&t[0]==="/"&&t[1]==="/"&&(t=t.slice(2)),t)}function WJ(t){const e=t.indexOf("//"),i=t.indexOf("/",e+2);return i===-1?t:t.slice(0,i)}function yEe(t){let e=0;if(ks(t)){const n=t.indexOf("//");n!==-1&&(e=n+2)}const i=t.lastIndexOf("/");return i<e?t:t.slice(0,i+1)}function vEe(t,e){if(!t)return"";const i=$r(t).path.replace(/\/+$/,""),n=i.slice(i.lastIndexOf("/")+1);if(!(e!=null&&e.length))return n;const s=new RegExp(`\\.(${e.join("|")})$`,"i");return n.replace(s,"")}function KJ(t){return t.endsWith("/")?t:`${t}/`}function AR(t){return t.replace(/\/+$/,"")}function ZJ(t){if(/^https?:\/\//i.test(t)){const e=MT(t);t=(t=e.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),e.query&&(t+=`?${e.query}`)}return t}function JJ(t){return t.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function YJ(t){const e=A0.httpsDomains;if(!HJ(t))return t;const i=t.indexOf("/",7);let n;if(n=i===-1?t:t.slice(0,i),n=n.toLowerCase().slice(7),AJ.test(n)){if(!n.endsWith(":80"))return t;n=n.slice(0,-3),t=t.replace(":80","")}return qJ()&&n===rr.authority&&!OJ.test(t)||(h9()&&n===rr.authority||e&&e.some(s=>n===s||n.endsWith(`.${s}`))||h9()&&!g3(t))&&(t=AT(t)),t}function u9(t,e,i){if(!(e&&i&&t&&ks(t)))return t;const n=t.indexOf("//"),s=t.indexOf("/",n+2),h=t.indexOf(":",n+2),f=Math.min(s<0?t.length:s,h<0?t.length:h);return t.slice(n+2,f).toLowerCase()!==e.toLowerCase()?t:`${t.slice(0,n+2)}${i}${t.slice(f)}`}function d9(t){return typeof t=="string"?new Pf(lo(t)):(t.scheme||(t.scheme=rr.scheme),t)}function bEe(t){return QJ.test(t)}function OR(t,e){const i=$r(t),n=Object.keys(i.query||{});return n.length>0&&e&&e.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${n.join(", ")}.`),i.path}function XJ(t,e,i){const n=$r(t),s=n.query||{};return s[e]=String(i),`${n.path}?${hm(s)}`}function e5(t,e){if(!e)return t;const i=$r(t),n=i.query||{};for(const[h,f]of Object.entries(e))f!=null&&(n[h]=f);const s=hm(n);return s?`${i.path}?${s}`:i.path}function wEe(t){if(t==null)return null;const e=t.match(PR);return e?e[2]:null}function l8(t){if(t==null)return null;const e=t.match(PR);return e?{path:e[1],extension:e[2]}:{path:t,extension:null}}async function _Ee(t){return typeof t=="string"?e0(t)??{data:t}:new Promise((e,i)=>{const n=new FileReader;n.readAsDataURL(t),n.onload=()=>e(e0(n.result)),n.onerror=s=>i(s)})}const PR=/([^.]*)\.([^/]*)$/,QJ=/(^data:image\/svg|\.svg$)/i,RR="20241122",NR="f6f7099a0e79cf518abdcf87c5aa8b6f24ecdcd8";Symbol.dispose??(Symbol.dispose=Symbol("Symbol.dispose")),Symbol.asyncDispose??(Symbol.asyncDispose=Symbol("Symbol.asyncDispose"));const eY="4.31";let Kt,OT=eY;OT="4.31.6";function xEe(t){Kt=t}function SEe(t){const e=Kt==null?void 0:Kt.findCredential(t);return e!=null&&e.token?XJ(t,"token",e.token):t}de("host-webworker")||globalThis.$arcgis||Object.defineProperty(globalThis,"$arcgis",{configurable:!1,enumerable:!0,writable:!1,value:{}}),de("host-webworker");const tY=new Set(["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"]);function iY(t){const e=mo(t,!0);return!!e&&e.endsWith(".arcgis.com")&&!tY.has(e)&&!t.endsWith("/sharing/rest/generateToken")}function LR(t,e){return!(!_t.apiKey||!iY(t))}function nY(t,e,i=!1,n){return new Promise((s,h)=>{if(Ps(n))return void h(c8());let f=()=>{x(),h(new Error(`Unable to load ${e}`))},m=()=>{const E=t;x(),s(E)},y=()=>{if(!t)return;const E=t;x(),E.src="",h(c8())};const x=()=>{de("esri-image-decode")||(t.removeEventListener("error",f),t.removeEventListener("load",m)),f=null,m=null,t=null,n!=null&&n.removeEventListener("abort",y),y=null,i&&URL.revokeObjectURL(e)};n!=null&&n.addEventListener("abort",y),de("esri-image-decode")?t.decode().then(m,f):(t.addEventListener("error",f),t.addEventListener("load",m))})}function c8(){try{return new DOMException("Aborted","AbortError")}catch{const t=new Error;return t.name="AbortError",t}}const DR="Timeout exceeded";function rY(){return new Error(DR)}function TEe(t){return typeof t=="object"&&!!t&&"message"in t&&t.message===DR}function sY(t){_t.request.crossOriginNoCorsDomains||(_t.request.crossOriginNoCorsDomains={});const e=_t.request.crossOriginNoCorsDomains;for(let i of t)i=i.toLowerCase(),/^https?:\/\//.test(i)?e[mo(i)??""]=0:(e[mo("http://"+i)??""]=0,e[mo("https://"+i)??""]=0)}function oY(t){const e=_t.request.crossOriginNoCorsDomains;if(e){let i=mo(t);if(i)return i=i.toLowerCase(),!Qf(i,TT())&&e[i]<Date.now()-36e5}return!1}async function aY(t){var s;const e=$r(t);t=e.path,((s=e.query)==null?void 0:s.f)==="json"&&(t+="?f=json");try{await fetch(t,{mode:"no-cors",credentials:"include"})}catch{}const i=_t.request.crossOriginNoCorsDomains,n=mo(t);i&&n&&(i[n.toLowerCase()]=Date.now())}async function ki(t,e){var I;t instanceof URL&&(t=t.toString()),(e==null?void 0:e.query)instanceof URLSearchParams&&(e.query=ET(e.query.toString().replaceAll("+"," ")));const i=hp(t),n=CT(t);n||i||(t=Tc(t));const s={url:t,requestOptions:{...e}},h=P=>({data:P,getAllHeaders:t0,getHeader:t0,httpStatus:200,requestOptions:s.requestOptions,url:s.url}),f=c9(t,so.internalInterceptors);if(f){const P=await u8(f,s);if(P!=null)return h(P)}let m=c9(t);if(m){const P=await u8(m,s);if(P!=null)return h(P);m.after||m.error||(m=null)}if(t=s.url,(e=s.requestOptions).responseType==="image"&&(de("host-webworker")||de("host-node")))throw al("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),s);if(e.method==="head"){if(e.body)throw al("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),s);if(i||n)throw al("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),s)}if(await dY(),L2)return L2.execute(t,e);const y=new AbortController,x=$s(e,()=>y.abort()),E={controller:y,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:m,params:s,redoRequest:!1,useIdentity:so.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},k=await mY(E).finally(()=>x==null?void 0:x.remove());return(I=m==null?void 0:m.after)==null||I.call(m,k),k}let L2;const so=_t.request,zR="FormData"in globalThis,lY=new Set([499,498,403,401]),cY=new Set(["COM_0056","COM_0057","SB_0008"]),hY=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],t0=()=>null,D2=Symbol();function uY(t){const e=mo(t);e&&!ki._corsServers.includes(e)&&ki._corsServers.push(e)}function h8(t){const e=mo(t);return!e||e.endsWith(".arcgis.com")||ki._corsServers.includes(e)||$T(e)}function al(t,e,i,n){let s="Error";const h={url:i.url,requestOptions:i.requestOptions,getAllHeaders:t0,getHeader:t0,ssl:!1};if(e instanceof ce)return e.details?(e.details=_e(e.details),e.details.url=i.url,e.details.requestOptions=i.requestOptions):e.details=h,e;if(e){const f=n&&(()=>Array.from(n.headers)),m=n&&(E=>n.headers.get(E)),y=n==null?void 0:n.status,x=e.message;x&&(s=x),f&&m&&(h.getAllHeaders=f,h.getHeader=m),h.httpStatus=(e.httpCode!=null?e.httpCode:e.code)||y||0,h.subCode=e.subcode,h.messageCode=e.messageCode,typeof e.details=="string"?h.messages=[e.details]:h.messages=e.details,h.raw=D2 in e?e[D2]:e}return Ir(e)?ei():new ce(t,s,h)}async function dY(){de("host-webworker")&&!L2&&(L2=await ge(()=>import("./request-CFmPmdqP.js"),[],import.meta.url))}async function p9(){Kt||await ge(()=>import("./IdentityManager-DNrjgui9.js"),[],import.meta.url)}async function pY(t){var m;const e=t.params.url,i=t.params.requestOptions,n=t.controller.signal,s=i.body;let h=null,f=null;if(zR&&"HTMLFormElement"in globalThis&&(s instanceof FormData?h=s:s instanceof HTMLFormElement&&(h=new FormData(s))),typeof s=="string"&&(f=s),t.fetchOptions={cache:i.cacheBust?"no-cache":"default",credentials:"same-origin",headers:i.headers||{},method:i.method==="head"?"HEAD":"GET",mode:"cors",priority:so.priority,redirect:"follow",signal:n},(h||f)&&(t.fetchOptions.body=h||f),i.authMode==="anonymous"&&(t.useIdentity=!1),t.hasToken=!!(/token=/i.test(e)||(m=i.query)!=null&&m.token||h!=null&&h.get("token")),!t.hasToken&&LR(e)&&(i.query||(i.query={}),i.query.token=_t.apiKey,t.hasToken=!0),t.useIdentity&&!t.hasToken&&!t.credentialToken&&!FR(e)&&!Ps(n)){let y;i.authMode==="immediate"?(await p9(),y=await Kt.getCredential(e,{signal:n}),t.credential=y):i.authMode==="no-prompt"?(await p9(),y=await Kt.getCredential(e,{prompt:!1,signal:n}).catch(()=>{}),t.credential=y):Kt&&(y=Kt.findCredential(e)),y&&(t.credentialToken=y.token,t.useSSL=!!y.ssl)}}function FR(t){return hY.some(e=>e.test(t))}async function fY(t){let e=t.params.url;const i=t.params.requestOptions,n=t.fetchOptions??{},s=CT(e)||hp(e),h=i.responseType||"json",f=s?0:i.timeout!=null?i.timeout:so.timeout;let m=!1;if(!s){t.useSSL&&(e=AT(e));let I={...i.query};t.credentialToken&&(I.token=t.credentialToken);let P=hm(I);de("esri-url-encodes-apostrophe")&&(P=P.replaceAll("'","%27"));const L=e.length+1+P.length;let D;m=i.method==="delete"||i.method==="post"||i.method==="put"||!!i.body||L>so.maxUrlLength;const j=i.useProxy||!!g3(e);if(j){const H=kR(e);D=H.path,!m&&D.length+1+L>so.maxUrlLength&&(m=!0),H.query&&(I={...H.query,...I})}if(n.method==="HEAD"&&(m||j)){if(m)throw L>so.maxUrlLength?al("request:invalid-parameters",new Error("URL exceeds maximum length"),t.params):al("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),t.params);if(j)throw al("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),t.params)}if(m?(n.method=i.method==="delete"?"DELETE":i.method==="put"?"PUT":"POST",i.body?e=e5(e,I):(n.body=hm(I),n.headers||(n.headers={}),n.headers["Content-Type"]="application/x-www-form-urlencoded")):e=e5(e,I),j&&(t.useProxy=!0,e=`${D}?${e}`),I.token&&zR&&n.body instanceof FormData&&!MJ(e)&&n.body.set("token",I.token),i.hasOwnProperty("withCredentials"))t.withCredentials=i.withCredentials;else if(!Qf(e,TT())){if($T(e))t.withCredentials=!0;else if(Kt){const H=Kt.findServerInfo(e);H!=null&&H.webTierAuth&&(t.withCredentials=!0)}}t.withCredentials&&(n.credentials="include",oY(e)&&await aY(m?e5(e,I):e))}let y,x,E=0,k=!1;f>0&&(E=setTimeout(()=>{k=!0,t.controller.abort()},f));try{if(i.responseType==="native-request-init")x=n,x.url=e,i.signal?x.signal=i.signal:delete x.signal;else if(i.responseType!=="image"||n.cache!=="default"||n.method!=="GET"||m||gY(i.headers)||!s&&!t.useProxy&&so.proxyUrl&&!h8(e)){if(ki._beforeFetch&&await ki._beforeFetch(e,n),y=await fetch(e,n),ki._afterFetch&&await ki._afterFetch(y),t.useProxy||uY(e),i.responseType==="native")x=y;else if(n.method!=="HEAD")if(y.ok){switch(h){case"array-buffer":x=await y.arrayBuffer();break;case"blob":case"image":x=await y.blob();break;default:x=await y.text()}if(E&&(clearTimeout(E),E=0),h==="json"||h==="xml"||h==="document")if(x)switch(h){case"json":x=JSON.parse(x);break;case"xml":x=d8(x,"application/xml");break;case"document":x=d8(x,"text/html")}else x=null;if(x){if(h==="array-buffer"||h==="blob"){const I=y.headers.get("Content-Type");if(I&&/application\/json|text\/plain/i.test(I)&&x[h==="blob"?"size":"byteLength"]<=750)try{const P=await new Response(x).json();P.error&&(x=P)}catch{}}h==="image"&&x instanceof Blob&&(x=await p8(URL.createObjectURL(x),t,!0))}}else{x=await y.text();try{x=JSON.parse(x)}catch{}}}else x=await p8(e,t)}catch(I){if(I.name==="AbortError")throw k?rY():ei("Request canceled");if(!(!y&&I instanceof TypeError&&so.proxyUrl)||i.body||i.method==="delete"||i.method==="head"||i.method==="post"||i.method==="put"||t.useProxy||h8(e))throw I;t.redoRequest=!0,zJ({proxyUrl:so.proxyUrl,urlPrefix:mo(e)??""})}finally{E&&clearTimeout(E)}return[y,x]}async function u8(t,e){if(t.responseData!=null)return t.responseData;if(t.headers&&(e.requestOptions.headers={...e.requestOptions.headers,...t.headers}),t.query&&(e.requestOptions.query={...e.requestOptions.query,...t.query}),t.before){let i,n;try{n=await t.before(e)}catch(s){i=al("request:interceptor",s,e)}if((n instanceof Error||n instanceof ce)&&(i=al("request:interceptor",n,e)),i)throw t.error&&t.error(i),i;return n}}function gY(t){if(t){for(const e of Object.getOwnPropertyNames(t))if(t[e])return!0}return!1}function d8(t,e){let i;try{i=new DOMParser().parseFromString(t,e)}catch{}if(!i||i.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return i}async function mY(t){var h,f;let e,i;await pY(t);try{do[e,i]=await fY(t);while(!await yY(t,e,i))}catch(m){const y=al("request:server",m,t.params,e);throw y.details.ssl=t.useSSL,(h=t.interceptor)!=null&&h.error&&t.interceptor.error(y),y}const n=t.params.url;if(i&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(n)){if(!t.hasToken&&!t.credentialToken&&((f=i.user)!=null&&f.username)&&!$T(n)){const m=mo(n,!0);m&&so.trustedServers.push(m)}Array.isArray(i.authorizedCrossOriginNoCorsDomains)&&sY(i.authorizedCrossOriginNoCorsDomains)}const s=t.credential;if(s&&Kt){const m=Kt.findServerInfo(s.server);let y=m==null?void 0:m.owningSystemUrl;if(y){y=y.replace(/\/?$/,"/sharing");const x=Kt.findCredential(y,s.userId);x&&Kt._getIdenticalSvcIdx(y,x)===-1&&x.resources.unshift(y)}}return{data:i,getAllHeaders:e?()=>Array.from(e.headers):t0,getHeader:e?m=>e.headers.get(m):t0,httpStatus:(e==null?void 0:e.status)??200,requestOptions:t.params.requestOptions,ssl:t.useSSL,url:t.params.url}}async function yY(t,e,i){var x;if(t.redoRequest)return t.redoRequest=!1,!1;const n=t.params.requestOptions;if(!e||n.responseType==="native"||n.responseType==="native-request-init")return!0;let s,h;if(i&&(i.error&&typeof i.error=="object"?s=i.error:i.status==="error"&&Array.isArray(i.messages)&&(s={...i},s[D2]=i,s.details=i.messages)),!s&&!e.ok)throw s=new Error(`Unable to load ${e.url} status: ${e.status}`),s[D2]=i,s;let f,m=null;s&&(h=Number(s.code),m=s.hasOwnProperty("subcode")?Number(s.subcode):null,f=s.messageCode,f=f==null?void 0:f.toUpperCase());const y=n.authMode;if(h===403&&(m===4||(x=s.message)!=null&&x.toLowerCase().includes("ssl")&&!s.message.toLowerCase().includes("permission"))){if(!t.useSSL)return t.useSSL=!0,!1}else if(!t.hasToken&&t.useIdentity&&(y!=="no-prompt"||h===498)&&h!==void 0&&lY.has(h)&&!FR(t.params.url)&&(h!==403||(!f||!cY.has(f))&&(m==null||m===2&&t.credentialToken))){await p9();try{const E=await Kt.getCredential(t.params.url,{error:al("request:server",s,t.params),prompt:y!=="no-prompt",signal:t.controller.signal,token:t.credentialToken});return t.credential=E,t.credentialToken=E.token,t.useSSL=t.useSSL||E.ssl,!1}catch(E){if(y==="no-prompt")return t.credential=void 0,t.credentialToken=void 0,!1;s=E}}if(s)throw s;return!0}function p8(t,e,i=!1){const n=e.controller.signal,s=new Image;return e.withCredentials?s.crossOrigin="use-credentials":s.crossOrigin="anonymous",s.alt="",s.fetchPriority=so.priority,s.src=t,nY(s,t,i,n)}ki._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"],ki._beforeFetch=void 0,ki._afterFetch=void 0;function xt(t){if(!_t.assetsPath)throw Ae.getLogger("esri.assets").errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new ce("assets:path-not-set","config.assetsPath is not set");return m3(_t.assetsPath,t)}let t5,ne=null;function PT(){return!!ne}function vY(){return!!de("esri-wasm")}function jR(){return t5||(t5=ge(()=>import("./pe-wasm-Qa1k3yXj.js"),[],import.meta.url).then(t=>t.p).then(({default:t})=>t({locateFile:e=>xt(`esri/geometry/support/${e}`)})).then(t=>{BR(t)}),t5)}var f9,Si;(function(t){function e(h,f,m){ne.ensureCache.prepare();const y=vd(m),x=m===y,E=ne.ensureFloat64(y),k=ne._pe_geog_to_proj(ne.getPointer(h),f,E);return k&&Dh(m,f,E,x),k}function i(h,f,m,y){switch(y){case Si.PE_TRANSFORM_P_TO_G:return n(h,f,m);case Si.PE_TRANSFORM_G_TO_P:return e(h,f,m)}return 0}function n(h,f,m){return s(h,f,m,0)}function s(h,f,m,y){ne.ensureCache.prepare();const x=vd(m),E=m===x,k=ne.ensureFloat64(x),I=ne._pe_proj_to_geog_center(ne.getPointer(h),f,k,y);return I&&Dh(m,f,k,E),I}t.geogToProj=e,t.projGeog=i,t.projToGeog=n,t.projToGeogCenter=s})(f9||(f9={})),function(t){function e(){t.PE_BUFFER_MAX=ne.PeDefs.prototype.PE_BUFFER_MAX,t.PE_NAME_MAX=ne.PeDefs.prototype.PE_NAME_MAX,t.PE_MGRS_MAX=ne.PeDefs.prototype.PE_MGRS_MAX,t.PE_USNG_MAX=ne.PeDefs.prototype.PE_USNG_MAX,t.PE_DD_MAX=ne.PeDefs.prototype.PE_DD_MAX,t.PE_DDM_MAX=ne.PeDefs.prototype.PE_DDM_MAX,t.PE_DMS_MAX=ne.PeDefs.prototype.PE_DMS_MAX,t.PE_UTM_MAX=ne.PeDefs.prototype.PE_UTM_MAX,t.PE_PARM_MAX=ne.PeDefs.prototype.PE_PARM_MAX,t.PE_TYPE_NONE=ne.PeDefs.prototype.PE_TYPE_NONE,t.PE_TYPE_GEOGCS=ne.PeDefs.prototype.PE_TYPE_GEOGCS,t.PE_TYPE_PROJCS=ne.PeDefs.prototype.PE_TYPE_PROJCS,t.PE_TYPE_GEOGTRAN=ne.PeDefs.prototype.PE_TYPE_GEOGTRAN,t.PE_TYPE_COORDSYS=ne.PeDefs.prototype.PE_TYPE_COORDSYS,t.PE_TYPE_UNIT=ne.PeDefs.prototype.PE_TYPE_UNIT,t.PE_TYPE_LINUNIT=ne.PeDefs.prototype.PE_TYPE_LINUNIT,t.PE_STR_OPTS_NONE=ne.PeDefs.prototype.PE_STR_OPTS_NONE,t.PE_STR_AUTH_NONE=ne.PeDefs.prototype.PE_STR_AUTH_NONE,t.PE_STR_AUTH_TOP=ne.PeDefs.prototype.PE_STR_AUTH_TOP,t.PE_STR_NAME_CANON=ne.PeDefs.prototype.PE_STR_NAME_CANON,t.PE_STR_FMT_WKT=ne.PeDefs.prototype.PE_STR_FMT_WKT,t.PE_STR_FMT_WKT2=ne.PeDefs.prototype.PE_STR_FMT_WKT2,t.PE_PARM_X0=ne.PeDefs.prototype.PE_PARM_X0,t.PE_PARM_ND=ne.PeDefs.prototype.PE_PARM_ND,t.PE_TRANSFORM_1_TO_2=ne.PeDefs.prototype.PE_TRANSFORM_1_TO_2,t.PE_TRANSFORM_2_TO_1=ne.PeDefs.prototype.PE_TRANSFORM_2_TO_1,t.PE_TRANSFORM_P_TO_G=ne.PeDefs.prototype.PE_TRANSFORM_P_TO_G,t.PE_TRANSFORM_G_TO_P=ne.PeDefs.prototype.PE_TRANSFORM_G_TO_P,t.PE_HORIZON_RECT=ne.PeDefs.prototype.PE_HORIZON_RECT,t.PE_HORIZON_POLY=ne.PeDefs.prototype.PE_HORIZON_POLY,t.PE_HORIZON_LINE=ne.PeDefs.prototype.PE_HORIZON_LINE,t.PE_HORIZON_DELTA=ne.PeDefs.prototype.PE_HORIZON_DELTA}t.init=e}(Si||(Si={}));let GR=null;var g9;(function(t){const e={},i={},n=P=>{const L=P.getType();switch(L){case Si.PE_TYPE_GEOGCS:P=ne.castObject(P,ne.PeGeogcs);break;case Si.PE_TYPE_PROJCS:P=ne.castObject(P,ne.PeProjcs);break;case Si.PE_TYPE_GEOGTRAN:P=ne.castObject(P,ne.PeGeogtran);break;default:L&Si.PE_TYPE_UNIT&&(P=ne.castObject(P,ne.PeUnit))}return P};function s(){ne.PeFactory.prototype.initialize(null)}function h(P){return f(Si.PE_TYPE_COORDSYS,P)}function f(P,L){let D=null,j=e[P];if(j||(j={},e[P]=j),j.hasOwnProperty(String(L))&&(D=j[L],ne.compare(D,ne.NULL)&&(D=null)),!D){const H=ne.PeFactory.prototype.factoryByType(P,L);ne.compare(H,ne.NULL)||(D=n(H),j[L]=D)}return D}function m(P,L){let D=null,j=i[P];if(j||(j={},i[P]=j),j.hasOwnProperty(L)&&(D=j[L],ne.compare(D,ne.NULL)&&(D=null)),!D){const H=ne.PeFactory.prototype.fromString(P,L);ne.compare(H,ne.NULL)||(D=n(H),j[L]=D)}return D}function y(P){return f(Si.PE_TYPE_GEOGCS,P)}function x(P){return f(Si.PE_TYPE_GEOGTRAN,P)}function E(P){return ne.PeFactory.prototype.getCode(P)}function k(P){return f(Si.PE_TYPE_PROJCS,P)}function I(P){return f(Si.PE_TYPE_UNIT,P)}t.initialize=s,t.coordsys=h,t.factoryByType=f,t.fromString=m,t.geogcs=y,t.geogtran=x,t.getCode=E,t.projcs=k,t.unit=I})(g9||(g9={}));let UR=null;var z2,m9,y9,v9,b9,w9,F2,_9,j2,G2,x9;function BR(t){function e(h,f,m){h[f]=m(h[f])}ne=t,Si.init(),z2.init(),F2.init(),j2.init(),G2.init(),GR=class extends ne.PeDouble{constructor(h=NaN){super(h)}destroy(){ne.destroy(this)}[Symbol.dispose](){this.destroy()}},UR=class extends ne.PeGCSExtent{destroy(){ne.destroy(this)}[Symbol.dispose](){this.destroy()}};const i=[ne.PeAngunit,ne.PeDatum,ne.PeGeogcs,ne.PeGeogtran,ne.PeObject,ne.PeParameter,ne.PePrimem,ne.PeProjcs,ne.PeSpheroid,ne.PeUnit];for(const h of i)e(h.prototype,"getName",f=>function(){return f.call(this,new Array(Si.PE_NAME_MAX))});for(const h of[ne.PeGeogtran,ne.PeProjcs])e(h.prototype,"getParameters",f=>function(){const m=new Array(Si.PE_PARM_MAX);let y=f.call(this);for(let x=0;x<m.length;x++){const E=ne.getValue(y,"*");m[x]=E?ne.wrapPointer(E,ne.PeParameter):null,y+=Int32Array.BYTES_PER_ELEMENT}return m});e(ne.PeHorizon.prototype,"getCoord",h=>function(f=!1){const m=this.getSize();if(!m)return null;const y=[];return Dh(y,m,h.call(this),f),y}),e(ne.PeGTlistExtendedEntry.prototype,"getEntries",h=>{const f=ne._pe_getPeGTlistExtendedGTsSize();return function(){let m=null;const y=h.call(this);if(!ne.compare(y,ne.NULL)){m=[y];const x=this.getSteps();if(x>1){const E=ne.getPointer(y);for(let k=1;k<x;k++)m.push(ne.wrapPointer(E+f*k,ne.PeGTlistExtendedGTs))}}return m}});const n=ne._pe_getPeHorizonSize(),s=h=>function(){let f=this._cache;if(f||(f=new Map,this._cache=f),f.has(h))return f.get(h);let m=null;const y=h.call(this);if(!ne.compare(y,ne.NULL)){m=[y];const x=y.getNump();if(x>1){const E=ne.getPointer(y);for(let k=1;k<x;k++)m.push(ne.wrapPointer(E+n*k,ne.PeHorizon))}}return f.set(h,m),m};e(ne.PeProjcs.prototype,"horizonGcsGenerate",s),e(ne.PeProjcs.prototype,"horizonPcsGenerate",s),ne.PeObject.prototype.toString=function(h=Si.PE_STR_OPTS_NONE){ne.ensureCache.prepare();const f=ne.getPointer(this),m=ne.ensureInt8(new Array(Si.PE_BUFFER_MAX));return ne.UTF8ToString(ne._pe_object_to_string_ext(f,h,m))},ne.PeGeogcs.prototype.destroy=function(){this.Delete(),qo(this),this.ptr=0},ne.PeGeogcs.prototype[Symbol.dispose]=function(){this.destroy()},ne.PeProjcs.prototype.destroy=function(){this.Delete(),qo(this),this.ptr=0},ne.PeProjcs.prototype[Symbol.dispose]=function(){this.destroy()}}function qo(t){if(!t)return;const e=ne.getClass(t);if(!e)return;const i=ne.getCache(e);if(!i)return;const n=ne.getPointer(t);n&&delete i[n]}function Wy(t,e){const i=[],n=new Array(e);for(let s=0;s<t;s++)i.push(ne.ensureInt8(n));return i}function vd(t){return ArrayBuffer.isView(t)?t:Array.isArray(t[0])?t.flat():t}function Dh(t,e,i,n=!1){if(n)for(let s=0;s<2*e;s++)t[s]=ne.getValue(i+s*Float64Array.BYTES_PER_ELEMENT,"double");else{const s=t.length===0;for(let h=0;h<e;h++)s&&(t[h]=new Array(2)),t[h][0]=ne.getValue(i,"double"),t[h][1]=ne.getValue(i+Float64Array.BYTES_PER_ELEMENT,"double"),i+=2*Float64Array.BYTES_PER_ELEMENT}}(function(t){let e;function i(){t.PE_GTLIST_OPTS_COMMON=ne.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,e=ne._pe_getPeGTlistExtendedEntrySize()}function n(s,h,f,m,y,x){let E=null;const k=new ne.PeInteger(x);try{const I=ne.PeGTlistExtended.prototype.getGTlist(s,h,f,m,y,k);if((x=k.val)&&(E=[I],x>1)){const P=ne.getPointer(I);for(let L=1;L<x;L++)E.push(ne.wrapPointer(P+e*L,ne.PeGTlistExtendedEntry))}}finally{ne.destroy(k)}return E}t.init=i,t.getGTlist=n})(z2||(z2={})),function(t){function e(i){if(i!=null&&i.length){for(const n of i)qo(n),n.getEntries().forEach(s=>{qo(s);const h=s.getGeogtran();qo(h),h.getParameters().forEach(qo),[h.getGeogcs1(),h.getGeogcs2()].forEach(f=>{qo(f);const m=f.getDatum();qo(m),qo(m.getSpheroid()),qo(f.getPrimem()),qo(f.getUnit())})});ne.PeGTlistExtendedEntry.prototype.Delete(i[0])}}t.destroy=e}(m9||(m9={})),function(t){function e(i,n,s,h,f){ne.ensureCache.prepare();const m=vd(s),y=s===m,x=ne.ensureFloat64(m);let E=0;h&&(E=ne.ensureFloat64(h));const k=ne._pe_geog_to_geog(ne.getPointer(i),n,x,E,f);return k&&Dh(s,n,x,y),k}t.geogToGeog=e}(y9||(y9={})),function(t){function e(h,f,m,y,x,E,k,I){ne.PeLineType.prototype.geodesic_coordinate(h,f,m,y,x,E,k,I)}function i(h,f,m,y,x,E,k,I,P){ne.PeLineType.prototype.geodetic_coordinate(h,f,m,y,x,E,k,I,P)}function n(h,f,m,y,x,E,k,I,P,L){ne.PeLineType.prototype.geodetic_distance(h,f,m,y,x,E,k,I,P,L)}function s(h,f,m,y,x,E,k,I,P){ne.PeLineType.prototype.great_elliptic_distance(h,f,m,y,x,E,k,I,P)}t.geodesicCoordinate=e,t.geodeticCoordinate=i,t.geodeticDistance=n,t.greatEllipticDistance=s}(v9||(v9={})),function(t){function e(f,m){return ne.PeMath.prototype.phi_to_eta(f,m)}function i(f,m){return ne.PeMath.prototype.eta_to_phi(f,m)}function n(f,m){return ne.PeMath.prototype.phi_to_phig(f,m)}function s(f,m,y){return ne.PeMath.prototype.q(f,m,y)}function h(f,m){return ne.PeMath.prototype.q90(f,m)}t.phiToEta=e,t.etaToPhi=i,t.phiToPhig=n,t.q=s,t.q90=h}(b9||(b9={})),function(t){const e=(x,E,k,I,P,L)=>{let D,j;switch(ne.ensureCache.prepare(),x){case"dd":D=ne._pe_geog_to_dd,j=Si.PE_DD_MAX;break;case"ddm":D=ne._pe_geog_to_ddm,j=Si.PE_DDM_MAX;break;case"dms":D=ne._pe_geog_to_dms,j=Si.PE_DMS_MAX}let H=0;E&&(H=ne.getPointer(E));const W=vd(I),Z=ne.ensureFloat64(W),Y=Wy(k,j),te=D(H,k,Z,P,ne.ensureInt32(Y));if(te)for(let ie=0;ie<k;ie++)L[ie]=ne.UTF8ToString(Y[ie]);return te},i=(x,E,k,I,P)=>{let L;switch(ne.ensureCache.prepare(),x){case"dd":L=ne._pe_dd_to_geog;break;case"ddm":L=ne._pe_ddm_to_geog;break;case"dms":L=ne._pe_dms_to_geog}let D=0;E&&(D=ne.getPointer(E));const j=I.map(Y=>ne.ensureString(Y)),H=ne.ensureInt32(j),W=ne.ensureFloat64(new Array(2*k)),Z=L(D,k,H,W);return Z&&Dh(P,k,W),Z};function n(x,E,k,I,P){return e("dms",x,E,k,I,P)}function s(x,E,k,I){return i("dms",x,E,k,I)}function h(x,E,k,I,P){return e("ddm",x,E,k,I,P)}function f(x,E,k,I){return i("ddm",x,E,k,I)}function m(x,E,k,I,P){return e("dd",x,E,k,I,P)}function y(x,E,k,I){return i("dd",x,E,k,I)}t.geogToDms=n,t.dmsToGeog=s,t.geogToDdm=h,t.ddmToGeog=f,t.geogToDd=m,t.ddToGeog=y}(w9||(w9={})),function(t){function e(){t.PE_MGRS_STYLE_NEW=ne.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,t.PE_MGRS_STYLE_OLD=ne.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,t.PE_MGRS_STYLE_AUTO=ne.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,t.PE_MGRS_180_ZONE_1_PLUS=ne.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,t.PE_MGRS_ADD_SPACES=ne.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function i(s,h,f,m,y,x,E){ne.ensureCache.prepare();let k=0;s&&(k=ne.getPointer(s));const I=vd(f),P=ne.ensureFloat64(I),L=Wy(h,Si.PE_MGRS_MAX),D=ne.ensureInt32(L),j=ne._pe_geog_to_mgrs_extended(k,h,P,m,y,x,D);if(j)for(let H=0;H<h;H++)E[H]=ne.UTF8ToString(L[H]);return j}function n(s,h,f,m,y){ne.ensureCache.prepare();let x=0;s&&(x=ne.getPointer(s));const E=f.map(L=>ne.ensureString(L)),k=ne.ensureInt32(E),I=ne.ensureFloat64(new Array(2*h)),P=ne._pe_mgrs_to_geog_extended(x,h,k,m,I);return P&&Dh(y,h,I),P}t.init=e,t.geogToMgrsExtended=i,t.mgrsToGeogExtended=n}(F2||(F2={})),function(t){function e(n,s,h,f,m,y,x){ne.ensureCache.prepare();let E=0;n&&(E=ne.getPointer(n));const k=vd(h),I=ne.ensureFloat64(k),P=Wy(s,Si.PE_MGRS_MAX),L=ne.ensureInt32(P),D=ne._pe_geog_to_usng(E,s,I,f,m,y,L);if(D)for(let j=0;j<s;j++)x[j]=ne.UTF8ToString(P[j]);return D}function i(n,s,h,f){ne.ensureCache.prepare();let m=0;n&&(m=ne.getPointer(n));const y=h.map(I=>ne.ensureString(I)),x=ne.ensureInt32(y),E=ne.ensureFloat64(new Array(2*s)),k=ne._pe_usng_to_geog(m,s,x,E);return k&&Dh(f,s,E),k}t.geogToUsng=e,t.usngToGeog=i}(_9||(_9={})),function(t){function e(){t.PE_UTM_OPTS_NONE=ne.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,t.PE_UTM_OPTS_ADD_SPACES=ne.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,t.PE_UTM_OPTS_NS=ne.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function i(s,h,f,m,y){ne.ensureCache.prepare();let x=0;s&&(x=ne.getPointer(s));const E=vd(f),k=ne.ensureFloat64(E),I=Wy(h,Si.PE_UTM_MAX),P=ne.ensureInt32(I),L=ne._pe_geog_to_utm(x,h,k,m,P);if(L)for(let D=0;D<h;D++)y[D]=ne.UTF8ToString(I[D]);return L}function n(s,h,f,m,y){ne.ensureCache.prepare();let x=0;s&&(x=ne.getPointer(s));const E=f.map(L=>ne.ensureString(L)),k=ne.ensureInt32(E),I=ne.ensureFloat64(new Array(2*h)),P=ne._pe_utm_to_geog(x,h,k,m,I);return P&&Dh(y,h,I),P}t.init=e,t.geogToUtm=i,t.utmToGeog=n}(j2||(j2={})),function(t){const e=new Map;function i(){t.PE_PCSINFO_OPTION_NONE=ne.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,t.PE_PCSINFO_OPTION_DOMAIN=ne.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,t.PE_POLE_OUTSIDE_BOUNDARY=ne.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,t.PE_POLE_POINT=ne.PePCSInfo.prototype.PE_POLE_POINT}function n(s,h=t.PE_PCSINFO_OPTION_DOMAIN){let f=null,m=null;return e.has(s)&&(m=e.get(s),m[h]&&(f=m[h])),f||(f=ne.PePCSInfo.prototype.generate(s,h),m||(m=[],e.set(s,m)),m[h]=f),f}t.init=i,t.generate=n}(G2||(G2={})),function(t){function e(){return ne.PeVersion.prototype.version_string()}t.versionString=e}(x9||(x9={}));const bY=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return f9},get PeDefs(){return Si},get PeDouble(){return GR},get PeFactory(){return g9},get PeGCSExtent(){return UR},get PeGTTransformations(){return y9},get PeGTlistExtended(){return z2},get PeGTlistExtendedEntry(){return m9},get PeLineType(){return v9},get PeMath(){return b9},get PeNotationDms(){return w9},get PeNotationMgrs(){return F2},get PeNotationUsng(){return _9},get PeNotationUtm(){return j2},get PePCSInfo(){return G2},get PeVersion(){return x9},_init:BR,get _pe(){return ne},isLoaded:PT,isSupported:vY,load:jR},Symbol.toStringTag,{value:"Module"}));var co;(function(t){t[t.CGCS2000=4490]="CGCS2000",t[t.GCSMARS2000=104971]="GCSMARS2000",t[t.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",t[t.GCSMOON2000=104903]="GCSMOON2000"})(co||(co={}));let M;const U={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9895:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,10160:0,10183:0,10188:0,10194:0,10199:0,10207:0,10212:0,10217:0,10222:0,10227:0,10235:0,10240:0,10250:0,10254:0,10270:0,10275:0,10280:0,10306:0,10329:0,10471:0,10477:0,10481:2,10516:2,20002:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2,103897:1};for(M=2e3;M<=2045;M++)U[M]=0;for(M=2056;M<=2065;M++)U[M]=0;for(M=2067;M<=2135;M++)U[M]=0;for(M=2137;M<=2154;M++)U[M]=0;for(M=2161;M<=2170;M++)U[M]=0;for(M=2172;M<=2193;M++)U[M]=0;for(M=2195;M<=2198;M++)U[M]=0;for(M=2200;M<=2203;M++)U[M]=0;for(M=2205;M<=2217;M++)U[M]=0;for(M=2222;M<=2224;M++)U[M]=1;for(M=2225;M<=2250;M++)U[M]=2;for(M=2251;M<=2253;M++)U[M]=1;for(M=2257;M<=2264;M++)U[M]=2;for(M=2274;M<=2279;M++)U[M]=2;for(M=2280;M<=2282;M++)U[M]=1;for(M=2283;M<=2289;M++)U[M]=2;for(M=2290;M<=2292;M++)U[M]=0;for(M=2308;M<=2313;M++)U[M]=0;for(M=2315;M<=2491;M++)U[M]=0;for(M=2494;M<=2866;M++)U[M]=0;for(M=2867;M<=2869;M++)U[M]=1;for(M=2870;M<=2888;M++)U[M]=2;for(M=2891;M<=2895;M++)U[M]=2;for(M=2896;M<=2898;M++)U[M]=1;for(M=2902;M<=2908;M++)U[M]=2;for(M=2915;M<=2920;M++)U[M]=2;for(M=2921;M<=2923;M++)U[M]=1;for(M=2924;M<=2930;M++)U[M]=2;for(M=2931;M<=2962;M++)U[M]=0;for(M=2964;M<=2968;M++)U[M]=2;for(M=2969;M<=2973;M++)U[M]=0;for(M=2975;M<=2991;M++)U[M]=0;for(M=2995;M<=3051;M++)U[M]=0;for(M=3054;M<=3079;M++)U[M]=0;for(M=3081;M<=3088;M++)U[M]=0;for(M=3092;M<=3101;M++)U[M]=0;for(M=3106;M<=3138;M++)U[M]=0;for(M=3146;M<=3151;M++)U[M]=0;for(M=3153;M<=3166;M++)U[M]=0;for(M=3168;M<=3172;M++)U[M]=0;for(M=3174;M<=3203;M++)U[M]=0;for(M=3294;M<=3358;M++)U[M]=0;for(M=3367;M<=3403;M++)U[M]=0;for(M=3408;M<=3416;M++)U[M]=0;for(M=3417;M<=3438;M++)U[M]=2;for(M=3441;M<=3446;M++)U[M]=2;for(M=3447;M<=3450;M++)U[M]=0;for(M=3451;M<=3459;M++)U[M]=2;for(M=3460;M<=3478;M++)U[M]=0;for(M=3554;M<=3559;M++)U[M]=0;for(M=3560;M<=3570;M++)U[M]=2;for(M=3571;M<=3581;M++)U[M]=0;for(M=3594;M<=3597;M++)U[M]=0;for(M=3601;M<=3604;M++)U[M]=0;for(M=3637;M<=3639;M++)U[M]=0;for(M=3665;M<=3667;M++)U[M]=0;for(M=3693;M<=3695;M++)U[M]=0;for(M=3701;M<=3727;M++)U[M]=0;for(M=3728;M<=3739;M++)U[M]=2;for(M=3740;M<=3751;M++)U[M]=0;for(M=3753;M<=3760;M++)U[M]=2;for(M=3761;M<=3773;M++)U[M]=0;for(M=3775;M<=3777;M++)U[M]=0;for(M=3779;M<=3781;M++)U[M]=0;for(M=3783;M<=3785;M++)U[M]=0;for(M=3788;M<=3791;M++)U[M]=0;for(M=3797;M<=3802;M++)U[M]=0;for(M=3814;M<=3816;M++)U[M]=0;for(M=3825;M<=3829;M++)U[M]=0;for(M=3832;M<=3841;M++)U[M]=0;for(M=3844;M<=3852;M++)U[M]=0;for(M=3873;M<=3885;M++)U[M]=0;for(M=3890;M<=3893;M++)U[M]=0;for(M=3907;M<=3912;M++)U[M]=0;for(M=3942;M<=3950;M++)U[M]=0;for(M=3968;M<=3970;M++)U[M]=0;for(M=3973;M<=3976;M++)U[M]=0;for(M=3986;M<=3989;M++)U[M]=0;for(M=3994;M<=3997;M++)U[M]=0;for(M=4048;M<=4051;M++)U[M]=0;for(M=4056;M<=4063;M++)U[M]=0;for(M=4093;M<=4096;M++)U[M]=0;for(M=4390;M<=4398;M++)U[M]=0;for(M=4399;M<=4413;M++)U[M]=2;for(M=4418;M<=4433;M++)U[M]=2;for(M=4455;M<=4457;M++)U[M]=2;for(M=4484;M<=4489;M++)U[M]=0;for(M=4491;M<=4554;M++)U[M]=0;for(M=4568;M<=4589;M++)U[M]=0;for(M=4652;M<=4656;M++)U[M]=0;for(M=4766;M<=4800;M++)U[M]=0;for(M=5014;M<=5016;M++)U[M]=0;for(M=5069;M<=5072;M++)U[M]=0;for(M=5105;M<=5130;M++)U[M]=0;for(M=5167;M<=5188;M++)U[M]=0;for(M=5253;M<=5259;M++)U[M]=0;for(M=5269;M<=5275;M++)U[M]=0;for(M=5292;M<=5311;M++)U[M]=0;for(M=5329;M<=5331;M++)U[M]=0;for(M=5343;M<=5349;M++)U[M]=0;for(M=5355;M<=5357;M++)U[M]=0;for(M=5387;M<=5389;M++)U[M]=0;for(M=5459;M<=5463;M++)U[M]=0;for(M=5479;M<=5482;M++)U[M]=0;for(M=5518;M<=5520;M++)U[M]=0;for(M=5530;M<=5539;M++)U[M]=0;for(M=5550;M<=5552;M++)U[M]=0;for(M=5562;M<=5583;M++)U[M]=0;for(M=5623;M<=5625;M++)U[M]=2;for(M=5631;M<=5639;M++)U[M]=0;for(M=5649;M<=5653;M++)U[M]=0;for(M=5663;M<=5680;M++)U[M]=0;for(M=5682;M<=5685;M++)U[M]=0;for(M=5875;M<=5877;M++)U[M]=0;for(M=5896;M<=5899;M++)U[M]=0;for(M=5921;M<=5940;M++)U[M]=0;for(M=6050;M<=6125;M++)U[M]=0;for(M=6244;M<=6275;M++)U[M]=0;for(M=6328;M<=6348;M++)U[M]=0;for(M=6350;M<=6356;M++)U[M]=0;for(M=6366;M<=6372;M++)U[M]=0;for(M=6381;M<=6387;M++)U[M]=0;for(M=6393;M<=6404;M++)U[M]=0;for(M=6480;M<=6483;M++)U[M]=0;for(M=6511;M<=6514;M++)U[M]=0;for(M=6579;M<=6581;M++)U[M]=0;for(M=6619;M<=6624;M++)U[M]=0;for(M=6625;M<=6627;M++)U[M]=2;for(M=6628;M<=6632;M++)U[M]=0;for(M=6634;M<=6637;M++)U[M]=0;for(M=6669;M<=6692;M++)U[M]=0;for(M=6707;M<=6709;M++)U[M]=0;for(M=6720;M<=6723;M++)U[M]=0;for(M=6732;M<=6738;M++)U[M]=0;for(M=6931;M<=6933;M++)U[M]=0;for(M=6956;M<=6959;M++)U[M]=0;for(M=7005;M<=7007;M++)U[M]=0;for(M=7057;M<=7070;M++)U[M]=2;for(M=7074;M<=7082;M++)U[M]=0;for(M=7109;M<=7118;M++)U[M]=0;for(M=7119;M<=7127;M++)U[M]=1;for(M=7374;M<=7376;M++)U[M]=0;for(M=7528;M<=7586;M++)U[M]=0;for(M=7587;M<=7645;M++)U[M]=2;for(M=7692;M<=7696;M++)U[M]=0;for(M=7755;M<=7787;M++)U[M]=0;for(M=7791;M<=7795;M++)U[M]=0;for(M=7799;M<=7801;M++)U[M]=0;for(M=7803;M<=7805;M++)U[M]=0;for(M=7825;M<=7831;M++)U[M]=0;for(M=7845;M<=7859;M++)U[M]=0;for(M=8013;M<=8032;M++)U[M]=0;for(M=8065;M<=8068;M++)U[M]=1;for(M=8518;M<=8529;M++)U[M]=2;for(M=8533;M<=8536;M++)U[M]=2;for(M=8538;M<=8540;M++)U[M]=2;for(M=8677;M<=8679;M++)U[M]=0;for(M=8836;M<=8840;M++)U[M]=0;for(M=8857;M<=8859;M++)U[M]=0;for(M=8908;M<=8910;M++)U[M]=0;for(M=9154;M<=9159;M++)U[M]=0;for(M=9205;M<=9218;M++)U[M]=0;for(M=9271;M<=9273;M++)U[M]=0;for(M=9295;M<=9297;M++)U[M]=0;for(M=9356;M<=9360;M++)U[M]=0;for(M=9404;M<=9407;M++)U[M]=0;for(M=9476;M<=9482;M++)U[M]=0;for(M=9487;M<=9494;M++)U[M]=0;for(M=9697;M<=9699;M++)U[M]=0;for(M=9821;M<=9865;M++)U[M]=0;for(M=10285;M<=10291;M++)U[M]=0;for(M=10314;M<=10317;M++)U[M]=0;for(M=10448;M<=10465;M++)U[M]=0;for(M=10731;M<=10733;M++)U[M]=0;for(M=11114;M<=11118;M++)U[M]=0;for(M=20004;M<=20032;M++)U[M]=0;for(M=20047;M<=20049;M++)U[M]=0;for(M=20062;M<=20092;M++)U[M]=0;for(M=20135;M<=20138;M++)U[M]=0;for(M=20248;M<=20258;M++)U[M]=0;for(M=20348;M<=20358;M++)U[M]=0;for(M=20436;M<=20440;M++)U[M]=0;for(M=20822;M<=20824;M++)U[M]=0;for(M=20904;M<=20932;M++)U[M]=0;for(M=20934;M<=20936;M++)U[M]=0;for(M=21004;M<=21032;M++)U[M]=0;for(M=21035;M<=21037;M++)U[M]=0;for(M=21095;M<=21097;M++)U[M]=0;for(M=21148;M<=21150;M++)U[M]=0;for(M=21207;M<=21264;M++)U[M]=0;for(M=21307;M<=21364;M++)U[M]=0;for(M=21413;M<=21423;M++)U[M]=0;for(M=21453;M<=21463;M++)U[M]=0;for(M=21473;M<=21483;M++)U[M]=0;for(M=21780;M<=21782;M++)U[M]=0;for(M=21891;M<=21894;M++)U[M]=0;for(M=21896;M<=21899;M++)U[M]=0;for(M=22171;M<=22177;M++)U[M]=0;for(M=22181;M<=22187;M++)U[M]=0;for(M=22191;M<=22197;M++)U[M]=0;for(M=22207;M<=22222;M++)U[M]=0;for(M=22229;M<=22232;M++)U[M]=0;for(M=22234;M<=22236;M++)U[M]=0;for(M=22243;M<=22250;M++)U[M]=0;for(M=22262;M<=22265;M++)U[M]=0;for(M=22307;M<=22322;M++)U[M]=0;for(M=22348;M<=22357;M++)U[M]=0;for(M=22407;M<=22422;M++)U[M]=0;for(M=22462;M<=22465;M++)U[M]=0;for(M=22521;M<=22525;M++)U[M]=0;for(M=22607;M<=22622;M++)U[M]=0;for(M=22641;M<=22646;M++)U[M]=0;for(M=22648;M<=22657;M++)U[M]=0;for(M=22707;M<=22722;M++)U[M]=0;for(M=22762;M<=22765;M++)U[M]=0;for(M=22807;M<=22822;M++)U[M]=0;for(M=22991;M<=22994;M++)U[M]=0;for(M=23028;M<=23038;M++)U[M]=0;for(M=23301;M<=23333;M++)U[M]=2;for(M=23830;M<=23853;M++)U[M]=0;for(M=23866;M<=23872;M++)U[M]=0;for(M=23877;M<=23884;M++)U[M]=0;for(M=23886;M<=23894;M++)U[M]=0;for(M=23946;M<=23948;M++)U[M]=0;for(M=24311;M<=24313;M++)U[M]=0;for(M=24342;M<=24347;M++)U[M]=0;for(M=24370;M<=24374;M++)U[M]=10;for(M=24375;M<=24381;M++)U[M]=0;for(M=24718;M<=24721;M++)U[M]=0;for(M=24817;M<=24821;M++)U[M]=0;for(M=24877;M<=24882;M++)U[M]=0;for(M=24891;M<=24893;M++)U[M]=0;for(M=25391;M<=25395;M++)U[M]=0;for(M=25828;M<=25838;M++)U[M]=0;for(M=26191;M<=26195;M++)U[M]=0;for(M=26391;M<=26393;M++)U[M]=0;for(M=26701;M<=26722;M++)U[M]=0;for(M=26729;M<=26799;M++)U[M]=2;for(M=26801;M<=26803;M++)U[M]=2;for(M=26811;M<=26813;M++)U[M]=2;for(M=26847;M<=26870;M++)U[M]=2;for(M=26891;M<=26899;M++)U[M]=0;for(M=26901;M<=26923;M++)U[M]=0;for(M=26929;M<=26946;M++)U[M]=0;for(M=26948;M<=26998;M++)U[M]=0;for(M=27037;M<=27040;M++)U[M]=0;for(M=27205;M<=27232;M++)U[M]=0;for(M=27258;M<=27260;M++)U[M]=0;for(M=27391;M<=27398;M++)U[M]=0;for(M=27561;M<=27564;M++)U[M]=0;for(M=27571;M<=27574;M++)U[M]=0;for(M=27581;M<=27584;M++)U[M]=0;for(M=27591;M<=27594;M++)U[M]=0;for(M=27700;M<=27707;M++)U[M]=0;for(M=28191;M<=28193;M++)U[M]=0;for(M=28348;M<=28358;M++)U[M]=0;for(M=28402;M<=28432;M++)U[M]=0;for(M=28462;M<=28492;M++)U[M]=0;for(M=29118;M<=29122;M++)U[M]=0;for(M=29168;M<=29172;M++)U[M]=0;for(M=29177;M<=29185;M++)U[M]=0;for(M=29187;M<=29195;M++)U[M]=0;for(M=29900;M<=29903;M++)U[M]=0;for(M=30161;M<=30179;M++)U[M]=0;for(M=30491;M<=30494;M++)U[M]=0;for(M=30729;M<=30732;M++)U[M]=0;for(M=31251;M<=31259;M++)U[M]=0;for(M=31265;M<=31268;M++)U[M]=0;for(M=31275;M<=31279;M++)U[M]=0;for(M=31281;M<=31297;M++)U[M]=0;for(M=31461;M<=31469;M++)U[M]=0;for(M=31491;M<=31495;M++)U[M]=0;for(M=31917;M<=31922;M++)U[M]=0;for(M=31965;M<=32e3;M++)U[M]=0;for(M=32001;M<=32003;M++)U[M]=2;for(M=32005;M<=32031;M++)U[M]=2;for(M=32033;M<=32060;M++)U[M]=2;for(M=32064;M<=32067;M++)U[M]=2;for(M=32074;M<=32077;M++)U[M]=2;for(M=32081;M<=32086;M++)U[M]=0;for(M=32107;M<=32130;M++)U[M]=0;for(M=32133;M<=32159;M++)U[M]=0;for(M=32164;M<=32167;M++)U[M]=2;for(M=32180;M<=32199;M++)U[M]=0;for(M=32201;M<=32260;M++)U[M]=0;for(M=32301;M<=32360;M++)U[M]=0;for(M=32401;M<=32460;M++)U[M]=0;for(M=32501;M<=32560;M++)U[M]=0;for(M=32601;M<=32662;M++)U[M]=0;for(M=32664;M<=32667;M++)U[M]=2;for(M=32701;M<=32761;M++)U[M]=0;for(M=53001;M<=53004;M++)U[M]=0;for(M=53008;M<=53019;M++)U[M]=0;for(M=53021;M<=53032;M++)U[M]=0;for(M=53034;M<=53037;M++)U[M]=0;for(M=53042;M<=53046;M++)U[M]=0;for(M=53074;M<=53080;M++)U[M]=0;for(M=54001;M<=54004;M++)U[M]=0;for(M=54008;M<=54019;M++)U[M]=0;for(M=54021;M<=54032;M++)U[M]=0;for(M=54034;M<=54037;M++)U[M]=0;for(M=54042;M<=54046;M++)U[M]=0;for(M=54048;M<=54053;M++)U[M]=0;for(M=54074;M<=54080;M++)U[M]=0;for(M=54098;M<=54101;M++)U[M]=0;for(M=102001;M<=102040;M++)U[M]=0;for(M=102042;M<=102063;M++)U[M]=0;for(M=102065;M<=102067;M++)U[M]=0;for(M=102070;M<=102117;M++)U[M]=0;for(M=102122;M<=102216;M++)U[M]=0;for(M=102221;M<=102377;M++)U[M]=0;for(M=102382;M<=102388;M++)U[M]=0;for(M=102389;M<=102398;M++)U[M]=2;for(M=102399;M<=102444;M++)U[M]=0;for(M=102445;M<=102447;M++)U[M]=2;for(M=102448;M<=102458;M++)U[M]=0;for(M=102459;M<=102468;M++)U[M]=2;for(M=102469;M<=102499;M++)U[M]=0;for(M=102500;M<=102519;M++)U[M]=1;for(M=102520;M<=102524;M++)U[M]=0;for(M=102525;M<=102529;M++)U[M]=2;for(M=102530;M<=102588;M++)U[M]=0;for(M=102590;M<=102598;M++)U[M]=0;for(M=102601;M<=102603;M++)U[M]=0;for(M=102605;M<=102628;M++)U[M]=0;for(M=102629;M<=102646;M++)U[M]=2;for(M=102648;M<=102700;M++)U[M]=2;for(M=102701;M<=102703;M++)U[M]=0;for(M=102707;M<=102730;M++)U[M]=2;for(M=102733;M<=102758;M++)U[M]=2;for(M=102767;M<=102900;M++)U[M]=0;for(M=102901;M<=102933;M++)U[M]=2;for(M=102934;M<=102950;M++)U[M]=13;for(M=102951;M<=102963;M++)U[M]=0;for(M=102965;M<=102969;M++)U[M]=0;for(M=102971;M<=102973;M++)U[M]=0;for(M=102975;M<=102989;M++)U[M]=0;for(M=102990;M<=102992;M++)U[M]=1;for(M=102997;M<=103002;M++)U[M]=0;for(M=103003;M<=103008;M++)U[M]=2;for(M=103009;M<=103011;M++)U[M]=0;for(M=103012;M<=103014;M++)U[M]=2;for(M=103019;M<=103021;M++)U[M]=0;for(M=103022;M<=103024;M++)U[M]=2;for(M=103029;M<=103031;M++)U[M]=0;for(M=103032;M<=103034;M++)U[M]=2;for(M=103065;M<=103068;M++)U[M]=0;for(M=103074;M<=103076;M++)U[M]=0;for(M=103077;M<=103079;M++)U[M]=1;for(M=103080;M<=103082;M++)U[M]=0;for(M=103083;M<=103085;M++)U[M]=2;for(M=103090;M<=103093;M++)U[M]=0;for(M=103097;M<=103099;M++)U[M]=0;for(M=103100;M<=103102;M++)U[M]=2;for(M=103107;M<=103109;M++)U[M]=0;for(M=103110;M<=103112;M++)U[M]=2;for(M=103113;M<=103116;M++)U[M]=0;for(M=103117;M<=103120;M++)U[M]=2;for(M=103153;M<=103157;M++)U[M]=0;for(M=103158;M<=103162;M++)U[M]=2;for(M=103163;M<=103165;M++)U[M]=0;for(M=103166;M<=103168;M++)U[M]=1;for(M=103169;M<=103171;M++)U[M]=2;for(M=103186;M<=103188;M++)U[M]=0;for(M=103189;M<=103191;M++)U[M]=2;for(M=103192;M<=103195;M++)U[M]=0;for(M=103196;M<=103199;M++)U[M]=2;for(M=103200;M<=103224;M++)U[M]=0;for(M=103225;M<=103227;M++)U[M]=1;for(M=103232;M<=103237;M++)U[M]=0;for(M=103238;M<=103243;M++)U[M]=2;for(M=103244;M<=103246;M++)U[M]=0;for(M=103247;M<=103249;M++)U[M]=2;for(M=103254;M<=103256;M++)U[M]=0;for(M=103257;M<=103259;M++)U[M]=2;for(M=103264;M<=103266;M++)U[M]=0;for(M=103267;M<=103269;M++)U[M]=2;for(M=103300;M<=103375;M++)U[M]=0;for(M=103381;M<=103383;M++)U[M]=0;for(M=103384;M<=103386;M++)U[M]=1;for(M=103387;M<=103389;M++)U[M]=0;for(M=103390;M<=103392;M++)U[M]=2;for(M=103397;M<=103399;M++)U[M]=0;for(M=103400;M<=103471;M++)U[M]=2;for(M=103476;M<=103478;M++)U[M]=0;for(M=103479;M<=103481;M++)U[M]=2;for(M=103486;M<=103488;M++)U[M]=0;for(M=103489;M<=103491;M++)U[M]=2;for(M=103492;M<=103495;M++)U[M]=0;for(M=103496;M<=103499;M++)U[M]=2;for(M=103528;M<=103543;M++)U[M]=0;for(M=103544;M<=103548;M++)U[M]=2;for(M=103549;M<=103551;M++)U[M]=0;for(M=103552;M<=103554;M++)U[M]=1;for(M=103555;M<=103557;M++)U[M]=2;for(M=103558;M<=103560;M++)U[M]=0;for(M=103571;M<=103573;M++)U[M]=0;for(M=103574;M<=103576;M++)U[M]=2;for(M=103577;M<=103580;M++)U[M]=0;for(M=103581;M<=103583;M++)U[M]=2;for(M=103595;M<=103694;M++)U[M]=0;for(M=103696;M<=103699;M++)U[M]=0;for(M=103700;M<=103793;M++)U[M]=2;for(M=103794;M<=103890;M++)U[M]=0;for(M=103891;M<=103896;M++)U[M]=2;for(M=103900;M<=103971;M++)U[M]=2;for(M=103972;M<=103977;M++)U[M]=0;for(M=112e3;M<=112101;M++)U[M]=0;const HR=[102100,102113,3857,3785,900913],wY=[104905,104971],_Y=[4326,...HR,...wY],um=[-20037508342788905e-9,20037508342788905e-9],S9=[-20037508342787e-6,20037508342787e-6],i5={wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:um,origin:S9,dx:1e-5},VR={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:um,origin:S9,dx:1e-5},102100:i5,3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:um,origin:S9,dx:1e-5},3857:i5,4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},900913:i5};function Ai(t,e){if(t===e)return!0;if(t==null||e==null)return!1;const i=t.wkid,n=e.wkid;if(i!=null||n!=null){if(i===n||ca(t)&&ca(e))return!0;const f=t.latestWkid;if(f!=null&&n===f)return!0;const m=e.latestWkid;return m!=null&&i===m}let s,h;return t.wkt2&&e.wkt2?(s=t.wkt2,h=e.wkt2):t.wkt&&e.wkt&&(s=t.wkt,h=e.wkt),!(!s||!h)&&s.toUpperCase()===h.toUpperCase()}function cr(t){const e=t==null?void 0:t.wkid;return e!=null&&e>=2e3&&VR[e]||null}function U2(t){if(!t)return;const{wkid:e,vcsWkid:i}=t;if(e)return i?JSON.stringify({wkid:e,vcsWkid:i}):String(e);const n=t.wkt||t.wkt2;return JSON.stringify(n?i?{wkt:n,vcsWkid:i}:{wkt:n}:{})}function O0(t){if(!Sr(t))return!1;const{wkid:e}=t;if(e)return U[e]==null;const i=t.wkt2||t.wkt;return!!i&&/^\s*(?:GEOGCS|GEOGCRS|GEOGRAPHICCRS)/i.test(i)}function xY(t){return!(RT(t)||NT(t))}function nu(t){return(t==null?void 0:t.wkid)===4326}function EEe(t){return/^\s*(?:GEOD|GEODETIC|GEOG|GEOGRAPHIC|PROJ|PROJECTED|VERT|VERTICAL|ENG|ENGINEERING|PARAMETRIC|TIME|DERIVEDPROJ|COMPOUND|BOUND)CRS/i.test(t)}function T9(t){return(t==null?void 0:t.wkid)===co.CGCS2000}function ca(t){const e=t==null?void 0:t.wkid;return e!=null&&e>=2e3&&HR.includes(e)}function SY(t){return(t==null?void 0:t.wkid)===32662}function y3(t){return t===co.GCSMARS2000||t===co.GCSMARS2000_SPHERE}function RT(t){return y3(t==null?void 0:t.wkid)}function v3(t){return t===co.GCSMOON2000}function NT(t){return v3(t==null?void 0:t.wkid)}function TY(t){const e=t==null?void 0:t.wkid;return e!=null&&e>=2e3&&_Y.includes(e)}function Sr(t){if(t==null)return!1;const e=t.wkid;return e!=null&&e>=2e3||t.wkt2!=null||t.wkt!=null}const qR={wkid:4326,wkt:uT(VR[4326].wkTemplate,{Central_Meridian:"0.0"})},WR={wkid:102100,latestWkid:3857},EY={wkid:32662};function LT(t){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${t.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const MY=LT(Ii),DT=LT(ol),zT=LT(iu),$Y={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${Ii.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`},kY=DT.wkt.toUpperCase(),CY=zT.wkt.toUpperCase();function FT(t){if(t!=null&&Sr(t)){const e=t.wkid,i=t.wkt2??t.wkt;if(y3(e))return ol;const n=i==null?void 0:i.toUpperCase();if(i&&n===kY)return ol;if(v3(e)||n&&n===CY)return iu}return Ii}function MEe(t){return y3(t)?ol:v3(t)?iu:Ii}function B2(t){return Ai(t,MY)}function ru(t){return B2(t)||Ai(t,DT)||Ai(t,zT)}const KR=39.37,IY=Ii.radius*Math.PI/200,ZR=/(?:LENGTH)?UNIT\[([^\]]+)]]$/i,Ld=U,JR=/UNIT\[([^\]]+)]/i,AY=new Set([4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104025,104026,104139,104140]),OY=Ar()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain:"chains",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),xa=t=>t*t,qc=t=>t*t*t,dm={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937},"clarke-feet":{inBaseUnits:.3047972654},"clarke-yards":{inBaseUnits:.9143917962},"clarke-links":{inBaseUnits:.201166195164},"sears-yards":{inBaseUnits:.9143984146160287},"sears-feet":{inBaseUnits:.3047994715386762},"sears-chains":{inBaseUnits:20.11676512155263},"benoit-1895-b-chains":{inBaseUnits:20.11678249437587},"indian-yards":{inBaseUnits:.9143985307444408},"indian-1937-yards":{inBaseUnits:.91439523},"gold-coast-feet":{inBaseUnits:.3047997101815088},chains:{inBaseUnits:20.1168},"sears-1922-truncated-chains":{inBaseUnits:20.116756},"50-kilometers":{inBaseUnits:5e4},"150-kilometers":{inBaseUnits:15e4}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:xa(.001)},"square-centimeters":{inBaseUnits:xa(.01)},"square-decimeters":{inBaseUnits:xa(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:xa(1e3)},"square-inches":{inBaseUnits:xa(.0254)},"square-feet":{inBaseUnits:xa(.3048)},"square-yards":{inBaseUnits:xa(.9144)},"square-miles":{inBaseUnits:xa(1609.344)},"square-us-feet":{inBaseUnits:xa(1200/3937)},acres:{inBaseUnits:.0015625*xa(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*qc(.001)},"cubic-centimeters":{inBaseUnits:1e3*qc(.01)},"cubic-decimeters":{inBaseUnits:1e3*qc(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*qc(1e3)},"cubic-inches":{inBaseUnits:1e3*qc(.0254)},"cubic-feet":{inBaseUnits:1e3*qc(.3048)},"cubic-yards":{inBaseUnits:1e3*qc(.9144)},"cubic-miles":{inBaseUnits:1e3*qc(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},PY=(()=>{const t={};for(const e in dm)for(const i in dm[e].units)t[i]=e;return t})();function RY(t,e,i){return t*dm[i].units[e].inBaseUnits}function NY(t,e,i){return t/dm[i].units[e].inBaseUnits}const LY=["metric","imperial","square-inches","square-feet","square-yards","square-miles","square-us-feet","square-meters","square-kilometers","acres","ares","hectares"],jT=["metric","imperial","inches","feet","yards","miles","nautical-miles","us-feet","meters","kilometers"],DY=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]);function $Ee(t){return t==="imperial"||t==="metric"}function qd(t){const e=PY[t];if(!e)throw new Error("unknown type");return e}function f8(t,e=null){return e=e||qd(t),dm[e].baseUnit===t}function oi(t,e,i){if(e===i)return t;const n=qd(e);if(n!==qd(i))throw new Error("incompatible units");const s=f8(e,n)?t:RY(t,e,n);return f8(i,n)?s:NY(s,i,n)}function zY(t){switch(t){case"metric":return"meters";case"imperial":return"feet";default:return t}}function kEe(t){return zY(t)}function CEe(t){switch(t){case"metric":return"square-meters";case"imperial":return"square-feet";default:return t}}function IEe(t,e){const i=oi(t,e,"meters");return Math.abs(i)<3e3?"meters":"kilometers"}function AEe(t,e){const i=oi(t,e,"meters");return Math.abs(i)<1e5?"meters":"kilometers"}function OEe(t,e){const i=oi(t,e,"feet");return Math.abs(i)<1e3?"feet":"miles"}function PEe(t,e){const i=oi(t,e,"feet");return Math.abs(i)<1e5?"feet":"miles"}function REe(t,e){const i=oi(t,e,"square-meters");return Math.abs(i)<3e6?"square-meters":"square-kilometers"}function NEe(t,e){const i=oi(t,e,"square-feet");return Math.abs(i)<1e6?"square-feet":"square-miles"}function YR(t,e,i){return oi(t,e,"meters")/(i*Math.PI/180)}function XR(t){return OY.fromJSON(t.toLowerCase())||null}function g8(t){if(t!=null&&!xY(t))return 1;const e=kr(t);return e>1e5?1:e}function QR(t){return kr(t)>=FT(t).metersPerDegree?"meters":iy(t)}function kr(t,e=Ii.metersPerDegree){return eN(t,!0)??e}function eN(t,e=!1){const i=(t==null?void 0:t.wkid)??null,n=(t==null?void 0:t.wkt2)??(t==null?void 0:t.wkt)??null;let s=null;if(i){if(y3(i))return ol.metersPerDegree;if(v3(i))return iu.metersPerDegree;s=Ld.values[Ld[i]],!s&&e&&AY.has(i)&&(s=IY)}else n&&(GT(n)?s=m8(ZR.exec(n),s):nN(n)&&(s=m8(JR.exec(n),s)));return s}function LEe(t){return O0(t)?1:kr(t)}function m8(t,e){return t!=null&&t[1]?tN(t[1]):e}function tN(t){return parseFloat(t.split(",")[1])}function iy(t){const e=(t==null?void 0:t.wkid)??null,i=(t==null?void 0:t.wkt2)??(t==null?void 0:t.wkt)??null;let n=null;if(e)n=Ld.units[Ld[e]];else if(i){const s=GT(i)?ZR:nN(i)?JR:null;if(s){const h=s.exec(i);h!=null&&h[1]&&(n=GY(h[1]))}}return n!=null?XR(n):null}function FY(t){const e=iy(t);return e!=null&&jT.includes(e)?e:null}function iN(t){const e=QR(t);return e!=null&&jT.includes(e)?e:null}function DEe(t){const e=iy(t);return e==null?null:DY.get(e)}function nN(t){return/^GEOCCS/i.test(t)}function GT(t){return/^\s*(?:PROJCS|PROJCRS|PROJECTEDCRS)/i.test(t)}const jY=1e-7;function GY(t){const e=/[\\"']{1}([^\\"']+)/.exec(t);let i=e==null?void 0:e[1];if(!i||!Ld.units.includes(i)){const n=tN(t);i=null;const s=Ld.values;for(let h=0;h<s.length;++h)if(Math.abs(n-s[h])<jY){i=Ld.units[h];break}}return i}function UY(t){const e=iy(t);if(e==null)return null;switch(e){case"feet":case"us-feet":case"clarke-feet":case"clarke-yards":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"benoit-1895-b-chains":case"indian-yards":case"indian-1937-yards":case"gold-coast-feet":case"chains":case"sears-1922-truncated-chains":return"imperial";case"50-kilometers":case"150-kilometers":case"meters":return"metric"}return null}const BY={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},HY={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},VY={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},zEe=Ar()(BY),FEe=Ar()(HY),jEe=Ar()(VY);function yt(t,e,i){let n,s;return e===void 0?(s=t,n=[void 0]):typeof e!="string"?(s=t,n=[void 0],i=e):(s=e,n=Array.isArray(t)?t:[t]),(h,f)=>{const m=h.constructor.prototype;for(const y of n){const x=hR(h,y,s);x.write&&typeof x.write=="object"||(x.write={}),i&&(x.write.target=i),x.write.writer=m[f]}}}var Ca;let Gt=Ca=class extends De{static fromJSON(t){if(!t)return null;if((t==null?void 0:t.wkid)===102100)return Ca.WebMercator;if((t==null?void 0:t.wkid)===4326)return Ca.WGS84;const e=new Ca;return e.read(t),e}constructor(t){super(t),this.latestWkid=null,this.wkid=null,this.wkt=null,this.wkt2=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(t){return t&&typeof t=="object"?t:{[typeof t=="string"?"wkt":"wkid"]:t}}get isWGS84(){return nu(this)}get isWebMercator(){return ca(this)}get isGeographic(){return O0(this)}get isWrappable(){return TY(this)}get metersPerUnit(){return kr(this)}get unit(){return iy(this)||(this.isGeographic?"degrees":null)}writeWkt(t,e){this.wkid||(e.wkt=t)}clone(){if(this===Ca.WGS84)return new Ca(qR);if(this===Ca.WebMercator)return new Ca(WR);const t=new Ca;return this.wkid!=null?(t.wkid=this.wkid,this.latestWkid!=null&&(t.latestWkid=this.latestWkid),this.vcsWkid!=null&&(t.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(t.latestVcsWkid=this.latestVcsWkid)):(this.wkt!=null&&(t.wkt=this.wkt),this.wkt2!=null&&(t.wkt2=this.wkt2)),this.imageCoordinateSystem&&(t.imageCoordinateSystem=_e(this.imageCoordinateSystem)),t}equals(t){if(t==null)return!1;if(this.imageCoordinateSystem||t.imageCoordinateSystem){if(this.imageCoordinateSystem==null||t.imageCoordinateSystem==null)return!1;const{id:e,referenceServiceName:i}=t.imageCoordinateSystem,{geodataXform:n}=t.imageCoordinateSystem,s=this.imageCoordinateSystem;return e==null||n?JSON.stringify(s)===JSON.stringify(t.imageCoordinateSystem):i?s.id===e&&s.referenceServiceName===i:s.id===e}return Ai(this,t)}toJSON(t){return this.write(void 0,t)}};Gt.GCS_NAD_1927=null,Gt.WGS84=null,Gt.WebMercator=null,Gt.PlateCarree=null,_([S({readOnly:!0})],Gt.prototype,"isWGS84",null),_([S({readOnly:!0})],Gt.prototype,"isWebMercator",null),_([S({readOnly:!0})],Gt.prototype,"isGeographic",null),_([S({readOnly:!0})],Gt.prototype,"isWrappable",null),_([S({type:gi,json:{write:!0}})],Gt.prototype,"latestWkid",void 0),_([S({readOnly:!0})],Gt.prototype,"metersPerUnit",null),_([S({readOnly:!0})],Gt.prototype,"unit",null),_([S({type:gi,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],Gt.prototype,"wkid",void 0),_([S({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],Gt.prototype,"wkt",void 0),_([yt("wkt"),yt("web-scene","wkt")],Gt.prototype,"writeWkt",null),_([S({type:String,json:{write:!1}})],Gt.prototype,"wkt2",void 0),_([S({type:gi,json:{write:!0}})],Gt.prototype,"vcsWkid",void 0),_([S({type:gi,json:{write:!0}})],Gt.prototype,"latestVcsWkid",void 0),_([S()],Gt.prototype,"imageCoordinateSystem",void 0),Gt=Ca=_([J("esri.geometry.SpatialReference")],Gt),Gt.prototype.toJSON.isDefaultToJSON=!0,Gt.GCS_NAD_1927=Oe.freeze(new Gt({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'})),Gt.WGS84=Oe.freeze(new Gt(qR)),Gt.WebMercator=Oe.freeze(new Gt(WR)),Gt.PlateCarree=Oe.freeze(new Gt(EY));const Ke=Gt,qY=57.29577951308232,WY=.017453292519943;function y8(t){return t*qY}function v8(t){return t*WY}function b8(t){return t/Ii.radius}function w8(t){return Math.PI/2-2*Math.atan(Math.exp(-t/Ii.radius))}function E9(t){return t.wkid!=null||t.wkt!=null}const n5=[0,0];function H2(t,e,i,n,s){const h=t,f=s;if(f.spatialReference=i,"x"in h&&"x"in f)[f.x,f.y]=e(h.x,h.y,n5,n);else if("xmin"in h&&"xmin"in f)[f.xmin,f.ymin]=e(h.xmin,h.ymin,n5,n),[f.xmax,f.ymax]=e(h.xmax,h.ymax,n5,n);else if("paths"in h&&"paths"in f||"rings"in h&&"rings"in f){const m="paths"in h?h.paths:h.rings,y=[];let x;for(let E=0;E<m.length;E++){const k=m[E];x=[],y.push(x);for(let I=0;I<k.length;I++)x.push(e(k[I][0],k[I][1],[0,0],n)),k[I].length>2&&x[I].push(k[I][2]),k[I].length>3&&x[I].push(k[I][3])}"paths"in f?f.paths=y:f.rings=y}else if("points"in h&&"points"in f){const m=h.points,y=[];for(let x=0;x<m.length;x++)y[x]=e(m[x][0],m[x][1],[0,0],n),m[x].length>2&&y[x].push(m[x][2]),m[x].length>3&&y[x].push(m[x][3]);f.points=y}return s}function cb(t,e){const i=t&&(E9(t)?t:t.spatialReference),n=e&&(E9(e)?e:e.spatialReference);return!(t&&"type"in t&&t.type==="mesh"||e&&"type"in e&&e.type==="mesh"||!i||!n)&&(!!Ai(n,i)||ca(n)&&nu(i)||ca(i)&&nu(n))}function b3(t,e){if(t==null)return null;const i=t.spatialReference,n=e&&(E9(e)?e:e.spatialReference);return cb(i,n)?Ai(i,n)?_e(t):ca(n)?H2(t,wf,Ke.WebMercator,!1,_e(t)):nu(n)?H2(t,w3,Ke.WGS84,!1,_e(t)):null:null}function wf(t,e,i=[0,0]){e>89.99999?e=89.99999:e<-89.99999&&(e=-89.99999);const n=v8(e);return i[0]=v8(t)*Ii.radius,i[1]=Ii.halfSemiMajorAxis*Math.log((1+Math.sin(n))/(1-Math.sin(n))),i}function w3(t,e,i=[0,0],n=!1){if(t===um[0])i[0]=-180;else if(t===um[1])i[0]=180;else{const s=y8(t/Ii.radius);i[0]=n?s:s-360*Math.floor((s+180)/360)}return i[1]=y8(Math.PI/2-2*Math.atan(Math.exp(-e/Ii.radius))),i}function Ec(t,e=!1,i=_e(t)){return H2(t,wf,Ke.WebMercator,e,i)}function Gh(t,e=!1,i=_e(t)){return H2(t,w3,Ke.WGS84,e,i)}const KY=aP("AAPT85fOqywZsicJupSmVSCGrjLA1W20h_mLeh2lh6o9CJyXYBAoKjdUrh3K_IvP1ZS_RfWU6gpdTf2or3nnljXiE-VqENQiXJxKfVUc0i01VsXUKJsof8_Z5dsDu6AUkSO5bREc9tFYhhajs8gs-dtsFk3cZC41DL5y68iHe7exB8gXs_t3wuhuK1tyr4Y7AKhl-3ffbltk_9mmTfNY0VtPWO86Cj82XZHsS1-sP9NKAGg.AT2_H5Lo5hPL"),ml=rT({center:{x:-0,y:-0},scale:-0,extent:null}),ZY=sT(ml,t=>{if(t&&t.center){const e=Gh(t.center);return`${e.x.toFixed(4)}, ${e.y.toFixed(4)}`}return"-0.0000, -0.0000"}),JY=sT(ml,t=>{if(t&&t.extent)return JSON.stringify(t.extent,null,4)}),YY=sT(ml,t=>{if(t&&t.extent){let e=t.extent;const i=Gh(e);return JSON.stringify(i,null,4)}return"{}"}),rN=rT("full-size");function kt(t,e,i){let n,s;return e===void 0||Array.isArray(e)?(s=t,i=e,n=[void 0]):(s=e,n=Array.isArray(t)?t:[t]),(h,f)=>{const m=h.constructor.prototype;n.forEach(y=>{const x=hR(h,y,s);x.read&&typeof x.read=="object"||(x.read={}),x.read.reader=m[f],i&&(x.read.source=(x.read.source||[]).concat(i))})}}let Ia=class extends De{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=Ke.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,i){if(e instanceof Ke)return e;if(e!=null){const n=new Ke;return n.read(e,i),n}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,i){this.cache[e]=i}};_([S()],Ia.prototype,"type",void 0),_([S({readOnly:!0})],Ia.prototype,"cache",null),_([S({readOnly:!0})],Ia.prototype,"extent",null),_([S({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Ia.prototype,"hasM",void 0),_([S({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Ia.prototype,"hasZ",void 0),_([S({type:Ke,json:{write:!0},value:Ke.WGS84})],Ia.prototype,"spatialReference",void 0),_([kt("spatialReference")],Ia.prototype,"readSpatialReference",null),Ia=_([J("esri.geometry.Geometry")],Ia);const zc=Ia,XY=Object.prototype.toString;function QY(t){const e="__accessorMetadata__"in t?_n(t):t;return function(...i){if(i.push(e),typeof i[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return eX.apply(this,i)}}function eX(t,e,i,n){l3(t,e).cast=n}function tX(t){return(e,i)=>{l3(e,t).cast=e[i]}}function Hi(...t){if(t.length!==3||typeof t[1]!="string")return t.length===1&&XY.call(t[0])==="[object Function]"?QY(t[0]):t.length===1&&typeof t[0]=="string"?tX(t[0]):void 0}function sN(t,e){const i=t.x-e.x,n=t.y-e.y,s=t.z!=null&&e.z!=null?t.z-e.z:0;return Math.sqrt(i*i+n*n+s*s)}function iX(t){var e;return((e=oN(t,aN))==null?void 0:e[0])??null}function nX(t){var e;return((e=oN(t,aN))==null?void 0:e[1])??null}function oN({x:t,y:e,spatialReference:i},n=[0,0]){if(i){if(ca(i))return w3(t,e,n);if(O0(i))return n[0]=t,n[1]=e,n}return null}const aN=[0,0];var hb;const r5=[0,0];function _8(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let fr=hb=class extends zc{static copy(t,e){e._set("x",t._get("x")),e._set("y",t._get("y")),e._set("z",t._get("z")),e._set("m",t._get("m"));const i=t._get("spatialReference");e._set("spatialReference",Oe.isFrozen(i)?i:i.clone())}constructor(...t){super(...t),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(t,e,i,n,s){let h;if(Array.isArray(t))h=t,s=e,t=h[0],e=h[1],i=h[2],n=h[3];else if(t&&typeof t=="object"){if(h=t,t=h.x!=null?h.x:h.longitude,e=h.y!=null?h.y:h.latitude,i=h.z,n=h.m,(s=h.spatialReference)&&s.declaredClass!=="esri.geometry.SpatialReference"&&(s=new Ke(s)),h.longitude!=null||h.latitude!=null){if(h.longitude==null)Ae.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(h.latitude==null)Ae.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!h.declaredClass&&(s!=null&&s.isWebMercator)){const m=wf(h.longitude,h.latitude,r5);t=m[0],e=m[1]}}}else _8(i)?(s=i,i=null):_8(n)&&(s=n,n=null);const f={x:t,y:e};return f.x==null&&f.y!=null?Ae.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):f.y==null&&f.x!=null&&Ae.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),s!=null&&(f.spatialReference=s),i!=null&&(f.z=i),n!=null&&(f.m=n),f}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(t){t!==(this._get("m")!==void 0)&&(this._set("m",t?0:void 0),this._set("hasM",t))}get hasZ(){return this.z!==void 0}set hasZ(t){t!==(this._get("z")!==void 0)&&(this._set("z",t?0:void 0),this._set("hasZ",t))}get latitude(){return nX(this)}set latitude(t){const{spatialReference:e,x:i}=this;t!=null&&e&&(e.isWebMercator?this._set("y",wf(i,t,r5)[1]):e.isGeographic&&this._set("y",t),this._set("latitude",t))}get longitude(){return iX(this)}set longitude(t){const{y:e,spatialReference:i}=this;t!=null&&i&&(i.isWebMercator?this._set("x",wf(t,e,r5)[0]):i.isGeographic&&this._set("x",t),this._set("longitude",t))}writeX(t,e,i){e[i]=isNaN(t)?"NaN":t}readX(t){return typeof t=="string"?NaN:t}clone(){const t=new hb;return t.x=this.x,t.y=this.y,t.z=this.z,t.m=this.m,t.spatialReference=this.spatialReference,t}copy(t){return hb.copy(t,this),this}equals(t){if(t==null)return!1;const{x:e,y:i,z:n,m:s,spatialReference:h}=this,{z:f,m}=t;let{x:y,y:x,spatialReference:E}=t;if(!h.equals(E))if(h.isWebMercator&&E.isWGS84)[y,x]=wf(y,x),E=h;else{if(!h.isWGS84||!E.isWebMercator)return!1;[y,x]=w3(y,x),E=h}return e===y&&i===x&&n===f&&s===m&&h.wkid===E.wkid}offset(t,e,i){return this.x+=t,this.y+=e,i!=null&&(this.z=(this.z??0)+i),this}normalize(){if(!this.spatialReference)return this;const t=cr(this.spatialReference);if(!t)return this;let e=this.x;const[i,n]=t.valid,s=2*n;let h;return e>n?(h=Math.ceil(Math.abs(e-n)/s),e-=h*s):e<i&&(h=Math.ceil(Math.abs(e-i)/s),e+=h*s),this._set("x",e),this}distance(t){return sN(this,t)}toArray(){const t=this.hasZ,e=this.hasM;return t&&e?[this.x,this.y,this.z,this.m]:t?[this.x,this.y,this.z]:e?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(t){return this.write({},t)}};_([S({readOnly:!0})],fr.prototype,"cache",null),_([S({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],fr.prototype,"hasM",null),_([S({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],fr.prototype,"hasZ",null),_([S({type:Number})],fr.prototype,"latitude",null),_([S({type:Number})],fr.prototype,"longitude",null),_([S({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),Hi(t=>isNaN(t)?t:Ss(t))],fr.prototype,"x",void 0),_([yt("x")],fr.prototype,"writeX",null),_([kt("x")],fr.prototype,"readX",null),_([S({type:Number,json:{write:!0}})],fr.prototype,"y",void 0),_([S({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],fr.prototype,"z",void 0),_([S({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],fr.prototype,"m",void 0),fr=hb=_([J("esri.geometry.Point")],fr),fr.prototype.toJSON.isDefaultToJSON=!0;const Ne=fr,s5=[0,0];function ny(t,e){return e!=null&&br(t,e.x,e.y,e.z)}function UEe(t,e){if(!e.points||e.points.length)return!1;for(const i of e.points)if(!i0(t,i))return!1;return!0}function rX(t,e){const{xmin:i,ymin:n,zmin:s,xmax:h,ymax:f,zmax:m}=e;return t.hasZ&&e.hasZ?br(t,i,n,s)&&br(t,i,f,s)&&br(t,h,f,s)&&br(t,h,n,s)&&br(t,i,n,m)&&br(t,i,f,m)&&br(t,h,f,m)&&br(t,h,n,m):br(t,i,n)&&br(t,i,f)&&br(t,h,f)&&br(t,h,n)}function i0(t,e){return br(t,e[0],e[1])}function sX(t,e){return br(t,e[0],e[1],e[2])}function br(t,e,i,n){return e>=t.xmin&&e<=t.xmax&&i>=t.ymin&&i<=t.ymax&&(n==null||!t.hasZ||n>=t.zmin&&n<=t.zmax)}function UT(t,e){return s5[1]=e.y,s5[0]=e.x,oX(t,s5)}function oX(t,e){return BT(t.rings,e)}function BT(t,e){if(!t)return!1;if(aX(t))return x8(!1,t,e);let i=!1;for(let n=0,s=t.length;n<s;n++)i=x8(i,t[n],e);return i}function aX(t){return!Array.isArray(t[0][0])}function x8(t,e,i){const[n,s]=i;let h=t,f=0;for(let m=0,y=e.length;m<y;m++){f++,f===y&&(f=0);const[x,E]=e[m],[k,I]=e[f];(E<s&&I>=s||I<s&&E>=s)&&x+(s-E)/(I-E)*(k-x)<n&&(h=!h)}return h}function lX(t,e){return ny(t,e)}function cX(t,e){const i=t.hasZ&&e.hasZ;let n,s,h;if(t.xmin<=e.xmin){if(n=e.xmin,t.xmax<n)return!1}else if(n=t.xmin,e.xmax<n)return!1;if(t.ymin<=e.ymin){if(s=e.ymin,t.ymax<s)return!1}else if(s=t.ymin,e.ymax<s)return!1;if(i&&e.hasZ){if(t.zmin<=e.zmin){if(h=e.zmin,t.zmax<h)return!1}else if(h=t.zmin,e.zmax<h)return!1}return!0}function hX(t,e){const{points:i,hasZ:n}=e,s=n?sX:i0;for(const h of i)if(s(t,h))return!0;return!1}const Wd=[0,0],Kd=[0,0],Zd=[0,0],Jd=[0,0],uX=[Wd,Kd,Zd,Jd],lN=[[Zd,Wd],[Wd,Kd],[Kd,Jd],[Jd,Zd]];function dX(t,e){return pX(t,e.rings)}function pX(t,e){Wd[0]=t.xmin,Wd[1]=t.ymax,Kd[0]=t.xmax,Kd[1]=t.ymax,Zd[0]=t.xmin,Zd[1]=t.ymin,Jd[0]=t.xmax,Jd[1]=t.ymin;for(const i of uX)if(BT(e,i))return!0;for(const i of e){if(!i.length)continue;let n=i[0];if(i0(t,n))return!0;for(let s=1;s<i.length;s++){const h=i[s];if(i0(t,h)||cN(n,h,lN))return!0;n=h}}return!1}function fX(t,e){Wd[0]=t.xmin,Wd[1]=t.ymax,Kd[0]=t.xmax,Kd[1]=t.ymax,Zd[0]=t.xmin,Zd[1]=t.ymin,Jd[0]=t.xmax,Jd[1]=t.ymin;const i=e.paths;for(const n of i){if(!i.length)continue;let s=n[0];if(i0(t,s))return!0;for(let h=1;h<n.length;h++){const f=n[h];if(i0(t,f)||cN(s,f,lN))return!0;s=f}}return!1}const En=[0,0];function gX(t){for(let e=0;e<t.length;e++){const i=t[e];for(let s=0;s<i.length-1;s++){const h=i[s],f=i[s+1];for(let m=e+1;m<t.length;m++)for(let y=0;y<t[m].length-1;y++){const x=t[m][y],E=t[m][y+1];if(M9(h,f,x,E,En)&&!(En[0]===h[0]&&En[1]===h[1]||En[0]===x[0]&&En[1]===x[1]||En[0]===f[0]&&En[1]===f[1]||En[0]===E[0]&&En[1]===E[1]))return!0}}const n=i.length;if(!(n<=4))for(let s=0;s<n-3;s++){let h=n-1;s===0&&(h=n-2);const f=i[s],m=i[s+1];for(let y=s+2;y<h;y++){const x=i[y],E=i[y+1];if(M9(f,m,x,E,En)&&!(En[0]===f[0]&&En[1]===f[1]||En[0]===x[0]&&En[1]===x[1]||En[0]===m[0]&&En[1]===m[1]||En[0]===E[0]&&En[1]===E[1]))return!0}}}return!1}function cN(t,e,i){for(let n=0;n<i.length;n++)if(M9(t,e,i[n][0],i[n][1]))return!0;return!1}function M9(t,e,i,n,s){const[h,f]=t,[m,y]=e,[x,E]=i,[k,I]=n,P=k-x,L=h-x,D=m-h,j=I-E,H=f-E,W=y-f,Z=j*D-P*W;if(Z===0)return!1;const Y=(P*H-j*L)/Z,te=(D*H-W*L)/Z;return Y>=0&&Y<=1&&te>=0&&te<=1&&(s&&(s[0]=h+Y*(m-h),s[1]=f+Y*(y-f)),!0)}function mX(t){switch(t){case"esriGeometryEnvelope":case"extent":return cX;case"esriGeometryMultipoint":case"multipoint":return hX;case"esriGeometryPoint":case"point":return lX;case"esriGeometryMultiPatch":case"multipatch":case"esriGeometryPolygon":case"polygon":return dX;case"esriGeometryPolyline":case"polyline":return fX}}var Vs;function yX(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}function Wc(t,e,i){return e==null?i:i==null?e:t(e,i)}let mn=Vs=class extends zc{constructor(...t){super(...t),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(t,e,i,n,s){return yX(t)?{spatialReference:t,xmin:0,ymin:0,xmax:0,ymax:0}:typeof t=="object"?(t.spatialReference=t.spatialReference==null?Ke.WGS84:t.spatialReference,t):{xmin:t,ymin:e,xmax:i,ymax:n,spatialReference:s??Ke.WGS84}}static fromBounds(t,e){return new Vs({xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3],spatialReference:e})}static fromPoint(t){return new Vs({xmin:t.x,ymin:t.y,zmin:t.z,xmax:t.x,ymax:t.y,zmax:t.z,spatialReference:t.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const t=new Ne({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(t.z=.5*(this.zmin+this.zmax)),this.hasM&&(t.m=.5*(this.mmin+this.mmax)),t}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(t){const e=this.center;return t.z!=null&&this.hasZ?this.offset(t.x-e.x,t.y-e.y,t.z-e.z):this.offset(t.x-e.x,t.y-e.y)}clone(){const t=new Vs;return t.xmin=this.xmin,t.ymin=this.ymin,t.xmax=this.xmax,t.ymax=this.ymax,t.spatialReference=this.spatialReference,this.zmin!=null&&(t.zmin=this.zmin,t.zmax=this.zmax),this.mmin!=null&&(t.mmin=this.mmin,t.mmax=this.mmax),t}contains(t){if(!t)return!1;const e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&cb(e,i)&&(t=e.isWebMercator?Ec(t):Gh(t,!0)),t.type==="point"?ny(this,t):t.type==="extent"&&rX(this,t)}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&cb(e,i)&&(t=e.isWebMercator?Ec(t):Gh(t,!0)),this.xmin===t.xmin&&this.ymin===t.ymin&&this.zmin===t.zmin&&this.mmin===t.mmin&&this.xmax===t.xmax&&this.ymax===t.ymax&&this.zmax===t.zmax&&this.mmax===t.mmax}expand(t){const e=.5*(1-t),i=this.width*e,n=this.height*e;if(this.xmin+=i,this.ymin+=n,this.xmax-=i,this.ymax-=n,this.hasZ){const s=(this.zmax-this.zmin)*e;this.zmin+=s,this.zmax-=s}if(this.hasM){const s=(this.mmax-this.mmin)*e;this.mmin+=s,this.mmax-=s}return this}intersects(t){if(t==null)return!1;t.type==="mesh"&&(t=t.extent);const e=this.spatialReference,i=t.spatialReference;return e&&i&&!Ai(e,i)&&cb(e,i)&&(t=e.isWebMercator?Ec(t):Gh(t,!0)),mX(t.type)(this,t)}normalize(){const t=this._normalize(!1,!0);return Array.isArray(t)?t:[t]}offset(t,e,i){return this.xmin+=t,this.ymin+=e,this.xmax+=t,this.ymax+=e,i!=null&&(this.zmin+=i,this.zmax+=i),this}shiftCentralMeridian(){return this._normalize(!0)}union(t){return this===t||(this.xmin=Math.min(this.xmin,t.xmin),this.ymin=Math.min(this.ymin,t.ymin),this.xmax=Math.max(this.xmax,t.xmax),this.ymax=Math.max(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=Wc(Math.min,this.zmin,t.zmin),this.zmax=Wc(Math.max,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=Wc(Math.min,this.mmin,t.mmin),this.mmax=Wc(Math.max,this.mmax,t.mmax))),this}intersection(t){return this===t?this:t!=null&&this.intersects(t)?(this.xmin=Math.max(this.xmin,t.xmin),this.ymin=Math.max(this.ymin,t.ymin),this.xmax=Math.min(this.xmax,t.xmax),this.ymax=Math.min(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=Wc(Math.max,this.zmin,t.zmin),this.zmax=Wc(Math.min,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=Wc(Math.max,this.mmin,t.mmin),this.mmax=Wc(Math.min,this.mmax,t.mmax)),this):null}toJSON(t){return this.write({},t)}_shiftCM(t=cr(this.spatialReference)){if(!t||!this.spatialReference)return this;const e=this.spatialReference,i=this._getCM(t);if(i){const n=e.isWebMercator?Gh(i):i;this.xmin-=i.x,this.xmax-=i.x,e.isWebMercator||(n.x=o5(n.x,t).x),this.spatialReference=new Ke(uT((e.isWGS84?t.altTemplate:null)??t.wkTemplate,{Central_Meridian:n.x}))}return this}_getCM(t){let e=null;const[i,n]=t.valid,s=this.xmin,h=this.xmax;return s>=i&&s<=n&&h>=i&&h<=n||(e=this.center),e}_normalize(t,e,i){const n=this.spatialReference;if(!n)return this;const s=i??cr(n);if(s==null)return this;const h=this._getParts(s).map(y=>y.extent);if(h.length<2)return h[0]||this;if(h.length>2)return t?this._shiftCM(s):this.set({xmin:s.valid[0],xmax:s.valid[1]});if(t)return this._shiftCM(s);if(e)return h;let f=!0,m=!0;return h.forEach(y=>{y.hasZ||(f=!1),y.hasM||(m=!1)}),{rings:h.map(y=>{const x=[[y.xmin,y.ymin],[y.xmin,y.ymax],[y.xmax,y.ymax],[y.xmax,y.ymin],[y.xmin,y.ymin]];if(f){const E=(y.zmax-y.zmin)/2;for(let k=0;k<x.length;k++)x[k].push(E)}if(m){const E=(y.mmax-y.mmin)/2;for(let k=0;k<x.length;k++)x[k].push(E)}return x}),hasZ:f,hasM:m,spatialReference:n}}_getParts(t){let e=this.cache._parts;if(!e){e=[];const{ymin:s,ymax:h,spatialReference:f}=this,m=this.width,y=this.xmin,x=this.xmax;let E;t=t||cr(f);const[k,I]=t.valid;E=o5(this.xmin,t);const P=E.x,L=E.frameId;E=o5(this.xmax,t);const D=E.x,j=E.frameId,H=P===D&&m>0;if(m>2*I){const W=new Vs(y<x?P:D,s,I,h,f),Z=new Vs(k,s,y<x?D:P,h,f),Y=new Vs(0,s,I,h,f),te=new Vs(k,s,0,h,f),ie=[],le=[];W.contains(Y)&&ie.push(L),W.contains(te)&&le.push(L),Z.contains(Y)&&ie.push(j),Z.contains(te)&&le.push(j);for(let pe=L+1;pe<j;pe++)ie.push(pe),le.push(pe);e.push({extent:W,frameIds:[L]},{extent:Z,frameIds:[j]},{extent:Y,frameIds:ie},{extent:te,frameIds:le})}else P>D||H?e.push({extent:new Vs(P,s,I,h,f),frameIds:[L]},{extent:new Vs(k,s,D,h,f),frameIds:[j]}):e.push({extent:new Vs(P,s,D,h,f),frameIds:[L]});this.cache._parts=e}const i=this.hasZ,n=this.hasM;if(i||n){const s={};i&&(s.zmin=this.zmin,s.zmax=this.zmax),n&&(s.mmin=this.mmin,s.mmax=this.mmax);for(let h=0;h<e.length;h++)e[h].extent.set(s)}return e}};function o5(t,e){const[i,n]=e.valid,s=2*n;let h,f=0;return t>n?(h=Math.ceil(Math.abs(t-n)/s),t-=h*s,f=h):t<i&&(h=Math.ceil(Math.abs(t-i)/s),t+=h*s,f=-h),{x:t,frameId:f}}_([S({readOnly:!0})],mn.prototype,"cache",null),_([S({readOnly:!0})],mn.prototype,"center",null),_([S({readOnly:!0})],mn.prototype,"extent",null),_([S({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],mn.prototype,"hasM",null),_([S({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],mn.prototype,"hasZ",null),_([S({readOnly:!0})],mn.prototype,"height",null),_([S({readOnly:!0})],mn.prototype,"width",null),_([S({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],mn.prototype,"xmin",void 0),_([S({type:Number,json:{write:!0}})],mn.prototype,"ymin",void 0),_([S({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],mn.prototype,"mmin",void 0),_([S({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],mn.prototype,"zmin",void 0),_([S({type:Number,json:{write:!0}})],mn.prototype,"xmax",void 0),_([S({type:Number,json:{write:!0}})],mn.prototype,"ymax",void 0),_([S({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],mn.prototype,"mmax",void 0),_([S({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],mn.prototype,"zmax",void 0),mn=Vs=_([J("esri.geometry.Extent")],mn),mn.prototype.toJSON.isDefaultToJSON=!0;const Nt=mn;function n0(t,e,i=!1){let{hasM:n,hasZ:s}=t;Array.isArray(e)?e.length!==4||n||s?e.length===3&&i&&!n?(s=!0,n=!1):e.length===3&&n&&s&&(n=!1,s=!1):(n=!0,s=!0):(s=!s&&e.hasZ&&(!n||e.hasM),n=!n&&e.hasM&&(!s||e.hasZ)),t.hasZ=s,t.hasM=n}var $9;function S8(t){return(e,i)=>e==null?i:i==null?e:t(e,i)}function vX(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let sh=$9=class extends zc{constructor(...t){super(...t),this.points=[],this.type="multipoint"}normalizeCtorArgs(t,e){var s;if(!t&&!e)return{};const i={};Array.isArray(t)?(i.points=t,i.spatialReference=e):vX(t)?i.spatialReference=t:(t.points&&(i.points=t.points),t.spatialReference&&(i.spatialReference=t.spatialReference),t.hasZ&&(i.hasZ=t.hasZ),t.hasM&&(i.hasM=t.hasM));const n=(s=i.points)==null?void 0:s[0];return n&&(i.hasZ===void 0&&i.hasM===void 0?(i.hasZ=n.length>2,i.hasM=!1):i.hasZ===void 0?i.hasZ=n.length>3:i.hasM===void 0&&(i.hasM=n.length>3)),i}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const t=this.points;if(!t.length)return null;const e=new Nt,i=this.hasZ,n=this.hasM,s=i?3:2,h=t[0],f=S8(Math.min),m=S8(Math.max);let y,x,E,k,[I,P]=h,[L,D]=h;for(let j=0,H=t.length;j<H;j++){const W=t[j],[Z,Y]=W;if(I=f(I,Z),P=f(P,Y),L=m(L,Z),D=m(D,Y),i&&W.length>2){const te=W[2];y=f(y,te),E=m(E,te)}if(n&&W.length>s){const te=W[s];x=f(x,te),k=m(k,te)}}return e.xmin=I,e.ymin=P,e.xmax=L,e.ymax=D,e.spatialReference=this.spatialReference,i?(e.zmin=y,e.zmax=E):(e.zmin=void 0,e.zmax=void 0),n?(e.mmin=x,e.mmax=k):(e.mmin=void 0,e.mmax=void 0),e}writePoints(t,e){e.points=_e(this.points)}addPoint(t){return n0(this,t),Array.isArray(t)?this.points.push(t):this.points.push(t.toArray()),this.notifyChange("points"),this}clone(){const t={points:_e(this.points),spatialReference:this.spatialReference};return this.hasZ&&(t.hasZ=!0),this.hasM&&(t.hasM=!0),new $9(t)}getPoint(t){if(!this._validateInputs(t))return null;const e=this.points[t],i={x:e[0],y:e[1],spatialReference:this.spatialReference};let n=2;return this.hasZ&&(i.z=e[2],n=3),this.hasM&&(i.m=e[n]),new Ne(i)}removePoint(t){if(!this._validateInputs(t))return null;const e=new Ne(this.points.splice(t,1)[0],this.spatialReference);return this.notifyChange("points"),e}setPoint(t,e){return this._validateInputs(t)?(n0(this,e),Array.isArray(e)||(e=e.toArray()),this.points[t]=e,this.notifyChange("points"),this):this}toJSON(t){return this.write({},t)}_validateInputs(t){return t!=null&&t>=0&&t<this.points.length}};_([S({readOnly:!0})],sh.prototype,"cache",null),_([S()],sh.prototype,"extent",null),_([S({type:[[Number]],json:{write:{isRequired:!0}}})],sh.prototype,"points",void 0),_([yt("points")],sh.prototype,"writePoints",null),sh=$9=_([J("esri.geometry.Multipoint")],sh),sh.prototype.toJSON.isDefaultToJSON=!0;const P0=sh;function BEe(t){const e=[];for(t.reset();t.nextPath();){const i=[];for(;t.nextPoint();)i.push([t.x,t.y]);e.push(i)}return t.reset(),e}function bX(t){const e=[];for(;t.nextPoint();)e.push([t.x,t.y]);return t.seekPathStart(),e}var ia;(function(t){t[t.X=0]="X",t[t.Y=1]="Y",t[t.Z=2]="Z"})(ia||(ia={}));function T8(t){if(!t)return null;if(Array.isArray(t))return t;const e=t.hasZ,i=t.hasM;if(t.type==="point")return i&&e?[t.x,t.y,t.z,t.m]:e?[t.x,t.y,t.z]:i?[t.x,t.y,t.m]:[t.x,t.y];if(t.type==="polygon")return t.rings.slice();if(t.type==="polyline")return t.paths.slice();if(t.type==="multipoint")return t.points.slice();if(t.type==="extent"){const n=t.clone().normalize();if(!n)return null;let s=!1,h=!1;return n.forEach(f=>{f.hasZ&&(s=!0),f.hasM&&(h=!0)}),n.map(f=>{const m=[[f.xmin,f.ymin],[f.xmin,f.ymax],[f.xmax,f.ymax],[f.xmax,f.ymin],[f.xmin,f.ymin]];if(s&&f.hasZ){const y=.5*(f.zmax-f.zmin);for(let x=0;x<m.length;x++)m[x].push(y)}if(h&&f.hasM){const y=.5*(f.mmax-f.mmin);for(let x=0;x<m.length;x++)m[x].push(y)}return m})}return null}function _3(t,e){const i=e[0]-t[0],n=e[1]-t[1];if(t.length>2&&e.length>2){const s=t[2]-e[2];return Math.sqrt(i*i+n*n+s*s)}return Math.sqrt(i*i+n*n)}function hN(t,e,i){const n=t[0]+i*(e[0]-t[0]),s=t[1]+i*(e[1]-t[1]);return t.length>2&&e.length>2?[n,s,t[2]+i*(e[2]-t[2])]:[n,s]}function wX(t,e,i,n){return _X(t,e,i[n],i[n+1])}function _X(t,e,i,n){const[s,h]=e,[f,m]=i,[y,x]=n,E=y-f,k=x-m,I=E*E+k*k,P=(s-f)*E+(h-m)*k,L=Math.min(1,Math.max(0,P/I));return t[0]=f+E*L,t[1]=m+k*L,t}function HEe(t,e,i,n,s,h){let f=i,m=n,y=s-f,x=h-m;if(y!==0||x!==0){const E=((t-f)*y+(e-m)*x)/(y*y+x*x);E>1?(f=s,m=h):E>0&&(f+=y*E,m+=x*E)}return y=t-f,x=e-m,y*y+x*x}function uN(t,e){return hN(t,e,.5)}function VEe(t){const e=t.length;let i=0;for(let n=0;n<e-1;++n)i+=_3(t[n],t[n+1]);return i}function qEe(t,e){if(e<=0)return t[0];const i=t.length;let n=0;for(let s=0;s<i-1;++s){const h=_3(t[s],t[s+1]);if(e-n<h){const f=(e-n)/h;return hN(t[s],t[s+1],f)}n+=h}return t[i-1]}function x3(t,e=ia.X,i=ia.Y){let n=0;const s=t.length;let h=t[0];for(let f=1;f<s;f++){const m=t[f];n+=(m[e]-h[e])*(m[i]+h[i]),h=m}if(!dN(t)){const f=t[0];n+=(f[e]-h[e])*(f[i]+h[i])}return n>=0}function dN(t){const e=t.length;return e<3||fl(t[0],t[e-1])}function WEe(t){"rings"in t&&(xX(t),SX(t))}function xX(t){if(!("rings"in t))return!1;let e=!1;for(const i of t.rings)dN(i)||(i.push(i[0].slice()),e=!0);return e}function SX(t){if(!("rings"in t)||t.rings.length===0||x3(t.rings[0]))return!1;for(const e of t.rings)e.reverse();return!0}function pN(t){return t.type!=="polygon"&&t.type!=="polyline"||fN(t.type==="polygon"?t.rings:t.paths,t.spatialReference),t}function fN(t,e){const i=cr(e);if(!i)return;const n=i.valid[0],s=i.valid[1],h=s-n;for(const f of t){let m=1/0,y=-1/0;for(const E of f){const k=TX(E[0],n,s);m=Math.min(m,k),y=Math.max(y,k),E[0]=k}const x=y-m;h-x<x&&f.forEach(E=>{E[0]<0&&(E[0]+=h)})}}function TX(t,e,i){const n=i-e;return t<e?i-(e-t)%n:t>i?e+(t-e)%n:t}function EX(t,e){if(t===e)return!0;if(t.type!==e.type)return!1;if(t.type==="point"||t.type==="mesh"||t.type==="extent")return!0;if(t.type==="multipoint")return t.points.length===e.points.length;const[i,n]=t.type==="polyline"?[t.paths,e.paths]:[t.rings,e.rings];return i.length===n.length&&i.every((s,h)=>s.length===n[h].length)}function KEe(t){return t?t.hasZ?[t.xmax-t.xmin/2,t.ymax-t.ymin/2,t.zmax-t.zmin/2]:[t.xmax-t.xmin/2,t.ymax-t.ymin/2]:null}function MX(t){return t?$X(t.rings,t.hasZ??!1):null}function $X(t,e){if(!(t!=null&&t.length))return null;const i=[],n=[],s=e?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let h=0,f=t.length;h<f;h++){const m=gN(t[h],e,s);m&&n.push(m)}if(n.sort((h,f)=>{let m=h[2]-f[2];return m===0&&e&&(m=h[4]-f[4]),m}),n.length&&(i[0]=n[0][0],i[1]=n[0][1],e&&(i[2]=n[0][3]),(i[0]<s[0]||i[0]>s[1]||i[1]<s[2]||i[1]>s[3]||e&&(i[2]<s[4]||i[2]>s[5]))&&(i.length=0)),!i.length){const h=t[0]&&t[0].length?kX(t[0],e):null;if(!h)return null;i[0]=h[0],i[1]=h[1],e&&h.length>2&&(i[2]=h[2])}return i}function gN(t,e,i){let n=0,s=0,h=0,f=0,m=0;const y=t.length?t[0][0]:0,x=t.length?t[0][1]:0,E=t.length&&e?t[0][2]:0;for(let I=0;I<t.length;I++){const P=t[I],L=t[(I+1)%t.length],[D,j,H]=P,W=D-y,Z=j-x,[Y,te,ie]=L,le=Y-y,pe=te-x,ve=W*pe-le*Z;if(f+=ve,n+=(W+le)*ve,s+=(Z+pe)*ve,e&&P.length>2&&L.length>2){const be=H-E,Se=ie-E,Me=W*Se-le*be;h+=(be+Se)*Me,m+=Me}D<i[0]&&(i[0]=D),D>i[1]&&(i[1]=D),j<i[2]&&(i[2]=j),j>i[3]&&(i[3]=j),e&&(H<i[4]&&(i[4]=H),H>i[5]&&(i[5]=H))}if(f>0&&(f*=-1),m>0&&(m*=-1),!f)return null;f*=.5,m*=.5;const k=[n/(6*f)+y,s/(6*f)+x,f];return e&&(i[4]===i[5]||m===0?(k[3]=(i[4]+i[5])/2,k[4]=0):(k[3]=h/(6*m)+E,k[4]=m)),k}function ZEe(t,e){let i=0,n=0,s=0;t.nextPoint();const h=t.pathSize?t.x:0,f=t.pathSize?t.y:0;for(let m=0;m<t.pathSize;m++){t.seekInPath(m);const y=[t.x,t.y];t.seekInPath((m+1)%t.pathSize);const x=[t.x,t.y],[E,k]=y,I=E-h,P=k-f,[L,D]=x,j=L-h,H=D-f,W=I*H-j*P;s+=W,i+=(I+j)*W,n+=(P+H)*W,E<e[0]&&(e[0]=E),E>e[1]&&(e[1]=E),k<e[2]&&(e[2]=k),k>e[3]&&(e[3]=k)}return s>0&&(s*=-1),s?(s*=.5,[i/(6*s)+h,n/(6*s)+f,s]):null}function kX(t,e){const i=e?[0,0,0]:[0,0],n=e?[0,0,0]:[0,0];let s=0,h=0,f=0,m=0;for(let y=0,x=t.length;y<x-1;y++){const E=t[y],k=t[y+1];if(E&&k){i[0]=E[0],i[1]=E[1],n[0]=k[0],n[1]=k[1],e&&E.length>2&&k.length>2&&(i[2]=E[2],n[2]=k[2]);const I=_3(i,n);if(I){s+=I;const P=uN(E,k);h+=I*P[0],f+=I*P[1],e&&P.length>2&&(m+=I*P[2])}}}return s>0?e?[h/s,f/s,m/s]:[h/s,f/s]:t.length?t[0]:null}function CX(t){const{hasZ:e,totalSize:i}=t;if(i===0)return null;const n=[],s=[],h=e?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(t.reset();t.nextPath();){const f=gN(bX(t),t.hasZ,h);f&&s.push(f)}if(s.sort((f,m)=>{let y=f[2]-m[2];return y===0&&e&&(y=f[4]-m[4]),y}),s.length&&(n[0]=s[0][0],n[1]=s[0][1],e&&(n[2]=s[0][3]),(n[0]<h[0]||n[0]>h[1]||n[1]<h[2]||n[1]>h[3]||e&&(n[2]<h[4]||n[2]>h[5]))&&(n.length=0)),!n.length){t.reset(),t.nextPath();const f=t.pathSize?IX(t):null;if(!f)return null;n[0]=f[0],n[1]=f[1],e&&f.length>2&&(n[2]=f[2])}return n}function IX(t){const{hasZ:e}=t,i=e?[0,0,0]:[0,0],n=e?[0,0,0]:[0,0];let s=0,h=0,f=0,m=0;if(t.nextPoint()){let y=t.x,x=t.y,E=t.z;for(;t.nextPoint();){const k=t.x,I=t.y,P=t.z;i[0]=y,i[1]=x,n[0]=k,n[1]=I,e&&(i[2]=E,n[2]=P);const L=_3(i,n);if(L){s+=L;const D=uN(i,n);h+=L*D[0],f+=L*D[1],e&&D.length>2&&(m+=L*D[2])}y=k,x=I,E=P}}return s>0?e?[h/s,f/s,m/s]:[h/s,f/s]:t.pathSize?(t.seekPathStart(),t.nextPoint(),[t.x,t.y]):null}const AX=1e-6;function JEe(t){let e=0;for(t.reset();t.nextPath();)e+=t.getCurrentRingArea();if(e<AX){const s=CX(t);return s?[s[0],s[1]]:null}const i=[0,0];if(t.reset(),!t.nextPath()||!t.nextPoint())return null;const n=[t.x,t.y];for(t.reset();t.nextPath();)PX(i,n,t);return i[0]*=1/e,i[1]*=1/e,i[0]+=n[0],i[1]+=n[1],i}const OX=1/3;function PX(t,e,i){if(!t||!i||i.pathSize<3)return null;i.nextPoint();const n=i.x,s=i.y;i.nextPoint();let h,f=i.x-n,m=i.y-s,y=0,x=0;for(;i.nextPoint();)y=i.x-n,x=i.y-s,h=.5*OX*(y*m-x*f),t[0]+=h*(f+y),t[1]+=h*(m+x),f=y,m=x;const E=i.getCurrentRingArea(),k=[n,s];return k[0]-=e[0],k[1]-=e[1],k[0]*=E,k[1]*=E,t[0]+=k[0],t[1]+=k[1],t}const E8=new Float32Array(1);function YEe(t){--t;for(let e=1;e<32;e<<=1)t|=t>>e;return t+1}function hr(t,e,i){return Math.min(Math.max(t,e),i)}function XEe(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}function R1(t,e,i){return t+(e-t)*i}function QEe(t,e,i,n,s){return R1(n,s,(t-e)/(i-e))}function xc(t){return t*Math.PI/180}function mN(t){return 180*t/Math.PI}function eMe(t,e=1e-6){return(t<0?-1:1)/Math.max(Math.abs(t),e)}function HT(t){return Math.acos(hr(t,-1,1))}function VT(t){return Math.asin(hr(t,-1,1))}function Ts(t,e,i=1e-6){return t===e?!0:!Number.isFinite(t)||!Number.isFinite(e)?!1:(t>e?t-e:e-t)<=i}const V2=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function k9(t){return V2.setFloat64(0,t),V2.getBigInt64(0)}function RX(t){return V2.setBigInt64(0,t),V2.getFloat64(0)}const ub=BigInt("1000000"),NX=yN(1);function yN(t){const e=k9(t=Math.abs(t)),i=RX(e<=ub?ub:e-ub);return Math.abs(t-i)}function tMe(t,e,i=NX){if(t===e)return!0;if(!Number.isFinite(t)||!Number.isFinite(e))return!1;if(i!=null&&yN(Math.min(Math.abs(t),Math.abs(e)))<i)return Math.abs(t-e)<=i;const n=k9(t),s=k9(e);return n<0!=s<0?!1:!((n<s?s-n:n-s)>ub)}function LX(t,e,i=1e-6){if(t===e)return!0;if(!Number.isFinite(t)||!Number.isFinite(e))return!1;const n=Math.abs(t-e),s=Math.abs(t),h=Math.abs(e);if(t===0||e===0||s<1e-12&&h<1e-12){if(n>.01*i)return!1}else if(n/(s+h)>i)return!1;return!0}function DX(t){return vN(Math.max(-C9,Math.min(t,C9)))}function vN(t){return E8[0]=t,E8[0]}function iMe(t){const e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[3]*t[3]+t[4]*t[4]+t[5]*t[5],n=t[6]*t[6]+t[7]*t[7]+t[8]*t[8];return!(Ts(e,1)&&Ts(i,1)&&Ts(n,1))}function nMe(t,e){return(t%e+e)%e}const C9=vN(34028234663852886e22);function rMe(t,e,i){if(i===void 0||+i==0)return Math[t](e);if(e=+e,i=+i,isNaN(e)||typeof i!="number"||i%1!=0)return NaN;let n=e.toString().split("e");return n=(e=Math[t](+(n[0]+"e"+(n[1]?+n[1]-i:-i)))).toString().split("e"),+(n[0]+"e"+(n[1]?+n[1]+i:i))}function an(t=HX){return[t[0],t[1],t[2],t[3]]}function bN(t,e){return t!==e&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]),t}function sMe(t,e,i,n,s=an()){return s[0]=t,s[1]=e,s[2]=i,s[3]=n,s}function zX(t,e=an()){return e[0]=t.xmin,e[1]=t.ymin,e[2]=t.xmax,e[3]=t.ymax,e}function oMe(t,e){return new Nt({xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3],spatialReference:e})}function aMe(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function lMe(t,e,i){if(e!=null)if("length"in e)I9(e)?(i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i[2]=Math.max(t[2],e[2]),i[3]=Math.max(t[3],e[3])):e.length!==2&&e.length!==3||(i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i[2]=Math.max(t[2],e[0]),i[3]=Math.max(t[3],e[1]));else switch(e.type){case"extent":i[0]=Math.min(t[0],e.xmin),i[1]=Math.min(t[1],e.ymin),i[2]=Math.max(t[2],e.xmax),i[3]=Math.max(t[3],e.ymax);break;case"point":i[0]=Math.min(t[0],e.x),i[1]=Math.min(t[1],e.y),i[2]=Math.max(t[2],e.x),i[3]=Math.max(t[3],e.y)}else bN(i,t)}function FX(t,e,i=t){const n=e.length;let s=t[0],h=t[1],f=t[2],m=t[3];for(let y=0;y<n;y++){const x=e[y];s=Math.min(s,x[0]),h=Math.min(h,x[1]),f=Math.max(f,x[0]),m=Math.max(m,x[1])}return i[0]=s,i[1]=h,i[2]=f,i[3]=m,i}function cMe(t){for(let e=0;e<4;e++)if(!isFinite(t[e]))return!1;return!0}function qT(t){return t==null||t[0]>=t[2]?0:t[2]-t[0]}function WT(t){return t==null||t[1]>=t[3]?0:t[3]-t[1]}function hMe(t){return qT(t)*WT(t)}function uMe(t,e=[0,0]){return e[0]=(t[0]+t[2])/2,e[1]=(t[1]+t[3])/2,e}function jX(t,e){return wN(t,e[0],e[1])}function dMe(t,e){return wN(t,e.x,e.y)}function wN(t,e,i){return e>=t[0]&&i>=t[1]&&e<=t[2]&&i<=t[3]}function GX(t,e,i){return e[0]>=t[0]-i&&e[1]>=t[1]-i&&e[0]<=t[2]+i&&e[1]<=t[3]+i}function pMe(t,e){return Math.max(e[0],t[0])<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])<=Math.min(e[3],t[3])}function UX(t,e){return e[0]>=t[0]&&e[2]<=t[2]&&e[1]>=t[1]&&e[3]<=t[3]}function fMe(t,e,i,n=t){return n[0]=t[0]+e,n[1]=t[1]+i,n[2]=t[2]+e,n[3]=t[3]+i,n}function BX(t,e,i=t){return i[0]=t[0]-e,i[1]=t[1]-e,i[2]=t[2]+e,i[3]=t[3]+e,i}function gMe(t){return t?bN(t,q2):an(q2)}function I9(t){return t!=null&&t.length===4}function mMe(t,e){return I9(t)&&I9(e)?t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]:t===e}const q2=[1/0,1/0,-1/0,-1/0],HX=[0,0,0,0];function _N(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function xN(t){return t.points!==void 0}function SN(t){return t.x!==void 0&&t.y!==void 0}function TN(t){return t.paths!==void 0}function EN(t){return t.rings!==void 0}function MN(t){function e(i,n){return i==null?n:n==null?i:t(i,n)}return e}const Uh=MN(Math.min),Bh=MN(Math.max);function yMe(t,e){return TN(e)?r0(t,e.paths,!1,!1):EN(e)?r0(t,e.rings,!1,!1):xN(e)?KT(t,e.points,!1,!1,!1,!1):_N(e)?$N(t,e):(SN(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.x,t[3]=e.y),t)}function vMe(t){let e,i,n,s;for(t.reset(),e=n=1/0,i=s=-1/0;t.nextPath();){const h=VX(t);e=Math.min(h[0],e),n=Math.min(h[1],n),i=Math.max(h[2],i),s=Math.max(h[3],s)}return an([e,n,i,s])}function VX(t){let e,i,n,s;for(e=n=1/0,i=s=-1/0;t.nextPoint();)e=Math.min(t.x,e),n=Math.min(t.y,n),i=Math.max(t.x,i),s=Math.max(t.y,s);return an([e,n,i,s])}function bMe(t,e){return TN(e)?r0(t,e.paths,!0,!1):EN(e)?r0(t,e.rings,!0,!1):xN(e)?KT(t,e.points,!0,!1,!0,!1):_N(e)?$N(t,e,!0,!1,!0,!1):(SN(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.x,t[4]=e.y,t[5]=e.z),t)}function r0(t,e,i,n){const s=i?3:2;if(!e.length||!e[0].length)return null;let h,f,m,y,[x,E]=e[0][0],[k,I]=e[0][0];for(let P=0;P<e.length;P++){const L=e[P];for(let D=0;D<L.length;D++){const j=L[D],[H,W]=j;if(x=Uh(x,H),E=Uh(E,W),k=Bh(k,H),I=Bh(I,W),i&&j.length>2){const Z=j[2];h=Uh(h,Z),f=Bh(f,Z)}if(n&&j.length>s){const Z=j[s];m=Uh(h,Z),y=Bh(f,Z)}}}return i?n?(t[0]=x,t[1]=E,t[2]=h,t[3]=m,t[4]=k,t[5]=I,t[6]=f,t[7]=y,t.length=8,t):(t[0]=x,t[1]=E,t[2]=h,t[3]=k,t[4]=I,t[5]=f,t.length=6,t):n?(t[0]=x,t[1]=E,t[2]=m,t[3]=k,t[4]=I,t[5]=y,t.length=6,t):(t[0]=x,t[1]=E,t[2]=k,t[3]=I,t.length=4,t)}function $N(t,e,i,n,s,h){const f=e.xmin,m=e.xmax,y=e.ymin,x=e.ymax;let E=e.zmin,k=e.zmax,I=e.mmin,P=e.mmax;return s?(E=E||0,k=k||0,h?(I=I||0,P=P||0,t[0]=f,t[1]=y,t[2]=E,t[3]=I,t[4]=m,t[5]=x,t[6]=k,t[7]=P,t):(t[0]=f,t[1]=y,t[2]=E,t[3]=m,t[4]=x,t[5]=k,t)):h?(I=I||0,P=P||0,t[0]=f,t[1]=y,t[2]=I,t[3]=m,t[4]=x,t[5]=P,t):(t[0]=f,t[1]=y,t[2]=m,t[3]=x,t)}function KT(t,e,i,n,s,h){const f=i?3:2,m=n&&h,y=i&&s;if(!e.length||!e[0].length)return null;let x,E,k,I,[P,L]=e[0],[D,j]=e[0];for(let H=0;H<e.length;H++){const W=e[H],[Z,Y]=W;if(P=Uh(P,Z),L=Uh(L,Y),D=Bh(D,Z),j=Bh(j,Y),y&&W.length>2){const te=W[2];x=Uh(x,te),E=Bh(E,te)}if(m&&W.length>f){const te=W[f];k=Uh(x,te),I=Bh(E,te)}}return s?(x=x||0,E=E||0,h?(k=k||0,I=I||0,t[0]=P,t[1]=L,t[2]=x,t[3]=k,t[4]=D,t[5]=j,t[6]=E,t[7]=I,t):(t[0]=P,t[1]=L,t[2]=x,t[3]=D,t[4]=j,t[5]=E,t)):h?(k=k||0,I=I||0,t[0]=P,t[1]=L,t[2]=k,t[3]=D,t[4]=j,t[5]=I,t):(t[0]=P,t[1]=L,t[2]=D,t[3]=j,t)}function qX(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function WX(t){return t.points!==void 0}function KX(t){return t.x!==void 0&&t.y!==void 0}function ZX(t){return t.paths!==void 0}function JX(t){return t.rings!==void 0}const ZT=[];function kN(t,e,i,n){return{xmin:t,ymin:e,xmax:i,ymax:n}}function CN(t,e,i,n,s,h){return{xmin:t,ymin:e,zmin:i,xmax:n,ymax:s,zmax:h}}function IN(t,e,i,n,s,h){return{xmin:t,ymin:e,mmin:i,xmax:n,ymax:s,mmax:h}}function AN(t,e,i,n,s,h,f,m){return{xmin:t,ymin:e,zmin:i,mmin:n,xmax:s,ymax:h,zmax:f,mmax:m}}function JT(t,e=!1,i=!1){return e?i?AN(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]):CN(t[0],t[1],t[2],t[3],t[4],t[5]):i?IN(t[0],t[1],t[2],t[3],t[4],t[5]):kN(t[0],t[1],t[2],t[3])}function wMe(t){return t?qX(t)?t:KX(t)?XX(t):JX(t)?ON(t):ZX(t)?PN(t):WX(t)?YX(t):null:null}function YX(t){const{hasZ:e,hasM:i,points:n}=t;return JT(KT(ZT,n,e??!1,i??!1),e,i)}function XX(t){const{x:e,y:i,z:n,m:s}=t,h=s!=null;return n!=null?h?AN(e,i,n,s,e,i,n,s):CN(e,i,n,e,i,n):h?IN(e,i,s,e,i,s):kN(e,i,e,i)}function ON(t){const{hasZ:e,hasM:i,rings:n}=t,s=r0(ZT,n,e??!1,i??!1);return s?JT(s,e,i):null}function PN(t){const{hasZ:e,hasM:i,paths:n}=t,s=r0(ZT,n,e??!1,i??!1);return s?JT(s,e,i):null}var db;function M8(t){return!Array.isArray(t[0])}function QX(t){var e;return typeof((e=t[0])==null?void 0:e[0])=="number"}function eQ(t){var h,f;if(!t)return;let{rings:e,hasM:i,hasZ:n,spatialReference:s}=t;switch(e??(e=[]),QX(e)&&(e=[e]),(f=(h=e[0])==null?void 0:h[0])==null?void 0:f.length){case 4:n??(n=!0),i??(i=!0);break;case 3:n??(n=i!==!0),i??(i=!n);break;default:n??(n=!1),i??(i=!1)}return s??(s=Ke.WGS84),{...t,hasM:i,hasZ:n,rings:e,spatialReference:s}}let qa=db=class extends zc{static fromExtent(t){const e=t.clone().normalize(),{spatialReference:i}=t;let n=!1,s=!1;for(const f of e)f.hasZ&&(n=!0),f.hasM&&(s=!0);const h={rings:e.map(f=>{const m=[[f.xmin,f.ymin],[f.xmin,f.ymax],[f.xmax,f.ymax],[f.xmax,f.ymin],[f.xmin,f.ymin]];if(n&&f.hasZ){const y=f.zmin+.5*(f.zmax-f.zmin);for(let x=0;x<m.length;x++)m[x].push(y)}if(s&&f.hasM){const y=f.mmin+.5*(f.mmax-f.mmin);for(let x=0;x<m.length;x++)m[x].push(y)}return m}),spatialReference:i};return n&&(h.hasZ=!0),s&&(h.hasM=!0),new db(h)}constructor(t){super(eQ(t)),this.rings=[],this.type="polygon"}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const t=MX(this);if(!t||isNaN(t[0])||isNaN(t[1])||this.hasZ&&isNaN(t[2]))return null;const e=new Ne;return e.x=t[0],e.y=t[1],e.spatialReference=this.spatialReference,this.hasZ&&(e.z=t[2]),e}get extent(){const{spatialReference:t}=this,e=ON(this);if(!e)return null;const i=new Nt(e);return i.spatialReference=t,i}get isSelfIntersecting(){return gX(this.rings)}writeRings(t,e){e.rings=_e(this.rings)}addRing(t){if(!t)return;const e=this.rings,i=e.length;if(M8(t)){const n=[];for(let s=0,h=t.length;s<h;s++)n[s]=t[s].toArray();e[i]=n}else e[i]=t.slice();return this.notifyChange("rings"),this}clone(){const t=new db;return t.spatialReference=this.spatialReference,t.rings=_e(this.rings),t.hasZ=this.hasZ,t.hasM=this.hasM,t}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,i=t.spatialReference;if(e!=null!=(i!=null)||e!=null&&i!=null&&!e.equals(i)||this.rings.length!==t.rings.length)return!1;const n=([s,h,f,m],[y,x,E,k])=>s===y&&h===x&&(f==null&&E==null||f===E)&&(m==null&&k==null||m===k);for(let s=0;s<this.rings.length;s++){const h=this.rings[s],f=t.rings[s];if(!fl(h,f,n))return!1}return!0}contains(t){if(!t)return!1;const e=b3(t,this.spatialReference);return UT(this,e??t)}isClockwise(t){const e=M8(t)?t.map(i=>this.hasZ?this.hasM?[i.x,i.y,i.z,i.m]:[i.x,i.y,i.z]:[i.x,i.y]):t;return x3(e)}getPoint(t,e){if(!this._validateInputs(t,e))return null;const i=this.rings[t][e],n=this.hasZ,s=this.hasM;return n&&!s?new Ne(i[0],i[1],i[2],void 0,this.spatialReference):s&&!n?new Ne(i[0],i[1],void 0,i[2],this.spatialReference):n&&s?new Ne(i[0],i[1],i[2],i[3],this.spatialReference):new Ne(i[0],i[1],this.spatialReference)}insertPoint(t,e,i){return this._validateInputs(t,e,!0)?(n0(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t].splice(e,0,i),this.notifyChange("rings"),this):this}removePoint(t,e){if(!this._validateInputs(t,e))return null;const i=new Ne(this.rings[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("rings"),i}removeRing(t){if(!this._validateInputs(t,null))return null;const e=this.rings.splice(t,1)[0],i=this.spatialReference,n=e.map(s=>new Ne(s,i));return this.notifyChange("rings"),n}setPoint(t,e,i){return this._validateInputs(t,e)?(n0(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t][e]=i,this.notifyChange("rings"),this):this}_validateInputs(t,e,i=!1){if(t==null||t<0||t>=this.rings.length)return!1;if(e!=null){const n=this.rings[t];if(i&&(e<0||e>n.length)||!i&&(e<0||e>=n.length))return!1}return!0}toJSON(t){return this.write({},t)}};_([S({readOnly:!0})],qa.prototype,"cache",null),_([S({readOnly:!0})],qa.prototype,"centroid",null),_([S({readOnly:!0})],qa.prototype,"extent",null),_([S({readOnly:!0})],qa.prototype,"isSelfIntersecting",null),_([S({type:[[[Number]]],json:{write:{isRequired:!0}}})],qa.prototype,"rings",void 0),_([yt("rings")],qa.prototype,"writeRings",null),qa=db=_([J("esri.geometry.Polygon")],qa);const ln=qa;qa.prototype.toJSON.isDefaultToJSON=!0;var A9;function tQ(t){return!Array.isArray(t[0])}function iQ(t){var e;return typeof((e=t[0])==null?void 0:e[0])=="number"}function nQ(t){var h,f;if(!t)return;let{paths:e,hasM:i,hasZ:n,spatialReference:s}=t;switch(e??(e=[]),iQ(e)&&(e=[e]),(f=(h=e[0])==null?void 0:h[0])==null?void 0:f.length){case 4:n??(n=!0),i??(i=!0);break;case 3:n??(n=i!==!0),i??(i=!n);break;default:n??(n=!1),i??(i=!1)}return s??(s=Ke.WGS84),{...t,hasM:i,hasZ:n,paths:e,spatialReference:s}}let Ah=A9=class extends zc{constructor(t){super(nQ(t)),this.paths=[],this.type="polyline"}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:t}=this,e=PN(this);if(!e)return null;const i=new Nt(e);return i.spatialReference=t,i}writePaths(t,e){e.paths=_e(this.paths)}addPath(t){if(!t)return;const e=this.paths,i=e.length;if(tQ(t)){const n=[];for(let s=0,h=t.length;s<h;s++)n[s]=t[s].toArray();e[i]=n}else e[i]=t.slice();return this.notifyChange("paths"),this}clone(){const t=new A9;return t.spatialReference=this.spatialReference,t.paths=_e(this.paths),t.hasZ=this.hasZ,t.hasM=this.hasM,t}getPoint(t,e){if(!this._validateInputs(t,e))return null;const i=this.paths[t][e],n=this.hasZ,s=this.hasM;return n&&!s?new Ne(i[0],i[1],i[2],void 0,this.spatialReference):s&&!n?new Ne(i[0],i[1],void 0,i[2],this.spatialReference):n&&s?new Ne(i[0],i[1],i[2],i[3],this.spatialReference):new Ne(i[0],i[1],this.spatialReference)}insertPoint(t,e,i){return this._validateInputs(t,e,!0)?(n0(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t].splice(e,0,i),this.notifyChange("paths"),this):this}removePath(t){if(!this._validateInputs(t,null))return null;const e=this.paths.splice(t,1)[0],i=this.spatialReference,n=e.map(s=>new Ne(s,i));return this.notifyChange("paths"),n}removePoint(t,e){if(!this._validateInputs(t,e))return null;const i=new Ne(this.paths[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("paths"),i}setPoint(t,e,i){return this._validateInputs(t,e)?(n0(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t][e]=i,this.notifyChange("paths"),this):this}_validateInputs(t,e,i=!1){if(t==null||t<0||t>=this.paths.length)return!1;if(e!=null){const n=this.paths[t];if(i&&(e<0||e>n.length)||!i&&(e<0||e>=n.length))return!1}return!0}toJSON(t){return this.write({},t)}};_([S({readOnly:!0})],Ah.prototype,"cache",null),_([S({readOnly:!0})],Ah.prototype,"extent",null),_([S({type:[[[Number]]],json:{write:{isRequired:!0}}})],Ah.prototype,"paths",void 0),_([yt("paths")],Ah.prototype,"writePaths",null),Ah=A9=_([J("esri.geometry.Polyline")],Ah);const Tr=Ah;Ah.prototype.toJSON.isDefaultToJSON=!0;const rQ=Ar()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),_Me=Ar()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"});function RN(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function NN(t){return t.points!==void 0}function LN(t){return t.x!==void 0&&t.y!==void 0}function DN(t){return t.paths!==void 0}function YT(t){return t.rings!==void 0}function Yd(t){return t==null?null:t instanceof zc?t:LN(t)?Ne.fromJSON(t):DN(t)?Tr.fromJSON(t):YT(t)?ln.fromJSON(t):NN(t)?P0.fromJSON(t):RN(t)?Nt.fromJSON(t):null}function ry(t){return t?LN(t)?"esriGeometryPoint":DN(t)?"esriGeometryPolyline":YT(t)?"esriGeometryPolygon":RN(t)?"esriGeometryEnvelope":NN(t)?"esriGeometryMultipoint":null:null}const sQ={esriGeometryPoint:Ne,esriGeometryPolyline:Tr,esriGeometryPolygon:ln,esriGeometryEnvelope:Nt,esriGeometryMultipoint:P0,esriGeometryMultiPatch:ln};function oQ(t){return t&&sQ[t]||null}const S3={base:zc,key:"type",typeMap:{extent:Nt,multipoint:P0,point:Ne,polyline:Tr,polygon:ln}};Ac(S3);const ts=t=>{let e=class extends t{clone(){var y;const i=Cc(this);kP(i,"unable to clone instance of non-accessor class");const n=i.metadata,s=i.store,h={},f=new Map;for(const x in n){const E=n[x],k=s==null?void 0:s.originOf(x),I=E.clonable;if(E.readOnly||I===!1||k!==St.USER&&k!==St.DEFAULTS&&k!==St.WEB_MAP&&k!==St.WEB_SCENE)continue;const P=this[x];let L=null;L=typeof I=="function"?I(P):I==="reference"?P:Vx(P),P!=null&&L==null||(k===St.DEFAULTS?f.set(x,L):h[x]=L)}const m=new(Object.getPrototypeOf(this)).constructor(h);if(f.size){const x=(y=Cc(m))==null?void 0:y.store;if(x)for(const[E,k]of f)x.set(E,k,St.DEFAULTS)}return m}};return e=_([J("esri.core.Clonable")],e),e};let O9=class extends ts(Oe){};O9=_([J("esri.core.Clonable")],O9);let Du=class extends O9{constructor(e){super(e),this.row=0,this.column=0,this.rows=1,this.columns=1}equals(e){return e!=null&&this.row===e.row&&this.rows===e.rows&&this.column===e.column&&this.columns===e.columns}};_([S({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Du.prototype,"row",void 0),_([S({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Du.prototype,"column",void 0),_([S({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Du.prototype,"rows",void 0),_([S({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Du.prototype,"columns",void 0),Du=_([J("esri.CameraLayout")],Du);const zN=Du;let T3=class{constructor(e,i){this.min=e,this.max=i,this.range=i-e}normalize(e,i=0,n=!1){return $8(this.range,this.min,this.max,e,i,n)}clamp(e,i=0){return hr(e-i,this.min,this.max)+i}monotonic(e,i,n){return e<i?i:i+P9(this.range,e-i,n)}minimalMonotonic(e,i,n){return $8(this.range,e,e+this.range,i,n)}center(e,i,n){return i=this.monotonic(e,i,n),this.normalize((e+i)/2,n)}diff(e,i,n){return this.monotonic(e,i,n)-e}shortestSignedDiff(e,i){e=this.normalize(e);const n=(i=this.normalize(i))-e,s=i<e?this.minimalMonotonic(e,i)-e:i-this.minimalMonotonic(i,e);return Math.abs(n)<Math.abs(s)?n:s}contains(e,i,n){return i=this.minimalMonotonic(e,i),(n=this.minimalMonotonic(e,n))>e&&n<i}};function $8(t,e,i,n,s=0,h=!1){return(n-=s)<e?n+=P9(t,e-n):n>i&&(n-=P9(t,n-i)),h&&n===i&&(n=e),n+s}function P9(t,e,i=0){return Math.ceil((e-i)/t)*t+i}const EMe=new T3(0,2*Math.PI),MMe=new T3(-Math.PI,Math.PI),FN=new T3(0,360);let Aa=class extends ts(De){constructor(...e){super(...e),this.position=new Ne([0,0,0]),this.heading=0,this.tilt=0,this.fov=55,this.layout=new zN}normalizeCtorArgs(e,i,n,s){if(e&&typeof e=="object"&&("x"in e||Array.isArray(e))){const h={position:e};return i!=null&&(h.heading=i),n!=null&&(h.tilt=n),s!=null&&(h.fov=s),h}return e}writePosition(e,i,n,s){const h=e.clone();h.x=Ss(e.x||0),h.y=Ss(e.y||0),h.z=e.hasZ?Ss(e.z||0):e.z,i[n]=h.write({},s)}readPosition(e,i){const n=new Ne;return n.read(e,i),n.x=Ss(n.x||0),n.y=Ss(n.y||0),n.z=n.hasZ?Ss(n.z||0):n.z,n}equals(e){return e!=null&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)&&this.layout.equals(e.layout)}};_([S({type:Ne,json:{write:{isRequired:!0}}})],Aa.prototype,"position",void 0),_([yt("position")],Aa.prototype,"writePosition",null),_([kt("position")],Aa.prototype,"readPosition",null),_([S({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Hi(t=>FN.normalize(Ss(t)))],Aa.prototype,"heading",void 0),_([S({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Hi(t=>hr(Ss(t),-180,180))],Aa.prototype,"tilt",void 0),_([S({type:Number,nonNullable:!0,json:{default:55,write:!0}}),Hi(t=>hr(Ss(t,55),1,170))],Aa.prototype,"fov",void 0),_([S({type:zN,nonNullable:!0,json:{read:!1,write:!1}})],Aa.prototype,"layout",void 0),Aa=_([J("esri.Camera")],Aa);const aQ=Aa;var R9;let oh=R9=class extends De{constructor(t){super(t),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(t){return(t%=360)<0&&(t+=360),t}clone(){return new R9({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry!=null?this.targetGeometry.clone():null,camera:this.camera!=null?this.camera.clone():null})}};_([S({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:a5}}}}})],oh.prototype,"rotation",void 0),_([Hi("rotation")],oh.prototype,"castRotation",null),_([S({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:a5}}}}})],oh.prototype,"scale",void 0),_([S({types:S3,json:{read:Yd,write:!0,origins:{"web-scene":{read:Yd,write:{overridePolicy:a5}}}}})],oh.prototype,"targetGeometry",void 0),_([S({type:aQ,json:{write:!0}})],oh.prototype,"camera",void 0),oh=R9=_([J("esri.Viewpoint")],oh);const na=oh;function a5(){return{enabled:!this.camera}}let N9=class jN{constructor(){this._emitter=new jN.EventEmitter(this)}emit(e,i){return this._emitter.emit(e,i)}on(e,i){return this._emitter.on(e,i)}once(e,i){return this._emitter.once(e,i)}hasEventListener(e){return this._emitter.hasEventListener(e)}};(function(t){class e{constructor(s=null){this._target=s,this._listenersMap=null}clear(){var s;(s=this._listenersMap)==null||s.clear(),this._listenersMap=null}destroy(){this.clear()}emit(s,h){var x;let f=(x=this._listenersMap)==null?void 0:x.get(s);if(!f)return!1;const m=this._target||this;let y=!1;for(const E of f.slice()){const k="deref"in E?E.deref():E;k?k==null||k.call(m,h):y=!0}return y&&(f=f.filter(E=>!("deref"in E)||E.deref()!=null),this._listenersMap.set(s,f)),f.length>0}on(s,h){if(Array.isArray(s)){const m=s.map(y=>this.on(y,h));return Dc(m)}if(s.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap??(this._listenersMap=new Map);const f=this._listenersMap.get(s)||[];return f.push(h),this._listenersMap.set(s,f),ct(()=>{var x;const m=(x=this._listenersMap)==null?void 0:x.get(s),y=(m==null?void 0:m.indexOf(h))??-1;y>=0&&m.splice(y,1)})}once(s,h){const f=this.on(s,m=>{f.remove();const y="deref"in h?h.deref():h;y==null||y.call(null,m)});return f}hasEventListener(s){var f;const h=(f=this._listenersMap)==null?void 0:f.get(s);return h!=null&&h.length>0}}t.EventEmitter=e,t.EventedMixin=n=>{let s=class extends n{constructor(){super(...arguments),this._emitter=new e}destroy(){this._emitter.clear()}emit(h,f){return this._emitter.emit(h,f)}on(h,f){return this._emitter.on(h,f)}once(h,f){return this._emitter.once(h,f)}hasEventListener(h){return this._emitter.hasEventListener(h)}};return s=_([J("esri.core.Evented")],s),s};let i=class extends Oe{constructor(){super(...arguments),this._emitter=new N9.EventEmitter(this)}destroy(){this._emitter.clear()}emit(n,s){return this._emitter.emit(n,s)}on(n,s){return this._emitter.on(n,s)}once(n,s){return this._emitter.once(n,s)}hasEventListener(n){return this._emitter.hasEventListener(n)}};i=_([J("esri.core.Evented.EventedAccessor")],i),t.EventedAccessor=i})(N9);const un=N9;var At;(function(t){t[t.ADD=1]="ADD",t[t.REMOVE=2]="REMOVE",t[t.MOVE=4]="MOVE"})(At||(At={}));function GN(t){return(e,i)=>{e[i]=t}}let R0=class extends LP{notify(){const e=this._observers;if(e&&e.length>0){const i=e.slice();for(const n of i)n.onInvalidated(),n.onCommitted()}}};var yc;let lQ=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(e){this.defaultPrevented=!1,this.item=e}},cQ=class{constructor(e,i,n,s,h){this.target=e,this.added=i,this.removed=n,this.start=s,this.deleteCount=h}};const js=new cp(lQ,void 0,t=>{t.item=null,t.target=null,t.defaultPrevented=!1,t.cancellable=!1});function k8(t){t&&typeof t=="object"&&"destroy"in t&&typeof t.destroy=="function"&&t.destroy()}function l5(t){return t?t instanceof pc?t.toArray():t.length?Array.prototype.slice.apply(t):[]:[]}function c5(t){if(t!=null&&t.length)return t[0]}function hQ(t,e,i,n){const s=Math.min(t.length-i,e.length-n);let h=0;for(;h<s&&t[i+h]===e[n+h];)h++;return h}function UN(t,e,i,n){e&&e.forEach((s,h,f)=>{t.push(s),UN(t,i.call(n,s,h,f),i,n)})}const Kc=new Set,Zc=new Set,Jc=new Set,h5=new Map;let uQ=0,pc=yc=class extends un.EventedAccessor{static isCollection(t){return t!=null&&t instanceof yc}constructor(t){super(t),this._chgListeners=[],this._notifications=null,this._updating=!1,this._timer=null,this._observable=new R0,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:uQ++})}normalizeCtorArgs(t){return t?Array.isArray(t)||t instanceof yc?{items:t}:t:{}}destroy(){this._removeAllRaw(),this._timer&&this._timer.remove(),this._emitter.destroy(),this._notifications=null}*[Symbol.iterator](){yield*this.items}get items(){return Ge(this._observable),this._items}set items(t){this._emitBeforeChanges(At.ADD)||(this._splice(0,this.length,l5(t)),this._emitAfterChanges(At.ADD))}hasEventListener(t){return!this.destroyed&&(t==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(t))}on(t,e){if(this.destroyed)return ct();if(t==="change"){const i=this._chgListeners,n={removed:!1,callback:e};return i.push(n),this._notifications&&this._notifications.push({listeners:i.slice(),items:this._items.slice(),changes:[]}),ct(()=>{n.removed=!0,i.splice(i.indexOf(n),1)})}return this._emitter.on(t,e)}once(t,e){const i="deref"in e?()=>e.deref():()=>e,n=this.on(t,s=>{var h;(h=i())==null||h.call(null,s),n.remove()});return n}add(t,e){if(Ge(this._observable),this._emitBeforeChanges(At.ADD))return this;const i=this.getNextIndex(e??null);return this._splice(i,0,[t]),this._emitAfterChanges(At.ADD),this}addMany(t,e=this._items.length){if(Ge(this._observable),!(t!=null&&t.length))return this;if(this._emitBeforeChanges(At.ADD))return this;const i=this.getNextIndex(e);return this._splice(i,0,l5(t)),this._emitAfterChanges(At.ADD),this}at(t){if(Ge(this._observable),(t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this._items[t]}removeAll(){if(Ge(this._observable),!this.length||this._emitBeforeChanges(At.REMOVE))return[];const t=this._removeAllRaw();return this._emitAfterChanges(At.REMOVE),t}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return Ge(this._observable),this._createNewInstance({items:this._items.map(_e)})}concat(...t){Ge(this._observable);const e=t.map(l5);return this._createNewInstance({items:this._items.concat(...e)})}drain(t,e){if(Ge(this._observable),!this.length||this._emitBeforeChanges(At.REMOVE))return;const i=this._splice(0,this.length),n=i.length;for(let s=0;s<n;s++)t.call(e,i[s],s,i);this._emitAfterChanges(At.REMOVE)}destroyAll(){this.drain(k8)}destroyMany(t){const e=this.removeMany(t);return e.forEach(k8),e}every(t,e){return Ge(this._observable),this._items.every(t,e)}filter(t,e){let i;return Ge(this._observable),i=arguments.length===2?this._items.filter(t,e):this._items.filter(t),this._createNewInstance({items:i})}find(t,e){return Ge(this._observable),this._items.find(t,e)}findIndex(t,e){return Ge(this._observable),this._items.findIndex(t,e)}flatten(t,e){Ge(this._observable);const i=[];return UN(i,this,t,e),new yc(i)}forEach(t,e){return Ge(this._observable),this._items.forEach(t,e)}getItemAt(t){return Ge(this._observable),this._items[t]}getNextIndex(t){Ge(this._observable);const e=this.length;return(t=t??e)<0?t=0:t>e&&(t=e),t}includes(t,e=0){return Ge(this._observable),this._items.includes(t,e)}indexOf(t,e=0){return Ge(this._observable),this._items.indexOf(t,e)}join(t=","){return Ge(this._observable),this._items.join(t)}lastIndexOf(t,e=this.length-1){return Ge(this._observable),this._items.lastIndexOf(t,e)}map(t,e){Ge(this._observable);const i=this._items.map(t,e);return new yc({items:i})}reorder(t,e=this.length-1){Ge(this._observable);const i=this.indexOf(t);if(i!==-1){if(e<0?e=0:e>=this.length&&(e=this.length-1),i!==e){if(this._emitBeforeChanges(At.MOVE))return t;this._splice(i,1),this._splice(e,0,[t]),this._emitAfterChanges(At.MOVE)}return t}}pop(){if(Ge(this._observable),!this.length||this._emitBeforeChanges(At.REMOVE))return;const t=c5(this._splice(this.length-1,1));return this._emitAfterChanges(At.REMOVE),t}push(...t){return Ge(this._observable),this._emitBeforeChanges(At.ADD)||(this._splice(this.length,0,t),this._emitAfterChanges(At.ADD)),this.length}reduce(t,e){Ge(this._observable);const i=this._items;return arguments.length===2?i.reduce(t,e):i.reduce(t)}reduceRight(t,e){Ge(this._observable);const i=this._items;return arguments.length===2?i.reduceRight(t,e):i.reduceRight(t)}remove(t){return Ge(this._observable),this.removeAt(this.indexOf(t))}removeAt(t){if(Ge(this._observable),t<0||t>=this.length||this._emitBeforeChanges(At.REMOVE))return;const e=c5(this._splice(t,1));return this._emitAfterChanges(At.REMOVE),e}removeMany(t){if(Ge(this._observable),!(t!=null&&t.length)||this._emitBeforeChanges(At.REMOVE))return[];const e=t instanceof yc?t.toArray():t,i=this._items,n=[],s=e.length;for(let h=0;h<s;h++){const f=e[h],m=i.indexOf(f);if(m>-1){const y=1+hQ(e,i,h+1,m+1),x=this._splice(m,y);x&&x.length>0&&n.push.apply(n,x),h+=y-1}}return this._emitAfterChanges(At.REMOVE),n}reverse(){if(Ge(this._observable),this._emitBeforeChanges(At.MOVE))return this;const t=this._splice(0,this.length);return t&&(t.reverse(),this._splice(0,0,t)),this._emitAfterChanges(At.MOVE),this}shift(){if(Ge(this._observable),!this.length||this._emitBeforeChanges(At.REMOVE))return;const t=c5(this._splice(0,1));return this._emitAfterChanges(At.REMOVE),t}slice(t=0,e=this.length){return Ge(this._observable),this._createNewInstance({items:this._items.slice(t,e)})}some(t,e){return Ge(this._observable),this._items.some(t,e)}sort(t){if(Ge(this._observable),!this.length||this._emitBeforeChanges(At.MOVE))return this;const e=this._splice(0,this.length);return arguments.length?e.sort(t):e.sort(),this._splice(0,0,e),this._emitAfterChanges(At.MOVE),this}splice(t,e,...i){Ge(this._observable);const n=(e?At.REMOVE:0)|(i.length?At.ADD:0);if(this._emitBeforeChanges(n))return[];const s=this._splice(t,e,i)||[];return this._emitAfterChanges(n),s}toArray(){return Ge(this._observable),this._items.slice()}toJSON(){return Ge(this._observable),this.toArray()}toLocaleString(){return Ge(this._observable),this._items.toLocaleString()}toString(){return Ge(this._observable),this._items.toString()}unshift(...t){return Ge(this._observable),!t.length||this._emitBeforeChanges(At.ADD)||(this._splice(0,0,t),this._emitAfterChanges(At.ADD)),this.length}_createNewInstance(t){return new this.constructor(t)}_splice(t,e,i){const n=this._items,s=this.itemType;let h,f;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._updating=!0,this._timer=ey(()=>this._dispatchChange())),t<0&&(t+=this.length),e){if(f=n.splice(t,e),this.hasEventListener("before-remove")){const m=js.acquire();m.target=this,m.cancellable=!0;for(let y=0,x=f.length;y<x;y++)h=f[y],m.reset(h),this.emit("before-remove",m),m.defaultPrevented&&(f.splice(y,1),n.splice(t,0,h),t+=1,y-=1,x-=1);js.release(m)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const m=js.acquire();m.target=this,m.cancellable=!1;const y=f.length;for(let x=0;x<y;x++)m.reset(f[x]),this.emit("after-remove",m);js.release(m)}}if(i!=null&&i.length){if(s){const E=[];for(const k of i){const I=s.ensureType(k);I==null&&k!=null||E.push(I)}i=E}const m=this.hasEventListener("before-add"),y=this.hasEventListener("after-add"),x=t===this.length;if(m||y){const E=js.acquire();E.target=this,E.cancellable=!0;const k=js.acquire();k.target=this,k.cancellable=!1;for(const I of i)m?(E.reset(I),this.emit("before-add",E),E.defaultPrevented||(x?n.push(I):n.splice(t++,0,I),this._set("length",n.length),y&&(k.reset(I),this.emit("after-add",k)))):(x?n.push(I):n.splice(t++,0,I),this._set("length",n.length),k.reset(I),this.emit("after-add",k));js.release(k),js.release(E)}else{if(x)for(const E of i)n.push(E);else n.splice(t,0,...i);this._set("length",n.length)}}if((i!=null&&i.length||f!=null&&f.length)&&this._notifyChangeEvent(i,f),this.hasEventListener("after-splice")){const m=new cQ(this,i,f,t,e);this.emit("after-splice",m)}return f}_emitBeforeChanges(t){let e=!1;if(this.hasEventListener("before-changes")){const i=js.acquire();i.target=this,i.cancellable=!0,i.type=t,this.emit("before-changes",i),e=i.defaultPrevented,js.release(i)}return e}_emitAfterChanges(t){if(this.hasEventListener("after-changes")){const e=js.acquire();e.target=this,e.cancellable=!1,e.type=t,this.emit("after-changes",e),js.release(e)}this._observable.notify()}_notifyChangeEvent(t,e){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:t,removed:e})}get updating(){return this._updating}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),this._updating=!1,!this._notifications)return;const t=this._notifications;this._notifications=null;for(const e of t){const i=e.changes;Kc.clear(),Zc.clear(),Jc.clear();for(const{added:y,removed:x}of i){if(y)if(Jc.size===0&&Zc.size===0)for(const E of y)Kc.add(E);else for(const E of y)Zc.has(E)?(Jc.add(E),Zc.delete(E)):Jc.has(E)||Kc.add(E);if(x)if(Jc.size===0&&Kc.size===0)for(const E of x)Zc.add(E);else for(const E of x)Kc.has(E)?Kc.delete(E):(Jc.delete(E),Zc.add(E))}const n=_r.acquire();Kc.forEach(y=>{n.push(y)});const s=_r.acquire();Zc.forEach(y=>{s.push(y)});const h=this._items,f=e.items,m=_r.acquire();if(Jc.forEach(y=>{f.indexOf(y)!==h.indexOf(y)&&m.push(y)}),e.listeners&&(n.length||s.length||m.length)){const y={target:this,added:n,removed:s,moved:m},x=e.listeners.length;for(let E=0;E<x;E++){const k=e.listeners[E];k.removed||k.callback.call(this,y)}}_r.release(n),_r.release(s),_r.release(m)}Kc.clear(),Zc.clear(),Jc.clear()}};pc.ofType=t=>{if(!t)return yc;if(h5.has(t))return h5.get(t);let e=null;if(typeof t=="function")e=t.prototype.declaredClass;else if(t.base)e=t.base.prototype.declaredClass;else for(const n in t.typeMap){const s=t.typeMap[n].prototype.declaredClass;e?e+=` | ${s}`:e=s}let i=class extends yc{};return _([GN({Type:t,ensureType:typeof t=="function"?_n(t):Ac(t)})],i.prototype,"itemType",void 0),i=_([J(`esri.core.Collection<${e}>`)],i),h5.set(t,i),i},_([S()],pc.prototype,"_updating",void 0),_([S()],pc.prototype,"length",void 0),_([S()],pc.prototype,"items",null),_([S({readOnly:!0})],pc.prototype,"updating",null),pc=yc=_([J("esri.core.Collection")],pc);const Pe=pc;function AMe(t,e,i){return $d(t.map((n,s)=>e.apply(i,[n,s])))}async function dQ(t,e,i){return(await $d(t.map((n,s)=>e.apply(i,[n,s])))).map(n=>n.value)}function XT(t){return{ok:!0,value:t}}function QT(t){return{ok:!1,error:t}}function pQ(t){return t!=null&&t.ok===!0?t.value:null}function fQ(t){return t!=null&&t.ok===!1?t.error:null}async function BN(t){if(t==null)return{ok:!1,error:new Error("no promise provided")};try{return XT(await t)}catch(e){return QT(e)}}async function OMe(t){try{return XT(await t)}catch(e){return KP(e),QT(e)}}function up(t,e){return new ah(t,e)}let ah=class extends Oe{get value(){return pQ(this._result)}get error(){return fQ(this._result)}get finished(){return this._result!=null}constructor(e,i){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=Ms(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:n}=this._abortController;this.promise=e(n),this.promise.then(s=>{this._result=XT(s),this._cleanup()},s=>{this._result=QT(s),this._cleanup()}),this._abortHandle=$s(i,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=Rt(this._abortHandle),this._abortController=null}};_([S()],ah.prototype,"value",null),_([S()],ah.prototype,"error",null),_([S()],ah.prototype,"finished",null),_([S()],ah.prototype,"promise",void 0),_([S()],ah.prototype,"_result",void 0),ah=_([J("esri.core.asyncUtils.ReactiveTask")],ah);function Ee(t,e,i={}){return eE(t,e,i,mQ)}function ur(t,e,i={}){return eE(t,e,i,HN)}function eE(t,e,i={},n){let s=null;const h=i.once?(f,m)=>{n(f)&&(Rt(s),e(f,m))}:(f,m)=>{n(f)&&e(f,m)};if(s=kZ(t,h,i.sync,i.equals),i.initial){const f=t();h(f,f)}return s}function Ns(t,e,i,n={}){let s=null,h=null,f=null;function m(){var E;s&&h&&(h.remove(),(E=n.onListenerRemove)==null||E.call(n,s),s=null,h=null)}function y(E){n.once&&n.once&&Rt(f),i(E)}const x=Ee(t,(E,k)=>{var I;m(),h3(E)&&(s=E,h=Ym(E,e,y),(I=n.onListenerAdd)==null||I.call(n,E))},{sync:n.sync,initial:!0});return f=ct(()=>{x.remove(),m()}),f}function su(t,e){return gQ(t,HN,e)}function gQ(t,e,i){if(Ps(i))return Promise.reject(ei());const n=t();if(e!=null&&e(n))return Promise.resolve(n);let s=null;function h(){s=Rt(s)}return new Promise((f,m)=>{s=Dc([$s(i,()=>{h(),m(ei())}),eE(t,y=>{h(),f(y)},{sync:!1,once:!0},e)])})}function mQ(t){return!0}function HN(t){return!!t}function yQ(t,e,i={}){let n=!1;const s=Ee(t,(h,f)=>{n||e(h,f)},i);return{remove(){s.remove()},pause(){n=!0},resume(){n=!1}}}function vQ(t,e){const i=new Pe,n=Ns(t,"after-splice",({added:s,start:h,deleteCount:f})=>{const m=i.splice(h,f);for(const y of m)y.remove();if(s!=null&&s.length){const y=s.map(e);i.addMany(y,h)}},{sync:!0,onListenerRemove:()=>i.drain(s=>s.remove()),onListenerAdd:s=>i.addMany(s.items.map(e))});return i.addHandles(n),i}function RMe(t,e){const i=new Pe,n=vQ(t,m=>up(async y=>{const x=await e(m,y);if(Ps(y))throw x.remove(),ei();return x})),s=()=>null,h=async m=>{const y=await m.promise,x=n.indexOf(m);x<0||i.splice(x,1,y)};i.addMany(n.items.map(s));for(const m of n)Yr(h(m));const f=n.on("after-splice",({added:m,start:y,deleteCount:x})=>{const E=i.splice(y,x);for(const k of E)k==null||k.remove();if(m!=null&&m.length){i.addMany(m.map(s),y);for(const k of m)Yr(h(k))}});return i.addHandles([EK(n),f]),i}const Pc={sync:!0},Ct={initial:!0},Pi={sync:!0,initial:!0};let Bp=class extends Pe{constructor(e){super(e),this.getCollections=null}initialize(){this.addHandles(yZ(()=>this._refresh(),Pc))}destroy(){this.getCollections=null}_refresh(){const e=this.getCollections!=null?this.getCollections():null;if(e==null)return void this.removeAll();let i=0;for(const n of e)n!=null&&(i=this._processCollection(i,n));this.splice(i,this.length)}_createNewInstance(e){return new Pe(e)}_processCollection(e,i){if(!i)return e;const n=this.itemFilterFunction??(s=>!!s);for(const s of i)if(s){if(n(s)){const h=this.indexOf(s,e);h>=0?h!==e&&this.reorder(s,e):this.add(s,e),++e}if(this.getChildrenFunction){const h=this.getChildrenFunction(s);if(Array.isArray(h))for(const f of h)e=this._processCollection(e,f);else e=this._processCollection(e,h)}}return e}};_([S()],Bp.prototype,"getCollections",void 0),_([S()],Bp.prototype,"getChildrenFunction",void 0),_([S()],Bp.prototype,"itemFilterFunction",void 0),Bp=_([J("esri.core.CollectionFlattener")],Bp);const pm=Bp;let W2=class{constructor(e=i=>i.values().next().value){this._peeker=e,this._observable=new R0,this._items=new Set}get length(){return Ge(this._observable),this._items.size}clear(){this.length!==0&&(this._items.clear(),this._observable.notify())}last(){if(this.length===0)return;let e;for(e of this._items);return e}peek(){if(this.length!==0)return this._peeker(this._items)}push(e){this.contains(e)||(this._items.add(e),this._observable.notify())}contains(e){return Ge(this._observable),this._items.has(e)}pop(){if(this.length===0)return;const e=this.peek();return this._items.delete(e),this._observable.notify(),e}popLast(){if(this.length===0)return;const e=this.last();return this._items.delete(e),this._observable.notify(),e}remove(e){this.contains(e)&&(this._items.delete(e),this._observable.notify())}filter(e){const i=this.length;return this._items.forEach(n=>{e(n)||this._items.delete(n)}),i!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){Ge(this._observable),yield*this._items}};const VN=new FinalizationRegistry(t=>{t.close()});function bQ(t,e){VN.register(t,e,e)}function wQ(t){VN.unregister(t)}function qN(t,e){return new Proxy({},{get:(i,n,s)=>(...h)=>{let f,m;const y=h[h.length-1];return _Q(y)&&(f=y.signal,m=y.transferList,h.pop()),t.apply(e?`${e}.${n.toString()}`:n.toString(),h,{transferList:m,signal:f})}})}function _Q(t){return typeof t=="object"&&!Array.isArray(t)&&t!=null&&("signal"in t||"transferList"in t||Object.keys(t).length===0)}const xQ={statsWorker:()=>ge(()=>import("./statsWorker-B048WY8L.js"),__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url),geometryEngineWorker:()=>ge(()=>import("./geometryEngineWorker-g3Nx_xVR.js"),__vite__mapDeps([7,8,9]),import.meta.url),CSVSourceWorker:()=>ge(()=>import("./CSVSourceWorker-BW48it56.js"),__vite__mapDeps([10,11,9,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,2,1,3,4,5,6,29,30,31,32,33,34]),import.meta.url),EdgeProcessingWorker:()=>ge(()=>import("./EdgeProcessingWorker-DhFciWt7.js"),__vite__mapDeps([35,36,37,38,39,40,41,42,43,44,45,46,47]),import.meta.url),ElevationSamplerWorker:()=>ge(()=>import("./ElevationSamplerWorker-B7LUwwpw.js"),__vite__mapDeps([48,18,49,50,51,52,38,53]),import.meta.url),FeatureServiceSnappingSourceWorker:()=>ge(()=>import("./FeatureServiceSnappingSourceWorker-CsuUtQvy.js"),__vite__mapDeps([54,14,15,12,13,16,17,18,19,20,9,21,22,23,24,25,26,27,28,2,1,3,4,5,6,29,30,55,56,57,58,59,60]),import.meta.url),GeoJSONSourceWorker:()=>ge(()=>import("./GeoJSONSourceWorker-BV_imW_x.js"),__vite__mapDeps([61,15,12,13,16,14,17,18,19,20,9,21,22,23,24,25,26,27,28,2,1,3,4,5,6,29,30,62,11,32,33,34,63]),import.meta.url),LercWorker:()=>ge(()=>import("./LercWorker-KvBbTLJn.js"),[],import.meta.url),MemorySourceWorker:()=>ge(()=>import("./MemorySourceWorker-W6N9p-O8.js"),__vite__mapDeps([64,15,12,13,16,65,14,17,18,19,20,9,21,22,23,24,25,26,27,28,2,1,3,4,5,6,29,30,32,33,34,63,11]),import.meta.url),PBFDecoderWorker:()=>ge(()=>import("./PBFDecoderWorker-DYXQWpsL.js"),__vite__mapDeps([66,67,15,12,13,16,56,57]),import.meta.url),FeaturePipelineWorker:()=>ge(()=>import("./FeaturePipelineWorker-CHRci_Fs.js"),__vite__mapDeps([68,69,70,71,72,73,46,74,26,27,75,76,77,13,78,79,80,81,34,22,15,12,16,82,83,40,84,30,20,9,19,85,86,87,88,89,90,21,23,24,25,28,2,1,3,4,5,6,29,58,56,57,59,91,62,11,32,33,63,92,93]),import.meta.url),PointCloudWorker:()=>ge(()=>import("./PointCloudWorker-Bq8kCLQE.js"),__vite__mapDeps([94,95,96,97,98,44,99,50,51]),import.meta.url),RasterWorker:()=>ge(()=>import("./RasterWorker-DKzSKJBL.js"),__vite__mapDeps([100,101,102,103,104,105,106,107]),import.meta.url),SceneLayerSnappingSourceWorker:()=>ge(()=>import("./SceneLayerSnappingSourceWorker-AW-YLFXG.js"),__vite__mapDeps([108,109,110,40,41,42,43,37,38,39,44,45,46,47]),import.meta.url),SceneLayerWorker:()=>ge(()=>import("./SceneLayerWorker-DXV6Q_c_.js"),__vite__mapDeps([111,52,112,98,44,113,114,115,116,117,83,99,50,51]),import.meta.url),WFSSourceWorker:()=>ge(()=>import("./WFSSourceWorker-D35SxAfc.js"),__vite__mapDeps([118,15,12,13,16,14,17,18,19,20,9,21,22,23,24,25,26,27,28,2,1,3,4,5,6,29,30,62,11,63,119,120]),import.meta.url),WorkerTileHandler:()=>ge(()=>import("./WorkerTileHandler-e3VDq4Zr.js"),__vite__mapDeps([121,122,78,80,123,124,71,57,87,125,126,46,104,88,76]),import.meta.url),Lyr3DWorker:()=>ge(()=>import("./Lyr3DWorker-BkgNiM5L.js"),[],import.meta.url),Feature3DPipelineWorker:()=>ge(()=>import("./Feature3DPipelineWorker-Ce78ShgD.js"),__vite__mapDeps([127,23,15,12,13,16,24,25,26,27,19,20,9,28,2,1,3,4,5,6,29,30,18,22,58,56,57,59,43,128,129,117,116,44,99,50,51,130,131,83,132,109,40,133,134,38,135,45,46,37,39,136,137,110,138,114,139,140,141,95,73,142,115,143]),import.meta.url)},WN="worker:port-closed";var $n;(function(t){t[t.HANDSHAKE=0]="HANDSHAKE",t[t.OPEN=1]="OPEN",t[t.OPENED=2]="OPENED",t[t.RESPONSE=3]="RESPONSE",t[t.INVOKE=4]="INVOKE",t[t.ABORT=5]="ABORT",t[t.CLOSE=6]="CLOSE",t[t.OPEN_PORT=7]="OPEN_PORT",t[t.ON=8]="ON"})($n||($n={}));let SQ=0;function KN(){return SQ++}function TQ(t){return t&&typeof t=="object"&&("result"in t||"transferList"in t)}function fm(t){return t?typeof t=="string"?JSON.stringify({name:"message",message:t}):t.toJSON?JSON.stringify(t):JSON.stringify({name:t.name,message:t.message,details:t.details||{stack:t.stack}}):null}function tE(t,e,i,n){if(e.type===$n.OPEN_PORT)return void t.postMessage(e,[e.port]);if(e.type!==$n.INVOKE&&e.type!==$n.RESPONSE)return void t.postMessage(e);let s;if(TQ(i)?(s=C8(i.transferList),e.data=i.result):(s=C8(n),e.data=i),s){if(de("ff")){for(const h of s)if("byteLength"in h&&h.byteLength>267386880){const f="Worker call with large ArrayBuffer would crash Firefox";switch(e.type){case $n.INVOKE:throw f;case $n.RESPONSE:return void tE(t,{type:$n.RESPONSE,jobId:e.jobId,error:fm(f)})}}}t.postMessage(e,s)}else t.postMessage(e)}function gm(t){if(!t)return null;const e=t.data;return e?typeof e=="string"?JSON.parse(e):e:null}function C8(t){if(!(t!=null&&t.length))return null;if(de("esri-workers-arraybuffer-transfer"))return t;const e=t.filter(i=>!EQ(i));return e.length?e:null}function EQ(t){var e;return t instanceof ArrayBuffer||((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="ArrayBuffer"}async function DMe(t){try{return await t}catch(e){const i=(e==null?void 0:e.name)===WN;if(!(Ir(e)||i))throw e;return}}const{CLOSE:I8,ABORT:A8,INVOKE:O8,RESPONSE:Q0,OPEN_PORT:P8,ON:MQ}=$n,$Q=2;let kQ=class{constructor(e){this._invoke=e,this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._timer=null,this._process=this._process.bind(this)}push(e){e.type===$n.ABORT?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const e of this._invokeMessages)this._cancelledJobIds.has(e.jobId)||this._invoke(e);this._cancelledJobIds.clear(),this._invokeMessages.length=0}},ou=class Hp{static connect(e,i){const n=new MessageChannel;let s;s=typeof e=="function"?new e:"default"in e&&typeof e.default=="function"?new e.default:e;const h=new Hp(n.port1,{channel:n,client:s,schedule:i});return typeof s=="object"&&"remoteClient"in s&&(s.remoteClient=h),Hp.clients.set(h,s),n.port2}static loadWorker(e){const i=xQ[e];return i?i():Promise.resolve(null)}constructor(e,i,n){this._port=e,this._jobQueue=n,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new kQ(s=>this._onInvokeMessage(s)),this._client=i.client,this._onMessage=this._onMessage.bind(this),this._channel=i.channel,this._schedule=i.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:I8}),this._close()}isBusy(){return this._outJobs.size>0}invoke(e,i,n){return this.apply(e,[i],n)}apply(e,i,n){const s=n==null?void 0:n.signal,h=n==null?void 0:n.transferList;if(!this._port)return Promise.reject(new ce(WN,`Cannot call invoke('${e}'), port is closed`,{methodName:e,data:i}));const f=KN();return new Promise((m,y)=>{if(Ps(s))return this._processWork(),void y(ei());const x=$s(s,()=>{const k=this._outJobs.get(f);k&&(this._outJobs.delete(f),this._processWork(),Rt(k.abortHandle),this._post({type:A8,jobId:f}),y(ei()))}),E={resolve:m,reject:y,abortHandle:x,debugInfo:e};this._outJobs.set(f,E),this._post({type:O8,jobId:f,methodName:e,abortable:s!=null},i,h)})}createInvokeProxy(e){return qN(this,e)}on(e,i){const n=new MessageChannel;function s(h){i(h.data)}return this._port.postMessage({type:$n.ON,eventType:e,port:n.port2},[n.port2]),n.port1.addEventListener("message",s),n.port1.start(),ct(()=>{n.port1.postMessage({type:$n.CLOSE}),n.port1.close(),n.port1.removeEventListener("message",s)})}jobAdded(){this._processWork()}openPort(){const e=new MessageChannel;return this._post({type:P8,port:e.port2}),e.port1}_processWork(){var f;if(this._outJobs.size>=$Q)return;const e=(f=this._jobQueue)==null?void 0:f.pop();if(!e)return;const{methodName:i,data:n,invokeOptions:s,resolver:h}=e;this.apply(i,n,s).then(m=>h.resolve(m)).catch(m=>h.reject(m))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(e=>{Rt(e.abortHandle),e.reject(ei(`Worker closing, aborting job calling '${e.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null}_onMessage(e){this._schedule!=null?this._schedule(()=>this._processMessage(e,!0)):this._processMessage(e,!1)}_processMessage(e,i){const n=gm(e);if(n)switch(n.type){case Q0:this._onResponseMessage(n);break;case O8:i?this._onInvokeMessage(n):this._invokeQueue.push(n);break;case A8:this._onAbortMessage(n);break;case I8:this._onCloseMessage();break;case P8:this._onOpenPortMessage(n);break;case MQ:this._onOnMessage(n)}}_onAbortMessage(e){const i=this._inJobs,n=e.jobId,s=i.get(n);this._invokeQueue.push(e),s&&(s.controller&&s.controller.abort(),i.delete(n))}_onCloseMessage(){const e=this._client;this._close(),e&&"destroy"in e&&Hp.clients.get(this)===e&&e.destroy(),Hp.clients.delete(this),e!=null&&e.remoteClient&&(e.remoteClient=null)}_onInvokeMessage(e){const{methodName:i,jobId:n,data:s=[],abortable:h}=e,f=h?new AbortController:null,m=this._inJobs;let y,x=this._client,E=x[i];try{if(!E&&i&&i.includes(".")){const k=i.split(".");for(let I=0;I<k.length-1;I++)x=x[k[I]],E=x[k[I+1]]}if(typeof E!="function")throw new TypeError(`${i} is not a function`);s.push({client:this,signal:f?f.signal:null}),y=E.apply(x,s)}catch(k){return void this._post({type:Q0,jobId:n,error:fm(k)})}Ml(y)?(m.set(n,{controller:f,promise:y}),y.then(k=>{m.has(n)&&(m.delete(n),this._post({type:Q0,jobId:n},k))},k=>{m.has(n)&&(m.delete(n),Ir(k)||this._post({type:Q0,jobId:n,error:fm(k||{message:`Error encountered at method ${i}`})}))})):this._post({type:Q0,jobId:n},y)}_onOpenPortMessage(e){new Hp(e.port,{client:this._client})}_onOnMessage(e){const{port:i}=e,n=this._client.on(e.eventType,h=>{i.postMessage(h)}),s=Ym(e.port,"message",h=>{const f=gm(h);(f==null?void 0:f.type)===$n.CLOSE&&(s.remove(),n.remove(),i.close())})}_onResponseMessage(e){const{jobId:i,error:n,data:s}=e,h=this._outJobs;if(!h.has(i))return;const f=h.get(i);h.delete(i),this._processWork(),Rt(f.abortHandle),n?f.reject(ce.fromJSON(JSON.parse(n))):f.resolve(s)}_post(e,i,n){return tE(this._port,e,i,n)}};ou.kernelInfo={buildDate:RR,fullVersion:OT,revision:NR},ou.clients=new Map;let CQ=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new W2}destroy(){this.close()}get closed(){var e;return!((e=this._clients)!=null&&e.length)}open(e,i){return new Promise((n,s)=>{let h=!0;const f=m=>{Jt(i.signal),h&&(h=!1,m())};this._clients.length=e.length,this._clientPromises.length=e.length,this._inUseClients.length=e.length;for(let m=0;m<e.length;++m){const y=e[m];Ml(y)?this._clientPromises[m]=y.then(x=>(this._clients[m]=new ou(x,i,this._ongoingJobsQueue),f(n),this._clients[m]),()=>(f(s),null)):(this._clients[m]=new ou(y,i,this._ongoingJobsQueue),this._clientPromises[m]=Promise.resolve(this._clients[m]),f(n))}})}broadcast(e,i,n){const s=new Array(this._clientPromises.length);for(let h=0;h<this._clientPromises.length;++h){const f=this._clientPromises[h];s[h]=f.then(m=>m==null?void 0:m.invoke(e,i,n))}return s}close(){let e;for(;e=this._ongoingJobsQueue.pop();)e.resolver.reject(ei(`Worker closing, aborting job calling '${e.methodName}'`));for(const i of this._clientPromises)i.then(n=>n==null?void 0:n.close());this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0,wQ(this)}invoke(e,i,n){return this.apply(e,[i],n)}apply(e,i,n){const s=Rs();this._ongoingJobsQueue.push({methodName:e,data:i,invokeOptions:n,resolver:s});for(let h=0;h<this._clientPromises.length;h++){const f=this._clients[h];f?f.jobAdded():this._clientPromises[h].then(m=>m==null?void 0:m.jobAdded())}return s.promise}createInvokeProxy(e){return qN(this,e)}on(e,i){return Promise.all(this._clientPromises).then(()=>Dc(this._clients.map(n=>n.on(e,i))))}openPorts(){return new Promise(e=>{const i=new Array(this._clientPromises.length);let n=i.length;for(let s=0;s<this._clientPromises.length;++s)this._clientPromises[s].then(h=>{h&&(i[s]=h.openPort()),--n==0&&e(i)})})}get test(){}};const IQ={async request(t,e){var f,m;const i=t.options,n=i.responseType;i.signal=e==null?void 0:e.signal,i.responseType=n==="native"||n==="native-request-init"?"native-request-init":n&&["blob","json","text"].includes(n)&&((f=c9(t.url))!=null&&f.after)?n:"array-buffer";const s=await ki(t.url,i),h={data:s.data,httpStatus:s.httpStatus,ssl:s.ssl};switch((m=s.requestOptions)==null?void 0:m.responseType){case"native-request-init":return delete h.data.signal,h;case"blob":h.data=await h.data.arrayBuffer();break;case"json":h.data=new TextEncoder().encode(JSON.stringify(h.data)).buffer;break;case"text":h.data=new TextEncoder().encode(h.data).buffer}return{result:h,transferList:[h.data]}}};let Lg;var $O,kO;const AQ=(($O=globalThis.esriConfig)==null?void 0:$O.locale)??((kO=globalThis.dojoConfig)==null?void 0:kO.locale);var CO;const Dg=(CO=globalThis.document)==null?void 0:CO.documentElement;function ZN(){var i;const t=Dg==null?void 0:Dg.getAttribute("lang"),e=(i=globalThis.navigator)==null?void 0:i.language;return AQ??t??e??"en"}function Zr(){return Lg===void 0&&(Lg=ZN()),Lg}function OQ(t=Zr()){const e=/^([a-zA-Z]{2,3})(?:[_-][a-zA-Z0-9]+)*$/.exec(t);return e==null?void 0:e[1].toLowerCase()}const pb=[];function iE(t){return pb.push(t),ct(()=>pb.splice(pb.indexOf(t),1))}const fb=[];function nE(t){return fb.push(t),ct(()=>fb.splice(fb.indexOf(t),1))}function R8(){const t=ZN();Lg!==t&&([...fb].forEach(e=>e(t)),Lg=t,[...pb].forEach(e=>e(t)))}var IO;(IO=globalThis.addEventListener)==null||IO.call(globalThis,"languagechange",R8),Dg&&new MutationObserver(()=>{R8()}).observe(Dg,{attributeFilter:["lang"]});const N8=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Bishkek"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);class dp extends Error{}class PQ extends dp{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class RQ extends dp{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class NQ extends dp{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class _f extends dp{}class JN extends dp{constructor(e){super(`Invalid unit ${e}`)}}class ir extends dp{}class Yc extends dp{constructor(){super("Zone is an abstract class")}}const Le="numeric",ha="short",Cs="long",K2={year:Le,month:Le,day:Le},YN={year:Le,month:ha,day:Le},LQ={year:Le,month:ha,day:Le,weekday:ha},XN={year:Le,month:Cs,day:Le},QN={year:Le,month:Cs,day:Le,weekday:Cs},eL={hour:Le,minute:Le},tL={hour:Le,minute:Le,second:Le},iL={hour:Le,minute:Le,second:Le,timeZoneName:ha},nL={hour:Le,minute:Le,second:Le,timeZoneName:Cs},rL={hour:Le,minute:Le,hourCycle:"h23"},sL={hour:Le,minute:Le,second:Le,hourCycle:"h23"},oL={hour:Le,minute:Le,second:Le,hourCycle:"h23",timeZoneName:ha},aL={hour:Le,minute:Le,second:Le,hourCycle:"h23",timeZoneName:Cs},lL={year:Le,month:Le,day:Le,hour:Le,minute:Le},cL={year:Le,month:Le,day:Le,hour:Le,minute:Le,second:Le},hL={year:Le,month:ha,day:Le,hour:Le,minute:Le},uL={year:Le,month:ha,day:Le,hour:Le,minute:Le,second:Le},DQ={year:Le,month:ha,day:Le,weekday:ha,hour:Le,minute:Le},dL={year:Le,month:Cs,day:Le,hour:Le,minute:Le,timeZoneName:ha},pL={year:Le,month:Cs,day:Le,hour:Le,minute:Le,second:Le,timeZoneName:ha},fL={year:Le,month:Cs,day:Le,weekday:Cs,hour:Le,minute:Le,timeZoneName:Cs},gL={year:Le,month:Cs,day:Le,weekday:Cs,hour:Le,minute:Le,second:Le,timeZoneName:Cs};class sy{get type(){throw new Yc}get name(){throw new Yc}get ianaName(){return this.name}get isUniversal(){throw new Yc}offsetName(e,i){throw new Yc}formatOffset(e,i){throw new Yc}offset(e){throw new Yc}equals(e){throw new Yc}get isValid(){throw new Yc}}let u5=null;class E3 extends sy{static get instance(){return u5===null&&(u5=new E3),u5}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:i,locale:n}){return TL(e,i,n)}formatOffset(e,i){return zg(this.offset(e),i)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}let gb={};function zQ(t){return gb[t]||(gb[t]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),gb[t]}const FQ={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function jQ(t,e){const i=t.format(e).replace(/\u200E/g,""),n=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(i),[,s,h,f,m,y,x,E]=n;return[f,s,h,m,y,x,E]}function GQ(t,e){const i=t.formatToParts(e),n=[];for(let s=0;s<i.length;s++){const{type:h,value:f}=i[s],m=FQ[h];h==="era"?n[m]=f:rt(m)||(n[m]=parseInt(f,10))}return n}let Ky={};class ua extends sy{static create(e){return Ky[e]||(Ky[e]=new ua(e)),Ky[e]}static resetCache(){Ky={},gb={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=ua.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:i,locale:n}){return TL(e,i,n,this.name)}formatOffset(e,i){return zg(this.offset(e),i)}offset(e){const i=new Date(e);if(isNaN(i))return NaN;const n=zQ(this.name);let[s,h,f,m,y,x,E]=n.formatToParts?GQ(n,i):jQ(n,i);m==="BC"&&(s=-Math.abs(s)+1);const I=$3({year:s,month:h,day:f,hour:y===24?0:y,minute:x,second:E,millisecond:0});let P=+i;const L=P%1e3;return P-=L>=0?L:1e3+L,(I-P)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let L8={};function UQ(t,e={}){const i=JSON.stringify([t,e]);let n=L8[i];return n||(n=new Intl.ListFormat(t,e),L8[i]=n),n}let L9={};function D9(t,e={}){const i=JSON.stringify([t,e]);let n=L9[i];return n||(n=new Intl.DateTimeFormat(t,e),L9[i]=n),n}let z9={};function BQ(t,e={}){const i=JSON.stringify([t,e]);let n=z9[i];return n||(n=new Intl.NumberFormat(t,e),z9[i]=n),n}let F9={};function HQ(t,e={}){const{base:i,...n}=e,s=JSON.stringify([t,n]);let h=F9[s];return h||(h=new Intl.RelativeTimeFormat(t,e),F9[s]=h),h}let N1=null;function VQ(){return N1||(N1=new Intl.DateTimeFormat().resolvedOptions().locale,N1)}let D8={};function qQ(t){let e=D8[t];if(!e){const i=new Intl.Locale(t);e="getWeekInfo"in i?i.getWeekInfo():i.weekInfo,D8[t]=e}return e}function WQ(t){const e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));const i=t.indexOf("-u-");if(i===-1)return[t];{let n,s;try{n=D9(t).resolvedOptions(),s=t}catch{const y=t.substring(0,i);n=D9(y).resolvedOptions(),s=y}const{numberingSystem:h,calendar:f}=n;return[s,h,f]}}function KQ(t,e,i){return(i||e)&&(t.includes("-u-")||(t+="-u"),i&&(t+=`-ca-${i}`),e&&(t+=`-nu-${e}`)),t}function ZQ(t){const e=[];for(let i=1;i<=12;i++){const n=Je.utc(2009,i,1);e.push(t(n))}return e}function JQ(t){const e=[];for(let i=1;i<=7;i++){const n=Je.utc(2016,11,13+i);e.push(t(n))}return e}function Zy(t,e,i,n){const s=t.listingMode();return s==="error"?null:s==="en"?i(e):n(e)}function YQ(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||new Intl.DateTimeFormat(t.intl).resolvedOptions().numberingSystem==="latn"}class XQ{constructor(e,i,n){this.padTo=n.padTo||0,this.floor=n.floor||!1;const{padTo:s,floor:h,...f}=n;if(!i||Object.keys(f).length>0){const m={useGrouping:!1,...n};n.padTo>0&&(m.minimumIntegerDigits=n.padTo),this.inf=BQ(e,m)}}format(e){if(this.inf){const i=this.floor?Math.floor(e):e;return this.inf.format(i)}else{const i=this.floor?Math.floor(e):lE(e,3);return rn(i,this.padTo)}}}class QQ{constructor(e,i,n){this.opts=n,this.originalZone=void 0;let s;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const f=-1*(e.offset/60),m=f>=0?`Etc/GMT+${f}`:`Etc/GMT${f}`;e.offset!==0&&ua.create(m).valid?(s=m,this.dt=e):(s="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,s=e.zone.name):(s="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const h={...this.opts};h.timeZone=h.timeZone||s,this.dtf=D9(i,h)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(i=>{if(i.type==="timeZoneName"){const n=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...i,value:n}}else return i}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class eee{constructor(e,i,n){this.opts={style:"long",...n},!i&&xL()&&(this.rtf=HQ(e,n))}format(e,i){return this.rtf?this.rtf.format(e,i):See(i,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,i){return this.rtf?this.rtf.formatToParts(e,i):[]}}const tee={firstDay:1,minimalDays:4,weekend:[6,7]};class Ut{static fromOpts(e){return Ut.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,i,n,s,h=!1){const f=e||Bi.defaultLocale,m=f||(h?"en-US":VQ()),y=i||Bi.defaultNumberingSystem,x=n||Bi.defaultOutputCalendar,E=j9(s)||Bi.defaultWeekSettings;return new Ut(m,y,x,E,f)}static resetCache(){N1=null,L9={},z9={},F9={}}static fromObject({locale:e,numberingSystem:i,outputCalendar:n,weekSettings:s}={}){return Ut.create(e,i,n,s)}constructor(e,i,n,s,h){const[f,m,y]=WQ(e);this.locale=f,this.numberingSystem=i||m||null,this.outputCalendar=n||y||null,this.weekSettings=s,this.intl=KQ(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=h,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=YQ(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),i=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&i?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:Ut.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,j9(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,i=!1){return Zy(this,e,$L,()=>{const n=i?{month:e,day:"numeric"}:{month:e},s=i?"format":"standalone";return this.monthsCache[s][e]||(this.monthsCache[s][e]=ZQ(h=>this.extract(h,n,"month"))),this.monthsCache[s][e]})}weekdays(e,i=!1){return Zy(this,e,IL,()=>{const n=i?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},s=i?"format":"standalone";return this.weekdaysCache[s][e]||(this.weekdaysCache[s][e]=JQ(h=>this.extract(h,n,"weekday"))),this.weekdaysCache[s][e]})}meridiems(){return Zy(this,void 0,()=>AL,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Je.utc(2016,11,13,9),Je.utc(2016,11,13,19)].map(i=>this.extract(i,e,"dayperiod"))}return this.meridiemCache})}eras(e){return Zy(this,e,OL,()=>{const i={era:e};return this.eraCache[e]||(this.eraCache[e]=[Je.utc(-40,1,1),Je.utc(2017,1,1)].map(n=>this.extract(n,i,"era"))),this.eraCache[e]})}extract(e,i,n){const s=this.dtFormatter(e,i),h=s.formatToParts(),f=h.find(m=>m.type.toLowerCase()===n);return f?f.value:null}numberFormatter(e={}){return new XQ(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,i={}){return new QQ(e,this.intl,i)}relFormatter(e={}){return new eee(this.intl,this.isEnglish(),e)}listFormatter(e={}){return UQ(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:SL()?qQ(this.locale):tee}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let d5=null;class or extends sy{static get utcInstance(){return d5===null&&(d5=new or(0)),d5}static instance(e){return e===0?or.utcInstance:new or(e)}static parseSpecifier(e){if(e){const i=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(i)return new or(k3(i[1],i[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${zg(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${zg(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,i){return zg(this.fixed,i)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class iee extends sy{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function zh(t,e){if(rt(t)||t===null)return e;if(t instanceof sy)return t;if(lee(t)){const i=t.toLowerCase();return i==="default"?e:i==="local"||i==="system"?E3.instance:i==="utc"||i==="gmt"?or.utcInstance:or.parseSpecifier(i)||ua.create(t)}else return Zh(t)?or.instance(t):typeof t=="object"&&"offset"in t&&typeof t.offset=="function"?t:new iee(t)}const rE={arab:"[Ù -Ù©]",arabext:"[Û°-Û¹]",bali:"[á­-á­™]",beng:"[à§¦-à§¯]",deva:"[à¥¦-à¥¯]",fullwide:"[ï¼-ï¼™]",gujr:"[à«¦-à«¯]",hanidec:"[ã€‡|ä¸€|äºŒ|ä¸‰|å››|äº”|å…­|ä¸ƒ|å…«|ä¹]",khmr:"[áŸ -áŸ©]",knda:"[à³¦-à³¯]",laoo:"[à»-à»™]",limb:"[á¥†-á¥]",mlym:"[àµ¦-àµ¯]",mong:"[á -á ™]",mymr:"[á€-á‰]",orya:"[à­¦-à­¯]",tamldec:"[à¯¦-à¯¯]",telu:"[à±¦-à±¯]",thai:"[à¹-à¹™]",tibt:"[à¼ -à¼©]",latn:"\\d"},z8={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},nee=rE.hanidec.replace(/[\[|\]]/g,"").split("");function ree(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let i=0;i<t.length;i++){const n=t.charCodeAt(i);if(t[i].search(rE.hanidec)!==-1)e+=nee.indexOf(t[i]);else for(const s in z8){const[h,f]=z8[s];n>=h&&n<=f&&(e+=n-h)}}return parseInt(e,10)}else return e}let Vp={};function see(){Vp={}}function $o({numberingSystem:t},e=""){const i=t||"latn";return Vp[i]||(Vp[i]={}),Vp[i][e]||(Vp[i][e]=new RegExp(`${rE[i]}${e}`)),Vp[i][e]}let F8=()=>Date.now(),j8="system",G8=null,U8=null,B8=null,H8=60,V8,q8=null;class Bi{static get now(){return F8}static set now(e){F8=e}static set defaultZone(e){j8=e}static get defaultZone(){return zh(j8,E3.instance)}static get defaultLocale(){return G8}static set defaultLocale(e){G8=e}static get defaultNumberingSystem(){return U8}static set defaultNumberingSystem(e){U8=e}static get defaultOutputCalendar(){return B8}static set defaultOutputCalendar(e){B8=e}static get defaultWeekSettings(){return q8}static set defaultWeekSettings(e){q8=j9(e)}static get twoDigitCutoffYear(){return H8}static set twoDigitCutoffYear(e){H8=e%100}static get throwOnInvalid(){return V8}static set throwOnInvalid(e){V8=e}static resetCaches(){Ut.resetCache(),ua.resetCache(),Je.resetCache(),see()}}class Qo{constructor(e,i){this.reason=e,this.explanation=i}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const mL=[0,31,59,90,120,151,181,212,243,273,304,334],yL=[0,31,60,91,121,152,182,213,244,274,305,335];function po(t,e){return new Qo("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function sE(t,e,i){const n=new Date(Date.UTC(t,e-1,i));t<100&&t>=0&&n.setUTCFullYear(n.getUTCFullYear()-1900);const s=n.getUTCDay();return s===0?7:s}function vL(t,e,i){return i+(oy(t)?yL:mL)[e-1]}function bL(t,e){const i=oy(t)?yL:mL,n=i.findIndex(h=>h<e),s=e-i[n];return{month:n+1,day:s}}function oE(t,e){return(t-e+7)%7+1}function Z2(t,e=4,i=1){const{year:n,month:s,day:h}=t,f=vL(n,s,h),m=oE(sE(n,s,h),i);let y=Math.floor((f-m+14-e)/7),x;return y<1?(x=n-1,y=mm(x,e,i)):y>mm(n,e,i)?(x=n+1,y=1):x=n,{weekYear:x,weekNumber:y,weekday:m,...C3(t)}}function W8(t,e=4,i=1){const{weekYear:n,weekNumber:s,weekday:h}=t,f=oE(sE(n,1,e),i),m=Rf(n);let y=s*7+h-f-7+e,x;y<1?(x=n-1,y+=Rf(x)):y>m?(x=n+1,y-=Rf(n)):x=n;const{month:E,day:k}=bL(x,y);return{year:x,month:E,day:k,...C3(t)}}function p5(t){const{year:e,month:i,day:n}=t,s=vL(e,i,n);return{year:e,ordinal:s,...C3(t)}}function K8(t){const{year:e,ordinal:i}=t,{month:n,day:s}=bL(e,i);return{year:e,month:n,day:s,...C3(t)}}function Z8(t,e){if(!rt(t.localWeekday)||!rt(t.localWeekNumber)||!rt(t.localWeekYear)){if(!rt(t.weekday)||!rt(t.weekNumber)||!rt(t.weekYear))throw new _f("Cannot mix locale-based week fields with ISO-based week fields");return rt(t.localWeekday)||(t.weekday=t.localWeekday),rt(t.localWeekNumber)||(t.weekNumber=t.localWeekNumber),rt(t.localWeekYear)||(t.weekYear=t.localWeekYear),delete t.localWeekday,delete t.localWeekNumber,delete t.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function oee(t,e=4,i=1){const n=M3(t.weekYear),s=fo(t.weekNumber,1,mm(t.weekYear,e,i)),h=fo(t.weekday,1,7);return n?s?h?!1:po("weekday",t.weekday):po("week",t.weekNumber):po("weekYear",t.weekYear)}function aee(t){const e=M3(t.year),i=fo(t.ordinal,1,Rf(t.year));return e?i?!1:po("ordinal",t.ordinal):po("year",t.year)}function wL(t){const e=M3(t.year),i=fo(t.month,1,12),n=fo(t.day,1,J2(t.year,t.month));return e?i?n?!1:po("day",t.day):po("month",t.month):po("year",t.year)}function _L(t){const{hour:e,minute:i,second:n,millisecond:s}=t,h=fo(e,0,23)||e===24&&i===0&&n===0&&s===0,f=fo(i,0,59),m=fo(n,0,59),y=fo(s,0,999);return h?f?m?y?!1:po("millisecond",s):po("second",n):po("minute",i):po("hour",e)}function rt(t){return typeof t>"u"}function Zh(t){return typeof t=="number"}function M3(t){return typeof t=="number"&&t%1===0}function lee(t){return typeof t=="string"}function cee(t){return Object.prototype.toString.call(t)==="[object Date]"}function xL(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function SL(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function hee(t){return Array.isArray(t)?t:[t]}function J8(t,e,i){if(t.length!==0)return t.reduce((n,s)=>{const h=[e(s),s];return n&&i(n[0],h[0])===n[0]?n:h},null)[1]}function uee(t,e){return e.reduce((i,n)=>(i[n]=t[n],i),{})}function s0(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function j9(t){if(t==null)return null;if(typeof t!="object")throw new ir("Week settings must be an object");if(!fo(t.firstDay,1,7)||!fo(t.minimalDays,1,7)||!Array.isArray(t.weekend)||t.weekend.some(e=>!fo(e,1,7)))throw new ir("Invalid week settings");return{firstDay:t.firstDay,minimalDays:t.minimalDays,weekend:Array.from(t.weekend)}}function fo(t,e,i){return M3(t)&&t>=e&&t<=i}function dee(t,e){return t-e*Math.floor(t/e)}function rn(t,e=2){const i=t<0;let n;return i?n="-"+(""+-t).padStart(e,"0"):n=(""+t).padStart(e,"0"),n}function Oh(t){if(!(rt(t)||t===null||t===""))return parseInt(t,10)}function $u(t){if(!(rt(t)||t===null||t===""))return parseFloat(t)}function aE(t){if(!(rt(t)||t===null||t==="")){const e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function lE(t,e,i=!1){const n=10**e;return(i?Math.trunc:Math.round)(t*n)/n}function oy(t){return t%4===0&&(t%100!==0||t%400===0)}function Rf(t){return oy(t)?366:365}function J2(t,e){const i=dee(e-1,12)+1,n=t+(e-i)/12;return i===2?oy(n)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function $3(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function Y8(t,e,i){return-oE(sE(t,1,e),i)+e-1}function mm(t,e=4,i=1){const n=Y8(t,e,i),s=Y8(t+1,e,i);return(Rf(t)-n+s)/7}function G9(t){return t>99?t:t>Bi.twoDigitCutoffYear?1900+t:2e3+t}function TL(t,e,i,n=null){const s=new Date(t),h={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};n&&(h.timeZone=n);const f={timeZoneName:e,...h},m=new Intl.DateTimeFormat(i,f).formatToParts(s).find(y=>y.type.toLowerCase()==="timezonename");return m?m.value:null}function k3(t,e){let i=parseInt(t,10);Number.isNaN(i)&&(i=0);const n=parseInt(e,10)||0,s=i<0||Object.is(i,-0)?-n:n;return i*60+s}function EL(t){const e=Number(t);if(typeof t=="boolean"||t===""||Number.isNaN(e))throw new ir(`Invalid unit value ${t}`);return e}function Y2(t,e){const i={};for(const n in t)if(s0(t,n)){const s=t[n];if(s==null)continue;i[e(n)]=EL(s)}return i}function zg(t,e){const i=Math.trunc(Math.abs(t/60)),n=Math.trunc(Math.abs(t%60)),s=t>=0?"+":"-";switch(e){case"short":return`${s}${rn(i,2)}:${rn(n,2)}`;case"narrow":return`${s}${i}${n>0?`:${n}`:""}`;case"techie":return`${s}${rn(i,2)}${rn(n,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function C3(t){return uee(t,["hour","minute","second","millisecond"])}const pee=["January","February","March","April","May","June","July","August","September","October","November","December"],ML=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],fee=["J","F","M","A","M","J","J","A","S","O","N","D"];function $L(t){switch(t){case"narrow":return[...fee];case"short":return[...ML];case"long":return[...pee];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const kL=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],CL=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],gee=["M","T","W","T","F","S","S"];function IL(t){switch(t){case"narrow":return[...gee];case"short":return[...CL];case"long":return[...kL];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const AL=["AM","PM"],mee=["Before Christ","Anno Domini"],yee=["BC","AD"],vee=["B","A"];function OL(t){switch(t){case"narrow":return[...vee];case"short":return[...yee];case"long":return[...mee];default:return null}}function bee(t){return AL[t.hour<12?0:1]}function wee(t,e){return IL(e)[t.weekday-1]}function _ee(t,e){return $L(e)[t.month-1]}function xee(t,e){return OL(e)[t.year<0?0:1]}function See(t,e,i="always",n=!1){const s={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},h=["hours","minutes","seconds"].indexOf(t)===-1;if(i==="auto"&&h){const k=t==="days";switch(e){case 1:return k?"tomorrow":`next ${s[t][0]}`;case-1:return k?"yesterday":`last ${s[t][0]}`;case 0:return k?"today":`this ${s[t][0]}`}}const f=Object.is(e,-0)||e<0,m=Math.abs(e),y=m===1,x=s[t],E=n?y?x[1]:x[2]||x[1]:y?s[t][0]:t;return f?`${m} ${E} ago`:`in ${m} ${E}`}function X8(t,e){let i="";for(const n of t)n.literal?i+=n.val:i+=e(n.val);return i}const Tee={D:K2,DD:YN,DDD:XN,DDDD:QN,t:eL,tt:tL,ttt:iL,tttt:nL,T:rL,TT:sL,TTT:oL,TTTT:aL,f:lL,ff:hL,fff:dL,ffff:fL,F:cL,FF:uL,FFF:pL,FFFF:gL};class sr{static create(e,i={}){return new sr(e,i)}static parseFormat(e){let i=null,n="",s=!1;const h=[];for(let f=0;f<e.length;f++){const m=e.charAt(f);m==="'"?(n.length>0&&h.push({literal:s||/^\s+$/.test(n),val:n}),i=null,n="",s=!s):s||m===i?n+=m:(n.length>0&&h.push({literal:/^\s+$/.test(n),val:n}),n=m,i=m)}return n.length>0&&h.push({literal:s||/^\s+$/.test(n),val:n}),h}static macroTokenToFormatOpts(e){return Tee[e]}constructor(e,i){this.opts=i,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,i){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...i}).format()}dtFormatter(e,i={}){return this.loc.dtFormatter(e,{...this.opts,...i})}formatDateTime(e,i){return this.dtFormatter(e,i).format()}formatDateTimeParts(e,i){return this.dtFormatter(e,i).formatToParts()}formatInterval(e,i){return this.dtFormatter(e.start,i).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,i){return this.dtFormatter(e,i).resolvedOptions()}num(e,i=0){if(this.opts.forceSimple)return rn(e,i);const n={...this.opts};return i>0&&(n.padTo=i),this.loc.numberFormatter(n).format(e)}formatDateTimeFromString(e,i){const n=this.loc.listingMode()==="en",s=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",h=(P,L)=>this.loc.extract(e,P,L),f=P=>e.isOffsetFixed&&e.offset===0&&P.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,P.format):"",m=()=>n?bee(e):h({hour:"numeric",hourCycle:"h12"},"dayperiod"),y=(P,L)=>n?_ee(e,P):h(L?{month:P}:{month:P,day:"numeric"},"month"),x=(P,L)=>n?wee(e,P):h(L?{weekday:P}:{weekday:P,month:"long",day:"numeric"},"weekday"),E=P=>{const L=sr.macroTokenToFormatOpts(P);return L?this.formatWithSystemDefault(e,L):P},k=P=>n?xee(e,P):h({era:P},"era"),I=P=>{switch(P){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return f({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return f({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return f({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return m();case"d":return s?h({day:"numeric"},"day"):this.num(e.day);case"dd":return s?h({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return x("short",!0);case"cccc":return x("long",!0);case"ccccc":return x("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return x("short",!1);case"EEEE":return x("long",!1);case"EEEEE":return x("narrow",!1);case"L":return s?h({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return s?h({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return y("short",!0);case"LLLL":return y("long",!0);case"LLLLL":return y("narrow",!0);case"M":return s?h({month:"numeric"},"month"):this.num(e.month);case"MM":return s?h({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return y("short",!1);case"MMMM":return y("long",!1);case"MMMMM":return y("narrow",!1);case"y":return s?h({year:"numeric"},"year"):this.num(e.year);case"yy":return s?h({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return s?h({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return s?h({year:"numeric"},"year"):this.num(e.year,6);case"G":return k("short");case"GG":return k("long");case"GGGGG":return k("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return E(P)}};return X8(sr.parseFormat(i),I)}formatDurationFromString(e,i){const n=y=>{switch(y[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},s=y=>x=>{const E=n(x);return E?this.num(y.get(E),x.length):x},h=sr.parseFormat(i),f=h.reduce((y,{literal:x,val:E})=>x?y:y.concat(E),[]),m=e.shiftTo(...f.map(n).filter(y=>y));return X8(h,s(m))}}const PL=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function N0(...t){const e=t.reduce((i,n)=>i+n.source,"");return RegExp(`^${e}$`)}function L0(...t){return e=>t.reduce(([i,n,s],h)=>{const[f,m,y]=h(e,s);return[{...i,...f},m||n,y]},[{},null,1]).slice(0,2)}function D0(t,...e){if(t==null)return[null,null];for(const[i,n]of e){const s=i.exec(t);if(s)return n(s)}return[null,null]}function RL(...t){return(e,i)=>{const n={};let s;for(s=0;s<t.length;s++)n[t[s]]=Oh(e[i+s]);return[n,null,i+s]}}const NL=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Eee=`(?:${NL.source}?(?:\\[(${PL.source})\\])?)?`,cE=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,LL=RegExp(`${cE.source}${Eee}`),hE=RegExp(`(?:T${LL.source})?`),Mee=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,$ee=/(\d{4})-?W(\d\d)(?:-?(\d))?/,kee=/(\d{4})-?(\d{3})/,Cee=RL("weekYear","weekNumber","weekDay"),Iee=RL("year","ordinal"),Aee=/(\d{4})-(\d\d)-(\d\d)/,DL=RegExp(`${cE.source} ?(?:${NL.source}|(${PL.source}))?`),Oee=RegExp(`(?: ${DL.source})?`);function Nf(t,e,i){const n=t[e];return rt(n)?i:Oh(n)}function Pee(t,e){return[{year:Nf(t,e),month:Nf(t,e+1,1),day:Nf(t,e+2,1)},null,e+3]}function z0(t,e){return[{hours:Nf(t,e,0),minutes:Nf(t,e+1,0),seconds:Nf(t,e+2,0),milliseconds:aE(t[e+3])},null,e+4]}function ay(t,e){const i=!t[e]&&!t[e+1],n=k3(t[e+1],t[e+2]),s=i?null:or.instance(n);return[{},s,e+3]}function ly(t,e){const i=t[e]?ua.create(t[e]):null;return[{},i,e+1]}const Ree=RegExp(`^T?${cE.source}$`),Nee=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function Lee(t){const[e,i,n,s,h,f,m,y,x]=t,E=e[0]==="-",k=y&&y[0]==="-",I=(P,L=!1)=>P!==void 0&&(L||P&&E)?-P:P;return[{years:I($u(i)),months:I($u(n)),weeks:I($u(s)),days:I($u(h)),hours:I($u(f)),minutes:I($u(m)),seconds:I($u(y),y==="-0"),milliseconds:I(aE(x),k)}]}const Dee={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function uE(t,e,i,n,s,h,f){const m={year:e.length===2?G9(Oh(e)):Oh(e),month:ML.indexOf(i)+1,day:Oh(n),hour:Oh(s),minute:Oh(h)};return f&&(m.second=Oh(f)),t&&(m.weekday=t.length>3?kL.indexOf(t)+1:CL.indexOf(t)+1),m}const zee=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function Fee(t){const[,e,i,n,s,h,f,m,y,x,E,k]=t,I=uE(e,s,n,i,h,f,m);let P;return y?P=Dee[y]:x?P=0:P=k3(E,k),[I,new or(P)]}function jee(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const Gee=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Uee=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,Bee=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Q8(t){const[,e,i,n,s,h,f,m]=t;return[uE(e,s,n,i,h,f,m),or.utcInstance]}function Hee(t){const[,e,i,n,s,h,f,m]=t;return[uE(e,m,i,n,s,h,f),or.utcInstance]}const Vee=N0(Mee,hE),qee=N0($ee,hE),Wee=N0(kee,hE),Kee=N0(LL),zL=L0(Pee,z0,ay,ly),Zee=L0(Cee,z0,ay,ly),Jee=L0(Iee,z0,ay,ly),Yee=L0(z0,ay,ly);function Xee(t){return D0(t,[Vee,zL],[qee,Zee],[Wee,Jee],[Kee,Yee])}function Qee(t){return D0(jee(t),[zee,Fee])}function ete(t){return D0(t,[Gee,Q8],[Uee,Q8],[Bee,Hee])}function tte(t){return D0(t,[Nee,Lee])}const ite=L0(z0);function nte(t){return D0(t,[Ree,ite])}const rte=N0(Aee,Oee),ste=N0(DL),ote=L0(z0,ay,ly);function ate(t){return D0(t,[rte,zL],[ste,ote])}const e$="Invalid Duration",FL={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},lte={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...FL},Gs=146097/400,Tp=146097/4800,cte={years:{quarters:4,months:12,weeks:Gs/7,days:Gs,hours:Gs*24,minutes:Gs*24*60,seconds:Gs*24*60*60,milliseconds:Gs*24*60*60*1e3},quarters:{months:3,weeks:Gs/28,days:Gs/4,hours:Gs*24/4,minutes:Gs*24*60/4,seconds:Gs*24*60*60/4,milliseconds:Gs*24*60*60*1e3/4},months:{weeks:Tp/7,days:Tp,hours:Tp*24,minutes:Tp*24*60,seconds:Tp*24*60*60,milliseconds:Tp*24*60*60*1e3},...FL},kd=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],hte=kd.slice(0).reverse();function Xc(t,e,i=!1){const n={values:i?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new $t(n)}function jL(t,e){let i=e.milliseconds??0;for(const n of hte.slice(1))e[n]&&(i+=e[n]*t[n].milliseconds);return i}function t$(t,e){const i=jL(t,e)<0?-1:1;kd.reduceRight((n,s)=>{if(rt(e[s]))return n;if(n){const h=e[n]*i,f=t[s][n],m=Math.floor(h/f);e[s]+=m*i,e[n]-=m*f*i}return s},null),kd.reduce((n,s)=>{if(rt(e[s]))return n;if(n){const h=e[n]%1;e[n]-=h,e[s]+=h*t[n][s]}return s},null)}function ute(t){const e={};for(const[i,n]of Object.entries(t))n!==0&&(e[i]=n);return e}class $t{constructor(e){const i=e.conversionAccuracy==="longterm"||!1;let n=i?cte:lte;e.matrix&&(n=e.matrix),this.values=e.values,this.loc=e.loc||Ut.create(),this.conversionAccuracy=i?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=n,this.isLuxonDuration=!0}static fromMillis(e,i){return $t.fromObject({milliseconds:e},i)}static fromObject(e,i={}){if(e==null||typeof e!="object")throw new ir(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new $t({values:Y2(e,$t.normalizeUnit),loc:Ut.fromObject(i),conversionAccuracy:i.conversionAccuracy,matrix:i.matrix})}static fromDurationLike(e){if(Zh(e))return $t.fromMillis(e);if($t.isDuration(e))return e;if(typeof e=="object")return $t.fromObject(e);throw new ir(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,i){const[n]=tte(e);return n?$t.fromObject(n,i):$t.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,i){const[n]=nte(e);return n?$t.fromObject(n,i):$t.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,i=null){if(!e)throw new ir("need to specify a reason the Duration is invalid");const n=e instanceof Qo?e:new Qo(e,i);if(Bi.throwOnInvalid)throw new NQ(n);return new $t({invalid:n})}static normalizeUnit(e){const i={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!i)throw new JN(e);return i}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,i={}){const n={...i,floor:i.round!==!1&&i.floor!==!1};return this.isValid?sr.create(this.loc,n).formatDurationFromString(this,e):e$}toHuman(e={}){if(!this.isValid)return e$;const i=kd.map(n=>{const s=this.values[n];return rt(s)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:n.slice(0,-1)}).format(s)}).filter(n=>n);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(i)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=lE(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const i=this.toMillis();return i<0||i>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},Je.fromMillis(i,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?jL(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const i=$t.fromDurationLike(e),n={};for(const s of kd)(s0(i.values,s)||s0(this.values,s))&&(n[s]=i.get(s)+this.get(s));return Xc(this,{values:n},!0)}minus(e){if(!this.isValid)return this;const i=$t.fromDurationLike(e);return this.plus(i.negate())}mapUnits(e){if(!this.isValid)return this;const i={};for(const n of Object.keys(this.values))i[n]=EL(e(this.values[n],n));return Xc(this,{values:i},!0)}get(e){return this[$t.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const i={...this.values,...Y2(e,$t.normalizeUnit)};return Xc(this,{values:i})}reconfigure({locale:e,numberingSystem:i,conversionAccuracy:n,matrix:s}={}){const f={loc:this.loc.clone({locale:e,numberingSystem:i}),matrix:s,conversionAccuracy:n};return Xc(this,f)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return t$(this.matrix,e),Xc(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=ute(this.normalize().shiftToAll().toObject());return Xc(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(f=>$t.normalizeUnit(f));const i={},n={},s=this.toObject();let h;for(const f of kd)if(e.indexOf(f)>=0){h=f;let m=0;for(const x in n)m+=this.matrix[x][f]*n[x],n[x]=0;Zh(s[f])&&(m+=s[f]);const y=Math.trunc(m);i[f]=y,n[f]=(m*1e3-y*1e3)/1e3}else Zh(s[f])&&(n[f]=s[f]);for(const f in n)n[f]!==0&&(i[h]+=f===h?n[f]:n[f]/this.matrix[h][f]);return t$(this.matrix,i),Xc(this,{values:i},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const i of Object.keys(this.values))e[i]=this.values[i]===0?0:-this.values[i];return Xc(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function i(n,s){return n===void 0||n===0?s===void 0||s===0:n===s}for(const n of kd)if(!i(this.values[n],e.values[n]))return!1;return!0}}const Ep="Invalid Interval";function dte(t,e){return!t||!t.isValid?Ui.invalid("missing or invalid start"):!e||!e.isValid?Ui.invalid("missing or invalid end"):e<t?Ui.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}class Ui{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,i=null){if(!e)throw new ir("need to specify a reason the Interval is invalid");const n=e instanceof Qo?e:new Qo(e,i);if(Bi.throwOnInvalid)throw new RQ(n);return new Ui({invalid:n})}static fromDateTimes(e,i){const n=e1(e),s=e1(i),h=dte(n,s);return h??new Ui({start:n,end:s})}static after(e,i){const n=$t.fromDurationLike(i),s=e1(e);return Ui.fromDateTimes(s,s.plus(n))}static before(e,i){const n=$t.fromDurationLike(i),s=e1(e);return Ui.fromDateTimes(s.minus(n),s)}static fromISO(e,i){const[n,s]=(e||"").split("/",2);if(n&&s){let h,f;try{h=Je.fromISO(n,i),f=h.isValid}catch{f=!1}let m,y;try{m=Je.fromISO(s,i),y=m.isValid}catch{y=!1}if(f&&y)return Ui.fromDateTimes(h,m);if(f){const x=$t.fromISO(s,i);if(x.isValid)return Ui.after(h,x)}else if(y){const x=$t.fromISO(n,i);if(x.isValid)return Ui.before(m,x)}}return Ui.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",i){if(!this.isValid)return NaN;const n=this.start.startOf(e,i);let s;return i!=null&&i.useLocaleWeeks?s=this.end.reconfigure({locale:n.locale}):s=this.end,s=s.startOf(e,i),Math.floor(s.diff(n,e).get(e))+(s.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:i}={}){return this.isValid?Ui.fromDateTimes(e||this.s,i||this.e):this}splitAt(...e){if(!this.isValid)return[];const i=e.map(e1).filter(f=>this.contains(f)).sort((f,m)=>f.toMillis()-m.toMillis()),n=[];let{s}=this,h=0;for(;s<this.e;){const f=i[h]||this.e,m=+f>+this.e?this.e:f;n.push(Ui.fromDateTimes(s,m)),s=m,h+=1}return n}splitBy(e){const i=$t.fromDurationLike(e);if(!this.isValid||!i.isValid||i.as("milliseconds")===0)return[];let{s:n}=this,s=1,h;const f=[];for(;n<this.e;){const m=this.start.plus(i.mapUnits(y=>y*s));h=+m>+this.e?this.e:m,f.push(Ui.fromDateTimes(n,h)),n=h,s+=1}return f}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const i=this.s>e.s?this.s:e.s,n=this.e<e.e?this.e:e.e;return i>=n?null:Ui.fromDateTimes(i,n)}union(e){if(!this.isValid)return this;const i=this.s<e.s?this.s:e.s,n=this.e>e.e?this.e:e.e;return Ui.fromDateTimes(i,n)}static merge(e){const[i,n]=e.sort((s,h)=>s.s-h.s).reduce(([s,h],f)=>h?h.overlaps(f)||h.abutsStart(f)?[s,h.union(f)]:[s.concat([h]),f]:[s,f],[[],null]);return n&&i.push(n),i}static xor(e){let i=null,n=0;const s=[],h=e.map(y=>[{time:y.s,type:"s"},{time:y.e,type:"e"}]),f=Array.prototype.concat(...h),m=f.sort((y,x)=>y.time-x.time);for(const y of m)n+=y.type==="s"?1:-1,n===1?i=y.time:(i&&+i!=+y.time&&s.push(Ui.fromDateTimes(i,y.time)),i=null);return Ui.merge(s)}difference(...e){return Ui.xor([this].concat(e)).map(i=>this.intersection(i)).filter(i=>i&&!i.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} â€“ ${this.e.toISO()})`:Ep}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=K2,i={}){return this.isValid?sr.create(this.s.loc.clone(i),e).formatInterval(this):Ep}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:Ep}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Ep}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:Ep}toFormat(e,{separator:i=" â€“ "}={}){return this.isValid?`${this.s.toFormat(e)}${i}${this.e.toFormat(e)}`:Ep}toDuration(e,i){return this.isValid?this.e.diff(this.s,e,i):$t.invalid(this.invalidReason)}mapEndpoints(e){return Ui.fromDateTimes(e(this.s),e(this.e))}}class Jy{static hasDST(e=Bi.defaultZone){const i=Je.now().setZone(e).set({month:12});return!e.isUniversal&&i.offset!==i.set({month:6}).offset}static isValidIANAZone(e){return ua.isValidZone(e)}static normalizeZone(e){return zh(e,Bi.defaultZone)}static getStartOfWeek({locale:e=null,locObj:i=null}={}){return(i||Ut.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:i=null}={}){return(i||Ut.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:i=null}={}){return(i||Ut.create(e)).getWeekendDays().slice()}static months(e="long",{locale:i=null,numberingSystem:n=null,locObj:s=null,outputCalendar:h="gregory"}={}){return(s||Ut.create(i,n,h)).months(e)}static monthsFormat(e="long",{locale:i=null,numberingSystem:n=null,locObj:s=null,outputCalendar:h="gregory"}={}){return(s||Ut.create(i,n,h)).months(e,!0)}static weekdays(e="long",{locale:i=null,numberingSystem:n=null,locObj:s=null}={}){return(s||Ut.create(i,n,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:i=null,numberingSystem:n=null,locObj:s=null}={}){return(s||Ut.create(i,n,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return Ut.create(e).meridiems()}static eras(e="short",{locale:i=null}={}){return Ut.create(i,null,"gregory").eras(e)}static features(){return{relative:xL(),localeWeek:SL()}}}function i$(t,e){const i=s=>s.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),n=i(e)-i(t);return Math.floor($t.fromMillis(n).as("days"))}function pte(t,e,i){const n=[["years",(y,x)=>x.year-y.year],["quarters",(y,x)=>x.quarter-y.quarter+(x.year-y.year)*4],["months",(y,x)=>x.month-y.month+(x.year-y.year)*12],["weeks",(y,x)=>{const E=i$(y,x);return(E-E%7)/7}],["days",i$]],s={},h=t;let f,m;for(const[y,x]of n)i.indexOf(y)>=0&&(f=y,s[y]=x(t,e),m=h.plus(s),m>e?(s[y]--,t=h.plus(s),t>e&&(m=t,s[y]--,t=h.plus(s))):t=m);return[t,s,m,f]}function fte(t,e,i,n){let[s,h,f,m]=pte(t,e,i);const y=e-s,x=i.filter(k=>["hours","minutes","seconds","milliseconds"].indexOf(k)>=0);x.length===0&&(f<e&&(f=s.plus({[m]:1})),f!==s&&(h[m]=(h[m]||0)+y/(f-s)));const E=$t.fromObject(h,n);return x.length>0?$t.fromMillis(y,n).shiftTo(...x).plus(E):E}const gte="missing Intl.DateTimeFormat.formatToParts support";function Lt(t,e=i=>i){return{regex:t,deser:([i])=>e(ree(i))}}const mte="Â ",GL=`[ ${mte}]`,UL=new RegExp(GL,"g");function yte(t){return t.replace(/\./g,"\\.?").replace(UL,GL)}function n$(t){return t.replace(/\./g,"").replace(UL," ").toLowerCase()}function ko(t,e){return t===null?null:{regex:RegExp(t.map(yte).join("|")),deser:([i])=>t.findIndex(n=>n$(i)===n$(n))+e}}function r$(t,e){return{regex:t,deser:([,i,n])=>k3(i,n),groups:e}}function Yy(t){return{regex:t,deser:([e])=>e}}function vte(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function bte(t,e){const i=$o(e),n=$o(e,"{2}"),s=$o(e,"{3}"),h=$o(e,"{4}"),f=$o(e,"{6}"),m=$o(e,"{1,2}"),y=$o(e,"{1,3}"),x=$o(e,"{1,6}"),E=$o(e,"{1,9}"),k=$o(e,"{2,4}"),I=$o(e,"{4,6}"),P=j=>({regex:RegExp(vte(j.val)),deser:([H])=>H,literal:!0}),D=(j=>{if(t.literal)return P(j);switch(j.val){case"G":return ko(e.eras("short"),0);case"GG":return ko(e.eras("long"),0);case"y":return Lt(x);case"yy":return Lt(k,G9);case"yyyy":return Lt(h);case"yyyyy":return Lt(I);case"yyyyyy":return Lt(f);case"M":return Lt(m);case"MM":return Lt(n);case"MMM":return ko(e.months("short",!0),1);case"MMMM":return ko(e.months("long",!0),1);case"L":return Lt(m);case"LL":return Lt(n);case"LLL":return ko(e.months("short",!1),1);case"LLLL":return ko(e.months("long",!1),1);case"d":return Lt(m);case"dd":return Lt(n);case"o":return Lt(y);case"ooo":return Lt(s);case"HH":return Lt(n);case"H":return Lt(m);case"hh":return Lt(n);case"h":return Lt(m);case"mm":return Lt(n);case"m":return Lt(m);case"q":return Lt(m);case"qq":return Lt(n);case"s":return Lt(m);case"ss":return Lt(n);case"S":return Lt(y);case"SSS":return Lt(s);case"u":return Yy(E);case"uu":return Yy(m);case"uuu":return Lt(i);case"a":return ko(e.meridiems(),0);case"kkkk":return Lt(h);case"kk":return Lt(k,G9);case"W":return Lt(m);case"WW":return Lt(n);case"E":case"c":return Lt(i);case"EEE":return ko(e.weekdays("short",!1),1);case"EEEE":return ko(e.weekdays("long",!1),1);case"ccc":return ko(e.weekdays("short",!0),1);case"cccc":return ko(e.weekdays("long",!0),1);case"Z":case"ZZ":return r$(new RegExp(`([+-]${m.source})(?::(${n.source}))?`),2);case"ZZZ":return r$(new RegExp(`([+-]${m.source})(${n.source})?`),2);case"z":return Yy(/[a-z_+-/]{1,256}?/i);case" ":return Yy(/[^\S\n\r]/);default:return P(j)}})(t)||{invalidReason:gte};return D.token=t,D}const wte={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function _te(t,e,i){const{type:n,value:s}=t;if(n==="literal"){const y=/^\s+$/.test(s);return{literal:!y,val:y?" ":s}}const h=e[n];let f=n;n==="hour"&&(e.hour12!=null?f=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?f="hour12":f="hour24":f=i.hour12?"hour12":"hour24");let m=wte[f];if(typeof m=="object"&&(m=m[h]),m)return{literal:!1,val:m}}function xte(t){return[`^${t.map(i=>i.regex).reduce((i,n)=>`${i}(${n.source})`,"")}$`,t]}function Ste(t,e,i){const n=t.match(e);if(n){const s={};let h=1;for(const f in i)if(s0(i,f)){const m=i[f],y=m.groups?m.groups+1:1;!m.literal&&m.token&&(s[m.token.val[0]]=m.deser(n.slice(h,h+y))),h+=y}return[n,s]}else return[n,{}]}function Tte(t){const e=h=>{switch(h){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let i=null,n;return rt(t.z)||(i=ua.create(t.z)),rt(t.Z)||(i||(i=new or(t.Z)),n=t.Z),rt(t.q)||(t.M=(t.q-1)*3+1),rt(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),rt(t.u)||(t.S=aE(t.u)),[Object.keys(t).reduce((h,f)=>{const m=e(f);return m&&(h[m]=t[f]),h},{}),i,n]}let f5=null;function Ete(){return f5||(f5=Je.fromMillis(1555555555555)),f5}function Mte(t,e){if(t.literal)return t;const i=sr.macroTokenToFormatOpts(t.val),n=qL(i,e);return n==null||n.includes(void 0)?t:n}function BL(t,e){return Array.prototype.concat(...t.map(i=>Mte(i,e)))}class HL{constructor(e,i){if(this.locale=e,this.format=i,this.tokens=BL(sr.parseFormat(i),e),this.units=this.tokens.map(n=>bte(n,e)),this.disqualifyingUnit=this.units.find(n=>n.invalidReason),!this.disqualifyingUnit){const[n,s]=xte(this.units);this.regex=RegExp(n,"i"),this.handlers=s}}explainFromTokens(e){if(this.isValid){const[i,n]=Ste(e,this.regex,this.handlers),[s,h,f]=n?Tte(n):[null,null,void 0];if(s0(n,"a")&&s0(n,"H"))throw new _f("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:i,matches:n,result:s,zone:h,specificOffset:f}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function VL(t,e,i){return new HL(t,i).explainFromTokens(e)}function $te(t,e,i){const{result:n,zone:s,specificOffset:h,invalidReason:f}=VL(t,e,i);return[n,s,h,f]}function qL(t,e){if(!t)return null;const n=sr.create(e,t).dtFormatter(Ete()),s=n.formatToParts(),h=n.resolvedOptions();return s.map(f=>_te(f,t,h))}const g5="Invalid DateTime",s$=864e13;function L1(t){return new Qo("unsupported zone",`the zone "${t.name}" is not supported`)}function m5(t){return t.weekData===null&&(t.weekData=Z2(t.c)),t.weekData}function y5(t){return t.localWeekData===null&&(t.localWeekData=Z2(t.c,t.loc.getMinDaysInFirstWeek(),t.loc.getStartOfWeek())),t.localWeekData}function ku(t,e){const i={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new Je({...i,...e,old:i})}function WL(t,e,i){let n=t-e*60*1e3;const s=i.offset(n);if(e===s)return[n,e];n-=(s-e)*60*1e3;const h=i.offset(n);return s===h?[n,s]:[t-Math.min(s,h)*60*1e3,Math.max(s,h)]}function Xy(t,e){t+=e*60*1e3;const i=new Date(t);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:i.getUTCHours(),minute:i.getUTCMinutes(),second:i.getUTCSeconds(),millisecond:i.getUTCMilliseconds()}}function mb(t,e,i){return WL($3(t),e,i)}function o$(t,e){const i=t.o,n=t.c.year+Math.trunc(e.years),s=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,h={...t.c,year:n,month:s,day:Math.min(t.c.day,J2(n,s))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},f=$t.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),m=$3(h);let[y,x]=WL(m,i,t.zone);return f!==0&&(y+=f,x=t.zone.offset(y)),{ts:y,o:x}}function Mp(t,e,i,n,s,h){const{setZone:f,zone:m}=i;if(t&&Object.keys(t).length!==0||e){const y=e||m,x=Je.fromObject(t,{...i,zone:y,specificOffset:h});return f?x:x.setZone(m)}else return Je.invalid(new Qo("unparsable",`the input "${s}" can't be parsed as ${n}`))}function Qy(t,e,i=!0){return t.isValid?sr.create(Ut.create("en-US"),{allowZ:i,forceSimple:!0}).formatDateTimeFromString(t,e):null}function v5(t,e){const i=t.c.year>9999||t.c.year<0;let n="";return i&&t.c.year>=0&&(n+="+"),n+=rn(t.c.year,i?6:4),e?(n+="-",n+=rn(t.c.month),n+="-",n+=rn(t.c.day)):(n+=rn(t.c.month),n+=rn(t.c.day)),n}function a$(t,e,i,n,s,h){let f=rn(t.c.hour);return e?(f+=":",f+=rn(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!i)&&(f+=":")):f+=rn(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!i)&&(f+=rn(t.c.second),(t.c.millisecond!==0||!n)&&(f+=".",f+=rn(t.c.millisecond,3))),s&&(t.isOffsetFixed&&t.offset===0&&!h?f+="Z":t.o<0?(f+="-",f+=rn(Math.trunc(-t.o/60)),f+=":",f+=rn(Math.trunc(-t.o%60))):(f+="+",f+=rn(Math.trunc(t.o/60)),f+=":",f+=rn(Math.trunc(t.o%60)))),h&&(f+="["+t.zone.ianaName+"]"),f}const KL={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},kte={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Cte={ordinal:1,hour:0,minute:0,second:0,millisecond:0},ZL=["year","month","day","hour","minute","second","millisecond"],Ite=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],Ate=["year","ordinal","hour","minute","second","millisecond"];function Ote(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new JN(t);return e}function l$(t){switch(t.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return Ote(t)}}function Pte(t){return vb[t]||(yb===void 0&&(yb=Bi.now()),vb[t]=t.offset(yb)),vb[t]}function c$(t,e){const i=zh(e.zone,Bi.defaultZone);if(!i.isValid)return Je.invalid(L1(i));const n=Ut.fromObject(e);let s,h;if(rt(t.year))s=Bi.now();else{for(const y of ZL)rt(t[y])&&(t[y]=KL[y]);const f=wL(t)||_L(t);if(f)return Je.invalid(f);const m=Pte(i);[s,h]=mb(t,m,i)}return new Je({ts:s,zone:i,loc:n,o:h})}function h$(t,e,i){const n=rt(i.round)?!0:i.round,s=(f,m)=>(f=lE(f,n||i.calendary?0:2,!0),e.loc.clone(i).relFormatter(i).format(f,m)),h=f=>i.calendary?e.hasSame(t,f)?0:e.startOf(f).diff(t.startOf(f),f).get(f):e.diff(t,f).get(f);if(i.unit)return s(h(i.unit),i.unit);for(const f of i.units){const m=h(f);if(Math.abs(m)>=1)return s(m,f)}return s(t>e?-0:0,i.units[i.units.length-1])}function u$(t){let e={},i;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],i=Array.from(t).slice(0,t.length-1)):i=Array.from(t),[e,i]}let yb,vb={};class Je{constructor(e){const i=e.zone||Bi.defaultZone;let n=e.invalid||(Number.isNaN(e.ts)?new Qo("invalid input"):null)||(i.isValid?null:L1(i));this.ts=rt(e.ts)?Bi.now():e.ts;let s=null,h=null;if(!n)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(i))[s,h]=[e.old.c,e.old.o];else{const m=Zh(e.o)&&!e.old?e.o:i.offset(this.ts);s=Xy(this.ts,m),n=Number.isNaN(s.year)?new Qo("invalid input"):null,s=n?null:s,h=n?null:m}this._zone=i,this.loc=e.loc||Ut.create(),this.invalid=n,this.weekData=null,this.localWeekData=null,this.c=s,this.o=h,this.isLuxonDateTime=!0}static now(){return new Je({})}static local(){const[e,i]=u$(arguments),[n,s,h,f,m,y,x]=i;return c$({year:n,month:s,day:h,hour:f,minute:m,second:y,millisecond:x},e)}static utc(){const[e,i]=u$(arguments),[n,s,h,f,m,y,x]=i;return e.zone=or.utcInstance,c$({year:n,month:s,day:h,hour:f,minute:m,second:y,millisecond:x},e)}static fromJSDate(e,i={}){const n=cee(e)?e.valueOf():NaN;if(Number.isNaN(n))return Je.invalid("invalid input");const s=zh(i.zone,Bi.defaultZone);return s.isValid?new Je({ts:n,zone:s,loc:Ut.fromObject(i)}):Je.invalid(L1(s))}static fromMillis(e,i={}){if(Zh(e))return e<-s$||e>s$?Je.invalid("Timestamp out of range"):new Je({ts:e,zone:zh(i.zone,Bi.defaultZone),loc:Ut.fromObject(i)});throw new ir(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,i={}){if(Zh(e))return new Je({ts:e*1e3,zone:zh(i.zone,Bi.defaultZone),loc:Ut.fromObject(i)});throw new ir("fromSeconds requires a numerical input")}static fromObject(e,i={}){e=e||{};const n=zh(i.zone,Bi.defaultZone);if(!n.isValid)return Je.invalid(L1(n));const s=Ut.fromObject(i),h=Y2(e,l$),{minDaysInFirstWeek:f,startOfWeek:m}=Z8(h,s),y=Bi.now(),x=rt(i.specificOffset)?n.offset(y):i.specificOffset,E=!rt(h.ordinal),k=!rt(h.year),I=!rt(h.month)||!rt(h.day),P=k||I,L=h.weekYear||h.weekNumber;if((P||E)&&L)throw new _f("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(I&&E)throw new _f("Can't mix ordinal dates with month/day");const D=L||h.weekday&&!P;let j,H,W=Xy(y,x);D?(j=Ite,H=kte,W=Z2(W,f,m)):E?(j=Ate,H=Cte,W=p5(W)):(j=ZL,H=KL);let Z=!1;for(const be of j){const Se=h[be];rt(Se)?Z?h[be]=H[be]:h[be]=W[be]:Z=!0}const Y=D?oee(h,f,m):E?aee(h):wL(h),te=Y||_L(h);if(te)return Je.invalid(te);const ie=D?W8(h,f,m):E?K8(h):h,[le,pe]=mb(ie,x,n),ve=new Je({ts:le,zone:n,o:pe,loc:s});return h.weekday&&P&&e.weekday!==ve.weekday?Je.invalid("mismatched weekday",`you can't specify both a weekday of ${h.weekday} and a date of ${ve.toISO()}`):ve.isValid?ve:Je.invalid(ve.invalid)}static fromISO(e,i={}){const[n,s]=Xee(e);return Mp(n,s,i,"ISO 8601",e)}static fromRFC2822(e,i={}){const[n,s]=Qee(e);return Mp(n,s,i,"RFC 2822",e)}static fromHTTP(e,i={}){const[n,s]=ete(e);return Mp(n,s,i,"HTTP",i)}static fromFormat(e,i,n={}){if(rt(e)||rt(i))throw new ir("fromFormat requires an input string and a format");const{locale:s=null,numberingSystem:h=null}=n,f=Ut.fromOpts({locale:s,numberingSystem:h,defaultToEN:!0}),[m,y,x,E]=$te(f,e,i);return E?Je.invalid(E):Mp(m,y,n,`format ${i}`,e,x)}static fromString(e,i,n={}){return Je.fromFormat(e,i,n)}static fromSQL(e,i={}){const[n,s]=ate(e);return Mp(n,s,i,"SQL",e)}static invalid(e,i=null){if(!e)throw new ir("need to specify a reason the DateTime is invalid");const n=e instanceof Qo?e:new Qo(e,i);if(Bi.throwOnInvalid)throw new PQ(n);return new Je({invalid:n})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,i={}){const n=qL(e,Ut.fromObject(i));return n?n.map(s=>s?s.val:null).join(""):null}static expandFormat(e,i={}){return BL(sr.parseFormat(e),Ut.fromObject(i)).map(s=>s.val).join("")}static resetCache(){yb=void 0,vb={}}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?m5(this).weekYear:NaN}get weekNumber(){return this.isValid?m5(this).weekNumber:NaN}get weekday(){return this.isValid?m5(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?y5(this).weekday:NaN}get localWeekNumber(){return this.isValid?y5(this).weekNumber:NaN}get localWeekYear(){return this.isValid?y5(this).weekYear:NaN}get ordinal(){return this.isValid?p5(this.c).ordinal:NaN}get monthShort(){return this.isValid?Jy.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Jy.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Jy.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Jy.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,i=6e4,n=$3(this.c),s=this.zone.offset(n-e),h=this.zone.offset(n+e),f=this.zone.offset(n-s*i),m=this.zone.offset(n-h*i);if(f===m)return[this];const y=n-f*i,x=n-m*i,E=Xy(y,f),k=Xy(x,m);return E.hour===k.hour&&E.minute===k.minute&&E.second===k.second&&E.millisecond===k.millisecond?[ku(this,{ts:y}),ku(this,{ts:x})]:[this]}get isInLeapYear(){return oy(this.year)}get daysInMonth(){return J2(this.year,this.month)}get daysInYear(){return this.isValid?Rf(this.year):NaN}get weeksInWeekYear(){return this.isValid?mm(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?mm(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:i,numberingSystem:n,calendar:s}=sr.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:i,numberingSystem:n,outputCalendar:s}}toUTC(e=0,i={}){return this.setZone(or.instance(e),i)}toLocal(){return this.setZone(Bi.defaultZone)}setZone(e,{keepLocalTime:i=!1,keepCalendarTime:n=!1}={}){if(e=zh(e,Bi.defaultZone),e.equals(this.zone))return this;if(e.isValid){let s=this.ts;if(i||n){const h=e.offset(this.ts),f=this.toObject();[s]=mb(f,h,e)}return ku(this,{ts:s,zone:e})}else return Je.invalid(L1(e))}reconfigure({locale:e,numberingSystem:i,outputCalendar:n}={}){const s=this.loc.clone({locale:e,numberingSystem:i,outputCalendar:n});return ku(this,{loc:s})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const i=Y2(e,l$),{minDaysInFirstWeek:n,startOfWeek:s}=Z8(i,this.loc),h=!rt(i.weekYear)||!rt(i.weekNumber)||!rt(i.weekday),f=!rt(i.ordinal),m=!rt(i.year),y=!rt(i.month)||!rt(i.day),x=m||y,E=i.weekYear||i.weekNumber;if((x||f)&&E)throw new _f("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(y&&f)throw new _f("Can't mix ordinal dates with month/day");let k;h?k=W8({...Z2(this.c,n,s),...i},n,s):rt(i.ordinal)?(k={...this.toObject(),...i},rt(i.day)&&(k.day=Math.min(J2(k.year,k.month),k.day))):k=K8({...p5(this.c),...i});const[I,P]=mb(k,this.o,this.zone);return ku(this,{ts:I,o:P})}plus(e){if(!this.isValid)return this;const i=$t.fromDurationLike(e);return ku(this,o$(this,i))}minus(e){if(!this.isValid)return this;const i=$t.fromDurationLike(e).negate();return ku(this,o$(this,i))}startOf(e,{useLocaleWeeks:i=!1}={}){if(!this.isValid)return this;const n={},s=$t.normalizeUnit(e);switch(s){case"years":n.month=1;case"quarters":case"months":n.day=1;case"weeks":case"days":n.hour=0;case"hours":n.minute=0;case"minutes":n.second=0;case"seconds":n.millisecond=0;break}if(s==="weeks")if(i){const h=this.loc.getStartOfWeek(),{weekday:f}=this;f<h&&(n.weekNumber=this.weekNumber-1),n.weekday=h}else n.weekday=1;if(s==="quarters"){const h=Math.ceil(this.month/3);n.month=(h-1)*3+1}return this.set(n)}endOf(e,i){return this.isValid?this.plus({[e]:1}).startOf(e,i).minus(1):this}toFormat(e,i={}){return this.isValid?sr.create(this.loc.redefaultToEN(i)).formatDateTimeFromString(this,e):g5}toLocaleString(e=K2,i={}){return this.isValid?sr.create(this.loc.clone(i),e).formatDateTime(this):g5}toLocaleParts(e={}){return this.isValid?sr.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:i=!1,suppressMilliseconds:n=!1,includeOffset:s=!0,extendedZone:h=!1}={}){if(!this.isValid)return null;const f=e==="extended";let m=v5(this,f);return m+="T",m+=a$(this,f,i,n,s,h),m}toISODate({format:e="extended"}={}){return this.isValid?v5(this,e==="extended"):null}toISOWeekDate(){return Qy(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:i=!1,includeOffset:n=!0,includePrefix:s=!1,extendedZone:h=!1,format:f="extended"}={}){return this.isValid?(s?"T":"")+a$(this,f==="extended",i,e,n,h):null}toRFC2822(){return Qy(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Qy(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?v5(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:i=!1,includeOffsetSpace:n=!0}={}){let s="HH:mm:ss.SSS";return(i||e)&&(n&&(s+=" "),i?s+="z":e&&(s+="ZZ")),Qy(this,s,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():g5}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const i={...this.c};return e.includeConfig&&(i.outputCalendar=this.outputCalendar,i.numberingSystem=this.loc.numberingSystem,i.locale=this.loc.locale),i}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,i="milliseconds",n={}){if(!this.isValid||!e.isValid)return $t.invalid("created by diffing an invalid DateTime");const s={locale:this.locale,numberingSystem:this.numberingSystem,...n},h=hee(i).map($t.normalizeUnit),f=e.valueOf()>this.valueOf(),m=f?this:e,y=f?e:this,x=fte(m,y,h,s);return f?x.negate():x}diffNow(e="milliseconds",i={}){return this.diff(Je.now(),e,i)}until(e){return this.isValid?Ui.fromDateTimes(this,e):this}hasSame(e,i,n){if(!this.isValid)return!1;const s=e.valueOf(),h=this.setZone(e.zone,{keepLocalTime:!0});return h.startOf(i,n)<=s&&s<=h.endOf(i,n)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const i=e.base||Je.fromObject({},{zone:this.zone}),n=e.padding?this<i?-e.padding:e.padding:0;let s=["years","months","days","hours","minutes","seconds"],h=e.unit;return Array.isArray(e.unit)&&(s=e.unit,h=void 0),h$(i,this.plus(n),{...e,numeric:"always",units:s,unit:h})}toRelativeCalendar(e={}){return this.isValid?h$(e.base||Je.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(Je.isDateTime))throw new ir("min requires all arguments be DateTimes");return J8(e,i=>i.valueOf(),Math.min)}static max(...e){if(!e.every(Je.isDateTime))throw new ir("max requires all arguments be DateTimes");return J8(e,i=>i.valueOf(),Math.max)}static fromFormatExplain(e,i,n={}){const{locale:s=null,numberingSystem:h=null}=n,f=Ut.fromOpts({locale:s,numberingSystem:h,defaultToEN:!0});return VL(f,e,i)}static fromStringExplain(e,i,n={}){return Je.fromFormatExplain(e,i,n)}static buildFormatParser(e,i={}){const{locale:n=null,numberingSystem:s=null}=i,h=Ut.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0});return new HL(h,e)}static fromFormatParser(e,i,n={}){if(rt(e)||rt(i))throw new ir("fromFormatParser requires an input string and a format parser");const{locale:s=null,numberingSystem:h=null}=n,f=Ut.fromOpts({locale:s,numberingSystem:h,defaultToEN:!0});if(!f.equals(i.locale))throw new ir(`fromFormatParser called with a locale of ${f}, but the format parser was created for ${i.locale}`);const{result:m,zone:y,specificOffset:x,invalidReason:E}=i.explainFromTokens(e);return E?Je.invalid(E):Mp(m,y,n,`format ${i.format}`,e,x)}static get DATE_SHORT(){return K2}static get DATE_MED(){return YN}static get DATE_MED_WITH_WEEKDAY(){return LQ}static get DATE_FULL(){return XN}static get DATE_HUGE(){return QN}static get TIME_SIMPLE(){return eL}static get TIME_WITH_SECONDS(){return tL}static get TIME_WITH_SHORT_OFFSET(){return iL}static get TIME_WITH_LONG_OFFSET(){return nL}static get TIME_24_SIMPLE(){return rL}static get TIME_24_WITH_SECONDS(){return sL}static get TIME_24_WITH_SHORT_OFFSET(){return oL}static get TIME_24_WITH_LONG_OFFSET(){return aL}static get DATETIME_SHORT(){return lL}static get DATETIME_SHORT_WITH_SECONDS(){return cL}static get DATETIME_MED(){return hL}static get DATETIME_MED_WITH_SECONDS(){return uL}static get DATETIME_MED_WITH_WEEKDAY(){return DQ}static get DATETIME_FULL(){return dL}static get DATETIME_FULL_WITH_SECONDS(){return pL}static get DATETIME_HUGE(){return fL}static get DATETIME_HUGE_WITH_SECONDS(){return gL}}function e1(t){if(Je.isDateTime(t))return t;if(t&&t.valueOf&&Zh(t.valueOf()))return Je.fromJSDate(t);if(t&&typeof t=="object")return Je.fromObject(t);throw new ir(`Unknown datetime argument: ${t}, of type ${typeof t}`)}const yl="system",dE="unknown",ym="UTC",Rte=Intl.DateTimeFormat().resolvedOptions().timeZone,Nte="shortOffset";function Lte(t){return"timeZoneIANA"in t}function Dte(t){return t.startsWith("UTC")}function jMe(t,e=!1){return{json:{read:{source:t,reader:(i,n)=>n[t]?zte(n[t]):null},write:!!e&&{allowNull:!0,writer(i,n){n[t]=i?Fte(i):null}}}}}function zte(t,e=yl){return t?Lte(t)?t.timeZoneIANA:jte(t,e):e}function Fte(t){return{timeZoneIANA:t}}function jte(t,e=yl){if(!t||!N8.has(t.timeZone))return e;const i=N8.get(t.timeZone);return Dte(t.timeZone)||t.respectsDaylightSaving?i:Gte(i)}function Gte(t){const e=Je.local().setZone(t),i=Math.min(e.set({month:1,day:1}).offset,e.set({month:5}).offset);return i===0?"Etc/UTC":`Etc/GMT${or.instance(-i).formatOffset(0,"narrow")}`}function GMe(t,e,i,n,s){if(e&&s==="date")return{timeZone:ym,timeZoneName:void 0};const h=n.timeStyle||n.hour,f=i===dE;return{timeZone:f?s==="timestamp-offset"?void 0:t??ym:i,timeZoneName:f&&h?Nte:void 0}}function Ute(t){const e=new Set(["etc/utc","etc/gmt","gmt"]),i=new Set(Intl.supportedValuesOf("timeZone").map(n=>n.toLowerCase()));return t===yl||t===dE||e.has(t.toLowerCase())||i.has(t.toLowerCase())}const Bte={year:void 0,month:void 0,day:void 0,weekday:void 0},Hte={hour:void 0,minute:void 0,second:void 0},JL={timeZone:ym},Sa={year:"numeric",month:"numeric",day:"numeric"},t1={year:"numeric",month:"long",day:"numeric"},i1={year:"numeric",month:"short",day:"numeric"},n1={year:"numeric",month:"long",weekday:"long",day:"numeric"},Ph={hour:"numeric",minute:"numeric"},zu={...Ph,second:"numeric"},YL={hourCycle:"h23"},r1={...Ph,...YL},s1={...zu,...YL},XL={"short-date":Sa,"short-date-short-time":{...Sa,...Ph},"short-date-short-time-24":{...Sa,...r1},"short-date-long-time":{...Sa,...zu},"short-date-long-time-24":{...Sa,...s1},"short-date-le":Sa,"short-date-le-short-time":{...Sa,...Ph},"short-date-le-short-time-24":{...Sa,...r1},"short-date-le-long-time":{...Sa,...zu},"short-date-le-long-time-24":{...Sa,...s1},"long-month-day-year":t1,"long-month-day-year-short-time":{...t1,...Ph},"long-month-day-year-short-time-24":{...t1,...r1},"long-month-day-year-long-time":{...t1,...zu},"long-month-day-year-long-time-24":{...t1,...s1},"day-short-month-year":i1,"day-short-month-year-short-time":{...i1,...Ph},"day-short-month-year-short-time-24":{...i1,...r1},"day-short-month-year-long-time":{...i1,...zu},"day-short-month-year-long-time-24":{...i1,...s1},"long-date":n1,"long-date-short-time":{...n1,...Ph},"long-date-short-time-24":{...n1,...r1},"long-date-long-time":{...n1,...zu},"long-date-long-time-24":{...n1,...s1},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":Ph,"long-time":zu},Vte=Ar()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),QL={ar:"ar-u-nu-latn-ca-gregory"};let U9=new WeakMap;const I3=XL["short-date-short-time"];function qte(t){let e=U9.get(t);if(!e){const i=Zr(),n=QL[i]||i,s=pE(t.timeZone??yl),h={...t,timeZone:s};e=new Intl.DateTimeFormat(n,h),U9.set(t,e)}return e}function UMe(t){return XL[t]}function au(t,e=I3){return qte(e).format(t)}function BMe(t,e=I3){return au(new Date(t),{...e,...JL,...Hte})}function HMe(t,e=I3){return au(new Date(`1970-01-01T${t}Z`),{...e,...JL,...Bte})}function VMe(t,e=I3){if(e.timeZone)return au(new Date(t),e);const i=Je.fromISO(t,{setZone:!0}),n=Zr(),s=QL[n]??n,h=i.offset===0?ym:e.timeZone,f={...e,timeZone:h};return i.toLocaleString(f,{locale:s})}function pE(t){switch(t){case yl:return Rte;case dE:return ym;default:return t}}nE(()=>{U9=new WeakMap});const Wte={ar:"ar-u-nu-latn"};let bb=new WeakMap,eD={};function B9(t){const e=t||eD;if(!bb.has(e)){const i=Zr(),n=Wte[Zr()]||i;bb.set(e,new Intl.NumberFormat(n,t))}return bb.get(e)}function qMe(t={}){const e={};return t.digitSeparator!=null&&(e.useGrouping=t.digitSeparator),t.places!=null&&(e.minimumFractionDigits=e.maximumFractionDigits=t.places),e}function X2(t,e){return Object.is(t,-0)&&(t=0),B9(e).format(t)}function WMe(t,e=Zr()){var n,s;if(!t)return null;let i=d$.get(e);if(!i){const h=B9().formatToParts(12345.6),f=[...B9({useGrouping:!1}).format(9876543210)].reverse(),m=new Map(f.map((P,L)=>[P,L])),y=new RegExp(`[${(n=h.find(P=>P.type==="group"))==null?void 0:n.value}]`,"g"),x=new RegExp(`[${(s=h.find(P=>P.type==="decimal"))==null?void 0:s.value}]`),E=new RegExp(`[${f.join("")}]`,"g"),k=/[\u200E\u200F\u202A\u202B\u202C\u202D\u202E\u2066\u2067\u2068\u2069\u061C]/g,I=/[-\u2212\u2013\u2014\u2015]/g;i=P=>{if((P=P.trim().replaceAll(y,"").replace(x,".").replace(E,D=>String(m.get(D))).replaceAll(k,"").replaceAll(I,"-"))==="")return null;const L=Number(P);return isNaN(L)?null:L},d$.set(e,i)}return i(t)}nE(()=>{bb=new WeakMap,eD={}});const d$=new Map,tD=()=>Ae.getLogger("esri.intl.substitute");function fE(t,e,i={}){const{format:n={}}=i;return uT(t,s=>Kte(s,e,n))}function Kte(t,e,i){let n,s;const h=t.indexOf(":");if(h===-1?n=t.trim():(n=t.slice(0,h).trim(),s=t.slice(h+1).trim()),!n)return"";const f=Km(n,e);if(f==null)return"";const m=(s?i==null?void 0:i[s]:null)??(i==null?void 0:i[n]);return m?Zte(f,m):s?Jte(f,s):gE(f)}function Zte(t,e){switch(e.type){case"date":return au(t,e.intlOptions);case"number":return X2(t,e.intlOptions);default:return tD().warn("missing format descriptor for key {key}"),gE(t)}}function Jte(t,e){switch(e.toLowerCase()){case"dateformat":return au(t);case"numberformat":return X2(t);default:return tD().warn(`inline format is unsupported since 4.12: ${e}`),/^(dateformat|datestring)/i.test(e)?au(t):/^numberformat/i.test(e)?X2(t):gE(t)}}function gE(t){switch(typeof t){case"string":return t;case"number":return X2(t);case"boolean":return""+t;default:return t instanceof Date?au(t):""}}const p$=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,Yte={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function f$(t){return t in Yte}const D1=[],Lf=new Map;function g$(t){for(const e of Lf.keys())iD(t.pattern,e)&&Lf.delete(e)}function Xte(t){return D1.includes(t)||(g$(t),D1.unshift(t)),ct(()=>{const e=D1.indexOf(t);e>-1&&(D1.splice(e,1),g$(t))})}async function mE(t){const e=Zr();Lf.has(t)||Lf.set(t,eie(t,e));const i=Lf.get(t);return i&&await tie.add(i),i}function Qte(t){if(!p$.test(t))return null;const e=p$.exec(t);if(e===null)return null;const[,i,n]=e,s=i+(n?"-"+n.toUpperCase():"");return f$(s)?s:f$(i)?i:null}async function eie(t,e){const i=[];for(const n of D1)if(iD(n.pattern,t))try{return await n.fetchMessageBundle(t,e)}catch(s){i.push(s)}throw i.length?new ce("intl:message-bundle-error",`Errors occurred while loading "${t}"`,{errors:i}):new ce("intl:no-message-bundle-loader",`No loader found for message bundle "${t}"`)}function iD(t,e){return typeof t=="string"?e.startsWith(t):t.test(e)}nE(()=>{Lf.clear()});const tie=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(t){return this._increase(),t.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=Rs())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function iie(t,e,i,n){const s=e.exec(i);if(!s)throw new ce("esri-intl:invalid-bundle",`Bundle id "${i}" is not compatible with the pattern "${e}"`);const h=s[1]?`${s[1]}/`:"",f=s[2],m=Qte(n),y=`${h}${f}.json`,x=m?`${h}${f}_${m}.json`:y;let E;try{E=await m$(t(x))}catch(k){if(x===y)throw new ce("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:k});try{E=await m$(t(y))}catch(I){throw new ce("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:I})}}return E}async function m$(t){if(y$.fetchBundleAsset!=null)return y$.fetchBundleAsset(t);const e=await ki(t,{responseType:"text"});return JSON.parse(e.data)}let nie=class{constructor({base:e="",pattern:i,location:n=new URL(window.location.href)}){let s;s=typeof n=="string"?h=>new URL(h,new URL(n,window.location.href)).href:n instanceof URL?h=>new URL(h,n).href:n,this.pattern=typeof i=="string"?new RegExp(`^${i}`):i,this.getAssetUrl=s,e=e?e.endsWith("/")?e:e+"/":"",this.matcher=new RegExp(`^${e}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(e,i){return iie(this.getAssetUrl,this.matcher,e,i)}};function rie(t){return new nie(t)}const y$={};Xte(rie({pattern:"esri/",location:xt}));const v$={};function sie(t){var i;const e={async:t.async,isDebug:t.isDebug,locale:t.locale,baseUrl:t.baseUrl,has:{...t.has},map:{...t.map},packages:((i=t.packages)==null?void 0:i.slice())||[],paths:{...v$.paths,...t.paths}};return t.hasOwnProperty("async")||(e.async=!0),t.hasOwnProperty("isDebug")||(e.isDebug=!1),t.baseUrl||(e.baseUrl=v$.baseUrl),e}let oie=class{constructor(){const e=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(i=>{this[i]=(...n)=>e[i](...n)})}},wb=class{constructor(){this._dispatcher=new oie,this._workerPostMessage({type:$n.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener("message",e)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(e){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener("messageerror",e)}get onerror(){return this._onerrorHandler}set onerror(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener("error",e)}postMessage(e){Yf(()=>{this._workerMessageHandler(new MessageEvent("message",{data:e}))})}dispatchEvent(e){return this._dispatcher.dispatchEvent(e)}addEventListener(e,i,n){this._dispatcher.addEventListener(e,i,n)}removeEventListener(e,i,n){this._dispatcher.removeEventListener(e,i,n)}_workerPostMessage(e){Yf(()=>{this.dispatchEvent(new MessageEvent("message",{data:e}))})}async _workerMessageHandler(e){const i=gm(e);if(i&&i.type===$n.OPEN){const{modulePath:n,jobId:s}=i;let h=await ou.loadWorker(n);h||(h=await import(n));const f=ou.connect(h);this._workerPostMessage({type:$n.OPENED,jobId:s,data:f})}}};const H9=()=>Ae.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:aie}=$n,lie='let globalId=0;const outgoing=new Map,configuration={CONFIGURATION};self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;let s=null;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());s=()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))},t.addEventListener("abort",s)}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})})).finally((()=>{t&&t.removeEventListener("abort",s)}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\nModules version: ${r}\nAssets version: ${n??s}\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let ev,tv;const b$="Failed to create Worker. Fallback to execute module in main thread";async function cie(){if(!de("esri-workers"))return w$(new wb);if(!ev&&!tv)try{const e=lie.split("{CONFIGURATION}").join(hie());ev=URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}catch(e){tv=e||{}}let t;if(ev)try{t=new Worker(ev,{name:"esri-worker-"+uie++})}catch{H9().warn(b$,tv),t=new wb}else H9().warn(b$,tv),t=new wb;return w$(t)}async function w$(t){return new Promise(e=>{function i(s){const h=gm(s);h&&h.type===aie&&(t.removeEventListener("message",i),t.removeEventListener("error",n),e(t))}function n(s){s.preventDefault(),t.removeEventListener("message",i),t.removeEventListener("error",n),H9().warn("Failed to create Worker. Fallback to execute module in main thread",s),(t=new wb).addEventListener("message",i),t.addEventListener("error",n)}t.addEventListener("message",i),t.addEventListener("error",n)})}function hie(){let t;if(_t.default!=null){const s={..._t};delete s.default,t=JSON.parse(JSON.stringify(s))}else t=JSON.parse(JSON.stringify(_t));t.assetsPath=lo(t.assetsPath),t.defaultAssetsPath=t.defaultAssetsPath?lo(t.defaultAssetsPath):void 0,t.request.interceptors=[],t.log.interceptors=[],t.locale=Zr(),t.has={"esri-csp-restrictions":de("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":de("esri-2d-update-debug"),"esri-2d-log-updating":de("esri-2d-log-updating"),"featurelayer-pbf":de("featurelayer-pbf"),"featurelayer-fast-triangulation-enabled":de("featurelayer-fast-triangulation-enabled"),"featurelayer-simplify-thresholds":de("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":de("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":de("featurelayer-simplify-mobile-factor"),"featurelayer-query-max-depth":de("featurelayer-query-max-depth"),"featurelayer-query-pausing-enabled":de("featurelayer-query-pausing-enabled"),"featurelayer-snapshot-enabled":de("featurelayer-snapshot-enabled"),"esri-atomics":de("esri-atomics"),"esri-shared-array-buffer":de("esri-shared-array-buffer"),"esri-tiles-debug":de("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":de("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":de("feature-polyline-generalization-factor"),"host-webworker":1},t.workers.loaderUrl&&(t.workers.loaderUrl=lo(t.workers.loaderUrl)),t.workers.workerPath?t.workers.workerPath=lo(t.workers.workerPath):t.workers.workerPath=lo(xt("esri/core/workers/RemoteClient.js")),t.workers.useDynamicImport=!1;const e=_t.workers.loaderConfig,i=sie({baseUrl:e==null?void 0:e.baseUrl,locale:Zr(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...e==null?void 0:e.has},map:{...e==null?void 0:e.map},paths:{...e==null?void 0:e.paths},packages:(e==null?void 0:e.packages)||[]});return JSON.stringify({esriConfig:t,loaderConfig:i,kernelInfo:{buildDate:RR,fullVersion:OT,revision:NR}})}let uie=0;const{ABORT:_$,INVOKE:die,OPEN:pie,OPENED:fie,RESPONSE:o1}=$n;let gie=class nD{static async create(e){const i=await cie();return new nD(i,e)}constructor(e,i){this._outJobs=new Map,this._inJobs=new Map,this.worker=e,this.id=i,e.addEventListener("message",this._onMessage.bind(this)),e.addEventListener("error",n=>{n.preventDefault(),Ae.getLogger("esri.core.workers.WorkerOwner").error(n)})}terminate(){this.worker.terminate()}async open(e,i={}){const{signal:n}=i,s=KN();return new Promise((h,f)=>{const m={resolve:h,reject:f,abortHandle:pT(n,()=>{this._outJobs.delete(s),this._post({type:_$,jobId:s})})};this._outJobs.set(s,m),this._post({type:pie,jobId:s,modulePath:e})})}_onMessage(e){const i=gm(e);if(i)switch(i.type){case fie:this._onOpenedMessage(i);break;case o1:this._onResponseMessage(i);break;case _$:this._onAbortMessage(i);break;case die:this._onInvokeMessage(i)}}_onAbortMessage(e){const i=this._inJobs,n=e.jobId,s=i.get(n);s&&(s.controller&&s.controller.abort(),i.delete(n))}_onInvokeMessage(e){const{methodName:i,jobId:n,data:s,abortable:h}=e,f=h?new AbortController:null,m=this._inJobs,y=IQ[i];let x;try{if(typeof y!="function")throw new TypeError(`${i} is not a function`);x=y.call(null,s,{signal:f?f.signal:null})}catch(E){return void this._post({type:o1,jobId:n,error:fm(E)})}Ml(x)?(m.set(n,{controller:f,promise:x}),x.then(E=>{m.has(n)&&(m.delete(n),this._post({type:o1,jobId:n},E))},E=>{m.has(n)&&(m.delete(n),E||(E={message:"Error encountered at method"+i}),Ir(E)||this._post({type:o1,jobId:n,error:fm(E||{message:`Error encountered at method ${i}`})}))})):this._post({type:o1,jobId:n},x)}_onOpenedMessage(e){const{jobId:i,data:n}=e,s=this._outJobs.get(i);s&&(this._outJobs.delete(i),Rt(s.abortHandle),s.resolve(n))}_onResponseMessage(e){const{jobId:i,error:n,data:s}=e,h=this._outJobs.get(i);h&&(this._outJobs.delete(i),Rt(h.abortHandle),n?h.reject(ce.fromJSON(JSON.parse(n))):h.resolve(s))}_post(e,i,n){return tE(this.worker,e,i,n)}};const x$=de("host-browser")?Math.min(navigator.hardwareConcurrency-1,de("workers-pool-size")??8):0;let Cd=de("esri-mobile")?Math.min(x$,3):x$;Cd||(Cd=de("safari")&&de("mac")?7:2);let S$=0;const _b=[];function mie(){rD()}async function iv(t,e){const i=new CQ,{registryTarget:n,...s}=e;return await i.open(t,s),n&&bQ(n,i),i}async function YMe(t,e={}){if(typeof t!="string")throw new ce("workers:undefined-module","modulePath is missing");let i=e.strategy||"distributed";if(de("host-webworker")&&!de("esri-workers")&&(i="local"),i==="local"){let n=await ou.loadWorker(t);n||(n=await import(t)),Jt(e.signal);const s=e.client||n;return iv([ou.connect(n,e.schedule)],{...e,client:s})}if(await rD(),Jt(e.signal),i==="dedicated"){const n=S$++%Cd;return iv([await _b[n].open(t,e)],e)}if(e.maxNumWorkers&&e.maxNumWorkers>0){const n=Math.min(e.maxNumWorkers,Cd);if(n<Cd){const s=new Array(n);for(let h=0;h<n;++h){const f=S$++%Cd;s[h]=_b[f].open(t,e)}return iv(s,e)}}return iv(_b.map(n=>n.open(t,e)),e)}let nv=null;async function rD(){if(nv)return nv;new AbortController;const t=[];for(let e=0;e<Cd;e++){const i=gie.create(e).then(n=>(_b[e]=n,n));t.push(i)}return nv=Promise.all(t),nv}function Te(){return[0,0,0]}function Xr(t){return[t[0],t[1],t[2]]}function Mr(t,e,i){return[t,e,i]}function yie(t,e,i){return[t,e,i]}function sD(t,e=Te()){const i=Math.min(3,t.length);for(let n=0;n<i;++n)e[n]=t[n];return e}function vie(t,e){return new Float64Array(t,e,3)}function oD(){return Te()}function aD(){return Mr(1,1,1)}function lD(){return Mr(1,0,0)}function cD(){return Mr(0,1,0)}function hD(){return Mr(0,0,1)}const bie=oD(),wie=aD(),_ie=lD(),xie=cD(),uD=hD();Object.freeze(Object.defineProperty({__proto__:null,ONES:wie,UNIT_X:_ie,UNIT_Y:xie,UNIT_Z:uD,ZEROS:bie,clone:Xr,create:Te,createView:vie,freeze:yie,fromArray:sD,fromValues:Mr,ones:aD,unitX:lD,unitY:cD,unitZ:hD,zeros:oD},Symbol.toStringTag,{value:"Module"}));const wr=Math.PI/180,Sie=/(?:SPHEROID|ELLIPSOID)\[([^\]]+)]/i,Qc=Ii.radius,Co=Ii.eccentricitySquared,Tie={a1:Qc*Co,a2:Qc*Co*Qc*Co,a3:Qc*Co*Co/2,a4:Qc*Co*Qc*Co*2.5,a5:Qc*Co+Qc*Co*Co/2,a6:1-Co},Eie={4267:{a:63782064e-1,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:Ii.radius,f:Ii.flattening},4490:{a:6378137,f:1/298.257222101},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:iu.radius,f:iu.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:ol.radius,f:ol.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:ol.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}};var ae;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",t[t.WGS84=2]="WGS84",t[t.WEB_MERCATOR=3]="WEB_MERCATOR",t[t.WGS84_ECEF=4]="WGS84_ECEF",t[t.CGCS2000=5]="CGCS2000",t[t.SPHERICAL_MARS_PCPF=6]="SPHERICAL_MARS_PCPF",t[t.GCSMARS2000=7]="GCSMARS2000",t[t.SPHERICAL_MOON_PCPF=8]="SPHERICAL_MOON_PCPF",t[t.GCSMOON2000=9]="GCSMOON2000",t[t.LON_LAT=10]="LON_LAT",t[t.PLATE_CARREE=11]="PLATE_CARREE"})(ae||(ae={}));const Mie={[ae.WGS84]:{[ae.CGCS2000]:_i,[ae.GCSMARS2000]:null,[ae.GCSMOON2000]:null,[ae.LON_LAT]:_i,[ae.SPHERICAL_ECEF]:jg,[ae.SPHERICAL_MARS_PCPF]:null,[ae.SPHERICAL_MOON_PCPF]:null,[ae.UNKNOWN]:null,[ae.WEB_MERCATOR]:Df,[ae.PLATE_CARREE]:zf,[ae.WGS84]:_i,[ae.WGS84_ECEF]:Gf},[ae.CGCS2000]:{[ae.CGCS2000]:_i,[ae.GCSMARS2000]:null,[ae.GCSMOON2000]:null,[ae.LON_LAT]:_i,[ae.SPHERICAL_ECEF]:jg,[ae.SPHERICAL_MARS_PCPF]:null,[ae.SPHERICAL_MOON_PCPF]:null,[ae.UNKNOWN]:null,[ae.WEB_MERCATOR]:Df,[ae.PLATE_CARREE]:zf,[ae.WGS84]:_i,[ae.WGS84_ECEF]:Gf},[ae.GCSMARS2000]:{[ae.CGCS2000]:null,[ae.GCSMARS2000]:_i,[ae.GCSMOON2000]:null,[ae.LON_LAT]:_i,[ae.SPHERICAL_ECEF]:null,[ae.SPHERICAL_MARS_PCPF]:M$,[ae.SPHERICAL_MOON_PCPF]:null,[ae.UNKNOWN]:null,[ae.WEB_MERCATOR]:null,[ae.PLATE_CARREE]:null,[ae.WGS84]:null,[ae.WGS84_ECEF]:null},[ae.GCSMOON2000]:{[ae.CGCS2000]:null,[ae.GCSMARS2000]:null,[ae.GCSMOON2000]:_i,[ae.LON_LAT]:_i,[ae.SPHERICAL_ECEF]:null,[ae.SPHERICAL_MARS_PCPF]:null,[ae.SPHERICAL_MOON_PCPF]:E$,[ae.UNKNOWN]:null,[ae.WEB_MERCATOR]:null,[ae.PLATE_CARREE]:null,[ae.WGS84]:null,[ae.WGS84_ECEF]:null},[ae.WEB_MERCATOR]:{[ae.CGCS2000]:Fg,[ae.GCSMARS2000]:null,[ae.GCSMOON2000]:null,[ae.LON_LAT]:Fg,[ae.SPHERICAL_ECEF]:$ie,[ae.SPHERICAL_MARS_PCPF]:null,[ae.SPHERICAL_MOON_PCPF]:null,[ae.UNKNOWN]:null,[ae.WEB_MERCATOR]:_i,[ae.PLATE_CARREE]:Iie,[ae.WGS84]:Fg,[ae.WGS84_ECEF]:kie},[ae.WGS84_ECEF]:{[ae.CGCS2000]:Uf,[ae.GCSMARS2000]:null,[ae.GCSMOON2000]:null,[ae.LON_LAT]:Uf,[ae.SPHERICAL_ECEF]:Fie,[ae.SPHERICAL_MARS_PCPF]:null,[ae.SPHERICAL_MOON_PCPF]:null,[ae.UNKNOWN]:null,[ae.WEB_MERCATOR]:jie,[ae.PLATE_CARREE]:Aie,[ae.WGS84]:Uf,[ae.WGS84_ECEF]:_i},[ae.SPHERICAL_ECEF]:{[ae.CGCS2000]:jf,[ae.GCSMARS2000]:null,[ae.GCSMOON2000]:null,[ae.LON_LAT]:jf,[ae.SPHERICAL_ECEF]:_i,[ae.SPHERICAL_MARS_PCPF]:null,[ae.SPHERICAL_MOON_PCPF]:null,[ae.UNKNOWN]:null,[ae.WEB_MERCATOR]:Lie,[ae.PLATE_CARREE]:Oie,[ae.WGS84]:jf,[ae.WGS84_ECEF]:Die},[ae.SPHERICAL_MARS_PCPF]:{[ae.CGCS2000]:null,[ae.GCSMARS2000]:k$,[ae.GCSMOON2000]:null,[ae.LON_LAT]:k$,[ae.SPHERICAL_ECEF]:null,[ae.SPHERICAL_MARS_PCPF]:_i,[ae.SPHERICAL_MOON_PCPF]:null,[ae.UNKNOWN]:null,[ae.WEB_MERCATOR]:null,[ae.PLATE_CARREE]:null,[ae.WGS84]:null,[ae.WGS84_ECEF]:null},[ae.SPHERICAL_MOON_PCPF]:{[ae.CGCS2000]:null,[ae.GCSMARS2000]:null,[ae.GCSMOON2000]:$$,[ae.LON_LAT]:$$,[ae.SPHERICAL_ECEF]:null,[ae.SPHERICAL_MARS_PCPF]:null,[ae.SPHERICAL_MOON_PCPF]:_i,[ae.UNKNOWN]:null,[ae.WEB_MERCATOR]:null,[ae.PLATE_CARREE]:null,[ae.WGS84]:null,[ae.WGS84_ECEF]:null},[ae.UNKNOWN]:{[ae.CGCS2000]:null,[ae.GCSMARS2000]:null,[ae.GCSMOON2000]:null,[ae.LON_LAT]:null,[ae.SPHERICAL_ECEF]:null,[ae.SPHERICAL_MARS_PCPF]:null,[ae.SPHERICAL_MOON_PCPF]:null,[ae.UNKNOWN]:_i,[ae.WEB_MERCATOR]:null,[ae.PLATE_CARREE]:null,[ae.WGS84]:null,[ae.WGS84_ECEF]:null},[ae.LON_LAT]:{[ae.CGCS2000]:_i,[ae.GCSMARS2000]:_i,[ae.GCSMOON2000]:_i,[ae.LON_LAT]:_i,[ae.SPHERICAL_ECEF]:jg,[ae.SPHERICAL_MARS_PCPF]:M$,[ae.SPHERICAL_MOON_PCPF]:E$,[ae.UNKNOWN]:null,[ae.WEB_MERCATOR]:Df,[ae.PLATE_CARREE]:zf,[ae.WGS84]:_i,[ae.WGS84_ECEF]:Gf},[ae.PLATE_CARREE]:{[ae.CGCS2000]:Ff,[ae.GCSMARS2000]:null,[ae.GCSMOON2000]:null,[ae.LON_LAT]:Ff,[ae.SPHERICAL_ECEF]:Pie,[ae.SPHERICAL_MARS_PCPF]:null,[ae.SPHERICAL_MOON_PCPF]:null,[ae.UNKNOWN]:null,[ae.WEB_MERCATOR]:Rie,[ae.PLATE_CARREE]:_i,[ae.WGS84]:Ff,[ae.WGS84_ECEF]:Nie}};function dD(t,e,i=pD()){return t==null||e==null?null:Gie(t,e,i).projector}function T$(t,e){return t?e.spatialReference===t?e.spatialReferenceId:(e.spatialReference=t,"metersPerUnit"in e&&(e.metersPerUnit=kr(t,1)),B2(t)?e.spatialReferenceId=ae.SPHERICAL_ECEF:nu(t)?e.spatialReferenceId=ae.WGS84:ca(t)?e.spatialReferenceId=ae.WEB_MERCATOR:SY(t)?e.spatialReferenceId=ae.PLATE_CARREE:t.wkt===$Y.wkt?e.spatialReferenceId=ae.WGS84_ECEF:t.wkid===co.CGCS2000?e.spatialReferenceId=ae.CGCS2000:t.wkt===DT.wkt?e.spatialReferenceId=ae.SPHERICAL_MARS_PCPF:t.wkt===zT.wkt?e.spatialReferenceId=ae.SPHERICAL_MOON_PCPF:RT(t)?e.spatialReferenceId=ae.GCSMARS2000:NT(t)?e.spatialReferenceId=ae.GCSMOON2000:e.spatialReferenceId=ae.UNKNOWN):ae.UNKNOWN}function _i(t,e,i,n){t!==i&&(i[n++]=t[e++],i[n++]=t[e++],i[n]=t[e])}function Fg(t,e,i,n){i[n]=a0*(t[e]/Dd),i[n+1]=a0*(gD-2*Math.atan(Math.exp(-t[e+1]/Dd))),i[n+2]=t[e+2]}function $ie(t,e,i,n){const s=t[e]/Dd,h=gD-2*Math.atan(Math.exp(-t[e+1]/Dd)),f=Dd+t[e+2],m=Math.cos(h)*f;i[n]=Math.cos(s)*m,i[n+1]=Math.sin(s)*m,i[n+2]=Math.sin(h)*f}function kie(t,e,i,n){Fg(t,e,i,n),Gf(i,n,i,n)}function Cie(t,e,i,n,s){const h=.4999999*A3,f=hr(o0*t[e+1],-h,h),m=Math.sin(f);i[n++]=o0*t[e]*s.radius,i[n++]=s.halfSemiMajorAxis*Math.log((1+m)/(1-m)),i[n]=t[e+2]}function Df(t,e,i,n){Cie(t,e,i,n,Ii)}function zf(t,e,i,n){i[n]=t[e]*C$,i[n+1]=t[e+1]*C$,i[n+2]=t[e+2]}function Ff(t,e,i,n){i[n]=t[e]*I$,i[n+1]=t[e+1]*I$,i[n+2]=t[e+2]}function Iie(t,e,i,n){Fg(t,e,i,n),zf(i,n,i,n)}function Aie(t,e,i,n){Uf(t,e,i,n),zf(i,n,i,n)}function Oie(t,e,i,n){jf(t,e,i,n),zf(i,n,i,n)}function Pie(t,e,i,n){Ff(t,e,i,n),jg(i,n,i,n)}function Rie(t,e,i,n){Ff(t,e,i,n),Df(i,n,i,n)}function Nie(t,e,i,n){Ff(t,e,i,n),Gf(i,n,i,n)}function yE(t,e,i,n,s){const h=s+t[e+2],f=o0*t[e+1],m=o0*t[e],y=Math.cos(f)*h;i[n]=Math.cos(m)*y,i[n+1]=Math.sin(m)*y,i[n+2]=Math.sin(f)*h}function E$(t,e,i,n){yE(t,e,i,n,iu.radius)}function M$(t,e,i,n){yE(t,e,i,n,ol.radius)}function jg(t,e,i,n){yE(t,e,i,n,Ii.radius)}function vE(t,e,i,n,s){const h=t[e],f=t[e+1],m=t[e+2],y=Math.sqrt(h*h+f*f+m*m),x=VT(m/(y===0?1:y)),E=Math.atan2(f,h);i[n++]=a0*E,i[n++]=a0*x,i[n]=y-s}function $$(t,e,i,n){vE(t,e,i,n,iu.radius)}function k$(t,e,i,n){vE(t,e,i,n,ol.radius)}function jf(t,e,i,n){vE(t,e,i,n,Ii.radius)}function Lie(t,e,i,n){jf(t,e,i,n),Df(i,n,i,n)}function Die(t,e,i,n){jf(t,e,i,n),Gf(i,n,i,n)}function zie(t,e,i,n,s){const h=o0*t[e],f=o0*t[e+1],m=t[e+2],y=Math.sin(f),x=Math.cos(f),E=s.radius/Math.sqrt(1-s.eccentricitySquared*y*y);i[n++]=(E+m)*x*Math.cos(h),i[n++]=(E+m)*x*Math.sin(h),i[n++]=(E*(1-s.eccentricitySquared)+m)*y}function Gf(t,e,i,n){zie(t,e,i,n,Ii)}function Uf(t,e,i,n){const s=Tie,h=t[e],f=t[e+1],m=t[e+2];let y,x,E,k,I,P,L,D,j,H,W,Z,Y,te,ie,le,pe,ve,be,Se,Me;y=Math.abs(m),x=h*h+f*f,E=Math.sqrt(x),k=x+m*m,I=Math.sqrt(k),Se=Math.atan2(f,h),P=m*m/k,L=x/k,te=s.a2/I,ie=s.a3-s.a4/I,L>.3?(D=y/I*(1+L*(s.a1+te+P*ie)/I),be=Math.asin(D),H=D*D,j=Math.sqrt(1-H)):(j=E/I*(1-P*(s.a5-te-L*ie)/I),be=Math.acos(j),H=1-j*j,D=Math.sqrt(H)),W=1-Ii.eccentricitySquared*H,Z=Ii.radius/Math.sqrt(W),Y=s.a6*Z,te=E-Z*j,ie=y-Y*D,pe=j*te+D*ie,le=j*ie-D*te,ve=le/(Y/W+pe),be+=ve,Me=pe+le*ve/2,m<0&&(be=-be),i[n++]=a0*Se,i[n++]=a0*be,i[n]=Me}function Fie(t,e,i,n){Uf(t,e,i,n),jg(i,n,i,n)}function jie(t,e,i,n){Uf(t,e,i,n),Df(i,n,i,n)}function Gie(t,e,i){if(t==null||e==null||i.source.spatialReference===t&&i.dest.spatialReference===e)return i;const n=T$(t,i.source),s=T$(e,i.dest);return n===ae.UNKNOWN&&s===ae.UNKNOWN?Ai(t,e)?i.projector=_i:i.projector=null:i.projector=Mie[n][s],i}function pD(){return{source:{spatialReference:null,spatialReferenceId:ae.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:ae.UNKNOWN,metersPerUnit:1},projector:_i}}const XMe={spatialReference:null,spatialReferenceId:ae.UNKNOWN},QMe={spatialReference:null,spatialReferenceId:ae.UNKNOWN},fD=pD(),o0=xc(1),a0=mN(1),A3=Math.PI,gD=.5*A3,Dd=Ii.radius,C$=Dd*A3/180,I$=180/(Dd*A3);function F0(t,e,i,n,s,h,f=Math.floor(t.length/3)){const m=dD(e,s,fD);if(m==null)return!1;if(m===_i){if(t===n&&i===h)return!0;const x=i+3*f;for(let E=i,k=h;E<x;E++,k++)n[k]=t[E];return!0}const y=i+3*f;for(let x=i,E=h;x<y;x+=3,E+=3)m(t,x,n,E);return!0}const e7e=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:F0},Symbol.toStringTag,{value:"Module"}));function A$(t,e,i,n,s,h){return rv[0]=t,rv[1]=e,rv[2]=i,F0(rv,n,0,s,h,0)}const rv=Te();let sv=0,b5=class V9{static fromGE(e){const i=new V9;return i._wkt=e.wkt,i._wkid=e.wkid,i._isInverse=e.isInverse,i}constructor(e){this.uid=sv++,e?(this._wkt=e.wkt!=null?e.wkt:null,this._wkid=e.wkid!=null?e.wkid:-1,this._isInverse=e.isInverse!=null&&e.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(e){this._wkt=e,this.uid=sv++}get wkid(){return this._wkid}set wkid(e){this._wkid=e,this.uid=sv++}get isInverse(){return this._isInverse}set isInverse(e){this._isInverse=e,this.uid=sv++}getInverse(){const e=new V9;return e._wkt=this.wkt,e._wkid=this._wkid,e._isInverse=!this.isInverse,e}},Q2=class z1{static cacheKey(e,i){var n,s,h,f,m,y;return[((n=e.wkid)==null?void 0:n.toString())??"-1",((s=e.wkt)==null?void 0:s.toString())??"",((h=e.wkt2)==null?void 0:h.toString())??"",((f=i.wkid)==null?void 0:f.toString())??"-1",((m=i.wkt)==null?void 0:m.toString())??"",((y=i.wkt2)==null?void 0:y.toString())??""].join()}static fromGE(e){const i=new z1;let n="";for(const s of e.steps){const h=b5.fromGE(s);i.steps.push(h),n+=h.uid.toString()+","}return i._cachedProjection={},i._gtlistentry=null,i._chain=n,i}constructor(e){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,e==null?void 0:e.steps)for(const i of e.steps)i instanceof b5?this.steps.push(i):this.steps.push(new b5({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}))}getInverse(){const e=new z1;e.steps=[];for(let i=this.steps.length-1;i>=0;i--){const n=this.steps[i];e.steps.push(n.getInverse())}return e}getGTListEntry(){let e="";for(const i of this.steps)e+=i.uid.toString()+",";return e!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=e),this._gtlistentry}assignCachedGe(e,i,n){this._cachedProjection[z1.cacheKey(e,i)]=n}getCachedGeTransformation(e,i){let n="";for(const h of this.steps)n+=h.uid.toString()+",";n!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=n);const s=this._cachedProjection[z1.cacheKey(e,i)];return s===void 0?null:s}};function Uie(t,e,i){if(e==null||i==null||i.vcsWkid||Ai(e,i)||ru(e)||ru(i))return null;const n=g8(e)/g8(i);if(n===1)return null;switch(t){case"point":case"esriGeometryPoint":return s=>Bie(s,n);case"polyline":case"esriGeometryPolyline":return s=>Vie(s,n);case"polygon":case"esriGeometryPolygon":return s=>Hie(s,n);case"multipoint":case"esriGeometryMultipoint":return s=>qie(s,n);case"extent":case"esriGeometryEnvelope":return s=>Wie(s,n);default:return null}}function Bie(t,e){(t==null?void 0:t.z)!=null&&(t.z*=e)}function Hie(t,e){if(t)for(const i of t.rings)for(const n of i)n.length>2&&(n[2]*=e)}function Vie(t,e){if(t)for(const i of t.paths)for(const n of i)n.length>2&&(n[2]*=e)}function qie(t,e){if(t)for(const i of t.points)i.length>2&&(i[2]*=e)}function Wie(t,e){t&&t.zmin!=null&&t.zmax!=null&&(t.zmin*=e,t.zmax*=e)}let ra=null,lu=null,Gg=null,xb={};const bE=new R0;function $l(){return!!ra&&PT()}function mD(){return!!$l()||(Ge(bE),vl(),!1)}function yD(t,e){return!t||!e||Ls(t,e)||mD()}function Kie(t,e){return!Ls(t,e)&&!$l()}function vl(t){return Gg==null&&(Gg=Promise.all([jR(),ge(()=>Promise.resolve().then(()=>o9e),[],import.meta.url).then(e=>e.g),ge(()=>Promise.resolve().then(()=>p9e),void 0,import.meta.url)])),Gg.then(([,e,{hydratedAdapter:i}])=>{Jt(t),lu=i,ra=e.default,ra._enableProjection(bY),bE.notify()})}function Qr(t,e,i=null,n=null){return Array.isArray(t)?t.length===0?[]:q9(lu,t,t[0].spatialReference,e,i,n):q9(lu,[t],t.spatialReference,e,i,n)[0]}function q9(t,e,i,n,s=null,h=null){if(i==null||n==null)return e;if(Ls(i,n,s))return e.map(f=>Sb(f,i,n));if(s==null&&B2(i))return e.map(f=>Sb(f,i,Ke.WGS84)).map(f=>l0(f,n));if(s==null&&B2(n))return e.map(f=>l0(f,Ke.WGS84)).map(f=>Sb(f,Ke.WGS84,n));if(s==null){const f=Q2.cacheKey(i,n);xb[f]!==void 0?s=xb[f]:((s=bD(i,n,void 0))==null&&(s=new Q2),xb[f]=s)}if(ra==null||t==null)throw new O3;return h!=null?ra._project(t,e,i,n,s,h):ra._project(t,e,i,n,s)}function Zie(t,e){const i=vD([t],e);return i.pending!=null?{pending:i.pending,geometry:null}:i.geometries!=null?{pending:null,geometry:i.geometries[0]}:{pending:null,geometry:null}}function vD(t,e){if(!$l()){for(const i of t)if(i!=null&&!Ai(i.spatialReference,e)&&Sr(i.spatialReference)&&Sr(e)&&!Ls(i.spatialReference,e))return Ge(bE),{pending:vl(),geometries:null}}return{pending:null,geometries:t.map(i=>i==null?null:Ai(i.spatialReference,e)?i:Sr(i.spatialReference)&&Sr(e)?l0(i,e):null)}}function bD(t,e,i=null){if(t==null||e==null)return null;if(ra==null||lu==null)throw new O3;const n=ra._getTransformation(lu,t,e,i,i==null?void 0:i.spatialReference);return n!==null?Q2.fromGE(n):null}function Jie(t,e,i=null){if(ra==null||lu==null)throw new O3;const n=ra._getTransformationBySuitability(lu,t,e,i,i==null?void 0:i.spatialReference);if(n!==null){const s=[];for(const h of n)s.push(Q2.fromGE(h));return s}return[]}let O3=class extends ce{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};function Yie(){ra=null,lu=null,Gg=null,xb={}}const Xie={get loadPromise(){return Gg}};function l0(t,e){try{const i=Qr(t,e);if(i==null)return null;"xmin"in t&&"xmin"in i&&(i.zmin=t.zmin,i.zmax=t.zmax);const n=Uie(i.type,t.spatialReference,e);return n!=null&&n(i),i}catch(i){if(!(i instanceof O3))throw i;return null}}async function Qie(t,e,i){const n=t.spatialReference;return n!=null&&e!=null&&await P3(n,e,null,i),l0(t,e)}function Ls(t,e,i){return!i&&(!!Ai(t,e)||Sr(t)&&Sr(e)&&!!dD(t,e,fD))}function ene(t,e){if(Ai(t,e))return!0;if(!Sr(t)||!Sr(e))return!1;const i=nu(t)||ca(t)||T9(t),n=nu(e)||ca(e)||T9(e);return i&&n}async function P3(t,e,i,n){if($l())return q7(n);if(Array.isArray(t)){for(const{source:s,dest:h,geographicTransformation:f}of t)if(s&&h&&!Ls(s,h,f))return vl(n)}else if(t&&e&&!Ls(t,e,i))return vl(n);return q7(n)}function Sb(t,e,i){return t?"x"in t?wD(t,e,new Ne,i,0):"xmin"in t?TD(t,e,new Nt,i,0):"rings"in t?SD(t,e,new ln,i,0):"paths"in t?xD(t,e,new Tr,i,0):"points"in t?_D(t,e,new P0,i,0):null:null}function tne(t,e,i=e.spatialReference,n=0){return i!=null&&t.spatialReference!=null&&wD(t,t.spatialReference,e,i,n)!=null}function wD(t,e,i,n,s){nr[0]=t.x,nr[1]=t.y;const h=t.z;return nr[2]=h!==void 0?h:s,F0(nr,e,0,nr,n,0)?(i.x=nr[0],i.y=nr[1],i.spatialReference=n,h!==void 0||ru(n)?(i.z=nr[2],i.hasZ=!0):(i.z=void 0,i.hasZ=!1),t.m===void 0?(i.m=void 0,i.hasM=!1):(i.m=t.m,i.hasM=!0),i):null}function ine(t,e,i=e.spatialReference,n=0){return t.spatialReference!=null&&i!=null&&_D(t,t.spatialReference,e,i,n)!=null}function _D(t,e,i,n,s){const{points:h,hasZ:f,hasM:m}=t,y=[],x=h.length,E=[];for(const I of h)E.push(I[0],I[1],f?I[2]:s);if(!F0(E,e,0,E,n,0,x))return null;const k=f||ru(n);for(let I=0;I<x;++I){const P=3*I,L=E[P],D=E[P+1];k&&m?y.push([L,D,E[P+2],h[I][3]]):k?y.push([L,D,E[P+2]]):m?y.push([L,D,h[I][2]]):y.push([L,D])}return i.points=y,i.spatialReference=n,i.hasZ=f,i.hasM=m,i}function nne(t,e,i=e.spatialReference,n=0){return t.spatialReference!=null&&i!=null&&xD(t,t.spatialReference,e,i,n)!=null}function xD(t,e,i,n,s){const{paths:h,hasZ:f,hasM:m}=t,y=[];if(!ED(h,f??!1,m??!1,e,y,n,s))return null;const x=f||ru(n);return i.paths=y,i.spatialReference=n,i.hasZ=x,i.hasM=m,i}function rne(t,e,i=e.spatialReference,n=0){return t.spatialReference!=null&&i!=null&&SD(t,t.spatialReference,e,i,n)!=null}function SD(t,e,i,n,s){const{rings:h,hasZ:f,hasM:m}=t,y=[];if(!ED(h,f??!1,m??!1,e,y,n,s))return null;const x=f||ru(n);return i.rings=y,i.spatialReference=n,i.hasZ=x,i.hasM=m,i}function sne(t,e,i=e.spatialReference,n=0){return t.spatialReference!=null&&i!=null&&TD(t,t.spatialReference,e,i,n)!=null}function TD(t,e,i,n,s){const{xmin:h,ymin:f,xmax:m,ymax:y,hasZ:x,hasM:E}=t,k=x?t.zmin:s;if(!A$(h,f,k,e,nr,n))return null;const I=x||ru(n);i.xmin=nr[0],i.ymin=nr[1],I&&(i.zmin=nr[2]);const P=x?t.zmax:s;return A$(m,y,P,e,nr,n)?(i.xmax=nr[0],i.ymax=nr[1],I&&(i.zmax=nr[2]),E&&(i.mmin=t.mmin,i.mmax=t.mmax),i.spatialReference=n,i):null}function ED(t,e,i,n,s,h,f=0){const m=new Array;for(const E of t)for(const k of E)m.push(k[0],k[1],e?k[2]:f);if(!F0(m,n,0,m,h,0))return!1;let y=0;s.length=0;const x=e||ru(h);for(const E of t){const k=new Array;for(const I of E)x&&i?k.push([m[y++],m[y++],m[y++],I[3]]):x?k.push([m[y++],m[y++],m[y++]]):i?(k.push([m[y++],m[y++],I[2]]),y++):(k.push([m[y++],m[y++]]),y++);s.push(k)}return!0}const nr=Te(),i7e=Object.freeze(Object.defineProperty({__proto__:null,canProjectWithoutEngine:Ls,getTransformation:bD,getTransformations:Jie,initializeProjection:P3,isEqualBaseGCS:ene,isLoaded:$l,isLoadedOrLoad:mD,isLoadedOrLoadFor:yD,load:vl,project:Qr,projectExtent:sne,projectMany:q9,projectMultipoint:ine,projectOrLoad:Zie,projectOrLoadMany:vD,projectPoint:tne,projectPolygon:rne,projectPolyline:nne,projectWithZConversion:Qie,projectWithoutEngine:Sb,requiresLoad:Kie,test:Xie,tryProjectWithZConversion:l0,unload:Yie},Symbol.toStringTag,{value:"Module"}));var W9;let Oa=W9=class extends De{constructor(t){super(t),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new W9({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};_([S({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Oa.prototype,"cols",void 0),_([S({type:gi,json:{write:!0}})],Oa.prototype,"level",void 0),_([S({type:String,json:{write:!0}})],Oa.prototype,"levelValue",void 0),_([S({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Oa.prototype,"origin",void 0),_([S({type:Number,json:{write:!0}})],Oa.prototype,"resolution",void 0),_([S({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Oa.prototype,"rows",void 0),_([S({type:Number,json:{write:!0}})],Oa.prototype,"scale",void 0),Oa=W9=_([J("esri.layers.support.LOD")],Oa);const ao=Oa;let one=class{constructor(e,i,n,s,h=void 0){this.id=e,this.level=i,this.row=n,this.col=s,this.extent=h}};var lh;const O$=new xn({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let Rn=lh=class extends De{static create(t={}){const{resolutionFactor:e=1,scales:i,size:n=256,spatialReference:s=Ke.WebMercator,numLODs:h=24}=t;if(!Sr(s)){const k=[];if(i)for(let I=0;I<i.length;I++){const P=i[I];k.push(new ao({level:I,scale:P,resolution:P}))}else{let I=5e-4;for(let P=h-1;P>=0;P--)k.unshift(new ao({level:P,scale:I,resolution:I})),I*=2}return new lh({dpi:96,lods:k,origin:new Ne(0,0,s),size:[n,n],spatialReference:s})}const f=cr(s),m=t.origin?new Ne({x:t.origin.x,y:t.origin.y,spatialReference:s}):new Ne(f?{x:f.origin[0],y:f.origin[1],spatialReference:s}:{x:0,y:0,spatialReference:s}),y=96,x=1/(kr(s)*39.37*y),E=[];if(i)for(let k=0;k<i.length;k++){const I=i[k],P=I*x;E.push(new ao({level:k,scale:I,resolution:P}))}else{let k=O0(s)?512/n*5916575275917094e-7:256/n*591657527591555e-6;const I=Math.ceil(h/e);E.push(new ao({level:0,scale:k,resolution:k*x}));for(let P=1;P<I;P++){const L=k/2**e,D=L*x;E.push(new ao({level:P,scale:L,resolution:D})),k=L}}return new lh({dpi:y,lods:E,origin:m,size:[n,n],spatialReference:s})}constructor(t){super(t),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:t,origin:e}=this;if(t&&e){const i=cr(t);return t.isWrappable&&!!i&&Math.abs(i.origin[0]-e.x)<=i.dx}return!1}readOrigin(t,e){return Ne.fromJSON({spatialReference:e.spatialReference,...t})}set lods(t){let e=0,i=0;const n=[],s=this._levelToLOD={};t&&(e=-1/0,i=1/0,t.forEach(h=>{n.push(h.scale),e=h.scale>e?h.scale:e,i=h.scale<i?h.scale:i,s[h.level]=h})),this._set("scales",n),this._set("lods",t),this._initializeUpsampleLevels()}readSize(t,e){return[e.cols,e.rows]}writeSize(t,e){e.cols=t[0],e.rows=t[1]}zoomToScale(t){const e=this.scales;if(t<=0)return e[0];if(t>=e.length-1)return e[e.length-1];const i=Math.floor(t),n=i+1;return e[i]/(e[i]/e[n])**(t-i)}scaleToZoom(t){const e=this.scales,i=e.length-1;let n=0;for(;n<i;n++){const s=e[n],h=e[n+1];if(s<=t)return n;if(h===t)return n+1;if(s>t&&h<t)return n+Math.log(s/t)/Math.log(s/h)}return n}tileAt(t,e,i,n){const s=this.lodAt(t);if(!s)return null;let h,f;if(typeof e=="number")h=e,f=i;else if(Ai(e.spatialReference,this.spatialReference))h=e.x,f=e.y,n=i;else{const x=b3(e,this.spatialReference);if(x==null)return null;h=x.x,f=x.y,n=i}const m=s.resolution*this.size[0],y=s.resolution*this.size[1];return n||(n=new one(null,0,0,0,an())),n.level=t,n.row=Math.floor((this.origin.y-f)/y+.001),n.col=Math.floor((h-this.origin.x)/m+.001),this.updateTileInfo(n),n}updateTileInfo(t,e=lh.ExtrapolateOptions.NONE){let i=this.lodAt(t.level);if(!i&&e===lh.ExtrapolateOptions.POWER_OF_TWO){const f=this.lods[this.lods.length-1];f.level<t.level&&(i=f)}if(!i)return;const n=t.level-i.level,s=i.resolution*this.size[0]/2**n,h=i.resolution*this.size[1]/2**n;t.id=`${t.level}/${t.row}/${t.col}`,t.extent||(t.extent=an()),t.extent[0]=this.origin.x+t.col*s,t.extent[1]=this.origin.y-(t.row+1)*h,t.extent[2]=t.extent[0]+s,t.extent[3]=t.extent[1]+h}upsampleTile(t){const e=this._upsampleLevels[t.level];return!(!e||e.parentLevel===-1)&&(t.level=e.parentLevel,t.row=Math.floor(t.row/e.factor+.001),t.col=Math.floor(t.col/e.factor+.001),this.updateTileInfo(t),!0)}getTileBounds(t,e){const i=this.lodAt(e.level);if(i==null)return null;const{resolution:n}=i,s=n*this.size[0],h=n*this.size[1];return t[0]=this.origin.x+e.col*s,t[1]=this.origin.y-(e.row+1)*h,t[2]=t[0]+s,t[3]=t[1]+h,t}lodAt(t){var e;return((e=this._levelToLOD)==null?void 0:e[t])??null}clone(){return lh.fromJSON(this.write({}))}getCompatibleForVTL(t){if(this.size[0]!==this.size[1]||this.size[0]===256&&t===512)return null;const e=(this.size[0]===512&&t===256?-1:0)+(this.spatialReference.isGeographic?1:0);if(this.size[0]===t&&e===0)return this;const i=[],n=this.lods.length-e;for(let s=0;s<n;s++){const h=s+e,{scale:f,resolution:m}=h>=0?this.lods[h]:{scale:2*this.lods[0].scale,resolution:2*this.lods[0].resolution};i.push(new ao({level:s,scale:f,resolution:m}))}return new lh({size:[t,t],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:i})}_initializeUpsampleLevels(){const t=this.lods;this._upsampleLevels=[];let e=null;for(let i=0;i<t.length;i++){const n=t[i];this._upsampleLevels[n.level]={parentLevel:e?e.level:-1,factor:e?e.resolution/n.resolution:0},e=n}}};_([S({type:Number,json:{write:!0}})],Rn.prototype,"compressionQuality",void 0),_([S({type:Number,json:{write:!0}})],Rn.prototype,"dpi",void 0),_([S({type:String,json:{read:O$.read,write:O$.write,origins:{"web-scene":{read:!1,write:!1}}}})],Rn.prototype,"format",void 0),_([S({readOnly:!0})],Rn.prototype,"isWrappable",null),_([S({type:Ne,json:{write:!0}})],Rn.prototype,"origin",void 0),_([kt("origin")],Rn.prototype,"readOrigin",null),_([S({type:[ao],value:null,json:{write:!0}})],Rn.prototype,"lods",null),_([S({readOnly:!0})],Rn.prototype,"scales",void 0),_([S({cast:t=>Array.isArray(t)?t:typeof t=="number"?[t,t]:[256,256]})],Rn.prototype,"size",void 0),_([kt("size",["rows","cols"])],Rn.prototype,"readSize",null),_([yt("size",{cols:{type:gi},rows:{type:gi}})],Rn.prototype,"writeSize",null),_([S({type:Ke,json:{write:!0}})],Rn.prototype,"spatialReference",void 0),Rn=lh=_([J("esri.layers.support.TileInfo")],Rn),function(t){var e;(e=t.ExtrapolateOptions||(t.ExtrapolateOptions={}))[e.NONE=0]="NONE",e[e.POWER_OF_TWO=1]="POWER_OF_TWO"}(Rn||(Rn={}));const Ug=Rn,Tb={widthBreakpoint:{getValue(t){const e=t.viewSize[0],i=t.breakpoints,n=this.values;return e<=i.xsmall?n.xsmall:e<=i.small?n.small:e<=i.medium?n.medium:e<=i.large?n.large:n.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(t){const e=t.viewSize[1],i=t.breakpoints,n=this.values;return e<=i.xsmall?n.xsmall:e<=i.small?n.small:e<=i.medium?n.medium:e<=i.large?n.large:n.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(t){const e=t.viewSize,i=e[0],n=e[1],s=this.values;return n>=i?s.portrait:s.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},w5={xsmall:544,small:768,medium:992,large:1200};function ane(t){const e=t;return e&&e.xsmall<e.small&&e.small<e.medium&&e.medium<e.large}function _5(t,e){return e?Tb[t].valueToClassName[e].split(" "):[]}const lne=t=>{let e=class extends t{constructor(...i){super(...i),this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=w5}initialize(){this.addHandles(Ee(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),Ct))}destroy(){this.destroyed||this._removeActiveClassNames()}set breakpoints(i){if(i!==this._get("breakpoints")){if(!ane(i)){const n=JSON.stringify(w5,null,2);console.warn("provided breakpoints are not valid, using defaults:"+n),i=w5}this._set("breakpoints",{...i})}}_updateClassNames(){if(!this.container)return;const i=_r.acquire(),n=_r.acquire();let s,h=!1;for(s in Tb){const f=this[s],m=Tb[s].getValue({viewSize:this.size,breakpoints:this.breakpoints});f!==m&&(h=!0,this[s]=m,_5(s,f).forEach(y=>n.push(y)),_5(s,m).forEach(y=>i.push(y)))}h&&(this._applyClassNameChanges(i,n),_r.release(i),_r.release(n))}_applyClassNameChanges(i,n){const s=this.container;s&&(n.forEach(h=>s.classList.remove(h)),i.forEach(h=>s.classList.add(h)))}_removeActiveClassNames(){const i=this.container;if(!i)return;let n;for(n in Tb)_5(n,this[n]).forEach(s=>i.classList.remove(s))}};return _([S()],e.prototype,"breakpoints",null),_([S()],e.prototype,"orientation",void 0),_([S()],e.prototype,"widthBreakpoint",void 0),_([S()],e.prototype,"heightBreakpoint",void 0),e=_([J("esri.views.BreakpointsOwner")],e),e};function wE(t){return typeof t=="string"?document.getElementById(t):t??null}function P$(t,e){for(;;){const i=t.firstChild;if(!i)break;e.appendChild(i)}}let Jh=class extends Oe{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll()}add(e,i,n={}){return this._installWatch(e,i,n,Ee)}addWhen(e,i,n={}){return this._installWatch(e,i,n,ur)}addOnCollectionChange(e,i,{initial:n=!1,final:s=!1}={}){const h=++this._handleId;return this.addHandles([Ns(e,"after-changes",this._createSyncUpdatingCallback(),Pc),Ns(e,"change",i,{onListenerAdd:n?f=>i({added:f.toArray(),removed:[]}):void 0,onListenerRemove:s?f=>i({added:[],removed:f.toArray()}):void 0})],h),ct(()=>this.removeHandles(h))}addPromise(e){if(e==null)return e;const i=++this._handleId;this.addHandles(ct(()=>{this._pendingPromises.delete(e)&&(this._pendingPromises.size!==0||this.hasHandles(ov)||this._set("updating",!1))}),i),this._pendingPromises.add(e),this._set("updating",!0);const n=()=>this.removeHandles(i);return e.then(n,n),e}removeAll(){this._pendingPromises.clear(),this.removeAllHandles(),this._set("updating",!1)}_installWatch(e,i,n={},s){const h=++this._handleId;n.sync||this._installSyncUpdatingWatch(e,h);const f=s(e,i,n);return this.addHandles(f,h),ct(()=>this.removeHandles(h))}_installSyncUpdatingWatch(e,i){const n=this._createSyncUpdatingCallback(),s=Ee(e,n,{sync:!0,equals:()=>!1});return this.addHandles(s,i),s}_createSyncUpdatingCallback(){return()=>{this.removeHandles(ov),++this._scheduleHandleId;const e=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this.addHandles(ey(()=>{e===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this.removeHandles(ov))}),ov)}}};_([S({readOnly:!0})],Jh.prototype,"updating",void 0),Jh=_([J("esri.core.support.UpdatingHandles")],Jh);const ov=-42;/*!
 * @esri/arcgis-html-sanitizer - v4.1.0 - Tue Dec 03 2024 09:13:28 GMT-0500 (Eastern Standard Time)
 * Copyright (c) 2024 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei(é›·å®—æ°‘) <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ew=function(){return ew=Object.assign||function(e){for(var i,n=1,s=arguments.length;n<s;n++){i=arguments[n];for(var h in i)Object.prototype.hasOwnProperty.call(i,h)&&(e[h]=i[h])}return e},ew.apply(this,arguments)},K9={exports:{}},Li={},Z9={exports:{}},pp={};function MD(){var t={};return t["align-content"]=!1,t["align-items"]=!1,t["align-self"]=!1,t["alignment-adjust"]=!1,t["alignment-baseline"]=!1,t.all=!1,t["anchor-point"]=!1,t.animation=!1,t["animation-delay"]=!1,t["animation-direction"]=!1,t["animation-duration"]=!1,t["animation-fill-mode"]=!1,t["animation-iteration-count"]=!1,t["animation-name"]=!1,t["animation-play-state"]=!1,t["animation-timing-function"]=!1,t.azimuth=!1,t["backface-visibility"]=!1,t.background=!0,t["background-attachment"]=!0,t["background-clip"]=!0,t["background-color"]=!0,t["background-image"]=!0,t["background-origin"]=!0,t["background-position"]=!0,t["background-repeat"]=!0,t["background-size"]=!0,t["baseline-shift"]=!1,t.binding=!1,t.bleed=!1,t["bookmark-label"]=!1,t["bookmark-level"]=!1,t["bookmark-state"]=!1,t.border=!0,t["border-bottom"]=!0,t["border-bottom-color"]=!0,t["border-bottom-left-radius"]=!0,t["border-bottom-right-radius"]=!0,t["border-bottom-style"]=!0,t["border-bottom-width"]=!0,t["border-collapse"]=!0,t["border-color"]=!0,t["border-image"]=!0,t["border-image-outset"]=!0,t["border-image-repeat"]=!0,t["border-image-slice"]=!0,t["border-image-source"]=!0,t["border-image-width"]=!0,t["border-left"]=!0,t["border-left-color"]=!0,t["border-left-style"]=!0,t["border-left-width"]=!0,t["border-radius"]=!0,t["border-right"]=!0,t["border-right-color"]=!0,t["border-right-style"]=!0,t["border-right-width"]=!0,t["border-spacing"]=!0,t["border-style"]=!0,t["border-top"]=!0,t["border-top-color"]=!0,t["border-top-left-radius"]=!0,t["border-top-right-radius"]=!0,t["border-top-style"]=!0,t["border-top-width"]=!0,t["border-width"]=!0,t.bottom=!1,t["box-decoration-break"]=!0,t["box-shadow"]=!0,t["box-sizing"]=!0,t["box-snap"]=!0,t["box-suppress"]=!0,t["break-after"]=!0,t["break-before"]=!0,t["break-inside"]=!0,t["caption-side"]=!1,t.chains=!1,t.clear=!0,t.clip=!1,t["clip-path"]=!1,t["clip-rule"]=!1,t.color=!0,t["color-interpolation-filters"]=!0,t["column-count"]=!1,t["column-fill"]=!1,t["column-gap"]=!1,t["column-rule"]=!1,t["column-rule-color"]=!1,t["column-rule-style"]=!1,t["column-rule-width"]=!1,t["column-span"]=!1,t["column-width"]=!1,t.columns=!1,t.contain=!1,t.content=!1,t["counter-increment"]=!1,t["counter-reset"]=!1,t["counter-set"]=!1,t.crop=!1,t.cue=!1,t["cue-after"]=!1,t["cue-before"]=!1,t.cursor=!1,t.direction=!1,t.display=!0,t["display-inside"]=!0,t["display-list"]=!0,t["display-outside"]=!0,t["dominant-baseline"]=!1,t.elevation=!1,t["empty-cells"]=!1,t.filter=!1,t.flex=!1,t["flex-basis"]=!1,t["flex-direction"]=!1,t["flex-flow"]=!1,t["flex-grow"]=!1,t["flex-shrink"]=!1,t["flex-wrap"]=!1,t.float=!1,t["float-offset"]=!1,t["flood-color"]=!1,t["flood-opacity"]=!1,t["flow-from"]=!1,t["flow-into"]=!1,t.font=!0,t["font-family"]=!0,t["font-feature-settings"]=!0,t["font-kerning"]=!0,t["font-language-override"]=!0,t["font-size"]=!0,t["font-size-adjust"]=!0,t["font-stretch"]=!0,t["font-style"]=!0,t["font-synthesis"]=!0,t["font-variant"]=!0,t["font-variant-alternates"]=!0,t["font-variant-caps"]=!0,t["font-variant-east-asian"]=!0,t["font-variant-ligatures"]=!0,t["font-variant-numeric"]=!0,t["font-variant-position"]=!0,t["font-weight"]=!0,t.grid=!1,t["grid-area"]=!1,t["grid-auto-columns"]=!1,t["grid-auto-flow"]=!1,t["grid-auto-rows"]=!1,t["grid-column"]=!1,t["grid-column-end"]=!1,t["grid-column-start"]=!1,t["grid-row"]=!1,t["grid-row-end"]=!1,t["grid-row-start"]=!1,t["grid-template"]=!1,t["grid-template-areas"]=!1,t["grid-template-columns"]=!1,t["grid-template-rows"]=!1,t["hanging-punctuation"]=!1,t.height=!0,t.hyphens=!1,t.icon=!1,t["image-orientation"]=!1,t["image-resolution"]=!1,t["ime-mode"]=!1,t["initial-letters"]=!1,t["inline-box-align"]=!1,t["justify-content"]=!1,t["justify-items"]=!1,t["justify-self"]=!1,t.left=!1,t["letter-spacing"]=!0,t["lighting-color"]=!0,t["line-box-contain"]=!1,t["line-break"]=!1,t["line-grid"]=!1,t["line-height"]=!1,t["line-snap"]=!1,t["line-stacking"]=!1,t["line-stacking-ruby"]=!1,t["line-stacking-shift"]=!1,t["line-stacking-strategy"]=!1,t["list-style"]=!0,t["list-style-image"]=!0,t["list-style-position"]=!0,t["list-style-type"]=!0,t.margin=!0,t["margin-bottom"]=!0,t["margin-left"]=!0,t["margin-right"]=!0,t["margin-top"]=!0,t["marker-offset"]=!1,t["marker-side"]=!1,t.marks=!1,t.mask=!1,t["mask-box"]=!1,t["mask-box-outset"]=!1,t["mask-box-repeat"]=!1,t["mask-box-slice"]=!1,t["mask-box-source"]=!1,t["mask-box-width"]=!1,t["mask-clip"]=!1,t["mask-image"]=!1,t["mask-origin"]=!1,t["mask-position"]=!1,t["mask-repeat"]=!1,t["mask-size"]=!1,t["mask-source-type"]=!1,t["mask-type"]=!1,t["max-height"]=!0,t["max-lines"]=!1,t["max-width"]=!0,t["min-height"]=!0,t["min-width"]=!0,t["move-to"]=!1,t["nav-down"]=!1,t["nav-index"]=!1,t["nav-left"]=!1,t["nav-right"]=!1,t["nav-up"]=!1,t["object-fit"]=!1,t["object-position"]=!1,t.opacity=!1,t.order=!1,t.orphans=!1,t.outline=!1,t["outline-color"]=!1,t["outline-offset"]=!1,t["outline-style"]=!1,t["outline-width"]=!1,t.overflow=!1,t["overflow-wrap"]=!1,t["overflow-x"]=!1,t["overflow-y"]=!1,t.padding=!0,t["padding-bottom"]=!0,t["padding-left"]=!0,t["padding-right"]=!0,t["padding-top"]=!0,t.page=!1,t["page-break-after"]=!1,t["page-break-before"]=!1,t["page-break-inside"]=!1,t["page-policy"]=!1,t.pause=!1,t["pause-after"]=!1,t["pause-before"]=!1,t.perspective=!1,t["perspective-origin"]=!1,t.pitch=!1,t["pitch-range"]=!1,t["play-during"]=!1,t.position=!1,t["presentation-level"]=!1,t.quotes=!1,t["region-fragment"]=!1,t.resize=!1,t.rest=!1,t["rest-after"]=!1,t["rest-before"]=!1,t.richness=!1,t.right=!1,t.rotation=!1,t["rotation-point"]=!1,t["ruby-align"]=!1,t["ruby-merge"]=!1,t["ruby-position"]=!1,t["shape-image-threshold"]=!1,t["shape-outside"]=!1,t["shape-margin"]=!1,t.size=!1,t.speak=!1,t["speak-as"]=!1,t["speak-header"]=!1,t["speak-numeral"]=!1,t["speak-punctuation"]=!1,t["speech-rate"]=!1,t.stress=!1,t["string-set"]=!1,t["tab-size"]=!1,t["table-layout"]=!1,t["text-align"]=!0,t["text-align-last"]=!0,t["text-combine-upright"]=!0,t["text-decoration"]=!0,t["text-decoration-color"]=!0,t["text-decoration-line"]=!0,t["text-decoration-skip"]=!0,t["text-decoration-style"]=!0,t["text-emphasis"]=!0,t["text-emphasis-color"]=!0,t["text-emphasis-position"]=!0,t["text-emphasis-style"]=!0,t["text-height"]=!0,t["text-indent"]=!0,t["text-justify"]=!0,t["text-orientation"]=!0,t["text-overflow"]=!0,t["text-shadow"]=!0,t["text-space-collapse"]=!0,t["text-transform"]=!0,t["text-underline-position"]=!0,t["text-wrap"]=!0,t.top=!1,t.transform=!1,t["transform-origin"]=!1,t["transform-style"]=!1,t.transition=!1,t["transition-delay"]=!1,t["transition-duration"]=!1,t["transition-property"]=!1,t["transition-timing-function"]=!1,t["unicode-bidi"]=!1,t["vertical-align"]=!1,t.visibility=!1,t["voice-balance"]=!1,t["voice-duration"]=!1,t["voice-family"]=!1,t["voice-pitch"]=!1,t["voice-range"]=!1,t["voice-rate"]=!1,t["voice-stress"]=!1,t["voice-volume"]=!1,t.volume=!1,t["white-space"]=!1,t.widows=!1,t.width=!0,t["will-change"]=!1,t["word-break"]=!0,t["word-spacing"]=!0,t["word-wrap"]=!0,t["wrap-flow"]=!1,t["wrap-through"]=!1,t["writing-mode"]=!1,t["z-index"]=!1,t}function cne(t,e,i){}function hne(t,e,i){}var une=/javascript\s*\:/img;function dne(t,e){return une.test(e)?"":e}pp.whiteList=MD();pp.getDefaultWhiteList=MD;pp.onAttr=cne;pp.onIgnoreAttr=hne;pp.safeAttrValue=dne;var pne={indexOf:function(t,e){var i,n;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var n,s;if(Array.prototype.forEach)return t.forEach(e,i);for(n=0,s=t.length;n<s;n++)e.call(i,t[n],n,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(t){return String.prototype.trimRight?t.trimRight():t.replace(/(\s*$)/g,"")}},a1=pne;function fne(t,e){t=a1.trimRight(t),t[t.length-1]!==";"&&(t+=";");var i=t.length,n=!1,s=0,h=0,f="";function m(){if(!n){var E=a1.trim(t.slice(s,h)),k=E.indexOf(":");if(k!==-1){var I=a1.trim(E.slice(0,k)),P=a1.trim(E.slice(k+1));if(I){var L=e(s,f.length,I,P,E);L&&(f+=L+"; ")}}}s=h+1}for(;h<i;h++){var y=t[h];if(y==="/"&&t[h+1]==="*"){var x=t.indexOf("*/",h+2);if(x===-1)break;h=x+1,s=h+1,n=!1}else y==="("?n=!0:y===")"?n=!1:y===";"?n||m():y===`
`&&m()}return a1.trim(f)}var gne=fne,av=pp,mne=gne;function R$(t){return t==null}function yne(t){var e={};for(var i in t)e[i]=t[i];return e}function $D(t){t=yne(t||{}),t.whiteList=t.whiteList||av.whiteList,t.onAttr=t.onAttr||av.onAttr,t.onIgnoreAttr=t.onIgnoreAttr||av.onIgnoreAttr,t.safeAttrValue=t.safeAttrValue||av.safeAttrValue,this.options=t}$D.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,n=i.whiteList,s=i.onAttr,h=i.onIgnoreAttr,f=i.safeAttrValue,m=mne(t,function(y,x,E,k,I){var P=n[E],L=!1;if(P===!0?L=P:typeof P=="function"?L=P(k):P instanceof RegExp&&(L=P.test(k)),L!==!0&&(L=!1),k=f(E,k),!!k){var D={position:x,sourcePosition:y,source:I,isWhite:L};if(L){var j=s(E,k,D);return R$(j)?E+":"+k:j}else{var j=h(E,k,D);if(!R$(j))return j}}});return m};var vne=$D;(function(t,e){var i=pp,n=vne;function s(f,m){var y=new n(m);return y.process(f)}e=t.exports=s,e.FilterCSS=n;for(var h in i)e[h]=i[h]})(Z9,Z9.exports);var _E=Z9.exports,xE={indexOf:function(t,e){var i,n;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var n,s;if(Array.prototype.forEach)return t.forEach(e,i);for(n=0,s=t.length;n<s;n++)e.call(i,t[n],n,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(t){var e=/\s|\n|\t/,i=e.exec(t);return i?i.index:-1}},bne=_E.FilterCSS,wne=_E.getDefaultWhiteList,tw=xE;function kD(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var CD=new bne;function _ne(t,e,i){}function xne(t,e,i){}function Sne(t,e,i){}function Tne(t,e,i){}function ID(t){return t.replace(Mne,"&lt;").replace($ne,"&gt;")}function Ene(t,e,i,n){if(i=LD(i),e==="href"||e==="src"){if(i=tw.trim(i),i==="#")return"#";if(!(i.substr(0,7)==="http://"||i.substr(0,8)==="https://"||i.substr(0,7)==="mailto:"||i.substr(0,4)==="tel:"||i.substr(0,11)==="data:image/"||i.substr(0,6)==="ftp://"||i.substr(0,2)==="./"||i.substr(0,3)==="../"||i[0]==="#"||i[0]==="/"))return""}else if(e==="background"){if(lv.lastIndex=0,lv.test(i))return""}else if(e==="style"){if(N$.lastIndex=0,N$.test(i)||(L$.lastIndex=0,L$.test(i)&&(lv.lastIndex=0,lv.test(i))))return"";n!==!1&&(n=n||CD,i=n.process(i))}return i=DD(i),i}var Mne=/</g,$ne=/>/g,kne=/"/g,Cne=/&quot;/g,Ine=/&#([a-zA-Z0-9]*);?/gim,Ane=/&colon;?/gim,One=/&newline;?/gim,lv=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,N$=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,L$=/u\s*r\s*l\s*\(.*/gi;function AD(t){return t.replace(kne,"&quot;")}function OD(t){return t.replace(Cne,'"')}function PD(t){return t.replace(Ine,function(i,n){return n[0]==="x"||n[0]==="X"?String.fromCharCode(parseInt(n.substr(1),16)):String.fromCharCode(parseInt(n,10))})}function RD(t){return t.replace(Ane,":").replace(One," ")}function ND(t){for(var e="",i=0,n=t.length;i<n;i++)e+=t.charCodeAt(i)<32?" ":t.charAt(i);return tw.trim(e)}function LD(t){return t=OD(t),t=PD(t),t=RD(t),t=ND(t),t}function DD(t){return t=AD(t),t=ID(t),t}function Pne(){return""}function Rne(t,e){typeof e!="function"&&(e=function(){});var i=!Array.isArray(t);function n(f){return i?!0:tw.indexOf(t,f)!==-1}var s=[],h=!1;return{onIgnoreTag:function(f,m,y){if(n(f))if(y.isClosing){var x="[/removed]",E=y.position+x.length;return s.push([h!==!1?h:y.position,E]),h=!1,x}else return h||(h=y.position),"[removed]";else return e(f,m,y)},remove:function(f){var m="",y=0;return tw.forEach(s,function(x){m+=f.slice(y,x[0]),y=x[1]}),m+=f.slice(y),m}}}function Nne(t){for(var e="",i=0;i<t.length;){var n=t.indexOf("<!--",i);if(n===-1){e+=t.slice(i);break}e+=t.slice(i,n);var s=t.indexOf("-->",n);if(s===-1)break;i=s+3}return e}function Lne(t){var e=t.split("");return e=e.filter(function(i){var n=i.charCodeAt(0);return n===127?!1:n<=31?n===10||n===13:!0}),e.join("")}Li.whiteList=kD();Li.getDefaultWhiteList=kD;Li.onTag=_ne;Li.onIgnoreTag=xne;Li.onTagAttr=Sne;Li.onIgnoreTagAttr=Tne;Li.safeAttrValue=Ene;Li.escapeHtml=ID;Li.escapeQuote=AD;Li.unescapeQuote=OD;Li.escapeHtmlEntities=PD;Li.escapeDangerHtml5Entities=RD;Li.clearNonPrintableCharacter=ND;Li.friendlyAttrValue=LD;Li.escapeAttrValue=DD;Li.onIgnoreTagStripAll=Pne;Li.StripTagBody=Rne;Li.stripCommentTag=Nne;Li.stripBlankChar=Lne;Li.cssFilter=CD;Li.getDefaultCSSWhiteList=wne;var R3={},Rh=xE;function Dne(t){var e=Rh.spaceIndex(t),i;return e===-1?i=t.slice(1,-1):i=t.slice(1,e+1),i=Rh.trim(i).toLowerCase(),i.slice(0,1)==="/"&&(i=i.slice(1)),i.slice(-1)==="/"&&(i=i.slice(0,-1)),i}function zne(t){return t.slice(0,2)==="</"}function Fne(t,e,i){var n="",s=0,h=!1,f=!1,m=0,y=t.length,x="",E="";e:for(m=0;m<y;m++){var k=t.charAt(m);if(h===!1){if(k==="<"){h=m;continue}}else if(f===!1){if(k==="<"){n+=i(t.slice(s,m)),h=m,s=m;continue}if(k===">"){n+=i(t.slice(s,h)),E=t.slice(h,m+1),x=Dne(E),n+=e(h,n.length,x,E,zne(E)),s=m+1,h=!1;continue}if(k==='"'||k==="'")for(var I=1,P=t.charAt(m-I);P.trim()===""||P==="=";){if(P==="="){f=k;continue e}P=t.charAt(m-++I)}}else if(k===f){f=!1;continue}}return s<t.length&&(n+=i(t.substr(s))),n}var jne=/[^a-zA-Z0-9\\_:.-]/gim;function Gne(t,e){var i=0,n=0,s=[],h=!1,f=t.length;function m(I,P){if(I=Rh.trim(I),I=I.replace(jne,"").toLowerCase(),!(I.length<1)){var L=e(I,P||"");L&&s.push(L)}}for(var y=0;y<f;y++){var x=t.charAt(y),E,k;if(h===!1&&x==="="){h=t.slice(i,y),i=y+1,n=t.charAt(i)==='"'||t.charAt(i)==="'"?i:Bne(t,y+1);continue}if(h!==!1&&y===n){if(k=t.indexOf(x,y+1),k===-1)break;E=Rh.trim(t.slice(n+1,k)),m(h,E),h=!1,y=k,i=y+1;continue}if(/\s|\n|\t/.test(x))if(t=t.replace(/\s|\n|\t/g," "),h===!1)if(k=Une(t,y),k===-1){E=Rh.trim(t.slice(i,y)),m(E),h=!1,i=y+1;continue}else{y=k-1;continue}else if(k=Hne(t,y-1),k===-1){E=Rh.trim(t.slice(i,y)),E=D$(E),m(h,E),h=!1,i=y+1;continue}else continue}return i<t.length&&(h===!1?m(t.slice(i)):m(h,D$(Rh.trim(t.slice(i))))),Rh.trim(s.join(" "))}function Une(t,e){for(;e<t.length;e++){var i=t[e];if(i!==" ")return i==="="?e:-1}}function Bne(t,e){for(;e<t.length;e++){var i=t[e];if(i!==" ")return i==="'"||i==='"'?e:-1}}function Hne(t,e){for(;e>0;e--){var i=t[e];if(i!==" ")return i==="="?e:-1}}function Vne(t){return t[0]==='"'&&t[t.length-1]==='"'||t[0]==="'"&&t[t.length-1]==="'"}function D$(t){return Vne(t)?t.substr(1,t.length-2):t}R3.parseTag=Fne;R3.parseAttr=Gne;var qne=_E.FilterCSS,Jo=Li,zD=R3,Wne=zD.parseTag,Kne=zD.parseAttr,Eb=xE;function cv(t){return t==null}function Zne(t){var e=Eb.spaceIndex(t);if(e===-1)return{html:"",closing:t[t.length-2]==="/"};t=Eb.trim(t.slice(e+1,-1));var i=t[t.length-1]==="/";return i&&(t=Eb.trim(t.slice(0,-1))),{html:t,closing:i}}function Jne(t){var e={};for(var i in t)e[i]=t[i];return e}function Yne(t){var e={};for(var i in t)Array.isArray(t[i])?e[i.toLowerCase()]=t[i].map(function(n){return n.toLowerCase()}):e[i.toLowerCase()]=t[i];return e}function FD(t){t=Jne(t||{}),t.stripIgnoreTag&&(t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),t.onIgnoreTag=Jo.onIgnoreTagStripAll),t.whiteList||t.allowList?t.whiteList=Yne(t.whiteList||t.allowList):t.whiteList=Jo.whiteList,t.onTag=t.onTag||Jo.onTag,t.onTagAttr=t.onTagAttr||Jo.onTagAttr,t.onIgnoreTag=t.onIgnoreTag||Jo.onIgnoreTag,t.onIgnoreTagAttr=t.onIgnoreTagAttr||Jo.onIgnoreTagAttr,t.safeAttrValue=t.safeAttrValue||Jo.safeAttrValue,t.escapeHtml=t.escapeHtml||Jo.escapeHtml,this.options=t,t.css===!1?this.cssFilter=!1:(t.css=t.css||{},this.cssFilter=new qne(t.css))}FD.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,n=i.whiteList,s=i.onTag,h=i.onIgnoreTag,f=i.onTagAttr,m=i.onIgnoreTagAttr,y=i.safeAttrValue,x=i.escapeHtml,E=e.cssFilter;i.stripBlankChar&&(t=Jo.stripBlankChar(t)),i.allowCommentTag||(t=Jo.stripCommentTag(t));var k=!1;i.stripIgnoreTagBody&&(k=Jo.StripTagBody(i.stripIgnoreTagBody,h),h=k.onIgnoreTag);var I=Wne(t,function(P,L,D,j,H){var W={sourcePosition:P,position:L,isClosing:H,isWhite:Object.prototype.hasOwnProperty.call(n,D)},Z=s(D,j,W);if(!cv(Z))return Z;if(W.isWhite){if(W.isClosing)return"</"+D+">";var Y=Zne(j),te=n[D],ie=Kne(Y.html,function(le,pe){var ve=Eb.indexOf(te,le)!==-1,be=f(D,le,pe,ve);return cv(be)?ve?(pe=y(D,le,pe,E),pe?le+'="'+pe+'"':le):(be=m(D,le,pe,ve),cv(be)?void 0:be):be});return j="<"+D,ie&&(j+=" "+ie),Y.closing&&(j+=" /"),j+=">",j}else return Z=h(D,j,W),cv(Z)?x(j):Z},x);return k&&(I=k.remove(I)),I};var Xne=FD;(function(t,e){var i=Li,n=R3,s=Xne;function h(m,y){var x=new s(y);return x.process(m)}e=t.exports=h,e.filterXSS=h,e.FilterXSS=s,function(){for(var m in i)e[m]=i[m];for(var y in n)e[y]=n[y]}();function f(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}f()&&(self.filterXSS=t.exports)})(K9,K9.exports);var $p=K9.exports,Qne=function(t){if(typeof t!="object"||t===null||Object.prototype.toString.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},ere=function(){function t(e,i){var n=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],article:["style"],aside:["style"],audio:["autoplay","controls","loop","muted","preload"],b:[],blockquote:["style"],br:[],code:["style"],dd:["style"],del:["style"],details:["open","style"],div:["align","aria-hidden","aria-label","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],footer:["style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],header:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],main:["style"],mark:["style"],nav:["style"],ol:[],p:["style"],pre:["style"],section:["style"],source:["media","src","type"],span:["aria-hidden","aria-label","style"],strong:[],sub:["style"],summary:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],time:["style"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.arcgisCSSWhiteList=ew(ew({},$p.getDefaultCSSWhiteList()),{"align-items":!0,"align-self":!0,flex:!0,"flex-basis":!0,"flex-direction":!0,"flex-flow":!0,"flex-grow":!0,"flex-shrink":!0,"flex-wrap":!0,float:!0,gap:!0,grid:!0,"grid-area":!0,"grid-auto-columns":!0,"grid-auto-flow":!0,"grid-auto-rows":!0,"grid-column":!0,"grid-column-end":!0,"grid-column-start":!0,"grid-row":!0,"grid-row-end":!0,"grid-row-start":!0,"grid-template":!0,"grid-template-areas":!0,"grid-template-columns":!0,"grid-template-rows":!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"line-height":!0,overflow:!0}),this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(h,f,m,y){return h==="a"&&f==="href"||(h==="img"||h==="source")&&f==="src"?n.sanitizeUrl(m):$p.safeAttrValue(h,f,m,y)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var s;e&&!i?s=e:e&&i?(s=Object.create(this.arcgisFilterOptions),s.css={whiteList:this.arcgisCSSWhiteList},Object.keys(e).forEach(function(h){if(h==="whiteList")s.whiteList=n._extendObjectOfArrays([n.arcgisWhiteList,e.whiteList||{}]);else if(h==="css"){var f=e.css.whiteList;f!=null&&e.css instanceof Object&&Object.keys(f).forEach(function(m){return s.css.whiteList[m]=f[m]})}else s[h]=e[h]})):(s=Object.create(this.arcgisFilterOptions),s.whiteList=this.arcgisWhiteList,s.css={whiteList:this.arcgisCSSWhiteList}),this.xssFilterOptions=s,this._xssFilter=new $p.FilterXSS(s)}return t.prototype.sanitize=function(e,i){switch(i===void 0&&(i={}),typeof e){case"number":return isNaN(e)||!isFinite(e)?null:e;case"boolean":return e;case"string":return this._xssFilter.process(e);case"object":return this._iterateOverObject(e,i);default:return i.allowUndefined&&typeof e>"u"?void 0:null}},t.prototype.sanitizeUrl=function(e,i){var n=(i??{}).isProtocolRequired,s=n===void 0?!0:n,h=this._trim(e.substring(0,e.indexOf(":"))),f=e==="/",m=/^#/.test(e),y=h&&this.allowedProtocols.indexOf(h.toLowerCase())>-1;return f||m||y?$p.escapeAttrValue(e):!h&&!s?$p.escapeAttrValue("https://".concat(e)):""},t.prototype.sanitizeHTMLAttribute=function(e,i,n,s){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(e,i,n,s):$p.safeAttrValue(e,i,n,s)},t.prototype.validate=function(e,i){i===void 0&&(i={});var n=this.sanitize(e,i);return{isValid:e===n,sanitized:n}},t.prototype.encodeHTML=function(e){var i=this;return String(e).replace(/[&<>"'\/]/g,function(n){return i._entityMap[n]})},t.prototype.encodeAttrValue=function(e){var i=/^[a-zA-Z0-9]$/;return String(e).replace(/[\x00-\xFF]/g,function(n,s){return i.test(n)?n:"&#x".concat(Number(e.charCodeAt(s)).toString(16),";")})},t.prototype._extendObjectOfArrays=function(e){var i={};return e.forEach(function(n){Object.keys(n).forEach(function(s){Array.isArray(n[s])&&Array.isArray(i[s])?i[s]=i[s].concat(n[s]):i[s]=n[s]})}),i},t.prototype._iterateOverObject=function(e,i){var n=this;i===void 0&&(i={});try{var s=!1,h=void 0;if(Array.isArray(e))h=e.reduce(function(m,y){var x=n.validate(y,i);return x.isValid?m.concat([y]):(s=!0,m.concat([x.sanitized]))},[]);else if(Qne(e)){var f=Object.keys(e);h=f.reduce(function(m,y){var x=e[y],E=n.validate(x,i);return E.isValid?m[y]=x:(s=!0,m[y]=E.sanitized),m},{})}else return i.allowUndefined&&typeof e>"u"?void 0:null;return s?h:e}catch{return null}},t.prototype._trim=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},t}();const N3=new Map;function jD(){N3.clear()}function tre(t){return N3.get(t)}function ire(t,e){N3.set(t,e)}function x5(t){N3.delete(t)}function GD(...t){const e=_r.acquire();for(let n=0;n<t.length;n++){const s=t[n],h=typeof s;if(h==="string")e.push(s);else if(Array.isArray(s))e.push.apply(e,s);else if(h==="object")for(const f in s)s[f]&&e.push(f)}const i=e.join(" ");return _r.release(e),i}const nre=(()=>{const t=new Map,e=new ResizeObserver(n=>{var s;jD();for(const h of n)(s=t.get(h.target))==null||s(h)}),i=(n,s,h)=>(t.set(n,s),e.observe(n,h),ct(()=>{e.unobserve(n),t.delete(n)}));return(n,s,h)=>{let f=null;return Dc([Ee(()=>typeof n=="function"?n():n,m=>{f==null||f.remove(),m&&(f=i(m,s,h))},Pi),ct(()=>f==null?void 0:f.remove())])}})();function J9(t){const e=t==null?void 0:t.closest("[dir]");return e!==null&&e instanceof HTMLElement&&e.dir==="rtl"||document.dir==="rtl"}function s7e(t){const e="data-node-ref";this[t.getAttribute(e)]=null}function hv(t){const e="data-node-ref";this[t.getAttribute(e)]=t}const rre=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],sre=rre.reduce((t,e)=>(t[e]=[],t),{}),ore=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],UD=new ere({whiteList:sre,onTagAttr:(t,e,i)=>{const n=`${e}="${i}"`;if(ore.includes(e))return n},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function BD(t){return t==="Enter"||t===" "}async function HD(t,e){await YP(Xm(e));const i=typeof t=="function"?t():t;i&&("setFocus"in i&&typeof i.setFocus=="function"?await i.setFocus():i instanceof HTMLElement&&i.focus())}const VD="http://www.w3.org/",L3=`${VD}2000/svg`,qD=`${VD}1999/xlink`;let z$=[],SE=(t,e)=>{let i={};return Object.keys(t).forEach(n=>{i[n]=t[n]}),e&&Object.keys(e).forEach(n=>{i[n]=e[n]}),i},TE=(t,e)=>t.vnodeSelector===e.vnodeSelector&&(t.properties&&e.properties?t.properties.key===e.properties.key&&t.properties.bind===e.properties.bind:!t.properties&&!e.properties),WD=t=>{if(typeof t!="string")throw new Error("Style values must be strings")},are=(t,e,i)=>{if(e.vnodeSelector!==""){for(let n=i;n<t.length;n++)if(TE(t[n],e))return n}return-1},S5=(t,e,i,n)=>{let s=t[e];if(s.vnodeSelector==="")return;let h=s.properties;if(!(h&&(h.key===void 0?h.bind:h.key))){for(let f=0;f<t.length;f++)if(f!==e){let m=t[f];if(TE(m,s))throw new Error(`${i.vnodeSelector} had a ${s.vnodeSelector} child ${n==="added"?n:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},lre=t=>{if(t.properties){let e=t.properties.enterAnimation;e&&e(t.domNode,t.properties)}},Y9=[],X9=!1,KD=t=>{(t.children||[]).forEach(KD),t.properties&&t.properties.afterRemoved&&t.properties.afterRemoved.apply(t.properties.bind||t.properties,[t.domNode])},F$=()=>{X9=!1,Y9.forEach(KD),Y9.length=0},j$=t=>{Y9.push(t),X9||(X9=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(F$,{timeout:16}):setTimeout(F$,16))},G$=t=>{let e=t.domNode;if(t.properties){let i=t.properties.exitAnimation;if(i)return e.style.pointerEvents="none",void i(e,()=>{e.parentNode&&(e.parentNode.removeChild(e),j$(t))},t.properties)}e.parentNode&&(e.parentNode.removeChild(e),j$(t))},cre=(t,e,i)=>{if(!e)return;let n=i.eventHandlerInterceptor,s=Object.keys(e),h=s.length;for(let f=0;f<h;f++){let m=s[f],y=e[m];if(m==="className")throw new Error('Property "className" is not supported, use "class".');if(m==="class")e4(t,y,!0);else if(m==="classes"){let x=Object.keys(y),E=x.length;for(let k=0;k<E;k++){let I=x[k];y[I]&&t.classList.add(I)}}else if(m==="styles"){let x=Object.keys(y),E=x.length;for(let k=0;k<E;k++){let I=x[k],P=y[I];P&&(WD(P),i.styleApplyer(t,I,P))}}else if(m!=="key"&&y!=null){let x=typeof y;x==="function"?(m.lastIndexOf("on",0)===0&&(n&&(y=n(m,y,t,e)),m==="oninput"&&function(){let E=y;y=function(k){E.apply(this,[k]),k.target["oninput-value"]=k.target.value}}()),t[m]=y):i.namespace===L3?m==="href"?t.setAttributeNS(qD,m,y):t.setAttribute(m,y):x==="string"&&m!=="value"?m==="innerHTML"?t[m]=UD.sanitize(y):Q9(t)&&m in t?t[m]=y:t.setAttribute(m,y):t[m]=y}}};function Q9(t){if(!(t instanceof Element&&t.tagName.includes("-")))return!1;const e=window.customElements.get(t.tagName.toLowerCase());return!!e&&t instanceof e}let iw,hre=(t,e,i)=>{if(e)for(let n of e)xf(n,t,void 0,i)},ZD=(t,e,i)=>{hre(t,e.children,i),e.text&&(t.textContent=e.text),cre(t,e.properties,i),e.properties&&e.properties.afterCreate&&e.properties.afterCreate.apply(e.properties.bind||e.properties,[t,i,e.vnodeSelector,e.properties,e.children])},xf=(t,e,i,n)=>{let s,h=0,f=t.vnodeSelector,m=e.ownerDocument;if(f==="")s=t.domNode=m.createTextNode(t.text),i!==void 0?e.insertBefore(s,i):e.appendChild(s);else{for(let y=0;y<=f.length;++y){let x=f.charAt(y);if(y===f.length||x==="."||x==="#"){let E=f.charAt(h-1),k=f.slice(h,y);E==="."?s.classList.add(k):E==="#"?s.id=k:(k==="svg"&&(n=SE(n,{namespace:L3})),n.namespace!==void 0?s=t.domNode=m.createElementNS(n.namespace,k):(s=t.domNode=t.domNode||m.createElement(k),k==="input"&&t.properties&&t.properties.type!==void 0&&s.setAttribute("type",t.properties.type)),i!==void 0?e.insertBefore(s,i):s.parentNode!==e&&e.appendChild(s)),h=y+1}}ZD(s,t,n)}},e4=(t,e,i)=>{e&&e.split(" ").forEach(n=>{n&&t.classList.toggle(n,i)})},ure=(t,e,i,n)=>{if(!i)return;let s=!1,h=Object.keys(i),f=h.length;for(let m=0;m<f;m++){let y=h[m],x=i[y],E=e[y];if(y==="class")E!==x&&(e4(t,E,!1),e4(t,x,!0));else if(y==="classes"){let k=t.classList,I=Object.keys(x),P=I.length;for(let L=0;L<P;L++){let D=I[L],j=!!x[D];j!==!!E[D]&&(s=!0,j?k.add(D):k.remove(D))}}else if(y==="styles"){let k=Object.keys(x),I=k.length;for(let P=0;P<I;P++){let L=k[P],D=x[L];D!==E[L]&&(s=!0,D?(WD(D),n.styleApplyer(t,L,D)):n.styleApplyer(t,L,""))}}else if(x||typeof E!="string"||(x=""),y!=="value"||Q9(t)){if(x!==E){let k=typeof x;k==="function"&&n.eventHandlerInterceptor||(n.namespace===L3?y==="href"?t.setAttributeNS(qD,y,x):t.setAttribute(y,x):k==="string"?y==="innerHTML"?t[y]=UD.sanitize(x):y==="role"&&x===""?t.removeAttribute(y):Q9(t)&&y in t?t[y]=x:t.setAttribute(y,x):t[y]!==x&&(t[y]=x),s=!0)}}else{let k=t[y];k!==x&&(t["oninput-value"]?k===t["oninput-value"]:x!==E)&&(t[y]=x,t["oninput-value"]=void 0),x!==E&&(s=!0)}}return s},dre=(t,e,i,n,s)=>{if(i===n)return!1;n=n||z$;let h,f=(i=i||z$).length,m=n.length,y=0,x=0,E=!1;for(;x<m;){let k=y<f?i[y]:void 0,I=n[x];if(k!==void 0&&TE(k,I))E=iw(k,I,s)||E,y++;else{let P=are(i,I,y+1);if(P>=0){for(h=y;h<P;h++)G$(i[h]),S5(i,h,t,"removed");E=iw(i[P],I,s)||E,y=P+1}else xf(I,e,y<f?i[y].domNode:void 0,s),lre(I),S5(n,x,t,"added")}x++}if(f>y)for(h=y;h<f;h++)G$(i[h]),S5(i,h,t,"removed");return E};iw=(t,e,i)=>{let n=t.domNode,s=!1;if(t===e)return!1;let h=!1;if(e.vnodeSelector===""){if(e.text!==t.text){let f=n.ownerDocument.createTextNode(e.text);return n.parentNode.replaceChild(f,n),e.domNode=f,s=!0,s}e.domNode=n}else e.vnodeSelector.lastIndexOf("svg",0)===0&&(i=SE(i,{namespace:L3})),t.text!==e.text&&(h=!0,e.text===void 0?n.removeChild(n.firstChild):n.textContent=e.text),e.domNode=n,h=dre(e,n,t.children,e.children,i)||h,h=ure(n,t.properties,e.properties,i)||h,e.properties&&e.properties.afterUpdate&&e.properties.afterUpdate.apply(e.properties.bind||e.properties,[n,i,e.vnodeSelector,e.properties,e.children]);return h&&e.properties&&e.properties.updateAnimation&&e.properties.updateAnimation(n,e.properties,t.properties),s};let l1=(t,e)=>({getLastRender:()=>t,update:i=>{if(t.vnodeSelector!==i.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let n=t;t=i,iw(n,i,e)},domNode:t.domNode});const pre={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,i)=>{e.charAt(0)==="-"?t.style.setProperty(e,i):t.style[e]=i}};let qp=t=>SE(pre,t),Hh={create:(t,e)=>(e=qp(e),xf(t,document.createElement("div"),void 0,e),l1(t,e)),append:(t,e,i)=>(i=qp(i),xf(e,t,void 0,i),l1(e,i)),insertBefore:(t,e,i)=>(i=qp(i),xf(e,t.parentNode,t,i),l1(e,i)),merge:(t,e,i)=>(i=qp(i),e.domNode=t,ZD(t,e,i),l1(e,i)),replace:(t,e,i)=>(i=qp(i),xf(e,t.parentNode,t,i),t.parentNode.removeChild(t),l1(e,i))},JD,fre=(t,e)=>{let i=[];for(;t&&t!==e;)i.push(t),t=t.parentNode;return i};JD=Array.prototype.find?(t,e)=>t.find(e):(t,e)=>t.filter(e)[0];let gre=(t,e)=>{let i=t;return e.forEach(n=>{i=i&&i.children?JD(i.children,s=>s.domNode===n):void 0}),i},mre=(t,e,i)=>{let n=function(s){i("domEvent",s);let h=e(),f=fre(s.currentTarget,h.domNode);f.reverse();let m,y=gre(h.getLastRender(),f);return t.scheduleRender(),y&&(m=y.properties[`on${s.type}`].apply(y.properties.bind||this,arguments)),i("domEventProcessed",s),m};return(s,h,f,m)=>n},U$=t=>{let e,i,n=qp(t),s=n.performanceLogger,h=!0,f=!1,m=[],y=[],x=(k,I,P)=>{let L,D=()=>L;n.eventHandlerInterceptor=mre(e,D,s),L=k(I,P(),n),m.push(L),y.push(P)},E=()=>{if(i=void 0,h){h=!1,s("renderStart",void 0);for(let k=0;k<m.length;k++){let I=y[k]();s("rendered",void 0),m[k].update(I),s("patched",void 0)}s("renderDone",void 0),h=!0}};return e={renderNow:E,scheduleRender:()=>{i||f||(i=requestAnimationFrame(E))},stop:()=>{i&&(cancelAnimationFrame(i),i=void 0),f=!0},resume:()=>{f=!1,h=!0,e.scheduleRender()},append:(k,I)=>{x(Hh.append,k,I)},insertBefore:(k,I)=>{x(Hh.insertBefore,k,I)},merge:(k,I)=>{x(Hh.merge,k,I)},replace:(k,I)=>{x(Hh.replace,k,I)},detach:k=>{for(let I=0;I<y.length;I++)if(y[I]===k)return y.splice(I,1),m.splice(I,1)[0];throw new Error("renderFunction was not found")}},e},ch=class extends Oe{constructor(){super(...arguments),this.items=new Pe,this._watchUpdatingTracking=new Jh,this._callbacks=new Map,this._projector=U$(),this._hiddenProjector=U$()}get needsRender(){return this.items.length>0}get updating(){var e;return((e=this._watchUpdatingTracking)==null?void 0:e.updating)??!1}initialize(){const e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,i=>{for(const n of i.added){const s=()=>n.render();this._callbacks.set(n,s),this._projector.append(this.surface,s)}for(const n of i.removed){const s=this._projector.detach(this._callbacks.get(n));this.surface.removeChild(s.domNode),this._callbacks.delete(n)}})}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach(e=>this._projector.detach(e)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){const i=this._hiddenSurface,n=this._hiddenProjector;let s;const h=()=>(s=e.render(),s);n.append(i,h),n.renderNow();const f={left:0,top:0,right:0,bottom:0};if(s!=null&&s.domNode){const m=s.domNode.getBoundingClientRect();f.left=m.left,f.top=m.top,f.right=m.right,f.bottom=m.bottom}for(n.detach(h);i.firstChild;)i.removeChild(i.firstChild);return f}overlaps(e,i){const n=this.computeBoundingRect(e),s=this.computeBoundingRect(i);return Math.max(n.left,s.left)<=Math.min(n.right,s.right)&&Math.max(n.top,s.top)<=Math.min(n.bottom,s.bottom)}get hasVisibleItems(){return this.items.some(e=>e.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(e,i){const n=!!(i!=null&&i.disableDecorations);if(!this.items.some(h=>h.visible&&!(n&&h.isDecoration)))return;const s=e.getContext("2d");s.save(),s.font=this._fontString(),this.items.forEach(h=>{n&&h.isDecoration||(s.save(),h.renderCanvas(s),s.restore())}),s.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};_([S({readOnly:!0})],ch.prototype,"surface",void 0),_([S({readOnly:!0})],ch.prototype,"items",void 0),_([S({readOnly:!0})],ch.prototype,"needsRender",null),_([S({readOnly:!0})],ch.prototype,"_watchUpdatingTracking",void 0),_([S({readOnly:!0})],ch.prototype,"updating",null),ch=_([J("esri.views.overlay.ViewOverlay")],ch);const B$=ch,T5=[0,0];function yre(t){const e=(t.ownerDocument||window.document).defaultView,i=t.getBoundingClientRect();return T5[0]=i.left+((e==null?void 0:e.pageXOffset)??0),T5[1]=i.top+((e==null?void 0:e.pageYOffset)??0),T5}function H$(t){t&&(t.textContent="",t.parentNode&&t.parentNode.removeChild(t))}function vre(t){const e=document.createElement("div");return t.appendChild(e),e}const c1=16,uv=750,bre=512,wre=2,_re=t=>{let e=class extends t{constructor(...i){super(...i),this._freqInfo={freq:c1,time:uv},this._overlayRenderTaskHandle=null,this.height=0,this.messagesCommon=null,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([Ee(()=>this.cursor,n=>{const{surface:s}=this;s&&s.setAttribute("data-cursor",n)}),Ee(()=>this.navigating,n=>{const{surface:s}=this;s&&s.setAttribute("data-navigating",n.toString())})])}initialize(){this.addHandles([Ee(()=>this.ui,(i,n)=>this._handleUIChange(i,n),Ct),this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui=mt(this.ui),this.container=null)}get container(){return this._get("container")??null}set container(i){const n=this._get("container"),s=wE(i);if(s||typeof i!="string"||Ae.getLogger(this).error("#container",`element with id '${i}' not found`),n===s)return;if(this._stopMeasuring(),n&&(n.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(H$(this.root),this._set("root",null)),this.userContent&&(P$(this.userContent,n),H$(this.userContent),this._set("userContent",null))),!s)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);s.classList.add("esri-view");const h=document.createElement("div");h.className="esri-view-user-storage",P$(s,h),s.appendChild(h),this._set("userContent",h);const f=document.createElement("div");f.className="esri-view-root",s.insertBefore(f,s.firstChild),this._set("root",f);const m=document.createElement("div");m.className="esri-view-surface",m.setAttribute("role","application"),m.tabIndex=0,f.appendChild(m),this._set("surface",m);const y=new B$;f.appendChild(y.surface),this._set("overlay",y),this.addHandles(Ee(()=>y.needsRender,x=>{x&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=Xf({render:()=>{var E;return(E=this.overlay)==null?void 0:E.render()}}):this._overlayRenderTaskHandle=Rt(this._overlayRenderTaskHandle)})),this.forceDOMReadyCycle(),this._set("container",s),this._startMeasuring()}get focused(){const i=document.activeElement===this.surface;return document.hasFocus()&&i}get size(){return[this.width,this.height]}blur(){var i;(i=this.surface)==null||i.blur()}focus(){var i;(i=this.surface)==null||i.focus()}pageToContainer(i,n,s){const h=this.position;return i-=h?h[0]:0,n-=h?h[1]:0,s?(s[0]=i,s[1]=n):s=[i,n],s}containerToPage(i,n,s){const h=this.position;return i+=h?h[0]:0,n+=h?h[1]:0,s?(s[0]=i,s[1]=n):s=[i,n],s}_handleUIChange(i,n){this.removeHandles("ui"),n&&n!==i&&n.destroy(),i&&(i.view=this,this.addHandles(Ee(()=>this.root,s=>{i.container=s?vre(s):null},Ct),"ui")),this._set("ui",i)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const i=this._freqInfo;i.freq=c1,i.time=uv,this.addHandles([Ym(window,"resize",()=>{i.freq=c1,i.time=uv}),Xf({prepare:n=>{const s=this._measure(),h=this._freqInfo;if(h.time+=n.deltaTime,s&&(h.freq=c1,this._get("resizing")||this._set("resizing",!0)),h.time<h.freq)return;h.time=0;const f=this._position();h.freq=f||s?c1:Math.min(uv,h.freq*wre),!s&&h.freq>=bre&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){const i=this.container,n=i?i.clientWidth:0,s=i?i.clientHeight:0;if(n===0||s===0)return this.suspended||this._set("suspended",!0),!1;const h=this.width,f=this.height;return n===h&&s===f?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",n),this._set("height",s),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:h,oldHeight:f,width:n,height:s}),!0)}_position(){const i=this.container,n=this.position,s=i&&yre(i);return!!s&&(!n||s[0]!==n[0]||s[1]!==n[1])&&(this._set("position",[s[0],s[1]]),!0)}forceDOMReadyCycle(){}};return _([S()],e.prototype,"container",null),_([S({readOnly:!0})],e.prototype,"focused",null),_([S({readOnly:!0})],e.prototype,"height",void 0),_([S()],e.prototype,"messagesCommon",void 0),_([S({type:B$})],e.prototype,"overlay",void 0),_([S({readOnly:!0})],e.prototype,"position",void 0),_([S({readOnly:!0})],e.prototype,"resizing",void 0),_([S({readOnly:!0})],e.prototype,"root",void 0),_([S({value:null,readOnly:!0})],e.prototype,"size",null),_([S({readOnly:!0})],e.prototype,"surface",void 0),_([S({readOnly:!0})],e.prototype,"suspended",void 0),_([S()],e.prototype,"ui",void 0),_([S({readOnly:!0})],e.prototype,"userContent",void 0),_([S({readOnly:!0})],e.prototype,"width",void 0),_([S()],e.prototype,"widthBreakpoint",void 0),e=_([J("esri.views.DOMContainer")],e),e},YD=de("mac")?"Meta":"Control",xre=new Set(["Alt","Control","Meta","Shift","Ctrl","Primary"]),Sre=t=>xre.has(t);let Tre=class{constructor(e,i=[]){this.eventType=e,this.keyModifiers=i}matches(e){if(e.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const i=e.modifiers;for(const n of this.keyModifiers)if(!i.has(n))return!1;return!0}},Tn=class{constructor(e){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=e}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const e in this._incoming){const i=this._incoming[e];for(const n of i)this._incomingEventMatches.push(n.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(e=>e.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(e){this._manager||(e.setEventCallback(i=>this._handleEvent(i)),e.setUninstallCallback(()=>this._onUninstall()),this._manager=e)}onUninstall(){}registerIncoming(e,i,n){let s;typeof i=="function"?(n=i,s=[]):s=i||[];const h=typeof e=="string"?new Tre(e,s):e,f=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},m=E=>{const k=this._incoming[E.match.eventType];if(k){const I=k.indexOf(E);k.splice(I,1),f(),this._manager&&this._manager.updateDependencies()}},y=new Ere(h,n,{onPause:m,onRemove:m,onResume:E=>{const k=this._incoming[E.match.eventType];k&&!k.includes(E)&&(k.push(E),f(),this._manager&&this._manager.updateDependencies())}});let x=this._incoming[h.eventType];return x||(x=[],this._incoming[h.eventType]=x),x.push(y),f(),this._manager&&this._manager.updateDependencies(),y}registerOutgoing(e){if(this._outgoing[e])throw new Error("There is already a callback registered for this outgoing InputEvent: "+e);const i=new Mre(e,{onEmit:(n,s,h,f)=>{var m;(m=this._manager)==null||m.emit(n.eventType,s,h,f)},onRemove:n=>{var s;delete this._outgoing[n.eventType],(s=this._manager)==null||s.updateDependencies()}});return this._outgoing[e]=i,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),i}startCapturingPointer(e){var i;(i=this._manager)==null||i.setPointerCapture(e,!0)}stopCapturingPointer(e){var i;(i=this._manager)==null||i.setPointerCapture(e,!1)}refreshHasPendingInputs(){var e;(e=this._manager)==null||e.refreshHasPendingInputs()}_onUninstall(){this._manager&&(this.onUninstall(),this._manager=null)}_handleEvent(e){var n;const i=this._incoming[e.type];if(i){for(const s of i)if(s.match.matches(e)&&((n=s.callback)==null||n.call(s,e),e.shouldStopPropagation()))break}}},Ere=class{constructor(e,i,n){this.match=e,this._callback=i,this._handler=n}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},Mre=class{constructor(e,i){this.eventType=e,this._removed=!1,this._handler=i}emit(e,i,n){this._removed||this._handler.onEmit(this,e,i,n)}remove(){this._removed=!0,this._handler.onRemove(this)}},$re=class extends Tn{constructor(e){super(!0),this._onChange=e,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",i=>this._update(i.data))}_update(e){const i=e.native.pointerType==="touch"?"touch":"mouse",{x:n,y:s}=e;i===this._value&&this._x===n&&this._y===s||(this._value=i,this._x=n,this._y=s,this._onChange(i,n,s))}},kre=class{constructor(e,i){this._observable=new R0,this._value=e,this._equalityFunction=i}get value(){return Ge(this._observable),this._value}set value(e){this._equalityFunction(e,this._value)||(this._value=e,this._observable.notify())}mutate(e){e(this._value),this._observable.notify()}};function vm(t,e=SP){return new kre(t,e)}let Cre=class extends Tn{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=vm(!1),this._onPointerAdd=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.add(e.native.pointerId),this._update())},this._onPointerRemove=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.delete(e.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}},Ire=class{constructor(e,i){this._owner=i,this._properties={},this._afterDispatchHandle=null;for(const n in e){const s=e[n],h=new VP(s,void 0,void 0,2,2);this._properties[n]={pool:h,acquired:[]}}this._afterDispatchHandle=xZ(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const e in this._properties){const i=this._properties[e];for(const n of i.acquired)Z7(n)||i.pool.release(n);i.pool.destroy(),i.pool=null,i.acquired=null}this._properties=null,this._owner=null}get(e){const i=this._owner._get(e),n=this._properties[e];let s=n.pool.acquire();for(n.acquired.push(s);s===i;)n.acquired.push(s),s=n.pool.acquire();return s}_release(){for(const e in this._properties){const i=this._properties[e];let n=0;for(const s of i.acquired)Z7(s)?i.acquired[n++]=s:i.pool.release(s);i.acquired.length=n}}},qs=class extends Oe{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=YD,this._latestPointerType="mouse",this._propertiesPool=new Ire({latestPointerLocation:Pre},this),this.latestPointerLocation=null,this._paused=!1,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const i of e)this.uninstallHandlers(i);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(e=>e.handler.hasPendingInputs)}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get updating(){return this.hasPendingInputs||this._paused}installHandlers(e,i,n=Wt.INTERNAL){if(this._nameToGroup[e]||i.length===0)return;const s={name:e,handlers:i.map(h=>({handler:h,active:!0,removed:!1,priorityIndex:0,groupPriority:n,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[e]=s;for(let h=s.handlers.length-1;h>=0;h--){const f=s.handlers[h];this._handlers.push(f),f.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(m,y,x,E,k)=>{this._emitInputEvent(f.priorityIndex+1,m,y,x,k,E)},setPointerCapture:(m,y)=>{this._setPointerCapture(s,f,m,y)},setEventCallback:m=>{f.eventCallback=m},setUninstallCallback:m=>{f.uninstallCallback=m},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const i=this._nameToGroup[e];i?(i.handlers.forEach(n=>{var s;n.removed=!0,(s=n.uninstallCallback)==null||s.call(n)}),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):Ae.getLogger(this).error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return this._nameToGroup[e]!==void 0}isModifierKeyDown(e){return this._activeKeyModifiers.has(e)}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,i=new Set;this._handlersPriority=[];for(let n=this._handlers.length-1;n>=0;n--){const s=this._handlers[n];s.priorityIndex=n,this._handlersPriority.push(s)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let n=this._handlersPriority.length-1;n>=0;n--){const s=this._handlersPriority[n];s.priorityIndex=n;let h=s.handler.hasSideEffects;if(!h){for(const f of s.handler.outgoingEventTypes)if(e.has(f)){h=!0;break}}if(h)for(const f of s.handler.incomingEventMatches){e.add(f.eventType);for(const m of f.keyModifiers)Sre(m)||i.add(m)}s.active=h}this._sourceEvents=e,this._keyModifiers=i,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,i,n){this._latestPointerType=e;const s=this._get("latestPointerLocation");if(s==null||s.x!==i||s.y!==n){const h=this._propertiesPool.get("latestPointerLocation");h.x=i,h.y=n,this._set("latestPointerLocation",h)}}_onEventReceived(e,i){if(e==="pointer-capture-lost"){const h=i;this._pointerCaptures.delete(h.native.pointerId)}this._updateKeyModifiers(e,i);const n=this.test.timestamp!=null?this.test.timestamp:i.native?i.native.timestamp:void 0,s=i.native?i.native.cancelable:void 0;this._emitInputEventFromSource(e,i,n,s)}_updateKeyModifiers(e,i){if(!i)return;let n=!1;const s=()=>{n||(this._activeKeyModifiers=new Set(this._activeKeyModifiers),n=!0)},h=(m,y)=>{y&&!this._activeKeyModifiers.has(m)?(s(),this._activeKeyModifiers.add(m)):!y&&this._activeKeyModifiers.has(m)&&(s(),this._activeKeyModifiers.delete(m))};if(e==="key-down"||e==="key-up"){const m=i.key;this._keyModifiers.has(m)&&h(m,e==="key-down")}const f=i.native;h("Alt",!!(f!=null&&f.altKey)),h("Control",!!(f!=null&&f.ctrlKey)),h("Ctrl",!!(f!=null&&f.ctrlKey)),h("Shift",!!(f!=null&&f.shiftKey)),h("Meta",!!(f!=null&&f.metaKey)),h("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new $re((e,i,n)=>this._setLatestPointer(e,i,n)),this._multiTouchHandler=new Cre,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],Wt.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,Wt.INTERNAL)}_setPointerCapture(e,i,n,s){const h=e.name+"-"+i.priorityIndex,f=this._pointerCaptures.get(n.pointerId)||new Set;this._pointerCaptures.set(n.pointerId,f),s?(f.add(h),f.size===1&&this.eventSource&&this.eventSource.setPointerCapture(n,!0)):f.has(h)&&(f.delete(h),f.size===0&&(this._pointerCaptures.delete(n.pointerId),this.eventSource&&this.eventSource.setPointerCapture(n,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(e=>!e.removed),this.updateDependencies()}_emitInputEventFromSource(e,i,n,s){this._emitInputEvent(0,e,i,n,s)}_emitInputEvent(e,i,n,s,h,f){const m=s!==void 0?s:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),y=h!==void 0&&h,x={event:new Are(i,n,m,f||this._activeKeyModifiers,y),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(x):this._doNewPropagation(x)}_doNewPropagation(e){this._currentPropagation={events:new W2,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){var i,n,s;this._paused=!1;const e=this._currentPropagation;if(e){for(;e.events.length>0;){const{event:h,priorityIndex:f}=e.events.pop(),m=(i=h.data)==null?void 0:i.eventId;if(!(m!=null&&this._stoppedPropagationEventIds.has(m)))for(e.currentHandler=this._handlersPriority[f];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!h.shouldStopPropagation()&&((s=(n=e.currentHandler).eventCallback)==null||s.call(n,h)),h.shouldStopPropagation()){m!=null&&this._stoppedPropagationEventIds.add(m);break}if(h.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:h,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(e){const i=new W2;i.push(e);const n=this._currentPropagation;if(n){for(;n.events.length;)i.push(n.events.pop());n.events=i,n.currentHandler=null,this._paused=!0}}_compareHandlerPriority(e,i){if(e.handler.hasSideEffects!==i.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==i.groupPriority)return e.groupPriority>i.groupPriority?-1:1;for(const n of e.handler.incomingEventMatches)for(const s of i.handler.incomingEventMatches){if(n.eventType!==s.eventType)continue;const h=n.keyModifiers.filter(f=>s.keyModifiers.includes(f));if(h.length===n.keyModifiers.length!=(h.length===s.keyModifiers.length))return n.keyModifiers.length>s.keyModifiers.length?-1:1}return e.priorityIndex>i.priorityIndex?-1:1}_sortHandlersPriority(e){const i=[];for(const n of e){let s=0;for(;s<i.length&&this._compareHandlerPriority(n,i[s])>=0;)s++;i.splice(s,0,n)}return i}get debug(){const e=i=>{const n=this._setPointerCapture;this._setPointerCapture=()=>{},i(),this._setPointerCapture=n};return{injectEvent:(i,n)=>{e(()=>this._onEventReceived(i,n))},disablePointerCapture:e}}};_([S({readOnly:!0})],qs.prototype,"hasPendingInputs",null),_([S({constructOnly:!0})],qs.prototype,"eventSource",void 0),_([S({constructOnly:!0})],qs.prototype,"recognizers",void 0),_([S()],qs.prototype,"_latestPointerType",void 0),_([S()],qs.prototype,"latestPointerType",null),_([S()],qs.prototype,"multiTouchActive",null),_([S({readOnly:!0})],qs.prototype,"latestPointerLocation",void 0),_([S()],qs.prototype,"_paused",void 0),_([S({readOnly:!0})],qs.prototype,"updating",null),qs=_([J("esri.views.input.InputManager")],qs);let Are=class{constructor(e,i,n,s,h){this.type=e,this.data=i,this.timestamp=n,this.modifiers=s,this.cancelable=h,this._propagationState=Nh.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=Nh.STOPPED}shouldStopPropagation(){return!!(this._propagationState&Nh.STOPPED)}async(e){this._propagationState|=Nh.PAUSED;const i=(n,s)=>{this._propagationState&=~Nh.PAUSED;const h=this._resumeCallback;if(this._resumeCallback=null,h&&h(),s)throw n;return n};return(typeof e=="function"?e():e).then(n=>i(n,!1),n=>i(n,!0))}shouldPausePropagation(e){return!!(this._propagationState&Nh.PAUSED)&&(this._resumeCallback=e,!0)}preventDefault(){this.data.native.preventDefault()}};var Nh;(function(t){t[t.NONE=0]="NONE",t[t.STOPPED=1]="STOPPED",t[t.PAUSED=2]="PAUSED"})(Nh||(Nh={}));const Wt={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};let Ore=class{};const Pre=Ore;function eh(t){return t!=null&&"open"in t&&"declaredClass"in t}function V$(t){return t!=null&&"declaredClass"in t&&"dockOptions"in t}const Rre=t=>{let e=class extends t{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([Ee(()=>[this.ui,this.popup],([i,n],s)=>{const h="popup",f="manual";if(s){const[m,y]=s;m&&eh(y)&&(y.view=null,V$(y)&&m.remove(y,h))}i&&eh(n)&&(n.view=this,V$(n)&&i.add(n,{key:h,position:f,internal:!0}))},Ct),this.on("click",i=>{this.popup&&this.popupEnabled&&(i.pointerType!=="mouse"||i.button===0)&&(eh(this.popup)?this.popup.viewModel.handleViewClick(i):i.async(async()=>{await this.setupPopup(),eh(this.popup)&&!this.destroyed&&this.ready&&this.popupEnabled&&this.popup.viewModel.handleViewClick(i)}))},Wt.WIDGET)]),su(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>{ge(()=>import("./Popup-bPyXRFjM.js"),__vite__mapDeps([144,145,60,146,147,148,149,97,107,150,151,152,81,34,153,24,30,27,154,104,79,71,2,3,155,4,156,157,158,159,160,161,58,56,57,13,12,16,59,162,163,26,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,84,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,133,197]),import.meta.url)})}destroy(){this.destroyed||this.closePopup()}async openPopup(i){if(eh(this.popup))return this.popup.open(i);try{if(await this.setupPopup(),!this.popup)return void Ae.getLogger(this).error(new ce("view:null-popup","Popup is null and can't be opened"));this.popup.open(i)}catch{}}closePopup(){var i;(i=this._popupSetupTask)==null||i.abort(),eh(this.popup)&&this.popup.close()}async fetchPopupFeatures(i,n){return await this.when(),this._popupHitsToFeatures(await this._getPopupHits(i,n),n)}async setupPopup(){var i;if((i=this._popupSetupTask)==null||i.abort(),this.popup&&!eh(this.popup))return this._popupSetupTask=up(async n=>{const{default:s}=await ge(()=>import("./Popup-bPyXRFjM.js"),__vite__mapDeps([144,145,60,146,147,148,149,97,107,150,151,152,81,34,153,24,30,27,154,104,79,71,2,3,155,4,156,157,158,159,160,161,58,56,57,13,12,16,59,162,163,26,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,84,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,133,197]),import.meta.url);if(Jt(n),!this.popup||eh(this.popup))return;const h=this.popup;delete h.open,delete h.close,this.popup=new s(h)}),this._popupSetupTask.promise}async _popupHitsToFeatures({location:i,hits:n},s){const h=[],f=[];let m=!1;const y=eZ(s,de("popup-view-fetch-timeout")??Lre),x=I=>{const P=new Nre(I);return f.push(P),h.push(P.promise),P},E=I=>{const P=f.at(-1);return P&&P.layerView===I&&!m?P:x(I)};for(const I of n)"graphic"in I?(E(I.layerView).graphics.push(I.graphic),m=!1):(h.push(I.layerView.fetchPopupFeaturesAtLocation(I.mapPoint,y)),m=!0);f.map(I=>I.resolve(y));const k=QK(h).then(I=>I.filter(P=>!!P).flat());return{pendingFeatures:h,allGraphicsPromise:k,location:i}}async _getPopupHits(i,n){const{hits:s,location:h}=await this.popupHitTest(i);Jt(n);const f=[];for(const m of s)if("graphic"in m){if(this._isValidPopupGraphic(m.graphic,n)){const y=this._isValidPopupGraphicsLayerView(m.layerView)?m.layerView:void 0;f.push({graphic:m.graphic,layerView:y})}}else this._isValidPopupLocationLayerView(m.layerView)&&f.push({mapPoint:m.mapPoint,layerView:m.layerView});return{hits:f,location:h}}_isValidPopupGraphic(i,n){return i&&!!i.getEffectivePopupTemplate(n==null?void 0:n.defaultPopupTemplateEnabled)}_isValidPopupGraphicsLayerView(i){return!i||(!("layer"in i)||!i.suspended)&&"fetchPopupFeaturesFromGraphics"in i}_isValidPopupLocationLayerView(i){return(!("layer"in i)||!i.suspended)&&"fetchPopupFeaturesAtLocation"in i}};return _([S()],e.prototype,"popup",void 0),_([S()],e.prototype,"popupEnabled",void 0),e=_([J("esri.views.PopupView")],e),e};let Nre=class{constructor(e){this.layerView=e,this._resolver=Rs(),this.graphics=[]}get promise(){return this._resolver.promise}resolve(e){const{layerView:i,graphics:n,_resolver:s}=this;if(!i)return s.resolve(n),s.promise;let h;return i.fetchPopupFeaturesFromGraphics(n,e).catch(f=>(h=f,null)).then(f=>{f?s.resolve(f):s.reject(h)}),s.promise}};const Lre=5e3;function cu(t,e,i=Pe){return e||(e=new i),e===t||(e.removeAll(),Dre(t)?e.addMany(t):t&&e.add(t)),e}function XD(t){return t}function Dre(t){return t&&(Array.isArray(t)||"items"in t&&Array.isArray(t.items))}var Lh;(function(t){t[t.PENDING=0]="PENDING",t[t.RESOLVED=1]="RESOLVED",t[t.REJECTED=2]="REJECTED"})(Lh||(Lh={}));let zre=class{constructor(){this._resolver=Rs(),this._status=Lh.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=Lh.RESOLVED,this._cleanUp()},()=>{this._status=Lh.REJECTED,this._cleanUp()}),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(e){this._resolvingPromises.push(e),this._tryResolve()}isResolved(){return this._status===Lh.RESOLVED}isRejected(){return this._status===Lh.REJECTED}isFulfilled(){return this._status!==Lh.PENDING}abort(){this._resolver.reject(ei())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const e=Rs(),i=[...this._resolvingPromises,e.promise],n=this._allPromise=Promise.all(i);n.then(()=>{this.isFulfilled()||this._allPromise!==n||this._resolver.resolve()},s=>{this.isFulfilled()||this._allPromise!==n||Ir(s)||this._resolver.reject(s)}),e.resolve()}};const D3=t=>{let e=class extends t{constructor(...i){super(...i),this._promiseProps=new zre,this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(i,n){return this._promiseProps.promise.then(()=>this).then(i,n)}catch(i){return this.when(null,i)}addResolvingPromise(i){i&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in i?i.when():i)}};return e=_([J("esri.core.Promise")],e),e};let nw=class extends D3(Oe){};nw=_([J("esri.core.Promise")],nw);const Fre="not-loaded",jre="loading",Gre="failed",q$="loaded",QD=t=>{let e=class extends t{constructor(...i){super(...i),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(n=>{const s=this.load.bind(this);this.load=h=>{const f=new Promise((m,y)=>{const x=pT(h,y);this.destroyed&&y(new ce("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(m,y).finally(()=>{x&&x.remove()})});if(this.loadStatus===Fre){this._set("loadStatus",jre);const m=this._loadController=new AbortController;s({signal:m.signal})}return n(),f}})),this.when(()=>{this._set("loadStatus",q$),this._loadController=null},n=>{this._set("loadStatus",Gre),this._set("loadError",n),this._loadController=null})}destroy(){this._loadController&&(this._loadController=Ms(this._loadController),this._promiseProps.abort()),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===q$}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var i;return this.isFulfilled()||(this._set("loadError",new ce("load:cancelled","Cancelled")),(i=this._loadController)==null||i.abort(),this._promiseProps.abort()),this}};return _([S({readOnly:!0})],e.prototype,"loaded",null),_([S({readOnly:!0})],e.prototype,"loadError",void 0),_([S({clonable:!1})],e.prototype,"loadStatus",void 0),_([S({type:[Oc],readOnly:!0})],e.prototype,"loadWarnings",null),e=_([J("esri.core.Loadable")],e),e};let F1=class extends QD(nw){};F1=_([J("esri.core.Loadable")],F1),function(t){function e(i){return!(!i||!i.load)}t.LoadableMixin=QD,t.isLoadable=e}(F1||(F1={}));const da=F1;async function ez(t,e){return await t.load(),Ure(t,e)}async function Ure(t,e){const i=[],n=(...h)=>{for(const f of h)f!=null&&(Array.isArray(f)?n(...f):Pe.isCollection(f)?f.forEach(m=>n(m)):da.isLoadable(f)&&i.push(f))};e(n);let s=null;if(await dQ(i,async h=>{const f=await BN(Bre(h)?h.loadAll():h.load());f.ok!==!1||s||(s=f)}),s)throw s.error;return t}function Bre(t){return"loadAll"in t&&typeof t.loadAll=="function"}let dv;function Hre(t){return dv&&!dv.destroyed||(dv=t()),dv}var t4;const Vre=new xn({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let Ws=t4=class extends Oe{constructor(t){super(t),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(t){t!=="asc"&&t!=="desc"||this._set("sortOrder",t)}clone(){return new t4({categories:this.categories?_e(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(t,e){let i=[];this.categories&&(i=this.categories.map(f=>Array.isArray(f)?JSON.stringify(f):f));let n="";if(this.extent){const f=b3(this.extent,Ke.WGS84);f!=null&&(n=`${f.xmin},${f.ymin},${f.xmax},${f.ymax}`)}let s=this.query;!this.disableExtraQuery&&t.extraQuery&&(s="("+s+")"+t.extraQuery);const h={categories:i,bbox:n,q:s,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(h.sortField=this.sortField.split(",").map(f=>Vre.toJSON(f.trim())).join(","),h.sortOrder=this.sortOrder),{query:{...e,...h}}}};_([S()],Ws.prototype,"categories",void 0),_([S()],Ws.prototype,"disableExtraQuery",void 0),_([S({type:Nt})],Ws.prototype,"extent",void 0),_([S()],Ws.prototype,"filter",void 0),_([S()],Ws.prototype,"num",void 0),_([S()],Ws.prototype,"query",void 0),_([S()],Ws.prototype,"sortField",void 0),_([S()],Ws.prototype,"sortOrder",null),_([S()],Ws.prototype,"start",void 0),Ws=t4=_([J("esri.portal.PortalQueryParams")],Ws);const il=Ws;var i4;let en=i4=class extends De{constructor(t){super(t),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.sourceJSON=null,this.tags=null,this.title=null}get thumbnailUrl(){var i;const t=this.url,e=this.thumbnail;return t&&e&&this.portal?(i=this.portal)==null?void 0:i.normalizeUrl(`${t}/info/${e}?f=json`):null}get url(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t?t+"/community/groups/"+this.id:null}fetchCategorySchema(t){return this.portal.request(this.url+"/categorySchema",t).then(e=>{const i=e.categorySchema||[];return i.some(n=>n.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",t):i})}fetchMembers(t){return this.portal.request(this.url+"/users",t)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}toJSON(){throw new ce("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new i4({sourceJSON:t});return e.read(t),e}queryItems(t,e){let i=_n(il,t);const n=this.portal;return parseFloat(n.currentVersion)>5?(i=i||new il,n.queryPortal(`/content/groups/${this.id}/search`,i,"PortalItem",e)):(i=i?i.clone():new il,i.query="group:"+this.id+(i.query?" "+i.query:""),n.queryItems(i,e))}_fetchCategorySchemaSet(t,e){const i=this.portal;return i.fetchSelf(i.authMode,!0,e).then(n=>{const s=n.contentCategorySetsGroupQuery;if(s){const h=new il({disableExtraQuery:!0,num:1,query:s});return i.queryGroups(h,e)}throw new ce("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(n=>{if(n.total){const s=n.results[0],h=new il({num:1,query:`typekeywords:"${t}"`});return s.queryItems(h,e)}throw new ce("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(n=>n.total?n.results[0].fetchData("json",e).then(s=>{const h=s==null?void 0:s.categorySchema;return h!=null&&h.length?h:[]}):[])}};_([S()],en.prototype,"access",void 0),_([S({type:Date})],en.prototype,"created",void 0),_([S()],en.prototype,"description",void 0),_([S()],en.prototype,"id",void 0),_([S()],en.prototype,"isInvitationOnly",void 0),_([S({type:Date})],en.prototype,"modified",void 0),_([S()],en.prototype,"owner",void 0),_([S()],en.prototype,"portal",void 0),_([S()],en.prototype,"snippet",void 0),_([S()],en.prototype,"sortField",void 0),_([S()],en.prototype,"sortOrder",void 0),_([S()],en.prototype,"sourceJSON",void 0),_([S()],en.prototype,"tags",void 0),_([S()],en.prototype,"thumbnail",void 0),_([S({readOnly:!0})],en.prototype,"thumbnailUrl",null),_([S()],en.prototype,"title",void 0),_([S({readOnly:!0})],en.prototype,"url",null),en=i4=_([J("esri.portal.PortalGroup")],en);const n4=en;let Fu=class extends Oe{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};_([S()],Fu.prototype,"nextQueryParams",void 0),_([S()],Fu.prototype,"queryParams",void 0),_([S()],Fu.prototype,"results",void 0),_([S()],Fu.prototype,"total",void 0),Fu=_([J("esri.portal.PortalQueryResult")],Fu);const qre=Fu;let Bl=class extends De{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){var i;const e=(i=this.portal)==null?void 0:i.restUrl;return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new ce("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};_([S({type:Date})],Bl.prototype,"created",void 0),_([S()],Bl.prototype,"id",void 0),_([S()],Bl.prototype,"portal",void 0),_([S()],Bl.prototype,"title",void 0),_([S({readOnly:!0})],Bl.prototype,"url",null),_([S()],Bl.prototype,"username",void 0),Bl=_([J("esri.portal.PortalFolder")],Bl);const Wre=Bl;var r4;let ri=r4=class extends De{constructor(t){super(t),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userLicenseTypeId=null,this.userType=null}get thumbnailUrl(){const t=this.url,e=this.thumbnail;return t&&e?this.portal.normalizeUrl(`${t}/info/${e}?f=json`):null}get userContentUrl(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t?`${t}/content/users/${this.username}`:null}get url(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t?`${t}/community/users/${this.username}`:null}addItem(t){const e=t&&t.item,i=t==null?void 0:t.data,n=t==null?void 0:t.folder,s={method:"post"};e&&(s.query=e.createPostQuery(),i!=null&&(typeof i=="string"?s.query.text=i:typeof i=="object"&&(s.query.text=JSON.stringify(i))));let h=this.userContentUrl;return n&&(h+="/"+(typeof n=="string"?n:n.id)),this.portal.request(h+"/addItem",s).then(f=>(e.id=f.id,e.portal=this.portal,e.loaded?e.reload():e.load()))}async deleteItem(t,e=!1){let i=this.userContentUrl;t.ownerFolder&&(i+="/"+t.ownerFolder);const n=e?{permanentDelete:!0}:{};await this.portal.request(i+`/items/${t.id}/delete`,{method:"post",query:n}),t.id=null,t.portal=null}async deleteItems(t,e=!1){t=t.slice();const i=this.userContentUrl+"/deleteItems",n=[],s=t.map(h=>h.id);if(s.length){const h={method:"post",query:{items:s.join(","),permanentDelete:e}},f=await this.portal.request(i,h);for(const m of f.results){const y=t.find(k=>m.itemId===k.id),x=m.success;let E=null;x?(y.id=null,y.portal=null):m.error&&(E=new ce("portal:delete-item-failed",m.error.message,m.error)),n.push({item:y,success:x,error:E})}}return n}fetchFolders(){const t={query:{num:1}};return this.portal.request(this.userContentUrl??"",t).then(e=>{let i;return i=e&&e.folders?e.folders.map(n=>{const s=Wre.fromJSON(n);return s.portal=this.portal,s}):[],i})}fetchGroups(){return this.portal.request(this.url??"").then(t=>{let e;return e=t&&t.groups?t.groups.map(i=>{const n=n4.fromJSON(i);return n.portal=this.portal,n}):[],e})}async fetchItems(t){t??(t={});let e=this.userContentUrl??"";t.folder&&(e+="/"+t.folder.id);const{default:i}=await ge(()=>Promise.resolve().then(()=>sz),void 0,import.meta.url),n={folders:!1,inRecycleBin:!!t.inRecycleBin||null,foldersContent:!(t.folder||!t.includeSubfolderItems)||null,num:t.num||10,start:t.start||1,sortField:t.sortField||"created",sortOrder:t.sortOrder||"asc"},s=await this.portal.request(e,{query:n});let h;return s!=null&&s.items?(h=s.items.map(f=>{const m=i.fromJSON(f);return m.portal=this.portal,m}),await Promise.all(h.map(f=>f.load())),{items:h,nextStart:s.nextStart,total:s.total}):{items:[],nextStart:-1,total:0}}fetchTags(){return this.portal.request(this.url+"/tags").then(t=>t.tags)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}queryFavorites(t){return this.favGroupId?(this._favGroup||(this._favGroup=new n4({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(t)):Promise.reject(new ce("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}async restoreItem(t,e){const i=this.userContentUrl,n=e?{folderID:typeof e=="string"?e:e.id}:null;await this.portal.request(i+`/items/${t.id}/restore`,{method:"post",query:n})}toJSON(){throw new ce("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new r4({sourceJSON:t});return e.read(t),e}};_([S()],ri.prototype,"access",void 0),_([S({type:Date})],ri.prototype,"created",void 0),_([S()],ri.prototype,"culture",void 0),_([S()],ri.prototype,"description",void 0),_([S()],ri.prototype,"email",void 0),_([S()],ri.prototype,"favGroupId",void 0),_([S()],ri.prototype,"fullName",void 0),_([S({type:Date})],ri.prototype,"modified",void 0),_([S()],ri.prototype,"orgId",void 0),_([S()],ri.prototype,"portal",void 0),_([S()],ri.prototype,"preferredView",void 0),_([S()],ri.prototype,"privileges",void 0),_([S()],ri.prototype,"region",void 0),_([S()],ri.prototype,"role",void 0),_([S()],ri.prototype,"roleId",void 0),_([S()],ri.prototype,"sourceJSON",void 0),_([S()],ri.prototype,"thumbnail",void 0),_([S({readOnly:!0})],ri.prototype,"thumbnailUrl",null),_([S()],ri.prototype,"units",void 0),_([S({readOnly:!0})],ri.prototype,"userContentUrl",null),_([S({readOnly:!0})],ri.prototype,"url",null),_([S()],ri.prototype,"username",void 0),_([S()],ri.prototype,"userLicenseTypeId",void 0),_([S()],ri.prototype,"userType",void 0),ri=r4=_([J("esri.portal.PortalUser")],ri);const tz=ri;var ds;let h1;const W$={PortalGroup:()=>Promise.resolve({default:n4}),PortalItem:()=>ge(()=>Promise.resolve().then(()=>sz),void 0,import.meta.url),PortalUser:()=>Promise.resolve({default:tz})};let $e=ds=class extends ty(da){constructor(t){super(t),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.default3DBasemapQuery=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.layoutGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.hasClassificationSchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.recycleBinEnabled=!1,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=_t.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useDefault3dBasemap=!1,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(t){return typeof t=="string"?{url:t}:t}destroy(){K$.unregister(this),this.defaultBasemap=mt(this.defaultBasemap),this.defaultDevBasemap=mt(this.defaultDevBasemap),this.defaultVectorBasemap=mt(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=Rt(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(t){if(t)for(const e of t)_t.request.trustedServers.includes(e)||_t.request.trustedServers.push(e);return t}readDefaultBasemap(t){return this._readBasemap(t)}readDefaultDevBasemap(t){return this._readBasemap(t)}readDefaultVectorBasemap(t){return this._readBasemap(t)}get extraQuery(){var i;const t=(i=this.user)==null?void 0:i.orgId,e=!t||this.canSearchPublic;return this.id&&!e?` AND orgid:${this.id}`:null}get hasAPIKey(){return LR(this.url)}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let t=this.url;if(t){const e=t.indexOf("/sharing");t=e>0?t.slice(0,e):this.url.replace(/\/+$/,""),t+="/sharing/rest"}return t}get thumbnailUrl(){const t=this.restUrl,e=this.thumbnail;return t&&e?this._normalizeSSL(t+"/portals/self/resources/"+e):null}readUrlKey(t){return t&&t.toLowerCase()}readUser(t){let e=null;return t&&(e=tz.fromJSON(t),e.portal=this),e}load(t){const e=ge(()=>Promise.resolve().then(()=>Mse),void 0,import.meta.url).then(({default:i})=>{Jt(t),h1=i}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,t)).then(i=>{var n;if(!this.hasAPIKey&&Kt){const s=Kt;this.credential=s.findCredential(this.restUrl),this.credential||this.authMode!==ds.AUTH_MODE_AUTO&&this.authMode!==ds.AUTH_MODE_NO_PROMPT||((n=this._esriIdCredentialCreateHandle)==null||n.remove(),this._esriIdCredentialCreateHandle=s.on("credential-create",Kre(new WeakRef(this))),K$.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(e),Promise.resolve(this)}async createElevationLayers(){await this.load();const t=this._getHelperService("defaultElevationLayers"),e=(await ge(async()=>{const{default:i}=await import("./ElevationLayer-KuKPHoEu.js");return{default:i}},__vite__mapDeps([198,165,199,200,201,60,24,173,183,166,186,187,202]),import.meta.url)).default;return t?t.map(i=>new e({id:i.id,url:i.url})):[]}async fetchBasemaps(t,e){const i=await this._fetchBasemaps(t,e);if((e==null?void 0:e.include3d)===!0&&this.use3dBasemaps!==!1){const n=await this._fetchBasemaps3D(t,e);i.unshift(...n)}return i}async fetchDefault3DBasemap(t){if(!this.useDefault3dBasemap||!this.default3DBasemapQuery||this.default3DBasemapQuery==="none")return null;const e=new il;e.query=this.default3DBasemapQuery,e.disableExtraQuery=!0;const i=(await this.queryItems(e,t)).results.find(n=>n.type==="Web Scene");return i?new h1({portalItem:i}):null}fetchCategorySchema(t){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",t).then(e=>e.categorySchema):Ps(t)?Promise.reject(ei()):Promise.resolve([])}fetchFeaturedGroups(t){const e=this.featuredGroups,i=new il({num:100,sortField:"title"});if(e!=null&&e.length){const n=[];for(const s of e)n.push(`(title:"${s.title}" AND owner:${s.owner})`);return i.query=n.join(" OR "),this.queryGroups(i,t).then(s=>s.results)}return Ps(t)?Promise.reject(ei()):Promise.resolve([])}fetchRegions(t){var i;const e=((i=this.user)==null?void 0:i.culture)||this.culture||Zr();return this.request(this.restUrl+"/portals/regions",{...t,query:{culture:e}})}fetchSettings(t){var i;const e=((i=this.user)==null?void 0:i.culture)||this.culture||Zr();return this.request(this.restUrl+"/portals/self/settings",{...t,query:{culture:e}})}static getDefault(){return Hre(()=>new ds)}queryGroups(t,e){return this.queryPortal("/community/groups",t,"PortalGroup",e)}queryItems(t,e){return this.queryPortal("/search",t,"PortalItem",e)}queryUsers(t,e){return t.sortField||(t.sortField="username"),this.queryPortal("/community/users",t,"PortalUser",e)}fetchSelf(t=this.authMode,e=!1,i){const n=this.restUrl+"/portals/self",s={authMode:t,query:{culture:Zr().toLowerCase()},withCredentials:!0,...i};return s.authMode==="auto"&&(s.authMode="no-prompt"),e&&(s.query.default=!0),this.request(n,s)}queryPortal(t,e,i,n){const s=_n(il,e),h=f=>this.request(this.restUrl+t,{...s.toRequestOptions(this),...n}).then(m=>{const y=s.clone();return y.start=m.nextStart,new qre({nextQueryParams:y,queryParams:s,total:m.total,results:ds._resultsToTypedArray(f,{portal:this},m,n)})}).then(m=>Promise.all(m.results.map(y=>typeof y.when=="function"?y.when():m)).then(()=>m,y=>(KP(y),m)));return i&&W$[i]?W$[i]().then(({default:f})=>(Jt(n),h(f))):h()}signIn(){if(this.hasAPIKey)return this.load().then(()=>{if(!this.user)throw new ce("portal:not-authenticated","Unable to authenticate user. Portal.user is missing")});if(this.authMode===ds.AUTH_MODE_ANONYMOUS||this.authMode===ds.AUTH_MODE_NO_PROMPT&&!Kt)return Promise.reject(new ce("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const t=e=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(e||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=e,this.fetchSelf("immediate"))):this.user&&this.credential===e?null:(this.credential=e,this.fetchSelf("immediate"))).then(i=>{i&&(this.sourceJSON=i,this.read(i))});return Kt?Kt.getCredential(this.restUrl,{prompt:this.authMode!==ds.AUTH_MODE_NO_PROMPT}).then(e=>t(e)):t(this.credential)}normalizeUrl(t){var i;const e=(i=this.credential)==null?void 0:i.token;return this._normalizeSSL(e?t+(t.includes("?")?"&":"?")+"token="+e:t)}requestToTypedArray(t,e,i){return this.request(t,e).then(n=>{const s=ds._resultsToTypedArray(i,{portal:this},n);return Promise.all(s.map(h=>typeof h.when=="function"?h.when():n)).then(()=>s,()=>s)})}request(t,e={}){const i={f:"json",...e.query},{authMode:n=this.authMode===ds.AUTH_MODE_ANONYMOUS||this.authMode===ds.AUTH_MODE_NO_PROMPT?this.authMode:"auto",body:s=null,cacheBust:h=!1,method:f="auto",responseType:m="json",signal:y}=e,x={authMode:n,body:s,cacheBust:h,method:f,query:i,responseType:m,timeout:0,signal:y};return e.withCredentials&&(x.withCredentials=!0),ki(this._normalizeSSL(t),x).then(E=>E.data)}toJSON(){throw new ce("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new ds({sourceJSON:t})}_getHelperService(t){const e=this.helperServices&&this.helperServices[t];if(!e)throw new ce("portal:service-not-found",`The \`helperServices\` do not include an entry named "${t}"`);return e}async _fetchBasemaps(t,e){const i=new il;i.query=t||(this.hasAPIKey?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),i.disableExtraQuery=!0;const n=await this.queryGroups(i,e);if(!n.total)return[];const s=n.results[0];i.num=100,i.query='type:"Web Map" -type:"Web Application"',i.sortField=s.sortField||"name",i.sortOrder=s.sortOrder||"desc";const h=await s.queryItems(i,e);return h.total?h.results.filter(f=>f.type==="Web Map").map(f=>new h1({portalItem:f})):[]}async _fetchBasemaps3D(t,e){const i=t||this.basemapGalleryGroupQuery3D;if(!i)return[];const n=new il({query:i,disableExtraQuery:!0}),s=await this.queryGroups(n,e);if(!s.total)return[];const h=s.results[0];n.num=100,n.query='type:"Web Scene"',n.sortField=h.sortField||"name",n.sortOrder=h.sortOrder||"desc";const f=await h.queryItems(n,e);return f.total?f.results.filter(m=>m.type==="Web Scene").map(m=>new h1({portalItem:m})):[]}_normalizeSSL(t){return t.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(t){if(t){const e=h1.fromJSON(t);return e.portalItem={portal:this},e}return null}static _resultsToTypedArray(t,e,i,n){let s;if(i){const h=n!=null?n.signal:null;s=i.listings||i.notifications||i.userInvitations||i.tags||i.items||i.groups||i.comments||i.provisions||i.results||i.relatedItems||i,(t||e)&&(s=s.map(f=>{const m=Object.assign(t?t.fromJSON(f):f,e);return typeof m.load=="function"&&m.load(h),m}))}else s=[];return s}};$e.AUTH_MODE_ANONYMOUS="anonymous",$e.AUTH_MODE_AUTO="auto",$e.AUTH_MODE_IMMEDIATE="immediate",$e.AUTH_MODE_NO_PROMPT="no-prompt",_([S()],$e.prototype,"access",void 0),_([S()],$e.prototype,"allSSL",void 0),_([S()],$e.prototype,"authMode",void 0),_([S()],$e.prototype,"authorizedCrossOriginDomains",void 0),_([kt("authorizedCrossOriginDomains")],$e.prototype,"readAuthorizedCrossOriginDomains",null),_([S()],$e.prototype,"basemapGalleryGroupQuery",void 0),_([S({json:{name:"3DBasemapGalleryGroupQuery"}})],$e.prototype,"basemapGalleryGroupQuery3D",void 0),_([S()],$e.prototype,"bingKey",void 0),_([S()],$e.prototype,"canListApps",void 0),_([S()],$e.prototype,"canListData",void 0),_([S()],$e.prototype,"canListPreProvisionedItems",void 0),_([S()],$e.prototype,"canProvisionDirectPurchase",void 0),_([S()],$e.prototype,"canSearchPublic",void 0),_([S()],$e.prototype,"canShareBingPublic",void 0),_([S()],$e.prototype,"canSharePublic",void 0),_([S()],$e.prototype,"canSignInArcGIS",void 0),_([S()],$e.prototype,"canSignInIDP",void 0),_([S()],$e.prototype,"colorSetsGroupQuery",void 0),_([S()],$e.prototype,"commentsEnabled",void 0),_([S({type:Date})],$e.prototype,"created",void 0),_([S()],$e.prototype,"credential",void 0),_([S()],$e.prototype,"culture",void 0),_([S()],$e.prototype,"currentVersion",void 0),_([S()],$e.prototype,"customBaseUrl",void 0),_([S()],$e.prototype,"default3DBasemapQuery",void 0),_([S()],$e.prototype,"defaultBasemap",void 0),_([kt("defaultBasemap")],$e.prototype,"readDefaultBasemap",null),_([S()],$e.prototype,"defaultDevBasemap",void 0),_([kt("defaultDevBasemap")],$e.prototype,"readDefaultDevBasemap",null),_([S({type:Nt})],$e.prototype,"defaultExtent",void 0),_([S()],$e.prototype,"defaultVectorBasemap",void 0),_([kt("defaultVectorBasemap")],$e.prototype,"readDefaultVectorBasemap",null),_([S()],$e.prototype,"description",void 0),_([S()],$e.prototype,"devBasemapGalleryGroupQuery",void 0),_([S()],$e.prototype,"eueiEnabled",void 0),_([S({readOnly:!0})],$e.prototype,"extraQuery",null),_([S()],$e.prototype,"featuredGroups",void 0),_([S()],$e.prototype,"featuredItemsGroupQuery",void 0),_([S()],$e.prototype,"galleryTemplatesGroupQuery",void 0),_([S()],$e.prototype,"layoutGroupQuery",void 0),_([S()],$e.prototype,"livingAtlasGroupQuery",void 0),_([S({readOnly:!0})],$e.prototype,"hasAPIKey",null),_([S()],$e.prototype,"hasCategorySchema",void 0),_([S()],$e.prototype,"hasClassificationSchema",void 0),_([S()],$e.prototype,"helpBase",void 0),_([S()],$e.prototype,"helperServices",void 0),_([S()],$e.prototype,"helpMap",void 0),_([S()],$e.prototype,"homePageFeaturedContent",void 0),_([S()],$e.prototype,"homePageFeaturedContentCount",void 0),_([S()],$e.prototype,"httpPort",void 0),_([S()],$e.prototype,"httpsPort",void 0),_([S()],$e.prototype,"id",void 0),_([S()],$e.prototype,"ipCntryCode",void 0),_([S({readOnly:!0})],$e.prototype,"isOrganization",null),_([S()],$e.prototype,"isPortal",void 0),_([S()],$e.prototype,"isReadOnly",void 0),_([S({readOnly:!0})],$e.prototype,"itemPageUrl",null),_([S()],$e.prototype,"layerTemplatesGroupQuery",void 0),_([S()],$e.prototype,"maxTokenExpirationMinutes",void 0),_([S({type:Date})],$e.prototype,"modified",void 0),_([S()],$e.prototype,"name",void 0),_([S()],$e.prototype,"portalHostname",void 0),_([S()],$e.prototype,"portalMode",void 0),_([S()],$e.prototype,"portalProperties",void 0),_([S()],$e.prototype,"region",void 0),_([S()],$e.prototype,"recycleBinEnabled",void 0),_([S({readOnly:!0})],$e.prototype,"restUrl",null),_([S()],$e.prototype,"rotatorPanels",void 0),_([S()],$e.prototype,"showHomePageDescription",void 0),_([S()],$e.prototype,"sourceJSON",void 0),_([S()],$e.prototype,"staticImagesUrl",void 0),_([S({json:{name:"2DStylesGroupQuery"}})],$e.prototype,"stylesGroupQuery2d",void 0),_([S({json:{name:"stylesGroupQuery"}})],$e.prototype,"stylesGroupQuery3d",void 0),_([S()],$e.prototype,"supportsHostedServices",void 0),_([S()],$e.prototype,"symbolSetsGroupQuery",void 0),_([S()],$e.prototype,"templatesGroupQuery",void 0),_([S()],$e.prototype,"thumbnail",void 0),_([S({readOnly:!0})],$e.prototype,"thumbnailUrl",null),_([S()],$e.prototype,"units",void 0),_([S()],$e.prototype,"url",void 0),_([S()],$e.prototype,"urlKey",void 0),_([kt("urlKey")],$e.prototype,"readUrlKey",null),_([S()],$e.prototype,"user",void 0),_([kt("user")],$e.prototype,"readUser",null),_([S()],$e.prototype,"use3dBasemaps",void 0),_([S()],$e.prototype,"useDefault3dBasemap",void 0),_([S()],$e.prototype,"useStandardizedQuery",void 0),_([S()],$e.prototype,"useVectorBasemaps",void 0),_([S()],$e.prototype,"vectorBasemapGalleryGroupQuery",void 0),$e=ds=_([J("esri.portal.Portal")],$e);const es=$e,K$=new FinalizationRegistry(t=>{t.remove()});function Kre(t){const e=Kt;return()=>{const i=t.deref();i&&e.findCredential(i.restUrl)&&i.signIn().catch(()=>{})}}let Hl=class extends Oe{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e!=null&&e.portalItem&&e.path?{...e,path:Z$(e.path,e.portalItem)}:e}set path(e){e!=null&&ks(e)?Ae.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return Z$(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",i){const n=this.cdnUrl;if(n==null)throw new ce("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(n,{responseType:e,query:{token:this.portalItem.apiKey,_ts:i!=null&&i.cacheBust?Date.now():null},signal:i==null?void 0:i.signal})}async update(e,i){const{addOrUpdateResources:n}=await ge(()=>import("./resourceUtils-CQ1l2Cne.js"),[],import.meta.url);return await n(this.portalItem,[{resource:this,content:e,compress:i==null?void 0:i.compress,access:i==null?void 0:i.access}],"update",i),this}hasPath(){return this.path!=null}};function Z$(t,e){return t==null?t:(t=t.replace(/^\/+/,""),e!=null&&ks(t)&&(t=kT(t,e.itemUrl)),t==null?void 0:t.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}_([S()],Hl.prototype,"portalItem",void 0),_([S({type:String,value:null})],Hl.prototype,"path",null),_([Hi("path")],Hl.prototype,"_castPath",null),_([S({type:String,readOnly:!0})],Hl.prototype,"url",null),_([S({type:String,readOnly:!0})],Hl.prototype,"cdnUrl",null),_([S({type:String,readOnly:!0})],Hl.prototype,"itemRelativeUrl",null),Hl=_([J("esri.portal.PortalItemResource")],Hl);const Zre=Hl;let j1=class extends Oe{constructor(e){super(e),this.created=null,this.rating=null}};_([S()],j1.prototype,"created",void 0),_([S()],j1.prototype,"rating",void 0),j1=_([J("esri.portal.PortalRating")],j1);const E5=j1;function cy(t,e){var n;const i=(n=e==null?void 0:e.url)==null?void 0:n.path;if(t&&i&&(t=lo(t,i,{preserveProtocolRelative:!0}),e.portalItem&&e.readResourcePaths)){const s=kT(t,e.portalItem.itemUrl);s!=null&&Jre.test(s)&&e.readResourcePaths.push(e.portalItem.resourceFromPath(s).path)}return(t=s4(t,e==null?void 0:e.portal))&&F3.test(t)?ME(t):t}function z3(t,e,i=bm.YES){var s,h;if((t=t&&F3.test(t)?nz(t):t)==null)return t;!ks(t)&&(e!=null&&e.blockedRelativeUrls)&&e.blockedRelativeUrls.push(t);let n=lo(t);if(e){const f=((s=e.verifyItemRelativeUrls)==null?void 0:s.rootPath)||((h=e.url)==null?void 0:h.path);if(f){const m=s4(f,e.portal),y=s4(n,e.portal);n=kT(y,m,m),n!=null&&n!==y&&n!==t&&e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.writtenUrls.push(n)}}return n=iz(n,e==null?void 0:e.portal),ks(n)&&(n=Tc(n)),e!=null&&e.resources&&(e!=null&&e.portalItem)&&!ks(n)&&!hp(n)&&i===bm.YES&&e.resources.toKeep.push({resource:e.portalItem.resourceFromPath(n),compress:!1}),n}function EE(t,e,i){return cy(t,i)}function c0(t,e,i,n){const s=z3(t,n);s!==void 0&&(e[i]=s)}const F3=/\/items\/([^/]+)\/resources\/(.*)/,Jre=/^\.\/resources\//;function Yre(t){const e=(t==null?void 0:t.match(F3))??null;return(e==null?void 0:e[1])??null}function Xre(t){const e=(t==null?void 0:t.match(F3))??null;if(e==null)return null;const i=e[2],n=i.lastIndexOf("/");if(n===-1){const{path:f,extension:m}=l8(i);return{prefix:null,filename:f,extension:m}}const{path:s,extension:h}=l8(i.slice(n+1));return{prefix:i.slice(0,n),filename:s,extension:h}}function iz(t,e){return e&&!e.isPortal&&e.urlKey&&e.customBaseUrl?u9(t,`${e.urlKey}.${e.customBaseUrl}`,e.portalHostname):t}function s4(t,e){if(!e||e.isPortal||!e.urlKey||!e.customBaseUrl)return t;const i=`${e.urlKey}.${e.customBaseUrl}`,n=TT();return Qf(n,`${n.scheme}://${i}`)?u9(t,e.portalHostname,i):u9(t,i,e.portalHostname)}function ME(t){if(!t)return t||null;let e=t;return e&&Kt&&!Kt.findCredential(e)&&(e=TR(e),e=e.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),e=e.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),e=e.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),e}function nz(t){if(!t)return t||null;let e=t;return e=e.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com"),e=e.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com"),e=e.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"),e&&Kt&&!Kt.findCredential(e)&&(e=TR(e)),e}var bm;(function(t){t[t.YES=0]="YES",t[t.NO=1]="NO"})(bm||(bm={}));const M7e=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return bm},ensureMainOnlineDomain:iz,fromCDNUrl:nz,fromJSON:cy,itemIdFromResourceUrl:Yre,prefixAndFilenameFromResourceUrl:Xre,read:EE,toCDNUrl:ME,toJSON:z3,write:c0},Symbol.toStringTag,{value:"Module"}));var ju;const Qre=new Set(["3DTiles Service","CSV","Feature Collection","Feature Service","Feed","GeoJson","Group Layer","Image Service","KML","Map Service","Media Layer","Scene Service","Stream Service","Vector Tile Service","WFS","WMS","WMTS"]),ese=new Set(["KML","GeoJson","CSV"]);let tt=ju=class extends ty(da){static from(t){return I0(ju,t)}constructor(t){super(t),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.classification=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const t=this.type,e=this.typeKeywords||[];let i=t;return t==="Feature Service"||t==="Feature Collection"?i=e.includes("Table")?"Table":e.includes("Route Layer")?"Route Layer":e.includes("Markup")?"Markup":"Feature Layer":t==="Image Service"?i=e.includes("Elevation 3D Layer")?"Elevation Layer":e.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":t==="Scene Service"?i="Scene Layer":t==="Video Service"?i="Video Layer":t==="Scene Package"?i="Scene Layer Package":t==="Stream Service"?i="Feature Layer":t==="Geoprocessing Service"?i=e.includes("Web Tool")?"Tool":"Geoprocessing Service":t==="Geoenrichment Service"?i="GeoEnrichment Service":t==="Geocoding Service"?i="Locator":t==="Microsoft Powerpoint"?i="Microsoft PowerPoint":t==="GeoJson"?i="GeoJSON":t==="Globe Service"?i="Globe Layer":t==="Vector Tile Service"?i="Tile Layer":t==="netCDF"?i="NetCDF":t==="Map Service"?i=e.includes("Spatiotemporal")||!e.includes("Hosted Service")&&!e.includes("Tiled")||e.includes("Relational")?"Map Image Layer":"Tile Layer":t!=null&&t.toLowerCase().includes("add in")?i=t.replaceAll(/(add in)/gi,"Add-In"):t==="datastore catalog service"?i="Big Data File Share":t==="Compact Tile Package"?i="Tile Package (tpkx)":t==="Raster function template"?i="Raster Function Template":t==="OGCFeatureServer"?i="OGC Feature Layer":t==="web mapping application"&&e.includes("configurableApp")?i="Instant App":t==="Insights Page"?i="Insights Report":t==="Excalibur Imagery Project"?i="Excalibur Project":t==="3DTiles Service"?i="3D tiles layer":t==="3DTiles Package"&&(i="3D tiles package"),i}readExtent(t){return t&&t.length?new Nt(t[0][0],t[0][1],t[1][0],t[1][1]):null}get iconUrl(){var P;const t=((P=this.type)==null?void 0:P.toLowerCase())||"",e=this.typeKeywords||[],i="esri/images/portal/",n="16";let s,h=!1,f=!1,m=!1,y=!1,x=!1,E=!1,k=!1,I=!1;return t.indexOf("service")>0||t==="feature collection"||t==="kml"||t==="wms"||t==="wmts"||t==="wfs"?(h=e.includes("Hosted Service"),t==="feature service"||t==="feature collection"||t==="kml"||t==="wfs"?(f=e.includes("Table"),m=e.includes("Route Layer"),y=e.includes("Markup"),x=e.includes("Spatiotemporal"),E=e.includes("UtilityNetwork"),s=x&&f?"spatiotemporaltable":f?"table":m?"routelayer":y?"markup":x?"spatiotemporal":E?"utilitynetwork":h?"featureshosted":"features"):t==="map service"||t==="wms"||t==="wmts"?(x=e.includes("Spatiotemporal"),k=e.includes("Relational"),s=x||k?"mapimages":h||e.includes("Tiled")||t==="wmts"?"maptiles":"mapimages"):s=t==="scene service"?e.includes("Line")?"sceneweblayerline":e.includes("3DObject")?"sceneweblayermultipatch":e.includes("Point")?"sceneweblayerpoint":e.includes("IntegratedMesh")?"sceneweblayermesh":e.includes("PointCloud")?"sceneweblayerpointcloud":e.includes("Polygon")?"sceneweblayerpolygon":e.includes("Building")?"sceneweblayerbuilding":e.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":t==="image service"?e.includes("Elevation 3D Layer")?"elevationlayer":e.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":t==="stream service"?"streamlayer":t==="vector tile service"?"vectortile":t==="datastore catalog service"?"datastorecollection":t==="geocoding service"?"geocodeservice":t==="video service"?e.includes("Live Stream")?"livestreamvideolayer":"videolayer":t==="geoprocessing service"?e.includes("Web Tool")?"tool":"layers":t==="geodata service"?"geodataservice":t==="3dtiles service"?e.includes("3DObject")?"3dobjecttileslayer":e.includes("IntegratedMesh")?"integratedmeshtileslayer":"3dtileslayer":"layers"):t==="web map"||t==="cityengine web scene"?s="maps":t==="web scene"?s=e.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":t==="web mapping application"&&e.includes("configurableApp")?s="instantapps":t==="web mapping application"||t==="mobile application"||t==="application"||t==="operation view"||t==="desktop application"?s="apps":t==="map document"||t==="map package"||t==="published map"||t==="scene document"||t==="globe document"||t==="basemap package"||t==="mobile basemap package"||t==="mobile map package"||t==="project package"||t==="project template"||t==="pro map"||t==="layout"||t==="layer"&&e.includes("ArcGIS Pro")||t==="explorer map"&&e.indexOf("Explorer Document")?s="mapsgray":t==="service definition"||t==="shapefile"||t==="cad drawing"||t==="geojson"||t==="netcdf"||t==="administrative report"?s="datafiles":t==="360 vr experience"?s="360vr":t==="explorer add in"||t==="desktop add in"||t==="windows viewer add in"||t==="windows viewer configuration"?s="appsgray":t==="arcgis pro add in"||t==="arcgis pro configuration"?s="addindesktop":t==="pdf"?s="pdf":t==="microsoft word"?s="word":t==="microsoft excel"?s="excel":t==="microsoft powerpoint"?s="ppt":t==="rule package"||t==="file geodatabase"||t==="sqlite geodatabase"||t==="csv collection"||t==="kml collection"||t==="windows mobile package"||t==="map template"||t==="desktop application template"||t==="gml"||t==="arcpad package"||t==="code sample"||t==="document link"||t==="earth configuration"||t==="operations dashboard add in"||t==="rules package"||t==="workflow manager package"||t==="explorer map"&&e.includes("Explorer Mapping Application")||e.includes("Document")?s="datafilesgray":t==="network analysis service"||t==="geoprocessing service"||t==="geodata service"||t==="geometry service"||t==="geoprocessing package"||t==="locator package"||t==="geoprocessing sample"||t==="workflow manager service"?s="toolsgray":t==="layer"||t==="layer package"||t==="explorer layer"?s="layersgray":t==="analysis model"?s="analysismodel":t==="scene package"?s="scenepackage":t==="3dtiles package"?s="3dtileslayerpackage":t==="3dtiles service"?s="3dtileslayer":t==="mobile scene package"?s="mobilescenepackage":t==="tile package"||t==="compact tile package"?s="tilepackage":t==="task file"?s="taskfile":t==="report template"?s="report-template":t==="statistical data collection"?s="statisticaldatacollection":t==="insights workbook"?s="workbook":t==="insights model"?s="insightsmodel":t==="insights page"?s="insightspage":t==="insights theme"?s="insightstheme":t==="hub initiative"?s="hubinitiative":t==="hub page"?s="hubpage":t==="hub site application"?s="hubsite":t==="hub event"?s="hubevent":t==="hub project"?s="hubproject":t==="relational database connection"?s="relationaldatabaseconnection":t==="big data file share"?s="datastorecollection":t==="image collection"?s="imagecollection":t==="desktop style"?s="desktopstyle":t==="style"?s=e.includes("Dictionary")?"dictionarystyle":"style":t==="dashboard"?s="dashboard":t==="raster function template"?s="rasterprocessingtemplate":t==="vector tile package"?s="vectortilepackage":t==="ortho mapping project"?s="orthomappingproject":t==="ortho mapping template"?s="orthomappingtemplate":t==="solution"?s="solutions":t==="geopackage"?s="geopackage":t==="deep learning package"?s="deeplearningpackage":t==="real time analytic"?s="realtimeanalytics":t==="reality mapping project"?s="realitymappingproject":t==="big data analytic"?s="bigdataanalytics":t==="feed"?s="feed":t==="excalibur imagery project"?s="excaliburimageryproject":t==="notebook"?s="notebook":t==="storymap"?s="storymap":t==="survey123 add in"?s="survey123addin":t==="mission"?s="mission":t==="mission report"?s="missionreport":t==="mission template"?s="missiontemplate":t==="quickcapture project"?s="quickcaptureproject":t==="pro report"?s="proreport":t==="pro report template"?s="proreporttemplate":t==="urban model"?s="urbanmodel":t==="urban project"?s="urbanproject":t==="web experience"?s="experiencebuilder":t==="web experience template"?s="webexperiencetemplate":t==="experience builder widget"?s="experiencebuilderwidget":t==="experience builder widget package"?s="experiencebuilderwidgetpackage":t==="workflow"?s="workflow":t==="kernel gateway connection"?s="kernelgatewayconnection":t==="insights script"?s="insightsscript":t==="hub initiative template"?s="hubinitiativetemplate":t==="storymap theme"?s="storymaptheme":t==="knowledge graph"?s="knowledgegraph":t==="knowledge graph layer"?s="knowledgegraphlayer":t==="knowledge studio project"?s="knowledgestudio":t==="native application"?s="nativeapp":t==="native application installer"?s="nativeappinstaller":t==="web link chart"?s="linkchart":t==="knowledge graph web investigation"?s="investigation":t==="ogcfeatureserver"?s="features":t==="pro presentation"?s="propresentation":t==="pro project"?s="proproject":t==="insights workbook package"?s="insightsworkbookpackage":t==="apache parquet"?s="apacheparquet":t==="notebook code snippet library"?s="notebookcodesnippets":t==="suitability model"?s="suitabilitymodel":t==="esri classifier definition"?s="classifierdefinition":t==="esri classification schema"?s="classificationschema":t==="insights data engineering workbook"?s="dataengineeringworkbook":t==="insights data engineering model"?s="dataengineeringmodel":t==="deep learning studio project"?s="deeplearningproject":t==="discussion"?s="discussion":t==="allsource project"?s="allsourceproject":t==="api key"?s="apikey":t==="data pipeline"?s="datapipelines":t==="group layer"?(I=e.includes("Map"),s=I?"layergroup2d":"layergroup"):s=t==="media layer"?"onlinemedialayer":t==="form"?e.includes("Survey123")?"survey":"datafilesgray":t==="csv"?"csv":t==="image"?"image":"maps",s?xt(i+s+n+".png"):null}get isLayer(){return this.type!=null&&Qre.has(this.type)}get itemCdnUrl(){return ME(this.itemUrl)}get itemPageUrl(){var e;const t=(e=this.portal)==null?void 0:e.itemPageUrl;return t&&this.id?`${t}?id=${this.id}`:null}get itemUrl(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t&&this.id?`${t}/content/items/${this.id}`:null}get thumbnailUrl(){var i;const t=this.itemUrl,e=this.thumbnail;return t&&e?((i=this.portal)==null?void 0:i.normalizeUrl(`${t}/info/${e}?f=json`))??null:null}get userItemUrl(){var i,n,s;const t=(i=this.portal)==null?void 0:i.restUrl;if(!t)return null;const e=this.owner||((s=(n=this.portal)==null?void 0:n.user)==null?void 0:s.username);return e?`${t}/content/users/${this.ownerFolder?`${e}/${this.ownerFolder}`:e}/items/${this.id}`:null}load(t){const e=this.portal??(this.portal=es.getDefault()),i=e.load(t).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?e.request(this.itemUrl,{signal:t!=null?t.signal:null,query:{token:this.apiKey}}):{}).then(n=>{this.sourceJSON=n,this.read(n)});return this.addResolvingPromise(i),Promise.resolve(this)}async addRating(t){const e={method:"post",query:{}};return t instanceof E5&&(t=t.rating),t==null||isNaN(t)||typeof t!="number"||(e.query.rating=t),this.portal?(await this.portal.request(this.itemUrl+"/addRating",e),new E5({rating:t,created:new Date})):null}clone(){const t={access:this.access,accessInformation:this.accessInformation,applicationProxies:_e(this.applicationProxies),avgRating:this.avgRating,categories:_e(this.categories),classification:_e(this.classification),created:_e(this.created),culture:this.culture,description:this.description,extent:_e(this.extent),groupCategories:_e(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:_e(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:_e(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:_e(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:_e(this.typeKeywords),url:this.url};this.loaded&&(t.loadStatus="loaded");const e=new ju({sourceJSON:this.sourceJSON}).set(t);return e._set("isOrgItem",this.isOrgItem),e}createPostQuery(){var e;const t=this.toJSON();for(const i of["tags","typeKeywords","categories"])t[i]=(e=t[i])==null?void 0:e.join(", ");for(const i of["extent","classification"]){const n=t[i];n&&(t[i]=JSON.stringify(n))}return t}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(t="json",e){return this.portal.request(this.itemUrl+"/data",{responseType:t,...e,query:{token:this.apiKey}})}async fetchRating(t){const e=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...t});return e.rating!=null?(e.created=new Date(e.created),new E5(e)):null}fetchRelatedItems(t,e){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...t,token:this.apiKey},...e},ju)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(t=>(this.applicationProxies&&!Object.hasOwn(t,"appProxies")&&(this.applicationProxies=null),this.sourceJSON=t,this.read(t),this))}update(t){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const e=t==null?void 0:t.data,i={method:"post"};i.query=this.createPostQuery();for(const n in i.query)i.query[n]===null&&(i.query[n]="");return i.query.clearEmptyFields=!0,e!=null&&(typeof e=="string"?i.query.text=e:typeof e=="object"&&(i.query.text=JSON.stringify(e))),this.portal.request(`${this.userItemUrl}/update`,i).then(()=>this.reload())}):Promise.reject(new ce("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(t){if(!this.id)throw new ce("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:e,itemUrl:i}=this;await e.signIn();const{copyResources:n,folder:s,tags:h,title:f}=t||{},m={method:"post",query:{copyPrivateResources:n==="all",folder:typeof s=="string"?s:s==null?void 0:s.id,includeResources:!!n,tags:h==null?void 0:h.join(","),title:f}},{itemId:y}=await e.request(`${i}/copy`,m);return new ju({id:y,portal:e})}updateThumbnail(t){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const e=t.thumbnail,i=t.filename,n={method:"post"};if(typeof e=="string")hp(e)?n.query={data:e}:n.query={url:lo(e)},i!=null&&(n.query.filename=i);else{const s=new FormData;i!=null?s.append("file",e,i):s.append("file",e),n.body=s}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,n).then(()=>this.reload())}):Promise.reject(new ce("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(t={},e){const{fetchResources:i}=await ge(()=>import("./resourceUtils-CQ1l2Cne.js"),[],import.meta.url);return i(this,t,e)}async addResource(t,e,i){const{addOrUpdateResources:n}=await ge(()=>import("./resourceUtils-CQ1l2Cne.js"),[],import.meta.url);return t.portalItem=this,await n(this,[{resource:t,content:e,compress:i==null?void 0:i.compress,access:i==null?void 0:i.access}],"add",i),t}async removeResource(t,e){const{removeResource:i}=await ge(()=>import("./resourceUtils-CQ1l2Cne.js"),[],import.meta.url);if(t.portalItem&&t.portalItem.itemUrl!==this.itemUrl)throw new ce("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return i(this,t,e)}async removeAllResources(t){const{removeAllResources:e}=await ge(()=>import("./resourceUtils-CQ1l2Cne.js"),[],import.meta.url);return e(this,t)}resourceFromPath(t){return new Zre({portalItem:this,path:t})}toJSON(){var i,n;const t=this.extent,e={accessInformation:this.accessInformation,categories:_e(this.categories),classification:_e(this.classification),created:(i=this.created)==null?void 0:i.getTime(),description:this.description,extent:t&&[[t.xmin,t.ymin],[t.xmax,t.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:(n=this.modified)==null?void 0:n.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:_e(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:_e(this.typeKeywords),url:this.url};return dK(e)}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new ju({sourceJSON:t})}_getPostQuery(){const t=this.toJSON();for(const e in t)e==="tags"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="typeKeywords"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="extent"&&t[e]&&(t[e]=JSON.stringify(t[e]));return t}};_([S({type:["private","shared","org","public"]})],tt.prototype,"access",void 0),_([S()],tt.prototype,"accessInformation",void 0),_([S({type:String})],tt.prototype,"apiKey",void 0),_([S({json:{read:{source:"appProxies"}}})],tt.prototype,"applicationProxies",void 0),_([S()],tt.prototype,"avgRating",void 0),_([S()],tt.prototype,"categories",void 0),_([S()],tt.prototype,"classification",void 0),_([S({type:Date})],tt.prototype,"created",void 0),_([S()],tt.prototype,"culture",void 0),_([S()],tt.prototype,"description",void 0),_([S({readOnly:!0})],tt.prototype,"displayName",null),_([S({type:Nt})],tt.prototype,"extent",void 0),_([kt("extent")],tt.prototype,"readExtent",null),_([S()],tt.prototype,"groupCategories",void 0),_([S({readOnly:!0})],tt.prototype,"iconUrl",null),_([S()],tt.prototype,"id",void 0),_([S({readOnly:!0})],tt.prototype,"isLayer",null),_([S({type:Boolean,readOnly:!0})],tt.prototype,"isOrgItem",void 0),_([S()],tt.prototype,"itemControl",void 0),_([S({readOnly:!0})],tt.prototype,"itemPageUrl",null),_([S({readOnly:!0})],tt.prototype,"itemUrl",null),_([S()],tt.prototype,"licenseInfo",void 0),_([S({type:Date})],tt.prototype,"modified",void 0),_([S()],tt.prototype,"name",void 0),_([S()],tt.prototype,"numComments",void 0),_([S()],tt.prototype,"numRatings",void 0),_([S()],tt.prototype,"numViews",void 0),_([S()],tt.prototype,"owner",void 0),_([S()],tt.prototype,"ownerFolder",void 0),_([S({type:es})],tt.prototype,"portal",void 0),_([S()],tt.prototype,"screenshots",void 0),_([S()],tt.prototype,"size",void 0),_([S()],tt.prototype,"snippet",void 0),_([S()],tt.prototype,"sourceJSON",void 0),_([S({type:String})],tt.prototype,"sourceUrl",void 0),_([S({type:String})],tt.prototype,"spatialReference",void 0),_([S()],tt.prototype,"tags",void 0),_([S()],tt.prototype,"thumbnail",void 0),_([S({readOnly:!0})],tt.prototype,"thumbnailUrl",null),_([S()],tt.prototype,"title",void 0),_([S()],tt.prototype,"type",void 0),_([S()],tt.prototype,"typeKeywords",void 0),_([S({type:String,json:{read(t,e){var i;if(ese.has(e.type)){const n=(i=this.portal)==null?void 0:i.restUrl;t||(t=n&&this.id?`${n}/content/items/${this.id}/data`:null)}return t}}})],tt.prototype,"url",void 0),_([S({readOnly:!0})],tt.prototype,"userItemUrl",null),tt=ju=_([J("esri.portal.PortalItem")],tt);const rz=tt,sz=Object.freeze(Object.defineProperty({__proto__:null,default:rz},Symbol.toStringTag,{value:"Module"}));async function tse(t){if(!t)return;const e=t.includes("-vector")?t.slice(0,t.indexOf("-vector")):t.includes("-3d")?t.slice(0,t.indexOf("-3d")):t,i=await mE("esri/t9n/basemaps");return i[t]||i[e]}const h0={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return xt("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return xt("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return xt("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return xt("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return xt("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return xt("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get"dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return xt("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return xt("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return xt("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return xt("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return xt("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return xt("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return xt("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return xt("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return xt("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return xt("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/8628d259c9d14bdc848771c23c513940/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap",visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return xt("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"arcgis-imagery":{get thumbnailUrl(){return xt("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return xt("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return xt("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return xt("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return xt("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return xt("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return xt("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return xt("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return xt("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return xt("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]},"arcgis-human-geography":{title:"Human Geography",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Base",title:"Human Geography Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Detail",title:"Human Geography Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Label",title:"Human Geography Label",isReference:!0}]},"arcgis-human-geography-dark":{title:"Human Geography (Dark)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Base",title:"Human Geography Dark Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Detail",title:"Human Geography Dark Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Label",title:"Human Geography Dark Label",isReference:!0}]}},ise=new Set(["ar","bs","ca","hr","cs","da","nl","en","et","fi","fr","de","el","he","hu","id","it","ja","ko","lv","lt","nb","pl","ro","ru","sr","es","sv","th","tr","uk","vi"]);let Vl=class extends Oe{constructor(e){super(e),this.apiKey=null,this.id=null,this.language=null,this.places=null,this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/webmaps",this.worldview=null}getLanguageParamValue(){if(this.language)return this.language;const e=Zr().toLowerCase();switch(e){case"pt-br":return"pt-BR";case"pt-pt":return"pt-PT";case"zh-cn":return"zh-CN";case"zh-hk":return"zh-HK";case"zh-tw":return"zh-TW"}const i=OQ(e);return i==="pt"?"pt-BR":i&&ise.has(i)?i:"global"}};_([S()],Vl.prototype,"apiKey",void 0),_([S()],Vl.prototype,"id",void 0),_([S()],Vl.prototype,"language",void 0),_([S()],Vl.prototype,"places",void 0),_([S()],Vl.prototype,"serviceUrl",void 0),_([S()],Vl.prototype,"worldview",void 0),Vl=_([J("esri.support.BasemapStyle")],Vl);const nse=Vl;function rse(t){return lz(t)||lse(t)}function sse(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="feature"}function ose(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="graphics"}function ase(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="map-notes"&&"sublayers"in t}function oz(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="knowledge-graph"&&"layers"in t}function az(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="link-chart"&&"layers"in t}function lse(t){return(t==null?void 0:t.type)==="scene"}function cse(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="subtype-group"&&"sublayers"in t}function Gu(t){return(t==null?void 0:t.type)==="subtype-sublayer"}function lz(t){const e=t==null?void 0:t.type;return e==="imagery-tile"||e==="tile"||e==="open-street-map"||e==="vector-tile"||e==="web-tile"||e==="wmts"}function hse(t){const e=t==null?void 0:t.type;return e==="base-tile"||e==="tile"||e==="elevation"||e==="imagery-tile"||e==="base-elevation"||e==="open-street-map"||e==="wcs"||e==="web-tile"||e==="wmts"||e==="vector-tile"}const k7e={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function C7e(t){const e=t==null?void 0:t.type;return e==="building-scene"||e==="integrated-mesh"||e==="point-cloud"||e==="scene"}function use(t){return t==="integrated-mesh"||t==="integrated-mesh-3dtiles"}function j3(t){var e;return(t==null?void 0:t.type)==="feature"&&!t.url&&((e=t.source)==null?void 0:e.type)==="memory"}function I7e(t){var i;const e=t==null?void 0:t.type;return(e==="feature"||e==="subtype-group"||e==="oriented-imagery")&&((i=t.source)==null?void 0:i.type)==="feature-layer"}function dse(t){if(t.activeLayer){const e=t.activeLayer.tileMatrixSet;if(e)return e;const i=t.activeLayer.tileMatrixSets;if(i)return i}return null}async function A7e(t,e){const i=Kt==null?void 0:Kt.findServerInfo(t);if((i==null?void 0:i.currentVersion)!=null)return i.owningSystemUrl||null;const n=t.toLowerCase().indexOf("/rest/services");if(n===-1)return null;const s=`${t.slice(0,n)}/rest/info`,h=e!=null?e.signal:null,{data:f}=await ki(s,{query:{f:"json"},responseType:"json",signal:h});return(f==null?void 0:f.owningSystemUrl)||null}function pse(t){if(!("capabilities"in t))return!1;switch(t.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"sublayer":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function fse(t){return pse(t)?"effectiveCapabilities"in t?t.effectiveCapabilities:t.capabilities:null}function gse(t){if(!("editingEnabled"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}function mse(t){return!!gse(t)&&("effectiveEditingEnabled"in t?t.effectiveEditingEnabled:t.editingEnabled)}const yse=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),vse=new Set(["catalog","csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","knowledge-graph","map-image","map-notes","media","ogc-feature","oriented-imagery","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function bse(t){return t.layerContainerType==="basemap"?yse:t.layerContainerType==="operational-layers"?vse:null}function wse(t,e){if(e.restrictedWebMapWriting){const i=bse(e);return i==null||i.has(t.type)&&!j3(t)}return!0}function _se(t,e){var i;if(e)if(j3(t)){const n=Km("featureCollection.layers",e),s=(i=n==null?void 0:n[0])==null?void 0:i.layerDefinition;s&&J$(t,s)}else t.type!=="group"&&J$(t,e)}function J$(t,e){"maxScale"in t&&(e.maxScale=P2(t.maxScale)??void 0),"minScale"in t&&(e.minScale=P2(t.minScale)??void 0)}function xse(t,e){if(_se(t,e),e&&(e.id=t.id,"blendMode"in t&&(e.blendMode=t.blendMode,e.blendMode==="normal"&&delete e.blendMode),e.opacity=P2(t.opacity)??void 0,e.title=t.title||"Layer",e.visibility=t.visible,"legendEnabled"in t&&t.type!=="wmts"))if(j3(t)){const i=e.featureCollection;i&&(i.showLegend=t.legendEnabled)}else e.showLegend=t.legendEnabled}function Y$(t,e,i){if(!t.persistenceEnabled)return null;if(!("write"in t)||!t.write)return i!=null&&i.messages&&i.messages.push(new ce("layer:unsupported",`Layers (${t.title}, ${t.id}) of type '${t.declaredClass}' cannot be persisted`,{layer:t})),null;if(j3(t)&&!t.isTable)e=t.resourceInfo;else if(wse(t,i)){const n={};return t.write(n,i)?n:null}return e!=null&&xse(t,e=_e(e)),e}var G1;let Sse=0,ps=G1=class extends ty(da){constructor(t){super(t),this.id=null,this.portalItem=null,this.spatialReference=null,this.style=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+Sse++,this.baseLayers=new Pe,this.referenceLayers=new Pe;const e=n=>{n.parent&&n.parent!==this&&"remove"in n.parent&&n.parent.remove(n),n.parent=this,n.type==="elevation"&&Ae.getLogger(this).error(`Layer '${n.title}, id:${n.id}' of type '${n.type}' is not supported as a basemap layer and will therefore be ignored.`)},i=n=>{n.parent=null};this.addHandles([this.baseLayers.on("after-add",n=>e(n.item)),this.referenceLayers.on("after-add",n=>e(n.item)),this.baseLayers.on("after-remove",n=>i(n.item)),this.referenceLayers.on("after-remove",n=>i(n.item))])}initialize(){this.when().catch(t=>{Ae.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,t)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const t=this.baseLayers.toArray();for(const i of t)i.destroy();const e=this.referenceLayers.toArray();for(const i of e)i.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),this.portalItem=mt(this.portalItem)}normalizeCtorArgs(t){return t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),delete(t={...t}).resourceInfo),t}set baseLayers(t){this._set("baseLayers",cu(t,this._get("baseLayers")))}_writeBaseLayers(t,e,i){const n=[];t&&(i={...i,layerContainerType:"basemap"},this.baseLayers.forEach(s=>{const h=Y$(s,i.webmap?i.webmap.getLayerJSONFromResourceInfo(s):null,i);h!=null&&n.push(h)}),this.referenceLayers.forEach(s=>{const h=Y$(s,i.webmap?i.webmap.getLayerJSONFromResourceInfo(s):null,i);h!=null&&(s.type!=="scene"&&(h.isReference=!0),n.push(h))})),e.baseMapLayers=n}set referenceLayers(t){this._set("referenceLayers",cu(t,this._get("referenceLayers")))}writeTitle(t,e){e.title=t||"Basemap"}load(t){return this.addResolvingPromise(this._loadFromSource(t)),Promise.resolve(this)}loadAll(){return ez(this,t=>{t(this.baseLayers,this.referenceLayers)})}clone(){const t={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(e=>w2(e)?e.clone():e),referenceLayers:this.referenceLayers.map(e=>w2(e)?e.clone():e)};return this.loaded&&(t.loadStatus="loaded"),new G1({resourceInfo:this.resourceInfo}).set(t)}read(t,e){this.resourceInfo||this._set("resourceInfo",{data:t,context:e}),super.read(t,e)}write(t,e){var i;return t=t||{},e!=null&&e.origin||(e={origin:"web-map",...e}),super.write(t,e),!this.loaded&&((i=this.resourceInfo)!=null&&i.data.baseMapLayers)&&(t.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(n=>{const s=_e(n);return s.url&&gl(s.url)&&(s.url=`https:${s.url}`),s.templateUrl&&gl(s.templateUrl)&&(s.templateUrl=`https:${s.templateUrl}`),s})),t}async _loadFromSource(t){const{resourceInfo:e,portalItem:i,style:n}=this;Jt(t);const s=[];if(e){const h=e.context?e.context.url:null;if(s.push(this._loadLayersFromJSON(e.data,h,t)),e.data.id&&!e.data.title){const f=e.data.id;s.push(tse(f).then(m=>{m&&this.read({title:m},e.context)}))}}else i?s.push(this._loadFromItem(i,t)):n&&s.push(this._loadFromStylesService(n,t));await Promise.all(s)}async _loadLayersFromJSON(t,e,i){var y,x;const n=(y=this.resourceInfo)==null?void 0:y.context,s=((x=this.portalItem)==null?void 0:x.portal)||(n==null?void 0:n.portal)||null,h=Ese[(n==null?void 0:n.origin)||""]??"web-map",{populateOperationalLayers:f}=await ge(async()=>{const{populateOperationalLayers:E}=await import("./layersCreator-VVKELQ4n.js");return{populateOperationalLayers:E}},__vite__mapDeps([203,204,205,206,187,195]),import.meta.url),m=[];if(Jt(i),t.baseMapLayers&&Array.isArray(t.baseMapLayers)){const E={context:{...n,origin:h,url:e,portal:s,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},k=L=>h==="web-scene"&&L.layerType==="ArcGISSceneServiceLayer"||L.isReference,I=f(this.baseLayers,t.baseMapLayers.filter(L=>!k(L)),E);m.push(I);const P=f(this.referenceLayers,t.baseMapLayers.filter(k),E);m.push(P)}await Promise.allSettled(m)}async _loadFromItem(t,e){const i=await t.load(e),n=await i.fetchData("json",e),s=$r(t.itemUrl??"");return this._set("resourceInfo",{data:n.baseMap??{},context:{origin:Tse[t.type||""]??"web-map",portal:t.portal||es.getDefault(),url:s}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:n.spatialReference},this.resourceInfo.context),this.read({title:t.title,thumbnailUrl:t.thumbnailUrl},{origin:"portal-item",portal:t.portal||es.getDefault(),url:s}),this._loadLayersFromJSON(this.resourceInfo.data,s,e)}async _loadFromStylesService(t,e){const i=`${t.serviceUrl}/${t.id}`,n=(await ki(i,{query:{language:t.getLanguageParamValue(),places:t.places,worldview:t.worldview,token:t.apiKey},signal:e==null?void 0:e.signal})).data,s=$r(i);if(this._set("resourceInfo",{data:n.baseMap??{},context:{origin:"web-map",url:s}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:n.spatialReference},this.resourceInfo.context),await this._loadLayersFromJSON(this.resourceInfo.data,s,e),t.apiKey)for(const h of[...this.baseLayers,...this.referenceLayers])"apiKey"in h&&(h.apiKey=t.apiKey)}static fromId(t){const e=h0[t];return e?e.itemId?new G1({portalItem:{id:e.itemId,portal:{url:"https://www.arcgis.com"}}}):G1.fromJSON(e,{origin:e.is3d?"web-scene":"web-map"}):null}};_([S({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(t,e,i,n){this._writeBaseLayers(t,e,n)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:Pe}},writer(t,e,i,n){this._writeBaseLayers(t,e,n)}}}}}})],ps.prototype,"baseLayers",null),_([S({type:String,json:{origins:{"web-scene":{write:!0}}}})],ps.prototype,"id",void 0),_([S({type:rz})],ps.prototype,"portalItem",void 0),_([S()],ps.prototype,"referenceLayers",null),_([S({readOnly:!0})],ps.prototype,"resourceInfo",void 0),_([S({type:Ke})],ps.prototype,"spatialReference",void 0),_([S({type:nse})],ps.prototype,"style",void 0),_([S()],ps.prototype,"thumbnailUrl",void 0),_([S({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],ps.prototype,"title",void 0),_([yt("title")],ps.prototype,"writeTitle",null),ps=G1=_([J("esri.Basemap")],ps);const Tse={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},Ese={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"},Yh=ps,Mse=Object.freeze(Object.defineProperty({__proto__:null,default:Yh},Symbol.toStringTag,{value:"Module"})),rw={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function cz(t){return!!rw[t]||!!rw[t.toLowerCase()]}function $E(t){return rw[t]??rw[t.toLowerCase()]}function $se(t){return[...$E(t)]}function M5(t,e,i){i<0&&++i,i>1&&--i;const n=6*i;return n<1?t+(e-t)*n:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}function hz(t,e,i,n=1){const s=(t%360+360)%360/360,h=i<=.5?i*(e+1):i+e-i*e,f=2*i-h;return[Math.round(255*M5(f,h,s+1/3)),Math.round(255*M5(f,h,s)),Math.round(255*M5(f,h,s-1/3)),n]}function kse(t){const e=t.length>5,i=e?8:4,n=(1<<i)-1,s=e?1:17,h=e?t.length===9:t.length===5;let f=+("0x"+t.slice(1));if(isNaN(f))return null;const m=[0,0,0,1];let y;return h&&(y=f&n,f>>=i,m[3]=s*y/255),y=f&n,f>>=i,m[2]=s*y,y=f&n,f>>=i,m[1]=s*y,y=f&n,f>>=i,m[0]=s*y,m}function pv(t){return hr(mT(t),0,255)}function fv(t,e,i){return t=Number(t),isNaN(t)?i:t<e?e:t>i?i:t}function gv(t,e){const i=t.toString(16).padStart(2,"0");return e?i.slice(0,1):i}let o4=class yn{static blendColors(e,i,n,s=new yn){return s.r=Math.round(e.r+(i.r-e.r)*n),s.g=Math.round(e.g+(i.g-e.g)*n),s.b=Math.round(e.b+(i.b-e.b)*n),s.a=e.a+(i.a-e.a)*n,s._sanitize()}static fromRgb(e,i){const n=e.toLowerCase().match(/^(rgba?|hsla?)\(([\s.\-,%0-9]+)\)/);if(n){const s=n[2].split(/\s*,\s*/),h=n[1];if(h==="rgb"&&s.length===3||h==="rgba"&&s.length===4){const f=s[0];if(f.charAt(f.length-1)==="%"){const m=s.map(y=>2.56*parseFloat(y));return s.length===4&&(m[3]=parseFloat(s[3])),yn.fromArray(m,i)}return yn.fromArray(s.map(m=>parseFloat(m)),i)}if(h==="hsl"&&s.length===3||h==="hsla"&&s.length===4)return yn.fromArray(hz(parseFloat(s[0]),parseFloat(s[1])/100,parseFloat(s[2])/100,parseFloat(s[3])),i)}return null}static fromHex(e,i=new yn){if(e[0]!=="#"||isNaN(+`0x${e.slice(1)}`))return null;switch(e.length){case 4:case 5:{const n=parseInt(e.slice(1,2),16),s=parseInt(e.slice(2,3),16),h=parseInt(e.slice(3,4),16),f=e.length===5?15:parseInt(e.slice(4),16);return yn.fromArray([n+16*n,s+16*s,h+16*h,(f+16*f)/255],i)}case 7:case 9:{const n=parseInt(e.slice(1,3),16),s=parseInt(e.slice(3,5),16),h=parseInt(e.slice(5,7),16),f=e.length===7?255:parseInt(e.slice(7),16);return yn.fromArray([n,s,h,f/255],i)}default:return null}}static fromArray(e,i=new yn){return i._set(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3])),isNaN(i.a)&&(i.a=1),i._sanitize()}static fromString(e,i){const n=cz(e)?$E(e):null;return n&&yn.fromArray(n,i)||yn.fromRgb(e,i)||yn.fromHex(e,i)}static fromJSON(e){return e!=null?new yn([e[0],e[1],e[2],(e[3]??255)/255]):void 0}static toUnitRGB(e){return e!=null?[e.r/255,e.g/255,e.b/255]:null}static toUnitRGBA(e){return e!=null?[e.r/255,e.g/255,e.b/255,e.a!=null?e.a:1]:null}constructor(e){this.r=255,this.g=255,this.b=255,this.a=1,e&&this.setColor(e)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(e){return typeof e=="string"?yn.fromString(e,this):Array.isArray(e)?yn.fromArray(e,this):(this._set(e.r??0,e.g??0,e.b??0,e.a??1),e instanceof yn||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(e){const i=(e==null?void 0:e.capitalize)??!1,n=(e==null?void 0:e.digits)??6,s=n===3||n===4,h=n===4||n===8,f=`#${gv(this.r,s)}${gv(this.g,s)}${gv(this.b,s)}${h?gv(Math.round(255*this.a),s):""}`;return i?f.toUpperCase():f}toCss(e=!1){const i=this.r+", "+this.g+", "+this.b;return e?`rgba(${i}, ${this.a})`:`rgb(${i})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(e=yn.AlphaMode.ALWAYS){const i=pv(this.r),n=pv(this.g),s=pv(this.b);return e===yn.AlphaMode.ALWAYS||this.a!==1?[i,n,s,pv(255*this.a)]:[i,n,s]}clone(){return new yn(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(e){return e!=null&&e.r===this.r&&e.g===this.g&&e.b===this.b&&e.a===this.a}_sanitize(){return this.r=Math.round(fv(this.r,0,255)),this.g=Math.round(fv(this.g,0,255)),this.b=Math.round(fv(this.b,0,255)),this.a=fv(this.a,0,1),this}_set(e,i,n,s){this.r=e,this.g=i,this.b=n,this.a=s}};o4.prototype.declaredClass="esri.Color",function(t){var e;(e=t.AlphaMode||(t.AlphaMode={}))[e.ALWAYS=0]="ALWAYS",e[e.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(o4);const ht=o4;function O7e(t){}function Cse(t){return()=>t}function Ze(t,e={}){const i=t instanceof xn?t:new xn(t,e),{alwaysWriteDefaults:n,default:s,ignoreUnknown:h=!0,name:f,nonNullable:m,readOnly:y=!1}=e;return S({type:h?i.apiValues:String,json:{type:i.jsonValues,default:s,name:f,read:!y&&{reader:i.read},write:{writer:i.write,alwaysWriteDefaults:n}},nonNullable:m,readOnly:y})}var a4;let Mb=a4=class extends De{constructor(t){super(t),this.type="none"}clone(){return new a4({type:this.type})}};_([Ze({none:"none",stayAbove:"stay-above"})],Mb.prototype,"type",void 0),Mb=a4=_([J("esri.ground.NavigationConstraint")],Mb);function uz(t){const e=mT(100*(1-t));return Math.max(0,Math.min(e,100))}function dz(t){const e=1-t/100;return Math.max(0,Math.min(e,1))}var l4;let ql=l4=class extends ty(da){constructor(t){super(t),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new Pe;const e=n=>{n.parent&&n.parent!==this&&"remove"in n.parent&&n.parent.remove(n),n.parent=this,n.type!=="elevation"&&n.type!=="base-elevation"&&Ae.getLogger(this).error(`Layer '${n.title}, id:${n.id}' of type '${n.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},i=n=>{n.parent=null};this.addHandles([this.layers.on("after-add",n=>e(n.item)),this.layers.on("after-remove",n=>i(n.item))])}initialize(){this.when().catch(t=>{Ir(t)||Ae.getLogger(this).error("#load()","Failed to load ground",t)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const t=this.layers.removeAll();for(const e of t)mt(e);this.layers.destroy()}normalizeCtorArgs(t){return t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),delete(t={...t}).resourceInfo),t}set layers(t){this._set("layers",cu(t,this._get("layers")))}writeLayers(t,e,i,n){const s=[];t&&(n={...n,layerContainerType:"ground"},t.forEach(h=>{if("write"in h){const f={};Cse(h)().write(f,n)&&s.push(f)}else n!=null&&n.messages&&n.messages.push(new ce("layer:unsupported",`Layers (${h.title}, ${h.id}) of type '${h.declaredClass}' cannot be persisted in the ground`,{layer:h}))})),e.layers=s}load(t){return this.addResolvingPromise(this._loadFromSource(t)),Promise.resolve(this)}loadAll(){return ez(this,t=>{t(this.layers)})}async queryElevation(t,e){await this.load({signal:e==null?void 0:e.signal});const{ElevationQuery:i}=await ge(()=>import("./ElevationQuery-DxPRs7TG.js"),[],import.meta.url);Jt(e);const n=new i,s=this.layers.filter(X$).toArray();return n.queryAll(s,t,e)}async createElevationSampler(t,e){await this.load({signal:e==null?void 0:e.signal});const{ElevationQuery:i}=await ge(()=>import("./ElevationQuery-DxPRs7TG.js"),[],import.meta.url);Jt(e);const n=new i,s=this.layers.filter(X$).toArray();return n.createSamplerAll(s,t,e)}clone(){const t={opacity:this.opacity,surfaceColor:_e(this.surfaceColor),navigationConstraint:_e(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(t.loadStatus="loaded"),new l4({resourceInfo:this.resourceInfo}).set(t)}read(t,e){this.resourceInfo||this._set("resourceInfo",{data:t,context:e}),super.read(t,e)}_loadFromSource(t){const e=this.resourceInfo;return e?this._loadLayersFromJSON(e.data,e.context,t):Promise.resolve()}async _loadLayersFromJSON(t,e,i){const n=(e==null?void 0:e.origin)||"web-scene",s=(e==null?void 0:e.portal)||null,h=(e==null?void 0:e.url)||null,{populateOperationalLayers:f}=await ge(async()=>{const{populateOperationalLayers:y}=await import("./layersCreator-VVKELQ4n.js");return{populateOperationalLayers:y}},__vite__mapDeps([203,204,205,206,187,195]),import.meta.url);Jt(i);const m=[];if(t.layers&&Array.isArray(t.layers)){const y={context:{origin:n,url:h,portal:s,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};m.push(f(this.layers,t.layers,y))}await Promise.allSettled(m)}};function Ise(t){return t&&"createElevationSampler"in t}function X$(t){return t.type==="elevation"||Ise(t)}_([S({json:{read:!1}})],ql.prototype,"layers",null),_([yt("layers")],ql.prototype,"writeLayers",null),_([S({readOnly:!0})],ql.prototype,"resourceInfo",void 0),_([S({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:gi,read:{reader:dz,source:"transparency"},write:{writer:(t,e)=>{e.transparency=uz(t)},target:"transparency"}}})],ql.prototype,"opacity",void 0),_([S({type:ht,json:{type:[gi],write:(t,e)=>{e.surfaceColor=t.toJSON().slice(0,3)}}})],ql.prototype,"surfaceColor",void 0),_([S({type:Mb,json:{write:!0}})],ql.prototype,"navigationConstraint",void 0),ql=l4=_([J("esri.Ground")],ql);const sw=ql,mv=new WeakMap;function pz(t){return!t.destroyed&&(mv.has(t)||t.addHandles([Ee(()=>{const e=t.parent;return!(!e||!("type"in e))&&(e.type==="catalog-dynamic-group"||pz(e))},e=>mv.set(t,e),Pi),ct(()=>mv.delete(t))]),mv.get(t))}function Ase(t){return typeof t=="object"&&t!=null&&"loaded"in t&&t.loaded===!0&&"type"in t}function Ose(t){var e,i;return!(!Ase(t)||!((i=(e=fse(t))==null?void 0:e.operations)!=null&&i.supportsEditing)||"editingEnabled"in t&&!mse(t)||pz(t))}const Pse=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,Rse="screenUtils.toPt: input not recognized!",fz=96;function P7e(t){return t?t/72*fz:0}function hu(t){return t?72*t/fz:0}function Ci(t){if(typeof t=="string"){const e=t.match(Pse);if(e){const i=Number(e[1]),n=e[3]&&e[3].toLowerCase(),s=t.charAt(0)==="-",h=n==="px"?hu(i):i;return s?-h:h}return console.warn(Rse),null}return t}function Ri(t=0,e=0){return{x:t,y:e}}function R7e(t){return t?Ri(t.x,t.y):null}function gz(t=0,e=0){return[t,e]}function N7e(t=0,e=0,i=0){return[t,e,i]}function L7e(t){return t}function D7e(t){return t}function z7e(t){return t}function F7e(t,e){return e?(e[0]=t.x,e[1]=t.y,e.length>2&&(e[2]=0),e):[t.x,t.y]}function G3(){const t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Nse(t){const e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Lse(t,e,i,n,s,h,f,m,y,x,E,k,I,P,L,D){const j=new Float32Array(16);return j[0]=t,j[1]=e,j[2]=i,j[3]=n,j[4]=s,j[5]=h,j[6]=f,j[7]=m,j[8]=y,j[9]=x,j[10]=E,j[11]=k,j[12]=I,j[13]=P,j[14]=L,j[15]=D,j}function Dse(t,e){return new Float32Array(t,e,16)}const zse=G3();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:zse,clone:Nse,create:G3,createView:Dse,fromValues:Lse},Symbol.toStringTag,{value:"Module"}));let kE=1e-6;function Ni(){return kE}function Fse(t){kE=t}const hy=Math.random,jse=Math.PI/180,Gse=180/Math.PI;function CE(t){return t*jse}function Use(t){return t*Gse}function Bse(t,e){return Math.abs(t-e)<=kE*Math.max(1,Math.abs(t),Math.abs(e))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:hy,equals:Bse,getEpsilon:Ni,setEpsilon:Fse,toDegree:Use,toRadian:CE},Symbol.toStringTag,{value:"Module"}));function mz(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function wu(t,e,i,n,s,h,f,m,y,x,E,k,I,P,L,D,j){return t[0]=e,t[1]=i,t[2]=n,t[3]=s,t[4]=h,t[5]=f,t[6]=m,t[7]=y,t[8]=x,t[9]=E,t[10]=k,t[11]=I,t[12]=P,t[13]=L,t[14]=D,t[15]=j,t}function U3(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function _u(t,e){if(t===e){const i=e[1],n=e[2],s=e[3],h=e[6],f=e[7],m=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=i,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=h,t[11]=e[14],t[12]=s,t[13]=f,t[14]=m}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function Hse(t,e){return yz(t,e)||U3(t),t}function yz(t,e){const i=e[0],n=e[1],s=e[2],h=e[3],f=e[4],m=e[5],y=e[6],x=e[7],E=e[8],k=e[9],I=e[10],P=e[11],L=e[12],D=e[13],j=e[14],H=e[15],W=i*m-n*f,Z=i*y-s*f,Y=i*x-h*f,te=n*y-s*m,ie=n*x-h*m,le=s*x-h*y,pe=E*D-k*L,ve=E*j-I*L,be=E*H-P*L,Se=k*j-I*D,Me=k*H-P*D,he=I*H-P*j;let se=W*he-Z*Me+Y*Se+te*be-ie*ve+le*pe;return se?(se=1/se,t[0]=(m*he-y*Me+x*Se)*se,t[1]=(s*Me-n*he-h*Se)*se,t[2]=(D*le-j*ie+H*te)*se,t[3]=(I*ie-k*le-P*te)*se,t[4]=(y*be-f*he-x*ve)*se,t[5]=(i*he-s*be+h*ve)*se,t[6]=(j*Y-L*le-H*Z)*se,t[7]=(E*le-I*Y+P*Z)*se,t[8]=(f*Me-m*be+x*pe)*se,t[9]=(n*be-i*Me-h*pe)*se,t[10]=(L*ie-D*Y+H*W)*se,t[11]=(k*Y-E*ie-P*W)*se,t[12]=(m*ve-f*Se-y*pe)*se,t[13]=(i*Se-n*ve+s*pe)*se,t[14]=(D*Z-L*te-j*W)*se,t[15]=(E*te-k*Z+I*W)*se,t):null}function Vse(t,e){const i=e[0],n=e[1],s=e[2],h=e[3],f=e[4],m=e[5],y=e[6],x=e[7],E=e[8],k=e[9],I=e[10],P=e[11],L=e[12],D=e[13],j=e[14],H=e[15];return t[0]=m*(I*H-P*j)-k*(y*H-x*j)+D*(y*P-x*I),t[1]=-(n*(I*H-P*j)-k*(s*H-h*j)+D*(s*P-h*I)),t[2]=n*(y*H-x*j)-m*(s*H-h*j)+D*(s*x-h*y),t[3]=-(n*(y*P-x*I)-m*(s*P-h*I)+k*(s*x-h*y)),t[4]=-(f*(I*H-P*j)-E*(y*H-x*j)+L*(y*P-x*I)),t[5]=i*(I*H-P*j)-E*(s*H-h*j)+L*(s*P-h*I),t[6]=-(i*(y*H-x*j)-f*(s*H-h*j)+L*(s*x-h*y)),t[7]=i*(y*P-x*I)-f*(s*P-h*I)+E*(s*x-h*y),t[8]=f*(k*H-P*D)-E*(m*H-x*D)+L*(m*P-x*k),t[9]=-(i*(k*H-P*D)-E*(n*H-h*D)+L*(n*P-h*k)),t[10]=i*(m*H-x*D)-f*(n*H-h*D)+L*(n*x-h*m),t[11]=-(i*(m*P-x*k)-f*(n*P-h*k)+E*(n*x-h*m)),t[12]=-(f*(k*j-I*D)-E*(m*j-y*D)+L*(m*I-y*k)),t[13]=i*(k*j-I*D)-E*(n*j-s*D)+L*(n*I-s*k),t[14]=-(i*(m*j-y*D)-f*(n*j-s*D)+L*(n*y-s*m)),t[15]=i*(m*I-y*k)-f*(n*I-s*k)+E*(n*y-s*m),t}function qse(t){const e=t[0],i=t[1],n=t[2],s=t[3],h=t[4],f=t[5],m=t[6],y=t[7],x=t[8],E=t[9],k=t[10],I=t[11],P=t[12],L=t[13],D=t[14],j=t[15];return(e*f-i*h)*(k*j-I*D)-(e*m-n*h)*(E*j-I*L)+(e*y-s*h)*(E*D-k*L)+(i*m-n*f)*(x*j-I*P)-(i*y-s*f)*(x*D-k*P)+(n*y-s*m)*(x*L-E*P)}function vz(t,e,i){const n=e[0],s=e[1],h=e[2],f=e[3],m=e[4],y=e[5],x=e[6],E=e[7],k=e[8],I=e[9],P=e[10],L=e[11],D=e[12],j=e[13],H=e[14],W=e[15];let Z=i[0],Y=i[1],te=i[2],ie=i[3];return t[0]=Z*n+Y*m+te*k+ie*D,t[1]=Z*s+Y*y+te*I+ie*j,t[2]=Z*h+Y*x+te*P+ie*H,t[3]=Z*f+Y*E+te*L+ie*W,Z=i[4],Y=i[5],te=i[6],ie=i[7],t[4]=Z*n+Y*m+te*k+ie*D,t[5]=Z*s+Y*y+te*I+ie*j,t[6]=Z*h+Y*x+te*P+ie*H,t[7]=Z*f+Y*E+te*L+ie*W,Z=i[8],Y=i[9],te=i[10],ie=i[11],t[8]=Z*n+Y*m+te*k+ie*D,t[9]=Z*s+Y*y+te*I+ie*j,t[10]=Z*h+Y*x+te*P+ie*H,t[11]=Z*f+Y*E+te*L+ie*W,Z=i[12],Y=i[13],te=i[14],ie=i[15],t[12]=Z*n+Y*m+te*k+ie*D,t[13]=Z*s+Y*y+te*I+ie*j,t[14]=Z*h+Y*x+te*P+ie*H,t[15]=Z*f+Y*E+te*L+ie*W,t}function Wse(t,e,i){const n=i[0],s=i[1],h=i[2];if(e===t)t[12]=e[0]*n+e[4]*s+e[8]*h+e[12],t[13]=e[1]*n+e[5]*s+e[9]*h+e[13],t[14]=e[2]*n+e[6]*s+e[10]*h+e[14],t[15]=e[3]*n+e[7]*s+e[11]*h+e[15];else{const f=e[0],m=e[1],y=e[2],x=e[3],E=e[4],k=e[5],I=e[6],P=e[7],L=e[8],D=e[9],j=e[10],H=e[11];t[0]=f,t[1]=m,t[2]=y,t[3]=x,t[4]=E,t[5]=k,t[6]=I,t[7]=P,t[8]=L,t[9]=D,t[10]=j,t[11]=H,t[12]=f*n+E*s+L*h+e[12],t[13]=m*n+k*s+D*h+e[13],t[14]=y*n+I*s+j*h+e[14],t[15]=x*n+P*s+H*h+e[15]}return t}function Kse(t,e,i){const n=i[0],s=i[1],h=i[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*s,t[5]=e[5]*s,t[6]=e[6]*s,t[7]=e[7]*s,t[8]=e[8]*h,t[9]=e[9]*h,t[10]=e[10]*h,t[11]=e[11]*h,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Zse(t,e,i,n){let s=n[0],h=n[1],f=n[2],m=Math.sqrt(s*s+h*h+f*f);if(m<=Ni())return void mz(t,e);m=1/m,s*=m,h*=m,f*=m;const y=Math.sin(i),x=Math.cos(i),E=1-x,k=e[0],I=e[1],P=e[2],L=e[3],D=e[4],j=e[5],H=e[6],W=e[7],Z=e[8],Y=e[9],te=e[10],ie=e[11],le=s*s*E+x,pe=h*s*E+f*y,ve=f*s*E-h*y,be=s*h*E-f*y,Se=h*h*E+x,Me=f*h*E+s*y,he=s*f*E+h*y,se=h*f*E-s*y,xe=f*f*E+x;t[0]=k*le+D*pe+Z*ve,t[1]=I*le+j*pe+Y*ve,t[2]=P*le+H*pe+te*ve,t[3]=L*le+W*pe+ie*ve,t[4]=k*be+D*Se+Z*Me,t[5]=I*be+j*Se+Y*Me,t[6]=P*be+H*Se+te*Me,t[7]=L*be+W*Se+ie*Me,t[8]=k*he+D*se+Z*xe,t[9]=I*he+j*se+Y*xe,t[10]=P*he+H*se+te*xe,t[11]=L*he+W*se+ie*xe,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15])}function Jse(t,e,i){const n=Math.sin(i),s=Math.cos(i),h=e[4],f=e[5],m=e[6],y=e[7],x=e[8],E=e[9],k=e[10],I=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=h*s+x*n,t[5]=f*s+E*n,t[6]=m*s+k*n,t[7]=y*s+I*n,t[8]=x*s-h*n,t[9]=E*s-f*n,t[10]=k*s-m*n,t[11]=I*s-y*n,t}function Yse(t,e,i){const n=Math.sin(i),s=Math.cos(i),h=e[0],f=e[1],m=e[2],y=e[3],x=e[8],E=e[9],k=e[10],I=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=h*s-x*n,t[1]=f*s-E*n,t[2]=m*s-k*n,t[3]=y*s-I*n,t[8]=h*n+x*s,t[9]=f*n+E*s,t[10]=m*n+k*s,t[11]=y*n+I*s,t}function Xse(t,e,i){const n=Math.sin(i),s=Math.cos(i),h=e[0],f=e[1],m=e[2],y=e[3],x=e[4],E=e[5],k=e[6],I=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=h*s+x*n,t[1]=f*s+E*n,t[2]=m*s+k*n,t[3]=y*s+I*n,t[4]=x*s-h*n,t[5]=E*s-f*n,t[6]=k*s-m*n,t[7]=I*s-y*n,t}function Qse(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function eoe(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function bz(t,e,i){if(e===0)return U3(t);let n=i[0],s=i[1],h=i[2],f=Math.sqrt(n*n+s*s+h*h);if(f<=Ni())return null;f=1/f,n*=f,s*=f,h*=f;const m=Math.sin(e),y=Math.cos(e),x=1-y;return t[0]=n*n*x+y,t[1]=s*n*x+h*m,t[2]=h*n*x-s*m,t[3]=0,t[4]=n*s*x-h*m,t[5]=s*s*x+y,t[6]=h*s*x+n*m,t[7]=0,t[8]=n*h*x+s*m,t[9]=s*h*x-n*m,t[10]=h*h*x+y,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function toe(t,e){const i=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ioe(t,e){const i=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function noe(t,e){const i=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function wz(t,e,i){const n=e[0],s=e[1],h=e[2],f=e[3],m=n+n,y=s+s,x=h+h,E=n*m,k=n*y,I=n*x,P=s*y,L=s*x,D=h*x,j=f*m,H=f*y,W=f*x;return t[0]=1-(P+D),t[1]=k+W,t[2]=I-H,t[3]=0,t[4]=k-W,t[5]=1-(E+D),t[6]=L+j,t[7]=0,t[8]=I+H,t[9]=L-j,t[10]=1-(E+P),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function roe(t,e){const i=soe,n=-e[0],s=-e[1],h=-e[2],f=e[3],m=e[4],y=e[5],x=e[6],E=e[7],k=n*n+s*s+h*h+f*f;return k>0?(i[0]=2*(m*f+E*n+y*h-x*s)/k,i[1]=2*(y*f+E*s+x*n-m*h)/k,i[2]=2*(x*f+E*h+m*s-y*n)/k):(i[0]=2*(m*f+E*n+y*h-x*s),i[1]=2*(y*f+E*s+x*n-m*h),i[2]=2*(x*f+E*h+m*s-y*n)),wz(t,e,i),t}const soe=Te();function ooe(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function aoe(t,e){const i=e[0],n=e[1],s=e[2],h=e[4],f=e[5],m=e[6],y=e[8],x=e[9],E=e[10];return t[0]=Math.sqrt(i*i+n*n+s*s),t[1]=Math.sqrt(h*h+f*f+m*m),t[2]=Math.sqrt(y*y+x*x+E*E),t}function loe(t,e){const i=e[0]+e[5]+e[10];let n=0;return i>0?(n=2*Math.sqrt(i+1),t[3]=.25*n,t[0]=(e[6]-e[9])/n,t[1]=(e[8]-e[2])/n,t[2]=(e[1]-e[4])/n):e[0]>e[5]&&e[0]>e[10]?(n=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/n,t[0]=.25*n,t[1]=(e[1]+e[4])/n,t[2]=(e[8]+e[2])/n):e[5]>e[10]?(n=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/n,t[0]=(e[1]+e[4])/n,t[1]=.25*n,t[2]=(e[6]+e[9])/n):(n=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/n,t[0]=(e[8]+e[2])/n,t[1]=(e[6]+e[9])/n,t[2]=.25*n),t}function coe(t,e,i,n){const s=e[0],h=e[1],f=e[2],m=e[3],y=s+s,x=h+h,E=f+f,k=s*y,I=s*x,P=s*E,L=h*x,D=h*E,j=f*E,H=m*y,W=m*x,Z=m*E,Y=n[0],te=n[1],ie=n[2];return t[0]=(1-(L+j))*Y,t[1]=(I+Z)*Y,t[2]=(P-W)*Y,t[3]=0,t[4]=(I-Z)*te,t[5]=(1-(k+j))*te,t[6]=(D+H)*te,t[7]=0,t[8]=(P+W)*ie,t[9]=(D-H)*ie,t[10]=(1-(k+L))*ie,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function hoe(t,e,i,n,s){const h=e[0],f=e[1],m=e[2],y=e[3],x=h+h,E=f+f,k=m+m,I=h*x,P=h*E,L=h*k,D=f*E,j=f*k,H=m*k,W=y*x,Z=y*E,Y=y*k,te=n[0],ie=n[1],le=n[2],pe=s[0],ve=s[1],be=s[2],Se=(1-(D+H))*te,Me=(P+Y)*te,he=(L-Z)*te,se=(P-Y)*ie,xe=(1-(I+H))*ie,Be=(j+W)*ie,Fe=(L+Z)*le,ze=(j-W)*le,it=(1-(I+D))*le;return t[0]=Se,t[1]=Me,t[2]=he,t[3]=0,t[4]=se,t[5]=xe,t[6]=Be,t[7]=0,t[8]=Fe,t[9]=ze,t[10]=it,t[11]=0,t[12]=i[0]+pe-(Se*pe+se*ve+Fe*be),t[13]=i[1]+ve-(Me*pe+xe*ve+ze*be),t[14]=i[2]+be-(he*pe+Be*ve+it*be),t[15]=1,t}function uoe(t,e){const i=e[0],n=e[1],s=e[2],h=e[3],f=i+i,m=n+n,y=s+s,x=i*f,E=n*f,k=n*m,I=s*f,P=s*m,L=s*y,D=h*f,j=h*m,H=h*y;return t[0]=1-k-L,t[1]=E+H,t[2]=I-j,t[3]=0,t[4]=E-H,t[5]=1-x-L,t[6]=P+D,t[7]=0,t[8]=I+j,t[9]=P-D,t[10]=1-x-k,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function doe(t,e,i,n,s,h,f){const m=1/(i-e),y=1/(s-n),x=1/(h-f);return t[0]=2*h*m,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*h*y,t[6]=0,t[7]=0,t[8]=(i+e)*m,t[9]=(s+n)*y,t[10]=(f+h)*x,t[11]=-1,t[12]=0,t[13]=0,t[14]=f*h*2*x,t[15]=0,t}function poe(t,e,i,n,s){const h=1/Math.tan(e/2);let f;return t[0]=h/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=h,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,s!=null&&s!==1/0?(f=1/(n-s),t[10]=(s+n)*f,t[14]=2*s*n*f):(t[10]=-1,t[14]=-2*n),t}function foe(t,e,i,n){const s=Math.tan(e.upDegrees*Math.PI/180),h=Math.tan(e.downDegrees*Math.PI/180),f=Math.tan(e.leftDegrees*Math.PI/180),m=Math.tan(e.rightDegrees*Math.PI/180),y=2/(f+m),x=2/(s+h);return t[0]=y,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=x,t[6]=0,t[7]=0,t[8]=-(f-m)*y*.5,t[9]=(s-h)*x*.5,t[10]=n/(i-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*i/(i-n),t[15]=0,t}function goe(t,e,i,n,s,h,f){const m=1/(e-i),y=1/(n-s),x=1/(h-f);return t[0]=-2*m,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*y,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*x,t[11]=0,t[12]=(e+i)*m,t[13]=(s+n)*y,t[14]=(f+h)*x,t[15]=1,t}function moe(t,e,i,n){const s=e[0],h=e[1],f=e[2];let m=s-i[0],y=h-i[1],x=f-i[2];const E=Ni();if(Math.abs(m)<E&&Math.abs(y)<E&&Math.abs(x)<E)return void U3(t);let k=1/Math.sqrt(m*m+y*y+x*x);m*=k,y*=k,x*=k;const I=n[0],P=n[1],L=n[2];let D=P*x-L*y,j=L*m-I*x,H=I*y-P*m;k=Math.sqrt(D*D+j*j+H*H),k?(k=1/k,D*=k,j*=k,H*=k):(D=0,j=0,H=0);let W=y*H-x*j,Z=x*D-m*H,Y=m*j-y*D;k=Math.sqrt(W*W+Z*Z+Y*Y),k?(k=1/k,W*=k,Z*=k,Y*=k):(W=0,Z=0,Y=0),t[0]=D,t[1]=W,t[2]=m,t[3]=0,t[4]=j,t[5]=Z,t[6]=y,t[7]=0,t[8]=H,t[9]=Y,t[10]=x,t[11]=0,t[12]=-(D*s+j*h+H*f),t[13]=-(W*s+Z*h+Y*f),t[14]=-(m*s+y*h+x*f),t[15]=1}function yoe(t,e,i,n){const s=e[0],h=e[1],f=e[2],m=n[0],y=n[1],x=n[2];let E=s-i[0],k=h-i[1],I=f-i[2],P=E*E+k*k+I*I;P>0&&(P=1/Math.sqrt(P),E*=P,k*=P,I*=P);let L=y*I-x*k,D=x*E-m*I,j=m*k-y*E;return P=L*L+D*D+j*j,P>0&&(P=1/Math.sqrt(P),L*=P,D*=P,j*=P),t[0]=L,t[1]=D,t[2]=j,t[3]=0,t[4]=k*j-I*D,t[5]=I*L-E*j,t[6]=E*D-k*L,t[7]=0,t[8]=E,t[9]=k,t[10]=I,t[11]=0,t[12]=s,t[13]=h,t[14]=f,t[15]=1,t}function voe(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function boe(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2+t[9]**2+t[10]**2+t[11]**2+t[12]**2+t[13]**2+t[14]**2+t[15]**2)}function woe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t[9]=e[9]+i[9],t[10]=e[10]+i[10],t[11]=e[11]+i[11],t[12]=e[12]+i[12],t[13]=e[13]+i[13],t[14]=e[14]+i[14],t[15]=e[15]+i[15],t}function _z(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t[9]=e[9]-i[9],t[10]=e[10]-i[10],t[11]=e[11]-i[11],t[12]=e[12]-i[12],t[13]=e[13]-i[13],t[14]=e[14]-i[14],t[15]=e[15]-i[15],t}function _oe(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12]*i,t[13]=e[13]*i,t[14]=e[14]*i,t[15]=e[15]*i,t}function xoe(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t[3]=e[3]+i[3]*n,t[4]=e[4]+i[4]*n,t[5]=e[5]+i[5]*n,t[6]=e[6]+i[6]*n,t[7]=e[7]+i[7]*n,t[8]=e[8]+i[8]*n,t[9]=e[9]+i[9]*n,t[10]=e[10]+i[10]*n,t[11]=e[11]+i[11]*n,t[12]=e[12]+i[12]*n,t[13]=e[13]+i[13]*n,t[14]=e[14]+i[14]*n,t[15]=e[15]+i[15]*n,t}function Soe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function Toe(t,e){if(t===e)return!0;const i=t[0],n=t[1],s=t[2],h=t[3],f=t[4],m=t[5],y=t[6],x=t[7],E=t[8],k=t[9],I=t[10],P=t[11],L=t[12],D=t[13],j=t[14],H=t[15],W=e[0],Z=e[1],Y=e[2],te=e[3],ie=e[4],le=e[5],pe=e[6],ve=e[7],be=e[8],Se=e[9],Me=e[10],he=e[11],se=e[12],xe=e[13],Be=e[14],Fe=e[15],ze=Ni();return Math.abs(i-W)<=ze*Math.max(1,Math.abs(i),Math.abs(W))&&Math.abs(n-Z)<=ze*Math.max(1,Math.abs(n),Math.abs(Z))&&Math.abs(s-Y)<=ze*Math.max(1,Math.abs(s),Math.abs(Y))&&Math.abs(h-te)<=ze*Math.max(1,Math.abs(h),Math.abs(te))&&Math.abs(f-ie)<=ze*Math.max(1,Math.abs(f),Math.abs(ie))&&Math.abs(m-le)<=ze*Math.max(1,Math.abs(m),Math.abs(le))&&Math.abs(y-pe)<=ze*Math.max(1,Math.abs(y),Math.abs(pe))&&Math.abs(x-ve)<=ze*Math.max(1,Math.abs(x),Math.abs(ve))&&Math.abs(E-be)<=ze*Math.max(1,Math.abs(E),Math.abs(be))&&Math.abs(k-Se)<=ze*Math.max(1,Math.abs(k),Math.abs(Se))&&Math.abs(I-Me)<=ze*Math.max(1,Math.abs(I),Math.abs(Me))&&Math.abs(P-he)<=ze*Math.max(1,Math.abs(P),Math.abs(he))&&Math.abs(L-se)<=ze*Math.max(1,Math.abs(L),Math.abs(se))&&Math.abs(D-xe)<=ze*Math.max(1,Math.abs(D),Math.abs(xe))&&Math.abs(j-Be)<=ze*Math.max(1,Math.abs(j),Math.abs(Be))&&Math.abs(H-Fe)<=ze*Math.max(1,Math.abs(H),Math.abs(Fe))}function Eoe(t){const e=Ni(),i=t[0],n=t[1],s=t[2],h=t[4],f=t[5],m=t[6],y=t[8],x=t[9],E=t[10];return Math.abs(1-(i*i+h*h+y*y))<=e&&Math.abs(1-(n*n+f*f+x*x))<=e&&Math.abs(1-(s*s+m*m+E*E))<=e}function Moe(t){return t[0]===1&&t[1]===0&&t[2]===0&&t[4]===0&&t[5]===1&&t[6]===0&&t[8]===0&&t[9]===0&&t[10]===1}const $oe=vz,koe=_z;Object.freeze(Object.defineProperty({__proto__:null,add:woe,adjoint:Vse,copy:mz,determinant:qse,equals:Toe,exactEquals:Soe,frob:boe,fromQuat:uoe,fromQuat2:roe,fromRotation:bz,fromRotationTranslation:wz,fromRotationTranslationScale:coe,fromRotationTranslationScaleOrigin:hoe,fromScaling:eoe,fromTranslation:Qse,fromXRotation:toe,fromYRotation:ioe,fromZRotation:noe,frustum:doe,getRotation:loe,getScaling:aoe,getTranslation:ooe,hasIdentityRotation:Moe,identity:U3,invert:yz,invertOrIdentity:Hse,isOrthoNormal:Eoe,lookAt:moe,mul:$oe,multiply:vz,multiplyScalar:_oe,multiplyScalarAndAdd:xoe,ortho:goe,perspective:poe,perspectiveFromFieldOfView:foe,rotate:Zse,rotateX:Jse,rotateY:Yse,rotateZ:Xse,scale:Kse,set:wu,str:voe,sub:koe,subtract:_z,targetTo:yoe,translate:Wse,transpose:_u},Symbol.toStringTag,{value:"Module"}));const Coe=(t,e)=>{const i=wu(t,e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1);return _u(i,i)},Ioe=(t,e)=>{const i=wu(t,e,0,0,.5-.5*e,0,e,0,.5-.5*e,0,0,e,.5-.5*e,0,0,0,1);return _u(i,i)},Aoe=(t,e)=>{const i=1-e,n=wu(t,.2126+.7874*i,.7152-.7152*i,.0722-.0722*i,0,.2126-.2126*i,.7152+.2848*i,.0722-.0722*i,0,.2126-.2126*i,.7152-.7152*i,.0722+.9278*i,0,0,0,0,1);return _u(n,n)},Ooe=(t,e)=>{const i=Math.sin(e*Math.PI/180),n=Math.cos(e*Math.PI/180),s=wu(t,.213+.787*n-.213*i,.715-.715*n-.715*i,.072-.072*n+.928*i,0,.213-.213*n+.143*i,.715+.285*n+.14*i,.072-.072*n-.283*i,0,.213-.213*n-.787*i,.715-.715*n+.715*i,.072+.928*n+.072*i,0,0,0,0,1);return _u(s,s)},Poe=(t,e)=>{const i=1-2*e,n=wu(t,i,0,0,e,0,i,0,e,0,0,i,e,0,0,0,1);return _u(n,n)},Roe=(t,e)=>{const i=wu(t,.213+.787*e,.715-.715*e,.072-.072*e,0,.213-.213*e,.715+.285*e,.072-.072*e,0,.213-.213*e,.715-.715*e,.072+.928*e,0,0,0,0,1);return _u(i,i)},Noe=(t,e)=>{const i=1-e,n=wu(t,.393+.607*i,.769-.769*i,.189-.189*i,0,.349-.349*i,.686+.314*i,.168-.168*i,0,.272-.272*i,.534-.534*i,.131+.869*i,0,0,0,0,1);return _u(n,n)};let xz=class Sz{constructor(e,i,n){this.strength=e,this.radius=i,this.threshold=n,this.type="bloom"}interpolate(e,i,n){this.strength=Vr(e.strength,i.strength,n),this.radius=Vr(e.radius,i.radius,n),this.threshold=Vr(e.threshold,i.threshold,n)}clone(){return new Sz(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:Bg(this.radius),strength:this.strength,threshold:this.threshold}}},Tz=class Ez{constructor(e){this.radius=e,this.type="blur"}interpolate(e,i,n){this.radius=Math.round(Vr(e.radius,i.radius,n))}clone(){return new Ez(this.radius)}toJSON(){return{type:"blur",radius:Bg(this.radius)}}},c4=class Mz{constructor(e,i){this.type=e,this.amount=i,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,i,n){this.amount=Vr(e.amount,i.amount,n),this._updateMatrix()}clone(){return new Mz(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const e=this._colorMatrix||G3();switch(this.type){case"brightness":this._colorMatrix=Coe(e,this.amount);break;case"contrast":this._colorMatrix=Ioe(e,this.amount);break;case"grayscale":this._colorMatrix=Aoe(e,this.amount);break;case"invert":this._colorMatrix=Poe(e,this.amount);break;case"saturate":this._colorMatrix=Roe(e,this.amount);break;case"sepia":this._colorMatrix=Noe(e,this.amount)}}},$z=class kz{constructor(e,i,n,s){this.offsetX=e,this.offsetY=i,this.blurRadius=n,this.color=s,this.type="drop-shadow"}interpolate(e,i,n){this.offsetX=Vr(e.offsetX,i.offsetX,n),this.offsetY=Vr(e.offsetY,i.offsetY,n),this.blurRadius=Vr(e.blurRadius,i.blurRadius,n),this.color[0]=Math.round(Vr(e.color[0],i.color[0],n)),this.color[1]=Math.round(Vr(e.color[1],i.color[1],n)),this.color[2]=Math.round(Vr(e.color[2],i.color[2],n)),this.color[3]=Vr(e.color[3],i.color[3],n)}clone(){return new kz(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const e=[...this.color];return e[3]*=255,{type:"drop-shadow",xoffset:Bg(this.offsetX),yoffset:Bg(this.offsetY),blurRadius:Bg(this.blurRadius),color:e}}},Cz=class Iz{constructor(e){this.angle=e,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,i,n){this.angle=Vr(e.angle,i.angle,n),this._updateMatrix()}clone(){return new Iz(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const e=this._colorMatrix||G3();this._colorMatrix=Ooe(e,this.angle)}},Az=class Oz{constructor(e){this.amount=e,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(e,i,n){this.amount=Vr(e.amount,i.amount,n)}clone(){return new Oz(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}};function Vr(t,e,i){return t+(e-t)*i}function Bg(t){return Math.round(1e3*hu(t))/1e3}function Loe(t){switch(t.type){case"grayscale":case"sepia":case"invert":return new c4(t.type,0);case"saturate":case"brightness":case"contrast":return new c4(t.type,1);case"opacity":return new Az(1);case"hue-rotate":return new Cz(0);case"blur":return new Tz(0);case"drop-shadow":return new $z(0,0,0,[...$E("transparent")]);case"bloom":return new xz(0,0,1)}}function Doe(t,e){const i=t.length>e.length?t:e;return(t.length>e.length?e:t).every((n,s)=>n.type===i[s].type)}function zoe(t,e){const i=t.length>e.length?t:e,n=t.length>e.length?e:t;for(let s=n.length;s<i.length;s++)n.push(Loe(i[s]))}function Foe(t){const e=t[0];return!!e&&"type"in e}function joe(t,e){return JSON.stringify(t??null)===JSON.stringify(e??null)}const $5=()=>Ae.getLogger("esri.support.basemapUtils");function Goe(){return{}}function Uoe(t){for(const e in t){const i=t[e];mt(i),delete t[e]}}function Boe(t,e){let i;if(typeof t=="string"){const n=t in h0,s=!n&&t.includes("/");if(!n&&!s){if(_t.apiKey)$5().warn(`Unable to find basemap definition for: ${t}. See available styles at https://developers.arcgis.com/rest/basemap-styles/`);else{const h=Object.entries(h0).filter(([f,m])=>m.classic||m.is3d).map(([f])=>`"${f}"`).sort().join(", ");$5().warn(`Unable to find basemap definition for: ${t}. Try one of these: ${h}`)}return null}e&&(i=e[t]),i||(i=n?Yh.fromId(t):new Yh({style:{id:t}}),e&&(e[t]=i))}else i=_n(Yh,t);return i!=null&&i.destroyed&&($5().warn("The provided basemap is already destroyed",{basemap:i}),i=null),i}function Hoe(t){var e;return((e=t.portalItem)==null?void 0:e.type)==="Web Scene"||t.referenceLayers.some(i=>i.type==="scene")}function Voe(t){var e,i;return!!((i=(e=t==null?void 0:t.portalItem)==null?void 0:e.tags)!=null&&i.some(n=>n.toLowerCase()==="beta"))}function j7e(t,e){var i,n,s,h;return((n=(i=t.basemap)==null?void 0:i.referenceLayers)==null?void 0:n.some(f=>f.uid===e))||((h=(s=t.basemap)==null?void 0:s.baseLayers)==null?void 0:h.some(f=>f.uid===e))}function qoe(t){let e=null;const i=h4(t),n=!(i!=null&&i.baseLayers.length);for(const s in h0){const h=Rz(i,Pz(h0[s]),{mustMatchReferences:n});if(h==="equal"){e=s;break}h==="base-layers-equal"&&(e=s)}return e}function Woe(t,e){var i,n;return t===e||((i=t==null?void 0:t.portalItem)==null?void 0:i.id)!=null&&t.portalItem.id===((n=e==null?void 0:e.portalItem)==null?void 0:n.id)?!0:Rz(h4(t),h4(e),{mustMatchReferences:!0})==="equal"}function Koe(t,e){var h;if(e==null||t==null)return{spatialReference:null,updating:!1};if(e.loadStatus==="not-loaded")return e.load(),{spatialReference:null,updating:!0};if(e.spatialReference)return{spatialReference:e.spatialReference,updating:!1};if(e.baseLayers.length===0)return{spatialReference:null,updating:!1};const i=e.baseLayers.at(0);switch(i.loadStatus){case"not-loaded":i.load();case"loading":return{spatialReference:null,updating:!0};case"failed":return{spatialReference:null,updating:!1}}const n=(("supportedSpatialReferences"in i?i.supportedSpatialReferences:null)||["tileInfo"in i?(h=i.tileInfo)==null?void 0:h.spatialReference:i.spatialReference]).filter(Boolean),s=t.spatialReference;return s?{spatialReference:n.find(f=>s.equals(f))??n[0]??null,updating:!1}:{spatialReference:n[0],updating:!1}}function h4(t){return t?!t.loaded&&t.resourceInfo?Pz(t.resourceInfo.data):{baseLayers:Q$(t.baseLayers),referenceLayers:Q$(t.referenceLayers)}:null}function Q$(t){return(Pe.isCollection(t)?t.toArray():t).map(Zoe)}function Zoe(t){var e,i;return{type:t.type,effect:"effect"in t?t.effect:void 0,url:Nz("urlTemplate"in t&&t.urlTemplate||t.url||"styleUrl"in t&&t.styleUrl||""),minScale:"minScale"in t&&t.minScale!=null?t.minScale:0,maxScale:"maxScale"in t&&t.maxScale!=null?t.maxScale:0,opacity:t.opacity!=null?t.opacity:1,visible:t.visible==null||!!t.visible,sublayers:t.type!=="map-image"&&t.type!=="wms"||t.sublayers==null||(e=t.sublayers)==null?void 0:e.map(n=>({id:n.id,visible:n.visible})),activeLayerId:t.type==="wmts"?(i=t.activeLayer)==null?void 0:i.id:void 0}}function ek(t){return t.isReference||t.layerType==="ArcGISSceneServiceLayer"}function Pz(t){return t?{baseLayers:tk((t.baseMapLayers??[]).filter(e=>!ek(e))),referenceLayers:tk((t.baseMapLayers??[]).filter(e=>ek(e)))}:null}function tk(t){return t.map(e=>Joe(e))}function Joe(t){let e;switch(t.layerType){case"VectorTileLayer":e="vector-tile";break;case"ArcGISTiledMapServiceLayer":e="tile";break;case"ArcGISSceneServiceLayer":e="scene";break;default:e="unknown"}return{type:e,effect:t.effect,url:Nz(t.templateUrl||t.urlTemplate||t.styleUrl||t.url),minScale:t.minScale??0,maxScale:t.maxScale??0,opacity:t.opacity??1,visible:t.visibility==null||!!t.visibility,sublayers:void 0,activeLayerId:void 0}}function Rz(t,e,i){return t!=null!=(e!=null)?"not-equal":!t||!e?"equal":ik(t.baseLayers,e.baseLayers)?ik(t.referenceLayers,e.referenceLayers)?"equal":i.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal"}function ik(t,e){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(!Yoe(t[i],e[i]))return!1;return!0}function Yoe(t,e){if(t.type!==e.type||t.url!==e.url||t.minScale!==e.minScale||t.maxScale!==e.maxScale||t.visible!==e.visible||t.opacity!==e.opacity||!joe(t.effect,e.effect))return!1;if(t.activeLayerId!=null||e.activeLayerId!=null)return t.activeLayerId===e.activeLayerId;if(t.sublayers!=null||e.sublayers!=null){if(t.sublayers==null||e.sublayers==null||t.sublayers.length!==e.sublayers.length)return!1;for(let i=0;i<t.sublayers.length;i++){const n=t.sublayers.at(i),s=e.sublayers.at(i);if((n==null?void 0:n.id)!==(s==null?void 0:s.id)||(n==null?void 0:n.visible)!==(s==null?void 0:s.visible))return!1}}return!0}function Nz(t){return t?Tc(t).replace(/^\s*https?:/i,"").toLowerCase():""}function Xoe(t){if(!t)return null;const{thumbnailUrl:e}=t;if(e)return e;const i=qoe(t);return i?h0[i].thumbnailUrl:om(t.baseLayers,Qoe)}function Qoe(t){var e;return"portalItem"in t?(e=t.portalItem)==null?void 0:e.thumbnailUrl:void 0}function eae(t){return new pm({getCollections:()=>[t.tables,t.layers],getChildrenFunction:e=>{const i=[];return"tables"in e&&i.push(e.tables),"layers"in e&&i.push(e.layers),i},itemFilterFunction:e=>{const i=e.parent;return!!i&&"tables"in i&&i.tables.includes(e)}})}function k5(t){for(const e of t.values())e==null||e.destroy();t.clear()}const nk={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function tae(t){let e=null;if(typeof t=="string")if(t in nk){const i=nk[t];e=new sw({resourceInfo:{data:{layers:[i]}}})}else Ae.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${t}. Try "world-elevation"`);else e=_n(sw,t);return e}let Lz=0;const fp=t=>{let e=class extends t{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+Lz++})}};return e=_([J("esri.core.Identifiable")],e),e},IE=t=>{let e=class extends t{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Lz++})}};return e=_([J("esri.core.Identifiable.NumericIdentifiable")],e),e};let rk=class extends fp(class{}){};rk=_([J("esri.core.Identifiable")],rk);async function iae(t){var n;const e="portalItem"in t?t:{portalItem:t},{fromItem:i}=await ge(async()=>{const{fromItem:s}=await import("./portalLayers-vuDqGzrZ.js").then(h=>h.p);return{fromItem:s}},__vite__mapDeps([204,205,206,187]),import.meta.url);try{return await i(e)}catch(s){const h=e==null?void 0:e.portalItem,f=(h==null?void 0:h.id)||"unset",m=((n=h==null?void 0:h.portal)==null?void 0:n.url)||_t.portalUrl;throw Ae.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+m+"', id: '"+f+"')",s),s}}const sk={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function C5(t,e,i,n=yl){const s=new ua(pE(n)),h=Je.fromJSDate(t,{zone:s}),f=i==="decades"||i==="centuries"?"year":Dz(i);return i==="decades"&&(e*=10),i==="centuries"&&(e*=100),h.plus({[f]:e}).toJSDate()}function U7e(t,e,i="milliseconds"){const n=t.getTime(),s=nae(e,i,"milliseconds");return new Date(n+s)}function ok(t,e,i=yl){const n=new ua(pE(i)),s=Je.fromJSDate(t,{zone:n});if(e==="decades"||e==="centuries"){const f=s.startOf("year"),{year:m}=f,y=m-m%(e==="decades"?10:100);return f.set({year:y}).toJSDate()}const h=Dz(e);return s.startOf(h).toJSDate()}function nae(t,e,i){return t===0?0:t*sk[e]/sk[i]}function rae(t,e){return t&&e?t.intersection(e):t||e}function Dz(t){switch(t){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}var Ks;let ws=Ks=class extends De{static get allTime(){return ak}static get empty(){return sae}static fromArray(t){return new Ks({start:t[0]!=null?new Date(t[0]):t[0],end:t[1]!=null?new Date(t[1]):t[1]})}constructor(t){super(t),this.end=null,this.start=null}readEnd(t,e){return e.end!=null?new Date(e.end):null}writeEnd(t,e){e.end=(t==null?void 0:t.getTime())??null}get isAllTime(){return this.equals(Ks.allTime)}get isEmpty(){return this.equals(Ks.empty)}readStart(t,e){return e.start!=null?new Date(e.start):null}writeStart(t,e){e.start=(t==null?void 0:t.getTime())??null}clone(){return new Ks({end:this.end,start:this.start})}equals(t){var h,f,m,y;if(!t)return!1;const e=((h=this.start)==null?void 0:h.getTime())??this.start,i=((f=this.end)==null?void 0:f.getTime())??this.end,n=((m=t.start)==null?void 0:m.getTime())??t.start,s=((y=t.end)==null?void 0:y.getTime())??t.end;return e===n&&i===s}expandTo(t,e=yl){if(this.isEmpty||this.isAllTime)return this.clone();let i=this.start;i&&(i=ok(i,t,e));let n=this.end;if(n){const s=ok(n,t,e);n=n.getTime()===s.getTime()?s:C5(s,1,t,e)}return new Ks({start:i,end:n})}intersection(t){var m,y,x,E;if(!t)return this.clone();if(this.isEmpty||t.isEmpty)return Ks.empty;if(this.isAllTime)return t.clone();if(t.isAllTime)return this.clone();const e=((m=this.start)==null?void 0:m.getTime())??-1/0,i=((y=this.end)==null?void 0:y.getTime())??1/0,n=((x=t.start)==null?void 0:x.getTime())??-1/0,s=((E=t.end)==null?void 0:E.getTime())??1/0;let h,f;return n>=e&&n<=i?h=n:e>=n&&e<=s&&(h=e),i>=n&&i<=s?f=i:s>=e&&s<=i&&(f=s),h==null||f==null||isNaN(h)||isNaN(f)?Ks.empty:new Ks({start:h===-1/0?null:new Date(h),end:f===1/0?null:new Date(f)})}offset(t,e,i=yl){if(this.isEmpty||this.isAllTime)return this.clone();const n=new Ks,{start:s,end:h}=this;return s!=null&&(n.start=C5(s,t,e,i)),h!=null&&(n.end=C5(h,t,e,i)),n}toArray(){var t,e;return this.isEmpty?[void 0,void 0]:[((t=this.start)==null?void 0:t.getTime())??null,((e=this.end)==null?void 0:e.getTime())??null]}union(t){if(!t||t.isEmpty)return this.clone();if(this.isEmpty)return t.clone();if(this.isAllTime||t.isAllTime)return ak.clone();const e=this.start!=null&&t.start!=null?new Date(Math.min(this.start.getTime(),t.start.getTime())):null,i=this.end!=null&&t.end!=null?new Date(Math.max(this.end.getTime(),t.end.getTime())):null;return new Ks({start:e,end:i})}};_([S({type:Date,json:{write:{allowNull:!0}}})],ws.prototype,"end",void 0),_([kt("end")],ws.prototype,"readEnd",null),_([yt("end")],ws.prototype,"writeEnd",null),_([S({readOnly:!0,json:{read:!1}})],ws.prototype,"isAllTime",null),_([S({readOnly:!0,json:{read:!1}})],ws.prototype,"isEmpty",null),_([S({type:Date,json:{write:{allowNull:!0}}})],ws.prototype,"start",void 0),_([kt("start")],ws.prototype,"readStart",null),_([yt("start")],ws.prototype,"writeStart",null),ws=Ks=_([J("esri.time.TimeExtent")],ws);const AE=ws,ak=new ws,sae=new ws({start:void 0,end:void 0});let oae=0,ji=class extends un.EventedMixin(fp(da)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new Nt(-180,-90,180,90,Ke.WGS84),this.id=Date.now().toString(16)+"-layer-"+oae++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=Ke.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(e){const i=typeof e=="string"?{url:e}:e;return(await ge(async()=>{const{fromUrl:n}=await import("./arcgisLayers-D6Lj_b3o.js");return{fromUrl:n}},__vite__mapDeps([207,205,206]),import.meta.url)).fromUrl(i)}static fromPortalItem(e){return iae(e)}initialize(){this.when().catch(e=>{Ir(e)||Ae.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})})}destroy(){const e=this.parent;if(e){const i=this;"layers"in e&&e.layers.includes(i)?e.layers.remove(i):"tables"in e&&e.tables.includes(i)?e.tables.remove(i):"baseLayers"in e&&e.baseLayers.includes(i)?e.baseLayers.remove(i):"referenceLayers"in e&&e.referenceLayers.includes(i)&&e.referenceLayers.remove(i),this._set("parent",null)}}get effectiveVisible(){let e=this.visible;const i=this.parent;return e&&i&&"effectiveVisible"in i&&e&&(e=i.effectiveVisible),e}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){return $r(this.url)}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await ki(e,{query:{f:"json"},responseType:"json"})).data;throw new ce("layer:no-attribution-data","Layer does not have attribution data")}};_([S({type:String})],ji.prototype,"attributionDataUrl",void 0),_([S({readOnly:!0})],ji.prototype,"effectiveVisible",null),_([S({type:Nt})],ji.prototype,"fullExtent",void 0),_([S({readOnly:!0})],ji.prototype,"hasAttributionData",null),_([S({type:String,clonable:!1})],ji.prototype,"id",void 0),_([S({type:Boolean,nonNullable:!0})],ji.prototype,"legendEnabled",void 0),_([S({type:["show","hide","hide-children"]})],ji.prototype,"listMode",void 0),_([S({type:Number,range:{min:0,max:1},nonNullable:!0})],ji.prototype,"opacity",void 0),_([S({clonable:!1})],ji.prototype,"parent",void 0),_([S({readOnly:!0})],ji.prototype,"parsedUrl",null),_([S({type:Boolean,readOnly:!0})],ji.prototype,"persistenceEnabled",void 0),_([S({type:Boolean})],ji.prototype,"popupEnabled",void 0),_([S({type:Boolean})],ji.prototype,"attributionVisible",void 0),_([S({type:Ke})],ji.prototype,"spatialReference",void 0),_([S({type:String})],ji.prototype,"title",void 0),_([S({readOnly:!0,json:{read:!1}})],ji.prototype,"type",void 0),_([S()],ji.prototype,"url",void 0),_([S({type:AE})],ji.prototype,"visibilityTimeExtent",void 0),_([S({type:Boolean,nonNullable:!0})],ji.prototype,"visible",void 0),ji=_([J("esri.layers.Layer")],ji);const OE=ji;function u4(t,e,i){let n,s;if(t)for(let h=0,f=t.length;h<f;h++){if(n=t.at(h),(n==null?void 0:n[e])===i)return n;if((n==null?void 0:n.type)==="group"&&(s=u4(n.layers,e,i),s))return s}}const aae=t=>{let e=class extends t{constructor(...i){super(...i),this.layers=new Pe;const n=f=>{f.parent&&"remove"in f.parent&&f.parent.remove(f)},s=f=>{f.parent=this,this.layerAdded(f),f.type!=="elevation"&&f.type!=="base-elevation"||Ae.getLogger(this).error(`Layer 'title:${f.title}, id:${f.id}' of type '${f.type}' is not supported as an operational layer and will therefore be ignored.`)},h=f=>{f.parent=null,this.layerRemoved(f)};this.addHandles([this.layers.on("before-add",f=>{if(f.item===this)return f.preventDefault(),void Ae.getLogger(this).error("#add()","Cannot add layer to itself.");n(f.item)}),this.layers.on("after-add",f=>s(f.item)),this.layers.on("after-remove",f=>h(f.item))])}destroy(){const i=this.layers.toArray();for(const n of i)n.destroy();this.layers.destroy()}set layers(i){this._set("layers",cu(i,this._get("layers")))}add(i,n){const s=this.layers;if(n=s.getNextIndex(n),i instanceof OE){const h=i;h.parent===this?this.reorder(h,n):s.add(h,n)}else Ml(i)?i.then(h=>{this.destroyed||this.add(h,n)}):Ae.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(i,n){const s=this.layers;let h=s.getNextIndex(n);i.slice().forEach(f=>{f.parent!==this?(s.add(f,h),h+=1):this.reorder(f,h)})}findLayerById(i){return u4(this.layers,"id",i)}findLayerByUid(i){return u4(this.layers,"uid",i)}remove(i){return this.layers.remove(i)}removeMany(i){return this.layers.removeMany(i)}removeAll(){return this.layers.removeAll()}reorder(i,n){return this.layers.reorder(i,n)}layerAdded(i){}layerRemoved(i){}};return _([S()],e.prototype,"layers",null),e=_([J("esri.support.LayersMixin")],e),e};function d4(t,e,i){if(t)for(let n=0,s=t.length;n<s;n++){const h=t.at(n);if(h[e]===i)return h;if((h==null?void 0:h.type)==="group"){const f=d4(h.tables,e,i);if(f)return f}}}const lae=t=>{let e=class extends t{constructor(...i){super(...i),this.tables=new Pe,this.addHandles([this.tables.on("after-add",n=>{const s=n.item;s.parent&&s.parent!==this&&"tables"in s.parent&&s.parent.tables.remove(s),s.parent=this,s.type!=="feature"&&Ae.getLogger(this).error(`Layer 'title:${s.title}, id:${s.id}' of type '${s.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",n=>{n.item.parent=null})])}destroy(){const i=this.tables.toArray();for(const n of i)n.destroy();this.tables.destroy()}set tables(i){this._set("tables",cu(i,this._get("tables")))}findTableById(i){return d4(this.tables,"id",i)}findTableByUid(i){return d4(this.tables,"uid",i)}};return _([S()],e.prototype,"tables",null),e=_([J("esri.support.TablesMixin")],e),e};let Do=class extends lae(aae(un.EventedMixin(Oe))){constructor(e){super(e),this.allLayers=new pm({getCollections:()=>{var i,n,s;return[(i=this.basemap)==null?void 0:i.baseLayers,(n=this.ground)==null?void 0:n.layers,this.layers,(s=this.basemap)==null?void 0:s.referenceLayers]},getChildrenFunction:i=>"layers"in i?i.layers:null}),this.allTables=eae(this),this.basemap=null,this.editableLayers=new pm({getCollections:()=>[this.allLayers],itemFilterFunction:Ose}),this.ground=new sw,this._basemapCache=Goe()}destroy(){Uoe(this._basemapCache),this._basemapCache=null,this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.basemap=mt(this.basemap),mt(this.ground),this._set("ground",null)}castBasemap(e){return Boe(e,this._basemapCache)}castGround(e){return tae(e)??this._get("ground")}findLayerById(e){return this.allLayers.find(i=>i.id===e)}findTableById(e){return this.allTables.find(i=>i.id===e)}};_([S({readOnly:!0,dependsOn:[]})],Do.prototype,"allLayers",void 0),_([S({readOnly:!0})],Do.prototype,"allTables",void 0),_([S({type:Yh,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],Do.prototype,"basemap",void 0),_([Hi("basemap")],Do.prototype,"castBasemap",null),_([S({readOnly:!0})],Do.prototype,"editableLayers",void 0),_([S({type:sw,nonNullable:!0})],Do.prototype,"ground",void 0),_([Hi("ground")],Do.prototype,"castGround",null),_([S()],Do.prototype,"undoRedo",void 0),Do=_([J("esri.Map")],Do);const cae=Do;let Hg=class extends Pe{constructor(e){super(e),this.addHandles([this.on("before-add",i=>{i.item==null&&i.preventDefault()}),this.on("after-add",i=>this._own(i.item)),this.on("after-remove",i=>this._release(i.item))])}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(Pe.ofType(this.itemType.Type))(e):new Pe(e)}};function p4(t,e){return{type:t,cast:XD,set(i){const n=cu(i,this._get(e),t);n.owner=this,this._set(e,n)}}}_([S()],Hg.prototype,"owner",null),Hg=_([J("esri.core.support.OwningCollection")],Hg);var U1;const ow=Ar()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),zz=ow.jsonValues.slice();sK(zz,"orthometric");const Vg=Ar()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let zo=U1=class extends De{constructor(t){super(t),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(t,e,i){return ow.write(t,e,i)}readHeightModel(t,e,i){return ow.read(t)||(i!=null&&i.messages&&i.messages.push(hae(t,{context:i})),null)}readHeightUnit(t,e,i){return Vg.read(t)||(i!=null&&i.messages&&i.messages.push(lk(t,{context:i})),null)}readHeightUnitService(t,e,i){return XR(t)||Vg.read(t)||(i!=null&&i.messages&&i.messages.push(lk(t,{context:i})),null)}readVertCRS(t,e){return e.vertCRS||e.ellipsoid||e.geoid}clone(){return new U1({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(t){return!!t&&(this===t||this.heightModel===t.heightModel&&this.heightUnit===t.heightUnit&&this.vertCRS===t.vertCRS)}static deriveUnitFromSR(t,e){const i=QR(e);return new U1({heightModel:t.heightModel,heightUnit:i??void 0,vertCRS:t.vertCRS})}write(t,e){return e={origin:"web-scene",...e},super.write(t,e)}static fromJSON(t){if(!t)return null;const e=new U1;return e.read(t,{origin:"web-scene"}),e}};function lk(t,e){return new Oc("height-unit:unsupported",`Height unit of value '${t}' is not supported`,e)}function hae(t,e){return new Oc("height-model:unsupported",`Height model of value '${t}' is not supported`,e)}_([S({type:ow.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:zz,default:"ellipsoidal"}}}})],zo.prototype,"heightModel",void 0),_([yt("web-scene","heightModel")],zo.prototype,"writeHeightModel",null),_([kt(["web-scene","service"],"heightModel")],zo.prototype,"readHeightModel",null),_([S({type:Vg.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:Vg.jsonValues,write:Vg.write}}}})],zo.prototype,"heightUnit",void 0),_([kt("web-scene","heightUnit")],zo.prototype,"readHeightUnit",null),_([kt("service","heightUnit")],zo.prototype,"readHeightUnitService",null),_([S({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],zo.prototype,"vertCRS",void 0),_([kt("service","vertCRS",["vertCRS","ellipsoid","geoid"])],zo.prototype,"readVertCRS",null),zo=U1=_([J("esri.geometry.HeightModelInfo")],zo);const B3=zo;let aw=class extends Hg{constructor(e){super(e),this.addHandles(this.on("before-add",i=>{i.item!=null&&i.item.parent===this.owner&&(Ae.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),i.preventDefault())}))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};aw=_([J("esri.support.AnalysesCollection")],aw);async function uae(t,e){const{WhereClause:i}=await ge(()=>import("./WhereClause-pNTvpIeY.js").then(n=>n.W),__vite__mapDeps([25,26,27]),import.meta.url);return i.create(t,{fieldsIndex:e})}function dae(t,e){return t==="1=1"?e??t:e==="1=1"?t??e:t!=null&&t!==""?e!=null&&e!==""?`(${t}) AND (${e})`:t:e}function PE(t){return typeof t=="string"||t instanceof String}var Bf;(function(t){t.HM="HH:mm",t.HMS="HH:mm:ss",t.HMS_MS="HH:mm:ss.SSS"})(Bf||(Bf={}));const pae=[Bf.HMS_MS,Bf.HMS,Bf.HM,"TT"],fae="yyyy-MM-dd";Bf.HMS;function ck(t){if(!t||!PE(t))return null;const e=Je.fromFormat(t,fae);return e.isValid?e:null}function hk(t){return t&&PE(t)?om(pae,e=>{const i=Je.fromFormat(t,e);return i.isValid?i:null})??null:null}function uk(t){if(!t||!PE(t))return null;const e=Je.fromISO(t);return e.isValid?e:null}var u0;(function(t){t.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",t.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(u0||(u0={}));const gae=new Set(["integer","small-integer","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"]);function mae(t){return t!=null&&gae.has(t.type)}function Fz(t){return t!=null&&(t.type==="date-only"||t.type==="esriFieldTypeDateOnly")}function jz(t){return t!=null&&(t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset")}function Gz(t){return t!=null&&(t.type==="time-only"||t.type==="esriFieldTypeTimeOnly")}function yae(t,e,i){const n=t==null?void 0:t.domain;if(!n)return null;switch(n.type){case"range":{const{min:s,max:h}=vae(t);if(s!=null&&+e<s||h!=null&&+e>h)return u0.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(n.codedValues==null||n.codedValues.every(s=>s==null||s.code!==e))return u0.INVALID_CODED_VALUE}return null}function vae(t,e){const i=t==null?void 0:t.domain;if(!i||i.type!=="range")return;const n="range"in i?i.range[0]:i.minValue,s="range"in i?i.range[1]:i.maxValue,h=mae(t);return Fz(t)||Gz(t)||jz(t)?{...bae(t,s,n),isInteger:h}:{min:n!=null&&typeof n=="number"?n:null,max:s!=null&&typeof s=="number"?s:null,rawMin:n,rawMax:s,isInteger:h}}function bae(t,e,i){var n,s,h,f,m,y;return Fz(t)?{min:(n=ck(i))==null?void 0:n.toMillis(),max:(s=ck(e))==null?void 0:s.toMillis(),rawMin:i,rawMax:e}:Gz(t)?{min:(h=hk(i))==null?void 0:h.toMillis(),max:(f=hk(e))==null?void 0:f.toMillis(),rawMin:i,rawMax:e}:jz(t)?{min:(m=uk(i))==null?void 0:m.toMillis(),max:(y=uk(e))==null?void 0:y.toMillis(),rawMin:i,rawMax:e}:{max:null,min:null}}const wae=()=>Ae.getLogger("esri.support.arcadeOnDemand");let I5;function Uz(){return I5||(I5=(async()=>{const t=await ge(()=>import("./arcadeUtils-Cwhwjn4-.js").then(e=>e.i),__vite__mapDeps([208,209,26,27,210,163,31,15,12,13,16,30]),import.meta.url);return{arcade:t.arcade,arcadeUtils:t,Dictionary:t.Dictionary,Feature:t.arcadeFeature}})()),I5}const W7e=(t,e,i)=>Bz.create(t,e,i,null,["$feature","$view"],[]),K7e=(t,e,i,n)=>Bz.create(t,e,i,n,["$feature","$view"],[]);let Bz=class Hz{constructor(e,i,n,s,h,f,m){this.services=null,this.script=e,this.evaluate=s;const y=Array.isArray(f)?f:f==null?void 0:f.fields;this.fields=y??[],this._syntaxTree=n,this._arcade=i,this._arcadeFeature=h,this._spatialReference=m,this._referencesGeometry=i.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(e,i,n,s,h,f){const{arcade:m,Feature:y,Dictionary:x}=await Uz(),E=i instanceof Ke?i:Ke.fromJSON(i);let k;try{k=m.parseScript(e,f)}catch(pe){return wae().error(new ce("arcade-bad-expression","Failed to parse arcade script",{script:e,error:pe})),null}const I=h.reduce((pe,ve)=>({...pe,[ve]:null}),{});let P=null;s!=null&&(P=new x(s),P.immutable=!0,I.$config=null);const L=m.scriptUsesGeometryEngine(k),D=L&&m.enableGeometrySupport(),j=m.scriptUsesFeatureSet(k)&&m.enableFeatureSetSupport(),H=m.scriptIsAsync(k),W=H&&m.enableAsyncSupport(),Z={vars:I,spatialReference:E,useAsync:!!W};await Promise.all([D,j,W]);const Y=new Set;await m.loadDependentModules(Y,k,null,H,L);const te=new x;te.immutable=!1,te.setField("scale",0);const ie=m.compileScript(k,Z),le=(pe,ve)=>{var Se;const be=(Se=pe.$view)==null?void 0:Se.timeZone;return"$view"in pe&&pe.$view&&(te.setField("scale",typeof pe.$view=="object"&&"scale"in pe.$view?pe.$view.scale:void 0),pe.$view=te),P&&(pe.$config=P),ie({vars:pe,spatialReference:E,services:ve,timeZone:be})};return new Hz(e,m,k,le,new y,n,E)}repurposeFeature(e){return e.geometry&&!e.geometry.spatialReference&&(e.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(e.geometry,e.attributes,{fields:this.fields}),this._arcadeFeature}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}};const _ae=/^([0-9_])/,xae=/[^a-z0-9_\u0080-\uffff]+/gi;function Z7e(t){return t==null?null:t.trim().replaceAll(xae,"_").replace(_ae,"F$1")||null}const Sae=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],Tae=["field","normalizationField"];function J7e(t,e){if(t!=null&&e!=null){for(const i of Array.isArray(t)?t:[t])if(dk(Sae,i,e),"visualVariables"in i&&i.visualVariables)for(const n of i.visualVariables)dk(Tae,n,e)}}function dk(t,e,i){if(t)for(const n of t){const s=Km(n,e),h=s&&typeof s!="function"&&i.get(s);h&&lp(n,h.name,e)}}function Y7e(t,e){var i;if(t!=null&&((i=e==null?void 0:e.fields)!=null&&i.length))if("startField"in t){const n=e.get(t.startField),s=e.get(t.endField);t.startField=(n==null?void 0:n.name)??null,t.endField=(s==null?void 0:s.name)??null}else{const n=e.get(t.startTimeField),s=e.get(t.endTimeField);t.startTimeField=(n==null?void 0:n.name)??null,t.endTimeField=(s==null?void 0:s.name)??null}}const A5=new Set;function RE(t,e){return t&&e?(A5.clear(),wm(A5,t,e),Array.from(A5).sort()):[]}function wm(t,e,i){var n;if(i)if((n=e==null?void 0:e.fields)!=null&&n.length)if(i.includes("*"))for(const{name:s}of e.fields)t.add(s);else for(const s of i)H3(t,e,s);else{if(i.includes("*"))return t.clear(),void t.add("*");for(const s of i)s!=null&&t.add(s)}}function H3(t,e,i){if(typeof i=="string")if(e){const n=e.get(i);n&&t.add(n.name)}else t.add(i)}function X7e(t,e){return e==null||t==null?[]:e.includes("*")?(t.fields??[]).map(i=>i.name):e}function Q7e(t,e,i=1){if(!e||!t)return[];if(e.includes("*"))return["*"];const n=RE(t,e);return n.length/t.fields.length>=i?["*"]:n}async function uu(t,e,i){var h;if(!i)return;const{arcadeUtils:n}=await Uz(),s=n.extractFieldNames(i,(h=e==null?void 0:e.fields)==null?void 0:h.map(f=>f.name));for(const f of s)H3(t,e,f)}async function Vz(t,e,i){if(i&&i!=="1=1"){const n=await uae(i,e);if(!n.isStandardized)throw new ce("fieldUtils:collectFilterFields","Where clause is not standardized",{where:i});wm(t,e,n.fieldNames)}}function Eae({displayField:t,fields:e}){return t||(e!=null&&e.length?O5(e,"name-or-title")||O5(e,"unique-identifier")||O5(e,"type-or-category")||Mae(e):null)}function Mae(t){for(const e of t){if(!(e!=null&&e.name))continue;const i=e.name.toLowerCase();if(i.includes("name")||i.includes("title"))return e.name}return null}function O5(t,e){for(const i of t)if(i!=null&&i.valueType&&i.valueType===e)return i.name;return null}async function e8e(t,e){var n;if(!e)return;const i=(n=e.elevationInfo)==null?void 0:n.featureExpressionInfo;return i?i.collectRequiredFields(t,e.fieldsIndex):void 0}function $ae(t,e,i){i.onStatisticExpression?uu(t,e,i.onStatisticExpression.expression):t.add(i.onStatisticField)}async function t8e(t,e,i){if(!e||!i||!("fields"in i))return;const n=[],s=i.popupTemplate;n.push(kae(t,e,s)),i.fields&&n.push(...i.fields.map(async h=>$ae(t,e.fieldsIndex,h))),await Promise.all(n)}async function kae(t,e,i){const n=[];i!=null&&i.expressionInfos&&n.push(...i.expressionInfos.map(h=>uu(t,e.fieldsIndex,h.expression)));const s=i==null?void 0:i.content;if(Array.isArray(s))for(const h of s)h.type==="expression"&&h.expressionInfo&&n.push(uu(t,e.fieldsIndex,h.expressionInfo.expression));await Promise.all(n)}async function i8e(t,e,i){e&&(e.timeInfo&&(i!=null&&i.timeExtent)&&wm(t,e.fieldsIndex,[e.timeInfo.startField,e.timeInfo.endField]),e.floorInfo&&wm(t,e.fieldsIndex,[e.floorInfo.floorField]),(i==null?void 0:i.where)!=null&&await Vz(t,e.fieldsIndex,i.where))}async function n8e(t,e,i){e&&i&&await Promise.all(i.map(n=>Cae(t,e,n)))}async function Cae(t,e,i){e&&i&&(i.valueExpression?await uu(t,e.fieldsIndex,i.valueExpression):i.field&&H3(t,e.fieldsIndex,i.field))}function r8e(t){return t?RE(t.fieldsIndex,qz(t)):[]}function Iae(t){if(!t)return[];const e=t.geometryFieldsInfo;return e?RE(t.fieldsIndex,[e.shapeAreaField,e.shapeLengthField]):[]}const Aae=new Set(["oid","global-id","guid"]),Oae=new Set(["oid","global-id"]),Pae=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^shape$/i,/^shape_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/perimeter/i,/objectid/i,/_i$/i];function Rae(t){const e=new Set;Wz(t).forEach(n=>e.add(n)),Iae(t).forEach(n=>e.add(n.toLowerCase()));const i=t&&"infoFor3D"in t?t.infoFor3D:void 0;return i&&(Object.values(i.assetMapFieldRoles).forEach(n=>e.add(n.toLowerCase())),Object.values(i.transformFieldRoles).forEach(n=>e.add(n.toLowerCase()))),Array.from(e)}function qz(t){if(!t)return[];const e="editFieldsInfo"in t&&t.editFieldsInfo;if(!e)return[];const{creationDateField:i,creatorField:n,editDateField:s,editorField:h}=e;return[i,n,s,h].filter(Boolean)}function Wz(t){return qz(t).map(e=>e.toLowerCase())}function s8e(t,e){var i;return t.editable&&!Aae.has(t.type)&&!Wz(e).includes(((i=t.name)==null?void 0:i.toLowerCase())??"")}function o8e(t,e){var n;const i=((n=t.name)==null?void 0:n.toLowerCase())??"";return!((e==null?void 0:e.objectIdField)!=null&&i===e.objectIdField.toLowerCase()||(e==null?void 0:e.globalIdField)!=null&&i===e.globalIdField.toLowerCase()||Rae(e).includes(i)||Oae.has(t.type)||Pae.some(s=>s.test(i)))}async function a8e(t,e){const{labelingInfo:i,fieldsIndex:n}=e;i!=null&&i.length&&await Promise.all(i.map(s=>Nae(t,n,s)))}async function Nae(t,e,i){if(!i)return;const n=i.getLabelExpression(),s=i.where;if(n.type==="arcade")await uu(t,e,n.expression);else{const h=n.expression.match(/{[^}]*}/g);h&&h.forEach(f=>{H3(t,e,f.slice(1,-1))})}await Vz(t,e,s)}function l8e(t){const e=t.defaultValue;return e!==void 0&&Jz(t,e)?e:t.nullable?null:void 0}function c8e(t){const e=typeof t=="string"?{type:t}:t;return Wae(e)?255:e.type==="esriFieldTypeDate"||e.type==="date"?8:void 0}function Kz(t){return typeof t=="number"&&!isNaN(t)&&isFinite(t)}function Lae(t){return t===null||Kz(t)}function Dae(t){return t===null||Number.isInteger(t)}function Zz(t){return t!=null&&typeof t=="string"}function zae(t){return t===null||Zz(t)}function Fae(){return!0}function Jz(t,e){let i;switch(t.type){case"date":case"integer":case"long":case"small-integer":case"big-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":case"esriFieldTypeBigInteger":i=t.nullable?Dae:Number.isInteger;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=t.nullable?Lae:Kz;break;case"string":case"esriFieldTypeString":i=t.nullable?zae:Zz;break;default:i=Fae}return arguments.length===1?i:i(e)}const jae=["integer","small-integer","big-integer"],Gae=["single","double"],Uae=["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"],Bae=["esriFieldTypeSingle","esriFieldTypeDouble"],Yz=new Set([...jae,...Uae]),Hae=new Set([...Gae,...Bae]),Vae=QP(Yz,Hae);function h8e(t){return t!=null&&Yz.has(t.type)}function qae(t){return t!=null&&Vae.has(t.type)}function Wae(t){return t!=null&&(t.type==="string"||t.type==="esriFieldTypeString")}function u8e(t){return t!=null&&(t.type==="date"||t.type==="esriFieldTypeDate")}function d8e(t){return t!=null&&(t.type==="date-only"||t.type==="esriFieldTypeDateOnly")}function p8e(t){return t!=null&&(t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset")}function f8e(t){return t!=null&&(t.type==="time-only"||t.type==="esriFieldTypeTimeOnly")}function g8e(t){return t!=null&&(t.type==="oid"||t.type==="esriFieldTypeOID")}function m8e(t){return t!=null&&(t.type==="global-id"||t.type==="esriFieldTypeGlobalID")}function y8e(t,e){return Kae(t,e)===null}var lw,cw;function v8e(t){return t==null||typeof t=="number"&&isNaN(t)?null:t}function Kae(t,e){return t==null||t.nullable&&e===null?null:qae(t)&&!Zae(t.type,Number(e))?lw.OUT_OF_RANGE:Jz(t,e)?t.domain?yae(t,e):null:cw.INVALID_TYPE}function Zae(t,e){const i=typeof t=="string"?Xz(t):t;if(!i)return!1;const n=i.min,s=i.max;return i.isInteger?Number.isInteger(e)&&e>=n&&e<=s:e>=n&&e<=s}function Xz(t){switch(t){case"esriFieldTypeSmallInteger":case"small-integer":return Jae;case"esriFieldTypeInteger":case"integer":return Yae;case"esriFieldTypeBigInteger":case"big-integer":return Xae;case"esriFieldTypeSingle":case"single":return Qae;case"esriFieldTypeDouble":case"double":return ele}}(function(t){t.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(lw||(lw={})),function(t){t.INVALID_TYPE="type-validation-error::invalid-type"}(cw||(cw={}));const Jae={min:-32768,max:32767,isInteger:!0,rawMin:-32768,rawMax:32767},Yae={min:-2147483648,max:2147483647,isInteger:!0,rawMin:-2147483648,rawMax:2147483647},Xae={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0,rawMin:-Number.MAX_SAFE_INTEGER,rawMax:Number.MAX_SAFE_INTEGER},Qae={min:-34e37,max:12e37,isInteger:!1,rawMin:-34e37,rawMax:12e37},ele={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1,rawMin:-Number.MAX_VALUE,rawMax:Number.MAX_VALUE};function b8e(t,e,i){switch(t){case u0.INVALID_CODED_VALUE:return`Value ${i} is not in the coded domain - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case u0.VALUE_OUT_OF_RANGE:return`Value ${i} is out of the range of valid values - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case cw.INVALID_TYPE:return`Value ${i} is not a valid value for the field type - field: ${e.name}, type: ${e.type}, nullable: ${e.nullable}`;case lw.OUT_OF_RANGE:{const{min:n,max:s}=Xz(e.type);return`Value ${i} is out of range for the number type - field: ${e.name}, type: ${e.type}, value range is ${n} to ${s}`}}}function w8e(t,e){return!tle(t,e,null)}function tle(t,e,i){if(!(e!=null&&e.attributes)||!t)return!0;const n=new Set(Object.keys(e.attributes));let s=!1;for(const h of t)if(!n.has(h)&&(s=!0,i==null))break;return s}function _8e(t){return!!t&&["raster.itempixelvalue","raster.servicepixelvalue"].some(e=>t.toLowerCase().startsWith(e))}async function x8e(t,e){const i=new Set;return t!=null&&t.collectRequiredFields&&await t.collectRequiredFields(i,e),Array.from(i).sort()}function ile(t){const e=t==null?void 0:t.match(/{[^}]+}/g);return e?e.map(i=>i.slice(1,-1).split(":")[0].trim()):[]}let $b=class extends De{constructor(e){super(e),this.type=null}};_([S({type:["attachments","custom","fields","media","text","expression","relationship","utility-network-associations"],readOnly:!0,json:{read:!1,write:!0}})],$b.prototype,"type",void 0),$b=_([J("esri.popup.content.Content")],$b);const Fc=$b;var f4;let Uu=f4=class extends Fc{constructor(t){super(t),this.description=null,this.displayType="auto",this.title=null,this.type="attachments"}clone(){return new f4({description:this.description,displayType:this.displayType,title:this.title})}};_([S({type:String,json:{write:!0}})],Uu.prototype,"description",void 0),_([S({type:["auto","preview","list"],json:{write:!0}})],Uu.prototype,"displayType",void 0),_([S({type:String,json:{write:!0}})],Uu.prototype,"title",void 0),_([S({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],Uu.prototype,"type",void 0),Uu=f4=_([J("esri.popup.content.AttachmentsContent")],Uu);const _m=Uu;var g4;let Bu=g4=class extends Fc{constructor(t){super(t),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new g4({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?_e(this.outFields):null})}};_([S()],Bu.prototype,"creator",void 0),_([S()],Bu.prototype,"destroyer",void 0),_([S()],Bu.prototype,"outFields",void 0),_([S({type:["custom"],readOnly:!0})],Bu.prototype,"type",void 0),Bu=g4=_([J("esri.popup.content.CustomContent")],Bu);const nle=Bu;var m4;let Wp=m4=class extends De{constructor(t){super(t),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new m4({title:this.title,expression:this.expression})}};_([S({type:String,json:{write:!0}})],Wp.prototype,"title",void 0),_([S({type:String,json:{write:!0}})],Wp.prototype,"expression",void 0),_([S({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],Wp.prototype,"returnType",void 0),Wp=m4=_([J("esri.popup.ElementExpressionInfo")],Wp);const rle=Wp;var y4;let B1=y4=class extends Fc{constructor(t){super(t),this.expressionInfo=null,this.type="expression"}clone(){var t;return new y4({expressionInfo:(t=this.expressionInfo)==null?void 0:t.clone()})}};_([S({type:rle,json:{write:!0}})],B1.prototype,"expressionInfo",void 0),_([S({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],B1.prototype,"type",void 0),B1=y4=_([J("esri.popup.content.ExpressionContent")],B1);const V3=B1;let Kp=class extends ts(De){constructor(e){super(e),this.dateFormat=null,this.digitSeparator=!1,this.places=null}};_([Ze(Vte)],Kp.prototype,"dateFormat",void 0),_([S({type:Boolean,json:{write:!0}})],Kp.prototype,"digitSeparator",void 0),_([S({type:gi,json:{write:!0}})],Kp.prototype,"places",void 0),Kp=_([J("esri.popup.support.FieldInfoFormat")],Kp);const sle=Kp;var v4;let Fo=v4=class extends De{constructor(t){super(t),this.fieldName=null,this.format=void 0,this.isEditable=!0,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){var t;return new v4({fieldName:this.fieldName,format:(t=this.format)==null?void 0:t.clone(),isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};_([S({type:String,json:{write:!0}})],Fo.prototype,"fieldName",void 0),_([S({type:sle,json:{write:!0}})],Fo.prototype,"format",void 0),_([S({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],Fo.prototype,"isEditable",void 0),_([S({type:String,json:{write:!0}})],Fo.prototype,"label",void 0),_([Ze(new xn({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],Fo.prototype,"stringFieldOption",void 0),_([S({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],Fo.prototype,"statisticType",void 0),_([S({type:String,json:{write:!0}})],Fo.prototype,"tooltip",void 0),_([S({type:Boolean,json:{write:!0}})],Fo.prototype,"visible",void 0),Fo=v4=_([J("esri.popup.FieldInfo")],Fo);const Qz=Fo;var b4;let Wl=b4=class extends Fc{constructor(t){super(t),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(t,e){e.fieldInfos=t&&t.map(i=>i.toJSON())}clone(){return new b4(_e({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};_([S({type:Object,json:{write:!0}})],Wl.prototype,"attributes",void 0),_([S({type:String,json:{write:!0}})],Wl.prototype,"description",void 0),_([S({type:[Qz]})],Wl.prototype,"fieldInfos",void 0),_([yt("fieldInfos")],Wl.prototype,"writeFieldInfos",null),_([S({type:String,json:{write:!0}})],Wl.prototype,"title",void 0),_([S({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],Wl.prototype,"type",void 0),Wl=b4=_([J("esri.popup.content.FieldsContent")],Wl);const xm=Wl;let Hu=class extends De{constructor(e){super(e),this.altText=null,this.caption="",this.title="",this.type=null}};_([S({type:String,json:{write:!0}})],Hu.prototype,"altText",void 0),_([S({type:String,json:{write:!0}})],Hu.prototype,"caption",void 0),_([S({type:String,json:{write:!0}})],Hu.prototype,"title",void 0),_([S({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],Hu.prototype,"type",void 0),Hu=_([J("esri.popup.content.mixins.MediaInfo")],Hu);const NE=Hu;var w4;let Vu=w4=class extends Oe{constructor(t){super(t),this.color=null,this.fieldName=null,this.tooltip=null,this.value=null}clone(){var t;return new w4({color:(t=this.color)==null?void 0:t.clone(),fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};_([S()],Vu.prototype,"color",void 0),_([S()],Vu.prototype,"fieldName",void 0),_([S()],Vu.prototype,"tooltip",void 0),_([S()],Vu.prototype,"value",void 0),Vu=w4=_([J("esri.popup.content.support.ChartMediaInfoValueSeries")],Vu);const ole=Vu;var _4;let hh=_4=class extends De{constructor(t){super(t),this.colors=null,this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new _4({colors:_e(this.colors),fields:_e(this.fields),normalizeField:this.normalizeField,series:_e(this.series),tooltipField:this.tooltipField})}};_([S({type:[ht],json:{type:[[gi]],write:!0}})],hh.prototype,"colors",void 0),_([S({type:[String],json:{write:!0}})],hh.prototype,"fields",void 0),_([S({type:String,json:{write:!0}})],hh.prototype,"normalizeField",void 0),_([S({type:[ole],json:{read:!1}})],hh.prototype,"series",void 0),_([S({type:String,json:{write:!0}})],hh.prototype,"tooltipField",void 0),hh=_4=_([J("esri.popup.content.support.ChartMediaInfoValue")],hh);const ale=hh;let H1=class extends NE{constructor(e){super(e),this.type=null,this.value=void 0}};_([S({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],H1.prototype,"type",void 0),_([S({type:ale,json:{write:!0}})],H1.prototype,"value",void 0),H1=_([J("esri.popup.content.mixins.ChartMediaInfo")],H1);const q3=H1,W3=Ar()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var x4;let kb=x4=class extends q3{constructor(t){super(t),this.type="bar-chart"}clone(){var t;return new x4({altText:this.altText,title:this.title,caption:this.caption,value:(t=this.value)==null?void 0:t.clone()})}};_([S({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:W3.write}})],kb.prototype,"type",void 0),kb=x4=_([J("esri.popup.content.BarChartMediaInfo")],kb);const eF=kb;var S4;let Cb=S4=class extends q3{constructor(t){super(t),this.type="column-chart"}clone(){var t;return new S4({altText:this.altText,title:this.title,caption:this.caption,value:(t=this.value)==null?void 0:t.clone()})}};_([S({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:W3.write}})],Cb.prototype,"type",void 0),Cb=S4=_([J("esri.popup.content.ColumnChartMediaInfo")],Cb);const tF=Cb;var T4;let V1=T4=class extends De{constructor(t){super(t),this.linkURL=null,this.sourceURL=null}clone(){return new T4({linkURL:this.linkURL,sourceURL:this.sourceURL})}};_([S({type:String,json:{write:!0}})],V1.prototype,"linkURL",void 0),_([S({type:String,json:{write:!0}})],V1.prototype,"sourceURL",void 0),V1=T4=_([J("esri.popup.content.support.ImageMediaInfoValue")],V1);const lle=V1;var E4;let Zp=E4=class extends NE{constructor(t){super(t),this.refreshInterval=0,this.type="image",this.value=void 0}clone(){var t;return new E4({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:(t=this.value)==null?void 0:t.clone()})}};_([S({type:Number,json:{write:!0}})],Zp.prototype,"refreshInterval",void 0),_([S({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],Zp.prototype,"type",void 0),_([S({type:lle,json:{write:!0}})],Zp.prototype,"value",void 0),Zp=E4=_([J("esri.popup.content.ImageMediaInfo")],Zp);const iF=Zp;var M4;let Ib=M4=class extends q3{constructor(t){super(t),this.type="line-chart"}clone(){var t;return new M4({altText:this.altText,title:this.title,caption:this.caption,value:(t=this.value)==null?void 0:t.clone()})}};_([S({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:W3.write}})],Ib.prototype,"type",void 0),Ib=M4=_([J("esri.popup.content.LineChartMediaInfo")],Ib);const nF=Ib;var $4;let Ab=$4=class extends q3{constructor(t){super(t),this.type="pie-chart"}clone(){var t;return new $4({altText:this.altText,title:this.title,caption:this.caption,value:(t=this.value)==null?void 0:t.clone()})}};_([S({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:W3.write}})],Ab.prototype,"type",void 0),Ab=$4=_([J("esri.popup.content.PieChartMediaInfo")],Ab);const rF=Ab,k4={base:NE,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":eF,"column-chart":tF,"line-chart":nF,"pie-chart":rF,image:iF}};var C4;let jo=C4=class extends Fc{constructor(t){super(t),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(t){return t&&t.map(e=>e.type==="image"?iF.fromJSON(e):e.type==="barchart"?eF.fromJSON(e):e.type==="columnchart"?tF.fromJSON(e):e.type==="linechart"?nF.fromJSON(e):e.type==="piechart"?rF.fromJSON(e):void 0).filter(Boolean)}writeMediaInfos(t,e){e.mediaInfos=t&&t.map(i=>i.toJSON())}clone(){return new C4(_e({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};_([S()],jo.prototype,"activeMediaInfoIndex",void 0),_([S({type:Object,json:{write:!0}})],jo.prototype,"attributes",void 0),_([S({type:String,json:{write:!0}})],jo.prototype,"description",void 0),_([S({types:[k4]})],jo.prototype,"mediaInfos",void 0),_([kt("mediaInfos")],jo.prototype,"readMediaInfos",null),_([yt("mediaInfos")],jo.prototype,"writeMediaInfos",null),_([S({type:String,json:{write:!0}})],jo.prototype,"title",void 0),_([S({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],jo.prototype,"type",void 0),jo=C4=_([J("esri.popup.content.MediaContent")],jo);const Sm=jo;var I4;let q1=I4=class extends De{constructor(t){super(t),this.field=null,this.order=null}clone(){return new I4({field:this.field,order:this.order})}};_([S({type:String,json:{write:!0}})],q1.prototype,"field",void 0),_([S({type:["asc","desc"],json:{write:!0}})],q1.prototype,"order",void 0),q1=I4=_([J("esri.popup.support.RelatedRecordsInfoFieldOrder")],q1);const sF=q1;let Pa=class extends ts(Fc){constructor(e){super(e),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};_([S({type:String,json:{write:!0}})],Pa.prototype,"description",void 0),_([S({type:Number,json:{type:gi,write:!0}})],Pa.prototype,"displayCount",void 0),_([S({type:["list"],json:{write:!0}})],Pa.prototype,"displayType",void 0),_([S({type:[sF],json:{write:!0}})],Pa.prototype,"orderByFields",void 0),_([S({type:Number,json:{type:gi,write:!0}})],Pa.prototype,"relationshipId",void 0),_([S({type:String,json:{write:!0}})],Pa.prototype,"title",void 0),_([S({type:["relationship"],readOnly:!0,json:{read:!1,write:!0}})],Pa.prototype,"type",void 0),Pa=_([J("esri.popup.content.RelationshipContent")],Pa);const Tm=Pa;var A4;let W1=A4=class extends Fc{constructor(t){super(t),this.text=null,this.type="text"}clone(){return new A4({text:this.text})}};_([S({type:String,json:{write:!0}})],W1.prototype,"text",void 0),_([S({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],W1.prototype,"type",void 0),W1=A4=_([J("esri.popup.content.TextContent")],W1);const Em=W1;let Ra=class extends ts(De){constructor(e){super(e),this.title=null,this.description=null,this.type=null,this.open=!1,this.associatedNetworkSourceId=null,this.associatedAssetGroup=null,this.associatedAssetType=null}};_([S({type:String,json:{write:!0}})],Ra.prototype,"title",void 0),_([S({type:String,json:{write:!0}})],Ra.prototype,"description",void 0),_([S({type:["attachment","connectivity","container","content","structure"],json:{write:!0}})],Ra.prototype,"type",void 0),_([S({type:Boolean,json:{read:!1}})],Ra.prototype,"open",void 0),_([S({type:Number,json:{type:gi,write:!0}})],Ra.prototype,"associatedNetworkSourceId",void 0),_([S({type:Number,json:{type:gi,write:!0}})],Ra.prototype,"associatedAssetGroup",void 0),_([S({type:Number,json:{type:gi,write:!0}})],Ra.prototype,"associatedAssetType",void 0),Ra=_([J("esri.popup.support.UtilityNetworkAssociationType")],Ra);const cle=Ra;let qu=class extends ts(Fc){constructor(e){super(e),this.description=null,this.title=null,this.associationTypes=[],this.type="utility-network-associations"}};_([S({type:String,json:{write:!0}})],qu.prototype,"description",void 0),_([S({type:String,json:{write:!0}})],qu.prototype,"title",void 0),_([S({type:[cle],json:{write:!0}})],qu.prototype,"associationTypes",void 0),_([Ze({utilityNetworkAssociations:"utility-network-associations"})],qu.prototype,"type",void 0),qu=_([J("esri.popup.content.UtilityNetworkAssociationsContent")],qu);const LE=qu,hle={base:null,key:"type",typeMap:{attachment:_m,media:Sm,text:Em,expression:V3,field:xm,relationship:Tm,utilityNetworkAssociations:LE}},ule={base:null,key:"type",typeMap:{attachment:_m,media:Sm,text:Em,expression:V3,field:xm,relationship:Tm}};var O4;let Wu=O4=class extends De{constructor(t){super(t),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new O4({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};_([S({type:String,json:{write:!0}})],Wu.prototype,"name",void 0),_([S({type:String,json:{write:!0}})],Wu.prototype,"title",void 0),_([S({type:String,json:{write:!0}})],Wu.prototype,"expression",void 0),_([S({type:["string","number"],json:{write:!0}})],Wu.prototype,"returnType",void 0),Wu=O4=_([J("esri.popup.ExpressionInfo")],Wu);const dle=Wu;var P4;let K1=P4=class extends De{constructor(t){super(t),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new P4({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};_([S({type:Boolean,json:{write:!0}})],K1.prototype,"returnTopmostRaster",void 0),_([S({type:Boolean,json:{write:!0}})],K1.prototype,"showNoDataRecords",void 0),K1=P4=_([J("esri.popup.LayerOptions")],K1);const ple=K1;var R4;let Z1=R4=class extends De{constructor(t){super(t),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new R4({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?_e(this.orderByFields):null})}};_([S({type:Boolean,json:{write:!0}})],Z1.prototype,"showRelatedRecords",void 0),_([S({type:[sF],json:{write:!0}})],Z1.prototype,"orderByFields",void 0),Z1=R4=_([J("esri.popup.RelatedRecordsInfo")],Z1);const pk=Z1;var N4;let Zs=N4=class extends fp(Oe){constructor(t){super(t),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new N4({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};_([S()],Zs.prototype,"active",void 0),_([S()],Zs.prototype,"className",void 0),_([S()],Zs.prototype,"disabled",void 0),_([S()],Zs.prototype,"icon",void 0),_([S()],Zs.prototype,"id",void 0),_([S()],Zs.prototype,"indicator",void 0),_([S()],Zs.prototype,"title",void 0),_([S()],Zs.prototype,"type",void 0),_([S()],Zs.prototype,"visible",void 0),Zs=N4=_([J("esri.support.actions.ActionBase")],Zs);const uy=Zs;var L4;let Ob=L4=class extends uy{constructor(t){super(t),this.image=null,this.type="button"}clone(){return new L4({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};_([S()],Ob.prototype,"image",void 0),Ob=L4=_([J("esri.support.actions.ActionButton")],Ob);const oF=Ob;var D4;let J1=D4=class extends uy{constructor(t){super(t),this.image=null,this.type="toggle",this.value=!1}clone(){return new D4({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};_([S()],J1.prototype,"image",void 0),_([S()],J1.prototype,"value",void 0),J1=D4=_([J("esri.support.actions.ActionToggle")],J1);const aF=J1,u1="relationships/",fk="expression/",fle=Pe.ofType({key:"type",defaultKeyValue:"button",base:uy,typeMap:{button:oF,toggle:aF}}),gle={base:Fc,key:"type",typeMap:{media:Sm,custom:nle,text:Em,attachments:_m,fields:xm,expression:V3,relationship:Tm,utilityNetworkAssociations:LE}},lF=new Set(["attachments","fields","media","text","expression","relationship"]),mle=new Set([...lF,"utility-network-associations"]);let tn=class extends ts(De){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(e){return Array.isArray(e)?e.map(i=>Ac(gle,i)):typeof e=="string"||typeof e=="function"||e instanceof HTMLElement||Ml(e)?e:(Ae.getLogger(this).error("content error","unsupported content value",{value:e}),null)}readContent(e,i){const{popupElements:n}=i;return Array.isArray(n)&&n.length>0?this._readPopupInfoElements(i.description,i.mediaInfos,n):this._readPopupInfo(i)}writeWebSceneContent(e,i,n,s){this._writePopupTemplateContent(e,i,s)}writeWebMapContent(e,i,n,s){this._writePopupTemplateContent(e,i,s)}writeFieldInfos(e,i,n,s){const{content:h}=this,f=Array.isArray(h)?h:null;if(e){const m=f?f.filter(x=>x.type==="fields"):[],y=m.length&&m.every(x=>{var E;return(E=x.fieldInfos)==null?void 0:E.length});i.fieldInfos=e.filter(Boolean).map(x=>{const E=x.toJSON(s);return y&&(E.visible=!1),E})}if(f)for(const m of f)m.type==="fields"&&this._writeFieldsContent(m,i)}writeLayerOptions(e,i,n,s){i[n]=!e||e.showNoDataRecords===null&&e.returnTopmostRaster===null?null:e.toJSON(s)}writeTitle(e,i){i.title=e||""}async collectRequiredFields(e,i){const n=this.expressionInfos||[];await this._collectExpressionInfoFields(e,i,[...n,...this._getContentExpressionInfos(this.content,n)]),wm(e,i,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e){const i=new Set;return await this.collectRequiredFields(i,e),[...i].sort()}_writePopupTemplateContent(e,i,n){typeof e!="string"?Array.isArray(e)&&(i.popupElements=e.filter(s=>(n==null?void 0:n.origin)==="web-scene"?lF.has(s.type):mle.has(s.type)).map(s=>s==null?void 0:s.toJSON(n)),i.popupElements.forEach(s=>{s.type==="attachments"?this._writeAttachmentContent(i):s.type==="media"?this._writeMediaContent(s,i):s.type==="text"?this._writeTextContent(s,i):s.type==="relationship"&&this._writeRelationshipContent(s,i)})):i.description=e}_writeFieldsContent(e,i){if(!Array.isArray(e.fieldInfos)||!e.fieldInfos.length)return;const n=_e(e.fieldInfos);Array.isArray(i.fieldInfos)?n.forEach(s=>{const h=i.fieldInfos.find(f=>{var m,y;return((m=f.fieldName)==null?void 0:m.toLowerCase())===((y=s.fieldName)==null?void 0:y.toLowerCase())});h?h.visible=!0:i.fieldInfos.push(s)}):i.fieldInfos=n}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeRelationshipContent(e,i){var h,f;const n=((h=e.orderByFields)==null?void 0:h.map(m=>this._toFieldOrderJSON(m,e.relationshipId)))||[],s=[...((f=i.relatedRecordsInfo)==null?void 0:f.orderByFields)||[],...n];i.relatedRecordsInfo={showRelatedRecords:!0,...(s==null?void 0:s.length)&&{orderByFields:s}}}_writeTextContent(e,i){!i.description&&e.text&&(i.description=e.text)}_writeMediaContent(e,i){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const n=_e(e.mediaInfos);Array.isArray(i.mediaInfos)?i.mediaInfos=[...i.mediaInfos,...n]:i.mediaInfos=n}_readPopupInfoElements(e,i,n){const s={description:!1,mediaInfos:!1};return n.map(h=>h.type==="media"?(h.mediaInfos||!i||s.mediaInfos||(h.mediaInfos=i,s.mediaInfos=!0),Sm.fromJSON(h)):h.type==="text"?(h.text||!e||s.description||(h.text=e,s.description=!0),Em.fromJSON(h)):h.type==="attachments"?_m.fromJSON(h):h.type==="fields"?xm.fromJSON(h):h.type==="expression"?V3.fromJSON(h):h.type==="relationship"?Tm.fromJSON(h):h.type==="utilityNetworkAssociations"?LE.fromJSON(h):void 0).filter(Boolean)}_toRelationshipContent(e){const{field:i,order:n}=e;if(!(i!=null&&i.startsWith(u1)))return null;const s=i.replace(u1,"").split("/");if(s.length!==2)return null;const h=parseInt(s[0],10),f=s[1];return typeof h=="number"&&f?Tm.fromJSON({relationshipId:h,orderByFields:[{field:f,order:n}]}):null}_toFieldOrderJSON(e,i){const{order:n,field:s}=e;return{field:`${u1}${i}/${s}`,order:n}}_readPopupInfo({description:e,mediaInfos:i,showAttachments:n,relatedRecordsInfo:s={showRelatedRecords:!1}}){const h=[];e?h.push(new Em({text:e})):h.push(new xm),Array.isArray(i)&&i.length&&h.push(Sm.fromJSON({mediaInfos:i})),n&&h.push(_m.fromJSON({displayType:"auto"}));const{showRelatedRecords:f,orderByFields:m}=s;return f&&(m!=null&&m.length)&&m.forEach(y=>{const x=this._toRelationshipContent(y);x&&h.push(x)}),h.length?h:e}_getContentElementFields(e){const i=e==null?void 0:e.type;if(i==="attachments")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if(i==="custom")return e.outFields||[];if(i==="fields")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields(e.fieldInfos??this.fieldInfos)];if(i==="media"){const n=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...n.reduce((s,h)=>[...s,...this._getMediaInfoFields(h)],[])]}return i==="text"?this._extractFieldNames(e.text):i==="relationship"||i==="utility-network-associations"?[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)]:[]}_getMediaInfoFields(e){const{caption:i,title:n,value:s}=e,h=s||{},{fields:f,normalizeField:m,tooltipField:y,sourceURL:x,linkURL:E}=h,k=[...this._extractFieldNames(n),...this._extractFieldNames(i),...this._extractFieldNames(x),...this._extractFieldNames(E),...f??[]];return m&&k.push(m),y&&k.push(y),k}_getContentExpressionInfos(e,i){return Array.isArray(e)?e.reduce((n,s)=>[...n,...s.type==="expression"&&s.expressionInfo?[s.expressionInfo]:[]],i):[]}_getContentFields(e){return typeof e=="string"?this._extractFieldNames(e):Array.isArray(e)?e.reduce((i,n)=>[...i,...this._getContentElementFields(n)],[]):[]}async _collectExpressionInfoFields(e,i,n){n&&await Promise.all(n.map(s=>uu(e,i,s.expression)))}_getFieldInfoFields(e){return e?e.filter(({fieldName:i,visible:n})=>!(n!==void 0&&!n||!i||i.startsWith(u1)||i.startsWith(fk))).map(i=>i.fieldName):[]}_getActionsFields(e){return e?e.toArray().reduce((i,n)=>[...i,...this._getActionFields(n)],[]):[]}_getActionFields(e){const{className:i,title:n,type:s}=e,h=s==="button"||s==="toggle"?e.image:"";return[...this._extractFieldNames(n),...this._extractFieldNames(i),...this._extractFieldNames(h)]}_getTitleFields(e){return typeof e=="string"?this._extractFieldNames(e):[]}_extractFieldNames(e){return ile(e).filter(i=>!(i.indexOf(u1)===0||i.indexOf(fk)===0))}};_([S({type:fle})],tn.prototype,"actions",void 0),_([S()],tn.prototype,"content",void 0),_([Hi("content")],tn.prototype,"castContent",null),_([kt("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],tn.prototype,"readContent",null),_([yt("web-scene","content",{popupElements:{type:Pe.ofType(ule)},showAttachments:{type:Boolean},mediaInfos:{type:Pe.ofType(k4)},description:{type:String},relatedRecordsInfo:{type:pk}})],tn.prototype,"writeWebSceneContent",null),_([yt("content",{popupElements:{type:Pe.ofType(hle)},showAttachments:{type:Boolean},mediaInfos:{type:Pe.ofType(k4)},description:{type:String},relatedRecordsInfo:{type:pk}})],tn.prototype,"writeWebMapContent",null),_([S({type:[dle],json:{write:!0}})],tn.prototype,"expressionInfos",void 0),_([S({type:[Qz]})],tn.prototype,"fieldInfos",void 0),_([yt("fieldInfos")],tn.prototype,"writeFieldInfos",null),_([S({type:ple})],tn.prototype,"layerOptions",void 0),_([yt("layerOptions")],tn.prototype,"writeLayerOptions",null),_([S({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],tn.prototype,"lastEditInfoEnabled",void 0),_([S()],tn.prototype,"outFields",void 0),_([S()],tn.prototype,"overwriteActions",void 0),_([S()],tn.prototype,"returnGeometry",void 0),_([S({json:{type:String}})],tn.prototype,"title",void 0),_([yt("title")],tn.prototype,"writeTitle",null),tn=_([J("esri.PopupTemplate")],tn);const DE=tn,gk=new xn({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let yle=0,Jp=class extends De{constructor(e){super(e),this.id="sym"+yle++,this.type=null,this.color=new ht([0,0,0,1])}readColor(e){return(e==null?void 0:e[0])!=null?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,i){}hash(){return JSON.stringify(this.toJSON())}clone(){}};_([S({type:gk.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:gk.write}}})],Jp.prototype,"type",void 0),_([S({type:ht,json:{write:{allowNull:!0}}})],Jp.prototype,"color",void 0),_([kt("color")],Jp.prototype,"readColor",null),Jp=_([J("esri.symbols.Symbol")],Jp);const pr=Jp;var z4;let uh=z4=class extends pr{constructor(t){super(t),this.data=null,this.type="cim"}readData(t,e){return e}writeData(t,e){Object.assign(e,t)}async collectRequiredFields(t,e){var i;if(((i=this.data)==null?void 0:i.type)==="CIMSymbolReference"){const n=this.data.primitiveOverrides;if(n){const s=n.map(h=>{const f=h.valueExpressionInfo;return f?uu(t,e,f.expression):null});await Promise.all(s)}}}clone(){return new z4({data:_e(this.data)})}hash(){return $P(JSON.stringify(this.data)).toString()}};_([S({json:{write:!1}})],uh.prototype,"color",void 0),_([S({json:{write:!0}})],uh.prototype,"data",void 0),_([kt("data",["symbol"])],uh.prototype,"readData",null),_([yt("data",{})],uh.prototype,"writeData",null),_([Ze({CIMSymbolReference:"cim"},{readOnly:!0})],uh.prototype,"type",void 0),uh=z4=_([J("esri.symbols.CIMSymbol")],uh);const gp=uh;let Yp=class extends De{constructor(e){super(e),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(e,i,n){e||(i[n]=e)}};_([S({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],Yp.prototype,"enabled",void 0),_([yt("enabled")],Yp.prototype,"writeEnabled",null),_([S({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],Yp.prototype,"type",void 0),Yp=_([J("esri.symbols.Symbol3DLayer")],Yp);const kl=Yp;function vle(t,e){const i=e.transparency!=null?dz(e.transparency):1,n=e.color;return n&&Array.isArray(n)?new ht([n[0]||0,n[1]||0,n[2]||0,i]):null}function ble(t,e){e.color=t.toJSON().slice(0,3);const i=uz(t.a);i!==0&&(e.transparency=i)}const xu={type:ht,json:{type:[gi],default:null,read:{source:["color","transparency"],reader:vle},write:{target:{color:{type:[gi]},transparency:{type:gi}},writer:ble}}},bl={type:Number,cast:Ci,json:{write:!0}};let Ku=class extends De{constructor(e){super(e),this.color=new ht([0,0,0,1]),this.extensionLength=0,this.size=hu(1)}clone(){}cloneProperties(){return{color:_e(this.color),size:this.size,extensionLength:this.extensionLength}}};_([S({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Ku.prototype,"type",void 0),_([S(xu)],Ku.prototype,"color",void 0),_([S({...bl,json:{write:{overridePolicy:t=>({enabled:!!t})}}})],Ku.prototype,"extensionLength",void 0),_([S(bl)],Ku.prototype,"size",void 0),Ku=_([J("esri.symbols.edges.Edges3D")],Ku);const zE=Ku;var F4;let Pb=F4=class extends zE{constructor(t){super(t),this.type="sketch"}clone(){return new F4(this.cloneProperties())}};_([Ze({sketch:"sketch"},{readOnly:!0})],Pb.prototype,"type",void 0),Pb=F4=_([J("esri.symbols.edges.SketchEdges3D")],Pb);const wle=Pb;var j4;let Rb=j4=class extends zE{constructor(t){super(t),this.type="solid"}clone(){return new j4(this.cloneProperties())}};_([Ze({solid:"solid"},{readOnly:!0})],Rb.prototype,"type",void 0),Rb=j4=_([J("esri.symbols.edges.SolidEdges3D")],Rb);const _le=Rb,cF={types:{key:"type",base:zE,typeMap:{solid:_le,sketch:wle}},json:{write:!0}};var G4;let Es=G4=class extends De{constructor(t){super(t),this.color=null,this.emissiveFactor=null}clone(){var e;const t={color:((e=this.color)==null?void 0:e.clone())??null,emissiveFactor:this.emissiveFactor?Xr(this.emissiveFactor):null};return new G4(t)}};_([S(xu)],Es.prototype,"color",void 0),_([S({type:[Number],json:{write:!1}})],Es.prototype,"emissiveFactor",void 0),Es=G4=_([J("esri.symbols.support.Symbol3DMaterial")],Es);var U4;let dh=U4=class extends kl{constructor(t){super(t),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){var t,e;return new U4({edges:(t=this.edges)==null?void 0:t.clone(),enabled:this.enabled,material:(e=this.material)==null?void 0:e.clone(),castShadows:this.castShadows,size:this.size})}};_([Ze({Extrude:"extrude"},{readOnly:!0})],dh.prototype,"type",void 0),_([S({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],dh.prototype,"size",void 0),_([S({type:Es,json:{write:!0}})],dh.prototype,"material",void 0),_([S({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],dh.prototype,"castShadows",void 0),_([S(cF)],dh.prototype,"edges",void 0),dh=U4=_([J("esri.symbols.ExtrudeSymbol3DLayer")],dh);const hF=dh;let Y1=class extends pr{constructor(e){super(e),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};_([Ze({esriSLS:"simple-line"},{readOnly:!0})],Y1.prototype,"type",void 0),_([S({type:Number,cast:Ci,json:{write:!0}})],Y1.prototype,"width",void 0),Y1=_([J("esri.symbols.LineSymbol")],Y1);const xle=Y1,Sle=["begin","end","begin-end"],uF=["arrow","circle","square","diamond","cross","x"];var B4;let Na=B4=class extends De{constructor(t){super(t),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(t,e,i,n){e[i]=(n==null?void 0:n.origin)==="web-map"?"arrow":t}set color(t){this._set("color",t)}readColor(t){return(t==null?void 0:t[0])!=null?[t[0],t[1],t[2],t[3]/255]:t}writeColor(t,e,i,n){(n==null?void 0:n.origin)==="web-map"||(e[i]=t)}clone(){return new B4({color:_e(this.color),placement:this.placement,style:this.style})}hash(){var t;return`${this.placement}.${(t=this.color)==null?void 0:t.hash()}.${this.style}`}};_([S({type:["begin","end","begin-end"],json:{write:!0}})],Na.prototype,"placement",void 0),_([Ze({"line-marker":"line-marker"},{readOnly:!0}),S({json:{origins:{"web-map":{write:!1}}}})],Na.prototype,"type",void 0),_([S({type:uF})],Na.prototype,"style",void 0),_([yt("style")],Na.prototype,"writeStyle",null),_([S({type:ht,value:null,json:{write:{allowNull:!0}}})],Na.prototype,"color",null),_([kt("color")],Na.prototype,"readColor",null),_([yt("color")],Na.prototype,"writeColor",null),Na=B4=_([J("esri.symbols.LineSymbolMarker")],Na);const Tle=Na;var H4;const P5=new xn({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let Kl=H4=class extends xle{constructor(...t){super(...t),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(t,e,i,n,s,h){if(t&&typeof t!="string")return t;const f={};return t!=null&&(f.style=t),e!=null&&(f.color=e),i!=null&&(f.width=Ci(i)),n!=null&&(f.cap=n),s!=null&&(f.join=s),h!=null&&(f.miterLimit=Ci(h)),f}clone(){var t;return new H4({color:_e(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(t=this.marker)==null?void 0:t.clone()})}hash(){var t,e;return`${super.hash()}.${(t=this.color)==null?void 0:t.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(e=this.marker)==null?void 0:e.hash()}`}};_([Ze({esriSLS:"simple-line"},{readOnly:!0})],Kl.prototype,"type",void 0),_([S({type:P5.apiValues,json:{read:P5.read,write:P5.write}})],Kl.prototype,"style",void 0),_([S({type:["butt","round","square"],json:{write:{overridePolicy:(t,e,i)=>({enabled:t!=="round"&&(i==null?void 0:i.origin)==null})}}})],Kl.prototype,"cap",void 0),_([S({type:["miter","round","bevel"],json:{write:{overridePolicy:(t,e,i)=>({enabled:t!=="round"&&(i==null?void 0:i.origin)==null})}}})],Kl.prototype,"join",void 0),_([S({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":Tle}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],Kl.prototype,"marker",void 0),_([S({type:Number,json:{read:!1,write:!1}})],Kl.prototype,"miterLimit",void 0),Kl=H4=_([J("esri.symbols.SimpleLineSymbol")],Kl);const jc=Kl;let X1=class extends pr{constructor(e){super(e),this.outline=null,this.type=null}hash(){var e;return`${this.type}.${(e=this.outline)==null?void 0:e.hash()}`}};_([S({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":jc}},json:{default:null,write:!0}})],X1.prototype,"outline",void 0),_([S({type:["simple-fill","picture-fill"],readOnly:!0})],X1.prototype,"type",void 0),X1=_([J("esri.symbols.FillSymbol")],X1);const dF=X1;let Nb=class extends De{constructor(e){super(e)}clone(){throw new Error("Subclasses of LinePattern3D should implement their own clone method.")}};_([S({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Nb.prototype,"type",void 0),Nb=_([J("esri.symbols.patterns.LinePattern3D")],Nb);const pF=Nb,Ele=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var V4;const Mle=Ar()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let Q1=V4=class extends pF{constructor(t){super(t),this.type="style",this.style="solid"}clone(){const t={style:this.style};return new V4(t)}};_([S({type:["style"]})],Q1.prototype,"type",void 0),_([Ze(Mle),S({type:Ele})],Q1.prototype,"style",void 0),Q1=V4=_([J("esri.symbols.patterns.LineStylePattern3D")],Q1);const FE=Q1;let Lb=class extends De{constructor(e){super(e),this.type="style"}clone(){throw new Error("Subclasses of Pattern3D should implement their own clone method.")}};_([S({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Lb.prototype,"type",void 0),Lb=_([J("esri.symbols.patterns.Pattern3D")],Lb);const fF=Lb,$le=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var q4;let eg=q4=class extends fF{constructor(t){super(t),this.type="style",this.style="solid"}clone(){return new q4({style:this.style})}};_([S({type:["style"]})],eg.prototype,"type",void 0),_([S({type:$le,json:{read:!0,write:!0}})],eg.prototype,"style",void 0),eg=q4=_([J("esri.symbols.patterns.StylePattern3D")],eg);const gF=eg,kle={types:{key:"type",base:fF,typeMap:{style:gF}},json:{write:!0}},mF={types:{key:"type",base:pF,typeMap:{style:FE}},json:{write:!0}},qg=new ht("white");new ht("black");const Cle=new ht([255,255,255,0]);function Ile(t){return t.r===0&&t.g===0&&t.b===0}var W4;let Wg=W4=class extends Es{constructor(t){super(t),this.colorMixMode=null}clone(){var e;const t={color:((e=this.color)==null?void 0:e.clone())??null,emissiveFactor:this.emissiveFactor?Xr(this.emissiveFactor):null,colorMixMode:this.colorMixMode};return new W4(t)}};_([Ze({multiply:"multiply",replace:"replace",tint:"tint"})],Wg.prototype,"colorMixMode",void 0),Wg=W4=_([J("esri.symbols.support.Symbol3DFillMaterial")],Wg);function Ale(t,e=!1){return t<=bP?e?new Array(t).fill(0):new Array(t):new Float64Array(t)}function z8e(t){return(vP(t)?t.length:t.byteLength/8)<=bP?Array.from(t):new Float64Array(t)}function F8e(t,e,i){return Array.isArray(t)?t.slice(e,e+i):t.subarray(e,e+i)}function dy(t=Nle){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function jE(t,e,i,n,s,h,f=dy()){return f[0]=t,f[1]=e,f[2]=i,f[3]=n,f[4]=s,f[5]=h,f}function j8e(t,e=dy()){return Ole(t,0,t.length/3,e)}function Ole(t,e,i,n=dy()){return yF(n,K4),Ple(n,t,e,i),n}function G8e(t,e=Ale(24)){const[i,n,s,h,f,m]=t;return e[0]=i,e[1]=n,e[2]=s,e[3]=i,e[4]=n,e[5]=m,e[6]=i,e[7]=f,e[8]=s,e[9]=i,e[10]=f,e[11]=m,e[12]=h,e[13]=n,e[14]=s,e[15]=h,e[16]=n,e[17]=m,e[18]=h,e[19]=f,e[20]=s,e[21]=h,e[22]=f,e[23]=m,e}function U8e(t,e){const i=isFinite(t[2])||isFinite(t[5]);return new Nt(i?{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],zmin:t[2],zmax:t[5],spatialReference:e}:{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],spatialReference:e})}function B8e(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[3]),t[4]=Math.max(t[4],e[4]),t[5]=Math.max(t[5],e[5])}function H8e(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[3]=Math.max(t[3],e[2]),t[4]=Math.max(t[4],e[3])}function V8e(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[0]),t[4]=Math.max(t[4],e[1]),t[5]=Math.max(t[5],e[2])}function Ple(t,e,i=0,n=e.length/3){let s=t[0],h=t[1],f=t[2],m=t[3],y=t[4],x=t[5];for(let E=0;E<n;E++)s=Math.min(s,e[i+3*E]),h=Math.min(h,e[i+3*E+1]),f=Math.min(f,e[i+3*E+2]),m=Math.max(m,e[i+3*E]),y=Math.max(y,e[i+3*E+1]),x=Math.max(x,e[i+3*E+2]);t[0]=s,t[1]=h,t[2]=f,t[3]=m,t[4]=y,t[5]=x}function q8e(t,e,i){const n=e.length;let s=t[0],h=t[1],f=t[2],m=t[3],y=t[4],x=t[5];if(i)for(let E=0;E<n;E++){const k=e[E];s=Math.min(s,k[0]),h=Math.min(h,k[1]),f=Math.min(f,k[2]),m=Math.max(m,k[0]),y=Math.max(y,k[1]),x=Math.max(x,k[2])}else for(let E=0;E<n;E++){const k=e[E];s=Math.min(s,k[0]),h=Math.min(h,k[1]),m=Math.max(m,k[0]),y=Math.max(y,k[1])}t[0]=s,t[1]=h,t[2]=f,t[3]=m,t[4]=y,t[5]=x}function W8e(t){for(let e=0;e<6;e++)if(!isFinite(t[e]))return!1;return!0}function py(t){return t[0]>=t[3]?0:t[3]-t[0]}function fy(t){return t[1]>=t[4]?0:t[4]-t[1]}function gy(t){return t[2]>=t[5]?0:t[5]-t[2]}function K8e(t){const e=py(t),i=gy(t),n=fy(t);return Math.sqrt(e*e+i*i+n*n)}function Z8e(t,e=[0,0,0]){return e[0]=t[0]+py(t)/2,e[1]=t[1]+fy(t)/2,e[2]=t[2]+gy(t)/2,e}function J8e(t,e=[0,0,0]){return e[0]=py(t),e[1]=fy(t),e[2]=gy(t),e}function Y8e(t,e){return e[0]>=t[0]&&e[1]>=t[1]&&e[2]>=t[2]&&e[0]<=t[3]&&e[1]<=t[4]&&e[2]<=t[5]}function Rle(t,e){return Math.max(e[0],t[0])<=Math.min(e[3],t[3])&&Math.max(e[1],t[1])<=Math.min(e[4],t[4])&&Math.max(e[2],t[2])<=Math.min(e[5],t[5])}function X8e(t,e){return e==null||Rle(t,e)}function Q8e(t,e,i,n,s=t){return s[0]=t[0]+e,s[1]=t[1]+i,s[2]=t[2]+n,s[3]=t[3]+e,s[4]=t[4]+i,s[5]=t[5]+n,s}function e$e(t,e,i=t){const n=t[0]+py(t)/2,s=t[1]+fy(t)/2,h=t[2]+gy(t)/2;return i[0]=n+(t[0]-n)*e,i[1]=s+(t[1]-s)*e,i[2]=h+(t[2]-h)*e,i[3]=n+(t[3]-n)*e,i[4]=s+(t[4]-s)*e,i[5]=h+(t[5]-h)*e,i}function t$e(t,e){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function i$e(t,e,i=t){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i!==t&&(i[3]=t[3],i[4]=t[4],i[5]=t[5]),i}function n$e(t,e,i=t){return i[3]=e[0],i[4]=e[1],i[5]=e[2],i!==t&&(i[0]=t[0],i[1]=t[1],i[2]=t[2]),t}function yF(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function r$e(t){return t?yF(t,K4):dy(K4)}function s$e(t,e){return e||(e=an()),e[0]=t[0],e[1]=t[1],e[2]=t[3],e[3]=t[4],e}function o$e(t,e){return t[0]=e[0],t[1]=e[1],t[2]=Number.NEGATIVE_INFINITY,t[3]=e[2],t[4]=e[3],t[5]=Number.POSITIVE_INFINITY,t}function a$e(t,e,i,n,s){return t[0]=e,t[1]=i,t[2]=Number.NEGATIVE_INFINITY,t[3]=n,t[4]=s,t[5]=Number.POSITIVE_INFINITY,t}function mk(t){return t.length===6}function l$e(t){return py(t)===0&&fy(t)===0&&gy(t)===0}function c$e(t,e,i){if(t==null||e==null)return t===e;if(!mk(t)||!mk(e))return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}const K4=[1/0,1/0,1/0,-1/0,-1/0,-1/0],Nle=[0,0,0,0,0,0];dy();function h$e(t,{isPrimitive:e,width:i,depth:n,height:s}){const h=e?10:1;if(i==null&&s==null&&n==null)return[h*t[0],h*t[1],h*t[2]];const f=Mr(i,n,s);let m;for(let y=0;y<3;y++){const x=f[y];if(x!=null){m=x/t[y];break}}for(let y=0;y<3;y++)f[y]==null&&(f[y]=t[y]*m);return f}const Lle=jE(-.5,-.5,-.5,.5,.5,.5),Dle=jE(-.5,-.5,0,.5,.5,1),zle=jE(-.5,-.5,0,.5,.5,.5);function u$e(t){switch(t){case"sphere":case"cube":case"diamond":return Lle;case"cylinder":case"cone":case"inverted-cone":return Dle;case"tetrahedron":return zle;default:return}}const GE=["butt","square","round"],Fle=[...GE,"none"],vF=["miter","bevel","round"];var Z4;let Zu=Z4=class extends De{constructor(t){super(t),this.color=new ht([0,0,0,1]),this.size=hu(1),this.pattern=null,this.patternCap="butt"}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new Z4(t)}};_([S(xu)],Zu.prototype,"color",void 0),_([S(bl)],Zu.prototype,"size",void 0),_([S(mF)],Zu.prototype,"pattern",void 0),_([S({type:GE,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],Zu.prototype,"patternCap",void 0),Zu=Z4=_([J("esri.symbols.support.Symbol3DOutline")],Zu);var Db;let Zl=Db=class extends kl{constructor(t){super(t),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const t={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new Db(t)}static fromSimpleFillSymbol(t){var n,s,h;const e=t.outline&&t.outline.style&&t.outline.style!=="solid"?new FE({style:t.outline.style}):null,i={size:((n=t.outline)==null?void 0:n.width)??0,color:(((s=t.outline)==null?void 0:s.color)??qg).clone(),pattern:e};return e&&((h=t.outline)!=null&&h.cap)&&(i.patternCap=t.outline.cap),new Db({material:new Wg({color:(t.color??Cle).clone()}),pattern:t.style&&t.style!=="solid"?new gF({style:t.style}):null,outline:i})}};_([Ze({Fill:"fill"},{readOnly:!0})],Zl.prototype,"type",void 0),_([S({type:Wg,json:{write:!0}})],Zl.prototype,"material",void 0),_([S(kle)],Zl.prototype,"pattern",void 0),_([S({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Zl.prototype,"castShadows",void 0),_([S({type:Zu,json:{write:!0}})],Zl.prototype,"outline",void 0),_([S(cF)],Zl.prototype,"edges",void 0),Zl=Db=_([J("esri.symbols.FillSymbol3DLayer")],Zl);const j0=Zl,jle=["none","underline","line-through"],Gle=["normal","italic","oblique"],Ule=["normal","lighter","bold","bolder"],bF={type:Number,cast:t=>{const e=Ss(t);return e===0?1:hr(e,.1,4)},nonNullable:!0},Ble=["left","right","center"],Hle=["baseline","top","middle","bottom"],wF={type:Ble,nonNullable:!0},_F={type:Hle,nonNullable:!0},d$e=8;var J4;let Jl=J4=class extends De{constructor(t){super(t),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(t){return Ci(t)}clone(){return new J4({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};_([S({type:jle,json:{default:"none",write:!0}})],Jl.prototype,"decoration",void 0),_([S({type:String,json:{write:!0}})],Jl.prototype,"family",void 0),_([S({type:Number,json:{write:{overridePolicy:(t,e,i)=>({enabled:!i||!i.textSymbol3D})}}})],Jl.prototype,"size",void 0),_([Hi("size")],Jl.prototype,"castSize",null),_([S({type:Gle,json:{default:"normal",write:!0}})],Jl.prototype,"style",void 0),_([S({type:Ule,json:{default:"normal",write:!0}})],Jl.prototype,"weight",void 0),Jl=J4=_([J("esri.symbols.Font")],Jl);const K3=Jl;var Y4;const Vle=Ar()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let Ju=Y4=class extends De{constructor(t){super(t)}readHref(t,e,i){return t?cy(t,i):e.dataURI}writeHref(t,e,i,n){t&&(hp(t)?e.dataURI=t:(e.href=z3(t,n),ks(e.href)&&(e.href=Tc(e.href))))}clone(){return new Y4({href:this.href,primitive:this.primitive})}};_([S({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],Ju.prototype,"href",void 0),_([kt("href")],Ju.prototype,"readHref",null),_([yt("href",{href:{type:String},dataURI:{type:String}})],Ju.prototype,"writeHref",null),_([Ze(Vle)],Ju.prototype,"primitive",void 0),Ju=Y4=_([J("esri.symbols.support.IconSymbol3DLayerResource")],Ju);const p$e="circle";var X4;let Sf=X4=class extends Oe{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new X4({x:this.x,y:this.y})}};_([S({type:Number})],Sf.prototype,"x",void 0),_([S({type:Number})],Sf.prototype,"y",void 0),Sf=X4=_([J("esri.symbols.support.Symbol3DAnchorPosition2D")],Sf);var Q4;let tg=Q4=class extends De{constructor(t){super(t),this.color=new ht([0,0,0,1]),this.size=hu(1)}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size};return new Q4(t)}};_([S(xu)],tg.prototype,"color",void 0),_([S(bl)],tg.prototype,"size",void 0),tg=Q4=_([J("esri.symbols.support.Symbol3DIconOutline")],tg);var Xp;const xF="esri.symbols.IconSymbol3DLayer";let Go=Xp=class extends kl{constructor(t){super(t),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null,this.angle=0}clone(){return new Xp({anchor:this.anchor,anchorPosition:_e(this.anchorPosition),enabled:this.enabled,material:_e(this.material),outline:_e(this.outline),resource:_e(this.resource),angle:this.angle,size:this.size})}static fromSimpleMarkerSymbol(t){const e=t.color||qg,i=yk(t),n=t.outline&&t.outline.width>0?{size:t.outline.width,color:(t.outline.color||qg).clone()}:null;return new Xp({size:t.size,angle:t.angle,resource:{primitive:Wle(t.style)},material:{color:e},outline:n,anchor:i?"relative":void 0,anchorPosition:i})}static fromPictureMarkerSymbol(t){const e=!t.color||Ile(t.color)?qg:t.color,i=yk(t);return new Xp({size:t.width<=t.height?t.height:t.width,angle:t.angle,resource:{href:t.url},material:{color:e.clone()},anchor:i?"relative":void 0,anchorPosition:i})}static fromCIMSymbol(t){return new Xp({resource:{href:IR({mediaType:"application/json",data:JSON.stringify(t.data)})}})}};_([S({type:Es,json:{write:!0}})],Go.prototype,"material",void 0),_([S({type:Ju,json:{write:!0}})],Go.prototype,"resource",void 0),_([Ze({Icon:"icon"},{readOnly:!0})],Go.prototype,"type",void 0),_([S(bl)],Go.prototype,"size",void 0),_([Ze({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"},{default:"center"})],Go.prototype,"anchor",void 0),_([S({type:Sf,json:{type:[Number],read:{reader:t=>new Sf({x:t[0],y:t[1]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Go.prototype,"anchorPosition",void 0),_([S({type:tg,json:{write:!0}})],Go.prototype,"outline",void 0),_([S({type:Number,json:{write:!0,default:0}})],Go.prototype,"angle",void 0),Go=Xp=_([J(xF)],Go);const Id=Go;function yk(t){const e="width"in t?t.width:t.size,i="height"in t?t.height:t.size,n=vk(t.xoffset),s=vk(t.yoffset);return(n||s)&&e&&i?{x:-n/e,y:s/i}:null}function vk(t){return isFinite(t)?t:0}const qle={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function Wle(t){return qle[t]||(Ae.getLogger(xF).warn(`${t} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}let Yu=class extends ts(De){constructor(e){super(e),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(e){return e!=null&&e.placement===this.placement&&e.style===this.style&&(this.color==null&&e.color==null||this.color!=null&&e.color!=null&&this.color.toJSON()===e.color.toJSON())}};_([S({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Yu.prototype,"type",void 0),_([S({type:Sle,json:{default:"begin-end",write:!0}})],Yu.prototype,"placement",void 0),_([S({type:uF,json:{default:"arrow",write:!0}})],Yu.prototype,"style",void 0),_([S({type:ht,json:{type:[gi],default:null,write:!0}})],Yu.prototype,"color",void 0),Yu=_([J("esri.symbols.LineStyleMarker3D")],Yu);const eS=Yu;var zb;let La=zb=class extends kl{constructor(t){super(t),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=hu(1),this.pattern=null,this.marker=null}clone(){const t={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new zb(t)}static fromSimpleLineSymbol(t){var i;const e={enabled:!0,size:t.width??hu(1),cap:t.cap||"butt",join:t.join||"miter",pattern:t.style?new FE({style:t.style}):null,material:new Es({color:(t.color||qg).clone()}),marker:t.marker?new eS({placement:t.marker.placement,style:t.marker.style,color:((i=t.marker.color)==null?void 0:i.clone())??null}):null};return new zb(e)}};_([S({type:Es,json:{write:!0}})],La.prototype,"material",void 0),_([Ze({Line:"line"},{readOnly:!0})],La.prototype,"type",void 0),_([S({type:vF,json:{write:!0,default:"miter"}})],La.prototype,"join",void 0),_([S({type:GE,json:{write:!0,default:"butt"}})],La.prototype,"cap",void 0),_([S(bl)],La.prototype,"size",void 0),_([S(mF)],La.prototype,"pattern",void 0),_([S({types:{key:"type",base:eS,typeMap:{style:eS}},json:{write:!0}})],La.prototype,"marker",void 0),La=zb=_([J("esri.symbols.LineSymbol3DLayer")],La);const my=La;var tS;const Kle=Ar()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let ig=tS=class extends De{clone(){return new tS({href:this.href,primitive:this.primitive})}};_([S({type:String,json:{read:EE,write:c0}})],ig.prototype,"href",void 0),_([Ze(Kle)],ig.prototype,"primitive",void 0),ig=tS=_([J("esri.symbols.support.ObjectSymbol3DLayerResource")],ig);const g$e="sphere";var iS;let bd=iS=class extends Oe{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new iS({x:this.x,y:this.y,z:this.z})}};_([S({type:Number})],bd.prototype,"x",void 0),_([S({type:Number})],bd.prototype,"y",void 0),_([S({type:Number})],bd.prototype,"z",void 0),bd=iS=_([J("esri.symbols.support.Symbol3DAnchorPosition3D")],bd);var nS;let Wn=nS=class extends kl{constructor(t){super(t),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){var t,e,i;return new nS({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:(t=this.anchorPosition)==null?void 0:t.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:((e=this.material)==null?void 0:e.clone())??null,castShadows:this.castShadows,resource:(i=this.resource)==null?void 0:i.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};_([S({type:Es,json:{write:!0}})],Wn.prototype,"material",void 0),_([S({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Wn.prototype,"castShadows",void 0),_([S({type:ig,json:{write:!0}})],Wn.prototype,"resource",void 0),_([Ze({Object:"object"},{readOnly:!0})],Wn.prototype,"type",void 0),_([S({type:Number,json:{write:!0}})],Wn.prototype,"width",void 0),_([S({type:Number,json:{write:!0}})],Wn.prototype,"height",void 0),_([S({type:Number,json:{write:!0}})],Wn.prototype,"depth",void 0),_([Ze({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"},{default:"origin"})],Wn.prototype,"anchor",void 0),_([S({type:bd,json:{type:[Number],read:{reader:t=>new bd({x:t[0],y:t[1],z:t[2]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y,t.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Wn.prototype,"anchorPosition",void 0),_([S({type:Number,json:{write:!0}})],Wn.prototype,"heading",void 0),_([S({type:Number,json:{write:!0}})],Wn.prototype,"tilt",void 0),_([S({type:Number,json:{write:!0}})],Wn.prototype,"roll",void 0),_([S({readOnly:!0})],Wn.prototype,"isPrimitive",null),Wn=nS=_([J("esri.symbols.ObjectSymbol3DLayer")],Wn);const UE=Wn;var rS;let gr=rS=class extends kl{constructor(t){super(t),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(t,e){return t??(e.height==null&&e.size!=null?e.size:void 0)}readHeight(t,e){return t??(e.width==null&&e.size!=null?e.size:void 0)}clone(){return new rS({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};_([S({type:Es,json:{write:!0}})],gr.prototype,"material",void 0),_([S({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],gr.prototype,"castShadows",void 0),_([Ze({Path:"path"},{readOnly:!0})],gr.prototype,"type",void 0),_([S({type:["circle","quad"],json:{write:!0,default:"circle"}})],gr.prototype,"profile",void 0),_([S({type:vF,json:{write:!0,default:"miter"}})],gr.prototype,"join",void 0),_([S({type:Fle,json:{write:!0,default:"butt"}})],gr.prototype,"cap",void 0),_([S({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],gr.prototype,"width",void 0),_([kt("width",["width","size","height"])],gr.prototype,"readWidth",null),_([S({type:Number,json:{write:!0}})],gr.prototype,"height",void 0),_([kt("height",["height","size","width"])],gr.prototype,"readHeight",null),_([S({type:["center","bottom","top"],json:{write:!0,default:"center"}})],gr.prototype,"anchor",void 0),_([S({type:["heading","all"],json:{write:!0,default:"all"}})],gr.prototype,"profileRotation",void 0),gr=rS=_([J("esri.symbols.PathSymbol3DLayer")],gr);const BE=gr;var sS;let Tf=sS=class extends De{constructor(){super(...arguments),this.color=new ht([0,0,0,1]),this.size=0}clone(){const t={color:_e(this.color),size:this.size};return new sS(t)}};_([S(xu)],Tf.prototype,"color",void 0),_([S(bl)],Tf.prototype,"size",void 0),Tf=sS=_([J("esri.symbols.support.Symbol3DHalo")],Tf);let Kg=class extends ts(De){constructor(e){super(e),this.color=null}};_([S(xu)],Kg.prototype,"color",void 0),Kg=_([J("esri.symbols.support.Symbol3DTextBackground")],Kg);var Fb;let zr=Fb=class extends kl{constructor(t){super(t),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(t){t!=null&&this._userSize!=null&&(t.size=this._userSize),this._set("font",t)}writeFont(t,e,i,n){const s={...n,textSymbol3D:!0};e.font=t.write({},s),delete e.font.size}get size(){var t;return this._userSize!=null?this._userSize:((t=this.font)==null?void 0:t.size)!=null?this.font.size:9}set size(t){this._userSize=t,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const t=new Fb({enabled:this.enabled,font:this.font&&_e(this.font),halo:this.halo&&_e(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:_e(this.background)});return t._userSize=this._userSize,t}static fromTextSymbol(t){return new Fb({font:t.font!=null?t.font.clone():new K3,halo:Zle(t.haloColor,t.haloSize),horizontalAlignment:t.horizontalAlignment,lineHeight:t.lineHeight,material:t.color?new Es({color:t.color.clone()}):null,text:t.text,verticalAlignment:t.verticalAlignment,background:t.backgroundColor?new Kg({color:t.backgroundColor.clone()}):null})}};function Zle(t,e){return t&&e!=null&&e>0?new Tf({color:_e(t),size:e}):null}_([S({type:K3,json:{write:!0}})],zr.prototype,"font",null),_([yt("font")],zr.prototype,"writeFont",null),_([S({type:Tf,json:{write:!0}})],zr.prototype,"halo",void 0),_([S({...wF,json:{default:"center",write:!0}})],zr.prototype,"horizontalAlignment",void 0),_([S({...bF,json:{default:1,write:!0}})],zr.prototype,"lineHeight",void 0),_([S({type:Es,json:{write:!0}})],zr.prototype,"material",void 0),_([S({type:Kg,json:{write:!0}})],zr.prototype,"background",void 0),_([S(bl)],zr.prototype,"size",null),_([S({type:String,json:{write:!0}})],zr.prototype,"text",void 0),_([Ze({Text:"text"},{readOnly:!0})],zr.prototype,"type",void 0),_([S({..._F,json:{default:"baseline",write:!0}})],zr.prototype,"verticalAlignment",void 0),zr=Fb=_([J("esri.symbols.TextSymbol3DLayer")],zr);const G0=zr;var oS;let ph=oS=class extends kl{constructor(t){super(t),this.color=aS.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new oS({color:_e(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};_([S({type:ht,nonNullable:!0,json:{type:[gi],write:(t,e,i)=>e[i]=t.toArray(ht.AlphaMode.UNLESS_OPAQUE),default:()=>aS.clone(),defaultEquals:t=>t.toCss(!0)===aS.toCss(!0)}})],ph.prototype,"color",void 0),_([Ze({Water:"water"},{readOnly:!0})],ph.prototype,"type",void 0),_([S({type:["small","medium","large"],json:{write:!0,default:"medium"}})],ph.prototype,"waterbodySize",void 0),_([S({type:Number,json:{write:!0,default:null}})],ph.prototype,"waveDirection",void 0),_([S({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],ph.prototype,"waveStrength",void 0),ph=oS=_([J("esri.symbols.WaterSymbol3DLayer")],ph);const SF=ph,aS=new ht([0,119,190]);var lS;let Xu=lS=class extends Oe{constructor(t){super(t),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new lS({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};_([S({type:String})],Xu.prototype,"name",void 0),_([S({type:String})],Xu.prototype,"styleUrl",void 0),_([S({type:String})],Xu.prototype,"styleName",void 0),_([S({type:es})],Xu.prototype,"portal",void 0),Xu=lS=_([J("esri.symbols.support.StyleOrigin")],Xu);const cS=Xu;var hS;let Zg=hS=class extends Oe{constructor(){super(...arguments),this.url=""}clone(){return new hS({url:this.url})}};_([S({type:String})],Zg.prototype,"url",void 0),Zg=hS=_([J("esri.symbols.support.Thumbnail")],Zg);const TF={icon:Id,object:UE,line:my,path:BE,fill:j0,extrude:hF,text:G0,water:SF},Jle=Pe.ofType({base:kl,key:"type",typeMap:TF,errorContext:"symbol-layer"});let Da=class extends pr{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const i=this.__accessor__&&this.__accessor__.metadata&&this.__accessor__.metadata.symbolLayers,n=i==null?void 0:i.type,s=n||Pe;this._set("symbolLayers",new s)}get color(){return null}set color(e){this.constructed&&Ae.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){cu(e,this._get("symbolLayers"))}readStyleOrigin(e,i,n){if(e.styleUrl&&e.name){const s=cy(e.styleUrl,n);return new cS({styleUrl:s,name:e.name})}if(e.styleName&&e.name)return new cS({portal:(n==null?void 0:n.portal)||es.getDefault(),styleName:e.styleName,name:e.name});n!=null&&n.messages&&n.messages.push(new Oc("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:n,definition:e}))}writeStyleOrigin(e,i,n,s){if(e.styleUrl&&e.name){let h=z3(e.styleUrl,s);ks(h)&&(h=Tc(h)),i.styleOrigin={styleUrl:h,name:e.name}}else e.styleName&&e.name&&(e.portal&&(s!=null&&s.portal)&&!FJ(e.portal.restUrl,s.portal.restUrl)?s!=null&&s.messages&&s.messages.push(new Oc("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):i.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof kl||e&&TF[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};_([S({json:{read:!1,write:!1}})],Da.prototype,"color",null),_([S({type:Jle,nonNullable:!0,json:{write:!0}}),Hi(XD)],Da.prototype,"symbolLayers",null),_([S({type:cS})],Da.prototype,"styleOrigin",void 0),_([kt("styleOrigin")],Da.prototype,"readStyleOrigin",null),_([yt("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],Da.prototype,"writeStyleOrigin",null),_([S({type:Zg,json:{read:!1}})],Da.prototype,"thumbnail",void 0),_([S({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],Da.prototype,"type",void 0),Da=_([J("esri.symbols.Symbol3D")],Da);const yy=Da;let ng=class extends De{constructor(e){super(e),this.visible=!0}clone(){throw new Error("Subclasses of Callout3D should implement their own clone method.")}};_([S({type:["line"],constructOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],ng.prototype,"type",void 0),_([S({readOnly:!0})],ng.prototype,"visible",void 0),ng=_([J("esri.symbols.callouts.Callout3D")],ng);const EF=ng;var uS;let jb=uS=class extends De{constructor(t){super(t),this.color=new ht("white")}clone(){return new uS({color:_e(this.color)})}};_([S(xu)],jb.prototype,"color",void 0),jb=uS=_([J("esri.symbols.callouts.LineCallout3DBorder")],jb);const Yle=jb;var dS;let fh=dS=class extends EF{constructor(t){super(t),this.type="line",this.color=new ht([0,0,0,1]),this.size=hu(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new dS({color:_e(this.color),size:this.size,border:_e(this.border)})}};_([Ze({line:"line"})],fh.prototype,"type",void 0),_([S(xu)],fh.prototype,"color",void 0),_([S(bl)],fh.prototype,"size",void 0),_([S({type:Yle,json:{write:!0}})],fh.prototype,"border",void 0),_([S({readOnly:!0})],fh.prototype,"visible",null),fh=dS=_([J("esri.symbols.callouts.LineCallout3D")],fh);const MF=fh;function HE(t){if(!t)return!1;const e=t.verticalOffset;return!!e&&!(e.screenLength<=0||e.maxWorldLength!=null&&e.maxWorldLength<=0)}function $F(t){if(!t||!t.supportsCallout||!t.supportsCallout())return!1;const e=t.callout;return!!e&&!!e.visible&&!!HE(t)}function b$e(t){return t.type==="point-3d"||t.type==="label-3d"}function w$e(t){return t.horizontalAlignment==="center"}const kF={types:{key:"type",base:EF,typeMap:{line:MF}},json:{write:!0}};var pS;let Qp=pS=class extends De{constructor(t){super(t),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new pS({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};_([S(bl)],Qp.prototype,"screenLength",void 0),_([S({type:Number,nonNullable:!0,json:{write:!0,default:0}})],Qp.prototype,"minWorldLength",void 0),_([S({type:Number,json:{write:!0}})],Qp.prototype,"maxWorldLength",void 0),Qp=pS=_([J("esri.symbols.support.Symbol3DVerticalOffset")],Qp);const VE=Qp;var Gb;const CF=Pe.ofType({base:null,key:"type",typeMap:{text:G0}});let gh=Gb=class extends yy{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new CF,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return $F(this)}hasVisibleVerticalOffset(){return HE(this)}clone(){return new Gb({styleOrigin:_e(this.styleOrigin),symbolLayers:_e(this.symbolLayers),thumbnail:_e(this.thumbnail),callout:_e(this.callout),verticalOffset:_e(this.verticalOffset)})}static fromTextSymbol(t){return new Gb({symbolLayers:new Pe([G0.fromTextSymbol(t)])})}};_([S({type:VE,json:{write:!0}})],gh.prototype,"verticalOffset",void 0),_([S(kF)],gh.prototype,"callout",void 0),_([S({json:{read:!1,write:!1}})],gh.prototype,"styleOrigin",void 0),_([S({type:CF})],gh.prototype,"symbolLayers",void 0),_([Ze({LabelSymbol3D:"label-3d"},{readOnly:!0})],gh.prototype,"type",void 0),gh=Gb=_([J("esri.symbols.LabelSymbol3D")],gh);const qE=gh;var Ub;const IF=Pe.ofType({base:null,key:"type",typeMap:{line:my,path:BE}}),Xle=Pe.ofType({base:null,key:"type",typeMap:{line:my,path:BE}});let rg=Ub=class extends yy{constructor(t){super(t),this.symbolLayers=new IF,this.type="line-3d"}clone(){return new Ub({styleOrigin:_e(this.styleOrigin),symbolLayers:_e(this.symbolLayers),thumbnail:_e(this.thumbnail)})}static fromSimpleLineSymbol(t){return new Ub({symbolLayers:new Pe([my.fromSimpleLineSymbol(t)])})}};_([S({type:IF,json:{type:Xle}})],rg.prototype,"symbolLayers",void 0),_([Ze({LineSymbol3D:"line-3d"},{readOnly:!0})],rg.prototype,"type",void 0),rg=Ub=_([J("esri.symbols.LineSymbol3D")],rg);const Z3=rg;let mh=class extends pr{constructor(e){super(e),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};_([S({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],mh.prototype,"angle",void 0),_([S({type:["simple-marker","picture-marker"],readOnly:!0})],mh.prototype,"type",void 0),_([S({type:Number,cast:Ci,json:{write:!0}})],mh.prototype,"xoffset",void 0),_([S({type:Number,cast:Ci,json:{write:!0}})],mh.prototype,"yoffset",void 0),_([S({cast:t=>t==="auto"?t:Ss(Ci(t)),json:{write:!0}})],mh.prototype,"size",void 0),mh=_([J("esri.symbols.MarkerSymbol")],mh);const AF=mh;var Bb;const OF=Pe.ofType({base:null,key:"type",typeMap:{fill:j0}});let sg=Bb=class extends yy{constructor(t){super(t),this.symbolLayers=new OF,this.type="mesh-3d"}clone(){return new Bb({styleOrigin:_e(this.styleOrigin),symbolLayers:_e(this.symbolLayers),thumbnail:_e(this.thumbnail)})}static fromSimpleFillSymbol(t){return new Bb({symbolLayers:new Pe([j0.fromSimpleFillSymbol(t)])})}};_([S({type:OF})],sg.prototype,"symbolLayers",void 0),_([Ze({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],sg.prototype,"type",void 0),sg=Bb=_([J("esri.symbols.MeshSymbol3D")],sg);const J3=sg;function Qle(t,e,i){return e.imageData?IR({mediaType:e.contentType||"image/png",isBase64:!0,data:e.imageData}):PF(e.url,i)}function PF(t,e){if(!ks(t)){const i=tce(e);if(i)return m3(i,"images",t)}return cy(t,e)}function ece(t,e,i,n){if(hp(t)){const s=e0(t);if(!s)return;e.contentType=s.mediaType,e.imageData=s.data,i&&i.imageData===e.imageData&&i.url&&c0(i.url,e,"url",n)}else c0(t,e,"url",n)}const RF={json:{read:{source:["imageData","url"],reader:Qle},write:{writer(t,e,i,n){ece(t,e,this.source,n)}}}},NF={readOnly:!0,json:{read:{source:["imageData","url"],reader(t,e,i){const n={};return e.imageData&&(n.imageData=e.imageData),e.contentType&&(n.contentType=e.contentType),e.url&&(n.url=PF(e.url,i)),n}}}};function tce(t){var s,h;if(!t)return null;const{origin:e,layer:i}=t;if(e!=="service"&&e!=="portal-item")return null;const n=i==null?void 0:i.type;return n==="feature"||n==="stream"?(s=i.parsedUrl)==null?void 0:s.path:n==="map-image"||n==="tile"?(h=t.url)==null?void 0:h.path:null}var fS;let Js=fS=class extends dF{constructor(...t){super(...t),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(t,e,i,n){if(t&&typeof t!="string"&&t.imageData==null)return t;const s={};return t&&(s.url=t),e&&(s.outline=e),i!=null&&(s.width=Ci(i)),n!=null&&(s.height=Ci(n)),s}clone(){const t=new fS({color:_e(this.color),height:this.height,outline:_e(this.outline),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return t._set("source",_e(this.source)),t}hash(){var t;return`${super.hash()}.${(t=this.color)==null?void 0:t.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};_([Ze({esriPFS:"picture-fill"},{readOnly:!0})],Js.prototype,"type",void 0),_([S(RF)],Js.prototype,"url",void 0),_([S({type:Number,json:{write:!0}})],Js.prototype,"xscale",void 0),_([S({type:Number,json:{write:!0}})],Js.prototype,"yscale",void 0),_([S({type:Number,cast:Ci,json:{write:!0}})],Js.prototype,"width",void 0),_([S({type:Number,cast:Ci,json:{write:!0}})],Js.prototype,"height",void 0),_([S({type:Number,cast:Ci,json:{write:!0}})],Js.prototype,"xoffset",void 0),_([S({type:Number,cast:Ci,json:{write:!0}})],Js.prototype,"yoffset",void 0),_([S(NF)],Js.prototype,"source",void 0),Js=fS=_([J("esri.symbols.PictureFillSymbol")],Js);const WE=Js;var gS;let Uo=gS=class extends AF{constructor(...t){super(...t),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string"&&t.imageData==null)return t;const n={};return t&&(n.url=t),e!=null&&(n.width=Ci(e)),i!=null&&(n.height=Ci(i)),n}readHeight(t,e){return e.size||t}readWidth(t,e){return e.size||t}clone(){const t=new gS({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return t._set("source",_e(this.source)),t}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};_([S({json:{write:!1}})],Uo.prototype,"color",void 0),_([Ze({esriPMS:"picture-marker"},{readOnly:!0})],Uo.prototype,"type",void 0),_([S(RF)],Uo.prototype,"url",void 0),_([S(NF)],Uo.prototype,"source",void 0),_([S({type:Number,cast:Ci,json:{write:!0}})],Uo.prototype,"height",void 0),_([kt("height",["height","size"])],Uo.prototype,"readHeight",null),_([S({type:Number,cast:Ci,json:{write:!0}})],Uo.prototype,"width",void 0),_([S({json:{write:!1}})],Uo.prototype,"size",void 0),Uo=gS=_([J("esri.symbols.PictureMarkerSymbol")],Uo);const vy=Uo;var Qu;const LF=Pe.ofType({base:null,key:"type",typeMap:{icon:Id,object:UE,text:G0}});let ed=Qu=class extends yy{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.symbolLayers=new LF,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const t of this.symbolLayers.items)switch(t.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return $F(this)}hasVisibleVerticalOffset(){return HE(this)}clone(){return new Qu({verticalOffset:_e(this.verticalOffset),callout:_e(this.callout),styleOrigin:_e(this.styleOrigin),symbolLayers:_e(this.symbolLayers),thumbnail:_e(this.thumbnail)})}static fromSimpleMarkerSymbol(t){return new Qu({symbolLayers:new Pe([Id.fromSimpleMarkerSymbol(t)])})}static fromPictureMarkerSymbol(t){return new Qu({symbolLayers:new Pe([Id.fromPictureMarkerSymbol(t)])})}static fromCIMSymbol(t){var n,s;if(((s=(n=t.data)==null?void 0:n.symbol)==null?void 0:s.type)!=="CIMPointSymbol")return null;const i=t.data.symbol;return new Qu(i!=null&&i.callout?{symbolLayers:new Pe([Id.fromCIMSymbol(t)]),callout:new MF({size:.5,color:new ht([0,0,0])}),verticalOffset:new VE({screenLength:40})}:{symbolLayers:new Pe([Id.fromCIMSymbol(t)])})}static fromTextSymbol(t){return new Qu({symbolLayers:new Pe([G0.fromTextSymbol(t)])})}};_([S({type:VE,json:{write:!0}})],ed.prototype,"verticalOffset",void 0),_([S(kF)],ed.prototype,"callout",void 0),_([S({type:LF,json:{origins:{"web-scene":{write:!0}}}})],ed.prototype,"symbolLayers",void 0),_([Ze({PointSymbol3D:"point-3d"},{readOnly:!0})],ed.prototype,"type",void 0),ed=Qu=_([J("esri.symbols.PointSymbol3D")],ed);const Y3=ed;var og;const DF=Pe.ofType({base:null,key:"type",typeMap:{extrude:hF,fill:j0,icon:Id,line:my,object:UE,text:G0,water:SF}});let ag=og=class extends yy{constructor(t){super(t),this.symbolLayers=new DF,this.type="polygon-3d"}initialize(){const t=e=>{e.type==="line"&&Jf(Ae.getLogger(this),"LineSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use FillSymbol3DLayer.outline instead.",version:"4.28"}),e.type==="text"&&Jf(Ae.getLogger(this),"TextSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use Labels instead.",version:"4.28"})};for(const e of this.symbolLayers)t(e);this.addHandles(Ns(()=>this.symbolLayers,"after-add",({item:e})=>t(e),Pc))}clone(){return new og({styleOrigin:_e(this.styleOrigin),symbolLayers:_e(this.symbolLayers),thumbnail:_e(this.thumbnail)})}static fromJSON(t){var i;const e=new og;if(e.read(t),e.symbolLayers.length===2&&e.symbolLayers.at(0).type==="fill"&&e.symbolLayers.at(1).type==="line"){const n=e.symbolLayers.at(0),s=e.symbolLayers.at(1);!s.enabled||(i=t.symbolLayers)!=null&&i[1]&&t.symbolLayers[1].enable===!1||(n.outline={size:s.size,color:s.material!=null?s.material.color:null}),e.symbolLayers.removeAt(1)}return e}static fromSimpleFillSymbol(t){return new og({symbolLayers:new Pe([j0.fromSimpleFillSymbol(t)])})}};_([S({type:DF,json:{write:!0}})],ag.prototype,"symbolLayers",void 0),_([Ze({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],ag.prototype,"type",void 0),ag=og=_([J("esri.symbols.PolygonSymbol3D")],ag);const X3=ag;var mS;const R5=new xn({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let td=mS=class extends dF{constructor(...t){super(...t),this.color=new ht([0,0,0,.25]),this.outline=new jc,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string")return t;const n={};return t&&(n.style=t),e&&(n.outline=e),i&&(n.color=i),n}clone(){return new mS({color:_e(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};_([S()],td.prototype,"color",void 0),_([S()],td.prototype,"outline",void 0),_([Ze({esriSFS:"simple-fill"},{readOnly:!0})],td.prototype,"type",void 0),_([S({type:R5.apiValues,json:{read:R5.read,write:R5.write}})],td.prototype,"style",void 0),td=mS=_([J("esri.symbols.SimpleFillSymbol")],td);const by=td;var yS;const N5=new xn({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let za=yS=class extends AF{constructor(...t){super(...t),this.color=new ht([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new jc}normalizeCtorArgs(t,e,i,n){if(t&&typeof t!="string")return t;const s={};return t&&(s.style=t),e!=null&&(s.size=Ci(e)),i&&(s.outline=i),n&&(s.color=n),s}writeColor(t,e){t&&this.style!=="x"&&this.style!=="cross"&&(e.color=t.toJSON()),t===null&&(e.color=null)}set path(t){this.style="path",this._set("path",t)}clone(){return new yS({angle:this.angle,color:_e(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var t;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(t=this.outline)==null?void 0:t.hash()}`}};_([S()],za.prototype,"color",void 0),_([yt("color")],za.prototype,"writeColor",null),_([Ze({esriSMS:"simple-marker"},{readOnly:!0})],za.prototype,"type",void 0),_([S()],za.prototype,"size",void 0),_([S({type:N5.apiValues,json:{read:N5.read,write:N5.write}})],za.prototype,"style",void 0),_([S({type:String,json:{write:!0}})],za.prototype,"path",null),_([S({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":jc}},json:{default:null,write:!0}})],za.prototype,"outline",void 0),za=yS=_([J("esri.symbols.SimpleMarkerSymbol")],za);const d0=za;var vS;let wi=vS=class extends pr{constructor(...t){super(...t),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new K3,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string")return t;const n={};return t&&(n.text=t),e&&(n.font=e),i&&(n.color=i),n}writeLineWidth(t,e,i,n){n&&typeof n!="string"?n.origin:e[i]=t}castLineWidth(t){return Ci(t)}writeLineHeight(t,e,i,n){n&&typeof n!="string"?n.origin:e[i]=t}clone(){return new vS({angle:this.angle,backgroundColor:_e(this.backgroundColor),borderLineColor:_e(this.borderLineColor),borderLineSize:this.borderLineSize,color:_e(this.color),font:this.font&&this.font.clone(),haloColor:_e(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var t,e,i;return`${(t=this.backgroundColor)==null?void 0:t.hash()}.${this.borderLineColor}.${this.borderLineSize}.${(e=this.color)==null?void 0:e.hash()}.${this.font&&this.font.hash()}.${(i=this.haloColor)==null?void 0:i.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};_([S({type:ht,json:{write:!0}})],wi.prototype,"backgroundColor",void 0),_([S({type:ht,json:{write:!0}})],wi.prototype,"borderLineColor",void 0),_([S({type:Number,json:{write:!0},cast:Ci})],wi.prototype,"borderLineSize",void 0),_([S({type:K3,json:{write:!0}})],wi.prototype,"font",void 0),_([S({...wF,json:{write:!0}})],wi.prototype,"horizontalAlignment",void 0),_([S({type:Boolean,json:{write:!0}})],wi.prototype,"kerning",void 0),_([S({type:ht,json:{write:!0}})],wi.prototype,"haloColor",void 0),_([S({type:Number,cast:Ci,json:{write:!0}})],wi.prototype,"haloSize",void 0),_([S({type:Boolean,json:{write:!0}})],wi.prototype,"rightToLeft",void 0),_([S({type:Boolean,json:{write:!0}})],wi.prototype,"rotated",void 0),_([S({type:String,json:{write:!0}})],wi.prototype,"text",void 0),_([Ze({esriTS:"text"},{readOnly:!0})],wi.prototype,"type",void 0),_([S({..._F,json:{write:!0}})],wi.prototype,"verticalAlignment",void 0),_([S({type:Number,cast:Ci,json:{write:!0}})],wi.prototype,"xoffset",void 0),_([S({type:Number,cast:Ci,json:{write:!0}})],wi.prototype,"yoffset",void 0),_([S({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],wi.prototype,"angle",void 0),_([S({type:Number,json:{write:!0}})],wi.prototype,"width",void 0),_([S({type:Number})],wi.prototype,"lineWidth",void 0),_([yt("lineWidth")],wi.prototype,"writeLineWidth",null),_([Hi("lineWidth")],wi.prototype,"castLineWidth",null),_([S(bF)],wi.prototype,"lineHeight",void 0),_([yt("lineHeight")],wi.prototype,"writeLineHeight",null),wi=vS=_([J("esri.symbols.TextSymbol")],wi);const wy=wi;var bS;let Bo=bS=class extends pr{constructor(t){super(t),this.color=null,this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const t=this.portal!=null?this.portal:es.getDefault(),e=t.user?t.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${e}:${t.url}`}read(t,e){this.portal=e==null?void 0:e.portal,super.read(t,e)}clone(){return new bS({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(t){return this._fetchSymbol("webRef",t)}fetchCIMSymbol(t){return this._fetchSymbol("cimRef",t)}async _fetchSymbol(t,e){const i=e!=null?e.cache:null,n=i?this._fetchCacheKey:null;if(i!=null){const m=n&&i.get(n);if(m)return m.clone()}const{resolveWebStyleSymbol:s}=await ge(()=>import("./webStyleSymbolUtils-C-w781HU.js"),__vite__mapDeps([159,160,152,81,34,153]),import.meta.url);Jt(e);const h=s(this,{portal:this.portal},t,e);h.catch(m=>{Ae.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",m)});const f=await h;return t==="webRef"&&f.type==="point-3d"||t==="cimRef"&&f.type==="cim"?(i!=null&&i.set(n,f.clone()),f):null}};_([S({json:{write:!1}})],Bo.prototype,"color",void 0),_([S({type:String,json:{write:!0}})],Bo.prototype,"styleName",void 0),_([S({type:es,json:{write:!1}})],Bo.prototype,"portal",void 0),_([S({type:String,json:{read:EE,write:c0}})],Bo.prototype,"styleUrl",void 0),_([S({type:Zg,json:{read:!1}})],Bo.prototype,"thumbnail",void 0),_([S({type:String,json:{write:!0}})],Bo.prototype,"name",void 0),_([Ze({styleSymbolReference:"web-style"},{readOnly:!0})],Bo.prototype,"type",void 0),_([S()],Bo.prototype,"_fetchCacheKey",null),Bo=bS=_([J("esri.symbols.WebStyleSymbol")],Bo);const Q3=Bo;function x$e(t){if(!t)return!1;switch(t.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function S$e(t){if(!t)return!1;switch(t.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const Ad={base:pr,key:"type",typeMap:{"simple-fill":by,"picture-fill":WE,"picture-marker":vy,"simple-line":jc,"simple-marker":d0,text:wy,"label-3d":qE,"line-3d":Z3,"mesh-3d":J3,"point-3d":Y3,"polygon-3d":X3,"web-style":Q3,cim:gp},errorContext:"symbol"},T$e={base:pr,key:"type",typeMap:{"picture-marker":vy,"simple-marker":d0,"point-3d":Y3,cim:gp},errorContext:"symbol"},E$e={base:pr,key:"type",typeMap:{"simple-line":jc,"line-3d":Z3,cim:gp},errorContext:"symbol"},M$e={base:pr,key:"type",typeMap:{"simple-fill":by,"picture-fill":WE,"polygon-3d":X3,cim:gp},errorContext:"symbol"},$$e={base:pr,key:"type",typeMap:{"picture-marker":vy,"simple-marker":d0,text:wy,"web-style":Q3,cim:gp},errorContext:"symbol"},k$e=vT({types:Ad}),C$e={base:pr,key:"type",typeMap:{"simple-fill":by,"picture-fill":WE,"picture-marker":vy,"simple-line":jc,"simple-marker":d0,text:wy,"line-3d":Z3,"mesh-3d":J3,"point-3d":Y3,"polygon-3d":X3,"web-style":Q3,cim:gp},errorContext:"symbol"},I$e={base:pr,key:"type",typeMap:{text:wy,"label-3d":qE},errorContext:"symbol"},A$e={base:pr,key:"type",typeMap:{"line-3d":Z3,"mesh-3d":J3,"point-3d":Y3,"polygon-3d":X3,"web-style":Q3,cim:gp},errorContext:"symbol"},O$e={base:pr,key:"type",typeMap:{"label-3d":qE},errorContext:"symbol"},P$e=Ac(Ad);var wS;function ice(t){if(!t)return null;const e={};for(const i in t){const n=Yd(t[i]);n&&(e[i]=n)}return Object.keys(e).length!==0?e:null}function nce(t){if(t==null)return null;const e={};for(const i in t){const n=t[i];n&&(e[i]=n.toJSON())}return Object.keys(e).length!==0?e:null}let Fr=wS=class extends ts(De){constructor(t){super(t),this.isAggregate=!1,this.layer=null,this.origin=null,this.popupTemplate=null,this.sourceLayer=null,this._version=0,Object.defineProperty(this,"uid",{value:Rg(),configurable:!0}),Object.defineProperty(this,"_lastMeshTransform",{value:{},configurable:!0,writable:!0,enumerable:!1}),arguments.length>1&&yK(Ae.getLogger(this),"Graphic",{version:"4.30"})}initialize(){this._watchMeshGeometryChanges()}set aggregateGeometries(t){const e=this._get("aggregateGeometries");JSON.stringify(e)!==JSON.stringify(t)&&this._set("aggregateGeometries",t)}set attributes(t){const e=this._get("attributes");e!==t&&(this._set("attributes",t),this._notifyLayer("attributes",e,t))}set geometry(t){const e=this._get("geometry");e!==t&&(this._set("geometry",t),(t==null?void 0:t.type)!=="mesh"&&this._notifyLayer("geometry",e,t))}set symbol(t){const e=this._get("symbol");e!==t&&(this._set("symbol",t),this._notifyLayer("symbol",e,t))}get version(){return this._version}set visible(t){const e=this._get("visible");e!==t&&(this._set("visible",t),this._notifyLayer("visible",e,t))}cloneShallow(){return new wS({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible,origin:this.origin})}getEffectivePopupTemplate(t=!1){if(this.popupTemplate)return this.popupTemplate;const e=this.origin&&"layer"in this.origin?this.origin.layer:null;for(const i of[e,this.sourceLayer,this.layer])if(i){if("popupTemplate"in i&&i.popupTemplate)return i.popupTemplate;if(t&&"defaultPopupTemplate"in i&&i.defaultPopupTemplate!=null)return i.defaultPopupTemplate}return null}getAttribute(t){var e;return(e=this.attributes)==null?void 0:e[t]}setAttribute(t,e){if(this.attributes){const i=this.getAttribute(t);this.attributes[t]=e,this._notifyLayer("attributes",i,e,t)}else this.attributes={[t]:e},this._notifyLayer("attributes",void 0,e,t)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){var t;return{aggregateGeometries:nce(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:l9(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:((t=this.popupTemplate)==null?void 0:t.toJSON())??null}}notifyMeshTransformChanged(t={}){const{geometry:e}=this;if((e==null?void 0:e.type)==="mesh"){const i={origin:e.origin,transform:e.transform};this._notifyLayer("origin-transform",i,i,t.action)}}_notifyLayer(t,e,i,n){if(this._version++,!this.layer||!("graphicChanged"in this.layer))return;const s={graphic:this,property:t,oldValue:e,newValue:i};t==="origin-transform"&&(s.action=n),t==="attributes"&&(s.attributeName=n),this.layer.graphicChanged(s)}_watchMeshGeometryChanges(){this.addHandles([ur(()=>{var t,e;return((t=this.geometry)==null?void 0:t.type)==="mesh"&&this.geometry.vertexSpace.origin?{localMatrix:(e=this.geometry.transform)==null?void 0:e.localMatrix,origin:this.geometry.vertexSpace.origin}:void 0},({localMatrix:t,origin:e})=>{this._lastMeshTransform.localMatrix===t&&this._lastMeshTransform.origin===e||(this._lastMeshTransform.localMatrix=t,this._lastMeshTransform.origin=e,this.notifyMeshTransformChanged())}),ur(()=>{var t;return((t=this.geometry)==null?void 0:t.type)==="mesh"?{vertexAttributes:this.geometry.vertexAttributes}:void 0},()=>{var e;const t=this.geometry;(t==null?void 0:t.type)==="mesh"&&t.vertexSpace.origin?(this._lastMeshTransform.localMatrix=(e=t.transform)==null?void 0:e.localMatrix,this._lastMeshTransform.origin=t.vertexSpace.origin):(this._lastMeshTransform.localMatrix=void 0,this._lastMeshTransform.origin=void 0),this._notifyLayer("geometry",this.geometry,this.geometry)},{equals:(t,e)=>t===e,sync:!0})])}};_([S({value:null,json:{read:ice}})],Fr.prototype,"aggregateGeometries",null),_([S({value:null})],Fr.prototype,"attributes",null),_([S({value:null,types:S3,json:{read:Yd}})],Fr.prototype,"geometry",null),_([S({type:Boolean})],Fr.prototype,"isAggregate",void 0),_([S({clonable:"reference"})],Fr.prototype,"layer",void 0),_([S({clonable:"reference"})],Fr.prototype,"origin",void 0),_([S({type:DE})],Fr.prototype,"popupTemplate",void 0),_([S({clonable:"reference"})],Fr.prototype,"sourceLayer",void 0),_([S({value:null,types:Ad})],Fr.prototype,"symbol",null),_([S({clonable:!1,json:{read:!1,write:!1}})],Fr.prototype,"_version",void 0),_([S({type:Boolean,value:!0})],Fr.prototype,"visible",null),Fr=wS=_([J("esri.Graphic")],Fr);const du=Fr;let zd=class extends Hg{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};_([GN({Type:du,ensureType:_n(du)})],zd.prototype,"itemType",void 0),zd=_([J("esri.support.GraphicsCollection")],zd);let yh=class extends Oe{constructor(e){super(e),this.view=null,this.baseLayerViews=new Pe,this.referenceLayerViews=new Pe,this._loadingHandle=Ee(()=>{var i,n;return(n=(i=this.view)==null?void 0:i.map)==null?void 0:n.basemap},i=>{i&&i.load().catch(()=>{})},Ct)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null);for(const e of this.baseLayerViews)e.destroy();this.baseLayerViews.length=0;for(const e of this.referenceLayerViews)e.destroy();this.referenceLayerViews.length=0}get suspended(){return!this.view||this.view.suspended}get updating(){var i,n,s;if((i=this.view)!=null&&i.suspended)return!1;const e=(s=(n=this.view)==null?void 0:n.map)==null?void 0:s.basemap;return!!e&&!!e.loaded&&(this.baseLayerViews.some(h=>h.updating)||this.referenceLayerViews.some(h=>h.updating))}};_([S({constructOnly:!0})],yh.prototype,"view",void 0),_([S({readOnly:!0})],yh.prototype,"baseLayerViews",void 0),_([S({readOnly:!0})],yh.prototype,"referenceLayerViews",void 0),_([S({readOnly:!0})],yh.prototype,"suspended",null),_([S({type:Boolean,readOnly:!0})],yh.prototype,"updating",null),yh=_([J("esri.views.BasemapView")],yh);const rce=yh;function sce(t){return"tryRecycleWith"in t}function oce(t){return t!=null&&typeof t=="object"&&"layerViews"in t}let ace=class{constructor(e,i,n){this.layer=e,this.view=i,this.layerViewImporter=n,this._controller=new AbortController,this._deferred=Rs(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,$s(this._controller.signal,()=>{const s=new ce("cancelled:layerview-create","layerview creation cancelled",{layer:e});this._deferred.reject(s)})}tryRecycle(e){if(!this.done||!this.layerView||!sce(this.layerView))return null;const i=this.layer.type,n=this._controller.signal;for(let s=0;s<e.length;s++){const h=e[s];if(h.type!==i)continue;const f=this.layerView.tryRecycleWith(h,{signal:n});if(f){e.splice(s,1),this.layer=h;const m=this.layerView,y=m.view;return this.promise=Promise.race([f.then(()=>(Jt(this._controller.signal),h.emit("layerview-destroy",{view:y,layerView:m}),y.emit("layerview-destroy",{view:y,layerView:m}),h.emit("layerview-create",{view:y,layerView:m}),y.emit("layerview-create",{view:y,layerView:m}),m)),new Promise((x,E)=>$s(this._controller.signal,()=>E(ei())))]),this.promise}}return null}destroy(){this._controller.abort();const{layerView:e}=this;if(e){const{layer:i,view:n}=this;i.emit("layerview-destroy",{view:n,layerView:e}),n.emit("layerview-destroy",{layer:i,layerView:e})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null}async start(){var s,h;if(this._started)return;this._started=!0;const{_controller:{signal:e},layer:i,view:n}=this;this._map=n.map;try{let f,m;if(await i.load({signal:e}),i.prefetchResources&&await i.prefetchResources({signal:e}),cce(i))f=await i.createLayerView(n,{signal:e});else{if(!this.layerViewImporter.hasLayerViewModule(i))throw new ce("layer:view-not-supported","No layerview implementation was found");const E=await this.layerViewImporter.importLayerView(i);Jt(e),f="default"in E?new E.default({layer:i,view:n}):new E({layer:i,view:n})}const y=()=>{m=Rt(m),f.destroyed||f.destroy(),f.layer=null,f.parent=null,f.view=null,this.done=!0};m=$s(e,y),Jt(e);try{await f.when()}catch(E){throw y(),E}if(!((h=(s=this._map)==null?void 0:s.allLayers)==null?void 0:h.includes(i)))return y(),void this._deferred.reject(new ce("view:no-layerview-for-layer","The layer has been removed from the map",{layer:i}));this.layerView=f,i.emit("layerview-create",{view:n,layerView:f}),n.emit("layerview-create",{layer:i,layerView:f}),this.done=!0,this._deferred.resolve(f)}catch(f){i.emit("layerview-create-error",{view:n,error:f}),n.emit("layerview-create-error",{layer:i,error:f}),this.done=!0,this._deferred.reject(new ce("layerview:create-error","layerview creation failed",{layer:i,error:f}))}}},Ys=class extends Oe{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new Jh,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var n;const i=(n=this.view.map)==null?void 0:n.allLayers;if(i)for(const s of i)this.layerViewImporter.hasLayerViewModule(s)&&this.layerViewImporter.importLayerView(s)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=Rs(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(ey(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var y,x,E;if(this.destroyed)return;const i=this.view.map;if(this._map!==i&&(this.clear(),this._map=i),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const n=new Set,s=[],h=this.view.ready,f=k=>{if(k!=null){for(const I of k)if(I){n.add(I);const P=this._layerLayerViewInfoMap.get(I);P&&h?P.start():P||this._recyclingInfoMap.has(I)||s.push(I),"layers"in I&&I.layers&&f(I.layers)}}};for(const k of this._rootCollectionNames)f(Kr(this,k));for(const[k,I]of this._layerLayerViewInfoMap)if(!n.has(k)){this._layerLayerViewInfoMap.delete(I.layer);const P=I.tryRecycle(s);P?(this.notifyChange("updating"),this._recyclingInfoMap.set(I.layer,I),P.then(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(I.layer),this._layerLayerViewInfoMap.set(I.layer,I),this._reschedule()}).catch(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(I.layer),I.destroy(),this._reschedule()})):I.destroy()}for(const[k,I]of this._recyclingInfoMap)n.has(k)||(this.notifyChange("updating"),this._recyclingInfoMap.delete(I.layer),I.destroy());for(const k of s)this._createLayerView(k);this._refreshCollections();const m=[(y=i==null?void 0:i.ground)==null?void 0:y.layers,(x=i==null?void 0:i.basemap)==null?void 0:x.baseLayers,(E=i==null?void 0:i.basemap)==null?void 0:E.referenceLayers,i==null?void 0:i.layers].filter(k=>!!k);n.forEach(k=>"layers"in k&&m.push(k.layers)),this.addHandles(m.map(k=>this._watchUpdatingTracking.addOnCollectionChange(()=>k,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.addHandles([Ns(()=>{var e,i;return(i=(e=this.view)==null?void 0:e.map)==null?void 0:i.allLayers},"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),Ee(()=>{const e=this.view,i=e==null?void 0:e.map;return[i==null?void 0:i.basemap,i==null?void 0:i.ground,i==null?void 0:i.layers,e==null?void 0:e.ready]},()=>this._reschedule(),Pi)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),k5(this._recyclingInfoMap),k5(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(ei()),this._workPromise=null)}get _layersToLayerViews(){const e=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&e.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(e)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||CZ(this._layerLayerViewInfoMap,e=>!e.done)||this._recyclingInfoMap.size>0}get updatingRemaining(){let e=0;for(const i of this._layerLayerViewInfoMap.values())i.done||++e;return e}clear(){this.destroyed||(k5(this._layerLayerViewInfoMap),this._refreshCollections())}async whenLayerView(e){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(e)){if(this._recyclingInfoMap.has(e))return this._recyclingInfoMap.get(e).promise;throw new ce("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e})}return this._layerLayerViewInfoMap.get(e).promise}isCreatingLayerViewsForLayer(e,i){var h;this.commitProperty("updatingRemaining");const n=this._layerLayerViewInfoMap.get(e);if(!(n!=null&&n.done))return!0;const s=n.layerView;return!(!s||!i||s.parent===i)||!!(n.done&&s&&"layers"in e&&((h=e.layers)!=null&&h.length))&&e.layers.some(f=>this.isCreatingLayerViewsForLayer(f,s))}_refreshCollections(){for(const[e,i]of this._layersToLayerViews)this._populateLayerViewsOwners(Kr(this,e),Kr(this,i),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(e,i,n){if(!e||!i)return void(i&&i.removeAll());let s=0;for(const h of e){const f=this._layerLayerViewInfoMap.get(h);if(!(f!=null&&f.layerView))continue;const m=f.layerView;m.layer=h,m.parent=n,i.at(s)!==m&&i.splice(s,0,m),"layers"in h&&oce(m)&&this._populateLayerViewsOwners(h.layers,m.layerViews,m),s+=1}s<i.length&&i.splice(s,i.length)}_createLayerView(e){e.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const i=new ace(e,this.view,this.layerViewImporter);i.promise.then(()=>this._refreshCollections(),n=>{n&&(Ir(n)||n.name==="cancelled:layerview-create")||Ae.getLogger(this).error(`Failed to create layerview for layer title:'${e.title??"no title"}', id:'${e.id??"no id"}' of type '${e.type}'.`,{layer:e,error:n}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(e,i),this.view.ready&&i.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};_([S()],Ys.prototype,"_workPromise",void 0),_([S({readOnly:!0})],Ys.prototype,"_watchUpdatingTracking",void 0),_([S({readOnly:!0})],Ys.prototype,"_layersToLayerViews",null),_([S({readOnly:!0})],Ys.prototype,"_rootCollectionNames",null),_([S()],Ys.prototype,"layerViewImporter",void 0),_([S()],Ys.prototype,"supportsGround",void 0),_([S({readOnly:!0})],Ys.prototype,"updating",null),_([S({readOnly:!0})],Ys.prototype,"updatingRemaining",null),_([S({constructOnly:!0})],Ys.prototype,"view",void 0),Ys=_([J("esri.views.LayerViewManager")],Ys);const lce=Ys;function cce(t){return"createLayerView"in t&&t.createLayerView!=null}let fs=class extends Oe{constructor(e){super(e),this.factor=1.5,this.offset=Ri(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};_([S({type:Number})],fs.prototype,"factor",void 0),_([S({nonNullable:!0})],fs.prototype,"offset",void 0),_([S()],fs.prototype,"position",void 0),_([S({type:Number,range:{min:0}})],fs.prototype,"size",void 0),_([S()],fs.prototype,"maskUrl",void 0),_([S()],fs.prototype,"maskEnabled",void 0),_([S()],fs.prototype,"overlayUrl",void 0),_([S()],fs.prototype,"overlayEnabled",void 0),_([S({readOnly:!0})],fs.prototype,"version",null),_([S({type:Boolean})],fs.prototype,"visible",void 0),fs=_([J("esri.views.Magnifier")],fs);const zF=fs;let Hb=class{constructor(e){this._observable=new R0,this._map=new Map(e)}get size(){return Ge(this._observable),this._map.size}clear(){this._map.size>0&&(this._map.clear(),this._observable.notify())}delete(e){const i=this._map.delete(e);return i&&this._observable.notify(),i}entries(){return Ge(this._observable),this._map.entries()}forEach(e,i){Ge(this._observable),this._map.forEach((n,s)=>e.call(i,n,s,this),i)}get(e){return Ge(this._observable),this._map.get(e)}has(e){return Ge(this._observable),this._map.has(e)}keys(){return Ge(this._observable),this._map.keys()}set(e,i){return this._map.set(e,i),this._observable.notify(),this}values(){return Ge(this._observable),this._map.values()}[Symbol.iterator](){return Ge(this._observable),this._map[Symbol.iterator]()}get[Symbol.toStringTag](){return this._map[Symbol.toStringTag]}};var _S;let lg=_S=class extends De{constructor(t){super(t),this.name=null,this.code=null}clone(){return new _S({name:this.name,code:this.code})}};_([S({type:String,json:{write:!0}})],lg.prototype,"name",void 0),_([S({type:[String,Number],json:{write:!0}})],lg.prototype,"code",void 0),lg=_S=_([J("esri.layers.support.CodedValue")],lg);const hce=new xn({inherited:"inherited",codedValue:"coded-value",range:"range"});let cg=class extends De{constructor(e){super(e),this.name=null,this.type=null}};_([S({type:String,json:{write:!0}})],cg.prototype,"name",void 0),_([Ze(hce)],cg.prototype,"type",void 0),cg=_([J("esri.layers.support.Domain")],cg);const e_=cg;var xS;let hg=xS=class extends e_{constructor(t){super(t),this.codedValues=null,this.type="coded-value"}getName(t){let e=null;if(this.codedValues){const i=String(t);this.codedValues.some(n=>(String(n.code)===i&&(e=n.name),!!e))}return e}clone(){return new xS({codedValues:_e(this.codedValues),name:this.name})}};_([S({type:[lg],json:{write:!0}})],hg.prototype,"codedValues",void 0),_([Ze({codedValue:"coded-value"})],hg.prototype,"type",void 0),hg=xS=_([J("esri.layers.support.CodedValueDomain")],hg);const FF=hg;var SS;let Vb=SS=class extends e_{constructor(t){super(t),this.type="inherited"}clone(){return new SS}};_([Ze({inherited:"inherited"})],Vb.prototype,"type",void 0),Vb=SS=_([J("esri.layers.support.InheritedDomain")],Vb);const jF=Vb;var TS;let ef=TS=class extends e_{constructor(t){super(t),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new TS({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};_([S({json:{type:[Number],read:{source:"range",reader:(t,e)=>{var i;return(i=e.range)==null?void 0:i[1]}},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(t,e,i){e[i]=[this.minValue||0,t]}}}})],ef.prototype,"maxValue",void 0),_([S({json:{type:[Number],read:{source:"range",reader:(t,e)=>{var i;return(i=e.range)==null?void 0:i[0]}},write:{target:"range",writer(t,e,i){e[i]=[t,this.maxValue||0]}}}})],ef.prototype,"minValue",void 0),_([Ze({range:"range"})],ef.prototype,"type",void 0),ef=TS=_([J("esri.layers.support.RangeDomain")],ef);const GF=ef,uce={key:"type",base:e_,typeMap:{range:GF,"coded-value":FF,inherited:jF}};function dce(t){if(!(t!=null&&t.type))return null;switch(t.type){case"range":return GF.fromJSON(t);case"codedValue":return FF.fromJSON(t);case"inherited":return jF.fromJSON(t)}return null}const pce=new xn({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var ES;const fce=new xn({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let Kn=ES=class extends De{constructor(t){super(t),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(t,{description:e}){let i=null;try{i=e?JSON.parse(e):null}catch{}return(i==null?void 0:i.value)??null}readValueType(t,{description:e}){let i=null;try{i=e?JSON.parse(e):null}catch{}return i?fce.fromJSON(i.fieldValueType):null}clone(){var t;return new ES({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:((t=this.domain)==null?void 0:t.clone())??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};_([S({type:String,json:{write:!0}})],Kn.prototype,"alias",void 0),_([S({type:[String,Number],json:{write:{allowNull:!0}}})],Kn.prototype,"defaultValue",void 0),_([S()],Kn.prototype,"description",void 0),_([kt("description")],Kn.prototype,"readDescription",null),_([S({types:uce,json:{read:{reader:dce},write:!0}})],Kn.prototype,"domain",void 0),_([S({type:Boolean,json:{write:!0}})],Kn.prototype,"editable",void 0),_([S({type:gi,json:{write:{overridePolicy:t=>({enabled:Number.isFinite(t)})}}})],Kn.prototype,"length",void 0),_([S({type:String,json:{write:!0}})],Kn.prototype,"name",void 0),_([S({type:Boolean,json:{write:!0}})],Kn.prototype,"nullable",void 0),_([Ze(pce)],Kn.prototype,"type",void 0),_([S()],Kn.prototype,"valueType",void 0),_([kt("valueType",["description"])],Kn.prototype,"readValueType",null),_([S({type:Boolean,json:{read:!1}})],Kn.prototype,"visible",void 0),Kn=ES=_([J("esri.layers.support.Field")],Kn);const gce=Kn;var MS;let tf=MS=class extends De{constructor(t){super(t),this.type="map-layer"}clone(){const{mapLayerId:t,gdbVersion:e}=this;return new MS({mapLayerId:t,gdbVersion:e})}};_([Ze({mapLayer:"map-layer"})],tf.prototype,"type",void 0),_([S({type:gi,json:{write:!0}})],tf.prototype,"mapLayerId",void 0),_([S({type:String,json:{write:!0}})],tf.prototype,"gdbVersion",void 0),tf=MS=_([J("esri.layers.support.source.MapLayerSource")],tf);var $S;let Yl=$S=class extends De{constructor(t){super(t),this.type="query-table"}clone(){const{workspaceId:t,query:e,oidFields:i,spatialReference:n,geometryType:s}=this,h={workspaceId:t,query:e,oidFields:i,spatialReference:(n==null?void 0:n.clone())??void 0,geometryType:s};return new $S(h)}};_([Ze({queryTable:"query-table"})],Yl.prototype,"type",void 0),_([S({type:String,json:{write:!0}})],Yl.prototype,"workspaceId",void 0),_([S({type:String,json:{write:!0}})],Yl.prototype,"query",void 0),_([S({type:String,json:{write:!0}})],Yl.prototype,"oidFields",void 0),_([S({type:Ke,json:{write:!0}})],Yl.prototype,"spatialReference",void 0),_([Ze(rQ)],Yl.prototype,"geometryType",void 0),Yl=$S=_([J("esri.layers.support.source.QueryTableDataSource")],Yl);var kS;let nf=kS=class extends De{constructor(t){super(t),this.type="raster"}clone(){const{workspaceId:t,dataSourceName:e}=this;return new kS({workspaceId:t,dataSourceName:e})}};_([Ze({raster:"raster"})],nf.prototype,"type",void 0),_([S({type:String,json:{write:!0}})],nf.prototype,"dataSourceName",void 0),_([S({type:String,json:{write:!0}})],nf.prototype,"workspaceId",void 0),nf=kS=_([J("esri.layers.support.source.RasterDataSource")],nf);var CS;let id=CS=class extends De{constructor(t){super(t),this.type="table"}clone(){const{workspaceId:t,gdbVersion:e,dataSourceName:i}=this;return new CS({workspaceId:t,gdbVersion:e,dataSourceName:i})}};_([Ze({table:"table"})],id.prototype,"type",void 0),_([S({type:String,json:{write:!0}})],id.prototype,"workspaceId",void 0),_([S({type:String,json:{write:!0}})],id.prototype,"gdbVersion",void 0),_([S({type:String,json:{write:!0}})],id.prototype,"dataSourceName",void 0),id=CS=_([J("esri.layers.support.source.TableDataSource")],id);var IS,AS;const mce=Ar()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let gs=IS=class extends De{constructor(t){super(t),this.type="join-table"}readLeftTableSource(t,e,i){return bk()(t,e,i)}castLeftTableSource(t){return Ac(OS(),t)}readRightTableSource(t,e,i){return bk()(t,e,i)}castRightTableSource(t){return Ac(OS(),t)}clone(){const{leftTableKey:t,rightTableKey:e,leftTableSource:i,rightTableSource:n,joinType:s}=this,h={leftTableKey:t,rightTableKey:e,leftTableSource:(i==null?void 0:i.clone())??void 0,rightTableSource:(n==null?void 0:n.clone())??void 0,joinType:s};return new IS(h)}};_([Ze({joinTable:"join-table"})],gs.prototype,"type",void 0),_([S({type:String,json:{write:!0}})],gs.prototype,"leftTableKey",void 0),_([S({type:String,json:{write:!0}})],gs.prototype,"rightTableKey",void 0),_([S({json:{write:!0}})],gs.prototype,"leftTableSource",void 0),_([kt("leftTableSource")],gs.prototype,"readLeftTableSource",null),_([Hi("leftTableSource")],gs.prototype,"castLeftTableSource",null),_([S({json:{write:!0}})],gs.prototype,"rightTableSource",void 0),_([kt("rightTableSource")],gs.prototype,"readRightTableSource",null),_([Hi("rightTableSource")],gs.prototype,"castRightTableSource",null),_([Ze(mce)],gs.prototype,"joinType",void 0),gs=IS=_([J("esri.layers.support.source.JoinTableDataSource")],gs);let L5=null;function bk(){return L5||(L5=vT({types:OS()})),L5}let D5=null;function OS(){return D5||(D5={key:"type",base:null,typeMap:{"data-layer":fc,"map-layer":tf}}),D5}const yce={key:"type",base:null,typeMap:{"join-table":gs,"query-table":Yl,raster:nf,table:id}};let fc=AS=class extends De{constructor(t){super(t),this.type="data-layer"}clone(){const{fields:t,dataSource:e}=this;return new AS({fields:t,dataSource:e})}};_([Ze({dataLayer:"data-layer"})],fc.prototype,"type",void 0),_([S({type:[gce],json:{write:!0}})],fc.prototype,"fields",void 0),_([S({types:yce,json:{write:!0}})],fc.prototype,"dataSource",void 0),fc=AS=_([J("esri.layers.support.source.DataLayerSource")],fc),fc.from=_n(fc);let nd=class extends ts(De){constructor(e){super(e),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};_([S({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],nd.prototype,"onFields",void 0),_([S({type:String,json:{write:!0}})],nd.prototype,"operator",void 0),_([S({type:String,json:{write:!0}})],nd.prototype,"searchTerm",void 0),_([S({type:String,json:{write:!0}})],nd.prototype,"searchType",void 0),nd=_([J("esri.rest.support.FullTextSearch")],nd);const UF=nd;var PS;const wk=new xn({upperLeft:"upper-left",lowerLeft:"lower-left"});let rd=PS=class extends De{constructor(t){super(t),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new PS(_e({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};_([S({type:Nt,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],rd.prototype,"extent",void 0),_([S({type:["view","edit"],json:{write:!0}})],rd.prototype,"mode",void 0),_([S({type:String,json:{read:wk.read,write:wk.write}})],rd.prototype,"originPosition",void 0),_([S({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],rd.prototype,"tolerance",void 0),rd=PS=_([J("esri.rest.support.QuantizationParameters")],rd);const BF=rd,vce=new xn({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});var RS;const _k=new xn({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let Ho=RS=class extends De{constructor(t){super(t),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(t,e){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(e.statisticParameters=_e(t))}clone(){return new RS({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:_e(this.statisticParameters)})}};_([S({type:Number,json:{write:!0}})],Ho.prototype,"maxPointCount",void 0),_([S({type:Number,json:{write:!0}})],Ho.prototype,"maxRecordCount",void 0),_([S({type:Number,json:{write:!0}})],Ho.prototype,"maxVertexCount",void 0),_([S({type:String,json:{write:!0}})],Ho.prototype,"onStatisticField",void 0),_([S({type:String,json:{write:!0}})],Ho.prototype,"outStatisticFieldName",void 0),_([S({type:String,json:{read:{source:"statisticType",reader:_k.read},write:{target:"statisticType",writer:_k.write}}})],Ho.prototype,"statisticType",void 0),_([S({type:Object})],Ho.prototype,"statisticParameters",void 0),_([yt("statisticParameters")],Ho.prototype,"writeStatisticParameters",null),Ho=RS=_([J("esri.rest.support.StatisticDefinition")],Ho);const bce=Ho;var qb;const wce=new xn({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let He=qb=class extends De{static from(t){return I0(qb,t)}constructor(t){super(t),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(t){return typeof t=="number"||typeof t=="object"?t:null}writeHistoricMoment(t,e){e.historicMoment=t&&t.getTime()}writeParameterValues(t,e){if(t){const i={};for(const n in t){const s=t[n];Array.isArray(s)?i[n]=s.map(h=>h instanceof Date?h.getTime():h):s instanceof Date?i[n]=s.getTime():i[n]=s}e.parameterValues=i}}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10,e.where="1=1"}writeWhere(t,e){e.where=t||"1=1"}clone(){return new qb(_e({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment!=null?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};He.MAX_MAX_RECORD_COUNT_FACTOR=5,_([S({json:{write:!0}})],He.prototype,"aggregateIds",void 0),_([S({type:Boolean,json:{write:!0}})],He.prototype,"cacheHint",void 0),_([S({type:Boolean,json:{default:!1,write:!0}})],He.prototype,"compactGeometryEnabled",void 0),_([S({json:{write:!0}})],He.prototype,"datumTransformation",void 0),_([Hi("datumTransformation")],He.prototype,"castDatumTransformation",null),_([S({type:Boolean,json:{default:!1,write:!0}})],He.prototype,"defaultSpatialReferenceEnabled",void 0),_([S({type:Number,json:{write:{overridePolicy:t=>({enabled:t>0})}}})],He.prototype,"distance",void 0),_([S({type:fc,json:{write:!0}})],He.prototype,"dynamicDataSource",void 0),_([S({type:String,json:{write:!0}})],He.prototype,"formatOf3DObjects",void 0),_([S({type:[UF],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],He.prototype,"fullText",void 0),_([S({type:String,json:{write:!0}})],He.prototype,"gdbVersion",void 0),_([S({types:S3,json:{read:Yd,write:!0}})],He.prototype,"geometry",void 0),_([S({type:Number,json:{write:!0}})],He.prototype,"geometryPrecision",void 0),_([S({type:[String],json:{write:!0}})],He.prototype,"groupByFieldsForStatistics",void 0),_([S({type:String,json:{write:!0}})],He.prototype,"having",void 0),_([S({type:Date})],He.prototype,"historicMoment",void 0),_([yt("historicMoment")],He.prototype,"writeHistoricMoment",null),_([S({type:Number,json:{write:!0}})],He.prototype,"maxAllowableOffset",void 0),_([S({type:Number,cast:t=>t<1?1:t>He.MAX_MAX_RECORD_COUNT_FACTOR?He.MAX_MAX_RECORD_COUNT_FACTOR:t,json:{write:{overridePolicy:t=>({enabled:t>1})}}})],He.prototype,"maxRecordCountFactor",void 0),_([S({type:["xyFootprint"],json:{write:!0}})],He.prototype,"multipatchOption",void 0),_([S({type:Number,json:{read:{source:"resultRecordCount"}}})],He.prototype,"num",void 0),_([S({json:{write:!0}})],He.prototype,"objectIds",void 0),_([S({type:[String],json:{write:!0}})],He.prototype,"orderByFields",void 0),_([S({type:[String],json:{write:!0}})],He.prototype,"outFields",void 0),_([S({type:Ke,json:{name:"outSR",write:!0}})],He.prototype,"outSpatialReference",void 0),_([S({type:[bce],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],He.prototype,"outStatistics",void 0),_([S({json:{write:!0}})],He.prototype,"parameterValues",void 0),_([yt("parameterValues")],He.prototype,"writeParameterValues",null),_([S({type:Ne,json:{write:!0}})],He.prototype,"pixelSize",void 0),_([S({type:BF,json:{write:!0}})],He.prototype,"quantizationParameters",void 0),_([S({type:[Object],json:{write:!0}})],He.prototype,"rangeValues",void 0),_([S({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],He.prototype,"relationParameter",void 0),_([S({type:String,json:{write:!0}})],He.prototype,"resultType",void 0),_([S({type:Boolean,json:{default:!1,write:!0}})],He.prototype,"returnCentroid",void 0),_([S({type:Boolean,json:{default:!1,write:!0}})],He.prototype,"returnDistinctValues",void 0),_([S({type:Boolean,json:{default:!0,write:!0}})],He.prototype,"returnExceededLimitFeatures",void 0),_([S({type:Boolean,json:{write:!0}})],He.prototype,"returnGeometry",void 0),_([S({type:Boolean,json:{default:!1,write:!0}})],He.prototype,"returnQueryGeometry",void 0),_([S({type:Boolean,json:{default:!1,write:!0}})],He.prototype,"returnM",void 0),_([S({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],He.prototype,"returnZ",void 0),_([S({type:Ke,json:{write:!0}})],He.prototype,"sourceSpatialReference",void 0),_([Ze(vce,{ignoreUnknown:!1,name:"spatialRel"})],He.prototype,"spatialRelationship",void 0),_([S({type:Number,json:{read:{source:"resultOffset"}}})],He.prototype,"start",void 0),_([yt("start"),yt("num")],He.prototype,"writeStart",null),_([S({type:String,json:{write:!0}})],He.prototype,"sqlFormat",void 0),_([S({type:String,json:{write:!0}})],He.prototype,"text",void 0),_([S({type:AE,json:{write:!0}})],He.prototype,"timeExtent",void 0),_([S({type:Boolean,json:{default:!1,write:!0}})],He.prototype,"timeReferenceUnknownClient",void 0),_([Ze(wce,{ignoreUnknown:!1}),S({json:{write:{overridePolicy(t){return{enabled:!!t&&this.distance!=null&&this.distance>0}}}}})],He.prototype,"units",void 0),_([S({type:String,json:{write:{overridePolicy(t){return{enabled:t!=null||this.start!=null&&this.start>0}}}}})],He.prototype,"where",void 0),_([yt("where")],He.prototype,"writeWhere",null),He=qb=_([J("esri.rest.support.Query")],He);const NS=He;function yv(t){return!!(t!=null&&typeof t=="object"&&"createQuery"in t&&t.createQuery&&"on"in t&&t.on)}let Xl=class extends un.EventedAccessor{constructor(e){super(e),this._selectionMap=new Hb,this._sources=new Pe,this._trashCan=[],this._layerEditHandles=new Pe,this._vizTaskId=0,this.showHighlight=!0}initialize(){this.addHandles([Ee(()=>[this.view,this.showHighlight],()=>this._refreshVisualization()),Ns(()=>this.sources,"change",i=>{const n=this._selectionMap;for(const s of i.removed)n.delete(s);this._refreshListeners(),this._refreshVisualization()},{onListenerAdd:()=>this._refreshListeners()})]);const e=new Pe;this.view.when().then(()=>{this.view.map&&(this.view.map.allLayers.flatten(i=>"sublayers"in i&&i.sublayers?i.sublayers:null).forEach(i=>{(yv(i)&&!cse(i)||Gu(i))&&e.add(i)}),this.sources=e)})}destroy(){this._layerEditHandles.drain(Rt)}get selections(){return Array.from(this._selectionMap.entries()).map(e=>{const[i,n]=e;return{layer:i,selection:[...n.selection]}})}get count(){let e=0;for(const i of this._selectionMap.values())e+=i.selection.length;return e}get hasSelection(){return this.count>0}get sources(){return this._sources}set sources(e){cu(e,this._sources)}async getSelectedFeatures(e,i={},n="layerView"){const{view:s,selections:h}=this,f=(e!==void 0?h.filter(m=>e.includes(m.layer)):h).filter(m=>m.selection.length>0).map(async m=>{const{layer:y,selection:x}=m,E=Gu(y)?y.parent:y;if(E==null||!Sk(E))return null;if(n==="layer")return Tk(E,x,i);if(xk(E))return null;const k=await s.whenLayerView(E).catch(()=>null);return k?Tk(k,x,i):null});return(await Promise.all(f)).filter(m=>m!=null)}updateSelection(e){const i=new Map;for(const[h,f]of this._selectionMap)i.set(h,[...f.selection]);let n=!1;const s=e.current.concat(e.added);for(const h of s){const f=h.sourceLayer,m=h.getObjectId();if(this.sources.includes(f)&&(yv(f)||Gu(f))&&m!==null){const y=p3(i,f,()=>[]);y.includes(m)||(y.push(m),n=!0)}}for(const h of e.removed){const f=h.sourceLayer,m=h.getObjectId();if(this.sources.includes(f)&&(yv(f)||Gu(f))&&m!==null){const y=i.get(f),x=y==null?void 0:y.indexOf(m);x!==void 0&&x>=0&&(y==null||y.splice(x,1),n=!0)}}if(n){const{_selectionMap:h,_trashCan:f}=this,m=[];for(const[y,x]of i){const E=h.get(y);E!==void 0&&f.push(E),h.set(y,{selection:x}),m.push({layer:y,selection:x,...Bx(E!==void 0?E.selection:[],x)})}this._onSelectionChange(m)}}setSelection(e,i){this._setSelection(e,i)}getSelection(e){const i=this._selectionMap.get(e);return i==null?void 0:i.selection}appendToSelection(e,i){const n=this._selectionMap.get(e),s=n!==void 0?[...n.selection]:[];for(const h of i)s.includes(h)||s.push(h);this._setSelection(e,s)}removeFromSelection(e,i){const n=this._selectionMap.get(e);if(!n)return;const s=[];for(const h of n.selection)i.includes(h)||s.push(h);this._setSelection(e,s)}toggleInSelection(e,i){const n=this._selectionMap.get(e);if(!n||n.selection.length===0)return void this._setSelection(e,i);const s=new Set(n.selection),h=new Set(i),f=pZ(s,h);this._setSelection(e,Array.from(f))}clear(){const e=this._selectionMap.values();this._trashCan.push(...e);const i=[];for(const[n,s]of this._selectionMap.entries())i.push({layer:n,added:[],removed:[...s.selection],selection:[]});this._selectionMap.clear(),this._onSelectionChange(i)}_onSelectionChange(e){this._refreshVisualization(),this.emit("selection-change",{view:this.view,changes:e})}_refreshVisualization(){var f;if(this.view==null||this.sources==null)return;for(this._vizTaskId++;this._trashCan.length>0;){const m=this._trashCan.pop();(f=m==null?void 0:m.highlightHandle)==null||f.remove()}const{sources:e,view:i,_selectionMap:n,showHighlight:s}=this,h=this._vizTaskId;for(const m of e){const y=n.get(m),x=Gu(m)?m.parent:m;if(x!=null&&Sk(x)){if(xk(x))continue;i.whenLayerView(x).then(E=>{var k;(k=y==null?void 0:y.highlightHandle)==null||k.remove(),y!=null&&s&&h===this._vizTaskId&&"highlight"in E&&typeof E.highlight=="function"&&y.selection.length>0&&(y.highlightHandle=E.highlight(y.selection,"selection"))}).catch(()=>{var E;(E=y==null?void 0:y.highlightHandle)==null||E.remove()})}}}_refreshListeners(){this._layerEditHandles.drain(Rt);for(const e of this.sources){const i=Gu(e)?e.parent:e;if(i!=null&&yv(i)){const n=i.on("edits",s=>{this._handleEditChanges(s,e)});this._layerEditHandles.push(n)}}}_handleEditChanges(e,i){if(e.deletedFeatures!==void 0&&e.deletedFeatures.length>0&&this._selectionMap.has(i)){const n=e.deletedFeatures.filter(s=>s.error==null).map(s=>s.objectId).filter(Yi);this.removeFromSelection(i,n)}}_setSelection(e,i){if(!this.sources.includes(e))throw new Error(`Cannot set selection on layer ${e.title} because it is not in 'sources'`);const n=this._selectionMap.get(e);if(n===void 0||!xce(n,{selection:i})){n!==void 0&&this._trashCan.push(n),this._selectionMap.set(e,{selection:[...i]});const s={layer:e,selection:[...i],...Bx(n!==void 0?n.selection:[],i)};this._onSelectionChange([s])}}};_([S({readOnly:!0,nonNullable:!0})],Xl.prototype,"selections",null),_([S({readOnly:!0,nonNullable:!0})],Xl.prototype,"count",null),_([S({constructOnly:!0,nonNullable:!0})],Xl.prototype,"view",void 0),_([S({readOnly:!0,nonNullable:!0})],Xl.prototype,"hasSelection",null),_([S()],Xl.prototype,"showHighlight",void 0),_([S()],Xl.prototype,"sources",null),Xl=_([J("esri.views.SelectionManager")],Xl);const xk=t=>{var e;return Gu(t)?((e=t.parent)==null?void 0:e.isTable)===!0:t.isTable},_ce=t=>t.layer!==void 0,Sk=t=>(t==null?void 0:t.when)!==void 0,xce=(t,e)=>{if(t==null&&e==null)return!0;if(t!=null&&e==null||t==null&&e!=null)return!1;if(t!=null&&e!=null&&t.selection!=null&&e.selection!=null){const i=[...t.selection],n=[...e.selection];if(i.length!==n.length)return!1;i.sort(),n.sort();for(let s=0;s<i.length;s++)if(i[s]!==n[s])return!1}return!0},Tk=async(t,e,i={})=>{let n;if(_ce(t)){const s=t;n=s===void 0?null:await s.queryFeatures(new NS({...i,objectIds:e})).then(h=>({data:h,layer:t.layer}))}else{const s=t;n=s===void 0?null:await s.queryFeatures(new NS({...i,objectIds:e})).then(h=>({data:h,layer:s}))}return n},Sce=Xl;let ug=class extends ts(Oe){constructor(e){super(e),this.accentColor=new ht([255,127,0]),this.textColor=new ht([255,255,255])}};_([S({type:ht,nonNullable:!0})],ug.prototype,"accentColor",void 0),_([S({type:ht,nonNullable:!0})],ug.prototype,"textColor",void 0),ug=_([J("esri.views.Theme")],ug);const LS=ug;var Ek;(function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right"})(Ek||(Ek={}));const HF=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],VF={};function qF(t){return!!VF[t]}function Tce(t){for(const e of t)if(!qF(e))return!1;return!0}HF.forEach(t=>{VF[t]=!0});let Ece=class{constructor(e){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=e,this.inputManager=null}connect(e){e&&this.disconnect(),this.inputManager=e,this._handlers.forEach(({handler:i,priority:n},s)=>{var h;return(h=this.inputManager)==null?void 0:h.installHandlers(s,[i],n)})}disconnect(){this.inputManager&&this._handlers.forEach((e,i)=>{var n;return(n=this.inputManager)==null?void 0:n.uninstallHandlers(i)}),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(e,i,n,s){const h=Array.isArray(e)?e:e.split(",");if(!Tce(h))return h.some(qF)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let f,m;Array.isArray(i)?m=i:(f=i,m=[]),typeof n=="function"?f=n:s=n,s=s??Wt.DEFAULT;const y=this._createUniqueGroupName(),x=new Mce(this.view,h,m,f);this._handlers.set(y,{handler:x,priority:s});for(const E of h){const k=this._handlerCounts.get(E)||0;this._handlerCounts.set(E,k+1)}return this.inputManager&&this.inputManager.installHandlers(y,[x],s),ct(()=>this._removeHandler(y,h))}hasHandler(e){return!!this._handlerCounts.get(e)}_removeHandler(e,i){if(this._handlers.has(e)){this._handlers.delete(e);for(const n of i){const s=this._handlerCounts.get(n);s===void 0||(s===1?this._handlerCounts.delete(n):this._handlerCounts.set(n,s-1))}}this.inputManager&&this.inputManager.uninstallHandlers(e)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},Mce=class extends Tn{constructor(e,i,n,s){super(!0),this._latestDragStart=void 0,this.view=e;for(const h of i)switch(h){case"click":this.registerIncoming("click",n,f=>s(Cce(e,f)));break;case"double-click":this.registerIncoming("double-click",n,f=>s(Ice(e,f)));break;case"immediate-click":this.registerIncoming("immediate-click",n,f=>s(Ace(e,f)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",n,f=>s(Oce(e,f)));break;case"hold":this.registerIncoming("hold",n,f=>s(Pce(e,f)));break;case"drag":this.registerIncoming("drag",n,f=>{const m=this._wrapDrag(f);m&&s(m)});break;case"key-down":this.registerIncoming("key-down",n,f=>s(Rce(f)));break;case"key-up":this.registerIncoming("key-up",n,f=>s(Nce(f)));break;case"pointer-down":this.registerIncoming("pointer-down",n,f=>s(d1(f,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",n,f=>s(d1(f,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",n,f=>s(d1(f,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",n,f=>s(Lce(f)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",n,f=>s(Dce(f)));break;case"pointer-enter":this.registerIncoming("pointer-enter",n,f=>s(d1(f,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",n,f=>s(d1(f,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",n,f=>{s(zce(f))});break;case"focus":this.registerIncoming("focus",n,f=>{s($ce(f))});break;case"blur":this.registerIncoming("blur",n,f=>{s(kce(f))})}}_wrapDrag(e){const i=e.data,{x:n,y:s}=i.center,{action:h,pointerType:f,button:m}=i;if(h==="start"&&(this._latestDragStart=i),!this._latestDragStart)return;const y=i.pointer.native,x=i.buttons,{cancelable:E,timestamp:k}=e,I={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return h==="end"&&(this._latestDragStart=void 0),{type:"drag",action:h,x:n,y:s,origin:I,pointerType:f,button:m,buttons:x,radius:i.radius,angle:mN(i.angle),native:y,timestamp:k,cancelable:E,stopPropagation:()=>e.stopPropagation(),async:P=>e.async(P),preventDefault:()=>e.preventDefault()}}};function $ce(t){return{type:"focus",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}function kce(t){return{type:"blur",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}function Cce(t,e){const{pointerType:i,button:n,buttons:s,x:h,y:f,native:m,eventId:y}=e.data,{cancelable:x,timestamp:E}=e;return{type:"click",pointerType:i,button:n,buttons:s,x:h,y:f,native:m,timestamp:E,screenPoint:Ri(h,f),mapPoint:_y(t,h,f),eventId:y,cancelable:x,stopPropagation:()=>e.stopPropagation(),async:k=>e.async(k),preventDefault:()=>e.preventDefault()}}function Ice(t,e){const{pointerType:i,button:n,buttons:s,x:h,y:f,native:m,eventId:y}=e.data,{cancelable:x,timestamp:E}=e;return{type:"double-click",pointerType:i,button:n,buttons:s,x:h,y:f,native:m,timestamp:E,mapPoint:_y(t,h,f),eventId:y,cancelable:x,stopPropagation:()=>e.stopPropagation(),async:k=>e.async(k),preventDefault:()=>e.preventDefault()}}function Ace(t,e){const{pointerType:i,button:n,buttons:s,x:h,y:f,native:m,eventId:y}=e.data,x=m.pointerId,{cancelable:E,timestamp:k}=e;return{type:"immediate-click",pointerId:x,pointerType:i,button:n,buttons:s,x:h,y:f,native:m,timestamp:k,mapPoint:_y(t,h,f),eventId:y,cancelable:E,stopPropagation:()=>e.stopPropagation(),async:I=>e.async(I),preventDefault:()=>e.preventDefault()}}function Oce(t,e){const{pointerType:i,button:n,buttons:s,x:h,y:f,native:m,eventId:y}=e.data,x=m.pointerId,{cancelable:E,timestamp:k}=e;return{type:"immediate-double-click",pointerId:x,pointerType:i,button:n,buttons:s,x:h,y:f,native:m,timestamp:k,mapPoint:_y(t,h,f),eventId:y,cancelable:E,stopPropagation:()=>e.stopPropagation(),async:I=>e.async(I),preventDefault:()=>e.preventDefault()}}function Pce(t,e){const{pointerType:i,button:n,buttons:s,x:h,y:f,native:m}=e.data,{cancelable:y,timestamp:x}=e;return{type:"hold",pointerType:i,button:n,buttons:s,x:h,y:f,native:m,timestamp:x,mapPoint:_y(t,h,f),cancelable:y,stopPropagation:()=>e.stopPropagation(),async:E=>e.async(E),preventDefault:()=>e.preventDefault()}}function _y(t,e,i){return t.toMap(Ri(e,i),{exclude:[]})}function Rce(t){const{key:e,repeat:i,native:n}=t.data,{cancelable:s,timestamp:h}=t;return{type:"key-down",key:e,repeat:i,native:n,timestamp:h,cancelable:s,stopPropagation:()=>t.stopPropagation(),async:f=>t.async(f),preventDefault:()=>t.preventDefault()}}function Nce(t){const{key:e,native:i}=t.data,{cancelable:n,timestamp:s}=t;return{type:"key-up",key:e,native:i,timestamp:s,cancelable:n,stopPropagation:()=>t.stopPropagation(),async:h=>t.async(h),preventDefault:()=>t.preventDefault()}}function d1(t,e){const{x:i,y:n,button:s,buttons:h,native:f,eventId:m}=t.data,y=f.pointerId,x=f.pointerType,{cancelable:E,timestamp:k}=t;return{type:e,x:i,y:n,pointerId:y,pointerType:x,button:s,buttons:h,native:f,timestamp:k,eventId:m,cancelable:E,stopPropagation:()=>t.stopPropagation(),async:I=>t.async(I),preventDefault:()=>t.preventDefault()}}function Lce(t){const{x:e,y:i,buttons:n,native:s,eventId:h}=t.data.currentEvent,{button:f}=t.data.startEvent,m=t.data.startEvent.native.pointerId,y=t.data.startEvent.native.pointerType,x=t.data.action,E={x:t.data.startEvent.x,y:t.data.startEvent.y},{cancelable:k,timestamp:I}=t;return{type:"pointer-drag",x:e,y:i,pointerId:m,pointerType:y,button:f,buttons:n,action:x,origin:E,native:s,timestamp:I,eventId:h,cancelable:k,stopPropagation:()=>t.stopPropagation(),async:P=>t.async(P),preventDefault:()=>t.preventDefault()}}function Dce(t){const{cancelable:e,data:i,timestamp:n}=t,{x:s,y:h,deltaY:f,native:m}=i;return{type:"mouse-wheel",x:s,y:h,deltaY:f,native:m,timestamp:n,cancelable:e,stopPropagation:()=>t.stopPropagation(),async:y=>t.async(y),preventDefault:()=>t.preventDefault()}}function zce(t){const{action:e,state:i,device:n}=t.data,{cancelable:s,timestamp:h}=t,{buttons:f,axes:m}=i;return{type:"gamepad",device:n,timestamp:h,action:e,buttons:f,axes:m,cancelable:s,stopPropagation:()=>t.stopPropagation(),async:y=>t.async(y),preventDefault:()=>t.preventDefault()}}var oo,Mk,$k;(function(t){t[t.USER=0]="USER",t[t.MANAGER=1]="MANAGER"})(oo||(oo={})),function(t){t[t.None=0]="None",t[t.Unfocused=1]="Unfocused",t[t.Focused=2]="Focused",t[t.Unselected=4]="Unselected",t[t.Selected=8]="Selected",t[t.All=15]="All"}(Mk||(Mk={})),function(t){t[t.None=0]="None",t[t.Custom1=16]="Custom1",t[t.Custom2=32]="Custom2",t[t.Custom3=64]="Custom3",t[t.Custom4=128]="Custom4",t[t.Custom5=256]="Custom5",t[t.Custom6=512]="Custom6",t[t.Custom7=1024]="Custom7",t[t.Custom8=2048]="Custom8",t[t.Custom9=4096]="Custom9",t[t.Custom10=8192]="Custom10",t[t.Custom11=16384]="Custom11",t[t.Custom12=32768]="Custom12",t[t.All=65520]="All"}($k||($k={}));function Fce(t){return[t.on("before-add",e=>{const i=e.item;if(i==null||t.includes(i))return Ae.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void e.preventDefault();i.onAdd()}),t.on("after-remove",e=>{const i=e.item;i.active&&(i.view.activeTool=null),i.destroy()})]}function DS(t){return t.visible&&t.getEditableFlag!=null&&t.getEditableFlag(oo.USER)&&t.getEditableFlag(oo.MANAGER)}function io(t){return Ri(t.x,t.y)}function WF(t,e){var n;const i=(n=t instanceof HTMLElement?t:t.surface)==null?void 0:n.getBoundingClientRect();return i?Ri(e.clientX-i.left,e.clientY-i.top):Ri(0,0)}function KF(t,e){return e instanceof Event?WF(t,e):io(e)}function ZF(t){if(t instanceof Event)return!0;if(typeof t=="object"&&"type"in t)switch(t.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let jce=class{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._externallyDragging=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(e,i){const n=()=>e.stopPropagation();switch(e.type){case"pointer-move":Ck(e.pointerType)&&this._pointerLocations.set(e.pointerId,{x:e.x,y:e.y,pointerType:e.pointerType});break;case"drag":this._grabbedManipulators.size>0?this._stopDrag=!0:e.action==="start"?this._externallyDragging=!0:e.action==="end"&&(this._externallyDragging=!1),this._stopDrag&&(n(),e.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!Ik(e))break;const s=io(e),h=kp(s,e.pointerType,i.forEachTool);if(h==null)break;const f=h.manipulator,m=h.tool;f==null||m==null||!f.interactive||f.grabbable&&f.grabbableForEvent(e)||!f.grabbing||f.dragging||this._releaseManipulatorBeforeDragging(f,e,i),f!=null&&m!=null&&f.interactive&&f.grabbable&&f.grabbableForEvent(e)&&!f.grabbing&&(this._grabbedManipulators.set(e.pointerId,{manipulator:f,tool:m,start:s,pointerType:e.pointerType}),this._grabbedManipulators.size===1&&i.activeTool==null&&(this._revertToNullActiveTool=!0,i.setActiveTool(h.tool)),f.grabbing=!0,f.events.emit("grab-changed",{action:"start",pointerType:e.pointerType,screenPoint:s}),n());break}case"pointer-up":this._draggedManipulators.has(e.pointerId)||this._handlePointerEnd(e,i);break;case"pointer-drag":{if(!Ik(e))break;const s=this._grabbedManipulators.get(e.pointerId),h=s==null?void 0:s.manipulator,f=s==null?void 0:s.tool;if(h==null||f==null)break;const m=io(e);m.x=hr(m.x,0,i.view.width),m.y=hr(m.y,0,i.view.height);const y=s.start,x=this._draggedManipulators.get(e.pointerId);switch(e.action){case"start":case"update":e.action!=="update"&&this._grabbedManipulators.size!==1||(h.dragging=!0,x?h.events.emit("drag",{action:"update",start:y,screenPoint:m}):h.events.emit("drag",{action:"start",start:y,screenPoint:m,pointerType:e.pointerType}),this._draggedManipulators.set(e.pointerId,{tool:f,manipulator:h,start:y}));break;case"end":h.dragging=!1,x&&h.events.emit("drag",{action:"end",start:y,screenPoint:m}),this._draggedManipulators.delete(e.pointerId),this._handlePointerEnd(e,i)}n();break}case"immediate-click":{const s=io(e),h=kp(s,e.pointerType,i.forEachTool);if(Gce(e)||i.forEachTool(x=>{if((h==null||h.tool!==x||x.automaticManipulatorSelection)&&x.manipulators){let E=!1;x.manipulators.forEach(({manipulator:k})=>{k.selected&&(k.selected=!1,E=!0)}),E&&x.onManipulatorSelectionChanged&&x.onManipulatorSelectionChanged()}}),h==null)break;const{manipulator:f,tool:m}=h;if(!f.interactive)break;f.selectable&&m.automaticManipulatorSelection&&(f.selected=!f.selected,m.onManipulatorSelectionChanged&&m.onManipulatorSelectionChanged());const y=e.native.shiftKey;f.events.emit("immediate-click",{screenPoint:s,button:e.button,pointerType:e.pointerType,shiftKey:y,stopPropagation:n}),z5(f,n);break}case"click":{const s=io(e),h=kp(s,e.pointerType,i.forEachTool),f=h==null?void 0:h.manipulator;if(f==null||!f.interactive)break;const m=e.native.shiftKey;f.events.emit(e.type,{screenPoint:s,button:e.button,pointerType:e.pointerType,shiftKey:m}),n();break}case"double-click":{const s=io(e),h=kp(s,e.pointerType,i.forEachTool),f=h!=null?h.manipulator:null;if(f==null||!f.interactive)break;const m=e.native.shiftKey;f.events.emit("double-click",{screenPoint:s,button:e.button,pointerType:e.pointerType,shiftKey:m,stopPropagation:n}),z5(f,n);break}case"immediate-double-click":{const s=io(e),h=kp(s,e.pointerType,i.forEachTool),f=h!=null?h.manipulator:null;if(f==null||!f.interactive)break;const m=e.native.shiftKey;f.events.emit("immediate-double-click",{screenPoint:s,button:e.button,pointerType:e.pointerType,shiftKey:m,stopPropagation:n}),e.pointerType==="mouse"&&z5(f,n);break}}this._onFocusChange(i.forEachTool)}_releaseManipulatorBeforeDragging(e,i,n){e.grabbing=!1,e.events.emit("grab-changed",{action:"end",pointerType:i.pointerType,screenPoint:io(i)}),this._grabbedManipulators.forEach(({manipulator:s},h)=>{s===e&&this._grabbedManipulators.delete(h)}),this._afterManipulatorRelease(n.setActiveTool)}_handlePointerEnd(e,i){var s;const n=(s=this._grabbedManipulators.get(e.pointerId))==null?void 0:s.manipulator;n!=null&&n.grabbing&&(n.grabbing=!1,n.events.emit("grab-changed",{action:"end",pointerType:e.pointerType,screenPoint:io(e)}),this._grabbedManipulators.delete(e.pointerId),this._afterManipulatorRelease(i.setActiveTool))}_onFocusChange(e){this._updateCursor(),this._updateFocusedManipulatorTools(e)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=kk(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=kk(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(e){const i=new Set,n=new Set;this._grabbedManipulators.forEach(({tool:s})=>{i.add(s)}),this._hoveredManipulators.forEach(({tool:s})=>{n.add(s)}),e(s=>{s.hasGrabbedManipulators=i.has(s),s.hasHoveredManipulators=n.has(s);const h=this._grabbedManipulators.values(),f=vK(h,({tool:m})=>m===s);s.firstGrabbedManipulator=f!=null?f.manipulator:null})}clearPointers(e,{forEachTool:i,setActiveTool:n},s=!0,h){const f=(m,y)=>m===e&&(h==null||h===y);this._grabbedManipulators.forEach(({tool:m,manipulator:y,pointerType:x},E)=>{f(m,y)&&(this._grabbedManipulators.delete(E),y.grabbing=!1,y.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:x}))}),this._draggedManipulators.forEach(({tool:m,manipulator:y},x)=>{f(m,y)&&(this._draggedManipulators.delete(x),y.dragging=!1,y.events.emit("drag",{action:"cancel"}))}),s&&this._hoveredManipulators.forEach(({tool:m,manipulator:y},x)=>{f(m,y)&&(this._hoveredManipulators.delete(x),y.hovering=!1)}),this._afterManipulatorRelease(n),this._onFocusChange(i)}updateHoveredStateFromKnownPointers(e){this._pointerLocations.forEach((i,n)=>{this._updateHoveredStateForPointerAtScreenPosition(Ri(i.x,i.y),n,i.pointerType,e)})}handleHoverEvent(e,i){const n=e.type;n!=="pointer-up"&&n!=="immediate-click"&&n!=="pointer-move"||!Ck(e.pointerType)||(n!=="pointer-up"&&this._externallyDragging?this._clearHoveredManipulatorStates(e.pointerId):this._updateHoveredStateForPointerAtScreenPosition(io(e),e.pointerId,e.pointerType,i))}_updateHoveredStateForPointerAtScreenPosition(e,i,n,s){var m;let h=kp(e,n,s);const f=(m=this._hoveredManipulators.get(i))==null?void 0:m.manipulator;h==null||h.manipulator.interactive||(h=null),h!=null&&f===h.manipulator||(f!=null&&(f.hovering=!1),h!=null?(h.manipulator.hovering=!0,this._hoveredManipulators.set(i,h)):this._hoveredManipulators.delete(i),this._onFocusChange(s))}_afterManipulatorRelease(e){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(e(null),this._revertToNullActiveTool=!1)}_clearHoveredManipulatorStates(e){this._hoveredManipulators.forEach(({manipulator:i},n)=>{e===n&&(this._hoveredManipulators.delete(e),i.hovering=!1)})}};function kk(t){for(const{manipulator:e}of t.values())if(e!=null&&e.interactive){if(e.grabbing&&e.grabCursor)return e.grabCursor;if(e.cursor)return e.cursor}return null}function kp(t,e,i){let n=null;return i(s=>{if(s.manipulators==null||!DS(s))return!1;const h=s.manipulators.intersect(t,e);return h!=null&&(n={tool:s,manipulator:h},!0)}),n}function Ck(t){return t==="mouse"}function Ik(t){return t.pointerType!=="mouse"||t.button===0}function Gce(t){return!!t.native.shiftKey}function z5(t,e){t!=null&&t.consumesClicks&&e()}const Ak="attached",F5="tools",Uce=1e3;let Fa=class extends Oe{constructor(e){super(e),this._updatingHandles=new Jh,this._clock=C0,this._manipulatorState=new jce,this.tools=new Pe,this.cursor=null,this._interacting=!1,this._interactingTimeout=Uce,this._interactingTimeoutHandle=null,this._forEachTool=i=>{for(const n of this.tools.items)if(i(n))return}}initialize(){this.addHandles([this.view.on(HF,e=>{this._handleInputEvent(e)},Wt.TOOL),...Fce(this.tools),this.tools.on("before-add",({item:e})=>{this._updateToolEditableFlag(e)}),this.tools.on("before-remove",({item:e})=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.activeTool=null,this.tools.drain(e=>e.destroy()),this._clearInteractingTimeout(),this._interacting=!1,this._updatingHandles.destroy()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:e=>{this.activeTool=e},view:this.view}}set activeTool(e){if(e!=null&&!this.view.ready)return void Ae.getLogger(this).error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return;const i=this.activeTool;this._set("activeTool",e),i!=null&&i.deactivate(),e!=null&&e.activate(),this._removeIncompleteTools(e);for(const n of this.tools){this._updateToolEditableFlag(n);const s=DS(n);this.activeTool!=null&&s||this._manipulatorState.clearPointers(n,this._manipulatorStateEventArgs,!s)}this._updateCursor()}get updating(){return this._updatingHandles.updating||this.tools.some(e=>e.updating)}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeoutHandle=Rt(this._interactingTimeoutHandle)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeoutHandle=this._clock.setTimeout(()=>this._interacting=!1,this._interactingTimeout)}attach(){var e;this.view.type==="3d"?this.addHandles([Ee(()=>{const{state:i}=this.view;return"camera"in i&&i.camera},()=>this._forEachManipulator(i=>i.onViewChange())),(e=this.view.elevationProvider)==null?void 0:e.on("elevation-change",i=>this._forEachManipulator(n=>n.onElevationChange(i)))],Ak):this.addHandles(Ee(()=>this.view.extent,()=>this._forEachManipulator(i=>i.onViewChange())))}detach(){this.activeTool=null,this.tools.removeAll(),this.removeHandles(Ak),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(e){this._forEachTool(i=>{i.manipulators&&i.manipulators.forEach(({manipulator:n})=>e(n,i))})}_handleInputEvent(e){let i=!1;const n={...e,stopPropagation:()=>{i=!0,e.stopPropagation()}};this.activeTool!=null?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(n):this._forEachTool(s=>{!i&&s.visible&&s.handleInputEvent(n)}),!i&&e.type==="key-down"&&e.key==="Escape"&&this.activeTool&&(e.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(n,this._manipulatorStateEventArgs),i||this.activeTool==null||this.activeTool.handleInputEventAfter(n),this._manipulatorState.handleHoverEvent(n,this._forEachTool),this._updateCursor(),e.type==="pointer-move"&&(this._manipulatorState.hasFocusedManipulators()||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.removeHandles(F5),this._forEachTool(e=>{if(e instanceof Oe){const i=Ee(()=>[e.cursor,e.visible,e.editable],()=>{DS(e)||this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()});this.addHandles(i,F5)}e.manipulators&&this.addHandles([e.manipulators.on("after-remove",i=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs,!0,i.item.manipulator)}),e.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()})],F5)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(e){var i;(i=e.setEditableFlag)==null||i.call(e,oo.MANAGER,this.activeTool==null||e===this.activeTool)}_updateCursor(){let e=this._manipulatorState.cursor;e==null&&this._forEachTool(i=>!(i.cursor==null||!i.visible)&&(e=i.cursor,!0)),this._get("cursor")!==e&&this._set("cursor",e)}_removeIncompleteTools(e){this.tools.filter(i=>(e==null||i!==e)&&!i.created&&i.removeIncompleteOnCancel).forEach(i=>{this.tools.remove(i)})}get test(){}};_([S({constructOnly:!0,nonNullable:!0})],Fa.prototype,"view",void 0),_([S({value:null})],Fa.prototype,"activeTool",null),_([S({readOnly:!0,type:Pe})],Fa.prototype,"tools",void 0),_([S({readOnly:!0})],Fa.prototype,"cursor",void 0),_([S({readOnly:!0})],Fa.prototype,"updating",null),_([S()],Fa.prototype,"_interacting",void 0),_([S({readOnly:!0})],Fa.prototype,"interacting",null),Fa=_([J("esri.views.ToolViewManager")],Fa);let rf=class extends Oe{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",e.mapping==="standard"?this._detectedDeviceType="standard":Bce.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){const e=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<e.length?e[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return Hce[this.deviceType]}};_([S({nonNullable:!0,readOnly:!0})],rf.prototype,"nativeIndex",void 0),_([S({type:String,readOnly:!0})],rf.prototype,"deviceType",null),_([S({type:Number,readOnly:!0})],rf.prototype,"axisThreshold",null),rf=_([J("esri.views.input.gamepad.GamepadInputDevice")],rf);const KE=rf,Bce=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),Hce={standard:.15,spacemouse:.025,unknown:0};let dg=class extends Oe{constructor(...e){super(...e),this.devices=new Pe,this.enabledFocusMode="document"}};_([S({type:Pe.ofType(KE),readOnly:!0})],dg.prototype,"devices",void 0),_([S({type:["document","view","none"]})],dg.prototype,"enabledFocusMode",void 0),dg=_([J("esri.views.input.gamepad.GamepadSettings")],dg);const Vce=dg;let Wb=class extends Oe{constructor(){super(...arguments),this.gamepad=new Vce}};_([S({readOnly:!0})],Wb.prototype,"gamepad",void 0),Wb=_([J("esri.views.input.Input")],Wb);const qce=Wb,JF=()=>_t.respectPrefersReducedMotion&&window.matchMedia("(prefers-reduced-motion: reduce)").matches;let vh=class extends Oe{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};_([S({type:Boolean,nonNullable:!0})],vh.prototype,"enabled",void 0),_([S({type:KE})],vh.prototype,"device",void 0),_([S({type:["pan","zoom"],nonNullable:!0})],vh.prototype,"mode",void 0),_([S({type:["forward-down","forward-up"],nonNullable:!0})],vh.prototype,"tiltDirection",void 0),_([S({type:Number,nonNullable:!0})],vh.prototype,"velocityFactor",void 0),vh=_([J("esri.views.navigation.gamepad.GamepadSettings")],vh);const YF=vh;let sd=class extends Oe{constructor(e){super(e),this.browserTouchPanEnabled=!0,this.gamepad=new YF,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}get effectiveMomentumEnabled(){return this.momentumEnabled&&!JF()}};_([S({type:Boolean})],sd.prototype,"browserTouchPanEnabled",void 0),_([S({type:YF,nonNullable:!0})],sd.prototype,"gamepad",void 0),_([S({type:Boolean})],sd.prototype,"momentumEnabled",void 0),_([S({type:Boolean})],sd.prototype,"mouseWheelZoomEnabled",void 0),sd=_([J("esri.views.navigation.Navigation")],sd);const XF=sd,QF={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",knowledgegraphserver:"KnowledgeGraphServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer","3dtilesserver":"3DTilesServer",videoserver:"VideoServer"},ej=Object.values(QF),tj=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${ej.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),Wce=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^/\\n]+)\\/(${ej.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),Kce=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function Q$e(t){return tj.test(t)}function ZE(t){if(t==null)return null;const e=$r(t),i=(e==null?void 0:e.path.match(tj))||(e==null?void 0:e.path.match(Wce));if(!i)return null;const[,n,s,h,f]=i,m=s.indexOf("/");return{title:ij(m!==-1?s.slice(m+1):s),serverType:QF[h.toLowerCase()],sublayer:f!=null&&f!==""?parseInt(f,10):null,url:{path:n}}}function Zce(t){const e=$r(t).path.match(Kce);return e?{serviceUrl:e[1],sublayerId:Number(e[2])}:null}function ij(t){return(t=t.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+t.slice(1)}function eke(t,e){const i=[];if(t){const n=ZE(t);n!=null&&n.title&&i.push(n.title)}if(e){const n=ij(e);i.push(n)}if(i.length===2){if(i[0].toLowerCase().includes(i[1].toLowerCase()))return i[0];if(i[1].toLowerCase().includes(i[0].toLowerCase()))return i[1]}return i.join(" - ")}function tke(t){let e=mo(t,!0);return!!e&&(e=e.toLowerCase(),e.endsWith(".arcgis.com")&&(e.startsWith("services")||e.startsWith("tiles")||e.startsWith("features")))}function ike(t,e){return t&&AR(OR(t,e))}function nke(t){let{url:e}=t;if(!e)return{url:e};e=OR(e,t.logger);const i=$r(e),n=ZE(i.path);let s;if(n!=null)n.sublayer!=null&&t.layer.layerId==null&&(s=n.sublayer),e=n.url.path;else if(t.nonStandardUrlAllowed){const h=Zce(i.path);h!=null&&(e=h.serviceUrl,s=h.sublayerId)}return{url:AR(e),layerId:s}}function rke(t,e,i,n,s){c0(e,n,"url",s),n.url&&t.layerId!=null&&(n.url=m3(n.url,i,t.layerId.toString()))}function ske(t){if(!t)return!1;const e=t.toLowerCase(),i=e.includes("/services/"),n=e.includes("/mapserver/wmsserver"),s=e.includes("/imageserver/wmsserver"),h=e.includes("/wmsserver");return i&&(n||s||h)}function oke(t,e,i){const n=nj(t),s=e,h=Jce(n,s,i);if(n){const f=B3.deriveUnitFromSR(n,t.spatialReference).heightUnit;if(!i&&f!==n.heightUnit){const m=new ce("layerview:unmatched-height-unit",`The vertical units of the layer must match the horizontal units (${f})`,{horizontalUnit:f});return new ce("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:n,error:m})}}if(!Yce(t)||h===Hr.Unsupported)return new ce("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:n});switch(h){case Hr.Units:{const f=(n==null?void 0:n.heightUnit)||"unknown",m=(s==null?void 0:s.heightUnit)||"unknown",y=new ce("layerview:incompatible-height-unit",`The vertical units of the layer (${f}) must match the vertical units of the scene (${m})`,{layerUnit:f,sceneUnit:m});return new ce("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:n,sceneHeightModelInfo:s,error:y})}case Hr.HeightModel:{const f=(n==null?void 0:n.heightModel)||"unknown",m=(s==null?void 0:s.heightModel)||"unknown",y=new ce("layerview:incompatible-height-model",`The height model of the layer (${f}) must match the height model of the scene (${m})`,{layerHeightModel:f,sceneHeightModel:m});return new ce("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:n,sceneHeightModelInfo:s,error:y})}case Hr.CRS:{const f=(n==null?void 0:n.vertCRS)||"unknown",m=(s==null?void 0:s.vertCRS)||"unknown",y=new ce("layerview:incompatible-vertical-datum",`The vertical datum of the layer (${f}) must match the vertical datum of the scene (${m})`,{layerDatum:f,sceneDatum:m});return new ce("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:n,sceneHeightModelInfo:s,error:y})}}return null}function Jce(t,e,i){if(!Ok(t)||!Ok(e))return Hr.Unsupported;if(t==null||e==null)return Hr.Ok;if(!i&&t.heightUnit!==e.heightUnit)return Hr.Units;if(t.heightModel!==e.heightModel)return Hr.HeightModel;switch(t.heightModel){case"gravity-related-height":return Hr.Ok;case"ellipsoidal":return t.vertCRS===e.vertCRS?Hr.Ok:Hr.CRS;default:return Hr.Unsupported}}var Hr;function Ok(t){return t==null||t.heightModel!=null&&t.heightUnit!=null}function Yce(t){return"heightModelInfo"in t&&t.heightModelInfo!=null||t.spatialReference!=null||!oj(t)}function nj(t){var n;if(t.type==="integrated-mesh-3dtiles")return null;const e=t.url?ZE(t.url):void 0;return!(((n=t.spatialReference)==null?void 0:n.vcsWkid)==null&&e!=null&&e.serverType==="ImageServer")&&rj(t)&&t.heightModelInfo?t.heightModelInfo:oj(t)?B3.deriveUnitFromSR(Qce,t.spatialReference):null}function rj(t){return"heightModelInfo"in t}function sj(t){if(t.type==="unknown"||!("capabilities"in t))return!1;switch(t.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function oj(t){return sj(t)?!!(t.capabilities&&t.capabilities.data&&t.capabilities.data.supportsZ):aj(t)}function Xce(t){return t.layers!=null||aj(t)||sj(t)||rj(t)}function aj(t){switch(t.type){case"building-scene":case"elevation":case"integrated-mesh":case"integrated-mesh-3dtiles":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"catalog":case"catalog-footprint":case"catalog-dynamic-group":case"csv":case"dimension":case"geojson":case"feature":case"focusArea":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"parquet":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"viewshed":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(t){t[t.Ok=0]="Ok",t[t.Units=1]="Units",t[t.HeightModel=2]="HeightModel",t[t.CRS=3]="CRS",t[t.Unsupported=4]="Unsupported"})(Hr||(Hr={}));const Qce=new B3({heightModel:"gravity-related-height"});var pa;function Pk(t){return t===pa.Global?"global":"local"}(function(t){t[t.Global=1]="Global",t[t.Local=2]="Local"})(pa||(pa={}));let zS,j5=null;async function ehe(t){j5||(j5=ge(()=>import("./geometryServiceUtils-CQiS0Lx5.js"),[],import.meta.url).then(e=>zS=e)),await j5,Jt(t)}async function lj(t,e,i,n){if(!t)return null;const s=t.spatialReference;return $l()||Ls(s,e)?Qr(t,e):zS?zS.projectGeometry(t,e,i,n):(await Promise.race([ehe(n),vl(n)]),lj(t,e,i,n))}let Xt=class extends Oe{constructor(e){super(e),this.required={extent:!1,heightModelInfo:!1,tileInfo:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=Ms(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference??this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){var n,s,h,f;const e=(n=this.map)==null?void 0:n.call(this),i=[];return this.priorityCollection!=null&&i.push(this.priorityCollection),i.push({parent:e==null?void 0:e.basemap,layers:(s=e==null?void 0:e.basemap)==null?void 0:s.baseLayers},{layers:e==null?void 0:e.layers},{parent:e==null?void 0:e.ground,layers:(h=e==null?void 0:e.ground)==null?void 0:h.layers},{parent:e==null?void 0:e.basemap,layers:(f=e==null?void 0:e.basemap)==null?void 0:f.referenceLayers}),i}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};let e;if(this._collectLayers(this.mapCollections,n=>{const s=this._getSupportedSpatialReferences(n);if(s.length>0){const h=this._narrowDownSpatialReferenceCandidates(e,s);h!=null&&(e=h)}return(e==null?void 0:e.length)===1})&&(e==null?void 0:e.length)!==1)return{updating:!0};const i=this._pickSpatialReferenceCandidate(e);return{spatialReference:(i==null?void 0:i.spatialReference)??null,viewingMode:(i==null?void 0:i.viewingMode)??null,updating:!1}}get _tileInfoTask(){var h,f;if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};const e=(h=this.map)==null?void 0:h.call(this),i=this.spatialReference;if(!i)return{updating:this._spatialReferenceTask.updating};let n;const s=this._collectLayers([{parent:e==null?void 0:e.basemap,layers:(f=e==null?void 0:e.basemap)==null?void 0:f.baseLayers},{layers:e==null?void 0:e.layers}],m=>{var y;return!(!("tileInfo"in m)||!((y=m.tileInfo)!=null&&y.spatialReference.equals(i)))&&(n=m,!0)},m=>"tileInfo"in m);return n?{tileInfo:n.tileInfo,updating:!1}:{updating:s}}get _heightModelInfoTask(){var n;if(!this.required.heightModelInfo||this.suspended&&((n=this._get("_heightModelInfoTask"))!=null&&n.heightModelInfo))return this._get("_heightModelInfoTask")??{updating:!1};let e={};const i=this._collectLayers(this.mapCollections,s=>{var f,m;const h=nj(s);return!!h&&(e={heightModelInfo:h,vcsWkid:(f=s.spatialReference)==null?void 0:f.vcsWkid,latestVcsWkid:(m=s.spatialReference)==null?void 0:m.latestVcsWkid},!0)},s=>Xce(s));return{...e,updating:i}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const e=[],i=this._collectLayers(this.mapCollections,n=>{const s="fullExtents"in n&&n.fullExtents||(n.fullExtent!=null?[n.fullExtent]:[]),h=this.requiresExtentInSpatialReference?null:s[0],f=s.find(m=>m.spatialReference.equals(this.spatialReference))??h;if(f)return e.push({extent:f,layer:n}),!0;if(this._getSupportedSpatialReferences(n).length>0)for(const m of s)e.push({extent:m,layer:n});return!1});return{candidates:e,updating:i}}get _extentTask(){const{candidates:e,updating:i}=this._extentCandidatesTask;if(i)return{updating:i};if(e==null||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const n=this._pickExtentCandidate(e),s=this.spatialReference;return n.extent.equals(this._projectExtentTask.input)&&s.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=Ms(this._projectExtentTask.task)),this._projectExtentTask={input:n.extent.clone(),output:null,spatialReference:s.clone(),task:up(async h=>{try{const f=await lj(n.extent,s,"portalItem"in n.layer?n.layer.portalItem:void 0,h);this._projectExtentTask={...this._projectExtentTask,task:null,output:f}}catch{if(Ps(h))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,i){if(e==null)return i;const n=new Array;for(const s of e)for(const h of i){if(!s.spatialReference.equals(h.spatialReference))continue;const f=ihe(s.viewingMode,h.viewingMode);if(f!==!1){n.push({spatialReference:s.spatialReference,viewingMode:f});break}}return n.length>0?n:null}_pickSpatialReferenceCandidate(e){const i=this.defaultSpatialReference;return e==null||e.length<1?i?{spatialReference:i,viewingMode:null}:null:(i!=null&&e.length>1&&e.some(({spatialReference:n})=>n.equals(i))&&(e=e.filter(({spatialReference:n})=>n.equals(i))),e.length>1&&e.some(({viewingMode:n})=>n!==pa.Local)&&(e=e.filter(({viewingMode:n})=>n!==pa.Local)),e[0])}_getSupportedSpatialReferences(e){const i="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(i.length===0)return[];const n=[];for(const s of i){const h=this.getSpatialReferenceSupport(s,e);if(h!=null){const f=h.constraints??[{spatialReference:s,viewingMode:null}];for(const{spatialReference:m,viewingMode:y}of f)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!m.equals(this.userSpatialReference)||n.push({spatialReference:m,viewingMode:y})}}return n}_pickExtentCandidate(e){const i=this.spatialReference;return e.find(({extent:n})=>i.equals(n.spatialReference))||e[0]}_collectLayers(e,i,n=()=>!0){var h;if(this._loadMaybe((h=this.map)==null?void 0:h.call(this))!=="loaded")return!0;const s=new the(n,i);for(const f of e)if(this._collectCollection(f,s),s.done||s.preloading===this.sourcePreloadCount)break;return s.updating}_collectCollection(e,i){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return i.updating=!0,void++i.preloading;case"failed":return}for(const n of e.layers)if(i.layerFilter(n)){switch(this._loadMaybe(n)){case"failed":continue;case"loading":i.updating=!0,++i.preloading;break;case"loaded":if(i.updating||(i.done=i.pushLayer(n)),i.done||i.preloading===this.sourcePreloadCount)break;"layers"in n&&this._collectCollection({layers:n.layers},i)}if(i.done||i.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e&&e.loadStatus!=null?e.loadStatus==="not-loaded"?(e.load().catch(i=>{Ir(i)}),"loading"):e.loadStatus:"loaded"}};_([S()],Xt.prototype,"required",void 0),_([S({constructOnly:!0})],Xt.prototype,"map",void 0),_([S({constructOnly:!0})],Xt.prototype,"getSpatialReferenceSupport",void 0),_([S()],Xt.prototype,"defaultSpatialReference",void 0),_([S()],Xt.prototype,"userSpatialReference",void 0),_([S()],Xt.prototype,"sourcePreloadCount",void 0),_([S()],Xt.prototype,"priorityCollection",void 0),_([S()],Xt.prototype,"requiresExtentInSpatialReference",void 0),_([S()],Xt.prototype,"suspended",void 0),_([S({readOnly:!0})],Xt.prototype,"ready",null),_([S({readOnly:!0})],Xt.prototype,"heightModelInfoReady",null),_([S({readOnly:!0})],Xt.prototype,"spatialReference",null),_([S({readOnly:!0})],Xt.prototype,"extent",null),_([S({readOnly:!0})],Xt.prototype,"heightModelInfo",null),_([S({readOnly:!0})],Xt.prototype,"vcsWkid",null),_([S({readOnly:!0})],Xt.prototype,"latestVcsWkid",null),_([S({readOnly:!0})],Xt.prototype,"viewingMode",null),_([S({readOnly:!0})],Xt.prototype,"tileInfo",null),_([S({readOnly:!0})],Xt.prototype,"mapCollections",null),_([S({readOnly:!0})],Xt.prototype,"_spatialReferenceTask",null),_([S({readOnly:!0})],Xt.prototype,"_tileInfoTask",null),_([S({readOnly:!0})],Xt.prototype,"_heightModelInfoTask",null),_([S({readOnly:!0})],Xt.prototype,"_extentCandidatesTask",null),_([S()],Xt.prototype,"_extentTask",null),_([S()],Xt.prototype,"_projectExtentTask",void 0),Xt=_([J("esri.views.support.DefaultsFromMap")],Xt);let the=class{constructor(e,i){this.layerFilter=e,this.pushLayer=i,this.preloading=-1,this.updating=!1,this.done=!1}};function ihe(t,e){return t!=null?e!=null?t===e&&t:t:e}var pg;let Ue=pg=class extends un.EventedMixin(D3(Oe)){constructor(t){super(t),this._userSpatialReference=null,this._cursor=null,this.handles=new k0,this.updatingHandles=new Jh,this.allLayerViews=new pm({getCollections:()=>{var e,i,n;return[(e=this.basemapView)==null?void 0:e.baseLayerViews,(i=this.groundView)==null?void 0:i.layerViews,this.layerViews,(n=this.basemapView)==null?void 0:n.referenceLayerViews]},getChildrenFunction:rhe}),this.groundView=null,this.basemapView=null,this.fatalError=null,this.graphics=new zd,this.analyses=new aw,this.typeSpecificPreconditionsReady=!0,this.layerViews=new Pe,this.magnifier=new zF,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new qce,this.navigation=new XF,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new Ece(this),this.persistableViewModels=new Pe,this._isValid=!1,this._readyCycleForced=!1,this._lockedSpatialReference=null,this._userTimeZone=null,this._lockedTimeZone=null,this._userTimeExtent=null,this._lockedTimeExtent=null,this.theme=null,this.handles.add(Ee(()=>this.preconditionsReady,e=>{var n,s;const i=this.ready;if(e?(this._lockedSpatialReference=this.spatialReference,this._lockedTimeZone=this.timeZone,this._lockedTimeExtent=this.timeExtent,pg.views.add(this)):(this._lockedSpatialReference=null,pg.views.remove(this)),this.notifyChange("spatialReference"),!e&&i)(n=this.toolViewManager)==null||n.detach(),this.analysisViewManager!=null&&this.analysisViewManager.detach(),(s=this.layerViewManager)==null||s.clear(),this._teardown();else if(e&&!i){try{this._startup()}catch(h){return void queueMicrotask(()=>{this.fatalError=new ce("startup-error",null,h)})}this.analysisViewManager!=null&&this.analysisViewManager.attach(),this.toolViewManager.attach()}},Pc))}initialize(){this.addResolvingPromise(Promise.all([this.loadAsyncDependencies(),this.validate()]).then(()=>(this._isValid=!0,su(()=>this.ready)))),this.basemapView=new rce({view:this}),this.layerViewManager=new lce({view:this,layerViewImporter:{importLayerView:t=>this.importLayerView(t),hasLayerViewModule:t=>this.hasLayerViewModule(t)},supportsGround:this.supportsGround}),this.toolViewManager=new Fa({view:this}),this._setupSpatialReferenceLogger(),this.selectionManager=new Sce({view:this}),this.addHandles([Ee(()=>this.initialExtentRequired,t=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:t},Pi),Ee(()=>this.ready,t=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=t,this.defaultsFromMap.userSpatialReference=t?this.spatialReference:this._userSpatialReference)},Pc),Ee(()=>this._userSpatialReference,t=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=t)},Pi)])}_setupSpatialReferenceLogger(){let t=null;this.addHandles([Ee(()=>{var e;return(e=this.defaultsFromMap)==null?void 0:e.ready},e=>{var n;const i=((n=this.map)==null?void 0:n.allLayers.length)>0;if(e&&!this.spatialReference&&i){if(t!=null)return;const s=ct(()=>t=Ms(t));t=up(async h=>{try{await fT(this.spatialReferenceWarningDelay,null,h)}catch{return}finally{t=null}Ae.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),this.addHandles(s,"spatial-reference-logger-task")}else this.removeHandles("spatial-reference-logger-task")},{sync:!0})])}destroy(){var t,e;this.destroyed||(pg.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=mt(this.graphics),this.analyses=mt(this.analyses),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),mt(this.analysisViewManager),this.toolViewManager=mt(this.toolViewManager),this.layerViewManager=mt(this.layerViewManager),this.selectionManager=mt(this.selectionManager),this.basemapView=mt(this.basemapView),(t=this.groundView)==null||t.destroy(),(e=this.layerViews)==null||e.forEach(i=>i.destroy()),this.layerViews.length=0,this.invalidate(),this._emitter.clear(),this.handles.destroy(),this.map=mt(this.map),this.updatingHandles.destroy())}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return Ae.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){var t;return(t=this.toolViewManager)==null?void 0:t.activeTool}set activeTool(t){this.toolViewManager&&(this.toolViewManager.activeTool=t)}get animation(){return this._get("animation")}set animation(t){this._set("animation",t)}get center(){return null}get defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new Xt({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:(t,e)=>this.getSpatialReferenceSupport(t,e),...this.defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(t){this._set("extent",t)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){var t;return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||da.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._lockedSpatialReference&&!((t=this.defaultsFromMap)!=null&&t.ready)||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(t){t!==this._get("map")&&(t!=null&&t.destroyed&&(Ae.getLogger(this).warn("#map","The provided map is already destroyed",{map:t}),t=null),da.isLoadable(t)&&t.load().catch(()=>{}),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._lockedSpatialReference=null),this._set("map",t))}get spatialReference(){var e,i;const t=this._userSpatialReference||this._lockedSpatialReference||this.getDefaultSpatialReference()||null;if(t&&((i=(e=this.defaultsFromMap)==null?void 0:e.required)!=null&&i.heightModelInfo)){const n=t.clone();return n.vcsWkid=this.defaultsFromMap.vcsWkid,n.latestVcsWkid=this.defaultsFromMap.latestVcsWkid,n}return t}set spatialReference(t){const e=!Ai(t,this._get("spatialReference"));this._set("_userSpatialReference",t),e&&(this._set("spatialReference",t),this._spatialReferenceChanged(t))}_spatialReferenceChanged(t){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get timeExtent(){return this._userTimeExtent??this._lockedTimeExtent??this.getDefaultTimeExtent()??null}set timeExtent(t){this._userTimeExtent=t}get timeZone(){return this._userTimeZone??this._lockedTimeZone??this.getDefaultTimeZone()??yl}set timeZone(t){this._userTimeZone=t,Ute(t)||Ae.getLogger(this).warn("#timeZone",`the parsed value '${t}' may not be a valid IANA time zone`)}get tools(){var t;return(t=this.toolViewManager)==null?void 0:t.tools}get initialExtent(){var t;return(t=this.defaultsFromMap)==null?void 0:t.extent}get cursor(){var t;return((t=this.toolViewManager)==null?void 0:t.cursor)??this._cursor??"default"}set cursor(t){this._cursor=t,this.notifyChange("cursor")}get size(){return[this.width,this.height]}get effectiveTheme(){return this.theme??new LS}whenLayerView(t){var e;return((e=this.layerViewManager)==null?void 0:e.whenLayerView(t))??Promise.reject()}getDefaultSpatialReference(){var t;return(t=this.defaultsFromMap)==null?void 0:t.spatialReference}getDefaultHeightModelInfo(){var t;return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??((t=this.defaultsFromMap)==null?void 0:t.heightModelInfo)??null}getDefaultTimeZone(){return null}getDefaultTimeExtent(){return null}importLayerView(t){throw new ce("importLayerView() not implemented")}hasLayerViewModule(t){return!1}async validate(){}async loadAsyncDependencies(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(t){return this.getSpatialReferenceSupport(t)!=null}when(t,e){return this.isResolved()&&!this.ready&&Ae.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(t,e)}forceReadyCycle(){this.ready&&(ur(()=>this.destroyed||this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(t){this.toolViewManager.tools.add(t),this.activeTool=t}tryFatalErrorRecovery(){this.fatalError=null}};Ue.views=new Pe,_([S()],Ue.prototype,"_userSpatialReference",void 0),_([S()],Ue.prototype,"activeTool",null),_([S({readOnly:!0})],Ue.prototype,"allLayerViews",void 0),_([S()],Ue.prototype,"groundView",void 0),_([S()],Ue.prototype,"animation",null),_([S()],Ue.prototype,"basemapView",void 0),_([S()],Ue.prototype,"center",null),_([S()],Ue.prototype,"defaultsFromMapSettings",null),_([S()],Ue.prototype,"defaultsFromMap",null),_([S()],Ue.prototype,"fatalError",void 0),_([S({type:Nt})],Ue.prototype,"extent",null),_([S(p4(zd,"graphics"))],Ue.prototype,"graphics",void 0),_([S(p4(aw,"analyses"))],Ue.prototype,"analyses",void 0),_([S({readOnly:!0,type:B3})],Ue.prototype,"heightModelInfo",null),_([S({readOnly:!0})],Ue.prototype,"interacting",null),_([S({readOnly:!0})],Ue.prototype,"navigating",null),_([S({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_lockedSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],Ue.prototype,"preconditionsReady",null),_([S({readOnly:!0})],Ue.prototype,"typeSpecificPreconditionsReady",void 0),_([S({type:Pe,readOnly:!0})],Ue.prototype,"layerViews",void 0),_([S()],Ue.prototype,"resolution",null),_([S({type:zF})],Ue.prototype,"magnifier",void 0),_([S({value:null,type:cae})],Ue.prototype,"map",null),_([S()],Ue.prototype,"padding",void 0),_([S({readOnly:!0})],Ue.prototype,"ready",void 0),_([S({type:Ke})],Ue.prototype,"spatialReference",null),_([S()],Ue.prototype,"spatialReferenceWarningDelay",void 0),_([S()],Ue.prototype,"stationary",null),_([S({readOnly:!0})],Ue.prototype,"supportsGround",void 0),_([S({type:AE})],Ue.prototype,"timeExtent",null),_([S({type:String,nonNullable:!0})],Ue.prototype,"timeZone",null),_([S()],Ue.prototype,"tools",null),_([S()],Ue.prototype,"toolViewManager",void 0),_([S({readOnly:!0})],Ue.prototype,"type",void 0),_([S({type:Number})],Ue.prototype,"scale",void 0),_([S({readOnly:!0})],Ue.prototype,"updating",void 0),_([S({readOnly:!0})],Ue.prototype,"initialExtentRequired",void 0),_([S({readOnly:!0})],Ue.prototype,"initialExtent",null),_([S()],Ue.prototype,"cursor",null),_([S({readOnly:!0})],Ue.prototype,"input",void 0),_([S({type:XF,nonNullable:!0})],Ue.prototype,"navigation",void 0),_([S()],Ue.prototype,"layerViewManager",void 0),_([S()],Ue.prototype,"analysisViewManager",void 0),_([S()],Ue.prototype,"selectionManager",void 0),_([S()],Ue.prototype,"width",void 0),_([S()],Ue.prototype,"height",void 0),_([S({readOnly:!0})],Ue.prototype,"resizing",void 0),_([S({value:null,readOnly:!0})],Ue.prototype,"size",null),_([S({readOnly:!0})],Ue.prototype,"suspended",void 0),_([S({readOnly:!0})],Ue.prototype,"viewEvents",void 0),_([S({readOnly:!0})],Ue.prototype,"persistableViewModels",void 0),_([S()],Ue.prototype,"_isValid",void 0),_([S()],Ue.prototype,"_readyCycleForced",void 0),_([S()],Ue.prototype,"_lockedSpatialReference",void 0),_([S()],Ue.prototype,"_userTimeZone",void 0),_([S()],Ue.prototype,"_lockedTimeZone",void 0),_([S()],Ue.prototype,"_userTimeExtent",void 0),_([S()],Ue.prototype,"_lockedTimeExtent",void 0),_([S({type:LS})],Ue.prototype,"theme",void 0),_([S({readOnly:!0,type:LS})],Ue.prototype,"effectiveTheme",null),Ue=pg=_([J("esri.views.View")],Ue);const G5=globalThis.$arcgis;G5&&!G5.views&&Object.defineProperty(G5,"views",{configurable:!1,enumerable:!0,writable:!1,value:Ue.views});const nhe=Ue;function rhe(t){return t.layerViews}function at(){return[0,0]}function she(t){return[t[0],t[1]]}function Is(t,e){return[t,e]}function cj(t,e=at()){const i=Math.min(2,t.length);for(let n=0;n<i;++n)e[n]=t[n];return e}function ohe(t,e){return new Float64Array(t,e,2)}function hj(){return at()}function uj(){return Is(1,1)}function dj(){return Is(1,0)}function pj(){return Is(0,1)}const fj=hj(),ahe=uj(),lhe=dj(),gj=pj();Object.freeze(Object.defineProperty({__proto__:null,ONES:ahe,UNIT_X:lhe,UNIT_Y:gj,ZEROS:fj,clone:she,create:at,createView:ohe,fromArray:cj,fromValues:Is,ones:uj,unitX:dj,unitY:pj,zeros:hj},Symbol.toStringTag,{value:"Module"}));let bh=class extends nw{constructor(e){super(e),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=Rs(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state==="finished"||this.state==="stopped"}stop(){var e;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),(e=this._resolver)==null||e.reject(new ce("ViewAnimation stopped")))}finish(){var e;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),(e=this._resolver)==null||e.resolve())}update(e,i){i||(i=Ml(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",i)}};_([S({readOnly:!0})],bh.prototype,"done",null),_([S({readOnly:!0,type:String})],bh.prototype,"state",void 0),_([S()],bh.prototype,"target",void 0),bh=_([J("esri.views.ViewAnimation")],bh),function(t){t.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(bh||(bh={}));const FS=bh;function Fd(t,e){return t[0]=e[0],t[1]=e[1],t}function sn(t,e,i){return t[0]=e,t[1]=i,t}function JE(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t}function Vi(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t}function mj(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t}function yj(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t}function che(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function hhe(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function uhe(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t}function dhe(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t}function phe(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function U0(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t}function sa(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t}function mp(t,e){const i=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(i*i+n*n)}function p0(t,e){const i=e[0]-t[0],n=e[1]-t[1];return i*i+n*n}function f0(t){const e=t[0],i=t[1];return Math.sqrt(e*e+i*i)}function Rc(t){const e=t[0],i=t[1];return e*e+i*i}function vj(t,e){return t[0]=-e[0],t[1]=-e[1],t}function fhe(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function hw(t,e){const i=e[0],n=e[1];let s=i*i+n*n;return s>0&&(s=1/Math.sqrt(s),t[0]=e[0]*s,t[1]=e[1]*s),t}function Gc(t,e){return t[0]*e[0]+t[1]*e[1]}function bj(t,e,i){const n=e[0]*i[1]-e[1]*i[0];return t[0]=t[1]=0,t[2]=n,t}function YE(t,e,i,n){const s=e[0],h=e[1];return t[0]=s+n*(i[0]-s),t[1]=h+n*(i[1]-h),t}function ghe(t,e=1){const i=2*hy()*Math.PI;return t[0]=Math.cos(i)*e,t[1]=Math.sin(i)*e,t}function mhe(t,e,i){const n=e[0],s=e[1];return t[0]=i[0]*n+i[2]*s,t[1]=i[1]*n+i[3]*s,t}function el(t,e,i){const n=e[0],s=e[1];return t[0]=i[0]*n+i[2]*s+i[4],t[1]=i[1]*n+i[3]*s+i[5],t}function yhe(t,e,i){const n=e[0],s=e[1];return t[0]=i[0]*n+i[3]*s+i[6],t[1]=i[1]*n+i[4]*s+i[7],t}function vhe(t,e,i){const n=e[0],s=e[1];return t[0]=i[0]*n+i[4]*s+i[12],t[1]=i[1]*n+i[5]*s+i[13],t}function wj(t,e,i,n){const s=e[0]-i[0],h=e[1]-i[1],f=Math.sin(n),m=Math.cos(n);return t[0]=s*m-h*f+i[0],t[1]=s*f+h*m+i[1],t}function _j(t,e){const i=t[0],n=t[1],s=e[0],h=e[1];let f=i*i+n*n;f>0&&(f=1/Math.sqrt(f));let m=s*s+h*h;m>0&&(m=1/Math.sqrt(m));const y=(i*s+n*h)*f*m;return y>1?0:y<-1?Math.PI:Math.acos(y)}function bhe(t){return"vec2("+t[0]+", "+t[1]+")"}function jS(t,e){return t[0]===e[0]&&t[1]===e[1]}function xj(t,e){const i=t[0],n=t[1],s=e[0],h=e[1],f=Ni();return Math.abs(i-s)<=f*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(n-h)<=f*Math.max(1,Math.abs(n),Math.abs(h))}function GS(t,e,i,n,s){let h=e[0]-i[0],f=e[1]-i[1];const m=(n[0]*h+n[1]*f)*(s-1);return h=n[0]*m,f=n[1]*m,t[0]=e[0]+h,t[1]=e[1]+f,t}const whe=f0,t_=Vi,_he=mj,xhe=yj,She=mp,The=p0,Ehe=Rc;Object.freeze(Object.defineProperty({__proto__:null,add:JE,angle:_j,ceil:che,copy:Fd,cross:bj,dist:She,distance:mp,div:xhe,divide:yj,dot:Gc,equals:xj,exactEquals:jS,floor:hhe,inverse:fhe,len:whe,length:f0,lerp:YE,max:dhe,min:uhe,mul:_he,multiply:mj,negate:vj,normalize:hw,projectAndScale:GS,random:ghe,rotate:wj,round:phe,scale:U0,scaleAndAdd:sa,set:sn,sqrDist:The,sqrLen:Ehe,squaredDistance:p0,squaredLength:Rc,str:bhe,sub:t_,subtract:Vi,transformMat2:mhe,transformMat2d:el,transformMat3:yhe,transformMat4:vhe},Symbol.toStringTag,{value:"Module"}));function Mhe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function $he(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function khe(t,e,i,n,s,h,f){return t[0]=e,t[1]=i,t[2]=n,t[3]=s,t[4]=h,t[5]=f,t}function i_(t,e){const i=e[0],n=e[1],s=e[2],h=e[3],f=e[4],m=e[5];let y=i*h-n*s;return y?(y=1/y,t[0]=h*y,t[1]=-n*y,t[2]=-s*y,t[3]=i*y,t[4]=(s*m-h*f)*y,t[5]=(n*f-i*m)*y,t):null}function Che(t){return t[0]*t[3]-t[1]*t[2]}function Sj(t,e,i){const n=e[0],s=e[1],h=e[2],f=e[3],m=e[4],y=e[5],x=i[0],E=i[1],k=i[2],I=i[3],P=i[4],L=i[5];return t[0]=n*x+h*E,t[1]=s*x+f*E,t[2]=n*k+h*I,t[3]=s*k+f*I,t[4]=n*P+h*L+m,t[5]=s*P+f*L+y,t}function n_(t,e,i){const n=e[0],s=e[1],h=e[2],f=e[3],m=e[4],y=e[5],x=Math.sin(i),E=Math.cos(i);return t[0]=n*E+h*x,t[1]=s*E+f*x,t[2]=n*-x+h*E,t[3]=s*-x+f*E,t[4]=m,t[5]=y,t}function XE(t,e,i){const n=e[0],s=e[1],h=e[2],f=e[3],m=e[4],y=e[5],x=i[0],E=i[1];return t[0]=n*x,t[1]=s*x,t[2]=h*E,t[3]=f*E,t[4]=m,t[5]=y,t}function Mm(t,e,i){const n=e[0],s=e[1],h=e[2],f=e[3],m=e[4],y=e[5],x=i[0],E=i[1];return t[0]=n,t[1]=s,t[2]=h,t[3]=f,t[4]=n*x+h*E+m,t[5]=s*x+f*E+y,t}function Tj(t,e){const i=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=i,t[2]=-i,t[3]=n,t[4]=0,t[5]=0,t}function Ej(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function QE(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function Ihe(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function Ahe(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+1)}function Ohe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t}function Mj(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t}function Phe(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t}function Rhe(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t[3]=e[3]+i[3]*n,t[4]=e[4]+i[4]*n,t[5]=e[5]+i[5]*n,t}function Nhe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function Lhe(t,e){const i=t[0],n=t[1],s=t[2],h=t[3],f=t[4],m=t[5],y=e[0],x=e[1],E=e[2],k=e[3],I=e[4],P=e[5],L=Ni();return Math.abs(i-y)<=L*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(n-x)<=L*Math.max(1,Math.abs(n),Math.abs(x))&&Math.abs(s-E)<=L*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(h-k)<=L*Math.max(1,Math.abs(h),Math.abs(k))&&Math.abs(f-I)<=L*Math.max(1,Math.abs(f),Math.abs(I))&&Math.abs(m-P)<=L*Math.max(1,Math.abs(m),Math.abs(P))}const Dhe=Sj,zhe=Mj;Object.freeze(Object.defineProperty({__proto__:null,add:Ohe,copy:Mhe,determinant:Che,equals:Lhe,exactEquals:Nhe,frob:Ahe,fromRotation:Tj,fromScaling:Ej,fromTranslation:QE,identity:$he,invert:i_,mul:Dhe,multiply:Sj,multiplyScalar:Phe,multiplyScalarAndAdd:Rhe,rotate:n_,scale:XE,set:khe,str:Ihe,sub:zhe,subtract:Mj,translate:Mm},Symbol.toStringTag,{value:"Module"}));function oa(){return[1,0,0,1,0,0]}function $j(t){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function Fhe(t,e,i,n,s,h){return[t,e,i,n,s,h]}function jhe(t,e){return new Float64Array(t,e,6)}const kj=oa();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:kj,clone:$j,create:oa,createView:jhe,fromValues:Fhe},Symbol.toStringTag,{value:"Module"}));const vv={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new Tr({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:Ke.WebMercator}),minus180Line:new Tr({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:Ke.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new Tr({paths:[[[180,-180],[180,180]]],spatialReference:Ke.WGS84}),minus180Line:new Tr({paths:[[[-180,-180],[-180,180]]],spatialReference:Ke.WGS84})}};function Od(t,e){return Math.ceil((t-e)/(2*e))}function Cj(t,e){const i=Jg(t);for(const n of i)for(const s of n)s[0]+=e;return t}function Jg(t){return YT(t)?t.rings:t.paths}function r_(t,e){return e?{...e,query:{...t??{},...e.query}}:{query:t}}function xy(t){return typeof t=="string"?$r(t):_e(t)}function s_(t,e,i){const n={};for(const s in t){if(s==="declaredClass")continue;const h=t[s];if(h!=null&&typeof h!="function")if(Array.isArray(h))n[s]=h.map(f=>s_(f));else if(typeof h=="object")if(h.toJSON){const f=h.toJSON(i==null?void 0:i[s]);n[s]=JSON.stringify(f)}else n[s]=JSON.stringify(h);else n[s]=h}return n}async function Ghe(t,e,i,n){const s=xy(t),h=e[0].spatialReference,f={...n,responseType:"json",query:{...s.query,f:"json",sr:U2(h),target:JSON.stringify({geometryType:ry(e[0]),geometries:e}),cutter:JSON.stringify(i)}},m=await ki(s.path+"/cut",f),{cutIndexes:y,geometries:x=[]}=m.data;return{cutIndexes:y,geometries:x.map(E=>{const k=Yd(E);return k.spatialReference=h,k})}}function Uhe(t){return{geometryType:ry(t[0]),geometries:t.map(e=>e.toJSON())}}function Ij(t,e,i){const n=oQ(e);return t.map(s=>{const h=n.fromJSON(s);return h.spatialReference=i,h})}async function Bhe(t,e,i){const n=typeof t=="string"?$r(t):t,s=e[0].spatialReference,h=ry(e[0]),f={...i,query:{...n.query,f:"json",sr:U2(s),geometries:JSON.stringify(Uhe(e))}},{data:m}=await ki(n.path+"/simplify",f);return Ij(m.geometries,h,s)}const Aj=()=>Ae.getLogger("esri.geometry.support.normalizeUtils");function Hhe(t){return t.type==="polygon"}function Vhe(t){return t[0].type==="polygon"}function qhe(t){return t[0].type==="polyline"}function Rk(t){const e=[];let i=0,n=0;for(let s=0;s<t.length;s++){const h=t[s];let f=null;for(let m=0;m<h.length;m++)f=h[m],e.push(f),m===0?(i=f[0],n=i):(i=Math.min(i,f[0]),n=Math.max(n,f[0]));f&&e.push([(i+n)/2,0])}return e}function Whe(t,e){if(!(t instanceof Tr||t instanceof ln)){const s="straightLineDensify: the input geometry is neither polyline nor polygon";throw Aj().error(s),new ce(s)}const i=Jg(t),n=[];for(const s of i){const h=[];n.push(h),h.push([s[0][0],s[0][1]]);for(let f=0;f<s.length-1;f++){const m=s[f][0],y=s[f][1],x=s[f+1][0],E=s[f+1][1],k=Math.sqrt((x-m)*(x-m)+(E-y)*(E-y)),I=(E-y)/k,P=(x-m)/k,L=k/e;if(L>1){for(let W=1;W<=L-1;W++){const Z=W*e,Y=P*Z+m,te=I*Z+y;h.push([Y,te])}const D=(k+Math.floor(L-1)*e)/2,j=P*D+m,H=I*D+y;h.push([j,H])}h.push([x,E])}}return Hhe(t)?new ln({rings:n,spatialReference:t.spatialReference}):new Tr({paths:n,spatialReference:t.spatialReference})}function Nk(t,e,i){if(e){const n=Whe(t,1e6);t=Gh(n,!0)}return i&&(t=Cj(t,i)),t}function Lk(t,e,i){if(Array.isArray(t)){const n=t[0];if(n>e){const s=Od(n,e);t[0]=n+s*(-2*e)}else if(n<i){const s=Od(n,i);t[0]=n+s*(-2*i)}}else{const n=t.x;if(n>e){const s=Od(n,e);t=t.clone().offset(s*(-2*e),0)}else if(n<i){const s=Od(n,i);t=t.clone().offset(s*(-2*i),0)}}return t}function Khe(t,e){let i=-1;for(let n=0;n<e.cutIndexes.length;n++){const s=e.cutIndexes[n],h=e.geometries[n],f=Jg(h);for(let m=0;m<f.length;m++){const y=f[m];y.some(x=>{if(x[0]<180)return!0;{let E=0;for(let I=0;I<y.length;I++){const P=y[I][0];E=P>E?P:E}E=Number(E.toFixed(9));const k=-360*Od(E,180);for(let I=0;I<y.length;I++){const P=h.getPoint(m,I);h.setPoint(m,I,P.clone().offset(k,0))}return!0}})}if(s===i){if(Vhe(t))for(const m of Jg(h))t[s]=t[s].addRing(m);else if(qhe(t))for(const m of Jg(h))t[s]=t[s].addPath(m)}else i=s,t[s]=h}return t}async function Zhe(t,e,i){if(!Array.isArray(t))return Zhe([t],e);e&&typeof e!="string"&&Aj().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const n=typeof e=="string"?e:(e==null?void 0:e.url)??_t.geometryServiceUrl;let s,h,f,m,y,x,E,k,I=0;const P=[],L=[];for(const Y of t)if(Y!=null)if(s||(s=Y.spatialReference,h=cr(s),f=s.isWebMercator,x=f?102100:4326,m=vv[x].maxX,y=vv[x].minX,E=vv[x].plus180Line,k=vv[x].minus180Line),h)if(Y.type==="mesh")L.push(Y);else if(Y.type==="point")L.push(Lk(Y.clone(),m,y));else if(Y.type==="multipoint"){const te=Y.clone();te.points=te.points.map(ie=>Lk(ie,m,y)),L.push(te)}else if(Y.type==="extent"){const te=Y.clone()._normalize(!1,!1,h);L.push(te.rings?new ln(te):te)}else if(Y.extent){const te=Y.extent,ie=Od(te.xmin,y)*(2*m);let le=ie===0?Y.clone():Cj(Y.clone(),ie);te.offset(ie,0);let{xmin:pe,xmax:ve}=te;pe=Number(pe.toFixed(9)),ve=Number(ve.toFixed(9)),te.intersects(E)&&ve!==m?(I=ve>I?ve:I,le=Nk(le,f),P.push(le),L.push("cut")):te.intersects(k)&&pe!==y?(I=ve*(2*m)>I?ve*(2*m):I,le=Nk(le,f,360),P.push(le),L.push("cut")):L.push(le)}else L.push(Y.clone());else L.push(Y);else L.push(Y);let D=Od(I,m),j=-90;const H=D,W=new Tr;for(;D>0;){const Y=360*D-180;W.addPath([[Y,j],[Y,-1*j]]),j*=-1,D--}if(P.length>0&&H>0){const Y=Khe(P,await Ghe(n,P,W,i)),te=[],ie=[];for(let ve=0;ve<L.length;ve++){const be=L[ve];if(be!=="cut")ie.push(be);else{const Se=Y.shift(),Me=t[ve];Me!=null&&Me.type==="polygon"&&Me.rings&&Me.rings.length>1&&Se.rings.length>=Me.rings.length?(te.push(Se),ie.push("simplify")):ie.push(f?Ec(Se):Se)}}if(!te.length)return ie;const le=await Bhe(n,te,i),pe=[];for(let ve=0;ve<ie.length;ve++){const be=ie[ve];be!=="simplify"?pe.push(be):pe.push(f?Ec(le.shift()):le.shift())}return pe}const Z=[];for(let Y=0;Y<L.length;Y++){const te=L[Y];if(te!=="cut")Z.push(te);else{const ie=P.shift();Z.push(f===!0?Ec(ie):ie)}}return Z}function Jhe(t){if(!t)return null;const e=t.extent;if(!e)return null;const i=t.spatialReference&&cr(t.spatialReference);if(!i)return e;const[n,s]=i.valid,h=2*s,{width:f}=e;let m,{xmin:y,xmax:x}=e;if([y,x]=[x,y],t.type==="extent"||f===0||f<=s||f>h||y<n||x>s)return e;switch(t.type){case"polygon":if(!(t.rings.length>1))return e;m=Rk(t.rings);break;case"polyline":if(!(t.paths.length>1))return e;m=Rk(t.paths);break;case"multipoint":m=t.points}const E=e.clone();for(let k=0;k<m.length;k++){let I=m[k][0];I<0?(I+=s,x=Math.max(I,x)):(I-=s,y=Math.min(I,y))}return E.xmin=y,E.xmax=x,E.width<f?(E.xmin-=s,E.xmax-=s,E):e}function eM(t,e,i){const n=cr(i);if(n==null)return t;const[s,h]=n.valid,f=2*h;let m=0,y=0;e>h?m=Math.ceil(Math.abs(e-h)/f):e<s&&(m=-Math.ceil(Math.abs(e-s)/f)),t>h?y=Math.ceil(Math.abs(t-h)/f):t<s&&(y=-Math.ceil(Math.abs(t-s)/f));let x=t+(m-y)*f;const E=x-e;return E>h?x-=f:E<s&&(x+=f),x}function hke(t,e){const i=cr(e);if(i){const[n,s]=i.valid,h=s-n;if(t<n)for(;t<n;)t+=h;if(t>s)for(;t>s;)t-=h}return t}const Oj=96,Pj=39.37,Yhe=180/Math.PI;function Rj(t){return t.wkid?t:t.spatialReference||Ke.WGS84}function tM(t,e){return e.type?sn(t,e.x,e.y):Fd(t,e)}function Nj(t){return kr(t)}function o_(t,e,i=0){let n=t.width,s=t.height;if(i!==0){const m=xc(i),y=Math.abs(Math.cos(m)),x=Math.abs(Math.sin(m));n=t.width*y+t.height*x,s=t.width*x+t.height*y}const h=Math.max(1,e[0]),f=Math.max(1,e[1]);return Math.max(n/h,s/f)*sue(t.spatialReference)}async function fg(t,e,i,n){var m,y;let s,h;if(!t||Array.isArray(t)&&!t.length)return null;if(Pe.isCollection(t)&&(t=t.toArray()),Array.isArray(t)&&t.length&&typeof t[0]=="object"){const x=t.every(I=>"attributes"in I),E=t.some(I=>!I.geometry);let k=t;if(x&&E&&e&&e.allLayerViews){const I=new Map;for(const j of t){const H=j.layer,W=I.get(H)||[],Z=j.attributes[H.objectIdField];Z!=null&&W.push(Z),I.set(H,W)}const P=[];I.forEach((j,H)=>{const W=e.allLayerViews.find(Z=>Z.layer.id===H.id);if(W&&"queryFeatures"in W){const Z=H.createQuery();Z.objectIds=j,Z.returnGeometry=!0,P.push(W.queryFeatures(Z))}});const L=await Promise.all(P),D=[];for(const j of L)if(j&&j.features&&j.features.length)for(const H of j.features)H.geometry!=null&&D.push(H.geometry);k=D}for(const I of k)n=await fg(I,e,i,n);return n}if(Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number")s=new Ne(t);else if(t instanceof zc)s=t;else if("geometry"in t){if(t.geometry)s=t.geometry;else if(t.layer){const x=t.layer,E=e.allLayerViews.find(k=>k.layer.id===x.id);if(E&&"queryFeatures"in E){const k=x.createQuery();k.objectIds=[t.attributes[x.objectIdField]],k.returnGeometry=!0;const I=await E.queryFeatures(k);s=(y=(m=I==null?void 0:I.features)==null?void 0:m[0])==null?void 0:y.geometry}}}if(s==null)return null;switch(s.type){case"point":h=new Nt({xmin:s.x,ymin:s.y,xmax:s.x,ymax:s.y,spatialReference:s.spatialReference});break;case"extent":case"multipoint":case"polygon":case"polyline":h=Jhe(s);break;default:h=s.extent}if(!h)return null;$l()||Ls(h.spatialReference,i)||await vl();const f=Qr(h,i);if(!f)return null;if(n){const x=f.center,E=x.clone();E.x=eM(x.x,n.center.x,i),E.x!==x.x&&f.centerAt(E),n=n.union(f)}else n=f;return n}function Xhe(t){var e;if(t&&(!Array.isArray(t)||typeof t[0]!="number")&&(typeof t=="object"||Array.isArray(t)&&typeof t[0]=="object")){if("layer"in t&&((e=t.layer)==null?void 0:e.minScale)!=null&&t.layer.maxScale!=null){const i=t.layer;return{min:i.minScale,max:i.maxScale}}if(Array.isArray(t)&&t.length&&t.every(i=>"layer"in i)){let i=0,n=0;for(const s of t){const h=s.layer;h!=null&&h.minScale&&h.maxScale&&(i=h.minScale<i?h.minScale:i,n=h.maxScale>n?h.maxScale:n)}return i&&n?{min:i,max:n}:null}}}function Dk(t,e){const i=Rj(t);return Ai(i,e)||i.imageCoordinateSystem||e.imageCoordinateSystem?t:Qr(t,e)}async function Qhe(t,e){var j;if(!t||!e)return new na({targetGeometry:new Ne,scale:0,rotation:0});let i=e.spatialReference;const{constraints:n,padding:s,viewpoint:h,size:f}=e,m=[s?f[0]-s.left-s.right:f[0],s?f[1]-s.top-s.bottom:f[1]];let y=null;t instanceof na?y=t:t.viewpoint?y=t.viewpoint:t.target&&t.target.declaredClass==="esri.Viewpoint"&&(y=t.target);let x=null;y!=null&&y.targetGeometry?x=y.targetGeometry:t instanceof Nt?x=t:t instanceof zc?x=await fg(t,e,i):t&&(x=await fg(t.center,e,i)||await fg(t.target,e,i)||await fg(t,e,i)),!x&&(h!=null&&h.targetGeometry)?x=h.targetGeometry:!x&&e.extent&&(x=e.extent),i||(i=Rj(e.spatialReference||e.extent||x)),$l()||Ai(x.spatialReference,i)||Ls(x.spatialReference,i)||await vl();const E=Dk(x,i),k="center"in E?E.center:E;e.pickClosestTarget!==!1&&k.type==="point"&&((j=h.targetGeometry)==null?void 0:j.type)==="point"&&(k.x=eM(k.x,h.targetGeometry.x,k.spatialReference));let I=0;y?I=y.rotation:t.hasOwnProperty("rotation")?I=t.rotation:h&&(I=h.rotation);let P=0;P=(y==null?void 0:y.targetGeometry)!=null&&y.targetGeometry.type==="point"?y.scale:"scale"in t&&t.scale?t.scale:"zoom"in t&&t.zoom!==-1&&n&&n.effectiveLODs?n.zoomToScale(t.zoom):Array.isArray(x)||x.type==="point"||x.type==="extent"&&x.width===0&&x.height===0?h.scale:o_(Dk(x.extent,i),m,I);const L=Xhe(t.target??t);L&&(L.min&&L.min<P?P=L.min:L.max&&L.max>P&&(P=L.max));let D=new na({targetGeometry:k,scale:P,rotation:I});return n&&(D=n.fit(D),n.constrainByGeometry(D),n.rotationEnabled||(D.rotation=h.rotation)),D}function ar(t,e){const i=t.targetGeometry,n=e.targetGeometry;return i.x=n.x,i.y=n.y,i.spatialReference=n.spatialReference,t.scale=e.scale,t.rotation=e.rotation,t}function eue(t,e,i){return i?sn(t,.5*(e[0]-i.right+i.left),.5*(e[1]-i.bottom+i.top)):U0(t,e,.5)}const tue=function(){const t=at();return function(e,i,n){const s=i.targetGeometry;tM(t,s);const h=.5*B0(i);return e.xmin=t[0]-h*n[0],e.ymin=t[1]-h*n[1],e.xmax=t[0]+h*n[0],e.ymax=t[1]+h*n[1],e.spatialReference=s.spatialReference,e}}();function iue(t,e,i,n,s){var h;return US(t,e,i.center),t.scale=o_(i,n),(h=s==null?void 0:s.constraints)==null||h.constrain(t),t}function nue(t,e,i,n){return rM(t,e,i,n),i_(t,t)}const Lj=function(){const t=at();return function(e,i,n){return t_(e,oue(e,i),eue(t,i,n))}}(),rue=function(){const t=oa(),e=at();return function(i,n,s,h){const f=B0(n),m=iM(n);return sn(e,f,f),Ej(t,e),n_(t,t,m),Mm(t,t,Lj(e,s,h)),Mm(t,t,[0,h.top-h.bottom]),sn(i,t[4],t[5])}}();function B0(t){var e;return t.scale*Dj((e=t.targetGeometry)==null?void 0:e.spatialReference)}function Dj(t){return t!=null&&Sr(t)?1/(Nj(t)*Pj*Oj):1}function iM(t){return CE(t.rotation)||0}function sue(t){return Sr(t)?Nj(t)*Pj*Oj:1}function oue(t,e){return U0(t,e,.5)}const nM=function(){const t=at(),e=at(),i=at();return function(n,s,h,f,m,y){return vj(t,s),U0(e,h,.5*y),sn(i,1/f*y,-1/f*y),QE(n,e),m&&n_(n,n,m),XE(n,n,i),Mm(n,n,t),n}}(),rM=function(){const t=at();return function(e,i,n,s){const h=B0(i),f=iM(i);return tM(t,i.targetGeometry),nM(e,t,n,h,f,s)}}(),aue=function(){const t=at();return function(e,i,n,s){const h=B0(i);return tM(t,i.targetGeometry),nM(e,t,n,h,0,s)}}();function zj(t){const e=cr(t);return e?e.valid[1]-e.valid[0]:0}function lue(t,e){return Math.round(zj(t)/e)}const cue=function(){const t=at(),e=at(),i=[0,0,0];return function(n,s,h){Vi(t,n,s),hw(t,t),Vi(e,n,h),hw(e,e),bj(i,t,e);let f=Math.acos(Gc(t,e)/(f0(t)*f0(e)))*Yhe;return i[2]<0&&(f=-f),isNaN(f)&&(f=0),f}}(),hue=function(){const t=at();return function(e,i,n,s){const h=e.targetGeometry;return ar(e,i),rue(t,i,n,s),h.x+=t[0],h.y+=t[1],e}}(),US=function(t,e,i){ar(t,e);const n=t.targetGeometry;return n.x=i.x,n.y=i.y,n.spatialReference=i.spatialReference,t},uue=function(){const t=at();return function(e,i,n,s,h){h||(h="center"),t_(t,n,s),U0(t,t,.5);const f=t[0],m=t[1];switch(h){case"center":sn(t,0,0);break;case"left":sn(t,-f,0);break;case"top":sn(t,0,m);break;case"right":sn(t,f,0);break;case"bottom":sn(t,0,-m);break;case"top-left":sn(t,-f,m);break;case"bottom-left":sn(t,-f,-m);break;case"top-right":sn(t,f,m);break;case"bottom-right":sn(t,f,-m)}return a_(e,i,t),e}}();function uke(t,e,i){return ar(t,e),t.rotation+=i,t}function due(t,e,i){return ar(t,e),t.rotation=i,t}const pue=function(){const t=at();return function(e,i,n,s,h){return ar(e,i),isNaN(n)||n===0||(jj(t,s,i,h),e.scale=i.scale*n,Gj(t,t,e,h),a_(e,e,sn(t,t[0]-s[0],s[1]-t[1]))),e}}();function zk(t,e,i){return ar(t,e),t.scale=i,t}const Fj=function(){const t=at();return function(e,i,n,s,h,f){return ar(e,i),isNaN(n)||n===0||(jj(t,h,i,f),e.scale=i.scale*n,e.rotation+=s,Gj(t,t,e,f),a_(e,e,sn(t,t[0]-h[0],h[1]-t[1]))),e}}(),dke=function(){const t=at(),e=at();return function(i,n,s,h,f,m,y){return Lj(e,m,y),JE(t,f,e),h?Fj(i,n,s,h,t,m):pue(i,n,s,t,m)}}(),jj=function(){const t=oa();return function(e,i,n,s){return el(e,i,nue(t,n,s,1))}}(),Gj=function(){const t=oa();return function(e,i,n,s){return el(e,i,rM(t,n,s,1))}}(),a_=function(){const t=at(),e=oa();return function(i,n,s){ar(i,n);const h=B0(n),f=i.targetGeometry;return Tj(e,iM(n)),XE(e,e,Is(h,h)),el(t,s,e),f.x+=t[0],f.y+=t[1],i}}();function Uj(){const t=new Float32Array(6);return t[0]=1,t[3]=1,t}function fue(t){const e=new Float32Array(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function gue(t,e,i,n,s,h){const f=new Float32Array(6);return f[0]=t,f[1]=e,f[2]=i,f[3]=n,f[4]=s,f[5]=h,f}function mue(t,e){return new Float32Array(t,e,6)}function Bj(t,e,i,n){const s=e[n],h=e[n+1];t[n]=i[0]*s+i[2]*h+i[4],t[n+1]=i[1]*s+i[3]*h+i[5]}function yue(t,e,i,n=0,s=0,h=2){const f=s||e.length/h;for(let m=n;m<f;m++)Bj(t,e,i,m*h)}Object.freeze(Object.defineProperty({__proto__:null,clone:fue,create:Uj,createView:mue,fromValues:gue,transform:Bj,transformMany:yue},Symbol.toStringTag,{value:"Module"}));function vue(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function bue(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Hj(t,e,i,n,s,h,f,m,y,x){return t[0]=e,t[1]=i,t[2]=n,t[3]=s,t[4]=h,t[5]=f,t[6]=m,t[7]=y,t[8]=x,t}function Vj(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function wue(t,e){if(t===e){const i=e[1],n=e[2],s=e[5];t[1]=e[3],t[2]=e[6],t[3]=i,t[5]=e[7],t[6]=n,t[7]=s}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function _ue(t,e){const i=e[0],n=e[1],s=e[2],h=e[3],f=e[4],m=e[5],y=e[6],x=e[7],E=e[8],k=E*f-m*x,I=-E*h+m*y,P=x*h-f*y;let L=i*k+n*I+s*P;return L?(L=1/L,t[0]=k*L,t[1]=(-E*n+s*x)*L,t[2]=(m*n-s*f)*L,t[3]=I*L,t[4]=(E*i-s*y)*L,t[5]=(-m*i+s*h)*L,t[6]=P*L,t[7]=(-x*i+n*y)*L,t[8]=(f*i-n*h)*L,t):null}function xue(t,e){const i=e[0],n=e[1],s=e[2],h=e[3],f=e[4],m=e[5],y=e[6],x=e[7],E=e[8];return t[0]=f*E-m*x,t[1]=s*x-n*E,t[2]=n*m-s*f,t[3]=m*y-h*E,t[4]=i*E-s*y,t[5]=s*h-i*m,t[6]=h*x-f*y,t[7]=n*y-i*x,t[8]=i*f-n*h,t}function Sue(t){const e=t[0],i=t[1],n=t[2],s=t[3],h=t[4],f=t[5],m=t[6],y=t[7],x=t[8];return e*(x*h-f*y)+i*(-x*s+f*m)+n*(y*s-h*m)}function sM(t,e,i){const n=e[0],s=e[1],h=e[2],f=e[3],m=e[4],y=e[5],x=e[6],E=e[7],k=e[8],I=i[0],P=i[1],L=i[2],D=i[3],j=i[4],H=i[5],W=i[6],Z=i[7],Y=i[8];return t[0]=I*n+P*f+L*x,t[1]=I*s+P*m+L*E,t[2]=I*h+P*y+L*k,t[3]=D*n+j*f+H*x,t[4]=D*s+j*m+H*E,t[5]=D*h+j*y+H*k,t[6]=W*n+Z*f+Y*x,t[7]=W*s+Z*m+Y*E,t[8]=W*h+Z*y+Y*k,t}function BS(t,e,i){const n=e[0],s=e[1],h=e[2],f=e[3],m=e[4],y=e[5],x=e[6],E=e[7],k=e[8],I=i[0],P=i[1];return t[0]=n,t[1]=s,t[2]=h,t[3]=f,t[4]=m,t[5]=y,t[6]=I*n+P*f+x,t[7]=I*s+P*m+E,t[8]=I*h+P*y+k,t}function qj(t,e,i){const n=e[0],s=e[1],h=e[2],f=e[3],m=e[4],y=e[5],x=e[6],E=e[7],k=e[8],I=Math.sin(i),P=Math.cos(i);return t[0]=P*n+I*f,t[1]=P*s+I*m,t[2]=P*h+I*y,t[3]=P*f-I*n,t[4]=P*m-I*s,t[5]=P*y-I*h,t[6]=x,t[7]=E,t[8]=k,t}function Tue(t,e,i){const n=i[0],s=i[1],h=i[2];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=s*e[3],t[4]=s*e[4],t[5]=s*e[5],t[6]=h*e[6],t[7]=h*e[7],t[8]=h*e[8],t}function Eue(t,e,i){const n=i[0],s=i[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=s*e[3],t[4]=s*e[4],t[5]=s*e[5],t}function Mue(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function $ue(t,e){const i=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=i,t[2]=0,t[3]=-i,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function kue(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Cue(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function Iue(t,e){const i=e[0],n=e[1],s=e[2],h=e[3],f=i+i,m=n+n,y=s+s,x=i*f,E=n*f,k=n*m,I=s*f,P=s*m,L=s*y,D=h*f,j=h*m,H=h*y;return t[0]=1-k-L,t[3]=E-H,t[6]=I+j,t[1]=E+H,t[4]=1-x-L,t[7]=P-D,t[2]=I-j,t[5]=P+D,t[8]=1-x-k,t}function Aue(t,e){const i=e[0],n=e[1],s=e[2],h=e[4],f=e[5],m=e[6],y=e[8],x=e[9],E=e[10],k=E*f-m*x,I=-E*h+m*y,P=x*h-f*y,L=i*k+n*I+s*P;if(!L)return null;const D=1/L;return t[0]=k*D,t[1]=(-E*n+s*x)*D,t[2]=(m*n-s*f)*D,t[3]=I*D,t[4]=(E*i-s*y)*D,t[5]=(-m*i+s*h)*D,t[6]=P*D,t[7]=(-x*i+n*y)*D,t[8]=(f*i-n*h)*D,t}function Oue(t,e){const i=e[0],n=e[1],s=e[2],h=e[3],f=e[4],m=e[5],y=e[6],x=e[7],E=e[8],k=e[9],I=e[10],P=e[11],L=e[12],D=e[13],j=e[14],H=e[15],W=i*m-n*f,Z=i*y-s*f,Y=i*x-h*f,te=n*y-s*m,ie=n*x-h*m,le=s*x-h*y,pe=E*D-k*L,ve=E*j-I*L,be=E*H-P*L,Se=k*j-I*D,Me=k*H-P*D,he=I*H-P*j;let se=W*he-Z*Me+Y*Se+te*be-ie*ve+le*pe;return se?(se=1/se,t[0]=(m*he-y*Me+x*Se)*se,t[1]=(y*be-f*he-x*ve)*se,t[2]=(f*Me-m*be+x*pe)*se,t[3]=(s*Me-n*he-h*Se)*se,t[4]=(i*he-s*be+h*ve)*se,t[5]=(n*be-i*Me-h*pe)*se,t[6]=(D*le-j*ie+H*te)*se,t[7]=(j*Y-L*le-H*Z)*se,t[8]=(L*ie-D*Y+H*W)*se,t):null}function Pue(t,e,i){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function Rue(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function Nue(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2)}function Lue(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t}function Wj(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t}function Due(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t}function zue(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t[3]=e[3]+i[3]*n,t[4]=e[4]+i[4]*n,t[5]=e[5]+i[5]*n,t[6]=e[6]+i[6]*n,t[7]=e[7]+i[7]*n,t[8]=e[8]+i[8]*n,t}function Fue(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function jue(t,e){const i=t[0],n=t[1],s=t[2],h=t[3],f=t[4],m=t[5],y=t[6],x=t[7],E=t[8],k=e[0],I=e[1],P=e[2],L=e[3],D=e[4],j=e[5],H=e[6],W=e[7],Z=e[8],Y=Ni();return Math.abs(i-k)<=Y*Math.max(1,Math.abs(i),Math.abs(k))&&Math.abs(n-I)<=Y*Math.max(1,Math.abs(n),Math.abs(I))&&Math.abs(s-P)<=Y*Math.max(1,Math.abs(s),Math.abs(P))&&Math.abs(h-L)<=Y*Math.max(1,Math.abs(h),Math.abs(L))&&Math.abs(f-D)<=Y*Math.max(1,Math.abs(f),Math.abs(D))&&Math.abs(m-j)<=Y*Math.max(1,Math.abs(m),Math.abs(j))&&Math.abs(y-H)<=Y*Math.max(1,Math.abs(y),Math.abs(H))&&Math.abs(x-W)<=Y*Math.max(1,Math.abs(x),Math.abs(W))&&Math.abs(E-Z)<=Y*Math.max(1,Math.abs(E),Math.abs(Z))}function Gue(t){const e=Ni(),i=t[0],n=t[1],s=t[2],h=t[3],f=t[4],m=t[5],y=t[6],x=t[7],E=t[8];return Math.abs(1-(i*i+h*h+y*y))<=e&&Math.abs(1-(n*n+f*f+x*x))<=e&&Math.abs(1-(s*s+m*m+E*E))<=e}const Uue=sM,Bue=Wj;Object.freeze(Object.defineProperty({__proto__:null,add:Lue,adjoint:xue,copy:bue,determinant:Sue,equals:jue,exactEquals:Fue,frob:Nue,fromMat2d:Cue,fromMat4:vue,fromQuat:Iue,fromRotation:$ue,fromScaling:kue,fromTranslation:Mue,identity:Vj,invert:_ue,isOrthoNormal:Gue,mul:Uue,multiply:sM,multiplyScalar:Due,multiplyScalarAndAdd:zue,normalFromMat4:Oue,normalFromMat4Legacy:Aue,projection:Pue,rotate:qj,scale:Tue,scaleByVec2:Eue,set:Hj,str:Rue,sub:Bue,subtract:Wj,translate:BS,transpose:wue},Symbol.toStringTag,{value:"Module"}));function Kb(){const t=new Float32Array(9);return t[0]=1,t[4]=1,t[8]=1,t}function Hue(t){const e=new Float32Array(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function Vue(t,e,i,n,s,h,f,m,y){const x=new Float32Array(9);return x[0]=t,x[1]=e,x[2]=i,x[3]=n,x[4]=s,x[5]=h,x[6]=f,x[7]=m,x[8]=y,x}function que(t,e){return new Float32Array(t,e,9)}Object.freeze(Object.defineProperty({__proto__:null,clone:Hue,create:Kb,createView:que,fromValues:Vue},Symbol.toStringTag,{value:"Module"}));function Kj(){return new Float32Array(2)}function Wue(t){const e=new Float32Array(2);return e[0]=t[0],e[1]=t[1],e}function g0(t,e){const i=new Float32Array(2);return i[0]=t,i[1]=e,i}function Kue(t,e){return new Float32Array(t,e,2)}function Zj(){return Kj()}function Jj(){return g0(1,1)}function Yj(){return g0(1,0)}function Xj(){return g0(0,1)}const Zue=Zj(),Jue=Jj(),Yue=Yj(),Xue=Xj();Object.freeze(Object.defineProperty({__proto__:null,ONES:Jue,UNIT_X:Yue,UNIT_Y:Xue,ZEROS:Zue,clone:Wue,create:Kj,createView:Kue,fromValues:g0,ones:Jj,unitX:Yj,unitY:Xj,zeros:Zj},Symbol.toStringTag,{value:"Module"}));function Que(t){return t instanceof Float32Array&&t.length>=2}function ede(t){return Array.isArray(t)&&t.length>=2}function U5(t){return Que(t)||ede(t)}var HS;const Ll=[0,0];let Ql=HS=class extends De{constructor(t){super(t),this._viewpoint2D={center:at(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new Nt,this.id=0,this.inverseTransform=oa(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=oa(),this.transformNoRotation=oa(),this.displayMat3=Kb(),this.displayViewMat3=Kb(),this.viewMat3=Kb(),this.viewMat2d=Uj(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(t){this._set("pixelRatio",t),this._update()}set size(t){this._set("size",t),this._update()}set viewpoint(t){if(t){const e=this._viewpoint2D,i=t.targetGeometry;e.center[0]=i.x,e.center[1]=i.y,e.rotation=t.rotation,e.scale=t.scale,e.spatialReference=i.spatialReference}this._update()}get visibleArea(){const[t,e]=this.size;return[this.toMap([0,0],0,0),this.toMap([0,0],0,e),this.toMap([0,0],t,e),this.toMap([0,0],t,0)]}copy(t){const e=this.size,i=this.viewpoint;return i&&e?(this.viewpoint=ar(i,t.viewpoint),this._set("size",Fd(e,t.size))):(this.viewpoint=t.viewpoint.clone(),this._set("size",[t.size[0],t.size[1]])),this._set("pixelRatio",t.pixelRatio),this}clone(){return new HS({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(t,e,i){return U5(e)?el(t,e,this.inverseTransform):(Ll[0]=e,Ll[1]=i,el(t,Ll,this.inverseTransform))}toScreen(t,e,i){return U5(e)?el(t,e,this.transform):(Ll[0]=e,Ll[1]=i,el(t,Ll,this.transform))}toScreenNoRotation(t,e,i){return U5(e)?el(t,e,this.transformNoRotation):(Ll[0]=e,Ll[1]=i,el(t,Ll,this.transformNoRotation))}wrapMapCoordinate(t,e){Fd(t,e);const[i]=e,[n]=this.center,{extent:s,spatialReference:h}=this;let{xmin:f,xmax:m}=s;if(h.isWrappable){const y=zj(h)/2;f=Math.max(f,n-y),m=Math.min(m,n+y)}return(i<f||i>m)&&(t[0]=eM(i,n,h)),t}getScreenTransform(t,e){const{center:i}=this._viewpoint2D,n=this._get("pixelRatio")||1,s=this._get("size");return nM(t,i,s,e,0,n),t}_update(){const{center:t,spatialReference:e,scale:i,rotation:n}=this._viewpoint2D,s=this._get("pixelRatio")||1,h=this._get("size"),f=new na({targetGeometry:new Ne(t[0],t[1],e),scale:i,rotation:n});if(this._set("viewpoint",f),!h||!e||!i)return;this.resolution=B0(f),this.rotation=n,this.scale=i,this.spatialReference=e,Fd(this.center,t);const m=h[0]!==0?2/h[0]:0,y=h[1]!==0?-2/h[1]:0;Hj(this.displayMat3,m,0,0,0,y,0,-1,1,1);const x=Vj(this.viewMat3),E=g0(h[0]/2,h[1]/2),k=g0(-h[0]/2,-h[1]/2),I=CE(n);BS(x,x,E),qj(x,x,I),BS(x,x,k),sM(this.displayViewMat3,this.displayMat3,x);const P=QE(this.viewMat2d,E);return n_(P,P,I),Mm(P,P,k),tue(this.extent,f,h),rM(this.transform,f,h,s),i_(this.inverseTransform,this.transform),aue(this.transformNoRotation,f,h,s),this.worldScreenWidth=lue(this.spatialReference,this.resolution),this._set("id",this.id+1),this.notifyChange("visibleArea"),this}};_([S({readOnly:!0})],Ql.prototype,"id",void 0),_([S({value:1,json:{write:!0}})],Ql.prototype,"pixelRatio",null),_([S({json:{write:!0}})],Ql.prototype,"size",null),_([S()],Ql.prototype,"spatialReference",void 0),_([S({type:na,json:{write:!0}})],Ql.prototype,"viewpoint",null),_([S({readOnly:!0})],Ql.prototype,"visibleArea",null),Ql=HS=_([J("esri.views.2d.ViewState")],Ql);const Fk=Ql;var VS,qS;let vc=VS=class extends Oe{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new VS({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};_([S()],vc.prototype,"left",void 0),_([S()],vc.prototype,"top",void 0),_([S()],vc.prototype,"right",void 0),_([S()],vc.prototype,"bottom",void 0),vc=VS=_([J("esri.views.2d.PaddedViewState.Padding")],vc);let sf=qS=class extends Fk{constructor(...t){super(...t),this.paddedViewState=new Fk,this._updateContent=(()=>{const e=at();return()=>{const i=this._get("size"),n=this._get("padding");if(!i||!n)return;const s=this.paddedViewState;sn(e,n.left+n.right,n.top+n.bottom),Vi(e,i,e),Fd(s.size,e);const h=s.viewpoint;h&&(this.viewpoint=h)}})(),this.addHandles(Ee(()=>[this.size,this.padding],()=>this._updateContent(),Pc)),this.padding=new vc,this.size=[0,0]}set padding(t){this._set("padding",t||new vc)}set viewpoint(t){if(t){this.paddedViewState.viewpoint=t;let e=t;const i=this._get("padding");i&&(e=hue(t.clone(),t,this._get("size"),i));const{targetGeometry:n,rotation:s,scale:h}=e,{x:f,y:m,spatialReference:y}=n,x=this._viewpoint2D;x.center[0]=f,x.center[1]=m,x.rotation=s,x.scale=h,x.spatialReference=y,this._update()}}clone(){return new qS({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};_([S()],sf.prototype,"paddedViewState",void 0),_([S({type:vc})],sf.prototype,"padding",null),_([S()],sf.prototype,"viewpoint",null),sf=qS=_([J("esri.views.2d.PaddedViewState")],sf);const oM=sf;function wd(t,e,i,n){const s=3*t,h=3*(i-t)-s,f=1-s-h,m=3*e,y=3*(n-e)-m,x=1-m-y;function E(L){return((f*L+h)*L+s)*L}function k(L){return((x*L+y)*L+m)*L}function I(L){return(3*f*L+2*h)*L+s}function P(L,D){let j,H,W,Z,Y,te;for(W=L,te=0;te<8;te++){if(Z=E(W)-L,Math.abs(Z)<D)return W;if(Y=I(W),Math.abs(Y)<1e-6)break;W-=Z/Y}if(j=0,H=1,W=L,W<j)return j;if(W>H)return H;for(;j<H;){if(Z=E(W),Math.abs(Z-L)<D)return W;L>Z?j=W:H=W,W=.5*(H-j)+j}return W}return function(L,D=1e-6){return k(P(L,D))}}const tde=/^cubic-bezier\((.*)\)/,Wa={};function ide(t){let e=Wa[t]||null;if(!e){const i=tde.exec(t);if(i){const n=i[1].split(",").map(s=>parseFloat(s.trim()));n.length!==4||n.some(s=>isNaN(s))||(e=wd.apply(wd,n))}}return e}Wa.ease=wd(.25,.1,.25,1),Wa.linear=wd(0,0,1,1),Wa.easeIn=Wa["ease-in"]=wd(.42,0,1,1),Wa.easeOut=Wa["ease-out"]=wd(0,0,.58,1),Wa.easeInOut=Wa["ease-in-out"]=wd(.42,0,.58,1);let jk=class{constructor(e){this._view=e,this.viewpoint=new na({targetGeometry:new Ne,scale:0,rotation:0})}get view(){return this._view}get size(){const[e,i]=this._view.size;return Math.sqrt(e*e+i*i)}get scale(){return this.viewpoint.scale}get rotation(){return this.viewpoint.rotation}get center(){return this.viewpoint.targetGeometry}get scaleToResolutionFactor(){return Dj(this.center.spatialReference)}pixelsPerPanAtZoom(e){return 1/(e*this.scaleToResolutionFactor)}zoomAtPixelsPerPan(e){return 1/(e*this.scaleToResolutionFactor)}pixelsPerRotate(){return this.size/2}compareTo(e,i){i.pan=sN(this.center,e.center);let n=Math.abs(e.rotation-this.rotation);n=n>=180?360-n:n,i.rotate=xc(n),i.sourceZoom=this.scale,i.targetZoom=e.scale}interpolate(e,i,n){const{pan:s,rotate:h,zoom:f,zoomOffset:m}=n,{center:y}=this;y.spatialReference=e.center.spatialReference,y.x=R1(e.center.x,i.center.x,s),y.y=R1(e.center.y,i.center.y,s),this.viewpoint.scale=R1(e.scale,i.scale+m,f);let x=e.rotation;const E=i.rotation;Math.abs(E-x)>=180&&(x+=360*(x<E?1:-1)),this.viewpoint.rotation=R1(x,E,h)}copyFrom(e){ar(this.viewpoint,e.viewpoint),this._view=e.view}};const Qj=t=>t*t,nde=t=>1-Qj(1-t),rde=t=>2**(10*(t-1)),sde=t=>1-rde(1-t);function ode(t){const e=2*(t-Math.sqrt((t-1)*t)),i=e/2/t;return n=>n<i?t*n*n:e*n-e+1}function ade(t,e){return(i,n)=>i<e?e*t(i/e,n):1-t((1-i)/(1-e),n)*(1-e)}const Gk=ade(ode(1),.5);let lde=class{constructor(){this.pan=0,this.rotate=0,this.fov=0,this.sourceZoom=0,this.targetZoom=0}};const $m={desiredScreenFlow:2,minDuration:500,maxDuration:8e3},eG={...$m,maxDuration:4e3};let cde=class tG{constructor(e){this._createCamera=e,this.compared=new lde,this.segmentStart=0,this.segmentEnd=1,this.settings={desiredScreenFlow:$m.desiredScreenFlow},this.source=e(),this.target=e()}clone(){const e=new tG(this._createCamera);return e.copyFrom(this),e}copyFrom(e){this.update(e.source,e.target,e.settings)}update(e,i,n){this.source!==e&&this.source.copyFrom(e),this.target!==i&&this.target.copyFrom(i),this.source.compareTo(this.target,this.compared),this.settings.desiredScreenFlow=n.desiredScreenFlow??$m.desiredScreenFlow,this.desiredPixelFlow=this.settings.desiredScreenFlow*this.target.size,this.halfWindowSize=this.target.size/2}halfWindowPanAtZoom(e){const i=this.target.pixelsPerPanAtZoom(e);return this.halfWindowSize/i}get hasZoom(){return Math.abs(this.compared.sourceZoom-this.compared.targetZoom)>1e-5}get hasPan(){return this.compared.pan>Ni()}get hasFov(){return Math.abs(this.compared.fov)>Ni()}get hasRotate(){return this.compared.rotate>Ni()}},hde=class{constructor(){this.pan=0,this.rotate=0,this.zoom=0,this.fov=0,this.zoomOffset=0}},ude=class{constructor(){this.segments=new Array}get time(){return this.segments.reduce((e,i)=>e+i.time,0)}interpolateComponentsAt(e,i){e=Math.min(Math.max(e,0),1),e*=this.time;let n=0,s=0;const h=this.definition,f=this.segments.reduce((m,y)=>m||y.definition.hasZoom,!1);for(let m=0;m<this.segments.length;m++){const y=this.segments[m],x=y.definition;if(e<=y.time||m===this.segments.length-1){if(this.segmentInterpolateComponentsAt(y,y.time===0?0:e/y.time,i),h.hasPan&&!isNaN(i.pan)&&isFinite(h.compared.pan)?i.pan=(n+x.compared.pan*i.pan)/h.compared.pan:i.pan=1,h.hasRotate&&!isNaN(i.rotate)&&isFinite(h.compared.rotate)?i.rotate=(s+x.compared.rotate*i.rotate)/h.compared.rotate:i.rotate=1,f&&!isNaN(i.zoom)&&isFinite(x.compared.targetZoom)){const{sourceZoom:E,targetZoom:k}=x.compared,I=i.zoom*(k-E)+E,P=this.segments[0].definition.compared.sourceZoom,L=this.segments[this.segments.length-1].definition.compared.targetZoom,D=Math.abs(k-P)>Math.abs(E-P)?k:E;i.zoomOffset=D-L,i.zoom=(I-P)/(D-P)}else i.zoom=1;return i}e-=y.time,n+=x.compared.pan,s+=x.compared.rotate}}segmentInterpolateComponentsAt(e,i,n){e.interpolateComponentsAt(i,n)}},B5=class{get time(){return this._time}constructor(e){e&&this.update(e)}update(e){e&&(this.definition?this.definition.copyFrom(e):this.definition=e.clone()),this._updatePrecomputedVariables(),this._updatePixelFlow()}_updatePrecomputedVariables(){const e=this.definition,i=e.compared,n=i.sourceZoom,s=i.targetZoom;this._zoomSign=n>s?1:-1,this._panPixelsAtSource=i.pan*e.source.pixelsPerPanAtZoom(n);const h=(e.source.pixelsPerRotate()+e.target.pixelsPerRotate())/2;this._rotatePixels=i.rotate*h}_updatePixelFlow(){const e=this.definition.compared.sourceZoom,i=this.definition.compared.targetZoom,{hasZoom:n,hasPan:s,hasRotate:h}=this.definition;let f=0,m=0;n&&(s&&(f=(i/e-1)/(-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2*this._panPixelsAtSource)),h&&(m=this._zoomSign*(Math.log(e/i)/Math.LN2)*this.definition.halfWindowSize/this._rotatePixels)),this._zoomPixelFlow=0,this._panPixelFlow=0,this._rotatePixelFlow=0;const y=this.definition.desiredPixelFlow;if(n&&s&&h){const x=f+m+f*m;this._zoomPixelFlow=f*m/x*y,this._panPixelFlow=m/x*y,this._rotatePixelFlow=f/x*y}else if(n&&s){const x=1+f;this._zoomPixelFlow=f/x*y,this._panPixelFlow=1/x*y}else if(n&&h){const x=1+m;this._zoomPixelFlow=m/x*y,this._rotatePixelFlow=1/x*y}else if(s&&h){const x=this._panPixelsAtSource/this._rotatePixels,E=1+x;this._panPixelFlow=x/E*y,this._rotatePixelFlow=1/E*y}else s?this._panPixelFlow=y:n?this._zoomPixelFlow=y:h&&(this._rotatePixelFlow=y);if(this._time=Math.max(this.rotateTime,this.zoomTime,this.panTime),this.fovTime>this._time){const x=this.fovTime/this._time;this._time=this.fovTime,this._zoomPixelFlow/=x,this._panPixelFlow/=x,this._rotatePixelFlow/=x}}get rotateTime(){return this.definition.hasRotate?this._rotatePixels/this._rotatePixelFlow:0}get zoomTime(){return this.definition.hasZoom?this._zoomSign*(Math.log(this.definition.compared.sourceZoom/this.definition.compared.targetZoom)/Math.LN2)*this.definition.halfWindowSize/this._zoomPixelFlow:0}get fovTime(){return this.definition.hasFov?Math.abs(this.definition.compared.fov)/dde:0}get panTime(){if(!this.definition.hasPan)return 0;if(this.definition.hasZoom){const e=-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2,i=e*this._panPixelsAtSource;return Math.log(i*(this._zoomPixelFlow/this._panPixelFlow)+1)/(e*this._zoomPixelFlow)}return this._panPixelsAtSource/this._panPixelFlow}_interpolateComponentsZoom(e){if(e===0||e===1)return e;if(this.definition.hasZoom){const i=this.definition.compared.sourceZoom,n=this.definition.compared.targetZoom;return(i*(i/n)**-e-i)/(n-i)}return e}_interpolateComponentsFov(e){if(e===0)return this.definition.segmentStart;if(e===1)return this.definition.segmentEnd;if(this.definition.hasFov){const{segmentStart:i,segmentEnd:n}=this.definition;return i+e*(n-i)}return this.definition.segmentStart}_interpolateComponentsPan(e){if(e===0||e===1)return e;if(this.definition.hasPan&&this.definition.hasZoom){const i=-1/(this._zoomSign*this.definition.halfWindowSize)*this._zoomPixelFlow;return 1/this._panPixelsAtSource*(this._panPixelFlow*(2**(i*e*this._time)-1))/(i*Math.LN2)}return e}_interpolateComponentsRotate(e){return e}interpolateComponentsAt(e,i){e=Math.min(Math.max(e,0),1),i.zoom=this._interpolateComponentsZoom(e),i.pan=this._interpolateComponentsPan(e),i.rotate=this._interpolateComponentsRotate(e),i.zoomOffset=0,i.fov=this._interpolateComponentsFov(e)}};const dde=xc(45);function pde(t,e,i){const n=e-t.compared.sourceZoom,s=t.halfWindowPanAtZoom(n);return-t.halfWindowSize*(i.ascensionFactor*Math.LN2*t.compared.pan+s)*Math.log(t.compared.sourceZoom/e)/(t.desiredPixelFlow*Math.LN2*s)}function fde(t,e,i){const n=1/e,s=Math.log(t.compared.sourceZoom*n),h=1/t.desiredPixelFlow,f=1/Math.LN2,m=e-t.compared.sourceZoom,y=1/m,x=(i.ascensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(m))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*n*h*f*y*x-t.halfWindowSize*s*h*f*y+t.halfWindowSize*s*h*f*x/(m*m)}function gde(t,e,i){const n=e-t.compared.sourceZoom,s=1/n,h=1/e,f=Math.log(t.compared.sourceZoom*h),m=(i.ascensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(n))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*s*(-2*s*h*m+2*s*f+2*h-2*f*m/(n*n)-m/(e*e))/(t.desiredPixelFlow*Math.LN2)}function mde(t,e){return-t.halfWindowSize*Math.log(t.compared.sourceZoom/e)/(t.desiredPixelFlow*Math.LN2)}function yde(t,e){return t.halfWindowSize/(e*t.desiredPixelFlow*Math.LN2)}function vde(t,e){return-t.halfWindowSize/(e*e*t.desiredPixelFlow*Math.LN2)}function bde(t,e,i){return-t.compared.pan*t.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e))}function wde(t,e,i){return t.compared.pan*t.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e*e))}function _de(t,e,i){return-2*t.compared.pan*t.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e*e*e))}function xde(t,e,i){return t.halfWindowSize*(-t.halfWindowPanAtZoom(e)-i.descensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(t.compared.targetZoom))*Math.log(e/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2*t.halfWindowPanAtZoom(-e+t.compared.targetZoom))}function Sde(t,e,i){const n=Math.log(e/t.compared.targetZoom),s=1/t.desiredPixelFlow,h=1/Math.LN2,f=-e+t.compared.targetZoom,m=1/f,y=(-t.halfWindowPanAtZoom(e)-i.descensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(t.compared.targetZoom))/t.halfWindowPanAtZoom(1);return-t.halfWindowSize*n*s*h*m+t.halfWindowSize*n*s*h*y/(f*f)+t.halfWindowSize*s*h*m*y/e}function Tde(t,e,i){const n=e-t.compared.targetZoom,s=1/n,h=1/e,f=Math.log(e/t.compared.targetZoom),m=(t.halfWindowPanAtZoom(e)+i.descensionFactor*Math.LN2*t.compared.pan-t.halfWindowPanAtZoom(t.compared.targetZoom))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*s*(-2*s*h*m-2*s*f+2*h+2*f*m/(n*n)-m/(e*e))/(t.desiredPixelFlow*Math.LN2)}function Ede(t,e){return t.halfWindowSize*Math.log(e/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2)}function Mde(t,e){return t.halfWindowSize/(e*t.desiredPixelFlow*Math.LN2)}function $de(t,e){return-t.halfWindowSize/(e*e*t.desiredPixelFlow*Math.LN2)}function kde(t){const e=t.compared.sourceZoom-t.compared.targetZoom;if(e===0)return t.compared.pan*t.halfWindowSize/(t.desiredPixelFlow*t.halfWindowPanAtZoom(t.compared.sourceZoom));const i=Math.LN2*t.compared.pan,n=e,s=t.halfWindowPanAtZoom(n),h=t.halfWindowSize*Math.log(t.compared.sourceZoom/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2*s);return t.compared.sourceZoom<=t.compared.targetZoom?h*(i-s):h*(i+s)}function Cde(t,e){let i=Ide(t,e);const n={ascensionFactor:e.ascensionFactor!=null?e.ascensionFactor:.5,descensionFactor:e.descensionFactor!=null?e.descensionFactor:.5},s=n.ascensionFactor===0,h=n.descensionFactor===0,f=s?mde:pde,m=s?yde:fde,y=s?vde:gde,x=h?Ede:xde,E=h?Mde:Sde,k=h?$de:Tde,I=Y=>f(t,Y,n)+bde(t,Y,n)+x(t,Y,n),P=Y=>m(t,Y,n)+wde(t,Y,n)+E(t,Y,n),L=Y=>y(t,Y,n)+_de(t,Y,n)+k(t,Y,n);let D=I(i);const j=kde(t);let H;const W=e.maximumIterations||20,Z=e.maximumDistance!=null?e.maximumDistance:1/0;for(H=0;H<W;H++){const Y=e.desiredSlope??1e-6;let te=P(i);Math.abs(te)>Y&&(te+=Y);const ie=te/L(i);if(isNaN(ie)||i>=Z&&ie<0){if(!isFinite(Z))return null;i=Z,D=I(i);break}if(i-=ie,i<t.compared.sourceZoom||i<t.compared.targetZoom)return null;const le=I(i);if(Math.abs(le-D)/D<=.005)break;D=le}return D>j*(1-.3)||i<t.compared.sourceZoom||i<t.compared.targetZoom?null:i}function Ide(t,e){const i=Math.max(t.compared.sourceZoom,t.compared.targetZoom),n=t.source.zoomAtPixelsPerPan(t.desiredPixelFlow/t.compared.pan)/2;return n<i?e.maximumDistance!=null?i+(e.maximumDistance-i)/2:1.5*i:e.maximumDistance?Math.min(e.maximumDistance,n):n}let Ade=class extends ude{constructor(e,i){super(),this._preallocSegments=[new B5,new B5,new B5],this._ascensionSegment=null,this._descensionSegment=null,this.update(e,i)}update(e,i){if(!e)return;this.definition?this.definition.copyFrom(e):this.definition=e.clone();const n=i!=null&&i.apex?Cde(e,i.apex):null;this.segments.length=0,this._ascensionSegment=null,this._descensionSegment=null,n?this._updateWithApex(n,i==null?void 0:i.apex):this._updateWithoutApex()}segmentInterpolateComponentsAt(e,i,n){e.interpolateComponentsAt(i,n),e===this._ascensionSegment?n.zoom=nde(n.zoom):e===this._descensionSegment&&(n.zoom=Qj(n.zoom))}_updateWithApex(e,i){const[n,s,h]=this._preallocSegments,f=(i==null?void 0:i.ascensionFactor)??.5,m=Math.min(1-f,(i==null?void 0:i.ascensionFactor)!=null&&i.descensionFactor!=null?i.descensionFactor:.5),y=1-f-m;n.definition?n.definition.copyFrom(this.definition):n.definition=this.definition.clone(),n.definition.compared.targetZoom=e,n.definition.compared.pan=this.definition.compared.pan*f,n.definition.compared.rotate=this.definition.compared.rotate*f,n.definition.segmentEnd=f,n.update(),this._ascensionSegment=n,this.segments.push(n),y>0&&(s.definition?s.definition.copyFrom(this.definition):s.definition=this.definition.clone(),s.definition.copyFrom(this.definition),s.definition.compared.sourceZoom=e,s.definition.compared.targetZoom=e,s.definition.compared.pan=this.definition.compared.pan*y,s.definition.compared.rotate=this.definition.compared.rotate*y,s.definition.segmentStart=n.definition.segmentEnd,s.definition.segmentEnd=n.definition.segmentEnd+y,s.update(),this.segments.push(s)),h.definition?h.definition.copyFrom(this.definition):h.definition=this.definition.clone(),h.definition.compared.sourceZoom=e,h.definition.compared.pan=this.definition.compared.pan*m,h.definition.compared.rotate=this.definition.compared.rotate*m,h.definition.segmentStart=f+y,h.update(),this._descensionSegment=h,this.segments.push(h)}_updateWithoutApex(){const[e]=this._preallocSegments;e.update(this.definition),this.segments.push(e)}};const Ode=new hde;let Pde=class{get time(){return this._time}get isLinear(){return this.path.segments.length===1}constructor(e){this._time=0,this._easing=Gk,this.definition=new cde(e),this.path=new Ade}update(e,i,n){this.definition.update(e,i,n),this.path.update(this.definition,n),this._time=this._applyTimeSettings(tZ(isFinite(this.path.time)?this.path.time:0),n),this._easing=n.easing??(this._time>=1e3?Gk:sde)}cameraAt(e,i){e=Math.min(Math.max(0,e),1),e=this._normalizedEasing(e);const n=this.path.interpolateComponentsAt(e,Ode);i.interpolate(this.definition.source,this.definition.target,n)}_normalizedEasing(e){const i=this._easing(0,this._time),n=this._easing(1,this._time);return(this._easing(e,this._time)-i)/(n-i)}_applyTimeSettings(e,i){const n=i.speedFactor!=null?i.speedFactor:1,s=i.minDuration??$m.minDuration/n,h=i.maxDuration??$m.maxDuration/n;return e=i.duration!=null?i.duration:Math.min(Math.max(e/n,s),h)}};const Uk=2e3,Rde=64;let Nde=class{constructor(e){this._view=e,this._animation=new Pde(()=>new jk(this._view)),this._current=new jk(this._view)}get _source(){return this._animation.definition.source}get _target(){return this._animation.definition.target}get duration(){return this._animation.time}get animation(){return this._animation}update(e,i,n={}){ar(this._current.viewpoint,e),ar(this._source.viewpoint,e),ar(this._target.viewpoint,i),this._animation.update(this._source,this._target,n)}applyRatio(e,i){this._animation.cameraAt(i,this._current),ar(e,this._current.viewpoint)}},of=class extends Oe{constructor(e){super(e),this._animation=null,this._destinationViewState=new oM,this.updateFunction=null,this.easing=Wa.ease,this.viewpoint=new na({targetGeometry:new Ne,scale:0,rotation:0}),this._updateTask=Xf({postRender:this._postRender.bind(this)}),this._updateTask.pause(),this._transition=new Nde(e.view)}destroy(){this._updateTask=Rt(this._updateTask)}get animation(){return this._animation}set animation(e){this._animation=e,this.view.animation=e}animate(e,i,n){this.stop();const s=this.viewpoint;ar(s,i);const h=(typeof(n==null?void 0:n.easing)=="string"?ide(n.easing):n==null?void 0:n.easing)||this.easing,f=e.target;this._transition.update(this.viewpoint,f,{apex:{maximumDistance:Math.min(Math.min(i.scale,f.scale)*Rde,this.view.constraints.effectiveMinScale),desiredSlope:5e-8},duration:n==null?void 0:n.duration,maxDuration:(n==null?void 0:n.animationMode)==="auto"?1/0:(n==null?void 0:n.maxDuration)??eG.maxDuration,speedFactor:n==null?void 0:n.speedFactor,easing:typeof h=="function"?y=>h(y):void 0}),(n==null?void 0:n.animationMode)==="auto"&&(this._destinationViewState.copy(this.view.state),this._destinationViewState.viewpoint=f,Lde(this._transition.animation,n,this.view.state,this._destinationViewState)||this._transition.update(this.viewpoint,f,{duration:0}));const m=()=>{this.animation===e&&this._updateTask&&(e.state==="finished"&&(this._transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(m,m),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinuous(e,i){this.stop(),this.updateFunction=i,this.viewpoint=e;const n=new FS({target:e.clone()}),s=()=>{this.animation===n&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return n.when(s,s),this._startTime=performance.now(),this._updateTask.resume(),this.animation=n,n}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){var n,s;const i=this.animation;if(i&&i.state!==FS.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime),(n=this.animation)==null||n.update(this.viewpoint);else{const h=performance.now()-this._startTime,f=this._transition.duration,m=f>0?h/f:1,y=m>=1;this._transition.applyRatio(this.viewpoint,m),y&&((s=this.animation)==null||s.finish())}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};function Lde(t,e,i,n){if((e==null?void 0:e.duration)!=null)return!0;const{time:s,isLinear:h}=t,f=(e==null?void 0:e.speedFactor)||1,m=(e==null?void 0:e.maxDuration)??eG.maxDuration/f;if(de("esri-goto-debug")&&(console.log("speed factor:",f),console.log("adjusted duration:		",s),console.log("adjusted max duration:	",m),console.log("is linear:",h)),s>m)return de("esri-goto-debug")&&console.warn(`failed "auto" heuristic: animations must be shorter than ${m/1e3}s`),!1;if(h){const x=at(),E=Ri(...n.toScreen(x,...i.center)),k=Ri(...i.toScreen(x,...n.center)),I=k!=null&&k.x>-(1.5-.5)*i.size[0]&&k.x<(1.5+.5)*i.size[0]&&k.y>-(1.5-.5)*i.size[1]&&k.y<(1.5+.5)*i.size[1],P=E!=null&&E.x>-(1.5-.5)*n.size[0]&&E.x<(1.5+.5)*n.size[0]&&E.y>-(1.5-.5)*n.size[1]&&E.y<(1.5+.5)*n.size[1];if(de("esri-goto-debug")&&(console.log(`dest is within ${1.5} screens at start view:`,I),console.log(`start is within ${1.5} screens at dest view:`,P)),s>Uk/f&&!I&&!P)return de("esri-goto-debug")&&console.warn(`failed "auto" heuristic: linear animations must be...
  - shorter than ${Uk/1e3/f}s, or
  - shorter than ${m/1e3}s and the destination is close enough to the starting screen, or
  - shorter than ${m/1e3}s and the start point is close enough to the destination screen`),!1}return!0}_([S()],of.prototype,"easing",void 0),_([S()],of.prototype,"view",void 0),_([S()],of.prototype,"viewpoint",void 0),of=_([J("esri.views.2d.AnimationManager")],of);const Dde=of;var er;(function(t){t[t.ANIMATING=0]="ANIMATING",t[t.INTERACTING=1]="INTERACTING",t[t.IDLE=2]="IDLE"})(er||(er={}));const iG=Symbol("Yield");let zde=class{constructor(){this._tasks=new Array,this._runningTasks=vm(0)}get length(){return this._tasks.length}get running(){return this._runningTasks.value>0}destroy(){this.cancelAll()}runTask(e){if(this.length===0)return iG;for(;!e.done&&this._process(e);)e.madeProgress()}push(e,i,n){return++this._runningTasks.value,new Promise((s,h)=>this._tasks.push(new Bk(s,h,e,i,n))).finally(()=>--this._runningTasks.value)}unshift(e,i,n){return++this._runningTasks.value,new Promise((s,h)=>this._tasks.unshift(new Bk(s,h,e,i,n))).finally(()=>--this._runningTasks.value)}_process(e){var n;if(this._tasks.length===0)return!1;const i=this._tasks.shift();try{const s=Ps(i.signal);if(s&&!i.abortCallback)i.reject(ei());else{const h=s?(n=i.abortCallback)==null?void 0:n.call(i,ei()):i.callback(e);Ml(h)?h.then(i.resolve,i.reject):i.resolve(h)}}catch(s){i.reject(s)}return!0}cancelAll(){const e=ei();for(const i of this._tasks)if(i.abortCallback){const n=i.abortCallback(e);i.resolve(n)}else i.reject(e);this._tasks.length=0}},Bk=class{constructor(e,i,n,s=void 0,h=void 0){this.resolve=e,this.reject=i,this.callback=n,this.signal=s,this.abortCallback=h}},gg=class extends Oe{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};_([S()],gg.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),_([S()],gg.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),gg=_([J("esri.views.support.debugFlags")],gg);const Fde=new gg;function jde(){return new uw.Scheduler}var nt;(function(t){t.RESOURCE_CONTROLLER_IMMEDIATE="immediate",t.RESOURCE_CONTROLLER="schedule",t.SLIDE="slide",t.STREAM_DATA_LOADER="stream loader",t.ELEVATION_QUERY="elevation query",t.TERRAIN_SURFACE="terrain",t.SURFACE_GEOMETRY_UPDATES="surface geometry updates",t.LOD_RENDERER="LoD renderer",t.GRAPHICS_CORE="Graphics3D",t.I3S_CONTROLLER="I3S",t.POINT_CLOUD_LAYER="point cloud",t.FEATURE_TILE_FETCHER="feature fetcher",t.OVERLAY="overlay",t.STAGE="stage",t.GRAPHICS_DECONFLICTOR="graphics deconflictor",t.FILTER_VISIBILITY="Graphics3D filter visibility",t.SCALE_VISIBILITY="Graphics3D scale visibility",t.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",t.POINT_OF_INTEREST_FREQUENT="POI frequent",t.POINT_OF_INTEREST_INFREQUENT="POI infrequent",t.LABELER="labeler",t.FEATURE_QUERY_ENGINE="feature query",t.FEATURE_TILE_TREE="feature tile tree",t.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",t.ELEVATION_ALIGNMENT="elevation alignment",t.ELEVATION_ALIGNMENT_SCENE="elevation alignment scene",t.TEXT_TEXTURE_ATLAS="text texture atlas",t.TEXTURE_UNLOAD="texture unload",t.LINE_OF_SIGHT_TOOL="line of sight tool",t.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",t.ELEVATION_PROFILE="elevation profile",t.SNAPPING="snapping",t.SHADOW_ACCUMULATOR="shadow accumulator",t.CLOUDS_GENERATOR="clouds generator",t.MAPVIEW_FETCH_QUEUE="mapview fetch queue",t.MAPVIEW_LAYERVIEW_UPDATE="mapview layerview update",t.MAPVIEW_VECTOR_TILE_PARSING_QUEUE="mapview vector tile parsing queue",t[t.NONE=0]="NONE",t[t.TEST_PRIO=1]="TEST_PRIO"})(nt||(nt={}));const no=0,Hk=new Map([[nt.RESOURCE_CONTROLLER_IMMEDIATE,no],[nt.RESOURCE_CONTROLLER,4],[nt.SLIDE,no],[nt.STREAM_DATA_LOADER,no],[nt.ELEVATION_QUERY,no],[nt.TERRAIN_SURFACE,1],[nt.SURFACE_GEOMETRY_UPDATES,1],[nt.LOD_RENDERER,2],[nt.GRAPHICS_CORE,2],[nt.I3S_CONTROLLER,2],[nt.POINT_CLOUD_LAYER,2],[nt.FEATURE_TILE_FETCHER,2],[nt.CLOUDS_GENERATOR,2],[nt.OVERLAY,4],[nt.STAGE,4],[nt.GRAPHICS_DECONFLICTOR,4],[nt.FILTER_VISIBILITY,4],[nt.SCALE_VISIBILITY,4],[nt.FRUSTUM_VISIBILITY,4],[nt.POINT_OF_INTEREST_FREQUENT,6],[nt.POINT_OF_INTEREST_INFREQUENT,30],[nt.LABELER,8],[nt.FEATURE_QUERY_ENGINE,8],[nt.FEATURE_TILE_TREE,16],[nt.FEATURE_TILE_TREE_ACTIVE,no],[nt.ELEVATION_ALIGNMENT,12],[nt.ELEVATION_ALIGNMENT_SCENE,14],[nt.TEXT_TEXTURE_ATLAS,12],[nt.TEXTURE_UNLOAD,12],[nt.LINE_OF_SIGHT_TOOL,16],[nt.LINE_OF_SIGHT_TOOL_INTERACTIVE,no],[nt.SNAPPING,no],[nt.SHADOW_ACCUMULATOR,30],[nt.MAPVIEW_FETCH_QUEUE,no],[nt.MAPVIEW_LAYERVIEW_UPDATE,2],[nt.MAPVIEW_VECTOR_TILE_PARSING_QUEUE,no]]);function Vk(t){return Hk.has(t)?Hk.get(t):typeof t=="number"?t:1}const Gde=6.5,qk=1,Ude=30,Bde=1e3/30,Hde=100,Wk=.9;var uw,Cu;(function(t){class e{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(h=>h.needsUpdate)}constructor(){this._updating=vm(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new Og("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new n,this._state=er.INTERACTING,this._tasks=new Pg,this._runQueue=new Pg,this._load=0,this._idleStateCallbacks=new Pg,this._idleUpdatesStartFired=!1,this._forceTask=!1,this._debug=!1,this._debugHandle=Ee(()=>Fde.SCHEDULER_LOG_SLOW_TASKS,h=>this._debug=h,Ct);for(const h of Object.keys(nt))this.performanceInfo.tasks.set(nt[h],new Og(nt[h]))}destroy(){this._tasks.toArray().forEach(h=>h.remove()),this._tasks.clear(),Rt(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(h){this._updatingChanged(),h&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this.frame())}))}registerTask(h,f){const m=new i(this,h,f);return this._tasks.push(m),this._updatingChanged(),this.performanceInfo.tasks.has(h)||this.performanceInfo.tasks.set(h,new Og(h)),m}registerIdleStateCallbacks(h,f){const m={idleBegin:h,idleEnd:f};this._idleStateCallbacks.push(m),this.state===er.IDLE&&this._idleUpdatesStartFired&&m.idleBegin();const y=this;return{remove:()=>this._removeIdleStateCallbacks(m),set idleBegin(x){y._idleUpdatesStartFired&&(m.idleEnd(),y._state===er.IDLE&&x()),m.idleBegin=x},set idleEnd(x){m.idleEnd=x}}}get load(){return this._load}set state(h){this._state!==h&&(this._state=h,this.state!==er.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(f=>f.idleEnd())))}get state(){return this._state}updateBudget(h){this._test&&(this._test.usedBudget=0),++this._frameNumber;let f=Gde,m=h.frameDuration,y=qk;switch(this.state){case er.IDLE:f=0,m=Math.max(Hde,h.frameDuration),y=Ude;break;case er.INTERACTING:m=Math.max(Bde,h.frameDuration);case er.ANIMATING:}return m=m-h.elapsedFrameTime-f,this.state!==er.IDLE&&m<qk&&!this._forceTask?(this._forceTask=!0,!1):(m=Math.max(m,y),this._budget.reset(m,this.state),this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case er.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(h=>h.idleBegin())),this._runIdle();break;case er.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test&&(this._test.usedBudget=this._budget.elapsed)}stopFrame(){this._budget.reset(0,this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(h){this._idleUpdatesStartFired&&h.idleEnd(),this._idleStateCallbacks.removeUnordered(h)}removeTask(h){this._tasks.removeUnordered(h),this._runQueue.removeUnordered(h),this._updatingChanged()}_updateTask(h){this._tasks.forAll(f=>{f.name===h&&f.setPriority(h)})}_getState(h){if(this._runQueue.some(m=>m.name===h))return Cu.SCHEDULED;let f=Cu.IDLE;return this._tasks.forAll(m=>{m.name===h&&m.needsUpdate&&(m.schedulePriority<=1?f=Cu.READY:f!==Cu.READY&&(f=Cu.WAITING))}),f}_getRuntime(h){let f=0;return this._tasks.forAll(m=>{m.name===h&&(f+=m.runtime)}),f}_resetRuntimes(){this._tasks.forAll(h=>h.runtime=0)}_getRunning(){const h=new Map;if(this._tasks.forAll(m=>{m.needsUpdate&&h.set(m.name,(h.get(m.name)||0)+1)}),h.size===0)return null;let f="";return h.forEach((m,y)=>{f+=m>1?` ${m}x ${y}`:` ${y}`}),f}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const h=this._tasks.reduce((f,m)=>m.needsUpdate?++f:f,0);this._load=this._load*Wk+h*(1-Wk)}_schedule(){for(this._runQueue.filterInPlace(h=>!!h.needsUpdate||(h.schedulePriority=h.basePriority,!1)),this._tasks.forAll(h=>{h.basePriority===no&&h.needsUpdate&&!this._runQueue.includes(h)&&h.blockFrame!==this._frameNumber&&this._runQueue.unshift(h)});this._runQueue.length===0;){let h=!1,f=0;if(this._tasks.forAll(m=>{m.needsUpdate&&m.schedulePriority!==0&&m.basePriority!==no&&m.blockFrame!==this._frameNumber&&(h=!0,f=Math.max(f,m.basePriority),m.schedulePriority===1?(m.schedulePriority=0,this._runQueue.push(m)):--m.schedulePriority)}),!h)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){const h=this._budget.now();this._startFrameTaskTimes();do for(;this._runQueue.length>0;){const f=this._budget.now(),m=this._runQueue.pop();this._budget.resetProgress();try{m.task.runTask(this._budget)===iG&&(m.blockFrame=this._frameNumber)}catch(x){Ae.getLogger("esri.views.support.Scheduler").error(`Exception in task "${m.name}"`,x),m.blockFrame=this._frameNumber}!this._budget.hasProgressed&&m.blockFrame!==this._frameNumber&&m.needsUpdate&&(m.name,nt.I3S_CONTROLLER,m.blockFrame=this._frameNumber),m.schedulePriority=m.basePriority;const y=this._budget.now()-f;if(m.runtime+=y,this._frameTaskTimes.set(m.priority,this._frameTaskTimes.get(m.priority)+y),this._budget.remaining<=0)return this._updatingChanged(),void this._recordFrameTaskTimes(this._budget.now()-h)}while(this._schedule());this._updatingChanged(),this._recordFrameTaskTimes(this._budget.now()-h)}_startFrameTaskTimes(){for(const h of Object.keys(nt))this._frameTaskTimes.set(nt[h],0)}_recordFrameTaskTimes(h){this._frameTaskTimes.forEach((f,m)=>this.performanceInfo.tasks.get(m).push(f)),this.performanceInfo.total.push(h)}get test(){return this._test}}t.Scheduler=e;class i{get task(){return this._task.value}get updating(){return this._queue.running}constructor(h,f,m){this._scheduler=h,this.name=f,this.blockFrame=0,this.runtime=0,this._queue=new zde,this._handles=new k0,this._basePriority=Vk(f),this.schedulePriority=this._basePriority,this._task=vm(m??this._queue),this._handles.add(ur(()=>this.task.running,y=>h.taskRunningChanged(y)))}remove(){this.processQueue(nG),this._scheduler.removeTask(this),this.schedule=dw.schedule,this.reschedule=dw.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(h){if(this.name===h)return;this.name=h;const f=Vk(h);this._basePriority!==no&&this.schedulePriority===0||(this.schedulePriority=f),this._basePriority=f}get priority(){return this.name}set priority(h){this.setPriority(h)}get needsUpdate(){return this.updating||this.task.running}schedule(h,f,m){return this._queue.push(h,f,m)}reschedule(h,f,m){return this._queue.unshift(h,f,m)}processQueue(h){return this._queue.runTask(h)}}class n{constructor(){this._begin=typeof performance<"u"?performance.now():0,this._budget=0,this._state=er.IDLE,this._done=!1,this._progressed=!1,this._enabled=!0}run(h){return!this.done&&(h()===!0&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get state(){return this._state}get enabled(){return this._enabled}set enabled(h){this._enabled=h}reset(h,f){this._begin=this.now(),this._budget=h,this._state=f,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return this.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}}t.Budget=n})(uw||(uw={})),function(t){t.SCHEDULED="s",t.READY="r",t.WAITING="w",t.IDLE="i"}(Cu||(Cu={}));const nG=(()=>{const t=new uw.Budget;return t.enabled=!1,t})();let Vde=class{remove(){}processQueue(){}schedule(e,i,n){try{if(Ps(i)){const s=ei();return n?Promise.resolve(n(s)):Promise.reject(s)}return Zx(e(nG))}catch(s){return Promise.reject(s)}}reschedule(e,i,n){return this.schedule(e,i,n)}};const dw=new Vde;let qde=class{constructor(e){this.view=e,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this._scheduler=jde(),this.stationary=!0,this.prepare=()=>{var i;this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions,this._updateParameters.targetState.copy(this.view.state),((i=this.view.animation)==null?void 0:i.target)==null||Ml(this.view.animation.target)||(this._updateParameters.targetState.viewpoint=this.view.animation.target))},this.update=i=>{var m;if(this._updateRequested=!1,(m=this.view)==null?void 0:m.destroyed)return;const{allLayerViews:n,graphicsView:s,labelManager:h,state:{id:f}}=this.view;n.forEach(this._updateLayerView,this),h!=null&&(h.lastUpdateId!==f&&(h.viewChange(),h.lastUpdateId=f),h.updateRequested&&h.processUpdate(this._updateParameters)),s!=null&&(s.lastUpdateId!==f&&(s.viewChange(),s.lastUpdateId=f),s.updateRequested&&s.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.view.animation?this._scheduler.state=er.ANIMATING:this.view.interacting?this._scheduler.state=er.INTERACTING:this._scheduler.state=er.IDLE,this._scheduler.updateBudget(i)&&this._scheduler.frame()}}destroy(){this.stop(),this._scheduler.destroy()}get scheduler(){return this._scheduler}start(){if(this._frameTaskHandle)return;const e=this.view;this.stationary=e.stationary,this._updateParameters={state:e.state,targetState:new oM,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:e.renderingOptions},this._stationaryHandle=Ee(()=>e.stationary,i=>{this.stationary=i,this.requestFrame()}),this._frameTaskHandle=Xf(this),this.requestUpdate()}stop(){var e;this._frameTaskHandle&&(this._updateRequested=!1,(e=this._stationaryHandle)==null||e.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(e){var s;if(!e.attached)return void this.requestUpdate();const i=this.view.state,n=e.lastUpdateId;n!=null&&(this.stationary||e.moving)||(e.moving=!0),n!==i.id&&e.viewChange(),this.stationary&&e.moving&&(e.moving=!1,e.moveEnd()),e.lastUpdateId=i.id,e.updateRequested&&e.processUpdate(this._updateParameters),"layerViews"in e&&((s=e.layerViews)==null||s.forEach(this._updateLayerView,this))}},Zb=class extends Oe{constructor(e){super(e),this._gotoTask=null}destroy(){this._gotoTask=null}async goTo(e,i){if(!e)return void Ae.getLogger(this).error("#goTo()","target cannot be null or undefined");const n=new FS;this.view.animation=n,await su(()=>this.view.ready,i);const s={...i,animate:(i==null?void 0:i.animate)??!JF(),animationMode:(i==null?void 0:i.animationMode)??"auto"},{extent:h,spatialReference:f,size:m,viewpoint:y,constraints:x,padding:E,allLayerViews:k}=this.view,I=Qhe(e,{extent:h,spatialReference:f,size:m,viewpoint:y,constraints:x,padding:E,allLayerViews:k,pickClosestTarget:(i==null?void 0:i.pickClosestTarget)??!0});return n==null||n.update(I),this._gotoTask={},s.animate?this._gotoAnimated(I,s):this._gotoImmediate(I,s)}_gotoImmediate(e,i){const n=this._gotoTask,s=this.view.animation,h=e.then(f=>{if(Jt(i),n!==this._gotoTask)throw new ce("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=s.target=f,s.finish()});return this._cancellableGoTo(n,s,h,i)}_gotoAnimated(e,i){const n=this._gotoTask,s=this.view.animation;if(!s)return Promise.resolve();const h=e.then(f=>{if(Jt(i),n!==this._gotoTask)throw new ce("view:goto-interrupted","Goto was interrupted");return s.update(f),this.view.animationManager.animate(s,this.view.viewpoint,i),s.when().then(()=>{},()=>{})});return this._cancellableGoTo(n,s,h,i)}_cancellableGoTo(e,i,n,s){const h=()=>e===this._gotoTask;return Qm(n,s).finally(()=>{h()&&(i.done||i.stop())})}};_([S({constructOnly:!0})],Zb.prototype,"view",void 0),Zb=_([J("esri.views.2d.GoToManager")],Zb);function di(){return Promise.all([ge(()=>import("./webglDeps-DHwI-S1G.js"),__vite__mapDeps([211,73,72,137,212,138]),import.meta.url),ge(()=>import("./mapViewDeps-C04MN2lW.js"),__vite__mapDeps([213,104,77,214,75,76,13,78,71,79,80,74,81,34,82,83,40,72,73,70,46,138,89,215,212,95,216,217,124,123,88,15,12,16,218,114,154,2,86,87,122,211,137,219,92,220,69,26,27,22,84,30,20,9,19,221,130,131,116,141,222,223,57,224,90,85,225,226,227,228,229,230,134,231]),import.meta.url)])}const p1=()=>di().then(()=>ge(()=>import("./TileLayerView2D-FGfdHBmX.js"),__vite__mapDeps([232,104,79,71,114,82,83,40,72,73,70,46,74,78,75,76,77,13,80,81,34,154,2,217,216,215,138,212,95,124,123,88,15,12,16,122,219,92,220,69,26,27,22,84,30,20,9,19,57,214,89,86,87,130,131,116,225,226,233,234,230,235,236,228,229,237,238,239,209,210,163,31,240,241,242,243]),import.meta.url)),Iu=()=>di().then(()=>ge(()=>import("./FeatureLayerView2D-C18Jmwtp.js").then(t=>t.F),__vite__mapDeps([244,217,15,12,13,16,178,245,162,235,216,229,82,83,40,72,73,70,71,46,74,230,215,138,212,95,124,123,88,214,75,76,77,78,79,80,81,34,89,92,246,150,185,181,84,152,3,218,114,247,177,240,243,237,238]),import.meta.url)),Kk={"base-dynamic":()=>di().then(()=>ge(()=>import("./BaseDynamicLayerView2D-DnjXxlaL.js"),__vite__mapDeps([248,249,215,70,71,72,73,46,74,138,212,95,216,217,124,123,88,15,12,13,16,235,250,234,237,238]),import.meta.url)),"base-tile":p1,"bing-maps":p1,catalog:()=>di().then(()=>ge(()=>import("./CatalogLayerView2D-DfZN-_xU.js"),__vite__mapDeps([251,235,216,217,237]),import.meta.url)),"catalog-dynamic-group":()=>di().then(()=>ge(()=>import("./CatalogDynamicGroupLayerView2D-Bpu6odSR.js"),__vite__mapDeps([252,235,216,217,237]),import.meta.url)),"catalog-footprint":()=>di().then(()=>ge(()=>import("./CatalogFootprintLayerView2D-CmmByhHf.js"),__vite__mapDeps([253,244,217,15,12,13,16,178,245,162,235,216,229,82,83,40,72,73,70,71,46,74,230,215,138,212,95,124,123,88,214,75,76,77,78,79,80,81,34,89,92,246,150,185,181,84,152,3,218,114,247,177,240,243,237,238]),import.meta.url)),csv:Iu,"geo-rss":()=>di().then(()=>ge(()=>import("./GeoRSSLayerView2D-DTfocgV8.js"),__vite__mapDeps([254,148,149,97,107,150,151,152,81,34,153,24,30,27,154,104,79,71,2,3,162,235,216,217,227,228,229,82,83,40,72,73,70,46,74,230,215,138,212,95,124,123,88,15,12,13,16,214,75,76,77,78,80,89,225,69,26,22,84,20,9,19,226,237]),import.meta.url)),feature:Iu,geojson:Iu,parquet:Iu,graphics:()=>di().then(()=>ge(()=>import("./GraphicsLayerView2D-BZzsMQX-.js"),__vite__mapDeps([255,235,216,217,227,228,229,82,83,40,72,73,70,71,46,74,230,215,138,212,95,124,123,88,15,12,13,16,214,75,76,77,78,79,80,81,34,89,225,30,27,154,104,2,69,26,22,84,20,9,19,226,247,237]),import.meta.url)),group:()=>di().then(()=>ge(()=>import("./GroupLayerView2D-dGz8fgJk.js"),__vite__mapDeps([256,235,216,217,237]),import.meta.url)),imagery:()=>di().then(()=>ge(()=>import("./ImageryLayerView2D-BY_U7_vD.js"),__vite__mapDeps([257,258,73,138,46,101,102,215,70,71,72,74,212,95,216,217,124,123,88,15,12,13,16,235,225,30,27,75,76,77,78,79,80,81,34,154,104,2,69,26,22,82,83,40,84,20,9,19,214,89,226,236,228,229,230,249,234,250,106,245,243,237,238]),import.meta.url)),"imagery-tile":()=>di().then(()=>ge(()=>import("./ImageryTileLayerView2D-rIBYX99i.js"),__vite__mapDeps([259,260,258,73,138,46,101,102,215,70,71,72,74,212,95,216,217,124,123,88,15,12,13,16,235,261,230,262,106,245,243,237,238]),import.meta.url)),kml:()=>di().then(()=>ge(()=>import("./KMLLayerView2D-C50kBXBE.js"),__vite__mapDeps([263,264,148,149,97,107,150,151,152,81,34,153,24,30,27,154,104,79,71,2,3,162,234,216,217,249,215,70,72,73,46,74,138,212,95,124,123,88,15,12,13,16,235,227,228,229,82,83,40,230,214,75,76,77,78,80,89,225,69,26,22,84,20,9,19,226,237,106,221,211,137,130,131,116,220,114,141,261]),import.meta.url)),"knowledge-graph":()=>di().then(()=>ge(()=>import("./KnowledgeGraphLayerView2D-D2faiymY.js"),__vite__mapDeps([265,235,216,217,237]),import.meta.url)),"link-chart":()=>di().then(()=>ge(()=>import("./KnowledgeGraphLayerView2D-D2faiymY.js"),__vite__mapDeps([265,235,216,217,237]),import.meta.url)),"knowledge-graph-sublayer":Iu,"map-image":()=>di().then(()=>ge(()=>import("./MapImageLayerView2D-Q-kkMAto.js"),__vite__mapDeps([266,249,215,70,71,72,73,46,74,138,212,95,216,217,124,123,88,15,12,13,16,235,225,30,27,75,76,77,78,79,80,81,34,154,104,2,69,26,22,82,83,40,84,20,9,19,214,89,226,236,228,229,230,250,234,237,267,240,241,245,238,239,209,210,163,31,242,243]),import.meta.url)),"map-notes":()=>di().then(()=>ge(()=>import("./MapNotesLayerView2D-DZlkRAld.js"),__vite__mapDeps([268,235,216,217,227,228,229,82,83,40,72,73,70,71,46,74,230,215,138,212,95,124,123,88,15,12,13,16,214,75,76,77,78,79,80,81,34,89,225,30,27,154,104,2,69,26,22,84,20,9,19,226,237]),import.meta.url)),media:()=>di().then(()=>ge(()=>import("./MediaLayerView2D-Dxz7hAv2.js"),__vite__mapDeps([269,149,97,107,150,151,152,81,34,153,148,24,30,27,154,104,79,71,2,3,270,226,114,82,83,40,72,73,70,46,74,78,75,76,77,13,80,217,216,215,138,212,95,124,123,88,15,12,16,122,219,92,220,69,26,22,84,20,9,19,57,214,89,86,87,130,131,116,225,224,90,271,235,237]),import.meta.url)),"ogc-feature":()=>di().then(()=>ge(()=>import("./OGCFeatureLayerView2D-BzBqPUuL.js"),__vite__mapDeps([272,244,217,15,12,13,16,178,245,162,235,216,229,82,83,40,72,73,70,71,46,74,230,215,138,212,95,124,123,88,214,75,76,77,78,79,80,81,34,89,92,246,150,185,181,84,152,3,218,114,247,177,240,243,237,238]),import.meta.url)),"open-street-map":p1,"oriented-imagery":Iu,route:()=>di().then(()=>ge(()=>import("./RouteLayerView2D-BqfPBoEs.js"),__vite__mapDeps([273,274,235,216,217,227,228,229,82,83,40,72,73,70,71,46,74,230,215,138,212,95,124,123,88,15,12,13,16,214,75,76,77,78,79,80,81,34,89,225,30,27,154,104,2,69,26,22,84,20,9,19,226,237]),import.meta.url)),stream:()=>di().then(()=>ge(()=>import("./StreamLayerView2D-EytdrvoW.js"),__vite__mapDeps([275,162,244,217,15,12,13,16,178,245,235,216,229,82,83,40,72,73,70,71,46,74,230,215,138,212,95,124,123,88,214,75,76,77,78,79,80,81,34,89,92,246,150,185,181,84,152,3,218,114,247,177,240,243,237,238]),import.meta.url)),"subtype-group":()=>di().then(()=>ge(()=>import("./SubtypeGroupLayerView2D-CdIVCS0P.js"),__vite__mapDeps([276,244,217,15,12,13,16,178,245,162,235,216,229,82,83,40,72,73,70,71,46,74,230,215,138,212,95,124,123,88,214,75,76,77,78,79,80,81,34,89,92,246,150,185,181,84,152,3,218,114,247,177,240,243,237,238]),import.meta.url)),tile:p1,"vector-tile":()=>di().then(()=>ge(()=>import("./VectorTileLayerView2D-RwvbJMU5.js"),__vite__mapDeps([277,122,80,57,223,114,89,24,78,73,138,123,215,70,71,72,46,74,212,95,216,217,124,88,15,12,13,16,230,18,125,126,104,235,237,238]),import.meta.url)),video:()=>di().then(()=>ge(()=>import("./VideoLayerView2D-CmO-Jpih.js"),__vite__mapDeps([278,279,271,95,215,70,71,72,73,46,74,138,212,216,217,124,123,88,15,12,13,16,214,75,76,77,78,79,80,81,34,82,83,40,89,235,227,228,229,230,225,30,27,154,104,2,69,26,22,84,20,9,19,226,237]),import.meta.url)),wcs:()=>di().then(()=>ge(()=>import("./ImageryTileLayerView2D-rIBYX99i.js"),__vite__mapDeps([259,260,258,73,138,46,101,102,215,70,71,72,74,212,95,216,217,124,123,88,15,12,13,16,235,261,230,262,106,245,243,237,238]),import.meta.url)),"web-tile":p1,wfs:Iu,wms:()=>di().then(()=>ge(()=>import("./WMSLayerView2D-B8QeMF-J.js"),__vite__mapDeps([280,249,215,70,71,72,73,46,74,138,212,95,216,217,124,123,88,15,12,13,16,235,250,234,237,238,281,245]),import.meta.url)),wmts:()=>di().then(()=>ge(()=>import("./WMTSLayerView2D-BN-cUdEN.js"),__vite__mapDeps([282,233,234,216,217,215,70,71,72,73,46,74,138,212,95,124,123,88,15,12,13,16,230,235,237,238]),import.meta.url)),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,focusArea:null,"integrated-mesh":null,"integrated-mesh-3dtiles":null,"point-cloud":null,viewshed:null,voxel:null,scene:null,unknown:null,unsupported:null};function Wde(t){const e=t.declaredClass?t.declaredClass.slice(t.declaredClass.lastIndexOf(".")+1):"Unknown",i=e.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new ce(`${i}:view-not-supported`,`${e} is not supported in 2D`)}const Zk={hasLayerViewModule:t=>Kk[t.type]!=null,importLayerView:t=>{const e=Kk[t.type];if(e==null)throw Wde(t);return e(t)}};function Kde(t,e){const{spatialReference:i}=e,n=[e.x,e.y];let s=Number.POSITIVE_INFINITY,h=0,f=0;const m=[0,0],y=t.type==="extent"?[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]:t.rings;for(const x of y)for(let E=0;E<x.length-1;E++){wX(m,n,x,E);const k=mp(n,m);k<s&&(s=k,h=m[0],f=m[1])}return{coordinate:new Ne({x:h,y:f,spatialReference:i}),distance:s}}var WS;let _d=WS=class extends IE(Oe){constructor(t){super(t),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return Qr(this.geometry,this.spatialReference)}catch(t){return Ae.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:t}),null}return this.geometry}constrain(t,e){if(this.normalizedGeometry==null)return t;const i=t.targetGeometry;if(this.normalizedGeometry.type==="extent"?ny(this.normalizedGeometry,i):UT(this.normalizedGeometry,i))return t;const{coordinate:n}=Kde(this.normalizedGeometry,i);return n&&(t.targetGeometry=n),t}clone(){var t,e;return new WS({geometry:(t=this.geometry)==null?void 0:t.clone(),spatialReference:(e=this.spatialReference)==null?void 0:e.clone()})}};_([S({constructOnly:!0})],_d.prototype,"geometry",void 0),_([S({readOnly:!0})],_d.prototype,"normalizedGeometry",null),_([S({constructOnly:!0})],_d.prototype,"spatialReference",void 0),_d=WS=_([J("esri.views.2d.constraints.GeometryConstraint")],_d);var KS;let mg=KS=class extends IE(Oe){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(t,e){return this.enabled&&e&&(this.rotationEnabled||(t.rotation=e.rotation)),t}clone(){return new KS({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};_([S()],mg.prototype,"enabled",void 0),_([S()],mg.prototype,"rotationEnabled",void 0),mg=KS=_([J("esri.views.2d.constraints.RotationConstraint")],mg);const rG=mg;var ZS;let jr=ZS=class extends IE(Oe){constructor(t){super(t),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let t,{lods:e,minScale:i,maxScale:n,minZoom:s,maxZoom:h}=this,f=-1,m=-1,y=!1,x=!1;if(i!==0&&n!==0&&i<n&&([i,n]=[n,i]),!(e!=null&&e.length))return this._set("effectiveMinScale",i),void this._set("effectiveMaxScale",n);e=e.map(E=>E.clone()),e.sort((E,k)=>k.scale-E.scale),e.forEach((E,k)=>E.level=k);for(const E of e)!y&&i>0&&i>=E.scale&&(f=E.level,y=!0),!x&&n>0&&n>=E.scale&&(m=t?t.level:-1,x=!0),t=E;s===-1&&(s=i===0?0:f),h===-1&&(h=n===0?e.length-1:m),s=Math.max(s,0),s=Math.min(s,e.length-1),h=Math.max(h,0),h=Math.min(h,e.length-1),s>h&&([s,h]=[h,s]),i=e[s].scale,n=e[h].scale,e.splice(0,s),e.splice(h-s+1,e.length),e.forEach((E,k)=>{this._lodByScale[E.scale]=E,this._scales[k]=E.scale}),this._set("effectiveLODs",e),this._set("effectiveMinZoom",s),this._set("effectiveMaxZoom",h),this._set("effectiveMinScale",i),this._set("effectiveMaxScale",n)}constrain(t,e){if(e&&t.scale===e.scale)return t;const i=this.effectiveMinScale,n=this.effectiveMaxScale,s=t.targetGeometry,h=e&&e.targetGeometry,f=n!==0&&t.scale<n,m=i!==0&&t.scale>i;if(f||m){const y=m?i:n;if(e&&h){const x=(y-e.scale)/(t.scale-e.scale);s.x=h.x+(s.x-h.x)*x,s.y=h.y+(s.y-h.y)*x}t.scale=y}return this.snapToZoom&&this.effectiveLODs&&(t.scale=this._getClosestScale(t.scale)),t}fit(t){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(t,null);const e=this.scaleToZoom(t.scale),i=Math.abs(e-Math.floor(e));return t.scale=this.zoomToScale(i>.99?Math.round(e):Math.floor(e)),t}zoomToScale(t){if(!this.effectiveLODs)return 0;t-=this.effectiveMinZoom,t=Math.max(0,t);const e=this._scales;if(t<=0)return e[0];if(t>=e.length)return e[e.length-1];const i=Math.floor(t),n=Math.ceil(t);return e[i]+(t-i)*(e[n]-e[i])}scaleToZoom(t){if(!this.effectiveLODs)return-1;const e=this._scales;let i,n;if(t>=e[0])return this.effectiveMinZoom;if(t<=e[e.length-1])return this.effectiveMaxZoom;for(let s=0;s<e.length-1;s++){if(i=e[s],n=e[s+1],n===t)return s+this.effectiveMinZoom+1;if(i>t&&n<t)return s+this.effectiveMinZoom+1-(t-n)/(i-n)}return-1}snapToClosestScale(t){if(!this.effectiveLODs)return t;const e=this.scaleToZoom(t);return this.zoomToScale(Math.round(e))}snapToNextScale(t,e=.5){if(!this.effectiveLODs)return t*e;const i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i+1)}snapToPreviousScale(t,e=2){if(!this.effectiveLODs)return t*e;const i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i-1)}clone(){return new ZS({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(t){return this._lodByScale[t]||(t=this._scales.reduce((e,i)=>Math.abs(i-t)<=Math.abs(e-t)?i:e,this._scales[0])),this._lodByScale[t].scale}};_([S({readOnly:!0})],jr.prototype,"effectiveLODs",void 0),_([S({readOnly:!0})],jr.prototype,"effectiveMinZoom",void 0),_([S({readOnly:!0})],jr.prototype,"effectiveMaxZoom",void 0),_([S({readOnly:!0})],jr.prototype,"effectiveMinScale",void 0),_([S({readOnly:!0})],jr.prototype,"effectiveMaxScale",void 0),_([S()],jr.prototype,"lods",void 0),_([S()],jr.prototype,"minZoom",void 0),_([S()],jr.prototype,"maxZoom",void 0),_([S()],jr.prototype,"minScale",void 0),_([S()],jr.prototype,"maxScale",void 0),_([S()],jr.prototype,"snapToZoom",void 0),jr=ZS=_([J("esri.views.2d.constraints.ZoomConstraint")],jr);const sG=jr,Zde={base:null,key:"type",typeMap:{extent:Nt,polygon:ln}};let Gi=class extends Oe{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new Pe}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){var e,i,n;return`${(e=this._zoom)==null?void 0:e.uid}/${(i=this._rotation)==null?void 0:i.uid}/${(n=this._geometry)==null?void 0:n.uid}`}get _geometry(){var i,n;const e=this._get("_geometry");return e&&this.geometry===e.geometry&&((i=this.view)==null?void 0:i.constraintsInfo.spatialReference)===e.spatialReference?e:new _d({geometry:this.geometry,spatialReference:(n=this.view)==null?void 0:n.constraintsInfo.spatialReference})}get _rotation(){return new rG({rotationEnabled:this.rotationEnabled})}get _zoom(){var y;const e=this._get("_zoom"),i=this.lods||((y=this.view)==null?void 0:y.constraintsInfo.lods),n=this.minZoom,s=this.maxZoom,h=this.minScale,f=this.maxScale,m=this.snapToZoom;return e&&e.lods===i&&e.minZoom===n&&e.maxZoom===s&&e.minScale===h&&e.maxScale===f&&e.snapToZoom===m?e:new sG({lods:i,minZoom:n,maxZoom:s,minScale:h,maxScale:f,snapToZoom:m})}canZoomInTo(e){const i=this.effectiveMaxScale;return i===0||e>=i}canZoomOutTo(e){const i=this.effectiveMinScale;return i===0||e<=i}constrain(e,i){return this._zoom.constrain(e,i),this._rotation.constrain(e,i),this._geometry.constrain(e,i),this.customConstraints.forEach(n=>n.constrain(e,i)),e}constrainByGeometry(e){return this._geometry.constrain(e),this.customConstraints.forEach(i=>{var n;return(n=i.applyPanConstraint)==null?void 0:n.call(i,e)}),e}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};_([S({readOnly:!0})],Gi.prototype,"effectiveLODs",null),_([S({readOnly:!0})],Gi.prototype,"effectiveMinScale",null),_([S({readOnly:!0})],Gi.prototype,"effectiveMaxScale",null),_([S({readOnly:!0})],Gi.prototype,"effectiveMinZoom",null),_([S({readOnly:!0})],Gi.prototype,"effectiveMaxZoom",null),_([S({types:Zde,value:null})],Gi.prototype,"geometry",null),_([S({type:[ao]})],Gi.prototype,"lods",void 0),_([S()],Gi.prototype,"minScale",void 0),_([S()],Gi.prototype,"maxScale",void 0),_([S()],Gi.prototype,"minZoom",void 0),_([S()],Gi.prototype,"maxZoom",void 0),_([S()],Gi.prototype,"rotationEnabled",void 0),_([S()],Gi.prototype,"snapToZoom",void 0),_([S({type:Pe})],Gi.prototype,"customConstraints",void 0),_([S()],Gi.prototype,"view",void 0),_([S({readOnly:!0})],Gi.prototype,"version",null),_([S({type:_d,readOnly:!0})],Gi.prototype,"_geometry",null),_([S({type:rG})],Gi.prototype,"_rotation",null),_([S({readOnly:!0,type:sG})],Gi.prototype,"_zoom",null),Gi=_([J("esri.views.2d.MapViewConstraints")],Gi);const oG=Gi;let pu=class od{static getId(e,i,n,s){return typeof e=="object"?`${e.level}/${e.row}/${e.col}/${e.world}`:`${e}/${i}/${n}/${s}`}constructor(e,i,n,s){this.set(e,i,n,s)}get key(){return this}get id(){return this.toString()}get normalizedId(){return`${this.level}/${this.row}/${this.col}`}set id(e){this.set(e)}get hash(){const e=4095&this.row,i=4095&this.col,n=63&this.level;return(3&this.world)<<30|i<<22|e<<8|n}acquire(e,i,n,s){this.set(e,i,n,s)}contains(e){const i=e.level-this.level;return i>=0&&this.row===e.row>>i&&this.col===e.col>>i&&this.world===e.world}containsChild(e){const i=e.level-this.level;return i>0&&this.row===e.row>>i&&this.col===e.col>>i&&this.world===e.world}equals(e){return this.level===e.level&&this.row===e.row&&this.col===e.col&&this.world===e.world}clone(){return new od(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(e,i,n,s){if(e==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof e=="object")this.level=e.level||0,this.row=e.row||0,this.col=e.col||0,this.world=e.world||0;else if(typeof e=="string"){const[h,f,m,y]=e.split("/");this.level=parseFloat(h),this.row=parseFloat(f),this.col=parseFloat(m),this.world=parseFloat(y)}else this.level=+e,this.row=+i,this.col=+n,this.world=+s||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new od(this.level-1,this.row>>1,this.col>>1,this.world)}getNormalizedNeighbor(e,i,n){const s=this.clone();return s.col+=e,s.row+=i,n.normalizeKey(s),s}getChildKeys(){const e=this.level+1,i=this.row<<1,n=this.col<<1,s=this.world;return[new od(e,i,n,s),new od(e,i,n+1,s),new od(e,i+1,n,s),new od(e,i+1,n+1,s)]}compareRowMajor(e){return this.row<e.row?-1:this.row>e.row?1:this.col<e.col?-1:this.col>e.col?1:0}};pu.pool=new cp(pu,null,null,25,50);function Cp(t,e){return[t,e]}function Au(t,e,i){return t[0]=e,t[1]=i,t}function Jde(t,e,i,n,s){return t[0]=e,t[1]=i,t[2]=n,t[3]=s,t}const Io=new pu("0/0/0/0");let Yde=class aG{static create(e,i,n=null){const s=cr(e.spatialReference),h=i.origin||Cp(e.origin.x,e.origin.y),f=Cp(e.size[0]*i.resolution,e.size[1]*i.resolution),m=Cp(-1/0,-1/0),y=Cp(1/0,1/0),x=Cp(1/0,1/0);n!=null&&(Au(m,Math.max(0,Math.floor((n.xmin-h[0])/f[0])),Math.max(0,Math.floor((h[1]-n.ymax)/f[1]))),Au(y,Math.max(0,Math.floor((n.xmax-h[0])/f[0])),Math.max(0,Math.floor((h[1]-n.ymin)/f[1]))),Au(x,y[0]-m[0]+1,y[1]-m[1]+1));const{cols:E,rows:k}=i;let I,P,L,D;return!n&&E&&k&&(Au(m,E[0],k[0]),Au(y,E[1],k[1]),Au(x,E[1]-E[0]+1,k[1]-k[0]+1)),e.isWrappable?(I=Cp(Math.ceil(Math.round((s.valid[1]-s.valid[0])/i.resolution)/e.size[0]),x[1]),P=!0,L=s.origin,D=s.valid):(I=x,P=!1),new aG(i.level,i.resolution,i.scale,h,m,y,x,f,I,P,L,D)}constructor(e,i,n,s,h,f,m,y,x,E,k,I){this.level=e,this.resolution=i,this.scale=n,this.origin=s,this.first=h,this.last=f,this.size=m,this.norm=y,this.worldSize=x,this.wrap=E,this._spatialReferenceOrigin=k,this._spatialReferenceValid=I}normalizeCol(e){if(!this.wrap)return e;const i=this.worldSize[0];return e<0?i-1-Math.abs((e+1)%i):e%i}normalizeKey(e){if(!this.wrap)return;const i=this.worldSize[0],n=e.col;n<0?(e.col=n+i,e.world-=1):n>=i&&(e.col=n-i,e.world+=1)}denormalizeCol(e,i){return this.wrap?this.worldSize[0]*i+e:e}getWorldForColumn(e){return this.wrap?Math.floor(e/this.worldSize[0]):0}getFirstColumnForWorld(e){return e*this.worldSize[0]+this.first[0]}getLastColumnForWorld(e){return e*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(e){return(e-this.origin[0])/this.norm[0]}getXForColumn(e){const i=this.origin[0]+e*this.norm[0],n=this._spatialReferenceOrigin,s=this._spatialReferenceValid;return this.wrap&&n&&s?i===n[0]?s[0]:this.origin[0]===n[0]&&e===this.worldSize[0]?s[1]:i:i}getRowForY(e){return(this.origin[1]-e)/this.norm[1]}getYForRow(e){return this.origin[1]-e*this.norm[1]}getTileBounds(e,i,n=!1){Io.set(i);const s=n?Io.col:this.denormalizeCol(Io.col,Io.world),h=Io.row;return Jde(e,this.getXForColumn(s),this.getYForRow(h+1),this.getXForColumn(s+1),this.getYForRow(h)),e}getTileCoords(e,i,n=!1){Io.set(i);const s=n?Io.col:this.denormalizeCol(Io.col,Io.world);return Array.isArray(e)?Au(e,this.getXForColumn(s),this.getYForRow(Io.row)):(e.x=this.getXForColumn(s),e.y=this.getYForRow(Io.row)),e}},km=class{constructor(){this.spans=[]}acquire(e){this.lodInfo=e}release(){this.lodInfo=null,this.spans.length=0}*keys(){const e=this.lodInfo;for(const{row:i,colFrom:n,colTo:s}of this.spans)for(let h=n;h<=s;h++){const f=e.getWorldForColumn(h);yield new pu(e.level,i,e.normalizeCol(h),f)}}forEach(e,i){const{spans:n,lodInfo:s}=this,{level:h}=s;if(n.length!==0)for(const{row:f,colFrom:m,colTo:y}of n)for(let x=m;x<=y;x++)e.call(i,h,f,s.normalizeCol(x),s.getWorldForColumn(x))}};km.pool=new cp(km);let H5=class{constructor(e,i,n){this.row=e,this.colFrom=i,this.colTo=n}};const bi=new pu("0/0/0/0");let Xde=class lG{static create(e,i){e[1]>i[1]&&([e,i]=[i,e]);const[n,s]=e,[h,f]=i,m=h-n,y=f-s,x=y!==0?m/y:0,E=(Math.ceil(s)-s)*x,k=(Math.floor(s)-s)*x;return new lG(n,Math.floor(s),Math.ceil(f),x,m<0?E:k,m<0?k:E,m<0?h:n,m<0?n:h)}constructor(e,i,n,s,h,f,m,y){this.x=e,this.ymin=i,this.ymax=n,this.invM=s,this.leftAdjust=h,this.rightAdjust=f,this.leftBound=m,this.rightBound=y}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}};const rs=[[0,0],[0,0],[0,0],[0,0]],Qde=1e-6;let epe=class{constructor(e,i=null,n=e.lods[0].level,s=e.lods[e.lods.length-1].level){this.tileInfo=e,this.fullExtent=i,this.scales=[],this._infoByScale={},this._infoByLevel={};const h=e.lods.filter(m=>m.level>=n&&m.level<=s);this.minScale=h[0].scale,this.maxScale=h[h.length-1].scale;const f=this._lodInfos=h.map(m=>Yde.create(e,m,i));h.forEach((m,y)=>{this._infoByLevel[m.level]=f[y],this._infoByScale[m.scale]=f[y],this.scales[y]=m.scale},this),this._wrap=e.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(e){return this._infoByLevel[typeof e=="number"?e:e.level]}getTileBounds(e,i,n=!1){bi.set(i);const s=this._infoByLevel[bi.level];return s?s.getTileBounds(e,bi,n):e}getTileCoords(e,i,n=!1){bi.set(i);const s=this._infoByLevel[bi.level];return s?s.getTileCoords(e,bi,n):e}getTileCoverage(e,i=192,n=!0,s="closest"){if(!n&&(e.scale>this.minScale||e.scale<this.maxScale))return null;const h=s==="closest"?this.getClosestInfoForScale(e.scale):this.getSmallestInfoForScale(e.scale),f=km.pool.acquire(h),m=this._wrap;let y,x,E,k=1/0,I=-1/0;const P=f.spans;rs[0][0]=rs[0][1]=rs[1][1]=rs[3][0]=-i,rs[1][0]=rs[2][0]=e.size[0]+i,rs[2][1]=rs[3][1]=e.size[1]+i;for(const H of rs)e.toMap(H,H),H[0]=h.getColumnForX(H[0]),H[1]=h.getRowForY(H[1]);const L=[];let D=3;for(let H=0;H<4;H++){if(rs[H][1]===rs[D][1]){D=H;continue}const W=Xde.create(rs[H],rs[D]);k=Math.min(W.ymin,k),I=Math.max(W.ymax,I),L[W.ymin]===void 0&&(L[W.ymin]=[]),L[W.ymin].push(W),D=H}if(k==null||I==null||I-k>100)return null;let j=[];for(y=k;y<I;){L[y]!=null&&(j=j.concat(L[y])),x=1/0,E=-1/0;for(let H=j.length-1;H>=0;H--){const W=j[H];x=Math.min(x,W.getLeftCol()),E=Math.max(E,W.getRightCol())}if(x=Math.floor(x),E=Math.floor(E),y>=h.first[1]&&y<=h.last[1])if(m)if(h.size[0]<h.worldSize[0]){const H=Math.floor(E/h.worldSize[0]);for(let W=Math.floor(x/h.worldSize[0]);W<=H;W++)P.push(new H5(y,Math.max(h.getFirstColumnForWorld(W),x),Math.min(h.getLastColumnForWorld(W),E)))}else P.push(new H5(y,x,E));else x>h.last[0]||E<h.first[0]||(x=Math.max(x,h.first[0]),E=Math.min(E,h.last[0]),P.push(new H5(y,x,E)));y+=1;for(let H=j.length-1;H>=0;H--){const W=j[H];W.ymax>=y?W.incrRow():j.splice(H,1)}}return f}getTileParentId(e){bi.set(e);const i=this._infoByLevel[bi.level],n=this._lodInfos.indexOf(i)-1;return n<0?null:(this._getTileIdAtLOD(bi,this._lodInfos[n],bi),bi.id)}getTileResolution(e){const i=this._infoByLevel[typeof e=="object"?e.level:e];return i?i.resolution:-1}getTileScale(e){const i=this._infoByLevel[e.level];return i?i.scale:-1}intersects(e,i){bi.set(i);const n=this._infoByLevel[bi.level],s=e.lodInfo;if(s.resolution>n.resolution){this._getTileIdAtLOD(bi,s,bi);const f=s.denormalizeCol(bi.col,bi.world);for(const m of e.spans)if(m.row===bi.row&&m.colFrom<=f&&m.colTo>=f)return!0}if(s.resolution<n.resolution){const[f,m,y,x]=e.spans.reduce((D,j)=>(D[0]=Math.min(D[0],j.row),D[1]=Math.max(D[1],j.row),D[2]=Math.min(D[2],j.colFrom),D[3]=Math.max(D[3],j.colTo),D),[1/0,-1/0,1/0,-1/0]),E=n.denormalizeCol(bi.col,bi.world),k=s.getColumnForX(n.getXForColumn(E)),I=s.getRowForY(n.getYForRow(bi.row)),P=s.getColumnForX(n.getXForColumn(E+1))-1,L=s.getRowForY(n.getYForRow(bi.row+1))-1;return!(k>x||P<y||I>m||L<f)}const h=s.denormalizeCol(bi.col,bi.world);return e.spans.some(f=>f.row===bi.row&&f.colFrom<=h&&f.colTo>=h)}normalizeBounds(e,i,n){if(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],this._wrap){const s=cr(this.tileInfo.spatialReference),h=-n*(s.valid[1]-s.valid[0]);e[0]+=h,e[2]+=h}return e}getSmallestInfoForScale(e){const i=this.scales;if(this._infoByScale[e])return this._infoByScale[e];if(e>i[0])return this._infoByScale[i[0]];for(let n=1;n<i.length-1;n++)if(e>i[n]+Qde)return this._infoByScale[i[n-1]];return this._infoByScale[i[i.length-1]]}getClosestInfoForScale(e){const i=this.scales;return this._infoByScale[e]||(e=i.reduce((n,s)=>Math.abs(s-e)<Math.abs(n-e)?s:n,i[0])),this._infoByScale[e]}scaleToLevel(e){const i=this.scales;if(this._infoByScale[e])return this._infoByScale[e].level;for(let n=i.length-1;n>=0;n--)if(e<i[n])return n===i.length-1?this._infoByScale[i[i.length-1]].level:this._infoByScale[i[n]].level+(i[n]-e)/(i[n]-i[n+1]);return this._infoByScale[i[0]].level}scaleToZoom(e){return this.tileInfo.scaleToZoom(e)}zoomToScale(e){return this.tileInfo.zoomToScale(e)}_getTileIdAtLOD(e,i,n){const s=this._infoByLevel[n.level];return e.set(n),i.resolution<s.resolution?null:(i.resolution===s.resolution||(e.level=i.level,e.col=Math.floor(n.col*s.resolution/i.resolution+.01),e.row=Math.floor(n.row*s.resolution/i.resolution+.01)),e)}},tpe=class{constructor(e,i){this.item=e,this.controller=i,this.promise=null}},ipe=class{constructor(e){this._schedule=null,this._task=null,this._deferreds=new Hb,this._controllers=new Hb,this._processingItems=new Hb,this._pausedSignal=vm(!1),this.concurrency=1,e.concurrency&&(this.concurrency=e.concurrency),this._queue=new W2(e.peeker),this.process=e.process;const i=e.scheduler;e.priority&&i&&(this._task=i.registerTask(e.priority,this))}destroy(){this.clear(),this._schedule=Rt(this._schedule),this._task=Rt(this._task)}get updating(){var e;return!!((e=this._task)!=null&&e.updating)||this.running}get length(){return this._processingItems.size+this._queue.length}abort(e){const i=this._controllers.get(e);i&&i.abort()}clear(){this._queue.clear();const e=[];this._controllers.forEach(i=>e.push(i)),this._controllers.clear(),e.forEach(i=>i.abort()),this._processingItems.clear(),this._cancelNext()}forEach(e){this._deferreds.forEach((i,n)=>e(n))}get(e){const i=this._deferreds.get(e);return i?i.promise:void 0}isOngoing(e){return this._processingItems.has(e)}has(e){return this._deferreds.has(e)}pause(){this._pausedSignal.value||(this._pausedSignal.value=!0,this._cancelNext())}push(e,i){const n=this.get(e);if(n)return n;const s=new AbortController;let h=null;i&&(h=$s(i,()=>s.abort()));const f=()=>{const E=this._processingItems.get(e);E&&E.controller.abort(),m(),x.reject(ei())},m=()=>{y.remove(),h!=null&&h.remove(),this._removeItem(e),this._queue.remove(e),this._scheduleNext()},y=pT(s.signal,f),x=Rs();return this._deferreds.set(e,x),this._controllers.set(e,s),x.promise.then(m,m),this._queue.push(e),this._scheduleNext(),x.promise}last(){return this._queue.last()}lastPromise(){const e=this.last();return e?this.get(e):null}peek(){return this._queue.peek()}popLast(){var i;const e=this._queue.popLast();return e&&((i=this._deferreds.get(e))==null||i.reject(ei()),this._removeItem(e)),e}reset(){const e=Array.from(this._processingItems.values());this._processingItems.clear();for(const i of e)this._queue.push(i.item),i.controller.abort();this._scheduleNext()}resume(){this._pausedSignal.value&&(this._pausedSignal.value=!1,this._scheduleNext())}takeAll(){const e=[];for(;this._queue.length;)e.push(this._queue.pop());return this.clear(),e}get running(){return!this._pausedSignal.value&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(e){for(;!e.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),e.madeProgress()}_removeItem(e){this._deferreds.delete(e),this._controllers.delete(e),this._processingItems.delete(e)}_scheduleNext(){this._task||this._pausedSignal.value||this._schedule||(this._schedule=ey(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(e,i){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).resolve(i))}_processError(e,i){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).reject(i))}_canProcessFulfillment(e){return!!this._deferreds.get(e.item)&&this._processingItems.get(e.item)===e}_process(e){if(e==null)return;let i;const n=new AbortController,s=new tpe(e,n);this._processingItems.set(e,s);try{i=this.process(e,n.signal)}catch(h){this._processError(s,h)}Ml(i)?(s.promise=i,i.then(h=>this._processResult(s,h),h=>this._processError(s,h))):this._processResult(s,i)}get test(){}};const Jk=[0,0];let ec=class extends Oe{constructor(e){super(e),this._keyToItem=new Map,this._tilesByScale=new Map,this.concurrency=6}initialize(){const{concurrency:e,process:i,scheduler:n,priority:s}=this;this._queue=new ipe({concurrency:e,scheduler:n,priority:s,process:(h,f)=>{const m=this._keyToItem.get(h);return i(m,{signal:f})},peeker:h=>this._peek(h)})}destroy(){this.clear(),this._queue=mt(this._queue)}get length(){return this._queue?this._queue.length:0}abort(e){const i=typeof e=="string"?e:e.id;this._queue.abort(i)}clear(){this._queue.clear(),this._keyToItem.clear(),this._tilesByScale.clear()}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}pause(){this._queue.pause()}push(e){const i=e.key.id;if(this._queue.has(i))return this._queue.get(i);const n=this._queue.push(i),s=this.tileInfoView.getTileScale(e.key),h=p3(this._tilesByScale,s,()=>new Set),f=()=>{h.delete(e.key),h.size===0&&this._tilesByScale.delete(s),this._keyToItem.delete(i)};return h.add(e.key),this._keyToItem.set(i,e),n.then(f,f),n}reset(){this._queue.reset()}resume(){this._queue.resume()}_peek(e){if(!this.state)return e.values().next().value;const i=new Set;for(const f of e)i.add(this._keyToItem.get(f).key);const n=this.state.scale;let s,h=Number.POSITIVE_INFINITY;for(const[f,m]of this._tilesByScale)if(XP(m,y=>i.has(y))){const y=Math.abs(f-n);y<h&&(s=m,h=y)}return this._getClosestTileKey(s,e).id}_getClosestTileKey(e,i){const n=this.tileInfoView,s=this.state.center;let h,f=Number.POSITIVE_INFINITY;for(const m of e)if(i.has(m.id)){n.getTileCoords(Jk,m);const y=mp(Jk,s);y<f&&(f=y,h=m)}return h}};_([S({constructOnly:!0})],ec.prototype,"concurrency",void 0),_([S({constructOnly:!0})],ec.prototype,"priority",void 0),_([S({constructOnly:!0})],ec.prototype,"process",void 0),_([S({constructOnly:!0})],ec.prototype,"scheduler",void 0),_([S()],ec.prototype,"state",void 0),_([S({constructOnly:!0})],ec.prototype,"tileInfoView",void 0),ec=_([J("esri.views.2d.tiling.TileQueue")],ec);const Nke=ec;let npe=class{constructor(e,i,n){this.maxSize=e,this._tileInfoView=i,this._removedFunc=n,this._tilePerId=new Map,this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear(),this._tileKeysPerLevel=[]}has(e){return this._tilePerId.has(e)}get(e){return this._tilePerId.get(e)}pop(e){const i=this._tilePerId.get(e);if(!i)return;const n=i.key.level,s=this._tileKeysPerLevel[n];Yk(this._tilePerId,e);for(let h=0;h<s.length;h++)if(s[h].id===e){s.splice(h,1);break}return i.visible=!0,i}add(e){e.visible=!1;const i=e.key,n=i.id;if(this._tilePerId.has(n))return;this._tilePerId.set(n,e);const s=i.level;this._tileKeysPerLevel[s]||(this._tileKeysPerLevel[s]=[]),this._tileKeysPerLevel[s].push(i)}prune(e,i,n){let s=this._tilePerId.size;if(s<=this.maxSize)return;let h=this._tileKeysPerLevel.length-1;for(;s>this.maxSize&&h>=0;)h!==e&&(s=this._pruneAroundCenterTile(s,i,n,h)),h--;s>this.maxSize&&(s=this._pruneAroundCenterTile(s,i,n,e))}_pruneAroundCenterTile(e,i,n,s){const h=this._tileKeysPerLevel[s];if(!h||h.length===0)return e;const{size:f,origin:m}=this._tileInfoView.tileInfo,y=n*f[0],x=n*f[1],E=[0,0],k=[0,0];for(h.sort((I,P)=>(E[0]=m.x+y*(I.col+.5),E[1]=m.y-x*(I.row+.5),k[0]=m.x+y*(P.col+.5),k[1]=m.y-x*(P.row+.5),p0(E,i)-p0(k,i)));h.length>0;){const I=h.pop();if(this._removeTile(I.id),--e===this.maxSize)break}return e}_removeTile(e){const i=this._tilePerId.get(e);this._removedFunc&&i&&this._removedFunc(i),Yk(this._tilePerId,e)}};function Yk(t,e){t.delete(e)}const Ou=new pu(0,0,0,0),Dl=new Map,f1=[],V5=[];let Dke=class{constructor(e){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,e.resampling!=null&&(this.resampling=e.resampling),e.cachePolicy&&(this.cachePolicy=e.cachePolicy),e.coveragePolicy&&(this.coveragePolicy=e.coveragePolicy),e.buffer!=null&&(this.buffer=e.buffer),e.cacheSize&&(this._tileCache=new npe(e.cacheSize,this.tileInfoView,i=>{this.releaseTile(i)}))}destroy(){this.tileIndex.clear()}update(e){var H,W;const{resampling:i,tileIndex:n}=this,{scale:s,center:h,resolution:f}=e.state,{minScale:m,maxScale:y}=this.tileInfoView,x=!e.stationary&&s>this._previousScale;if(this._previousScale=s,!i&&(s>m||s<y))return this.tiles.length=0,void this.clear();const E=this.tileInfoView.getTileCoverage(e.state,this.buffer,this.resampling,this.coveragePolicy);if(!E)return this.tiles.length=0,void this.clear();const{spans:k,lodInfo:I}=E,{level:P}=I;this.tiles.length=0,n.forEach(Z=>Z.visible=!0);let L=0,D=0;if(k.length>0)for(const{row:Z,colFrom:Y,colTo:te}of k)for(let ie=Y;ie<=te;ie++){L++;const le=Ou.set(P,Z,I.normalizeCol(ie),I.getWorldForColumn(ie)).id;let pe=n.get(le);if(pe)pe.isReady?(Dl.set(le,pe),D++):x||this._addParentTile(le,Dl);else{if((H=this._tileCache)!=null&&H.has(le)){if(pe=this._tileCache.pop(le),this.tileIndex.set(le,pe),pe.isReady){Dl.set(le,pe),D++;continue}}else pe=this.acquireTile(Ou),this.tileIndex.set(le,pe);x||this._addParentTile(le,Dl)}}const j=D===L;for(const[Z,Y]of n){if(Dl.has(Z))continue;Ou.set(Z);const te=this.tileInfoView.intersects(E,Ou),ie=this.cachePolicy==="purge"?Ou.level!==P:Ou.level>P;!te||!x&&j?!ie&&te||f1.push(Y):Y.isReady?ie&&this.cachePolicy==="purge"&&this._hasReadyAncestor(Ou,P)?f1.push(Y):V5.push(Y):ie&&f1.push(Y)}for(const Z of V5)Z.isReady&&Dl.set(Z.key.id,Z);for(const Z of f1)this._tileCache?this._tileCache.add(Z):this.releaseTile(Z),n.delete(Z.key.id);for(const Z of Dl.values())this.tiles.push(Z);for(const Z of n.values())Dl.has(Z.key.id)||(Z.visible=!1);(W=this._tileCache)==null||W.prune(P,h,f),km.pool.release(E),V5.length=0,f1.length=0,Dl.clear()}clear(){const{tileIndex:e}=this;for(const i of e.values())this.releaseTile(i);e.clear()}refresh(e){var i;for(const n of this.tileIndex.values())e(n);(i=this._tileCache)==null||i.clear()}updateCacheSize(e){this._tileCache&&(this._tileCache.maxSize=e)}_addParentTile(e,i){var h;let n=e,s=null;for(;n=this.tileInfoView.getTileParentId(n),n;)if(this.tileIndex.has(n)){if(s=this.tileIndex.get(n),s==null?void 0:s.isReady){i.has(s.key.id)||i.set(s.key.id,s);break}}else if((h=this._tileCache)!=null&&h.has(n)&&(s=this._tileCache.pop(n),this.tileIndex.set(n,s),s==null?void 0:s.isReady)){i.has(s.key.id)||i.set(s.key.id,s);break}}_hasReadyAncestor(e,i){const n=an();this.tileInfoView.getTileBounds(n,e,!0);for(const s of this.tileIndex.values())if(s.isReady&&s.key.level>=i&&s.key.level<e.level){const h=an();if(this.tileInfoView.getTileBounds(h,s.key,!0),UX(h,n))return!0}return!1}},Zn=class extends Oe{constructor(e){super(e),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([Ee(()=>{var i;return(i=this.constraints)==null?void 0:i.version},i=>{this.constraints&&i&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},Pc)])}get center(){if(!this.ready)return this._get("center");const{center:e,spatialReference:i}=this.state.paddedViewState;return this.state.commitProperty("id"),new Ne({x:e[0],y:e[1],spatialReference:i})}set center(e){if(e==null)return;if(!this.ready)return void this._set("center",e);let i;try{i=this._project(e,this.state.spatialReference)}catch(s){return void Ae.getLogger(this).error(new ce("mapview:invalid-center","could not project the value in the view's spatial reference",{input:e,error:s}))}const n=this.viewpoint;US(n,n,i),this.viewpoint=n}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(e){if(e==null)return;if(!e.width||!e.height)return void Ae.getLogger(this).error(new ce("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",e),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let i;try{i=this._project(e,this.state.spatialReference)}catch(s){return void Ae.getLogger(this).error(new ce("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:s}))}const n=this.viewpoint;iue(n,n,i,this.state.size,{constraints:this.constraints}),this.viewpoint=n}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);const i=this.viewpoint;due(i,i,e),this.viewpoint=i}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",void 0);const n=this._get("extent");return void(n&&(this._set("extent",void 0),this._set("center",n.center)))}const i=this.viewpoint;zk(i,i,e),this.viewpoint=i}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(e){var h;if(e==null)return;if(!this.ready)return this._set("viewpoint",e),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let i,n;try{i=this._project(e,this.state.spatialReference),!e.scale||isNaN(e.scale)?n=new ce("mapview:invalid-viewpoint",`invalid scale value of ${e.scale}`):e.targetGeometry==null&&(n=new ce("mapview:invalid-viewpoint","geometry not defined"))}catch(f){n=new ce("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:f})}if(n)return void Ae.getLogger(this).error(n);this._scaleBeforeChangingSpatialReference=null;const s=new na({targetGeometry:new Ne,scale:0,rotation:0});ar(s,i),(h=this.constraints)==null||h.constrain(s,this.state.paddedViewState.viewpoint),this.state.viewpoint=s,this._set("viewpoint",s)}get visibleArea(){return this.ready?this.state.visibleArea:null}get zoom(){var e;return this.ready?((e=this.constraints)==null?void 0:e.scaleToZoom(this.scale))??-1:this._get("zoom")}set zoom(e){var s,h;if(!(e>=0))return;if(!this.ready){this._set("zoom",e),this._set("scale",void 0);const f=this._get("extent");return void(f&&(this._set("extent",void 0),this._set("center",f.center)))}const i=((s=this.constraints)==null?void 0:s.zoomToScale(e))??0;if(!i)return void this._set("zoom",-1);const n=this.viewpoint;zk(n,n,i),this.viewpoint=n,this._set("zoom",((h=this.constraints)==null?void 0:h.scaleToZoom(this.scale))??-1)}getUserStartupOptions(e){if(!e[0]&&!e[1])return{center:void 0,rotation:void 0,scale:void 0};const{padding:i,constraints:n}=this,s=this._get("center"),h=this._get("extent"),f=this._get("scale"),m=this._get("rotation"),y=this._get("viewpoint"),x=this._get("zoom"),E=x!=null&&n!=null&&n.zoomToScale(x)||void 0;let k,I,P;const L=y==null?void 0:y.rotation,D=y==null?void 0:y.targetGeometry;(D==null?void 0:D.type)==="extent"?k=D:(D==null?void 0:D.type)==="point"&&(I=D,P=y==null?void 0:y.scale);const j=h??k;return{center:s??I??(j==null?void 0:j.center),rotation:m??L,scale:(f??E??P??(j&&o_(j,[e[0]-i.left-i.right,e[1]-i.top-i.bottom])))||void 0}}startup(e,i,n,s){var f;const h=e.targetGeometry;try{this._project(e,n)}catch(m){Ae.getLogger(this).warn(new Oc("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:h.toJSON(),spatialReference:n,error:m})),e.targetGeometry=s||new Ne({x:0,y:0,spatialReference:n})}(f=this.constraints)==null||f.fit(e),this._set("state",new oM({padding:this.padding,size:i,viewpoint:e})),this._set("ready",!0)}teardown(){this._set("ready",!1);const{center:[e,i],spatialReference:n,rotation:s,scale:h}=this.state.paddedViewState,f=new Ne({x:e,y:i,spatialReference:n});this._set("viewpoint",null),this._set("extent",null),this._set("center",f),this._set("zoom",-1),this._set("rotation",s),this._set("scale",h),this._set("state",null)}changeSpatialReference(e){var y;const i=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=i.scale;else{const x=i.viewpoint.clone();x.scale=this._scaleBeforeChangingSpatialReference,i.viewpoint=x}const n=i.clone(),[s,h]=i.center;let f=null;try{f=this._project(new Ne({x:s,y:h,spatialReference:i.spatialReference}),e)}catch(x){PT()||Ae.getLogger(this).warn(new Oc("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:f==null?void 0:f.toJSON(),spatialReference:e,error:x}))}f||(f=new Ne({x:0,y:0,spatialReference:e}));const m=US(new na({targetGeometry:new Ne,scale:0,rotation:0}),i.viewpoint,f);n.viewpoint=m;try{const E=[i.size[0]/2,i.size[1]/2],k=[E[0]+20,E[1]],I=i.toMap([0,0],k),{x:P,y:L}=this._project(new Ne({x:I[0],y:I[1],spatialReference:i.spatialReference}),e);I[0]=P,I[1]=L,n.toScreen(I,I);const D=cue(E,I,k),j=Math.hypot(I[0]-E[0],I[1]-E[1])/20;!Number.isFinite(j)||Math.abs(j)>4?(m.rotation=0,m.targetGeometry=new Ne({x:0,y:0,spatialReference:e})):(m.scale*=j,m.scale>de("mapview-srswitch-adjust-rotation-scale-threshold")?m.rotation=0:m.rotation+=Number.isFinite(D)?D:0)}catch{}(y=this._get("constraints"))==null||y.constrain(m,void 0),this._get("state").viewpoint=m}resize(e,i){var f;if(!this.ready)return;const n=this.state;let s=this.state.paddedViewState.viewpoint;const h=this.state.paddedViewState.size.slice();n.size=[e,i],uue(s,s,h,this.state.paddedViewState.size,this.resizeAlign),s=((f=this.constraints)==null?void 0:f.constrain(s,void 0))??s,this.state.viewpoint=s}toMap(e){if(!this.ready)return null;const i=[0,0],[n,s]=this.state.toMap(i,[e.x,e.y]),h=this.state.spatialReference;return new Ne({x:n,y:s,spatialReference:h})}toScreen(e,i){if(!this.ready)return null;const n=this._project(e,this.state.spatialReference),s=[n.x,n.y];return(i==null?void 0:i.pickClosestTarget)===!1||this.state.paddedViewState.wrapMapCoordinate(s,s),this.state.toScreen(s,s),Ri(s[0],s[1])}_project(e,i){var h;const n=(e==null?void 0:e.targetGeometry)||e;if(!i)return e;if(!n)return null;if(i.imageCoordinateSystem||(h=n.spatialReference)!=null&&h.imageCoordinateSystem||Ai(i,n.spatialReference))return e;const s=Qr(n,i);if(!s)throw new ce("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:n,spatialReference:i});return rpe(e)?(e.targetGeometry=s,e):s}};function rpe(t){return(t==null?void 0:t.declaredClass)==="esri.Viewpoint"}_([S({type:Ne})],Zn.prototype,"center",null),_([S()],Zn.prototype,"constraints",void 0),_([S({type:Nt})],Zn.prototype,"extent",null),_([S({value:{top:0,right:0,bottom:0,left:0},cast:t=>({top:0,right:0,bottom:0,left:0,...t})})],Zn.prototype,"padding",null),_([S()],Zn.prototype,"ready",void 0),_([S()],Zn.prototype,"resizeAlign",void 0),_([S({readOnly:!0})],Zn.prototype,"resolution",null),_([S({type:Number})],Zn.prototype,"rotation",null),_([S({type:Number})],Zn.prototype,"scale",null),_([S({readOnly:!0})],Zn.prototype,"state",void 0),_([S({type:na})],Zn.prototype,"viewpoint",null),_([S({readOnly:!0})],Zn.prototype,"visibleArea",null),_([S()],Zn.prototype,"zoom",null),Zn=_([J("esri.views.2d.ViewStateManager")],Zn);function aM(t,e){switch(e){case"primary":return t.pointerType==="touch"||t.button===0;case"secondary":return t.pointerType!=="touch"&&t.button===2;case"tertiary":return t.pointerType!=="touch"&&t.button===1}}let Xk=class extends Tn{constructor(e,i){super(!0),this._view=e,this.registerIncoming("double-click",i,n=>this._handleDoubleClick(n,i))}_handleDoubleClick(e,i){aM(e.data,"primary")&&(e.stopPropagation(),i?this._view.mapViewNavigation.zoomOut([e.data.x,e.data.y]):this._view.mapViewNavigation.zoomIn([e.data.x,e.data.y]))}},spe=class extends Tn{constructor(e,i,n){super(!0),this.view=e,this.pointerType=i,this.registerIncoming("double-tap-drag",n,s=>this._handleDoubleTapDrag(s))}_handleDoubleTapDrag(e){const{data:i}=e,{pointerType:n}=i;if(n!==this.pointerType)return;e.stopPropagation();const{action:s,delta:h}=i,{view:f}=this,{mapViewNavigation:m}=f;switch(s){case"begin":{const{scale:y}=f;this._startScale=y,this._currentScale=y,this._previousDelta=h,m.begin();break}case"update":{if(this._previousDelta.y===h.y)return;this._previousDelta=h;const y=1.015**h.y,x=this._startScale*y,E=x/this._currentScale;m.setViewpointImmediate(E),this._currentScale=x;break}case"end":{const{constraints:y}=f,{effectiveLODs:x,snapToZoom:E}=y;if(!E||!x)return void m.end();const k=y.snapScale(this._currentScale),I=(h.y>0?Math.max(k,y.snapToPreviousScale(this._startScale)):Math.min(k,y.snapToNextScale(this._startScale)))/this._currentScale;m.zoom(I).then(()=>{m.end()});break}}}},l_=class{constructor(e){this._callbacks=e,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(e){const i=e.data,n=i.pointers.size;switch(i.action){case"start":this._currentCount=n,this._emitStart(e);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=n,this._emitStart(e);break;case"update":this._emitUpdate(e);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=n,this._emitStart(e);break;case"end":this._emitEnd(e),this._currentCount=0}this._previousEvent=e}_emitStart(e){var i,n;this._startEvent=e,(n=(i=this._callbacks).condition)!=null&&n.call(i,this._currentCount,e)&&this._callbacks.start(this._currentCount,e,this._startEvent)}_emitUpdate(e){var i,n;(n=(i=this._callbacks).condition)!=null&&n.call(i,this._currentCount,e)&&this._callbacks.update(this._currentCount,e,this._startEvent)}_emitEnd(e){var i,n;(n=(i=this._callbacks).condition)!=null&&n.call(i,this._currentCount,e)&&this._callbacks.end(this._currentCount,e,this._startEvent),this._startEvent=null}},ope=class extends Tn{constructor(e,i,n){super(!0),this.view=e,this.pointerAction=i,this.registerIncoming("drag",n,s=>this._handleDrag(s)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(e){super.onInstall(e),this._dragEventSeparator=new l_({start:(i,n)=>{this.view.mapViewNavigation.pan.begin(this.view,n.data),n.stopPropagation()},update:(i,n)=>{this.view.mapViewNavigation.pan.update(this.view,n.data),n.stopPropagation()},end:(i,n)=>{this.view.mapViewNavigation.pan.end(this.view,n.data),n.stopPropagation()},condition:(i,n)=>i===1&&aM(n.data,this.pointerAction)})}_handleDrag(e){const i=this.view.mapViewNavigation;i.pinch.zoomMomentum||i.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(e)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},ape=class extends Tn{constructor(e,i,n){super(!0),this._view=e,this.pointerAction=i;const s=this._view.mapViewNavigation;this._dragEventSeparator=new l_({start:(h,f)=>{s.rotate.begin(this._view,f.data),f.stopPropagation()},update:(h,f)=>{s.rotate.update(this._view,f.data),f.stopPropagation()},end:(h,f)=>{s.rotate.end(),f.stopPropagation()},condition:(h,f)=>h===1&&aM(f.data,this.pointerAction)}),this.registerIncoming("drag",n,h=>this._dragEventSeparator.handle(h))}};function fa(t){const e=t[0],i=t[1],n=t[2];return Math.sqrt(e*e+i*i+n*n)}function Er(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function vi(t,e,i,n){return t[0]=e,t[1]=i,t[2]=n,t}function xr(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t}function Ei(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t}function cG(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t}function hG(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t}function lpe(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function cpe(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function hpe(t,e){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t}function upe(t,e){return t[0]=Math.sign(e[0]),t[1]=Math.sign(e[1]),t[2]=Math.sign(e[2]),t}function dpe(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t}function ppe(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t}function fpe(t,e=0,i=1){return t[0]=Math.min(Math.max(t[0],e),i),t[1]=Math.min(Math.max(t[1],e),i),t[2]=Math.min(Math.max(t[2],e),i),t}function gpe(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function Cr(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function kn(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t}function Su(t,e){const i=e[0]-t[0],n=e[1]-t[1],s=e[2]-t[2];return Math.sqrt(i*i+n*n+s*s)}function m0(t,e){const i=e[0]-t[0],n=e[1]-t[1],s=e[2]-t[2];return i*i+n*n+s*s}function c_(t){const e=t[0],i=t[1],n=t[2];return e*e+i*i+n*n}function JS(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function mpe(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function wn(t,e){const i=e[0],n=e[1],s=e[2];let h=i*i+n*n+s*s;return h>0&&(h=1/Math.sqrt(h),t[0]=e[0]*h,t[1]=e[1]*h,t[2]=e[2]*h),t}function vt(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Zi(t,e,i){const n=e[0],s=e[1],h=e[2],f=i[0],m=i[1],y=i[2];return t[0]=s*y-h*m,t[1]=h*f-n*y,t[2]=n*m-s*f,t}function ype(t,e,i){const n=e[0],s=e[1],h=e[2],f=i[0],m=i[1],y=i[2],x=s*y-h*m,E=h*f-n*y,k=n*m-s*f,I=Math.sqrt(x*x+E*E+k*k);return t[0]=x/I,t[1]=E/I,t[2]=k/I,t}function H0(t,e,i,n){const s=e[0],h=e[1],f=e[2];return t[0]=s+n*(i[0]-s),t[1]=h+n*(i[1]-h),t[2]=f+n*(i[2]-f),t}function vpe(t,e,i,n,s,h){const f=h*h,m=f*(2*h-3)+1,y=f*(h-2)+h,x=f*(h-1),E=f*(3-2*h);return t[0]=e[0]*m+i[0]*y+n[0]*x+s[0]*E,t[1]=e[1]*m+i[1]*y+n[1]*x+s[1]*E,t[2]=e[2]*m+i[2]*y+n[2]*x+s[2]*E,t}function bpe(t,e,i,n,s,h){const f=1-h,m=f*f,y=h*h,x=m*f,E=3*h*m,k=3*y*f,I=y*h;return t[0]=e[0]*x+i[0]*E+n[0]*k+s[0]*I,t[1]=e[1]*x+i[1]*E+n[1]*k+s[1]*I,t[2]=e[2]*x+i[2]*E+n[2]*k+s[2]*I,t}function wpe(t,e=1){const i=hy,n=2*i()*Math.PI,s=2*i()-1,h=Math.sqrt(1-s*s)*e;return t[0]=Math.cos(n)*h,t[1]=Math.sin(n)*h,t[2]=s*e,t}function uG(t,e,i){const n=e[0],s=e[1],h=e[2];return t[0]=i[0]*n+i[4]*s+i[8]*h+i[12],t[1]=i[1]*n+i[5]*s+i[9]*h+i[13],t[2]=i[2]*n+i[6]*s+i[10]*h+i[14],t}function _pe(t,e,i){const n=e[0],s=e[1],h=e[2];return t[0]=n*i[0]+s*i[3]+h*i[6],t[1]=n*i[1]+s*i[4]+h*i[7],t[2]=n*i[2]+s*i[5]+h*i[8],t}function YS(t,e,i){const n=i[0],s=i[1],h=i[2],f=i[3],m=e[0],y=e[1],x=e[2],E=s*x-h*y,k=h*m-n*x,I=n*y-s*m,P=s*I-h*k,L=h*E-n*I,D=n*k-s*E,j=2*f;return t[0]=m+E*j+2*P,t[1]=y+k*j+2*L,t[2]=x+I*j+2*D,t}function xpe(t,e,i,n){const s=[],h=[];return s[0]=e[0]-i[0],s[1]=e[1]-i[1],s[2]=e[2]-i[2],h[0]=s[0],h[1]=s[1]*Math.cos(n)-s[2]*Math.sin(n),h[2]=s[1]*Math.sin(n)+s[2]*Math.cos(n),t[0]=h[0]+i[0],t[1]=h[1]+i[1],t[2]=h[2]+i[2],t}function Spe(t,e,i,n){const s=[],h=[];return s[0]=e[0]-i[0],s[1]=e[1]-i[1],s[2]=e[2]-i[2],h[0]=s[2]*Math.sin(n)+s[0]*Math.cos(n),h[1]=s[1],h[2]=s[2]*Math.cos(n)-s[0]*Math.sin(n),t[0]=h[0]+i[0],t[1]=h[1]+i[1],t[2]=h[2]+i[2],t}function Tpe(t,e,i,n){const s=[],h=[];return s[0]=e[0]-i[0],s[1]=e[1]-i[1],s[2]=e[2]-i[2],h[0]=s[0]*Math.cos(n)-s[1]*Math.sin(n),h[1]=s[0]*Math.sin(n)+s[1]*Math.cos(n),h[2]=s[2],t[0]=h[0]+i[0],t[1]=h[1]+i[1],t[2]=h[2]+i[2],t}function Epe(t,e){wn(Qk,t),wn(eC,e);const i=vt(Qk,eC);return i>1?0:i<-1?Math.PI:Math.acos(i)}const Qk=Te(),eC=Te();function Mpe(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Zt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function Cm(t,e){if(t===e)return!0;const i=t[0],n=t[1],s=t[2],h=e[0],f=e[1],m=e[2],y=Ni();return Math.abs(i-h)<=y*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(n-f)<=y*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(s-m)<=y*Math.max(1,Math.abs(s),Math.abs(m))}function XS(t,e,i){const n=i[0]-e[0],s=i[1]-e[1],h=i[2]-e[2];let f=n*n+s*s+h*h;return f>0?(f=1/Math.sqrt(f),t[0]=n*f,t[1]=s*f,t[2]=h*f,t):(t[0]=0,t[1]=0,t[2]=0,t)}const Wr=Ei,$pe=cG,kpe=hG,Cpe=Su,Ipe=m0,dG=fa,pw=c_;Object.freeze(Object.defineProperty({__proto__:null,abs:hpe,add:xr,angle:Epe,bezier:bpe,ceil:lpe,clamp:fpe,copy:Er,cross:Zi,crossAndNormalize:ype,direction:XS,dist:Cpe,distance:Su,div:kpe,divide:hG,dot:vt,equals:Cm,exactEquals:Zt,floor:cpe,hermite:vpe,inverse:mpe,len:dG,length:fa,lerp:H0,max:ppe,min:dpe,mul:$pe,multiply:cG,negate:JS,normalize:wn,random:wpe,rotateX:xpe,rotateY:Spe,rotateZ:Tpe,round:gpe,scale:Cr,scaleAndAdd:kn,set:vi,sign:upe,sqrDist:Ipe,sqrLen:pw,squaredDistance:m0,squaredLength:c_,str:Mpe,sub:Wr,subtract:Ei,transformMat3:_pe,transformMat4:uG,transformQuat:YS},Symbol.toStringTag,{value:"Module"}));function Ao(t){let e=t*t;return t<0&&(e*=-1),e}function Ape(t){return t.translation[0]=0,t.translation[1]=0,t.translation[2]=0,t.heading=0,t.tilt=0,t}function Ope(t,e,i){const n=i,s=t.state,h=t.device,f=e.tiltDirection==="forward-down"?1:-1,m=1;return h.deviceType==="standard"?(n.translation[0]=Ao(s.axes[0]),n.translation[1]=Ao(s.axes[1]),n.translation[2]=Ao(s.buttons[7])-Ao(s.buttons[6]),n.heading=Ao(s.axes[2]),n.tilt=Ao(s.axes[3])):h.deviceType==="spacemouse"&&(n.translation[0]=1.2*Ao(s.axes[0]),n.translation[1]=1.2*Ao(s.axes[1]),n.translation[2]=2*-Ao(s.axes[2]),n.heading=1.2*Ao(s.axes[5]),n.tilt=1.2*Ao(s.axes[3])),n.tilt*=f,Cr(n.translation,n.translation,m),n}function Ppe(t){return t.translation[0]===0&&t.translation[1]===0&&t.translation[2]===0&&t.heading===0&&t.tilt===0&&t.zoom===0}let Rpe=class extends Tn{constructor(e){super(!0),this._view=e,this._frameTask=null,this._watchHandles=new k0,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",i=>this._handleGamePadEvent(i)),this._handle.pause()}onInstall(e){super.onInstall(e),this._watchHandles.add([Ee(()=>{var i;return(i=this._view.navigation.gamepad)==null?void 0:i.enabled},i=>{i?(this._handle.resume(),this._frameTask||(this._frameTask=Xf({update:n=>this._frameUpdate(n.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},Ct)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(e){const i=this._view.navigation.gamepad.device;i&&e.data.device!==i||this._currentDevice&&this._currentDevice!==e.data.device||(e.data.action==="end"?(this._currentDevice=null,Ape(this._transformation)):(this._currentDevice=e.data.device,Ope(e.data,this._view.navigation.gamepad,this._transformation)))}_frameUpdate(e){const i=this._transformation;if(Ppe(i))return;const n=this._view.viewpoint.clone(),s=this._view.navigation.gamepad.velocityFactor,h=Lpe*s*e;a_(n,n,[i.translation[0]*h,-i.translation[1]*h]);const f=1+i.translation[2]*Dpe*e,m=this._view.constraints.rotationEnabled?-i.heading*Npe*e:0,y=this._view.size,x=[y[0]/2,y[1]];Fj(n,n,f,m,x,y);const E=this._view.constraints.constrain(n,this._view.viewpoint);this._view.viewpoint=E}};const Npe=.06,Lpe=.7,Dpe=6e-4;function pG(t){const e=()=>t(document.visibilityState==="visible");return document.addEventListener("visibilitychange",e),ct(()=>document.removeEventListener("visibilitychange",e))}let zpe=class extends Tn{constructor(e,i,n){super(!0),this.view=e,this.keys=i,this._isSticky=!1,this._pressedKeys=new Set,this._timeout=void 0,this._currentDirection=void 0,this._stickyKeyDuration=200,this._handleKey=s=>{const h=this._keyMap[s.data.key];if(s.modifiers.has("Meta")||s.modifiers.has("Control"))return void this._stopMovement();if(h==null)return;s.stopPropagation(),s.preventDefault();const f=s.type==="key-down";if(this._pressedKeys[f?"add":"delete"](h),f){if(this._direction===h)return;this._direction=h,this._isSticky=!1,this._setTimeout(()=>{this._isSticky&&this._handlePopKey()})}else{const m=this._timeout===void 0,y=this._pressedKeys.size>0;m||y?this._handlePopKey():this._isSticky=!0}},this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop(),this._direction==null&&this._stopMovement()},this._stopMovement=()=>{this._isSticky=!1,this._direction=void 0,this._pressedKeys.clear(),this._setTimeout(void 0)},this._keyMap={[i.left]:"left",[i.right]:"right",[i.up]:"up",[i.down]:"down"},this.registerIncoming("key-down",n,this._handleKey),this.registerIncoming("key-up",n,this._handleKey),this.registerIncoming("blur",n,this._stopMovement),this._visibilityHandle=pG(s=>s?null:this._stopMovement())}onUninstall(){var e;this._stopMovement(),(e=this._visibilityHandle)==null||e.remove()}get _direction(){return this._currentDirection}set _direction(e){const i=this._currentDirection!=null;if(e!=null){if(i||this.view.mapViewNavigation.begin(),this._currentDirection!==e)switch(e){case"left":this.view.mapViewNavigation.continuousPanLeft();break;case"right":this.view.mapViewNavigation.continuousPanRight();break;case"up":this.view.mapViewNavigation.continuousPanUp();break;case"down":this.view.mapViewNavigation.continuousPanDown()}}else i&&this.view.mapViewNavigation.stop();this._currentDirection=e}_setTimeout(e){clearTimeout(this._timeout),this._timeout=e===void 0?void 0:setTimeout(()=>{this._timeout=void 0,e()},this._stickyKeyDuration)}},Fpe=class extends Tn{constructor(e,i,n){super(!0),this.view=e,this.keys=i,this._pressed=!1,this._keyToDirection={[i.clockwiseOption1]:"clockwise",[i.clockwiseOption2]:"clockwise",[i.counterClockwiseOption1]:"counterClockwise",[i.counterClockwiseOption2]:"counterClockwise",[i.resetOption1]:"reset",[i.resetOption2]:"reset"},this.registerIncoming("key-down",n,s=>this._handleKeyDown(s)),this.registerIncoming("key-up",n,s=>this._handleKeyUp(s)),this.registerIncoming("blur",n,()=>this._handleStop()),this._visibilityHandle=pG(s=>s?null:this._handleStop())}onUninstall(){var e;(e=this._visibilityHandle)==null||e.remove(),this._handleStop()}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,i){const n=e.modifiers;if(n.size>0&&!n.has("Shift")||!this.view.constraints.rotationEnabled)return;const s=this._keyToDirection[e.data.key];if(this._pressed=s!=null,this._pressed){if(e.preventDefault(),i)switch(this.view.mapViewNavigation.begin(),s){case"clockwise":this.view.mapViewNavigation.continuousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continuousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}};var Ef;(function(t){t[t.IN=0]="IN",t[t.OUT=1]="OUT"})(Ef||(Ef={}));let jpe=class extends Tn{constructor(e,i,n){super(!0),this.view=e,this.keys=i,this._keysToZoomAction={},this.registerIncoming("key-down",n,s=>this._handleKeyDown(s)),i.zoomIn.forEach(s=>this._keysToZoomAction[s]=Ef.IN),i.zoomOut.forEach(s=>this._keysToZoomAction[s]=Ef.OUT)}_handleKeyDown(e){this._handleKey(e)}_handleKey(e){const i=e.modifiers;if(i.size>0&&!i.has("Shift"))return;const{key:n}=e.data;if(!(n in this._keysToZoomAction))return;const s=this._keysToZoomAction[n],{mapViewNavigation:h}=this.view;let f=null;switch(s){case Ef.IN:f=h.zoomIn();break;case Ef.OUT:f=h.zoomOut();break;default:return}h.begin(),f.then(()=>h.end()),e.stopPropagation()}};const Gpe=.6;let Upe=class extends Tn{constructor(e,i){super(!0),this._view=e,this._canZoom=!0,this.registerIncoming("mouse-wheel",i,n=>this._handleMouseWheel(n))}_handleMouseWheel(e){if(!this._view.navigation.mouseWheelZoomEnabled||(e.preventDefault(),e.stopPropagation(),!this._canZoom))return;const i=this._view.mapViewNavigation,{x:n,y:s,deltaY:h}=e.data,f=1/Gpe**(1/60*h),m=i.zoom(f,[n,s]);m&&(this._canZoom=!1,m.catch(()=>{}).then(()=>{this._canZoom=!0,i.end()}))}},Bpe=class extends Tn{constructor(e){super(!0),this.view=e,this.registerIncoming("drag",n=>this._handleDrag(n)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const i=this.view.mapViewNavigation;this._dragEventSeparator=new l_({start:(n,s)=>{i.pinch.begin(this.view,s.data),s.stopPropagation()},update:(n,s)=>{i.pinch.update(this.view,s.data),s.stopPropagation()},end:(n,s)=>{i.pinch.end(this.view),s.stopPropagation()},condition:n=>n>=2})}_handleDrag(e){this._dragEventSeparator.handle(e)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function tC(t){const e=t.native;return e?{buttons:e.buttons.map(i=>i.pressed?i.value||1:0),axes:e.axes.map(i=>qpe(i,t.axisThreshold))}:{buttons:[],axes:[]}}function Hpe(t,e){if(t.axes.length!==e.axes.length||t.buttons.length!==e.buttons.length)return!1;for(let i=0;i<t.axes.length;i++)if(t.axes[i]!==e.axes[i])return!1;for(let i=0;i<t.buttons.length;i++)if(t.buttons[i]!==e.buttons[i])return!1;return!0}function Vpe(t){for(let e=0;e<t.axes.length;e++)if(t.axes[e]!==0)return!1;for(let e=0;e<t.buttons.length;e++)if(t.buttons[e]!==0)return!1;return!0}function qpe(t,e){const i=Math.abs(t);return i<e?0:Math.sign(t)*(i-e)/(1-e)}let Wpe=class{constructor(e,i){this._element=e,this._input=i,this._hasEventListeners=!1,this._onConnectGamepad=h=>{this._connectGamepad(h.gamepad)},this._onDisconnectGamepad=h=>{const f=h.gamepad,m=f.index,y=this._inputDevices[m];y&&(this._emitGamepadEvent(f,tC(y),!1),this._inputDevices.splice(m,1),this._latestUpdate.splice(m,1),this._input.gamepad.devices.remove(y),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const n="getGamepads"in window.navigator,s=window.isSecureContext;this.supported=n&&s,this.supported&&(iC(h=>this._connectGamepad(h)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(e){this._hasEventListeners!==e&&(this._hasEventListeners=e,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(e){this._callback=e}_connectGamepad(e){const i=new KE(e);i.deviceType!=="unknown"&&(this._inputDevices[e.index]=i,this._input.gamepad.devices.add(i)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=Xf({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const e=document.hasFocus(),i=this._element.contains(document.activeElement),n=this._input.gamepad.enabledFocusMode==="document"&&!e||this._input.gamepad.enabledFocusMode==="view"&&!i;iC(s=>{const h=this._inputDevices[s.index];if(!h)return;const f=this._latestUpdate[s.index],m=tC(h),y=n||Vpe(m);f&&(f.timestamp===s.timestamp||!f.active&&y||Hpe(f.state,m))||this._emitGamepadEvent(s,m,!y)})}_emitGamepadEvent(e,i,n){const s=this._latestUpdate[e.index],h=s&&s.active;if(!h&&!n)return;const f=!h&&n?"start":h&&n?"update":"end";this._latestUpdate[e.index]={timestamp:e.timestamp,state:i,active:n},this._callback&&this._callback({device:this._inputDevices[e.index],state:i,action:f})}};function Kpe(t){if(!t||!t.connected)return!1;for(let e=0;e<t.axes.length;e++)if(isNaN(t.axes[e]))return!1;return!0}function iC(t){for(const e of navigator.getGamepads())Kpe(e)&&t(e)}const nC=de("edge"),Zpe=de("chrome"),Jpe=de("ff"),Ype=de("safari"),rC="esri-view-surface",Ip={touchNone:`${rC}--touch-none`,touchPan:`${rC}--touch-pan`};let fG=class gG{constructor(e,i){this._input=i,this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=e,e.getAttribute("tabindex")||e.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new Wpe(e,this._input),this._gamepadSource.onEvent=n=>this._callback("gamepad",n)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(e=>{this._releasePointerCaptureSafe(e)}),this._gamepadSource=mt(this._gamepadSource),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(e){this._browserTouchPanningEnabled=e,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(e){this._callback=e}set activeEvents(e){for(const i in this._active)if(!e||!e.has(i)){const n=this._active[i];this._element.removeEventListener(q5[i],n),delete this._active[i]}e&&e.forEach(i=>{if(!this._active[i]&&q5[i]){const n=(this._eventHandlers[i]||this._handleDefault).bind(this,i);this._element.addEventListener(q5[i],n),this._active[i]=n}}),this._gamepadSource.hasEventListeners=(e==null?void 0:e.has("gamepad"))??!1}setPointerCapture(e,i){i?this._setPointerCatpureSafe(e.pointerId):(this._releasePointerCaptureSafe(e.pointerId),this._activePointerCaptures.delete(e.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?Ip.touchNone:Ip.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?Ip.touchPan:Ip.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(Ip.touchNone),this._element.classList.remove(Ip.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCatpureSafe(e){try{this._element.setPointerCapture(e),this._activePointerCaptures.add(e)}catch{}}_releasePointerCaptureSafe(e){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(e))return;this._element.releasePointerCapture(e)}catch{}}_updateNormalizedPointerLikeEvent(e,i){const n=WF(this._element,e);return gG.test.disableSubpixelCoordinates&&(n.x=Math.round(n.x),n.y=Math.round(n.y)),i.x=n.x,i.y=n.y,i}_handleKey(e,i){const{key:n}=i;n&&e==="key-up"&&this._keyDownState.delete(n);const s={native:i,key:n,repeat:!!n&&this._keyDownState.has(n)};n&&e==="key-down"&&this._keyDownState.add(s.key),this._callback(e,s)}_handlePointer(e,i){const n=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});this._callback(e,n)}_handlePointerPreventDefault(e,i){const n=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});i.preventDefault(),this._callback(e,n)}_getDeltaFromTrackpadOrMouseWheel(e){return e.shiftKey&&de("mac")&&e.deltaY===0?e.deltaX:e.deltaY}_handleMouseWheel(e,i){let n=this._getDeltaFromTrackpadOrMouseWheel(i);switch(i.deltaMode){case 0:nC&&(n=n/document.documentElement.clientHeight*600);break;case 1:n*=30;break;case 2:n*=900}nC?n*=.7:Zpe||Ype?n*=.6:Jpe&&(n*=1.375);const s=100,h=Math.abs(n);h>s&&(n=n/h*200/(1+Math.exp(-.02*(h-s))));const f=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,deltaY:n});this._callback(e,f)}_handlePointerCaptureLost(e,i){this._activePointerCaptures.delete(i.pointerId),this._handleDefault(e,i)}_handleDefault(e,i){const n={native:i};i.preventDefault(),this._callback(e,n)}_preventAltKeyDefault(e){e.key==="Alt"&&e.preventDefault()}_preventMultiTouchPanning(e){e.touches.length>1&&e.preventDefault()}};fG.test={disableSubpixelCoordinates:!1};const q5={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let Xpe=class extends Tn{constructor(){super(!0),this.registerIncoming("context-menu",e=>e.data.native.preventDefault())}};const jn={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500,maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};function fw(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}function Qpe(t,e){const i=e.x-t.x,n=e.y-t.y;return Math.sqrt(i*i+n*n)}function efe(t,e){if(e?(e.radius=0,e.center.x=0,e.center.y=0):e={radius:0,center:Ri()},t.length===0)return e;if(t.length===1)return e.center.x=t[0].x,e.center.y=t[0].y,e;if(t.length===2){const[Z,Y]=t,[te,ie]=[Y.x-Z.x,Y.y-Z.y];return e.radius=Math.sqrt(te*te+ie*ie)/2,e.center.x=(Z.x+Y.x)/2,e.center.y=(Z.y+Y.y)/2,e}let i=0,n=0;for(let Z=0;Z<t.length;Z++)i+=t[Z].x,n+=t[Z].y;i/=t.length,n/=t.length;const s=t.map(Z=>Z.x-i),h=t.map(Z=>Z.y-n);let f=0,m=0,y=0,x=0,E=0,k=0,I=0;for(let Z=0;Z<s.length;Z++){const Y=s[Z],te=h[Z],ie=Y*Y,le=te*te;f+=ie,m+=le,y+=Y*te,x+=ie*Y,E+=le*te,k+=Y*le,I+=te*ie}const P=.5*(x+k),L=.5*(E+I),D=f*m-y*y,j=(P*m-L*y)/D,H=(f*L-y*P)/D,W=Ri(j+i,H+n);return{radius:Math.sqrt(j*j+H*H+(f+m)/t.length),center:W}}function jd(t){const{native:e}=t,{pointerId:i,button:n,pointerType:s}=e;return s==="mouse"?`${i}:${n}`:`${s}`}let tfe=class extends Tn{constructor(e=jn.maximumDoubleClickDelay,i=jn.maximumDoubleClickDistance,n=jn.maximumDoubleTouchDelay,s=jn.maximumDoubleTouchDistance,h=C0){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=n,this._maximumDoubleTouchDistance=s,this._clock=h,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=Ri(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new l_({start:(f,m)=>this._dragStart(f,m),update:(f,m)=>this._dragUpdate(m),end:(f,m)=>this._dragEnd(m)}),this.registerIncoming("drag",f=>this._dragEventSeparator.handle(f)),this.registerIncoming("pointer-down",f=>this._handlePointerDown(f)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(e=>{e.doubleTapTimeout=Rt(e.doubleTapTimeout)})}get hasPendingInputs(){for(const e of this._pointerState.values())if(e.doubleTapTimeout!=null)return!0;return!1}_clearPointerDown(e){const i=this._pointerState.get(e);i&&(i.doubleTapTimeout=Rt(i.doubleTapTimeout),this._pointerState.delete(e),this.refreshHasPendingInputs())}_dragStart(e,i){if(!this._doubleTapDragReady||e!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:n,modifiers:s}=i,{center:h}=n;this._dragStartCenter=h;const f=W5("begin",Ri(0,0),n);this._doubleTapDrag.emit(f,void 0,s),i.stopPropagation()}_dragUpdate(e){if(!this._doubleTapDragActive)return;const{data:i,modifiers:n}=e,{center:s}=i,h=W5("update",Ri(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),i);this._doubleTapDrag.emit(h,void 0,n),e.stopPropagation()}_dragEnd(e){if(!this._doubleTapDragActive)return;const{data:i,modifiers:n}=e,{center:s}=i,h=W5("end",Ri(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),i);this._doubleTapDrag.emit(h,void 0,n),this._doubleTapDragActive=!1,e.stopPropagation()}_handlePointerDown(e){const{data:i}=e,n=jd(i),s=this._pointerState.get(n),{pointerType:h}=i.native;if(s){const f=h==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;this._clearPointerDown(n),fw(s.event.data,i)>f?this._storePointerDown(e):this._doubleTapDragReady=!0}else this._storePointerDown(e)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(e){const{data:i}=e,{pointerType:n}=i.native,s=jd(i),h=n==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,f=this._clock.setTimeout(()=>this._clearPointerDown(s),h);this._pointerState.set(s,{event:e,doubleTapTimeout:f}),this.refreshHasPendingInputs()}};function W5(t,e,i){const{button:n,buttons:s,pointer:h,pointers:f,pointerType:m,timestamp:y}=i;return{action:t,delta:e,button:n,buttons:s,pointer:h,pointers:f,pointerType:m,timestamp:y}}let ife=class extends Tn{constructor(e){super(!1),this._navigationTouch=e,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(e,i,n,s){return{action:e,pointerType:this._pointerType,button:this._mouseButton,buttons:i.buttons,timestamp:s,pointers:nfe(this._activePointerMap),pointer:i,angle:n.angle,radius:n.radius,center:n.center}}_addPointer(e){const i=e.native.pointerId,n=bv(this._activePointerMap).angle,s={event:e,initialAngle:0,lastAngle:0};this._activePointerMap.set(i,s);const h=Jb(s,mG(this._activePointerMap));s.initialAngle=h,s.lastAngle=h,this._updatePointerAngles(n)}_updatePointer(e){if(e&&e.x==null&&e.y==null)return;const i=e.native.pointerId,n=this._activePointerMap.get(i);n?n.event=e:this._addPointer(e)}_removePointer(e){const i=bv(this._activePointerMap).angle;this._activePointerMap.delete(e),this._updatePointerAngles(i)}_updatePointerAngles(e){const i=bv(this._activePointerMap);this._activePointerMap.forEach(n=>{n.initialAngle=Jb(n,i)-e,n.lastAngle=Jb(n,i)-e})}_emitEvent(e,i,n){const s=bv(this._activePointerMap);this._drag.emit(this._createPayload(e,i,s,n),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(e){const i=e.data.native.pointerId,n=e.timestamp;this._activePointerMap.get(i)&&(this._activePointerMap.size===1?(this._updatePointer(e.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",e.data,n),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(i)):(this._removePointer(i),this._emitEvent("removed",e.data,e.timestamp)))}_handlePointerDrag(e){const i=e.data,n=i.currentEvent,s=e.timestamp;switch(i.action){case"start":case"update":this._isDragging?this._activePointerMap.has(n.native.pointerId)?(this._updatePointer(n),!this._isCurrentDragSuppressed&&this._emitEvent("update",n,s)):(this._addPointer(n),this._emitEvent("added",n,s),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(n),this._pointerType=e.data.startEvent.pointerType,this._mouseButton=e.data.startEvent.button,this._startStateModifiers=e.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",n,s))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function mG(t){const e=[];return t.forEach(i=>{e.push(Ri(i.event.x,i.event.y))}),efe(e)}function bv(t){const e=mG(t);let i=0;return t.forEach(n=>{let s=Jb(n,e),h=s-n.lastAngle;for(;h>Math.PI;)h-=2*Math.PI;for(;h<-Math.PI;)h+=2*Math.PI;s=n.lastAngle+h,n.lastAngle=s;const f=s-n.initialAngle;i+=f}),i/=t.size||1,{angle:i,radius:e.radius,center:e.center}}function nfe(t){const e=new Map;return t.forEach((i,n)=>e.set(n,i.event)),e}function Jb(t,e){const i=t.event,n=i.x-e.center.x,s=i.y-e.center.y;return Math.atan2(s,n)}var sC;(function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right",t[t.Back=3]="Back",t[t.Forward=4]="Forward",t[t.Undefined=-1]="Undefined"})(sC||(sC={}));let rfe=class extends Tn{constructor(e=jn.maximumDoubleClickDelay,i=jn.maximumDoubleClickDistance,n=jn.maximumDoubleTouchDelay,s=jn.maximumDoubleTouchDistance,h=C0){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=n,this._maximumDoubleTouchDistance=s,this._clock=h,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(e=>{e.immediateDoubleClick&&e.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(e){const i=e.data,n=jd(i);if(!this._pointerState.has(n)){const s={downButton:i.native.button,x:i.x,y:i.y,immediateDoubleClick:null};this._pointerState.set(n,s),this.startCapturingPointer(i.native)}}_handlePointerUp(e){const i=e.data,n=jd(i),s=this._pointerState.get(n);if(s&&s.downButton===i.native.button){const h=s.immediateDoubleClick,f=e.data.native.pointerType==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;h?(h.timeoutHandle.remove(),fw(h,e.data)>f?this._startImmediateDoubleClick(e,s):(this._immediateDoubleClick.emit(e.data,void 0,h.modifiers),this._removeState(i))):fw(s,e.data)>f?this._removeState(i):this._startImmediateDoubleClick(e,s)}}_startImmediateDoubleClick(e,i){const n=e.data.native.pointerType==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay;i.immediateDoubleClick={x:e.data.x,y:e.data.y,modifiers:e.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(e.data),n)}}_removeState(e){const i=jd(e);this._pointerState.delete(i),this.stopCapturingPointer(e.native),this.refreshHasPendingInputs()}},sfe=class extends Tn{constructor(e=jn.maximumClickDelay,i=jn.movementUntilMouseDrag,n=jn.movementUntilPenDrag,s=jn.movementUntilTouchDrag,h=jn.holdDelay,f=C0){super(!1),this._maximumClickDelay=e,this._movementUntilMouseDrag=i,this._movementUntilPenDrag=n,this._movementUntilTouchDrag=s,this._holdDelay=h,this._clock=f,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",m=>this._handlePointerDown(m)),this.registerIncoming("pointer-up",m=>this._handlePointerLoss(m,"pointer-up")),this.registerIncoming("pointer-capture-lost",m=>this._handlePointerLoss(m,"pointer-capture-lost")),this.registerIncoming("pointer-cancel",m=>this._handlePointerLoss(m,"pointer-cancel")),this._moveHandle=this.registerIncoming("pointer-move",m=>this._handlePointerMove(m)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(e=>{e.holdTimeout=Rt(e.holdTimeout)}),super.onUninstall()}_handlePointerDown(e){const i=e.data,n=i.native.pointerId;let s=null;this._pointerState.size===0&&(s=this._clock.setTimeout(()=>{const f=this._pointerState.get(n);if(f){if(!f.isDragging){const m=f.previousEvent;this._pointerHold.emit(m,void 0,e.modifiers),f.holdEmitted=!0}f.holdTimeout=null}},this._holdDelay));const h={startEvent:i,previousEvent:i,startTimestamp:e.timestamp,isDragging:!1,downButton:i.native.button,holdTimeout:s,modifiers:new Set};this._pointerState.set(n,h),this.startCapturingPointer(i.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(e)}_handlePointerMove(e){const i=e.data,n=i.native.pointerId,s=this._pointerState.get(n);s&&(s.isDragging?this._pointerDrag.emit(wv("update",s,i),void 0,s.modifiers):Qpe(i,s.startEvent)>this._getDragThreshold(i.native.pointerType)&&this._startDragging(e),s.previousEvent=i)}_getDragThreshold(e){switch(e){case"touch":return this._movementUntilTouchDrag;case"pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(e){const i=e.data,n=i.native.pointerId;this._pointerState.forEach(s=>{s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging||(s.modifiers=e.modifiers,s.isDragging=!0,n===s.startEvent.native.pointerId?this._pointerDrag.emit(wv("start",s,i)):this._pointerDrag.emit(wv("start",s,s.previousEvent),e.timestamp))})}_handlePointerLoss(e,i){const n=e.data,s=n.native.pointerId,h=this._pointerState.get(s);h&&(h.holdTimeout!=null&&(h.holdTimeout.remove(),h.holdTimeout=null),h.isDragging?this._pointerDrag.emit(wv("end",h,i==="pointer-up"?n:h.previousEvent),void 0,h.modifiers):i==="pointer-up"&&h.downButton===n.native.button&&e.timestamp-h.startTimestamp<=this._maximumClickDelay&&!h.holdEmitted&&this._immediateClick.emit(n),this._pointerState.delete(s),this.stopCapturingPointer(n.native),this._pointerState.size===0&&this._moveHandle.pause())}};function wv(t,e,i){return{action:t,startEvent:e.startEvent,previousEvent:e.previousEvent,currentEvent:i}}let ofe=class extends Tn{constructor(e=jn.maximumDoubleClickDelay,i=jn.maximumDoubleClickDistance,n=jn.maximumDoubleTouchDelay,s=jn.maximumDoubleTouchDistance,h=C0){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=n,this._maximumDoubleTouchDistance=s,this._clock=h,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",f=>this._handleImmediateClick(f)),this.registerIncoming("pointer-down",f=>this._handlePointerDown(f))}onUninstall(){this._pointerState.forEach(e=>e.doubleClickTimer=Rt(e.doubleClickTimer))}get hasPendingInputs(){for(const e of this._pointerState.values())if(e.doubleClickTimer!=null)return!0;return!1}_clearDoubleClickTimer(e,i){const n=this._pointerState.get(e);n&&(n.doubleClickTimer=Rt(n.doubleClickTimer),i&&this._click.emit(n.event.data,void 0,n.event.modifiers),this._pointerState.delete(e),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(e){const i=this._pointerState.get(e);i.pointerDownCount===1&&this._click.emit(i.event.data,void 0,i.event.modifiers),i.doubleClickTimer=null,this._pointerState.delete(e),this.refreshHasPendingInputs()}_handleImmediateClick(e){const i=e.data,{pointerType:n}=i.native,s=afe(i);if(!this._pointerState.has(s))return void this._startClick(e);const h=this._pointerState.get(s),{data:f,modifiers:m}=h.event,y=n==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;fw(f,i)>y?(this._clearDoubleClickTimer(s,!0),this._startClick(e)):(this._clearDoubleClickTimer(s,!1),h.pointerDownCount===2&&this._doubleClick.emit(f,void 0,m))}_handlePointerDown(e){const i=jd(e.data),n=this._pointerState.get(i);n&&(n.pointerDownCount+=1)}_startClick(e){const{data:i}=e,{native:{pointerType:n}}=i,s=jd(i),h=n==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,f=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(s),h);this._pointerState.set(s,{event:e,doubleClickTimer:f,pointerDownCount:1}),this.refreshHasPendingInputs()}};function afe(t){const{pointerId:e,pointerType:i,button:n}=t.native;return i==="mouse"?`${e}:${n}`:`${i}`}const _v={counter:"Control",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}};let ad=class extends Oe{initialize(){const e=()=>{var i;return(i=this.view)==null?void 0:i.ready};this.addHandles([ur(()=>!e(),()=>this._disconnect()),ur(e,()=>this._connect())])}destroy(){this._disconnect()}get latestPointerType(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerType}get latestPointerLocation(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerLocation}get multiTouchActive(){var e;return((e=this._inputManager)==null?void 0:e.multiTouchActive)??!1}isModifierKeyDown(e){var i;return((i=this._inputManager)==null?void 0:i.isModifierKeyDown(e))??!1}_disconnect(){this.view.viewEvents.disconnect(),this._inputManager=mt(this._inputManager)}_connect(){const e=this.view.surface,i=new fG(e,this.view.input),n=[new rfe,new sfe,new ofe,new ife(this.view.navigation),new tfe],s=new qs({eventSource:i,recognizers:n});s.installHandlers("prevent-context-menu",[new Xpe],Wt.INTERNAL),s.installHandlers("navigation",[new Bpe(this.view),new Rpe(this.view),new Upe(this.view),new Xk(this.view),new Xk(this.view,[_v.counter]),new ope(this.view,"primary"),new zpe(this.view,_v.pan),new jpe(this.view,_v.zoom),new Fpe(this.view,_v.rotate),new ape(this.view,"secondary"),new spe(this.view,"touch")],Wt.INTERNAL),this.view.viewEvents.connect(s),this._source=i,this._inputManager=s,Ee(()=>{var h,f;return(f=(h=this.view)==null?void 0:h.navigation)==null?void 0:f.browserTouchPanEnabled},h=>{this._source&&(this._source.browserTouchPanningEnabled=!h)},Ct)}get test(){}};_([S()],ad.prototype,"view",void 0),_([S()],ad.prototype,"latestPointerType",null),_([S()],ad.prototype,"latestPointerLocation",null),_([S()],ad.prototype,"multiTouchActive",null),ad=_([J("esri.views.2d.input.MapViewInputManager")],ad);const lfe=ad;function cfe(t,e,i,n,s){yG(t,e,i||0,n||t.length-1,s||hfe)}function yG(t,e,i,n,s){for(;n>i;){if(n-i>600){var h=n-i+1,f=e-i+1,m=Math.log(h),y=.5*Math.exp(2*m/3),x=.5*Math.sqrt(m*y*(h-y)/h)*(f-h/2<0?-1:1);yG(t,e,Math.max(i,Math.floor(e-f*y/h+x)),Math.min(n,Math.floor(e+(h-f)*y/h+x)),s)}var E=t[e],k=i,I=n;for(g1(t,i,e),s(t[n],E)>0&&g1(t,i,n);k<I;){for(g1(t,k,I),k++,I--;s(t[k],E)<0;)k++;for(;s(t[I],E)>0;)I--}s(t[i],E)===0?g1(t,i,I):g1(t,++I,n),I<=e&&(i=I+1),e<=I&&(n=I-1)}}function g1(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function hfe(t,e){return t<e?-1:t>e?1:0}function gw(t,e){if(!(this instanceof gw))return new gw(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&(typeof e=="function"?this.toBBox=e:this._initFormat(e)),this.clear()}function ufe(t,e,i){if(!i)return e.indexOf(t);for(var n=0;n<e.length;n++)if(i(t,e[n]))return n;return-1}function Ap(t,e){yg(t,0,t.children.length,e,t)}function yg(t,e,i,n,s){s||(s=af(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(var h,f=e;f<i;f++)h=t.children[f],vg(s,t.leaf?n(h):h);return s}function vg(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function oC(t,e){return t.minX-e.minX}function aC(t,e){return t.minY-e.minY}function K5(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function xv(t){return t.maxX-t.minX+(t.maxY-t.minY)}function dfe(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function pfe(t,e){var i=Math.max(t.minX,e.minX),n=Math.max(t.minY,e.minY),s=Math.min(t.maxX,e.maxX),h=Math.min(t.maxY,e.maxY);return Math.max(0,s-i)*Math.max(0,h-n)}function Z5(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function Sv(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function af(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function lC(t,e,i,n,s){for(var h,f=[e,i];f.length;)(i=f.pop())-(e=f.pop())<=n||(h=e+Math.ceil((i-e)/n/2)*n,cfe(t,h,e,i,s),f.push(e,h,h,i))}gw.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],n=this.toBBox;if(!Sv(t,e))return i;for(var s,h,f,m,y=[];e;){for(s=0,h=e.children.length;s<h;s++)f=e.children[s],Sv(t,m=e.leaf?n(f):f)&&(e.leaf?i.push(f):Z5(t,m)?this._all(f,i):y.push(f));e=y.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!Sv(t,e))return!1;for(var n,s,h,f,m=[];e;){for(n=0,s=e.children.length;n<s;n++)if(h=e.children[n],Sv(t,f=e.leaf?i(h):h)){if(e.leaf||Z5(t,f))return!0;m.push(h)}e=m.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var s=this.data;this.data=n,n=s}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},insert:function(t){return t!=null&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=af([]),this},remove:function(t,e){if(t==null)return this;for(var i,n,s,h,f=this.data,m=this.toBBox(t),y=[],x=[];f||y.length;){if(f||(f=y.pop(),n=y[y.length-1],i=x.pop(),h=!0),f.leaf&&(s=ufe(t,f.children,e))!==-1)return f.children.splice(s,1),y.push(f),this._condense(y),this;h||f.leaf||!Z5(f,m)?n?(i++,f=n.children[i],h=!1):f=null:(y.push(f),x.push(i),i=0,n=f,f=f.children[0])}return this},toBBox:function(t){return t},compareMinX:oC,compareMinY:aC,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,n){var s,h=i-e+1,f=this._maxEntries;if(h<=f)return Ap(s=af(t.slice(e,i+1)),this.toBBox),s;n||(n=Math.ceil(Math.log(h)/Math.log(f)),f=Math.ceil(h/Math.pow(f,n-1))),(s=af([])).leaf=!1,s.height=n;var m,y,x,E,k=Math.ceil(h/f),I=k*Math.ceil(Math.sqrt(f));for(lC(t,e,i,I,this.compareMinX),m=e;m<=i;m+=I)for(lC(t,m,x=Math.min(m+I-1,i),k,this.compareMinY),y=m;y<=x;y+=k)E=Math.min(y+k-1,x),s.children.push(this._build(t,y,E,n-1));return Ap(s,this.toBBox),s},_chooseSubtree:function(t,e,i,n){for(var s,h,f,m,y,x,E,k;n.push(e),!e.leaf&&n.length-1!==i;){for(E=k=1/0,s=0,h=e.children.length;s<h;s++)y=K5(f=e.children[s]),(x=dfe(t,f)-y)<k?(k=x,E=y<E?y:E,m=f):x===k&&y<E&&(E=y,m=f);e=m||e.children[0]}return e},_insert:function(t,e,i){var n=this.toBBox,s=i?t:n(t),h=[],f=this._chooseSubtree(s,this.data,e,h);for(f.children.push(t),vg(f,s);e>=0&&h[e].children.length>this._maxEntries;)this._split(h,e),e--;this._adjustParentBBoxes(s,h,e)},_split:function(t,e){var i=t[e],n=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,n);var h=this._chooseSplitIndex(i,s,n),f=af(i.children.splice(h,i.children.length-h));f.height=i.height,f.leaf=i.leaf,Ap(i,this.toBBox),Ap(f,this.toBBox),e?t[e-1].children.push(f):this._splitRoot(i,f)},_splitRoot:function(t,e){this.data=af([t,e]),this.data.height=t.height+1,this.data.leaf=!1,Ap(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){var n,s,h,f,m,y,x,E;for(y=x=1/0,n=e;n<=i-e;n++)f=pfe(s=yg(t,0,n,this.toBBox),h=yg(t,n,i,this.toBBox)),m=K5(s)+K5(h),f<y?(y=f,E=n,x=m<x?m:x):f===y&&m<x&&(x=m,E=n);return E},_chooseSplitAxis:function(t,e,i){var n=t.leaf?this.compareMinX:oC,s=t.leaf?this.compareMinY:aC;this._allDistMargin(t,e,i,n)<this._allDistMargin(t,e,i,s)&&t.children.sort(n)},_allDistMargin:function(t,e,i,n){t.children.sort(n);var s,h,f=this.toBBox,m=yg(t,0,e,f),y=yg(t,i-e,i,f),x=xv(m)+xv(y);for(s=e;s<i-e;s++)h=t.children[s],vg(m,t.leaf?f(h):h),x+=xv(m);for(s=i-e-1;s>=e;s--)h=t.children[s],vg(y,t.leaf?f(h):h),x+=xv(y);return x},_adjustParentBBoxes:function(t,e,i){for(var n=i;n>=0;n--)vg(e[n],t)},_condense:function(t){for(var e,i=t.length-1;i>=0;i--)t[i].children.length===0?i>0?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():Ap(t[i],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};let cC=class vG{constructor(e,i){this.key=new pu(0,0,0,0),this.bounds=an(),this.objectIds=new Set,this.key.set(i);const n=e.getLODInfoAt(this.key);this.tileInfoView=e,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=n.resolution,this.level=n.level,this.scale=n.scale,this.minScale=e.zoomToScale(n.level-1),this.maxScale=e.zoomToScale(n.level+1)}get lod(){return this.tileInfoView.getLODInfoAt(this.key)}get id(){return this.key.id}get extent(){return Nt.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createArcadeEvaluationOptions(e){return{$view:{scale:this.scale,timeZone:e}}}createChildTiles(){const e=this.key.getChildKeys(),i=_r.acquire();for(let n=0;n<e.length;n++)i[n]=new vG(this.tileInfoView,e[n]);return i}getQuantizationParameters(){return BF.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}};const Pu={added:[],removed:[]},J5=new Set,ffe=new pu(0,0,0,0);function gfe(t,e){const i=cr(e);if(!i)return null;const[n,s]=i.valid;return t[2]>s?[an([t[0],t[1],s,t[3]]),an([n,t[1],n+t[2]-s,t[3]])]:t[0]<n?[an([n,t[1],t[2],t[3]]),an([s-(n-t[0]),t[1],s,t[3]])]:null}let mfe=class extends un{constructor(e){super(),this._tiles=new Map,this._index=gw(9,de("esri-csp-restrictions")?i=>({minX:i.bounds[0],minY:i.bounds[1],maxX:i.bounds[2],maxY:i.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=e}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(e){return this._tiles.has(e)}get(e){return this._tiles.get(e)}getIntersectingTiles(e){if(!e||qT(e)===0||WT(e)===0)return[];const i=gfe(e,this.tileScheme.spatialReference);return i!=null?[...new Set([...this.boundsIntersections(i[0]),...this.boundsIntersections(i[1])])]:this.boundsIntersections(e)}boundsIntersections(e){return this._index.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]})}updateTiles(e){const i={added:[],removed:[]};for(const n of e.added)if(!this.has(n)){const s=new cC(this.tileScheme,n);this._tiles.set(n,s),this._index.insert(s),i.added.push(s)}for(const n of e.removed)if(this.has(n)){const s=this.get(n);this._tiles.delete(n),this._index.remove(s),i.removed.push(s)}this.tiles.length=0,this._tiles.forEach(n=>this.tiles.push(n)),(i.added.length||i.removed.length)&&this.emit("update",i)}setViewState(e){const i=this.tileScheme.getTileCoverage(e,0);if(!i)return;const{spans:n,lodInfo:s}=i,{level:h}=s;if(n.length>0)for(const{row:f,colFrom:m,colTo:y}of n)for(let x=m;x<=y;x++){const E=ffe.set(h,f,s.normalizeCol(x),s.getWorldForColumn(x)).id;if(J5.add(E),!this.has(E)){const k=new cC(this.tileScheme,E);this._tiles.set(E,k),this._index.insert(k),this.tiles.push(k),Pu.added.push(k)}}for(let f=this.tiles.length-1;f>=0;f--){const m=this.tiles[f];J5.has(m.id)||(this._tiles.delete(m.id),this.tiles.splice(f,1),this._index.remove(m),Pu.removed.push(m))}(Pu.added.length||Pu.removed.length)&&this.emit("update",Pu),km.pool.release(i),J5.clear(),Pu.added.length=0,Pu.removed.length=0}};const oCe=1e-30,hC=512,Tv=16777216,aCe=8,lCe=29,cCe=24,hCe=4,uCe=0,dCe=0,pCe=0,fCe=1,gCe=2,mCe=3,yCe=4,vCe=5,bCe=6,wCe=12,_Ce=13,xCe=5,yfe=6,SCe=5,TCe=6;var uC;(function(t){t[t.FilterFlags=0]="FilterFlags",t[t.Animation=1]="Animation",t[t.GPGPU=2]="GPGPU",t[t.VV=3]="VV",t[t.DD0=4]="DD0",t[t.DD1=5]="DD1",t[t.DD2=6]="DD2",t[t.LocalTimeOrigin=7]="LocalTimeOrigin"})(uC||(uC={}));const bG=6,vfe=1<<bG,ECe=vfe<<1,MCe=1.05,$Ce=3,kCe=1,CCe=3,ICe=3,ACe=5,OCe=6,PCe=1.15,bfe=2,RCe=128,wfe=256,NCe=wfe-2*bfe,LCe=2,DCe=128,zCe=10,FCe=1024,jCe=128,GCe=4,UCe=1,BCe=1<<20,HCe=.75,VCe=10,qCe=.75,WCe=256,KCe=32,ZCe=512,JCe=0,YCe=1,_fe=1,XCe=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],QCe=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],m1=256,xfe=new ht("cyan"),Sfe=1,Tfe=.25;new ht("black");const eIe=.25,Efe="default",Mfe="temporary",$fe=new ht("yellow"),tIe=8;let ld=class extends Oe{constructor(e){super(e),this.color=xfe.clone(),this.haloOpacity=Sfe,this.fillOpacity=Tfe}equals(e){return this.color.equals(e.color)&&(this.haloColor||this.color).equals(e.haloColor||e.color)&&this.haloOpacity===e.haloOpacity&&this.fillOpacity===e.fillOpacity}};_([S({type:ht})],ld.prototype,"color",void 0),_([S({type:ht})],ld.prototype,"haloColor",void 0),_([S()],ld.prototype,"haloOpacity",void 0),_([S()],ld.prototype,"fillOpacity",void 0),ld=_([J("esri.views.support.HighlightOptions")],ld);const kfe=ld;var QS;let bg=QS=class extends kfe{constructor(t){super(t),this.haloWidth=2.1,this.haloBlur=.8/this.haloWidth}equals(t){return super.equals(t)&&this.haloWidth===t.haloWidth&&this.haloBlur===t.haloBlur}get optionsKey(){return`${this.color};${this.haloColor};${this.haloOpacity};${this.fillOpacity};${this.haloWidth};${this.haloBlur}`}clone(){var t;return new QS({color:this.color.clone(),haloColor:(t=this.haloColor)==null?void 0:t.clone(),haloOpacity:this.haloOpacity,fillOpacity:this.fillOpacity,haloWidth:this.haloWidth,haloBlur:this.haloBlur})}};_([S()],bg.prototype,"haloWidth",void 0),_([S()],bg.prototype,"haloBlur",void 0),bg=QS=_([J("esri.views.2d.support.HighlightOptions")],bg);const Xd=bg;var dC,pC,fC,gC,e6,mC,yC,Ka,t6,Yg,bn,mw,ho,fi,je,Im,gc,vC,bC,wC;(function(t){t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL",t[t.COLOR=16384]="COLOR"})(dC||(dC={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(pC||(pC={})),function(t){t[t.ZERO=0]="ZERO",t[t.ONE=1]="ONE",t[t.SRC_COLOR=768]="SRC_COLOR",t[t.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",t[t.SRC_ALPHA=770]="SRC_ALPHA",t[t.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",t[t.DST_ALPHA=772]="DST_ALPHA",t[t.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",t[t.DST_COLOR=774]="DST_COLOR",t[t.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",t[t.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",t[t.CONSTANT_COLOR=32769]="CONSTANT_COLOR",t[t.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",t[t.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",t[t.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA"}(fC||(fC={})),function(t){t[t.ADD=32774]="ADD",t[t.MIN=32775]="MIN",t[t.MAX=32776]="MAX",t[t.SUBTRACT=32778]="SUBTRACT",t[t.REVERSE_SUBTRACT=32779]="REVERSE_SUBTRACT"}(gC||(gC={})),function(t){t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",t[t.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",t[t.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",t[t.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",t[t.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",t[t.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER"}(e6||(e6={})),function(t){t[t.FRONT=1028]="FRONT",t[t.BACK=1029]="BACK",t[t.FRONT_AND_BACK=1032]="FRONT_AND_BACK"}(mC||(mC={})),function(t){t[t.CW=2304]="CW",t[t.CCW=2305]="CCW"}(yC||(yC={})),function(t){t[t.BYTE=5120]="BYTE",t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.SHORT=5122]="SHORT",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.INT=5124]="INT",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.FLOAT=5126]="FLOAT",t[t.HALF_FLOAT=5131]="HALF_FLOAT"}(Ka||(Ka={})),function(t){t[t.NEVER=512]="NEVER",t[t.LESS=513]="LESS",t[t.EQUAL=514]="EQUAL",t[t.LEQUAL=515]="LEQUAL",t[t.GREATER=516]="GREATER",t[t.NOTEQUAL=517]="NOTEQUAL",t[t.GEQUAL=518]="GEQUAL",t[t.ALWAYS=519]="ALWAYS"}(t6||(t6={})),function(t){t[t.ZERO=0]="ZERO",t[t.KEEP=7680]="KEEP",t[t.REPLACE=7681]="REPLACE",t[t.INCR=7682]="INCR",t[t.DECR=7683]="DECR",t[t.INVERT=5386]="INVERT",t[t.INCR_WRAP=34055]="INCR_WRAP",t[t.DECR_WRAP=34056]="DECR_WRAP"}(Yg||(Yg={})),function(t){t[t.NEAREST=9728]="NEAREST",t[t.LINEAR=9729]="LINEAR",t[t.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",t[t.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",t[t.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",t[t.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR"}(bn||(bn={})),function(t){t[t.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(mw||(mw={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_3D=32879]="TEXTURE_3D",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY"}(ho||(ho={})),function(t){t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t[t.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",t[t.ALPHA=6406]="ALPHA",t[t.RGB=6407]="RGB",t[t.RGBA=6408]="RGBA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.RED=6403]="RED",t[t.RG=33319]="RG",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER"}(fi||(fi={})),function(t){t[t.RGBA4=32854]="RGBA4",t[t.R16F=33325]="R16F",t[t.RG16F=33327]="RG16F",t[t.RGB32F=34837]="RGB32F",t[t.RGBA16F=34842]="RGBA16F",t[t.R32F=33326]="R32F",t[t.RG32F=33328]="RG32F",t[t.RGBA32F=34836]="RGBA32F",t[t.R11F_G11F_B10F=35898]="R11F_G11F_B10F",t[t.RGB8=32849]="RGB8",t[t.RGBA8=32856]="RGBA8",t[t.RGB5_A1=32855]="RGB5_A1",t[t.R8=33321]="R8",t[t.RG8=33323]="RG8",t[t.R8I=33329]="R8I",t[t.R8UI=33330]="R8UI",t[t.R16I=33331]="R16I",t[t.R16UI=33332]="R16UI",t[t.R32I=33333]="R32I",t[t.R32UI=33334]="R32UI",t[t.RG8I=33335]="RG8I",t[t.RG8UI=33336]="RG8UI",t[t.RG16I=33337]="RG16I",t[t.RG16UI=33338]="RG16UI",t[t.RG32I=33339]="RG32I",t[t.RG32UI=33340]="RG32UI",t[t.RGB16F=34843]="RGB16F",t[t.RGB9_E5=35901]="RGB9_E5",t[t.SRGB8=35905]="SRGB8",t[t.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",t[t.RGB565=36194]="RGB565",t[t.RGBA32UI=36208]="RGBA32UI",t[t.RGB32UI=36209]="RGB32UI",t[t.RGBA16UI=36214]="RGBA16UI",t[t.RGB16UI=36215]="RGB16UI",t[t.RGBA8UI=36220]="RGBA8UI",t[t.RGB8UI=36221]="RGB8UI",t[t.RGBA32I=36226]="RGBA32I",t[t.RGB32I=36227]="RGB32I",t[t.RGBA16I=36232]="RGBA16I",t[t.RGB16I=36233]="RGB16I",t[t.RGBA8I=36238]="RGBA8I",t[t.RGB8I=36239]="RGB8I",t[t.R8_SNORM=36756]="R8_SNORM",t[t.RG8_SNORM=36757]="RG8_SNORM",t[t.RGB8_SNORM=36758]="RGB8_SNORM",t[t.RGBA8_SNORM=36759]="RGBA8_SNORM",t[t.RGB10_A2=32857]="RGB10_A2",t[t.RGB10_A2UI=36975]="RGB10_A2UI"}(je||(je={})),function(t){t[t.FLOAT=5126]="FLOAT",t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.BYTE=5120]="BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.SHORT=5122]="SHORT",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.INT=5124]="INT",t[t.HALF_FLOAT=5131]="HALF_FLOAT",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV"}(Im||(Im={})),function(t){t[t.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",t[t.STENCIL_INDEX8=36168]="STENCIL_INDEX8",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t[t.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",t[t.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",t[t.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",t[t.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8"}(gc||(gc={})),function(t){t[t.STATIC_DRAW=35044]="STATIC_DRAW",t[t.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",t[t.STREAM_DRAW=35040]="STREAM_DRAW",t[t.STATIC_READ=35045]="STATIC_READ",t[t.DYNAMIC_READ=35049]="DYNAMIC_READ",t[t.STREAM_READ=35041]="STREAM_READ",t[t.STATIC_COPY=35046]="STATIC_COPY",t[t.DYNAMIC_COPY=35050]="DYNAMIC_COPY",t[t.STREAM_COPY=35042]="STREAM_COPY"}(vC||(vC={})),function(t){t[t.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",t[t.VERTEX_SHADER=35633]="VERTEX_SHADER"}(bC||(bC={})),function(t){t[t.FRAMEBUFFER=36160]="FRAMEBUFFER",t[t.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",t[t.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER"}(wC||(wC={}));const nIe=33984;var yw,_C,xC;(function(t){t[t.Texture=0]="Texture",t[t.BufferObject=1]="BufferObject",t[t.VertexArrayObject=2]="VertexArrayObject",t[t.Shader=3]="Shader",t[t.Program=4]="Program",t[t.FramebufferObject=5]="FramebufferObject",t[t.Renderbuffer=6]="Renderbuffer",t[t.TransformFeedback=7]="TransformFeedback",t[t.Sync=8]="Sync",t[t.UNCOUNTED=9]="UNCOUNTED",t[t.LinesOfCode=9]="LinesOfCode",t[t.Uniform=10]="Uniform",t[t.COUNT=11]="COUNT"})(yw||(yw={})),function(t){t[t.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",t[t.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",t[t.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",t[t.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",t[t.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",t[t.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",t[t.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",t[t.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",t[t.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",t[t.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",t[t.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",t[t.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",t[t.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",t[t.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",t[t.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",t[t.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15"}(_C||(_C={})),function(t){t[t.NONE=0]="NONE",t[t.BACK=1029]="BACK"}(xC||(xC={}));const rIe=33306;var Fn,SC,TC,EC,MC,$C,kC;(function(t){t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC"})(Fn||(Fn={})),function(t){t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_VEC2=35664]="FLOAT_VEC2",t[t.FLOAT_VEC3=35665]="FLOAT_VEC3",t[t.FLOAT_VEC4=35666]="FLOAT_VEC4",t[t.INT=5124]="INT",t[t.INT_VEC2=35667]="INT_VEC2",t[t.INT_VEC3=35668]="INT_VEC3",t[t.INT_VEC4=35669]="INT_VEC4",t[t.BOOL=35670]="BOOL",t[t.BOOL_VEC2=35671]="BOOL_VEC2",t[t.BOOL_VEC3=35672]="BOOL_VEC3",t[t.BOOL_VEC4=35673]="BOOL_VEC4",t[t.FLOAT_MAT2=35674]="FLOAT_MAT2",t[t.FLOAT_MAT3=35675]="FLOAT_MAT3",t[t.FLOAT_MAT4=35676]="FLOAT_MAT4",t[t.SAMPLER_2D=35678]="SAMPLER_2D",t[t.SAMPLER_CUBE=35680]="SAMPLER_CUBE",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",t[t.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",t[t.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",t[t.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",t[t.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",t[t.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",t[t.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",t[t.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",t[t.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",t[t.SAMPLER_3D=35679]="SAMPLER_3D",t[t.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",t[t.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",t[t.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",t[t.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",t[t.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",t[t.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",t[t.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",t[t.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",t[t.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",t[t.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",t[t.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",t[t.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY"}(SC||(SC={})),function(t){t[t.OBJECT_TYPE=37138]="OBJECT_TYPE",t[t.SYNC_CONDITION=37139]="SYNC_CONDITION",t[t.SYNC_STATUS=37140]="SYNC_STATUS",t[t.SYNC_FLAGS=37141]="SYNC_FLAGS"}(TC||(TC={})),function(t){t[t.UNSIGNALED=37144]="UNSIGNALED",t[t.SIGNALED=37145]="SIGNALED"}(EC||(EC={})),function(t){t[t.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",t[t.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",t[t.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",t[t.WAIT_FAILED=37149]="WAIT_FAILED"}(MC||(MC={})),function(t){t[t.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE"}($C||($C={})),function(t){t[t.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT"}(kC||(kC={}));const Cfe=()=>Ae.getLogger("esri.views.webgl.checkWebGLError");function Ife(t,e){switch(e){case t.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";case t.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case t.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";case t.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";case t.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case t.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";default:return"Unknown error"}}const wG=!!de("enable-feature:webgl-debug");function _G(){return wG}function sIe(){return wG}function Op(t){if(_G()){const e=t.getError();if(e){const i=Ife(t,e),n=new Error().stack;Cfe().error(new ce("webgl-error","WebGL error occurred",{message:i,stack:n}))}}}var i6;(function(t){t[t.Texture=0]="Texture",t[t.RenderBuffer=1]="RenderBuffer"})(i6||(i6={}));function Afe(t){switch(t){case Ka.BYTE:case Ka.UNSIGNED_BYTE:return 1;case Ka.SHORT:case Ka.UNSIGNED_SHORT:case Ka.HALF_FLOAT:return 2;case Ka.FLOAT:case Ka.INT:case Ka.UNSIGNED_INT:return 4}}function Ofe(t){const e=t.gl;switch(e.getError()){case e.NO_ERROR:return null;case e.INVALID_ENUM:return"An unacceptable value has been specified for an enumerated argument";case e.INVALID_VALUE:return"An unacceptable value has been specified for an argument";case e.INVALID_OPERATION:return"The specified command is not allowed for the current state";case e.INVALID_FRAMEBUFFER_OPERATION:return"The currently bound framebuffer is not framebuffer complete";case e.OUT_OF_MEMORY:return"Not enough memory is left to execute the command";case e.CONTEXT_LOST_WEBGL:return"WebGL context is lost"}return"Unknown error"}function oIe(t,e,i,n,s=0){var f;const h=t.gl;t.bindBuffer(i);for(const m of n){const y=e.get(m.name);if(y==null){console.warn(`There is no location for vertex attribute '${m.name}' defined.`);continue}const x=s*m.stride;if(m.count<=4)h.vertexAttribPointer(y,m.count,m.type,m.normalized,m.stride,m.offset+x),h.enableVertexAttribArray(y),m.divisor>0&&t.gl.vertexAttribDivisor(y,m.divisor);else if(m.count===9)for(let E=0;E<3;E++)h.vertexAttribPointer(y+E,3,m.type,m.normalized,m.stride,m.offset+12*E+x),h.enableVertexAttribArray(y+E),m.divisor>0&&t.gl.vertexAttribDivisor(y+E,m.divisor);else if(m.count===16)for(let E=0;E<4;E++)h.vertexAttribPointer(y+E,4,m.type,m.normalized,m.stride,m.offset+16*E+x),h.enableVertexAttribArray(y+E),m.divisor>0&&((f=t.gl)==null||f.vertexAttribDivisor(y+E,m.divisor));else console.error("Unsupported vertex attribute element count: "+m.count);if(_G()){const E=Ofe(t),k=Afe(m.type),I=m.offset,P=Math.round(k/I)!==k/I?`. Offset not a multiple of stride. DataType requires ${k} bytes, but descriptor has an offset of ${I}`:"";E&&console.error(`Unable to bind vertex attribute "${m.name}" with baseInstanceOffset ${x}${P}:`,E,m)}}}function aIe(t,e,i,n){var h,f,m;const s=t.gl;t.bindBuffer(i);for(const y of n){const x=e.get(y.name);if(y.count<=4)s.disableVertexAttribArray(x),y.divisor&&y.divisor>0&&((h=t.gl)==null||h.vertexAttribDivisor(x,0));else if(y.count===9)for(let E=0;E<3;E++)s.disableVertexAttribArray(x+E),y.divisor&&y.divisor>0&&((f=t.gl)==null||f.vertexAttribDivisor(x+E,0));else if(y.count===16)for(let E=0;E<4;E++)s.disableVertexAttribArray(x+E),y.divisor&&y.divisor>0&&((m=t.gl)==null||m.vertexAttribDivisor(x+E,0));else console.error("Unsupported vertex attribute element count: "+y.count)}t.unbindBuffer(e6.ARRAY_BUFFER)}function Pfe(t){switch(t){case fi.ALPHA:case fi.LUMINANCE:case fi.RED:case fi.RED_INTEGER:case je.R8:case je.R8I:case je.R8UI:case je.R8_SNORM:case gc.STENCIL_INDEX8:return 1;case fi.LUMINANCE_ALPHA:case fi.RG:case fi.RG_INTEGER:case je.RGBA4:case je.R16F:case je.R16I:case je.R16UI:case je.RG8:case je.RG8I:case je.RG8UI:case je.RG8_SNORM:case je.RGB565:case je.RGB5_A1:case gc.DEPTH_COMPONENT16:return 2;case fi.DEPTH_COMPONENT:case fi.RGB:case fi.RGB_INTEGER:case je.RGB8:case je.RGB8I:case je.RGB8UI:case je.RGB8_SNORM:case je.SRGB8:case gc.DEPTH_COMPONENT24:return 3;case fi.DEPTH_STENCIL:case fi.DEPTH24_STENCIL8:case fi.RGBA:case fi.RGBA_INTEGER:case je.RGBA8:case je.R32F:case je.R11F_G11F_B10F:case je.RG16F:case je.R32I:case je.R32UI:case je.RG16I:case je.RG16UI:case je.RGBA8I:case je.RGBA8UI:case je.RGBA8_SNORM:case je.SRGB8_ALPHA8:case je.RGB9_E5:case je.RGB10_A2UI:case je.RGB10_A2:case gc.DEPTH_STENCIL:case gc.DEPTH_COMPONENT32F:case gc.DEPTH24_STENCIL8:return 4;case gc.DEPTH32F_STENCIL8:return 5;case je.RGB16F:case je.RGB16I:case je.RGB16UI:return 6;case je.RG32F:case je.RG32I:case je.RG32UI:case je.RGBA16F:case je.RGBA16I:case je.RGBA16UI:return 8;case je.RGB32F:case je.RGB32I:case je.RGB32UI:return 12;case je.RGBA32F:case je.RGBA32I:case je.RGBA32UI:return 16;case Fn.COMPRESSED_RGB_S3TC_DXT1_EXT:case Fn.COMPRESSED_RGBA_S3TC_DXT1_EXT:return .5;case Fn.COMPRESSED_RGBA_S3TC_DXT3_EXT:case Fn.COMPRESSED_RGBA_S3TC_DXT5_EXT:return 1;case Fn.COMPRESSED_R11_EAC:case Fn.COMPRESSED_SIGNED_R11_EAC:case Fn.COMPRESSED_RGB8_ETC2:case Fn.COMPRESSED_SRGB8_ETC2:case Fn.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:case Fn.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:return .5;case Fn.COMPRESSED_RG11_EAC:case Fn.COMPRESSED_SIGNED_RG11_EAC:case Fn.COMPRESSED_RGBA8_ETC2_EAC:case Fn.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:return 1}return 0}let xG=class{constructor(e=0,i=e){this.width=e,this.height=i,this.target=ho.TEXTURE_2D,this.pixelFormat=fi.RGBA,this.dataType=Im.UNSIGNED_BYTE,this.samplingMode=bn.LINEAR,this.wrapMode=mw.REPEAT,this.maxAnisotropy=1,this.flipped=!1,this.hasMipmap=!1,this.isOpaque=!1,this.unpackAlignment=4,this.preMultiplyAlpha=!1,this.depth=1,this.isImmutable=!1}};function Rfe(t){return t.width<=0||t.height<=0?0:Math.round(t.width*t.height*(t.hasMipmap?4/3:1)*(t.internalFormat==null?4:Pfe(t.internalFormat))*(t.target===ho.TEXTURE_CUBE_MAP?6:1))}let Nfe=class SG extends xG{constructor(e,i){switch(super(),this.context=e,Object.assign(this,i),this.internalFormat){case je.R16F:case je.R16I:case je.R16UI:case je.R32F:case je.R32I:case je.R32UI:case je.R8_SNORM:case je.R8:case je.R8I:case je.R8UI:this.pixelFormat=fi.RED}}static validate(e,i){return new SG(e,i)}},TG=class Xs{constructor(e,i=null,n=null){if(this.type=i6.Texture,this._glName=null,this._samplingModeDirty=!1,this._wrapModeDirty=!1,this._wasImmutablyAllocated=!1,"context"in e)this._descriptor=e,n=i;else{const s=Nfe.validate(e,i);if(!s)throw new ce("Texture descriptor invalid");this._descriptor=s}this._descriptor.target===ho.TEXTURE_CUBE_MAP?this._setDataCubeMap(n):this.setData(n)}get glName(){return this._glName}get descriptor(){return this._descriptor}get usedMemory(){return Rfe(this._descriptor)}get isDirty(){return this._samplingModeDirty||this._wrapModeDirty}dispose(){this._glName&&this._descriptor.context.instanceCounter.decrement(yw.Texture,this),this._descriptor.context.gl&&this._glName&&(this._descriptor.context.unbindTexture(this),this._descriptor.context.gl.deleteTexture(this._glName),this._glName=null)}release(){this.dispose()}resize(e,i){const n=this._descriptor;if(n.width!==e||n.height!==i){if(this._wasImmutablyAllocated)throw new ce("Immutable textures can't be resized!");n.width=e,n.height=i,this._descriptor.target===ho.TEXTURE_CUBE_MAP?this._setDataCubeMap(null):this.setData(null)}}_setDataCubeMap(e=null){for(let i=ho.TEXTURE_CUBE_MAP_POSITIVE_X;i<=ho.TEXTURE_CUBE_MAP_NEGATIVE_Z;i++)this._setData(e,i)}setData(e){this._setData(e)}_setData(e,i){var x;const n=(x=this._descriptor.context)==null?void 0:x.gl;if(!n)return;Op(n),this._glName||(this._glName=n.createTexture(),this._glName&&this._descriptor.context.instanceCounter.increment(yw.Texture,this));const s=this._descriptor,h=i??s.target,f=y1(h),m=this._descriptor.context.bindTexture(this,Xs.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(Xs.TEXTURE_UNIT_FOR_UPDATES),Ev(s),this._configurePixelStorage(),Op(n);const y=this._deriveInternalFormat();if(AC(e)){let E="width"in e?e.width:e.codedWidth,k="height"in e?e.height:e.codedHeight;const I=1;e instanceof HTMLVideoElement&&(E=e.videoWidth,k=e.videoHeight),s.width&&s.height,f&&s.depth,s.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(h,y,s.hasMipmap,E,k,I),this._texImage(h,0,y,E,k,I,e),Op(n),s.hasMipmap&&(this.generateMipmap(),Op(n)),s.width||(s.width=E),s.height||(s.height=k),f&&!s.depth&&(s.depth=I)}else{const{width:E,height:k,depth:I}=s;if(E==null||k==null)throw new ce("Width and height must be specified!");if(f&&I==null)throw new ce("Depth must be specified!");if(s.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(h,y,s.hasMipmap,E,k,I),Yb(e)){const P=e.levels,L=OC(h,E,k,I),D=Math.min(L-1,P.length-1);n.texParameteri(s.target,this._descriptor.context.gl.TEXTURE_MAX_LEVEL,D);const j=y;if(!zfe(j))throw new ce("Attempting to use compressed data with an uncompressed format!");this._forEachMipmapLevel((H,W,Z,Y)=>{const te=P[Math.min(H,P.length-1)];this._compressedTexImage(h,H,j,W,Z,Y,te)},D)}else this._texImage(h,0,y,E,k,I,e),Op(n),s.hasMipmap&&this.generateMipmap()}CC(n,this._descriptor),IC(n,this._descriptor),Lfe(this._descriptor.context,this._descriptor),Op(n),this._descriptor.context.bindTexture(m,Xs.TEXTURE_UNIT_FOR_UPDATES)}updateData(e,i,n,s,h,f,m=0){f||console.error("An attempt to use uninitialized data!"),this._glName||console.error("An attempt to update uninitialized texture!");const y=this._descriptor,x=this._deriveInternalFormat(),{context:E,pixelFormat:k,dataType:I,target:P,isImmutable:L}=y;if(L&&!this._wasImmutablyAllocated)throw new ce("Cannot update immutable texture before allocation!");const D=E.bindTexture(this,Xs.TEXTURE_UNIT_FOR_UPDATES,!0);(i<0||n<0||i+s>y.width||n+h>y.height)&&console.error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:j}=E;m&&j.pixelStorei(j.UNPACK_SKIP_ROWS,m),AC(f)?j.texSubImage2D(P,e,i,n,s,h,k,I,f):Yb(f)?j.compressedTexSubImage2D(P,e,i,n,s,h,x,f.levels[e]):j.texSubImage2D(P,e,i,n,s,h,k,I,f),m&&j.pixelStorei(j.UNPACK_SKIP_ROWS,0),E.bindTexture(D,Xs.TEXTURE_UNIT_FOR_UPDATES)}updateData3D(e,i,n,s,h,f,m,y){y||console.error("An attempt to use uninitialized data!"),this._glName||console.error("An attempt to update uninitialized texture!");const x=this._descriptor,E=this._deriveInternalFormat(),{context:k,pixelFormat:I,dataType:P,isImmutable:L,target:D}=x;if(L&&!this._wasImmutablyAllocated)throw new ce("Cannot update immutable texture before allocation!");y1(D)||console.warn("Attempting to set 3D texture data on a non-3D texture");const j=k.bindTexture(this,Xs.TEXTURE_UNIT_FOR_UPDATES);k.setActiveTexture(Xs.TEXTURE_UNIT_FOR_UPDATES),(i<0||n<0||s<0||i+h>x.width||n+f>x.height||s+m>x.depth)&&console.error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:H}=k;if(Yb(y))y=y.levels[e],H.compressedTexSubImage3D(D,e,i,n,s,h,f,m,E,y);else{const W=y;H.texSubImage3D(D,e,i,n,s,h,f,m,I,P,W)}k.bindTexture(j,Xs.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const e=this._descriptor;if(!e.hasMipmap){if(this._wasImmutablyAllocated)throw new ce("Cannot add mipmaps to immutable texture after allocation");e.hasMipmap=!0,this._samplingModeDirty=!0,Ev(e)}e.samplingMode===bn.LINEAR?(this._samplingModeDirty=!0,e.samplingMode=bn.LINEAR_MIPMAP_NEAREST):e.samplingMode===bn.NEAREST&&(this._samplingModeDirty=!0,e.samplingMode=bn.NEAREST_MIPMAP_NEAREST);const i=this._descriptor.context.bindTexture(this,Xs.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(Xs.TEXTURE_UNIT_FOR_UPDATES),this._descriptor.context.gl.generateMipmap(e.target),this._descriptor.context.bindTexture(i,Xs.TEXTURE_UNIT_FOR_UPDATES)}clearMipmap(){const e=this._descriptor;if(e.hasMipmap){if(this._wasImmutablyAllocated)throw new ce("Cannot delete mipmaps to immutable texture after allocation");e.hasMipmap=!1,this._samplingModeDirty=!0,Ev(e)}e.samplingMode===bn.LINEAR_MIPMAP_NEAREST?(this._samplingModeDirty=!0,e.samplingMode=bn.LINEAR):e.samplingMode===bn.NEAREST_MIPMAP_NEAREST&&(this._samplingModeDirty=!0,e.samplingMode=bn.NEAREST)}setSamplingMode(e){e!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=e,this._samplingModeDirty=!0)}setWrapMode(e){e!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=e,Ev(this._descriptor),this._wrapModeDirty=!0)}applyChanges(){const e=this._descriptor,i=e.context.gl;this._samplingModeDirty&&(CC(i,e),this._samplingModeDirty=!1),this._wrapModeDirty&&(IC(i,e),this._wrapModeDirty=!1)}_deriveInternalFormat(){if(this._descriptor.internalFormat!=null)return this._descriptor.internalFormat===fi.DEPTH_STENCIL&&(this._descriptor.internalFormat=fi.DEPTH24_STENCIL8),this._descriptor.internalFormat;switch(this._descriptor.dataType){case Im.FLOAT:switch(this._descriptor.pixelFormat){case fi.RGBA:return this._descriptor.internalFormat=je.RGBA32F;case fi.RGB:return this._descriptor.internalFormat=je.RGB32F;default:throw new ce("Unable to derive format")}case Im.UNSIGNED_BYTE:switch(this._descriptor.pixelFormat){case fi.RGBA:return this._descriptor.internalFormat=je.RGBA8;case fi.RGB:return this._descriptor.internalFormat=je.RGB8}}return this._descriptor.internalFormat=this._descriptor.pixelFormat===fi.DEPTH_STENCIL?fi.DEPTH24_STENCIL8:this._descriptor.pixelFormat}_configurePixelStorage(){const e=this._descriptor.context.gl,{unpackAlignment:i,flipped:n,preMultiplyAlpha:s}=this._descriptor;e.pixelStorei(e.UNPACK_ALIGNMENT,i),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,n?1:0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s?1:0)}_texStorage(e,i,n,s,h,f){const{gl:m}=this._descriptor.context;if(!Dfe(i))throw new ce("Immutable textures must have a sized internal format");if(!this._descriptor.isImmutable)return;const y=n?OC(e,s,h,f):1;if(y1(e)){if(f==null)throw new ce("Missing depth dimension for 3D texture upload");m.texStorage3D(e,y,i,s,h,f)}else m.texStorage2D(e,y,i,s,h);this._wasImmutablyAllocated=!0}_texImage(e,i,n,s,h,f,m){const y=this._descriptor.context.gl,x=y1(e),{isImmutable:E,pixelFormat:k,dataType:I}=this._descriptor;if(E){if(m!=null){const P=m;if(x){if(f==null)throw new ce("Missing depth dimension for 3D texture upload");y.texSubImage3D(e,i,0,0,0,s,h,f,k,I,P)}else y.texSubImage2D(e,i,0,0,s,h,k,I,P)}}else{const P=m;if(x){if(f==null)throw new ce("Missing depth dimension for 3D texture upload");y.texImage3D(e,i,n,s,h,f,0,k,I,P)}else y.texImage2D(e,i,n,s,h,0,k,I,P)}}_compressedTexImage(e,i,n,s,h,f,m){const y=this._descriptor.context.gl,x=y1(e);if(this._descriptor.isImmutable){if(m!=null)if(x){if(f==null)throw new ce("Missing depth dimension for 3D texture upload");y.compressedTexSubImage3D(e,i,0,0,0,s,h,f,n,m)}else y.compressedTexSubImage2D(e,i,0,0,s,h,n,m)}else if(x){if(f==null)throw new ce("Missing depth dimension for 3D texture upload");y.compressedTexImage3D(e,i,n,s,h,f,0,m)}else y.compressedTexImage2D(e,i,n,s,h,0,m)}_forEachMipmapLevel(e,i=1/0){let{width:n,height:s,depth:h,hasMipmap:f,target:m}=this._descriptor;const y=m===ho.TEXTURE_3D;if(n==null||s==null||y&&h==null)throw new ce("Missing texture dimensions for mipmap calculation");for(let x=0;e(x,n,s,h),f&&(n!==1||s!==1||y&&h!==1)&&!(x>=i);++x)n=Math.max(1,n>>1),s=Math.max(1,s>>1),y&&(h=Math.max(1,h>>1))}};function Ev(t){(t.width!=null&&t.width<0||t.height!=null&&t.height<0||t.depth!=null&&t.depth<0)&&console.error("Negative dimension parameters are not allowed!")}function CC(t,e){let i=e.samplingMode,n=e.samplingMode;i===bn.LINEAR_MIPMAP_NEAREST||i===bn.LINEAR_MIPMAP_LINEAR?(i=bn.LINEAR,e.hasMipmap||(n=bn.LINEAR)):i!==bn.NEAREST_MIPMAP_NEAREST&&i!==bn.NEAREST_MIPMAP_LINEAR||(i=bn.NEAREST,e.hasMipmap||(n=bn.NEAREST)),t.texParameteri(e.target,t.TEXTURE_MAG_FILTER,i),t.texParameteri(e.target,t.TEXTURE_MIN_FILTER,n)}function IC(t,e){typeof e.wrapMode=="number"?(t.texParameteri(e.target,t.TEXTURE_WRAP_S,e.wrapMode),t.texParameteri(e.target,t.TEXTURE_WRAP_T,e.wrapMode)):(t.texParameteri(e.target,t.TEXTURE_WRAP_S,e.wrapMode.s),t.texParameteri(e.target,t.TEXTURE_WRAP_T,e.wrapMode.t))}function Lfe(t,e){const i=t.capabilities.textureFilterAnisotropic;i&&t.gl.texParameterf(e.target,i.TEXTURE_MAX_ANISOTROPY,e.maxAnisotropy??1)}function Dfe(t){return t in je}function zfe(t){return t in Fn}function Yb(t){return t!=null&&"type"in t&&t.type==="compressed"}function Ffe(t){return t!=null&&"byteLength"in t}function AC(t){return t!=null&&!Yb(t)&&!Ffe(t)}function y1(t){return t===ho.TEXTURE_3D||t===ho.TEXTURE_2D_ARRAY}function OC(t,e,i,n=1){let s=Math.max(e,i);return t===ho.TEXTURE_3D&&(s=Math.max(s,n)),Math.round(Math.log(s)/Math.LN2)+1}TG.TEXTURE_UNIT_FOR_UPDATES=0;const Y5=()=>Ae.getLogger("esri.views.2d.engine.webgl.painter.highlight.HighlightGradient");function jfe(t,e){e.fillColor[0]=t.color.r/255,e.fillColor[1]=t.color.g/255,e.fillColor[2]=t.color.b/255,e.fillColor[3]=t.color.a,t.haloColor?(e.outlineColor[0]=t.haloColor.r/255,e.outlineColor[1]=t.haloColor.g/255,e.outlineColor[2]=t.haloColor.b/255,e.outlineColor[3]=t.haloColor.a):(e.outlineColor[0]=e.fillColor[0],e.outlineColor[1]=e.fillColor[1],e.outlineColor[2]=e.fillColor[2],e.outlineColor[3]=e.fillColor[3]),e.fillColor[3]*=t.fillOpacity,e.outlineColor[3]*=t.haloOpacity,e.fillColor[0]*=e.fillColor[3],e.fillColor[1]*=e.fillColor[3],e.fillColor[2]*=e.fillColor[3],e.outlineColor[0]*=e.outlineColor[3],e.outlineColor[1]*=e.outlineColor[3],e.outlineColor[2]*=e.outlineColor[3],e.outlineWidth=(1-t.haloBlur)*t.haloWidth,e.outerHaloWidth=t.haloBlur*t.haloWidth/2,e.innerHaloWidth=t.haloBlur*t.haloWidth/2,e.outlinePosition=0}const Gfe=[0,0,0,0];let EG=class{constructor(){this.type="single",this._highlightOptions=new Xd,this._convertedHighlightOptions={fillColor:[0,0,0,0],outlineColor:[0,0,0,0],outlinePosition:0,outlineWidth:0,innerHaloWidth:0,outerHaloWidth:0},this._optionsShadeTexKey="",this._texelData=new Uint8Array(4*m1),this._minMaxDistance=[0,0]}setHighlightOptions(e){this._highlightOptions=e}applyHighlightOptions(e,i){this._updateGradientTexture(e),e.bindTexture(this._shadeTex,yfe),i.setUniform2fv("u_minMaxDistance",this._minMaxDistance)}destroy(){var e;(e=this._shadeTex)==null||e.dispose(),this._shadeTex=null}getReasonsWithGradients(){return[{activeReasons:(1<<bG)-1,activeGradient:this}]}_updateGradientTexture(e){const{optionsKey:i}=this._highlightOptions;if(i===this._optionsShadeTexKey)return;this._optionsShadeTexKey=i,jfe(this._highlightOptions,this._convertedHighlightOptions);const n=this._convertedHighlightOptions,s=n.outlinePosition-n.outlineWidth/2-n.outerHaloWidth,h=n.outlinePosition-n.outlineWidth/2,f=n.outlinePosition+n.outlineWidth/2,m=n.outlinePosition+n.outlineWidth/2+n.innerHaloWidth,y=Math.sqrt(Math.PI/2)*_fe,x=Math.abs(s)>y?Math.round(10*(Math.abs(s)-y))/10:0,E=Math.abs(m)>y?Math.round(10*(Math.abs(m)-y))/10:0;let k;x&&!E?Y5().error("The outer rim of the highlight is "+x+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards)."):!x&&E?Y5().error("The inner rim of the highlight is "+E+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards)."):x&&E&&Y5().error("The highlight is "+Math.max(x,E)+"px away from the edge of the feature; consider reducing some width values.");const I=[void 0,void 0,void 0,void 0];function P(D,j,H){I[0]=(1-H)*D[0]+H*j[0],I[1]=(1-H)*D[1]+H*j[1],I[2]=(1-H)*D[2]+H*j[2],I[3]=(1-H)*D[3]+H*j[3]}const{_texelData:L}=this;for(let D=0;D<m1;++D)k=s+D/(m1-1)*(m-s),k<s?(I[0]=0,I[1]=0,I[2]=0,I[3]=0):k<h?P(Gfe,n.outlineColor,(k-s)/(h-s)):k<f?[I[0],I[1],I[2],I[3]]=n.outlineColor:k<m?P(n.outlineColor,n.fillColor,(k-f)/(m-f)):[I[0],I[1],I[2],I[3]]=n.fillColor,L[4*D]=255*I[0],L[4*D+1]=255*I[1],L[4*D+2]=255*I[2],L[4*D+3]=255*I[3];if(this._minMaxDistance[0]=s,this._minMaxDistance[1]=m,!this._shadeTex){const D=new xG;D.wrapMode=mw.CLAMP_TO_EDGE,D.width=m1,D.height=1,this._shadeTex=new TG(e,D)}this._shadeTex.updateData(0,0,0,m1,1,this._texelData)}},Ufe=class{constructor(){this.type="multi",this.gradients=[]}setHighlightOptions(e){for(let i=0;i<e.length;i++)this.gradients[i]||(this.gradients[i]=new EG),this.gradients[i].setHighlightOptions(e[i].options);for(let i=e.length+1;i<this.gradients.length;i++)this.gradients[i].destroy();this.gradients.length=e.length}destroy(){for(const e of this.gradients)e.destroy()}getReasonsWithGradients(){let e=1;const i=[];for(let n=0;n<this.gradients.length;n++){const s=this.gradients[n];i.push({activeReasons:e,activeGradient:s}),e<<=1}return i}};var PC,RC,NC,LC,DC,zC,vw,FC,jC;(function(t){t[t.FILL=0]="FILL",t[t.LINE=1]="LINE",t[t.MARKER=2]="MARKER",t[t.TEXT=3]="TEXT",t[t.LABEL=4]="LABEL"})(PC||(PC={})),function(t){t[t.NONE=0]="NONE",t[t.MAP=1]="MAP",t[t.LABEL=2]="LABEL",t[t.LABEL_ALPHA=4]="LABEL_ALPHA",t[t.HITTEST=8]="HITTEST",t[t.HIGHLIGHT=16]="HIGHLIGHT",t[t.CLIP=32]="CLIP",t[t.DEBUG=64]="DEBUG",t[t.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"}(RC||(RC={})),function(t){t[t.SIZE=0]="SIZE",t[t.COLOR=1]="COLOR",t[t.OPACITY=2]="OPACITY",t[t.ROTATION=3]="ROTATION"}(NC||(NC={})),function(t){t[t.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE",t[t.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE",t[t.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE",t[t.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"}(LC||(LC={})),function(t){t[t.SPRITE=0]="SPRITE",t[t.GLYPH=1]="GLYPH"}(DC||(DC={})),function(t){t[t.DEFAULT=0]="DEFAULT",t[t.SIMPLE=1]="SIMPLE",t[t.DOT_DENSITY=2]="DOT_DENSITY",t[t.OUTLINE_FILL=3]="OUTLINE_FILL",t[t.OUTLINE_FILL_SIMPLE=4]="OUTLINE_FILL_SIMPLE",t[t.HEATMAP=5]="HEATMAP",t[t.PIE_CHART=6]="PIE_CHART"}(zC||(zC={})),function(t){t[t.All=0]="All",t[t.Highlight=1]="Highlight",t[t.InsideEffect=2]="InsideEffect",t[t.OutsideEffect=3]="OutsideEffect"}(vw||(vw={})),function(t){t[t.BATCHING=0]="BATCHING",t[t.STRICT_ORDER=1]="STRICT_ORDER",t[t.STRICT_MARKERS_AND_TEXT=2]="STRICT_MARKERS_AND_TEXT"}(FC||(FC={})),function(t){t[t.FILL=0]="FILL",t[t.LINE=1]="LINE",t[t.MARKER=2]="MARKER",t[t.TEXT=3]="TEXT"}(jC||(jC={}));const MG={color:{write:[!0,!0,!0,!0],blendMode:"composite"},depth:!1,stencil:{write:!1,test:{ref:t=>t.stencilRef,compare:t6.EQUAL,mask:255,op:{fail:Yg.KEEP,zFail:Yg.KEEP,zPass:Yg.REPLACE}}}},Bfe={color:{write:[!0,!0,!0,!0],blendMode:"additive"},depth:!1,stencil:!1},Hfe={...MG,color:{write:[!0,!0,!0,!0],blendMode:"delete"}};function Vfe({pixelRatio:t,state:e,displayLevel:i,requiredLevel:n},s){const h=1/2**(i-s.key.level),f=1/2**(n-s.key.level);return{displayMat3:e.displayMat3,displayViewMat3:e.displayViewMat3,displayViewScreenMat3:s.transforms.displayViewScreenMat3,viewMat3:e.viewMat3,tileMat3:s.transforms.tileMat3,displayZoomFactor:h,requiredZoomFactor:f,tileOffset:[s.x,s.y],currentScale:e.scale,currentZoom:i,metersPerSRUnit:kr(e.spatialReference),rotation:e.rotation,pixelRatio:t}}function $G(t){var e;return((e=t.passOptions)==null?void 0:e.type)==="highlight"}function kG(t){var e;return((e=t.passOptions)==null?void 0:e.type)==="hittest"}function qfe(t){if(!kG(t))return null;const{position:e,distance:i,smallSymbolDistance:n,smallSymbolSizeThreshold:s}=t.passOptions;return{position:e,distance:i,smallSymbolDistance:n,smallSymbolSizeThreshold:s}}function Wfe(t){if(!$G(t))return null;const{activeReasons:e,highlightAll:i}=t.passOptions;return{activeReasons:e,highlightAll:i?1:0}}function uIe(t,e,i){const n={};for(const s in i)i[s]instanceof Function?n[s]=i[s](t,e):n[s]=i[s];return n}function dIe(t,e){const{attributeView:i,context:n}=t;return{storage:i.getUniforms(n),view:Vfe(t,e),hittestRequest:qfe(t),highlight:Wfe(t)}}function pIe(t){return{inside:t.selection===vw.InsideEffect,outside:t.selection===vw.OutsideEffect}}function Kfe(t){return kG(t)?Bfe:$G(t)&&t.passOptions.stepType==="clear"?Hfe:MG}function fIe(t){const{row:e,col:i}=t.key,n=i*hC,s=e*hC;return{tileOffsetFromLocalOrigin:[n%Tv,s%Tv],maxIntsToLocalOrigin:[Math.floor(n/Tv),Math.floor(s/Tv)]}}const Zfe=new xn({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});function gIe(t){return Zfe.toJSON(t)}function mIe(t){const{bandCount:e,attributeTable:i,colormap:n,pixelType:s}=t.raster.rasterInfo;return e===1&&(i!=null||n!=null||s==="u8"||s==="s8")}function Jfe(t,e){return e==null?(t==null||t.destroy(),null):((t==null?void 0:t.type)==="single"&&Array.isArray(e)&&(t.destroy(),t=null),(t==null?void 0:t.type)!=="multi"||Array.isArray(e)||(t.destroy(),t=null),t||(t=Array.isArray(e)?new Ufe:new EG),Array.isArray(e)?t.type==="multi"&&t.setHighlightOptions(e):t.type==="single"&&t.setHighlightOptions(e),t)}function yIe(t,e,i,n){const{painter:s,highlightGradient:h}=t,{highlight:f}=s.effects;if(!h)return;const m=t.passOptions,y=h.getReasonsWithGradients();for(let x=0;x<y.length;x++){const E={...t,passOptions:{type:"highlight",activeGradient:n!=null?y[n].activeGradient:y[x].activeGradient,activeReasons:y[x].activeReasons,stepType:"burn",highlightAll:e}};if(f.bind(E),i(E),x<y.length-1){let I=0;for(let P=x+1;P<y.length;P++)I|=y[P].activeReasons;i({...t,passOptions:{type:"highlight",activeGradient:n!=null?y[n].activeGradient:y[x].activeGradient,activeReasons:I,stepType:"clear",highlightAll:e}})}const k={...t,passOptions:{type:"highlight",activeGradient:n!=null?y[n].activeGradient:y[x].activeGradient,activeReasons:y[x].activeReasons,stepType:"draw",highlightAll:e}};s.setPipelineState(Kfe(t)),s.updatePipelineState(t.context),f.draw(k),f.unbind()}t.passOptions=m}const Mv=t=>parseFloat(t)/100;function Yfe(t,e,i){const n=typeof t.left=="string"?Mv(t.left)*e:t.left,s=typeof t.right=="string"?Mv(t.right)*e:t.right,h=typeof t.top=="string"?Mv(t.top)*i:t.top,f=typeof t.bottom=="string"?Mv(t.bottom)*i:t.bottom,m=h;return{xmin:n,xmax:Math.max(e-s,n),ymin:m,ymax:Math.max(i-f,h)}}function CG(t,e,i,n){switch(e.type){case"rect":{const{width:s,height:h}=t,{xmin:f,xmax:m,ymin:y,ymax:x}=Yfe(e,s,h),{x:E,y:k}=i;return E>f&&E<m&&k>y&&k<x}case"path":return e.path.length===0||!Array.isArray(e.path[0][0])||BT(e.path,[i.x,i.y]);case"geometry":return e.geometry==null||(e.geometry.type==="polygon"?UT(e.geometry,n):ny(e.geometry,n))}}var n6;let Mf=n6=class extends Oe{constructor(...t){super(...t),this.name="default",this.options=new Xd}clone(){return new n6({name:this.name,options:this.options.clone()})}};_([S({type:String})],Mf.prototype,"name",void 0),_([S({type:Xd})],Mf.prototype,"options",void 0),Mf=n6=_([J("esri.views.2d.support.HighlightGroup")],Mf);const IG=Pe.ofType(Mf);function AG(){return new IG([{name:Efe,options:new Xd},{name:Mfe,options:new Xd({color:$fe})}])}AG().items.map(t=>t.name);function Xfe(t){if(!t.highlights)return null;const e=t.highlights.findIndex(i=>i.name==="default");return e===-1?null:t.highlights.items[e].options}function Qfe(t,e){if(!t.highlights){if(!e)return;t.highlights=new IG([{name:"default",options:new Xd}])}const i=t.highlights.findIndex(n=>n.name==="default");e?t.highlights.items[i].options=e:t.highlights.removeAt(i)}async function e0e(t,e,i){const n=ZF(e)?KF(t,e):e;if(!t.ready||isNaN(n.x)||isNaN(n.y))return{screenPoint:n,results:[]};let s=new Set;const h=new Set;let f=!1,m=null,y=null;i!=null&&i.include?UC(i.include,GC(t,I=>{s.add(I),X5(I,P=>h.add(P))},(I,P)=>{h.add(I),s.add(P)},I=>{m||(m=new Set),m.add(I)},I=>s.add(I),()=>f=!0)):(f=!0,s=new Set(t.allLayerViews),s.forEach(I=>{X5(I,P=>h.add(P))})),i!=null&&i.exclude&&UC(i.exclude,GC(t,I=>{s.delete(I),X5(I,P=>h.delete(P))},I=>h.delete(I),I=>{y||(y=new Set),y.add(I)}));const x=t.toMap(n),E=t.allLayerViews.filter(I=>!I.suspended&&s.has(I)&&I.clips.every(P=>CG(t,P,n,x))).reverse();let k=[...f?t.graphicsView.hitTest(x).map(I=>({type:"graphic",graphic:I,layer:null,mapPoint:x})):[],...await Promise.all(E.map(I=>I.hitTest(x,n)).toArray())].filter(Yi).flat().filter(Yi);return k=k.filter(I=>{var P;return I.type!=="graphic"||((P=I.layer)==null?void 0:P.type)!=="subtype-group"||h.has(I.graphic.layer)}),m&&(k=k.filter(I=>!("graphic"in I)||!I.graphic||(m==null?void 0:m.has(r6(I.graphic))))),y&&(k=k.filter(I=>!("graphic"in I)||!I.graphic||!(y!=null&&y.has(r6(I.graphic))))),{screenPoint:n,results:k}}function GC(t,e,i,n,s,h){return f=>{if(f instanceof du){if(f.layer===t)h==null||h();else{const m=t.allLayerViews.find(y=>y.layer===f.layer);m&&(s==null||s(m))}n(r6(f))}else if(!("layer"in f&&"element"in f))if(f.type==="subtype-sublayer"){const m=t.allLayerViews.find(y=>y.layer===f.parent);m&&i(f,m)}else{const m=t.allLayerViews.find(y=>y.layer===f);m&&e(m)}}}function UC(t,e){if(t)if(x2(t))for(const i of t)if(x2(i))for(const n of i)e(n);else e(i);else e(t)}function r6(t){var i,n;const e=t.getObjectId();return e?`${((i=t.layer)==null?void 0:i.uid)??((n=t.sourceLayer)==null?void 0:n.uid)??"MapView"}/${e}`:`"MapView/${t.uid}`}function X5({layer:t},e){(t==null?void 0:t.type)==="subtype-group"&&t.sublayers.forEach(i=>{e(i)})}let v1=null,bw=!0;function t0e(t,e,i){if(!t||!e)throw new Error("Cannot construct image data without dimensions");if(bw)try{return new ImageData(t,e)}catch{bw=!1}return OG(t,e,i)}function vIe(t,e,i,n){if(!e||!i)throw new Error("Cannot construct image data without dimensions");if(bw)try{return new ImageData(t,e,i)}catch{bw=!1}const s=OG(e,i,n);return s.data.set(t,0),s}function i0e(){return v1||(v1=document.createElement("canvas"),v1.width=1,v1.height=1),v1}function OG(t,e,i){return i||(i=i0e()),i.getContext("2d").createImageData(t,e)}async function n0e(t,e){const i=window.URL.createObjectURL(t);try{const{data:n}=await ki(i,{...e,responseType:"image"});return n}catch(n){throw Ir(n)?n:new ce("invalid-image",`Could not fetch requested image at ${i}`)}finally{window.URL.revokeObjectURL(i)}}async function bIe(t,e){const{arrayBuffer:i,mediaType:n}=await r0e(t,e),s=n==="image/png";if(n==="image/gif"){const{isAnimatedGIF:h,parseGif:f}=await ge(()=>import("./gif-B-ikFigN.js"),[],import.meta.url);if(h(i))return f(i,e)}if(s){const{isAnimatedPNG:h,parseApng:f}=await ge(()=>import("./apng-CeVMyrir.js"),[],import.meta.url);if(h(i))return f(i,e)}return n0e(new Blob([i],{type:n}),e)}async function r0e(t,e){var s;const i=e0(t);if(i!=null&&i.isBase64)return{arrayBuffer:ER(i.data),mediaType:i.mediaType};const n=await ki(t,{responseType:"array-buffer",...e});return{arrayBuffer:n.data,mediaType:((s=n.getHeader)==null?void 0:s.call(n,"Content-Type"))??""}}function PG(t,e,i){const{ctx:n,canvas:s}=NG(t,i),h=n.getImageData(0,0,t.width,t.height),f=DG(s,e);return LG(s),{dataUrl:f,data:h}}function RG(t,e){const{ctx:i,canvas:n}=NG(t,e),s=i.getImageData(0,0,t.width,t.height);return LG(n),s}function NG(t,e){const i=s0e();e.premultipliedAlpha&&c0e(t),i.width=t.width,i.height=t.height;const n=i.getContext("2d",{willReadFrequently:!0});return n.putImageData(t,0,0),e.flipY&&l0e(n),{ctx:n,canvas:i}}function LG(t){t.width=0,t.height=0}function s0e(){return Q5==null&&(Q5=document.createElement("canvas")),Q5}let Q5=null;function DG(t,e){const i=h0e[e.format],n=e.quality/100;return t.toDataURL(i,n)}function zG(t,e){const i=a0e(t),n=d0e[i];return{format:i,quality:hr(e??n,0,100)}}function FG(t,e){return e/Math.max(t[0],t[1])}function o0e(t,e,i,n=0,s=0,h=t.width-n,f=t.height-s,m=!1){const{data:y}=t,{width:x,height:E,data:k}=e,I=h/x,P=f/E,L=Math.ceil(I/2),D=Math.ceil(P/2),j=t.width;for(let H=0;H<E;H++)for(let W=0;W<x;W++){const Z=4*(W+(m?E-H-1:H)*x);let Y=0,te=0,ie=0,le=0,pe=0,ve=0;const be=(H+.5)*P;for(let Se=Math.floor(H*P);Se<(H+1)*P;Se++){const Me=Math.abs(be-(Se+.5))/D,he=(W+.5)*I,se=Me*Me;for(let xe=Math.floor(W*I);xe<(W+1)*I;xe++){const Be=Math.abs(he-(xe+.5))/L,Fe=Math.sqrt(se+Be*Be);if(Fe>=1)continue;let ze=2*Fe*Fe*Fe-3*Fe*Fe+1;const it=4*(n+xe+(s+Se)*j);ve+=ze*y[it+3],te+=ze,!i&&y[it+3]<255&&(ze=ze*y[it+3]/255),ie+=ze*y[it],le+=ze*y[it+1],pe+=ze*y[it+2],Y+=ze}}k[Z]=ie/Y,k[Z+1]=le/Y,k[Z+2]=pe/Y,k[Z+3]=ve/te}return e}function a0e(t){switch(t){case"png":case"jpg":case"jpeg":return t;default:return u0e}}function l0e(t){t.save(),t.globalCompositeOperation="copy",t.scale(1,-1),t.translate(0,-t.canvas.height),t.drawImage(t.canvas,0,0),t.restore()}function c0e(t){const e=t.data,i=e.length;for(let n=0;n<i;n+=4){const s=e[n+3];if(s!==255&&s>0){const h=255/s;e[n]=e[n]*h,e[n+1]=e[n+1]*h,e[n+2]=e[n+2]*h}}}const h0e={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},BC=98,u0e="png",d0e={png:100,jpg:BC,jpeg:BC},wIe=Object.freeze(Object.defineProperty({__proto__:null,createEmptyImageData:t0e,encode:PG,encodeData:RG,getFormatAndQuality:zG,getMaximumResolutionScale:FG,resampleHermite:o0e,toDataUrl:DG},Symbol.toStringTag,{value:"Module"})),jG={flipY:!0,premultipliedAlpha:!0};async function p0e(t,e){const i=await GG(t,e),{format:n,quality:s}=zG(e==null?void 0:e.format,e==null?void 0:e.quality);return PG(i,{format:n,quality:s},jG)}async function f0e(t,e){const i=await GG(t,e);return RG(i,jG)}function GG(t,e){const i=y0e(e||{},m0e(t.stage,t.size),t.size,t.padding),n=g0e(e,t.allLayerViews);return t.stage.takeScreenshot(i,n,t.backgroundColor,e==null?void 0:e.rotation)}function g0e(t={},e){if(!t.layers)return;const i=[];return t.layers.forEach(n=>{const s=e.find(h=>h.layer.id===n.id);s!=null&&s.container&&i.push(s.container)}),i}function m0e(t,e){return Math.min(4,FG(e,Math.min(4096,t.context.parameters.maxTextureSize)))}function y0e(t,e,i,n){t.ignorePadding&&(n={left:0,right:0,top:0,bottom:0});let s=null;t.width!=null&&t.height!=null?s=[t.width,t.height]:t.width==null&&t.height!=null?s=[t.height,t.height]:t.width!=null&&t.height==null?s=[t.width,t.width]:t.width==null&&t.height==null&&(s=null);const h=i[0]-(n.left+n.right),f=i[1]-(n.top+n.bottom);let m,y,x=t.area||{x:0,y:0,width:h,height:f};if(s){const E=h/f,k=s[0]/s[1];if(k>E){const I=x.width/k;x={x:x.x,y:Math.round(x.y+(x.height-I)/2),width:x.width,height:Math.round(I)}}else{const I=x.height*k;x={x:Math.round(x.x+(x.width-I)/2),y:x.y,width:Math.round(I),height:x.height}}}else s=[x.width,x.height];return s[0]>x.width?(m=Math.min(s[0]/x.width,e),y=s[0]/x.width/m):(m=1,y=s[0]/x.width),{cropArea:{x:Math.round((x.x+n.left)*m),y:Math.round((x.y+n.top)*m),width:Math.round(x.width*m),height:Math.round(x.height*m)},outputScale:y,resolutionScale:m}}const HC=160;let wg=class extends Oe{constructor(){super(...arguments),this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now(),this._timer==null&&(this._timer=setInterval(()=>{performance.now()-this._timestamp>=HC&&this.clear()},HC))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};_([S()],wg.prototype,"_timer",void 0),_([S()],wg.prototype,"stationary",null),wg=_([J("esri.views.2d.support.StationaryManager")],wg);const v0e=t=>t.includes("Brush");let UG=class{constructor(){this._names=new Map}begin(e){this._names.has(e)||(this._names.set(e,!1),v0e(e)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${e}.Start`))}end(e){this._names.has(e)&&!this._names.get(e)&&(this._names.set(e,!0),performance.mark(`Esri.${e}.End`))}record(e){this._names.has(e)||(this._names.set(e,!0),performance.mark(`Esri.${e}`))}},ex;function b0e(){return ex||(ex=x0e()),ex}let w0e=class{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1}};function _0e(t){if(typeof WebGL2RenderingContext>"u")return null;const e=document.createElement("canvas");if(!e)return null;let i=e.getContext("webgl2",{failIfMajorPerformanceCaveat:!0});if(i==null&&(i=e.getContext("webgl2"),i!=null&&(t.majorPerformanceCaveat=!0)),i==null)return i;t.available=!0,t.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),t.supportsVertexShaderSamplers=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const n=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT);return n&&(t.supportsHighPrecisionFragment=n.precision>0),i}function x0e(){const t=new w0e,e=_0e(t);return e==null||(t.supportsColorBufferFloat=e.getExtension("EXT_color_buffer_float")!==null,t.supportsColorBufferFloatBlend=e.getExtension("EXT_float_blend")!==null,t.supportsColorBufferHalfFloat=t.supportsColorBufferFloat||e.getExtension("EXT_color_buffer_half_float")!==null),t}function S0e(t){const e=b0e();return e.available?t==="3d"&&e.majorPerformanceCaveat?new ce("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist."):e.supportsHighPrecisionFragment?e.supportsVertexShaderSamplers?null:new ce("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new ce("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new ce("webgl:required","WebGL2 is required but not supported.",new Error().stack)}function T0e(t){return t&&"nodeType"in t}function E0e(t){return t&&typeof t.render=="function"}const VC={component:"esri-component"};let cd=class extends Oe{constructor(){super(...arguments),this.widget=null}destroy(){var e;this.node=null,(e=this.widget)==null||e.destroy()}get id(){var e,i;return this._get("id")??((e=this.widget)==null?void 0:e.id)??((i=this.node)==null?void 0:i.id)}set id(e){this._set("id",e)}set node(e){const i=this._get("node");e!==i&&(e&&e.classList.add(VC.component),i&&i.classList.remove(VC.component),this._set("node",e))}castNode(e){var i;return(i=this.widget)==null||i.destroy(),e?typeof e=="string"||T0e(e)?(this._set("widget",null),wE(e)):(E0e(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};_([S()],cd.prototype,"id",null),_([S()],cd.prototype,"node",null),_([Hi("node")],cd.prototype,"castNode",null),_([S({readOnly:!0})],cd.prototype,"widget",void 0),cd=_([J("esri.views.ui.Component")],cd);const Xb=cd,BG="calcite-mode-";function M0e(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-mode-name").replaceAll(/\s|'|"/g,"")}function $0e(){return M0e().startsWith("dark")}function k0e(){return`${BG}${$0e()?"dark":"light"}`}function C0e(t){I0e(t),t.classList.add(k0e())}function I0e(t){Array.from(t.classList).forEach(e=>{e.startsWith(BG)&&t.classList.remove(e)})}const A0e={left:0,top:0,bottom:0,right:0},HG={bottom:30,top:15,right:15,left:15},zl="esri-ui",Nr={ui:zl,corner:`${zl}-corner`,innerContainer:`${zl}-inner-container`,manualContainer:`${zl}-manual-container`,cornerContainer:`${zl}-corner-container`,topLeft:`${zl}-top-left`,topRight:`${zl}-top-right`,bottomLeft:`${zl}-bottom-left`,bottomRight:`${zl}-bottom-right`};function O0e(t){return t&&!t._started&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}function $v(t){return t===0?"0":`${t}px`}function tx(t){const e=typeof t=="object"&&t!==null&&Object.getPrototypeOf(t);return(e===null||e===Object.prototype)&&("component"in t||"index"in t||"position"in t)?t:null}function ix(t,{top:e,bottom:i,left:n,right:s}){t.style.top=e,t.style.bottom=i,t.style.left=n,t.style.right=s}let ja=class extends un.EventedAccessor{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._removeWidgetHandleKey=Symbol("componentOnRemoveSymbol"),this._locale=Zr(),this.view=null,this._applyViewPadding=()=>{const i=this.container;i&&ix(i,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const i=this._innerContainer;i&&ix(i,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([Ee(()=>{var e;return[(e=this.view)==null?void 0:e.padding,this.container]},this._applyViewPadding,Ct),Ee(()=>this.padding,this._applyUIPadding,Ct),Ee(()=>[this.container,this._locale],([e,i])=>{e&&e.setAttribute("lang",i)},Ct),iE(e=>{this._locale=e})])}destroy(){this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._componentMap.clear()}set container(e){const i=this._get("container");e!==i&&(e&&(e.classList.add(Nr.ui),C0e(e),this._attachContainers(e)),i&&(i.classList.remove(Nr.ui),ix(i,{top:"",bottom:"",left:"",right:""}),i.textContent=""),this._set("container",e))}get height(){var h;const e=((h=this.view)==null?void 0:h.height)??0;if(e===0)return e;const i=this._getViewPadding(),{top:n,bottom:s}=i;return Math.max(e-n-s,0)}get padding(){return this._get("padding")}set padding(e){this._overrideIfSome("padding",e)}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:{...HG,...e}}get width(){var h;const e=((h=this.view)==null?void 0:h.width)??0;if(e===0)return e;const i=this._getViewPadding(),{left:n,right:s}=i;return Math.max(e-n-s,0)}add(e,i){let n,s,h;if(Array.isArray(e))return void e.forEach(m=>this.add(m,i));const f=tx(e);f&&({index:n,position:i,component:e,key:s}=f),i&&typeof i=="object"&&({index:n,key:s,position:i,internal:h}=i),!e||i&&!this._isValidPosition(i)||this._add(e,i,n,s,h)}remove(e,i){var s,h;if(!e)return;if(Array.isArray(e))return e.map(f=>this.remove(f,i));const n=this._find(e);if(n){if(this._componentMap.has(n)&&((s=this._componentMap.get(n))==null?void 0:s.key)!==i)return;const f=this._components.indexOf(n),m=n.node.parentNode;return m==null||m.removeChild(n.node),this._componentMap.delete(n),(h=n.widget)==null||h.removeHandlesReference(this._removeWidgetHandleKey),this._components.splice(f,1)[0]}}empty(e,i={removeInternal:!1}){if(Array.isArray(e)){for(const h of e)this.empty(h,i);return}const n=this._positionNameToContainerLookup[e??"manual"],s=Array.prototype.slice.call(n.children).map(h=>this._findByNode(h)).filter(h=>{var f;return h==null?!1:!(((f=this._componentMap.get(h))==null?void 0:f.internal)??!1)||i.removeInternal});for(const h of s)this.remove(h)}move(e,i){if(Array.isArray(e)&&e.forEach(f=>this.move(f,i)),!e)return;let n;const s=tx(e)||tx(i);if(s&&(n=s.index,i=s.position,e=s.component||e),i&&!this._isValidPosition(i))return;const h=this.remove(e);h&&this.add(h,{position:i,index:n})}find(e){if(!e)return null;const i=this._findById(e);return i&&(i.widget||i.node)}getComponents(e,i={includeInternal:!1}){return e?Array.isArray(e)?e.flatMap(n=>this._getComponentsAtPosition(n,i)):this._getComponentsAtPosition(e,i):this._components.filter(n=>{var s;return i.includeInternal||!((s=this._componentMap.get(n))!=null&&s.internal)}).map(({widget:n,node:s})=>n??s)}getPosition(e){for(const i in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[i].contains(e))return i;return null}_add(e,i,n,s,h){e instanceof Xb||(e=new Xb({node:e}));const{widget:f}=e;f!=null&&f instanceof Oe&&f.addHandles(ct(()=>{queueMicrotask(()=>this.remove(e))}),this._removeWidgetHandleKey),this._place({component:e,position:i,index:n}),this._components.push(e),this._componentMap.set(e,{key:s,internal:h})}_find(e){return e?e instanceof Xb?this._findByComponent(e):typeof e=="string"?this._findById(e):this._findByNode(e.domNode||e):null}_getViewPadding(){var e;return((e=this.view)==null?void 0:e.padding)??A0e}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(Nr.innerContainer,Nr.cornerContainer);const i=document.createElement("div");i.classList.add(Nr.innerContainer,Nr.manualContainer);const n=document.createElement("div");n.classList.add(Nr.topLeft,Nr.corner),e.appendChild(n);const s=document.createElement("div");s.classList.add(Nr.topRight,Nr.corner),e.appendChild(s);const h=document.createElement("div");h.classList.add(Nr.bottomLeft,Nr.corner),e.appendChild(h);const f=document.createElement("div");f.classList.add(Nr.bottomRight,Nr.corner),e.appendChild(f),this._innerContainer=e,this._manualContainer=i;const m=J9();this._cornerNameToContainerLookup={"top-left":n,"top-right":s,"bottom-left":h,"bottom-right":f,"top-leading":m?s:n,"top-trailing":m?n:s,"bottom-leading":m?f:h,"bottom-trailing":m?h:f},this._positionNameToContainerLookup={manual:i,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){var x,E;const i=e.position??"manual",{component:n,index:s}=e,h=this._positionNameToContainerLookup[i],f=s!=null&&s>-1;if(O0e(n.widget)&&n.widget.startup(),!f)return void h.appendChild(n.node);const m=Array.from(h.children);if(s===0){const{firstChild:k}=h;return void(k?(x=k.parentNode)==null?void 0:x.insertBefore(n.node,k):h.appendChild(n.node))}if(s>=m.length)return void h.appendChild(n.node);const y=m[s];(E=y.parentNode)==null||E.insertBefore(n.node,y)}_toPixelPosition(e){return{top:$v(e.top),left:$v(e.left),right:$v(e.right),bottom:$v(e.bottom)}}_findByComponent(e){return this._components.find(i=>i===e)??null}_findById(e){return this._components.find(({id:i})=>i===e)??null}_findByNode(e){return this._components.find(({node:i})=>i===e)??null}_getComponentsAtPosition(e,i){const n=this._positionNameToContainerLookup[e];return Array.prototype.slice.call(n.children).map(s=>this._findByNode(s)).filter(Yi).filter(s=>{var h;return i.includeInternal||!((h=this._componentMap.get(s))!=null&&h.internal)}).map(({widget:s,node:h})=>s??h)}};_([S()],ja.prototype,"_locale",void 0),_([S()],ja.prototype,"container",null),_([S()],ja.prototype,"height",null),_([S({value:HG})],ja.prototype,"padding",null),_([Hi("padding")],ja.prototype,"castPadding",null),_([S()],ja.prototype,"view",void 0),_([S()],ja.prototype,"width",null),ja=_([J("esri.views.ui.UI")],ja);const P0e=ja,R0e="randomUUID"in crypto;function lM(){if(R0e)return crypto.randomUUID();const t=crypto.getRandomValues(new Uint16Array(8));t[3]=4095&t[3]|16384,t[4]=16383&t[4]|32768;const e=i=>t[i].toString(16).padStart(4,"0");return e(0)+e(1)+"-"+e(2)+"-"+e(3)+"-"+e(4)+"-"+e(5)+e(6)+e(7)}function MIe(){return`{${lM().toUpperCase()}}`}function $Ie(){return`{${lM()}}`}function kIe(t){const e=t.toUpperCase();return t[0]!=="{"?`{${e}}`:e}const N0e={handleInterceptedEvent:(t,e,i,n)=>(t.scheduleRender(),e.properties[`on${n.type}`].apply(e.properties.bind||i,[n]))},L0e={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,i)=>{e.charAt(0)==="-"?t.style.setProperty(e,i):t.style[e]=i}},D0e=t=>({...L0e,...t}),z0e=(t,e)=>{const i=[];for(;t&&t!==e;)i.push(t),t=t.parentNode;return i},F0e=(t,e)=>t.find(e),qC=(t,e,i=!1)=>{let n=t;return e.forEach((s,h)=>{const f=n!=null&&n.children?F0e(n.children,m=>m.domNode===s):void 0;i&&!f&&h!==e.length-1||(n=f)}),n},j0e=t=>{let e;const i={...N0e,...t},n=D0e(i),s=n.performanceLogger;let h,f=!0,m=!1;const y=[],x=[],E=(I,P,L)=>{var H;let D;n.eventHandlerInterceptor=(W,Z,Y,te)=>function(ie){let le;s("domEvent",ie);const pe=z0e(ie.currentTarget,D.domNode),ve=pe.some(Se=>{var Me;return customElements.get((Me=Se==null?void 0:Se.tagName)==null?void 0:Me.toLowerCase())});if(ie.eventPhase===Event.CAPTURING_PHASE||!ve)pe.reverse(),le=qC(D.getLastRender(),pe);else{const Se=ie.composedPath(),Me=Se.slice(Se.indexOf(ie.currentTarget),Se.indexOf(D.domNode)).reverse();le=qC(D.getLastRender(),Me,!0)}let be;return le&&(be=i.handleInterceptedEvent(e,le,this,ie)),s("domEventProcessed",ie),be},(H=i.postProcessProjectionOptions)==null||H.call(i,n);const j=L();D=I(P,j,n),n.eventHandlerInterceptor=void 0,y.push(D),x.push(L),i.afterFirstVNodeRendered&&i.afterFirstVNodeRendered(D,j)};let k=()=>{if(h=void 0,f){f=!1,s("renderStart",void 0);for(let I=0;I<y.length;I++){const P=x[I]();s("rendered",void 0);try{y[I].update(P)}catch(L){console.error(L)}s("patched",void 0)}s("renderDone",void 0),f=!0}};return i.modifyDoRenderImplementation&&(k=i.modifyDoRenderImplementation(k,y,x)),e={renderNow:k,scheduleRender:()=>{h||m||(h=requestAnimationFrame(k))},stop:()=>{h&&(cancelAnimationFrame(h),h=void 0),m=!0},resume:()=>{m=!1,f=!0,e.scheduleRender()},append:(I,P)=>{E(Hh.append,I,P)},insertBefore:(I,P)=>{E(Hh.insertBefore,I,P)},merge:(I,P)=>{E(Hh.merge,I,P)},replace:(I,P)=>{E(Hh.replace,I,P)},detach:I=>{for(let P=0;P<x.length;P++)if(x[P]===I)return x.splice(P,1),y.splice(P,1)[0];throw new Error("renderFunction was not found")}},e};/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const VG="calcite-mode-auto",qG="calcite-mode-dark",G0e="calcite-mode-light",Xo={autoMode:VG,darkMode:qG,lightMode:G0e,rtl:"calcite--rtl",calciteAnimate:"calcite-animate",calciteAnimateIn:"calcite-animate__in",calciteAnimateInUp:"calcite-animate__in-up",calciteAnimateInDown:"calcite-animate__in-down",calciteAnimateInRight:"calcite-animate__in-right",calciteAnimateInLeft:"calcite-animate__in-left",calciteAnimateInScale:"calcite-animate__in-scale"},WC={filter:250,nextTick:0,resize:150,reposition:100};var uo={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,formAssociated:!1,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0,experimentalSlotFixes:!1},U0e=Object.defineProperty,B0e=(t,e)=>{for(var i in e)U0e(t,i,{get:e[i],enumerable:!0})},WG=new WeakMap,yp=t=>WG.get(t),H0e=(t,e)=>{const i={$flags$:0,$hostElement$:t,$cmpMeta$:e,$instanceValues$:new Map};return WG.set(t,i)},KC=(t,e)=>e in t,Sy=(t,e)=>(0,console.error)(t,e),ww=new Map,V0e=[],q0e="slot-fb{display:contents}slot-fb[hidden]{display:none}",ZC="http://www.w3.org/1999/xlink",Ty=typeof window<"u"?window:{},aa=Ty.document||{head:{}},li=Ty.HTMLElement||class{},In={$flags$:0,$resourcesUrl$:"",jmp:t=>t(),raf:t=>requestAnimationFrame(t),ael:(t,e,i,n)=>t.addEventListener(e,i,n),rel:(t,e,i,n)=>t.removeEventListener(e,i,n),ce:(t,e)=>new CustomEvent(t,e)},W0e=(()=>{let t=!1;try{aa.addEventListener("e",null,Object.defineProperty({},"passive",{get(){t=!0}}))}catch{}return t})(),K0e=t=>Promise.resolve(t),Z0e=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),s6=!1,o6=[],KG=[],ZG=(t,e)=>i=>{t.push(i),s6||(s6=!0,e&&In.$flags$&4?J0e(a6):In.raf(a6))},JC=t=>{for(let e=0;e<t.length;e++)try{t[e](performance.now())}catch(i){Sy(i)}t.length=0},a6=()=>{JC(o6),JC(KG),(s6=o6.length>0)&&In.raf(a6)},J0e=t=>K0e().then(t),l6=ZG(o6,!1),Y0e=ZG(KG,!0),cM=t=>{const e=new URL(t,In.$resourcesUrl$);return e.origin!==Ty.location.origin?e.href:e.pathname},JG=t=>In.$resourcesUrl$=t,YC={},X0e="http://www.w3.org/2000/svg",Q0e="http://www.w3.org/1999/xhtml",e1e=t=>t!=null,hM=t=>(t=typeof t,t==="object"||t==="function");function t1e(t){var e,i,n;return(n=(i=(e=t.head)==null?void 0:e.querySelector('meta[name="csp-nonce"]'))==null?void 0:i.getAttribute("content"))!=null?n:void 0}var i1e={};B0e(i1e,{err:()=>YG,map:()=>n1e,ok:()=>c6,unwrap:()=>r1e,unwrapErr:()=>s1e});var c6=t=>({isOk:!0,isErr:!1,value:t}),YG=t=>({isOk:!1,isErr:!0,value:t});function n1e(t,e){if(t.isOk){const i=e(t.value);return i instanceof Promise?i.then(n=>c6(n)):c6(i)}if(t.isErr){const i=t.value;return YG(i)}throw"should never get here"}var r1e=t=>{if(t.isOk)return t.value;throw t.value},s1e=t=>{if(t.isErr)return t.value;throw t.value},Qd=(t,e="")=>()=>{},X=(t,e,...i)=>{let n=null,s=null,h=null,f=!1,m=!1;const y=[],x=k=>{for(let I=0;I<k.length;I++)n=k[I],Array.isArray(n)?x(n):n!=null&&typeof n!="boolean"&&((f=typeof t!="function"&&!hM(n))&&(n=String(n)),f&&m?y[y.length-1].$text$+=n:y.push(f?_w(null,n):n),m=f)};if(x(i),e){e.key&&(s=e.key),e.name&&(h=e.name);{const k=e.className||e.class;k&&(e.class=typeof k!="object"?k:Object.keys(k).filter(I=>k[I]).join(" "))}}if(typeof t=="function")return t(e===null?{}:e,y,a1e);const E=_w(t,null);return E.$attrs$=e,y.length>0&&(E.$children$=y),E.$key$=s,E.$name$=h,E},_w=(t,e)=>{const i={$flags$:0,$tag$:t,$text$:e,$elm$:null,$children$:null};return i.$attrs$=null,i.$key$=null,i.$name$=null,i},dn={},o1e=t=>t&&t.$tag$===dn,a1e={forEach:(t,e)=>t.map(XC).forEach(e),map:(t,e)=>t.map(XC).map(e).map(l1e)},XC=t=>({vattrs:t.$attrs$,vchildren:t.$children$,vkey:t.$key$,vname:t.$name$,vtag:t.$tag$,vtext:t.$text$}),l1e=t=>{if(typeof t.vtag=="function"){const i={...t.vattrs};return t.vkey&&(i.key=t.vkey),t.vname&&(i.name=t.vname),X(t.vtag,i,...t.vchildren||[])}const e=_w(t.vtag,t.vtext);return e.$attrs$=t.vattrs,e.$children$=t.vchildren,e.$key$=t.vkey,e.$name$=t.vname,e},c1e=t=>V0e.map(e=>e(t)).find(e=>!!e),h1e=(t,e)=>t!=null&&!hM(t)?e&4?t==="false"?!1:t===""||!!t:e&2?parseFloat(t):e&1?String(t):t:t,u1e=t=>t,qe=(t,e,i)=>{const n=u1e(t);return{emit:s=>d1e(n,e,{bubbles:!!(i&4),composed:!!(i&2),cancelable:!!(i&1),detail:s})}},d1e=(t,e,i)=>{const n=In.ce(e,i);return t.dispatchEvent(n),n},QC=new WeakMap,p1e=(t,e,i)=>{let n=ww.get(t);Z0e&&i?(n=n||new CSSStyleSheet,typeof n=="string"?n=e:n.replaceSync(e)):n=e,ww.set(t,n)},f1e=(t,e,i)=>{var n;const s=XG(e,i),h=ww.get(s);if(t=t.nodeType===11?t:aa,h)if(typeof h=="string"){t=t.head||t;let f=QC.get(t),m;if(f||QC.set(t,f=new Set),!f.has(s)){{m=aa.createElement("style"),m.innerHTML=h;const y=(n=In.$nonce$)!=null?n:t1e(aa);y!=null&&m.setAttribute("nonce",y),(!(e.$flags$&1)||e.$flags$&1&&t.nodeName!=="HEAD")&&t.insertBefore(m,t.querySelector("link"))}e.$flags$&4&&(m.innerHTML+=q0e),f&&f.add(s)}}else t.adoptedStyleSheets.includes(h)||(t.adoptedStyleSheets=[...t.adoptedStyleSheets,h]);return s},g1e=t=>{const e=t.$cmpMeta$,i=t.$hostElement$,n=e.$flags$,s=Qd("attachStyles",e.$tagName$),h=f1e(i.shadowRoot?i.shadowRoot:i.getRootNode(),e,t.$modeName$);n&10&&n&2&&(i["s-sc"]=h,i.classList.add(h+"-h"),n&2&&i.classList.add(h+"-s")),s()},XG=(t,e)=>"sc-"+(e&&t.$flags$&32?t.$tagName$+"-"+e:t.$tagName$),eI=(t,e,i,n,s,h)=>{if(i!==n){let f=KC(t,e),m=e.toLowerCase();if(e==="class"){const y=t.classList,x=tI(i),E=tI(n);y.remove(...x.filter(k=>k&&!E.includes(k))),y.add(...E.filter(k=>k&&!x.includes(k)))}else if(e==="style"){for(const y in i)(!n||n[y]==null)&&(y.includes("-")?t.style.removeProperty(y):t.style[y]="");for(const y in n)(!i||n[y]!==i[y])&&(y.includes("-")?t.style.setProperty(y,n[y]):t.style[y]=n[y])}else if(e!=="key")if(e==="ref")n&&n(t);else if(!t.__lookupSetter__(e)&&e[0]==="o"&&e[1]==="n"){if(e[2]==="-"?e=e.slice(3):KC(Ty,m)?e=m.slice(2):e=m[2]+e.slice(3),i||n){const y=e.endsWith(QG);e=e.replace(y1e,""),i&&In.rel(t,e,i,y),n&&In.ael(t,e,n,y)}}else{const y=hM(n);if((f||y&&n!==null)&&!s)try{if(t.tagName.includes("-"))t[e]=n;else{const E=n??"";e==="list"?f=!1:(i==null||t[e]!=E)&&(t[e]=E)}}catch{}let x=!1;m!==(m=m.replace(/^xlink\:?/,""))&&(e=m,x=!0),n==null||n===!1?(n!==!1||t.getAttribute(e)==="")&&(x?t.removeAttributeNS(ZC,e):t.removeAttribute(e)):(!f||h&4||s)&&!y&&(n=n===!0?"":n,x?t.setAttributeNS(ZC,e,n):t.setAttribute(e,n))}}},m1e=/\s/,tI=t=>t?t.split(m1e):[],QG="Capture",y1e=new RegExp(QG+"$"),eU=(t,e,i)=>{const n=e.$elm$.nodeType===11&&e.$elm$.host?e.$elm$.host:e.$elm$,s=t&&t.$attrs$||YC,h=e.$attrs$||YC;for(const f of iI(Object.keys(s)))f in h||eI(n,f,s[f],void 0,i,e.$flags$);for(const f of iI(Object.keys(h)))eI(n,f,s[f],h[f],i,e.$flags$)};function iI(t){return t.includes("ref")?[...t.filter(e=>e!=="ref"),"ref"]:t}var lf,h6,Am,xw=!1,Sw=!1,uM=!1,xs=!1,Tw=(t,e,i,n)=>{var s;const h=e.$children$[i];let f=0,m,y,x;if(xw||(uM=!0,h.$tag$==="slot"&&(lf&&n.classList.add(lf+"-s"),h.$flags$|=h.$children$?2:1)),h.$text$!==null)m=h.$elm$=aa.createTextNode(h.$text$);else if(h.$flags$&1)m=h.$elm$=aa.createTextNode("");else{if(xs||(xs=h.$tag$==="svg"),m=h.$elm$=aa.createElementNS(xs?X0e:Q0e,!xw&&uo.slotRelocation&&h.$flags$&2?"slot-fb":h.$tag$),xs&&h.$tag$==="foreignObject"&&(xs=!1),eU(null,h,xs),!!m.getRootNode().querySelector("body")&&uo.scoped&&e1e(lf)&&m["s-si"]!==lf&&m.classList.add(m["s-si"]=lf),pM(m,n),h.$children$)for(f=0;f<h.$children$.length;++f)y=Tw(t,h,f,m),y&&m.appendChild(y);h.$tag$==="svg"?xs=!1:m.tagName==="foreignObject"&&(xs=!0)}return m["s-hn"]=Am,h.$flags$&3&&(m["s-sr"]=!0,m["s-cr"]=h6,m["s-sn"]=h.$name$||"",m["s-rf"]=(s=h.$attrs$)==null?void 0:s.ref,x=t&&t.$children$&&t.$children$[i],x&&x.$tag$===h.$tag$&&t.$elm$&&Om(t.$elm$,!1)),m},Om=(t,e)=>{In.$flags$|=1;const i=Array.from(t.childNodes);t["s-sr"]&&uo.experimentalSlotFixes;for(let n=i.length-1;n>=0;n--){const s=i[n];s["s-hn"]!==Am&&s["s-ol"]&&(Xh(nU(s),s,dM(s)),s["s-ol"].remove(),s["s-ol"]=void 0,s["s-sh"]=void 0,uM=!0),e&&Om(s,e)}In.$flags$&=-2},tU=(t,e,i,n,s,h)=>{let f=t["s-cr"]&&t["s-cr"].parentNode||t,m;for(f.shadowRoot&&f.tagName===Am&&(f=f.shadowRoot);s<=h;++s)n[s]&&(m=Tw(null,i,s,t),m&&(n[s].$elm$=m,Xh(f,m,dM(e))))},iU=(t,e,i)=>{for(let n=e;n<=i;++n){const s=t[n];if(s){const h=s.$elm$;oU(s),h&&(Sw=!0,h["s-ol"]?h["s-ol"].remove():Om(h,!0),h.remove())}}},v1e=(t,e,i,n,s=!1)=>{let h=0,f=0,m=0,y=0,x=e.length-1,E=e[0],k=e[x],I=n.length-1,P=n[0],L=n[I],D,j;for(;h<=x&&f<=I;)if(E==null)E=e[++h];else if(k==null)k=e[--x];else if(P==null)P=n[++f];else if(L==null)L=n[--I];else if(kv(E,P,s))cf(E,P,s),E=e[++h],P=n[++f];else if(kv(k,L,s))cf(k,L,s),k=e[--x],L=n[--I];else if(kv(E,L,s))(E.$tag$==="slot"||L.$tag$==="slot")&&Om(E.$elm$.parentNode,!1),cf(E,L,s),Xh(t,E.$elm$,k.$elm$.nextSibling),E=e[++h],L=n[--I];else if(kv(k,P,s))(E.$tag$==="slot"||L.$tag$==="slot")&&Om(k.$elm$.parentNode,!1),cf(k,P,s),Xh(t,k.$elm$,E.$elm$),k=e[--x],P=n[++f];else{for(m=-1,y=h;y<=x;++y)if(e[y]&&e[y].$key$!==null&&e[y].$key$===P.$key$){m=y;break}m>=0?(j=e[m],j.$tag$!==P.$tag$?D=Tw(e&&e[f],i,m,t):(cf(j,P,s),e[m]=void 0,D=j.$elm$),P=n[++f]):(D=Tw(e&&e[f],i,f,t),P=n[++f]),D&&Xh(nU(E.$elm$),D,dM(E.$elm$))}h>x?tU(t,n[I+1]==null?null:n[I+1].$elm$,i,n,f,I):f>I&&iU(e,h,x)},kv=(t,e,i=!1)=>t.$tag$===e.$tag$?t.$tag$==="slot"?"$nodeId$"in t&&i&&t.$elm$.nodeType!==8?!1:t.$name$===e.$name$:i?!0:t.$key$===e.$key$:!1,dM=t=>t&&t["s-ol"]||t,nU=t=>(t["s-ol"]?t["s-ol"]:t).parentNode,cf=(t,e,i=!1)=>{const n=e.$elm$=t.$elm$,s=t.$children$,h=e.$children$,f=e.$tag$,m=e.$text$;let y;m===null?(xs=f==="svg"?!0:f==="foreignObject"?!1:xs,f==="slot"&&!xw||eU(t,e,xs),s!==null&&h!==null?v1e(n,s,e,h,i):h!==null?(t.$text$!==null&&(n.textContent=""),tU(n,null,e,h,0,h.length-1)):!i&&uo.updatable&&s!==null&&iU(s,0,s.length-1),xs&&f==="svg"&&(xs=!1)):(y=n["s-cr"])?y.parentNode.textContent=m:t.$text$!==m&&(n.data=m)},rU=t=>{const e=t.childNodes;for(const i of e)if(i.nodeType===1){if(i["s-sr"]){const n=i["s-sn"];i.hidden=!1;for(const s of e)if(s!==i){if(s["s-hn"]!==i["s-hn"]||n!==""){if(s.nodeType===1&&(n===s.getAttribute("slot")||n===s["s-sn"])||s.nodeType===3&&n===s["s-sn"]){i.hidden=!0;break}}else if(s.nodeType===1||s.nodeType===3&&s.textContent.trim()!==""){i.hidden=!0;break}}}rU(i)}},bc=[],sU=t=>{let e,i,n;for(const s of t.childNodes){if(s["s-sr"]&&(e=s["s-cr"])&&e.parentNode){i=e.parentNode.childNodes;const h=s["s-sn"];for(n=i.length-1;n>=0;n--)if(e=i[n],!e["s-cn"]&&!e["s-nr"]&&e["s-hn"]!==s["s-hn"]&&!uo.experimentalSlotFixes)if(nI(e,h)){let f=bc.find(m=>m.$nodeToRelocate$===e);Sw=!0,e["s-sn"]=e["s-sn"]||h,f?(f.$nodeToRelocate$["s-sh"]=s["s-hn"],f.$slotRefNode$=s):(e["s-sh"]=s["s-hn"],bc.push({$slotRefNode$:s,$nodeToRelocate$:e})),e["s-sr"]&&bc.map(m=>{nI(m.$nodeToRelocate$,e["s-sn"])&&(f=bc.find(y=>y.$nodeToRelocate$===e),f&&!m.$slotRefNode$&&(m.$slotRefNode$=f.$slotRefNode$))})}else bc.some(f=>f.$nodeToRelocate$===e)||bc.push({$nodeToRelocate$:e})}s.nodeType===1&&sU(s)}},nI=(t,e)=>t.nodeType===1?t.getAttribute("slot")===null&&e===""||t.getAttribute("slot")===e:t["s-sn"]===e?!0:e==="",oU=t=>{t.$attrs$&&t.$attrs$.ref&&t.$attrs$.ref(null),t.$children$&&t.$children$.map(oU)},Xh=(t,e,i)=>{const n=t==null?void 0:t.insertBefore(e,i);return pM(e,t),n},aU=t=>{const e=[];return t&&e.push(...t["s-scs"]||[],t["s-si"],t["s-sc"],...aU(t.parentElement)),e},pM=(t,e,i=!1)=>{var n;if(t&&e&&t.nodeType===1){const s=new Set(aU(e).filter(Boolean));if(s.size&&((n=t.classList)==null||n.add(...t["s-scs"]=[...s]),t["s-ol"]||i))for(const h of Array.from(t.childNodes))pM(h,t,!0)}},b1e=(t,e,i=!1)=>{var n,s,h,f,m;const y=t.$hostElement$,x=t.$cmpMeta$,E=t.$vnode$||_w(null,null),k=o1e(e)?e:X(null,null,e);if(Am=y.tagName,x.$attrsToReflect$&&(k.$attrs$=k.$attrs$||{},x.$attrsToReflect$.map(([I,P])=>k.$attrs$[P]=y[I])),i&&k.$attrs$)for(const I of Object.keys(k.$attrs$))y.hasAttribute(I)&&!["key","ref","style","class"].includes(I)&&(k.$attrs$[I]=y[I]);k.$tag$=null,k.$flags$|=4,t.$vnode$=k,k.$elm$=E.$elm$=y.shadowRoot||y,lf=y["s-sc"],xw=(x.$flags$&1)!==0,h6=y["s-cr"],Sw=!1,cf(E,k,i);{if(In.$flags$|=1,uM){sU(k.$elm$);for(const I of bc){const P=I.$nodeToRelocate$;if(!P["s-ol"]){const L=aa.createTextNode("");L["s-nr"]=P,Xh(P.parentNode,P["s-ol"]=L,P)}}for(const I of bc){const P=I.$nodeToRelocate$,L=I.$slotRefNode$;if(L){const D=L.parentNode;let j=L.nextSibling;{let H=(n=P["s-ol"])==null?void 0:n.previousSibling;for(;H;){let W=(s=H["s-nr"])!=null?s:null;if(W&&W["s-sn"]===P["s-sn"]&&D===W.parentNode){for(W=W.nextSibling;W===P||W!=null&&W["s-sr"];)W=W==null?void 0:W.nextSibling;if(!W||!W["s-nr"]){j=W;break}}H=H.previousSibling}}(!j&&D!==P.parentNode||P.nextSibling!==j)&&P!==j&&(!P["s-hn"]&&P["s-ol"]&&(P["s-hn"]=P["s-ol"].parentNode.nodeName),Xh(D,P,j),P.nodeType===1&&(P.hidden=(h=P["s-ih"])!=null?h:!1)),P&&typeof L["s-rf"]=="function"&&L["s-rf"](P)}else P.nodeType===1&&(i&&(P["s-ih"]=(f=P.hidden)!=null?f:!1),P.hidden=!0)}}Sw&&rU(k.$elm$),In.$flags$&=-2,bc.length=0}if(uo.experimentalScopedSlotChanges&&x.$flags$&2)for(const I of k.$elm$.childNodes)I["s-hn"]!==Am&&!I["s-sh"]&&(i&&I["s-ih"]==null&&(I["s-ih"]=(m=I.hidden)!=null?m:!1),I.hidden=!0);h6=void 0},w1e=(t,e)=>{},fM=(t,e)=>(t.$flags$|=16,w1e(t,t.$ancestorComponent$),Y0e(()=>_1e(t,e))),_1e=(t,e)=>{const i=t.$hostElement$,n=Qd("scheduleUpdate",t.$cmpMeta$.$tagName$),s=i;if(!s)throw new Error(`Can't render component <${i.tagName.toLowerCase()} /> with invalid Stencil runtime! Make sure this imported component is compiled with a \`externalRuntime: true\` flag. For more information, please refer to https://stenciljs.com/docs/custom-elements#externalruntime`);let h;return e?h=Hf(s,"componentWillLoad"):h=Hf(s,"componentWillUpdate"),h=rI(h,()=>Hf(s,"componentWillRender")),n(),rI(h,()=>S1e(t,s,e))},rI=(t,e)=>x1e(t)?t.then(e).catch(i=>{console.error(i),e()}):e(),x1e=t=>t instanceof Promise||t&&t.then&&typeof t.then=="function",S1e=async(t,e,i)=>{const n=t.$hostElement$,s=Qd("update",t.$cmpMeta$.$tagName$);n["s-rc"],i&&g1e(t);const h=Qd("render",t.$cmpMeta$.$tagName$);T1e(t,e,n,i),h(),s(),E1e(t)},sI=null,T1e=(t,e,i,n)=>{try{sI=e,e=e.render&&e.render(),t.$flags$&=-17,t.$flags$|=2,(uo.hasRenderFn||uo.reflect)&&(uo.vdomRender||uo.reflect)&&(uo.hydrateServerSide||b1e(t,e,n))}catch(y){Sy(y,t.$hostElement$)}return sI=null,null},E1e=t=>{const e=t.$cmpMeta$.$tagName$,i=t.$hostElement$,n=Qd("postUpdate",e),s=i;t.$ancestorComponent$,Hf(s,"componentDidRender"),t.$flags$&64?(Hf(s,"componentDidUpdate"),n()):(t.$flags$|=64,Hf(s,"componentDidLoad"),n())},Tu=t=>{{const e=yp(t),i=e.$hostElement$.isConnected;return i&&(e.$flags$&18)===2&&fM(e,!1),i}},Hf=(t,e,i)=>{if(t&&t[e])try{return t[e](i)}catch(n){Sy(n)}},M1e=(t,e)=>yp(t).$instanceValues$.get(e),$1e=(t,e,i,n)=>{const s=yp(t),h=t,f=s.$instanceValues$.get(e),m=s.$flags$,y=h;i=h1e(i,n.$members$[e][0]);const x=Number.isNaN(f)&&Number.isNaN(i);if(i!==f&&!x){s.$instanceValues$.set(e,i);{if(n.$watchers$&&m&128){const k=n.$watchers$[e];k&&k.map(I=>{try{y[I](i,f,e)}catch(P){Sy(P,h)}})}if((m&18)===2){if(y.componentShouldUpdate&&y.componentShouldUpdate(i,f,e)===!1)return;fM(s,!1)}}}},k1e=(t,e,i)=>{var n,s;const h=t.prototype;if(e.$members$||e.$watchers$||t.watchers){t.watchers&&!e.$watchers$&&(e.$watchers$=t.watchers);const f=Object.entries((n=e.$members$)!=null?n:{});f.map(([m,[y]])=>{(y&31||y&32)&&Object.defineProperty(h,m,{get(){return M1e(this,m)},set(x){$1e(this,m,x,e)},configurable:!0,enumerable:!0})});{const m=new Map;h.attributeChangedCallback=function(y,x,E){In.jmp(()=>{var k;const I=m.get(y);if(this.hasOwnProperty(I))E=this[I],delete this[I];else{if(h.hasOwnProperty(I)&&typeof this[I]=="number"&&this[I]==E)return;if(I==null){const P=yp(this),L=P==null?void 0:P.$flags$;if(L&&!(L&8)&&L&128&&E!==x){const j=this,H=(k=e.$watchers$)==null?void 0:k[y];H==null||H.forEach(W=>{j[W]!=null&&j[W].call(j,E,x,y)})}return}}this[I]=E===null&&typeof this[I]=="boolean"?!1:E})},t.observedAttributes=Array.from(new Set([...Object.keys((s=e.$watchers$)!=null?s:{}),...f.filter(([y,x])=>x[0]&15).map(([y,x])=>{var E;const k=x[1]||y;return m.set(k,y),x[0]&512&&((E=e.$attrsToReflect$)==null||E.push([y,k])),k})]))}}return t},C1e=async(t,e,i,n)=>{let s;if(!(e.$flags$&32)){e.$flags$|=32,i.$lazyBundleId$;{s=t.constructor;const f=t.localName;customElements.whenDefined(f).then(()=>e.$flags$|=128)}if(s&&s.style){let f;typeof s.style=="string"?f=s.style:typeof s.style!="string"&&(e.$modeName$=c1e(t),e.$modeName$&&(f=s.style[e.$modeName$]));const m=XG(i,e.$modeName$);if(!ww.has(m)){const y=Qd("registerStyles",i.$tagName$);p1e(m,f,!!(i.$flags$&1)),y()}}}e.$ancestorComponent$,fM(e,!0)},oI=t=>{},I1e=t=>{if(!(In.$flags$&1)){const e=yp(t),i=e.$cmpMeta$,n=Qd("connectedCallback",i.$tagName$);e.$flags$&1?(lU(t,e,i.$listeners$),e!=null&&e.$lazyInstance$?oI(e.$lazyInstance$):e!=null&&e.$onReadyPromise$&&e.$onReadyPromise$.then(()=>oI(e.$lazyInstance$))):(e.$flags$|=1,i.$flags$&12&&A1e(t),i.$members$&&Object.entries(i.$members$).map(([s,[h]])=>{if(h&31&&t.hasOwnProperty(s)){const f=t[s];delete t[s],t[s]=f}}),C1e(t,e,i)),n()}},A1e=t=>{const e=t["s-cr"]=aa.createComment("");e["s-cn"]=!0,Xh(t,e,t.firstChild)},O1e=async t=>{if(!(In.$flags$&1)){const e=yp(t);e.$rmListeners$&&(e.$rmListeners$.map(i=>i()),e.$rmListeners$=void 0)}},ci=(t,e)=>{const i={$flags$:e[0],$tagName$:e[1]};i.$members$=e[2],i.$listeners$=e[3],i.$watchers$=t.$watchers$,i.$attrsToReflect$=[];const n=t.prototype.connectedCallback,s=t.prototype.disconnectedCallback;return Object.assign(t.prototype,{__registerHost(){H0e(this,i)},connectedCallback(){const h=yp(this);lU(this,h,i.$listeners$),I1e(this),n&&n.call(this)},disconnectedCallback(){O1e(this),s&&s.call(this)},__attachShadow(){if(!this.shadowRoot)this.attachShadow({mode:"open",delegatesFocus:!!(i.$flags$&16)});else if(this.shadowRoot.mode!=="open")throw new Error(`Unable to re-use existing shadow root for ${i.$tagName$}! Mode is set to ${this.shadowRoot.mode} but Stencil only supports open shadow roots.`)}}),t.is=i.$tagName$,k1e(t,i)},gM=(t,e)=>e,lU=(t,e,i,n)=>{i&&i.map(([s,h,f])=>{const m=R1e(t,s),y=P1e(e,f),x=N1e(s);In.ael(m,h,y,x),(e.$rmListeners$=e.$rmListeners$||[]).push(()=>In.rel(m,h,y,x))})},P1e=(t,e)=>i=>{var n;try{uo.lazyLoad||t.$hostElement$[e](i)}catch(s){Sy(s)}},R1e=(t,e)=>e&4?aa:e&8?Ty:e&16?aa.body:t,N1e=t=>W0e?{passive:(t&1)!==0,capture:(t&2)!==0}:(t&2)!==0;/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const Mc=globalThis.calciteConfig,L1e=(Mc==null?void 0:Mc.focusTrapStack)||[];Mc!=null&&Mc.logLevel;const aI="2.13.2",D1e="2024-10-24",z1e="e38e2977d";function F1e(){if(Mc&&Mc.version)return;console.info(`Using Calcite Components ${aI} [Date: ${D1e}, Revision: ${z1e}]`);const t=Mc||globalThis.calciteConfig||{};Object.defineProperty(t,"version",{value:aI,writable:!1}),globalThis.calciteConfig=t}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const ya=()=>typeof navigator<"u"&&typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */function lI(){const{classList:t}=document.body,e=window.matchMedia("(prefers-color-scheme: dark)").matches,i=()=>t.contains(qG)||t.contains(VG)&&e?"dark":"light",n=f=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:f}})),s=f=>{h!==f&&n(f),h=f};let h=i();n(h),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",f=>s(f.matches?"dark":"light")),new MutationObserver(()=>s(i())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}function j1e(){ya()&&(document.readyState==="interactive"?lI():document.addEventListener("DOMContentLoaded",()=>lI(),{once:!0})),F1e()}const G1e=j1e;G1e();let cU;function U1e(){try{cM(".")}catch{JG(lo(xt(cU)))}}function Cl(t){var i;const e=[];for(const n of Object.keys(t))customElements.get(`calcite-${n}`)||e.push((i=t[n])==null?void 0:i.call(t));return e.length>0?Promise.all(e):null}cU="components/assets";const hU=Symbol("widget"),uU=Symbol("widget-test-data"),B1e=[],H1e={},Ew=new WeakMap;function dU(t,e){let i=e.children;if(i!=null&&i.length)for(let s=0;s<i.length;++s)i[s]=dU(t,i[s]);else i=B1e;const n=e.vnodeSelector;if(Mw(n)){const s=e.properties||H1e,h=s.key||n,f={key:h,afterCreate:V1e,afterUpdate:q1e,afterRemoved:pU,parentWidget:t,widgetConstructor:n,widgetProperties:{...s,key:h,children:i}};return{vnodeSelector:n.vnodeSelector,properties:f,children:void 0,text:void 0,domNode:null}}return e}function V1e(t,e,i,{parentWidget:n,widgetConstructor:s,widgetProperties:h}){var m;const f=new s(h);f.container=t,Ew.set(t,f),(m=f.afterCreate)==null||m.call(f,f,t),n.addHandles(ct(()=>pU(t))),queueMicrotask(()=>{f[uU].projector.renderNow()})}function q1e(t,e,i,{widgetProperties:n}){var h;const s=Ew.get(t);s&&(s.set(n),(h=s.afterUpdate)==null||h.call(s,s,t))}function pU(t){var i;const e=Ew.get(t);e&&((i=e.afterRemoved)==null||i.call(e,e,t),e.destroy(),Ew.delete(t))}function Mw(t){return typeof t=="function"&&t[hU]}const cI=new Set;function W1e(t){cI.add(t),t.finally(()=>cI.delete(t))}var fU;const K1e="esri.widgets.Widget";let Z1e=0;function gU(t,e){const i=Object.prototype.hasOwnProperty;for(const n in e)i.call(e,n)&&i.call(t,n)&&(t[n]!=null&&e[n]!=null&&typeof t[n]=="object"&&typeof e[n]=="object"?gU(t[n],e[n]):t[n]=e[n]);return t}const J1e=j0e({postProcessProjectionOptions(t){const e=t.eventHandlerInterceptor,i=/capture$/i;t.eventHandlerInterceptor=(n,s,h,f)=>{const m=e==null?void 0:e(n,s,h,f),y=i.test(n);if(!((n=n.replace(i,"")).toLowerCase()in h)||y){const x=n[2].toLowerCase()+n.slice(3),E=P=>m==null?void 0:m.call(h,P);h.addEventListener(x,E,y);const k=()=>h.removeEventListener(x,E,y),I=f.afterRemoved;f.afterRemoved=P=>{I==null||I(P),k()}}return m}},handleInterceptedEvent(t,e,i,n){const{eventPhase:s,type:h}=n,f=s===Event.CAPTURING_PHASE;let m=`on${h}${f?"capture":""}`;const y=e.properties;(y&&m in y||(m=`on${h[0].toUpperCase()}${h.slice(1)}${f?"Capture":""}`,y&&m in y))&&(jD(),t.scheduleRender(),y[m].call(y.bind||i,n))}});let nx=!1,nn=class extends D3(un.EventedAccessor){constructor(e,i){super(e,i),this._attached=!1,this._projector=J1e,this._readyForTrueRender=!1,this.key=this,this.autoRenderingEnabled=!0,this._loadLocale=u3(async()=>{var y;if((y=this._messageBundleProps)!=null&&y.length){const x=await Promise.allSettled(this._messageBundleProps.map(async({bundlePath:E,propertyName:k})=>{if(this.destroyed)return;let I=await mE(E);this.uiStrings&&Object.keys(this.uiStrings)&&(I=gU(_e(I),this.uiStrings)),this[k]=I}));if(this.destroyed)return;for(const E of x)E.status==="rejected"&&Ae.getLogger(this).error("widget-intl:locale-error",this.declaredClass,E.reason)}await this.loadLocale()}),U1e();const n="esri-widget-uid-"+lM(),s=this.render.bind(this);this._trackingTarget=new d3(()=>{this.autoRenderingEnabled&&this.scheduleRender()});const h=()=>({vnodeSelector:"div",properties:{key:`${n}-hidden`,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0}),f=()=>{var k,I;if(!this._readyForTrueRender||this.destroyed)return null;const y=s()??h(),x=y.properties??(y.properties={});if(x.key??(x.key=n),Mw(y.vnodeSelector)){if(!this.visible)return h()}else this.visible?x.styles||(x.styles={}):(x.class="",x.styles={display:"none"}),(k=x.styles).display??(k.display="");let E=0;return(I=y.children)==null||I.forEach(P=>{var L;Mw(P.vnodeSelector)||(P.properties??(P.properties={}),(L=P.properties).key??(L.key=`${this.id}--${E++}`))}),dU(this,y)};this.render=()=>{if(nx)return f();let y=tre(this)??null;if(y)return y;this._trackingTarget.clear(),nx=!0;try{y=Ic(this._trackingTarget,f)}catch(x){throw Ae.getLogger(this).error(x),x}finally{nx=!1}return y&&ire(this,y),y};const m=this.beforeFirstRender();m?this._resourcesFetch=m.then(()=>{this._readyForTrueRender=!0,this._postInitialize()}):(this._resourcesFetch=Promise.resolve().then(()=>{this._postInitialize()}),this._readyForTrueRender=!0),this.addResolvingPromise(this._resourcesFetch),W1e(this._resourcesFetch)}normalizeCtorArgs(e,i){const n={...e};return i&&(n.container=i),n}postInitialize(){}beforeFirstRender(){var i;const e=this.loadDependencies();return(i=this._messageBundleProps)!=null&&i.length||e?Promise.all([e,this._loadLocale()]).then(()=>{}).catch(V7):null}loadDependencies(){return null}loadLocale(){return null}destroy(){this.destroyed||(mt(this._trackingTarget),mt(this.viewModel),this._detach(this.container),this._set("container",null),this._emitter.clear(),this.render=()=>null,this._projector=null,x5(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return wE(e)}get domNode(){return this.container}set domNode(e){this.container=e}get icon(){return null}set icon(e){this._overrideIfSome("icon",e)}get id(){var e;return this._get("id")||((e=this.container)==null?void 0:e.id)||Date.now().toString(16)+"-widget-"+Z1e++}set id(e){e&&this._set("id",e)}get label(){return this.declaredClass.split(".").pop()}set label(e){this._overrideIfSome("label",e)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(e){this._set("visible",e)}get[(fU=hU,uU)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(x5(this),this._projector.scheduleRender())}own(e){TP(Ae.getLogger(this),"`Widget.own()` is deprecated in favor of 'Widget.addHandles()'",{replacement:"Widget.addHandles()",version:"4.28"}),this.addHandles(e)}classes(...e){return GD.apply(this,e)}renderNow(){x5(this),this._projector.renderNow()}_postInitialize(){var i;if(this.destroyed)return;this.scheduleRender(),(i=this._delegatedEventNames)!=null&&i.length&&this.addHandles(Ee(()=>this.viewModel,(n,s)=>{s&&this.removeHandles("delegated-events"),n&&h3(n)&&this.addHandles(this._delegatedEventNames.map(h=>Ym(n,h,f=>{this.emit(h,f)})),"delegated-events")},Pi)),this.postInitialize();const e=async()=>{await this._loadLocale().catch(V7),this.scheduleRender()};this.addHandles([iE(e),Ee(()=>this.uiStrings,e),ur(()=>this.container,n=>{this.destroyed||this._attach(n)},{initial:!0,once:!0})])}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){var i;this._attached&&(this._projector.detach(this.render),this._attached=!1),(i=e==null?void 0:e.parentNode)==null||i.removeChild(e)}};nn[fU]=!0,nn.vnodeSelector="div",_([S()],nn.prototype,"_readyForTrueRender",void 0),_([S({value:null})],nn.prototype,"container",null),_([Hi("container")],nn.prototype,"castContainer",null),_([S()],nn.prototype,"icon",null),_([S()],nn.prototype,"id",null),_([S()],nn.prototype,"label",null),_([S()],nn.prototype,"renderable",null),_([S()],nn.prototype,"uiStrings",void 0),_([S()],nn.prototype,"viewModel",void 0),_([S({value:!0})],nn.prototype,"visible",null),_([S()],nn.prototype,"key",void 0),_([S()],nn.prototype,"children",void 0),_([S()],nn.prototype,"afterCreate",void 0),_([S()],nn.prototype,"afterUpdate",void 0),_([S()],nn.prototype,"afterRemoved",void 0),nn=_([J(K1e)],nn);const is=nn,Y1e=new Map;function X1e(t){return Y1e.get(t)}function hI(t,e){return t&&"copyright"in t&&(!e||typeof t.originOf=="function"&&t.originOf("copyright")==="user")}function Q1e(t,e){return t.length!==e.length||t.some((i,n)=>i.text!==e[n].text)}function b1(t,e,i){!i||!e||t.find(n=>n.layerView===e&&n.text===i)||t.push({text:i,layerView:e})}function ege(t){return t.type==="bing-maps"}const Fl=[];let hf=class extends Oe{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.removeHandles("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new Pe,this.view=null,this._allLayerViewsChange=i=>{var s;this.removeHandles("suspension"),this.removeHandles("visible-geometry-changed");const n=(s=this.view)==null?void 0:s.allLayerViews;n&&(this.addHandles(n.map(h=>Ee(()=>{var f;return[h.suspended,(f=h.layer)==null?void 0:f.attributionVisible]},()=>this._updateAttributionItems())).toArray(),"suspension"),n.forEach(h=>{h.declaredClass==="esri.views.3d.layers.Tiles3DLayerView3D"&&this.addHandles(h.on("visible-geometry-changed",()=>this._updateAttributionItems()),"visible-geometry-changed")})),i!=null&&i.removed&&i.removed.forEach(h=>{this._pendingAttributions.delete(h),this._fetchedAttributionData.delete(h)}),this._updateAttributionItems()},this.addHandles([Ns(()=>{var i;return(i=this.view)==null?void 0:i.allLayerViews},"change",i=>this._allLayerViewsChange(i),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),ur(()=>{var i;return((i=this.view)==null?void 0:i.stationary)===!0},()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){var e;return(e=this.view)!=null&&e.ready?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const e=this.view,i=e==null?void 0:e.allLayerViews;if(Fl.length=0,!e||!i)return void this._clear();i.forEach(s=>{var m,y;if(s.suspended||!((m=s.layer)!=null&&m.attributionVisible))return;const h=s.layer;if(hI(h,"user"))return void b1(Fl,s,h.copyright);if(h.hasAttributionData){if(this._fetchedAttributionData.has(s)){const x=this._fetchedAttributionData.get(s);return void(x?b1(Fl,s,this._getDynamicAttribution(x,e,h)):hI(h)&&b1(Fl,s,h.copyright))}return void this._fetchAttributionData(s)}const f="portalItem"in h?(y=h.portalItem)==null?void 0:y.accessInformation:void 0;b1(Fl,s,f||h.copyright)});const n=i.find(s=>{var h;return((h=s.layer)==null?void 0:h.type)==="integrated-mesh-3dtiles"});if(this.view&&n){const s=X1e(this.view);if(s){const h=s.getAttributionText();for(let f=0;f<h.length;++f)b1(Fl,n,h[f])}}Q1e(this.items,Fl)&&(this.items.removeAll(),this.items.addMany(Fl)),Fl.length=0,this.notifyChange("state")}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const i=await BN(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const n=i.ok?this._createContributionIndex(i.value,ege(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,n)}this._updateAttributionItems()}_createContributionIndex(e,i){const n=e.contributors,s={};if(!n)return s;for(let h=0;h<n.length;h++){const f=n[h],m=f.coverageAreas;if(!m)return;for(const y of m){const x=y.bbox,E=y.zoomMin-(i&&y.zoomMin?1:0),k=y.zoomMax-(i&&y.zoomMax?1:0),I=new Nt({xmin:x[1],ymin:x[0],xmax:x[3],ymax:x[2],spatialReference:Ke.WGS84}),P={extent:Ec(I),attribution:f.attribution||"",score:y.score!=null?y.score:100,id:h};for(let L=E;L<=k;L++)s[L]??(s[L]=[]),s[L].push(P)}}return s.maxKey=Math.max.apply(null,Object.keys(s)),s}_getDynamicAttribution(e,i,n){var E;const{extent:s,scale:h}=i;let f=((E=n.tileInfo)==null?void 0:E.scaleToZoom(h))??0;if(f=Math.min(e.maxKey??0,Math.round(f)),!s||f==null||f<=-1)return"";const m=e[f],y=b3(s.center.clone().normalize(),Ke.WebMercator),x=new Set;return m?m.filter(k=>{const I=k.id,P=!x.has(I)&&y&&k.extent&&ny(k.extent,y);return P&&x.add(I),P}).sort((k,I)=>I.score-k.score||k.objectId-I.objectId).map(k=>k.attribution).join(", "):""}};_([S({readOnly:!0,type:Pe})],hf.prototype,"items",void 0),_([S({readOnly:!0})],hf.prototype,"state",null),_([S()],hf.prototype,"view",void 0),hf=_([J("esri.widgets.Attribution.AttributionViewModel")],hf);const mU=hf,Qe={anchor:"esri-widget__anchor",anchorDisabled:"esri-widget__anchor--disabled",button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",disabled:"esri-disabled",empty:"esri-widget__content--empty",emptyIllustration:"esri-widget__content-illustration--empty",heading:"esri-widget__heading",hidden:"esri-hidden",input:"esri-input",interactive:"esri-interactive",loader:"esri-widget__loader",loaderAnimation:"esri-widget__loader-animation",loaderText:"esri-widget__loader-text",menu:"esri-menu",menuHeader:"esri-menu__header",menuItem:"esri-menu__list-item",menuItemActive:"esri-menu__list-item--active",menuItemFocus:"esri-menu__list-item--focus",menuList:"esri-menu__list",panel:"esri-widget--panel",panelHeightOnly:"esri-widget--panel-height-only",primaryTick:"primary-tick",primaryTickAmPm:"primary-tick__ampm",primaryTickLabel:"primary-tick__label",rotating:"esri-rotating",secondaryTick:"secondary-tick",select:"esri-select",table:"esri-widget__table",widget:"esri-widget",widgetButton:"esri-widget--button",widgetButtonActive:"esri-widget--button-active",widgetDisabled:"esri-widget--disabled"};function $w(){return function(t,e){if(!t[e])throw new TypeError(`Cannot auto bind undefined function '${String(e)}'`);return{value:ige(t[e])}}}function tge(t){const e=t==null?void 0:t.type;return t instanceof KeyboardEvent||e==="keyup"||e==="keydown"||e==="keypress"}function ige(t){return function(e,...i){tge(e)?BD(e.key)&&(e.preventDefault(),e.stopPropagation(),e.target.click()):t.call(this,e,...i)}}function Gn(t){return(e,i)=>{e.hasOwnProperty("_messageBundleProps")||(e._messageBundleProps=e._messageBundleProps?e._messageBundleProps.slice():[]),e._messageBundleProps.push({bundlePath:t,propertyName:i})}}var nge=function(t){return{vnodeSelector:"",properties:void 0,children:void 0,text:t.toString(),domNode:null}},yU=function(t,e){for(var i=0,n=t.length;i<n;i++){var s=t[i];Array.isArray(s)?yU(s,e):s!=null&&s!==!1&&(s.hasOwnProperty("vnodeSelector")||(s=nge(s)),e.push(s))}},rge=function(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];if(i.length===1&&typeof i[0]=="string")return{vnodeSelector:t,properties:e||void 0,children:void 0,text:i[0],domNode:null};var s=[];return yU(i,s),{vnodeSelector:t,properties:e||void 0,children:s,text:void 0,domNode:null}};function re(t,e,...i){return typeof t!="function"||Mw(t)?rge(t,e,...i):t(e,...i)}function sge(...t){return t}const Pp="esri-attribution",Rp={base:Pp,poweredBy:`${Pp}__powered-by`,sources:`${Pp}__sources`,open:`${Pp}--open`,sourcesOpen:`${Pp}__sources--open`,link:`${Pp}__link`};let mr=class extends is{constructor(e,i){super(e,i),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(n=>n.forEach(({target:s})=>this._checkSourceTextOverflow(s))),this.itemDelimiter=" | ",this.messages=null,this.viewModel=new mU}initialize(){this.addHandles(Ns(()=>{var e;return(e=this.viewModel)==null?void 0:e.items},"change",()=>this.scheduleRender()))}destroy(){var e;(e=this._resizeObserver)==null||e.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((e,i)=>(e.includes(i.text)||e.push(i.text),e),[]).join(this.itemDelimiter)}get icon(){return"description"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e={[Rp.open]:this._isOpen};return re("div",{bind:this,class:this.classes(Rp.base,Qe.widget,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return re("div",{class:Rp.poweredBy},"Powered by"," ",re("a",{class:Rp.link,href:"https://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}_renderSourcesNode(){const e=this._isOpen,i=this._isInteractive,n=i?0:void 0,{attributionText:s}=this,h={[Rp.sourcesOpen]:e,[Qe.interactive]:i};return re("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(Rp.sources,h),innerHTML:s,tabIndex:n})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._resizeObserver.observe(e)}_checkSourceTextOverflow(e){let i=!1;const{clientHeight:n,clientWidth:s,scrollWidth:h}=e,f=h>s,m=this._attributionTextOverflowed!==f;if(this._attributionTextOverflowed=f,m&&(i=!0),this._isOpen){const y=n<this._prevSourceNodeHeight;this._prevSourceNodeHeight=n,y&&(this._isOpen=!1,i=!0)}i&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};_([S()],mr.prototype,"_isOpen",void 0),_([S()],mr.prototype,"_isInteractive",null),_([S()],mr.prototype,"_attributionTextOverflowed",void 0),_([S()],mr.prototype,"_prevSourceNodeHeight",void 0),_([S({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],mr.prototype,"attributionText",null),_([S()],mr.prototype,"icon",null),_([S()],mr.prototype,"itemDelimiter",void 0),_([S()],mr.prototype,"label",null),_([S(),Gn("esri/widgets/Attribution/t9n/Attribution")],mr.prototype,"messages",void 0),_([S()],mr.prototype,"view",null),_([S({type:mU})],mr.prototype,"viewModel",void 0),_([$w()],mr.prototype,"_toggleState",null),mr=_([J("esri.widgets.Attribution")],mr);const oge=mr;function age(){const t=de("mapview-essential-goto-duration");return t==null?t:t}function lge(t){var e,i;return((e=t==null?void 0:t.spatialReference)==null?void 0:e.isWebMercator)||((i=t==null?void 0:t.spatialReference)==null?void 0:i.isGeographic)||!1}const vU=t=>{let e=class extends t{constructor(...i){super(...i),this.goToOverride=null,this.view=null}callGoTo(i){const{view:n}=this;return kP(n),this.goToOverride?this.goToOverride(n,i):n.goTo(i.target,i.options)}};return _([S()],e.prototype,"goToOverride",void 0),_([S()],e.prototype,"view",void 0),e=_([J("esri.widgets.support.GoTo")],e),e};let hd=class extends vU(Oe){constructor(e){super(e),this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this.addHandles(Ee(()=>this.view,this._updateRotationWatcher,Ct))}destroy(){this.view=null}get canShowNorth(){return lge(this.view)}get state(){var e;return!((e=this.view)!=null&&e.ready)||this.view.type==="2d"&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}reset(){var e,i;(e=this.view)!=null&&e.ready&&(((i=this.view)==null?void 0:i.type)==="2d"?this.callGoTo({target:{rotation:0},options:{animationMode:"always",duration:age()}}):this.callGoTo({target:{heading:0}}))}_updateForRotation(e){e!=null&&this._set("orientation",{z:e})}_updateForCamera(e){if(!e)return;const i=-e.heading;this._set("orientation",{x:0,y:0,z:i})}_updateRotationWatcher(e){this.removeAllHandles(),e&&this.addHandles(e.type==="2d"?Ee(()=>e==null?void 0:e.rotation,this._updateForRotation,Ct):Ee(()=>e==null?void 0:e.camera,this._updateForCamera,Ct))}};_([S({readOnly:!0})],hd.prototype,"canShowNorth",null),_([S({readOnly:!0})],hd.prototype,"orientation",void 0),_([S({readOnly:!0})],hd.prototype,"state",null),_([S()],hd.prototype,"view",void 0),hd=_([J("esri.widgets.Compass.CompassViewModel")],hd);const bU=hd,uI="esri-compass",dI={base:uI,iconContainer:`${uI}__icon-container`};let tc=class extends is{constructor(e,i){super(e,i),this.messages=null,this.viewModel=new bU,this._reset=()=>{this.viewModel.reset()},this._toRotationTransform=n=>({transform:`rotateZ(${n.z}deg)`})}loadDependencies(){return Cl({button:()=>ge(()=>import("./calcite-button-DdfDzV45.js"),[],import.meta.url),icon:()=>ge(()=>import("./calcite-icon-CWxO1up_.js"),[],import.meta.url)})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get icon(){return this.viewModel.state==="rotation"?"arrow-up":"compass-needle"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:i}=this.viewModel,{messages:n}=this;return re("div",{class:this.classes(dI.base,Qe.widget)},re("calcite-button",{class:Qe.widgetButton,disabled:i==="disabled",kind:"neutral",label:n.reset,onclick:this._reset,round:!0,scale:"s",title:n.reset},re("div",{"aria-hidden":"true",class:dI.iconContainer,title:n.reset},re("calcite-icon",{icon:this.icon,styles:this._toRotationTransform(e)}))))}};_([S()],tc.prototype,"goToOverride",null),_([S()],tc.prototype,"icon",null),_([S()],tc.prototype,"label",null),_([S(),Gn("esri/widgets/Compass/t9n/Compass")],tc.prototype,"messages",void 0),_([S()],tc.prototype,"view",null),_([S({type:bU})],tc.prototype,"viewModel",void 0),tc=_([J("esri.widgets.Compass")],tc);const cge=tc,pI="esri-navigation-toggle",fI={base:pI,isLayoutHorizontal:`${pI}--horizontal`};let uf=class extends Oe{constructor(e){super(e),this._navigationMode="pan",this.view=null}initialize(){this.addHandles(ur(()=>{var e;return(e=this.view)==null?void 0:e.inputManager},()=>this._setNavigationMode()))}destroy(){this.view=null}get state(){var e,i;return(e=this.view)!=null&&e.ready&&((i=this.view)==null?void 0:i.type)==="3d"?"ready":"disabled"}get navigationMode(){return this._navigationMode}set navigationMode(e){this._navigationMode=e,this._setNavigationMode()}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate")}_setNavigationMode(){var i;const e=(i=this.view)==null?void 0:i.inputManager;e&&(e.primaryDragAction=this._navigationMode==="pan"?"pan":"rotate")}};_([S({readOnly:!0})],uf.prototype,"state",null),_([S()],uf.prototype,"_navigationMode",void 0),_([S()],uf.prototype,"view",void 0),uf=_([J("esri.widgets.NavigationToggle.NavigationToggleViewModel")],uf);const wU=uf;let ic=class extends is{constructor(e,i){super(e,i),this.messages=null,this.viewModel=new wU,this.toggle=()=>this.viewModel.toggle(),this._panButton=null,this._rotateButton=null,this._toggle=()=>{var s;const n=((s=this.viewModel)==null?void 0:s.navigationMode)==="pan"?this._rotateButton:this._panButton;HD(n),this.toggle()}}loadDependencies(){return Cl({button:()=>ge(()=>import("./calcite-button-DdfDzV45.js"),[],import.meta.url)})}get icon(){return"move"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){var s,h;const e=((s=this.viewModel)==null?void 0:s.state)==="disabled",i=((h=this.viewModel)==null?void 0:h.navigationMode)==="pan",n=this.messages.toggle;return re("div",{class:this.classes(fI.base,Qe.widget,{[fI.isLayoutHorizontal]:this.layout==="horizontal"})},re("calcite-button",{afterCreate:f=>{this._panButton=f},appearance:i?"outline-fill":"solid",class:Qe.widgetButton,disabled:e,iconStart:"move",kind:"neutral",label:n,onclick:this._toggle,tabIndex:i?void 0:-1,title:n}),re("calcite-button",{afterCreate:f=>{this._rotateButton=f},appearance:i?"solid":"outline-fill",class:Qe.widgetButton,disabled:e,iconStart:"rotate",kind:"neutral",label:n,onclick:this._toggle,tabIndex:i?-1:void 0,title:n}))}};_([S()],ic.prototype,"icon",null),_([S()],ic.prototype,"label",null),_([S({value:"vertical"})],ic.prototype,"layout",null),_([S(),Gn("esri/widgets/NavigationToggle/t9n/NavigationToggle")],ic.prototype,"messages",void 0),_([S()],ic.prototype,"view",null),_([S({type:wU})],ic.prototype,"viewModel",void 0),ic=_([J("esri.widgets.NavigationToggle")],ic);const hge=ic;let ud=class extends Oe{get canZoomIn(){var n,s,h;if(!((n=this.view)==null?void 0:n.ready))return!1;const i=(h=(s=this.view)==null?void 0:s.constraints)==null?void 0:h.effectiveMaxScale;return i===0||this._scale>i}get canZoomOut(){var s;const{view:e}=this;if(!(e==null?void 0:e.ready))return!1;const n=(s=e.constraints)==null?void 0:s.effectiveMinScale;return n===0||this._scale<n}get _scale(){var i,n,s;const e=(n=(i=this.view)==null?void 0:i.animation)==null?void 0:n.target;return(e&&"then"in e||e==null?void 0:e.scale)??((s=this.view)==null?void 0:s.scale)??0}};_([S({readOnly:!0})],ud.prototype,"canZoomIn",null),_([S({readOnly:!0})],ud.prototype,"canZoomOut",null),_([S()],ud.prototype,"view",void 0),_([S()],ud.prototype,"_scale",null),ud=_([J("esri.widgets.Zoom.ZoomConditions2D")],ud);const uge=ud;let df=class extends Oe{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};_([S({readOnly:!0})],df.prototype,"canZoomIn",null),_([S({readOnly:!0})],df.prototype,"canZoomOut",null),_([S()],df.prototype,"view",void 0),df=_([J("esri.widgets.Zoom.ZoomConditions3D")],df);const dge=df;let wh=class extends Oe{constructor(e){super(e)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){var e;return this._zoomConditions!=null&&((e=this._zoomConditions)==null?void 0:e.canZoomOut)}get state(){var e;return(e=this.view)!=null&&e.ready?"ready":"disabled"}set view(e){e?e.type==="2d"?this._zoomConditions=new uge({view:e}):e.type==="3d"&&(this._zoomConditions=new dge({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){if(!this.canZoomIn)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomIn():Yr(e.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomOut():Yr(e.goTo({zoomFactor:.5}))}};_([S()],wh.prototype,"_zoomConditions",void 0),_([S()],wh.prototype,"canZoomIn",null),_([S()],wh.prototype,"canZoomOut",null),_([S({readOnly:!0})],wh.prototype,"state",null),_([S()],wh.prototype,"view",null),wh=_([J("esri.widgets.Zoom.ZoomViewModel")],wh);const _U=wh,gI={base:"esri-zoom",horizontalLayout:"esri-zoom--horizontal"};let nc=class extends is{constructor(e,i){super(e,i),this.messages=null,this.viewModel=new _U,this.zoomIn=()=>this.viewModel.zoomIn(),this.zoomOut=()=>this.viewModel.zoomOut()}loadDependencies(){return Cl({button:()=>ge(()=>import("./calcite-button-DdfDzV45.js"),[],import.meta.url)})}get icon(){return"magnifying-glass-plus"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}set view(e){this.viewModel.view=e}get view(){return this.viewModel.view}render(){const e={[gI.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:i,canZoomOut:n}=this.viewModel,{zoomIn:s,zoomOut:h}=this.messages;return re("div",{class:this.classes(gI.base,Qe.widget,e)},re("calcite-button",{class:Qe.widgetButton,disabled:!i,iconStart:"plus",kind:"neutral",label:s,onclick:this.zoomIn,title:s}),re("calcite-button",{class:Qe.widgetButton,disabled:!n,iconStart:"minus",kind:"neutral",label:h,onclick:this.zoomOut,title:h}))}};_([S()],nc.prototype,"icon",null),_([S()],nc.prototype,"label",null),_([S({value:"vertical"})],nc.prototype,"layout",null),_([S(),Gn("esri/widgets/Zoom/t9n/Zoom")],nc.prototype,"messages",void 0),_([S()],nc.prototype,"view",null),_([S({type:_U})],nc.prototype,"viewModel",void 0),nc=_([J("esri.widgets.Zoom")],nc);const pge=nc;function fge(t){return(t==null?void 0:t.view)!==void 0}let Qb=class extends P0e{constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=i=>{this.components.forEach(n=>{const s=this._find(n),h=s==null?void 0:s.widget;fge(h)&&(h.view=i)})},this._componentsWatcher=(i,n)=>{this._removeComponents(n),this._addComponents(i),this._adjustPadding(i)}}initialize(){this.addHandles([Ee(()=>this.components,this._componentsWatcher,Ct),Ee(()=>this.view,this._updateViewAwareWidgets,Ct)])}_add(e,i,n,s,h){let f=e;if(typeof e=="string"&&this._defaultPositionLookup[e]){if(this._find(e))return;f=this._createComponent(e)}super._add(f,i,n,s,h)}_removeComponents(e){e.forEach(i=>{const n=this._find(i);n&&(this.remove(n),n.destroy())})}_adjustPadding(e){if(!e.includes("attribution")&&!this._isOverridden("padding")){const{top:i}=this.padding;this.padding=i}}_addComponents(e){this.constructed&&e.forEach(i=>this.add(this._createComponent(i),this._defaultPositionLookup[i]))}_createComponent(e){const i=this._createWidget(e);return new Xb({id:e,node:i})}_createWidget(e){const i=this.view;switch(e){case"attribution":return new oge({view:i});case"compass":return new cge({view:i});case"navigation-toggle":return new hge({view:i});case"zoom":return new pge({view:i})}}};_([S()],Qb.prototype,"components",void 0),Qb=_([J("esri.views.ui.DefaultUI")],Qb);const xU=Qb;let e2=class extends xU{constructor(e){super(e),this.components=["attribution","zoom"]}};_([S()],e2.prototype,"components",void 0),e2=_([J("esri.views.ui.2d.DefaultUI2D")],e2);const SU=e2;let gge=class u6{constructor(e,i,n=""){this.major=e,this.minor=i,this._context=n}lessThan(e,i){return this.major<e||e===this.major&&this.minor<i}greaterEqual(e,i){return!this.lessThan(e,i)}validate(e){if(this.major!==e.major){const i=this._context&&this._context+":",n=this._context&&this._context+" ";throw new ce(i+"unsupported-version",`Required major ${n}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:e})}}clone(){return new u6(this.major,this.minor,this._context)}static parse(e,i=""){const[n,s]=e.split("."),h=/^\s*\d+\s*$/;if(!(n!=null&&n.match)||!h.test(n))throw new ce((i&&i+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:e});if(!(s!=null&&s.match)||!h.test(s))throw new ce((i&&i+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:e});const f=parseInt(n,10),m=parseInt(s,10);return new u6(f,m,i)}},mge=class extends gge{constructor(e,i){super(e,i,"webmap")}};function t2(t){return t!=null&&typeof t=="object"&&"declaredClass"in t&&t.declaredClass==="esri.WebMap"}new mge(2,32);var d6;let i2=d6=class extends De{constructor(t){super(t),this.color=new ht([0,0,0,1])}clone(){return new d6(_e({color:this.color}))}};_([S({type:ht,json:{write:!0}})],i2.prototype,"color",void 0),i2=d6=_([J("esri.webmap.background.ColorBackground")],i2);const yge=i2;let TU,EU,MU,$U,kU,CU,IU;async function vge(){const[,{GraphicsView2D:t,GraphicContainer:e,LabelManager:i,MapViewNavigation:n,MagnifierView2D:s,GridView2D:h,Stage:f}]=await Promise.all([ge(()=>import("./webglDeps-DHwI-S1G.js"),__vite__mapDeps([211,73,72,137,212,138]),import.meta.url),ge(()=>import("./mapViewDeps-C04MN2lW.js"),__vite__mapDeps([213,104,77,214,75,76,13,78,71,79,80,74,81,34,82,83,40,72,73,70,46,138,89,215,212,95,216,217,124,123,88,15,12,16,218,114,154,2,86,87,122,211,137,219,92,220,69,26,27,22,84,30,20,9,19,221,130,131,116,141,222,223,57,224,90,85,225,226,227,228,229,230,134,231]),import.meta.url)]);EU=t,MU=e,$U=i,kU=n,CU=s,IU=h,TU=f}let We=class extends lne(Rre(_re(nhe))){constructor(e){super(e),this._magnifierView=null,this._gridView=null,this.stage=null,this._resolveWhenReady=[],this.rootLayerViews=new pm({getCollections:()=>{var i,n;return[(i=this.basemapView)==null?void 0:i.baseLayerViews,this.layerViews,(n=this.basemapView)==null?void 0:n.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.goToManager=new Zb({view:this}),this.graphicsView=null,this.stateManager=new Zn({constraints:new oG({view:this})}),this.stationaryManager=new wg,this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this.frameTask=new qde(this),this.floors=new Pe,this.grid=null,this.highlights=AG(),this.inputManager=new lfe({view:this}),this.map=null,this.spatialReferenceLocked=!1,this.timeline=new UG,this.type="2d",this.view2dType=null,this.ui=new SU,this.test={takeScreenshot:async i=>f0e(this._getScreenshotView(i),i)},this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([Ee(()=>this.viewpoint,()=>this.stationaryManager.flip(),Pc),this.on("resize",i=>this.stateManager.resize(i.width,i.height))]),mie()}destroy(){this.layerViewManager.clear(),this._set("preconditionsReady",!1),this.frameTask=mt(this.frameTask),this.goToManager.destroy(),this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new mfe(this.featuresTilingScheme)}get constraintsInfo(){var n,s;const e=(n=this.defaultsFromMap)==null?void 0:n.tileInfo,i=this.spatialReference;return{lods:(s=e==null?void 0:e.spatialReference)!=null&&s.equals(i)?e.lods:null,spatialReference:i}}get state(){return this.stateManager.state}get initialExtentRequired(){var m;if(!this.stateManager)return!1;const{scale:e,constraints:i,center:n,viewpoint:s,extent:h}=this;let f=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&((m=this.map.initialViewProperties)!=null&&m.viewpoint))&&!h&&(i!=null&&i.effectiveLODs||(f=-1),(!n||e===0&&f===-1)&&((s==null?void 0:s.targetGeometry)==null||s.targetGeometry.type!=="extent"&&!s.scale))}get defaultsFromMapSettings(){return{required:{extent:!1,heightModelInfo:!1,tileInfo:!0},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get scheduler(){return this.frameTask.scheduler}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const i=e.targetGeometry,n=this.spatialReference;return yD(i.spatialReference,n)}set animation(e){const i=this._get("animation");if(e===i)return;if(i&&i.stop(),e!==this.animationManager.animation&&this.animationManager.stop(),!e||e.isFulfilled())return void this._set("animation",null);this._set("animation",e);const n=()=>{var s;this.destroyed||e===this._get("animation")&&(this._set("animation",null),(s=this.frameTask)==null||s.requestFrame())};e.when(n,n)}get background(){return t2(this.map)?this.map.initialViewProperties.background:null}set background(e){this._override("background",e)}get center(){var e;return((e=this.stateManager)==null?void 0:e.center)??null}set center(e){this.stateManager.center=e}get constraints(){var e;return(e=this.stateManager)==null?void 0:e.constraints}set constraints(e){e.view=this;const i=this.stateManager.constraints;this.stateManager.constraints=e,i==null||i.destroy()}get extent(){var e;return((e=this.stateManager)==null?void 0:e.extent)??null}set extent(e){this.stateManager.extent=e}get highlightOptions(){return Xfe(this)}set highlightOptions(e){Qfe(this,e)}get padding(){var e;return(e=this.stateManager)==null?void 0:e.padding}set padding(e){this.stateManager&&(this.stateManager.padding=e)}get rendering(){var e;return((e=this.stage)==null?void 0:e.renderRequested)??!1}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(e){this.stateManager.resizeAlign=e}get resolution(){return this.stateManager.resolution??0}get rotation(){return this.stateManager.rotation??0}set rotation(e){const{rotationEnabled:i}=this.constraints;this.constraints.rotationEnabled=!0,this.stateManager.rotation=e,this.constraints.rotationEnabled=i}get scale(){var e;return((e=this.stateManager)==null?void 0:e.scale)??0}set scale(e){this.stateManager&&(this.stateManager.scale=e)}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}get tileInfo(){var e;return(e=this.featuresTilingScheme)==null?void 0:e.tileInfo}get updating(){var n,s,h,f;const e=!(!this.magnifier.visible||this.magnifier.position===null||!((n=this._magnifierView)!=null&&n.updatingHandles.updating)),i=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(m=>!m.destroyed&&!("layerViews"in m)&&m.updating===!0)||e);if(de("esri-2d-log-updating")){const m=this.allLayerViews.reduce((y,x)=>({...y,[`${x.layer.id}(${x.layer.type})`]:!x.destroyed&&!("layerViews"in x)&&x.updating}),{});console.log(`Updating MapView: ${i}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${(s=this.layerViewManager)==null?void 0:s.updating}
-> labelManager.updating: ${(h=this.labelManager)==null?void 0:h.updating}
-> graphicsView.updating: ${(f=this.graphicsView)==null?void 0:f.updating}
-> allLayerViews: ${JSON.stringify(m)}
-> updatingMagnifier: ${e}
`)}return i}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(e){this.stateManager.viewpoint=e,this.frameTask.requestFrame()}get visibleArea(){const e=this.stateManager.visibleArea;return e&&new ln({rings:[e.map(i=>[i[0],i[1]])],spatialReference:this.spatialReference})}get zoom(){return this.stateManager.zoom??-1}set zoom(e){this.stateManager.zoom=e}get navigating(){var e;return((e=this.mapViewNavigation)==null?void 0:e.interacting)??!1}goTo(e,i){return this.goToManager.goTo(e,i)}async hitTest(e,i){return e0e(this,e,i)}async takeScreenshot(e){return p0e(this._getScreenshotView(e),e)}toMap(e){if(!this.ready)return null;const i=ZF(e)?KF(this,e):e;return this.stateManager.toMap(i)}toScreen(e,i){return this.stateManager.toScreen(e,i)}on(e,i,n,s){return this.inputManager&&this.viewEvents.on(e,i,n,s)||super.on(e,i)}hasEventListener(e){return super.hasEventListener(e)||this.viewEvents.hasHandler(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var e;return this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties.spatialReference||((e=this.defaultsFromMap)==null?void 0:e.spatialReference)||null}getDefaultTimeZone(){return t2(this.map)?this.map.initialViewProperties.timeZone:null}getDefaultTimeExtent(){return t2(this.map)?this.map.initialViewProperties.timeExtent:null}hasLayerViewModule(e){return Zk.hasLayerViewModule(e)}importLayerView(e){return Zk.importLayerView(e)}pixelSizeAt(){return this.ready?this.resolution:(Ae.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}async popupHitTest(e){var x;const i=this.toMap(e),n=await this.hitTest(e),s=this.allLayerViews.toArray().filter(E=>E.clips.every(k=>CG(this,k,e,i))).reverse(),h=new globalThis.Map(s.map(E=>[E.layer.uid,E])),f=[];let m=0,y=0;for(;m<n.results.length||y<s.length;){const E=n.results.at(m);if(E&&E.type!=="graphic"){++m;continue}const k=h.get((x=(E==null?void 0:E.layer)??(E==null?void 0:E.graphic.layer))==null?void 0:x.uid);if((!E||k)&&y<s.length&&s.at(y)!==k){const I=s.at(y);"fetchPopupFeaturesAtLocation"in I&&f.push({mapPoint:i,layerView:I}),++y}else E&&(f.push({graphic:E.graphic,layerView:k}),++m)}return{hits:f,location:i}}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}async validate(){let e=S0e(this.type);if(de("safari")&&de("safari")<9&&(e=new ce("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:de("safari")})),e!=null)throw Ae.getLogger(this).warn("#validate()",e.message),e}loadAsyncDependencies(){return vge()}_getDefaultViewpoint(){var j;const{constraints:e,initialExtent:i,map:n,padding:s,size:h}=this;if(!e)return null;const f=n&&"initialViewProperties"in n?n.initialViewProperties:void 0,m=this.stateManager.getUserStartupOptions(this.size),y=f==null?void 0:f.viewpoint,x=((j=y==null?void 0:y.targetGeometry)==null?void 0:j.extent)??i,E=x==null?void 0:x.center,k=(y==null?void 0:y.rotation)??0,I=(y==null?void 0:y.scale)||x&&o_(x,[h[0]-s.left-s.right,h[1]-s.top-s.bottom]),P=m.center??E,L=m.rotation??k,D=m.scale??I;return P&&D?new na({targetGeometry:P,scale:D,rotation:L}):null}_startup(){var m;this.timeline.begin("MapView Startup");const e=this._getDefaultViewpoint();this.stateManager.startup(e,this.size,this.spatialReference,(m=this.defaultsFromMap.extent)==null?void 0:m.center),this.graphics.owner=this;const i=new TU(this.surface,{canvas:this.renderCanvas,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this.stage=i,this._magnifierView=new CU,this._magnifierView.magnifier=this.magnifier,this._gridView=new IU;const n=new $U({view:this});this._set("labelManager",n);const s=new Dde({view:this});this._set("animationManager",s);const h=new kU({view:this,animationManager:s});this._set("mapViewNavigation",h),this._setupSpatialReferenceDependentProperties(),this.addHandles([this.rootLayerViews.on("change",()=>this._updateStageChildren()),i.on("webgl-error",y=>this.fatalError=y.error),Ee(()=>this.stationary,y=>i.stationary=y,Pi),Ee(()=>this.background,y=>{i.backgroundColor=y==null?void 0:y.color,this._magnifierView.backgroundColor=y==null?void 0:y.color},Pi),Ee(()=>this.magnifier,y=>this._magnifierView.magnifier=y,Pi),Ee(()=>this.grid,y=>this._gridView.grid=y,Pi),Ee(()=>this.renderingOptions,y=>i.renderingOptions=y,Pi),Ee(()=>this.highlights.items.map(y=>({name:y.name,options:{fillColor:y.options.color,haloColor:y.options.haloColor,fillOpacity:y.options.fillOpacity,haloOpacity:y.options.haloOpacity,haloWidth:y.options.haloWidth,haloBlur:y.options.haloBlur}})),()=>{i.highlightGradient=Jfe(i.highlightGradient,this.highlights.items)},Pi),Ee(()=>this.state.id,()=>i.state=this.state,Pi)],"map-view"),this._updateStageChildren();const f=this._resolveWhenReady;this._resolveWhenReady=[],f.forEach(y=>y(this)),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.removeHandles("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animation=null,this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._gridView.destroy(),this.stage.destroy(),this.stage=null,this._set("graphicsView",null),this._magnifierView=null,this._gridView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this.stationaryManager.clear(),this._set("ready",!1),this.stateManager.teardown()}_updateStageChildren(){this.stage.removeAllChildren(),this.rootLayerViews.forEach(i=>{this.stage.addChild(i.container)});const e=this.graphicsView;this.stage.addChild(e.container),this.stage.addChild(this._magnifierView),this.stage.addChild(this._gridView)}_setupSpatialReferenceDependentProperties(){const e=new epe(Ug.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const i=new EU({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new MU(e)});this._set("graphicsView",i)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),e.destroy(),this._set("featuresTilingScheme",null)}_getScreenshotView(e){var f;const{allLayerViews:i,padding:n,size:s,stage:h}=this;return{allLayerViews:i,backgroundColor:e!=null&&e.ignoreBackground?null:(f=this.background)==null?void 0:f.color,padding:n,size:s,stage:h}}_spatialReferenceChanged(e){if(this.ready){this.frameTask.stop();for(const i of this.allLayerViews)i.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(e),this.stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const i of this.allLayerViews)i.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}};We.type="2d",_([S({readOnly:!0})],We.prototype,"animationManager",void 0),_([S({constructOnly:!0})],We.prototype,"deactivatedWebGLExtensions",void 0),_([S({constructOnly:!0})],We.prototype,"debugWebGLExtensions",void 0),_([S({readOnly:!0})],We.prototype,"featuresTilingScheme",void 0),_([S({readOnly:!0})],We.prototype,"fullOpacity",void 0),_([S()],We.prototype,"goToManager",void 0),_([S({readOnly:!0})],We.prototype,"graphicsTileStore",null),_([S()],We.prototype,"graphicsView",void 0),_([S()],We.prototype,"stateManager",void 0),_([S()],We.prototype,"constraintsInfo",null),_([S({readOnly:!0})],We.prototype,"state",null),_([S()],We.prototype,"initialExtentRequired",null),_([S()],We.prototype,"labelManager",void 0),_([S({readOnly:!0})],We.prototype,"mapViewNavigation",void 0),_([S({constructOnly:!0})],We.prototype,"renderCanvas",void 0),_([S()],We.prototype,"renderingOptions",void 0),_([S({constructOnly:!0})],We.prototype,"supersampleScreenshotsEnabled",void 0),_([S({readOnly:!0})],We.prototype,"supportsGround",void 0),_([S()],We.prototype,"defaultsFromMapSettings",null),_([S({readOnly:!0})],We.prototype,"typeSpecificPreconditionsReady",null),_([S()],We.prototype,"animation",null),_([S({type:yge})],We.prototype,"background",null),_([S()],We.prototype,"center",null),_([S({type:oG})],We.prototype,"constraints",null),_([S()],We.prototype,"extent",null),_([S()],We.prototype,"floors",void 0),_([S()],We.prototype,"grid",void 0),_([S({type:Xd})],We.prototype,"highlightOptions",null),_([S({type:Pe.ofType(Mf)})],We.prototype,"highlights",void 0),_([S({readOnly:!0})],We.prototype,"inputManager",void 0),_([S()],We.prototype,"map",void 0),_([S()],We.prototype,"padding",null),_([S({readOnly:!0})],We.prototype,"rendering",null),_([S()],We.prototype,"resizeAlign",null),_([S({readOnly:!0})],We.prototype,"resolution",null),_([S()],We.prototype,"rotation",null),_([S()],We.prototype,"scale",null),_([S({constructOnly:!0})],We.prototype,"spatialReferenceLocked",void 0),_([S()],We.prototype,"stationary",null),_([S({readOnly:!0})],We.prototype,"tileInfo",null),_([S({type:UG,readOnly:!0})],We.prototype,"timeline",void 0),_([S({readOnly:!0})],We.prototype,"type",void 0),_([S({readOnly:!0})],We.prototype,"updating",null),_([S({readOnly:!0})],We.prototype,"view2dType",void 0),_([S()],We.prototype,"viewpoint",null),_([S({readOnly:!0})],We.prototype,"visibleArea",null),_([S()],We.prototype,"zoom",null),_([S({readOnly:!0})],We.prototype,"navigating",null),_([S(),Hi(t=>t instanceof xU?t:I0(SU,t))],We.prototype,"ui",void 0),We=_([J("esri.views.View2D")],We);const bge=We;let n2=class extends bge{constructor(e){super(e),this.view2dType="map"}};_([S({readOnly:!0})],n2.prototype,"view2dType",void 0),n2=_([J("esri.views.MapView")],n2);const wge=n2;function p6(t){return t!=null&&typeof t=="object"&&t.type==="2d"&&t.view2dType==="linkchart"}var rl;(function(t){t[t.NORTH=0]="NORTH",t[t.NORTH_EAST=1]="NORTH_EAST",t[t.EAST=2]="EAST",t[t.SOUTH_EAST=3]="SOUTH_EAST",t[t.SOUTH=4]="SOUTH",t[t.SOUTH_WEST=5]="SOUTH_WEST",t[t.WEST=6]="WEST",t[t.NORTH_WEST=7]="NORTH_WEST"})(rl||(rl={}));function _ge(t){return AU(t)||RT(t)||NT(t)}function AU(t){return nu(t)||T9(t)}const xge=12;let $c=class Gr{constructor(e){const i=Gr.checkUnsupported(e);if(i!=null)throw i;const n=e;this.spatialReference=n.spatialReference,this._isWebMercator=this.spatialReference.isWebMercator,this._isGCS=O0(this.spatialReference),this.origin=[n.origin.x,n.origin.y],this.pixelSize=n.size[0],this.dpi=n.dpi;const s=n.lods.reduce((x,E)=>(E.level<x.minLod.level&&(x.minLod=E),x.max=Math.max(x.max,E.level),x),{minLod:n.lods[0],max:-1/0}),h=s.minLod,f=2**h.level;let m=h.resolution*f,y=h.scale*f;this.levels=new Array(s.max+1);for(let x=0;x<this.levels.length;x++)this.levels[x]={resolution:m,scale:y,tileSize:[m*n.size[0],m*n.size[1]]},m/=2,y/=2}clone(){return new Gr(this.toTileInfo())}toTileInfo(){return new Ug({dpi:this.dpi,origin:new Ne({x:this.origin[0],y:this.origin[1],spatialReference:this.spatialReference}),size:[this.pixelSize,this.pixelSize],spatialReference:this.spatialReference,lods:this.levels.map((e,i)=>new ao({level:i,scale:e.scale,resolution:e.resolution}))})}getExtent(e,i,n,s){const h=this.levels[e],f=h.tileSize[0],m=h.tileSize[1];s[0]=this.origin[0]+n*f,s[2]=this.origin[0]+(n+1)*f,s[3]=this.origin[1]-i*m,s[1]=this.origin[1]-(i+1)*m}convertExtentToRadians(e,i){this._isWebMercator?(i[0]=b8(e[0]),i[1]=w8(e[1]),i[2]=b8(e[2]),i[3]=w8(e[3])):this._isGCS&&(i[0]=xc(e[0]),i[1]=xc(e[1]),i[2]=xc(e[2]),i[3]=xc(e[3]))}getExtentGeometry(e,i,n,s=new Nt){return this.getExtent(e,i,n,Ta),s.spatialReference=this.spatialReference,s.xmin=Ta[0],s.ymin=Ta[1],s.xmax=Ta[2],s.ymax=Ta[3],s.zmin=void 0,s.zmax=void 0,s}ensureMaxLod(e){if(e==null)return!1;let i=!1;for(;this.levels.length<=e;){const{resolution:n,scale:s}=this.levels[this.levels.length-1],h=n/2*this.pixelSize;this.levels.push({resolution:n/2,scale:s/2,tileSize:[h,h]}),i=!0}return i}capMaxLod(e){this.levels.length>e+1&&(this.levels.length=e+1)}getMaxLod(){return this.levels.length-1}scaleAtLevel(e){return this.levels[0].scale/2**e}levelAtScale(e){const i=this.levels[0].scale;return e>=i?0:Math.log(i/e)*Math.LOG2E}resolutionAtLevel(e){return this.levels[0].resolution/2**e}compatibleWith(e,i=1/0){if(Gr.checkUnsupported(e))return!1;const n=new Gr(e);if(!n.spatialReference.equals(this.spatialReference)||n.pixelSize!==this.pixelSize)return!1;const s=Math.min(this.levels.length-1,n.levels.length-1,i),h=this.levels[s].resolution;let f=.5*h;return!Ts(n.origin[0],this.origin[0],f)||!Ts(n.origin[1],this.origin[1],f)?!1:(f=.5*h/2**s/this.pixelSize*xge,Ts(h,n.levels[s].resolution,f))}rootTilesInExtent(e,i=null,n=1/0){const s=new Array,h=this.levels[0].tileSize;if(e==null||h[0]===0||h[1]===0)return s;Gr.computeRowColExtent(e,h,this.origin,Ta);let f=Ta[1],m=Ta[3],y=Ta[0],x=Ta[2];const E=x-y,k=m-f;if(E*k>n){const I=Math.floor(Math.sqrt(n));k>I&&(f=f+Math.floor(.5*k)-Math.floor(.5*I),m=f+I),E>I&&(y=y+Math.floor(.5*E)-Math.floor(.5*I),x=y+I)}for(let I=f;I<m;I++)for(let P=y;P<x;P++)s.push([0,I,P]);return i!=null&&(i[0]=this.origin[0]+y*h[0],i[1]=this.origin[1]-m*h[1],i[2]=this.origin[0]+x*h[0],i[3]=this.origin[1]-f*h[1]),s}static computeRowColExtent(e,i,n,s){const h=.001*(e[2]-e[0]+(e[3]-e[1]));s[0]=Math.max(0,Math.floor((e[0]+h-n[0])/i[0])),s[2]=Math.max(0,Math.ceil((e[2]-h-n[0])/i[0])),s[1]=Math.max(0,Math.floor((n[1]-e[3]+h)/i[1])),s[3]=Math.max(0,Math.ceil((n[1]-e[1]-h)/i[1]))}static isPowerOfTwo(e){const i=e.lods,n=i[0].resolution*2**i[0].level;return!i.some(s=>!LX(s.resolution,n/2**s.level))}static hasGapInLevels(e){const i=e.lods.map(n=>n.level);i.sort((n,s)=>n-s);for(let n=1;n<i.length;n++)if(i[n]!==i[0]+n)return!0;return!1}static tileSizeSupported(e){const i=e.size[1];return i===e.size[0]&&!(i&i-1)&&i>=128&&i<=512}static hasOriginPerLODs(e){const i=e.origin;return e.lods.some(n=>n.origin!=null&&(n.origin[0]!==i.x||n.origin[1]!==i.y))}static getMissingTileInfoError(){return new ce("tilingscheme:tile-info-missing","Tiling scheme must have tiling information")}static checkUnsupported(e){return e==null?mM():e.lods.length<1?new ce("tilingscheme:generic","Tiling scheme must have at least one level"):Gr.isPowerOfTwo(e)?Gr.hasGapInLevels(e)?new ce("tilingscheme:gaps","Tiling scheme levels must not have gaps between min and max level"):Gr.tileSizeSupported(e)?Gr.hasOriginPerLODs(e)?new ce("tilingscheme:multiple-origin","Tiling scheme levels must not have their own origin"):null:new ce("tilingscheme:tile-size","Tiles must be square and size must be one of [128, 256, 512]"):new ce("tilingscheme:power-of-two","Tiling scheme must be power of two")}static fromExtent(e,i){const n=e[2]-e[0],s=e[3]-e[1],h=kr(i),f=1.2*Math.max(n,s),m=256,y=f/m,x=y*h*(96/.0254),E=new Gr(new Ug({size:[m,m],origin:new Ne({x:e[0]-.5*(f-n),y:e[3]+.5*(f-s)}),lods:[new ao({level:0,resolution:y,scale:x})],spatialReference:i}));return E.ensureMaxLod(20),E}static makeWebMercatorAuxiliarySphere(e){const i=new Gr(Gr.WebMercatorAuxiliarySphereTileInfo);return i.ensureMaxLod(e),i}static makeGCSWithTileSize(e,i=256,n=16){const s=256/i,h=new Gr(new Ug({size:[i,i],origin:new Ne({x:-180,y:90,spatialReference:e}),spatialReference:e,lods:[new ao({level:0,resolution:.703125*s,scale:295497598570834e-6*s})]}));return h.ensureMaxLod(n),h}get test(){}};function mM(){return new ce("tilingscheme:tile-info-missing","Tiling scheme must have tiling information")}$c.WebMercatorAuxiliarySphereTileInfo=new Ug({size:[256,256],origin:new Ne({x:-20037508342787e-6,y:20037508342787e-6,spatialReference:Ke.WebMercator}),spatialReference:Ke.WebMercator,lods:[new ao({level:0,resolution:156543.03392800014,scale:591657527591555e-6})]}),$c.WebMercatorAuxiliarySphere=$c.makeWebMercatorAuxiliarySphere(19);const Ta=an(),mI=64;DX(C9/10);const Sge=an();$c.WebMercatorAuxiliarySphere.getExtent(0,0,0,Sge);an([-180,-90,180,90]);const Np=Te(),Tge=Te(),jl=Te(),Gl=Te();function Ege(t,e,i=0){const n=t.extent;if(n==null)return!1;if(i===0)return jX(n,e);const s=Math.min(n[2]-n[0],n[3]-n[1]);return GX(n,e,i*s)}function Cv(t,e,i,n){Er(Np,i),Np[n]=e[n];const s=Ei(Np,Np,e),h=Ei(Tge,t,e),f=vt(h,s),m=vt(s,s);let y;y=f<=0?e:m<=f?i:xr(Np,e,Cr(s,s,f/m));const x=Ei(Np,t,y);return Math.PI/2-Math.atan(x[2]/Math.sqrt(x[0]*x[0]+x[1]*x[1]))}function Mge(t,e,i){const n=t.extent;if(n==null)return 0;jl[0]=n[0],jl[1]=n[1],jl[2]=i,Gl[0]=n[2],Gl[1]=n[3],Gl[2]=i;let s=1/0,h=1/0;return e[0]<jl[0]?s=Cv(e,jl,Gl,0):e[0]>Gl[0]&&(s=Cv(e,Gl,jl,0)),e[1]<jl[1]?h=Cv(e,jl,Gl,1):e[1]>Gl[1]&&(h=Cv(e,Gl,jl,1)),Math.min(s,h)}function $ge(t,e,i,n){if(t==null)return mM();const s=t.spatialReference;if(s.isGeographic&&!AU(s))return new ce("tilingscheme:local-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in local scenes");const h=$c.checkUnsupported(t);return h??(i==null?new ce("tilingscheme:extent-not-exist","The layer does not provide a layer extent."):kge(t,i)||(e==null||s.equals(e)||e.isWGS84&&s.isWebMercator?null:new ce("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the local scene")))}function kge(t,e){const i=t.lods,n=i[0].resolution*2**i[0].level,s=[n*t.size[0],n*t.size[1]],h=[t.origin.x,t.origin.y],f=zX(e),m=an();$c.computeRowColExtent(f,s,h,m);const y=(m[2]-m[0])*(m[3]-m[1]);if(y>mI){const x=i[0].scale*2**i[0].level;let E=Math.max((f[3]-f[1])/t.size[1],(f[2]-f[0])/t.size[0])*x/n;const k=Math.floor(Math.log(E)/Math.log(10));return E=Math.ceil(E/10**k)*10**k,new ce("tilingscheme:too-many-root-tiles","Scale of level 0 of the tiling scheme (1:"+Math.floor(x).toLocaleString()+") is too large for the layer's extent. Suggested scale: 1:"+E.toLocaleString()+".",{level0Scale:x,suggestedLevel0Scale:E,requiredNumRootTiles:y,allowedNumRootTiles:mI})}return null}const Cge=Object.freeze(Object.defineProperty({__proto__:null,checkIfTileInfoSupportedForViewSR:$ge,isInsideExtent:Ege,tiltToExtentEdge:Mge},Symbol.toStringTag,{value:"Module"}));function Ige(){return!0}function Age(){return 0}function Oge(t,e,i,n){if(t==null)return mM();const s=(t==null?void 0:t.lods.length)-1,h=t.spatialReference;if(h.isWebMercator){if(!$c.makeWebMercatorAuxiliarySphere(s).compatibleWith(t,n))return new ce("tilingscheme:incompatible-global-web-mercator","The tiling scheme is not compatible with the ArcGIS Online Web Mercator tiling scheme")}else{if(!_ge(h))return new ce("tilingscheme:global-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in global scenes");if(!$c.makeGCSWithTileSize(t.spatialReference,t.size[0],s).compatibleWith(t,n))return t.spatialReference.isWGS84?new ce("tilingscheme:incompatible-global-wgs84","The tiling scheme is not compatible with the ArcGIS Online WGS84 tiling scheme"):new ce("tilingscheme:incompatible-global","The tiling scheme is not compatible with the ArcGIS Online tiling scheme")}return e==null||t.spatialReference.equals(e)?null:new ce("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the global scene")}const Pge=Object.freeze(Object.defineProperty({__proto__:null,checkIfTileInfoSupportedForViewSR:Oge,isInsideExtent:Ige,tiltToExtentEdge:Age},Symbol.toStringTag,{value:"Module"})),Rge={[pa.Global]:Pge,[pa.Local]:Cge};function f6(t,e,i,n,s){return Rge[n].checkIfTileInfoSupportedForViewSR(t,i,e,s)}function Nge(t,e,i){const n=dse(t);if(n!=null){if(!Pe.isCollection(n))return{tileInfo:n.tileInfo,fullExtent:n.fullExtent};{const s=n.find(h=>f6(h.tileInfo,h.fullExtent,e,i)==null);if(s)return{tileInfo:s.tileInfo,fullExtent:s.fullExtent}}}return{tileInfo:null,fullExtent:null}}rl.NORTH,rl.EAST,rl.SOUTH,rl.WEST;rl.NORTH_EAST,rl.SOUTH_EAST,rl.SOUTH_WEST,rl.NORTH_WEST;function Lge(t,e){return t!=null&&(e==null||(e===pa.Local?!t.isGeographic||t.isWGS84||t.wkid===co.CGCS2000:t.isWebMercator||t.isWGS84||t.wkid===co.CGCS2000||t.wkid===co.GCSMARS2000||t.wkid===co.GCSMARS2000_SPHERE||t.wkid===co.GCSMOON2000))}async function Dge(t,e={}){const{basemap:i,view:n}=t;await i.load(e),Fge(i),await Gge(i,n,e),Jt(e)}async function zge(t,e={}){var m,y;const{basemap:i,view:n}=t;Jt(e);const s=(m=i.baseLayers.find(x=>x.type==="unknown"))==null?void 0:m.loadError;if(s!=null)throw s;if(!n||"spatialReferenceLocked"in n&&!n.spatialReferenceLocked||(await i.load(e),Jt(e),i.baseLayers.length===0))return;const h=i.baseLayers.at(0);if(!hse(h))return;if(i.spatialReference){if(n.spatialReference.equals(i.spatialReference))return;yI()}await h.load(e),Jt(e);const f=(("supportedSpatialReferences"in h?h.supportedSpatialReferences:null)||["tileInfo"in h?(y=h.tileInfo)==null?void 0:y.spatialReference:null]).filter(Yi);f.length!==0&&f.every(x=>!n.spatialReference.equals(x))&&yI()}function yI(){throw new ce("basemap-compatibility:incompatible-spatial-reference","Basemap spatial reference is not compatible with the view")}function Fge(t){if(t.baseLayers.length===0&&t.referenceLayers.length===0)return;const e=t.baseLayers.concat(t.referenceLayers).toArray().filter(i=>!rse(i)).map(i=>jge(i));if(e.length)throw e[0]}function jge(t){return new ce("basemap-compatibility:unsupported-basemap-layer-type","Unsupported basemap layer type ${operationalLayerType}",{layer:t,operationalLayerType:t.operationalLayerType||"unknown"})}async function Gge(t,e,i){if(t.baseLayers.length===0)return;const n=t.baseLayers.at(0);if(lz(n)){try{await n.load(i)}catch(s){const h="basemap-compatibility:unknown-error",f="Unknown basemap compatibility error",{name:m=h,message:y=f,details:x}=s;throw new ce(m,y,x)}Uge(n,e)}}function Uge(t,e){var m;const i=e.state.viewingMode;if(!i)return;let n,s;if((t==null?void 0:t.type)==="wmts"){const y=Nge(t,e.spatialReference,i);if(y.tileInfo==null)throw new ce("basemapgalleryitem:tiling-scheme-incompatible","Basemap tiling scheme is incompatible with the view");n=y.tileInfo,s=y.fullExtent}else n=t.tileInfo,s=t.fullExtent;if(n==null)return;if(!Lge(n.spatialReference,i))throw new ce(`basemapgalleryitem:spatial-reference-unsupported-${Pk(i)}`,`Basemap spatial reference is unsupported in ${Pk(i)} mode`);const h=(t==null?void 0:t.type)==="vector-tile"?n.getCompatibleForVTL(256):null;if(i===pa.Global){let y=f6(n,s,null,i);if(y&&(t==null?void 0:t.type)==="vector-tile"&&s!=null&&h&&!f6(h,s,null,i)&&(y=null),y){const x=n.spatialReference.isWebMercator?"web-mercator":"wgs84";throw new ce(`basemapgalleryitem:tiling-scheme-unsupported-${x}-global`,"Basemap tiling scheme is unsupported in global mode",{error:y})}}else if($c.checkUnsupported(n))throw new ce("basemapgalleryitem:tiling-scheme-unsupported-local","Basemap tiling scheme is unsupported in local mode");const f=(m=e.basemapTerrain)==null?void 0:m.tilingScheme;if(f&&!f.compatibleWith(n)&&((t==null?void 0:t.type)!=="vector-tile"||!h||!f.compatibleWith(h)))throw new ce("basemapgalleryitem:tiling-scheme-incompatible","Basemap tiling scheme is incompatible with the view")}let Ga=class extends fp(Oe){constructor(e){super(e),this.compatibilityFunction=null,this.error=null,this.state="loading",this.view=null}initialize(){const e=()=>this.refresh();this.addHandles([Ee(()=>{var i;return(i=this.basemap)==null?void 0:i.loadStatus},e),Ee(()=>this.compatibilityFunction,e),Ee(()=>{var i;return this.view&&"basemapTerrain"in this.view&&((i=this.view.basemapTerrain)==null?void 0:i.tilingScheme)},e),Ee(()=>{var i;return(i=this.view)==null?void 0:i.ready},e),Ee(()=>{var i;return(i=this.view)==null?void 0:i.spatialReference},e)]),this.refresh()}destroy(){this._cancelRefresh(),this.basemap=null,this.compatibilityFunction=null,this.view=null}get _spatialReferenceTask(){return Koe(this.view,this.basemap)}set basemap(e){e&&e.load().catch(()=>{}),this._set("basemap",e)}get spatialReference(){return this._spatialReferenceTask.spatialReference}refresh(){var s;this._cancelRefresh(),this._set("state","loading");const e=(s=this.basemap)==null?void 0:s.loadStatus;if(e!=="loaded"&&e!=="failed")return;if(!this.compatibilityFunction)return void(e==="loaded"?(this._set("state","ready"),this._set("error",null)):(this._set("state","error"),this._set("error",this.basemap.loadError)));const i=new AbortController,{signal:n}=i;this.compatibilityFunction(this,{signal:n}).then(()=>su(()=>!this._spatialReferenceTask.updating,n)).then(()=>{this._set("state","ready"),this._set("error",null)}).catch(h=>{Ir(h)||(this._set("state","error"),this._set("error",h))}),this._refreshController=i}_cancelRefresh(){this._refreshController&&(this._refreshController.abort(),this._refreshController=null)}};_([S({readOnly:!0})],Ga.prototype,"_spatialReferenceTask",null),_([S()],Ga.prototype,"basemap",null),_([S()],Ga.prototype,"compatibilityFunction",void 0),_([S({readOnly:!0})],Ga.prototype,"error",void 0),_([S({readOnly:!0})],Ga.prototype,"spatialReference",null),_([S({readOnly:!0})],Ga.prototype,"state",void 0),_([S()],Ga.prototype,"view",void 0),Ga=_([J("esri.widgets.BasemapGallery.support.BasemapGalleryItem")],Ga);const OU=Ga,PU=Pe.ofType(Yh);let _g=class extends Oe{constructor(e){super(e),this.basemaps=new PU}destroy(){this.basemaps.forEach(e=>e.destroy())}get state(){return"ready"}refresh(){}};_([S({type:PU})],_g.prototype,"basemaps",void 0),_([S({readOnly:!0})],_g.prototype,"state",null),_g=_([J("esri.widgets.BasemapGallery.support.LocalBasemapsSource")],_g);const RU=_g,NU=Pe.ofType(Yh);let Ua=class extends da.LoadableMixin(D3(RU)){constructor(e){super(e),this._lastPortalBasemapFetchController=null,this.basemaps=new NU,this.filterFunction=null,this.portal=es.getDefault(),this.query=null,this.updateBasemapsCallback=null,this.viewType=null}initialize(){this.addHandles(Ee(()=>{var e,i,n;return[this.filterFunction,this.loadStatus,(e=this.portal)==null?void 0:e.basemapGalleryGroupQuery,(i=this.portal)==null?void 0:i.basemapGalleryGroupQuery3D,(n=this.portal)==null?void 0:n.user,this.query,this.updateBasemapsCallback]},()=>this.refresh(),Ct))}destroy(){this.filterFunction=null,this.portal=null,this.basemaps.forEach(e=>e.destroy())}get state(){return this.loadStatus==="not-loaded"?"not-loaded":this.loadStatus==="loading"||this._lastPortalBasemapFetchController?"loading":"ready"}load(e){return this.addResolvingPromise(this.portal.load(e)),Promise.resolve(this)}async refresh(){if(this.loadStatus!=="loaded")return;this._lastPortalBasemapFetchController&&(this._lastPortalBasemapFetchController.abort(),this._lastPortalBasemapFetchController=null);const e=this.portal,i=new AbortController;this._lastPortalBasemapFetchController=i,this.notifyChange("state");try{const n=await e.fetchBasemaps(this._toQueryString(this.query),{signal:i.signal,include3d:this.viewType==="3d"||void 0});await this._updateBasemaps(n)}catch(n){if(Ir(n))throw n;Ae.getLogger(this).warn(new ce("basemap-source:fetch-basemaps-error","Could not fetch basemaps from portal.",{error:n})),await this._updateBasemaps()}this._lastPortalBasemapFetchController=null,this.notifyChange("state")}_toQueryString(e){return e&&typeof e!="string"?Object.keys(e).map(i=>`${i}:${e[i]}`).join(" AND "):e}async _updateBasemaps(e=[]){let i=await this._filterBasemaps(e);i=this.updateBasemapsCallback?await this.updateBasemapsCallback(i):i,this.basemaps.removeAll(),this.basemaps.addMany(i)}async _filterBasemaps(e){if(!this.filterFunction)return e;const i=e.map(this.filterFunction),n=await Promise.all(i);return e.filter((s,h)=>n[h])}};_([S({readOnly:!0,type:NU})],Ua.prototype,"basemaps",void 0),_([S()],Ua.prototype,"filterFunction",void 0),_([S({type:es})],Ua.prototype,"portal",void 0),_([S()],Ua.prototype,"query",void 0),_([S({readOnly:!0})],Ua.prototype,"state",null),_([S()],Ua.prototype,"updateBasemapsCallback",void 0),_([S()],Ua.prototype,"viewType",void 0),Ua=_([J("esri.widgets.BasemapGallery.support.PortalBasemapsSource")],Ua);const xg=Ua,LU=Pe.ofType(OU);function Bge(t){return t&&t.declaredClass==="esri.portal.Portal"}function Hge(t){return t&&!(t instanceof xg)&&(!!t.portal||!!t.query)}function Vge(t){return t&&"basemaps"in t&&"state"in t&&"refresh"in t}let Qs=class extends da{constructor(e){super(e),this._loadingProjectionEngine=!1,this.items=new LU,this.source=new xg,this.view=null}initialize(){const e=()=>this._recreateItems();this.addHandles([Ee(()=>this.state==="ready"?this.compatibilityFunction:null,()=>this._updateItems()),Ns(()=>{var i;return(i=this.source)==null?void 0:i.basemaps},"change",e,{onListenerAdd:e}),ur(()=>this.view,()=>{var i;this.source instanceof xg&&(this.source.viewType=(i=this.view)==null?void 0:i.type)},{once:!0})])}destroy(){var i;const e=this.source.basemaps.find(n=>n===this.activeBasemap);e&&this.source.basemaps.remove(e),(i=this.source)==null||i.destroy()}get activeBasemap(){var e,i;return((i=(e=this.view)==null?void 0:e.map)==null?void 0:i.basemap)??null}set activeBasemap(e){var h,f;const i=this.view;if(!(i!=null&&i.map))return;const n=typeof e=="string"?Yh.fromId(e):e;if(!n||!i.ready)return i.map.basemap=n,void this._clearOverride("activeBasemap");const s=n.spatialReference||((f=(h=this.items)==null?void 0:h.find(m=>this.basemapEquals(n,m.basemap)))==null?void 0:f.spatialReference);if(s&&"spatialReferenceLocked"in i&&!i.spatialReferenceLocked){const m=i.spatialReference;if(s!=null&&!Ai(m,s)&&!Ls(i.spatialReference,s)&&!$l())return this._override("activeBasemap",n),this._loadingProjectionEngine=!0,void vl().then(()=>{this._get("activeBasemap")===e&&(i.map.basemap=e,i.spatialReference=s,this._clearOverride("activeBasemap"))},()=>{}).then(()=>{this._loadingProjectionEngine=!1});i.map.basemap=n,this._clearOverride("activeBasemap"),s==null||Ai(i.spatialReference,s)||(i.spatialReference=s)}else i.map.basemap=n,this._clearOverride("activeBasemap")}get activeBasemapIndex(){const{state:e,activeBasemap:i}=this;return e!=="ready"?-1:this._findBasemapIndex(i)}get compatibilityFunction(){var e;return((e=this.view)==null?void 0:e.type)==="3d"?Dge:zge}set compatibilityFunction(e){this._overrideIfSome("compatibilityFunction",e)}castSource(e){return Array.isArray(e)||Pe.isCollection(e)?new RU({basemaps:Array.isArray(e)?new Pe(e):e}):Bge(e)?new xg({portal:e}):Hge(e)?new xg(e):Vge(e)?e:null}get state(){var e;return(e=this.view)!=null&&e.ready&&this.source?p6(this.view)&&!this.view.inGeographicLayout?"unsupported":this._loadingProjectionEngine?"loading":"ready":"disabled"}basemapEquals(e,i){return Woe(e,i)}refresh(){this._recreateItems()}load(){return this.loadSource()}loadSource(e){return this.addResolvingPromise(da.isLoadable(this.source)?this.source.load(e):null),Promise.resolve(this)}_findBasemapIndex(e){const{items:i}=this,n=i.findIndex(s=>s.basemap===e);return n===-1?i.findIndex(s=>this.basemapEquals(s.basemap,e)):n}_recreateItems(){var f;const e=((f=this.source)==null?void 0:f.basemaps)??[],{view:i,compatibilityFunction:n}=this,s=new Map(this.items.map(m=>[m.basemap,m])),h=e.map(m=>{const y=s.get(m);return y?(s.delete(m),y):new OU({basemap:m,compatibilityFunction:n,view:i})});this.items.removeAll(),this.items.addMany(h),s.forEach(m=>m.destroy())}_updateItems(){for(const e of this.items)e.compatibilityFunction=this.compatibilityFunction,e.view=this.view}};_([S()],Qs.prototype,"_loadingProjectionEngine",void 0),_([S()],Qs.prototype,"activeBasemap",null),_([S({readOnly:!0})],Qs.prototype,"activeBasemapIndex",null),_([S()],Qs.prototype,"compatibilityFunction",null),_([S({readOnly:!0,type:LU})],Qs.prototype,"items",void 0),_([S()],Qs.prototype,"source",void 0),_([Hi("source")],Qs.prototype,"castSource",null),_([S({readOnly:!0})],Qs.prototype,"state",null),_([S()],Qs.prototype,"view",void 0),Qs=_([J("esri.widgets.BasemapGallery.BasemapGalleryViewModel")],Qs);const qge=Qs,ss="esri-basemap-gallery",os={base:ss,sourceLoading:`${ss}--source-loading`,layoutGrid:`${ss}--grid`,narrowItems:`${ss}--narrow-items`,loader:`${ss}__loader`,item:`${ss}__item`,itemContainer:`${ss}__item-container`,itemContent:`${ss}__item-content`,itemTitle:`${ss}__item-title`,itemTagsContainer:`${ss}__item-tags-container`,itemThumbnail:`${ss}__item-thumbnail`,selectedItem:`${ss}__item--selected`,itemError:`${ss}__item--error`};function vI({level:t,class:e,...i},n){const s=DU(t);return re(`h${s}`,{...i,"aria-level":String(s),class:GD(Qe.heading,e),role:"heading"},n)}function DU(t){return hr(Math.ceil(t),1,6)}function ZIe(t,e=1){return DU(t+e)}const Iv={small:200,default:280,wide:420};let Jn=class extends is{constructor(e,i){super(e,i),this.disabled=!1,this.headingLevel=2,this.messages=null,this.viewModel=new qge,this._focusBasemapItemEnabled=!1,this._container=null,this._width=0,this._onContainerCreated=n=>{this._container=n}}initialize(){this.addHandles([nre(()=>this._container,({contentRect:e})=>{this._width=e.width}),ur(()=>this.source,()=>this.viewModel.loadSource(),{sync:!0,initial:!0})])}loadDependencies(){return Cl({scrim:()=>ge(()=>import("./calcite-scrim-BiqeZl0a.js"),[],import.meta.url),chip:()=>ge(()=>import("./calcite-chip-Kx1HzONf.js"),[],import.meta.url)})}get activeBasemap(){return this.viewModel.activeBasemap}set activeBasemap(e){this.viewModel.activeBasemap=e}get icon(){return"basemap"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get source(){return this.viewModel.source}set source(e){this.viewModel.source=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e=this.source.state==="loading",i=this.disabled||this.viewModel.state==="disabled",n={[os.sourceLoading]:e,[Qe.disabled]:i},s=this._width;s<=Iv.small||s>=Iv.wide?n[os.layoutGrid]=!0:s<Iv.default&&(n[os.narrowItems]=!0);const h=this._getContext();return re("div",{afterCreate:this._onContainerCreated,class:this.classes(os.base,Qe.widget,Qe.panel,n),key:"container",styles:{"--esri-basemap-gallery-small":`${Iv.small}px`}},this._width===0?null:h)}_getContext(){if(this.viewModel.state==="unsupported")return re("div",{class:Qe.empty,key:"empty-message"},re(vI,{level:this.headingLevel},this.messages.unsupported));if(this.source.state==="loading")return re("div",{class:os.loader,key:"loader"});const e=this.viewModel.items;return e.length>0?re("ul",{"aria-disabled":this.disabled,"aria-label":this.label,bind:this,class:os.itemContainer,key:"item-container",onkeydown:this._handleKeyDown,role:"radiogroup"},e.map((i,n)=>this._renderBasemapGalleryItem(i,n)).toArray()):re("div",{class:Qe.empty,key:"empty-message"},re(vI,{level:this.headingLevel},this.messages.noBasemaps))}_getRoundRobinIndex(e,i){return(e+i)%i}_handleKeyDown(e){const{key:i}=e;if(!["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(i))return;e.preventDefault();const{items:n,activeBasemapIndex:s}=this.viewModel,h=i==="ArrowUp"||i==="ArrowLeft"?this._getRoundRobinIndex(Math.max(s-1,-1),n.length):this._getRoundRobinIndex(s+1,n.length),f=n.at(h);(f==null?void 0:f.state)==="ready"&&(this.viewModel.activeBasemap=f.basemap),this._focusBasemapItemEnabled=!0}_focusBasemapItem(e){this._focusBasemapItemEnabled&&e.tabIndex===0&&(e.focus(),this._focusBasemapItemEnabled=!1)}_handleClick(e){const i=e.currentTarget["data-item"];i.state==="ready"&&(this.viewModel.activeBasemap=i.basemap)}_renderBasemapGalleryItem(e,i){var D,j;const n=Xoe(e.basemap)||xt("esri/themes/base/images/basemap-toggle-64.svg"),s=e.basemap.title,h=(D=e.basemap.portalItem)==null?void 0:D.snippet,f=((j=e.error)==null?void 0:j.message)||h||s,{viewModel:{state:m,activeBasemapIndex:y}}=this,x=this.disabled||m==="disabled",E=y===i,k=E||y===-1&&i===0?0:-1,I=m==="loading",P={[os.selectedItem]:E,[os.itemError]:e.state==="error"},L=`basemapgallery-item-${e.uid}`;return re("li",{afterUpdate:this._focusBasemapItem,"aria-checked":E.toString(),"aria-disabled":x.toString(),"aria-labelledby":L,bind:this,class:this.classes(os.item,P),"data-item":e,key:e.uid,onclick:this._handleClick,onkeydown:this._handleClick,role:"radio",tabIndex:k,title:f},re("img",{alt:"",class:os.itemThumbnail,src:n}),re("div",{class:os.itemContent,key:"content"},re("div",{class:os.itemTitle,key:"title"},re("span",{id:L},s)),Hoe(e.basemap)?this._renderTags(e.basemap):null),e.state==="loading"||E&&I?re("calcite-scrim",null,re("span",{"aria-hidden":"true",class:Qe.loaderAnimation,key:"loader",role:"presentation"})):null)}_renderTags(e){return re("div",{class:os.itemTagsContainer,key:"tag"},this._render3DTag(),Voe(e)?this._renderBetaTag():null)}_render3DTag(){const{messages:e}=this;return re("calcite-chip",{key:"tag-3d",scale:"s",value:e.tag3D},this.messages.tag3D)}_renderBetaTag(){const{messages:e}=this;return re("calcite-chip",{appearance:"outline-fill",key:"tag-beta",scale:"s",value:e.tagBeta},this.messages.tagBeta)}};_([S()],Jn.prototype,"activeBasemap",null),_([S()],Jn.prototype,"disabled",void 0),_([S()],Jn.prototype,"headingLevel",void 0),_([S()],Jn.prototype,"icon",null),_([S()],Jn.prototype,"label",null),_([S(),Gn("esri/widgets/BasemapGallery/t9n/BasemapGallery")],Jn.prototype,"messages",void 0),_([S()],Jn.prototype,"source",null),_([S()],Jn.prototype,"view",null),_([S()],Jn.prototype,"viewModel",void 0),_([S()],Jn.prototype,"_focusBasemapItemEnabled",void 0),_([S()],Jn.prototype,"_container",void 0),_([S()],Jn.prototype,"_width",void 0),_([$w()],Jn.prototype,"_handleClick",null),Jn=_([J("esri.widgets.BasemapGallery")],Jn);const Wge=Jn;function Kge(t){var s,h;const e="metric";if(t==null)return e;const i=t.map,n=(i&&"portalItem"in i?(s=i.portalItem)==null?void 0:s.portal:null)??es.getDefault();switch(((h=n.user)==null?void 0:h.units)??n.units){case e:return e;case"english":return"imperial"}return UY(t.spatialReference)??e}const Zge={readOnly:!0,get(){return Kge(this.view)}};let Ba=class extends Oe{constructor(e){super(e),this.activeTool=null,this.activeViewModel=null,this.view=null}get areaUnit(){return this.defaultUnit}set areaUnit(e){this._overrideIfSome("areaUnit",e)}get linearUnit(){return this.defaultUnit}set linearUnit(e){this._overrideIfSome("linearUnit",e)}get state(){const{activeViewModel:e}=this;return e?e.state:"disabled"}};_([S({type:["area","distance","direct-line"]})],Ba.prototype,"activeTool",void 0),_([S()],Ba.prototype,"activeViewModel",void 0),_([S({type:LY})],Ba.prototype,"areaUnit",null),_([S(Zge)],Ba.prototype,"defaultUnit",void 0),_([S({type:jT})],Ba.prototype,"linearUnit",null),_([S({readOnly:!0})],Ba.prototype,"state",null),_([S()],Ba.prototype,"view",void 0),Ba=_([J("esri.widgets.Measurement.MeasurementViewModel")],Ba);const zU=Ba,Jge={base:"esri-measurement"};function Yge(t){return(t==null?void 0:t.declaredClass)==="esri.widgets.AreaMeasurement2D"||(t==null?void 0:t.declaredClass)==="esri.widgets.AreaMeasurement3D"}let Us=class extends is{constructor(e,i){super(e,i),this._widgets=new Map,this.activeWidget=null,this.messages=null,this.viewModel=new zU}initialize(){this.activeWidget&&this.viewModel.set("activeViewModel",this.activeWidget.viewModel),this.view&&this.activeTool&&this._getActiveWidget().then(e=>{this._set("activeWidget",e)}),this.addHandles([Ee(()=>[this.view,this.activeTool],async()=>{this._set("activeWidget",await this._getActiveWidget())}),Ee(()=>this.activeWidget,(e,i)=>{this.viewModel.set("activeViewModel",e?e.viewModel:null),i&&(i.visible=!1)}),Ee(()=>[this.areaUnit,this.linearUnit,this.uiStrings],()=>this._updateSubWidgetProperties())])}destroy(){this._destroyWidgets()}get activeTool(){return this.viewModel.activeTool}set activeTool(e){this.viewModel.activeTool=e}get areaUnit(){return this.viewModel.areaUnit}set areaUnit(e){this.viewModel.areaUnit=e}get icon(){return"measure"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get linearUnit(){return this.viewModel.linearUnit}set linearUnit(e){this.viewModel.linearUnit=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const{activeWidget:e}=this,i=e&&!e.destroyed?e.render():null;return re("div",{class:Jge.base},i)}clear(){this.activeTool=null,this._destroyWidgets()}startMeasurement(){const{activeViewModel:e}=this.viewModel;e&&Yr(e.start())}async _createWidget(e){const{areaUnit:i,linearUnit:n,view:s}=this;if(!s)return null;switch(e){case"area":{const{type:h}=s;switch(h){case"2d":return new(await ge(async()=>{const{default:f}=await import("./AreaMeasurement2D-CQV06spj.js");return{default:f}},__vite__mapDeps([283,104,145,60,284,71,285,286,287,288,81,34,289]),import.meta.url)).default({view:s,unit:i,uiStrings:this._createUIStringsForWidget(e)});case"3d":return new(await ge(async()=>{const{default:f}=await import("./AreaMeasurement3D-BVTIlml3.js");return{default:f}},__vite__mapDeps([290,291,292,289,293,104,110,40,109,294,99,50,51,129,117,116,44,130,131,83,132,133,134,38,43,135,139,140,141,95,37,39,114,136,137,45,46,138,73,295,296,285,286]),import.meta.url)).default({view:s,unit:i,uiStrings:this._createUIStringsForWidget(e)});default:return null}}case"distance":{const{type:h}=s;return h==="2d"?new(await ge(async()=>{const{default:f}=await import("./DistanceMeasurement2D-DU6b2sA2.js");return{default:f}},__vite__mapDeps([297,104,145,60,284,71,285,286,287,288,81,34,289]),import.meta.url)).default({view:s,unit:n,uiStrings:this._createUIStringsForWidget(e)}):null}case"direct-line":{const{type:h}=s;return h==="3d"?new(await ge(async()=>{const{default:f}=await import("./DirectLineMeasurement3D-CQOD5UCV.js");return{default:f}},__vite__mapDeps([298,291,292,289,293,104,110,40,109,294,99,50,51,129,117,116,44,130,131,83,132,133,134,38,43,135,139,140,141,95,37,39,114,136,137,45,46,138,73,295,296,285,286]),import.meta.url)).default({view:s,unit:n,uiStrings:this._createUIStringsForWidget(e)}):null}default:return null}}_destroyWidgets(){this._widgets.forEach(e=>e.destroy()),this._widgets.clear()}async _getActiveWidget(){const{activeTool:e,view:i}=this;if(!i||!e)return null;let n=null;if(this._widgets.has(e))n=this._widgets.get(e),n.visible=!0;else{if(n=await this._createWidget(e),!n)return null;await n.viewModel.start(),this._widgets.set(e,n)}return n}_createUIStringsForWidget(e){var n;if(!this.uiStrings)return;const i=e+"-"+((n=this.view)==null?void 0:n.type);return this.uiStrings[i]}_updateSubWidgetProperties(){this._widgets.forEach((e,i)=>{const{areaUnit:n,linearUnit:s}=this;e.unit=Yge(e)?n:s,e.uiStrings=this._createUIStringsForWidget(i)})}};_([S()],Us.prototype,"activeTool",null),_([S({readOnly:!0})],Us.prototype,"activeWidget",void 0),_([S()],Us.prototype,"areaUnit",null),_([S()],Us.prototype,"icon",null),_([S()],Us.prototype,"label",null),_([S()],Us.prototype,"linearUnit",null),_([S(),Gn("esri/widgets/Measurement/t9n/Measurement")],Us.prototype,"messages",void 0),_([S()],Us.prototype,"uiStrings",void 0),_([S()],Us.prototype,"view",null),_([S({type:zU})],Us.prototype,"viewModel",void 0),Us=_([J("esri.widgets.Measurement")],Us);let _h=class extends Oe{constructor(e){super(e),this._viewpointHandle=null,this.group=null}initialize(){this.addHandles(Ns(()=>{var e;return(e=this.view)==null?void 0:e.ui},"expand",e=>{const{target:i}=e;i&&i!==this&&i.expanded&&i.group&&i.group===this.group&&this._collapse()}))}destroy(){this._viewpointHandle=null,this.view=null}set autoCollapse(e){this._set("autoCollapse",e),this._watchViewpoint()}set expanded(e){var s;const i=!!e;this._set("expanded",i);const n=(s=this.view)==null?void 0:s.ui;n&&n.emit("expand",{target:this}),this._viewpointHandleChange(i)}get state(){var e;return(e=this.view)!=null&&e.ready?"ready":"disabled"}set view(e){this._get("view")!==e&&(this._set("view",e),e&&ur(()=>e.ready,()=>{this.view===e&&this._watchViewpoint()},{once:!0,initial:!0}))}_viewpointHandleChange(e){this._viewpointHandle&&(e?ur(()=>{var i;return(i=this.view)==null?void 0:i.stationary},()=>{var i;return(i=this._viewpointHandle)==null?void 0:i.resume()},{once:!0,initial:!0}):this._viewpointHandle.pause())}_watchViewpoint(){const e="viewpoint";this.removeHandles(e),this._viewpointHandle=null;const{autoCollapse:i,view:n}=this;if(!n||!i)return;const s=yQ(()=>n.type==="3d"?n.camera:n.viewpoint,()=>this._collapse());this.addHandles(s,e),this._viewpointHandle=s}_collapse(){this.expanded=!1}};_([S({value:!1})],_h.prototype,"autoCollapse",null),_([S({value:!1})],_h.prototype,"expanded",null),_([S()],_h.prototype,"group",void 0),_([S({readOnly:!0})],_h.prototype,"state",null),_([S({value:null})],_h.prototype,"view",null),_h=_([J("esri.widgets.Expand.ExpandViewModel")],_h);const FU=_h;function jU(t){return e=>{e.hasOwnProperty("_delegatedEventNames")||(e._delegatedEventNames=e._delegatedEventNames?e._delegatedEventNames.slice():[]);const i=e._delegatedEventNames,n=Array.isArray(t)?t:Xge(t);i.push(...n)}}function Xge(t){return t.split(",").map(e=>e.trim())}function Xg(t){return t&&typeof t.render=="function"}function Qge(t){return t&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}const Bs="esri-expand",as={base:Bs,toggle:`${Bs}__toggle`,popoverContent:`${Bs}__popover-content`,panel:`${Bs}__panel`,panelContent:`${Bs}__panel-content`,sheet:`${Bs}__sheet`,panelIconNumber:`${Bs}__panel-icon-number`,contentContainer:`${Bs}__content-container`,icon:"esri-collapse__icon",iconFlip:"esri-collapse__icon-flip",iconExpanded:`${Bs}__icon--expanded`,iconNumber:`${Bs}__icon-number`,content:`${Bs}__content`,contentExpanded:`${Bs}__content--expanded`},bI="chevrons-left",wI="chevrons-right";let $i=class extends is{constructor(e,i){super(e,i),this.closeOnEsc=!0,this.collapseTooltip="",this.content="",this.expandTooltip="",this.iconNumber=0,this.messages=null,this.messagesCommon=null,this.mode="auto",this.placement=null,this.viewModel=new FU,this.toggle=()=>{this.viewModel.expanded=!this.viewModel.expanded},this._handlePopoverClose=n=>{n.target===this._popoverEl&&(this.viewModel.expanded=n.target.open)},this._handleSheetClose=n=>{this.viewModel.expanded=n.target.open},this._handlePanelClose=n=>{this.viewModel.expanded=!n.target.closed},this._handleKeyDown=n=>{this.viewModel.expanded&&n.key==="Escape"&&!this._willCloseOnEsc(n)&&n.preventDefault()},this._storeToggleActionEl=n=>{this._toggleActionEl=n},this._storePopoverEl=n=>{this._popoverEl=n}}loadDependencies(){return Cl({action:()=>ge(()=>import("./calcite-action-DiQIcL0L.js"),[],import.meta.url),icon:()=>ge(()=>import("./calcite-icon-CWxO1up_.js"),[],import.meta.url),panel:()=>ge(()=>import("./calcite-panel-D-cPxrQr.js"),[],import.meta.url),popover:()=>ge(()=>import("./calcite-popover-CdLFZrZN.js"),[],import.meta.url),sheet:()=>ge(()=>import("./calcite-sheet-BHvs-j6D.js"),[],import.meta.url)})}get expandTitle(){const{expanded:e,messagesCommon:i,collapseTooltip:n,expandTooltip:s}=this;return(e?n||(i==null?void 0:i.collapse):s||(i==null?void 0:i.expand))??""}get _displaySheet(){var e;switch(this.mode){case"drawer":return!0;case"auto":return((e=this.viewModel.view)==null?void 0:e.widthBreakpoint)==="xsmall";default:return!1}}get autoCollapse(){return this.viewModel.autoCollapse}set autoCollapse(e){this.viewModel.autoCollapse=e}get collapseIcon(){return wI}set collapseIcon(e){this._overrideIfSome("collapseIcon",e)}get expanded(){return this.viewModel.expanded}set expanded(e){this.viewModel.expanded=e}get expandIcon(){return Xg(this.content)?this.content.icon:bI}set expandIcon(e){this._overrideIfSome("expandIcon",e)}get group(){return this.viewModel.group}set group(e){this.viewModel.group=e}get icon(){return null}get label(){var e;return(Xg(this.content)?this.content.label:null)??((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}expand(){this.viewModel.expanded=!0}collapse(){this.viewModel.expanded=!1}render(){const{_displaySheet:e,_toggleActionEl:i,viewModel:{expanded:n},label:s,placement:h}=this;return re("div",{class:this.classes(as.base,Qe.widget)},this._renderToggle(),e?re("calcite-sheet",{class:as.sheet,heightScale:"l",label:s,onkeydown:this._handleKeyDown,open:n,position:"block-end",onCalciteSheetClose:this._handleSheetClose},re("calcite-panel",{class:as.panel,closable:!0,closed:!n,heading:s,onkeydown:this._handleKeyDown,onCalcitePanelClose:this._handlePanelClose},re("div",{class:as.panelContent},this._renderContent()))):i?re("calcite-popover",{afterCreate:this._storePopoverEl,afterUpdate:this._storePopoverEl,label:s,onkeydown:this._handleKeyDown,open:n,overlayPositioning:"fixed",placement:h??this._getPlacement(),referenceElement:i,onCalcitePopoverClose:this._handlePopoverClose},re("div",{class:as.popoverContent},this._renderContent())):null)}_getPlacement(){const{container:e,view:i}=this,n=e&&i?i.ui.getPosition(e):null;if(!n||n==="manual")return"auto";const[s,h]=n.split("-");return`${h==="right"?"left":"right"}-${s==="bottom"?"end":"start"}`}_willCloseOnEsc(e){const{closeOnEsc:i}=this;return typeof i=="function"?i(e):i}_renderBadgeNumber(){const{expanded:e,iconNumber:i}=this;return i&&!e?re("span",{class:as.iconNumber,key:"expand__icon-number"},i):null}_renderToggleButton(){const{expanded:e,expandTitle:i,expandIcon:n,collapseIcon:s}=this,h=e?s:n,f=h===bI||h===wI;return re("calcite-action",{afterCreate:this._storeToggleActionEl,afterUpdate:this._storeToggleActionEl,class:Qe.widgetButton,onclick:this.toggle,scale:"s",text:i,title:i},h?re("calcite-icon",{class:this.classes(as.icon,f&&as.iconFlip),icon:h,scale:"s"}):null)}_renderToggle(){return re("div",{class:as.toggle},this._renderToggleButton(),this._renderBadgeNumber())}_renderContent(){const{content:e}=this;return typeof e=="string"?re("div",{class:as.contentContainer,innerHTML:e,key:"content__string"}):Xg(e)?re("div",{class:as.contentContainer,key:"content__widget"},e.render()):e instanceof HTMLElement?re("div",{afterCreate:this._attachToNode,bind:e,class:as.contentContainer,key:"content__html-element"}):Qge(e)?re("div",{afterCreate:this._attachToNode,bind:e.domNode,class:as.contentContainer,key:"content__node"}):null}_attachToNode(e){const i=this;e.appendChild(i)}};_([S({readOnly:!0})],$i.prototype,"expandTitle",null),_([S()],$i.prototype,"_toggleActionEl",void 0),_([S()],$i.prototype,"_displaySheet",null),_([S()],$i.prototype,"autoCollapse",null),_([S()],$i.prototype,"closeOnEsc",void 0),_([S()],$i.prototype,"collapseIcon",null),_([S()],$i.prototype,"collapseTooltip",void 0),_([S()],$i.prototype,"content",void 0),_([S()],$i.prototype,"expanded",null),_([S()],$i.prototype,"expandIcon",null),_([S()],$i.prototype,"expandTooltip",void 0),_([S()],$i.prototype,"group",null),_([S()],$i.prototype,"icon",null),_([S()],$i.prototype,"iconNumber",void 0),_([S()],$i.prototype,"label",null),_([S(),Gn("esri/widgets/Expand/t9n/Expand")],$i.prototype,"messages",void 0),_([S(),Gn("esri/t9n/common")],$i.prototype,"messagesCommon",void 0),_([S()],$i.prototype,"mode",void 0),_([S()],$i.prototype,"placement",void 0),_([S()],$i.prototype,"view",null),_([S({type:FU})],$i.prototype,"viewModel",void 0),$i=_([J("esri.widgets.Expand")],$i);const _I=$i,ni="esri-search",Ht={base:ni,hasMultipleSources:`${ni}--multiple-sources`,isLoading:`${ni}--loading`,isSearching:`${ni}--searching`,showSuggestions:`${ni}--show-suggestions`,showSources:`${ni}--sources`,showWarning:`${ni}--warning`,container:`${ni}__container`,input:`${ni}__input`,inputContainer:`${ni}__input-container`,form:`${ni}__form`,submitButton:`${ni}__submit-button`,sourcesButton:`${ni}__sources-button`,sourcesButtonDown:`${ni}__sources-button--down`,sourcesButtonUp:`${ni}__sources-button--up`,clearButton:`${ni}__clear-button`,sourceName:`${ni}__source-name`,suggestionsMenu:`${ni}__suggestions-menu`,suggestionList:`${ni}__suggestions-list`,suggestionListCurrentLocation:`${ni}__suggestions-list--current-location`,sourcesMenu:`${ni}__sources-menu`,source:`${ni}__source`,warningMenu:`${ni}__warning-menu`,warningMenuBody:`${ni}__warning-body`,warningMenuHeader:`${ni}__warning-header`,warningMenuText:`${ni}__warning-text`,noValueText:`${ni}__no-value-text`},Ru="esri-search-result-renderer",Nu={base:Ru,showMoreResults:`${Ru}__more-results--show-more-results`,moreResults:`${Ru}__more-results`,moreResultsList:`${Ru}__more-results-list`,moreResultsHeader:`${Ru}__more-results-header`,moreResultsItem:`${Ru}__more-results-item`,moreResultsListHeader:`${Ru}__more-results-list-header`},GU=96;function tAe(t,e){const i=t.extent,n=t.width,s=kr(i==null?void 0:i.spatialReference);return i&&n?i.width/n*s*KR*GU:0}function eme(t,e){return t/(kr(e)*KR*GU)}function tme(t,e){const i=t.extent,n=t.width-(t.padding?t.padding.left+t.padding.right:0),s=eme(e,i.spatialReference);return i.clone().expand(s*n/i.width)}function iAe(t,e,i){return ime(t,e)&&nme(t,i)}function ime(t,e){return e===0||Ts(t,e)||t<e}function nme(t,e){return e===0||Ts(t,e)||t>e}function xI(t){var e;switch(t==null?void 0:t.type){case"point":return t;case"extent":return t.center;case"polygon":return t.centroid;case"multipoint":case"polyline":return(e=t.extent)==null?void 0:e.center;default:return null}}async function rme(t,e){var s,h;if(t.hasZ||e.type==="2d")return t;const i=(s=e.map)==null?void 0:s.ground;if(!(i!=null&&i.layers.length))return t;const{geometry:n}=await i.queryElevation(t,{cache:(h=e.basemapTerrain)==null?void 0:h.elevationQueryCache});return n}function g6(t,e,i){return UU(t.center,e,i)}function yM(t,e,i){switch(t==null?void 0:t.type){case"extent":return t;case"multipoint":case"polygon":case"polyline":return t.extent;case"point":return UU(t,e,i);default:return null}}function UU(t,e,i){const n=t.hasZ?t.z:void 0;if(e!=null&&e.map)return(i!=null?tme(e,i):e.extent).clone().centerAt(t).set({zmax:n,zmin:n});const{x:s,y:h,spatialReference:f}=t;return new Nt({xmin:s-.25,ymin:h-.25,xmax:s+.25,ymax:h+.25,spatialReference:f,zmin:n,zmax:n})}function sme(t){return t&&typeof t.highlight=="function"}function ome(t,e,i){return t==null||t>=i&&(e===0||t<=e)}function nAe(t,e){if(e&&t){const{minScale:i,maxScale:n}=t;if(ame(i,n))return ome(e,i,n)}return!0}function ame(t,e){return t!=null&&t>0||e!=null&&e>0}function rAe(t){return!(t!=null&&t.minScale)||!t.maxScale||t.minScale>=t.maxScale}function r2(t){return t!=null&&typeof t=="object"&&"createQuery"in t&&"queryFeatures"in t&&"layer"in t&&"view"in t}let Wi=class extends fp(De){constructor(e){super(e),this.autoNavigate=null,this.filter=null,this.getResults=null,this.getSuggestions=null,this.maxResults=null,this.maxSuggestions=null,this.minSuggestCharacters=null,this.outFields=null,this.placeholder="",this.popupEnabled=null,this.popupTemplate=null,this.prefix="",this.resultGraphicEnabled=null,this.resultSymbol=null,this.suggestionsEnabled=null,this.suffix="",this.withinViewEnabled=!1,this.zoomScale=null}};_([S()],Wi.prototype,"autoNavigate",void 0),_([S()],Wi.prototype,"filter",void 0),_([S()],Wi.prototype,"getResults",void 0),_([S()],Wi.prototype,"getSuggestions",void 0),_([S()],Wi.prototype,"maxResults",void 0),_([S()],Wi.prototype,"maxSuggestions",void 0),_([S()],Wi.prototype,"minSuggestCharacters",void 0),_([S()],Wi.prototype,"outFields",void 0),_([S()],Wi.prototype,"placeholder",void 0),_([S()],Wi.prototype,"popupEnabled",void 0),_([S()],Wi.prototype,"popupTemplate",void 0),_([S()],Wi.prototype,"prefix",void 0),_([S()],Wi.prototype,"resultGraphicEnabled",void 0),_([S()],Wi.prototype,"resultSymbol",void 0),_([S()],Wi.prototype,"suggestionsEnabled",void 0),_([S()],Wi.prototype,"suffix",void 0),_([S()],Wi.prototype,"withinViewEnabled",void 0),_([S()],Wi.prototype,"zoomScale",void 0),Wi=_([J("esri.widgets.Search.SearchSource")],Wi);const vM=Wi,lme=/https?:\/\/services.*\.arcgis\.com/i,cme=/(?:\{([^}]+)\})/g,Vf=()=>Ae.getLogger("esri.widgets.Search.support.layerSearchUtils");function hme(t,e){const{exactMatch:i=!1,location:n,maxResults:s,spatialReference:h,source:f,sourceIndex:m,suggestResult:y,view:x}=t,{layer:E,filter:k,zoomScale:I}=f,P=x==null?void 0:x.scale,L=BU(f,x),D=e==null?void 0:e.signal;return VU(E).then(()=>{const j=E.popupTemplate;return j?j.getRequiredFields(E.fieldsIndex):null}).then(j=>{var Se,Me,he,se;const{objectIdField:H,returnZ:W}=E,Z=YU(f);if(!bM(E,Z))throw Vf().error("invalid-field: displayField is invalid."),new ce("getResults():invalid-field","displayField is invalid.");const Y=j!=null&&j.length?j:[Z],te=f.outFields||Y,ie=HU(te);if(te.includes(H)||ie||te.push(H),(Se=E.floorInfo)!=null&&Se.floorField&&te.push(E.floorInfo.floorField),!(ie||kw(E,te)))throw Vf().error("invalid-field: outField is invalid."),new ce("getResults():invalid-field","outField is invalid.");const le=E.createQuery(),{orderByFields:pe}=f;if(pe&&(le.orderByFields=pe),h){le.outSpatialReference=h;const xe=1/kr(h);xe&&(le.maxAllowableOffset=xe)}const ve=E.geometryType==="mesh"||E.geometryType==="multipatch",be=((he=(Me=E.capabilities)==null?void 0:Me.data)==null?void 0:he.supportsZ)&&!ve;if(le.returnZ=be&&W!==!1,le.returnGeometry=!0,le.multipatchOption=ve?"xyFootprint":null,te&&(le.outFields=te),n)le.geometry=n;else if(y.key)le.objectIds=[y.key];else{const xe=f.searchFields||[Z];if(!kw(E,xe))throw Vf().error("invalid-field: search field is invalid."),new ce("getResults():invalid-field","search field is invalid.");if(JU(E)&&(le.num=s),L&&(le.geometry=L),!((se=y.text)==null?void 0:se.trim()))return[];const Fe=y.text,{prefix:ze="",suffix:it=""}=f,ti=XU(`${ze}${Fe}${it}`);ZU(E)&&WU(E,xe)&&!i&&Fe&&(le.fullText=KU({text:Fe,searchFields:xe}));const Et=QU({searchTerm:ti,layer:E,searchFields:xe,filter:k,exactMatch:i,query:le,type:"search"});if(le.where=Et,!qU(le))return[]}return E.queryFeatures(le,{signal:D}).then(xe=>Sme(xe,x,f,m,Z,P,I))})}function ume(t,e){const{source:i,spatialReference:n,view:s,suggestTerm:h,maxSuggestions:f,sourceIndex:m,exactMatch:y}=t,{layer:x,filter:E}=i,k=e==null?void 0:e.signal,I=BU(i,s);return VU(x).then(()=>{if(!JU(x))return[];const P=YU(i),L=i.searchFields||[P],D=[];i.suggestionTemplate?i.suggestionTemplate.replaceAll(cme,(be,Se)=>(D.push(Se),be)):D.push(P);const j=HU(D);D.includes(x.objectIdField)||j||D.push(x.objectIdField);const H=bM(x,P),W=j||kw(x,D),Z=kw(x,L);if(!H)throw Vf().error("invalid-field: displayField is invalid."),new ce("getSuggestions():invalid-field","displayField is invalid.");if(!W)throw Vf().error("invalid-field: outField is invalid."),new ce("getSuggestions():invalid-field","outField is invalid.");if(!Z)throw Vf().error("invalid-field: search field is invalid."),new ce("getSuggestions():invalid-field","search field is invalid.");const Y=x.createQuery(),{orderByFields:te}=i;if(te&&(Y.orderByFields=te),Y.outSpatialReference=n,Y.returnGeometry=!1,Y.num=f,Y.outFields=D,I&&(Y.geometry=I),!h.trim())return[];const{prefix:ie="",suffix:le=""}=i,pe=XU(`${ie}${h}${le}`);ZU(x)&&WU(x,L)&&!y&&h&&(Y.fullText=KU({text:h,searchFields:L}));const ve=QU({searchTerm:pe,layer:x,searchFields:L,filter:E,exactMatch:y,query:Y,type:"suggest"});return Y.where=ve,qU(Y)?x.queryFeatures(Y,{signal:k}).then(be=>wme(be,i,m,P)):[]})}function BU(t,e){const{filter:i,withinViewEnabled:n}=t,s=e==null?void 0:e.extent;return(i==null?void 0:i.geometry)??(n&&s?s:void 0)}function HU(t){return t&&t.includes("*")}async function VU(t){t&&await t.load()}function qU(t){return!(!t.fullText&&!t.where)}function WU(t,e){const i=t==null?void 0:t.indexes;return!i||!(e!=null&&e.length)?!1:i.filter(n=>n.indexType==="FullText").some(n=>{var h;const s=((h=n.fields)==null?void 0:h.split(",").map(f=>f.trim().toLowerCase()))||[];return e.every(f=>s.includes(f.toLowerCase()))})}function KU({text:t,searchFields:e}){return t.trim().split(" ").filter(i=>!!i.trim()).map(i=>new UF({onFields:e,searchTerm:i,searchType:"prefix"}))}function ZU(t){var e,i;return((i=(e=t==null?void 0:t.capabilities)==null?void 0:e.query)==null?void 0:i.supportsFullTextSearch)??!1}function JU(t){var e,i;return((i=(e=t==null?void 0:t.capabilities)==null?void 0:e.query)==null?void 0:i.supportsPagination)??!1}function dme(t){var e,i,n;return((n=(i=(e=t==null?void 0:t.fieldsIndex)==null?void 0:e.fields)==null?void 0:i.find(s=>s.type==="string"))==null?void 0:n.name)??""}function YU(t){return t.displayField||t.layer.displayField||dme(t.layer)}function kw(t,e){return!(!t||!(e!=null&&e.length))&&e.every(i=>bM(t,i))}function bM(t,e){return!!t.getField(e)}function pme(t){for(let e=0;e<t.length;e++)if(t.charCodeAt(e)>255)return!0;return!1}function fme({codedValues:t},e,i){return om(t??[],n=>{const s=n.name,h=i?s:s.toLowerCase();return(i?e:e.toLowerCase())===h?n.code.toString():null})??null}function XU(t){return t.replaceAll("'","''")}function w1(t,e){const i=e==null?void 0:e.where;return i?`(${t}) AND (${i})`:t}function gme({currentTerm:t,field:e,filter:i,exactMatch:n,url:s,type:h}){const f=e==null?void 0:e.type,m=e==null?void 0:e.name;if(f==="string"||f==="date"||f==="global-id"){const y=lme.test(s??""),x=y&&pme(t)?"N":"";return w1(n&&h==="search"?`${m} = ${x}'${t}'`:y?`${m} LIKE ${x}${`'${t}%'`}`:`${`LOWER(${m})`} LIKE ${x}${`'${t.toLowerCase()}%'`}`,i)}if(f==="oid"||f==="small-integer"||f==="integer"||f==="single"||f==="double"){const y=Number(t);return isNaN(y)?null:w1(`${m} = ${y}`,i)}return w1(`${m} = ${t}`,i)}function mme(t,e){return t?` OR (${e})`:`(${e})`}function QU({searchTerm:t,layer:e,searchFields:i,filter:n,exactMatch:s,query:h,type:f}){const{definitionExpression:m,url:y}=e;let x="";return!h.fullText&&t&&i&&i.forEach(E=>{var L;const k=e.getField(E),I=(L=e.getFieldDomain)==null?void 0:L.call(e,E,{excludeImpliedDomains:de("esri-widget-legacy-field-domain-calculation")}),P=(I&&I.type==="coded-value"?fme(I,t,s):null)||t||null;if(P!==null){const D=gme({currentTerm:P,field:k,filter:n,exactMatch:s,url:y,type:f});D&&(x+=mme(x,D))}}),m&&x?`(${m}) AND (${x})`:m||x}function yme(t,e){let i=null;const{codedValues:n}=t;return n&&n.length&&n.some(s=>s.code===e&&(i=s.name,!0)),i}function vme(t,e){return t[e]??t[Object.keys(t).find(i=>i.toLowerCase()===e.toLowerCase())]}function eB(t,e,i){var f;const n=t.sourceLayer,{attributes:s}=t,h=(f=n.getFieldDomain)==null?void 0:f.call(n,i,{feature:t,excludeImpliedDomains:de("esri-widget-legacy-field-domain-calculation")});if(e)return fE(e,s);if(i&&s){const m=n.getField(i),y=vme(s,i);return y==null?"":h&&h.type==="coded-value"?yme(h,y)??"":(m==null?void 0:m.type)==="date"?au(new Date(y)):typeof y=="number"?y.toString():typeof y!="string"?"":y.trim()}return""}function bme(t,e,i,n){const s=t.sourceLayer,{attributes:h}=t,{objectIdField:f}=s,m=f?h[f]:null;return{text:eB(t,e.suggestionTemplate,n),key:m,sourceIndex:i}}function wme(t,e,i,n){return t.features.map(s=>bme(s,e,i,n))}function _me(t){return t!=null&&t.minScale!=null&&t.maxScale!=null}function xme(t,e,i,n,s,h,f){const m=t.clone(),y=t.sourceLayer,x=y==null?void 0:y.objectIdField,E=x?t.attributes[x]:null,k=eB(t,i.searchTemplate,s);h!=null&&_me(y)&&(y.minScale&&y.minScale<h?h=y.minScale:y.maxScale&&y.maxScale>h&&(h=y.maxScale));const I=m.geometry?yM(m.geometry,e??void 0,h??void 0):void 0,P=typeof f=="number"&&I?g6(_e(I),e??void 0,f):I,L=t.clone();return P!=null&&(L.geometry=ln.fromExtent(P)),{extent:P,target:L,feature:m,key:E,name:k,sourceIndex:n}}function Sme(t,e,i,n,s,h,f){return t.features.map(m=>xme(m,e,i,n,s,h,f))}var m6;let Vo=m6=class extends vM{constructor(t){super(t),this.displayField=null,this.exactMatch=null,this.orderByFields=null,this.searchFields=null,this.searchTemplate=null,this.suggestionTemplate=null,this.getResults=(e,i)=>hme({source:this,...e},i),this.getSuggestions=(e,i)=>ume({source:this,...e},i)}set layer(t){this._set("layer",t),t&&t.load().catch(()=>{})}get name(){return this._getLayerTitle()??""}set name(t){this._overrideIfSome("name",t)}clone(){return new m6({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?_e(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,layer:this.layer,searchFields:this.searchFields?_e(this.searchFields):null,suggestionTemplate:this.suggestionTemplate,zoomScale:this.zoomScale})}_getFirstStringField(){var t,e;return((e=(t=this.layer.fieldsIndex)==null?void 0:t.fields.find(i=>i.type==="string"))==null?void 0:e.name)??""}_getDisplayField(){return this.displayField||this.layer.displayField||this._getFirstStringField()}_getSearchFieldsString(){const{layer:t,searchFields:e}=this;return t.loaded?`: ${(e||[this._getDisplayField()]).map(i=>{const n=t.getField(i);return(n==null?void 0:n.alias)||i}).join(", ")}`:""}_getLayerTitle(){const{layer:t}=this;if(!t)return;const{title:e}=t;return e?`${e}${this._getSearchFieldsString()}`:void 0}};_([S({json:{read:{source:"field.name"},write:{target:"field.name"}}})],Vo.prototype,"displayField",void 0),_([S({json:{read:{source:"field.exactMatch"},write:{target:"field.exactMatch"}}})],Vo.prototype,"exactMatch",void 0),_([S({value:null})],Vo.prototype,"layer",null),_([S()],Vo.prototype,"name",null),_([S({type:[String],json:{write:!0}})],Vo.prototype,"orderByFields",void 0),_([S()],Vo.prototype,"searchFields",void 0),_([S()],Vo.prototype,"searchTemplate",void 0),_([S()],Vo.prototype,"suggestionTemplate",void 0),Vo=m6=_([J("esri.widgets.Search.LayerSearchSource")],Vo);const pf=Vo;function Tme(t){return!!t&&typeof t.x=="number"&&typeof t.y=="number"}function Eme(t){return t&&typeof t.xmin=="number"&&typeof t.ymin=="number"&&typeof t.xmax=="number"&&typeof t.ymax=="number"}let xh=class extends De{constructor(e){super(e),this.address=null,this.attributes=null,this.extent=null,this.location=null,this.score=null}};_([S({type:String,json:{write:!0}})],xh.prototype,"address",void 0),_([S({type:Object,json:{write:!0}})],xh.prototype,"attributes",void 0),_([S({type:Nt,json:{write:!0}})],xh.prototype,"extent",void 0),_([S({type:Ne,json:{write:!0}})],xh.prototype,"location",void 0),_([S({type:Number,json:{write:!0}})],xh.prototype,"score",void 0),xh=_([J("esri.rest.support.AddressCandidate")],xh);const tB=xh,wM={type:String,json:{read:{source:"token"},write:{target:"token"}}};let Nn=class extends De{constructor(e){super(e),this.address=null,this.apiKey=null,this.categories=null,this.countryCode=null,this.forStorage=null,this.location=null,this.locationType=null,this.magicKey=null,this.maxLocations=null,this.outFields=null,this.outSpatialReference=null,this.searchExtent=null}};_([S({type:Object,json:{write:!0}})],Nn.prototype,"address",void 0),_([S(wM)],Nn.prototype,"apiKey",void 0),_([S({type:[String],json:{read:{source:"category",reader:t=>t?t.split(","):null},write:{target:"category",writer:(t,e)=>{e.category=t?t.join(","):null}}}})],Nn.prototype,"categories",void 0),_([S({type:String,json:{write:!0}})],Nn.prototype,"countryCode",void 0),_([S({type:Boolean,json:{write:!0}})],Nn.prototype,"forStorage",void 0),_([S({type:Ne,json:{write:{writer:(t,e)=>{e.location=t?t.clone().normalize():null}}}})],Nn.prototype,"location",void 0),_([S({type:String,json:{write:!0}})],Nn.prototype,"locationType",void 0),_([S({type:String,json:{write:!0}})],Nn.prototype,"magicKey",void 0),_([S({type:Number,json:{write:!0}})],Nn.prototype,"maxLocations",void 0),_([S({type:[String],json:{write:{writer:(t,e)=>{e.outFields=t?t.join(","):null}}}})],Nn.prototype,"outFields",void 0),_([S({type:Ke,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Nn.prototype,"outSpatialReference",void 0),_([S({type:Nt,json:{write:{writer:(t,e)=>{const i=t?t.shiftCentralMeridian():null;e.searchExtent=i}}}})],Nn.prototype,"searchExtent",void 0),Nn=_([J("esri.rest.support.AddressToLocationsParameters")],Nn),Nn.from=_n(Nn);const iB=Nn;async function Mme(t,e,i){e=iB.from(e);const n=xy(t),{address:s,...h}=e.toJSON(),f={...s,...h,f:"json"},m=s_({...n.query,...f}),y=r_(m,i),x=`${n.path}/findAddressCandidates`;return ki(x,y).then($me)}function $me({data:t}){if(!t)return[];const{candidates:e,spatialReference:i}=t;return e?e.map(n=>{if(!n)return;const{extent:s,location:h}=n,f=!s||Eme(s);return Tme(h)&&f?(s&&(s.spatialReference=i),h&&(h.spatialReference=i),tB.fromJSON(n)):void 0}):[]}let rc=class extends De{constructor(e){super(e),this.apiKey=null,this.location=null,this.locationType=null,this.outSpatialReference=null}};_([S(wM)],rc.prototype,"apiKey",void 0),_([S({type:Ne,json:{write:{writer:(t,e)=>{const i=t?t.clone().normalize():null,n=i!==void 0;e.location=n?i:null}}}})],rc.prototype,"location",void 0),_([S({type:String,json:{write:!0}})],rc.prototype,"locationType",void 0),_([S({type:Ke,json:{read:{source:"outSR"},write:{target:"outSR"}}})],rc.prototype,"outSpatialReference",void 0),rc=_([J("esri.rest.support.LocationToAddressParameters")],rc),rc.from=_n(rc);const nB=rc;async function kme(t,e,i){e=nB.from(e);const n=xy(t),s={...e.toJSON(),f:"json"},h=s_({...n.query,...s}),f=r_(h,i),m=`${n.path}/reverseGeocode`;return ki(m,f).then(Cme)}function Cme({data:t}){if(!t)return;const{address:e,location:i}=t,n=(e==null?void 0:e.Match_addr)||"";return tB.fromJSON({address:n,attributes:e||{},location:i,score:100})}let ff=class extends De{constructor(e){super(e),this.isCollection=null,this.magicKey=null,this.text=null}};_([S({type:Boolean,json:{write:!0}})],ff.prototype,"isCollection",void 0),_([S({type:String,json:{write:!0}})],ff.prototype,"magicKey",void 0),_([S({type:String,json:{write:!0}})],ff.prototype,"text",void 0),ff=_([J("esri.rest.support.SuggestionCandidate")],ff);const Ime=ff;let ms=class extends De{constructor(e){super(e),this.apiKey=null,this.categories=null,this.countryCode=null,this.location=null,this.maxSuggestions=null,this.outSpatialReference=null,this.searchExtent=null,this.text=null}};_([S(wM)],ms.prototype,"apiKey",void 0),_([S({type:[String],json:{read:{source:"category",reader:t=>t?t.split(","):null},write:{target:"category",writer:(t,e)=>{e.category=t?t.join(","):null}}}})],ms.prototype,"categories",void 0),_([S({type:String,json:{write:!0}})],ms.prototype,"countryCode",void 0),_([S({type:Ne,json:{write:{writer:(t,e)=>{e.location=t?t.clone().normalize():null}}}})],ms.prototype,"location",void 0),_([S({type:Number,json:{write:!0}})],ms.prototype,"maxSuggestions",void 0),_([S({type:Ke,json:{read:{source:"outSR"},write:{target:"outSR"}}})],ms.prototype,"outSpatialReference",void 0),_([S({type:Nt,json:{write:{writer:(t,e)=>{const i=t?t.shiftCentralMeridian():null;e.searchExtent=JSON.stringify(i)}}}})],ms.prototype,"searchExtent",void 0),_([S({type:String,json:{write:!0}})],ms.prototype,"text",void 0),ms=_([J("esri.rest.support.SuggestLocationsParameters")],ms),ms.from=_n(ms);const rB=ms;async function Ame(t,e,i){const n=xy(t),s={...(e=rB.from(e)).toJSON(),f:"json"},h=s_({...n.query,...s}),f=r_(h,i),m=`${n.path}/suggest`;return ki(m,f).then(Ome)}function Ome(t){const{data:e}=t;if(!e)return[];const{suggestions:i}=e;return i?i.map(n=>new Ime(n)):[]}const Pme="Single Line Input",Rme=3e5;function Nme(t,e){return t.location?jme(t,e):Gme(t,e)}function sB(t,e){var n;if(e.localSearchDisabled)return null;const i=t==null?void 0:t.scale;return typeof i=="number"&&i<=Rme?(n=t==null?void 0:t.extent)==null?void 0:n.center:null}async function Lme(t,e){const{source:i,spatialReference:n,view:s,suggestTerm:h,maxSuggestions:f,sourceIndex:m}=t,y=new rB,{apiKey:x,url:E}=i,k=oB(i,s),I=e==null?void 0:e.signal;if(!E)return null;x&&(y.apiKey=x),i.categories&&(y.categories=i.categories),n&&(y.outSpatialReference=n);const P=sB(s,i);if(P&&(y.location=P),!h.trim())return null;const{prefix:L="",suffix:D=""}=i,j=`${L}${h}${D}`;return y.text=j,k&&(y.searchExtent=k),y.maxSuggestions=f,i.countryCode&&(y.countryCode=i.countryCode),Ame(E,y,{signal:I}).then(H=>Bme(H,m))}function Dme(t){return!!t&&/(?:geocode-api\.arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(t)}function zme(t){return!!t&&/(?:\/servers\/[\da-z.-]+\/rest\/services\/world\/geocodeserver).*/i.test(t)}function SI(t){return!!t&&/(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(t)}const Fme="https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer";async function jme(t,e){const{source:i,spatialReference:n,location:s,sourceIndex:h,view:f}=t,{apiKey:m,url:y,zoomScale:x,defaultZoomScale:E}=i;if(y==null)return[];const k=f==null?void 0:f.scale,I=e==null?void 0:e.signal,P=new nB({location:s});m&&(P.apiKey=m),n&&(P.outSpatialReference=n);try{return aB([await kme(y,P,{signal:I})],{sourceIndex:h,scale:k,view:f,zoomScale:x,defaultZoomScale:E})}catch{return[]}}function oB(t,e){const{filter:i,withinViewEnabled:n}=t,s=e==null?void 0:e.scale,h=e==null?void 0:e.extent,f=i==null?void 0:i.geometry;return(f?yM(f,e??void 0,s):void 0)||(n&&h?h:void 0)}async function Gme(t,e){var le;const{source:i,suggestResult:n,spatialReference:s,view:h,maxResults:f,sourceIndex:m}=t,y=i==null?void 0:i.zoomScale,x=i==null?void 0:i.defaultZoomScale;if(!((le=n.text)==null?void 0:le.trim()))return null;const k=!n.key&&i.prefix?i.prefix:"",I=!n.key&&i.suffix?i.suffix:"",P=`${k}${n.text}${I}`,L=new iB,{apiKey:D,url:j}=i,H=h==null?void 0:h.scale,W=oB(i,h),Z=e==null?void 0:e.signal;if(D&&(L.apiKey=D),!j)return null;i.categories&&(L.categories=i.categories),i.locationType&&(L.locationType=i.locationType),s&&(L.outSpatialReference=s);const Y=sB(h,i);Y&&(L.location=Y),L.maxLocations=f,W&&(L.searchExtent=W),i.countryCode&&(L.countryCode=i.countryCode);const{key:te}=n,ie=`${te}`;return te&&(L.magicKey=ie),L.address={},L.address[i.singleLineFieldName||Pme]=P,i.outFields&&(L.outFields=i.outFields),Mme(j,L,{signal:Z}).then(pe=>aB(pe,{key:ie,scale:H,sourceIndex:m,view:h,zoomScale:y,defaultZoomScale:x}))}function Ume(t,e){return{text:t.text,key:t.magicKey,sourceIndex:e}}function Bme(t,e){return t.map(i=>Ume(i,e))}function Hme(t,e){const{key:i,scale:n,sourceIndex:s,view:h,zoomScale:f,defaultZoomScale:m}=e,{attributes:y,extent:x,location:E,address:k}=t,I=new du({geometry:E,attributes:y}),P=x||E,L=P?yM(P,h??void 0,n??void 0):void 0,D=L?typeof f=="number"?g6(L,h??void 0,f):typeof m=="number"&&(P==null?void 0:P.type)==="point"?g6(L,h??void 0,m):L:null,j=E?`${E.x},${E.y}`:"",H=k||j,W=I.clone();return D!=null&&(W.geometry=ln.fromExtent(D)),{extent:D,feature:I,target:W,key:i,name:H,sourceIndex:s}}function aB(t,e){return t.filter(Boolean).map(i=>Hme(i,e))}var y6;let Yn=y6=class extends vM{constructor(t){super(t),this.apiKey=null,this.categories=null,this.countryCode=null,this.defaultZoomScale=null,this.localSearchDisabled=!1,this.locationType=null,this.name="",this.placeholder="",this.searchTemplate="",this.singleLineFieldName=null,this.suggestionsEnabled=null,this.url=null,this.zoomScale=null,this.getResults=(e,i)=>Nme({source:this,...e},i),this.getSuggestions=(e,i)=>Lme({source:this,...e},i)}clone(){return new y6({apiKey:this.apiKey,autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?_e(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,categories:this.categories?_e(this.categories):null,countryCode:this.countryCode,locationType:this.locationType,searchTemplate:this.searchTemplate,singleLineFieldName:this.singleLineFieldName,zoomScale:this.zoomScale})}};_([S()],Yn.prototype,"apiKey",void 0),_([S()],Yn.prototype,"categories",void 0),_([S()],Yn.prototype,"countryCode",void 0),_([S({json:{write:!0}})],Yn.prototype,"defaultZoomScale",void 0),_([S()],Yn.prototype,"localSearchDisabled",void 0),_([S()],Yn.prototype,"locationType",void 0),_([S({json:{write:!0}})],Yn.prototype,"name",void 0),_([S({json:{write:!0}})],Yn.prototype,"placeholder",void 0),_([S()],Yn.prototype,"searchTemplate",void 0),_([S({json:{write:!0}})],Yn.prototype,"singleLineFieldName",void 0),_([S({json:{read:{source:"suggest"},write:{target:"suggest"}}})],Yn.prototype,"suggestionsEnabled",void 0),_([S({json:{write:!0}})],Yn.prototype,"url",void 0),_([S({json:{write:!0}})],Yn.prototype,"zoomScale",void 0),Yn=y6=_([J("esri.widgets.Search.LocatorSearchSource")],Yn);const lB=Yn;let dd=class extends De{constructor(e){super(e),this.geometries=[],this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map(s=>s.toJSON()),i=this.geometries[0],n={};return n.outSR=U2(this.outSpatialReference),n.inSR=U2(i.spatialReference),n.geometries=JSON.stringify({geometryType:ry(i),geometries:e}),this.transformation&&(n.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),this.transformForward!=null&&(n.transformForward=this.transformForward),n}};_([S()],dd.prototype,"geometries",void 0),_([S({json:{read:{source:"outSR"}}})],dd.prototype,"outSpatialReference",void 0),_([S()],dd.prototype,"transformation",void 0),_([S()],dd.prototype,"transformForward",void 0),dd=_([J("esri.rest.support.ProjectParameters")],dd);const cB=dd,Vme=_n(cB);async function qme(t,e,i){e=Vme(e);const n=xy(t),s={...n.query,f:"json",...e.toJSON()},h=e.outSpatialReference,f=ry(e.geometries[0]),m=r_(s,i);return ki(n.path+"/project",m).then(({data:{geometries:y}})=>Ij(y,f,h))}const hB=()=>Ae.getLogger("esri.widgets.support.geolocationUtils"),Wme={maximumAge:0,timeout:15e3,enableHighAccuracy:!0};function Kme(){const t=!!de("esri-geolocation");return t||hB().warn("geolocation-unsupported","Geolocation unsupported."),t}function Zme(){const t=window.isSecureContext;return t||hB().warn("insecure-context","Geolocation requires a secure origin."),t}function TI(){return Kme()&&Zme()}function Jme(t){return t??(t=Wme),new Promise((i,n)=>{setTimeout(()=>n(new ce("geolocation:timeout","getting the current geolocation position timed out")),15e3),navigator.geolocation.getCurrentPosition(i,n,t??void 0)})}function Yme(t,e){const{position:i,view:n}=t,s=Xme(i),h=s==null?void 0:s.coords;if(!h)throw new ce("geometry-service:no-coords","Geolocation has no coordinates");return eye(Qme(h),n,e)}function Xme(t){const e=t&&t.coords||{},i={accuracy:e.accuracy,altitude:e.altitude,altitudeAccuracy:e.altitudeAccuracy,heading:e.heading,latitude:e.latitude,longitude:e.longitude,speed:e.speed};return t&&{coords:i,timestamp:t.timestamp}}function Qme({longitude:t,latitude:e,altitude:i}){return new Ne({longitude:t,latitude:e,z:i||void 0,spatialReference:{wkid:4326}})}function eye(t,e,i){if(!e)return Promise.resolve(t);const n=e.spatialReference;return n.isWGS84?Promise.resolve(t):n.isWebMercator?Promise.resolve(Ec(t)):tye(i).then(s=>{if(!s)throw new ce("geometry-service:missing-url","Geometry service URL is missing");const h=new cB({geometries:[t],outSpatialReference:n});return qme(s,h,i).then(f=>f[0])})}function tye(t){if(_t.geometryServiceUrl)return Promise.resolve(_t.geometryServiceUrl);const e=es.getDefault();return e.load(t).catch(()=>{}).then(()=>{var i,n;return(n=(i=e.helperServices)==null?void 0:i.geometry)==null?void 0:n.url})}function Hn(t,e){return t.hasOwnProperty(e)&&t[e]!=null&&t[e]!==""}const iye=()=>mE("esri/widgets/Search/t9n/Search"),EI="highlight",s2=Pe.ofType({key:t=>t.layer?"layer":"locator",base:vM,typeMap:{layer:pf,locator:lB}}),MI=Ke.WGS84,nye="esri/images/search/search-symbol-32.png",rye=/<[\s\S]*?>/g,gf=-1;let ot=class extends vU(un.EventedMixin(Oe)){constructor(e){super(e),this._gotoController=null,this._searching=null,this._updatingPromise=null,this._createdFeatureLayers=[],this.autoNavigate=!0,this.autoSelect=!0,this.defaultPopupTemplate=null,this.defaultSources=new s2,this.defaultSymbols={point:new vy({url:xt(nye),size:24,width:24,height:24}),polyline:new jc({color:[130,130,130,1],width:2}),polygon:new by({color:[235,235,235,.4],outline:{color:[130,130,130,1],width:2}})},this.includeDefaultSources=!0,this.maxInputLength=128,this.maxResults=6,this.maxSuggestions=6,this.messages=null,this.minSuggestCharacters=3,this.popupEnabled=!0,this.popupTemplate=null,this.portal=es.getDefault(),this.resultCount=null,this.resultGraphicEnabled=!0,this.resultGraphic=null,this.results=null,this.selectedSuggestion=null,this.searchAllEnabled=!0,this.selectedResult=null,this.sources=new s2,this.suggestionDelay=350,this.suggestionCount=null,this.suggestions=null,this.suggestionsEnabled=!0,this.view=null}initialize(){const e=async()=>{const i=await iye();this.messages=i,this.defaultPopupTemplate=new DE({title:i.searchResult,content:"{Match_addr}"})};e(),this.addHandles([Ee(()=>[this.includeDefaultSources,this.view,this.portal],()=>this._update(),Ct),iE(e)])}destroy(){this._destroyFeatureLayers(),this._abortGoTo(),this.clearGraphics()}get activeSource(){return this.allSources.at(this.activeSourceIndex)??null}get activeSourceIndex(){return this.allSources.length===1||!this.searchAllEnabled?0:gf}set activeSourceIndex(e){this._overrideIfSome("activeSourceIndex",e)}get allPlaceholder(){var e;return(e=this.messages)==null?void 0:e.allPlaceholder}set allPlaceholder(e){this._overrideIfSome("allPlaceholder",e)}get allSources(){const{sources:e,defaultSources:i,includeDefaultSources:n}=this,s=typeof n=="function"?n.call(null,{sources:e,defaultSources:i}):n?i.concat(e):e,h=this._get("allSources")||new s2;return h.removeAll(),h.addMany(s.filter(Boolean)),h}get locationEnabled(){return this._get("locationEnabled")||TI()}set locationEnabled(e){if(e===void 0)return void this._clearOverride("locationEnabled");const i=TI();if(e&&!i){const n=new ce("locationEnabled:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});Ae.getLogger(this).error(n)}this._override("locationEnabled",!!e&&i)}get placeholder(){const{allSources:e,activeSourceIndex:i,allPlaceholder:n}=this;if(i===gf)return n??"";const s=e.at(i);return(s==null?void 0:s.placeholder)??""}set searchTerm(e){this._set("searchTerm",e||""),this.clearGraphics(),this.selectedSuggestion&&this.selectedSuggestion.text!==e&&this._set("selectedSuggestion",null),e===""&&this._clear()}get searchTerm(){return this._get("searchTerm")||""}get state(){return this._searching?"searching":this.updating?"loading":this.allSources.length===0?"disabled":"ready"}get updating(){return this._updatingPromise!=null}clear(){this.searchTerm=""}clearGraphics(){this._removeHighlight(),this._closePopup();const{view:e,resultGraphic:i}=this;e&&i&&e.graphics.remove(i),this._set("resultGraphic",null)}search(e,i){this.emit("search-start"),this.clearGraphics();const n=this._createSuggestionForSearch(e),s=(async()=>{var h;try{await this.when();const f=await this._getResultsFromSources(n,i);if((h=i==null?void 0:i.signal)!=null&&h.aborted)return null;const m={activeSourceIndex:this.activeSourceIndex,searchTerm:n.text??"",numResults:0,numErrors:0,errors:[],results:[]};this._formatResponse(m,f,n);const y=this._getFirstResult(m.results),x=n.location&&y?y.name:n.text,E=x==null?void 0:x.replace(rye,"");return this._set("searchTerm",E),(n.key&&typeof n.sourceIndex=="number"||n.location)&&this._set("selectedSuggestion",n),this._set("results",m.results),this._set("resultCount",m.results.reduce((k,I)=>{var P;return k+(((P=I.results)==null?void 0:P.length)??0)},0)),this.emit("search-complete",m),await this._selectFirstResult(y),m}finally{this._clearSearching()}})();return this._searching=s,s}async searchNearby(e){if(!this.locationEnabled){const n=new ce("searchNearby:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});throw Ae.getLogger(this).error(n),n}const i=(async()=>{try{const n=await Jme(),s=await Yme({position:n,view:this.view},e);return await this.search(s,e)}finally{this._clearSearching()}})();return this._searching=i,i}async select(e){if(this.clearGraphics(),!e){const be=new ce("select:missing-parameter","Cannot select without a searchResult.",{searchResult:e});throw Ae.getLogger(this).error(be),be}const{view:i}=this,n=Hn(e,"sourceIndex")?e.sourceIndex:this._getSourceIndexOfResult(e),s=n!=null?this.allSources.at(n):null;if(!s){const be=new ce("select:missing-source","Cannot select without a source.",{source:s});throw Ae.getLogger(this).error(be),be}const h=s instanceof pf?this._getLayerSourcePopupTemplate(s):s.popupTemplate,f=s.resultSymbol||this._getDefaultSymbol(e),m=Hn(s,"resultGraphicEnabled")?s.resultGraphicEnabled:this.resultGraphicEnabled,y=Hn(s,"autoNavigate")?s.autoNavigate:this.autoNavigate,x=Hn(s,"popupEnabled")?s.popupEnabled:this.popupEnabled,E=x?h||this.popupTemplate||this.defaultPopupTemplate:null,{feature:k}=e;if(!k){const be=new ce("select:missing-feature","Cannot select without a feature.",{feature:k});throw Ae.getLogger(this).error(be),be}const{attributes:I,geometry:P,layer:L,sourceLayer:D}=k,j=P?xI(P):null,H={layerViewQuery:this._getLayerView(k),elevationQuery:i&&j!=null?rme(j,i):Promise.resolve(j)},W=await $d(H),Z=W.layerViewQuery.value,Y=W.elevationQuery.value;f instanceof wy&&(f.text=e.name);const te=i&&y?e.target||e.extent:null;await(te!=null?this._goToSearchResult(te):Promise.resolve());const le=Z?k:new du({geometry:P,symbol:f,attributes:I,layer:L,sourceLayer:D,popupTemplate:E}),pe=i==null?void 0:i.popup,ve=pe&&x&&le.getEffectivePopupTemplate(pe.defaultPopupTemplateEnabled);return ve&&await i.openPopup({features:[le],location:Y}),Z&&sme(Z)&&!ve&&this._highlightFeature({graphic:le,layerView:Z}),!Z&&m&&i&&i.graphics.push(le),this._setResultFloor(e),this._set("selectedResult",e),this._set("resultGraphic",le),this.emit("select-result",{result:e,source:s,sourceIndex:n}),e}async suggest(e,i,n){const s=e||this.searchTerm;this.emit("suggest-start",{searchTerm:s}),await this._suggestTimer(i,n);const h=await this._suggestImmediate(s,n);return this._set("suggestions",h==null?void 0:h.results),this._set("suggestionCount",(h==null?void 0:h.results.reduce((f,m)=>{var y;return f+(((y=m.results)==null?void 0:y.length)??0)},0))??null),this.emit("suggest-complete",h),h}async when(){await su(()=>!this.updating)}async _update(){const{portal:e,view:i}=this;if(this.includeDefaultSources){const n=this._updatingPromise=$d([e==null?void 0:e.load(),i==null?void 0:i.when()]);if(this.destroyed||(await n,n!==this._updatingPromise))return}await su(()=>this.messages),this.destroyed||this._updateDefaultSources(),this._updatingPromise=null}_clearSearching(){this._searching=null}_convertHelperServices(){var i,n;const e=(n=(i=this.portal)==null?void 0:i.helperServices)==null?void 0:n.geocode;return e?e.map(s=>{var y;if(s.placefinding===!1)return;const h=_t.apiKey&&SI(s.url)?{url:Fme}:null,f=lB.fromJSON({...s,...h}),m=f.url;if(SI(m)||zme(m)||Dme(m)){const x=f.outFields??["Addr_type","Match_addr","StAddr","City"],E=(f.placeholder||((y=this.messages)==null?void 0:y.placeholder))??"",k=typeof f.defaultZoomScale=="number"?f.defaultZoomScale:2500;f.singleLineFieldName="SingleLine",f.outFields=x,f.placeholder=E,f.defaultZoomScale=k}return f.singleLineFieldName?f:void 0}).filter(Yi):[]}_destroyFeatureLayers(){this._createdFeatureLayers.forEach(e=>e==null?void 0:e.destroy()),this._createdFeatureLayers=[]}_getLayerSources(e,i){var s;const n=(s=this.view)==null?void 0:s.map;return e.map(h=>{const f=n.findLayerById(h.id);if(!f)return;const m=this._getLayerJSON(h),y=pf.fromJSON(m);return y.placeholder=i,this._getLayer(f,m).then(x=>{y.layer=x}),y}).filter(Yi).toArray()}_getTableSources(e,i){var s;const n=(s=this.view)==null?void 0:s.map;return e.map(h=>{if(!h.id)return;const f=n.findTableById(h.id);if(!f)return;const m=this._getLayerJSON(h),y=pf.fromJSON(m);return y.placeholder=i,this._getLayer(f,m).then(x=>{y.layer=x}),y}).filter(Yi).toArray()}_convertApplicationProperties(){var m,y,x;const e=(m=this.view)==null?void 0:m.map,i=(x=(y=e==null?void 0:e.applicationProperties)==null?void 0:y.viewing)==null?void 0:x.search;if(!i)return[];const{enabled:n,hintText:s,layers:h,tables:f}=i;return n?[...this._getLayerSources(h,s),...this._getTableSources(f,s)]:[]}async _getSubLayer(e,i){var h;if(await e.load(),!e.allSublayers)throw new Error;const n=e.allSublayers.find(f=>f.id===i.subLayer);if(!n)throw new Error;const s=await((h=n.createFeatureLayer)==null?void 0:h.call(n));if(!s)throw new Error;return this._createdFeatureLayers.push(s),s}async _getBuildingSubLayer(e,i){await e.load();const n=e.allSublayers.find(s=>s.id===i.subLayer);if((n==null?void 0:n.type)!=="building-component")throw new Error;if(await n.load(),n.associatedLayer==null)throw new Error;return await n.associatedLayer.load(),n}async _getLayer(e,i){if(e.type==="feature"||e.type==="scene"||e.type==="csv"||e.type==="geojson"||e.type==="ogc-feature")return e;if(e.type==="map-image")try{return await this._getSubLayer(e,i)}catch{const s=new ce("search:create-featurelayer","Could not create a FeatureLayer from the MapImageLayer",{layer:e});return Ae.getLogger(this).error(s),null}return e.type==="building-scene"?this._getBuildingSubLayer(e,i):null}_getLayerJSON(e){return typeof e.toJSON=="function"?e.toJSON():e}_updateDefaultSources(){const{defaultSources:e,includeDefaultSources:i}=this;this._destroyFeatureLayers(),e.removeAll(),i&&e.addMany([...this._convertApplicationProperties(),...this._convertHelperServices()])}_abortGoTo(){this._gotoController&&this._gotoController.abort(),this._gotoController=null}_clear(){this._abortGoTo(),this._set("resultCount",null),this._set("results",null),this._set("suggestions",null),this._set("suggestionCount",null),this._set("selectedResult",null),this._set("selectedSuggestion",null),this.emit("search-clear")}_closePopup(){var h;const e=(h=this.view)==null?void 0:h.popup,{resultGraphic:i}=this;if(!e||!i)return;const n="selectedFeature"in e,s=n?e.selectedFeature:null;n&&s&&s===i&&e.close()}_suggestTimer(e,i){const n=e??this.suggestionDelay;return fT(n,null,i==null?void 0:i.signal)}_createLocationForSearch(e){return e instanceof du&&e.geometry?xI(e.geometry):e instanceof Ne?e:Array.isArray(e)&&e.length===2?new Ne({longitude:e[0],latitude:e[1]}):null}_createSuggestionForSearch(e){if(e&&Hn(e,"key")&&Hn(e,"text")&&Hn(e,"sourceIndex"))return e;const i=this._createLocationForSearch(e),n=typeof e=="string"?e:this.searchTerm,{selectedSuggestion:s,selectedResult:h}=this,f=!e&&s&&h,m=f&&s.key===h.key&&s.sourceIndex===h.sourceIndex,y=f&&s.location;return m||y?s:{location:i,text:i?"":n,sourceIndex:null,key:null}}_getFirstResult(e){return om(e,({results:i})=>i==null?void 0:i[0])??null}async _selectFirstResult(e){return this.autoSelect&&e?this.select(e):null}async _suggestImmediate(e,i){var h;await this.when();const n=await this._getSuggestionsFromSources(e,i);if((h=i==null?void 0:i.signal)!=null&&h.aborted)return null;const s={activeSourceIndex:this.activeSourceIndex,searchTerm:e??"",numResults:0,numErrors:0,errors:[],results:[]};return this._formatResponse(s,n),s}_formatSourceResponse(e,i,n){const s=(i==null?void 0:i.value)||[],h=i==null?void 0:i.error,f=this.allSources.at(n);if(h){const m={sourceIndex:n,source:f,error:h};e.errors.push(m),Ae.getLogger(this).error(h),e.numErrors++}else{const m={sourceIndex:n,source:f,results:s};e.results.push(m),e.numResults+=s.length}}_formatResponse(e,i,n){if(i)if(e.activeSourceIndex===gf){const s=n&&Hn(n,"sourceIndex")&&n.sourceIndex!==-1?n.sourceIndex:void 0;i.forEach((h,f)=>{const m=s!==void 0?s:f;this._formatSourceResponse(e,h,m)})}else this._formatSourceResponse(e,i[0],e.activeSourceIndex)}async _getResultsFromSources(e,i){const{allSources:n}=this,s=!e.location&&Hn(e,"sourceIndex")?e.sourceIndex:this.activeSourceIndex,h=[];if(!n.length){const f=new ce("search:no-sources-defined","At least one source is required.",{allSources:n});throw Ae.getLogger(this).error(f),f}return s===gf?n.forEach((f,m)=>{h.push(this._getResultsFromSource(e,m,i))}):h.push(this._getResultsFromSource(e,s,i)),$d(h)}async _getSuggestionsFromSources(e,i){const{allSources:n,activeSourceIndex:s}=this,h=[];if(!n.length){const f=new ce("suggest:no-sources-defined","At least one source is required.",{allSources:n});throw Ae.getLogger(this).error(f),f}return s===gf?n.forEach((f,m)=>{h.push(this._getSuggestionsFromSource(e,m,i))}):h.push(this._getSuggestionsFromSource(e,s,i)),$d(h)}async _getResultsFromSource(e,i,n){var E,k;const s=i!=null?this.allSources.at(i):null;if(!s)return null;const{location:h=null}=e,f=((E=this.view)==null?void 0:E.spatialReference)||MI,m=Hn(s,"maxResults")?s.maxResults:this.maxResults,y=!!(s instanceof pf&&Hn(s,"exactMatch"))&&s.exactMatch,{view:x}=this;return(k=s.getResults)==null?void 0:k.call(s,{view:x,sourceIndex:i,location:h,suggestResult:e,spatialReference:f,exactMatch:y,maxResults:m},n)}async _getSuggestionsFromSource(e,i,n){var y,x;const s=this.allSources.at(i);if(!s)return null;e??(e="");const h=Hn(s,"suggestionsEnabled")?s.suggestionsEnabled:this.suggestionsEnabled,f=e==null?void 0:e.length,m=Hn(s,"minSuggestCharacters")?s.minSuggestCharacters:this.minSuggestCharacters;if(h&&e.trim()&&f>=m){const E=((y=this.view)==null?void 0:y.spatialReference)||MI,k=Hn(s,"maxSuggestions")?s.maxSuggestions:this.maxSuggestions,{view:I}=this,P=!!(s instanceof pf&&Hn(s,"exactMatch"))&&s.exactMatch;return(x=s.getSuggestions)==null?void 0:x.call(s,{view:I,sourceIndex:i,suggestTerm:e,spatialReference:E,maxSuggestions:k,exactMatch:P},n)}return null}_getLayerSourcePopupTemplate(e){const{layer:i}=e;if(i)return Hn(e,"popupTemplate")?e.popupTemplate:i.popupTemplate}_getSourceIndexOfResult(e){return om(this.results??[],({results:i,sourceIndex:n})=>(i==null?void 0:i.includes(e))?n:null)??null}async _goToSearchResult(e){this._abortGoTo();const i=new AbortController;this._gotoController=i;const n={target:{target:e},options:{signal:i.signal}};e||(n.options.animate=!1),await this.callGoTo(n),this._gotoController=null}_getDefaultSymbol(e){var s;const{defaultSymbols:i}=this,n=(s=e.feature)==null?void 0:s.geometry;if(n==null)return null;switch(n.type){case"point":case"multipoint":return i.point;case"polyline":return i.polyline;case"extent":case"polygon":return i.polygon;default:return null}}_removeHighlight(){this.removeHandles(EI)}async _getLayerView(e){var s,h;const{view:i}=this;if(!e||!i||((s=e.layer)==null?void 0:s.type)==="building-component"||((h=e.layer)==null?void 0:h.type)==="subtype-sublayer")return null;const{layer:n}=e;return n?(await i.when(),i.whenLayerView(n)):null}_highlightFeature(e){const{graphic:i,layerView:n}=e,{attributes:s,layer:h}=i,{objectIdField:f}=h,m=(f&&(s==null?void 0:s[f]))??null,y=n.highlight(m??i);this.addHandles(y,EI)}_setResultFloor(e){var h,f,m;const{view:i}=this,n=(h=e.feature)==null?void 0:h.attributes,s=(f=e.feature)==null?void 0:f.sourceLayer;if(s&&"floorInfo"in s&&((m=s==null?void 0:s.floorInfo)!=null&&m.floorField)&&n){const y=n[s.floorInfo.floorField];i==null||i.emit("select-result-floor",y)}}};ot.ALL_INDEX=gf,_([S()],ot.prototype,"_searching",void 0),_([S()],ot.prototype,"_updatingPromise",void 0),_([S({readOnly:!0,value:null})],ot.prototype,"activeSource",null),_([S()],ot.prototype,"activeSourceIndex",null),_([S()],ot.prototype,"allPlaceholder",null),_([S({readOnly:!0})],ot.prototype,"allSources",null),_([S()],ot.prototype,"autoNavigate",void 0),_([S()],ot.prototype,"autoSelect",void 0),_([S()],ot.prototype,"defaultPopupTemplate",void 0),_([S({readOnly:!0})],ot.prototype,"defaultSources",void 0),_([S()],ot.prototype,"defaultSymbols",void 0),_([S()],ot.prototype,"includeDefaultSources",void 0),_([S()],ot.prototype,"locationEnabled",null),_([S()],ot.prototype,"maxInputLength",void 0),_([S()],ot.prototype,"maxResults",void 0),_([S()],ot.prototype,"maxSuggestions",void 0),_([S()],ot.prototype,"messages",void 0),_([S()],ot.prototype,"minSuggestCharacters",void 0),_([S({readOnly:!0})],ot.prototype,"placeholder",null),_([S()],ot.prototype,"popupEnabled",void 0),_([S({type:DE})],ot.prototype,"popupTemplate",void 0),_([S({type:es})],ot.prototype,"portal",void 0),_([S()],ot.prototype,"resultCount",void 0),_([S()],ot.prototype,"resultGraphicEnabled",void 0),_([S({readOnly:!0})],ot.prototype,"resultGraphic",void 0),_([S({readOnly:!0})],ot.prototype,"results",void 0),_([S({readOnly:!0})],ot.prototype,"selectedSuggestion",void 0),_([S()],ot.prototype,"searchAllEnabled",void 0),_([S({readOnly:!0})],ot.prototype,"selectedResult",void 0),_([S()],ot.prototype,"searchTerm",null),_([S({type:s2})],ot.prototype,"sources",void 0),_([S({readOnly:!0})],ot.prototype,"state",null),_([S()],ot.prototype,"suggestionDelay",void 0),_([S()],ot.prototype,"suggestionCount",void 0),_([S({readOnly:!0})],ot.prototype,"suggestions",void 0),_([S()],ot.prototype,"suggestionsEnabled",void 0),_([S({readOnly:!0})],ot.prototype,"updating",null),_([S()],ot.prototype,"view",void 0),_([S()],ot.prototype,"clear",null),ot=_([J("esri.widgets.Search.SearchViewModel")],ot);const $f=ot;let Sh=class extends is{constructor(e,i){super(e,i),this.messages=null,this.showMoreResultsOpen=!1,this.viewModel=null}destroy(){this.viewModel=null}render(){const e={[Nu.showMoreResults]:this.showMoreResultsOpen};return re("div",{class:this.classes(Nu.base,Qe.widget)},re("div",{class:this.classes(Nu.moreResults,e),key:"esri-search-renderer__container"},this._renderSearchResultName(),this._renderMoreResults()))}_renderMoreResults(){return re("div",{key:"esri-search-renderer__more-results"},this._renderMoreResultsButton(),this._renderMoreResultsLists())}_renderSearchResultName(){var n;const e=(n=this.viewModel)==null?void 0:n.selectedResult,i=(e==null?void 0:e.name)||"";return re("div",{class:Nu.moreResultsItem,key:"esri-search-renderer__result-name"},i)}_renderMoreResultsLists(){const{viewModel:e}=this;if(!e)return[];const i=e.results;if((e.resultCount??0)<2)return null;const n=i==null?void 0:i.map(s=>this._renderMoreResultsList(s));return re("div",{class:Nu.moreResultsList,key:"esri-search-renderer__more-results-container"},n)}_renderMoreResultsButton(){const{messages:e,viewModel:i}=this;return i?(i.resultCount??0)<2?null:re("div",{class:Nu.moreResultsItem,key:"esri-search-renderer__more-results-button"},re("a",{bind:this,class:Qe.anchor,href:"#",onclick:this._showMoreResultsClick,onkeydown:this._showMoreResultsClick},this.showMoreResultsOpen?e.hideMoreResults:e.showMoreResults)):null}_renderMoreResultsHeader(e,i){return re("div",{class:Nu.moreResultsListHeader,key:`esri-search-result-renderer__header-${i}`},e)}_renderMoreResultsList(e){var k,I,P;const{results:i}=e,n=(i==null?void 0:i.length)??0,s=n>0,h=(k=this.viewModel)==null?void 0:k.selectedResult,f=n===1&&i[0]===h,m=this._getSourceName(e.source,e.sourceIndex),y=(((P=(I=this.viewModel)==null?void 0:I.results)==null?void 0:P.length)??0)>1&&!f?this._renderMoreResultsHeader(m,e.sourceIndex):null,x=s&&i.map((L,D)=>this._renderMoreResultsListItem(L,D)),E=s&&!f?re("ul",{key:`esri-search-result-renderer__list-${e.sourceIndex}`},x):null;return s?re("div",{key:`esri-search-result-renderer__results-${e.sourceIndex}`},y,E):null}_renderMoreResultsListItem(e,i){var s;const n=(s=this.viewModel)==null?void 0:s.selectedResult;return e!==n?re("li",{key:`esri-search-result-renderer__list-item-${i}`},re("a",{bind:this,class:Qe.anchor,"data-result":e,href:"#",onclick:this._selectResultClick,onkeydown:this._selectResultClick,tabIndex:0},e.name)):null}_showMoreResultsClick(e){var n,s;e.preventDefault(),this.showMoreResultsOpen=!this.showMoreResultsOpen;const i=(s=(n=this.viewModel)==null?void 0:n.view)==null?void 0:s.popup;i&&"reposition"in i&&i.reposition()}_selectResultClick(e){var n;e.preventDefault();const i=e.currentTarget["data-result"];(n=this.viewModel)==null||n.select(i)}_getSourceName(e,i){return i===$f.ALL_INDEX?this.messages.all:e.name}};_([S(),Gn("esri/widgets/Search/t9n/Search")],Sh.prototype,"messages",void 0),_([S()],Sh.prototype,"showMoreResultsOpen",void 0),_([S()],Sh.prototype,"viewModel",void 0),_([$w()],Sh.prototype,"_showMoreResultsClick",null),_([$w()],Sh.prototype,"_selectResultClick",null),Sh=_([J("esri.widgets.Search.SearchResultRenderer")],Sh);const sye=Sh,th={close:"esri-icon-close",collapse:"esri-icon-collapse",down:"esri-icon-down",downArrow:"esri-icon-down-arrow",dragHorizontal:"esri-icon-drag-horizontal",dragVertical:"esri-icon-drag-vertical",duplicate:"esri-icon-duplicate",expand:"esri-icon-expand",fontFallbackText:"esri-icon-font-fallback-text",forward:"esri-icon-forward",handleVertical:"esri-icon-handle-vertical",icon:"esri-icon",left:"esri-icon-left",locateCircled:"esri-icon-locate-circled",noticeTriangle:"esri-icon-notice-triangle",pause:"esri-icon-pause",play:"esri-icon-play",plus:"esri-icon-plus",radioChecked:"esri-icon-radio-checked",radioUnchecked:"esri-icon-radio-unchecked",refresh:"esri-icon-refresh",reverse:"esri-icon-reverse",right:"esri-icon-right",search:"esri-icon-search",swap:"esri-icon-swap",table:"esri-icon-table",trash:"esri-icon-trash",up:"esri-icon-up",upArrow:"esri-icon-up-arrow",upDownArrows:"esri-icon-up-down-arrows",urbanModel:"esri-icon-urban-model",zoomInMagnifyingGlass:"esri-icon-zoom-in-magnifying-glass",zoomToObject:"esri-icon-zoom-to-object"},oye=/<[a-z/][\s\S]*>/i,aye=(t,e)=>{const i=_K(e).split(/\s/),n=new RegExp(`(${i.join("|")})`,"gi");return t.replace(n,s=>`<strong>${s}</strong>`)};let lt=class extends is{constructor(e,i){super(e,i),this._activeMenuItemIndex=-1,this._inputNode=null,this._focusAbortController=null,this._menuItemCount=0,this._sourceMenuButtonNode=null,this._sourceListNode=null,this._suggestionListNode=null,this._searchResultRenderer=new sye,this._suggestController=null,this._searchController=null,this._locateFailed=!1,this._container=null,this.activeMenu="none",this.disabled=!1,this.messages=null,this.messagesCommon=null,this.viewModel=new $f,this._clearActiveMenu=()=>{this.activeMenu="none"},this._removeActiveMenu=n=>{var h;const s=n.relatedTarget;s&&((h=this._container)!=null&&h.contains(s))||this._clearActiveMenu()},this._renderSearchResultsContent=()=>this._searchResultRenderer,this.addHandles([Ee(()=>this.searchTerm,n=>{var s,h;(n&&this.activeMenu==="warning"||!n&&!((h=(s=this.viewModel)==null?void 0:s.selectedSuggestion)!=null&&h.location))&&this._clearActiveMenu()}),Ns(()=>{var n;return(n=this.viewModel)==null?void 0:n.allSources},"change",()=>this._watchSourceChanges()),Ee(()=>this.activeMenu,()=>this._resetActiveMenuItemIndex(),Ct),Ee(()=>this.viewModel,n=>this._searchResultRenderer.viewModel=n,Ct),Ee(()=>this.viewModel.results,()=>this._searchResultRenderer.showMoreResultsOpen=!1),Ee(()=>{var n;return(n=this.viewModel)==null?void 0:n.defaultPopupTemplate},n=>{n&&(n.content=this._renderSearchResultsContent)},Ct)])}destroy(){var e;this._cancelSuggest(),this._cancelSearch(),this._searchResultRenderer=mt(this._searchResultRenderer),(e=this._focusAbortController)==null||e.abort()}get displayedSearchTerm(){return`${this.viewModel.searchTerm}`.trim()}get inputId(){return this._buildId("input")}get suggestionsMenuId(){return this._buildId("suggest-menu")}get sourceMenuId(){return this._buildId("source-menu")}get sourceMenuButtonId(){return this._buildId("source-menu-button")}get activeSource(){var e;return(e=this.viewModel)==null?void 0:e.activeSource}get activeSourceIndex(){return this.viewModel.activeSourceIndex}set activeSourceIndex(e){this.viewModel.activeSourceIndex=e}get allPlaceholder(){return this.viewModel.allPlaceholder}set allPlaceholder(e){this.viewModel.allPlaceholder=e}get allSources(){return this.viewModel.allSources}get autoNavigate(){return this.viewModel.autoNavigate}set autoNavigate(e){this.viewModel.autoNavigate=e}get autoSelect(){return this.viewModel.autoSelect}set autoSelect(e){this.viewModel.autoSelect=e}get defaultSources(){return this.viewModel.defaultSources}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get icon(){return"search"}set icon(e){this._overrideIfSome("icon",e)}get includeDefaultSources(){return this.viewModel.includeDefaultSources}set includeDefaultSources(e){this.viewModel.includeDefaultSources=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get locationEnabled(){return this.viewModel.locationEnabled}set locationEnabled(e){this.viewModel.locationEnabled=e}get maxResults(){return this.viewModel.maxResults}set maxResults(e){this.viewModel.maxResults=e}get maxSuggestions(){return this.viewModel.maxSuggestions}set maxSuggestions(e){this.viewModel.maxSuggestions=e}get minSuggestCharacters(){return this.viewModel.minSuggestCharacters}set minSuggestCharacters(e){this.viewModel.minSuggestCharacters=e}get popupEnabled(){return this.viewModel.popupEnabled}set popupEnabled(e){this.viewModel.popupEnabled=e}get popupTemplate(){return this.viewModel.popupTemplate}set popupTemplate(e){this.viewModel.popupTemplate=e}get portal(){var e;return(e=this.viewModel)==null?void 0:e.portal}set portal(e){this.viewModel&&(this.viewModel.portal=e)}get resultGraphic(){return this.viewModel.resultGraphic}set resultGraphic(e){this.viewModel.resultGraphic=e}get resultGraphicEnabled(){return this.viewModel.resultGraphicEnabled}set resultGraphicEnabled(e){this.viewModel.resultGraphicEnabled=e}get results(){return this.viewModel.results}get searchAllEnabled(){return this.viewModel.searchAllEnabled}set searchAllEnabled(e){this.viewModel.searchAllEnabled=e}get searchTerm(){return this.viewModel.searchTerm}set searchTerm(e){this.viewModel.searchTerm=e}get selectedResult(){return this.viewModel.selectedResult}get sources(){return this.viewModel.sources}set sources(e){this.viewModel.sources=e}get suggestions(){return this.viewModel.suggestions}get suggestionsEnabled(){return this.viewModel.suggestionsEnabled}set suggestionsEnabled(e){this.viewModel.suggestionsEnabled=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}clear(){this.viewModel.clear()}focus(){this._handleFocus(),this.emit("search-focus")}async _handleFocus(){var i,n;(i=this._focusAbortController)==null||i.abort(),this._focusAbortController=new AbortController;const e=this._focusAbortController.signal;await Yr(YP(e)),(n=this._inputNode)==null||n.focus()}blur(){var e;(e=this._inputNode)==null||e.blur(),this.emit("search-blur")}async search(e){this._clearActiveMenu(),this._cancelSuggest(),this._cancelSearch();const i=new AbortController,{signal:n}=i;this._searchController=i;try{const s=await this.viewModel.search(e,{signal:n});return this._searchController!==i?void 0:(this.activeMenu=s!=null&&s.numResults?"none":"warning",this._searchController=null,s)}catch{return this._searchController!==i?void 0:(this._clearActiveMenu(),void(this._searchController=null))}}async suggest(e){this._cancelSuggest();const i=new AbortController,{signal:n}=i;this._suggestController=i;try{const s=await this.viewModel.suggest(e,null,{signal:n});return this._suggestController!==i?void 0:(this._suggestController=null,s!=null&&s.numResults&&this._openSuggestionMenu(),this._scrollToTopSuggestion(),s)}catch{return this._suggestController!==i||(this._suggestController=null),null}}render(){const{state:e}=this.viewModel,i={[Qe.disabled]:e==="disabled",[Qe.widgetDisabled]:this.disabled};return re("div",{class:this.classes(Ht.base,Qe.widget,i)},e==="loading"?this._renderLoader():this._renderContainer())}_renderSubmitButton(){const{messages:e,disabled:i}=this;return re("button",{"aria-label":e.searchButtonTitle,bind:this,class:this.classes(Ht.submitButton,Qe.widgetButton),disabled:i,key:"esri-search__submit-button",onclick:this._handleSearchButtonClick,title:e.searchButtonTitle,type:"button"},re("span",{"aria-hidden":"true",class:th.search}))}_renderWarningMenu(){return re("div",{class:this.classes(Qe.menu,Ht.warningMenu),key:"esri-search__error-menu"},re("div",{class:Ht.warningMenuBody},this._renderWarning()))}_renderSourceMenuButton(){const{messages:e,activeMenu:i,sourceMenuId:n,sourceMenuButtonId:s,disabled:h}=this,{activeSourceIndex:f,allSources:m}=this.viewModel;return m.length>1?re("button",{afterCreate:hv,"aria-controls":n,"aria-expanded":(i==="source").toString(),"aria-haspopup":"true","aria-label":e.searchIn,bind:this,class:this.classes(Ht.sourcesButton,Qe.widgetButton),"data-node-ref":"_sourceMenuButtonNode",disabled:h,id:s,key:"esri-search__source-menu-button",onclick:this._handleSourcesMenuToggleClick,onfocus:this._handleSourcesMenuToggleFocus,title:e.searchIn,type:"button"},re("span",{"aria-hidden":"true",class:this.classes(th.downArrow,Ht.sourcesButtonDown)}),re("span",{"aria-hidden":"true",class:this.classes(th.upArrow,Ht.sourcesButtonUp)}),re("span",{class:Ht.sourceName},this._getSourceName(f))):null}_renderSourcesList(){const{allSources:e,searchAllEnabled:i}=this.viewModel,{_activeMenuItemIndex:n,activeMenu:s,sourceMenuId:h,sourceMenuButtonId:f}=this,m=s==="source"&&n>-1?this._buildId("source-item",n):null;return e.length>1?re("ul",{afterCreate:hv,"aria-activedescendant":m,"aria-labelledby":f,bind:this,class:Qe.menuList,"data-node-ref":"_sourceListNode",id:h,onkeydown:this._handleSourceMenuKeydown,onkeyup:this._handleSourceMenuKeyup,role:"menu",tabIndex:-1},i?this._renderSource($f.ALL_INDEX):null,e.map((y,x)=>this._renderSource(x)).toArray()):null}_renderSourcesMenu(){const{allSources:e}=this.viewModel;return e.length>1?re("div",{class:this.classes(Qe.menu,Ht.sourcesMenu),key:"esri-search__source-menu"},this._renderSourcesList()):null}_renderLoader(){const{messages:e,messagesCommon:i,disabled:n}=this;return re("div",{class:Qe.loader,key:"base-loader",tabIndex:n?-1:void 0},re("span",{"aria-hidden":"true",class:Qe.loaderAnimation}),re("span",{class:th.fontFallbackText},e.searchButtonTitle),re("span",{class:Qe.loaderText},i.loading))}_renderContainer(){const{allSources:e,state:i}=this.viewModel,{activeMenu:n}=this,s={[Ht.hasMultipleSources]:e.length>1,[Ht.isLoading]:i==="loading",[Ht.isSearching]:i==="searching",[Ht.showWarning]:n==="warning",[Ht.showSources]:n==="source",[Ht.showSuggestions]:n==="suggestion"};return re("div",{afterCreate:h=>{this._container=h,h.addEventListener("focusout",this._removeActiveMenu)},afterRemoved:h=>{h.removeEventListener("focusout",this._removeActiveMenu)},class:this.classes(s,Ht.container),key:"base-container",tabIndex:-1},this._renderSourceMenuButton(),this._renderSourcesMenu(),this._renderInputContainer(),this._renderSubmitButton(),this._renderWarningMenu())}_renderClearButton(){return this.searchTerm?re("button",{bind:this,class:this.classes(Ht.clearButton,Qe.widgetButton),disabled:this.disabled,key:"esri-search__clear-button",onclick:this._handleClearButtonClick,onfocus:this._clearActiveMenu,title:this.messages.clearButtonTitle,type:"button"},re("span",{"aria-hidden":"true",class:th.close})):null}_renderLocationGroup(){const{messages:e,locationEnabled:i,displayedSearchTerm:n}=this,s=i&&!n,h=this.activeMenu==="suggestion"&&this._activeMenuItemIndex===0;return s?re("ul",{class:this.classes(Qe.menuList,Ht.suggestionList,Ht.suggestionListCurrentLocation),key:"esri-search__suggestion-list-current-location",role:"group"},re("li",{"aria-selected":(this.activeMenu==="suggestion"&&this._activeMenuItemIndex===0).toString(),bind:this,class:this.classes(Qe.menuItem,h?Qe.menuItemFocus:null),"data-current-location-item":!0,id:this._buildId("suggestion-item",0),onclick:this._handleUseCurrentLocationClick,role:"option"},re("span",{"aria-hidden":"true",class:th.locateCircled})," ",e.useCurrentLocation)):null}_renderInput(){const{activeMenu:e,locationEnabled:i,displayedSearchTerm:n,messages:s,suggestionsMenuId:h,inputId:f,_activeMenuItemIndex:m,disabled:y}=this,{maxInputLength:x,placeholder:E,searchTerm:k,suggestionCount:I}=this.viewModel,P=!(!(i&&!n)&&!I),L=e==="suggestion"&&m>-1?this._buildId("suggestion-item",m):null;return re("input",{afterCreate:hv,"aria-activedescendant":L,"aria-autocomplete":"list","aria-controls":P?h:null,"aria-expanded":(P&&e==="suggestion").toString(),"aria-haspopup":"listbox","aria-label":s.searchButtonTitle,autocomplete:"off",bind:this,class:this.classes(Qe.input,Ht.input),"data-node-ref":"_inputNode",disabled:y,id:f,maxlength:x,onblur:this.blur,onclick:this._openSuggestionMenu,onfocus:this.focus,oninput:this._handleInputPaste,onkeyup:this._handleInputKeyup,onpaste:this._handleInputPaste,placeholder:E,role:"combobox",title:k?"":E,type:"text",value:k})}_renderForm(){return re("form",{bind:this,class:Ht.form,disabled:this.disabled,key:"esri-search__form",onsubmit:this._formSubmit,role:"search"},this._renderInput())}_renderSuggestList(e){const{sourceIndex:i}=e,{results:n}=e;return(n==null?void 0:n.length)?re("ul",{class:this.classes(Qe.menuList,Ht.suggestionList),key:`esri-search__suggestion-list-${i}`,role:"group"},n==null?void 0:n.map(h=>this._renderSuggestion(h,this._menuItemCount++))):null}_renderSuggestionsGroup(){const{suggestions:e}=this.viewModel;return e?e.map(i=>[this._renderSuggestionHeader(i),this._renderSuggestList(i)]):[]}_renderSuggestionsMenu(){const{displayedSearchTerm:e,locationEnabled:i,suggestionsMenuId:n,inputId:s}=this,{suggestionCount:h}=this.viewModel,f=i&&!e||h;return this._menuItemCount=0,f?re("div",{afterCreate:hv,"aria-labelledby":s,bind:this,class:this.classes(Qe.menu,Ht.suggestionsMenu),"data-node-ref":"_suggestionListNode",id:n,key:"esri-search__suggestions-menu",role:"listbox"},this._renderLocationGroup(),this._renderSuggestionsGroup()):null}_renderInputContainer(){return re("div",{class:Ht.inputContainer,key:"esri-search__input-container"},this._renderForm(),this._renderSuggestionsMenu(),this._renderClearButton())}_renderSuggestionHeader(e){var m;const{allSources:i,activeSourceIndex:n}=this.viewModel,{sourceIndex:s}=e,h=(m=e.results)==null?void 0:m.length,f=i.length>1&&n===$f.ALL_INDEX;return h&&f?re("div",{class:Qe.menuHeader,key:`esri-search__suggestion-header-${s}`},this._getSourceName(s)):null}_renderSuggestion(e,i){const{_activeMenuItemIndex:n,viewModel:{searchTerm:s}}=this;if(!s)return;const h=this.activeMenu==="suggestion"&&n===i;return re("li",{"aria-selected":(this.activeMenu==="suggestion"&&this._activeMenuItemIndex===i).toString(),bind:this,class:this.classes(Qe.menuItem,h?Qe.menuItemFocus:null),"data-suggestion":e,id:this._buildId("suggestion-item",i),innerHTML:this._getSuggestResultHTML(e.text,s),key:`esri-search__suggestion_${i}`,onclick:this._handleSuggestionClick,role:"option"})}_renderSource(e){const{activeSourceIndex:i,searchAllEnabled:n}=this.viewModel,s={[Qe.menuItemActive]:e===i,[Qe.menuItemFocus]:this.activeMenu==="source"&&e===(n?this._activeMenuItemIndex-1:this._activeMenuItemIndex)},h=n?e+1:e;return re("li",{"aria-checked":(e===i).toString(),bind:this,class:this.classes(Ht.source,Qe.menuItem,s),"data-source-index":e,id:this._buildId("source-item",h),key:`esri-search__source-${e}`,onclick:this._handleSourceClick,role:"menuitemradio"},this._getSourceName(e))}_renderNoResultsWarning(e){const{messages:i}=this,n=e?fE(i.noResultsFoundForValue,{value:`"${e}"`}):i.noResultsFound;return re("div",{key:"esri-search__no_results"},re("div",{class:Ht.warningMenuHeader},i.noResults),re("div",{class:Ht.warningMenuText},n))}_renderEmptySearchWarning(){const{messages:e}=this;return re("div",{key:"esri-search__empty-search"},re("span",{"aria-hidden":"true",class:th.noticeTriangle}),re("span",{class:Ht.noValueText},e.emptyValue))}_renderLocateWarning(){const{messages:e}=this;return re("div",{key:"esri-search__locate-error"},re("span",{"aria-hidden":"true",class:th.noticeTriangle}),re("span",{class:Ht.noValueText},e.locateError))}_renderWarning(){var s;const{displayedSearchTerm:e,_locateFailed:i}=this,{viewModel:n}=this;return i?this._renderLocateWarning():(s=n.selectedSuggestion)!=null&&s.location||e?this._renderNoResultsWarning(e):this._renderEmptySearchWarning()}_resetActiveMenuItemIndex(){this._activeMenuItemIndex=-1}_buildId(e,i){return`${this.id}-${e}${i===void 0?"":`-${i}`}`}_watchSourceChanges(){const{viewModel:{allSources:e}}=this,i="sources";this.removeHandles(i),e.forEach(n=>this.addHandles(Ee(()=>n.name,()=>this.scheduleRender()),i))}_handleSourcesMenuToggleFocus(){this.activeMenu!=="source"&&this._clearActiveMenu()}_handleSourcesMenuToggleClick(){var i;const e=this.activeMenu==="source";this.activeMenu=e?"none":"source",this.renderNow(),this.activeMenu==="source"&&((i=this._sourceListNode)==null||i.focus())}_handleClearButtonClick(){this.viewModel.clear(),this._focus()}_handleSearchButtonClick(){this.search()}_handleSuggestionClick(e){const i=$I(e.currentTarget);i&&(this._focus(),this.search(i))}_handleUseCurrentLocationClick(){this._useCurrentLocation()}_useCurrentLocation(){this._focus("none"),this._cancelSuggest(),this._cancelSearch();const e=new AbortController,{signal:i}=e;this._searchController=e,(async()=>{try{const n=await this.viewModel.searchNearby({signal:i});this.activeMenu=n!=null&&n.numResults?"none":"warning"}catch{this._locateFailed=!0,this.activeMenu="warning"}finally{this._searchController=null}})()}_handleSourceClick(e){this._setSourceFromMenuItem(e.currentTarget)}_setSourceFromMenuItem(e){var n;if(!e)return;const i=lye(e);i!=null&&(this.viewModel.activeSourceIndex=i,this._clearActiveMenu(),(n=this._sourceMenuButtonNode)==null||n.focus())}_cancelSuggest(){this._suggestController=Ms(this._suggestController)}_cancelSearch(){this._searchController=Ms(this._searchController),this._locateFailed=!1}_handleInputKeyup(e){var h;const{key:i}=e;if(e.ctrlKey||e.metaKey||i==="Copy"||i==="ArrowLeft"||i==="ArrowRight"||i==="Shift")return;if(i==="Tab"||i==="Escape"||e.shiftKey&&i==="Tab")return this._cancelSuggest(),void(i==="Escape"&&this._clearActiveMenu());const n=i==="Home"||i==="End"||i==="ArrowUp"||i==="ArrowDown";if(i==="Enter"&&this._activeMenuItemIndex<0)return void this._cancelSuggest();const s=(h=this._suggestionListNode)==null?void 0:h.getElementsByTagName("li");if(s!=null&&s.length){if(this.activeMenu!=="suggestion"&&this._openSuggestionMenu(),n)return e.preventDefault(),this._cancelSuggest(),void this._handleItemNavigation(i,s,this._suggestionListNode);const f=s[this._activeMenuItemIndex];if(i==="Enter"&&f){const m=$I(f);return void(m?(this._focus(),this.search(m)):cye(f)&&this._useCurrentLocation())}}this.viewModel.searchTerm&&this.suggest()}_handleItemNavigation(e,i,n){const s=this._activeMenuItemIndex;e==="Home"&&(this._activeMenuItemIndex=0),e==="End"&&(this._activeMenuItemIndex=i.length-1),e==="ArrowUp"&&(this._activeMenuItemIndex=this._activeMenuItemIndex<=0?i.length-1:this._activeMenuItemIndex-1),e==="ArrowDown"&&(this._activeMenuItemIndex=this._activeMenuItemIndex===i.length-1?0:this._activeMenuItemIndex+1),s!==this._activeMenuItemIndex&&n&&hye(i[this._activeMenuItemIndex],n)}_scrollToTopSuggestion(){this._suggestionListNode&&(this._suggestionListNode.scrollTop=0)}_openSuggestionMenu(){this.activeMenu="suggestion"}_handleInputPaste(e){const i=e.target;this.viewModel.searchTerm!==i.value&&(this.viewModel.searchTerm=i.value),this.viewModel.searchTerm&&this.suggest()}_handleSourceMenuKeydown(e){var n;const{key:i}=e;if(BD(i)){e.preventDefault();const s=(n=this._sourceListNode)==null?void 0:n.getElementsByTagName("li"),h=s==null?void 0:s[this._activeMenuItemIndex];this._setSourceFromMenuItem(h)}else i!=="ArrowUp"&&i!=="ArrowDown"&&i!=="End"&&i!=="Home"||e.preventDefault()}_handleSourceMenuKeyup(e){var h,f,m;const{key:i}=e,n=i==="ArrowUp"||i==="ArrowDown"||i==="End"||i==="Home";if(n&&e.preventDefault(),i==="Escape")return this._clearActiveMenu(),void((h=this._sourceMenuButtonNode)==null?void 0:h.focus());const s=(f=this._sourceListNode)==null?void 0:f.getElementsByTagName("li");return s&&s.length!==0&&n?(this.activeMenu!=="source"&&(this.activeMenu="source"),void this._handleItemNavigation(i,s,(m=this._sourceListNode)==null?void 0:m.parentElement)):void 0}_focus(e){this.focus(),e&&(this.activeMenu=e)}_formSubmit(e){e.preventDefault(),this._activeMenuItemIndex===-1&&this.search()}_getSourceName(e){const{messages:i}=this,n=this.viewModel,{allSources:s}=n,h=s.at(e);return e===$f.ALL_INDEX?i.all:h&&h.name||i.untitledSource}_getSuggestResultHTML(e,i){return e?oye.test(e)?e:aye(e,i):this.messages.untitledResult}};function $I(t){return t==null?void 0:t["data-suggestion"]}function lye(t){return t==null?void 0:t["data-source-index"]}function cye(t){return!!(t!=null&&t["data-current-location-item"])}function hye(t,e){const i=t.getBoundingClientRect(),n=e.getBoundingClientRect(),s=i.top+i.height,h=n.top+n.height,f=i.top,m=n.top;(s>h||f<m)&&t.scrollIntoView({block:"end"})}_([S()],lt.prototype,"_activeMenuItemIndex",void 0),_([S()],lt.prototype,"displayedSearchTerm",null),_([S({readOnly:!0})],lt.prototype,"inputId",null),_([S({readOnly:!0})],lt.prototype,"suggestionsMenuId",null),_([S({readOnly:!0})],lt.prototype,"sourceMenuId",null),_([S({readOnly:!0})],lt.prototype,"sourceMenuButtonId",null),_([S()],lt.prototype,"activeMenu",void 0),_([S({readOnly:!0})],lt.prototype,"activeSource",null),_([S()],lt.prototype,"activeSourceIndex",null),_([S()],lt.prototype,"allPlaceholder",null),_([S({readOnly:!0})],lt.prototype,"allSources",null),_([S()],lt.prototype,"autoNavigate",null),_([S()],lt.prototype,"autoSelect",null),_([S({readOnly:!0})],lt.prototype,"defaultSources",null),_([S()],lt.prototype,"disabled",void 0),_([S()],lt.prototype,"goToOverride",null),_([S()],lt.prototype,"icon",null),_([S()],lt.prototype,"includeDefaultSources",null),_([S()],lt.prototype,"label",null),_([S()],lt.prototype,"locationEnabled",null),_([S()],lt.prototype,"maxResults",null),_([S()],lt.prototype,"maxSuggestions",null),_([S(),Gn("esri/widgets/Search/t9n/Search")],lt.prototype,"messages",void 0),_([S(),Gn("esri/t9n/common")],lt.prototype,"messagesCommon",void 0),_([S()],lt.prototype,"minSuggestCharacters",null),_([S()],lt.prototype,"popupEnabled",null),_([S()],lt.prototype,"popupTemplate",null),_([S()],lt.prototype,"portal",null),_([S()],lt.prototype,"resultGraphic",null),_([S()],lt.prototype,"resultGraphicEnabled",null),_([S({readOnly:!0})],lt.prototype,"results",null),_([S()],lt.prototype,"searchAllEnabled",null),_([S()],lt.prototype,"searchTerm",null),_([S({readOnly:!0})],lt.prototype,"selectedResult",null),_([S()],lt.prototype,"sources",null),_([S({readOnly:!0})],lt.prototype,"suggestions",null),_([S()],lt.prototype,"suggestionsEnabled",null),_([S()],lt.prototype,"view",null),_([jU(["search-complete","search-clear","search-start","select-result","suggest-start","suggest-complete"]),S({type:$f})],lt.prototype,"viewModel",void 0),lt=_([J("esri.widgets.Search")],lt);const uye=lt;var rx=QW(()=>_t),dye=ap('<div id="map-container" class="svelte-1avm01t"><div><div id="mapDiv" class="svelte-1avm01t"></div></div></div>');function pye(t,e){sp(e,!1);const i=o3(),n=()=>Fh(KY,"$key",i),s=()=>Fh(rN,"$mapSize",i);eK(()=>{rx(rx().apiKey=n());const m=new wge({container:"mapDiv",map:{basemap:"osm/light-gray"},constraints:{snapToZoom:!0},center:[-95.6926,38.7408],zoom:4});m.ui.move("zoom","bottom-right");const y=L=>{const D=new du({geometry:L,symbol:{type:"simple-marker",style:"square",color:"blue",size:"8px",outline:{color:[255,255,0],width:3}}});m.graphics.removeAll(),m.graphics.add(D)},x=()=>{Ee(()=>[m.stationary,m.scale,m.zoom,m.center,m.extent],([L,D,j,H,W])=>{L&&(ml.set(m),y(m.center))}),ml.set(m)},E=new Wge({view:m}),k=new _I({expandIcon:"basemap",view:m,content:E,autoCollapse:!0,closeOnEsc:!0,group:"mapControls"}),I=new uye({view:m,includeDefaultSources:!1,sources:[{name:"arcgis geocoding services",singleLineFieldName:"SingleLine",placeholder:"Find place or address",apiKey:rx().apiKey,url:"https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer"}]}),P=new _I({expandIcon:"search",view:m,content:I,group:"mapControls"});m.ui.add([k,P],"top-trailing"),m.when(x)}),Vm();var h=dye(),f=wt(h);Rx(()=>YW(f,`${`view-container-${s()}`??""} svelte-1avm01t`)),Kh(t,h),op()}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */function fye(t){return t.map(e=>{let i="";for(let n=0;n<e;n++)i+=((1+Math.random())*65536|0).toString(16).substring(1);return i}).join("-")}const Il=()=>fye([2,1,1,1,3]);/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 *//*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var uB=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Cw=uB.join(","),dB=typeof Element>"u",ep=dB?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Iw=!dB&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},Aw=function t(e,i){var n;i===void 0&&(i=!0);var s=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"inert"),h=s===""||s==="true",f=h||i&&e&&t(e.parentNode);return f},gye=function(e){var i,n=e==null||(i=e.getAttribute)===null||i===void 0?void 0:i.call(e,"contenteditable");return n===""||n==="true"},pB=function(e,i,n){if(Aw(e))return[];var s=Array.prototype.slice.apply(e.querySelectorAll(Cw));return i&&ep.call(e,Cw)&&s.unshift(e),s=s.filter(n),s},fB=function t(e,i,n){for(var s=[],h=Array.from(e);h.length;){var f=h.shift();if(!Aw(f,!1))if(f.tagName==="SLOT"){var m=f.assignedElements(),y=m.length?m:f.children,x=t(y,!0,n);n.flatten?s.push.apply(s,x):s.push({scopeParent:f,candidates:x})}else{var E=ep.call(f,Cw);E&&n.filter(f)&&(i||!e.includes(f))&&s.push(f);var k=f.shadowRoot||typeof n.getShadowRoot=="function"&&n.getShadowRoot(f),I=!Aw(k,!1)&&(!n.shadowRootFilter||n.shadowRootFilter(f));if(k&&I){var P=t(k===!0?f.children:k.children,!0,n);n.flatten?s.push.apply(s,P):s.push({scopeParent:f,candidates:P})}else h.unshift.apply(h,f.children)}}return s},gB=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},xd=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||gye(e))&&!gB(e)?0:e.tabIndex},mye=function(e,i){var n=xd(e);return n<0&&i&&!gB(e)?0:n},yye=function(e,i){return e.tabIndex===i.tabIndex?e.documentOrder-i.documentOrder:e.tabIndex-i.tabIndex},mB=function(e){return e.tagName==="INPUT"},vye=function(e){return mB(e)&&e.type==="hidden"},bye=function(e){var i=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(n){return n.tagName==="SUMMARY"});return i},wye=function(e,i){for(var n=0;n<e.length;n++)if(e[n].checked&&e[n].form===i)return e[n]},_ye=function(e){if(!e.name)return!0;var i=e.form||Iw(e),n=function(m){return i.querySelectorAll('input[type="radio"][name="'+m+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=n(window.CSS.escape(e.name));else try{s=n(e.name)}catch(f){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",f.message),!1}var h=wye(s,e.form);return!h||h===e},xye=function(e){return mB(e)&&e.type==="radio"},Sye=function(e){return xye(e)&&!_ye(e)},Tye=function(e){var i,n=e&&Iw(e),s=(i=n)===null||i===void 0?void 0:i.host,h=!1;if(n&&n!==e){var f,m,y;for(h=!!((f=s)!==null&&f!==void 0&&(m=f.ownerDocument)!==null&&m!==void 0&&m.contains(s)||e!=null&&(y=e.ownerDocument)!==null&&y!==void 0&&y.contains(e));!h&&s;){var x,E,k;n=Iw(s),s=(x=n)===null||x===void 0?void 0:x.host,h=!!((E=s)!==null&&E!==void 0&&(k=E.ownerDocument)!==null&&k!==void 0&&k.contains(s))}}return h},kI=function(e){var i=e.getBoundingClientRect(),n=i.width,s=i.height;return n===0&&s===0},Eye=function(e,i){var n=i.displayCheck,s=i.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var h=ep.call(e,"details>summary:first-of-type"),f=h?e.parentElement:e;if(ep.call(f,"details:not([open]) *"))return!0;if(!n||n==="full"||n==="legacy-full"){if(typeof s=="function"){for(var m=e;e;){var y=e.parentElement,x=Iw(e);if(y&&!y.shadowRoot&&s(y)===!0)return kI(e);e.assignedSlot?e=e.assignedSlot:!y&&x!==e.ownerDocument?e=x.host:e=y}e=m}if(Tye(e))return!e.getClientRects().length;if(n!=="legacy-full")return!0}else if(n==="non-zero-area")return kI(e);return!1},Mye=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var i=e.parentElement;i;){if(i.tagName==="FIELDSET"&&i.disabled){for(var n=0;n<i.children.length;n++){var s=i.children.item(n);if(s.tagName==="LEGEND")return ep.call(i,"fieldset[disabled] *")?!0:!s.contains(e)}return!0}i=i.parentElement}return!1},Ow=function(e,i){return!(i.disabled||Aw(i)||vye(i)||Eye(i,e)||bye(i)||Mye(i))},v6=function(e,i){return!(Sye(i)||xd(i)<0||!Ow(e,i))},$ye=function(e){var i=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(i)||i>=0)},kye=function t(e){var i=[],n=[];return e.forEach(function(s,h){var f=!!s.scopeParent,m=f?s.scopeParent:s,y=mye(m,f),x=f?t(s.candidates):m;y===0?f?i.push.apply(i,x):i.push(m):n.push({documentOrder:h,tabIndex:y,item:s,isScope:f,content:x})}),n.sort(yye).reduce(function(s,h){return h.isScope?s.push.apply(s,h.content):s.push(h.content),s},[]).concat(i)},yB=function(e,i){i=i||{};var n;return i.getShadowRoot?n=fB([e],i.includeContainer,{filter:v6.bind(null,i),flatten:!1,getShadowRoot:i.getShadowRoot,shadowRootFilter:$ye}):n=pB(e,i.includeContainer,v6.bind(null,i)),kye(n)},Cye=function(e,i){i=i||{};var n;return i.getShadowRoot?n=fB([e],i.includeContainer,{filter:Ow.bind(null,i),flatten:!0,getShadowRoot:i.getShadowRoot}):n=pB(e,i.includeContainer,Ow.bind(null,i)),n},Lp=function(e,i){if(i=i||{},!e)throw new Error("No node provided");return ep.call(e,Cw)===!1?!1:v6(i,e)},Iye=uB.concat("iframe").join(","),sx=function(e,i){if(i=i||{},!e)throw new Error("No node provided");return ep.call(e,Iye)===!1?!1:Ow(i,e)};const vB={getShadowRoot:!0};function gAe(t){return t?t.id=t.id||`${t.tagName.toLowerCase()}-${Il()}`:""}function bB(t){return Array.isArray(t)?t:Array.from(t)}function mAe(t){const e=Uc(t,`.${Xo.darkMode}, .${Xo.lightMode}`);return e!=null&&e.classList.contains("calcite-mode-dark")?"dark":"light"}function ll(t){const e="dir",i=`[${e}]`,n=Uc(t,i);return n?n.getAttribute(e):"ltr"}function _M(t){return t.getRootNode()}function Aye(t){const e=_M(t);return"host"in e?e:null}function wB(t){return t.host||null}function Ey(t,{selector:e,id:i}){if(!t)return null;t.assignedSlot&&(t=t.assignedSlot);const n=_M(t);return(i?"getElementById"in n?n.getElementById(i):null:e?n.querySelector(e):null)||Ey(wB(n),{selector:e,id:i})}function Uc(t,e){return t?t.closest(e)||Uc(wB(_M(t)),e):null}function Oye(t,e){return _B(t,e)}function _B(t,e){if(!t)return;const i=e(t);if(i!==void 0)return i;const{parentNode:n}=t;return _B(n instanceof ShadowRoot?n.host:n,e)}function Pye(t,e){return!!Oye(e,i=>i===t?!0:void 0)}function Rye(t){return typeof(t==null?void 0:t.setFocus)=="function"}async function y0(t){if(t)return Rye(t)?t.setFocus():t.focus()}function Nye(t){if(t)return yB(t,vB)[0]??t}function xM(t){var e;(e=Nye(t))==null||e.focus()}const Pm=":not([slot])";function xB(t,e,i){e&&!Array.isArray(e)&&typeof e!="string"&&(i=e,e=null);const n=e?Array.isArray(e)?e.map(s=>`[slot="${s}"]`).join(","):`[slot="${e}"]`:Pm;return i!=null&&i.all?Lye(t,n,i):Dye(t,n,i)}function SB(t,e){return t?Array.from(t.children||[]).filter(i=>i==null?void 0:i.matches(e)):[]}function Lye(t,e,i){let n=e===Pm?SB(t,Pm):Array.from(t.querySelectorAll(e));n=i&&i.direct===!1?n:n.filter(h=>h.parentElement===t),n=i!=null&&i.matches?n.filter(h=>h==null?void 0:h.matches(i.matches)):n;const s=i==null?void 0:i.selector;return s?n.map(h=>Array.from(h.querySelectorAll(s))).reduce((h,f)=>[...h,...f],[]).filter(h=>!!h):n}function Dye(t,e,i){let n=e===Pm?SB(t,Pm)[0]||null:t.querySelector(e);n=i&&i.direct===!1||(n==null?void 0:n.parentElement)===t?n:null,n=i!=null&&i.matches?n!=null&&n.matches(i.matches)?n:null:n;const s=i==null?void 0:i.selector;return s?n==null?void 0:n.querySelector(s):n}function CI(t,e){return Array.from(t.children).filter(i=>i.matches(e))}function zye(t,e){return t.filter(i=>i.matches(e))}function Rm(t,e,i){if(typeof e=="string"&&e!=="")return e;if(e==="")return t[i]}function cn(t){return(!!t).toString()}function Fye(t){return xi(t)||Gye(t)}function jye(t){return Uye(t).filter(e=>e.nodeType===Node.TEXT_NODE).map(e=>e.textContent).join("").trim()}function Gye(t){return!!jye(t)}function Uye(t){return t.currentTarget.assignedNodes({flatten:!0})}function xi(t){return!!sl(t).length}function sl(t,e){return TB(t.target,e)}function TB(t,e){const i=t.assignedElements({flatten:!0});return e?zye(i,e):i}function b6(t){return!!(t.isPrimary&&t.button===0)}function Bye(t){return t.detail===0}const Sg=(t,e,i,n=!0)=>{const s=t.indexOf(e),h=s===0,f=s===t.length-1;n&&(i=i==="previous"&&h?"last":i==="next"&&f?"first":i);let m;return i==="previous"?m=t[s-1]||t[n?t.length-1:s]:i==="next"?m=t[s+1]||t[n?0:s]:i==="last"?m=t[t.length-1]:m=t[0],y0(m),m};function Hye(t,e){if(t.parentNode!==e.parentNode)return!1;const i=Array.from(t.parentNode.children);return i.indexOf(t)<i.indexOf(e)}async function Vye(t,e,i,n){return qye(t,e,"transition",i,n)}async function qye(t,e,i,n,s){const h=window.getComputedStyle(t),f=h.transitionDuration,m=h.transitionProperty,y=f.split(","),E=m.split(",").map(j=>j.trim()).indexOf(e),k=y[E]??y[0];function I(){requestAnimationFrame(()=>{n==null||n(),requestAnimationFrame(()=>s==null?void 0:s())})}if(k==="0s"){I();return}const P="transitionstart",L="transitionend",D="transitioncancel";return new Promise(j=>{const H=window.setTimeout(()=>{t.removeEventListener(P,W),t.removeEventListener(L,Z),t.removeEventListener(D,Z),I(),j()},parseFloat(k)*1e3);t.addEventListener(P,W),t.addEventListener(L,Z),t.addEventListener(D,Z);function W(Y){Y.target===t&&II(Y)===e&&(window.clearTimeout(H),t.removeEventListener(P,W),n==null||n())}function Z(Y){Y.target===t&&II(Y)===e&&(t.removeEventListener(L,Z),t.removeEventListener(D,Z),s==null||s(),j())}})}function Wye(t){return"propertyName"in t}function II(t){return Wye(t)?t.propertyName:t.animationName}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const Kye=["calcite-input","calcite-input-number","calcite-input-text","calcite-text-area"];function Zye(t){return`${t.split("-").map((n,s)=>s===0?n:`${n[0].toUpperCase()}${n.slice(1)}`).join("")}${Kye.includes(t)?"Input":"Change"}`}const w6="hidden-form-input";function SM(t){return"checked"in t}const _6=new WeakMap,TM=new WeakSet;function Jye(t,e){if(Uc(e.parentElement,"[form]"))return!0;const n="calciteInternalFormComponentRegister";let s=!1;return t.addEventListener(n,h=>{s=h.composedPath().some(f=>TM.has(f)),h.stopPropagation()},{once:!0}),e.dispatchEvent(new CustomEvent(n,{bubbles:!0,composed:!0})),s}function Yye(t,{status:e,message:i,icon:n}){"status"in t&&(t.status=e),"validationIcon"in t&&typeof t.validationIcon!="string"&&(t.validationIcon=n),"validationMessage"in t&&!t.validationMessage&&(t.validationMessage=i)}function EB(t){return t.nodeName==="CALCITE-RADIO-BUTTON"?Uc(t,"calcite-radio-button-group"):t}const Xye=new CustomEvent("calciteInvalid",{bubbles:!0,composed:!0});function AI(t){var m;const e=t==null?void 0:t.target,i=e==null?void 0:e.validationMessage,n=EB(e==null?void 0:e.parentElement);if(!n)return;const s=(m=n==null?void 0:n.nodeName)==null?void 0:m.toLowerCase(),h=s==null?void 0:s.split("-");if(h.length<2||h[0]!=="calcite")return;t==null||t.preventDefault(),"validity"in n&&(n.validity=e==null?void 0:e.validity),n.dispatchEvent(Xye),Yye(n,{message:i,icon:!0,status:"invalid"});const f=Zye(s);n.addEventListener(f,()=>{"status"in n&&(n.status="idle"),"validationIcon"in n&&!n.validationIcon&&(n.validationIcon=!1),"validationMessage"in n&&n.validationMessage===i&&(n.validationMessage=""),"validity"in n&&(n.validity=e==null?void 0:e.validity)},{once:!0})}function MB(t){const{formEl:e}=t;return e?(e.addEventListener("invalid",AI,!0),e.requestSubmit(),e.removeEventListener("invalid",AI,!0),requestAnimationFrame(()=>{const i=e.querySelectorAll("[status=invalid]");for(const n of i)if(n!=null&&n.validationMessage){n==null||n.setFocus();break}}),!0):!1}function Qye(t){var e;(e=t.formEl)==null||e.reset()}function EM(t){const{el:e,value:i}=t,n=$B(t);if(!n||Jye(n,e))return;t.formEl=n,t.defaultValue=i,SM(t)&&(t.defaultChecked=t.checked);const s=(t.onFormReset||eve).bind(t);n.addEventListener("reset",s),_6.set(t.el,s),TM.add(e)}function $B(t){const{el:e,form:i}=t;return i?Ey(e,{id:i}):Uc(e,"form")}function eve(){if("status"in this&&(this.status="idle"),"validationIcon"in this&&(this.validationIcon=!1),"validationMessage"in this&&(this.validationMessage=""),SM(this)){this.checked=this.defaultChecked;return}this.value=this.defaultValue}function MM(t){const{el:e,formEl:i}=t;if(!i)return;const n=_6.get(e);i.removeEventListener("reset",n),_6.delete(e),t.formEl=null,TM.delete(e)}function tve(t,e){t.defaultValue=e}const x6="calciteInternalHiddenInputInput",kB=t=>{t.target.dispatchEvent(new CustomEvent(x6,{bubbles:!0}))},OI=t=>t.removeEventListener("input",kB);function ive(t){const{el:e,formEl:i,name:n,value:s}=t,{ownerDocument:h}=e,f=e.querySelectorAll(`input[slot="${w6}"]`);if(!i||!n){f.forEach(k=>{OI(k),k.remove()});return}const m=Array.isArray(s)?s:[s],y=[],x=new Set;f.forEach(k=>{const I=m.find(P=>P==k.value);I!=null?(x.add(I),PI(t,k,I)):y.push(k)});let E;m.forEach(k=>{if(x.has(k))return;let I=y.pop();I||(I=h.createElement("input"),I.slot=w6),E||(E=h.createDocumentFragment()),E.append(I),I.addEventListener("input",kB),PI(t,I,k)}),E&&e.append(E),y.forEach(k=>{OI(k),k.remove()})}function PI(t,e,i){var x;const{defaultValue:n,disabled:s,form:h,name:f,required:m}=t;e.defaultValue=n,e.disabled=s,e.name=f,e.required=m,e.tabIndex=-1,h?e.setAttribute("form",h):e.removeAttribute("form"),SM(t)?(e.checked=t.checked,e.defaultChecked=t.defaultChecked,e.value=t.checked?i||"on":""):e.value=i||"",(x=t.syncHiddenFormInput)==null||x.call(t,e);const y=EB(t.el);if(y&&"validity"in y)for(const E in{...e==null?void 0:e.validity})y.validity[E]=e.validity[E]}const $M=({component:t})=>(ive(t),X("slot",{name:w6}));/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */function nve(){const{disabled:t}=this;t||HTMLElement.prototype.click.call(this)}function CB(t){t.target.disabled&&t.preventDefault()}const IB=["mousedown","mouseup","click"];function AB(t){t.target.disabled&&(t.stopImmediatePropagation(),t.preventDefault())}const Pw={capture:!0};function Al(t){if(t.disabled){t.el.setAttribute("aria-disabled","true"),t.el.contains(document.activeElement)&&document.activeElement.blur(),rve(t);return}ove(t),t.el.removeAttribute("aria-disabled")}function rve(t){t.el.click=nve,sve(t.el)}function sve(t){t.addEventListener("pointerdown",CB,Pw),IB.forEach(e=>t.addEventListener(e,AB,Pw))}function ove(t){delete t.el.click,ave(t.el)}function ave(t){t.removeEventListener("pointerdown",CB,Pw),IB.forEach(e=>t.removeEventListener(e,AB,Pw))}const lve={container:"interaction-container"},Ol=({disabled:t},e)=>X("div",{class:lve.container,inert:t},...e);/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */function Ji(t){return t==="l"?"m":"s"}async function cve(t){await(hve(t)?t.componentOnReady():new Promise(e=>requestAnimationFrame(()=>e())))}function hve(t){return typeof t.componentOnReady=="function"}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const OB="calciteInternalLabelClick",h_="calciteInternalLabelConnected",Rw="calciteInternalLabelDisconnected",RI="calcite-label",v0=new WeakMap,Qg=new WeakMap,Nm=new WeakMap,Nw=new WeakMap,Gd=new Set,uve=t=>{const{id:e}=t,i=e&&Ey(t,{selector:`${RI}[for="${e}"]`});if(i)return i;const n=Uc(t,RI);return!n||dve(n,t)?null:n};function dve(t,e){let i;const n="custom-element-ancestor-check",s=f=>{f.stopImmediatePropagation();const m=f.composedPath();i=m.slice(m.indexOf(e),m.indexOf(t))};return t.addEventListener(n,s,{once:!0}),e.dispatchEvent(new CustomEvent(n,{composed:!0,bubbles:!0})),t.removeEventListener(n,s),i.filter(f=>f!==e&&f!==t).filter(f=>{var m;return(m=f.tagName)==null?void 0:m.includes("-")}).length>0}function V0(t){if(!t)return;const e=uve(t.el);if(Qg.has(e)&&e===t.labelEl||!e&&Gd.has(t))return;const i=fve.bind(t);if(e){t.labelEl=e;const n=v0.get(e)||[];n.push(t),v0.set(e,n.sort(PB)),Qg.has(t.labelEl)||(Qg.set(t.labelEl,NI),t.labelEl.addEventListener(OB,NI)),Gd.delete(t),document.removeEventListener(h_,Nm.get(t)),Nw.set(t,i),document.addEventListener(Rw,i)}else Gd.has(t)||(i(),document.removeEventListener(Rw,Nw.get(t)))}function u_(t){if(!t||(Gd.delete(t),document.removeEventListener(h_,Nm.get(t)),document.removeEventListener(Rw,Nw.get(t)),Nm.delete(t),Nw.delete(t),!t.labelEl))return;const e=v0.get(t.labelEl);e.length===1&&(t.labelEl.removeEventListener(OB,Qg.get(t.labelEl)),Qg.delete(t.labelEl)),v0.set(t.labelEl,e.filter(i=>i!==t).sort(PB)),t.labelEl=null}function PB(t,e){return Hye(t.el,e.el)?-1:1}function Lm(t){var e,i;return t.label||((i=(e=t.labelEl)==null?void 0:e.textContent)==null?void 0:i.trim())||""}function NI(t){const e=t.detail.sourceEvent.target,i=v0.get(this),n=i.find(f=>f.el===e);if(i.includes(n))return;const h=i[0];h.disabled||h.onLabelClick(t)}function pve(){Gd.has(this)&&V0(this)}function fve(){Gd.add(this);const t=Nm.get(this)||pve.bind(this);Nm.set(this,t),document.addEventListener(h_,t)}async function gve(t){var n;if(await cve(t),v0.has(t))return;const i=(n=t.ownerDocument)==null?void 0:n.getElementById(t.for);i&&requestAnimationFrame(()=>{for(const s of Gd)if(s.el===i){V0(s);break}})}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const RB=new WeakMap,NB=new WeakMap;function vo(t){NB.set(t,new Promise(e=>RB.set(t,e)))}function bo(t){RB.get(t)()}function S6(t){return NB.get(t)}async function wo(t){if(await S6(t),!!ya())return Tu(t),new Promise(e=>requestAnimationFrame(()=>e()))}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */function d_(t){return t==="Enter"||t===" "}const kM=["0","1","2","3","4","5","6","7","8","9"];/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */function hn(t,e,i){if(!ya())return;const n=mve(t);return new n(e,i)}function mve(t){class e extends window.MutationObserver{constructor(n){super(n),this.observedEntry=[],this.callback=n}observe(n,s){return this.observedEntry.push({target:n,options:s}),super.observe(n,s)}unobserve(n){const s=this.observedEntry.filter(h=>h.target!==n);this.observedEntry=[],this.callback(super.takeRecords(),this),this.disconnect(),s.forEach(h=>this.observe(h.target,h.options))}}return function(){return t==="intersection"?window.IntersectionObserver:t==="mutation"?e:window.ResizeObserver}()}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const yve=new RegExp("\\.(0+)?$"),vve=new RegExp("0+$");class Ot{constructor(e){if(e instanceof Ot)return e;const[i,n]=Mve(e).split(".").concat("");this.value=BigInt(i+n.padEnd(Ot.DECIMALS,"0").slice(0,Ot.DECIMALS))+BigInt(Ot.ROUNDED&&n[Ot.DECIMALS]>="5"),this.isNegative=e.charAt(0)==="-"}getIntegersAndDecimals(){const e=this.value.toString().replace("-","").padStart(Ot.DECIMALS+1,"0"),i=e.slice(0,-Ot.DECIMALS),n=e.slice(-Ot.DECIMALS).replace(vve,"");return{integers:i,decimals:n}}toString(){const{integers:e,decimals:i}=this.getIntegersAndDecimals();return`${this.isNegative?"-":""}${e}${i.length?"."+i:""}`}formatToParts(e){const{integers:i,decimals:n}=this.getIntegersAndDecimals(),s=e.numberFormatter.formatToParts(BigInt(i));return this.isNegative&&s.unshift({type:"minusSign",value:e.minusSign}),n.length&&(s.push({type:"decimal",value:e.decimal}),n.split("").forEach(h=>s.push({type:"fraction",value:h}))),s}format(e){const{integers:i,decimals:n}=this.getIntegersAndDecimals(),s=`${this.isNegative?e.minusSign:""}${e.numberFormatter.format(BigInt(i))}`,h=n.length?`${e.decimal}${n.split("").map(f=>e.numberFormatter.format(Number(f))).join("")}`:"";return`${s}${h}`}add(e){return Ot.fromBigInt(this.value+new Ot(e).value)}subtract(e){return Ot.fromBigInt(this.value-new Ot(e).value)}multiply(e){return Ot._divRound(this.value*new Ot(e).value,Ot.SHIFT)}divide(e){return Ot._divRound(this.value*Ot.SHIFT,new Ot(e).value)}}Ot.DECIMALS=100;Ot.ROUNDED=!0;Ot.SHIFT=BigInt("1"+"0".repeat(Ot.DECIMALS));Ot._divRound=(t,e)=>Ot.fromBigInt(t/e+(Ot.ROUNDED?t*BigInt(2)/e%BigInt(2):BigInt(0)));Ot.fromBigInt=t=>Object.assign(Object.create(Ot.prototype),{value:t,isNegative:t<BigInt(0)});function Qa(t){return!(!t||isNaN(Number(t)))}function bve(t){return!t||!$ve(t)?"":Lw(t,e=>{let i=!1;const n=e.split("").filter((s,h)=>s.match(/\./g)&&!i?(i=!0,!0):s.match(/-/g)&&h===0?!0:kM.includes(s)).join("");return Qa(n)?new Ot(n).toString():""})}const LB=/^([-0])0+(?=\d)/,wve=/(?!^\.)\.$/,_ve=/(?!^-)-/g,xve=/^-\b0\b\.?0*$/,Sve=/0*$/,Tve=t=>Lw(t,e=>{const i=e.replace(_ve,"").replace(wve,"").replace(LB,"$1");return Qa(i)?xve.test(i)?i:Eve(i):e});function Eve(t){const e=t.split(".")[1],i=new Ot(t).toString(),[n,s]=i.split(".");return e&&s!==e?`${n}.${e}`:i}function Lw(t,e){if(!t)return t;const i=t.toLowerCase().indexOf("e")+1;return i?t.replace(/[eE]*$/g,"").substring(0,i).concat(t.slice(i).replace(/[eE]/g,"")).split(/[eE]/).map((n,s)=>e(s===1?n.replace(/\./g,""):n)).join("e").replace(/^e/,"1e"):e(t)}function Mve(t){const e=t.split(/[eE]/);if(e.length===1)return t;const i=+t;if(Number.isSafeInteger(i))return`${i}`;const n=t.charAt(0)==="-",s=+e[1],h=e[0].split("."),f=(n?h[0].substring(1):h[0])||"",m=h[1]||"",y=(k,I)=>{const P=Math.abs(I)-k.length,L=P>0?`${"0".repeat(P)}${k}`:k;return`${L.slice(0,I)}.${L.slice(I)}`},x=(k,I)=>{const P=I>k.length?`${k}${"0".repeat(I-k.length)}`:k;return`${P.slice(0,I)}.${P.slice(I)}`},E=s>0?`${f}${x(m,s)}`:`${y(f,s)}${m}`;return`${n?"-":""}${E.charAt(0)==="."?"0":""}${E.replace(yve,"").replace(LB,"")}`}function $ve(t){return kM.some(e=>t.includes(e))}function kve(t,e,i){const n=e.split(".")[1];if(n){const s=n.match(Sve)[0];if(s&&i.delocalize(t).length!==e.length&&n.indexOf("e")===-1){const h=i.decimal;return t=t.includes(h)?t:`${t}${h}`,t.padEnd(t.length+s.length,i.localize("0"))}}return t}const fu="en",Cve=["ar","bg","bs","ca","cs","da","de","el",fu,"es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","no","nl","pl","pt-BR","pt-PT","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-HK","zh-TW"],Ive=["ar","bg","bs","ca","cs","da","de","de-AT","de-CH","el",fu,"en-AU","en-CA","en-GB","es","es-MX","et","fi","fr","fr-CH","he","hi","hr","hu","id","it","it-CH","ja","ko","lt","lv","mk","no","nl","pl","pt","pt-PT","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-HK","zh-TW"],Ave=["arab","arabext","latn"],DB=t=>Ave.includes(t),ox=new Intl.NumberFormat().resolvedOptions().numberingSystem,zB=ox==="arab"||!DB(ox)?"latn":ox,Ove=t=>DB(t)?t:zB;function FB(t,e="cldr"){const i=e==="cldr"?Ive:Cve;return t?i.includes(t)?t:(t=t.toLowerCase(),t==="nb"?"no":e==="t9n"&&t==="pt"?"pt-BR":(t.includes("-")&&(t=t.replace(/(\w+)-(\w+)/,(n,s,h)=>`${s}-${h.toUpperCase()}`),i.includes(t)||(t=t.split("-")[0])),t==="zh"?"zh-CN":i.includes(t)?t:(console.warn(`Translations for the "${t}" locale are not available and will fall back to the default, English (en).`),fu))):fu}const Dm=new Set;function Ds(t){Pve(t),Dm.size===0&&(o2==null||o2.observe(document.documentElement,{attributes:!0,attributeFilter:["lang"],subtree:!0})),Dm.add(t)}function Pve(t){t.effectiveLocale=Rve(t)}function zs(t){Dm.delete(t),Dm.size===0&&o2.disconnect()}const o2=hn("mutation",t=>{t.forEach(e=>{const i=e.target;Dm.forEach(n=>{if(!Pye(i,n.el))return;const h=Uc(n.el,"[lang]");if(!h){n.effectiveLocale=fu;return}const f=h.lang;n.effectiveLocale=h.hasAttribute("lang")&&f===""?fu:f})})});function Rve(t){var e;return t.el.lang||((e=Uc(t.el,"[lang]"))==null?void 0:e.lang)||document.documentElement.lang||fu}class jB{constructor(){this.delocalize=e=>this._numberFormatOptions?Lw(e,i=>i.replace(new RegExp(`[${this._minusSign}]`,"g"),"-").replace(new RegExp(`[${this._group}]`,"g"),"").replace(new RegExp(`[${this._decimal}]`,"g"),".").replace(new RegExp(`[${this._digits.join("")}]`,"g"),this._getDigitIndex)):e,this.localize=e=>this._numberFormatOptions?Lw(e,i=>Qa(i.trim())?new Ot(i.trim()).format(this).replace(new RegExp(`[${this._actualGroup}]`,"g"),this._group):i):e}get group(){return this._group}get decimal(){return this._decimal}get minusSign(){return this._minusSign}get digits(){return this._digits}get numberFormatter(){return this._numberFormatter}get numberFormatOptions(){return this._numberFormatOptions}set numberFormatOptions(e){if(e.locale=FB(e==null?void 0:e.locale),e.numberingSystem=Ove(e==null?void 0:e.numberingSystem),!this._numberFormatOptions&&e.locale===fu&&e.numberingSystem===zB&&Object.keys(e).length===2||JSON.stringify(this._numberFormatOptions)===JSON.stringify(e))return;this._numberFormatOptions=e,this._numberFormatter=new Intl.NumberFormat(this._numberFormatOptions.locale,this._numberFormatOptions),this._digits=[...new Intl.NumberFormat(this._numberFormatOptions.locale,{useGrouping:!1,numberingSystem:this._numberFormatOptions.numberingSystem}).format(9876543210)].reverse();const i=new Map(this._digits.map((s,h)=>[s,h])),n=new Intl.NumberFormat(this._numberFormatOptions.locale,{numberingSystem:this._numberFormatOptions.numberingSystem}).formatToParts(-123456789e-1);this._actualGroup=n.find(s=>s.type==="group").value,this._group=this._actualGroup.trim().length===0||this._actualGroup==" "?"Â ":this._actualGroup,this._decimal=n.find(s=>s.type==="decimal").value,this._minusSign=n.find(s=>s.type==="minusSign").value,this._getDigitIndex=s=>i.get(s)}}const _s=new jB;/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const Av={};async function Nve(t,e){const i=`${e}_${t}`;return Av[i]||(Av[i]=fetch(cM(`./assets/${e}/t9n/messages_${t}.json`)).then(n=>(n.ok||LI(),n.json())).catch(()=>LI())),Av[i]}function LI(){throw new Error("could not fetch component message bundle")}function CM(t){t.messages={...t.defaultMessages,...t.messageOverrides}}function Lve(){}async function _o(t){t.defaultMessages=await GB(t,t.effectiveLocale),CM(t)}async function GB(t,e){if(!ya())return{};const{el:i}=t,s=i.tagName.toLowerCase().replace("calcite-","");return Nve(FB(e,"t9n"),s)}async function xo(t,e){t.defaultMessages=await GB(t,e),CM(t)}function So(t){t.onMessagesChange=Dve}function To(t){t.onMessagesChange=Lve}function Dve(){CM(this)}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const zve={icon:"icon",flipRtl:"flip-rtl"},UB={},ax={},BB={s:16,m:24,l:32};function HB({icon:t,scale:e}){const i=BB[e],n=Gve(t),s=n.charAt(n.length-1)==="F";return`${s?n.substring(0,n.length-1):n}${i}${s?"F":""}`}async function Fve(t){const e=HB(t),i=VB(e);if(i)return i;ax[e]||(ax[e]=fetch(cM(`./assets/icon/${e}.json`)).then(s=>s.json()).catch(()=>(console.error(`"${e}" is not a valid calcite-ui-icon name`),"")));const n=await ax[e];return UB[e]=n,n}function jve(t){return VB(HB(t))}function VB(t){return UB[t]}function Gve(t){const e=!isNaN(Number(t.charAt(0))),i=t.split("-");if(i.length>0){const s=/[a-z]/i;t=i.map((h,f)=>h.replace(s,function(y,x){return f===0&&x===0?y:y.toUpperCase()})).join("")}return e?`i${t}`:t}const Uve=":host{display:inline-flex;color:var(--calcite-icon-color, var(--calcite-ui-icon-color, currentColor))}:host([scale=s]){inline-size:16px;block-size:16px;min-inline-size:16px;min-block-size:16px}:host([scale=m]){inline-size:24px;block-size:24px;min-inline-size:24px;min-block-size:24px}:host([scale=l]){inline-size:32px;block-size:32px;min-inline-size:32px;min-block-size:32px}.flip-rtl{transform:scaleX(-1)}.svg{display:block}:host([hidden]){display:none}[hidden]{display:none}",Bve=Uve,Hve=ci(class extends li{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.icon=null,this.flipRtl=!1,this.scale="m",this.textLabel=void 0,this.pathData=void 0,this.visible=!1}connectedCallback(){this.visible||this.waitUntilVisible(()=>{this.visible=!0,this.loadIconPathData()})}disconnectedCallback(){var e;(e=this.intersectionObserver)==null||e.disconnect(),this.intersectionObserver=null}render(){const{el:e,flipRtl:i,pathData:n,scale:s,textLabel:h}=this,f=ll(e),m=BB[s],y=!!h,x=[].concat(n||"");return X(dn,{key:"724265acdc6fb528bf7b25d7ec445c73a63f4c8e","aria-hidden":cn(!y),"aria-label":y?h:null,role:y?"img":null},X("svg",{key:"864ee2d80bebd282543ba5d94c57f84b48a6204d","aria-hidden":"true",class:{[zve.flipRtl]:f==="rtl"&&i,svg:!0},fill:"currentColor",height:"100%",viewBox:`0 0 ${m} ${m}`,width:"100%",xmlns:"http://www.w3.org/2000/svg"},x.map(E=>typeof E=="string"?X("path",{d:E}):X("path",{d:E.d,opacity:"opacity"in E?E.opacity:1}))))}async loadIconPathData(){const{icon:e,scale:i,visible:n}=this;if(!ya()||!e||!n)return;const s={icon:e,scale:i},h=jve(s)||await Fve(s);e===this.icon&&(this.pathData=h)}waitUntilVisible(e){if(this.intersectionObserver=hn("intersection",i=>{i.forEach(n=>{n.isIntersecting&&(this.intersectionObserver.disconnect(),this.intersectionObserver=null,e())})},{rootMargin:"50px"}),!this.intersectionObserver){e();return}this.intersectionObserver.observe(this.el)}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{icon:["loadIconPathData"],scale:["loadIconPathData"]}}static get style(){return Bve}},[1,"calcite-icon",{icon:[513],flipRtl:[516,"flip-rtl"],scale:[513],textLabel:[1,"text-label"],pathData:[32],visible:[32]},void 0,{icon:["loadIconPathData"],scale:["loadIconPathData"]}]);function Or(){if(typeof customElements>"u")return;["calcite-icon"].forEach(e=>{switch(e){case"calcite-icon":customElements.get(e)||customElements.define(e,Hve);break}})}Or();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const mf={loader:"loader",loaderParts:"loader__svgs",loaderPart:"loader__svg",loaderPartId:t=>`${mf.loaderPart}--${t}`,loaderText:"loader__text",loaderPercentage:"loader__percentage"},Vve='@charset "UTF-8";@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:host{position:relative;margin-inline:auto;display:none;align-items:center;justify-content:center;opacity:1;min-block-size:var(--calcite-loader-size);font-size:var(--calcite-loader-font-size);stroke:var(--calcite-color-brand);stroke-width:3;fill:none;transform:scale(1, 1);animation:loader-color-shift calc(var(--calcite-internal-animation-timing-slow) / var(--calcite-internal-duration-factor) * 2 / var(--calcite-internal-duration-factor)) alternate-reverse infinite linear;padding-block:var(--calcite-loader-padding, 4rem);will-change:contents}:host([scale=s]){--calcite-loader-font-size:var(--calcite-font-size--3);--calcite-loader-size:2rem;--calcite-loader-size-inline:0.75rem;--calcite-internal-loader-value-line-height:0.625rem}:host([scale=m]){--calcite-loader-font-size:var(--calcite-font-size-0);--calcite-loader-size:4rem;--calcite-loader-size-inline:1rem;--calcite-internal-loader-value-line-height:1.375rem}:host([scale=l]){--calcite-loader-font-size:var(--calcite-font-size-2);--calcite-loader-size:6rem;--calcite-loader-size-inline:1.5rem;--calcite-internal-loader-value-line-height:1.71875rem}:host([no-padding]){padding-block:0px}:host{display:flex}.loader__text{display:block;text-align:center;font-size:var(--calcite-font-size--2);line-height:1rem;color:var(--calcite-color-text-1);margin-block-start:calc(var(--calcite-loader-size) + 1.5rem)}.loader__percentage{display:block;text-align:center;color:var(--calcite-color-text-1);font-size:var(--calcite-loader-font-size);inline-size:var(--calcite-loader-size);line-height:var(--calcite-internal-loader-value-line-height);align-self:center}.loader__svgs{position:absolute;overflow:visible;opacity:1;inline-size:var(--calcite-loader-size);block-size:var(--calcite-loader-size);inset-inline-start:50%;margin-inline-start:calc(var(--calcite-loader-size) / 2 * -1);animation-iteration-count:infinite;animation-timing-function:linear;animation-duration:calc(var(--calcite-internal-animation-timing-slow) / var(--calcite-internal-duration-factor) * 6.66 / var(--calcite-internal-duration-factor));animation-name:loader-clockwise;display:flex}.loader__svg{position:absolute;inset-block-start:0px;transform-origin:center;overflow:visible;inset-inline-start:0;inline-size:var(--calcite-loader-size);block-size:var(--calcite-loader-size);animation-iteration-count:infinite;animation-timing-function:linear}.loader__svg--1{animation-name:loader-offset-1}.loader__svg--2{animation-name:loader-offset-2}.loader__svg--3{animation-name:loader-offset-3}:host([type=determinate]),:host([type=determinate-value]){animation:none;stroke:var(--calcite-color-border-3)}:host([type=determinate]) .loader__svgs,:host([type=determinate-value]) .loader__svgs{animation:none}:host([type=determinate]) .loader__svg--3,:host([type=determinate-value]) .loader__svg--3{animation:none;stroke:var(--calcite-color-brand);stroke-dasharray:150.79632;transform:rotate(-90deg);transition:all var(--calcite-internal-animation-timing-fast) linear}:host([inline]){position:relative;margin:0px;animation:none;stroke:currentColor;stroke-width:2;padding-block:0px;block-size:var(--calcite-loader-size-inline);min-block-size:var(--calcite-loader-size-inline);inline-size:var(--calcite-loader-size-inline);margin-inline-end:calc(var(--calcite-loader-size-inline) * 0.5);vertical-align:calc(var(--calcite-loader-size-inline) * -1 * 0.2)}:host([inline]) .loader__svgs{inset-block-start:0px;margin:0px;inset-inline-start:0;inline-size:var(--calcite-loader-size-inline);block-size:var(--calcite-loader-size-inline)}:host([inline]) .loader__svg{inline-size:var(--calcite-loader-size-inline);block-size:var(--calcite-loader-size-inline)}:host([complete]){opacity:0;transform:scale(0.75, 0.75);transform-origin:center;transition:opacity var(--calcite-internal-animation-timing-medium) linear 1000ms, transform var(--calcite-internal-animation-timing-medium) linear 1000ms}:host([complete]) .loader__svgs{opacity:0;transform:scale(0.75, 0.75);transform-origin:center;transition:opacity calc(180ms * var(--calcite-internal-duration-factor)) linear 800ms, transform calc(180ms * var(--calcite-internal-duration-factor)) linear 800ms}:host([complete]) .loader__percentage{color:var(--calcite-color-brand);transform:scale(1.05, 1.05);transform-origin:center;transition:color var(--calcite-internal-animation-timing-medium) linear, transform var(--calcite-internal-animation-timing-medium) linear}.loader__svg--1{stroke-dasharray:27.9252444444 139.6262222222;animation-duration:calc(var(--calcite-internal-animation-timing-slow) / var(--calcite-internal-duration-factor) * 4.8 / var(--calcite-internal-duration-factor))}@keyframes loader-offset-1{0%{stroke-dasharray:27.9252444444 251.3272;stroke-dashoffset:0}50%{stroke-dasharray:139.6262222222 139.6262222222;stroke-dashoffset:-83.7757333333}100%{stroke-dasharray:27.9252444444 251.3272;stroke-dashoffset:-279.2524444444}}.loader__svg--2{stroke-dasharray:55.8504888889 139.6262222222;animation-duration:calc(var(--calcite-internal-animation-timing-slow) / var(--calcite-internal-duration-factor) * 6.4 / var(--calcite-internal-duration-factor))}@keyframes loader-offset-2{0%{stroke-dasharray:55.8504888889 223.4019555556;stroke-dashoffset:0}50%{stroke-dasharray:139.6262222222 139.6262222222;stroke-dashoffset:-97.7383555556}100%{stroke-dasharray:55.8504888889 223.4019555556;stroke-dashoffset:-279.2524444444}}.loader__svg--3{stroke-dasharray:13.9626222222 139.6262222222;animation-duration:calc(var(--calcite-internal-animation-timing-slow) / var(--calcite-internal-duration-factor) * 7.734 / var(--calcite-internal-duration-factor))}@keyframes loader-offset-3{0%{stroke-dasharray:13.9626222222 265.2898222222;stroke-dashoffset:0}50%{stroke-dasharray:139.6262222222 139.6262222222;stroke-dashoffset:-76.7944222222}100%{stroke-dasharray:13.9626222222 265.2898222222;stroke-dashoffset:-279.2524444444}}@keyframes loader-color-shift{0%{stroke:var(--calcite-color-brand)}33%{stroke:var(--calcite-color-brand-press)}66%{stroke:var(--calcite-color-brand-hover)}100%{stroke:var(--calcite-color-brand)}}@keyframes loader-clockwise{100%{transform:rotate(360deg)}}:host([hidden]){display:none}[hidden]{display:none}',qve=Vve,Wve=ci(class extends li{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.formatValue=()=>this.type!=="determinate-value"?`${this.value}`:this.formatter.format(this.value/100),this.complete=!1,this.inline=!1,this.label=void 0,this.scale="m",this.type="indeterminate",this.value=0,this.text="",this.effectiveLocale=""}valueChangeHandler(){this.complete=this.type.startsWith("determinate")&&this.value===100}connectedCallback(){Ds(this),this.updateFormatter()}disconnectedCallback(){zs(this)}componentWillLoad(){requestAnimationFrame(()=>this.valueChangeHandler())}render(){const{el:e,inline:i,label:n,scale:s,text:h,type:f,value:m}=this,y=e.id||Il(),x=.45,E=i?this.getInlineSize(s):this.getSize(s),k=E*x,I=`0 0 ${E} ${E}`,P=f.startsWith("determinate"),L=2*k*Math.PI,D=m/100*L,j=L-D,H=Math.floor(m),W={"stroke-dasharray":`${D} ${j}`};return X(dn,{key:"8272bdfae9fff51b19ed8fa66197eb93b53feb4c","aria-label":n,"aria-valuemax":P?"100":void 0,"aria-valuemin":P?"0":void 0,"aria-valuenow":P?H.toString():void 0,id:y,role:"progressbar"},X("div",{key:"3d410c178af39bb57cc478bdd06c0392f6ba71a3",class:mf.loaderParts},[1,2,3].map(Z=>X("svg",{"aria-hidden":"true",class:{[mf.loaderPart]:!0,[mf.loaderPartId(Z)]:!0},key:Z,style:P&&Z===3?W:void 0,viewBox:I},X("circle",{cx:E/2,cy:E/2,r:k}))),P&&X("div",{key:"4ccc633930dee031bf769908d712df39e0677bbb",class:mf.loaderPercentage},this.formatValue())),h&&X("div",{key:"6d0d51988bdfafee2a19faed9e14d3bda06d79b5",class:mf.loaderText},h))}formatterPropsChange(){this.updateFormatter()}getSize(e){return{s:32,m:56,l:80}[e]}getInlineSize(e){return{s:12,m:16,l:20}[e]}updateFormatter(){var e;this.type!=="determinate-value"||((e=this.formatter)==null?void 0:e.resolvedOptions().locale)===this.effectiveLocale||(this.formatter=new Intl.NumberFormat(this.effectiveLocale,{style:"percent"}))}get el(){return this}static get watchers(){return{value:["valueChangeHandler"],effectiveLocale:["formatterPropsChange"],type:["formatterPropsChange"]}}static get style(){return qve}},[1,"calcite-loader",{complete:[1540],inline:[516],label:[1],scale:[513],type:[513],value:[2],text:[1],effectiveLocale:[32]},void 0,{value:["valueChangeHandler"],effectiveLocale:["formatterPropsChange"],type:["formatterPropsChange"]}]);function Eu(){if(typeof customElements>"u")return;["calcite-loader"].forEach(e=>{switch(e){case"calcite-loader":customElements.get(e)||customElements.define(e,Wve);break}})}Eu();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const ls={buttonLoader:"calcite-button--loader",content:"content",contentSlotted:"content--slotted",icon:"icon",iconStart:"icon--start",iconEnd:"icon--end",loadingIn:"loading-in",loadingOut:"loading-out",iconStartEmpty:"icon-start-empty",iconEndEmpty:"icon-end-empty",buttonPadding:"button-padding",buttonPaddingShrunk:"button-padding--shrunk"},Kve=`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline-block;inline-size:auto;vertical-align:middle}:host([round]){border-radius:50px}:host([round]) a,:host([round]) button{border-radius:50px}:host button,:host a{outline-color:transparent}:host button:focus,:host a:focus{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}:host button,:host a{--calcite-button-content-margin-internal:0.5rem;--calcite-button-padding-x-internal:7px;--calcite-button-padding-y-internal:3px;padding-block:var(--calcite-button-padding-y-internal);padding-inline:var(--calcite-button-padding-x-internal);position:relative;box-sizing:border-box;display:flex;block-size:100%;inline-size:100%;cursor:pointer;-webkit-user-select:none;user-select:none;appearance:none;align-items:center;justify-content:center;border-radius:0px;border-style:none;text-align:center;font-family:inherit;font-weight:var(--calcite-font-weight-normal);text-decoration-line:none;transition:color var(--calcite-animation-timing) ease-in-out, background-color var(--calcite-animation-timing) ease-in-out, box-shadow var(--calcite-animation-timing) ease-in-out, outline-color var(--calcite-internal-animation-timing-fast) ease-in-out}:host button:hover,:host a:hover{text-decoration-line:none}:host button span,:host a span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.content{margin-inline:var(--calcite-button-content-margin-internal)}.icon-start-empty .content{margin-inline-start:unset}.icon-end-empty .content{margin-inline-end:unset}:host([scale=m]) button,:host([scale=m]) a{--calcite-button-content-margin-internal:0.75rem}:host([scale=l]) button,:host([scale=l]) a{--calcite-button-content-margin-internal:1rem}:host([width=auto]){inline-size:auto}:host([width=half]){inline-size:50%}:host([width=full]){inline-size:100%}:host([alignment=center]:not([width=auto])) a,:host([alignment=center]:not([width=auto])) button{justify-content:center}:host([alignment=start]:not([width=auto])) a,:host([alignment=start]:not([width=auto])) button{justify-content:flex-start}:host([alignment=end]:not([width=auto])) a,:host([alignment=end]:not([width=auto])) button{justify-content:flex-end}:host([alignment*=space-between]:not([width=auto])) a,:host([alignment*=space-between]:not([width=auto])) button{justify-content:space-between}:host([alignment=icon-start-space-between]:not([width=auto])) .icon--start{margin-inline-end:auto}:host([alignment=icon-start-space-between]:not([width=auto])) a,:host([alignment=icon-start-space-between]:not([width=auto])) button{text-align:unset}:host([alignment=icon-end-space-between]:not([width=auto])) .icon--end{margin-inline-start:auto}:host([alignment=icon-end-space-between]:not([width=auto])) a,:host([alignment=icon-end-space-between]:not([width=auto])) button{text-align:unset}:host([alignment=center]) a:not(.content--slotted) .icon--start+.icon--end,:host([alignment=center]) button:not(.content--slotted) .icon--start+.icon--end{margin-inline-start:var(--calcite-button-content-margin-internal)}.icon{position:relative;margin:0px;display:inline-flex;font-weight:var(--calcite-font-weight-normal);line-height:inherit}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}@keyframes loader-in{0%{inline-size:0;opacity:0;transform:scale(0.5)}100%{inline-size:1em;opacity:1;transform:scale(1)}}@keyframes loader-out{0%{inline-size:1em;opacity:1;transform:scale(1)}100%{inline-size:0;opacity:0;transform:scale(0.5)}}.calcite-button--loader{display:flex}.calcite-button--loader calcite-loader{margin:0px}:host([loading]) button.content--slotted .calcite-button--loader calcite-loader,:host([loading]) a.content--slotted .calcite-button--loader calcite-loader{margin-inline-end:var(--calcite-button-content-margin-internal)}:host([loading]) button:not(.content--slotted) .icon--start,:host([loading]) button:not(.content--slotted) .icon--end,:host([loading]) a:not(.content--slotted) .icon--start,:host([loading]) a:not(.content--slotted) .icon--end{display:none}:host([appearance]) button,:host([appearance]) a{border-width:1px;border-style:solid;border-color:transparent}:host([kind=brand]) button,:host([kind=brand]) a{background-color:var(--calcite-color-brand);color:var(--calcite-color-text-inverse)}:host([kind=brand]) button:hover,:host([kind=brand]) button:focus,:host([kind=brand]) a:hover,:host([kind=brand]) a:focus{background-color:var(--calcite-color-brand-hover)}:host([kind=brand]) button:active,:host([kind=brand]) a:active{background-color:var(--calcite-color-brand-press)}:host([kind=brand]) button calcite-loader,:host([kind=brand]) a calcite-loader{color:var(--calcite-color-text-inverse)}:host([kind=danger]) button,:host([kind=danger]) a{background-color:var(--calcite-color-status-danger);color:var(--calcite-color-text-inverse)}:host([kind=danger]) button:hover,:host([kind=danger]) button:focus,:host([kind=danger]) a:hover,:host([kind=danger]) a:focus{background-color:var(--calcite-color-status-danger-hover)}:host([kind=danger]) button:active,:host([kind=danger]) a:active{background-color:var(--calcite-color-status-danger-press)}:host([kind=danger]) button calcite-loader,:host([kind=danger]) a calcite-loader{color:var(--calcite-color-text-inverse)}:host([kind=neutral]) button,:host([kind=neutral]) a{background-color:var(--calcite-color-foreground-3);color:var(--calcite-color-text-1)}:host([kind=neutral]) button:hover,:host([kind=neutral]) button:focus,:host([kind=neutral]) a:hover,:host([kind=neutral]) a:focus{background-color:var(--calcite-color-foreground-2)}:host([kind=neutral]) button:active,:host([kind=neutral]) a:active{background-color:var(--calcite-color-foreground-1)}:host([kind=neutral]) button calcite-loader,:host([kind=neutral]) a calcite-loader{color:var(--calcite-color-text-1)}:host([kind=inverse]) button,:host([kind=inverse]) a{color:var(--calcite-color-text-inverse);background-color:var(--calcite-color-inverse)}:host([kind=inverse]) button:hover,:host([kind=inverse]) button:focus,:host([kind=inverse]) a:hover,:host([kind=inverse]) a:focus{background-color:var(--calcite-color-inverse-hover)}:host([kind=inverse]) button:active,:host([kind=inverse]) a:active{background-color:var(--calcite-color-inverse-press)}:host([kind=inverse]) button calcite-loader,:host([kind=inverse]) a calcite-loader{color:var(--calcite-color-text-inverse)}:host([appearance=outline-fill]) button,:host([appearance=outline-fill]) a{border-width:1px;border-style:solid;background-color:var(--calcite-color-foreground-1);box-shadow:inset 0 0 0 1px transparent}:host([appearance=outline-fill][kind=brand]) button,:host([appearance=outline-fill][kind=brand]) a{border-color:var(--calcite-color-brand);background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-brand)}:host([appearance=outline-fill][kind=brand]) button:hover,:host([appearance=outline-fill][kind=brand]) a:hover{border-color:var(--calcite-color-brand-hover);color:var(--calcite-color-brand-hover);box-shadow:inset 0 0 0 1px var(--calcite-color-brand-hover)}:host([appearance=outline-fill][kind=brand]) button:focus,:host([appearance=outline-fill][kind=brand]) a:focus{border-color:var(--calcite-color-brand);color:var(--calcite-color-brand);box-shadow:inset 0 0 0 2px var(--calcite-color-brand)}:host([appearance=outline-fill][kind=brand]) button:active,:host([appearance=outline-fill][kind=brand]) a:active{border-color:var(--calcite-color-brand-press);color:var(--calcite-color-brand-press);box-shadow:inset 0 0 0 2px var(--calcite-color-brand-press)}:host([appearance=outline-fill][kind=brand]) button calcite-loader,:host([appearance=outline-fill][kind=brand]) a calcite-loader{color:var(--calcite-color-brand)}:host([appearance=outline-fill][kind=danger]) button,:host([appearance=outline-fill][kind=danger]) a{border-color:var(--calcite-color-status-danger);background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-status-danger)}:host([appearance=outline-fill][kind=danger]) button:hover,:host([appearance=outline-fill][kind=danger]) a:hover{border-color:var(--calcite-color-status-danger-hover);color:var(--calcite-color-status-danger-hover);box-shadow:inset 0 0 0 1px var(--calcite-color-status-danger-hover)}:host([appearance=outline-fill][kind=danger]) button:focus,:host([appearance=outline-fill][kind=danger]) a:focus{border-color:var(--calcite-color-status-danger);color:var(--calcite-color-status-danger);box-shadow:inset 0 0 0 2px var(--calcite-color-status-danger)}:host([appearance=outline-fill][kind=danger]) button:active,:host([appearance=outline-fill][kind=danger]) a:active{border-color:var(--calcite-color-status-danger-press);color:var(--calcite-color-status-danger-press);box-shadow:inset 0 0 0 2px var(--calcite-color-status-danger-press)}:host([appearance=outline-fill][kind=danger]) button calcite-loader,:host([appearance=outline-fill][kind=danger]) a calcite-loader{color:var(--calcite-color-status-danger)}:host([appearance=outline-fill][kind=neutral]) button,:host([appearance=outline-fill][kind=neutral]) a{background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-1);border-color:var(--calcite-color-border-1)}:host([appearance=outline-fill][kind=neutral]) button:hover,:host([appearance=outline-fill][kind=neutral]) a:hover{box-shadow:inset 0 0 0 1px var(--calcite-color-foreground-3)}:host([appearance=outline-fill][kind=neutral]) button:focus,:host([appearance=outline-fill][kind=neutral]) a:focus{box-shadow:inset 0 0 0 2px var(--calcite-color-foreground-3)}:host([appearance=outline-fill][kind=neutral]) button:active,:host([appearance=outline-fill][kind=neutral]) a:active{box-shadow:inset 0 0 0 2px var(--calcite-color-foreground-3)}:host([appearance=outline-fill][kind=neutral]) button calcite-loader,:host([appearance=outline-fill][kind=neutral]) a calcite-loader{color:var(--calcite-color-text-1)}:host([appearance=outline-fill][kind=inverse]) button,:host([appearance=outline-fill][kind=inverse]) a{background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-1);border-color:var(--calcite-color-inverse)}:host([appearance=outline-fill][kind=inverse]) button:hover,:host([appearance=outline-fill][kind=inverse]) a:hover{border-color:var(--calcite-color-inverse-hover);box-shadow:inset 0 0 0 1px var(--calcite-color-inverse-hover)}:host([appearance=outline-fill][kind=inverse]) button:focus,:host([appearance=outline-fill][kind=inverse]) a:focus{border-color:var(--calcite-color-inverse);box-shadow:inset 0 0 0 2px var(--calcite-color-inverse)}:host([appearance=outline-fill][kind=inverse]) button:active,:host([appearance=outline-fill][kind=inverse]) a:active{border-color:var(--calcite-color-inverse-press);box-shadow:inset 0 0 0 2px var(--calcite-color-inverse-press)}:host([appearance=outline-fill][kind=inverse]) button calcite-loader,:host([appearance=outline-fill][kind=inverse]) a calcite-loader{color:var(--calcite-color-text-1)}:host([appearance=outline]) button,:host([appearance=outline]) a{border-width:1px;border-style:solid;background-color:transparent;box-shadow:inset 0 0 0 1px transparent}:host([appearance=outline][kind=brand]) button,:host([appearance=outline][kind=brand]) a{border-color:var(--calcite-color-brand);background-color:transparent;color:var(--calcite-color-brand)}:host([appearance=outline][kind=brand]) button:hover,:host([appearance=outline][kind=brand]) a:hover{border-color:var(--calcite-color-brand-hover);color:var(--calcite-color-brand-hover);box-shadow:inset 0 0 0 1px var(--calcite-color-brand-hover)}:host([appearance=outline][kind=brand]) button:focus,:host([appearance=outline][kind=brand]) a:focus{border-color:var(--calcite-color-brand);color:var(--calcite-color-brand);box-shadow:inset 0 0 0 2px var(--calcite-color-brand)}:host([appearance=outline][kind=brand]) button:active,:host([appearance=outline][kind=brand]) a:active{border-color:var(--calcite-color-brand-press);color:var(--calcite-color-brand-press);box-shadow:inset 0 0 0 2px var(--calcite-color-brand-press)}:host([appearance=outline][kind=brand]) button calcite-loader,:host([appearance=outline][kind=brand]) a calcite-loader{color:var(--calcite-color-brand)}:host([appearance=outline][kind=danger]) button,:host([appearance=outline][kind=danger]) a{border-color:var(--calcite-color-status-danger);background-color:transparent;color:var(--calcite-color-status-danger)}:host([appearance=outline][kind=danger]) button:hover,:host([appearance=outline][kind=danger]) a:hover{border-color:var(--calcite-color-status-danger-hover);color:var(--calcite-color-status-danger-hover);box-shadow:inset 0 0 0 1px var(--calcite-color-status-danger-hover)}:host([appearance=outline][kind=danger]) button:focus,:host([appearance=outline][kind=danger]) a:focus{border-color:var(--calcite-color-status-danger);color:var(--calcite-color-status-danger);box-shadow:inset 0 0 0 2px var(--calcite-color-status-danger)}:host([appearance=outline][kind=danger]) button:active,:host([appearance=outline][kind=danger]) a:active{border-color:var(--calcite-color-status-danger-press);color:var(--calcite-color-status-danger-press);box-shadow:inset 0 0 0 2px var(--calcite-color-status-danger-press)}:host([appearance=outline][kind=danger]) button calcite-loader,:host([appearance=outline][kind=danger]) a calcite-loader{color:var(--calcite-color-status-danger)}:host([appearance=outline][kind=neutral]) button,:host([appearance=outline][kind=neutral]) a{background-color:transparent;color:var(--calcite-color-text-1);border-color:var(--calcite-color-border-1)}:host([appearance=outline][kind=neutral]) button:hover,:host([appearance=outline][kind=neutral]) a:hover{box-shadow:inset 0 0 0 1px var(--calcite-color-foreground-3)}:host([appearance=outline][kind=neutral]) button:focus,:host([appearance=outline][kind=neutral]) a:focus{box-shadow:inset 0 0 0 2px var(--calcite-color-foreground-3)}:host([appearance=outline][kind=neutral]) button:active,:host([appearance=outline][kind=neutral]) a:active{box-shadow:inset 0 0 0 2px var(--calcite-color-foreground-3)}:host([appearance=outline][kind=neutral]) button calcite-loader,:host([appearance=outline][kind=neutral]) a calcite-loader{color:var(--calcite-color-text-1)}:host([appearance=outline][kind=inverse]) button,:host([appearance=outline][kind=inverse]) a{background-color:transparent;color:var(--calcite-color-text-1);border-color:var(--calcite-color-inverse)}:host([appearance=outline][kind=inverse]) button:hover,:host([appearance=outline][kind=inverse]) a:hover{border-color:var(--calcite-color-inverse-hover);box-shadow:inset 0 0 0 1px var(--calcite-color-inverse-hover)}:host([appearance=outline][kind=inverse]) button:focus,:host([appearance=outline][kind=inverse]) a:focus{border-color:var(--calcite-color-inverse);box-shadow:inset 0 0 0 2px var(--calcite-color-inverse)}:host([appearance=outline][kind=inverse]) button:active,:host([appearance=outline][kind=inverse]) a:active{border-color:var(--calcite-color-inverse-press);box-shadow:inset 0 0 0 2px var(--calcite-color-inverse-press)}:host([appearance=outline][kind=inverse]) button calcite-loader,:host([appearance=outline][kind=inverse]) a calcite-loader{color:var(--calcite-color-text-1)}:host([appearance=outline-fill][split-child=primary]) button,:host([appearance=outline][split-child=primary]) button{border-inline-end-width:0;border-inline-start-width:1px}:host([appearance=outline-fill][split-child=secondary]) button,:host([appearance=outline][split-child=secondary]) button{border-inline-start-width:0;border-inline-end-width:1px}:host([appearance=transparent]:not(.enable-editing-button)) button,:host([appearance=transparent]:not(.enable-editing-button)) a{background-color:transparent}:host([appearance=transparent]:not(.enable-editing-button)) button:hover,:host([appearance=transparent]:not(.enable-editing-button)) button:focus,:host([appearance=transparent]:not(.enable-editing-button)) a:hover,:host([appearance=transparent]:not(.enable-editing-button)) a:focus{background-color:var(--calcite-color-transparent-hover)}:host([appearance=transparent]:not(.enable-editing-button)) button:active,:host([appearance=transparent]:not(.enable-editing-button)) a:active{background-color:var(--calcite-color-transparent-press)}:host([appearance=transparent][kind=brand]) button,:host([appearance=transparent][kind=brand]) a{color:var(--calcite-color-brand)}:host([appearance=transparent][kind=brand]) button:hover,:host([appearance=transparent][kind=brand]) a:hover{color:var(--calcite-color-brand-hover)}:host([appearance=transparent][kind=brand]) button:focus,:host([appearance=transparent][kind=brand]) a:focus{color:var(--calcite-color-brand)}:host([appearance=transparent][kind=brand]) button:active,:host([appearance=transparent][kind=brand]) a:active{color:var(--calcite-color-brand-press)}:host([appearance=transparent][kind=brand]) button calcite-loader,:host([appearance=transparent][kind=brand]) a calcite-loader{color:var(--calcite-color-brand)}:host([appearance=transparent][kind=danger]) button,:host([appearance=transparent][kind=danger]) a{color:var(--calcite-color-status-danger)}:host([appearance=transparent][kind=danger]) button:hover,:host([appearance=transparent][kind=danger]) a:hover{color:var(--calcite-color-status-danger-hover)}:host([appearance=transparent][kind=danger]) button:focus,:host([appearance=transparent][kind=danger]) a:focus{color:var(--calcite-color-status-danger)}:host([appearance=transparent][kind=danger]) button:active,:host([appearance=transparent][kind=danger]) a:active{color:var(--calcite-color-status-danger-press)}:host([appearance=transparent][kind=danger]) button calcite-loader,:host([appearance=transparent][kind=danger]) a calcite-loader{color:var(--calcite-color-status-danger)}:host([appearance=transparent][kind=neutral]:not(.cancel-editing-button)) button,:host([appearance=transparent][kind=neutral]:not(.cancel-editing-button)) a,:host([appearance=transparent][kind=neutral]:not(.cancel-editing-button)) calcite-loader{color:var(--calcite-color-text-1)}:host([appearance=transparent][kind=neutral].cancel-editing-button) button{border-block-start-width:1px;border-block-end-width:1px;color:var(--calcite-color-text-3);border-block-start-color:var(--calcite-color-border-input);border-block-end-color:var(--calcite-color-border-input);border-block-style:solid}:host([appearance=transparent][kind=neutral].cancel-editing-button) button:not(.content--slotted){--calcite-button-padding-y-internal:0}:host([appearance=transparent][kind=neutral].cancel-editing-button) button:hover{color:var(--calcite-color-text-1)}:host([appearance=transparent][kind=neutral].enable-editing-button) button{background-color:transparent}:host(.confirm-changes-button) button:focus,:host(.cancel-editing-button) button:focus,:host(.enable-editing-button) button:focus{outline-offset:-2px}:host([appearance=transparent][kind=inverse]) button,:host([appearance=transparent][kind=inverse]) a,:host([appearance=transparent][kind=inverse]) calcite-loader{color:var(--calcite-color-text-inverse)}:host([scale=s]) button.content--slotted,:host([scale=s]) a.content--slotted{font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s][appearance=transparent]) button.content--slotted,:host([scale=s][appearance=transparent]) a.content--slotted{--calcite-button-padding-x-internal:0.5rem}:host([scale=s]) button,:host([scale=s]) a{--calcite-button-padding-y-internal:3px}:host([scale=m]) button.content--slotted,:host([scale=m]) a.content--slotted{--calcite-button-padding-x-internal:11px;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) button,:host([scale=m]) a{--calcite-button-padding-y-internal:7px}:host([scale=m][appearance=transparent]) button.content--slotted,:host([scale=m][appearance=transparent]) a.content--slotted{--calcite-button-padding-x-internal:0.75rem}:host([scale=l]) button.content--slotted,:host([scale=l]) a.content--slotted{--calcite-button-padding-x-internal:15px;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) .button-padding{--calcite-button-padding-x-internal:1rem;--calcite-button-padding-y-internal:11px}:host([scale=l]) .button-padding--shrunk{--calcite-button-padding-y-internal:9px}:host([scale=s]) button:not(.content--slotted),:host([scale=s]) a:not(.content--slotted){--calcite-button-padding-x-internal:0.125rem;--calcite-button-padding-y-internal:3px;inline-size:1.5rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-block-size:1.5rem}:host([scale=m]) button:not(.content--slotted),:host([scale=m]) a:not(.content--slotted){--calcite-button-padding-x-internal:0.125rem;--calcite-button-padding-y-internal:7px;inline-size:2rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-block-size:2rem}:host([scale=l]) button:not(.content--slotted),:host([scale=l]) a:not(.content--slotted){--calcite-button-padding-x-internal:0.125rem;--calcite-button-padding-y-internal:9px;inline-size:2.75rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-block-size:2.75rem}:host(:is([scale=s],[scale=m],[scale=l])[width=full]) a:not(.content--slotted),:host(:is([scale=s],[scale=m],[scale=l])[width=full]) button:not(.content--slotted){inline-size:var(--calcite-container-size-content-fluid)}:host([scale=l][appearance=transparent]) button:not(.content--slotted),:host([scale=l][appearance=transparent]) a:not(.content--slotted){--calcite-button-padding-y-internal:0.625rem}:host([scale=s][icon-start][icon-end]) button:not(.content--slotted),:host([scale=s][icon-start][icon-end]) a:not(.content--slotted){--calcite-button-padding-x-internal:23px;block-size:1.5rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=s][icon-start][icon-end][appearance=transparent]) button:not(.content--slotted),:host([scale=s][icon-start][icon-end][appearance=transparent]) a:not(.content--slotted){--calcite-button-padding-x-internal:1.5rem}:host([scale=m][icon-start][icon-end]) button:not(.content--slotted),:host([scale=m][icon-start][icon-end]) a:not(.content--slotted){--calcite-button-padding-x-internal:2rem;block-size:2rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=m][icon-start][icon-end][appearance=transparent]) button:not(.content--slotted),:host([scale=m][icon-start][icon-end][appearance=transparent]) a:not(.content--slotted){--calcite-button-padding-x-internal:33px}:host([scale=l][icon-start][icon-end]) button:not(.content--slotted),:host([scale=l][icon-start][icon-end]) a:not(.content--slotted){--calcite-button-padding-x-internal:43px;block-size:2.75rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l][icon-start][icon-end]) button:not(.content--slotted) .icon--start+.icon--end,:host([scale=l][icon-start][icon-end]) a:not(.content--slotted) .icon--start+.icon--end{margin-inline-start:1rem}:host([scale=l][icon-start][icon-end][appearance=transparent]) button:not(.content--slotted),:host([scale=l][icon-start][icon-end][appearance=transparent]) a:not(.content--slotted){--calcite-button-padding-x-internal:2.75rem}:host([hidden]){display:none}[hidden]{display:none}`,Zve=Kve,Jve=ci(class extends li{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.mutationObserver=hn("mutation",()=>this.updateHasContent()),this.resizeObserver=hn("resize",()=>this.setTooltipText()),this.handleClick=()=>{const{type:e}=this;this.href||(e==="submit"?MB(this):e==="reset"&&Qye(this))},this.setTooltipText=()=>{const{contentEl:e}=this;e&&(this.tooltipText=e.offsetWidth<e.scrollWidth&&this.el.innerText||null)},this.setChildEl=e=>{var i;this.childEl=e,e&&((i=this.resizeObserver)==null||i.observe(e))},this.alignment="center",this.appearance="solid",this.label=void 0,this.kind="brand",this.disabled=!1,this.form=void 0,this.download=!1,this.href=void 0,this.iconEnd=void 0,this.iconFlipRtl=void 0,this.iconStart=void 0,this.loading=!1,this.name=void 0,this.rel=void 0,this.round=!1,this.scale="m",this.splitChild=!1,this.target=void 0,this.type="button",this.width="auto",this.messages=void 0,this.messageOverrides=void 0,this.hasContent=!1,this.effectiveLocale="",this.defaultMessages=void 0,this.tooltipText=void 0}handleGlobalAttributesChanged(){Tu(this)}onMessagesChange(){}async connectedCallback(){Ds(this),So(this),this.setupTextContentObserver(),V0(this),this.formEl=$B(this)}disconnectedCallback(){var e,i;(e=this.mutationObserver)==null||e.disconnect(),u_(this),zs(this),To(this),(i=this.resizeObserver)==null||i.disconnect(),this.formEl=null}async componentWillLoad(){vo(this),ya()&&(this.updateHasContent(),await _o(this))}componentDidLoad(){bo(this),this.setTooltipText()}componentDidRender(){Al(this)}render(){const e=this.href?"a":"button",i=e,n=this.loading?X("div",{class:ls.buttonLoader},X("calcite-loader",{class:this.loading?ls.loadingIn:ls.loadingOut,inline:!0,label:this.messages.loading,scale:this.scale==="l"?"m":"s"})):null,s=!this.iconStart&&!this.iconEnd,h=X("calcite-icon",{key:"f1036c0a1bf5740fe63806e3559ea66fac29b726",class:{[ls.icon]:!0,[ls.iconStart]:!0},flipRtl:this.iconFlipRtl==="start"||this.iconFlipRtl==="both",icon:this.iconStart,scale:Ji(this.scale)}),f=X("calcite-icon",{key:"d2c22ecf9ca23426b4c4a3b42d623f35ee988a44",class:{[ls.icon]:!0,[ls.iconEnd]:!0},flipRtl:this.iconFlipRtl==="end"||this.iconFlipRtl==="both",icon:this.iconEnd,scale:Ji(this.scale)}),m=X("span",{key:"d1803021f5fa106c9e296402ec0a1498ecdf36c7",class:ls.content,ref:y=>this.contentEl=y},X("slot",{key:"d2f729c16f9c803ffa109b68d58a22a4383dd426"}));return X(Ol,{key:"2757c795d29f812cf11def4df108837b9971dcdb",disabled:this.disabled},X(i,{key:"e67a4882c8a0c13d6b5f98bc8c5b53c10ba36e3e","aria-busy":cn(this.loading),"aria-expanded":this.el.ariaExpanded?this.el.ariaExpanded:null,"aria-label":this.loading?this.messages.loading:Lm(this),"aria-live":"polite",class:{[ls.buttonPadding]:s,[ls.buttonPaddingShrunk]:!s,[ls.contentSlotted]:this.hasContent,[ls.iconStartEmpty]:!this.iconStart,[ls.iconEndEmpty]:!this.iconEnd},disabled:e==="button"?this.disabled:null,download:e==="a"?this.download===!0||this.download===""?"":this.download||null:null,href:e==="a"&&this.href,name:e==="button"&&this.name,onClick:this.handleClick,ref:this.setChildEl,rel:e==="a"&&this.rel,tabIndex:this.disabled?-1:null,target:e==="a"&&this.target,title:this.tooltipText,type:e==="button"&&this.type},n,this.iconStart?h:null,this.hasContent?m:null,this.iconEnd?f:null))}async setFocus(){var e;await wo(this),(e=this.childEl)==null||e.focus()}effectiveLocaleChange(){xo(this,this.effectiveLocale)}updateHasContent(){var i,n;const e=this.el.textContent.trim().length>0||this.el.childNodes.length>0;this.hasContent=this.el.childNodes.length===1&&((i=this.el.childNodes[0])==null?void 0:i.nodeName)==="#text"?((n=this.el.textContent)==null?void 0:n.trim().length)>0:e}setupTextContentObserver(){var e;(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0})}onLabelClick(){this.handleClick(),this.setFocus()}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{"aria-expanded":["handleGlobalAttributesChanged"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return Zve}},[1,"calcite-button",{alignment:[513],appearance:[513],label:[1],kind:[513],disabled:[516],form:[513],download:[520],href:[513],iconEnd:[513,"icon-end"],iconFlipRtl:[513,"icon-flip-rtl"],iconStart:[513,"icon-start"],loading:[516],name:[513],rel:[513],round:[516],scale:[513],splitChild:[520,"split-child"],target:[513],type:[513],width:[513],messages:[1040],messageOverrides:[1040],hasContent:[32],effectiveLocale:[32],defaultMessages:[32],tooltipText:[32],setFocus:[64]},void 0,{"aria-expanded":["handleGlobalAttributesChanged"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function qB(){if(typeof customElements>"u")return;["calcite-button","calcite-icon","calcite-loader"].forEach(e=>{switch(e){case"calcite-button":customElements.get(e)||customElements.define(e,Jve);break;case"calcite-icon":customElements.get(e)||Or();break;case"calcite-loader":customElements.get(e)||Eu();break}})}qB();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const Yve={container:"container"},Xve=":host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex}:host([alignment=start]){text-align:start}:host([alignment=end]){text-align:end}:host([alignment=center]){text-align:center}:host([scale=s]) .container{gap:0.25rem;font-size:var(--calcite-font-size--2);line-height:1rem;margin-block-end:var(--calcite-label-margin-bottom, 0.5rem)}:host([scale=m]) .container{gap:0.5rem;font-size:var(--calcite-font-size--1);line-height:1rem;margin-block-end:var(--calcite-label-margin-bottom, 0.75rem)}:host([scale=l]) .container{gap:0.5rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;margin-block-end:var(--calcite-label-margin-bottom, 1rem)}:host .container{margin-inline:0px;margin-block-start:0px;inline-size:100%;line-height:1.375;color:var(--calcite-color-text-1)}:host([layout=default]) .container{display:flex;flex-direction:column}:host([layout=inline]) .container,:host([layout=inline-space-between]) .container{display:flex;flex-direction:row;align-items:center;gap:0.5rem}:host([layout=inline][scale=l]) .container{gap:0.75rem}:host([layout=inline-space-between]) .container{justify-content:space-between}:host([disabled])>.container{opacity:var(--calcite-opacity-disabled)}:host([disabled]) ::slotted(*[disabled]),:host([disabled]) ::slotted(*[disabled] *){--tw-bg-opacity:1}:host([disabled]) ::slotted(calcite-input-message:not([active])){--tw-bg-opacity:0}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([hidden]){display:none}[hidden]{display:none}",Qve=Xve,ebe=ci(class extends li{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteInternalLabelClick=qe(this,"calciteInternalLabelClick",2),this.labelClickHandler=e=>{var i;((i=window.getSelection())==null?void 0:i.type)!=="Range"&&this.calciteInternalLabelClick.emit({sourceEvent:e})},this.alignment="start",this.for=void 0,this.scale="m",this.layout="default"}handleForChange(){gve(this.el)}connectedCallback(){document.dispatchEvent(new CustomEvent(h_))}disconnectedCallback(){document.dispatchEvent(new CustomEvent(Rw))}render(){return X(dn,{key:"c3eff09792519c9e5a76ee28e3754db83b536f99",onClick:this.labelClickHandler},X("div",{key:"387902edd9b59be290f95ad6c2721584037d7256",class:Yve.container},X("slot",{key:"b54d782522e95323333040e40e1a6dd06b52a575"})))}get el(){return this}static get watchers(){return{for:["handleForChange"]}}static get style(){return Qve}},[1,"calcite-label",{alignment:[513],for:[513],scale:[513],layout:[513]},void 0,{for:["handleForChange"]}]);function tbe(){if(typeof customElements>"u")return;["calcite-label"].forEach(e=>{switch(e){case"calcite-label":customElements.get(e)||customElements.define(e,ebe);break}})}tbe();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */var ibe=typeof global=="object"&&global&&global.Object===Object&&global;const nbe=ibe;var rbe=typeof self=="object"&&self&&self.Object===Object&&self,sbe=nbe||rbe||Function("return this")();const WB=sbe;var obe=WB.Symbol;const Dw=obe;var KB=Object.prototype,abe=KB.hasOwnProperty,lbe=KB.toString,_1=Dw?Dw.toStringTag:void 0;function cbe(t){var e=abe.call(t,_1),i=t[_1];try{t[_1]=void 0;var n=!0}catch{}var s=lbe.call(t);return n&&(e?t[_1]=i:delete t[_1]),s}var hbe=Object.prototype,ube=hbe.toString;function dbe(t){return ube.call(t)}var pbe="[object Null]",fbe="[object Undefined]",DI=Dw?Dw.toStringTag:void 0;function gbe(t){return t==null?t===void 0?fbe:pbe:DI&&DI in Object(t)?cbe(t):dbe(t)}function mbe(t){return t!=null&&typeof t=="object"}var ybe="[object Symbol]";function vbe(t){return typeof t=="symbol"||mbe(t)&&gbe(t)==ybe}var bbe=/\s/;function wbe(t){for(var e=t.length;e--&&bbe.test(t.charAt(e)););return e}var _be=/^\s+/;function xbe(t){return t&&t.slice(0,wbe(t)+1).replace(_be,"")}function zw(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var zI=NaN,Sbe=/^[-+]0x[0-9a-f]+$/i,Tbe=/^0b[01]+$/i,Ebe=/^0o[0-7]+$/i,Mbe=parseInt;function FI(t){if(typeof t=="number")return t;if(vbe(t))return zI;if(zw(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=zw(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=xbe(t);var i=Tbe.test(t);return i||Ebe.test(t)?Mbe(t.slice(2),i?2:8):Sbe.test(t)?zI:+t}var $be=function(){return WB.Date.now()};const lx=$be;var kbe="Expected a function",Cbe=Math.max,Ibe=Math.min;function ZB(t,e,i){var n,s,h,f,m,y,x=0,E=!1,k=!1,I=!0;if(typeof t!="function")throw new TypeError(kbe);e=FI(e)||0,zw(i)&&(E=!!i.leading,k="maxWait"in i,h=k?Cbe(FI(i.maxWait)||0,e):h,I="trailing"in i?!!i.trailing:I);function P(ie){var le=n,pe=s;return n=s=void 0,x=ie,f=t.apply(pe,le),f}function L(ie){return x=ie,m=setTimeout(H,e),E?P(ie):f}function D(ie){var le=ie-y,pe=ie-x,ve=e-le;return k?Ibe(ve,h-pe):ve}function j(ie){var le=ie-y,pe=ie-x;return y===void 0||le>=e||le<0||k&&pe>=h}function H(){var ie=lx();if(j(ie))return W(ie);m=setTimeout(H,D(ie))}function W(ie){return m=void 0,I&&n?P(ie):(n=s=void 0,f)}function Z(){m!==void 0&&clearTimeout(m),x=0,n=y=s=m=void 0}function Y(){return m===void 0?f:W(lx())}function te(){var ie=lx(),le=j(ie);if(n=arguments,s=this,y=ie,le){if(m===void 0)return L(y);if(k)return clearTimeout(m),m=setTimeout(H,e),P(y)}return m===void 0&&(m=setTimeout(H,e)),f}return te.cancel=Z,te.flush=Y,te}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const JB=["top","right","bottom","left"],jI=["start","end"],GI=JB.reduce((t,e)=>t.concat(e,e+"-"+jI[0],e+"-"+jI[1]),[]),b0=Math.min,Ud=Math.max,Fw=Math.round,Ov=Math.floor,gu=t=>({x:t,y:t}),Abe={left:"right",right:"left",bottom:"top",top:"bottom"},Obe={start:"end",end:"start"};function T6(t,e,i){return Ud(t,b0(e,i))}function vp(t,e){return typeof t=="function"?t(e):t}function Nc(t){return t.split("-")[0]}function cl(t){return t.split("-")[1]}function YB(t){return t==="x"?"y":"x"}function IM(t){return t==="y"?"height":"width"}function p_(t){return["top","bottom"].includes(Nc(t))?"y":"x"}function AM(t){return YB(p_(t))}function XB(t,e,i){i===void 0&&(i=!1);const n=cl(t),s=AM(t),h=IM(s);let f=s==="x"?n===(i?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[h]>e.floating[h]&&(f=Gw(f)),[f,Gw(f)]}function Pbe(t){const e=Gw(t);return[jw(t),e,jw(e)]}function jw(t){return t.replace(/start|end/g,e=>Obe[e])}function Rbe(t,e,i){const n=["left","right"],s=["right","left"],h=["top","bottom"],f=["bottom","top"];switch(t){case"top":case"bottom":return i?e?s:n:e?n:s;case"left":case"right":return e?h:f;default:return[]}}function Nbe(t,e,i,n){const s=cl(t);let h=Rbe(Nc(t),i==="start",n);return s&&(h=h.map(f=>f+"-"+s),e&&(h=h.concat(h.map(jw)))),h}function Gw(t){return t.replace(/left|right|bottom|top/g,e=>Abe[e])}function Lbe(t){return{top:0,right:0,bottom:0,left:0,...t}}function QB(t){return typeof t!="number"?Lbe(t):{top:t,right:t,bottom:t,left:t}}function Uw(t){const{x:e,y:i,width:n,height:s}=t;return{width:n,height:s,top:i,left:e,right:e+n,bottom:i+s,x:e,y:i}}function UI(t,e,i){let{reference:n,floating:s}=t;const h=p_(e),f=AM(e),m=IM(f),y=Nc(e),x=h==="y",E=n.x+n.width/2-s.width/2,k=n.y+n.height/2-s.height/2,I=n[m]/2-s[m]/2;let P;switch(y){case"top":P={x:E,y:n.y-s.height};break;case"bottom":P={x:E,y:n.y+n.height};break;case"right":P={x:n.x+n.width,y:k};break;case"left":P={x:n.x-s.width,y:k};break;default:P={x:n.x,y:n.y}}switch(cl(e)){case"start":P[f]-=I*(i&&x?-1:1);break;case"end":P[f]+=I*(i&&x?-1:1);break}return P}const Dbe=async(t,e,i)=>{const{placement:n="bottom",strategy:s="absolute",middleware:h=[],platform:f}=i,m=h.filter(Boolean),y=await(f.isRTL==null?void 0:f.isRTL(e));let x=await f.getElementRects({reference:t,floating:e,strategy:s}),{x:E,y:k}=UI(x,n,y),I=n,P={},L=0;for(let D=0;D<m.length;D++){const{name:j,fn:H}=m[D],{x:W,y:Z,data:Y,reset:te}=await H({x:E,y:k,initialPlacement:n,placement:I,strategy:s,middlewareData:P,rects:x,platform:f,elements:{reference:t,floating:e}});E=W??E,k=Z??k,P={...P,[j]:{...P[j],...Y}},te&&L<=50&&(L++,typeof te=="object"&&(te.placement&&(I=te.placement),te.rects&&(x=te.rects===!0?await f.getElementRects({reference:t,floating:e,strategy:s}):te.rects),{x:E,y:k}=UI(x,I,y)),D=-1)}return{x:E,y:k,placement:I,strategy:s,middlewareData:P}};async function zm(t,e){var i;e===void 0&&(e={});const{x:n,y:s,platform:h,rects:f,elements:m,strategy:y}=t,{boundary:x="clippingAncestors",rootBoundary:E="viewport",elementContext:k="floating",altBoundary:I=!1,padding:P=0}=vp(e,t),L=QB(P),j=m[I?k==="floating"?"reference":"floating":k],H=Uw(await h.getClippingRect({element:(i=await(h.isElement==null?void 0:h.isElement(j)))==null||i?j:j.contextElement||await(h.getDocumentElement==null?void 0:h.getDocumentElement(m.floating)),boundary:x,rootBoundary:E,strategy:y})),W=k==="floating"?{x:n,y:s,width:f.floating.width,height:f.floating.height}:f.reference,Z=await(h.getOffsetParent==null?void 0:h.getOffsetParent(m.floating)),Y=await(h.isElement==null?void 0:h.isElement(Z))?await(h.getScale==null?void 0:h.getScale(Z))||{x:1,y:1}:{x:1,y:1},te=Uw(h.convertOffsetParentRelativeRectToViewportRelativeRect?await h.convertOffsetParentRelativeRectToViewportRelativeRect({elements:m,rect:W,offsetParent:Z,strategy:y}):W);return{top:(H.top-te.top+L.top)/Y.y,bottom:(te.bottom-H.bottom+L.bottom)/Y.y,left:(H.left-te.left+L.left)/Y.x,right:(te.right-H.right+L.right)/Y.x}}const zbe=t=>({name:"arrow",options:t,async fn(e){const{x:i,y:n,placement:s,rects:h,platform:f,elements:m,middlewareData:y}=e,{element:x,padding:E=0}=vp(t,e)||{};if(x==null)return{};const k=QB(E),I={x:i,y:n},P=AM(s),L=IM(P),D=await f.getDimensions(x),j=P==="y",H=j?"top":"left",W=j?"bottom":"right",Z=j?"clientHeight":"clientWidth",Y=h.reference[L]+h.reference[P]-I[P]-h.floating[L],te=I[P]-h.reference[P],ie=await(f.getOffsetParent==null?void 0:f.getOffsetParent(x));let le=ie?ie[Z]:0;(!le||!await(f.isElement==null?void 0:f.isElement(ie)))&&(le=m.floating[Z]||h.floating[L]);const pe=Y/2-te/2,ve=le/2-D[L]/2-1,be=b0(k[H],ve),Se=b0(k[W],ve),Me=be,he=le-D[L]-Se,se=le/2-D[L]/2+pe,xe=T6(Me,se,he),Be=!y.arrow&&cl(s)!=null&&se!==xe&&h.reference[L]/2-(se<Me?be:Se)-D[L]/2<0,Fe=Be?se<Me?se-Me:se-he:0;return{[P]:I[P]+Fe,data:{[P]:xe,centerOffset:se-xe-Fe,...Be&&{alignmentOffset:Fe}},reset:Be}}});function Fbe(t,e,i){return(t?[...i.filter(s=>cl(s)===t),...i.filter(s=>cl(s)!==t)]:i.filter(s=>Nc(s)===s)).filter(s=>t?cl(s)===t||(e?jw(s)!==s:!1):!0)}const jbe=function(t){return t===void 0&&(t={}),{name:"autoPlacement",options:t,async fn(e){var i,n,s;const{rects:h,middlewareData:f,placement:m,platform:y,elements:x}=e,{crossAxis:E=!1,alignment:k,allowedPlacements:I=GI,autoAlignment:P=!0,...L}=vp(t,e),D=k!==void 0||I===GI?Fbe(k||null,P,I):I,j=await zm(e,L),H=((i=f.autoPlacement)==null?void 0:i.index)||0,W=D[H];if(W==null)return{};const Z=XB(W,h,await(y.isRTL==null?void 0:y.isRTL(x.floating)));if(m!==W)return{reset:{placement:D[0]}};const Y=[j[Nc(W)],j[Z[0]],j[Z[1]]],te=[...((n=f.autoPlacement)==null?void 0:n.overflows)||[],{placement:W,overflows:Y}],ie=D[H+1];if(ie)return{data:{index:H+1,overflows:te},reset:{placement:ie}};const le=te.map(be=>{const Se=cl(be.placement);return[be.placement,Se&&E?be.overflows.slice(0,2).reduce((Me,he)=>Me+he,0):be.overflows[0],be.overflows]}).sort((be,Se)=>be[1]-Se[1]),ve=((s=le.filter(be=>be[2].slice(0,cl(be[0])?2:3).every(Se=>Se<=0))[0])==null?void 0:s[0])||le[0][0];return ve!==m?{data:{index:H+1,overflows:te},reset:{placement:ve}}:{}}}},Gbe=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var i,n;const{placement:s,middlewareData:h,rects:f,initialPlacement:m,platform:y,elements:x}=e,{mainAxis:E=!0,crossAxis:k=!0,fallbackPlacements:I,fallbackStrategy:P="bestFit",fallbackAxisSideDirection:L="none",flipAlignment:D=!0,...j}=vp(t,e);if((i=h.arrow)!=null&&i.alignmentOffset)return{};const H=Nc(s),W=Nc(m)===m,Z=await(y.isRTL==null?void 0:y.isRTL(x.floating)),Y=I||(W||!D?[Gw(m)]:Pbe(m));!I&&L!=="none"&&Y.push(...Nbe(m,D,L,Z));const te=[m,...Y],ie=await zm(e,j),le=[];let pe=((n=h.flip)==null?void 0:n.overflows)||[];if(E&&le.push(ie[H]),k){const Me=XB(s,f,Z);le.push(ie[Me[0]],ie[Me[1]])}if(pe=[...pe,{placement:s,overflows:le}],!le.every(Me=>Me<=0)){var ve,be;const Me=(((ve=h.flip)==null?void 0:ve.index)||0)+1,he=te[Me];if(he)return{data:{index:Me,overflows:pe},reset:{placement:he}};let se=(be=pe.filter(xe=>xe.overflows[0]<=0).sort((xe,Be)=>xe.overflows[1]-Be.overflows[1])[0])==null?void 0:be.placement;if(!se)switch(P){case"bestFit":{var Se;const xe=(Se=pe.map(Be=>[Be.placement,Be.overflows.filter(Fe=>Fe>0).reduce((Fe,ze)=>Fe+ze,0)]).sort((Be,Fe)=>Be[1]-Fe[1])[0])==null?void 0:Se[0];xe&&(se=xe);break}case"initialPlacement":se=m;break}if(s!==se)return{reset:{placement:se}}}return{}}}};function BI(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function HI(t){return JB.some(e=>t[e]>=0)}const Ube=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:i}=e,{strategy:n="referenceHidden",...s}=vp(t,e);switch(n){case"referenceHidden":{const h=await zm(e,{...s,elementContext:"reference"}),f=BI(h,i.reference);return{data:{referenceHiddenOffsets:f,referenceHidden:HI(f)}}}case"escaped":{const h=await zm(e,{...s,altBoundary:!0}),f=BI(h,i.floating);return{data:{escapedOffsets:f,escaped:HI(f)}}}default:return{}}}}};async function Bbe(t,e){const{placement:i,platform:n,elements:s}=t,h=await(n.isRTL==null?void 0:n.isRTL(s.floating)),f=Nc(i),m=cl(i),y=p_(i)==="y",x=["left","top"].includes(f)?-1:1,E=h&&y?-1:1,k=vp(e,t);let{mainAxis:I,crossAxis:P,alignmentAxis:L}=typeof k=="number"?{mainAxis:k,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...k};return m&&typeof L=="number"&&(P=m==="end"?L*-1:L),y?{x:P*E,y:I*x}:{x:I*x,y:P*E}}const Hbe=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var i,n;const{x:s,y:h,placement:f,middlewareData:m}=e,y=await Bbe(e,t);return f===((i=m.offset)==null?void 0:i.placement)&&(n=m.arrow)!=null&&n.alignmentOffset?{}:{x:s+y.x,y:h+y.y,data:{...y,placement:f}}}}},Vbe=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:i,y:n,placement:s}=e,{mainAxis:h=!0,crossAxis:f=!1,limiter:m={fn:j=>{let{x:H,y:W}=j;return{x:H,y:W}}},...y}=vp(t,e),x={x:i,y:n},E=await zm(e,y),k=p_(Nc(s)),I=YB(k);let P=x[I],L=x[k];if(h){const j=I==="y"?"top":"left",H=I==="y"?"bottom":"right",W=P+E[j],Z=P-E[H];P=T6(W,P,Z)}if(f){const j=k==="y"?"top":"left",H=k==="y"?"bottom":"right",W=L+E[j],Z=L-E[H];L=T6(W,L,Z)}const D=m.fn({...e,[I]:P,[k]:L});return{...D,data:{x:D.x-i,y:D.y-n}}}}};function f_(){return typeof window<"u"}function q0(t){return eH(t)?(t.nodeName||"").toLowerCase():"#document"}function As(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Bc(t){var e;return(e=(eH(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function eH(t){return f_()?t instanceof Node||t instanceof As(t).Node:!1}function ga(t){return f_()?t instanceof Element||t instanceof As(t).Element:!1}function wl(t){return f_()?t instanceof HTMLElement||t instanceof As(t).HTMLElement:!1}function VI(t){return!f_()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof As(t).ShadowRoot}function My(t){const{overflow:e,overflowX:i,overflowY:n,display:s}=ma(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+i)&&!["inline","contents"].includes(s)}function qbe(t){return["table","td","th"].includes(q0(t))}function g_(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function m_(t){const e=OM(),i=ga(t)?ma(t):t;return i.transform!=="none"||i.perspective!=="none"||(i.containerType?i.containerType!=="normal":!1)||!e&&(i.backdropFilter?i.backdropFilter!=="none":!1)||!e&&(i.filter?i.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(i.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(i.contain||"").includes(n))}function Wbe(t){let e=mu(t);for(;wl(e)&&!w0(e);){if(m_(e))return e;if(g_(e))return null;e=mu(e)}return null}function OM(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function w0(t){return["html","body","#document"].includes(q0(t))}function ma(t){return As(t).getComputedStyle(t)}function y_(t){return ga(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function mu(t){if(q0(t)==="html")return t;const e=t.assignedSlot||t.parentNode||VI(t)&&t.host||Bc(t);return VI(e)?e.host:e}function tH(t){const e=mu(t);return w0(e)?t.ownerDocument?t.ownerDocument.body:t.body:wl(e)&&My(e)?e:tH(e)}function Fm(t,e,i){var n;e===void 0&&(e=[]),i===void 0&&(i=!0);const s=tH(t),h=s===((n=t.ownerDocument)==null?void 0:n.body),f=As(s);if(h){const m=Kbe(f);return e.concat(f,f.visualViewport||[],My(s)?s:[],m&&i?Fm(m):[])}return e.concat(s,Fm(s,[],i))}function Kbe(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function iH(t){const e=ma(t);let i=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const s=wl(t),h=s?t.offsetWidth:i,f=s?t.offsetHeight:n,m=Fw(i)!==h||Fw(n)!==f;return m&&(i=h,n=f),{width:i,height:n,$:m}}function PM(t){return ga(t)?t:t.contextElement}function qf(t){const e=PM(t);if(!wl(e))return gu(1);const i=e.getBoundingClientRect(),{width:n,height:s,$:h}=iH(e);let f=(h?Fw(i.width):i.width)/n,m=(h?Fw(i.height):i.height)/s;return(!f||!Number.isFinite(f))&&(f=1),(!m||!Number.isFinite(m))&&(m=1),{x:f,y:m}}const Zbe=gu(0);function nH(t){const e=As(t);return!OM()||!e.visualViewport?Zbe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Jbe(t,e,i){return e===void 0&&(e=!1),!i||e&&i!==As(t)?!1:e}function tp(t,e,i,n){e===void 0&&(e=!1),i===void 0&&(i=!1);const s=t.getBoundingClientRect(),h=PM(t);let f=gu(1);e&&(n?ga(n)&&(f=qf(n)):f=qf(t));const m=Jbe(h,i,n)?nH(h):gu(0);let y=(s.left+m.x)/f.x,x=(s.top+m.y)/f.y,E=s.width/f.x,k=s.height/f.y;if(h){const I=As(h),P=n&&ga(n)?As(n):n;let L=I,D=L.frameElement;for(;D&&n&&P!==L;){const j=qf(D),H=D.getBoundingClientRect(),W=ma(D),Z=H.left+(D.clientLeft+parseFloat(W.paddingLeft))*j.x,Y=H.top+(D.clientTop+parseFloat(W.paddingTop))*j.y;y*=j.x,x*=j.y,E*=j.x,k*=j.y,y+=Z,x+=Y,L=As(D),D=L.frameElement}}return Uw({width:E,height:k,x:y,y:x})}function Ybe(t){let{elements:e,rect:i,offsetParent:n,strategy:s}=t;const h=s==="fixed",f=Bc(n),m=e?g_(e.floating):!1;if(n===f||m&&h)return i;let y={scrollLeft:0,scrollTop:0},x=gu(1);const E=gu(0),k=wl(n);if((k||!k&&!h)&&((q0(n)!=="body"||My(f))&&(y=y_(n)),wl(n))){const I=tp(n);x=qf(n),E.x=I.x+n.clientLeft,E.y=I.y+n.clientTop}return{width:i.width*x.x,height:i.height*x.y,x:i.x*x.x-y.scrollLeft*x.x+E.x,y:i.y*x.y-y.scrollTop*x.y+E.y}}function Xbe(t){return Array.from(t.getClientRects())}function rH(t){return tp(Bc(t)).left+y_(t).scrollLeft}function Qbe(t){const e=Bc(t),i=y_(t),n=t.ownerDocument.body,s=Ud(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),h=Ud(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let f=-i.scrollLeft+rH(t);const m=-i.scrollTop;return ma(n).direction==="rtl"&&(f+=Ud(e.clientWidth,n.clientWidth)-s),{width:s,height:h,x:f,y:m}}function e2e(t,e){const i=As(t),n=Bc(t),s=i.visualViewport;let h=n.clientWidth,f=n.clientHeight,m=0,y=0;if(s){h=s.width,f=s.height;const x=OM();(!x||x&&e==="fixed")&&(m=s.offsetLeft,y=s.offsetTop)}return{width:h,height:f,x:m,y}}function t2e(t,e){const i=tp(t,!0,e==="fixed"),n=i.top+t.clientTop,s=i.left+t.clientLeft,h=wl(t)?qf(t):gu(1),f=t.clientWidth*h.x,m=t.clientHeight*h.y,y=s*h.x,x=n*h.y;return{width:f,height:m,x:y,y:x}}function qI(t,e,i){let n;if(e==="viewport")n=e2e(t,i);else if(e==="document")n=Qbe(Bc(t));else if(ga(e))n=t2e(e,i);else{const s=nH(t);n={...e,x:e.x-s.x,y:e.y-s.y}}return Uw(n)}function sH(t,e){const i=mu(t);return i===e||!ga(i)||w0(i)?!1:ma(i).position==="fixed"||sH(i,e)}function i2e(t,e){const i=e.get(t);if(i)return i;let n=Fm(t,[],!1).filter(m=>ga(m)&&q0(m)!=="body"),s=null;const h=ma(t).position==="fixed";let f=h?mu(t):t;for(;ga(f)&&!w0(f);){const m=ma(f),y=m_(f);!y&&m.position==="fixed"&&(s=null),(h?!y&&!s:!y&&m.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||My(f)&&!y&&sH(t,f))?n=n.filter(E=>E!==f):s=m,f=mu(f)}return e.set(t,n),n}function n2e(t){let{element:e,boundary:i,rootBoundary:n,strategy:s}=t;const f=[...i==="clippingAncestors"?g_(e)?[]:i2e(e,this._c):[].concat(i),n],m=f[0],y=f.reduce((x,E)=>{const k=qI(e,E,s);return x.top=Ud(k.top,x.top),x.right=b0(k.right,x.right),x.bottom=b0(k.bottom,x.bottom),x.left=Ud(k.left,x.left),x},qI(e,m,s));return{width:y.right-y.left,height:y.bottom-y.top,x:y.left,y:y.top}}function r2e(t){const{width:e,height:i}=iH(t);return{width:e,height:i}}function s2e(t,e,i){const n=wl(e),s=Bc(e),h=i==="fixed",f=tp(t,!0,h,e);let m={scrollLeft:0,scrollTop:0};const y=gu(0);if(n||!n&&!h)if((q0(e)!=="body"||My(s))&&(m=y_(e)),n){const k=tp(e,!0,h,e);y.x=k.x+e.clientLeft,y.y=k.y+e.clientTop}else s&&(y.x=rH(s));const x=f.left+m.scrollLeft-y.x,E=f.top+m.scrollTop-y.y;return{x,y:E,width:f.width,height:f.height}}function cx(t){return ma(t).position==="static"}function WI(t,e){return!wl(t)||ma(t).position==="fixed"?null:e?e(t):t.offsetParent}function oH(t,e){const i=As(t);if(g_(t))return i;if(!wl(t)){let s=mu(t);for(;s&&!w0(s);){if(ga(s)&&!cx(s))return s;s=mu(s)}return i}let n=WI(t,e);for(;n&&qbe(n)&&cx(n);)n=WI(n,e);return n&&w0(n)&&cx(n)&&!m_(n)?i:n||Wbe(t)||i}const o2e=async function(t){const e=this.getOffsetParent||oH,i=this.getDimensions,n=await i(t.floating);return{reference:s2e(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function a2e(t){return ma(t).direction==="rtl"}const E6={convertOffsetParentRelativeRectToViewportRelativeRect:Ybe,getDocumentElement:Bc,getClippingRect:n2e,getOffsetParent:oH,getElementRects:o2e,getClientRects:Xbe,getDimensions:r2e,getScale:qf,isElement:ga,isRTL:a2e};function l2e(t,e){let i=null,n;const s=Bc(t);function h(){var m;clearTimeout(n),(m=i)==null||m.disconnect(),i=null}function f(m,y){m===void 0&&(m=!1),y===void 0&&(y=1),h();const{left:x,top:E,width:k,height:I}=t.getBoundingClientRect();if(m||e(),!k||!I)return;const P=Ov(E),L=Ov(s.clientWidth-(x+k)),D=Ov(s.clientHeight-(E+I)),j=Ov(x),W={rootMargin:-P+"px "+-L+"px "+-D+"px "+-j+"px",threshold:Ud(0,b0(1,y))||1};let Z=!0;function Y(te){const ie=te[0].intersectionRatio;if(ie!==y){if(!Z)return f();ie?f(!1,ie):n=setTimeout(()=>{f(!1,1e-7)},1e3)}Z=!1}try{i=new IntersectionObserver(Y,{...W,root:s.ownerDocument})}catch{i=new IntersectionObserver(Y,W)}i.observe(t)}return f(!0),h}function c2e(t,e,i,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:h=!0,elementResize:f=typeof ResizeObserver=="function",layoutShift:m=typeof IntersectionObserver=="function",animationFrame:y=!1}=n,x=PM(t),E=s||h?[...x?Fm(x):[],...Fm(e)]:[];E.forEach(H=>{s&&H.addEventListener("scroll",i,{passive:!0}),h&&H.addEventListener("resize",i)});const k=x&&m?l2e(x,i):null;let I=-1,P=null;f&&(P=new ResizeObserver(H=>{let[W]=H;W&&W.target===x&&P&&(P.unobserve(e),cancelAnimationFrame(I),I=requestAnimationFrame(()=>{var Z;(Z=P)==null||Z.observe(e)})),i()}),x&&!y&&P.observe(x),P.observe(e));let L,D=y?tp(t):null;y&&j();function j(){const H=tp(t);D&&(H.x!==D.x||H.y!==D.y||H.width!==D.width||H.height!==D.height)&&i(),D=H,L=requestAnimationFrame(j)}return i(),()=>{var H;E.forEach(W=>{s&&W.removeEventListener("scroll",i),h&&W.removeEventListener("resize",i)}),k==null||k(),(H=P)==null||H.disconnect(),P=null,y&&cancelAnimationFrame(L)}}const h2e=Hbe,u2e=jbe,d2e=Vbe,KI=Gbe,p2e=Ube,f2e=zbe,g2e=(t,e,i)=>{const n=new Map,s={platform:E6,...i},h={...s.platform,_c:n};return Dbe(t,e,{...s,platform:h})};function m2e(t){return y2e(t)}function hx(t){return t.assignedSlot?t.assignedSlot:t.parentNode instanceof ShadowRoot?t.parentNode.host:t.parentNode}function y2e(t){for(let e=t;e;e=hx(e))if(e instanceof Element&&getComputedStyle(e).display==="none")return null;for(let e=hx(t);e;e=hx(e)){if(!(e instanceof Element))continue;const i=getComputedStyle(e);if(i.display!=="contents"&&(i.position!=="static"||m_(i)||e.tagName==="BODY"))return e}return null}(function(){if(ya()){const e=E6.getOffsetParent;E6.getOffsetParent=i=>e(i,m2e)}})();function ZI(t){const e=window.devicePixelRatio||1;return Math.round(t*e)/e}const aH=async(t,{referenceEl:e,floatingEl:i,overlayPositioning:n="absolute",placement:s,flipDisabled:h,flipPlacements:f,offsetDistance:m,offsetSkidding:y,arrowEl:x,type:E})=>{var te;if(!e||!i)return null;const k=ll(i)==="rtl",{x:I,y:P,placement:L,strategy:D,middlewareData:j}=await g2e(e,i,{strategy:n,placement:s==="auto"||s==="auto-start"||s==="auto-end"?void 0:YI(s,k),middleware:_2e({placement:s,flipDisabled:h,flipPlacements:f==null?void 0:f.map(ie=>YI(ie,k)),offsetDistance:m,offsetSkidding:y,arrowEl:x,type:E})});if(x&&j.arrow){const{x:ie,y:le}=j.arrow,pe=L.split("-")[0],ve=ie!=null?"left":"top",be=S2e[pe],Se={left:"",top:"",bottom:"",right:""};"floatingLayout"in t&&(t.floatingLayout=pe==="left"||pe==="right"?"horizontal":"vertical"),Object.assign(x.style,{...Se,[ve]:`${ve=="left"?ie:le}px`,[pe]:"100%",transform:be})}const W=((te=j.hide)==null?void 0:te.referenceHidden)?"hidden":null,Z=W?"none":null;i.setAttribute(v2e,L);const{open:Y}=t;Object.assign(i.style,{visibility:W,pointerEvents:Z,position:D,transform:Y?`translate(${ZI(I)}px,${ZI(P)}px)`:"",top:0,left:0})},v2e="data-placement",JI=["top","bottom","right","left","top-start","top-end","bottom-start","bottom-end","right-start","right-end","left-start","left-end","leading","trailing","leading-start","leading-end","trailing-start","trailing-end"],b2e="bottom-start",w2e="bottom-end",_0={animation:"calcite-floating-ui-anim",animationActive:"calcite-floating-ui-anim--active",arrow:"calcite-floating-ui-arrow",arrowStroke:"calcite-floating-ui-arrow__stroke"};function _2e({placement:t,flipDisabled:e,flipPlacements:i,offsetDistance:n,offsetSkidding:s,arrowEl:h,type:f}){const m=[d2e(),p2e()];if(f==="menu")return[...m,KI({fallbackPlacements:i||["top-start","top","top-end","bottom-start","bottom","bottom-end"]})];if(f==="popover"||f==="tooltip"){const y=[...m,h2e({mainAxis:typeof n=="number"?n:0,crossAxis:typeof s=="number"?s:0})];return t==="auto"||t==="auto-start"||t==="auto-end"?y.push(u2e({alignment:t==="auto-start"?"start":t==="auto-end"?"end":null})):e||y.push(KI(i?{fallbackPlacements:i}:{})),h&&y.push(f2e({element:h})),y}return[]}function lH(t,e){const i=t.filter(n=>JI.includes(n));return i.length!==t.length&&console.warn(`${e.tagName}: Invalid value found in: flipPlacements. Try any of these: ${JI.map(n=>`"${n}"`).join(", ").trim()}`,{el:e}),i}function YI(t,e=!1){const i=["left","right"];return e&&i.reverse(),t.replace(/leading/gi,i[0]).replace(/trailing/gi,i[1])}async function RM(t,e,i=!1){if(!t.open||!e.floatingEl||!e.referenceEl)return;if(!jm.get(t))return cH(t,e.referenceEl,e.floatingEl);await(i?x2e(t):aH)(t,e)}function x2e(t){let e=Bw.get(t);return e||(e=ZB(aH,WC.reposition,{leading:!0,maxWait:WC.reposition}),Bw.set(t,e),e)}const S2e={top:"",left:"rotate(-90deg)",bottom:"rotate(180deg)",right:"rotate(90deg)"},jm=new WeakMap,Bw=new WeakMap;async function cH(t,e,i){if(!i.isConnected)return;const n=ya()?c2e:(f,m,y)=>(y(),()=>{});jm.set(t,{state:"pending"});let s;const h=n(e,i,()=>{const f=t.reposition();s||(s=f)});return jm.set(t,{state:"active",cleanUp:h}),s}async function kf(t,e,i){if(!(!i||!e)&&(v_(t,e,i),Object.assign(i.style,{visibility:"hidden",pointerEvents:"none",position:t.overlayPositioning}),!!t.open))return cH(t,e,i)}function v_(t,e,i){var s;if(!i||!e)return;const n=jm.get(t);(n==null?void 0:n.state)==="active"&&n.cleanUp(),jm.delete(t),(s=Bw.get(t))==null||s.cancel(),Bw.delete(t)}const XI=4,hH=Math.ceil(Math.hypot(XI,XI));/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const T2e=l6;function QI(t){return"opened"in t?t.opened:t.open}function kc(t){T2e(()=>{t.transitionEl&&Vye(t.transitionEl,t.openTransitionProp,()=>{QI(t)?t.onBeforeOpen():t.onBeforeClose()},()=>{QI(t)?t.onOpen():t.onClose()})})}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const eA={arrow:"calcite-floating-ui-arrow",arrowStroke:"calcite-floating-ui-arrow__stroke"},E2e={width:12,height:6,strokeWidth:1},uH=({floatingLayout:t,key:e,ref:i})=>{const{width:n,height:s,strokeWidth:h}=E2e,f=n/2,m=t==="vertical",y=`M0,0 H${n} L${n-f},${s} Q${f},${s} ${f},${s} Z`;return X("svg",{"aria-hidden":"true",class:eA.arrow,height:n,key:e,ref:i,viewBox:`0 0 ${n} ${n+(m?0:h)}`,width:n+(m?h:0)},h>0&&X("path",{class:eA.arrowStroke,d:y,fill:"none","stroke-width":h+1}),X("path",{d:y,stroke:"none"}))};/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const M2e={container:"container"},$2e=300,k2e=500,tA="aria-describedby";function dH(t){const{referenceElement:e}=t;return(typeof e=="string"?Ey(t,{id:e}):e)||null}class C2e{constructor(){this.registeredElements=new WeakMap,this.registeredShadowRootCounts=new WeakMap,this.hoverOpenTimeout=null,this.hoverCloseTimeout=null,this.activeTooltip=null,this.registeredElementCount=0,this.clickedTooltip=null,this.queryTooltip=e=>{const{registeredElements:i}=this,n=e.find(s=>i.has(s));return i.get(n)},this.keyDownHandler=e=>{if(e.key==="Escape"&&!e.defaultPrevented){const{activeTooltip:i}=this;if(i!=null&&i.open){this.clearHoverTimeout(),this.closeActiveTooltip();const n=dH(i);n instanceof Element&&n.contains(e.target)&&e.preventDefault()}}},this.pointerMoveHandler=e=>{const i=e.composedPath(),{activeTooltip:n}=this,s=this.queryTooltip(i);if(this.pathHasOpenTooltip(s,i)){this.clearHoverTimeout();return}s!==this.clickedTooltip&&(s?this.openHoveredTooltip(s):n!=null&&n.open&&this.closeHoveredTooltip(),this.clickedTooltip=null)},this.clickHandler=e=>{this.clickedTooltip=null;const i=e.composedPath(),n=this.queryTooltip(i);if(this.pathHasOpenTooltip(n,i)){this.clearHoverTimeout();return}if(this.closeActiveTooltip(),!!n){if(this.clearHoverTimeout(),n.closeOnClick){this.clickedTooltip=n,this.toggleTooltip(n,!1);return}this.toggleTooltip(n,!0)}},this.blurHandler=()=>{this.closeActiveTooltip()},this.focusInHandler=e=>{const i=e.composedPath(),n=this.queryTooltip(i);if(this.pathHasOpenTooltip(n,i)){this.clearHoverTimeout();return}this.closeTooltipIfNotActive(n),n&&this.toggleFocusedTooltip(n,!0)},this.openHoveredTooltip=e=>{var i;this.hoverOpenTimeout=window.setTimeout(()=>{this.hoverOpenTimeout!==null&&(this.clearHoverCloseTimeout(),this.closeTooltipIfNotActive(e),this.toggleTooltip(e,!0))},(i=this.activeTooltip)!=null&&i.open?0:$2e)},this.closeHoveredTooltip=()=>{this.hoverCloseTimeout=window.setTimeout(()=>{this.hoverCloseTimeout!==null&&this.closeActiveTooltip()},k2e)}}registerElement(e,i){this.registeredElementCount++,this.registeredElements.set(e,i);const n=this.getReferenceElShadowRootNode(e);n&&this.registerShadowRoot(n),this.registeredElementCount===1&&this.addListeners()}unregisterElement(e){const i=this.getReferenceElShadowRootNode(e);i&&this.unregisterShadowRoot(i),this.registeredElements.delete(e)&&this.registeredElementCount--,this.registeredElementCount===0&&this.removeListeners()}pathHasOpenTooltip(e,i){const{activeTooltip:n}=this;return(n==null?void 0:n.open)&&i.includes(n)||(e==null?void 0:e.open)&&i.includes(e)}addShadowListeners(e){e.addEventListener("focusin",this.focusInHandler,{capture:!0})}removeShadowListeners(e){e.removeEventListener("focusin",this.focusInHandler,{capture:!0})}addListeners(){window.addEventListener("keydown",this.keyDownHandler,{capture:!0}),window.addEventListener("pointermove",this.pointerMoveHandler,{capture:!0}),window.addEventListener("click",this.clickHandler,{capture:!0}),window.addEventListener("focusin",this.focusInHandler,{capture:!0}),window.addEventListener("blur",this.blurHandler)}removeListeners(){window.removeEventListener("keydown",this.keyDownHandler,{capture:!0}),window.removeEventListener("pointermove",this.pointerMoveHandler,{capture:!0}),window.removeEventListener("click",this.clickHandler,{capture:!0}),window.removeEventListener("focusin",this.focusInHandler,{capture:!0}),window.removeEventListener("blur",this.blurHandler)}clearHoverOpenTimeout(){window.clearTimeout(this.hoverOpenTimeout),this.hoverOpenTimeout=null}clearHoverCloseTimeout(){window.clearTimeout(this.hoverCloseTimeout),this.hoverCloseTimeout=null}clearHoverTimeout(){this.clearHoverOpenTimeout(),this.clearHoverCloseTimeout()}closeTooltipIfNotActive(e){this.activeTooltip!==e&&this.closeActiveTooltip()}closeActiveTooltip(){const{activeTooltip:e}=this;e!=null&&e.open&&this.toggleTooltip(e,!1)}toggleFocusedTooltip(e,i){i&&this.clearHoverTimeout(),this.toggleTooltip(e,i)}toggleTooltip(e,i){e.open=i,this.activeTooltip=i?e:null}registerShadowRoot(e){const{registeredShadowRootCounts:i}=this,n=i.get(e),s=Math.min((typeof n=="number"?n:0)+1,1);s===1&&this.addShadowListeners(e),i.set(e,s)}unregisterShadowRoot(e){const{registeredShadowRootCounts:i}=this,n=i.get(e),s=Math.max((typeof n=="number"?n:1)-1,0);s===0&&this.removeShadowListeners(e),i.set(e,s)}getReferenceElShadowRootNode(e){return e instanceof Element?Aye(e):null}}const I2e=":host{--calcite-floating-ui-z-index:var(--calcite-tooltip-z-index, var(--calcite-z-index-tooltip));display:block;position:absolute;z-index:var(--calcite-floating-ui-z-index)}.calcite-floating-ui-anim{position:relative;transition:var(--calcite-floating-ui-transition);transition-property:inset, left, opacity;opacity:0;box-shadow:0 0 16px 0 rgba(0, 0, 0, 0.16);z-index:var(--calcite-z-index);border-radius:0.25rem}:host([data-placement^=bottom]) .calcite-floating-ui-anim{inset-block-start:-5px}:host([data-placement^=top]) .calcite-floating-ui-anim{inset-block-start:5px}:host([data-placement^=left]) .calcite-floating-ui-anim{left:5px}:host([data-placement^=right]) .calcite-floating-ui-anim{left:-5px}:host([data-placement]) .calcite-floating-ui-anim--active{opacity:1;inset-block:0;left:0}:host([calcite-hydrated-hidden]){visibility:hidden !important;pointer-events:none}.calcite-floating-ui-arrow{pointer-events:none;position:absolute;z-index:calc(var(--calcite-z-index) * -1);fill:var(--calcite-color-foreground-1)}.calcite-floating-ui-arrow__stroke{stroke:var(--calcite-color-border-3)}.container{position:relative;overflow:hidden;border-radius:0.25rem;padding-block:0.75rem;padding-inline:1rem;font-size:var(--calcite-font-size--2);line-height:1.375;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1);max-inline-size:20rem;max-block-size:20rem;text-align:start}.calcite-floating-ui-anim{border-radius:0.25rem;border-width:1px;border-style:solid;border-color:var(--calcite-color-border-3);background-color:var(--calcite-color-foreground-1)}.arrow::before{outline:1px solid var(--calcite-color-border-3)}:host([hidden]){display:none}[hidden]{display:none}",A2e=I2e,iA=new C2e,pH=ci(class extends li{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteTooltipBeforeClose=qe(this,"calciteTooltipBeforeClose",6),this.calciteTooltipClose=qe(this,"calciteTooltipClose",6),this.calciteTooltipBeforeOpen=qe(this,"calciteTooltipBeforeOpen",6),this.calciteTooltipOpen=qe(this,"calciteTooltipOpen",6),this.guid=`calcite-tooltip-${Il()}`,this.openTransitionProp="opacity",this.setTransitionEl=e=>{this.transitionEl=e},this.setUpReferenceElement=(e=!0)=>{this.removeReferences(),this.effectiveReferenceElement=dH(this.el),kf(this,this.effectiveReferenceElement,this.el);const{el:i,referenceElement:n,effectiveReferenceElement:s}=this;e&&n&&!s&&console.warn(`${i.tagName}: reference-element id "${n}" was not found.`,{el:i}),this.addReferences()},this.getId=()=>this.el.id||this.guid,this.addReferences=()=>{const{effectiveReferenceElement:e}=this;if(!e)return;const i=this.getId();"setAttribute"in e&&e.setAttribute(tA,i),iA.registerElement(e,this.el)},this.removeReferences=()=>{const{effectiveReferenceElement:e}=this;e&&("removeAttribute"in e&&e.removeAttribute(tA),iA.unregisterElement(e))},this.closeOnClick=!1,this.label=void 0,this.offsetDistance=hH,this.offsetSkidding=0,this.open=!1,this.overlayPositioning="absolute",this.placement="auto",this.referenceElement=void 0,this.effectiveReferenceElement=void 0,this.floatingLayout="vertical"}offsetDistanceOffsetHandler(){this.reposition(!0)}offsetSkiddingHandler(){this.reposition(!0)}openHandler(){kc(this),this.reposition(!0)}overlayPositioningHandler(){this.reposition(!0)}placementHandler(){this.reposition(!0)}referenceElementHandler(){this.setUpReferenceElement()}connectedCallback(){this.setUpReferenceElement(!0),this.open&&kc(this)}async componentWillLoad(){this.open&&kc(this)}componentDidLoad(){this.referenceElement&&!this.effectiveReferenceElement&&this.setUpReferenceElement()}disconnectedCallback(){this.removeReferences(),v_(this,this.effectiveReferenceElement,this.el)}async reposition(e=!1){const{el:i,effectiveReferenceElement:n,placement:s,overlayPositioning:h,offsetDistance:f,offsetSkidding:m,arrowEl:y}=this;return RM(this,{floatingEl:i,referenceEl:n,overlayPositioning:h,placement:s,offsetDistance:f,offsetSkidding:m,arrowEl:y,type:"tooltip"},e)}onBeforeOpen(){this.calciteTooltipBeforeOpen.emit()}onOpen(){this.calciteTooltipOpen.emit()}onBeforeClose(){this.calciteTooltipBeforeClose.emit()}onClose(){this.calciteTooltipClose.emit()}render(){const{effectiveReferenceElement:e,label:i,open:n,floatingLayout:s}=this,h=e&&n,f=!h;return X(dn,{key:"4f097fd8c6eda6dfcd5734e5aaea1f52092501e7","aria-hidden":cn(f),"aria-label":i,"aria-live":"polite","calcite-hydrated-hidden":f,id:this.getId(),role:"tooltip"},X("div",{key:"6b5055ab6f95277dd4daeaaff15cb9848d85eea0",class:{[_0.animation]:!0,[_0.animationActive]:h},ref:this.setTransitionEl},X(uH,{key:"57f68bea5a7bb369d82437f10535cab9753677ea",floatingLayout:s,ref:m=>this.arrowEl=m}),X("div",{key:"100b8318173849508952f996acaeb5bf81b8af43",class:M2e.container},X("slot",{key:"f89d3ae9313d9555e6a7acdc32c323de85319a3a"}))))}get el(){return this}static get watchers(){return{offsetDistance:["offsetDistanceOffsetHandler"],offsetSkidding:["offsetSkiddingHandler"],open:["openHandler"],overlayPositioning:["overlayPositioningHandler"],placement:["placementHandler"],referenceElement:["referenceElementHandler"]}}static get style(){return A2e}},[1,"calcite-tooltip",{closeOnClick:[516,"close-on-click"],label:[1],offsetDistance:[514,"offset-distance"],offsetSkidding:[514,"offset-skidding"],open:[516],overlayPositioning:[513,"overlay-positioning"],placement:[513],referenceElement:[1,"reference-element"],effectiveReferenceElement:[32],floatingLayout:[32],reposition:[64]},void 0,{offsetDistance:["offsetDistanceOffsetHandler"],offsetSkidding:["offsetSkiddingHandler"],open:["openHandler"],overlayPositioning:["overlayPositioningHandler"],placement:["placementHandler"],referenceElement:["referenceElementHandler"]}]);function fH(){if(typeof customElements>"u")return;["calcite-tooltip"].forEach(e=>{switch(e){case"calcite-tooltip":customElements.get(e)||customElements.define(e,pH);break}})}fH();const O2e=pH,P2e=fH,R2e=Object.freeze(Object.defineProperty({__proto__:null,CalciteTooltip:O2e,defineCustomElement:P2e},Symbol.toStringTag,{value:"Module"}));/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const N2e={titleGroup:"title-group"},L2e=":host{display:flex;flex-direction:column}:host([bordered]){box-shadow:inset 0 1px 0 var(--calcite-color-border-1);background-color:var(--calcite-color-foreground-1)}:host([bordered]) section{border-width:1px;border-style:solid;border-color:var(--calcite-color-border-1)}:host([bordered][position=bottom]){box-shadow:inset 0 1px 0 var(--calcite-color-border-1), inset 0 -1px 0 var(--calcite-color-border-1)}:host([bordered]:not([position=bottom])) ::slotted(calcite-tab-nav){margin-block-end:-1px}:host([bordered][scale=s]) section{padding:0.75rem}:host([bordered][scale=m]) section{padding:0.5rem}:host([bordered][scale=l]) section{padding:1rem}:host([position=bottom]){flex-direction:column-reverse}section{display:flex;flex-grow:1;overflow:hidden;border-block-start-width:1px;border-block-start-color:var(--calcite-color-border-1);border-block-start-style:solid}:host([position=bottom]) section{flex-direction:column-reverse;border-block-start-width:0px;border-block-end-width:1px;border-block-end-color:var(--calcite-color-border-1)}:host([position=bottom]:not([bordered])) section{border-block-end-style:solid}@media (forced-colors: active){:host([bordered]) section{border-block-start-width:0px;border-block-end-width:1px}:host([position=bottom][bordered]) section{border-block-start-width:1px;border-block-end-width:0px}}:host([hidden]){display:none}[hidden]{display:none}",D2e=L2e,z2e=ci(class extends li{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.defaultSlotChangeHandler=e=>{this.tabs=sl(e,"calcite-tab")},this.setDefaultSlotRef=e=>this.slotEl=e,this.layout="inline",this.position="top",this.scale="m",this.bordered=!1,this.titles=[],this.tabs=[]}handleInheritableProps(){this.updateItems()}calciteInternalTabNavSlotChangeHandler(e){e.stopPropagation(),e.detail.length!==this.titles.length&&(this.titles=e.detail)}titlesWatcher(){this.updateAriaSettings(),this.updateItems()}tabsWatcher(){this.updateAriaSettings(),this.updateItems()}async updateAriaSettings(){let e,i;const n=TB(this.slotEl,"calcite-tab");if(n.some(s=>s.tab)||this.titles.some(s=>s.tab))e=n.sort((s,h)=>s.tab.localeCompare(h.tab)).map(s=>s.id),i=this.titles.sort((s,h)=>s.tab.localeCompare(h.tab)).map(s=>s.id);else{const s=await Promise.all(n.map(f=>f.getTabIndex())),h=await Promise.all(this.titles.map(f=>f.getTabIndex()));e=s.reduce((f,m,y)=>(f[m]=n[y].id,f),[]),i=h.reduce((f,m,y)=>(f[m]=this.titles[y].id,f),[])}n.forEach(s=>s.updateAriaInfo(e,i)),this.titles.forEach(s=>s.updateAriaInfo(e,i))}updateItems(){const{position:e,scale:i}=this,n=this.el.querySelector("calcite-tab-nav");n&&(n.position=e,n.scale=i),Array.from(this.el.querySelectorAll("calcite-tab")).forEach(s=>{s.parentElement===this.el&&(s.scale=i)}),Array.from(this.el.querySelectorAll("calcite-tab-nav > calcite-tab-title")).forEach(s=>{s.position=e,s.scale=i})}connectedCallback(){this.updateItems()}async componentWillLoad(){this.updateItems()}disconnectedCallback(){}render(){return X(gM,{key:"d06e888984e54b6b91b3345b42c217d322b46a64"},X("slot",{key:"d42da82a176cc1ad492cf1c548b96fc0ca53bc73",name:N2e.titleGroup}),X("section",{key:"21e944ce899b9bb2507fc9d9be81d8faa4a1a610"},X("slot",{key:"25d4cd299d8529392f6b01deefd3356f8cd6050b",onSlotchange:this.defaultSlotChangeHandler,ref:this.setDefaultSlotRef})))}get el(){return this}static get watchers(){return{position:["handleInheritableProps"],scale:["handleInheritableProps"],titles:["titlesWatcher"],tabs:["tabsWatcher"]}}static get style(){return D2e}},[1,"calcite-tabs",{layout:[513],position:[513],scale:[513],bordered:[4],titles:[32],tabs:[32]},[[0,"calciteInternalTabNavSlotChange","calciteInternalTabNavSlotChangeHandler"]],{position:["handleInheritableProps"],scale:["handleInheritableProps"],titles:["titlesWatcher"],tabs:["tabsWatcher"]}]);function F2e(){if(typeof customElements>"u")return;["calcite-tabs"].forEach(e=>{switch(e){case"calcite-tabs":customElements.get(e)||customElements.define(e,z2e);break}})}F2e();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const j2e="24px",G2e="32px",U2e="44px";/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const nA={chevronRight:"chevron-right",chevronLeft:"chevron-left"},ih={container:"tab-nav",containerHasEndTabTitleOverflow:"tab-nav--end-overflow",containerHasStartTabTitleOverflow:"tab-nav--start-overflow",scrollButton:"scroll-button",scrollButtonContainer:"scroll-button-container",scrollBackwardContainerButton:"scroll-button-container--backward",scrollForwardContainerButton:"scroll-button-container--forward",tabTitleSlotWrapper:"tab-titles-slot-wrapper"},B2e=':host{--calcite-internal-tab-nav-gradient-start-side:left;--calcite-internal-tab-nav-gradient-end-side:right;position:relative;display:flex}.scale-s{--calcite-internal-tab-nav-scroller-button-width:24px;min-block-size:1.5rem}.scale-m{--calcite-internal-tab-nav-scroller-button-width:32px;min-block-size:2rem}.scale-l{--calcite-internal-tab-nav-scroller-button-width:44px;min-block-size:2.75rem}.calcite--rtl{--calcite-internal-tab-nav-gradient-start-side:right;--calcite-internal-tab-nav-gradient-end-side:left}.tab-nav--start-overflow .tab-titles-slot-wrapper{mask-image:linear-gradient(to var(--calcite-internal-tab-nav-gradient-end-side), transparent, transparent var(--calcite-internal-tab-nav-scroller-button-width), white var(--calcite-internal-tab-nav-scroller-button-width), white 51%)}.tab-nav--end-overflow .tab-titles-slot-wrapper{mask-image:linear-gradient(to var(--calcite-internal-tab-nav-gradient-start-side), transparent, transparent var(--calcite-internal-tab-nav-scroller-button-width), white var(--calcite-internal-tab-nav-scroller-button-width), white 51%)}.tab-nav--start-overflow.tab-nav--end-overflow .tab-titles-slot-wrapper{mask-image:linear-gradient(to var(--calcite-internal-tab-nav-gradient-end-side), transparent, transparent var(--calcite-internal-tab-nav-scroller-button-width), white var(--calcite-internal-tab-nav-scroller-button-width), white 51%, transparent 51%), linear-gradient(to var(--calcite-internal-tab-nav-gradient-start-side), transparent, transparent var(--calcite-internal-tab-nav-scroller-button-width), white var(--calcite-internal-tab-nav-scroller-button-width), white 51%, transparent 51%)}.tab-nav::-webkit-scrollbar{display:none;-ms-overflow-style:none;scrollbar-width:none}:host([layout=center]) ::slotted(calcite-tab-title){display:flex;flex-grow:1;flex-shrink:0;min-inline-size:auto;white-space:nowrap}:host([layout=center]) ::slotted(calcite-tab-title[selected]){overflow:unset}:host(:not([bordered])) .scale-l{--calcite-internal-tab-nav-gap:var(--calcite-size-xxl)}:host(:not([bordered])) .scale-m{--calcite-internal-tab-nav-gap:var(--calcite-size-xl)}:host(:not([bordered])) .scale-s{--calcite-internal-tab-nav-gap:var(--calcite-size-lg)}:host(:not([bordered])) .tab-titles-slot-wrapper{gap:var(--calcite-internal-tab-nav-gap)}:host([layout=center]:not([bordered])) .tab-titles-slot-wrapper{padding-inline:var(--calcite-spacing-xxl)}.tab-nav,.tab-titles-slot-wrapper{display:flex;inline-size:100%;justify-content:flex-start;overflow:hidden;white-space:nowrap}.scroll-button-container{position:absolute;inset-block:0px}.scroll-button-container calcite-button{--calcite-offset-invert-focus:1;--calcite-color-text-1:var(--calcite-color-text-3);block-size:100%}.scroll-button-container calcite-button:hover{--calcite-color-text-1:unset;--calcite-color-foreground-1:var(--calcite-color-transparent-hover);--calcite-color-foreground-3:var(--calcite-color-transparent)}.scroll-button-container--forward{inset-inline-end:0;z-index:var(--calcite-z-index)}.scroll-button-container--backward{inset-inline-start:0;z-index:var(--calcite-z-index)}:host(:not([bordered])) .scroll-button-container--backward::before,:host(:not([bordered])) .scroll-button-container--forward::before{background-color:var(--calcite-color-border-3);content:"";inline-size:var(--calcite-border-width-sm);inset-block-start:var(--calcite-border-width-md);inset-block-end:var(--calcite-border-width-md);position:absolute}:host(:not([bordered])) .scroll-button-container--backward::before{inset-inline-end:0}:host(:not([bordered])) .scroll-button-container--forward::before{inset-inline-start:0}:host([hidden]){display:none}[hidden]{display:none}',H2e=B2e,V2e=ci(class extends li{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteTabChange=qe(this,"calciteTabChange",6),this.calciteInternalTabNavSlotChange=qe(this,"calciteInternalTabNavSlotChange",7),this.calciteInternalTabChange=qe(this,"calciteInternalTabChange",6),this.effectiveDir="ltr",this.lastScrollWheelAxis="x",this.resizeObserver=hn("resize",()=>{this.updateScrollingState()}),this.onTabTitleWheel=e=>{e.preventDefault();const{deltaX:i,deltaY:n}=e,s=Math.abs(i),h=Math.abs(n);let f;s===h?f=this.lastScrollWheelAxis==="x"?i:n:s>h?(f=i,this.lastScrollWheelAxis="x"):(f=n,this.lastScrollWheelAxis="y");const m=(this.effectiveDir==="rtl"?-1:1)*f;e.currentTarget.scrollBy(m,0)},this.onSlotChange=e=>{var n;(n=this.intersectionObserver)==null||n.disconnect();const i=sl(e,"calcite-tab-title");i.forEach(s=>{var h;(h=this.intersectionObserver)==null||h.observe(s)}),this.calciteInternalTabNavSlotChange.emit(i)},this.storeTabTitleWrapperRef=e=>{this.tabTitleContainerEl=e,this.intersectionObserver=hn("intersection",()=>this.updateScrollingState(),{root:e,threshold:[0,.5,1]})},this.scrollToTabTitles=e=>{l6(()=>{const i=this.tabTitleContainerEl,n=i.getBoundingClientRect(),s=Array.from(this.el.querySelectorAll("calcite-tab-title")),{effectiveDir:h}=this;e==="forward"&&s.reverse();let f=null;if(s.forEach(m=>{const y=m.getBoundingClientRect(),x=n.x+n.width,E=y.x+y.width;e==="forward"&&h==="ltr"||e==="backward"&&h==="rtl"?(y.x>x||E>x&&y.x>n.x)&&(f=m):(E<n.x||E<x&&y.x<n.x)&&(f=m)}),f){const{scrollerButtonWidth:m}=this,y=e==="forward"&&h==="ltr"||e==="backward"&&h==="rtl"?-m:f.offsetWidth-i.clientWidth+m,x=f.offsetLeft+y;i.scrollTo({left:x,behavior:"smooth"})}})},this.scrollToNextTabTitles=()=>this.scrollToTabTitles("forward"),this.scrollToPreviousTabTitles=()=>this.scrollToTabTitles("backward"),this.handleTabFocus=(e,i,n)=>{const s=Sg(this.enabledTabTitles,i,n);this.scrollTabTitleIntoView(s,"instant"),e.stopPropagation()},this.onTabTitleScroll=()=>{this.updateScrollingState()},this.renderScrollButton=e=>{const{bordered:i,messages:n,hasOverflowingStartTabTitle:s,hasOverflowingEndTabTitle:h,scale:f}=this,m=e==="end";return X("div",{class:{[ih.scrollButtonContainer]:!0,[ih.scrollBackwardContainerButton]:!m,[ih.scrollForwardContainerButton]:m},hidden:m&&!h||!m&&!s,key:e},X("calcite-button",{appearance:i?"outline-fill":"transparent","aria-label":m?n.nextTabTitles:n.previousTabTitles,class:{[ih.scrollButton]:!0},iconFlipRtl:"both",iconStart:m?nA.chevronRight:nA.chevronLeft,kind:"neutral",onClick:m?this.scrollToNextTabTitles:this.scrollToPreviousTabTitles,scale:f,tabIndex:-1}))},this.storageId=void 0,this.syncId=void 0,this.selectedTitle=null,this.scale="m",this.layout="inline",this.position="bottom",this.bordered=!1,this.messages=void 0,this.messageOverrides=void 0,this.defaultMessages=void 0,this.effectiveLocale="",this.hasOverflowingStartTabTitle=!1,this.hasOverflowingEndTabTitle=!1,this.selectedTabId=void 0}selectedTitleChanged(){this.calciteInternalTabChange.emit({tab:this.selectedTabId})}onMessagesChange(){}connectedCallback(){var e;this.parentTabsEl=this.el.closest("calcite-tabs"),(e=this.resizeObserver)==null||e.observe(this.el),Ds(this),So(this)}async componentWillLoad(){const e=`calcite-tab-nav-${this.storageId}`;if(localStorage&&this.storageId&&localStorage.getItem(e)){const i=JSON.parse(localStorage.getItem(e));this.selectedTabId=i}await _o(this)}componentDidLoad(){this.scrollTabTitleIntoView(this.selectedTitle,"instant")}componentWillRender(){const{parentTabsEl:e}=this;this.layout=e==null?void 0:e.layout,this.bordered=e==null?void 0:e.bordered,this.effectiveDir=ll(this.el)}componentDidRender(){this.tabTitles.length&&this.tabTitles.every(e=>!e.selected)&&!this.selectedTabId&&this.tabTitles[0].getTabIdentifier().then(e=>{this.calciteInternalTabChange.emit({tab:e})})}disconnectedCallback(){var e;(e=this.resizeObserver)==null||e.disconnect(),zs(this),To(this)}render(){return X(dn,{key:"9d1138405f2423bddcd9d1bb49dc756e582f8375",role:"tablist"},X("div",{key:"f8759781080b2a093f062d0b6172de6d3ea9355d",class:{[ih.container]:!0,[ih.containerHasStartTabTitleOverflow]:!!this.hasOverflowingStartTabTitle,[ih.containerHasEndTabTitleOverflow]:!!this.hasOverflowingEndTabTitle,[`scale-${this.scale}`]:!0,[`position-${this.position}`]:!0,[Xo.rtl]:this.effectiveDir==="rtl"}},this.renderScrollButton("start"),X("div",{key:"eda664514cb5c89136184c6e8f29e50ce7c9b56b",class:{[ih.tabTitleSlotWrapper]:!0},onScroll:this.onTabTitleScroll,onWheel:this.onTabTitleWheel,ref:this.storeTabTitleWrapperRef},X("slot",{key:"0c5a40eac082662a2c2b032d977900b91f122214",onSlotchange:this.onSlotChange})),this.renderScrollButton("end")))}focusPreviousTabHandler(e){this.handleTabFocus(e,e.target,"previous")}focusNextTabHandler(e){this.handleTabFocus(e,e.target,"next")}focusFirstTabHandler(e){this.handleTabFocus(e,e.target,"first")}focusLastTabHandler(e){this.handleTabFocus(e,e.target,"last")}internalActivateTabHandler(e){const i=e.target;this.selectedTabId=e.detail.tab?e.detail.tab:this.getIndexOfTabTitle(i),e.stopPropagation(),this.selectedTitle=i,this.scrollTabTitleIntoView(i)}scrollTabTitleIntoView(e,i="smooth"){e&&l6(()=>{const n=this.effectiveDir==="ltr",s=this.tabTitleContainerEl,h=s.getBoundingClientRect(),f=e.getBoundingClientRect(),m=s.scrollLeft,y=n?this.hasOverflowingStartTabTitle:this.hasOverflowingEndTabTitle,x=n?this.hasOverflowingEndTabTitle:this.hasOverflowingStartTabTitle;if(f.left<h.left+(y?this.scrollerButtonWidth:0)){const E=m+(f.left-h.left)-this.scrollerButtonWidth;s.scrollTo({left:E,behavior:i})}else if(f.right>h.right-(x?this.scrollerButtonWidth:0)){const E=m+(f.right-h.right)+this.scrollerButtonWidth;s.scrollTo({left:E,behavior:i})}})}activateTabHandler(e){this.calciteTabChange.emit(),e.stopPropagation()}internalCloseTabHandler(e){const i=e.target;this.handleTabTitleClose(i),e.stopPropagation()}async updateTabTitles(e){e.target.selected&&(this.selectedTabId=e.detail,this.selectedTitle=await this.getTabTitleById(this.selectedTabId))}globalInternalTabChangeHandler(e){this.syncId&&e.target!==this.el&&e.target.syncId===this.syncId&&this.selectedTabId!==e.detail.tab&&(this.selectedTabId=e.detail.tab),e.stopPropagation()}effectiveLocaleChange(){xo(this,this.effectiveLocale)}async selectedTabIdChanged(){localStorage&&this.storageId&&this.selectedTabId!==void 0&&this.selectedTabId!==null&&localStorage.setItem(`calcite-tab-nav-${this.storageId}`,JSON.stringify(this.selectedTabId)),this.calciteInternalTabChange.emit({tab:this.selectedTabId})}get scrollerButtonWidth(){const{scale:e}=this;return parseInt(e==="s"?j2e:e==="m"?G2e:U2e)}updateScrollingState(){const e=this.tabTitleContainerEl;if(!e)return;let i,n;const s=e.scrollLeft,h=e.clientWidth,f=e.scrollWidth;this.effectiveDir==="ltr"?(i=s>0,n=s+h<f):(i=s<0,n=s!==-(f-h)),this.hasOverflowingStartTabTitle=i,this.hasOverflowingEndTabTitle=n}getIndexOfTabTitle(e,i=this.tabTitles){return i.indexOf(e)}async getTabTitleById(e){return Promise.all(this.tabTitles.map(i=>i.getTabIdentifier())).then(i=>this.tabTitles[i.indexOf(e)])}get tabTitles(){return CI(this.el,"calcite-tab-title")}get enabledTabTitles(){return CI(this.el,"calcite-tab-title:not([disabled])").filter(e=>!e.closed)}handleTabTitleClose(e){const{tabTitles:i}=this,n=e.selected,s=i.reduce((f,m,y)=>m.closed?f:[...f,y],[]),h=s.length;if(h===1&&i[s[0]].closable)i[s[0]].closable=!1,this.selectedTabId=s[0],n&&i[s[0]].activateTab();else if(h>1){const f=i.findIndex(y=>y===e),m=s.find(y=>y>f);this.selectedTabId===f&&(this.selectedTabId=m||h-1,i[this.selectedTabId].activateTab())}requestAnimationFrame(()=>{i[this.selectedTabId].focus()})}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{selectedTitle:["selectedTitleChanged"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"],selectedTabId:["selectedTabIdChanged"]}}static get style(){return H2e}},[1,"calcite-tab-nav",{storageId:[513,"storage-id"],syncId:[513,"sync-id"],selectedTitle:[1040],scale:[1],layout:[1537],position:[1],bordered:[1540],messages:[1040],messageOverrides:[1040],defaultMessages:[32],effectiveLocale:[32],hasOverflowingStartTabTitle:[32],hasOverflowingEndTabTitle:[32],selectedTabId:[32]},[[0,"calciteInternalTabsFocusPrevious","focusPreviousTabHandler"],[0,"calciteInternalTabsFocusNext","focusNextTabHandler"],[0,"calciteInternalTabsFocusFirst","focusFirstTabHandler"],[0,"calciteInternalTabsFocusLast","focusLastTabHandler"],[0,"calciteInternalTabsActivate","internalActivateTabHandler"],[0,"calciteTabsActivate","activateTabHandler"],[0,"calciteInternalTabsClose","internalCloseTabHandler"],[0,"calciteInternalTabTitleRegister","updateTabTitles"],[16,"calciteInternalTabChange","globalInternalTabChangeHandler"]],{selectedTitle:["selectedTitleChanged"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"],selectedTabId:["selectedTabIdChanged"]}]);function q2e(){if(typeof customElements>"u")return;["calcite-tab-nav","calcite-button","calcite-icon","calcite-loader"].forEach(e=>{switch(e){case"calcite-tab-nav":customElements.get(e)||customElements.define(e,V2e);break;case"calcite-button":customElements.get(e)||qB();break;case"calcite-icon":customElements.get(e)||Or();break;case"calcite-loader":customElements.get(e)||Eu();break}})}q2e();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const cs={closeButton:"close-button",container:"container",containerBottom:"container--bottom",content:"content",contentHasText:"content--has-text",iconEnd:"icon-end",iconPresent:"icon-present",iconStart:"icon-start",titleIcon:"calcite-tab-title--icon",scale:t=>`scale-${t}`,selectedIndicator:"selected-indicator"},W2e={close:"x"},K2e=`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:block;outline:2px solid transparent;outline-offset:2px;margin-inline-start:0px}:host([layout=inline]){flex:0 1 auto}:host([layout=center]){flex:1 1 auto}.content{position:relative;margin-block-end:0.125rem;box-sizing:border-box;display:flex;block-size:100%;align-items:center;justify-content:center}.scale-s .content{padding-block:0.25rem;font-size:var(--calcite-font-size--2);line-height:1rem}.scale-s .close-button{inline-size:1.25rem}.scale-m .content{padding-block:0.5rem;font-size:var(--calcite-font-size--1);line-height:1rem}.scale-m .close-button{inline-size:1.75rem}.scale-l .content{padding-block:0.625rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}.scale-l .close-button{inline-size:2rem}:host([closable]) .content{border-block-end-color:transparent}:host([layout=inline]) .content,:host([layout=center]) .content{padding-inline:0.25rem}:host([layout=center]) .scale-s,:host([layout=center]) .scale-m,:host([layout=center]) .scale-l{margin-block:0px;justify-content:center;text-align:center}:host([layout=center]) .scale-s .content,:host([layout=center]) .scale-m .content,:host([layout=center]) .scale-l .content{flex:1 1 auto;flex-grow:1}.container{position:relative;box-sizing:border-box;display:flex;block-size:100%;inline-size:100%;cursor:pointer;align-content:center;justify-content:space-between;padding-inline:0px;font-size:var(--calcite-font-size--1);line-height:1rem;color:var(--calcite-color-text-3);outline-color:transparent;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}.selected-indicator{position:absolute;display:block;block-size:0.125rem;inline-size:100%;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;inset-block-end:0;inset-inline-start:0;inset-inline-end:0;inline-size:100%}.container--bottom .selected-indicator{inset-block-end:unset;inset-block-start:0}:host([bordered]) .selected-indicator{inset-block-start:0;inset-block-end:unset;inset-inline-start:-1px;inset-inline-end:0;inline-size:calc(100% + var(--calcite-spacing-base))}:host([bordered]) .container:not(.container--bottom){border-block-end:1px solid transparent}:host([bordered]:not([selected]):hover) .container:not(.container--bottom){border-block-end:1px solid var(--calcite-color-border-1)}:host([bordered]:not([selected]):hover:not(:focus)) .selected-indicator{background-color:var(--calcite-color-foreground-2)}:host([bordered]:not([selected]):hover:not(:focus)) .container:not(.container--bottom) .selected-indicator{box-shadow:inset 0 1px var(--calcite-color-border-1)}:host([bordered]:not([selected]):hover:not(:focus)) .container.container--bottom .selected-indicator{box-shadow:inset 0 -1px var(--calcite-color-border-1)}:host([bordered][selected]) .container::after{position:absolute;display:block;block-size:0.125rem;inline-size:100%;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;inset-block-end:-1px;inset-inline-start:0;inset-inline-end:0;inline-size:100%;background:var(--calcite-color-foreground-1);content:""}:host([bordered][selected]) .container.container--bottom::after{inset-block-start:-1px}:host([bordered][selected]:hover) .container::after{background:var(--calcite-color-foreground-2)}:host([bordered][selected]:focus) .container::after{background:transparent}:host([bordered]) .container--bottom .selected-indicator{inset-block-start:unset;inset-block-end:0}:host([selected]) .selected-indicator,:host([selected]:hover) .selected-indicator{background-color:var(--calcite-color-brand)}:host(:hover) .selected-indicator{background-color:var(--calcite-color-border-3)}:host(:focus) .selected-indicator,:host(:active) .selected-indicator{background-color:var(--calcite-color-brand)}@media (forced-colors: active){.selected-indicator{background-color:highlight}}:host([closed]){display:none}:host([selected]) .container{border-color:transparent;color:var(--calcite-color-text-1)}:host(:focus) .container{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}:host(:focus) .container:focus-within{outline-color:transparent}:host(:active) a,:host(:focus) a,:host(:hover) a{border-color:var(--calcite-color-border-2);color:var(--calcite-color-text-1);text-decoration-line:none}:host([disabled]) .container{pointer-events:none;opacity:0.5}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.calcite-tab-title--icon{position:relative;margin:0px;display:inline-flex;align-self:center}.calcite-tab-title--icon svg{transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}.content--has-text{padding:0.25rem}.content--has-text .calcite-tab-title--icon.icon-start{margin-inline-end:var(--calcite-spacing-sm)}.content--has-text .calcite-tab-title--icon.icon-end{margin-inline-start:var(--calcite-spacing-sm)}.close-button{display:flex;block-size:100%;cursor:pointer;appearance:none;align-content:center;align-items:center;justify-content:center;align-self:center;border-style:none;background-color:transparent;color:var(--calcite-color-text-3);outline-color:transparent;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;margin-inline-start:var(--calcite-spacing-sm);margin-inline-end:var(--calcite-spacing-px);block-size:calc(100% - var(--calcite-spacing-xxs))}.close-button:focus{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand))}.close-button:focus,.close-button:hover{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-3)}.close-button:active{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-3)}.close-button calcite-icon{color:inherit}:host([icon-start][icon-end]) .calcite-tab-title--icon:first-child{margin-inline-end:var(--calcite-spacing-sm)}:host([bordered]) .container:not(.container--bottom) .close-button{block-size:calc(100% - var(--calcite-spacing-px));margin-block-start:-1px}:host([bordered]) .container .close-button calcite-icon{margin-block-start:var(--calcite-spacing-px)}:host([bordered]) .container .close-button:focus,:host([bordered]) .container .close-button:hover,:host([bordered]) .container .close-button:active{box-shadow:0 2px 0 0 var(--calcite-color-foreground-3)}:host([bordered]) .container.container--bottom .close-button{box-shadow:0 -2px 0 0 transparent}:host([bordered]) .container.container--bottom .close-button calcite-icon{margin-block-end:var(--calcite-spacing-px)}:host([bordered]) .container.container--bottom .close-button:focus,:host([bordered]) .container.container--bottom .close-button:hover,:host([bordered]) .container.container--bottom .close-button:active{box-shadow:0 -2px 0 0 var(--calcite-color-foreground-3)}:host([bordered][selected]){box-shadow:inset 0 -1px var(--calcite-color-foreground-1)}:host([bordered]:not([selected])) .container .close-button{box-shadow:0 2px 0 0 transparent}:host([bordered]:hover) .container{background-color:var(--calcite-color-foreground-2)}:host([bordered]) .container{border-inline:var(--calcite-spacing-px) solid transparent}:host([selected][bordered]) .container{border-inline-color:var(--calcite-color-border-1)}:host([layout=inline][bordered]) .scale-m .content,:host([layout=center][bordered]) .scale-m .content{padding-inline:0.75rem}:host([layout=inline][bordered]) .scale-s .content,:host([layout=center][bordered]) .scale-s .content{padding-inline:0.5rem}:host([layout=inline][bordered]) .scale-l .content,:host([layout=center][bordered]) .scale-l .content{padding-inline:1rem}:host([layout=inline][closable]) .scale-s .content,:host([layout=inline][closable]) .scale-m .content,:host([layout=inline][closable]) .scale-l .content{padding-inline-end:0}@media (forced-colors: active){:host{outline-width:0;outline-offset:0}:host(:focus) .container{outline-color:highlight}:host([bordered]) .container{border-block-end-style:solid}:host([bordered]) .container--bottom{border-block-start-style:solid}:host([bordered][selected]) .container{border-block-end-style:none}:host([bordered][selected]) .container--bottom{border-block-start-style:none}.close-button{z-index:var(--calcite-z-index)}}:host([hidden]){display:none}[hidden]{display:none}`,Z2e=K2e,J2e=ci(class extends li{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteTabsActivate=qe(this,"calciteTabsActivate",6),this.calciteInternalTabsActivate=qe(this,"calciteInternalTabsActivate",6),this.calciteTabsClose=qe(this,"calciteTabsClose",6),this.calciteInternalTabsClose=qe(this,"calciteInternalTabsClose",6),this.calciteInternalTabsFocusNext=qe(this,"calciteInternalTabsFocusNext",6),this.calciteInternalTabsFocusPrevious=qe(this,"calciteInternalTabsFocusPrevious",6),this.calciteInternalTabsFocusFirst=qe(this,"calciteInternalTabsFocusFirst",6),this.calciteInternalTabsFocusLast=qe(this,"calciteInternalTabsFocusLast",6),this.calciteInternalTabTitleRegister=qe(this,"calciteInternalTabTitleRegister",6),this.calciteInternalTabIconChanged=qe(this,"calciteInternalTabIconChanged",6),this.closeClickHandler=()=>{this.closeTabTitleAndNotify()},this.mutationObserver=hn("mutation",()=>this.updateHasText()),this.resizeObserver=hn("resize",()=>{this.calciteInternalTabIconChanged.emit()}),this.guid=`calcite-tab-title-${Il()}`,this.selected=!1,this.closable=!1,this.closed=!1,this.disabled=!1,this.iconEnd=void 0,this.iconFlipRtl=void 0,this.iconStart=void 0,this.layout=void 0,this.position="top",this.scale="m",this.bordered=!1,this.tab=void 0,this.messages=void 0,this.messageOverrides=void 0,this.controls=void 0,this.defaultMessages=void 0,this.effectiveLocale=void 0,this.hasText=!1}selectedHandler(){this.selected&&this.activateTab(!1)}onMessagesChange(){}connectedCallback(){Ds(this),So(this),this.setupTextContentObserver(),this.parentTabsEl=this.el.closest("calcite-tabs")}disconnectedCallback(){var e,i,n;(e=this.mutationObserver)==null||e.disconnect(),(i=document.body)==null||i.dispatchEvent(new CustomEvent("calciteTabTitleUnregister",{detail:this.el})),(n=this.resizeObserver)==null||n.disconnect(),zs(this),To(this)}async componentWillLoad(){await _o(this),ya()&&this.updateHasText(),this.tab&&this.selected&&this.activateTab(!1)}componentWillRender(){this.parentTabsEl&&(this.layout=this.parentTabsEl.layout,this.bordered=this.parentTabsEl.bordered)}render(){const{el:e,closed:i}=this,n=e.id||this.guid,s=X("calcite-icon",{key:"367d0a3590f1b47a36fcef27a4c361b2b738769a",class:{[cs.titleIcon]:!0,[cs.iconStart]:!0},flipRtl:this.iconFlipRtl==="start"||this.iconFlipRtl==="both",icon:this.iconStart,scale:Ji(this.scale)}),h=X("calcite-icon",{key:"d41dab345260f907ad3b00538117c576856672fd",class:{[cs.titleIcon]:!0,[cs.iconEnd]:!0},flipRtl:this.iconFlipRtl==="end"||this.iconFlipRtl==="both",icon:this.iconEnd,scale:Ji(this.scale)});return X(dn,{key:"f5f5339ebcead5f63154d4b8f562782d20e30b06","aria-controls":this.controls,"aria-selected":cn(this.selected),id:n,role:"tab",tabIndex:this.selected&&!this.disabled?0:-1},X(Ol,{key:"0115c7e0367be91f3a9014243fb99cecd48d5f79",disabled:this.disabled},X("div",{key:"7303b10302cfc93c03386036d98aa46a6b74afa7",class:{[cs.container]:!0,[cs.containerBottom]:this.position==="bottom",[cs.iconPresent]:!!this.iconStart||!!this.iconEnd,[cs.scale(this.scale)]:!0},hidden:i,ref:f=>{var m;return(m=this.resizeObserver)==null?void 0:m.observe(f)}},X("div",{key:"af603e50b1a853f3e4ca35357ae7778ca9bdaafb",class:{[cs.content]:!0,[cs.contentHasText]:this.hasText}},this.iconStart?s:null,X("slot",{key:"a650492336b0f78f11c0d534351b0ab570dd1db8"}),this.iconEnd?h:null),this.renderCloseButton(),X("div",{key:"8d8a0438c867cdf0c2642b9a9bc7ce697aabb871",class:cs.selectedIndicator}))))}renderCloseButton(){const{closable:e,messages:i}=this;return e?X("button",{"aria-label":i.close,class:cs.closeButton,disabled:!1,key:cs.closeButton,onClick:this.closeClickHandler,ref:n=>this.closeButtonEl=n,title:i.close,type:"button"},X("calcite-icon",{icon:W2e.close,scale:Ji(this.scale)})):null}async componentDidLoad(){this.calciteInternalTabTitleRegister.emit(await this.getTabIdentifier())}componentDidRender(){Al(this)}internalTabChangeHandler(e){e.composedPath().find(n=>n.tagName==="CALCITE-TABS")===this.parentTabsEl&&(this.tab?this.selected=this.tab===e.detail.tab:this.getTabIndex().then(n=>{this.selected=n===e.detail.tab}),e.stopPropagation())}onClick(){this.activateTab()}keyDownHandler(e){switch(e.key){case" ":case"Enter":e.composedPath().includes(this.closeButtonEl)||(this.activateTab(),e.preventDefault());break;case"ArrowRight":e.preventDefault(),ll(this.el)==="ltr"?this.calciteInternalTabsFocusNext.emit():this.calciteInternalTabsFocusPrevious.emit();break;case"ArrowLeft":e.preventDefault(),ll(this.el)==="ltr"?this.calciteInternalTabsFocusPrevious.emit():this.calciteInternalTabsFocusNext.emit();break;case"Home":e.preventDefault(),this.calciteInternalTabsFocusFirst.emit();break;case"End":e.preventDefault(),this.calciteInternalTabsFocusLast.emit();break}}async getTabIndex(){return Array.prototype.indexOf.call(bB(this.el.parentElement.children).filter(e=>e.matches("calcite-tab-title")),this.el)}async getTabIdentifier(){return this.tab?this.tab:this.getTabIndex()}async updateAriaInfo(e=[],i=[]){this.controls=e[i.indexOf(this.el.id)]||null}async activateTab(e=!0){if(this.disabled||this.closed)return;const i={tab:this.tab};this.calciteInternalTabsActivate.emit(i),e&&requestAnimationFrame(()=>this.calciteTabsActivate.emit())}effectiveLocaleChange(){xo(this,this.effectiveLocale)}updateHasText(){this.hasText=this.el.textContent.trim().length>0}setupTextContentObserver(){var e;(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0})}closeTabTitleAndNotify(){this.closed=!0,this.calciteInternalTabsClose.emit({tab:this.tab}),this.calciteTabsClose.emit()}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{selected:["selectedHandler"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return Z2e}},[1,"calcite-tab-title",{selected:[1540],closable:[516],closed:[1540],disabled:[516],iconEnd:[513,"icon-end"],iconFlipRtl:[513,"icon-flip-rtl"],iconStart:[513,"icon-start"],layout:[1537],position:[1],scale:[1],bordered:[1540],tab:[513],messages:[1040],messageOverrides:[1040],controls:[32],defaultMessages:[32],effectiveLocale:[32],hasText:[32],getTabIndex:[64],getTabIdentifier:[64],updateAriaInfo:[64],activateTab:[64]},[[16,"calciteInternalTabChange","internalTabChangeHandler"],[0,"click","onClick"],[0,"keydown","keyDownHandler"]],{selected:["selectedHandler"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function Y2e(){if(typeof customElements>"u")return;["calcite-tab-title","calcite-icon"].forEach(e=>{switch(e){case"calcite-tab-title":customElements.get(e)||customElements.define(e,J2e);break;case"calcite-icon":customElements.get(e)||Or();break}})}Y2e();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const rA={container:"container",content:"content"},X2e=`:host([selected]) section,:host([selected]) .container{display:block}:host{display:none;block-size:100%;inline-size:100%}:host([selected]){display:block;block-size:100%;inline-size:100%;overflow:auto}.content{box-sizing:border-box;padding-block:var(--calcite-internal-tab-content-block-padding)}.scale-s{--calcite-internal-tab-content-block-padding:var(--calcite-tab-content-block-padding, 0.25rem);font-size:var(--calcite-font-size--2);line-height:1rem}.scale-m{--calcite-internal-tab-content-block-padding:var(--calcite-tab-content-block-padding, 0.5rem);font-size:var(--calcite-font-size--1);line-height:1rem}.scale-l{--calcite-internal-tab-content-block-padding:var(--calcite-tab-content-block-padding, 0.625rem);font-size:var(--calcite-font-size-0);line-height:1.25rem}section,.container{display:none;block-size:100%;inline-size:100%}.container{outline-color:transparent}.container:focus{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}:host([hidden]){display:none}[hidden]{display:none}`,Q2e=X2e,ewe=ci(class extends li{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.guid=`calcite-tab-title-${Il()}`,this.tab=void 0,this.selected=!1,this.scale="m",this.labeledBy=void 0}render(){const e=this.el.id||this.guid;return X(dn,{key:"5b445405fc60d4af5d48e2b4b42880a47a85a1ed","aria-labelledby":this.labeledBy,id:e},X("div",{key:"724b67e8c277d00f6408aa55f781ad8e91a34a5e",class:{[rA.container]:!0,[`scale-${this.scale}`]:!0},role:"tabpanel",tabIndex:this.selected?0:-1},X("section",{key:"9a395308243994365184c0f91d8a16de357c9146",class:rA.content},X("slot",{key:"0cddbc27b9d793c83fa580b9aa9c9f915675ec72"}))))}connectedCallback(){this.parentTabsEl=this.el.closest("calcite-tabs")}disconnectedCallback(){var e;(e=document.body)==null||e.dispatchEvent(new CustomEvent("calciteTabUnregister",{detail:this.el}))}internalTabChangeHandler(e){e.composedPath().find(n=>n.tagName==="CALCITE-TABS")===this.parentTabsEl&&(this.tab?this.selected=this.tab===e.detail.tab:this.getTabIndex().then(n=>{this.selected=n===e.detail.tab}),e.stopPropagation())}async getTabIndex(){return Array.prototype.indexOf.call(bB(this.el.parentElement.children).filter(e=>e.matches("calcite-tab")),this.el)}async updateAriaInfo(e=[],i=[]){this.labeledBy=i[e.indexOf(this.el.id)]||null}get el(){return this}static get style(){return Q2e}},[1,"calcite-tab",{tab:[513],selected:[1540],scale:[1],labeledBy:[32],getTabIndex:[64],updateAriaInfo:[64]},[[16,"calciteInternalTabChange","internalTabChangeHandler"]]]);function twe(){if(typeof customElements>"u")return;["calcite-tab"].forEach(e=>{switch(e){case"calcite-tab":customElements.get(e)||customElements.define(e,ewe);break}})}twe();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const iwe={validationContainer:"validation-container"},NM=({scale:t,status:e,id:i,icon:n,message:s})=>X("div",{class:iwe.validationContainer},X("calcite-input-message",{"aria-live":"polite",icon:n,id:i,scale:t,status:e},s));/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const nwe=["date","datetime-local","month","number","range","time","week"],rwe=["email","password","search","tel","text","url"],swe=["email","password","search","tel","text","textarea","url"];function Dp(t,e,i,n){const s=i.toLowerCase(),h=t[i];n&&h!=null?e.setAttribute(s,`${h}`):e.removeAttribute(s)}function gH(t,e,i){i.type=t==="textarea"?"text":t;const n=nwe.includes(t),s=e;Dp(s,i,"min",n),Dp(s,i,"max",n),Dp(s,i,"step",n);const h=swe.includes(t),f=e;Dp(f,i,"minLength",h),Dp(f,i,"maxLength",h);const m=rwe.includes(t);Dp(f,i,"pattern",m)}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const sA={valid:"check-circle",invalid:"exclamation-mark-triangle",idle:"information"},owe=":host{box-sizing:border-box;display:flex;block-size:auto;inline-size:100%;align-items:center;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1);opacity:1;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;--calcite-input-message-spacing-value:0.25rem;margin-block-start:var(--calcite-input-message-spacing-value)}.calcite-input-message-icon{pointer-events:none;display:inline-flex;flex-shrink:0;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;margin-inline-end:0.5rem}:host([status=invalid]) .calcite-input-message-icon{color:var(--calcite-color-status-danger)}:host([status=warning]) .calcite-input-message-icon{color:var(--calcite-color-status-warning)}:host([status=valid]) .calcite-input-message-icon{color:var(--calcite-color-status-success)}:host([status=idle]) .calcite-input-message-icon{color:var(--calcite-color-brand)}:host([scale=s]){font-size:var(--calcite-font-size--3);line-height:0.75rem}:host([scale=m]){font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=l]){font-size:var(--calcite-font-size--1);line-height:1rem}:host([hidden]){display:none}[hidden]{display:none}",awe=owe,lwe=ci(class extends li{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.icon=void 0,this.iconFlipRtl=!1,this.scale="m",this.status="idle"}handleIconEl(){this.requestedIcon=Rm(sA,this.icon,this.status)}connectedCallback(){this.requestedIcon=Rm(sA,this.icon,this.status)}render(){const e=this.el.hidden;return X(dn,{key:"c7d1b37721cec28dee1020b81ff66dee7fc8bc44","calcite-hydrated-hidden":e},this.renderIcon(this.requestedIcon),X("slot",{key:"7147d81e906765c154b4a61e31706a72c1ef3ae0"}))}renderIcon(e){if(e)return X("calcite-icon",{class:"calcite-input-message-icon",flipRtl:this.iconFlipRtl,icon:e,scale:"s"})}get el(){return this}static get watchers(){return{status:["handleIconEl"],icon:["handleIconEl"]}}static get style(){return awe}},[1,"calcite-input-message",{icon:[520],iconFlipRtl:[516,"icon-flip-rtl"],scale:[513],status:[513]},void 0,{status:["handleIconEl"],icon:["handleIconEl"]}]);function b_(){if(typeof customElements>"u")return;["calcite-input-message","calcite-icon"].forEach(e=>{switch(e){case"calcite-input-message":customElements.get(e)||customElements.define(e,lwe);break;case"calcite-icon":customElements.get(e)||Or();break}})}b_();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */var cwe="Expected a function";function hwe(t,e,i){var n=!0,s=!0;if(typeof t!="function")throw new TypeError(cwe);return zw(i)&&(n="leading"in i?!!i.leading:n,s="trailing"in i?!!i.trailing:s),ZB(t,e,{leading:n,maxWait:e,trailing:s})}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const Lr={assistiveText:"assistive-text",characterLimit:"character-limit",content:"content",container:"container",footer:"footer",resizeDisabled:"resize--disabled",resizeDisabledX:"resize--disabled-x",resizeDisabledY:"resize--disabled-y",characterOverLimit:"character--over-limit",readOnly:"readonly",textAreaInvalid:"text-area--invalid",footerSlotted:"footer--slotted",hide:"hide",footerEndSlotOnly:"footer--end-only",textArea:"text-area",textAreaOnly:"text-area--only"},oA={validationMessage:"textAreaValidationMessage"},aA={footerStart:"footer-start",footerEnd:"footer-end"},uwe=100,dwe=`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{position:relative;display:inline-block;block-size:100%;inline-size:100%;--calcite-internal-text-area-border-color:var(--calcite-text-area-border-color, var(--calcite-color-border-input));--calcite-internal-text-area-footer-border-color:var(
    --calcite-text-area-footer-border-color,
    var(--calcite-internal-text-area-border-color)
  )}.text-area,.footer{font-size:var(--calcite-text-area-font-size, var(--calcite-font-size--1));background-color:var(--calcite-text-area-background-color, var(--calcite-color-foreground-1));padding-block:var(--calcite-spacing-sm);padding-inline:var(--calcite-spacing-md)}.text-area{position:relative;margin:0px;box-sizing:border-box;display:block;inline-size:100%;font-family:var(--calcite-font-family);--calcite-internal-text-area-border-block-end-color:var(--calcite-internal-text-area-border-color);border:var(--calcite-border-width-sm) solid var(--calcite-internal-text-area-border-color);border-block-end-color:var(--calcite-internal-text-area-border-block-end-color);color:var(--calcite-text-area-text-color, var(--calcite-color-text-1));font-family:var(--calcite-sans-family);max-block-size:var(--calcite-text-area-max-height);min-block-size:var(--calcite-text-area-min-height);max-inline-size:var(--calcite-text-area-max-width);min-inline-size:var(--calcite-text-area-min-width, 12rem)}.text-area::placeholder{font-weight:var(--calcite-font-weight-normal)}@media screen and (max-width: 480px){.text-area{resize:none}}.text-area:focus{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}.text-area.text-area--invalid{--calcite-internal-text-area-border-color:var(--calcite-color-status-danger)}.text-area.text-area--invalid:focus{outline:2px solid var(--calcite-color-status-danger);outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}.text-area.footer--slotted{min-inline-size:18rem}.text-area:not(.text-area--only,.text-area--invalid){--calcite-internal-text-area-border-block-end-color:var(
    --calcite-text-area-divider-color,
    var(--calcite-color-border-3)
  )}.footer{box-sizing:border-box;display:flex;align-items:center;border:var(--calcite-border-width-sm) solid var(--calcite-internal-text-area-footer-border-color);border-block-start:var(--calcite-border-width-none);min-block-size:2.25rem}.character-limit{display:flex;align-items:center;justify-content:flex-end;white-space:nowrap;font-size:var(--calcite-text-area-font-size, var(--calcite-font-size--1));font-weight:var(--calcite-font-weight-regular);color:var(--calcite-text-area-character-limit-text-color, var(--calcite-color-text-2));padding-inline-start:var(--calcite-spacing-md)}.character--over-limit{font-weight:var(--calcite-font-weight-bold);color:var(--calcite-color-status-danger)}.readonly{background-color:var(--calcite-color-background);font-weight:var(--calcite-font-weight-medium)}.content,.hide{display:none}.container{display:flex;inline-size:100%;justify-content:space-between}.footer--end-only{justify-content:flex-end}.assistive-text{position:absolute;inline-size:1px;block-size:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}.text-area.text-area--only{block-size:100%}:host([resize=none]) .text-area{resize:none}:host([resize=horizontal]) .text-area{resize:horizontal}:host([resize=vertical]) .text-area{resize:vertical}:host([scale=s]) .text-area,:host([scale=s]) .footer,:host([scale=s]) .character-limit{padding-inline-start:0.5rem;font-size:var(--calcite-text-area-font-size, var(--calcite-font-size--2))}:host([scale=s]) .footer{min-block-size:1.75rem}:host([scale=s]) .text-area{padding-block:0.25rem;padding-inline:0.5rem}:host([scale=m]) .text-area{padding-block:0.5rem;padding-inline:0.75rem}:host([scale=m]) .footer{padding-block:0.5rem;padding-inline:0.75rem;min-block-size:2.25rem}:host([scale=l]) .text-area,:host([scale=l]) .footer{font-size:var(--calcite-text-area-font-size, var(--calcite-font-size-0));padding-block:var(--calcite-spacing-md);padding-inline:var(--calcite-spacing-xl)}:host([scale=l]) .footer{min-block-size:2.75rem}:host([scale=l]) .text-area,:host([scale=l]) .footer,:host([scale=l]) .character-limit{font-size:var(--calcite-text-area-font-size, var(--calcite-font-size-0));padding-inline-start:var(--calcite-spacing-xl)}:host([status=invalid]){--calcite-internal-text-area-border-color:var(--calcite-color-status-danger)}:host([status=invalid]) .text-area:focus{outline:2px solid var(--calcite-color-status-danger);outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}:host([disabled]) .text-area,:host([disabled]) .footer{opacity:var(--calcite-opacity-half)}.validation-container{display:flex;flex-direction:column;align-items:flex-start;align-self:stretch}:host([scale=m]) .validation-container,:host([scale=l]) .validation-container{padding-block-start:0.5rem}:host([scale=s]) .validation-container{padding-block-start:0.25rem}::slotted(input[slot=hidden-form-input]){margin:0 !important;opacity:0 !important;outline:none !important;padding:0 !important;position:absolute !important;inset:0 !important;transform:none !important;-webkit-appearance:none !important;z-index:-1 !important}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([hidden]){display:none}[hidden]{display:none}`,pwe=dwe,fwe=ci(class extends li{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteTextAreaInput=qe(this,"calciteTextAreaInput",7),this.calciteTextAreaChange=qe(this,"calciteTextAreaChange",7),this.guid=Il(),this.handleInput=e=>{this.value=e.target.value,this.calciteTextAreaInput.emit()},this.handleChange=()=>{this.calciteTextAreaChange.emit()},this.contentSlotChangeHandler=()=>{this.value||this.el.childNodes.forEach(i=>{i.nodeName==="#text"&&(this.value=i.nodeValue.trim())})},this.renderCharacterLimit=()=>this.maxLength?(this.localizedCharacterLengthObj=this.getLocalizedCharacterLength(),X("span",{class:Lr.characterLimit},X("span",{class:{[Lr.characterOverLimit]:this.isCharacterLimitExceeded()}},this.localizedCharacterLengthObj.currentLength),"/",this.localizedCharacterLengthObj.maxLength)):null,this.resizeObserver=hn("resize",async()=>{await S6(this);const{textAreaHeight:e,textAreaWidth:i,elHeight:n,elWidth:s,footerHeight:h,footerWidth:f}=this.getHeightAndWidthOfElements();f>0&&f!==i&&(this.footerEl.style.width=`${i}px`),(s!==i||n!==e+(h||0))&&this.setHeightAndWidthToAuto()}),this.setTextAreaEl=e=>{this.textAreaEl=e,this.resizeObserver.observe(e)},this.setHeightAndWidthToAuto=hwe(()=>{(this.resize==="vertical"||this.resize==="both")&&(this.el.style.height="auto"),(this.resize==="horizontal"||this.resize==="both")&&(this.el.style.width="auto")},uwe,{leading:!1}),this.columns=void 0,this.disabled=!1,this.form=void 0,this.groupSeparator=!1,this.label=void 0,this.minLength=void 0,this.maxLength=void 0,this.messages=void 0,this.validationMessage=void 0,this.validationIcon=void 0,this.validity={valid:!1,badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1},this.name=void 0,this.numberingSystem=void 0,this.placeholder=void 0,this.readOnly=!1,this.required=!1,this.resize="both",this.rows=void 0,this.scale="m",this.status="idle",this.value="",this.wrap="soft",this.messageOverrides=void 0,this.defaultMessages=void 0,this.endSlotHasElements=void 0,this.startSlotHasElements=void 0,this.effectiveLocale=""}handleGlobalAttributesChanged(){Tu(this)}onMessagesChange(){}connectedCallback(){V0(this),EM(this),Ds(this),So(this)}async componentWillLoad(){vo(this),await _o(this)}componentDidLoad(){bo(this)}componentDidRender(){Al(this),this.setTextAreaHeight()}disconnectedCallback(){var e;u_(this),MM(this),zs(this),To(this),(e=this.resizeObserver)==null||e.disconnect()}render(){const e=this.startSlotHasElements||this.endSlotHasElements||!!this.maxLength;return X(dn,{key:"87f925e13e3a1bef5b85af59a4e61433c3262929"},X(Ol,{key:"3431b47034859c62b0d0116b5ff47189cd46ea0b",disabled:this.disabled},X("textarea",{key:"78e60318dc05f03f0ec0f0738384b33a7e4ed546","aria-describedby":this.guid,"aria-errormessage":oA.validationMessage,"aria-invalid":cn(this.status==="invalid"||this.isCharacterLimitExceeded()),"aria-label":Lm(this),autofocus:this.el.autofocus,class:{[Lr.textArea]:!0,[Lr.readOnly]:this.readOnly,[Lr.textAreaInvalid]:this.isCharacterLimitExceeded(),[Lr.footerSlotted]:this.endSlotHasElements&&this.startSlotHasElements,[Lr.textAreaOnly]:!e},cols:this.columns,disabled:this.disabled,name:this.name,onChange:this.handleChange,onInput:this.handleInput,placeholder:this.placeholder,readOnly:this.readOnly,ref:this.setTextAreaEl,required:this.required,rows:this.rows,value:this.value,wrap:this.wrap}),X("span",{key:"54d603509f65611918b788280124499ecf2161cf",class:{[Lr.content]:!0}},X("slot",{key:"e1ffe00ed1eeb26899f372ea9d011da20bcddfeb",onSlotchange:this.contentSlotChangeHandler})),X("footer",{key:"bb52300f3ba3568e0e325c7e620cb6f5c53cba37",class:{[Lr.footer]:!0,[Lr.readOnly]:this.readOnly,[Lr.hide]:!e},ref:i=>this.footerEl=i},X("div",{key:"a5c5c250493dab203789dd27ce187c817006c5be",class:{[Lr.container]:!0,[Lr.footerEndSlotOnly]:!this.startSlotHasElements&&this.endSlotHasElements}},X("slot",{key:"a54c7b6ca529475fa59cf1849213cd0ec7bf8f9c",name:aA.footerStart,onSlotchange:i=>this.startSlotHasElements=xi(i)}),X("slot",{key:"e14af1362fd85e7461c42dd10dfd188d10f59ab0",name:aA.footerEnd,onSlotchange:i=>this.endSlotHasElements=xi(i)})),this.renderCharacterLimit()),X($M,{key:"b64b6dc288df7eadcf3eef9e17aa931732f4ad09",component:this}),this.isCharacterLimitExceeded()&&X("span",{key:"fb2017a6f21f4590934d9a1118e5dc5ee29e1dd5","aria-live":"polite",class:Lr.assistiveText,id:this.guid},this.replacePlaceHoldersInMessages()),this.validationMessage&&this.status==="invalid"?X(NM,{icon:this.validationIcon,id:oA.validationMessage,message:this.validationMessage,scale:this.scale,status:this.status}):null))}async setFocus(){await wo(this),this.textAreaEl.focus()}async selectText(){await S6(this),this.textAreaEl.select()}effectiveLocaleChange(){xo(this,this.effectiveLocale)}onLabelClick(){this.setFocus()}getLocalizedCharacterLength(){const e=this.value?this.value.length.toString():"0",i=this.maxLength.toString();return this.numberingSystem==="latn"?{currentLength:e,maxLength:i}:(_s.numberFormatOptions={locale:this.effectiveLocale,numberingSystem:this.numberingSystem,signDisplay:"never",useGrouping:this.groupSeparator},{currentLength:_s.localize(e),maxLength:_s.localize(i)})}syncHiddenFormInput(e){e.setCustomValidity(""),this.isCharacterLimitExceeded()&&e.setCustomValidity(this.replacePlaceHoldersInMessages()),gH("textarea",this,e)}setTextAreaHeight(){const{textAreaHeight:e,elHeight:i,footerHeight:n}=this.getHeightAndWidthOfElements();n>0&&e+n!=i&&(this.textAreaEl.style.height=`${i-n}px`)}getHeightAndWidthOfElements(){const{height:e,width:i}=this.textAreaEl.getBoundingClientRect(),{height:n,width:s}=this.el.getBoundingClientRect(),{height:h,width:f}=this.footerEl.getBoundingClientRect();return{textAreaHeight:e,textAreaWidth:i,elHeight:n,elWidth:s,footerHeight:h,footerWidth:f}}replacePlaceHoldersInMessages(){return this.messages.tooLong.replace("{maxLength}",this.localizedCharacterLengthObj.maxLength).replace("{currentLength}",this.localizedCharacterLengthObj.currentLength)}isCharacterLimitExceeded(){var e;return((e=this.value)==null?void 0:e.length)>this.maxLength}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{autofocus:["handleGlobalAttributesChanged"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return pwe}},[1,"calcite-text-area",{columns:[514],disabled:[516],form:[513],groupSeparator:[516,"group-separator"],label:[1],minLength:[514,"min-length"],maxLength:[514,"max-length"],messages:[1040],validationMessage:[1,"validation-message"],validationIcon:[520,"validation-icon"],validity:[1040],name:[513],numberingSystem:[1,"numbering-system"],placeholder:[1],readOnly:[516,"read-only"],required:[516],resize:[513],rows:[514],scale:[513],status:[513],value:[1025],wrap:[513],messageOverrides:[1040],defaultMessages:[32],endSlotHasElements:[32],startSlotHasElements:[32],effectiveLocale:[32],setFocus:[64],selectText:[64]},void 0,{autofocus:["handleGlobalAttributesChanged"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function gwe(){if(typeof customElements>"u")return;["calcite-text-area","calcite-icon","calcite-input-message"].forEach(e=>{switch(e){case"calcite-text-area":customElements.get(e)||customElements.define(e,fwe);break;case"calcite-icon":customElements.get(e)||Or();break;case"calcite-input-message":customElements.get(e)||b_();break}})}gwe();var mwe=ap('<div class="cntrl-container"><h3>Map</h3> <calcite-label>Zoom level <calcite-input><div slot="action"><calcite-button></calcite-button></div></calcite-input> <calcite-tooltip>Copy zoom level</calcite-tooltip></calcite-label> <calcite-label>Scale <calcite-input><div slot="action"><calcite-button></calcite-button></div></calcite-input> <calcite-tooltip>Copy scale</calcite-tooltip></calcite-label> <h3>Extent</h3> <calcite-tabs><calcite-tab-nav><calcite-tab-title>WGS84 (4326)</calcite-tab-title> <calcite-tab-title>WebMercator (102100)</calcite-tab-title></calcite-tab-nav> <calcite-tab><calcite-label>Center <calcite-input><div slot="action"><calcite-button></calcite-button></div></calcite-input> <calcite-tooltip>Copy WGS center point</calcite-tooltip></calcite-label> <calcite-label>Extent <calcite-text-area><calcite-button></calcite-button></calcite-text-area> <calcite-tooltip>Copy scale</calcite-tooltip></calcite-label></calcite-tab> <calcite-tab><calcite-label>Center <calcite-input><div slot="action"><calcite-button></calcite-button></div></calcite-input> <calcite-tooltip>Copy WGS84 center point</calcite-tooltip></calcite-label> <calcite-label>Extent <calcite-text-area><calcite-button></calcite-button></calcite-text-area> <calcite-tooltip>Copy Web Mercator extent</calcite-tooltip></calcite-label></calcite-tab></calcite-tabs></div>',2);function ywe(t,e){sp(e,!1);const i=o3(),n=()=>Fh(ml,"$mapView",i),s=()=>Fh(ZY,"$wgsCenterPoint",i),h=()=>Fh(YY,"$wgsExtentStr",i),f=()=>Fh(JY,"$wmExtentStr",i),m=sP(),y=va=>{const ba=document.getElementById(va.target.dataset.copyId);navigator.clipboard.writeText(ba.value).then(()=>{m("copy",{label:va.target.dataset.copyMsg,value:ba.value,type:"success"})},Dy=>{console.log("error copying to cp")})};Vm();var x=mwe(),E=zt(wt(x),2),k=zt(wt(E));Ie(k,"id","zoomInput"),Ie(k,"read-only",!0);var I=wt(k),P=wt(I);Ie(P,"data-copy-id","zoomInput"),Ie(P,"data-copy-msg","Zoom level"),Ie(P,"id","zoomBtn"),Ie(P,"icon-start","copy-to-clipboard"),Ie(P,"role","button"),Ie(P,"tabindex","0");var L=zt(k,2);Ie(L,"reference-element","zoomBtn");var D=zt(E,2),j=zt(wt(D));Ie(j,"id","scaleInput"),Ie(j,"read-only",!0);var H=wt(j),W=wt(H);Ie(W,"id","scaleBtn"),Ie(W,"data-copy-id","scaleInput"),Ie(W,"data-copy-msg","Scale level"),Ie(W,"icon-start","copy-to-clipboard"),Ie(W,"role","button"),Ie(W,"tabindex","0");var Z=zt(j,2);Ie(Z,"reference-element","scaleBtn");var Y=zt(D,4);Ie(Y,"bordered",!0),Ie(Y,"layout","center");var te=wt(Y);Ie(te,"slot","title-group");var ie=wt(te);Ie(ie,"selected",!0),zt(ie,2);var le=zt(te,2);Ie(le,"selected",!0);var pe=wt(le),ve=zt(wt(pe));Ie(ve,"id","wgsCenterCntrl"),Ie(ve,"read-only",!0);var be=wt(ve),Se=wt(be);Ie(Se,"role","button"),Ie(Se,"tabindex","0"),Ie(Se,"data-copy-id","wgsCenterCntrl"),Ie(Se,"data-copy-msg","WGS84 center point"),Ie(Se,"id","wgsCenterBtn"),Ie(Se,"icon-start","copy-to-clipboard");var Me=zt(ve,2);Ie(Me,"reference-element","wgsCenterBtn");var he=zt(pe,2),se=zt(wt(he));Ie(se,"id","wgsExtentCntrl"),Ie(se,"name","wgsExtentCntrl"),Ie(se,"rows","10"),Ie(se,"read-only",!0);var xe=wt(se);Ie(xe,"role","button"),Ie(xe,"tabindex","0"),Ie(xe,"data-copy-id","wgsExtentCntrl"),Ie(xe,"data-copy-msg","WGS84 extent"),Ie(xe,"id","wgsExtentBtn"),Ie(xe,"slot","footer-end"),Ie(xe,"icon-start","copy-to-clipboard");var Be=zt(se,2);Ie(Be,"reference-element","wgsExtentBtn");var Fe=zt(le,2),ze=wt(Fe),it=zt(wt(ze));Ie(it,"id","wmCenterCntrl"),Ie(it,"read-only",!0),Rx(()=>Ie(it,"value",`${n().center.x.toFixed(4)}, ${n().center.y.toFixed(4)}`));var ti=wt(it),Et=wt(ti);Ie(Et,"role","button"),Ie(Et,"tabindex","0"),Ie(Et,"data-copy-id","wmCenterCntrl"),Ie(Et,"data-copy-msg","Web mercator center point"),Ie(Et,"id","copyCenterBtn"),Ie(Et,"icon-start","copy-to-clipboard");var Un=zt(it,2);Ie(Un,"reference-element","copyCenterBtn");var Pr=zt(ze,2),Di=zt(wt(Pr));Ie(Di,"id","wmExtentCntrl"),Ie(Di,"name","wmExtentCntrl"),Ie(Di,"rows","10"),Ie(Di,"read-only",!0);var qi=wt(Di);Ie(qi,"role","button"),Ie(qi,"tabindex","0"),Ie(qi,"data-copy-id","wmExtentCntrl"),Ie(qi,"data-copy-msg","Web mercator extent"),Ie(qi,"id","wmExtentBtn"),Ie(qi,"slot","footer-end"),Ie(qi,"icon-start","copy-to-clipboard");var Hc=zt(Di,2);Ie(Hc,"reference-element","wmExtentBtn"),Rx(()=>{Ie(k,"value",n().zoom||0),Ie(j,"value",n().scale||0),Ie(ve,"value",`${s()}`),Ie(se,"value",h()),Ie(Di,"value",f())}),Qn("click",P,y),Qn("keyup",P,()=>{console.log("zoom keyup")}),Qn("click",W,y),Qn("keyup",W,()=>{console.log("scale keyup")}),Qn("click",Se,y),Qn("keyup",Se,()=>{console.log("center keyup")}),Qn("click",xe,y),Qn("keyup",xe,()=>{console.log("extent keyup")}),Qn("click",Et,y),Qn("keyup",Et,()=>{console.log("center keyup")}),Qn("click",qi,y),Qn("keyup",qi,()=>{console.log("extent keyup")}),Kh(t,x),op()}let yf=class extends Oe{constructor(e){super(e),this.length=null,this.verticalLength=null,this.area=null}};_([S()],yf.prototype,"length",void 0),_([S()],yf.prototype,"verticalLength",void 0),_([S()],yf.prototype,"area",void 0),yf=_([J("esri.views.interactive.sketch.Units")],yf);const Hw=yf;function vwe(t,e){return{type:qd(e),value:t,unit:e}}function CAe(t){return{value:t}}function mH(t,e){return{type:qd(e),value:t,unit:e}}function bwe(t,e){return{type:qd(e),value:t,unit:e}}function _l(t,e,i="arithmetic"){return{type:qd(e),value:t,unit:e,rotationType:i}}function IAe(t,e){const i=w_(t,e);return t.type==="angle"?_l(i,e,t.rotationType):vwe(i,e)}function w_(t,e){return oi(t.value,t.unit,e)}function AAe(t,e){return t==null?e:e==null||t.value>oi(e.value,e.unit,t.unit)?t:e}function OAe(t,e){return t==null?null:{...t,value:t.value*e}}function LM(t,e,i){if(e===i)return t;switch(i){case"arithmetic":case"geographic":return 90-t}}const PAe=mH(0,"meters"),RAe=bwe(0,"square-meters");_l(0,"radians");const NAe=_l(0,"degrees"),LAe=_l(0,"degrees","geographic");function yH(t,e,i,n){if(Ls(t.spatialReference,i)){Pv[0]=t.x,Pv[1]=t.y;const h=t.z;return Pv[2]=h??n??0,F0(Pv,t.spatialReference,0,e,i,0)}const s=l0(t,i);return!!s&&(e[0]=s==null?void 0:s.x,e[1]=s==null?void 0:s.y,e[2]=(s==null?void 0:s.z)??n??0,!0)}async function DAe(t,e,i,n,s){return await P3(t.spatialReference,i,null,s),yH(t,e,i,n)}const Pv=Te();function Pl(t,e,i,n){return{x:t,y:e,z:i,hasZ:i!=null,hasM:!1,spatialReference:n,type:"point"}}function vH(t,e,i,n,s){t.x=e,t.y=i,t.z=n,t.hasZ=n!=null,t.spatialReference=s}function yu(t,e,i,n,s){return!(e==null||n==null||t.length<2)&&(x1.x=t[0],x1.y=t[1],x1.z=t[2],x1.spatialReference=e,yH(x1,i,n,s))}const x1=Pl(0,0,0,Ke.WGS84);function bH(t){if(!t)return null;const e=t.wkid;if(e)return Eie[e];const i=t.wkt2??t.wkt;return i?wwe(i):null}function wwe(t){const e=Sie.exec(t);if(!e||e.length!==2)return null;const i=e[1].split(",");if(!i||i.length<3)return null;const n=parseFloat(i[1]),s=parseFloat(i[2]);return isNaN(n)||isNaN(s)?null:{a:n,f:s===0?0:1/s}}function __(t){const e=bH(t);if(_we(e))return e;const i=e.a*(1-e.f);return Object.assign(e,{b:i,eSq:1-(i/e.a)**2,radius:(2*e.a+i)/3,densificationRatio:1e4/((2*e.a+i)/3)})}function _we(t){return t!=null&&"b"in t&&"eSq"in t&&"radius"in t}function Rv(t,e,i){const{a:n,eSq:s}=__(i),h=Math.sqrt(s),f=Math.sin(e[1]*wr),m=n*e[0]*wr;let y;return s>0?y=n*((1-s)*(f/(1-s*(f*f))-1/(2*h)*Math.log((1-h*f)/(1+h*f))))*.5:y=n*f,t[0]=m,t[1]=y,t}function x_(t){return O0(t)&&!!bH(t)}function zAe(t,e="square-meters"){if(t.some(f=>!x_(f.spatialReference)))throw new ce("geodesic-areas:invalid-spatial-reference","the input geometries spatial reference is not supported");const i=[];for(let f=0;f<t.length;f++){const m=t[f],y=m.spatialReference,{radius:x,densificationRatio:E}=__(y),k=x*E;i.push(xwe(m,k))}const n=[],s=[0,0],h=[0,0];for(let f=0;f<i.length;f++){const{rings:m,spatialReference:y}=i[f];let x=0;for(let E=0;E<m.length;E++){const k=m[E];Rv(s,k[0],y),Rv(h,k[k.length-1],y);let I=h[0]*s[1]-s[0]*h[1];for(let P=0;P<k.length-1;P++)Rv(s,k[P+1],y),Rv(h,k[P],y),I+=h[0]*s[1]-s[0]*h[1];x+=I}x=oi(x,"square-meters",e),n.push(x/-2)}return n}function FAe(t,e="meters"){if(!t)throw new ce("geodesic-lengths:invalid-geometries","the input geometries type is not supported");if(t.some(n=>!x_(n.spatialReference)))throw new ce("geodesic-lengths:invalid-spatial-reference","the input geometries spatial reference is not supported");const i=[];for(let n=0;n<t.length;n++){const s=t[n],{spatialReference:h}=s,f=s.type==="polyline"?s.paths:s.rings;let m=0;for(let y=0;y<f.length;y++){const x=f[y];let E=0;for(let k=1;k<x.length;k++){const I=x[k-1][0],P=x[k][0],L=x[k-1][1],D=x[k][1];if(L!==D||I!==P){const j=new $y;ky(j,[I,L],[P,D],h),E+=j.distance}}m+=E}m=oi(m,"meters",e),i.push(m)}return i}function xwe(t,e){if(t.type!=="polyline"&&t.type!=="polygon")throw new ce("geodesic-densify:invalid-geometry","the input geometry is neither polyline nor polygon");const{spatialReference:i}=t;if(!x_(i))throw new ce("geodesic-densify:invalid-spatial-reference","the input geometry spatial reference is not supported");const n=t.type==="polyline"?t.paths:t.rings,s=[],h=[0,0],f=new $y;for(const y of n){const x=[];s.push(x),x.push([y[0][0],y[0][1]]);let E,k,I=y[0][0],P=y[0][1];for(let L=0;L<y.length-1;L++){if(E=y[L+1][0],k=y[L+1][1],I===E&&P===k)continue;const D=[I,P];ky(f,[I,P],[E,k],i);const{azimuth:j,distance:H}=f,W=H/e;if(W>1){for(let Z=1;Z<=W-1;Z++)Qh(h,D,j,Z*e,i),x.push(h.slice());Qh(h,D,j,(H+Math.floor(W-1)*e)/2,i),x.push(h.slice())}Qh(h,D,j,H,i),x.push(h.slice()),I=h[0],P=h[1]}}const m=I0(Ke,i);return t.type==="polyline"?new Tr({paths:s,spatialReference:m}):new ln({rings:s,spatialReference:m})}let $y=class{constructor(e=0,i=void 0,n=void 0){this.distance=e,this.azimuth=i,this.reverseAzimuth=n}};function Qh(t,e,i,n,s){const h=e[0],f=e[1],m=h*wr,y=f*wr,x=(i??0)*wr,{a:E,b:k,f:I}=__(s),P=Math.sin(x),L=Math.cos(x),D=(1-I)*Math.tan(y),j=1/Math.sqrt(1+D*D),H=D*j,W=Math.atan2(D,L),Z=j*P,Y=Z*Z,te=1-Y,ie=te*(E*E-k*k)/(k*k),le=1+ie/16384*(4096+ie*(ie*(320-175*ie)-768)),pe=ie/1024*(256+ie*(ie*(74-47*ie)-128));let ve,be,Se,Me,he=n/(k*le),se=2*Math.PI;for(;Math.abs(he-se)>1e-12;)Se=Math.cos(2*W+he),ve=Math.sin(he),be=Math.cos(he),Me=pe*ve*(Se+pe/4*(be*(2*Se*Se-1)-pe/6*Se*(4*ve*ve-3)*(4*Se*Se-3))),se=he,he=n/(k*le)+Me;const xe=H*ve-j*be*L,Be=Math.atan2(H*be+j*ve*L,(1-I)*Math.sqrt(Y+xe*xe)),Fe=Math.atan2(ve*P,j*be-H*ve*L),ze=I/16*te*(4+I*(4-3*te)),it=Be/wr,ti=(m+(Fe-(1-ze)*I*Z*(he+ze*ve*(Se+ze*be*(2*Se*Se-1)))))/wr;return t[0]=ti,t[1]=it,t}function ky(t,e,i,n){const s=e[0]*wr,h=e[1]*wr,f=i[0]*wr,m=i[1]*wr,{a:y,b:x,f:E,radius:k}=__(n),I=f-s,P=Math.atan((1-E)*Math.tan(h)),L=Math.atan((1-E)*Math.tan(m)),D=Math.sin(P),j=Math.cos(P),H=Math.sin(L),W=Math.cos(L);let Z,Y,te,ie,le,pe,ve,be,Se,Me,he=1e3,se=I;do{if(ve=Math.sin(se),be=Math.cos(se),te=Math.sqrt(W*ve*(W*ve)+(j*H-D*W*be)*(j*H-D*W*be)),te===0)return t.distance=0,t.azimuth=void 0,t.reverseAzimuth=void 0,t;le=D*H+j*W*be,pe=Math.atan2(te,le),Se=j*W*ve/te,Y=1-Se*Se,ie=le-2*D*H/Y,isNaN(ie)&&(ie=0),Me=E/16*Y*(4+E*(4-3*Y)),Z=se,se=I+(1-Me)*E*Se*(pe+Me*te*(ie+Me*le*(2*ie*ie-1)))}while(Math.abs(se-Z)>1e-12&&--he>0);if(he===0){const ti=k,Et=Math.acos(Math.sin(h)*Math.sin(m)+Math.cos(h)*Math.cos(m)*Math.cos(f-s))*ti,Un=f-s,Pr=Math.sin(Un)*Math.cos(m),Di=Math.cos(h)*Math.sin(m)-Math.sin(h)*Math.cos(m)*Math.cos(Un),qi=Math.atan2(Pr,Di);return t.azimuth=qi/wr,t.distance=Et,t.reverseAzimuth=void 0,t}const xe=Y*(y*y-x*x)/(x*x),Be=xe/1024*(256+xe*(xe*(74-47*xe)-128)),Fe=x*(1+xe/16384*(4096+xe*(xe*(320-175*xe)-768)))*(pe-Be*te*(ie+Be/4*(le*(2*ie*ie-1)-Be/6*ie*(4*te*te-3)*(4*ie*ie-3)))),ze=Math.atan2(W*Math.sin(se),j*H-D*W*Math.cos(se)),it=Math.atan2(j*Math.sin(se),j*H*Math.cos(se)-D*W);return t.azimuth=ze/wr,t.distance=Fe,t.reverseAzimuth=it/wr,t}function Vw(t){return x_(t)?t:ca(t)?Ke.WGS84:null}var on;function DM(t,e){if(t==null||e==null)return;const i=M6(t,e);return i!=null?_l(i,"radians","geographic"):void 0}(function(t){t.Absolute="absolute",t.Relative="relative",t.RelativeBilateral="relative-bilateral"})(on||(on={}));const M6=(()=>{const t=Te(),e=Te();return(i,n)=>(vi(t,i.x,i.y,i.z??0),vi(e,n.x,n.y,n.z??0),Swe(t,e,i.spatialReference,n.spatialReference))})(),Swe=(()=>{const t=at(),e=Te(),i=Te();return(n,s,h,f)=>{if(Zt(n,s))return;const m=Vw(h),y=Vw(f);if(m&&y&&Ai(m,y)&&yu(n,h,e,m)&&yu(s,f,i,y)){const{azimuth:E}=ky(Mwe,e,i,m);return E!=null?oi(E,"degrees","radians"):void 0}t[0]=s[0]-n[0],t[1]=s[1]-n[1];let x=_j(gj,t);return t[0]<0&&(x=$we-x),x}})();function GAe(t,e,i,n=on.Absolute){if(e&&i)switch(n){case on.Absolute:return DM(e,i);case on.Relative:return cA(lA(t,e,i),on.Relative);case on.RelativeBilateral:return cA(lA(t,e,i),on.RelativeBilateral)}}function lA(t,e,i){if(!t||!e||!i)return;const n=M6(t,e),s=M6(e,i);return n!=null&&s!=null?_l(s-n,"radians","geographic"):void 0}function cA(t,e){if(t!=null)switch(e){case on.Absolute:return Twe(t);case on.Relative:{const i=xl(t);let n=hA.normalize(i,0,!0);return n===-180&&(n=180),_l(n,"degrees","geographic")}case on.RelativeBilateral:{const i=xl(t),n=Math.abs(hA.normalize(i,0,!0));return _l(n,"degrees","geographic")}}}function Twe(t){const e=xl(t),i=kwe.normalize(e,0,!0);return _l(i,"degrees","geographic")}const Ewe=(()=>{const t=Te();return(e,i,n,s,h,f="geodesic")=>{Er(t,i);const m=xl(h);if(f==="geodesic"){const P=Vw(n);if(P&&yu(t,n,t,P))return Qh(e,t,m,s,P),e[2]=i[2],!!yu(e,P,e,n)}const y=LM(m,"geographic","arithmetic"),x=oi(y,"degrees","radians"),E=i[0]+s*Math.cos(x),k=i[1]+s*Math.sin(x),I=i[2];return vi(e,E,k,I),!0}})();function xl(t){if(t!=null)return LM(wH(t),t.rotationType,"geographic")}function UAe(t){if(t!=null)return LM(wH(t),t.rotationType,"arithmetic")}function wH(t){return oi(t.value,t.unit,"degrees")}const Mwe=new $y,$we=2*Math.PI,kwe=FN,hA=new T3(-180,180);let Th=class extends Oe{constructor(e){super(e),this.directionMode="relative",this.relativeDirectionIsBilateral=!1}get effectiveDirectionMode(){switch(this.directionMode){case"relative":return this.relativeDirectionIsBilateral?on.RelativeBilateral:on.Relative;case"absolute":return on.Absolute}}get displayUnits(){return this._get("displayUnits")??new Hw}set displayUnits(e){this._set("displayUnits",e)}get inputUnits(){return this._get("inputUnits")??new Hw}set inputUnits(e){this._set("inputUnits",e)}};_([S({type:String,nonNullable:!0})],Th.prototype,"directionMode",void 0),_([S({type:Boolean,nonNullable:!0})],Th.prototype,"relativeDirectionIsBilateral",void 0),_([S()],Th.prototype,"effectiveDirectionMode",null),_([S({type:Hw,nonNullable:!0})],Th.prototype,"displayUnits",null),_([S({type:Hw,nonNullable:!0})],Th.prototype,"inputUnits",null),Th=_([J("esri.views.interactive.sketch.SketchValueOptions")],Th);const S_=Th;function Cwe(t,e){function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i}function Wf(t,e,i,n){var s=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(s,Wf.prototype),s.expected=e,s.found=i,s.location=n,s.name="SyntaxError",s}function ux(t,e,i){return i=i||" ",t.length>e?t:(e-=t.length,t+(i+=i.repeat(e)).slice(0,e))}function Iwe(t,e){var i,n={},s=(e=e!==void 0?e:{}).grammarSource,h={start:Ve},f=Ve,m="none",y=")",x=",",E="(",k="%",I="px",P="cm",L="mm",D="in",j="pt",H="pc",W="deg",Z="rad",Y="grad",te="turn",ie="#",le=".",pe="e",ve=/^[ \t\n\r]/,be=/^[a-z\-]/,Se=/^[0-9a-fA-F]/,Me=/^[+\-]/,he=/^[0-9]/,se=we("none"),xe=ee("none",!1),Be=ee(")",!1),Fe=ee(",",!1),ze=we("whitespace"),it=oe([" ","	",`
`,"\r"],!1,!1),ti=we("function"),Et=ee("(",!1),Un=we("identifier"),Pr=oe([["a","z"],"-"],!1,!1),Di=we("percentage"),qi=ee("%",!1),Hc=we("length"),va=ee("px",!1),ba=ee("cm",!1),Dy=ee("mm",!1),V_=ee("in",!1),q_=ee("pt",!1),zy=ee("pc",!1),W_=we("angle"),K_=ee("deg",!1),Z_=ee("rad",!1),Xi=ee("grad",!1),V=ee("turn",!1),Bn=we("number"),Fy=we("color"),bt=ee("#",!1),Mi=oe([["0","9"],["a","f"],["A","F"]],!1,!1),Fs=oe(["+","-"],!1,!1),An=oe([["0","9"]],!1,!1),wa=ee(".",!1),Rl=ee("e",!1),jy=function(){return[]},Gy=function(Q,ye){return{type:"function",name:Q,parameters:ye||[]}},Nl=function(Q,ye){return ye.length>0?_p(Q,ye,3):[Q]},Ce=function(Q){return{type:"quantity",value:Q.value,unit:Q.unit}},Vc=function(Q){return{type:"color",colorType:Q.type,value:Q.value}},u=function(Q){return Q},A=function(){return K()},b=function(Q){return{value:Q,unit:"%"}},c=function(Q){return{value:Q,unit:"px"}},a=function(Q){return{value:Q,unit:"cm"}},r=function(Q){return{value:Q,unit:"mm"}},o=function(Q){return{value:Q,unit:"in"}},l=function(Q){return{value:Q,unit:"pt"}},d=function(Q){return{value:Q,unit:"pc"}},p=function(Q){return{value:Q,unit:"deg"}},g=function(Q){return{value:Q,unit:"rad"}},v=function(Q){return{value:Q,unit:"grad"}},w=function(Q){return{value:Q,unit:"turn"}},T=function(Q){return{value:Q,unit:null}},$=function(){return{type:"hex",value:K()}},C=function(Q){return{type:"function",value:Q}},O=function(){return{type:"named",value:K()}},N=function(){return parseFloat(K())},R=0|e.peg$currPos,F=R,G=[{line:1,column:1}],z=R,B=e.peg$maxFailExpected||[],q=0|e.peg$silentFails;if(e.startRule){if(!(e.startRule in h))throw new Error(`Can't start parsing from rule "`+e.startRule+'".');f=h[e.startRule]}function K(){return t.substring(F,R)}function ee(Q,ye){return{type:"literal",text:Q,ignoreCase:ye}}function oe(Q,ye,ke){return{type:"class",parts:Q,inverted:ye,ignoreCase:ke}}function ue(){return{type:"end"}}function we(Q){return{type:"other",description:Q}}function me(Q){var ye,ke=G[Q];if(ke)return ke;if(Q>=G.length)ye=G.length-1;else for(ye=Q;!G[--ye];);for(ke={line:(ke=G[ye]).line,column:ke.column};ye<Q;)t.charCodeAt(ye)===10?(ke.line++,ke.column=1):ke.column++,ye++;return G[Q]=ke,ke}function Re(Q,ye,ke){var et=me(Q),ii=me(ye);return{source:s,start:{offset:Q,line:et.line,column:et.column},end:{offset:ye,line:ii.line,column:ii.column}}}function fe(Q){R<z||(R>z&&(z=R,B=[]),B.push(Q))}function Ye(Q,ye,ke){return new Wf(Wf.buildMessage(Q,ye),Q,ye,ke)}function Ve(){var Q;return(Q=ft())===n&&(Q=jt()),Q}function ft(){var Q,ye;return q++,Q=R,Xe(),t.substr(R,4)===m?(ye=m,R+=4):(ye=n,q===0&&fe(xe)),ye!==n?(Xe(),F=Q,Q=jy()):(R=Q,Q=n),q--,Q===n&&q===0&&fe(se),Q}function jt(){var Q,ye;if(Q=[],(ye=Oi())!==n)for(;ye!==n;)Q.push(ye),ye=Oi();else Q=n;return Q}function Oi(){var Q,ye,ke,et;return Q=R,Xe(),(ye=st())!==n?(Xe(),(ke=Bt())===n&&(ke=null),Xe(),t.charCodeAt(R)===41?(et=y,R++):(et=n,q===0&&fe(Be)),et!==n?(Xe(),F=Q,Q=Gy(ye,ke)):(R=Q,Q=n)):(R=Q,Q=n),Q}function Bt(){var Q,ye,ke,et,ii,zi,pn,Rr;if(Q=R,(ye=gt())!==n){for(ke=[],et=R,ii=Xe(),t.charCodeAt(R)===44?(zi=x,R++):(zi=n,q===0&&fe(Fe)),zi===n&&(zi=null),pn=Xe(),(Rr=gt())!==n?et=ii=[ii,zi,pn,Rr]:(R=et,et=n);et!==n;)ke.push(et),et=R,ii=Xe(),t.charCodeAt(R)===44?(zi=x,R++):(zi=n,q===0&&fe(Fe)),zi===n&&(zi=null),pn=Xe(),(Rr=gt())!==n?et=ii=[ii,zi,pn,Rr]:(R=et,et=n);F=Q,Q=Nl(ye,ke)}else R=Q,Q=n;return Q}function gt(){var Q,ye;return Q=R,(ye=Yt())===n&&(ye=ns())===n&&(ye=dt())===n&&(ye=On()),ye!==n&&(F=Q,ye=Ce(ye)),(Q=ye)===n&&(Q=R,(ye=Mt())!==n&&(F=Q,ye=Vc(ye)),Q=ye),Q}function Xe(){var Q,ye;for(q++,Q=[],ye=t.charAt(R),ve.test(ye)?R++:(ye=n,q===0&&fe(it));ye!==n;)Q.push(ye),ye=t.charAt(R),ve.test(ye)?R++:(ye=n,q===0&&fe(it));return q--,ye=n,q===0&&fe(ze),Q}function st(){var Q,ye,ke;return q++,Q=R,(ye=hi())!==n?(t.charCodeAt(R)===40?(ke=E,R++):(ke=n,q===0&&fe(Et)),ke!==n?(F=Q,Q=u(ye)):(R=Q,Q=n)):(R=Q,Q=n),q--,Q===n&&(ye=n,q===0&&fe(ti)),Q}function hi(){var Q,ye,ke;if(q++,Q=R,ye=[],ke=t.charAt(R),be.test(ke)?R++:(ke=n,q===0&&fe(Pr)),ke!==n)for(;ke!==n;)ye.push(ke),ke=t.charAt(R),be.test(ke)?R++:(ke=n,q===0&&fe(Pr));else ye=n;return ye!==n&&(F=Q,ye=A()),q--,(Q=ye)===n&&(ye=n,q===0&&fe(Un)),Q}function Yt(){var Q,ye,ke;return q++,Q=R,Xe(),(ye=Pn())!==n?(t.charCodeAt(R)===37?(ke=k,R++):(ke=n,q===0&&fe(qi)),ke!==n?(F=Q,Q=b(ye)):(R=Q,Q=n)):(R=Q,Q=n),q--,Q===n&&q===0&&fe(Di),Q}function ns(){var Q,ye,ke;return q++,Q=R,Xe(),(ye=Pn())!==n?(t.substr(R,2)===I?(ke=I,R+=2):(ke=n,q===0&&fe(va)),ke!==n?(F=Q,Q=c(ye)):(R=Q,Q=n)):(R=Q,Q=n),Q===n&&(Q=R,Xe(),(ye=Pn())!==n?(t.substr(R,2)===P?(ke=P,R+=2):(ke=n,q===0&&fe(ba)),ke!==n?(F=Q,Q=a(ye)):(R=Q,Q=n)):(R=Q,Q=n),Q===n&&(Q=R,Xe(),(ye=Pn())!==n?(t.substr(R,2)===L?(ke=L,R+=2):(ke=n,q===0&&fe(Dy)),ke!==n?(F=Q,Q=r(ye)):(R=Q,Q=n)):(R=Q,Q=n),Q===n&&(Q=R,Xe(),(ye=Pn())!==n?(t.substr(R,2)===D?(ke=D,R+=2):(ke=n,q===0&&fe(V_)),ke!==n?(F=Q,Q=o(ye)):(R=Q,Q=n)):(R=Q,Q=n),Q===n&&(Q=R,Xe(),(ye=Pn())!==n?(t.substr(R,2)===j?(ke=j,R+=2):(ke=n,q===0&&fe(q_)),ke!==n?(F=Q,Q=l(ye)):(R=Q,Q=n)):(R=Q,Q=n),Q===n&&(Q=R,Xe(),(ye=Pn())!==n?(t.substr(R,2)===H?(ke=H,R+=2):(ke=n,q===0&&fe(zy)),ke!==n?(F=Q,Q=d(ye)):(R=Q,Q=n)):(R=Q,Q=n)))))),q--,Q===n&&q===0&&fe(Hc),Q}function dt(){var Q,ye,ke;return q++,Q=R,(ye=Pn())!==n?(t.substr(R,3)===W?(ke=W,R+=3):(ke=n,q===0&&fe(K_)),ke!==n?(F=Q,Q=p(ye)):(R=Q,Q=n)):(R=Q,Q=n),Q===n&&(Q=R,(ye=Pn())!==n?(t.substr(R,3)===Z?(ke=Z,R+=3):(ke=n,q===0&&fe(Z_)),ke!==n?(F=Q,Q=g(ye)):(R=Q,Q=n)):(R=Q,Q=n),Q===n&&(Q=R,(ye=Pn())!==n?(t.substr(R,4)===Y?(ke=Y,R+=4):(ke=n,q===0&&fe(Xi)),ke!==n?(F=Q,Q=v(ye)):(R=Q,Q=n)):(R=Q,Q=n),Q===n&&(Q=R,(ye=Pn())!==n?(t.substr(R,4)===te?(ke=te,R+=4):(ke=n,q===0&&fe(V)),ke!==n?(F=Q,Q=w(ye)):(R=Q,Q=n)):(R=Q,Q=n)))),q--,Q===n&&(ye=n,q===0&&fe(W_)),Q}function On(){var Q,ye;return q++,Q=R,Xe(),(ye=Pn())!==n?(F=Q,Q=T(ye)):(R=Q,Q=n),q--,Q===n&&q===0&&fe(Bn),Q}function Mt(){var Q,ye,ke,et;if(q++,Q=R,t.charCodeAt(R)===35?(ye=ie,R++):(ye=n,q===0&&fe(bt)),ye!==n){if(ke=[],et=t.charAt(R),Se.test(et)?R++:(et=n,q===0&&fe(Mi)),et!==n)for(;et!==n;)ke.push(et),et=t.charAt(R),Se.test(et)?R++:(et=n,q===0&&fe(Mi));else ke=n;ke!==n?(F=Q,Q=$()):(R=Q,Q=n)}else R=Q,Q=n;return Q===n&&(Q=R,(ye=Oi())!==n&&(F=Q,ye=C(ye)),(Q=ye)===n&&(Q=R,(ye=hi())!==n&&(F=Q,ye=O()),Q=ye)),q--,Q===n&&(ye=n,q===0&&fe(Fy)),Q}function Pn(){var Q,ye,ke,et,ii,zi,pn,Rr;for(Q=R,ye=t.charAt(R),Me.test(ye)?R++:(ye=n,q===0&&fe(Fs)),ye===n&&(ye=null),ke=R,et=[],ii=t.charAt(R),he.test(ii)?R++:(ii=n,q===0&&fe(An));ii!==n;)et.push(ii),ii=t.charAt(R),he.test(ii)?R++:(ii=n,q===0&&fe(An));if(t.charCodeAt(R)===46?(ii=le,R++):(ii=n,q===0&&fe(wa)),ii!==n){if(zi=[],pn=t.charAt(R),he.test(pn)?R++:(pn=n,q===0&&fe(An)),pn!==n)for(;pn!==n;)zi.push(pn),pn=t.charAt(R),he.test(pn)?R++:(pn=n,q===0&&fe(An));else zi=n;zi!==n?ke=et=[et,ii,zi]:(R=ke,ke=n)}else R=ke,ke=n;if(ke===n)if(ke=[],et=t.charAt(R),he.test(et)?R++:(et=n,q===0&&fe(An)),et!==n)for(;et!==n;)ke.push(et),et=t.charAt(R),he.test(et)?R++:(et=n,q===0&&fe(An));else ke=n;if(ke!==n){if(et=R,t.charCodeAt(R)===101?(ii=pe,R++):(ii=n,q===0&&fe(Rl)),ii!==n){if(zi=t.charAt(R),Me.test(zi)?R++:(zi=n,q===0&&fe(Fs)),zi===n&&(zi=null),pn=[],Rr=t.charAt(R),he.test(Rr)?R++:(Rr=n,q===0&&fe(An)),Rr!==n)for(;Rr!==n;)pn.push(Rr),Rr=t.charAt(R),he.test(Rr)?R++:(Rr=n,q===0&&fe(An));else pn=n;pn!==n?et=ii=[ii,zi,pn]:(R=et,et=n)}else R=et,et=n;et===n&&(et=null),F=Q,Q=N()}else R=Q,Q=n;return Q}function wp(Q,ye){return Q.map(function(ke){return ke[ye]})}function _p(Q,ye,ke){return[Q].concat(wp(ye,ke))}if(i=f(),e.peg$library)return{peg$result:i,peg$currPos:R,peg$FAILED:n,peg$maxFailExpected:B,peg$maxFailPos:z};if(i!==n&&R===t.length)return i;throw i!==n&&R<t.length&&fe(ue()),Ye(B,z<t.length?t.charAt(z):null,z<t.length?Re(z,z+1):Re(z,z))}function _H(t){if(!t||t.length===0)return null;if(typeof t=="string"){const i=uA(t);return i&&i.length!==0?i:null}const e=t.map(i=>{if(!Number.isFinite(i.scale)||i.scale<=0)throw new ce("effect:invalid-scale","scale must be finite and greater than 0",{stop:i});return{scale:i.scale,effects:uA(i.value)}});e.sort((i,n)=>n.effects.length-i.effects.length);for(let i=0;i<e.length-1;i++){if(!Doe(e[i].effects,e[i+1].effects))throw new ce("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:e[i].effects,b:e[i+1].effects});zoe(e[i].effects,e[i+1].effects)}return e.sort((i,n)=>n.scale-i.scale),e}function uA(t){let e;if(!t)return[];try{e=Iwe(t)}catch(i){throw new ce("effect:invalid-syntax","Invalid effect syntax",{value:t,error:i})}return e.map(i=>Awe(i))}function Awe(t){try{switch(t.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return Owe(t);case"opacity":return Pwe(t);case"hue-rotate":return Rwe(t);case"blur":return Nwe(t);case"drop-shadow":return Lwe(t);case"bloom":return Dwe(t)}}catch(e){throw e.details.filter=t,e}throw new ce("effect:unknown-effect",`Effect '${t.name}' is not supported`,{effect:t})}function Owe(t){let e=1;return W0(t.parameters,1),t.parameters.length===1&&(e=Yo(t.parameters[0])),new c4(t.name,e)}function Pwe(t){let e=1;return W0(t.parameters,1),t.parameters.length===1&&(e=Yo(t.parameters[0])),new Az(e)}function Rwe(t){let e=0;return W0(t.parameters,1),t.parameters.length===1&&(e=Bwe(t.parameters[0])),new Cz(e)}function Nwe(t){let e=0;return W0(t.parameters,1),t.parameters.length===1&&(e=jM(t.parameters[0]),Cy(e,t.parameters[0])),new Tz(e)}function Lwe(t){const e=[];let i=null;for(const n of t.parameters)if(n.type==="color"){if(e.length&&Object.freeze(e),i)throw new ce("effect:type-error","Accepts only one color",{});i=Hwe(n)}else{const s=jM(n);if(Object.isFrozen(e))throw new ce("effect:type-error","<length> parameters not consecutive",{lengths:e});e.push(s),e.length===3&&Cy(s,n)}if(e.length<2||e.length>3)throw new ce("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${e.length}}`,{lengths:e});return new $z(e[0],e[1],e[2]||0,i||xH("black"))}function Dwe(t){let e=1,i=0,n=0;return W0(t.parameters,3),t.parameters[0]&&(e=Yo(t.parameters[0])),t.parameters[1]&&(i=jM(t.parameters[1]),Cy(i,t.parameters[1])),t.parameters[2]&&(n=Yo(t.parameters[2])),new xz(e,i,n)}function W0(t,e){if(t.length>e)throw new ce("effect:type-error",`Function supports up to ${e} parameters, Actual: ${t.length}`,{parameters:t})}function T_(t){if(t.type==="color")return"<color>";if(t.unit){if(t.unit in FM)return"<length>";if(t.unit in zM)return"<angle>";if(t.unit==="%")return"<percentage>"}return"<double>"}function Cy(t,e){if(t<0)throw new ce("effect:type-error",`Negative values are not allowed, Actual: ${t}`,{term:e})}function zwe(t){if(t.type!=="quantity"||t.unit!==null)throw new ce("effect:type-error",`Expected <double>, Actual: ${T_(t)}`,{term:t})}function Fwe(t){if(t.type!=="quantity"||t.unit!==null&&t.unit!=="%")throw new ce("effect:type-error",`Expected <double> or <percentage>, Actual: ${T_(t)}`,{term:t})}Cwe(Wf,Error),Wf.prototype.format=function(t){var e="Error: "+this.message;if(this.location){var i,n=null;for(i=0;i<t.length;i++)if(t[i].source===this.location.source){n=t[i].text.split(/\r\n|\n|\r/g);break}var s=this.location.start,h=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(s):s,f=this.location.source+":"+h.line+":"+h.column;if(n){var m=this.location.end,y=ux("",h.line.toString().length," "),x=n[s.line-1],E=(s.line===m.line?m.column:x.length+1)-s.column||1;e+=`
 --> `+f+`
`+y+` |
`+h.line+" | "+x+`
`+y+" | "+ux("",s.column-1," ")+ux("",E,"^")}else e+=`
 at `+f}return e},Wf.buildMessage=function(t,e){var i={literal:function(x){return'"'+s(x.text)+'"'},class:function(x){var E=x.parts.map(function(k){return Array.isArray(k)?h(k[0])+"-"+h(k[1]):h(k)});return"["+(x.inverted?"^":"")+E.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(x){return x.description}};function n(x){return x.charCodeAt(0).toString(16).toUpperCase()}function s(x){return x.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+n(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+n(E)})}function h(x){return x.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+n(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+n(E)})}function f(x){return i[x.type](x)}function m(x){var E,k,I=x.map(f);if(I.sort(),I.length>0){for(E=1,k=1;E<I.length;E++)I[E-1]!==I[E]&&(I[k]=I[E],k++);I.length=k}switch(I.length){case 1:return I[0];case 2:return I[0]+" or "+I[1];default:return I.slice(0,-1).join(", ")+", or "+I[I.length-1]}}function y(x){return x?'"'+s(x)+'"':"end of input"}return"Expected "+m(t)+" but "+y(e)+" found."};const zM={deg:1,grad:.9,rad:180/Math.PI,turn:360};function jwe(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&zM[t.unit]!=null))throw new ce("effect:type-error",`Expected <angle>, Actual: ${T_(t)}`,{term:t})}const FM={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function Gwe(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&FM[t.unit]!=null))throw new ce("effect:type-error",`Expected <length>, Actual: ${T_(t)}`,{term:t})}function Yo(t){Fwe(t);const e=t.value;return Cy(e,t),t.unit==="%"?.01*e:e}function Uwe(t){return zwe(t),Cy(t.value,t),t.value}function Bwe(t){return jwe(t),t.value*zM[t.unit]||0}function jM(t){return Gwe(t),t.value*FM[t.unit]||0}function Hwe(t){switch(t.colorType){case"hex":return kse(t.value);case"named":return xH(t.value);case"function":return Wwe(t.value)}}function xH(t){if(!cz(t))throw new ce("effect:unknown-color",`color '${t}' isn't valid`,{namedColor:t});return $se(t)}const Vwe=/^rgba?/i,qwe=/^hsla?/i;function Wwe(t){if(W0(t.parameters,4),Vwe.test(t.name))return[Yo(t.parameters[0]),Yo(t.parameters[1]),Yo(t.parameters[2]),t.parameters[3]?Yo(t.parameters[3]):1];if(qwe.test(t.name))return hz(Uwe(t.parameters[0]),Yo(t.parameters[1]),Yo(t.parameters[2]),t.parameters[3]?Yo(t.parameters[3]):1);throw new ce("effect:syntax-error",`Invalid color function '${t.name}'`,{colorFunction:t})}function Kwe(t,e,i){var n;try{return Ywe(t)}catch(s){(n=i==null?void 0:i.messages)==null||n.push(s)}return null}function Zwe(t,e,i,n){try{const s=Jwe(t);lp(i,s,e)}catch(s){n.messages&&n.messages.push(s)}}function Jwe(t){const e=_H(t);return e?Foe(e)?e.map(i=>i.toJSON()):e.map(({scale:i,effects:n})=>({scale:i,value:n.map(s=>s.toJSON())})):null}function Ywe(t){if(!t||t.length===0)return null;if(Xwe(t)){const e=[];for(const i of t)e.push({scale:i.scale,value:dA(i.value)});return e}return dA(t)}function Xwe(t){const e=t[0];return!!e&&"scale"in e}function dA(t){if(!(t!=null&&t.length))return"";const e=[];for(const i of t){let n=[];switch(i.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":n=[Ul(i,"amount")];break;case"blur":n=[Ul(i,"radius","pt")];break;case"hue-rotate":n=[Ul(i,"angle","deg")];break;case"drop-shadow":n=[Ul(i,"xoffset","pt"),Ul(i,"yoffset","pt"),Ul(i,"blurRadius","pt"),Qwe(i,"color")];break;case"bloom":n=[Ul(i,"strength"),Ul(i,"radius","pt"),Ul(i,"threshold")]}const s=`${i.type}(${n.filter(Boolean).join(" ")})`;_H(s),e.push(s)}return e.join(" ")}function Ul(t,e,i){if(t[e]==null)throw new ce("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});return i?t[e]+i:""+t[e]}function Qwe(t,e){if(t[e]==null)throw new ce("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});const i=t[e];return`rgba(${i[0]||0}, ${i[1]||0}, ${i[2]||0}, ${i[3]/255||0})`}const e3e={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}},pA={read:{reader:Kwe},write:{allowNull:!0,writer:Zwe}},t3e={json:{read:!1,write:!1,origins:{"web-map":pA,"portal-item":pA}}},i3e=t=>{let e=class extends t{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return _([S(e3e)],e.prototype,"blendMode",void 0),_([S(t3e)],e.prototype,"effect",void 0),e=_([J("esri.layers.mixins.BlendLayer")],e),e},n3e=t=>{let e=class extends t{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const i={minScale:this.minScale,maxScale:this.maxScale},n=this.parent;n&&"effectiveScaleRange"in n&&r3e(i,n.effectiveScaleRange);const s=this._get("effectiveScaleRange");return s&&s.minScale===i.minScale&&s.maxScale===i.maxScale?s:i}};return _([S({type:Number,nonNullable:!0,json:{write:!0}})],e.prototype,"minScale",void 0),_([S({type:Number,nonNullable:!0,json:{write:!0}})],e.prototype,"maxScale",void 0),_([S({readOnly:!0})],e.prototype,"effectiveScaleRange",null),e=_([J("esri.layers.mixins.ScaleRangeLayer")],e),e};function r3e(t,e){return t.minScale=t.minScale>0?e.minScale>0?Math.min(t.minScale,e.minScale):t.minScale:e.minScale,t.maxScale=t.maxScale>0?e.maxScale>0?Math.max(t.maxScale,e.maxScale):t.maxScale:e.maxScale,t}var $6;let Tg=$6=class extends De{constructor(t){super(t)}async collectRequiredFields(t,e){return uu(t,e,this.expression)}clone(){return new $6({expression:this.expression,title:this.title})}equals(t){return this.expression===t.expression&&this.title===t.title}};_([S({type:String,json:{write:!0}})],Tg.prototype,"expression",void 0),_([S({type:String,json:{write:!0}})],Tg.prototype,"title",void 0),Tg=$6=_([J("esri.symbols.support.FeatureExpressionInfo")],Tg);const fA=Tg,GM={unknown:1,inches:oi(1,"meters","inches"),feet:oi(1,"meters","feet"),"us-feet":oi(1,"meters","us-feet"),yards:oi(1,"meters","yards"),miles:oi(1,"meters","miles"),"nautical-miles":oi(1,"meters","nautical-miles"),millimeters:oi(1,"meters","millimeters"),centimeters:oi(1,"meters","centimeters"),decimeters:oi(1,"meters","decimeters"),meters:oi(1,"meters","meters"),kilometers:oi(1,"meters","kilometers"),"decimal-degrees":1/YR(1,"meters",Ii.radius)};function HAe(t){return!!t&&GM[t]!=null}function s3e(t){return 1/(GM[t]||1)}function o3e(){const t=Object.keys(GM);return a3(t,"decimal-degrees"),t.sort(),t}const a3e=o3e();var k6;const Nv=Ar()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),gA=new xn({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let sc=k6=class extends De{constructor(t){super(t),this.offset=null}readFeatureExpressionInfo(t,e){return t??(e.featureExpression&&e.featureExpression.value===0?{expression:"0"}:void 0)}writeFeatureExpressionInfo(t,e,i,n){e[i]=t.write({},n),t.expression==="0"&&(e.featureExpression={value:0})}get mode(){const{offset:t,featureExpressionInfo:e}=this;return this._isOverridden("mode")?this._get("mode"):t!=null||e?"relative-to-ground":"on-the-ground"}set mode(t){this._override("mode",t)}set unit(t){this._set("unit",t)}write(t,e){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(t,e):null}clone(){return new k6({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(t){return this.mode===t.mode&&this.offset===t.offset&&this.unit===t.unit&&CP(this.featureExpressionInfo,t.featureExpressionInfo)}};_([S({type:fA,json:{write:!0}})],sc.prototype,"featureExpressionInfo",void 0),_([kt("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],sc.prototype,"readFeatureExpressionInfo",null),_([yt("featureExpressionInfo",{featureExpressionInfo:{type:fA},"featureExpression.value":{type:[0]}})],sc.prototype,"writeFeatureExpressionInfo",null),_([S({type:Nv.apiValues,nonNullable:!0,json:{type:Nv.jsonValues,read:Nv.read,write:{writer:Nv.write,isRequired:!0}}})],sc.prototype,"mode",null),_([S({type:Number,json:{write:!0}})],sc.prototype,"offset",void 0),_([S({type:a3e,json:{type:String,read:gA.read,write:gA.write}})],sc.prototype,"unit",null),sc=k6=_([J("esri.symbols.support.ElevationInfo")],sc);const l3e=sc;let oc=class extends i3e(n3e(OE)){constructor(e){super(e),this.elevationInfo=null,this.graphics=new zd,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(e){return this.graphics.add(e),this}addMany(e){return this.graphics.addMany(e),this}removeAll(){return this.graphics.removeAll(),this}remove(e){this.graphics.remove(e)}removeMany(e){this.graphics.removeMany(e)}on(e,i){return super.on(e,i)}graphicChanged(e){this.emit("graphic-update",e)}};_([S({type:l3e})],oc.prototype,"elevationInfo",void 0),_([S(p4(zd,"graphics"))],oc.prototype,"graphics",void 0),_([S({type:["show","hide"]})],oc.prototype,"listMode",void 0),_([S()],oc.prototype,"screenSizePerspectiveEnabled",void 0),_([S({readOnly:!0})],oc.prototype,"type",void 0),_([S({constructOnly:!0})],oc.prototype,"internal",void 0),oc=_([J("esri.layers.GraphicsLayer")],oc);const SH=oc;function mA(t){switch(t){case Qt.SUPPORTED:break;case Qt.GRAPHICS_LAYER_MISSING:return"not owned by a graphics layer";case Qt.GEOMETRY_MISSING:return"no geometry";case Qt.GEOMETRY_TYPE_UNSUPPORTED:return"the geometry type is not supported";case Qt.ELEVATION_MODE_UNSUPPORTED:return"the elevation mode is not supported";case Qt.SYMBOL_TYPE_UNSUPPORTED:return"the symbol type is not supported"}return""}var Qt;(function(t){t[t.SUPPORTED=0]="SUPPORTED",t[t.GRAPHICS_LAYER_MISSING=1]="GRAPHICS_LAYER_MISSING",t[t.GEOMETRY_MISSING=2]="GEOMETRY_MISSING",t[t.GEOMETRY_TYPE_UNSUPPORTED=3]="GEOMETRY_TYPE_UNSUPPORTED",t[t.ELEVATION_MODE_UNSUPPORTED=4]="ELEVATION_MODE_UNSUPPORTED",t[t.SYMBOL_TYPE_UNSUPPORTED=5]="SYMBOL_TYPE_UNSUPPORTED"})(Qt||(Qt={}));function TH(t){return t?vu:y3e}function c3e(t,e){return e!=null&&e.mode?e.mode:TH(t).mode}function EH(t,e){return e??TH(t)}function MH(t,e){return c3e(t==null||(t.hasZ??!1),e)}function qAe(t,e){return EH(t==null||(t.hasZ??!1),e)}function h3e(t){const e=$H(t);return MH(t.geometry,e)}function u3e(t){const e=$H(t),i=MH(t.geometry,e),n=e!=null&&i!=="on-the-ground"?m3e(e):0,s=e==null?void 0:e.featureExpressionInfo;return{mode:i,offset:n,featureExpressionInfo:s}}function d3e(t){return E_(u3e(t))}function WAe(t){return E_(t)||p3e(t)}function p3e(t){var e;return((e=t==null?void 0:t.featureExpressionInfo)==null?void 0:e.expression)==="0"}function E_(t){if(!t||t.mode==="on-the-ground")return!1;const e=t!=null&&t.featureExpressionInfo?t.featureExpressionInfo.expression:null;return!(!e||e==="0")}function $H(t){return t.layer&&"elevationInfo"in t.layer?t.layer.elevationInfo:null}function UM(t,e){if(!(t!=null&&t.offset))return 0;const{offset:i,unit:n}=t;if(n==="decimal-degrees")return 0;const s=n!=="unknown"&&n?n:"meters",h=iN(e);return h?oi(i,s,h):0}function qw(t,e,i){if(!(i!=null&&i.mode))return;const n=t.hasZ?t.z:0,s=UM(i,t.spatialReference);switch(i.mode){case"absolute-height":return n-s;case"on-the-ground":return 0;case"relative-to-ground":return n-((e.elevationProvider.getElevation(t.x,t.y,n,t.spatialReference,"ground")??0)+s);case"relative-to-scene":return n-((e.elevationProvider.getElevation(t.x,t.y,n,t.spatialReference,"scene")??0)+s)}}function BM(t,e,i,n=null){return M_(t,e.x,e.y,e.hasZ?e.z:0,e.spatialReference,i,n)}function kH(t,e,i,n,s=null){return M_(t,e[0],e[1],e.length>2?e[2]:0,i,n,s)}function M_(t,e,i,n,s,h,f=null){if(h==null)return;const m=f!=null?f.mode:"absolute-height";if(m==="on-the-ground")return 0;const{absoluteZ:y}=f3e(e,i,n,s,t,h);return g3e(y,e,i,n,s,t,f,m)}function f3e(t,e,i,n,s,h){const f=UM(h,n);switch(h.mode){case"absolute-height":return{absoluteZ:i+f,elevation:0};case"on-the-ground":{const m=s.elevationProvider.getElevation(t,e,0,n,"ground")??0;return{absoluteZ:m,elevation:m}}case"relative-to-ground":{const m=s.elevationProvider.getElevation(t,e,i,n,"ground")??0;return{absoluteZ:i+m+f,elevation:m}}case"relative-to-scene":{const m=s.elevationProvider.getElevation(t,e,i,n,"scene")??0;return{absoluteZ:i+m+f,elevation:m}}}}function g3e(t,e,i,n,s,h,f,m){const y=UM(f,s);switch(m){case"absolute-height":return t-y;case"relative-to-ground":return t-((h.elevationProvider.getElevation(e,i,n,s,"ground")??0)+y);case"relative-to-scene":return t-((h.elevationProvider.getElevation(e,i,n,s,"scene")??0)+y)}}function KAe(t,e){if(e==null)return!1;const{mode:i}=e;return i!=null&&(t==="scene"&&i==="relative-to-scene"||t==="ground"&&i!=="absolute-height")}function ZAe(t,e,i){return i&&i.mode!==e?`${t} only support ${e} elevation mode`:null}function JAe(t,e,i){return(i==null?void 0:i.mode)===e?`${t} do not support ${e} elevation mode`:null}function YAe(t,e){return(e==null?void 0:e.featureExpressionInfo)!=null&&e.featureExpressionInfo.expression!=="0"?`${t} do not support featureExpressionInfo`:null}function XAe(t,e){e&&t.warn(".elevationInfo=",e)}function m3e(t){return((t==null?void 0:t.offset)??0)*s3e(t==null?void 0:t.unit)}const vu={mode:"absolute-height",offset:0},y3e={mode:"on-the-ground",offset:null};function v3e(t){var n,s;if(t.graphic&&((n=t.graphic.layer)==null?void 0:n.type)!=="graphics")return Qt.GRAPHICS_LAYER_MISSING;const e=(s=t.operations)==null?void 0:s.data.type;if(!e)return Qt.GEOMETRY_TYPE_UNSUPPORTED;switch(e){case"polygon":case"point":case"polyline":case"mesh":break;default:return Qt.GEOMETRY_TYPE_UNSUPPORTED}const i=t.elevationInfo;return E_(i)?Qt.ELEVATION_MODE_UNSUPPORTED:Qt.SUPPORTED}function b3e(t){return w3e(t).result}function w3e(t){var n;if(t.graphic&&((n=t.graphic.layer)==null?void 0:n.type)!=="graphics")return{result:Qt.GRAPHICS_LAYER_MISSING};if(!t.operations)return{result:Qt.GEOMETRY_MISSING};if(E_(t.elevationInfo))return{result:Qt.ELEVATION_MODE_UNSUPPORTED};const e=t.operations.data.type,i=t.operations.data.geometry;return e==="point"||e==="mesh"||e==="polyline"||e==="polygon"?{result:Qt.SUPPORTED,geometry:i}:{result:Qt.GEOMETRY_TYPE_UNSUPPORTED}}function _3e(t){var i;if(((i=t.layer)==null?void 0:i.type)!=="graphics")return Qt.GRAPHICS_LAYER_MISSING;if(t.geometry==null)return Qt.GEOMETRY_MISSING;switch(t.geometry.type){case"point":break;case"polygon":case"polyline":case"multipoint":case"extent":case"mesh":return Qt.SUPPORTED;default:return Qt.GEOMETRY_TYPE_UNSUPPORTED}const e=t.symbol!=null&&t.symbol.type==="point-3d"&&t.symbol.symbolLayers;return!e||!e.some(n=>n.type==="object")?Qt.SYMBOL_TYPE_UNSUPPORTED:h3e(t)!=="on-the-ground"&&d3e(t)?Qt.ELEVATION_MODE_UNSUPPORTED:Qt.SUPPORTED}function yA(t,e,i){if(!e||!(t!=null&&t.map))return;const{map:n}=t;n.layers.find(h=>h===e)||n.add(e,i)}function vA(t,e){const i=(e==null?void 0:e.type)==="subtype-sublayer"?e.parent:e;return t.allLayerViews.find(n=>{const s=n.layer;return s===i||"sublayers"in s&&s.sublayers!=null&&s.sublayers.includes(i)})}const CH="z",IH="r",pi={redo:IH,undo:CH,center:"Alt",constraint:"Shift",cancel:"Escape",delete:["Backspace","Delete"],complete:"Enter",vertexAdd:"f",pan:" "},bA={toggle:"Control"},QAe={enterInputMode:"Tab",commit:"Enter",discard:"Escape",next:"Tab"},eOe={moveUp:{key:"ArrowUp",modifier:"Shift",repeats:!0},moveDown:{key:"ArrowDown",modifier:"Shift",repeats:!0},moveLeft:{key:"ArrowLeft",modifier:"Shift",repeats:!0},moveRight:{key:"ArrowRight",modifier:"Shift",repeats:!0},scaleUp:{key:"+",modifier:"Shift"},scaleDown:{key:"-",modifier:"Shift"},factorModifier:{key:YD,continuePropagation:!0},toggleOpacity:"t",preserveAspectRatio:{key:"Shift",continuePropagation:!0},rotateIncrements:{key:"Shift",continuePropagation:!0},undo:CH,redo:IH};let tOe=class{constructor(){this._bindings=new Map}add(e,i){return this.addToggle(e,n=>{n.type==="key-down"&&i(n)})}addToggle(e,i){const n=x3e.fromDefinition(e,i),s=p3(this._bindings,n.key,()=>[]);return s.push(n),ct(()=>a3(s,n))}register(e,i=Wt.WIDGET){return Dc([e.on("key-down",n=>this.dispatch(e.inputManager,n),i),e.on("key-up",n=>this.dispatch(e.inputManager,n),i)])}dispatch(e,i){const n=i.key,s=this._bindings.get(n);if(s)for(const h of s)h.process(e,i)}},x3e=class C6{constructor(e,i,n,s,h){this.key=e,this.modifiers=i,this.repeats=n,this.continuePropagation=s,this.callback=h}process(e,i){if(!(i.key!==this.key||"repeat"in i&&i.repeat&&!this.repeats)){for(const n of this.modifiers)if(!e.isModifierKeyDown(n))return;this.continuePropagation||i.stopPropagation(),this.callback(i)}}static fromDefinition(e,i){if(typeof e=="string")return new C6(e,[],!1,!1,i);const{key:n,modifier:s,repeats:h,continuePropagation:f}=e;return new C6(n,s?Array.isArray(s)?s:[s]:[],!!h,!!f,i)}},a2=class extends Oe{constructor(e){super(e),this.enabled=!1}};_([S({type:Boolean,nonNullable:!0})],a2.prototype,"enabled",void 0),a2=_([J("esri.views.interactive.sketch.SketchLabelOptions")],a2);const Iy=a2;let em=class extends Oe{constructor(e){super(e),this.mode="absolute-height"}toJSON(){return{mode:this.mode}}};_([S({type:String,nonNullable:!0})],em.prototype,"mode",void 0),em=_([J("esri.views.interactive.sketch.SketchTooltipElevationOptions")],em);let Xn=class extends Oe{constructor(e){super(e),this.area=!0,this.coordinates=!0,this.direction=!0,this.distance=!0,this.elevation=!0,this.header=!0,this.helpMessage=!1,this.orientation=!0,this.radius=!0,this.rotation=!0,this.scale=!0,this.size=!0,this.totalLength=!0}};_([S({type:Boolean,nonNullable:!0})],Xn.prototype,"area",void 0),_([S({type:Boolean,nonNullable:!0})],Xn.prototype,"coordinates",void 0),_([S({type:Boolean,nonNullable:!0})],Xn.prototype,"direction",void 0),_([S({type:Boolean,nonNullable:!0})],Xn.prototype,"distance",void 0),_([S({type:Boolean,nonNullable:!0})],Xn.prototype,"elevation",void 0),_([S({type:Boolean,nonNullable:!0})],Xn.prototype,"header",void 0),_([S({type:Boolean,nonNullable:!0})],Xn.prototype,"helpMessage",void 0),_([S({type:Boolean,nonNullable:!0})],Xn.prototype,"orientation",void 0),_([S({type:Boolean,nonNullable:!0})],Xn.prototype,"radius",void 0),_([S({type:Boolean,nonNullable:!0})],Xn.prototype,"rotation",void 0),_([S({type:Boolean,nonNullable:!0})],Xn.prototype,"scale",void 0),_([S({type:Boolean,nonNullable:!0})],Xn.prototype,"size",void 0),_([S({type:Boolean,nonNullable:!0})],Xn.prototype,"totalLength",void 0),Xn=_([J("esri.views.interactive.sketch.SketchTooltipVisibleElements")],Xn);const AH=Xn;let yr=class extends Oe{constructor(e){super(e),this.enabled=!1,this.forceEnabled=!1,this.helpMessage=null,this.helpMessageIcon=null,this.inputEnabled=!0,this.elevation=new em,this.placement="auto",this.offset=null,this.visibleElements=new AH,this.visualVariables=null,this.xyMode="auto"}get effectiveEnabled(){return this.forceEnabled||this.enabled}};_([S({type:Boolean,nonNullable:!0})],yr.prototype,"enabled",void 0),_([S()],yr.prototype,"forceEnabled",void 0),_([S()],yr.prototype,"effectiveEnabled",null),_([S()],yr.prototype,"helpMessage",void 0),_([S()],yr.prototype,"helpMessageIcon",void 0),_([S({type:Boolean,nonNullable:!0})],yr.prototype,"inputEnabled",void 0),_([S({type:em,nonNullable:!0})],yr.prototype,"elevation",void 0),_([S()],yr.prototype,"placement",void 0),_([S()],yr.prototype,"offset",void 0),_([S({type:AH,nonNullable:!0})],yr.prototype,"visibleElements",void 0),_([S()],yr.prototype,"visualVariables",void 0),_([S()],yr.prototype,"xyMode",void 0),yr=_([J("esri.views.interactive.sketch.SketchTooltipOptions")],yr);const HM=yr;let vf=class extends Oe{constructor(e){super(e),this.labels=new Iy,this.tooltips=new HM,this.values=new S_}};_([S({nonNullable:!0,type:Iy})],vf.prototype,"labels",void 0),_([S({nonNullable:!0,type:HM})],vf.prototype,"tooltips",void 0),_([S({nonNullable:!0,type:S_})],vf.prototype,"values",void 0),vf=_([J("esri.views.interactive.sketch.SketchOptions")],vf);const $_=vf;var ip;function OH(t,e,i){return Sn(t,e,i)}function Sn(t=0,e=0,i=0){return Mr(t,e,i)}function lOe(t){return t}function cOe(t){return t}function bu(t,e,i){return Mr(t,e,i)}function x0(t){const[e,i,n]=t;return t.length>3?[e,i,n,t[3]]:[e,i,n]}function dx(t){return t[3]=((t.length>3?t[3]:void 0)??ip.NONE)|ip.TARGET,t}function hOe(t){return!!(((t.length>3?t[3]:void 0)??ip.NONE)&ip.TARGET)}function wA(t,e,{coordinateHelper:i,elevationInfo:n},s){return t?Vh(i.vectorToDehydratedPoint(t,S3e),e,n,s):null}function Vh(t,e,i,n=Sn()){return n[0]=t.x,n[1]=t.y,n[2]=t.z??0,e==null||(e.type==="2d"?n[2]=0:n[2]=BM(e,t,i,vu)??0),n}function uOe(t,e,i){return i?(vH(i,t[0],t[1],t[2],e),i):Pl(t[0],t[1],t[2],e)}function I6(t,e,{z:i,m:n},s,h){const{spatialReference:f,elevationInfo:m}=s;let y;i==null&&n==null?y=void 0:e==null||e.type==="2d"?y=i??void 0:y=kH(e,t,f,vu,m)??0;const[x,E]=t;return h?vH(h,x,E,y,f):h=Pl(x,E,y,f),n!=null&&(h.m=n,h.hasM=!0),h}function dOe(t,e,i,n,s=Sn()){const[h,f]=t;return s[0]=h,s[1]=f,t.length>3&&(s[3]=t[3]??ip.NONE),(i==null?void 0:i.type)!=="3d"?(s[2]=e.value,s):(s[2]=M_(i,h,f,e.value,n,e.elevationInfo,vu)??0,s)}(function(t){t[t.NONE=0]="NONE",t[t.TARGET=1]="TARGET"})(ip||(ip={}));const S3e=Pl(0,0,0,null);let ea=class extends De{constructor(){super(...arguments),this.enabled=!0}};_([S({type:Boolean})],ea.prototype,"enabled",void 0),ea=_([J("esri.views.interactive.snapping.Settings.DefaultSnappingAlgorithm")],ea);let ui=class extends De{constructor(e){super(e),this.lineSnapper=new ea,this.parallelLineSnapper=new ea,this.rightAngleSnapper=new ea,this.rightAngleTriangleSnapper=new ea,this.shortLineThreshold=15,this.distance=5,this.pointThreshold=1e-6,this.intersectionParallelLineThreshold=1e-6,this.parallelLineThreshold=1e-6,this.verticalLineThresholdMeters=.3,this.touchSensitivityMultiplier=1.5,this.pointOnLineThreshold=1e-6,this.orange=new ht([255,127,0]),this.orangeTransparent=new ht([255,127,0,.5]),this.lineHintWidthReference=3,this.lineHintWidthTarget=3,this.lineHintFadedExtensions=.3,this.parallelLineHintWidth=2,this.parallelLineHintLength=24,this.parallelLineHintOffset=1.5,this.rightAngleHintSize=24,this.rightAngleHintOutlineSize=1.5,this.satisfiesConstraintScreenThreshold=1}};_([S({type:ea,constructOnly:!0,nonNullable:!0,json:{write:!0}})],ui.prototype,"lineSnapper",void 0),_([S({type:ea,constructOnly:!0,nonNullable:!0,json:{write:!0}})],ui.prototype,"parallelLineSnapper",void 0),_([S({type:ea,constructOnly:!0,nonNullable:!0,json:{write:!0}})],ui.prototype,"rightAngleSnapper",void 0),_([S({type:ea,constructOnly:!0,nonNullable:!0,json:{write:!0}})],ui.prototype,"rightAngleTriangleSnapper",void 0),_([S({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],ui.prototype,"shortLineThreshold",void 0),_([S({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],ui.prototype,"distance",void 0),_([S({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],ui.prototype,"pointThreshold",void 0),_([S({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],ui.prototype,"intersectionParallelLineThreshold",void 0),_([S({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],ui.prototype,"parallelLineThreshold",void 0),_([S({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],ui.prototype,"verticalLineThresholdMeters",void 0),_([S({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],ui.prototype,"touchSensitivityMultiplier",void 0),_([S({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],ui.prototype,"pointOnLineThreshold",void 0),_([S({type:ht,nonNullable:!0})],ui.prototype,"orange",void 0),_([S({type:ht,nonNullable:!0})],ui.prototype,"orangeTransparent",void 0),_([S({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],ui.prototype,"lineHintWidthReference",void 0),_([S({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],ui.prototype,"lineHintWidthTarget",void 0),_([S({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],ui.prototype,"lineHintFadedExtensions",void 0),_([S({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],ui.prototype,"parallelLineHintWidth",void 0),_([S({type:Number,nonNullable:!0,range:{min:0,max:50},json:{write:!0}})],ui.prototype,"parallelLineHintLength",void 0),_([S({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],ui.prototype,"parallelLineHintOffset",void 0),_([S({type:Number,nonNullable:!0,range:{min:0,max:46},json:{write:!0}})],ui.prototype,"rightAngleHintSize",void 0),_([S({type:Number,nonNullable:!0,range:{min:0,max:6},json:{write:!0}})],ui.prototype,"rightAngleHintOutlineSize",void 0),_([S({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],ui.prototype,"satisfiesConstraintScreenThreshold",void 0),ui=_([J("esri.views.interactive.snapping.Settings.Defaults")],ui);const Ww=new ui;var lr;(function(t){t[t.FEATURE=1]="FEATURE",t[t.SELF=2]="SELF",t[t.ALL=3]="ALL"})(lr||(lr={}));let Eh=class extends Oe{constructor(e){super(e),this.layer=null,this.enabled=!0,this.updating=!1,this.availability=1,this.sublayerSources=new Pe}};_([S({constructOnly:!0})],Eh.prototype,"layer",void 0),_([S()],Eh.prototype,"enabled",void 0),_([S()],Eh.prototype,"updating",void 0),_([S()],Eh.prototype,"availability",void 0),_([S()],Eh.prototype,"sublayerSources",void 0),Eh=_([J("esri.views.interactive.snapping.FeatureSnappingLayerSource")],Eh);const VM=Eh;let Mn=class extends Oe{constructor(e){super(e),this.enabled=!1,this.enabledToggled=!1,this.forceDisabled=!1,this.selfEnabled=!0,this.featureEnabled=!0,this.gridEnabled=!1,this.attributeRulesEnabled=!1,this.featureSources=new Pe,this.distance=Ww.distance,this.touchSensitivityMultiplier=Ww.touchSensitivityMultiplier}get effectiveEnabled(){return!this.forceDisabled&&(this.enabledToggled?!this.enabled:this.enabled)}get effectiveGridEnabled(){return this.effectiveEnabled&&this.gridEnabled}get effectiveSelfEnabled(){return this.effectiveEnabled&&this.selfEnabled}get effectiveFeatureEnabled(){return this.effectiveEnabled&&this.featureEnabled}get _effectiveFeatureSources(){var y;const e=this.featureSources;e.some(_A)&&Ae.getLogger(this).warnOnce("Do not configure SubtypeGroupLayer sources in SnappingOptions.featureSources directly. Create a FeatureSnappingLayerSource for each SubtypeSublayer.");const i=e.filter(E3e),n=((y=this._get("_effectiveFeatureSources"))==null?void 0:y.filter(_A))??new Pe;for(const x of i){const E=n.find(k=>k.layer===x.layer.parent);if(E)E.sublayerSources.includes(x)||E.sublayerSources.add(x);else if(x.layer.parent){const k=new VM({layer:x.layer.parent});k.sublayerSources.add(x),n.add(k)}}for(const x of n){const E=x.sublayerSources.filter(k=>!i.includes(k));x.sublayerSources.removeMany(E)}n.removeMany(n.filter(x=>x.sublayerSources.length===0));const s=e.filter(T3e),h=this._get("_effectiveFeatureSources")??new Pe,{added:f,removed:m}=Bx(h.toArray(),[...s,...n]);return h.removeMany(m),h.addMany(f),h}};_([S()],Mn.prototype,"enabled",void 0),_([S()],Mn.prototype,"enabledToggled",void 0),_([S()],Mn.prototype,"forceDisabled",void 0),_([S()],Mn.prototype,"selfEnabled",void 0),_([S()],Mn.prototype,"featureEnabled",void 0),_([S()],Mn.prototype,"gridEnabled",void 0),_([S()],Mn.prototype,"attributeRulesEnabled",void 0),_([S({type:Pe.ofType(VM)})],Mn.prototype,"featureSources",void 0),_([S()],Mn.prototype,"distance",void 0),_([S()],Mn.prototype,"touchSensitivityMultiplier",void 0),_([S({readOnly:!0})],Mn.prototype,"effectiveEnabled",null),_([S({readOnly:!0})],Mn.prototype,"effectiveGridEnabled",null),_([S({readOnly:!0})],Mn.prototype,"effectiveSelfEnabled",null),_([S({readOnly:!0})],Mn.prototype,"effectiveFeatureEnabled",null),_([S({readOnly:!0})],Mn.prototype,"_effectiveFeatureSources",null),Mn=_([J("esri.views.interactive.snapping.SnappingOptions")],Mn);const Ay=Mn;function _A(t){return t.layer.type==="subtype-group"}function T3e(t){return t.layer.type!=="subtype-group"}function E3e(t){return t.layer.type==="subtype-sublayer"}const yOe=Symbol("grid-placement-graphic");function PH(t,e){const i=t.x-e.x,n=t.y-e.y;return i*i+n*n}function vOe(t,e){return Math.sqrt(PH(t,e))}function M3e(t,e){e.sort((i,n)=>m0(i.targetPoint,t)-m0(n.targetPoint,t))}var yo;function bOe({point:t,distance:e,returnEdge:i,vertexMode:n,coordinateHelper:{spatialReference:s},filter:h},f,m){return m=m!=null?m.clone():new NS({where:"1=1"}),h&&(m.geometry=h.geometry,m.distance=h.distance,m.spatialRelationship=h.spatialRelationship,m.where=dae(m.where,h.where),m.timeExtent=rae(m.timeExtent,h.timeExtent),m.objectIds=$3e(m.objectIds,h.objectIds)),{point:Pl(t[0],t[1],t[2],s.toJSON()),mode:f,distance:e,returnEdge:i,vertexMode:n,query:m.toJSON()}}function $3e(t,e){return t||e?e?t?Array.from(eR(new Set(t),new Set(e))):e:t:null}function wOe(t,e,i){return{left:wA(t.leftVertex.pos,e,i),right:wA(t.rightVertex.pos,e,i)}}function _Oe(t){return t.createQuery()}(function(t){t[t.TARGET=0]="TARGET",t[t.REFERENCE=1]="REFERENCE",t[t.REFERENCE_EXTENSION=2]="REFERENCE_EXTENSION"})(yo||(yo={}));const xA=Symbol("snapping-toggle");function RH(t,e=()=>{}){const i=Ee(()=>({view:t.view,snappingOptions:t.snappingOptions}),({view:n,snappingOptions:s})=>{if(t.removeHandles(xA),!n||!s)return;const h=Wt.TOOL,f=[n.on("key-down",m=>{m.key!==bA.toggle||m.repeat||(s.enabledToggled=!0,e())},h),n.on("key-up",m=>{m.key===bA.toggle&&(s.enabledToggled=!1,e())},h),n.on("pointer-move",m=>{const y=m.native.ctrlKey;s.enabledToggled!==y&&(s.enabledToggled=y,e())},h)];t.addHandles(f,xA)},Pi);t.addHandles(i)}function xOe(t){var e;return t2(t)&&"utilityNetworks"in t&&!!((e=t.utilityNetworks)!=null&&e.length)}function S0(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function k3e(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function qM(t,e,i,n,s){return t[0]=e,t[1]=i,t[2]=n,t[3]=s,t}function NH(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t}function LH(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t}function DH(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t[3]=e[3]*i[3],t}function zH(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t[3]=e[3]/i[3],t}function C3e(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function I3e(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function A3e(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t[3]=Math.min(e[3],i[3]),t}function O3e(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t[3]=Math.max(e[3],i[3]),t}function P3e(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function FH(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t}function R3e(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t[3]=e[3]+i[3]*n,t}function jH(t,e){const i=e[0]-t[0],n=e[1]-t[1],s=e[2]-t[2],h=e[3]-t[3];return Math.sqrt(i*i+n*n+s*s+h*h)}function GH(t,e){const i=e[0]-t[0],n=e[1]-t[1],s=e[2]-t[2],h=e[3]-t[3];return i*i+n*n+s*s+h*h}function WM(t){const e=t[0],i=t[1],n=t[2],s=t[3];return Math.sqrt(e*e+i*i+n*n+s*s)}function KM(t){const e=t[0],i=t[1],n=t[2],s=t[3];return e*e+i*i+n*n+s*s}function N3e(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function L3e(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function UH(t,e){const i=e[0],n=e[1],s=e[2],h=e[3];let f=i*i+n*n+s*s+h*h;return f>0&&(f=1/Math.sqrt(f),t[0]=i*f,t[1]=n*f,t[2]=s*f,t[3]=h*f),t}function ZM(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function JM(t,e,i,n){const s=e[0],h=e[1],f=e[2],m=e[3];return t[0]=s+n*(i[0]-s),t[1]=h+n*(i[1]-h),t[2]=f+n*(i[2]-f),t[3]=m+n*(i[3]-m),t}function D3e(t,e=1){const i=hy;let n,s,h,f,m,y;do n=2*i()-1,s=2*i()-1,m=n*n+s*s;while(m>=1);do h=2*i()-1,f=2*i()-1,y=h*h+f*f;while(y>=1);const x=Math.sqrt((1-m)/y);return t[0]=e*n,t[1]=e*s,t[2]=e*h*x,t[3]=e*f*x,t}function z3e(t,e,i){const n=e[0],s=e[1],h=e[2],f=e[3];return t[0]=i[0]*n+i[4]*s+i[8]*h+i[12]*f,t[1]=i[1]*n+i[5]*s+i[9]*h+i[13]*f,t[2]=i[2]*n+i[6]*s+i[10]*h+i[14]*f,t[3]=i[3]*n+i[7]*s+i[11]*h+i[15]*f,t}function F3e(t,e,i){const n=e[0],s=e[1],h=e[2],f=i[0],m=i[1],y=i[2],x=i[3],E=x*n+m*h-y*s,k=x*s+y*n-f*h,I=x*h+f*s-m*n,P=-f*n-m*s-y*h;return t[0]=E*x+P*-f+k*-y-I*-m,t[1]=k*x+P*-m+I*-f-E*-y,t[2]=I*x+P*-y+E*-m-k*-f,t[3]=e[3],t}function j3e(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function BH(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function Oy(t,e){const i=t[0],n=t[1],s=t[2],h=t[3],f=e[0],m=e[1],y=e[2],x=e[3],E=Ni();return Math.abs(i-f)<=E*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(n-m)<=E*Math.max(1,Math.abs(n),Math.abs(m))&&Math.abs(s-y)<=E*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(h-x)<=E*Math.max(1,Math.abs(h),Math.abs(x))}const G3e=LH,U3e=DH,B3e=zH,H3e=jH,V3e=GH,q3e=WM,W3e=KM;Object.freeze(Object.defineProperty({__proto__:null,add:NH,ceil:C3e,copy:S0,copyVec3:k3e,dist:H3e,distance:jH,div:B3e,divide:zH,dot:ZM,equals:Oy,exactEquals:BH,floor:I3e,inverse:L3e,len:q3e,length:WM,lerp:JM,max:O3e,min:A3e,mul:U3e,multiply:DH,negate:N3e,normalize:UH,random:D3e,round:P3e,scale:FH,scaleAndAdd:R3e,set:qM,sqrDist:V3e,sqrLen:W3e,squaredDistance:GH,squaredLength:KM,str:j3e,sub:G3e,subtract:LH,transformMat4:z3e,transformQuat:F3e},Symbol.toStringTag,{value:"Module"}));function Mu(){return[0,0,0,0]}function K3e(t){return[t[0],t[1],t[2],t[3]]}function la(t,e,i,n){return[t,e,i,n]}function Z3e(t,e,i,n){return[t,e,i,n]}function HH(t,e=Mu()){const i=Math.min(4,t.length);for(let n=0;n<i;++n)e[n]=t[n];return e}function J3e(t,e){return new Float64Array(t,e,4)}function VH(){return Mu()}function qH(){return la(1,1,1,1)}function WH(){return la(1,0,0,0)}function KH(){return la(0,1,0,0)}function ZH(){return la(0,0,1,0)}function JH(){return la(0,0,0,1)}const Y3e=VH(),X3e=qH(),Q3e=WH(),e_e=KH(),t_e=ZH(),i_e=JH();Object.freeze(Object.defineProperty({__proto__:null,ONES:X3e,UNIT_W:i_e,UNIT_X:Q3e,UNIT_Y:e_e,UNIT_Z:t_e,ZEROS:Y3e,clone:K3e,create:Mu,createView:J3e,freeze:Z3e,fromArray:HH,fromValues:la,ones:qH,unitW:JH,unitX:WH,unitY:KH,unitZ:ZH,zeros:VH},Symbol.toStringTag,{value:"Module"}));function SOe(t,e,i){const n=vt(t,e)/vt(t,t);return Cr(i,t,n)}function tm(t,e){return vt(t,e)/fa(t)}function YH(t,e){const i=vt(t,e)/(fa(t)*fa(e));return-HT(i)}function TOe(t,e,i){wn(Lv,t),wn(px,e);const n=vt(Lv,px),s=HT(n),h=Zi(Lv,Lv,px);return vt(h,i)<0?2*Math.PI-s:s}const Lv=Te(),px=Te();function k_(){return[1,0,0,0,1,0,0,0,1]}function n_e(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]}function r_e(t,e,i,n,s,h,f,m,y){return[t,e,i,n,s,h,f,m,y]}function s_e(t,e){return new Float64Array(t,e,9)}const o_e=k_();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:o_e,clone:n_e,create:k_,createView:s_e,fromValues:r_e},Symbol.toStringTag,{value:"Module"}));function YM(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function a_e(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}function l_e(t,e,i,n,s,h,f,m,y,x,E,k,I,P,L,D){return[t,e,i,n,s,h,f,m,y,x,E,k,I,P,L,D]}function c_e(t,e){return new Float64Array(t,e,16)}const h_e=YM();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:h_e,clone:a_e,create:YM,createView:c_e,fromValues:l_e},Symbol.toStringTag,{value:"Module"}));function np(){return[0,0,0,1]}function u_e(t){return[t[0],t[1],t[2],t[3]]}function d_e(t,e,i,n){return[t,e,i,n]}const p_e=np();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:p_e,clone:u_e,create:np,fromValues:d_e},Symbol.toStringTag,{value:"Module"}));let K0=class pd{constructor(e){this._create=e,this._items=new Array,this._itemsPtr=0}get(){return this._itemsPtr===0&&Yf(()=>this._reset()),this._itemsPtr>=this._items.length&&this._items.push(this._create()),this._items[this._itemsPtr++]}_reset(){const e=2*this._itemsPtr;this._items.length>e&&(this._items.length=e),this._itemsPtr=0}static createVec2f64(){return new pd(at)}static createVec3f64(){return new pd(Te)}static createVec4f64(){return new pd(Mu)}static createMat3f64(){return new pd(k_)}static createMat4f64(){return new pd(YM)}static createQuatf64(){return new pd(np)}get test(){}};const EOe=K0.createVec2f64(),Cn=K0.createVec3f64(),f_e=K0.createVec4f64();K0.createMat3f64();const g_e=K0.createMat4f64(),MOe=K0.createQuatf64();function $Oe(t){const e=t[0]*t[0]+t[4]*t[4]+t[8]*t[8],i=t[1]*t[1]+t[5]*t[5]+t[9]*t[9],n=t[2]*t[2]+t[6]*t[6]+t[10]*t[10];return Math.sqrt(Math.max(e,i,n))}function kOe(t,e){const i=Math.sqrt(e[0]*e[0]+e[4]*e[4]+e[8]*e[8]),n=Math.sqrt(e[1]*e[1]+e[5]*e[5]+e[9]*e[9]),s=Math.sqrt(e[2]*e[2]+e[6]*e[6]+e[10]*e[10]);return vi(t,i,n,s),t}function XM(t,e,i){Math.abs(t[0])>Math.abs(t[1])?vi(e,0,1,0):vi(e,1,0,0),Zi(i,t,e),Zi(e,i,t),wn(i,i),wn(e,e)}function dr(t=Eg){return[t[0],t[1],t[2],t[3]]}function COe(t=Eg[0],e=Eg[1],i=Eg[2],n=Eg[3]){return XH(t,e,i,n,f_e.get())}function l2(t,e){return XH(e[0],e[1],e[2],e[3],t)}function IOe(t){return t}function XH(t,e,i,n,s=dr()){return s[0]=t,s[1]=e,s[2]=i,s[3]=n,s}function Z0(t,e,i){const n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],s=Math.abs(n-1)>1e-5&&n>1e-12?1/Math.sqrt(n):1;return i[0]=e[0]*s,i[1]=e[1]*s,i[2]=e[2]*s,i[3]=-(i[0]*t[0]+i[1]*t[1]+i[2]*t[2]),i}function QH(t,e,i,n=dr()){const s=i[0]-e[0],h=i[1]-e[1],f=i[2]-e[2],m=t[0]-e[0],y=t[1]-e[1],x=t[2]-e[2],E=h*x-f*y,k=f*m-s*x,I=s*y-h*m,P=E*E+k*k+I*I,L=Math.abs(P-1)>1e-5&&P>1e-12?1/Math.sqrt(P):1;return n[0]=E*L,n[1]=k*L,n[2]=I*L,n[3]=-(n[0]*t[0]+n[1]*t[1]+n[2]*t[2]),n}function eV(t,e,i,n=0,s=Math.floor(i*(1/3)),h=Math.floor(i*(2/3))){if(i<3)return!1;e(S1,n);let f=s,m=!1;for(;f<i-1&&!m;)e(zp,f),f++,m=!Zt(S1,zp);if(!m)return!1;for(f=Math.max(f,h),m=!1;f<i&&!m;)e(Sd,f),f++,Ei(Dv,S1,zp),wn(Dv,Dv),Ei(zv,zp,Sd),wn(zv,zv),m=!Zt(S1,Sd)&&!Zt(zp,Sd)&&Math.abs(vt(Dv,zv))<m_e;return m?(QH(S1,zp,Sd,t),!0):(n!==0||s!==1||h!==2)&&eV(t,e,i,0,1,2)}function AOe(t,e,i=!0){const n=e.length/3;return eV(t,(s,h)=>vi(s,e[3*h+0],e[3*h+1],e[3*h+2]),i?n-1:n)}const m_e=.99619469809,S1=Te(),zp=Te(),Sd=Te(),Dv=Te(),zv=Te();function OOe(t,e,i){return e!==t&&l2(t,e),t[3]=-vt(t,i),t}function POe(t,e){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function ROe(t,e,i,n){return Zi(Sd,e,t),Z0(i,Sd,n)}function QM(t,e,i,n){return C_(I_(t,e,Ei(Cn.get(),i,e),v_e,n))}function NOe(t,e,i){return e!=null&&C_(I_(t,e.origin,e.direction,b_e,i))}function LOe(t,e,i){return C_(I_(t,e.origin,e.vector,hl.NONE,i))}function DOe(t,e,i){return C_(I_(t,e.origin,e.vector,hl.CLAMP,i))}function tV(t,e){return nl(t,e)>=0}function zOe(t,e){const i=vt(t,e.ray.direction),n=-nl(t,e.ray.origin);if(i>-1e-6&&i<1e-6)return n>0;const s=n/i;return i>0?s<e.c1&&(e.c1=s):s>e.c0&&(e.c0=s),e.c0<=e.c1}function e7(t,e,i){const n=Cr(Cn.get(),t,-t[3]),s=y_e(t,Ei(Cn.get(),e,n),Cn.get());return xr(i,s,n),i}function FOe(t,e,i,n){const s=t,h=Cn.get(),f=Cn.get();XM(s,h,f);const m=Ei(Cn.get(),i,e),y=tm(h,m),x=tm(f,m),E=tm(s,m);return vi(n,y,x,E)}function y_e(t,e,i){const n=Cr(Cn.get(),t,vt(t,e));return Ei(i,e,n),i}function A6(t,e){return Math.abs(nl(t,e))}function nl(t,e){return vt(t,e)+t[3]}var tl;function C_(t){return t===tl.INTERSECTS_INSIDE_OUT||t===tl.INTERSECTS_OUTSIDE_IN}function I_(t,e,i,n,s){const h=vt(t,i),f=nl(t,e);if(h===0)return f>=0?tl.INSIDE:tl.OUTSIDE;let m=-f/h;return n&hl.CLAMP&&(m=hr(m,0,1)),!(n&hl.INFINITE_MIN)&&m<0||!(n&hl.INFINITE_MAX)&&m>1?f>=0?tl.INSIDE:tl.OUTSIDE:(xr(s,e,Cr(s,i,m)),f>=0?tl.INTERSECTS_INSIDE_OUT:tl.INTERSECTS_OUTSIDE_IN)}(function(t){t[t.INTERSECTS_INSIDE_OUT=0]="INTERSECTS_INSIDE_OUT",t[t.INTERSECTS_OUTSIDE_IN=1]="INTERSECTS_OUTSIDE_IN",t[t.INSIDE=2]="INSIDE",t[t.OUTSIDE=3]="OUTSIDE"})(tl||(tl={}));const Eg=[0,0,1,0];var hl;(function(t){t[t.NONE=0]="NONE",t[t.CLAMP=1]="CLAMP",t[t.INFINITE_MIN=4]="INFINITE_MIN",t[t.INFINITE_MAX=8]="INFINITE_MAX"})(hl||(hl={}));const v_e=hl.INFINITE_MIN|hl.INFINITE_MAX,b_e=hl.INFINITE_MAX;let w_e=class{constructor(e){this._allocator=e,this._items=[],this._itemsPtr=0,this._grow()}get(){return this._itemsPtr===0&&Yf(()=>this._reset()),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const e=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*SA);this._items.length=Math.min(e,this._items.length),this._itemsPtr=0}_grow(){for(let e=0;e<Math.max(8,Math.min(this._items.length,SA));e++)this._items.push(this._allocator())}};const SA=1024;function A_(t){return t?TA(Xr(t.origin),Xr(t.direction)):TA(Te(),Te())}function TA(t,e){return{origin:t,direction:e}}function GOe(t,e){const i=T_e.get();return i.origin=t,i.direction=e,i}function UOe(t,e=A_()){return x_e(t.origin,t.direction,e)}function __e(t,e,i=A_()){return Er(i.origin,t),Ei(i.direction,e,t),i}function x_e(t,e,i=A_()){return Er(i.origin,t),Er(i.direction,e),i}function BOe(t,e){const i=Zi(Cn.get(),wn(Cn.get(),t.direction),Ei(Cn.get(),e,t.origin));return vt(i,i)}function S_e(t,e,i){const n=vt(t.direction,Ei(i,e,t.origin));return xr(i,t.origin,Cr(i,t.direction,n)),i}const T_e=new w_e(()=>A_());function EA(t,e){const i=fa(t),n=VT(t[2]/i),s=Math.atan2(t[1]/i,t[0]/i);return vi(e,i,n,s),e}const E_e=t7();function t7(){return Mu()}const iV=Oy,M_e=Oy;function nV(t,e){return S0(e,t)}function rV(t,e){return la(t[0],t[1],t[2],e)}function $_e(t){return t}function k_e(t){t[0]=t[1]=t[2]=t[3]=0}function C_e(t,e){return t[0]=t[1]=t[2]=0,t[3]=e,t}function Py(t){return t[3]}function I_e(t){return t}function A_e(t,e,i,n){return la(t,e,i,n)}function O_e(t,e,i){return t!==i&&(i[0]=t[0],i[1]=t[1],i[2]=t[2]),i[3]=t[3]+e,i}function P_e(t,e,i){return t!==i&&nV(t,i),i}function R_e(t,e){return e}function O_(t,e,i){if(e==null||!oV(t,e,Kw))return!1;let{t0:n,t1:s}=Kw;if((n<0||s<n&&s>0)&&(n=s),n<0)return!1;if(i){const{origin:h,direction:f}=e;i[0]=h[0]+f[0]*n,i[1]=h[1]+f[1]*n,i[2]=h[2]+f[2]*n}return!0}function sV(t,e,i){const n=__e(e,i);if(!oV(t,n,Kw))return[];const{origin:s,direction:h}=n,{t0:f,t1:m}=Kw,y=x=>{const E=Te();return kn(E,s,h,x),P_(t,E,E)};return Math.abs(f-m)<Ni()?[y(f)]:[y(f),y(m)]}const Kw={t0:0,t1:0};function oV(t,e,i){const{origin:n,direction:s}=e,h=N_e;h[0]=n[0]-t[0],h[1]=n[1]-t[1],h[2]=n[2]-t[2];const f=s[0]*s[0]+s[1]*s[1]+s[2]*s[2];if(f===0)return!1;const m=2*(s[0]*h[0]+s[1]*h[1]+s[2]*h[2]),y=m*m-4*f*(h[0]*h[0]+h[1]*h[1]+h[2]*h[2]-t[3]*t[3]);if(y<0)return!1;const x=Math.sqrt(y);return i.t0=(-m-x)/(2*f),i.t1=(-m+x)/(2*f),!0}const N_e=Te();function L_e(t,e){return O_(t,e,null)}function D_e(t,e,i){if(O_(t,e,i))return i;const n=aV(t,e,Cn.get());return xr(i,e.origin,Cr(Cn.get(),e.direction,Su(e.origin,n)/fa(e.direction))),i}function aV(t,e,i){const n=Cn.get(),s=g_e.get();Zi(n,e.origin,e.direction);const h=Py(t);Zi(i,n,e.origin),Cr(i,i,1/fa(i)*h);const f=lV(t,e.origin),m=YH(e.origin,i);return bz(s,m+f,n),uG(i,i,s),i}function z_e(t,e,i,n){const s=Py(t),h=s*s,f=e+.5*Math.PI,m=i*i+h-2*Math.cos(f)*i*s,y=Math.sqrt(m),x=m-h;if(x<=0)return .5;const E=Math.sqrt(x),k=Math.acos(E/y)-Math.asin(s/(y/Math.sin(f)));return Math.min(1,(k+.5*n)/n)}function F_e(t,e,i){return O_(t,e,i)?i:(S_e(e,t,i),P_(t,i,i))}function P_(t,e,i){const n=Ei(Cn.get(),e,t),s=Cr(Cn.get(),n,t[3]/fa(n));return xr(i,s,t)}function j_e(t,e){const i=Ei(Cn.get(),e,t),n=c_(i),s=t[3]*t[3];return Math.sqrt(Math.abs(n-s))}function lV(t,e){const i=Ei(Cn.get(),e,t),n=fa(i),s=Py(t),h=s+Math.abs(s-n);return HT(s/h)}const fx=Te();function cV(t,e,i,n){const s=Ei(fx,e,t);switch(i){case ia.X:{const h=EA(s,fx)[2];return vi(n,-Math.sin(h),Math.cos(h),0)}case ia.Y:{const h=EA(s,fx),f=h[1],m=h[2],y=Math.sin(f);return vi(n,-y*Math.cos(m),-y*Math.sin(m),Math.cos(f))}case ia.Z:return wn(n,s);default:return}}function hV(t,e){const i=Ei(O6,e,t);return fa(i)-t[3]}function G_e(t,e,i,n){const s=hV(t,e),h=cV(t,e,ia.Z,O6),f=Cr(O6,h,i-s);return xr(n,e,f)}function U_e(t,e){const i=m0(t,e),n=Py(t);return i<=n*n}function B_e(t,e,i=Mu()){const n=Su(t,e),s=t[3],h=e[3];return n+h<s?(S0(i,t),i):n+s<h?(S0(i,e),i):(H0(i,t,e,(n+h-s)/(2*n)),i[3]=(n+s+h)/2,i)}const O6=Te(),H_e=t7(),HOe=Object.freeze(Object.defineProperty({__proto__:null,NullSphere:E_e,altitudeAt:hV,angleToSilhouette:lV,axisAt:cV,cameraFrustumCoverage:z_e,clear:k_e,closestPoint:F_e,closestPointOnSilhouette:aV,containsPoint:U_e,copy:nV,create:t7,distanceToSilhouette:j_e,elevate:O_e,equals:M_e,exactEquals:iV,fromCenterAndRadius:rV,fromRadius:C_e,fromValues:A_e,getCenter:I_e,getExtent:R_e,getRadius:Py,intersectLine:sV,intersectRay:O_,intersectRayClosestSilhouette:D_e,intersectsRay:L_e,projectPoint:P_,setAltitudeAt:G_e,setExtent:P_e,tmpSphere:H_e,union:B_e,wrap:$_e},Symbol.toStringTag,{value:"Module"}));function gx(t,e){return t[0]*e[1]-t[1]*e[0]}function V_e(t,e,i){const n=Gc(i,e)/Rc(i);return U0(t,i,n)}function VOe(t,e,i,n,s=i){return Vi(Bd,n,i),Vi(Zw,e,s),V_e(T0,Zw,Bd),JE(t,s,T0)}function qOe(t,e,i,n){Vi(Bd,e,i);const s=n/f0(Bd);return sa(t,i,Bd,s)}function q_e(t,e){const i=t.start,n=t.end,s=e.start,h=e.end,f=Vi(Bd,n,i),m=Vi(uV,h,s),y=gx(f,m);if(Math.abs(y)<=K_e)return[];const x=Vi(Zw,i,s),E=gx(m,x)/y,k=gx(f,x)/y;if(E>=0){if(k>=0||e.type===yi.LINE)return[sa(T0,i,f,E)]}else if(t.type===yi.LINE&&(k>=0||e.type===yi.LINE))return[sa(T0,i,f,E)];return[]}function W_e(t,e,i){const n=[],s=Vi(Bd,t.end,t.start),h=Vi(uV,t.start,e),f=Rc(s),m=2*Gc(s,h),y=m*m-4*f*(Rc(h)-i*i);if(y===0){const x=-m/(2*f);(t.type===yi.LINE||x>=0)&&n.push(sa(T0,t.start,s,x))}else if(y>0){const x=Math.sqrt(y),E=(-m+x)/(2*f);(t.type===yi.LINE||E>=0)&&n.push(sa(T0,t.start,s,E));const k=(-m-x)/(2*f);(t.type===yi.LINE||k>=0)&&n.push(sa(Zw,t.start,s,k))}return n}var yi;(function(t){t[t.RAY=0]="RAY",t[t.LINE=1]="LINE"})(yi||(yi={}));const K_e=1e-6,Bd=at(),uV=at(),Zw=at(),T0=at();function i7({start:t,end:e,type:i},n,s){const h=[],f=Vi(Ry,e,t),m=Vi(R_,t,n),y=Rc(f),x=2*Gc(f,m),E=x*x-4*y*(Rc(m)-s*s);if(E===0){const k=-x/(2*y);(i===Os.PLANE||k>=0)&&h.push(sa(at(),t,f,k))}else if(E>0){const k=Math.sqrt(E),I=(-x+k)/(2*y);(i===Os.PLANE||I>=0)&&h.push(sa(at(),t,f,I));const P=(-x-k)/(2*y);(i===Os.PLANE||P>=0)&&h.push(sa(at(),t,f,P))}return h}function dV(t,e){const i=t.start,n=t.end,s=Vi(Ry,n,i),h=vi(L_,-s[1],s[0],0),f=e.start,m=e.end,y=Wr(r7,m,f),x=vt(y,h),E=vi(wV,i[0],i[1],0),k=Wr(_V,E,f),I=vt(k,h),P=Ni();if(Math.abs(x)<P)return[];const L=kn(xV,f,y,I/x);if(e.type===yi.RAY){const D=Wr(P6,L,f);if(vt(D,y)<-P)return[]}if(t.type===Os.HALF_PLANE){const D=t_(R_,L,i);if(Gc(D,s)<-P)return[]}return[Xr(L)]}function Z_e(t,e){return Y_e(Jw(s7,e[2],t),e)}function pV(t,e){return vV(Jw(s7,0,t),Jw(t5e,0,e)).map(([n,s])=>Is(n,s))}function fV(t,e,i){return mV(t,Jw(s7,t[2],e),i)}function gV(t,e,i,n=Te()){const s=Vi(Ry,t,e),h=f0(s);return sa(n,e,s,h===0?1:i/h),n[2]=t[2],n}function mV(t,{start:e,end:i,type:n},s=Te()){const h=Wr(N_,t,e),f=Wr(L_,i,e),m=vt(h,f)/vt(f,f);return kn(s,e,f,n===yi.RAY?Math.max(m,0):m)}const J_e=(()=>{const t=Te(),e=Te(),i=Te();return({start:n,end:s},{center:h,radius:f,normal:m,slicePlane:y})=>{const x=Z0(h,m,e5e);if(ai(A6(x,n),0)&&ai(A6(x,s),0)){XM(m,t,e);const k=(L,D)=>(Ei(i,D,h),sn(L,vt(i,t),vt(i,e)),L),I=W_e({start:k(Ry,n),end:k(R_,s),type:yi.LINE},fj,f),P=[];for(const[L,D]of I){const j=Er(Te(),h);kn(j,j,t,L),kn(j,j,e,D),y&&!eu(y,j)||P.push(j)}return P}const E=Te();return QM(x,n,s,E)?!ai(Su(E,h),f)||y&&!eu(y,E)?[]:[E]:[]}})();function yV({start:t,end:e,type:i},n,s){const h=[],f=Ei(N_,e,t),m=Vi(R_,t,n),y=Rc(f),x=2*Gc(f,m),E=x*x-4*y*(Rc(m)-s*s);if(E===0){const k=-x/(2*y);(i===yi.LINE||k>=0)&&h.push(kn(Te(),t,f,k))}else if(E>0){const k=Math.sqrt(E),I=(-x+k)/(2*y);(i===yi.LINE||I>=0)&&h.push(kn(Te(),t,f,I));const P=(-x-k)/(2*y);(i===yi.LINE||P>=0)&&h.push(kn(Te(),t,f,P))}return h}function vV(t,e){const i=t.start,n=t.end,s=e.start,h=e.end,f=Wr(N_,n,i),m=Wr(L_,h,s),y=Wr(r7,s,i),x=Zi(wV,f,m);if(!ai(vt(y,x),0))return[];const E=pw(x);if(ai(E,0))return[];const k=Zi(_V,y,m),I=vt(k,x)/E,P=kn(xV,i,f,I);if(t.type===yi.RAY){const L=Wr(P6,P,i);if(vt(f,L)<-Ni())return[]}if(e.type===yi.RAY){const L=Wr(P6,P,s);if(vt(m,L)<-Ni())return[]}return[Xr(P)]}function Y_e({start:t,end:e,type:i},n){const s=Wr(N_,n,t),h=Wr(L_,e,t),f=Zi(r7,h,s),m=pw(f)/pw(h),y=Ni();if(m<y)switch(i){case yi.LINE:return[Xr(n)];case yi.RAY:return vt(h,s)<-y?[]:[Xr(n)]}return[]}function n7(t,e,i,n){const[s,h]=t,[f,m]=i,y=f-s,x=m-h,E=y*y+x*x,k=Math.sqrt(E);if(k>e+n)return[];if(k<Math.abs(e-n))return[];if(ai(k,0)&&ai(e,n))return[];const I=(e*e-n*n+E)/(2*k),P=Math.sqrt(e*e-I*I),L=P*x/k,D=P*y/k,[j,H]=YE(Ry,t,i,I/k);return ai(L,D)?[Is(j,H)]:[Is(j+L,H-D),Is(j-L,H+D)]}function Jw(t,e,{start:i,end:n,type:s}){return vi(t.start,i[0],i[1],e),vi(t.end,n[0],n[1],e),t.type=Q_e[s],t}function bV(t,e){return ai(t[2],e[2])}function ai(t,e){return Ts(Math.abs(t-e),0,Ni())}function X_e(t,e){return e.filter(i=>eu(t,i))}function eu(t,e){return tV(t,e)}var Os;(function(t){t[t.PLANE=0]="PLANE",t[t.HALF_PLANE=1]="HALF_PLANE"})(Os||(Os={}));const Q_e={[Os.PLANE]:yi.LINE,[Os.HALF_PLANE]:yi.RAY},Ry=at(),R_=at(),N_=Te(),L_=Te(),r7=Te(),wV=Te(),_V=Te(),xV=Te(),P6=Te(),e5e=dr(),s7={start:Te(),end:Te(),type:yi.LINE},t5e={start:Te(),end:Te(),type:yi.LINE};class Eo{intersect(e){return ac(this,e)}closestPoints(e){return[this.closestTo(e)]}}class bp extends Eo{constructor(e){super(),this.point=e}equals(e){return this===e||ro(e)&&Zt(this.point,e.point)}closestTo(){return x0(this.point)}}class o7 extends Eo{constructor(e,i,n){super(),this.start=e,this.end=i,this.lineLike={start:e,end:i,type:n}}equals(e){return this===e||Za(e)&&this.lineLike.type===e.lineLike.type&&Zt(this.start,e.start)&&Zt(this.end,e.end)}closestTo(e){const i=Sn();return mV(e,this.lineLike,i),i}}class a7 extends o7{constructor(e,i){super(e,i,yi.LINE)}}class i5e extends o7{constructor(e,i){super(e,i,yi.RAY)}}class SV extends Eo{constructor(e){super(),this.constraints=e}equals(e){return this===e||R6(e)&&fl(this.constraints,e.constraints,(i,n)=>i.equals(n))}closestTo(e){let i,n=1/0;for(const s of this.constraints){const h=s.closestTo(e),f=m0(e,h);f<n&&(n=f,i=h)}return x0(i??e)}closestPoints(e){return this.constraints.flatMap(i=>i===this?[]:i.closestPoints(e))}}class l7 extends Eo{constructor(e,i){super(),this.center=e,this.radius=i}equals(e){return this===e||Ya(e)&&this.center[0]===e.center[0]&&this.center[1]===e.center[1]&&this.radius===e.radius}closestTo(e){const i=Sn();return gV(e,this.center,this.radius,i),i}}class c7 extends Eo{constructor(e,i){super(),this.center=e,this.radius=i}equals(e){return this===e||cc(e)&&Zt(this.center,e.center)&&this.radius===e.radius}closestTo(e){const i=Sn();return gV(e,this.center,this.radius,i),i[2]=this.center[2],i}asCircle(){return new h7(x0(this.center),this.radius,bu(0,0,1))}}class h7 extends Eo{constructor(e,i,n,s=void 0){super(),this.center=e,this.radius=i,this.normal=n,this.slicePlane=s}equals(e){return this===e||Mh(e)&&Zt(this.center,e.center)&&Zt(this.normal,e.normal)&&this.radius===e.radius}closestTo(e){const{center:i,radius:n}=this;e7(this.getPlane(n5e),e,mx);const s=Wr(mx,mx,i),h=c_(s);if(ai(h,0))return x0(e);const f=n/Math.sqrt(h),m=Sn();kn(m,i,s,f);const{slicePlane:y}=this;if(y&&!eu(y,m)){const x=p7(y,this);return(x==null?void 0:x.closestTo(e))??x0(e)}return m}getPlane(e=dr()){return Z0(this.center,this.normal,e)}}const mx=Te(),n5e=dr();class TV extends Eo{constructor(e){super(),this.z=e}equals(e){return this===e||lc(e)&&this.z===e.z}closestTo(e){return bu(e[0],e[1],this.z)}getPlane(e=dr()){return vi(MA,0,0,this.z),Z0(MA,uD,e)}}const MA=Te();class u7 extends Eo{constructor(e,i,n){super(),this.start=e,this.end=i,this.planeLike={start:e,end:i,type:n}}equals(e){return this===e||Ja(e)&&this.planeLike.type===e.planeLike.type&&Zt(this.start,e.start)&&Zt(this.end,e.end)}closestTo(e){const i=Sn();return fV(e,this.planeLike,i),i}closestEndTo(e){const{start:i,end:n}=this.planeLike;return Math.sign(Gc(Vi(r5e,n,i),Vi(s5e,e,i)))>0?this.end:this.start}getPlane(e=dr()){const i=Er($A,this.end);return i[2]+=1,QH(this.start,this.end,i,e)}getSlicePlane(e=dr()){const{start:i,end:n,type:s}=this.planeLike;if(s===Os.PLANE)return;const h=vi($A,i[0],i[1],0),f=vi(kA,n[0],n[1],0),m=Ei(kA,f,h);return Z0(h,m,e),e}}const r5e=at(),s5e=at(),$A=Te(),kA=Te();class o5e extends u7{constructor(e,i){super(e,i,Os.HALF_PLANE)}}class EV extends u7{constructor(e,i){super(e,i,Os.PLANE)}}class a5e extends Eo{constructor(e,i){super(),this.sphere=rV(e,i)}equals(e){return this===e||hc(e)&&iV(this.sphere,e.sphere)}closestTo(e){const i=Sn();return P_(this.sphere,e,i),i}get center(){return this.sphere}get radius(){return this.sphere[3]}}class MV extends Eo{constructor(e,i,n){super(),this.start=e,this.end=i,this.getZ=n,this.planeLike={start:e,end:i,type:Os.PLANE}}equals(e){return this===e||Yw(e)&&Zt(this.start,e.start)&&Zt(this.end,e.end)&&this.getZ===e.getZ}closestTo(e){return u5e(this,e)}addIfOnTheGround(e,i){for(const n of i){const s=this.getZ(n[0],n[1])??0;ai(n[2],s)&&(n[2]=s,e.push(n))}}}class d7 extends Eo{constructor(e,i,n){super(),this._x=e,this._y=i,this._z=n}equals(e){return this===e||$5e(e)&&this._x===e._x&&this._y===e._y&&this._z===e._z}closestTo([e,i,n]){return OH(this._x??e,this._y??i,this._z??n)}}class $V extends Eo{constructor(e,i,n,s,h){super(),this._origin=e,this._spatialReference=i,this._distanceMeters=n,this._z=s,this._directionDegrees=h}equals(e){return this===e||M5e(e)&&jS(this._origin,e._origin)&&this._spatialReference===e._spatialReference&&this._distanceMeters===e._distanceMeters&&this._z===e._z&&this._directionDegrees===e._directionDegrees}closestTo([e,i,n]){return sn(T1,e,i),jS(T1,this._origin)||this._applyDirectionAndDistance(T1),OH(T1[0],T1[1],this._z??n)}_applyDirectionAndDistance(e){if(this._directionDegrees!=null&&this._distanceMeters!=null)Qh(e,this._origin,this._directionDegrees,this._distanceMeters,this._spatialReference);else if(this._directionDegrees!=null)c5e(e,this._origin,this._directionDegrees,e,this._spatialReference);else if(this._distanceMeters!=null){const{azimuth:i}=ky(l5e,this._origin,e,this._spatialReference);Qh(e,this._origin,i??0,this._distanceMeters,this._spatialReference)}}}const T1=[0,0],l5e=new $y;function c5e(t,e,i,n,s){let{azimuth:h,distance:f}=ky(h5e,e,n,s);h??(h=0);let m=f*Math.cos((h-i)*wr);m=Math.max(0,m),Qh(t,e,i,m,s)}const h5e=new $y;function u5e(t,e){const i=Sn();return fV(e,t.planeLike,i),i[2]=t.getZ(i[0],i[1])??CV,i}function ac(t,e){if(R6(t)){const i=[];for(const n of t.constraints){const s=n.intersect(e);s&&i.push(s)}return Ny(i)}if(R6(e))return ac(e,t);if(Yw(t))return CA(t,e);if(Yw(e))return CA(e,t);if(ro(t)){const{point:i}=t;if(ro(e))return Zt(i,e.point)?t:void 0;const n=e.closestTo(i);return Cm(n,i)?t:void 0}if(Za(t)){if(ro(e))return ac(e,t);if(Za(e))return ta(vV(t.lineLike,e.lineLike));if(lc(e))return d5e(t,e);if(Ja(e))return ta(dV(e.planeLike,t.lineLike));if(Ya(e))return ta(yV(t.lineLike,e.center,e.radius));if(Mh(e))return ta(J_e(t.lineLike,e));if(cc(e))return p5e(t,e);if(hc(e))return f5e(t,e)}else if(lc(t)){if(ro(e)||Za(e))return ac(e,t);if(lc(e))return g5e(t,e);if(Ja(e))return m5e(t,e);if(Ya(e))return y5e(t,e);if(Mh(e))return b5e(t,e);if(cc(e))return v5e(t,e);if(hc(e))return w5e(t,e)}else if(Ja(t)){if(ro(e)||Za(e)||lc(e))return ac(e,t);if(Ja(e))return yx(pV(t.planeLike,e.planeLike));if(Ya(e))return yx(i7(t.planeLike,e.center,e.radius));if(Mh(e))return x5e(t,e);if(cc(e))return _5e(t,e);if(hc(e))return S5e(t,e)}else if(Ya(t)){if(ro(e)||Za(e)||lc(e)||Ja(e))return ac(e,t);if(Ya(e))return yx(n7(t.center,t.radius,e.center,e.radius));if(Mh(e))return void 0;if(cc(e))return T5e(t,e);if(hc(e))return void 0}else if(Mh(t)){if(ro(e)||Za(e)||lc(e)||Ja(e)||Ya(e))return ac(e,t);if(Mh(e))return void 0;if(cc(e))return e.asCircle(),void 0;if(hc(e))return void 0}else if(cc(t)){if(ro(e)||Za(e)||lc(e)||Ja(e)||Ya(e)||Mh(e))return ac(e,t);if(cc(e))return E5e(e,t);if(hc(e))return void 0}else if(hc(t)){if(ro(e)||Za(e)||lc(e)||Ja(e)||Ya(e)||cc(e))return ac(e,t);if(hc(e))return void 0}}const d5e=(()=>{const t=dr();return(e,i)=>{const{start:n,end:s}=e;if(bV(n,s)&&ai(n[2],i.z))return e;const h=Sn();return QM(i.getPlane(t),n,s,h)?new bp(h):void 0}})();function p5e({lineLike:t},{center:e,radius:i}){const n=e[2];return ta(yV(t,e,i).filter(s=>ai(s[2],n)))}function f5e({lineLike:t},{sphere:e}){return ta(sV(e,t.start,t.end))}const p7=(()=>{const t=Mu(),e=Te(),i=Te();return(n,s,h)=>{const{normal:f,center:m,radius:y}=s;XM(f,e,i);const x=n,E=y*vt(x,e),k=y*vt(x,i);qM(t,m[0],m[1],m[2],1);const I=ZM(n,t),P=Math.hypot(E,k),L=ai(P,0);if(ai(A6(n,m),0)){if(L)return s;if(ai(y,0))return!h||eu(h,m)?new bp(x0(m)):void 0;Zi(e,x,f),wn(e,e);const ie=new Array,le=Xr(m);kn(le,le,e,y),h&&!eu(h,le)||ie.push(le);const pe=Xr(m);return kn(pe,pe,e,-y),h&&!eu(h,pe)||ie.push(pe),ta(ie)}if(L)return;const D=-I/P;if(Math.abs(D)>1||ai(D,1))return;const j=Math.atan(E/k),H=VT(D)-j,W=Math.PI-H,Z=new Array,Y=Te();kn(Y,m,e,y*Math.cos(H)),kn(Y,Y,i,y*Math.sin(H)),Z.push(Y);const te=Te();return kn(te,m,e,y*Math.cos(W)),kn(te,te,i,y*Math.sin(W)),Z.push(te),ta(h?X_e(h,Z):Z)}})();function g5e(t,e){return ai(t.z,e.z)?t:void 0}function m5e({z:t},{planeLike:e}){const[i,n]=e.start,[s,h]=e.end,f=bu(i,n,t),m=bu(s,h,t);return e.type===Os.PLANE?new a7(f,m):new i5e(f,m)}function y5e(t,e){const[i,n]=e.center;return new c7(bu(i,n,t.z),e.radius)}function v5e(t,e){return ai(e.center[2],t.z)?e:void 0}const b5e=(()=>{const t=dr();return(e,i)=>p7(e.getPlane(t),i,i.slicePlane)})();function w5e(t,{center:e,radius:i}){const n=Math.abs(e[2]-t.z);if(n>i&&!ai(n,i))return;const s=bu(e[0],e[1],t.z),h=Math.sqrt(i**2-n**2);return ai(h,0)?void 0:new c7(s,h)}const _5e=(()=>{const t=dr();return(e,{center:i,radius:n})=>{const s=i7(e.planeLike,i,n),h=i[2];e.getSlicePlane(t);const f=new Array;for(const[m,y]of s){const x=[m,y,h];eu(t,x)&&f.push(x)}return ta(f)}})(),x5e=(()=>{const t=dr(),e=dr();return(i,n)=>p7(i.getPlane(t),n,i.getSlicePlane(e))})(),S5e=(()=>{const t=dr();return(e,{center:i,radius:n})=>{const s=e.getPlane(t),h=nl(s,i),f=Math.abs(h);if(f>n&&!ai(f,n))return;const m=Math.sqrt(n**2-h**2);if(ai(m,0)){const E=Sn();return e7(s,i,E),new bp(E)}const y=Sn(),x=Xr(s);return kn(y,i,x,h),new h7(y,m,x,e.getSlicePlane())}})();function T5e(t,e){const i=p0(t.center,e.center);return ai(i,0)&&ai(t.radius,e.radius)?e:kV(n7(t.center,t.radius,e.center,e.radius),e.center[2])}function E5e(t,e){if(!bV(t.center,e.center))return;const i=p0(t.center,e.center);return ai(i,0)&&ai(t.radius,e.radius)?t:kV(n7(t.center,t.radius,e.center,e.radius),t.center[2])}function CA(t,e){const{planeLike:i,getZ:n}=t,s=new Array;if(ro(e))t.addIfOnTheGround(s,Z_e(i,e.point));else if(Za(e))t.addIfOnTheGround(s,dV(i,e.lineLike));else if(Ya(e))for(const[h,f]of i7(i,e.center,e.radius)){const m=n(h,f);m!=null&&s.push(Mr(h,f,m))}else if(Ja(e)||Yw(e))for(const[h,f]of pV(i,e.planeLike)){const m=n(h,f)??CV;s.push(Mr(h,f,m))}return ta(s)}function yx(t){return Ny(t.map(([e,i])=>{const n=bu(e,i,0),s=bu(e,i,1);return new a7(n,s)}))}function ta(t){return Ny(t.map(e=>e?new bp(e):void 0))}function kV(t,e){return ta(t.map(([i,n])=>[i,n,e]))}function Ny(t){if(t.length!==0)return t.length===1?t[0]??void 0:new SV(t.filter(Yi))}function R6(t){return t instanceof SV}function ro(t){return t instanceof bp}function Za(t){return t instanceof o7}function lc(t){return t instanceof TV}function Ja(t){return t instanceof u7}function Ya(t){return t instanceof l7}function cc(t){return t instanceof c7}function Mh(t){return t instanceof h7}function hc(t){return t instanceof a5e}function Yw(t){return t instanceof MV}function M5e(t){return t instanceof $V}function $5e(t){return t instanceof d7}const CV=0;let J0=class{constructor(e,i,n,s){this.targetPoint=e,this.constraint=i,this.isDraped=n,this.domain=s}},IV=class extends J0{constructor({targetPoint:e,objectId:i,constraint:n,isDraped:s}){super(e,n,s,lr.FEATURE),this.objectId=i}},D_=class{constructor(e,i){this.isDraped=e,this.domain=i}},Sl=class AV extends D_{constructor(e,i,n,s,h=lr.ALL,f=!0,m=!0){super(s,h),this.type=e,this.lineStart=i,this.lineEnd=n,this.fadeLeft=f,this.fadeRight=m}equals(e){return e instanceof AV&&this.type===e.type&&Zt(this.lineStart,e.lineStart)&&Zt(this.lineEnd,e.lineEnd)&&this.fadeLeft===e.fadeLeft&&this.fadeRight===e.fadeRight}get length(){return Su(this.lineStart,this.lineEnd)}},k5e=class extends IV{constructor(e){super({...e,isDraped:!0,constraint:new MV(e.edgeStart,e.edgeEnd,e.getGroundElevation)})}get hints(){return[new Sl(yo.REFERENCE,this.constraint.start,this.constraint.end,this.isDraped,this.domain)]}},C5e=class extends IV{constructor(e){super({...e,constraint:new a7(e.edgeStart,e.edgeEnd)})}get hints(){return[new Sl(yo.REFERENCE,this.constraint.start,this.constraint.end,this.isDraped,this.domain)]}},I5e=class OV extends D_{constructor(e,i,n=lr.ALL){super(i,n),this.intersectionPoint=e}equals(e){return e instanceof OV&&Zt(this.intersectionPoint,e.intersectionPoint)}},c2=class extends J0{constructor(e,i,n,s){super(e,new bp(e),s,lr.ALL),this.first=i,this.second=n}get hints(){return this.first.targetPoint=this.targetPoint,this.second.targetPoint=this.targetPoint,[...this.first.hints,...this.second.hints,new I5e(this.targetPoint,this.isDraped,this.domain)]}},A5e=class extends J0{constructor({lineStart:e,lineEnd:i,targetPoint:n,isDraped:s}){super(n,new EV(e,i),s,lr.SELF),this._referenceLineHint=new Sl(yo.REFERENCE_EXTENSION,e,i,s,this.domain)}get hints(){return[this._referenceLineHint,new Sl(yo.TARGET,this._lineEndClosestToTarget(),this.targetPoint,this.isDraped,this.domain)]}_lineEndClosestToTarget(){return this.constraint.closestEndTo(this.targetPoint)}},O5e=class PV extends D_{constructor(e,i,n,s=lr.ALL){super(n,s),this.lineStart=e,this.lineEnd=i}equals(e){return e instanceof PV&&Zt(this.lineStart,e.lineStart)&&Zt(this.lineEnd,e.lineEnd)}},P5e=class extends J0{constructor({referenceLine:e,lineStart:i,targetPoint:n,isDraped:s}){const h=Xr(i),{left:f,right:m}=e;Ei(h,xr(h,h,m),f),super(n,new EV(i,h),s,lr.SELF),this._referenceLines=[{edge:e,fadeLeft:!0,fadeRight:!0}]}get hints(){return[new Sl(yo.TARGET,this.constraint.start,this.targetPoint,this.isDraped,this.domain),new O5e(this.constraint.start,this.targetPoint,this.isDraped,this.domain),...this._referenceLines.map(e=>new Sl(yo.REFERENCE,e.edge.left,e.edge.right,this.isDraped,this.domain,e.fadeLeft,e.fadeRight))]}addReferenceLine(e){const i={edge:e,fadeLeft:!0,fadeRight:!0};this._referenceLines.forEach(n=>{Zt(e.right,n.edge.left)&&(n.fadeLeft=!1,i.fadeRight=!1),Zt(e.right,n.edge.right)&&(n.fadeRight=!1,i.fadeRight=!1),Zt(e.left,n.edge.right)&&(n.fadeRight=!1,i.fadeLeft=!1),Zt(e.left,n.edge.left)&&(n.fadeLeft=!1,i.fadeLeft=!1)}),this._referenceLines.push(i)}},RV=class NV extends D_{constructor(e,i,n,s,h=lr.ALL){super(s,h),this.previousVertex=e,this.centerVertex=i,this.nextVertex=n}equals(e){return e instanceof NV&&Zt(this.previousVertex,e.previousVertex)&&Zt(this.centerVertex,e.centerVertex)&&Zt(this.nextVertex,e.nextVertex)}},R5e=class extends J0{constructor({targetPoint:e,constraint:i,previousVertex:n,otherVertex:s,otherVertexType:h,isDraped:f,selfSnappingType:m,objectId:y,domain:x}){super(e,i,f,x??lr.SELF),this.previousVertex=n,this.otherVertex=s,this.otherVertexType=h,this.selfSnappingType=m??Qw.None,this.objectId=y??null}get hints(){const e=this.previousVertex,i=this.otherVertexType===Xw.CENTER?this.otherVertex:this.targetPoint,n=this.otherVertexType===Xw.CENTER?this.targetPoint:this.otherVertex;return[new Sl(yo.TARGET,i,n,this.isDraped,this.domain),new Sl(yo.REFERENCE,e,i,this.isDraped,this.domain),new RV(this.previousVertex,i,n,this.isDraped,this.domain)]}};var Xw,Qw;(function(t){t[t.NEXT=0]="NEXT",t[t.CENTER=1]="CENTER"})(Xw||(Xw={})),function(t){t[t.None=0]="None",t[t.LastVertex=1]="LastVertex",t[t.FirstVertex=2]="FirstVertex",t[t.ExistingEdge=3]="ExistingEdge"}(Qw||(Qw={}));let N5e=class extends J0{constructor({targetPoint:e,point1:i,point2:n,isDraped:s}){super(e,new l7(H0(Te(),i,n,.5),.5*mp(i,n)),s,lr.SELF),this._p1=i,this._p2=n}get hints(){return[new Sl(yo.REFERENCE,this.targetPoint,this._p1,this.isDraped,this.domain),new Sl(yo.REFERENCE,this.targetPoint,this._p2,this.isDraped,this.domain),new RV(this._p1,this.targetPoint,this._p2,this.isDraped,this.domain)]}};function L5e(t,e,i,n,s=Te()){const h=Er(D5e,t);return h[2]=kH(n,h,e,i)||0,n.renderCoordsHelper.toRenderCoords(h,e,s),s}const D5e=Te();function z5e(t,e,i,n){return n.type==="2d"?(Fv.x=t[0],Fv.y=t[1],Fv.spatialReference=e,n.toScreen(Fv)):(L5e(t,e,i,n,IA),n.state.camera.projectToScreen(IA,vx),Ri(vx[0],vx[1]))}const Fv=Pl(0,0,0,null),IA=Te(),vx=gz();let Wo=class extends un.EventedMixin(Oe){constructor(e){super(e),this.options=new Ay,this._engineCache=new Map,this._loadTask=null,this._engines=[],this._currentMainCandidate=null,this._currentOtherActiveCandidates=[],this._currentSnappedType=mc.MAIN}initialize(){this.addHandles([Ee(()=>{const{distance:e,touchSensitivityMultiplier:i,effectiveSelfEnabled:n,effectiveFeatureEnabled:s,effectiveGridEnabled:h}=this.options;return{selfEnabled:n,featureEnabled:s,gridEnabled:this.view.type==="2d"&&h,viewReady:this.view.ready,viewSpatialReference:this.view.spatialReference,distance:e,touchSensitivityMultiplier:i}},(e,i)=>{var n;i&&(this.doneSnapping(),this.emit("changed")),(n=this._loadTask)==null||n.abort(),this._loadTask=up(s=>this._updateEngines(e,i,s))},Pi),Ee(()=>this.options,e=>{for(const i of this._engines)i.options=e},Pc)])}destroy(){this._destroyEngines()}get updating(){var e;return this._engines.some(i=>i.updating)||!((e=this._loadTask)!=null&&e.finished)}_destroyEngines(){this._engineCache.forEach(e=>e.destroy()),this._engineCache.clear(),this._engines=[]}async _updateEngines(e,i,n){if(!e.viewReady)return void this._destroyEngines();(i==null?void 0:i.viewSpatialReference)!==e.viewSpatialReference&&this._destroyEngines();const{_engineCache:s}=this,h=[];e.featureEnabled&&!s.has("feature")&&h.push(this._setupFeatureSnappingEngine(n)),e.selfEnabled&&!s.has("self")&&h.push(this._setupSelfSnappingEngine(n)),e.gridEnabled&&!s.has("grid")&&this.view.type==="2d"&&h.push(this._setupGridSnappingEngine(n)),await Promise.allSettled(h),n.aborted||(this._engines=Array.from(s.values()))}async _setupSelfSnappingEngine(e){const{SelfSnappingEngine:i}=await ge(()=>import("./SelfSnappingEngine-NZQN9MLL.js"),__vite__mapDeps([299,300]),import.meta.url);Jt(e);const n=new i({view:this.view,options:this.options});this._engineCache.set("self",n)}async _setupGridSnappingEngine(e){const{view:i}=this,{GridSnappingEngine:n}=await ge(async()=>{const{GridSnappingEngine:s}=await import("./GridSnappingEngine-MLjxIzg-.js");return{GridSnappingEngine:s}},__vite__mapDeps([301,231]),import.meta.url);if(Jt(e),i.type==="2d"){const s=new n({view:i,options:this.options});this._engineCache.set("grid",s)}}async _setupFeatureSnappingEngine(e){const{FeatureSnappingEngine:i}=await ge(()=>import("./FeatureSnappingEngine-CENvb8f2.js"),__vite__mapDeps([302,178,240]),import.meta.url);Jt(e);const{view:n,options:s,_engineCache:h}=this,f=new i({view:n,options:s,spatialReference:n.spatialReference});h.set("feature",f)}get _squaredMouseProximityThreshold(){return this.options.distance*this.options.distance}get _squaredTouchProximityThreshold(){const{distance:e,touchSensitivityMultiplier:i}=this.options,n=e*i;return n*n}snap(e){return G5e(e)?this._snapMultiPoint(e):this._snapSinglePoint(e)}update(e){const{point:i,context:n}=e;this._removeVisualization();const s=this._currentMainCandidate;if(s==null)return i;const h=this._selectUpdateInput(e);if(h==null)return i;const{spatialReference:f}=n,m=Qr(h,f);if(m==null)return i;const{view:y}=this,{elevationInfo:x,visualizer:E}=n,k=[],I=Vh(m,y,x),P=s.constraint.closestTo(I);if(!this._arePointsWithinScreenThreshold(I,P,n)||!wx(s,n.drawConstraints))return this._resetSnappingState(),i;s.targetPoint=dx(P),k.push(...s.hints);for(const L of this._currentOtherActiveCandidates)wx(L,n.drawConstraints)&&(L.targetPoint=dx(P),k.push(...L.hints));return E!=null&&this.addHandles(E.draw(k,{spatialReference:f,elevationInfo:U5e(n),view:y,selfSnappingZ:n.selfSnappingZ}),bx),I6(P,y,i,n)}doneSnapping(){this._removeVisualization(),this._resetSnappingState()}_selectUpdateInput({point:e,scenePoint:i}){switch(this._currentSnappedType){case mc.MAIN:return e;case mc.SCENE:return i}}_resetSnappingState(){this._currentMainCandidate=null,this._currentOtherActiveCandidates=[],this._currentSnappedType=mc.MAIN}_removeVisualization(){this.removeHandles(bx)}async _snapSinglePoint({point:e,context:i,signal:n}){const{view:s}=this,{elevationInfo:h}=i,f=Vh(e,s,h),m=await this._fetchCandidates(f,lr.ALL,i,n);return this._createSnapResult(f,mc.MAIN,m,s,e,i,n)}async _snapMultiPoint({point:e,scenePoint:i,context:n,signal:s}){const{view:h}=this,{coordinateHelper:f,elevationInfo:m,spatialReference:y}=n;await P3(i.spatialReference,y);const x=Qr(i,y),E=Vh(x,h,m),k=await this._fetchCandidates(E,lr.FEATURE,n,s);if(k.length>0){const L=await this._fetchCandidates(E,lr.SELF,n,s);return this._createSnapResult(E,mc.SCENE,[...k,...L],h,x,n,s)}const I=Vh(e,h,m),P=await this._fetchCandidates(I,lr.SELF,n,s);return this._createSnapResult(I,mc.MAIN,P,h,{z:f.hasZ()&&e.hasZ?e.z??0:void 0,m:f.hasM()&&e.hasM?e.m??0:void 0},n,s)}async _fetchCandidates(e,i,n,s){return(await Promise.all(this._engines.map(h=>h.fetchCandidates(e,i,n,s)))).flat()}_createSnapResult(e,i,n,s,h,f,m){return{get valid(){return!Ps(m)},apply:()=>{const{spatialReference:y}=f,{snappedPoint:x,hints:E}=this._processCandidates(e,i,n,f);return this._removeVisualization(),f.visualizer!=null&&this.addHandles(f.visualizer.draw(E,{spatialReference:y,elevationInfo:vu,view:s,selfSnappingZ:f.selfSnappingZ}),bx),I6(x,s,h,f)}}}_processCandidates(e,i,n,s){if(n.length<1)return this.doneSnapping(),{snappedPoint:e,hints:[]};this._currentSnappedType!==i&&this._resetSnappingState(),M3e(e,n);const h=this._currentMainCandidate;if(h!=null){const f=j5e(h,n);if(f>=0){if(!(n[f]instanceof c2))return this._intersectWithOtherCandidates(f,n,e,i,s);if(this._arePointsWithinScreenThreshold(e,h.targetPoint,s))return this._updateSnappingCandidate(h,i,n,s)}}return this._intersectWithOtherCandidates(0,n,e,i,s)}_intersectWithOtherCandidates(e,i,n,s,h){const{coordinateHelper:f}=h,m=i[e],y=[];for(let x=0;x<i.length;++x){if(x===e)continue;const E=i[x],k=m.constraint.intersect(E.constraint);if(k)for(const I of k.closestPoints(m.targetPoint))y.push([new c2(dx(I),m,E,E.isDraped),this._squaredScreenDistance(n,I,f)])}return y.length>0&&(y.sort((x,E)=>x[1]-E[1]),y[0][1]<this._squaredPointProximityThreshold(h.pointer))?this._updateSnappingCandidate(y[0][0],s,i,h):wx(m,h.drawConstraints)?this._updateSnappingCandidate(m,s,i,h):{snappedPoint:n,hints:[]}}_updateSnappingCandidate(e,i,n,s){this.doneSnapping(),this._currentMainCandidate=e,this._currentSnappedType=i;const h=this._currentMainCandidate.targetPoint,f=[];f.push(...e.hints);for(const m of n){if(e instanceof c2){if(m.constraint.equals(e.first.constraint)||m.constraint.equals(e.second.constraint))continue}else if(m.constraint.equals(e.constraint))continue;const y=m.constraint.closestTo(h);this._squaredScreenDistance(y,h,s.coordinateHelper)<F5e()&&(m.targetPoint=h,this._currentOtherActiveCandidates.push(m),f.push(...m.hints))}return{snappedPoint:h,hints:f}}_squaredPointProximityThreshold(e){return e==="touch"?this._squaredTouchProximityThreshold:this._squaredMouseProximityThreshold}_arePointsWithinScreenThreshold(e,i,n){return this._squaredScreenDistance(e,i,n.coordinateHelper)<this._squaredPointProximityThreshold(n.pointer)}_squaredScreenDistance(e,i,n){return PH(this._toScreen(e,n),this._toScreen(i,n))}_toScreen(e,i){return z5e(e,i.spatialReference,vu,this.view)}get test(){}};var mc;_([S({constructOnly:!0})],Wo.prototype,"view",void 0),_([S()],Wo.prototype,"options",void 0),_([S({readOnly:!0})],Wo.prototype,"updating",null),_([S()],Wo.prototype,"_loadTask",void 0),_([S()],Wo.prototype,"_engines",void 0),_([S()],Wo.prototype,"_squaredMouseProximityThreshold",null),_([S()],Wo.prototype,"_squaredTouchProximityThreshold",null),Wo=_([J("esri.views.interactive.snapping.SnappingManager")],Wo),function(t){t[t.MAIN=0]="MAIN",t[t.SCENE=1]="SCENE"}(mc||(mc={}));const bx="visualization-handle";function F5e(){return Ww.satisfiesConstraintScreenThreshold*Ww.satisfiesConstraintScreenThreshold}function wx(t,e){return!e||e.direction==null&&e.distance==null||!(t instanceof k5e||t instanceof C5e||t instanceof A5e||t instanceof P5e||t instanceof N5e)&&(!(t instanceof R5e)||e.direction==null&&t.selfSnappingType===Qw.LastVertex)}function j5e(t,e){return t instanceof c2?_x(e,t.first)>=0&&_x(e,t.second)>=0?0:-1:_x(e,t)}function _x(t,e){let i=-1;for(let n=0;n<t.length;++n)if(e.constraint.equals(t[n].constraint)){i=n;break}return i}function G5e(t){return t.scenePoint!=null}function U5e({coordinateHelper:t,elevationInfo:e}){return t.hasZ()?vu:e}function B5e(t){return(t==null?void 0:t.type)==="graphic"}function H5e(t){return t.find(B5e)??null}let zn=class extends un.EventedAccessor{constructor(e){super(e),this.cancelled=!1,this.history={undo:[],redo:[]},this.type=null}get tool(){if(!this.activeComponent)return null;switch(this.activeComponent.type){case"graphic-mover":case"move-3d":return"move";case"box":case"transform-3d":return"transform";case"reshape":case"reshape-3d":return"reshape";case"draw-2d":case"draw-3d":return this.activeComponent.geometryType;default:this.activeComponent}return null}addToHistory(e){this.history.redo=[],this.history.undo.push(e)}resetHistory(){this.history.redo=[],this.history.undo=[]}canUndo(){return this.history.undo.length>0}canRedo(){return this.history.redo.length>0}complete(){this._reset(),this.onEnd(),this.emit("complete")}cancel(){this.cancelled=!0,this.complete()}_reset(){var e;(e=this.activeComponent)==null||e.reset()}refreshComponent(){const e=this.activeComponent;e&&(e.type!=="box"&&e.type!=="reshape"&&e.type!=="graphic-mover"||e.refresh())}set undo(e){this._set("undo",()=>{this.canUndo()&&e()})}set redo(e){this._set("redo",()=>{this.canRedo()&&e()})}};_([S()],zn.prototype,"activeComponent",void 0),_([S()],zn.prototype,"cancelled",void 0),_([S()],zn.prototype,"history",void 0),_([S()],zn.prototype,"tool",null),_([S()],zn.prototype,"type",void 0),_([S()],zn.prototype,"canUndo",null),_([S()],zn.prototype,"canRedo",null),_([S()],zn.prototype,"onEnd",void 0),_([S()],zn.prototype,"undo",null),_([S()],zn.prototype,"redo",null),_([S()],zn.prototype,"toggleTool",void 0),_([S()],zn.prototype,"addToSelection",void 0),_([S()],zn.prototype,"removeFromSelection",void 0),zn=_([J("esri.widgets.Sketch.support.OperationHandle")],zn);let h2=class extends zn{};_([S()],h2.prototype,"activeComponent",void 0),h2=_([J("esri.widgets.Sketch.support.OperationHandle.CreateOperationHandle")],h2);let wc=class extends zn{};_([S()],wc.prototype,"activeComponent",void 0),wc=_([J("esri.widgets.Sketch.support.OperationHandle.UpdateOperationHandle")],wc);const AA={defaultZ:0},E1={reshapeOptions:{edgeOperation:"split",shapeOperation:"move",vertexOperation:"move"},enableMoveAllGraphics:!0,enableRotation:!0,enableScaling:!0,multipleSelectionEnabled:!0,preserveAspectRatio:!1,toggleToolOnClick:!0,enableZ:!0,highlightOptions:{enabled:!0},tool:"transform"};let Dt=class extends un.EventedAccessor{constructor(e){var i;super(e),this._numUpdating=0,this._defaultSnappingManager=null,this._internalGraphicsLayer=new SH({listMode:"hide",internal:!0,title:"SVM Internal"}),this._operationHandle=null,this._viewHandlesKey="viewHandles",this.activeFillSymbol=null,this.activeLineSymbol=null,this.activeVertexSymbol=null,this.allowDeleteKey=!0,this.layer=null,this.pointSymbol=new d0({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),this.polygonSymbol=new by({color:[150,150,150,.2],outline:{color:[50,50,50],width:2}}),this.polylineSymbol=new jc({color:[130,130,130,1],width:2}),this.meshSymbol=new J3({symbolLayers:new Pe([new j0])}),this.updateGraphics=new Pe,this.updateOnGraphicClick=!0,this.vertexSymbol=new d0({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),this.sketchOptions=new $_,this._moduleLoaderAbortController=null,this._viewReadyAbortController=null,this._originalPopupEnabled=null,this.defaultCreateOptions=AA,this.defaultUpdateOptions=E1,this.snappingOptions=((i=e==null?void 0:e.snappingManager)==null?void 0:i.options)??(e==null?void 0:e.snappingOptions)??new Ay}initialize(){this.addHandles([Ns(()=>{var e,i;return(i=(e=this.view)==null?void 0:e.map)==null?void 0:i.layers},"change",e=>{e.removed.includes(this.layer)&&this.cancel()}),Ns(()=>{var e;return(e=this.layer)==null?void 0:e.graphics},"change",e=>{if(this._operationHandle!=null)for(const i of e.removed)this.updateGraphics.includes(i)&&(this.updateGraphics.length>1?this._operationHandle.removeFromSelection(i):this._operationHandle.cancel())}),Ee(()=>{var e;return((e=this.layer)==null?void 0:e.elevationInfo)??null},e=>{e!==this._internalGraphicsLayer.elevationInfo&&(this.cancel(),this._internalGraphicsLayer.elevationInfo=e)},Pi),Ee(()=>this.view,e=>{this._defaultSnappingManager=mt(this._defaultSnappingManager),e&&(this.snappingManager||(this._defaultSnappingManager=new Wo({view:e,options:this.snappingOptions})),e.type==="2d"?ge(()=>import("./editingTools-CWB-wDyQ.js"),__vite__mapDeps([303,284,71,285,286,304,305,306,296,145,60,50,300,307,88,135,109,132,158,79,288,81,34,104,308]),import.meta.url):e.type==="3d"&&(ge(()=>import("./editingTools-DMBT1paf.js"),__vite__mapDeps([309,104,305,306,296,145,60,50,300,310,293,110,40,109,294,99,51,129,117,116,44,130,131,83,132,133,134,38,43,135,139,140,141,95,37,39,114,136,137,45,46,138,73,295,285,286,311,312,88,42,304,307,313,314,157,158,79,71,24,315,182,316,317,318,288,81,34]),import.meta.url),ge(()=>import("./LineCallout.glsl-zJ4UIp-z.js").then(i=>i.G),__vite__mapDeps([319,294,99,50,51,129,117,116,44,130,131,83,132,109,40,133,134,38,43,135,139,140,141,95,110,37,39,114,151,150,149,97,107,152,81,34,153,148,24,30,27,154,104,79,71,2,3,67,320,143,142,115,113,12,13,21,22,15,16,18,243,242,209,26,210,163,31,321,237]),import.meta.url)))},Pi),Ee(()=>{var e;return(e=this.view)==null?void 0:e.spatialReference},(e,i)=>{e&&i&&!e.equals(i)&&this.cancel()})]),RH(this)}destroy(){this.cancel(),this._removeDefaultLayer(),this._defaultSnappingManager=mt(this._defaultSnappingManager),this._set("snappingManager",null),this._set("view",null),this.emit("destroy")}get updating(){return this._numUpdating>0||this.snappingManager!=null&&this.snappingManager.updating}get activeTool(){var e;return((e=this._operationHandle)==null?void 0:e.tool)??null}get activeTooltip(){const{activeComponent:e,destroyed:i}=this,n=!i&&e&&"tooltip"in e?e.tooltip:null;return n!=null&&n.visible?n:null}get activeComponent(){var e;return((e=this._operationHandle)==null?void 0:e.activeComponent)??null}get createGraphic(){return this.activeComponent==null||this.activeComponent.type!=="draw-3d"&&this.activeComponent.type!=="draw-2d"?this._get("createGraphic"):this.activeComponent.graphic}get defaultCreateOptions(){return this._get("defaultCreateOptions")}set defaultCreateOptions(e){this._set("defaultCreateOptions",{...AA,...e})}get defaultUpdateOptions(){return this._get("defaultUpdateOptions")}set defaultUpdateOptions(e){this._set("defaultUpdateOptions",{...E1,...e,reshapeOptions:{...E1.reshapeOptions,...e==null?void 0:e.reshapeOptions},highlightOptions:{...E1.highlightOptions,...e==null?void 0:e.highlightOptions}})}get labelOptions(){return this.sketchOptions.labels}set labelOptions(e){this.sketchOptions.labels=e}get snappingOptions(){var e;return((e=this.snappingManager)==null?void 0:e.options)??this._get("snappingOptions")}set snappingOptions(e){this._defaultSnappingManager!=null&&(this._defaultSnappingManager.options=e),this._set("snappingOptions",e)}get snappingManager(){return this._isOverridden("snappingManager")&&this._get("snappingManager"),this._defaultSnappingManager}set snappingManager(e){if(e)this._isOverridden("snappingManager")||(this._defaultSnappingManager=mt(this._defaultSnappingManager)),this._override("snappingManager",e);else{const{view:i}=this;!this._defaultSnappingManager&&i&&(this._defaultSnappingManager=new Wo({options:this.snappingOptions,view:i})),this._clearOverride("snappingManager")}}get state(){var n;const e=!(!((n=this.view)!=null&&n.ready)||!this.layer),i=this._operationHandle;return e&&i?"active":e?"ready":"disabled"}get tooltipOptions(){return this.sketchOptions.tooltips}set tooltipOptions(e){this.sketchOptions.tooltips=e}get valueOptions(){return this.sketchOptions.values}set valueOptions(e){this.sketchOptions.values=e}get view(){return this._get("view")}set view(e){const i=this._get("view");if(i){const{container:s,map:h}=i;s&&(i.cursor=null),h==null||h.remove(this._internalGraphicsLayer),this.removeHandles(this._viewHandlesKey),this.cancel()}const n="view-ready";this.removeHandles(n),e&&this.addHandles(ur(()=>e.ready,s=>{this.removeHandles(this._viewHandlesKey),s&&this.addHandles(this._generateViewHandles(e),this._viewHandlesKey)},Pi),n),this._set("view",e)}cancel(){this._moduleLoaderAbortController=Ms(this._moduleLoaderAbortController),this._viewReadyAbortController=Ms(this._viewReadyAbortController),this._operationHandle&&this._operationHandle.cancel()}complete(){this._operationHandle&&this._operationHandle.complete()}delete(){const{state:e,updateGraphics:i}=this;if(e==="active"&&i.length){const{activeTool:n,layer:s}=this,h=i.toArray();s.removeMany(h),this.cancel(),this._emitDeleteEvent({graphics:h,tool:n})}}duplicate(){if(this.state==="active"&&this.updateGraphics.length){const e=this.updateGraphics.map(i=>i.clone()).toArray();return this.layer.addMany(e),this.emit("duplicate",{graphics:e,type:"duplicate"}),e}return[]}async create(e,i){this.cancel(),await this._waitViewReady();const{view:n,layer:s}=this;if(!n||this.state==="disabled")throw s||this._logMissingLayer(),ei();if(n.activeTool!=null&&(n.activeTool=null),!e)return void this._logError("sketch:missing-parameter","Missing parameter 'tool'.");yA(n,this._internalGraphicsLayer);const h=await this._setupCreateOperation(e,i);if(h==null||this.destroyed)return void n.map.remove(this._internalGraphicsLayer);const f=()=>{var m;if(h===this._operationHandle){const y=this.createGraphic,x=this._operationHandle.cancelled;this._operationHandle.destroy(),this._operationHandle=null,this._set("createGraphic",null),(m=this.view)!=null&&m.map&&this.view.map.remove(this._internalGraphicsLayer),h.cancelled||y==null||s.add(y),this.emit("create",{graphic:y,state:x?"cancel":"complete",tool:e,toolEventInfo:null,type:"create"})}};h.on("complete",f),this._operationHandle=h,n.ready&&n.focus()}async place(e,i){return this.create("mesh",{mode:"click",hasZ:e.hasZ,geometryToPlace:e,...i})}async update(e,i){this.cancel(),await this._waitViewReady();const{layer:n,view:s,state:h}=this;if(!s||h==="disabled")throw n||this._logMissingLayer(),ei();s.activeTool!=null&&(s.activeTool=null);const f=Array.isArray(e)?e:[e];if(e==null||!(f!=null&&f.length))return void this._logError("sketch:missing-parameter","Missing parameter 'graphics'.");if(f.some(y=>y.layer!==n?(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics missing from the supplied GraphicsLayer."),!0):y.geometry==null&&(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics with an unsupported geometry."),!0)))return;const m=await this._setupUpdateOperation(f,i);this.destroyed||m==null||Qi(m)||(yA(s,this._internalGraphicsLayer),this._setUpdateOperationHandle(m,i),this.emit("update",{graphics:f,state:"start",aborted:!1,tool:m.tool,toolEventInfo:null,type:"update"}))}async _updateSpatialReference(e){const i=this.view;if(i){this._beginAsyncOperation(),e=Array.isArray(e)?e:[e];for(const n of e)n.geometry==null||n.geometry.type==="mesh"||Ai(n.geometry.spatialReference,i.spatialReference)||(Ls(n.geometry.spatialReference,i.spatialReference)||$l()||await vl(),n.geometry=Qr(n.geometry,i.spatialReference));this._endAsyncOperation()}else this._logMissingView()}undo(){var e;this.canUndo()&&((e=this._operationHandle)==null||e.undo())}redo(){var e;this.canRedo()&&((e=this._operationHandle)==null||e.redo())}canUndo(){var e;return!!((e=this._operationHandle)!=null&&e.canUndo())}canRedo(){var e;return!!((e=this._operationHandle)!=null&&e.canRedo())}toggleUpdateTool(){var e;(e=this._operationHandle)==null||e.toggleTool()}async _getFirstHit(e){const i=this.view;if(!i)return this._logMissingView(),null;if(i.type==="2d"){const h=[];i.map.allLayers.forEach(m=>{m.type!=="vector-tile"&&m.type!=="imagery"||h.push(m)});const f=await i.hitTest(e,{exclude:h});return H5e(f.results)}const n=[i.map.ground];i.map.allLayers.forEach(h=>{use(h.type)&&n.push(h)});const s=await i.hitTest(e,{exclude:n});if(s.results.length>0){const h=s.results[0];if(h!=null&&h.type==="graphic"&&h.graphic&&(!s.ground.mapPoint||i.map.ground.opacity<1||s.ground.distance-(h.distance??0)>-Math.min(3*s.ground.distance,i.viewingMode==="global"?FT(i.renderCoordsHelper.spatialReference).radius/i.renderCoordsHelper.unitInMeters:Number.POSITIVE_INFINITY)))return h}return null}_generateViewHandles(e){return[e.on("immediate-click",async i=>{var f;const n=this.state==="active"&&((f=this._operationHandle)==null?void 0:f.type)==="create";if(this.state==="disabled"||n||!this.updateOnGraphicClick)return;this._beginAsyncOperation();const s=await i.async(()=>this._getFirstHit(io(i)));let h=null;if(s!=null){const m=s.graphic;this.updateGraphics.includes(m)||m.layer===this.layer?(i.stopPropagation(),h=m):e.type!=="2d"||this._isComponentGraphic(m)||this.state!=="active"||this.cancel()}else this.state==="active"&&this.cancel();h==null||this.updateGraphics.includes(h)||await this.update([h],{...this.defaultUpdateOptions,reshapeOptions:{...this.defaultUpdateOptions.reshapeOptions}}),this._endAsyncOperation()},Wt.WIDGET)]}async _setupCreateOperation(e,i){const n=this.view;if(!n)return this._logMissingView(),null;const s={hasZ:n.type==="3d",...this.defaultCreateOptions,...i},h=await this._setupDrawGraphicTool(e,n,s);return h==null?null:(n.tools.add(h),n.activeTool=h,this._setupCreateOperationHandle(h))}async _setupDrawGraphicTool(e,i,n){if(e==="multipoint"&&i.type==="3d")return this._logError("sketch:create","Multipoint geometries are not supported in SceneView."),null;if(!i)return this._logMissingView(),null;const{cursor:s,defaultZ:h,hasZ:f,geometryToPlace:m,graphicProperties:y,mode:x,preserveAspectRatio:E}=n,k=e==="rectangle"||e==="circle"?"hybrid":"click",I=E??e!=="rectangle",P={centered:e!=="rectangle"&&!(e==="circle"&&!I),cursor:s,defaultZ:h,forceUniformSize:I,graphicProperties:y,geometryToPlace:m,geometryType:e,graphicSymbol:this._getGraphicSymbolFromTool(e),hasZ:f,mode:x??k,snappingManager:this.snappingManager,snapToScene:!1,view:i};return i.type==="2d"?this._makeDrawGraphicTool2D(P):this._makeDrawGraphicTool3D(P)}async _makeDrawGraphicTool2D(e){const i=await this._requireModule(ge(()=>import("./editingTools-CWB-wDyQ.js"),__vite__mapDeps([303,284,71,285,286,304,305,306,296,145,60,50,300,307,88,135,109,132,158,79,288,81,34,104,308]),import.meta.url));return Qi(i)||this.destroyed?null:new i.module.DrawGraphicTool2D({...e,activeVertexSymbol:this.activeVertexSymbol,regularVerticesSymbol:this.vertexSymbol,activeLineSymbol:this.activeLineSymbol,activeFillSymbol:q5e(e.geometryType)?this.activeFillSymbol:null,sketchOptions:this.sketchOptions})}async _makeDrawGraphicTool3D(e){const i=await this._requireModule(ge(()=>import("./editingTools-DMBT1paf.js"),__vite__mapDeps([309,104,305,306,296,145,60,50,300,310,293,110,40,109,294,99,51,129,117,116,44,130,131,83,132,133,134,38,43,135,139,140,141,95,37,39,114,136,137,45,46,138,73,295,285,286,311,312,88,42,304,307,313,314,157,158,79,71,24,315,182,316,317,318,288,81,34]),import.meta.url));if(Qi(i)||this.destroyed)return null;const{elevationInfo:n}=this.layer;return new i.module.DrawGraphicTool3D({...e,elevationInfo:n,snapToScene:!0,sketchOptions:this.sketchOptions})}_setupCreateOperationHandle(e){const i=this.view;if(!i)return this._logMissingView(),null;let n=null;const s=e.forceUniformSize,h=e.centered,f=[i.on("key-down",y=>{if(y.key===pi.pan)y.stopPropagation(),y.repeat||(e.enabled=!1);else if(y.key===pi.complete)y.stopPropagation(),e.completeCreateOperation();else if(y.key!==pi.vertexAdd||y.repeat)y.key===pi.undo?(y.stopPropagation(),m.undo()):y.key===pi.redo?(y.stopPropagation(),m.redo()):y.key!==pi.constraint||e.geometryType!=="rectangle"&&e.geometryType!=="circle"||y.repeat?y.key===pi.center&&(y.repeat||(e.centered=!h,y.stopPropagation())):(e.forceUniformSize=!s,y.stopPropagation());else{const x=e.drawOperation.geometryType;x!=="polyline"&&x!=="polygon"&&x!=="multipoint"||(y.stopPropagation(),e.drawOperation.commitStagedVertex())}},Wt.WIDGET),i.on("key-up",y=>{y.key===pi.pan?e.enabled=!0:y.key!==pi.constraint||e.geometryType!=="rectangle"&&e.geometryType!=="circle"?y.key===pi.center&&(e.centered=h,y.stopPropagation()):(e.forceUniformSize=s,y.stopPropagation())},Wt.WIDGET),e.on("vertex-add",y=>{switch(n=n==null?"start":"active",y.operation){case"apply":this.emit("create",{graphic:e.graphic,state:n,tool:this.activeTool,toolEventInfo:y,type:"create"});break;case"undo":this._emitUndoEvent({graphics:[e.graphic],tool:e.geometryType});break;case"redo":this._emitRedoEvent({graphics:[e.graphic],tool:e.geometryType})}}),e.on("cursor-update",y=>{e.drawOperation.numCommittedVertices>0&&this.emit("create",{graphic:e.graphic,state:"active",tool:this.activeTool,toolEventInfo:{coordinates:y.vertices[0].coordinates,type:"cursor-update"},type:"create"})}),e.on("vertex-remove",y=>{switch(y.operation){case"apply":this.emit("create",{graphic:e.graphic,state:"active",tool:this.activeTool,toolEventInfo:y,type:"create"});break;case"undo":this._emitUndoEvent({graphics:[e.graphic],tool:e.geometryType});break;case"redo":this._emitRedoEvent({graphics:[e.graphic],tool:e.geometryType})}}),e.on("complete",y=>{this._set("createGraphic",y.graphic),n="complete",y.aborted?m&&m.cancel():m&&m.complete()}),Ee(()=>this._getGraphicSymbolFromTool(e.geometryType),y=>{e.graphicSymbol=y})],m=new h2({activeComponent:e,tool:e.geometryType,type:"create",onEnd:()=>{var y;_a(f),(y=i.tools)==null||y.remove(e)},undo:()=>{e.canUndo&&e.undo()},redo:()=>{e.canRedo&&e.redo()},canUndo:()=>e.canUndo,canRedo:()=>e.canRedo});return m}_getGraphicSymbolFromTool(e){switch(e){case"point":case"multipoint":return this.pointSymbol;case"polyline":return this.polylineSymbol;case"circle":case"rectangle":case"polygon":return this.polygonSymbol;case"mesh":return this.meshSymbol}}async _setupUpdateOperation(e,i){var m;const{layer:n,view:s}=this;if(!s)return this._logMissingView(),null;const h={...this.defaultUpdateOptions,...i,reshapeOptions:{...this.defaultUpdateOptions.reshapeOptions,...i==null?void 0:i.reshapeOptions},highlightOptions:{...this.defaultUpdateOptions.highlightOptions,...i==null?void 0:i.highlightOptions}};let f=h.tool??E1.tool;for(const y of e)n.remove(y),n.add(y);if(s.type==="3d"){if(e.length===0)return null;switch(f){case"move":return this._setupMove3DOperation(e,h,s,f);case"reshape":return e.length>1?(this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null):this._setupReshape3DOperation(e[0],h,s);case"transform":return this._setupGraphicTransform3DOperation(e,h,s)}}switch(f){case"move":return this._setupMove2DOperation(e,h,s);case"reshape":return e.length>1?(this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null):this._setupTransformOrReshape2DOperation(e,f,h,s);case"transform":if(e.length===1){const y=(m=e[0].geometry)==null?void 0:m.type;y!=="point"&&y!=="multipoint"||(f="reshape")}return this._setupTransformOrReshape2DOperation(e,f,h,s)}}async _setupMove3DOperation(e,i,n,s,h=!1){const f=await this._requireModule(ge(()=>import("./editingTools-DMBT1paf.js"),__vite__mapDeps([309,104,305,306,296,145,60,50,300,310,293,110,40,109,294,99,51,129,117,116,44,130,131,83,132,133,134,38,43,135,139,140,141,95,37,39,114,136,137,45,46,138,73,295,285,286,311,312,88,42,304,307,313,314,157,158,79,71,24,315,182,316,317,318,288,81,34]),import.meta.url));if(Qi(f))return f;const{ManipulatedObject3DGraphic:m,MoveTool3D:y}=f.module,x=new Map,E=()=>{x.forEach(L=>L.destroy()),x.clear()};for(const L of e){const D=new m({view:n,graphic:L}),j=v3e(D);if(j!==Qt.SUPPORTED)return E(),this._logError("sketch:move",`Move operation not supported for provided graphic(s) (${mA(j)}).`),null;x.set(L,D)}const k=new y({view:n,enableZ:i.enableZ,snappingManager:this.snappingManager,sketchOptions:this.sketchOptions});n.tools.add(k),k.objects.addMany(Array.from(x.values())),h||this.updateGraphics.addMany(e);const I=[],P=new wc({activeComponent:k,tool:s,type:"update",onEnd:()=>{_a(I),Uv(n,k),E()},undo:()=>{PA(this.view,k),jv(P,this.updateGraphics.toArray()),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:s})},redo:()=>{Gv(P,this.updateGraphics.toArray()),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:s})},addToSelection:L=>{this.updateGraphics.push(L);const D=new m({view:n,graphic:L});x.set(L,D),k.objects.push(D),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[L],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:L=>{const D=this.updateGraphics.indexOf(L);if(P.history.undo.forEach(H=>H.updates.splice(D,1)),P.history.redo.forEach(H=>H.updates.splice(D,1)),this.updateGraphics.remove(L),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[L],type:"selection-change"},type:"update"}),this.updateGraphics.length===0)return void P.complete();const j=x.get(L);j&&(k.objects.remove(j),j.destroy(),x.delete(L))},toggleTool:async()=>{if(this.updateGraphics.length!==1||i.toggleToolOnClick===!1||s!=="transform")return;const L=this.updateGraphics.at(0),D=await this._setupReshape3DOperation(L,i,n,!0);D&&!Qi(D)&&(P.onEnd(),P.destroy(),this._setUpdateOperationHandle(D,i))}});return I.push(...this._getHandlesForComponent(P,i),n.on("immediate-click",L=>this._getCommonUpdateOperationClickHandlers(P,L,i),Wt.WIDGET),n.on("key-down",L=>{this._getCommonUpdateOperationKeyDownHandlers(P,L)},Wt.WIDGET)),P}_setupGraphicTransform3DOperation(e,i,n,s=!1){if(e.length===1&&_3e(e[0])===Qt.SUPPORTED){const h=e[0],f=h.geometry;if(f!=null&&(f.type==="point"||f.type==="mesh"))return this._setupPointTransform3DOperation(h,i,n);if(f!=null&&(f.type==="polygon"||f.type==="polyline"))return this._setupPolyTransform3DOperation(h,i,n,s)}return this._setupMove3DOperation(e,i,n,"transform",s)}async _setupPointTransform3DOperation(e,i,n){const s="transform",{enableRotation:h,enableScaling:f,enableZ:m}=i,y=await this._requireModule(ge(()=>import("./editingTools-DMBT1paf.js"),__vite__mapDeps([309,104,305,306,296,145,60,50,300,310,293,110,40,109,294,99,51,129,117,116,44,130,131,83,132,133,134,38,43,135,139,140,141,95,37,39,114,136,137,45,46,138,73,295,285,286,311,312,88,42,304,307,313,314,157,158,79,71,24,315,182,316,317,318,288,81,34]),import.meta.url));if(Qi(y))return y;const{TransformTool3D:x,ManipulatedObject3DGraphic:E}=y.module,k=new E({graphic:e,view:n}),I=new x({object:k,view:n,enableRotation:h,enableScaling:f,enableZ:m,snappingManager:this.snappingManager,sketchOptions:this.sketchOptions});n.tools.add(I),this.updateGraphics.add(e);const P=[],L=new wc({activeComponent:I,tool:s,type:"update",onEnd:()=>{_a(P),Uv(n,I),k.destroy()},undo:()=>{PA(this.view,I),jv(L,this.updateGraphics.toArray()),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:s})},redo:()=>{Gv(L,this.updateGraphics.toArray()),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:s})},addToSelection:async D=>{this.updateGraphics.add(D),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[D],removed:[],type:"selection-change"},type:"update"}),L.onEnd(),L.destroy();const j=await this._setupMove3DOperation(this.updateGraphics.toArray(),i,n,"transform",!0);Qi(j)||this._setUpdateOperationHandle(j,i)},removeFromSelection:D=>{this.updateGraphics.remove(D),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[D],type:"selection-change"},type:"update"}),L.complete()},toggleTool:()=>{}});return P.push(...this._getHandlesForComponent(L,i),n.on("immediate-click",D=>this._getCommonUpdateOperationClickHandlers(L,D,i),Wt.WIDGET),n.on("key-down",D=>{this._getCommonUpdateOperationKeyDownHandlers(L,D)},Wt.WIDGET)),L}async _setupPolyTransform3DOperation(e,i,n,s=!1){var W,Z;const h="transform",{enableRotation:f,enableScaling:m,enableZ:y,preserveAspectRatio:x}=i,E=await this._requireModule(ge(()=>import("./editingTools-DMBT1paf.js"),__vite__mapDeps([309,104,305,306,296,145,60,50,300,310,293,110,40,109,294,99,51,129,117,116,44,130,131,83,132,133,134,38,43,135,139,140,141,95,37,39,114,136,137,45,46,138,73,295,285,286,311,312,88,42,304,307,313,314,157,158,79,71,24,315,182,316,317,318,288,81,34]),import.meta.url));if(Qi(E))return E;const{ManipulatedObject3DGraphic:k,ExtentTransformTool:I}=E.module,P=(Z=(W=this.view)==null?void 0:W.inputManager)==null?void 0:Z.isModifierKeyDown(pi.constraint),L=new k({view:n,graphic:e}),D=new I({object:L,view:n,enableRotation:f,enableScaling:m,enableZ:y,preserveAspectRatio:!!x!=!!P,sketchOptions:this.sketchOptions});n.tools.add(D),s||this.updateGraphics.add(e);const j=[],H=new wc({activeComponent:D,tool:h,type:"update",onEnd:()=>{_a(j),Uv(n,D),L.destroy()},canUndo:()=>!D.destroyed&&D.canUndo,undo:()=>{D.destroyed||(D.undo(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:h}))},canRedo:()=>!D.destroyed&&D.canRedo,redo:()=>{D.destroyed||(D.redo(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:h}))},addToSelection:async Y=>{this.updateGraphics.add(Y),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[Y],removed:[],type:"selection-change"},type:"update"}),H.onEnd(),H.destroy();const te=await this._setupMove3DOperation(this.updateGraphics.toArray(),i,n,"transform",!0);Qi(te)||this._setUpdateOperationHandle(te,i)},removeFromSelection:Y=>{this.updateGraphics.remove(Y),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[Y],type:"selection-change"},type:"update"}),H.complete()},toggleTool:async()=>{if(this.updateGraphics.length!==1||i.toggleToolOnClick===!1)return;const Y=await this._setupReshape3DOperation(e,i,n,!0);Y&&!Qi(Y)&&(H.onEnd(),H.destroy(),this._setUpdateOperationHandle(Y,i))}});return j.push(...this._getHandlesForComponent(H,i),n.on("immediate-click",Y=>this._getCommonUpdateOperationClickHandlers(H,Y,i),Wt.WIDGET),n.on("key-down",Y=>this._getCommonUpdateOperationKeyDownHandlers(H,Y),Wt.WIDGET),n.on("key-down",Y=>{Y.key!==pi.constraint||Y.repeat||(D.preserveAspectRatio=!D.preserveAspectRatio,Y.stopPropagation())},Wt.WIDGET),n.on("key-up",Y=>{Y.key===pi.constraint&&(D.preserveAspectRatio=!D.preserveAspectRatio,Y.stopPropagation())},Wt.WIDGET)),H}async _setupMove2DOperation(e,i,n){const s="move";this.updateGraphics.addMany(e),await this._updateSpatialReference(e);const h=await this._getGraphicMover(e,i,n);if(Qi(h))return h;const f=new wc({activeComponent:h,tool:s,type:"update",onEnd:()=>{var E;this._displayDefaultCursor(),_a(x),_a(y),h.destroy(),(E=this._internalGraphicsLayer)==null||E.removeMany([...this.updateGraphics.toArray()])},undo:()=>{const E=this.updateGraphics.toArray();jv(f,E),f.refreshComponent(),this._emitUndoEvent({graphics:E,tool:s})},redo:()=>{const E=this.updateGraphics.toArray();Gv(f,E),f.refreshComponent(),this._emitRedoEvent({graphics:E,tool:s})},addToSelection:async E=>{await this._updateSpatialReference(E),this.updateGraphics.push(E),h.graphics=this.updateGraphics.toArray(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[E],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:E=>{const k=this.updateGraphics.indexOf(E);f.history.undo.forEach(P=>P.updates.splice(k,1)),f.history.redo.forEach(P=>P.updates.splice(k,1)),this.updateGraphics.remove(E);const I=this.updateGraphics.toArray();this.emit("update",{graphics:I,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[E],type:"selection-change"},type:"update"}),this.updateGraphics.length!==0?h.graphics=I:f.complete()}});let m=!1;const y=[n.on("immediate-click",E=>this._getCommonUpdateOperationClickHandlers(f,E,i),Wt.WIDGET),n.on("key-down",E=>{this._getCommonUpdateOperationKeyDownHandlers(f,E),E.key!==pi.constraint||E.repeat||(m=!0,h.enableMoveAllGraphics=!h.enableMoveAllGraphics)},Wt.WIDGET),n.on("key-up",E=>{E.key===pi.constraint&&m&&(m=!1,h.enableMoveAllGraphics=!h.enableMoveAllGraphics)},Wt.WIDGET)],x=this._getHandlesForComponent(f,i);return f}async _setupReshape3DOperation(e,i,n,s=!1){const h="reshape",f=await this._requireModule(ge(()=>import("./editingTools-DMBT1paf.js"),__vite__mapDeps([309,104,305,306,296,145,60,50,300,310,293,110,40,109,294,99,51,129,117,116,44,130,131,83,132,133,134,38,43,135,139,140,141,95,37,39,114,136,137,45,46,138,73,295,285,286,311,312,88,42,304,307,313,314,157,158,79,71,24,315,182,316,317,318,288,81,34]),import.meta.url));if(Qi(f))return f;const{ManipulatedObject3DGraphic:m,ReshapeTool3D:y}=f.module,x=new m({view:n,graphic:e}),E=b3e(x);if(E!==Qt.SUPPORTED)return x.destroy(),this._logError("sketch:reshape",`Reshape operation not supported for provided graphic(s) (${mA(E)}).`),null;const k=i.reshapeOptions,I=new y({view:n,object:x,enableZVertex:i.enableZ&&(k==null?void 0:k.vertexOperation)==="move",enableZShape:i.enableZ&&(k==null?void 0:k.shapeOperation)==="move",enableMoveObject:(k==null?void 0:k.shapeOperation)==="move"||(k==null?void 0:k.shapeOperation)==="move-xy",enableMidpoints:(k==null?void 0:k.edgeOperation)==="split",enableEdgeOffset:(k==null?void 0:k.edgeOperation)==="offset",snappingManager:this.snappingManager,sketchOptions:this.sketchOptions});n.tools.add(I),s||this.updateGraphics.add(x.graphic);const P=[],L=new wc({activeComponent:I,tool:h,type:"update",onEnd:()=>{_a(P),Uv(n,I),x.destroy()},canUndo:()=>!I.destroyed&&I.canUndo,undo:()=>{I.destroyed||(I.undo(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:h}))},canRedo:()=>!I.destroyed&&I.canRedo,redo:()=>{I.destroyed||(I.redo(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:h}))},addToSelection:async D=>{this.updateGraphics.add(D),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[D],removed:[],type:"selection-change"},type:"update"}),L.onEnd(),L.destroy();const j=await this._setupMove3DOperation(this.updateGraphics.toArray(),i,n,"transform",!0);Qi(j)||this._setUpdateOperationHandle(j,i)},removeFromSelection:D=>{this.updateGraphics.remove(D),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[D],type:"selection-change"},type:"update"}),L.complete()},toggleTool:async()=>{if(i.toggleToolOnClick===!1)return;L.onEnd(),L.destroy();const D=await this._setupGraphicTransform3DOperation(this.updateGraphics.toArray(),i,n,!0);Qi(D)||this._setUpdateOperationHandle(D,i)}});return P.push(...this._getHandlesForComponent(L,i),n.on("immediate-click",D=>this._getCommonUpdateOperationClickHandlers(L,D,i),Wt.WIDGET),n.on("key-down",D=>{this._getCommonUpdateOperationKeyDownHandlers(L,D)},Wt.WIDGET)),L}async _setupTransformOrReshape2DOperation(e,i,n,s){this.updateGraphics.addMany(e),await this._updateSpatialReference(e);const h=i==="transform"?await this._getBox(e,n,s):await this._getReshape(e,n,s);if(Qi(h))return h;const f=new wc({activeComponent:h,type:"update",onEnd:()=>{_a(y),_a(m),f.activeComponent&&!f.activeComponent.destroyed&&f.activeComponent.destroy(),this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray())},undo:()=>{jv(f,this.updateGraphics.toArray()),f.refreshComponent(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:f.tool})},redo:()=>{Gv(f,this.updateGraphics.toArray()),f.refreshComponent(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:f.tool})},addToSelection:async x=>{let E=f.activeComponent;if((E==null?void 0:E.type)==="reshape"){const k=[...this.updateGraphics,x];this.updateGraphics.removeAll(),f.onEnd(),f.destroy();const I=await this._setupTransformOrReshape2DOperation(k,"transform",n,s);if(Qi(I))return;this._setUpdateOperationHandle(I,n)}else this.updateGraphics.add(x),E.graphics=this.updateGraphics.toArray(),E.refresh(),f.resetHistory();this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[x],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:async x=>{const E=this.updateGraphics.indexOf(x);f.history.undo.forEach(I=>I.updates.splice(E,1)),f.history.redo.forEach(I=>I.updates.splice(E,1)),this.updateGraphics.remove(x);const k=this.updateGraphics.toArray();if(k.length===0)f.complete();else{const I=k[0].geometry;k.length!==1||I==null||I.type!=="point"&&I.type!=="multipoint"?f.activeComponent.graphics=k:f.toggleTool()}this.emit("update",{graphics:k,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[x],type:"selection-change"},type:"update"})},toggleTool:async()=>{var I;if(this.updateGraphics.length>1)return;const x=this.updateGraphics.at(0),E=x.geometry;if(E!=null&&(f.tool==="reshape"&&(E.type==="point"||E.type==="multipoint")||f.tool==="transform"&&E.type==="extent"))return;let k=null;f.tool==="transform"?k=await this._getReshape([x],n,s):f.tool==="reshape"&&(k=await this._getBox([x],n,s)),Qi(k)||((I=f.activeComponent)==null||I.destroy(),f.activeComponent=k,f.activeComponent&&(_a(y),y=this._getHandlesForComponent(f,n)))}}),m=[s.on("immediate-click",x=>this._getCommonUpdateOperationClickHandlers(f,x,n),Wt.WIDGET),s.on("key-down",x=>{if(this._getCommonUpdateOperationKeyDownHandlers(f,x),x.key===pi.constraint&&!x.repeat&&f){const E=f.activeComponent;E&&E.type==="box"&&(E.preserveAspectRatio=!E.preserveAspectRatio)}},Wt.WIDGET),s.on("key-up",x=>{if(x.key===pi.constraint&&f){const E=f.activeComponent;E&&E.type==="box"&&(E.preserveAspectRatio=!E.preserveAspectRatio)}},Wt.WIDGET)];let y=this._getHandlesForComponent(f,n);return f}async _getGraphicMover(e,i,n){const{enableMoveAllGraphics:s,highlightOptions:h}=i,f=await this._requireModule(ge(()=>import("./GraphicMover-CTHqNBWd.js").then(m=>m.G),__vite__mapDeps([322,308,155,4,288,81,34]),import.meta.url));return Qi(f)?f:new f.module.default({enableMoveAllGraphics:s,highlightsEnabled:!!(h!=null&&h.enabled),indicatorsEnabled:!1,graphics:e,view:n,callbacks:{onGraphicMoveStart:({dx:m,dy:y,graphic:x})=>{this._displayGrabbingCursor(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:m,dy:y,mover:x,type:"move-start"},type:"update"})},onGraphicMove:({dx:m,dy:y,graphic:x})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:m,dy:y,mover:x,type:"move"},type:"update"}),onGraphicMoveStop:({dx:m,dy:y,graphic:x})=>{this._displayPointerCursor(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:m,dy:y,mover:x,type:"move-stop"},type:"update"})},onGraphicPointerOver:()=>this._displayPointerCursor(),onGraphicPointerOut:()=>this._displayDefaultCursor()}})}async _getBox(e,i,n){var E,k;const{enableRotation:s,enableScaling:h,highlightOptions:f,preserveAspectRatio:m}=i,y=await this._requireModule(ge(()=>import("./Box-GHf-Mrkb.js"),__vite__mapDeps([323,308,322,155,4,288,81,34,324,305,306,296,145,60,50,300,318,314]),import.meta.url));if(Qi(y))return y;const x=(k=(E=this.view)==null?void 0:E.inputManager)==null?void 0:k.isModifierKeyDown(pi.constraint);return new y.module.default({graphics:e,enableRotation:s,enableScaling:h,highlightsEnabled:!!(f!=null&&f.enabled),preserveAspectRatio:!!m!=!!x,layer:this._internalGraphicsLayer,view:n,sketchOptions:this.sketchOptions,callbacks:{onMoveStart:I=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...I},type:"update"}),onMove:I=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...I},type:"update"}),onMoveStop:I=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...I},type:"update"}),onScaleStart:I=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...I},type:"update"}),onScale:I=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...I},type:"update"}),onScaleStop:I=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...I},type:"update"}),onRotateStart:I=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...I},type:"update"}),onRotate:I=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...I},type:"update"}),onRotateStop:I=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...I},type:"update"})}})}async _getReshape(e,i,n){var y,x,E;const s=((y=i.reshapeOptions)==null?void 0:y.edgeOperation)==="split",h=((x=i.reshapeOptions)==null?void 0:x.shapeOperation)==="move",f=!!((E=i.highlightOptions)!=null&&E.enabled),m=await this._requireModule(ge(()=>import("./Reshape-BP4qesKQ.js"),__vite__mapDeps([325,284,71,285,286,308,322,155,4,288,81,34,305,306,296,145,60,50,300,313,307,88,135,109,314,324]),import.meta.url));return Qi(m)?m:new m.module.default({enableMidpoints:s,enableMovement:h,graphic:e[0],highlightsEnabled:f,layer:this._internalGraphicsLayer,snappingManager:this.snappingManager,sketchOptions:this.sketchOptions,view:n,callbacks:{onReshapeStart:k=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...k},type:"update"}),onReshape:k=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...k},type:"update"}),onReshapeStop:({mover:k,type:I})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:k,type:I},type:"update"}),onMoveStart:({dx:k,dy:I,mover:P,type:L})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:k,dy:I,mover:P,type:L},type:"update"}),onMove:({dx:k,dy:I,mover:P,type:L})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:k,dy:I,mover:P,type:L},type:"update"}),onMoveStop:({dx:k,dy:I,mover:P,type:L})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:k,dy:I,mover:P,type:L},type:"update"}),onVertexAdd:({added:k,type:I,vertices:P})=>{const L=k.map(D=>T8(D.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:L,vertices:P,type:I},type:"update"})},onVertexRemove:({removed:k,type:I,vertices:P})=>{const L=k.map(D=>T8(D.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{removed:L,vertices:P,type:I},type:"update"})}}})}_getHandlesForComponent(e,i){const n=e.activeComponent;if(!n)return[];switch(n.type){case"graphic-mover":return[n.on("graphic-click",({graphic:s,viewEvent:h})=>{var f;(f=h.native)!=null&&f.shiftKey&&(h.stopPropagation(),e.removeFromSelection(s))}),n.on("graphic-move-start",s=>e.addToHistory(nh(s.allGraphics)))];case"box":return[n.on("graphic-click",s=>this._onTransformOrReshape2DGraphicClick(e,i,s)),n.on("move-start",s=>e.addToHistory(nh(s.graphics))),n.on("rotate-start",s=>e.addToHistory(nh(s.graphics))),n.on("scale-start",s=>e.addToHistory(nh(s.graphics)))];case"reshape":return[n.on("graphic-click",s=>this._onTransformOrReshape2DGraphicClick(e,i,s)),n.on("move-start",s=>e.addToHistory(nh([s.mover]))),n.on("reshape-start",s=>e.addToHistory(nh([s.graphic]))),n.on("vertex-add",s=>e.addToHistory(nh([s.oldGraphic]))),n.on("vertex-remove",s=>e.addToHistory(nh([s.oldGraphic])))];case"move-3d":return[n.events.on("record-undo",({updates:s})=>{e.addToHistory({updates:s})}),n.events.on("move-start",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:s.objects.length>0?s.objects[0].graphic:null,type:"move-start"},type:"update"})}),n.events.on("move",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:s.dx,dy:s.dy,mover:s.objects.length>0?s.objects[0].graphic:null,type:"move"},type:"update"})}),n.events.on("move-stop",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:s.objects.length>0?s.objects[0].graphic:null,type:"move-stop"},type:"update"})}),n.events.on("immediate-click",s=>{s.shiftKey?this._toggleSelection([s.object.graphic],e,i):e.toggleTool()})];case"transform-3d":return[n.events.on("record-undo",({updates:s})=>{e.addToHistory({updates:s})}),n.events.on("translate-start",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:s.object.graphic,dx:s.dxScreen,dy:s.dyScreen,type:"move-start"},type:"update"})}),n.events.on("translate-stop",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:s.object.graphic,dx:s.dxScreen,dy:s.dyScreen,type:"move-stop"},type:"update"})}),n.events.on("rotate-start",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:s.object.graphic,angle:s.angle,type:"rotate-start"},type:"update"})}),n.events.on("rotate-stop",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:s.object.graphic,angle:s.angle,type:"rotate-stop"},type:"update"})}),n.events.on("scale-start",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:s.object.graphic,xScale:s.xScale,yScale:s.yScale,type:"scale-start"},type:"update"})}),n.events.on("scale-stop",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:s.object.graphic,xScale:s.xScale,yScale:s.yScale,type:"scale-stop"},type:"update"})}),n.events.on("translate",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:s.object.graphic,dx:s.dxScreen,dy:s.dyScreen,type:"move"},type:"update"})}),n.events.on("rotate",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:s.object.graphic,angle:s.angle,type:"rotate"},type:"update"})}),n.events.on("scale",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:s.object.graphic,xScale:s.xScale,yScale:s.yScale,type:"scale"},type:"update"})}),n.events.on("immediate-click",s=>{s.shiftKey?this._toggleSelection([s.object.graphic],e,i):e.toggleTool()})];case"reshape-3d":return[n.events.on("reshape",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...s,mover:s.object.graphic},type:"update"})}),n.events.on("move",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...s,mover:s.object.graphic},type:"update"})}),n.events.on("vertex-add",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:s,type:"update"})}),n.events.on("vertex-remove",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:s,type:"update"})}),n.events.on("immediate-click",s=>{s.shiftKey?this._toggleSelection([s.object.graphic],e,i):e.toggleTool()})]}}_onTransformOrReshape2DGraphicClick(e,i,n){var f;const{graphic:s,viewEvent:h}=n;return(f=h.native)!=null&&f.shiftKey&&s.layer===this.layer?(h.stopPropagation(),e.removeFromSelection(s)):i.toggleToolOnClick?(h.stopPropagation(),e.toggleTool()):void 0}_setUpdateOperationHandle(e,i){var h;this._operationHandle=e;const n=(h=this.view)==null?void 0:h.map;this._disablePopup(i);const s=()=>{if(e===this._operationHandle){const f=this.updateGraphics.toArray(),m=this._operationHandle.tool;this._operationHandle.destroy(),this._operationHandle=null,this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray()),this.updateGraphics.removeAll(),n&&n.remove(this._internalGraphicsLayer),this._restorePopup(i),this.emit("update",{graphics:f,state:"complete",aborted:e.cancelled,tool:m,toolEventInfo:null,type:"update"})}};e.on("complete",s)}async _getCommonUpdateOperationClickHandlers(e,i,n){const s=io(i),h=await i.async(()=>this._getFirstHit(s));if(h==null)return void e.complete();if(i.native.shiftKey&&this._toggleSelection([h.graphic],e,n))return void i.stopPropagation();this.updateGraphics.includes(h.graphic)?i.stopPropagation():e.complete()}_toggleSelection(e,i,n){const s=!!n.multipleSelectionEnabled;return e.some(h=>h!=null&&!(!s||h.layer!==this.layer)&&(this.updateGraphics.includes(h)?i.removeFromSelection(h):i.addToSelection(h),!0))}_getCommonUpdateOperationKeyDownHandlers(e,i){if(!e)return;const n=i.key;n===pi.undo&&e.canUndo()?(i.stopPropagation(),e.undo()):n===pi.redo&&e.canRedo()?(i.stopPropagation(),e.redo()):n===pi.cancel?(i.stopPropagation(),e.cancel()):this.allowDeleteKey&&pi.delete.includes(n)&&this._onDeleteKey(i)}_onDeleteKey(e){var s;if(!this._operationHandle||this._operationHandle.type!=="update")return;const i=this.activeComponent,n=this.updateGraphics.toArray();i!=null&&(i.type!=="reshape"||n.length===1&&((s=n[0].geometry)==null?void 0:s.type)==="point")&&(e.stopPropagation(),this.delete())}_removeDefaultLayer(){var e,i;this._internalGraphicsLayer&&((i=(e=this.view)==null?void 0:e.map)==null||i.remove(this._internalGraphicsLayer),this._internalGraphicsLayer=mt(this._internalGraphicsLayer))}_isComponentGraphic(e){var n;const{activeComponent:i}=this;return!(!e||i==null)&&(((n=e.attributes)==null?void 0:n.esriSketchTool)||i.type==="draw-2d"&&i.graphic===e||(i.type==="box"||i.type==="reshape")&&i.isUIGraphic(e))}_displayPointerCursor(){var e;(e=this.view)!=null&&e.container&&this.view.cursor!=="pointer"&&(this.view.cursor="pointer")}_displayGrabbingCursor(){var e;(e=this.view)!=null&&e.container&&this.view.cursor!=="grabbing"&&(this.view.cursor="grabbing")}_displayDefaultCursor(){var e;(e=this.view)!=null&&e.container&&this.view.cursor!==null&&(this.view.cursor=null)}_logError(e,i,n){Ae.getLogger(this).error(new ce(e,i,n))}async _requireModule(e){const i=new AbortController;this._moduleLoaderAbortController=i;const n=await e;return this._moduleLoaderAbortController!==i||i.signal.aborted?{requireError:"aborted"}:{module:n}}_emitUndoEvent(e){this.emit("undo",{...e,type:"undo"})}_emitRedoEvent(e){this.emit("redo",{...e,type:"redo"})}_emitDeleteEvent(e){this.emit("delete",{...e,type:"delete"})}get test(){}wait(){return su(()=>!this.updating)}_beginAsyncOperation(){this._numUpdating+=1,this.notifyChange("updating")}_endAsyncOperation(){this._numUpdating-=1,this.notifyChange("updating")}_disablePopupEnabled(e){var i;return((i=this.view)==null?void 0:i.type)!=="3d"||this.updateOnGraphicClick||((e==null?void 0:e.toggleToolOnClick)??!1)}_disablePopup(e){this._disablePopupEnabled(e)&&this.view&&this._originalPopupEnabled==null&&(this._originalPopupEnabled=this.view.popupEnabled,this.view.popupEnabled=!1)}_restorePopup(e){this._disablePopupEnabled(e)&&this.view&&this._originalPopupEnabled!=null&&(this.view.popupEnabled=this._originalPopupEnabled,this._originalPopupEnabled=null)}async _waitViewReady(){const e=this.view;e?(Ms(this._viewReadyAbortController),this._viewReadyAbortController=new AbortController,await Qm(su(()=>e==null?void 0:e.ready),this._viewReadyAbortController.signal)):this._logMissingView()}_logMissingView(){this._logError("sketch:missing-property",OA("view"))}_logMissingLayer(){this._logError(V5e,OA("layer"))}};_([S()],Dt.prototype,"_defaultSnappingManager",void 0),_([S()],Dt.prototype,"updating",null),_([S()],Dt.prototype,"_operationHandle",void 0),_([S({readOnly:!0})],Dt.prototype,"activeTool",null),_([S()],Dt.prototype,"activeTooltip",null),_([S()],Dt.prototype,"activeFillSymbol",void 0),_([S()],Dt.prototype,"activeLineSymbol",void 0),_([S()],Dt.prototype,"activeVertexSymbol",void 0),_([S()],Dt.prototype,"allowDeleteKey",void 0),_([S({readOnly:!0})],Dt.prototype,"createGraphic",null),_([S()],Dt.prototype,"defaultCreateOptions",null),_([S()],Dt.prototype,"defaultUpdateOptions",null),_([S({type:Iy,nonNullable:!0})],Dt.prototype,"labelOptions",null),_([S()],Dt.prototype,"layer",void 0),_([S({types:Ad})],Dt.prototype,"pointSymbol",void 0),_([S({types:Ad})],Dt.prototype,"polygonSymbol",void 0),_([S({types:Ad})],Dt.prototype,"polylineSymbol",void 0),_([S()],Dt.prototype,"meshSymbol",void 0),_([S({type:Ay,nonNullable:!0})],Dt.prototype,"snappingOptions",null),_([S()],Dt.prototype,"snappingManager",null),_([S({readOnly:!0})],Dt.prototype,"state",null),_([S({type:HM,nonNullable:!0})],Dt.prototype,"tooltipOptions",null),_([S({readOnly:!0})],Dt.prototype,"updateGraphics",void 0),_([S()],Dt.prototype,"updateOnGraphicClick",void 0),_([S({type:S_,nonNullable:!0})],Dt.prototype,"valueOptions",null),_([S({types:Ad})],Dt.prototype,"vertexSymbol",void 0),_([S({value:null})],Dt.prototype,"view",null),_([S({constructOnly:!0,type:$_})],Dt.prototype,"sketchOptions",void 0),Dt=_([J("esri.widgets.Sketch.SketchViewModel")],Dt);const V5e="sketch:missing-property",OA=t=>`Property '${t}' is missing on SketchViewModel.`;function q5e(t){return t==="polygon"||t==="rectangle"||t==="circle"}function jv(t,e){LV("undo",t.history.undo,t.history.redo,e)}function Gv(t,e){LV("redo",t.history.redo,t.history.undo,e)}function LV(t,e,i,n){const s=e.pop();if(!s)return;const h=s.updates,f=[];n.forEach((m,y)=>{const x=h[y];x!=null&&("geometry"in x&&x.geometry!=null&&(f.push({geometry:m.geometry}),m.geometry=x.geometry),"symbol"in x&&x.symbol!=null&&(f.push({symbol:m.symbol}),m.symbol=x.symbol),"undo"in x&&(f.push(x),x[t](m)))}),i.push({updates:f})}function PA(t,e){t!=null&&e.hasGrabbedManipulators&&(t.activeTool=null)}function nh(t){return{updates:t.map(({geometry:e})=>(e==null?void 0:e.type)==="mesh"?{geometry:e.cloneShallow()}:{geometry:e})}}function Uv(t,e){var i;(i=t.tools)==null||i.remove(e),e.destroyed||e.destroy()}function Qi(t){return"requireError"in t&&t.requireError==="aborted"}const W5e=Dt;let eo=class extends Oe{constructor(e){super(e),this.colorSelection=!0,this.dynamicScaleToggle=!0,this.gridEnabledToggle=!0,this.numericInputs=!0,this.gridSnapEnabledToggle=!0,this.lineIntervalInput=!0,this.outOfScaleWarning=!0,this.placementButtons=!0,this.rotateWithMapToggle=!0}};_([S({type:Boolean,nonNullable:!0})],eo.prototype,"colorSelection",void 0),_([S({type:Boolean,nonNullable:!0})],eo.prototype,"dynamicScaleToggle",void 0),_([S({type:Boolean,nonNullable:!0})],eo.prototype,"gridEnabledToggle",void 0),_([S({type:Boolean,nonNullable:!0})],eo.prototype,"numericInputs",void 0),_([S({type:Boolean,nonNullable:!0})],eo.prototype,"gridSnapEnabledToggle",void 0),_([S({type:Boolean,nonNullable:!0})],eo.prototype,"lineIntervalInput",void 0),_([S({type:Boolean,nonNullable:!0})],eo.prototype,"outOfScaleWarning",void 0),_([S({type:Boolean,nonNullable:!0})],eo.prototype,"placementButtons",void 0),_([S({type:Boolean,nonNullable:!0})],eo.prototype,"rotateWithMapToggle",void 0),eo=_([J("esri.widgets.support.GridControls.VisibleElements")],eo);const DV=eo;let to=class extends Oe{constructor(e){super(e),this.enabledToggle=!0,this.featureEnabledToggle=!0,this.gridEnabledToggle=!0,this.header=!1,this.layerList=!0,this.gridControls=!0,this.gridControlsElements=new DV({gridSnapEnabledToggle:!1,gridEnabledToggle:!1}),this.layerListToggleLayersButton=!0,this.selfEnabledToggle=!0}};_([S({type:Boolean,nonNullable:!0})],to.prototype,"enabledToggle",void 0),_([S({type:Boolean,nonNullable:!0})],to.prototype,"featureEnabledToggle",void 0),_([S({type:Boolean,nonNullable:!0})],to.prototype,"gridEnabledToggle",void 0),_([S({type:Boolean,nonNullable:!0})],to.prototype,"header",void 0),_([S({type:Boolean,nonNullable:!0})],to.prototype,"layerList",void 0),_([S({type:Boolean,nonNullable:!0})],to.prototype,"gridControls",void 0),_([S({type:DV,nonNullable:!0})],to.prototype,"gridControlsElements",void 0),_([S({type:Boolean,nonNullable:!0})],to.prototype,"layerListToggleLayersButton",void 0),_([S({type:Boolean,nonNullable:!0})],to.prototype,"selfEnabledToggle",void 0),to=_([J("esri.widgets.support.SnappingControls.VisibleElements")],to);const z_=to;let Ko=class extends Oe{constructor(e){super(e),this.point=!0,this.polyline=!0,this.polygon=!0,this.rectangle=!0,this.circle=!0,this.multipoint=!0,this.mesh=!0}};_([S({type:Boolean,nonNullable:!0})],Ko.prototype,"point",void 0),_([S({type:Boolean,nonNullable:!0})],Ko.prototype,"polyline",void 0),_([S({type:Boolean,nonNullable:!0})],Ko.prototype,"polygon",void 0),_([S({type:Boolean,nonNullable:!0})],Ko.prototype,"rectangle",void 0),_([S({type:Boolean,nonNullable:!0})],Ko.prototype,"circle",void 0),_([S({type:Boolean,nonNullable:!0})],Ko.prototype,"multipoint",void 0),_([S({type:Boolean,nonNullable:!0})],Ko.prototype,"mesh",void 0),Ko=_([J("esri.widgets.Sketch.VisibleElements.CreateToolVisibilityMap")],Ko);let Td=class extends Oe{constructor(e){super(e),this["rectangle-selection"]=!0,this["lasso-selection"]=!0,this["custom-selection"]=!0}};_([S({nonNullable:!0})],Td.prototype,"rectangle-selection",void 0),_([S({nonNullable:!0})],Td.prototype,"lasso-selection",void 0),_([S({nonNullable:!0})],Td.prototype,"custom-selection",void 0),Td=_([J("esri.widgets.Sketch.VisibleElements.SelectionToolVisibilityMap")],Td);let ys=class extends Oe{constructor(e){super(e),this.createTools=new Ko,this.directionModePicker=!1,this.duplicateButton=!0,this.labelsToggle=!0,this.selectionTools=new Td,this.settingsMenu=!0,this.snappingControls=!0,this.snappingControlsElements=new z_,this.tooltipsToggle=!0,this.undoRedoMenu=!0}};_([S({type:Ko,nonNullable:!0})],ys.prototype,"createTools",void 0),_([S({type:Boolean,nonNullable:!0})],ys.prototype,"directionModePicker",void 0),_([S({type:Boolean,nonNullable:!0})],ys.prototype,"duplicateButton",void 0),_([S({type:Boolean,nonNullable:!0})],ys.prototype,"labelsToggle",void 0),_([S({type:Td,nonNullable:!0})],ys.prototype,"selectionTools",void 0),_([S({type:Boolean,nonNullable:!0})],ys.prototype,"settingsMenu",void 0),_([S({type:Boolean,nonNullable:!0})],ys.prototype,"snappingControls",void 0),_([S({type:z_,nonNullable:!0})],ys.prototype,"snappingControlsElements",void 0),_([S({type:Boolean,nonNullable:!0})],ys.prototype,"tooltipsToggle",void 0),_([S({type:Boolean,nonNullable:!0})],ys.prototype,"undoRedoMenu",void 0),ys=_([J("esri.widgets.Sketch.VisibleElements")],ys);const zV=ys;function RA(t){let e,i,n=[],s=!1;function h(...f){return s&&e===this&&K5e(f,n)||(i=t.apply(this,f),e=this,n=f,s=!0),i}return h}function K5e(t,e){if(t.length!==e.length)return!1;for(let i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}let Z5e=class{constructor(e){this._observable=new R0,this._set=new Set(e)}get size(){return Ge(this._observable),this._set.size}add(e){const i=this._set.size;return this._set.add(e),this._set.size!==i&&this._observable.notify(),this}clear(){this._set.size>0&&(this._set.clear(),this._observable.notify())}delete(e){const i=this._set.delete(e);return i&&this._observable.notify(),i}entries(){return Ge(this._observable),this._set.entries()}forEach(e,i){Ge(this._observable),this._set.forEach((n,s)=>e.call(i,n,s,this),i)}has(e){return Ge(this._observable),this._set.has(e)}keys(){return Ge(this._observable),this._set.keys()}values(){return Ge(this._observable),this._set.values()}[Symbol.iterator](){return Ge(this._observable),this._set[Symbol.iterator]()}get[Symbol.toStringTag](){return this._set[Symbol.toStringTag]}};const J5e=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function N6(t){return t instanceof Oe}function NA(t){return t instanceof Pe?Object.keys(t.items):N6(t)?Cc(t).keys():t?Object.keys(t):[]}function Bv(t,e){return t instanceof Pe?t.items[e]:t[e]}function Y5e(t,e){return!(!Array.isArray(t)||!Array.isArray(e))&&t.length!==e.length}function im(t){return t?t.declaredClass:null}function FV(t,e){var k;const i=t.diff;if(i&&typeof i=="function")return i(t,e);const n=NA(t),s=NA(e);if(n.length===0&&s.length===0)return;if(!n.length||!s.length||Y5e(t,e))return{type:"complete",oldValue:t,newValue:e};const h=s.filter(I=>!n.includes(I)),f=n.filter(I=>!s.includes(I)),m=n.filter(I=>s.includes(I)&&Bv(t,I)!==Bv(e,I)).concat(h,f).sort(),y=im(t);if(y&&J5e.has(y)&&m.length)return{type:"complete",oldValue:t,newValue:e};let x;const E=N6(t)&&N6(e);for(const I of m){const P=Bv(t,I),L=Bv(e,I);let D;if((E||typeof P!="function"&&typeof L!="function")&&P!==L&&(P!=null||L!=null)){if(i&&i[I]&&typeof i[I]=="function")D=(k=i[I])==null?void 0:k.call(i,P,L);else if(P instanceof Date&&L instanceof Date){if(P.getTime()===L.getTime())continue;D={type:"complete",oldValue:P,newValue:L}}else D=typeof P=="object"&&typeof L=="object"&&im(P)===im(L)?FV(P,L):{type:"complete",oldValue:P,newValue:L};D!=null&&(x!=null?x.diff[I]=D:x={type:"partial",diff:{[I]:D}})}}return x}function fPe(t,e){return X5e(t,e)}function X5e(t,e){if(t==null)return!1;const i=e.split(".");let n=t;for(const s of i){if(n.type==="complete")return!0;if(n.type!=="partial")return!1;{const h=n.diff[s];if(!h)return!1;n=h}}return!0}function gPe(t,e){if(!t)return!1;if(t.type==="partial"){const i=Object.keys(t.diff);return i.length===1&&i[0]===e}return!1}function Q5e(t,e){if(typeof t!="function"&&typeof e!="function"&&(t!=null||e!=null))return t==null||e==null||typeof t=="object"&&typeof e=="object"&&im(t)!==im(e)?{type:"complete",oldValue:t,newValue:e}:FV(t,e)}function Hv(t){if(t==null)return!0;switch(t.type){case"complete":return!1;case"collection":{const e=t;for(const i of e.added)if(!Hv(i))return!1;for(const i of e.removed)if(!Hv(i))return!1;for(const i of e.changed)if(!Hv(i))return!1;return!0}case"partial":for(const e in t.diff)if(!Hv(t.diff[e]))return!1;return!0}}function u2(t,e){return t===e||t!=null&&e!=null&&Ai(t.spatialReference,e.spatialReference)&&t.x===e.x&&t.y===e.y&&t.z===e.z&&t.m===e.m}function xx(t,e,i){return t===e||t!=null&&e!=null&&Ai(t.spatialReference,e.spatialReference)&&Ts(t.x,e.x,i)&&Ts(t.y,e.y,i)&&Ts(t.z??0,e.z??0,i)&&Ts(t.m??0,e.m??0,i)}const mPe=["freehand","hybrid","click"],jV="click";let exe=class{constructor({consumesClicks:e,grabbableForEvent:i}){this.events=new un,this.interactive=!0,this.selectable=!1,this.cursor=null,this.grabbable=!0,this.consumesClicks=e,this.grabbableForEvent=i}destroy(){}intersectionDistance(e,i){return 0}attach(){}detach(){}onElevationChange(){}onViewChange(){}};var Ki;(function(t){t[t.Z=0]="Z",t[t.M=1]="M"})(Ki||(Ki={}));let txe=class{constructor(e){this.spatialReference=e}createVector(){return this._tag(at())}pointToVector(e){return this._tag(Is(e.x,e.y))}arrayToVector(e){return this._tag(Is(e[0],e[1]))}vectorToArray(e){return[e[0],e[1]]}pointToArray(e){return[e.x,e.y]}vectorToPoint(e,i=new Ne){return i.x=e[0],i.y=e[1],i.z=void 0,i.m=void 0,i.spatialReference=this.spatialReference,i}arrayToPoint(e,i=new Ne){return i.x=e[0],i.y=e[1],i.z=void 0,i.m=void 0,i.spatialReference=this.spatialReference,i}vectorToDehydratedPoint(e,i){if(e)return i??(i={x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"}),i.x=e[0],i.y=e[1],i.z=void 0,i.m=void 0,i.hasZ=!1,i.hasM=!1,i.spatialReference=this.spatialReference,i}lerp(e,i,n,s){return YE(s,e,i,n)}addDelta(e,i,n){e[0]+=i,e[1]+=n}distance(e,i){return mp(e,i)}getZ(e,i=void 0){return i}hasZ(){return!1}getM(e,i=void 0){return i}hasM(){return!1}clone(e){return this._tag(cj(e))}copy(e,i){return Fd(i,e)}fromXYZ(e){return this._tag(Is(e[0],e[1]))}toXYZ(e,i=Te()){return vi(i,e[0],e[1],0)}pointToXYZ(e,i=Te()){return vi(i,e.x,e.y,0)}equals(e,i){return xj(e,i)}_tag(e){return e}},LA=class{constructor(e,i){this._valueType=e,this.spatialReference=i}createVector(){return this._tag(Te())}pointToVector(e){return this._tag(Mr(e.x,e.y,this._valueType===Ki.Z?e.z:e.m))}arrayToVector(e){return this._tag(Mr(e[0],e[1],e[2]||0))}vectorToArray(e){return[e[0],e[1],e[2]]}pointToArray(e){return this._valueType===Ki.Z?[e.x,e.y,e.z]:[e.x,e.y,e.m]}vectorToPoint(e,i=new Ne){return i.x=e[0],i.y=e[1],i.z=this._valueType===Ki.Z?e[2]:void 0,i.m=this._valueType===Ki.M?e[2]:void 0,i.spatialReference=this.spatialReference,i}arrayToPoint(e,i=new Ne){return i.x=e[0],i.y=e[1],i.z=this._valueType===Ki.Z?e[2]:void 0,i.m=this._valueType===Ki.M?e[2]:void 0,i.spatialReference=this.spatialReference,i}vectorToDehydratedPoint(e,i){if(!e)return;i??(i={x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"});const n=this._valueType===Ki.Z,s=this._valueType===Ki.M;return i.x=e[0],i.y=e[1],i.z=n?e[2]:void 0,i.m=s?e[2]:void 0,i.hasZ=n,i.hasM=s,i.spatialReference=this.spatialReference,i}lerp(e,i,n,s){return H0(s,e,i,n)}addDelta(e,i,n,s){e[0]+=i,e[1]+=n,this._valueType===Ki.Z&&(e[2]+=s)}distance(e,i){return this._valueType===Ki.Z?Su(e,i):mp(e,i)}getZ(e,i=void 0){return this._valueType===Ki.Z?e[2]:i}hasZ(){return this._valueType===Ki.Z}getM(e,i=void 0){return this._valueType===Ki.M?e[2]:i}hasM(){return this._valueType===Ki.M}clone(e){return this._tag(sD(e))}copy(e,i){return Er(i,e)}fromXYZ(e,i=0,n=0){return this._tag(Mr(e[0],e[1],this._valueType===Ki.Z?e.length>2?e[2]:i:n))}toXYZ(e,i=Te()){return vi(i,e[0],e[1],this._valueType===Ki.Z?e[2]:0)}pointToXYZ(e,i=Te()){return vi(i,e.x,e.y,this._valueType===Ki.Z?e.z??0:0)}equals(e,i){return Cm(e,i)}_tag(e){return e}},ixe=class{constructor(e){this.spatialReference=e}createVector(){return this._tag(Mu())}pointToVector(e){return this._tag(la(e.x,e.y,e.z,e.m))}arrayToVector(e){return this._tag(la(e[0],e[1],e[2]||0,e[3]||0))}vectorToArray(e){return[e[0],e[1],e[2],e[3]]}pointToArray(e){return[e.x,e.y,e.z,e.m]}vectorToPoint(e,i=new Ne){return i.x=e[0],i.y=e[1],i.z=e[2],i.m=e[3],i.spatialReference=this.spatialReference,i}arrayToPoint(e,i=new Ne){return i.x=e[0],i.y=e[1],i.z=e[2],i.m=e[3],i.spatialReference=this.spatialReference,i}vectorToDehydratedPoint(e,i){if(e)return i??(i={x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"}),i.x=e[0],i.y=e[1],i.z=e[2],i.m=e[3],i.hasZ=!0,i.hasM=!0,i.spatialReference=this.spatialReference,i}lerp(e,i,n,s){return JM(s,e,i,n)}addDelta(e,i,n,s){e[0]+=i,e[1]+=n,e[2]+=s}distance(e,i){return Su(e,i)}getZ(e){return e[2]}hasZ(){return!0}getM(e){return e[3]}hasM(){return!0}clone(e){return this._tag(HH(e))}copy(e,i){return S0(i,e)}fromXYZ(e,i=0,n=0){return this._tag(la(e[0],e[1],e.length>2?e[2]:i,n))}toXYZ(e,i=Te()){return vi(i,e[0],e[1],e[2])}pointToXYZ(e,i=Te()){return vi(i,e.x,e.y,e.z??0)}equals(e,i){return Oy(e,i)}_tag(e){return e}};function GV(t,e,i){return t&&e?new ixe(i):e?new LA(Ki.M,i):t?new LA(Ki.Z,i):new txe(i)}var L6;let bf=L6=class extends ts(De){constructor(t){super(t),this.type="georeferenced",this.origin=null}};bf.absolute=new L6,_([Ze({georeferenced:"georeferenced"},{readOnly:!0})],bf.prototype,"type",void 0),_([S({type:[Number],nonNullable:!1,json:{write:!0}})],bf.prototype,"origin",void 0),bf=L6=_([J("esri.geometry.support.MeshGeoreferencedVertexSpace")],bf);const nxe=bf;let Mg=class extends ts(De){constructor(e){super(e),this.type="local",this.origin=Te()}};_([Ze({local:"local"},{readOnly:!0})],Mg.prototype,"type",void 0),_([S({type:[Number],nonNullable:!0,json:{write:!0}})],Mg.prototype,"origin",void 0),Mg=_([J("esri.geometry.support.MeshLocalVertexSpace")],Mg);const rxe=Mg;function DA(){return Ae.getLogger("esri.geometry.Mesh")}function xPe(t){return!f7(t)}function f7(t){return t.origin!=null}function sxe(t){return f7(t.vertexSpace)}function SPe(t,e){if(!f7(t))return null;const[i,n,s]=t.origin;return new Ne({x:i,y:n,z:s,spatialReference:e})}function TPe(t,e){const{x:i,y:n,z:s,spatialReference:h}=t,f=[i,n,s??0];return(e==null?void 0:e.geographic)!==void 0&&(Jf(DA(),"option: geographic",{replacement:"Use the `vertexSpace` option instead.",version:"4.29",warnOnce:!0}),e.vertexSpace&&DA().warn("Deprecated geographic flag ignored since vertexSpace option is provided.")),((e==null?void 0:e.vertexSpace)??axe(e==null?void 0:e.geographic)??oxe(h))==="local"?new rxe({origin:f}):new nxe({origin:f})}function oxe(t){return t.isGeographic||t.isWebMercator?"local":"georeferenced"}function axe(t){return t==null?void 0:t?"local":"georeferenced"}function EPe(t,e){return t.type===e.type&&(t.origin===e.origin||t.origin!=null&&e.origin!=null&&Zt(t.origin,e.origin))}function lxe(t){return"declaredClass"in t}function zA(t){return"declaredClass"in t}function cxe(t){return"declaredClass"in t}function MPe(t,e){return t?cxe(t)?t:new du({layer:e,sourceLayer:e,visible:t.visible,symbol:_e(t.symbol),attributes:_e(t.attributes),geometry:hxe(t.geometry)}):null}function hxe(t){return t==null?null:lxe(t)?t:Yd(uxe(t))}function uxe(t){const{wkid:e,wkt:i,wkt2:n,latestWkid:s}=t.spatialReference,h={wkid:e,wkt:i,wkt2:n,latestWkid:s};switch(t.type){case"point":{const{x:f,y:m,z:y,m:x}=t;return{x:f,y:m,z:y,m:x,spatialReference:h}}case"polygon":{const{rings:f,hasZ:m,hasM:y}=t;return{rings:FA(f),hasZ:m,hasM:y,spatialReference:h}}case"polyline":{const{paths:f,hasZ:m,hasM:y}=t;return{paths:FA(f),hasZ:m,hasM:y,spatialReference:h}}case"extent":{const{xmin:f,xmax:m,ymin:y,ymax:x,zmin:E,zmax:k,mmin:I,mmax:P,hasZ:L,hasM:D}=t;return{xmin:f,xmax:m,ymin:y,ymax:x,zmin:E,zmax:k,mmin:I,mmax:P,hasZ:L,hasM:D,spatialReference:h}}case"multipoint":{const{points:f,hasZ:m,hasM:y}=t;return{points:BV(f)?UV(f):f,hasZ:m,hasM:y,spatialReference:h}}default:return}}function FA(t){return dxe(t)?t.map(e=>UV(e)):t}function UV(t){return t.map(e=>Array.from(e))}function dxe(t){for(const e of t)if(e.length!==0)return BV(e);return!1}function BV(t){return t.length>0&&(qm(t[0])||Wm(t[0]))}function F_(t,e){if(!t)return null;let i;if(zA(t)){if(e==null)return t.clone();if(zA(e))return e.copy(t)}return e!=null?(i=e,i.x=t.x,i.y=t.y,i.spatialReference=t.spatialReference,t.hasZ?(i.z=t.z,i.hasZ=t.hasZ):(i.z=void 0,i.hasZ=!1),t.hasM?(i.m=t.m,i.hasM=!0):(i.m=void 0,i.hasM=!1)):(i=Pl(t.x,t.y,t.z,t.spatialReference),t.hasM&&(i.m=t.m,i.hasM=!0)),i}function pxe(t){const{wkid:e,wkt:i,wkt2:n,latestWkid:s}=t,h={wkid:e,wkt:i,wkt2:n,latestWkid:s};return Ke.fromJSON(h)}function fxe(t,e){if(!e.supported)return;let i=1/0,n=-1/0;const s=e.upperBoundX-e.lowerBoundX;t.forEach(f=>{let m=f.pos[0];for(;m<e.lowerBoundX;)m+=s;for(;m>e.upperBoundX;)m-=s;i=Math.min(i,m),n=Math.max(n,m),f.pos[0]=m});const h=n-i;s-h<h&&t.forEach(f=>{f.pos[0]<0&&(f.pos[0]+=s)})}function gxe(t,e){const i=cr(t);return e===pa.Global&&i?{supported:!0,lowerBoundX:i.valid[0],upperBoundX:i.valid[1]}:{supported:!1,lowerBoundX:null,upperBoundX:null}}let Ly=class{constructor(e){this.component=e,this.leftEdge=null,this.rightEdge=null,this.type="vertex",this.index=null}get pos(){return this._pos}set pos(e){this._pos=e,this.component.unnormalizeVertexPositions()}},Lc=class{constructor(e,i,n){this.component=e,this.leftVertex=i,this.rightVertex=n,this.type="edge",i.rightEdge=this,n.leftEdge=this}},j_=class{constructor(e,i){this._spatialReference=e,this._viewingMode=i,this.vertices=[],this.edges=[],this.index=null}unnormalizeVertexPositions(){this.vertices.length<=1||fxe(this.vertices,gxe(this._spatialReference,this._viewingMode))}updateVertexIndex(e,i){if(this.vertices.length===0)return;const n=this.vertices[0];let s=null,h=e,f=i;do s=h,s.index=f++,h=s.rightEdge?s.rightEdge.rightVertex:null;while(h!=null&&h!==n);s.leftEdge&&s!==this.vertices[this.vertices.length-1]&&this.swapVertices(this.vertices.indexOf(s),this.vertices.length-1)}getFirstVertex(){return this.vertices.at(0)}getLastVertex(){return this.vertices.at(-1)}isClosed(){return this.vertices.length>2&&this.vertices[0].leftEdge!==null}swapVertices(e,i){const n=this.vertices[e];this.vertices[e]=this.vertices[i],this.vertices[i]=n}iterateVertices(e){if(this.vertices.length===0)return;const i=this.vertices[0];let n=i;do e(n,n.index),n=n.rightEdge!=null?n.rightEdge.rightVertex:null;while(n!==i&&n!=null)}},D6=class HV extends un{constructor(e,i){super(),this.type=e,this.coordinateHelper=i,this._geometry=null,this._dirty=!0,this.components=[]}get geometry(){if(this._dirty){switch(this.type){case"point":this._geometry=this._toPoint();break;case"polyline":this._geometry=this._toPolyline();break;case"polygon":this._geometry=this._toPolygon();break;case"mesh":break;default:this.type}this._dirty=!1}return this._geometry}get spatialReference(){return this.coordinateHelper.spatialReference}get allVertices(){return Array.from(this.iterateVertices())}*iterateVertices(){for(const e of this.components)for(const i of e.vertices)yield i}notifyChanges(e){this._dirty=!0,this.emit("change",e)}_toPoint(){return this.components.length===0||this.components[0].vertices.length===0?null:this.coordinateHelper.vectorToPoint(this.components[0].vertices[0].pos)}_toPolyline(){const e=[],i=this.coordinateHelper.vectorToArray;for(const n of this.components){if(n.vertices.length<1)continue;const s=[];let h=n.vertices.find(m=>m.leftEdge==null);const f=h;do s.push(i(h.pos)),h=h.rightEdge?h.rightEdge.rightVertex:null;while(h&&h!==f);e.push(s)}return new Tr({paths:e,spatialReference:this.spatialReference,hasZ:this.coordinateHelper.hasZ(),hasM:this.coordinateHelper.hasM()})}_toPolygon(){const e=[],i=this.coordinateHelper.vectorToArray;for(const n of this.components){if(n.vertices.length<1)continue;const s=[],h=n.vertices[0];let f=h;const m=f;do s.push(i(f.pos)),f=f.rightEdge!=null?f.rightEdge.rightVertex:null;while(f&&f!==m);n.isClosed()&&s.push(i(h.pos)),e.push(s)}return new ln({rings:e,spatialReference:this.spatialReference,hasZ:this.coordinateHelper.hasZ(),hasM:this.coordinateHelper.hasM()})}static fromGeometry(e,i){const n=e.spatialReference,s=GV(e.hasZ,e.hasM,n),h=new HV(e.type,s);switch(e.type){case"polygon":mxe(h,e,i);break;case"polyline":yxe(h,e,i);break;case"point":jA(h,e,i);break;case"mesh":jA(h,e.origin,i),h._geometry=e,h._dirty=!1}return h}};function mxe(t,e,i){const n=e.spatialReference,s=t.coordinateHelper,h=e.rings;for(let f=0;f<h.length;++f){const m=h[f],y=new j_(n,i);y.index=f;const x=m.length>2&&fl(m[0],m[m.length-1]),E=x?m.length-1:m.length;for(let I=0;I<E;++I){const P=s.arrayToVector(m[I]),L=new Ly(y);y.vertices.push(L),L.pos=P,L.index=I}const k=y.vertices.length-1;for(let I=0;I<k;++I){const P=y.vertices[I],L=y.vertices[I+1],D=new Lc(y,P,L);y.edges.push(D)}if(x){const I=new Lc(y,y.vertices[y.vertices.length-1],y.vertices[0]);y.edges.push(I)}t.components.push(y)}}function yxe(t,e,i){const n=e.spatialReference,s=t.coordinateHelper,h=e.paths;for(let f=0;f<h.length;++f){const m=h[f],y=new j_(n,i);y.index=f;const x=m.length;for(let k=0;k<x;++k){const I=s.arrayToVector(m[k]),P=new Ly(y);y.vertices.push(P),P.pos=I,P.index=k}const E=y.vertices.length-1;for(let k=0;k<E;++k){const I=y.vertices[k],P=y.vertices[k+1],L=new Lc(y,I,P);y.edges.push(L)}t.components.push(y)}}function jA(t,e,i){const n=e.spatialReference,s=t.coordinateHelper,h=new j_(n,i);h.index=0;const f=new Ly(h);f.index=0,f.pos=s.pointToVector(e),h.vertices.push(f),t.components.push(h)}function M1(t){return t.type==="mesh"}var Br;(function(t){t[t.NEW_STEP=0]="NEW_STEP",t[t.ACCUMULATE_STEPS=1]="ACCUMULATE_STEPS"})(Br||(Br={}));let vxe=class{constructor(e,i,n){this._editGeometry=e,this._component=i,this._pos=n,this._addedVertex=null,this._originalEdge=null,this._left=null,this._right=null}apply(){let e="redo";this._addedVertex==null&&(e="apply",this._addedVertex=new Ly(this._component));const i=this._component.getLastVertex();if(i==null)this._component.vertices.push(this._addedVertex),this._addedVertex.pos=this._pos,this._addedVertex.index=0;else{let n=null;i.rightEdge&&(this._originalEdge=i.rightEdge,n=this._originalEdge.rightVertex,this._component.edges.splice(this._component.edges.indexOf(this._originalEdge),1)),this._component.vertices.push(this._addedVertex),this._addedVertex.pos=this._pos,this._left==null&&(this._left=new Lc(this._component,i,this._addedVertex)),this._component.edges.push(this._left),i.rightEdge=this._left,this._originalEdge!=null&&n!=null&&(this._right==null&&(this._right=new Lc(this._component,this._addedVertex,n)),this._component.edges.push(this._right),n.leftEdge=this._right),this._component.updateVertexIndex(this._addedVertex,i.index+1)}this._editGeometry.notifyChanges({operation:e,addedVertices:[this._addedVertex]})}undo(){this._addedVertex!=null&&(this._component.vertices.splice(this._component.vertices.indexOf(this._addedVertex),1),this._left!=null&&(this._component.edges.splice(this._component.edges.indexOf(this._left),1),this._left.leftVertex.rightEdge=null),this._right!=null&&(this._component.edges.splice(this._component.edges.indexOf(this._right),1),this._right.rightVertex.leftEdge=null),this._originalEdge!=null&&(this._component.edges.push(this._originalEdge),this._originalEdge.leftVertex.rightEdge=this._originalEdge,this._originalEdge.rightVertex.leftEdge=this._originalEdge),this._left!=null?this._component.updateVertexIndex(this._left.leftVertex,this._left.leftVertex.index):this._component.updateVertexIndex(this._addedVertex,0),this._editGeometry.notifyChanges({operation:"undo",removedVertices:[this._addedVertex]}))}accumulate(){return!1}},bxe=class VV{constructor(e,i,n){this._editGeometry=e,this._vertices=i,this.operation=n,this._undone=!1}apply(){this._vertices.forEach(e=>this.operation.apply(e)),this._editGeometry.components.forEach(e=>e.unnormalizeVertexPositions()),this._editGeometry.notifyChanges({operation:this._undone?"redo":"apply",updatedVertices:this._vertices})}undo(){this._vertices.forEach(e=>this.operation.undo(e)),this._editGeometry.notifyChanges({operation:"undo",updatedVertices:this._vertices}),this._undone=!0}canAccumulate(e){if(this._undone||e._vertices.length!==this._vertices.length)return!1;for(let i=0;i<e._vertices.length;++i)if(e._vertices[i]!==this._vertices[i])return!1;return this.operation.canAccumulate(e.operation)}accumulate(e){return!!(e instanceof VV&&this.canAccumulate(e))&&(this._vertices.forEach(i=>this.operation.accumulate(i,e.operation)),this.operation.accumulateParams(e.operation),this._editGeometry.components.forEach(i=>i.unnormalizeVertexPositions()),this._editGeometry.notifyChanges({operation:"apply",updatedVertices:this._vertices}),!0)}};var go;(function(t){t[t.CUMULATIVE=0]="CUMULATIVE",t[t.REPLACE=1]="REPLACE"})(go||(go={}));let wxe=class{constructor(e,i,n=0){this._editGeometry=e,this._vertices=i,this._minNumberOfVertices=n,this.removedVertices=null}apply(){let e="redo";if(this.removedVertices==null){const i=this.removedVertices=[];this._vertices.forEach(n=>{const s=this._removeVertex(n);s!=null&&i.push(s)}),e="apply"}else this.removedVertices.forEach(i=>{this._removeVertex(i.removedVertex)});this._editGeometry.notifyChanges({operation:e,removedVertices:this._vertices})}undo(){var e;(e=this.removedVertices)==null||e.forEach(i=>{this._undoRemoveVertex(i)}),this._editGeometry.notifyChanges({operation:"undo",addedVertices:this._vertices})}accumulate(){return!1}_removeVertex(e){const i=e.component;if(i.vertices.length<=this._minNumberOfVertices)return null;const n={removedVertex:e,createdEdge:null},s=e.leftEdge,h=e.rightEdge;return i.vertices.splice(i.vertices.indexOf(e),1),s&&(i.edges.splice(i.edges.indexOf(s),1),s.leftVertex.rightEdge=null),h&&(i.edges.splice(i.edges.indexOf(h),1),h.rightVertex.leftEdge=null),e.index===0&&h&&this._vertices.length>0&&i.swapVertices(i.vertices.indexOf(h.rightVertex),0),s&&h&&(n.createdEdge=new Lc(i,s.leftVertex,h.rightVertex),i.edges.push(n.createdEdge)),h&&i.updateVertexIndex(h.rightVertex,h.rightVertex.index-1),n}_undoRemoveVertex(e){const i=e.removedVertex,n=e.removedVertex.component,s=i.leftEdge,h=i.rightEdge;e.createdEdge&&n.edges.splice(n.edges.indexOf(e.createdEdge),1),n.vertices.push(i),s&&(n.edges.push(s),s.leftVertex.rightEdge=s),h&&(n.edges.push(h),h.rightVertex.leftEdge=h),n.updateVertexIndex(i,i.index)}},_xe=class{constructor(e,i,n){this._editGeometry=e,this._edge=i,this._t=n,this.createdVertex=null,this._left=null,this._right=null}apply(){let e="redo";const i=this._edge,n=i.component,s=i.leftVertex,h=i.rightVertex;n.edges.splice(n.edges.indexOf(i),1),this.createdVertex==null&&(e="apply",this.createdVertex=new Ly(i.component)),n.vertices.push(this.createdVertex),this.createdVertex.pos=this._editGeometry.coordinateHelper.lerp(i.leftVertex.pos,i.rightVertex.pos,this._t,this._editGeometry.coordinateHelper.createVector()),this._left==null&&(this._left=new Lc(n,s,this.createdVertex)),this._left.leftVertex.leftEdge?n.edges.push(this._left):n.edges.unshift(this._left),s.rightEdge=this._left,this._right==null&&(this._right=new Lc(n,this.createdVertex,h)),n.edges.push(this._right),h.leftEdge=this._right,n.updateVertexIndex(this.createdVertex,s.index+1),this._editGeometry.notifyChanges({operation:e,addedVertices:[this.createdVertex]})}undo(){if(this.createdVertex==null||this._left==null||this._right==null)return null;const e=this._edge,i=e.component,n=this.createdVertex.leftEdge,s=this.createdVertex.rightEdge,h=n==null?void 0:n.leftVertex,f=s==null?void 0:s.rightVertex;i.vertices.splice(i.vertices.indexOf(this.createdVertex),1),i.edges.splice(i.edges.indexOf(this._left),1),i.edges.splice(i.edges.indexOf(this._right),1),this._edge.leftVertex.leftEdge?i.edges.push(this._edge):i.edges.unshift(this._edge),h&&(h.rightEdge=e),f&&(f.leftEdge=e),h&&i.updateVertexIndex(h,h.index),this._editGeometry.notifyChanges({operation:"undo",removedVertices:[this.createdVertex]})}accumulate(){return!1}},xxe=class qV{constructor(e,i,n){this._editGeometry=e,this._vertex=i,this._pos=n}apply(){const e=this._originalPosition==null;e&&(this._originalPosition=this._vertex.pos),this._apply(e?"apply":"redo")}undo(){this._vertex.pos=this._originalPosition,this._editGeometry.notifyChanges({operation:"undo",updatedVertices:[this._vertex]})}accumulate(e){return e instanceof qV&&e._vertex===this._vertex&&(this._pos=e._pos,this._apply("apply"),!0)}_apply(e){this._vertex.pos=this._pos,this._editGeometry.components.forEach(i=>i.unnormalizeVertexPositions()),this._editGeometry.notifyChanges({operation:e,updatedVertices:[this._vertex]})}},Sxe=class{constructor(e,i){this._editGeometry=e,this._component=i,this._createdEdge=null}apply(){let e="redo";if(this._createdEdge==null){e="apply";const i=this._component.getFirstVertex(),n=this._component.getLastVertex();if(this._component.isClosed()||this._component.vertices.length<3||i==null||n==null)return;this._createdEdge=new Lc(this._component,n,i)}this._createdEdge.leftVertex.rightEdge=this._createdEdge,this._createdEdge.rightVertex.leftEdge=this._createdEdge,this._component.edges.push(this._createdEdge),this._editGeometry.notifyChanges({operation:e})}undo(){this._createdEdge!=null&&(a3(this._component.edges,this._createdEdge),this._createdEdge.leftVertex.rightEdge=null,this._createdEdge.rightVertex.leftEdge=null,this._editGeometry.notifyChanges({operation:"undo"}))}accumulate(){return!1}},GA=class WV{constructor(e,i,n,s){this._editGeometry=e,this.dx=i,this.dy=n,this.dz=s,this._firstTime=!0}apply(){const e=this._firstTime?"apply":"redo";this._firstTime=!1,this._apply(e,this.dx,this.dy,this.dz)}undo(){this._apply("undo",-this.dx,-this.dy,-this.dz)}accumulate(e){const i=this._editGeometry.geometry;return e instanceof WV&&e._editGeometry.geometry===i&&(this._apply("apply",e.dx,e.dy,e.dz),this.dx+=e.dx,this.dy+=e.dy,this.dz+=e.dz,!0)}_apply(e,i,n,s){const h=this._editGeometry.geometry;h.offset(i,n,s);const f=this._editGeometry.components[0].getFirstVertex();if(!f)return;const m=this._editGeometry.coordinateHelper;f.pos=m.pointToVector(h.origin),this._editGeometry.notifyChanges({operation:e,updatedVertices:[f]})}},Txe=class KV{constructor(e,i,n,s){this._helper=e,this.dx=i,this.dy=n,this.dz=s}_move(e,i,n,s){this._helper.addDelta(e.pos,i,n,s)}apply(e){this._move(e,this.dx,this.dy,this.dz)}undo(e){this._move(e,-this.dx,-this.dy,-this.dz)}canAccumulate(e){return e instanceof KV}accumulate(e,i){this._move(e,i.dx,i.dy,i.dz)}accumulateParams(e){this.dx+=e.dx,this.dy+=e.dy,this.dz+=e.dz}},Exe=class z6{get plane(){return this._plane}get requiresSplitEdgeLeft(){return!this._left.isOriginalDirection}get requiresSplitEdgeRight(){return!this._right.isOriginalDirection}get edgeDirection(){return this._edgeDirection}constructor(e,i,n,s=0,h=nm.IMMEDIATE){this._helper=e,this._planeType=i,this._edge=n,this.distance=s,this._plane=dr(),this._offsetPlane=dr(),this._minDistance=-1/0,this._maxDistance=1/0,this._selectedArrow=1,h===nm.IMMEDIATE&&this._initialize()}_initialize(){this._initializeNeighbors(),this._initializePlane(),this._initializeDistanceConstraints()}_initializeNeighbors(){var h,f,m,y;const e=this._toXYZ(this._edge.leftVertex.pos),i=this._toXYZ((f=(h=this._edge.leftVertex.leftEdge)==null?void 0:h.leftVertex)==null?void 0:f.pos),n=this._toXYZ(this._edge.rightVertex.pos),s=this._toXYZ((y=(m=this._edge.rightVertex.rightEdge)==null?void 0:m.rightVertex)==null?void 0:y.pos);this._edgeDirection=XS(Te(),e,n),i?(this._left=this._computeNeighbor(e,i,this._edgeDirection),this._right=this._computeNeighbor(n,s,this._edgeDirection,this._left)):(this._right=this._computeNeighbor(n,s,this._edgeDirection),this._left=this._computeNeighbor(e,i,this._edgeDirection,this._right))}_toXYZ(e){return e!=null?this._helper.toXYZ(e):null}_pointToXYZ(e){return this._toXYZ(this._helper.pointToVector(e))}_computeNeighbor(e,i,n,s){const h=Te();if(i){XS(h,e,i);const f=!this._passesBisectingAngleThreshold(h,n);return{start:e,end:i,direction:f?this._bisectVectorsPerpendicular(n,h):h,isOriginalDirection:!f}}return this._helper.hasZ()?s&&(Zi(h,n,s.direction),Zi(h,h,n),wn(h,h),Math.sign(h[1])!==Math.sign(n[0])&&Cr(h,h,-1)):vi(h,-n[1],n[0],0),{start:e,end:i,direction:h,isOriginalDirection:!0}}_passesBisectingAngleThreshold(e,i){const n=Math.abs(YH(i,e));return n>=UA&&n<=Math.PI-UA}_bisectVectorsPerpendicular(e,i){const n=vt(e,i)<0?e:JS(Te(),e),s=Math.abs(vt(n,i));if(!(s<BA||s>1-BA))return this._bisectDirection(n,i);const h=Zi(Te(),n,[0,0,1]);return wn(h,h)}_bisectDirection(e,i){const n=xr(Te(),e,i);return wn(n,n)}_initializePlane(){const e=this._computeNormalDirection(this._left),i=this._computeNormalDirection(this._right);vt(e,i)<0&&JS(i,i),Z0(this._left.start,this._bisectDirection(e,i),this._plane)}_computeNormalDirection(e){const i=Zi(Te(),e.direction,this._edgeDirection);wn(i,i);const n=Zi(Te(),this._edgeDirection,i);return this._planeType===F6.XY&&(n[2]=0),wn(n,n)}_initializeDistanceConstraints(){this._left.end==null||this.requiresSplitEdgeLeft||this._updateDistanceConstraint(nl(this._plane,this._left.end)),this._right.end==null||this.requiresSplitEdgeRight||this._updateDistanceConstraint(nl(this._plane,this._right.end)),this._updateIntersectDistanceConstraint(this._plane)}_updateDistanceConstraint(e){e<=0&&(this._minDistance=Math.max(this._minDistance,e)),e>=0&&(this._maxDistance=Math.min(this._maxDistance,e))}_updateIntersectDistanceConstraint(e){const i=e,n=this._edgeDirection,s=xr(Te(),this._left.start,this._left.direction),h=xr(Te(),this._right.start,this._right.direction),f=this._pointInBasis2D(at(),i,n,this._left.start),m=this._pointInBasis2D(at(),i,n,s),y=this._pointInBasis2D(at(),i,n,this._right.start),x=this._pointInBasis2D(at(),i,n,h),[E]=q_e({start:m,end:f,type:yi.LINE},{start:x,end:y,type:yi.LINE});if(!E)return;const k=Vi(at(),f,m);hw(k,k);const I=Vi(at(),E,m),P=Gc(k,I),L=xr(Te(),s,Cr(Te(),this._left.direction,-P)),D=nl(e,L);this._updateDistanceConstraint(D)}_pointInBasis2D(e,i,n,s){return e[0]=tm(i,s),e[1]=tm(n,s),e}_offset(e,i){Number.isFinite(this._minDistance)&&(i=Math.max(this._minDistance,i)),Number.isFinite(this._maxDistance)&&(i=Math.min(this._maxDistance,i)),l2(this._offsetPlane,this._plane),this._offsetPlane[3]-=i;const n=(h,f,m)=>f!=null&&QM(this._offsetPlane,h,xr(Te(),h,f),m),s=Te();(e===this._edge.leftVertex?n(this._left.start,this._left.direction,s):n(this._right.start,this._right.direction,s))&&this._helper.copy(this._helper.fromXYZ(s,void 0,this._helper.getM(e.pos)),e.pos)}selectArrowFromStartPoint(e){this._selectedArrow=tV(this.plane,this._pointToXYZ(e))?1:-1}get selectedArrow(){return this._selectedArrow}signedDistanceToPoint(e){return nl(this.plane,this._pointToXYZ(e))}clampedStartAndEnd(e){const i=this._helper.toXYZ(this._helper.pointToVector(e)),n=e7(this._plane,i,Te()),s=nl(this._plane,i),h=hr(s,this._minDistance,this._maxDistance);return H0(i,n,i,h/s),{start:n,end:i}}apply(e){this._offset(e,this.distance)}undo(e){this._offset(e,0)}canAccumulate(e){return e instanceof z6&&this._edge.leftVertex.index===e._edge.leftVertex.index&&this._edge.rightVertex.index===e._edge.rightVertex.index&&this._edge.component===e._edge.component&&this._maybeEqualsVec3(this._left.direction,e._left.direction)&&this._maybeEqualsVec3(this._right.direction,e._right.direction)&&Cm(this._plane,e._plane)}accumulate(e,i){const n=this._plane[3]-i._plane[3]+i.distance;this._offset(e,n)}accumulateParams(e){const i=e.distance-e._plane[3];this.distance=i+this._plane[3]}clone(){const e=new z6(this._helper,this._planeType,this._edge,this.distance,nm.DEFERRED);return l2(e._plane,this._plane),l2(e._offsetPlane,this._offsetPlane),e._maxDistance=this._maxDistance,e._minDistance=this._minDistance,e._left=this._cloneNeighbor(this._left),e._right=this._cloneNeighbor(this._right),e._edgeDirection=Er(Te(),this._edgeDirection),e}_maybeEqualsVec3(e,i){return e==null&&i==null||e!=null&&i!=null&&Cm(e,i)}_cloneNeighbor({start:e,end:i,direction:n,isOriginalDirection:s}){return{start:Er(Te(),e),end:i!=null?Er(Te(),i):null,direction:Er(Te(),n),isOriginalDirection:s}}};const UA=xc(15),BA=.001;var F6,nm;(function(t){t[t.XYZ=0]="XYZ",t[t.XY=1]="XY"})(F6||(F6={})),function(t){t[t.IMMEDIATE=0]="IMMEDIATE",t[t.DEFERRED=1]="DEFERRED"}(nm||(nm={}));let Mxe=class ZV{constructor(e,i,n=go.CUMULATIVE){this.origin=e,this.angle=i,this._accumulationType=n}_rotate(e,i){wj(e.pos,e.pos,this.origin,i)}apply(e){this._rotate(e,this.angle)}undo(e){this._rotate(e,-this.angle)}canAccumulate(e){return e instanceof ZV&&fl(this.origin,e.origin)}accumulate(e,i){const n=i._accumulationType===go.REPLACE;this._rotate(e,n?i.angle-this.angle:i.angle)}accumulateParams(e){const i=e._accumulationType===go.REPLACE;this.angle=i?e.angle:this.angle+e.angle}},$xe=class JV{constructor(e,i,n,s,h=go.CUMULATIVE){this.origin=e,this.axis1=i,this.factor1=n,this.factor2=s,this._accumulationType=h,this.axis2=Is(i[1],-i[0])}_scale(e,i,n){GS(e.pos,e.pos,this.origin,this.axis1,i),GS(e.pos,e.pos,this.origin,this.axis2,n)}apply(e){this._scale(e,this.factor1,this.factor2)}undo(e){this._scale(e,1/this.factor1,1/this.factor2)}canAccumulate(e){return e instanceof JV&&fl(this.origin,e.origin)&&fl(this.axis1,e.axis1)}accumulate(e,i){i._accumulationType===go.REPLACE?this._scale(e,i.factor1/this.factor1,i.factor2/this.factor2):this._scale(e,i.factor1,i.factor2)}accumulateParams(e){const i=e._accumulationType===go.REPLACE;this.factor1=i?e.factor1:this.factor1*e.factor1,this.factor2=i?e.factor2:this.factor2*e.factor2}},kxe=class YV{constructor(e,i){this._editGeometry=e,this._newPositions=i}apply(){const e=this._originalPositions==null?"apply":"redo";if(!this._originalPositions){const i=this._editGeometry.coordinateHelper;this._originalPositions=this._editGeometry.allVertices.map(n=>i.clone(n.pos))}this._apply(e,this._newPositions)}undo(){this._originalPositions&&this._apply("undo",this._originalPositions)}accumulate(e){return e instanceof YV&&(this._newPositions=e._newPositions,this._apply("apply",this._newPositions),!0)}_apply(e,i){const n=this._editGeometry.coordinateHelper,s=this._editGeometry.allVertices;for(let h=0;h<s.length;h++)n.copy(i[h],s[h].pos);this._editGeometry.components.forEach(h=>h.unnormalizeVertexPositions()),this._editGeometry.notifyChanges({operation:e,updatedVertices:s})}};var XV;const Cxe=Symbol();let Ixe=class{constructor(e){this._operations=[],this._closed=!1,this[XV]=!0,e&&(this._operations=e,this._closed=!0)}close(){this._closed=!0}apply(){for(const e of this._operations)e.apply()}undo(){for(let e=this._operations.length-1;e>=0;e--)this._operations[e].undo()}accumulate(e){if(this._closed)return!1;const i=this._operations.length?this._operations[this._operations.length-1]:null;return i&&i.accumulate(e)||(this._operations.push(e),e.apply()),!0}};XV=Cxe;let j6=class QV extends un{constructor(e,i){super(),this.data=e,this.viewingMode=i,this._undoStack=[],this._redoStack=[],this._listener=this.data.on("change",n=>{n.addedVertices&&this.emit("vertex-add",{type:"vertex-add",vertices:n.addedVertices,operation:n.operation}),n.removedVertices&&this.emit("vertex-remove",{type:"vertex-remove",vertices:n.removedVertices,operation:n.operation}),n.updatedVertices&&this.emit("vertex-update",{type:"vertex-update",vertices:n.updatedVertices,operation:n.operation})})}destroy(){this._listener.remove()}splitEdge(e,i){return this._apply(new _xe(this.data,e,i))}updateVertices(e,i,n=Br.ACCUMULATE_STEPS){return this._apply(new bxe(this.data,e,i),n)}move(e,i,n,s=Br.ACCUMULATE_STEPS){return M1(this.data)?this._apply(new GA(this.data,e,i,n),s):this.moveVertices(this.data.allVertices,e,i,n,s)}moveVertices(e,i,n,s,h=Br.ACCUMULATE_STEPS){return M1(this.data)?this._apply(new GA(this.data,i,n,s),h):this.updateVertices(e,new Txe(this.data.coordinateHelper,i,n,s),h)}scale(e,i,n,s,h=Br.ACCUMULATE_STEPS,f=go.CUMULATIVE){return this.scaleVertices(this.data.allVertices,e,i,n,s,h,f)}scaleVertices(e,i,n,s,h,f=Br.ACCUMULATE_STEPS,m=go.CUMULATIVE){return this.updateVertices(e,new $xe(i,n,s,h,m),f)}rotate(e,i,n=Br.ACCUMULATE_STEPS,s=go.CUMULATIVE){return this.rotateVertices(this.data.allVertices,e,i,n,s)}rotateVertices(e,i,n,s=Br.ACCUMULATE_STEPS,h=go.CUMULATIVE){return this.updateVertices(e,new Mxe(i,n,h),s)}removeVertices(e){return this._apply(new wxe(this.data,e,this._minNumVerticesPerType))}appendVertex(e){return this.data.components.length===0?null:this._apply(new vxe(this.data,this.data.components[0],e))}setVertexPosition(e,i){return this._apply(new xxe(this.data,e,i))}offsetEdge(e,i,n,s=Br.ACCUMULATE_STEPS){return this.updateVertices([i.leftVertex,i.rightVertex],new Exe(this.data.coordinateHelper,e,i,n),s)}trySetGeometry(e,i=Br.ACCUMULATE_STEPS){const{data:n}=this,{coordinateHelper:s}=n;if(n.type!==e.type||!n.spatialReference.equals(e.spatialReference)||s.hasZ()!==e.hasZ||s.hasM()!==e.hasM||!EX(n.geometry,e)||M1(n))return;const h=Array.from(D6.fromGeometry(e,this.viewingMode).iterateVertices(),f=>f.pos);return this.setVertexPositions(h,i)}setVertexPositions(e,i=Br.ACCUMULATE_STEPS){return this._apply(new kxe(this.data,e),i)}createResetState(){if(M1(this.data))return this._createResetStateMesh();const e=this.data.geometry.clone();return ct(()=>this.trySetGeometry(e))}closeComponent(e){return this.data.components.includes(e)?this._apply(new Sxe(this.data,e)):null}canRemoveVertex(e){return e.vertices.length>this._minNumVerticesPerType}createUndoGroup(){const e=new Ixe;return this._apply(e),ct(()=>e.close())}undo(){if(this._undoStack.length>0){const e=this._undoStack.pop();return e.undo(),this._redoStack.push(e),e}return null}redo(){if(this._redoStack.length>0){const e=this._redoStack.pop();return e.apply(),this._undoStack.push(e),e}return null}get canUndo(){return this._undoStack.length>0}get canRedo(){return this._redoStack.length>0}get lastOperation(){return this._undoStack.length>0?this._undoStack[this._undoStack.length-1]:null}get _minNumVerticesPerType(){switch(this.data.type){case"point":return 1;case"polyline":return 2;case"polygon":return 3;default:return 0}}_apply(e,i=Br.ACCUMULATE_STEPS){return i!==Br.NEW_STEP&&this.lastOperation!=null&&this.lastOperation.accumulate(e)||(e.apply(),this._undoStack.push(e),this._redoStack=[]),e}_createResetStateMesh(){if(!M1(this.data))return ct();const e=this.data.geometry,{vertexSpace:i}=e;if(i.origin){const s=Xr(i.origin);return ct(()=>{e.vertexSpace.origin=s})}const n=e.vertexAttributes.clonePositional();return ct(()=>{e.vertexAttributes=n,e.vertexAttributesChanged()})}static fromGeometry(e,i){return new QV(D6.fromGeometry(e,i),i)}};function Axe(t,e){let i=null,n=null;return s=>{if(s.action==="cancel")return void(n!=null&&(n.execute({action:"cancel"}),i=null,n=null));const h={action:s.action,screenStart:s.start,screenEnd:s.screenPoint};s.action==="start"&&i==null&&(i=new G6,n=new G6,e(t,i,n,s.pointerType,h)),i!=null&&i.execute(h),s.action==="end"&&i!=null&&(i=null,n=null)}}function Sx(t,e){return t.events.on("drag",Axe(t,e))}function NPe(t,e){const i=[t.x,t.y,t.z??0],n=e,s=[Math.cos(n),Math.sin(n)],h=Math.sqrt(s[0]*s[0]+s[1]*s[1]);if(h===0)return null;s[0]/=h,s[1]/=h;const f=m=>{const y=(m.x-i[0])*s[0]+(m.y-i[1])*s[1];m.x=i[0]+y*s[0],m.y=i[1]+y*s[1]};return m=>(f(m.mapStart),f(m.mapEnd),{...m,axis:s})}function Oxe(t){let e=null;return i=>{if(i.action==="start"&&(e=Pxe(t,i.mapStart.spatialReference)),e==null)return null;const n=i.mapEnd.x-i.mapStart.x,s=i.mapEnd.y-i.mapStart.y,h=(i.mapEnd.z??0)-(i.mapStart.z??0);return e.move(n,s,h,i.action),{...i,translationX:n,translationY:s,translationZ:h}}}function HA(t,e){return t==null?null:t.spatialReference.equals(e)?t.clone():Qr(t,e)}function Pxe(t,e){const i=t.operations;if(!i)return null;const n=i.data.geometry,s=pxe(e);if(n.spatialReference.equals(s))return Tx(t,i,()=>{});if(n.type!=="mesh"){const h=HA(n,s);if(h==null)return null;const f=n.spatialReference;return Tx(t,j6.fromGeometry(h,i.viewingMode),()=>{const m=Qr(n,f);i.trySetGeometry(m)})}if(sxe(n)){const h=HA(n.origin,s);if(!h)return null;const f=n.spatialReference,m=j6.fromGeometry(h,i.viewingMode);return Tx(t,i,()=>{const y=Qr(m.data.geometry,f),x=y.x-n.origin.x,E=y.y-n.origin.y,k=(y.z??0)-(n.origin.z??0);i.move(x,E,k)})}return null}function Tx(t,e,i){let n=0,s=0,h=0;return{move:(f,m,y,x)=>{var P;x==="start"&&(n=0,s=0,h=0);const E=f-n,k=m-s,I=y-h;e.move(E,k,I),n+=E,s+=k,h+=I,i(),x==="end"&&((P=t.endInteraction)==null||P.call(t))}}}function LPe(t,e=null,i){var f;let n=null;const s=e==null||(f=t.spatialReference)!=null&&f.equals(e)?m=>m:m=>m!=null?Qr(m,e):m,h={exclude:[],...i};return m=>{if(m.action==="start"&&(n=s(t.toMap(m.screenStart,h))),n==null)return null;const y=s(t.toMap(m.screenEnd,h));return y!=null?{...m,mapStart:n,mapEnd:y}:null}}function DPe(t){const e=t.map(i=>Oxe(i)).filter(Yi);return i=>{const n=i.mapEnd.x-i.mapStart.x,s=i.mapEnd.y-i.mapStart.y,h=i.mapEnd.z-i.mapStart.z;return e.forEach(f=>f(i)),{...i,translationX:n,translationY:s,translationZ:h}}}function zPe(t,e){const i=new Map;for(const n of e)i.set(n,_e(t[n]));return n=>(i.forEach((s,h)=>{t[h]=s}),n)}function Rxe(t){var i;const e=(i=t.operations)==null?void 0:i.createResetState();return n=>(e==null||e.remove(),n)}function FPe(t){const e=t.map(i=>Rxe(i)).filter(i=>i!=null);return i=>(e.forEach(n=>n(i)),i)}function jPe(){let t=0,e=0,i=0;return n=>{n.action==="start"&&(t=n.mapStart.x,e=n.mapStart.y,i=n.mapStart.z);const s=n.mapEnd.x-t,h=n.mapEnd.y-e,f=n.mapEnd.z-i;return t=n.mapEnd.x,e=n.mapEnd.y,i=n.mapEnd.z,{...n,mapDeltaX:s,mapDeltaY:h,mapDeltaZ:f,mapDeltaSpatialReference:n.mapStart.spatialReference}}}function GPe(){let t=0,e=0;return i=>{i.action==="start"&&(t=i.screenStart.x,e=i.screenStart.y);const n=i.screenEnd.x-t,s=i.screenEnd.y-e;return t=i.screenEnd.x,e=i.screenEnd.y,{...i,screenDeltaX:n,screenDeltaY:s}}}function UPe(t,e){let i=null,n=0,s=0;return h=>{var x;if(h.action==="start"&&(i=(x=t.toScreen)==null?void 0:x.call(t,e),i!=null&&(i.x<0||i.x>t.width||i.y<0||i.y>t.height?i=null:(n=h.screenStart.x-i.x,s=h.screenStart.y-i.y))),i==null)return null;const f=hr(h.screenEnd.x-n,0,t.width),m=hr(h.screenEnd.y-s,0,t.height),y=Ri(f,m);return h.screenStart=i,h.screenEnd=y,h}}const Nxe=()=>{};let G6=class eq{constructor(){this.execute=Nxe}next(e,i=new eq){return e!=null&&(this.execute=n=>{const s=e(n);s!=null&&i.execute(s)}),i}};function Lxe(t,e,i=[]){if(t.type==="2d")return s=>s;let n=null;return s=>{s.action==="start"&&(n=t.toMap(s.screenStart,{exclude:i}),n!=null&&(n.z=qw(n,t,e)));const h=t.toMap(s.screenEnd,{exclude:i});h!=null&&(h.z=qw(h,t,e));const f=n!=null&&h!=null?{sceneStart:n,sceneEnd:h}:null;return{...s,scenePoints:f}}}function VA(t,e,i){const n=e.elevationProvider.getElevation(t.x,t.y,t.z??0,t.spatialReference,"scene")??0,s=F_(t);return s.z=n,s.hasZ=!0,s.z=qw(s,e,i),s}function BPe(t,e){if(t.type==="2d")return n=>n;let i=null;return n=>{n.action==="start"&&(i=VA(n.mapStart,t,e));const s=VA(n.mapEnd,t,e),h=i!=null&&s!=null?{sceneStart:i,sceneEnd:s}:null;return{...n,scenePoints:h}}}function HPe(t,e,i,n,s,h){let f="geodesic",m=Vw(i);const y=Sn();return Vh(t,e,n,y),y[2]=0,m&&yu(y,i,y,m)||(f="euclidean",m=i),{mode:f,view:e,elevationInfo:n,hasZ:s,directionMode:h,spatialReference:t.spatialReference,measurementSR:m,origin:y}}function Dxe(t,e,i){if(e==null||t==null)return;const n=FY(i.measurementSR);if(n==null)return;const s=G_(t,i);if(s==null)return;const h=w_(e,n);return new l7(s,h)}function zxe(t,e,i,n){if(i==null||t==null)return;const s=G_(t,n);if(s==null)return;const h=xl(i),f=10,m=x=>{if(x==null)return;const E=Sn(),k=_l(x,"degrees","geographic");return Ewe(E,s,n.measurementSR,f,k,n.mode)?new o5e(s,E):void 0},y=()=>{if(e!=null&&t!=null)return xl(DM(e,t))};switch(n.directionMode){case on.Absolute:return m(h);case on.Relative:{const x=y();return x==null?void 0:m(x+h)}case on.RelativeBilateral:{const x=y();return x==null?void 0:Ny([m(x+h),m(x-h)])}}}function tq(t,e){const i=U_(t,e);return i!=null?new TV(i):void 0}function iq(t,e,i){const{context:n,longitude:s,latitude:h,direction:f,distance:m,elevation:y}=i;if(s!=null||h!=null||m!=null||y!=null||f!=null){if(s!=null||h!=null){const x=xl(s),E=xl(h),k=U_(y,n);return new d7(x,E,k)}return Fxe(t,e,i)}}function Fxe(t,e,{context:i,direction:n,distance:s,elevation:h}){if(e==null)return tq(h,i);const{view:f,elevationInfo:m,measurementSR:y}=i,x=Vh(e,f,m);if(!y||!yu(x,e.spatialReference,qA,y))return;const[E,k]=qA,I=s!=null?w_(s,"meters"):void 0,P=xl(n),L=U_(h,i),D=H=>{const W=new $V([E,k],y,I,L,H);return I==null||H==null||L==null&&i.hasZ?W:new bp(W.closestTo(x))};if(P==null)return D(void 0);const j=()=>{if(t!=null&&e!=null)return xl(DM(t,e))};switch(i.directionMode){case on.Absolute:return D(P);case on.Relative:{const H=j();return H==null?void 0:D(H+P)}case on.RelativeBilateral:{const H=j();return H==null?void 0:Ny([D(H+P),D(H-P)])}}}function jxe(t){return t.context.mode==="geodesic"?iq(null,null,t):nq(t)}function Gxe(t,e,i){const{context:n,x:s,y:h,distance:f,direction:m,elevation:y}=i;return n.mode==="geodesic"?iq(e,t,i):s!=null||h!=null?nq(i):Uxe([Dxe(t,f,n),zxe(t,e,m,n),tq(y,n)])}function nq({x:t,y:e,elevation:i,context:n}){Vv.x=(t==null?void 0:t.value)??0,Vv.y=(e==null?void 0:e.value)??0,Vv.spatialReference=n.spatialReference;const s=G_(Vv,n,Vxe);return new d7(t!=null&&s!=null?s[0]:void 0,e!=null&&s!=null?s[1]:void 0,U_(i,n))}function Uxe(t){let e;for(const i of t)i&&(e=(e==null?void 0:e.intersect(i))??i);return e}function G_(t,e,i=Sn()){const{view:n,elevationInfo:s,measurementSR:h,origin:f,mode:m}=e;if(Vh(t,n,s,i),yu(i,t.spatialReference,i,h))return m!=="geodesic"&&Ei(i,i,f),i}function Bxe(t,e,i,n){const{view:s,measurementSR:h,spatialReference:f,origin:m,mode:y}=i;if(y==="geodesic"?Er($1,t):xr($1,t,m),yu($1,h,$1,f))return I6($1,s,e,i,n)}function U_(t,e){var i;return((i=Hxe(t,e))==null?void 0:i.value)??void 0}function Hxe(t,{view:e,origin:i,elevationInfo:n,hasZ:s,measurementSR:h}){if(t==null||!s)return;const f=iN(h);if(f==null)return;const[m,y]=i,x=w_(t,f),E=(e==null?void 0:e.type)==="3d"?M_(e,m,y,x,h,n):x;return E!=null?mH(E,f):void 0}const qA=Sn(),Vxe=Sn(),$1=Sn(),Vv=Pl(0,0,0,Ke.WGS84);let U6=class{constructor(e){this.vertexHandle=null,this.excludeFeature=null,this.visualizer=null,this.selfSnappingZ=null,this.drawConstraints=null,this.editGeometryOperations=e.editGeometryOperations,this.elevationInfo=e.elevationInfo,this.pointer=e.pointer,this.vertexHandle=e.vertexHandle,this.excludeFeature=e.excludeFeature,this.feature=e.feature,this.visualizer=e.visualizer,this.selfSnappingZ=e.selfSnappingZ,this.drawConstraints=e.drawConstraints}get coordinateHelper(){return this.editGeometryOperations.data.coordinateHelper}get spatialReference(){return this.coordinateHelper.spatialReference}};function qxe({predicate:t=()=>!0,snappingManager:e,snappingContext:i,updatingHandles:n,useZ:s=!0}){const h=new G6;if(e==null)return{snappingStep:[WA,h],cancelSnapping:WA};let f,m=null,y=null,x=null;const E=()=>{m=Ms(m),e.doneSnapping(),y==null||y.frameTask.remove(),y=null,f=Rt(f),x=null},k=Wxe(e,s,h);let I=null,P=null,L=null;return{snappingStep:[D=>{if(!t(D))return D;const{action:j}=D;if(j==="start"){const{info:H}=D,W=Kxe(e.view);if(y=Zxe(i,D,W),y.context.selfSnappingZ=null,!s&&H!=null){const Z=Yxe(i.coordinateHelper,H.handle.component);Z!=null&&(y.context.selfSnappingZ={value:Z,elevationInfo:i.elevationInfo??vu})}}if(y!=null){const{context:H,originalScenePos:W,originalPos:Z}=y,{mapEnd:Y,mapStart:te,scenePoints:ie}=D,le=rq(Z,B6(Y,te)),pe=B6(te,Z),ve={...D,action:"update"},be=y.context,Se=Jxe(W,ie),Me=e.update({point:le,scenePoint:Se,context:H});if(L=Me,sq(Y,Me,pe,s),I=le,P=Se,j!=="end"){const{frameTask:he}=y;m==null&&(m=new AbortController),x=se=>{n.addPromise(Yr(k({frameTask:he,event:ve,context:be,point:le,scenePoint:Se,delta:pe,getLastState:()=>({point:I,scenePoint:P,updatePoint:se.forceUpdate?null:L})},m.signal)))},x({forceUpdate:!1}),f==null&&(f=Ee(()=>e.options.effectiveEnabled,()=>x==null?void 0:x({forceUpdate:!0})))}}return j==="end"&&E(),D},h],cancelSnapping:D=>(E(),D)}}function Wxe(t,e,i){return u3(async({frameTask:n,point:s,scenePoint:h,context:f,event:m,delta:y,getLastState:x},E)=>{const k=await n.schedule(()=>t.snap({point:s,scenePoint:h,context:f,signal:E}),E);if(k.valid){let I=await n.schedule(()=>k.apply(),E);const P=x();P.point!=null&&s!==P.point&&(I=t.update({point:P.point,scenePoint:P.scenePoint,context:f})),P.updatePoint!=null&&u2(I,P.updatePoint)||(sq(m.mapEnd,I,y,e),i.execute(m))}})}function Kxe(t){return t.type==="3d"?t.resourceController.scheduler.registerTask(nt.SNAPPING):dw}function Zxe(t,e,i){return{context:new U6({editGeometryOperations:t.editGeometryOperations,elevationInfo:t.elevationInfo,pointer:t.pointer,vertexHandle:e.info!=null?e.info.handle:null,excludeFeature:t.excludeFeature,feature:t.feature,visualizer:t.visualizer}),originalPos:e.snapOrigin!=null?t.coordinateHelper.vectorToDehydratedPoint(e.snapOrigin):e.mapStart,originalScenePos:e.scenePoints!=null?e.scenePoints.sceneStart:null,frameTask:i}}function rq(t,[e,i,n]){const s=F_(t);return s.x+=e,s.y+=i,s.hasZ&&(s.z+=n),s}function Jxe(t,e){return t==null||e==null?null:rq(t,B6(e.sceneEnd,e.sceneStart))}function B6(t,e){const i=t.hasZ&&e.hasZ?t.z-e.z:0;return[t.x-e.x,t.y-e.y,i]}function sq(t,e,[i,n,s],h){t.x=e.x+i,t.y=e.y+n,h&&t.hasZ&&e.hasZ&&(t.z=e.z+s)}function Yxe(t,e){if(!t.hasZ())return null;const i=e.vertices;let n=null;for(const s of i){const h=t.getZ(s.pos);if(n!=null&&h!=null&&Math.abs(h-n)>1e-6)return null;n==null&&(n=h)}return n}function WA(t){return t}let fd=class extends Oe{constructor(e){super(e),this.constrainResult=i=>i,this._snapPoints=null,this._frameTask=null,this._abortController=null,this._stagedPoint=null,this._snap=u3(async(i,n,s,h)=>{const f=this._frameTask;if(f==null)return;const m=await f.schedule(()=>n.snap({...i,context:s,signal:h}),h);m.valid&&await f.schedule(()=>{this.stagedPoint=m.apply(),i!==this._snapPoints&&this._snapPoints!=null&&(this.stagedPoint=n.update({...this._snapPoints,context:s}))},h)})}get stagedPoint(){return this._stagedPoint}set stagedPoint(e){this._stagedPoint=this.constrainResult(e)}initialize(){var i,n;const e=this.view.type==="3d"?(n=(i=this.view)==null?void 0:i.resourceController)==null?void 0:n.scheduler:null;this._frameTask=e!=null?e.registerTask(nt.SNAPPING):dw}destroy(){this._abortController=Ms(this._abortController),this._frameTask=Rt(this._frameTask)}update(e,i,n){this._snapPoints=e;const{point:s,scenePoint:h}=e,f=i.update({point:s,scenePoint:h,context:n});return this.stagedPoint=f,f}async snap(e,i,n){const{point:s,scenePoint:h}=e;return this.stagedPoint=i.update({point:s,scenePoint:h,context:n}),this._snapPoints=e,this._abortController==null&&(this._abortController=new AbortController),this._snap(e,i,n,this._abortController.signal)}async snapAgainNearPreviousMapPoint(e,i){this._snapPoints!=null&&await this.snap(this._snapPoints,e,i)}abort(){this._abortController=Ms(this._abortController),this._snapPoints=null}};_([S({constructOnly:!0})],fd.prototype,"view",void 0),_([S()],fd.prototype,"stagedPoint",null),_([S()],fd.prototype,"constrainResult",void 0),_([S()],fd.prototype,"_stagedPoint",void 0),fd=_([J("esri.views.interactive.snapping.SnappingOperation")],fd);const Xxe="crosshair",Qxe="progress",KA=Symbol(),ZA=Symbol();let pt=class extends un.EventedMixin(Oe){constructor(e){super(e),this._createOperationCompleted=!1,this._hideDefaultCursor=!1,this._pointerDownStates=new Z5e,this._stagedScreenPoint=null,this._stagedPointerType=null,this._updatingHandles=new Jh,this._stagedPointerId=null,this.constraintsEnabled=!1,this.constraints=void 0,this._getPointConstraint=RA(jxe),this._getPolylineOrPolygonConstraint=RA(Gxe),this.constraintZ=null,this.defaultZ=null,this.isDraped=!0,this.labelOptions=new Iy,this.cursor=null,this.loading=!1,this.snapToSceneEnabled=null,this.firstVertex=null,this.lastVertex=null,this.secondToLastVertex=null,e.elevationInfo==null&&(this.elevationInfo=EH(!!e.hasZ))}initialize(){const{geometryType:e,view:i}=this,n=i.spatialReference,s="viewingMode"in i.state?i.state.viewingMode:pa.Local,h=e==="segment"||e==="multipoint"?"polyline":e;this.coordinateHelper=GV(this.hasZ,this.hasM,n),this._editGeometryOperations=new j6(new D6(h,this.coordinateHelper),s),this._snappingOperation=new fd({view:i}),this.addHandles([Ee(()=>({stagedPoint:this._snappingOperation.stagedPoint,constraint:this._constraint}),({stagedPoint:y,constraint:x},E)=>{const{snappingOptions:k}=this;if(k&&(k.forceDisabled=x!=null&&ro(x)),E!=null&&y===E.stagedPoint&&x!==E.constraint)return this._onKeyboardBasedChange();this._processCursor(y??this._screenToMap(this._stagedScreenPoint))},{equals:(y,x)=>y.stagedPoint===x.stagedPoint&&CP(y.constraint,x.constraint)}),Ee(()=>this.view.viewpoint,(y,x)=>{y&&x&&Q5e(y,x)&&this._onKeyboardBasedChange()})]),this._activeComponent=new j_(n,s),this._editGeometryOperations.data.components.push(this._activeComponent);const f=this.segmentLabels;f!=null&&(f.context={view:i,editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,labelOptions:this.labelOptions},this.addHandles(Ee(()=>this.labelOptions.enabled,y=>{f.visible=y},Pi))),this.addHandles(this._editGeometryOperations.on(["vertex-add","vertex-update","vertex-remove"],y=>{var L,D,j,H;const x=y.vertices.map(W=>({componentIndex:0,vertexIndex:W.index,coordinates:this.coordinateHelper.vectorToArray(W.pos)})),E=x.map(W=>W.coordinates),k=this.coordinateHelper.vectorToDehydratedPoint((L=this._activeComponent.getFirstVertex())==null?void 0:L.pos)??null;u2(k,this.firstVertex)||(this.firstVertex=k);const I=this.coordinateHelper.vectorToDehydratedPoint((D=this._activeComponent.getLastVertex())==null?void 0:D.pos)??null;u2(I,this.lastVertex)||(this.lastVertex=I);const P=this.coordinateHelper.vectorToDehydratedPoint((H=(j=this._activeComponent.edges.at(-1))==null?void 0:j.leftVertex)==null?void 0:H.pos)??null;switch(u2(P,this.secondToLastVertex)||(this.secondToLastVertex=P),this._processCursor(this.cursorVertex),y.type){case"vertex-add":this.emit(y.type,{...y,added:E,vertices:x});break;case"vertex-update":this.emit(y.type,{...y,updated:E,vertices:x});break;case"vertex-remove":this.emit(y.type,{...y,removed:E,vertices:x})}}));const m=this._manipulator=new exe({consumesClicks:!1,grabbableForEvent:y=>this.drawingMode!=="click"||y.pointerType==="touch"&&this._snappingEnabled&&this._pointerDownStates.size===1});this.manipulators.add(m),m.grabbable=e!=="point",this.addHandles([m.events.on("immediate-click",y=>this._onImmediateClick(y)),m.events.on("immediate-double-click",y=>this._onImmediateDoubleClick(y)),Ee(()=>this.drawingMode,()=>{this.removeHandles(KA),this.addHandles(this._createManipulatorDragPipeline(m),KA)},Pi),Ee(()=>({effectiveCursor:this.effectiveCursor}),({effectiveCursor:y})=>{m.cursor=y},Pi)]),RH(this,()=>{const y=this.view.inputManager.latestPointerType??"mouse",x=this._getSnappingContext(y);if(this.snappingManager!=null){const E=this._snappingOperation.snapAgainNearPreviousMapPoint(this.snappingManager,x);this._updatingHandles.addPromise(Yr(E))}})}destroy(){mt(this.segmentLabels),mt(this._snappingOperation),this._editGeometryOperations=mt(this._editGeometryOperations),this._updatingHandles.destroy()}get _isDragging(){const{_stagedPointerId:e,_manipulator:i}=this;return e!=null&&this._pointerDownStates.has(e)||i.grabbing||!i.interactive}get _snappingEnabled(){return this.snappingManager!=null&&this.snappingManager.options.effectiveEnabled}get _requiresScenePoint(){const e=this._updateAndGetEffectiveDrawSurface();return this.view.type==="3d"&&this.drawSurface!==e}get canRedo(){return this._editGeometryOperations.canRedo}get canUndo(){return this._editGeometryOperations.canUndo}get committedVertices(){return this._activeComponent.vertices.map(e=>this.coordinateHelper.vectorToArray(e.pos))}get _constraint(){const{constraints:e,constraintsEnabled:i}=this;if(e&&i)switch(this.geometryType){case"point":return this._getPointConstraint(e);case"polygon":case"polyline":return this._getPolylineOrPolygonConstraint(this.lastVertex,this.secondToLastVertex,e)}}set drawingMode(e){this._set("drawingMode",e??jV)}get effectiveCursor(){return this.loading?Qxe:this._hideDefaultCursor?null:this.cursor||Xxe}get interactive(){return this._manipulator.interactive}set interactive(e){this._manipulator.interactive=e}get isCompleted(){return this._createOperationCompleted}get numCommittedVertices(){return this._activeComponent.vertices.length}get snappingOptions(){return this.snappingManager!=null?this.snappingManager.options:null}get cursorVertex(){return this._get("cursorVertex")}get visualizationCursorVertex(){return this._stagedPointerType==="mouse"?this.cursorVertex:null}get committableVertex(){const{cursorVertex:e,lastVertex:i,firstVertex:n,geometryType:s}=this;return s==="polygon"&&xx(e,n)||xx(e,i)?null:e}get updating(){return this._updatingHandles.updating}get geometryIncludingUncommittedVertices(){const{committedVertices:e,committableVertex:i,coordinateHelper:n}=this,s=e.slice();return i!=null&&s.push(n.pointToArray(i)),s}cancel(){this.complete({aborted:!0})}commitStagedVertex(){this._snappingOperation.abort();const{committableVertex:e}=this;e!=null&&this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(e))}complete(e){var f;const i=(e==null?void 0:e.aborted)||!1;this._snappingOperation.abort(),(f=this.snappingManager)==null||f.doneSnapping();const{geometryType:n,numCommittedVertices:s}=this,h=n==="multipoint"&&s===0||n==="polyline"&&s<2||n==="polygon"&&s<3;n!=="segment"&&n!=="point"||this.commitStagedVertex(),this._createOperationCompleted=!h,(this.isCompleted||i)&&(this._stagedScreenPoint=null,this._stagedPointerId=null,this._stagedPointerType=null,this._processCursor(null),this.emit("complete",{vertices:this.committedVertices.map((m,y)=>({componentIndex:0,vertexIndex:y,coordinates:m})),aborted:i,type:"complete"}))}onInputEvent(e){switch(e.type){case"pointer-down":this._pointerDownStates.add(e.pointerId);break;case"pointer-up":this._pointerDownStates.delete(e.pointerId)}switch(e.type){case"pointer-move":return this._onPointerMove(e);case"hold":return this._onHold(e)}}redo(){this._editGeometryOperations.redo()}undo(){this.snappingManager!=null&&this.snappingManager.doneSnapping(),this._editGeometryOperations.undo()}_processCursor(e){var m,y;const i=_e(this.cursorVertex),n=_e(e),s=n&&(((m=this._updateAndGetEffectiveDrawSurface())==null?void 0:m.constrainZ(n))??n),h=this._snapToClosingVertex(s),f=this._applyConstraints(h);xx(i,f)||(this._set("cursorVertex",f),(y=this.segmentLabels)==null||y.set("stagedVertex",f!=null?this.coordinateHelper.pointToVector(f):null),f==null||this._stagedPointerType!=="mouse"?this.emit("cursor-remove"):this.emit("cursor-update",{updated:null,vertices:[{componentIndex:0,vertexIndex:this._activeComponent.vertices.length,coordinates:this.coordinateHelper.pointToArray(f)}],operation:"apply",type:"vertex-update"}))}_snapToClosingVertex(e){if(e==null||this._isDragging||this.geometryType!=="polygon"||this.numCommittedVertices<=2)return e;const i=this._mapToScreen(e);if(!i)return e;const n=this._activeComponent;return this._vertexWithinPointerDistance(n.vertices[0].pos,i)?this.firstVertex:this._vertexWithinPointerDistance(n.vertices.at(-1).pos,i)?this.lastVertex:e}_createManipulatorDragPipeline(e){switch(this.drawingMode){case"click":return this._createManipulatorDragPipelineClick(e);case"freehand":return this._createManipulatorDragPipelineFreehand(e);case"hybrid":return this._createManipulatorDragPipelineHybrid(e)}}_createManipulatorDragPipelineClick(e){return Sx(e,(i,n,s,h)=>{const f=h==="touch"&&this._snappingEnabled;if(this.isCompleted||!f)return;const{snappingStep:m,cancelSnapping:y}=qxe({predicate:()=>f,snappingManager:this.snappingManager,snappingContext:new U6({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,feature:this.graphic,pointer:h,visualizer:this.snappingVisualizer,drawConstraints:this.constraints}),updatingHandles:this._updatingHandles,useZ:!this._requiresScenePoint});s=s.next(x=>(f&&this.snappingManager!=null&&this.snappingManager.doneSnapping(),x)).next(y),n.next(this._screenToMapDragEventStep()).next(x=>(x.action==="start"&&(this._processCursor(x.mapStart),(this.geometryType==="segment"||f&&!this.numCommittedVertices)&&this.commitStagedVertex()),x)).next(Lxe(this.view,this.elevationInfo)).next(...m).next(x=>(f&&(this._processCursor(x.mapEnd),x.action==="end"&&this.commitStagedVertex()),x)).next(x=>(x.action==="end"&&(this._stagedPointerType!=="mouse"&&this._snappingOperation.abort(),this.geometryType!=="segment"&&this.geometryType!=="point"||this.complete()),x))})}_createManipulatorDragPipelineFreehand(e){return Sx(e,(i,n)=>{this.isCompleted||n.next(this._screenToMapDragEventStep()).next(s=>(s.action==="start"&&(this._snappingOperation.abort(),this.committableVertex==null&&this._processCursor(s.mapStart),this.geometryType==="segment"&&this.commitStagedVertex()),s)).next(s=>{switch(s.action){case"start":case"update":this._processCursor(s.mapEnd),this.geometryType!=="polygon"&&this.geometryType!=="polyline"||this.commitStagedVertex();break;case"end":this.complete()}return s})})}_createManipulatorDragPipelineHybrid(e){return Sx(e,(i,n)=>{this.isCompleted||n.next(this._screenToMapDragEventStep()).next(s=>(s.action==="start"&&(this._snappingOperation.abort(),this.addHandles(this._editGeometryOperations.createUndoGroup(),ZA),this._processCursor(s.mapStart),this.commitStagedVertex()),s)).next(s=>{switch(s.action){case"start":case"update":this._processCursor(s.mapEnd),this.geometryType!=="polygon"&&this.geometryType!=="polyline"||this.commitStagedVertex();break;case"end":this._stagedPointerType!=="mouse"&&this._snappingOperation.abort(),this.removeHandles(ZA),this.geometryType!=="segment"&&this.geometryType!=="point"||this.complete()}return s})})}get _drawAtFixedElevation(){const{constraintsEnabled:e,constraintZ:i,geometryType:n,numCommittedVertices:s}=this;return e?i!=null||n==="segment"&&s>0:(n==="segment"||n==="polygon")&&s>0}_updateAndGetEffectiveDrawSurface(){var x;const{constraintsEnabled:e,coordinateHelper:i,drawSurface:n,elevationDrawSurface:s,snapToSceneEnabled:h}=this;if(s==null)return n;if(!this.hasZ)return s.defaultZ=null,s;const f=(x=this.elevationInfo)==null?void 0:x.mode;let m=this.defaultZ,y=e||f==="absolute-height";return h!=null&&(y=h),f==="on-the-ground"&&(y=!1),this._drawAtFixedElevation&&(m=(e?this.constraintZ:null)??i.getZ(this._activeComponent.vertices[0].pos),y=!1),y?n:(s.defaultZ=m,s)}_mapToScreen(e){var i;return(i=this._updateAndGetEffectiveDrawSurface())==null?void 0:i.mapToScreen(e)}_onHold(e){this._snappingOperation.abort(),this.drawingMode==="click"&&e.pointerType==="touch"&&this._snappingEnabled&&this._processCursor(e.mapPoint),e.stopPropagation()}_onImmediateClick(e){if(!(e.pointerType==="mouse"&&e.button===2||this._manipulator.dragging))try{const{drawingMode:i,geometryType:n}=this;this._stagedPointerType=e.pointerType,this._stagedScreenPoint=e.screenPoint;const s=this._screenToMap(e.screenPoint);if(s==null||s==null||i==="freehand"&&n!=="point")return;if(this._snappingEnabled&&this.cursorVertex!=null||this._processCursor(s),this.committableVertex==null)return void this.complete();this.commitStagedVertex(),e.pointerType!=="mouse"&&this._processCursor(null),(i==="freehand"||n==="point"||n==="segment"&&this.numCommittedVertices===2||n==="segment"&&i==="hybrid"&&this.numCommittedVertices===1)&&this.complete()}finally{e.stopPropagation()}}_onImmediateDoubleClick(e){this._manipulator.dragging||this.geometryType==="point"||(this.complete(),e.stopPropagation())}_onPointerMove(e){const i=Ri(e.x,e.y);this._stagedScreenPoint=i,this._stagedPointerType=e.pointerType,this._stagedPointerId=e.pointerId,this._isDragging?this._snappingOperation.abort():(e.stopPropagation(),this._processCursorMovementRelativeToSurface(i,e.pointerType))}_onKeyboardBasedChange(){this._stagedPointerType==="mouse"&&this._stagedScreenPoint&&this._stagedPointerId!=null&&!this._isDragging?this._processCursorMovementRelativeToSurface(this._stagedScreenPoint,this._stagedPointerType):this._snappingOperation.abort()}_processCursorMovementRelativeToSurface(e,i){var y;const n=this._snappingOperation,s=this._screenToMap(e),h=this._requiresScenePoint?(y=this.drawSurface)==null?void 0:y.screenToMap(e):null;if(s==null)return this._hideDefaultCursor=!0,this._processCursor(null),void n.abort();this._hideDefaultCursor=!1;const f=this.snappingManager;if(f==null)return this._processCursor(s),void n.abort();const m=this._getSnappingContext(i);this._updatingHandles.addPromise(Yr(n.snap({point:s,scenePoint:h},f,m)))}_applyConstraints(e){const{_constraint:i,constraints:n}=this;if(!e||!n||!i)return e;const{context:s}=n,h=G_(e,s),f=h?i.closestTo(h):void 0;if(!f)return e;const m=Bxe(f,e,s),y=this.view.type==="2d"||s.elevationInfo.mode!=="absolute-height";return m!=null&&y&&this.constraintZ!=null&&this.hasZ&&(m.z=this.constraintZ),m}_screenToMap(e){var i;return e?(i=this._updateAndGetEffectiveDrawSurface())==null?void 0:i.screenToMap(e):null}_screenToMapDragEventStep(){let e=null;return i=>{if(i.action==="start"&&(e=this._screenToMap(i.screenStart)),e==null)return null;const n=this._screenToMap(i.screenEnd);return n!=null?{...i,mapStart:e,mapEnd:n}:null}}_vertexWithinPointerDistance(e,i){const s=this._mapToScreen(this.coordinateHelper.vectorToDehydratedPoint(e));return s!=null&&e9e(s,i,25)}_getSnappingContext(e){var n;const i=this._drawAtFixedElevation?(n=this.elevationDrawSurface)==null?void 0:n.defaultZ:null;return new U6({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,pointer:e,feature:this.graphic,visualizer:this.snappingVisualizer,selfSnappingZ:i!=null?{value:i,elevationInfo:this.elevationInfo}:null,drawConstraints:this.constraints})}};function e9e(t,e,i){const n=t.x-e.x,s=t.y-e.y;return n*n+s*s<=i}_([S()],pt.prototype,"_hideDefaultCursor",void 0),_([S()],pt.prototype,"_stagedPointerId",void 0),_([S()],pt.prototype,"_isDragging",null),_([S()],pt.prototype,"_snappingOperation",void 0),_([S()],pt.prototype,"_snappingEnabled",null),_([S({constructOnly:!0})],pt.prototype,"graphic",void 0),_([S()],pt.prototype,"constraintsEnabled",void 0),_([S()],pt.prototype,"constraints",void 0),_([S()],pt.prototype,"_constraint",null),_([S()],pt.prototype,"constraintZ",void 0),_([S()],pt.prototype,"defaultZ",void 0),_([S()],pt.prototype,"isDraped",void 0),_([S({value:jV})],pt.prototype,"drawingMode",null),_([S({constructOnly:!0})],pt.prototype,"elevationDrawSurface",void 0),_([S({constructOnly:!0})],pt.prototype,"elevationInfo",void 0),_([S({constructOnly:!0,type:Iy})],pt.prototype,"labelOptions",void 0),_([S({constructOnly:!0})],pt.prototype,"geometryType",void 0),_([S({constructOnly:!0})],pt.prototype,"hasM",void 0),_([S({constructOnly:!0})],pt.prototype,"hasZ",void 0),_([S()],pt.prototype,"cursor",void 0),_([S()],pt.prototype,"effectiveCursor",null),_([S()],pt.prototype,"loading",void 0),_([S({constructOnly:!0})],pt.prototype,"manipulators",void 0),_([S({constructOnly:!0})],pt.prototype,"drawSurface",void 0),_([S({constructOnly:!0})],pt.prototype,"segmentLabels",void 0),_([S({constructOnly:!0})],pt.prototype,"snappingManager",void 0),_([S({constructOnly:!0})],pt.prototype,"snappingVisualizer",void 0),_([S()],pt.prototype,"snapToSceneEnabled",void 0),_([S({readOnly:!0})],pt.prototype,"cursorVertex",null),_([S({readOnly:!0})],pt.prototype,"visualizationCursorVertex",null),_([S()],pt.prototype,"committableVertex",null),_([S()],pt.prototype,"firstVertex",void 0),_([S()],pt.prototype,"lastVertex",void 0),_([S()],pt.prototype,"secondToLastVertex",void 0),_([S()],pt.prototype,"updating",null),_([S({constructOnly:!0})],pt.prototype,"view",void 0),pt=_([J("esri.views.draw.DrawOperation")],pt);let KPe=class{constructor(e,i,n,s=null){this._elevationInfo=e,this.defaultZ=i,this._view=n,this._excludeGraphics=s}screenToMap(e){const{defaultZ:i,_view:n}=this,s=n.sceneIntersectionHelper.intersectElevationFromScreen(gz(e.x,e.y),this._elevationInfo,i??0,this._excludeGraphics);return i==null&&s!=null&&(s.z=void 0),s}mapToScreen(e){const i=Pl(e.x,e.y,BM(this._view,e,this._elevationInfo),e.spatialReference);return this._view.toScreen(i)}constrainZ(e){const{defaultZ:i}=this;return i!=null&&e.z!==i&&((e=F_(e)).z=i),e}},JPe=class{constructor(e,i,n=[]){this.view=e,this.elevationInfo=i,this.exclude=n}screenToMap(e){const i=this.view.toMap(e,{exclude:this.exclude,excludeLabels:!0});return i!=null&&(i.z=qw(i,this.view,this.elevationInfo)),i}mapToScreen(e){let i=e;return this.elevationInfo!=null&&(i=Pl(e.x,e.y,BM(this.view,e,this.elevationInfo),e.spatialReference)),this.view.toScreen(i)}constrainZ(e){return e}},XPe=class{constructor(e,i=!1,n=0){this.view=e,this.hasZ=i,this.defaultZ=n,this.mapToScreen=s=>e.toScreen(s),this.screenToMap=i?s=>{const h=e.toMap(s);return h.z=n,h}:s=>e.toMap(s)}constrainZ(e){const{defaultZ:i}=this;return this.hasZ&&e.z!==i&&((e=F_(e)).z=i),e}},H6=class oq{screenToMap(e){const{x:i,y:n}=e;return new Ne({x:i,y:n,spatialReference:oq.spatialReference})}mapToScreen(e){return Ri(e.x,e.y)}constrainZ(e){return e}};H6.spatialReference=new Ke;var V6;let $h=V6=class extends ln{constructor(t){super(t),this.center=null,this.geodesic=!1,this.numberOfPoints=60,this.radius=1e3,this.radiusUnit="meters"}initialize(){const t=this.center,e=this.numberOfPoints;if(this.hasZ=(t==null?void 0:t.hasZ)??!1,this.rings.length!==0||!t)return;const i=oi(this.radius,this.radiusUnit,"meters"),n=t.spatialReference;let s,h="geographic";if(n.isWebMercator?h="webMercator":((n.wkid&&U[n.wkid])!=null||(n.wkt2||n.wkt)&&GT(n.wkt2||n.wkt))&&(h="projected"),this.geodesic){let f;switch(h){case"webMercator":f=Gh(t);break;case"projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case"geographic":f=t}s=this._createGeodesicCircle(f,i,e),h==="webMercator"&&(s=Ec(s))}else{let f;h==="webMercator"||h==="projected"?f=i/eN(t.spatialReference):h==="geographic"&&(f=YR(i,"meters",FT(t.spatialReference).radius)),s=this._createPlanarCircle(t,f,e)}this.spatialReference=s.spatialReference,this.addRing(s.rings[0])}clone(){const{center:t,numberOfPoints:e,radius:i,radiusUnit:n,geodesic:s}=this;return new V6({center:t==null?void 0:t.clone(),numberOfPoints:e,radius:i,radiusUnit:n,geodesic:s})}_createGeodesicCircle(t,e,i){let n=0;const s=[];for(;n<360;){const h=[0,0],f=[t.x,t.y];Qh(h,f,n,e,Ke.WGS84),this.hasZ&&h.push(t.z),s.push(h),n+=360/i}return s.push(s[0]),new ln({rings:[s]})}_createPlanarCircle(t,e,i){const n=[],s=2*Math.PI/i;for(let h=0;h<i;++h){const f=s*h,m=[t.x+Math.cos(-f)*e,t.y+Math.sin(-f)*e];this.hasZ&&m.push(t.z),n.push(m)}return n.push(n[0]),new ln({spatialReference:t.spatialReference,rings:[n]})}};_([S({type:Ne})],$h.prototype,"center",void 0),_([S()],$h.prototype,"geodesic",void 0),_([S()],$h.prototype,"numberOfPoints",void 0),_([S()],$h.prototype,"radius",void 0),_([S()],$h.prototype,"radiusUnit",void 0),$h=V6=_([J("esri.geometry.Circle")],$h);const t9e=$h;var eRe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function i9e(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function n9e(t,e){for(var i=0;i<e.length;i++){const n=e[i];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const h=Object.getOwnPropertyDescriptor(n,s);h&&Object.defineProperty(t,s,h.get?h:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}var JA,YA={exports:{}};function r9e(){return JA||(JA=1,function(t){function e(){function n(u){if(typeof u=="number")return V.Tc.Zg(u);if(u==null)return null;if(jy[u]!=null)return V.Tc.Zg(jy[u]);throw Error("Unrecognised Unit Type")}function s(u){if(typeof u=="number")return V.Tc.Zg(u);if(u==null)return null;if(Gy[u]!=null)return V.Tc.Zg(Gy[u]);throw Error("Unrecognised Unit Type")}function h(u){if(u)switch(u){case"loxodrome":return 1;case"great-elliptic":return 2;case"normal-section":return 3;case"shape-preserving":return 4}return 0}function f(u,A,b,c){if(b==null||b.B())return null;switch(b.getType()){case V.qn.Point:return u.exportPoint(A,b,c);case V.qn.Polygon:return u.exportPolygon(A,b,c);case V.qn.Polyline:return u.exportPolyline(A,b,c);case V.qn.MultiPoint:return u.exportMultipoint(A,b,c);case V.qn.Envelope:return u.exportExtent(A,b,c)}return null}function m(u,A,b,c){if(b.getType()!==V.qn.Point)throw Error("Geometry not Point");return u.exportPoint(A,b,c)}function y(u,A,b){return u.convertToGEGeometry(A,b)}function x(u){var A=u.wkid;u=u.wkt2||u.wkt;var b=Nl.get(A||u);return b==null&&(A!==-1&&A!=null?(b=V.Eg.create(A),Nl.set(A,b)):u&&(b=V.Eg.qP(u),Nl.set(u,b)),Vc.has(A||u)&&b.VW(Vc.get(A||u))),b}function E(u){var A,b,c;if(u==null)return null;var a=x(u);return u=a.Hd(),a=a.Kn(),(A={}).tolerance=a,A.unitType=u==null?-1:u.od,A.unitID=u==null?-1:u.Ec(),A.unitBaseFactor=u==null?0:u.ai,A.unitSquareDerivative=u==null?0:(c=(b=V.Tc.aG(u))===null||b===void 0?void 0:b.Ec())!==null&&c!==void 0?c:0,A}function k(u,A,b,c){return b==null?null:(b=V.$b.clip(y(u,Ce,b),y(u,Ce,c),x(A)),f(u,Ce,b,A))}function I(u,A,b,c){b=V.$b.dl(y(u,Ce,b),y(u,Ce,c),x(A)),c=[];for(var a=0;a<b.length;a++)c.push(f(u,Ce,b[a],A));return c}function P(u,A,b,c){if(b==null||c==null)throw Error("Illegal Argument Exception");return V.$b.contains(y(u,Ce,b),y(u,Ce,c),x(A))}function L(u,A,b,c){if(b==null||c==null)throw Error("Illegal Argument Exception");return V.$b.BP(y(u,Ce,b),y(u,Ce,c),x(A))}function D(u,A,b,c,a){if(b==null||c==null)throw Error("Illegal Argument Exception");return V.$b.tb(y(u,Ce,b),y(u,Ce,c),x(A),n(a))}function j(u,A,b,c){return!(b==null&&c!=null||c==null&&b!=null)&&V.$b.Nb(y(u,Ce,b),y(u,Ce,c),x(A))}function H(u,A,b,c){if(b==null||c==null)throw Error("Illegal Argument Exception");return V.$b.TS(y(u,Ce,b),y(u,Ce,c),x(A))}function W(u,A,b,c){if(b==null||c==null)throw Error("Illegal Argument Exception");return V.$b.touches(y(u,Ce,b),y(u,Ce,c),x(A))}function Z(u,A,b,c){if(b==null||c==null)throw Error("Illegal Argument Exception");return V.$b.qY(y(u,Ce,b),y(u,Ce,c),x(A))}function Y(u,A,b,c){if(b==null||c==null)throw Error("Illegal Argument Exception");return V.$b.TP(y(u,Ce,b),y(u,Ce,c),x(A))}function te(u,A,b,c){if(b==null||c==null)throw Error("Illegal Argument Exception");return V.$b.DU(y(u,Ce,b),y(u,Ce,c),x(A))}function ie(u,A,b,c,a){if(b==null||c==null)throw Error("Illegal Argument Exception");return V.$b.yB(y(u,Ce,b),y(u,Ce,c),x(A),a)}function le(u,A,b){if(b==null)throw Error("Illegal Argument Exception");return V.$b.dT(y(u,Ce,b),x(A))}function pe(u,A,b){if(b==null)throw Error("Illegal Argument Exception");return b=V.$b.eC(y(u,Ce,b),x(A)),f(u,Ce,b,A)}function ve(u,A,b,c){if(c===void 0&&(c=!1),b==null)throw Error("Illegal Argument Exception");if(Array.isArray(b)){var a=c,r=[];for(c=0;c<b.length;c++)r.push(y(u,Ce,b[c]));for(b=V.$b.jP(r,a),a=Array(b.length),c=0;c<b.length;c++)a[c]=f(u,Ce,b[c],A);return a}return c=V.$b.iP(y(u,Ce,b),x(A)),f(u,Ce,c,A)}function be(u,A,b,c){if(b==null||c==null)throw Error("Illegal Argument Exception");if(Array.isArray(b)){for(var a=[],r=0;r<b.length;r++)a.push(y(u,Ce,b[r]));for(b=V.$b.QP(a,y(u,Ce,c),x(A)),c=Array(b.length),r=0;r<b.length;r++)c[r]=f(u,Ce,b[r],A);return c}return r=V.$b.im(y(u,Ce,b),y(u,Ce,c),x(A)),f(u,Ce,r,A)}function Se(u,A,b,c){if(b==null||c==null)throw Error("Illegal Argument Exception");if(Array.isArray(b)){for(var a=[],r=0;r<b.length;r++)a.push(y(u,Ce,b[r]));for(b=V.$b.VX(a,y(u,Ce,c),x(A)),c=Array(b.length),r=0;r<b.length;r++)c[r]=f(u,Ce,b[r],A);return c}return r=V.$b.ep(y(u,Ce,b),y(u,Ce,c),x(A)),f(u,Ce,r,A)}function Me(u,A,b,c){if(b==null||c==null)throw Error("Illegal Argument Exception");if(Array.isArray(b)){for(var a=[],r=0;r<b.length;r++)a.push(y(u,Ce,b[r]));for(b=V.$b.RS(a,y(u,Ce,c),x(A)),c=Array(b.length),r=0;r<b.length;r++)c[r]=f(u,Ce,b[r],A);return c}return r=V.$b.Ea(y(u,Ce,b),y(u,Ce,c),x(A)),f(u,Ce,r,A)}function he(u,A,b,c){if(b==null)return null;var a=[];if(Array.isArray(b)){if(b.length===0)return null;for(c=0;c<b.length;c++)a.push(y(u,Ce,b[c]))}else a.push(y(u,Ce,b)),c!=null&&a.push(y(u,Ce,c));return f(u,Ce,V.$b.jY(a,x(A)),A)}function se(u,A,b,c,a,r,o,l){var d=0;if(r!=null)switch(r){case"round":d=0;break;case"bevel":d=1;break;case"miter":d=2;break;case"square":d=3}if(Array.isArray(b)){if(b==null)u=null;else if(b.length===0)u=[];else{var p=[];for(r=0;r<b.length;r++)p.push(y(u,Ce,b[r]));for(b=V.$b.BU(p,x(A),c,d,o,l,n(a)),c=Array(b.length),r=0;r<b.length;r++)c[r]=f(u,Ce,b[r],A);u=c}return u}return b=V.$b.offset(y(u,Ce,b),x(A),c,d,o,l,n(a)),f(u,Ce,b,A)}function xe(u,A,b,c,a,r){if(r===void 0&&(r=!1),Array.isArray(b)){if(!Array.isArray(c)){for(var o=[],l=0;l<b.length;l++)o.push(c);c=o}if(c.length!=b.length){if(c.length==0)throw Error("Illegal Argument Exception");o=[];var d=0;for(l=0;l<b.length;l++)c[l]===void 0?o.push(d):(o.push(c[l]),d=c[l]);c=o}return Fe(u,A,b,c,a,!1,r,"geodesic",NaN)}return b=V.$b.buffer(y(u,Ce,b),x(A),c,n(a),!1,0,NaN),f(u,Ce,b,A)}function Be(u,A,b,c,a,r,o,l){if(Array.isArray(b)){if(!Array.isArray(c)){for(var d=[],p=0;p<b.length;p++)d.push(c);c=d}if(c.length!==b.length){if(c.length===0)throw Error("Illegal Argument Exception");d=[];var g=0;for(p=0;p<b.length;p++)c[p]===void 0?d.push(g):(d.push(c[p]),g=c[p]);c=d}return Fe(u,A,b,c,a,!0,r,o,l)}return o===void 0&&(o=NaN),b=V.$b.buffer(y(u,Ce,b),x(A),c,n(a),!0,h(r),o),f(u,Ce,b,A)}function Fe(u,A,b,c,a,r,o,l,d){if(d===void 0&&(d=NaN),b==null)return null;if(b.length===0)return[];for(var p=[],g=0;g<b.length;g++)p.push(y(u,Ce,b[g]));for(b=V.$b.MN(p,x(A),c,n(a),r,o,h(l),d),c=Array(b.length),g=0;g<b.length;g++)c[g]=f(u,Ce,b[g],A);return c}function ze(u,A,b,c,a){var r;return a===void 0&&(a=!0),b=V.$b.nz(y(u,Ce,b),y(u,Ce,c),a),(r={}).coordinate=m(u,Ce,b.fz(),A),r.distance=b.hz(),r.isRightSide=b.Sz(),r.vertexIndex=b.Ua(),r.isEmpty=b.B(),r}function it(u,A,b,c){var a;return b=V.$b.oz(y(u,Ce,b),y(u,Ce,c)),(a={}).coordinate=m(u,Ce,b.fz(),A),a.distance=b.hz(),a.isRightSide=b.Sz(),a.vertexIndex=b.Ua(),a.isEmpty=b.B(),a}function ti(u,A,b,c,a,r){var o;for(b=V.$b.pz(y(u,Ce,b),y(u,Ce,c),a,r),c=[],a=0;a<b.length;a++)b[a].B()===!1&&c.push(((o={}).coordinate=m(u,Ce,b[a].fz(),A),o.distance=b[a].hz(),o.isRightSide=b[a].Sz(),o.vertexIndex=b[a].Ua(),o.isEmpty=b[a].B(),o));return c}function Et(u,A,b,c,a,r){return b=V.$b.QQ(y(u,Ce,b),x(A),c,a,n(r)),f(u,Ce,b,A)}function Un(u,A,b,c,a){return b=V.$b.Qr(y(u,Ce,b),x(A),c,n(a)),f(u,Ce,b,A)}function Pr(u,A,b,c,a,r){return r===void 0&&(r=0),b=V.$b.Wy(y(u,Ce,b),x(A),c,n(a),r),f(u,Ce,b,A)}function Di(u,A,b,c){if(b==null)throw Error("Illegal Argument Exception");return V.$b.JU(y(u,Ce,b),x(A),s(c))}function qi(u,A,b,c){if(b==null)throw Error("Illegal Argument Exception");return V.$b.KU(y(u,Ce,b),x(A),n(c))}function Hc(u,A,b,c,a){if(b==null)throw Error("Illegal Argument Exception");return V.$b.WQ(y(u,Ce,b),x(A),s(c),h(a))}function va(u,A,b,c,a){if(b==null)throw Error("Illegal Argument Exception");return V.$b.ZQ(y(u,Ce,b),x(A),n(c),h(a))}function ba(u){V.NL.bind(u)}function Dy(u,A,b,c,a){var r=null,o=null;if(c){if(!a)throw V.i.N("AOI missing Spatial Reference");r=y(u,Ce,c),o=x(a).fh()}return(u=V.gu.XR(x(A).fh(),x(b).fh(),r,o))!==null?u:null}function V_(u,A,b,c,a){var r=null,o=null;if(c){if(!a)throw V.i.N("AOI missing Spatial Reference");r=y(u,Ce,c),o=x(a).fh()}return V.gu.YR(x(A).fh(),x(b).fh(),r,o)}function q_(u,A,b,c,a,r){if(a===void 0&&(a=null),r===void 0&&(r=null),r){var o=new V.yC;o.Vu=r.densificationStep,o.Jr=r.centralMeridianOfOutputGCS,r.clipWithInputHorizon&&o.PW(r.clipWithInputHorizon),r.clipWithOutputHorizon&&o.QW(r.clipWithOutputHorizon)}if(this.KY===!1)throw Error("Projection Engine must be enabled using enableProjection");if(A.length===0)return[];if(a){if(!(r=a.getCachedGeTransformation(b,c)))e:{if(r=a,a=null,r){var l=r.getGTListEntry();if(l!==null){a=new V.wC(null);for(var d=0,p=l.steps;d<p.length;d++){l=p[d];var g=new V.Dx(l.geogtran);l.isInverse&&g.Qz(),a.add(g)}o=V.vr.Nr(x(b).fh(),x(c).fh(),a,o),r.assignCachedGe(b,c,o),r=o;break e}}if(a===null&&r&&r.steps&&0<r.steps.length){for(a=new V.wC(null),d=0,p=r.steps;d<p.length;d++)(l=p[d]).wkid!=-1&&l.wkid!=null?a.add(V.Dx.create(l.wkid,l.isInverse)):a.add(V.Dx.uP(l.wkt,l.isInverse));o=V.vr.Nr(x(b).fh(),x(c).fh(),a,o),r.assignCachedGe(b,c,o),r=o}else r=V.vr.Nr(x(b).fh(),x(c).fh(),a,o)}for(b=[],a=0;a<A.length;a++)o=A[a],b.push(zy(u,o,c,r))}else for(r=V.vr.Nr(x(b).fh(),x(c).fh(),null),b=[],a=0;a<A.length;a++)o=A[a],b.push(zy(u,o,c,r));return b}function zy(u,A,b,c){return A=V.$b.zh(y(u,Ce,A),c),f(u,Ce,A,b)}function W_(u,A){u!=null&&(u=u.wkid||u.wkt2||u.wkt,Vc.has(u),Vc.set(u,A),Nl.has(u)&&Nl.delete(u))}function K_(u){u!=null&&(u=u.wkid||u.wkt2||u.wkt,Vc.has(u)&&(Vc.delete(u),Nl.has(u)&&Nl.delete(u)))}function Z_(u,A,b,c){if(b==null||c==null)return[];var a=[],r=0;for(b=V.$b.QS(y(u,Ce,b),y(u,Ce,c),x(A))||[];r<b.length;r++)a.push(f(u,Ce,b[r],A));return a}var Xi,V,Bn,Fy,bt=this&&this.__extends||function(){function u(A,b){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var r in a)a.hasOwnProperty(r)&&(c[r]=a[r])})(A,b)}return function(A,b){function c(){this.constructor=A}u(A,b),A.prototype=b===null?Object.create(b):(c.prototype=b.prototype,new c)}}();(function(u){var A;(A=u.qn||(u.qn={}))[A.Unknown=0]="Unknown",A[A.Point=33]="Point",A[A.Line=322]="Line",A[A.Envelope=197]="Envelope",A[A.MultiPoint=550]="MultiPoint",A[A.Polyline=1607]="Polyline",A[A.Polygon=1736]="Polygon",function(c){c[c.enumMild=0]="enumMild",c[c.enumMedium=1]="enumMedium",c[c.enumHot=2]="enumHot"}(u.YK||(u.YK={}));var b=function(){function c(){this.description=null,this.VA=0}return c.prototype.getType=function(){return 0},c.prototype.Db=function(){return-1},c.prototype.Nf=function(a){this.vc(),a!=this.description&&this.sn(a)},c.prototype.sn=function(){},c.prototype.Jl=function(a){this.vc(),a!=this.description&&(a=u.ee.CR(this.description,a))!=this.description&&this.sn(a)},c.prototype.hasAttribute=function(a){return this.description.hasAttribute(a)},c.prototype.re=function(a){this.vc(),this.description.hasAttribute(a)||(a=u.ee.BR(this.description,a),this.sn(a))},c.prototype.Tg=function(){return null},c.prototype.bn=function(){},c.prototype.A=function(){},c.prototype.Qo=function(){},c.prototype.xc=function(a){this.A(a)},c.prototype.B=function(){return!0},c.prototype.Oa=function(){},c.prototype.Oc=function(){},c.prototype.Ia=function(){return null},c.prototype.copyTo=function(){},c.prototype.Ke=function(){return 0},c.prototype.Qb=function(){return 0},c.prototype.iG=function(){return this.hasAttribute(1)},c.tf=function(a){return 1+((192&a)>>6)>>1},c.Rn=function(a){return!!(32&a)},c.US=function(a){return!!(128&a)},c.yd=function(a){return!!(256&a)},c.xj=function(a){return!!(512&a)},c.Hc=function(a){return!!(1024&a)},c.prototype.Of=function(){var a=this.Ia();return this.copyTo(a),a},c.prototype.mg=function(){return null},c.jg=function(a){var r=a.Ia();return a.copyTo(r),r},c.prototype.vc=function(){0<=this.VA&&(this.VA+=2147483649)},c.Ax=function(a){var r=a.getType();if(c.xj(r))return a.I();if(a.B())return 0;if(r==197)return 4;if(r==33)return 1;if(c.yd(r))return 2;throw u.i.fa("missing type")},c}();u.aa=b})(V||(V={})),Bn=V||(V={}),Fy=function(){function u(){this.y=this.x=0}return u.construct=function(A,b){var c=new u;return c.x=A,c.y=b,c},u.al=function(A){var b=new u;return b.x=A.x,b.y=A.y,b},u.prototype.ma=function(A,b){this.x=A,this.y=b},u.prototype.L=function(A){this.x=A.x,this.y=A.y},u.prototype.fq=function(A,b){return this.x===A&&this.y===b},u.prototype.Rz=function(A){return 2220446049250313e-31>=Math.abs(this.x-A.x)&&2220446049250313e-31>=Math.abs(this.y-A.y)},u.prototype.qb=function(A){return this.x===A.x&&this.y===A.y},u.prototype.Nb=function(A){return A==this||A instanceof u&&this.x==A.x&&this.y==A.y},u.prototype.sub=function(A){this.x-=A.x,this.y-=A.y},u.prototype.uc=function(A,b){this.x=A.x-b.x,this.y=A.y-b.y},u.prototype.add=function(A,b){b!==void 0?(this.x=A.x+b.x,this.y=A.y+b.y):(this.x+=A.x,this.y+=A.y)},u.prototype.Sq=function(){this.x=-this.x,this.y=-this.y},u.prototype.mt=function(A){this.x=-A.x,this.y=-A.y},u.prototype.NS=function(A,b,c){this.x=A.x*(1-c)+b.x*c,this.y=A.y*(1-c)+b.y*c},u.prototype.Ct=function(A,b){this.x=this.x*A+b.x,this.y=this.y*A+b.y},u.prototype.HW=function(A,b,c){this.x=b.x*A+c.x,this.y=b.y*A+c.y},u.prototype.scale=function(A){this.x*=A,this.y*=A},u.prototype.compare=function(A){return this.y<A.y?-1:this.y>A.y?1:this.x<A.x?-1:this.x>A.x?1:0},u.prototype.normalize=function(){var A=this.length();A==0&&(this.x=1,this.y=0),this.x/=A,this.y/=A},u.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},u.prototype.Sk=function(){return this.x*this.x+this.y*this.y},u.tb=function(A,b){return Math.sqrt(this.yc(A,b))},u.Oy=function(A,b,c,a){return A-=c,b-=a,Math.sqrt(A*A+b*b)},u.prototype.Qh=function(A){return this.x*A.x+this.y*A.y},u.prototype.fD=function(A){return Math.abs(this.x*A.x)+Math.abs(this.y*A.y)},u.prototype.wi=function(A){return this.x*A.y-this.y*A.x},u.prototype.Bt=function(A,b){var c=-this.x*b+this.y*A;this.x=this.x*A+this.y*b,this.y=c},u.prototype.Hv=function(){var A=this.x;this.x=-this.y,this.y=A},u.prototype.MG=function(A){this.x=-A.y,this.y=A.x},u.prototype.ar=function(){var A=this.x;this.x=this.y,this.y=-A},u.prototype.qu=function(){return 0<this.x?0<=this.y?1:4:0<this.y?2:this.x==0?4:3},u.nu=function(A,b){var c=A.qu(),a=b.qu();return a==c?0>(A=A.wi(b))?1:0<A?-1:0:c<a?-1:1},u.yc=function(A,b){var c=A.x-b.x;return c*c+(A=A.y-b.y)*A},u.prototype.toString=function(){return"("+this.x+" , "+this.y+")"},u.prototype.Rc=function(){this.y=this.x=NaN},u.prototype.isNaN=function(){return isNaN(this.x)||isNaN(this.y)},u.prototype.offset=function(A,b){var c=u.tb(A,b),a=u.construct(this.x,this.y);if(c==0)return u.tb(a,A);var r=new u;return r.L(b),r.sub(A),a.sub(A),a.wi(r)/c},u.Uq=function(A,b,c){var a=new Bn.Wb;a.set(b.x),a.sub(A.x);var r=new Bn.Wb;r.set(c.y),r.sub(A.y);var o=new Bn.Wb;o.set(b.y),o.sub(A.y);var l=new Bn.Wb;return l.set(c.x),l.sub(A.x),a.Ag(r),o.Ag(l),a.sub(o),a.ps()?(a=new Bn.hp(b.x),r=new Bn.hp(A.x),o=new Bn.hp(A.y),a=a.jt(r),A=(A=new Bn.hp(c.y)).jt(o),b=(b=new Bn.hp(b.y)).jt(o),c=(c=new Bn.hp(c.x)).jt(r),a=a.lr(A),b=b.lr(c),(a=a.lr(b)).nT()?-1:a.fS()?1:0):0>(c=a.value())?-1:0<c?1:0},u.prototype.cc=function(){return Bn.O.uj(Bn.O.uj())},u}(),Bn.h=Fy,function(u){var A=function(){function b(c){this.Fy=this.Mt=0,this.OX=c}return b.prototype.reset=function(){this.Fy=this.Mt=0},b.prototype.add=function(c){c-=this.Fy;var a=this.Mt+c;this.Fy=a-this.Mt-c,this.Mt=a},b.prototype.sub=function(c){this.add(-c)},b.prototype.rm=function(){return this.OX+this.Mt},b}();u.Fx=A,u.lc=function(){function b(){}return b.Cn=function(c,a){return 0<=a?Math.abs(c):-Math.abs(c)},b.sign=function(c){return 0>c?-1:0<c?1:0},b.RK=function(c){return c-360*Math.floor(c/360)},b.round=function(c){return Math.floor(c+.5)},b.ox=function(c){return c*c},b.hq=function(c,a,r){return .5>=r?c+(a-c)*r:a-(a-c)*(1-r)},b.OG=function(c,a,r,o){.5>=r?(o.x=c.x+(a.x-c.x)*r,o.y=c.y+(a.y-c.y)*r):(o.x=a.x-(a.x-c.x)*(1-r),o.y=a.y-(a.y-c.y)*(1-r))},b.lT=function(c,a,r,o,l,d){.5>=l?(d.x=c+(r-c)*l,d.y=a+(o-a)*l):(d.x=r-(r-c)*(1-l),d.y=o-(o-a)*(1-l))},b}()}(V||(V={})),function(u){var A=function(b){function c(){var a=b.call(this)||this;return a.sa=0,a.na=0,a.pa=0,a.la=0,a.ka=null,a}return bt(c,b),c.prototype.ac=function(){return u.h.construct(this.sa,this.na)},c.prototype.Yp=function(a){a.x=this.sa,a.y=this.na},c.prototype.Dc=function(a){this.em(0,a)},c.prototype.ZB=function(a,r){this.em(0,u.h.construct(a,r))},c.prototype.To=function(a){this.hD(0,a)},c.prototype.setStart=function(a){this.uD(0,a)},c.prototype.wv=function(a,r){return this.Od(0,a,r)},c.prototype.YB=function(a,r,o){this.tn(0,a,r,o)},c.prototype.wc=function(){return u.h.construct(this.pa,this.la)},c.prototype.Tr=function(a){a.x=this.pa,a.y=this.la},c.prototype.Qc=function(a){this.em(1,a)},c.prototype.Ql=function(a,r){this.em(1,u.h.construct(a,r))},c.prototype.Po=function(a){this.hD(1,a)},c.prototype.setEnd=function(a){this.uD(1,a)},c.prototype.gv=function(a,r){return this.Od(1,a,r)},c.prototype.OB=function(a,r,o){this.tn(1,a,r,o)},c.prototype.Db=function(){return 1},c.prototype.B=function(){return this.Ac()},c.prototype.Oa=function(){},c.prototype.Ke=function(){return 0},c.prototype.Ea=function(a,r,o,l,d){return this.KM(a,r,o,l,d)},c.prototype.isIntersecting=function(a,r){return this.zr(a,r,!1)!=0},c.prototype.qs=function(a,r){return this.ru(a,r,!1)},c.prototype.ru=function(){return null},c.prototype.Ac=function(){return!1},c.prototype.ay=function(a){if(this.vc(),this.ka==null&&0<a)this.ka=u.O.lg(2*a);else if(this.ka!=null&&this.ka.length<2*a){for(var r=this.ka.slice(0),o=this.ka.length;o<2*a;o++)r[o]=0;this.ka=r}},c.gM=function(a,r,o){if(0<o)var l=0;for(var d=0;d<o;d++)r[0+l]=a[0],l++},c.prototype.em=function(a,r){a!=0?(this.pa=r.x,this.la=r.y):(this.sa=r.x,this.na=r.y)},c.prototype.sn=function(a){if(this.ka!=null){for(var r=u.ee.Iw(a,this.description),o=[],l=c.Gg(this.description,0),d=c.Gg(this.description,1),p=c.Gg(a,0),g=c.Gg(a,1),v=0,w=1,T=a.Aa;w<T;w++){var $=a.kd(w),C=u.ra.Va($);if(r[w]==-1){var O=u.ra.se($);for($=0;$<C;$++)o[p+v]=O,o[g+v]=O,v++}else for(O=this.description.$j(r[w])-2,$=0;$<C;$++)o[p+v]=this.ka[l+O],o[g+v]=this.ka[d+O],v++,O++}this.ka=o}this.description=a},c.prototype.hD=function(a,r){if(this.Ac())throw u.i.fa("empty geometry");r.Nf(this.description),r.Ac()&&r.un();for(var o=0;o<this.description.Aa;o++)for(var l=this.description.Ed(o),d=0,p=u.ra.Va(l);d<p;d++){var g=this.Od(a,l,d);r.setAttribute(l,d,g)}},c.prototype.uD=function(a,r){if(this.vc(),r.Ac())throw u.i.fa("empty geometry");for(var o=r.description,l=0,d=o.Aa;l<d;l++)for(var p=o.Ed(l),g=u.ra.Va(p),v=0;v<g;v++){var w=r.Uc(p,v);this.tn(a,p,v,w)}},c.prototype.Od=function(a,r,o){if(this.Ac())throw u.i.fa("This operation was performed on an Empty Geometry.");if(r==0)return a!=0?o!=0?this.la:this.pa:o!=0?this.na:this.sa;if(o>=u.ra.Va(r))throw u.i.ce();var l=this.description.Pf(r);return 0<=l?(this.ka!=null&&this.ay(this.description.Ae.length-2),this.ka[c.Gg(this.description,a)+this.description.$j(l)-2+o]):u.ra.se(r)},c.prototype.tn=function(a,r,o,l){if(this.vc(),o>=u.ra.Va(r))throw u.i.ce();var d=this.description.Pf(r);0>d&&(this.re(r),d=this.description.Pf(r)),r==0?a!=0?o!=0?this.la=l:this.pa=l:o!=0?this.na=l:this.sa=l:(this.ka==null&&this.ay(this.description.Ae.length-2),this.ka[c.Gg(this.description,a)+this.description.$j(d)-2+o]=l)},c.prototype.copyTo=function(a){if(a.getType()!=this.getType())throw u.i.N();a.description=this.description,a.ay(this.description.Ae.length-2),c.gM(this.ka,a.ka,2*(this.description.Ae.length-2)),a.sa=this.sa,a.na=this.na,a.pa=this.pa,a.la=this.la,a.vc(),this.op(a)},c.prototype.Tg=function(a,r){var o=new u.Nc;return this.Ac()?(o.Oa(),o):(o.oa=this.Od(0,a,r),o.va=o.oa,o.Lk(this.Od(1,a,r)),o)},c.prototype.ZI=function(a){this.Ac()?a.Oa():(a.oa=this.Od(0,0,0),a.va=a.oa,a.Lk(this.Od(1,0,0)))},c.prototype.Tw=function(a,r){r.Nf(this.description),r.Cb(this.hc(a));for(var o=1,l=this.description.Aa;o<l;o++)for(var d=this.description.Ed(o),p=u.ra.Va(d),g=0;g<p;g++){var v=this.Uc(a,d,g);r.setAttribute(d,g,v)}},c.prototype.FM=function(a){if(this.description!=a.description||this.sa!=a.sa||this.pa!=a.pa||this.na!=a.na||this.la!=a.la)return!1;for(var r=0;r<2*(this.description.Ae.length-2);r++)if(this.ka[r]!=a.ka[r])return!1;return!0},c.prototype.BG=function(){return this.sa==this.pa&&this.na==this.la},c.prototype.reverse=function(){var a=this.sa;this.sa=this.pa,this.pa=a,a=this.na,this.na=this.la,this.la=a,a=1;for(var r=this.description.Aa;a<r;a++)for(var o=this.description.kd(a),l=0,d=u.ra.Va(o);l<d;l++){var p=this.Od(0,o,l),g=this.Od(1,o,l);this.tn(0,o,l,g),this.tn(1,o,l,p)}},c.prototype.zr=function(a,r,o){var l=this.getType(),d=a.getType();if(l===322){if(d==322)return u.yb.OM(this,a,r,o);throw u.i.Qa()}throw u.i.Qa()},c.prototype.KM=function(a,r,o,l,d){var p=this.getType(),g=a.getType();if(p===322){if(g==322)return u.yb.Zx(this,a,r,o,l,d);throw u.i.Qa()}throw u.i.Qa()},c.prototype.Tx=function(){return null},c.Gg=function(a,r){return r*(a.Ae.length-2)},c.prototype.hc=function(a,r){if(r===void 0)return r=new u.h,this.hc(a,r),r;u.lc.lT(this.sa,this.na,this.pa,this.la,a,r)},c.prototype.fe=function(){return null},c.prototype.eG=function(){return null},c.prototype.cq=function(){return null},c.prototype.Bi=function(){return null},c.prototype.Pn=function(){return null},c.prototype.kg=function(){return null},c.prototype.Ux=function(a,r){return r!==void 0?this.vx(r)-this.vx(a):this.vx(a)},c.prototype.op=function(){},c.prototype.dl=function(){return null},c.prototype.ah=function(){},c.prototype.Uc=function(){return null},c.prototype.Pe=function(){return null},c.prototype.vx=function(){return null},c.prototype.NG=function(){return null},c.prototype.tb=function(a,r){if(!r&&this.zr(a,0,!1)!=0)return 0;r=17976931348623157e292;var o=this.ac(),l=a.fe(o,!1);return o.sub(a.hc(l)),(o=o.length())<r&&(r=o),o=this.wc(),l=a.fe(o,!1),o.sub(a.hc(l)),(o=o.length())<r&&(r=o),o=a.ac(),l=this.fe(o,!1),o.sub(this.hc(l)),(o=o.length())<r&&(r=o),o=a.wc(),l=this.fe(o,!1),o.sub(this.hc(l)),(o=o.length())<r&&(r=o),r},c.prototype.mg=function(){return u.pi.gm(this,null)},c}(u.aa);u.SC=A}(V||(V={})),new V.h,function(u){var A;(A=u.$K||(u.$K={}))[A.Unknown=-1]="Unknown",A[A.Not=0]="Not",A[A.Weak=1]="Weak",A[A.Strong=2]="Strong",function(c){c[c.DirtyIsKnownSimple=1]="DirtyIsKnownSimple",c[c.IsWeakSimple=2]="IsWeakSimple",c[c.IsStrongSimple=4]="IsStrongSimple",c[c.DirtyOGCFlags=8]="DirtyOGCFlags",c[c.DirtyVerifiedStreams=32]="DirtyVerifiedStreams",c[c.DirtyExactIntervals=64]="DirtyExactIntervals",c[c.DirtyLooseIntervals=128]="DirtyLooseIntervals",c[c.DirtyIntervals=192]="DirtyIntervals",c[c.DirtyIsEnvelope=256]="DirtyIsEnvelope",c[c.DirtyLength2D=512]="DirtyLength2D",c[c.DirtyRingAreas2D=1024]="DirtyRingAreas2D",c[c.DirtyCoordinates=1993]="DirtyCoordinates",c[c.DirtyAllInternal=65535]="DirtyAllInternal",c[c.DirtyAll=16777215]="DirtyAll"}(u.MK||(u.MK={}));var b=function(c){function a(){var r=c.call(this)||this;return r.Hm=65535,r.wa=0,r.Pg=-1,r.Bb=null,r}return bt(a,c),a.prototype.op=function(){},a.prototype.$x=function(){},a.prototype.iy=function(){},a.prototype.I=function(){return this.wa},a.prototype.B=function(){return this.Ac()},a.prototype.Ac=function(){return this.wa==0},a.prototype.ak=function(r){return!!(this.Hm&r)},a.prototype.Lf=function(r,o){this.Hm=o?this.Hm|r:this.Hm&~r},a.prototype.mc=function(){this.ak(32)&&this.bN()},a.prototype.wx=function(){if(this.Ac())throw u.i.fa("This operation was performed on an Empty Geometry.")},a.prototype.ve=function(r,o){if(0>r||r>=this.wa)throw u.i.fa("index out of bounds");this.mc(),o.Nf(this.description),o.B()&&o.un();for(var l=0;l<this.description.Aa;l++)for(var d=this.description.Ed(l),p=0,g=u.ra.Va(d);p<g;p++){var v=this.za[l].eg(g*r+p);o.setAttribute(d,p,v)}},a.prototype.Ht=function(r,o){this.mc();for(var l=o.description,d=0;d<l.Aa;d++)for(var p=l.Ed(d),g=u.ra.Va(p),v=0;v<g;v++){var w=o.Uc(p,v);this.setAttribute(p,r,v,w)}},a.prototype.D=function(r,o){if(0>r||r>=this.I())throw u.i.ce();this.mc(),this.za[0].tc(2*r,o)},a.prototype.Na=function(r){var o=new u.h;return this.D(r,o),o},a.prototype.Gc=function(r,o){this.za[0].tc(2*r,o)},a.prototype.Cb=function(r,o,l){if(0>r||r>=this.wa)throw u.i.ce();this.mc();var d=this.za[0];l!==void 0?(d.write(2*r,o),d.write(2*r+1,l)):d.Tt(2*r,o),this.Pc(1993)},a.prototype.Cz=function(){if(void 0>=this.I())throw u.i.ce();this.mc();var r=this.za[0],o=new u.Nd;return o.x=r.read(NaN),o.y=r.read(NaN),o.z=this.hasAttribute(1)?this.za[1].eg():u.ra.se(1),o},a.prototype.dC=function(r){if(0>r||r>=this.I())throw u.i.ce();this.re(1),this.mc(),this.Pc(1993);var o=this.za[0];o.write(2*r,(void 0).x),o.write(2*r+1,(void 0).y),this.za[1].pr(r,(void 0).z)},a.prototype.Uc=function(r,o,l){if(0>o||o>=this.wa)throw u.i.ce();var d=u.ra.Va(r);if(l>=d)throw u.i.ce();this.mc();var p=this.description.Pf(r);return 0<=p?this.za[p].eg(o*d+l):u.ra.se(r)},a.prototype.yF=function(r,o){return this.Uc(r,o)},a.prototype.setAttribute=function(r,o,l,d){if(0>o||o>=this.wa)throw u.i.ce();var p=u.ra.Va(r);if(l>=p)throw u.i.ce();this.re(r),this.mc(),r=this.description.Pf(r),this.Pc(1993),this.za[r].pr(o*p+l,d)},a.prototype.ub=function(r){return this.wx(),this.re(r),this.mc(),this.za[this.description.Pf(r)]},a.prototype.hn=function(r,o){if(o!=null&&u.ra.Tp(r)!=o.Tp())throw u.i.N();this.re(r),r=this.description.Pf(r),this.za==null&&(this.za=u.Yc.qI(this.description.Aa)),this.za[r]=o,this.Pc(16777215)},a.prototype.sn=function(r){var o=null;if(this.za!=null){var l=u.ee.Iw(r,this.description);o=[];for(var d=0,p=r.Aa;d<p;d++)l[d]!=-1&&(o[d]=this.za[l[d]])}this.description=r,this.za=o,this.Pg=-1,this.Pc(16777215)},a.prototype.AD=function(r){this.wu(!0),r instanceof u.l?this.$.A(r):this.$.Qo(r)},a.prototype.aN=function(r){this.wu(!1),r instanceof u.l?this.$.A(r):this.$.Qo(r)},a.prototype.bn=function(r){this.wu(!0),this.$.copyTo(r)},a.prototype.A=function(r){this.AD(r)},a.prototype.Qo=function(r){this.AD(r)},a.prototype.xc=function(r){this.aN(r)},a.prototype.Tg=function(r,o){var l=new u.Nc;return this.Ac()?(l.Oa(),l):(this.wu(!0),this.$.Tg(r,o))},a.prototype.cc=function(){var r=this.description.cc();if(!this.Ac())for(var o=this.I(),l=0,d=this.description.Aa;l<d;l++)r=this.za[l].An(r,0,o*u.ra.Va(this.description.Ed(l)));return r},a.prototype.Nb=function(r){if(r==this)return!0;if(!(r instanceof a&&this.description.Nb(r.description))||this.Ac()!=r.Ac())return!1;if(this.Ac())return!0;var o=this.I();if(o!=r.I())return!1;for(var l=0;l<this.description.Aa;l++){var d=this.description.kd(l),p=this.ub(d),g=r.ub(d);if(!p.Nb(g,0,o*u.ra.Va(d)))return!1}return!0},a.prototype.copyTo=function(r){if(r.getType()!=this.getType())throw u.i.N();this.dD(r)},a.prototype.dD=function(r){this.mc(),r.description=this.description,r.za=null;var o=this.description.Aa,l=null;if(this.za!=null){l=[];for(var d=0;d<o;d++)this.za[d]!=null&&(l[d]=this.za[d].GB(this.I()*u.ra.Va(this.description.Ed(d))))}this.$!=null?(r.$=this.$.Ia(),this.$.copyTo(r.$)):r.$=null,r.wa=this.wa,r.Hm=this.Hm,r.za=l;try{this.op(r)}catch{throw r.Oa(),u.i.fu()}},a.prototype.wD=function(){this.wa=0,this.Pg=-1,this.za=null,this.Pc(16777215)},a.prototype.Pc=function(r){r==16777215&&(this.Pg=-1,this.$x()),this.Hm|=r,this.lM(),this.vc()},a.prototype.wu=function(r){if(this.mc(),this.ak(192))if(this.$==null?this.$=new u.Fh(this.description):this.$.Nf(this.description),this.B())this.$.Oa();else{this.hy(r);for(var o=1;o<this.description.Aa;o++)for(var l=this.description.Ed(o),d=u.ra.Va(l),p=this.za[o],g=0;g<d;g++){var v=new u.Nc;v.Oa();for(var w=0;w<this.wa;w++){var T=p.eg(w*d+g);v.Zb(T)}this.$.setInterval(l,g,v)}r&&this.Lf(192,!1)}},a.prototype.hy=function(){this.$.Oa();for(var r=this.za[0],o=new u.h,l=0;l<this.wa;l++)r.tc(2*l,o),this.$.Zb(o)},a.prototype.yp=function(r){r.Oa();for(var o=this.za[0],l=new u.h,d=0;d<this.wa;d++)o.tc(2*d,l),r.Zb(l)},a.prototype.bN=function(){if(this.Pg<this.wa){this.za==null&&(this.za=u.Yc.qI(this.description.Aa)),this.Pg=2147483647;for(var r=0;r<this.description.Aa;r++){var o=this.description.Ed(r);if(this.za[r]!=null){var l=u.ra.Va(o),d=u.O.truncate(this.za[r].size/l);d<this.wa&&(d=u.O.truncate(this.Pg>this.wa+5?(5*this.wa+3)/4:this.wa),this.za[r].resize(d*l,u.ra.se(o))),d<this.Pg&&(this.Pg=d)}else this.za[r]=u.Yc.YE(o,this.wa),this.Pg=this.wa}}this.iy(),this.Lf(32,!1)},a.prototype.dm=function(r){if(0>r)throw u.i.N();r!=this.wa&&(this.wa=r,this.Pc(65535))},a.prototype.om=function(r){if(!this.ak(1)){if(!this.ak(2))return 0;if(this.QT>=r)return this.ak(8)?1:2}return-1},a.prototype.Ch=function(r,o){if(this.QT=o,r==-1)this.Lf(1,!0),this.Lf(8,!0);else if(this.Lf(1,!1),this.Lf(8,!0),r==0)this.Lf(2,!1),this.Lf(4,!1);else if(r==1)this.Lf(2,!0),this.Lf(4,!1);else{if(r!=2)throw u.i.fa("internal error.");this.Lf(2,!0),this.Lf(4,!0)}},a.prototype.lM=function(){this.Bb!=null&&(this.Bb=null)},a.prototype.kD=function(r,o,l,d){if(0>r||r>=this.wa||0>o||o>=this.wa)throw u.i.fa("index out of bounds");this.mc(),d.Nf(this.description),d.B()&&d.un();for(var p=0;p<this.description.Aa;p++)for(var g=this.description.Ed(p),v=0,w=u.ra.Va(g);v<w;v++){var T=this.za[p].eg(w*r+v),$=this.za[p].eg(w*o+v);d.setAttribute(g,v,u.lc.hq(T,$,l))}},a.prototype.yr=function(r,o){var l=this.za[0].o,d=l[2*r]-l[2*o];return r=l[2*r+1]-l[2*o+1],Math.sqrt(d*d+r*r)},a.prototype.KR=function(r){if(0>r||r>=this.wa)throw u.i.ce();this.mc();var o=new u.Sa;o.Nf(this.description),o.B()&&o.un();for(var l=0;l<this.description.Aa;l++)for(var d=this.description.kd(l),p=0,g=u.ra.Va(d);p<g;p++){var v=this.za[l].eg(g*r+p);o.setAttribute(d,p,v)}return o},a.prototype.Dh=function(r,o){if(0>r||r>=this.wa)throw u.i.ce();if(o.B())throw u.i.N();this.mc();for(var l=o.description,d=0;d<l.Aa;d++)for(var p=l.kd(d),g=u.ra.Va(p),v=0;v<g;v++){var w=o.Uc(p,v);this.setAttribute(p,r,v,w)}},a.prototype.lu=function(){return null},a.prototype.fj=function(){return null},a}(u.aa);u.Gx=b}(V||(V={})),function(u){var A=function(){function b(){this.ob=this.Zn=null,this.Tm=124234251,this.Rv=!0,this.Qe=-1,this.ob=new u.$c(7),this.Zn=null}return b.prototype.Vo=function(c){this.Zn=c},b.prototype.RP=function(){this.Rv=!1},b.prototype.De=function(c){this.ob.De(c)},b.prototype.Pr=function(c){var a=this.ob.Ce();return this.rX(a),this.uX(c,a),a},b.prototype.MP=function(c){this.ob.jd(c)},b.prototype.addElement=function(c,a){return a==-1&&(this.Qe==-1&&(this.Qe=this.Pr(-1)),a=this.Qe),this.FD(c,0,a)},b.prototype.KD=function(c){return this.Qe==-1&&(this.Qe=this.Pr(-1)),this.FD(c,1,this.Qe)},b.prototype.xn=function(c){this.Qe==-1&&(this.Qe=this.Pr(-1));var a=this.Qe,r=this.ob.o;if(a==-1||r[7*a]==-1)return c=this.ob.Ll([-1,-1,-1,c,this.gl(),-1,-1]),(r=this.ob.o)[7*a]=c,this.vp(-1,c,a,r),c;var o=a==-1?-1:r[7*a+2];return c=this.ob.Ll([-1,-1,o,c,this.gl(),-1,-1]),(r=this.ob.o)[7*o+1]=c,this.oy(c,r),r[7*c+2]===-1&&(r[7*a]=c),this.vp(-1,c,a,r),c},b.prototype.zu=function(c,a,r,o){var l=-1;l==-1&&(this.Qe==-1&&(this.Qe=this.Pr(-1)),l=this.Qe);var d=this.ob.o;if(l==-1||d[7*l]==-1)return r=this.ob.Ll([-1,-1,-1,r,this.gl(),-1,-1]),(d=this.ob.o)[7*l]=r,this.vp(-1,r,l,d),r;if(o){o=a!=-1?this.Zn.compare(this,r,a):-1;var p=c!=-1?this.Zn.compare(this,r,c):1}else o=-1,p=1;if(o==0||p==0)return d[7*l+3]=o==0?a:c,-1;for((a!=-1&&c!=-1?this.Tm>u.O.bB(this.Tm)>>1:a!=-1)?c=a:o=p,a=!0;;){if(0>o){if((p=d[7*c])==-1){o=c,r=this.ob.Ll([-1,-1,c,r,this.gl(),-1,-1]),(d=this.ob.o)[7*c]=r;break}c=p}else{if((p=d[7*c+1])==-1){o=d[7*c+6],r=this.ob.Ll([-1,-1,c,r,this.gl(),-1,-1]),(d=this.ob.o)[7*c+1]=r;break}c=p}a&&(o*=-1,a=!1)}return this.oy(r,d),d[7*r+2]===-1&&(d[7*l]=r),this.vp(o,r,l,d),r},b.prototype.FF=function(){return this.iR(this.Qe)},b.prototype.vd=function(c,a){a=a==-1?this.Qe:a,this.Rv?this.LP(c,a):this.iY(c,a)},b.prototype.search=function(c,a){for(a=this.sv(a);a!=-1;){var r=this.Zn.compare(this,c,a);if(r==0)return a;a=0>r?this.ll(a):this.Xp(a)}return-1},b.prototype.IW=function(c){for(var a=this.sv(-1),r=-1;a!=-1;){var o=c.compare(this,a);if(o==0)return a;0>o?a=this.ll(a):(r=a,a=this.Xp(a))}return r},b.prototype.uJ=function(c){for(var a=this.sv(-1),r=-1;a!=-1;){var o=c.compare(this,a);if(o==0)return a;0>o?(r=a,a=this.ll(a)):a=this.Xp(a)}return r},b.prototype.ja=function(c){return this.ob.T(c,3)},b.prototype.ll=function(c){return this.ob.T(c,0)},b.prototype.Xp=function(c){return this.ob.T(c,1)},b.prototype.getParent=function(c){return this.ob.T(c,2)},b.prototype.lb=function(c){return this.ob.T(c,6)},b.prototype.we=function(c){return this.ob.T(c,5)},b.prototype.rc=function(c){return c==-1?this.kl(this.Qe):this.kl(c)},b.prototype.Fc=function(c){return c==-1?this.Zr(this.Qe):this.Zr(c)},b.prototype.ZR=function(c){return c==-1?this.bG(this.Qe):this.bG(c)},b.prototype.Sj=function(c,a){this.NB(c,a)},b.prototype.sv=function(c){return c==-1?this.YF(this.Qe):this.YF(c)},b.prototype.clear=function(){this.ob.mj(!1),this.Qe=-1},b.prototype.size=function(c){return c==-1?this.$F(this.Qe):this.$F(c)},b.prototype.KN=function(c,a){for(var r=a[7*c],o=a[7*c+1],l=a[7*c+4];r!=-1||o!=-1;){var d=r!=-1?a[7*r+4]:2147483647;if(o=o!=-1?a[7*o+4]:2147483647,l<=Math.min(d,o))break;d<=o?this.sJ(r,a):this.rJ(c,a),r=a[7*c],o=a[7*c+1]}},b.prototype.oy=function(c,a){if(this.Rv)for(var r=a[7*c+4],o=a[7*c+2];o!=-1&&a[7*o+4]>r;)a[7*o]==c?this.sJ(c,a):this.rJ(o,a),o=a[7*c+2]},b.prototype.rJ=function(c,a){var r=a[7*c+1];a[7*r+2]=a[7*c+2],a[7*c+2]=r;var o=a[7*r];a[7*c+1]=o,o!=-1&&(a[7*o+2]=c),a[7*r]=c,(o=a[7*r+2])!=-1&&(a[7*o]==c?a[7*o]=r:a[7*o+1]=r)},b.prototype.sJ=function(c,a){var r=a[7*c+2];a[7*c+2]=a[7*r+2],a[7*r+2]=c;var o=a[7*c+1];a[7*r]=o,o!=-1&&(a[7*o+2]=r),a[7*c+1]=r,(o=a[7*c+2])!=-1&&(a[7*o]===r?a[7*o]=c:a[7*o+1]=c)},b.prototype.Pk=function(c,a){this.ob.S(c,2,a)},b.prototype.TB=function(c,a){this.ob.S(c,0,a)},b.prototype.XB=function(c,a){this.ob.S(c,1,a)},b.prototype.WB=function(c,a){this.ob.S(c,5,a)},b.prototype.ex=function(c,a){this.ob.S(c,6,a)},b.prototype.XJ=function(c,a){this.ob.S(a,0,c)},b.prototype.rX=function(c){this.ob.S(c,4,0)},b.prototype.uX=function(c,a){this.ob.S(a,5,c)},b.prototype.YF=function(c){return c==-1?-1:this.ob.T(c,0)},b.prototype.kl=function(c){return c==-1?-1:this.ob.T(c,1)},b.prototype.Zr=function(c){return c==-1?-1:this.ob.T(c,2)},b.prototype.iR=function(c){return c==-1?-1:this.ob.T(c,3)},b.prototype.$F=function(c){return c==-1?0:this.ob.T(c,4)},b.prototype.bG=function(c){return this.ob.T(c,5)},b.prototype.Pw=function(){return this.ob.Ll([-1,-1,-1,void 0,this.gl(),-1,-1])},b.prototype.fl=function(c){c!=-1&&this.ob.jd(c)},b.prototype.gl=function(){return this.Tm=u.O.bB(this.Tm),1073741823&this.Tm},b.prototype.FD=function(c,a,r){var o=this.ob.o;if(r==-1||o[7*r]==-1)return c=this.ob.Ll([-1,-1,-1,c,this.gl(),-1,-1]),(o=this.ob.o)[7*r]=c,this.vp(-1,c,r,o),c;for(var l=r==-1?-1:o[7*r];;){var d=a==-1?1:this.Zn.compare(this,c,l);if(0>d){if((d=this.ll(l))==-1){a=l,c=this.ob.Ll([-1,-1,l,c,this.gl(),-1,-1]),(o=this.ob.o)[7*l]=c;break}l=d}else{if(a==1&&d==0)return o[7*r+3]=l,-1;if((d=o[7*l+1])==-1){a=o[7*l+6],c=this.ob.Ll([-1,-1,l,c,this.gl(),-1,-1]),(o=this.ob.o)[7*l+1]=c;break}l=d}}return this.oy(c,o),o[7*c+2]===-1&&(o[7*r]=c),this.vp(a,c,r,o),c},b.prototype.vp=function(c,a,r,o){if(c!=-1){var l=o[7*c+5];o[7*c+5]=a}else l=r==-1?-1:o[7*r+2];o[7*a+5]=l,l!=-1&&(o[7*l+6]=a),o[7*a+6]=c,c==(r==-1?-1:o[7*r+1])&&(o[7*r+1]=a),c==-1&&(o[7*r+2]=a),o[7*r+4]=(r==-1?0:o[7*r+4])+1},b.prototype.AB=function(c,a){var r=this.ob.o,o=r[7*c+5];c=r[7*c+6],o!=-1?r[7*o+6]=c:r[7*a+1]=c,c!=-1?r[7*c+5]=o:r[7*a+2]=o,r[7*a+4]=a===-1?-1:r[7*a+4]-1},b.prototype.iY=function(c,a){this.AB(c,a);var r=this.ll(c),o=this.Xp(c),l=this.getParent(c),d=c;if(r!=-1&&o!=-1){this.Tm=u.O.bB(this.Tm);var p=1073741823<this.Tm?this.lb(c):this.we(c),g=this.getParent(p)==c;this.ob.gC(c,p,0),this.ob.gC(c,p,1),this.ob.gC(c,p,2),l!=-1?this.ll(l)==c?this.TB(l,p):this.XB(l,p):this.XJ(p,a),g?(r==p?(this.TB(p,c),this.Pk(o,p)):o==p&&(this.XB(p,c),this.Pk(r,p)),this.Pk(c,p),l=p):(this.Pk(r,p),this.Pk(o,p),l=this.getParent(c),d=p),r=this.ll(c),o=this.Xp(c),r!=-1&&this.Pk(r,c),o!=-1&&this.Pk(o,c)}r=r!=-1?r:o,l==-1?this.XJ(r,a):this.ll(l)==d?this.TB(l,r):this.XB(l,r),r!=-1&&this.Pk(r,l),this.fl(c)},b.prototype.LP=function(c,a){var r=this.ob.o;r[7*c+4]=2147483647;var o=-1,l=-1,d=a===-1?-1:r[7*a],p=d==c;if(p&&(o=r[7*d],l=r[7*d+1],o==-1&&l==-1))return this.AB(d,a),this.fl(d),void(r[7*a]=-1);this.KN(c,r),(d=r[7*c+2])!=-1&&(r[7*d]==c?r[7*d]=-1:r[7*d+1]=-1),this.AB(c,a),this.fl(c),p&&(r[7*a]=o==-1||r[7*o+2]!=-1?l:o)},b.prototype.NB=function(c,a){this.ob.S(c,3,a)},b}();u.Yj=A}(V||(V={})),function(u){var A=function(){function b(c,a){c!==void 0&&this.K(c,a)}return b.prototype.K=function(c,a){this.oa=c,this.va=a,this.normalize()},b.prototype.isIntersecting=function(c){return this.oa<=c.oa?this.va>=c.oa:c.va>=this.oa},b.prototype.move=function(c){this.B()||(this.oa+=c,this.va+=c)},b.prototype.normalize=function(){if(!isNaN(this.oa)){if(this.oa>this.va){var c=this.oa;this.oa=this.va,this.va=c}isNaN(this.va)&&this.Oa()}},b.prototype.Oa=function(){this.va=this.oa=NaN},b.prototype.B=function(){return isNaN(this.oa)},b.prototype.Zb=function(c){typeof c=="number"?this.B()?this.va=this.oa=c:this.Lk(c):c.B()||(this.B()?(this.oa=c.oa,this.va=c.va):(this.oa>c.oa&&(this.oa=c.oa),this.va<c.va&&(this.va=c.va),this.oa>this.va&&this.Oa()))},b.prototype.Lk=function(c){c<this.oa?this.oa=c:c>this.va&&(this.va=c)},b.prototype.contains=function(c){return typeof c=="number"?c>=this.oa&&c<=this.va:c.oa>=this.oa&&c.va<=this.va},b.prototype.Ea=function(c){this.B()||c.B()?this.Oa():(this.oa<c.oa&&(this.oa=c.oa),this.va>c.va&&(this.va=c.va),this.oa>this.va&&this.Oa())},b.prototype.W=function(c){this.B()||(this.oa-=c,this.va+=c,this.va<this.oa&&this.Oa())},b.prototype.xr=function(){return this.B()?2220446049250313e-29:2220446049250313e-29*(Math.abs(this.oa)+Math.abs(this.va)+1)},b.prototype.KB=function(c,a){c>a?(this.oa=a,this.va=c):(this.oa=c,this.va=a)},b.prototype.It=function(c){return u.O.Rk(c,this.oa,this.va)},b.prototype.R=function(){return this.va-this.oa},b.prototype.sf=function(){return .5*(this.oa+this.va)},b.prototype.Nb=function(c){return c==this||c instanceof b&&(!(!this.B()||!c.B())||this.oa==c.oa&&this.va==c.va)},b.prototype.cc=function(){return u.O.uj(u.O.uj())},b}();u.Nc=A}(V||(V={})),function(u){var A=new u.Nc,b=new u.Nc,c=function(){this.ne=null,this.pb=-1,this.sb=new u.yb,this.qA=55555555,this.Tv=this.Vv=!1,this.Uf=new u.Nc,this.Uf.KB(0,0)};u.IY=c;var a=function(){function r(o,l,d){this.g=o,this.Hk=NaN,this.NH=this.Kq=0,this.OH=NaN,this.qa=l,this.Nq=10*l,this.PH=this.QH=NaN,this.rg=!1,this.Dm=this.gt=this.Lo=this.Xs=this.Ws=-1,this.gA=d,this.TA=new c,this.YH=new c,u.O.truncate(3*o.fd/2)}return r.prototype.mG=function(o,l,d,p){o.ne=p===null?null:p[d[5*l]],o.Tv=o.ne!=null,o.Tv||((p=d[5*l+2])!==-1&&this.g.mW(d[5*l],d[5*p],o.sb),o.ne=o.sb,o.Uf.KB(o.sb.sa,o.sb.pa),o.Uf.va+=this.qa,o.sb.rI(),o.Vv=o.sb.la==o.sb.na,o.Vv||(o.qA=(o.sb.pa-o.sb.sa)/(o.sb.la-o.sb.na)))},r.prototype.OO=function(o,l){var d=o.zr(l,this.qa,!0);return d!=0?d==2?this.Qy():this.xi():(o.Yp(Fs),o.Tr(An),l.Yp(wa),l.Tr(Rl),Mi.ma(this.Kq,this.Hk),Fs.qb(wa)&&this.Hk==Fs.y?0>An.compare(Rl)?Mi.L(An):Mi.L(Rl):Fs.qb(Rl)&&this.Hk==Fs.y?0>An.compare(wa)?Mi.L(An):Mi.L(wa):wa.qb(An)&&this.Hk==wa.y?0>Fs.compare(Rl)?Mi.L(Fs):Mi.L(Rl):An.qb(Rl)&&this.Hk==An.y&&(0>Fs.compare(wa)?Mi.L(Fs):Mi.L(wa)),o.Pe(Mi.y,Mi.x)<l.Pe(Mi.y,Mi.x)?-1:1)},r.prototype.MO=function(o,l){if(o.sb.na==l.sb.na&&o.sb.sa==l.sb.sa)return o.sb.la==l.sb.la&&o.sb.pa==l.sb.pa?this.gA?this.Qy():0:this.PE(o,l);if(o.sb.la==l.sb.la&&o.sb.pa==l.sb.pa)return this.OE(o,l);var d=this.OE(o,l);return o=this.PE(o,l),0>d&&0>o?-1:0<d&&0<o?1:this.xi()},r.prototype.IO=function(o,l){if(o.pa>l.pa){if(l.pa>l.sa&&l.la-l.na<2*this.qa&&o.vi(l.pa,l.la,this.qa))return this.xi()}else if((l.la-l.na)/(l.pa-l.sa)*(o.pa-o.sa)<this.Nq&&l.vi(o.pa,o.la,this.qa))return this.xi();return 1},r.prototype.JO=function(o,l){if(o.sa<l.sa){if(l.pa>l.sa&&l.la-l.na<2*this.qa&&o.vi(l.pa,l.la,this.qa))return this.xi()}else if((l.la-l.na)/(l.pa-l.sa)*(o.sa-o.pa)<this.Nq&&l.vi(o.sa,o.na,this.qa))return this.xi();return-1},r.prototype.KO=function(o,l){var d=new u.h;d.uc(l.wc(),l.ac()),d.ar(),d.normalize();var p=new u.h;p.uc(o.ac(),l.ac());var g=new u.h;g.uc(o.wc(),l.ac()),p=p.Qh(d),d=g.Qh(d),g=Math.abs(p);var v=Math.abs(d);if(g<v){if(g<this.Nq&&l.vi(o.sa,o.na,this.qa))return this.xi()}else if(v<this.Nq&&l.vi(o.pa,o.la,this.qa))return this.xi();return 0>p&&0>d?-1:0<p&&0<d?1:this.xi()},r.prototype.NE=function(o,l){return o.na==l.na&&o.sa==l.sa?this.IO(o,l):o.la==l.la&&o.pa==l.pa?this.JO(o,l):this.KO(o,l)},r.prototype.LO=function(o,l){return o.la==l.la&&o.pa==l.pa&&o.na==l.na&&o.sa==l.sa?this.gA?this.Qy():0:this.xi()},r.prototype.OE=function(o,l){var d=1;if(o.sb.na<l.sb.na){d=-1;var p=o;o=l,l=p}o=o.sb,p=l.sb;var g=o.sa-p.sa;l=l.qA*(o.na-p.na);var v=this.Nq;return g<l-v?-d:g>l+v?d:p.vi(o.sa,o.na,this.qa)?this.xi():g<l?-d:d},r.prototype.PE=function(o,l){var d=1;if(l.sb.la<o.sb.la){d=-1;var p=o;o=l,l=p}o=o.sb,p=l.sb;var g=o.pa-p.sa;l=l.qA*(o.la-p.na);var v=this.Nq;return g<l-v?-d:g>l+v?d:p.vi(o.pa,o.la,this.qa)?this.xi():g<l?-d:d},r.prototype.Qy=function(){return this.rg=!0,this.Ni=new u.Md(5,this.Lo,this.gt),-1},r.prototype.xi=function(){return this.rg=!0,this.gA?this.Ni=new u.Md(4,this.Lo,this.gt):this.gt=this.Lo=this.Xs=this.Ws=-1,-1},r.prototype.NO=function(o,l,d,p){if(this.rg)return-1;var g=this.OH==this.Hk&&this.NH==this.Kq;if(g&&o==this.Ws)var v=this.PH;else v=NaN,this.Ws=-1;return g&&l==this.Xs?g=this.QH:(g=NaN,this.Xs=-1),d.ne.ZI(A),p.ne.ZI(b),A.va<b.oa?-1:b.va<A.oa?1:(this.OH=this.Hk,this.NH=this.Kq,isNaN(v)&&(this.Ws=o,this.PH=v=o=d.ne.Pe(this.Hk,this.Kq)),isNaN(g)&&(this.Xs=l,this.QH=g=o=p.ne.Pe(this.Hk,this.Kq)),Math.abs(v-g)<=this.qa?this.OO(d.ne,p.ne):v<g?-1:v>g?1:0)},r.prototype.Kr=function(){this.rg=!1},r.prototype.rm=function(){return this.Ni},r.prototype.$J=function(o,l){this.Hk=o,this.Kq=l,this.gt=this.Lo=this.Xs=this.Ws=-1},r.prototype.compare=function(o,l,d){return this.rg?-1:(o=o.ja(d),this.Dm=d,this.RE(l,l,o,o))},r.prototype.RE=function(o,l,d,p){if(this.Lo==l)var g=this.TA;else this.Lo=l,g=this.TA,this.TA.pb=o,this.mG(g,l,this.g.td.o,this.g.We);if(v==null){this.gt=p;var v=this.YH;this.YH.pb=d,this.mG(v,p,this.g.td.o,this.g.We)}return g.Tv||v.Tv?this.NO(l,p,g,v):g.Uf.va<v.Uf.oa?-1:v.Uf.va<g.Uf.oa?1:(o=g.Vv?1:0,(o|=v.Vv?2:0)==0?this.MO(g,v):o==1?this.NE(g.sb,v.sb):o==2?-1*this.NE(v.sb,g.sb):this.LO(g.sb,v.sb))},r}();u.UC=a}(V||(V={})),function(u){var A=function(){function b(c,a){this.g=c,this.qa=a,this.rg=!1,this.Lo=-1,this.Uf=new u.Nc,this.Gq=new u.h,this.Gq.Rc(),this.ie=new u.yb,this.Dm=-1,this.BA=17976931348623157e292}return b.prototype.Kr=function(){this.rg=!1,this.BA=17976931348623157e292},b.prototype.Dh=function(c){this.Gq.L(c)},b.prototype.compare=function(c,a){return this.SE(a,c.ja(a))},b.prototype.SE=function(c,a){var r=this.g.bc(a)!=null;if(r||(this.g.ed(a,this.ie),this.Uf.KB(this.ie.sa,this.ie.pa)),r)throw u.i.fa("not implemented");if(this.Gq.x+this.qa<this.Uf.oa)return-1;if(this.Gq.x-this.qa>this.Uf.va)return 1;if(this.ie.na==this.ie.la)return this.Dm=c,this.rg=!0,0;this.ie.rI(),r=this.ie.ac(),(a=new u.h).uc(this.ie.wc(),r),a.ar();var o=new u.h;return o.uc(this.Gq,r),r=a.Qh(o),(r/=a.length())<10*-this.qa?-1:r>10*this.qa?1:this.ie.qs(this.Gq,this.qa)&&((a=Math.abs(r))<this.BA&&(this.Dm=c,this.BA=a),this.rg=!0,a<.25*this.qa)?0:0>r?-1:1},b}();u.aM=A}(V||(V={})),function(u){function A(c,a,r,o){r=new Float64Array(c.subarray(r,o)),c.set(r,a)}var b=function(){function c(a){this.Pb=this.pk=!1,this.o=null;var r=a;2>r&&(r=2),this.o=new Float64Array(r),this.size=a}return c.prototype.rotate=function(a,r,o){if(this.Pb)throw u.i.fa("invalid_call");if(r<a||r>o||a>o)throw u.i.N();a!=r&&o!=r&&(this.ni(a,r-a,1),this.ni(r,o-r,1),this.ni(a,o-a,1))},c.qf=function(a,r){var o=new c(a),l=o.o;if(2>a&&(a=2),r!==0)for(var d=0;d<a;d++)l[d]=r;return o},c.Bn=function(a){var r=new c(0);return r.o=new Float64Array(a.o),r.size=a.size,r},c.Lr=function(a,r){var o=new c(0);return o.size=a.size,o.size>r&&(o.size=r),2>(r=o.size)&&(r=2),o.o=new Float64Array(r),o.o.set(a.o.length<=r?a.o:a.o.subarray(0,r),0),o},c.prototype.Jb=function(a){0>=a||(this.o==null?this.o=new Float64Array(a):a<=this.o.length||(0<this.o.length?((a=new Float64Array(a)).set(this.o),this.o=a):this.o=new Float64Array(a)))},c.prototype.read=function(a){return this.o[a]},c.prototype.tc=function(a,r){r.x=this.o[a],r.y=this.o[a+1]},c.prototype.get=function(a){return this.o[a]},c.prototype.write=function(a,r){if(this.Pb)throw u.i.Hb();this.o[a]=r},c.prototype.set=function(a,r){if(this.Pb)throw u.i.Hb();this.o[a]=r},c.prototype.Tt=function(a,r){if(this.Pb)throw u.i.Hb();this.o[a]=r.x,this.o[a+1]=r.y},c.prototype.add=function(a){this.resize(this.size+1),this.o[this.size-1]=a},c.prototype.GB=function(a){return c.Lr(this,a)},c.prototype.eg=function(a){return this.read(a)},c.prototype.resize=function(a,r){if(r===void 0&&(r=0),this.pk)throw u.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");if(a<=this.size){if(30<this.o.length&&5*a/4<this.o.length){var o=new Float64Array(this.o,0,a);this.o=o}}else{a>this.o.length&&(o=u.O.truncate(64>a?Math.max(2*a,4):5*a/4),(o=new Float64Array(o)).set(this.o),this.o=o),o=this.o;for(var l=this.size;l<a;l++)o[l]=r}this.size=a},c.prototype.Bh=function(a){if((this.o==null||a>this.o.length)&&this.resize(a),this.pk)throw u.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");this.size=a},c.prototype.pr=function(a,r){this.write(a,r)},c.prototype.An=function(a,r,o){for(var l=this.size;r<l&&r<o;r++)a=u.O.uj(this.read(r));return a},c.prototype.Nb=function(a,r,o){if(a==null||!(a instanceof c))return!1;var l=this.size,d=a.size;if(o>l||o>d&&l!=d)return!1;for(o>l&&(o=l);r<o;r++)if(this.read(r)!=a.read(r))return!1;return!0},c.prototype.addRange=function(a,r,o,l,d){if(this.Pb)throw u.i.Hb();if(!l&&(1>d||o%d!=0))throw u.i.N();var p=this.size;if(this.resize(p+o),l)this.o.set(a.o.subarray(r,r+o),p);else{l=o;for(var g=0;g<o;g+=d){l-=d;for(var v=0;v<d;v++)this.o[p+g+v]=a.o[r+l+v]}}},c.prototype.Mn=function(a,r,o,l,d,p,g){if(this.Pb)throw u.i.Hb();if(!d&&(1>p||l%p!=0))throw u.i.N();var v=this.size-g;if(v<l&&this.resize(this.size+l-v),A(this.o,a+l,a,a+(g-a)),this.o==r.o&&a<o&&(o+=l),d)this.o.set(r.o.subarray(o,o+l),a);else for(d=l,g=0;g<l;g+=p)for(d-=p,v=0;v<p;v++)this.o[a+g+v]=r.o[o+d+v]},c.prototype.Iz=function(a,r,o,l,d,p){if(this.Pb)throw u.i.Hb();if(0>p&&(p=this.size),this.size+2*l>this.o.length?this.resize(this.size+2*l):this.size+=2*l,A(this.o,a+2*l,a,a+(p-a)),d)for(d=0;d<l;d++)p=r[o++],this.o[a++]=p.x,this.o[a++]=p.y;else{d=0;for(var g=l-1;d<l;++d)p=r[o+g],this.o[a++]=p.x,this.o[a++]=p.y,g--}},c.prototype.Ln=function(a,r,o,l){if(this.Pb)throw u.i.Hb();for(l-=a,A(this.o,a+l,a,a+l),l=0;l<o;l++)this.o[a+l]=r},c.prototype.vj=function(a,r,o){if(this.Pb)throw u.i.Hb();A(this.o,a+2,a,a+(o-a)),this.o[a]=r.x,this.o[a+1]=r.y},c.prototype.Ut=function(a,r,o,l,d,p){if(0>a||0>r||0>l||!d&&(0>=p||r%p!=0)||o.size<l+r)throw u.i.N();if(r!=0)if(this.size<r+a&&this.resize(r+a),o==this)this.Ar(a,r,l,d,p);else if(d)for(d=0;d<r;d++)this.o[a]=o.o[l],a++,l++;else if(l=l+r-p,p==1)for(d=0;d<r;d++)this.o[a]=o.o[l],a++,l--;else for(d=0,r=u.O.truncate(r/p);d<r;d++){for(var g=0;g<p;g++)this.o[a+g]=o.o[l+g];a+=p,l-=p}},c.prototype.En=function(a,r,o){if(this.Pb||a+r>this.size)throw u.i.Hb();0<o-(a+r)&&A(this.o,a,a+r,a+(o-(a+r))+r),this.size-=r},c.prototype.ni=function(a,r,o){if(this.Pb||1>o||r%o!=0)throw u.i.Hb();for(var l=r>>1,d=0;d<l;d+=o){r-=o;for(var p=0;p<o;p++){var g=this.o[a+d+p];this.o[a+d+p]=this.o[a+r+p],this.o[a+r+p]=g}}},c.prototype.Wj=function(a,r,o){if(0>r||0>o||0>r||o+r>this.size)throw u.i.N();for(var l=r;l<r+o;l++)this.o[l]=a},c.prototype.Ar=function(a,r,o,l,d){if(!(l&&a==o||(this.o.set(this.o.subarray(o,o+r),a),l)))for(o=a,a=a+r-d,l=0,r=u.O.truncate(r/2);l<r;l++){for(var p=0;p<d;p++){var g=this.o[o+p];this.o[o+p]=this.o[a+p],this.o[a+p]=g}o+=d,a-=d}},c.prototype.vC=function(a,r,o,l,d){if(0>a||0>r||0>l)throw u.i.N();if(r!=0)for(this.size<(r<<1)+a&&this.resize((r<<1)+a),d||(a+=r-1<<1),d=d?2:-2,r+=l;l<r;l++)this.o[a]=o[l].x,this.o[a+1]=o[l].y,a+=d},c.prototype.uC=function(a,r,o){if(0>a||0>r)throw u.i.N();if(r!=0){this.size<(r<<1)+a&&this.resize((r<<1)+a),r+=0;for(var l=0;l<r;l++)this.o[a]=o[l][0],this.o[a+1]=o[l][1],a+=2}},c.prototype.Vw=function(a,r,o,l,d){if(0>a||0>r||0>l||this.size<r+a)throw u.i.N();if(d)for(d=0;d<r;d++)o[l+d]=this.o[a+d];else for(l=l+r-1;a<r;a++)o[l]=this.o[a],l--},c.prototype.uB=function(a,r,o){if(0>a||0>r||this.size<(r>>1)+a)throw u.i.N();if(r!=0){r=0+r;for(var l=0;l<r;l++)o[l][0]=this.o[a],o[l][1]=this.o[a+1],a+=2}},c.prototype.clear=function(a){a?this.resize(0):this.Bh(0)},c.prototype.ix=function(){this.pk=this.Pb=!0},c.prototype.Vd=function(a,r,o){Array.prototype.sort.call(this.o.subarray(a,r),o)},c.prototype.Tp=function(){return 1},c}();u.be=b}(V||(V={})),function(u){function A(c,a,r,o){r=new Int32Array(c.subarray(r,o)),c.set(r,a)}u.rY=function(){this.random=1973};var b=function(){function c(a){this.Pb=this.pk=!1,this.o=null;var r=a;2>r&&(r=2),this.o=new Int32Array(r),this.size=a}return c.prototype.rotate=function(a,r,o){if(this.Pb)throw u.i.fa("invalid_call");if(r<a||r>o||a>o)throw u.i.N();a!=r&&o!=r&&(this.ni(a,r-a,1),this.ni(r,o-r,1),this.ni(a,o-a,1))},c.qf=function(a,r){var o=new c(a),l=o.o;if(2>a&&(a=2),r!==0)for(var d=0;d<a;d++)l[d]=r;return o},c.Bn=function(a){var r=new c(0);return r.o=new Int32Array(a.o),r.size=a.size,r},c.Lr=function(a,r){var o=new c(0);return o.size=a.size,o.size>r&&(o.size=r),2>(r=o.size)&&(r=2),o.o=new Int32Array(r),o.o.set(a.o.length<=r?a.o:a.o.subarray(0,r),0),o},c.prototype.Jb=function(a){0>=a||(this.o==null?this.o=new Int32Array(a):a<=this.o.length||(0<this.o.length?((a=new Int32Array(a)).set(this.o),this.o=a):this.o=new Int32Array(a)))},c.prototype.read=function(a){return this.o[a]},c.prototype.tc=function(a,r){r.x=this.o[a],r.y=this.o[a+1]},c.prototype.get=function(a){return this.o[a]},c.prototype.write=function(a,r){if(this.Pb)throw u.i.Hb();this.o[a]=r},c.prototype.set=function(a,r){if(this.Pb)throw u.i.Hb();this.o[a]=r},c.prototype.Tt=function(a,r){if(this.Pb)throw u.i.Hb();this.o[a]=r.x,this.o[a+1]=r.y},c.prototype.add=function(a){this.resize(this.size+1),this.o[this.size-1]=a},c.prototype.GB=function(a){return c.Lr(this,a)},c.prototype.eg=function(a){return this.read(a)},c.prototype.resize=function(a,r){if(r===void 0&&(r=0),this.pk)throw u.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");if(a<=this.size){if(30<this.o.length&&5*a/4<this.o.length){var o=new Int32Array(this.o,0,a);this.o=o}}else{a>this.o.length&&(o=u.O.truncate(64>a?Math.max(2*a,4):5*a/4),(o=new Int32Array(o)).set(this.o),this.o=o),o=this.o;for(var l=this.size;l<a;l++)o[l]=r}this.size=a},c.prototype.Bh=function(a){if((this.o==null||a>this.o.length)&&this.resize(a),this.pk)throw u.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");this.size=a},c.prototype.pr=function(a,r){this.write(a,r)},c.prototype.An=function(a,r,o){for(var l=this.size;r<l&&r<o;r++)a=u.O.Th(this.read(r),a);return a},c.prototype.Nb=function(a,r,o){if(a==null||!(a instanceof c))return!1;var l=this.size,d=a.size;if(o>l||o>d&&l!=d)return!1;for(o>l&&(o=l);r<o;r++)if(this.read(r)!=a.read(r))return!1;return!0},c.prototype.addRange=function(a,r,o,l,d){if(this.Pb)throw u.i.Hb();if(!l&&(1>d||o%d!=0))throw u.i.N();var p=this.size;if(this.resize(p+o),l)this.o.set(a.o.subarray(r,r+o),p);else{l=o;for(var g=0;g<o;g+=d){l-=d;for(var v=0;v<d;v++)this.o[p+g+v]=a.o[r+l+v]}}},c.prototype.Mn=function(a,r,o,l,d,p,g){if(this.Pb)throw u.i.Hb();if(!d&&(1>p||l%p!=0))throw u.i.N();if(A(this.o,a+l,a,a+(g-a)),this.o==r.o&&a<o&&(o+=l),d)this.o.set(r.o.subarray(o,o+l),a);else for(d=l,g=0;g<l;g+=p){d-=p;for(var v=0;v<p;v++)this.o[a+g+v]=r.o[o+d+v]}},c.prototype.Iz=function(a,r,o,l,d,p){if(this.Pb)throw u.i.Hb();if(0>p&&(p=this.size),this.size+2*l>this.o.length?this.resize(this.size+2*l):this.size+=2*l,A(this.o,a+2*l,a,a+(p-a)),d)for(d=0;d<l;d++)p=r[o++],this.o[a++]=p.x,this.o[a++]=p.y;else{d=0;for(var g=l-1;d<l;++d)p=r[o+g],this.o[a++]=p.x,this.o[a++]=p.y,g--}},c.prototype.Ln=function(a,r,o,l){if(this.Pb)throw u.i.Hb();for(l-=a,A(this.o,a+l,a,a+l),l=0;l<o;l++)this.o[a+l]=r},c.prototype.vj=function(a,r,o){if(this.Pb)throw u.i.Hb();A(this.o,a+2,a,a+(o-a)),this.o[a]=r.x,this.o[a+1]=r.y},c.prototype.Ut=function(a,r,o,l,d,p){if(0>a||0>r||0>l||!d&&(0>=p||r%p!=0)||o.size<l+r)throw u.i.N();if(r!=0)if(this.size<r+a&&this.resize(r+a),o==this)this.Ar(a,r,l,d,p);else if(d)for(d=0;d<r;d++)this.o[a]=o.o[l],a++,l++;else if(l=l+r-p,p==1)for(d=0;d<r;d++)this.o[a]=o.o[l],a++,l--;else for(d=0,r=u.O.truncate(r/p);d<r;d++){for(var g=0;g<p;g++)this.o[a+g]=o.o[l+g];a+=p,l-=p}},c.prototype.En=function(a,r,o){if(this.Pb||a+r>this.size)throw u.i.Hb();0<o-(a+r)&&A(this.o,a,a+r,a+(o-(a+r))+r),this.size-=r},c.prototype.ni=function(a,r,o){if(this.Pb||1>o||r%o!=0)throw u.i.Hb();for(var l=r>>1,d=0;d<l;d+=o){r-=o;for(var p=0;p<o;p++){var g=this.o[a+d+p];this.o[a+d+p]=this.o[a+r+p],this.o[a+r+p]=g}}},c.prototype.Wj=function(a,r,o){if(0>r||0>o||0>r||o+r>this.size)throw u.i.N();for(var l=r;l<r+o;l++)this.o[l]=a},c.prototype.Ar=function(a,r,o,l,d){if(!(l&&a==o||(this.o.set(this.o.subarray(o,o+r),a),l)))for(o=a,a=a+r-d,l=0,r=u.O.truncate(r/2);l<r;l++){for(var p=0;p<d;p++){var g=this.o[o+p];this.o[o+p]=this.o[a+p],this.o[a+p]=g}o+=d,a-=d}},c.prototype.vC=function(a,r,o,l,d){if(0>a||0>r||0>l)throw u.i.N();if(r!=0)for(this.size<(r<<1)+a&&this.resize((r<<1)+a),d||(a+=r-1<<1),d=d?2:-2,r+=l;l<r;l++)this.o[a]=o[l].x,this.o[a+1]=o[l].y,a+=d},c.prototype.Vw=function(a,r,o,l,d){if(0>a||0>r||0>l||this.size<r+a)throw u.i.N();if(d)for(d=0;d<r;d++)o[l+d]=this.o[a+d];else for(l=l+r-1;a<r;a++)o[l]=this.o[a],l--},c.prototype.clear=function(a){a?this.resize(0):this.Bh(0)},c.prototype.ix=function(){this.pk=this.Pb=!0},c.prototype.Vd=function(a,r,o){10>r-a?c.rG(this.o,a,r,o):c.qB(this.o,a,r-1,o)},c.prototype.Tp=function(){return 2},c.prototype.Fc=function(){return this.o[this.size-1]},c.prototype.If=function(){this.resize(this.size-1)},c.prototype.bX=function(a){this.o[this.size-1]=a},c.prototype.SV=function(a){a<this.size-1&&(this.o[a]=this.o[this.size-1]),this.resize(this.size-1)},c.prototype.lF=function(a){for(var r=0,o=this.size;r<o;r++)if(this.o[r]==a)return r;return-1},c.prototype.hG=function(a){return 0<=this.lF(a)},c.rG=function(a,r,o,l){for(var d=r;d<o;d++){for(var p=a[d],g=d-1;g>=r&&0<l(a[g],p);)a[g+1]=a[g],g--;a[g+1]=p}},c.tx=function(a,r,o){var l=a[o];a[o]=a[r],a[r]=l},c.qB=function(a,r,o,l){if(!(r>=o))for(;;){if(9>o-r){c.rG(a,r,o+1,l);break}var d=a[r];c.tx(a,r,o);for(var p=r,g=r;g<o;g++)0>=l(a[g],d)&&(c.tx(a,p,g),p+=1);c.tx(a,p,o),p-r<o-p?(c.qB(a,r,p-1,l),r=p+1):(c.qB(a,p+1,o,l),o=p-1)}},c}();u.ia=b}(V||(V={})),function(u){function A(c,a,r,o){r=new Int8Array(c.subarray(r,o)),c.set(r,a)}var b=function(){function c(a){this.o=null;var r=a;2>r&&(r=2),this.o=new Int8Array(r),this.size=a}return c.prototype.rotate=function(a,r,o){if(this.Pb)throw u.i.fa("invalid_call");if(r<a||r>o||a>o)throw u.i.N();a!=r&&o!=r&&(this.ni(a,r-a,1),this.ni(r,o-r,1),this.ni(a,o-a,1))},c.qf=function(a,r){var o=new c(a),l=o.o;if(2>a&&(a=2),r!==0)for(var d=0;d<a;d++)l[d]=r;return o},c.Bn=function(a){var r=new c(0);return r.o=new Int8Array(a.o),r.size=a.size,r},c.Lr=function(a,r){var o=new c(0);return o.size=a.size,o.size>r&&(o.size=r),2>(r=o.size)&&(r=2),o.o=new Int8Array(r),o.o.set(a.o.length<=r?a.o:a.o.subarray(0,r),0),o},c.prototype.Jb=function(a){0>=a||(this.o==null?this.o=new Int8Array(a):a<=this.o.length||(0<this.o.length?((a=new Int8Array(a)).set(this.o),this.o=a):this.o=new Int8Array(a)))},c.prototype.read=function(a){return this.o[a]},c.prototype.tc=function(a,r){r.x=this.o[a],r.y=this.o[a+1]},c.prototype.get=function(a){return this.o[a]},c.prototype.write=function(a,r){if(this.Pb)throw u.i.Hb();this.o[a]=r},c.prototype.set=function(a,r){if(this.Pb)throw u.i.Hb();this.o[a]=r},c.prototype.Tt=function(a,r){if(this.Pb)throw u.i.Hb();this.o[a]=r.x,this.o[a+1]=r.y},c.prototype.add=function(a){this.resize(this.size+1),this.o[this.size-1]=a},c.prototype.GB=function(a){return c.Lr(this,a)},c.prototype.eg=function(a){return this.read(a)},c.prototype.resize=function(a,r){if(r===void 0&&(r=0),this.pk)throw u.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");if(a<=this.size){if(30<this.o.length&&5*a/4<this.o.length){var o=new Int8Array(this.o,0,a);this.o=o}}else{a>this.o.length&&(o=u.O.truncate(64>a?Math.max(2*a,4):5*a/4),(o=new Int8Array(o)).set(this.o),this.o=o),o=this.o;for(var l=this.size;l<a;l++)o[l]=r}this.size=a},c.prototype.Bh=function(a){if((this.o==null||a>this.o.length)&&this.resize(a),this.pk)throw u.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");this.size=a},c.prototype.pr=function(a,r){this.write(a,r)},c.prototype.An=function(a,r,o){for(var l=this.size;r<l&&r<o;r++)a=u.O.Th(this.read(r),a);return a},c.prototype.Nb=function(a,r,o){if(a==null||!(a instanceof c))return!1;var l=this.size,d=a.size;if(o>l||o>d&&l!=d)return!1;for(o>l&&(o=l);r<o;r++)if(this.read(r)!=a.read(r))return!1;return!0},c.prototype.addRange=function(a,r,o,l,d){if(this.Pb)throw u.i.Hb();if(!l&&(1>d||o%d!=0))throw u.i.N();var p=this.size;if(this.resize(p+o),l)this.o.set(a.o.subarray(r,r+o),p);else{l=o;for(var g=0;g<o;g+=d){l-=d;for(var v=0;v<d;v++)this.o[p+g+v]=a.o[r+l+v]}}},c.prototype.Mn=function(a,r,o,l,d,p,g){if(this.Pb)throw u.i.Hb();if(!d&&(1>p||l%p!=0))throw u.i.N();if(A(this.o,a+l,a,a+(g-a)),this.o==r.o&&a<o&&(o+=l),d)this.o.set(r.o.subarray(o,o+l),a);else for(d=l,g=0;g<l;g+=p){d-=p;for(var v=0;v<p;v++)this.o[a+g+v]=r.o[o+d+v]}},c.prototype.Ln=function(a,r,o,l){if(this.Pb)throw u.i.Hb();for(l-=a,A(this.o,a+l,a,a+l),l=0;l<o;l++)this.o[a+l]=r},c.prototype.Iz=function(a,r,o,l,d,p){if(this.Pb)throw u.i.Hb();if(0>p&&(p=this.size),this.size+2*l>this.o.length?this.resize(this.size+2*l):this.size+=2*l,A(this.o,a+2*l,a,a+(p-a)),d)for(d=0;d<l;d++)p=r[o++],this.o[a++]=p.x,this.o[a++]=p.y;else{d=0;for(var g=l-1;d<l;++d)p=r[o+g],this.o[a++]=p.x,this.o[a++]=p.y,g--}},c.prototype.vj=function(a,r,o){if(this.Pb)throw u.i.Hb();A(this.o,a+2,a,a+(o-a)),this.o[a]=r.x,this.o[a+1]=r.y},c.prototype.Ut=function(a,r,o,l,d,p){if(0>a||0>r||0>l||!d&&(0>=p||r%p!=0)||o.size<l+r)throw u.i.N();if(r!=0)if(this.size<r+a&&this.resize(r+a),o==this)this.Ar(a,r,l,d,p);else if(d)for(d=0;d<r;d++)this.o[a]=o.o[l],a++,l++;else if(l=l+r-p,p==1)for(d=0;d<r;d++)this.o[a]=o.o[l],a++,l--;else for(d=0,r=u.O.truncate(r/p);d<r;d++){for(var g=0;g<p;g++)this.o[a+g]=o.o[l+g];a+=p,l-=p}},c.prototype.En=function(a,r,o){if(this.Pb||a+r>this.size)throw u.i.Hb();0<o-(a+r)&&A(this.o,a,a+r,a+(o-(a+r))+r),this.size-=r},c.prototype.ni=function(a,r,o){if(this.Pb||1>o||r%o!=0)throw u.i.Hb();for(var l=r>>1,d=0;d<l;d+=o){r-=o;for(var p=0;p<o;p++){var g=this.o[a+d+p];this.o[a+d+p]=this.o[a+r+p],this.o[a+r+p]=g}}},c.prototype.Wj=function(a,r,o){if(0>r||0>o||0>r||o+r>this.size)throw u.i.N();for(var l=r;l<r+o;l++)this.o[l]=a},c.prototype.Ar=function(a,r,o,l,d){if(!(l&&a==o||(this.o.set(this.o.subarray(o,o+r),a),l)))for(o=a,a=a+r-d,l=0,r=u.O.truncate(r/2);l<r;l++){for(var p=0;p<d;p++){var g=this.o[o+p];this.o[o+p]=this.o[a+p],this.o[a+p]=g}o+=d,a-=d}},c.prototype.vC=function(a,r,o,l,d){if(0>a||0>r||0>l)throw u.i.N();if(r!=0)for(this.size<(r<<1)+a&&this.resize((r<<1)+a),d||(a+=r-1<<1),d=d?2:-2,r+=l;l<r;l++)this.o[a]=o[l].x,this.o[a+1]=o[l].y,a+=d},c.prototype.Vw=function(a,r,o,l,d){if(0>a||0>r||0>l||this.size<r+a)throw u.i.N();if(d)for(d=0;d<r;d++)o[l+d]=this.o[a+d];else for(l=l+r-1;a<r;a++)o[l]=this.o[a],l--},c.prototype.clear=function(a){a?this.resize(0):this.Bh(0)},c.prototype.ix=function(){this.pk=this.Pb=!0},c.prototype.Vd=function(a,r,o){r=this.o.subarray(a,r),Array.prototype.sort.call(r,o),this.o.set(r,a)},c.prototype.zJ=function(a,r){if(this.Pb)throw u.i.fa("invalid call. Attribute Stream is read only.");this.o[a]|=r},c.prototype.KE=function(a,r){if(this.Pb)throw u.i.fa("invalid call. Attribute Stream is read only.");this.o[a]&=~r},c.prototype.Tp=function(){return 1},c}();u.pn=b}(V||(V={})),function(u){u.Yc=function(){function A(){}return A.Mr=function(b,c){return u.pn.qf(b,c)},A.Dn=function(b,c){return u.be.qf(b,c)},A.pP=function(b,c,a){switch(b){case 1:b=u.be.qf(c,a);break;case 2:b=u.ia.qf(c,a);break;case 4:b=u.pn.qf(c,a);break;default:throw u.i.Qa()}return b},A.YE=function(b,c){return A.pP(u.ra.Tp(b),c*u.ra.Va(b),u.ra.se(b))},A.Oh=function(b,c){return u.ia.qf(b,c)},A.qI=function(b){var c,a=[];for(c=0;c<b;c++)a.push(null);return a},A}()}(V||(V={})),function(u){u.ga=function(A){A===void 0&&(A=0),this.u=A}}(V||(V={})),function(u){u.NL=function(){function A(){}return A.bind=function(b){u.Sc=b.PeDefs,u.pf=b.PeFactory,u.NC=b.PeVertcs,u.ej=b.PeCSTransformations,u.MC=b.PeGTTransformations,u.LL=b.PeGeogtran,u.KL=b.PeFactoryCodechange,u.LC=b.PeGCSExtent,u.Cg=b.PePCSInfo,u.ML=b.PeHorizon,u.JL=b.PeCoordsys,u.lp=b.PeGTlistExtended,u.lp.PE_GTLIST_OPTS_USE_DEFAULT=128,u.pf.initialize(null),u.Mx=b.PeGTlistExtendedEntry,u.pf.fromString(u.Sc.PE_TYPE_UNIT,'UNIT["Meter",1.0]')},A}(),u.pf=null,u.NC=null,u.JL=null,u.ML=null,u.Cg=null,u.lp=null,u.Mx=null,u.LC=null,u.KL=null,u.LL=null,u.Sc=null,u.MC=null,u.ej=null}(V||(V={})),function(u){var A=function(){function b(){}return b.Mb=function(c,a){return 0<=a?b.P(c):-b.P(c)},b.P=function(c){return 0>c?-c:c},b.ti=function(c){return 3552713678800501e-30>c},b.KC=function(c,a,r){return b.P(c-a)<=r*(1+(b.P(c)+b.P(a))/2)},b.Y=function(c,a){return b.KC(c,a,3552713678800501e-30)},b.FL=function(c){return 3552713678800501e-30>=b.P(c)},b.Cd=function(c){return b.FL(c)},b}();u.s=A,u.F=function(){function b(){}return b.gp=function(c,a){var r=0;return(c=A.P(c))+(a=A.P(a))!=0&&(c>a?(r=a/c,r=c*Math.sqrt(1+r*r)):(r=c/a,r=a*Math.sqrt(1+r*r))),r},b.Wq=function(c,a,r,o,l){for(var d=[0,0,0],p=[0,0,0],g=0;2>=g;g++)a[g]-=c[g],r[g]-=a[g];r=d[1]*p[2]-d[2]*p[1],a=d[2]*p[0]-d[0]*p[2],d=d[0]*p[1]-d[1]*p[0],c=-1*(r*c[0]+a*c[1]+d*c[2]),o[0]=r,o[1]=a,o[2]=d,o[3]=c,p=b.on(o),o[0]/=p,o[1]/=p,o[2]/=p,o[3]/=p,l!=0&&(p=A.Cd(d)?A.Cd(c)?A.Mb(1,a):-A.Mb(1,c):A.Mb(1,d),p*=A.Mb(1,l),o[0]*=p,o[1]*=p,o[2]*=p,o[3]*=p)},b.zx=function(c,a,r){r[0]=c[1]*a[2]-a[1]*c[2],r[1]=c[2]*a[0]-a[2]*c[0],r[2]=c[0]*a[1]-a[0]*c[1]},b.St=function(c,a){return c[0]*a[0]+c[1]*a[1]+c[2]*a[2]},b.on=function(c){return b.gp(b.gp(c[0],c[1]),c[2])},b.cl=function(c,a,r,o,l,d,p,g){c=b.n(c,a,r);var v=Math.cos(r);d.u=(c+l)*v*Math.cos(o),p.u=(c+l)*v*Math.sin(o),g.u=(c*(1-a)+l)*Math.sin(r)},b.jO=function(c,a,r,o,l,d,p){var g=b.gp(a,r),v=1*Math.sqrt(1-c),w=v/1;if(A.Y(g,0))d.u=0,l.u=A.Mb(1.570796326794897,o),p.u=A.P(o)-v;else{d.u=Math.atan2(r,a),r=Math.atan2(1*o,v*g),d=Math.cos(r);var T=Math.sin(r);a=v*c/(1-c),c*=1,r=Math.atan2(o+a*T*T*T,g-c*d*d*d),3.141592653589793<A.P(r)&&(r=A.Mb(3.141592653589793,r)-r),r=Math.atan(w*Math.tan(r)),T=Math.sin(r),d=Math.cos(r),l.u=Math.atan2(o+a*T*T*T,g-c*d*d*d),1.570796326794897<A.P(l.u)&&(l.u=A.Mb(3.141592653589793,l.u)-l.u),r=Math.atan(w*Math.tan(l.u)),T=Math.sin(r),d=Math.cos(r),p.u=(o-v*T)*Math.sin(l.u)+(g-1*d)*Math.cos(l.u)}},b.n=function(c,a,r){return r=Math.sin(r),c/Math.sqrt(1-a*r*r)},b.ot=function(c,a){return Math.atan2(Math.sin(a)*(1-c),Math.cos(a))},b.Qj=function(c,a){return Math.atan2(Math.sin(a),Math.cos(a)*(1-c))},b.Rq=function(c,a){if(A.ti(c)||a==0||A.Y(A.P(a),1.570796326794897))return a;if(.006884661117170036>c){var r=Math.sqrt(1-c),o=(1-r)/(1+r),l=o*o,d=o*l,p=o*d,g=o*p,v=o*g,w=o*v,T=1.572916666666667*d-3.2578125*g+4.295068359375*w;c=2.142578125*p-6.071484375*v,r=3.129296875*g-11.249837239583334*w;var $=4.775276692708333*v,C=7.958636765252976*w,O=Math.cos(2*a);return a+Math.sin(2*a)*(1.5*o-.84375*d+.525390625*g-.2688395182291667*w-T+r-C+O*(2*(1.3125*l-1.71875*p+1.650146484375*v)-4*c+6*$+O*(4*T-12*r+24*C+O*(8*c-32*$+O*(16*r-80*C+O*(32*$+64*O*C))))))}for(r=1-c,o=c/2,d=(l=A.P(a))*b.Zu(c)/(1.570796326794897*r),p=9999,v=l,l=0;1e-16<p&&50>l;l++)w=b.w(c,v),g=v-(T=(g=(b.kG(v,c)-o*Math.sin(2*v)/w)/r-d)/(w=1/(w*w*w))),p=A.P(T),v=g;return 0<=a?v:-v},b.qW=function(c,a){return A.ti(a)?c:c*b.Zu(a)/1.570796326794897},b.ba=function(c){return 0>(c=b.pF(c,6.283185307179586))?c+6.283185307179586:3.141592653589793>A.P(c)||A.Y(A.P(c),3.141592653589793)?c:c-6.283185307179586},b.pF=function(c,a){return c-Math.floor(c/a)*a},b.Ah=function(c,a){if(.006884661117170036>a){var r=(a=(1-(a=Math.sqrt(1-a)))/(1+a))*a,o=r*r;return c/(1+a)*(1+.25*r+.015625*o+.00390625*r*o)*1.570796326794897}return c*b.Zu(a)},b.Vq=function(c,a){var r=A.Mb(1,Math.sin(a));return a=1.570796326794897>=(a=A.P(b.pF(a,3.141592653589793)))?a:3.141592653589793-a,(A.Y(a,1.570796326794897)?a:Math.atan(Math.sqrt(1-c)*Math.tan(a)))*r},b.q=function(c,a,r){if(.006884661117170036>a){var o=(a=(1-(a=Math.sqrt(1-a)))/(1+a))*a,l=a*o,d=a*l,p=a*d,g=a*p,v=a*g,w=-.7291666666666666*l+.2278645833333333*p+.03987630208333334*v,T=.615234375*d-.21533203125*g,$=-.54140625*p+.20302734375*v,C=.48876953125*g,O=-.4488699776785715*v,N=Math.cos(2*r);return c/(1+a)*((1+.25*o+.015625*d+.00390625*g)*r+Math.sin(2*r)*(-1.5*a+.1875*l+.0234375*p+.00732421875*v-w+$-O+N*(2*(.9375*o-.234375*d-.03662109375*g)-4*T+6*C+N*(4*w-12*$+24*O+N*(8*T-32*C+N*(16*$-80*O+N*(32*C+64*N*O)))))))}return c*(b.kG(r,a)-.5*a*Math.sin(2*r)/b.w(a,r))},b.w=function(c,a){return a=Math.sin(a),Math.sqrt(1-c*a*a)},b.Zu=function(c){return A.KC(c,1,2220446049250313e-31)?1:1>c?b.Xw(0,1-c)-c/3*b.Uw(0,1-c):NaN},b.kG=function(c,a){var r=A.Mb(1,c);c=A.P(c);var o=Math.floor(c/1.570796326794897);if(1<a)a=c==0?0:NaN;else if(A.Cd(o))a=(c=b.sin(c))*b.Xw(1-c*c,1-a*c*c)-a/3*c*c*c*b.Uw(1-c*c,1-a*c*c);else{var l=u.O.truncate(o%2),d=b.Zu(a);0<l?(c=1.570796326794897*(o+1)-c,a=d*(o+1)-(a=(c=Math.sin(c))*b.Xw(1-c*c,1-a*c*c)-a/3*c*c*c*b.Uw(1-c*c,1-a*c*c))):(c-=1.570796326794897*o,a=d*o+(a=(c=Math.sin(c))*b.Xw(1-c*c,1-a*c*c)-a/3*c*c*c*b.Uw(1-c*c,1-a*c*c)))}return a*r},b.sin=function(c){c=b.ba(c);var a=A.Mb(1,c);return c=A.P(c),A.Y(c,3.141592653589793)?0:A.Y(c,1.570796326794897)?1*a:Math.sin(c)*a},b.Uw=function(c,a){var r,o,l,d,p=c,g=a,v=1;for(a=0,c=1;o=((r=.2*(p+g+3*v))-p)/r,l=(r-g)/r,d=(r-v)/r,!(1e-4>A.P(o)&&1e-4>A.P(l)&&1e-4>A.P(d));)d=Math.sqrt(g),a+=c/((r=Math.sqrt(v))*(v+(d=Math.sqrt(p)*(d+r)+d*r))),c*=.25,p=.25*(p+d),g=.25*(g+d),v=.25*(v+d);return g=(p=o*l)-(v=d*d),3*a+c*(1+(v=p-6*v)*(.10227272727272728*v-.2142857142857143-.1730769230769231*d*(o=v+g+g))+d*(.1666666666666667*o+d*(-.4090909090909091*g+.1153846153846154*d*p)))/(r*Math.sqrt(r))},b.Xw=function(c,a){for(var r,o,l,d,p=1;o=2-((r=(c+a+p)/3)+c)/r,l=2-(r+a)/r,d=2-(r+p)/r,!(1e-4>A.P(o)&&1e-4>A.P(l)&&1e-4>A.P(d));p=.25*(p+r))r=Math.sqrt(a),o=Math.sqrt(p),c=.25*(c+(r=Math.sqrt(c)*(r+o)+r*o)),a=.25*(a+r);return(1+(.04166666666666666*(c=o*l-d*d)-.1-.06818181818181818*(a=o*l*d))*c+.07142857142857142*a)/Math.sqrt(r)},b.Qw=function(c,a){if(A.ti(c)||a==0||A.Y(A.P(a),1.570796326794897))return a;if(.006884661117170036>c){var r=c*c,o=c*r,l=c*o,d=c*l,p=c*d,g=c*p,v=-(.02708333333333333*o+.03430059523809524*l+.03149181547619048*d+.02634359154541446*p+.02156896735835538*g),w=.007669890873015873*l+.01299603174603175*d+.0148051353064374*p+.01454454953803912*g,T=-(.002275545634920635*d+.004830845032667949*p+.006558395368616723*g),$=.0006957236677288761*p+.001775193002406544*g,C=-.000217324089394402*g,O=Math.cos(2*a);return a+Math.sin(2*a)*(-(.5*c+.2083333333333333*r+.09375*o+.04878472222222222*l+.02916666666666667*d+.01938905423280423*p+.01388255931712963*g)-v+T-C+O*(2*(.1041666666666667*r+.0875*o+.06050347222222222*l+.04151785714285714*d+.02958958540013228*p+.02203667534722222*g)-4*w+6*$+O*(4*v-12*T+24*C+O*(8*w-32*$+O*(16*T-80*C+O*(32*$+64*O*C))))))}return a==0||A.Y(A.P(a),1.570796326794897)?r=a:(l=(o=Math.sqrt(c))*Math.sin(a),r=Math.tan(.7853981633974483+a/2)*Math.pow((1-l)/(1+l),o/2),r=2*Math.atan(r)-1.570796326794897),r},b.yO=function(c,a){if(A.ti(c)||a==0||A.Y(A.P(a),1.570796326794897))return a;if(.006884661117170036>c){var r=c*($=c*(T=c*(O=c*c))),o=c*(C=c*r),l=.05833333333333333*T+.07232142857142858*$+.05634300595238095*r+.0355325796406526*C+.020235546186067*o,d=.02653149801587302*$+.04379960317460317*r+.0429211791776896*C+.03255384637546096*o,p=.01294022817460318*r+.02668104344536636*C+.03155651254609588*o,g=.00659454790965208*C+.0163075268674227*o,v=.003463473736911237*o,w=Math.cos(2*a);return a+Math.sin(2*a)*(.5*c+.2083333333333333*O+.08333333333333333*T+.03611111111111111*$+.01875*r+.01195601851851852*C+.008863673941798942*o-l+p-v+w*(2*(.1458333333333333*O+.1208333333333333*T+.07039930555555556*$+.03616071428571429*r+.01839451058201058*C+.01017113095238095*o)-4*d+6*g+w*(4*l-12*p+24*v+w*(8*d-32*g+w*(16*p-80*v+w*(32*g+64*w*v))))))}var T=Math.sqrt(c),$=T/2,C=Math.tan(.7853981633974483+a/2);c=0,l=1;for(var O=a;l!=0;O=o)r=T*Math.sin(O),o=C*Math.pow((1+r)/(1-r),$),o=2*Math.atan(o)-1.570796326794897,c++,(A.Y(o,O)||3e4<c)&&(l=0);return O},b}()}(V||(V={})),function(u){var A=function(){function b(c){this.ul=this.Us=null,this.Iv=!1,this.GA=this.HA=0,this.HH=new u.h,this.XH=new u.h,this.KA=!1,this.vq=new u.l,this.wH=this.sw=0,this.tw=null,this.zl=!1,this.Eo=null,this.bA=0,this.Ue=c,this.As=u.zb.xv(this.Ue,0,!0),this.HH.Rc(),this.XH.Rc(),this.RH=NaN;var a=c.getCode();0<a?(this.Kk=a,u.pf.getCode(c)):this.Kk=u.pf.getCode(c),0>this.Kk&&(this.Kk=0);var r=this.Ue.getType();if(this.jH=r==u.Sc.PE_TYPE_PROJCS?2:1,r==u.Sc.PE_TYPE_PROJCS&&!c.loadConstants())throw u.i.N("PeProjcs.loadConstants failed");a=r==u.Sc.PE_TYPE_GEOGCS?this.Ue:this.Ue.getGeogcs(),r!=u.Sc.PE_TYPE_GEOGCS&&u.pf.getCode(a),this.Eo=c.getUnit(),this.RH=a.getPrimem().getLongitude(),this.wH=c=a.getUnit().getUnitFactor(),c=Math.PI/(180*c),1e-10>Math.abs(c-1)&&(c=1),this.GA=c,r&u.Sc.PE_TYPE_PROJCS?(a=this.Ue,this.HA=1/a.getUnit().getUnitFactor(),this.sw=.001/this.Ue.getUnit().getUnitFactor(),this.tw=u.Cg.generate(a,u.Cg.PE_PCSINFO_OPTION_NONE),this.zl=this.tw.isPannableRectangle(),this.bA=u.zb.qN(this.tw.getCentralMeridian(),this.GA)):(this.KA=this.zl=!0,this.HA=0,r=1/a.getUnit().getUnitFactor(),this.sw=.001/a.getDatum().getSpheroid().getAxis()*r,this.bA=0),this.zl&&(this.xx(),this.DK(),this.nY(),this.CK(),this.lY(),this.mY())}return b.prototype.$r=function(){return this.Kk},b.prototype.kk=function(){return this.tw},b.Py=function(c,a){return c==a||c!=null&&a!=null&&c.Kk==0&&a.Kk==0&&c.As===a.As},b.prototype.Wc=function(){return this.zl},b.prototype.gh=function(c){c.K(this.so)},b.prototype.pv=function(){return this.so.v},b.prototype.ov=function(){return this.so.C},b.prototype.GR=function(c){c.K(this.uw)},b.prototype.lY=function(){var c=this.Ue.getType();if(c==u.Sc.PE_TYPE_PROJCS){c=this.Ue;var a=this.kk().getCentralMeridian(),r=c.getGeogcs();if(r==null)throw u.i.fa("internal error");a=[[a+(r=1/r.getUnit().getUnitFactor()*Math.PI),0]],u.ej.geogToProj(c,1,a),a=a[0][0],r=c.getParameters()[u.Sc.PE_PARM_X0].getValue();var o=this.ml();c=new u.l,o.A(c),a=(o=Math.abs(a-r))+r,r=-1*o+r,o=c.H,c=c.G;var l=new u.l;l.K(r,c,a,o),this.so==null&&(this.so=l)}else{if(c!=u.Sc.PE_TYPE_GEOGCS)throw u.i.fa("internal error");r=1/this.Ue.getUnit().getUnitFactor()*Math.PI,(c=new u.l).K(-r,-r/2,r,r/2),this.so==null&&(this.so=c)}},b.prototype.mY=function(){var c=this.Ue.getType();if(c==u.Sc.PE_TYPE_PROJCS){var a=this.Ue;if(c=this.kk().getCentralMeridian(),(a=a.getGeogcs())==null)throw u.i.fa("internal error");a=1/a.getUnit().getUnitFactor()*Math.PI;var r=this.Vr(),o=new u.l;r.A(o),(r=new u.l).K(c-a,o.G,c+a,o.H),this.uw==null&&(this.uw=r)}else{if(c!=u.Sc.PE_TYPE_GEOGCS)throw u.i.fa("internal error");a=1/this.Ue.getUnit().getUnitFactor()*Math.PI,(c=new u.l).K(-a,-a/2,a,a/2),this.uw==null&&(this.uw=c)}},b.prototype.bf=function(){return this.GA},b.prototype.pm=function(){return this.HA},b.prototype.Vr=function(){if(this.zl)return this.ul;var c=this.ul;return c??(this.xx(),this.ul)},b.prototype.Wr=function(){return this.zl?null:(this.ul!=null||this.xx(),this.YG)},b.prototype.xx=function(){if(this.Ue.getType()==u.Sc.PE_TYPE_PROJCS){var c=this.Ue,a=c.getGeogcs(),r=c.horizonGcsGenerate();if(r!=null){var o=r[0].getNump(),l=r[0].getKind();c=0<r[0].getInclusive();var d=this.bf(),p=90*d,g=360*d,v=370*d,w=180*d*u.Sc.PE_HORIZON_DELTA/Math.PI,T=new u.l,$=null;if(1<o){for(var C=1;C<o;C++)if(r[C].getKind()==u.Sc.PE_HORIZON_LINE){$==null&&($=new u.Ta);var O=r[C].getCoord();$.sx(O[0][0],O[0][1]),$.yj(O[1][0],O[1][1])}}if(l==u.Sc.PE_HORIZON_RECT)r=r[0].getCoord(),T.K(r[0][0],r[0][1]),T.Zb(r[1][0],r[1][1]),Math.abs(T.H-p)<1e-7*w&&(T.H=p),Math.abs(T.G+p)<1e-7*w&&(T.G=-p),T.R()>v&&(r=-400*d,T.K(r,T.G,r+5*g,T.H)),r=new u.Fh(T),this.ul==null&&(this.ul=r,this.Iv=c);else{if(v=new u.Da,g=this.kk().isGcsHorizonMultiOverlap(),T=u.gu.bF(a,u.hu.Integer64),g){for(v=new u.gL,w=u.Gh.local().V(v,T,null),C=0;C<o;C++)if(r[C].getKind()==u.Sc.PE_HORIZON_POLY){for(a=r[C].getSize(),d=r[C].getCoord(),l=[],p=0;p<a;p++)l[p]=u.h.construct(d[p][0],d[p][1]);r[C].getInclusive(),g&&((d=new u.Da).Yk(l,a-1),v.ZX(d),w.qe())}v=w.next()}else for(C=0;C<o;C++)if(r[C].getKind()==u.Sc.PE_HORIZON_POLY){for(a=r[C].getSize(),d=r[C].getCoord(),g=[],p=0;p<a;p++)g[p]=u.h.construct(d[p][0],d[p][1]);r[C].getInclusive(),v.Yk(g,a-1)}c?u.Xj.local().wn(v,T,1):u.kp.local().wn(v,T,1),u.dj.local().wn(v,T,1),this.ul==null&&(this.ul=v,this.Iv=c,this.YG=$)}}}},b.prototype.hv=function(){return this.zl||this.ul==null&&this.xx(),this.Iv},b.prototype.DK=function(){if(this.jH==2){var c=this.Ue.horizonPcsGenerate();if(c!=null){var a=c[0].getKind();c[0].getInclusive();var r=c[0].getNump(),o=!1;if(a==u.Sc.PE_HORIZON_RECT)c=c[0].getCoord(),(r=new u.l).K(c[0][0],c[0][1]),r.Zb(c[1][0],c[1][1]),c=new u.Fh(r);else{for(a=-1,o=0;o<r;o++)c[o].getKind()==u.Sc.PE_HORIZON_POLY&&(a=o);for(o=c[a].getSize()-1,c=c[a].getCoord(),r=[],a=0;a<o;a++)r[a]=u.h.construct(c[a][0],c[a][1]);c=a=new u.Da,a.Yk(r,o),o=!0}this.kk().isDensificationNeeded()&&(r=1e5*this.pm(),c=u.Xl.local().V(c,r,null)),o&&(o=new u.Fh,c.bn(o),c.Ke(),c.Qb(),c.qR(),u.Xj.local().wn(c,null,1)),this.Us==null&&(this.Us=c)}}},b.prototype.ml=function(){if(this.zl)return this.Us;var c=this.Us;return c??(this.DK(),this.Us)},b.prototype.nY=function(){if(this.Ue.getType()==u.Sc.PE_TYPE_PROJCS){var c=90*this.bf();c=[[0,c],[0,-c]],u.ej.geogToProj(this.Ue,2,c);var a=this.kk(),r=a.getNorthPoleLocation()!=u.Cg.PE_POLE_OUTSIDE_BOUNDARY;a=a.getSouthPoleLocation()!=u.Cg.PE_POLE_OUTSIDE_BOUNDARY,this.KA||(r&&this.HH.ma(c[0][0],c[0][1]),a&&this.XH.ma(c[1][0],c[1][1]))}this.KA=!0},b.prototype.CK=function(){if(this.jH==1){var c=400*this.bf();this.vq.K(-c,-c,c,c)}else c=u.Cg.generate(this.Ue,u.Cg.PE_PCSINFO_OPTION_DOMAIN),c=u.l.construct(c.getDomainMinx(),c.getDomainMiny(),c.getDomainMaxx(),c.getDomainMaxy()),this.vq.B()&&this.vq.K(c)},b.prototype.hR=function(c){this.zl&&c.K(this.vq),this.vq.B()&&this.CK(),c.K(this.vq)},b.prototype.Up=function(){return this.RH},b.prototype.zi=function(){return this.bA},b.prototype.Hd=function(){return this.Eo},b.prototype.Xr=function(){return this.wH},b}();u.OC=A}(V||(V={})),function(u){var A=function(){function b(c){this.KT=c,this.As=u.zb.xv(c,0,!0);var a=c.getCode();this.ss=0<a?a:u.pf.getCode(c),0>this.ss&&(this.ss=0),this.Eo=a=this.KT.getUnit(),this.IH=1/a.getUnitFactor(),u.pf.getCode(c)}return b.Py=function(c,a){return c==a||c!=null&&a!=null&&c.ss==0&&a.ss==0&&c.As===a.As},b.prototype.$r=function(){return this.ss},b}();u.PL=A}(V||(V={})),function(u){u.Yg=function(){function A(){}return A.tb=function(b,c,a,r,o,l,d,p){if(l!=null||d!=null||p!=null){r=u.F.ba(r),c=u.F.ba(c),a=u.F.ba(a),o=u.F.ba(o),1.570796326794897<u.s.P(a)&&(a=u.s.Mb(3.141592653589793,a)-a,c=u.F.ba(c+3.141592653589793)),1.570796326794897<u.s.P(o)&&(o=u.s.Mb(3.141592653589793,o)-o,r=u.F.ba(r+3.141592653589793));var g=u.F.ba(r-c);if(u.s.Y(a,o)&&(u.s.Y(c,r)||u.s.Y(u.s.P(a),1.570796326794897)))l!=null&&(l.u=0),d!=null&&(d.u=0),p!=null&&(p.u=0);else{if(u.s.Y(a,-o)){if(u.s.Y(u.s.P(a),1.570796326794897))return l!=null&&(l.u=3.141592653589793*b),d!=null&&(d.u=0<a?u.F.ba(3.141592653589793-u.F.ba(r)):u.F.ba(r)),void(p!=null&&(p.u=0<a?u.F.ba(r):u.F.ba(3.141592653589793-u.F.ba(r))));if(u.s.Y(u.s.P(g),3.141592653589793))return l!=null&&(l.u=3.141592653589793*b),d!=null&&(d.u=0),void(p!=null&&(p.u=0))}var v=u.s.P(a)==1.570796326794897?0:Math.cos(a),w=Math.sin(a),T=u.s.P(o)==1.570796326794897?0:Math.cos(o),$=Math.sin(o),C=u.s.P(g)==1.570796326794897?0:Math.cos(g),O=u.s.P(g)==3.141592653589793?0:Math.sin(g);if(l!=null){var N=Math.sin((o-a)/2);g=Math.sin(g/2),l.u=2*Math.asin(Math.sqrt(N*N+v*T*g*g))*b}d!=null&&(d.u=u.s.Y(u.s.P(a),1.570796326794897)?0>a?r:u.F.ba(3.141592653589793-r):Math.atan2(T*O,v*$-w*T*C)),p!=null&&(u.s.Y(u.s.P(o),1.570796326794897)?p.u=0>o?c:u.F.ba(3.141592653589793-c):(p.u=Math.atan2(v*O,$*v*C-T*w),p.u=u.F.ba(p.u+3.141592653589793)))}}},A.rf=function(b,c,a,r,o,l,d){if(l!=null||d!=null){c=u.F.ba(c),a=u.F.ba(a),1.570796326794897<u.s.P(a)&&(a=u.s.Mb(3.141592653589793,a)-a,c=u.F.ba(c+3.141592653589793)),u.s.Y(u.s.P(a),1.570796326794897)&&(c=0),o=u.F.ba(o);var p=u.s.Y(u.s.P(o),1.570796326794897)?0:Math.cos(o),g=u.s.Y(u.s.P(o),3.141592653589793)?0:Math.sin(o),v=u.s.Y(u.s.P(a),1.570796326794897)?0:Math.cos(a),w=Math.sin(a);b=r/b,r=u.s.Y(u.s.P(b),1.570796326794897)?0:Math.cos(b);var T=u.s.Y(u.s.P(b),3.141592653589793)?0:Math.sin(b),$=Math.asin(w*r+v*T*p);d!=null&&(d.u=$),l!=null&&(l.u=u.s.Y(u.s.P($),1.570796326794897)?u.s.Y(a,-$)?0>$?o:u.F.ba(3.141592653589793-o):c:u.s.Y(u.s.P(a),1.570796326794897)&&u.s.Y(b,3.141592653589793)?0>a?o:u.F.ba(3.141592653589793-o):u.F.ba(c+Math.atan2(T*g,v*r-w*T*p)))}},A}()}(V||(V={})),function(u){u.Wk=function(){function A(){}return A.tb=function(b,c,a,r,o,l,d,p,g){var v=new u.ga(0),w=new u.ga(0),T=[0,0,0],$=[0,0,0],C=[0,0,0],O=new u.ga(0),N=new u.ga(0),R=new u.ga(0),F=new u.ga(0),G=new u.ga(0);if(d!=null||p!=null||g!=null)if(u.s.ti(c))u.Yg.tb(b,a,r,o,l,d,p,g);else{o=u.F.ba(o),a=u.F.ba(a);var z=u.F.ba(o-a);if(u.s.Y(r,l)&&(u.s.Y(a,o)||u.s.Y(u.s.P(r),1.570796326794897)))d!=null&&(d.u=0),p!=null&&(p.u=0),g!=null&&(g.u=0);else{if(u.s.Y(r,-l)){if(u.s.Y(u.s.P(r),1.570796326794897))return d!=null&&(d.u=2*u.F.Ah(b,c)),p!=null&&(p.u=0<r?u.F.ba(3.141592653589793-u.F.ba(o)):u.F.ba(o)),void(g!=null&&(g.u=0<r?u.F.ba(o):u.F.ba(3.141592653589793-u.F.ba(o))));u.s.Y(u.s.P(z),3.141592653589793)&&(d!=null&&(d.u=2*u.F.Ah(b,c)),p!=null&&(p.u=0),g!=null&&(g.u=0))}else(u.s.Y(u.s.P(r),1.570796326794897)||u.s.Y(u.s.P(l),1.570796326794897))&&(u.s.Y(u.s.P(r),1.570796326794897)?a=o:o=a);var B=0;if(0>z){B=1;var q=a;a=o,o=q,q=r,r=l,l=q}z=u.F.ot(c,r);var K=u.F.ot(c,l);p==null&&g==null||(u.Yg.tb(b,a,z,o,K,null,v,w),v=Math.atan2(Math.sin(v.u)*Math.cos(r-z),Math.cos(v.u)),w=Math.atan2(Math.sin(w.u)*Math.cos(l-K),Math.cos(w.u)),B!=0&&(q=v,v=w,w=q),p!=null&&(p.u=v),g!=null&&(g.u=w)),d!=null&&(u.F.cl(1,c,r,a,0,R,F,G),T[0]=R.u,T[1]=F.u,T[2]=G.u,u.F.cl(1,c,l,o,0,R,F,G),$[0]=R.u,$[1]=F.u,$[2]=G.u,C[0]=T[1]*$[2]-$[1]*T[2],C[1]=-(T[0]*$[2]-$[0]*T[2]),C[2]=T[0]*$[1]-$[0]*T[1],c=1-u.F.w(c,u.F.Vq(c,u.F.Qj(c,Math.acos(C[2]/Math.sqrt(C[0]*C[0]+C[1]*C[1]+C[2]*C[2]))))),c*=2-c,p=Math.atan2(-C[1],-C[0]),C=u.F.ba(p-1.570796326794897),p=u.F.ba(p+1.570796326794897),C=u.s.P(u.F.ba(a-C))<=u.s.P(u.F.ba(a-p))?C:p,u.Yg.tb(1,C,0,a,z,O,null,null),u.Yg.tb(1,C,0,o,K,N,null,null),3.141592653589793<O.u+N.u&&(C=u.F.ba(C+3.141592653589793),u.Yg.tb(1,C,0,a,z,O,null,null),u.Yg.tb(1,C,0,o,K,N,null,null)),O.u*=u.s.Mb(1,r),N.u*=u.s.Mb(1,l),O.u=u.F.Qj(c,O.u),N.u=u.F.Qj(c,N.u),a=u.F.q(b,c,O.u),b=u.F.q(b,c,N.u),d.u=u.s.P(b-a))}}},A.rf=function(b,c,a,r,o,l,d,p){var g=0,v=new u.ga(0),w=new u.ga(0),T=[0,0,0],$=[0,0,0],C=new u.ga(0),O=new u.ga(0),N=new u.ga(0);if(d!=null||p!=null)if(u.s.ti(c))u.Yg.rf(b,a,r,o,l,d,p);else if(u.s.Cd(o))d!=null&&(d.u=a),p!=null&&(p.u=r);else if(l=u.F.ba(l),0>o&&(o=u.s.P(o),l=u.F.ba(l+3.141592653589793)),a=u.F.ba(a),r=u.F.ba(r),1.570796326794897<u.s.P(r)&&(a=u.F.ba(a+3.141592653589793),r=u.s.Mb(3.141592653589793,r)-r),u.s.Y(u.s.P(r),1.570796326794897)&&(a=0),u.s.Cd(r)){var R=u.s.P(1.570796326794897-u.s.P(l));R=u.F.Qj(c,R),R=1-u.F.w(c,u.F.Vq(c,R)),R*=2-R,b=o/u.F.Ah(b,R)*1.570796326794897,b=u.F.Rq(R,b),b=u.F.ot(R,b),u.Yg.rf(1,a,r,b,l,d,v),p!=null&&(g=v.u),p!=null&&(p.u=u.F.Qj(c,g))}else if(u.s.Y(u.s.P(r),1.570796326794897))v=2*(g=u.F.Ah(b,c)),l=0<(b=u.s.Mb(1.570796326794897,r))?u.F.ba(3.141592653589793-l):l,r=g-o,u.s.P(r)<=g?d!=null&&(d.u=l):(r=Math.floor(o/v),u.O.truncate(r%2)==0?(d!=null&&(d.u=l),o-=r*v):(d!=null&&(d.u=u.F.ba(l+3.141592653589793)),o=(r+1)*v-o),r=g-o),p!=null&&(p.u=u.F.Rq(c,r/g*b));else{R=u.F.ot(c,r),l=Math.atan2(Math.sin(l),Math.cos(l)*Math.cos(r-R));var F=u.O.truncate(u.s.Mb(1,R))*(1.570796326794897>=u.s.P(l)?1:-1);l=u.F.ba(a+Math.atan(Math.tan(l)*-Math.sin(R))),u.Yg.tb(b,l,0,a,R,null,w,null),R=u.s.P(1.570796326794897-u.s.P(w.u)),R=u.F.Qj(c,R),R=1-u.F.w(c,u.F.Vq(c,R)),R*=2-R,u.F.cl(1,c,0,l,0,C,O,N),T[0]=C.u,T[1]=O.u,T[2]=N.u,u.F.cl(1,c,r,a,0,C,O,N),$[0]=C.u,$[1]=O.u,$[2]=N.u,r=Math.acos((T[0]*$[0]+T[1]*$[1]+T[2]*$[2])/Math.sqrt($[0]*$[0]+$[1]*$[1]+$[2]*$[2])),r=u.F.Qj(R,r),o=0<(r=u.F.q(b,R,r)+o*F)?w.u:u.F.ba(w.u+3.141592653589793),b=u.s.P(r)/u.F.Ah(b,R)*1.570796326794897,b=u.F.Rq(R,b),b=u.F.ot(R,b),u.Yg.rf(1,l,0,b,o,d,v),p!=null&&(g=v.u),p!=null&&(p.u=u.F.Qj(c,g))}},A}()}(V||(V={})),function(u){u.cu=function(){function A(){}return A.tb=function(b,c,a,r,o,l,d,p,g){var v=0,w=0,T=0;if(d!=null||p!=null||g!=null)if(u.s.ti(c))u.Yg.tb(b,a,r,o,l,d,p,g);else{var $=u.F.ba(o-a);if(u.s.Y(r,l)&&(u.s.Cd($)||u.s.Y(u.s.P(r),1.570796326794897)))d!=null&&(d.u=0),p!=null&&(p.u=0),g!=null&&(g.u=0);else{if(u.s.Y(r,-l)){if(u.s.Y(u.s.P(r),1.570796326794897))return d!=null&&(d.u=2*u.F.Ah(b,c)),p!=null&&(p.u=0<r?u.F.ba(3.141592653589793-u.F.ba(o)):u.F.ba(o)),void(g!=null&&(g.u=0<r?u.F.ba(o):u.F.ba(3.141592653589793-u.F.ba(o))));u.s.Y(u.s.P($),3.141592653589793)&&(d!=null&&(d.u=2*u.F.Ah(b,c)),p!=null&&(p.u=0),g!=null&&(g.u=0))}else if(u.s.Y(u.s.P(r),1.570796326794897)||u.s.Y(u.s.P(l),1.570796326794897)||u.s.Cd($)||u.s.Y(u.s.P($),3.141592653589793))return void u.Wk.tb(b,c,a,r,o,l,d,p,g);var C=1-Math.sqrt(1-c),O=c/(1-c),N=b*(1-C);b=u.F.Vq(c,r);var R=u.F.Vq(c,l);c=u.s.P(b)==1.570796326794897?0:Math.cos(b);var F=Math.sin(b),G=u.s.P(R)==1.570796326794897?0:Math.cos(R),z=Math.sin(R),B=$,q=Math.cos(B),K=Math.sin(B),ee=1,oe=0;do{var ue=B,we=Math.sqrt(Math.pow(G*K,2)+Math.pow(c*z-F*G*q,2)),me=F*z+c*G*q,Re=Math.atan2(we,me);if(we==0){ee=0;break}var fe=c*G*K/we;if(v=Math.cos(Math.asin(fe)),w=me-2*F*z/(v*=v),1<u.s.P(w)&&(w=u.s.Mb(1,w)),B=$+(1-(B=C/16*v*(4+C*(4-3*v))))*C*fe*(Re+B*we*(w+B*me*(2*(T=w*w)-1))),q=Math.cos(B),K=Math.sin(B),oe++,3.141592653589793<u.s.P(B)&&30<oe){ee=0;break}}while(5e3>=oe&&!u.s.Y(ue,B));if(ee!=0)C=(O*=v)*(256+O*(O*(74-47*O)-128))/1024,d!=null&&(d.u=N*(1+O*(4096+O*(O*(320-175*O)-768))/16384)*(Re-C*we*(w+C/4*(me*(2*T-1)-C/6*w*(4*we*we-3)*(4*T-3))))),p!=null&&(p.u=u.s.Y(u.s.P(r),1.570796326794897)?0>r?o:u.F.ba(3.141592653589793-o):Math.atan2(G*K,c*z-F*G*q)),g!=null&&(u.s.Y(u.s.P(l),1.570796326794897)?g.u=0>l?a:u.F.ba(3.141592653589793-a):(g.u=Math.atan2(c*K,c*z*q-F*G),g.u=u.F.ba(g.u+3.141592653589793)));else{B=u.s.Mb(3.141592653589793,$),me=F*z-c*G,Re=Math.acos(me),we=Math.sin(Re),v=1,oe=fe=0;do T=fe,q=1-.25*(fe=C*(v*=v)*(1+C+C*C))+.1875*(w=C*C*(q=v*v)*(1+2.25*C))-.1953125*(ee=C*C*C*q*v),fe=.25*fe-.25*w+.29296875*ee,K=.03125*w-.05859375*ee,ee*=.00651041666666667,w=me-2*F*z/v,1<u.s.P(w)&&(w=u.s.Mb(1,w)),v=Math.acos(w),me=Math.cos(2*v),ue=Math.cos(3*v),K=(fe=u.s.Y(r,-l)?u.F.ba(3.141592653589793-$)/(3.141592653589793*C*q):u.F.ba(B-$)/(C*(q*Re+fe*we*w+K*Math.sin(2*Re)*me+ee*Math.sin(3*Re)*ue)))*we/(c*G),B=1.570796326794897<u.s.P($)?u.s.Mb(3.141592653589793,K)-Math.asin(K):Math.asin(K),q=Math.cos(B),we=Math.sqrt(Math.pow(G*K,2)+Math.pow(c*z-F*G*q,2)),Re=3.141592653589793-Math.asin(u.s.P(we)),me=Math.cos(Re),v=Math.cos(Math.asin(fe)),oe++;while(70>=oe&&!u.s.Y(T,fe));d!=null&&(q=1+(O*=v*=v)*(4096+O*(O*(320-175*O)-768))/16384,u.s.Y(r,-l)?d.u=3.141592653589793*N*q:(w=me-2*F*z/v,v=Math.acos(w),me=Math.cos(2*v),ue=Math.cos(3*v),d.u=N*(q*Re+O*(O*(128+O*(35*O-60))-512)/2048*we*w+O*(5*O-4)/6144*O*O*Math.sin(2*Re)*me+ee*Math.sin(3*Re)*ue+-762939453125e-16*O*O*O*O*Math.sin(4*Re)*Math.cos(4*v)))),p!=null&&(u.s.Cd(r)&&u.s.Cd(l)?(v=Math.sqrt(1-fe*fe),p.u=Math.acos(v),0>$&&(p.u*=-1)):u.s.Y(u.s.P(r),1.570796326794897)?p.u=0>r?o:u.F.ba(3.141592653589793-o):(d=fe/c,N=Math.sqrt(1-d*d),0>c*z-F*G*Math.cos(B)&&(N*=-1),p.u=Math.atan2(d,N),u.s.Y(r,-l)&&u.s.P(u.F.ba(a-o))>3.141592653589793*(1-C*Math.cos(r))&&(0<r&&1.570796326794897>u.s.P(p.u)||0>r&&1.570796326794897<u.s.P(p.u))&&(p.u=u.s.Mb(3.141592653589793,p.u)-p.u))),g!=null&&(u.s.Cd(r)&&u.s.Cd(l)?(v=Math.sqrt(1-fe*fe),g.u=Math.acos(v),0<=$&&(g.u*=-1)):u.s.Y(u.s.P(l),1.570796326794897)?g.u=0>l?a:u.F.ba(3.141592653589793-a):($=fe/G,d=Math.sqrt(1-$*$),N=Math.sin(B/2),0>Math.sin(R-b)-2*c*z*N*N&&(d*=-1),g.u=Math.atan2($,d),g.u=u.F.ba(g.u+3.141592653589793),u.s.Y(r,-l)&&!u.s.Cd(r)&&!u.s.Y(u.s.P(r),1.570796326794897)&&u.s.P(u.F.ba(a-o))>3.141592653589793*(1-C*Math.cos(r))&&(p!=null?N=p.u:(d=fe/c,N=Math.sqrt(1-d*d),0>c*z-F*G*Math.cos(B)&&(N*=-1),N=Math.atan2(d,N),u.s.Y(r,-l)&&u.s.P(u.F.ba(a-o))>3.141592653589793*(1-C*Math.cos(r))&&(0<r&&1.570796326794897>u.s.P(N)||0>r&&1.570796326794897<u.s.P(N))&&(N=u.s.Mb(3.141592653589793,N)-N)),1.570796326794897>=u.s.P(N)&&1.570796326794897<u.s.P(g.u)||1.570796326794897<=u.s.P(N)&&1.570796326794897>u.s.P(g.u))&&(g.u=-1*u.F.ba(g.u+3.141592653589793))))}}}},A.rf=function(b,c,a,r,o,l,d,p){if(d!=null||p!=null)if(u.s.ti(c))u.Yg.rf(b,a,r,o,l,d,p);else if(l=u.F.ba(l),u.s.Y(u.s.P(r),1.570796326794897)||u.s.Cd(l)||u.s.Y(u.s.P(l),3.141592653589793))u.Wk.rf(b,c,a,r,o,l,d,p);else{var g=u.s.P(l)==1.570796326794897?0:Math.cos(l),v=u.s.P(l)==3.141592653589793?0:Math.sin(l);u.s.Y(u.s.P(r),1.570796326794897)&&(a=0),l=1-Math.sqrt(1-c);var w=u.F.Vq(c,r);r=u.s.P(w)==1.570796326794897?0:Math.cos(w);var T=Math.sin(w);w=Math.atan2(Math.tan(w),g);var $=r*v,C=$*$,O=1-C,N=c/(1-c)*O,R=(c=N*(256+N*(N*(74-47*N)-128))/1024)/4,F=c/6,G=o/(b*(1-l)*(1+N*(4096+N*(N*(320-175*N)-768))/16384)),z=G;do{var B=z;o=u.s.P(z)==1.570796326794897?0:Math.cos(z);var q=(N=u.s.P(z)==3.141592653589793?0:Math.sin(z))*N;z=c*N*((b=Math.cos(2*w+z))+R*(o*(2*(z=b*b)-1)-F*b*(4*q-3)*(4*z-3)))+G}while(!u.s.Y(B,z));o=u.s.P(z)==1.570796326794897?0:Math.cos(z),N=u.s.P(z)==3.141592653589793?0:Math.sin(z),d!=null&&(v=Math.atan2(N*v,r*o-T*N*g),O=l/16*O*(4+l*(4-3*O)),b=Math.cos(2*w+z),d.u=u.F.ba(a+(v-(1-O)*l*$*(z+O*N*(b+O*o*(2*b*b-1)))))),p!=null&&(O=T*N-r*o*g,O=(1-l)*Math.sqrt(C+O*O),p.u=Math.atan2(T*o+r*N*g,O))}},A}()}(V||(V={})),function(u){u.PC=function(){function A(){}return A.tb=function(b,c,a,r,o,l,d,p,g){var v=u.F.ba(o-a),w=u.s.Y(u.s.P(r),1.570796326794897),T=u.s.Y(u.s.P(l),1.570796326794897);if(u.s.Y(r,l)&&(u.s.Cd(v)||w))d!=null&&(d.u=0),p!=null&&(p.u=0),g!=null&&(g.u=0);else{if(u.s.ti(c)){var $=Math.sin(r),C=Math.sin(l);$=Math.sqrt((1+$)/(1-$)),C=Math.sqrt((1+C)/(1-C)),$=Math.log(C)-Math.log($),$=Math.atan2(v,$),d!=null&&(d.u=u.s.Y(r,l)?u.s.P(b*Math.cos(r)*v):u.s.P((b*l-b*r)/Math.cos($)))}else C=u.F.Qw(c,l),$=Math.sin(u.F.Qw(c,r)),C=Math.sin(C),$=Math.sqrt((1+$)/(1-$)),C=Math.sqrt((1+C)/(1-C)),$=Math.log(C)-Math.log($),$=Math.atan2(v,$),d!=null&&(u.s.Y(r,l)?d.u=u.s.P(b*v*Math.cos(r)/u.F.w(c,r)):(v=u.F.q(b,c,r),b=u.F.q(b,c,l),d.u=u.s.P((b-v)/Math.cos($))));p==null&&g==null||(d=u.F.ba($+3.141592653589793),w&&T||!w&&!T||(w?$=0>r?o:u.F.ba(3.141592653589793-o):T&&(d=0>l?a:u.F.ba(3.141592653589793-a))),p!=null&&(p.u=$),g!=null&&(g.u=d))}},A.rf=function(b,c,a,r,o,l,d,p){l=u.F.ba(l),0>o&&(o=u.s.P(o),l=u.F.ba(l+3.141592653589793)),u.s.ti(c)?u.s.Y(u.s.P(r),1.570796326794897)?(a=0>r?l:u.F.ba(3.141592653589793-l),3.141592653589793>=(l=o/b%6.283185307179586)?b=r-u.s.Mb(l,r):(a=u.F.ba(a+3.141592653589793),b=-r+u.s.Mb(l-3.141592653589793,r))):u.s.Y(u.s.P(l),1.570796326794897)?(a=u.F.ba(a+u.s.Mb(o,l)/(b*Math.cos(r))),b=r):(b=r+o*Math.cos(l)/b,1.570796326794897<u.s.P(b)&&(b=1.570796326794897),u.s.Y(u.s.P(b),1.570796326794897)&&(u.s.Cd(l)||u.s.Y(u.s.P(l),3.141592653589793))||(1.570796316258184<u.s.P(b)&&(b=u.s.Mb(1.570796316258184,b)),c=Math.sin(r),r=Math.sin(b),c=Math.sqrt((1+c)/(1-c)),r=Math.sqrt((1+r)/(1-r)),c=Math.log(r)-Math.log(c),a=u.F.ba(a+Math.tan(l)*c))):u.s.Y(u.s.P(r),1.570796326794897)?(a=0>r?l:u.F.ba(3.141592653589793-l),l=o/u.F.qW(b,c),3.141592653589793>=(l%=6.283185307179586)?b=r-u.s.Mb(l,r):(a=u.F.ba(a+3.141592653589793),b=-r+u.s.Mb(l-3.141592653589793,r)),b=u.F.Rq(c,b)):u.s.Y(u.s.P(l),1.570796326794897)?(a=u.F.ba(a+u.s.Mb(o,l)*u.F.w(c,r)/(b*Math.cos(r))),b=r):(b=1.570796326794897*(o*Math.cos(l)+u.F.q(b,c,r))/u.F.Ah(b,c),1.570796326794897<u.s.P(b)&&(b=u.s.Mb(1.570796326794897,b)),b=u.F.Rq(c,b),u.s.Y(u.s.P(b),1.570796326794897)&&(u.s.Cd(l)||u.s.Y(u.s.P(l),3.141592653589793))||(o=u.F.Qw(c,r),r=u.F.Qw(c,b),1.570796316258184<u.s.P(r)&&(r=u.s.Mb(1.570796316258184,b),b=u.F.yO(c,r)),c=Math.sin(o),r=Math.sin(r),c=Math.sqrt((1+c)/(1-c)),r=Math.sqrt((1+r)/(1-r)),c=Math.log(r)-Math.log(c),a=u.F.ba(a+Math.tan(l)*c))),d!=null&&(d.u=a),p!=null&&(p.u=b)},A}()}(V||(V={})),function(u){u.kb=function(){function A(){}return A.Xy=function(b,c,a,r,o,l,d){u.cu.tb(b,c,a,r,o,l,null,d,null)},A.yi=function(b,c,a,r,o,l,d,p){u.cu.rf(b,c,a,r,o,l,d,p)},A.wd=function(b,c,a,r,o,l,d,p,g,v){switch(v){case 2:u.Wk.tb(b,c,a,r,o,l,d,p,g);break;case 3:u.QC.tb(b,c,a,r,o,l,d,p,g);break;case 1:u.PC.tb(b,c,a,r,o,l,d,p,g);break;default:u.cu.tb(b,c,a,r,o,l,d,p,g)}},A.oj=function(b,c,a,r,o,l,d,p,g){switch(g){case 2:u.Wk.rf(b,c,a,r,o,l,d,p);break;case 3:u.QC.rf(b,c,a,r,o,l,d,p);break;case 1:u.PC.rf(b,c,a,r,o,l,d,p);break;default:u.cu.rf(b,c,a,r,o,l,d,p)}},A}()}(V||(V={})),function(u){var A=function(){function c(){this.y=this.x=null}return c.construct=function(a){var r=new c;return r.x=new u.Wb,r.x.set(a.x),r.y=new u.Wb,r.y.set(a.y),r},c.VE=function(a,r){var o=new c;return o.x=new u.Wb,o.x.set(a),o.y=new u.Wb,o.y.set(r),o},c.prototype.qg=function(){return this.x.qg()&&this.y.qg()},c.prototype.value=function(){return u.h.construct(this.x.value(),this.y.value())},c}();u.vY=A;var b=function(){function c(){this.z=this.y=this.x=null}return c.construct=function(a){var r=new c;return r.x=new u.Wb,r.x.set(a.x),r.y=new u.Wb,r.y.set(a.y),r.z=new u.Wb,r.z.set(a.z),r},c.VE=function(a,r,o){var l=new c;return l.x=new u.Wb,l.x.set(a),l.y=new u.Wb,l.y.set(r),l.z=new u.Wb,l.z.set(o),l},c.prototype.qg=function(){return this.x.qg()&&this.y.qg()&&this.z.qg()},c.prototype.value=function(){return new u.Nd(this.x.value(),this.y.value(),this.z.value())},c.prototype.Qh=function(a){var r=new u.Wb,o=new u.Wb,l=new u.Wb;return r.Kl(this.x,a.x),o.Kl(this.y,a.y),l.Kl(this.z,a.z),(a=new u.Wb).dN(r,o),a.add(l),a},c.prototype.cF=function(a){var r=new c;r.x.Kl(this.y,a.z),r.y.Kl(this.z,a.x),r.z.Kl(this.x,a.y);var o=new u.Wb,l=new u.Wb,d=new u.Wb;return o.Kl(this.z,a.y),l.Kl(this.x,a.z),d.Kl(this.y,a.x),r.x.sub(o),r.y.sub(l),r.z.sub(d),r},c}();u.wY=b,u.Ox=function(){function c(){}return c.EP=function(a,r,o){var l=r.x;r=r.y,c.cl(1,a,Math.cos(l),Math.sin(l),Math.cos(r),Math.sin(r),o)},c.DP=function(a,r){var o=new u.Nd;return c.EP(a,r,o),o},c.cl=function(a,r,o,l,d,p,g){a/=Math.sqrt(1-r*p*p),g.K(a*d*o,a*d*l,a*(1-r)*p)},c.Yu=function(a,r){var o=new u.Wb,l=new u.Wb,d=new u.Wb,p=new u.Wb;o.cos(r.x),l.sin(r.x),d.cos(r.y),p.sin(r.y);var g=new u.Wb;return g.set(p),g.Ag(p),g.No(a),g.No(-1),g.kN(),g.sqrt(),(r=new u.Wb).set(1),r.jm(g),(g=new u.Wb).set(r),g.Ag(d),g.Ag(o),(o=new u.Wb).set(r),o.Ag(d),o.Ag(l),(l=new u.Wb).set(r),l.No(1-a),l.Ag(p),b.VE(g,o,l)},c.SS=function(a,r,o,l){if(Math.abs(r.x-o.x)>Math.PI||Math.abs(r.y)>.5*Math.PI||Math.abs(o.y)>.5*Math.PI||(Math.abs(r.y)==.5*Math.PI||Math.abs(o.y)==.5*Math.PI)&&r.x!=o.x)return NaN;if(l=c.cB(l,Math.min(r.x,o.x),Math.max(r.x,o.x)),!new u.Nc(r.x,o.x).contains(l))return NaN;var d=A.construct(r);if(o=A.construct(o),d=c.Yu(a,d),o=c.Yu(a,o),(o=d.cF(o)).z.qg())return r.y;var p=new u.Wb;p.set(o.x),p.jm(o.z),p.No(-1);var g=new u.Wb;g.set(o.y),g.jm(o.z),g.No(-1);var v=new u.Wb;return v.set(g),v.Ag(g),(d=new u.Wb).set(p),d.Ag(p),d.add(v),d.sqrt(),d.qg()||p.qg()&&g.qg()?r.y:(r=Math.atan2(g.value(),p.value()),r=Math.atan2(d.value()*Math.cos(r-l),1-a),l=c.DP(a,u.h.construct(l,r)),a=new u.Nd(l.x,l.y,-l.z),l=o.value().Qh(l),a=o.value().Qh(a),Math.abs(a)<Math.abs(l)&&(r=-r),r)},c.Oz=function(a,r,o,l,d){if(d[0]=NaN,d[1]=NaN,Math.abs(r.x-o.x)>Math.PI||Math.abs(r.y)>.5*Math.PI||Math.abs(o.y)>.5*Math.PI||(Math.abs(r.y)==.5*Math.PI||Math.abs(o.y)==.5*Math.PI)&&r.x!=o.x||Math.abs(l)>=.5*Math.PI||0<r.y&&0<o.y&&r.y>l&&o.y>l||0>r.y&&0>o.y&&r.y<l&&o.y<l)return 0;var p=A.construct(r),g=A.construct(o);p=c.Yu(a,p),g=c.Yu(a,g);var v=p.cF(g);if(v.z.qg())return new u.Nc(r.y,o.y).contains(l)?(d[0]=r.x,1):0;(g=new u.Wb).set(v.x),g.jm(v.z),g.No(-1),(p=new u.Wb).set(v.y),p.jm(v.z),p.No(-1),(v=new u.Wb).set(p),v.Ag(p);var w=new u.Wb;return w.set(g),w.Ag(g),w.add(v),w.sqrt(),w.qg()||g.qg()&&p.qg()?l==0?(d[0]=r.x,d[1]=o.x,2):0:(a=(1-a)*Math.tan(l)/w.value(),1<Math.abs(a)?0:(a=Math.acos(a),v=Math.atan2(p.value(),g.value()),g=Math.min(r.x,o.x),p=Math.max(r.x,o.x),o=c.cB(v-a,g,p),a=l!=0?c.cB(v+a,g,p):o,l=0,g<=o&&o<=p&&(d[l]=o,l++),a!=o&&g<=a&&a<=p&&(d[l]=a,++l==2&&Math.abs(d[0]-r.x)>Math.abs(d[1]-r.x)&&(r=d[0],d[0]=d[1],d[1]=r)),l))},c.cB=function(a,r,o){return a>o?a-=2*(r=Math.ceil((a-o)/(2*Math.PI)))*Math.PI:a<r&&(a+=2*(r=Math.ceil((r-a)/(2*Math.PI)))*Math.PI),a},c}()}(V||(V={})),function(u){u.XK=function(){function A(){}return A.$X=function(b,c){var a=8,r=[0,0,0,0],o=new u.h;o.L(c),o.scale(u.cb.sc(b).Hd().Ec()==9102?1:u.cb.sc(b).Hd().ai/3.141592653589793*180),-180>o.x?(o.x-=o.x%360,-180>o.x&&(o.x+=360)):180<o.x&&(o.x-=o.x%360,180<o.x&&(o.x-=360)),90<o.y&&(o.y=90),-90>o.y&&(o.y=-90);for(var l=-180,d=180,p=(b=5*a)-1,g=(c=(b+31)/32)-1;0<=g;g--)for(var v=p-32*g,w=Math.min(32,b-32*g),T=1;T<w;T+=2){var $=.5*(d+l);o.x>=$?(r[g]|=1<<v,l=$):d=$,v-=2,p-=2}for(l=-90,d=90,p=b-2,g=c-1;0<=g;g--)for(v=p-32*g,w=Math.min(32,b-32*g),T=0;T<w;T+=2)$=.5*(d+l),o.y>=$?(r[g]|=1<<v,l=$):d=$,v-=2,p-=2;return A.$P(r,a,a)},A.$P=function(b,c,a){for(var r=[],o=0;o<c;o++)r[o]="";for(var l=o=0,d=0;d<c;d++){var p=b[o]>>l&31;if(31<(l+=5)){var g=37-l;p&=(1<<g)-1,l-=32,p|=(b[++o]&(1<<l)-1)<<g}r[c-1-d]="0123456789bcdefghjkmnpqrstuvwxyz".split("")[p]}if(a>c)for(d=0;d<a-c;d++)r.push("0");else a<c&&(r.length=a);return r.join("")},A}()}(V||(V={})),function(u){var A={gcstol:[0,2e-9,1,2241706620489156e-24,2,2313672246530541e-24,3,898240164660333e-23,4,8982433838020134e-24,5,8982439417325895e-24,6,8982466029667677e-24,7,8982476760268133e-24,8,8982492642167149e-24,9,898251968292634e-23,10,898253685210448e-23,11,8982546725256576e-24,12,8982557456049832e-24,13,898257333682596e-23,14,8982575482995276e-24,15,8982578488197342e-24,16,8982579775336987e-24,17,89825840676828e-22,18,8982599090925448e-24,19,8982605529473397e-24,20,8982609220517402e-24,21,8982611968030573e-24,22,8982616260407152e-24,23,8982620552787834e-24,24,8982633429954492e-24,25,8982637722351582e-24,26,898264416095491e-23,27,8982646307158072e-24,28,8982654891980968e-24,29,8982667769246082e-24,30,8982674207892485e-24,31,8982680646548117e-24,32,8982682792768713e-24,33,8982685798042582e-24,34,8982689231436652e-24,35,898269137766135e-23,36,898269266624163e-23,37,8982705114087017e-24,38,8982706830791106e-24,39,8982711958374661e-24,40,8982712839964735e-24,41,8982717991496125e-24,42,8982721424914803e-24,43,8982723571154887e-24,44,8982727863638127e-24,45,8982730868942154e-24,46,8982734302370678e-24,47,8982745033612112e-24,48,8982751472369276e-24,49,8982755764879183e-24,50,8982762203651733e-24,51,8982764776628385e-24,52,8982766496171896e-24,53,898277722749025e-23,54,898278152002477e-23,55,898279933943848e-23,56,89829143024805e-22,57,8982922161948598e-24,58,898292327314211e-23,59,8982925667349601e-24,60,8982932222965576e-24,61,8982961298941316e-24,62,8982965524049989e-24,63,8982994818246099e-24,64,8982994895706967e-24,65,898299489597736e-23,66,8983000733443498e-24,67,8983055097289157e-24,68,8983064111047368e-24,69,8983111996941178e-24,70,8983120447446023e-24,71,898312748954554e-23,72,8983134531656096e-24,73,8983141573777694e-24,74,8983148615910332e-24,75,8983152841195215e-24,76,8983153545409748e-24,77,8983153827095593e-24,78,898315396793852e-23,79,8983154249624393e-24,80,8983155658054012e-24,81,8983960794340072e-24,82,8984061344391998e-24,83,8984072829255685e-24,84,8984194981201908e-24,85,8984275233099427e-24,86,8984326127007554e-24,87,8984330099816539e-24,88,898433275258421e-23,89,8984333047023206e-24,90,8984333885258723e-24,91,8984337959508212e-24,92,8984365176209457e-24,93,8984727360418079e-24,94,8984901041679577e-24,95,898542662091587e-23,96,898610024130669e-23,97,8992894229037531e-24,98,8993203677616635e-24,99,8993206178094346e-24,100,8993216059187305e-24,101,899322029394808e-23,102,8994627867045891e-24,103,9467559984315793e-24,104,946881168618118e-23,105,9980888154931644e-24,106,9981105353606775e-24,107,9983807356573187e-24,108,1687060485811522e-23,109,1688447560354875e-23,110,2176606011487185e-23,111,2225078816042032e-23,112,2348476432064694e-23,113,2348765250187846e-23,114,2378108974103778e-23,115,314559636297708e-22,116,3297788621680806e-23,117,3667892343788279e-23,118,4235973644320739e-23,119,4794625900676345e-23,120,7262742998235812e-23,121,7499447580246377e-23,122,7525056410964318e-23,123,7979913581209237e-23,124,9662020153976783e-23,125,9799175562353741e-23,126,9897353517547472e-23,127,102313891987647e-21,128,1081460541960784e-22,129,121905913857622e-21,130,2246893314238523e-22,131,2297344808062643e-22,132,242984645941825e-21,133,2754604784282804e-22,134,2884548130346993e-22,135,3370339971357784e-22,136,4307953346848296e-22,137,5208707228462029e-22,138,5509209568565608e-22,139,6452227422644406e-22,140,6740679942715567e-22,141,6861770001566745e-22,142,7252630318111686e-22,143,7441010326374328e-22,144,7742672907173287e-22,145,9629542775307953e-22,146,1061032953945969e-21,147,1143628333594458e-21,148,1162186197019925e-21,149,136418522650196e-20,150,1367441038498385e-21,151,1432394487827058e-21,152,1736235742820677e-21,153,1848250952034914e-21,154,1909859317102744e-21,155,1975716534933873e-21,156,2122065907891938e-21,157,272837045300392e-20,158,3183098861837907e-21,159,3580986219567645e-21,160,3819718634205488e-21,161,409255567950588e-20,162,4407367654852486e-21,163,4774648292756861e-21,164,5161781938115525e-21,165,520870722846203e-20,166,5729577951308232e-21,167,6031134685587613e-21,168,6987290184522236e-21,169,9241254760174569e-21,170,1145915590261646e-20],pcstol:[0,6666666666666667e-24,1,2e-8,2,4970973863636364e-20,3,4970978156565657e-20,4,4970980410559237e-20,5,.001,6,.001093615055555556,7,.001093615194444445,8,.001093619003239988,9,.001093623110088878,10,.003280833333333333,11,.003280839895013123,12,.003280843014596366,13,.003280845583333334,14,.003280869330266636,15,.00497101413676763],newtoold:[2154,102110,2195,102200,2204,32036,2205,26979,2225,102641,2226,102642,2227,102643,2228,102644,2229,102645,2230,102646,2231,102653,2232,102654,2233,102655,2234,102656,2235,102657,2236,102658,2237,102659,2238,102660,2239,102666,2240,102667,2241,102668,2242,102669,2243,102670,2246,102679,2247,102680,2248,102685,2249,102686,2250,102687,2254,102694,2255,102695,2257,102712,2258,102713,2259,102714,2260,102715,2261,102716,2262,102717,2263,102718,2264,102719,2267,102724,2268,102725,2271,102728,2272,102729,2274,102736,2275,102737,2276,102738,2277,102739,2278,102740,2279,102741,2283,102746,2284,102747,2285,102748,2286,102749,2287,102752,2288,102753,2289,102754,2312,23433,2326,102140,2395,2091,2396,2092,2397,2166,2398,2167,2399,2168,2759,102229,2760,102230,2761,102248,2762,102249,2763,102250,2764,102251,2765,102252,2766,102241,2767,102242,2768,102243,2769,102244,2770,102245,2771,102246,2772,102253,2773,102254,2774,102255,2775,102256,2776,102257,2777,102258,2778,102259,2779,102260,2780,102266,2781,102267,2782,102261,2783,102262,2784,102263,2785,102264,2786,102265,2787,102268,2788,102269,2789,102270,2790,102271,2791,102272,2792,102273,2793,102274,2794,102275,2795,102276,2796,102277,2797,102278,2798,102279,2799,102280,2800,102281,2801,102282,2802,102283,2803,102284,2804,102285,2805,102286,2806,102287,2807,102288,2808,102289,2809,102290,2810,102291,2811,102292,2812,102293,2813,102294,2814,102295,2815,102296,2816,102297,2817,102298,2818,102300,2819,102304,2820,102307,2821,102308,2822,102309,2823,102310,2824,102311,2825,102312,2826,102313,2827,102314,2828,102315,2829,102316,2830,102317,2831,102318,2832,102320,2833,102321,2834,102322,2835,102323,2836,102324,2837,102325,2838,102326,2839,102327,2840,102330,2841,102334,2842,102335,2843,102336,2844,102337,2845,102338,2846,102339,2847,102340,2848,102341,2849,102342,2850,102343,2851,102344,2852,102345,2853,102346,2854,102347,2855,102348,2856,102349,2857,102350,2858,102351,2859,102352,2860,102353,2861,102354,2862,102355,2863,102356,2864,102357,2865,102358,2866,102361,2942,102167,2943,102169,2944,2139,2945,2140,2946,2141,2947,2142,2948,2143,2949,2144,2950,2145,2951,2146,2952,2147,2953,2036,2954,2291,2955,2153,2956,2152,2957,2151,2958,2150,2959,2149,2960,2037,2961,2038,2962,2148,2965,2244,2966,2245,3003,102091,3004,102092,3005,102190,3060,2982,3067,102139,3072,102606,3074,102608,3075,102208,3077,102210,3078,102123,3080,102119,3081,102603,3082,102602,3083,102601,3088,65163,3089,102763,3090,102363,3092,102151,3093,102152,3094,102153,3095,102154,3096,102155,3097,102145,3098,102146,3099,102147,3100,102148,3101,102149,3102,2155,3107,102172,3110,102170,3111,102171,3119,2214,3158,102234,3159,102235,3160,102236,3336,2979,3338,102006,3346,2600,3370,102126,3371,102127,3372,102130,3373,102131,3389,2577,3390,2694,3400,102184,3401,102185,3404,3359,3407,3366,3417,102675,3418,102676,3419,102677,3420,102678,3421,102707,3422,102708,3423,102709,3424,102711,3433,102651,3434,102652,3435,102671,3436,102672,3437,102710,3438,102730,3448,102095,3451,102681,3452,102682,3455,102735,3461,2063,3462,2064,3463,3073,3464,3076,3560,102742,3566,102743,3567,102744,3734,102722,3735,102723,3736,102755,3737,102756,3738,102757,3739,102758,3741,102205,3742,102206,3743,102207,3748,102211,3750,102202,3751,102203,3759,102663,3760,102463,3764,102112,3770,102090,3771,102180,3772,102181,3773,102182,3775,102186,3776,102187,3777,102188,3800,102183,3801,102189,3812,102199,3814,102609,3815,102469,3819,104990,3821,104136,3824,104137,3825,102444,3826,102443,3827,102442,3828,102441,3857,102100,3889,104991,3906,104992,4048,103201,4049,103202,4050,103203,4051,103204,4056,103205,4057,103206,4058,103207,4059,103208,4060,103209,4061,103210,4062,103211,4063,103212,4071,103213,4082,103214,4083,103215,4093,103216,4094,103217,4095,103218,4096,103219,4167,104108,4169,37252,4171,104107,4189,104110,4197,4234,4223,37223,4304,104304,4414,102201,4415,102762,4417,102764,4434,102765,4437,102647,4455,32029,4456,32018,4457,3454,4462,102439,4463,4466,4470,4469,4484,103794,4485,103795,4486,103796,4487,103797,4488,103798,4489,103799,4611,104104,4612,104111,4613,37255,4615,37247,4616,37250,4617,4140,4618,4291,4620,37211,4626,37235,4647,102362,4658,37204,4668,37201,4669,4126,4672,37217,4673,104125,4675,37220,4684,37232,4698,4631,4707,37213,4708,37231,4709,37212,4710,37238,4711,37214,4712,37237,4713,37208,4714,37215,4715,37253,4716,37216,4717,37239,4719,37219,4722,37242,4724,37233,4725,37222,4727,37224,4728,37246,4729,37226,4730,37227,4731,37228,4732,37229,4733,37230,4734,37251,4735,37259,4736,37254,4739,37205,4758,104133,4760,37001,4762,104114,4826,102214,5013,104142,5014,102331,5015,102332,5016,102333,5173,102085,5174,102086,5175,102087,5176,102088,5177,102089,5178,102040,5179,102080,5185,102081,5186,102082,5187,102083,5188,102084,5221,102066,5246,104100,5247,102490,5324,104144,5325,102420,5329,2934,5365,104143,5367,102305,5451,104132,5513,102065,5514,102067,5519,102111,5520,31461,5646,102745,5839,5388,5858,5532,5879,4474,6207,104256,6244,102769,6245,102790,6246,102770,6247,102771,6248,102793,6249,102796,6250,102772,6251,102788,6252,102775,6253,102795,6254,102781,6255,102767,6256,102774,6257,102768,6258,102797,6259,102789,6260,102780,6261,102783,6262,102787,6263,102791,6264,102777,6265,102798,6266,102779,6267,102784,6268,102792,6269,102782,6270,102785,6271,102794,6272,102773,6273,102778,6274,102786,6275,102776,6311,104141,6318,104145,6322,104287,6325,104286,6328,102046,6329,102047,6330,102048,6331,102049,6332,102050,6333,102051,6334,102052,6335,102053,6336,102054,6337,102055,6338,102056,6339,102057,6340,102058,6341,102059,6342,102382,6343,102383,6344,102384,6345,102385,6346,102386,6347,102387,6348,102388,6350,102965,6355,102975,6356,102976,6391,6141,6393,102966,6394,102977,6395,102978,6396,102979,6397,102980,6398,102981,6399,102982,6400,102983,6401,102984,6402,102985,6403,102986,6404,102988,6405,102991,6406,102987,6407,102990,6408,102989,6409,102992,6410,102993,6411,102995,6412,102994,6413,102996,6414,102962,6415,102997,6416,103003,6417,102998,6418,103004,6419,102999,6420,103005,6421,103e3,6422,103006,6423,103001,6424,103007,6425,103002,6426,103008,6427,103010,6428,103013,6429,103009,6430,103012,6431,103011,6432,103014,6433,103015,6434,103016,6435,103017,6436,103018,6437,103019,6438,103022,6439,102967,6440,103021,6441,103024,6442,103020,6443,103023,6444,103025,6445,103027,6446,103026,6447,103028,6448,103030,6449,103033,6450,103029,6451,103032,6452,103031,6453,103034,6454,103035,6455,103037,6456,103036,6457,103038,6458,103039,6459,103041,6460,103040,6461,103042,6462,103043,6463,103045,6464,103044,6465,103046,6466,103047,6467,103049,6468,103048,6469,103050,6470,103051,6471,103052,6472,103053,6473,103054,6474,103055,6475,103056,6476,103057,6477,103059,6478,103058,6479,103060,6480,103066,6481,103065,6482,103067,6483,103061,6484,103063,6485,103062,6486,103064,6487,103068,6488,103069,6489,103071,6490,103073,6491,103070,6492,103072,6493,103075,6494,103078,6495,103074,6496,103077,6497,102968,6498,103076,6499,103079,6500,103081,6501,103084,6502,103080,6503,103083,6504,103082,6505,103085,6506,103086,6507,103088,6508,102963,6509,103087,6510,103089,6511,103091,6512,103090,6513,103092,6514,103093,6515,103094,6516,103095,6518,103098,6519,103101,6520,103097,6521,103100,6522,103099,6523,103102,6524,103103,6525,103104,6526,103105,6527,103106,6528,103108,6529,103111,6530,103107,6531,103110,6532,103109,6533,103112,6534,103114,6535,103118,6536,103113,6537,103117,6538,103116,6539,103120,6540,103115,6541,103119,6542,103121,6543,103122,6544,103123,6545,103125,6546,103124,6547,103126,6548,103127,6549,103129,6550,103128,6551,103130,6552,103131,6553,103133,6554,103132,6555,103134,6556,102969,6557,102970,6558,103135,6559,103137,6560,103136,6561,103138,6562,103139,6563,103140,6564,103141,6565,103142,6566,103200,6567,103143,6568,103144,6569,103145,6570,103146,6571,103147,6572,103149,6573,103148,6574,103150,6575,103151,6576,103152,6577,103155,6578,103160,6579,102971,6580,102972,6581,103153,6582,103158,6583,103154,6584,103159,6585,103157,6586,103162,6587,103156,6588,103161,6589,103172,6590,103173,6592,103174,6593,103176,6594,103175,6595,103177,6596,103178,6597,103180,6598,103179,6599,103181,6600,103182,6601,103184,6602,103183,6603,103185,6605,103190,6606,103186,6607,103189,6608,103188,6609,103191,6610,102973,6611,103192,6612,103196,6613,103193,6614,103197,6615,103195,6616,103199,6617,103194,6618,103198,6619,103164,6620,103163,6621,103165,6625,103170,6626,103169,6627,103171,6628,102520,6629,102521,6630,102522,6631,102523,6632,102524,6633,102527,6634,102493,6635,102494,6636,102496,6637,102495,6668,104020,6669,102610,6670,102611,6671,102612,6672,102613,6673,102614,6674,102615,6675,102616,6676,102617,6677,102618,6678,102619,6679,102620,6680,102621,6681,102622,6682,102623,6683,102624,6684,102625,6685,102626,6686,102627,6687,102628,6688,102593,6689,102594,6690,102595,6691,102596,6692,102597,6783,104223,6784,102530,6785,102500,6788,102532,6789,102502,6792,102533,6793,102503,6796,102531,6797,102501,6800,102534,6801,102504,6804,102535,6805,102505,6808,102536,6809,102506,6812,102537,6813,102507,6816,102538,6817,102508,6820,102539,6821,102509,6824,102540,6825,102510,6828,102541,6829,102511,6832,102542,6833,102512,6836,102543,6837,102513,6840,102544,6841,102514,6844,102546,6845,102516,6848,102545,6849,102515,6852,102547,6853,102517,6856,102548,6857,102518,6860,102549,6861,102519,6867,102380,6868,102381,6879,103187,6880,103096,6884,102376,6885,102378,6886,102377,6887,102379,7136,6980,7139,6987,7142,102706,7692,102557,7693,102558,7694,102559,7695,102560,7696,102561,8090,103318,8091,103418,8092,103317,8093,103417,8095,103371,8096,103471,8097,103369,8098,103469,8099,103368,8100,103468,8101,103367,8102,103467,8103,103366,8104,103466,8105,103365,8106,103465,8107,103364,8108,103464,8109,103363,8110,103463,8111,103362,8112,103462,8113,103361,8114,103461,8115,103360,8116,103460,8117,103359,8118,103459,8119,103357,8120,103457,8121,103356,8122,103456,8123,103355,8124,103455,8125,103354,8126,103454,8127,103353,8128,103453,8129,103352,8130,103452,8131,103350,8132,103450,8133,103349,8134,103449,8135,103348,8136,103448,8139,103343,8140,103443,8141,103342,8142,103442,8143,103341,8144,103441,8145,103339,8146,103439,8147,103337,8148,103437,8149,103336,8150,103436,8151,103334,8152,103434,8153,103333,8154,103433,8155,103331,8156,103431,8161,103326,8162,103426,8163,103325,8164,103425,8165,103324,8166,103424,8171,103321,8172,103421,8173,103320,8177,103420,8179,103316,8180,103416,8181,103315,8182,103415,8184,103314,8185,103414,8191,103312,8193,103412,8196,103311,8197,103411,8198,103310,8200,103410,8201,103309,8202,103409,8203,103308,8204,103408,8207,103306,8208,103406,8209,103305,8210,103405,8212,103304,8213,103404,8214,103303,8216,103403,8218,103302,8220,103402,8222,103301,8224,103401,8431,104248,8441,102590,8693,102449,8826,102605,8857,54035,8858,54036,8859,54037,8860,8449,8988,104115,8989,104116,8990,104117,8991,104118,8992,104119,8993,104120,8994,104121,8995,104122,8996,104123,8997,104124,8998,104896,8999,104257,9e3,104019,9014,104010,9019,104021,9053,104011,9054,104012,9055,104013,9056,104014,9057,104015,9059,104258,9060,104179,9061,104180,9062,104181,9063,104182,9064,104183,9065,104184,9066,104185,9067,104186,21896,21891,21897,21892,21898,21893,21899,21894,26701,102124,26702,102125,26799,26747,26847,102683,26848,102684,26849,102691,26850,102692,26851,102693,26852,102704,26853,102750,26854,102751,26857,102466,26858,102467,26859,102468,26901,102128,26902,102129,27493,27492,29101,29100,29168,29118,29169,29119,29170,29120,29171,29121,29172,29122,29187,29177,29188,29178,29189,29179,29190,29180,29191,29181,29192,29182,29193,29183,29194,29184,29195,29185,29902,29900,31279,31278,31281,31291,31282,31292,31283,31293,31284,31294,31285,31295,31286,31296,31287,31297,31466,31462,31467,31463,31468,31464,31469,31465,31986,31917,31987,31918,31988,31919,31989,31920,31990,31921,31991,31922,32064,32074,32065,32075,32066,32076,32067,32077,102550,2181,102551,2182,102552,2183,102553,2184,102554,2185,102555,2186,102556,2187],pcsid:[2066,15,2136,12,2155,10,2157,5,2158,5,2159,12,2160,12,2219,5,2220,5,2244,10,2245,10,2256,11,2265,11,2266,11,2269,11,2270,11,2273,11,2290,5,2291,5,2294,5,2295,5,2313,5,2314,14,2899,10,2900,10,2901,11,2909,11,2910,11,2911,10,2912,10,2913,11,2914,11,2964,10,2967,10,2968,10,2991,5,2992,11,2993,5,2994,11,3073,5,3076,5,3079,5,3091,10,3106,5,3108,5,3109,5,3141,5,3142,5,3167,4,3337,5,3347,5,3348,5,3359,10,3360,5,3361,11,3362,5,3363,10,3364,5,3365,10,3366,14,3402,5,3403,5,3405,5,3406,5,3439,5,3440,5,3447,5,3449,5,3450,5,3453,10,3454,10,3460,5,3479,11,3480,5,3481,11,3482,5,3483,11,3484,5,3485,10,3486,5,3487,10,3488,5,3489,5,3490,10,3491,5,3492,10,3493,5,3494,10,3495,5,3496,10,3497,5,3498,10,3499,5,3500,10,3501,5,3502,10,3503,5,3504,10,3505,5,3506,10,3507,5,3508,10,3509,5,3510,10,3511,5,3512,10,3513,5,3514,5,3515,10,3516,5,3517,10,3518,5,3519,10,3520,5,3521,10,3522,5,3523,10,3524,5,3525,10,3526,5,3527,10,3528,5,3529,10,3530,5,3531,10,3532,5,3533,10,3534,5,3535,10,3536,5,3537,10,3538,5,3539,10,3540,5,3541,10,3542,5,3543,10,3544,5,3545,10,3546,5,3547,10,3548,5,3549,10,3550,5,3551,10,3552,5,3553,10,3582,10,3583,5,3584,10,3585,5,3586,10,3587,5,3588,11,3589,5,3590,11,3591,5,3592,5,3593,11,3598,10,3599,5,3600,10,3605,11,3606,5,3607,5,3608,10,3609,5,3610,10,3611,5,3612,10,3613,5,3614,10,3615,5,3616,10,3617,5,3618,10,3619,5,3620,10,3621,5,3622,10,3623,5,3624,10,3625,5,3626,10,3627,5,3628,10,3629,5,3630,10,3631,5,3632,10,3633,5,3634,11,3635,5,3636,11,3640,10,3641,5,3642,10,3643,5,3644,11,3645,5,3646,11,3647,5,3648,11,3649,5,3650,10,3651,5,3652,10,3653,5,3654,10,3655,5,3656,11,3657,5,3658,10,3659,5,3660,10,3661,5,3662,10,3663,5,3664,10,3668,10,3669,5,3670,10,3671,5,3672,10,3673,5,3674,10,3675,5,3676,11,3677,10,3678,5,3679,11,3680,10,3681,5,3682,11,3683,10,3684,5,3685,5,3686,10,3687,5,3688,10,3689,5,3690,10,3691,5,3692,10,3696,10,3697,5,3698,10,3699,5,3700,10,3740,5,3749,5,3783,5,3784,5,3793,5,3794,5,3802,5,3816,5,3829,5,3854,5,3911,5,3912,5,3920,5,3978,5,3979,5,3991,10,3992,10,4026,5,4037,5,4038,5,4087,5,4088,5,4217,10,4438,10,4439,10,4467,5,4471,5,4474,5,4559,5,4822,5,4839,5,5018,5,5048,5,5167,5,5168,5,5223,5,5234,5,5235,5,5243,5,5266,5,5316,5,5320,5,5321,5,5330,5,5331,5,5337,5,5361,5,5362,5,5382,5,5383,5,5396,5,5456,5,5457,5,5469,5,5472,9,5490,5,5518,5,5523,5,5559,5,5588,11,5589,14,5596,5,5627,5,5629,5,5641,5,5643,5,5644,5,5654,10,5655,10,5659,5,5700,5,5825,5,5836,5,5837,5,5842,5,5844,5,5880,5,5887,5,5890,5,6128,11,6129,11,6141,11,6204,5,6210,5,6211,5,6307,5,6312,5,6316,5,6362,5,6591,5,6646,5,6703,5,6786,5,6787,11,6790,5,6791,11,6794,5,6795,11,6798,5,6799,11,6802,5,6803,11,6806,5,6807,11,6810,5,6811,11,6814,5,6815,11,6818,5,6819,11,6822,5,6823,11,6826,5,6827,11,6830,5,6831,11,6834,5,6835,11,6838,5,6839,11,6842,5,6843,11,6846,5,6847,11,6850,5,6851,11,6854,5,6855,11,6858,5,6859,11,6862,5,6863,11,6870,5,6875,5,6876,5,6915,5,6922,5,6923,10,6924,5,6925,10,6962,5,6984,5,6991,5,7128,10,7131,5,7132,10,7257,5,7258,10,7259,5,7260,10,7261,5,7262,10,7263,5,7264,10,7265,5,7266,10,7267,5,7268,10,7269,5,7270,10,7271,5,7272,10,7273,5,7274,10,7275,5,7276,10,7277,5,7278,10,7279,5,7280,10,7281,5,7282,10,7283,5,7284,10,7285,5,7286,10,7287,5,7288,10,7289,5,7290,10,7291,5,7292,10,7293,5,7294,10,7295,5,7296,10,7297,5,7298,10,7299,5,7300,10,7301,5,7302,10,7303,5,7304,10,7305,5,7306,10,7307,5,7308,10,7309,5,7310,10,7311,5,7312,10,7313,5,7314,10,7315,5,7316,10,7317,5,7318,10,7319,5,7320,10,7321,5,7322,10,7323,5,7324,10,7325,5,7326,10,7327,5,7328,10,7329,5,7330,10,7331,5,7332,10,7333,5,7334,10,7335,5,7336,10,7337,5,7338,10,7339,5,7340,10,7341,5,7342,10,7343,5,7344,10,7345,5,7346,10,7347,5,7348,10,7349,5,7350,10,7351,5,7352,10,7353,5,7354,10,7355,5,7356,10,7357,5,7358,10,7359,5,7360,10,7361,5,7362,10,7363,5,7364,10,7365,5,7366,10,7367,5,7368,10,7369,5,7370,10,7877,5,7878,5,7882,5,7883,5,7887,5,7899,5,7991,5,7992,5,8035,10,8036,10,8058,5,8059,5,8082,5,8083,5,8088,5,8137,5,8138,10,8157,5,8158,10,8159,5,8160,10,8167,5,8168,10,8169,5,8170,10,8187,5,8189,10,8205,5,8206,10,8225,5,8226,10,8311,5,8312,11,8313,5,8314,11,8315,5,8316,11,8317,5,8318,11,8319,5,8320,11,8321,5,8322,11,8323,5,8324,11,8325,5,8326,11,8327,5,8328,11,8329,5,8330,11,8331,5,8332,11,8333,5,8334,11,8335,5,8336,11,8337,5,8338,11,8339,5,8340,11,8341,5,8342,11,8343,5,8344,11,8345,5,8346,11,8347,5,8348,11,8352,5,8353,5,8379,5,8380,10,8381,5,8382,10,8383,5,8384,10,8385,5,8387,10,8391,5,8395,5,8433,5,8455,5,8456,5,8531,10,8682,5,8687,5,8692,5,8903,5,8950,5,8951,5,9039,5,9040,5,9141,5,9149,5,9150,5,9191,5,9221,5,9222,5,20499,5,20538,5,20539,5,20790,5,20791,5,21291,5,21292,5,21500,5,21817,5,21818,5,22032,5,22033,5,22091,5,22092,5,22332,5,22391,5,22392,5,22700,5,22770,5,22780,5,22832,5,23090,5,23095,5,23239,5,23240,5,23433,5,23700,5,24047,5,24048,5,24100,14,24200,5,24305,5,24306,5,24382,6,24383,5,24500,5,24547,5,24548,5,24571,2,24600,5,25e3,5,25231,5,25884,5,25932,5,26237,5,26331,5,26332,5,26591,5,26592,5,26632,5,26692,5,26855,10,26856,10,27120,5,27200,5,27291,7,27292,7,27429,5,27492,5,27500,5,27700,5,28232,5,28600,5,28991,5,28992,5,29100,5,29220,5,29221,5,29333,5,29635,5,29636,5,29701,5,29738,5,29739,5,29849,5,29850,5,29871,3,29872,13,29873,5,29900,5,29901,5,29903,5,30200,15,30339,5,30340,5,30791,5,30792,5,31028,5,31121,5,31154,5,31170,5,31171,5,31370,5,31528,5,31529,5,31600,5,31700,5,31838,5,31839,5,31901,5,32061,5,32062,5,32098,5,32099,10,32100,5,32104,5,32161,5,32766,5,53048,5,53049,5,54090,5,54091,5,65061,10,65062,10,65161,5,65163,5,102041,10,102064,8,102068,1,102069,0,102118,10,102119,11,102120,10,102121,10,102217,10,102218,5,102219,10,102220,10,102378,11,102379,11,102380,5,102381,11,102498,5,102499,5,102589,10,102590,5,102599,10,102600,10,102604,10,102605,5,102606,5,102647,5,102704,10,102705,10,102706,5,102733,10,102761,10,102762,5,102763,10,102764,5,102765,5,102766,10,102962,5,102963,5,102970,11,102974,10,102993,5,102994,5,102995,10,102996,10,103015,5,103016,10,103017,5,103018,10,103025,5,103026,5,103027,10,103028,10,103035,5,103036,5,103037,10,103038,10,103039,5,103040,5,103041,10,103042,10,103043,5,103044,5,103045,10,103046,10,103047,5,103048,5,103049,10,103050,10,103051,5,103052,10,103053,5,103054,10,103055,5,103056,10,103057,5,103058,5,103059,10,103060,10,103061,5,103062,5,103063,10,103064,10,103069,10,103070,5,103071,5,103072,10,103073,10,103086,5,103087,5,103088,10,103089,10,103094,11,103095,5,103096,10,103103,5,103104,10,103105,5,103106,10,103121,5,103122,10,103123,5,103124,5,103125,11,103126,11,103127,5,103128,5,103129,10,103130,10,103131,5,103132,5,103133,10,103134,10,103135,5,103136,5,103137,11,103138,11,103139,5,103140,10,103141,5,103142,10,103143,5,103144,10,103145,5,103146,11,103147,5,103148,5,103149,10,103150,10,103151,5,103152,10,103172,5,103173,10,103174,5,103175,5,103176,10,103177,10,103178,5,103179,5,103180,10,103181,10,103182,5,103183,5,103184,10,103185,10,103228,5,103229,5,103230,10,103231,10,103250,5,103251,10,103252,5,103253,10,103260,5,103261,5,103262,10,103263,10,103270,5,103271,5,103272,10,103273,10,103274,5,103275,5,103276,10,103277,10,103278,5,103279,5,103280,10,103281,10,103282,5,103283,5,103284,10,103285,10,103286,5,103287,10,103288,5,103289,10,103290,5,103291,10,103292,5,103293,5,103294,10,103295,10,103296,5,103297,5,103298,10,103299,10,103376,10,103377,5,103378,5,103379,10,103380,10,103393,5,103394,5,103395,10,103396,10,103472,5,103473,11,103474,5,103475,10,103482,5,103483,10,103484,5,103485,10,103500,5,103501,10,103502,5,103503,5,103504,11,103505,11,103506,5,103507,5,103508,10,103509,10,103510,5,103511,5,103512,10,103513,10,103514,5,103515,10,103516,5,103517,10,103518,5,103519,10,103520,5,103521,11,103522,5,103523,5,103524,10,103525,10,103526,5,103527,10,103561,10,103562,10,103563,5,103564,5,103565,10,103566,10,103567,5,103568,5,103569,10,103570,10,103585,10,103586,5,103587,10,103588,11,103589,5,103590,10,103591,11,103592,5,103593,10,103594,11,103695,10,103846,5,103946,10],pcsidc:[[2e3,2045,5],[2056,2065,5],[2067,2135,5],[2137,2153,5],[2161,2170,5],[2172,2193,5],[2196,2198,5],[2200,2203,5],[2206,2217,5],[2222,2224,11],[2251,2253,11],[2280,2282,11],[2308,2311,5],[2315,2325,5],[2327,2394,5],[2400,2491,5],[2494,2758,5],[2867,2869,11],[2870,2888,10],[2891,2895,10],[2896,2898,11],[2902,2908,10],[2915,2920,10],[2921,2923,11],[2924,2930,10],[2931,2941,5],[2969,2973,5],[2975,2982,5],[2984,2988,5],[2995,3002,5],[3006,3051,5],[3054,3059,5],[3061,3066,5],[3068,3071,5],[3084,3087,5],[3112,3118,5],[3120,3138,5],[3146,3151,5],[3153,3157,5],[3161,3166,5],[3168,3172,5],[3174,3203,5],[3294,3313,5],[3315,3335,5],[3339,3345,5],[3350,3358,5],[3367,3369,5],[3374,3388,5],[3391,3399,5],[3408,3416,5],[3425,3432,10],[3441,3446,10],[3456,3459,10],[3465,3478,5],[3554,3559,5],[3561,3565,10],[3568,3570,10],[3571,3581,5],[3594,3597,5],[3601,3604,5],[3637,3639,5],[3665,3667,5],[3693,3695,5],[3701,3727,5],[3728,3733,10],[3744,3747,5],[3753,3758,10],[3761,3763,5],[3765,3769,5],[3779,3781,5],[3788,3791,5],[3797,3799,5],[3832,3841,5],[3844,3852,5],[3873,3885,5],[3890,3893,5],[3942,3950,5],[3968,3970,5],[3973,3976,5],[3986,3989,5],[3994,3997,5],[4390,4398,5],[4399,4413,10],[4418,4433,10],[4491,4554,5],[4568,4589,5],[4652,4656,5],[4766,4800,5],[5069,5072,5],[5105,5130,5],[5180,5184,5],[5253,5259,5],[5269,5275,5],[5292,5311,5],[5343,5349,5],[5355,5357,5],[5387,5389,5],[5459,5463,5],[5479,5482,5],[5530,5539,5],[5550,5552,5],[5562,5583,5],[5623,5625,10],[5631,5639,5],[5649,5653,5],[5663,5680,5],[5682,5685,5],[5875,5877,5],[5896,5899,5],[5921,5940,5],[6050,6125,5],[6351,6354,5],[6366,6372,5],[6381,6387,5],[6622,6624,5],[6707,6709,5],[6720,6723,5],[6732,6738,5],[6931,6933,5],[7005,7007,5],[7057,7070,10],[7074,7082,5],[7109,7118,5],[7119,7127,11],[7374,7376,5],[7528,7586,5],[7587,7645,10],[7755,7787,5],[7791,7795,5],[7799,7801,5],[7803,7805,5],[7825,7831,5],[7845,7859,5],[8013,8032,5],[8065,8068,11],[8518,8529,10],[8533,8536,10],[8538,8540,10],[8677,8679,5],[8836,8840,5],[8908,8910,5],[9154,9159,5],[9205,9218,5],[20002,20032,5],[20062,20092,5],[20135,20138,5],[20248,20258,5],[20348,20358,5],[20436,20440,5],[20822,20824,5],[20934,20936,5],[21035,21037,5],[21095,21097,5],[21148,21150,5],[21413,21423,5],[21473,21483,5],[21780,21782,5],[21891,21894,5],[22171,22177,5],[22181,22187,5],[22191,22197,5],[22234,22236,5],[22521,22525,5],[22991,22994,5],[23028,23038,5],[23830,23853,5],[23866,23872,5],[23877,23884,5],[23886,23894,5],[23946,23948,5],[24311,24313,5],[24342,24347,5],[24370,24374,6],[24375,24381,5],[24718,24721,5],[24817,24821,5],[24877,24882,5],[24891,24893,5],[25391,25395,5],[25828,25838,5],[26191,26195,5],[26391,26393,5],[26703,26722,5],[26729,26760,10],[26766,26798,10],[26860,26870,10],[26891,26899,5],[26903,26923,5],[26929,26946,5],[26948,26998,5],[27037,27040,5],[27205,27232,5],[27258,27260,5],[27391,27398,5],[27561,27564,5],[27571,27574,5],[27581,27584,5],[27591,27594,5],[28191,28193,5],[28348,28358,5],[28402,28432,5],[28462,28492,5],[29118,29122,5],[29177,29185,5],[30161,30179,5],[30491,30494,5],[30729,30732,5],[31251,31259,5],[31265,31268,5],[31275,31278,5],[31288,31297,5],[31461,31465,5],[31491,31495,5],[31917,31922,5],[31965,31985,5],[31992,32e3,5],[32001,32003,10],[32005,32031,10],[32033,32060,10],[32074,32077,10],[32081,32086,5],[32107,32130,5],[32133,32158,5],[32164,32167,10],[32180,32199,5],[32201,32260,5],[32301,32360,5],[32601,32662,5],[32664,32667,10],[32701,32761,5],[53001,53004,5],[53008,53019,5],[53021,53032,5],[53034,53037,5],[53042,53046,5],[53074,53080,5],[54001,54004,5],[54008,54019,5],[54021,54032,5],[54034,54037,5],[54042,54046,5],[54048,54053,5],[54074,54080,5],[54098,54101,5],[102001,102040,5],[102042,102063,5],[102065,102067,5],[102070,102112,5],[102114,102117,5],[102122,102208,5],[102210,102216,5],[102221,102300,5],[102304,102377,5],[102382,102388,5],[102389,102398,10],[102399,102444,5],[102445,102447,10],[102448,102458,5],[102459,102468,10],[102469,102496,5],[102500,102519,11],[102520,102524,5],[102525,102529,10],[102530,102549,5],[102557,102588,5],[102593,102598,5],[102601,102603,5],[102608,102628,5],[102629,102646,10],[102648,102672,10],[102675,102700,10],[102701,102703,5],[102707,102730,10],[102735,102758,10],[102767,102900,5],[102965,102969,5],[102971,102973,5],[102975,102989,5],[102990,102992,11],[102997,103002,5],[103003,103008,10],[103009,103011,5],[103012,103014,10],[103019,103021,5],[103022,103024,10],[103029,103031,5],[103032,103034,10],[103065,103068,5],[103074,103076,5],[103077,103079,11],[103080,103082,5],[103083,103085,10],[103090,103093,5],[103097,103099,5],[103100,103102,10],[103107,103109,5],[103110,103112,10],[103113,103116,5],[103117,103120,10],[103153,103157,5],[103158,103162,10],[103163,103165,5],[103166,103168,11],[103169,103171,10],[103186,103188,5],[103189,103191,10],[103192,103195,5],[103196,103199,10],[103200,103224,5],[103225,103227,11],[103232,103237,5],[103238,103243,10],[103244,103246,5],[103247,103249,10],[103254,103256,5],[103257,103259,10],[103264,103266,5],[103267,103269,10],[103300,103375,5],[103381,103383,5],[103384,103386,11],[103387,103389,5],[103390,103392,10],[103397,103399,5],[103400,103471,10],[103476,103478,5],[103479,103481,10],[103486,103488,5],[103489,103491,10],[103492,103495,5],[103496,103499,10],[103539,103543,5],[103544,103548,10],[103549,103551,5],[103552,103554,11],[103555,103557,10],[103558,103560,5],[103571,103573,5],[103574,103576,10],[103577,103580,5],[103581,103583,10],[103595,103597,5],[103600,103694,5],[103696,103698,5],[103700,103793,10],[103794,103799,5]],gcsid:[4001,81,4002,85,4003,70,4004,84,4005,82,4006,83,4007,60,4008,67,4009,39,4010,57,4011,63,4012,64,4013,64,4014,63,4015,92,4016,90,4018,86,4019,75,4020,68,4021,70,4022,55,4023,75,4024,66,4025,73,4027,95,4028,59,4029,58,4031,75,4032,78,4033,77,4034,65,4035,100,4036,70,4042,88,4044,87,4045,89,4046,75,4047,99,4052,101,4053,97,4054,61,4075,75,4081,75,4120,84,4121,75,4122,80,4123,55,4124,84,4126,75,4130,75,4131,92,4132,64,4133,75,4134,64,4140,75,4141,75,4142,64,4143,64,4144,92,4145,87,4146,89,4147,66,4148,75,4149,84,4150,84,4151,75,4152,75,4153,55,4154,55,4155,63,4156,84,4157,60,4162,84,4163,75,4164,66,4165,55,4166,75,4168,58,4170,75,4172,75,4173,75,4174,58,4175,64,4176,75,4178,66,4179,66,4180,75,4188,81,4190,75,4191,66,4192,55,4193,63,4198,64,4199,55,4200,66,4201,64,4202,70,4203,70,4204,55,4205,66,4206,63,4207,55,4208,55,4209,64,4210,64,4211,84,4212,64,4213,63,4214,66,4215,55,4216,67,4218,55,4219,84,4220,64,4221,55,4222,64,4224,55,4225,55,4229,68,4230,55,4231,55,4232,64,4234,64,4235,55,4236,55,4237,70,4238,70,4239,92,4240,92,4241,65,4242,67,4243,88,4244,92,4245,86,4246,64,4250,64,4251,64,4252,63,4253,67,4254,55,4255,55,4256,64,4257,84,4258,75,4259,55,4260,64,4261,106,4262,84,4263,64,4265,55,4266,63,4267,67,4269,75,4270,64,4271,55,4272,55,4273,82,4274,55,4275,63,4276,73,4280,84,4281,57,4282,63,4283,75,4284,66,4285,55,4286,68,4288,55,4289,84,4291,70,4292,55,4293,83,4294,84,4295,84,4296,63,4297,55,4298,90,4299,85,4300,85,4301,84,4302,60,4303,68,4306,84,4307,64,4308,84,4309,55,4310,63,4311,55,4312,84,4313,55,4314,84,4315,63,4316,55,4317,66,4318,75,4319,75,4322,80,4324,80,4326,75,4466,75,4469,75,4475,55,4483,75,4490,75,4555,66,4558,75,4608,67,4609,67,4610,74,4614,55,4619,75,4624,75,4625,55,4627,75,4636,55,4637,55,4638,67,4639,55,4657,93,4659,75,4660,55,4661,75,4666,84,4667,75,4670,75,4671,63,4674,75,4679,64,4680,64,4682,92,4683,67,4686,75,4687,75,4693,75,4694,75,4695,67,4696,64,4697,64,4702,75,4703,64,4704,55,4705,55,4706,68,4718,55,4720,80,4721,55,4723,67,4726,67,4737,75,4738,60,4740,79,4741,55,4742,75,4743,64,4744,64,4745,84,4746,84,4747,75,4748,56,4749,75,4750,75,4751,91,4752,56,4753,55,4754,55,4759,75,4761,75,4801,84,4802,55,4803,55,4804,84,4805,84,4806,55,4807,106,4808,84,4809,55,4810,105,4811,106,4816,106,4817,82,4818,84,4820,84,4821,106,4823,55,4824,55,4901,107,4902,107,4903,59,4904,84,5228,84,5229,84,5233,92,5252,75,5264,75,5340,75,5354,75,5360,75,5371,75,5373,75,5381,75,5393,75,5464,60,5467,67,5489,75,5524,55,5527,70,5546,75,5561,66,5593,75,5681,84,5886,75,6135,75,6365,75,6706,75,6881,64,6882,64,6883,55,6892,64,6894,64,6980,75,6983,75,6987,75,6990,75,7035,75,7037,75,7039,75,7041,75,7073,75,7084,75,7086,75,7133,75,7373,75,7683,76,7798,75,7844,75,7881,75,7886,75,8042,96,8043,96,8086,75,8232,75,8237,75,8240,75,8246,75,8249,75,8252,75,8255,75,8351,84,8427,75,8428,55,8449,75,8545,75,8685,75,8694,64,8699,75,8818,75,8888,75,8900,75,8902,75,8907,75,8949,75,9003,75,9006,75,9009,75,9012,75,9017,75,9068,75,9069,75,9140,75,9148,75,9153,75,37001,73,37002,69,37003,72,37004,71,37005,62,37006,91,37007,94,37008,101,37201,55,37202,92,37203,87,37204,55,37205,55,37206,64,37207,71,37208,64,37211,64,37220,67,37221,55,37222,55,37223,63,37224,55,37225,106,37226,55,37227,55,37228,64,37229,62,37230,55,37231,70,37232,55,37233,55,37235,55,37237,55,37238,55,37239,67,37240,64,37241,55,37242,55,37243,67,37252,67,37253,55,37254,64,37255,84,37257,66,37259,55,37260,67,104017,79,104018,79,104024,75,104027,75,104047,98,104050,75,104100,75,104101,84,104102,84,104103,64,104104,55,104105,84,104106,55,104107,75,104108,75,104109,67,104110,75,104111,75,104112,67,104113,67,104128,102,104129,75,104130,55,104131,84,104132,67,104133,75,104134,75,104135,66,104136,70,104137,75,104138,55,104139,106,104140,106,104223,75,104248,55,104256,92,104261,63,104286,75,104287,75,104304,63,104700,49,104701,9,104702,24,104703,15,104704,28,104705,32,104706,53,104707,46,104708,37,104709,54,104710,11,104711,14,104712,30,104713,52,104714,4,104715,4,104716,23,104717,14,104718,48,104719,29,104720,22,104721,21,104722,35,104723,21,104724,46,104725,22,104726,49,104727,45,104728,52,104729,10,104730,10,104731,21,104732,31,104733,26,104734,40,104735,19,104736,30,104737,34,104738,27,104739,46,104740,5,104741,12,104742,50,104743,9,104744,43,104745,21,104746,26,104747,25,104748,21,104749,7,104750,53,104751,6,104752,33,104753,29,104754,19,104755,41,104756,31,104757,3,104758,41,104759,25,104760,49,104761,41,104762,44,104763,50,104764,46,104765,6,104766,40,104767,16,104768,8,104769,17,104770,48,104771,42,104772,50,104773,25,104774,29,104775,25,104776,32,104777,13,104778,36,104779,47,104780,14,104781,29,104782,23,104783,38,104784,42,104785,18,104786,20,104808,51,104896,75,104900,112,104901,104,104902,103,104903,116,104904,109,104905,108,104906,169,104907,164,104908,0,104909,168,104910,141,104911,166,104912,114,104913,160,104914,151,104915,117,104916,110,104917,140,104918,115,104919,170,104920,163,104921,154,104922,158,104923,161,104924,148,104925,0,104926,159,104927,167,104928,127,104929,131,104930,145,104931,159,104932,136,104933,123,104934,139,104935,134,104936,166,104937,150,104938,137,104939,147,104940,121,104941,165,104942,128,104943,111,104944,1,104945,126,104946,152,104947,157,104948,162,104949,153,104950,156,104951,149,104952,132,104953,122,104954,160,104955,146,104956,143,104957,156,104958,120,104959,125,104960,2,104961,144,104962,142,104963,138,104964,155,104965,135,104966,133,104967,151,104968,118,104969,119,104970,124,104971,108,104972,129,104973,130,104974,113,104975,0,104990,84,104991,75,104992,84],gcsidc:[[4127,4129,67],[4135,4139,67],[4158,4161,55],[4181,4185,55],[4194,4196,55],[4226,4228,63],[4247,4249,55],[4277,4279,81],[4600,4607,64],[4621,4623,55],[4628,4633,55],[4641,4646,55],[4662,4665,55],[4676,4678,66],[4688,4692,55],[4699,4701,64],[4755,4757,75],[4763,4765,75],[4813,4815,84],[8972,8987,75],[37212,37219,55],[37245,37247,55],[37249,37251,55],[104009,104015,75],[104019,104022,75],[104114,104124,75],[104125,104127,55],[104141,104145,75],[104179,104186,75],[104257,104260,75]]},b={c:[[2e3,2035,9001],[2039,2045,9001],[2056,2062,9001],[2067,2090,9001],[2093,2135,9001],[2161,2165,9001],[2172,2180,9001],[2188,2193,9001],[2195,2198,9001],[2200,2203,9001],[2205,2213,9001],[2215,2217,9001],[2222,2224,9002],[2225,2243,9003],[2246,2250,9003],[2251,2253,9002],[2257,2264,9003],[2274,2279,9003],[2280,2282,9002],[2283,2289,9003],[2308,2313,9001],[2315,2491,9001],[2494,2576,9001],[2578,2599,9001],[2601,2693,9001],[2695,2866,9001],[2867,2869,9002],[2870,2888,9003],[2891,2895,9003],[2896,2898,9002],[2902,2908,9003],[2915,2920,9003],[2921,2923,9002],[2924,2930,9003],[2931,2933,9001],[2935,2962,9001],[2964,2968,9003],[2969,2973,9001],[2975,2978,9001],[2984,2988,9001],[2995,3051,9001],[3054,3072,9001],[3077,3079,9001],[3081,3088,9001],[3092,3101,9001],[3106,3138,9001],[3146,3151,9001],[3153,3166,9001],[3168,3172,9001],[3174,3203,9001],[3294,3313,9001],[3315,3348,9001],[3350,3358,9001],[3367,3403,9001],[3408,3416,9001],[3417,3438,9003],[3441,3446,9003],[3447,3450,9001],[3451,3453,9003],[3455,3459,9003],[3460,3478,9001],[3554,3559,9001],[3560,3570,9003],[3571,3581,9001],[3594,3597,9001],[3601,3604,9001],[3637,3639,9001],[3665,3667,9001],[3693,3695,9001],[3701,3727,9001],[3728,3739,9003],[3740,3751,9001],[3753,3760,9003],[3761,3773,9001],[3775,3777,9001],[3779,3781,9001],[3788,3791,9001],[3797,3802,9001],[3814,3816,9001],[3825,3829,9001],[3832,3841,9001],[3844,3852,9001],[3873,3885,9001],[3890,3893,9001],[3942,3950,9001],[3968,3970,9001],[3973,3976,9001],[3986,3989,9001],[3994,3997,9001],[4001,4016,9102],[4018,4025,9102],[4027,4029,9102],[4031,4036,9102],[4044,4047,9102],[4048,4051,9001],[4052,4054,9102],[4056,4063,9001],[4093,4096,9001],[4120,4124,9102],[4127,4139,9102],[4141,4176,9102],[4178,4185,9102],[4188,4216,9102],[4218,4232,9102],[4235,4260,9102],[4265,4267,9102],[4269,4286,9102],[4292,4304,9102],[4306,4319,9102],[4390,4398,9001],[4399,4413,9003],[4418,4433,9003],[4455,4457,9003],[4484,4489,9001],[4491,4554,9001],[4568,4589,9001],[4600,4630,9102],[4636,4639,9102],[4641,4646,9102],[4652,4656,9001],[4657,4680,9102],[4682,4684,9102],[4686,4765,9102],[4766,4800,9001],[4801,4806,9102],[4813,4815,9102],[5014,5016,9001],[5069,5072,9001],[5105,5130,9001],[5173,5188,9001],[5253,5259,9001],[5269,5275,9001],[5292,5311,9001],[5329,5331,9001],[5343,5349,9001],[5355,5357,9001],[5459,5463,9001],[5479,5482,9001],[5518,5520,9001],[5533,5539,9001],[5550,5552,9001],[5562,5583,9001],[5623,5625,9003],[5631,5639,9001],[5649,5653,9001],[5663,5680,9001],[5682,5685,9001],[5875,5877,9001],[5896,5899,9001],[5921,5940,9001],[6050,6125,9001],[6244,6275,9001],[6328,6348,9001],[6350,6356,9001],[6366,6372,9001],[6381,6387,9001],[6393,6404,9001],[6480,6483,9001],[6511,6514,9001],[6579,6581,9001],[6619,6624,9001],[6625,6627,9003],[6628,6632,9001],[6634,6637,9001],[6669,6692,9001],[6707,6709,9001],[6720,6723,9001],[6732,6738,9001],[6881,6883,9102],[6931,6933,9001],[7005,7007,9001],[7057,7070,9003],[7074,7082,9001],[7109,7118,9001],[7119,7127,9002],[7374,7376,9001],[7528,7586,9001],[7587,7645,9003],[7692,7696,9001],[7755,7787,9001],[7791,7795,9001],[7799,7801,9001],[7803,7805,9001],[7825,7831,9001],[7845,7859,9001],[8013,8032,9001],[8065,8068,9002],[8518,8529,9003],[8533,8536,9003],[8538,8540,9003],[8677,8679,9001],[8836,8840,9001],[8857,8859,9001],[8908,8910,9001],[8972,9e3,9102],[9053,9057,9102],[9059,9069,9102],[9154,9159,9001],[9205,9218,9001],[20002,20032,9001],[20062,20092,9001],[20135,20138,9001],[20248,20258,9001],[20348,20358,9001],[20436,20440,9001],[20822,20824,9001],[20934,20936,9001],[21035,21037,9001],[21095,21097,9001],[21148,21150,9001],[21413,21423,9001],[21473,21483,9001],[21780,21782,9001],[21896,21899,9001],[22171,22177,9001],[22181,22187,9001],[22191,22197,9001],[22234,22236,9001],[22521,22525,9001],[22991,22994,9001],[23028,23038,9001],[23830,23853,9001],[23866,23872,9001],[23877,23884,9001],[23886,23894,9001],[23946,23948,9001],[24311,24313,9001],[24342,24347,9001],[24370,24374,9084],[24375,24381,9001],[24718,24721,9001],[24817,24821,9001],[24877,24882,9001],[24891,24893,9001],[25391,25395,9001],[25828,25838,9001],[26191,26195,9001],[26391,26393,9001],[26701,26722,9001],[26729,26746,9003],[26748,26760,9003],[26766,26799,9003],[26847,26870,9003],[26891,26899,9001],[26901,26923,9001],[26929,26946,9001],[26948,26978,9001],[26980,26998,9001],[27037,27040,9001],[27205,27232,9001],[27258,27260,9001],[27391,27398,9001],[27561,27564,9001],[27571,27574,9001],[27581,27584,9001],[27591,27594,9001],[28191,28193,9001],[28348,28358,9001],[28402,28432,9001],[28462,28492,9001],[29168,29172,9001],[29187,29195,9001],[29901,29903,9001],[30161,30179,9001],[30491,30494,9001],[30729,30732,9001],[31251,31259,9001],[31265,31268,9001],[31275,31277,9001],[31281,31290,9001],[31466,31469,9001],[31491,31495,9001],[31965,32e3,9001],[32001,32003,9003],[32005,32017,9003],[32019,32028,9003],[32033,32035,9003],[32037,32060,9003],[32064,32067,9003],[32081,32086,9001],[32107,32130,9001],[32133,32158,9001],[32164,32167,9003],[32180,32199,9001],[32201,32260,9001],[32301,32360,9001],[32601,32662,9001],[32664,32667,9003],[32701,32761,9001],[37002,37008,9102],[53001,53004,9001],[53008,53019,9001],[53021,53032,9001],[53034,53037,9001],[53042,53046,9001],[53074,53080,9001],[54001,54004,9001],[54008,54019,9001],[54021,54032,9001],[54042,54046,9001],[54048,54053,9001],[54074,54080,9001],[54098,54101,9001],[102001,102005,9001],[102007,102039,9001],[102042,102045,9001],[102060,102063,9001],[102070,102079,9001],[102096,102099,9001],[102101,102109,9001],[102114,102117,9001],[102132,102138,9001],[102141,102144,9001],[102156,102166,9001],[102173,102179,9001],[102191,102198,9001],[102221,102228,9001],[102231,102233,9001],[102237,102240,9001],[102364,102375,9001],[102389,102398,9003],[102399,102419,9001],[102421,102438,9001],[102445,102447,9003],[102450,102458,9001],[102459,102462,9003],[102470,102489,9001],[102550,102556,9001],[102562,102588,9001],[102629,102640,9003],[102648,102650,9003],[102688,102690,9003],[102696,102700,9003],[102701,102703,9001],[102799,102900,9001],[103166,103168,9002],[103220,103224,9001],[103225,103227,9002],[103232,103237,9001],[103238,103243,9003],[103244,103246,9001],[103247,103249,9003],[103254,103256,9001],[103257,103259,9003],[103264,103266,9001],[103267,103269,9003],[103327,103330,9001],[103344,103347,9001],[103372,103375,9001],[103381,103383,9001],[103384,103386,9002],[103387,103389,9001],[103390,103392,9003],[103397,103399,9001],[103427,103430,9003],[103444,103447,9003],[103476,103478,9001],[103479,103481,9003],[103486,103488,9001],[103489,103491,9003],[103492,103495,9001],[103496,103499,9003],[103539,103543,9001],[103544,103548,9003],[103549,103551,9001],[103552,103554,9002],[103555,103557,9003],[103558,103560,9001],[103571,103573,9001],[103574,103576,9003],[103577,103580,9001],[103581,103583,9003],[103595,103597,9001],[103600,103694,9001],[103696,103698,9001],[103700,103793,9003],[104101,104103,9102],[104126,104131,9102],[104259,104261,9102],[104700,104786,9102],[104900,104975,9102]],nc:[2065,9001,2066,9039,2136,9094,2137,9001,2138,9001,2154,9001,2157,9001,2158,9001,2159,9094,2160,9094,2169,9001,2170,9001,2204,9003,2219,9001,2220,9001,2254,9003,2255,9003,2256,9002,2265,9002,2266,9002,2267,9003,2268,9003,2269,9002,2270,9002,2271,9003,2272,9003,2273,9002,2290,9001,2294,9001,2295,9001,2314,9005,2899,9003,2900,9003,2901,9002,2909,9002,2910,9002,2911,9003,2912,9003,2913,9002,2914,9002,2980,9001,2981,9001,2991,9001,2992,9002,2993,9001,2994,9002,3074,9001,3075,9001,3080,9002,3089,9003,3090,9001,3091,9003,3102,9003,3141,9001,3142,9001,3167,9301,3360,9001,3361,9002,3362,9001,3363,9003,3364,9001,3365,9003,3404,9003,3405,9001,3406,9001,3407,9005,3439,9001,3440,9001,3479,9002,3480,9001,3481,9002,3482,9001,3483,9002,3484,9001,3485,9003,3486,9001,3487,9003,3488,9001,3489,9001,3490,9003,3491,9001,3492,9003,3493,9001,3494,9003,3495,9001,3496,9003,3497,9001,3498,9003,3499,9001,3500,9003,3501,9001,3502,9003,3503,9001,3504,9003,3505,9001,3506,9003,3507,9001,3508,9003,3509,9001,3510,9003,3511,9001,3512,9003,3513,9001,3514,9001,3515,9003,3516,9001,3517,9003,3518,9001,3519,9003,3520,9001,3521,9003,3522,9001,3523,9003,3524,9001,3525,9003,3526,9001,3527,9003,3528,9001,3529,9003,3530,9001,3531,9003,3532,9001,3533,9003,3534,9001,3535,9003,3536,9001,3537,9003,3538,9001,3539,9003,3540,9001,3541,9003,3542,9001,3543,9003,3544,9001,3545,9003,3546,9001,3547,9003,3548,9001,3549,9003,3550,9001,3551,9003,3552,9001,3553,9003,3582,9003,3583,9001,3584,9003,3585,9001,3586,9003,3587,9001,3588,9002,3589,9001,3590,9002,3591,9001,3592,9001,3593,9002,3598,9003,3599,9001,3600,9003,3605,9002,3606,9001,3607,9001,3608,9003,3609,9001,3610,9003,3611,9001,3612,9003,3613,9001,3614,9003,3615,9001,3616,9003,3617,9001,3618,9003,3619,9001,3620,9003,3621,9001,3622,9003,3623,9001,3624,9003,3625,9001,3626,9003,3627,9001,3628,9003,3629,9001,3630,9003,3631,9001,3632,9003,3633,9001,3634,9002,3635,9001,3636,9002,3640,9003,3641,9001,3642,9003,3643,9001,3644,9002,3645,9001,3646,9002,3647,9001,3648,9002,3649,9001,3650,9003,3651,9001,3652,9003,3653,9001,3654,9003,3655,9001,3656,9002,3657,9001,3658,9003,3659,9001,3660,9003,3661,9001,3662,9003,3663,9001,3664,9003,3668,9003,3669,9001,3670,9003,3671,9001,3672,9003,3673,9001,3674,9003,3675,9001,3676,9002,3677,9003,3678,9001,3679,9002,3680,9003,3681,9001,3682,9002,3683,9003,3684,9001,3685,9001,3686,9003,3687,9001,3688,9003,3689,9001,3690,9003,3691,9001,3692,9003,3696,9003,3697,9001,3698,9003,3699,9001,3700,9003,3783,9001,3784,9001,3793,9001,3794,9001,3812,9001,3819,9102,3821,9102,3824,9102,3854,9001,3857,9001,3889,9102,3906,9102,3911,9001,3912,9001,3920,9001,3978,9001,3979,9001,3991,9003,3992,9003,4026,9001,4037,9001,4038,9001,4042,9102,4071,9001,4075,9102,4081,9102,4082,9001,4083,9001,4087,9001,4088,9001,4217,9003,4261,9105,4262,9102,4263,9102,4288,9102,4289,9102,4322,9102,4324,9102,4326,9102,4414,9001,4415,9001,4417,9001,4434,9001,4437,9001,4438,9003,4439,9003,4462,9001,4463,9102,4467,9001,4470,9102,4471,9001,4475,9102,4483,9102,4490,9102,4555,9102,4558,9102,4559,9001,4632,9102,4633,9102,4647,9001,4807,9105,4808,9102,4809,9102,4810,9105,4811,9105,4816,9105,4817,9102,4818,9102,4820,9102,4821,9105,4822,9001,4823,9102,4824,9102,4826,9001,4839,9001,4901,9105,4902,9105,4903,9102,4904,9102,5013,9102,5018,9001,5048,9001,5167,9001,5168,9001,5221,9001,5223,9001,5228,9102,5229,9102,5233,9102,5234,9001,5235,9001,5243,9001,5246,9102,5247,9001,5252,9102,5264,9102,5266,9001,5316,9001,5320,9001,5321,9001,5324,9102,5325,9001,5337,9001,5340,9102,5354,9102,5360,9102,5361,9001,5362,9001,5365,9102,5367,9001,5371,9102,5373,9102,5381,9102,5382,9001,5383,9001,5387,9001,5389,9001,5393,9102,5396,9001,5451,9102,5456,9001,5457,9001,5464,9102,5467,9102,5469,9001,5472,9037,5489,9102,5490,9001,5513,9001,5514,9001,5523,9001,5524,9102,5527,9102,5530,9001,5531,9001,5546,9102,5559,9001,5561,9102,5588,9002,5589,9005,5593,9102,5596,9001,5627,9001,5629,9001,5641,9001,5643,9001,5644,9001,5646,9003,5654,9003,5655,9003,5659,9001,5681,9102,5700,9001,5825,9001,5836,9001,5837,9001,5839,9001,5842,9001,5844,9001,5858,9001,5879,9001,5880,9001,5886,9102,5887,9001,5890,9001,6128,9002,6129,9002,6135,9102,6204,9001,6207,9102,6210,9001,6211,9001,6307,9001,6311,9102,6312,9001,6316,9001,6318,9102,6322,9102,6325,9102,6362,9001,6365,9102,6391,9002,6405,9002,6406,9001,6407,9002,6408,9001,6409,9002,6410,9001,6411,9003,6412,9001,6413,9003,6414,9001,6415,9001,6416,9003,6417,9001,6418,9003,6419,9001,6420,9003,6421,9001,6422,9003,6423,9001,6424,9003,6425,9001,6426,9003,6427,9001,6428,9003,6429,9001,6430,9003,6431,9001,6432,9003,6433,9001,6434,9003,6435,9001,6436,9003,6437,9001,6438,9003,6439,9001,6440,9001,6441,9003,6442,9001,6443,9003,6444,9001,6445,9003,6446,9001,6447,9003,6448,9001,6449,9003,6450,9001,6451,9003,6452,9001,6453,9003,6454,9001,6455,9003,6456,9001,6457,9003,6458,9001,6459,9003,6460,9001,6461,9003,6462,9001,6463,9003,6464,9001,6465,9003,6466,9001,6467,9003,6468,9001,6469,9003,6470,9001,6471,9003,6472,9001,6473,9003,6474,9001,6475,9003,6476,9001,6477,9003,6478,9001,6479,9003,6484,9003,6485,9001,6486,9003,6487,9001,6488,9003,6489,9001,6490,9003,6491,9001,6492,9003,6493,9001,6494,9002,6495,9001,6496,9002,6497,9001,6498,9001,6499,9002,6500,9001,6501,9003,6502,9001,6503,9003,6504,9001,6505,9003,6506,9001,6507,9003,6508,9001,6509,9001,6510,9003,6515,9002,6516,9001,6518,9001,6519,9003,6520,9001,6521,9003,6522,9001,6523,9003,6524,9001,6525,9003,6526,9001,6527,9003,6528,9001,6529,9003,6530,9001,6531,9003,6532,9001,6533,9003,6534,9001,6535,9003,6536,9001,6537,9003,6538,9001,6539,9003,6540,9001,6541,9003,6542,9001,6543,9003,6544,9001,6545,9002,6546,9001,6547,9002,6548,9001,6549,9003,6550,9001,6551,9003,6552,9001,6553,9003,6554,9001,6555,9003,6556,9001,6557,9002,6558,9001,6559,9002,6560,9001,6561,9002,6562,9001,6563,9003,6564,9001,6565,9003,6566,9001,6567,9001,6568,9003,6569,9001,6570,9002,6571,9001,6572,9003,6573,9001,6574,9003,6575,9001,6576,9003,6577,9001,6578,9003,6582,9003,6583,9001,6584,9003,6585,9001,6586,9003,6587,9001,6588,9003,6589,9001,6590,9003,6591,9001,6592,9001,6593,9003,6594,9001,6595,9003,6596,9001,6597,9003,6598,9001,6599,9003,6600,9001,6601,9003,6602,9001,6603,9003,6605,9003,6606,9001,6607,9003,6608,9001,6609,9003,6610,9001,6611,9001,6612,9003,6613,9001,6614,9003,6615,9001,6616,9003,6617,9001,6618,9003,6633,9003,6646,9001,6668,9102,6703,9001,6706,9102,6783,9102,6784,9001,6785,9002,6786,9001,6787,9002,6788,9001,6789,9002,6790,9001,6791,9002,6792,9001,6793,9002,6794,9001,6795,9002,6796,9001,6797,9002,6798,9001,6799,9002,6800,9001,6801,9002,6802,9001,6803,9002,6804,9001,6805,9002,6806,9001,6807,9002,6808,9001,6809,9002,6810,9001,6811,9002,6812,9001,6813,9002,6814,9001,6815,9002,6816,9001,6817,9002,6818,9001,6819,9002,6820,9001,6821,9002,6822,9001,6823,9002,6824,9001,6825,9002,6826,9001,6827,9002,6828,9001,6829,9002,6830,9001,6831,9002,6832,9001,6833,9002,6834,9001,6835,9002,6836,9001,6837,9002,6838,9001,6839,9002,6840,9001,6841,9002,6842,9001,6843,9002,6844,9001,6845,9002,6846,9001,6847,9002,6848,9001,6849,9002,6850,9001,6851,9002,6852,9001,6853,9002,6854,9001,6855,9002,6856,9001,6857,9002,6858,9001,6859,9002,6860,9001,6861,9002,6862,9001,6863,9002,6867,9001,6868,9002,6870,9001,6875,9001,6876,9001,6879,9001,6880,9003,6884,9001,6885,9002,6886,9001,6887,9002,6892,9102,6894,9102,6915,9001,6922,9001,6923,9003,6924,9001,6925,9003,6962,9001,6983,9102,6984,9001,6990,9102,6991,9001,7035,9102,7037,9102,7039,9102,7041,9102,7073,9102,7084,9102,7086,9102,7128,9003,7131,9001,7132,9003,7133,9102,7136,9102,7139,9102,7142,9001,7257,9001,7258,9003,7259,9001,7260,9003,7261,9001,7262,9003,7263,9001,7264,9003,7265,9001,7266,9003,7267,9001,7268,9003,7269,9001,7270,9003,7271,9001,7272,9003,7273,9001,7274,9003,7275,9001,7276,9003,7277,9001,7278,9003,7279,9001,7280,9003,7281,9001,7282,9003,7283,9001,7284,9003,7285,9001,7286,9003,7287,9001,7288,9003,7289,9001,7290,9003,7291,9001,7292,9003,7293,9001,7294,9003,7295,9001,7296,9003,7297,9001,7298,9003,7299,9001,7300,9003,7301,9001,7302,9003,7303,9001,7304,9003,7305,9001,7306,9003,7307,9001,7308,9003,7309,9001,7310,9003,7311,9001,7312,9003,7313,9001,7314,9003,7315,9001,7316,9003,7317,9001,7318,9003,7319,9001,7320,9003,7321,9001,7322,9003,7323,9001,7324,9003,7325,9001,7326,9003,7327,9001,7328,9003,7329,9001,7330,9003,7331,9001,7332,9003,7333,9001,7334,9003,7335,9001,7336,9003,7337,9001,7338,9003,7339,9001,7340,9003,7341,9001,7342,9003,7343,9001,7344,9003,7345,9001,7346,9003,7347,9001,7348,9003,7349,9001,7350,9003,7351,9001,7352,9003,7353,9001,7354,9003,7355,9001,7356,9003,7357,9001,7358,9003,7359,9001,7360,9003,7361,9001,7362,9003,7363,9001,7364,9003,7365,9001,7366,9003,7367,9001,7368,9003,7369,9001,7370,9003,7373,9102,7683,9102,7798,9102,7844,9102,7877,9001,7878,9001,7881,9102,7882,9001,7883,9001,7886,9102,7887,9001,7899,9001,7991,9001,7992,9001,8035,9003,8036,9003,8042,9102,8043,9102,8058,9001,8059,9001,8082,9001,8083,9001,8086,9102,8088,9001,8090,9001,8091,9003,8092,9001,8093,9003,8095,9001,8096,9003,8097,9001,8098,9003,8099,9001,8100,9003,8101,9001,8102,9003,8103,9001,8104,9003,8105,9001,8106,9003,8107,9001,8108,9003,8109,9001,8110,9003,8111,9001,8112,9003,8113,9001,8114,9003,8115,9001,8116,9003,8117,9001,8118,9003,8119,9001,8120,9003,8121,9001,8122,9003,8123,9001,8124,9003,8125,9001,8126,9003,8127,9001,8128,9003,8129,9001,8130,9003,8131,9001,8132,9003,8133,9001,8134,9003,8135,9001,8136,9003,8137,9001,8138,9003,8139,9001,8140,9003,8141,9001,8142,9003,8143,9001,8144,9003,8145,9001,8146,9003,8147,9001,8148,9003,8149,9001,8150,9003,8151,9001,8152,9003,8153,9001,8154,9003,8155,9001,8156,9003,8157,9001,8158,9003,8159,9001,8160,9003,8161,9001,8162,9003,8163,9001,8164,9003,8165,9001,8166,9003,8167,9001,8168,9003,8169,9001,8170,9003,8171,9001,8172,9003,8173,9001,8177,9003,8179,9001,8180,9003,8181,9001,8182,9003,8184,9001,8185,9003,8187,9001,8189,9003,8191,9001,8193,9003,8196,9001,8197,9003,8198,9001,8200,9003,8201,9001,8202,9003,8203,9001,8204,9003,8205,9001,8206,9003,8207,9001,8208,9003,8209,9001,8210,9003,8212,9001,8213,9003,8214,9001,8216,9003,8218,9001,8220,9003,8222,9001,8224,9003,8225,9001,8226,9003,8232,9102,8237,9102,8240,9102,8246,9102,8249,9102,8252,9102,8255,9102,8311,9001,8312,9002,8313,9001,8314,9002,8315,9001,8316,9002,8317,9001,8318,9002,8319,9001,8320,9002,8321,9001,8322,9002,8323,9001,8324,9002,8325,9001,8326,9002,8327,9001,8328,9002,8329,9001,8330,9002,8331,9001,8332,9002,8333,9001,8334,9002,8335,9001,8336,9002,8337,9001,8338,9002,8339,9001,8340,9002,8341,9001,8342,9002,8343,9001,8344,9002,8345,9001,8346,9002,8347,9001,8348,9002,8351,9102,8352,9001,8353,9001,8379,9001,8380,9003,8381,9001,8382,9003,8383,9001,8384,9003,8385,9001,8387,9003,8391,9001,8395,9001,8427,9102,8428,9102,8431,9102,8433,9001,8441,9001,8455,9001,8456,9001,8531,9003,8545,9102,8682,9001,8685,9102,8687,9001,8692,9001,8693,9001,8694,9102,8699,9102,8818,9102,8826,9001,8860,9102,8888,9102,8900,9102,8902,9102,8903,9001,8907,9102,8949,9102,8950,9001,8951,9001,9003,9102,9006,9102,9009,9102,9012,9102,9014,9102,9017,9102,9019,9102,9039,9001,9040,9001,9140,9102,9141,9001,9148,9102,9149,9001,9150,9001,9153,9102,9191,9001,9221,9001,9222,9001,20499,9001,20538,9001,20539,9001,20790,9001,20791,9001,21291,9001,21292,9001,21500,9001,21817,9001,21818,9001,22032,9001,22033,9001,22091,9001,22092,9001,22332,9001,22391,9001,22392,9001,22700,9001,22770,9001,22780,9001,22832,9001,23090,9001,23095,9001,23239,9001,23240,9001,23700,9001,24047,9001,24048,9001,24100,9005,24200,9001,24305,9001,24306,9001,24382,9084,24383,9001,24500,9001,24547,9001,24548,9001,24571,9062,24600,9001,25e3,9001,25231,9001,25884,9001,25932,9001,26237,9001,26331,9001,26332,9001,26591,9001,26592,9001,26632,9001,26692,9001,27120,9001,27200,9001,27291,9040,27292,9040,27429,9001,27493,9001,27500,9001,27700,9001,28232,9001,28600,9001,28991,9001,28992,9001,29101,9001,29220,9001,29221,9001,29333,9001,29635,9001,29636,9001,29701,9001,29738,9001,29739,9001,29849,9001,29850,9001,29871,9042,29872,9041,29873,9001,30200,9039,30339,9001,30340,9001,30791,9001,30792,9001,31028,9001,31121,9001,31154,9001,31170,9001,31171,9001,31279,9001,31370,9001,31528,9001,31529,9001,31600,9001,31700,9001,31838,9001,31839,9001,31901,9001,32030,9003,32031,9003,32061,9001,32062,9001,32098,9001,32099,9003,32100,9001,32104,9001,32161,9001,32766,9001,37202,9102,37203,9102,37206,9102,37207,9102,37218,9102,37221,9102,37225,9105,37240,9102,37241,9102,37243,9102,37245,9102,37249,9102,37257,9102,37260,9102,53048,9001,53049,9001,54034,9001,54090,9001,54091,9001,65061,9003,65062,9003,65161,9001,102041,9003,102064,9085,102068,109030,102069,109031,102093,9001,102094,9001,102118,9003,102120,9003,102121,9003,102122,9001,102150,9001,102168,9001,102204,9001,102212,9001,102213,9001,102215,9001,102216,9001,102217,9003,102218,9001,102219,9003,102220,9003,102247,9001,102299,9001,102306,9001,102319,9001,102328,9001,102329,9001,102359,9001,102360,9001,102440,9001,102448,9001,102464,9003,102465,9003,102491,9001,102492,9001,102498,9001,102499,9001,102525,9003,102526,9003,102528,9003,102529,9003,102589,9003,102598,9001,102599,9003,102600,9003,102604,9003,102661,9003,102662,9003,102664,9003,102665,9003,102705,9003,102720,9003,102721,9003,102726,9003,102727,9003,102733,9003,102761,9003,102766,9003,102974,9003,103228,9001,103229,9001,103230,9003,103231,9003,103250,9001,103251,9003,103252,9001,103253,9003,103260,9001,103261,9001,103262,9003,103263,9003,103270,9001,103271,9001,103272,9003,103273,9003,103274,9001,103275,9001,103276,9003,103277,9003,103278,9001,103279,9001,103280,9003,103281,9003,103282,9001,103283,9001,103284,9003,103285,9003,103286,9001,103287,9003,103288,9001,103289,9003,103290,9001,103291,9003,103292,9001,103293,9001,103294,9003,103295,9003,103296,9001,103297,9001,103298,9003,103299,9003,103300,9001,103307,9001,103313,9001,103319,9001,103322,9001,103323,9001,103332,9001,103335,9001,103338,9001,103340,9001,103351,9001,103358,9001,103370,9001,103376,9003,103377,9001,103378,9001,103379,9003,103380,9003,103393,9001,103394,9001,103395,9003,103396,9003,103400,9003,103407,9003,103413,9003,103419,9003,103422,9003,103423,9003,103432,9003,103435,9003,103438,9003,103440,9003,103451,9003,103458,9003,103470,9003,103472,9001,103473,9002,103474,9001,103475,9003,103482,9001,103483,9003,103484,9001,103485,9003,103500,9001,103501,9003,103502,9001,103503,9001,103504,9002,103505,9002,103506,9001,103507,9001,103508,9003,103509,9003,103510,9001,103511,9001,103512,9003,103513,9003,103514,9001,103515,9003,103516,9001,103517,9003,103518,9001,103519,9003,103520,9001,103521,9002,103522,9001,103523,9001,103524,9003,103525,9003,103526,9001,103527,9003,103561,9003,103562,9003,103563,9001,103564,9001,103565,9003,103566,9003,103567,9001,103568,9001,103569,9003,103570,9003,103585,9003,103586,9001,103587,9003,103588,9002,103589,9001,103590,9003,103591,9002,103592,9001,103593,9003,103594,9002,103695,9003,103846,9001,103946,9003,104009,9102,104017,9102,104018,9102,104022,9102,104024,9102,104027,9102,104047,9102,104050,9102,104105,9102,104106,9102,104109,9102,104112,9102,104113,9102,104134,9102,104135,9102,104138,9102,104139,9105,104140,9105,104808,9102]};u.wr=function(){function c(){}return c.Sy=function(a){c.xp===!1&&c.yt();var r=c.FQ(a);if(r==-1){var o=c.Bx(a);o!=a&&(r=c.Sy(o))}return r==-1&&(o=c.FK(a))!=a&&(r=c.Sy(o)),r},c.FQ=function(a){return c.Fw[a]!==void 0?c.Fw[a]:-1},c.CQ=function(a){c.xp===!1&&c.yt();var r=c.nF(a);if(r==1e38){var o=c.Bx(a);if(o!=a&&(r=c.nF(o)),r==1e38)return 1e-10}return r},c.ZS=function(a){if(c.Is[a]!==void 0)return!0;var r=c.Bx(a);return r!=a&&c.Is[r]!==void 0},c.aT=function(a){if(c.xo[a]!==void 0)return!0;var r=c.Bx(a);return r!=a&&c.xo[r]!==void 0},c.nF=function(a){return c.xp===!1&&c.yt(),c.Is[a]!==void 0?c.Is[a]:c.xo[a]!==void 0?c.xo[a]:1e38},c.FK=function(a){return c.xp===!1&&c.yt(),c.WA[a]!==void 0?c.WA[a]:a},c.Bx=function(a){return c.xp===!1&&c.yt(),c.XA[a]!==void 0?c.XA[a]:a},c.yt=function(){for(var a,r=A,o=0;o<r.pcsid.length;o+=2)c.xo[r.pcsid[o]]=r.pcstol[2*r.pcsid[o+1]+1];for(o=0;o<r.pcsidc.length;o+=1)for(var l=(a=r.pcsidc[o])[0];l<=a[1];l++)c.xo[l]=r.pcstol[2*a[2]+1];for(o=0;o<r.gcsid.length;o+=2)c.Is[r.gcsid[o]]=r.gcstol[2*r.gcsid[o+1]+1];for(o=0;o<r.gcsidc.length;o+=1)for(l=(a=r.gcsidc[o])[0];l<=a[1];l++)c.xo[l]=r.gcstol[2*a[2]+1];for(o=0;o<b.c.length;o+=1)for(l=(a=b.c[o])[0];l<=a[1];l++)c.Fw[l]=a[2];for(o=0;o<b.nc.length;o+=2)c.Fw[b.nc[o]]=b.nc[o+1];for(b=null,o=0;o<r.newtoold.length;o+=2)c.WA[r.newtoold[o+1]]=r.newtoold[o],c.XA[r.newtoold[o]]=r.newtoold[o+1];A=null,c.xp=!0},c.xp=!1,c.Is=[],c.xo=[],c.WA=[],c.XA=[],c.Fw=[],c}()}(V||(V={})),function(u){function A(c){return c.length===0?'""':c[0]=='"'||c[0]=="."||"0"<=c[0]&&"9">=c[0]?c:'"'+c.trim()+'"'}var b=[];u.XC=function(){function c(){}return c.EQ=function(a){try{for(var r=0;r<b.length;r++)if(b[r].wkttext===a)return b[r].unit;for(var o,l=r="",d=!1,p=0;p<a.length;p++){var g=a[p];d===!0?g=='"'?a[p+1]=='"'?r+=g:d=d=!1:r+=g:/[\s]/.test(g)||(g==","?(l=r!==""?l+(A(r)+","):l+",",r=""):g==")"||g=="]"?(l=r!==""?l+(A(r)+"]}"):l+"]}",r=""):g=="("||g=="["?(l+='{ "entity": "'+r.toUpperCase().trim()+'", "values":[',r=""):g=='"'?(d=!0,r=""):r+=g)}o=JSON.parse(l);var v=c.mF(o);if(v===null)return null;for(o=null,g=0;g<v.values.length;g++)if(typeof v.values[g]=="object"&&(v.values[g].entity==="UNIT"||v.values[g].entity==="ANGLEUNIT"||v.values[g].entity==="LENGTHUNIT")){o=v.values[g];break}if(o===null)return null;var w=u.Tc.ZO(v.entity==="GEOGCS"||v.entity==="GEOGCRS"?1:0,o.values[1],o.values[2]);return b.push({wkttext:a,unit:w}),10<b.length&&b.shift(),w}catch{return null}},c.mF=function(a){if(a===null)return null;switch(a.entity){case"GEOGCRS":case"GEOGCS":case"PROJCRS":case"PROJCS":return a}for(var r=[],o=0;o<a.values.length;o++)if(typeof a.values[o]=="object"&&a.values[o].entity!==void 0)switch(a.values[o].entity){case"GEOGCRS":case"GEOGCS":case"PROJCRS":case"PROJCS":return a.values[o];default:r.push(a.values[o])}for(a=0;a<r.length;a++)if((o=c.mF(r[a]))!==null)return o;return null},c.DQ=function(a){var r=-1;if(a!=null&&0<a.length){var o=a.search(/PROJCR?S/);if(0<=o){var l=0;if(0<=(o=a.lastIndexOf("UNIT"))&&0<(o=a.indexOf(",",o+4))){o++;var d=a.indexOf("]",o+1);if(0<d)try{l=parseFloat(a.substring(o,d))}catch{l=0}}0<l&&(r=.001/l)}else if(0<=(o=a.search(/GEOGCR?S/))){var p=0;if(l=0,(o=a.indexOf("SPHEROID",o+6))===-1&&(o=a.indexOf("ELLIPSOID",o+7)),0<o&&0<(o=a.indexOf(",",o+8))){if(o++,0<(d=a.indexOf(",",o+1)))try{p=parseFloat(a.substring(o,d))}catch{p=0}if(0<p&&((o=a.lastIndexOf("ANGLEUNIT",d+1))===-1&&(o=a.lastIndexOf("UNIT",d+1)),0<=o&&0<(o=a.indexOf(",",o+4))&&(o++,0<(d=a.indexOf("]",o+1)))))try{l=parseFloat(a.substring(o,d))}catch{l=0}}0<p&&0<l&&(r=.001/(p*l))}}return r},c}()}(V||(V={})),function(u){var A;(A=u.eL||(u.eL={}))[A.NONE=0]="NONE",A[A.LINEAR=1]="LINEAR",A[A.ANGULAR=2]="ANGULAR",function(c){c[c.enumFloat=0]="enumFloat",c[c.enumDouble=1]="enumDouble",c[c.enumInt32=2]="enumInt32",c[c.enumInt64=3]="enumInt64",c[c.enumInt8=4]="enumInt8",c[c.enumInt16=5]="enumInt16"}(u.QL||(u.QL={})),function(c){c[c.POSITION=0]="POSITION",c[c.Z=1]="Z",c[c.M=2]="M",c[c.ID=3]="ID",c[c.NORMAL=4]="NORMAL",c[c.TEXTURE1D=5]="TEXTURE1D",c[c.TEXTURE2D=6]="TEXTURE2D",c[c.TEXTURE3D=7]="TEXTURE3D",c[c.ID2=8]="ID2",c[c.MAXSEMANTICS=10]="MAXSEMANTICS"}(u.Ih||(u.Ih={}));var b=function(){function c(a,r){if(this.Vs=this.Ae=null,this.Oq=this.Aa=0,this.uh=this.bg=null,this.wl=0,r!==void 0){for(this.Aa=r.Aa,this.Oq=r.Oq,this.bg=r.bg.slice(0),this.uh=r.uh.slice(0),this.wl=r.wl,this.Vs=[],a=r=0;a<this.Aa;a++)this.Vs[a]=r,r+=c.Va(this.bg[a]);for(this.Oq=r,this.Ae=[],a=0;a<this.Aa;a++){r=c.Va(this.kd(a));for(var o=c.se(this.kd(a)),l=0;l<r;l++)this.Ae[this.Vs[a]+l]=o}}else this.Oq=this.Aa=0}return c.prototype.kd=function(a){if(0>a||a>this.Aa)throw u.i.N();return this.bg[a]},c.prototype.Pf=function(a){return this.uh[a]},c.lz=function(a){return c.JM[a]},c.Tp=function(a){return c.SM[a]},c.Va=function(a){return c.rM[a]},c.prototype.hasAttribute=function(a){return 0<=this.uh[a]},c.prototype.iG=function(){return this.hasAttribute(1)},c.se=function(a){return c.eD[a]},c.prototype.LR=function(a){return this.Vs[a]},c.DG=function(a,r){return c.eD[a]===r},c.prototype.Nb=function(a){return this===a},c.prototype.An=function(){for(var a=u.O.Th(this.bg[0]),r=1;r<this.Aa;r++)a=u.O.Th(this.bg[r],a);return a},c.prototype.$j=function(a){return this.Vs[a]},c.prototype.cc=function(){return this.wl},c.prototype.Ed=function(a){return this.bg[a]},c.eD=[0,0,NaN,0,0,0,0,0,0],c.JM=[1,1,1,0,2,1,1,1,0],c.SM=[1,1,1,2,0,0,0,0,2],c.rM=[2,1,1,1,3,1,2,3,2],c}();u.ra=b}(V||(V={})),function(u){function A(d,p,g){var v=p-(d=new l(d)).e,w=d.c;for(w.length>++p&&b(d,v,l.eu),w[0]?g?v=p:(w=d.c,v=d.e+v+1):++v;w.length<v;w.push(0));return v=d.e,g===1||g&&(p<=v||v<=a)?(0>d.Bd&&w[0]?"-":"")+(1<w.length?w[0]+"."+w.join("").slice(1):w[0])+(0>v?"e":"e+")+v:d.toString()}function b(d,p,g,v){var w=d.c,T=d.e+p+1;if(g===1?v=5<=w[T]:g===2?v=5<w[T]||w[T]==5&&(v||0>T||w[T+1]!==void 0||1&w[T-1]):g===3?v=v||w[T]!==void 0||0>T:(v=!1,g!==0&&c("!Big.RM!")),1>T||!w[0])v?(d.e=-p,d.c=[1]):d.c=[d.e=0];else{if(w.length=T--,v)for(;9<++w[T];)w[T]=0,T--||(++d.e,w.unshift(1));for(T=w.length;!w[--T];w.pop());}return d}function c(d){throw(d=Error(d)).name="BigError",d}var a=-7,r=21,o=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,l=function(){function d(p){if(p instanceof d)this.Bd=p.Bd,this.e=p.e,this.c=p.c.slice();else{var g,v,w;for(p===0&&0>1/p?p="-0":o.test(p+="")||c(NaN),this.Bd=p.charAt(0)=="-"?(p=p.slice(1),-1):1,-1<(g=p.indexOf("."))&&(p=p.replace(".","")),0<(v=p.search(/e/i))?(0>g&&(g=v),g+=+p.slice(v+1),p=p.substring(0,v)):0>g&&(g=p.length),v=0;p.charAt(v)=="0";v++);if(v==(w=p.length))this.c=[this.e=0];else{for(;p.charAt(--w)=="0";);for(this.e=g-v-1,this.c=[],g=0;v<=w;this.c[g++]=+p.charAt(v++));}}}return d.prototype.abs=function(){var p=new d(this);return p.Bd=1,p},d.prototype.cmp=function(p){var g=this.c,v=(p=new d(p)).c,w=this.Bd,T=p.Bd,$=this.e,C=p.e;if(!g[0]||!v[0])return g[0]?w:v[0]?-T:0;if(w!=T)return w;if(p=0>w,$!=C)return $>(C^p)?1:-1;for(w=-1,T=($=g.length)<(C=v.length)?$:C;++w<T;)if(g[w]!=v[w])return g[w]>(v[w]^p)?1:-1;return $==C?0:$>(C^p)?1:-1},d.prototype.jm=function(p){var g=this.c,v=(p=new d(p)).c,w=this.Bd==p.Bd?1:-1,T=d.rr;if((T!==~~T||0>T||1e6<T)&&c("!Big.DP!"),!g[0]||!v[0])return g[0]==v[0]&&c(NaN),v[0]||c(w/0),new d(0*w);var $,C,O=v.slice(),N=$=v.length,R=g.length,F=g.slice(0,$),G=F.length,z=p,B=z.c=[],q=0,K=T+(z.e=this.e-p.e)+1;for(z.Bd=w,w=0>K?0:K,O.unshift(0);G++<$;F.push(0));do{for(C=0;10>C;C++){if($!=(G=F.length))var ee=$>G?1:-1;else{var oe=-1;for(ee=0;++oe<$;)if(v[oe]!=F[oe]){ee=v[oe]>F[oe]?1:-1;break}}if(!(0>ee))break;for(p=G==$?v:O;G;){if(F[--G]<p[G]){for(oe=G;oe&&!F[--oe];F[oe]=9);--F[oe],F[G]+=10}F[G]-=p[G]}for(;!F[0];F.shift());}B[q++]=ee?C:++C,F[0]&&ee?F[G]=g[N]||0:F=[g[N]]}while((N++<R||F[0]!==void 0)&&w--);return B[0]||q==1||(B.shift(),z.e--),q>K&&b(z,T,d.eu,F[0]!==void 0),z},d.prototype.fS=function(){return 0<this.cmp(0)},d.prototype.nT=function(){return 0>this.cmp(0)},d.prototype.jt=function(p){var g,v=this.Bd,w=(p=new d(p)).Bd;if(v!=w)return p.Bd=-w,this.tI(p);var T=this.c.slice(),$=this.e,C=p.c,O=p.e;if(!T[0]||!C[0])return C[0]?(p.Bd=-w,p):new d(T[0]?this:0);if(v=$-O){for((g=0>v)?(v=-v,$=T):(O=$,$=C),$.reverse(),w=v;w--;$.push(0));$.reverse()}else for($=((g=T.length<C.length)?T:C).length,v=w=0;w<$;w++)if(T[w]!=C[w]){g=T[w]<C[w];break}if(g&&($=T,T=C,C=$,p.Bd=-p.Bd),0<(w=($=C.length)-(g=T.length)))for(;w--;T[g++]=0);for(w=g;$>v;){if(T[--$]<C[$]){for(g=$;g&&!T[--g];T[g]=9);--T[g],T[$]+=10}T[$]-=C[$]}for(;T[--w]==0;T.pop());for(;T[0]==0;)T.shift(),--O;return T[0]||(p.Bd=1,T=[O=0]),p.c=T,p.e=O,p},d.prototype.tI=function(p){var g=this.Bd,v=(p=new d(p)).Bd;if(g!=v)return p.Bd=-v,this.jt(p);v=this.e;var w=this.c,T=p.e,$=p.c;if(!w[0]||!$[0])return $[0]?p:new d(w[0]?this:0*g);if(w=w.slice(),g=v-T){for(0<g?(T=v,v=$):(g=-g,v=w),v.reverse();g--;v.push(0));v.reverse()}for(0>w.length-$.length&&(v=$,$=w,w=v),g=$.length,v=0;g;)v=(w[--g]=w[g]+$[g]+v)/10|0,w[g]%=10;for(v&&(w.unshift(v),++T),g=w.length;w[--g]==0;w.pop());return p.c=w,p.e=T,p},d.prototype.pow=function(p){var g=this,v=new d(1),w=v,T=0>p;for((p!==~~p||-1e6>p||1e6<p)&&c("!pow!"),p=T?-p:p;1&p&&(w=w.lr(g)),p>>=1;)g=g.lr(g);return T?v.jm(w):w},d.prototype.round=function(p,g){var v=this;return p==null?p=0:(p!==~~p||0>p||1e6<p)&&c("!round!"),b(v=new d(v),p,g??d.eu),v},d.prototype.sqrt=function(){var p=this.c,g=this.Bd,v=this.e,w=new d("0.5");if(!p[0])return new d(this);0>g&&c(NaN),(g=Math.sqrt(this.toString()))==0||g==1/0?((g=p.join("")).length+v&1||(g+="0"),(p=new d(Math.sqrt(g).toString())).e=((v+1)/2|0)-(0>v||1&v)):p=new d(g.toString()),g=p.e+(d.rr+=4);do v=p,p=w.lr(v.tI(this.jm(v)));while(v.c.slice(0,g).join("")!==p.c.slice(0,g).join(""));return b(p,d.rr-=4,d.eu),p},d.prototype.lr=function(p){var g=this.c,v=(p=new d(p)).c,w=g.length,T=v.length,$=this.e,C=p.e;if(p.Bd=this.Bd==p.Bd?1:-1,!g[0]||!v[0])return new d(0*p.Bd);if(p.e=$+C,w<T){var O=g;g=v,v=O,C=w,w=T,T=C}for(O=Array(C=w+T);C--;O[C]=0);for($=T;$--;){for(T=0,C=w+$;C>$;)T=O[C]+v[$]*g[C-$-1]+T,O[C--]=T%10,T=T/10|0;O[C]=(O[C]+T)%10}for(T&&++p.e,O[0]||O.shift(),$=O.length;!O[--$];O.pop());return p.c=O,p},d.prototype.toString=function(){var p=this.e,g=this.c.join(""),v=g.length;if(p<=a||p>=r)g=g.charAt(0)+(1<v?"."+g.slice(1):"")+(0>p?"e":"e+")+p;else if(0>p){for(;++p;g="0"+g);g="0."+g}else if(0<p)if(++p>v)for(p-=v;p--;g+="0");else p<v&&(g=g.slice(0,p)+"."+g.slice(p));else 1<v&&(g=g.charAt(0)+"."+g.slice(1));return 0>this.Bd&&this.c[0]?"-"+g:g},d.prototype.toExponential=function(p){return p==null?p=this.c.length-1:(p!==~~p||0>p||1e6<p)&&c("!toExp!"),A(this,p,1)},d.prototype.toFixed=function(p){var g=a,v=r;if(a=-(r=1/0),p==null)var w=this.toString();else p===~~p&&0<=p&&1e6>=p&&(w=A(this,this.e+p),0>this.Bd&&this.c[0]&&0>w.indexOf("-")&&(w="-"+w));return a=g,r=v,w||c("!toFix!"),w},d.prototype.toPrecision=function(p){return p==null?this.toString():((p!==~~p||1>p||1e6<p)&&c("!toPre!"),A(this,p-1,2))},d.rr=20,d.eu=1,d}();u.hp=l}(V||(V={})),function(u){var A=function(){function b(c){this.lf=c}return b.prototype.nr=function(c,a,r){var o=new u.h,l=new u.h,d=this.lf;r.Vd(c,a,function(p,g){return d.tc(2*p,o),d.tc(2*g,l),o.compare(l)})},b.prototype.$p=function(c){return this.lf.read(2*c+1)},b}();u.pi=function(){function b(){}return b.aq=function(c){if(c.B())return!1;var a=c.getType();return a==1736?c.Ke()!=0:a==1607?(a=[!1],b.sE(c,!0,a),a[0]):!(a!=197&&(!u.aa.yd(a)||c.BG()))},b.gm=function(c){var a=c.getType();if(a==1736)return a=new u.Ta(c.description),c.B()||c.dD(a),a;if(a==1607)return b.sE(c,!1,null);if(a==197)return a=new u.Ta(c.description),c.B()||a.ad(c,!1),a;if(u.aa.yd(a)){if(a=new u.de(c.description),!c.B()&&!c.BG()){var r=new u.Sa;c.To(r),a.add(r),c.Po(r),a.add(r)}return a}if(u.aa.Rn(a))return null;throw u.i.N()},b.sE=function(c,a,r){r!=null&&(r[0]=!1);var o=null;if(a||(o=new u.de(c.description)),!c.B()){var l=new u.ia(0);l.Jb(2*c.da());for(var d=0,p=c.da();d<p;d++)if(0<c.Ja(d)&&!c.Nn(d)){var g=c.Ba(d);l.add(g),g=c.Vc(d)-1,l.add(g)}if(0<l.size){p=new u.Xt,d=c.ub(0),p.sort(l,0,l.size,new A(d)),p=new u.h,d.tc(2*l.get(0),p),g=0;for(var v=1,w=new u.Sa,T=new u.h,$=1,C=l.size;$<C;$++)if(d.tc(2*l.get($),T),T.qb(p))l.get(g)>l.get($)?(l.set(g,2147483647),g=$):l.set($,2147483647),v++;else{if(1&v){if(a)return r!=null&&(r[0]=!0),null}else l.set(g,2147483647);p.L(T),g=$,v=1}if(1&v){if(a)return r!=null&&(r[0]=!0),null}else l.set(g,2147483647);if(!a)for(l.Vd(0,l.size,function(O,N){return O-N}),$=0,C=l.size;$<C&&l.get($)!=2147483647;$++)c.ve(l.get($),w),o.add(w)}}return a?null:o},b}()}(V||(V={})),function(u){var A=function(){function b(){this.yf=new u.ia(0),this.ys=new u.ia(0),this.EH=1,this.Es=NaN}return b.prototype.sort=function(c,a,r,o){if(32>r-a)o.nr(a,r,c);else{var l=!0;try{for(var d=1/0,p=-1/0,g=a;g<r;g++){var v=o.$p(c.get(g));v<d&&(d=v),v>p&&(p=v)}if(this.reset(r-a,d,p,r-a)){for(g=a;g<r;g++){var w=c.get(g);v=o.$p(w);var T=this.zF(v);this.yf.set(T,this.yf.get(T)+1),this.ys.write(g-a,w)}var $=this.yf.get(0);this.yf.set(0,0),g=1;for(var C=this.yf.size;g<C;g++){var O=this.yf.get(g);this.yf.set(g,$),$+=O}for(g=a;g<r;g++){w=this.ys.read(g-a),v=o.$p(w),T=this.zF(v);var N=this.yf.get(T);c.set(N+a,w),this.yf.set(T,N+1)}l=!1}}catch{this.yf.resize(0),this.ys.resize(0)}if(l)o.nr(a,r,c);else{for(g=r=0,C=this.yf.size;g<C;g++)l=r,(r=this.yf.get(g))>l&&o.nr(a+l,a+r,c);100<this.yf.size&&(this.yf.resize(0),this.ys.resize(0))}}},b.prototype.reset=function(c,a,r,o){return!(2>c||r==a)&&(c=Math.min(b.hL,c),this.yf.Jb(c),this.yf.resize(c),this.yf.Wj(0,0,this.yf.size),this.EH=a,this.ys.resize(o),this.Es=(r-a)/(c-1),!0)},b.prototype.zF=function(c){return u.O.truncate((c-this.EH)/this.Es)},b.hL=65536,b}();u.Xt=A}(V||(V={})),function(u){var A,b;(b=A||(A={}))[b.enum_line=1]="enum_line",b[b.enum_arc=2]="enum_arc",b[b.enum_dummy=4]="enum_dummy",b[b.enum_concave_dip=8]="enum_concave_dip",b[b.enum_connection=3]="enum_connection";var c=function(){function d(){}return d.Qu=function(p,g,v,w,T,$){var C=new d;return C.Im=new u.h,C.Vm=new u.h,C.aw=new u.h,C.Im.L(p),C.Vm.L(g),C.aw.L(v),C.Co=w,C.qh=T,C.sh=$,C},d.construct=function(p,g,v,w){var T=new d;return T.Im=new u.h,T.Vm=new u.h,T.aw=new u.h,T.Im.L(p),T.Vm.L(g),T.aw.Rc(),T.Co=4,T.qh=v,T.sh=w,T},d}(),a=function(){function d(p,g,v,w,T,$){this.Yv=null,this.ya=0,this.EA=p,this.bI=this.$H=0,this.Ka=g,this.Mj=v,this.vk=w,this.Dq=T,this.Ub=$}return d.prototype.next=function(){for(var p=new u.Sa;;){if(this.ya==this.EA.I())return null;if(this.EA.ve(this.ya,p),this.ya++,!p.B())break}var g=!1;if(this.Yv==null&&(this.$H=p.Lg(),this.bI=p.ih(),this.Yv=l.buffer(p,this.Ka,this.Mj,this.vk,this.Dq,this.Ub),g=!0),this.ya<this.EA.I()){var v=new u.Da;this.Yv.copyTo(v)}else v=this.Yv;if(!g){g=new u.Dd;var w=p.Lg()-this.$H;p=p.ih()-this.bI,g.gg(w,p),v.Oc(g)}return v},d.prototype.La=function(){return 0},d.prototype.qe=function(){},d}(),r=function(){function d(p,g){this.Wa=p,this.ya=0,this.oq=g}return d.prototype.next=function(){var p=this.Wa.X;if(this.ya<p.da()){var g=this.ya;if(this.ya++,!p.Nn(g))for(var v=p.Na(p.Vc(g)-1);this.ya<p.da();){var w=p.Na(p.Ba(this.ya));if(p.Nn(this.ya)||w!=v)break;v=p.Na(p.Vc(this.ya)-1),this.ya++}if(this.ya-g==1)return this.Wa.kE(this.Wa.X,g,this.oq);for((v=new u.Ta(this.Wa.X.description)).addPath(this.Wa.X,g,!0),g+=1;g<this.ya;g++)v.Dr(this.Wa.X,g,0,p.rv(g),!1);return this.Wa.kE(v,0,this.oq)}return null},d.prototype.La=function(){return 0},d.prototype.qe=function(){},d}(),o=function(){function d(p){this.Wa=p,this.ya=0}return d.prototype.next=function(){var p=this.Wa.X;if(this.ya<p.da()){var g=this.ya;for(p.Ir(this.ya),this.ya++;this.ya<p.da()&&!(0<p.Ir(this.ya));)this.ya++;return g==0&&this.ya==p.da()?this.Wa.py(p,0,p.da()):this.Wa.py(p,g,this.ya)}return null},d.prototype.La=function(){return 0},d.prototype.qe=function(){},d}(),l=function(){function d(p){this.Ks=this.lw=this.Ls=this.Id=null,this.Zd=[],this.Ub=p,this.rb=this.Kv=this.JT=this.Ka=this.tA=this.ct=this.qa=0,this.oA=this.vk=-1,this.oq=!0}return d.buffer=function(p,g,v,w,T,$){if(p==null||0>w)throw u.i.N();if(p.B())return new u.Da(p.description);var C=new u.l;return p.xc(C),0<g&&C.W(g,g),($=new d($)).Mj=v,$.X=p,$.qa=u.ta.Wd(v,C,!0),$.ct=u.ta.Wd(null,C,!0),$.Ka=g,$.JT=p.getType(),0>=T&&(T=96),$.rb=Math.abs($.Ka),$.Kv=$.rb!=0?1/$.rb:0,isNaN(w)||w==0?w=1e-5*$.rb:w>.5*$.rb&&(w=.5*$.rb),12>T&&(T=12),(p=Math.abs(g)*(1-Math.cos(Math.PI/T)))>w?w=p:(p=Math.PI/Math.acos(1-w/Math.abs(g)))<T-1&&12>(T=u.O.truncate(p))&&(T=12,w=Math.abs(g)*(1-Math.cos(Math.PI/T))),$.vk=w,$.Dq=T,$.tA=Math.min($.ct,.25*w),$.lE()},d.prototype.cv=function(){if(this.Id==null)this.Id=[];else if(this.Id.length!==0)return;var p=this.qE();p=u.O.truncate((p+3)/4);var g=.5*Math.PI/p;this.oA=g;for(var v=0;v<4*p;v++)this.Id.push(null);var w=Math.cos(g);g=Math.sin(g);var T=u.h.construct(0,1);for(v=0;v<p;v++)this.Id[v+0*p]=u.h.construct(T.y,-T.x),this.Id[v+1*p]=u.h.construct(-T.x,-T.y),this.Id[v+2*p]=u.h.construct(-T.y,T.x),this.Id[v+3*p]=T,(T=u.h.construct(T.x,T.y)).Bt(w,g)},d.prototype.lE=function(){var p=this.X.getType();if(u.aa.yd(p))return(p=new u.Ta(this.X.description)).oc(this.X,!0),this.X=p,this.lE();if(this.Ka<=this.qa){if(!u.aa.US(p))return new u.Da(this.X.description);if(0>=this.Ka&&(p=new u.l,this.X.A(p),p.R()<=2*-this.Ka||p.ca()<=2*this.Ka))return new u.Da(this.X.description)}switch(this.X.getType()){case 33:return this.PN();case 550:return this.ON();case 1607:return this.RN();case 1736:return this.QN();case 197:return this.LN();default:throw u.i.Qa()}},d.prototype.RN=function(){if(this.EG(this.X)){var p=new u.Sa;this.X.ve(0,p);var g=new u.l;return this.X.A(g),p.Cb(g.sf()),this.Gu(p)}return this.X=this.WV(this.X),p=new r(this,this.oq),u.Gh.local().V(p,this.Mj,this.Ub).next()},d.prototype.QN=function(){if(this.Ka==0)return this.X;var p=u.Yl.local();if(this.cv(),this.X=p.V(this.X,null,!1,this.Ub),0>this.Ka){var g=this.X;return g=this.py(g,0,g.da()),p.V(g,this.Mj,!1,this.Ub)}return this.EG(this.X)?(p=new u.Sa,this.X.ve(0,p),g=new u.l,this.X.A(g),p.Cb(g.sf()),this.Gu(p)):(p=new o(this),u.Gh.local().V(p,this.Mj,this.Ub).next())},d.prototype.py=function(p,g,v){for(var w=new u.Da(p.description);g<v;g++)if(!(1>p.Ja(g))){var T=p.Ir(g),$=new u.l;if(p.Rj(g,$),0<this.Ka){if(0<T)if(this.FG(p,g))T=new u.Sa,p.ve(p.Ba(g),T),T.Cb($.sf()),this.yu(w,T);else{var C=T=new u.Ta(p.description);C=u.Zt.JG(this.X,g)||this.zn(this.X,g,C,!0,1)==2?this.jE(p,g):this.yn(T),w.add(C,!1)}else if(!($.R()+this.qa<=2*this.rb||$.ca()+this.qa<=2*this.rb||(C=T=new u.Ta(p.description),this.zn(this.X,g,C,!0,1),T.B()))){var O=new u.l;for(O.K($),O.W(this.rb,this.rb),C.tp(O),$=1,T=(C=this.yn(T)).da();$<T;$++)w.addPath(C,$,!0)}}else if(0<T){if(!($.R()+this.qa<=2*this.rb||$.ca()+this.qa<=2*this.rb||(C=T=new u.Ta(p.description),this.zn(this.X,g,C,!0,-1),T.B())))for(O=new u.l,C.xc(O),O.W(this.rb,this.rb),C.tp(O),$=1,T=(C=this.yn(T)).da();$<T;$++)w.addPath(C,$,!0)}else for(C=T=new u.Ta(p.description),this.zn(this.X,g,C,!0,-1),$=0,T=(C=this.yn(T)).da();$<T;$++)w.addPath(C,$,!0)}if(0<this.Ka)return 1<w.da()?w=this.yn(w):d.kx(w);if(p=new u.l,w.xc(p),w.B())return d.kx(w);for(p.W(this.rb,this.rb),w.tp(p),w=this.yn(w),p=new u.Da(w.description),$=1,T=w.da();$<T;$++)p.addPath(w,$,!1);return d.kx(p)},d.prototype.PN=function(){return this.Gu(this.X)},d.prototype.Gu=function(p){var g=new u.Da(this.X.description);return this.yu(g,p),this.sX(g)},d.prototype.ON=function(){var p=new a(this.X,this.Ka,this.Mj,this.vk,this.Dq,this.Ub);return u.Gh.local().V(p,this.Mj,this.Ub).next()},d.prototype.LN=function(){var p=new u.Da(this.X.description);if(0>=this.Ka){if(this.Ka==0)p.ad(this.X,!1);else{var g=new u.Fh;this.X.bn(g),g.W(this.Ka,this.Ka),p.ad(g,!1)}return p}return p.ad(this.X,!1),this.X=p,this.jE(p,0)},d.prototype.jE=function(p,g){this.cv();var v=new u.Da(p.description),w=new u.h,T=new u.h,$=new u.h,C=new u.h,O=new u.h,N=new u.h,R=new u.h,F=new u.h,G=p.Ja(g),z=p.Ba(g),B=0;for(g=p.Ja(g);B<g;B++){if(p.D(z+B,T),p.D(z+(B+1)%G,C),p.D(z+(B+2)%G,N),R.uc(C,T),R.length()==0||(R.Hv(),R.normalize(),R.scale(this.rb),w.add(R,T),$.add(R,C),B==0?v.Lt(w):v.Ci(w),v.Ci($),F.uc(N,C),F.length()==0))throw u.i.Qa();F.Hv(),F.normalize(),F.scale(this.rb),O.add(F,C),this.GD(v,C,$,O,!1)}return d.kx(v)},d.prototype.kE=function(p,g,v){if(this.cv(),1>p.Ja(g))return null;if(this.FG(p,g)&&0<this.Ka){v=new u.Sa,p.ve(p.Ba(g),v);var w=new u.l;return p.Rj(g,w),v.Cb(w.sf()),this.Gu(v)}if(w=new u.Ta(p.description),p.Nn(g))this.zn(p,g,w,v,1),this.zn(p,g,w,v,-1);else{var T=new u.Ta(p.description);T.addPath(p,g,!1),T.Dr(p,g,0,p.rv(g),!1),this.zn(T,0,w,v,1)}return this.yn(w)},d.prototype.Xq=function(){if(this.Ys++,this.Ys%1024==0&&this.Ub!=null&&!this.Ub.progress(-1,-1))throw u.i.fu("user_canceled")},d.prototype.yn=function(p){return u.Fg.Mk(p,this.ct,!0,!0,this.Ub)},d.prototype.qE=function(){if(this.vk==0)return this.Dq;var p=1-this.vk*Math.abs(this.Kv);return 4>(p=-1>p?4:2*Math.PI/Math.acos(p)+.5)?p=4:p>this.Dq&&(p=this.Dq),u.O.truncate(p)},d.prototype.GD=function(p,g,v,w,T){this.cv();var $=new u.h;$.uc(v,g),$.scale(this.Kv);var C=new u.h;C.uc(w,g),C.scale(this.Kv),0>($=Math.atan2($.y,$.x)/this.oA)&&($=this.Id.length+$),$=this.Id.length-$,0>(C=Math.atan2(C.y,C.x)/this.oA)&&(C=this.Id.length+C),(C=this.Id.length-C)<$&&(C+=this.Id.length);var O=u.O.truncate(C);C=u.O.truncate(Math.ceil($)),($=new u.h).L(this.Id[C%this.Id.length]),$.Ct(this.rb,g);var N=10*this.qa;for($.sub(v),$.length()<N&&(C+=1),$.L(this.Id[O%this.Id.length]),$.Ct(this.rb,g),$.sub(w),$.length()<N&&--O,v=O-C,v++,O=0,C%=this.Id.length;O<v;O++,C=(C+1)%this.Id.length)$.L(this.Id[C]),$.Ct(this.rb,g),p.Ci($),this.Xq();T&&p.Ci(w)},d.prototype.zn=function(p,g,v,w,T){var $=new u.gd,C=$.mN(p,g);if($.Gp(this.tA,!1,!1),2>$.I(C))return 0>T||(T=p,$=new u.Sa,T.ve(T.Ba(g),$),this.yu(v,$)),1;var O=$.Na($.Xa($.Ob(C))),N=new u.Dd;if(N.gg(-O.x,-O.y),$.Oc(N),w&&(this.tQ($,C,T),2>$.I(C)))return 0>T||(T=p,$=new u.Sa,T.ve(T.Ba(g),$),this.yu(v,$)),1;this.Zd.length=0;var R=$.Ob(C);g=$.Xa(R);var F=T==1?$.Ma(g):$.U(g);p=T==1?$.U(g):$.Ma(g);var G=!0;w=new u.h,C=new u.h;var z=new u.h,B=new u.h,q=new u.h,K=new u.h,ee=new u.h,oe=new u.h,ue=new u.h,we=new u.h,me=this.rb;R=$.Ja(R);for(var Re=0;Re<R;Re++)$.D(p,C),G&&($.D(g,w),$.D(F,z),oe.uc(w,z),oe.normalize(),we.MG(oe),we.scale(me),B.add(we,w)),ee.uc(C,w),ee.normalize(),ue.MG(ee),ue.scale(me),q.add(w,ue),F=oe.wi(ee),G=oe.Qh(ee),0>F||0>G&&F==0?this.Zd.push(c.Qu(B,q,w,2,this.Zd.length+1,this.Zd.length-1)):B.qb(q)||(this.Zd.push(c.construct(B,w,this.Zd.length+1,this.Zd.length-1,"dummy")),this.Zd.push(c.construct(w,q,this.Zd.length+1,this.Zd.length-1,"dummy"))),K.add(C,ue),this.Zd.push(c.Qu(q,K,w,1,this.Zd.length+1,this.Zd.length-1)),B.L(K),we.L(ue),z.L(w),w.L(C),oe.L(ee),F=g,g=p,G=!1,p=T==1?$.U(g):$.Ma(g);return this.Zd[this.Zd.length-1].qh=0,this.Zd[0].sh=this.Zd.length-1,this.YV(v),N.gg(O.x,O.y),v.YD(N,v.da()-1),1},d.prototype.YV=function(p){for(var g=this.zO(),v=!0,w=g+1,T=g;w!=g;T=w){var $=this.Zd[T];w=$.qh!=-1?$.qh:(T+1)%this.Zd.length,$.Co!=0&&(v&&p.Lt($.Im),$.Co==2?this.GD(p,$.aw,$.Im,$.Vm,!0):p.Ci($.Vm),v=!1)}},d.prototype.zO=function(){this.Ks==null&&(this.Ks=[null,null,null,null,null,null,null,null,null]);for(var p=0,g=0,v=this.Zd.length;g<v;){var w=this.Zd[g];if(3&w.Co){p=g;break}g=w.qh}for(v=p+1,g=p;v!=p;g=v){v=(w=this.Zd[g]).qh;for(var T=1,$=null;v!=g&&!(3&($=this.Zd[v]).Co);)v=$.qh,T++;T!=1&&(w.Co&$.Co)==1&&(this.Ls==null&&(this.Ls=new u.yb,this.lw=new u.yb),this.Ls.Dc(w.Im),this.Ls.Qc(w.Vm),this.lw.Dc($.Im),this.lw.Qc($.Vm),this.Ls.Ea(this.lw,this.Ks,null,null,this.ct)==1&&(w.Vm.L(this.Ks[0]),$.Im.L(this.Ks[0]),w.qh=v,$.sh=g))}return p},d.prototype.Fv=function(p,g,v){var w=new u.h;if(w.uc(v,p),v=w.length(),0<(v=this.rb*this.rb-v*v*.25)){v=Math.sqrt(v),w.normalize(),w.ar();var T=new u.h;if(T.uc(g,p),T.Qh(w)+v>=this.rb)return!0}return!1},d.prototype.tQ=function(p,g,v){for(var w=0;1>w;w++){var T=!1,$=p.Ob(g),C=p.Ja($);if(C==0)break;var O=C;if(3>C)break;!p.dc($)&&(O=C-1),$=p.Xa($),C=0<v?p.Ma($):p.U($);for(var N=0<v?p.U($):p.Ma($),R=C,F=!0,G=new u.h,z=new u.h,B=new u.h,q=new u.h,K=new u.h,ee=u.h.construct(0,0),oe=new u.h,ue=new u.h,we=new u.h,me=new u.h,Re=this.rb,fe=0,Ye=0;Ye<O&&(p.D(N,z),F&&(p.D($,G),p.D(C,B),R=C),ue.uc(G,B),ue.normalize(),oe.uc(z,G),oe.normalize(),R!=N);){var Ve=ue.wi(oe),ft=ue.Qh(oe),jt=!0;if(0>Ve||0>ft&&Ve==0||!this.Fv(B,G,z)||(ee.L(z),jt=!1,++fe,T=!0),jt){if(0<fe)for(;(Ve=0<v?p.Ma(R):p.U(R))!=$;){if(p.D(Ve,q),!this.Fv(q,B,ee)){Ve!=N&&this.Fv(q,B,z)&&this.Fv(q,G,z)&&(B.L(q),R=Ve,jt=!1,++fe);break}B.L(q),R=Ve,jt=!1,++fe}if(!jt)continue;if(0<fe){for(R=0<v?p.Ma(C):p.U(C),F=1;F<fe;F++)jt=0<v?p.Ma(R):p.U(R),p.pd(R,!0),R=jt;we.uc(G,B),fe=Re*Re-(fe=we.length())*fe*.25,Re-(fe=Math.sqrt(fe))>.5*this.vk?(K.add(B,G),K.scale(.5),we.normalize(),we.ar(),me.L(we),me.scale(Re-fe),K.add(me),p.mf(C,K)):p.pd(C,!0),fe=0}B.L(G),R=$}G.L(z),C=$,$=N,N=0<v?p.U($):p.Ma($),Ye++,F=!1}if(0<fe){for(R=0<v?p.Ma(C):p.U(C),F=1;F<fe;F++)jt=0<v?p.Ma(R):p.U(R),p.pd(R,!0),R=jt;K.add(B,G),K.scale(.5),we.uc(G,B),fe=Re*Re-(fe=we.length())*fe*.25,fe=Math.sqrt(fe),we.normalize(),we.ar(),me.L(we),me.scale(Re-fe),K.add(me),p.mf(C,K)}if(p.Gp(this.tA,!1,!1),!T)break}},d.prototype.FG=function(p,g){if(p.Ja(g)==1)return!0;var v=new u.l;return p.Rj(g,v),Math.max(v.R(),v.ca())<.5*this.vk},d.prototype.EG=function(p){var g=new u.l;return p.A(g),Math.max(g.R(),g.ca())<.5*this.vk},d.prototype.WV=function(p){for(var g=0,v=0,w=(p=u.EC.local().V(p,.25*this.vk,!1,this.Ub)).da();v<w;v++)g=Math.max(p.Ja(v),g);return 32>g?(this.oq=!1,p):(this.oq=!0,u.Fg.Mk(p,this.ct,!1,!0,this.Ub))},d.prototype.yu=function(p,g){if(g=g.D(),this.Id!=null&&this.Id.length!==0){var v=new u.h;v.L(this.Id[0]),v.Ct(this.rb,g),p.Lt(v);for(var w=1,T=this.Id.length;w<T;w++)v.L(this.Id[w]),v.Ct(this.rb,g),p.Ci(v)}else{w=this.qE(),v=u.O.truncate((w+3)/4),w=.5*Math.PI/v,T=Math.cos(w);for(var $=Math.sin(w),C=new u.h,O=3;0<=O;O--){switch(C.ma(0,this.rb),O){case 0:for(w=0;w<v;w++)p.yj(C.x+g.x,C.y+g.y),C.Bt(T,$);break;case 1:for(w=0;w<v;w++)p.yj(-C.y+g.x,C.x+g.y),C.Bt(T,$);break;case 2:for(w=0;w<v;w++)p.yj(-C.x+g.x,-C.y+g.y),C.Bt(T,$);break;default:for(p.sx(C.y+g.x,-C.x+g.y),w=1;w<v;w++)C.Bt(T,$),p.yj(C.y+g.x,-C.x+g.y)}this.Xq()}}},d.kx=function(p){return p.Ch(1,0),p},d.prototype.sX=function(p){return p.Ch(2,this.qa),p.fm(),p},d}();u.HK=l}(V||(V={})),function(u){var A=function(){function b(c){this.Ca=c,this.g=new u.gd,this.dd=new u.ia(0)}return b.prototype.Lh=function(c,a,r){switch(a){case 0:if(c.v<r&&c.C<=r)break;return c.v>=r?1:-1;case 1:if(c.G<r&&c.H<=r)break;return c.G>=r?1:-1;case 2:if(c.v>=r&&c.C>r)break;return c.C<=r?1:-1;case 3:if(!(c.G>=r&&c.H>r))return c.H<=r?1:-1}return 0},b.prototype.Ay=function(c,a){return c.getType()==1736?this.Cy(c,a):this.Dy(c)},b.prototype.Cy=function(c,a){if(this.Ca.R()==0||this.Ca.ca()==0)return c.Ia();var r=new u.l;c.xc(r),this.X=this.g.Ib(c);var o=new u.l,l=new u.l,d=new u.h,p=new u.h,g=[0,0,0,0,0,0,0,0,0],v=[0,0,0,0,0,0,0,0,0];new u.ig;var w=new u.yb,T=new u.ia(0);T.Jb(Math.min(100,c.I()));for(var $=!1,C=0;!$&&4>C;C++){var O=!1,N=!!(1&C),R=0;switch(C){case 0:R=this.Ca.v,O=r.v<=R&&r.C>=R;break;case 1:R=this.Ca.G,O=r.G<=R&&r.H>=R;break;case 2:R=this.Ca.C,O=r.v<=R&&r.C>=R;break;case 3:R=this.Ca.H,O=r.G<=R&&r.H>=R}if(O)for($=!0,O=this.g.Ob(this.X);O!=-1;){var F=-1,G=-1,z=this.g.Xa(O),B=z;do{var q=this.g.bc(B);q==null&&(q=w,this.g.D(B,d),q.Dc(d),this.g.D(this.g.U(B),p),q.Qc(p)),q.A(o);var K=this.Lh(o,C,R),ee=0,oe=-1;if(K==-1){ee=0<(q=q.cq(N,R,g,v))?this.g.Ul(B,v,q):0,ee+=1;var ue=B,we=this.g.U(ue);for(q=0;q<ee;q++){if(this.g.D(ue,d),this.g.D(we,p),(oe=this.g.bc(ue))==null&&((oe=w).Dc(d),oe.Qc(p)),oe.A(l),(oe=this.Lh(l,C,R))==-1){if(N)(oe=Math.abs(d.y-R))<(me=Math.abs(p.y-R))?(d.y=R,this.g.mf(ue,d)):(p.y=R,this.g.mf(we,p));else{oe=Math.abs(d.x-R);var me=Math.abs(p.x-R);oe<me?(d.x=R,this.g.mf(ue,d)):(p.x=R,this.g.mf(we,p))}(oe=this.g.bc(ue))==null&&((oe=w).Dc(d),oe.Qc(p)),oe.A(l),oe=this.Lh(l,C,R)}me=F,F=oe,G==-1&&(G=F),me==0&&F==1||me==1&&F==0||me!=0||F!=0||T.add(ue),F==1&&($=!1),oe=ue=we,we=this.g.U(we)}}ee==0&&(me=F,F=K,G==-1&&(G=F),me==0&&F==1||me==1&&F==0||me!=0||F!=0||T.add(B),F==1&&($=!1),oe=this.g.U(B)),B=oe}while(B!=z);for(G==0&&F==0&&T.add(z),q=0,F=T.size;q<F;q++)G=T.get(q),this.g.pd(G,!1);T.clear(!1),O=3>this.g.Ja(O)?this.g.Zq(O):this.g.Rb(O)}}return $?c.Ia():(this.FB(),0<a&&this.My(a),this.g.Ne(this.X))},b.prototype.Dy=function(c){var a=new u.l,r=new u.l,o=[0,0,0,0,0,0,0,0,0],l=[0,0,0,0,0,0,0,0,0],d=new u.ig,p=c,g=new u.l;c.xc(g);for(var v=0;4>v;v++){var w=!1,T=!!(1&v),$=0;switch(v){case 0:$=this.Ca.v,w=g.v<=$&&g.C>=$;break;case 1:$=this.Ca.G,w=g.G<=$&&g.H>=$;break;case 2:$=this.Ca.C,w=g.v<=$&&g.C>=$;break;case 3:$=this.Ca.H,w=g.G<=$&&g.H>=$}if(w){w=p,p=c.Ia(),(w=w.Ga()).Zi();for(var C,O=new u.h;w.$a();)for(var N,R=!0;w.Ha();){var F=w.ha();F.A(a);var G=this.Lh(a,v,$);if(G==-1){if(0<(G=F.cq(T,$,o,l))){var z=0;C=F.ac();for(var B=0;B<=G;B++)if(z!=(N=B<G?l[B]:1)){F.ah(z,N,d);var q=d.get();q.Dc(C),B<G&&(T?(O.x=o[B],O.y=$):(O.x=$,O.y=o[B]),q.Qc(O)),q.A(r);var K=this.Lh(r,v,$);if(K==-1){if(C=q.ac(),z=q.wc(),T)(K=Math.abs(C.y-$))<(ee=Math.abs(z.y-$))?(C.y=$,q.Dc(C)):(z.y=$,q.Qc(z));else{K=Math.abs(C.x-$);var ee=Math.abs(z.x-$);K<ee?(C.x=$,q.Dc(C)):(z.x=$,q.Qc(z))}q.A(r),K=this.Lh(r,v,$)}C=q.wc(),z=N,(N=K)==1?(p.oc(q,R),R=!1):R=!0}}}else(N=G)==1?(p.oc(F,R),R=!1):R=!0}}}return p},b.prototype.FB=function(){this.ji=-1,this.Vl(!1,this.Ca.v),this.Vl(!1,this.Ca.C),this.Vl(!0,this.Ca.G),this.Vl(!0,this.Ca.H),this.dd.resize(0),this.dd.Jb(100),this.ji=this.g.Gd();for(var c=new u.h,a=this.g.Ob(this.X);a!=-1;a=this.g.Rb(a))for(var r=this.g.Xa(a),o=0,l=this.g.Ja(a);o<l;o++,r=this.g.U(r))this.g.D(r,c),(this.Ca.v==c.x||this.Ca.C==c.x||this.Ca.G==c.y||this.Ca.H==c.y)&&(this.g.Ra(r,this.ji,this.dd.size),this.dd.add(r));this.Nl(!1,this.Ca.v),this.Nl(!1,this.Ca.C),this.Nl(!0,this.Ca.G),this.Nl(!0,this.Ca.H),this.Ty()},b.prototype.My=function(c){for(var a=new u.h,r=new u.h,o=u.O.lg(2048,0),l=this.g.Ob(this.X);l!=-1;l=this.g.Rb(l)){var d=this.g.Xa(l),p=d;do{var g=this.g.U(p);this.g.D(p,a);var v=-1;if(a.x==this.Ca.v?(this.g.D(g,r),r.x==this.Ca.v&&(v=1)):a.x==this.Ca.C&&(this.g.D(g,r),r.x==this.Ca.C&&(v=1)),a.y==this.Ca.G?(this.g.D(g,r),r.y==this.Ca.G&&(v=0)):a.y==this.Ca.H&&(this.g.D(g,r),r.y==this.Ca.H&&(v=0)),v!=-1&&(v=u.h.tb(a,r),!(1>=(v=u.O.truncate(Math.min(Math.ceil(v/c),2048)))))){for(var w=1;w<v;w++)o[w-1]=1*w/v;this.g.Ul(p,o,v-1)}p=g}while(p!=d)}},b.prototype.Vl=function(c,a){var r=this.g.Gd(),o=new u.h,l=new u.ia(0);l.Jb(100);for(var d=this.g.Ob(this.X);d!=-1;d=this.g.Rb(d))for(var p=this.g.Xa(d),g=0,v=this.g.Ja(d);g<v;g++){var w=this.g.U(p);this.g.D(p,o),(c?o.y==a:o.x==a)&&(this.g.D(w,o),(c?o.y==a:o.x==a)&&(this.g.Pa(p,r)!=1&&(l.add(p),this.g.Ra(p,r,1)),this.g.Pa(w,r)!=1&&(l.add(w),this.g.Ra(w,r,1)))),p=w}if(this.g.Td(r),!(3>l.size)){var T=this;l.Vd(0,l.size,function(K,ee){return T.Mh(K,ee)}),r=new u.h,d=new u.h,p=new u.h,d.Rc();var $=-1;g=new u.ia(0),v=new u.ia(0),w=this.g.Gd();for(var C=this.g.Gd(),O=0,N=l.size;O<N;O++){var R=l.get(O);if(this.g.D(R,o),!o.qb(d)){if($!=-1){for(var F=$;F<O;F++){$=l.get(F);var G=this.g.U($);R=this.g.Ma($);var z=!1;0>this.Mh($,G)&&(this.g.D(G,r),c?r.y==a:r.x==a)&&(g.add($),z=!0,this.g.Ra($,C,1)),0>this.Mh($,R)&&(this.g.D(R,r),c?r.y==a:r.x==a)&&(z||g.add($),this.g.Ra($,w,1))}for(F=0,z=g.size;F<z;F++){if($=g.get(F),R=this.g.Pa($,w),G=this.g.Pa($,C),R==1){R=this.g.Ma($),this.g.D(R,p);var B=[0];if(B[0]=0,!p.qb(o)){var q=u.h.tb(d,p);B[0]=u.h.tb(p,o)/q,B[0]==0?B[0]=2220446049250313e-31:B[0]==1&&(B[0]=.9999999999999998),this.g.Ul(R,B,1),R=this.g.Ma($),this.g.mf(R,o),v.add(R),this.g.Ra(R,w,1),this.g.Ra(R,C,-1)}}G==1&&(G=this.g.U($),this.g.D(G,p),(B=[0])[0]=0,p.qb(o)||(q=u.h.tb(d,p),B[0]=u.h.tb(d,o)/q,B[0]==0?B[0]=2220446049250313e-31:B[0]==1&&(B[0]=.9999999999999998),this.g.Ul($,B,1),R=this.g.U($),this.g.mf(R,o),v.add(R),this.g.Ra(R,w,-1),this.g.Ra(R,C,1)))}$=g,g=v,(v=$).clear(!1)}$=O,d.L(o)}}this.g.Td(w),this.g.Td(C)}},b.prototype.Nl=function(c,a){var r=new u.h,o=new u.ia(0);o.Jb(100);for(var l=this.g.Gd(),d=0,p=this.dd.size;d<p;d++){var g=this.dd.get(d);if(g!=-1){var v=this.g.U(g);this.g.D(g,r),(c?r.y==a:r.x==a)&&(this.g.D(v,r),(c?r.y==a:r.x==a)&&(this.g.Pa(g,l)!=-2&&(o.add(g),this.g.Ra(g,l,-2)),this.g.Pa(v,l)!=-2&&(o.add(v),this.g.Ra(v,l,-2))))}}if(o.size!=0){var w=this;for(o.Vd(0,o.size,function(ee,oe){return w.Mh(ee,oe)}),d=0,p=o.size;d<p;d++){var T=o.get(d);this.g.Ra(T,l,d)}g=new u.h,(v=new u.h).Rc();var $=-1;for(d=0,p=o.size;d<p;d++)if((T=o.get(d))!=-1&&(this.g.D(T,r),!r.qb(v))){if($!=-1)for(;;){T=!1;for(var C=1<d-$?d-1:d,O=$;O<C;O++){var N=o.get(O);if(N!=-1){var R=-1,F=this.g.U(N);0>this.Mh(N,F)&&(this.g.D(F,g),c?g.y==a:g.x==a)&&(R=F),F=-1;var G=this.g.Ma(N);if(0>this.Mh(N,G)&&(this.g.D(G,g),c?g.y==a:g.x==a)&&(F=G),R!=-1&&F!=-1)this.Kh(N,o,l),this.g.pd(N,!1),this.Kh(R,o,l),this.g.pd(R,!1),T=!0;else if(R!=-1||F!=-1){for(G=O+1;G<d;G++){var z=o.get(G);if(z!=-1){var B=this.g.U(z),q=-1;0>this.Mh(z,B)&&(this.g.D(B,g),c?g.y==a:g.x==a)&&(q=B),B=this.g.Ma(z);var K=-1;if(0>this.Mh(z,B)&&(this.g.D(B,g),c?g.y==a:g.x==a)&&(K=B),q!=-1&&K!=-1){this.Kh(z,o,l),this.g.pd(z,!1),this.Kh(q,o,l),this.g.pd(q,!1),T=!0;break}if(R!=-1&&K!=-1){this.zt(o,N,R,z,K,l),T=!0;break}if(F!=-1&&q!=-1){this.zt(o,z,q,N,F,l),T=!0;break}}}if(T)break}}}if(!T)break}$=d,v.L(r)}}this.g.Td(l)},b.prototype.Kh=function(c,a,r){r=this.g.Pa(c,r),a.set(r,-1),r=this.g.Pa(c,this.ji),this.dd.set(r,-1),(a=this.g.bd(c))!=-1&&this.g.Xa(a)==c&&(this.g.Jf(a,-1),this.g.Wg(a,-1))},b.prototype.zt=function(c,a,r,o,l,d){this.g.Bc(a,o),this.g.Cc(o,a),this.g.Cc(r,l),this.g.Bc(l,r),this.Kh(o,c,d),this.g.mi(o,!1),this.Kh(l,c,d),this.g.mi(l,!0)},b.prototype.Ty=function(){for(var c=0,a=this.dd.size;c<a;c++){var r=this.dd.get(c);r!=-1&&this.g.aj(r,-1)}for(var o=0,l=0,d=this.g.Ob(this.X);d!=-1;){var p=this.g.Xa(d);if(p==-1||d!=this.g.bd(p)){var g=d;d=this.g.Rb(d),this.g.Jf(g,-1),this.g.$q(g)}else{r=p,g=0;do this.g.aj(r,d),g++,r=this.g.U(r);while(r!=p);2>=g?(r=this.g.Pa(p,this.ji),this.dd.set(r,-1),p=this.g.pd(p,!1),g==2&&(r=this.g.Pa(p,this.ji),this.dd.set(r,-1),this.g.pd(p,!1)),g=d,d=this.g.Rb(d),this.g.Jf(g,-1),this.g.$q(g)):(this.g.cp(d,!1),this.g.Wg(d,this.g.Ma(p)),this.g.Vj(d,g),l+=g,o++,d=this.g.Rb(d))}}for(c=0,a=this.dd.size;c<a;c++)if((r=this.dd.get(c))!=-1&&(d=this.g.bd(r))==-1){d=this.g.vf(this.X,-1),g=0,p=r;do this.g.aj(r,d),g++,r=this.g.U(r);while(r!=p);2>=g?(r=this.g.Pa(p,this.ji),this.dd.set(r,-1),p=this.g.pd(p,!1),g==2&&(0<=(r=this.g.Pa(p,this.ji))&&this.dd.set(r,-1),this.g.pd(p,!1)),g=d,this.g.Jf(g,-1),this.g.$q(g)):(this.g.kn(d,!0),this.g.Vj(d,g),this.g.Jf(d,p),this.g.Wg(d,this.g.Ma(p)),this.g.cp(d,!1),l+=g,o++)}for(this.g.Rl(this.X,o),this.g.Tj(this.X,l),c=0,a=this.g.ld;a!=-1;a=this.g.ue(a))c+=this.g.I(a);this.g.bC(c)},b.By=function(c,a,r){return new b(a).Ay(c,r)},b.clip=function(c,a,r,o){if(c.B())return c;if(a.B())return c.Ia();if((r=c.getType())==33)return o=c.D(),a.contains(o)?c:c.Ia();if(r==197)return o=new u.l,c.A(o),o.Ea(a)?(a=new u.Fh,c.copyTo(a),a.Xo(o),a):c.Ia();var l=new u.l;if(c.xc(l),a.contains(l))return c;if(!a.isIntersecting(l))return c.Ia();if((l=c.Bb)!=null&&(l=l.Fk)!=null){if((l=l.Ro(a))==1){if(r!=1736)throw u.i.Qa();return(c=new u.Da(c.description)).tp(a),c}if(l==0)return c.Ia()}switch(r){case 550:r=null,l=c.I();for(var d=c.ub(0),p=0,g=0;g<l;g++)o=new u.h,d.tc(2*g,o),a.contains(o)||(p==0&&(r=c.Ia()),p<g&&r.Fd(c,p,g),p=g+1);return 0<p&&r.Fd(c,p,l),p==0?c:r;case 1736:case 1607:return b.By(c,a,o);default:throw u.i.Qa()}},b.prototype.Mh=function(c,a){var r=new u.h;return this.g.D(c,r),c=new u.h,this.g.D(a,c),r.compare(c)},b}();u.Ud=A}(V||(V={})),function(u){var A=function(){function b(c,a){this.Ca=c,this.g=new u.gd,this.dd=new u.ia(0),this.nd=a}return b.prototype.Lh=function(c,a,r){switch(a){case 0:if(c.v<r&&c.C<=r)break;return c.v>=r?1:-1;case 1:if(c.G<r&&c.H<=r)break;return c.G>=r?1:-1;case 2:if(c.v>=r&&c.C>r)break;return c.C<=r?1:-1;case 3:if(!(c.G>=r&&c.H>r))return c.H<=r?1:-1}return 0},b.prototype.Ay=function(c,a){return c.getType()==1736?this.Cy(c,a):this.Dy(c)},b.prototype.Cy=function(c,a){if(this.Ca.R()==0||this.Ca.ca()==0)return c.Ia();var r=new u.l;c.xc(r),this.X=this.g.Ib(c);var o=new u.l,l=new u.l,d=new u.h,p=new u.h,g=[0,0,0,0,0,0,0,0,0],v=[0,0,0,0,0,0,0,0,0],w=new u.yb,T=new u.ia(0);T.Jb(256);for(var $=!1,C=0;!$&&4>C;C++){var O=!1,N=!!(1&C),R=0;switch(C){case 0:R=this.Ca.v,O=r.v<=R&&r.C>=R;break;case 1:R=this.Ca.G,O=r.G<=R&&r.H>=R;break;case 2:R=this.Ca.C,O=r.v<=R&&r.C>=R;break;case 3:R=this.Ca.H,O=r.G<=R&&r.H>=R}if(O)for($=!0,O=this.g.Ob(this.X);O!=-1;){var F=!0,G=-1,z=-1,B=this.g.Xa(O),q=B;do{var K=this.g.bc(q);K==null&&(K=w,this.g.D(q,d),K.Dc(d),this.g.D(this.g.U(q),p),K.Qc(p)),K.A(o);var ee=this.Lh(o,C,R),oe=0,ue=-1;if(ee==-1){oe=0<(K=K.cq(N,R,g,v))?this.g.LX(q,v,K):0,oe+=1;var we=q,me=this.g.U(we);for(K=0;K<oe;K++){if(this.g.D(we,d),this.g.D(me,p),(ue=this.g.bc(we))==null&&((ue=w).Dc(d),ue.Qc(p)),ue.A(l),(ue=this.Lh(l,C,R))==-1){if(N)(ue=Math.abs(d.y-R))<(Re=Math.abs(p.y-R))?(d.y=R,this.g.mf(we,d)):(p.y=R,this.g.mf(me,p));else{ue=Math.abs(d.x-R);var Re=Math.abs(p.x-R);ue<Re?(d.x=R,this.g.mf(we,d)):(p.x=R,this.g.mf(me,p))}(ue=this.g.bc(we))==null&&((ue=w).Dc(d),ue.Qc(p)),ue.A(l),ue=this.Lh(l,C,R)}Re=G,G=ue,z==-1&&(z=G),Re==0&&G==1||Re==1&&G==0||Re!=0||G!=0||T.add(we),G==1&&(F=$=!1),ue=we=me,me=this.g.U(me)}}if(oe==0&&(Re=G,G=ee,z==-1&&(z=G),Re==0&&G==1||Re==1&&G==0||Re!=0||G!=0||T.add(q),G==1&&(F=$=!1),ue=this.g.U(q)),q=ue,256<=T.size){for(K=1,ee=T.size-1;K<ee;K++)oe=T.get(K),this.g.pd(oe,!1);T.set(1,T.Fc()),T.Bh(2)}}while(q!=B);if(!F)for(z==0&&G==0&&T.add(B),K=0,ee=T.size;K<ee;K++)oe=T.get(K),this.g.pd(oe,!1);T.clear(!1),O=F||this.g.Ja(O)==0?this.g.Zq(O):this.g.Rb(O)}}return $?c.Ia():(this.FB(),0<a&&this.My(a),this.g.Ne(this.X))},b.prototype.Dy=function(c){var a=new u.l,r=new u.l,o=[0,0,0,0,0,0,0,0,0],l=[0,0,0,0,0,0,0,0,0],d=new u.ig,p=c,g=new u.l;c.xc(g);for(var v=new u.h,w=new u.h,T=null,$=null,C=0;4>C;C++){var O=!1,N=!!(1&C),R=0;switch(C){case 0:R=this.Ca.v,O=g.v<=R&&g.C>=R;break;case 1:R=this.Ca.G,O=g.G<=R&&g.H>=R;break;case 2:R=this.Ca.C,O=g.v<=R&&g.C>=R;break;case 3:R=this.Ca.H,O=g.G<=R&&g.H>=R}if(O)for(O=p,p=c.Ia(),(O=O.Ga()).Zi();O.$a();)for(var F,G=!0;O.Ha();){var z=O.ha();z.A(a);var B=this.Lh(a,C,R);if(B==-1){if(0<(B=z.cq(N,R,o,l))){var q=0;z.Yp(v);for(var K=0;K<=B;K++)if(q!=(F=K<B?l[K]:1)){z.ah(q,F,d);var ee=d.get();ee.Dc(v),K<B&&(N?(w.x=o[K],w.y=R):(w.x=R,w.y=o[K]),ee.Qc(w)),ee.A(r);var oe=this.Lh(r,C,R);oe==-1&&(T==null&&(T=new u.h),$==null&&($=new u.h),ee.Yp(T),ee.Tr($),N?(q=Math.abs(T.y-R))<(oe=Math.abs($.y-R))?(T.y=R,ee.Dc(T)):($.y=R,ee.Qc($)):(q=Math.abs(T.x-R))<(oe=Math.abs($.x-R))?(T.x=R,ee.Dc(T)):($.x=R,ee.Qc($)),ee.A(r),oe=this.Lh(r,C,R)),ee.Tr(v),q=F,(F=oe)==1?(p.oc(ee,G),G=!1):G=!0}}}else(F=B)==1?(p.oc(z,G),G=!1):G=!0}}return p},b.prototype.FB=function(){this.ji=-1,this.Vl(!1,this.Ca.v),this.Vl(!1,this.Ca.C),this.Vl(!0,this.Ca.G),this.Vl(!0,this.Ca.H),this.dd.resize(0),this.dd.Jb(100),this.ji=this.g.Gd();for(var c=new u.h,a=this.g.Ob(this.X);a!=-1;a=this.g.Rb(a))for(var r=this.g.Xa(a),o=0,l=this.g.Ja(a);o<l;o++,r=this.g.U(r))this.g.D(r,c),(this.Ca.v==c.x||this.Ca.C==c.x||this.Ca.G==c.y||this.Ca.H==c.y)&&(this.g.Ra(r,this.ji,this.dd.size),this.dd.add(r));this.Nl(!1,this.Ca.v),this.Nl(!1,this.Ca.C),this.Nl(!0,this.Ca.G),this.Nl(!0,this.Ca.H),this.Ty()},b.prototype.My=function(c){for(var a=new u.h,r=new u.h,o=null,l=null,d=u.O.lg(2048,0),p=this.g.Ob(this.X);p!=-1;p=this.g.Rb(p)){var g=this.g.Xa(p),v=g;do{var w=this.g.U(v);this.g.D(v,a);var T=-1;if(a.x==this.Ca.v?(this.g.D(w,r),r.x==this.Ca.v&&(T=1)):a.x==this.Ca.C&&(this.g.D(w,r),r.x==this.Ca.C&&(T=1)),a.y==this.Ca.G?(this.g.D(w,r),r.y==this.Ca.G&&(T=0)):a.y==this.Ca.H&&(this.g.D(w,r),r.y==this.Ca.H&&(T=0)),T!=-1){if(o==null&&(o=new u.h),l==null&&(l=new u.h),o.L(a),l.ma(0,0),T==0){var $=a.x-this.Ca.v;l.x=u.lc.sign(r.x-a.x),o.x=c*u.lc.Cn(Math.floor(Math.abs($/c)),$)+this.Ca.v,0>o.x&&(o.x+=c)}else $=a.y-this.Ca.G,l.y=u.lc.sign(r.y-a.y),o.y=c*u.lc.Cn(Math.floor(Math.abs($/c)),$)+this.Ca.G,0>o.y&&(o.y+=c);$=T!=0?r.y-a.y:r.x-a.x;var C=Math.abs($);if(65536<C/c)throw u.i.fa("internal error");if(0<C){C=u.O.truncate(C/c)+2,d.length<C&&(d=u.O.lg(C));for(var O=C=0;;O++){var N=new u.h;if(N.x=o.x+l.x*O*c,N.y=o.y+l.y*O*c,1<=(N=(T!=0?N.y-a.y:N.x-a.x)/$))break;0>=N||(d[C]=N,C++)}C!=0&&this.g.Ul(v,d,C)}}v=w}while(v!=g)}},b.prototype.Vl=function(c,a){for(var r=-1,o=new u.h,l=null,d=this.g.Ob(this.X);d!=-1;d=this.g.Rb(d))for(var p=this.g.Xa(d),g=0,v=this.g.Ja(d);g<v;g++){var w=this.g.U(p);this.g.D(p,o),(c?o.y==a:o.x==a)&&(this.g.D(w,o),(c?o.y==a:o.x==a)&&(r==-1&&(r=this.g.Gd()),l==null&&(l=new u.ia(0)).Jb(100),this.g.Pa(p,r)!=1&&(l.add(p),this.g.Ra(p,r,1)),this.g.Pa(w,r)!=1&&(l.add(w),this.g.Ra(w,r,1)))),p=w}if(r!=-1&&this.g.Td(r),!(l==null||3>l.size)){var T=this;l.Vd(0,l.size,function(K,ee){return T.Mh(K,ee)}),r=new u.h,d=new u.h,p=new u.h,d.Rc();var $=-1;g=new u.ia(0),v=new u.ia(0),w=null;for(var C=this.g.Gd(),O=this.g.Gd(),N=0,R=l.size;N<R;N++){var F=l.get(N);if(this.g.D(F,o),!o.qb(d)){if($!=-1){for(var G=$;G<N;G++){$=l.get(G);var z=this.g.U($);F=this.g.Ma($);var B=!1;this.g.D(z,r),0>d.compare(r)&&(c?r.y==a:r.x==a)&&(g.add($),B=!0,this.g.Ra($,O,1)),this.g.D(F,r),0>d.compare(r)&&(c?r.y==a:r.x==a)&&(B||g.add($),this.g.Ra($,C,1))}for(G=0,B=g.size;G<B;G++){if($=g.get(G),F=this.g.Pa($,C),z=this.g.Pa($,O),F==1&&(F=this.g.Ma($),this.g.D(F,p),!p.qb(o))){w==null&&(w=[]);var q=u.h.tb(d,p);w[0]=u.h.tb(p,o)/q,w[0]==0?w[0]=2220446049250313e-31:w[0]==1&&(w[0]=.9999999999999998),this.g.Ul(F,w,1),F=this.g.Ma($),this.g.mf(F,o),v.add(F),this.g.Ra(F,C,1),this.g.Ra(F,O,-1)}z==1&&(z=this.g.U($),this.g.D(z,p),p.qb(o)||(w==null&&(w=[]),q=u.h.tb(d,p),w[0]=u.h.tb(d,o)/q,w[0]==0?w[0]=2220446049250313e-31:w[0]==1&&(w[0]=.9999999999999998),this.g.Ul($,w,1),F=this.g.U($),this.g.mf(F,o),v.add(F),this.g.Ra(F,C,-1),this.g.Ra(F,O,1)))}$=g,g=v,(v=$).clear(!1)}$=N,d.L(o)}}this.g.Td(C),this.g.Td(O)}},b.prototype.Nl=function(c,a){for(var r=new u.h,o=null,l=-1,d=0,p=this.dd.size;d<p;d++){var g=this.dd.get(d);if(g!=-1){var v=this.g.U(g);this.g.D(g,r),(c?r.y==a:r.x==a)&&(this.g.D(v,r),(c?r.y==a:r.x==a)&&(l==-1&&(l=this.g.Gd()),o==null&&(o=new u.ia(0)).Jb(100),this.g.Pa(g,l)!=-2&&(o.add(g),this.g.Ra(g,l,-2)),this.g.Pa(v,l)!=-2&&(o.add(v),this.g.Ra(v,l,-2))))}}if(o==null)l!=-1&&this.g.Td(l);else{var w=this;for(o.Vd(0,o.size,function(ee,oe){return w.Mh(ee,oe)}),d=0,p=o.size;d<p;d++){var T=o.get(d);this.g.Ra(T,l,d)}g=new u.h,(v=new u.h).Rc();var $=-1;for(d=0,p=o.size;d<p;d++)if((T=o.get(d))!=-1&&(this.g.D(T,r),!r.qb(v))){if($!=-1)for(;;){T=!1;for(var C=1<d-$?d-1:d,O=$;O<C;O++){var N=o.get(O);if(N!=-1){var R=-1,F=this.g.U(N);this.g.D(F,g),0>v.compare(g)&&(c?g.y==a:g.x==a)&&(R=F),F=-1;var G=this.g.Ma(N);if(this.g.D(G,g),0>v.compare(g)&&(c?g.y==a:g.x==a)&&(F=G),R!=-1&&F!=-1)this.Kh(N,o,l),this.g.pd(N,!1),this.Kh(R,o,l),this.g.pd(R,!1),T=!0;else if(R!=-1||F!=-1){for(G=O+1;G<d;G++){var z=o.get(G);if(z!=-1){var B=this.g.U(z),q=-1;this.g.D(B,g),0>v.compare(g)&&(c?g.y==a:g.x==a)&&(q=B),B=this.g.Ma(z);var K=-1;if(this.g.D(B,g),0>v.compare(g)&&(c?g.y==a:g.x==a)&&(K=B),q!=-1&&K!=-1){this.Kh(z,o,l),this.g.pd(z,!1),this.Kh(q,o,l),this.g.pd(q,!1),T=!0;break}if(R!=-1&&K!=-1){this.zt(o,N,R,z,K,l),T=!0;break}if(F!=-1&&q!=-1){this.zt(o,z,q,N,F,l),T=!0;break}}}if(T)break}}}if(!T)break}$=d,v.L(r)}this.g.Td(l)}},b.prototype.Kh=function(c,a,r){r=this.g.Pa(c,r),a.set(r,-1),r=this.g.Pa(c,this.ji),this.dd.set(r,-1),(a=this.g.bd(c))!=-1&&this.g.Xa(a)==c&&(this.g.Jf(a,-1),this.g.Wg(a,-1))},b.prototype.zt=function(c,a,r,o,l,d){this.g.Bc(a,o),this.g.Cc(o,a),this.g.Cc(r,l),this.g.Bc(l,r),this.Kh(o,c,d),this.g.mi(o,!1),this.Kh(l,c,d),this.g.mi(l,!0)},b.prototype.Ty=function(){for(var c=0,a=this.dd.size;c<a;c++){var r=this.dd.get(c);r!=-1&&this.g.aj(r,-1)}for(var o=0,l=0,d=this.g.Ob(this.X);d!=-1;){var p=this.g.Xa(d);if(p==-1||d!=this.g.bd(p)){var g=d;d=this.g.Rb(d),this.g.Jf(g,-1),this.g.$q(g)}else{r=p,g=0;do this.g.aj(r,d),g++,r=this.g.U(r);while(r!=p);this.g.cp(d,!1),this.g.Wg(d,this.g.Ma(p)),this.g.Vj(d,g),l+=g,o++,d=this.g.Rb(d)}}for(c=0,a=this.dd.size;c<a;c++)if((r=this.dd.get(c))!=-1&&(d=this.g.bd(r))==-1){d=this.g.vf(this.X,-1),g=0,p=r;do this.g.aj(r,d),g++,r=this.g.U(r);while(r!=p);2>=g?(r=this.g.Pa(p,this.ji),this.dd.set(r,-1),p=this.g.pd(p,!1),g==2&&(0<=(r=this.g.Pa(p,this.ji))&&this.dd.set(r,-1),this.g.pd(p,!1)),g=d,this.g.Jf(g,-1),this.g.$q(g)):(this.g.kn(d,!0),this.g.Vj(d,g),this.g.Jf(d,p),this.g.Wg(d,this.g.Ma(p)),this.g.cp(d,!1),l+=g,o++)}for(this.g.Rl(this.X,o),this.g.Tj(this.X,l),c=0,a=this.g.ld;a!=-1;a=this.g.ue(a))c+=this.g.I(a);this.g.bC(c)},b.By=function(c,a,r,o){return new b(a,o).Ay(c,r)},b.clip=function(c,a,r,o,l){return b.Nu(c,a,null,r,o,l)},b.Nu=function(c,a,r,o,l,d){var p=c.getType();if(p==33)return l=c.D(),a.contains(l)?c:c.Ia();if(p==197)return l=new u.l,c.A(l),l.Ea(a)?(a=new u.Fh,c.copyTo(a),a.Xo(l),a):c.Ia();if(c.B())return c;if(a.B())return c.Ia();var g=new u.l;if(c.xc(g),a.contains(g))return c;if(!a.isIntersecting(g))return c.Ia();if((r!=null||isNaN(o))&&u.ta.ty(r,a,!1),!u.aa.xj(p))throw u.i.N();if((r=c.Bb)!=null&&(r=r.Fk)!=null){if((r=r.Ro(a))==1){if(p!=1736)throw u.i.fa("internal error");return(c=new u.Da(c.description)).tp(a),c}if(r==0)return c.Ia()}switch(p){case 550:for(d=null,p=c.I(),r=c.ub(0),o=0,l=new u.h,g=0;g<p;g++)r.tc(2*g,l),a.contains(l)||(o==0&&(d=c.Ia()),o<g&&d.Fd(c,o,g),o=g+1);return 0<o&&d.Fd(c,o,p),o==0?c:d;case 1736:case 1607:return b.By(c,a,l,d);default:throw u.i.fa("internal error")}},b.prototype.Mh=function(c,a){var r=new u.h;return this.g.D(c,r),c=new u.h,this.g.D(a,c),r.compare(c)},b}();u.ri=A}(V||(V={})),function(u){var A=new u.h,b=function(){function a(r,o,l,d,p){this.Pm=new u.h,this.Dk=new u.h,this.Pi=new u.h,this.g=r,this.Aw=l,this.no=d,this.Pm=o,this.yl=p,this.Dk.Rc(),this.Pi.Rc()}return a.prototype.xE=function(r){this.g.D(r,this.Dk),r=u.O.truncate((this.Dk.x-this.Pm.x)*this.no+.5);var o=u.O.truncate((this.Dk.y-this.Pm.y)*this.no+.5);return c.jG(r,o)},a.prototype.jz=function(r){return this.g.Pa(r,this.yl)},a.prototype.Py=function(r,o){return this.g.D(r,this.Dk),this.g.D(o,this.Pi),c.Cv(this.Dk.x,this.Dk.y,this.Pi.x,this.Pi.y,this.Aw)},a}();u.sY=function(){};var c=function(){function a(){this.Pm=new u.h,this.pq=[0,0,0,0],this.xs=[0,0,0,0],this.qo=this.yl=-1}return a.iQ=function(r,o){var l=new a;return l.g=r,l.qa=o,l.Aw=o*o,l.$v=2*o,l.no=1/l.$v,l.BO()},a.Cv=function(r,o,l,d,p){return(r-=l)*r+(o-=d)*o<=p},a.jG=function(r,o){return u.O.Th(o,u.O.Th(r))},a.prototype.DO=function(r,o){this.g.Gc(r,A);for(var l=(A.y-this.Pm.y)*this.no,d=u.O.truncate((A.x-this.Pm.x)*this.no),p=u.O.truncate(l),g=l=0;1>=g;g+=1)for(var v=0;1>=v;v+=1){var w=a.jG(d+g,p+v),T=this.xl.rR(w);T!=-1&&(this.pq[l]=T,this.xs[l]=w,l++)}for(d=l-1;1<=d;d--)for(T=this.pq[d],p=d-1;0<=p;p--)if(T==this.pq[p]){this.xs[p]=-1,d!=--l&&(this.xs[d]=this.xs[l],this.pq[d]=this.pq[l]);break}for(p=0;p<l;p++)this.EO(r,this.xs[p],A,this.pq[p],o)},a.prototype.EO=function(r,o,l,d,p){for(var g=new u.h;d!=-1;d=this.xl.ER(d)){var v=this.xl.ja(d);r==v||o!=-1&&this.g.Pa(v,this.yl)!=o||(this.g.Gc(v,g),a.Cv(l.x,l.y,g.x,g.y,this.Aw)&&p.add(d))}},a.prototype.Xm=function(r,o,l){var d=this.g.Pa(r,this.qo),p=this.g.Pa(o,this.qo);return d==-1&&(d=this.zd.Ph(),this.zd.addElement(d,r),this.g.Ra(r,this.qo,d)),p==-1?this.zd.addElement(d,o):this.zd.Hy(d,p),this.g.Ra(o,this.qo,-2),o=this.YT(r,o),l&&(l=this.kw.xE(r),this.g.Ra(r,this.yl,l)),o},a.WT=function(r,o,l){r.Nb(o),l=r;var d=new u.h;a.XT(r.D(),o.D(),d),l.Cb(d)},a.XT=function(r,o,l){var d=r.x;r.x!=o.x&&(d=(1*r.x+1*o.x)/2);var p=r.y;r.y!=o.y&&(p=(1*r.y+1*o.y)/2),l.ma(d,p)},a.prototype.YT=function(r,o){var l=new u.h;this.g.D(r,l);var d=new u.h;this.g.D(o,d);var p=this.g.cG(r),g=p+(o=this.g.cG(o)),v=0,w=l.x;l.x!=d.x&&(w=(l.x*p+d.x*o)/g,v++);var T=l.y;return l.y!=d.y&&(T=(l.y*p+d.y*o)/g,v++),0<v&&this.g.Cb(r,w,T),this.g.vX(r,g),v!=0},a.prototype.BO=function(){var r=this.g.fd,o=this.g.IF();for(this.Pm=o.mz(),o=Math.max(o.ca(),o.R())/2147483646,this.$v<o&&(this.$v=o,this.no=1/this.$v),this.zd=new u.au,this.zd.At(u.O.truncate(this.g.fd/3+1)),this.zd.fn(u.O.truncate(this.g.fd/3+1)),this.yl=this.g.Gd(),this.qo=this.g.Gd(),this.kw=new b(this.g,this.Pm,this.Aw,this.no,this.yl),this.xl=new u.dL(u.O.truncate(4*r/3),this.kw),this.xl.AW(this.g.fd),r=!1,o=this.g.ld;o!=-1;o=this.g.ue(o))for(var l=this.g.Ob(o);l!=-1;l=this.g.Rb(l))for(var d=this.g.Xa(l),p=0,g=this.g.Ja(l);p<g;p++){var v=this.kw.xE(d);this.g.Ra(d,this.yl,v),this.xl.addElement(d,v),d=this.g.U(d)}var w=new u.ia(0);for(w.Jb(10),o=this.g.ld;o!=-1;o=this.g.ue(o))for(l=this.g.Ob(o);l!=-1;l=this.g.Rb(l))for(d=this.g.Xa(l),p=0,g=this.g.Ja(l);p<g;p++){if(this.g.Pa(d,this.qo)!=-2)for(v=this.g.Pa(d,this.yl),this.xl.jd(d,v);this.DO(d,w),w.size!=0;){v=!1;for(var T=0,$=w.size;T<$;T++){var C=w.get(T),O=this.xl.ja(C);this.xl.vd(C),v=this.Xm(d,O,T+1==$)||v}if(r=r||v,w.clear(!1),!v)break}d=this.g.U(d)}return r&&this.vN(),this.kw=this.xl=null,this.g.Td(this.yl),this.g.Td(this.qo),r},a.prototype.vN=function(){for(var r=new u.h,o=this.zd.je;o!=-1;o=this.zd.qz(o)){var l=this.zd.rc(o);for(this.g.D(this.zd.ja(l),r),l=this.zd.lb(l);l!=-1;l=this.zd.lb(l))this.g.mf(this.zd.ja(l),r)}},a}();u.Yt=c}(V||(V={})),function(u){var A=function(){function b(c){c===void 0&&(c=null),this.yg=null,this.Pb=!1,this.yg=c===null?[]:c}return b.prototype.copyTo=function(c){if(c.Pb)throw u.i.fa("CompositeGeographicTransformation is read-only");for(var a=0;a<this.yg.length;a++)c.yg.push(this.yg[a].Of())},b.prototype.count=function(){return this.yg.length},b.prototype.add=function(c){if(this.Pb)throw u.i.fa("CompositeGeographicTransformation is read-only");this.yg.push(c.Of())},b.prototype.clear=function(){if(this.Pb)throw u.i.fa("CompositeGeographicTransformation is read-only");this.yg.length=0},b.prototype.remove=function(c){if(this.Pb)throw u.i.fa("CompositeGeographicTransformation is read-only");this.yg.splice(c,1)},b.prototype.jg=function(){var c=new b;return this.copyTo(c),c},b.prototype.Of=function(){return this.jg()},b.prototype.transform=function(c,a,r,o){if(c.length<a)throw u.i.fa("invalid Argument");var l=r;for(r=0;r<this.yg.length;r++){var d=this.yg[r];if(d.qm()!=null){var p=d.Un,g=p?1:0,v=p?d.qm().getGeogcs2():d.qm().getGeogcs1();if(v=l/(v=v.getUnit().getUnitFactor()),3552713678800501e-30<Math.abs(v-1))for(l=0;l<a;l++)c[l][0]*=v,c[l][1]*=v;u.MC.geogToGeog(d.qm(),a,c,null,g),l=(p?d.qm().getGeogcs1():d.qm().getGeogcs2()).getUnit().getUnitFactor()}}if(v=l/o,3552713678800501e-30<Math.abs(v-1))for(l=0;l<a;l++)c[l][0]*=v,c[l][1]*=v;return a},b.prototype.Nb=function(c){if(c==this)return!0;if(!(c instanceof b)||this.yg.length!=c.yg.length)return!1;for(var a=0;a<this.yg.length;a++)if(!this.yg[a].Nb(c.yg[a]))return!1;return!0},b.prototype.ix=function(){this.Pb=!0},b.prototype.toString=function(){for(var c="CGT ("+this.count()+") ",a=0,r=this.count();a<r;++a)c+=this.yg[a].toString()+", ";return 200<c.length?c.substring(0,197)+"... ("+c.length.toString()+" characters)":c},b.create=function(){return new b},b}();u.wC=A}(V||(V={})),function(u){var A,b=Math.PI,c=2*Math.PI,a=Math.PI/2,r=function(){function d(){}return d.TO=function(p,g){var v=new d;return v.x=p,v.y=g,v.type=0,v.Uh=0,v},d.al=function(p){var g=new d;return g.x=p.x,g.y=p.y,g.type=0,g.Uh=0,g},d.SO=function(p){var g=new d;return g.x=p.x,g.y=p.y,g.type=p.type,g.Uh=p.Uh,g},d.Pd=function(p,g,v){var w=new d;return w.x=p.x+g*Math.cos(v),w.y=p.y+g*Math.sin(v),w.type=p.type,w.Uh=p.Uh,w},d.Pu=function(p,g){var v=new d;return v.x=.5*(p.x+g.x),v.y=.5*(p.y+g.y),v.type=p.type,v.Uh=p.Uh,v},d.TE=function(p,g){var v=new d;return v.x=p.x+.001*(g.x-p.x),v.y=p.y+.001*(g.y-p.y),v.type=p.type,v.Uh=p.Uh,v},d}(),o=function(){};(A=u.fL||(u.fL={}))[A.Round=0]="Round",A[A.Bevel=1]="Bevel",A[A.Miter=2]="Miter",A[A.Square=3]="Square";var l=function(){function d(p){this.NA=this.Yb=this.wg=null,this.nd=p}return d.V=function(p,g,v,w,T,$){if(p==null||1>p.Db())throw u.i.N();return g==0||p.B()?p:(($=new d($)).ko=p,$.Ka=g,$.qa=T,$.Ki=v,$.CA=w,$.Rx())},d.prototype.eM=function(){var p=this.ko,g=p.ac(),v=p.wc(),w=new u.h;return w.uc(v,g),w.normalize(),w.Hv(),w.scale(this.Ka),g.add(w),v.add(w),w=p.Ia(),p.Dc(g),p.Qc(v),w},d.prototype.dM=function(){var p=this.ko;if(0<this.Ka&&this.Ki!=2){var g=new u.Da;return g.ad(p,!1),this.ko=g,this.Rx()}return(p=new u.Fh(p.$)).W(this.Ka,this.Ka),p},d.prototype.tJ=function(p,g,v,w){return(g.x-p.x)*(w.x-v.x)+(g.y-p.y)*(w.y-v.y)},d.prototype.fc=function(p,g){if(g===void 0)this.Yb.push(p),this.gf++;else if(this.gf==0)this.fc(p);else{var v=this.Bw,w=this.wg[g==0?v-1:g-1],T=this.wg[g],$=this.tJ(w,T,this.Yb[this.gf-1],p);0<$?this.fc(p):0>$&&(0<this.tJ(w,T,T,this.Yb[this.gf-1])?(T=this.wg[g==0?v-2:g==1?v-1:g-2],v=r.Pd(w,this.Ka,Math.atan2(w.y-T.y,w.x-T.x)-a),this.Yb[this.gf-1]=v,this.Ki==1||this.Ki==2?(v=r.Pu(v,w),this.fc(v),v=r.Pd(w,this.Ka,this.Jv+a),(w=r.Pu(v,w)).type|=256,this.fc(w)):(v=r.Pd(w,this.Ka,this.Jv+a)).type|=256,this.fc(v),this.fc(p,g)):(v=r.Pd(T,this.Ka,this.Jv+a),this.fc(v),this.Ki==1||this.Ki==2?(v=r.Pu(v,T),this.fc(v),v=r.Pd(T,this.Ka,this.aA-a),(w=r.Pu(v,T)).type|=256,this.fc(w)):(v=r.Pd(T,this.Ka,this.aA-a)).type|=256,this.fc(v)))}},d.prototype.mE=function(){var p,g=this.Bw;this.gf=0;var v=.5*this.qa,w=0,T=0;for(p=0;p<g;p++){var $=this.wg[p],C=p==0?this.wg[g-1]:this.wg[p-1],O=p==g-1?this.wg[0]:this.wg[p+1],N=C.x-$.x,R=C.y-$.y,F=O.x-$.x,G=O.y-$.y,z=Math.atan2(R,N),B=Math.atan2(G,F);if(this.Jv=z,this.aA=B,p==0&&(w=z,T=B),N=N*G-F*R,R=B,B<z&&(B+=c),0<N*this.Ka)this.Ki==1||this.Ki==2?(z=r.Pd($,this.Ka,z+a),this.fc(z),z=r.TE($,z),this.fc(z),z=r.Pd($,this.Ka,B-a),($=r.TE($,z)).type|=256,this.fc($),this.fc(z)):(N=.5*(B-z),N=this.Ka/Math.abs(Math.sin(N)),z=r.Pd($,N,.5*(z+B)),this.fc(z,p));else if(512&$.type){for(N=1-v/Math.abs(this.Ka),C=1,O=0>this.Ka?-b:b,-1<N&&1>N&&(.017453292519943295>(R=2*Math.acos(N))&&(R=.017453292519943295),1<(C=u.O.truncate(b/R+1.5))&&(O/=C)),R=z+a,z=r.Pd($,this.Ka,R),p==0&&(z.type|=1024),this.fc(z,p),N=this.Ka/Math.cos(O/2),R+=O/2,(z=r.Pd($,N,R)).type|=1024,this.fc(z);0<--C;)R+=O,(z=r.Pd($,N,R)).type|=1024,this.fc(z);(z=r.Pd($,this.Ka,B-a)).type|=1024,this.fc(z)}else if(this.Ki==1)z=r.Pd($,this.Ka,z+a),this.fc(z,p),z=r.Pd($,this.Ka,B-a),this.fc(z);else if(this.Ki==0)for(N=1-v/Math.abs(this.Ka),C=1,O=B-a-(z+a),-1<N&&1>N&&(.017453292519943295>(R=2*Math.acos(N))&&(R=.017453292519943295),1<(C=u.O.truncate(Math.abs(O)/R+1.5))&&(O/=C)),N=this.Ka/Math.cos(.5*O),R=z+a+.5*O,z=r.Pd($,N,R),this.fc(z,p);0<--C;)R+=O,z=r.Pd($,N,R),this.fc(z);else this.Ki==2?(N=C.x-$.x,R=C.y-$.y,.99999999<(C=(N*(F=O.x-$.x)+R*(G=O.y-$.y))/Math.sqrt(N*N+R*R)/Math.sqrt(F*F+G*G))?(z=r.Pd($,1.4142135623730951*this.Ka,B-.25*b),this.fc(z,p),z=r.Pd($,1.4142135623730951*this.Ka,B+.25*b),this.fc(z)):(C=Math.abs(this.Ka/Math.sin(.5*Math.acos(C))))>(O=Math.abs(this.CA*this.Ka))?(N=.5*(B-z),N=this.Ka/Math.abs(Math.sin(N)),z=r.Pd($,N,.5*(z+B)),B=u.h.construct(z.x,z.y),z=u.h.construct($.x,$.y),($=new u.h).uc(B,z),(B=new u.h).HW(O/$.length(),$,z),z=(C-O)*Math.abs(this.Ka)/Math.sqrt(C*C-this.Ka*this.Ka),0<this.Ka?$.Hv():$.ar(),$.scale(z/$.length()),(z=new u.h).add(B,$),(C=new u.h).uc(B,$),z=r.al(z),this.fc(z,p),z=r.al(C),this.fc(z)):(N=.5*(B-z),N=this.Ka/Math.abs(Math.sin(N)),z=r.Pd($,N,.5*(z+B)),this.fc(z,p))):(B=R,0<this.Ka?(B>z&&(B-=c),C=z-B<a):(B<z&&(B+=c),C=B-z<a),C?(R=0>(N=1.4142135623730951*this.Ka)?z+.25*b:z+.75*b,z=r.Pd($,N,R),this.fc(z,p),R=0>N?B-.25*b:B-.75*b,z=r.Pd($,N,R),this.fc(z)):(N=.5*(B-z),N=this.Ka/Math.abs(Math.sin(N)),B<z&&(B+=c),z=r.Pd($,N,(z+B)/2),this.fc(z,p)))}return this.Jv=w,this.aA=T,this.fc(this.Yb[0],0),$=r.SO(this.Yb[this.gf-1]),this.Yb[0]=$,this.wW()},d.prototype.Au=function(p,g){if(!(2>g))for(var v=0;v<g;v++){var w=this.Yb[p+v];v!=0?this.NA.Ci(u.h.construct(w.x,w.y)):this.NA.Lt(u.h.construct(w.x,w.y))}},d.prototype.fM=function(p,g,v){var w=p.Ba(g),T=p.Vc(g);if(this.Yb=[],this.NA=v,p.dc(g)){for(g=p.Na(w);p.Na(T-1).qb(g);)T--;if(2<=T-w){for(this.Bw=T-w,this.wg=[],g=w;g<T;g++)this.wg.push(r.al(p.Na(g)));this.mE()&&this.Au(0,this.gf-1)}}else{for(g=p.Na(w);w<T&&p.Na(w+1).qb(g);)w++;for(g=p.Na(T-1);w<T&&p.Na(T-2).qb(g);)T--;if(2<=T-w){for(this.Bw=2*(T-w)-2,this.wg=[],(v=r.al(p.Na(w))).type|=1536,this.wg.push(v),g=w+1;g<T-1;g++)v=r.al(p.Na(g)),this.wg.push(v);for((v=r.al(p.Na(T-1))).type|=512,this.wg.push(v),g=T-2;g>=w+1;g--)(v=r.al(p.Na(g))).type|=1024,this.wg.push(v);if(this.mE())if(2<=this.Yb.length){for(p=-1,(T=!!(1024&this.Yb[this.gf-1].type))||(p=0),g=1;g<this.gf;g++)(w=!!(1024&this.Yb[g].type))?T||1<(T=g-1)-p+1&&this.Au(p,T-p+1):T&&(p=g-1),T=w;T||1<(T=this.gf-1)-p+1&&this.Au(p,T-p+1)}else p=0,T=this.gf-1,0<=p&&1<=T-p&&this.Au(p,T-p+1)}}this.wg=null,this.Bw=0,this.Yb=null,this.gf=0},d.prototype.wW=function(){for(var p=!1,g=0;g<this.gf;g++){var v=this.Yb[g];v.qh=g+1,v.sh=g-1,this.Yb[g]=v}for((v=this.Yb[0]).sh=this.gf-2,this.Yb[0]=v,(v=this.Yb[this.gf-2]).qh=0,this.Yb[this.gf-2]=v,g=v=0;g<this.gf;g++)if(256&this.Yb[v].type){var w=this.GP(v);if(w==-1){p=!0;break}v=w}else v=this.Yb[v].qh;return!p&&(this.QO(v),!0)},d.prototype.GP=function(p){for(var g,v,w=this.gf-1,T=p,$=1;$<=w-2;$++){g=T=this.Yb[T].qh,v=p;for(var C=1;C<=$;C++){if(v=this.Yb[v].sh,!(256&this.Yb[v].type||256&this.Yb[g].type)){var O=this.gS(v,g);if(O!=-1)return O}g=this.Yb[g].sh}}return-1},d.prototype.gS=function(p,g){var v=this.Yb[this.Yb[p].sh],w=this.Yb[p],T=this.Yb[this.Yb[g].sh],$=this.Yb[g];if(!this.JW(v,w,T,$))return-1;var C=new o;return this.xQ(v,w,T,$,C)&&!C.bE&&u.O.bK((w.x-v.x)*($.y-T.y)-(w.y-v.y)*($.x-T.x))!=u.O.bK(this.Ka)?(v=this.Yb[p].sh,C.an.type=w.type,C.an.qh=g,C.an.sh=v,this.Yb[p]=C.an,C.an=this.Yb[g],C.an.sh=p,this.Yb[g]=C.an,g):-1},d.prototype.JW=function(p,g,v,w){return Math.max(p.x,g.x)>=Math.min(v.x,w.x)&&Math.max(v.x,w.x)>=Math.min(p.x,g.x)&&Math.max(p.y,g.y)>=Math.min(v.y,w.y)&&Math.max(v.y,w.y)>=Math.min(p.y,g.y)},d.prototype.xQ=function(p,g,v,w,T){T.bE=!1;var $=(g.y-p.y)*(w.x-v.x)-(g.x-p.x)*(w.y-v.y),C=(v.y-p.y)*(g.x-p.x)-(v.x-p.x)*(g.y-p.y);if(0<=($=$==0?2:C/$)&&1>=$){var O=$;if($=(w.y-v.y)*(g.x-p.x)-(w.x-v.x)*(g.y-p.y),C=(p.y-v.y)*(w.x-v.x)-(p.x-v.x)*(w.y-v.y),0<=($=$==0?2:C/$)&&1>=$)return T.an=r.TO(p.x+$*(g.x-p.x),p.y+$*(g.y-p.y)),T.an.Uh=v.Uh+O*(w.Uh-v.Uh),O!=0&&O!=1||$!=0&&$!=1||(T.bE=!0),T.VY=$,T.WY=O,!((O==0||O==1)&&0<$&&1>$||($==0||$==1)&&0<O&&1>O)}return!1},d.prototype.QO=function(p){for(;this.Yb[p].sh<p;)p=this.Yb[p].sh;var g=0,v=p;do v=this.Yb[v],this.Yb[g]=v,v=v.qh,g++;while(v!=p);this.Yb[g]=this.Yb[0],this.gf=g+1},d.prototype.$C=function(p){var g=this.ko,v=g.Ga();if(v!=null){v.Zi();for(var w=-1;v.$a();)w++,this.fM(g,w,p)}},d.prototype.Rx=function(){var p=this.ko.getType();return p==322?this.eM():p==197?this.dM():u.aa.yd(p)?((p=new u.Ta).oc(this.ko,!0),this.ko=p,this.Rx()):p==1607?(p=new u.Ta,this.$C(p),p):p==1736?(p=new u.Da,this.$C(p),p):null},d}();u.IK=l}(V||(V={})),function(u){var A=function(){function r(o){this.qk=o}return r.prototype.D=function(o,l){this.qk.g.D(o,l)},r.prototype.vd=function(o){var l=this.qk.Fa.ja(o);this.qk.Fa.vd(o,-1),this.qk.g.pd(l,!1)},r}(),b=function(){function r(o){this.qk=o}return r.prototype.D=function(o,l){this.qk.IT.D(o,l)},r.prototype.vd=function(o){this.qk.Fa.vd(o,-1)},r}(),c=function(){function r(o){this.qk=o}return r.prototype.D=function(o,l){l.L(this.qk.LT[o])},r.prototype.vd=function(o){this.qk.Fa.vd(o,-1)},r}(),a=function(){function r(o){o===void 0?(this.Fa=new u.Yj,this.Fa.De(20),this.g=new u.gd,this.xT=this.g.Ig(550),this.Ss=this.g.vf(this.xT,-1),this.Xh=new A(this)):o instanceof Array?(this.Fa=new u.Yj,this.Fa.De(20),this.LT=o,this.Xh=new c(this)):(this.Fa=new u.Yj,this.Fa.De(20),this.IT=o,this.Xh=new b(this))}return r.prototype.Ib=function(o){var l=o.getType();if(u.Gx.xj(l))this.jN(o);else if(u.Vk.yd(l))this.oN(o);else if(l==197)this.gN(o);else{if(l!=33)throw u.i.N("invalid shape type");this.nN(o)}},r.prototype.cR=function(){var o=new u.Sa,l=this.Fa.rc(-1),d=new u.Da(this.g.ht);for(this.g.Vi(this.Fa.ja(l),o),d.nf(o),l=this.Fa.lb(l);l!=-1;l=this.Fa.lb(l))this.g.Vi(this.Fa.ja(l),o),d.lineTo(o);return d},r.RO=function(o){var l=new r(o),d=o.I(),p=1,g=new u.h,v=new u.h,w=new u.h;for(o.D(0,g);o.D(p,v),v.Rz(g)&&p<d-1;)p++;for(l.Fa.addElement(0,-1),l.Fa.xn(p),d=p+1;d<o.I();d++)o.D(d,w),(p=l.pC(w))!=-1&&l.Fa.Sj(p,d);for(w=new u.Sa,p=l.Fa.rc(-1),d=new u.Da(o.description),o.ve(l.Fa.ja(p),w),d.nf(w),p=l.Fa.lb(p);p!=-1;p=l.Fa.lb(p))o.ve(l.Fa.ja(p),w),d.lineTo(w);return d},r.construct=function(o,l,d){for(var p=new r(o),g=1,v=o[0];o[g].Rz(v)&&g<l-1;)g++;for(p.Fa.addElement(0,-1),p.Fa.xn(g),g+=1;g<l;g++)(v=p.pC(o[g]))!=-1&&p.Fa.Sj(v,g);for(o=0,l=p.Fa.rc(-1);l!=-1;l=p.Fa.lb(l))d[o++]=p.Fa.ja(l);return o},r.JG=function(o,l){var d=o.Ba(l),p=o.Vc(l);if(l=!o.dc(l)&&o.Nn(l),o=o.ub(0),p*=2,l&&(p-=2),6>p-(d*=2))return!0;l=new u.h;var g=new u.h,v=new u.h;o.tc(d,l),o.tc(d+2,g),o.tc(d+4,v);var w=r.Wu(g,v,l);if(w.ps()||!r.um(w.value()))return!1;var T=u.h.construct(g.x,g.y),$=new u.h;for(d+=6;d<p;d+=2)if($.L(g),g.L(v),o.tc(d,v),(w=r.Wu(g,v,l)).ps()||!r.um(w.value())||(w=r.Wu(T,v,l)).ps()||!r.um(w.value())||(w=r.Wu(g,v,$)).ps()||!r.um(w.value()))return!1;return!0},r.prototype.jN=function(o){for(var l=new u.Sa,d=new u.h,p=0;p<o.I();p++){o.D(p,d);var g=this.Cr(d);if(g!=-1){o.ve(p,l);var v=this.g.fc(this.Ss,l);this.Fa.Sj(g,v)}}},r.prototype.gN=function(o){for(var l=new u.Sa,d=new u.h,p=0;4>p;p++){o.mB(p,d);var g=this.Cr(d);if(g!=-1){o.Hf(p,l);var v=this.g.fc(this.Ss,l);this.Fa.Sj(g,v)}}},r.prototype.oN=function(o){var l=new u.Sa,d=o.ac();if((d=this.Cr(d))!=-1){o.To(l);var p=this.g.fc(this.Ss,l);this.Fa.Sj(d,p)}d=o.wc(),(d=this.Cr(d))!=-1&&(o.Po(l),o=this.g.fc(this.Ss,l),this.Fa.Sj(d,o))},r.prototype.nN=function(o){var l=o.D();(l=this.Cr(l))!=-1&&(o=this.g.fc(this.Ss,o),this.Fa.Sj(l,o))},r.prototype.Cr=function(o){var l=-1;if(this.Fa.size(-1)==0)return this.Fa.addElement(-4,-1);if(this.Fa.size(-1)==1){var d=this.g.Na(this.Fa.ja(this.Fa.rc(-1)));return o.Rz(d)||(l=this.Fa.xn(-5)),l}return this.pC(o)},r.prototype.pC=function(o){var l=-1;do{var d=this.Fa.rc(-1),p=this.Fa.Fc(-1),g=this.Fa.ja(d),v=this.Fa.ja(p),w=new u.h,T=new u.h;if(this.Xh.D(g,w),this.Xh.D(v,T),g=u.h.Uq(T,o,w),r.um(g))l=this.Fa.xn(-1),(w=this.nC(o,p,d))!=d&&this.oC(o,d,this.Fa.we(w));else if(r.CG(g)){T=this.Fa.sv(-1);var $=this.Fa.rc(-1),C=this.Fa.Fc(-1);for(g=new u.h,v=new u.h;$!=this.Fa.we(C);){var O=this.Fa.ja(T);this.Xh.D(O,g),O=u.h.Uq(g,o,w),r.CG(O)?(C=T,T=this.Fa.ll(T)):($=T,T=this.Fa.Xp(T))}if(T=C,w=$,O=this.Fa.ja(T),$=this.Fa.ja(w),this.Xh.D(O,g),this.Xh.D($,v),w!=d&&(g=u.h.Uq(v,o,g),!r.um(g)))continue;l=this.Fa.zu(w,T,-2,!1),this.oC(o,T,p),this.nC(o,w,d)}else this.sb==null&&(this.sb=new u.yb),this.sb.Dc(T),this.sb.Qc(w),0>(w=this.sb.fe(o,!0))?(w=this.Fa.we(p),this.Fa.vd(p,-1),l=this.Fa.xn(-3),this.nC(o,w,d)):1<w&&(w=this.Fa.lb(d),this.Fa.vd(d,-1),l=this.Fa.zu(-1,w,-3,!1),this.oC(o,w,p))}while(!1);return l},r.prototype.oC=function(o,l,d){if(l!=d){var p=this.Fa.ja(l),g=this.Fa.lb(l),v=new u.h,w=new u.h;for(this.Xh.D(p,v);l!=d&&2<this.Fa.size(-1)&&(this.Xh.D(this.Fa.ja(g),w),p=u.h.Uq(w,o,v),!r.um(p));)p=l,l=g,v.L(w),g=this.Fa.lb(l),this.Xh.vd(p)}},r.prototype.nC=function(o,l,d){if(l==d)return d;var p=this.Fa.ja(l),g=this.Fa.we(l),v=new u.h,w=new u.h;for(this.Xh.D(p,v);l!=d&&2<this.Fa.size(-1)&&(this.Xh.D(this.Fa.ja(g),w),p=u.h.Uq(v,o,w),!r.um(p));)p=l,l=g,v.L(w),g=this.Fa.we(l),this.Xh.vd(p);return l},r.Wu=function(o,l,d){var p=new u.Wb;p.set(l.x),p.sub(o.x);var g=new u.Wb;g.set(d.y),g.sub(o.y);var v=new u.Wb;return v.set(l.y),v.sub(o.y),(l=new u.Wb).set(d.x),l.sub(o.x),p.Ag(g),v.Ag(l),p.sub(v),p},r.um=function(o){return 0>o},r.CG=function(o){return 0<o},r}();u.Zt=a}(V||(V={})),function(u){var A=function(){function b(c){this.g=null,this.tH=!0,this.nd=c}return b.zU=function(c,a,r){return c=u.ta.Er(c),u.Yt.Cv(a.Lg(),a.ih(),r.Lg(),r.ih(),u.lc.ox(c))},b.CO=function(c,a){var r=new u.Sa;return u.Yt.WT(c,a,r),r},b.V=function(c,a,r,o){return(r=new b(r)).g=c,r.qa=a,r.tH=o,r.EM()},b.prototype.nM=function(c){return u.Yt.iQ(this.g,c)},b.prototype.sM=function(c){return u.$t.V(this.g,c,this.nd)},b.prototype.EM=function(){var c=this.qa,a=u.ta.Er(c),r=1.00001*(c=u.ta.rN(c));c*=1.000001;for(var o=!1,l=30<this.g.fd+10?1e3:(this.g.fd+10)*(this.g.fd+10),d=0,p=this.g.jS();;d++){if(d>l)throw u.i.fa("Internal Error: max number of iterations exceeded");var g=this.nM(a);if(o=o||g,this.tH&&(g=this.g.Gp(a,!0,!1)!=0,o=o||g),g=!1,(d==0||p||u.$t.kI(!0,this.g,c,null,this.nd))&&(g=this.sM(r),o=o||g),!g)break;u.mp.zp(this.nd)}return o},b}();u.Tk=A}(V||(V={})),function(u){var A=function(){function c(a){this.$d=this.Mc=null,this.Ys=0,this.Ub=a,this.cA=!0}return c.prototype.uv=function(a,r){var o=this.g.bc(a);if(o==null){if(!this.g.ed(a,r))return null;o=r}return o},c.prototype.Xq=function(){var a;a===void 0&&(a=!1),this.Ys++,!a&&4095&this.Ys||(this.Ys=0,u.mp.zp(this.Ub))},c.prototype.nP=function(){var a=this.g.Yq(!1),r=!1,o=new u.yb,l=new u.yb,d=new u.l;d.Oa();var p=new u.l;p.Oa();for(var g=new u.Sa,v=new u.TC,w=a.next();w!=-1;w=a.next()){u.mp.zp(this.Ub);var T=null,$=!1;if(!u.aa.Rn(this.g.ic(a.ck))){if((T=this.uv(w,o))==null)continue;if(T.A(d),d.W(this.qa,this.qa),T.Bi(this.qa)){if(!T.Bi(0))continue;$=!0,T=null}}var C=this.g.Yq(a),O=C.next();for(O!=-1&&(O=C.next());O!=-1;O=C.next()){var N=null,R=!1;if(!u.aa.Rn(this.g.ic(C.ck))){if((N=this.uv(O,l))==null)continue;if(N.A(p),N.Bi(this.qa)){if(!N.Bi(0))continue;R=!0,N=null}}var F=0,G=0;if(T!=null&&N!=null)d.HG(p)&&(v.Oo(T),v.Oo(N),v.Ea(this.qa,!1),0<(F=v.ol(0))+(G=v.ol(1))&&(this.g.jr(w,v,0,!0),this.g.jr(O,v,1,!0)),v.clear());else if(T!=null){var z=new u.h;if(this.g.D(O,z),d.contains(z)){if(v.Oo(T),this.g.Vi(O,g),v.Kz(this.qa,g,!1),0<(F=v.ol(0)))if(this.g.jr(w,v,0,!0),R){for(R=-1,z=this.g.U(O);z!=-1&&z!=O&&(R=z,(N=this.uv(z,l))!=null&&N.Bi(0));z=this.g.U(z));for(z=O;z!=-1&&(this.g.Dh(z,v.Bf),z!=R);z=this.g.U(z));}else this.g.Dh(O,v.Bf);v.clear()}}else{if(N==null)continue;if(z=new u.h,this.g.D(w,z),p.W(this.qa,this.qa),p.contains(z)){if(v.Oo(N),this.g.Vi(w,g),v.Kz(this.qa,g,!1),0<(G=v.ol(0)))if(this.g.jr(O,v,0,!0),$){for(R=-1,z=this.g.U(w);z!=-1&&z!=w&&(R=z,(N=this.uv(z,l))!=null&&N.Bi(0));z=this.g.U(z));for(z=w;z!=-1&&(this.g.Dh(z,v.Bf),z!=R);z=this.g.U(z));}else this.g.Dh(w,v.Bf);v.clear()}}if(F+G!=0){if(F!=0){if((T=this.g.bc(w))==null){if(!this.g.ed(w,o))continue;T=o,o.A(d)}else T.A(d);if(T.Bi(this.qa))break}r=!0}}}return r},c.prototype.oP=function(){return this.QU()},c.prototype.QU=function(){return new u.RC().PX(this.g,this.qa)},c.prototype.lI=function(){var a=!1;this.Mc==null&&(this.Mc=new u.Yj);var r=new u.ia(0);r.Jb(this.g.fd+1);for(var o=this.g.Yq(),l=o.next();l!=-1;l=o.next())r.add(l);this.g.nx(r,r.size),r.add(-1),o=this.g.Gd(),l=this.g.Gd(),this.$d=new u.UC(this.g,this.qa,!this.cA),this.Mc.Vo(this.$d);var d=new u.ia(0),p=new u.ia(0),g=0;new u.h;var v=this.g.td;this.g.vb.mc();for(var w,T,$=this.g.vb.za[0].o,C=r.get(g++);C!=-1;){var O=w=$[2*(T=v.T(C,0))],N=T=$[2*T+1];do{var R=v.T(C,2),F=v.T(C,1);if(R!=-1){var G=v.T(R,0),z=$[2*G];0>(N<(G=$[2*G+1])?-1:N>G?1:O<z?-1:O>z?1:0)&&(p.add(C),p.add(R))}F!=-1&&(z=$[2*(G=v.T(F,0))],0>(N<(G=$[2*G+1])?-1:N>G?1:O<z?-1:O>z?1:0)&&(p.add(F),p.add(F))),(z=this.g.Pa(C,o))!=-1&&(d.add(z),this.g.Ra(C,o,-1)),(z=this.g.Pa(C,l))!=-1&&(d.add(z),this.g.Ra(C,l,-1)),(C=r.get(g++))!==-1&&(O=$[2*(N=v.T(C,0))],N=$[2*N+1])}while(C!=-1&&O===w&&N===T);for(O=d.size==1&&p.size==2,z=N=-1,R=0,F=d.size;R<F;R++){G=d.get(R);var B=this.Mc.we(G);if(B==-1||d.hG(B)||(N=B),(G=this.Mc.lb(G))==-1||d.hG(G)||(z=G),N!=-1&&z!=-1)break}for(this.$d.$J(T,w),R=0,F=d.size;R<F;R++)G=d.get(R),this.Mc.vd(G,-1);if(d.clear(!1),!O&&N!=-1&&z!=-1&&this.qO(N,z)){a=!0,this.Ni=this.$d.rm();break}for(R=0,F=p.size;R<F;R+=2){if(T=p.get(R),w=p.get(R+1),O?(T=this.Mc.zu(N,z,T,!0),O=!1):T=this.Mc.addElement(T,-1),this.$d.rg){this.Ni=this.$d.rm(),a=!0;break}this.g.Pa(w,o)==-1?this.g.Ra(w,o,T):this.g.Ra(w,l,T)}if(a)break;p.Bh(0)}return this.g.Td(o),this.g.Td(l),a},c.prototype.qO=function(a,r){return this.$d.compare(this.Mc,this.Mc.ja(a),r),a=this.$d.rg,this.$d.Kr(),a},c.yE=function(a){for(var r=a.ld;r!=-1;r=a.ue(r))if(u.aa.Hc(a.ic(r)))return!0;return!1},c.fQ=function(a,r,o,l){return!!c.yE(a)&&((r=new c(l)).g=a,r.qa=o,15>a.fd?a=r.nP():r.oP())},c.V=function(a,r,o){return c.fQ(a,a.IF(),r,o)},c.kI=function(a,r,o,l,d){if(!c.yE(r))return!1;var p=new c(d);if(p.g=r,p.qa=o,p.cA=a,p.lI())return l!=null&&l.Wt(p.Ni),!0;var g=new u.Dd;return g.$B(),r.Oc(g),(p=new c(d)).g=r,p.qa=o,p.cA=a,a=p.lI(),g.$B(),r.Oc(g),!!a&&(l!=null&&l.Wt(p.Ni),!0)},c.Ml=function(a,r){return!(16>(a=a.I()))&&2*a+Math.log(a)*Math.LOG10E/Math.log(2)*r<1*a*r},c.lP=function(a,r,o,l){var d=r.getType();if(u.aa.Hc(d))return new c(l).mP(a,r,o);throw u.i.fa("crack_A_with_B")},c.prototype.mP=function(a,r,o){var l=new u.l;a.xc(l);var d=new u.l;if(r.xc(d),d.W(o,o),!d.isIntersecting(l))return a;var p=a.Bb,g=null;p!=null&&(g=p.Fb),c.Ml(a,a.I())&&(g=u.ta.jj(a,d));var v=g!=null?g.getIterator():null,w=r.Ga();r=a.Ga();var T=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(d=[];w.$a();)for(;w.Ha();){var $=w.ha();if(g!=null){for(v.Uo($,o),p=v.next();p!=-1;p=v.next())if(this.Xq(),r.Vb(g.ja(p),-1),r.Ha()){var C=(p=r.ha()).Ea($,null,T,null,o);for(p=0;p<C;++p){var O=T[p];if(O!=0&&O!=1){var N=r.wb(),R=new b;R.t=O,R.index=N,d.push(R)}}}}else{var F=new u.l;if($.xc(F),F.W(o,o),l.isIntersecting(F)){for(r.Zi();r.$a();)for(;r.Ha();)if(this.Xq(),p=r.ha(),O=new u.l,p.xc(O),O.isIntersecting(F))for(C=p.Ea($,null,T,null,o),p=0;p<C;++p)(O=T[p])!=0&&O!=1&&(N=r.wb(),(R=new b).t=O,R.index=N,d.push(R))}}}if(d.length==0)return a;for(d=d.sort(b.Ey),a=a.Ia(),r.Zi();r.$a()&&!r.Ha(););for(o=r.ha(),l=new u.ig,g=-1,p=0,v=d.length;p<v;){for(T=d[p].index,w=p+1;w<v&&d[w].index==T;)++w;for(;r.wb()<T;){if(this.Xq(),$=r.Ha(),O=r.gb,(F=$||!r.On()||r.Pn())&&a.oc(o,g!=O),g=O,!$)for(;r.$a()&&!r.Ha(););o=r.ha()}for(T=0;p<w;p++)(O=d[p].t)!=T&&(o.ah(T,O,l),T=O,O=r.gb,a.oc(l.get(),g!=O),g=O);if((F=($=r.Ha())||!r.On()||r.Pn())&&(o.ah(T,1,l),a.oc(l.get(),!1)),$)o=r.ha();else{for(;r.$a()&&!r.Ha(););o=r.Ha()?r.ha():null}p=w}for(o!=null&&(O=r.gb,(F=($=r.Ha())||!r.On()||r.Pn())&&a.oc(o,g!=O),g=O),$=r.Ha();;){if(!$){for(;r.$a()&&!($=r.Ha()););if(!$)break}o=r.ha(),O=r.gb,(F=($=r.Ha())||!r.On()||r.Pn())&&a.oc(o,g!=O),g=O}return a},c}();u.$t=A;var b=function(){function c(){}return c.Ey=function(a,r){return a.index==r.index?a.t>r.t?1:a.t<r.t?-1:0:a.index>r.index?1:-1},c}()}(V||(V={})),function(u){var A;(A=u.KK||(u.KK={}))[A.Left=0]="Left",A[A.Right=1]="Right",A[A.Coincident=2]="Coincident",A[A.Undefined=3]="Undefined",A[A.Uncut=4]="Uncut";var b=function(r,o,l,d,p,g,v,w,T,$,C){this.X=r,this.bt=o,this.Ns=l,this.tg=d,this.Lm=$,this.Al=C};u.uY=b;var c=function(){function r(o,l){this.JH=o,this.Hi=l}return r.prototype.qM=function(o,l){var d=new u.h;this.Hi.D(o,d);var p=new u.h;return this.Hi.D(l,p),(d=d.compare(p))!=0?d:(o=this.Hi.Pa(o,this.JH))<(l=this.Hi.Pa(l,this.JH))?-1:o==l?0:1},r}(),a=function(r,o,l,d,p,g,v,w,T){this.tg=r,this.Ns=o,this.OA=l,this.UH=d,this.Ei=p,this.Al=g,this.Lm=v,this.VH=w,this.OT=T};u.tY=a,u.LK=function(){function r(){}return r.JK=function(o,l,d,p,g,v){if(l.B())o=new b(l,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),g.push(o);else if(d.B())o=new b(l,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),g.push(o);else{var w=new u.gd;if(w.Ib(l),w.Ib(d),u.Tk.V(w,p,v,!0),w.fd==0)o=new b(l.Ia(),4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),g.push(o);else{for(l=0,d=w.Gd(),p=w.ld;p!=-1;p=w.ue(p))for(v=w.Ob(p);v!=-1;v=w.Rb(v))for(var T=w.Xa(v),$=0,C=w.Ja(v);$<C;T=w.U(T),$++)w.Ra(T,d,l++);l=r.HM(d,w),r.cM(o,l,w,g)}}},r.HM=function(o,l){for(var d=l.fd,p=new u.ia(0),g=l.ld;g!=-1;g=l.ue(g))for(var v=l.Ob(g);v!=-1;v=l.Rb(v))for(var w=l.Xa(v),T=0,$=l.Ja(v);T<$;w=l.U(w),T++)p.add(w);var C=new c(o,l);p.Vd(0,d,function(we,me){return C.qM(we,me)}),o=[];var O=[],N=l.Gd(),R=l.Gd();g=l.ld,v=l.ue(g),$=new u.h;var F=new u.h,G=p.get(0),z=l.bd(G),B=l.Qf(z);l.D(G,$);var q=1;for(w=0;q<d-1;){var K=!1;for(T=q;T<d;T++)if(T!=w){var ee=p.get(T),oe=l.bd(ee),ue=l.Qf(oe);if(l.D(ee,F),!$.qb(F))break;B==g&&ue==v&&(K=r.uM(N,R,l,o,O,z,G,oe,ee))}if(K||w==q-1){if(K&&w==q-1&&q--,++w==d)break;G=p.get(w),z=l.bd(G),B=l.Qf(z),l.D(G,$)}K||(q=w+1)}for(d=[],g=l.ld;g!=-1;g=l.ue(g))for(v=l.Ob(g);v!=-1;v=l.Rb(v))for(p=l.Xa(v),T=0,$=l.Ja(v);T<$;p=l.U(p),T++){if(0<=(w=l.Pa(p,R)))for(;w<O.length&&O[w].tg==p;)d.push(O[w++]);if(0<=(w=l.Pa(p,N)))for(;w<o.length&&o[w].tg==p;)d.push(o[w++])}return l.Td(N),l.Td(R),d},r.uM=function(o,l,d,p,g,v,w,T,$){var C=d.rj(v),O=d.rj(T),N=d.Xa(v),R=d.Xa(T),F=d.Ma(w),G=d.Ma($),z=!1,B=!1,q=!1,K=!1;return w!=N&&($!=R&&(z=r.vM(o,d,p,v,F,T,G)),$!=O&&(B=r.wM(o,d,p,v,F,T,$))),w!=C&&($!=R&&(q=r.xM(l,d,g,v,w,T,G,N)),$!=O&&(K=r.yM(l,d,g,v,w,T,$,N))),z&&B&&q?(o=p.length-1,g[K?g.length-2:g.length-1].Ei==2&&(p[o-1]=p[o],--p.length)):z&&B&&K&&g[g.length-1].Ei==2&&(g=p[p.length-1],--p.length,d.Pa(g.tg,o)==p.length&&d.Ra(g.tg,o,-1)),z||B||q||K},r.vM=function(o,l,d,p,g,v,w){var T=new u.yb,$=new u.yb,C=[0,0],O=[0,0],N=l.bc(g);return N==null&&(l.ed(g,T),N=T),(T=l.bc(w))==null&&(l.ed(w,$),T=$),2>(N=N.Ea(T,null,C,O,0))&&(p=new a(g,p,C[0],NaN,N,w,v,O[0],NaN),d.push(p),0>(p=l.Pa(g,o))&&l.Ra(g,o,d.length-1)),!0},r.wM=function(o,l,d,p,g,v,w){var T=new u.yb,$=new u.yb,C=[0,0],O=[0,0],N=l.bc(g);return N==null&&(l.ed(g,T),N=T),(T=l.bc(w))==null&&(l.ed(w,$),T=$),2>(N=N.Ea(T,null,C,O,0))&&(p=new a(g,p,C[0],NaN,N,w,v,O[0],NaN),d.push(p),0>(p=l.Pa(g,o))&&l.Ra(g,o,d.length-1),!0)},r.xM=function(o,l,d,p,g,v,w,T){var $=new u.yb,C=new u.yb,O=[0,0],N=[0,0],R=l.bc(g);return R==null&&(l.ed(g,$),R=$),($=l.bc(w))==null&&(l.ed(w,C),$=C),(R=R.Ea($,null,O,N,0))==2?(p=new a(g,p,O[0],O[1],R,w,v,N[0],N[1]),d.push(p),0>(p=l.Pa(g,o))&&l.Ra(g,o,d.length-1),!0):(C=!1,g==T&&(p=new a(g,p,O[0],NaN,R,w,v,N[0],NaN),d.push(p),0>(p=l.Pa(g,o))&&l.Ra(g,o,d.length-1),C=!0),C)},r.yM=function(o,l,d,p,g,v,w,T){var $=new u.yb,C=new u.yb,O=[0,0],N=[0,0],R=l.bc(g);return R==null&&(l.ed(g,$),R=$),($=l.bc(w))==null&&(l.ed(w,C),$=C),(R=R.Ea($,null,O,N,0))==2?(p=new a(g,p,O[0],O[1],R,w,v,N[0],N[1]),d.push(p),0>(p=l.Pa(g,o))&&l.Ra(g,o,d.length-1),!0):(C=!1,g==T&&(p=new a(g,p,O[0],NaN,R,w,v,N[0],NaN),d.push(p),0>(p=l.Pa(g,o))&&l.Ra(g,o,d.length-1),C=!0),C)},r.cM=function(o,l,d,p){var g=[];g[0]=new u.h,g[1]=new u.h,g[2]=new u.h,g[3]=new u.h;var v=new u.h,w=new u.h,T=new u.h,$=new u.h,C=null;p!=null&&(C=new u.ig).Or();var O=0,N=null,R=new u.yb;new u.yb;for(var F=d.Ob(d.ld);F!=-1;F=d.Rb(F)){for(var G=4,z=-1,B=-1,q=-1,K=-1,ee=NaN,oe=!0,ue=!1,we=!0,me=!0,Re=!0,fe=0,Ye=F,Ve=0,ft=d.Xa(F),jt=d.Ja(F),Oi=0;Oi<jt;ft=d.U(ft),Oi++){var Bt=d.bc(ft);if(Bt==null){if(!d.ed(ft,R))continue;Bt=R}B==-1&&(B=ft);for(var gt=0;O<l.length&&ft==l[O].tg;){z=l[O].Ns;var Xe=l[O].tg,st=l[O].OA,hi=l[O].Lm,Yt=l[O].Al,ns=l[O].VH;if(l[O].Ei==2){if(ue||(Ye=z,B=Xe,Ve=st,q=hi,K=Yt,ee=ns,G=2,p!=null?N=new u.Ta:fe=0,Re=!1,me=!0),st=l[O].UH,ns=l[O].OT,p!=null?(Bt.ah(gt,l[O].UH,C),N.oc(C.get(),me)):fe++,gt=st,ue=!0,me=oe=!1,O+1==l.length||l[O+1].Ei!=2||l[O+1].tg==Xe&&l[O+1].OA!=gt){if(p!=null){var dt=new b(N,2,z,Xe,st,G,Ye,B,Ve,hi,Yt);p.push(dt)}else null.add(fe);Ye=z,B=Xe,Ve=st,q=hi,K=Yt,ee=ns,G=2,ue=oe=!1,me=Re=!0}}else{var On=d.U(Xe);if(O<l.length-1&&l[O+1].tg==On&&l[O+1].Al==Yt&&l[O+1].Ei==2)st!=gt&&(Re&&(p!=null?N=new u.Ta:fe=0),oe=0<O&&l[O-1].Ns==z?G==1?0:G==0?1:3:3,p!=null?(Bt.ah(gt,st,C),N.oc(C.get(),me),dt=new b(N,oe,z,Xe,st,G,Ye,B,Ve,hi,Yt),p.push(dt)):(fe++,null.add(fe)),gt=st,Ye=z,B=Xe,Ve=st,q=hi,K=Yt,ee=ns,G=oe,oe=we=!1,me=Re=!0);else if(!r.CM(o,d,l,O,v,w)){r.zM(d,l,O,F,ft,T,$);var Mt=!1;if(On=!1,dt=!0,!(v.qb(T)||w.qb(T)||v.qb($)||w.qb($))){g[0].L(v),g[1].L(w),g[2].L(T),g[3].L($),g.sort(u.h.nu);var Pn=g[0],wp=g[1],_p=g[2],Q=g[3];Pn.qb(v)?wp.qb(w)?o?(On=Mt=!0,dt=!1):Mt=!1:Q.qb(w)?o?dt=On=Mt=!0:Mt=!1:(Mt=!0,dt=wp.qb(T)):wp.qb(v)?_p.qb(w)?o?(On=Mt=!0,dt=!1):Mt=!1:Pn.qb(w)?o?dt=On=Mt=!0:Mt=!1:(Mt=!0,dt=_p.qb(T)):_p.qb(v)?Q.qb(w)?o?(On=Mt=!0,dt=!1):Mt=!1:wp.qb(w)?o?dt=On=Mt=!0:Mt=!1:(Mt=!0,dt=Q.qb(T)):Pn.qb(w)?o?(On=Mt=!0,dt=!1):Mt=!1:_p.qb(w)?o?dt=On=Mt=!0:Mt=!1:(Mt=!0,dt=Pn.qb(T))}Mt&&(Mt=ft==Xe,(st!=gt||Mt&&gt==0)&&(Re&&(p!=null?N=new u.Ta:fe=0),p!=null?(Bt.ah(gt,st,C),N.oc(C.get(),me)):fe++),dt?G!=1?((st!=gt||Mt&&gt==0)&&(p!=null?(dt=new b(N,1,z,Xe,st,G,Ye,B,Ve,hi,Yt),p.push(dt)):null.add(fe)),On?(O>=l.length-2||l[O+2].Ns!=z)&&(G=0):G=1):((st!=gt||Mt&&gt==0)&&(p!=null?(dt=new b(N,3,z,Xe,st,G,Ye,B,Ve,hi,Yt),p.push(dt)):null.add(fe)),G=1):G!=0?((st!=gt||Mt&&gt==0)&&(p!=null?(dt=new b(N,0,z,Xe,st,G,Ye,B,Ve,hi,Yt),p.push(dt)):null.add(fe)),On?(O>=l.length-2||l[O+2].Ns!=z)&&(G=1):G=0):((st!=gt||Mt&&gt==0)&&(p!=null?(dt=new b(N,3,z,Xe,st,G,Ye,B,Ve,hi,Yt),p.push(dt)):null.add(fe)),G=0),(st!=gt||Mt&&gt==0)&&(gt=st,Ye=z,B=Xe,Ve=st,q=hi,K=Yt,ee=ns,oe=we=!1,me=Re=!0))}}O++}gt!=1&&(Re&&(p!=null?N=new u.Ta:fe=0),p!=null?(Bt.ah(gt,1,C),N.oc(C.get(),me)):fe++,me=Re=!1,we=!0)}we&&(st=1,Xe=d.rj(F),Xe=d.Ma(Xe),Yt=hi=-1,ns=NaN,oe?p!=null?(dt=new b(N,4,z,Xe,st,G,Ye,B,Ve,hi,Yt),p.push(dt)):null.add(fe):(oe=G==1?0:G==0?1:3,p!=null?(dt=new b(N,oe,z,Xe,st,G,Ye,B,Ve,hi,Yt),p.push(dt)):null.add(fe)))}},r.CM=function(o,l,d,p,g,v){var w=d[p].VH;if(w==1)return r.AM(o,l,d,p,g,v);if(w==0)return r.BM(o,l,d,p,g,v);throw u.i.Qa()},r.AM=function(o,l,d,p,g,v){var w=new u.yb,T=d[p].tg,$=d[p].Lm,C=d[p].Al,O=-1,N=-1,R=-1,F=-1;if(!o&&0<p){var G=d[p-1];O=G.tg,N=G.Lm,R=G.Al,F=G.Ei}var z=-1,B=-1,q=-1,K=-1;p<d.length-1&&(z=(G=d[p+1]).tg,B=G.Lm,q=G.Al,K=G.Ei);var ee=l.U(T);return G=l.U(C),o?p==d.length-1||z!=T||B!=$||q!=G||K==2?((o=l.bc(C))==null&&(l.ed(C,w),o=w),v.L(o.kg()),g.mt(v),v.normalize(),g.normalize(),!1):((o=l.bc(C))==null&&(l.ed(C,w),o=w),g.L(o.kg()),(o=l.bc(G))==null&&(l.ed(G,w),o=w),v.L(o.kg()),g.Sq(),v.normalize(),g.normalize(),!1):0<p&&O==T&&N==$&&R==G&&F==2||p<d.length-1&&z==ee&&B==$&&q==G&&K==2?((o=l.bc(C))==null&&(l.ed(C,w),o=w),v.L(o.kg()),g.mt(v),v.normalize(),g.normalize(),!1):!(p<d.length-1&&z==T&&B==$&&q==G)||((o=l.bc(C))==null&&(l.ed(C,w),o=w),g.L(o.kg()),(o=l.bc(G))==null&&(l.ed(G,w),o=w),v.L(o.kg()),g.Sq(),v.normalize(),g.normalize(),!1)},r.BM=function(o,l,d,p,g,v){var w=new u.yb,T=d[p].tg,$=d[p].Lm,C=d[p].Al,O=-1,N=-1,R=-1,F=-1;if(!o&&p<d.length-1){var G=d[p+1];O=G.tg,N=G.Lm,R=G.Al,F=G.Ei}var z=-1,B=-1,q=-1;G=-1,0<p&&(z=(G=d[p-1]).tg,B=G.Lm,q=G.Al,G=G.Ei);var K=l.U(T),ee=l.Ma(C);return o?p!=0&&z==T&&B==$&&q==ee&&G!=2||((o=l.bc(C))==null&&(l.ed(C,w),o=w),v.L(o.kg()),g.mt(v),v.normalize(),g.normalize(),!1):!(0<p&&z==T&&B==$&&q==ee&&G==2||p<d.length-1&&O==K&&N==$&&R==ee&&F==2)||((o=l.bc(C))==null&&(l.ed(C,w),o=w),v.L(o.kg()),g.mt(v),v.normalize(),g.normalize(),!1)},r.zM=function(o,l,d,p,g,v,w){var T=new u.yb,$=o.bc(g);if($==null&&(o.ed(g,T),$=T),l=(d=l[d]).tg,d=d.OA,g=o.U(l),d==1)v.L($.kg()),g!=-1&&g!=o.rj(p)?(($=o.bc(g))==null&&(o.ed(g,T),$=T),w.L($.kg()),($=o.bc(l))==null&&o.ed(l,T)):w.L(v),v.Sq(),w.normalize(),v.normalize();else{if(d!=0)throw u.i.Qa();w.L($.kg()),v.mt(w),w.normalize(),v.normalize()}},r}()}(V||(V={})),function(u){var A;(A=u.bM||(u.bM={}))[A.Linear=0]="Linear",A[A.Angular=1]="Angular",A[A.Area=2]="Area";var b=function(){function p(g,v,w){this.od=v,this.ai=w,this.vA=g}return p.prototype.Nb=function(g){return g instanceof p&&this.ai===g.ai},p.aG=function(g){return g.od!==0?null:g.vA===-1?new p(-1,2,g.ai*g.ai):p.Zg(l[g.vA])},p.Zg=function(g){return(g=o[g])===void 0?null:g},p.ZO=function(g,v,w){var T=null;if(w!=null)try{w.values[0]==="EPSG"&&(T=p.Zg(parseInt(w.values[1])))}catch{}return T===null&&(T=new p(-1,g,v)),T},p.prototype.Ec=function(){return this.vA},p.prototype.CF=function(g){if(g.od!=this.od)throw u.i.Hb();return this.ai/g.ai},p.Nh=function(g,v,w){return v.CF(w)*g},p.XE=function(g,v,w,T,$){for(w=w.CF(T),T=0;T<v;T++)$[T]=g[T]*w},p}();u.Tc=b;for(var c=[109401,1e4,109402,4046.8564224,109403,4046.87260987425,109404,1,109405,.09290304,109406,.09290341161327487,109407,.09290137299531805,109408,3.34450944,109409,3429904,109410,1.000027193184865,109411,404.6872609874253,109412,.04046872609874253,109413,2.5899984703195216e6,109414,1e6,109415,.8361123569578626,109416,404.67838076760535,109417,.04046783807676053,109418,.8361244606523066,109419,.09290271785025629,109420,404.68423895571647,109421,.04046842389557164,109422,.83612589696064,109423,.0929028774400711,109424,404.6849341289498,109425,.04046849341289498,109426,.836125904805842,109427,.09290287831176021,109428,404.68493792602754,109429,.04046849379260275,109430,.09290354800069446,109431,.09290274144751023,109432,.09290207073852812,109433,.09290279616016,109434,.09290273520025,109435,.836124673027592,109436,.836118636646753,109437,.8361251654414399,109438,.83612461680225,109439,2589988110336e-6,109440,.09290286332673177,109441,.09290349665192114,109442,.83612736,109443,.8361307045194736,109444,404.68564224000005,109445,.04046856422400001,109446,.8361237024040001,109447,.0929026336004445,109448,404.683871963536,109449,.0404683871963536,109450,.01,109451,1e-4,109452,1e-6,109453,64516e-8,109454,.0006451625806477421,109455,25.292852640000003,109456,25.29295381171408,109457,3.4345281495040003e6,109458,3434290937856e-6,109459,2.89612324,109460,25e8,109461,225e8,109462,.7168473118308245,109463,100,109464,1244521604938272e-22,109465,1e-12,109466,1e-18],a=[1031,484813681109536e-23,9101,1,9102,.0174532925199433,9103,.0002908882086657216,9104,484813681109536e-20,9105,.01570796326794897,9106,.01570796326794897,9109,1e-6,9112,.0001570796326794897,9113,1570796326794897e-21,9114,.0009817477042468104],r=[1025,.001,109452,1033,.01,109451,9001,1,109404,9002,.3048,109405,9003,.3048006096012192,109406,9005,.3047972654,109407,9014,1.8288,109408,9030,1852,109409,9031,1.0000135965,109410,9033,20.11684023368047,109411,9034,.2011684023368047,109412,9035,1609.3472186944375,109413,9036,1e3,109414,9037,.9143917962000001,109415,9038,20.1166195164,109416,9039,.201166195164,109417,9040,.9143984146160287,109418,9041,.304799471538676,109419,9042,20.116765121552632,109420,9043,.2011676512155263,109421,9050,.9143992,109422,9051,.3047997333333333,109423,9052,20.1167824,109424,9053,.201167824,109425,9060,.9143992042898124,109426,9061,.3047997347632708,109427,9062,20.116782494375872,109428,9063,.2011678249437587,109429,9070,.3048008333333334,109430,9080,.3047995102481469,109431,9081,.30479841,109432,9082,.3047996,109433,9083,.3047995,109434,9084,.9143985307444408,109435,9085,.91439523,109436,9086,.9143988,109437,9087,.9143985,109438,9093,1609.344,109439,9094,.3047997101815088,109440,9095,.3048007491,109441,9096,.9144,109442,9097,20.1168,109444,9098,.201168,109445,9099,.914398,109446,9300,.3047993333333334,109447,9301,20.116756,109448,9302,.20116756,109449,109001,.9144,109442,109002,.9144018288036576,109443,109003,20.1168,109444,109004,.201168,109445,109005,.1,109450,109006,.01,109451,109007,.001,109452,109008,.0254,109453,109009,.0254000508001016,109454,109010,5.0292,109455,109011,5.029210058420118,109456,109012,1853.248,109457,109013,1853.184,109458,109014,1.7018,109459,109015,.8466683600033867,109462,109016,.0003527777777777778,109464,109017,1e-6,109465,109018,1e-9,109466,109030,5e4,109460,109031,15e4,109461],o=[],l=[],d=0;d<c.length;d+=2)o[c[d]]=new b(c[d],2,c[d+1]);for(c=null,d=0;d<a.length;d+=2)o[a[d]]=new b(a[d],1,a[d+1]);for(a=null,d=0;d<r.length;d+=3)o[r[d]]=new b(r[d],0,r[d+1]),l[r[d]]=r[d+2];r=null}(V||(V={})),function(u){var A=function(){function b(){this.xb=this.pb=0}return b.prototype.set=function(c,a){a!==void 0?(this.pb=c,this.xb=a):typeof c=="number"?(this.pb=c,this.xb=0):(this.pb=c.pb,this.xb=c.xb)},b.prototype.value=function(){return this.pb},b.prototype.add=function(c){var a=this.pb+c.pb;c=this.xb+c.xb+2220446049250313e-31*Math.abs(a),this.pb=a,this.xb=c},b.prototype.kN=function(){var c=this.pb+1,a=this.xb+2220446049250313e-31*Math.abs(c);this.pb=c,this.xb=a},b.prototype.dN=function(c,a){this.pb=c.pb+a.pb,this.xb=c.xb+a.xb+2220446049250313e-31*Math.abs(this.pb)},b.prototype.sub=function(c){if(typeof c=="number"){var a=this.pb-c;c=this.xb+2220446049250313e-31*Math.abs(a)}else a=this.pb-c.pb,c=this.xb+c.xb+2220446049250313e-31*Math.abs(a);this.pb=a,this.xb=c},b.prototype.Ag=function(c){var a=this.pb*c.pb;this.xb=this.xb*Math.abs(c.pb)+c.xb*Math.abs(this.pb)+this.xb*c.xb+2220446049250313e-31*Math.abs(a),this.pb=a},b.prototype.No=function(c){var a=this.pb*c;this.xb=this.xb*Math.abs(c)+2220446049250313e-31*Math.abs(a),this.pb=a},b.prototype.Kl=function(c,a){var r=Math.abs(c.pb)*Math.abs(a.pb);this.xb=c.xb*Math.abs(a.pb)+a.xb*Math.abs(c.pb)+c.xb*a.xb+2220446049250313e-31*Math.abs(r),this.pb=r},b.prototype.jm=function(c){var a=Math.abs(c.pb),r=this.pb/c.pb,o=(this.xb+Math.abs(r)*c.xb)/a;c.xb>.01*a&&(o*=1+(1+(c=c.xb/a))*c),this.pb=r,this.xb=o+2220446049250313e-31*Math.abs(r)},b.prototype.sqrt=function(){if(0<=this.pb){var c=Math.sqrt(this.pb),a=this.pb>10*this.xb?.5*this.xb/c:this.pb>this.xb?c-Math.sqrt(this.pb-this.xb):Math.max(c,Math.sqrt(this.pb+this.xb)-c);a+=2220446049250313e-31*Math.abs(c)}else this.pb<-1*this.xb?a=c=NaN:(c=0,a=Math.sqrt(this.xb));this.pb=c,this.xb=a},b.prototype.sin=function(c){var a=Math.sin(c.pb),r=Math.cos(c.pb);this.pb=a,a=Math.abs(a),this.xb=(Math.abs(r)+.5*a*c.xb)*c.xb+2220446049250313e-31*a},b.prototype.cos=function(c){var a=Math.sin(c.pb),r=Math.cos(c.pb);this.pb=r,r=Math.abs(r),this.xb=(Math.abs(a)+.5*r*c.xb)*c.xb+2220446049250313e-31*r},b.prototype.qg=function(){return Math.abs(this.pb)<=this.xb},b.prototype.ps=function(){return this.qg()&&this.xb!=0},b}();u.Wb=A}(V||(V={}));var Mi=new V.h,Fs=new V.h,An=new V.h,wa=new V.h,Rl=new V.h;(function(u){var A,b;(b=A||(A={}))[b.closedPath=1]="closedPath",b[b.exteriorPath=2]="exteriorPath",b[b.ringAreaValid=4]="ringAreaValid";var c=function(){function a(r,o,l,d,p,g,v){o!==void 0?(this.ib=r,this.ck=o,this.bl=l,this.ii=d,this.ya=g,this.hA=v,this.ew=p):(this.ib=r.ib,this.ck=r.ck,this.bl=r.bl,this.ii=r.ii,this.ya=r.ya,this.hA=r.hA,this.ew=r.ew),this.bH=!0}return a.prototype.next=function(){return this.bH?(this.bH=!1,this.ii):this.ii!=-1?(this.ii=this.ib.U(this.ii),this.ya++,this.ii!=-1&&this.ii!=this.ew?this.ii:this.$T()):-1},a.prototype.$T=function(){for(this.bl=this.ib.Rb(this.bl),this.ya=0;this.ck!=-1;){for(;this.bl!=-1;this.bl=this.ib.Rb(this.bl))if(this.ew=this.ii=this.ib.Xa(this.bl),this.ii!=-1)return this.ii;if(this.ck=this.ib.ue(this.ck),this.ck==-1)break;this.hA&&!u.aa.Hc(this.ib.ic(this.ck))||(this.bl=this.ib.Ob(this.ck))}return-1},a.AP=function(r,o,l,d,p,g,v){return new a(r,o,l,d,p,g,v)},a}();u.zY=c,A=function(){function a(){this.jo=this.Am=this.wk=this.cd=this.Ck=this.vo=this.Oi=this.md=this.bi=this.Sg=this.We=this.Il=null,this.qw=this.ld=-1,this.fd=0,this.fA=!1,this.ht=this.it=this.vb=null}return a.prototype.Sh=function(r){return this.We!=null?this.We[r]:null},a.prototype.Xg=function(r,o){if(this.We==null){if(o==null)return;this.We=[];for(var l=0,d=this.vb.I();l<d;l++)this.We.push(null)}this.We[r]=o},a.prototype.bp=function(r,o){this.md.S(r,1,o)},a.prototype.ap=function(r,o){this.md.S(r,2,o)},a.prototype.VB=function(r,o){this.md.S(r,6,o)},a.prototype.Sp=function(r){return this.md.T(r,6)},a.prototype.gx=function(r,o){this.md.S(r,7,o)},a.prototype.qv=function(r){return this.md.T(r,0)},a.prototype.OJ=function(r,o){this.cd.S(r,1,o)},a.prototype.SJ=function(r,o){this.cd.S(r,0,o)},a.prototype.JF=function(r){return this.cd.T(r,7)},a.prototype.Zo=function(r,o){this.cd.S(r,3,o)},a.prototype.$o=function(r,o){this.cd.S(r,4,o)},a.prototype.uU=function(r){this.cd==null&&(this.cd=new u.$c(8));var o=this.cd.Ce();return this.cd.S(o,2,r),this.cd.S(o,5,0),this.cd.S(o,6,0),this.cd.S(o,7,o),o},a.prototype.OQ=function(r){this.cd.jd(r)},a.prototype.wU=function(r){this.md==null&&(this.md=new u.$c(8),this.td=new u.$c(5),this.Oi=new u.be(0),this.vo=new u.be(0));var o=this.md.Ce();return this.md.S(o,0,o),this.md.S(o,3,0),this.md.S(o,6,0),this.gx(o,r),o>=this.Oi.size&&(r=16>o?16:u.O.truncate(3*o/2),this.Oi.resize(r),this.vo.resize(r)),this.Oi.set(o,0),this.vo.set(o,0),o},a.prototype.sF=function(r){this.md.jd(r)},a.prototype.Vy=function(r){this.td.jd(r),this.fd--},a.prototype.oI=function(r){this.md==null&&(this.md=new u.$c(8),this.td=new u.$c(5),this.Oi=new u.be(0),this.vo=new u.be(0));var o=this.td.Ce(),l=0<=r?r:o;if(this.td.S(o,0,l),0>r){if(l>=this.vb.I()){if(r=16>l?16:u.O.truncate(3*l/2),this.vb.resize(r),this.We!=null)for(var d=0;d<r;d++)this.We.push(null);this.Sg!=null&&this.Sg.resize(r),this.it=this.vb.ub(0)}this.vb.Cb(l,-1e38,-1e38),this.We!=null&&(this.We[l]=null),this.Sg!=null&&this.Sg.write(l,1)}return this.td.S(o,4,2*l),this.fd++,o},a.prototype.wj=function(r,o,l){var d=o!=-1?this.Ma(o):this.rj(r),p=d!=-1?this.U(d):-1,g=this.oI(l==null?this.fd:-1),v=this.Ua(g);return l!=null&&this.vb.Ht(v,l),this.aj(g,r),this.Bc(g,p),this.Cc(g,d),p!=-1&&this.Cc(p,g),d!=-1&&this.Bc(d,g),l=this.dc(r),d=this.Xa(r),o==-1&&this.Wg(r,g),o==d&&this.Jf(r,g),l&&p==-1&&(this.Bc(g,g),this.Cc(g,g)),this.Vj(r,this.Ja(r)+1),r=this.Qf(r),this.Tj(r,this.I(r)+1),g},a.prototype.nm=function(){return this.jo==null&&(this.jo=new u.Sa(this.vb.description)),this.jo},a.prototype.Yo=function(r,o){this.cd.S(r,2,-134217729&this.cd.T(r,2)||(o==1?134217728:0))},a.prototype.In=function(r){return 134217728&this.cd.T(r,2)?1:0},a.prototype.hN=function(r){var o=this.Ig(r.getType(),r.description);return r.getType()==1736&&this.Yo(o,r.In()),this.UD(o,r),o},a.prototype.iN=function(r){var o=this.Ig(r.getType(),r.description);return this.VD(o,r),o},a.prototype.XV=function(r,o){this.md==null&&(this.md=new u.$c(8),this.td=new u.$c(5),this.Oi=new u.be(0),this.vo=new u.be(0)),this.md.De(this.md.Hg+r),this.td.De(this.td.Hg+o),this.Oi.Jb(this.Oi.size+r),this.vo.Jb(this.vo.size+r)},a.prototype.UD=function(r,o){this.XV(o.da(),o.I()),this.Il.Fd(o,0,o.I()),this.it=this.vb.ub(0);for(var l=this.We!=null&&o.Ve!=null,d=0,p=o.da();d<p;d++)if(!(2>o.Ja(d))){var g=this.vf(r,-1);this.kn(g,o.dc(d));for(var v=o.Ba(d),w=o.Vc(d);v<w;v++){var T=this.wj(g,-1,null);if(l)if(T=this.Ua(T),1&o.ZF(v))this.Xg(T,null);else{var $=new u.ig;o.bc(v,$,!0),this.Xg(T,$.get())}}}},a.prototype.VD=function(r,o){this.Il.Fd(o,0,o.I()),this.it=this.vb.ub(0),r=this.vf(r,-1);var l=0;for(o=o.I();l<o;l++)this.wj(r,-1,null)},a.prototype.NX=function(r,o,l){var d=this.U(r);if(d==-1)throw u.i.Qa();for(var p=this.nm(),g=this.bd(r),v=0,w=o.ol(l);v<w;v++){var T=this.Ua(r),$=this.U(r),C=o.Vp(l,v);v==0&&(C.To(p),this.Dh(r,p)),C.getType()==322?this.Xg(T,null):this.Xg(T,u.aa.jg(C)),C.Po(p),v<w-1?r=this.wj(g,$,p):this.Dh(d,p)}},a.prototype.MX=function(r,o,l){var d=this.U(r);if(d==-1)throw u.i.Qa();for(var p=this.nm(),g=this.bd(r),v=0,w=o.ol(l);v<w;v++){var T=this.Ua(r),$=this.U(r),C=o.Vp(l,w-v-1);v==0&&(C.Po(p),this.Dh(r,p)),C.getType()==322?this.Xg(T,null):this.Xg(T,u.aa.jg(C)),C.To(p),v<w-1?r=this.wj(g,$,p):this.Dh(d,p)}},a.prototype.IF=function(){var r=new u.l;r.Oa();for(var o=this.Yq(),l=new u.h,d=!0,p=o.next();p!=-1;p=o.next())this.D(p,l),d?r.Zb(l.x,l.y):r.Lk(l.x,l.y),d=!1;return r},a.prototype.Ib=function(r){var o=r.getType();if(u.aa.Hc(o))return this.hN(r);if(o==550)return this.iN(r);throw u.i.Qa()},a.prototype.uN=function(r,o){var l=o.getType();if(u.aa.Hc(l))this.UD(r,o);else{if(l!=550)throw u.i.Qa();this.VD(r,o)}},a.prototype.mN=function(r,o){var l=this.Ig(1736,r.description);if(2>r.Ja(o))return l;this.Il.Fd(r,r.Ba(o),r.Vc(o)),this.it=this.vb.ub(0);var d=this.vf(l,-1);this.kn(d,r.dc(o)||!0);var p=this.We!=null&&r.Ve!=null,g=r.Ba(o);for(o=r.Vc(o);g<o;g++){var v=this.wj(d,-1,null);if(p)if(v=this.Ua(v),1&r.ZF(g))this.Xg(v,null);else{var w=new u.ig;r.bc(g,w,!0),this.Xg(v,w.get())}}return l},a.prototype.Ne=function(r){var o=this.ic(r),l=u.ZK.Ig(o,this.Il.description),d=this.I(r);if(d==0)return l;if(u.aa.Hc(o)){o=this.da(r);for(var p=u.Yc.Oh(o+1),g=u.Yc.Mr(o+1,0),v=l.description,w=0,T=v.Aa;w<T;w++){for(var $=v.kd(w),C=u.ra.Va($),O=u.Yc.YE($,d),N=this.vb.ub($),R=0,F=0,G=0,z=this.Ob(r);z!=-1;z=this.Rb(z)){var B=0;this.dc(z)&&(B|=1),this.YS(z)&&(B|=4),B!=0&&g.zJ(F,B);var q=this.Ja(z);if(p.write(F++,G),G+=q,$==0){q=N;var K=O,ee=new u.h;for(B=this.Xa(z);R<G;B=this.U(B),R++){var oe=this.Ua(B);q.tc(2*oe,ee),K.Tt(2*R,ee)}}else for(B=this.Xa(z);R<G;B=this.U(B),R++)for(oe=this.Ua(B),K=0;K<C;K++)ee=N.eg(oe*C+K),O.pr(R*C+K,ee)}l.hn($,O),p.write(o,d)}l.PJ(g),l.QJ(p),l.Pc(16777215)}else if(o==550){for(v=l.description,l.resize(d),w=0,T=v.Aa;w<T;w++){for($=v.kd(w),C=u.ra.Va($),O=l.ub($),N=this.vb.ub($),R=0,z=this.Ob(r),q=this.Ja(z),B=this.Xa(z);R<q;B=this.U(B),R++)for(oe=this.Ua(B),K=0;K<C;K++)ee=N.eg(oe*C+K),O.pr(R*C+K,ee);l.hn($,O)}l.Pc(16777215)}return l},a.prototype.BB=function(r){for(var o=this.Ob(r);o!=-1;o=this.Zq(o));o=this.PR(r);var l=this.ue(r);o!=-1?this.OJ(o,l):this.ld=l,l!=-1?this.SJ(l,o):this.qw=o,this.OQ(r)},a.prototype.Ig=function(r,o){return o===void 0?this.$E(r,u.ee.og()):this.$E(r,o)},a.prototype.$E=function(r,o){return r=this.uU(r),this.vb==null?this.vb=this.Il=new u.de(o):this.Il.Jl(o),this.ht=this.Il.description,this.fA=1<this.ht.Aa,this.ld==-1?this.ld=r:(this.SJ(r,this.qw),this.OJ(this.qw,r)),this.qw=r},a.prototype.ue=function(r){return this.cd.T(r,1)},a.prototype.PR=function(r){return this.cd.T(r,0)},a.prototype.ic=function(r){return 2147483647&this.cd.T(r,2)},a.prototype.HJ=function(r,o,l){o=this.wk[o],(r=this.JF(r))>=o.size&&o.resize(Math.max(u.O.truncate(1.25*r),16),-1),o.write(r,l)},a.prototype.KF=function(r,o){return(r=this.JF(r))<(o=this.wk[o]).size?o.read(r):-1},a.prototype.aF=function(){this.wk==null&&(this.wk=[]);for(var r=0;r<this.wk.length;r++)if(this.wk[r]==null)return this.wk[r]=u.Yc.Oh(0),r;return this.wk.push(u.Yc.Oh(0)),this.wk.length-1},a.prototype.xW=function(r){this.wk[r]=null},a.prototype.Ob=function(r){return this.cd.T(r,3)},a.prototype.kv=function(r){return this.cd.T(r,4)},a.prototype.I=function(r){return this.cd.T(r,5)},a.prototype.da=function(r){return this.cd.T(r,6)},a.prototype.Gp=function(r,o,l){for(var d=0,p=this.ld;p!=-1;p=this.ue(p)){var g=this.ic(p);if(u.aa.Hc(g)&&(!l||g==1736)){g=this.ic(p)==1736;for(var v=this.Ob(p);v!=-1;){for(var w=0,T=this.Xa(v);w<u.O.truncate(this.Ja(v)/2);){var $=this.U(T);if($==-1)break;var C=this.Ua(T),O=this.Sh(C);O!=null?C=O.Qb():(O=this.Ua($),C=this.vb.yr(C,O)),C<=r?(C==0?d==0&&(d=-1):d=1,$!=this.rj(v)&&(this.lC($,T),this.pd($,!0))):T=this.U(T),w++}for(w=this.Xa(v),T=this.dc(v)?w:this.rj(v);0<this.Ja(v);){if(($=this.Ma(T))==-1){this.pd(T,!0),d==0&&(d=-1);break}var N=this.Ua($);if((O=this.Sh(N))!=null?C=O.Qb():(C=this.Ua(T),C=this.vb.yr(C,N)),C<=r)C==0?d==0&&(d=-1):d=1,this.lC($,T),this.pd($,!1),w==$&&(w=this.Xa(v));else if((T=this.Ma(T))==w)break}T=this.Ja(v),o&&(g?3>T:2>T)?(v=this.Zq(v),d=0<T?1:d==0?-1:d):v=this.Rb(v)}}}return d},a.prototype.lC=function(r,o){var l=this.Ua(r),d=this.Ua(o);if(this.Sg!=null&&(l=this.Sg.read(l),this.Sg.write(d,l)),this.bi!=null){for(d=0,l=this.bi.length;d<l;d++)if(this.bi[d]!=null){var p=this.Pa(r,d);p!=-1&&this.Ra(o,d,p)}}},a.prototype.Ul=function(r,o,l){var d=0,p=this.U(r);if(p==-1)throw u.i.Qa();for(var g=this.Ua(r),v=this.Ua(p),w=this.Sh(g),T=w==null?this.vb.yr(g,v):w.Qb(),$=0;$<l;$++){var C=o[$];if(0<C&&1>C){var O=C;w!=null&&(O=0<T?w.Ux(C)/T:0),this.vb.kD(g,v,O,this.nm());var N=this.wj(this.bd(r),p,this.nm());if(d++,w!=null){var R=w.dl(0,C);O=this.Ua(this.Ma(N)),this.Xg(O,R),this.mf(N,R.wc()),$!=l-1&&o[$+1]!=1||(C=w.dl(C,1),this.Xg(O,C))}}}return d},a.prototype.LX=function(r,o,l){var d=0,p=this.U(r);if(p==-1)throw u.i.fa("internal error");var g=this.Ua(r),v=this.Ua(p),w=this.Sh(g),T=w==null?this.vb.yr(g,v):w.Qb(),$=0;r=this.bd(r);for(var C=0;C<l;C++){var O=o[C];if($<O&&1>O){var N=O;if(w!=null&&(N=0<T?w.Ux(O)/T:0),this.vb.kD(g,v,N,this.nm()),N=this.yS(r,p,this.nm()),d++,w!=null){$=w.dl($,O);var R=this.Ua(this.Ma(N));this.Xg(R,$),this.Cb(N,$.pa,$.la),C!=l-1&&o[C+1]!=1||($=w.dl(O,1),N=this.Ua(N),this.Xg(N,$))}}$=O}return d},a.prototype.yS=function(r,o,l){var d=o!=-1?this.Ma(o):this.rj(r),p=d!=-1?this.U(d):-1,g=this.oI(l==null?this.fd:-1),v=this.Ua(g);return l!=null&&this.vb.Ht(v,l),this.aj(g,r),this.Bc(g,p),this.Cc(g,d),p!=-1&&this.Cc(p,g),d!=-1&&this.Bc(d,g),l=this.dc(r),d=this.Xa(r),o==-1&&this.Wg(r,g),o==d&&(l&&d!=-1||this.Jf(r,g)),l&&p==-1&&(this.Bc(g,g),this.Cc(g,g)),this.Vj(r,this.Ja(r)+1),r=this.Qf(r),this.Tj(r,this.I(r)+1),g},a.prototype.uE=function(r,o,l){var d=this.Ua(o),p=this.Ua(l);if(0>d||p>this.fd-1)throw u.i.N("invalid call");if(d>p&&!this.dc(r))throw u.i.N("cannot iterate across an open path");for(r=0;o!=l;o=this.U(o))d=this.Ua(o),(p=this.Sh(d))!=null?r+=p.Qb():(p=this.Ua(this.U(o)),r+=this.vb.yr(d,p));return r},a.prototype.Dh=function(r,o){var l=this.Ua(r);this.vb.Ht(l,o),(l=this.Sh(l))!=null&&l.setStart(o),(r=this.Ma(r))!=-1&&(r=this.Ua(r),this.Sh(r)!=null&&l.setEnd(o))},a.prototype.Vi=function(r,o){r=this.Ua(r),this.vb.ve(r,o)},a.prototype.mf=function(r,o){this.Cb(r,o.x,o.y)},a.prototype.Cb=function(r,o,l){var d=this.Ua(r);this.vb.Cb(d,o,l),(d=this.Sh(d))!=null&&d.ZB(o,l),(r=this.Ma(r))!=-1&&(r=this.Ua(r),this.Sh(r)!=null&&d.Ql(o,l))},a.prototype.D=function(r,o){this.vb.D(this.td.T(r,0),o)},a.prototype.Gc=function(r,o){this.vb.za[0].tc(2*this.td.T(r,0),o)},a.prototype.Na=function(r){var o=new u.h;return this.vb.D(this.td.T(r,0),o),o},a.prototype.dG=function(r,o){this.it.tc(2*r,o)},a.prototype.Uc=function(r,o,l){return this.vb.Uc(r,this.Ua(o),l)},a.prototype.setAttribute=function(r,o,l,d){this.vb.setAttribute(r,this.Ua(o),l,d)},a.prototype.Ua=function(r){return this.td.T(r,0)},a.prototype.ih=function(){var r=new u.h;return this.D(void 0,r),r.y},a.prototype.fq=function(r,o){r=this.Ua(r),o=this.Ua(o);var l=this.vb.za[0].o;return l[2*r]===l[2*o]&&l[2*r+1]===l[2*o+1]},a.prototype.Dv=function(r,o){r=this.Ua(r);var l=this.vb.za[0].o;return l[2*r]===o.x&&l[2*r+1]===o.y},a.prototype.vX=function(r,o){if(1>o&&(o=1),this.Sg==null){if(o==1)return;this.Sg=u.Yc.Dn(this.vb.I(),1)}(r=this.Ua(r))>=this.Sg.size&&this.Sg.resize(r+1,1),this.Sg.write(r,o)},a.prototype.cG=function(r){return r=this.Ua(r),this.Sg==null||r>=this.Sg.size?1:this.Sg.read(r)},a.prototype.Ra=function(r,o,l){o=this.bi[o],r=this.Ua(r),o.size<this.vb.I()&&o.resize(this.vb.I(),-1),o.write(r,l)},a.prototype.Pa=function(r,o){return(r=this.Ua(r))<(o=this.bi[o]).size?o.read(r):-1},a.prototype.Gd=function(){this.bi==null&&(this.bi=[]);for(var r=0;r<this.bi.length;r++)if(this.bi[r]==null)return this.bi[r]=u.Yc.Oh(0,-1),r;return this.bi.push(u.Yc.Oh(0,-1)),this.bi.length-1},a.prototype.Td=function(r){this.bi[r]=null},a.prototype.bc=function(r){return this.We!=null?(r=this.Ua(r),this.We[r]):null},a.prototype.ed=function(r,o){var l=this.td.T(r,2);if(l==-1)return!1;if(this.fA){var d=new u.Sa;this.Vi(r,d),o.setStart(d),this.Vi(l,d),o.setEnd(d)}else this.vb.Gc(this.td.T(r,0),Mi),o.em(0,Mi),this.vb.Gc(this.td.T(l,0),Mi),o.em(1,Mi);return!0},a.prototype.mW=function(r,o,l){if(this.fA){var d=new u.Sa;this.Vi(r,d),l.setStart(d),this.Vi(o,d),l.setEnd(d)}else this.vb.Gc(r,Mi),l.em(0,Mi),this.vb.Gc(o,Mi),l.em(1,Mi)},a.prototype.vf=function(r,o){if(o!=-1){if(r!=this.Qf(o))throw u.i.Qa();var l=this.cs(o)}else l=this.kv(r);var d=this.wU(r);return o!=-1&&this.bp(o,d),this.ap(d,o),this.bp(d,l),l!=-1?this.ap(l,d):this.Zo(r,d),o==-1&&this.$o(r,d),this.Rl(r,this.da(r)+1),d},a.prototype.nG=function(r,o,l,d){r=this.vf(r,-1);for(var p=0,g=o,v=!1;g==l&&(v=!0),this.aj(g,r),p++,(g=this.U(g))!=o;);return this.kn(r,!0),this.Vj(r,p),v&&(o=l),this.Jf(r,o),this.Wg(r,this.Ma(o)),this.cp(r,!1),d!=null&&(d[0]=v),r},a.prototype.Zq=function(r){var o=this.cs(r),l=this.Rb(r),d=this.Qf(r);return o!=-1?this.ap(o,l):this.Zo(d,l),l!=-1?this.bp(l,o):this.$o(d,o),this.AO(r),this.Rl(d,this.da(d)-1),this.sF(r),l},a.prototype.AO=function(r){var o=this.Xa(r);if(o!=-1){for(var l=0,d=this.Ja(r);l<d;l++){var p=o;o=this.U(o),this.Vy(p)}o=this.Qf(r),this.Tj(o,this.I(o)-this.Ja(r))}this.Vj(r,0)},a.prototype.Rb=function(r){return this.md.T(r,2)},a.prototype.cs=function(r){return this.md.T(r,1)},a.prototype.Ja=function(r){return this.md.T(r,3)},a.prototype.dc=function(r){return!!(1&this.Sp(r))},a.prototype.kn=function(r,o){if(this.dc(r)!=o){if(0<this.Ja(r)){var l=this.Xa(r),d=this.rj(r);o?(this.Bc(d,l),this.Cc(l,d),l=this.Ua(d)):(this.Bc(d,-1),this.Cc(l,-1),l=this.Ua(d)),this.Xg(l,null)}this.VB(r,(1|this.Sp(r))-1|(o?1:0))}},a.prototype.Qf=function(r){return this.md.T(r,7)},a.prototype.YS=function(r){return!!(2&this.Sp(r))},a.prototype.PB=function(r,o){this.VB(r,(2|this.Sp(r))-2|(o?2:0))},a.prototype.wz=function(r){if(this.cT(r))return this.Oi.get(this.qv(r));var o=new u.yb,l=this.Xa(r);if(l==-1)return 0;var d=new u.h;this.D(l,d);for(var p=0,g=0,v=this.Ja(r);g<v;g++,l=this.U(l)){var w=this.bc(l);if(w==null){if(!this.ed(l,o))continue;w=o}p+=w.Tx(d.x,d.y)}return this.cp(r,!0),this.Oi.set(this.qv(r),p),p},a.prototype.gr=function(r,o,l){o=this.Ck[o],r=this.qv(r),o.size<this.Oi.size&&o.resize(this.Oi.size,-1),o.write(r,l)},a.prototype.sj=function(r,o){return(r=this.qv(r))<(o=this.Ck[o]).size?o.read(r):-1},a.prototype.Ky=function(){this.Ck==null&&(this.Ck=[]);for(var r=0;r<this.Ck.length;r++)if(this.Ck[r]==null)return this.Ck[r]=u.Yc.Oh(0),r;return this.Ck.push(u.Yc.Oh(0)),this.Ck.length-1},a.prototype.CB=function(r){this.Ck[r]=null},a.prototype.ZT=function(r,o,l){if(l==-1)throw u.i.N();if(o!=l){var d=this.Rb(l),p=this.cs(l),g=this.Qf(l);p==-1?this.Zo(g,d):this.ap(p,d),d==-1?this.$o(g,p):this.bp(d,p),this.Tj(g,this.I(g)-this.Ja(l)),this.Rl(g,this.da(g)-1),p=o==-1?this.kv(r):this.cs(o),this.bp(l,p),this.ap(l,o),o==-1?this.$o(r,l):this.bp(o,l),p==-1?this.Zo(r,l):this.ap(p,l),this.Tj(r,this.I(r)+this.Ja(l)),this.Rl(r,this.da(r)+1),this.gx(l,r)}},a.prototype.ij=function(r,o){this.vb.ve(this.Ua(o),this.nm()),this.wj(r,-1,this.nm())},a.prototype.pd=function(r,o){var l=this.bd(r),d=this.Ma(r),p=this.U(r);d!=-1&&this.Bc(d,p);var g=this.Ja(l);if(r==this.Xa(l)&&this.Jf(l,1<g?p:-1),p!=-1&&this.Cc(p,d),r==this.rj(l)&&this.Wg(l,1<g?d:-1),d!=-1&&p!=-1){d=this.Ua(d);var v=this.Ua(p);o?(o=this.Sh(d))!=null&&(d=new u.h,this.vb.D(v,d),o.Qc(d)):(v=this.Ua(r),o=this.Sh(v),this.Xg(d,o),o!=null&&(d=this.vb.Na(d),o.Dc(d)))}return this.Vj(l,g-1),l=this.Qf(l),this.Tj(l,this.I(l)-1),this.Vy(r),p},a.prototype.Xa=function(r){return this.md.T(r,4)},a.prototype.rj=function(r){return this.md.T(r,5)},a.prototype.U=function(r){return this.td.T(r,2)},a.prototype.Ma=function(r){return this.td.T(r,1)},a.prototype.bd=function(r){return this.td.T(r,3)},a.prototype.fc=function(r,o){return this.wj(r,-1,o)},a.prototype.Yq=function(r){if(r===void 0)return this.Yq(!1);if(r instanceof c)return new c(r);var o,l=-1,d=-1,p=-1,g=0,v=!1;for(o=this.ld;o!=-1;o=this.ue(o))if(!r||u.aa.Hc(this.ic(o))){for(l=this.Ob(o);l!=-1;l=this.Rb(l))if(p=d=this.Xa(l),g=0,d!=-1){v=!0;break}if(v)break}return c.AP(this,o,l,d,p,g,r)},a.prototype.Oc=function(r){if(this.Il.Oc(r),this.We!=null)for(var o=0,l=this.We.length;o<l;o++)this.We[o]!=null&&this.We[o].Oc(r)},a.prototype.jr=function(r,o,l,d){d?this.NX(r,o,l):this.MX(r,o,l)},a.prototype.Cc=function(r,o){this.td.S(r,1,o)},a.prototype.Bc=function(r,o){this.td.S(r,2,o)},a.prototype.aj=function(r,o){this.td.S(r,3,o)},a.prototype.Vj=function(r,o){this.md.S(r,3,o)},a.prototype.Jf=function(r,o){this.md.S(r,4,o)},a.prototype.Wg=function(r,o){this.md.S(r,5,o)},a.prototype.Rl=function(r,o){this.cd.S(r,6,o)},a.prototype.Tj=function(r,o){this.cd.S(r,5,o)},a.prototype.pJ=function(r){var o=r;do{var l=this.U(o);this.Bc(o,this.Ma(o)),this.Cc(o,l),o=l}while(o!=r)},a.prototype.bC=function(r){this.fd=r},a.prototype.$q=function(r){var o=this.cs(r),l=this.Rb(r),d=this.Qf(r);o!=-1?this.ap(o,l):this.Zo(d,l),l!=-1?this.bp(l,o):this.$o(d,o),this.Jf(r,-1),this.Wg(r,-1),this.sF(r)},a.prototype.mi=function(r,o){var l=this.Ma(r),d=this.U(r);if(l!=-1&&this.Bc(l,d),d!=-1&&this.Cc(d,l),l!=-1&&d!=-1)if(l=this.Ua(l),d=this.Ua(d),o){if((o=this.Sh(l))!=null){var p=new u.h;this.vb.D(d,p),o.Qc(p)}}else o=this.Ua(r),o=this.Sh(o),this.Xg(l,o),o!=null&&(p=new u.h,this.vb.D(l,p),o.Dc(p));this.Vy(r)},a.prototype.cT=function(r){return!!(4&this.Sp(r))},a.prototype.cp=function(r,o){this.VB(r,(4|this.Sp(r))-4|(o?4:0))},a.prototype.nx=function(r,o){var l=this.td.o;this.vb.mc();var d=this.vb.za[0].o;r.Vd(0,o,function(p,g){var v=l[5*p];p=l[5*g],g=d[2*v],v=d[2*v+1];var w=d[2*p];return v<(p=d[2*p+1])?-1:v>p?1:g<w?-1:g>w?1:0})},a.prototype.jS=function(){for(var r=this.ld;r!=-1;r=this.ue(r))if(!u.aa.Hc(this.ic(r)))return!0;return!1},a.prototype.hC=function(r,o){for(var l=this.Ob(r),d=this.Ob(o),p=this.kv(r),g=this.kv(o),v=this.Ob(r);v!=-1;v=this.Rb(v))this.gx(v,o);for(v=this.Ob(o);v!=-1;v=this.Rb(v))this.gx(v,r);this.Zo(r,d),this.Zo(o,l),this.$o(r,g),this.$o(o,p),l=this.I(r),d=this.da(r),p=this.da(o),this.Tj(r,this.I(o)),this.Tj(o,l),this.Rl(r,p),this.Rl(o,d),l=this.cd.T(r,2),this.cd.S(r,2,this.cd.T(o,2)),this.cd.S(o,2,l)},a}(),u.gd=A})(V||(V={})),function(u){var A=function(b){function c(a,r,o,l){var d=b.call(this)||this;return d.$=new u.l,a===void 0?d.UE():typeof a=="number"?d.VO(a,r,o,l):a instanceof u.Sa?r!==void 0?d.Qu(a,r,o):d.WO(a):a instanceof u.ra?r!==void 0?d.YO(a,r):d.XO(a):a instanceof u.l?d.UO(a):d.UE(),d}return bt(c,b),c.prototype.Qu=function(a,r,o){this.description=u.ee.og(),this.$.Oa(),a.B()||this.tu(a,r,o)},c.prototype.UO=function(a){this.description=u.ee.og(),this.$.K(a),this.$.normalize()},c.prototype.XO=function(a){if(a==null)throw u.i.N();this.description=a,this.$.Oa()},c.prototype.YO=function(a,r){if(a==null)throw u.i.N();this.description=a,this.$.K(r),this.$.normalize()},c.prototype.UE=function(){this.description=u.ee.og(),this.$.Oa()},c.prototype.WO=function(a){this.description=u.ee.og(),this.$.Oa(),a.B()||this.tu(a)},c.prototype.VO=function(a,r,o,l){this.description=u.ee.og(),this.K(a,r,o,l)},c.prototype.K=function(a,r,o,l){if(this.vc(),typeof a=="number")this.$.K(a,r,o,l);else for(this.Oa(),r=0,o=a.length;r<o;r++)this.Zb(a[r])},c.prototype.Xo=function(a){if(this.vc(),!a.fT())throw u.i.N();this.$.K(a)},c.prototype.Oa=function(){this.vc(),this.$.Oa()},c.prototype.B=function(){return this.$.B()},c.prototype.R=function(){return this.$.R()},c.prototype.ca=function(){return this.$.ca()},c.prototype.gk=function(){return this.$.gk()},c.prototype.Jp=function(){return this.$.Jp()},c.prototype.Ip=function(){return this.$.sf()},c.prototype.Zb=function(a){if(a instanceof u.h)this.vc(),this.$.Zb(a);else if(a instanceof u.l)this.vc(),this.$.Zb(a);else if(a instanceof u.Sa){if(this.vc(),!a.Ac()){var r=a.description;if(this.description!=r&&this.Jl(r),this.B())this.tu(a);else{this.$.Zb(a.D());for(var o=1,l=r.Aa;o<l;o++)for(var d=r.Ed(o),p=u.ra.Va(d),g=0;g<p;g++){var v=a.Uc(d,g),w=this.Tg(d,g);w.Zb(v),this.setInterval(d,g,w)}}}}else if(a instanceof c&&!a.B())for((r=a.description)!=this.description&&this.Jl(r),this.$.Zb(a.$),o=1,l=r.Aa;o<l;o++)for(d=r.kd(o),p=u.ra.Va(d),g=0;g<p;g++)v=a.Tg(d,g),(w=this.Tg(d,g)).Zb(v),this.setInterval(d,g,w)},c.prototype.tu=function(a,r,o){if(r!==void 0){this.$.K(a.D(),r,o),o=1;for(var l=(r=a.description).Aa;o<l;o++)for(var d=r.Ed(o),p=u.ra.Va(d),g=0;g<p;g++){var v=a.Uc(d,g);this.setInterval(d,g,v,v)}}else for(this.$.K(a.ka[0],a.ka[1]),o=1,l=(r=a.description).Aa;o<l;o++)for(d=r.Ed(o),p=u.ra.Va(d),g=0;g<p;g++)v=a.Uc(d,g),this.setInterval(d,g,v,v)},c.prototype.setInterval=function(a,r,o,l){if(o=typeof o=="number"?new u.Nc(o,l):o,this.vc(),a==0)if(r==0)this.$.v=o.oa,this.$.C=o.va;else{if(r!=1)throw u.i.ce();this.$.G=o.oa,this.$.H=o.va}else this.vD(0,a,r,o.oa),this.vD(1,a,r,o.va)},c.prototype.W=function(a,r){this.vc(),this.$.W(a,r)},c.prototype.Oc=function(a){if(a instanceof u.Dd)this.vc(),a.mC(this.$);else if(this.vc(),!this.$.B()){var r=new u.OK;this.Qo(r),r.XS()?r.Oa():a.mC(r)}},c.prototype.copyTo=function(a){if(a.getType()!=this.getType())throw u.i.N();if(a.vc(),a.description=this.description,a.$.K(this.$),a.ka=null,this.ka!=null){a.ou();for(var r=0;r<2*(this.description.Ae.length-2);r++)a.ka[r]=this.ka[r]}},c.prototype.Ia=function(){return new c(this.description)},c.prototype.Ke=function(){return this.$.wF()},c.prototype.Qb=function(){return this.$.yR()},c.prototype.getType=function(){return 197},c.prototype.Db=function(){return 2},c.prototype.bn=function(a){this.copyTo(a)},c.prototype.A=function(a){a.v=this.$.v,a.G=this.$.G,a.C=this.$.C,a.H=this.$.H},c.prototype.Qo=function(a){a.v=this.$.v,a.G=this.$.G,a.C=this.$.C,a.H=this.$.H,a.K(this.$.v,this.$.G,this.Od(0,1,0),this.$.C,this.$.H,this.Od(1,1,0))},c.prototype.Tg=function(a,r){var o=new u.Nc;return o.K(this.Od(0,a,r),this.Od(1,a,r)),o},c.prototype.Hf=function(a,r){r.Nf(this.description);var o=this.description.Aa-1;switch(a){case 0:for(a=0;a<o;a++)for(var l=this.description.kd(a),d=u.ra.Va(l),p=0;p<d;p++)r.setAttribute(l,p,this.Od(0,l,p));r.Cb(this.$.v,this.$.G);break;case 1:for(a=0;a<o;a++)for(l=this.description.kd(a),d=u.ra.Va(l),p=0;p<d;p++)r.setAttribute(l,p,this.Od(1,l,p));r.Cb(this.$.v,this.$.H);break;case 2:for(a=0;a<o;a++)for(l=this.description.kd(a),d=u.ra.Va(l),p=0;p<d;p++)r.setAttribute(l,p,this.Od(0,l,p));r.Cb(this.$.C,this.$.H);break;case 3:for(a=0;a<o;a++)for(l=this.description.kd(a),d=u.ra.Va(l),p=0;p<d;p++)r.setAttribute(l,p,this.Od(1,l,p));r.Cb(this.$.C,this.$.G);break;default:throw u.i.ce()}},c.prototype.mB=function(a,r){a=this.$.mB(a),r.ma(a.x,a.y)},c.prototype.kR=function(a,r){return r*(a.Oq-2)},c.prototype.xF=function(a,r,o){if(this.$.B())throw u.i.fa("empty geometry");if(r==0)return a!=0?o!=0?this.$.H:this.$.C:o!=0?this.$.G:this.$.v;if(o>=u.ra.Va(r))throw u.i.N();var l=this.description.Pf(r);return this.ou(),0<=l?this.ka[this.kR(this.description,a)+this.description.LR(l)-2+o]:u.ra.se(r)},c.prototype.ou=function(){if(this.vc(),this.ka==null&&2<this.description.Ae.length){this.ka=[];for(var a=c.Gg(this.description,0),r=c.Gg(this.description,1),o=0,l=1,d=this.description.Aa;l<d;l++){var p=this.description.kd(l),g=u.ra.Va(p);p=u.ra.se(p);for(var v=0;v<g;v++)this.ka[a+o]=p,this.ka[r+o]=p,o++}}},c.prototype.sn=function(a){if(this.ka!=null)if(2<a.Ae.length){for(var r=u.ee.Iw(a,this.description),o=[],l=c.Gg(this.description,0),d=c.Gg(this.description,1),p=c.Gg(a,0),g=c.Gg(a,1),v=0,w=1,T=a.Aa;w<T;w++){var $=a.kd(w),C=u.ra.Va($);if(r[w]==-1){var O=u.ra.se($);for($=0;$<C;$++)o[p+v]=O,o[g+v]=O,v++}else for(O=this.description.$j(r[w])-2,$=0;$<C;$++)o[p+v]=this.ka[l+O],o[g+v]=this.ka[d+O],v++,O++}this.ka=o}else this.ka=null;this.description=a},c.prototype.Od=function(a,r,o){if(this.$.B())throw u.i.fa("This operation was performed on an Empty Geometry.");if(r==0)return a!=0?o!=0?this.$.H:this.$.C:o!=0?this.$.G:this.$.v;if(o>=u.ra.Va(r))throw u.i.ce();var l=this.description.Pf(r);return 0<=l?(this.ou(),this.ka[c.Gg(this.description,a)+this.description.$j(l)-2+o]):u.ra.se(r)},c.prototype.vD=function(a,r,o,l){if(this.vc(),r==0)a!=0?o!=0?this.$.H=l:this.$.C=l:o!=0?this.$.G=l:this.$.v=l;else{if(o>=u.ra.Va(r))throw u.i.ce();if(!this.hasAttribute(r)){if(u.ra.DG(r,l))return;this.re(r)}r=this.description.Pf(r),this.ou(),this.ka[c.Gg(this.description,a)+this.description.$j(r)-2+o]=l}},c.Gg=function(a,r){return r*(a.Ae.length-2)},c.prototype.Ea=function(a){this.vc();var r=new u.l;return a.A(r),this.$.Ea(r)},c.prototype.isIntersecting=function(a){return a instanceof u.l?this.$.isIntersecting(a):this.$.isIntersecting(a.$)},c.prototype.Ju=function(a,r){this.vc(),a.B()?this.Oa():r!==void 0?this.tu(a,r):this.$.Ju(a.Lg(),a.ih())},c.prototype.offset=function(a,r){this.vc(),this.$.offset(a,r)},c.prototype.normalize=function(){this.vc(),this.$.normalize()},c.prototype.sf=function(a){if(a===void 0){if(a=new u.Sa(this.description),this.B())return a;for(r=this.description.Aa,o=1;o<r;o++)for(l=this.description.Ed(o),d=u.ra.Va(l),p=0;p<d;p++)g=.5*(this.Od(0,l,p)+this.Od(1,l,p)),a.setAttribute(l,p,g);return a.Cb(this.$.gk(),this.$.Jp()),a}if(a.Nf(this.description),this.B())a.Oa();else{for(var r=this.description.Aa,o=1;o<r;o++)for(var l=this.description.kd(o),d=u.ra.Va(l),p=0;p<d;p++){var g=.5*(this.xF(0,l,p)+this.xF(1,l,p));a.setAttribute(l,p,g)}a.Cb(this.$.sf())}},c.prototype.mz=function(){return new u.Sa(this.$.mz())},c.prototype.contains=function(a){return a instanceof u.Sa?!a.B()&&this.$.contains(a.Lg(),a.ih()):this.$.contains(a.$)},c.prototype.dP=function(a){return this.$.contains(a)},c.prototype.Nb=function(a){if(a==this)return!0;if(!(a instanceof c)||this.description!=a.description)return!1;if(this.B())return!!a.B();if(!this.$.Nb(a.$))return!1;for(var r=0,o=2*(this.description.Ae.length-2);r<o;r++)if(this.ka[r]!=a.ka[r])return!1;return!0},c.prototype.cc=function(){var a=this.description.cc();if(a=u.O.Th(a,this.$.cc()),!this.B()&&this.ka!=null)for(var r=0,o=2*(this.description.Ae.length-2);r<o;r++)a=u.O.Th(a,this.ka[r]);return a},c.prototype.es=function(){return this.$.v},c.prototype.gs=function(){return this.$.G},c.prototype.ds=function(){return this.$.C},c.prototype.fs=function(){return this.$.H},c.prototype.mg=function(){return u.pi.gm(this,null)},c.prototype.toString=function(){return this.B()?"Envelope: []":"Envelope: ["+this.$.v+", "+this.$.G+", "+this.$.C+", "+this.$.H+"]"},c}(u.aa);u.Fh=A}(V||(V={})),function(u){var A=function(){function b(c,a,r,o){c===void 0?this.Oa():(this.v=c,this.G=a,this.C=r,this.H=o)}return b.construct=function(c,a,r,o){var l=new b;return l.v=c,l.G=a,l.C=r,l.H=o,l},b.prototype.K=function(c,a,r,o){typeof c=="number"?r!==void 0?(this.v=c,this.G=a,this.C=r,this.H=o,this.normalize()):(this.v=c,this.G=a,this.C=c,this.H=a):c instanceof u.h?a!==void 0?(this.v=c.x-.5*a,this.C=this.v+a,this.G=c.y-.5*r,this.H=this.G+r,this.normalize()):(this.v=c.x,this.G=c.y,this.C=c.x,this.H=c.y):c instanceof b?this.K(c.v,c.G,c.C,c.H):c instanceof u.Nc&&(c.B()||a.B()?this.Oa():(this.v=c.oa,this.C=c.va,this.G=a.oa,this.H=a.va))},b.prototype.Zw=function(c,a){if(a!==void 0)if(a==0)this.Oa();else{this.v=c[0].x,this.G=c[0].y,this.C=this.v,this.H=this.G;for(var r=1;r<a;r++){var o=c[r];o.x<this.v?this.v=o.x:o.x>this.C&&(this.C=o.x),o.y<this.G?this.G=o.y:o.y>this.H&&(this.H=o.y)}}else if(c==null||c.length==0)this.Oa();else for(o=c[0],this.K(o.x,o.y),r=1;r<c.length;r++)a=c[r],this.Lk(a.x,a.y)},b.prototype.Oa=function(){this.H=this.C=this.G=this.v=NaN},b.prototype.B=function(){return isNaN(this.v)},b.prototype.Zb=function(c,a){typeof c=="number"?this.B()?(this.v=c,this.G=a,this.C=c,this.H=a):(this.v>c?this.v=c:this.C<c&&(this.C=c),this.G>a?this.G=a:this.H<a&&(this.H=a)):c instanceof u.h||c instanceof u.Nd?this.Zb(c.x,c.y):c instanceof b&&!c.B()&&(this.Zb(c.v,c.G),this.Zb(c.C,c.H))},b.prototype.Lk=function(c,a){this.v>c?this.v=c:this.C<c&&(this.C=c),this.G>a?this.G=a:this.H<a&&(this.H=a)},b.prototype.W=function(c,a){this.B()||(this.v-=c,this.C+=c,this.G-=a,this.H+=a,(this.v>this.C||this.G>this.H)&&this.Oa())},b.prototype.scale=function(c){0>c&&this.Oa(),this.B()||(this.v*=c,this.C*=c,this.G*=c,this.H*=c)},b.prototype.zoom=function(c,a){this.B()||this.K(this.sf(),c*this.R(),a*this.ca())},b.prototype.isIntersecting=function(c){return!this.B()&&!c.B()&&(this.v<=c.v?this.C>=c.v:c.C>=this.v)&&(this.G<=c.G?this.H>=c.G:c.H>=this.G)},b.prototype.HG=function(c){return(this.v<=c.v?this.C>=c.v:c.C>=this.v)&&(this.G<=c.G?this.H>=c.G:c.H>=this.G)},b.prototype.Ea=function(c){return!this.B()&&!c.B()&&(c.v>this.v&&(this.v=c.v),c.C<this.C&&(this.C=c.C),c.G>this.G&&(this.G=c.G),c.H<this.H&&(this.H=c.H),(c=this.v<=this.C&&this.G<=this.H)||this.Oa(),c)},b.prototype.mB=function(c){switch(c){case 0:return u.h.construct(this.v,this.G);case 1:return u.h.construct(this.v,this.H);case 2:return u.h.construct(this.C,this.H);case 3:return u.h.construct(this.C,this.G);default:throw u.i.ce()}},b.prototype.nB=function(c){if(c==null||4>c.length)throw u.i.N();c[0]!=null?c[0].ma(this.v,this.G):c[0]=u.h.construct(this.v,this.G),c[1]!=null?c[1].ma(this.v,this.H):c[1]=u.h.construct(this.v,this.H),c[2]!=null?c[2].ma(this.C,this.H):c[2]=u.h.construct(this.C,this.H),c[3]!=null?c[3].ma(this.C,this.G):c[3]=u.h.construct(this.C,this.G)},b.prototype.wF=function(){return this.B()?0:this.R()*this.ca()},b.prototype.yR=function(){return this.B()?0:2*(this.R()+this.ca())},b.prototype.gk=function(){return(this.C+this.v)/2},b.prototype.Jp=function(){return(this.H+this.G)/2},b.prototype.R=function(){return this.C-this.v},b.prototype.ca=function(){return this.H-this.G},b.prototype.move=function(c,a){this.B()||(this.v+=c,this.G+=a,this.C+=c,this.H+=a)},b.prototype.Ju=function(c,a){if(a!==void 0)this.move(c-this.gk(),a-this.Jp());else if(c instanceof u.h)this.Ju(c.x,c.y);else{if(!(c instanceof u.Sa))throw u.i.N();a=(this.C-this.v)/2;var r=(this.H-this.G)/2;this.v=c.Lg()-a,this.C=c.Lg()+a,this.G=c.ih()-r,this.H=c.ih()+r}},b.prototype.offset=function(c,a){this.v+=c,this.C+=c,this.G+=a,this.H+=a},b.prototype.normalize=function(){if(!this.B()){var c=Math.min(this.v,this.C),a=Math.max(this.v,this.C);this.v=c,this.C=a,c=Math.min(this.G,this.H),a=Math.max(this.G,this.H),this.G=c,this.H=a}},b.prototype.dn=function(c){c.ma(this.v,this.G)},b.prototype.$I=function(c){c.ma(this.C,this.G)},b.prototype.cJ=function(c){c.ma(this.v,this.H)},b.prototype.en=function(c){c.ma(this.C,this.H)},b.prototype.fT=function(){return this.B()||this.v<=this.C&&this.G<=this.H},b.prototype.sf=function(){return u.h.construct((this.C+this.v)/2,(this.H+this.G)/2)},b.prototype.mz=function(){return u.h.construct(this.v,this.G)},b.prototype.contains=function(c,a){if(a!==void 0)return c>=this.v&&c<=this.C&&a>=this.G&&a<=this.H;if(c instanceof u.Sa)return this.contains(c.Lg(),c.ih());if(c instanceof u.h)return this.contains(c.x,c.y);if(c instanceof b)return c.v>=this.v&&c.C<=this.C&&c.G>=this.G&&c.H<=this.H;throw u.i.N()},b.prototype.hm=function(c,a){if(a!==void 0)return c>this.v&&c<this.C&&a>this.G&&a<this.H;if(c instanceof u.h)return this.hm(c.x,c.y);if(c instanceof b)return c.v>this.v&&c.C<this.C&&c.G>this.G&&c.H<this.H;throw u.i.N()},b.prototype.Nb=function(c){return c==this||c instanceof b&&(!(!this.B()||!c.B())||this.v==c.v&&this.G==c.G&&this.C==c.C&&this.H==c.H)},b.prototype.cc=function(){var c=this.v;c=u.O.truncate(c^c>>>32);var a=u.O.Th(c);return c=this.C,c=u.O.truncate(c^c>>>32),a=u.O.Th(c,a),c=this.G,c=u.O.truncate(c^c>>>32),a=u.O.Th(c,a),c=this.H,c=u.O.truncate(c^c>>>32),u.O.Th(c,a)},b.prototype.xr=function(){return this.B()?2220446049250313e-29:2220446049250313e-29*(Math.abs(this.v)+Math.abs(this.C)+Math.abs(this.G)+Math.abs(this.H)+1)},b.prototype.zy=function(c,a){var r=this.Zj(c),o=this.Zj(a);if(r&o)return 0;if(!(r|o))return 4;var l=(r!=0?1:0)|(o!=0?2:0);do{var d=a.x-c.x,p=a.y-c.y;if(d>p?r&b.YC?(r&b.ju?(c.y+=p*(this.v-c.x)/d,c.x=this.v):(c.y+=p*(this.C-c.x)/d,c.x=this.C),r=this.Zj(c)):o&b.YC?(o&b.ju?(a.y+=p*(this.v-a.x)/d,a.x=this.v):(a.y+=p*(this.C-a.x)/d,a.x=this.C),o=this.Zj(a)):r!=0?(r&b.ku?(c.x+=d*(this.G-c.y)/p,c.y=this.G):(c.x+=d*(this.H-c.y)/p,c.y=this.H),r=this.Zj(c)):(o&b.ku?(a.x+=d*(this.G-a.y)/p,a.y=this.G):(a.x+=d*(this.H-a.y)/p,a.y=this.H),o=this.Zj(a)):r&b.ZC?(r&b.ku?(c.x+=d*(this.G-c.y)/p,c.y=this.G):(c.x+=d*(this.H-c.y)/p,c.y=this.H),r=this.Zj(c)):o&b.ZC?(o&b.ku?(a.x+=d*(this.G-a.y)/p,a.y=this.G):(a.x+=d*(this.H-a.y)/p,a.y=this.H),o=this.Zj(a)):r!=0?(r&b.ju?(c.y+=p*(this.v-c.x)/d,c.x=this.v):(c.y+=p*(this.C-c.x)/d,c.x=this.C),r=this.Zj(c)):(o&b.ju?(a.y+=p*(this.v-a.x)/d,a.x=this.v):(a.y+=p*(this.C-a.x)/d,a.x=this.C),o=this.Zj(a)),r&o)return 0}while(r|o);return l},b.prototype.Zj=function(c){return(c.x<this.v?1:0)|(c.x>this.C?1:0)<<1|(c.y<this.G?1:0)<<2|(c.y>this.H?1:0)<<3},b.prototype.Bi=function(c){return!this.B()&&(this.R()<=c||this.ca()<=c)},b.prototype.tb=function(c){return c instanceof u.h?Math.sqrt(this.iK(c)):Math.sqrt(this.px(c))},b.prototype.px=function(c){var a=0,r=0,o=this.v-c.C;return o>a&&(a=o),(o=this.G-c.H)>r&&(r=o),(o=c.v-this.C)>a&&(a=o),(o=c.G-this.H)>r&&(r=o),a*a+r*r},b.prototype.iK=function(c){var a=0,r=0,o=this.v-c.x;return o>a&&(a=o),(o=this.G-c.y)>r&&(r=o),(o=c.x-this.C)>a&&(a=o),(o=c.y-this.H)>r&&(r=o),a*a+r*r},b.prototype.cn=function(c){this.B()?c.Oa():c.K(this.v,this.C)},b.ju=1,b.ku=4,b.YC=3,b.ZC=12,b}();u.l=A}(V||(V={})),function(u){var A,b;(b=A||(A={}))[b.initialize=0]="initialize",b[b.initializeRed=1]="initializeRed",b[b.initializeBlue=2]="initializeBlue",b[b.initializeRedBlue=3]="initializeRedBlue",b[b.sweep=4]="sweep",b[b.sweepBruteForce=5]="sweepBruteForce",b[b.sweepRedBlueBruteForce=6]="sweepRedBlueBruteForce",b[b.sweepRedBlue=7]="sweepRedBlue",b[b.sweepRed=8]="sweepRed",b[b.sweepBlue=9]="sweepBlue",b[b.iterate=10]="iterate",b[b.iterateRed=11]="iterateRed",b[b.iterateBlue=12]="iterateBlue",b[b.iterateBruteForce=13]="iterateBruteForce",b[b.iterateRedBlueBruteForce=14]="iterateRedBlueBruteForce",b[b.resetRed=15]="resetRed",b[b.resetBlue=16]="resetBlue";var c=function(){function a(r,o){this.ci=r,this.dH=o}return a.prototype.nr=function(r,o,l){this.ci.JX(l,r,o,this.dH)},a.prototype.$p=function(r){return this.ci.Rr(r,this.dH)},a}();A=function(){function a(){this.ow=this.oo=this.ff=this.rd=null,this.wq=new u.l,this.Am=this.Hj=this.Ij=this.Ad=this.Ef=this.Ld=this.cw=this.fo=this.qd=this.Eb=null,this.Xb=-1,this.qa=0,this.Nk()}return a.prototype.kr=function(){this.Nk(),this.Pv=!0,this.Eb==null?(this.fo=new u.ia(0),this.Eb=[]):(this.fo.Bh(0),this.Eb.length=0)},a.prototype.ad=function(r,o){if(!this.Pv)throw u.i.Hb();var l=new u.l;l.K(o),this.fo.add(r),this.Eb.push(l)},a.prototype.Fp=function(){if(!this.Pv)throw u.i.Hb();this.Pv=!1,this.Eb!=null&&0<this.Eb.length&&(this.Xb=0,this.Ic=!1)},a.prototype.pK=function(){this.Nk(),this.Ov=!0,this.Eb==null?(this.fo=new u.ia(0),this.Eb=[]):(this.fo.Bh(0),this.Eb.length=0)},a.prototype.JD=function(r,o){if(!this.Ov)throw u.i.Hb();var l=new u.l;l.K(o),this.fo.add(r),this.Eb.push(l)},a.prototype.iF=function(){if(!this.Ov)throw u.i.Hb();this.Ov=!1,this.Eb!=null&&0<this.Eb.length&&this.qd!=null&&0<this.qd.length&&(this.Xb==-1||this.Xb==2?this.Xb=3:this.Xb!=3&&(this.Xb=1),this.Ic=!1)},a.prototype.oK=function(){this.Nk(),this.Nv=!0,this.qd==null?(this.cw=new u.ia(0),this.qd=[]):(this.cw.Bh(0),this.qd.length=0)},a.prototype.ED=function(r,o){if(!this.Nv)throw u.i.Hb();var l=new u.l;l.K(o),this.cw.add(r),this.qd.push(l)},a.prototype.hF=function(){if(!this.Nv)throw u.i.Hb();this.Nv=!1,this.Eb!=null&&0<this.Eb.length&&this.qd!=null&&0<this.qd.length&&(this.Xb==-1||this.Xb==1?this.Xb=3:this.Xb!=3&&(this.Xb=2),this.Ic=!1)},a.prototype.next=function(){if(this.Ic)return!1;for(var r=!0;r;)switch(this.Xb){case 0:r=this.Gz();break;case 1:r=this.rS();break;case 2:r=this.oS();break;case 3:r=this.qS();break;case 4:r=this.UX();break;case 5:r=this.QX();break;case 6:r=this.RX();break;case 7:r=this.SX();break;case 8:r=this.ux();break;case 9:r=this.iC();break;case 10:r=this.Uz();break;case 11:r=this.jT();break;case 12:r=this.gT();break;case 13:r=this.hT();break;case 14:r=this.iT();break;case 15:r=this.kJ();break;case 16:r=this.jJ();break;default:throw u.i.Qa()}return!this.Ic},a.prototype.aC=function(r){this.qa=r},a.prototype.uz=function(r){return this.Eb[r]},a.prototype.az=function(r){return this.qd[r]},a.prototype.nl=function(r){return this.fo.read(r)},a.prototype.hl=function(r){return this.cw.read(r)},a.Tz=function(r){return!(1&~r)},a.eq=function(r){return!(1&r)},a.prototype.Nk=function(){this.Pv=this.Nv=this.Ov=!1,this.Cf=this.Df=this.Rg=this.pe=-1,this.Ic=!0},a.prototype.Gz=function(){if(this.Af=this.Vf=-1,10>this.Eb.length)return this.pe=this.Eb.length,this.Xb=5,!0;this.rd==null&&(this.rd=new u.sr(!0),this.oo=this.rd.getIterator(),this.Ld=new u.ia(0)),this.rd.kr();for(var r=0;r<this.Eb.length;r++){var o=this.Eb[r];this.rd.Br(o.v,o.C)}for(this.rd.Fp(),this.Ld.Jb(2*this.Eb.length),this.Ld.resize(0),r=0;r<2*this.Eb.length;r++)this.Ld.add(r);return this.Kt(this.Ld,2*this.Eb.length,!0),this.pe=2*this.Eb.length,this.Xb=4,!0},a.prototype.rS=function(){if(this.Af=this.Vf=-1,10>this.Eb.length||10>this.qd.length)return this.pe=this.Eb.length,this.Xb=6,!0;this.rd==null&&(this.rd=new u.sr(!0),this.oo=this.rd.getIterator(),this.Ld=new u.ia(0)),this.rd.kr();for(var r=0;r<this.Eb.length;r++){var o=this.Eb[r];this.rd.Br(o.v,o.C)}for(this.rd.Fp(),this.Ld.Jb(2*this.Eb.length),this.Ld.resize(0),r=0;r<2*this.Eb.length;r++)this.Ld.add(r);return this.Kt(this.Ld,this.Ld.size,!0),this.pe=this.Ld.size,this.Df!=-1&&(this.Ad.bh(this.Df),this.Ij.resize(0),this.Df=-1),this.Xb=7,this.jJ()},a.prototype.oS=function(){if(this.Af=this.Vf=-1,10>this.Eb.length||10>this.qd.length)return this.pe=this.Eb.length,this.Xb=6,!0;this.ff==null&&(this.ff=new u.sr(!0),this.ow=this.ff.getIterator(),this.Ef=new u.ia(0)),this.ff.kr();for(var r=0;r<this.qd.length;r++){var o=this.qd[r];this.ff.Br(o.v,o.C)}for(this.ff.Fp(),this.Ef.Jb(2*this.qd.length),this.Ef.resize(0),r=0;r<2*this.qd.length;r++)this.Ef.add(r);return this.Kt(this.Ef,this.Ef.size,!1),this.Rg=this.Ef.size,this.Cf!=-1&&(this.Ad.bh(this.Cf),this.Hj.resize(0),this.Cf=-1),this.Xb=7,this.kJ()},a.prototype.qS=function(){if(this.Af=this.Vf=-1,10>this.Eb.length||10>this.qd.length)return this.pe=this.Eb.length,this.Xb=6,!0;this.rd==null&&(this.rd=new u.sr(!0),this.oo=this.rd.getIterator(),this.Ld=new u.ia(0)),this.ff==null&&(this.ff=new u.sr(!0),this.ow=this.ff.getIterator(),this.Ef=new u.ia(0)),this.rd.kr();for(var r=0;r<this.Eb.length;r++){var o=this.Eb[r];this.rd.Br(o.v,o.C)}for(this.rd.Fp(),this.ff.kr(),r=0;r<this.qd.length;r++)o=this.qd[r],this.ff.Br(o.v,o.C);for(this.ff.Fp(),this.Ld.Jb(2*this.Eb.length),this.Ef.Jb(2*this.qd.length),this.Ld.resize(0),this.Ef.resize(0),r=0;r<2*this.Eb.length;r++)this.Ld.add(r);for(r=0;r<2*this.qd.length;r++)this.Ef.add(r);return this.Kt(this.Ld,this.Ld.size,!0),this.Kt(this.Ef,this.Ef.size,!1),this.pe=this.Ld.size,this.Rg=this.Ef.size,this.Df!=-1&&(this.Ad.bh(this.Df),this.Ij.resize(0),this.Df=-1),this.Cf!=-1&&(this.Ad.bh(this.Cf),this.Hj.resize(0),this.Cf=-1),this.Xb=7,!0},a.prototype.UX=function(){var r=this.Ld.get(--this.pe),o=r>>1;return a.eq(r)?(this.rd.remove(o),this.pe!=0||(this.Af=this.Vf=-1,this.Ic=!0,!1)):(this.oo.EB(this.Eb[o].v,this.Eb[o].C,this.qa),this.Vf=o,this.Xb=10,!0)},a.prototype.QX=function(){return--this.pe==-1?(this.Af=this.Vf=-1,this.Ic=!0,!1):(this.Rg=this.Vf=this.pe,this.Xb=13,!0)},a.prototype.RX=function(){return--this.pe==-1?(this.Af=this.Vf=-1,this.Ic=!0,!1):(this.Vf=this.pe,this.Rg=this.qd.length,this.Xb=14,!0)},a.prototype.SX=function(){var r=this.Ld.get(this.pe-1),o=this.Ef.get(this.Rg-1),l=this.Rr(r,!0),d=this.Rr(o,!1);return l>d?this.ux():l<d?this.iC():a.Tz(r)?this.ux():a.Tz(o)?this.iC():this.ux()},a.prototype.ux=function(){var r=this.Ld.get(--this.pe),o=r>>1;if(a.eq(r))return this.Df!=-1&&this.Ij.get(o)!=-1?(this.Ad.jd(this.Df,this.Ij.get(o)),this.Ij.set(o,-1)):this.rd.remove(o),this.pe!=0||(this.Af=this.Vf=-1,this.Ic=!0,!1);if(this.Cf!=-1&&0<this.Ad.bs(this.Cf))for(r=this.Ad.rc(this.Cf);r!=-1;){var l=this.Ad.getData(r);this.ff.vj(l),this.Hj.set(l,-1),l=this.Ad.lb(r),this.Ad.jd(this.Cf,r),r=l}return 0<this.ff.size()?(this.ow.EB(this.Eb[o].v,this.Eb[o].C,this.qa),this.Vf=o,this.Xb=12):(this.Df==-1&&(this.Ad==null&&(this.Ad=new u.jp),this.Ij=new u.ia(0),this.Ij.resize(this.Eb.length,-1),this.Ij.Wj(-1,0,this.Eb.length),this.Df=this.Ad.Ph(1)),this.Ij.set(o,this.Ad.addElement(this.Df,o)),this.Xb=7),!0},a.prototype.iC=function(){var r=this.Ef.get(--this.Rg),o=r>>1;if(a.eq(r))return this.Cf!=-1&&this.Hj.get(o)!=-1?(this.Ad.jd(this.Cf,this.Hj.get(o)),this.Hj.set(o,-1)):this.ff.remove(o),this.Rg!=0||(this.Af=this.Vf=-1,this.Ic=!0,!1);if(this.Df!=-1&&0<this.Ad.bs(this.Df))for(r=this.Ad.rc(this.Df);r!=-1;){var l=this.Ad.getData(r);this.rd.vj(l),this.Ij.set(l,-1),l=this.Ad.lb(r),this.Ad.jd(this.Df,r),r=l}return 0<this.rd.size()?(this.oo.EB(this.qd[o].v,this.qd[o].C,this.qa),this.Af=o,this.Xb=11):(this.Cf==-1&&(this.Ad==null&&(this.Ad=new u.jp),this.Hj=new u.ia(0),this.Hj.resize(this.qd.length,-1),this.Hj.Wj(-1,0,this.qd.length),this.Cf=this.Ad.Ph(0)),this.Hj.set(o,this.Ad.addElement(this.Cf,o)),this.Xb=7),!0},a.prototype.Uz=function(){if(this.Af=this.oo.next(),this.Af!=-1)return!1;var r=this.Ld.get(this.pe)>>1;return this.rd.vj(r),this.Xb=4,!0},a.prototype.jT=function(){if(this.Vf=this.oo.next(),this.Vf!=-1)return!1;this.Af=this.Vf=-1;var r=this.Ef.get(this.Rg)>>1;return this.ff.vj(r),this.Xb=7,!0},a.prototype.gT=function(){if(this.Af=this.ow.next(),this.Af!=-1)return!1;var r=this.Ld.get(this.pe)>>1;return this.rd.vj(r),this.Xb=7,!0},a.prototype.hT=function(){if(--this.Rg==-1)return this.Xb=5,!0;this.wq.K(this.Eb[this.pe]);var r=this.Eb[this.Rg];return this.wq.W(this.qa,this.qa),!this.wq.isIntersecting(r)||(this.Af=this.Rg,!1)},a.prototype.iT=function(){if(--this.Rg==-1)return this.Xb=6,!0;this.wq.K(this.Eb[this.pe]);var r=this.qd[this.Rg];return this.wq.W(this.qa,this.qa),!this.wq.isIntersecting(r)||(this.Af=this.Rg,!1)},a.prototype.kJ=function(){return this.rd==null?(this.Ic=!0,!1):(this.pe=this.Ld.size,0<this.rd.size()&&this.rd.reset(),this.Df!=-1&&(this.Ad.bh(this.Df),this.Ij.resize(0),this.Df=-1),this.Ic=!1,!0)},a.prototype.jJ=function(){return this.ff==null?(this.Ic=!0,!1):(this.Rg=this.Ef.size,0<this.ff.size()&&this.ff.reset(),this.Cf!=-1&&(this.Ad.bh(this.Cf),this.Hj.resize(0),this.Cf=-1),this.Ic=!1,!0)},a.prototype.Kt=function(r,o,l){this.Am==null&&(this.Am=new u.Xt),l=new c(this,l),this.Am.sort(r,0,o,l)},a.prototype.JX=function(r,o,l,d){var p=this;r.Vd(o,l,function(g,v){var w=p.Rr(g,d),T=p.Rr(v,d);return w<T||w==T&&a.eq(g)&&a.Tz(v)?-1:1})},a.prototype.Rr=function(r,o){var l=.5*this.qa;return o?(o=this.Eb[r>>1],a.eq(r)?o.G-l:o.H+l):(o=this.qd[r>>1],a.eq(r)?o.G-l:o.H+l)},a}(),u.xC=A}(V||(V={})),function(u){var A=function(){function b(){}return b.construct=function(c,a,r,o,l,d){var p=new b;return p.v=c,p.G=a,p.Ye=r,p.C=o,p.H=l,p.Bg=d,p},b.prototype.Oa=function(){this.Ye=this.v=NaN},b.prototype.B=function(){return isNaN(this.v)},b.prototype.XS=function(){return isNaN(this.Ye)},b.prototype.K=function(c,a,r,o,l,d){o!==void 0?typeof c=="number"?(this.v=c,this.G=a,this.Ye=r,this.C=o,this.H=l,this.Bg=d):(this.v=c.x-.5*a,this.C=this.v+a,this.G=c.y-.5*r,this.H=this.G+r,this.Ye=c.z-.5*o,this.Bg=this.Ye+o):(this.v=c,this.G=a,this.Ye=r,this.C=c,this.H=a,this.Bg=r)},b.prototype.move=function(c){this.v+=c.x,this.G+=c.y,this.Ye+=c.z,this.C+=c.x,this.H+=c.y,this.Bg+=c.z},b.prototype.copyTo=function(c){c.v=this.v,c.G=this.G,c.C=this.C,c.H=this.H},b.prototype.Lk=function(c,a,r){this.v>c?this.v=c:this.C<c&&(this.C=c),this.G>a?this.G=a:this.H<a&&(this.H=a),isNaN(this.Ye)==0?this.Ye>r?this.Ye=r:this.Bg<r&&(this.Bg=r):this.Bg=this.Ye=r},b.prototype.Zb=function(c,a,r){if(typeof c=="number")this.B()?(this.v=c,this.G=a,this.Ye=r,this.C=c,this.H=a,this.Bg=r):this.Lk(c,a,r);else if(c instanceof u.Nd)this.Zb(c.x,c.y,c.z);else{if(!(c instanceof b))throw u.i.N();c.B()||(this.Zb(c.v,c.G,c.Ye),this.Zb(c.C,c.H,c.Bg))}},b.prototype.construct=function(c,a,r){c.B()||a.B()?this.Oa():(this.v=c.oa,this.C=c.va,this.G=a.oa,this.H=a.va,this.Ye=r.oa,this.Bg=r.va)},b.prototype.nB=function(c){if(c==null||8>c.length)throw u.i.N();c[0]=new u.Nd(this.v,this.G,this.Ye),c[1]=new u.Nd(this.v,this.H,this.Ye),c[2]=new u.Nd(this.C,this.H,this.Ye),c[3]=new u.Nd(this.C,this.G,this.Ye),c[4]=new u.Nd(this.v,this.G,this.Bg),c[5]=new u.Nd(this.v,this.H,this.Bg),c[6]=new u.Nd(this.C,this.H,this.Bg),c[7]=new u.Nd(this.C,this.G,this.Bg)},b.prototype.Zw=function(c){if(c==null||c.length==0)this.Oa();else{var a=c[0];for(this.K(a.x,a.y,a.z),a=1;a<c.length;a++){var r=c[a];this.Lk(r.x,r.y,r.z)}}},b}();u.OK=A}(V||(V={})),function(u){(function(A){A.Qa=function(){var b=Error();return b.message="Internal Error",b},A.Ie=function(){var b=Error();return b.message="Not Implemented",b},A.Xk=function(){var b=Error();return b.message="The input unit and the spatial reference unit are not of the same unit type.ie Linear vs.Angular",b},A.Hb=function(){var b=Error();return b.message="Invalid Call",b},A.N=function(b){var c=Error();return c.message="Illegal Argument Exception",b!==void 0&&(c.message+=": "+b),c},A.fu=function(b){var c=Error();return c.message=b!==void 0?"Runtime Exception: "+b:"Runtime Exception.",c},A.fa=function(b){var c=Error();return c.message="Geometry Exception: "+b,c},A.GK=function(){var b=Error();return b.message="Assert Failed Exception",b},A.ce=function(){var b=Error();return b.message="IndexOutOfBoundsException",b},A.WC=function(){var b=Error();return b.message="UserCancelException",b}})(u.i||(u.i={}))}(V||(V={})),function(u){(u=u.bm||(u.bm={}))[u.forward=0]="forward",u[u.reverse=1]="reverse"}(V||(V={})),function(u){var A=function(){function a(r,o){this.Wa=r,this.FH=o,this.LH=-1,this.sl=!1}return a.prototype.qe=function(){},a.prototype.next=function(){if(++this.LH==this.FH.I())return null;var r=this.FH.Na(this.LH);r.scale(this.Wa.ec);var o=new u.Da;return this.Wa.sy(r,this.sl,o),o},a.prototype.La=function(){return 0},a}(),b=function(){function a(r,o,l){this.Wa=r,this.rw=o,this.Xn=!1,this.co=l,this.bw=[0],this.sk=[0],this.Nj=[0],this.Gs=[0],this.sl=!1,this.qq=new u.Da,this.uk=[]}return a.prototype.qe=function(){},a.prototype.next=function(){if(this.Xn){this.Xn=!1,this.sd.ha();var r=u.aa.jg(this.qq);return u.Fg.Mk(r,this.Wa.Aq,!0,!0,this.Wa.Ub)}if(this.sd==null&&(this.sd=this.rw.Ga(),this.sd.$a(),this.co!=null&&this.co.Yk(null,0)),!this.sd.Ha()){if(!this.sd.$a())return null;this.co!=null&&this.co.Yk(null,0)}r=null,this.sk[0]=0,this.FA=this.bw[0]=0,this.di=NaN,this.Xn=!1;for(var o=this.uk.length=0,l=new u.h,d=new u.h,p=[0];this.sd.Ha()&&8>this.FA;){var g=this.sd.ha();if(l.L(g.ac()),d.L(g.wc()),l.scale(this.Wa.ec),d.scale(this.Wa.ec),u.cj.Mu(l,d)?l.x=d.x:u.cj.Ku(l,d)&&(d.x=l.x),this.uk.length=0,u.cj.tF(this.Wa.Tb,this.Wa.kc,this.Wa.ze,l,d,this.Wa.QA,this.Wa.Zs,p,this.Nj,this.Gs,this.uk,this.bw),this.co!=null&&(g=this.uk.slice(0),this.co.qG(this.co.da()-1,g,g.length-1)),u.cj.Lu(l,d)?(this.qq.Oa(),this.Wa.sy(l,this.sl,this.qq),this.Xn=!0):(this.qq.Oa(),this.Xn=this.xy(p[0],this.qq)),this.Xn){if(this.sd.li(),this.sd.Ez()){this.sd.li(),this.sd.ha();break}this.sd.DW();break}r==null&&(r=new u.Da).Yk(null,0),this.OD(r),o++}if(this.bw[0]=0,0<o){for(p=this.sd.wb();0<o;)this.sd.li(),l.L(this.rw.Na(this.sd.wb())),d.L(this.rw.Na(this.sd.ik())),l.scale(this.Wa.ec),d.scale(this.Wa.ec),this.sl&&(u.cj.Mu(l,d)?l.x=d.x:u.cj.Ku(l,d)&&(d.x=l.x)),this.uk.length=0,u.cj.tF(this.Wa.Tb,this.Wa.kc,this.Wa.ze,d,l,this.Wa.QA,this.Wa.Zs,null,this.Nj,this.Gs,this.uk,this.bw),this.OD(r),o--;return l.L(this.rw.Na(this.sd.wb())),l.scale(this.Wa.ec),c.Hr(this.Wa.Tb,this.Wa.kc,this.Wa.ec,this.Wa.rb,l,this.di+1.570796326794897,this.di+4.71238898038469,this.Wa.ao,this.sl,this.sk,r,NaN,NaN),this.sd.Vb(p),this.sd.ha(),o=u.ta.kj(null,r,!0),u.Fg.Mk(r,o,!0,!0,this.Wa.Ub)}return this.Xn=!1,this.sd.ha(),r=u.aa.jg(this.qq),u.Fg.Mk(r,this.Wa.Aq,!0,!0,this.Wa.Ub)},a.prototype.OD=function(r){var o=this.uk[0],l=this.Nj[0]-1.570796326794897,d=this.Gs[0]+1.570796326794897;if(!isNaN(this.di)){if(this.di>=this.Nj[0]){var p=this.di+1.570796326794897;l=p+3.141592653589793-(this.di-this.Nj[0])}else l=(p=this.di+1.570796326794897)+3.141592653589793-(6.283185307179586-(this.Nj[0]-this.di));var g=!(this.di>=this.Nj[0]&&3.141592653589793>=this.di-this.Nj[0])&&!(this.di<this.Nj[0]&&3.141592653589793<=this.Nj[0]-this.di),v=!1;if(Math.abs(l-p)<=.5*this.Wa.ao)if(g){var w=r.Na(r.I()-2);w.scale(this.Wa.ec);var T=new u.ga(0);for(u.kb.Xy(this.Wa.Tb,this.Wa.kc,o.x,o.y,w.x,w.y,T),w=T.u;w<=p;)w+=6.283185307179586;for(;w>p;)w-=6.283185307179586;w<l&&(v=!0)}else v=!0;v?(r.DB(0,r.I()-1),this.sl||((o=new u.h).L(r.Na(r.I()-1)),o.scale(this.Wa.ec),-3.141592653589793>o.x-this.sk[0]?this.sk[0]-=6.283185307179586:3.141592653589793<o.x-this.sk[0]&&(this.sk[0]+=6.283185307179586)),g||(l=.5*(l+p))):(g?((p=new u.h).L(o),p.scale(1/this.Wa.ec),r.wf(0,-1,p)):c.Hr(this.Wa.Tb,this.Wa.kc,this.Wa.ec,this.Wa.rb,this.uk[0],p,l,this.Wa.ao,this.sl,this.sk,r,NaN,NaN),this.FA+=1)}c.qy(this.Wa.Tb,this.Wa.kc,this.Wa.ec,this.Wa.rb,this.Wa.ze,this.uk,l,d,this.sl,this.sk,r),this.di=this.Gs[0]},a.prototype.xy=function(r,o){return this.Wa.xy(this.uk,r,this.Nj[0],this.Gs[0],this.sl,o)},a.prototype.La=function(){return 0},a}(),c=function(){function a(){}return a.buffer=function(r,o,l,d,p,g){if(r==null)throw u.i.N("Geometry::Geodesic_bufferer::buffer");if(r.B())return new u.Da(r.description);var v=new a;v.Qg=o,v.Jc=u.cb.sc(o);var w=u.cb.vv(v.Jc);if(v.Ub=g,v.Tb=u.cb.ev(v.Jc),v.kc=w*(2-w),v.ec=v.Jc.Hd().ai,v.qa=v.Qg.Kn(),v.Aq=v.Jc.Kn(),v.Zs=v.Aq*v.ec,v.zq=1.570796326794897/v.ec,v.OY=3.141592653589793/v.ec,v.Js=6.283185307179586/v.ec,v.PY=v.Js/6,v.LA=0,v.NY=1.5707963267948966*v.Tb/v.LA,l==4?(v.ze=2,v.Wv=!0):(v.ze=l,v.Wv=!1),v.Ka=d,v.rb=Math.abs(d),isNaN(p)||.001>p?v.xX():v.$n=p,l=r.getType(),u.aa.yd(l)?((l=new u.Ta(r.description)).oc(r,!0),r=l,l=1607):l==197&&(l=new u.l,r.A(l),l.R()<=v.qa||l.ca()<=v.qa?((l=new u.Ta(r.description)).ad(r,!1),r=l,l=1607):((l=new u.Da(r.description)).ad(r,!1),r=l,l=1736)),v.yX(),u.aa.Rn(l)||v.zX(),v.rb<=.5*v.$n)return l!=1736?new u.Da(r.description):v.Wv?r:u.cj.Qr(r,v.Qg,v.ze,v.QA,-1,g);if(0>v.Ka&&l!=1736)return new u.Da(r.description);if(v.Wv&&u.aa.Hc(l)?(o=u.cj.Qr(r,o,4,NaN,v.$n,g),r=u.cb.zh(o,v.Qg,v.Jc)):r=u.cb.zh(r,v.Qg,v.Jc),(r=u.Hh.lj(r,v.Jc)).B())return new u.Da(r.description);switch(!v.Wv&&u.aa.Hc(l)&&(r=u.cj.pI(v.ec,r)),r=a.KX(r,v.Jc),l){case 1736:o=v.UN(r);break;case 1607:o=v.VN(r);break;case 550:o=v.SN(r);break;case 33:o=v.TN(r);break;default:throw u.i.fa("corrupted_geometry")}return(v=u.cb.zh(o,v.Jc,v.Qg)).Jl(r.description),v},a.prototype.UN=function(r){var o=new u.Da;r=new b(this,r,o),r=u.Gh.local().V(r,this.Jc,this.Ub).next(),r=u.ip.nj(r,this.Jc,2);var l=new u.Dd;return l.scale(1/this.ec,1/this.ec),o.Oc(l),o=u.ip.nj(o,this.Jc,2),0<=this.Ka?u.Gh.local().V(o,r,this.Jc,this.Ub):u.kp.local().V(o,r,this.Jc,this.Ub)},a.prototype.VN=function(r){return r=new b(this,r,null),r=u.Gh.local().V(r,this.Jc,this.Ub).next(),u.ip.nj(r,this.Jc,2)},a.prototype.SN=function(r){return r=new A(this,r),r=u.Gh.local().V(r,this.Jc,this.Ub).next(),u.ip.nj(r,this.Jc,2)},a.prototype.TN=function(r){(r=r.D()).scale(this.ec);var o=new u.Da;return this.sy(r,!1,o),u.ip.nj(o,this.Jc,2)},a.prototype.xy=function(r,o,l,d,p,g){var v=r[0],w=r[r.length-1],T=v.y>w.y?v.y:w.y,$=u.F.q(this.Tb,this.kc,v.y<w.y?v.y:w.y);if(T=u.F.q(this.Tb,this.kc,T),.001<this.LA-($+o+this.rb)&&.001<this.LA+(T-o-this.rb))return!1;$=(o=l-1.570796326794897)-3.141592653589793,T=o+3.141592653589793;var C=(l=d+1.570796326794897)+3.141592653589793,O=[NaN],N=[NaN],R=[NaN],F=[NaN];if(d=!1,a.dJ(this.Tb,this.kc,this.rb,v,o,$,w,l,O,N),a.dJ(this.Tb,this.kc,this.rb,w,C,l,v,$,R,F),(l<O[0]&&O[0]<C||l<N[0]&&N[0]<C)&&(d=!0),d||($<R[0]&&R[0]<o||$<F[0]&&F[0]<o)&&(d=!0),!d&&p)return!1;for(var G=[],z=r.length-1;0<=z;z--)G.push(r[z]);return g.Oa(),g.Yk(null,0),z=[0],a.qy(this.Tb,this.kc,this.ec,this.rb,this.ze,r,o,l,p,z,g),a.Hr(this.Tb,this.kc,this.ec,this.rb,w,l,C,this.ao,p,z,g,O[0],N[0]),a.qy(this.Tb,this.kc,this.ec,this.rb,this.ze,G,C,T,p,z,g),a.Hr(this.Tb,this.kc,this.ec,this.rb,v,$,o,this.ao,p,z,g,R[0],F[0]),r=!1,p||(r=this.IE(this.ec,g)),d||r},a.prototype.sy=function(r,o,l){l.Oa(),l.Yk(null,0),a.Hr(this.Tb,this.kc,this.ec,this.rb,r,-this.ao,6.283185307179586,this.ao,o,[0],l,NaN,NaN),o||this.IE(this.ec,l)},a.prototype.IE=function(r,o){var l=this.vO(r,o);return r=this.wO(r,o),l||r},a.prototype.vO=function(r,o){var l=o.I(),d=!1,p=new u.l;if(o.A(p),!u.s.Y(p.H*r,1.570796326794897)&&!u.s.Y(p.G*r,-1.570796326794897))return!1;var g=new u.h;for(--l;0<=l;l--)o.D(l,g),(g.y==p.H&&u.s.Y(g.y*r,1.570796326794897)||g.y==p.G&&u.s.Y(g.y*r,-1.570796326794897))&&(d=!0,this.OI(g,l,o));return d},a.prototype.wO=function(r,o){var l=o.Na(0),d=o.Na(o.I()-1);return 3.141592653589793<Math.abs(l.x-d.x)*r?(this.VV(o),!0):this.uO(o)},a.prototype.uO=function(r){return 0>r.Ke()&&(this.UV(r),!0)},a.prototype.OI=function(r,o,l){var d=l.I(),p=0<o?o-1:d-1;if(d=l.Na(o<d-1?o+1:0),p=l.Na(p),!u.s.Y(d.y,r.y)&&!u.s.Y(d.x,r.x)){var g=new u.h;g.ma(d.x,r.y),l.Cb(o,g)}u.s.Y(p.y,r.y)||u.s.Y(p.x,r.x)||((d=new u.h).ma(p.x,r.y),l.wf(0,o,d))},a.prototype.VV=function(r){var o=new u.Da,l=new u.Da,d=new u.Dd,p=r.Na(0),g=r.Na(r.I()-1),v=new u.h;p.x>g.x?(g=this.zq,d.gg(-this.Js,0)):(g=-this.zq,d.gg(this.Js,0)),o.add(r,!1),r.Oa(),l.add(o,!1),l.Oc(d),p=new u.l,l.A(p),p.W((this.Js-p.R())/2,0),p.G=-this.zq,p.H=this.zq;for(var w=0;w<l.I();w++)l.D(w,v),o.wf(0,-1,v);for(l.Oc(d),w=0;w<l.I();w++)l.D(w,v),o.wf(0,-1,v);l=o.Na(0),d=o.Na(o.I()-1),v.ma(d.x,g),o.wf(0,-1,v),v.ma(.5*(d.x+l.x),g),o.wf(0,-1,v),v.ma(l.x,g),o.wf(0,-1,v),o=u.Hh.ks(o,this.Jc,2,!0,p.v),o=u.Hh.ks(o,this.Jc,2,!0,p.C),o=u.Ud.clip(o,p,this.Aq,NaN),r.add(o,!1)},a.prototype.UV=function(r){var o=new u.l;r.A(o),o.W((this.Js-o.R())/2,0),o.G=-this.zq,o.H=this.zq,r.Yk(null,0);var l=new u.h;l.ma(o.v,o.G),r.wf(1,-1,l),l.ma(o.v,o.H),r.wf(1,-1,l),l.ma(.5*(o.v+o.C),o.H),r.wf(1,-1,l),l.ma(o.C,o.H),r.wf(1,-1,l),l.ma(o.C,o.G),r.wf(1,-1,l),l.ma(.5*(o.v+o.C),o.G),r.wf(1,-1,l)},a.qy=function(r,o,l,d,p,g,v,w,T,$,C){var O=null;T||((O=new u.h).Rc(),0<C.I()&&(O.L(C.Na(C.I()-1)),O.scale(l)));var N=new u.ga(0),R=new u.ga(0),F=new u.ga(0),G=new u.h,z=new u.h,B=g[g.length-1];l=1/l;for(var q=0;q<g.length;q++){var K=g[q];if(q==0)var ee=v;else q==g.length-1?ee=w:(u.kb.wd(r,o,B.x,B.y,K.x,K.y,null,null,N,p),ee=N.u-1.570796326794897);u.kb.yi(r,o,K.x,K.y,d,ee,R,F),T?z.ma(R.u,F.u):(G.ma(R.u,F.u),a.gJ(K.x,G.x,O.x,$),z.ma($[0]+G.x,G.y),O.L(z)),z.scale(l),C.wf(0,-1,z)}},a.Hr=function(r,o,l,d,p,g,v,w,T,$,C,O,N){if(!(v-g<w)){var R=new u.ga(0),F=new u.ga(0),G=new u.h,z=new u.h,B=null;T||((B=new u.h).Rc(),0<C.I()&&(B.L(C.Na(C.I()-1)),B.scale(l)));var q=u.O.truncate(Math.ceil(g/w)),K=q++*w;for(K==g&&(K=q++*w),l=1/l;K<v+w&&(g<O&&O<K?(K=O,q--):g<N&&N<K&&(K=N,q--),!(K>=v));)u.kb.yi(r,o,p.x,p.y,d,K,R,F),T?z.ma(R.u,F.u):(G.ma(R.u,F.u),a.gJ(p.x,G.x,B.x,$),z.ma($[0]+G.x,G.y),B.L(z)),z.scale(l),C.wf(0,-1,z),g=K,K=q++*w}},a.dJ=function(r,o,l,d,p,g,v,w,T,$){var C=new u.h,O=new u.h,N=new u.ga(0),R=new u.ga(0);for(u.kb.yi(r,o,d.x,d.y,l,p,N,R),C.ma(N.u,R.u),u.kb.yi(r,o,d.x,d.y,l,g,N,R),O.ma(N.u,R.u),l=new u.ga(0),u.kb.Xy(r,o,v.x,v.y,C.x,C.y,l),T[0]=l.u,u.kb.Xy(r,o,v.x,v.y,O.x,O.y,l),$[0]=l.u;T[0]<=$[0];)T[0]+=6.283185307179586;for(;T[0]>$[0];)T[0]-=6.283185307179586;for(;T[0]>=w;)T[0]-=6.283185307179586,$[0]-=6.283185307179586;for(;T[0]<w;)T[0]+=6.283185307179586,$[0]+=6.283185307179586},a.gJ=function(r,o,l,d){if(isNaN(l)){for(;3.141592653589793<d[0]+o-r;)d[0]-=6.283185307179586;for(;3.141592653589793<r-(d[0]+o);)d[0]+=6.283185307179586}else 3.141592653589793<d[0]+o-l?d[0]-=6.283185307179586:3.141592653589793<l-(d[0]+o)&&(d[0]+=6.283185307179586)},a.KX=function(r,o){var l=r.getType(),d=u.aa.Hc(l)?r.da():l==550?r.I():1;if(d==1)return r;var p=new u.ia(0);p.resize(d);for(var g=[],v=new u.l,w=0;w<d;w++){if(p.write(w,w),u.aa.Hc(l)){r.Rj(w,v);var T=v.sf()}else T=r.Na(w);T=u.XK.$X(o,T),g[w]=T}for(p.Vd(0,p.size,function($,C){return g[$]<g[C]?-1:g[$]>g[C]?1:0}),o=r.Ia(),w=0;w<d;w++)v=p.read(w),u.aa.Hc(l)?o.addPath(r,v,!0):o.Fd(r,v,v+1);return o},a.prototype.yX=function(){var r=Math.min(3.141592653589793*this.Tb-this.rb,this.rb);r=Math.min(r,.39269908169872414*this.Tb);var o=new u.h;o.ma(0,10*this.ec);var l=45*this.ec,d=new u.ga(0),p=new u.ga(0),g=new u.ga(0),v=new u.ga(0),w=new u.ga(0),T=new u.ga(0),$=new u.ga(0),C=new u.ga(0),O=new u.h,N=new u.h,R=new u.h,F=new u.h;u.kb.yi(this.Tb,this.kc,o.x,o.y,r,0,d,p),O.ma(d.u,p.u),u.kb.yi(this.Tb,this.kc,o.x,o.y,r,l,g,v),N.ma(g.u,v.u),d=new u.ga(0),p=new u.ga(0);for(var G=new u.ga(0);u.kb.yi(this.Tb,this.kc,o.x,o.y,r,.5*(0+l),w,T),R.ma(w.u,T.u),u.kb.wd(this.Tb,this.kc,O.x,O.y,N.x,N.y,d,p,null,2),u.kb.oj(this.Tb,this.kc,O.x,O.y,.5*d.u,p.u,$,C,2),F.ma($.u,C.u),u.kb.wd(this.Tb,this.kc,R.x,R.y,F.x,F.y,G,null,null,2),!(G.u<=this.$n);)l*=.9,u.kb.yi(this.Tb,this.kc,o.x,o.y,r,l,g,v),N.ma(g.u,v.u);this.ao=6.283185307179586/Math.ceil(6.283185307179586/(l-0))},a.prototype.zX=function(){var r=Math.min(3.141592653589793*this.Tb-this.rb,this.rb);r=Math.min(r,.39269908169872414*this.Tb);var o=new u.h,l=new u.h;o.ma(0,10*this.ec),l.ma(10*this.ec,10*this.ec);var d=new u.ga(0),p=new u.ga(0),g=new u.ga(0);u.kb.wd(this.Tb,this.kc,o.x,o.y,l.x,l.y,g,d,p,this.ze);var v=new u.ga(0),w=new u.ga(0),T=new u.ga(0),$=new u.ga(0),C=new u.h,O=new u.ga(0),N=new u.ga(0),R=new u.ga(0),F=new u.ga(0),G=new u.ga(0),z=new u.ga(0),B=new u.ga(0),q=new u.ga(0),K=new u.ga(0),ee=new u.h,oe=new u.h,ue=new u.h,we=new u.h,me=1;d=d.u,p=p.u+1.570796326794897,g=g.u,u.kb.yi(this.Tb,this.kc,o.x,o.y,r,d-1.570796326794897,N,R),ee.ma(N.u,R.u),u.kb.yi(this.Tb,this.kc,l.x,l.y,r,p,F,G),oe.ma(F.u,G.u),N=new u.ga(0),R=new u.ga(0),p=new u.ga(0);for(var Re=new u.ga(0);u.kb.oj(this.Tb,this.kc,o.x,o.y,.5*(0+me)*g,d,v,w,this.ze),C.ma(v.u,w.u),u.kb.wd(this.Tb,this.kc,o.x,o.y,C.x,C.y,null,null,O,this.ze),u.kb.yi(this.Tb,this.kc,C.x,C.y,r,O.u+1.570796326794897,z,B),ue.ma(z.u,B.u),u.kb.wd(this.Tb,this.kc,ee.x,ee.y,oe.x,oe.y,N,R,null,2),u.kb.oj(this.Tb,this.kc,ee.x,ee.y,.5*N.u,R.u,q,K,2),we.ma(q.u,K.u),u.kb.wd(this.Tb,this.kc,ue.x,ue.y,we.x,we.y,p,null,null,2),!(p.u<=this.$n);)me*=.9,u.kb.oj(this.Tb,this.kc,o.x,o.y,me*g,d,T,$,this.ze),l.ma(T.u,$.u),u.kb.wd(this.Tb,this.kc,o.x,o.y,l.x,l.y,null,null,Re,this.ze),u.kb.yi(this.Tb,this.kc,l.x,l.y,r,Re.u+1.570796326794897,F,G),oe.ma(F.u,G.u);1e5<(r=me*g)&&(r=1e5),this.QA=r},a.prototype.xX=function(){var r=5e4<this.rb?100:1e4<this.rb?10:1;500>this.rb/r&&(r=this.rb/500),.01>r&&(r=.01),this.$n=r},a}();u.VK=c}(V||(V={})),function(u){var A=function(){function b(){}return b.Mf=function(c,a){var r=new u.h;r.L(a),c.push(r)},b.up=function(c,a){c.add(a.x),c.add(a.y)},b.hB=function(c){c.Bh(c.size-2)},b.oB=function(c,a){a.ma(c.get(c.size-2),c.get(c.size-1))},b.Qr=function(c,a,r,o,l,d){if(c==null)throw u.i.N();var p=c.getType();if(c.B()||u.aa.Rn(p))return c;var g=new b;g.Qg=a,g.Jc=u.cb.sc(a);var v=u.cb.vv(g.Jc);if(g.Ub=d,g.Tb=u.cb.ev(g.Jc),g.kc=v*(2-v),g.ec=g.Jc.Hd().ai,g.Aq=g.Jc.Kn(),g.Zs=g.Aq*g.ec,g.AA=o,g.zA=l,g.ze=r,p==197?(r=new u.Da(c.description)).ad(c,!1):u.aa.yd(p)?(r=new u.Ta(c.description)).oc(c,!0):r=c,g.ze!=4){if((a=g.Qg.Nb(g.Jc)==0?u.cb.zh(r,g.Qg,g.Jc):u.Hh.lj(r,g.Jc)).B())return a;a=b.pI(g.ec,a),a=g.Zy(a),a=u.ip.nj(a,g.Jc,g.ze),g=u.cb.zh(a,g.Jc,g.Qg)}else{if(u.Eg.Sb(a)==2?(c=u.cb.ml(),(a=u.Xj.local().V(r,c,a,d))==c&&(a=new u.Da,c.copyTo(a))):a=u.Hh.lj(r,g.Jc),a.B())return a;g=g.CX(a)}return g},b.pI=function(c,a){var r=new u.l;if(a.xc(r),3.141592653589793>r.R()*c)return a;var o=!1;r=a.Ga();for(var l=new u.h,d=new u.h;r.$a();)for(;r.Ha();){var p=r.ha();if(l.L(p.ac()),d.L(p.wc()),l.scale(c),d.scale(c),3.141592653589793<Math.abs(l.x-d.x)){var g=b.Lu(l,d);if(!g){o=!0;break}if(6.283185307179586<Math.abs(l.x-d.x)){o=!0;break}}}if(!o)return a;o=a.Ia();var v=1<a.description.Aa,w=new u.h,T=new u.h,$=new u.h,C=new u.h,O=new u.Sa;for(r.Zi();r.$a();)for(var N=NaN,R=[0];r.Ha();){if(p=r.ha(),l.L(p.ac()),d.L(p.wc()),l.scale(c),d.scale(c),isNaN(N)?(b.Wi(l.x,NaN,R),T.L(l)):T.L($),N=T.x,g=b.Lu(l,d)){if(6.283185307179586<d.x-l.x)for(;6.283185307179586<d.x-l.x;)d.x-=6.283185307179586;if(-6.283185307179586>d.x-l.x)for(;-6.283185307179586>d.x-l.x;)d.x+=6.283185307179586;b.Wi(d.x,NaN,R),$.L(d)}else w.L(d),b.AU(w),b.Wi(w.x,N,R),$.ma(R[0]+w.x,w.y);.5>Math.abs($.x-d.x)&&$.L(d),v?(p.Tw(0,O),C.L(T),C.scale(1/c),O.Cb(C),(g=r.vm())?o.nf(O):o.lineTo(O),r.Qn()&&!a.dc(r.gb)&&(p.Tw(1,O),C.L($),C.scale(1/c),O.Cb(C),o.lineTo(O))):((g=r.vm())&&o.Hz(null,0),p=o.da()-1,C.L(T),C.scale(1/c),o.wf(p,-1,C),r.Qn()&&!a.dc(r.gb)&&(C.L($),C.scale(1/c),o.wf(p,-1,C)))}return o},b.tF=function(c,a,r,o,l,d,p,g,v,w,T,$){var C=new u.h,O=new u.h,N=0<o.compare(l);b.fJ(N,o,l,C,O),b.uF(c,a,r,C,O,d,NaN,p,g,v,w,null,T,$),N&&b.fC(v,w,null,T)},b.prototype.Zy=function(c){var a=c.Ia(),r=c.Ga(),o=[],l=null,d=null,p=1<c.description.Aa;p&&(l=new u.be(0),d=new u.ig);for(var g=[0],v=new u.h,w=new u.h,T=new u.h,$=new u.h;r.$a();)for(g[0]=0;r.Ha();){var C=r.ha();v.L(C.ac()),w.L(C.wc()),v.scale(this.ec),w.scale(this.ec);var O=0<v.compare(w);b.fJ(O,v,w,T,$),o.length=0,l!=null&&l.Bh(0),0<this.AA?b.uF(this.Tb,this.kc,this.ze,T,$,this.AA,this.zA,this.Zs,null,null,null,p?l:null,o,g):b.aR(this.Tb,this.kc,this.ze,T,$,this.zA,this.Zs,p?l:null,o,g),O&&b.fC(null,null,p?l:null,o),o[0].L(C.ac()),o[o.length-1].L(C.wc());for(var N=1;N<o.length-1;N++)o[N].scale(1/this.ec);p?(O=b.eJ(O,C,d),b.TD(r.vm(),r.Qn()&&!c.dc(r.gb),C,O,l,o,a)):b.SD(r.vm(),r.Qn()&&!c.dc(r.gb),o,a)}return a},b.prototype.CX=function(c){var a=c.Ia(),r=c.Ga(),o=[],l=null,d=new u.ig,p=1<c.description.Aa;for(p&&(l=new u.be(0));r.$a();)for(;r.Ha();){var g=r.ha(),v=g.ac(),w=g.wc();v=0<v.compare(w),w=b.eJ(v,g,d),o.length=0,l!=null&&l.Bh(0),b.BX(this.Tb,this.kc,this.ec,w,this.Qg,this.AA,this.zA,p?l:null,o),v&&b.fC(null,null,p?l:null,o),p?b.TD(r.vm(),r.Qn()&&!c.dc(r.gb),g,w,l,o,a):b.SD(r.vm(),r.Qn()&&!c.dc(r.gb),o,a)}return a},b.SD=function(c,a,r,o){c&&o.Hz(null,0),c=o.da()-1;var l=r.slice(0);o.qG(c,l,l.length-1),a&&o.wf(c,-1,r[r.length-1])},b.TD=function(c,a,r,o,l,d,p){var g=new u.Sa;if(r.To(g),c?p.nf(g):p.lineTo(g),2<d.length){c=o.Qb();for(var v=1;v<d.length-1;v++){var w=o.NG(l.get(v)*c);o.Tw(w,g),g.Cb(d[v]),p.lineTo(g)}}a&&(r.Po(g),p.lineTo(g))},b.uF=function(c,a,r,o,l,d,p,g,v,w,T,$,C,O){var N=new u.ga(0),R=new u.ga(0),F=new u.ga(0);u.kb.wd(c,a,o.x,o.y,l.x,l.y,F,N,R,r),F=F.u;var G=N=N.u;0>G&&(G+=6.283185307179586),0>(R=R.u)&&(R+=6.283185307179586),v!=null&&(v[0]=F),w!=null&&(w[0]=G),T!=null&&(T[0]=R),w=v=NaN,$!=null&&(v=((w=u.F.Ah(c,a))-(T=u.F.q(c,a,o.y)))/F,w=(w+T)/F),T=b.Mu(o,l),R=b.Ku(o,l),G=T||R;var z=b.FE(o,l,g),B=new u.ga(0),q=new u.ga(0),K=new u.h,ee=new u.h,oe=new u.h;b.Wi(o.x,NaN,O);var ue=[O[0]];if(F<=d)b.Mf(C,o),b.Wi(l.x,NaN,O),$!=null&&$.add(0),G?(T&&b.kB(o,l,$,C),R&&b.iB(o,l,$,C)):z?b.jB(o,l,N,v,w,$,C):0<p&&(ee.ma(o.x-ue[0],o.y),K.ma(l.x-O[0],l.y),b.Yy(c,a,r,o,F,N,ee,K,0,1,p,$,C,ue)),b.Mf(C,l);else{var we=F/((d=1+u.O.truncate(Math.ceil(F/d)))-1),me=new u.h,Re=0;b.Mf(C,o),me.L(o),ee.ma(o.x-O[0],o.y),$!=null&&$.add(0);for(var fe=1;fe<d;fe++){if(fe<d-1){u.kb.oj(c,a,o.x,o.y,fe*we,N,B,q,r),K.ma(B.u,q.u),b.Wi(K.x,me.x,O),oe.ma(O[0]+K.x,K.y);var Ye=fe/(d-1)}else b.Wi(l.x,NaN,O),K.ma(l.x-O[0],l.y),oe.L(l),Ye=1;G?(fe==1&&T&&b.kB(o,oe,$,C),fe==d-1&&R&&b.iB(me,l,$,C)):z?b.EE(me,oe,g)&&(o.x<l.x?me.x>oe.x&&(O[0]+=6.283185307179586,oe.ma(O[0]+K.x,K.y)):me.x<oe.x&&(O[0]-=6.283185307179586,oe.ma(O[0]+K.x,K.y)),b.jB(me,oe,N,v,w,$,C)):0<p&&b.Yy(c,a,r,o,F,N,ee,K,Re,Ye,p,$,C,ue),b.Mf(C,oe),$!=null&&$.add(Ye),me.L(oe),ee.L(K),ue[0]=O[0],Re=Ye}}},b.aR=function(c,a,r,o,l,d,p,g,v,w){var T=new u.ga(0),$=new u.ga(0),C=new u.ga(0);u.kb.wd(c,a,o.x,o.y,l.x,l.y,C,T,$,r),$=C.u,T=T.u;var O=C=NaN;if(g!=null){O=u.F.Ah(c,a);var N=u.F.q(c,a,o.y);C=(O-N)/$,O=(O+N)/$}N=b.Mu(o,l);var R=b.Ku(o,l),F=N||R;p=b.FE(o,l,p);var G=b.Lu(o,l);G=F||p||G,b.Wi(o.x,NaN,w);var z=new u.h;b.Mf(v,o),z.L(o),g!=null&&g.add(0),G?(F?(N&&b.kB(o,l,g,v),R&&b.iB(o,l,g,v)):p&&b.jB(o,l,T,C,O,g,v),b.Wi(l.x,NaN,w),b.Mf(v,l)):$<=d?(b.Wi(l.x,NaN,w),b.Mf(v,l)):(C=new u.h,p=new u.h,C.L(o),p.L(l),C.x-=w[0],p.x-=w[0],-3.141592653589793>p.x?p.x+=6.283185307179586:3.141592653589793<p.x&&(p.x-=6.283185307179586),b.Yy(c,a,r,o,$,T,C,p,0,1,d,g,v,w),b.Mf(v,l),b.Wi(l.x,NaN,w)),g!=null&&g.add(1)},b.Yy=function(c,a,r,o,l,d,p,g,v,w,T,$,C,O){var N=new u.h,R=new u.h;N.ma(p.x+O[0],p.y),new u.ga(0),new u.ga(0),new u.ga(0),new u.ga(0);var F=new u.ga(0),G=new u.ga(0),z=new u.ga(0),B=new u.h,q=new u.h,K=new u.h,ee=new u.h;B.L(p),q.L(g),p=new u.be(0),g=new u.be(0),b.up(p,q),g.add(w);var oe=new u.h,ue=new u.yb,we=[];for(b.YJ(4,we);0<p.size;){for(var me,Re=!1,fe=NaN,Ye=0;3>Ye;Ye++)if(me=we[Ye]*w+(1-we[Ye])*v,u.kb.oj(c,a,o.x,o.y,me*l,d,F,G,r),K.ma(F.u,G.u),Ye==0&&(fe=me,ee.L(K)),b.WW(B,K,q,ue),ue.hc(ue.fe(K,!0),oe),u.kb.wd(c,a,K.x,K.y,oe.x,oe.y,z,null,null,2),z.u>T){Re=!0;break}Re?(q.L(ee),w=fe,b.up(p,q),g.add(w)):(b.hB(p),g.En(g.size-1,1,g.size-1),0<p.size&&(b.Wi(q.x,N.x,O),R.ma(O[0]+q.x,q.y),b.Mf(C,R),N.L(R),$!=null&&$.add(w),B.L(q),v=w,b.oB(p,q),w=g.get(g.size-1)))}},b.BX=function(c,a,r,o,l,d,p,g,v){var w=new u.h,T=new u.h,$=new u.h,C=new u.h,O=new u.h,N=new u.h,R=new u.h,F=new u.h,G=new u.h,z=new u.h,B=new u.ga(0),q=new u.ga(0),K=new u.h,ee=[[],[]],oe=u.Eg.Sb(l)==1;l=l.Xd(0);var ue=o.ac(),we=o.wc();oe?(N.ma(ue.x*r,ue.y*r),R.ma(we.x*r,we.y*r)):(ee[0][0]=ue.x,ee[0][1]=ue.y,ee[1][0]=we.x,ee[1][1]=we.y,u.cb.vt(),N.x=ee[0][0]*r,N.y=ee[0][1]*r,R.x=ee[1][0]*r,R.y=ee[1][1]*r);var me=0,Re=0,fe=1,Ye=o.Pn();w.L(ue),T.L(we),we=new u.be(0);var Ve=new u.be(0),ft=new u.be(0);b.up(we,T),b.up(Ve,R),ft.add(fe),b.Mf(v,w),g!=null&&g.add(Re);var jt=[],Oi=0<p?Ye?5:3:Ye?5:1;b.YJ(Oi,jt);for(var Bt=new u.ga(0),gt=new u.ga(0),Xe=new u.ga(0),st=new u.ga(0),hi=new u.ga(0),Yt=new u.ga(0),ns=new u.ga(0);0<Ve.size;){var dt=!1,On=NaN;for(u.kb.wd(c,a,N.x,N.y,R.x,R.y,Bt,gt,null,2),ue=0;ue<Oi&&!(ue==0&&(!Ye&&0>=p&&Bt.u<=d&&3.141592653589793>Math.abs(N.x-R.x)||o.Ux(Re,fe)<=l));ue++){var Mt=jt[ue]*fe+(1-jt[ue])*Re;if(o.hc(Mt,$),oe?F.ma($.x*r,$.y*r):(ee[0][0]=$.x,ee[0][1]=$.y,u.cb.vt(),F.x=ee[0][0]*r,F.y=ee[0][1]*r),ue==0&&(On=Mt,O.L($),z.L(F),0<d&&(Bt.u>d||3.141592653589793<=Math.abs(N.x-R.x)))){dt=!0;break}if(Ye&&0<d){if(u.kb.wd(c,a,N.x,N.y,F.x,F.y,Xe,null,null,2),Xe.u>d||3.141592653589793<=Math.abs(N.x-F.x)){dt=!0;break}}else if(0<p){if(Ye?(C.NS(w,T,jt[ue]),oe?G.ma(C.x*r,C.y*r):(ee[0][0]=C.x,ee[0][1]=C.y,u.cb.vt(),G.x=ee[0][0]*r,G.y=ee[0][1]*r)):(C.L($),G.L(F)),u.kb.wd(c,a,N.x,N.y,G.x,G.y,st,null,null,2),!(st.u<=Bt.u)){dt=!0;break}if(u.kb.oj(c,a,N.x,N.y,st.u,gt.u,B,q,2),K.ma(B.u,q.u),u.kb.wd(c,a,K.x,K.y,F.x,F.y,hi,null,null,2),hi.u>p){dt=!0;break}if(Ye){if(u.kb.wd(c,a,K.x,K.y,G.x,G.y,Yt,null,null,2),Yt.u>p){dt=!0;break}if(u.kb.wd(c,a,G.x,G.y,F.x,F.y,ns,null,null,2),ns.u>p){dt=!0;break}}}}dt?(T.L(O),R.L(z),fe=On,b.up(we,T),b.up(Ve,R),ft.add(fe)):(b.hB(we),b.hB(Ve),ft.En(ft.size-1,1,ft.size-1),b.Mf(v,T),me+=Bt.u,g!=null&&g.add(me),0<Ve.size&&(w.L(T),N.L(R),Re=fe,b.oB(we,T),b.oB(Ve,R),fe=ft.get(ft.size-1)))}if(g!=null)for(c=1/me,ue=0;ue<g.size;ue++)g.write(ue,g.read(ue)*c)},b.fC=function(c,a,r,o){o.reverse(),r!=null&&r.ni(0,r.size,1),r=c!=null?c[0]:NaN,o=a!=null?a[0]:NaN,c!=null&&(c[0]=o),a!=null&&(a[0]=r)},b.fJ=function(c,a,r,o,l){c?(o.L(r),l.L(a)):(o.L(a),l.L(r))},b.eJ=function(c,a,r){return c?(r.create(a.getType()),a.copyTo(r.get()),r.get().reverse(),r.get()):a},b.Wi=function(c,a,r){if(isNaN(a)){for(;3.141592653589793<r[0]-c;)r[0]-=6.283185307179586;for(;3.141592653589793<c-r[0];)r[0]+=6.283185307179586}else 3.141592653589793<r[0]+c-a?r[0]-=6.283185307179586:3.141592653589793<a-(r[0]+c)&&(r[0]+=6.283185307179586)},b.WW=function(c,a,r,o){3.141592653589793>Math.abs(a.x-c.x)?(o.Dc(c),3.141592653589793<=r.x-c.x?o.Ql(r.x-6.283185307179586,r.y):3.141592653589793<=c.x-r.x?o.Ql(r.x+6.283185307179586,r.y):o.Ql(r.x,r.y)):(o.Dc(r),3.141592653589793<=c.x-r.x?o.Ql(c.x-6.283185307179586,c.y):3.141592653589793<=r.x-c.x?o.Ql(c.x+6.283185307179586,c.y):o.Ql(c.x,c.y))},b.YJ=function(c,a){for(var r=0;r<c;r++){var o=Math.ceil(r/2)/(c+1);r%2!=0&&(o=-o),a[r]=.5+o}},b.Mu=function(c,a){return!!(u.s.Y(c.y,1.570796326794897)&&!u.s.Y(a.y,1.570796326794897)||u.s.Y(c.y,-1.570796326794897)&&!u.s.Y(a.y,-1.570796326794897))},b.Ku=function(c,a){return!!(u.s.Y(a.y,1.570796326794897)&&!u.s.Y(c.y,1.570796326794897)||u.s.Y(a.y,-1.570796326794897)&&!u.s.Y(c.y,-1.570796326794897))},b.FE=function(c,a,r){return!(!b.EE(c,a,r)||u.s.Y(c.y,1.570796326794897)||u.s.Y(c.y,-1.570796326794897)||u.s.Y(a.y,1.570796326794897)||u.s.Y(a.y,-1.570796326794897))},b.EE=function(c,a,r){return Math.abs(Math.abs(c.x-a.x)-3.141592653589793)<=r},b.Lu=function(c,a){return!!(u.s.Y(c.y,1.570796326794897)&&u.s.Y(a.y,1.570796326794897)||u.s.Y(c.y,-1.570796326794897)&&u.s.Y(a.y,-1.570796326794897))},b.kB=function(c,a,r,o){if(0<c.y){var l=new u.h;l.ma(a.x,1.570796326794897)}else(l=new u.h).ma(a.x,-1.570796326794897);u.s.Y(c.x,l.x)||u.s.Y(a.y,l.y)||(b.Mf(o,l),r!=null&&r.add(0))},b.iB=function(c,a,r,o){if(0<a.y){var l=new u.h;l.ma(c.x,1.570796326794897)}else(l=new u.h).ma(c.x,-1.570796326794897);u.s.Y(a.x,l.x)||u.s.Y(c.y,l.y)||(b.Mf(o,l),r!=null&&r.add(1))},b.jB=function(c,a,r,o,l,d,p){u.s.Cd(r)?(0<1.570796326794897-c.y&&((r=new u.h).ma(c.x,1.570796326794897),b.Mf(p,r),d!=null&&d.add(o)),0<1.570796326794897-a.y&&((r=new u.h).ma(a.x,1.570796326794897),b.Mf(p,r),d!=null&&d.add(o))):(0<1.570796326794897+c.y&&((r=new u.h).ma(c.x,-1.570796326794897),b.Mf(p,r),d!=null&&d.add(l)),0<1.570796326794897+a.y&&((r=new u.h).ma(a.x,-1.570796326794897),b.Mf(p,r),d!=null&&d.add(l)))},b.AU=function(c){if(-3.141592653589793>c.x)for(;-3.141592653589793>c.x;)c.x+=6.283185307179586;if(3.141592653589793<c.x)for(;3.141592653589793<c.x;)c.x-=6.283185307179586},b}();u.cj=A}(V||(V={})),function(u){u.ip=function(){function A(){}return A.nj=function(b,c,a){if(b==null||c==null||!u.cb.Wc(c))throw u.i.N();if(b.B())return b;var r=b,o=r.getType();if(u.aa.Hc(o)){r=u.Hh.lj(b,c),b=new u.l,r.A(b),o=u.ta.Wd(c,b,!1);for(var l=u.cb.gh(c),d=Math.floor((b.v-l.v)/l.R())*l.R()+l.v;d<b.C;)d>b.v+o&&d<b.C-o&&(r=u.Hh.ks(r,c,a,!0,d)),d+=l.R()}else{if(o==197)return(b=new u.Da(r.description)).ad(r,!1),A.nj(b,c,a);if(u.aa.yd(o))return(b=new u.Ta(r.description)).oc(r,!0),A.nj(b,c,a)}return A.Uy(r,c)},A.Uy=function(b,c){if(b==null||c==null||!u.cb.Wc(c))throw u.i.N();if(b.B())return b;var a=b.getType();return a==197?(a=new u.Da(b.description)).ad(b,!1):u.aa.yd(a)?(a=new u.Ta(b.description)).oc(b,!0):a=b,(a=u.Hh.lj(a,c)).B()?a:u.Eg.Sb(c)==1?u.Hh.Fn(a,c,0,a!=b,0):A.NQ(a,c,a!=b)},A.NQ=function(b,c,a){if(!u.cb.Wc(c))throw u.i.N();if(b.B())return b;var r=u.cb.bf(c),o=-180*r;return r*=360,u.Eg.Sb(c)==2&&(r=(o=u.cb.gh(c)).C,r-=o=o.v),u.Hh.Hp(b,o,r,c,a,0,!0)},A}()}(V||(V={})),function(u){u.BY=function(){function A(){}return A.P=function(b){return 0>b?-b:b},A.Mb=function(b,c){return 0<=c?A.P(b):-A.P(b)},A.Y=function(b,c){return b==c||A.P(b-c)<=A.JC*(1+(A.P(b)+A.P(c))/2)},A.Cd=function(b){return b==0||A.P(b)<=A.JC},A.Ah=function(b,c){var a=(c=(1-(c=Math.sqrt(1-c)))/(1+c))*c;return b/(1+c)*(1+a*(.25+a*(.015625+1/256*a)))*A.EL},A.EL=1.5707963267948966,A.JC=3552713678800501e-30,A}()}(V||(V={})),function(u){var A=function(c){this.Wf=c,this.Kk=this.Wf.getCode(),0>this.Kk&&(this.Kk=0)};u.DY=A;var b=function(){function c(a){a===void 0&&(a=null),this.Cj=null,this.Un=!1,a!==null&&(this.Cj=new A(a))}return c.prototype.Ec=function(){return this.Cj!=null?this.Cj.Kk:0},c.prototype.Of=function(){var a=new c;return this.copyTo(a),a},c.prototype.copyTo=function(a){a.Cj=this.Cj,a.Un=this.Un},c.prototype.Qz=function(){this.Un=!this.Un},c.prototype.qm=function(){return this.Cj!=null?this.Cj.Wf:null},c.prototype.LJ=function(a){if(0>=a)throw u.i.N();if(a!=this.Ec()){if((a=u.pf.geogtran(a))==null)throw u.i.N("Geogtran not found.");this.Cj=new A(a)}},c.prototype.Bz=function(){return this.Cj==null?null:this.Cj.Wf.toString()},c.prototype.tX=function(a){if(a==null)throw u.i.N();var r=null;try{r=u.pf.fromString(u.Sc.PE_TYPE_GEOGTRAN,a)}catch{throw u.i.N()}this.Cj=new A(r)},c.prototype.Nb=function(a){return a==this||!(!(a instanceof c)||(0>=this.Ec()||this.Ec()!=a.Ec())&&!this.qm().isEqual(a.qm()))&&this.Un==a.Un},c.prototype.toString=function(){var a="GeographicTransformation: "+this.Bz();return 200<a.length?a.substring(0,197)+"... ("+a.length.toString()+" characters)":a},c.create=function(a,r){var o=new c;return o.LJ(a),r&&o.Qz(),o},c.uP=function(a,r){var o=new c;return o.tX(a),r&&o.Qz(),o},c}();u.Dx=b}(V||(V={})),function(u){var A=function(){function c(){}return c.construct=function(a,r,o,l){var d=new c;return d.hw=a,d.iw=r,d.QY=o,d.RY=l,d},c.Ey=function(a,r){return a.hw==r.hw?a.iw==r.iw?0:a.iw<r.iw?-1:1:a.hw<r.hw?-1:1},c}(),b=function(){function c(){this.yT=[],this.zT=[],this.qp()}return c.kz=function(){return c.jK==null&&(c.jK=new c),c.jK},c.prototype.qp=function(){this.iD(this.yT),this.iD(this.zT)},c.prototype.iD=function(a){try{var r=[];r=r.sort(A.Ey);for(var o=0;o<r.length;o++)a.push(r[o])}catch{}},c}();u.CY=b}(V||(V={})),function(u){var A=function(){function b(){}return b.prototype.yD=function(c){this.Fk=c},b.prototype.WM=function(c){this.Fb=c},b.prototype.xD=function(c){this.zo=c},b.CE=function(c){return!(c.B()||c.getType()!=1607&&c.getType()!=1736)},b.AE=function(c){return!(c.B()||c.getType()!=1607&&c.getType()!=1736||20>c.I())},b.BE=function(c){return!(c.B()||c.getType()!=1607&&c.getType()!=1736||20>c.I())},b}();u.Uk=A}(V||(V={})),function(u){u.$b=function(){function A(){}return A.TT=function(b){var c=new u.Da;return c.sx(b.es(),b.gs()),c.yj(b.es(),b.fs()),c.yj(b.ds(),b.fs()),c.yj(b.ds(),b.gs()),c},A.zh=function(b,c){return b===null?null:u.Hx.local().V(b,c,null)},A.jY=function(b,c){var a=u.Gh.local();return b=new u.Zc(b),a.V(b,c,null).next()},A.im=function(b,c,a){return u.kp.local().V(b,c,a,null)},A.ep=function(b,c,a){return u.Kx.local().V(b,c,a,null)},A.VX=function(b,c,a){var r=u.Kx.local();for(b=new u.Zc(b),c=new u.Zc(c),a=r.V(b,c,a,null),r=[];(c=a.next())!=null;)r.push(c);return r},A.Nb=function(b,c,a){return u.dj.local().V(3,b,c,a,null)},A.TP=function(b,c,a){return u.dj.local().V(4,b,c,a,null)},A.RS=function(b,c,a){var r=u.Xj.local();for(b=new u.Zc(b),c=new u.Zc(c),a=r.V(b,c,a,null),r=[];(c=a.next())!=null;)r.push(c);return r},A.QP=function(b,c,a){var r=u.kp.local();for(b=new u.Zc(b),c=new u.Zc(c),a=r.V(b,c,a,null),r=[];(c=a.next())!=null;)r.push(c);return r},A.Ea=function(b,c,a){return u.Xj.local().V(b,c,a,null)},A.QS=function(b,c,a){if((b=u.Xj.local().V(b,c,a,null,1))===null)return[];if(b.getType()===550){for(c=[],a=0;a<b.wa;a++)c.push(b.KR(a));return c}return b.getType()===33?[b]:[]},A.qY=function(b,c,a){return u.dj.local().V(2,b,c,a,null)},A.contains=function(b,c,a){return u.dj.local().V(1,b,c,a,null)},A.BP=function(b,c,a){return u.dj.local().V(16,b,c,a,null)},A.touches=function(b,c,a){return u.dj.local().V(8,b,c,a,null)},A.DU=function(b,c,a){return u.dj.local().V(32,b,c,a,null)},A.TS=function(b,c,a){return u.dj.local().V(1073741824,b,c,a,null)},A.yB=function(b,c,a,r){return u.zL.local().V(b,c,a,r,null)},A.tb=function(b,c,a,r){var o=null;if(a!=null){if(o=a.Hd(),r!=null&&o.Ec()!=r.Ec()&&o.od!=r.od)throw u.i.Xk()}else if(r!=null)throw u.i.N();return b=u.rL.local().V(b,c,null),o!==null&&r!==null&&(b=u.Tc.Nh(b,o,r)),b},A.clip=function(b,c,a){return u.kL.local().V(b,u.l.construct(c.es(),c.gs(),c.ds(),c.fs()),a,null)},A.dl=function(b,c,a){if(b==null||c==null)return null;for(b=u.mL.local().V(!0,b,c,a,null),c=[];(a=b.next())!=null;)a.B()||c.push(a);return c.slice(0)},A.MN=function(b,c,a,r,o,l,d,p){if(o===!0)return A.NN(b,c,a,r,l,d,p);if(o=a,c!=null){if(d=c.Hd(),r!=null&&d.Ec()!=r.Ec()){if(d.od!=r.od)throw u.i.Xk();o=[],u.Tc.XE(a,a.length,r,d,o)}}else if(r!=null)throw u.i.N();if(a=u.AC.local(),l){for(b=new u.Zc(b),c=a.V(b,c,o,l,null),b=[];(l=c.next())!=null;)b.push(l);l=b.slice(0)}else for(l=[],r=0;r<b.length;r++)l[r]=a.V(b[r],c,o[r],null);return l},A.NN=function(b,c,a,r,o,l,d){if(c===null||(r==null&&(r=c.Ec()!==4326?c.Hd():u.Tc.Zg(9001)),r.od!==0))throw u.i.N();if(u.Tc.XE(a,a.length,r,u.Tc.Zg(9001),a),r=u.FC.local(),o){for(b=new u.Zc(b),c=r.V(b,c,l,a,d,!1,o,null),a=[];(l=c.next())!=null;)a.push(l);o=a.slice(0)}else{o=[];for(var p=0;p<b.length;p++)o[p]=r.V(b[p],c,l,a[p],d,!1,null)}return o},A.buffer=function(b,c,a,r,o,l,d){var p=a;if(o===!1){if(c!=null){if(o=c.Hd(),r!=null&&o.Ec()!=r.Ec()){if(o.od!=r.od)throw u.i.Xk();p=u.Tc.Nh(a,r,o)}}else if(r!=null)throw u.i.N();b=u.AC.local().V(b,c,p,null)}else{if(c===null||(r==null&&(r=c.Ec()!==4326?c.Hd():u.Tc.Zg(9001)),r.od!==0))throw u.i.N();p=u.Tc.Nh(a,r,u.Tc.Zg(9001)),b=u.FC.local().V(b,c,l,p,d,!1,null)}return b},A.BU=function(b,c,a,r,o,l,d){if(c!=null){var p=c.Hd();if(d!=null&&p.Ec()!=d.Ec()){if(p.od!=d.od)throw u.i.Xk();a=u.Tc.Nh(a,d,p)}}else if(d!=null)throw u.i.N();for(b=new u.Zc(b),c=u.IC.local().V(b,c,a,r,o,l,null),a=[];(r=c.next())!=null;)a.push(r);return a.slice(0)},A.offset=function(b,c,a,r,o,l,d){if(c!=null){var p=c.Hd();if(d!=null&&p.Ec()!=d.Ec()){if(p.od!=d.od)throw u.i.Xk();a=u.Tc.Nh(a,d,p)}}else if(d!=null)throw u.i.N();return u.IC.local().V(b,c,a,r,o,l,null)},A.iP=function(b){return u.CC.local().V(b,null)},A.jP=function(b,c){var a=u.CC.local();for(b=new u.Zc(b),c=a.V(b,c,null),a=[];(b=c.next())!=null;)a.push(b);return a},A.nz=function(b,c,a){return u.Ix.local().nz(b,c,a)},A.oz=function(b,c){return u.Ix.local().oz(b,c)},A.pz=function(b,c,a,r){return u.Ix.local().pz(b,c,a,r)},A.eC=function(b,c){return u.Yl.local().V(b,c,!1,null)},A.dT=function(b,c){return u.Yl.local().rs(b,c,null)},A.QQ=function(b,c,a,r,o){var l=u.EC.local();if(c!=null){if(c=c.Hd(),o!=null&&c.Ec()!=o.Ec()){if(c.od!=o.od)throw u.i.Xk();a=u.Tc.Nh(a,o,c)}}else if(o!=null)throw u.i.N();return l.V(b,a,r,null)},A.Qr=function(b,c,a,r){var o=u.Xl.local();if(c!=null){if(c=c.Hd(),r!=null&&c.Ec()!=r.Ec()){if(c.od!=r.od)throw u.i.Xk();a=u.Tc.Nh(a,r,c)}}else if(r!=null)throw u.i.N();return o.V(b,a,null)},A.Wy=function(b,c,a,r,o){o===void 0&&(o=0);var l=u.tL.local();if(o==4||o!==0)throw u.i.Ie();if(r!==null){if(r.od!==0)throw u.i.N("Unit must be a linear unit type");a=u.Tc.Nh(a,r,u.Tc.Zg(9001))}return l.V(b,a,c,o,null)},A.WQ=function(b,c,a,r){if(b===null)return 0;if(r==4||r!==0)throw u.i.Ie();if(b.getType()==197)b=A.TT(b);else if(b.getType()!=1736)return 0;if(r=u.cb.sc(c),b=u.cb.zh(b,c,r),b=u.UK.XQ([b])[0],a!==null){if(a.od!==2)throw u.i.N("Unit must be a area unit type");b=u.Tc.Nh(b,u.Tc.Zg(109404),a)}return b},A.ZQ=function(b,c,a,r){if(b=u.vL.local().V(b,c,r,null),a!==null){if(a.od!==0)throw u.i.N("Unit must be a linear unit type");b=u.Tc.Nh(b,u.Tc.Zg(9001),a)}return b},A.JU=function(b,c,a){if(b===null)return 0;var r=null;if(c!=null){if((r=c.Hd()).od==0&&(r=u.Tc.aG(r))==null&&a!==null)throw u.i.N();if(a!=null&&r.Ec()!=a.Ec()&&r.od!=a.od)throw u.i.Xk()}else if(a!=null)throw u.i.N();return b.getType()==1736||b.getType()==197?(b=b.Ke(),a!==null?u.Tc.Nh(b,r,a):b):0},A.KU=function(b,c,a){if(b===null||b.B()||1>b.Db())return 0;var r=null;if(c!=null){if(r=c.Hd(),a!=null&&r.Ec()!=a.Ec()&&r.od!=a.od)throw u.i.Xk()}else if(a!=null)throw u.i.N();b.getType()==1736||b.getType()==197?c=b.mg():u.aa.yd(b.getType())?(c=new u.Ta(b.description)).oc(b,!0):c=b,b=0,c=c.Ga();for(var o=new u.h,l=new u.h;c.$a();)for(;c.Ha();){var d=c.ha();d.Yp(o),d.Tr(l),b+=u.h.tb(o,l)}return r!==null&&a!==null&&(b=u.Tc.Nh(b,r,a)),b},A.fP=function(b){return b.points!==void 0?A.mS(b,b.hasZ!==void 0&&b.hasZ,b.hasM!==void 0&&b.hasM):b.rings!==void 0?A.lG(b.rings,b.hasZ!==void 0&&b.hasZ,b.hasM!==void 0&&b.hasM,"P"):b.paths!==void 0?A.lG(b.paths,b.hasZ!==void 0&&b.hasZ,b.hasM!==void 0&&b.hasM,"L"):b.x!==void 0?A.nS(b):b.xmin!==void 0?A.lS(b):null},A.nS=function(b){if(b.x==null||b.x=="NaN")return new u.Sa;var c=new u.Sa(b.x,b.y);return b.z!==void 0&&b.z!==null&&c.wX(b.z),b.m!==void 0&&b.m!==null&&c.hX(b.m),c},A.lS=function(b){if(b.xmin==null||b.xmin=="NaN")return new u.Fh;var c=new u.Fh(b.xmin,b.ymin,b.xmax,b.ymax);return b.zmin!==void 0&&b.zmin!==null&&c.setInterval(1,0,b.zmin,b.zmax),b.mmin!==void 0&&b.mmin!==null&&c.setInterval(2,0,b.mmin,b.mmax),c},A.mS=function(b,c,a){var r=0,o=new u.de,l=3*b.points.length;l%2!=0&&l++,2>l&&(l=2);var d=u.O.truncate(3*b.points.length/2);4>d?d=4:16>d&&(d=16),l=u.Yc.Dn(l,0);var p=u.Yc.Dn(d);d=u.Yc.Dn(d);for(var g=0;g<b.points.length;g++)l.write(2*g,b.points[g][0]),l.write(2*g+1,b.points[g][1]),p.write(g,c||a?b.points[g][2]:NaN),d.write(g,a&&c?b.points[g][3]:NaN),r++;return r!=0&&(o.resize(r),o.hn(0,l)),c&&(o.re(1),o.hn(1,p)),a&&(o.re(2),o.hn(2,c==0?p:d)),o.Pc(16777215),o},A.lG=function(b,c,a,r){var o=0,l=2;if(r=="P"){var d=new u.Da;o=1,l=3}else d=new u.Ta;for(var p=u.Yc.Oh(0),g=u.Yc.Mr(0),v=0,w=0,T=[],$=[],C=0;C<b.length;C++){var O=b[C].length;if(T[C]=!1,r==="P"&&b[C][0][0]===b[C][b[C].length-1][0]&&b[C][0][1]===b[C][b[C].length-1][1]){var N=a==0||b[C][0][3]===b[C][b[C].length-1][3]||b[C][0][3]===void 0&&b[C][b[C].length-1][3]===void 0;(c==0||b[C][0][2]===b[C][b[C].length-1][2]||b[C][0][2]===void 0&&b[C][b[C].length-1][2]===void 0)&&N&&(T[C]=!0,--O)}O>=l?($[C]=!1,w+=1,p.add(v),g.add(o),v+=O):$[C]=!0}for((r=3*v)%2!=0&&r++,2>r&&(r=2),4>(C=u.O.truncate(3*v/2))?C=4:16>C&&(C=16),r=u.Yc.Dn(r,0),o=u.Yc.Dn(C),l=u.Yc.Dn(C),C=O=0;C<b.length;C++)if($[C]===!1)for(N=0;N<b[C].length;N++){var R=!1;N===b[C].length-1&&T[C]===!0&&(R=!0),R||(r.write(2*O,b[C][N][0]),r.write(2*O+1,b[C][N][1]),o.write(O,c||a?b[C][N][2]:NaN),l.write(O,a&&c?b[C][N][3]:NaN),O++)}return v!=0&&(b=d,p.resize(w),g.resize(w),0<v&&(p.add(v),g.add(0)),b.hn(0,r),b.PJ(g),b.QJ(p)),c&&(d.re(1),d.hn(1,o)),a&&(d.re(2),d.hn(2,c==0?o:l)),d.Pc(16777215),d},A}()}(V||(V={})),function(u){u.Ex=function(){function A(){}return A.br=function(b){var c,a=0,r=b.length,o=b[0];for(c=0;c<r-1;c++){var l=b[c+1];a+=(l[0]-o[0])*(l[1]+o[1]),o=l}return 0<=a},A.rotate=function(b,c,a){c=c*Math.PI/180;var r=Math.cos(c),o=Math.sin(c);if(b.paths!==void 0){c={paths:[]};for(var l=0;l<b.paths.length;l++){for(var d=b.paths[l],p=[],g=0;g<d.length;g++){var v=d[g].slice(0);p.push(v);var w=r*(d[g][0]-a.x)-o*(d[g][1]-a.y)+a.x,T=o*(d[g][0]-a.x)+r*(d[g][1]-a.y)+a.y;v[0]=w,v[1]=T}c.paths.push(p),b.hasZ!==void 0&&(c.hasZ=b.hasZ),b.hasM!==void 0&&(c.hasM=b.hasM)}return c}if(b.rings!==void 0){for(c={rings:[]},l=0;l<b.rings.length;l++){d=b.rings[l],p=[];var $=A.br(d);for(g=0;g<d.length;g++)v=d[g].slice(0),p.push(v),w=r*(d[g][0]-a.x)-o*(d[g][1]-a.y)+a.x,T=o*(d[g][0]-a.x)+r*(d[g][1]-a.y)+a.y,v[0]=w,v[1]=T;A.br(p)!==$&&p.reverse(),c.rings.push(p),b.hasZ!==void 0&&(c.hasZ=b.hasZ),b.hasM!==void 0&&(c.hasM=b.hasM)}return c}if(b.x!==void 0)return c={x:r*(b.x-a.x)-o*(b.y-a.y)+a.x,y:o*(b.x-a.x)+r*(b.y-a.y)+a.y},b.z!==void 0&&(c.z=b.z),b.m!==void 0&&(c.m=b.m),b.hasZ!==void 0&&(c.hasZ=b.hasZ),b.hasM!==void 0&&(c.hasM=b.hasM),c;if(b.points!==void 0){for(c={points:[]},l=b.points,g=0;g<l.length;g++)(d=l[g].slice(0))[0]=r*(l[g][0]-a.x)-o*(l[g][1]-a.y)+a.x,d[1]=o*(l[g][0]-a.x)+r*(l[g][1]-a.y)+a.y,c.points.push(d);return b.hasZ!==void 0&&(c.hasZ=b.hasZ),b.hasM!==void 0&&(c.hasM=b.hasM),c}return null},A.JQ=function(b,c){if(b.paths!==void 0){for(var a={paths:[]},r=0;r<b.paths.length;r++){for(var o=b.paths[r],l=[],d=0;d<o.length;d++){var p=o[d].slice(0);l.push(p);var g=c.x-o[d][0];p[0]=o[d][0]+2*g}a.paths.push(l)}return b.hasZ!==void 0&&(a.hasZ=b.hasZ),b.hasM!==void 0&&(a.hasM=b.hasM),a}if(b.rings!==void 0){for(a={rings:[]},r=0;r<b.rings.length;r++){o=b.rings[r];var v=A.br(o);for(l=[],d=0;d<o.length;d++)p=o[d].slice(0),l.push(p),g=c.x-o[d][0],p[0]=o[d][0]+2*g;A.br(l)!==v&&l.reverse(),a.rings.push(l)}return b.hasZ!==void 0&&(a.hasZ=b.hasZ),b.hasM!==void 0&&(a.hasM=b.hasM),a}if(b.x!==void 0)return g=c.x-b.x,a={x:b.x+2*g,y:b.y},b.z!==void 0&&(a.z=b.z),b.m!==void 0&&(a.m=b.m),b.hasZ!==void 0&&(a.hasZ=b.hasZ),b.hasM!==void 0&&(a.hasM=b.hasM),a;if(b.points!==void 0){for(a={points:[]},r=b.points,d=0;d<r.length;d++)o=r[d].slice(0),g=c.x-o[0],o[0]+=2*g,a.points.push(o);return b.hasZ!==void 0&&(a.hasZ=b.hasZ),b.hasM!==void 0&&(a.hasM=b.hasM),a}return b.xmin!==void 0?(a={v:b.xmin,G:b.ymin,C:b.xmax,H:b.ymax},b.zmin!==void 0&&(a.zmin=b.zmin,a.zmax=b.zmax),b.mmin!==void 0&&(a.mmin=b.mmin,a.mmax=b.mmax),g=c.x-b.xmin,a.xmax=b.xmin+2*g,g=c.x-b.xmax,a.xmin=b.xmax+2*g,b.zmin!==void 0&&(a.zmin=b.zmin),b.zmax!==void 0&&(a.zmax=b.zmax),b.mmin!==void 0&&(a.mmin=b.mmin),b.mmax!==void 0&&(a.mmax=b.mmax),b.hasZ!==void 0&&(a.hasZ=b.hasZ),b.hasM!==void 0&&(a.hasM=b.hasM),a):null},A.KQ=function(b,c){if(b.paths!==void 0){for(var a={paths:[]},r=0;r<b.paths.length;r++){for(var o=b.paths[r],l=[],d=0;d<o.length;d++){var p=o[d].slice(0);l.push(p);var g=c.y-o[d][1];p[1]=o[d][1]+2*g}a.paths.push(l)}return b.hasZ!==void 0&&(a.hasZ=b.hasZ),b.hasM!==void 0&&(a.hasM=b.hasM),a}if(b.rings!==void 0){for(a={rings:[]},r=0;r<b.rings.length;r++){o=b.rings[r];var v=A.br(o);for(l=[],d=0;d<o.length;d++)p=o[d].slice(0),l.push(p),g=c.y-o[d][1],p[1]=o[d][1]+2*g;A.br(l)!==v&&l.reverse(),a.rings.push(l)}return b.hasZ!==void 0&&(a.hasZ=b.hasZ),b.hasM!==void 0&&(a.hasM=b.hasM),a}if(b.x!==void 0)return g=c.y-b.y,a={y:b.y+2*g,x:b.x},b.z!==void 0&&(a.z=b.z),b.m!==void 0&&(a.m=b.m),b.hasZ!==void 0&&(a.hasZ=b.hasZ),b.hasM!==void 0&&(a.hasM=b.hasM),a;if(b.points!==void 0){for(a={points:[]},r=b.points,d=0;d<r.length;d++)o=r[d].slice(0),g=c.y-o[1],o[1]+=2*g,a.points.push(o);return b.hasZ!==void 0&&(a.hasZ=b.hasZ),b.hasM!==void 0&&(a.hasM=b.hasM),a}return b.xmin!==void 0?(a={v:b.xmin,G:b.ymin,C:b.xmax,H:b.ymax},b.zmin!==void 0&&(a.zmin=b.zmin,a.zmax=b.zmax),b.mmin!==void 0&&(a.mmin=b.mmin,a.mmax=b.mmax),g=c.y-b.ymin,a.ymax=b.ymin+2*g,g=c.y-b.ymax,a.ymin=b.ymax+2*g,b.zmin!==void 0&&(a.zmin=b.zmin),b.zmax!==void 0&&(a.zmax=b.zmax),b.mmin!==void 0&&(a.mmin=b.mmin),b.mmax!==void 0&&(a.mmax=b.mmax),b.hasZ!==void 0&&(a.hasZ=b.hasZ),b.hasM!==void 0&&(a.hasM=b.hasM),a):null},A}()}(V||(V={})),function(u){u.ZK=function(){function A(){}return A.Ig=function(b,c){switch(c==null&&(c=u.ee.og()),b){case 33:return new u.Sa(c);case 322:return new u.yb(c);case 197:return new u.Fh(c);case 550:return new u.de(c);case 1607:return new u.Ta(c);case 1736:return new u.Da(c);default:throw u.i.fa("invalid argument.")}},A}()}(V||(V={})),function(u){var A=function(){function b(c,a){this.Te=u.ia.qf(c,-1),this.ua=new u.au,this.wl=a}return b.prototype.AW=function(c){this.ua.At(Math.min(this.Te.size,c)),this.ua.fn(c)},b.prototype.addElement=function(c,a){if(a===void 0)return this.eN(c);a=u.O.truncate(a%this.Te.size);var r=this.Te.get(a);return r==-1&&(r=this.ua.Ph(),this.Te.set(a,r)),this.ua.addElement(r,c)},b.prototype.eN=function(c){var a=this.wl.jz(c);a=u.O.truncate(a%this.Te.size);var r=this.Te.get(a);return r==-1&&(r=this.ua.Ph(),this.Te.set(a,r)),this.ua.addElement(r,c)},b.prototype.jd=function(c,a){if(a===void 0)this.KP(c);else{a=u.O.truncate(a%this.Te.size);var r=this.Te.get(a);if(r==-1)throw u.i.N();for(var o=this.ua.rc(r),l=-1;o!=-1;){var d=this.ua.lb(o);this.ua.ja(o)==c?(this.ua.jd(r,l,o),this.ua.rc(r)==-1&&(this.ua.bh(r),this.Te.set(a,-1))):l=o,o=d}}},b.prototype.KP=function(c){var a=this.wl.jz(c);a=u.O.truncate(a%this.Te.size);var r=this.Te.get(a);if(r==-1)throw u.i.N();for(var o=this.ua.rc(r),l=-1;o!=-1;){var d=this.ua.lb(o);this.ua.ja(o)==c?(this.ua.jd(r,l,o),this.ua.rc(r)==-1&&(this.ua.bh(r),this.Te.set(a,-1))):l=o,o=d}},b.prototype.rR=function(c){return c=u.O.truncate(c%this.Te.size),(c=this.Te.get(c))==-1?-1:this.ua.rc(c)},b.prototype.ER=function(c){return this.ua.lb(c)},b.prototype.vd=function(c){var a=this.wl.jz(this.ja(c));a=u.O.truncate(a%this.Te.size);var r=this.Te.get(a);if(r==-1)throw u.i.N();for(var o=this.ua.rc(r),l=-1;o!=-1;){if(o==c)return this.ua.jd(r,l,o),void(this.ua.rc(r)==-1&&(this.ua.bh(r),this.Te.set(a,-1)));l=o,o=this.ua.lb(o)}throw u.i.N()},b.prototype.ja=function(c){return this.ua.ja(c)},b.prototype.clear=function(){this.Te=u.ia.qf(this.Te.size,-1),this.ua.clear()},b.prototype.size=function(){return this.ua.TF()},b}();u.dL=A}(V||(V={})),function(u){var A=function(){function b(){this.Li=new u.$c(3),this.ua=new u.$c(6),this.sT=!1,this.je=-1}return b.prototype.fl=function(c){this.Li.jd(c)},b.prototype.Pw=function(){return this.Li.Ce()},b.prototype.bv=function(c){this.ua.jd(c)},b.prototype.$A=function(){return this.ua.Ce()},b.prototype.WB=function(c,a){this.Li.S(c,1,a)},b.prototype.ex=function(c,a){this.Li.S(c,2,a)},b.prototype.gX=function(c,a){this.Li.S(c,3,a)},b.prototype.UB=function(c,a){this.ua.S(c,4,a)},b.prototype.jX=function(c,a){this.ua.S(c,3,a)},b.prototype.TJ=function(c,a){this.ua.S(c,2,a)},b.prototype.Ph=function(c){var a=this.$A();return this.ua.S(a,3,this.je),this.ua.S(a,4,0),this.ua.S(a,5,c),this.je!=-1&&this.TJ(this.je,a),this.je=a},b.prototype.bh=function(c){this.LE(c);var a=this.ua.T(c,2),r=this.ua.T(c,3);return a!=-1?this.jX(a,r):this.je=r,r!=-1&&this.TJ(r,a),this.bv(c),r},b.prototype.At=function(c){this.ua.De(c)},b.prototype.PF=function(c){return this.ua.T(c,5)},b.prototype.fX=function(c,a){this.ua.S(c,5,a)},b.prototype.addElement=function(c,a){return this.tS(c,a)},b.prototype.tS=function(c,a){var r=this.Pw();this.ex(r,-1),this.ua.T(c,0)==-1&&this.ua.S(c,0,r);var o=this.ua.T(c,1);return this.WB(r,o),o!=-1&&this.ex(o,r),this.ua.S(c,1,r),this.setData(r,a),this.UB(c,this.bs(c)+1),this.sT&&this.gX(r,c),r},b.prototype.jd=function(c,a){var r=this.we(a),o=this.lb(a);return r!=-1?this.ex(r,o):this.ua.S(c,0,o),o!=-1?this.WB(o,r):this.ua.S(c,1,r),this.fl(a),this.UB(c,this.bs(c)-1),o},b.prototype.fn=function(c){this.Li.De(c)},b.prototype.getData=function(c){return this.Li.T(c,0)},b.prototype.setData=function(c,a){this.Li.S(c,0,a)},b.prototype.lb=function(c){return this.Li.T(c,2)},b.prototype.we=function(c){return this.Li.T(c,1)},b.prototype.rc=function(c){return this.ua.T(c,0)},b.prototype.Fc=function(c){return this.ua.T(c,1)},b.prototype.clear=function(){for(var c=this.je;c!=-1;)c=this.bh(c)},b.prototype.LE=function(c){for(var a=this.Fc(c);a!=-1;){var r=a;a=this.we(r),this.fl(r)}this.ua.S(c,0,-1),this.ua.S(c,1,-1),this.UB(c,0)},b.prototype.B=function(){return this.Li.size==0},b.prototype.TF=function(){return this.Li.size},b.prototype.bs=function(c){return this.ua.T(c,4)},b.prototype.qz=function(c){return this.ua.T(c,3)},b}();u.jp=A}(V||(V={})),function(u){var A=function(){function b(c){c===void 0?(this.ug=new u.$c(2),this.ua=new u.$c(4),this.je=-1,this.Qv=!0):(this.ug=new u.$c(2),this.ua=new u.$c(c?4:2),this.je=-1,this.Qv=c)}return b.prototype.fl=function(c){this.ug.jd(c)},b.prototype.Pw=function(){return this.ug.Ce()},b.prototype.bv=function(c){this.ua.jd(c)},b.prototype.$A=function(){return this.ua.Ce()},b.prototype.Ph=function(){var c=this.$A();return this.Qv&&(this.ua.S(c,3,this.je),this.je!=-1&&this.ua.S(this.je,2,c),this.je=c),c},b.prototype.bh=function(c){for(var a=this.rc(c);a!=-1;){var r=a;a=this.lb(a),this.fl(r)}this.Qv&&(a=this.ua.T(c,2),r=this.ua.T(c,3),a!=-1?this.ua.S(a,3,r):this.je=r,r!=-1&&this.ua.S(r,2,a)),this.bv(c)},b.prototype.At=function(c){this.ua.De(c)},b.prototype.addElement=function(c,a){var r=this.ua.T(c,1),o=this.Pw();return r!=-1?this.ug.S(r,1,o):this.ua.S(c,0,o),this.ua.S(c,1,o),this.ug.S(o,0,a),o},b.prototype.fn=function(c){this.ug.De(c)},b.prototype.jd=function(c,a,r){a!=-1?(this.ug.S(a,1,this.ug.T(r,1)),this.ua.T(c,1)==r&&this.ua.S(c,1,a)):(this.ua.S(c,0,this.ug.T(r,1)),this.ua.T(c,1)==r&&this.ua.S(c,1,-1)),this.fl(r)},b.prototype.Hy=function(c,a){var r=this.ua.T(c,1),o=this.ua.T(a,0);o!=-1&&(r!=-1?this.ug.S(r,1,o):this.ua.S(c,0,o),this.ua.S(c,1,this.ua.T(a,1))),this.Qv&&(c=this.ua.T(a,2),r=this.ua.T(a,3),c!=-1?this.ua.S(c,3,r):this.je=r,r!=-1&&this.ua.S(r,2,c)),this.bv(a)},b.prototype.ja=function(c){return this.ug.T(c,0)},b.prototype.Sj=function(c,a){this.ug.S(c,0,a)},b.prototype.lb=function(c){return this.ug.T(c,1)},b.prototype.rc=function(c){return this.ua.T(c,0)},b.prototype.Jn=function(c){return this.ja(this.rc(c))},b.prototype.clear=function(){this.ug.mj(!0),this.ua.mj(!0),this.je=-1},b.prototype.B=function(){return this.ug.size==0},b.prototype.TF=function(){return this.ug.size},b.prototype.qz=function(c){return this.ua.T(c,3)},b}();u.au=A}(V||(V={})),function(u){u.ta=function(){function A(){}return A.Wd=function(b,c,a){return c=c.xr(),b=b!=null&&b.Xd!==void 0?b.Xd(0):0,a&&(c*=4,b*=1.1),Math.max(b,c)},A.Er=function(b){return 2*Math.sqrt(2)*b},A.rN=function(b){return Math.sqrt(2)*b},A.kj=function(b,c,a){var r=new u.l;return c.A(r),A.Wd(b,r,a)},A.wE=function(b,c,a){return c=c.Tg(1,0).xr(),b=b!=null?b.Xd(1):0,a&&(c*=4,b*=1.1),Math.max(b,c)},A.mv=function(b,c){var a=new u.l;return b.xc(a),b=new u.l,c.xc(b),a.Zb(b),a},A.YN=function(b){var c=new u.l;if(b.xc(c),c.B())return null;var a=new u.du(c,8),r=-1,o=new u.l,l=!1;do for(var d=0,p=b.da();d<p;d++){if(b.Rj(d,o),(r=a.Jz(d,o,r))==-1){if(l)throw u.i.fa("internal error");b.yp(c,!1),l=!0,a.reset(c,8);break}l=!1}while(l);return a},A.nE=function(b){var c=new u.l;b.xc(c);for(var a=new u.du(c,8),r=-1,o=b.Ga(),l=new u.l,d=!1;o.$a();)for(;o.Ha();){var p=o.ha(),g=o.wb();if(p.A(l),(r=a.Jz(g,l,r))==-1){if(d)throw u.i.Qa();b.yp(c,!1),d=!0,a.reset(c,8),o.Zi();break}}return a},A.jj=function(b,c){var a=new u.l;b.xc(a);for(var r=new u.du(a,8),o=-1,l=new u.l,d=b.Ga(),p=!1;d.$a();)for(;d.Ha();){var g=d.ha(),v=d.wb();if(g.A(l),l.isIntersecting(c)&&(o=r.Jz(v,l,o))==-1){if(p)throw u.i.fa("internal error.");b.yp(a,!1),p=!0,r.reset(a,8),d.Zi();break}}return r},A.oE=function(b,c){for(var a=new u.du(c,8),r=new u.h,o=!1,l=new u.l,d=0;d<b.I();d++)if(b.D(d,r),c.contains(r)&&(l.K(r),a.vj(d,l)==-1)){if(o)throw u.i.Qa();o=!0,d=new u.l,b.yp(d,!1),a.reset(d,8),d=-1}return a},A.lR=function(b,c,a){var r=new u.l,o=new u.l;b.xc(r),c.xc(o),r.W(a,a),o.W(a,a);var l=new u.l;l.K(r),l.Ea(o),b=b.Ga(),c=c.Ga();var d=new u.xC;d.aC(a);var p=!1;for(d.pK();b.$a();)for(;b.Ha();)b.ha().A(r),r.isIntersecting(l)&&(p=!0,(a=new u.l).K(r),d.JD(b.wb(),a));if(d.iF(),!p)return null;for(r=!1,d.oK();c.$a();)for(;c.Ha();)c.ha().A(o),o.isIntersecting(l)&&(r=!0,(a=new u.l).K(o),d.ED(c.wb(),a));return d.hF(),r?d:null},A.mR=function(b,c,a,r,o){var l=b.getType(),d=c.getType(),p=new u.l,g=new u.l;b.xc(p),c.xc(g),p.W(a,a),g.W(a,a);var v=new u.l;v.K(p),v.Ea(g);var w=new u.xC;w.aC(a);var T=!1;w.pK();var $=0;for(a=b.da();$<a;$++)r&&l==1736&&!b.Ev($)||(b.Rj($,p),p.isIntersecting(v)&&(T=!0,w.JD($,p)));if(w.iF(),!T)return null;for(b=!1,w.oK(),r=0,a=c.da();r<a;r++)o&&d==1736&&!c.Ev(r)||(c.Rj(r,g),g.isIntersecting(v)&&(b=!0,w.ED(r,g)));return w.hF(),b?w:null},A.Ru=function(b,c,a){if(b!=c)for(var r=0;r<a;r++)b[r]==null?b[r]=u.h.al(c[r]):b[r].L(c[r])},A.Jy=function(b,c,a,r){var o=0;for(r+=0;o<r;a++,o++)b[o]==null&&(b[o]=[0,0]),b[o][0]=c[a].x,b[o][1]=c[a].y},A.Iy=function(b,c,a,r){var o=c,l=0;for(c=r+c;o<c;l++,o++)b[o]==null?b[o]=u.h.construct(a[l][0],a[l][1]):b[o].ma(a[l][0],a[l][1])},A.kP=function(b,c,a){if(b!=c)for(var r=0;r<a;r++)b[r]==null?b[r]=new u.Sa(c[r]):c[r].copyTo(b[r])},A.vE=function(b,c,a,r){var o=0;return b!=null&&(o=b.Xd(0),r&&!a||b==null||(o+=1.01*b.vz(0))),a&&(c*=4,o*=1.01),Math.max(o,c)},A.ty=function(b,c,a){return A.vE(b,c.xr(),a,!1)},A.gO=function(b,c){var a=new u.l;return c.A(a),A.ty(b,a,!0)},A.uy=function(b,c){return A.vE(b,c.xr(),!1,!0)},A.Hu=function(b,c){var a=new u.l;return c.A(a),A.uy(b,a)},A.AG=function(b,c,a,r){r*=r;var o=new u.h;if(o.uc(b,c),(b=new u.h).uc(a,c),c=o.Sk(),a=b.Sk(),c<=r&&a<=r)return!0;var l=u.lc.ox(o.wi(b));return(l<=r*c||l<=r*a)&&0<=o.Qh(b)},A.dK=function(b,c,a,r){for(var o=0;o<c;o++){var l=b[o].y,d=u.O.Rk(l,a,r);d!=l&&(b[o].y=d)}},A}()}(V||(V={})),function(u){var A,b,c=function(){function l(d){this.Ya=d}return l.prototype.compare=function(d,p,g){d=d.ja(g),g=this.Ya.nk(p);var v=this.Ya.nk(d);return g<v?-1:g==v?o.gq(p)&&o.Gv(d)?-1:o.gq(d)&&o.Gv(p)?1:0:1},l}(),a=function(){function l(d){this.Ya=d}return l.prototype.nr=function(d,p,g){this.Ya.GX(g,d,p)},l.prototype.$p=function(d){return this.Ya.nk(d)},l}();(b=A||(A={}))[b.initialize=0]="initialize",b[b.pIn=1]="pIn",b[b.pL=2]="pL",b[b.pR=3]="pR",b[b.pT=4]="pT",b[b.right=5]="right",b[b.left=6]="left",b[b.all=7]="all";var r=function(){function l(){this.Ya=null,this.Qi=new u.Nc,this.hi=new u.ia(0),this.sg=[0,0]}return l.prototype.Xi=function(d,p){this.Qi.oa=d.oa-p,this.Qi.va=d.va+p,this.hi.resize(0),this.he=0,this.sg[0]=0},l.prototype.EB=function(d,p,g){if(d>p)throw u.i.N();this.Qi.oa=d-g,this.Qi.va=p+g,this.hi.resize(0),this.he=0,this.sg[0]=0},l.prototype.Uo=function(d,p){this.Qi.oa=d-p,this.Qi.va=d+p,this.hi.resize(0),this.he=0,this.sg[0]=0},l.prototype.next=function(){if(!this.Ya.lq)throw u.i.Hb();if(0>this.he)return-1;for(var d=!0;d;)switch(this.sg[this.he]){case 1:d=this.FU();break;case 2:d=this.GU();break;case 3:d=this.HU();break;case 4:d=this.IU();break;case 5:d=this.GW();break;case 6:d=this.kT();break;case 7:d=this.tN();break;case 0:d=this.Gz();break;default:throw u.i.Qa()}return this.Og!=-1?this.Mp()>>1:-1},l.construct=function(d){var p=new l;return p.Ya=d,p.hi.Jb(20),p.he=-1,p},l.prototype.Gz=function(){return this.Og=this.vH=this.Mi=this.Lc=-1,this.Ya.me!=null&&0<this.Ya.me.size?(this.sg[0]=1,this.Mi=this.Ya.kf,!0):(this.he=-1,!1)},l.prototype.FU=function(){if(this.Lc=this.Mi,this.Lc==-1)return this.Og=this.he=-1,!1;var d=this.Ya.Np(this.Lc);return this.Qi.va<d?(d=this.Ya.mk(this.Lc),this.Mi=this.Ya.qj(this.Lc),d!=-1&&(this.ei=this.Ya.kl(d),this.sg[++this.he]=6),!0):d<this.Qi.oa?(d=this.Ya.mk(this.Lc),this.Mi=this.Ya.lk(this.Lc),d!=-1&&(this.ei=this.Ya.Zr(d),this.sg[++this.he]=5),!0):(this.sg[this.he]=2,this.vH=this.Lc,d=this.Ya.mk(this.Lc),this.Mi=this.Ya.qj(this.Lc),d!=-1&&(this.ei=this.Ya.kl(d),this.sg[++this.he]=7),!0)},l.prototype.GU=function(){if(this.Lc=this.Mi,this.Lc==-1)return this.sg[this.he]=3,this.Mi=this.Ya.lk(this.vH),!0;if(this.Ya.Np(this.Lc)<this.Qi.oa){var d=this.Ya.mk(this.Lc);return this.Mi=this.Ya.lk(this.Lc),d!=-1&&(this.ei=this.Ya.Zr(d),this.sg[++this.he]=5),!0}return d=this.Ya.mk(this.Lc),this.Mi=this.Ya.qj(this.Lc),d!=-1&&(this.ei=this.Ya.kl(d),this.sg[++this.he]=7),(d=this.Ya.lk(this.Lc))!=-1&&this.hi.add(d),!0},l.prototype.HU=function(){if(this.Lc=this.Mi,this.Lc==-1)return this.sg[this.he]=4,!0;if(this.Qi.va<this.Ya.Np(this.Lc)){var d=this.Ya.mk(this.Lc);return this.Mi=this.Ya.qj(this.Lc),d!=-1&&(this.ei=this.Ya.kl(d),this.sg[++this.he]=6),!0}return d=this.Ya.mk(this.Lc),this.Mi=this.Ya.lk(this.Lc),d!=-1&&(this.ei=this.Ya.kl(d),this.sg[++this.he]=7),(d=this.Ya.qj(this.Lc))!=-1&&this.hi.add(d),!0},l.prototype.IU=function(){if(this.hi.size==0)return this.Og=this.he=-1,!1;this.Lc=this.hi.get(this.hi.size-1),this.hi.resize(this.hi.size-1);var d=this.Ya.mk(this.Lc);return d!=-1&&(this.ei=this.Ya.kl(d),this.sg[++this.he]=7),this.Ya.qj(this.Lc)!=-1&&this.hi.add(this.Ya.qj(this.Lc)),this.Ya.lk(this.Lc)!=-1&&this.hi.add(this.Ya.lk(this.Lc)),!0},l.prototype.kT=function(){return this.Og=this.ei,this.Og!=-1&&o.gq(this.Mp())&&this.Ya.nk(this.Mp())<=this.Qi.va?(this.ei=this.SF(),!1):(this.he--,!0)},l.prototype.GW=function(){return this.Og=this.ei,this.Og!=-1&&o.Gv(this.Mp())&&this.Ya.nk(this.Mp())>=this.Qi.oa?(this.ei=this.QR(),!1):(this.he--,!0)},l.prototype.tN=function(){return this.Og=this.ei,this.Og!=-1&&o.gq(this.Mp())?(this.ei=this.SF(),!1):(this.he--,!0)},l.prototype.SF=function(){return this.Ya.Sf?this.Ya.$f.lb(this.Og):this.Ya.Ti.lb(this.Og)},l.prototype.QR=function(){return this.Ya.Sf?this.Ya.$f.we(this.Og):this.Ya.Ti.we(this.Og)},l.prototype.Mp=function(){return this.Ya.Sf?this.Ya.$f.ja(this.Og):this.Ya.Ti.getData(this.Og)},l}();u.EY=r;var o=function(){function l(d){this.Am=this.$h=this.$f=this.Ti=this.Km=this.Ej=this.me=this.Fj=null,this.Sf=d,this.lq=this.Sv=!1}return l.prototype.kr=function(){this.Nk(!0)},l.prototype.Br=function(d,p){if(!this.Sv)throw u.i.Hb();this.Fj.push(new u.Nc(d,p))},l.prototype.Fp=function(){if(!this.Sv)throw u.i.fa("invalid call");this.Sv=!1,this.lq=!0,this.Sf||(this.vS(),this.Zv=this.Fj.length)},l.prototype.vj=function(d){if(!this.Sf||!this.lq)throw u.i.N("invalid call");if(this.kf==-1){var p=this.Fj.length;if(this.iA){var g=new u.ia(0);g.Jb(2*p),this.bJ(g),this.$h.Jb(2*p),this.$h.resize(0),this.aJ(g),this.Km.resize(p,-1),this.Km.Wj(-1,0,p),this.iA=!1}else this.Km.Wj(-1,0,p);this.kf=this.Tu()}p=this.pG(d<<1,this.kf),g=this.$f.addElement(1+(d<<1),this.xz(p)),this.VJ(p,g),this.Km.set(d,p),this.Zv++},l.prototype.remove=function(d){if(!this.Sf||!this.lq)throw u.i.fa("invalid call");var p=this.Km.get(d);if(p==-1)throw u.i.N("the interval does not exist in the interval tree");this.Km.set(d,-1),this.Zv--;var g=this.xz(p),v=this.$f.ZR(g);this.$f.vd(this.wR(p),g),this.$f.vd(this.TR(p),g),(d=this.$f.size(g))==0&&(this.$f.MP(g),this.ZJ(v,-1)),this.Ej.jd(p),g=this.UF(v);var w=this.qj(v),T=this.lk(v);for(p=0;!(0<d||v==this.kf||w!=-1&&T!=-1);)v==this.qj(g)?w!=-1?(this.Ok(g,w),this.Uj(w,g),this.Ok(v,-1)):T!=-1?(this.Ok(g,T),this.Uj(T,g),this.Qk(v,-1)):this.Ok(g,-1):w!=-1?(this.Qk(g,w),this.Uj(w,g),this.Ok(v,-1)):T!=-1?(this.Qk(g,T),this.Uj(T,g),this.Qk(v,-1)):this.Qk(g,-1),this.Uj(v,-1),p++,v=g,d=(g=this.mk(v))!=-1?this.$f.size(g):0,w=this.qj(v),T=this.lk(v),g=this.UF(v)},l.prototype.reset=function(){if(!this.Sf||!this.lq)throw u.i.N("invalid call");this.Nk(!1)},l.prototype.size=function(){return this.Zv},l.prototype.getIterator=function(){return r.construct(this)},l.prototype.bJ=function(d){for(var p=this.Fj.length,g=0;g<2*p;g++)d.add(g);this.HX(d,2*p)},l.prototype.aJ=function(d){for(var p=NaN,g=0;g<d.size;g++){var v=d.get(g),w=this.nk(v);w!=p&&(this.$h.add(v),p=w)}},l.prototype.vS=function(){var d=this.Fj.length,p=new u.ia(0);p.Jb(2*d),this.bJ(p),this.$h.Jb(2*d),this.$h.resize(0),this.aJ(p),this.Ej.De(d),this.Ti.fn(2*d);var g=u.Yc.Oh(d);for(g.Wj(-1,0,d),this.kf=this.Tu(),d=0;d<p.size;d++){var v=p.get(d),w=g.get(v>>1);w!=-1?this.VJ(w,this.Ti.addElement(this.xz(w),v)):(w=this.pG(v,this.kf),g.set(v>>1,w))}},l.prototype.pG=function(d,p){var g=p,v=p,w=-1,T=0,$=this.$h.size-1,C=0,O=d>>1,N=NaN,R=NaN,F=!0,G=this.DR(O);for(O=this.AR(O);F;){T<$?(C=T+u.O.truncate(($-T)/2),this.gz(g)==-1&&this.FJ(g,this.$h.get(C),this.$h.get(C+1))):this.gz(g)==-1&&this.FJ(g,this.$h.get(T),this.$h.get(T));var z=this.Np(g);if(O<z)p!=-1&&(p==g?(v=g,N=z,R=(p=this.qj(g))!=-1?this.Np(p):NaN):R>z&&(z<N?this.Ok(v,g):this.Qk(v,g),this.Qk(g,p),this.Sf&&(this.Uj(g,v),this.Uj(p,g)),v=g,N=z,p=-1,R=NaN)),($=this.xR(g))==-1&&($=this.Tu(),this.dX(g,$)),g=$,$=C;else if(G>z)p!=-1&&(p==g?(v=g,N=z,R=(p=this.lk(g))!=-1?this.Np(p):NaN):R<z&&(z<N?this.Ok(v,g):this.Qk(v,g),this.Ok(g,p),this.Sf&&(this.Uj(g,v),this.Uj(p,g)),v=g,N=z,p=-1,R=NaN)),(T=this.UR(g))==-1&&(T=this.Tu(),this.oX(g,T)),g=T,T=C+1;else{(F=this.mk(g))==-1&&(F=this.zP(g),this.ZJ(g,F));var B=this.fN(F,d);w=this.xP(),this.qX(w,F),this.cX(w,B),g!=p&&(z<N?this.Ok(v,g):this.Qk(v,g),this.Sf&&this.Uj(g,v),p!=-1&&(R<z?this.Ok(g,p):this.Qk(g,p),this.Sf&&this.Uj(p,g))),F=!1}}return w},l.prototype.Tu=function(){return this.me.Ce()},l.prototype.zP=function(d){return this.Sf?this.$f.Pr(d):this.Ti.Ph(d)},l.prototype.xP=function(){return this.Ej.Ce()},l.prototype.Nk=function(d){d?(this.Sv=this.iA=!0,this.lq=!1,this.$h==null?this.$h=u.Yc.Oh(0):this.$h.resize(0),this.Fj==null?this.Fj=[]:this.Fj.length=0):this.iA=!1,this.Sf?this.Km==null?(this.Km=u.Yc.Oh(0),this.$f=new u.Yj,this.$f.Vo(new c(this))):this.$f.clear():this.Ti==null?this.Ti=new u.jp:this.Ti.clear(),this.me==null?(this.Ej=new u.$c(3),this.me=new u.$c(this.Sf?8:7)):(this.Ej.mj(!1),this.me.mj(!1)),this.kf=-1,this.Zv=0},l.prototype.FJ=function(d,p,g){this.XW(d,p),this.YW(d,g)},l.prototype.Np=function(d){var p=this.gz(d);return p==-1?NaN:(p=this.nk(p))==(d=this.nk(this.gR(d)))?p:.5*(p+d)},l.prototype.XW=function(d,p){this.me.S(d,0,p)},l.prototype.YW=function(d,p){this.me.S(d,1,p)},l.prototype.dX=function(d,p){this.me.S(d,3,p)},l.prototype.oX=function(d,p){this.me.S(d,4,p)},l.prototype.ZJ=function(d,p){this.me.S(d,2,p)},l.prototype.Ok=function(d,p){this.me.S(d,5,p)},l.prototype.Qk=function(d,p){this.me.S(d,6,p)},l.prototype.Uj=function(d,p){this.me.S(d,7,p)},l.prototype.qX=function(d,p){this.Ej.S(d,0,p)},l.prototype.fN=function(d,p){return this.Sf?this.$f.addElement(p,d):this.Ti.addElement(d,p)},l.prototype.cX=function(d,p){this.Ej.S(d,1,p)},l.prototype.VJ=function(d,p){this.Ej.S(d,2,p)},l.prototype.kl=function(d){return this.Sf?this.$f.rc(d):this.Ti.rc(d)},l.prototype.Zr=function(d){return this.Sf?this.$f.Fc(d):this.Ti.Fc(d)},l.gq=function(d){return!(1&d)},l.Gv=function(d){return!(1&~d)},l.prototype.gz=function(d){return this.me.T(d,0)},l.prototype.gR=function(d){return this.me.T(d,1)},l.prototype.mk=function(d){return this.me.T(d,2)},l.prototype.xR=function(d){return this.me.T(d,3)},l.prototype.UR=function(d){return this.me.T(d,4)},l.prototype.qj=function(d){return this.me.T(d,5)},l.prototype.lk=function(d){return this.me.T(d,6)},l.prototype.UF=function(d){return this.me.T(d,7)},l.prototype.xz=function(d){return this.Ej.T(d,0)},l.prototype.wR=function(d){return this.Ej.T(d,1)},l.prototype.TR=function(d){return this.Ej.T(d,2)},l.prototype.DR=function(d){return this.Fj[d].oa},l.prototype.AR=function(d){return this.Fj[d].va},l.prototype.HX=function(d,p){this.Am==null&&(this.Am=new u.Xt);var g=new a(this);this.Am.sort(d,0,p,g)},l.prototype.GX=function(d,p,g){var v=this;d.Vd(p,g,function(w,T){var $=v.nk(w),C=v.nk(T);return $<C||$==C&&l.gq(w)&&l.Gv(T)?-1:1})},l.prototype.nk=function(d){var p=this.Fj[d>>1];return l.gq(d)?p.oa:p.va},l}();u.sr=o}(V||(V={})),function(u){var A=function(){function b(c){if(c==null)throw u.i.fa("Invalid arguement");this.hf=c;var a=c.nR();a.hS()?c.ef.IG()?this.lo=u.si.PannableFold:this.lo=u.si.Clip:this.lo=u.si.DontClip,a.iS()?c.Yf.IG()?this.Qm=u.si.PannableFold:this.Qm=u.si.Clip:this.Qm=u.si.DontClip,this.Bm=a.Jr,this.mH=a.Vu,c=this.hf.sH,this.aH=c.hs(2147483648),this.Uv=c.hs(1073741824)}return b.zh=function(c,a,r){return a.ww.zh(c,r)},b.Rt=function(c,a,r,o){return c.ww.Rt(a,r,o)},b.Qt=function(c,a,r,o){if(r=0>r?a.length:r,(c=c.ww.Rt(a,r,o))==r)return c;for(var l=a=0;l<r;l++){var d=o[l];d.isNaN()||(a<l&&o[a].L(d),a++)}for(;a<r;a++)o[a].Rc();return c},b.transform=function(c,a,r,o,l){if(c.isIdentity())return u.ta.kP(o,a,r),r;for(var d=[],p=0,g=0;g<r;){for(var v=Math.min(d.length,r-g),w=g,T=0;w<v;w++,T++)d[T]==null?d[T]=a[w].D():a[w].D(d[T]);var $=l?b.Qt(c,d,v,d):b.Rt(c,d,v,d);for(T=w=0;w<$;w++,T++)o[g]==null&&(o[g]=new u.Sa(a[g])),o[g].Cb(d[T]);g+=v,p+=$}return p},b.prototype.Rt=function(c,a,r){if(this.hf.isIdentity())return c!=r&&u.ta.Ru(r,c,a),a;var o=this.hf.ef,l=this.hf.Yf,d=o.Sb(),p=l.Sb();if(d==0&&d===p){var g=o.Qp();return l=g/(l=l.Qp()),(g=new u.Dd).setScale(l,l),g.eY(c,a,r),a}if(g=u.O.Fu(Math.min(a,64)),d==3){var v=o.Ji;d=(o=v.fk()).Sb(),r!=c&&u.ta.Ru(r,c,a),u.zb.$k(v,r,a,!0),v.Qt(u.bm.forward,r,a),u.zb.Zk(v,r,a,!0)}if(d==3||p===3)throw u.i.fa("image: transform_in_place_");if(d==2)this.lo==u.si.Clip?(r!=c&&u.ta.Ru(r,c,a),c=o.ml(),u.zb.OS(c,o,r,a)):(r!=c&&u.ta.Ru(r,c,a),o.Wc()&&(d=o.Xd(0),v=o.Oe(),u.zb.EX(r,a,v,d),u.zb.qF(r,a,o,0))),u.zb.IL(o,r,a,g);else for(d=o.Xd(0),v=o.Oe(),o=0;o<a;o++)u.zb.FX(c[o],v,d,r[o]);for(u.zb.GL(this.hf,r,a,g),c=0,(p=p==2)?c=l.zi():isNaN(this.Bm)||(c=this.Bm),p&&this.Qm!=u.si.Clip||u.zb.qF(r,a,l.sc(),c),p&&(u.zb.yG(r,a,l,this.Qm),u.zb.HL(l,r,a,g)),c=a,o=0;o<a;++o)r[o].isNaN()&&c--;return c},b.prototype.zh=function(c,a){if(this.hf.isIdentity()||c.B())return c;if(c.getType()==33)return this.XI(c);var r=this.hf.ef,o=this.hf.Yf,l=r.Sb(),d=o.Sb();if(l==0&&l==d)return a=r.Qp(),a/=o=o.Qp(),(o=new u.Dd).setScale(a,a),(c=u.aa.jg(c)).Oc(o),c;switch(c.getType()){case 1607:case 1736:c=this.VI(c,a);break;case 550:c=this.fW(c,a);break;case 197:c=this.eW(c,a);break;default:throw u.i.fa("")}return c},b.prototype.XI=function(c){var a=c.D(),r=[];return r[0]=a,this.Rt(r,1,r),(c=new u.Sa(c)).Cb(r[0]),c},b.prototype.VI=function(c,a){if(c.tm())throw u.i.fa("curves not supported");var r=c.getType();if(r==1736)return this.gW(c,a);if(r==1607)return this.hW(c,a);throw u.i.fa("projectMultiPath")},b.prototype.gW=function(c,a){var r=this.hf.ef,o=this.hf.Yf,l=r.Sb(),d=o.Sb(),p=u.O.Fu(Math.min(c.I(),64)),g=u.Da.jg(c);l==3&&(l=(r=(c=r.Ji).fk()).Sb(),g=c.$k(g,!0),this.wp(c,u.bm.forward,g),g=c.Zk(g,!0)),c=null,d==3&&(d=(o=(c=o.Ji).fk()).Sb());var v=l==2,w=d==2,T=w?o.sc():o,$=!w&&!this.Uv;d=!1;var C=g;if(v){if((C=u.zb.UI(C,r,this.lo,a)).B())return C}else{if(g=new u.l,C.xc(g),l=r.Oe(),g.G<l.G||g.H>l.H){var O=u.l.construct(g.v-1,l.G,g.C+1,l.H);if((C=u.ri.Nu(C,O,r,NaN,0,a)).B())return C}g.R()>2*l.R()&&(C=u.zb.Hp(C,-2*l.R(),2*l.R(),r,!0,0,!0,a))}g=this.mH,(l=!isNaN(g))&&(C=u.Xl.local().V(C,g,a)),O=w?o.kk():null;var N=NaN;v&&(N=r.zi());var R=o.Wr()!=null;if(this.aH)v&&(u.zb.ur(r,N,C,p),l&&(v=r.hh(),g*=(N=r.sc().hh())/v)),u.zb.tr(this.hf,C,$,p),l&&(v=r.sc().hh(),g*=(N=o.sc().hh())/v),r=C;else{var F=new u.Ta(C.description);F.DD(C),v&&(u.zb.ur(r,N,F,p),l&&(v=r.hh(),g*=(N=r.sc().hh())/v)),u.zb.tr(this.hf,F,$,p),l&&(v=r.sc().pm(),g*=(N=o.sc().pm())/v),$=NaN,w?(O=o.kk(),$=o.zi()):isNaN(this.Bm)||($=this.Bm),v=b.tv(r)|b.tv(o),N=10*T.Xd(0),this.Uv&&(v=3,N=0),r=u.zb.UQ(C,r,F,T,$,a,v,N)}return R&&(r=u.zb.XD(r,o,a)),w&&(d||(w=T.Oe().R(),r.Tg(0,0).R()>=w-T.Xd(0)&&(T=O.getNorthPoleLocation(),w=O.getSouthPoleLocation(),C=O.getNorthPoleGeometry(),O=O.getSouthPoleGeometry(),$=0,C==u.Cg.PE_POLE_POINT&&T!=u.Cg.PE_POLE_OUTSIDE_BOUNDARY&&($=1),O==u.Cg.PE_POLE_POINT&&w!=u.Cg.PE_POLE_OUTSIDE_BOUNDARY&&($|=2),$!==0&&(d=!0))),r=u.zb.Mz(r,o,this.Qm,a),l&&(r=u.Xl.local().V(r,g,a)),u.zb.Lx(o,r,p)),r.B()||(d&&(r=u.Yl.local().V(r,o,!1,a)),c!=null&&(r=c.Zk(r,!1),this.wp(c,u.bm.reverse,r),r=c.$k(r,!1))),r},b.tv=function(c){if(c.Sb()!=2)return 0;var a=0,r=c.kk();c=r.getNorthPoleLocation();var o=r.getSouthPoleLocation(),l=r.getNorthPoleGeometry();return r=r.getSouthPoleGeometry(),l==u.Cg.PE_POLE_POINT&&c!=u.Cg.PE_POLE_OUTSIDE_BOUNDARY&&(a=1),r==u.Cg.PE_POLE_POINT&&o!=u.Cg.PE_POLE_OUTSIDE_BOUNDARY&&(a|=2),a},b.prototype.hW=function(c,a){var r=this.hf.ef,o=this.hf.Yf,l=r.Sb(),d=o.Sb(),p=u.O.Fu(Math.min(c.I(),64)),g=u.Ta.jg(c);l==3&&(l=(r=(c=r.Ji).fk()).Sb(),g=c.$k(g,!0),this.wp(c,u.bm.forward,g),g=c.Zk(g,!0)),c=null,d==3&&(d=(o=(c=o.Ji).fk()).Sb());var v=l==2;l=(d=d==2)?o.sc():o;var w=!d&&!this.Uv;if(v){if((g=u.zb.UI(g,r,this.lo,a)).B())return g}else{var T=new u.l;g.xc(T);var $=r.Oe();if((T.G<$.G||T.H>$.H)&&(T=u.l.construct(T.v-1,$.G,T.C+1,$.H),(g=u.ri.Nu(g,T,r,NaN,0,a)).B()))return g}var C=NaN;v&&(C=r.zi()),T=o.Wr()!=null,$=this.mH;var O=!isNaN($);if(O&&(g=u.Xl.local().V(g,$,a)),this.aH)v&&u.zb.ur(r,C,g,p),O&&(v=r.hh(),$*=(C=r.sc().hh())/v),u.zb.tr(this.hf,g,w,p),O&&(v=r.sc().hh(),$*=(C=o.sc().hh())/v),r=g;else{var N=new u.Ta(g.description);N.DD(g),v&&(u.zb.ur(r,C,N,p),O&&(v=r.hh(),$*=(C=r.sc().hh())/v)),u.zb.tr(this.hf,N,w,p),O&&(v=r.sc().hh(),$*=(C=o.sc().hh())/v),w=NaN,d?w=o.zi():isNaN(this.Bm)||(w=this.Bm),v=b.tv(r)|b.tv(o),C=10*l.Xd(0),this.Uv&&(v=3,C=0),r=u.zb.VQ(g,r,N,l,w,a,v,C)}return T&&(r=u.zb.XD(r,o,a)),d&&(r=u.zb.Mz(r,o,this.Qm,a),O&&(r=u.Xl.local().V(r,$,a)),u.zb.Lx(o,r,p)),r.B()||c!=null&&(r=c.Zk(r,!1),this.wp(c,u.bm.reverse,r),r=c.$k(r,!1)),r},b.prototype.eW=function(c,a){var r=(c.ca()+c.R())/400;return r!=0?(r=u.Xl.local().V(c,r,a),r=this.VI(r,a),a=c.Ia(),r.bn(a)):(a=new u.Sa(c.Ip()),r=this.XI(a),a=c.Ia(),r.B()?a.Oa():(c.copyTo(a),c=r.D(),a.K(c.x,c.y,c.x,c.y))),a},b.prototype.fW=function(c,a){c=u.aa.jg(c);var r=this.hf.ef,o=this.hf.Yf,l=r.Sb(),d=o.Sb(),p=u.O.Fu(Math.min(c.I(),64));if(l==3){var g=r.Ji;l=(r=g.fk()).Sb(),c=g.Zk(c,!0),this.wp(g,u.bm.forward,c),c=g.$k(c,!0)}if(l==2){if(this.lo==u.si.Clip?c=u.Xj.local().V(c,r.ml(),r,a):r.Wc()&&(l=new u.l,c.xc(l),r.Oe().contains(l)||(this.lo==u.si.PannableFold&&(c=u.zb.lj(c,r)),u.zb.Jt(c,r.Oe(),r.Xd(0),!0),c=u.zb.Fn(c,r,0,!0,0,a))),c.B())return c;u.zb.ur(r,0,c,p)}else u.zb.Jt(c,r.Oe(),r.Xd(0),!0);return u.zb.tr(this.hf,c,!1,p),r=0,l=!1,g=null,d==3&&(l=!0,d=(o=(g=o.Ji).fk()).Sb()),(d=d==2)?r=o.zi():isNaN(this.Bm)||(r=this.Bm),d&&this.Qm!=u.si.Clip||(c=u.zb.Fn(c,o.sc(),r,!1,0,a)),d&&(c=u.zb.Mz(c,o,this.Qm,a),u.zb.Lx(o,c,p),c.B())||l&&(c=g.Zk(c,!0),this.wp(g,u.bm.reverse,c),c=g.$k(c,!0)),c},b.prototype.wp=function(c,a,r){var o=r.I();if(o!=0){for(var l=r.ub(0),d=u.O.lg(200,0),p=[],g=0;g<o;){var v=Math.min(100,o-g);l.Vw(2*g,2*v,d,2,!0);for(var w=0;w<v;++w)p[w]=u.h.construct(d[2*g],d[2*g+1]);c.Qt(a,p,v),g+=v}r.Pc(1993)}},b.Uy=function(c,a,r){if(c==null||a==null||!a.Wc())throw u.i.fa("Invalid Arguement");if(c.B())return c;var o=c.getType();return o==197?(o=new u.Da(c.description)).ad(c,!1):u.aa.yd(o)?(o=new u.Ta(c.description)).oc(c,!0):o=c,(o=u.zb.lj(o,a)).B()?o:u.zb.Fn(o,a,0,o!=c,0,r)},b.nj=function(c,a,r,o){if(c==null||a==null||!a.Wc())throw u.i.fa("Invalid Arguement");if(c.B())return c;var l=c.getType();if(u.aa.Hc(l)){c=u.zb.lj(c,a),l=new u.l,c.A(l);for(var d=u.ta.ty(a,l,!1),p=a.gh(),g=Math.floor((l.v-p.v)/p.R())*p.R()+p.v;g<l.C;)g>l.v+d&&g<l.C-d&&(c=u.zb.uS(c,a,r,g)),g+=p.R()}else{if(l==197)return(l=new u.Da(c.description)).ad(c,!1),b.nj(l,a,r,o);if(u.aa.yd(l))return(l=new u.Ta(c.description)).oc(c,!0),b.nj(l,a,r,o)}return b.Uy(c,a,o)},b}();u.bu=A}(V||(V={})),function(u){var A=function(b){function c(a,r,o,l){var d=b.call(this)||this;return a===void 0?d.description=u.ee.og():o===void 0?d.description=a:(d.description=u.ee.og(),d.ZB(a,r),d.Ql(o,l)),d}return bt(c,b),c.prototype.getType=function(){return 322},c.prototype.Qb=function(){var a=this.sa-this.pa,r=this.na-this.la;return Math.sqrt(a*a+r*r)},c.prototype.Bi=function(a){var r=this.sa-this.pa,o=this.na-this.la;return Math.sqrt(r*r+o*o)<=a},c.prototype.Pn=function(){return!1},c.prototype.kg=function(){var a=new u.h;return a.uc(this.wc(),this.ac()),a},c.cP=function(a,r){return new c(a.x,a.y,r.x,r.y)},c.prototype.bn=function(a){a.Oa(),a.Nf(this.description);var r=new u.l;this.A(r),a.Xo(r),r=1;for(var o=this.description.Aa;r<o;r++)for(var l=this.description.kd(r),d=u.ra.Va(l);r<d;r++){var p=this.Tg(l,0);a.setInterval(l,0,p)}},c.prototype.A=function(a){a.K(this.sa,this.na,this.pa,this.la),a.normalize()},c.prototype.Qo=function(a){a.Oa(),a.Zb(this.sa,this.na,this.Od(0,1,0)),a.Zb(this.pa,this.la,this.Od(1,1,0))},c.prototype.Oc=function(a){if(a instanceof u.Dd){this.vc();var r=new u.h;r.x=this.sa,r.y=this.na,a.Eh(r,r),this.sa=r.x,this.na=r.y,r.x=this.pa,r.y=this.la,a.Eh(r,r),this.pa=r.x,this.la=r.y}else this.vc(),(r=new u.Nd).x=this.sa,r.y=this.na,r.z=this.Od(0,1,0),r=a.fp(r),this.sa=r.x,this.na=r.y,this.tn(0,1,0,r.z),r.x=this.pa,r.y=this.la,r.z=this.Od(1,1,0),r=a.fp(r),this.pa=r.x,this.la=r.y,this.tn(1,1,0,r.z)},c.prototype.Ia=function(){return new c(this.description)},c.prototype.Tx=function(a,r){return(this.pa-a-(this.sa-a))*(this.la-r+(this.na-r))*.5},c.prototype.vx=function(a){return a*this.Qb()},c.prototype.NG=function(a){return a/this.Qb()},c.prototype.DF=function(a){return u.lc.hq(this.sa,this.pa,a)},c.prototype.fR=function(a){return u.lc.hq(this.na,this.la,a)},c.prototype.dl=function(a,r){var o=new u.ig;return this.ah(a,r,o),o.get()},c.prototype.ah=function(a,r,o){if(o==null)throw u.i.N();o.Or(),(o=o.get()).Nf(this.description);var l=new u.h;this.hc(a,l),o.ZB(l.x,l.y),this.hc(r,l),o.Ql(l.x,l.y),l=1;for(var d=this.description.Aa;l<d;l++)for(var p=this.description.Ed(l),g=u.ra.Va(p),v=0;v<g;v++){var w=this.Uc(a,p,v);o.YB(p,v,w),w=this.Uc(r,p,v),o.OB(p,v,w)}},c.prototype.Uc=function(a,r,o){if(r==0)return o==0?this.hc(a).x:this.hc(a).y;switch(u.ra.lz(r)){case 0:return .5>a?this.wv(r,o):this.gv(r,o);case 1:var l=this.wv(r,o);return r=this.gv(r,o),u.lc.hq(l,r,a);case 2:throw u.i.fa("not implemented")}throw u.i.Qa()},c.prototype.fe=function(a,r){var o=this.pa-this.sa,l=this.la-this.na,d=o*o+l*l;return d==0?.5:(a=((a.x-this.sa)*o+(a.y-this.na)*l)/d,r||(0>a?a=0:1<a&&(a=1)),a)},c.prototype.cq=function(a,r,o,l){if(a){if((a=this.la-this.na)==0)return r==this.la?-1:0;if(0>(r=(r-this.na)/a)||1<r)return 0;o!=null&&(o[0]=this.DF(r))}else{if((a=this.pa-this.sa)==0)return r==this.pa?-1:0;if(0>(r=(r-this.sa)/a)||1<r)return 0;o!=null&&(o[0]=this.fR(r))}return l!=null&&(l[0]=r),1},c.prototype.Pe=function(a,r){var o=this.la-this.na;return o==0?a==this.la?r:NaN:(a=(a-this.na)/o,r=this.DF(a),a==1&&(r=this.pa),r)},c.prototype.ru=function(a,r,o){return 0<=this.rp(a.x,a.y,r,o)},c.prototype.vi=function(a,r,o){return 0<=this.rp(a,r,o,!0)},c.prototype.qs=function(a,r){return this.ru(a,r,!1)},c.prototype.rI=function(){if(this.la<this.na||this.la==this.na&&this.pa<this.sa){var a=this.sa;this.sa=this.pa,this.pa=a,a=this.na,this.na=this.la,this.la=a,a=0;for(var r=this.description.Oq-2;a<r;a++){var o=this.ka[a];this.ka[a]=this.ka[a+r],this.ka[a+r]=o}}},c.prototype.uu=function(a,r){(r=u.h.construct(a,r)).sub(this.ac());var o=new u.h;return o.uc(this.wc(),this.ac()),(a=o.wi(r))>(r=8881784197001252e-31*(Math.abs(o.x*r.y)+Math.abs(o.y*r.x)))?-1:a<-r?1:0},c.prototype.rp=function(a,r,o,l){var d=this.sa,p=this.na,g=a-d,v=r-p;if((g=Math.sqrt(g*g+v*v))<=Math.max(o,6661338147750939e-31*g))return l&&g==0?NaN:0;if(g=a-this.pa,v=r-this.la,(g=Math.sqrt(g*g+v*v))<=Math.max(o,6661338147750939e-31*g))return l&&g==0?NaN:1;if(g=this.pa-this.sa,v=this.la-this.na,0<(l=Math.sqrt(g*g+v*v))){var w=1/l,T=a-d,$=r-p,C=T*(g*=w)+$*(v*=w),O=17763568394002505e-31*(Math.abs(T*g)+Math.abs($*v)),N=g;if(g=-v,v=N,C<-(O=Math.max(o,O))||C>l+O)return NaN;if(Math.abs(T*g+$*v)<=Math.max(o,17763568394002505e-31*(Math.abs(T*g)+Math.abs($*v)))&&(.5>=(g=u.O.Rk(C*w,0,1))?(v=this.sa+(this.pa-this.sa)*g,l=this.na+(this.la-this.na)*g):(v=this.pa-(this.pa-this.sa)*(1-g),l=this.la-(this.la-this.na)*(1-g)),u.h.Oy(v,l,a,r)<=o)){if(.5>g){if(u.h.Oy(v,l,d,p)<=o)return 0}else if(u.h.Oy(v,l,this.pa,this.la)<=o)return 1;return g}}return NaN},c.prototype.Nb=function(a){return a!=null&&(a==this||a.constructor===this.constructor&&this.FM(a))},c.prototype.rD=function(a,r,o){var l=o?this.sa:this.pa;o=o?this.na:this.la;var d=new u.h;return d.x=a.pa-l,d.y=a.la-o,!(r.Qh(d)>6661338147750939e-31*r.fD(d))||(d.x=a.sa-l,d.y=a.na-o,r.Qh(d)<=6661338147750939e-31*r.fD(d))},c.prototype.qD=function(a){var r=new u.h;return r.x=this.pa-this.sa,r.y=this.la-this.na,!!this.rD(a,r,!1)&&(r.Sq(),!!this.rD(a,r,!0))},c.NM=function(a,r){var o=a.uu(r.sa,r.na),l=a.uu(r.pa,r.la);return!(0>o&&0>l||0<o&&0<l)&&(o=r.uu(a.sa,a.na),l=r.uu(a.pa,a.la),!(0>o&&0>l||0<o&&0<l)&&((o=a.Qb())>(l=r.Qb())?a.qD(r):r.qD(a)))},c.LM=function(a,r,o){var l=u.h.construct(NaN,NaN),d=a.pa-a.sa,p=a.la-a.na,g=r.pa-r.sa,v=r.la-r.na,w=g*p-d*v;if(w==0)return l;var T=8881784197001252e-31*(Math.abs(g*p)+Math.abs(d*v)),$=r.sa-a.sa,C=r.na-a.na,O=g*C-$*v,N=O/w,R=Math.abs(w);return N<-(g=(8881784197001252e-31*(Math.abs(g*C)+Math.abs($*v))*R+T*Math.abs(O))/(w*w)+2220446049250313e-31*Math.abs(N))||N>1+g||(g=(v=d*C-$*p)/w)<-(d=(8881784197001252e-31*(Math.abs(d*C)+Math.abs($*p))*R+T*Math.abs(v))/(w*w)+2220446049250313e-31*Math.abs(g))||g>1+d||(N=u.O.Rk(N,0,1),d=u.O.Rk(g,0,1),p=a.hc(N),w=r.hc(d),(T=new u.h).uc(p,w),T.length()>o&&(T.add(p,w),T.scale(.5),N=a.fe(T,!1),d=r.fe(T,!1),a=a.hc(N),r=r.hc(d),a.sub(r),a.length()>o)||l.ma(N,d)),l},c.OM=function(a,r,o,l){var d=0;if((a.sa==r.sa&&a.na==r.na||a.sa==r.pa&&a.na==r.la)&&(d++,!l))return 1;if(a.pa==r.sa&&a.la==r.na||a.pa==r.pa&&a.la==r.la){if(++d==2)return 2;if(!l)return 1}return r.vi(a.sa,a.na,o)||r.vi(a.pa,a.la,o)||a.vi(r.sa,r.na,o)||a.vi(r.pa,r.la,o)?1:l&&d!=0||c.NM(a,r)==0?0:1},c.Zx=function(a,r,o,l,d,p){var g=0,v=a.rp(r.sa,r.na,p,!1),w=a.rp(r.pa,r.la,p,!1),T=r.rp(a.sa,a.na,p,!1),$=r.rp(a.pa,a.la,p,!1);return isNaN(v)||(l!=null&&(l[g]=v),d!=null&&(d[g]=0),o!=null&&(o[g]=u.h.construct(r.sa,r.na)),g++),isNaN(w)||(l!=null&&(l[g]=w),d!=null&&(d[g]=1),o!=null&&(o[g]=u.h.construct(r.pa,r.la)),g++),g==2||isNaN(T)||v==0&&T==0||w==0&&T==1||(l!=null&&(l[g]=0),d!=null&&(d[g]=T),o!=null&&(o[g]=u.h.construct(a.sa,a.na)),g++),g==2||isNaN($)||v==1&&$==0||w==1&&$==1||(l!=null&&(l[g]=1),d!=null&&(d[g]=$),o!=null&&(o[g]=u.h.construct(r.pa,r.la)),g++),0<g?(g==2&&l!=null&&l[0]>l[1]&&(a=l[0],l[0]=l[1],l[1]=a,d!=null&&(l=d[0],d[0]=d[1],d[1]=l),o!=null&&(d=u.h.construct(o[0].x,o[0].y),o[0]=o[1],o[1]=d)),g):(g=c.LM(a,r,p),isNaN(g.x)?0:(o!=null&&(o[0]=a.hc(g.x)),l!=null&&(l[0]=g.x),d!=null&&(d[0]=g.y),1))},c.prototype.eG=function(){return 0},c.prototype.op=function(){},c.prototype.toString=function(){return"Line: ["+this.sa.toString()+", "+this.na.toString()+", "+this.pa.toString()+", "+this.la.toString()+"]"},c}(u.SC);u.yb=A}(V||(V={})),function(u){var A=function(){function b(){this.Jm=[],this.ya=-1}return b.prototype.La=function(){return this.ya},b.prototype.next=function(){if(this.Jm!=null&&this.Jm.length!=0){this.ya++;var c=this.Jm[0];return this.Jm=1>=this.Jm.length?[]:this.Jm.slice(1),c}return this.Jm=null},b.prototype.ZX=function(c){this.Jm.push(c)},b.prototype.qe=function(){},b}();u.gL=A}(V||(V={})),function(u){var A;(A=u.SL||(u.SL={}))[A.enumFillRuleOddEven=0]="enumFillRuleOddEven",A[A.enumFillRuleWinding=1]="enumFillRuleWinding";var b=function(c){function a(r,o){var l=c.call(this)||this;if(l.xf=!1,l.Eq=null,l.sq=0,l.rq=0,l.Aj=null,l.Mg=!1,l.nb=null,l.mb=null,l.Ve=null,l.Lj=null,l.Sd=null,l.tq=0,l.gb=0,l.xq=0,o===void 0)l.xf=r,l.Mg=!1,l.tq=0,l.sq=0,l.rq=0,l.wa=0,l.description=u.ee.og();else{if(o==null)throw u.i.N();l.xf=r,l.Mg=!1,l.tq=0,l.sq=0,l.rq=0,l.wa=0,l.description=o}return l.Aj=null,l.gb=0,l}return bt(a,c),a.prototype.tm=function(){return 0<this.tq},a.prototype.Yx=function(){this.vc(),this.Eq==null?this.Eq=new u.Sa(this.description):this.Eq.Nf(this.description)},a.prototype.sx=function(r,o){var l=new u.h;l.x=r,l.y=o,this.Lt(l)},a.prototype.Lt=function(r){this.Yx(),this.Eq.Cb(r),this.Mg=!0},a.prototype.nf=function(r){if(r.B())throw u.i.N();this.Jl(r.description),this.Yx(),r.copyTo(this.Eq),this.Mg=!0},a.prototype.Sx=function(){var r=1;this.Mg&&(this.Yx(),this.nb==null?(this.nb=u.Yc.Oh(2),this.nb.write(0,0),this.mb=u.Yc.Mr(2,0)):(this.nb.resize(this.nb.size+1,0),this.mb.resize(this.mb.size+1,0)),this.xf&&this.mb.write(this.mb.size-2,1),r++);var o=this.wa;this.nb.write(this.nb.size-1,this.wa+r),this.dm(o+r),this.mb.write(this.nb.size-1,0),this.Mg&&(this.Ht(o,this.Eq),this.Mg=!1)},a.prototype.yj=function(r,o){this.Sx(),this.Cb(this.wa-1,r,o)},a.prototype.Ci=function(r){this.Sx(),this.Cb(this.wa-1,r)},a.prototype.lineTo=function(r){this.Sx(),this.Ht(this.wa-1,r)},a.prototype.CU=function(r){if(this.vc(),this.xf)throw u.i.Qa();var o=this.da();if(r>o)throw u.i.Qa();if(this.dc(r)){if(this.mb==null)throw u.i.Qa();var l=this.wa,d=this.Ba(r),p=this.Vc(r);this.dm(this.wa+1),this.mc();for(var g=0,v=this.description.Aa;g<v;g++)if(this.za[g]!=null){var w=u.ra.Va(this.description.Ed(g));this.za[g].Mn(w*p,this.za[g],w*d,w,!0,1,w*l)}for(;o>r;o--)l=this.nb.read(o),this.nb.write(o,l+1);this.mb.KE(r,1)}},a.prototype.Ap=function(){if(this.wx(),r===void 0){this.Mg=!1;var r=this.da()-1}var o=this.mb.read(r);this.mb.write(r,1|o),this.Ve!=null&&(r=this.Vc(r)-1,this.Ve.write(r,1),this.Lj.write(r,-1))},a.prototype.dc=function(r){return!!(1&this.mb.read(r))},a.prototype.Nn=function(r){if(this.dc(r))return!0;var o=this.Ba(r);return!(o>(r=this.Vc(r)-1))&&(o=this.Na(o),r=this.Na(r),o.qb(r))},a.prototype.yv=function(r){return!!(2&this.mb.read(r))},a.prototype.oc=function(r,o){if(this.Jl(r.description),r.getType()!=322)throw u.i.Qa();var l=new u.Sa;(o||this.B())&&(r.To(l),this.nf(l)),r.Po(l),this.lineTo(l)},a.prototype.tp=function(r){var o=this.wa==0;this.sx(r.v,r.G),this.yj(r.v,r.H),this.yj(r.C,r.H),this.yj(r.C,r.G),this.Ap(),this.Mg=!1,o&&this.Lf(256,!1)},a.prototype.ad=function(r,o){if(!r.B()){for(var l=this.wa==0,d=new u.Sa(this.description),p=0;4>p;p++)r.Hf(o?4-p-1:p,d),p==0?this.nf(d):this.lineTo(d);this.Ap(),this.Mg=!1,l&&!o&&this.Lf(256,!1)}},a.prototype.add=function(r,o){for(var l=0;l<r.da();l++)this.addPath(r,l,!o)},a.prototype.addPath=function(r,o,l){this.vf(-1,r,o,l)},a.prototype.Yk=function(r,o){this.Hz(r,o)},a.prototype.Dr=function(r,o,l,d,p){if(p||this.da()!=0||(p=!0),0>o&&(o=r.da()-1),o>=r.da()||0>l||0>d||d>r.rv(o))throw u.i.fa("index out of bounds");if(d!=0){var g=r.dc(o)&&l+d==r.rv(o);if(!g||d!=1){if(this.Mg=!1,this.Jl(r.description),l=r.Ba(o)+l+1,p&&(d++,l--),g&&d--,g=this.wa,this.dm(this.wa+d),this.mc(),p){if(d==0)return;this.nb.add(this.wa),p=r.mb.read(o),p&=-5,this.xf&&(p|=1),this.mb.write(this.mb.size-1,p),this.mb.add(0)}else this.nb.write(this.mb.size-1,this.wa);p=0;for(var v=this.description.Aa;p<v;p++){var w=this.description.kd(p),T=u.ra.Va(w),$=r.description.Pf(w);0>$||r.za[$]==null?this.za[p].Ln(T*g,u.ra.se(w),d*T,T*g):this.za[p].Mn(T*g,r.za[$],T*l,d*T,!0,T,T*g)}if(this.tm()||r.yv(o))throw u.i.Qa();this.Pc(1993)}}},a.prototype.oJ=function(){for(var r=0,o=this.da();r<o;r++)this.FW(r)},a.prototype.FW=function(r){if(this.mc(),r>=this.da())throw u.i.N();var o=this.Ba(r),l=this.Ja(r);r=this.dc(r)?1:0;for(var d=0,p=this.description.Aa;d<p;d++)if(this.za[d]!=null){var g=u.ra.Va(this.description.Ed(d));this.za[d].ni(g*(o+r),g*(l-r),g)}this.Pc(1993)},a.prototype.Zq=function(r){this.mc();var o=this.da();if(0>r&&(r=o-1),r>=o)throw u.i.N();for(var l=this.Ba(r),d=this.Ja(r),p=0,g=this.description.Aa;p<g;p++)if(this.za[p]!=null){var v=u.ra.Va(this.description.Ed(p));this.za[p].En(v*l,v*d,v*this.wa)}for(l=r+1;l<=o;l++)p=this.nb.read(l),this.nb.write(l-1,p-d);if(this.mb==null)for(l=r+1;l<=o;l++)r=this.mb.read(l),this.mb.write(l-1,r);this.nb.resize(o),this.mb.resize(o),this.wa-=d,this.Pg-=d,this.Pc(1993)},a.prototype.vf=function(r,o,l,d){if(o==this||l>=o.da())throw u.i.N();var p=this.da();if(r>p)throw u.i.N();0>r&&(r=p),0>l&&(l=o.da()-1),this.Mg=!1,this.Jl(o.description),o.mc();var g=o.Ba(l),v=o.Ja(l),w=this.wa,T=o.dc(l)&&!d?1:0;this.dm(this.wa+v),this.mc();for(var $=r<p?this.Ba(r):w,C=0,O=this.description.Aa;C<O;C++){var N=this.description.Ed(C),R=o.description.Pf(N),F=u.ra.Va(N);0<=R&&o.za[R]!=null?(T!=0&&this.za[C].Mn($*F,o.za[R],F*g,F,!0,F,F*w),this.za[C].Mn(($+T)*F,o.za[R],F*(g+T),F*(v-T),d,F,F*(w+T))):this.za[C].Ln($*F,u.ra.se(N),F*v,F*w)}for(this.nb.add(w+v),d=p;d>=r+1;d--)g=this.nb.read(d-1),this.nb.write(d,g+v);for(o.yv(l),this.mb.add(0),d=p-1;d>=r+1;d--)p=this.mb.read(d),p&=-5,this.mb.write(d+1,p);p=o.JR().read(l),p&=-5,this.xf&&(p|=1),this.mb.write(r,p)},a.prototype.Hz=function(r,o){var l=-1,d=this.da();if(l>d)throw u.i.N();0>l&&(l=d),this.Mg=!1;var p=this.wa;this.dm(this.wa+o),this.mc();var g=l<d?this.Ba(l):p;if(r!=null)this.za[0].Iz(2*g,r,0,o,!0,2*p);else{var v=u.ra.se(0);this.za[0].Ln(2*g,v,2*o,2*p)}r=1;for(var w=this.description.Aa;r<w;r++){v=this.description.kd(r);var T=u.ra.Va(v);v=u.ra.se(v),this.za[r].Ln(g*T,v,T*o,T*p)}for(this.nb.add(this.wa),p=d;p>=l+1;p--)g=this.nb.read(p-1),this.nb.write(p,g+o);for(this.mb.add(0),p=d-1;p>=l+1;p--)o=this.mb.read(p),o&=-5,this.mb.write(p+1,o);this.xf&&this.mb.write(l,1)},a.prototype.qG=function(r,o,l){var d=-1;if(0>r&&(r=this.da()),r>this.da()||d>this.Ja(r)||l>o.length)throw u.i.fa("index out of bounds");if(l!=0){r==this.da()&&(this.nb.add(this.wa),this.xf?this.mb.add(1):this.mb.add(0)),0>d&&(d=this.Ja(r)),this.mc();var p=this.wa;this.dm(this.wa+l),this.mc();for(var g=0,v=this.description.Aa;g<v;g++){var w=this.description.Ed(g),T=u.ra.Va(w);this.za[g].Ut(T*(this.Ba(r)+d+l),(p-this.Ba(r)-d)*T,this.za[g],T*(this.Ba(r)+d),!0,T),g==0?this.za[g].vC(T*(this.Ba(r)+d),l,o,0,!0):this.za[g].Wj(u.ra.se(w),(this.Ba(r)+d)*T,l*T)}for(this.tm()&&(this.Ve.Ut(this.Ba(r)+d+l,p-this.Ba(r)-d,this.Ve,this.Ba(r)+d,!0,1),this.Lj.Ut(this.Ba(r)+d+l,p-this.Ba(r)-d,this.Lj,this.Ba(r)+d,!0,1),this.Ve.Wj(1,this.Ba(r)+d,l),this.Lj.Wj(-1,this.Ba(r)+d,l)),r+=1,o=this.da();r<=o;r++)this.nb.write(r,this.nb.read(r)+l)}},a.prototype.wf=function(r,o,l){var d=this.da();if(0>r&&(r=this.da()),r>=d||o>this.Ja(r))throw u.i.fa("index out of bounds");r==this.da()&&(this.nb.add(this.wa),this.xf?this.mb.add(1):this.mb.add(0)),0>o&&(o=this.Ja(r));var p=this.wa;this.dm(this.wa+1),this.mc();var g=this.Ba(r);this.za[0].vj(2*(g+o),l,2*p),l=1;for(var v=this.description.Aa;l<v;l++){var w=this.description.Ed(l),T=u.ra.Va(w);this.za[l].Ln(T*(g+o),u.ra.se(w),T,T*p)}for(r+=1;r<=d;r++)this.nb.write(r,this.nb.read(r)+1)},a.prototype.DB=function(r,o){var l=this.da();if(0>r&&(r=l-1),r>=l||o>=this.Ja(r))throw u.i.fa("index out of bounds");this.mc();var d=this.Ba(r);0>o&&(o=this.Ja(r)-1),o=d+o,d=0;for(var p=this.description.Aa;d<p;d++)if(this.za[d]!=null){var g=u.ra.Va(this.description.Ed(d));this.za[d].En(g*o,g,g*this.wa)}for(;l>=r+1;l--)o=this.nb.read(l),this.nb.write(l,o-1);this.wa--,this.Pg--,this.Pc(1993)},a.prototype.uE=function(r,o,l){var d=this.Ba(r)+o;if((l=this.Ba(l)+void 0)<d||0>d||l>this.I()-1)throw u.i.N();o=0,(r=this.Ga()).Vb(d);do{for(;r.Ha()&&(d=r.ha(),r.wb()!=l);)o+=d=d.Qb();if(r.wb()==l)break}while(r.$a());return o},a.prototype.fO=function(r,o,l){if(o=this.Ba(r)+o,l=this.Ba(r)+l,0>o||l>this.I()-1)throw u.i.N();var d=this.Ga();if(o>l){if(!this.dc(r))throw u.i.N("cannot iterate across an open path");d.JB()}var p=r=0;d.Vb(o);do p+=r,r=d.ha().Qb();while(d.wb()!=l);return p},a.prototype.mg=function(){return u.pi.gm(this,null)},a.prototype.KS=function(r,o,l){for(var d=r;d<l-1;d++)if(this.dc(d))throw u.i.N("cannot interpolate across closed paths");if((d=this.description.Aa)!=1){var p=this.uE(r,o,l);if(p!=0)for(var g=1;g<d;g++){var v=this.description.kd(g);if(u.ra.lz(v)!=2)for(var w=u.ra.Va(v),T=0;T<w;T++)this.MS(v,r,o,l,p,T)}}},a.prototype.JS=function(r,o,l){var d=this.description.Aa;if(d!=1){var p=this.fO(r,o,l);if(p!=0)for(var g=1;g<d;g++){var v=this.description.kd(g);if(u.ra.lz(v)!=2)for(var w=u.ra.Va(v),T=0;T<w;T++)this.LS(v,r,o,l,p,T)}}},a.prototype.MS=function(r,o,l,d,p,g){var v=this.Ga(),w=this.Ba(o)+l;d=this.Ba(d)+void 0,o=this.Uc(r,w,g),l=this.Uc(r,d,g);var T=o,$=0;v.Vb(w);do if(v.Ha()){if(v.ha(),v.wb()==d)break;this.setAttribute(r,v.wb(),g,T),v.li();do{if(w=v.ha(),v.ik()==d)return;$+=w=w.Qb(),T=u.lc.hq(o,l,$/p),v.On()||this.setAttribute(r,v.ik(),g,T)}while(v.Ha())}while(v.$a())},a.prototype.LS=function(r,o,l,d,p,g){var v=this.Ga(),w=this.Ba(o)+l;if((o=this.Ba(o)+d)!=w){d=this.Uc(r,w,g),l=this.Uc(r,o,g);var T=0;v.Vb(w),v.JB(),w=d;do{var $=v.ha();this.setAttribute(r,v.wb(),g,w),T+=w=$.Qb(),w=u.lc.hq(d,l,T/p)}while(v.ik()!=o)}},a.prototype.Oa=function(){this.tq=0,this.Mg=!1,this.Sd=this.Ve=this.Lj=this.mb=this.nb=null,this.wD()},a.prototype.Oc=function(r){r instanceof u.Dd?this.YD(r,-1):this.wN(r)},a.prototype.YD=function(r,o){if(!this.B()&&!r.isIdentity()){this.mc();var l=this.za[0],d=new u.h,p=new u.h;if(0>o){var g=this.tm(),v=0;o=this.wa}else g=this.yv(o),v=this.Ba(o),o=this.Vc(o);for(;v<o;v++){if(d.x=l.read(2*v),d.y=l.read(2*v+1),g){var w=this.Lj.read(v);if(0<=w)switch(7&this.Ve.read(v)){case 2:p.x=this.Sd.read(w),p.y=this.Sd.read(w+1),r.Eh(p,p),this.Sd.write(w,p.x),this.Sd.write(w+1,p.y),p.x=this.Sd.read(w+3),p.y=this.Sd.read(w+4),r.Eh(p,p),this.Sd.write(w+3,p.x),this.Sd.write(w+4,p.y);break;case 4:throw u.i.Qa()}}r.Eh(d,d),l.write(2*v,d.x),l.write(2*v+1,d.y)}this.Pc(1993)}},a.prototype.wN=function(r){if(!this.B()){this.re(1),this.mc();for(var o=this.za[0],l=this.za[1],d=new u.Nd,p=new u.Nd,g=this.tm(),v=0;v<this.wa;v++){if(d.x=o.read(2*v),d.y=o.read(2*v+1),d.z=l.read(v),g){var w=this.Lj.read(v);if(0<=w)switch(7&this.Ve.read(v)){case 2:p.x=this.Sd.read(w),p.y=this.Sd.read(w+1),p.z=this.Sd.read(w+2),p=r.fp(p),this.Sd.write(w,p.x),this.Sd.write(w+1,p.y),this.Sd.write(w+1,p.z),p.x=this.Sd.read(w+3),p.y=this.Sd.read(w+4),p.z=this.Sd.read(w+5),p=r.fp(p),this.Sd.write(w+3,p.x),this.Sd.write(w+4,p.y),this.Sd.write(w+5,p.z);break;case 4:throw u.i.Qa()}}d=r.fp(d),o.write(2*v,d.x),o.write(2*v+1,d.y),l.write(v,d.z)}this.Pc(1993)}},a.prototype.iy=function(){this.nb==null&&(this.nb=u.Yc.Oh(1,0),this.mb=u.Yc.Mr(1,0)),this.Ve!=null&&(this.Ve.resize(this.Pg,1),this.Lj.resize(this.Pg,-1))},a.prototype.op=function(r){r.Mg=!1,r.tq=this.tq,r.xq=this.xq,r.nb=this.nb!=null?u.ia.Bn(this.nb):null,r.mb=this.mb!=null?u.pn.Bn(this.mb):null,r.Lj=this.Lj!=null?u.ia.Bn(this.Lj):null,r.Ve=this.Ve!=null?u.pn.Bn(this.Ve):null,r.Sd=this.Sd!=null?u.be.Bn(this.Sd):null,r.sq=this.sq,r.rq=this.rq,r.Aj=this.ak(1024)?null:this.Aj},a.prototype.Qb=function(){if(!this.ak(512))return this.sq;for(var r=this.Ga(),o=new u.Fx(0);r.$a();)for(;r.Ha();)o.add(r.ha().Qb());return this.sq=o.rm(),this.Lf(512,!1),o.rm()},a.prototype.Nb=function(r){if(r==this)return!0;if(!(r instanceof a&&c.prototype.Nb.call(this,r)))return!1;var o=this.da();return!(o!=r.da()||this.nb!=null&&!this.nb.Nb(r.nb,0,o+1)||this.xq!=r.xq||this.mb!=null&&!this.mb.Nb(r.mb,0,o))&&c.prototype.Nb.call(this,r)},a.prototype.Ga=function(){return new u.YL(this)},a.prototype.hy=function(r){if(c.prototype.hy.call(this,r),this.tm())for(r=this.Ga();r.$a();)r.Ha()},a.prototype.yp=function(r,o){if(c.prototype.yp.call(this,r,o),this.tm())for(r=this.Ga();r.$a();)r.Ha()},a.prototype.$x=function(){this.wa=this.nb==null||this.nb.size==0?0:this.nb.read(this.nb.size-1)},a.prototype.Ke=function(){return this.xf?(this.xu(),this.rq):0},a.prototype.Ev=function(r){return!!this.xf&&(this.ak(8)?(this.xu(),0<this.Aj.read(r)):!!(4&this.mb.read(r)))},a.prototype.Ir=function(r){return this.xf?(this.xu(),this.Aj.read(r)):0},a.prototype.xu=function(){if(this.ak(1024)){var r=this.da();this.Aj==null?this.Aj=new u.be(r):this.Aj.size!=r&&this.Aj.resize(r),r=new u.Fx(0);for(var o=new u.Fx(0),l=new u.h,d=0,p=this.Ga();p.$a();){for(o.reset(),this.D(this.Ba(p.gb),l);p.Ha();)o.add(p.ha().Tx(l.x,l.y));r.add(o.rm());var g=d++;this.Aj.write(g,o.rm())}this.rq=r.rm(),this.Lf(1024,!1)}},a.prototype.FR=function(){if(this.xf){this.fm();for(var r=this.da(),o=0;o<r;o++)4&this.mb.read(o)}},a.prototype.fm=function(){if(this.ak(8)){this.xu();var r=this.da();(this.mb==null||this.mb.size<r)&&(this.mb=u.Yc.Mr(r+1));for(var o=1,l=0;l<r;l++){var d=this.Aj.read(l);l==0&&(o=0<d?1:-1),0<d*o?this.mb.zJ(l,4):this.mb.KE(l,4)}this.Lf(8,!1)}},a.prototype.sz=function(r){var o=this.gb,l=this.da();if(0<=o&&o<l){if(r<this.Vc(o)){if(r>=this.Ba(o))return o;o--}else o++;if(0<=o&&o<l&&r>=this.Ba(o)&&r<this.Vc(o))return this.gb=o}if(5>l){for(o=0;o<l;o++)if(r<this.Vc(o))return this.gb=o;throw u.i.fa("corrupted geometry")}for(o=0,--l;l>o;){var d=o+(l-o>>1);if(r<this.Ba(d))l=d-1;else{if(!(r>=(o=this.Vc(d))))return this.gb=d;o=d+1}}return this.gb=o},a.prototype.yz=function(){var r=this.I();if(!this.xf){r-=this.da();for(var o=0,l=this.da();o<l;o++)this.dc(o)&&r++}return r},a.prototype.rv=function(r){var o=this.Ja(r);return this.dc(r)||o--,o},a.prototype.Ia=function(){return new a(this.xf,this.description)},a.prototype.Db=function(){return this.xf?2:1},a.prototype.getType=function(){return this.xf?1736:1607},a.prototype.QJ=function(r){this.nb=r,this.Pc(16777215)},a.prototype.VR=function(){return this.wx(),this.Ve},a.prototype.JR=function(){return this.wx(),this.mb},a.prototype.PJ=function(r){this.mb=r,this.Pc(16777215)},a.prototype.da=function(){return this.nb!=null?this.nb.size-1:0},a.prototype.Vc=function(r){return this.nb.read(r+1)},a.prototype.Ja=function(r){return this.nb.read(r+1)-this.nb.read(r)},a.prototype.Ba=function(r){return this.nb.read(r)},a.prototype.lu=function(r,o){this.Bb==null&&(this.Bb=new u.Uk),o=u.Nx.pW(o);var l=this.Bb.Fk;if(l!=null){if(!(l.Ik<r||o>l.RR()))return!0;this.Bb.yD(null)}return l=u.Nx.create(this,r,o),this.Bb.yD(l),!0},a.prototype.cc=function(){var r=c.prototype.cc.call(this);if(!this.Ac()){var o=this.da();this.nb!=null&&this.nb.An(r,0,o+1),this.mb!=null&&this.mb.An(r,0,o)}return r},a.prototype.ZF=function(r){return this.Ve!=null?this.Ve.read(r):1},a.prototype.bc=function(r,o,l){var d=this.sz(r);if(r==this.Vc(d)-1&&!this.dc(d))throw u.i.fa("index out of bounds");this.mc();var p=this.Ve,g=1;if(p!=null&&(g=7&p.read(r)),g!==1)throw u.i.Qa();if(o.Or(),o=o.get(),l?o.Nf(u.ee.og()):o.Nf(this.description),d=r==this.Vc(d)-1&&this.dc(d)?this.Ba(d):r+1,p=new u.h,this.D(r,p),o.Dc(p),this.D(d,p),o.Qc(p),!l)for(l=1,p=this.description.Aa;l<p;l++){g=this.description.Ed(l);for(var v=u.ra.Va(g),w=0;w<v;w++){var T=this.Uc(g,r,w);o.YB(g,w,T),T=this.Uc(g,d,w),o.OB(g,w,T)}}},a.prototype.Rj=function(r,o){if(r>=this.da())throw u.i.N();if(this.B())o.Oa();else{if(this.yv(r))throw u.i.fa("not implemented");var l=this.ub(0),d=new u.h,p=new u.l;p.Oa();var g=this.Ba(r);for(r=this.Vc(r);g<r;g++)l.tc(2*g,d),p.Zb(d);o.K(p)}},a.prototype.fj=function(r){return this.Bb==null&&(this.Bb=new u.Uk),!(r==0||16>this.I())&&(r=u.ta.nE(this),this.Bb.WM(r),!0)},a.prototype.hM=function(){if(this.Bb==null&&(this.Bb=new u.Uk),this.Bb.zo==null){this.Bb.xD(null);var r=u.ta.YN(this);this.Bb.xD(r)}},a.prototype.Yo=function(r){this.xq=r},a.prototype.In=function(){return this.xq},a.prototype.DD=function(r){if(this==r)throw u.i.fa("MultiPathImpl.add");for(var o=this.da(),l=0;l<r.da();l++)this.addPath(r,l,!0),this.CU(o),o++},a.prototype.kO=function(r){var o=this.sz(r),l=this.Ba(o);if(l!=r){if(r>=(o=this.Vc(o))||r<l)throw u.i.fa("change_ring_start_point");for(var d=0,p=this.description.Aa;d<p;d++){var g=this.description.kd(d);g=u.ra.Va(g),this.za[d].rotate(l*g,r*g,o*g)}}},a}(u.Gx);u.Vk=b}(V||(V={})),function(u){var A=function(b){function c(a){var r=b.call(this)||this;if(a!==void 0){if(a==null)throw u.i.N();r.description=a}else r.description=u.ee.og();return r.wa=0,r}return bt(c,b),c.prototype.Ia=function(){return new c(this.description)},c.prototype.add=function(a){this.resize(this.wa+1),this.Dh(this.wa-1,a)},c.prototype.Bu=function(a,r){this.resize(this.wa+1);var o=new u.h;o.ma(a,r),this.Cb(this.wa-1,o)},c.prototype.Fd=function(a,r,o){if(o=0>o?a.I():o,0>r||r>a.I()||o<r)throw u.i.N();if(r!=o){this.Jl(a.description),o-=r;var l=this.wa;this.resize(this.wa+o),this.mc();for(var d=0,p=a.description.Aa;d<p;d++){var g=a.description.Ed(d),v=u.ra.Va(g),w=this.ub(g);g=a.ub(g),w.Mn(l*v,g,r*v,o*v,!0,1,l*v)}}},c.prototype.HD=function(a,r){var o=a.length;if(r=0>r?o:r,0>o||0>r)throw u.i.N();if(r!=0){o=r-0,r=this.wa,this.resize(this.wa+o);for(var l=0;l<o;l++)this.Cb(r+l,a[0+l])}},c.prototype.DB=function(a){if(0>a||a>=this.I())throw u.i.fa("index out of bounds");this.mc();for(var r=0,o=this.description.Aa;r<o;r++)if(this.za[r]!=null){var l=u.ra.Va(this.description.Ed(r));this.za[r].En(l*a,l,l*this.wa)}this.wa--,this.Pg--,this.Pc(1993)},c.prototype.resize=function(a){this.dm(a)},c.prototype.op=function(){},c.prototype.Oa=function(){b.prototype.wD.call(this)},c.prototype.Oc=function(a){if(a instanceof u.Dd){if(this.B())return;this.mc();for(var r=this.za[0],o=new u.h,l=0;l<this.wa;l++)o.x=r.read(2*l),o.y=r.read(2*l+1),a.Eh(o,o),r.write(2*l,o.x),r.write(2*l+1,o.y)}else{if(this.B())return;this.mc(),this.re(1),this.mc(),r=this.za[0],o=this.za[1];var d=new u.Nd;for(l=0;l<this.wa;l++){d.x=r.read(2*l),d.y=r.read(2*l+1),d.z=o.read(l);var p=a.fp(d);r.write(2*l,p.x),r.write(2*l+1,p.y),o.write(l,p.z)}}this.Pc(1993)},c.prototype.Db=function(){return 0},c.prototype.getType=function(){return 550},c.prototype.Ke=function(){return 0},c.prototype.Qb=function(){return 0},c.prototype.Nb=function(a){return a==this||a instanceof c&&b.prototype.Nb.call(this,a)},c.prototype.lW=function(a,r){var o=this.wa;if(o=Math.min(o,r+1e3),0>r||r>=this.wa||o<r||a.length!=1e3)throw u.i.N();var l=o-r,d=[];for(this.ub(0).Vw(2*r,2*l,d,0,!0),r=0;r<l;r++)a[r]=u.h.construct(d[2*r],d[2*r+1]);return o},c.prototype.$x=function(){},c.prototype.iy=function(){},c.prototype.lu=function(){return!1},c.prototype.fj=function(){return!1},c.prototype.mg=function(){return null},c}(u.Gx);u.de=A}(V||(V={})),function(u){var A;(A=u.iL||(u.iL={}))[A.NotDetermined=0]="NotDetermined",A[A.Structure=1]="Structure",A[A.DegenerateSegments=2]="DegenerateSegments",A[A.Clustering=3]="Clustering",A[A.Cracking=4]="Cracking",A[A.CrossOver=5]="CrossOver",A[A.RingOrientation=6]="RingOrientation",A[A.RingOrder=7]="RingOrder",A[A.OGCPolylineSelfTangency=8]="OGCPolylineSelfTangency",A[A.OGCPolygonSelfTangency=9]="OGCPolygonSelfTangency",A[A.OGCDisconnectedInterior=10]="OGCDisconnectedInterior";var b=function(){function c(a,r,o){a===void 0?(this.Jj=0,this.Ko=this.Jo=-1):(this.Jj=a,this.Jo=r,this.Ko=o)}return c.prototype.Wt=function(a){this.Jj=a.Jj,this.Jo=a.Jo,this.Ko=a.Ko},c}();u.Md=b}(V||(V={})),function(u){u.O=function(){function A(){}return A.assert=function(b){if(b===!1)throw u.i.GK()},A.bK=function(b){return isNaN(b)?NaN:b===0?b:0<b?1:-1},A.Fu=function(b){var c;c===void 0&&(c=0);for(var a=[],r=0;r<b;r++)a[r]=A.lg(2,c);return a},A.lg=function(b,c){c===void 0&&(c=0);for(var a=[],r=0;r<b;r++)a[r]=c;return a},A.$u=function(b,c){var a,r;for(a===void 0&&(a=0),r===void 0&&(r=b.length-1);a<=r;a++)b[a]=c},A.Rk=function(b,c,a){return b<c?c:b>a?a:b},A.Th=function(b,c){var a=5381;return((a=((a=((a=c!==void 0?(c<<5)+c+(255&b):(a<<5)+a+(255&b))<<5)+a+(b>>8&255))<<5)+a+(b>>16&255))<<5)+a+(b>>24&255)&2147483647},A.uj=function(){throw Error("Not Implemented")},A.bB=function(b){return A.aU(b)+12345&2147483647},A.XG=function(b){var c=32,a=b%A.Qx|0,r=b/A.Qx|0;return(c&=63)==0?b:(32>c?(b=a>>>c|r<<32-c,c=r>>c):(b=r>>c-32,c=0<=r?0:-1),c*A.Qx+(b>>>0))},A.aU=function(b){var c=1103515245,a=65535&c;return((c-a)*(b|=0)|0)+(a*b|0)|0},A.truncate=function(b){return 0>b?-1*Math.floor(Math.abs(b)):Math.floor(b)},A.MAX_SAFE_INTEGER=Math.pow(2,53)-1,A.MIN_SAFE_INTEGER=-A.MAX_SAFE_INTEGER,A.VC=65536,A.Qx=A.VC*A.VC,A}()}(V||(V={})),function(u){var A;(A=u.CL||(u.CL={}))[A.Project=0]="Project",A[A.Union=1]="Union",A[A.Difference=2]="Difference",A[A.Proximity2D=3]="Proximity2D",A[A.Relate=4]="Relate",A[A.Equals=5]="Equals",A[A.Disjoint=6]="Disjoint",A[A.Intersects=7]="Intersects",A[A.Within=8]="Within",A[A.Contains=9]="Contains",A[A.Crosses=10]="Crosses",A[A.Touches=11]="Touches",A[A.Overlaps=12]="Overlaps",A[A.Buffer=13]="Buffer",A[A.Distance=14]="Distance",A[A.Intersection=15]="Intersection",A[A.Clip=16]="Clip",A[A.Cut=17]="Cut",A[A.DensifyByLength=18]="DensifyByLength",A[A.DensifyByAngle=19]="DensifyByAngle",A[A.LabelPoint=20]="LabelPoint",A[A.GeodesicBuffer=21]="GeodesicBuffer",A[A.GeodeticDensifyByLength=22]="GeodeticDensifyByLength",A[A.ShapePreservingDensify=23]="ShapePreservingDensify",A[A.GeodeticLength=24]="GeodeticLength",A[A.GeodeticArea=25]="GeodeticArea",A[A.Simplify=26]="Simplify",A[A.SimplifyOGC=27]="SimplifyOGC",A[A.Offset=28]="Offset",A[A.Generalize=29]="Generalize",A[A.SymmetricDifference=30]="SymmetricDifference",A[A.ConvexHull=31]="ConvexHull",A[A.Boundary=32]="Boundary",A[A.SimpleRelation=33]="SimpleRelation";var b=function(){function c(){}return c.prototype.getType=function(){return null},c.prototype.wn=function(){},c.prototype.Iu=function(){return!1},c}();u.Je=b}(V||(V={})),function(u){var A=function(b){function c(){return b!==null&&b.apply(this,arguments)||this}return bt(c,b),c.prototype.getType=function(){return 13},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.V=function(a,r,o,l,d){return a instanceof u.aa?(d=new u.Zc(a),this.V(d,r,[o],!1,l).next()):l===!0?(o=new u.BC(a,r,o,!1,d),u.Gh.local().V(o,r,d)):new u.BC(a,r,o,!1,d)},c.instance=null,c}(u.Je);u.AC=A}(V||(V={})),function(u){var A=function(){function b(c,a,r,o,l){this.ya=-1,this.Rd=c,this.$z=a,this.Cs=r,this.tT=new u.l,this.tT.Oa(),this.eo=-1,this.Ub=l}return b.prototype.next=function(){for(var c;(c=this.Rd.next())!=null;)return this.ya=this.Rd.La(),this.eo+1<this.Cs.length&&this.eo++,this.buffer(c,this.Cs[this.eo]);return null},b.prototype.La=function(){return this.ya},b.prototype.buffer=function(c,a){return u.HK.buffer(c,a,this.$z,NaN,96,this.Ub)},b.prototype.qe=function(){},b}();u.BC=A}(V||(V={})),function(u){var A=function(b){function c(){return b!==null&&b.apply(this,arguments)||this}return bt(c,b),c.prototype.getType=function(){return 16},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.V=function(a,r,o,l){return a instanceof u.aa?(a=new u.Zc(a),this.V(a,r,o,l).next()):new u.lL(a,r,o,l)},c.instance=null,c}(u.Je);u.kL=A}(V||(V={})),function(u){var A=function(){function b(c,a,r){if(this.ya=-1,c==null)throw u.i.N();this.$=a,this.yk=c,this.qa=u.ta.Wd(r,a,!1)}return b.prototype.next=function(){var c;return(c=this.yk.next())!=null?(this.ya=this.yk.La(),u.Ud.clip(c,this.$,this.qa,0)):null},b.prototype.La=function(){return this.ya},b.prototype.qe=function(){},b}();u.lL=A}(V||(V={})),function(u){var A=function(b){function c(){return b!==null&&b.apply(this,arguments)||this}return bt(c,b),c.prototype.getType=function(){return 31},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.V=function(a,r,o){return a instanceof u.aa?u.DC.rE(a):new u.DC(r,a,o)},c.instance=null,c}(u.Je);u.CC=A}(V||(V={})),function(u){var A=function(){function b(c,a,r){if(this.uA=new u.Zt,this.ya=-1,a==null)throw u.i.N();this.cH=c,this.Ic=!1,this.yk=a,this.Ub=r}return b.prototype.next=function(){if(this.cH){if(!this.Ic){var c=this.dO(this.yk);return this.Ic=!0,c}return null}if(!this.Ic){if((c=this.yk.next())!=null)return this.ya=this.yk.La(),b.rE(c);this.Ic=!0}return null},b.prototype.La=function(){return this.ya},b.prototype.dO=function(c){for(var a;(a=c.next())!=null;)this.uA.Ib(a);return this.uA.cR()},b.prototype.qe=function(){if(!this.Ic){if(!this.cH)throw u.i.fa("Invalid call for non merging convex hull.");var c=this.yk.next();if(c==null)throw u.i.fa("Expects a non-null geometry.");this.uA.Ib(c)}},b.rE=function(c){if(b.VS(c))return c;var a=c.getType();if(u.Vk.yd(a))return(a=new u.Ta(c.description)).oc(c,!0),a;if(a==550&&c.I()==2){var r=new u.Sa;return a=new u.Ta(c.description),c.ve(0,r),a.nf(r),c.ve(1,r),a.lineTo(r),a}return u.Zt.RO(c)},b.VS=function(c){if(c.B())return!0;var a=c.getType();return a==33||a==197||!u.Vk.yd(a)&&(a==550?c.I()==1:a==1607?c.da()==1&&2>=c.I():c.da()==1&&(2>=c.I()||u.Zt.JG(c,0)))},b}();u.DC=A}(V||(V={})),function(u){var A=function(b){function c(){return b!==null&&b.apply(this,arguments)||this}return bt(c,b),c.prototype.getType=function(){return 17},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.V=function(a,r,o,l,d){return new u.nL(a,r,o,l,d)},c.instance=null,c}(u.Je);u.mL=A}(V||(V={})),function(u){var A=function(){function b(c,a,r,o,l){if(this.Tf=null,a==null||r==null)throw u.i.fa("invalid argument");this.qT=c,this.nA=a,this.lH=r,c=u.ta.mv(a,r),this.qa=u.ta.Wd(o,c,!0),this.kH=-1,this.nd=l}return b.prototype.La=function(){return 0},b.prototype.next=function(){return this.RQ(),++this.kH<this.Tf.length?this.Tf[this.kH]:null},b.prototype.RQ=function(){if(this.Tf==null)switch(this.Tf=[],this.nA.getType()){case 1607:this.TQ();break;case 1736:this.SQ()}},b.prototype.TQ=function(){var c=new u.Ta,a=new u.Ta,r=new u.Ta;this.Tf.push(c),this.Tf.push(a);var o=[];u.LK.JK(this.qT,this.nA,this.lH,this.qa,o,this.nd);for(var l=0;l<o.length;l++){var d=o[l];if(d.bt==0)c.add(d.X,!1);else if(d.bt==1||d.bt==2)a.add(d.X,!1);else if(d.bt==3)this.Tf.push(d.X);else{if(d.bt!=4)throw u.i.fa("internal");r.add(d.X,!1)}}r.B()||c.B()&&a.B()&&!(3<=this.Tf.length)||this.Tf.push(r),c.B()&&a.B()&&3>this.Tf.length&&(this.Tf.length=0)},b.prototype.SQ=function(){var c=new u.ia(0),a=new u.gd,r=a.aF(),o=a.Ib(this.nA),l=a.Ib(this.lH),d=new u.Fg;try{d.Ft(a,this.qa,this.nd),d.dl(r,o,l,c);var p=a.Ne(o),g=new u.Da,v=new u.Da;for(this.Tf.length=0,this.Tf.push(g),this.Tf.push(v),o=0;o<c.size;o++){var w=new u.gd,T=w.Ib(p),$=w.Ib(a.Ne(c.get(o)));d.dr(w,this.nd);var C=d.Av(T,$),O=w.Ne(C);if(!O.B()){var N=a.KF(c.get(o),r);N==2?g.add(O,!1):N==1?v.add(O,!1):this.Tf.push(O);var R=new u.gd;T=R.Ib(p),$=R.Ib(a.Ne(c.get(o))),d.dr(R,this.nd),p=R.Ne(d.im(T,$))}}!p.B()&&0<c.size&&this.Tf.push(p),g.B()&&v.B()&&(this.Tf.length=0)}finally{d.Ug()}},b.prototype.qe=function(){},b}();u.nL=A}(V||(V={})),function(u){var A=function(b){function c(){return b!==null&&b.apply(this,arguments)||this}return bt(c,b),c.prototype.getType=function(){return 18},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.V=function(a,r,o){if(a instanceof u.aa)return a=new u.Zc(a),this.V(a,r,o).next();if(0>=r)throw u.i.N();return new u.oL(a,r,o)},c.instance=null,c}(u.Je);u.Xl=A}(V||(V={})),function(u){var A=function(){function b(c,a){this.ya=-1,this.Rd=c,this.Ps=a}return b.prototype.La=function(){return this.ya},b.prototype.next=function(){var c;return(c=this.Rd.next())!=null?(this.ya=this.Rd.La(),this.NP(c)):null},b.prototype.NP=function(c){if(c.B()||1>c.Db())return c;var a=c.getType();if(a==1736||a==1607)return this.Ny(c);if(u.aa.yd(a))return this.PP(c);if(a==197)return this.OP(c);throw u.i.Qa()},b.prototype.PP=function(c){if(c.Qb()<=this.Ps)return c;var a=new u.Ta(c.description);return a.oc(c,!0),this.Ny(a)},b.prototype.OP=function(c){var a=new u.Da(c.description);a.ad(c,!1);var r=new u.l;return c.A(r),c=r.ca(),r.R()<=this.Ps&&c<=this.Ps?a:this.Ny(a)},b.prototype.Ny=function(c){for(var a=c.Ia(),r=c.Ga();r.$a();)for(var o=!0;r.Ha();){var l=r.ha();if(l.getType()!=322)throw u.i.fa("not implemented");var d=r.On(),p=l.Qb();if(p>this.Ps){var g=Math.ceil(p/this.Ps);p=new u.Sa(c.description),o&&(l.To(p),a.nf(p));var v=o=1/g,w=0;for(--g;w<g;w++)l.Tw(v,p),a.lineTo(p),v+=o;d?a.Ap():(l.Po(p),a.lineTo(p))}else d?a.Ap():a.oc(l,o);o=!1}return a},b.prototype.qe=function(){},b}();u.oL=A}(V||(V={})),function(u){var A=function(b){function c(){return b!==null&&b.apply(this,arguments)||this}return bt(c,b),c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.getType=function(){return 2},c.prototype.V=function(a,r,o,l){return a instanceof u.aa?(a=new u.Zc(a),r=new u.Zc(r),this.V(a,r,o,l).next()):new u.qL(a,r,o,l)},c.im=function(a,r,o,l){if(a.B()||r.B())return a;var d=a.Db(),p=r.Db();if(d>p)return a;var g=a.getType(),v=r.getType(),w=new u.l,T=new u.l,$=new u.l;a.A(w),r.A(T),$.K(w),$.Zb(T);var C=($=u.ta.Wd(o,$,!0))*Math.sqrt(2)*1.00001,O=new u.l;if(O.K(w),O.W(C,C),!O.isIntersecting(T))return a;if(d==1&&p==2)return c.KV(a,r,v,o,l);if(g==33)switch(u.Vk.yd(v)?(o=new u.Ta(r.description),o.oc(r,!0)):o=r,v){case 1736:return c.XU(a,o,$);case 1607:return c.YU(a,o,$);case 550:return c.VU(a,o,$);case 197:return c.UU(a,o,$);case 33:return c.WU(a,o,$);default:throw u.i.N()}else if(g==550)switch(v){case 1736:return c.nU(a,r,$);case 197:return c.lU(a,r,$);case 33:return c.mU(a,r,$)}return u.Fg.im(a,r,o,l)},c.XU=function(a,r,o){return u.hd.KG(r,a,o)==0?a:a.Ia()},c.YU=function(a,r,o){var l=a.D();r=r.Ga();for(var d=o*Math.sqrt(2)*1.00001,p=d*d,g=new u.l;r.$a();)for(;r.Ha();){var v=r.ha();if(v.A(g),g.W(d,d),g.contains(l)){if(v.qs(l,o))return a.Ia();var w=v.ac();if(u.h.yc(l,w)<=p||(w=v.wc(),u.h.yc(l,w)<=p))return a.Ia()}}return a},c.VU=function(a,r,o){var l=r.ub(0);r=r.I();var d=a.D(),p=new u.h;o=o*Math.sqrt(2)*1.00001,o*=o;for(var g=0;g<r;g++)if(l.tc(2*g,p),u.h.yc(p,d)<=o)return a.Ia();return a},c.UU=function(a,r,o){var l=new u.l;return r.A(l),l.W(o,o),r=a.D(),l.contains(r)?a.Ia():a},c.WU=function(a,r,o){o=o*Math.sqrt(2)*1.00001,o*=o;var l=a.D();return r=r.D(),u.h.yc(l,r)<=o?a.Ia():a},c.nU=function(a,r,o){var l=new u.l;r.A(l),l.W(o,o);for(var d=a.I(),p=!1,g=[],v=0;v<d;v++)g[v]=!1;var w=new u.h;for(v=0;v<d;v++)a.D(v,w),l.contains(w)&&u.hd.Yd(r,w,o)!=0&&(p=!0,g[v]=!0);if(!p)return a;for(r=a.Ia(),v=0;v<d;v++)g[v]||r.Fd(a,v,v+1);return r},c.lU=function(a,r,o){var l=new u.l;r.A(l),l.W(o,o),r=a.I();var d=!1;o=[];for(var p=0;p<r;p++)o[p]=!1;var g=new u.h;for(p=0;p<r;p++)a.D(p,g),l.contains(g)&&(d=!0,o[p]=!0);if(!d)return a;for(l=a.Ia(),p=0;p<r;p++)o[p]||l.Fd(a,p,p+1);return l},c.mU=function(a,r,o){var l=a.ub(0),d=a.I(),p=r.D(),g=new u.h,v=!1;r=[];for(var w=0;w<d;w++)r[w]=!1;for(o=(w=o*Math.sqrt(2)*1.00001)*w,w=0;w<d;w++)l.tc(2*w,g),u.h.yc(g,p)<=o&&(v=!0,r[w]=!0);if(!v)return a;for(l=a.Ia(),w=0;w<d;w++)r[w]||l.Fd(a,w,w+1);return l},c.KV=function(a,r,o,l,d){var p=new u.Fh;a.bn(p);var g=new u.l;return r.A(g),p.Zb(g),p.W(.1*p.R(),.1*p.ca()),(g=new u.Da).ad(p,!1),o==1736?g.add(r,!0):g.ad(r,!0),u.Xj.local().V(a,g,l,d)},c.instance=null,c}(u.Je);u.kp=A}(V||(V={})),function(u){var A=function(){function b(c,a,r,o){this.ts=a==null,this.ya=-1,this.Rd=c,this.$z=r,this.wT=a.next(),this.Ub=o}return b.prototype.next=function(){return this.ts?null:(c=this.Rd.next())!=null?(this.ya=this.Rd.La(),u.kp.im(c,this.wT,this.$z,this.Ub)):null;var c},b.prototype.La=function(){return this.ya},b.prototype.qe=function(){},b}();u.qL=A}(V||(V={})),function(u){var A=function(){function c(a){this.nd=a,this.Bj=new u.l,this.Bj.Oa(),this.oh=new u.l,this.oh.Oa()}return c.prototype.Nt=function(){var a=this.Bj.v;this.Bj.v=this.oh.v,this.oh.v=a,a=this.Bj.C,this.Bj.C=this.oh.C,this.oh.C=a,a=this.Bj.G,this.Bj.G=this.oh.G,this.oh.G=a,a=this.Bj.H,this.Bj.H=this.oh.H,this.oh.H=a},c.prototype.eQ=function(a,r){if(this.nd!=null&&!this.nd.progress(-1,-1))throw u.i.fu("user_canceled");var o=!this.Bj.isIntersecting(this.oh);return u.aa.Hc(a.getType())&&u.aa.Hc(r.getType())?a.I()>r.I()?this.gE(a,r,o):(this.Nt(),a=this.gE(r,a,o),this.Nt(),a):a.getType()==550&&u.aa.Hc(r.getType())?(a=this.hE(r,a,o),this.Nt(),a):r.getType()==550&&u.aa.Hc(a.getType())?this.hE(a,r,o):a.getType()==550&&r.getType()==550?a.I()>r.I()?this.iE(a,r):(this.Nt(),a=this.iE(r,a),this.Nt(),a):0},c.prototype.gE=function(a,r,o){var l=a.Ga(),d=r.Ga(),p=new u.l,g=new u.l,v=17976931348623157e292;if(!o&&this.pY(a,r,l,d))return 0;for(;l.$a();)for(;l.Ha();)if((a=l.ha()).A(p),!(p.px(this.oh)>v)){for(;d.$a();)for(;d.Ha();)if((r=d.ha()).A(g),p.px(g)<v&&(r=a.tb(r,o),(r*=r)<v)){if(r==0)return 0;v=r}d.Zi()}return Math.sqrt(v)},c.prototype.hE=function(a,r,o){var l=a.Ga(),d=new u.l,p=17976931348623157e292,g=new u.h,v=r.I();for(o=!o&&a.getType()==1736;l.$a();)for(;l.Ha();){var w=l.ha();if(w.A(d),!(1<v&&d.px(this.oh)>p)){for(var T=0;T<v;T++){if(r.D(T,g),o&&u.hd.Yd(a,g,0)!=0)return 0;var $=w.fe(g,!1);if(g.sub(w.hc($)),($=g.Sk())<p){if($==0)return 0;p=$}}o=!1}}return Math.sqrt(p)},c.prototype.iE=function(a,r){for(var o,l=17976931348623157e292,d=new u.h,p=new u.h,g=a.I(),v=r.I(),w=0;w<g;w++)if(a.D(w,d),!(1<v&&this.oh.iK(d)>l)){for(var T=0;T<v;T++)if(r.D(T,p),(o=u.h.yc(d,p))<l){if(o==0)return 0;l=o}}return Math.sqrt(l)},c.prototype.pY=function(a,r,o,l){if(a.getType()==1736){for(;l.$a();)if(l.Ha()){var d=l.ha();if(u.hd.Yd(a,d.wc(),0)!=0)return!0}l.Zi()}if(r.getType()==1736){for(;o.$a();)if(o.Ha()&&(a=o.ha(),u.hd.Yd(r,a.wc(),0)!=0))return!0;o.Zi()}return!1},c.prototype.gm=function(a,r){return a.B()||r.B()?NaN:(a.A(this.Bj),r.A(this.oh),this.eQ(a,r))},c}(),b=function(c){function a(){return c!==null&&c.apply(this,arguments)||this}return bt(a,c),a.prototype.V=function(r,o,l){if(r==null||o==null)throw u.i.N();if(r.B()||o.B())return NaN;var d=r.getType(),p=o.getType();if(d==33){if(p==33)return u.h.tb(r.D(),o.D());if(p==197)return l=new u.l,o.A(l),l.tb(r.D());(d=new u.de).add(r),r=d}else if(d==197){if(p==197)return p=new u.l,r.A(p),l=new u.l,o.A(l),l.tb(p);(d=new u.Da).ad(r,!1),r=d}return p==33?((p=new u.de).add(o),o=p):p==197&&((p=new u.Da).ad(o,!1),o=p),new A(l).gm(r,o)},a.local=function(){return a.instance===null&&(a.instance=new a),a.instance},a.prototype.getType=function(){return 14},a.instance=null,a}(u.Je);u.rL=b}(V||(V={})),function(u){var A=function(){function b(c,a,r,o){this.zH=c,this.DH=a,this.nd=o,this.$G=r}return b.prototype.next=function(){var c=this.zH.next();return c==null?null:this.zC(c)},b.prototype.La=function(){return this.zH.La()},b.prototype.zC=function(c){var a=c.getType();if(u.aa.Rn(a))return c;if(a==197)return(a=new u.Da(c.description)).ad(c,!1),this.zC(a);if(c.B())return c;if(c==null)throw u.i.Qa();a=c.Ia();for(var r=new u.yb,o=0,l=c.da();o<l;o++)this.TK(c,o,a,r);return a},b.prototype.TK=function(c,a,r,o){if(!(2>c.Ja(a))){var l=c.Ba(a),d=c.Vc(a)-1,p=c.ub(0),g=c.dc(a),v=new u.ia(0);v.Jb(c.Ja(a)+1);var w=new u.ia(0);for(w.Jb(c.Ja(a)+1),v.add(g?l:d),v.add(l),l=new u.h;1<v.size;){var T=v.Fc();v.If();var $=v.Fc();c.D(T,l),o.Dc(l),c.D($,l),o.Qc(l),0<=($=this.SK(o,l,p,T,$,d))?(v.add($),v.add(T)):w.add(T)}if(g||w.add(v.get(0)),w.size==v.size)r.addPath(c,a,!0);else if(2<=w.size&&(!this.$G||w.size!=2||!(g||u.h.tb(c.Na(w.get(0)),c.Na(w.get(1)))<=this.DH))){for(a=new u.Sa,o=0,d=w.size;o<d;o++)c.ve(w.get(o),a),o==0?r.nf(a):r.lineTo(a);g&&(this.$G||w.size!=2||r.lineTo(a),r.Ap())}}},b.prototype.SK=function(c,a,r,o,l,d){var p=l-1;for(l<=o&&(p=d),d=l=-1,o+=1;o<=p;o++){r.tc(2*o,a);var g=a.x,v=a.y;c.hc(c.fe(a,!1),a),a.x-=g,a.y-=v,(g=a.length())>this.DH&&g>d&&(l=o,d=g)}return l},b.prototype.qe=function(){},b}();u.sL=A}(V||(V={})),function(u){var A=function(b){function c(){return b!==null&&b.apply(this,arguments)||this}return bt(c,b),c.prototype.getType=function(){return 29},c.prototype.V=function(a,r,o,l){return a instanceof u.aa?(a=new u.Zc(a),this.V(a,r,o,l).next()):new u.sL(a,r,o,l)},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.instance=null,c}(u.Je);u.EC=A}(V||(V={})),function(u){var A=function(b){function c(){return b!==null&&b.apply(this,arguments)||this}return bt(c,b),c.prototype.getType=function(){return 21},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.V=function(a,r,o,l,d,p,g,v){return a instanceof u.aa?(v=new u.Zc(a),this.V(v,r,o,[l],d,p,!1,g).next()):g===!0?(o=new u.GC(a,r,o,l,d,!1,!1,v),u.Gh.local().V(o,r,v)):new u.GC(a,r,o,l,d,!1,!1,v)},c.instance=null,c}(u.Je);u.FC=A}(V||(V={})),function(u){var A=function(){function b(c,a,r,o,l,d,p,g){if(d)throw u.i.Ie();if(a==null)throw u.i.N();this.ya=-1,this.Ms=c,this.vg=a,this.ze=r,this.Cs=o,this.$n=l,this.eo=-1,this.Ub=g,this.uT=new u.l,this.uT.Oa()}return b.prototype.next=function(){for(var c;(c=this.Ms.next())!=null;)return this.ya=this.Ms.La(),this.eo+1<this.Cs.length&&this.eo++,this.$Q(c,this.Cs[this.eo]);return null},b.prototype.La=function(){return this.ya},b.prototype.$Q=function(c,a){return u.VK.buffer(c,this.vg,this.ze,a,this.$n,this.Ub)},b.prototype.qe=function(){},b}();u.GC=A}(V||(V={})),function(u){var A=function(b){function c(){return b!==null&&b.apply(this,arguments)||this}return bt(c,b),c.prototype.getType=function(){return 24},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.V=function(a,r,o){if(r==null)throw u.i.N();if(a.B()||1>a.Db())return 0;if(o==4)throw u.i.Ie();var l=u.cb.sc(r),d=u.cb.vv(l),p=u.cb.ev(l);d*=2-d;var g=l.Hd().ai,v=a.getType();if(v==1736||v==197)var w=a.mg();else u.aa.yd(v)?(w=new u.Ta(a.description)).oc(a,!0):w=a;if(l.Nb(r)==0){if(u.cb.Wc(r)){w=u.Hh.lj(w,r),v==1607&&w==a&&(w=u.aa.jg(a)),a=new u.Nc,u.cb.gh(r).cn(a),v=0;for(var T=w.I();v<T;v++){var $=w.Na(v);$.x=u.Hh.Zm($.x,a),w.Cb(v,$)}}a=w.Ia(),w=u.Hh.WI(r,l,w,a)?a:u.cb.zh(w,r,l)}return this.hQ(w,o,p,d,g)},c.prototype.hQ=function(a,r,o,l,d){var p=new u.ga(0),g=0;for(a=a.Ga();a.$a();)for(;a.Ha();){var v=a.ha(),w=v.ac();v=v.wc(),w.scale(d),v.scale(d),u.kb.wd(o,l,w.x,w.y,v.x,v.y,p,null,null,r),g+=p.u}return g},c.instance=null,c}(u.Je);u.vL=A}(V||(V={})),function(u){var A=function(b){function c(){return b!==null&&b.apply(this,arguments)||this}return bt(c,b),c.prototype.getType=function(){return 18},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.V=function(a,r,o,l,d){return a instanceof u.aa?(a=new u.Zc(a),this.V(a,r,o,l,d).next()):new u.uL(a,o,l,r,-1,-1,d)},c.instance=null,c}(u.Je);u.tL=A}(V||(V={})),function(u){var A=function(){function b(c,a,r,o,l,d){if(0<d||r!=4&&0<l)throw u.i.Ie();if(a==null)throw u.i.N();this.ya=-1,this.Ms=c,this.vg=a,this.ze=r,this.DT=o,this.CT=l}return b.prototype.next=function(){for(var c;(c=this.Ms.next())!=null;)return this.ya=this.Ms.La(),this.Zy(c);return null},b.prototype.La=function(){return this.ya},b.prototype.Zy=function(c){return u.cj.Qr(c,this.vg,this.ze,this.DT,this.CT,this.Ub)},b.prototype.qe=function(){},b}();u.uL=A}(V||(V={})),function(u){(function(A){A[A.Unknown=0]="Unknown",A[A.Contains=1]="Contains",A[A.Within=2]="Within",A[A.Equals=3]="Equals",A[A.Disjoint=4]="Disjoint",A[A.Touches=8]="Touches",A[A.Crosses=16]="Crosses",A[A.Overlaps=32]="Overlaps",A[A.NoThisRelation=64]="NoThisRelation",A[A.Intersects=1073741824]="Intersects",A[A.IntersectsOrDisjoint=1073741828]="IntersectsOrDisjoint"})(u.cL||(u.cL={})),u.wL=function(){function A(){}return A.nW=function(b,c){var a=b.getType(),r=c.getType();if(u.aa.xj(a)){var o=b.Bb;if(o!=null&&(o=o.Fk)!=null){if(r==33){var l=c.D();o=o.So(l.x,l.y)}else l=new u.l,c.A(l),o=o.Ro(l);if(o==1)return 1;if(o==0)return 4}}if(u.aa.xj(r)&&(o=c.Bb)!=null&&(o=o.Fk)!=null){if(a==33?(b=b.D(),o=o.So(b.x,b.y)):(c=new u.l,b.A(c),o=o.Ro(c)),o==1)return 2;if(o==0)return 4}return 0},A}()}(V||(V={})),function(u){var A=function(b){function c(){return b!==null&&b.apply(this,arguments)||this}return bt(c,b),c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.getType=function(){return 15},c.prototype.V=function(a,r,o,l,d){return a instanceof u.aa?(a=new u.Zc(a),r=new u.Zc(r),this.V(a,r,o,l,d===void 0?-1:d).next()):d===void 0?new u.HC(a,r,o,l,-1):new u.HC(a,r,o,l,d)},c.prototype.wn=function(a,r,o){this.Iu(a)&&(r=u.ta.kj(r,a,!1),a.fj(o)||a.lu(r,o))},c.prototype.Iu=function(a){return u.Nx.zE(a)},c.instance=null,c}(u.Je);u.Xj=A}(V||(V={})),function(u){var A=function(){function b(c,a,r,o,l){if(this.ts=a==null,this.ya=-1,this.Rd=c,this.vg=r,this.Se=a.next(),this.Dj=this.Se.getType(),this.Ub=o,this.Fi=l,this.Fi!=-1&&(0>=this.Fi||7<this.Fi))throw u.i.N("bad dimension mask")}return b.prototype.next=function(){if(this.ts)return null;if(this.zw!=null){var c=this.zw.next();if(c!=null)return c;this.zw=null}for(;(c=this.Rd.next())!=null;)return this.ya=this.Rd.La(),this.Fi==-1?c=this.Ea(c):(this.zw=this.PS(c),c=this.zw.next()),c;return null},b.prototype.La=function(){return this.ya},b.prototype.Ea=function(c){var a=this.zK(c);if(a!=null)return a;a=u.ta.mv(this.Se,c);var r=u.ta.Wd(this.vg,a,!0);a=new u.l,this.Se.A(a);var o=new u.l;return c.A(o),a.W(2*r,2*r),a.Ea(o),a.W(100*r,100*r),r=u.Ud.clip(this.Se,a,0,0),c=u.Ud.clip(c,a,0,0),u.Fg.Av(c,r,this.vg,this.Ub)},b.prototype.QI=function(c,a,r){var o=0;if(1&a)r[0]==null&&(r[0]=new u.de(c)),o++;else for(var l=0;l<r.length-1;l++)r[l]=r[l+1];if(2&a)r[o]==null&&(r[o]=new u.Ta(c)),o++;else for(l=o;l<r.length-1;l++)r[l]=r[l+1];if(4&a)r[o]==null&&(r[o]=new u.Da(c)),o++;else for(l=o;l<r.length-1;l++)r[l]=r[l+1];if(o!=3){for(c=[],l=0;l<o;l++)c[l]=r[l];return new u.Zc(c)}return new u.Zc(r)},b.prototype.PS=function(c){var a=this.zK(c);if(a!=null){var r=[null,null,null];return r[a.Db()]=a,this.QI(c.description,this.Fi,r)}a=u.ta.mv(this.Se,c),r=u.ta.Wd(this.vg,a,!0),a=new u.l,this.Se.A(a),a.W(2*r,2*r);var o=new u.l;return c.A(o),a.Ea(o),a.W(100*r,100*r),r=u.Ud.clip(this.Se,a,0,0),a=u.Ud.clip(c,a,0,0),r=u.Fg.Pz(a,r,this.vg,this.Ub),this.QI(c.description,this.Fi,r)},b.prototype.zK=function(c){var a=u.ta.mv(c,this.Se),r=u.ta.Wd(this.vg,a,!0);a=c.getType();var o=c.B(),l=this.Se.B();if(!(l=o||l)){l=new u.l,c.A(l);var d=new u.l;this.Se.A(d),d.W(2*r,2*r),l=!l.isIntersecting(d)}if(!l)if((d=u.wL.nW(this.Se,c))==4)l=!0;else{if(2&d)return this.Se;if(1&d)return c}if(l)return(r=u.aa.tf(a))<(l=u.aa.tf(this.Dj))?b.HB(c,o):r>l||r==0&&a==550&&this.Dj==33?this.nJ():b.HB(c,o);if((this.Fi==-1||this.Fi==4)&&a==197&&this.Dj==197)return r=this.Se,a=new u.l,c.A(a),o=new u.l,r.A(o),a.Ea(o),r=new u.Fh,c.copyTo(r),r.Xo(a),r;if(a==197&&u.aa.tf(this.Dj)==0||this.Dj==197&&u.aa.tf(a)==0)return o=a==197?c:this.Se,c=a==197?this.Se:c,a=new u.l,o.A(a),u.Ud.clip(c,a,r,0);if(u.aa.tf(a)==0&&0<u.aa.tf(this.Dj)||0<u.aa.tf(a)&&u.aa.tf(this.Dj)==0){if(r=u.ta.kj(this.vg,c,!1),a==550||a==33)return u.Fg.zG(c,this.Se,r);if(this.Dj==550||this.Dj==33)return u.Fg.zG(this.Se,c,r);throw u.i.Qa()}return this.Fi!=-1&&this.Fi!=2||a!=1607||this.Dj!=1736?this.Fi!=-1&&this.Fi!=2||a!=1736||this.Dj!=1607?null:this.wK(this.Se,c):this.wK(c,this.Se)},b.prototype.wK=function(c,a){var r=c,o=a,l=u.ta.kj(this.vg,a,!1),d=new u.l;o.A(d);var p=new u.l;r.A(p),p.W(2*l,2*l),d.Ea(p),d.W(10*l,10*l),r=c=u.Ud.clip(c,d,0,0),p=new u.ia(0);var g=-1,v=o.Bb;if(v!=null){var w=v.Fk;if(w!=null){g=0,p.Jb(r.I()+r.da());for(var T=new u.l,$=r.Ga();$.$a();)for(;$.Ha();){$.ha().A(T);var C=w.Ro(T);C==1?p.add(1):C==0?p.add(0):(p.add(-1),g++)}}}if(5<a.I()&&(v=(o=a=u.Ud.clip(a,d,0,0)).Bb),0>g&&(g=r.yz()),d=r.I()+o.I(),g*o.I()>Math.log(d)*d*4)return null;d=null,g=o.Ga(),v!=null&&v.Fb!=null&&(d=v.Fb),d==null&&20<o.I()&&(d=u.ta.nE(o)),c=c.Ia(),o=null,v=r.Ga(),w=[0,0,0,0,0,0,0,0,0],T=new u.be(0),$=new u.ig,C=-1;for(var O=0,N=0,R=0<p.size,F=-1;v.$a();){F=v.gb;var G=0;for(C=-1,O=0;v.Ha();){var z=R?u.O.truncate(p.get(N)):-1;N++;var B=v.ha();if(0>z){if(d!=null)for(o==null?o=d.vR(B,l):o.Uo(B,l),z=o.next();z!=-1;z=o.next()){g.Vb(d.ja(z)),z=g.ha();var q=B.Ea(z,null,w,null,l);for(z=0;z<q;z++)T.add(w[z])}else for(g.Zi();g.$a();)for(;g.Ha();)for(z=g.ha(),q=B.Ea(z,null,w,null,l),z=0;z<q;z++)T.add(w[z]);if(0<T.size){T.Vd(0,T.size,function(we,me){return we-me});var K=0;T.add(1),q=-1,z=0;for(var ee=T.size;z<ee;z++){var oe=T.get(z);if(oe!=K){var ue=!1;if(K!=0||oe!=1?(B.ah(K,oe,$),K=$.get()):(K=B,ue=!0),2<=G){if(c.Dr(r,F,C,O,G==3),this.QD(a,K.ac(),l)!=1&&this.RD(a,K,l)!=1)return null;c.oc(K,!1),G=1,O=0}else switch(q=this.RD(a,K,l),q){case 1:ue?2>G?(C=v.wb()-r.Ba(F),O=1,G=G==0?3:2):O++:(c.oc(K,G==0),G=1);break;case 0:G=0,C=-1,O=0;break;default:return null}K=oe}}}else{if(0>(z=this.QD(a,B.ac(),l)))return null;z==1?(2>G&&(C=v.wb()-r.Ba(F),G=G==0?3:2),O++):(C=-1,O=0)}T.clear(!1)}else z!=0&&z==1&&(G==0?(G=3,C=v.wb()-r.Ba(F)):G==1?(G=2,C=v.wb()-r.Ba(F)):O++)}2<=G&&(c.Dr(r,F,C,O,G==3),C=-1)}return c},b.prototype.QD=function(c,a,r){return u.Dg.wm(c,a,r)},b.prototype.RD=function(c,a,r){var o=a.ac();a=a.wc();var l=u.Dg.wm(c,o,r),d=u.Dg.wm(c,a,r);return l==1&&d==0||l==0&&d==1?-1:l==0||d==0?0:l==1||d==1?1:((l=new u.h).add(o,a),l.scale(.5),(c=u.Dg.wm(c,l,r))==0?0:c==1?1:-1)},b.HB=function(c,a){return a?c:c.Ia()},b.prototype.nJ=function(){return this.yH==null&&(this.yH=this.Se.Ia()),this.yH},b.prototype.qe=function(){},b}();u.HC=A}(V||(V={})),function(u){var A=function(b){function c(){return b!==null&&b.apply(this,arguments)||this}return bt(c,b),c.prototype.getType=function(){return 28},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.V=function(a,r,o,l,d,p,g){return a instanceof u.aa?(a=new u.Zc(a),this.V(a,r,o,l,d,p,g).next()):new u.xL(a,r,o,l,d,p,g)},c.instance=null,c}(u.Je);u.IC=A}(V||(V={})),function(u){var A=function(){function b(c,a,r,o,l,d,p){this.ya=-1,this.Rd=c,this.Mj=a,this.Ka=r,this.Ki=o,this.CA=l,this.uH=d,this.nd=p}return b.prototype.next=function(){var c=this.Rd.next();return c!=null?(this.ya=this.Rd.La(),this.jL(c)):null},b.prototype.La=function(){return this.ya},b.prototype.jL=function(c){var a=0>=this.uH?u.ta.kj(this.Mj,c,!1):this.uH;return u.IK.V(c,this.Ka,this.Ki,this.CA,a,this.nd)},b.prototype.qe=function(){},b}();u.xL=A}(V||(V={})),function(u){var A;(A=u.NK||(u.NK={}))[A.clipToDomainOnly=1]="clipToDomainOnly",A[A.clipWithHorizon=2]="clipWithHorizon",A[A.foldAndClipWithHorizon=3]="foldAndClipWithHorizon";var b=function(c){function a(){return c!==null&&c.apply(this,arguments)||this}return bt(a,c),a.prototype.getType=function(){return 0},a.local=function(){return a.instance===null&&(a.instance=new a),a.instance},a.prototype.V=function(r,o,l){return r instanceof u.aa?(r=new u.Zc(r),this.V(r,o,l).next()):new u.yL(r,o,l)},a.prototype.transform=function(r,o,l,d){return u.bu.transform(r,o,l,d,!0)},a.prototype.Qt=function(r,o,l,d){return u.bu.Qt(r,o,l,d)},a.instance=null,a}(u.Je);u.Hx=b}(V||(V={})),function(u){var A=function(){function b(c,a,r){this.ya=-1,this.Rd=c,this.MT=a,this.nd=r}return b.prototype.next=function(){var c=this.Rd.next();return c!=null?(this.ya=this.Rd.La(),u.bu.zh(c,this.MT,this.nd)):null},b.prototype.La=function(){return this.ya},b.prototype.qe=function(){},b}();u.yL=A}(V||(V={})),function(u){var A=function(){function c(){}return c.prototype.reset=function(){this.ph=this.xk=-1,this.us=this.kq=!1},c.prototype.AQ=function(a,r,o){for(a.Vb(r,o);a.Ha();){var l=a.ha();if((l=l.Qb())!=0)return a.wb()}for(a.Vb(r,o);a.Ez();)if((l=(l=a.li()).Qb())!=0)return a.wb();return-1},c.prototype.BQ=function(a,r){for(a.Vb(r,-1);a.Ez();)if(a.li().Qb()!=0)return a.wb();return-1},c.prototype.zQ=function(a,r){for(a.Vb(r,-1),a.ha();a.Ha();)if(a.ha().Qb()!=0)return a.wb();return-1},c.prototype.yQ=function(a,r,o,l){if(this.xk=this.AQ(r,o,l),this.xk!=-1){r.Vb(this.xk,-1);var d=r.ha(),p=d.hc(d.fe(a,!1));if(o=u.h.yc(p,a),(l=new u.h).L(p),l.sub(d.ac()),(p=new u.h).L(a),p.sub(d.ac()),this.kq=0>l.wi(p),this.ph=this.zQ(r,this.xk),this.ph!=-1){r.Vb(this.ph,-1);var g=(d=r.ha()).fe(a,!1);g=d.hc(g);var v=u.h.yc(g,a);v>o?this.ph=-1:(l.L(g),l.sub(d.ac()),p.L(a),p.sub(d.ac()),this.us=0>l.wi(p))}this.ph==-1&&(this.ph=this.BQ(r,this.xk),this.ph!=-1&&(r.Vb(this.ph,-1),g=(d=r.ha()).fe(a,!1),g=d.hc(g),(v=u.h.yc(g,a))>o?this.ph=-1:(l.L(g),l.sub(d.ac()),p.L(a),p.sub(d.ac()),this.us=0>l.wi(p),a=this.xk,this.xk=this.ph,this.ph=a,a=this.kq,this.kq=this.us,this.us=a)))}},c.prototype.cO=function(a,r,o,l,d){return o=o.Ga(),this.yQ(a,o,l,d),this.xk!=-1&&this.ph==-1?this.kq:this.xk!=-1&&this.ph!=-1?this.kq==this.us?this.kq:(o.Vb(this.xk,-1),a=o.ha().kg(),o.Vb(this.ph,-1),r=o.ha().kg(),0<=a.wi(r)):r},c}(),b=function(c){function a(){return c!==null&&c.apply(this,arguments)||this}return bt(a,c),a.local=function(){return a.instance===null&&(a.instance=new a),a.instance},a.prototype.getType=function(){return 3},a.prototype.nz=function(r,o,l){var d;if(d===void 0&&(d=!1),r.B())return new u.$l;o=o.D();var p=r,g=r.getType();switch(g==197&&((p=new u.Da).ad(r,!1),g=1736),g){case 33:return this.xI(p,o);case 550:return this.jI(p,o);case 1607:case 1736:return this.bU(p,o,l,d);default:throw u.i.fa("not implemented")}},a.prototype.oz=function(r,o){if(r.B())return new u.$l;o=o.D();var l=r,d=r.getType();switch(d==197&&((l=new u.Da).ad(r,!1),d=1736),d){case 33:return this.xI(l,o);case 550:case 1607:case 1736:return this.jI(l,o);default:throw u.i.fa("not implemented")}},a.prototype.pz=function(r,o,l,d){if(0>d)throw u.i.N();if(r.B())return[];o=o.D();var p=r,g=r.getType();switch(g==197&&((p=new u.Da).ad(r,!1),g=1736),g){case 33:return this.TU(p,o,l,d);case 550:case 1607:case 1736:return this.tU(p,o,l,d);default:throw u.i.fa("not implemented")}},a.prototype.bU=function(r,o,l,d){if(r.getType()==1736&&l&&(l=new u.l,r.A(l),l=u.ta.Wd(null,l,!1),(d?u.hd.Yd(r,o,0):u.hd.Yd(r,o,l))!=0)){var p=new u.$l(o,0,0);return d&&p.WJ(!0),p}var g=r.Ga();p=new u.h;for(var v=l=-1,w=17976931348623157e292,T=0;g.$a();)for(;g.Ha();){var $=g.ha();$=$.hc($.fe(o,!1));var C=u.h.yc($,o);C<w?(T=1,p=$,l=g.wb(),v=g.gb,w=C):C==w&&T++}return p=new u.$l(p,l,Math.sqrt(w)),d&&(g.Vb(l,v),$=g.ha(),d=0>u.h.Uq(o,$.ac(),$.wc()),1<T&&((T=new A).reset(),d=T.cO(o,d,r,l,v)),p.WJ(d)),p},a.prototype.xI=function(r,o){return r=r.D(),o=u.h.tb(r,o),new u.$l(r,0,o)},a.prototype.jI=function(r,o){for(var l=r.ub(0),d=r.I(),p=r=0,g=0,v=17976931348623157e292,w=0;w<d;w++){var T=new u.h;l.tc(2*w,T);var $=u.h.yc(T,o);$<v&&(p=T.x,g=T.y,r=w,v=$)}return(o=new u.$l).ey(p,g,r,Math.sqrt(v)),o},a.prototype.TU=function(r,o,l,d){return d==0?[]:(l*=l,r=r.D(),(o=u.h.yc(r,o))<=l?(l=[],(d=new u.$l).ey(r.x,r.y,0,Math.sqrt(o)),l[0]=d):l=[],l)},a.prototype.tU=function(r,o,l,d){if(d==0)return[];var p=r.ub(0),g=r.I();r=[],l*=l;for(var v=0;v<g;v++){var w=p.read(2*v),T=p.read(2*v+1),$=o.x-w,C=o.y-T;($=$*$+C*C)<=l&&((C=new u.$l).ey(w,T,v,Math.sqrt($)),r.push(C))}return o=r.length,r.sort(function(O,N){return O.Ka<N.Ka?-1:O.Ka==N.Ka?0:1}),d>=o||(r.length=d),r.slice(0)},a.instance=null,a}(u.Je);u.Ix=b}(V||(V={})),function(u){var A=function(b){function c(){return b!==null&&b.apply(this,arguments)||this}return bt(c,b),c.prototype.getType=function(){return 4},c.prototype.V=function(a,r,o,l,d){return u.am.yB(a,r,o,l,d)},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.Iu=function(a){return u.Vt.wy(a)},c.prototype.wn=function(a,r,o){u.Vt.CD(a,r,o)},c.instance=null,c}(u.Je);u.zL=A}(V||(V={})),function(u){var A=function(b){function c(){return b!==null&&b.apply(this,arguments)||this}return bt(c,b),c.prototype.getType=function(){return 33},c.prototype.V=function(a,r,o,l,d){return a===1073741824?!u.ud.zB(r,o,l,4,d):u.ud.zB(r,o,l,a,d)},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.Iu=function(a){return u.Vt.wy(a)},c.prototype.wn=function(a,r,o){u.Vt.CD(a,r,o)},c.instance=null,c}(u.Je);u.dj=A}(V||(V={})),function(u){var A=function(){function b(c,a,r,o){if(this.nd=o,this.rT=r,this.ya=-1,c==null)throw u.i.N();this.yk=c,this.Mj=a}return b.prototype.next=function(){var c;if((c=this.yk.next())!=null){if(this.ya=this.yk.La(),this.nd!=null&&!this.nd.progress(-1,-1))throw u.i.fu("user_canceled");return this.eC(c)}return null},b.prototype.La=function(){return this.ya},b.prototype.eC=function(c){if(c==null)throw u.i.N();return u.Jx.cK(c,this.Mj,this.rT,this.nd)},b.prototype.qe=function(){},b}();u.AL=A}(V||(V={})),function(u){var A=function(b){function c(){return b!==null&&b.apply(this,arguments)||this}return bt(c,b),c.prototype.getType=function(){return 26},c.prototype.V=function(a,r,o,l){return a instanceof u.aa?(a=new u.Zc(a),this.V(a,r,o,l).next()):new u.AL(a,r,o,l)},c.prototype.rs=function(a,r,o,l,d){return 0<(l!==void 0?u.Jx.rs(a,r,o,l,d):u.Jx.rs(a,r,!1,null,o))},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.instance=null,c}(u.Je);u.Yl=A}(V||(V={})),function(u){var A=function(){function d(){this.yq=0}return d.prototype.nX=function(p){this.yq&=-2,this.yq|=p?1:0},d.prototype.Wp=function(){return!!(1&this.yq)},d.prototype.XF=function(){return this.Wp()?0:1},d}();u.xY=A;var b=function(){},c=function(d,p,g,v){this.x=d,this.y=p,this.Ai=g,this.xm=v},a=function(){function d(p){this.Be=p}return d.prototype.compare=function(p,g,v){return p=p.ja(v),g=this.Be.lf.read(2*g),0>(g-=p=this.Be.lf.read(2*p))?-1:0<g?1:0},d}(),r=function(){function d(p){this.Be=p}return d.prototype.compare=function(p,g,v){g=this.Be.hb[g],p=this.Be.hb[p.ja(v)];var w=g.Wp(),T=p.Wp();v=g.ne.Pe(this.Be.Mo,0);var $=p.ne.Pe(this.Be.Mo,0);return v==$&&((w=.5*((v=Math.min(w?g.ne.na:g.ne.la,T?p.ne.na:p.ne.la))-this.Be.Mo)+this.Be.Mo)==this.Be.Mo&&(w=v),v=g.ne.Pe(w,0),$=p.ne.Pe(w,0)),v<$?-1:v>$?1:0},d}(),o=function(){function d(p,g){this.YI=new u.h,this.parent=p,this.dS=g}return d.prototype.nr=function(p,g,v){var w=this.parent,T=this.dS;v.Vd(p,g,function($,C){return w.Mh($,C,T)})},d.prototype.$p=function(p){return p=this.parent.gi.get(p),this.parent.lf.tc(2*(p>>1),this.YI),this.YI.y+(1&p?this.parent.Oj:-this.parent.Oj)},d}(),l=function(){function d(p,g,v,w,T){this.nH=p.description,this.X=p,this.Qg=g,this.Oj=u.ta.kj(this.Qg,p,!1),this.Bo=u.ta.kj(this.Qg,p,!0),this.xA=v,this.oT=this.nH.Aa,this.hb=[],this.po=[],this.mh=new u.jp,this.fb=new u.Yj,this.ke=new u.Md,this.ZG=this.ql=T}return d.prototype.eT=function(){return this.ZG=!0,(!u.aa.Hc(this.X.getType())||this.GE()&&this.DE(!1))&&this.mO()?u.aa.Hc(this.X.getType())?this.pO()?this.X.getType()==1607?this.rO()?2:0:this.sO()?this.tO():0:0:2:0},d.prototype.kC=function(p,g){var v=this.lf.read(2*p);p=this.lf.read(2*p+1);var w=this.lf.read(2*g);g=this.lf.read(2*g+1);var T=!u.Yt.Cv(v,p,w,g,this.Oj*this.Oj);return T||this.X.Db()!=0&&v==w&&p==g},d.prototype.GE=function(){for(var p=this.X,g=p.xf?3:2,v=0,w=p.da();v<w;v++)if(p.Ja(v)<g)return this.ke=new u.Md(1,v,0),!1;return!0},d.prototype.DE=function(p){var g=this.X,v=g.Ga(),w=g.hasAttribute(1);for(g=w?u.ta.wE(this.Qg,g,!1):0;v.$a();)for(;v.Ha();){var T=v.ha();if(!(T.Qb()>this.Oj)){if(p&&w){var $=T.wv(1,0);if(T=T.wv(1,0),Math.abs(T-$)>g)continue}return this.ke=new u.Md(2,v.wb(),-1),!1}}return!0},d.prototype.mO=function(){var p=this.X,g=null;u.aa.Hc(this.X.getType())&&(g=this.X);var v=(this.ZG||this.ql)&&g!=null,w=p.I();this.lf=p.ub(0),this.gi=new u.ia(0),this.gi.Jb(2*w),this.fi=new u.ia(0),this.fi.Jb(2*w),v&&(this.Fl==null&&(this.Fl=new u.ia(0)),this.Fl.Jb(w));for(var T=p=0;T<w;T++)if(this.gi.add(2*T),this.gi.add(2*T+1),this.fi.add(2*T),this.fi.add(2*T+1),v){for(;T>=g.Vc(p);)p++;this.Fl.add(p)}for(new u.Xt().sort(this.fi,0,2*w,new o(this,v)),this.fb.clear(),this.fb.Vo(new a(this)),this.fb.De(w),g=0,w*=2;g<w;g++)if(v=this.fi.get(g),v=(p=this.gi.get(v))>>1,1&p){if(p=this.fb.search(v,-1),T=this.fb.we(p),$=this.fb.lb(p),this.fb.vd(p,-1),T!=-1&&$!=-1&&!this.kC(this.fb.ja(T),this.fb.ja($)))return this.ke=new u.Md(3,this.fb.ja(T),this.fb.ja($)),!1}else{if(p=this.fb.addElement(v,-1),(T=this.fb.we(p))!=-1&&!this.kC(this.fb.ja(T),v))return this.ke=new u.Md(3,v,this.fb.ja(T)),!1;var $=this.fb.lb(p);if($!=-1&&!this.kC(this.fb.ja($),v))return this.ke=new u.Md(3,v,this.fb.ja($)),!1}return!0},d.prototype.pO=function(){return 10>this.X.I()?this.nO():this.oO()},d.prototype.oO=function(){var p=new u.gd;p.Ib(this.X);var g=new u.Md;return!u.$t.kI(!1,p,this.Oj,g,this.nd)||(g.Jo=p.Ua(g.Jo),g.Ko=p.Ua(g.Ko),this.ke.Wt(g),!1)},d.prototype.nO=function(){var p=this.X,g=p.Ga();for(p=p.Ga();g.$a();)for(;g.Ha();){var v=g.ha();if(!g.Qn()||!g.$S()){p.BW(g);do for(;p.Ha();){var w=p.ha();if((w=v.zr(w,this.Oj,!0))!=0)return this.ke=new u.Md(w==2?5:4,g.wb(),p.wb()),!1}while(p.$a())}}return!0},d.prototype.sO=function(){var p=this.X;this.hb.length=0,this.po.length=0,this.Zf=p.Ga(),this.Zf.JB();var g=new u.ia(0);g.Jb(10);var v=NaN,w=0,T=0;for(p=2*p.I();T<p;T++){var $=this.fi.get(T);if(!(1&($=this.gi.get($)))){$>>=1;var C=this.lf.read(2*$),O=this.lf.read(2*$+1);if(g.size!=0&&(C!=v||O!=w)){if(!this.RI(g))return!1;g!=null&&g.clear(!1)}g.add($),v=C,w=O}}return!!this.RI(g)},d.prototype.rO=function(){for(var p=this.X,g=Array(p.da()),v=0,w=p.da();v<w;v++)g[v]=p.Nn(v);w=new b;var T=new u.h;v=this.fi.get(0);var $=(v=this.gi.get(v))>>1;this.lf.tc(2*$,T);var C=g[v=this.Fl.get($)],O=p.Ba(v),N=p.Vc(v)-1;w.el=$==O||$==N,w.ny=this.ql?!C&&w.el:w.el,w.Ai=v,w.x=T.x,w.y=T.y,w.xm=$;for(var R=new b,F=1,G=this.fi.size;F<G;F++)if(v=this.fi.get(F),!(1&(v=this.gi.get(v)))){$=v>>1,this.lf.tc(2*$,T),(v=this.Fl.get($))!=w.Ai&&(C=g[v],O=p.Ba(v),N=p.Vc(v)-1);var z=$==O||$==N,B=this.ql?!C&&w.el:w.el;if(R.x=T.x,R.y=T.y,R.Ai=v,R.xm=$,R.ny=B,R.el=z,R.x==w.x&&R.y==w.y){if(this.ql){if(!(R.ny&&w.ny||R.Ai==w.Ai&&(R.el||w.el)))return this.ke=new u.Md(8,R.xm,w.xm),!1}else if(!R.el||!w.el)return this.ke=new u.Md(5,R.xm,w.xm),!1}v=w,w=R,R=v}return!0},d.prototype.JE=function(){for(var p=this.X,g=[],v=-1,w=!1,T=0,$=p.da();T<$;T++)p.Ev(T)&&(w=!1,v++,T<$-1&&(p.Ev(T+1)||(w=!0))),g[T]=w?v:-1;w=new u.h,T=this.fi.get(0);var C=(T=this.gi.get(T))>>1;this.lf.tc(2*C,w),T=this.Fl.get(C),v=new c(w.x,w.y,T,C,g[T]),p=[];var O=1;for($=this.fi.size;O<$;O++)if(T=this.fi.get(O),!(1&(T=this.gi.get(T)))){if(C=T>>1,this.lf.tc(2*C,w),T=this.Fl.get(C),(T=new c(w.x,w.y,T,C,g[T])).x==v.x&&T.y==v.y){if(T.Ai==v.Ai)return this.ke=new u.Md(9,T.xm,v.xm),!1;0<=g[T.Ai]&&g[T.Ai]==g[v.Ai]&&(p.length!=0&&p[p.length-1]==v||p.push(v),p.push(T))}v=T}if(p.length==0)return!0;for(T=new u.jp(!0),u.O.$u(g,-1),w=-1,(O=new u.h).Rc(),v=0,$=p.length;v<$;v++){(C=p[v]).x==O.x&&C.y==O.y||(w=T.Ph(0),O.x=C.x,O.y=C.y);var N=g[C.Ai];N==-1&&(N=T.Ph(2),g[C.Ai]=N),T.addElement(N,w),T.addElement(w,N)}for(($=new u.ia(0)).Jb(10),v=T.je;v!=-1;v=T.qz(v))if(!(1&(p=T.PF(v)))&&2&p){for(p=-1,$.add(v),$.add(-1);0<$.size;){if(w=$.Fc(),$.If(),O=$.Fc(),$.If(),1&(C=T.PF(O))){p=2&C?O:w;break}for(T.fX(O,1|C),C=T.rc(O);C!=-1;C=T.lb(C))(N=T.getData(C))!=w&&($.add(N),$.add(O))}if(p!=-1){for(T=-1,v=0,$=g.length;v<$;v++)if(g[v]==p){T=v;break}return this.ke=new u.Md(10,T,-1),!1}}return!0},d.prototype.tO=function(){var p=this.X;if(0>=p.Ke())return this.ke=new u.Md(6,p.da()==1?1:-1,-1),0;if(p.da()==1)return this.ql&&!this.JE()?0:2;this.to=u.ia.qf(p.da(),0),this.JA=u.ia.qf(p.da(),-1);for(var g=-1,v=0,w=0,T=p.da();w<T;w++){var $=p.Ir(w);if(this.to.write(w,0>$?0:256),0<$)g=w,v=$;else{if($==0)return this.ke=new u.Md(6,w,-1),0;if((0>g||v<Math.abs($))&&(this.ke=new u.Md(7,w,-1),this.ql))return 0;this.JA.write(w,g)}}for(this.dt=p.da(),this.Om=new u.ia(0),this.Om.Jb(10),T=p.I(),this.Mo=NaN,(p=new u.ia(0)).Jb(10),this.Qq=u.ia.qf(T,-1),this.Hw=u.ia.qf(T,-1),this.zj!=null?this.zj.clear(!1):this.zj=new u.ia(0),this.zj.Jb(10),this.fb.clear(),this.fb.Vo(new r(this)),g=0,T*=2;0<this.dt&&g<T;g++)if(v=this.fi.get(g),!(1&(v=this.gi.get(v)))){if(v>>=1,(w=this.lf.read(2*v+1))!=this.Mo&&p.size!=0){if(!this.ut(p))return 0;p!=null&&p.clear(!1)}p.add(v),this.Mo=w}return 0<this.dt&&!this.ut(p)?0:this.ql?this.ke.Jj==0&&this.JE()?2:0:this.ke.Jj==0?2:1},d.prototype.RI=function(p){if(p.size==1)return!0;for(var g=0,v=p.size;g<v;g++){var w=p.get(g);this.Zf.Vb(w);var T=this.Zf.li();this.hb.push(this.Su(T,w,this.Zf.gb,!0)),this.Zf.ha(),T=this.Zf.ha(),this.hb.push(this.Su(T,w,this.Zf.gb,!1))}var $=this;for(this.hb.sort(function(N,R){return $.XP(N,R)}),(w=this.mh.je)==-1&&(w=this.mh.Ph(0)),this.mh.fn(this.hb.length),g=0,v=this.hb.length;g<v;g++)this.mh.addElement(w,g);g=!0;for(var C=v=-1;g&&(g=!1,(T=this.mh.rc(w))!=-1);)for(var O=this.mh.lb(T);O!=-1;)if(v=this.mh.getData(T),C=this.mh.getData(O),(v=this.hb[v].Io)!=(C=this.hb[C].Io))T=O,O=this.mh.lb(T);else if(g=!0,this.mh.jd(w,T),T=this.mh.we(O),(O=this.mh.jd(w,O))==-1||T==-1)break;if(g=this.mh.bs(w),this.mh.LE(w),0<g)return this.ke=new u.Md(5,v,C),!1;for(g=0,v=p.size;g<v;g++)this.vB(this.hb[g]);return this.hb.length=0,!0},d.prototype.ut=function(p){for(var g=0,v=p.size;g<v;g++){var w=p.get(g),T=this.Qq.read(w);if(T!=-1){var $=this.fb.ja(T);this.zj.add($),this.fb.vd(T,-1),this.vB(this.hb[$]),this.hb[$]=null,this.Qq.write(w,-1)}(T=this.Hw.read(w))!=-1&&($=this.fb.ja(T),this.zj.add($),this.fb.vd(T,-1),this.vB(this.hb[$]),this.hb[$]=null,this.Hw.write(w,-1))}for(g=0,v=p.size;g<v;g++){if(w=p.get(g),this.Zf.Vb(w),(T=this.Zf.li()).na>T.la){var C=this.Zf.wb(),O=this.Su(T,w,this.Zf.gb,!0);0<this.zj.size?($=this.zj.Fc(),this.zj.If(),this.hb[$]=O):($=this.hb.length,this.hb.push(O)),T=this.fb.addElement($,-1),this.Qq.read(C)==-1?this.Qq.write(C,T):this.Hw.write(C,T),!(3&this.to.read(this.Zf.gb))&&this.Om.add(T)}this.Zf.ha(),(T=this.Zf.ha()).na<T.la&&(C=this.Zf.ik(),O=this.Su(T,w,this.Zf.gb,!1),0<this.zj.size?($=this.zj.Fc(),this.zj.If(),this.hb[$]=O):($=this.hb.length,this.hb.push(O)),T=this.fb.addElement($,-1),this.Qq.read(C)==-1?this.Qq.write(C,T):this.Hw.write(C,T),!(3&this.to.read(this.Zf.gb))&&this.Om.add(T))}for(g=0,v=this.Om.size;g<v&&0<this.dt;g++)if(T=this.Om.get(g),!(3&this.to.read(this.hb[this.fb.ja(T)].IA))){p=-1,w=this.fb.we(T);var N=T;O=null,$=-1;for(var R=0;w!=-1&&($=this.fb.ja(w),$=(O=this.hb[$]).IA,!(3&(R=this.to.read($))));)N=w,w=this.fb.we(w);w==-1?(C=1,w=N):(p=(3&R)==1?$:this.JA.read($),C=O.XF()!=0?0:1,w=this.fb.lb(w));do{if($=this.fb.ja(w),$=(O=this.hb[$]).IA,!(3&(N=this.to.read($)))){if(C!=O.XF())return this.ke=new u.Md(6,$,-1),!1;if(N=252&N|(R=C==0||O.Wp()?2:1),this.to.write($,R),R==2&&this.ke.Jj==0&&this.JA.read($)!=p&&(this.ke=new u.Md(7,$,-1),this.ql))return!1;if(this.dt--,this.dt==0)return!0}(3&N)==1&&(p=$),N=w,w=this.fb.lb(w),C=C!=0?0:1}while(N!=T)}return this.Om!=null?this.Om.clear(!1):this.Om=new u.ia(0),!0},d.prototype.Su=function(p,g,v,w){if(p.getType()!=322)throw u.i.Qa();return(p=this.sP(p)).Io=g,p.IA=v,p.yq=0,p.nX(w),p},d.prototype.sP=function(p){if(0<this.po.length){var g=this.po[this.po.length-1];--this.po.length,p.copyTo(g.ne)}else(g=new A).ne=u.SC.jg(p);return g},d.prototype.vB=function(p){p.ne.getType()==322&&this.po.push(p)},d.prototype.kU=function(){for(var p=this.X.I(),g=new u.ia(0),v=0;v<p;v++)g.add(v);var w=this;for(g.Vd(0,p,function(T,$){return w.Ou(T,$)}),v=1;v<p;v++)if(this.Ou(g.get(v-1),g.get(v))==0)return this.ke=new u.Md(3,g.get(v-1),g.get(v)),0;return 2},d.prototype.JV=function(){return this.GE()&&this.DE(!0)?2:0},d.prototype.oV=function(){return this.eT()},d.prototype.pU=function(){for(var p=this.X.I(),g=new u.ia(0),v=0;v<p;v++)g.add(v);var w=this;g.Vd(0,p,function(N,R){return w.PO(N,R)});var T=Array(p);for(u.O.$u(T,!1),T[g.get(0)]=!0,v=1;v<p;v++){var $=g.get(v-1),C=g.get(v);this.Ou($,C)==0?T[C]=!1:T[C]=!0}g=this.X.Ia(),$=this.X,C=0;var O=1;for(v=0;v<p;v++)T[v]?O=v+1:(C<O&&g.Fd($,C,O),C=v+1);return C<O&&g.Fd($,C,O),g.Ch(2,this.Bo),g},d.prototype.NV=function(){var p=this.X,g=p.Ga(),v=p.Ga(),w=this.X.Ia(),T=this.X,$=p.hasAttribute(1),C=$?u.ta.wE(this.Qg,p,!0):0,O=new u.ia(0),N=new u.ia(0);for(O.Jb(u.O.truncate(p.I()/2+1)),N.Jb(u.O.truncate(p.I()/2+1));g.$a();)if(v.$a(),!(2>p.Ja(g.gb))){v.EW();for(var R,F,G=!0;g.Ha();){var z=g.ha(),B=v.li();if(g.wb()>v.wb())break;G&&(O.add(g.wb()),N.add(v.ik()),G=!1),F=O.Fc();var q=g.ik();if(1<q-F){var K=new u.h;K.uc(p.Na(F),p.Na(q)),R=K.length()}else R=z.Qb();F=N.Fc(),1<(q=v.wb())-F?((K=new u.h).uc(p.Na(F),p.Na(q)),F=K.length()):F=B.Qb(),R>this.Bo?O.add(g.ik()):$&&(R=p.Uc(1,O.Fc(),0),z=z.gv(1,0),Math.abs(z-R)>C&&O.add(g.ik())),F>this.Bo?N.add(v.wb()):$&&(R=p.Uc(1,N.Fc(),0),z=B.gv(1,0),Math.abs(z-R)>C&&N.add(v.wb()))}if(O.Fc()<N.Fc()?O.size>N.size?O.If():N.If():(O.Fc()!=N.Fc()&&N.If(),N.If()),2<=N.size+O.size){for(G=new u.Sa,B=0,z=O.size;B<z;B++)T.ve(O.get(B),G),B==0?w.nf(G):w.lineTo(G);for(B=N.size-1;0<B;B--)T.ve(N.get(B),G),w.lineTo(G);T.dc(g.gb)?w.Ap():0<N.size&&(T.ve(N.get(0),G),w.lineTo(G))}O!=null&&O.clear(!1),N!=null&&N.clear(!1)}return w.Ch(2,this.Bo),w},d.prototype.rV=function(){return this.DX()},d.prototype.DX=function(){return this.X.getType()==1736&&this.X.In()==1?u.Fg.Mk(this.X,this.Bo,!0,!1,this.nd):(this.Hi=new u.gd,this.Hi.Ib(this.X),this.Hi.fd!=0&&(this.xA!=1&&u.Tk.V(this.Hi,this.Bo,this.nd,!0),this.X.getType()==1736&&u.rn.V(this.Hi,this.Hi.ld,this.xA,!1,this.nd)),this.X=this.Hi.Ne(this.Hi.ld),this.X.getType()==1736&&(this.X.fm(),this.X.Yo(0)),this.X.Ch(2,this.Bo),this.X)},d.rs=function(p,g,v,w,T){if(w!=null&&(w.Jj=0,w.Jo=-1,w.Ko=-1),p.B())return 1;var $=p.getType();if($==33)return 1;var C=u.ta.kj(g,p,!1);if($==197)return g=new u.l,p.A(g),g.Bi(C)?(w!=null&&(w.Jj=2,w.Jo=-1,w.Ko=-1),0):1;if(u.aa.yd($))return(C=new u.Ta(p.description)).oc(p,!0),d.rs(C,g,v,w,T);var O=p.om(C);if((v=v?-1:O)!=-1)return v;if(g=new d(p,g,v,T,!1),$==550)v=g.kU();else if($==1607)v=g.JV();else{if($!=1736)throw u.i.Qa();v=g.oV()}return p.Ch(v,C),w!=null&&v==0&&w.Wt(g.ke),v},d.cK=function(p,g,v,w){if(p.B())return p;var T=p.getType();if(T==33)return p;var $=u.ta.kj(g,p,!1);if(T==197)return g=new u.l,p.A(g),g.Bi($)?p.Ia():p;if(u.aa.yd(T))return(T=new u.Ta(p.description)).oc(p,!0),d.cK(T,g,v,w);if($=p.om($),(v=v?-1:$)==2)return p;if(p=new d(p,g,v,w,!1),T==550)p=p.pU();else if(T==1607)p=p.NV();else{if(T!=1736)throw u.i.Qa();p=p.rV()}return p},d.prototype.Mh=function(p,g,v){if(p==g)return 0;p=this.gi.get(p);var w=this.gi.get(g);g=p>>1;var T=w>>1,$=new u.h,C=new u.h;return this.lf.tc(2*g,$),$.y+=1&p?this.Oj:-this.Oj,this.lf.tc(2*T,C),C.y+=1&w?this.Oj:-this.Oj,(p=$.compare(C))==0&&v?0>(v=this.Fl.get(g)-this.Fl.get(T))?-1:0<v?1:0:p},d.prototype.Ou=function(p,g){if(p==g)return 0;var v=this.X,w=v.Na(p),T=v.Na(g);if(w.x<T.x)return-1;if(w.x>T.x)return 1;if(w.y<T.y)return-1;if(w.y>T.y)return 1;for(w=1;w<this.oT;w++){T=this.nH.kd(w);for(var $=u.ra.Va(T),C=0;C<$;C++){var O=v.Uc(T,p,C),N=v.Uc(T,g,C);if(O<N)return-1;if(O>N)return 1}}return 0},d.prototype.PO=function(p,g){var v=this.Ou(p,g);return v==0?p<g?-1:1:v},d.prototype.XP=function(p,g){if(p===g)return 0;var v=p.ne.kg();p.Wp()&&v.Sq(),p=g.ne.kg(),g.Wp()&&p.Sq(),g=v.qu();var w=p.qu();return w==g?(g=v.wi(p),Math.abs(g)<=8881784197001252e-31*(Math.abs(p.x*v.y)+Math.abs(p.y*v.x))&&(g--,g++),0>g?1:0<g?-1:0):g<w?-1:1},d}();u.Jx=l}(V||(V={})),function(u){var A=function(b){function c(){return b!==null&&b.apply(this,arguments)||this}return bt(c,b),c.prototype.getType=function(){return 30},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.V=function(a,r,o,l){return a instanceof u.aa?(a=new u.Zc(a),r=new u.Zc(r),this.V(a,r,o,l).next()):new u.BL(a,r,o,l)},c.ep=function(a,r,o,l){var d=a.Db(),p=r.Db();if(a.B()&&r.B())return d>p?a:r;if(a.B())return r;if(r.B())return a;var g=new u.l,v=new u.l,w=new u.l;return a.A(g),r.A(v),w.K(g),w.Zb(v),g=u.ta.Wd(o,w,!0),v=a.getType(),w=r.getType(),v==33&&w==33?c.aV(a,r,g):v!=w?0<d||0<p?d>p?a:r:v==550?c.iI(a,r,g):c.iI(r,a,g):u.Fg.ep(a,r,o,l)},c.aV=function(a,r,o){o=o*Math.sqrt(2)*1.00001,o*=o;var l=a.D(),d=r.D(),p=new u.de(a.description);return u.h.yc(l,d)>o&&(p.add(a),p.add(r)),p},c.iI=function(a,r,o){var l=a.ub(0),d=a.I(),p=r.D(),g=a.Ia();o=o*Math.sqrt(2)*1.00001;var v=new u.l;if(a.A(v),v.W(o,o),v.contains(p)){o*=o,v=!1;for(var w=[],T=0;T<d;T++)w[T]=!1;for(T=0;T<d;T++){var $=l.read(2*T),C=l.read(2*T+1);($-=p.x)*$+(C-=p.y)*C<=o&&(v=!0,w[T]=!0)}if(v)for(T=0;T<d;T++)w[T]||g.Fd(a,T,T+1);else g.Fd(a,0,d),g.add(r)}else g.Fd(a,0,d),g.add(r);return g},c.instance=null,c}(u.Je);u.Kx=A}(V||(V={})),function(u){var A=function(){function b(c,a,r,o){this.ts=a==null,this.ya=-1,this.Rd=c,this.vg=r,this.NT=a.next(),this.Ub=o}return b.prototype.next=function(){return this.ts?null:(c=this.Rd.next())!=null?(this.ya=this.Rd.La(),u.Kx.ep(c,this.NT,this.vg,this.Ub)):null;var c},b.prototype.La=function(){return this.ya},b.prototype.qe=function(){},b}();u.BL=A}(V||(V={})),function(u){var A=function(){function a(){}return a.prototype.Fz=function(){this.$y=null,this.Ax=-1,this.AK=!1},a}(),b=function(){function a(){this.Gr=0,this.pj=[]}return a.prototype.pN=function(r){this.Gr+=r.Ax,this.pj.push(r)},a.prototype.TV=function(){this.Gr-=this.pj[this.pj.length-1].Ax,--this.pj.length},a.prototype.my=function(){return this.pj[this.pj.length-1]},a.prototype.Nb=function(r){return r===this},a}(),c=function(){function a(r,o,l){this.ya=-1,this.Ic=!1,this.AH=[!1,!1,!1,!1],this.uq=[0,0,0,0],this.jA=!1,this.zk=-1,this.iq=0,this.bo=-1,this.Do=[],this.Rd=r,this.vg=o,this.Ub=l}return a.dE=function(r){var o=[],l=0;for(r=Object.keys(r);l<r.length;l++)o.push(Number(r[l]));return o.sort(function(d,p){return d-p}),o},a.prototype.fG=function(r){var o=this.Do[r],l=a.dE(o)[0],d=o[l],p=d.my().$y;return d=d.my().AK,delete o[l],d&&(p=u.Yl.local().V(p,this.vg,!1,this.Ub),r==0&&p.getType()==33&&(r=new u.de(p.description),p.B()||r.add(p),p=r)),p},a.prototype.next=function(){if(this.Ic&&this.bo==this.zk)return null;for(;!this.qK(););if(this.zk==-1)return null;if(this.jA){for(this.bo++;;){if(this.bo>this.zk||0>this.bo)throw u.i.Qa();if(this.AH[this.bo])break}return this.ya++,this.fG(this.bo)}return this.ya=0,this.bo=this.zk,this.fG(this.zk)},a.prototype.La=function(){return this.ya},a.prototype.qK=function(){if(this.Ic)return!0;var r=null;if(this.Rd!=null&&(r=this.Rd.next())==null&&(this.Ic=!0,this.Rd=null),u.mp.zp(this.Ub),r!=null){var o=r.Db();this.AH[o]=!0,o>=this.zk&&!this.jA&&(this.ND(o,!1,r),o>this.zk&&!this.jA&&this.zW(o))}if(0<this.iq)for(o=0;o<=this.zk;o++)for(;1<this.uq[o]&&(r=this.FO(o)).length!=0;)r=u.Fg.VP(r,this.vg,this.Ub),this.ND(o,!0,r);return this.Ic},a.prototype.FO=function(r){for(var o=[],l=[],d=this.Do[r],p=a.dE(d),g=0;g<p.length;g++){var v=p[g],w=d[v];if(this.Ic||1e4<w.Gr&&1<w.pj.length){for(this.uq[r]-=w.pj.length,this.iq-=w.pj.length;0<w.pj.length;)o.push(w.my().$y),w.TV();l.push(v)}}for(g=0;g<l.length;g++)delete d[l[g]];return o},a.prototype.zW=function(r){for(var o=0;o<r;o++)this.Do[o]=[],this.iq-=this.uq[o],this.uq[o]=0},a.prototype.ND=function(r,o,l){var d=new A;if(d.Fz(),d.$y=l,l=a.eS(l),d.Ax=l,l=a.cS(l),r+1>this.Do.length)for(var p=0,g=Math.max(2,r+1);p<g;p++)this.Do.push([]);(p=this.Do[r][l])===void 0&&(p=new b,this.Do[r][l]=p),d.AK=o,p.pN(d),this.uq[r]++,this.iq++,this.zk=Math.max(this.zk,r)},a.cS=function(r){return 0<r?u.O.truncate(Math.log(r)/Math.log(4)+.5):0},a.eS=function(r){var o=r.getType();if(u.aa.xj(o))return r.I();if(o==33)return 1;if(o==197)return 4;if(u.aa.yd(o))return 2;throw u.i.Qa()},a.prototype.qe=function(){this.qK()},a}();u.DL=c}(V||(V={})),function(u){var A=function(b){function c(){return b!==null&&b.apply(this,arguments)||this}return bt(c,b),c.prototype.getType=function(){return 1},c.prototype.V=function(a,r,o,l){return l===void 0?new u.DL(a,r,o):this.gQ(a,r,o,l)},c.prototype.gQ=function(a,r,o,l){return a=new u.Zc([a,r]),this.V(a,o,l).next()},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.instance=null,c}(u.Je);u.Gh=A}(V||(V={})),function(u){var A,b;(b=A||(A={}))[b.nextPath=0]="nextPath",b[b.nextSegment=1]="nextSegment",b[b.iterate=2]="iterate",A=function(){function c(a,r,o,l){this.Ts=new u.l,this.GT=a,this.HT=r,this.mq=l,this.uo=-1,this.rl=!1;var d=a.Bb;d!=null&&(d=l?d.zo:d.Fb)!=null&&(this.Ic=!1,this.qa=o,this.Fb=d,this.xw=this.Fb.getIterator(),this.nq=this.rl=!0,this.Xb=0,l?this.uo=r.da():this.sd=r.Ga()),this.rl||(d=r.Bb)!=null&&(d=l?d.zo:d.Fb)!=null&&(this.Ic=!1,this.qa=o,this.Fb=d,this.xw=this.Fb.getIterator(),this.rl=!0,this.nq=!1,this.Xb=0,l?this.uo=a.da():this.sd=a.Ga()),this.rl||(this.ci=l?u.ta.mR(a,r,o,1<=a.om(0),1<=r.om(0)):u.ta.lR(a,r,o))}return c.prototype.next=function(){if(this.rl){if(this.Ic)return!1;for(var a=!0;a;)switch(this.Xb){case 0:a=this.xU();break;case 1:a=this.yU();break;case 2:a=this.Uz();break;default:throw u.i.fa("internal error")}return!this.Ic}return this.ci!=null&&this.ci.next()},c.prototype.nl=function(){return this.rl?this.nq?this.Fb.ja(this.Fs):this.mq?this.uo:this.sd.wb():this.ci.nl(this.ci.Vf)},c.prototype.hl=function(){return this.rl?this.nq?this.mq?this.uo:this.sd.wb():this.Fb.ja(this.Fs):this.ci.hl(this.ci.Af)},c.prototype.uz=function(){if(!this.mq)throw u.i.fa("internal error");return this.rl?this.nq?this.Fb.GF(this.Fs):this.Ts:this.ci.uz(this.ci.Vf)},c.prototype.az=function(){if(!this.mq)throw u.i.fa("internal error");return this.rl?this.nq?this.Ts:this.Fb.GF(this.Fs):this.ci.az(this.ci.Af)},c.prototype.xU=function(){return this.mq?--this.uo==-1?(this.Ic=!0,!1):(this.nq?this.HT.Rj(this.uo,this.Ts):this.GT.Rj(this.uo,this.Ts),this.xw.Xi(this.Ts,this.qa),this.Xb=2,!0):this.sd.$a()?(this.Xb=1,!0):(this.Ic=!0,!1)},c.prototype.yU=function(){if(!this.sd.Ha())return this.Xb=0,!0;var a=this.sd.ha();return this.xw.Uo(a,this.qa),this.Xb=2,!0},c.prototype.Uz=function(){return this.Fs=this.xw.next(),this.Fs==-1&&(this.Xb=this.mq?0:1,!0)},c}(),u.Zl=A}(V||(V={})),function(u){(u=u.OL||(u.OL={}))[u.enumClosed=1]="enumClosed",u[u.enumHasNonlinearSegments=2]="enumHasNonlinearSegments",u[u.enumOGCStartPolygon=4]="enumOGCStartPolygon",u[u.enumCalcMask=4]="enumCalcMask"}(V||(V={})),function(u){u.QC=function(){function A(){}return A.tb=function(b,c,a,r,o,l,d,p,g){var v=[0,0,0],w=[0,0,0],T=[0,0,0],$=[0,0,0,0],C=new u.ga(0),O=new u.ga(0),N=new u.ga(0);if(d!=null||p!=null||g!=null)if(u.s.ti(c))u.Yg.tb(b,a,r,o,l,d,p,g);else{o=u.F.ba(o),a=u.F.ba(a);var R=u.F.ba(o-a);if(u.s.Y(r,l)&&(u.s.Y(a,o)||u.s.Y(u.s.P(r),1.570796326794897)))d!=null&&(d.u=0),p!=null&&(p.u=0),g!=null&&(g.u=0);else{if(u.s.Y(r,-l)){if(u.s.Y(u.s.P(r),1.570796326794897))return d!=null&&(d.u=2*u.F.Ah(b,c)),p!=null&&(p.u=0<r?u.F.ba(3.141592653589793-u.F.ba(o)):u.F.ba(o)),void(g!=null&&(g.u=0<r?u.F.ba(o):u.F.ba(3.141592653589793-u.F.ba(o))));u.s.Y(u.s.P(R),3.141592653589793)&&(d!=null&&(d.u=2*u.F.Ah(b,c)),p!=null&&(p.u=0),g!=null&&(g.u=0))}else if(u.s.Y(u.s.P(r),1.570796326794897)||u.s.Y(u.s.P(l),1.570796326794897)||u.s.Y(a,o)||u.s.Y(u.s.P(R),3.141592653589793)||u.s.Cd(r))return void u.Wk.tb(b,c,a,r,o,l,d,p,g);var F=Math.sqrt(1-c);o=u.F.ba(o-a),a=0,u.F.cl(1,c,r,a,0,C,O,N),v[0]=C.u,v[1]=O.u,v[2]=N.u,u.F.cl(1,c,l,o,0,C,O,N),w[0]=C.u,w[1]=O.u,w[2]=N.u,T[0]=0,T[1]=0,T[2]=-1*c*u.F.n(1,c,r)*Math.sin(r),0>o?u.F.Wq(T,w,v,$,0):u.F.Wq(T,v,w,$,0),O=[0,0,0],N=[0,0,0];var G=[0,0,0];v=[0,0,0],C=[0,0,0];var z=Math.acos($[2]/1),B=1-c,q=Math.tan(z),K=1+q*q/B,ee=2*T[2]*q/B;for(B=(-ee+(q=Math.sqrt(ee*ee-4*K*(T[2]*T[2]/B-1))))/(K*=2),ee=(-ee-q)/K,q=Math.tan(z),z=(B+ee)/2,T=((K=q*B+T[2])+(q*ee+T[2]))/2,q=u.F.gp(B-z,K-T),B=T/F*1.570796326794897,ee=0;100>ee&&(K=(K=u.F.w(c,B))*K/Math.cos(B)*(Math.sin(B)-T*K/(1-c)),!u.s.Cd(K));ee++)B-=K;T=u.F.n(1,c,B)*Math.cos(B),q=1-q/(T=Math.sqrt((T-z)*(T+z))),q*=2-q,K=u.F.on(O),z=u.F.on(N),B=u.F.on(G);var oe=u.F.St(G,O);ee=u.F.St(G,N),u.F.zx(G,O,v),u.F.zx(G,N,C),O=Math.acos(oe/(B*K)),N=Math.acos(ee/(B*z)),N*=u.s.Mb(1,u.F.St(v,C)),(1.570796326794897<=u.s.P(O)&&1.570796326794897<=u.s.P(N)||3.141592653589793<u.s.P(O-N))&&(O=(3.141592653589793-u.s.P(O))*u.s.Mb(1,O),N=(3.141592653589793-u.s.P(N))*u.s.Mb(1,N)),v=u.F.Qj(q,N),C=u.F.q(T,q,u.F.Qj(q,O)),v=u.F.q(T,q,v),v=u.s.P(v-C)*b,O=new u.ga(0),N=new u.ga(0),G=$[1]/1,G*=-u.s.Mb(1,R),C=Math.acos(G)*u.s.Mb(1,R),A.rf(b,c,a,r,v,C,O,N),u.s.Y(o,O.u)&&u.s.Y(l,N.u)||(q=u.F.gp(u.F.ba(o-O.u),l-N.u),A.rf(b,c,a,r,v,u.F.ba(C+3.141592653589793),O,N),(K=u.F.gp(u.F.ba(o-O.u),l-N.u))<q&&(C=u.F.ba(C+3.141592653589793))),O=[0,0,0,0],N=[0,0,0,0],q=[0,0,0],b=[0,0,0],a=[0,0,0],r=[0,0,0],G=[0,0,0],(T=[0,0,0])[0]=0,T[1]=0,T[2]=F,q[0]=0,q[1]=0,q[2]=0,u.F.Wq(q,T,w,O,0),u.s.Cd(l)?(b[0]=w[0],b[1]=w[1],b[2]=1,a[0]=1*Math.cos(o)-1*Math.sin(o),a[1]=1*Math.sin(o)+1*Math.cos(o)):(c=u.F.n(1,c,l)*Math.cos(l),b[0]=0,b[1]=0,w[2]+=Math.tan(1.570796326794897-u.s.P(l))*c*u.s.Mb(1,l),a[0]=c*Math.cos(o)-c*Math.sin(o),a[1]=c*Math.sin(o)+c*Math.cos(o)),a[2]=w[2],u.F.Wq(w,a,b,N,1),u.F.zx(N,O,r),u.F.zx(N,$,G),G=u.F.St(r,G)/(u.F.on(r)*u.F.on(G)),G*=u.s.Mb(1,R),o=Math.acos(G)*-u.s.Mb(1,R),(0<C&&0<o||0>C&&0>o)&&(o=u.F.ba(o+3.141592653589793)),d!=null&&(d.u=v),p!=null&&(p.u=C),g!=null&&(g.u=o)}}},A.rf=function(b,c,a,r,o,l,d,p){var g=[0,0,0],v=[0,0,0],w=[0,0,0],T=[0,0,0],$=[0,0,0],C=[0,0,0],O=[0,0,0],N=[0,0,0,0],R=new u.ga(0),F=new u.ga(0),G=new u.ga(0),z=new u.ga(0),B=new u.ga(0),q=new u.ga(0);if(d!=null&&p!=null)if(u.s.ti(c))u.Yg.rf(b,a,r,o,l,d,p);else if(u.s.Cd(o))d!=null&&(d.u=a),p!=null&&(p.u=r);else if(l=u.F.ba(l),0>o&&(o=u.s.P(o),l=u.F.ba(l+3.141592653589793)),a=u.F.ba(a),r=u.F.ba(r),1.570796326794897<u.s.P(r)&&(a=u.F.ba(a+3.141592653589793),r=u.s.Mb(3.141592653589793,r)-r),u.s.Y(u.s.P(r),1.570796326794897)||u.s.Cd(r)||u.s.Cd(l)||u.s.Y(u.s.P(l),3.141592653589793))u.Wk.rf(b,c,a,r,o,l,d,p);else{var K=Math.sqrt(1-c);for(b=o/b,u.F.cl(1,c,r,0,0,z,B,q),g[0]=z.u,g[1]=B.u,g[2]=B.u,O[0]=0,O[1]=0,O[2]=-1*c*u.F.n(1,c,r)*Math.sin(r),z=u.F.n(1,c,r),B=u.F.ba(1.570796326794897-l),q=Math.sin(B),o=Math.cos(r),r=Math.sin(r),$[0]=z*o-r*q,$[1]=Math.cos(B),$[2]=(1-c)*z*r+o*q,0>l?u.F.Wq(O,$,g,N,0):u.F.Wq(O,g,$,N,0),g=Math.acos(N[2]/1),N=Math.atan2(-N[1],-N[0]),r=1-c,B=1+($=Math.tan(g))*$/r,r=(-(z=2*O[2]*$/r)+($=Math.sqrt(z*z-4*B*(O[2]*O[2]/r-1))))/(B*=2),z=(-z-$)/B,$=Math.tan(g),g=(r+z)/2,O=((B=$*r+O[2])+($*z+O[2]))/2,$=u.F.gp(r-g,B-O),K=O/K*1.570796326794897,r=0;100>r&&(z=(z=u.F.w(c,K))*z/Math.cos(K)*(Math.sin(K)-O*z/(1-c)),!u.s.Cd(z));r++)K-=z;K=u.F.n(1,c,K)*Math.cos(K),O=1-$/(K=Math.sqrt((K-g)*(K+g))),O*=2-O,C=Math.acos(u.F.St(C,v)/(u.F.on(C)*u.F.on(v))),C*=u.s.Mb(1,v[0]),l=(u.F.q(K,O,u.F.Qj(O,C))+b*u.s.Mb(1,l))/u.F.Ah(K,O),l=u.F.ba(1.570796326794897*l),l=u.F.Rq(O,l),u.F.n(K,O,l),$=u.F.ba(N+a),a=Math.cos($),l=Math.sin($),w[0]=T[0]*a+T[1]*-l,w[1]=T[0]*l+T[1]*a,w[2]=T[2],u.F.jO(c,w[0],w[1],w[2],G,F,R),d!=null&&(d.u=F.u),p!=null&&(p.u=G.u)}},A}()}(V||(V={})),function(u){var A=function(){function o(l){this.Ya=null,this.wt=new u.h,this.xt=new u.h,this.g=l}return o.prototype.compare=function(l,d,p){return this.g.Gc(d,this.wt),this.g.Gc(l.ja(p),this.xt),this.wt.compare(this.xt)},o}(),b=function(){function o(l){this.Bf=new u.h,this.Dk=new u.h,this.g=l}return o.prototype.Dh=function(l){this.Bf.L(l)},o.prototype.compare=function(l,d){return this.g.Gc(l.ja(d),this.Dk),this.Bf.compare(this.Dk)},o}(),c=function(o){function l(d){var p=o.call(this,d.g,d.qa,!1)||this;return p.ib=d,p}return bt(l,o),l.prototype.compare=function(d,p,g){if(this.rg)return-1;var v=this.ib.Qd.Jn(this.ib.Rh(p));d=d.ja(g);var w=this.ib.Qd.Jn(this.ib.Rh(d));return this.Dm=g,this.RE(p,v,d,w)},l}(u.UC),a=function(o){function l(d){var p=o.call(this,d.g,d.qa)||this;return p.ib=d,p}return bt(l,o),l.prototype.compare=function(d,p){return this.rg?-1:(d=this.ib.Qd.Jn(this.ib.Rh(d.ja(p))),this.Dm=p,this.SE(p,d))},l}(u.aM),r=function(){function o(){this.Mc=this.df=this.jo=this.Qd=this.lh=this.zd=this.hb=this.g=null,this.Ng=!1,this.vh=this.Nm=this.ie=this.Gk=this.nh=this.Ak=this.Ff=this.$d=null,this.xh=this.Jq=this.UA=this.qa=0,this.Xv=this.Wn=!1,this.yo=new u.h,this.Pi=new u.h,this.hb=new u.$c(8),this.zd=new u.$c(5),this.lh=new u.au,this.Qd=new u.au,this.Ng=!1,this.vh=new u.h,this.vh.ma(0,0),this.qa=0,this.xh=-1,this.Wn=!1,this.g=null,this.df=new u.Yj,this.Mc=new u.Yj,this.nh=new u.ia(0),this.Gk=new u.TC,this.Ff=new u.ia(0),this.Ak=new u.ia(0),this.jo=new u.Sa}return o.prototype.PX=function(l,d){var p=new u.Dd;return p.$B(),l.Oc(p),this.er(l),this.Wn=!1,this.qa=d,this.UA=d*d,d=this.jC(),l.Oc(p),d||(this.qQ(),d||this.jC()),this.xh!=-1&&(this.g.Td(this.xh),this.xh=-1),this.g=null,this.Wn},o.prototype.TX=function(l,d){this.er(l),this.Wn=!1,this.qa=d,this.UA=d*d,this.Ng=!1,this.jC(),this.Ng||(this.Ng=l.Gp(d,!0,!1)==1),this.xh!=-1&&(this.g.Td(this.xh),this.xh=-1),this.g=null},o.prototype.pg=function(l,d){return this.hb.T(l,0+d)},o.prototype.LB=function(l,d,p){this.hb.S(l,0+d,p)},o.prototype.Rh=function(l){return this.hb.T(l,2)},o.prototype.ZW=function(l,d){this.hb.S(l,2,d)},o.prototype.RF=function(l,d){return this.hb.T(l,3+d)},o.prototype.Pp=function(l){return this.hb.T(l,7)},o.prototype.Pl=function(l,d){this.hb.S(l,7,d)},o.prototype.Rp=function(l,d){return this.hb.T(l,3+this.Op(l,d))},o.prototype.fr=function(l,d,p){this.hb.S(l,3+this.Op(l,d),p)},o.prototype.NR=function(l,d){return this.hb.T(l,5+this.Op(l,d))},o.prototype.hr=function(l,d,p){this.hb.S(l,5+this.Op(l,d),p)},o.prototype.Sr=function(l){return this.zd.T(l,0)},o.prototype.UW=function(l,d){this.zd.S(l,0,d)},o.prototype.ez=function(l){return this.zd.T(l,4)},o.prototype.cr=function(l,d){this.zd.S(l,4,d)},o.prototype.il=function(l){return this.zd.T(l,1)},o.prototype.ln=function(l,d){this.zd.S(l,1,d)},o.prototype.dz=function(l){return this.zd.T(l,3)},o.prototype.Et=function(l,d){this.zd.S(l,3,d)},o.prototype.Ym=function(l){var d=this.zd.Ce(),p=this.lh.Ph();return this.UW(d,p),l!=-1?(this.lh.addElement(p,l),this.g.Ra(l,this.xh,d),this.cr(d,this.g.Ua(l))):this.cr(d,-1),d},o.prototype.HP=function(l){this.zd.jd(l)},o.prototype.LD=function(l,d){this.lh.addElement(this.Sr(l),d),this.g.Ra(d,this.xh,l)},o.prototype.nt=function(l){var d=this.hb.Ce(),p=this.Qd.Ph();return this.ZW(d,p),l!=-1&&this.Qd.addElement(p,l),d},o.prototype.MD=function(l,d){this.Qd.addElement(this.Rh(l),d)},o.prototype.Uu=function(l){this.hb.jd(l),0<=(l=this.nh.lF(l))&&this.nh.SV(l)},o.prototype.hj=function(l,d){if(this.pg(l,0)==-1)this.LB(l,0,d);else{if(this.pg(l,1)!=-1)throw u.i.Qa();this.LB(l,1,d)}this.ky(l,d)},o.prototype.ky=function(l,d){var p=this.il(d);if(p!=-1){var g=this.Rp(p,d);this.hr(g,d,l),this.fr(l,d,g),this.fr(p,d,l),this.hr(l,d,p)}else this.hr(l,d,l),this.fr(l,d,l),this.ln(d,l)},o.prototype.Op=function(l,d){return this.pg(l,0)==d?0:1},o.prototype.Xm=function(l,d){var p,g=this.dz(d);if(g!=-1&&(this.df.vd(g,-1),this.Et(d,-1)),(g=this.il(d))!=-1){var v=p=g;do{var w=!1,T=this.Op(p,d),$=this.RF(p,T);if(this.pg(p,T+1&1)==l){if(this.Xu(p),this.Qd.bh(this.Rh(p)),this.Uu(p),p==$){g=-1;break}g==p&&(g=this.il(d),v=$,w=!0)}p=$}while(p!=v||w);if(g!=-1){do T=this.Op(p,d),$=this.RF(p,T),this.LB(p,T,l),p=$;while(p!=v);(p=this.il(l))!=-1?(v=this.Rp(p,l),w=this.Rp(g,l),v==p?(this.ln(l,g),this.ky(p,l),this.ln(l,p)):w==g&&this.ky(g,l),this.fr(g,l,v),this.hr(v,l,g),this.fr(p,l,w),this.hr(w,l,p)):this.ln(l,g)}}for(g=this.Sr(l),p=this.Sr(d),v=this.lh.rc(p);v!=-1;v=this.lh.lb(v))this.g.Ra(this.lh.ja(v),this.xh,l);this.lh.Hy(g,p),this.HP(d)},o.prototype.UT=function(l,d){var p=this.pg(l,0),g=this.pg(l,1),v=this.pg(d,0),w=this.pg(d,1);this.Qd.Hy(this.Rh(l),this.Rh(d)),d==this.il(p)&&this.ln(p,l),d==this.il(g)&&this.ln(g,l),this.Xu(d),this.Uu(d),p==v&&g==w||g==v&&p==w||(this.Hn(p,this.yo),this.Hn(v,this.Pi),this.yo.qb(this.Pi)?(p!=v&&this.Xm(p,v),g!=w&&this.Xm(g,w)):(g!=v&&this.Xm(g,v),p!=w&&this.Xm(p,w)))},o.prototype.Xu=function(l){var d=this.pg(l,1);this.dF(l,this.pg(l,0)),this.dF(l,d)},o.prototype.dF=function(l,d){var p=this.Rp(l,d),g=this.NR(l,d),v=this.il(d);p!=l?(this.fr(g,d,p),this.hr(p,d,g),v==l&&this.ln(d,p)):this.ln(d,-1)},o.prototype.WD=function(l,d,p){var g=this.Qd.rc(l),v=this.Qd.ja(g);l=this.Le(v);var w=this.Le(this.g.U(v));for(this.g.jr(v,d,p,!0),g=this.Qd.lb(g);g!=-1;g=this.Qd.lb(g)){v=this.Qd.ja(g);var T=this.Le(v)==l;this.g.jr(v,d,p,T)}g=d.Vp(p,0).ac(),d=d.Vp(p,d.ol(p)-1).wc(),this.BK(l,g),this.BK(w,d)},o.prototype.ZE=function(l,d,p){var g=this.Rh(l),v=this.pg(l,0),w=this.pg(l,1),T=this.nt(-1);for(this.nh.add(T),this.Pl(T,-3),this.Ff.add(T),this.hj(T,v),l=1,d=d.ol(p);l<d;l++)p=this.Ym(-1),this.Ak.add(p),this.Ff.add(p),this.hj(T,p),T=this.nt(-1),this.nh.add(T),this.Pl(T,-3),this.Ff.add(T),this.hj(T,p);for(this.hj(T,w),g=this.Qd.rc(g);g!=-1;g=this.Qd.lb(g))if(w=this.Qd.ja(g),this.Le(w)==v){l=0;do 0<l&&(T=this.Ff.get(l-1),this.LD(T,w),this.ez(T)==-1&&this.cr(T,this.g.Ua(w))),T=this.Ff.get(l),l+=2,this.MD(T,w),w=this.g.U(w);while(l<this.Ff.size)}else{l=this.Ff.size-1;do l<this.Ff.size-2&&(T=this.Ff.get(l+1),this.LD(T,w),0>this.ez(T)&&this.cr(T,this.g.Ua(w))),T=this.Ff.get(l),l-=2,this.MD(T,w),w=this.g.U(w);while(0<=l)}this.Ff.clear(!1)},o.prototype.Le=function(l){return this.g.Pa(l,this.xh)},o.prototype.TI=function(l,d,p){var g=this.pg(d,0),v=new u.h;this.Hn(g,v);var w=new u.h,T=this.pg(d,1);this.Hn(T,w);var $=p.ol(l),C=p.Vp(l,0),O=new u.h;if(C.Yp(O),!v.qb(O)){if(!this.Ng){var N=v.compare(this.vh);0>N*(O=O.compare(this.vh))&&(this.Ng=!0)}this.vF(g,this.Ff),this.Ak.add(g)}for(!this.Ng&&1<$&&(N=v.compare(w),C=C.wc(),(v.compare(C)!=N||C.compare(w)!=N||0>C.compare(this.vh))&&(this.Ng=!0)),l=(C=p.Vp(l,$-1)).wc(),w.qb(l)||(this.Ng||0>(N=w.compare(this.vh))*(O=l.compare(this.vh))&&(this.Ng=!0),this.vF(T,this.Ff),this.Ak.add(T)),this.Ff.add(d),w=0,T=this.Ff.size;w<T;w++)l=this.Ff.get(w),p=this.Pp(l),u.$c.LG(p)&&(this.Mc.vd(p,-1),this.Pl(l,-1)),l!=d&&this.Pp(l)!=-3&&(this.nh.add(l),this.Pl(l,-3));this.Ff.clear(!1)},o.prototype.lO=function(l,d){this.$d.compare(this.Mc,this.Mc.ja(l),d),this.$d.rg&&(this.$d.Kr(),this.oF(l,d))},o.prototype.oF=function(l,d){this.Wn=!0,l=this.Mc.ja(l),d=this.Mc.ja(d);var p=this.Qd.Jn(this.Rh(l)),g=this.Qd.Jn(this.Rh(d)),v=this.g.bc(p);v==null&&(this.ie==null&&(this.ie=new u.yb),this.g.ed(p,this.ie),v=this.ie),(p=this.g.bc(g))==null&&(this.Nm==null&&(this.Nm=new u.yb),this.g.ed(g,this.Nm),p=this.Nm),this.Gk.Oo(v),this.Gk.Oo(p),this.Gk.Ea(this.qa,!0)&&(this.Ng=!0),this.hK(l,d,-1,this.Gk),this.Gk.clear()},o.prototype.GQ=function(l,d){this.Wn=!0,d=this.Mc.ja(d);var p=this.Qd.Jn(this.Rh(d)),g=this.g.bc(p);g==null&&(this.ie==null&&(this.ie=new u.yb),this.g.ed(p,this.ie),g=this.ie),p=this.BF(l),this.Gk.Oo(g),this.g.Vi(p,this.jo),this.Gk.Kz(this.qa,this.jo,!0),this.hK(d,-1,l,this.Gk),this.Gk.clear()},o.prototype.xS=function(){if(this.nh.size!=0)for(;this.nh.size!=0;){if(this.nh.size>Math.max(100,this.g.fd)){this.nh.clear(!1),this.Ng=!0;break}var l=this.nh.Fc();this.nh.If(),this.Pl(l,-1),this.WS(l)!=-1&&this.wS(l),this.Vn=!1}},o.prototype.wS=function(l){if(this.Vn){var d=this.Mc.zu(this.MH,this.GH,l,!0);this.Vn=!1}else d=this.Mc.KD(l);d==-1?this.UT(this.Mc.ja(this.Mc.FF()),l):(this.Pl(l,d),this.$d.rg&&(this.$d.Kr(),this.oF(this.$d.Dm,d)))},o.prototype.WS=function(l){var d=this.pg(l,0);if(l=this.pg(l,1),this.Hn(d,this.yo),this.Hn(l,this.Pi),u.h.yc(this.yo,this.Pi)<=this.UA)return this.Ng=!0,-1;var p=this.yo.compare(this.vh),g=this.Pi.compare(this.vh);return 0>=p&&0<g?l:0>=g&&0<p?d:-1},o.prototype.oQ=function(){var l=new u.ia(0);l.Jb(this.g.fd);for(var d=this.g.Yq(),p=d.next();p!=-1;p=d.next())this.g.Pa(p,this.xh)!=-1&&l.add(p);this.g.nx(l,l.size),this.pQ(l)},o.prototype.pQ=function(l){this.df.clear(),this.df.De(l.size),this.df.Vo(new A(this.g));var d=new u.h;d.Rc();for(var p=-1,g=new u.h,v=0,w=l.size;v<w;v++){var T=l.get(v);this.g.Gc(T,g),g.qb(d)?(T=this.g.Pa(T,this.xh),this.Xm(p,T)):(p=this.Le(T),this.g.Gc(T,d),T=this.df.xn(T),this.Et(p,T))}},o.prototype.qQ=function(){var l=new u.ia(0);l.Jb(this.g.fd);for(var d=this.df.rc(-1);d!=-1;d=this.df.lb(d))l.add(this.df.ja(d));this.df.clear(),this.g.nx(l,l.size),d=0;for(var p=l.size;d<p;d++){var g=l.get(d),v=this.Le(g);g=this.df.xn(g),this.Et(v,g)}},o.prototype.vF=function(l,d){var p=this.il(l);if(p!=-1){var g=p;do u.$c.LG(this.Pp(g))&&d.add(g),g=this.Rp(g,l);while(g!=p)}},o.prototype.BK=function(l,d){for(l=this.lh.rc(this.Sr(l));l!=-1;l=this.lh.lb(l))this.g.mf(this.lh.ja(l),d)},o.prototype.hK=function(l,d,p,g){this.Xu(l),d!=-1&&this.Xu(d),this.TI(0,l,g),d!=-1&&this.TI(1,d,g),p!=-1&&(g.Bf.D(this.yo),this.Hn(p,this.Pi),this.Pi.qb(this.yo)||this.Ak.add(p)),p=0;for(var v=this.Ak.size;p<v;p++){var w=this.Ak.get(p),T=this.dz(w);T!=-1&&(this.df.vd(T,-1),this.Et(w,-1))}for(p=this.Rh(l),v=d!=-1?this.Rh(d):-1,this.WD(p,g,0),d!=-1&&this.WD(v,g,1),this.ZE(l,g,0),d!=-1&&this.ZE(d,g,1),this.Qd.bh(p),this.Uu(l),d!=-1&&(this.Qd.bh(v),this.Uu(d)),p=0,v=this.Ak.size;p<v;p++)(w=this.Ak.get(p))==this.Jq&&(this.Xv=!0),(T=this.dz(w))==-1&&((T=this.df.KD(this.BF(w)))==-1?(l=this.Le(this.df.ja(this.df.FF())),this.Xm(l,w)):this.Et(w,T));this.Ak.clear(!1)},o.prototype.Hn=function(l,d){this.g.dG(this.ez(l),d)},o.prototype.BF=function(l){return this.lh.Jn(this.Sr(l))},o.prototype.jC=function(){this.Xv=!1,this.Jq=-1,this.$d==null&&(this.Mc.Rv=!1,this.$d=new c(this),this.Mc.Zn=this.$d);var l=new u.ia(0),d=null,p=null;this.GH=this.MH=-1,this.Vn=!1;for(var g=this.df.rc(-1);g!=-1;){this.Vn=!1;var v=this.df.ja(g);this.Jq=this.Le(v),this.g.Gc(v,this.vh),this.$d.$J(this.vh.y,this.vh.x);var w=this.il(this.Jq),T=w==-1;if(!T){v=w;do{var $=this.Pp(v);$==-1?(this.nh.add(v),this.Pl(v,-3)):$!=-3&&l.add($),v=this.Rp(v,this.Jq)}while(v!=w)}if(0<l.size){for(this.Vn=l.size==1&&this.nh.size==1,T=0,w=l.size;T<w;T++)v=this.Mc.ja(l.get(T)),this.Pl(v,-2);var C=-2,O=-2;for(T=0,w=l.size;T<w;T++){if($=l.get(T),C==-2){var N=this.Mc.we($);N!=-1?(v=this.Mc.ja(N),(v=this.Pp(v))!=-2&&(C=N)):C=-1}if(O==-2&&(($=this.Mc.lb($))!=-1?(v=this.Mc.ja($),(v=this.Pp(v))!=-2&&(O=$)):O=-1),C!=-2&&O!=-2)break}for(T=0,w=l.size;T<w;T++)$=l.get(T),v=this.Mc.ja($),this.Mc.vd($,-1),this.Pl(v,-1);l.clear(!1),this.MH=C!=-1?C:-1,this.GH=O!=-1?O:-1,C!=-1&&O!=-1?this.Vn||this.lO(C,O):C==-1&&O==-1&&(this.Vn=!1)}else T&&(d==null&&(d=new a(this)),d.Dh(this.vh),this.Mc.uJ(d),d.rg&&(d.Kr(),this.GQ(this.Jq,d.Dm)));this.xS(),this.Xv?(this.Xv=!1,p==null&&(p=new b(this.g)),p.Dh(this.vh),g=this.df.uJ(p)):g=this.df.lb(g)}return this.Wn},o.prototype.er=function(l){for(this.g=l,this.xh=this.g.Gd(),this.hb.De(l.fd+32),this.zd.De(l.fd),this.lh.At(l.fd),this.lh.fn(l.fd),this.Qd.At(l.fd+32),this.Qd.fn(l.fd+32),l=this.g.ld;l!=-1;l=this.g.ue(l))if(u.aa.Hc(this.g.ic(l)))for($=this.g.Ob(l);$!=-1;$=this.g.Rb($)){var d=this.g.Ja($),p=this.g.Xa($),g=this.Ym(p),v=this.nt(p);for(this.hj(v,g),C=this.g.U(p),p=0,d-=2;p<d;p++){var w=this.g.U(C),T=this.Ym(C);this.hj(v,T),v=this.nt(C),this.hj(v,T),C=w}this.g.dc($)?(T=this.Ym(C),this.hj(v,T),v=this.nt(C),this.hj(v,T),this.hj(v,g)):(T=this.Ym(C),this.hj(v,T))}else for(var $=this.g.Ob(l);$!=-1;$=this.g.Rb($)){var C=this.g.Xa($);for(g=0,d=this.g.Ja($);g<d;g++)this.Ym(C),C=this.g.U(C)}this.oQ()},o}();u.RC=r}(V||(V={})),function(u){var A=function(b){function c(a,r,o){var l=b.call(this)||this;if(a!==void 0)if(o!==void 0){l.description=u.ee.og();var d=new u.Nd;d.K(a,r,o),l.dC(d)}else if(r!==void 0)l.description=u.ee.og(),l.Cb(a,r);else if(a instanceof u.ra)l.description=a;else if(a instanceof u.h)l.description=u.ee.og(),l.Cb(a);else{if(!(a instanceof c))throw u.i.N();l.description=a.description,l.Cb(a.Lg(),a.ih()),a.ka!==null&&(l.ka=a.ka.slice(0))}else l.description=u.ee.og();return l}return bt(c,b),c.prototype.D=function(a){if(a===void 0){if(this.Ac())throw u.i.fa("This operation should not be performed on an empty geometry.");return(a=new u.h).ma(this.ka[0],this.ka[1]),a}if(this.Ac())throw u.i.fa("This operation should not be performed on an empty geometry.");a.ma(this.ka[0],this.ka[1])},c.prototype.Cb=function(a,r){typeof a=="number"?(this.vc(),this.ka==null&&this.un(),this.ka[0]=a,this.ka[1]=r):(this.vc(),this.Cb(a.x,a.y))},c.prototype.Cz=function(){if(this.Ac())throw u.i.fa("This operation should not be performed on an empty geometry.");var a=new u.Nd;return a.x=this.ka[0],a.y=this.ka[1],a.z=this.description.iG()?this.ka[2]:u.ra.se(1),a},c.prototype.dC=function(a){this.vc();var r=this.hasAttribute(1);r||u.ra.DG(1,a.z)||(this.re(1),r=!0),this.ka==null&&this.un(),this.ka[0]=a.x,this.ka[1]=a.y,r&&(this.ka[2]=a.z)},c.prototype.Lg=function(){if(this.Ac())throw u.i.fa("This operation should not be performed on an empty geometry.");return this.ka[0]},c.prototype.cC=function(a){this.setAttribute(0,0,a)},c.prototype.ih=function(){if(this.Ac())throw u.i.fa("This operation should not be performed on an empty geometry.");return this.ka[1]},c.prototype.aK=function(a){this.setAttribute(0,1,a)},c.prototype.bS=function(){return this.Uc(1,0)},c.prototype.wX=function(a){this.setAttribute(1,0,a)},c.prototype.zR=function(){return this.Uc(2,0)},c.prototype.hX=function(a){this.setAttribute(2,0,a)},c.prototype.Ec=function(){return this.yF(3,0)},c.prototype.LJ=function(a){this.setAttribute(3,0,a)},c.prototype.Uc=function(a,r){var o=this.description.Pf(a);return 0<=o?this.ka[this.description.$j(o)+r]:u.ra.se(a)},c.prototype.yF=function(a,r){var o=this.description.Pf(a);return 0<=o?this.ka[this.description.$j(o)+r]:u.ra.se(a)},c.prototype.setAttribute=function(a,r,o){this.vc();var l=this.description.Pf(a);0>l&&(this.re(a),l=this.description.Pf(a)),this.ka==null&&this.un(),this.ka[this.description.$j(l)+r]=o},c.prototype.getType=function(){return 33},c.prototype.Db=function(){return 0},c.prototype.Oa=function(){this.vc(),this.ka!=null&&(this.ka[0]=NaN,this.ka[1]=NaN)},c.prototype.sn=function(a){if(this.ka!=null){for(var r=u.ee.Iw(a,this.description),o=[],l=0,d=0,p=a.Aa;d<p;d++){var g=a.kd(d),v=u.ra.Va(g);if(r[d]==-1){var w=u.ra.se(g);for(g=0;g<v;g++)o[l]=w,l++}else for(w=this.description.$j(r[d]),g=0;g<v;g++)o[l]=this.ka[w],l++,w++}this.ka=o}this.description=a},c.prototype.un=function(){this.lJ(this.description.Ae.length),c.cE(this.description.Ae,this.ka,this.description.Ae.length),this.ka[0]=NaN,this.ka[1]=NaN},c.prototype.Oc=function(a){if(a instanceof u.Dd){if(!this.Ac()){var r=this.D();a.Eh(r,r),this.Cb(r)}}else this.Ac()||(this.re(1),r=this.Cz(),this.dC(a.fp(r)))},c.prototype.copyTo=function(a){if(a.getType()!=33)throw u.i.N();a.vc(),this.ka==null?(a.Oa(),a.ka=null,a.Nf(this.description)):(a.Nf(this.description),a.lJ(this.description.Ae.length),c.cE(this.ka,a.ka,this.description.Ae.length))},c.prototype.Ia=function(){return new c(this.description)},c.prototype.B=function(){return this.Ac()},c.prototype.Ac=function(){return this.ka==null||isNaN(this.ka[0])||isNaN(this.ka[1])},c.prototype.bn=function(a){a.Oa(),this.description!=a.description&&a.Nf(this.description),a.Zb(this)},c.prototype.A=function(a){this.Ac()?a.Oa():(a.v=this.ka[0],a.G=this.ka[1],a.C=this.ka[0],a.H=this.ka[1])},c.prototype.Qo=function(a){if(this.Ac())a.Oa();else{var r=this.Cz();a.v=r.x,a.G=r.y,a.Ye=r.z,a.C=r.x,a.H=r.y,a.Bg=r.z}},c.prototype.Tg=function(a,r){var o=new u.Nc;return this.Ac()?(o.Oa(),o):(a=this.Uc(a,r),o.oa=a,o.va=a,o)},c.prototype.lJ=function(a){if(this.ka==null)this.ka=u.O.lg(a);else if(this.ka.length<a){for(var r=this.ka.slice(0),o=this.ka.length;o<a;o++)r[o]=0;this.ka=r}},c.cE=function(a,r,o){if(0<o)for(o=0;o<a.length;o++)r[o]=a[o]},c.prototype.Nb=function(a){if(a==this)return!0;if(!(a instanceof c)||this.description!=a.description)return!1;if(this.Ac())return!!a.Ac();for(var r=0,o=this.description.Ae.length;r<o;r++)if(this.ka[r]!=a.ka[r])return!1;return!0},c.prototype.cc=function(){var a=this.description.cc();if(!this.Ac())for(var r=0,o=this.description.Ae.length;r<o;r++){var l=this.ka[r];l=u.O.truncate(l^l>>>32),a=u.O.Th(l,a)}return a},c.prototype.mg=function(){return null},c}(u.aa);u.Sa=A}(V||(V={})),function(u){var A=function(){function b(c,a,r){c!==void 0&&(this.x=c,this.y=a,this.z=r)}return b.construct=function(c,a,r){var o=new b;return o.x=c,o.y=a,o.z=r,o},b.prototype.K=function(c,a,r){this.x=c,this.y=a,this.z=r},b.prototype.lx=function(){this.z=this.y=this.x=0},b.prototype.normalize=function(){var c=this.length();c==0&&(this.x/=c,this.y/=c,this.z/=c)},b.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},b.prototype.sub=function(c){return new b(this.x-c.x,this.y-c.y,this.z-c.z)},b.prototype.Ag=function(c){new b(this.x*c,this.y*c,this.z*c)},b.prototype.Qh=function(c){return this.x*c.x+this.y*c.y+this.z*c.z},b}();u.Nd=A}(V||(V={})),function(u){var A=function(){function b(c,a,r){this.Gw=this.DA=null,this.Xf=a,this.FT=a.y-r,this.ET=a.y+r,this.Ew=0,this.dA=c,this.qa=r,this.RT=r*r,this.eA=r!=0,this.Lv=!1}return b.prototype.result=function(){return this.Ew!=0?1:0},b.prototype.ZM=function(c){return c=c.hc(c.fe(this.Xf,!1)),u.h.yc(c,this.Xf)<=this.RT},b.prototype.fF=function(c){if(!this.eA&&(this.dA&&this.Xf.qb(c.ac())||this.Xf.qb(c.wc())))this.Lv=!0;else if(c.na==this.Xf.y&&c.na==c.la){if(this.dA&&!this.eA){var a=Math.max(c.sa,c.pa);this.Xf.x>Math.min(c.sa,c.pa)&&this.Xf.x<a&&(this.Lv=!0)}}else{var r=!1;if(a=Math.max(c.sa,c.pa),this.Xf.x>a?r=!0:this.Xf.x>=Math.min(c.sa,c.pa)&&(r=0<c.cq(!0,this.Xf.y,this.Gw,null)&&this.Gw[0]<=this.Xf.x),r){if(this.Xf.y==c.ac().y){if(this.Xf.y<c.wc().y)return}else if(this.Xf.y==c.wc().y&&this.Xf.y<c.ac().y)return;this.Ew=this.dA?1^this.Ew:this.Ew+(c.ac().y>c.wc().y?1:-1)}}},b.prototype.SI=function(c){var a=c.Tg(0,1);if(a.oa>this.ET||a.va<this.FT)return!1;if(this.eA&&this.ZM(c))return!0;if(a.oa>this.Xf.y||a.va<this.Xf.y)return!1;if(this.DA==null&&(this.DA=[null,null,null,null,null]),this.Gw==null&&(this.Gw=[0,0,0]),0<(a=c.eG()))for(c=0;c<a;c++){var r=this.DA[c].get();if(this.fF(r),this.Lv)return!0}else if(this.fF(c),this.Lv)return!0;return!1},b.PM=function(c,a,r){for(a=new b(c.In()==0,a,r),c=c.Ga();c.$a();)for(;c.Ha();)if(r=c.ha(),a.SI(r))return-1;return a.result()},b.QM=function(c,a,r,o){var l=new u.l;c.xc(l),l.W(o,o);var d=new b(c.In()==0,r,o);c=c.Ga();var p=new u.l;for(p.K(l),p.C=r.x+o,p.G=r.y-o,p.H=r.y+o,o=(r=a.MF(p,o)).next();o!=-1;o=r.next())if(c.Vb(a.ja(o)),c.Ha()&&(o=c.ha(),d.SI(o)))return-1;return d.result()},b.wm=function(c,a,r){if(c.B())return 0;var o=new u.l;if(c.xc(o),o.W(r,r),!o.contains(a))return 0;if((o=c.Bb)!=null){var l=o.Fk;if(l!=null){if((l=l.So(a.x,a.y))==1)return 1;if(l==0)return 0}if((o=o.Fb)!=null)return b.QM(c,o,a,r)}return b.PM(c,a,r)},b.bT=function(c,a,r){return a.B()?0:b.wm(c,a.D(),r)},b.Ml=function(c,a){return!(16>(c=c.I()))&&2*c+Math.log(c)/Math.log(2)*a<1*c*a},b}();u.Dg=A}(V||(V={})),function(u){var A=function(b){function c(a){return b.call(this,!0,a)||this}return bt(c,b),c.prototype.Ia=function(){return new c(this.description)},c.prototype.Db=function(){return 2},c.prototype.getType=function(){return 1736},c.prototype.xG=function(a,r,o){this.JS(a,r,o)},c.prototype.qR=function(){this.FR()},c}(u.Vk);u.Da=A}(V||(V={})),function(u){(function(A){A[A.PiPOutside=0]="PiPOutside",A[A.PiPInside=1]="PiPInside",A[A.PiPBoundary=2]="PiPBoundary"})(u.RL||(u.RL={})),u.hd=function(){function A(){}return A.KG=function(b,c,a){return(b=u.Dg.bT(b,c,a))==0?0:b==1?1:2},A.Yd=function(b,c,a){return(b=u.Dg.wm(b,c,a))==0?0:b==1?1:2},A.WX=function(b,c,a,r,o){if(c.length<a||o.length<a)throw u.i.N();for(var l=0;l<a;l++)o[l]=A.Yd(b,c[l],r)},A.sK=function(b,c,a,r,o){if(b.getType()==1736)A.WX(b,c,a,r,o);else{if(b.getType()!=197)throw u.i.fa("invalid_call");var l=new u.l;b.A(l),A.$M(l,c,a,r,o)}},A.$M=function(b,c,a,r,o){if(c.length<a||o.length<a)throw u.i.N();if(b.B())for(r=0;r<a;r++)o[r]=0;else for(b.W(.5*-r,.5*-r),b.W(.5*r,.5*r),r=0;r<a;r++)b.contains(c[r])?o[r]=1:b.contains(c[r])?o[r]=2:o[r]=0},A.YX=function(b,c,a,r,o){for(var l=0;l<a;l++)o[l]=b.qs(c[l],r)?2:0},A.XX=function(b,c,a,r,o){var l=b.Bb,d=null;l!=null&&(d=l.Fk),l=a;for(var p=0;p<a;p++)if(o[p]=1,d!=null){var g=c[p];d.So(g.x,g.y)==0&&(o[p]=0,l--)}if(l!=0)for(b=b.Ga();b.$a()&&l!=0;)for(;b.Ha()&&l!=0;)for(d=b.ha(),p=0;p<a&&l!=0;p++)o[p]==1&&d.qs(c[p],r)&&(o[p]=2,l--);for(p=0;p<a;p++)o[p]==1&&(o[p]=0)},A.tK=function(b,c,a,r,o){var l=b.getType();if(l==1607)A.XX(b,c,a,r,o);else{if(!u.aa.yd(l))throw u.i.fa("Invalid call.");A.YX(b,c,a,r,o)}},A}()}(V||(V={})),function(u){var A=function(b){function c(a,r){if(arguments.length==2){var o=b.call(this,!1,a.description)||this;o.nf(a),o.lineTo(r)}else o=b.call(this,!1,a)||this;return o}return bt(c,b),c.prototype.Ia=function(){return new c(this.description)},c.prototype.Db=function(){return 1},c.prototype.getType=function(){return 1607},c.prototype.xG=function(a,r,o){this.KS(a,r,o)},c}(u.Vk);u.Ta=A}(V||(V={})),function(u){var A=function(){function b(){}return b.prototype.progress=function(){return!0},b.zp=function(c){if(c!=null&&!c.progress(-1,-1))throw u.i.WC()},b}();u.mp=A}(V||(V={})),function(u){var A;(A=u.PK||(u.PK={}))[A.clipWithInputHorizon=1]="clipWithInputHorizon",A[A.clipWithOutputHorizon=2]="clipWithOutputHorizon";var b=function(){function r(){this.Kg=3,this.Vu=this.Jr=NaN}return r.prototype.PW=function(o){this.QB(1,o)},r.prototype.QW=function(o){this.QB(2,o)},r.prototype.hS=function(){return this.hs(1)},r.prototype.iS=function(){return this.hs(2)},r.prototype.QB=function(o,l){this.Kg=l?this.Kg|o:this.Kg&~o},r.prototype.hs=function(o){return!!(this.Kg&o)},r.prototype.Of=function(){var o=new r;return o.Jr=this.Jr,o.Vu=this.Vu,o.Kg=this.Kg,o},r}();u.yC=b,function(r){r[r.Dont_Geonomalize_Polygon=2147483648]="Dont_Geonomalize_Polygon",r[r.Dont_Adjust_At_Poles=1073741824]="Dont_Adjust_At_Poles"}(u.QK||(u.QK={}));var c=function(){function r(){this.Kg=0}return r.prototype.QB=function(o,l){this.Kg=l?this.Kg|o:this.Kg&~o},r.prototype.hs=function(o){return!!(this.Kg&o)},r.jg=function(o){var l=new r;return l.Kg=o.Kg,l},r.prototype.mM=function(o){this.Kg=o.Kg},r}();u.AY=c;var a=function(){function r(o,l,d){this.ef=o,this.Yf=l,this.Uf=new u.l,this.Uf.K(d),this.AT=o.cc()+l.cc()+this.Uf.cc().toString()}return r.prototype.cc=function(){return this.AT},r.prototype.Nb=function(o){return this==o||this.ef.Nb(o.ef)&&this.Yf.Nb(o.Yf)&&this.Uf.Nb(o.Uf)},r}();u.FY=a,a=function(){function r(){this.Yf=this.ef=null,this.rH=new b,this.sH=new c,this.ww=this.Wf=null,this.mw=this.Tn=!0}return r.Nr=function(o,l,d,p){var g;p===void 0&&(p=null),g===void 0&&(g=null);var v=new r;return v.qp(o,l,d,p,g),v},r.prototype.qp=function(o,l,d,p,g){if(o==null||l==null)throw u.i.fa("invalidArgument");if(this.ef=o,this.Yf=l,this.mw=this.Tn=!1,p!=null&&(this.rH=p.Of()),g!=null&&this.sH.mM(g),g=!1,l.Sb()==1&&p!=null&&(p=p.Jr,isNaN(p)||p==0||(g=!0)),o==l)this.Tn=!g,this.mw=!0;else{p=o.Sb();var v=l.Sb();if(p==0||v==0){if(d!=null)throw u.i.N();o.Hd()!=null&&l.Hd()!=null&&(this.Tn=o.Hd().Nb(l.Hd()))}else p==3||v==3?this.Tn=o.Nb(l):this.ef.kS(this.Yf)?this.Tn=!g:this.Tn=!1,this.Wf=d,this.Wf!=null&&this.Wf.ix(),this.mw=(this.Wf==null||this.Wf.count()==0)&&this.ef.sc().Nb(this.Yf.sc())}this.oY()},r.prototype.isIdentity=function(){return this.Tn},r.prototype.nR=function(){return this.rH.Of()},r.prototype.Nb=function(o){return o==this||!!(o instanceof r&&this.ef.Nb(o.ef)&&this.Yf.Nb(o.Yf))&&(this.Wf==o.Wf||!(this.Wf==null||o.Wf==null||!this.Wf.Nb(o.Wf)))},r.prototype.oY=function(){this.ww=new u.bu(this)},r}(),u.vr=a}(V||(V={})),function(u){var A=function(){function b(){}return b.Cp=function(c){return c*b.oW},b.mx=function(c,a){return b.gP(a-c)},b.hP=function(c){return-360<=c&&720>c?(0>c?c+=360:360<=c&&(c-=360),c):(0>(c=u.lc.RK(c))&&(c+=360),c)},b.gP=function(c){return 180<(c=b.hP(c))&&(c-=360),c},b.oW=57.29577951308232,b}();u.qr=A,u.Hh=function(){function b(){}return b.lj=function(c,a){var r=new u.l;c.A(r);var o=u.cb.gh(a),l=new u.l;return l.K(o),l.v=r.v,l.C=r.C,l.W(.01*l.ca(),0),a=u.ta.Wd(a,r,!1),l.contains(r)?c:u.Ud.clip(c,l,a,0)},b.ks=function(c,a,r,o,l){if(!u.cb.Wc(a))throw u.i.N();var d=u.ta.kj(a,c,!1),p=u.cb.gh(a),g=u.cb.sc(a),v=g.Hd().ai,w=u.cb.vv(g);g=u.cb.ev(g),w*=2-w;var T=new u.Nc;p.cn(T);var $=[[0,0],[0,0]];if(u.Eg.Sb(a)==2?o?($[0][0]=b.Zm(l,T),$[0][1]=p.Jp(),u.cb.vt(),p=$[0][0]*v):($[0][0]=p.gk(),$[0][1]=l,u.cb.vt(),p=$[0][1]*v):p=l*v,!o&&p!=0)throw u.i.N();var C=new u.ga,O=new u.gd;c=O.Ib(c);for(var N=[0],R=new u.h,F=new u.h,G=new u.h,z=new u.h,B=new u.h,q=new u.h,K=O.Ob(c);K!=-1;K=O.Rb(K)){var ee=O.Xa(K);O.D(ee,G);for(var oe=!1,ue=ee=O.U(ee);ue!=-1;ue=O.U(ue)){if(ue==ee){if(oe)break;oe=!0}if(O.D(ue,z),o&&d<l-G.x&&z.x-l>d||d<l-z.x&&G.x-l>d||!o&&d<-G.y&&z.y>d||d<-z.y&&G.y>d)do if(!(Math.abs(G.x-z.x)>=.5*T.R())){if(u.Eg.Sb(a)==2?($[0][0]=b.Zm(G.x,T),$[0][1]=G.y,$[1][0]=b.Zm(z.x,T),$[1][1]=z.y,u.cb.dW(),B.x=$[0][0]*v,B.y=$[0][1]*v,q.x=$[1][0]*v,q.y=$[1][1]*v):(B.x=G.x*v,B.y=G.y*v,q.x=z.x*v,q.y=z.y*v),q.x=6.283185307179586*(z.x-G.x)/T.R()+B.x,o){if(F.x=p,F.y=b.Nz(g,w,B,q,p,r),isNaN(F.y))break}else{if(F.x=b.Lz(g,w,B,q,r),isNaN(F.x))break;F.y=0}u.kb.wd(g,w,B.x,B.y,q.x,q.y,C,null,null,r);var we=C.u;u.kb.wd(g,w,B.x,B.y,F.x,F.y,C,null,null,r);var me=C.u;u.Eg.Sb(a)==2?($[0][0]=F.x/v,$[0][1]=F.y/v,u.cb.bR(),o?(R.y=$[0][1],R.x=l):(R.x=b.os($[0][0],G.x,z.x,T),R.y=l)):o?(R.x=l,R.y=F.y/v):(R.x=b.os(F.x/v,G.x,z.x,T),R.y=l),N[0]=0<we?u.O.Rk(me/we,0,1):.5,N[0]!=0&&N[0]!=1&&(we=O.Ma(ue),O.Ul(we,N,1),O.Cb(O.U(we),R.x,R.y))}while(!1);G.L(z)}}return O.Ne(c)},b.Fn=function(c,a,r,o,l){if(c.B())return c;var d=u.cb.bf(a);return b.Hp(c,r-180*d,360*d,a,o,l,!0)},b.Nz=function(c,a,r,o,l,d){if(3.141592653589793<=Math.abs(r.x-o.x)||!b.Sn(r.x,o.x,l))return NaN;if(r.x>o.x)var p=o;else p=r,r=o;o=new u.ga(0);var g=new u.ga(0),v=new u.ga(0);u.kb.wd(c,a,p.x,p.y,r.x,r.y,g,o,null,d);var w=g.u,T=0,$=1,C=new u.h;for(C.L(p);w*($-T)>1e-12*c;){var O=.5*(T+$);if(u.kb.oj(c,a,p.x,p.y,w*O,o.u,g,v,d),C.x=g.u,C.y=v.u,C.x==l)break;if(b.Sn(p.x,C.x,l))$=O;else{if(!b.Sn(r.x,C.x,l))return NaN;T=O}}return C.y},b.Sn=function(c,a,r){return c=A.Cp(c),a=A.mx(c,A.Cp(a)),(r=A.mx(c,A.Cp(r)))==0||0<a&&0<r&&r<=a||0>a&&0>r&&r>=a},b.Zm=function(c,a){var r=a.va-a.oa;return a.It(c-Math.floor((c-a.oa)/r)*r)},b.os=function(c,a,r,o){var l=new u.Nc;for(l.K(a,r),r=o.R(),c=Math.floor((c-a)/r)*r+c,l=l.sf();Math.abs(c-l)>Math.abs(c+r-l);)c+=r;return c},b.Lz=function(c,a,r,o,l){if(r.y>o.y)var d=o;else d=r,r=o;if((o=new u.Nc).K(d.y,r.y),!o.contains(0)||3.141592653589793<=Math.abs(d.x-r.x))return NaN;if(d.x==r.x)return d.x;var p=new u.ga(0),g=new u.ga(0),v=new u.ga(0);u.kb.wd(c,a,d.x,d.y,r.x,r.y,g,p,null,l);var w=g.u,T=0,$=1,C=new u.h;for(C.L(d);w*($-T)>1e-12*c;){var O=.5*(T+$);if(u.kb.oj(c,a,d.x,d.y,w*O,p.u,g,v,l),C.x=g.u,C.y=v.u,o.K(d.y,C.y),C.y==0)break;if(o.contains(0))$=O;else{if(o.K(r.y,C.y),!o.contains(0))return NaN;T=O}}return C.x},b.Hp=function(c,a,r,o,l,d,p){var g=new u.l;if(c.A(g),g.B())return c;var v=new u.Nc;g.cn(v);var w=new u.Nc;if(w.K(a,a+r),w.contains(v)&&w.va!=v.va)return c;var T=new u.l;T.K(g);var $=c.getType();if($==33)return((g=(T=l?c:c.Of()).Lg())<w.oa||g>=w.va||p&&g==w.va)&&(g+=Math.ceil((w.oa-g)/r)*r,g=w.It(g),T.cC(g)),T;if($==550){for(o=(T=l?c:c.Of()).ub(0),$=2*T.I(),c=!1,l=0;l<$;l+=2)((g=o.read(l))<w.oa||g>=w.va||p&&g==w.va)&&(c=!0,g+=Math.ceil((w.oa-g)/r)*r,g=w.It(g),o.write(l,g));return c&&T.Pc(1993),T}if(w.contains(v))return c;if($==197)return r=l?c:c.Of(),g.Ea(T),r.Xo(g),r;var C=.1*Math.max(g.ca(),g.R());for(T.W(0,C),p=c,w=o.Xd(0),c=u.Gh.local(),l=new u.Dd;;){var O=Math.floor((v.oa-a)/r),N=Math.ceil((v.va-a)/r);if(!(3<N-O))break;O=Math.floor(.5*(N+O)),T.v=g.v-C,T.C=a+r*O;var R=u.Ud.clip(p,T,w,d);T.v=T.C,T.C=g.C+C;var F=u.Ud.clip(p,T,w,d);l.gg((O-N)*r,0),F.Oc(l),$==1736?p=c.V(R,F,o,null):(p=R).add(F,!1),p.A(g),g.cn(v)}for(T.v=a,T.C=a+r,(a=new u.l).K(T),a.W(w,0),(a=Math.floor((g.v-T.v)/r)*r)!=0?(T.move(a,0),l.gg(-a,0)):l.RB(),a=$==1607?new u.Ta(p.description):new u.Da(p.description),d=new u.l,v=new u.l;g.C>T.v;)(C=u.Ud.clip(p,T,w,0)).A(v),($==1607?!C.B()&&(v.R()>w||v.ca()>w):!C.B()&&($!=1736||v.R()>w))&&(C.Oc(l),C.A(v),a.A(d),d.W(w,w),d.isIntersecting(v)&&$==1736?a=c.V(a,C,o,null):a.add(C,!1)),T.move(r,0),l.shift(-r,0);return a},b.WI=function(c,a,r,o){var l=new u.de(r.description);l.Fd(r,0,-1),l=u.cb.zh(l,c,a);var d=r.I();if(o.Oa(),!u.cb.Wc(c)||d!=l.I())return!1;var p=new u.l;r.A(p);var g=new u.l;if(l.A(g),p=p.R(),g=g.R(),p!=0&&g!=0){if(g/=p,c=u.cb.gh(a).R()/u.cb.gh(c).R(),1e-10<Math.abs(g/c-1))return!1}else if(p!=0||g!=0)return!1;for(o.add(r,!1),r=0;r<d;r++)c=l.Na(r),o.Cb(r,c);return!0},b.Oz=function(){throw u.i.Ie()},b}()}(V||(V={})),function(u){var A,b,c;(b=A=u.si||(u.si={}))[b.Clip=0]="Clip",b[b.DontClip=1]="DontClip",b[b.PannableFold=2]="PannableFold",function(a){a[a.Geodesic=0]="Geodesic",a[a.Loxodrome=1]="Loxodrome",a[a.GreatElliptic=2]="GreatElliptic",a[a.NormalSection=3]="NormalSection",a[a.ShapePreserving=4]="ShapePreserving"}(c=u.WK||(u.WK={})),u.zb=function(){function a(){}return a.xv=function(r,o,l){if(l||0<o){for(r=r.toString(u.Sc.PE_STR_NAME_CANON|u.Sc.PE_STR_AUTH_NONE),o=[],l=0;l<r.length;l++)o[l]="a"<=r[l]&&"z">=r[l]?o[l]=r[l].toUpperCase():r[l];return o.join()}return r.toString(u.Sc.PE_STR_AUTH_TOP)},a.ur=function(r,o,l,d){var p=d.length,g=l.I();if(g!=0){var v=l.ub(0),w=Math.min(g,p),T=0,$=r.eh();isNaN(o)&&(o=0);for(var C=r.Wc(),O=179*(r=C?r.sc().Oe().R():0)/360;0<g;){if(v.uB(T<<1,w,d),u.ej.projToGeogCenter($,w,d,o),C)for(var N=0;N<w;N++){var R=d[N][0]-o,F=u.lc.sign(R),G=v.read(2*(T+N));0>F*u.lc.sign(G)&&Math.abs(R)>O&&(d[N][0]+=-F*r)}v.uC(T<<1,w,d),T+=w,g-=w,w=Math.min(g,p)}l.Pc(1993)}},a.IL=function(r,o,l,d){var p=0,g=r.eh();isNaN(p)&&(p=0);var v=r.Wc(),w=r.bf();r=360*w,w*=179;for(var T=d.length,$=0;$<l;){for(var C=$;C<l&&o[C].isNaN();++C)$++;var O=Math.min(T,l-$);if(0<O){C=1;for(var N=$+1;C<O;++C,++N)if(o[N].isNaN()){O=C;break}if(u.ta.Jy(d,o,$,O),u.ej.projToGeogCenter(g,O,d,p),v)for(C=0,N=$;C<O;++C,++N){var R=o[N].x,F=d[C][0]-p,G=u.lc.sign(F);0>G*u.lc.sign(R)&&Math.abs(F)>w&&(d[C][0]-=G*r)}u.ta.Iy(o,$,d,O),$+=O}}},a.Lx=function(r,o,l){var d=l.length,p=o.I();if(!(1>p)){var g=o.ub(0),v=Math.min(p,d),w=0,T=r.eh(),$=r.Wc(),C=$?r.Oe().R():0,O=179*C/360,N=0;for($&&(N=r.zi());0<p;){if(g.uB(w<<1,v,l),u.ej.geogToProj(T,v,l),$)for(r=0;r<v;r++){var R=l[r][0],F=u.lc.sign(R),G=g.read(2*(w+r))-N;0>F*u.lc.sign(G)&&Math.abs(R)>O&&(l[r][0]+=-F*C)}g.uC(w<<1,v,l),w+=v,p-=v,v=Math.min(p,d)}o.Pc(1993)}},a.HL=function(r,o,l,d){if(l!=0){var p=r.eh(),g=r.Wc(),v=g?r.Oe().R():0,w=179*v/360,T=0;for(g&&(T=r.zi()),r=0;r<l;){for(var $=r;$<l&&o[$].isNaN();++$)r++;var C=Math.min(d.length,l-r);if(0<C){$=1;for(var O=r+1;$<C;++$,++O)if(o[O].isNaN()){C=$;break}if(u.ta.Jy(d,o,r,C),u.ej.geogToProj(p,C,d),g)for($=0,O=r;$<C;$++){var N=d[$][0],R=u.lc.sign(N);0>R*u.lc.sign(o[O].x-T)&&Math.abs(N)>w&&(d[$][0]-=R*v)}u.ta.Iy(o,r,d,C),r+=C}}}},a.tr=function(r,o,l,d){var p=o.I();if(p!=0){var g=o.ub(0),v=r.ef,w=r.Yf,T=v.sc().Qp(),$=w.sc().Qp(),C=v.bf(),O=w.bf();if((r=r.Wf)==null||r.count()==0){for(l=T/$,d=(v.Up()-w.Up())*O,$=-90*C,r=90*C,T=!1,O=1,v=2*p;O<v;)C=g.get(O),(w=u.O.Rk(C,$,r))!=C&&(g.set(O,w),T=!0),O+=2;if(d!=0||l!=1)for(T=!0,$=new u.h,O=0;O<p;O++)g.tc(2*O,$),$.x*=l,$.x+=d,$.y*=l,g.Tt(2*O,$);T&&o.Pc(1993)}else{v=d.length,w=Math.min(p,v);var N=u.O.lg(w),R=null,F=0,G=NaN,z=NaN,B=360*O,q=O/C;l&&(z=90*O,G=89.9*C,R=u.O.lg(w));for(var K=!0,ee=0;p!=0;){for(C=!1,g.uB(F<<1,w,d),O=0;O<w;O++)N[O]=d[O][0];if(l)for(O=0;O<w;O++){var oe=Math.abs(d[O][1])-G;0<oe&&(C=d[O][1],d[O][1]=u.lc.Cn(G,C),R[O]=u.lc.Cn(oe,C),C=!0)}for(O=d[0][0],r.transform(d,w,T,$),K&&(ee=d[0][0]-q*O,K=!1),O=0;O<w;O++)oe=d[O][0]-N[O]*q-ee,200<Math.abs(oe)&&(d[O][0]=0<oe?d[O][0]-B:d[O][0]+B);if(C){for(O=0;O<w;O++)R[O]!=0&&(d[O][1]+=q*R[O],d[O][1]>z?d[O][1]=z:d[O][1]<-z&&(d[O][1]=-z));for(C=0;C<w;C++)R[C]=0}g.uC(F<<1,w,d),F+=w,p-=w,w=Math.min(p,v)}o.Pc(1993)}}},a.GL=function(r,o,l,d){if(r.mw)d=90*r.ef.bf(),u.ta.dK(o,l,-d,d);else{var p=r.Wf,g=r.ef,v=r.Yf;r=g.Xr();var w=v.Xr(),T=g.bf(),$=90*T,C=v.bf();if(p==null||p.count()==0){if(d=r/w,p=(g.Up()-v.Up())*C,u.ta.dK(o,l,-$,$),p!=0||d!=1)for(C=0;C<l;C++)o[C].x*=d,o[C].x+=p,o[C].y*=d}else{g=Math.min(l,d.length),$=u.O.lg(g),v=360*C,T=C/T;for(var O=!0,N=0,R=0;l!=0;){for(C=0;C<g;C++)$[C]=o[C+R].x;for(C=o[0].x,u.ta.Jy(d,o,R,g),p.transform(d,g,r,w),u.ta.Iy(o,R,d,g),O&&(N=o[0].x-T*C,O=!1),C=0;C<g;C++){var F=o[R+C].x-$[C]*T-N;200<Math.abs(F)&&(o[R+C].x=0<F?o[R+C].x-v:o[R+C].x+v)}R+=g,l-=g,g=Math.min(l,d.length)}}}},a.dv=function(r,o){return r=r.gh(),isNaN(o)||r.Ju(o,0),r},a.UQ=function(r,o,l,d,p,g,v,w){for(var T=a.dv(d,p),$=T.R(),C=$/360,O=a.pE*C,N=r.ub(0),R=o.Wc(),F=R?$/o.Oe().R():0,G=!1,z=new u.Da(l.description),B=0,q=l.da();B<q;++B){var K=R,ee=new u.Ta(l.description);if(ee.addPath(l,B,!0),v!=0){var oe=a.PD(!0,ee,T.H-w,T.H,v);(G=G||oe)&&(K=!1)}var ue=-1;K&&(ue=r.Ba(B));var we=ee.ub(0),me=ee.I(),Re=0,fe=we.read(0),Ye=0;oe=3*d.Xd(0);var Ve=!1,ft=new u.h;ft.Rc();var jt=new u.h;jt.Rc();for(var Oi=!1,Bt=1;Bt<me;++Bt){var gt=u.h.construct(we.eg(2*Bt),we.eg(2*Bt+1)),Xe=gt.x,st=Xe+Re,hi=st-fe;if(gt.x=st,Math.abs(hi)>O){if(K){var Yt=ue+(Bt+1<me?Bt:0),ns=N.read(2*(ue+Bt-1));Yt=(N.read(2*Yt)-ns)*F,Math.abs(hi-Yt)>1*C&&(K=!1)}K||(st=Xe+(Re-=u.lc.Cn($,st-fe)),++Ye,Oi=Re!=0,gt.x=st)}else Ve||u.ta.AG(jt,ft,gt,oe)&&(Ve=!0);Oi&&we.write(2*Bt,st),fe=st,jt.L(ft),ft.L(gt)}0<Ye&&ee.Pc(1993),K=ee.Na(0),me=ee.Na(me-1),ee=u.h.tb(K,me)<oe?a.uQ(ee,d,p,g,Ve):a.vQ(r,B,ee,d,p),z.add(ee,!1)}return p=d.Xd(0),l=T.R()/180,a.Jt(z,T,.1*p,!1),z=z!=(p=u.ri.clip(z,T,p,l,g)),r=r.Ke(),v=0,0<(w=p.Ke())&&0>r?v=1:0>=w&&0<r&&(w==0?(w=NaN,o.Sb()==2?w=o.ml().Ke():o.Sb()==1&&(w=o.Oe().wF()),r>.99*w&&(v=-1)):v=-1),v!=0&&((o=new u.Da(p.description)).tp(T),(o=u.Xl.local().V(o,l,g)).add(p,!1),z=!0,p=o),z&&(p=u.Yl.local().V(p,d,!1,g)),p},a.vQ=function(r,o,l,d,p){var g=l.I(),v=l.Na(0),w=l.Na(g-1);p=(d=a.dv(d,p)).R(),v=u.lc.sign(w.x-v.x);var T=new u.l;l.xc(T);var $=d.gk();if(w=$-p,$+=p,0<=v){var C=Math.ceil((w-T.v)/p);for(C*=p;w>T.v+C;)C+=p;for(;w<T.C+C;)C-=p;var O=C;720<T.R()&&($=w+360*Math.ceil(T.R()/360))}else{for(C=Math.ceil(($-T.C)/p),C*=p;$<T.C+C;)C-=p;for(;$>T.v+C;)C+=p;O=C,720<T.R()&&(w=$-360*Math.ceil(T.R()/360))}C=v*p;var N=u.l.construct(T.v,T.G,T.C,T.H);N.move(O,0);var R=new u.Dd;R.gg(O,0),l.Oc(R),(T=new u.Ta(l.description)).add(l,!1),O=l.Na(g-1),p=0;for(var F=T.Na(0).x,G=0;0<v?N.C<$:N.v>w;)1024<=G&&(G=0),N.move(C,0),R.Gb=C,l.Oc(R),F+=C,d.v<=F&&d.C>=F&&(p=T.I()-1),l.Cb(0,O),O=l.Na(g-1),T.Dr(l,0,0,g-1,!1);return l=new u.Da(T.description),g=0<r.Ir(o),l.add(T,!1),r=T.Na(0),w=T.Na(T.I()-1),o=l.da()-1,(0>v?g:!g)?(v=u.h.construct(w.x,d.H),l.Ci(v),v=u.h.construct(d.gk(),d.H),l.Ci(v),d=u.h.construct(r.x,d.H)):(v=u.h.construct(w.x,d.G),l.Ci(v),v=u.h.construct(d.gk(),d.G),l.Ci(v),d=u.h.construct(r.x,d.G)),l.Ci(d),l.xG(0,o,0),l.kO(p),l},a.uQ=function(r,o,l,d,p){var g=new u.Da(r.description);g.add(r,!1),g.DB(0,g.I()-1);var v=new u.l;g.xc(v);var w=(l=a.dv(o,l)).R(),T=Math.ceil((l.v-v.v)/w);for(T*=w;l.v>v.v+T;)T+=w;for(;l.v<v.C+T;)T-=w;if((T+=w)!=0){v.move(T,0);var $=new u.Dd;$.gg(T,0),g.Oc($)}if(l.v<=v.v&&l.C>v.C)return p&&(p=g.Ke(),o=(g=u.Yl.local().V(g,o,!0,d)).Ke(),(o=u.lc.sign(p)!=u.lc.sign(o))&&g.oJ()),g;for((r=new u.Da(r.description)).add(g,!1),p=p||v.R()>w-o.Xd(0);v.v<l.C;)v.move(w,0),($=new u.Dd).gg(w,0),g.Oc($),r.add(g,!1);return p&&(p=r.Ke(),r.Yo(1),o=(r=u.Yl.local().V(r,o,!0,d)).Ke(),(o=u.lc.sign(p)!=u.lc.sign(o))&&r.oJ()),r},a.PD=function(r,o,l,d,p){for(var g=o.ub(0),v=o.I(),w=!1,T=0;T<v;T++){var $=u.h.construct(g.eg(2*T),g.eg(2*T+1));if(1&p&&$.y>=l){w=!0;break}if(2&p&&$.y<=-l){w=!0;break}}if(!w)return!1;g=!1,r&&(g=o.Nn(0)),v=(r=new u.gd).Ib(o),w=r.Ob(v);var C=-1,O=!0,N=new u.h;N.Rc(),T=new u.Sa;for(var R=-1,F=r.Xa(w);F!=-1;F=r.U(F)){$=r.Na(F);var G=1&p&&90<=$.y?1:0;if(G|=2&p&&$.y<=-l?2:0,0<C&&C!=G){if(N.x!=$.x){N.x=$.x,r.Vi(r.Ma(F),T);var z=r.wj(w,F,T);r.mf(z,N)}if(g)for(R=R!=-1?r.U(R):r.Xa(w),z=r.Ma(F);R!=z;)R=r.pd(R,!1);R=-1}0<G&&($.y=u.lc.Cn(d,$.y),r.mf(F,$),O||C==G||($.x!=N.x?(r.Vi(F,T),z=r.wj(w,F,T),r.Cb(z,N.x,$.y),R=z):R=F)),C=G,N=$,O=!1}if(g){if(R!=-1)for(R=r.U(R);R!=-1;)R=r.pd(R,!1);l=r.Xa(w),r.fq(l,r.rj(w))||(r.Vi(l,T),r.wj(w,-1,T))}return r.Ne(v).copyTo(o),!0},a.Mz=function(r,o,l,d){var p=r;if(p.B()||l==A.DontClip)return p;var g=p.getType();if(g==33)return p=[(d=p).D()],a.yG(p,1,o,l),p[0].isNaN()?d.Oa():d.Cb(p[0]),r;var v=(r=o.sc()).bf(),w=90*v,T=180*v,$=360*v,C=o.zi(),O=.5*v,N=new u.l;p.A(N);var R=o.Vr(),F=o.PQ(),G=R.getType()==197;if(o=new u.l,R.A(o),l==A.PannableFold&&(l=r.Oe().R(),o.v=C-.5*l,o.C=o.v+l),N.G<-w||N.H>w){if(new u.l().K(N.v-v,-w,N.C+v,w),(p=u.ri.Nu(p,o,r,NaN,0,d)).B())return p;p.A(N)}if(F&&(o.H<N.G||o.G>N.H))return p.Ia();if(N.R()>$&&(p=a.Hp(p,C-T,$,r,!0,0,!0,d)).A(N),(w=a.eO(N.v,N.C,o.v,o.C,$))!=0&&N.move(w,0),N.C>o.C||N.v<o.v){if(N.C>o.C)for(;N.v>=o.C;)N.move(-$,0),w-=$;for(;N.v<o.C-$;)N.move($,0),w+=$}if(l=u.ta.Hu(r,R),w!=0&&((v=new u.Dd).gg(w,0),p.Oc(v)),F){if(G&&o.contains(N))return p;for(F=[null,null],w=0;2>w;w++){if(G?v=u.aa.Hc(g)?u.ri.clip(p,o,l,O,d):u.ri.clip(p,o,l,0,d):(v=u.Xj.local().V(p,R,r,d))==R&&(v=u.aa.jg(v)),o.v<=N.v&&o.C>=N.C||o.v>=N.v&&o.C<=N.C)return v;F[w]=v,w==0&&(N.move(-$,0),(v=new u.Dd).gg(-$,0),p.Oc(v))}if(g==550)F[0].Fd(F[1],0,-1);else if(u.aa.Hc(g))F[0].add(F[1],!1);else{if(g!=33)throw u.i.fa("intersect_with_GCS_horizon: unexpected geometry type");F[0].B()&&(F[0]=F[1])}return F[0]}if(o.H<N.G||o.G>N.H)return p;for(g=0;!p.B()&&N.C>o.v;)g!=0&&((v=new u.Dd).gg(g,0),p.Oc(v)),u.dj.local().V(4,p,R,r,d)||R==(p=u.kp.local().V(p,R,r,d))&&(p=u.aa.jg(p)),g!=0&&((O=new u.Dd).gg(-g,0),p.Oc(O)),g-=$,N.move(-$,0);return p},a.yG=function(r,o,l,d){if(o!=0&&d!=A.DontClip)if(d==A.PannableFold){d=l.HR();for(var p=o,g=0;g<o;g++)(r[g].y>d.H||r[g].y<d.G)&&(r[g].Rc(),p--);p!=0&&a.av(r,o,d.v,d.R())}else{var v=90*(d=l.bf()),w=180*d;for(d*=360,p=o,g=0;g<o;g++)(r[g].y>v||r[g].y<-v)&&(r[g].Rc(),p--);if(p!=0){(p=new u.l).Zw(r,o),v=l.Vr();var T=l.hv();g=v.getType()==197;var $=new u.l;if(v.A($),!T||!($.H<p.G||$.G>p.H))if(T)if(a.av(r,o,$.gk()-w,d),p=o,g)for(g=0;g<o;g++)$.contains(r[g])||(r[g].Rc(),p--);else for(l=u.ta.Hu(l.sc(),v),g=0;g<o;g++)(w=u.hd.Yd(v,r[g],l)!=0)||(r[g].Rc(),p--);else for(a.av(r,o,-w,d),p=o,l=u.ta.Hu(l.sc(),v),g=0;g<o;g++)(w=r[g]).isNaN()&&p--,T=a.tE(w.x,$.v,$.C,d),w.x+=T,(w=u.hd.Yd(v,w,l)!=0)&&(r[g].Rc(),p--)}}},a.Hp=function(r,o,l,d,p,g,v,w){var T=r.getType(),$=o+l;if(T===33){var C=(d=p?r:r.Of()).Lg();return(C<o||C>=$||v&&C==$)&&(C+=Math.ceil((o-C)/l)*l,C=u.O.Rk(C,o,$),d.cC(C)),d}if(r.B()||(C=new u.l,r.A(C),C.B()))return r;var O=new u.Nc;C.cn(O);var N=new u.Nc;if(N.K(o,$),N.contains(O))return r;if(($=new u.l).K(C),T===550){for(w=(d=p?r:r.Of()).ub(0),T=2*d.I(),$=!1,o=0;o<T;o+=2)((C=w.read(o))<N.oa||C>=N.va||v&&C==N.va)&&($=!0,C+=Math.ceil((N.oa-C)/l)*l,C=N.It(C),w.write(o,C));return $&&d.Pc(1993),d}if(T==197)return l=p?r:r.Of(),C.Ea($),l.Xo(C),l;var R=.1*Math.max(C.ca(),C.R());for($.W(0,R),v=r,N=d.Xd(0),r=u.Gh.local(),p=new u.Dd;;){var F=Math.floor((O.oa-o)/l),G=Math.ceil((O.va-o)/l);if(!(3<G-F))break;F=Math.floor(.5*(G+F)),$.v=C.v-R,$.C=o+l*F;var z=u.ri.clip(v,$,N,g,w);$.v=$.C,$.C=C.C+R;var B=u.ri.clip(v,$,N,g,w);p.gg((F-G)*l,0),B.Oc(p),T==1736?v=r.V(z,B,d,null):(v=z).add(B,!1),v.A(C),C.cn(O)}for($.v=o,$.C=o+l,(o=new u.l).K($),o.W(N,0),(o=Math.floor((C.v-$.v)/l)*l)!=0?($.move(o,0),p.gg(-o,0)):p.RB(),o=T==1607?new u.Ta(v.description):new u.Da(v.description),g=new u.l,O=new u.l;C.C>$.v;)(R=u.ri.clip(v,$,N,0,w)).A(O),(T==1607?!R.B()&&(O.R()>N||O.ca()>N):!R.B()&&(T!=1736||O.R()>N))&&(R.Oc(p),R.A(O),o.A(g),g.W(N,N),g.isIntersecting(O)&&T==1736?o=r.V(o,R,d,null):o.add(R,!1)),$.move(l,0),p.shift(-l,0);return o},a.av=function(r,o,l,d){for(var p=l+d,g=0;g<o;g++){var v=r[g].x;l<=v&&v<p||!(v<l||v>p||v==p)||(v+=Math.ceil((l-v)/d)*d,v=u.O.Rk(v,l,p),r[g].x=v)}},a.Fn=function(r,o,l,d,p,g){if(!o.Wc())throw u.i.fa("fold_into_360_degree_range");if(r.B())return r;if(o.Sb()==2){l=o.pv();var v=o.ov()-l}else{var w=o.bf();v=360*w,l-=180*w}return a.Hp(r,l,v,o,d,p,!0,g)},a.qF=function(r,o,l,d){if(l.Sb()==2)d=l.pv(),l=l.ov()-d;else{var p=l.bf();l=360*p,d-=180*p}a.av(r,o,d,l)},a.lj=function(r,o){var l=o.Oe();if(r.getType()==33){var d=r.ih();return l.G<=d&&d<=l.H?r:r.Ia()}d=new u.l,r.A(d);var p=new u.l;return p.K(l),p.v=d.v,p.C=d.C,p.W(.01*p.ca(),0),l=u.ta.uy(o,d),p.contains(d)?r:u.ri.clip(r,p,l,0,null)},a.ir=function(r,o,l){return r>o.C&&r-o.C<l?o.C:r<o.v&&o.v-r<l?o.v:r},a.FX=function(r,o,l,d){d.x=a.ir(r.x,o,l),d.y=r.y},a.EX=function(r,o,l,d){for(var p=0;p<o;p++)r[p].y<l.G||r[p].y>l.H?r[p].Rc():r[p].x=a.ir(r[p].x,l,d)},a.Jt=function(r,o,l,d){if(!r.B()){var p=r.getType();if(!d||p!=1736)if(u.aa.xj(p)){d=r.ub(0),p=0;for(var g=r.I();p<g;p++){var v=d.read(2*p),w=a.ir(v,o,l);w!=v&&d.write(2*p,w)}r.Pc(1993)}else if(p==197)d=new u.l,r.A(d),d.v=a.ir(d.v,o,l),d.C=a.ir(d.C,o,l),r.Xo(d);else{if(p!=33)throw u.i.fa("internal error");r.cC(a.ir(r.Lg(),o,l))}}},a.uS=function(r,o,l,d){var p=new u.gd,g=p.Ib(r);return r=u.ta.Hu(o,r),a.ks(p,g,o,r,l,!0,d),p.Ne(g)},a.ks=function(r,o,l,d,p,g,v){if(!l.Wc())throw u.i.N("invalid call");var w=l.Oe(),T=l.sc(),$=T.eh().getDatum().getSpheroid();T=T.Hd().ai;var C=$.getFlattening();$=$.getAxis(),C*=2-C;var O=new u.Nc;w.cn(O);var N=null,R=[[0,0],[0,0]];if(l.Sb()==2?(N=l.eh(),g?(R[0][0]=a.Zm(v,O),R[0][1]=w.Jp(),u.ej.projToGeog(N,1,R),w=R[0][0]*T):(R[0][0]=w.gk(),R[0][1]=v,u.ej.projToGeog(N,1,R),w=R[0][1]*T)):w=v*T,!g&&w!=0&&p!=c.GreatElliptic)throw u.i.fa("invalid argument");var F=new u.ga,G=[0],z=new u.h,B=new u.h,q=new u.h,K=[null,null],ee=new u.h,oe=new u.h,ue=new u.h,we=new u.h;for(o=r.Ob(o);o!=-1;o=r.Rb(o)){var me=r.Xa(o);r.D(me,ee);for(var Re=!1,fe=me=r.U(me);fe!=-1;fe=r.U(fe)){if(fe==me){if(Re)break;Re=!0}if(r.D(fe,oe),g&&(d<v-ee.x&&oe.x-v>d||d<v-oe.x&&ee.x-v>d)||!g&&(v!=0||d<-ee.y&&oe.y>d||d<-oe.y&&ee.y>d))do if(!(Math.abs(ee.x-oe.x)>=.5*O.R())){if(l.Sb()==2?(R[0][0]=a.Zm(ee.x,O),R[0][1]=ee.y,R[1][0]=a.Zm(oe.x,O),R[1][1]=oe.y,u.ej.projToGeogCenter(N,2,R,0),ue.x=R[0][0]*T,ue.y=R[0][1]*T,we.y=R[1][1]*T):(ue.x=ee.x*T,ue.y=ee.y*T,we.y=oe.y*T),we.x=2*(oe.x-ee.x)*Math.PI/O.R()+ue.x,g){if(B.x=w,B.y=a.Nz($,C,ue,we,w,p),isNaN(B.y))break;K[0]=B;var Ye=1}else if(p==c.GreatElliptic){var Ve=[0,0];if((Ye=u.Ox.Oz(C,ue,we,w,Ve))==0)break;B.x=Ve[0],B.y=w,K[0]=B,Ye==2&&(q.x=Ve[1],q.y=w,K[1]=q)}else{if(B.x=a.Lz($,C,ue,we,p),isNaN(B.x))break;B.y=0,K[0]=B,Ye=1}var ft=-1;for(Ve=0;Ve<Ye;Ve++){u.kb.wd($,C,ue.x,ue.y,we.x,we.y,F,null,null,p);var jt=F.u;u.kb.wd($,C,ue.x,ue.y,K[Ve].x,K[Ve].y,F,null,null,p);var Oi=F.u;if(l.Sb()==2?(R[0][0]=K[Ve].x/T,R[0][1]=K[Ve].y/T,u.ej.geogToProj(N,1,R),g?(z.y=R[0][1],z.x=v):(z.x=a.os(R[0][0],ee.x,oe.x,O),z.y=v)):g?(z.x=v,z.y=K[Ve].y/T):(z.x=a.os(K[Ve].x/T,ee.x,oe.x,O),z.y=v),G[0]=0<jt?u.O.Rk(Oi/jt,0,1):.5,G[0]==0||G[0]==1)break;ft>G[0]||(ft=r.Ma(fe),r.Ul(ft,G,1),r.Cb(r.U(ft),z.x,z.y),ft=G[0])}}while(!1);ee.L(oe)}}},a.Zm=function(r,o){var l=o.va-o.oa;return o.It(r-Math.floor((r-o.oa)/l)*l)},a.os=function(r,o,l,d){var p=new u.Nc;for(p.K(o,l),l=d.R(),r=Math.floor((r-o)/l)*l+r,p=p.sf();Math.abs(r-p)>Math.abs(r+l-p);)r+=l;return r},a.Sn=function(r,o,l){return r=u.qr.Cp(r),o=u.qr.mx(r,u.qr.Cp(o)),(l=u.qr.mx(r,u.qr.Cp(l)))==0||0<o&&0<l&&l<=o||0>o&&0>l&&l>=o},a.Nz=function(r,o,l,d,p,g){if(g==c.GreatElliptic)return u.Ox.SS(o,l,d,p);if(Math.abs(l.x-d.x)>=Math.PI||!a.Sn(l.x,d.x,p))return NaN;if(l.x>d.x)var v=d;else v=l,l=d;d=new u.ga;var w=new u.ga,T=new u.ga;u.kb.wd(r,o,v.x,v.y,l.x,l.y,w,d,null,g);var $=w.u,C=0,O=1,N=new u.h;for(N.L(v);$*(O-C)>1e-12*r;){var R=.5*(C+O);if(u.kb.oj(r,o,v.x,v.y,$*R,d.u,w,T,g),N.x=w.u,N.y=T.u,N.x==p)break;if(a.Sn(v.x,N.x,p))O=R;else{if(!a.Sn(l.x,N.x,p))return NaN;C=R}}return N.y},a.Lz=function(r,o,l,d,p){if(p==c.GreatElliptic)return r=[0,0],u.Ox.Oz(o,l,d,0,r),r[0];if(l.y>d.y)var g=d;else g=l,l=d;if((d=new u.Nc).K(g.y,l.y),!d.contains(0)||Math.abs(g.x-l.x)>=Math.PI)return NaN;if(g.x==l.x)return g.x;var v=new u.ga,w=new u.ga,T=new u.ga;u.kb.wd(r,o,g.x,g.y,l.x,l.y,w,v,null,p);var $=w.u,C=0,O=1,N=new u.h;for(N.L(g);$*(O-C)>1e-12*r;){var R=.5*(C+O);if(u.kb.oj(r,o,g.x,g.y,$*R,v.u,w,T,p),N.x=w.u,N.y=T.u,d.K(g.y,N.y),N.y==0)break;if(d.contains(0))O=R;else{if(d.K(l.y,N.y),!d.contains(0))return NaN;C=R}}return N.x},a.WI=function(r,o,l,d){if(!r.ef.Wc())return!1;var p=new u.de(o.description);if(p.Fd(o,0,-1),d=u.Hx.local().V(p,r,d),p=o.I(),l.Oa(),p!=d.I())return!1;var g=new u.l;o.A(g);var v=new u.l;if(d.A(v),g=g.R(),v=v.R(),g!=0&&v!=0){if(v/=g,r=r.Yf.gh().R()/r.ef.gh().R(),1e-10<Math.abs(v/r-1))return!1}else if(g!=0||v!=0)return!1;for(l.add(o,!1),o=new u.h,r=0;r<p;r++)d.D(r,o),l.Cb(r,o);return!0},a.qN=function(r,o){return(r%=360*o)>=180*o&&(r-=360*o),r},a.UI=function(r,o,l,d){if(l==A.Clip){var p=o.ml();p.getType()==197?(l=new u.l,p.A(l),p=u.ta.uy(o,l),r=u.ri.clip(r,l,p,5e4*o.pm(),d)):u.dj.local().V(1,p,r,o,d)||(r=u.Xj.local().V(r,p,o,d))==p&&(r=u.Vk.jg(r))}else o.Wc()&&(d=new u.l,r.xc(d),o.Oe().contains(d)||(a.Jt(r,o.Oe(),o.Xd(0),!0),l==A.PannableFold&&(r=a.lj(r,o)),r=a.Fn(r,o,0,!0,1e5*o.pm(),null)));return r},a.XD=function(r,o,l){var d=o.Wr();if(d==null)return r;var p=(o=o.sc()).Oe().R(),g=new u.l;r.xc(g);var v=new u.Nc;g.cn(v),g=d.Ga(),d=null;for(var w=new u.Dd;g.$a();)for(;g.Ha();){var T=g.ha(),$=T.Tg(0,0),C=new u.Nc;for(C.K($.oa,$.va),$=0;C.va>v.oa;)C.move(-p),--$;for(;C.oa<=v.va;){if(C.isIntersecting(v)){d==null&&(d=new u.Ta);var O=u.yb.cP(T.ac(),T.wc());$!=0&&(w.gg($*p,0),O.Oc(w)),d.oc(O,!0)}C.move(p),++$}}return d!=null?(o=u.ta.gO(o,d),o=u.ta.Er(o),u.$t.lP(r,d,o,l)):r},a.eO=function(r,o,l,d,p){return r>=l&&o<=d?0:a.tE(.5*(o+r),l,d,p)},a.tE=function(r,o,l,d){return u.lc.round((.5*(l+o)-r)/d)*d},a.VQ=function(r,o,l,d,p,g,v,w){var T=a.dv(d,p),$=T.R(),C=$/360,O=a.pE*C,N=r.ub(0),R=o.Wc(),F=R?$/o.Oe().R():0;o=r.Ia();for(var G=0,z=l.da();G<z;++G){var B=R,q=new u.Ta(l.description);q.addPath(l,G,!0);var K=l.dc(G);v!=0&&(K=a.PD(K,q,T.H-w,T.H,v))&&(B=!1);var ee=-1;K=q.I();var oe=!1;B&&(ee=r.Ba(G),oe=r.dc(G));var ue=q.ub(0),we=0,me=ue.read(0),Re=0,fe=3*d.Xd(0),Ye=!1,Ve=new u.h;Ve.Rc();var ft=new u.h;ft.Rc();for(var jt=!1,Oi=1;Oi<K;++Oi){var Bt=u.h.construct(ue.eg(2*Oi),ue.eg(2*Oi+1)),gt=Bt.x,Xe=gt+we,st=Xe-me;if(Bt.x=Xe,Math.abs(st)>O){if(B){var hi=ee+Oi-1,Yt=ee;(!oe||Oi+1<K)&&(Yt+=Oi),hi=N.read(2*hi),Yt=(N.read(2*Yt)-hi)*F,Math.abs(st-Yt)>1*C&&(R=!1)}B||(Xe=gt+(we-=u.lc.Cn($,Xe-me)),++Re,jt=we!=0,Bt.x=Xe)}else Ye||u.ta.AG(Ve,ft,Bt,fe)&&(Ye=!0);jt&&ue.write(2*Oi,Xe),me=Xe,Ve.L(ft),ft.L(Bt)}Re!=0&&q.Pc(1993),B=q.Na(0),K=q.Na(K-1),u.h.tb(B,K),q=a.wQ(q,d,isNaN(p)?0:p,g),o.add(q,!1)}return r=d.Xd(0),l=T.R()/180,a.Jt(o,T,.1*r,!1),u.ri.clip(o,T,r,l,g)},a.wQ=function(r,o,l,d){return a.Fn(r,o,l,!0,0,d)},a.OS=function(r,o,l,d){var p=r.getType();if(p==1736)for(o=o!=null?o.Xd(0):0,p=0;p<d;p++)u.hd.Yd(r,l[p],o)!=1&&l[p].Rc();else{if(p!=197)throw u.i.N();for(p=0;p<d;p++)r.dP(l[p])||l[p].Rc()}},a.$k=function(r,o,l,d){if(32>l)for(var p=new u.Sa,g=0;g<l;g++)p.Cb(o[g]),r.$k(p,d).D(o[g]);else{var v=new u.de;for(v.re(3),v.HD(o,l),p=v.ub(3),g=0;g<l;g++)p.write(g,g);for(g=r.$k(v,d),r=g.ub(0),p=g.ub(3),d=u.h.construct(NaN,NaN),v=0;v<l;v++)o[v]=d;for(l=g.I(),g=0;g<l;g++)d=p.read(g),r.tc(2*g,o[d])}},a.Zk=function(r,o,l,d){if(32>l)for(var p=new u.Sa,g=0;g<l;g++)p.Cb(o[g]),r.Zk(p,d).D(o[g]);else{var v=new u.de;for(v.re(3),v.HD(o,l),p=v.ub(3),g=0;g<l;g++)p.write(g,g);for(g=r.Zk(v,d),r=g.ub(0),p=g.ub(3),d=u.h.construct(NaN,NaN),v=0;v<l;v++)o[v]=d;for(l=g.I(),g=0;g<l;g++)d=p.read(g),r.tc(2*g,o[d])}},a.pE=210,a}()}(V||(V={})),function(u){var A;(A=u.UL||(u.UL={}))[A.rightSide=1]="rightSide";var b=function(){function c(a,r,o){this.Bs=new u.h,a===void 0?this.Io=-1:(this.Bs.L(a),this.Io=r,this.Ka=o,this.nw=0)}return c.prototype.WJ=function(a){this.nw=a?1|this.nw:-2&this.nw},c.prototype.B=function(){return 0>this.Io},c.prototype.fz=function(){if(this.B())throw u.i.fa("invalid call");return new u.Sa(this.Bs.x,this.Bs.y)},c.prototype.Ua=function(){if(this.B())throw u.i.fa("invalid call");return this.Io},c.prototype.hz=function(){if(this.B())throw u.i.fa("invalid call");return this.Ka},c.prototype.Sz=function(){return!!(1&this.nw)},c.prototype.ey=function(a,r,o,l){this.Bs.x=a,this.Bs.y=r,this.Io=o,this.Ka=l},c}();u.$l=b}(V||(V={})),function(u){var A=function(){function c(){}return c.prototype.Uo=function(a,r){if(this.th.resize(0),this.Ii.length=0,this.tk=-1,a.xc(this.Ek),this.Ek.W(r,r),this.Ek.isIntersecting(this.Fb.Ca)){var o=a.getType();(this.vs=u.aa.yd(o))?(this.TH=a.ac(),this.SH=a.wc(),this.qa=r):this.qa=NaN,this.th.add(this.Fb.kf),this.Ii.push(this.Fb.Ca),this.Qs=this.Fb.Ur(this.Fb.kf)}else this.Qs=-1},c.prototype.Xi=function(a,r){this.th.resize(0),this.Ii.length=0,this.tk=-1,this.Ek.K(a),this.Ek.W(r,r),this.qa=NaN,this.Ek.isIntersecting(this.Fb.Ca)?(this.th.add(this.Fb.kf),this.Ii.push(this.Fb.Ca),this.Qs=this.Fb.Ur(this.Fb.kf),this.vs=!1):this.Qs=-1},c.prototype.next=function(){if(this.th.size==0)return-1;this.tk=this.Qs;var a=null,r=null,o=null,l=null;this.vs&&(a=new u.h,r=new u.h,o=new u.l);for(var d=!1;!d;){for(;this.tk!=-1;){var p=this.Fb.bz(this.Fb.fv(this.tk));if(p.isIntersecting(this.Ek)){if(!this.vs){d=!0;break}if(a.L(this.TH),r.L(this.SH),o.K(p),o.W(this.qa,this.qa),0<o.zy(a,r)){d=!0;break}}this.tk=this.Fb.nv(this.tk)}if(this.tk==-1){p=this.th.Fc();var g=this.Ii[this.Ii.length-1];for(l==null&&((l=[])[0]=new u.l,l[1]=new u.l,l[2]=new u.l,l[3]=new u.l),b.EJ(g,l),this.th.If(),--this.Ii.length,g=0;4>g;g++){var v=this.Fb.Lp(p,g);if(v!=-1&&0<this.Fb.WR(v)&&l[g].isIntersecting(this.Ek))if(this.vs){if(a.L(this.TH),r.L(this.SH),o.K(l[g]),o.W(this.qa,this.qa),0<o.zy(a,r)){var w=new u.l;w.K(l[g]),this.th.add(v),this.Ii.push(w)}}else(w=new u.l).K(l[g]),this.th.add(v),this.Ii.push(w)}if(this.th.size==0)return-1;this.tk=this.Fb.Ur(this.th.get(this.th.size-1))}}return this.Qs=this.Fb.nv(this.tk),this.tk},c.bP=function(a,r,o){var l=new c;return l.Fb=a,l.Ek=new u.l,l.th=new u.ia(0),l.Ii=[],l.Uo(r,o),l},c.aP=function(a,r,o){var l=new c;return l.Fb=a,l.Ek=new u.l,l.th=new u.ia(0),l.Ii=[],l.Xi(r,o),l},c.$O=function(a){var r=new c;return r.Fb=a,r.Ek=new u.l,r.th=new u.ia(0),r.Ii=[],r},c}();u.GY=A;var b=function(){function c(a,r){this.jf=new u.$c(11),this.Zh=new u.$c(5),this.ws=[],this.gw=new u.ia(0),this.Ca=new u.l,this.Nk(a,r)}return c.prototype.reset=function(a,r){this.jf.mj(!1),this.Zh.mj(!1),this.ws.length=0,this.gw.clear(!1),this.Nk(a,r)},c.prototype.vj=function(a,r){return this.zv(a,r,0,this.Ca,this.kf,!1,-1)},c.prototype.Jz=function(a,r,o){o=o==-1?this.kf:this.WF(o);var l=this.ca(o),d=this.oR(o);return this.zv(a,r,l,d,o,!1,-1)},c.prototype.ja=function(a){return this.jR(a)},c.prototype.GF=function(a){return this.bz(this.fv(a))},c.prototype.ca=function(a){return this.jv(a)},c.prototype.oR=function(a){var r=new u.l;r.K(this.Ca);var o=this.jv(a);a=this.QF(a);for(var l=0;l<2*o;l+=2){var d=u.O.truncate(3&a>>l);d==0?(r.v=.5*(r.v+r.C),r.G=.5*(r.G+r.H)):d==1?(r.C=.5*(r.v+r.C),r.G=.5*(r.G+r.H)):(d==2?r.C=.5*(r.v+r.C):r.v=.5*(r.v+r.C),r.H=.5*(r.G+r.H))}return r},c.prototype.WR=function(a){return this.Az(a)},c.prototype.vR=function(a,r){return A.bP(this,a,r)},c.prototype.MF=function(a,r){return A.aP(this,a,r)},c.prototype.getIterator=function(){return A.$O(this)},c.prototype.Nk=function(a,r){if(0>r||32<2*r)throw u.i.N("invalid height");this.BT=r,this.Ca.K(a),this.kf=this.jf.Ce(),this.jx(this.kf,0),this.ax(this.kf,0),this.NJ(this.kf,0),this.KJ(this.kf,0)},c.prototype.zv=function(a,r,o,l,d,p,g){if(!l.contains(r))return o==0?-1:this.zv(a,r,0,this.Ca,this.kf,p,g);if(!p)for(var v=d;v!=-1;v=this.IR(v))this.jx(v,this.Az(v)+1);(v=new u.l).K(l),l=d;var w=[];for(w[0]=new u.l,w[1]=new u.l,w[2]=new u.l,w[3]=new u.l;o<this.BT&&this.iO(l);o++){c.EJ(v,w);for(var T=!1,$=0;4>$;$++)if(w[$].contains(r)){T=!0;var C=this.Lp(l,$);C==-1&&(C=this.rP(l,$)),this.jx(C,this.Az(C)+1),l=C,v.K(w[$]);break}if(!T)break}return this.sS(a,r,o,v,l,p,d,g)},c.prototype.sS=function(a,r,o,l,d,p,g,v){var w=this.NF(d);if(p){if(d==g)return v;this.SP(v),p=v}else p=this.tP(),this.NB(p,a),this.KW(this.fv(p),r);return this.mX(p,d),w!=-1?(this.hx(p,w),this.bx(w,p)):this.GJ(d,p),this.SB(d,p),this.ax(d,this.lv(d)+1),this.hO(d)&&this.MQ(o,l,d),p},c.prototype.SP=function(a){var r=this.WF(a),o=this.NF(r),l=this.OR(a),d=this.nv(a);this.Ur(r)==a?(d!=-1?this.hx(d,-1):this.SB(r,-1),this.GJ(r,d)):o==a?(this.bx(l,-1),this.SB(r,l)):(this.hx(d,l),this.bx(l,d)),this.hx(a,-1),this.bx(a,-1),this.ax(r,this.lv(r)-1)},c.EJ=function(a,r){var o=.5*(a.v+a.C),l=.5*(a.G+a.H);r[0].K(o,l,a.C,a.H),r[1].K(a.v,l,o,a.H),r[2].K(a.v,a.G,o,l),r[3].K(o,a.G,a.C,l)},c.prototype.hO=function(a){return this.lv(a)==8&&!this.gG(a)},c.prototype.MQ=function(a,r,o){var l=this.Ur(o);do{var d=this.fv(l),p=this.Zh.T(l,0);d=this.bz(d),this.zv(p,d,a,r,o,!0,l),l=p=this.nv(l)}while(l!=-1)},c.prototype.iO=function(a){return 8<=this.lv(a)||this.gG(a)},c.prototype.gG=function(a){return this.Lp(a,0)!=-1||this.Lp(a,1)!=-1||this.Lp(a,2)!=-1||this.Lp(a,3)!=-1},c.prototype.rP=function(a,r){var o=this.jf.Ce();return this.OW(a,r,o),this.jx(o,0),this.ax(o,0),this.Pk(o,a),this.KJ(o,this.jv(a)+1),this.NJ(o,r<<2*this.jv(a)|this.QF(a)),o},c.prototype.tP=function(){var a=this.Zh.Ce();if(0<this.gw.size){var r=this.gw.Fc();this.gw.If()}else r=this.ws.length,this.ws.push(new u.l);return this.LW(a,r),a},c.prototype.Lp=function(a,r){return this.jf.T(a,r)},c.prototype.OW=function(a,r,o){this.jf.S(a,r,o)},c.prototype.Ur=function(a){return this.jf.T(a,4)},c.prototype.GJ=function(a,r){this.jf.S(a,4,r)},c.prototype.NF=function(a){return this.jf.T(a,5)},c.prototype.SB=function(a,r){this.jf.S(a,5,r)},c.prototype.QF=function(a){return this.jf.T(a,6)},c.prototype.NJ=function(a,r){this.jf.S(a,6,r)},c.prototype.lv=function(a){return this.jf.T(a,7)},c.prototype.Az=function(a){return this.jf.T(a,8)},c.prototype.ax=function(a,r){this.jf.S(a,7,r)},c.prototype.jx=function(a,r){this.jf.S(a,8,r)},c.prototype.IR=function(a){return this.jf.T(a,9)},c.prototype.Pk=function(a,r){this.jf.S(a,9,r)},c.prototype.jv=function(a){return this.jf.T(a,10)},c.prototype.KJ=function(a,r){this.jf.S(a,10,r)},c.prototype.jR=function(a){return this.Zh.T(a,0)},c.prototype.NB=function(a,r){this.Zh.S(a,0,r)},c.prototype.OR=function(a){return this.Zh.T(a,1)},c.prototype.nv=function(a){return this.Zh.T(a,2)},c.prototype.hx=function(a,r){this.Zh.S(a,1,r)},c.prototype.bx=function(a,r){this.Zh.S(a,2,r)},c.prototype.WF=function(a){return this.Zh.T(a,3)},c.prototype.mX=function(a,r){this.Zh.S(a,3,r)},c.prototype.fv=function(a){return this.Zh.T(a,4)},c.prototype.LW=function(a,r){this.Zh.S(a,4,r)},c.prototype.bz=function(a){return this.ws[a]},c.prototype.KW=function(a,r){this.ws[a].K(r)},c}();u.du=b}(V||(V={})),function(u){var A;(A=u.aL||(u.aL={}))[A.Outside=0]="Outside",A[A.Inside=1]="Inside",A[A.Border=2]="Border";var b=function(){function a(r,o){this.PT=o,this.Vh=r}return a.prototype.setColor=function(r,o){this.iH!=o&&r.flush(),this.iH=o},a.prototype.gF=function(r,o){for(var l=0;l<o;)for(var d=r[l++],p=r[l++],g=r[l++]*this.PT;d<p;d++)this.Vh[g+(d>>4)]|=this.iH<<2*(15&d)},a}();u.HY=b;var c=function(){function a(r,o,l){this.Vh=null,this.SA=this.Ik=this.cI=this.aI=this.Es=this.qH=this.Gf=this.Um=0,this.Ri=this.Jk=this.vl=null,this.Fz(r,o,l)}return a.create=function(r,o,l){if(!a.zE(r))throw u.i.N();return a.wP(r,o,l)},a.pW=function(r){switch(r){case 0:r=1024;break;case 1:r=16384;break;case 2:r=262144;break;default:throw u.i.fa("Internal Error")}return r},a.zE=function(r){return!(r.B()||r.getType()!=1607&&r.getType()!=1736)},a.prototype.rQ=function(r,o){o=o.Ga();for(var l=new u.h,d=new u.h;o.$a();)for(;o.Ha();){var p=o.ha();if(p.getType()!=322)throw u.i.fa("Internal Error");r.Eh(p.ac(),l),r.Eh(p.wc(),d),this.Ri.jy(l.x,l.y,d.x,d.y)}this.Ri.iJ(u.Px.Cx)},a.prototype.sQ=function(){throw u.i.fa("Internal Error")},a.prototype.Ry=function(r,o){for(var l=1;4>l;l++)r.jy(o[l-1].x,o[l-1].y,o[l].x,o[l].y);r.jy(o[3].x,o[3].y,o[0].x,o[0].y),this.Ri.iJ(u.Px.Cx)},a.prototype.rK=function(r,o,l){for(var d=[null,null,null,null],p=0;p<d.length;p++)d[p]=new u.h;o=o.Ga(),l=this.Jk.dY(l)+1.5,p=new u.h;for(var g=new u.h,v=new u.h,w=new u.h,T=new u.h,$=new u.l,C=new u.h;o.$a();){var O=!1,N=!0;for(C.ma(0,0);o.Ha();){var R=o.ha();if(w.x=R.sa,w.y=R.na,T.x=R.pa,T.y=R.la,$.Oa(),$.Zb(w.x,w.y),$.Lk(T.x,T.y),this.vl.HG($)){this.Jk.Eh(T,T),N?(this.Jk.Eh(w,w),C.L(w),N=!1):w.L(C),p.uc(T,w);var F=.5>(R=p.length());R==0?p.ma(1,0):(F||C.L(T),p.scale(l/R),g.ma(-p.y,p.x),v.ma(p.y,-p.x),w.sub(p),T.add(p),d[0].add(w,g),d[1].add(w,v),d[2].add(T,v),d[3].add(T,g),F?O=!0:this.Ry(r,d))}else O&&(this.Ry(r,d),O=!1),N=!0}O&&this.Ry(r,d)}},a.prototype.sC=function(r){return u.O.truncate(r*this.qH+this.aI)},a.prototype.tC=function(r){return u.O.truncate(r*this.Es+this.cI)},a.wP=function(r,o,l){return new a(r,o,l)},a.prototype.Fz=function(r,o,l){this.Gf=Math.max(u.O.truncate(2*Math.sqrt(l)+.5),64),this.Um=u.O.truncate((2*this.Gf+31)/32),this.vl=new u.l,this.Ik=o,l=0;for(var d=this.Gf,p=this.Um;8<=d;)l+=d*p,d=u.O.truncate(d/2),p=u.O.truncate((2*d+31)/32);this.Vh=u.O.lg(l,0),this.Ri=new u.Px,l=new b(this.Vh,this.Um,this),this.Ri.AX(this.Gf,this.Gf,l),r.A(this.vl),this.vl.W(o,o),d=new u.l;var g=o*(p=u.l.construct(1,1,this.Gf-2,this.Gf-2)).R();switch(o*=p.ca(),d.K(this.vl.sf(),Math.max(g,this.vl.R()),Math.max(o,this.vl.ca())),this.SA=this.Ik,this.Jk=new u.Dd,this.Jk.pS(d,p),new u.Dd,r.getType()){case 550:l.setColor(this.Ri,2),this.sQ();break;case 1607:l.setColor(this.Ri,2),this.rK(this.Ri,r,this.SA);break;case 1736:l.setColor(this.Ri,1),this.rQ(this.Jk,r),l.setColor(this.Ri,2),this.rK(this.Ri,r,this.SA)}this.qH=this.Jk.bb,this.Es=this.Jk.ab,this.aI=this.Jk.Gb,this.cI=this.Jk.Lb,this.XN()},a.prototype.XN=function(){this.Ri.flush();for(var r=0,o=this.Gf*this.Um,l=this.Gf,d=u.O.truncate(this.Gf/2),p=this.Um,g=u.O.truncate((2*d+31)/32);8<l;){for(l=0;l<d;l++)for(var v=2*l,w=2*l+1,T=0;T<d;T++){var $=2*T,C=2*T+1,O=$>>4;$=2*(15&$);var N=C>>4;C=2*(15&C);var R=this.Vh[r+p*v+O]>>$&3;R|=this.Vh[r+p*v+N]>>C&3,R|=this.Vh[r+p*w+O]>>$&3,R|=this.Vh[r+p*w+N]>>C&3,this.Vh[o+g*l+(T>>4)]|=R<<2*(15&T)}l=d,p=g,r=o,d=u.O.truncate(l/2),g=u.O.truncate((2*d+31)/32),o=r+p*l}},a.prototype.So=function(r,o){return this.vl.contains(r,o)?(r=this.sC(r),o=this.tC(o),0>r||r>=this.Gf||0>o||o>=this.Gf||(o=this.Vh[this.Um*o+(r>>4)]>>2*(15&r)&3)==0?0:o==1?1:2):0},a.prototype.Ro=function(r){if(!r.Ea(this.vl))return 0;var o=this.sC(r.v),l=this.sC(r.C),d=this.tC(r.G);if(r=this.tC(r.H),0>o&&(o=0),0>d&&(d=0),l>=this.Gf&&(l=this.Gf-1),r>=this.Gf&&(r=this.Gf-1),o>l||d>r)return 0;for(var p=Math.max(l-o,1)*Math.max(r-d,1),g=0,v=this.Um,w=this.Gf,T=0;;){if(32>p||16>w){for(p=d;p<=r;p++)for(var $=o;$<=l;$++)if(1<(T=this.Vh[g+v*p+($>>4)]>>2*(15&$)&3))return 2;if(T==0)return 0;if(T==1)return 1}g+=v*w,w=u.O.truncate(w/2),v=u.O.truncate((2*w+31)/32),o=u.O.truncate(o/2),d=u.O.truncate(d/2),l=u.O.truncate(l/2),r=u.O.truncate(r/2),p=Math.max(l-o,1)*Math.max(r-d,1)}},a.prototype.RR=function(){return this.Gf*this.Um},a}();u.Nx=c}(V||(V={})),function(u){var A;(A=u.VL||(u.VL={}))[A.contains=1]="contains",A[A.within=2]="within",A[A.equals=3]="equals",A[A.disjoint=4]="disjoint",A[A.touches=8]="touches",A[A.crosses=16]="crosses",A[A.overlaps=32]="overlaps",A[A.unknown=0]="unknown",A[A.intersects=1073741824]="intersects";var b=function(){function a(){}return a.construct=function(r,o,l,d,p,g,v,w){var T=new a;return T.pw=r,T.Mm=o,T.Kj=l,T.Si=d,T.BH=p,T.SY=g,T.TY=v,T.UY=w,T},a}();u.Vt=function(){function a(){}return a.CD=function(r,o,l){if(a.wy(r)){var d=u.ta.kj(o,r,!1);o=!1,u.Uk.CE(r)&&(o=o||r.lu(d,l)),(d=r.getType())!=1736&&d!=1607||!u.Uk.AE(r)||l==0||(o=o||r.fj(l)),d!=1736&&d!=1607||!u.Uk.BE(r)||l==0||o||r.hM()}},a.wy=function(r){return u.Uk.CE(r)||u.Uk.AE(r)||u.Uk.BE(r)},a}();var c=function(){function a(){this.rh=[]}return a.zB=function(r,o,l,d,p){var g=r.getType(),v=o.getType();if(g==197){if(v==197)return a.tW(r,o,l,d);if(v==33)return d==2?d=1:d==1&&(d=2),a.hJ(o,r,l,d)}else if(g==33){if(v==197)return a.hJ(r,o,l,d);if(v==33)return a.vW(r,o,l,d)}if(r.B()||o.B())return d==4;var w=new u.l;r.A(w);var T=new u.l;o.A(T);var $=new u.l;if($.K(w),$.Zb(T),l=u.ta.Wd(l,$,!1),a.dk(w,T,l))return d==4;switch(w=!1,u.Vk.yd(g)&&((g=new u.Ta(r.description)).oc(r,!0),r=g,g=1607),u.Vk.yd(v)&&((v=new u.Ta(o.description)).oc(o,!0),o=v,v=1607),g!=197&&v!=197?(r.Db()<o.Db()||g==33&&v==550)&&(d==2?d=1:d==1&&(d=2)):g!=1736&&v!=197&&(d==2?d=1:d==1&&(d=2)),g){case 1736:switch(v){case 1736:w=a.rt(r,o,l,d,p);break;case 1607:w=a.$m(r,o,l,d,p);break;case 33:w=a.qt(r,o,l,d);break;case 550:w=a.pt(r,o,l,d,p);break;case 197:w=a.GI(r,o,l,d,p)}break;case 1607:switch(v){case 1736:w=a.$m(o,r,l,d,p);break;case 1607:w=a.gB(r,o,l,d,p);break;case 33:w=a.tt(r,o,l,d,p);break;case 550:w=a.st(r,o,l,d,p);break;case 197:w=a.MI(r,o,l,d)}break;case 33:switch(v){case 1736:w=a.qt(o,r,l,d);break;case 1607:w=a.tt(o,r,l,d,p);break;case 550:w=a.lt(o,r,l,d)}break;case 550:switch(v){case 1736:w=a.pt(o,r,l,d,p);break;case 1607:w=a.st(o,r,l,d,p);break;case 550:w=a.ZA(r,o,l,d,p);break;case 33:w=a.lt(r,o,l,d);break;case 197:w=a.hI(r,o,l,d)}break;case 197:switch(v){case 1736:w=a.GI(o,r,l,d,p);break;case 1607:w=a.MI(o,r,l,d);break;case 550:w=a.hI(o,r,l,d)}}return w},a.tW=function(r,o,l,d){if(r.B()||o.B())return d==4;var p=new u.l,g=new u.l,v=new u.l;switch(r.A(p),o.A(g),v.K(p),v.Zb(g),r=u.ta.Wd(l,v,!1),d){case 4:return a.dk(p,g,r);case 2:return a.jF(g,p,r);case 1:return a.jF(p,g,r);case 3:return a.ek(p,g,r);case 8:return a.cQ(p,g,r);case 32:return a.bQ(p,g,r);case 16:return a.aQ(p,g,r)}return!1},a.hJ=function(r,o,l,d){if(r.B()||o.B())return d==4;r=r.D();var p=new u.l,g=new u.l;switch(o.A(p),g.K(r),g.Zb(p),o=u.ta.Wd(l,g,!1),d){case 4:return a.Rw(r,p,o);case 2:return a.eB(r,p,o);case 1:return a.RU(r,p,o);case 3:return a.vI(r,p,o);case 8:return a.dB(r,p,o)}return!1},a.vW=function(r,o,l,d){if(r.B()||o.B())return d==4;r=r.D(),o=o.D();var p=new u.l;switch(p.K(r),p.Zb(o),l=u.ta.Wd(l,p,!1),d){case 4:return a.SU(r,o,l);case 2:return a.uI(o,r,l);case 1:return a.uI(r,o,l);case 3:return a.wI(r,o,l)}return!1},a.rt=function(r,o,l,d,p){switch(d){case 4:return a.kV(r,o,l);case 2:return a.Sw(o,r,l,p);case 1:return a.Sw(r,o,l,p);case 3:return a.nV(r,o,l);case 8:return a.vV(r,o,l);case 32:return a.qV(r,o,l,p)}return!1},a.$m=function(r,o,l,d,p){switch(d){case 4:return a.lV(r,o,l);case 1:return a.fB(r,o,l,p);case 8:return a.wV(r,o,l,p);case 16:return a.gV(r,o,l)}return!1},a.qt=function(r,o,l,d){switch(d){case 4:return a.jV(r,o,l);case 1:return a.dV(r,o,l);case 8:return a.uV(r,o,l)}return!1},a.pt=function(r,o,l,d){switch(d){case 4:return a.iV(r,o,l);case 1:return a.cV(r,o,l);case 8:return a.tV(r,o,l);case 16:return a.fV(r,o,l)}return!1},a.GI=function(r,o,l,d,p){if(a.hV(r,o,l))return d==4;if(d==4)return!1;switch(d){case 2:return a.xV(r,o,l);case 1:return a.bV(r,o,l);case 3:return a.mV(r,o,l);case 8:return a.sV(r,o,l,p);case 32:return a.pV(r,o,l,p);case 16:return a.eV(r,o,l,p)}return!1},a.gB=function(r,o,l,d){switch(d){case 4:return a.GV(r,o,l);case 2:return a.KI(o,r,l);case 1:return a.KI(r,o,l);case 3:return a.IV(r,o,l);case 8:return a.NI(r,o,l);case 32:return a.MV(r,o,l);case 16:return a.LI(r,o,l)}return!1},a.tt=function(r,o,l,d){switch(d){case 4:return a.FV(r,o,l);case 1:return a.AV(r,o,l);case 8:return a.QV(r,o,l)}return!1},a.st=function(r,o,l,d){switch(d){case 4:return a.EV(r,o,l);case 1:return a.zV(r,o,l);case 8:return a.PV(r,o,l);case 16:return a.CV(r,o,l)}return!1},a.MI=function(r,o,l,d){if(a.DV(r,o,l))return d==4;if(d==4)return!1;switch(d){case 2:return a.RV(r,o,l);case 1:return a.yV(r,o,l);case 3:return a.HV(r,o,l);case 8:return a.OV(r,o,l);case 32:return a.LV(r,o,l);case 16:return a.BV(r,o,l)}return!1},a.ZA=function(r,o,l,d){switch(d){case 4:return a.gU(r,o,l);case 2:return a.eI(o,r,l);case 1:return a.eI(r,o,l);case 3:return a.iU(r,o,l);case 32:return a.oU(r,o,l)}return!1},a.lt=function(r,o,l,d){switch(d){case 4:return a.fI(r,o,l);case 2:return a.sU(r,o,l);case 1:return a.dU(r,o,l);case 3:return a.Nw(r,o,l)}return!1},a.hI=function(r,o,l,d){switch(d){case 4:return a.fU(r,o,l);case 2:return a.rU(r,o,l);case 1:return a.cU(r,o,l);case 3:return a.hU(r,o,l);case 8:return a.qU(r,o,l);case 16:return a.eU(r,o,l)}return!1},a.nV=function(r,o,l){var d=new u.l,p=new u.l;return r.A(d),o.A(p),!!a.ek(d,p,l)&&(d=a.qc(r,o,!1))!=4&&d!=1&&d!=2&&(!!a.dI(r,o,l)||(d=r.Qb(),p=o.Qb(),!(Math.abs(d-p)>4*Math.max(r.I(),o.I())*l)&&a.Wz(r,o,l,!0)))},a.kV=function(r,o,l){var d=a.qc(r,o,!0);return d==4||d!=1&&d!=2&&d!=1073741824&&a.EI(r,o,l)},a.vV=function(r,o,l){var d=a.qc(r,o,!1);return d!=4&&d!=1&&d!=2&&a.II(r,o,l,null)},a.qV=function(r,o,l,d){var p=a.qc(r,o,!1);return p!=4&&p!=1&&p!=2&&a.FI(r,o,l,d)},a.Sw=function(r,o,l,d){var p=new u.l,g=new u.l;return r.A(p),o.A(g),!!a.zc(p,g,l)&&(p=a.qc(r,o,!1))!=4&&p!=2&&(p==1||a.BI(r,o,l,d))},a.lV=function(r,o,l){var d=a.qc(r,o,!0);return d==4||d!=1&&d!=1073741824&&a.EI(r,o,l)},a.wV=function(r,o,l,d){var p=a.qc(r,o,!1);return p!=4&&p!=1&&a.JI(r,o,l,d)},a.gV=function(r,o,l){var d=a.qc(r,o,!1);return d!=4&&d!=1&&a.DI(r,o,l,null)},a.fB=function(r,o,l,d){var p=new u.l,g=new u.l;return r.A(p),o.A(g),!!a.zc(p,g,l)&&(p=a.qc(r,o,!1))!=4&&(p==1||a.CI(r,o,l,d))},a.jV=function(r,o,l){return u.hd.KG(r,o,l)==0},a.uV=function(r,o,l){return o=o.D(),a.HI(r,o,l)},a.dV=function(r,o,l){return o=o.D(),a.AI(r,o,l)},a.iV=function(r,o,l){var d=a.qc(r,o,!1);if(d==4)return!0;if(d==1)return!1;d=new u.l,r.A(d),d.W(l,l);for(var p=new u.h,g=0;g<o.I();g++)if(o.D(g,p),d.contains(p)){var v=u.hd.Yd(r,p,l);if(v==1||v==2)return!1}return!0},a.tV=function(r,o,l){var d=this.qc(r,o,!1);if(d==4||d==1)return!1;d=new u.l,r.A(d),d.W(l,l);for(var p=!1,g=r,v=!1,w=0;w<o.I();w++){var T=o.Na(w);if(d.contains(T)){if((T=u.hd.Yd(g,T,l))==2)p=!0;else if(T==1)return!1}v||(!u.Dg.Ml(r,o.I()-1)||r.Bb!=null&&r.Bb.Fb!=null?g=r:(g=new u.Da,r.copyTo(g),g.fj(1)),v=!0)}return!!p},a.fV=function(r,o,l){var d=this.qc(r,o,!1);if(d==4||d==1)return!1;var p=new u.l;d=new u.l;var g=new u.l;r.A(p),o.A(g),d.K(p),d.W(l,l),g=p=!1;for(var v=r,w=!1,T=0;T<o.I();T++){var $=o.Na(T);if(d.contains($)?($=u.hd.Yd(v,$,l))==0?g=!0:$==1&&(p=!0):g=!0,p&&g)return!0;w||(!u.Dg.Ml(r,o.I()-1)||r.Bb!=null&&r.Bb.Fb!=null?v=r:(v=new u.Da,r.copyTo(v),v.fj(1)),w=!0)}return!1},a.cV=function(r,o,l){var d=new u.l,p=new u.l;if(r.A(d),o.A(p),!this.zc(d,p,l)||(p=this.qc(r,o,!1))==4)return!1;if(p==1)return!0;p=!1;for(var g=r,v=!1,w=0;w<o.I();w++){var T=o.Na(w);if(!d.contains(T))return!1;if((T=u.hd.Yd(g,T,l))==1)p=!0;else if(T==0)return!1;v||(!u.Dg.Ml(r,o.I()-1)||r.Bb!=null&&r.Bb.Fb!=null?g=r:(g=new u.Da,r.copyTo(g),g.fj(1)),v=!0)}return p},a.mV=function(r,o,l){var d=new u.l,p=new u.l;return r.A(d),o.A(p),!!a.ek(d,p,l)&&((d=new u.Da).ad(o,!1),a.Wz(r,d,l,!0))},a.hV=function(r,o,l){var d=a.qc(r,o,!1);if(d==4)return!0;if(d==1||d==2)return!1;var p=new u.l;if(d=new u.l,r.A(p),o.A(d),a.zc(d,p,l)||(p=new u.h,d.dn(p),(o=u.hd.Yd(r,p,l))!=0)||(d.$I(p),(o=u.hd.Yd(r,p,l))!=0)||(d.en(p),(o=u.hd.Yd(r,p,l))!=0)||(d.cJ(p),(o=u.hd.Yd(r,p,l))!=0))return!1;o=r.ub(0),(p=new u.l).K(d),p.W(l,l);for(var g=0,v=r.I();g<v;g++){var w=o.read(2*g),T=o.read(2*g+1);if(p.contains(w,T))return!1}return!a.TG(r,d,l)},a.sV=function(r,o,l,d){var p=a.qc(r,o,!1);if(p==4||p==1||p==2)return!1;p=new u.l;var g=new u.l;return r.A(p),o.A(g),!a.zc(g,p,l)&&(g.R()<=l&&g.ca()<=l?(o=o.Ip(),a.HI(r,o,l)):g.R()<=l||g.ca()<=l?(p=new u.Ta,g=new u.Sa,o.Hf(0,g),p.nf(g),o.Hf(2,g),p.lineTo(g),a.JI(r,p,l,d)):((p=new u.Da).ad(o,!1),a.II(r,p,l,d)))},a.pV=function(r,o,l,d){var p=a.qc(r,o,!1);if(p==4||p==1||p==2)return!1;p=new u.l;var g=new u.l;return r.A(p),o.A(g),!(a.zc(g,p,l)||g.R()<=l||g.ca()<=l)&&((p=new u.Da).ad(o,!1),a.FI(r,p,l,d))},a.xV=function(r,o,l){var d=new u.l,p=new u.l;return r.A(d),o.A(p),a.zc(p,d,l)},a.bV=function(r,o,l){var d=new u.l,p=new u.l;return r.A(d),o.A(p),!!a.zc(d,p,l)&&(d=a.qc(r,o,!1))!=4&&d!=2&&(d==1||(p.R()<=l&&p.ca()<=l?(o=o.Ip(),a.AI(r,o,l)):p.R()<=l||p.ca()<=l?(p=new u.Ta,d=new u.Sa,o.Hf(0,d),p.nf(d),o.Hf(2,d),p.lineTo(d),a.CI(r,p,l,null)):((p=new u.Da).ad(o,!1),a.BI(r,p,l,null))))},a.eV=function(r,o,l,d){var p=new u.l,g=new u.l;return r.A(p),o.A(g),!(a.zc(g,p,l)||g.ca()>l&&g.R()>l||g.ca()<=l&&g.R()<=l)&&(p=new u.Ta,g=new u.Sa,o.Hf(0,g),p.nf(g),o.Hf(2,g),p.lineTo(g),a.DI(r,p,l,d))},a.IV=function(r,o,l){var d=new u.l,p=new u.l;return r.A(d),o.A(p),!(!a.ek(d,p,l)||a.qc(r,o,!1)==4)&&(!!a.dI(r,o,l)||a.Wz(r,o,l,!1))},a.GV=function(r,o,l){return this.qc(r,o,!1)==4||!!new u.Zl(r,o,l,!0).next()&&!this.UG(r,o,l)},a.NI=function(r,o,l){if(a.qc(r,o,!1)==4)return!1;var d=new u.be(0);if(a.Xz(r,o,l,d)!=0)return!1;for(var p=new u.de,g=0;g<d.size;g+=2){var v=d.read(g),w=d.read(g+1);p.Bu(v,w)}return r=r.mg(),o=o.mg(),r.Fd(o,0,o.I()),a.Mw(r,p,l)},a.LI=function(r,o,l){if(a.qc(r,o,!1)==4)return!1;var d=new u.be(0);if(a.Xz(r,o,l,d)!=0)return!1;for(var p=new u.de,g=0;g<d.size;g+=2){var v=d.read(g),w=d.read(g+1);p.Bu(v,w)}return r=r.mg(),o=o.mg(),r.Fd(o,0,o.I()),!a.Mw(r,p,l)},a.MV=function(r,o,l){return a.qc(r,o,!1)!=4&&a.WG(r,o,l)},a.KI=function(r,o,l){var d=new u.l,p=new u.l;return r.A(d),o.A(p),!(!a.zc(d,p,l)||a.qc(r,o,!1)==4)&&a.ym(o,r,l,!1)},a.FV=function(r,o,l){return a.qc(r,o,!1)==4||(o=o.D(),!a.Yz(r,o,l))},a.QV=function(r,o,l){return a.qc(r,o,!1)!=4&&(o=o.D(),a.Zz(r,o,l))},a.AV=function(r,o,l){return a.qc(r,o,!1)!=4&&(o=o.D(),a.SG(r,o,l))},a.EV=function(r,o,l){return a.qc(r,o,!1)==4||!a.VG(r,o,l,!1)},a.PV=function(r,o,l){if(this.qc(r,o,!1)==4)return!1;var d=r.Ga(),p=new u.l,g=new u.l,v=new u.l;r.A(p),o.A(g),p.W(l,l),g.W(l,l),v.K(p),v.Ea(g),p=null;var w=r.Bb;if(w!=null){var T=w.Fb;p=w.zo,T==null&&(T=w=u.ta.jj(r,v))}else T=w=u.ta.jj(r,v);var $=T.getIterator(),C=null;p!=null&&(C=p.getIterator());var O=new u.h,N=new u.h,R=!1,F=l*l;for(p=new u.pn(o.I()),w=0;w<o.I();w++)p.write(w,0);for(w=0;w<o.I();w++)if(o.D(w,O),v.contains(O)){if(g.K(O.x,O.y,O.x,O.y),C!=null&&(C.Xi(g,l),C.next()==-1))continue;$.Xi(g,l);for(var G=$.next();G!=-1;G=$.next())if(d.Vb(T.ja(G)),(G=d.ha()).hc(G.fe(O,!1),N),u.h.yc(O,N)<=F){p.write(w,1),R=!0;break}}if(!R)return!1;for(r=r.mg(),d=new u.de,g=new u.h,w=0;w<o.I();w++)p.read(w)!=0&&(o.D(w,g),d.Bu(g.x,g.y));return this.Mw(r,d,l)},a.CV=function(r,o,l){if(this.qc(r,o,!1)==4)return!1;var d=r.Ga(),p=new u.l,g=new u.l,v=new u.l;r.A(p),o.A(g),p.W(l,l),g.W(l,l),v.K(p),v.Ea(g),p=null;var w=r.Bb;if(w!=null){var T=w.Fb;p=w.zo,T==null&&(T=w=u.ta.jj(r,v))}else T=w=u.ta.jj(r,v);var $=T.getIterator(),C=null;p!=null&&(C=p.getIterator());var O=new u.h,N=new u.h,R=!1,F=!1,G=l*l;for(p=new u.pn(o.I()),w=0;w<o.I();w++)p.write(w,0);for(w=0;w<o.I();w++)if(o.D(w,O),v.contains(O)){if(g.K(O.x,O.y,O.x,O.y),C!=null&&(C.Xi(g,l),C.next()==-1)){F=!0;continue}$.Xi(g,l);for(var z=!1,B=$.next();B!=-1;B=$.next())if(d.Vb(T.ja(B)),(B=d.ha()).hc(B.fe(O,!1),N),u.h.yc(O,N)<=G){p.write(w,1),z=R=!0;break}z||(F=!0)}else F=!0;if(!R||!F)return!1;for(r=r.mg(),d=new u.de,g=new u.h,w=0;w<o.I();w++)p.read(w)!=0&&(o.D(w,g),d.Bu(g.x,g.y));return!this.Mw(r,d,l)},a.zV=function(r,o,l){var d=new u.l,p=new u.l;return r.A(d),o.A(p),!(!a.zc(d,p,l)||a.qc(r,o,!1)==4||!a.VG(r,o,l,!0))&&(r=r.mg(),!a.gI(r,o,l))},a.HV=function(r,o,l){var d=new u.l,p=new u.l;return r.A(d),o.A(p),!(p.ca()>l&&p.R()>l)&&a.ek(d,p,l)},a.DV=function(r,o,l){var d=new u.l,p=new u.l;return r.A(d),o.A(p),!a.zc(p,d,l)&&!a.TG(r,p,l)},a.OV=function(r,o,l){var d=new u.l,p=new u.l;if(r.A(d),o.A(p),p.ca()<=l&&p.R()<=l)return p=o.Ip(),a.Zz(r,p,l);if(p.ca()<=l||p.R()<=l)return p=new u.Ta,d=new u.Sa,o.Hf(0,d),p.nf(d),o.Hf(2,d),p.lineTo(d),a.NI(r,p,l);r=r.Ga(),o=new u.l,d=new u.l,o.K(p),d.K(p),o.W(-l,-l),d.W(l,l),p=!1;for(var g=new u.l,v=new u.l;r.$a();)for(;r.Ha();){if(r.ha().A(g),v.K(o),v.Ea(g),!v.B()&&(v.ca()>l||v.R()>l))return!1;v.K(d),v.Ea(g),v.B()||(p=!0)}return p},a.LV=function(r,o,l){var d=new u.l,p=new u.l;return r.A(d),o.A(p),!(a.zc(d,p,l)||a.zc(p,d,l)||a.zc(p,d,l)||p.ca()>l&&p.R()>l||p.ca()<=l&&p.R()<=l)&&(d=new u.Ta,p=new u.Sa,o.Hf(0,p),d.nf(p),o.Hf(2,p),d.lineTo(p),a.WG(r,d,l))},a.RV=function(r,o,l){var d=new u.l,p=new u.l;if(r.A(d),o.A(p),!a.zc(p,d,l)||p.ca()<=l&&p.R()<=l)return!1;if(p.ca()<=l||p.R()<=l)return a.zc(p,d,l);r=r.Ga(),(o=new u.l).K(p),o.W(-l,-l),p=!1,d=new u.l;for(var g=new u.l;r.$a();)for(;r.Ha();)r.ha().A(d),o.hm(d)?p=!0:(g.K(o),g.Ea(d),!g.B()&&(g.ca()>l||g.R()>l)&&(p=!0));return p},a.yV=function(r,o,l){var d=new u.l,p=new u.l;return o.A(p),r.A(d),!(!a.zc(d,p,l)||p.ca()>l&&p.R()>l)&&(p.ca()<=l&&p.R()<=l?(o=o.Ip(),a.SG(r,o,l)):(d=new u.Ta,p=new u.Sa,o.Hf(0,p),d.nf(p),o.Hf(2,p),d.lineTo(p),a.ym(d,r,l,!1)))},a.BV=function(r,o,l){var d=new u.l,p=new u.l;if(r.A(d),o.A(p),a.zc(p,d,l)||p.ca()<=l&&p.R()<=l)return!1;if(p.ca()<=l||p.R()<=l)return d=new u.Ta,p=new u.Sa,o.Hf(0,p),d.nf(p),o.Hf(2,p),d.lineTo(p),a.LI(r,d,l);r=r.Ga(),o=new u.l,(d=new u.l).K(p),o.K(p),d.W(-l,-l),o.W(l,l);for(var g=p=!1,v=new u.l,w=new u.l;r.$a();)for(;r.Ha();)if(r.ha().A(v),g||o.contains(v)||(g=!0),p||(w.K(d),w.Ea(v),!w.B()&&(w.ca()>l||w.R()>l)&&(p=!0)),p&&g)return!0;return!1},a.iU=function(r,o,l){var d=new u.l,p=new u.l;return r.A(d),o.A(p),!!a.ek(d,p,l)&&(!!a.jU(r,o,l)||a.YA(r,o,l,!1,!0,!1))},a.gU=function(r,o,l){return!a.gI(r,o,l)},a.oU=function(r,o,l){return a.YA(r,o,l,!1,!1,!0)},a.eI=function(r,o,l){var d=new u.l,p=new u.l;return r.A(d),o.A(p),!!a.zc(d,p,l)&&a.YA(o,r,l,!0,!1,!1)},a.Mw=function(r,o,l){l*=l;for(var d=new u.h,p=new u.h,g=0;g<o.I();g++){o.D(g,p);for(var v=!1,w=0;w<r.I();w++)if(r.D(w,d),u.h.yc(d,p)<=l){v=!0;break}if(!v)return!1}return!0},a.Nw=function(r,o,l){var d=new u.l,p=new u.l;return r.A(d),o.A(p),a.ek(d,p,l)},a.fI=function(r,o,l){return o=o.D(),a.kt(r,o,l)},a.sU=function(r,o,l){return a.Nw(r,o,l)},a.dU=function(r,o,l){return!a.fI(r,o,l)},a.hU=function(r,o,l){var d=new u.l,p=new u.l;return r.A(d),o.A(p),!(p.ca()>l||p.R()>l)&&a.ek(d,p,l)},a.fU=function(r,o,l){var d=new u.l,p=new u.l;if(r.A(d),o.A(p),a.zc(p,d,l))return!1;for((o=new u.l).K(p),o.W(l,l),l=new u.h,p=0;p<r.I();p++)if(r.D(p,l),o.contains(l))return!1;return!0},a.qU=function(r,o,l){var d=new u.l,p=new u.l,g=new u.l;if(o.A(d),d.ca()<=l&&d.R()<=l)return!1;if(d.ca()<=l||d.R()<=l){o=new u.h;var v=!1;p.K(d),g.K(d),p.W(l,l),d.ca()>l?g.W(0,-l):g.W(-l,0);for(var w=0;w<r.I();w++)if(r.D(w,o),p.contains(o)){if(d.ca()>l){if(o.y>g.G&&o.y<g.H)return!1}else if(o.x>g.v&&o.x<g.C)return!1;v=!0}return v}for(p.K(d),g.K(d),p.W(l,l),g.W(-l,-l),o=new u.h,v=!1,w=0;w<r.I();w++)if(r.D(w,o),p.contains(o)){if(g.hm(o))return!1;v=!0}return v},a.rU=function(r,o,l){var d=new u.l,p=new u.l;if(r.A(d),o.A(p),!a.zc(p,d,l))return!1;if(p.ca()<=l&&p.R()<=l)return a.ek(d,p,l);if(p.ca()<=l||p.R()<=l){o=!1,d=new u.l;var g=new u.l;d.K(p),g.K(p),p.ca()>l?d.W(0,-l):d.W(-l,0),g.W(l,l);for(var v=new u.h,w=0;w<r.I();w++){if(r.D(w,v),!g.contains(v))return!1;p.ca()>l?v.y>d.G&&v.y<d.H&&(o=!0):v.x>d.v&&v.x<d.C&&(o=!0)}return o}for(o=!1,d=new u.l,g=new u.l,d.K(p),g.K(p),d.W(-l,-l),g.W(l,l),v=new u.h,w=0;w<r.I();w++){if(r.D(w,v),!g.contains(v))return!1;d.hm(v)&&(o=!0)}return o},a.cU=function(r,o,l){var d=new u.l,p=new u.l;return r.A(d),o.A(p),!(!a.zc(d,p,l)||p.ca()>l||p.R()>l)&&(o=o.Ip(),!a.kt(r,o,l))},a.eU=function(r,o,l){var d=new u.l,p=new u.l;if(r.A(d),o.A(p),a.zc(p,d,l)||p.ca()<=l&&p.R()<=l)return!1;if(p.ca()<=l||p.R()<=l){o=new u.l,d=new u.l,o.K(p),p.ca()>l?o.W(0,-l):o.W(-l,0),d.K(p),d.W(l,l);for(var g=new u.h,v=!1,w=!1,T=0;T<r.I();T++)if(r.D(T,g),v||(p.ca()>l?g.y>o.G&&g.y<o.H&&(v=!0):g.x>o.v&&g.x<o.C&&(v=!0)),w||d.contains(g)||(w=!0),v&&w)return!0;return!1}for(o=new u.l,d=new u.l,o.K(p),o.W(-l,-l),d.K(p),d.W(l,l),g=new u.h,w=v=!1,T=0;T<r.I();T++)if(r.D(T,g),!v&&o.hm(g)&&(v=!0),w||d.contains(g)||(w=!0),v&&w)return!0;return!1},a.wI=function(r,o,l){return u.h.yc(r,o)<=l*l},a.SU=function(r,o,l){return u.h.yc(r,o)>l*l},a.uI=function(r,o,l){return a.wI(r,o,l)},a.vI=function(r,o,l){var d=new u.l;return d.K(r),a.ek(d,o,l)},a.Rw=function(r,o,l){var d=new u.l;return d.K(o),d.W(l,l),!d.contains(r)},a.dB=function(r,o,l){if(o.ca()<=l&&o.R()<=l)return!1;var d=new u.l,p=new u.l;if(d.K(o),d.W(l,l),!d.contains(r))return!1;if(o.ca()<=l||o.R()<=l){if(p.K(o),o.ca()>l?p.W(0,-l):p.W(-l,0),o.ca()>l){if(r.y>p.G&&r.y<p.H)return!1}else if(r.x>p.v&&r.x<p.C)return!1;return!0}return p.K(o),p.W(-l,-l),!p.hm(r)},a.eB=function(r,o,l){if(o.ca()<=l&&o.R()<=l)return!0;if(o.ca()<=l||o.R()<=l){var d=new u.l;d.K(o),o.ca()>l?d.W(0,-l):d.W(-l,0);var p=!1;return o.ca()>l?r.y>d.G&&r.y<d.H&&(p=!0):r.x>d.v&&r.x<d.C&&(p=!0),p}return(d=new u.l).K(o),d.W(-l,-l),d.hm(r)},a.RU=function(r,o,l){return a.vI(r,o,l)},a.ek=function(r,o,l){return a.zc(r,o,l)&&a.zc(o,r,l)},a.dk=function(r,o,l){var d=new u.l;return d.K(o),d.W(l,l),!r.isIntersecting(d)},a.cQ=function(r,o,l){if(r.ca()<=l&&r.R()<=l){var d=r.sf();return a.dB(d,o,l)}if(o.ca()<=l&&o.R()<=l)return d=o.sf(),a.dB(d,r,l);if(r.ca()>l&&r.R()>l&&(o.ca()<=l||o.R()<=l)?d=o:(d=r,r=o),d.ca()<=l||d.R()<=l){if(r.ca()<=l||r.R()<=l){o=new u.yb;var p=new u.yb,g=[0,0],v=[0,0],w=new u.h;return d.dn(w),o.Dc(w),d.en(w),o.Qc(w),r.dn(w),p.Dc(w),r.en(w),p.Qc(w),o.Ea(p,null,g,v,l),o.Ea(p,null,null,null,l)==1&&(g[0]==0||g[1]==1||v[0]==0||v[1]==1)}return o=new u.l,p=new u.l,o.K(r),o.W(-l,-l),p.K(o),p.Ea(d),!(!p.B()&&(p.ca()>l||p.R()>l))}return r.W(l,l),(p=new u.l).K(d),p.Ea(r),!(p.B()||!p.B()&&p.ca()>l&&p.R()>l)},a.bQ=function(r,o,l){if(a.zc(r,o,l)||a.zc(o,r,l)||r.ca()<=l&&r.R()<=l||o.ca()<=l&&o.R()<=l)return!1;if(r.ca()<=l||r.R()<=l){if(o.ca()>l&&o.R()>l)return!1;var d=new u.yb,p=new u.yb,g=[0,0],v=[0,0],w=new u.h;return r.dn(w),d.Dc(w),r.en(w),d.Qc(w),o.dn(w),p.Dc(w),o.en(w),p.Qc(w),d.Ea(p,null,g,v,l),d.Ea(p,null,null,null,l)==2&&(0<g[0]||1>g[1])&&(0<v[0]||1>v[1])}return!(o.ca()<=l||o.R()<=l)&&((d=new u.l).K(r),d.Ea(o),!(d.B()||d.ca()<=l||d.R()<=l))},a.jF=function(r,o,l){if(!a.zc(r,o,l))return!1;if(r.ca()<=l&&r.R()<=l)return r=r.sf(),a.eB(r,o,l);if(o.ca()<=l&&o.R()<=l)return o=o.sf(),a.eB(o,r,l);if(r.ca()<=l||r.R()<=l)return a.zc(r,o,l);if(o.ca()<=l||o.R()<=l){var d=new u.l;return d.K(r),d.W(-l,-l),d.hm(o)?!0:((r=new u.l).K(d),r.Ea(o),!(r.B()||r.ca()<=l&&r.R()<=l))}return a.zc(r,o,l)},a.aQ=function(r,o,l){if(a.zc(r,o,l)||a.zc(o,r,l)||r.ca()<=l&&r.R()<=l||o.ca()<=l&&o.R()<=l||o.ca()>l&&o.R()>l&&r.ca()>l&&r.R()>l)return!1;if(r.ca()>l&&r.R()>l)var d=o;else d=r,r=o;if(r.ca()>l&&r.R()>l){o=new u.l;var p=new u.l;return p.K(r),p.W(-l,-l),o.K(p),o.Ea(d),!(o.B()||o.ca()<=l&&o.R()<=l)}o=new u.yb,p=new u.yb;var g=[0,0],v=[0,0],w=new u.h;return d.dn(w),o.Dc(w),d.en(w),o.Qc(w),r.dn(w),p.Dc(w),r.en(w),p.Qc(w),o.Ea(p,null,g,v,l),o.Ea(p,null,null,null,l)==1&&0<g[0]&&1>g[1]&&0<v[0]&&1>v[1]},a.EI=function(r,o,l){var d=new u.l,p=new u.l,g=new u.Zl(r,o,l,!0);if(!g.next())return!0;if(this.UG(r,o,l))return!1;var v=r,w=null;o.getType()==1736&&(w=o);var T=!1,$=!1;do{var C=g.nl(),O=g.hl();if(O=o.Na(o.Ba(O)),d.K(g.uz()),d.W(l,l),d.contains(O)&&(O=u.hd.Yd(v,O,0))!=0||o.getType()==1736&&(C=r.Na(r.Ba(C)),p.K(g.az()),p.W(l,l),p.contains(C)&&(O=u.hd.Yd(w,C,0))!=0))return!1;T||(!u.Dg.Ml(r,o.da()-1)||r.Bb!=null&&r.Bb.Fb!=null?v=r:(v=new u.Da,r.copyTo(v),v.fj(1)),T=!0),o.getType()!=1736||$||($=o,!u.Dg.Ml($,r.da()-1)||o.Bb!=null&&o.Bb.Fb!=null?w=o:(w=new u.Da,$.copyTo(w),w.fj(1)),$=!0)}while(g.next());return!0},a.zc=function(r,o,l){var d=new u.l;return d.K(r),d.W(l,l),d.contains(o)},a.ls=function(r,o,l){var d=new u.l;return d.K(o),d.W(l,l),o=new u.h,r.dn(o),!d.contains(o)||(r.$I(o),!d.contains(o)||(r.cJ(o),!d.contains(o)||(r.en(o),!d.contains(o))))},a.dI=function(r,o,l){if(r.da()!=o.da()||r.I()!=o.I())return!1;var d=new u.h,p=new u.h,g=!0;l*=l;for(var v=0;v<r.da();v++){if(r.Vc(v)!=o.Vc(v)){g=!1;break}for(var w=r.Ba(v);w<o.Vc(v);w++)if(r.D(w,d),o.D(w,p),u.h.yc(d,p)>l){g=!1;break}if(!g)break}return!!g},a.jU=function(r,o,l){if(r.I()!=o.I())return!1;var d=new u.h,p=new u.h,g=!0;l*=l;for(var v=0;v<r.I();v++)if(r.D(v,d),o.D(v,p),u.h.yc(d,p)>l){g=!1;break}return!!g},a.YA=function(r,o,l,d,p,g){var v=!1;if(r.I()>o.I()){d&&(d=!1,v=!0);var w=o}else w=r,r=o;if(o=null,p||g||v){o=new u.pn(r.I());for(var T=0;T<r.I();T++)o.write(T,0)}T=new u.l;var $=new u.l,C=new u.l;w.A(T),r.A($),T.W(l,l),$.W(l,l),C.K(T),C.Ea($),$=new u.h;for(var O=new u.h,N=!0,R=u.ta.oE(r,C),F=R.getIterator(),G=l*l,z=0;z<w.I();z++)if(w.D(z,$),C.contains($)){var B=!1;T.K($.x,$.y,$.x,$.y),F.Xi(T,l);for(var q=F.next();q!=-1&&(q=R.ja(q),r.D(q,O),!(u.h.yc($,O)<=G&&((p||g||v)&&o.write(q,1),B=!0,d)));q=F.next());if(!B&&(N=!1,p||d))return!1}else{if(p||d)return!1;N=!1}if(g&&N)return!1;if(d)return!0;for(T=0;T<r.I();T++)if(o.read(T)==1){if(g)return!0}else if(p||v)return!1;return!g},a.gI=function(r,o,l){if(r.I()>o.I())var d=o;else d=r,r=o;o=new u.l;var p=new u.l,g=new u.l;d.A(o),r.A(p),o.W(l,l),p.W(l,l),g.K(o),g.Ea(p),p=new u.h;for(var v=new u.h,w=l*l,T=u.ta.oE(r,g),$=T.getIterator(),C=0;C<d.I();C++)if(d.D(C,p),g.contains(p)){o.K(p.x,p.y,p.x,p.y),$.Xi(o,l);for(var O=$.next();O!=-1;O=$.next())if(r.D(T.ja(O),v),u.h.yc(p,v)<=w)return!0}return!1},a.Wz=function(r,o,l,d){return a.ym(r,o,l,d)&&a.ym(o,r,l,d)},a.ym=function(r,o,l,d){function p(Re,fe){return O.QE(Re,fe)}var g,v=!0,w=[0,0],T=[0,0],$=0,C=new u.ia(0),O=new a,N=new u.l,R=new u.l,F=new u.l;r.A(N),o.A(R),N.W(l,l),R.W(l,l),F.K(N),F.Ea(R),r=r.Ga(),R=o.Ga();var G=null,z=G=null,B=o.Bb;for(B!=null?(G=B.Fb,z=B.zo,G==null&&(G=u.ta.jj(o,F))):G=u.ta.jj(o,F),o=G.getIterator(),B=null,z!=null&&(B=z.getIterator());r.$a();)for(;r.Ha();){var q=!1,K=r.ha();if(K.A(N),!N.isIntersecting(F)||B!=null&&(B.Xi(N,l),B.next()==-1))return!1;for(z=K.Qb(),o.Uo(K,l),g=o.next();g!=-1;g=o.next()){R.Vb(G.ja(g)),g=R.ha();var ee=K.Ea(g,null,w,T,l);if(ee==2&&(!d||T[0]<=T[1])){ee=w[0];var oe=w[1],ue=T[0],we=T[1];if(ee*z<=l&&(1-oe)*z<=l){q=!0,$=0,C.resize(0),O.rh.length=0;var me=r.wb();for(ue=!0;ue;){if(r.Ha()){if(z=(K=r.ha()).Qb(),(ee=K.Ea(g,null,w,T,l))==2&&(!d||T[0]<=T[1])&&(ee=w[0],oe=w[1],ee*z<=l&&(1-oe)*z<=l)){me=r.wb();continue}if(R.Ha()&&(g=R.ha(),(ee=K.Ea(g,null,w,T,l))==2&&(!d||T[0]<=T[1])&&(ee=w[0],oe=w[1],ee*z<=l&&(1-oe)*z<=l))){me=r.wb();continue}}ue=!1}me!=r.wb()&&(r.Vb(me),r.ha());break}me=r.wb(),g=b.construct(me,r.gb,ee,oe,R.wb(),R.gb,ue,we),O.rh.push(g),C.add(C.size)}}if(!q){if($==O.rh.length)return!1;for(1<C.size-$&&C.Vd($,C.size,p),q=0;$<O.rh.length;$++)if(!((g=O.rh[C.get($)]).Kj<q&&g.Si<q)){if(z*(g.Kj-q)>l)return!1;if(z*(1-(q=g.Si))<=l||q==1)break}if(z*(1-q)>l)return!1;$=0,C.resize(0),O.rh.length=0}}return v},a.WG=function(r,o,l){if(1>a.Xz(r,o,l,null))return!1;var d=new u.l,p=new u.l;r.A(d),o.A(p);var g=a.ls(d,p,l);return d=a.ls(p,d,l),!(!g||!d)||(g&&!d?!a.ym(o,r,l,!1):d&&!g?!a.ym(r,o,l,!1):!a.ym(r,o,l,!1)&&!a.ym(o,r,l,!1))},a.Xz=function(r,o,l,d){function p(ft,jt){return N.QE(ft,jt)}if(r.yz()>o.yz())var g=o,v=r;else g=r,v=o;r=g.Ga(),o=v.Ga();var w=[0,0],T=[0,0],$=-1,C=0,O=new u.ia(0),N=new a,R=new u.l,F=new u.l,G=new u.l;g.A(R),v.A(F),R.W(l,l),F.W(l,l),G.K(R),G.Ea(F),g=null,d!=null&&(g=new u.h);var z=F=F=null,B=v.Bb;for(B!=null?(F=B.Fb,z=B.zo,F==null&&(F=u.ta.jj(v,G))):F=u.ta.jj(v,G),v=F.getIterator(),B=null,z!=null&&(B=z.getIterator());r.$a();)for(z=0;r.Ha();){var q=r.ha();if(q.A(R),R.isIntersecting(G)){if(B!=null&&(B.Xi(R,l),B.next()==-1))continue;var K=q.Qb();v.Uo(q,l);for(var ee=v.next();ee!=-1;ee=v.next()){var oe=F.ja(ee);o.Vb(oe);var ue=o.ha(),we=ue.Qb(),me=q.Ea(ue,null,w,T,l);if(0<me){ee=w[0],$=T[0];var Re=me==2?w[1]:NaN,fe=me==2?T[1]:NaN;if(me==2){if(K*(Re-ee)>l)return 1;var Ye=K*(Re-ee);if(o.Ha()){if(ue=o.ha(),(me=q.Ea(ue,null,w,null,l))==2){me=w[0];var Ve=w[1];if(Ye+(me=K*(Ve-me))>l)return 1}o.Vb(oe),o.ha()}if(!o.vm()){if(o.li(),ue=o.li(),(me=q.Ea(ue,null,w,null,l))==2&&(me=w[0],Ye+(me=K*((Ve=w[1])-me))>l))return 1;o.Vb(oe),o.ha()}if(r.Ha()){if(oe=r.wb(),(me=(q=r.ha()).Ea(ue,null,w,null,l))==2&&(me=w[0],Ye+(me=K*((Ve=w[1])-me))>l))return 1;r.Vb(oe),r.ha()}if(!r.vm()){if(oe=r.wb(),r.li(),(me=(q=r.li()).Ea(ue,null,w,null,l))==2&&(me=w[0],Ye+(me=we*((Ve=w[1])-me))>l))return 1;r.Vb(oe),r.ha()}ue=b.construct(r.wb(),r.gb,ee,Re,o.wb(),o.gb,$,fe),N.rh.push(ue),O.add(O.size)}$=0,d!=null&&(q.hc(ee,g),d.add(g.x),d.add(g.y))}}if(C<N.rh.length){for(O.Vd(C,O.size,p),q=0,ee=N.rh[O.get(C)].Mm;C<N.rh.length;C++)if(!((ue=N.rh[O.get(C)]).Kj<q&&ue.Si<q))if(K*(ue.Kj-q)>l)z=K*(ue.Si-ue.Kj),q=ue.Si,ee=ue.Mm;else{if(ue.Mm!=ee?(z=K*(ue.Si-ue.Kj),ee=ue.Mm):z+=K*(ue.Si-ue.Kj),z>l)return 1;if((q=ue.Si)==1)break}K*(1-q)>l&&(z=0),C=0,O.resize(0),N.rh.length=0}}}return $},a.UG=function(r,o,l){var d=r.Ga(),p=o.Ga();for(r=new u.Zl(r,o,l,!1);r.next();){o=r.nl();var g=r.hl();if(d.Vb(o),p.Vb(g),o=d.ha(),0<p.ha().Ea(o,null,null,null,l))return!0}return!1},a.VG=function(r,o,l,d){var p=r.Ga(),g=new u.l,v=new u.l,w=new u.l;r.A(g),o.A(v),g.W(l,l),g.contains(v),v.W(l,l),w.K(g),w.Ea(v),(g=r.Bb)!=null?(g=g.Fb)==null&&(g=u.ta.jj(r,w)):g=u.ta.jj(r,w),r=g.getIterator();for(var T=new u.h,$=new u.h,C=l*l,O=0;O<o.I();O++)if(o.D(O,T),w.contains(T)){v.K(T.x,T.y,T.x,T.y),r.Xi(v,l);for(var N=!1,R=r.next();R!=-1;R=r.next())if(p.Vb(g.ja(R)),(R=p.ha()).hc(R.fe(T,!1),$),u.h.yc($,T)<=C){N=!0;break}if(d){if(!N)return!1}else if(N)return!0}return!!d},a.Yz=function(r,o,l){var d=new u.h,p=l*l,g=r.Ga();if((r=r.Bb)!=null&&(r=r.Fb)!=null){var v=new u.l;for(v.K(o),v=(l=r.MF(v,l)).next();v!=-1;v=l.next())if(g.Vb(r.ja(v)),g.Ha()){var w=(v=g.ha()).fe(o,!1);if(v.hc(w,d),u.h.yc(o,d)<=p)return!0}return!1}for(r=new u.l;g.$a();)for(;g.Ha();)if((v=g.ha()).A(r),r.W(l,l),r.contains(o)&&(w=v.fe(o,!1),v.hc(w,d),u.h.yc(o,d)<=p))return!0;return!1},a.SG=function(r,o,l){return a.Yz(r,o,l)&&!a.Zz(r,o,l)},a.Zz=function(r,o,l){return r=r.mg(),!a.kt(r,o,l)},a.TG=function(r,o,l){if(r.tm()){var d=new u.yb(o.v,o.G,o.v,o.H),p=new u.yb(o.v,o.H,o.C,o.H),g=new u.yb(o.C,o.H,o.C,o.G);for(o=new u.yb(o.C,o.G,o.v,o.G),r=r.Ga();r.$a();)for(;r.Ha();){var v=r.ha();if(v.isIntersecting(d,l)||v.isIntersecting(p,l)||v.isIntersecting(g,l)||v.isIntersecting(o,l))return!0}}else{(d=new u.l).K(o),d.W(l,l),l=r.ub(0),p=new u.h,g=new u.h,o=new u.h,v=new u.h;for(var w=0,T=r.da();w<T;w++)for(var $=!0,C=r.Ba(w),O=r.Vc(w);C<O;C++)if($)l.tc(2*C,g),$=!1;else{if(l.tc(2*C,p),o.L(g),v.L(p),d.zy(o,v)!=0)return!0;g.L(p)}}return!1},a.qc=function(r,o,l){var d=r.getType(),p=o.getType();if(u.aa.xj(d)){var g=r.Bb;if(g!=null&&(g=g.Fk)!=null)if(p==33){var v=o.D();if((v=g.So(v.x,v.y))==1)return 1;if(v==0)return 4}else{if(v=new u.l,o.A(v),(v=g.Ro(v))==1)return 1;if(v==0)return 4;if(l&&u.aa.xj(p)&&a.HE(o,g))return 1073741824}}if(u.aa.xj(p)&&(g=o.Bb)!=null&&(g=g.Fk)!=null)if(d==33){if(r=r.D(),(v=g.So(r.x,r.y))==1)return 2;if(v==0)return 4}else{if(o=new u.l,r.A(o),(v=g.Ro(o))==1)return 2;if(v==0)return 4;if(l&&u.aa.xj(d)&&a.HE(r,g))return 1073741824}return 0},a.HE=function(r,o){for(var l=r.I(),d=new u.h,p=0;p<l;p++)if(r.D(p,d),o.So(d.x,d.y)==1)return!0;return!1},a.II=function(r,o,l,d){for(var p=1<=r.om(0)&&1<=o.om(0),g=r.Ga(),v=o.Ga(),w=[0,0],T=[0,0],$=new u.Zl(r,o,l,!1),C=!1;$.next();){var O=$.nl(),N=$.hl();if(g.Vb(O),v.Vb(N),O=g.ha(),(N=v.ha().Ea(O,null,T,w,l))==2){if(C=w[0],N=w[1],O=O.Qb(),p&&(N-C)*O>l)return!1;C=!0}else if(N!=0){if(C=w[0],O=T[0],0<C&&1>C&&0<O&&1>O)return!1;C=!0}}return!!C&&(g=new u.l,v=new u.l,p=new u.l,r.A(g),o.A(v),g.W(1e3*l,1e3*l),v.W(1e3*l,1e3*l),p.K(g),p.Ea(v),!(10<r.I()&&(r=u.Ud.clip(r,p,l,0),r.B())||10<o.I()&&(o=u.Ud.clip(o,p,l,0),o.B()))&&u.am.rt(r,o,l,"F********",d))},a.FI=function(r,o,l,d){var p=1<=r.om(0)&&1<=o.om(0),g=new u.l,v=new u.l,w=new u.l;r.A(g),o.A(v);for(var T=!1,$=a.ls(g,v,l),C=a.ls(v,g,l),O=r.Ga(),N=o.Ga(),R=[0,0],F=[0,0],G=new u.Zl(r,o,l,!1);G.next();){var z=G.nl(),B=G.hl();if(O.Vb(z),N.Vb(B),B=O.ha(),(z=N.ha().Ea(B,null,F,R,l))==2){z=R[0];var q=R[1];if(B=B.Qb(),p&&(q-z)*B>l&&(T=!0,$&&C))return!0}else if(z!=0&&(z=R[0],B=F[0],0<z&&1>z&&0<B&&1>B))return!0}if(p=new u.l,O=new u.l,p.K(g),p.W(1e3*l,1e3*l),O.K(v),O.W(1e3*l,1e3*l),w.K(p),w.Ea(O),g="",g=T?g+"**":g+"T*",$){if(10<o.I()&&(o=u.Ud.clip(o,w,l,0)).B())return!1;g+="****"}else g+="T***";if(C){if(10<r.I()&&(r=u.Ud.clip(r,w,l,0)).B())return!1;g+="***"}else g+="T**";return u.am.rt(r,o,l,g.toString(),d)},a.BI=function(r,o,l,d){var p=[!1],g=a.zI(r,o,l,p);return p[0]?g:(p=new u.l,o.A(p),p.W(1e3*l,1e3*l),!(10<r.I()&&(r=u.Ud.clip(r,p,l,0),r.B()))&&u.am.Sw(r,o,l,d))},a.zI=function(r,o,l,d){d[0]=!1;for(var p=r.Ga(),g=o.Ga(),v=[0,0],w=[0,0],T=new u.Zl(r,o,l,!1),$=!1;T.next();){var C=T.nl(),O=T.hl();if(p.Vb(C,-1),g.Vb(O,-1),C=p.ha(),(C=g.ha().Ea(C,null,w,v,l))!=0&&($=!0,C==1&&(C=v[0],O=w[0],0<C&&1>C&&0<O&&1>O)))return d[0]=!0,!1}if(!$){for(d[0]=!0,v=new u.l,r.A(v),v.W(l,l),T=r,$=!1,w=new u.l,d=0,p=o.da();d<p;d++)if(0<o.Ja(d)){if(o.Rj(d,w),!v.isIntersecting(w)||(g=o.Na(o.Ba(d)),(g=u.Dg.wm(T,g,0))==0))return!1;$||(!u.Dg.Ml(r,o.da()-1)||r.Bb!=null&&r.Bb.Fb!=null?T=r:(g=new u.Da,r.copyTo(g),g.fj(1),T=g),$=!0)}if(r.da()==1||o.getType()==1607)return!0;for(v=new u.l,o.A(v),v.W(l,l),w=o,T=!1,l=new u.l,d=0,p=r.da();d<p;d++)if(0<r.Ja(d)){if(r.Rj(d,l),v.isIntersecting(l)&&(g=r.Na(r.Ba(d)),(g=u.Dg.wm(w,g,0))==1))return!1;T||(!u.Dg.Ml(o,r.da()-1)||o.Bb!=null&&o.Bb.Fb!=null?w=o:(g=new u.Da,o.copyTo(g),g.fj(1),w=g),T=!0)}return!0}return!1},a.JI=function(r,o,l,d){for(var p=r.Ga(),g=o.Ga(),v=[0,0],w=[0,0],T=new u.Zl(r,o,l,!1),$=!1;T.next();){var C=T.nl(),O=T.hl();if(p.Vb(C),g.Vb(O),C=p.ha(),(C=g.ha().Ea(C,null,w,v,l))==2)$=!0;else if(C!=0){if($=v[0],C=w[0],0<$&&1>$&&0<C&&1>C)return!1;$=!0}}return!!$&&(g=new u.l,v=new u.l,p=new u.l,r.A(g),o.A(v),g.W(1e3*l,1e3*l),v.W(1e3*l,1e3*l),p.K(g),p.Ea(v),!(10<r.I()&&(r=u.Ud.clip(r,p,l,0),r.B())||10<o.I()&&(o=u.Ud.clip(o,p,l,0),o.B()))&&u.am.$m(r,o,l,"F********",d))},a.DI=function(r,o,l,d){for(var p=r.Ga(),g=o.Ga(),v=[0,0],w=[0,0],T=new u.Zl(r,o,l,!1),$=!1;T.next();){var C=T.nl(),O=T.hl();if(p.Vb(C),g.Vb(O),C=p.ha(),(C=g.ha().Ea(C,null,w,v,l))==2)$=!0;else if(C!=0){if($=v[0],C=w[0],0<$&&1>$&&0<C&&1>C)return!0;$=!0}}return!!$&&(g=new u.l,v=new u.l,w=new u.l,T=new u.l,p=new u.l,r.A(g),o.A(v),a.ls(v,g,l)?(w.K(g),w.W(1e3*l,1e3*l),T.K(v),T.W(1e3*l,1e3*l),p.K(w),p.Ea(T),!(10<r.I()&&(r=u.Ud.clip(r,p,l,0),r.B())||10<o.I()&&(o=u.Ud.clip(o,p,l,0),o.B()))&&(l=u.am.$m(r,o,l,"T********",d))):l=u.am.$m(r,o,l,"T*****T**",d))},a.CI=function(r,o,l,d){var p=[!1],g=a.zI(r,o,l,p);return p[0]?g:(p=new u.l,o.A(p),p.W(1e3*l,1e3*l),!(10<r.I()&&(r=u.Ud.clip(r,p,l,0),r.B()))&&u.am.fB(r,o,l,d))},a.AI=function(r,o,l){return u.hd.Yd(r,o,l)==1},a.HI=function(r,o,l){return u.hd.Yd(r,o,l)==2},a.kt=function(r,o,l){var d=new u.h;l*=l;for(var p=0;p<r.I();p++)if(r.D(p,d),u.h.yc(d,o)<=l)return!1;return!0},a.prototype.QE=function(r,o){return r=this.rh[r],o=this.rh[o],r.Mm<o.Mm||r.Mm==o.Mm&&(r.pw<o.pw||r.pw==o.pw&&(r.Kj<o.Kj||r.Kj==o.Kj&&(r.Si<o.Si||r.Si==o.Si&&r.BH<o.BH)))?-1:1},a}();u.ud=c}(V||(V={})),function(u){var A,b,c;(b=A||(A={}))[b.InteriorInterior=0]="InteriorInterior",b[b.InteriorBoundary=1]="InteriorBoundary",b[b.InteriorExterior=2]="InteriorExterior",b[b.BoundaryInterior=3]="BoundaryInterior",b[b.BoundaryBoundary=4]="BoundaryBoundary",b[b.BoundaryExterior=5]="BoundaryExterior",b[b.ExteriorInterior=6]="ExteriorInterior",b[b.ExteriorBoundary=7]="ExteriorBoundary",b[b.ExteriorExterior=8]="ExteriorExterior",function(a){a[a.AreaAreaPredicates=0]="AreaAreaPredicates",a[a.AreaLinePredicates=1]="AreaLinePredicates",a[a.LineLinePredicates=2]="LineLinePredicates",a[a.AreaPointPredicates=3]="AreaPointPredicates",a[a.LinePointPredicates=4]="LinePointPredicates",a[a.PointPointPredicates=5]="PointPointPredicates"}(c||(c={})),A=function(){function a(){this.le=0,this.j=new u.iu,this.J=[0,0,0,0,0,0,0,0,0],this.Za=[0,0,0,0,0,0,0,0,0],this.ea=[!1,!1,!1,!1,!1,!1,!1,!1,!1],this.Sm=this.vw=-1}return a.yB=function(r,o,l,d,p){if(d.length!=9)throw u.i.fa("relation string length has to be 9 characters");for(var g=0;9>g;g++){var v=d.charAt(g);if(v!="*"&&v!="T"&&v!="F"&&v!="0"&&v!="1"&&v!="2")throw u.i.fa("relation string")}if((g=this.MR(d,r.Db(),o.Db()))!=0)return u.ud.zB(r,o,l,g,p);g=new u.l,r.A(g),v=new u.l,o.A(v);var w=new u.l;if(w.K(g),w.Zb(v),l=u.ta.Wd(l,w,!1),r=this.WE(r,l),o=this.WE(o,l),r.B()||o.B())return this.uW(r,o,d);switch(g=r.getType(),v=o.getType(),w=!1,g){case 1736:switch(v){case 1736:w=this.rt(r,o,l,d,p);break;case 1607:w=this.$m(r,o,l,d,p);break;case 33:w=this.qt(r,o,l,d);break;case 550:w=this.pt(r,o,l,d,p)}break;case 1607:switch(v){case 1736:w=this.$m(o,r,l,this.Zp(d),p);break;case 1607:w=this.gB(r,o,l,d,p);break;case 33:w=this.tt(r,o,l,d,p);break;case 550:w=this.st(r,o,l,d,p)}break;case 33:switch(v){case 1736:w=this.qt(o,r,l,this.Zp(d));break;case 1607:w=this.tt(o,r,l,this.Zp(d),p);break;case 33:w=this.$U(r,o,l,d);break;case 550:w=this.lt(o,r,l,this.Zp(d))}break;case 550:switch(v){case 1736:w=this.pt(o,r,l,this.Zp(d),p);break;case 1607:w=this.st(o,r,l,this.Zp(d),p);break;case 550:w=this.ZA(r,o,l,d,p);break;case 33:w=this.lt(r,o,l,d)}break;default:w=!1}return w},a.rt=function(r,o,l,d,p){var g=new a;g.Yi(),g.bj(d),g.xJ();var v=new u.l,w=new u.l;return r.A(v),o.A(w),d=!1,u.ud.dk(v,w,l)&&(g.Cu(r,o),d=!0),d||((v=u.ud.qc(r,o,!1))==4?(g.Cu(r,o),d=!0):v==1?(g.ly(o),d=!0):v==2&&(g.ZD(r),d=!0)),d||(r=(d=new u.gd).Ib(r),o=d.Ib(o),g.Wo(d,l,p),g.Bp(r,o),g.j.Ug()),a.fg(g.J,g.Xc)},a.Sw=function(r,o,l,d){var p=new a;p.Yi(),p.bj("T*****F**"),p.xJ();var g=new u.l,v=new u.l;r.A(g),o.A(v);var w=!1;return u.ud.dk(g,v,l)&&(p.Cu(r,o),w=!0),w||((g=u.ud.qc(r,o,!1))==4?(p.Cu(r,o),w=!0):g==1?(p.ly(o),w=!0):g==2&&(p.ZD(r),w=!0)),w?this.fg(p.J,p.Xc):(r=(w=new u.gd).Ib(r),g=w.Ib(o),u.Tk.V(w,l,d,!1),l=w.Ne(g).mg(),w.Gp(0,!0,!0),u.rn.V(w,r,-1,!1,d),w.I(r)!=0&&(u.rn.V(w,g,-1,!1,d),p.er(w,d),(o=w.I(g)==0)||(p.Bp(r,g),p.j.Ug(),g=this.fg(p.J,p.Xc))?(r=w.Ne(r),r=(w=new u.gd).Ib(r),g=w.Ib(l),p.er(w,d),p.le=0,p.Yi(),p.bj(o?"T*****F**":"******F**"),p.IB(),p.Bp(r,g),p.j.Ug(),this.fg(p.J,p.Xc)):g))},a.$m=function(r,o,l,d,p){var g=new a;g.Yi(),g.bj(d),g.IB();var v=new u.l,w=new u.l;return r.A(v),o.A(w),d=!1,u.ud.dk(v,w,l)&&(g.Du(r,o),d=!0),d||((v=u.ud.qc(r,o,!1))==4?(g.Du(r,o),d=!0):v==1&&(g.$D(o),d=!0)),d||(r=(d=new u.gd).Ib(r),o=d.Ib(o),g.Wo(d,l,p),g.kh=g.j.Dp(),a.Jw(o,g.j,g.kh),g.Bp(r,o),g.j.Ep(g.kh),g.j.Ug()),a.fg(g.J,g.Xc)},a.fB=function(r,o,l,d){var p=new a;p.Yi(),p.bj("T*****F**"),p.IB();var g=new u.l,v=new u.l;r.A(g),o.A(v);var w=!1;return u.ud.dk(g,v,l)&&(p.Du(r,o),w=!0),w||((g=u.ud.qc(r,o,!1))==4?(p.Du(r,o),w=!0):g==1&&(p.$D(o),w=!0)),w?this.fg(p.J,p.Xc):(r=(w=new u.gd).Ib(r),o=w.Ib(o),p.Wo(w,l,d),w.I(r)!=0&&(p.Bp(r,o),p.j.Ug(),this.fg(p.J,p.Xc)))},a.pt=function(r,o,l,d,p){var g=new a;g.Yi(),g.bj(d),g.yJ();var v=new u.l,w=new u.l;return r.A(v),o.A(w),d=!1,u.ud.dk(v,w,l)&&(g.Eu(r),d=!0),d||((v=u.ud.qc(r,o,!1))==4?(g.Eu(r),d=!0):v==1&&(g.zN(),d=!0)),d||(r=(d=new u.gd).Ib(r),o=d.Ib(o),g.Wo(d,l,p),g.Gy(r,o),g.j.Ug()),a.fg(g.J,g.Xc)},a.gB=function(r,o,l,d,p){var g=new a;g.Yi(),g.bj(d),g.eX(),d=new u.l;var v=new u.l;r.A(d),o.A(v);var w=!1;return u.ud.dk(d,v,l)&&(g.PG(r,o),w=!0),w||u.ud.qc(r,o,!1)!=4||(g.PG(r,o),w=!0),w||(r=(d=new u.gd).Ib(r),o=d.Ib(o),g.Wo(d,l,p),g.Yh=g.j.Dp(),g.kh=g.j.Dp(),a.Jw(r,g.j,g.Yh),a.Jw(o,g.j,g.kh),g.Bp(r,o),g.j.Ep(g.Yh),g.j.Ep(g.kh),g.j.Ug()),a.fg(g.J,g.Xc)},a.st=function(r,o,l,d,p){var g=new a;g.Yi(),g.bj(d),g.MJ(),d=new u.l;var v=new u.l;r.A(d),o.A(v);var w=!1;return u.ud.dk(d,v,l)&&(g.Vz(r),w=!0),w||u.ud.qc(r,o,!1)!=4||(g.Vz(r),w=!0),w||(r=(d=new u.gd).Ib(r),o=d.Ib(o),g.Wo(d,l,p),g.Yh=g.j.Dp(),a.Jw(r,g.j,g.Yh),g.Gy(r,o),g.j.Ep(g.Yh),g.j.Ug()),a.fg(g.J,g.Xc)},a.ZA=function(r,o,l,d,p){var g=new a;g.Yi(),g.bj(d),g.RJ(),d=new u.l;var v=new u.l;r.A(d),o.A(v);var w=!1;return u.ud.dk(d,v,l)&&(g.yI(),w=!0),w||(r=(d=new u.gd).Ib(r),o=d.Ib(o),g.Wo(d,l,p),g.Gy(r,o),g.j.Ug()),a.fg(g.J,g.Xc)},a.qt=function(r,o,l,d){var p=new a;p.Yi(),p.bj(d),p.yJ();var g=new u.l;r.A(g),o=o.D();var v=!1;return u.ud.Rw(o,g,l)&&(p.Eu(r),v=!0),v||((l=u.hd.Yd(r,o,l))==1?(p.J[0]=0,p.J[2]=2,p.J[3]=-1,p.J[5]=1,p.J[6]=-1):l==2?(p.J[6]=-1,r.Ke()!=0?(p.J[0]=-1,p.J[3]=0,p.J[2]=2,p.J[5]=1):(p.J[0]=0,p.J[3]=-1,p.J[5]=-1,l=new u.l,r.A(l),p.J[2]=l.ca()==0&&l.R()==0?-1:1)):p.Eu(r)),this.fg(p.J,d)},a.tt=function(r,o,l,d,p){var g=new a;g.Yi(),g.bj(d),g.MJ();var v=new u.l;r.A(v),d=o.D();var w=!1;if(u.ud.Rw(d,v,l)&&(g.Vz(r),w=!0),!w){v=null;var T=w=!1;(g.ea[0]||g.ea[6])&&(u.ud.Yz(r,d,l)?(g.ea[0]&&(v=u.pi.gm(r,p),T=!u.ud.kt(v,d,l),w=!0,g.J[0]=T?-1:0),g.J[6]=-1):(g.J[0]=-1,g.J[6]=0)),g.ea[3]&&(v!=null&&v.B()?g.J[3]=-1:(w||(v==null&&(v=u.pi.gm(r,p)),T=!u.ud.kt(v,d,l),w=!0),g.J[3]=T?0:-1)),g.ea[5]&&(v!=null&&v.B()?g.J[5]=-1:w&&!T?g.J[5]=0:(v==null&&(v=u.pi.gm(r,p)),p=u.ud.Nw(v,o,l),g.J[5]=p?-1:0)),g.ea[2]&&(r.Qb()!=0?g.J[2]=1:((p=new u.de(r.description)).Fd(r,0,r.I()),r=u.ud.Nw(p,o,l),g.J[2]=r?-1:0))}return this.fg(g.J,g.Xc)},a.lt=function(r,o,l,d){var p=new a;p.Yi(),p.bj(d),p.RJ();var g=new u.l;r.A(g),o=o.D();var v=!1;if(u.ud.Rw(o,g,l)&&(p.yI(),v=!0),!v){g=!1,v=!0,l*=l;for(var w=0;w<r.I();w++){var T=r.Na(w);if(u.h.yc(T,o)<=l?g=!0:v=!1,g&&!v)break}g?(p.J[0]=0,p.J[2]=v?-1:0,p.J[6]=-1):(p.J[0]=-1,p.J[2]=0,p.J[6]=0)}return a.fg(p.J,d)},a.$U=function(r,o,l,d){r=r.D(),o=o.D();for(var p=[],g=0;9>g;g++)p[g]=-1;return u.h.yc(r,o)<=l*l?p[0]=0:(p[2]=0,p[6]=0),p[8]=2,a.fg(p,d)},a.fg=function(r,o){for(var l=0;9>l;l++)switch(o.charAt(l)){case"T":if(r[l]==-1)return!1;break;case"F":if(r[l]!=-1)return!1;break;case"0":if(r[l]!=0)return!1;break;case"1":if(r[l]!=1)return!1;break;case"2":if(r[l]!=2)return!1}return!0},a.uW=function(r,o,l){var d=[-1,-1,-1,-1,-1,-1,-1,-1,-1];if(r.B()&&o.B()){for(var p=0;9>p;p++)d[p]=-1;return this.fg(d,l)}return p=!1,r.B()&&(r=o,p=!0),d[0]=-1,d[1]=-1,d[3]=-1,d[4]=-1,d[6]=-1,d[7]=-1,d[8]=2,o=r.getType(),u.aa.Hc(o)?o==1736?r.Ke()!=0?(d[2]=2,d[5]=1):(d[5]=-1,o=new u.l,r.A(o),d[2]=o.ca()==0&&o.R()==0?0:1):(o=r.Qb()!=0,d[2]=o?1:0,d[5]=u.pi.aq(r)?0:-1):(d[2]=0,d[5]=-1),p&&this.vK(d),this.fg(d,l)},a.MR=function(r,o,l){return a.dQ(r)?3:a.UP(r)?4:a.cY(r,o,l)?8:a.CP(r,o,l)?16:a.eP(r)?1:a.EU(r,o,l)?32:0},a.dQ=function(r){return r.charAt(0)=="T"&&r.charAt(1)=="*"&&r.charAt(2)=="F"&&r.charAt(3)=="*"&&r.charAt(4)=="*"&&r.charAt(5)=="F"&&r.charAt(6)=="F"&&r.charAt(7)=="F"&&r.charAt(8)=="*"},a.UP=function(r){return r.charAt(0)=="F"&&r.charAt(1)=="F"&&r.charAt(2)=="*"&&r.charAt(3)=="F"&&r.charAt(4)=="F"&&r.charAt(5)=="*"&&r.charAt(6)=="*"&&r.charAt(7)=="*"&&r.charAt(8)=="*"},a.cY=function(r,o,l){return(o!=0||l!=0)&&((o!=2||l!=2)&&(r.charAt(0)=="F"&&r.charAt(1)=="*"&&r.charAt(2)=="*"&&r.charAt(3)=="T"&&r.charAt(4)=="*"&&r.charAt(5)=="*"&&r.charAt(6)=="*"&&r.charAt(7)=="*"&&r.charAt(8)=="*"||o==1&&l==1&&r.charAt(0)=="F"&&r.charAt(1)=="T"&&r.charAt(2)=="*"&&r.charAt(3)=="*"&&r.charAt(4)=="*"&&r.charAt(5)=="*"&&r.charAt(6)=="*"&&r.charAt(7)=="*"&&r.charAt(8)=="*")||l!=0&&r.charAt(0)=="F"&&r.charAt(1)=="*"&&r.charAt(2)=="*"&&r.charAt(3)=="*"&&r.charAt(4)=="T"&&r.charAt(5)=="*"&&r.charAt(6)=="*"&&r.charAt(7)=="*"&&r.charAt(8)=="*")},a.CP=function(r,o,l){return o>l?r.charAt(0)=="T"&&r.charAt(1)=="*"&&r.charAt(2)=="*"&&r.charAt(3)=="*"&&r.charAt(4)=="*"&&r.charAt(5)=="*"&&r.charAt(6)=="T"&&r.charAt(7)=="*"&&r.charAt(8)=="*":o==1&&l==1&&r.charAt(0)=="0"&&r.charAt(1)=="*"&&r.charAt(2)=="*"&&r.charAt(3)=="*"&&r.charAt(4)=="*"&&r.charAt(5)=="*"&&r.charAt(6)=="*"&&r.charAt(7)=="*"&&r.charAt(8)=="*"},a.eP=function(r){return r.charAt(0)=="T"&&r.charAt(1)=="*"&&r.charAt(2)=="*"&&r.charAt(3)=="*"&&r.charAt(4)=="*"&&r.charAt(5)=="*"&&r.charAt(6)=="F"&&r.charAt(7)=="F"&&r.charAt(8)=="*"},a.EU=function(r,o,l){if(o==l){if(o!=1)return r.charAt(0)=="T"&&r.charAt(1)=="*"&&r.charAt(2)=="T"&&r.charAt(3)=="*"&&r.charAt(4)=="*"&&r.charAt(5)=="*"&&r.charAt(6)=="T"&&r.charAt(7)=="*"&&r.charAt(8)=="*";if(r.charAt(0)=="1"&&r.charAt(1)=="*"&&r.charAt(2)=="T"&&r.charAt(3)=="*"&&r.charAt(4)=="*"&&r.charAt(5)=="*"&&r.charAt(6)=="T"&&r.charAt(7)=="*"&&r.charAt(8)=="*")return!0}return!1},a.Jw=function(r,o,l){r=o.La(r);for(var d=o.Re;d!=-1;d=o.Rf(d))if(o.xd(d)&r){var p=o.Me(d);if(p==-1)o.nn(d,l,0);else{var g=p,v=0;do o.dh(g)&r&&v++,g=o.jc(o.xa(g));while(g!=p);o.nn(d,l,v)}}},a.Zp=function(r){var o=""+r.charAt(0);return o+=r.charAt(3),o+=r.charAt(6),o+=r.charAt(1),o+=r.charAt(4),o+=r.charAt(7),o+=r.charAt(2),(o+=r.charAt(5))+r.charAt(8)},a.prototype.Yi=function(){for(var r=0;9>r;r++)this.J[r]=-2,this.Za[r]=-2},a.vK=function(r){var o=r[1],l=r[2],d=r[5];r[1]=r[3],r[2]=r[6],r[5]=r[7],r[3]=o,r[6]=l,r[7]=d},a.prototype.bj=function(r){for(this.Xc=r,r=0;9>r;r++)this.Xc.charAt(r)!="*"?(this.ea[r]=!0,this.le++):this.ea[r]=!1},a.prototype.UJ=function(){for(var r=0;9>r;r++)this.ea[r]&&this.J[r]==-2&&(this.J[r]=-1,this.ea[r]=!1)},a.prototype.pc=function(r){return this.J[r]!=-2&&(this.J[r]==-1?(this.ea[r]=!1,this.le--,!0):this.Xc.charAt(r)!="T"&&this.Xc.charAt(r)!="F"?!(this.J[r]<this.Za[r])&&(this.ea[r]=!1,this.le--,!0):(this.ea[r]=!1,this.le--,!0))},a.prototype.xJ=function(){this.vw=0,this.Za[0]=2,this.Za[1]=1,this.Za[2]=2,this.Za[3]=1,this.Za[4]=1,this.Za[5]=1,this.Za[6]=2,this.Za[7]=1,this.Za[8]=2,this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},a.prototype.IB=function(){this.vw=1,this.Sm=3,this.Za[0]=1,this.Za[1]=0,this.Za[2]=2,this.Za[3]=1,this.Za[4]=0,this.Za[5]=1,this.Za[6]=1,this.Za[7]=0,this.Za[8]=2,this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},a.prototype.eX=function(){this.vw=2,this.Sm=4,this.Za[0]=1,this.Za[1]=0,this.Za[2]=1,this.Za[3]=0,this.Za[4]=0,this.Za[5]=0,this.Za[6]=1,this.Za[7]=0,this.Za[8]=2,this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},a.prototype.yJ=function(){this.Sm=3,this.Za[0]=0,this.Za[1]=-1,this.Za[2]=2,this.Za[3]=0,this.Za[4]=-1,this.Za[5]=1,this.Za[6]=0,this.Za[7]=-1,this.Za[8]=2,this.ea[1]&&(this.J[1]=-1,this.ea[1]=!1,this.le--),this.ea[4]&&(this.J[4]=-1,this.ea[4]=!1,this.le--),this.ea[7]&&(this.J[7]=-1,this.ea[7]=!1,this.le--),this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},a.prototype.MJ=function(){this.Sm=4,this.Za[0]=0,this.Za[1]=-1,this.Za[2]=1,this.Za[3]=0,this.Za[4]=-1,this.Za[5]=0,this.Za[6]=0,this.Za[7]=-1,this.Za[8]=2,this.ea[1]&&(this.J[1]=-1,this.ea[1]=!1,this.le--),this.ea[4]&&(this.J[4]=-1,this.ea[4]=!1,this.le--),this.ea[7]&&(this.J[7]=-1,this.ea[7]=!1,this.le--),this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},a.prototype.RJ=function(){this.Sm=5,this.Za[0]=0,this.Za[1]=-1,this.Za[2]=0,this.Za[3]=-1,this.Za[4]=-1,this.Za[5]=-1,this.Za[6]=0,this.Za[7]=-1,this.Za[8]=2,this.ea[1]&&(this.J[1]=-1,this.ea[1]=!1,this.le--),this.ea[3]&&(this.J[3]=-1,this.ea[3]=!1,this.le--),this.ea[4]&&(this.J[4]=-1,this.ea[4]=!1,this.le--),this.ea[5]&&(this.J[5]=-1,this.ea[5]=!1,this.le--),this.ea[7]&&(this.J[7]=-1,this.ea[7]=!1,this.le--),this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},a.prototype.xN=function(r,o,l){var d=!0;return this.ea[0]&&(this.CS(r,o,l),d=d&&this.pc(0)),this.ea[1]&&(this.sG(r,o,1),d=d&&this.pc(1)),this.ea[2]&&(this.tG(r,o,l,2),d=d&&this.pc(2)),this.ea[3]&&(this.sG(r,l,3),d=d&&this.pc(3)),this.ea[4]&&(this.BN(r,o,l),d=d&&this.pc(4)),this.ea[5]&&(this.eE(r,l,5),d=d&&this.pc(5)),this.ea[6]&&(this.tG(r,l,o,6),d=d&&this.pc(6)),this.ea[7]&&(this.eE(r,o,7),d=d&&this.pc(7)),d},a.prototype.Cu=function(r,o){this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.Fr(r,this.ea[2]?2:-1,this.Xc.charAt(2),this.ea[5]?5:-1,this.Xc.charAt(5)),this.Fr(o,this.ea[6]?6:-1,this.Xc.charAt(6),this.ea[7]?7:-1,this.Xc.charAt(7))},a.prototype.Fr=function(r,o,l,d,p){o==-1&&d==-1||((l!="T"&&l!="F"&&o!=-1||p!="T"&&p!="F"&&d!=-1)&&r.Ke()==0?(d!=-1&&(this.J[d]=-1),o!=-1&&(l=new u.l,r.A(l),this.J[o]=l.ca()==0&&l.R()==0?0:1)):(o!=-1&&(this.J[o]=2),d!=-1&&(this.J[d]=1)))},a.prototype.ly=function(r){this.J[2]=2,this.J[3]=-1,this.J[4]=-1,this.J[5]=1,this.J[6]=-1,this.J[7]=-1,this.Fr(r,this.ea[0]?0:-1,this.Xc.charAt(0),this.ea[1]?1:-1,this.Xc.charAt(1))},a.prototype.ZD=function(r){this.ly(r),a.vK(this.J)},a.prototype.Du=function(r,o){if(this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.ea[6]){var l=this.Xc.charAt(6);l=l=="T"||l=="F"||o.Qb()!=0,this.J[6]=l?1:0}this.ea[7]&&(o=u.pi.aq(o),this.J[7]=o?0:-1),this.Fr(r,this.ea[2]?2:-1,this.Xc.charAt(2),this.ea[5]?5:-1,this.Xc.charAt(5))},a.prototype.$D=function(r){if(this.ea[0]){var o=this.Xc.charAt(0);o=o=="T"||o=="F"||r.Qb()!=0,this.J[0]=o?1:0}this.ea[1]&&(r=u.pi.aq(r),this.J[1]=r?0:-1),this.J[2]=2,this.J[3]=-1,this.J[4]=-1,this.J[5]=1,this.J[6]=-1,this.J[7]=-1},a.prototype.Eu=function(r){this.J[0]=-1,this.J[3]=-1,this.J[6]=0,this.Fr(r,this.ea[2]?2:-1,this.Xc.charAt(2),this.ea[5]?5:-1,this.Xc.charAt(5))},a.prototype.zN=function(){this.J[0]=0,this.J[2]=2,this.J[3]=-1,this.J[5]=1,this.J[6]=-1},a.prototype.PG=function(r,o){if(this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.ea[2]){var l=this.Xc.charAt(2);l=l=="T"||l=="F"||r.Qb()!=0,this.J[2]=l?1:0}this.ea[5]&&(r=u.pi.aq(r),this.J[5]=r?0:-1),this.ea[6]&&(l=(l=this.Xc.charAt(6))=="T"||l=="F"||o.Qb()!=0,this.J[6]=l?1:0),this.ea[7]&&(o=u.pi.aq(o),this.J[7]=o?0:-1)},a.prototype.Vz=function(r){if(this.J[0]=-1,this.J[3]=-1,this.ea[2]){var o=this.Xc.charAt(2);o=o=="T"||o=="F"||r.Qb()!=0,this.J[2]=o?1:0}this.ea[5]&&(r=u.pi.aq(r),this.J[5]=r?0:-1),this.J[6]=0},a.prototype.yI=function(){this.J[0]=-1,this.J[2]=0,this.J[6]=0},a.prototype.yN=function(r,o,l){var d=!0;return this.ea[0]&&(this.DS(r,o),d=d&&this.pc(0)),this.ea[1]&&(this.zS(r,o,l,this.kh),d=d&&this.pc(1)),this.ea[2]&&(this.AS(r,o),d=d&&this.pc(2)),this.ea[3]&&(this.FN(r,o,l,this.kh),d=d&&this.pc(3)),this.ea[4]&&(this.CN(r,o,l,this.kh),d=d&&this.pc(4)),this.ea[5]&&(this.DN(r,o,l),d=d&&this.pc(5)),this.ea[6]&&(this.lQ(r,o),d=d&&this.pc(6)),this.ea[7]&&(this.kQ(r,o,l,this.kh),d=d&&this.pc(7)),d},a.prototype.mT=function(r,o,l){var d=!0;return this.ea[0]&&(this.GS(r,o,l,this.Yh,this.kh),d=d&&this.pc(0)),this.ea[1]&&(this.uG(r,o,l,this.Yh,this.kh,1),d=d&&this.pc(1)),this.ea[2]&&(this.vG(r,o,l,2),d=d&&this.pc(2)),this.ea[3]&&(this.uG(r,l,o,this.kh,this.Yh,3),d=d&&this.pc(3)),this.ea[4]&&(this.HN(r,o,l,this.Yh,this.kh),d=d&&this.pc(4)),this.ea[5]&&(this.fE(r,l,this.Yh,5),d=d&&this.pc(5)),this.ea[6]&&(this.vG(r,l,o,6),d=d&&this.pc(6)),this.ea[7]&&(this.fE(r,o,this.kh,7),d=d&&this.pc(7)),d},a.prototype.aE=function(r,o,l){var d=!0;return this.ea[0]&&(this.ES(r,o),d=d&&this.pc(0)),this.ea[2]&&(this.BS(r,o),d=d&&this.pc(2)),this.ea[3]&&(this.GN(r,o,l),d=d&&this.pc(3)),this.ea[5]&&(this.EN(r,o),d=d&&this.pc(5)),this.ea[6]&&(this.mQ(r,o),d=d&&this.pc(6)),d},a.prototype.QG=function(r,o,l){var d=!0;return this.ea[0]&&(this.HS(r,o,l,this.Yh),d=d&&this.pc(0)),this.ea[2]&&(this.FS(r,l),d=d&&this.pc(2)),this.ea[3]&&(this.JN(r,o,l,this.Yh),d=d&&this.pc(3)),this.ea[5]&&(this.IN(r,o,l,this.Yh),d=d&&this.pc(5)),this.ea[6]&&(this.nQ(r,o,l),d=d&&this.pc(6)),d},a.prototype.ZU=function(r,o,l){var d=!0;return this.ea[0]&&(this.IS(r,o,l),d=d&&this.pc(0)),this.ea[2]&&(this.wG(r,o,l,2),d=d&&this.pc(2)),this.ea[6]&&(this.wG(r,l,o,6),d=d&&this.pc(6)),d},a.prototype.CS=function(r,o,l){this.J[0]!=2&&(r=this.j.af(r))&o&&r&l&&(this.J[0]=2)},a.prototype.sG=function(r,o,l){if(this.J[l]!=1){var d=this.j.af(this.j.xa(r));this.j.af(r)&o&&d&o&&(this.J[l]=1)}},a.prototype.tG=function(r,o,l,d){this.J[d]!=2&&(r=this.j.af(r))&o&&!(r&l)&&(this.J[d]=2)},a.prototype.BN=function(r,o,l){if(this.J[4]!=1){var d=this.j.dh(r);d&o&&d&l?this.J[4]=1:this.J[4]!=0&&this.j.Ab(this.j.te(this.j.xa(r)),this.Ui)!=1&&(r=this.j.xd(this.j.uf(r)))&o&&r&l&&(this.J[4]=0)}},a.prototype.eE=function(r,o,l){if(this.J[l]!=1){var d=this.j.af(this.j.xa(r));!(this.j.af(r)&o)&&!(d&o)&&(this.J[l]=1)}},a.prototype.DS=function(r,o){if(this.J[0]!=1){var l=this.j.af(this.j.xa(r));this.j.af(r)&o&&l&o&&(this.J[0]=1)}},a.prototype.zS=function(r,o,l,d){if(this.J[1]!=0&&this.j.Ab(this.j.te(this.j.xa(r)),this.Ui)!=1){var p=this.j.uf(r),g=this.j.xd(p);!(g&o)&&this.j.af(r)&o&&(r=this.j.ng(p,d),g&l&&r%2!=0&&(this.J[1]=0))}},a.prototype.AS=function(r,o){this.J[2]!=2&&this.j.dh(r)&o&&(this.J[2]=2)},a.prototype.FN=function(r,o,l,d){if(this.J[3]!=1){var p=this.j.dh(r);p&o&&p&l?this.J[3]=1:this.J[3]!=0&&this.j.Ab(this.j.te(this.j.xa(r)),this.Ui)!=1&&(p=this.j.uf(r),(r=this.j.xd(p))&o&&(o=this.j.ng(p,d),r&l&&o%2==0&&(this.J[3]=0)))}},a.prototype.CN=function(r,o,l,d){if(this.J[4]!=0&&this.j.Ab(this.j.te(this.j.xa(r)),this.Ui)!=1){var p=this.j.uf(r);(r=this.j.xd(p))&o&&(o=this.j.ng(p,d),r&l&&o%2!=0&&(this.J[4]=0))}},a.prototype.DN=function(r,o,l){this.J[5]!=1&&(r=this.j.dh(r))&o&&!(r&l)&&(this.J[5]=1)},a.prototype.lQ=function(r,o){if(this.J[6]!=1){var l=this.j.af(this.j.xa(r));!(this.j.af(r)&o)&&!(l&o)&&(this.J[6]=1)}},a.prototype.kQ=function(r,o,l,d){if(this.J[7]!=0&&this.j.Ab(this.j.te(this.j.xa(r)),this.Ui)!=1){var p=this.j.uf(r),g=this.j.xd(p);!(g&o)&&!(this.j.af(r)&o)&&(r=this.j.ng(p,d),g&l&&r%2!=0&&(this.J[7]=0))}},a.prototype.GS=function(r,o,l,d,p){if(this.J[0]!=1){var g=this.j.dh(r);g&o&&g&l?this.J[0]=1:this.J[0]!=0&&this.j.Ab(this.j.te(this.j.xa(r)),this.Ui)!=1&&(r=this.j.uf(r),(g=this.j.xd(r))&o&&g&l&&(o=this.j.ng(r,d),p=this.j.ng(r,p),o%2==0&&p%2==0&&(this.J[0]=0)))}},a.prototype.uG=function(r,o,l,d,p,g){if(this.J[g]!=0&&this.j.Ab(this.j.te(this.j.xa(r)),this.Ui)!=1){r=this.j.uf(r);var v=this.j.xd(r);v&o&&v&l&&(o=this.j.ng(r,d),p=this.j.ng(r,p),o%2==0&&p%2!=0&&(this.J[g]=0))}},a.prototype.vG=function(r,o,l,d){this.J[d]!=1&&(r=this.j.dh(r))&o&&!(r&l)&&(this.J[d]=1)},a.prototype.HN=function(r,o,l,d,p){if(this.J[4]!=0&&this.j.Ab(this.j.te(this.j.xa(r)),this.Ui)!=1){r=this.j.uf(r);var g=this.j.xd(r);g&o&&g&l&&(o=this.j.ng(r,d),p=this.j.ng(r,p),o%2!=0&&p%2!=0&&(this.J[4]=0))}},a.prototype.fE=function(r,o,l,d){this.J[d]!=0&&this.j.Ab(this.j.te(this.j.xa(r)),this.Ui)!=1&&(r=this.j.uf(r),!(this.j.xd(r)&o)&&this.j.ng(r,l)%2!=0&&(this.J[d]=0))},a.prototype.ES=function(r,o){this.J[0]!=0&&!(this.j.xd(r)&o)&&this.j.hk(this.j.cz(r))&o&&(this.J[0]=0)},a.prototype.BS=function(r,o){this.J[2]!=2&&this.j.xd(r)&o&&(this.J[2]=2)},a.prototype.GN=function(r,o,l){this.J[3]!=0&&(r=this.j.xd(r))&o&&r&l&&(this.J[3]=0)},a.prototype.EN=function(r,o){this.J[5]!=1&&this.j.xd(r)&o&&(this.J[5]=1)},a.prototype.mQ=function(r,o){this.J[6]!=0&&!(this.j.xd(r)&o)&&!(this.j.hk(this.j.cz(r))&o)&&(this.J[6]=0)},a.prototype.HS=function(r,o,l,d){if(this.J[0]!=0){var p=this.j.xd(r);p&o&&p&l&&this.j.ng(r,d)%2==0&&(this.J[0]=0)}},a.prototype.FS=function(r,o){this.J[2]!=1&&(this.j.Me(r)!=-1?this.J[2]=1:this.J[2]!=0&&!(this.j.xd(r)&o)&&(this.J[2]=0))},a.prototype.JN=function(r,o,l,d){if(this.J[3]!=0){var p=this.j.xd(r);p&o&&p&l&&this.j.ng(r,d)%2!=0&&(this.J[3]=0)}},a.prototype.IN=function(r,o,l,d){if(this.J[5]!=0){var p=this.j.xd(r);p&o&&!(p&l)&&this.j.ng(r,d)%2!=0&&(this.J[5]=0)}},a.prototype.nQ=function(r,o,l){this.J[6]!=0&&!((r=this.j.xd(r))&o)&&r&l&&(this.J[6]=0)},a.prototype.IS=function(r,o,l){this.J[0]!=0&&(r=this.j.xd(r))&o&&r&l&&(this.J[0]=0)},a.prototype.wG=function(r,o,l,d){this.J[d]!=0&&(r=this.j.xd(r))&o&&!(r&l)&&(this.J[d]=0)},a.prototype.Bp=function(r,o){var l=!1;r=this.j.La(r),o=this.j.La(o),this.Ui=this.j.$g();for(var d=this.j.Re;d!=-1;d=this.j.Rf(d)){var p=this.j.Me(d);if(p==-1){if(this.Sm!=-1)switch(this.Sm){case 3:l=this.aE(d,r,o);break;case 4:l=this.QG(d,r,o);break;default:throw u.i.fa("internal error")}}else{var g=p;do{var v=g;if(this.j.Ab(v,this.Ui)!=1)do{switch(this.vw){case 0:l=this.xN(v,r,o);break;case 1:l=this.yN(v,r,o);break;case 2:l=this.mT(v,r,o);break;default:throw u.i.fa("internal error")}if(l)break;this.j.Kb(v,this.Ui,1),v=this.j.jc(v)}while(v!=g&&!l);if(l)break;g=this.j.jc(this.j.xa(v))}while(g!=p);if(l)break}}l||this.UJ(),this.j.Jg(this.Ui)},a.prototype.Gy=function(r,o){var l=!1;r=this.j.La(r),o=this.j.La(o);for(var d=this.j.Re;d!=-1;d=this.j.Rf(d)){switch(this.Sm){case 3:l=this.aE(d,r,o);break;case 4:l=this.QG(d,r,o);break;case 5:l=this.ZU(d,r,o);break;default:throw u.i.Qa()}if(l)break}l||this.UJ()},a.prototype.er=function(r,o){this.j.dr(r,o)},a.prototype.Wo=function(r,o,l){this.YP(r,o,l),this.er(r,l)},a.prototype.YP=function(r,o,l){for(u.Tk.V(r,o,l,!1),r.Gp(0,!0,!0),o=r.ld;o!=-1;o=r.ue(o))r.ic(o)==1736&&u.rn.V(r,o,-1,!1,l)},a.WE=function(r,o){var l=r.getType();return u.aa.yd(l)?((o=new u.Ta(r.description)).oc(r,!0),o):l==197?(l=new u.l,r.A(l),l.ca()<=o&&l.R()<=o?(o=new u.Sa(r.description),r.sf(o),o):l.ca()<=o||l.R()<=o?(o=new u.Ta(r.description),l=new u.Sa,r.Hf(0,l),o.nf(l),r.Hf(2,l),o.lineTo(l),o):((o=new u.Da(r.description)).ad(r,!1),o)):r},a}(),u.am=A}(V||(V={})),function(u){var A=function(){function a(r){this.Em=new u.ia(0),this.dw=new u.ia(0),this.wt=new u.h,this.xt=new u.h,this.g=r,this.Hs=-1}return a.prototype.bc=function(r){return this.g.bc(this.zz(r))},a.prototype.Bv=function(r){var o=this.iz(r);if(r=this.HF(r),this.g.Ma(o)==r){var l=o;o=r,r=l}return this.g.Gc(o,this.wt),this.g.Gc(r,this.xt),this.wt.y<this.xt.y},a.prototype.zz=function(r){var o=this.iz(r);return r=this.HF(r),this.g.U(o)==r?o:r},a.prototype.iz=function(r){return this.Em.get(r)},a.prototype.HF=function(r){return this.dw.get(r)},a.prototype.rF=function(r){this.Em.set(r,this.Hs),this.Hs=r},a.prototype.nI=function(r){if(this.Hs!=-1){var o=this.Hs;return this.Hs=this.Em.get(o),this.Em.set(o,r),this.dw.set(o,this.g.U(r)),o}return this.Em==null&&(this.Em=new u.ia(0),this.dw=new u.ia(0)),o=this.Em.size,this.Em.add(r),this.dw.add(this.g.U(r)),o},a.prototype.rz=function(r){return this.g.bd(this.iz(r))},a}();u.yY=A;var b=function(){function a(r){this.Be=r,this.ie=new u.yb,this.Nm=new u.yb,this.CH=0,this.Ao=null,this.yA=-1}return a.prototype.compare=function(r,o,l){l=r.ja(l);var d=this.Be.hb;if(this.yA==o)var p=this.CH;else this.Ao=d.bc(o),this.Ao==null?((r=d.g).ed(d.zz(o),this.ie),this.Ao=this.ie,p=this.ie.Pe(this.Be.yh,0)):p=this.Ao.Pe(this.Be.yh,0),this.CH=p,this.yA=o;if((r=d.bc(l))==null){(r=d.g).ed(d.zz(l),this.Nm),r=this.Nm;var g=this.Nm.Pe(this.Be.yh,0)}else g=r.Pe(this.Be.yh,0);return p==g&&(o=d.Bv(o),l=d.Bv(l),(o=.5*((l=Math.min(o?this.Ao.la:this.Ao.na,l?r.la:r.na))+this.Be.yh))==this.Be.yh&&(o=l),p=this.Ao.Pe(o,0),g=r.Pe(o,0)),p<g?-1:p>g?1:0},a.prototype.reset=function(){this.yA=-1},a}(),c=function(){function a(){this.Wm=this.Gl=null,this.fb=new u.Yj,this.fb.RP(),this.$d=new b(this),this.fb.Vo(this.$d)}return a.prototype.HQ=function(){var r=!1;if(this.fw&&(r=this.IQ()),this.g.da(this.X)==1){var o=this.g.Ob(this.X);return r=this.g.wz(o),this.g.PB(o,!0),0>r&&(r=this.g.Xa(o),this.g.pJ(r),this.g.Wg(o,this.g.Ma(r)),!0)}for(this.El=this.g.Ky(),this.wo=this.g.Ky(),o=this.g.Ob(this.X);o!=-1;o=this.g.Rb(o))this.g.gr(o,this.El,0),this.g.gr(o,this.wo,-1);o=new u.ia(0),this.yh=NaN;var l=new u.h;this.et=this.g.da(this.X),this.ro=this.g.Gd(),this.Rs=this.g.Gd();for(var d=this.Gl.rc(this.Gl.je);d!=-1;d=this.Gl.lb(d)){var p=this.Gl.getData(d);if(this.g.Gc(p,l),l.y!=this.yh&&o.size!=0&&(r=this.ut(o)||r,this.$d.reset(),o.clear(!1)),o.add(p),this.yh=l.y,this.et==0)break}for(0<this.et&&(r=this.ut(o)||r,o.clear(!1)),this.g.Td(this.ro),this.g.Td(this.Rs),o=this.g.Ob(this.X);o!=-1;)if(this.g.sj(o,this.El)==3){for(this.g.PB(o,!0),l=o,o=this.g.sj(o,this.wo);o!=-1;)d=this.g.sj(o,this.wo),this.g.ZT(this.X,this.g.Rb(l),o),l=o,o=d;o=this.g.Rb(l)}else this.g.PB(o,!1),o=this.g.Rb(o);return this.g.CB(this.El),this.g.CB(this.wo),r},a.prototype.ut=function(r){return this.$V(r)},a.prototype.$V=function(r){var o=!1;this.hb==null&&(this.hb=new A(this.g)),this.Wm==null?(this.Wm=new u.ia(0),this.Wm.Jb(16)):this.Wm.clear(!1),this.ZV(r);for(var l=0,d=r.size;l<d;l++){var p=r.get(l);p!=-1&&this.oG(p,-1)}for(l=0;l<this.Wm.size&&0<this.et;l++)if(r=this.Wm.get(l),p=this.hb.rz(this.fb.ja(r)),d=-1,this.g.sj(p,this.El)==0){p=this.fb.we(r);for(var g,v=r;p!=-1;){var w=this.fb.ja(p),T=this.hb.rz(w),$=this.g.sj(T,this.El);if($!=0){d=T;break}v=p,p=this.fb.we(p)}p==-1?(g=!0,p=v):(w=this.fb.ja(p),g=this.hb.Bv(w),p=this.fb.lb(p),g=!g);do{if(w=this.fb.ja(p),T=this.hb.rz(w),($=this.g.sj(T,this.El))==0&&(g!=this.hb.Bv(w)&&(o=this.g.Xa(T),this.g.pJ(o),this.g.Wg(T,this.g.Ma(o)),o=!0),this.g.gr(T,this.El,g?3:2),g||(v=this.g.sj(d,this.wo),this.g.gr(d,this.wo,T),this.g.gr(T,this.wo,v)),this.et--,this.et==0))return o;d=T,v=p,p=this.fb.lb(p),g=!g}while(v!=r)}return o},a.prototype.ZV=function(r){for(var o=0,l=r.size;o<l;o++){var d=r.get(o),p=this.g.Pa(d,this.ro),g=this.g.Pa(d,this.Rs);if(p!=-1){var v=this.fb.ja(p);this.hb.rF(v),this.g.Ra(d,this.ro,-1)}g!=-1&&(v=this.fb.ja(g),this.hb.rF(v),this.g.Ra(d,this.Rs,-1)),v=-1,p!=-1&&g!=-1?(this.fb.vd(p,-1),this.fb.vd(g,-1),r.set(o,-1)):v=p!=-1?p:g,v!=-1&&(this.oG(d,v)||this.fb.vd(v,-1),r.set(o,-1))}},a.prototype.oG=function(r,o){var l=new u.h,d=new u.h;this.g.Gc(r,l);var p=this.g.U(r);this.g.Gc(p,d);var g=!1;if(l.y<d.y){g=!0;var v=this.hb.nI(r);if(o==-1)var w=this.fb.addElement(v,-1);else w=o,this.fb.Sj(w,v);(v=this.g.Pa(p,this.ro))==-1?this.g.Ra(p,this.ro,w):this.g.Ra(p,this.Rs,w),p=this.g.bd(r),this.g.sj(p,this.El)==0&&this.Wm.add(w)}return p=this.g.Ma(r),this.g.Gc(p,d),l.y<d.y&&(g=!0,v=this.hb.nI(p),o==-1?w=this.fb.addElement(v,-1):(w=o,this.fb.Sj(w,v)),(v=this.g.Pa(p,this.ro))==-1?this.g.Ra(p,this.ro,w):this.g.Ra(p,this.Rs,w),p=this.g.bd(r),this.g.sj(p,this.El)==0&&this.Wm.add(w)),g},a.V=function(r,o,l,d){var p=new a;return p.g=r,p.X=o,p.Gl=l,p.fw=d,p.HQ()},a.prototype.IQ=function(){var r=new u.ia(0),o=new u.ia(0),l=-1,d=-1,p=new u.h;p.Rc();for(var g=-1,v=-1,w=-1,T=new u.h,$=this.Gl.rc(this.Gl.je);$!=-1;$=this.Gl.lb($)){var C=this.Gl.getData($);this.g.Gc(C,T);var O=this.g.bd(C);p.qb(T)&&v==O?(d==-1&&(l=this.g.Ky(),d=this.g.Gd()),w==-1&&(w=o.size,this.g.Ra(g,d,w),o.add(1),this.g.sj(O,l)==-1&&(this.g.gr(O,l,g),r.add(O))),this.g.Ra(C,d,w),o.bX(o.Fc()+1)):(w=-1,p.L(T)),g=C,v=O}if(r.size==0)return!1;for(p=new u.ia(0),g=new u.ia(0),v=0,w=r.size;v<w;v++){O=r.get(v);var N=this.g.sj(O,l);for(C=this.g.Pa(N,d),p.clear(!1),g.clear(!1),p.add(N),g.add(C),C=this.g.U(N);C!=N;C=this.g.U(C)){var R=C;if((T=this.g.Pa(R,d))!=-1)if(g.size==0)g.add(T),p.add(R);else if(g.Fc()==T){$=p.Fc();var F=this.g.U($);N=this.g.U(R),this.g.Bc($,N),this.g.Cc(N,$),this.g.Bc(R,F),this.g.Cc(F,R),R=[!1],F=this.g.nG(this.X,F,this.g.Xa(O),R),this.g.Ra(C,d,-1),R[0]&&this.g.Jf(O,N),C=this.g.Ja(O),C-=N=this.g.Ja(F),this.g.Vj(O,C),o.set(T,o.get(T)-1),o.get(T)==1&&(o.set(T,0),g.If(),p.If()),C=N=$}else p.add(C),g.add(T)}}return this.g.CB(l),this.g.Td(d),!0},a}();u.WL=c}(V||(V={})),function(u){var A=function(){function b(){}return b.prototype.ig=function(){this.PA=this.sb=null},b.prototype.get=function(){return this.PA},b.prototype.set=function(c){if(this.PA=c,c!=null)throw c.getType()==322&&(this.sb=c),u.i.Qa()},b.prototype.create=function(c){if(c!=322)throw u.i.fa("Not Implemented");this.Or()},b.prototype.Or=function(){this.sb==null&&(this.sb=new u.yb),this.PA=this.sb},b}();u.ig=A}(V||(V={})),function(u){(u=u.XL||(u.XL={}))[u.enumLineSeg=1]="enumLineSeg",u[u.enumBezierSeg=2]="enumBezierSeg",u[u.enumArcSeg=4]="enumArcSeg",u[u.enumNonlinearSegmentMask=6]="enumNonlinearSegmentMask",u[u.enumSegmentMask=7]="enumSegmentMask",u[u.enumDensified=8]="enumDensified"}(V||(V={})),function(u){var A=function(c){this.$i=c,this.qC=this.rC=1,this.sB=this.rB=this.tB=0},b=function(){function c(){this.Fq=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.Bk=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.Bf=new u.Sa,this.qa=this.Cw=0,this.mo=[],this.$s=[],this.yw=[],this.Iq=[],this.MA=[]}return c.prototype.wB=function(a){if(a!=null){for(var r=0,o=a.length;r<o;r++)this.rW(a[r]);a.length=0}},c.prototype.rW=function(a){a.$i=null,this.Iq.push(a)},c.prototype.Ow=function(a){if(this.Iq.length===0)var r=new A(a);else(r=this.Iq[this.Iq.length-1]).$i=a,--this.Iq.length;return r},c.prototype.SR=function(a,r){return a==0?this.$s[r]:this.yw[r]},c.prototype.aB=function(){this.Cw>=this.MA.length&&this.MA.push(new u.ig);var a=this.MA[this.Cw];return this.Cw++,a},c.prototype.clear=function(){this.wB(this.mo),this.wB(this.$s),this.wB(this.yw),this.Cw=0},c.prototype.Oo=function(a){this.mo.push(this.Ow(a))},c.prototype.ol=function(a){return a==0?this.$s.length:this.yw.length},c.prototype.Vp=function(a,r){return this.SR(a,r).$i},c.prototype.Ea=function(a,r){if(this.mo.length!=2)throw u.i.Qa();this.qa=a;var o=u.lc.ox(.01*a),l=!1,d=this.mo[0],p=this.mo[1];if(r||5&d.$i.zr(p.$i,a,!0)){if(d.$i.getType()==322){var g=d.$i;if(p.$i.getType()==322){r=p.$i;var v=u.yb.Zx(g,r,null,this.Fq,this.Bk,a);if(v==0)throw u.yb.Zx(g,r,null,this.Fq,this.Bk,a),u.i.Qa();a=Array(9),u.O.$u(a,null);for(var w=0;w<v;w++){var T=this.Fq[w],$=this.Bk[w],C=d.sB,O=1;T==0?(C=d.tB,O=d.rC):T==1&&(C=d.rB,O=d.qC);var N=p.sB,R=1;$==0?(N=p.tB,R=p.rC):$==1&&(N=p.rB,R=p.qC);var F=new u.h;C==N?(C=new u.h,g.hc(T,C),T=new u.h,r.hc($,T),R/=$=O+R,u.lc.OG(C,T,R,F),u.h.yc(F,C)+u.h.yc(F,T)>o&&(l=!0)):C>N?(g.hc(T,F),T=new u.h,r.hc($,T),u.h.yc(F,T)>o&&(l=!0)):(r.hc($,F),C=new u.h,g.hc(T,C),u.h.yc(F,C)>o&&(l=!0)),a[w]=F}for(d=0,p=-1,w=0;w<=v;w++)(R=w<v?this.Fq[w]:1)!=d&&(o=this.aB(),g.ah(d,R,o),p!=-1&&o.get().Dc(a[p]),w!=v&&o.get().Qc(a[w]),d=R,this.$s.push(this.Ow(o.get()))),p=w;for(g=[0,0,0,0,0,0,0,0,0],w=0;w<v;w++)g[w]=w;for(1<v&&this.Bk[0]>this.Bk[1]&&(R=this.Bk[0],this.Bk[0]=this.Bk[1],this.Bk[1]=R,w=g[0],g[0]=g[1],g[1]=w),d=0,p=-1,w=0;w<=v;w++)(R=w<v?this.Bk[w]:1)!=d&&(o=this.aB(),r.ah(d,R,o),p!=-1&&(d=g[p],o.get().Dc(a[d])),w!=v&&(d=g[w],o.get().Qc(a[d])),d=R,this.yw.push(this.Ow(o.get()))),p=w;return l}}throw u.i.Qa()}return!1},c.prototype.Kz=function(a,r,o){if(r.copyTo(this.Bf),this.mo.length!=1)throw u.i.Qa();this.qa=a;var l=this.mo[0];if(o||l.$i.ru(r.D(),a,!0)){if(l.$i.getType()!=322)throw u.i.Qa();var d=(a=l.$i).fe(r.D(),!1);this.Fq[0]=d;var p=l.sB;for(o=1,d==0?(p=l.tB,o=l.rC):d==1&&(p=l.rB,o=l.qC),l=new u.h,p==0?(p=new u.h,a.hc(d,p),r=r.D(),u.lc.OG(p,r,1/(o+1),l)):0<p?(l=new u.h,a.hc(d,l)):l=r.D(),o=0,d=-1,p=0;1>=p;p++){if((r=1>p?this.Fq[p]:1)!=o){var g=this.aB();a.ah(o,r,g),d!=-1&&g.get().Dc(l),p!=1&&g.get().Qc(l),o=r,this.$s.push(this.Ow(g.get()))}d=p}this.Bf.Cb(l)}},c}();u.TC=b}(V||(V={})),function(u){var A=function(){function b(c){this.Ds=this.rk=this.sb=null,this.ag=0,this.zm=!1,this.zf=-1,this.Cl=this.Jd=0,this.gb=-1,this.ib=c,this.ag=this.Wx(this.Cl),this.zm=!1,this.rk=null,this.Ds=new u.h}return b.prototype.BW=function(c){if(this.ib!=c.ib)throw u.i.Hb();this.zf=c.zf,this.Jd=c.Jd,this.gb=c.gb,this.Cl=c.Cl,this.ag=c.ag,this.zm=c.zm,this.rk=null},b.prototype.ha=function(){if(this.zf!=this.Jd&&this.BD(),this.zm)this.Jd=(this.Jd+1)%this.ag;else{if(this.Jd==this.ag)throw u.i.ce();this.Jd++}return this.rk},b.prototype.li=function(){if(this.zm)this.Jd=(this.ag+this.Jd-1)%this.ag;else{if(this.Jd==0)throw u.i.ce();this.Jd--}return this.Jd!=this.zf&&this.BD(),this.rk},b.prototype.DW=function(){this.zf=-1,this.Jd=0},b.prototype.EW=function(){this.Jd=this.ag,this.zf=-1},b.prototype.Vb=function(c,a){if(a===void 0&&(a=-1),0<=this.gb&&this.gb<this.ib.da()){var r=this.IM();if(c>=r&&c<this.ib.Vc(this.gb))return this.zf=-1,void(this.Jd=c-r)}a=0<=a&&a<this.ib.da()&&c>=this.ib.Ba(a)&&c<this.ib.Vc(a)?a:this.ib.sz(c),this.Cl=a+1,this.gb=a,this.zf=-1,this.Jd=c-this.ib.Ba(a),this.ag=this.Wx(a),this.ib.Ba(this.gb),this.ib.dc(this.gb)},b.prototype.$a=function(){return this.gb=this.Cl,!(this.gb>=this.ib.da())&&(this.zf=-1,this.Jd=0,this.ag=this.Wx(this.gb),this.ib.Ba(this.gb),this.ib.dc(this.gb),this.Cl++,!0)},b.prototype.Zi=function(){this.ag=this.Jd=this.zf=-1,this.Cl=0,this.gb=-1},b.prototype.Wx=function(c){if(this.ib.Ac())return 0;var a=1;return this.ib.dc(c)&&(a=0),this.ib.Ja(c)-a},b.prototype.On=function(){return this.zf==this.ag-1&&this.ib.dc(this.gb)},b.prototype.JB=function(){this.zm=!0},b.prototype.wb=function(){return this.ib.nb.o[this.gb]+this.zf},b.prototype.IM=function(){return this.ib.Ba(this.gb)},b.prototype.ik=function(){return this.On()?this.ib.Ba(this.gb):this.wb()+1},b.prototype.vm=function(){return this.zf==0},b.prototype.Qn=function(){return this.zf==this.ag-1},b.prototype.Ha=function(){return this.Jd<this.ag},b.prototype.Ez=function(){return 0<this.Jd},b.prototype.Of=function(){var c=new b(this.ib);return c.zf=this.zf,c.Jd=this.Jd,c.ag=this.ag,c.gb=this.gb,c.Cl=this.Cl,c.ib=this.ib,c.zm=this.zm,c},b.prototype.BD=function(){if(0>this.Jd||this.Jd>=this.ag)throw u.i.ce();this.zf=this.Jd;var c=this.wb();this.ib.mc();var a=this.ib.Ve,r=1;switch(a!=null&&(r=7&a.read(c)),a=this.ib.description,r){case 1:this.sb==null&&(this.sb=new u.yb),this.rk=this.sb;break;case 2:throw u.i.fa("internal error");default:throw u.i.Qa()}this.rk.Nf(a),r=this.ik(),this.ib.Gc(c,this.Ds),this.rk.Dc(this.Ds),this.ib.Gc(r,this.Ds),this.rk.Qc(this.Ds);for(var o=1,l=a.Aa;o<l;o++)for(var d=a.kd(o),p=u.ra.Va(d),g=0;g<p;g++){var v=this.ib.Uc(d,c,g);this.rk.YB(d,g,v),v=this.ib.Uc(d,r,g),this.rk.OB(d,g,v)}},b.prototype.$S=function(){return this.gb==this.ib.da()-1},b.prototype.Pn=function(){var c=this.ib.VR();return c!=null&&(7&c.read(this.zf))!=1},b}();u.YL=A}(V||(V={})),function(u){var A=function(){function b(c){c instanceof u.aa?(this.xH=c,this.ya=-1,this.Ei=1):(this.vT=c.slice(0),this.ya=-1,this.Ei=c.length)}return b.prototype.La=function(){return this.ya},b.prototype.next=function(){return this.ya<this.Ei-1?(this.ya++,this.xH!=null?this.xH:this.vT[this.ya]):null},b.prototype.qe=function(){},b}();u.Zc=A}(V||(V={})),function(u){var A=function(){this.next=null},b=function(){function c(){this.Tq=this.Kw=this.Lw=0,this.kF=!1,this.gK=0,this.gn=this.Kf=this.Wl=this.Jh=null,this.Ol=0,this.vy=null,this.pl=this.oi=-1}return c.prototype.AX=function(a,r,o){this.oi=a,this.pl=r,this.Jh=this.Wl=null,this.Tq=0,this.vy=o,this.gn==null&&(this.gn=u.O.lg(384,0)),this.nK()},c.prototype.R=function(){return this.oi},c.prototype.ca=function(){return this.pl},c.prototype.flush=function(){0<this.Ol&&(this.vy.gF(this.gn,this.Ol),this.Ol=0)},c.prototype.nK=function(){if(0<this.Tq){for(var a=0;a<this.pl;a++){for(var r=this.Wl[a];r!=null;){var o=r;r=r.next,o.next=null}this.Wl[a]=null}this.Jh=null}this.Lw=this.pl,this.Kw=-1,this.Tq=0},c.prototype.iJ=function(a){for(this.kF=a==c.Cx,a=this.Lw;a<=this.Kw;a++)this.sN(),this.lN(a),this.ZP();this.nK()},c.prototype.jy=function(a,r,o,l){if(r!=l){var d=1;if(r>l&&(d=a,a=o,o=d,d=r,r=l,l=d,d=-1),!(0>l||r>=this.pl)){0>a&&0>o?o=a=-1:a>=this.oi&&o>=this.oi&&(o=a=this.oi);var p=(o-a)/(l-r);l>this.pl&&(o=p*((l=this.pl)-r)+a),0>r&&(a=p*(0-r)+a,r=0);var g=Math.max(this.oi+1,8388607);-8388607>a?(r=(0-a)/p+r,a=0):a>g&&(r=(this.oi-a)/p+r,a=this.oi),-8388607>o?l=(0-a)/p+r:o>g&&(l=(this.oi-a)/p+r),(r=u.O.truncate(r))!=(l=u.O.truncate(l))&&((o=new A).x=u.O.truncate(4294967296*a),o.y=r,o.H=l,o.WP=u.O.truncate(4294967296*p),o.dir=d,this.Wl==null&&(this.Wl=u.O.lg(this.pl,null)),o.next=this.Wl[o.y],this.Wl[o.y]=o,o.y<this.Lw&&(this.Lw=o.y),o.H>this.Kw&&(this.Kw=o.H),this.Tq++)}}},c.prototype.sN=function(){if(this.Jh!=null){for(var a=!1,r=null,o=this.Jh;o!=null;)if(o.y++,o.y==o.H){var l=o;o=o.next,r!=null?r.next=o:this.Jh=o,l.next=null}else o.x+=o.WP,r!=null&&r.x>o.x&&(a=!0),r=o,o=o.next;a&&(this.Jh=this.fK(this.Jh))}},c.prototype.lN=function(a){if(!(a>=this.pl)){var r=this.Wl[a];if(r!=null){this.Wl[a]=null,r=this.fK(r),this.Tq-=this.gK,a=this.Jh;for(var o=!0,l=r,d=null;a!=null&&l!=null;)a.x>l.x?(o&&(this.Jh=l),o=l.next,l.next=a,d!=null&&(d.next=l),d=l,l=o):(o=a.next,a.next=l,d!=null&&(d.next=a),d=a,a=o),o=!1;this.Jh==null&&(this.Jh=r)}}},c.eK=function(a,r){return 0>a?0:a>r?r:a},c.prototype.ZP=function(){if(this.Jh!=null){for(var a=0,r=this.Jh,o=u.O.truncate(u.O.XG(r.x)),l=r.next;l!=null;l=l.next)if(a=this.kF?1^a:a+l.dir,l.x>r.x){var d=u.O.truncate(u.O.XG(l.x));a!=0&&(r=c.eK(o,this.oi),(o=c.eK(d,this.oi))>r&&r<this.oi&&(this.gn[this.Ol++]=r,this.gn[this.Ol++]=o,this.gn[this.Ol++]=l.y,this.Ol==this.gn.length&&(this.vy.gF(this.gn,this.Ol),this.Ol=0))),r=l,o=d}}},c.prototype.fK=function(a){for(var r=0,o=a;o!=null;o=o.next)r++;if(this.gK=r,r==1)return a;this.Kf==null?this.Kf=u.O.lg(Math.max(r,16),null):this.Kf.length<r&&(this.Kf=u.O.lg(Math.max(r,2*this.Kf.length),null));var l=0;for(o=a;o!=null;o=o.next)this.Kf[l++]=o;for(r==2?this.Kf[0].x>this.Kf[1].x&&(a=this.Kf[0],this.Kf[0]=this.Kf[1],this.Kf[1]=a):c.AN(this.Kf,r,function(d,p){return d==p?0:d.x<p.x?-1:d.x>p.x?1:0}),a=this.Kf[0],this.Kf[0]=null,o=a,l=1;l<r;l++)o.next=this.Kf[l],o=this.Kf[l],this.Kf[l]=null;return o.next=null,a},c.AN=function(a,r,o){if(r==a.length)a.sort(o);else{var l=a.slice(0,0),d=a.slice(r);r=a.slice(0,r).sort(o),a.length=0,a.push.apply(a,l.concat(r).concat(d))}},c.Cx=0,c}();u.Px=b}(V||(V={})),function(u){var A=function(){function b(){}return b.prototype.ui=function(c,a){var r=this.g.Pa(c,this.Pq);if(this.Dl==r&&(this.Dl=this.oe.lb(this.Dl)),this.ho==r&&(this.ho=this.oe.lb(this.ho)),this.oe.jd(this.RA,r),this.bk(c),a&&(a=this.g.bd(c))!=-1&&this.g.Xa(a)==c){var o=this.g.U(c);if(o!=c){if((r=this.g.bd(o))==a)return void this.g.Jf(a,o);if((o=this.g.Ma(c))!=c&&(r=this.g.bd(o))==a)return void this.g.Jf(a,o)}this.g.Jf(a,-1),this.g.Wg(a,-1)}},b.prototype.pD=function(){for(var c=!1,a=new u.h;;){this.Wh==null?(this.Wh=new u.ia(0),this.zs=new u.ia(0),this.xe=new u.ia(0)):(this.Wh.clear(!1),this.zs.clear(!1),this.xe.clear(!1));for(var r=this.ho,o=0,l=!0;r!=this.Dl;){var d=this.oe.getData(r),p=new u.h;this.g.Gc(d,p),l&&(this.g.Gc(d,a),l=!1),p=this.g.Ma(d);var g=this.g.U(d);this.g.Pa(p,this.zg)!=-559038737&&(this.Wh.add(p),this.g.Ra(p,this.zg,-559038737),this.zs.add(d),this.xe.add(o++)),this.g.Pa(g,this.zg)!=-559038737&&(this.Wh.add(g),this.g.Ra(g,this.zg,-559038737),this.zs.add(d),this.xe.add(o++)),r=this.oe.lb(r)}if(2>this.Wh.size)break;var v=this;for(this.xe.Vd(0,this.xe.size,function(w,T){return v.pM(w,T)}),r=0,o=this.xe.size;r<o;r++)l=this.xe.get(r),l=this.Wh.get(l),this.g.Ra(l,this.zg,r),p=new u.h,this.g.Gc(l,p);for(p=this.TM(a),r=0,o=this.xe.size;r<o;r++)(l=this.xe.get(r))!=-1&&(l=this.Wh.get(l),this.g.Ra(l,this.zg,-1));if(!p)break;c=!0}return c},b.prototype.TM=function(c){for(var a=!1,r=!0;r;){r=!1;var o=0;this.xe.get(o)==-1&&(o=this.cm(o));for(var l=this.cm(o),d=0,p=this.xe.size;d<p&&o!=-1&&l!=-1&&o!=l;d++){var g=this.xe.get(o);l=this.xe.get(l),g=this.Wh.get(g),l=this.Wh.get(l);var v=this.g.U(g);this.g.Dv(v,c)||(v=this.g.Ma(g));var w=this.g.U(l);this.g.Dv(w,c)||(w=this.g.Ma(l));var T=this.pu(v,g),$=this.pu(w,l),C=T?this.g.Ma(v):this.g.U(v),O=$?this.g.Ma(w):this.g.U(w),N=!1;(this.sp(v)||this.sp(w)||this.sp(g)||this.sp(l)||this.sp(C)||this.sp(O))&&(N=!0),!N&&this.g.fq(g,l)&&(N=!0,this.tD(T,$,v,g,w,l)),!N&&this.g.fq(C,O)&&(N=!0,this.tD(!T,!$,v,C,w,O)),N&&(a=!0),r=r||N,o=this.cm(o),l=this.cm(o)}}if(!a)for(o=0,this.xe.get(o)==-1&&(o=this.cm(o)),l=this.cm(o),d=0,p=this.xe.size;d<p&&o!=-1&&l!=-1&&o!=l;d++)g=this.xe.get(o),l=this.xe.get(l),g=this.Wh.get(g),l=this.Wh.get(l),v=this.g.U(g),this.g.Dv(v,c)||(v=this.g.Ma(g)),w=this.g.U(l),this.g.Dv(w,c)||(w=this.g.Ma(l)),T=this.pu(v,g),$=this.pu(w,l),C=T?this.g.Ma(v):this.g.U(v),O=$?this.g.Ma(w):this.g.U(w),this.DM(T,$,g,v,C,l,w,O)&&(a=!0),o=this.cm(o),l=this.cm(o);return a},b.prototype.XM=function(){this.g.ic(this.X)==1736&&this.g.In(this.X)==1&&new u.Fg().MU(this.fw,this.g,this.X,this.nd);var c=!1,a=!0;this.zg=this.Pq=-1;var r=this.g.I(this.X),o=new u.ia(0);o.Jb(r);for(var l=this.g.Ob(this.X);l!=-1;l=this.g.Rb(l))for(var d=this.g.Xa(l),p=0,g=this.g.Ja(l);p<g;p++)o.add(d),d=this.g.U(d);var v=this.g.td.o,w=this.g.td.stride;this.g.vb.mc();var T=this.g.vb.za[0].o;for(o.Vd(0,r,function(C,O){var N=v[w*C],R=v[w*O],F=T[2*N];N=T[2*N+1];var G=T[2*R];return(F=N<(R=T[2*R+1])?-1:N>R?1:F<G?-1:F>G?1:0)==0&&(F=(C=v[w*C+3])<(O=v[w*O+3])?-1:C==O?0:1),F}),this.Pq=this.g.Gd(),this.oe=new u.jp,this.RA=this.oe.Ph(0),this.oe.fn(r),l=0;l<r;l++)d=o.get(l),p=this.oe.addElement(this.RA,d),this.g.Ra(d,this.Pq,p);for(this.zg=this.g.Gd(),this.Dl=-1,this.cD()&&(c=!0);a;){a=!1,r=0,o=!1;do{o=!1,this.ho=-1,g=0,l=new u.h,p=new u.h;for(var $=this.oe.rc(this.RA);$!=-1;)d=this.oe.getData($),this.ho!=-1?(this.g.Gc(d,p),l.qb(p)?g++:(l.L(p),this.Dl=$,0<g&&(d=this.pD())&&(o=!0,this.Dl!=-1&&(d=this.oe.getData(this.Dl),this.g.Gc(d,l))),this.ho=$=this.Dl,g=0)):(this.ho=$,this.g.Gc(this.oe.getData($),l),g=0),$!=-1&&($=this.oe.lb($));if(this.Dl=-1,0<g&&(d=this.pD())&&(o=!0),10<r++)throw u.i.Qa();o&&this.GM(),this.cD()&&(o=!0),a=a||o&&!1,c=c||o}while(o)}return this.g.Td(this.Pq),this.g.Td(this.zg),u.WL.V(this.g,this.X,this.oe,this.fw)||c},b.prototype.pu=function(c,a){return this.g.U(a)!=c},b.prototype.DM=function(c,a,r,o,l,d,p,g){if(o==p)return this.bk(r),this.bk(d),!1;var v=this.g.Pa(r,this.zg),w=this.g.Pa(l,this.zg),T=this.g.Pa(d,this.zg),$=this.g.Pa(g,this.zg),C=[0,0,0,0];for((r=[0,0,0,0,0,0,0,0])[0]=0,C[0]=v,r[1]=0,C[1]=w,r[2]=1,C[2]=T,r[3]=1,C[3]=$,v=1;4>v;v++){for(w=C[v],T=r[v],$=v-1;0<=$&&C[$]>w;)C[$+1]=C[$],r[$+1]=r[$],$--;C[$+1]=w,r[$+1]=T}return C=0,r[0]!=0&&(C|=1),r[1]!=0&&(C|=2),r[2]!=0&&(C|=4),r[3]!=0&&(C|=8),(C==5||C==10)&&(c==a?c?(this.g.Bc(g,o),this.g.Cc(o,g),this.g.Bc(l,p),this.g.Cc(p,l)):(this.g.Cc(g,o),this.g.Bc(o,g),this.g.Cc(l,p),this.g.Bc(p,l)):c?(this.g.Cc(o,d),this.g.Bc(d,o),this.g.Cc(p,l),this.g.Bc(l,p)):(this.g.Bc(o,d),this.g.Cc(d,o),this.g.Bc(p,l),this.g.Cc(l,p)),!0)},b.prototype.tD=function(c,a,r,o,l,d){this.MY?this.VM():this.UM(c,a,r,o,l,d)},b.prototype.VM=function(){throw u.i.fa("not implemented.")},b.prototype.UM=function(c,a,r,o,l,d){if(c!=a)c?(this.g.Bc(r,l),this.g.Cc(l,r),this.g.Bc(d,o),this.g.Cc(o,d),this.vn(l,r),this.ui(l,!0),this.g.mi(l,!0),this.bk(r),this.vn(d,o),this.ui(d,!0),this.g.mi(d,!1)):(this.g.Bc(l,r),this.g.Cc(r,l),this.g.Bc(o,d),this.g.Cc(d,o),this.vn(l,r),this.ui(l,!0),this.g.mi(l,!1),this.bk(r),this.vn(d,o),this.ui(d,!0),this.g.mi(d,!0)),this.bk(o);else{var p=c?r:o,g=a?l:d;for(c=c?o:r,a=a?d:l,l=!1,this.g.Bc(p,g),this.g.Bc(g,p),this.g.Cc(c,a),this.g.Cc(a,c),d=a;d!=g;)r=this.g.Ma(d),o=this.g.U(d),this.g.Cc(d,o),this.g.Bc(d,r),l=l||d==p,d=o;l||(r=this.g.Ma(g),o=this.g.U(g),this.g.Cc(g,o),this.g.Bc(g,r)),this.vn(g,p),this.ui(g,!0),this.g.mi(g,!1),this.bk(p),this.vn(a,c),this.ui(a,!0),this.g.mi(a,!1),this.bk(c)}},b.prototype.cD=function(){for(var c=!1,a=this.g.Ob(this.X);a!=-1;){for(var r=this.g.Xa(a),o=0,l=this.g.Ja(a);o<l&&1<l;){var d=this.g.Ma(r),p=this.g.U(r);this.g.fq(d,p)?(c=!0,this.ui(r,!1),this.g.pd(r,!0),this.ui(p,!1),this.g.pd(p,!0),r=d,o=0,l=this.g.Ja(a)):(r=p,o++)}if(2>this.g.Ja(a)){for(c=this.g.Xa(a),o=0,l=this.g.Ja(a);o<l;o++)this.ui(c,!1),c=this.g.U(c);a=this.g.Zq(a),c=!0}else a=this.g.Rb(a)}return c},b.prototype.sp=function(c){for(var a=!1;;){var r=this.g.U(c),o=this.g.Ma(c);if(r==c)return this.ui(c,!0),this.g.mi(c,!1),!0;if(!this.g.fq(r,o)||(a=!0,this.bk(o),this.bk(r),this.ui(c,!0),this.g.mi(c,!1),this.vn(r,o),this.ui(r,!0),this.g.mi(r,!0),r==o))break;c=o}return a},b.prototype.GM=function(){for(var c=0,a=this.oe.rc(this.oe.je);a!=-1;a=this.oe.lb(a)){var r=this.oe.getData(a);this.g.aj(r,-1)}for(var o=0,l=this.g.Ob(this.X);l!=-1;)if((a=this.g.Xa(l))==-1||this.g.bd(a)!=-1)r=l,l=this.g.Rb(l),this.g.$q(r);else{this.g.aj(a,l);var d=1;for(r=this.g.U(a);r!=a;r=this.g.U(r))this.g.aj(r,l),d++;this.g.cp(l,!1),this.g.Vj(l,d),this.g.Wg(l,this.g.Ma(a)),o+=d,c++,l=this.g.Rb(l)}for(a=this.oe.rc(this.oe.je);a!=-1;a=this.oe.lb(a))r=this.oe.getData(a),this.g.bd(r)==-1&&(l=this.g.nG(this.X,r,r,null),o+=this.g.Ja(l),c++);for(this.g.Rl(this.X,c),this.g.Tj(this.X,o),c=0,o=this.g.ld;o!=-1;o=this.g.ue(o))c+=this.g.I(o);this.g.bC(c)},b.prototype.cm=function(c){for(var a=0,r=this.xe.size-1;a<r;a++)if(c=(c+1)%this.xe.size,this.xe.get(c)!=-1)return c;return-1},b.prototype.vn=function(c,a){var r=this.g.Pa(a,this.Pq),o=this.g.Pa(a,this.zg);this.g.lC(c,a),this.g.Ra(a,this.Pq,r),this.g.Ra(a,this.zg,o)},b.prototype.bk=function(c){var a=this.g.Pa(c,this.zg);a!=-1&&(this.xe.set(a,-1),this.g.Ra(c,this.zg,-1))},b.V=function(c,a,r,o,l){var d=new b;return d.g=c,d.X=a,d.xA=r,d.fw=o,d.nd=l,d.XM()},b.prototype.pM=function(c,a){var r=this.Wh.get(c),o=new u.h;this.g.Gc(r,o),r=new u.h;var l=this.Wh.get(a);return this.g.Gc(l,r),o.qb(r)?0:(l=this.zs.get(c),c=new u.h,this.g.Gc(l,c),l=this.zs.get(a),a=new u.h,this.g.Gc(l,a),(l=new u.h).uc(o,c),(o=new u.h).uc(r,a),u.h.nu(l,o))},b}();u.rn=A}(V||(V={})),function(u){var A;(A=u.$L||(u.$L={}))[A.Local=0]="Local",A[A.Geographic=1]="Geographic",A[A.Projected=2]="Projected",A[A.Image=3]="Image",A[A.Unknown=4]="Unknown",function(c){c[c.Integer32=0]="Integer32",c[c.Integer64=1]="Integer64",c[c.FloatingPoint=2]="FloatingPoint"}(u.TL||(u.TL={}));var b=function(){function c(){this.mA=null,this.pp="",this.su=null,this.dg=0,this.ZH=this.Ho=-1,this.wh=null}return c.prototype.Ec=function(){return this.dg},c.prototype.VF=function(){return 1},c.prototype.VW=function(a){this.mA=a},c.prototype.Xd=function(){if(this.mA!==null)return this.mA;var a=.001;return this.dg!=0?a=u.wr.CQ(this.dg):this.wh!=null&&(a=u.XC.DQ(this.wh)),a},c.prototype.Bz=function(){return this.wh},c.prototype.Hd=function(){return this.dg!=0?u.Tc.Zg(u.wr.Sy(this.dg)):this.wh!=null?u.XC.EQ(this.wh):void 0},c.Sb=function(a){if(a.dg!=0){if(u.wr.ZS(a.dg)===!0)return 1;if(u.wr.aT(a.dg)===!0)return 2}return 4},c.prototype.$r=function(){var a=this.Ec();return this.Ho!=-1?this.Ho:(this.Ho=u.wr.FK(a),this.Ho!=-1?this.Ho:a)},c.create=function(a){if(0>=a)throw u.i.N("Invalid or unsupported wkid: "+a);var r=new c;return r.dg=a,r},c.qP=function(a){if(a==null||a.length==0)throw u.i.N("Cannot create SpatialReference from null or empty text.");var r=new c;return r.wh=a,r},c.prototype.Nb=function(a){return this==a||a!=null&&this.constructor==a.constructor&&this.dg==a.dg&&(this.dg!=0||this.wh===a.wh)},c.prototype.toString=function(){return"[ tol: "+this.Kn()+"; wkid: "+this.Ec()+"; wkt: "+this.Bz()+"]"},c.prototype.cc=function(){if(this.pp!=="")return this.pp;var a=this.toString();if(Array.prototype.reduce)return this.pp="S"+a.split("").reduce(function(l,d){return 0|(l=(l<<5)-l+d.charCodeAt(0))},0);var r=0;if(a.length===0)return"";for(var o=0;o<a.length;o++)r=(r<<5)-r+a.charCodeAt(o),r&=r;return this.pp="S"+r},c.prototype.Kn=function(){return this.Xd(0)},c.prototype.fh=function(){return this.su!==null?this.su:this.su=u.gu.yP(this)},c.ZN=2147483645,c.$N=9007199254740990,c}();u.Eg=b}(V||(V={})),function(u){var A=function(b){function c(){var a=b!==null&&b.apply(this,arguments)||this;return a.Ji=null,a.ST=null,a.Hq=new u.ZL,a.Eo=null,a.jw=null,a}return bt(c,b),c.yP=function(a){var r=new c;if(r.dg=a.dg,r.Ho=a.Ho,r.ZH=a.ZH,r.wh=a.wh,r.wh!==""&&r.wh!==null){a=c.kM(r.wh);var o=c.iM(r.wh);r.Hq.Xx(a,o,u.hu.Integer64),r.by(a),r.gy(o),r.dg=a.$r()}else a=c.jM(r.dg),r.by(a),r.gy(null),r.Hq.Xx(a,null,u.hu.Integer64);return r},c.prototype.Xd=function(a){return this.Hq.Kn(a)},c.iM=function(a){if(0>=a.length)throw u.i.N();var r=null;try{r=u.NC.fromString(a)}catch{r=null}return r==null?null:c.bD(r,!0)},c.prototype.by=function(a){this.Kd=a,this.Eo=this.Kd.Hd()},c.prototype.gy=function(a){this.KH=a,this.ST=this.KH!=null?this.KH.Eo:null},c.prototype.Wc=function(){return this.Sb()!=0&&this.Sb()!=3&&this.Kd.Wc()},c.prototype.IG=function(){return this.Sb()!=0&&(this.Sb()==3?this.Ji.fk().Wc():this.Kd.Wc())},c.prototype.eh=function(){return this.Kd!=null?this.Kd.Ue:null},c.prototype.pm=function(){return this.Kd.pm()},c.prototype.bf=function(){return this.Kd.bf()},c.prototype.hh=function(){return this.Kd!=null?this.Kd.sw:NaN},c.prototype.Up=function(){return this.Kd.Up()},c.prototype.Wr=function(){return this.Kd.Wr()},c.prototype.kk=function(){return this.Kd.kk()},c.prototype.kS=function(a){return u.OC.Py(this.Kd,a.Kd)},c.prototype.ml=function(){return this.Kd.ml()},c.prototype.Vr=function(){return this.Kd.Vr()},c.prototype.zi=function(){return this.Sb()==3?this.Ji.fk().zi():this.Kd.zi()},c.prototype.gh=function(){if(!this.Wc())throw u.i.N("!isPannable()");var a=new u.l;return this.Kd.gh(a),a},c.prototype.Oe=function(){if(!this.Wc())throw u.i.N("!isPannable()");return this.Kd.so},c.prototype.HR=function(){if(!this.Wc())throw u.i.N("!isPannable()");var a=new u.l;return this.Kd.GR(a),a},c.prototype.pv=function(){if(!this.Wc())throw u.i.N("!isPannable()");return this.Kd.pv()},c.prototype.ov=function(){if(!this.Wc())throw u.i.N("!isPannable()");return this.Kd.ov()},c.prototype.Xr=function(){return this.Ji!=null?this.Ji.fk().Xr():this.Kd.Xr()},c.prototype.PQ=function(){return this.Kd.hv()},c.prototype.Qp=function(){return this.Eo.getUnitFactor()},c.prototype.vz=function(a){return this.Hq.vz(a)},c.prototype.sc=function(){var a=this.Sb();if(a==1)return this;if(a==3)return this.Ji.fk().sc();if(a==0||a===4)throw u.i.fa("invalid call");if(this.jw!==null)return this.jw;if((a=this.eh().getGeogcs())==null)throw u.i.Qa();return this.jw=c.bF(a,this.Hq.VF())},c.bF=function(a,r){if(a==null)throw u.i.N("null pointer.");var o=new c;return a=c.mu(a,!0),o.Hq.Xx(a,null,r),o.by(a),o.gy(null),o.dg=a.$r(),o},c.prototype.Sb=function(){var a=this.eh();if(a!=null)switch(a.getType()){case u.Sc.PE_TYPE_GEOGCS:return 1;case u.Sc.PE_TYPE_PROJCS:return 2}return 4},c.prototype.hv=function(){return this.Kd.hv()},c.mu=function(a,r){var o=a.getCode();if(0>=o&&0<(o=u.pf.getCode(a))){if((a=u.pf.coordsys(o))==null)throw u.i.N("Text to wkid mapping had failed: "+o);return c.mu(a,r)}if(r&&0<o&&(r=c.qx[o]))return r;r=u.zb.xv(a,o,!1);var l=c.lK[r];return l||(a=0>=o?a:u.pf.coordsys(o),a=new u.OC(a),c.lK[r]=a,0<o&&(c.qx[o]=a),a)},c.jM=function(a){if(0>=a)throw u.i.N("Invalid or unsupported wkid: "+a);var r=c.qx[a];if(r!=null)return r;if((r=u.pf.coordsys(a))==null)throw u.i.N("Invalid or unsupported wkid: "+a);return(r=c.mu(r,!1)).$r()!=a&&(c.qx[a]=r),r},c.kM=function(a){if(a==null||a===void 0||a.length==0)throw u.i.N("Cannot create SpatialReference from null or empty text.");var r=null;try{r=u.pf.fromString(u.Sc.PE_TYPE_COORDSYS,a)}catch(o){throw u.i.N("Cannot create SpatialReference from text. "+o.message)}if(r===null)throw u.i.N("Cannot create SpatialReference from text. ");return c.mu(r,!0)},c.bD=function(a,r){var o,l=a.getCode();if(0>=l&&0<(l=u.pf.getCode(a))){if((l=u.pf.vertcs(l))===null)throw u.i.N();return c.bD(l,r)}if(r&&0<l&&(r=c.kK[l])||(a=u.zb.xv(a,l,!1),r=c.mK[a]))return r;if(0>=l||(o=u.pf.vertcs(l)),o===null)throw u.i.N();return o=new u.PL(o),c.mK[a]=o,0<l&&(c.kK[l]=o),o},c.sI=function(a,r){if(r===null||r.B())return null;var o=new u.l;if(r!==null&&a.Sb()!=1){var l=a.sc(),d=l.eh();a=u.vr.Nr(a,l,null,null),(r=u.Hx.local().V(r,a,null)).A(o)}else d=a.eh(),r.A(o);return r=d.getPrimem().getLongitude(),d=d.getUnit().getUnitFactor(),new u.LC(o.v,o.G,o.C,o.H,r,d)},c.lD=function(a){var r={name:"",steps:[],_pt:null,_entry:null},o=0;for(a=a.getEntries();o<a.length;o++){var l=a[o],d={LY:!1,ZY:"",YY:-1,geogtran:null};l.getDirection()===0?d.isInverse=!1:d.isInverse=!0;var p=l.getGeogtran().getCode();-1<p?d.wkid=p:d.wkt=l.getGeogtran().toString(),r.steps.push(d)}return r},c.XR=function(a,r,o,l){return o===void 0&&(o=null),o=c.sI(l,o),a=u.lp.getGTlist(a.eh(),r.eh(),2,u.lp.PE_GTLIST_OPTS_COMMON,o,1),r=null,a&&0<a.length&&(r=this.lD(a[0]),u.Mx.destroy(a)),o!==null&&o.destroy(),r},c.YR=function(a,r,o,l){var d;if(o===void 0&&(o=null),l===void 0&&(l=null),d===void 0&&(d=30),o=c.sI(l,o),a=u.lp.getGTlist(a.eh(),r.eh(),2,u.lp.PE_GTLIST_OPTS_COMMON,o,d),r=[],a&&0<a.length){for(d=0;d<a.length;d++)r.push(this.lD(a[d]));u.Mx.destroy(a)}return o!==null&&o.destroy(),r},c.qx={},c.lK={},c.kK={},c.mK={},c}(u.Eg);u.gu=A}(V||(V={})),function(u){var A,b;(b=A=u.hu||(u.hu={}))[b.Integer32=0]="Integer32",b[b.Integer64=1]="Integer64",b[b.FloatingPoint=2]="FloatingPoint";var c=function(){function a(){this.qp()}return a.prototype.assign=function(r){this.Fm=r.Fm,this.Gm=r.Gm,this.Pj=r.Pj,this.sA=r.sA,this.Fo=r.Fo,this.rA=r.rA,this.Ik=r.Ik,this.Mq=r.Mq,this.Lq=r.Lq,this.Rm=r.Rm},a.prototype.VF=function(){return this.Rm},a.prototype.qp=function(){this.Gm=this.Fm=0,this.Pj=1,this.sA=0,this.Fo=1,this.rA=0,this.Lq=this.Mq=this.Ik=2220446049250313e-29,this.Rm=A.FloatingPoint},a.prototype.Xx=function(r,o,l){if(this.qp(),this.Rm=l,l!=A.FloatingPoint){var d=new u.l;r.hR(d),this.Fm=d.v,this.Gm=d.G}else this.Gm=this.Fm=-17976931348623157e292;(d=r.Ue.getType())==u.Sc.PE_TYPE_GEOGCS?(d=(l==A.Integer64?1e-9:1/18e5)*r.bf(),this.Pj=1/d):d==u.Sc.PE_TYPE_PROJCS&&(d=(l==A.Integer64?1e-4:.001)*r.pm(),this.Pj=1/d),o!=null?(d=(l==A.Integer32?.001:1e-4)*o.IH,this.Fo=1/d):this.Fo=1e4,this.YM(),this.Ik=r.sw,this.Mq=o!=null?.001*o.IH:.001,this.Lq=2220446049250313e-29},a.prototype.YM=function(){if(this.Rm!=A.FloatingPoint){var r=this.Rm==A.Integer64?u.Eg.$N:u.Eg.ZN,o=r/this.Pj,l=this.Fm+o,d=u.O.truncate((l-this.Fm)*this.Pj);d>r&&(this.Pj=r/(l-this.Fm)),o=this.Gm+o,(d=u.O.truncate((o-this.Gm)*this.Pj))>r&&(this.Pj=r/(o-this.Gm))}},a.prototype.aC=function(r){switch(r){case 0:this.Ik=void 0;case 1:this.Mq=void 0;case 2:this.Lq=void 0}},a.prototype.Kn=function(r){switch(r){case 0:return this.Ik;case 1:return this.Mq;case 2:return this.Lq}return 0},a.prototype.vz=function(r){if(this.Rm==A.FloatingPoint)return 0;switch(r){case 0:return 1/this.Pj;case 1:case 2:return 1/this.Fo;default:return 0}},a.prototype.toString=function(){var r="SRPD [m_toleranceXY: "+this.Ik.toString();return(r=(r=(r=(r=(r=(r=(r=(r=(r=r+";m_falseX: "+this.Fm.toString())+";m_falseY: "+this.Gm.toString())+";m_unitsXY: "+this.Pj.toString())+";m_falseZ: "+this.sA.toString())+";m_unitsZ: "+this.Fo.toString())+";m_falseM: "+this.rA.toString())+";m_toleranceZ: "+this.Mq.toString())+";m_toleranceM: "+this.Lq.toString())+";m_precision: "+this.Rm.toString())+"] "},a}();u.ZL=c}(V||(V={})),function(u){function A(l,d){return 89.99999<d?d=89.99999:-89.99999>d&&(d=-89.99999),d*=.017453292519943,[111319.49079327169*l,31890685e-1*Math.log((1+Math.sin(d))/(1-Math.sin(d)))]}function b(l,d,p){return l=l/6378137*57.29577951308232,p?[l,57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*d/6378137)))]:[l-360*Math.floor((l+180)/360),57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*d/6378137)))]}function c(l,d,p){var g=l.Of();if(l.getType()===33)d=d(g.Lg(),g.ih()),g.Cb(d[0],d[1]);else if(l.getType()===197){var v=d(l.es(),l.gs(),p);d=d(l.ds(),l.fs(),p),g.K(v[0],v[1],d[0],d[1])}else for(v=new u.h,l=0;l<g.I();l++){g.D(l,v);var w=d(v.x,v.y,p);v.ma(w[0],w[1]),g.Cb(l,v)}return g}function a(l){return c(l,b,!0)}function r(l){return c(l,A,!0)}var o=Math.PI/180;u.UK=function(){function l(){}return l.vu=function(d){var p=Math.sqrt(.006694379990197414),g=Math.sin(d.y*o);return u.h.construct(6378137*d.x*o,3.1677196636462314e6*(g/(1-.006694379990197414*g*g)-1/(2*p)*Math.log((1-p*g)/(1+p*g))))},l.Vx=function(d,p,g,v){var w=.0033528106647474805,T=Math.sin(g);g=Math.cos(g);var $=(1-w)*Math.tan(d),C=$*(d=1/Math.sqrt(1+$*$)),O=Math.atan2($,g),N=($=d*T)*$,R=1-N,F=27233160610754688e-5*R/4040829998466145e-2,G=1+F/16384*(4096+F*(F*(320-175*F)-768)),z=F/1024*(256+F*(F*(74-47*F)-128));F=v/(635675231424518e-8*G);for(var B,q,K,ee=2*Math.PI;1e-12<Math.abs(F-ee);)K=Math.cos(2*O+F),ee=F,F=v/(635675231424518e-8*G)+z*(B=Math.sin(F))*(K+z/4*((q=Math.cos(F))*(2*K*K-1)-z/6*K*(4*B*B-3)*(4*K*K-3)));return v=C*B-d*q*g,R=w/16*R*(4+w*(4-3*R)),u.h.construct((p+(Math.atan2(B*T,d*q-C*B*g)-(1-R)*w*$*(F+R*B*(K+R*q*(2*K*K-1)))))/o,Math.atan2(C*q+d*B*g,(1-w)*Math.sqrt(N+v*v))/o)},l.MM=function(d,p,g,v){var w=.0033528106647474805,T=v-p,$=Math.atan((1-w)*Math.tan(d)),C=Math.atan((1-w)*Math.tan(g)),O=Math.sin($);$=Math.cos($);var N=Math.sin(C);C=Math.cos(C);var R=T,F=1e3;do{var G=Math.sin(R),z=Math.cos(R),B=Math.sqrt(C*G*C*G+($*N-O*C*z)*($*N-O*C*z));if(B===0)return 0;z=O*N+$*C*z;var q=Math.atan2(B,z),K=$*C*G/B,ee=1-K*K;G=z-2*O*N/ee,isNaN(G)&&(G=0);var oe=w/16*ee*(4+w*(4-3*ee)),ue=R;R=T+(1-oe)*w*K*(q+oe*B*(G+oe*z*(2*G*G-1)))}while(1e-12<Math.abs(R-ue)&&0<--F);return F===0?(O=v-p,{azimuth:Math.atan2(Math.sin(O)*Math.cos(g),Math.cos(d)*Math.sin(g)-Math.sin(d)*Math.cos(g)*Math.cos(O)),geodesicDistance:6371008771415059e-9*Math.acos(Math.sin(d)*Math.sin(g)+Math.cos(d)*Math.cos(g)*Math.cos(v-p))}):(p=(d=27233160610754688e-5*ee/4040829998466145e-2)/1024*(256+d*(d*(74-47*d)-128)),{azimuth:Math.atan2(C*Math.sin(R),$*N-O*C*Math.cos(R)),YQ:635675231424518e-8*(1+d/16384*(4096+d*(d*(320-175*d)-768)))*(q-p*B*(G+p/4*(z*(2*G*G-1)-p/6*G*(4*B*B-3)*(4*G*G-3)))),XY:Math.atan2($*Math.sin(R),$*N*Math.cos(R)-O*C)})},l.jQ=function(d){var p=d.hasAttribute(1),g=d.hasAttribute(2),v=[],w=d.da(),T=null,$=null;p&&(T=d.ub(1)),g&&($=d.ub(2));for(var C=new u.h,O=0;O<w;O++){for(var N=d.Ba(O),R=d.Ja(O),F=0,G=0,z=NaN,B=NaN,q=NaN,K=NaN,ee=d.dc(O),oe=[],ue=N;ue<N+R;ue++){d.D(ue,C),K=q=NaN;var we=[C.x,C.y];p&&(q=T.get(ue),we.push(q)),g&&(w=$.get(ue),we.push(K)),ue==N&&ee&&(F=C.x,G=C.y,z=q,B=K),oe.push(we)}!ee||F==C.x&&G==C.y&&(!p||isNaN(z)&&isNaN(q)||z==q)&&(!g||isNaN(B)&&isNaN(K)||B==K)||oe.push(oe[0].slice(0)),v.push(oe)}return v},l.Wy=function(d,p){d=l.jQ(d),637.100877141506>p&&(p=637.100877141506);for(var g,v=[],w=0;w<d.length;w++){var T,$,C=d[w];v.push(g=[]),g.push([C[0][0],C[0][1]]);var O=C[0][0]*o,N=C[0][1]*o;for(T=0;T<C.length-1;T++){var R=C[T+1][0]*o,F=C[T+1][1]*o;if(O!==R||N!==F){R=(F=l.MM(N,O,F,R)).azimuth;var G=(F=F.YQ)/p;if(1<G){for($=1;$<=G-1;$++){var z=l.Vx(N,O,R,$*p);g.push([z.x,z.y])}$=l.Vx(N,O,R,(F+Math.floor(G-1)*p)/2),g.push([$.x,$.y])}N=l.Vx(N,O,R,F),g.push([N.x,N.y]),O=N.x*o,N=N.y*o}}}return{qJ:v}},l.XQ=function(d){for(var p=[],g=0;g<d.length;g++){var v=d[g];v=l.Wy(v,1e4),p.push(v)}d=[];for(var w=0;w<p.length;w++){v=p[w];var T=0;for(g=0;g<v.qJ.length;g++){var $,C=v.qJ[g],O=l.vu(u.h.construct(C[0][0],C[0][1])),N=l.vu(u.h.construct(C[C.length-1][0],C[C.length-1][1])),R=N.x*O.y-O.x*N.y;for($=0;$<C.length-1;$++)O=l.vu(u.h.construct(C[$+1][0],C[$+1][1])),R+=(N=l.vu(u.h.construct(C[$][0],C[$][1]))).x*O.y-O.x*N.y;T+=R}T/=1,d.push(T/-2)}return d},l}(),u.cb=function(){function l(){}return l.xB=function(d,p,g,v,w,T,$){l.gD[d.cc()]=p,isNaN(g)==0&&(l.mD[d.cc()]=g),isNaN(v)==0&&(l.zD[d.cc()]=v),isNaN(w)==0&&(l.aD[d.cc()]=w),l.nD[d.cc()]=T,$!==null&&(l.oD[d.cc()]=$)},l.Ww=function(d,p,g){l.sD[d.cc()+"-"+p.cc()]=g},l.sc=function(d){if((d=l.gD[d.cc()])==null)throw u.i.Ie();return d},l.bf=function(d){if((d=l.mD[d.cc()])==null)throw u.i.Ie();return d},l.vv=function(d){if((d=l.zD[d.cc()])==null)throw u.i.Ie();return d},l.ev=function(d){if((d=l.aD[d.cc()])==null)throw u.i.Ie();return d},l.gh=function(d){if((d=l.oD[d.cc()])==null)throw u.i.Ie();return u.l.construct(d[0],d[1],d[2],d[3])},l.Wc=function(d){if((d=l.nD[d.cc()])==null)throw u.i.Ie();return d},l.zh=function(d,p,g){if(p.Nb(g))return d;var v=l.sD[p.cc()+"-"+g.cc()];if(v!==void 0)return v(d,p,g);throw u.i.Ie()},l.vt=function(){throw u.i.Ie()},l.bR=function(){throw u.i.Ie()},l.dW=function(){throw u.i.Ie()},l.ml=function(){throw u.i.Ie()},l.sW=function(){var d=u.Eg.create(102100),p=u.Eg.create(3857),g=u.Eg.create(4326);u.cb.xB(d,g,NaN,NaN,NaN,!1,null),u.cb.xB(g,g,1,.0033528106647474805,6378137,!0,[-180,-90,180,90]),u.cb.xB(p,g,NaN,NaN,NaN,!1,null),u.cb.Ww(d,g,a),u.cb.Ww(g,d,r),u.cb.Ww(p,g,a),u.cb.Ww(g,p,r)},l.gD=[],l.mD=[],l.zD=[],l.aD=[],l.nD=[],l.oD=[],l.sD=[],l}()}(V||(V={})),V.cb.sW(),function(u){var A=function(){function b(c){this.o=new Int32Array(0),this.io=-1,this.Hg=this.size=this.Bl=0,this.stride=c}return b.prototype.jd=function(c){c<this.Bl?(this.o[c*this.stride]=this.io,this.io=c):this.Bl--,this.size--},b.prototype.T=function(c,a){return this.o[c*this.stride+a]},b.prototype.S=function(c,a,r){this.o[c*this.stride+a]=r},b.prototype.Ce=function(){var c=this.io;if(c==-1){if(this.Bl==this.Hg){if(2147483647<(c=this.Hg!=0?u.O.truncate(3*(this.Hg+1)/2):1)&&(c=2147483647),c==this.Hg)throw u.i.ce();this.Dz(c)}c=this.Bl,this.Bl++}else this.io=this.o[c*this.stride];this.size++;for(var a=c*this.stride;a<c*this.stride+this.stride;a++)this.o[a]=-1;return c},b.prototype.Ll=function(c){var a=this.io;if(a==-1){if(this.Bl==this.Hg){if(2147483647<(a=this.Hg!=0?u.O.truncate(3*(this.Hg+1)/2):1)&&(a=2147483647),a==this.Hg)throw u.i.ce();this.Dz(a)}a=this.Bl,this.Bl++}else this.io=this.o[a*this.stride];this.size++;for(var r=a*this.stride,o=0;o<c.length;o++)this.o[r+o]=c[o];return a},b.prototype.mj=function(c){this.io=-1,this.size=this.Bl=0,c&&(this.o=null,this.Hg=0)},b.prototype.De=function(c){c>this.Hg&&this.Dz(c)},b.prototype.tx=function(c,a){c*=this.stride,a*=this.stride;for(var r=0;r<this.stride;r++){var o=this.o[a+r];this.o[a+r]=this.o[c+r],this.o[c+r]=o}},b.prototype.gC=function(c,a,r){var o=this.o[this.stride*a+r];this.o[this.stride*a+r]=this.o[this.stride*c+r],this.o[this.stride*c+r]=o},b.LG=function(c){return 0<=c},b.prototype.Dz=function(c){this.o==null&&(this.o=new Int32Array(0));var a=new Int32Array(this.stride*c);a.set(this.o,0),this.o=a,this.Hg=c},b}();u.$c=A}(V||(V={})),function(u){var A,b;(b=A||(A={}))[b.enumInputModeBuildGraph=0]="enumInputModeBuildGraph",b[b.enumInputModeSimplifyAlternate=4]="enumInputModeSimplifyAlternate",b[b.enumInputModeSimplifyWinding=5]="enumInputModeSimplifyWinding",b[b.enumInputModeIsSimplePolygon=7]="enumInputModeIsSimplePolygon";var c=function(){function r(o){this.Be=o,this.yh=NaN,this.eH=new u.ig,this.fH=new u.ig,this.ms=new u.Nc,this.ns=new u.Nc}return r.prototype.compare=function(o,l,d){if(o=o.ja(d),this.Be.pB(l,this.eH),this.Be.pB(o,this.fH),l=this.eH.get(),o=this.fH.get(),this.ms.K(l.sa,l.pa),this.ns.K(o.sa,o.pa),this.ms.va<this.ns.oa)return-1;if(this.ms.oa>this.ns.va)return 1;d=l.na==l.la;var p=o.na==o.la;if(d||p){if(d&&p)return 0;if(l.na==o.na&&l.sa==o.sa)return d?1:-1;if(l.la==o.la&&l.pa==o.pa)return d?-1:1}return(d=l.Pe(this.yh,this.ms.oa))==(p=o.Pe(this.yh,this.ns.oa))&&((p=.5*((d=Math.min(l.la,o.la))+this.yh))==this.yh&&(p=d),d=l.Pe(p,this.ms.oa),p=o.Pe(p,this.ns.oa)),d<p?-1:d>p?1:0},r.prototype.aK=function(o){this.yh=o},r}(),a=function(){function r(o){this.ib=o,this.WH=new u.ig,this.Bf=new u.h,this.wA=new u.Nc}return r.prototype.kX=function(o){this.Bf.L(o)},r.prototype.compare=function(o,l){return this.ib.pB(o.ja(l),this.WH),o=this.WH.get(),this.wA.K(o.sa,o.pa),this.Bf.x<this.wA.oa?-1:this.Bf.x>this.wA.va?1:(o=o.Pe(this.Bf.y,this.Bf.x),this.Bf.x<o?-1:this.Bf.x>o?1:0)},r}();A=function(){function r(){this.hH=this.Di=this.Gi=this.kA=this.Yn=this.ye=this.Kc=this.jh=this.ge=null,this.Go=this.xg=-1,this.gH=!0,this.pA=!1,this.lA=NaN,this.Ni=new u.Md,this.bO=2147483647,this.aO=u.O.truncate(-2147483648),this.cg=this.ae=this.Hl=this.Cq=this.Cm=this.Bq=this.Os=this.Re=-1,this.wa=0}return r.prototype.yy=function(o){this.lA=o},r.prototype.Ym=function(){this.ge==null&&(this.ge=new u.$c(8));var o=this.ge.Ce();return this.ge.S(o,1,0),o},r.prototype.vU=function(){this.Kc==null&&(this.Kc=new u.$c(8));var o=this.Kc.Ce();this.Kc.S(o,2,0),this.Kc.S(o,3,0);var l=this.Kc.Ce();return this.Kc.S(l,2,0),this.Kc.S(l,3,0),this.JJ(o,l),this.JJ(l,o),o},r.prototype.mI=function(){this.ye==null&&(this.ye=new u.$c(8));var o=this.ye.Ce();return this.ye.S(o,2,0),o},r.prototype.TW=function(o,l){this.ge.S(o,7,l)},r.prototype.mn=function(o,l){this.ge.S(o,2,l)},r.prototype.SW=function(o,l){this.ge.S(o,1,l)},r.prototype.lX=function(o,l){this.ge.S(o,3,l)},r.prototype.iX=function(o,l){this.ge.S(o,4,l)},r.prototype.cr=function(o,l){this.ge.S(o,5,l)},r.prototype.eR=function(o){return this.ge.T(o,5)},r.prototype.RW=function(o,l){this.ge.S(o,6,l)},r.prototype.cN=function(o,l){this.RW(l,o)},r.prototype.IJ=function(o,l){this.Kc.S(o,1,l)},r.prototype.JJ=function(o,l){this.Kc.S(o,4,l)},r.prototype.Tl=function(o,l){this.Kc.S(o,5,l)},r.prototype.Sl=function(o,l){this.Kc.S(o,6,l)},r.prototype.$W=function(o,l){this.Kc.S(o,2,l)},r.prototype.$w=function(o,l){this.Kc.S(o,3,l)},r.prototype.LF=function(o){return this.Kc.T(o,3)},r.prototype.Gt=function(o,l){this.Kc.S(o,7,l)},r.prototype.EK=function(o,l){if(this.mm(o)!=-1)for(l=l?-1:o,o=this.mm(o);o!=-1;o=this.js(o))this.g.Ra(this.tj(o),this.Cq,l)},r.prototype.yx=function(o,l){o!=-1&&(this.EK(o,l),this.EK(this.xa(o),l))},r.prototype.Dt=function(o,l){this.ye.S(o,1,l)},r.prototype.Vg=function(o,l){this.ye.S(o,2,l)},r.prototype.jn=function(o,l){this.ye.S(o,3,l),this.NW(o,this.dR(l)),this.MW(l,o)},r.prototype.MW=function(o,l){this.ye.S(o,4,l)},r.prototype.NW=function(o,l){this.ye.S(o,5,l)},r.prototype.DJ=function(o,l){this.ye.S(o,6,l)},r.prototype.BJ=function(o,l){this.ye.S(o,7,l)},r.prototype.AJ=function(o,l){this.Yn.write(o,l)},r.prototype.CJ=function(o,l){this.kA.write(o,l)},r.prototype.kY=function(o){var l=0,d=0,p=this.AF(o),g=new u.h,v=new u.h,w=new u.h;this.Yr(p,g),v.L(g);var T=p;do this.lm(T,w),d+=u.h.tb(v,w),this.$e(this.xa(T))!=o&&(l+=(w.x-g.x-(v.x-g.x))*(w.y-g.y+(v.y-g.y))*.5),v.L(w),T=this.jc(T);while(T!=p);this.Yn.write(o,l),this.kA.write(o,d)},r.prototype.PU=function(o,l){var d=new c(this),p=new u.Yj;p.De(u.O.truncate(this.wa/2)),p.Vo(d);for(var g=new u.ia(0),v=this.$g(),w=null,T=0,$=new u.h,C=this.Re;C!=-1;C=this.Rf(C)){if(!(255&++T||l==null||l.progress(-1,-1)))throw u.i.WC();var O=this.Me(C);if(O!=-1){if(g.Bh(0),!this.gY(p,v,g,O)){this.D(C,$),d.aK($.y);var N=O;do{var R=this.Ab(N,v);R!=-1&&(p.vd(R,-1),this.Kb(N,v,-2)),N=this.jc(this.xa(N))}while(O!=N);N=O;do(R=this.Ab(N,v))==-1&&(R=p.addElement(N,-1),g.add(R)),N=this.jc(this.xa(N));while(O!=N)}for(O=g.size-1;0<=O;O--)R=g.get(O),N=p.ja(R),this.Kb(this.xa(N),v,R),this.OU(p,R,o)}else this.cz(C)==-1&&(w==null&&(w=new a(this)),this.D(C,$),w.kX($),N=p.IW(w),O=this.Hl,N!=-1&&(R=p.ja(N),this.$e(R)==this.$e(this.xa(R))&&(R=this.OF(p,N)),R!=-1&&(O=this.$e(R))),this.cN(O,C))}this.Jg(v)},r.prototype.OU=function(o,l,d){var p=o.ja(l),g=this.$e(p);if(this.Gn(g)==-1){var v=this.OF(o,l),w=this.xa(p),T=this.$e(w);this.Kp(g),this.Kp(T);var $=this.Gn(g),C=this.Gn(T);if(v==-1&&$==-1&&(T==g?(this.jn(T,this.Hl),$=C=this.Hl):(C==-1&&(this.jn(T,this.Hl),C=this.Hl),this.jn(g,T),$=T)),v!=-1){var O=this.$e(v);C==-1&&(0>=this.Kp(O)?(C=this.Gn(O),this.jn(T,C)):(this.jn(T,O),C=O),T==g&&($=C))}$==-1&&this.hY(g,T),d==0?this.jW(o,l,p,v,g,T):d==5?this.kW(o,l,p,w,g,T):d==4&&this.iW(p,v,g,T)}},r.prototype.jW=function(o,l,d,p,g,v){var w=this.hk(g);if(p!=-1){var T=this.hk(v),$=this.hk(this.$e(p));p=w&T&$,$^=$&this.dh(d),($|=p)!=0&&(this.Vg(v,T|$),this.Vg(g,$|w),w=w||$)}for(l=o.lb(l);l!=-1&&(p=o.ja(l),d=this.$e(this.xa(p)),g=this.hk(d),v=this.dh(p),T=this.$e(p),p=g&($=this.hk(T))&w,w^=w&v,(w|=p)!=0);l=o.lb(l))this.Vg(d,g|w),this.Vg(T,$|w)},r.prototype.kW=function(o,l,d,p,g,v){if(g!=v){d=this.Ab(d,this.cg),d+=this.Ab(p,this.cg),p=0;var w=new u.ia(0),T=new u.ia(0);T.add(0);for(var $=o.rc(-1);$!=l;$=o.lb($)){var C=o.ja($),O=this.xa(C),N=this.$e(C),R=this.$e(O);if(N!=R){if(C=this.Ab(C,this.cg),p+=C+=this.Ab(O,this.cg),O=!1,w.size!=0&&w.Fc()==R&&(T.If(),w.If(),O=!0),this.Gn(R)==-1)throw u.i.Qa();O&&this.Gn(R)==N||(T.add(p),w.add(N))}}p+=d,w.size!=0&&w.Fc()==v&&(T.If(),w.If()),p!=0?T.Fc()==0&&(o=this.g.ld,o=this.La(o),this.Vg(g,o)):T.Fc()!=0&&(o=this.g.ld,o=this.La(o),this.Vg(g,o))}},r.prototype.iW=function(o,l,d,p){var g=this.La(this.g.ld);if(l==-1)this.Vg(p,this.Go),1&(o=this.Ab(o,this.xg))?this.Vg(d,g):this.Vg(d,this.Go);else{var v=this.hk(p);v==0?(v=this.hk(this.$e(l)),this.Vg(p,v),1&(o=this.Ab(o,this.xg))?this.Vg(d,v==g?this.Go:g):this.Vg(d,v)):1&(o=this.Ab(o,this.xg))?this.Vg(d,v==g?this.Go:g):this.Vg(d,v)}},r.prototype.gY=function(o,l,d,p){var g=p,v=-1,w=-1,T=0;do{if(T==2)return!1;var $=this.Ab(g,l);if($!=-1){if(v!=-1)return!1;v=$}else{if(w!=-1)return!1;w=g}T++,g=this.jc(this.xa(g))}while(p!=g);return w!=-1&&v!=-1&&(this.Kb(o.ja(v),l,-2),o.Sj(v,w),d.add(v),!0)},r.prototype.hY=function(o,l){var d=this.Kp(o);if(d!=0){var p=this.Kp(l);0<d&&0>p||0>d&&0<p?this.jn(o,l):(l=this.Gn(l))!=-1&&this.jn(o,l)}},r.prototype.vP=function(o,l){this.Cq=this.g.Gd();for(var d=0,p=l.size;d<p;d++){var g=l.get(d),v=this.g.Pa(g,this.Cm),w=this.g.Qf(this.g.bd(g)),T=this.g.ic(w);if(u.aa.Hc(T)){var $=this.g.U(g);if($!=-1){var C=this.g.Pa($,this.Cm);if(v!=C){var O=this.vU(),N=this.xa(O),R=this.jh.Ce();this.jh.S(R,0,g),this.jh.S(R,1,-1),this.Gt(O,R),this.IJ(O,v),(R=this.Me(v))==-1?(this.mn(v,O),this.Tl(O,N),this.Sl(N,O)):(v=this.te(R),this.Tl(R,N),this.Sl(N,R),this.Sl(v,O),this.Tl(O,v)),this.IJ(N,C),(v=this.Me(C))==-1?(this.mn(C,N),this.Sl(O,N),this.Tl(N,O)):(C=this.te(v),this.Tl(v,O),this.Sl(O,v),this.Sl(C,N),this.Tl(N,C)),w=this.La(w),o==0?(this.Kb(N,this.ae,0),this.Kb(O,this.ae,T==1736?w:0)):o==5?(C=new u.h,this.g.D(g,C),g=new u.h,this.g.D($,g),v=$=0,0>C.compare(g)?$=1:v=-1,this.Kb(N,this.ae,0),this.Kb(O,this.ae,0),this.Kb(O,this.cg,$),this.Kb(N,this.cg,v)):o==7?(this.Kb(N,this.ae,this.Go),this.Kb(O,this.ae,T==1736?w:0)):o==4&&(this.Kb(N,this.ae,0),this.Kb(O,this.ae,0),this.Kb(O,this.xg,1),this.Kb(N,this.xg,1)),T=T==1736?this.aO:0,this.$w(O,w|T),this.$w(N,w|T)}}}}},r.prototype.VT=function(o,l){var d=this.mm(l);if(d!=-1){var p=this.mm(o);this.jh.S(d,1,p),this.Gt(o,d),this.Gt(l,-1)}o=this.xa(o),l=this.xa(l),(d=this.mm(l))!=-1&&(p=this.mm(o),this.jh.S(d,1,p),this.Gt(o,d),this.Gt(l,-1))},r.prototype.IX=function(o){function l(q,K){return p.HO(q,K)}var d=new u.ia(0);d.Jb(10);for(var p=this,g=this.Re;g!=-1;g=this.Rf(g)){d.clear(!1);var v=this.Me(g);if(v!=-1){var w=v;do d.add(w),w=this.jc(this.xa(w));while(w!=v);if(1<d.size){if(w=!0,2<d.size)d.Vd(0,d.size,l),d.add(d.get(0));else if(0<this.GO(d.get(0),d.get(1))){var T=d.get(0);d.set(0,d.get(1)),d.set(1,T)}else w=!1;for(var $=T=d.get(0),C=this.uf($),O=this.xa($),N=-1,R=1,F=d.size;R<F;R++){var G=d.get(R),z=this.xa(G),B=this.jk(z);if(B==C&&G!=$){if(o==0)N=this.LF($)|this.LF(G),this.$w($,N),this.$w(O,N),this.Kb($,this.ae,this.Ab($,this.ae)|this.Ab(G,this.ae)),this.Kb(O,this.ae,this.Ab(O,this.ae)|this.Ab(z,this.ae));else if(this.cg!=-1)N=this.Ab($,this.cg)+this.Ab(G,this.cg),z=this.Ab(O,this.cg)+this.Ab(z,this.cg),this.Kb($,this.cg,N),this.Kb(O,this.cg,z);else{if(o==7)return void(this.Ni=new u.Md(5,g,-1));this.xg!=-1&&(N=this.Ab($,this.xg)+this.Ab(G,this.xg),z=this.Ab(O,this.xg)+this.Ab(z,this.xg),this.Kb($,this.xg,N),this.Kb(O,this.xg,z))}this.VT($,G),this.Ly(G),N=$,d.set(R,-1),G==T&&(d.set(0,-1),T=-1)}else this.yx(N,!1),N=-1,$=G,C=B,O=z}if(this.yx(N,!1),N=-1,w){for(T=-1,R=0,F=d.size;R<F;R++)if((G=d.get(R))!=-1){if(T==-1)$=T=G,C=this.uf($),O=this.xa($);else if(G!=$&&(z=this.xa(G),B=this.jk(z),this.Sl(O,G),this.Tl(G,O),$=G,C=B,O=z,o==7&&(this.Ab(G,this.ae)|this.Ab(this.te(G),this.ae))==(1|this.Go)))return void(this.Ni=new u.Md(5,g,-1))}this.mn(g,T)}else{for(T=-1,R=0,F=d.size;R<F;R++)if((G=d.get(R))!=-1){T=G;break}v!=T&&this.mn(g,T)}}}}},r.prototype.WN=function(){for(var o=-1,l=this.$g(),d=this.Re;d!=-1;d=this.Rf(d)){var p=this.Me(d);if(p!=-1){var g=p;do{if(this.Ab(g,l)!=1){var v=this.mI();this.Dt(v,g),this.BJ(v,o),o!=-1&&this.DJ(o,v),o=v;var w=0,T=g;do w|=this.Ab(T,this.ae),this.$W(T,v),this.Kb(T,l,1),T=this.jc(T);while(T!=g);this.Vg(v,w)}g=this.jc(this.xa(g))}while(g!=p)}}v=this.mI(),this.Dt(v,-1),this.BJ(v,o),o!=-1&&this.DJ(o,v),this.Hl=v,this.Yn=u.be.qf(this.ye.size,NaN),this.kA=u.be.qf(this.ye.size,NaN),this.AJ(this.Hl,1/0),this.CJ(this.Hl,1/0),this.Jg(l)},r.prototype.sR=function(o,l,d){if((l=l!=-1?l:this.Me(o))==-1)return-1;for(o=l;;){if(this.Ab(l,d)!=1)return l;if((l=this.jc(this.xa(l)))==o)return-1}},r.prototype.yW=function(){for(var o=this.$g(),l=this.Re;l!=-1;l=this.Rf(l))for(var d=-1;;){var p=this.sR(l,d,o);if(p==-1)break;d=this.jc(this.xa(p));for(var g=p;;){var v=this.jc(g),w=this.te(g),T=this.xa(g);if(w==T){if(this.IP(g),d!=g&&d!=T||(d=-1),g==p||w==p){if(g==(p=v)||w==p)break;g=v;continue}}else this.Kb(g,o,1);if((g=v)==p)break}}this.Jg(o)},r.prototype.MB=function(o,l,d,p,g){this.Ug(),this.gH=g,this.g=o,this.Bq=this.g.aF(),(o=new u.ia(0)).Jb(d!=null?this.g.I(d.get(0)):this.g.fd);var v=0,w=1,T=d!=null?d.get(0):this.g.ld;for(g=1;T!=-1;){this.g.HJ(T,this.Bq,w),w<<=1;for(var $=this.g.Ob(T);$!=-1;$=this.g.Rb($))for(var C=this.g.Xa($),O=0,N=this.g.Ja($);O<N;O++)o.add(C),C=this.g.U(C);u.aa.Rn(this.g.ic(T))||(v+=this.g.da(T)),d!=null?(T=g<d.size?d.get(g):-1,g++):T=this.g.ue(T)}for(this.Go=w,this.wa=o.size,this.g.nx(o,this.wa),this.jh==null&&(this.jh=new u.$c(2),this.ge=new u.$c(8),this.Kc=new u.$c(8),this.ye=new u.$c(8)),this.jh.De(this.wa),u.mp.zp(p),this.ge.De(this.wa+10),this.Kc.De(2*this.wa+32),this.ye.De(Math.max(32,v)),this.Cm=this.g.Gd(),d=new u.h,g=0,v=new u.h,d.Rc(),w=0;w<=this.wa;w++)if(w<this.wa?(C=o.get(w),this.g.D(C,v)):v.Rc(),!d.qb(v)){if(g<w){for(C=this.Ym(),N=O=-1;g<w;g++)N=o.get(g),this.g.Ra(N,this.Cm,C),T=this.jh.Ce(),this.jh.S(T,0,N),this.jh.S(T,1,O),O=T,$=this.g.bd(N),T=this.g.Qf($),T=this.La(T),this.SW(C,this.xd(C)|T);this.TW(C,O),this.cr(C,this.g.Ua(N)),this.Os!=-1&&this.iX(this.Os,C),this.lX(C,this.Os),this.Os=C,this.Re==-1&&(this.Re=C)}g=w,d.L(v)}u.mp.zp(p),this.ae=this.$g(),l==5&&(this.cg=this.$g()),l==4&&(this.xg=this.$g()),this.vP(l,o),this.Ni.Jj==0&&(this.IX(l),this.Ni.Jj==0&&(isNaN(this.lA)||this.xO()?(this.WN(),this.Ni.Jj==0&&(this.Jg(this.ae),this.ae=-1,this.gH&&this.PU(l,p))):this.pA=!0))},r.prototype.Ly=function(o){var l=this.jc(o),d=this.te(o),p=this.xa(o),g=this.jc(p),v=this.te(p);l!=p&&(this.Sl(v,l),this.Tl(l,v)),d!=p&&(this.Sl(d,g),this.Tl(g,d)),d=this.jk(o),this.Me(d)==o&&(g!=o?this.mn(d,g):this.mn(d,-1)),g=this.jk(p),this.Me(g)==p&&(l!=p?this.mn(g,l):this.mn(g,-1)),this.Kc.jd(o),this.Kc.jd(p)},r.prototype.OF=function(o,l){for(;;){if((l=o.we(l))==-1)return-1;var d=o.ja(l);if(this.$e(d)!=this.$e(this.xa(d)))return d}},r.prototype.dr=function(o,l){var d;d===void 0&&(d=!0),this.MB(o,0,null,l,d)},r.prototype.vJ=function(o,l,d){var p=new u.ia(0);p.add(l),this.MB(o,4,p,d,o.ic(l)==1736)},r.prototype.wJ=function(o,l,d){var p=new u.ia(0);p.add(l),this.MB(o,5,p,d,!0)},r.prototype.Ug=function(){this.g!=null&&(this.Bq!=-1&&(this.g.xW(this.Bq),this.Bq=-1),this.Cm!=-1&&(this.g.Td(this.Cm),this.Cm=-1),this.Cq!=-1&&(this.g.Td(this.Cq),this.Cq=-1),this.ae!=-1&&(this.Jg(this.ae),this.ae=-1),this.cg!=-1&&(this.Jg(this.cg),this.cg=-1),this.xg!=-1&&(this.Jg(this.xg),this.xg=-1),this.g=null,this.ge.mj(!0),this.jh.mj(!0),this.Os=this.Re=-1,this.Kc!=null&&this.Kc.mj(!0),this.Gi!=null&&(this.Gi.length=0),this.Di!=null&&(this.Di.length=0),this.hH!=null&&(this.hH.length=0),this.ye!=null&&this.ye.mj(!0),this.Hl=-1,this.Yn=null)},r.prototype.Me=function(o){return this.ge.T(o,2)},r.prototype.D=function(o,l){this.g.dG(this.eR(o),l)},r.prototype.xd=function(o){return this.ge.T(o,1)},r.prototype.Rf=function(o){return this.ge.T(o,4)},r.prototype.cz=function(o){return this.ge.T(o,6)},r.prototype.km=function(o){return this.ge.T(o,7)},r.prototype.js=function(o){return this.jh.T(o,1)},r.prototype.tj=function(o){return this.jh.T(o,0)},r.prototype.ng=function(o,l){return(l=this.Di[l]).size<=o?-1:l.read(o)},r.prototype.nn=function(o,l,d){(l=this.Di[l]).size<=o&&l.resize(this.ge.size,-1),l.write(o,d)},r.prototype.Dp=function(){this.Di==null&&(this.Di=[]);for(var o=u.ia.qf(this.ge.Hg,-1),l=0,d=this.Di.length;l<d;l++)if(this.Di[l]==null)return this.Di[l]=o,l;return this.Di.push(o),this.Di.length-1},r.prototype.Ep=function(o){this.Di[o]=null},r.prototype.jk=function(o){return this.Kc.T(o,1)},r.prototype.uf=function(o){return this.jk(this.xa(o))},r.prototype.xa=function(o){return this.Kc.T(o,4)},r.prototype.te=function(o){return this.Kc.T(o,5)},r.prototype.jc=function(o){return this.Kc.T(o,6)},r.prototype.$e=function(o){return this.Kc.T(o,2)},r.prototype.af=function(o){return this.hk(this.Kc.T(o,2))},r.prototype.mm=function(o){return this.Kc.T(o,7)},r.prototype.Yr=function(o,l){this.D(this.jk(o),l)},r.prototype.lm=function(o,l){this.D(this.uf(o),l)},r.prototype.dh=function(o){return this.Kc.T(o,3)&this.bO},r.prototype.Ab=function(o,l){return(l=this.Gi[l]).size<=o?-1:l.read(o)},r.prototype.Kb=function(o,l,d){(l=this.Gi[l]).size<=o&&l.resize(this.Kc.size,-1),l.write(o,d)},r.prototype.$g=function(){this.Gi==null&&(this.Gi=[]);for(var o=u.ia.qf(this.Kc.Hg,-1),l=0,d=this.Gi.length;l<d;l++)if(this.Gi[l]==null)return this.Gi[l]=o,l;return this.Gi.push(o),this.Gi.length-1},r.prototype.Jg=function(o){this.Gi[o]=null},r.prototype.IP=function(o){var l=this.$e(o),d=this.xa(o),p=this.jc(o);p==d&&(p=this.jc(p))==o&&(p=-1);var g=this.AF(l);g!==o&&g!=d||this.Dt(l,p),d=this.Yn.read(l),isNaN(d)||(this.AJ(l,NaN),this.CJ(l,NaN)),this.yx(o,!0),this.Ly(o)},r.prototype.JP=function(o){for(var l=0,d=o.size;l<d;l++){var p=o.get(l),g=this.$e(this.xa(p));this.Dt(this.$e(p),-1),this.Dt(g,-1),this.yx(p,!0),this.Ly(p)}},r.prototype.AF=function(o){return this.ye.T(o,1)},r.prototype.hk=function(o){return this.ye.T(o,2)},r.prototype.Gn=function(o){return this.ye.T(o,3)},r.prototype.dR=function(o){return this.ye.T(o,4)},r.prototype.Kp=function(o){var l=this.Yn.read(o);return isNaN(l)&&(this.kY(o),l=this.Yn.read(o)),l},r.prototype.La=function(o){return this.g.KF(o,this.Bq)},r.prototype.Le=function(o){return this.g.Pa(o,this.Cm)},r.prototype.uR=function(o){return this.g.Pa(o,this.Cq)},r.prototype.tR=function(o,l){var d=this.Me(o);if(d==-1)return-1;var p=d,g=-1,v=-1;do{if(this.uf(p)==l)return p;if(g==-1){if((g=this.Me(l))==-1)break;v=g}if(this.uf(v)==o)return this.xa(v);p=this.jc(this.xa(p)),v=this.jc(this.xa(v))}while(p!=d&&v!=g);return-1},r.prototype.pB=function(o,l){l.Or(),l=l.get();var d=new u.h;this.Yr(o,d),l.Dc(d),this.lm(o,d),l.Qc(d)},r.prototype.HO=function(o,l){if(o==l)return 0;var d=new u.h;this.lm(o,d);var p=new u.h;return this.lm(l,p),d.qb(p)?0:(l=new u.h,this.Yr(o,l),(o=new u.h).uc(d,l),(d=new u.h).uc(p,l),u.h.nu(o,d))},r.prototype.GO=function(o,l){if(o==l)return 0;var d=new u.h;this.lm(o,d);var p=new u.h;return this.lm(l,p),d.qb(p)?0:(l=new u.h,this.Yr(o,l),(o=new u.h).uc(d,l),(d=new u.h).uc(p,l),0<=d.y&&0<o.y?u.h.nu(o,d):0)},r.prototype.xO=function(){for(var o=u.lc.ox(this.lA),l=new u.h,d=new u.h,p=new u.h,g=new u.h,v=new u.h,w=this.Re;w!=-1;w=this.Rf(w)){var T=this.Me(w);if(T!=-1){var $=T;this.Yr($,l),this.lm($,d),v.uc(d,l);var C=v.Sk();do{var O=$;if(($=this.jc(this.xa($)))!=O){this.lm($,p),g.uc(p,l),O=g.Sk();var N=g.wi(v);if(N*N/(O*C)*Math.min(O,C)<=o)return!1;v.L(g),C=O,d.L(p)}}while($!=T)}}return!0},r}(),u.iu=A}(V||(V={})),function(u){var A=function(){function b(){this.j=null,this.oH=new u.h,this.pH=new u.h,this.Gj=null,this.Mv=!1,this.tl=-1}return b.prototype.cf=function(c){return c<this.Gj.length&&this.Gj[c]},b.prototype.dl=function(c,a,r,o){var l=u.aa.tf(this.j.g.ic(r));if(u.aa.tf(this.j.g.ic(a))!=2||l!=1)throw u.i.Qa();this.FP(c,a,r,o)},b.prototype.dr=function(c,a){this.j==null&&(this.j=new u.iu),this.j.dr(c,a)},b.prototype.Ft=function(c,a,r){for(u.Tk.V(c,a,r,!0),a=c.ld;a!=-1;a=c.ue(a))c.ic(a)==1736&&u.rn.V(c,a,-1,this.Mv,r);this.dr(c,r)},b.prototype.ME=function(c,a,r,o,l){var d=this.j.g;if(d.ic(c)==1736)for(c=d.Ob(c);c!=-1;c=d.Rb(c)){var p=d.Xa(c);this.j.Le(p),this.j.Le(d.U(p));var g=this.j.uR(p);if(g!=-1){var v=this.j.Ab(g,r);if(v!=1&&v!=2)if(this.cf(this.j.af(g))){this.j.Kb(g,r,1),v=d.vf(a,-1);var w=g,T=this.j.Le(p),$=1;do{var C=this.sm(p,l);d.ij(v,C),o!=-1&&this.j.nn(T,o,1),this.j.Kb(w,r,1),w=this.j.jc(w);do var O=(C=$==1?d.U(p):d.Ma(p))!=-1?this.j.Le(C):-1;while(O==T);var N=this.j.jk(w);if(N!=O){do O=(C=$==1?d.Ma(p):d.U(p))!=-1?this.j.Le(C):-1;while(O==T);N!=O?(O=N,C=this.j.tj(this.j.km(O))):$=-$}T=O,p=C}while(w!=g);d.kn(v,!0)}else this.j.Kb(g,r,2)}}},b.prototype.eF=function(){for(var c=this.j.$g(),a=new u.ia(0),r=this.j.Re;r!=-1;r=this.j.Rf(r)){var o=this.j.Me(r),l=o;if(o!=-1)do{if(this.j.Ab(l,c)!=1){var d=this.j.xa(l);this.j.Kb(d,c,1),this.j.Kb(l,c,1),this.cf(this.j.af(l))&&this.cf(this.j.af(d))&&a.add(l)}l=this.j.jc(this.j.xa(l))}while(l!=o)}this.j.Jg(c),this.j.JP(a)},b.prototype.sm=function(c,a){return a==-1?c:this.aS(c,a)},b.prototype.aS=function(c,a){var r=this.j.g,o=this.j.km(this.j.Le(c));do{var l=this.j.tj(o);if(r.Qf(r.bd(l))==a)return l;o=this.j.js(o)}while(o!=-1);return c},b.prototype.Ot=function(c,a,r){this.eF();var o=this.j.g,l=o.Ig(1736),d=this.j.$g();return this.uK(c,a,l,r,d,-1),this.j.Jg(d),u.rn.V(o,l,1,this.Mv,null),l},b.prototype.uK=function(c,a,r,o,l,d){for(this.ME(c,r,l,d,o),a!=-1&&this.ME(a,r,l,d,o),c=this.j.g,a=this.j.Re;a!=-1;a=this.j.Rf(a)){var p=this.j.Me(a);if(p!=-1){var g=p;do{var v=this.j.Ab(g,l);if(v!=1&&v!=2)if(this.cf(this.j.af(g))){v=c.vf(r,-1);var w=g;do{var T=this.j.mm(w);T!=-1?T=this.j.tj(T):(T=this.j.tj(this.j.mm(this.j.xa(w))),T=this.j.g.U(T)),T=this.sm(T,o),c.ij(v,T),this.j.Kb(w,l,1),d!=-1&&(T=this.j.Le(T),this.j.nn(T,d,1)),w=this.j.jc(w)}while(w!=g);c.kn(v,!0)}else this.j.Kb(g,l,2);g=this.j.jc(this.j.xa(g))}while(g!=p)}}},b.prototype.aY=function(c,a,r){var o=this.j.g,l=o.Ig(1736),d=o.Ig(1607),p=o.Ig(550);this.eF();var g=-1,v=this.j.$g(),w=this.j.Dp();for(this.uK(c,a,l,r,v,w),c=this.j.Re;c!=-1;c=this.j.Rf(c))if((a=this.j.Me(c))!=-1){var T=a;do{var $=this.j.Ab(T,v),C=this.j.Ab(this.j.xa(T),v);if(($|=C)==2)if($=this.j.dh(T),this.cf($)){var O=o.vf(d,-1),N=T;$=this.Yw(c,o),$=this.sm($,r),o.ij(O,$),this.j.nn(c,w,1);do{if($=this.j.uf(N),C=this.Yw($,o),C=this.sm(C,r),o.ij(O,C),this.j.Kb(N,v,1),this.j.Kb(this.j.xa(N),v,1),this.j.nn($,w,1),N=this.j.jc(N),$=this.j.Ab(N,v),($|=C=this.j.Ab(this.j.xa(N),v))!=2)break;if($=this.j.dh(N),!this.cf($)){this.j.Kb(N,v,1),this.j.Kb(this.j.xa(N),v,1);break}}while(N!=T)}else this.j.Kb(T,v,1),this.j.Kb(this.j.xa(T),v,1);T=this.j.jc(this.j.xa(T))}while(T!=a)}for(c=this.j.Re;c!=-1;c=this.j.Rf(c))($=this.j.ng(c,w))!=1&&($=this.j.xd(c),this.cf($)&&(g==-1&&(g=o.vf(p,-1)),(a=this.j.km(c))!=-1&&(a=this.j.tj(a),$=this.sm(a,r),o.ij(g,$))));return this.j.Ep(w),this.j.Jg(v),u.rn.V(o,l,1,this.Mv,null),(r=[])[0]=p,r[1]=d,r[2]=l,r},b.prototype.Yw=function(c,a){var r=-1;for(c=this.j.km(c);c!=-1;c=this.j.js(c)){var o=this.j.tj(c);r==-1&&(r=o);var l=this.j.La(a.Qf(a.bd(o)));if(this.cf(l)){r=o;break}}return r},b.prototype.lB=function(c,a){for(var r=this.jl(a),o=this.j.jk(a),l=this.j.uf(a),d=0,p=0,g=this.j.km(o);g!=-1;g=this.j.js(g)){var v=this.j.tj(g),w=c.bd(v),T=this.j.La(c.Qf(w));w=c.Xa(w),(T=!!(T&r))&&w==v&&(this.tl=a);var $=c.U(v);$!=-1&&this.j.Le($)==l?(d++,T&&(this.tl===-1&&w==$&&(v=this.j.jc(a),this.cf(this.jl(v))&&(this.tl=v)),p++)):(v=c.Ma(v))!=-1&&this.j.Le(v)==l&&(d--,T&&(this.tl===-1&&w===v&&(v=this.j.jc(a),this.cf(this.jl(v))&&(this.tl=v)),p--))}return this.j.D(o,this.oH),this.j.D(l,this.pH),(p!=0?p:d)*(c=u.h.tb(this.oH,this.pH))},b.prototype.jl=function(c){return this.j.dh(c)|this.j.af(c)|this.j.af(this.j.xa(c))},b.prototype.xK=function(c){for(var a=this.j.xa(this.j.te(c)),r=-1;a!=c;){if(this.cf(this.jl(a))){if(r!=-1)return-1;r=a}a=this.j.xa(this.j.te(a))}return r!=-1?this.j.xa(r):-1},b.prototype.yK=function(c){for(var a=this.j.xa(this.j.jc(c)),r=-1;a!=c;){if(this.cf(this.jl(a))){if(r!=-1)return-1;r=a}a=this.j.xa(this.j.jc(a))}return r!=-1?this.j.xa(r):-1},b.prototype.mJ=function(c,a,r,o,l){var d=this.j.g,p=c,g=this.j.xa(p);this.j.Kb(p,r,1),this.j.Kb(g,r,1),this.tl=-1;for(var v=this.lB(d,p),w=p,T=-1,$=!1,C=1;;){var O=this.j.te(p);if(O==g)break;if(g=this.j.jc(g),this.j.xa(O)!=g){if((p=this.xK(p))==-1){$=!0;break}g=this.j.xa(p)}else p=O;if(p==c){T=c;break}if(O=this.jl(p),!this.cf(O))break;this.j.Kb(p,r,1),this.j.Kb(g,r,1),w=p,v+=this.lB(d,p),C++}if(T==-1)for(p=c,g=this.j.xa(p),T=p;(c=this.j.jc(p))!=g;){if(g=this.j.te(g),this.j.xa(c)!=g){if((p=this.yK(p))==-1){$=!0;break}g=this.j.xa(p)}else p=c;if(O=this.jl(p),!this.cf(O))break;this.j.Kb(p,r,1),this.j.Kb(g,r,1),T=p,v+=this.lB(d,p),C++}else if(this.tl!=-1&&(w=this.tl,T=this.j.te(this.tl),this.j.xa(T)!=this.j.jc(this.j.xa(w))&&(T=this.xK(w))==-1))throw u.i.Qa();for(0<=v||(p=T,T=this.j.xa(w),w=this.j.xa(p)),r=d.vf(a,-1),p=w,w=this.j.jk(w),$=this.j.uf(T)==w&&$,v=this.Yw(w,d),v=this.sm(v,l),d.ij(r,v),o!=-1&&this.j.nn(w,o,1),w=0,C=$?u.O.truncate((C+1)/2):-1;c=this.j.uf(p),v=this.Yw(c,d),v=this.sm(v,l),d.ij(r,v),w++,o!=-1&&this.j.nn(c,o,1),$&&w==C&&(r=d.vf(a,-1),d.ij(r,v)),p!=T;)if(c=this.j.jc(p),this.j.te(this.j.xa(p))!=this.j.xa(c)){if((p=this.yK(p))==-1)throw u.i.Qa()}else p=c},b.prototype.Pt=function(c){for(var a=this.j.g.Ig(1607),r=this.j.$g(),o=this.j.Re;o!=-1;o=this.j.Rf(o)){var l=this.j.Me(o),d=l;do this.j.Ab(d,r)!=1&&this.cf(this.jl(d))&&this.mJ(d,a,r,-1,c),d=this.j.jc(this.j.xa(d));while(d!=l)}return this.j.Jg(r),a},b.prototype.bY=function(c){for(var a=this.j.g,r=a.Ig(1607),o=a.Ig(550),l=this.j.$g(),d=this.j.Dp(),p=-1,g=this.j.Re;g!=-1;g=this.j.Rf(g)){var v=this.j.Me(g),w=v;do{var T=this.j.Ab(w,l);T!=1&&(T=this.jl(w),this.cf(T)&&this.mJ(w,r,l,d,c)),w=this.j.jc(this.j.xa(w))}while(w!=v)}for(g=this.j.Re;g!=-1;g=this.j.Rf(g))(T=this.j.ng(g,d))!=1&&(T=this.j.xd(g),this.cf(T)&&(p==-1&&(p=a.vf(o,-1)),(v=this.j.km(g))!=-1&&(v=this.j.tj(v),v=this.sm(v,c),a.ij(p,v))));return this.j.Jg(l),this.j.Ep(d),(c=[])[0]=o,c[1]=r,c},b.prototype.mr=function(){for(var c=this.j.g,a=c.Ig(550),r=c.vf(a,-1),o=this.j.Re;o!=-1;o=this.j.Rf(o))if(this.cf(this.j.xd(o))){for(var l=-1,d=this.j.km(o);d!=-1;d=this.j.js(d)){var p=this.j.tj(d);l==-1&&(l=p);var g=this.j.La(c.Qf(c.bd(p)));if(this.cf(g)){l=p;break}}c.ij(r,l)}return a},b.prototype.bq=function(c){this.Gj=[];for(var a=0;a<c;a++)this.Gj[a]=!1},b.aW=function(c,a,r){var o=c.Ia(),l=Array(1e3);u.O.$u(l,null);var d=u.O.lg(1e3,0),p=c.I(),g=!0,v=a.Db()==2;if(a.Db()!=1&&a.Db()!=2)throw u.i.Qa();for(var w=0;w<p;){var T=u.O.truncate(c.lW(l,w)-w);v?u.hd.sK(a,l,T,r,d):u.hd.tK(a,l,T,r,d);for(var $=0,C=0;C<T;C++)d[C]==0&&(g&&(g=!1,o.Fd(c,0,w)),$!=C&&o.Fd(c,w+$,w+C),$=C+1);g||$==T||o.Fd(c,w+$,w+T),w+=T}return g?c:o},b.zG=function(c,a,r){return c instanceof u.de?b.aW(c,a,r):a instanceof u.Sa?c.B()||a.B()?c.Ia():u.Tk.zU(r,c,a)?u.Tk.CO(c,a):c.Ia():b.bW(c,a,r)},b.Av=function(c,a,r,o){var l=new u.l;c.A(l);var d=new u.l;a.A(d);var p=new u.l;if(p.K(l),p.Zb(d),r=u.ta.Wd(r,p,!0),(p=new u.l).K(d),d=u.ta.Er(r),p.W(d,d),!l.isIntersecting(p)){if(c.Db()<=a.Db())return b.ki(b.Xe(c.Ia()),c,"&");if(c.Db()>a.Db())return b.ki(b.Xe(a.Ia()),c,"&")}return d=new b,p=(l=new u.gd).Ib(b.Xe(c)),a=l.Ib(b.Xe(a)),d.Ft(l,r,o),o=d.Av(p,a),c=b.ki(l.Ne(o),c,"&"),u.aa.Hc(c.getType())&&(c.Ch(2,r),c.getType()==1736&&c.fm()),c},b.bW=function(c,a,r){if(c.B()||a.B())return c.Ia();var o=[null],l=[0],d=a.Db()==2;if(a.Db()!=1&&a.Db()!=2)throw u.i.Qa();return o[0]=c.D(),d?u.hd.sK(a,o,1,r,l):u.hd.tK(a,o,1,r,l),l[0]==0?c.Ia():c},b.prototype.LU=function(c,a,r,o,l){if(c.B())return c;var d=new u.gd;return c=d.Ib(c),this.Mk(d,c,a,r,o,l)},b.prototype.NU=function(c,a,r,o,l,d){if(l&&c.ic(a)!=550){var p=new u.RC;p.TX(c,r),p.Ng?(u.Tk.V(c,r,d,!0),l=!1):this.j.yy(r)}else u.Tk.V(c,r,d,!0),l=!1;if(o&&c.ic(a)!=550?this.j.wJ(c,a,d):this.j.vJ(c,a,d),this.j.pA)return this.j.Ug(),this.j=null,this.Mk(c,a,r,o,!1,d);if(this.j.yy(NaN),d=this.j.La(a),this.bq(d+1),this.Gj[d]=!0,c.ic(a)==1736||o&&c.ic(a)!=550)return c.Yo(a,0),a=this.Ot(a,-1,-1),(c=c.Ne(a)).Yo(0),l?c.Ch(1,0):(c.Ch(2,r),c.fm()),c;if(c.ic(a)==1607)return a=this.Pt(-1),c=c.Ne(a),l||c.Ch(2,r),c;if(c.ic(a)==550)return a=this.mr(),c=c.Ne(a),l||c.Ch(2,r),c;throw u.i.Qa()},b.prototype.Mk=function(c,a,r,o,l,d){this.j=new u.iu;try{return this.NU(c,a,r,o,l,d)}finally{this.j.Ug()}},b.Mk=function(c,a,r,o,l){return new b().LU(c,a,r,o,l)},b.prototype.MU=function(c,a,r,o){this.Mv=c,this.j=new u.iu,c=a.In(r);var l=a.ic(r);if(c!=1||l==550?this.j.vJ(a,r,o):this.j.wJ(a,r,o),!this.j.pA)if(this.j.yy(NaN),o=this.j.La(r),this.bq(o+1),this.Gj[o]=!0,a.ic(r)==1736||c==1&&a.ic(r)!=550)a.Yo(r,0),o=this.Ot(r,-1,-1),a.hC(o,r),a.BB(o);else if(a.ic(r)==1607)o=this.Pt(-1),a.hC(o,r),a.BB(o);else{if(a.ic(r)!=550)throw u.i.fa("internal error");o=this.mr(),a.hC(o,r),a.BB(o)}},b.prototype.im=function(c,a){var r=u.aa.tf(this.j.g.ic(c)),o=u.aa.tf(this.j.g.ic(a));if(r>o)return c;var l=this.j.La(c),d=this.j.La(a);if(this.bq(1+(l|d)),this.Gj[this.j.La(c)]=!0,r==2&&o==2)return this.Ot(c,a,-1);if(r==1&&o==2||r==1&&o==1)return this.Pt(-1);if(r==0)return this.mr();throw u.i.Qa()},b.prototype.Av=function(c,a){var r=u.aa.tf(this.j.g.ic(c)),o=u.aa.tf(this.j.g.ic(a)),l=this.j.La(c),d=this.j.La(a);if(this.bq(1+(l|d)),this.Gj[this.j.La(c)|this.j.La(a)]=!0,l=-1,1<this.j.g.ht.Aa&&(l=c),r==2&&o==2)return this.Ot(c,a,l);if(r==1&&0<o||o==1&&0<r)return this.Pt(l);if(r==0||o==0)return this.mr();throw u.i.Qa()},b.prototype.Pz=function(c,a){var r=u.aa.tf(this.j.g.ic(c)),o=u.aa.tf(this.j.g.ic(a)),l=this.j.La(c),d=this.j.La(a);if(this.bq(1+(l|d)),this.Gj[this.j.La(c)|this.j.La(a)]=!0,l=-1,1<this.j.g.ht.Aa&&(l=c),r==2&&o==2)return this.aY(c,a,l);if(r==1&&0<o||o==1&&0<r)return this.bY(l);if(r==0||o==0)return(c=[])[0]=this.mr(),c;throw u.i.Qa()},b.prototype.ep=function(c,a){var r=u.aa.tf(this.j.g.ic(c)),o=u.aa.tf(this.j.g.ic(a)),l=this.j.La(c),d=this.j.La(a);if(this.bq(1+(l|d)),this.Gj[this.j.La(c)]=!0,this.Gj[this.j.La(a)]=!0,r==2&&o==2)return this.Ot(c,a,-1);if(r==1&&o==1)return this.Pt(-1);if(r==0&&o==0)return this.mr();throw u.i.Qa()},b.Xe=function(c){var a=c.getType();return a==197?(a=new u.Da(c.description),c.B()||a.ad(c,!1),a):a==33?(a=new u.de(c.description),c.B()||a.add(c),a):a==322?(a=new u.Ta(c.description),c.B()||a.oc(c,!0),a):c},b.ki=function(c,a,r){var o=c.getType();return o==197?(a=new u.Da(c.description),c.B()||a.ad(c,!1),a):o!=33||r!="|"&&r!="^"?o==322?(a=new u.Ta(c.description),c.B()||a.oc(c,!0),a):o==33&&r=="-"&&a.getType()==33||o==550&&r=="&"&&a.getType()==33?(a=new u.Sa(c.description),c.B()||c.ve(0,a),a):c:(a=new u.de(c.description),c.B()||a.add(c),a)},b.im=function(c,a,r,o){if(c.B()||a.B()||c.Db()>a.Db())return b.ki(b.Xe(c),c,"-");var l=new u.l;c.A(l);var d=new u.l;if(a.A(d),!l.isIntersecting(d))return b.ki(b.Xe(c),c,"-");var p=new u.l;return p.K(l),p.Zb(d),r=u.ta.Wd(r,p,!0),d=new b,p=(l=new u.gd).Ib(b.Xe(c)),a=l.Ib(b.Xe(a)),d.Ft(l,r,o),o=d.im(p,a),o=l.Ne(o),c=b.ki(o,c,"-"),u.aa.Hc(c.getType())&&(c.Ch(2,r),c.getType()==1736&&c.fm()),c},b.VP=function(c,a,r){if(2>c.length)throw u.i.N("not enough geometries to dissolve");for(var o=0,l=0,d=c.length;l<d;l++)o=Math.max(c[l].Db(),o);var p=new u.l;p.Oa();var g=new u.gd,v=-1,w=0,T=-1;for(l=0,d=c.length;l<d;l++)if(c[l].Db()==o)if(c[l].B())T==-1&&(T=l);else{T=l,v==-1?v=g.Ib(b.Xe(c[l])):g.uN(v,b.Xe(c[l]));var $=new u.l;c[l].xc($),p.Zb($),w++}return 2>w?b.Xe(c[T]):(c=o==2,a=u.ta.Wd(o==0?a:null,p,!0),new b().Mk(g,v,a,c,!0,r))},b.Pz=function(c,a,r,o){var l=[null,null,null],d=new u.l;c.A(d);var p=new u.l;a.A(p);var g=new u.l;if(g.K(d),g.Zb(p),r=u.ta.Wd(r,g,!0),(g=new u.l).K(p),p=u.ta.Er(r),g.W(p,p),!d.isIntersecting(g)){if(c.Db()<=a.Db())return l[(c=b.ki(b.Xe(c.Ia()),c,"&")).Db()]=c,l;if(c.Db()>a.Db())return l[(c=b.ki(b.Xe(a.Ia()),c,"&")).Db()]=c,l}for(p=new b,g=(d=new u.gd).Ib(b.Xe(c)),a=d.Ib(b.Xe(a)),p.Ft(d,r,o),o=p.Pz(g,a),a=0;a<o.length;a++)p=b.ki(d.Ne(o[a]),c,"&"),u.aa.Hc(p.getType())&&(p.Ch(2,r),p.getType()==1736&&p.fm()),l[p.Db()]=p;return l},b.ep=function(c,a,r,o){if(c.Db()>a.Db())return b.ki(b.Xe(c),c,"^");if(c.Db()<a.Db()||c.B())return b.ki(b.Xe(a),c,"^");if(a.B())return b.ki(b.Xe(c),c,"^");var l=new u.l;c.A(l);var d=new u.l;a.A(d);var p=new u.l;return p.K(l),p.Zb(d),r=u.ta.Wd(r,p,!0),d=new b,p=(l=new u.gd).Ib(b.Xe(c)),a=l.Ib(b.Xe(a)),d.Ft(l,r,o),o=d.ep(p,a),c=b.ki(l.Ne(o),c,"^"),u.aa.Hc(c.getType())&&(c.Ch(2,r),c.getType()==1736&&c.fm()),c},b.prototype.LQ=function(c,a){var r=this.j.g;c=r.vf(c,-1);for(var o=a.size,l=0;l<o;l++){var d=a.get(l);r.ij(c,d)}r.kn(c,!0)},b.prototype.aX=function(c,a){for(var r=this.j.g,o=r.ld;o!=-1;o=r.ue(o))if(o==a)for(var l=r.Ob(o);l!=-1;l=r.Rb(l)){var d=r.Xa(l);if(d!=-1)for(var p=r.U(d);p!=-1;){d=this.j.Le(d);var g=this.j.Le(p);(d=this.j.tR(d,g))!=-1&&(g=this.j.xa(d),this.j.Kb(d,c,1),this.j.Kb(g,c,2)),d=p,p=r.U(d)}}},b.prototype.cW=function(c,a,r,o){r=this.j.La(r),o=this.j.La(o);var l=new u.ia(0);l.Jb(256);for(var d=this.j.g,p=this.j.$g(),g=this.j.Re;g!=-1;g=this.j.Rf(g)){var v=this.j.Me(g);if(v!=-1){var w=v;do{if(this.j.Ab(w,p)!=1){var T=w,$=w,C=!1,O=0;do{if(this.j.Kb(T,p,1),!C){var N=this.j.dh(T);N&o&&this.j.af(T)&r&&($=T,C=!0)}C&&(l.add(this.j.tj(this.j.km(this.j.jk(T)))),c!=-1&&(N=this.j.dh(T))&o&&(O|=N=this.j.Ab(T,c))),T=this.j.jc(T)}while(T!=$);C&&0<this.j.Kp(this.j.$e($))&&(T=d.Ig(1736),this.LQ(T,l),a!=-1&&d.HJ(T,a,O)),l.clear(!1)}w=this.j.jc(this.j.xa(w))}while(w!=v)}}this.j.Jg(p)},b.prototype.FP=function(c,a,r,o){this.j.yW();var l=-1;c!=-1&&(l=this.j.$g(),this.aX(l,r)),this.cW(l,c,a,r),l!=-1&&(this.j.Jg(l),l=-1);var d=this.j.g;for(c=0,l=d.ld;l!=-1;l=d.ue(l))l!=a&&l!=r&&(o.add(l),c++);o.Vd(0,c,function(p,g){return(p=d.wz(d.Ob(p)))<(g=d.wz(d.Ob(g)))?-1:p==g?0:1})},b.prototype.Ug=function(){this.j!=null&&(this.j.Ug(),this.j=null)},b}();u.Fg=A}(V||(V={})),function(u){var A=function(){function b(c){c!==void 0?this.setScale(c):this.RB()}return b.prototype.lx=function(){this.Lb=this.Gb=this.jb=this.eb=this.ab=this.bb=0},b.prototype.Nb=function(c){return this==c||c instanceof b&&this.bb==c.bb&&this.eb==c.eb&&this.Gb==c.Gb&&this.jb==c.jb&&this.ab==c.ab&&this.Lb==c.Lb},b.prototype.cc=function(){return u.O.uj(),u.O.uj(),u.O.uj(),u.O.uj(),u.O.uj(),u.O.uj()},b.prototype.Eh=function(c,a){var r=this.jb*c.x+this.ab*c.y+this.Lb;a.x=this.bb*c.x+this.eb*c.y+this.Gb,a.y=r},b.prototype.eY=function(c,a,r){for(var o=0;o<a;o++){var l=c[o].x,d=c[o].y,p=this.bb*l+this.eb*d+this.Gb;l=this.jb*l+this.ab*d+this.Lb,r[o]!=null?r[o].ma(p,l):r[o]=u.h.construct(p,l)}},b.prototype.multiply=function(c){b.multiply(this,c,this)},b.multiply=function(c,a,r){var o=c.bb*a.bb+c.jb*a.eb,l=c.eb*a.bb+c.ab*a.eb,d=c.Gb*a.bb+c.Lb*a.eb+a.Gb,p=c.bb*a.jb+c.jb*a.ab,g=c.eb*a.jb+c.ab*a.ab;c=c.Gb*a.jb+c.Lb*a.ab+a.Lb,r.bb=o,r.eb=l,r.Gb=d,r.jb=p,r.ab=g,r.Lb=c},b.prototype.Of=function(){var c=new b;return c.bb=this.bb,c.eb=this.eb,c.Gb=this.Gb,c.jb=this.jb,c.ab=this.ab,c.Lb=this.Lb,c},b.prototype.mC=function(c){if(!c.B()){for(var a=[],r=0;4>r;r++)a[r]=new u.h;c.nB(a),this.fY(a,a),c.Zw(a,4)}},b.prototype.fY=function(c,a){for(var r=0;r<c.length;r++){var o=new u.h,l=c[r];o.x=this.bb*l.x+this.eb*l.y+this.Gb,o.y=this.jb*l.x+this.ab*l.y+this.Lb,a[r]=o}},b.prototype.pS=function(c,a){c.B()||a.B()||c.R()==0||c.ca()==0?this.lx():(this.eb=this.jb=0,this.bb=a.R()/c.R(),this.ab=a.ca()/c.ca(),this.Gb=a.v-c.v*this.bb,this.Lb=a.G-c.G*this.ab)},b.prototype.dY=function(c){var a=new u.h,r=new u.h;a.ma(this.bb,this.jb),r.ma(this.eb,this.ab),a.sub(a);var o=.5*a.Sk();return a.ma(this.bb,this.jb),r.ma(this.eb,this.ab),a.add(r),c*(o>(a=.5*a.Sk())?Math.sqrt(o):Math.sqrt(a))},b.prototype.RB=function(){this.bb=1,this.jb=this.Gb=this.eb=0,this.ab=1,this.Lb=0},b.prototype.isIdentity=function(c){if(c!==void 0){var a=u.h.construct(0,1);return this.Eh(a,a),a.sub(u.h.construct(0,1)),a.Sk()>c*c?!1:(a.ma(0,0),this.Eh(a,a),!(a.Sk()>c*c)&&(a.ma(1,0),this.Eh(a,a),a.sub(u.h.construct(1,0)),a.Sk()<=c*c))}return this.bb==1&&this.ab==1&&this.eb==0&&this.Gb==0&&this.jb==0&&this.Lb==0},b.prototype.Bi=function(c){return Math.abs(this.bb*this.ab-this.jb*this.eb)<=2*c*(Math.abs(this.bb*this.ab)+Math.abs(this.jb*this.eb))},b.prototype.gg=function(c,a){this.bb=1,this.eb=0,this.Gb=c,this.jb=0,this.ab=1,this.Lb=a},b.prototype.setScale=function(c,a){a!==void 0?(this.bb=c,this.jb=this.Gb=this.eb=0,this.ab=a,this.Lb=0):this.setScale(c,c)},b.prototype.$B=function(){this.bb=0,this.eb=1,this.Gb=0,this.jb=1,this.Lb=this.ab=0},b.prototype.setRotate=function(c){this.pX(Math.cos(c),Math.sin(c))},b.prototype.pX=function(c,a){this.bb=c,this.eb=-a,this.Gb=0,this.jb=a,this.ab=c,this.Lb=0},b.prototype.shift=function(c,a){this.Gb+=c,this.Lb+=a},b.prototype.scale=function(c,a){this.bb*=c,this.eb*=c,this.Gb*=c,this.jb*=a,this.ab*=a,this.Lb*=a},b.prototype.flipX=function(c,a){this.bb=-this.bb,this.eb=-this.eb,this.Gb=c+a-this.Gb},b.prototype.flipY=function(c,a){this.jb=-this.jb,this.ab=-this.ab,this.Lb=c+a-this.Lb},b.prototype.rotate=function(c){var a=new b;a.setRotate(c),this.multiply(a)},b.prototype.inverse=function(c){if(c!==void 0){var a=this.bb*this.ab-this.eb*this.jb;a==0?c.lx():(a=1/a,c.Gb=(this.eb*this.Lb-this.Gb*this.ab)*a,c.Lb=(this.Gb*this.jb-this.bb*this.Lb)*a,c.bb=this.ab*a,c.eb=-this.eb*a,c.jb=-this.jb*a,c.ab=this.bb*a)}else this.inverse(this)},b}();u.Dd=A}(V||(V={})),function(u){var A=function(){function b(){}return b.prototype.lx=function(){this.hg=this.Lb=this.Gb=this.He=this.Fe=this.Ee=this.Ge=this.ab=this.eb=this.Ze=this.jb=this.bb=0},b.prototype.setScale=function(c,a,r){this.bb=c,this.eb=this.Ze=this.jb=0,this.ab=a,this.Fe=this.Ee=this.Ge=0,this.He=r,this.hg=this.Lb=this.Gb=0},b.prototype.setTranslate=function(c,a,r){this.bb=1,this.eb=this.Ze=this.jb=0,this.ab=1,this.Fe=this.Ee=this.Ge=0,this.He=1,this.Gb=c,this.Lb=a,this.hg=r},b.prototype.translate=function(c,a,r){this.Gb+=c,this.Lb+=a,this.hg+=r},b.prototype.mC=function(c){if(!c.B()){for(var a=new u.Nd[8],r=0;8>r;r++)a[r]=new u.Nd;c.nB(a),this.transform(a,8,a),c.Zw(a)}},b.prototype.transform=function(c,a,r){for(var o=0;o<a;o++){var l=new u.Nd,d=c[o];l.x=this.bb*d.x+this.eb*d.y+this.Ee*d.z+this.Gb,l.y=this.jb*d.x+this.ab*d.y+this.Fe*d.z+this.Lb,l.z=this.Ze*d.x+this.Ge*d.y+this.He*d.z+this.hg,r[o]=l}},b.prototype.fp=function(c){var a=new u.Nd;return a.x=this.bb*c.x+this.eb*c.y+this.Ee*c.z+this.Gb,a.y=this.jb*c.x+this.ab*c.y+this.Fe*c.z+this.Lb,a.z=this.Ze*c.x+this.Ge*c.y+this.He*c.z+this.hg,a},b.prototype.Ag=function(c){b.multiply(this,c,this)},b.multiply=function(c,a,r){var o=c.bb*a.bb+c.jb*a.eb+c.Ze*a.Ee,l=c.bb*a.jb+c.jb*a.ab+c.Ze*a.Fe,d=c.bb*a.Ze+c.jb*a.Ge+c.Ze*a.He,p=c.eb*a.bb+c.ab*a.eb+c.Ge*a.Ee,g=c.eb*a.jb+c.ab*a.ab+c.Ge*a.Fe,v=c.eb*a.Ze+c.ab*a.Ge+c.Ge*a.He,w=c.Ee*a.bb+c.Fe*a.eb+c.He*a.Ee,T=c.Ee*a.jb+c.Fe*a.ab+c.He*a.Fe,$=c.Ee*a.Ze+c.Fe*a.Ge+c.He*a.He,C=c.Gb*a.bb+c.Lb*a.eb+c.hg*a.Ee+a.Gb,O=c.Gb*a.jb+c.Lb*a.ab+c.hg*a.Fe+a.Lb;c=c.Gb*a.Ze+c.Lb*a.Ge+c.hg*a.He+a.hg,r.bb=o,r.jb=l,r.Ze=d,r.eb=p,r.ab=g,r.Ge=v,r.Ee=w,r.Fe=T,r.He=$,r.Gb=C,r.Lb=O,r.hg=c},b.inverse=function(c,a){var r=c.bb*(c.ab*c.He-c.Ge*c.Fe)-c.jb*(c.eb*c.He-c.Ge*c.Ee)+c.Ze*(c.eb*c.Fe-c.ab*c.Ee);if(r==0)throw u.i.fa("math singularity");var o=1/r;r=(c.ab*c.He-c.Ge*c.Fe)*o;var l=-(c.eb*c.He-c.Ge*c.Ee)*o,d=(c.eb*c.Fe-c.ab*c.Ee)*o,p=-(c.jb*c.He-c.Fe*c.Ze)*o,g=(c.bb*c.He-c.Ze*c.Ee)*o,v=-(c.bb*c.Fe-c.jb*c.Ee)*o,w=(c.jb*c.Ge-c.Ze*c.ab)*o,T=-(c.bb*c.Ge-c.Ze*c.eb)*o;o*=c.bb*c.ab-c.jb*c.eb;var $=-(c.Gb*r+c.Lb*l+c.hg*d),C=-(c.Gb*p+c.Lb*g+c.hg*v);c=-(c.Gb*w+c.Lb*T+c.hg*o),a.bb=r,a.jb=p,a.Ze=w,a.eb=l,a.ab=g,a.Ge=T,a.Ee=d,a.Fe=v,a.He=o,a.Gb=$,a.Lb=C,a.hg=c},b.prototype.Of=function(){var c=new b;return c.bb=this.bb,c.jb=this.jb,c.Ze=this.Ze,c.eb=this.eb,c.ab=this.ab,c.Ge=this.Ge,c.Ee=this.Ee,c.Fe=this.Fe,c.He=this.He,c.Gb=this.Gb,c.Lb=this.Lb,c.hg=this.hg,c},b}();u.JY=A}(V||(V={})),function(u){var A=function(c){function a(r){if(r!==void 0)r=c.call(this,r.cc(),r)||this;else{(r=c.call(this)||this).bg=[],r.bg[0]=0,r.Aa=1,r.uh=[];for(var o=0;10>o;o++)r.uh[o]=-1;r.uh[r.bg[0]]=0}return r.jq=!0,r}return bt(a,c),a.prototype.re=function(r){this.hasAttribute(r)||(this.uh[r]=0,this.jD())},a.prototype.removeAttribute=function(r){if(r==0)throw u.i.N("Position attribue cannot be removed");this.hasAttribute(r)&&(this.uh[r]=-1,this.jD())},a.prototype.reset=function(){this.bg[0]=0,this.Aa=1;for(var r=0;r<this.uh.length;r++)this.uh[r]=-1;this.uh[this.bg[0]]=0,this.jq=!0},a.prototype.EF=function(){return b.kz().add(this)},a.og=function(){return b.kz().$R()},a.prototype.tM=function(){var r=this.cc();return new u.ra(r,this)},a.prototype.jD=function(){for(var r=this.Aa=0,o=0;10>r;r++)0<=this.uh[r]&&(this.bg[o]=r,this.uh[r]=o,o++,this.Aa++);this.jq=!0},a.prototype.cc=function(){return this.jq&&(this.wl=this.An(),this.jq=!1),this.wl},a.prototype.Nb=function(r){if(r==null)return!1;if(r==this)return!0;if(!(r instanceof a)||r.Aa!=this.Aa)return!1;for(var o=0;o<this.Aa;o++)if(this.bg[o]!=r.bg[o])return!1;return this.jq==r.jq},a.prototype.GG=function(r){if(r.Aa!=this.Aa)return!1;for(var o=0;o<this.Aa;o++)if(this.bg[o]!=r.bg[o])return!1;return!0},a.Iw=function(r,o){for(var l=[],d=0;d<r.Aa;d++)l[d]=-1;d=0;for(var p=r.Aa;d<p;d++)l[d]=o.Pf(r.kd(d));return l},a.BR=function(r,o){return(r=new a(r)).re(o),r.EF()},a.CR=function(r,o){for(var l=null,d=0;10>d;d++)!r.hasAttribute(d)&&o.hasAttribute(d)&&(l==null&&(l=new a(r)),l.re(d));return l!=null?l.EF():r},a}(u.ra);u.ee=A;var b=function(){function c(){this.map=[];var a=new A;this.add(a),(a=new A).re(1),this.add(a)}return c.kz=function(){return c.bL},c.prototype.$R=function(){return c.ft},c.prototype.add=function(a){var r=a.cc();if(c.ft!=null&&c.ft.cc()==r&&a.GG(c.ft))return c.ft;if(c.Dw!=null&&c.Dw.cc()==r&&a.GG(c.Dw))return c.Dw;var o=null;return this.map[r]!==void 0&&(o=this.map[r]),o==null&&((o=a.tM()).Aa==1?c.ft=o:o.Aa==2&&o.kd(1)==1?c.Dw=o:this.map[r]=o),o},c.bL=new c,c}()}(V||(V={}));var jy={feet:9002,kilometers:9036,meters:9001,miles:9093,"nautical-miles":9030,yards:9096},Gy={acres:109402,ares:109463,hectares:109401,"square-feet":109405,"square-kilometers":109414,"square-meters":109404,"square-miles":109439,"square-yards":109442},Nl=new(function(){function u(){this.RM=50,this.np=new Map,this.gj=[]}return u.prototype.clear=function(){this.gj.length=0,this.np.clear()},u.prototype.delete=function(A){return!!this.np.delete(A)&&(this.gj.splice(this.gj.indexOf(A),1),!0)},u.prototype.get=function(A){var b=this.np.get(A);if(b!==void 0)return this.gj[0]!==A&&(this.gj.splice(this.gj.indexOf(A),1),this.gj.unshift(A)),b},u.prototype.has=function(A){return this.np.has(A)},u.prototype.set=function(A,b){return this.get(A)!==void 0&&this.delete(A),this.gj.unshift(A),this.np.set(A,b),this.oM(),this},u.prototype.oM=function(){for(;this.gj.length&&this.gj.length>this.RM;){var A=this.gj.pop();this.np.delete(A)}},u}()),Ce=((Xi={}).convertJSONToGeometry=function(u){return V.$b.fP(u)},Xi.hasM=function(u){return u.hasAttribute(V.Ih.M)},Xi.hasZ=function(u){return u.hasAttribute(V.Ih.Z)},Xi.getPointX=function(u){return u.Lg()},Xi.getPointY=function(u){return u.ih()},Xi.getPointZ=function(u){return u.bS()},Xi.getPointM=function(u){return u.zR()},Xi.getXMin=function(u){return u.es()},Xi.getYMin=function(u){return u.gs()},Xi.getXMax=function(u){return u.ds()},Xi.getYMax=function(u){return u.fs()},Xi.getZExtent=function(u){return u.Tg(V.Ih.Z,0)},Xi.getMExtent=function(u){return u.Tg(V.Ih.M,0)},Xi.exportPaths=function(u){var A=[],b=u.da(),c=null,a=null,r=u.hasAttribute(V.Ih.Z),o=u.hasAttribute(V.Ih.M);r&&(c=u.ub(V.Ih.Z)),o&&(a=u.ub(V.Ih.M));for(var l=new V.h,d=0;d<b;d++){for(var p=u.Ba(d),g=u.Ja(d),v=0,w=0,T=NaN,$=NaN,C=NaN,O=NaN,N=u.dc(d),R=[],F=p;F<p+g;F++){u.D(F,l),O=C=NaN;var G=[l.x,l.y];r&&(C=c.get(F),G.push(C)),o&&(O=a.get(F),G.push(O)),F==p&&N&&(v=l.x,w=l.y,T=C,$=O),R.push(G)}!N||v==l.x&&w==l.y&&(!r||isNaN(T)&&isNaN(C)||T==C)&&(!o||isNaN($)&&isNaN(O)||$==O)||R.push(R[0].slice(0)),A.push(R)}return A},Xi.exportPathsFlat=function(){},Xi.exportPoints=function(u){var A=u.hasAttribute(V.Ih.Z),b=u.hasAttribute(V.Ih.M),c=null,a=null;A&&(c=u.ub(V.Ih.Z)),b&&(a=u.ub(V.Ih.M));for(var r=new V.h,o=u.I(),l=[],d=0;d<o;d++){u.D(d,r);var p=[r.x,r.y];A&&p.push(c.get(d)),b&&p.push(a.get(d)),l.push(p)}return l},Xi.exportPointsFlat=function(){},Xi),Vc=new Map;return function(){function u(){}return u.buffer=xe,u.clip=k,u.contains=P,u.convexHull=ve,u.crosses=L,u.cut=I,u.densify=Un,u.difference=be,u.disjoint=Y,u.distance=D,u.equals=j,u.extendedSpatialReferenceInfo=E,u.generalize=Et,u.geodesicArea=Hc,u.geodesicBuffer=Be,u.geodesicDensify=Pr,u.geodesicLength=va,u.intersect=Me,u.intersects=H,u.isSimple=le,u.nearestCoordinate=ze,u.nearestVertex=it,u.nearestVertices=ti,u.offset=se,u.overlaps=te,u.planarArea=Di,u.planarLength=qi,u.relate=ie,u.simplify=pe,u.symmetricDifference=Se,u.touches=W,u.union=he,u.within=Z,u.rotate=V.Ex.rotate,u.flipHorizontal=V.Ex.JQ,u.flipVertical=V.Ex.KQ,u.intersectLinesToPoints=Z_,u.ExtendedParams=V.yC,u.clearDefaultSpatialReferenceTolerance=K_,u.changeDefaultSpatialReferenceTolerance=W_,u._enableProjection=ba,u._project=q_,u._getTransformation=Dy,u._getTransformationBySuitability=V_,u}()}var i=e();i!==void 0&&(t.exports=i)}(YA)),YA.exports}var aq=r9e();const ut=i9e(aq),s9e=n9e({__proto__:null,default:ut},[aq]),o9e=Object.freeze(Object.defineProperty({__proto__:null,G:ut,g:s9e},Symbol.toStringTag,{value:"Module"})),Tt={convertToGEGeometry:a9e,exportPoint:l9e,exportPolygon:c9e,exportPolyline:h9e,exportMultipoint:u9e,exportExtent:d9e};function a9e(t,e){if(e==null)return null;let i="cache"in e?e.cache._geVersion:void 0;return i==null&&(i=t.convertJSONToGeometry(e),"cache"in e&&(e.cache._geVersion=i)),i}function l9e(t,e,i){const n=t.hasZ(e),s=t.hasM(e),h=new Ne({x:t.getPointX(e),y:t.getPointY(e),spatialReference:i});return n&&(h.z=t.getPointZ(e)),s&&(h.m=t.getPointM(e)),h.cache._geVersion=e,h}function c9e(t,e,i){const n=new ln({rings:t.exportPaths(e),hasZ:t.hasZ(e),hasM:t.hasM(e),spatialReference:i});return n.cache._geVersion=e,n}function h9e(t,e,i){const n=new Tr({paths:t.exportPaths(e),hasZ:t.hasZ(e),hasM:t.hasM(e),spatialReference:i});return n.cache._geVersion=e,n}function u9e(t,e,i){const n=new P0({hasZ:t.hasZ(e),hasM:t.hasM(e),points:t.exportPoints(e),spatialReference:i});return n.cache._geVersion=e,n}function d9e(t,e,i){const n=t.hasZ(e),s=t.hasM(e),h=new Nt({xmin:t.getXMin(e),ymin:t.getYMin(e),xmax:t.getXMax(e),ymax:t.getYMax(e),spatialReference:i});if(n){const f=t.getZExtent(e);h.zmin=f.vmin,h.zmax=f.vmax}if(s){const f=t.getMExtent(e);h.mmin=f.vmin,h.mmax=f.vmax}return h.cache._geVersion=e,h}const p9e=Object.freeze(Object.defineProperty({__proto__:null,hydratedAdapter:Tt},Symbol.toStringTag,{value:"Module"}));function It(t){const e=Array.isArray(t)?t[0].spatialReference:t.spatialReference;return e?I0(Ke,e):Ke.WGS84}function f9e(t){return ut.extendedSpatialReferenceInfo(t)}function g9e(t,e){return ut.clip(Tt,It(t),t,e)}function m9e(t,e){return ut.cut(Tt,It(t),t,e)}function y9e(t,e){return ut.contains(Tt,It(t),t,e)}function v9e(t,e){return ut.crosses(Tt,It(t),t,e)}function lq(t,e,i){return ut.distance(Tt,It(t),t,e,i)}function b9e(t,e){return ut.equals(Tt,It(t),t,e)}function w9e(t,e){return ut.intersects(Tt,It(t),t,e)}function _9e(t,e){return ut.touches(Tt,It(t),t,e)}function x9e(t,e){return ut.within(Tt,It(t),t,e)}function S9e(t,e){return ut.disjoint(Tt,It(t),t,e)}function T9e(t,e){return ut.overlaps(Tt,It(t),t,e)}function E9e(t,e,i){return ut.relate(Tt,It(t),t,e,i)}function M9e(t){return ut.isSimple(Tt,It(t),t)}function cq(t){return ut.simplify(Tt,It(t),t)}function $9e(t,e=!1){return ut.convexHull(Tt,It(t),t,e)}function k9e(t,e){return ut.difference(Tt,It(t),t,e)}function C9e(t,e){return ut.symmetricDifference(Tt,It(t),t,e)}function I9e(t,e){return ut.intersect(Tt,It(t),t,e)}function A9e(t,e=null){return ut.union(Tt,It(t),t,e)}function O9e(t,e,i,n,s,h){return ut.offset(Tt,It(t),t,e,i,n,s,h)}function P9e(t,e,i,n=!1){return ut.buffer(Tt,It(t),t,e,i,n)}function R9e(t,e,i,n,s,h){return ut.geodesicBuffer(Tt,It(t),t,e,i,n,s,h)}function N9e(t,e,i=!0){return ut.nearestCoordinate(Tt,It(t),t,e,i)}function L9e(t,e){return ut.nearestVertex(Tt,It(t),t,e)}function D9e(t,e,i,n){return ut.nearestVertices(Tt,It(t),t,e,i,n)}function g7(t){var e;return"xmin"in t?"center"in t?t.center:null:"x"in t?t:"extent"in t?((e=t.extent)==null?void 0:e.center)??null:null}function z9e(t,e,i){if(t==null)throw new E0;const n=t.spatialReference;if((i=i??g7(t))==null)throw new E0;const s=t.constructor.fromJSON(ut.rotate(t,e,i));return s.spatialReference=n,s}function F9e(t,e){if(t==null)throw new E0;const i=t.spatialReference;if((e=e??g7(t))==null)throw new E0;const n=t.constructor.fromJSON(ut.flipHorizontal(t,e));return n.spatialReference=i,n}function j9e(t,e){if(t==null)throw new E0;const i=t.spatialReference;if((e=e??g7(t))==null)throw new E0;const n=t.constructor.fromJSON(ut.flipVertical(t,e));return n.spatialReference=i,n}function G9e(t,e,i,n){return ut.generalize(Tt,It(t),t,e,i,n)}function U9e(t,e,i){return ut.densify(Tt,It(t),t,e,i)}function B9e(t,e,i,n=0){return ut.geodesicDensify(Tt,It(t),t,e,i,n)}function H9e(t,e){return ut.planarArea(Tt,It(t),t,e)}function V9e(t,e){return ut.planarLength(Tt,It(t),t,e)}function q9e(t,e,i){return ut.geodesicArea(Tt,It(t),t,e,i)}function W9e(t,e,i){return ut.geodesicLength(Tt,It(t),t,e,i)}function K9e(t,e){return ut.intersectLinesToPoints(Tt,It(t),t,e)}function Z9e(t,e){ut.changeDefaultSpatialReferenceTolerance(t,e)}function J9e(t){ut.clearDefaultSpatialReferenceTolerance(t)}let E0=class extends Error{constructor(){super("Illegal Argument Exception")}};const iRe=Object.freeze(Object.defineProperty({__proto__:null,buffer:P9e,changeDefaultSpatialReferenceTolerance:Z9e,clearDefaultSpatialReferenceTolerance:J9e,clip:g9e,contains:y9e,convexHull:$9e,crosses:v9e,cut:m9e,densify:U9e,difference:k9e,disjoint:S9e,distance:lq,equals:b9e,extendedSpatialReferenceInfo:f9e,flipHorizontal:F9e,flipVertical:j9e,generalize:G9e,geodesicArea:q9e,geodesicBuffer:R9e,geodesicDensify:B9e,geodesicLength:W9e,intersect:I9e,intersectLinesToPoints:K9e,intersects:w9e,isSimple:M9e,nearestCoordinate:N9e,nearestVertex:L9e,nearestVertices:D9e,offset:O9e,overlaps:T9e,planarArea:H9e,planarLength:V9e,relate:E9e,rotate:z9e,simplify:cq,symmetricDifference:C9e,touches:_9e,union:A9e,within:x9e},Symbol.toStringTag,{value:"Module"}));function Y9e(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function hq(t,e,i){i*=.5;const n=Math.sin(i);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(i),t}function X9e(t,e){const i=2*Math.acos(e[3]),n=Math.sin(i/2);return n>Ni()?(t[0]=e[0]/n,t[1]=e[1]/n,t[2]=e[2]/n):(t[0]=1,t[1]=0,t[2]=0),i}function uq(t,e,i){const n=e[0],s=e[1],h=e[2],f=e[3],m=i[0],y=i[1],x=i[2],E=i[3];return t[0]=n*E+f*m+s*x-h*y,t[1]=s*E+f*y+h*m-n*x,t[2]=h*E+f*x+n*y-s*m,t[3]=f*E-n*m-s*y-h*x,t}function Q9e(t,e,i){i*=.5;const n=e[0],s=e[1],h=e[2],f=e[3],m=Math.sin(i),y=Math.cos(i);return t[0]=n*y+f*m,t[1]=s*y+h*m,t[2]=h*y-s*m,t[3]=f*y-n*m,t}function e4e(t,e,i){i*=.5;const n=e[0],s=e[1],h=e[2],f=e[3],m=Math.sin(i),y=Math.cos(i);return t[0]=n*y-h*m,t[1]=s*y+f*m,t[2]=h*y+n*m,t[3]=f*y-s*m,t}function t4e(t,e,i){i*=.5;const n=e[0],s=e[1],h=e[2],f=e[3],m=Math.sin(i),y=Math.cos(i);return t[0]=n*y+s*m,t[1]=s*y-n*m,t[2]=h*y+f*m,t[3]=f*y-h*m,t}function i4e(t,e){const i=e[0],n=e[1],s=e[2];return t[0]=i,t[1]=n,t[2]=s,t[3]=Math.sqrt(Math.abs(1-i*i-n*n-s*s)),t}function d2(t,e,i,n){const s=e[0],h=e[1],f=e[2],m=e[3];let y,x,E,k,I,P=i[0],L=i[1],D=i[2],j=i[3];return x=s*P+h*L+f*D+m*j,x<0&&(x=-x,P=-P,L=-L,D=-D,j=-j),1-x>Ni()?(y=Math.acos(x),E=Math.sin(y),k=Math.sin((1-n)*y)/E,I=Math.sin(n*y)/E):(k=1-n,I=n),t[0]=k*s+I*P,t[1]=k*h+I*L,t[2]=k*f+I*D,t[3]=k*m+I*j,t}function n4e(t){const e=hy,i=e(),n=e(),s=e(),h=Math.sqrt(1-i),f=Math.sqrt(i);return t[0]=h*Math.sin(2*Math.PI*n),t[1]=h*Math.cos(2*Math.PI*n),t[2]=f*Math.sin(2*Math.PI*s),t[3]=f*Math.cos(2*Math.PI*s),t}function dq(t,e){const i=e[0],n=e[1],s=e[2],h=e[3],f=i*i+n*n+s*s+h*h,m=f?1/f:0;return t[0]=-i*m,t[1]=-n*m,t[2]=-s*m,t[3]=h*m,t}function r4e(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function pq(t,e){const i=e[0]+e[4]+e[8];let n;if(i>0)n=Math.sqrt(i+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{let s=0;e[4]>e[0]&&(s=1),e[8]>e[3*s+s]&&(s=2);const h=(s+1)%3,f=(s+2)%3;n=Math.sqrt(e[3*s+s]-e[3*h+h]-e[3*f+f]+1),t[s]=.5*n,n=.5/n,t[3]=(e[3*h+f]-e[3*f+h])*n,t[h]=(e[3*h+s]+e[3*s+h])*n,t[f]=(e[3*f+s]+e[3*s+f])*n}return t}function s4e(t,e,i,n){const s=.5*Math.PI/180;e*=s,i*=s,n*=s;const h=Math.sin(e),f=Math.cos(e),m=Math.sin(i),y=Math.cos(i),x=Math.sin(n),E=Math.cos(n);return t[0]=h*y*E-f*m*x,t[1]=f*m*E+h*y*x,t[2]=f*y*x-h*m*E,t[3]=f*y*E+h*m*x,t}function o4e(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}const a4e=S0,l4e=qM,c4e=NH,h4e=uq,u4e=FH,d4e=ZM,p4e=JM,fq=WM,f4e=fq,gq=KM,g4e=gq,m7=UH,m4e=BH,y4e=Oy;function mq(t,e,i){const n=vt(e,i);return n<-.999999?(Zi(Ea,v4e,e),dG(Ea)<1e-6&&Zi(Ea,b4e,e),wn(Ea,Ea),hq(t,Ea,Math.PI),t):n>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(Zi(Ea,e,i),t[0]=Ea[0],t[1]=Ea[1],t[2]=Ea[2],t[3]=1+n,m7(t,t))}const Ea=Te(),v4e=Mr(1,0,0),b4e=Mr(0,1,0);function w4e(t,e,i,n,s,h){return d2(XA,e,s,h),d2(QA,i,n,h),d2(t,XA,QA,2*h*(1-h)),t}const XA=np(),QA=np();function _4e(t,e,i,n){const s=x4e;return s[0]=i[0],s[3]=i[1],s[6]=i[2],s[1]=n[0],s[4]=n[1],s[7]=n[2],s[2]=-e[0],s[5]=-e[1],s[8]=-e[2],m7(t,pq(t,s))}const x4e=k_();Object.freeze(Object.defineProperty({__proto__:null,add:c4e,calculateW:i4e,conjugate:r4e,copy:a4e,dot:d4e,equals:y4e,exactEquals:m4e,fromEuler:s4e,fromMat3:pq,getAxisAngle:X9e,identity:Y9e,invert:dq,len:f4e,length:fq,lerp:p4e,mul:h4e,multiply:uq,normalize:m7,random:n4e,rotateX:Q9e,rotateY:e4e,rotateZ:t4e,rotationTo:mq,scale:u4e,set:l4e,setAxes:_4e,setAxisAngle:hq,slerp:d2,sqlerp:w4e,sqrLen:g4e,squaredLength:gq,str:o4e},Symbol.toStringTag,{value:"Module"}));function e3(t,e,i=null){return i!=null?[t,e,i]:[t,e]}function si(t,e,i=null){return i!=null?{x:t,y:e,z:i}:{x:t,y:e}}let yq=class{constructor(e){this.spatialReference=e}mapToLocalMultiple(e){return e.map(i=>this.mapToLocal(i)).filter(Yi)}get doUnnormalization(){return!1}};class vq extends yq{constructor(e,i,n=null){super(i),this._defaultZ=n,this.transform=oa(),this.transformInv=oa(),this.transform=$j(e),i_(this.transformInv,this.transform)}makeMapPoint(e,i){return e3(e,i,this._defaultZ)}mapToLocal(e){return si(this.transform[0]*e[0]+this.transform[2]*e[1]+this.transform[4],this.transform[1]*e[0]+this.transform[3]*e[1]+this.transform[5])}localToMap(e){return e3(this.transformInv[0]*e.x+this.transformInv[2]*e.y+this.transformInv[4],this.transformInv[1]*e.x+this.transformInv[3]*e.y+this.transformInv[5],this._defaultZ)}}let S4e=class extends yq{constructor(e,i){super(e.spatialReference),this.view=e,this.defaultZ=null,this.pWS=Te(),this.tangentFrameUpWS=Te(),this.tangentFrameRightWS=Te(),this.tangentFrameForwardWS=Te(),this.localFrameRightWS=Te(),this.localFrameUpWS=Te(),this.worldToLocalTransform=np(),this.localToWorldTransform=np(),this.scale=1,this.scale=e.resolution,this.referenceMapPoint=i,this.defaultZ=i.hasZ?i.z:null;const n=e.state.camera.viewRight;this.view.renderCoordsHelper.toRenderCoords(this.referenceMapPoint,this.pWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,ia.X,this.tangentFrameRightWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,ia.Y,this.tangentFrameUpWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,ia.Z,this.tangentFrameForwardWS);const s=Te();Cr(s,this.tangentFrameForwardWS,vt(n,this.tangentFrameForwardWS)),Ei(this.localFrameRightWS,n,s),wn(this.localFrameRightWS,this.localFrameRightWS),Zi(this.localFrameUpWS,this.tangentFrameForwardWS,this.localFrameRightWS),mq(this.worldToLocalTransform,this.localFrameRightWS,this.tangentFrameRightWS),dq(this.localToWorldTransform,this.worldToLocalTransform)}get doUnnormalization(){return this.view.viewingMode==="global"}makeMapPoint(e,i){return e3(e,i,this.defaultZ)}mapToLocal(e){const i=Te();this.view.renderCoordsHelper.toRenderCoords(new Ne({x:e[0],y:e[1],spatialReference:this.spatialReference}),i),YS(i,i,this.worldToLocalTransform);const n=this.view.renderCoordsHelper.fromRenderCoords(i,new Ne({spatialReference:this.view.spatialReference}));return n!=null?si(n.x/this.scale,n.y/this.scale):null}localToMap(e){const i=Te();this.view.renderCoordsHelper.toRenderCoords(new Ne({x:e.x*this.scale,y:e.y*this.scale,spatialReference:this.spatialReference}),i),YS(i,i,this.localToWorldTransform);const n=this.view.renderCoordsHelper.fromRenderCoords(i,new Ne({spatialReference:this.view.spatialReference}));return n!=null?e3(n.x,n.y,this.defaultZ):null}};function sRe(t,e){if(t.type==="2d")return new vq(t.state.transform,t.spatialReference,e.length>2?e[2]:null);if(t.type==="3d"){const i=e.length>2?new Ne({x:e[0],y:e[1],z:e[2],spatialReference:t.spatialReference}):new Ne({x:e[0],y:e[1],spatialReference:t.spatialReference});return new S4e(t,i)}return null}function Pd(t,e){const i=new Ne({x:t[0],y:t[1],spatialReference:e});return t.length>2&&(i.z=t[2]),i}function oRe(t,e){return new P0({points:t,spatialReference:e})}function aRe(t,e,i){const n=new Tr({paths:t,spatialReference:e});return i&&pN(n),n}function B_(t,e,i,n=!0){const s=_e(t);s.forEach(f=>{const m=f[0],y=f[f.length-1];fl(m,y)&&f.length!==1||f.push(f[0])});let h=new ln({rings:s,spatialReference:e});return h.rings.forEach(f=>{x3(f)||f.reverse()}),i&&pN(h),n&&h.isSelfIntersecting&&Sr(e)&&(h=cq(h)),h}function T4e(t,e,i){const n=e.mapToLocalMultiple(t),s=[],h={x:n[0].x,y:n[0].y},f={x:n[1].x,y:n[1].y},m=Math.round(f.x-h.x),y=Math.round(f.y-h.y),x=Math.max(Math.abs(m),Math.abs(y));if(i){const E={x:h.x+x,y:h.y+x},k={x:h.x-x,y:h.y-x};s.push(si(E.x,k.y),si(k.x,k.y),si(k.x,E.y),si(E.x,E.y))}else{const E={x:m>0?h.x+x:h.x-x,y:y>0?h.y+x:h.y-x};s.push(si(h.x,h.y),si(E.x,h.y),si(E.x,E.y),si(h.x,E.y))}return bq(B_([s.map(E=>e.localToMap(E)).filter(Yi)],e.spatialReference,e.doUnnormalization,!0),s,e)}function E4e(t,e,i){let n=e.mapToLocalMultiple(t);if(n.length===1){const y=n[0];n=[si(y.x-48,y.y+48),si(y.x+48,y.y-48),si(y.x+48,y.y-48),si(y.x-48,y.y+48)]}const s=[],h={x:n[0].x,y:n[0].y},f={x:n[1].x,y:n[1].y};if(i){const m=Math.round(f.x-h.x),y=Math.round(f.y-h.y);s.push(si(h.x-m,h.y-y),si(f.x,h.y-y),si(f.x,f.y),si(h.x-m,f.y))}else s.push(si(h.x,h.y),si(f.x,h.y),si(f.x,f.y),si(h.x,f.y));return bq(B_([s.map(m=>e.localToMap(m)).filter(Yi)],e.spatialReference,e.doUnnormalization,!0),s,e)}function bq(t,e,i){const n=qv(e[3],e[2],i),s=qv(e[1],e[2],i),h=qv(e[0],e[1],i),f=qv(e[0],e[3],i);return{geometry:t,midpoints:n!=null&&s!=null&&h!=null&&f!=null?{top:n,right:s,bottom:h,left:f}:null}}function qv(t,e,i){Fp[0]=t.x,Fp[1]=t.y,Fp[2]=0,jp[0]=e.x,jp[1]=e.y,jp[2]=0,H0(Fp,Fp,jp,.5),Wv.x=Fp[0],Wv.y=jp[1],Wv.z=jp[2];const n=i.localToMap(Wv);return n!=null?Pd(n,i.spatialReference):null}const Wv=si(0,0,0),Fp=Te(),jp=Te();function M4e(t,e,i,n){const s=e.mapToLocalMultiple(t);let h=null,f=null;if(i)h=s[0],f=s[1];else{const L=s[0],D=s[1],j=Math.round(D.x-L.x),H=Math.round(D.y-L.y),W=Math.max(Math.abs(j),Math.abs(H));h=si(j>0?L.x+W/2:L.x-W/2,H>0?L.y+W/2:L.y-W/2),f=si(Math.abs(j)>Math.abs(H)?h.x-W/2:h.x,Math.abs(j)>Math.abs(H)?h.y:h.y-W/2)}const m=e.localToMap(h),y=e.localToMap(f);if(m==null||y==null)return null;e.doUnnormalization&&fN([[m,y]],e.spatialReference);const x=Pd(m,e.spatialReference),E=Pd(y,e.spatialReference),k=kr(e.spatialReference);let I=0;if(Sr(e.spatialReference))I=k*lq(x,E,null);else{const L=h.x-f.x,D=h.y-f.y;I=k*Math.sqrt(L*L+D*D)*(n||1)}const P=new t9e({center:x,radius:I,radiusUnit:"meters",spatialReference:e.spatialReference});return{geometry:B_(P.rings,P.spatialReference,!1),center:x,edge:E}}function $4e(t,e,i){const n=e.mapToLocalMultiple(t),s=n[0],h=n[1],f=Math.round(h.x-s.x),m=Math.round(h.y-s.y),y=si(i?s.x:s.x+f/2,i?s.y:s.y+m/2),x=i?f:f/2,E=i?m:m/2,k=60,I=[],P=2*Math.PI/k;function L(ie){const le=Math.cos(ie),pe=Math.sin(ie);return si(x*le+y.x,E*pe+y.y)}for(let ie=0;ie<k;ie++)I.push(L(ie*P));I.push(I[0]);const{spatialReference:D,doUnnormalization:j}=e,H=B_([I.map(ie=>e.localToMap(ie)).filter(Yi)],D,j,!1),W=e.localToMap(L(Math.PI/2)),Z=e.localToMap(L(0)),Y=e.localToMap(L(-Math.PI/2)),te=e.localToMap(L(Math.PI));return{geometry:H,midpoints:W!=null&&Z!=null&&Y!=null&&te!=null?{top:Pd(W,D),right:Pd(Z,D),bottom:Pd(Y,D),left:Pd(te,D)}:null}}var Ed;(function(t){t[t.WhenToolEditable=0]="WhenToolEditable",t[t.WhenToolNotEditable=1]="WhenToolNotEditable",t[t.Always=2]="Always"})(Ed||(Ed={}));let k4e=class{constructor(){this._isToolEditable=!0,this._manipulators=new Pe,this._resourceContexts={manipulator3D:{}},this._attached=!1}set isToolEditable(e){this._isToolEditable=e}get length(){return this._manipulators.length}add(e,i=Ed.WhenToolEditable){this.addMany([e],i)}addMany(e,i=Ed.WhenToolEditable){for(const n of e){const s={manipulator:n,visibilityPredicate:i,attached:!1};this._manipulators.add(s),this._attached&&this._updateManipulatorAttachment(s)}}remove(e){for(let i=0;i<this._manipulators.length;i++)if(this._manipulators.at(i).manipulator===e){const n=this._manipulators.splice(i,1)[0];this._detachManipulator(n);break}}removeAll(){this._manipulators.forEach(e=>{this._detachManipulator(e)}),this._manipulators.removeAll()}attach(){this._manipulators.forEach(e=>{this._updateManipulatorAttachment(e)}),this._attached=!0}detach(){this._manipulators.forEach(e=>{this._detachManipulator(e)}),this._attached=!1}destroy(){this.detach(),this._manipulators.forEach(({manipulator:e})=>e.destroy()),this._manipulators.destroy(),this._resourceContexts=null}on(e,i){return this._manipulators.on(e,n=>{i(n)})}forEach(e){for(const i of this._manipulators.items)e(i)}some(e){return this._manipulators.items.some(e)}toArray(){const e=[];return this.forEach(i=>e.push(i.manipulator)),e}intersect(e,i){let n=null,s=Number.MAX_VALUE;return this._manipulators.forEach(({manipulator:h,attached:f})=>{if(!f||!h.interactive)return;const m=h.intersectionDistance(e,i);m!=null&&m<s&&(s=m,n=h)}),n}_updateManipulatorAttachment(e){this._isManipulatorItemVisible(e)?this._attachManipulator(e):this._detachManipulator(e)}_attachManipulator(e){e.attached||(e.manipulator.attach&&e.manipulator.attach(this._resourceContexts),e.attached=!0)}_detachManipulator(e){if(!e.attached)return;const i=e.manipulator;i.grabbing=!1,i.dragging=!1,i.hovering=!1,i.selected=!1,i.detach&&i.detach(this._resourceContexts),e.attached=!1}_isManipulatorItemVisible(e){return e.visibilityPredicate===Ed.Always||(this._isToolEditable?e.visibilityPredicate===Ed.WhenToolEditable:e.visibilityPredicate===Ed.WhenToolNotEditable)}},Ln=class extends Oe{constructor(e){super(e),this.manipulators=new k4e,this.automaticManipulatorSelection=!0,this.hasGrabbedManipulators=!1,this.hasHoveredManipulators=!1,this.firstGrabbedManipulator=null,this.created=!1,this.removeIncompleteOnCancel=!0,this._editableFlags=new Map([[oo.MANAGER,!0],[oo.USER,!0]]),this._creationFinishedResolver=Rs()}get active(){return this.view!=null&&this.view.activeTool===this}set visible(e){this._get("visible")!==e&&(this._set("visible",e),this._syncVisible())}get editable(){return this.getEditableFlag(oo.USER)}set editable(e){this.setEditableFlag(oo.USER,e)}get updating(){return!1}get cursor(){return null}get hasFocusedManipulators(){return this.hasGrabbedManipulators||this.hasHoveredManipulators}destroy(){this.manipulators.destroy(),this._set("view",null)}onAdd(){this._syncVisible()}activate(){this.view!=null&&(this.view.focus(),this.onActivate())}deactivate(){this.onDeactivate()}handleInputEvent(e){this.onInputEvent(e)}handleInputEventAfter(e){this.onInputEventAfter(e)}setEditableFlag(e,i){this._editableFlags.set(e,i),this.manipulators.isToolEditable=this.internallyEditable,this._updateManipulatorAttachment(),e===oo.USER&&this.notifyChange("editable"),this.onEditableChange(),this.onManipulatorSelectionChanged()}getEditableFlag(e){return this._editableFlags.get(e)??!1}endDrag(){const e=this.view.inputManager.latestPointerLocation;if(!e)return;let i=!1;this.manipulators.forEach(({manipulator:n})=>{n.dragging&&(i=!0,n.events.emit("drag",{action:"end",start:e,screenPoint:e}))}),i&&(this.view.toolViewManager.activeTool=null)}whenCreated(){return this._creationFinishedResolver.promise}onManipulatorSelectionChanged(){}onActivate(){}onDeactivate(){}onShow(){}onHide(){}onEditableChange(){}onInputEvent(e){}onInputEventAfter(e){}get internallyEditable(){return this.getEditableFlag(oo.USER)&&this.getEditableFlag(oo.MANAGER)}finishToolCreation(){this.created||this._creationFinishedResolver.resolve(this),this._set("created",!0)}_syncVisible(){if(this.initialized){if(this.visible)this._show();else if(this._hide(),this.active)return void(this.view.activeTool=null)}}_show(){this._updateManipulatorAttachment(),this.onShow()}_hide(){this._updateManipulatorAttachment(),this.onHide()}_updateManipulatorAttachment(){this.visible?this.manipulators.attach():this.manipulators.detach()}};_([S({constructOnly:!0})],Ln.prototype,"view",void 0),_([S({readOnly:!0})],Ln.prototype,"active",null),_([S({value:!0})],Ln.prototype,"visible",null),_([S({value:!0})],Ln.prototype,"editable",null),_([S({readOnly:!0})],Ln.prototype,"manipulators",void 0),_([S({readOnly:!0})],Ln.prototype,"updating",null),_([S()],Ln.prototype,"cursor",null),_([S({readOnly:!0})],Ln.prototype,"automaticManipulatorSelection",void 0),_([S()],Ln.prototype,"hasFocusedManipulators",null),_([S()],Ln.prototype,"hasGrabbedManipulators",void 0),_([S()],Ln.prototype,"hasHoveredManipulators",void 0),_([S()],Ln.prototype,"firstGrabbedManipulator",void 0),_([S({readOnly:!0})],Ln.prototype,"created",void 0),_([S({readOnly:!0})],Ln.prototype,"removeIncompleteOnCancel",void 0),Ln=_([J("esri.views.interactive.InteractiveToolBase")],Ln);let vr=class extends Oe{constructor(e){super(e),this.coordinates=void 0,this.strokeDash=[],this.strokeWidth=1,this.strokeColor=[0,0,0,1],this.strokeDashColor=[255,255,255,1],this.fillColor=[0,0,0,0],this.visible=!0,this.isDecoration=!0}get _strokeStyle(){const e=this.strokeColor;return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]})`}get _strokeBackgroundStyle(){const e=this.strokeDashColor;return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]})`}get _fillStyle(){const e=this.fillColor;return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]})`}get _renderCoordinates(){const e=[];if(!this.coordinates)return{coordinates:e,rect:q2};const i=BX(FX(an(q2),this.coordinates),2*this.strokeWidth);i[0]=Math.floor(i[0]),i[1]=Math.floor(i[1]),i[2]=Math.ceil(i[2]+.5),i[3]=Math.ceil(i[3]+.5);for(const n of this.coordinates)e.push([Math.floor(n[0]-i[0])+.5,Math.floor(n[1]-i[1])+.5]);return e.reverse(),{coordinates:e,rect:i}}render(){const{coordinates:e,rect:i}=this._renderCoordinates,n=qT(i),s=WT(i);return re("div",{classes:{"esri-outline-overlay-item":!0},styles:{left:i[0]+"px",top:i[1]+"px",width:n+"px",height:s+"px",visibility:this.visible?"visible":"hidden"}},re("svg",{height:s,styles:{display:"block"},width:n},re("polygon",{fill:this._fillStyle,points:e.map(([h,f])=>`${h},${f}`).join(" "),stroke:this._strokeBackgroundStyle,"stroke-width":this.strokeWidth}),re("polygon",{fill:"transparent",points:e.map(([h,f])=>`${h},${f}`).join(" "),stroke:this._strokeStyle,"stroke-dasharray":this.strokeDash.length?this.strokeDash.join(" "):void 0,"stroke-width":this.strokeWidth})))}renderCanvas(){}};_([S()],vr.prototype,"coordinates",void 0),_([S()],vr.prototype,"strokeDash",void 0),_([S()],vr.prototype,"strokeWidth",void 0),_([S()],vr.prototype,"strokeColor",void 0),_([S()],vr.prototype,"strokeDashColor",void 0),_([S()],vr.prototype,"fillColor",void 0),_([S()],vr.prototype,"visible",void 0),_([S()],vr.prototype,"isDecoration",void 0),_([S({readOnly:!0})],vr.prototype,"_strokeStyle",null),_([S({readOnly:!0})],vr.prototype,"_strokeBackgroundStyle",null),_([S({readOnly:!0})],vr.prototype,"_fillStyle",null),_([S({readOnly:!0})],vr.prototype,"_renderCoordinates",null),vr=_([J("esri.views.overlay.OutlineOverlayItem")],vr);const C4e=vr;let vs=class extends un.EventedMixin(Ln){constructor(e){super(e),this._overlayItem=void 0,this.geometryType=null,this.mode=null,this.type="draw-screen"}initialize(){this.drawOperation=this._makeDrawOperation();const e=i=>this.drawOperation.on(i,n=>{this._updateVisuals(),this.emit(i,n)});this.addHandles([e("vertex-add"),e("vertex-remove"),e("vertex-update"),e("cursor-update"),e("complete")]),this.finishToolCreation()}destroy(){this.drawOperation=mt(this.drawOperation),this._set("view",null)}get canRedo(){return this.drawOperation.canRedo}get canUndo(){return this.drawOperation.canUndo}set centeredToggled(e){this._set("centeredToggled",e),this._updateVisuals()}set enabled(e){this.drawOperation.interactive=e,this._set("enabled",e)}set uniformSizeToggled(e){this._set("uniformSizeToggled",e),this._updateVisuals()}get updating(){var e;return((e=this.drawOperation)==null?void 0:e.updating)??!1}get cursor(){return this.geometryType==="point"?"default":"crosshair"}completeCreateOperation(){this.drawOperation.complete()}onInputEvent(e){this.destroyed||this.drawOperation.onInputEvent(e)}redo(){this.drawOperation.redo()}undo(){this.drawOperation.undo()}reset(){}_makeDrawOperation(){const{view:e}=this;return new pt({view:e,manipulators:this.manipulators,geometryType:I4e(this.geometryType),drawingMode:this.mode,hasZ:!1,defaultZ:0,snapToSceneEnabled:!1,drawSurface:new H6,hasM:!1,snappingManager:null,snappingVisualizer:null,graphic:null,cursor:this.cursor})}get coordinates(){var f,m,y;const{drawOperation:e}=this;if(!(e!=null&&e.geometryIncludingUncommittedVertices.length))return[];const{coordinateHelper:i}=e,n=e.committableVertex,s=e.committedVertices.slice();n!=null&&s.push(i.pointToArray(n));const h=s.length;switch(this.geometryType){case"circle":case"rectangle":{const x=new vq(kj,H6.spatialReference),E=this.geometryType==="circle"?M4e:T4e,k=this.geometryType==="circle"?$4e:E4e;if(h===1&&e.isCompleted){const I=s[0],P=x.makeMapPoint(I[0]+A4e,I[1]);return((f=E([I,P],x,!0))==null?void 0:f.geometry.rings[0])??[]}if(h===2){const I=this.geometryType!=="rectangle",P=this.centeredToggled!==I,L=this.geometryType!=="rectangle";return(this.uniformSizeToggled!==L?(m=E(s,x,P))==null?void 0:m.geometry.rings[0]:(y=k(s,x,P))==null?void 0:y.geometry.rings[0])??[]}return[]}}return s}_updateVisuals(){var e;if(!this._overlayItem){const i=new C4e({strokeDash:[5],strokeDashColor:[255,255,255,255]});(e=this.view.overlay)==null||e.addItem(i),this.addHandles(ct(()=>{var n;(n=this.view.overlay)==null||n.removeItem(i),i==null||i.destroy(),this._overlayItem=void 0})),this._overlayItem=i}this._overlayItem.coordinates=this.coordinates}onDeactivate(){this.drawOperation.isCompleted||this.drawOperation.cancel()}};function I4e(t){switch(t){case"polygon":case"point":return t;case"circle":case"rectangle":return"segment"}}_([S({value:!1})],vs.prototype,"centeredToggled",null),_([S()],vs.prototype,"drawOperation",void 0),_([S({value:!0})],vs.prototype,"enabled",null),_([S({value:!1})],vs.prototype,"uniformSizeToggled",null),_([S({constructOnly:!0})],vs.prototype,"geometryType",void 0),_([S({constructOnly:!0})],vs.prototype,"mode",void 0),_([S({readOnly:!0})],vs.prototype,"type",void 0),_([S({readOnly:!0})],vs.prototype,"updating",null),_([S({constructOnly:!0,nonNullable:!0})],vs.prototype,"view",void 0),_([S()],vs.prototype,"cursor",null),vs=_([J("esri.views.draw.DrawScreenTool")],vs);const A4e=48;function Ex(t,e){return e?"xoffset"in e&&e.xoffset?Math.max(t,Math.abs(e.xoffset)):"yoffset"in e&&e.yoffset?Math.max(t,Math.abs(e.yoffset||0)):t:t}function O4e(t){let e=0,i=0;for(let n=0;n<t.length;n++){const s=t[n].size;typeof s=="number"&&(e+=s,i++)}return e/i}function eO(t,e){var i;return typeof t=="number"?t:(i=t==null?void 0:t.stops)!=null&&i.length?O4e(t.stops):e}function P4e(t,e){if(!e)return t;const i=e.filter(f=>f.type==="size").map(f=>{const{maxSize:m,minSize:y}=f;return(eO(m,t)+eO(y,t))/2});let n=0;const s=i.length;if(s===0)return t;for(let f=0;f<s;f++)n+=i[f];const h=Math.floor(n/s);return Math.max(h,t)}function wq(t){var h;const e=t==null?void 0:t.renderer,i=t==null?void 0:t.pointerType,n=i==="touch"?9:6;if(!e)return n;const s="visualVariables"in e?P4e(n,e.visualVariables):n;if(e.type==="simple")return Ex(s,e.symbol);if(e.type==="unique-value"){let f=s;return(h=e.uniqueValueInfos)==null||h.forEach(m=>{f=Ex(f,m.symbol)}),f}if(e.type==="class-breaks"){let f=s;return e.classBreakInfos.forEach(m=>{f=Ex(f,m.symbol)}),f}return e.type==="dot-density"||e.type,s}function _q(t,e,i,n=new Nt){let s=0;if(i.type==="2d")s=e*(i.resolution??0);else if(i.type==="3d"){const E=i.overlayPixelSizeInMapUnits(t),k=i.basemapSpatialReference;s=k==null||k.equals(i.spatialReference)?e*E:kr(k)/kr(i.spatialReference)}const h=t.x-s,f=t.y-s,m=t.x+s,y=t.y+s,{spatialReference:x}=i;return n.xmin=Math.min(h,m),n.ymin=Math.min(f,y),n.xmax=Math.max(h,m),n.ymax=Math.max(f,y),n.spatialReference=x,n}function dRe(t,e,i){const n=i.toMap(t);return n==null?!1:_q(n,wq(),i,R4e).intersects(e)}const R4e=new Nt;async function N4e(){return ge(()=>import("./geometryEngineJSON-DoX2EDjQ.js").then(t=>t.g),__vite__mapDeps([8,9]),import.meta.url)}async function L4e(){return N4e().then(({contains:t,intersects:e,overlaps:i,simplify:n})=>({contains:t,intersects:e,overlaps:i,simplify:n}))}async function D4e(t){const{currentSelection:e,selector:i,signal:n,sources:s,view:h}=t;if(!(s!=null&&s.length))return{added:[],removed:[]};const{layers:f,layerViews:m,graphicsLayers:y}=G4e(s),x=(await Qm(Promise.all([F4e(i,f,h,n),j4e(i,m,h,n),z4e(i,y,h)]),n)).flat();if(!e)return{added:x,removed:[]};const E=e.toArray(),k=x.filter(P=>!tO(E,P)),I=E.filter(P=>!tO(x,P));return e.removeMany(I),e.addMany(k),{added:k,removed:I}}const z4e=async(t,e,i)=>V4e({candidates:e.flatMap(n=>n.graphics.toArray())??[],selector:t,view:i}),F4e=async(t,e,i,n)=>{const s=await Yr(B4e({selector:t,signal:n,layers:e,view:i}));return s?xq(s):[]},j4e=async(t,e,i,n)=>{const s=await Yr(U4e({selector:t,signal:n,layerViews:e,view:i}));return s?xq(s):[]};function xq(t){const e=[];for(let i=0;i<t.length;i++){const n=t[i];n.status==="fulfilled"&&e.push(...n.value)}return e}function G4e(t){const e=[],i=[],n=[];return t.forEach(s=>{var h,f;sse(s)?e.push(s):(oz(s)||az(s))&&((h=s.layers)!=null&&h.length)?e.push(...s.layers.toArray()):ase(s)&&((f=s.sublayers)!=null&&f.length)?n.push(...s.sublayers.toArray()):ose(s)?n.push(s):r2(s)&&i.push(s)}),{layers:e,layerViews:i,graphicsLayers:n}}function tO(t,e){if(t.includes(e))return!0;const i=e.getObjectId(),n=i!=null,{layer:s,uid:h}=e;return n?t.some(f=>{if(s===f.layer)return i===f.getObjectId()}):t.some(f=>{if(s===f.layer)return h===f.uid})}async function U4e(t){const{layerViews:e,selector:i,signal:n,view:s}=t;return Qm(Promise.allSettled(e.map(async h=>{const f=h.createQuery(),{geometry:m}=Sq(i,h.layer,s);return f.outFields=["*"],f.geometry=m,f.returnGeometry=!0,f.outSpatialReference=s.spatialReference,h.queryFeatures(f,{signal:n}).then(({features:y})=>y)})),n)}async function B4e(t){const{layers:e,selector:i,signal:n,view:s}=t;return Qm(Promise.allSettled(e.map(async h=>h.queryFeatures(H4e(h.createQuery(),i,h,s),{signal:n}).then(({features:f})=>f))),n)}function Sq(t,e,i){const n="displayField"in e?e.displayField:null,s=Eae({displayField:n,fields:e.fields}),h=[e.objectIdField];s!=null&&e.fieldsIndex.has(s)&&h.push(s);const f="renderer"in e?wq({renderer:e.renderer}):0;return{geometry:t.type==="point"?_q(t,f,i):t,outFields:h}}function H4e(t,e,i,n){const{outFields:s,geometry:h}=Sq(e,i,n);return t.outFields=s,t.geometry=h,t.returnGeometry=!0,t.outSpatialReference=n.spatialReference,t}async function V4e(t){const{selector:e,candidates:i,view:n}=t;if(!(i!=null&&i.length)||!e)return[];const{spatialReference:s}=n,h=e,f=await L4e();return i.filter(m=>f.intersects(s,h,m.geometry))}const q4e=100;let gd=class extends un.EventedAccessor{constructor(e){super(e),this._processTask=null,this.options=null,this.selection=new Pe,this.sources=null,this._process=u3(async(i,n)=>{const{callback:s,selector:h,completed:f}=i,m=up(async y=>{var I;const{sources:x,selection:E,view:k}=this;if(!(!(x!=null&&x.length)&&!(k!=null&&k.selectionManager.sources.length))&&k){if(h&&x!=null){const P=await D4e({currentSelection:E,selector:h,signal:y,sources:x,view:k});f&&((I=k.selectionManager)==null||I.updateSelection({current:E.toArray(),...P}))}s&&s()}else E.removeAll()});return $s(n,()=>m.abort()),this._processTask=m,m.promise},q4e)}initialize(){this._setup()}cancel(){var e;this.removeAllHandles(),(e=this._processTask)==null||e.abort()}async _setup(){const{view:e}=this;if(await e.whenReady(),this.destroyed)return;const i=this.options,n=(i==null?void 0:i.createTool)??"rectangle",s=(i==null?void 0:i.mode)??(n==="polygon"?"click":"hybrid"),h=Symbol();this._tool=new vs({view:e,mode:s,geometryType:n}),i!=null&&i.selectOnComplete||this.addHandles(this._tool.on(["cursor-update","vertex-add","vertex-remove"],()=>Yr(this._process({selector:this._selectionArea}))),h),this.addHandles([e.on("key-down",f=>{if(!f.repeat)switch(f.key){case pi.constraint:this._tool.uniformSizeToggled=!0,f.stopPropagation();break;case pi.center:this._tool.centeredToggled=!0,f.stopPropagation()}}),e.on("key-up",f=>{switch(f.key){case pi.constraint:this._tool.uniformSizeToggled=!1,f.stopPropagation();break;case pi.center:this._tool.centeredToggled=!1,f.stopPropagation()}}),this._tool.on("complete",async f=>{this.removeHandles(h);const m=()=>{this.removeAllHandles(),this.emit("complete",{aborted:f.aborted,selection:this.selection.toArray()})};f.aborted?(this.cancel(),this.selection.removeAll(),m()):await this._process({selector:this._selectionArea,callback:m,completed:!0})})],h),this.addHandles(ct(()=>e.tools.remove(this._tool))),e.addAndActivateTool(this._tool)}get _selectionArea(){const e=Ri(),i=this._tool.coordinates,n=this.view.spatialReference,s=f=>{e.x=f[0],e.y=f[1];const{x:m,y}=this.view.toMap(e);return[m,y]};if(i.length===1){const[f,m]=s(i[0]);return new Ne({x:f,y:m,spatialReference:n})}const h=this._tool.coordinates.map(s);if(h.length!==0)return x3(h)||h.reverse(),new ln({spatialReference:n,rings:[h]})}};_([S()],gd.prototype,"options",void 0),_([S({readOnly:!0})],gd.prototype,"selection",void 0),_([S()],gd.prototype,"sources",void 0),_([S({constructOnly:!0})],gd.prototype,"view",void 0),gd=_([J("esri.widgets.support.Selector2D.SelectionOperation")],gd);const W4e=gd;let uc=class extends un.EventedAccessor{constructor(t){super(t),this._operationHandlesGroup=null,this.activeOperation=null,this.sources=null}initialize(){this.addHandles([Ee(()=>this._sources,t=>{this.activeOperation&&(this.activeOperation.sources=t)})])}destroy(){this._operationHandlesGroup=Rt(this._operationHandlesGroup)}get _sources(){const{sources:t,view:e}=this;return e&&(t!=null&&t.length)?t.flatMap(i=>{if(r2(i))return i;if(oz(i)||az(i)){const s=i.layers||[],h=s.map(f=>{const m=vA(e,f)||void 0;return r2(m)?m:f});return h.length?h.toArray():s.length?s.toArray():i}const n=vA(e,i)||void 0;return r2(n)?n:i}):[]}get layers(){return _2(Ae.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.sources}set layers(t){_2(Ae.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.sources=t}get state(){const{_sources:t,view:e}=this,i=!(t!=null&&t.length)&&!(e!=null&&e.selectionManager.sources.length);return this.activeOperation?"active":e!=null&&e.ready&&!i?"ready":"disabled"}cancel(){var t;this.state==="active"&&((t=this.activeOperation)==null||t.cancel(),this._set("activeOperation",null))}activate(t){const{_sources:e,state:i,view:n}=this,s=!(e!=null&&e.length)&&!(n!=null&&n.selectionManager.sources.length);if(i==="disabled"||s||!this.view)return;i==="active"&&this.cancel();const h=new W4e({view:this.view,sources:e,options:t});return this._operationHandlesGroup=Dc([h.selection.on("change",f=>this.emit("selection-change",f)),h.once("complete",f=>this._onOperationComplete(f))]),this._set("activeOperation",h),h}_onOperationComplete(t){this._operationHandlesGroup=Rt(this._operationHandlesGroup),this._set("activeOperation",null),this.emit("complete",t)}};_([S()],uc.prototype,"_sources",null),_([S({readOnly:!0})],uc.prototype,"activeOperation",void 0),_([S()],uc.prototype,"layers",null),_([S()],uc.prototype,"sources",void 0),_([S({readOnly:!0})],uc.prototype,"state",null),_([S()],uc.prototype,"view",void 0),uc=_([J("esri.widgets.support.SelectionToolbar.SelectionToolbarViewModel")],uc);const K4e=uc,iO={lassoTool:!0,rectangleTool:!0},Z4e={createTool:"polygon",mode:"freehand"},J4e={createTool:"rectangle"},Mx="esri-selection-toolbar",$x={base:Mx,container:`${Mx}__container`,toolButton:`${Mx}__tool-button`};let Ur=class extends is{constructor(t,e){super(t,e),this._viewModelHandlesGroup=null,this.activeToolInfo=null,this.messages=null,this.toolConfigs=[],this.viewModel=new K4e,this.visibleElements={...iO},this._viewModelHandlesGroup=Dc([this.viewModel.on("complete",i=>{this._set("activeToolInfo",null),this.emit("complete",i)})])}destroy(){this._viewModelHandlesGroup=Rt(this._viewModelHandlesGroup)}loadDependencies(){return Cl({action:()=>ge(()=>import("./calcite-action-DiQIcL0L.js"),[],import.meta.url),icon:()=>ge(()=>import("./calcite-icon-CWxO1up_.js"),[],import.meta.url)})}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get layers(){return _2(Ae.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.viewModel.sources}set layers(t){_2(Ae.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.viewModel.sources=t}get sources(){return this.viewModel.sources}set sources(t){this.viewModel.sources=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}castVisibleElements(t){return{...iO,...t}}get visibleToolCount(){const{view:t,toolConfigs:e,visibleElements:i}=this;return((e==null?void 0:e.length)??0)+((t==null?void 0:t.type)==="2d"?(i.lassoTool?1:0)+(i.rectangleTool?1:0):0)}activate(t){if(this.cancel(),this.viewModel.state!=="disabled")switch(t){case"lasso":this._activateTool("lasso");break;case"rectangle":this._activateTool("rectangle");break;default:this._activateTool(t)}}cancel(){this.viewModel.cancel(),this._set("activeToolInfo",null)}render(){return re("div",{"aria-label":this.label,class:this.classes($x.base,Qe.widget)},re("div",{class:$x.container},this._renderDefaultTools(),this._renderCustomTools()))}_renderDefaultTools(){var t;if(((t=this.view)==null?void 0:t.type)==="2d")return[this._renderRectangleTool(),this._renderLassoTool()]}_renderCustomTools(){var t;if((t=this.toolConfigs)!=null&&t.length)return this.toolConfigs.map(({toolName:e,icon:i})=>{var n;return re("calcite-action",{active:((n=this.activeToolInfo)==null?void 0:n.toolName)===e,bind:this,class:$x.toolButton,disabled:this.viewModel.state==="disabled",onclick:()=>this._onCustomToolClick(e),scale:"s",text:e,title:e},re("calcite-icon",{icon:i||"selection",scale:"s"}))})}_renderLassoTool(){const{activeToolInfo:t,messages:e,visibleElements:i}=this;if(!i.lassoTool)return;const n=e.selectByLasso;return re("calcite-action",{active:(t==null?void 0:t.toolName)==="lasso",bind:this,disabled:this.viewModel.state==="disabled",onclick:this._onLassoToolClick,scale:"s",text:n,title:n},re("calcite-icon",{icon:"lasso-select",scale:"s"}))}_renderRectangleTool(){const{activeToolInfo:t,messages:e,visibleElements:i}=this;if(!i.rectangleTool)return;const n=e.selectByRectangle;return re("calcite-action",{active:(t==null?void 0:t.toolName)==="rectangle",bind:this,disabled:this.viewModel.state==="disabled",onclick:this._onRectangleToolClick,scale:"s",text:n,title:n},re("calcite-icon",{icon:"cursor-marquee",scale:"s"}))}_onCustomToolClick(t){this._toggleTool(t)}_onLassoToolClick(){this._toggleTool("lasso")}_onRectangleToolClick(){this._toggleTool("rectangle")}_activateTool(t){const e=this._getToolOptions(t);if(!e)return;const i=this.viewModel.activate(e);i&&this._set("activeToolInfo",{toolName:t,operation:i})}_toggleTool(t){if(this.activeToolInfo){const e=this.activeToolInfo.toolName;if(this.cancel(),e===t)return}this._activateTool(t)}_getToolOptions(t){return t==="lasso"?Z4e:t==="rectangle"?J4e:this.toolConfigs.find(e=>e.toolName===t)}};_([S({readOnly:!0})],Ur.prototype,"activeToolInfo",void 0),_([S()],Ur.prototype,"label",null),_([S()],Ur.prototype,"layers",null),_([S(),Gn("esri/widgets/support/SelectionToolbar/t9n/SelectionToolbar")],Ur.prototype,"messages",void 0),_([S()],Ur.prototype,"sources",null),_([S()],Ur.prototype,"toolConfigs",void 0),_([S()],Ur.prototype,"view",null),_([S()],Ur.prototype,"viewModel",void 0),_([S()],Ur.prototype,"visibleElements",void 0),_([Hi("visibleElements")],Ur.prototype,"castVisibleElements",null),_([S()],Ur.prototype,"visibleToolCount",null),Ur=_([J("esri.widgets.support.SelectionToolbar")],Ur);const Y4e=Ur,X4e={absolute:"absolute-direction",relative:"relative-direction"},Tq=()=>Cl({icon:()=>ge(()=>import("./calcite-icon-CWxO1up_.js"),[],import.meta.url),label:()=>ge(()=>import("./calcite-label-S6Tu8tmj.js"),[],import.meta.url),switch:()=>ge(()=>import("./calcite-switch-DrV9hW6n.js"),[],import.meta.url),tooltip:()=>ge(()=>Promise.resolve().then(()=>R2e),void 0,import.meta.url)}),k1="esri-labeled-switch",C1={label:`${k1}__label`,labelContent:`${k1}__label-content`,iconInfo:`${k1}__icon_info`,iconWarning:`${k1}__icon_warning`,tooltip:`${k1}__tooltip`};function Cf({checked:t,disabled:e,hint:i,key:n,label:s,onChange:h,hintIcon:f,hintKind:m}){return re("calcite-label",{class:C1.label,disabled:e,key:n,layout:"inline-space-between",scale:"s"},re("div",{class:C1.labelContent,key:"label-content"},i?re(sge,null,re("div",null,s),re("calcite-icon",{class:m!=="warning"?C1.iconInfo:C1.iconWarning,icon:f??"information",id:n,scale:"s",tabIndex:0}),re("calcite-tooltip",{class:C1.tooltip,referenceElement:n},i)):s),re("calcite-switch",{checked:t,disabled:e,scale:"s",onCalciteSwitchChange:y=>h(y.target.checked)}))}let md=class extends Oe{constructor(e){super(e),this.directionModePicker=!1,this.header=!1,this.labelsToggle=!0,this.tooltipsToggle=!0}};_([S({type:Boolean,nonNullable:!0})],md.prototype,"directionModePicker",void 0),_([S({type:Boolean,nonNullable:!0})],md.prototype,"header",void 0),_([S({type:Boolean,nonNullable:!0})],md.prototype,"labelsToggle",void 0),_([S({type:Boolean,nonNullable:!0})],md.prototype,"tooltipsToggle",void 0),md=_([J("esri.widgets.support.SketchTooltipControls.VisibleElements")],md);const Eq=md,I1="esri-sketch-tooltip-controls",Kv={base:I1,block:`${I1}__block`,blockContent:`${I1}__block-content`,hintIcon:`${I1}__hint-icon`,radioButtonLabelWrapper:`${I1}__radio-button-label-wrapper`};let kh=class extends is{constructor(e,i){super(e,i),this.viewModel=null,this.visibleElements=new Eq,this.sketchOptions=new $_,this.viewType=void 0,this._onTooltipsEnabledChange=n=>{this.sketchOptions.tooltips.enabled=n},this._onLabelsEnabledChange=n=>{this.sketchOptions.labels.enabled=n},this._onDirectionModeChange=n=>{this.sketchOptions.values.directionMode=n.target.selectedItem.value}}loadDependencies(){return Promise.all([Cl({block:()=>ge(()=>import("./calcite-block-CB0hihhS.js"),__vite__mapDeps([326,327]),import.meta.url),label:()=>ge(()=>import("./calcite-label-S6Tu8tmj.js"),[],import.meta.url),icon:()=>ge(()=>import("./calcite-icon-CWxO1up_.js"),[],import.meta.url),"radio-button":()=>ge(()=>import("./calcite-radio-button-CO9wnxuz.js"),[],import.meta.url),"radio-button-group":()=>ge(()=>import("./calcite-radio-button-group-BKquj4ua.js"),[],import.meta.url)}),Tq()])}render(){const{label:e,visibleElements:i}=this,n=this._renderContent();return re("div",{"aria-label":e,class:this.classes(Kv.base,Qe.widget)},n?re("calcite-block",{class:Kv.block,heading:i.header?this.label:"",key:"content-block",open:!0},re("div",{class:Kv.blockContent,key:"content"},n)):void 0)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}_renderContent(){const{visibleElements:e,viewType:i}=this,n=[e.tooltipsToggle?this._renderTooltipsToggle():null,e.labelsToggle&&i!=="2d"?this._renderLabelsToggle():null,e.directionModePicker?this._renderDirectionModePicker():null].filter(Yi);return n.length===0?null:n}_renderTooltipsToggle(){const{messages:e,sketchOptions:i}=this;return re(Cf,{checked:i.tooltips.effectiveEnabled,hint:e.tooltipsToggleHint,key:`${this.id}__tooltips`,label:e.tooltipsToggle,onChange:this._onTooltipsEnabledChange})}_renderLabelsToggle(){const{messages:e,sketchOptions:i}=this;return re(Cf,{checked:i.labels.enabled,hint:e.labelsToggleHint,key:`${this.id}__labels`,label:e.labelsToggle,onChange:this._onLabelsEnabledChange})}_renderDirectionModePicker(){const{messages:e,sketchOptions:i}=this,{directionMode:n}=i.values;return re("calcite-label",{key:"direction-mode",layout:"default",scale:"s"},e.directionModePicker,re("calcite-radio-button-group",{key:"radio-button-group",layout:"horizontal",name:this.id,scale:"s",value:n,onCalciteRadioButtonGroupChange:this._onDirectionModeChange},this._renderDirectionModeOption("relative",n,e.directionModeRelative),this._renderDirectionModeOption("absolute",n,e.directionModeAbsolute)))}_renderDirectionModeOption(e,i,n){return re("calcite-label",{key:e,layout:"inline",scale:"s"},re("calcite-radio-button",{checked:e===i,scale:"s",value:e}),re("div",{class:Kv.radioButtonLabelWrapper,key:"label-wrapper"},re("calcite-icon",{icon:X4e[e],scale:"s"}),n))}};_([S()],kh.prototype,"label",null),_([S({type:Eq,nonNullable:!0})],kh.prototype,"visibleElements",void 0),_([S(),Gn("esri/widgets/support/SketchTooltipControls/t9n/SketchTooltipControls")],kh.prototype,"messages",void 0),_([S({nonNullable:!0,type:$_})],kh.prototype,"sketchOptions",void 0),_([S({type:String})],kh.prototype,"viewType",void 0),kh=_([J("esri.widgets.support.SketchTooltipControls")],kh);const Q4e=kh,eSe={hide:"hide",hideChildren:"hide-children"};function t3(t){return(t==null?void 0:t.listMode)??void 0}function tSe(t){return t!=null&&"minScale"in t&&t.minScale!=null?t.minScale:void 0}function iSe(t){return t!=null&&"maxScale"in t&&t.maxScale!=null?t.maxScale:void 0}function nSe(t){if(!t)return"inherited";const e=sSe($q(t)?t.layer:t);return e!=null?e?"independent":"inherited":"visibilityMode"in t&&t.visibilityMode!=null?t.visibilityMode:"independent"}function Mq(t){if(t&&(!("type"in t)||t.type!=="wmts"))return"sublayers"in t?"sublayers":"layers"in t?"layers":void 0}function y7(t){return t3(t)!==eSe.hide}function rSe(t,e){if(!t||e==null||isNaN(e))return!1;const i=tSe(t),n=iSe(t),s=i!=null&&!isNaN(i)&&i>0&&e>i,h=n!=null&&!isNaN(n)&&n>0&&e<n;return s||h}function nO(t){const e=t==null?void 0:t.layer;return e&&"layers"in e?e.layers:null}function $q(t){return t!=null&&"layer"in t&&t.layer!=null}function sSe(t){const e=oSe(t);return e!=null&&"supportsSublayerVisibility"in e?e.supportsSublayerVisibility:void 0}function oSe(t){return t&&"capabilities"in t&&t.capabilities!=null&&"exportMap"in t.capabilities?t.capabilities.exportMap:void 0}var q6;let Ch=q6=class extends uy{constructor(t){super(t),this.displayValueEnabled=!1,this.max=1,this.min=0,this.step=.1,this.type="slider",this.value=null}clone(){return new q6({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,displayValueEnabled:this.displayValueEnabled,max:this.max,min:this.min,step:this.step,value:this.value})}};_([S()],Ch.prototype,"displayValueEnabled",void 0),_([S()],Ch.prototype,"max",void 0),_([S()],Ch.prototype,"min",void 0),_([S()],Ch.prototype,"step",void 0),_([S()],Ch.prototype,"value",void 0),Ch=q6=_([J("esri.support.actions.ActionSlider")],Ch);const aSe=Ch;let Dn=class extends fp(is){constructor(t,e){super(t,e),this._legend=null,this.className=null,this.content=null,this.flowEnabled=!1,this.image=null,this.listItem=null,this.open=!1,this.visible=!0}initialize(){this.addHandles([Ee(()=>this._canCreateLegend,()=>this._createLegend(),Ct),Ee(()=>[this._legend,this._legendOptions],()=>this._updateLegend(),Ct)])}destroy(){this._legend=mt(this._legend)}get _canCreateLegend(){const{content:t,listItem:e}=this;if(!e)return!1;const i="legend";return t===i||t!=null&&!!Array.isArray(t)&&t.includes(i)}get _legendOptions(){const{listItem:t,_legendLayerInfo:e}=this,i=t==null?void 0:t.view;return e&&i?{view:i,layerInfos:[e]}:{}}get _legendLayerInfo(){var h;const t=(h=this.listItem)==null?void 0:h.layer;if(!t||t.type==="subtype-sublayer")return null;const e=$q(t)?t:null,i=t==null?void 0:t.parent,n=i!=null&&"type"in i&&i.type==="map-image"?e==null?void 0:e.source:null,s="";return n&&i?{layer:i,title:s,sublayerIds:[n.mapLayerId]}:{layer:t,title:s}}get disabled(){var n;const{listItem:t,_legend:e,content:i}=this;return!t||!(Array.isArray(i)&&i.length>1)&&!!e&&(!((n=e.activeLayerInfos)!=null&&n.length)||!t.visibleAtCurrentScale||!t.visible)}set disabled(t){this._overrideIfSome("disabled",t)}get icon(){const{image:t}=this,e=this._getFirstWidget();return this._get("icon")??(!t&&e?e.icon:null)}set icon(t){this._overrideIfSome("icon",t)}get title(){var t;return this._get("title")||(((t=this._getFirstWidget())==null?void 0:t.label)??"")}set title(t){this._override("title",t)}render(){return re("div",{class:"esri-list-item-panel"},this._renderContents())}_renderContent(t){const{_legend:e,disabled:i,open:n}=this;return t&&!i&&n?t==="legend"&&e?re("div",{key:"legend-widget"},e.render()):typeof t=="string"?re("div",{innerHTML:t,key:t}):Xg(t)?re("div",{key:"content-widget"},t.render()):t instanceof HTMLElement?re("div",{afterCreate:this._attachToNode,bind:t,key:"content-element"}):null:null}_renderContents(){const{content:t,open:e}=this;return e?Array.isArray(t)?t.map(i=>this._renderContent(i)):this._renderContent(t):null}async _createLegend(){if(mt(this._legend),this._legend=null,!this._canCreateLegend)return;const{default:t}=await ge(()=>import("./Legend-D4MgCXAk.js"),__vite__mapDeps([328,246,217,267,240,241,102,148,149,97,107,150,151,152,81,34,153,24,30,27,154,104,79,71,2,3,320,158,156,157,4,159,160]),import.meta.url),e=new t(this._legendOptions);this._legend=e}_attachToNode(t){t.appendChild(this)}_updateLegend(){const t=this._legend;t&&t.set(this._legendOptions)}_getWidget(t){return t==="legend"?this._legend:Xg(t)?t:null}_getFirstWidget(){const{content:t}=this;return Array.isArray(t)?t.map(e=>this._getWidget(e)).find(e=>e):this._getWidget(t)}};_([S()],Dn.prototype,"_legend",void 0),_([S()],Dn.prototype,"_canCreateLegend",null),_([S()],Dn.prototype,"_legendOptions",null),_([S()],Dn.prototype,"_legendLayerInfo",null),_([S()],Dn.prototype,"className",void 0),_([S()],Dn.prototype,"content",void 0),_([S()],Dn.prototype,"disabled",null),_([S()],Dn.prototype,"flowEnabled",void 0),_([S()],Dn.prototype,"icon",null),_([S()],Dn.prototype,"image",void 0),_([S()],Dn.prototype,"listItem",void 0),_([S()],Dn.prototype,"open",void 0),_([S()],Dn.prototype,"title",null),_([S()],Dn.prototype,"visible",void 0),Dn=_([J("esri.widgets.LayerList.ListItemPanel")],Dn);const kq=Dn;var $g;const lSe=Pe.ofType({key:"type",defaultKeyValue:"button",base:uy,typeMap:{button:oF,toggle:aF,slider:aSe}}),Cq=Pe.ofType(lSe),kx="layer",Zv="child-list-mode",cSe="hide";let Vt=$g=class extends fp(Oe){constructor(t){super(t),this.actionsSections=new Cq,this.actionsOpen=!1,this.checkPublishStatusEnabled=!1,this.children=new(Pe.ofType($g)),this.childrenSortable=!0,this.hidden=!1,this.layer=null,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.open=!1,this.panel=null,this.parent=null,this.view=null}initialize(){if(this.addHandles([Ee(()=>{var t;return[this.layer,(t=this.layer)==null?void 0:t.listMode,this.listModeDisabled]},()=>this._watchLayerProperties(this.layer),Ct),Ee(()=>this.checkPublishStatusEnabled,t=>this._updateChildrenPublishing(t),Ct),Ee(()=>this.view,t=>this._updateChildrenView(t),Ct),Ee(()=>this.panel,t=>this._setListItemOnPanel(t),Ct)]),typeof this.listItemCreatedFunction=="function"){const t={item:this};this.listItemCreatedFunction.call(null,t)}}destroy(){var t;(t=this.panel)==null||t.destroy(),this.children.destroyAll(),this.view=null}get connectionStatus(){const{layerView:t,publishing:e}=this;if(!e&&t&&"connectionStatus"in t)return t.connectionStatus}get error(){var t;return(t=this.layer)==null?void 0:t.loadError}get incompatible(){const{layerView:t}=this;return!(!t||!("spatialReferenceSupported"in t))&&!t.spatialReferenceSupported}get layerView(){const{layer:t,view:e}=this;if(!t||!e||t.type==="sublayer")return null;const i=t.type==="subtype-sublayer"?t.parent:t;return e.allLayerViews.find(n=>n.layer===i)??null}castPanel(t){var e;return(e=this.panel)!=null&&e.open&&!t.hasOwnProperty("open")&&(t.open=!0),t?new kq(t):null}get sortable(){var t;return((t=this.layer)==null?void 0:t.type)!=="knowledge-graph-sublayer"&&this._get("sortable")}set sortable(t){this._set("sortable",t)}get title(){const t=Kr(this,"layer.layer");return(!t||t&&Kr(this,"layer.layer.loaded"))&&Kr(this,"layer.title")||Kr(this,"layer.attributes.title")||""}set title(t){this._override("title",t)}get publishing(){var i;const{layer:t,checkPublishStatusEnabled:e}=this;return e&&t&&"publishingInfo"in t&&((i=t.publishingInfo)==null?void 0:i.status)==="publishing"}get updating(){const{layerView:t,connectionStatus:e,layer:i,publishing:n}=this;return!n&&!e&&(t?t.updating:(i==null?void 0:i.loadStatus)==="loading"||!1)}get visible(){var t;return(t=this.layer)==null?void 0:t.visible}set visible(t){const e=this.layer;e&&(e.visible=t)}get visibleAtCurrentScale(){var t,e;return((t=this.layerView)==null?void 0:t.visibleAtCurrentScale)??!rSe(this.layer,(e=this.view)==null?void 0:e.scale)}get visibleAtCurrentTimeExtent(){var t;return((t=this.layerView)==null?void 0:t.visibleAtCurrentTimeExtent)??!0}get visibilityMode(){return nSe(this.layer)}clone(){return new $g({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,checkPublishStatusEnabled:this.checkPublishStatusEnabled,children:this.children.clone(),childrenSortable:this.childrenSortable,hidden:this.hidden,layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,open:this.open,panel:this.panel,parent:this.parent,sortable:this.sortable,title:this.title,view:this.view,visible:this.visible})}_setListItemOnPanel(t){t&&(t.listItem=this)}_updateChildrenPublishing(t){const e=this.children;e&&e.forEach(i=>i.checkPublishStatusEnabled=t)}_updateChildrenView(t){const e=this.children;e&&e.forEach(i=>i.view=t)}_createChildren(t){const{listModeDisabled:e,children:i}=this,n=t.filter(s=>!i.some(h=>h.layer===s));i.addMany(this._createChildItems(n,e))}_destroyChildren(t){const{children:e}=this,i=e.filter(n=>!t.includes(n.layer));e.destroyMany(i)}_sortChildren(t){this.children.sort((e,i)=>t.indexOf(i.layer)-t.indexOf(e.layer))}_destroyAllChildren(){this.removeHandles(Zv),this.children.destroyAll()}_watchChildLayerListMode(t){this.removeHandles(Zv),this.listModeDisabled||this.addHandles(t.toArray().map(e=>Ee(()=>e.listMode,()=>this._compileChildren(t))),Zv)}_compileChildren(t){const e=this.listModeDisabled?t:t==null?void 0:t.filter(i=>t3(i)!==cSe);e!=null&&e.length?(this._createChildren(e),this._destroyChildren(e),this._sortChildren(e),this._watchChildLayerListMode(t)):this._destroyAllChildren()}_watchSublayerChanges(t){t&&this.addHandles(t.on("change",()=>this._compileChildren(t)),kx)}_initializeChildLayers(t){this._compileChildren(t),this._watchSublayerChanges(t)}_createChildItems(t,e){return t.map(i=>e||y7(i)?new $g({layer:i,checkPublishStatusEnabled:this.checkPublishStatusEnabled,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,parent:this,view:this.view}):null).filter(Yi).reverse()}_watchLayerProperties(t){if(this.removeHandles(kx),this.removeHandles(Zv),!t)return;if((!this.listModeDisabled&&t3(t))==="hide-children")return void this.children.destroyAll();const e=Mq(t);e&&this.addHandles(Ee(()=>t[e],i=>{t.hasOwnProperty(e)&&this._initializeChildLayers(i)},Ct),kx)}};_([S({type:Cq})],Vt.prototype,"actionsSections",void 0),_([S()],Vt.prototype,"actionsOpen",void 0),_([S()],Vt.prototype,"checkPublishStatusEnabled",void 0),_([S({type:Pe})],Vt.prototype,"children",void 0),_([S()],Vt.prototype,"childrenSortable",void 0),_([S({readOnly:!0})],Vt.prototype,"connectionStatus",null),_([S({readOnly:!0})],Vt.prototype,"error",null),_([S()],Vt.prototype,"hidden",void 0),_([S({readOnly:!0})],Vt.prototype,"incompatible",null),_([S()],Vt.prototype,"layer",void 0),_([S({readOnly:!0})],Vt.prototype,"layerView",null),_([S()],Vt.prototype,"listItemCreatedFunction",void 0),_([S({nonNullable:!0})],Vt.prototype,"listModeDisabled",void 0),_([S()],Vt.prototype,"open",void 0),_([S({type:kq})],Vt.prototype,"panel",void 0),_([Hi("panel")],Vt.prototype,"castPanel",null),_([S()],Vt.prototype,"parent",void 0),_([S({value:!0})],Vt.prototype,"sortable",null),_([S()],Vt.prototype,"title",null),_([S({readOnly:!0})],Vt.prototype,"publishing",null),_([S({readOnly:!0})],Vt.prototype,"updating",null),_([S()],Vt.prototype,"view",void 0),_([S()],Vt.prototype,"visible",null),_([S({readOnly:!0})],Vt.prototype,"visibleAtCurrentScale",null),_([S({readOnly:!0})],Vt.prototype,"visibleAtCurrentTimeExtent",null),_([S({readOnly:!0})],Vt.prototype,"visibilityMode",null),Vt=$g=_([J("esri.widgets.LayerList.ListItem")],Vt);const v7=Vt,Oo={view:"view",viewLayers:"view-layers",mapLayers:"map-layers",layerViews:"layer-views",layerListMode:"layer-list-mode"},hSe="hide",Iq=Pe.ofType(v7);let Ha=class extends un.EventedAccessor{constructor(e){super(e),this.checkPublishStatusEnabled=!1,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.operationalItems=new Iq,this.view=null}initialize(){this.addHandles([Ee(()=>{var e;return((e=this.view)==null?void 0:e.ready)===!0},()=>this._viewHandles(),Ct),Ee(()=>[this.listItemCreatedFunction,this.checkPublishStatusEnabled,this.listModeDisabled],()=>this._recompileList()),Ee(()=>p6(this.view)?this.view.inGeographicLayout:null,()=>this._compileList())],Oo.view)}destroy(){this._removeAllItems(),this.view=null}get state(){const{view:e}=this;return e!=null&&e.ready?"ready":e?"loading":"disabled"}get totalItems(){return this.operationalItems.flatten(e=>e.children).length}triggerAction(e,i){e&&!e.disabled&&this.emit("trigger-action",{action:e,item:i})}moveListItem(e,i,n,s){var P,L;const h=e==null?void 0:e.layer;if(!h||h.type==="subtype-sublayer"||h.type==="sublayer")return;const f=(L=(P=this.view)==null?void 0:P.map)==null?void 0:L.layers,m=i?nO(i):f,y=n?nO(n):f;if(!m||!y)return;const{operationalItems:x}=this,E=(i==null?void 0:i.children)||x,k=(n==null?void 0:n.children)||x,I=y.length-s;e.parent=n||null,E.remove(e),m.remove(h),k.includes(e)||k.add(e,I),y.includes(h)||y.add(h,I),this._compileList()}_createLayerViewHandles(e){this.removeHandles(Oo.layerViews),this._compileList(),e&&this.addHandles(e.on("change",()=>this._compileList()),Oo.layerViews)}_createMapLayerHandles(e){this.removeHandles(Oo.mapLayers),this._compileList(),e&&this.addHandles(e.on("change",()=>this._compileList()),Oo.mapLayers)}_createListItem(e){const{view:i,listItemCreatedFunction:n,checkPublishStatusEnabled:s,listModeDisabled:h}=this;return new v7({checkPublishStatusEnabled:s,listModeDisabled:h,layer:e,listItemCreatedFunction:n,view:i})}_removeAllItems(){this.operationalItems.destroyAll()}_getViewableLayers(e){return e?this.listModeDisabled?e:e.filter(i=>t3(i)!==hSe):void 0}_watchLayersListMode(e){this.removeHandles(Oo.layerListMode),e&&!this.listModeDisabled&&this.addHandles(Ee(()=>e.filter(i=>"listMode"in i).map(i=>i.listMode).toArray(),()=>this._compileList()),Oo.layerListMode)}_compileList(){var s,h;const e=(h=(s=this.view)==null?void 0:s.map)==null?void 0:h.layers,i=p6(this.view)&&!this.view.inGeographicLayout?e==null?void 0:e.filter(({type:f})=>f==="link-chart"):e;this._watchLayersListMode(i);const n=this._getViewableLayers(i);n!=null&&n.length?(this._createNewItems(n),this._removeItems(n),this._sortItems(n)):this._removeAllItems()}_createNewItems(e){const{operationalItems:i}=this;e.forEach(n=>{i.some(s=>s.layer===n)||i.add(this._createListItem(n))})}_removeItems(e){const{operationalItems:i}=this,n=[];i.forEach(s=>{s&&e&&e.includes(s.layer)||n.push(s)}),i.destroyMany(n)}_sortItems(e){const{operationalItems:i}=this;i.sort((n,s)=>{const h=e.indexOf(n.layer),f=e.indexOf(s.layer);return h>f?-1:h<f?1:0})}_recompileList(){this._removeAllItems(),this._compileList()}_viewHandles(){const{view:e}=this;this.removeHandles([Oo.mapLayers,Oo.layerViews,Oo.viewLayers]),e!=null&&e.ready?this.addHandles([Ee(()=>{var i,n;return(n=(i=this.view)==null?void 0:i.map)==null?void 0:n.allLayers},i=>this._createMapLayerHandles(i),Ct),Ee(()=>{var i;return(i=this.view)==null?void 0:i.allLayerViews},i=>this._createLayerViewHandles(i),Ct)],Oo.viewLayers):this._removeAllItems()}};_([S()],Ha.prototype,"checkPublishStatusEnabled",void 0),_([S()],Ha.prototype,"listItemCreatedFunction",void 0),_([S({nonNullable:!0})],Ha.prototype,"listModeDisabled",void 0),_([S({type:Iq})],Ha.prototype,"operationalItems",void 0),_([S({readOnly:!0})],Ha.prototype,"state",null),_([S()],Ha.prototype,"totalItems",null),_([S()],Ha.prototype,"view",void 0),Ha=_([J("esri.widgets.LayerList.LayerListViewModel")],Ha);const uSe=Ha,b7=t=>dSe(t)||pSe(t),dSe=t=>{if(!("type"in t))return!1;switch(t.type){case"feature":case"geojson":case"csv":case"graphics":case"wfs":case"map-notes":case"oriented-imagery":case"scene":case"building-scene":case"subtype-sublayer":return!0;default:return!1}},pSe=t=>{const e=Mq(t);if(e!=null&&t.hasOwnProperty(e)&&t[e]!=null){for(const i of t[e])if(b7(i))return!0}return!1},p2=(t,e)=>e!=null&&t!=null&&(e.test(t.title)?"self":!!t.children.some(i=>p2(i,e)!==!1)&&"children");var W6;let dc=W6=class extends v7{constructor(t){super(t),this.children=new Pe,this.parent=null}get enabled(){const{children:t}=this;if(t.length===0)return this.featureSource!=null&&this.featureSource.enabled?"enabled":"disabled";let e=!1,i=!1;for(const n of t){if(n.enabled==="indeterminate")return n.enabled;if(n.enabled==="enabled"?e=!0:n.enabled==="disabled"&&(i=!0),i&&e)return"indeterminate"}return i?"disabled":"enabled"}get childLayerIds(){return this.children.toArray().flatMap(t=>[t.layer.id,...t.childLayerIds])}get featureSource(){const{layer:t,getFeatureSnappingSources:e}=this;return e().find(i=>i.layer===t)}_initializeChildLayers(t){if(!t)return;const e=t.filter(b7);super._initializeChildLayers(e)}_createChildItems(t){return t.map(e=>y7(e)?new W6({layer:e,parent:this,view:this.view,getFeatureSnappingSources:this.getFeatureSnappingSources}):null).filter(Yi).reverse()}};_([S()],dc.prototype,"enabled",null),_([S()],dc.prototype,"children",void 0),_([S()],dc.prototype,"childLayerIds",null),_([S()],dc.prototype,"featureSource",null),_([S({constructOnly:!0})],dc.prototype,"getFeatureSnappingSources",void 0),_([S()],dc.prototype,"parent",void 0),dc=W6=_([J("esri.widgets.support.SnappingControls.SnappingListItem")],dc);let yd=class extends uSe{constructor(){super(...arguments),this.featureSnappingSources=new Pe}get operationalItemsFlat(){return this.operationalItems.flatten(t=>t.children)}get selectableItems(){return this.operationalItemsFlat.filter(t=>{var e;return!((e=t.children)!=null&&e.length)})}_compileList(){var n,s;const t=(s=(n=this.view)==null?void 0:n.map)==null?void 0:s.layers;if(!t)return;const e=t.filter(b7);this._watchLayersListMode(e);const i=this._getViewableLayers(e);i!=null&&i.length?(this._createNewItems(i),this._removeItems(i),this._sortItems(i)):this._removeAllItems()}_createListItem(t){return new dc({layer:t,view:this.view,getFeatureSnappingSources:()=>this.featureSnappingSources})}};_([S()],yd.prototype,"featureSnappingSources",void 0),_([S()],yd.prototype,"operationalItems",void 0),_([S()],yd.prototype,"operationalItemsFlat",null),_([S()],yd.prototype,"selectableItems",null),yd=_([J("esri.widgets.support.SnappingControls.SnappingLayerListViewModel")],yd);let Va=class extends Oe{constructor(t){super(t),this.layerListViewModel=new yd,this.snappingOptions=new Ay,this.view=null}initialize(){this.addHandles([Ee(()=>({viewModel:this.layerListViewModel,view:this.view}),({viewModel:t,view:e})=>{t.view=e},Ct),Ee(()=>{var t;return{viewModel:this.layerListViewModel,sources:(t=this.snappingOptions)==null?void 0:t.featureSources}},({viewModel:t,sources:e})=>{t.featureSnappingSources=e},Ct)])}get allLayersEnabled(){var t;return(((t=this.layerListViewModel)==null?void 0:t.selectableItems)??[]).every(e=>e.enabled==="enabled")}get allLayersDisabled(){var t;return(((t=this.layerListViewModel)==null?void 0:t.selectableItems)??[]).every(e=>!e.enabled)}get layersEnabledCount(){var t,e;return((e=(t=this.layerListViewModel)==null?void 0:t.selectableItems)==null?void 0:e.filter(i=>i.enabled==="enabled").length)??0}get state(){return this.snappingOptions?"ready":"disabled"}toggleSnappingForLayers(t,e){t==null||t.forEach(i=>e?this.enableSnappingForLayer(i):this.disableSnappingForLayer(i))}toggleSnappingForAllLayers(t){this.layerListViewModel.selectableItems.forEach(({layer:{id:e}})=>{t?this.enableSnappingForLayer(e):this.disableSnappingForLayer(e)})}enableSnappingForLayer(t){const e=this._findSnappingSourceForLayer(t)??this._makeSnappingSourceForLayer(t);e&&(e.enabled=!0)}disableSnappingForLayer(t){const e=this._findSnappingSourceForLayer(t);e&&(e.enabled=!1)}updateEnabledFeatureSources(t){for(const e of this.snappingOptions.featureSources)y7(e.layer)&&(e.enabled=t.includes(e.layer.id))}_findSnappingSourceForLayer(t){return this.snappingOptions.featureSources.find(e=>e.layer.id===t)}_makeSnappingSourceForLayer(t){var n;const e=(n=this.layerListViewModel.operationalItemsFlat.find(s=>s.layer.id===t))==null?void 0:n.layer;if(!e)throw new ce("snapping-controls:layer-not-found",`cannot enable snapping for layer with id ${t} because no such layer was found in the view`);if(e.type==="group")return;const i=new VM({layer:e});return this.snappingOptions.featureSources.add(i),i}};_([S()],Va.prototype,"allLayersEnabled",null),_([S()],Va.prototype,"allLayersDisabled",null),_([S({constructOnly:!0})],Va.prototype,"layerListViewModel",void 0),_([S()],Va.prototype,"layersEnabledCount",null),_([S({type:Ay,nonNullable:!0})],Va.prototype,"snappingOptions",void 0),_([S()],Va.prototype,"state",null),_([S()],Va.prototype,"view",void 0),Va=_([J("esri.widgets.support.SnappingControls.SnappingControlsViewModel")],Va);const fSe=Va,Po="esri-snapping-controls",Ro={base:Po,container:`${Po}__container`,item:`${Po}__item`,toggleBlock:`${Po}__toggle-block`,layerListBlock:`${Po}__layer-list-block`,layerList:`${Po}__layer-list`,layerListFilter:`${Po}__layer-list__filter`,layerListButton:`${Po}__layer-list__button`,layerListItem:`${Po}__layer-list__item`,layerListGroup:`${Po}__layer-list__group`,nestedContainer:`${Po}__nested-container`};let vn=class extends is{constructor(t,e){super(t,e),this._defaultViewModel=null,this._layerListFilter=null,this._gridLoadTask=null,this.layerListOpen=!0,this.gridOptionsOpen=!1,this.messages=null,this.messagesCommon=null,this.snappingManager=null,this.visibleElements=new z_,this._enableSnappingSwitchChange=h=>{this.snappingOptions.enabled=h},this._featureEnabledSwitchChange=h=>{this.snappingOptions.featureEnabled=h},this._gridEnabledSwitchChange=h=>{this.snappingOptions.gridEnabled=h,h&&this._startLoadGrid()},this._selfEnabledSwitchChange=h=>{this.snappingOptions.selfEnabled=h},this._onToggleLayersButtonClick=h=>{this.viewModel.toggleSnappingForAllLayers(!this.viewModel.allLayersEnabled),HD(h.target)};const{snappingOptions:i,view:n,viewModel:s}=t;this.viewModel=s??(this._defaultViewModel=new fSe({snappingOptions:i,view:n}))}normalizeCtorArgs(t){const{snappingOptions:e,view:i,viewModel:n,...s}=t;return s}destroy(){this.viewModel!==this._defaultViewModel&&(this._defaultViewModel=mt(this._defaultViewModel))}loadDependencies(){return Promise.all([Cl({block:()=>ge(()=>import("./calcite-block-CB0hihhS.js"),__vite__mapDeps([326,327]),import.meta.url),button:()=>ge(()=>import("./calcite-button-DdfDzV45.js"),[],import.meta.url),input:()=>ge(()=>import("./calcite-input-CpS9yfAy.js"),[],import.meta.url),list:()=>ge(()=>import("./calcite-list-DEw22I49.js"),__vite__mapDeps([329,330,331]),import.meta.url),"list-item":()=>ge(()=>import("./calcite-list-item-BkUiULbs.js"),__vite__mapDeps([332,331,330,327]),import.meta.url),checkbox:()=>ge(()=>import("./calcite-checkbox-D-n1DZT1.js"),[],import.meta.url),loader:()=>ge(()=>import("./calcite-loader-Cd5DEDA3.js"),[],import.meta.url)}),Tq()])}initialize(){this.addHandles(Ee(()=>{var t;return((t=this.view)==null?void 0:t.type)==="2d"&&!!this.view.grid},t=>{this.visibleElements.gridControls&&(this.snappingOptions.gridEnabled=t)}))}get _openAndReady(){return this.gridOptionsOpen&&this.snappingOptions.gridEnabled&&this.snappingOptions.enabled}get icon(){return"snap-to-point"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get snappingOptions(){return this.viewModel.snappingOptions}set snappingOptions(t){this.viewModel.snappingOptions=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}set viewModel(t){t!==this._get("viewModel")&&(this._defaultViewModel!=null&&this._defaultViewModel===t||(this._defaultViewModel=mt(this._defaultViewModel)),this._set("viewModel",t))}render(){const{label:t}=this;return re("div",{"aria-label":t,class:this.classes(Ro.base,Qe.widget)},re("div",{class:Ro.container},this._renderContent()))}_renderContent(){var t;return[this._renderToggles(),this._renderLayerList(),((t=this.view)==null?void 0:t.type)==="2d"&&this.visibleElements.gridControls?this._renderGridOptions():null]}_renderToggles(){const{visibleElements:t,view:e}=this,i=[t.selfEnabledToggle?this._renderSelfEnabledToggle():null,t.featureEnabledToggle?this._renderFeatureEnabledToggle():null,t.gridEnabledToggle&&(e==null?void 0:e.type)==="2d"?this._renderGridEnabledToggle():null].filter(Yi),n=[t.enabledToggle?this._renderEnabledToggle():null,i.length>0?re("div",{class:Ro.nestedContainer},i):null].filter(Yi);return n.length===0?null:re("calcite-block",{class:Ro.toggleBlock,heading:t.header?this.label:"",key:"toggle-block",open:!0},n)}_renderEnabledToggle(){return re(Cf,{checked:this.viewModel.snappingOptions.enabled,disabled:this._enabledToggleDisabled,key:`${this.id}__enabled-toggle`,label:this.messages.enableSnapping,onChange:this._enableSnappingSwitchChange})}_renderSelfEnabledToggle(){return re(Cf,{checked:this.viewModel.snappingOptions.selfEnabled,disabled:this._secondaryElementsDisabled,key:`${this.id}__self-enabled-toggle`,label:this.messages.geometryGuides,onChange:this._selfEnabledSwitchChange})}_renderFeatureEnabledToggle(){return re(Cf,{checked:this.viewModel.snappingOptions.featureEnabled,disabled:this._secondaryElementsDisabled,key:`${this.id}__feature-enabled-toggle`,label:this.messages.featureToFeature,onChange:this._featureEnabledSwitchChange})}_renderGridEnabledToggle(){return re(Cf,{checked:this.viewModel.snappingOptions.gridEnabled,disabled:this._secondaryElementsDisabled,key:`${this.id}__grid-enabled-toggle`,label:this.messages.grid,onChange:this._gridEnabledSwitchChange})}_renderLayerList(){if(!this.visibleElements.layerList)return null;const{messages:t,viewModel:e}=this,i=({target:{value:f}})=>{this._layerListFilter=f===""?null:new RegExp(f,"i")},n=e.layerListViewModel.operationalItems.length>9?re("calcite-input",{class:Ro.layerListFilter,clearable:!0,placeholder:t==null?void 0:t.searchLayers,onCalciteInputInput:i}):null,s=this._secondaryElementsDisabled,h=this.layerListOpen&&!s;return re("calcite-block",{class:Ro.layerListBlock,collapsible:!0,disabled:this._secondaryElementsDisabled,heading:t.snappingLayers,key:"list-block",open:h,onCalciteBlockToggle:f=>this.layerListOpen=f.target.open},n,this._renderToggleLayersButton(),re("calcite-list",{class:Ro.layerList,selectionMode:"none"},this._renderLayerListItemCollection(e.layerListViewModel.operationalItems)))}_renderGridOptions(){var x;const{view:t,visibleElements:e,snappingManager:i,snappingOptions:n,_openAndReady:s}=this,{gridEnabled:h,enabled:f}=n;(s||(t==null?void 0:t.type)==="2d"&&t.grid)&&this._startLoadGrid();const m=(x=this._gridLoadTask)==null?void 0:x.value,y=m&&(t==null?void 0:t.type)==="2d"&&re(m,{snappingManager:i,snappingOptions:n,view:t,visibleElements:e.gridControlsElements});return re("calcite-block",{class:Ro.layerListBlock,collapsible:!0,disabled:!h||!f,heading:this.messages.gridOptionsHeading,key:"grid-block",open:s,onCalciteBlockClose:()=>this.gridOptionsOpen=!1,onCalciteBlockOpen:()=>this.gridOptionsOpen=!0},y??re("calcite-loader",{label:this.messagesCommon.loading,scale:"s",text:this.messagesCommon.loading}))}async _startLoadGrid(){var t;!this._gridLoadTask&&this.visibleElements.gridControls&&((t=this.view)==null?void 0:t.type)==="2d"&&(this._gridLoadTask=up(async()=>(await ge(async()=>{const{default:e}=await import("./GridControls-jM4C2lse.js");return{default:e}},__vite__mapDeps([333,145,60,231,303,284,71,285,286,304,305,306,296,50,300,307,88,135,109,132,158,79,288,81,34,104,308,310,31]),import.meta.url)).default))}_renderLayerListItemCollection(t){const e=this._layerListFilter;return t.map(i=>{switch(e?p2(i,e):null){case"children":{const n=i.children.filter(s=>p2(s,e)!==!1);return this._renderLayerListItemGroup(i,n)}case"self":case null:return this._renderLayerListItemOrGroup(i);case!1:return p2(i.parent,e)==="self"?this._renderLayerListItemOrGroup(i):null}}).toArray().filter(Yi)}_renderToggleLayersButton(){if(!this.visibleElements.layerListToggleLayersButton)return null;const{viewModel:{allLayersEnabled:t},messages:e}=this,i=t?e.disableAllLayers:e.enableAllLayers;return re("calcite-button",{appearance:"transparent",class:Ro.layerListButton,label:i,name:"layer-toggle",onclick:this._onToggleLayersButtonClick},i)}_renderLayerListItemOrGroup(t){if(t.children.length)return this._renderLayerListItemGroup(t);const{messages:{untitledLayer:e}}=this,i=t.title||e,n=()=>{this.viewModel.toggleSnappingForLayers([t.layer.id],t.enabled!=="enabled")};return re("calcite-list-item",{class:Ro.layerListItem,key:`${this.id}-list-item-${t.uid}`,label:i,onCalciteListItemSelect:s=>{s.stopPropagation(),n()}},re("calcite-checkbox",{checked:t.enabled==="enabled",slot:"actions-start",onCalciteCheckboxChange:n}))}_renderLayerListItemGroup(t,e){const{children:i,title:n}=t,s=n||this.messages.untitledLayer,h=n&&n!==""?n:Rg(),f=!!(e!=null&&e.length),m=e??i,y=()=>{this.viewModel.toggleSnappingForLayers(t.childLayerIds,t.enabled!=="enabled")};return re("calcite-list-item",{class:Ro.layerListGroup,key:h,label:s,open:f,onCalciteListItemSelect:x=>{x.stopPropagation(),y()}},re("calcite-checkbox",{checked:t.enabled==="enabled",indeterminate:t.enabled==="indeterminate",slot:"actions-start",onCalciteCheckboxChange:y}),re("calcite-list",null,this._renderLayerListItemCollection(m)))}get _enabledToggleDisabled(){const t=this.snappingOptions;return t.enabledToggled||t.forceDisabled}get _secondaryElementsDisabled(){return this._enabledToggleDisabled||!this.snappingOptions.enabled}};_([S()],vn.prototype,"_defaultViewModel",void 0),_([S()],vn.prototype,"_layerListFilter",void 0),_([S()],vn.prototype,"_gridLoadTask",void 0),_([S()],vn.prototype,"_openAndReady",null),_([S()],vn.prototype,"label",null),_([S({type:Boolean,nonNullable:!0})],vn.prototype,"layerListOpen",void 0),_([S({type:Boolean,nonNullable:!0})],vn.prototype,"gridOptionsOpen",void 0),_([S(),Gn("esri/widgets/support/SnappingControls/t9n/SnappingControls")],vn.prototype,"messages",void 0),_([S(),Gn("esri/t9n/common")],vn.prototype,"messagesCommon",void 0),_([S()],vn.prototype,"snappingOptions",null),_([S()],vn.prototype,"snappingManager",void 0),_([S()],vn.prototype,"view",null),_([S()],vn.prototype,"viewModel",null),_([S({type:z_,nonNullable:!0})],vn.prototype,"visibleElements",void 0),_([S()],vn.prototype,"_enabledToggleDisabled",null),_([S()],vn.prototype,"_secondaryElementsDisabled",null),vn=_([J("esri.widgets.support.SnappingControls")],vn);const gSe=vn,fn="esri-sketch",gn={base:fn,verticalLayout:`${fn}--vertical`,horizontalLayout:`${fn}--horizontal`,panel:`${fn}__panel`,infoPanel:`${fn}__info-panel`,section:`${fn}__section`,toolSection:`${fn}__tool-section`,infoSection:`${fn}__info-section`,infoCountSection:`${fn}__info-count-section`,menuContainer:`${fn}__menu-container`,menuHeader:`${fn}__menu-header`,menuTitle:`${fn}__menu-title`,featureCountBadge:`${fn}__feature-count-badge`,featureCountText:`${fn}__feature-count-text`,featureCountNumber:`${fn}__feature-count-number`,actionToggle:`${fn}__action-toggle`,actionToggleOn:`${fn}__action-toggle--on`,actionTitle:`${fn}__item-action-title`,actionIcon:`${fn}__item-action-icon`};let qt=class extends is{constructor(t,e){super(t,e),this._activeCustomToolOptions=null,this._activeCreateOptions=null,this._menuOpen=!1,this._selectionToolbar=null,this._viewModelHandlesGroup=null,this.availableCreateTools=["point","polyline","polygon","rectangle","circle"],this.creationMode="continuous",this.customToolOptions=null,this.layout="horizontal",this.messages=null,this.messagesCommon=null,this.visibleElements=new zV,this._activateCreateTool=this._activateCreateTool.bind(this),this.viewModel=(t==null?void 0:t.viewModel)||new W5e}initialize(){const{layer:t,view:e}=this,i=new Y4e({view:(e==null?void 0:e.type)==="2d"?e:null,sources:t?[t]:null});this.addHandles([Ee(()=>this.viewModel,n=>{this._viewModelHandlesGroup=Rt(this._viewModelHandlesGroup),n&&(this._viewModelHandlesGroup=Dc([n.on("create",s=>{this.scheduleRender(),this._onCreateOperation(s)}),n.on("update",()=>this.scheduleRender()),n.on("delete",s=>this.emit("delete",s)),n.on("undo",()=>this.scheduleRender()),n.on("redo",()=>this.scheduleRender()),Ee(()=>n.layer,s=>{this._selectionToolbar&&(this._selectionToolbar.sources=s?[s]:null)}),Ee(()=>n.view,s=>{this._selectionToolbar&&(this._selectionToolbar.view=(s==null?void 0:s.type)==="2d"?s:null)}),Ee(()=>n.state,()=>this.notifyChange("state"))]))},Pi),ur(()=>i.activeToolInfo,()=>this.viewModel.cancel()),i.on("complete",n=>this._onSelectionOperationComplete(n)),Ee(()=>{const{selectionTools:n}=this.visibleElements;return{lassoTool:!!(n!=null&&n["lasso-selection"]),rectangleTool:!!(n!=null&&n["rectangle-selection"])}},n=>{Object.assign(i.visibleElements,n)},Pi)]),this._selectionToolbar=i}loadDependencies(){return Cl({action:()=>ge(()=>import("./calcite-action-DiQIcL0L.js"),[],import.meta.url),icon:()=>ge(()=>import("./calcite-icon-CWxO1up_.js"),[],import.meta.url)})}destroy(){var t;(t=this._selectionToolbar)==null||t.destroy(),this._viewModelHandlesGroup=Rt(this._viewModelHandlesGroup)}get activeTool(){var e;const t=(e=this._selectionToolbar)==null?void 0:e.activeToolInfo;if(t)switch(t.toolName){case"lasso":return"lasso-selection";case"rectangle":return"rectangle-selection";case"default":return"custom-selection"}return this.viewModel.activeTool}get activeTooltip(){return this.viewModel.activeTooltip}get createGraphic(){return this.viewModel.createGraphic}get defaultCreateOptions(){return this.viewModel.defaultCreateOptions}set defaultCreateOptions(t){this.viewModel.defaultCreateOptions=t}get defaultUpdateOptions(){return this.viewModel.defaultUpdateOptions}set defaultUpdateOptions(t){this.viewModel.defaultUpdateOptions=t}get icon(){return"pencil"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get labelOptions(){return this.viewModel.labelOptions}set labelOptions(t){this.viewModel.labelOptions=t}get layer(){return this.viewModel.layer}set layer(t){this.viewModel.layer=t}get snappingOptions(){return this.viewModel.snappingOptions}set snappingOptions(t){this.viewModel.snappingOptions=t}get state(){var t;return(t=this._selectionToolbar)!=null&&t.activeToolInfo?"active":this.viewModel.state}get tooltipOptions(){return this.viewModel.tooltipOptions}set tooltipOptions(t){this.viewModel.tooltipOptions=t}get updateGraphics(){return this.viewModel.updateGraphics}get valueOptions(){return this.viewModel.valueOptions}set valueOptions(t){this.viewModel.valueOptions=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}set viewModel(t){const e=this._get("viewModel");t!==e&&(e&&mt(e),this._set("viewModel",t))}get _effectiveAvailableCreateTools(){const{availableCreateTools:t,visibleElements:e}=this;return t==null?void 0:t.filter(i=>{var n;return!!((n=e.createTools)!=null&&n[i])})}create(t,e,i){const n=(i==null?void 0:i.createOptions)??e;return this._activeCreateOptions=n||null,this._activeCustomToolOptions=i,Yr(this.viewModel.create(t,n))}update(t,e){return Yr(this.viewModel.update(t,e))}complete(){this.viewModel.complete()}cancel(){var t;(t=this._selectionToolbar)==null||t.cancel(),this.viewModel.cancel(),this._activeCustomToolOptions=null}undo(){var t;this.viewModel.undo(),(t=this.view)==null||t.focus()}redo(){var t;this.viewModel.redo(),(t=this.view)==null||t.focus()}delete(){this.viewModel.delete()}duplicate(){return this.viewModel.duplicate()}render(){const{label:t,layout:e,viewModel:{state:i}}=this;return re("div",{"aria-label":t,class:this.classes(gn.base,Qe.widget,{[Qe.disabled]:i==="disabled",[gn.verticalLayout]:e==="vertical",[gn.horizontalLayout]:e==="horizontal"})},re("div",{class:gn.panel,role:"toolbar"},this._renderTopPanelContents()),re("div",{class:this.classes(gn.panel,gn.infoPanel)},this._renderInfoPanelContents()))}_renderTopPanelContents(){var m;const t=this.classes(gn.section,gn.toolSection),{_effectiveAvailableCreateTools:e,customToolOptions:i,visibleElements:n,viewModel:s}=this,h=s.updateOnGraphicClick||((m=this._selectionToolbar)==null?void 0:m.visibleToolCount),f=!(!(e!=null&&e.length)&&!(i!=null&&i.length));return[h?re("div",{class:t,key:"selection-button-container",role:"menu"},this._renderDefaultSelectionButton(),this._renderSelectionToolbar()):null,f?re("div",{class:t,role:"menu"},this._renderDrawActions(),this._renderCustomToolActions()):null,n.undoRedoMenu?re("div",{class:t,key:"undo-redo-menu-button-container",role:"menu"},this._renderUndoRedoMenuButtons()):null,n.settingsMenu?re("div",{class:gn.section,key:"settings-menu-button-container"},this._renderSettingsMenuButton()):null]}_renderInfoPanelContents(){return this._menuOpen?this._renderSettingsMenu():this.updateGraphics.length?[re("div",{class:this.classes(gn.section,gn.infoSection,gn.infoCountSection),key:"feature-count-container"},this._renderFeatureCount()),re("div",{class:this.classes(gn.section,gn.infoSection),key:"delete-button-container"},this._renderDuplicateButton(),this._renderDeleteButton())]:void 0}_renderSettingsMenu(){const{messagesCommon:t,snappingOptions:e,view:i,viewModel:n,visibleElements:s}=this,h={directionModePicker:s.directionModePicker,labelsToggle:s.labelsToggle,tooltipsToggle:s.tooltipsToggle};return re("div",{class:gn.menuContainer,"data-testid":"menu",key:"settings-menu-container",role:"menu"},re("header",{class:gn.menuHeader,key:"settings-menu-header"},re("span",{class:gn.menuTitle},t.settings)),Object.values(h).includes(!0)?re(Q4e,{sketchOptions:n.sketchOptions,viewType:i==null?void 0:i.type,visibleElements:h}):void 0,s.snappingControls&&i&&e?re(gSe,{snappingManager:this.viewModel.snappingManager,snappingOptions:e,view:i,visibleElements:s.snappingControlsElements}):void 0)}_renderFeatureCount(){const{layout:t,messages:e,updateGraphics:{length:i}}=this,n=fE(e.selectedCount,{count:i});return re("div",{"aria-label":n,class:gn.featureCountBadge},re("span",{class:gn.featureCountNumber},t==="vertical"?i:n))}_renderDuplicateButton(){if(!this.visibleElements.duplicateButton)return;const t=this.messages,e=this.updateGraphics.length>1?t.duplicateFeatures:t.duplicateFeature;return re("calcite-action",{bind:this,onclick:this._onDuplicateSelect,scale:"s",text:e,title:e},re("calcite-icon",{icon:"copy",scale:"s"}))}_renderDeleteButton(){const t=this.messages,e=this.updateGraphics.length>1?t.deleteFeatures:t.deleteFeature;return re("calcite-action",{bind:this,onclick:this.delete,scale:"s",text:e,title:e},re("calcite-icon",{icon:"trash",scale:"s"}))}_renderDefaultSelectionButton(){if(!this.viewModel.updateOnGraphicClick)return;const{messages:t,state:e}=this,i=t.selectFeature;return re("calcite-action",{active:e==="ready",bind:this,disabled:e==="disabled",onclick:this._activateDefaultSelectTool,scale:"s",text:i,title:i},re("calcite-icon",{icon:"cursor",scale:"s"}))}_renderSelectionToolbar(){var t;if(((t=this.view)==null?void 0:t.type)==="2d"&&this._selectionToolbar)return this._selectionToolbar.render()}_renderDrawActions(){var e;const{messages:t}=this;return(e=this._effectiveAvailableCreateTools)==null?void 0:e.map(i=>{switch(i){case"point":return this._renderAction(i,t.drawPoint,"pin");case"polyline":return this._renderAction(i,t.drawPolyline,"line");case"polygon":return this._renderAction(i,t.drawPolygon,"polygon");case"rectangle":return this._renderAction(i,t.drawRectangle,"rectangle");case"circle":return this._renderAction(i,t.drawCircle,"circle");default:return}})}_renderCustomToolActions(){var t;return(t=this.customToolOptions)==null?void 0:t.map(e=>this._renderCustomToolAction(e))}_renderCustomToolAction(t){var h;const{icon:e,label:i,toolKey:n,toolName:s}=t;return re("calcite-action",{active:((h=this._activeCustomToolOptions)==null?void 0:h.toolKey)===n,bind:this,disabled:this.state==="disabled",onclick:()=>this._activateCreateTool(s,null,t),scale:"s",text:i,title:i},re("calcite-icon",{icon:e,scale:"s"}))}_renderAction(t,e,i){return re("calcite-action",{active:this.activeTool===t&&!this._activeCustomToolOptions,bind:this,disabled:this.state==="disabled",onclick:()=>this._activateCreateTool(t),scale:"s",text:e,title:e},re("calcite-icon",{icon:i,scale:"s"}))}_renderUndoRedoMenuButtons(){return[this._renderUndoButton(),this._renderRedoButton()]}_renderUndoButton(){const t=this.messages.undo;return re("calcite-action",{bind:this,disabled:!this.viewModel.canUndo()||this.state==="disabled",onclick:this.undo,scale:"s",text:t,title:t},re("calcite-icon",{icon:J9(this.container)?"redo":"undo",scale:"s"}))}_renderRedoButton(){const t=this.messages.redo;return re("calcite-action",{bind:this,disabled:!this.viewModel.canRedo()||this.state==="disabled",onclick:this.redo,scale:"s",text:t,title:t},re("calcite-icon",{icon:J9(this.container)?"undo":"redo",scale:"s"}))}_renderSettingsMenuButton(){const t=this.messagesCommon.settings;return re("calcite-action",{active:this._menuOpen,bind:this,"data-testid":"settings-menu-action",disabled:this.state==="disabled",onclick:this._toggleMenu,scale:"s",text:t,title:t},re("calcite-icon",{icon:"gear",scale:"s"}))}_activateCreateTool(t,e,i){var s;const n=this._activeCustomToolOptions;if(i||n){if((i==null?void 0:i.toolKey)===(n==null?void 0:n.toolKey))return void this.cancel()}else if(this.activeTool===t)return void this.cancel();(s=this._selectionToolbar)==null||s.cancel(),this.create(t,e,i)}_onCreateOperation(t){if(t.state!=="complete")return;const{creationMode:e}=this,{type:i}=t;if(i==="create"){const{tool:n,graphic:s}=t,h=this._activeCreateOptions;this._activeCreateOptions=null,e==="continuous"?this.create(n,h,this._activeCustomToolOptions):(this._activeCustomToolOptions=null,e==="update"&&this.update([s]))}}_toggleMenu(){this._menuOpen=!this._menuOpen,this.scheduleRender()}_onDuplicateSelect(){const t=this.duplicate(),e=this.viewModel.activeTool;e!=="transform"&&e!=="reshape"||this.update(t,{tool:e})}_onSelectionOperationComplete(t){const{viewModel:{defaultUpdateOptions:e}}=this,{selection:i}=t;if(!t.aborted&&i.length){const n=e.tool,s=i.length>1&&n==="reshape"?"transform":n;this.update(i,{...e,tool:s})}this.notifyChange("state")}_activateDefaultSelectTool(){var t;this.cancel(),(t=this.view)==null||t.focus()}};_([S()],qt.prototype,"_activeCustomToolOptions",void 0),_([S()],qt.prototype,"_activeCreateOptions",void 0),_([S()],qt.prototype,"activeTool",null),_([S({readOnly:!0})],qt.prototype,"activeTooltip",null),_([S({cast:t=>{if(!(t!=null&&t.length))return null;const e=new Set(["point","polyline","polygon","rectangle","circle"]);return t.filter(i=>e.has(i))}})],qt.prototype,"availableCreateTools",void 0),_([S({readOnly:!0})],qt.prototype,"createGraphic",null),_([S()],qt.prototype,"creationMode",void 0),_([S()],qt.prototype,"customToolOptions",void 0),_([S()],qt.prototype,"defaultCreateOptions",null),_([S()],qt.prototype,"defaultUpdateOptions",null),_([S()],qt.prototype,"icon",null),_([S()],qt.prototype,"label",null),_([S()],qt.prototype,"labelOptions",null),_([S()],qt.prototype,"layer",null),_([S({type:["horizontal","vertical"]})],qt.prototype,"layout",void 0),_([S(),Gn("esri/widgets/Sketch/t9n/Sketch")],qt.prototype,"messages",void 0),_([S(),Gn("esri/t9n/common")],qt.prototype,"messagesCommon",void 0),_([S()],qt.prototype,"snappingOptions",null),_([S()],qt.prototype,"state",null),_([S()],qt.prototype,"tooltipOptions",null),_([S({readOnly:!0})],qt.prototype,"updateGraphics",null),_([S({type:S_,nonNullable:!0})],qt.prototype,"valueOptions",null),_([S()],qt.prototype,"view",null),_([S(),jU(["create","update","undo","redo"])],qt.prototype,"viewModel",null),_([S({type:zV,nonNullable:!0})],qt.prototype,"visibleElements",void 0),_([S()],qt.prototype,"_effectiveAvailableCreateTools",null),qt=_([J("esri.widgets.Sketch")],qt);const mSe=qt;var ySe=ap("<div></div>"),vSe=ap("<h1>Map getting ready...</h1>");function bSe(t,e){sp(e,!1);const i=o3(),n=()=>Fh(ml,"$mapView",i),s=x=>{const E=new SH({id:"sketchLayer"});n().map.add(E);const k=new mSe({view:n(),layer:E,container:x,creationMode:"update",availableCreateTools:["rectangle"]}),I=P=>{ml.set(P.graphic.extent)};k.on("create",I)};Vm();var h=VW(),f=wW(h);{var m=x=>{var E=ySe();ZW(E,k=>s==null?void 0:s(k)),Kh(x,E)},y=x=>{var E=vSe();Kh(x,E)};nP(f,x=>{n()&&n().map?x(m):x(y,!1)})}Kh(t,h),op()}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const Jv={icon:"icon",iconContainer:"icon-container",select:"select",wrapper:"wrapper"},rO={validationMessage:"selectValidationMessage"},wSe=`:host{--calcite-icon-size:1rem;--calcite-spacing-eighth:0.125rem;--calcite-spacing-quarter:0.25rem;--calcite-spacing-half:0.5rem;--calcite-spacing-three-quarters:0.75rem;--calcite-spacing:1rem;--calcite-spacing-plus-quarter:1.25rem;--calcite-spacing-plus-half:1.5rem;--calcite-spacing-double:2rem;--calcite-menu-min-width:10rem;--calcite-header-min-height:3rem;--calcite-footer-min-height:3rem}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;flex-direction:column}.wrapper{position:relative;display:flex;align-items:stretch;inline-size:var(--select-width)}.wrapper:focus-within .icon,.wrapper:active .icon,.wrapper:hover .icon{color:var(--calcite-color-text-1)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([scale=s]){--calcite-select-font-size:var(--calcite-font-size--2);--calcite-select-spacing-inline:0.5rem 2rem}:host([scale=s]) .wrapper{block-size:1.5rem}:host([scale=s]) .icon-container{padding-inline:0.5rem}:host([scale=m]){--calcite-select-font-size:var(--calcite-font-size--1);--calcite-select-spacing-inline:0.75rem 2.5rem}:host([scale=m]) .wrapper{block-size:2rem}:host([scale=m]) .icon-container{padding-inline:0.75rem}:host([scale=l]){--calcite-select-font-size:var(--calcite-font-size-0);--calcite-select-spacing-inline:1rem 3rem}:host([scale=l]) .wrapper{block-size:44px}:host([scale=l]) .icon-container{padding-inline:1rem}:host([width=auto]){inline-size:auto}:host([width=half]){inline-size:50%}:host([width=full]){inline-size:100%}.select{margin:0px;box-sizing:border-box;inline-size:100%;cursor:pointer;appearance:none;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;border-radius:0px;border-width:1px;border-style:solid;border-color:var(--calcite-color-border-input);background-color:var(--calcite-color-foreground-1);font-family:inherit;color:var(--calcite-color-text-2);outline-color:transparent;font-size:var(--calcite-select-font-size);padding-inline:var(--calcite-select-spacing-inline);border-inline-end-width:0px}.select:focus{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}select:disabled{border-color:var(--calcite-color-border-input);--tw-bg-opacity:1}.icon-container{pointer-events:none;position:absolute;inset-block:0px;display:flex;align-items:center;border-width:0px;border-style:solid;border-color:var(--calcite-color-border-input);background-color:transparent;color:var(--calcite-color-text-2);inset-inline-end:0px;border-inline-width:0px 1px}.icon-container .icon{color:var(--calcite-color-text-3)}:host([status=invalid]) select,:host([status=invalid]) .icon-container{border-color:var(--calcite-color-status-danger)}:host([status=invalid]) select:focus,:host([status=invalid]) .icon-container:focus{outline:2px solid var(--calcite-color-status-danger);outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}.select:focus~.icon-container{border-color:transparent}.validation-container{display:flex;flex-direction:column;align-items:flex-start;align-self:stretch}:host([scale=m]) .validation-container,:host([scale=l]) .validation-container{padding-block-start:0.5rem}:host([scale=s]) .validation-container{padding-block-start:0.25rem}::slotted(input[slot=hidden-form-input]){margin:0 !important;opacity:0 !important;outline:none !important;padding:0 !important;position:absolute !important;inset:0 !important;transform:none !important;-webkit-appearance:none !important;z-index:-1 !important}:host([hidden]){display:none}[hidden]{display:none}`,_Se=wSe;function Yv(t){return t.tagName==="CALCITE-OPTION"}function xSe(t){return t.tagName==="CALCITE-OPTION-GROUP"}const Aq=ci(class extends li{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteSelectChange=qe(this,"calciteSelectChange",6),this.componentToNativeEl=new Map,this.mutationObserver=hn("mutation",()=>this.populateInternalSelect()),this.handleInternalSelectChange=()=>{const e=this.selectEl.selectedOptions[0];this.selectFromNativeOption(e),requestAnimationFrame(()=>this.emitChangeEvent())},this.populateInternalSelect=()=>{const e=Array.from(this.el.children).filter(i=>i.tagName==="CALCITE-OPTION"||i.tagName==="CALCITE-OPTION-GROUP");this.clearInternalSelect(),e.forEach(i=>{var n;return(n=this.selectEl)==null?void 0:n.append(this.toNativeElement(i))})},this.storeSelectRef=e=>{this.selectEl=e,this.populateInternalSelect();const i=this.selectEl.selectedOptions[0];this.selectFromNativeOption(i)},this.emitChangeEvent=()=>{this.calciteSelectChange.emit()},this.disabled=!1,this.form=void 0,this.label=void 0,this.validationMessage=void 0,this.validationIcon=void 0,this.validity={valid:!1,badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1},this.name=void 0,this.required=!1,this.scale="m",this.status="idle",this.value=null,this.selectedOption=void 0,this.width="auto"}valueHandler(e){this.updateItemsFromValue(e)}selectedOptionHandler(e){this.value=e==null?void 0:e.value}connectedCallback(){var i;const{el:e}=this;(i=this.mutationObserver)==null||i.observe(e,{subtree:!0,childList:!0}),V0(this),EM(this)}disconnectedCallback(){var e;(e=this.mutationObserver)==null||e.disconnect(),u_(this),MM(this)}componentWillLoad(){vo(this),typeof this.value=="string"&&this.updateItemsFromValue(this.value)}componentDidLoad(){var e;bo(this),tve(this,((e=this.selectedOption)==null?void 0:e.value)??"")}componentDidRender(){Al(this)}async setFocus(){await wo(this),y0(this.selectEl)}handleOptionOrGroupChange(e){e.stopPropagation();const i=e.target,n=this.componentToNativeEl.get(i);n&&(this.updateNativeElement(i,n),Yv(i)&&i.selected&&(this.deselectAllExcept(i),this.selectedOption=i))}onLabelClick(){this.setFocus()}updateItemsFromValue(e){this.el.querySelectorAll("calcite-option").forEach(i=>i.selected=i.value===e)}updateNativeElement(e,i){if(i.disabled=e.disabled,i.label=e.label,Yv(e)){const n=i;n.selected=e.selected,n.value=e.value,n.innerText=e.label}}clearInternalSelect(){this.componentToNativeEl.forEach(e=>e.remove()),this.componentToNativeEl.clear()}selectFromNativeOption(e){if(!e)return;let i;this.componentToNativeEl.forEach((n,s)=>{Yv(s)&&n===e&&(s.selected=!0,i=s,this.deselectAllExcept(s))}),i&&(this.selectedOption=i)}toNativeElement(e){if(Yv(e)){const i=document.createElement("option");return this.updateNativeElement(e,i),this.componentToNativeEl.set(e,i),i}if(xSe(e)){const i=document.createElement("optgroup");return this.updateNativeElement(e,i),Array.from(e.children).forEach(n=>{const s=this.toNativeElement(n);i.append(s),this.componentToNativeEl.set(e,s)}),this.componentToNativeEl.set(e,i),i}throw new Error("unsupported element child provided")}deselectAllExcept(e){this.el.querySelectorAll("calcite-option").forEach(i=>{i!==e&&(i.selected=!1)})}renderChevron(){return X("div",{class:Jv.iconContainer},X("calcite-icon",{class:Jv.icon,icon:"chevron-down",scale:Ji(this.scale)}))}render(){const{disabled:e}=this;return X(dn,{key:"d2e0ad4197079513f4e9e0070fb397c4f8331597"},X(Ol,{key:"5eee0d42742248209469fb7a5e3541cdbe373d30",disabled:e},X("div",{key:"e12c66d415dfe7c24e63731f2a83a081687fba8a",class:Jv.wrapper},X("select",{key:"22685962db75d2527740d288f016665ec5e6053e","aria-errormessage":rO.validationMessage,"aria-invalid":cn(this.status==="invalid"),"aria-label":Lm(this),class:Jv.select,disabled:e,onChange:this.handleInternalSelectChange,ref:this.storeSelectRef},X("slot",{key:"1b105206faa1f0765add18140b0f99f3d273c11f"})),this.renderChevron(),X($M,{key:"5767128465128a9fb5f69c9241bef0da56b9432e",component:this})),this.validationMessage&&this.status==="invalid"?X(NM,{icon:this.validationIcon,id:rO.validationMessage,message:this.validationMessage,scale:this.scale,status:this.status}):null))}get el(){return this}static get watchers(){return{value:["valueHandler"],selectedOption:["selectedOptionHandler"]}}static get style(){return _Se}},[1,"calcite-select",{disabled:[516],form:[513],label:[1],validationMessage:[1,"validation-message"],validationIcon:[520,"validation-icon"],validity:[1040],name:[513],required:[516],scale:[513],status:[513],value:[1025],selectedOption:[1040],width:[513],setFocus:[64]},[[0,"calciteInternalOptionChange","handleOptionOrGroupChange"],[0,"calciteInternalOptionGroupChange","handleOptionOrGroupChange"]],{value:["valueHandler"],selectedOption:["selectedOptionHandler"]}]);function Oq(){if(typeof customElements>"u")return;["calcite-select","calcite-icon","calcite-input-message"].forEach(e=>{switch(e){case"calcite-select":customElements.get(e)||customElements.define(e,Aq);break;case"calcite-icon":customElements.get(e)||Or();break;case"calcite-input-message":customElements.get(e)||b_();break}})}Oq();const SSe=Aq,TSe=Oq,vRe=Object.freeze(Object.defineProperty({__proto__:null,CalciteSelect:SSe,defineCustomElement:TSe},Symbol.toStringTag,{value:"Module"}));/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const ESe=":host{display:block}:host([hidden]){display:none}[hidden]{display:none}",MSe=ESe,Pq=ci(class extends li{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteInternalOptionChange=qe(this,"calciteInternalOptionChange",6),this.mutationObserver=hn("mutation",()=>{this.ensureTextContentDependentProps(),this.calciteInternalOptionChange.emit()}),this.disabled=!1,this.label=void 0,this.selected=void 0,this.value=void 0}handlePropChange(e,i,n){(n==="label"||n==="value")&&this.ensureTextContentDependentProps(),this.calciteInternalOptionChange.emit()}ensureTextContentDependentProps(){const{el:{textContent:e},internallySetLabel:i,internallySetValue:n,label:s,value:h}=this;(!s||s===i)&&(this.label=e,this.internallySetLabel=e),(h==null||h===n)&&(this.value=e,this.internallySetValue=e)}connectedCallback(){var e;this.ensureTextContentDependentProps(),(e=this.mutationObserver)==null||e.observe(this.el,{attributeFilter:["label","value"],characterData:!0,childList:!0,subtree:!0})}disconnectedCallback(){var e;(e=this.mutationObserver)==null||e.disconnect()}render(){return X("slot",{key:"e5df72ac4455ee2e14c0e48a40739a9a271c9c57"},this.label)}get el(){return this}static get watchers(){return{disabled:["handlePropChange"],label:["handlePropChange"],selected:["handlePropChange"],value:["handlePropChange"]}}static get style(){return MSe}},[1,"calcite-option",{disabled:[516],label:[1025],selected:[516],value:[1032]},void 0,{disabled:["handlePropChange"],label:["handlePropChange"],selected:["handlePropChange"],value:["handlePropChange"]}]);function Rq(){if(typeof customElements>"u")return;["calcite-option"].forEach(e=>{switch(e){case"calcite-option":customElements.get(e)||customElements.define(e,Pq);break}})}Rq();const $Se=Pq,kSe=Rq,wRe=Object.freeze(Object.defineProperty({__proto__:null,CalciteOption:$Se,defineCustomElement:kSe},Symbol.toStringTag,{value:"Module"}));/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const CSe={dropdownTrigger:"trigger"},ISe=":host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline-block}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host .calcite-dropdown-wrapper{--calcite-floating-ui-z-index:var(--calcite-z-index-dropdown);display:block;position:absolute;z-index:var(--calcite-floating-ui-z-index);visibility:hidden}.calcite-dropdown-wrapper .calcite-floating-ui-anim{position:relative;transition:var(--calcite-floating-ui-transition);transition-property:inset, left, opacity;opacity:0;box-shadow:0 0 16px 0 rgba(0, 0, 0, 0.16);z-index:var(--calcite-z-index);border-radius:0.25rem}.calcite-dropdown-wrapper[data-placement^=bottom] .calcite-floating-ui-anim{inset-block-start:-5px}.calcite-dropdown-wrapper[data-placement^=top] .calcite-floating-ui-anim{inset-block-start:5px}.calcite-dropdown-wrapper[data-placement^=left] .calcite-floating-ui-anim{left:5px}.calcite-dropdown-wrapper[data-placement^=right] .calcite-floating-ui-anim{left:-5px}.calcite-dropdown-wrapper[data-placement] .calcite-floating-ui-anim--active{opacity:1;inset-block:0;left:0}:host([open]) .calcite-dropdown-wrapper{visibility:visible}:host .calcite-dropdown-content{max-block-size:45vh;inline-size:auto;overflow-y:auto;overflow-x:hidden;background-color:var(--calcite-color-foreground-1);inline-size:var(--calcite-dropdown-width)}.calcite-trigger-container{position:relative;display:flex;block-size:100%;flex:1 1 auto;word-wrap:break-word;word-break:break-word}@media (forced-colors: active){:host([open]) .calcite-dropdown-wrapper{border:1px solid canvasText}}:host([width-scale=s]){--calcite-dropdown-width:12rem}:host([width-scale=m]){--calcite-dropdown-width:14rem}:host([width-scale=l]){--calcite-dropdown-width:16rem}:host([hidden]){display:none}[hidden]{display:none}",ASe=ISe,OSe=ci(class extends li{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteDropdownSelect=qe(this,"calciteDropdownSelect",6),this.calciteDropdownBeforeClose=qe(this,"calciteDropdownBeforeClose",6),this.calciteDropdownClose=qe(this,"calciteDropdownClose",6),this.calciteDropdownBeforeOpen=qe(this,"calciteDropdownBeforeOpen",6),this.calciteDropdownOpen=qe(this,"calciteDropdownOpen",6),this.items=[],this.groups=[],this.mutationObserver=hn("mutation",()=>this.updateItems()),this.resizeObserver=hn("resize",e=>this.resizeObserverCallback(e)),this.openTransitionProp="opacity",this.guid=`calcite-dropdown-${Il()}`,this.focusLastDropdownItem=!1,this.setFilteredPlacements=()=>{const{el:e,flipPlacements:i}=this;this.filteredFlipPlacements=i?lH(i,e):null},this.updateTriggers=e=>{this.triggers=e.target.assignedElements({flatten:!0}),this.reposition(!0)},this.updateItems=()=>{this.items=this.groups.map(e=>Array.from(e==null?void 0:e.querySelectorAll("calcite-dropdown-item"))).reduce((e,i)=>[...e,...i],[]),this.updateSelectedItems(),this.reposition(!0),this.items.forEach(e=>e.scale=this.scale)},this.updateGroups=e=>{const i=e.target.assignedElements({flatten:!0}).filter(n=>n==null?void 0:n.matches("calcite-dropdown-group"));this.groups=i,this.updateItems(),this.updateGroupScale()},this.resizeObserverCallback=e=>{e.forEach(i=>{const{target:n}=i;n===this.referenceEl?this.setDropdownWidth():n===this.scrollerEl&&this.setMaxScrollerHeight()})},this.setDropdownWidth=()=>{const{referenceEl:e,scrollerEl:i}=this,n=e==null?void 0:e.clientWidth;!n||!i||(i.style.minWidth=`${n}px`)},this.setMaxScrollerHeight=()=>{const{scrollerEl:e}=this;if(!e)return;this.reposition(!0);const i=this.getMaxScrollerHeight();e.style.maxHeight=i>0?`${i}px`:"",this.reposition(!0)},this.setScrollerAndTransitionEl=e=>{this.resizeObserver.observe(e),this.scrollerEl=e,this.transitionEl=e},this.setReferenceEl=e=>{this.referenceEl=e,kf(this,this.referenceEl,this.floatingEl),this.resizeObserver.observe(e)},this.setFloatingEl=e=>{this.floatingEl=e,kf(this,this.referenceEl,this.floatingEl)},this.keyDownHandler=e=>{if(!e.composedPath().includes(this.referenceEl))return;const{defaultPrevented:i,key:n}=e;if(!i){if(n==="Escape"){this.closeCalciteDropdown(),e.preventDefault();return}if(this.open&&e.shiftKey&&n==="Tab"){this.closeCalciteDropdown(),e.preventDefault();return}d_(n)?(this.toggleDropdown(),e.preventDefault()):(n==="ArrowDown"||n==="ArrowUp")&&(this.focusLastDropdownItem=n==="ArrowUp",this.open=!0,this.el.addEventListener("calciteDropdownOpen",this.onOpenEnd))}},this.focusOnFirstActiveOrDefaultItem=()=>{const i=this.getTraversableItems().find(n=>n.selected)||(this.focusLastDropdownItem?this.items[this.items.length-1]:this.items[0]);this.focusLastDropdownItem=!1,i&&y0(i)},this.onOpenEnd=()=>{this.focusOnFirstActiveOrDefaultItem(),this.el.removeEventListener("calciteDropdownOpen",this.onOpenEnd)},this.toggleDropdown=()=>{this.open=!this.open,this.open&&this.el.addEventListener("calciteDropdownOpen",this.onOpenEnd)},this.open=!1,this.closeOnSelectDisabled=!1,this.disabled=!1,this.flipPlacements=void 0,this.maxItems=0,this.overlayPositioning="absolute",this.placement=b2e,this.selectedItems=[],this.type="click",this.widthScale=void 0,this.scale="m"}openHandler(){if(kc(this),this.disabled){this.open=!1;return}this.reposition(!0)}handleDisabledChange(e){e||(this.open=!1)}flipPlacementsHandler(){this.setFilteredPlacements(),this.reposition(!0)}maxItemsHandler(){this.setMaxScrollerHeight()}overlayPositioningHandler(){this.reposition(!0)}placementHandler(){this.reposition(!0)}handlePropsChange(){this.updateItems(),this.updateGroupScale()}async setFocus(){await wo(this),xM(this.referenceEl)}connectedCallback(){var e;(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0}),this.setFilteredPlacements(),this.open&&(this.openHandler(),kc(this)),this.updateItems(),kf(this,this.referenceEl,this.floatingEl)}componentWillLoad(){vo(this)}componentDidLoad(){bo(this),kf(this,this.referenceEl,this.floatingEl)}componentDidRender(){Al(this)}disconnectedCallback(){var e,i;(e=this.mutationObserver)==null||e.disconnect(),(i=this.resizeObserver)==null||i.disconnect(),v_(this,this.referenceEl,this.floatingEl)}render(){const{open:e,guid:i}=this;return X(dn,{key:"377c3d9687bc025f004b4efe58bfa5f0893d86d0"},X(Ol,{key:"9e2f48be045fc6db10cc7203a8b998ec2b6abafd",disabled:this.disabled},X("div",{key:"8607de2d53a4f8c4b29206ee56aa23ad4c2cbe3d",class:"calcite-trigger-container",id:`${i}-menubutton`,onClick:this.toggleDropdown,onKeyDown:this.keyDownHandler,ref:this.setReferenceEl},X("slot",{key:"07de8df34055ddc39301654a5ca312ddf293e6a9","aria-controls":`${i}-menu`,"aria-expanded":cn(e),"aria-haspopup":"menu",name:CSe.dropdownTrigger,onSlotchange:this.updateTriggers})),X("div",{key:"c1469efb62eb704b021ce6479ad55deda59582d4","aria-hidden":cn(!e),class:"calcite-dropdown-wrapper",ref:this.setFloatingEl},X("div",{key:"f875166d486a53cd393f17d9295974aa449d449f","aria-labelledby":`${i}-menubutton`,class:{"calcite-dropdown-content":!0,[_0.animation]:!0,[_0.animationActive]:e},id:`${i}-menu`,ref:this.setScrollerAndTransitionEl,role:"menu"},X("slot",{key:"bc6e61383aaf85b3d6242a86c50da68bc8b31e27",onSlotchange:this.updateGroups})))))}async reposition(e=!1){const{floatingEl:i,referenceEl:n,placement:s,overlayPositioning:h,filteredFlipPlacements:f}=this;return RM(this,{floatingEl:i,referenceEl:n,overlayPositioning:h,placement:s,flipPlacements:f,type:"menu"},e)}closeCalciteDropdownOnClick(e){this.disabled||!this.open||e.composedPath().includes(this.el)||this.closeCalciteDropdown(!1)}closeCalciteDropdownOnEvent(e){this.closeCalciteDropdown(),e.stopPropagation()}closeCalciteDropdownOnOpenEvent(e){e.composedPath().includes(this.el)||(this.open=!1)}pointerEnterHandler(){this.disabled||this.type!=="hover"||this.toggleDropdown()}pointerLeaveHandler(){this.disabled||this.type!=="hover"||this.closeCalciteDropdown()}getTraversableItems(){return this.items.filter(e=>!e.disabled&&!e.hidden)}calciteInternalDropdownItemKeyEvent(e){const{keyboardEvent:i}=e.detail,n=i.target,s=this.getTraversableItems();switch(i.key){case"Tab":this.open=!1,this.updateTabIndexOfItems(n);break;case"ArrowDown":Sg(s,n,"next");break;case"ArrowUp":Sg(s,n,"previous");break;case"Home":Sg(s,n,"first");break;case"End":Sg(s,n,"last");break}e.stopPropagation()}handleItemSelect(e){this.updateSelectedItems(),e.stopPropagation(),this.calciteDropdownSelect.emit(),(!this.closeOnSelectDisabled||e.detail.requestedDropdownGroup.selectionMode==="none")&&this.closeCalciteDropdown(),e.stopPropagation()}updateGroupScale(){var e;(e=this.groups)==null||e.forEach(i=>i.scale=this.scale)}onBeforeOpen(){this.calciteDropdownBeforeOpen.emit()}onOpen(){this.calciteDropdownOpen.emit()}onBeforeClose(){this.calciteDropdownBeforeClose.emit()}onClose(){this.calciteDropdownClose.emit()}updateSelectedItems(){this.selectedItems=this.items.filter(e=>e.selected)}getMaxScrollerHeight(){const{maxItems:e,items:i}=this;let n=0,s=0,h;return this.groups.forEach(f=>{e>0&&n<e&&Array.from(f.children).forEach((m,y)=>{y===0&&(isNaN(h)&&(h=m.offsetTop),s+=h),n<e&&(s+=m.offsetHeight,n+=1)})}),i.length>e?s:0}closeCalciteDropdown(e=!0){this.open=!1,e&&y0(this.triggers[0])}updateTabIndexOfItems(e){this.items.forEach(i=>{i.tabIndex=e!==i?-1:0})}static get delegatesFocus(){return!0}get el(){return this}static get watchers(){return{open:["openHandler"],disabled:["handleDisabledChange"],flipPlacements:["flipPlacementsHandler"],maxItems:["maxItemsHandler"],overlayPositioning:["overlayPositioningHandler"],placement:["placementHandler"],scale:["handlePropsChange"]}}static get style(){return ASe}},[17,"calcite-dropdown",{open:[1540],closeOnSelectDisabled:[516,"close-on-select-disabled"],disabled:[516],flipPlacements:[16],maxItems:[514,"max-items"],overlayPositioning:[513,"overlay-positioning"],placement:[513],selectedItems:[1040],type:[513],widthScale:[513,"width-scale"],scale:[513],setFocus:[64],reposition:[64]},[[8,"click","closeCalciteDropdownOnClick"],[0,"calciteInternalDropdownCloseRequest","closeCalciteDropdownOnEvent"],[8,"calciteDropdownOpen","closeCalciteDropdownOnOpenEvent"],[1,"pointerenter","pointerEnterHandler"],[1,"pointerleave","pointerLeaveHandler"],[0,"calciteInternalDropdownItemKeyEvent","calciteInternalDropdownItemKeyEvent"],[0,"calciteInternalDropdownItemSelect","handleItemSelect"]],{open:["openHandler"],disabled:["handleDisabledChange"],flipPlacements:["flipPlacementsHandler"],maxItems:["maxItemsHandler"],overlayPositioning:["overlayPositioningHandler"],placement:["placementHandler"],scale:["handlePropsChange"]}]);function PSe(){if(typeof customElements>"u")return;["calcite-dropdown"].forEach(e=>{switch(e){case"calcite-dropdown":customElements.get(e)||customElements.define(e,OSe);break}})}PSe();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const Ih={container:"container",containerNone:"container--none-selection",icon:"dropdown-item-icon",iconEnd:"dropdown-item-icon--end",iconStart:"dropdown-item-icon--start",itemContent:"dropdown-item-content",link:"dropdown-link"};/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const RSe=":host{position:relative;display:block}.container{text-align:start}.dropdown-title{margin-block-end:-1px;display:block;cursor:default;overflow-wrap:break-word;border-width:0px;border-block-end-width:1px;border-style:solid;border-color:var(--calcite-color-border-3);font-weight:var(--calcite-font-weight-bold);color:var(--calcite-color-text-2)}.dropdown-separator{display:block;block-size:1px;background-color:var(--calcite-color-border-3)}:host([scale=s]){font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s]) .dropdown-title{padding:0.5rem}:host([scale=m]){font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) .dropdown-title{padding:0.75rem}:host([scale=l]){font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) .dropdown-title{padding:1rem}:host([hidden]){display:none}[hidden]{display:none}",NSe=RSe,Nq=ci(class extends li{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteInternalDropdownItemChange=qe(this,"calciteInternalDropdownItemChange",6),this.updateItems=()=>{Array.from(this.el.querySelectorAll("calcite-dropdown-item")).forEach(e=>e.selectionMode=this.selectionMode)},this.mutationObserver=hn("mutation",()=>this.updateItems()),this.groupTitle=void 0,this.scale="m",this.selectionMode="single"}handlePropsChange(){this.updateItems()}connectedCallback(){var e;this.updateItems(),(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0})}componentWillLoad(){this.groupPosition=this.getGroupPosition()}disconnectedCallback(){var e;(e=this.mutationObserver)==null||e.disconnect()}render(){const e=this.groupTitle?X("span",{"aria-hidden":"true",class:"dropdown-title"},this.groupTitle):null,i=this.groupPosition>0?X("div",{class:"dropdown-separator",role:"separator"}):null;return X(dn,{key:"f41943751aefdb17d4f5d5bd8778c219cfd01a00","aria-label":this.groupTitle,role:"group"},X("div",{key:"87b78040b93c06081ca8282a785d466ed8fcf334",class:{[Ih.container]:!0}},i,e,X("slot",{key:"f635a5bdbe439315eba6292a4858cbd8519d23d1"})))}updateActiveItemOnChange(e){this.requestedDropdownGroup=e.detail.requestedDropdownGroup,this.requestedDropdownItem=e.detail.requestedDropdownItem,this.calciteInternalDropdownItemChange.emit({requestedDropdownGroup:this.requestedDropdownGroup,requestedDropdownItem:this.requestedDropdownItem})}getGroupPosition(){return Array.prototype.indexOf.call(this.el.parentElement.querySelectorAll("calcite-dropdown-group"),this.el)}static get delegatesFocus(){return!0}get el(){return this}static get watchers(){return{selectionMode:["handlePropsChange"]}}static get style(){return NSe}},[17,"calcite-dropdown-group",{groupTitle:[513,"group-title"],scale:[513],selectionMode:[513,"selection-mode"]},[[0,"calciteInternalDropdownItemSelect","updateActiveItemOnChange"]],{selectionMode:["handlePropsChange"]}]);function Lq(){if(typeof customElements>"u")return;["calcite-dropdown-group"].forEach(e=>{switch(e){case"calcite-dropdown-group":customElements.get(e)||customElements.define(e,Nq);break}})}Lq();const LSe=Nq,DSe=Lq,SRe=Object.freeze(Object.defineProperty({__proto__:null,CalciteDropdownGroup:LSe,defineCustomElement:DSe},Symbol.toStringTag,{value:"Module"}));/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const zSe=`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{position:relative;display:flex;flex-grow:1;align-items:center;outline-color:transparent}.container{position:relative;display:flex;flex-grow:1;cursor:pointer;align-items:center;color:var(--calcite-color-text-3);text-decoration-line:none;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);text-align:start}.container a{position:relative;display:flex;flex-grow:1;cursor:pointer;align-items:center;color:var(--calcite-color-text-3);text-decoration-line:none;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);outline-color:transparent}.dropdown-item-content{flex:1 1 auto;padding-block:0.125rem}.dropdown-item-icon{position:relative;opacity:0;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transform:scale(0.9)}:host([scale=s]) .container{padding-block:0.25rem;padding-inline:0.5rem;font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s]) .dropdown-item-icon,:host([scale=s]) .dropdown-item-icon--start{padding-inline-end:var(--calcite-spacing-sm)}:host([scale=s]) .dropdown-item-icon--end{padding-inline-start:var(--calcite-spacing-sm)}:host([scale=m]) .container{padding-block:0.5rem;padding-inline:0.75rem;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) .dropdown-item-icon,:host([scale=m]) .dropdown-item-icon--start{padding-inline-end:var(--calcite-spacing-md)}:host([scale=m]) .dropdown-item-icon--end{padding-inline-start:var(--calcite-spacing-md)}:host([scale=l]) .container{padding-block:0.625rem;padding-inline:1rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) .dropdown-item-icon,:host([scale=l]) .dropdown-item-icon--start{padding-inline-end:var(--calcite-spacing-xl)}:host([scale=l]) .dropdown-item-icon--end{padding-inline-start:var(--calcite-spacing-xl)}:host(:focus){outline:2px solid transparent;outline-offset:2px;outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}:host(:focus) .container{color:var(--calcite-color-text-1);text-decoration-line:none}:host(:hover:not([disabled])) .container,:host(:active:not([disabled])) .container{background-color:var(--calcite-color-foreground-2);color:var(--calcite-color-text-1);text-decoration-line:none}:host(:hover:not([disabled])) .dropdown-link,:host(:active:not([disabled])) .dropdown-link{color:var(--calcite-color-text-1)}:host(:active:not([disabled])) .container{background-color:var(--calcite-color-foreground-3)}:host([selected]) .container:not(.container--none-selection),:host([selected]) .dropdown-link{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1)}:host([selected]) .container:not(.container--none-selection) calcite-icon,:host([selected]) .dropdown-link calcite-icon{color:var(--calcite-color-brand)}:host(:hover:not([disabled])) .dropdown-item-icon{color:var(--calcite-color-border-1);opacity:1}:host([selected]) .dropdown-item-icon{color:var(--calcite-color-brand);opacity:1}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}`,FSe=zSe,Dq=ci(class extends li{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteDropdownItemSelect=qe(this,"calciteDropdownItemSelect",6),this.calciteInternalDropdownItemSelect=qe(this,"calciteInternalDropdownItemSelect",6),this.calciteInternalDropdownItemKeyEvent=qe(this,"calciteInternalDropdownItemKeyEvent",6),this.calciteInternalDropdownCloseRequest=qe(this,"calciteInternalDropdownCloseRequest",6),this.disabled=!1,this.href=void 0,this.iconFlipRtl=void 0,this.iconStart=void 0,this.iconEnd=void 0,this.label=void 0,this.rel=void 0,this.selected=!1,this.target=void 0,this.selectionMode="single",this.scale="m"}async setFocus(){var e;await wo(this),(e=this.el)==null||e.focus()}componentWillLoad(){vo(this),this.initialize()}componentDidLoad(){bo(this)}connectedCallback(){this.initialize()}componentDidRender(){Al(this)}render(){const{href:e,selectionMode:i,label:n,iconFlipRtl:s}=this,h=X("calcite-icon",{key:"1ec1c941651dda8f39fa15427592141f04180f3e",class:Ih.iconStart,flipRtl:s==="start"||s==="both",icon:this.iconStart,scale:Ji(this.scale)}),f=X("span",{key:"3ab167ed4054ca34b4e13e72b752af6cf25522ae",class:Ih.itemContent},X("slot",{key:"88cf44809fb48450c66cc8f105bbda008a78157d"})),m=X("calcite-icon",{key:"32fb27182943a032c0037f1f878a95c194d2dff1",class:Ih.iconEnd,flipRtl:s==="end"||s==="both",icon:this.iconEnd,scale:Ji(this.scale)}),y=this.iconStart&&this.iconEnd?[h,f,m]:this.iconStart?[h,f]:this.iconEnd?[f,m]:f,x=e?X("a",{"aria-label":n,class:Ih.link,href:e,ref:P=>this.childLink=P,rel:this.rel,tabIndex:-1,target:this.target},y):y,E=e?null:i==="single"?"menuitemradio":i==="multiple"?"menuitemcheckbox":"menuitem",k=i!=="none"?cn(this.selected):null,{disabled:I}=this;return X(dn,{key:"beec8e51bf18bdcab1928181828b372cc70bb7ee","aria-checked":k,"aria-label":e?"":n,role:E,tabIndex:I?-1:0},X(Ol,{key:"5cbbd1074d6c571f4cac3a99e4a2c09bf113db55",disabled:I},X("div",{key:"bff025aeb280c9d0d829e5cf4d94e9392604e607",class:{[Ih.container]:!0,[Ih.containerNone]:i==="none"}},i!=="none"?X("calcite-icon",{class:Ih.icon,icon:i==="multiple"?"check":"bullet-point",scale:Ji(this.scale)}):null,x)))}onClick(){this.emitRequestedItem()}keyDownHandler(e){switch(e.key){case" ":case"Enter":this.emitRequestedItem(),this.href&&this.childLink.click(),e.preventDefault();break;case"Escape":this.calciteInternalDropdownCloseRequest.emit(),e.preventDefault();break;case"Tab":this.calciteInternalDropdownItemKeyEvent.emit({keyboardEvent:e});break;case"ArrowUp":case"ArrowDown":case"Home":case"End":e.preventDefault(),this.calciteInternalDropdownItemKeyEvent.emit({keyboardEvent:e});break}}updateActiveItemOnChange(e){e.composedPath().includes(this.parentDropdownGroupEl)&&(this.requestedDropdownGroup=e.detail.requestedDropdownGroup,this.requestedDropdownItem=e.detail.requestedDropdownItem,this.determineActiveItem()),e.stopPropagation()}initialize(){this.parentDropdownGroupEl=this.el.closest("calcite-dropdown-group"),this.selectionMode==="none"&&(this.selected=!1)}determineActiveItem(){switch(this.selectionMode){case"multiple":this.el===this.requestedDropdownItem&&(this.selected=!this.selected);break;case"single":this.el===this.requestedDropdownItem?this.selected=!0:this.requestedDropdownGroup===this.parentDropdownGroupEl&&(this.selected=!1);break;case"none":this.selected=!1;break}}emitRequestedItem(){this.calciteDropdownItemSelect.emit(),this.calciteInternalDropdownItemSelect.emit({requestedDropdownItem:this.el,requestedDropdownGroup:this.parentDropdownGroupEl})}get el(){return this}static get style(){return FSe}},[1,"calcite-dropdown-item",{disabled:[516],href:[513],iconFlipRtl:[513,"icon-flip-rtl"],iconStart:[513,"icon-start"],iconEnd:[513,"icon-end"],label:[1],rel:[513],selected:[1540],target:[513],selectionMode:[1,"selection-mode"],scale:[513],setFocus:[64]},[[0,"click","onClick"],[0,"keydown","keyDownHandler"],[16,"calciteInternalDropdownItemChange","updateActiveItemOnChange"]]]);function zq(){if(typeof customElements>"u")return;["calcite-dropdown-item","calcite-icon"].forEach(e=>{switch(e){case"calcite-dropdown-item":customElements.get(e)||customElements.define(e,Dq);break;case"calcite-icon":customElements.get(e)||Or();break}})}zq();const jSe=Dq,GSe=zq,ERe=Object.freeze(Object.defineProperty({__proto__:null,CalciteDropdownItem:jSe,defineCustomElement:GSe},Symbol.toStringTag,{value:"Module"}));var USe=ap('<div class="cntrl-container"><calcite-label>Map size <calcite-select><calcite-option>Full size</calcite-option> <calcite-option>900px x 400px</calcite-option></calcite-select></calcite-label> <div><calcite-dropdown><calcite-button>Use extent from MAP</calcite-button> <calcite-dropdown-group><calcite-dropdown-item>Map</calcite-dropdown-item> <calcite-dropdown-item>Extent</calcite-dropdown-item></calcite-dropdown-group></calcite-dropdown></div> <!></div>',2);function BSe(t,e){sp(e,!0);const i=Object.freeze({MAP:"MAP",GRAPHIC:"GRAPHIC"});let n=Up({extType:i.MAP});const s=Z=>{rN.set(Z.target.value)},h=Z=>{console.log("Drop down select did change"),n.extType=Z.target.selectedItems[0].label,document.getElementById("typeBtn").innerHTML=`Use extent from ${n.extType}`};var f=USe(),m=wt(f),y=zt(wt(m)),x=wt(y);Ie(x,"value","full-size");var E=zt(x,2);Ie(E,"value","size-1");var k=zt(m,2),I=wt(k);Ie(I,"width","m");var P=wt(I);Ie(P,"id","typeBtn"),Ie(P,"slot","trigger");var L=zt(P,2);Ie(L,"group-title","Extent type");var D=wt(L);Ie(D,"label","MAP");var j=zt(D,2);Ie(j,"label","EXTENT");var H=zt(k,2);{var W=Z=>{bSe(Z,{})};nP(H,Z=>{n.extType!==i.MAP&&Z(W)})}Qn("calciteSelectChange",y,s),Qn("calciteDropdownSelect",I,h),Kh(t,f),op()}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const HSe=":host{position:relative;display:block;inline-size:100%}.track,.bar{position:absolute;inset-block-start:0px;block-size:2px}.track{z-index:var(--calcite-z-index);inline-size:100%;overflow:hidden;background-color:var(--calcite-progress-background-color, var(--calcite-color-border-3))}.bar{z-index:var(--calcite-z-index);background-color:var(--calcite-progress-fill-color, var(--calcite-color-brand))}@media (forced-colors: active){.track{background-color:highlightText}.bar{background-color:linkText}}.indeterminate{inline-size:20%;animation:looping-progress-bar-ani calc(var(--calcite-internal-animation-timing-medium) / var(--calcite-internal-duration-factor) * 11 / var(--calcite-internal-duration-factor)) linear infinite}.indeterminate.calcite--rtl{animation-name:looping-progress-bar-ani-rtl}.reversed{animation-direction:reverse}.text{padding-inline:0px;padding-block:1rem 0px;text-align:center;font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-progress-text-color, var(--calcite-color-text-2))}@keyframes looping-progress-bar-ani{0%{transform:translate3d(-100%, 0, 0)}50%{inline-size:40%}100%{transform:translate3d(600%, 0, 0)}}@keyframes looping-progress-bar-ani-rtl{0%{transform:translate3d(100%, 0, 0)}50%{inline-size:40%}100%{transform:translate3d(-600%, 0, 0)}}:host([hidden]){display:none}[hidden]{display:none}",VSe=HSe,qSe=ci(class extends li{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.type="determinate",this.value=0,this.label=void 0,this.text=void 0,this.reversed=!1}render(){const i=this.type==="determinate"?{width:`${this.value*100}%`}:{},n=ll(this.el);return X("div",{key:"92597fefec948e4494425db28cd87bfad3cc76f8","aria-label":this.label||this.text,"aria-valuemax":1,"aria-valuemin":0,"aria-valuenow":this.value,role:"progressbar"},X("div",{key:"d2a8ec085909b4bd35f443d0e831d645fb159317",class:"track"},X("div",{key:"2dd26e56a0f344d02f1b4068167f61d9da4d2cbd",class:{bar:!0,indeterminate:this.type==="indeterminate",[Xo.rtl]:n==="rtl",reversed:this.reversed},style:i})),this.text?X("div",{class:"text"},this.text):null)}get el(){return this}static get style(){return VSe}},[1,"calcite-progress",{type:[513],value:[2],label:[1],text:[1],reversed:[516]}]);function Fq(){if(typeof customElements>"u")return;["calcite-progress"].forEach(e=>{switch(e){case"calcite-progress":customElements.get(e)||customElements.define(e,qSe);break}})}Fq();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const Vn={loader:"loader",clearButton:"clear-button",editingEnabled:"editing-enabled",inlineChild:"inline-child",inputIcon:"icon",prefix:"prefix",suffix:"suffix",numberButtonWrapper:"number-button-wrapper",buttonItemHorizontal:"number-button-item--horizontal",wrapper:"element-wrapper",inputWrapper:"wrapper",actionWrapper:"action-wrapper",resizeIconWrapper:"resize-icon-wrapper",numberButtonItem:"number-button-item"},Cx={validationMessage:"inputValidationMessage"},sO={tel:"phone",password:"lock",email:"email-address",date:"calendar",time:"clock",search:"search"},WSe={action:"action"},KSe=`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:block}:host([scale=s]) input,:host([scale=s]) .prefix,:host([scale=s]) .suffix{block-size:1.5rem;padding-inline:0.5rem;font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s]) textarea{block-size:1.5rem;min-block-size:1.5rem}:host([scale=s]) .number-button-wrapper,:host([scale=s]) .action-wrapper calcite-button,:host([scale=s]) .action-wrapper calcite-button button{block-size:1.5rem}:host([scale=s]) input[type=file]{block-size:1.5rem}:host([scale=s]) .clear-button{min-block-size:1.5rem;min-inline-size:1.5rem}:host([scale=s]) textarea{block-size:auto;padding-block:0.25rem;padding-inline:0.5rem;font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=m]) input,:host([scale=m]) .prefix,:host([scale=m]) .suffix{block-size:2rem;padding-inline:0.75rem;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) textarea{min-block-size:2rem}:host([scale=m]) .number-button-wrapper,:host([scale=m]) .action-wrapper calcite-button,:host([scale=m]) .action-wrapper calcite-button button{block-size:2rem}:host([scale=m]) input[type=file]{block-size:2rem}:host([scale=m]) .clear-button{min-block-size:2rem;min-inline-size:2rem}:host([scale=m]) textarea{block-size:auto;padding-block:0.5rem;padding-inline:0.75rem;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=l]) input,:host([scale=l]) .prefix,:host([scale=l]) .suffix{block-size:2.75rem;padding-inline:1rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) textarea{min-block-size:2.75rem}:host([scale=l]) .number-button-wrapper,:host([scale=l]) .action-wrapper calcite-button,:host([scale=l]) .action-wrapper calcite-button button{block-size:2.75rem}:host([scale=l]) input[type=file]{block-size:2.75rem}:host([scale=l]) .clear-button{min-block-size:2.75rem;min-inline-size:2.75rem}:host([scale=l]) textarea{block-size:auto;padding-block:0.75rem;padding-inline:1rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([disabled]) textarea{resize:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}textarea,input{transition:var(--calcite-animation-timing), block-size 0, outline-offset 0s;-webkit-appearance:none;position:relative;margin:0px;box-sizing:border-box;display:flex;max-block-size:100%;inline-size:100%;max-inline-size:100%;flex:1 1 0%;border-radius:0px;background-color:var(--calcite-color-foreground-1);font-family:inherit;font-weight:var(--calcite-font-weight-normal);color:var(--calcite-color-text-1)}input[type=search]::-webkit-search-decoration{-webkit-appearance:none}input,textarea{text-overflow:ellipsis;border-width:1px;border-style:solid;border-color:var(--calcite-color-border-input);color:var(--calcite-color-text-1)}input:placeholder-shown,textarea:placeholder-shown{text-overflow:ellipsis}input:focus,textarea:focus{border-color:var(--calcite-color-brand);color:var(--calcite-color-text-1)}input[readonly],textarea[readonly]{background-color:var(--calcite-color-background);font-weight:var(--calcite-font-weight-medium)}input[readonly]:focus,textarea[readonly]:focus{color:var(--calcite-color-text-1)}calcite-icon{color:var(--calcite-color-text-3)}textarea,input{outline-color:transparent}textarea:focus,input:focus{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}:host([status=invalid]) input,:host([status=invalid]) textarea{border-color:var(--calcite-color-status-danger)}:host([status=invalid]) input:focus,:host([status=invalid]) textarea:focus{outline:2px solid var(--calcite-color-status-danger);outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}:host([scale=s]) .icon{inset-inline-start:0.5rem}:host([scale=m]) .icon{inset-inline-start:0.75rem}:host([scale=l]) .icon{inset-inline-start:1rem}:host([icon][scale=s]) input{padding-inline-start:2rem}:host([icon][scale=m]) input{padding-inline-start:2.5rem}:host([icon][scale=l]) input{padding-inline-start:3.5rem}.element-wrapper{position:relative;order:3;display:inline-flex;flex:1 1 0%;align-items:center}.icon{pointer-events:none;position:absolute;display:block;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}.icon,.resize-icon-wrapper{z-index:var(--calcite-z-index)}input[type=text]::-ms-clear,input[type=text]::-ms-reveal{display:none;block-size:0px;inline-size:0px}input[type=search]::-webkit-search-decoration,input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-results-button,input[type=search]::-webkit-search-results-decoration,input[type=date]::-webkit-clear-button,input[type=time]::-webkit-clear-button{display:none}.clear-button{pointer-events:initial;order:4;margin:0px;box-sizing:border-box;display:flex;min-block-size:100%;cursor:pointer;align-items:center;justify-content:center;align-self:stretch;border-width:1px;border-style:solid;border-color:var(--calcite-color-border-input);background-color:var(--calcite-color-foreground-1);outline-color:transparent;border-inline-start-width:0px}.clear-button:hover{background-color:var(--calcite-color-foreground-2);transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}.clear-button:hover calcite-icon{color:var(--calcite-color-text-1);transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}.clear-button:active{background-color:var(--calcite-color-foreground-3)}.clear-button:active calcite-icon{color:var(--calcite-color-text-1)}.clear-button:focus{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}.clear-button:disabled{opacity:var(--calcite-opacity-disabled)}.loader{inset-block-start:1px;inset-inline:1px;pointer-events:none;position:absolute;display:block}.action-wrapper{order:7;display:flex}.prefix,.suffix{box-sizing:border-box;display:flex;block-size:auto;min-block-size:100%;-webkit-user-select:none;user-select:none;align-content:center;align-items:center;overflow-wrap:break-word;border-width:1px;border-style:solid;border-color:var(--calcite-color-border-input);background-color:var(--calcite-color-background);font-weight:var(--calcite-font-weight-medium);line-height:1;color:var(--calcite-color-text-2)}.prefix{order:2;border-inline-end-width:0px;inline-size:var(--calcite-input-prefix-size, auto)}.suffix{order:5;border-inline-start-width:0px;inline-size:var(--calcite-input-suffix-size, auto)}:host([alignment=start]) textarea,:host([alignment=start]) input{text-align:start}:host([alignment=end]) textarea,:host([alignment=end]) input{text-align:end}input[type=number]{-moz-appearance:textfield}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{-webkit-appearance:none;-moz-appearance:textfield;margin:0px}.number-button-wrapper{pointer-events:none;order:6;box-sizing:border-box;display:flex;flex-direction:column;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}:host([number-button-type=vertical]) .wrapper{flex-direction:row;display:flex}:host([number-button-type=vertical]) input,:host([number-button-type=vertical]) textarea{order:2}:host([number-button-type=horizontal]) .calcite--rtl .number-button-item[data-adjustment=down] calcite-icon{transform:rotate(-90deg)}:host([number-button-type=horizontal]) .calcite--rtl .number-button-item[data-adjustment=up] calcite-icon{transform:rotate(-90deg)}.number-button-item.number-button-item--horizontal[data-adjustment=down],.number-button-item.number-button-item--horizontal[data-adjustment=up]{order:1;max-block-size:100%;min-block-size:100%;align-self:stretch}.number-button-item.number-button-item--horizontal[data-adjustment=down] calcite-icon,.number-button-item.number-button-item--horizontal[data-adjustment=up] calcite-icon{transform:rotate(90deg)}.number-button-item.number-button-item--horizontal[data-adjustment=down]{border-width:1px;border-style:solid;border-color:var(--calcite-color-border-input);border-inline-end-width:0px}.number-button-item.number-button-item--horizontal[data-adjustment=down]:hover{background-color:var(--calcite-color-foreground-2)}.number-button-item.number-button-item--horizontal[data-adjustment=down]:hover calcite-icon{color:var(--calcite-color-text-1)}.number-button-item.number-button-item--horizontal[data-adjustment=up]{order:5}.number-button-item.number-button-item--horizontal[data-adjustment=up]:hover{background-color:var(--calcite-color-foreground-2)}.number-button-item.number-button-item--horizontal[data-adjustment=up]:hover calcite-icon{color:var(--calcite-color-text-1)}:host([number-button-type=vertical]) .number-button-item[data-adjustment=down]:hover{background-color:var(--calcite-color-foreground-2)}:host([number-button-type=vertical]) .number-button-item[data-adjustment=down]:hover calcite-icon{color:var(--calcite-color-text-1)}:host([number-button-type=vertical]) .number-button-item[data-adjustment=up]:hover{background-color:var(--calcite-color-foreground-2)}:host([number-button-type=vertical]) .number-button-item[data-adjustment=up]:hover calcite-icon{color:var(--calcite-color-text-1)}:host([number-button-type=vertical]) .number-button-item[data-adjustment=down]{border-block-start-width:0px}.number-button-item{max-block-size:50%;min-block-size:50%;pointer-events:initial;margin:0px;box-sizing:border-box;display:flex;cursor:pointer;align-items:center;align-self:center;border-width:1px;border-style:solid;border-color:var(--calcite-color-border-input);background-color:var(--calcite-color-foreground-1);padding-block:0px;padding-inline:0.5rem;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;border-inline-start-width:0px}.number-button-item calcite-icon{pointer-events:none;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}.number-button-item:focus{background-color:var(--calcite-color-foreground-2)}.number-button-item:focus calcite-icon{color:var(--calcite-color-text-1)}.number-button-item:active{background-color:var(--calcite-color-foreground-3)}.number-button-item:disabled{pointer-events:none}.wrapper{position:relative;display:flex;flex-direction:row;align-items:center}:input::-webkit-calendar-picker-indicator{display:none}input[type=date]::-webkit-input-placeholder{visibility:hidden !important}textarea::-webkit-resizer{position:absolute;inset-block-end:0px;box-sizing:border-box;padding-block:0px;padding-inline:0.25rem;inset-inline-end:0}.resize-icon-wrapper{inset-block-end:2px;inset-inline-end:2px;pointer-events:none;position:absolute;block-size:0.75rem;inline-size:0.75rem;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-3)}.resize-icon-wrapper calcite-icon{inset-block-end:0.25rem;inset-inline-end:0.25rem;transform:rotate(-45deg)}.calcite--rtl .resize-icon-wrapper calcite-icon{transform:rotate(45deg)}:host([type=color]) input{padding:0.25rem}:host([type=file]) input{cursor:pointer;border-width:1px;border-style:dashed;border-color:var(--calcite-color-border-input);background-color:var(--calcite-color-foreground-1);text-align:center}:host([type=file][scale=s]) input{padding-block:1px;padding-inline:0.5rem}:host([type=file][scale=m]) input{padding-block:0.25rem;padding-inline:0.75rem}:host([type=file][scale=l]) input{padding-block:0.5rem;padding-inline:1rem}:host(.no-bottom-border) input{border-block-end-width:0px}:host(.border-top-color-one) input{border-block-start-color:var(--calcite-color-border-1)}input.inline-child{background-color:transparent;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}input.inline-child .editing-enabled{background-color:inherit}input.inline-child:not(.editing-enabled){display:flex;cursor:pointer;text-overflow:ellipsis;border-color:transparent;padding-inline-start:0}.validation-container{display:flex;flex-direction:column;align-items:flex-start;align-self:stretch}:host([scale=m]) .validation-container,:host([scale=l]) .validation-container{padding-block-start:0.5rem}:host([scale=s]) .validation-container{padding-block-start:0.25rem}::slotted(input[slot=hidden-form-input]){margin:0 !important;opacity:0 !important;outline:none !important;padding:0 !important;position:absolute !important;inset:0 !important;transform:none !important;-webkit-appearance:none !important;z-index:-1 !important}:host([hidden]){display:none}[hidden]{display:none}`,ZSe=KSe,JSe=ci(class extends li{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteInternalInputFocus=qe(this,"calciteInternalInputFocus",6),this.calciteInternalInputBlur=qe(this,"calciteInternalInputBlur",6),this.calciteInputInput=qe(this,"calciteInputInput",7),this.calciteInputChange=qe(this,"calciteInputChange",6),this.childElType="input",this.previousValueOrigin="initial",this.mutationObserver=hn("mutation",()=>this.setDisabledAction()),this.userChangedValue=!1,this.keyDownHandler=e=>{this.readOnly||this.disabled||e.defaultPrevented||(this.isClearable&&e.key==="Escape"&&(this.clearInputValue(e),e.preventDefault()),e.key==="Enter"&&MB(this)&&e.preventDefault())},this.clearInputValue=e=>{this.setValue({committing:!0,nativeEvent:e,origin:"user",value:""})},this.emitChangeIfUserModified=()=>{this.previousValueOrigin==="user"&&this.value!==this.previousEmittedValue&&(this.calciteInputChange.emit(),this.setPreviousEmittedValue(this.value))},this.inputBlurHandler=()=>{window.clearInterval(this.nudgeNumberValueIntervalId),this.calciteInternalInputBlur.emit(),this.emitChangeIfUserModified()},this.clickHandler=e=>{if(this.disabled)return;const i=e.composedPath();!i.includes(this.inputWrapperEl)||i.includes(this.actionWrapperEl)||this.setFocus()},this.inputFocusHandler=()=>{this.calciteInternalInputFocus.emit()},this.inputChangeHandler=()=>{this.type==="file"&&(this.files=this.childEl.files)},this.inputInputHandler=e=>{this.disabled||this.readOnly||this.setValue({nativeEvent:e,origin:"user",value:e.target.value})},this.inputKeyDownHandler=e=>{this.disabled||this.readOnly||e.key==="Enter"&&this.emitChangeIfUserModified()},this.inputNumberInputHandler=e=>{if(this.disabled||this.readOnly||this.value==="Infinity"||this.value==="-Infinity")return;const i=e.target.value;_s.numberFormatOptions={locale:this.effectiveLocale,numberingSystem:this.numberingSystem,useGrouping:this.groupSeparator};const n=_s.delocalize(i);e.inputType==="insertFromPaste"?(Qa(n)||e.preventDefault(),this.setValue({nativeEvent:e,origin:"user",value:bve(n)}),this.childNumberEl.value=this.displayedValue):this.setValue({nativeEvent:e,origin:"user",value:n})},this.inputNumberKeyDownHandler=e=>{if(this.type!=="number"||this.disabled||this.readOnly)return;if(this.value==="Infinity"||this.value==="-Infinity"){e.preventDefault(),(e.key==="Backspace"||e.key==="Delete")&&this.clearInputValue(e);return}if(e.key==="ArrowUp"){e.preventDefault(),this.nudgeNumberValue("up",e);return}if(e.key==="ArrowDown"){this.nudgeNumberValue("down",e);return}const i=[...kM,"ArrowLeft","ArrowRight","Backspace","Delete","Enter","Escape","Tab"];if(e.altKey||e.ctrlKey||e.metaKey)return;const n=e.shiftKey&&e.key==="Tab";if(i.includes(e.key)||n){e.key==="Enter"&&this.emitChangeIfUserModified();return}_s.numberFormatOptions={locale:this.effectiveLocale,numberingSystem:this.numberingSystem,useGrouping:this.groupSeparator},!(e.key===_s.decimal&&(!this.value&&!this.childNumberEl.value||this.value&&this.childNumberEl.value.indexOf(_s.decimal)===-1))&&(/[eE]/.test(e.key)&&(!this.value&&!this.childNumberEl.value||this.value&&!/[eE]/.test(this.childNumberEl.value))||e.key==="-"&&(!this.value&&!this.childNumberEl.value||this.value&&this.childNumberEl.value.split("-").length<=2)||e.preventDefault())},this.nudgeNumberValue=(e,i)=>{if(i instanceof KeyboardEvent&&i.repeat||this.type!=="number")return;const n=this.maxString?parseFloat(this.maxString):null,s=this.minString?parseFloat(this.minString):null,h=150;this.incrementOrDecrementNumberValue(e,n,s,i),this.nudgeNumberValueIntervalId&&window.clearInterval(this.nudgeNumberValueIntervalId);let f=!0;this.nudgeNumberValueIntervalId=window.setInterval(()=>{if(f){f=!1;return}this.incrementOrDecrementNumberValue(e,n,s,i)},h)},this.numberButtonPointerUpAndOutHandler=()=>{window.clearInterval(this.nudgeNumberValueIntervalId)},this.numberButtonPointerDownHandler=e=>{if(!b6(e))return;e.preventDefault();const i=e.target.dataset.adjustment;this.disabled||this.nudgeNumberValue(i,e)},this.onHiddenFormInputInput=e=>{e.target.name===this.name&&this.setValue({value:e.target.value,origin:"direct"}),this.setFocus(),e.stopPropagation()},this.setChildElRef=e=>{this.childEl=e},this.setChildNumberElRef=e=>{this.childNumberEl=e},this.setInputValue=e=>{this.type==="text"&&!this.childEl||this.type==="number"&&!this.childNumberEl||(this[`child${this.type==="number"?"Number":""}El`].value=e)},this.setPreviousEmittedValue=e=>{this.previousEmittedValue=this.normalizeValue(e)},this.setPreviousValue=e=>{this.previousValue=this.normalizeValue(e)},this.setValue=({committing:e=!1,nativeEvent:i,origin:n,previousValue:s,value:h})=>{var f,m;if(this.setPreviousValue(s??this.value),this.previousValueOrigin=n,this.type==="number"){_s.numberFormatOptions={locale:this.effectiveLocale,numberingSystem:this.numberingSystem,useGrouping:this.groupSeparator,signDisplay:"never"};const y=((f=this.previousValue)==null?void 0:f.length)>h.length||((m=this.value)==null?void 0:m.length)>h.length,x=h.charAt(h.length-1)===".",E=x&&y?h:Tve(h),k=h&&!E?Qa(this.previousValue)?this.previousValue:"":E;let I=_s.localize(k);n!=="connected"&&!x&&(I=kve(I,k,_s)),this.displayedValue=x&&y?`${I}${_s.decimal}`:I,this.userChangedValue=n==="user"&&this.value!==k,this.value=["-","."].includes(k)?"":k}else this.userChangedValue=n==="user"&&this.value!==h,this.value=h;n==="direct"&&(this.setInputValue(h),this.previousEmittedValue=h),i&&(this.calciteInputInput.emit().defaultPrevented?(this.value=this.previousValue,this.displayedValue=this.type==="number"?_s.localize(this.previousValue):this.previousValue):e&&this.emitChangeIfUserModified())},this.inputKeyUpHandler=()=>{window.clearInterval(this.nudgeNumberValueIntervalId)},this.alignment="start",this.autofocus=void 0,this.clearable=!1,this.disabled=!1,this.enterKeyHint=void 0,this.form=void 0,this.groupSeparator=!1,this.icon=void 0,this.iconFlipRtl=!1,this.inputMode=void 0,this.label=void 0,this.loading=!1,this.numberingSystem=void 0,this.localeFormat=!1,this.max=void 0,this.min=void 0,this.maxLength=void 0,this.minLength=void 0,this.validationMessage=void 0,this.validationIcon=void 0,this.validity={valid:!1,badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1},this.name=void 0,this.numberButtonType="vertical",this.placeholder=void 0,this.prefixText=void 0,this.readOnly=!1,this.required=!1,this.scale="m",this.status="idle",this.step=void 0,this.autocomplete=void 0,this.pattern=void 0,this.accept=void 0,this.multiple=!1,this.suffixText=void 0,this.editingEnabled=!1,this.type="text",this.value="",this.files=void 0,this.messages=void 0,this.messageOverrides=void 0,this.defaultMessages=void 0,this.effectiveLocale="",this.displayedValue=void 0,this.slottedActionElDisabledInternally=!1}handleGlobalAttributesChanged(){Tu(this)}disabledWatcher(){this.setDisabledAction()}maxWatcher(){var e;this.maxString=((e=this.max)==null?void 0:e.toString())||null}minWatcher(){var e;this.minString=((e=this.min)==null?void 0:e.toString())||null}onMessagesChange(){}valueWatcher(e,i){if(!this.userChangedValue){if(this.type==="number"&&(e==="Infinity"||e==="-Infinity")){this.displayedValue=e,this.previousEmittedValue=e;return}this.setValue({origin:"direct",previousValue:i,value:e==null||e==""?"":this.type==="number"?Qa(e)?e:this.previousValue||"":e}),this.warnAboutInvalidNumberValue(e)}this.userChangedValue=!1}updateRequestedIcon(){this.requestedIcon=Rm(sO,this.icon,this.type)}get isClearable(){var e;return!this.isTextarea&&(this.clearable||this.type==="search")&&((e=this.value)==null?void 0:e.length)>0}get isTextarea(){return this.childElType==="textarea"}effectiveLocaleChange(){xo(this,this.effectiveLocale)}connectedCallback(){var e;Ds(this),So(this),this.inlineEditableEl=this.el.closest("calcite-inline-editable"),this.inlineEditableEl&&(this.editingEnabled=this.inlineEditableEl.editingEnabled||!1),V0(this),EM(this),(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0}),this.setDisabledAction(),this.el.addEventListener(x6,this.onHiddenFormInputInput)}disconnectedCallback(){var e;u_(this),MM(this),zs(this),To(this),(e=this.mutationObserver)==null||e.disconnect(),this.el.removeEventListener(x6,this.onHiddenFormInputInput)}async componentWillLoad(){var e,i;vo(this),this.childElType=this.type==="textarea"?"textarea":"input",this.maxString=(e=this.max)==null?void 0:e.toString(),this.minString=(i=this.min)==null?void 0:i.toString(),this.requestedIcon=Rm(sO,this.icon,this.type),await _o(this),this.setPreviousEmittedValue(this.value),this.setPreviousValue(this.value),this.type==="number"&&(this.value==="Infinity"||this.value==="-Infinity"?(this.displayedValue=this.value,this.previousEmittedValue=this.value):(this.warnAboutInvalidNumberValue(this.value),this.setValue({origin:"connected",value:Qa(this.value)?this.value:""})))}componentDidLoad(){bo(this)}componentShouldUpdate(e,i,n){return this.type==="number"&&n==="value"&&e&&!Qa(e)?(this.setValue({origin:"reset",value:i}),!1):!0}componentDidRender(){Al(this)}async setFocus(){var e,i;await wo(this),this.type==="number"?(e=this.childNumberEl)==null||e.focus():(i=this.childEl)==null||i.focus()}async selectText(){var e,i;this.type==="number"?(e=this.childNumberEl)==null||e.select():(i=this.childEl)==null||i.select()}onLabelClick(){this.setFocus()}incrementOrDecrementNumberValue(e,i,n,s){const{value:h}=this;if(h==="Infinity"||h==="-Infinity")return;const f=e==="up"?1:-1,m=this.step==="any"?1:Math.abs(this.step||1),x=new Ot(h!==""?h:"0").add(`${m*f}`),E=()=>typeof n=="number"&&!isNaN(n)&&x.subtract(`${n}`).isNegative,k=()=>typeof i=="number"&&!isNaN(i)&&!x.subtract(`${i}`).isNegative,I=E()?`${n}`:k()?`${i}`:x.toString();this.setValue({committing:!0,nativeEvent:s,origin:"user",value:I})}syncHiddenFormInput(e){gH(this.type,this,e)}setDisabledAction(){const e=xB(this.el,"action");e&&(this.disabled?(e.getAttribute("disabled")==null&&(this.slottedActionElDisabledInternally=!0),e.setAttribute("disabled","")):this.slottedActionElDisabledInternally&&(e.removeAttribute("disabled"),this.slottedActionElDisabledInternally=!1))}normalizeValue(e){return this.type==="number"?Qa(e)?e:"":e}warnAboutInvalidNumberValue(e){this.type==="number"&&e&&!Qa(e)&&console.warn(`The specified value "${e}" cannot be parsed, or is out of range.`)}render(){const e=ll(this.el),i=X("div",{key:"ed9acea9dbc18f4cfc5e7095c1e2de0b1adfdf35",class:Vn.loader},X("calcite-progress",{key:"58321a27c25dd848a648d2e3d5ca6dfc3f5fd649",label:this.messages.loading,type:"indeterminate"})),n=X("button",{key:"348d8dee0c032afe986b1e253c9d667256f3d9f0","aria-label":this.messages.clear,class:Vn.clearButton,disabled:this.disabled||this.readOnly,onClick:this.clearInputValue,tabIndex:-1,type:"button"},X("calcite-icon",{key:"334b68a283b767c0e9bea09ccfd83d09c8c17711",icon:"x",scale:Ji(this.scale)})),s=X("calcite-icon",{key:"4ab83aa9268277a38449ebe4a6e3db4dc9badcae",class:Vn.inputIcon,flipRtl:this.iconFlipRtl,icon:this.requestedIcon,scale:Ji(this.scale)}),h=this.numberButtonType==="horizontal",f=X("button",{key:"2dd700034d38581aaea39c019e626ffa1a2c1c16","aria-hidden":"true",class:{[Vn.numberButtonItem]:!0,[Vn.buttonItemHorizontal]:h},"data-adjustment":"up",disabled:this.disabled||this.readOnly,onPointerDown:this.numberButtonPointerDownHandler,onPointerOut:this.numberButtonPointerUpAndOutHandler,onPointerUp:this.numberButtonPointerUpAndOutHandler,tabIndex:-1,type:"button"},X("calcite-icon",{key:"6ca9a7c93aa14520292ad8c800c4e099bd46f30d",icon:"chevron-up",scale:Ji(this.scale)})),m=X("button",{key:"cdbd88ddd308bd82b6d239a83f365a2c5e226cfc","aria-hidden":"true",class:{[Vn.numberButtonItem]:!0,[Vn.buttonItemHorizontal]:h},"data-adjustment":"down",disabled:this.disabled||this.readOnly,onPointerDown:this.numberButtonPointerDownHandler,onPointerOut:this.numberButtonPointerUpAndOutHandler,onPointerUp:this.numberButtonPointerUpAndOutHandler,tabIndex:-1,type:"button"},X("calcite-icon",{key:"f1b9cf329da9add564d690c517ddcc414c4fbfa3",icon:"chevron-down",scale:Ji(this.scale)})),y=X("div",{key:"247efdce33568f219b1bf3bf252b8b19a74d03ea",class:Vn.numberButtonWrapper},f,m),x=X("div",{key:"01819a850399fb20a29471861e011695bf80af97",class:Vn.prefix},this.prefixText),E=X("div",{key:"dcc073305f3824a0eb72ef230bd217dabdb72104",class:Vn.suffix},this.suffixText),k=this.el.autofocus||this.el.hasAttribute("autofocus")?!0:null,I=this.el.enterKeyHint||this.el.getAttribute("enterkeyhint"),P=this.el.inputMode||this.el.getAttribute("inputmode"),L=this.type==="number"?X("input",{accept:this.accept,"aria-errormessage":Cx.validationMessage,"aria-invalid":cn(this.status==="invalid"),"aria-label":Lm(this),autocomplete:this.autocomplete,autofocus:k,defaultValue:this.defaultValue,disabled:this.disabled?!0:null,enterKeyHint:I,inputMode:P,key:"localized-input",maxLength:this.maxLength,minLength:this.minLength,multiple:this.multiple,name:void 0,onBlur:this.inputBlurHandler,onFocus:this.inputFocusHandler,onInput:this.inputNumberInputHandler,onKeyDown:this.inputNumberKeyDownHandler,onKeyUp:this.inputKeyUpHandler,pattern:this.pattern,placeholder:this.placeholder||"",readOnly:this.readOnly,ref:this.setChildNumberElRef,type:"text",value:this.displayedValue}):null,D=this.type!=="number"?[X(this.childElType,{accept:this.accept,"aria-errormessage":Cx.validationMessage,"aria-invalid":cn(this.status==="invalid"),"aria-label":Lm(this),autocomplete:this.autocomplete,autofocus:k,class:{[Vn.editingEnabled]:this.editingEnabled,[Vn.inlineChild]:!!this.inlineEditableEl},defaultValue:this.defaultValue,disabled:this.disabled?!0:null,enterKeyHint:I,inputMode:P,max:this.maxString,maxLength:this.maxLength,min:this.minString,minLength:this.minLength,multiple:this.multiple,name:this.name,onBlur:this.inputBlurHandler,onChange:this.inputChangeHandler,onFocus:this.inputFocusHandler,onInput:this.inputInputHandler,onKeyDown:this.inputKeyDownHandler,onKeyUp:this.inputKeyUpHandler,pattern:this.pattern,placeholder:this.placeholder||"",readOnly:this.readOnly,ref:this.setChildElRef,required:this.required?!0:null,step:this.step,tabIndex:this.disabled||this.inlineEditableEl&&!this.editingEnabled?-1:null,type:this.type,value:this.value}),this.isTextarea?X("div",{class:Vn.resizeIconWrapper},X("calcite-icon",{icon:"chevron-down",scale:Ji(this.scale)})):null]:null;return X(dn,{key:"23d6092960315f172a56105b9af75ddc6497874c",onClick:this.clickHandler,onKeyDown:this.keyDownHandler},X(Ol,{key:"1bb063f39c14a829a376465fa8c2bbc288046ac7",disabled:this.disabled},X("div",{key:"7f3644f002b7cb75d93d9c0218508b502ddcfd0b",class:{[Vn.inputWrapper]:!0,[Xo.rtl]:e==="rtl"},ref:j=>this.inputWrapperEl=j},this.type==="number"&&this.numberButtonType==="horizontal"&&!this.readOnly?m:null,this.prefixText?x:null,X("div",{key:"0d01898e4949a60e0853c1a72669f5c9d6c91ba5",class:Vn.wrapper},L,D,this.isClearable?n:null,this.requestedIcon?s:null,this.loading?i:null),X("div",{key:"42e7adec440e417128feb9845c36d0444e6c1ae4",class:Vn.actionWrapper,ref:j=>this.actionWrapperEl=j},X("slot",{key:"f391b035ad9fc108d1f99c4cedf539425c20a36d",name:WSe.action})),this.type==="number"&&this.numberButtonType==="vertical"&&!this.readOnly?y:null,this.suffixText?E:null,this.type==="number"&&this.numberButtonType==="horizontal"&&!this.readOnly?f:null,X($M,{key:"df415df551b4a9a16565c8f554454d01aa89327e",component:this})),this.validationMessage&&this.status==="invalid"?X(NM,{icon:this.validationIcon,id:Cx.validationMessage,message:this.validationMessage,scale:this.scale,status:this.status}):null))}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{autofocus:["handleGlobalAttributesChanged"],enterkeyhint:["handleGlobalAttributesChanged"],inputmode:["handleGlobalAttributesChanged"],disabled:["disabledWatcher"],max:["maxWatcher"],min:["minWatcher"],messageOverrides:["onMessagesChange"],value:["valueWatcher"],icon:["updateRequestedIcon"],type:["updateRequestedIcon"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return ZSe}},[1,"calcite-input",{alignment:[513],autofocus:[4],clearable:[516],disabled:[516],enterKeyHint:[1,"enter-key-hint"],form:[513],groupSeparator:[516,"group-separator"],icon:[520],iconFlipRtl:[516,"icon-flip-rtl"],inputMode:[1,"input-mode"],label:[1],loading:[516],numberingSystem:[513,"numbering-system"],localeFormat:[4,"locale-format"],max:[514],min:[514],maxLength:[514,"max-length"],minLength:[514,"min-length"],validationMessage:[1,"validation-message"],validationIcon:[520,"validation-icon"],validity:[1040],name:[513],numberButtonType:[513,"number-button-type"],placeholder:[1],prefixText:[1,"prefix-text"],readOnly:[516,"read-only"],required:[516],scale:[513],status:[513],step:[520],autocomplete:[1],pattern:[1],accept:[1],multiple:[4],suffixText:[1,"suffix-text"],editingEnabled:[1540,"editing-enabled"],type:[513],value:[1025],files:[16],messages:[1040],messageOverrides:[1040],defaultMessages:[32],effectiveLocale:[32],displayedValue:[32],slottedActionElDisabledInternally:[32],setFocus:[64],selectText:[64]},void 0,{autofocus:["handleGlobalAttributesChanged"],enterkeyhint:["handleGlobalAttributesChanged"],inputmode:["handleGlobalAttributesChanged"],disabled:["disabledWatcher"],max:["maxWatcher"],min:["minWatcher"],messageOverrides:["onMessagesChange"],value:["valueWatcher"],icon:["updateRequestedIcon"],type:["updateRequestedIcon"],effectiveLocale:["effectiveLocaleChange"]}]);function YSe(){if(typeof customElements>"u")return;["calcite-input","calcite-icon","calcite-input-message","calcite-progress"].forEach(e=>{switch(e){case"calcite-input":customElements.get(e)||customElements.define(e,JSe);break;case"calcite-icon":customElements.get(e)||Or();break;case"calcite-input-message":customElements.get(e)||b_();break;case"calcite-progress":customElements.get(e)||Fq();break}})}YSe();var XSe=ap('<div class="cntrl-container"><calcite-label>Add a reference layer by its itemID <calcite-input><calcite-button>Add to map</calcite-button></calcite-input></calcite-label></div>',2);function QSe(t,e){sp(e,!1);const i=o3(),n=()=>Fh(ml,"$mapView",i),s=sP(),h=()=>{const E=document.getElementById("itemIdInput").value;E&&OE.fromPortalItem({portalItem:{id:E}}).then(k=>{n().map.add(k),k.when(()=>{nK(ml,Zf(n).extent=k.fullExtent,Zf(n))})},k=>{s("add-layer",`${k.message}`)})};Vm();var f=XSe(),m=wt(f),y=zt(wt(m));Ie(y,"id","itemIdInput"),Ie(y,"placeholder","b5d71d19fd4b43fbb88abf07773ec0c7");var x=wt(y);Ie(x,"type","button"),Ie(x,"id","addLayerBtn"),Ie(x,"slot","action"),Ie(x,"role","button"),Ie(x,"tabindex","0"),Qn("click",x,h),Qn("keyup",x,E=>{console.log("button keyup")}),Kh(t,f),op()}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */let f2;const e6e={childList:!0};function jq(t){f2||(f2=hn("mutation",t6e)),f2.observe(t.el,e6e)}function Gq(t){f2.unobserve(t.el)}function t6e(t){t.forEach(({target:e})=>{Tu(e)})}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const oO=(t,e,i)=>Math.max(e,Math.min(t,i));function kRe(t,e,i,n,s){return(t-e)*(s-n)/(i-e)+n}function CRe(t,e,i){return t<i?-1:t>e-i?1:0}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const rh={container:"container",content:"content",contentHeader:"content__header",contentBody:"content__body",floatContent:"float--content",contentOverlay:"content--overlay",separator:"separator",float:"float",floatAll:"float-all"},aO={actionBar:"action-bar",header:"header"},i6e=`:host{pointer-events:none;position:relative;display:flex;flex:0 1 auto;align-items:stretch;z-index:var(--calcite-shell-panel-z-index, var(--calcite-z-index));--calcite-shell-panel-detached-max-height:unset;--calcite-shell-panel-max-height:unset;--calcite-internal-shell-panel-shadow-block-start:0 4px 8px -1px rgba(0, 0, 0, 0.08),
    0 2px 4px -1px rgba(0, 0, 0, 0.04);--calcite-internal-shell-panel-shadow-block-end:0 -4px 8px -1px rgba(0, 0, 0, 0.08),
    0 -2px 4px -1px rgba(0, 0, 0, 0.04);--calcite-internal-shell-panel-shadow-inline-start:4px 0 8px -1px rgba(0, 0, 0, 0.08),
    2px 0 4px -1px rgba(0, 0, 0, 0.04);--calcite-internal-shell-panel-shadow-inline-end:-4px 0 8px -1px rgba(0, 0, 0, 0.08),
    -2px 0 4px -1px rgba(0, 0, 0, 0.04)}.calcite--rtl.content--overlay{--calcite-internal-shell-panel-shadow-inline-start:-4px 0 8px -1px rgba(0, 0, 0, 0.08),
    -2px 0 4px -1px rgba(0, 0, 0, 0.04);--calcite-internal-shell-panel-shadow-inline-end:4px 0 8px -1px rgba(0, 0, 0, 0.08),
    2px 0 4px -1px rgba(0, 0, 0, 0.04)}:host([layout=vertical]){z-index:var(--calcite-shell-panel-z-index, calc(var(--calcite-z-index) + 1))}:host([layout=vertical][display-mode=overlay]){z-index:var(--calcite-shell-panel-z-index, calc(var(--calcite-z-index-header) + 1))}:host([layout=vertical][display-mode=float-all]) .content{flex:2}:host([layout=vertical][width-scale=s]:not([display-mode=float-all])) .content{--calcite-internal-shell-panel-width:var(--calcite-shell-panel-width, 12vw);--calcite-internal-shell-panel-max-width:var(--calcite-shell-panel-max-width, 300px);--calcite-internal-shell-panel-min-width:var(--calcite-shell-panel-min-width, 150px)}:host([layout=vertical][width-scale=s][display-mode=float-all]) .content{--calcite-internal-shell-panel-width:var(--calcite-shell-panel-width, 12vw);--calcite-internal-shell-panel-min-width:var(--calcite-shell-panel-min-width, 150px)}:host([layout=vertical][width-scale=m]:not([display-mode=float-all])) .content{--calcite-internal-shell-panel-width:var(--calcite-shell-panel-width, 20vw);--calcite-internal-shell-panel-max-width:var(--calcite-shell-panel-max-width, 420px);--calcite-internal-shell-panel-min-width:var(--calcite-shell-panel-min-width, 240px)}:host([layout=vertical][width-scale=m][display-mode=float-all]) .content{--calcite-internal-shell-panel-width:var(--calcite-shell-panel-width, 20vw);--calcite-internal-shell-panel-min-width:var(--calcite-shell-panel-min-width, 240px)}:host([layout=vertical][width-scale=l]:not([display-mode=float-all])) .content{--calcite-internal-shell-panel-width:var(--calcite-shell-panel-width, 45vw);--calcite-internal-shell-panel-max-width:var(--calcite-shell-panel-max-width, 680px);--calcite-internal-shell-panel-min-width:var(--calcite-shell-panel-min-width, 340px)}:host([layout=vertical][width-scale=l][display-mode=float-all]) .content{--calcite-internal-shell-panel-width:var(--calcite-shell-panel-width, 45vw);--calcite-internal-shell-panel-min-width:var(--calcite-shell-panel-min-width, 340px)}:host([layout=horizontal][height-scale=s]) .content{--calcite-internal-shell-panel-max-height:var(
    --calcite-shell-panel-max-height,
    var(--calcite-shell-panel-detached-max-height, 20vh)
  )}:host([layout=horizontal]) .content{--calcite-internal-shell-panel-min-height:var(--calcite-shell-panel-min-height, 5vh);--calcite-internal-shell-panel-max-height:var(
    --calcite-shell-panel-max-height,
    var(--calcite-shell-panel-detached-max-height, 30vh)
  )}:host([layout=horizontal][height-scale=l]) .content{--calcite-internal-shell-panel-max-height:var(
    --calcite-shell-panel-max-height,
    var(--calcite-shell-panel-detached-max-height, 40vh)
  )}.container{pointer-events:none;box-sizing:border-box;display:flex;block-size:100%;flex:1 1 auto;align-items:stretch;background-color:transparent;font-size:var(--calcite-font-size--1);color:var(--calcite-color-text-2)}.container *{box-sizing:border-box}.container.float-all{margin-block:0.5rem;margin-inline:0.5rem}:host([layout=horizontal]) .container{block-size:auto;inline-size:100%;flex-direction:column}:host(:hover) .separator:not(:hover):not(:focus),:host(:focus-within) .separator:not(:hover):not(:focus){opacity:1;background-color:var(--calcite-color-border-3)}.separator{pointer-events:auto;position:absolute;display:flex;background-color:transparent;opacity:0;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;cursor:col-resize;outline:none}.separator:hover{opacity:1;background-color:var(--calcite-color-border-2)}.separator:focus{background-color:var(--calcite-color-brand);opacity:1}:host([layout=vertical]) .separator{inset-block:0px;block-size:100%;inline-size:0.125rem;cursor:col-resize}:host([layout=horizontal][position=start]) .separator{inset-block-end:0px}:host([layout=horizontal][position=end]) .separator{inset-block-start:0px}:host([layout=horizontal]) .separator{inset-inline-end:0px;block-size:0.125rem;inline-size:100%;cursor:row-resize}:host([layout=vertical][position=start]) .separator{inset-inline-end:-2px}:host([layout=horizontal][position=start]) .separator{inset-block-end:-2px}:host([layout=vertical][position=end]) .separator{inset-inline-start:-2px}:host([layout=horizontal][position=end]) .separator{inset-block-start:-2px}::slotted(calcite-panel),::slotted(calcite-flow){block-size:100%;inline-size:100%;flex:1 1 auto;max-block-size:unset;max-inline-size:unset}::slotted(.calcite-match-height){display:flex;flex:1 1 auto;overflow:hidden}.content{pointer-events:auto;display:flex;flex-direction:column;flex-wrap:nowrap;align-items:stretch;align-self:stretch;background-color:var(--calcite-color-background);padding:0px;transition:max-block-size var(--calcite-animation-timing), max-inline-size var(--calcite-animation-timing)}:host([layout=vertical]:not([display-mode=float-all])) .content{inline-size:var(--calcite-internal-shell-panel-width);max-inline-size:var(--calcite-internal-shell-panel-max-width);min-inline-size:var(--calcite-internal-shell-panel-min-width)}:host([layout=vertical][display-mode=float-all]) .content{inline-size:var(--calcite-internal-shell-panel-width);min-inline-size:var(--calcite-internal-shell-panel-min-width)}:host([layout=horizontal]) .content{block-size:var(--calcite-internal-shell-panel-height);max-block-size:var(--calcite-internal-shell-panel-max-height);min-block-size:var(--calcite-internal-shell-panel-min-height)}.content__header{display:flex;flex:0 1 auto;flex-direction:column;flex-wrap:nowrap;align-items:stretch}.content__body{display:flex;flex:1 1 auto;flex-direction:column;overflow:hidden}.content--overlay{position:absolute;--tw-shadow:0 4px 8px -1px rgba(0, 0, 0, 0.08), 0 2px 4px -1px rgba(0, 0, 0, 0.04);--tw-shadow-colored:0 4px 8px -1px var(--tw-shadow-color), 0 2px 4px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}:host([layout=vertical]) .content--overlay{inset-block-start:0px;block-size:100%}:host([layout=horizontal]) .content--overlay{inset-inline-start:0px;inline-size:100%}:host([layout=vertical][position=start]) .content--overlay{inset-inline-start:100%;box-shadow:var(--calcite-internal-shell-panel-shadow-inline-start)}:host([layout=vertical][position=end]) .content--overlay{inset-inline-end:100%;box-shadow:var(--calcite-internal-shell-panel-shadow-inline-end)}:host([layout=horizontal][position=start]) .content--overlay{inset-block-start:100%;box-shadow:var(--calcite-internal-shell-panel-shadow-block-start)}:host([layout=horizontal][position=end]) .content--overlay{inset-block-end:100%;box-shadow:var(--calcite-internal-shell-panel-shadow-block-end)}.float--content{margin-inline:0.5rem;margin-block:0.5rem auto;block-size:auto;overflow:hidden;border-radius:0.25rem;--tw-shadow:0 4px 8px -1px rgba(0, 0, 0, 0.08), 0 2px 4px -1px rgba(0, 0, 0, 0.04);--tw-shadow-colored:0 4px 8px -1px var(--tw-shadow-color), 0 2px 4px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);max-block-size:var(--calcite-internal-shell-panel-max-height, calc(100% - 1rem))}.float--content ::slotted(calcite-panel),.float--content ::slotted(calcite-flow){max-block-size:unset}:host([layout=horizontal]) .float--content{margin-block:0.5rem}:host([position=start]) .float--content ::slotted(calcite-panel),:host([position=start]) .float--content ::slotted(calcite-flow),:host([position=end]) .float--content ::slotted(calcite-panel),:host([position=end]) .float--content ::slotted(calcite-flow){border-style:none}.content[hidden]{display:none}slot[name=action-bar]::slotted(calcite-action-bar),.content ::slotted(calcite-flow),.content ::slotted(calcite-panel:not([closed])){border-width:1px;border-style:solid;border-color:var(--calcite-color-border-3)}:host([position=start]:not([slot=panel-end]):not([display-mode=float-all])) slot[name=action-bar]::slotted(calcite-action-bar),:host([position=start]:not([slot=panel-end]):not([display-mode=float-all])) .content ::slotted(calcite-flow),:host([position=start]:not([slot=panel-end]):not([display-mode=float-all])) .content ::slotted(calcite-panel),:host([position=end][slot=panel-start]) slot[name=action-bar]::slotted(calcite-action-bar),:host([position=end][slot=panel-start]) .content ::slotted(calcite-flow),:host([position=end][slot=panel-start]) .content ::slotted(calcite-panel){border-inline-start:none}:host([position=end]:not([slot=panel-start])) slot[name=action-bar]::slotted(calcite-action-bar),:host([position=end]:not([slot=panel-start])) .content ::slotted(calcite-flow),:host([position=end]:not([slot=panel-start])) .content ::slotted(calcite-panel),:host([position=start][slot=panel-end]) slot[name=action-bar]::slotted(calcite-action-bar),:host([position=start][slot=panel-end]) .content ::slotted(calcite-flow),:host([position=start][slot=panel-end]) .content ::slotted(calcite-panel){border-inline-end:none}:host([layout=horizontal]:not([display-mode=float-all])) slot[name=action-bar]::slotted(calcite-action-bar){border-inline:0}:host([layout=horizontal][position=start]:not([display-mode=float-all])) .content ::slotted(calcite-flow),:host([layout=horizontal][position=start]:not([display-mode=float-all])) .content ::slotted(calcite-panel){border-inline:0;border-block-start:0}:host([layout=horizontal][position=end]) .content ::slotted(calcite-flow),:host([layout=horizontal][position=end]) .content ::slotted(calcite-panel){border-inline:0;border-block-end:0}:host([hidden]){display:none}[hidden]{display:none}`,n6e=i6e,r6e=ci(class extends li{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteInternalShellPanelResizeStart=qe(this,"calciteInternalShellPanelResizeStart",6),this.calciteInternalShellPanelResizeEnd=qe(this,"calciteInternalShellPanelResizeEnd",6),this.initialContentWidth=null,this.initialContentHeight=null,this.initialClientX=null,this.initialClientY=null,this.contentWidthMax=null,this.contentWidthMin=null,this.contentHeightMax=null,this.contentHeightMin=null,this.step=1,this.stepMultiplier=10,this.actionBars=[],this.storeContentEl=e=>{this.contentEl=e},this.getKeyAdjustedSize=e=>{const{key:i}=e,{el:n,step:s,stepMultiplier:h,layout:f,contentWidthMin:m,contentWidthMax:y,initialContentWidth:x,initialContentHeight:E,contentHeightMin:k,contentHeightMax:I,position:P}=this,L=s*h;["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Home","End","PageUp","PageDown"].indexOf(i)>-1&&e.preventDefault();const j=ll(n),H=["ArrowLeft","ArrowRight"],W=["ArrowDown","ArrowUp"],Z=j==="rtl"&&H.includes(i)?-1:1;if(f==="horizontal"?P==="end"?i===W[1]||i===H[0]:i===W[0]||i===H[1]:i===W[1]||(P==="end"?i===H[0]:i===H[1])){const ie=e.shiftKey?L:s;return f==="horizontal"?E+Z*ie:x+Z*ie}if(f==="horizontal"?P==="end"?i===W[0]||i===H[0]:i===W[1]||i===H[1]:i===W[0]||(P==="end"?i===H[1]:i===H[0])){const ie=e.shiftKey?L:s;return f==="horizontal"?E-Z*ie:x-Z*ie}return i==="Home"&&f==="horizontal"&&typeof k=="number"?k:i==="Home"&&f==="vertical"&&typeof m=="number"?m:i==="End"&&f==="horizontal"&&typeof I=="number"?I:i==="End"&&f==="vertical"&&typeof y=="number"?y:i==="PageDown"?f==="horizontal"?E-L:x-L:i==="PageUp"?f==="horizontal"?E+L:x+L:null},this.initialKeydownWidth=e=>{this.setInitialContentWidth();const i=this.getKeyAdjustedSize(e);typeof i=="number"&&this.setContentWidth(i)},this.initialKeydownHeight=e=>{this.setInitialContentHeight();const i=this.getKeyAdjustedSize(e);typeof i=="number"&&this.setContentHeight(i)},this.separatorKeyDown=e=>{this.layout==="horizontal"?this.initialKeydownHeight(e):this.initialKeydownWidth(e)},this.separatorPointerMove=e=>{e.preventDefault();const{el:i,layout:n,initialContentWidth:s,initialContentHeight:h,position:f,initialClientX:m,initialClientY:y}=this,x=n==="horizontal"?e.clientY-y:e.clientX-m,E=n==="vertical"&&ll(i)==="rtl"?-1:1,k=f==="end"?-E*x:E*x;n==="horizontal"?this.setContentHeight(h+k):this.setContentWidth(s+k)},this.separatorPointerUp=e=>{b6(e)&&(this.calciteInternalShellPanelResizeEnd.emit(),e.preventDefault(),window.removeEventListener("pointerup",this.separatorPointerUp),window.removeEventListener("pointermove",this.separatorPointerMove))},this.setInitialContentHeight=()=>{var e;this.initialContentHeight=(e=this.contentEl)==null?void 0:e.getBoundingClientRect().height},this.setInitialContentWidth=()=>{var e;this.initialContentWidth=(e=this.contentEl)==null?void 0:e.getBoundingClientRect().width},this.separatorPointerDown=e=>{if(!b6(e))return;this.calciteInternalShellPanelResizeStart.emit(),e.preventDefault();const{separatorEl:i}=this;i&&document.activeElement!==i&&i.focus(),this.layout==="horizontal"?(this.setInitialContentHeight(),this.initialClientY=e.clientY):(this.setInitialContentWidth(),this.initialClientX=e.clientX),window.addEventListener("pointerup",this.separatorPointerUp),window.addEventListener("pointermove",this.separatorPointerMove)},this.connectSeparator=e=>{this.disconnectSeparator(),this.separatorEl=e,e==null||e.addEventListener("pointerdown",this.separatorPointerDown)},this.disconnectSeparator=()=>{var e;(e=this.separatorEl)==null||e.removeEventListener("pointerdown",this.separatorPointerDown)},this.setActionBarsLayout=e=>{e.forEach(i=>i.layout=this.layout)},this.handleActionBarSlotChange=e=>{const i=sl(e).filter(n=>n==null?void 0:n.matches("calcite-action-bar"));this.actionBars=i,this.setActionBarsLayout(i)},this.handleHeaderSlotChange=e=>{this.hasHeader=xi(e)},this.collapsed=!1,this.detached=!1,this.displayMode="dock",this.detachedHeightScale=void 0,this.heightScale=void 0,this.widthScale="m",this.layout="vertical",this.position="start",this.resizable=!1,this.messages=void 0,this.messageOverrides=void 0,this.contentWidth=null,this.contentHeight=null,this.defaultMessages=void 0,this.effectiveLocale="",this.hasHeader=!1}handleDetached(e){e?this.displayMode="float-content":(this.displayMode==="float-content"||this.displayMode==="float")&&(this.displayMode="dock")}handleDisplayMode(e){this.detached=e==="float-content"||e==="float"}handleDetachedHeightScale(e){this.heightScale=e}handleHeightScale(e){this.detachedHeightScale=e}layoutHandler(){this.setActionBarsLayout(this.actionBars)}onMessagesChange(){}connectedCallback(){jq(this),Ds(this),So(this)}async componentWillLoad(){await _o(this)}disconnectedCallback(){Gq(this),this.disconnectSeparator(),zs(this),To(this)}componentDidLoad(){this.updateAriaValues()}effectiveLocaleChange(){xo(this,this.effectiveLocale)}renderHeader(){return X("div",{class:rh.contentHeader,hidden:!this.hasHeader,key:"header"},X("slot",{name:aO.header,onSlotchange:this.handleHeaderSlotChange}))}render(){const{collapsed:e,position:i,initialContentWidth:n,initialContentHeight:s,contentWidth:h,contentWidthMax:f,contentWidthMin:m,contentHeight:y,contentHeightMax:x,contentHeightMin:E,resizable:k,layout:I,displayMode:P}=this,L=ll(this.el),D=P!=="float-content"&&P!=="float"&&k,j=D?I==="horizontal"?y?{height:`${y}px`}:null:h?{width:`${h}px`}:null:null,H=!e&&D?X("div",{"aria-label":this.messages.resize,"aria-orientation":I==="horizontal"?"vertical":"horizontal","aria-valuemax":I=="horizontal"?x:f,"aria-valuemin":I=="horizontal"?E:m,"aria-valuenow":I=="horizontal"?y??s:h??n,class:rh.separator,key:"separator",onKeyDown:this.separatorKeyDown,ref:this.connectSeparator,role:"separator",tabIndex:0,"touch-action":"none"}):null,W=()=>I==="horizontal"?i==="start"?Xo.calciteAnimateInDown:Xo.calciteAnimateInUp:L==="ltr"&&i==="end"||L==="rtl"&&i==="start"?Xo.calciteAnimateInLeft:Xo.calciteAnimateInRight,Z=X("div",{class:{[Xo.rtl]:L==="rtl",[rh.content]:!0,[rh.contentOverlay]:P==="overlay",[rh.floatContent]:P==="float-content"||P==="float",[Xo.calciteAnimate]:P==="overlay",[W()]:P==="overlay"},hidden:e,key:"content",ref:this.storeContentEl,style:j},this.renderHeader(),X("div",{class:rh.contentBody},X("slot",null)),H),te=[X("slot",{key:"action-bar",name:aO.actionBar,onSlotchange:this.handleActionBarSlotChange}),Z];return i==="end"&&te.reverse(),X("div",{class:{[rh.container]:!0,[rh.floatAll]:P==="float-all"}},te)}setContentWidth(e){const{contentWidthMax:i,contentWidthMin:n}=this,s=Math.round(e);this.contentWidth=typeof i=="number"&&typeof n=="number"?oO(s,n,i):s}updateAriaValues(){const{contentEl:e}=this,i=e&&getComputedStyle(e);i&&(this.layout==="horizontal"?this.updateHeights(i):this.updateWidths(i),Tu(this))}setContentHeight(e){const{contentHeightMax:i,contentHeightMin:n}=this,s=Math.round(e);this.contentHeight=typeof i=="number"&&typeof n=="number"?oO(s,n,i):s}updateWidths(e){const i=parseInt(e.getPropertyValue("max-width"),10),n=parseInt(e.getPropertyValue("min-width"),10),s=parseInt(e.getPropertyValue("width"),10);typeof s=="number"&&!isNaN(s)&&(this.initialContentWidth=s),typeof i=="number"&&!isNaN(i)&&(this.contentWidthMax=i),typeof n=="number"&&!isNaN(n)&&(this.contentWidthMin=n)}updateHeights(e){const i=parseInt(e.getPropertyValue("max-height"),10),n=parseInt(e.getPropertyValue("min-height"),10),s=parseInt(e.getPropertyValue("height"),10);typeof s=="number"&&!isNaN(s)&&(this.initialContentHeight=s),typeof i=="number"&&!isNaN(i)&&(this.contentHeightMax=i),typeof n=="number"&&!isNaN(n)&&(this.contentHeightMin=n)}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{detached:["handleDetached"],displayMode:["handleDisplayMode"],detachedHeightScale:["handleDetachedHeightScale"],heightScale:["handleHeightScale"],layout:["layoutHandler"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return n6e}},[1,"calcite-shell-panel",{collapsed:[516],detached:[516],displayMode:[513,"display-mode"],detachedHeightScale:[513,"detached-height-scale"],heightScale:[513,"height-scale"],widthScale:[513,"width-scale"],layout:[513],position:[513],resizable:[516],messages:[1040],messageOverrides:[1040],contentWidth:[32],contentHeight:[32],defaultMessages:[32],effectiveLocale:[32],hasHeader:[32]},void 0,{detached:["handleDetached"],displayMode:["handleDisplayMode"],detachedHeightScale:["handleDetachedHeightScale"],heightScale:["handleHeightScale"],layout:["layoutHandler"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function s6e(){if(typeof customElements>"u")return;["calcite-shell-panel"].forEach(e=>{switch(e){case"calcite-shell-panel":customElements.get(e)||customElements.define(e,r6e);break}})}s6e();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */function lO(t,e){return(t+e)%e}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const No={button:"button",buttonTextVisible:"button--text-visible",buttonCompact:"button--compact",indicatorText:"indicator-text",iconContainer:"icon-container",slotContainer:"slot-container",slotContainerHidden:"slot-container--hidden",textContainer:"text-container",textContainerVisible:"text-container--visible",indicatorWithIcon:"indicator-with-icon",indicatorWithoutIcon:"indicator-without-icon"},o6e={tooltip:"tooltip"},a6e=`:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;background-color:transparent}:host,button{border-end-end-radius:var(--calcite-action-corner-radius-end-end, var(--calcite-action-corner-radius, var(--calcite-corner-radius)));border-end-start-radius:var(--calcite-action-corner-radius-end-start, var(--calcite-action-corner-radius, var(--calcite-corner-radius)));border-start-end-radius:var(--calcite-action-corner-radius-start-end, var(--calcite-action-corner-radius, var(--calcite-corner-radius)));border-start-start-radius:var(--calcite-action-corner-radius-start-start, var(--calcite-action-corner-radius, var(--calcite-corner-radius)))}.button{position:relative;margin:0px;display:flex;inline-size:auto;cursor:pointer;align-items:center;justify-content:flex-start;border-style:none;font-family:var(--calcite-font-family);font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-medium);outline-color:transparent;background-color:var(--calcite-action-background-color, var(--calcite-color-foreground-1));color:var(--calcite-action-text-color, var(--calcite-color-text-3));text-align:unset;flex:1 0 auto}.button:hover,.button:focus{background-color:var(--calcite-action-background-color-hover, var(--calcite-color-foreground-2));color:var(--calcite-action-text-color-pressed, var(--calcite-color-text-1))}.button:focus{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}.button:active{background-color:var(--calcite-action-background-color-pressed, var(--calcite-color-foreground-3))}.icon-container{pointer-events:none;margin:0px;display:flex;align-items:center;justify-content:center;min-inline-size:1rem;min-block-size:1.5rem}.text-container{margin:0px;inline-size:0px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:1.5rem;opacity:0;transition-property:opacity;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-property:margin;transition-property:inline-size}.text-container--visible{inline-size:auto;flex:1 1 auto;opacity:1}:host([active]) .button,:host([active]) .button:hover,:host([active]) .button:focus{color:var(--calcite-action-text-color-pressed, var(--calcite-color-text-1));background-color:var(--calcite-action-background-color-pressed, var(--calcite-color-foreground-3))}:host([active]) .button:active{background-color:var(--calcite-action-background-color, var(--calcite-color-foreground-1))}:host([loading]) .button:hover,:host([loading]) .button:focus{background-color:var(--calcite-action-background-color, var(--calcite-color-foreground-1))}:host([loading]) .text-container{opacity:var(--calcite-opacity-disabled)}:host([loading]) calcite-loader[inline]{margin-inline-end:0px}:host([appearance=transparent]) .button{background-color:transparent;transition-property:box-shadow;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}:host([appearance=transparent]) .button:hover,:host([appearance=transparent]) .button:focus{background-color:var(--calcite-color-transparent-hover)}:host([appearance=transparent]) .button:active{background-color:var(--calcite-color-transparent-press)}:host([data-active]) .button{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}:host([scale=s]) .button{padding-inline:0.5rem;padding-block:0.25rem;font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-normal)}:host([scale=s]) .button--text-visible .icon-container{margin-inline-end:0.5rem}:host([scale=m]) .button{padding-inline:1rem;padding-block:0.75rem;font-size:var(--calcite-font-size--1);line-height:1rem;font-weight:var(--calcite-font-weight-normal)}:host([scale=m]) .button--text-visible .icon-container{margin-inline-end:0.75rem}:host([scale=l]) .button{padding:1.25rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;font-weight:var(--calcite-font-weight-normal)}:host([scale=l]) .button--text-visible .icon-container{margin-inline-end:1rem}:host([alignment=center]) .button{justify-content:center}:host([alignment=end]) .button{justify-content:flex-end}:host([alignment=center]) .button .text-container--visible,:host([alignment=end]) .button .text-container--visible{flex:0 1 auto}:host([scale=s][compact]) .button,:host([scale=m][compact]) .button,:host([scale=l][compact]) .button{padding-inline:0px}.slot-container{display:flex}.slot-container--hidden{display:none}.button--text-visible{inline-size:100%}.indicator-with-icon{position:relative}.indicator-with-icon::after{content:"";position:absolute;block-size:0.5rem;inline-size:0.5rem;border-radius:9999px;inset-block-end:-0.275rem;inset-inline-end:-0.275rem;background-color:var(--calcite-action-indicator-color, var(--calcite-color-brand))}.indicator-without-icon{margin-inline:0.25rem;inline-size:1rem;position:relative}.indicator-without-icon::after{content:"";position:absolute;block-size:0.5rem;inline-size:0.5rem;border-radius:9999px;inset-block-end:-0.275rem;inset-inline-end:-0.275rem;background-color:var(--calcite-action-indicator-color, var(--calcite-color-brand))}.indicator-text{position:absolute;inline-size:1px;block-size:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) .button,:host([disabled]) .button:hover,:host([disabled]) .button:focus{cursor:default;background-color:var(--calcite-color-foreground-1);opacity:var(--calcite-opacity-disabled)}:host([disabled]):host([active]) .button,:host([disabled]):host([active]) .button:hover,:host([disabled]):host([active]) .button:focus{background-color:var(--calcite-color-foreground-3);opacity:var(--calcite-opacity-disabled)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}`,l6e=a6e,c6e=ci(class extends li{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.mutationObserver=hn("mutation",()=>Tu(this)),this.guid=`calcite-action-${Il()}`,this.indicatorId=`${this.guid}-indicator`,this.buttonId=`${this.guid}-button`,this.handleTooltipSlotChange=e=>{const n=e.target.assignedElements({flatten:!0}).filter(s=>s==null?void 0:s.matches("calcite-tooltip"))[0];n&&(n.referenceElement=this.buttonEl)},this.active=!1,this.alignment=void 0,this.appearance="solid",this.compact=!1,this.disabled=!1,this.icon=void 0,this.iconFlipRtl=!1,this.indicator=!1,this.label=void 0,this.loading=!1,this.scale="m",this.text=void 0,this.textEnabled=!1,this.messages=void 0,this.messageOverrides=void 0,this.effectiveLocale="",this.defaultMessages=void 0}onMessagesChange(){}effectiveLocaleChange(){xo(this,this.effectiveLocale)}connectedCallback(){var e;Ds(this),So(this),(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0})}async componentWillLoad(){vo(this),ya()&&await _o(this)}componentDidLoad(){bo(this)}disconnectedCallback(){var e;zs(this),To(this),(e=this.mutationObserver)==null||e.disconnect()}componentDidRender(){Al(this)}async setFocus(){var e;await wo(this),(e=this.buttonEl)==null||e.focus()}renderTextContainer(){const{text:e,textEnabled:i}=this,n={[No.textContainer]:!0,[No.textContainerVisible]:i};return e?X("div",{class:n,key:"text-container"},e):null}renderIndicatorText(){const{indicator:e,messages:i,indicatorId:n,buttonId:s}=this;return X("div",{"aria-labelledby":s,"aria-live":"polite",class:No.indicatorText,id:n,role:"region"},e?i.indicator:null)}renderIconContainer(){var P;const{loading:e,icon:i,scale:n,el:s,iconFlipRtl:h,indicator:f}=this,m=n==="l"?"l":"m",y=e?X("calcite-loader",{inline:!0,label:this.messages.loading,scale:m}):null,x=i?X("calcite-icon",{class:{[No.indicatorWithIcon]:f},flipRtl:h,icon:i,scale:Ji(this.scale)}):null,E=y||x,k=E||((P=s.children)==null?void 0:P.length),I=X("div",{class:{[No.slotContainer]:!0,[No.slotContainerHidden]:e}},X("slot",null));return k?X("div",{"aria-hidden":"true",class:No.iconContainer,key:"icon-container"},E,I):null}render(){const{active:e,compact:i,disabled:n,icon:s,loading:h,textEnabled:f,label:m,text:y,indicator:x,indicatorId:E,buttonId:k,messages:I}=this,P=m||y,L=P?`${P}${x?` (${I.indicator})`:""}`:"",D={[No.button]:!0,[No.buttonTextVisible]:f,[No.buttonCompact]:i};return X(dn,{key:"3b459307dcb6f8d373e70cd5c7a45d122565a70e"},X(Ol,{key:"3a81f1fb62a66f1dbd608f095ed90f2d47a9daf6",disabled:n},X("button",{key:"bb5249babc116d462becd6b9a056ca0d368c6e09","aria-busy":cn(h),"aria-controls":x?E:null,"aria-label":L,"aria-pressed":cn(e),class:D,disabled:n,id:k,ref:j=>this.buttonEl=j},this.renderIconContainer(),this.renderTextContainer(),!s&&x&&X("div",{class:No.indicatorWithoutIcon,key:"indicator-no-icon"})),X("slot",{key:"983989711d64076eca866c1928f9c777331fcba4",name:o6e.tooltip,onSlotchange:this.handleTooltipSlotChange}),this.renderIndicatorText()))}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return l6e}},[1,"calcite-action",{active:[516],alignment:[513],appearance:[513],compact:[516],disabled:[516],icon:[1],iconFlipRtl:[516,"icon-flip-rtl"],indicator:[516],label:[1],loading:[516],scale:[513],text:[1],textEnabled:[516,"text-enabled"],messages:[1040],messageOverrides:[1040],effectiveLocale:[32],defaultMessages:[32],setFocus:[64]},void 0,{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function H_(){if(typeof customElements>"u")return;["calcite-action","calcite-icon","calcite-loader"].forEach(e=>{switch(e){case"calcite-action":customElements.get(e)||customElements.define(e,c6e);break;case"calcite-icon":customElements.get(e)||Or();break;case"calcite-loader":customElements.get(e)||Eu();break}})}H_();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 *//*!
* focus-trap 7.6.0
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function h6e(t,e,i){return(e=d6e(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function cO(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),i.push.apply(i,n)}return i}function hO(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?cO(Object(i),!0).forEach(function(n){h6e(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):cO(Object(i)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))})}return t}function u6e(t,e){if(typeof t!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var n=i.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function d6e(t){var e=u6e(t,"string");return typeof e=="symbol"?e:e+""}var uO={activateTrap:function(e,i){if(e.length>0){var n=e[e.length-1];n!==i&&n.pause()}var s=e.indexOf(i);s===-1||e.splice(s,1),e.push(i)},deactivateTrap:function(e,i){var n=e.indexOf(i);n!==-1&&e.splice(n,1),e.length>0&&e[e.length-1].unpause()}},p6e=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},f6e=function(e){return(e==null?void 0:e.key)==="Escape"||(e==null?void 0:e.key)==="Esc"||(e==null?void 0:e.keyCode)===27},rm=function(e){return(e==null?void 0:e.key)==="Tab"||(e==null?void 0:e.keyCode)===9},g6e=function(e){return rm(e)&&!e.shiftKey},m6e=function(e){return rm(e)&&e.shiftKey},dO=function(e){return setTimeout(e,0)},pO=function(e,i){var n=-1;return e.every(function(s,h){return i(s)?(n=h,!1):!0}),n},A1=function(e){for(var i=arguments.length,n=new Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];return typeof e=="function"?e.apply(void 0,n):e},Xv=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},y6e=[],v6e=function(e,i){var n=(i==null?void 0:i.document)||document,s=(i==null?void 0:i.trapStack)||y6e,h=hO({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:g6e,isKeyBackward:m6e},i),f={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},m,y=function(he,se,xe){return he&&he[se]!==void 0?he[se]:h[xe||se]},x=function(he,se){var xe=typeof(se==null?void 0:se.composedPath)=="function"?se.composedPath():void 0;return f.containerGroups.findIndex(function(Be){var Fe=Be.container,ze=Be.tabbableNodes;return Fe.contains(he)||(xe==null?void 0:xe.includes(Fe))||ze.find(function(it){return it===he})})},E=function(he){var se=h[he];if(typeof se=="function"){for(var xe=arguments.length,Be=new Array(xe>1?xe-1:0),Fe=1;Fe<xe;Fe++)Be[Fe-1]=arguments[Fe];se=se.apply(void 0,Be)}if(se===!0&&(se=void 0),!se){if(se===void 0||se===!1)return se;throw new Error("`".concat(he,"` was specified but was not a node, or did not return a node"))}var ze=se;if(typeof se=="string"&&(ze=n.querySelector(se),!ze))throw new Error("`".concat(he,"` as selector refers to no known node"));return ze},k=function(){var he=E("initialFocus");if(he===!1)return!1;if(he===void 0||!sx(he,h.tabbableOptions))if(x(n.activeElement)>=0)he=n.activeElement;else{var se=f.tabbableGroups[0],xe=se&&se.firstTabbableNode;he=xe||E("fallbackFocus")}if(!he)throw new Error("Your focus-trap needs to have at least one focusable element");return he},I=function(){if(f.containerGroups=f.containers.map(function(he){var se=yB(he,h.tabbableOptions),xe=Cye(he,h.tabbableOptions),Be=se.length>0?se[0]:void 0,Fe=se.length>0?se[se.length-1]:void 0,ze=xe.find(function(Et){return Lp(Et)}),it=xe.slice().reverse().find(function(Et){return Lp(Et)}),ti=!!se.find(function(Et){return xd(Et)>0});return{container:he,tabbableNodes:se,focusableNodes:xe,posTabIndexesFound:ti,firstTabbableNode:Be,lastTabbableNode:Fe,firstDomTabbableNode:ze,lastDomTabbableNode:it,nextTabbableNode:function(Un){var Pr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,Di=se.indexOf(Un);return Di<0?Pr?xe.slice(xe.indexOf(Un)+1).find(function(qi){return Lp(qi)}):xe.slice(0,xe.indexOf(Un)).reverse().find(function(qi){return Lp(qi)}):se[Di+(Pr?1:-1)]}}}),f.tabbableGroups=f.containerGroups.filter(function(he){return he.tabbableNodes.length>0}),f.tabbableGroups.length<=0&&!E("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(f.containerGroups.find(function(he){return he.posTabIndexesFound})&&f.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},P=function(he){var se=he.activeElement;if(se)return se.shadowRoot&&se.shadowRoot.activeElement!==null?P(se.shadowRoot):se},L=function(he){if(he!==!1&&he!==P(document)){if(!he||!he.focus){L(k());return}he.focus({preventScroll:!!h.preventScroll}),f.mostRecentlyFocusedNode=he,p6e(he)&&he.select()}},D=function(he){var se=E("setReturnFocus",he);return se||(se===!1?!1:he)},j=function(he){var se=he.target,xe=he.event,Be=he.isBackward,Fe=Be===void 0?!1:Be;se=se||Xv(xe),I();var ze=null;if(f.tabbableGroups.length>0){var it=x(se,xe),ti=it>=0?f.containerGroups[it]:void 0;if(it<0)Fe?ze=f.tabbableGroups[f.tabbableGroups.length-1].lastTabbableNode:ze=f.tabbableGroups[0].firstTabbableNode;else if(Fe){var Et=pO(f.tabbableGroups,function(va){var ba=va.firstTabbableNode;return se===ba});if(Et<0&&(ti.container===se||sx(se,h.tabbableOptions)&&!Lp(se,h.tabbableOptions)&&!ti.nextTabbableNode(se,!1))&&(Et=it),Et>=0){var Un=Et===0?f.tabbableGroups.length-1:Et-1,Pr=f.tabbableGroups[Un];ze=xd(se)>=0?Pr.lastTabbableNode:Pr.lastDomTabbableNode}else rm(xe)||(ze=ti.nextTabbableNode(se,!1))}else{var Di=pO(f.tabbableGroups,function(va){var ba=va.lastTabbableNode;return se===ba});if(Di<0&&(ti.container===se||sx(se,h.tabbableOptions)&&!Lp(se,h.tabbableOptions)&&!ti.nextTabbableNode(se))&&(Di=it),Di>=0){var qi=Di===f.tabbableGroups.length-1?0:Di+1,Hc=f.tabbableGroups[qi];ze=xd(se)>=0?Hc.firstTabbableNode:Hc.firstDomTabbableNode}else rm(xe)||(ze=ti.nextTabbableNode(se))}}else ze=E("fallbackFocus");return ze},H=function(he){var se=Xv(he);if(!(x(se,he)>=0)){if(A1(h.clickOutsideDeactivates,he)){m.deactivate({returnFocus:h.returnFocusOnDeactivate});return}A1(h.allowOutsideClick,he)||he.preventDefault()}},W=function(he){var se=Xv(he),xe=x(se,he)>=0;if(xe||se instanceof Document)xe&&(f.mostRecentlyFocusedNode=se);else{he.stopImmediatePropagation();var Be,Fe=!0;if(f.mostRecentlyFocusedNode)if(xd(f.mostRecentlyFocusedNode)>0){var ze=x(f.mostRecentlyFocusedNode),it=f.containerGroups[ze].tabbableNodes;if(it.length>0){var ti=it.findIndex(function(Et){return Et===f.mostRecentlyFocusedNode});ti>=0&&(h.isKeyForward(f.recentNavEvent)?ti+1<it.length&&(Be=it[ti+1],Fe=!1):ti-1>=0&&(Be=it[ti-1],Fe=!1))}}else f.containerGroups.some(function(Et){return Et.tabbableNodes.some(function(Un){return xd(Un)>0})})||(Fe=!1);else Fe=!1;Fe&&(Be=j({target:f.mostRecentlyFocusedNode,isBackward:h.isKeyBackward(f.recentNavEvent)})),L(Be||f.mostRecentlyFocusedNode||k())}f.recentNavEvent=void 0},Z=function(he){var se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;f.recentNavEvent=he;var xe=j({event:he,isBackward:se});xe&&(rm(he)&&he.preventDefault(),L(xe))},Y=function(he){(h.isKeyForward(he)||h.isKeyBackward(he))&&Z(he,h.isKeyBackward(he))},te=function(he){f6e(he)&&A1(h.escapeDeactivates,he)!==!1&&(he.preventDefault(),m.deactivate())},ie=function(he){var se=Xv(he);x(se,he)>=0||A1(h.clickOutsideDeactivates,he)||A1(h.allowOutsideClick,he)||(he.preventDefault(),he.stopImmediatePropagation())},le=function(){if(f.active)return uO.activateTrap(s,m),f.delayInitialFocusTimer=h.delayInitialFocus?dO(function(){L(k())}):L(k()),n.addEventListener("focusin",W,!0),n.addEventListener("mousedown",H,{capture:!0,passive:!1}),n.addEventListener("touchstart",H,{capture:!0,passive:!1}),n.addEventListener("click",ie,{capture:!0,passive:!1}),n.addEventListener("keydown",Y,{capture:!0,passive:!1}),n.addEventListener("keydown",te),m},pe=function(){if(f.active)return n.removeEventListener("focusin",W,!0),n.removeEventListener("mousedown",H,!0),n.removeEventListener("touchstart",H,!0),n.removeEventListener("click",ie,!0),n.removeEventListener("keydown",Y,!0),n.removeEventListener("keydown",te),m},ve=function(he){var se=he.some(function(xe){var Be=Array.from(xe.removedNodes);return Be.some(function(Fe){return Fe===f.mostRecentlyFocusedNode})});se&&L(k())},be=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(ve):void 0,Se=function(){be&&(be.disconnect(),f.active&&!f.paused&&f.containers.map(function(he){be.observe(he,{subtree:!0,childList:!0})}))};return m={get active(){return f.active},get paused(){return f.paused},activate:function(he){if(f.active)return this;var se=y(he,"onActivate"),xe=y(he,"onPostActivate"),Be=y(he,"checkCanFocusTrap");Be||I(),f.active=!0,f.paused=!1,f.nodeFocusedBeforeActivation=n.activeElement,se==null||se();var Fe=function(){Be&&I(),le(),Se(),xe==null||xe()};return Be?(Be(f.containers.concat()).then(Fe,Fe),this):(Fe(),this)},deactivate:function(he){if(!f.active)return this;var se=hO({onDeactivate:h.onDeactivate,onPostDeactivate:h.onPostDeactivate,checkCanReturnFocus:h.checkCanReturnFocus},he);clearTimeout(f.delayInitialFocusTimer),f.delayInitialFocusTimer=void 0,pe(),f.active=!1,f.paused=!1,Se(),uO.deactivateTrap(s,m);var xe=y(se,"onDeactivate"),Be=y(se,"onPostDeactivate"),Fe=y(se,"checkCanReturnFocus"),ze=y(se,"returnFocus","returnFocusOnDeactivate");xe==null||xe();var it=function(){dO(function(){ze&&L(D(f.nodeFocusedBeforeActivation)),Be==null||Be()})};return ze&&Fe?(Fe(D(f.nodeFocusedBeforeActivation)).then(it,it),this):(it(),this)},pause:function(he){if(f.paused||!f.active)return this;var se=y(he,"onPause"),xe=y(he,"onPostPause");return f.paused=!0,se==null||se(),pe(),Se(),xe==null||xe(),this},unpause:function(he){if(!f.paused||!f.active)return this;var se=y(he,"onUnpause"),xe=y(he,"onPostUnpause");return f.paused=!1,se==null||se(),I(),le(),Se(),xe==null||xe(),this},updateContainerElements:function(he){var se=[].concat(he).filter(Boolean);return f.containers=se.map(function(xe){return typeof xe=="string"?n.querySelector(xe):xe}),f.active&&I(),Se(),this}},m.updateContainerElements(e),m};function b6e(t,e){const{el:i}=t,n=i;if(!n)return;const s={clickOutsideDeactivates:!0,escapeDeactivates:!1,fallbackFocus:n,setReturnFocus:h=>(y0(h),!1),...e==null?void 0:e.focusTrapOptions,document:i.ownerDocument,tabbableOptions:vB,trapStack:L1e};t.focusTrap=v6e(n,s)}function fO(t,e){var i;t.focusTrapDisabled||(i=t.focusTrap)==null||i.activate(e)}function Ix(t,e){var i;(i=t.focusTrap)==null||i.deactivate(e)}function w6e(t){var e;(e=t.focusTrap)==null||e.updateContainerElements(t.el)}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const Uq=(t,e)=>{const i=t.level?`h${t.level}`:"div";return delete t.level,X(i,{class:t.class,key:t.key},e)};/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */class _6e{constructor(){this.registeredElements=new Map,this.registeredElementCount=0,this.queryPopover=e=>{const{registeredElements:i}=this,n=e.find(s=>i.has(s));return i.get(n)},this.togglePopovers=e=>{const i=e.composedPath(),n=this.queryPopover(i);n&&!n.triggerDisabled&&(n.open=!n.open),Array.from(this.registeredElements.values()).filter(s=>s!==n&&s.autoClose&&s.open&&!i.includes(s)).forEach(s=>s.open=!1)},this.keyDownHandler=e=>{e.defaultPrevented||(e.key==="Escape"?this.closeAllPopovers():d_(e.key)&&this.togglePopovers(e))},this.clickHandler=e=>{Bye(e)||this.togglePopovers(e)}}registerElement(e,i){this.registeredElementCount++,this.registeredElements.set(e,i),this.registeredElementCount===1&&this.addListeners()}unregisterElement(e){this.registeredElements.delete(e)&&this.registeredElementCount--,this.registeredElementCount===0&&this.removeListeners()}closeAllPopovers(){Array.from(this.registeredElements.values()).forEach(e=>e.open=!1)}addListeners(){window.addEventListener("click",this.clickHandler),window.addEventListener("keydown",this.keyDownHandler)}removeListeners(){window.removeEventListener("click",this.clickHandler),window.removeEventListener("keydown",this.keyDownHandler)}}const Ma={container:"container",imageContainer:"image-container",closeButtonContainer:"close-button-container",closeButton:"close-button",content:"content",hasHeader:"has-header",header:"header",headerContainer:"headerContainer",headerContent:"header-content",heading:"heading"},x6e="auto",gO="aria-controls",mO="aria-expanded",S6e=":host{--calcite-floating-ui-z-index:var(--calcite-popover-z-index, var(--calcite-z-index-popup));display:block;position:absolute;z-index:var(--calcite-floating-ui-z-index)}.calcite-floating-ui-anim{position:relative;transition:var(--calcite-floating-ui-transition);transition-property:inset, left, opacity;opacity:0;box-shadow:0 0 16px 0 rgba(0, 0, 0, 0.16);z-index:var(--calcite-z-index);border-radius:0.25rem}:host([data-placement^=bottom]) .calcite-floating-ui-anim{inset-block-start:-5px}:host([data-placement^=top]) .calcite-floating-ui-anim{inset-block-start:5px}:host([data-placement^=left]) .calcite-floating-ui-anim{left:5px}:host([data-placement^=right]) .calcite-floating-ui-anim{left:-5px}:host([data-placement]) .calcite-floating-ui-anim--active{opacity:1;inset-block:0;left:0}:host([calcite-hydrated-hidden]){visibility:hidden !important;pointer-events:none}.calcite-floating-ui-arrow{pointer-events:none;position:absolute;z-index:calc(var(--calcite-z-index) * -1);fill:var(--calcite-color-foreground-1)}.calcite-floating-ui-arrow__stroke{stroke:var(--calcite-color-border-3)}:host([scale=s]) .heading{padding-inline:0.75rem;padding-block:0.5rem;font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=m]) .heading{padding-inline:1rem;padding-block:0.75rem;font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=l]) .heading{padding-inline:1.25rem;padding-block:1rem;font-size:var(--calcite-font-size-1);line-height:1.375}:host{pointer-events:none}:host([open]){pointer-events:initial}.calcite-floating-ui-anim{border-width:1px;border-style:solid;background-color:var(--calcite-popover-background-color, var(--calcite-color-foreground-1));border-color:var(--calcite-popover-border-color, var(--calcite-color-border-3));border-radius:var(--calcite-popover-corner-radius, var(--calcite-corner-radius-round))}.calcite-floating-ui-arrow{fill:var(--calcite-popover-background-color, var(--calcite-color-foreground-1))}.calcite-floating-ui-arrow__stroke{stroke:var(--calcite-popover-border-color, var(--calcite-color-border-3))}.header{display:flex;flex:1 1 auto;align-items:stretch;justify-content:flex-start;border-width:0px;border-block-end-width:1px;border-style:solid;border-block-end-color:var(--calcite-popover-border-color, var(--calcite-color-border-3))}.heading{margin:0px;display:block;flex:1 1 auto;align-self:center;white-space:normal;font-weight:var(--calcite-font-weight-medium);word-wrap:break-word;word-break:break-word;color:var(--calcite-popover-text-color, var(--calcite-color-text-1))}.headerContainer{position:relative;display:flex;block-size:100%;flex-direction:row;flex-wrap:nowrap;border-radius:0.25rem;color:var(--calcite-popover-text-color, var(--calcite-color-text-1))}.headerContainer.has-header{flex-direction:column}.content{display:flex;block-size:100%;inline-size:100%;flex-direction:column;flex-wrap:nowrap;align-self:center;word-wrap:break-word;word-break:break-word}.close-button-container{display:flex;overflow:hidden;flex:0 0 auto;border-start-end-radius:var(--calcite-popover-corner-radius, var(--calcite-corner-radius-round));border-end-end-radius:var(--calcite-popover-corner-radius, var(--calcite-corner-radius-round));--calcite-action-corner-radius-start-end:var(--calcite-popover-corner-radius, var(--calcite-corner-radius-sharp));--calcite-action-corner-radius-end-end:var(--calcite-popover-corner-radius, var(--calcite-corner-radius-sharp))}::slotted(calcite-panel),::slotted(calcite-flow){block-size:100%}:host([hidden]){display:none}[hidden]{display:none}",T6e=S6e,yO=new _6e,E6e=ci(class extends li{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calcitePopoverBeforeClose=qe(this,"calcitePopoverBeforeClose",6),this.calcitePopoverClose=qe(this,"calcitePopoverClose",6),this.calcitePopoverBeforeOpen=qe(this,"calcitePopoverBeforeOpen",6),this.calcitePopoverOpen=qe(this,"calcitePopoverOpen",6),this.mutationObserver=hn("mutation",()=>this.updateFocusTrapElements()),this.guid=`calcite-popover-${Il()}`,this.openTransitionProp="opacity",this.hasLoaded=!1,this.setTransitionEl=e=>{this.transitionEl=e},this.setFilteredPlacements=()=>{const{el:e,flipPlacements:i}=this;this.filteredFlipPlacements=i?lH(i,e):null},this.setUpReferenceElement=(e=!0)=>{this.removeReferences(),this.effectiveReferenceElement=this.getReferenceElement(),kf(this,this.effectiveReferenceElement,this.el);const{el:i,referenceElement:n,effectiveReferenceElement:s}=this;e&&n&&!s&&console.warn(`${i.tagName}: reference-element id "${n}" was not found.`,{el:i}),this.addReferences()},this.getId=()=>this.el.id||this.guid,this.setExpandedAttr=()=>{const{effectiveReferenceElement:e,open:i}=this;e&&"setAttribute"in e&&e.setAttribute(mO,cn(i))},this.addReferences=()=>{const{effectiveReferenceElement:e}=this;if(!e)return;const i=this.getId();"setAttribute"in e&&e.setAttribute(gO,i),yO.registerElement(e,this.el),this.setExpandedAttr()},this.removeReferences=()=>{const{effectiveReferenceElement:e}=this;e&&("removeAttribute"in e&&(e.removeAttribute(gO),e.removeAttribute(mO)),yO.unregisterElement(e))},this.hide=()=>{this.open=!1},this.storeArrowEl=e=>{this.arrowEl=e,this.reposition(!0)},this.autoClose=!1,this.closable=!1,this.flipDisabled=!1,this.focusTrapDisabled=!1,this.pointerDisabled=!1,this.flipPlacements=void 0,this.heading=void 0,this.headingLevel=void 0,this.label=void 0,this.messageOverrides=void 0,this.messages=void 0,this.offsetDistance=hH,this.offsetSkidding=0,this.open=!1,this.overlayPositioning="absolute",this.placement=x6e,this.referenceElement=void 0,this.scale="m",this.triggerDisabled=!1,this.effectiveLocale="",this.floatingLayout="vertical",this.effectiveReferenceElement=void 0,this.defaultMessages=void 0}handleFocusTrapDisabled(e){this.open&&(e?Ix(this):fO(this))}flipPlacementsHandler(){this.setFilteredPlacements(),this.reposition(!0)}onMessagesChange(){}offsetDistanceOffsetHandler(){this.reposition(!0)}offsetSkiddingHandler(){this.reposition(!0)}openHandler(){kc(this),this.reposition(!0),this.setExpandedAttr()}overlayPositioningHandler(){this.reposition(!0)}placementHandler(){this.reposition(!0)}referenceElementHandler(){this.setUpReferenceElement(),this.reposition(!0)}effectiveLocaleChange(){xo(this,this.effectiveLocale)}connectedCallback(){var e;(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0}),this.setFilteredPlacements(),Ds(this),So(this),b6e(this),requestAnimationFrame(()=>this.setUpReferenceElement(this.hasLoaded))}async componentWillLoad(){await _o(this),vo(this)}componentDidLoad(){bo(this),this.referenceElement&&!this.effectiveReferenceElement&&this.setUpReferenceElement(),this.open&&kc(this),this.hasLoaded=!0}disconnectedCallback(){var e;(e=this.mutationObserver)==null||e.disconnect(),this.removeReferences(),zs(this),To(this),v_(this,this.effectiveReferenceElement,this.el),Ix(this)}async reposition(e=!1){const{el:i,effectiveReferenceElement:n,placement:s,overlayPositioning:h,flipDisabled:f,filteredFlipPlacements:m,offsetDistance:y,offsetSkidding:x,arrowEl:E}=this;return RM(this,{floatingEl:i,referenceEl:n,overlayPositioning:h,placement:s,flipDisabled:f,flipPlacements:m,offsetDistance:y,offsetSkidding:x,arrowEl:E,type:"popover"},e)}async setFocus(){await wo(this),Tu(this.el),xM(this.el)}async updateFocusTrapElements(){w6e(this)}getReferenceElement(){const{referenceElement:e,el:i}=this;return(typeof e=="string"?Ey(i,{id:e}):e)||null}onBeforeOpen(){this.calcitePopoverBeforeOpen.emit()}onOpen(){this.calcitePopoverOpen.emit(),fO(this)}onBeforeClose(){this.calcitePopoverBeforeClose.emit()}onClose(){this.calcitePopoverClose.emit(),Ix(this)}renderCloseButton(){const{messages:e,closable:i}=this;return i?X("div",{class:Ma.closeButtonContainer,key:Ma.closeButtonContainer},X("calcite-action",{appearance:"transparent",class:Ma.closeButton,onClick:this.hide,ref:n=>this.closeButtonEl=n,scale:this.scale,text:e.close},X("calcite-icon",{icon:"x",scale:Ji(this.scale)}))):null}renderHeader(){const{heading:e,headingLevel:i}=this,n=e?X(Uq,{class:Ma.heading,level:i},e):null;return n?X("div",{class:Ma.header,key:Ma.header},n,this.renderCloseButton()):null}render(){const{effectiveReferenceElement:e,heading:i,label:n,open:s,pointerDisabled:h,floatingLayout:f}=this,m=e&&s,y=!m,x=h?null:X(uH,{floatingLayout:f,key:"floating-arrow",ref:this.storeArrowEl});return X(dn,{key:"a563d48090d6e6c0c138023e169667834f657c4c","aria-hidden":cn(y),"aria-label":n,"aria-live":"polite","calcite-hydrated-hidden":y,id:this.getId(),role:"dialog"},X("div",{key:"73053dbdce2cfc68fcd42667089d611e81010955",class:{[Ma.container]:!0,[_0.animation]:!0,[_0.animationActive]:m},ref:this.setTransitionEl},x,X("div",{key:"1fbcd45ee42b10a67881ced74db2db051231c94d",class:{[Ma.hasHeader]:!!i,[Ma.headerContainer]:!0}},this.renderHeader(),X("div",{key:"522abe801b98787863aac14d990b948d2d286156",class:Ma.content},X("slot",{key:"022a8f690288acdbac4ec1b3eccf807ffe382d5d"})),i?null:this.renderCloseButton())))}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{focusTrapDisabled:["handleFocusTrapDisabled"],flipPlacements:["flipPlacementsHandler"],messageOverrides:["onMessagesChange"],offsetDistance:["offsetDistanceOffsetHandler"],offsetSkidding:["offsetSkiddingHandler"],open:["openHandler"],overlayPositioning:["overlayPositioningHandler"],placement:["placementHandler"],referenceElement:["referenceElementHandler"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return T6e}},[1,"calcite-popover",{autoClose:[516,"auto-close"],closable:[516],flipDisabled:[516,"flip-disabled"],focusTrapDisabled:[516,"focus-trap-disabled"],pointerDisabled:[516,"pointer-disabled"],flipPlacements:[16],heading:[1],headingLevel:[514,"heading-level"],label:[1],messageOverrides:[1040],messages:[1040],offsetDistance:[514,"offset-distance"],offsetSkidding:[514,"offset-skidding"],open:[1540],overlayPositioning:[513,"overlay-positioning"],placement:[513],referenceElement:[1,"reference-element"],scale:[513],triggerDisabled:[516,"trigger-disabled"],effectiveLocale:[32],floatingLayout:[32],effectiveReferenceElement:[32],defaultMessages:[32],reposition:[64],setFocus:[64],updateFocusTrapElements:[64]},void 0,{focusTrapDisabled:["handleFocusTrapDisabled"],flipPlacements:["flipPlacementsHandler"],messageOverrides:["onMessagesChange"],offsetDistance:["offsetDistanceOffsetHandler"],offsetSkidding:["offsetSkiddingHandler"],open:["openHandler"],overlayPositioning:["overlayPositioningHandler"],placement:["placementHandler"],referenceElement:["referenceElementHandler"],effectiveLocale:["effectiveLocaleChange"]}]);function w7(){if(typeof customElements>"u")return;["calcite-popover","calcite-action","calcite-icon","calcite-loader"].forEach(e=>{switch(e){case"calcite-popover":customElements.get(e)||customElements.define(e,E6e);break;case"calcite-action":customElements.get(e)||H_();break;case"calcite-icon":customElements.get(e)||Or();break;case"calcite-loader":customElements.get(e)||Eu();break}})}w7();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const vO={menu:"menu",defaultTrigger:"default-trigger"},K6={tooltip:"tooltip",trigger:"trigger"},M6e={menu:"ellipsis"},$6e="data-active",k6e=":host{box-sizing:border-box;display:flex;flex-direction:column;font-size:var(--calcite-font-size-1)}::slotted(calcite-action-group:not(:last-of-type)){border-block-end-width:var(--calcite-border-width-sm)}.default-trigger{position:relative;block-size:100%;flex:0 1 auto;align-self:stretch}slot[name=trigger]::slotted(calcite-action),calcite-action::slotted([slot=trigger]){position:relative;block-size:100%;flex:0 1 auto;align-self:stretch}.menu{display:flex;max-block-size:45vh;flex-direction:column;flex-wrap:nowrap;overflow-y:auto;overflow-x:hidden;outline:2px solid transparent;outline-offset:2px;gap:var(--calcite-action-menu-items-space, 0)}:host([hidden]){display:none}[hidden]{display:none}",C6e=k6e,I6e=["ArrowUp","ArrowDown","End","Home"],A6e=ci(class extends li{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteActionMenuOpen=qe(this,"calciteActionMenuOpen",6),this.actionElements=[],this.guid=`calcite-action-menu-${Il()}`,this.menuId=`${this.guid}-menu`,this.menuButtonId=`${this.guid}-menu-button`,this.connectMenuButtonEl=()=>{const{menuButtonId:e,menuId:i,open:n,label:s}=this,h=this.slottedMenuButtonEl||this.defaultMenuButtonEl;this.menuButtonEl!==h&&(this.disconnectMenuButtonEl(),this.menuButtonEl=h,this.setTooltipReferenceElement(),h&&(h.active=n,h.setAttribute("aria-controls",i),h.setAttribute("aria-expanded",cn(n)),h.setAttribute("aria-haspopup","true"),h.id||(h.id=e),h.label||(h.label=s),h.text||(h.text=s),h.addEventListener("click",this.menuButtonClick),h.addEventListener("keydown",this.menuButtonKeyDown)))},this.disconnectMenuButtonEl=()=>{const{menuButtonEl:e}=this;e&&(e.removeEventListener("click",this.menuButtonClick),e.removeEventListener("keydown",this.menuButtonKeyDown))},this.setMenuButtonEl=e=>{const i=e.target.assignedElements({flatten:!0}).filter(n=>n==null?void 0:n.matches("calcite-action"));this.slottedMenuButtonEl=i[0],this.connectMenuButtonEl()},this.setDefaultMenuButtonEl=e=>{this.defaultMenuButtonEl=e,this.connectMenuButtonEl()},this.handleCalciteActionClick=()=>{this.open=!1,this.setFocus()},this.menuButtonClick=()=>{this.toggleOpen()},this.updateTooltip=e=>{const i=e.target.assignedElements({flatten:!0}).filter(n=>n==null?void 0:n.matches("calcite-tooltip"));this.tooltipEl=i[0],this.setTooltipReferenceElement()},this.setTooltipReferenceElement=()=>{const{tooltipEl:e,expanded:i,menuButtonEl:n,open:s}=this;e&&(e.referenceElement=!i&&!s?n:null)},this.updateAction=(e,i)=>{const{guid:n,activeMenuItemIndex:s}=this,h=`${n}-action-${i}`;e.tabIndex=-1,e.setAttribute("role","menuitem"),e.id||(e.id=h),e.toggleAttribute($6e,i===s)},this.updateActions=e=>{e==null||e.forEach(this.updateAction)},this.handleDefaultSlotChange=e=>{const i=e.target.assignedElements({flatten:!0}).reduce((n,s)=>s!=null&&s.matches("calcite-action")?(n.push(s),n):s!=null&&s.matches("calcite-action-group")?n.concat(Array.from(s.querySelectorAll("calcite-action"))):n,[]);this.actionElements=i.filter(n=>!n.disabled&&!n.hidden)},this.menuButtonKeyDown=e=>{const{key:i}=e,{actionElements:n,activeMenuItemIndex:s,open:h}=this;if(n.length){if(d_(i)){if(e.preventDefault(),!h){this.toggleOpen();return}const f=n[s];f?f.click():this.toggleOpen(!1)}if(i==="Tab"){this.open=!1;return}if(i==="Escape"){this.toggleOpen(!1),e.preventDefault();return}this.handleActionNavigation(e,i,n)}},this.handleActionNavigation=(e,i,n)=>{if(!this.isValidKey(i,I6e))return;if(e.preventDefault(),!this.open){this.toggleOpen(),(i==="Home"||i==="ArrowDown")&&(this.activeMenuItemIndex=0),(i==="End"||i==="ArrowUp")&&(this.activeMenuItemIndex=n.length-1);return}i==="Home"&&(this.activeMenuItemIndex=0),i==="End"&&(this.activeMenuItemIndex=n.length-1);const s=this.activeMenuItemIndex;i==="ArrowUp"&&(this.activeMenuItemIndex=lO(Math.max(s-1,-1),n.length)),i==="ArrowDown"&&(this.activeMenuItemIndex=lO(s+1,n.length))},this.toggleOpenEnd=()=>{this.setFocus(),this.el.removeEventListener("calcitePopoverOpen",this.toggleOpenEnd)},this.toggleOpen=(e=!this.open)=>{this.el.addEventListener("calcitePopoverOpen",this.toggleOpenEnd),this.open=e},this.handlePopoverOpen=()=>{this.open=!0},this.handlePopoverClose=()=>{this.open=!1},this.appearance="solid",this.expanded=!1,this.flipPlacements=void 0,this.label=void 0,this.open=!1,this.overlayPositioning="absolute",this.placement="auto",this.scale=void 0,this.menuButtonEl=void 0,this.activeMenuItemIndex=-1}connectedCallback(){this.connectMenuButtonEl()}componentWillLoad(){vo(this)}componentDidLoad(){bo(this)}disconnectedCallback(){this.disconnectMenuButtonEl()}expandedHandler(){this.open=!1,this.setTooltipReferenceElement()}openHandler(e){this.activeMenuItemIndex=this.open?0:-1,this.menuButtonEl&&(this.menuButtonEl.active=e),this.calciteActionMenuOpen.emit(),this.setTooltipReferenceElement()}activeMenuItemIndexHandler(){this.updateActions(this.actionElements)}async setFocus(){return await wo(this),y0(this.menuButtonEl)}renderMenuButton(){const{appearance:e,label:i,scale:n,expanded:s}=this;return X("slot",{name:K6.trigger,onSlotchange:this.setMenuButtonEl},X("calcite-action",{appearance:e,class:vO.defaultTrigger,icon:M6e.menu,ref:this.setDefaultMenuButtonEl,scale:n,text:i,textEnabled:s}))}renderMenuItems(){const{actionElements:e,activeMenuItemIndex:i,open:n,menuId:s,menuButtonEl:h,label:f,placement:m,overlayPositioning:y,flipPlacements:x}=this,E=e[i],k=(E==null?void 0:E.id)||null;return X("calcite-popover",{autoClose:!0,flipPlacements:x,focusTrapDisabled:!0,label:f,offsetDistance:0,onCalcitePopoverClose:this.handlePopoverClose,onCalcitePopoverOpen:this.handlePopoverOpen,open:n,overlayPositioning:y,placement:m,pointerDisabled:!0,referenceElement:h},X("div",{"aria-activedescendant":k,"aria-labelledby":h==null?void 0:h.id,class:vO.menu,id:s,onClick:this.handleCalciteActionClick,role:"menu",tabIndex:-1},X("slot",{onSlotchange:this.handleDefaultSlotChange})))}render(){return X(gM,{key:"d13aa4f3d43fb5651c0487ccfa456813f69955d2"},this.renderMenuButton(),this.renderMenuItems(),X("slot",{key:"b63d187516c766db6a1b1db3df34050fdec9e6ce",name:K6.tooltip,onSlotchange:this.updateTooltip}))}isValidKey(e,i){return!!i.find(n=>n===e)}get el(){return this}static get watchers(){return{expanded:["expandedHandler"],open:["openHandler"],activeMenuItemIndex:["activeMenuItemIndexHandler"]}}static get style(){return C6e}},[1,"calcite-action-menu",{appearance:[513],expanded:[516],flipPlacements:[16],label:[1],open:[1540],overlayPositioning:[513,"overlay-positioning"],placement:[513],scale:[513],menuButtonEl:[32],activeMenuItemIndex:[32],setFocus:[64]},void 0,{expanded:["expandedHandler"],open:["openHandler"],activeMenuItemIndex:["activeMenuItemIndexHandler"]}]);function Bq(){if(typeof customElements>"u")return;["calcite-action-menu","calcite-action","calcite-icon","calcite-loader","calcite-popover"].forEach(e=>{switch(e){case"calcite-action-menu":customElements.get(e)||customElements.define(e,A6e);break;case"calcite-action":customElements.get(e)||H_();break;case"calcite-icon":customElements.get(e)||Or();break;case"calcite-loader":customElements.get(e)||Eu();break;case"calcite-popover":customElements.get(e)||w7();break}})}Bq();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const bO={scrim:"scrim",content:"content"},wO={s:72,l:480},O6e=":host{--calcite-scrim-background:var(--calcite-color-transparent-scrim);position:absolute;inset:0px;z-index:var(--calcite-z-index-overlay);display:flex;block-size:100%;inline-size:100%;flex-direction:column;align-items:stretch}@keyframes calcite-scrim-fade-in{0%{--tw-bg-opacity:0}100%{--tw-text-opacity:1}}.scrim{position:absolute;inset:0px;display:flex;flex-direction:column;align-content:center;align-items:center;justify-content:center;overflow:hidden;animation:calcite-scrim-fade-in var(--calcite-internal-animation-timing-medium) ease-in-out;background-color:var(--calcite-scrim-background, var(--calcite-color-transparent-scrim))}.content{padding:1rem}:host([hidden]){display:none}[hidden]{display:none}",P6e=O6e,R6e=ci(class extends li{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.resizeObserver=hn("resize",()=>this.handleResize()),this.handleDefaultSlotChange=e=>{this.hasContent=Fye(e)},this.storeLoaderEl=e=>{this.loaderEl=e,this.handleResize()},this.loading=!1,this.messages=void 0,this.messageOverrides=void 0,this.loaderScale=void 0,this.defaultMessages=void 0,this.effectiveLocale="",this.hasContent=!1}onMessagesChange(){}effectiveLocaleChange(){xo(this,this.effectiveLocale)}connectedCallback(){var e;Ds(this),So(this),(e=this.resizeObserver)==null||e.observe(this.el)}async componentWillLoad(){await _o(this)}disconnectedCallback(){var e;zs(this),To(this),(e=this.resizeObserver)==null||e.disconnect()}render(){const{hasContent:e,loading:i,messages:n}=this;return X("div",{key:"286b03bb4a18b45f1b6914684a5178e952a44127",class:bO.scrim},i?X("calcite-loader",{label:n.loading,ref:this.storeLoaderEl,scale:this.loaderScale}):null,X("div",{key:"0f8cd111720239b204d0d201610c4145d5616753",class:bO.content,hidden:!e},X("slot",{key:"fe7bbced9871c9179971da0ef7ca07ea1c9ac33e",onSlotchange:this.handleDefaultSlotChange})))}getScale(e){return e<wO.s?"s":e>=wO.l?"l":"m"}handleResize(){const{loaderEl:e,el:i}=this;e&&(this.loaderScale=this.getScale(Math.min(i.clientHeight,i.clientWidth)??0))}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return P6e}},[1,"calcite-scrim",{loading:[516],messages:[1040],messageOverrides:[1040],loaderScale:[32],defaultMessages:[32],effectiveLocale:[32],hasContent:[32]},void 0,{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function Hq(){if(typeof customElements>"u")return;["calcite-scrim","calcite-loader"].forEach(e=>{switch(e){case"calcite-scrim":customElements.get(e)||customElements.define(e,R6e);break;case"calcite-loader":customElements.get(e)||Eu();break}})}Hq();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const Fi={actionBarContainer:"action-bar-container",backButton:"back-button",container:"container",contentBottom:"content-bottom",contentTop:"content-top",header:"header",headerContainer:"header-container",headerContainerBorderEnd:"header-container--border-end",heading:"heading",summary:"summary",description:"description",headerContent:"header-content",headerActions:"header-actions",headerActionsEnd:"header-actions--end",headerActionsStart:"header-actions--start",contentWrapper:"content-wrapper",fabContainer:"fab-container",footer:"footer",footerContent:"footer-content",footerActions:"footer-actions",footerStart:"footer-start",footerEnd:"footer-end"},_O={close:"close",collapse:"collapse"},Qv={close:"x",menu:"ellipsis",backLeft:"chevron-left",backRight:"chevron-right",expand:"chevron-down",collapse:"chevron-up"},hs={actionBar:"action-bar",alerts:"alerts",contentBottom:"content-bottom",contentTop:"content-top",headerActionsStart:"header-actions-start",headerActionsEnd:"header-actions-end",headerMenuActions:"header-menu-actions",headerContent:"header-content",fab:"fab",footer:"footer",footerEnd:"footer-end",footerStart:"footer-start",footerActions:"footer-actions"},N6e=`:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{position:relative;display:flex;block-size:100%;inline-size:100%;flex:1 1 auto;overflow:hidden;--calcite-min-header-height:calc(var(--calcite-icon-size) * 3)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.header{margin:0px;display:flex;align-content:space-between;align-items:center;fill:var(--calcite-color-text-2);color:var(--calcite-color-text-2)}.heading{margin:0px;padding:0px;font-weight:var(--calcite-font-weight-medium)}.header .heading{flex:1 1 auto;padding:0.5rem}:host([scale=s]){--calcite-internal-panel-default-padding:var(--calcite-spacing-sm);--calcite-internal-panel-header-vertical-padding:10px}:host([scale=s]) .header-content .heading{font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=s]) .header-content .description{font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=m]){--calcite-internal-panel-default-padding:var(--calcite-spacing-md);--calcite-internal-panel-header-vertical-padding:var(--calcite-spacing-lg)}:host([scale=m]) .header-content .heading{font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=m]) .header-content .description{font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=l]){--calcite-internal-panel-default-padding:var(--calcite-spacing-xl);--calcite-internal-panel-header-vertical-padding:var(--calcite-spacing-xxl)}:host([scale=l]) .header-content .heading{font-size:var(--calcite-font-size-1);line-height:1.5rem}:host([scale=l]) .header-content .description{font-size:var(--calcite-font-size-0);line-height:1.25rem}.content-top,.content-bottom{display:flex;align-items:flex-start;align-self:stretch;border-block-start:1px solid var(--calcite-color-border-3);background-color:var(--calcite-color-foreground-1)}.container{position:relative;margin:0px;display:flex;inline-size:100%;flex:1 1 auto;flex-direction:column;align-items:stretch;background-color:var(--calcite-color-background);padding:0px;transition:max-block-size var(--calcite-animation-timing), inline-size var(--calcite-animation-timing)}.container[hidden]{display:none}.header{z-index:var(--calcite-z-index-header);display:flex;flex-direction:column;background-color:var(--calcite-color-foreground-1);border-block-end:var(--calcite-panel-header-border-block-end, 1px solid var(--calcite-color-border-3))}.header-container{display:flex;inline-size:100%;flex-direction:row;align-items:stretch;justify-content:flex-start;flex:0 0 auto}.header-container--border-end{border-block-end:1px solid var(--calcite-color-border-3)}.action-bar-container{inline-size:100%}.action-bar-container ::slotted(calcite-action-bar){inline-size:100%}.header-content{display:flex;flex-direction:column;overflow:hidden;padding-inline:0.75rem;padding-block:0.875rem;margin-inline-end:auto}.header-content .heading,.header-content .description{display:block;overflow-wrap:break-word;padding:0px}.header-content .heading{margin-inline:0px;margin-block:0px 0.25rem;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1)}.header-content .heading:only-child{margin-block-end:0px}.header-content .description{color:var(--calcite-color-text-2)}.back-button{border-width:0px;border-style:solid;border-color:var(--calcite-color-border-3);border-inline-end-width:1px}.header-actions{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:stretch}.header-actions--end{margin-inline-start:auto}.content-wrapper{display:flex;block-size:100%;flex:1 1 auto;flex-direction:column;flex-wrap:nowrap;align-items:stretch;overflow:auto;outline-color:transparent;padding:var(--calcite-panel-content-space, 0);background:var(--calcite-panel-background-color, var(--calcite-color-background))}.content-wrapper:focus-visible{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}.content-top,.content-bottom{padding:var(--calcite-internal-panel-default-padding)}.header-content{flex:1 1 auto;padding-block:var(--calcite-internal-panel-header-vertical-padding);padding-inline:var(--calcite-internal-panel-default-padding)}.footer{margin-block-start:auto;display:flex;flex-direction:row;align-content:space-between;align-items:center;justify-content:center;background-color:var(--calcite-color-foreground-1);font-size:var(--calcite-font-size--2);line-height:1.375;border-block-start:1px solid var(--calcite-color-border-3);padding:var(--calcite-panel-footer-padding, var(--calcite-internal-panel-default-padding))}.footer-content{display:flex;flex:1 1 0%;flex-direction:row;align-items:center;justify-content:center}.footer-actions{display:flex;flex:1 1 0%;flex-direction:row;align-items:center;justify-content:space-evenly;gap:var(--calcite-internal-panel-default-padding)}.footer-start{display:flex;flex:1 1 0%;flex-direction:row;align-items:center;justify-content:flex-start;margin-inline-end:auto;gap:var(--calcite-internal-panel-default-padding)}.footer-end{display:flex;flex:1 1 0%;flex-direction:row;align-items:center;justify-content:flex-end;margin-inline-start:auto;gap:var(--calcite-internal-panel-default-padding)}.fab-container{position:sticky;inset-block-end:0px;z-index:var(--calcite-z-index-sticky);margin-block:0px;margin-inline:auto;display:block;padding:0.5rem;inset-inline:0;inline-size:-moz-fit-content;inline-size:fit-content}:host([hidden]){display:none}[hidden]{display:none}`,L6e=N6e,D6e=ci(class extends li{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calcitePanelClose=qe(this,"calcitePanelClose",6),this.calcitePanelToggle=qe(this,"calcitePanelToggle",6),this.calcitePanelScroll=qe(this,"calcitePanelScroll",6),this.resizeObserver=hn("resize",()=>this.resizeHandler()),this.resizeHandler=()=>{const{panelScrollEl:e}=this;if(!e||typeof e.scrollHeight!="number"||typeof e.offsetHeight!="number")return;e.scrollHeight>e.offsetHeight?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")},this.setContainerRef=e=>{this.containerEl=e},this.panelKeyDownHandler=e=>{this.closable&&e.key==="Escape"&&!e.defaultPrevented&&(this.handleUserClose(),e.preventDefault())},this.handleUserClose=()=>{this.closed=!0,this.calcitePanelClose.emit()},this.open=()=>{this.isClosed=!1},this.close=async()=>{const e=this.beforeClose??(()=>Promise.resolve());try{await e()}catch{requestAnimationFrame(()=>{this.closed=!1});return}this.isClosed=!0},this.collapse=()=>{this.collapsed=!this.collapsed,this.calcitePanelToggle.emit()},this.panelScrollHandler=()=>{this.calcitePanelScroll.emit()},this.handleHeaderActionsStartSlotChange=e=>{this.hasStartActions=xi(e)},this.handleHeaderActionsEndSlotChange=e=>{this.hasEndActions=xi(e)},this.handleHeaderMenuActionsSlotChange=e=>{this.hasMenuItems=xi(e)},this.handleActionBarSlotChange=e=>{const i=sl(e).filter(n=>n==null?void 0:n.matches("calcite-action-bar"));i.forEach(n=>n.layout="horizontal"),this.hasActionBar=!!i.length},this.handleHeaderContentSlotChange=e=>{this.hasHeaderContent=xi(e)},this.handleFabSlotChange=e=>{this.hasFab=xi(e)},this.handleFooterActionsSlotChange=e=>{this.hasFooterActions=xi(e)},this.handleFooterEndSlotChange=e=>{this.hasFooterEndContent=xi(e)},this.handleFooterStartSlotChange=e=>{this.hasFooterStartContent=xi(e)},this.handleFooterSlotChange=e=>{this.hasFooterContent=xi(e)},this.contentBottomSlotChangeHandler=e=>{this.hasContentBottom=xi(e)},this.contentTopSlotChangeHandler=e=>{this.hasContentTop=xi(e)},this.setPanelScrollEl=e=>{var i,n;this.panelScrollEl=e,(i=this.resizeObserver)==null||i.disconnect(),e&&((n=this.resizeObserver)==null||n.observe(e),this.resizeHandler())},this.handleAlertsSlotChange=e=>{var i;(i=sl(e))==null||i.map(n=>{n.nodeName==="CALCITE-ALERT"&&(n.embedded=!0)})},this.beforeClose=void 0,this.closed=!1,this.disabled=!1,this.closable=!1,this.collapsed=!1,this.collapseDirection="down",this.collapsible=!1,this.headingLevel=void 0,this.loading=!1,this.heading=void 0,this.description=void 0,this.menuFlipPlacements=void 0,this.menuOpen=!1,this.menuPlacement=w2e,this.messageOverrides=void 0,this.messages=void 0,this.overlayPositioning="absolute",this.scale="m",this.isClosed=!1,this.hasStartActions=!1,this.hasEndActions=!1,this.hasMenuItems=!1,this.hasHeaderContent=!1,this.hasActionBar=!1,this.hasContentBottom=!1,this.hasContentTop=!1,this.hasFab=!1,this.hasFooterActions=!1,this.hasFooterContent=!1,this.hasFooterEndContent=!1,this.hasFooterStartContent=!1,this.defaultMessages=void 0,this.effectiveLocale="",this.showHeaderContent=!1}toggleDialog(e){e?this.close():this.open()}onMessagesChange(){}connectedCallback(){Ds(this),So(this)}async componentWillLoad(){vo(this),this.isClosed=this.closed,await _o(this)}componentDidLoad(){bo(this)}componentDidRender(){Al(this)}disconnectedCallback(){var e;zs(this),To(this),(e=this.resizeObserver)==null||e.disconnect()}effectiveLocaleChange(){xo(this,this.effectiveLocale)}async setFocus(){await wo(this),xM(this.containerEl)}async scrollContentTo(e){var i;(i=this.panelScrollEl)==null||i.scrollTo(e)}renderHeaderContent(){const{heading:e,headingLevel:i,description:n,hasHeaderContent:s}=this,h=e?X(Uq,{class:Fi.heading,level:i},e):null,f=n?X("span",{class:Fi.description},n):null;return!s&&(h||f)?X("div",{class:Fi.headerContent,key:"header-content"},h,f):null}renderActionBar(){return X("div",{class:Fi.actionBarContainer,hidden:!this.hasActionBar},X("slot",{name:hs.actionBar,onSlotchange:this.handleActionBarSlotChange}))}renderHeaderSlottedContent(){return X("div",{class:Fi.headerContent,hidden:!this.hasHeaderContent,key:"slotted-header-content"},X("slot",{name:hs.headerContent,onSlotchange:this.handleHeaderContentSlotChange}))}renderHeaderStartActions(){const{hasStartActions:e}=this;return X("div",{class:{[Fi.headerActionsStart]:!0,[Fi.headerActions]:!0},hidden:!e,key:"header-actions-start"},X("slot",{name:hs.headerActionsStart,onSlotchange:this.handleHeaderActionsStartSlotChange}))}renderHeaderActionsEnd(){const{hasEndActions:e,messages:i,closable:n,collapsed:s,collapseDirection:h,collapsible:f,hasMenuItems:m}=this,{collapse:y,expand:x,close:E}=i,k=[Qv.expand,Qv.collapse];h==="up"&&k.reverse();const I=f?X("calcite-action",{"aria-expanded":cn(!s),"aria-label":y,icon:s?k[0]:k[1],id:_O.collapse,onClick:this.collapse,scale:this.scale,text:y,title:s?x:y}):null,P=n?X("calcite-action",{"aria-label":E,icon:Qv.close,id:_O.close,onClick:this.handleUserClose,scale:this.scale,text:E,title:E}):null,L=X("slot",{name:hs.headerActionsEnd,onSlotchange:this.handleHeaderActionsEndSlotChange}),D=e||I||P||m;return X("div",{class:{[Fi.headerActionsEnd]:!0,[Fi.headerActions]:!0},hidden:!D,key:"header-actions-end"},L,this.renderMenu(),I,P)}renderMenu(){const{hasMenuItems:e,messages:i,menuOpen:n,menuFlipPlacements:s,menuPlacement:h}=this;return X("calcite-action-menu",{flipPlacements:s??["top","bottom"],hidden:!e,key:"menu",label:i.options,open:n,overlayPositioning:this.overlayPositioning,placement:h},X("calcite-action",{icon:Qv.menu,scale:this.scale,slot:K6.trigger,text:i.options}),X("slot",{name:hs.headerMenuActions,onSlotchange:this.handleHeaderMenuActionsSlotChange}))}renderHeaderNode(){const{hasHeaderContent:e,hasStartActions:i,hasEndActions:n,closable:s,collapsible:h,hasMenuItems:f,hasActionBar:m}=this,y=this.renderHeaderContent(),x=e||!!y||i||n||h||s||f;return this.showHeaderContent=x,X("header",{class:Fi.header,hidden:!(x||m)},X("div",{class:{[Fi.headerContainer]:!0,[Fi.headerContainerBorderEnd]:m},hidden:!x},this.renderHeaderStartActions(),this.renderHeaderSlottedContent(),y,this.renderHeaderActionsEnd()),this.renderActionBar(),this.renderContentTop())}renderFooterNode(){const{hasFooterEndContent:e,hasFooterStartContent:i,hasFooterContent:n,hasFooterActions:s}=this,h=i||e||n||s;return X("footer",{class:Fi.footer,hidden:!h},X("div",{class:Fi.footerContent,hidden:!n},X("slot",{name:hs.footer,onSlotchange:this.handleFooterSlotChange})),X("div",{class:Fi.footerStart,hidden:n||!i},X("slot",{name:hs.footerStart,onSlotchange:this.handleFooterStartSlotChange})),X("div",{class:Fi.footerEnd,hidden:n||!e},X("slot",{name:hs.footerEnd,onSlotchange:this.handleFooterEndSlotChange})),X("div",{class:Fi.footerActions,hidden:n||!s},X("slot",{key:"footer-actions-slot",name:hs.footerActions,onSlotchange:this.handleFooterActionsSlotChange})))}renderContent(){return X("div",{class:Fi.contentWrapper,hidden:this.collapsible&&this.collapsed,onScroll:this.panelScrollHandler,ref:this.setPanelScrollEl},X("slot",null),this.renderFab())}renderContentBottom(){return X("div",{class:Fi.contentBottom,hidden:!this.hasContentBottom},X("slot",{name:hs.contentBottom,onSlotchange:this.contentBottomSlotChangeHandler}))}renderContentTop(){return X("div",{class:Fi.contentTop,hidden:!this.hasContentTop},X("slot",{name:hs.contentTop,onSlotchange:this.contentTopSlotChangeHandler}))}renderFab(){return X("div",{class:Fi.fabContainer,hidden:!this.hasFab},X("slot",{name:hs.fab,onSlotchange:this.handleFabSlotChange}))}render(){const{disabled:e,loading:i,isClosed:n}=this,s=X("article",{key:"0f439dffdca536eb6973ac386b0566091249aee3","aria-busy":cn(i),class:Fi.container,hidden:n,ref:this.setContainerRef},this.renderHeaderNode(),this.renderContent(),this.renderContentBottom(),this.renderFooterNode(),X("slot",{key:"alerts",name:hs.alerts,onSlotchange:this.handleAlertsSlotChange}));return X(dn,{key:"6e5baec07ecb356871dea038ebc2d5ee2d8ed54f",onKeyDown:this.panelKeyDownHandler},X(Ol,{key:"924cda1799b359f1bb3fb119cebfff5a7349b72d",disabled:e},i?X("calcite-scrim",{loading:i}):null,s))}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{closed:["toggleDialog"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return L6e}},[1,"calcite-panel",{beforeClose:[16],closed:[1540],disabled:[516],closable:[516],collapsed:[516],collapseDirection:[1,"collapse-direction"],collapsible:[516],headingLevel:[514,"heading-level"],loading:[516],heading:[1],description:[1],menuFlipPlacements:[16],menuOpen:[516,"menu-open"],menuPlacement:[513,"menu-placement"],messageOverrides:[1040],messages:[1040],overlayPositioning:[513,"overlay-positioning"],scale:[513],isClosed:[32],hasStartActions:[32],hasEndActions:[32],hasMenuItems:[32],hasHeaderContent:[32],hasActionBar:[32],hasContentBottom:[32],hasContentTop:[32],hasFab:[32],hasFooterActions:[32],hasFooterContent:[32],hasFooterEndContent:[32],hasFooterStartContent:[32],defaultMessages:[32],effectiveLocale:[32],showHeaderContent:[32],setFocus:[64],scrollContentTo:[64]},void 0,{closed:["toggleDialog"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function z6e(){if(typeof customElements>"u")return;["calcite-panel","calcite-action","calcite-action-menu","calcite-icon","calcite-loader","calcite-popover","calcite-scrim"].forEach(e=>{switch(e){case"calcite-panel":customElements.get(e)||customElements.define(e,D6e);break;case"calcite-action":customElements.get(e)||H_();break;case"calcite-action-menu":customElements.get(e)||Bq();break;case"calcite-icon":customElements.get(e)||Or();break;case"calcite-loader":customElements.get(e)||Eu();break;case"calcite-popover":customElements.get(e)||w7();break;case"calcite-scrim":customElements.get(e)||Hq();break}})}z6e();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const F6e={brand:"lightbulb",danger:"exclamationMarkTriangle",info:"information",success:"checkCircle",warning:"exclamationMarkTriangle"};/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const qn={title:"title",close:"close",imageContainer:"image-container",chipIcon:"chip-icon",textSlotted:"text--slotted",container:"container",imageSlotted:"image--slotted",closable:"closable",multiple:"multiple",single:"single",selectable:"selectable",selectIcon:"select-icon",selectIconActive:"select-icon--active",nonInteractive:"non-interactive",isCircle:"is-circle",selected:"selected"},j6e={image:"image"},eb={close:"x",checkedSingle:"circle-f",uncheckedMultiple:"square",checkedMultiple:"check-square-f"},G6e=`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline-flex;cursor:default;border-radius:var(--calcite-chip-corner-radius, 9999px)}:host([closed]){display:none}:host([appearance=outline]) .container,:host([appearance=outline-fill]) .container{--calcite-internal-chip-close-icon-color:var(--calcite-color-text-3);color:var(--calcite-chip-text-color, var(--calcite-color-text-1))}:host([appearance=outline]):host([kind=brand]) .container,:host([appearance=outline-fill]):host([kind=brand]) .container{border-color:var(--calcite-chip-border-color, var(--calcite-color-brand))}:host([appearance=outline]):host([kind=inverse]) .container,:host([appearance=outline-fill]):host([kind=inverse]) .container{border-color:var(--calcite-chip-border-color, var(--calcite-color-border-inverse))}:host([appearance=outline]):host([kind=neutral]) .container,:host([appearance=outline-fill]):host([kind=neutral]) .container{border-color:var(--calcite-chip-border-color, var(--calcite-color-border-1))}:host([appearance=outline]) .container{background-color:transparent}:host([appearance=outline-fill]) .container{background-color:var(--calcite-chip-background-color, var(--calcite-color-foreground-1))}:host([appearance=solid]) .container{border-color:transparent}:host([appearance=solid]):host([kind=brand]) .container,:host([appearance=solid]):host([kind=inverse]) .container{color:var(--calcite-chip-text-color, var(--calcite-color-text-inverse))}:host([appearance=solid]):host([kind=brand]) .close,:host([appearance=solid]):host([kind=inverse]) .close{outline-color:var(--calcite-color-text-inverse)}:host([appearance=solid]):host([kind=brand]) .container{background-color:var(--calcite-chip-background-color, var(--calcite-color-brand))}:host([appearance=solid]):host([kind=inverse]) .container{background-color:var(--calcite-chip-background-color, var(--calcite-color-inverse))}:host([appearance=solid]):host([kind=neutral]) .container{background-color:var(--calcite-chip-background-color, var(--calcite-color-foreground-2))}:host([kind=neutral]) .container{--calcite-internal-chip-close-icon-color:var(--calcite-color-text-3);color:var(--calcite-chip-text-color, var(--calcite-color-text-1))}:host([selected]) .select-icon{opacity:1}:host([scale=s]) .container{--calcite-internal-chip-block-size:1.5rem ;--calcite-internal-chip-container-space-x-end:0.25rem ;--calcite-internal-chip-container-space-x-start:0.25rem ;--calcite-internal-chip-font-size:var(--calcite-font-size--2);--calcite-internal-chip-icon-size:1rem ;--calcite-internal-chip-icon-space:0.25rem ;--calcite-internal-chip-image-size:1.25rem ;--calcite-internal-chip-title-space:0.25rem ;--calcite-internal-close-size:1rem }:host([scale=s]) .container:not(.closable).is-circle{--calcite-internal-chip-container-space-x-start:var(--calcite-spacing-px);--calcite-internal-chip-container-space-x-end:var(--calcite-spacing-px)}:host([scale=s]) .container.image--slotted:has(.chip-icon),:host([scale=s]) .container.image--slotted.text--slotted,:host([scale=s]) .container.image--slotted.closable{--calcite-internal-chip-image-space-x-end:0.25rem }:host([scale=s]) .container.image--slotted:not(.text--slotted,:has(.chip-icon)),:host([scale=s]) .container.image--slotted:not(.selectable){--calcite-internal-chip-container-space-x-start:var(--calcite-spacing-px)}:host([scale=s]) .container.selectable.single:not(.is-circle).image--slotted{--calcite-internal-chip-container-space-x-start:var(--calcite-spacing-px)}:host([scale=s]) .container.selectable.single:not(.is-circle).selected{--calcite-internal-chip-select-space-x-end:0.375rem ;--calcite-internal-chip-select-space-x-start:0}:host([scale=s]) .container.selectable.single:not(.is-circle).selected.image--slotted{--calcite-internal-chip-select-space-x-end:0.5rem ;--calcite-internal-chip-select-space-x-start:0.125rem }:host([scale=s]) .container.multiple:not(.is-circle){--calcite-internal-chip-container-space-x-start:0.25rem ;--calcite-internal-chip-select-space-x-end:0.25rem ;--calcite-internal-chip-select-space-x-start:0.25rem }:host([scale=s]) .container.multiple:not(.is-circle).image--slotted{--calcite-internal-chip-select-space-x-end:0.5rem ;--calcite-internal-chip-select-space-x-start:0.375rem ;--calcite-internal-chip-container-space-x-start:var(--calcite-spacing-px)}:host([scale=s]) .container.multiple:not(.is-circle).image--slotted:not(.text--slotted){--calcite-internal-chip-select-space-x-start:0.375rem }:host([scale=m]) .container{--calcite-internal-chip-block-size:2rem ;--calcite-internal-chip-container-space-x-end:0.375rem ;--calcite-internal-chip-container-space-x-start:0.375rem ;--calcite-internal-chip-font-size:var(--calcite-font-size--1);--calcite-internal-chip-icon-size:1.5rem ;--calcite-internal-chip-icon-space:0.375rem ;--calcite-internal-chip-image-size:1.5rem ;--calcite-internal-chip-title-space:0.375rem ;--calcite-internal-close-size:1.5rem }:host([scale=m]) .container:not(.closable).is-circle{--calcite-internal-chip-container-space-x-end:var(--calcite-spacing-px);--calcite-internal-chip-container-space-x-start:var(--calcite-spacing-px)}:host([scale=m]) .container.image--slotted:not(.is-circle){--calcite-internal-chip-container-space-x-start:0.25rem }:host([scale=m]) .container.image--slotted:has(.chip-icon),:host([scale=m]) .container.image--slotted.text--slotted,:host([scale=m]) .container.image--slotted.closable{--calcite-internal-chip-image-space-x-end:0.375rem }:host([scale=m]) .container.selectable.single:not(.is-circle).image--slotted{--calcite-internal-chip-container-space-x-start:0.25rem }:host([scale=m]) .container.selectable.single:not(.is-circle).selected{--calcite-internal-chip-select-space-x-end:var(--calcite-spacing-px);--calcite-internal-chip-select-space-x-start:0}:host([scale=m]) .container.selectable.single:not(.is-circle).selected.image--slotted{--calcite-internal-chip-select-space-x-end:0.25rem ;--calcite-internal-chip-select-space-x-start:0.375rem }:host([scale=m]) .container.multiple:not(.is-circle){--calcite-internal-chip-select-space-x-end:0.125rem ;--calcite-internal-chip-select-space-x-start:0.125rem }:host([scale=m]) .container.multiple:not(.is-circle).image--slotted{--calcite-internal-chip-select-space-x-end:0.5rem ;--calcite-internal-chip-select-space-x-start:0.25rem }:host([scale=m]) .container.closable:not(.is-circle){--calcite-internal-chip-container-space-x-end:0.25rem }:host([scale=l]) .container{--calcite-internal-chip-block-size:2.75rem ;--calcite-internal-chip-container-space-x-end:0.5rem ;--calcite-internal-chip-container-space-x-start:0.5rem ;--calcite-internal-chip-font-size:var(--calcite-font-size-0);--calcite-internal-chip-icon-size:2rem ;--calcite-internal-chip-icon-space:0.5rem ;--calcite-internal-chip-image-size:2rem ;--calcite-internal-chip-title-space:0.5rem ;--calcite-internal-close-size:2rem }:host([scale=l]) .container:not(.closable).is-circle{--calcite-internal-chip-container-space-x-end:0.25rem ;--calcite-internal-chip-container-space-x-start:0.25rem }:host([scale=l]) .container.image--slotted:not(.is-circle){--calcite-internal-chip-container-space-x-start:0.375rem }:host([scale=l]) .container.image--slotted:has(.chip-icon),:host([scale=l]) .container.image--slotted.text--slotted,:host([scale=l]) .container.image--slotted.closable{--calcite-internal-chip-image-space-x-end:0.5rem }:host([scale=l]) .container.selectable.single:not(.is-circle).image--slotted{--calcite-internal-chip-container-space-x-start:0.375rem }:host([scale=l]) .container.selectable.single:not(.is-circle).selected{--calcite-internal-chip-select-space-x-end:0.25rem ;--calcite-internal-chip-select-space-x-start:0}:host([scale=l]) .container.selectable.single:not(.is-circle).selected.image--slotted{--calcite-internal-chip-select-space-x-end:0.375rem ;--calcite-internal-chip-select-space-x-start:0.5rem }:host([scale=l]) .container.multiple:not(.is-circle){--calcite-internal-chip-container-space-x-start:0.5rem ;--calcite-internal-chip-select-space-x-end:0.25rem ;--calcite-internal-chip-select-space-x-start:0.25rem }:host([scale=l]) .container.multiple:not(.is-circle).image--slotted{--calcite-internal-chip-select-space-x-end:0.75rem }:host([scale=l]) .container.closable:not(.is-circle){--calcite-internal-chip-container-space-x-end:0.375rem }.container{box-sizing:border-box;display:inline-flex;block-size:100%;max-inline-size:100%;align-items:center;justify-content:center;font-weight:var(--calcite-font-weight-medium);outline-color:transparent;border-radius:var(--calcite-chip-corner-radius, 9999px);border-width:var(--calcite-border-width-sm);border-style:solid;font-size:var(--calcite-internal-chip-font-size, var(--calcite-font-size));padding-inline-start:var(--calcite-internal-chip-container-space-x-start);padding-inline-end:var(--calcite-internal-chip-container-space-x-end);block-size:var(--calcite-internal-chip-block-size, auto);inline-size:var(--calcite-internal-chip-inline-size, auto);min-inline-size:var(--calcite-internal-chip-block-size, auto)}.container:hover .select-icon--active{opacity:1}.container.selectable{cursor:pointer}.container:not(.non-interactive):focus{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}.container.text--slotted .title{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.container:not(.text--slotted) .title,.container:not(.image--slotted) .image-container{display:none}.container.is-circle .chip-icon,.container.is-circle .image-container{padding:0}.title{padding-inline:var(--calcite-internal-chip-title-space)}.image-container{display:inline-flex;overflow:hidden;align-items:center;justify-content:center;pointer-events:none;block-size:var(--calcite-internal-chip-image-size, 1.5rem);inline-size:var(--calcite-internal-chip-image-size, 1.5rem);padding-inline-start:0;padding-inline-end:var(--calcite-internal-chip-image-space-x-end, 0)}.chip-icon{position:relative;margin-block:0px;display:inline-flex;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);color:var(--calcite-chip-icon-color, var(--calcite-chip-text-color, var(--calcite-icon-color, currentColor)));padding-inline:var(--calcite-internal-chip-icon-space, 0.375rem)}.select-icon{align-self:center;justify-content:center;align-items:center;display:flex;inset-block-start:-1px;position:absolute;visibility:hidden;inline-size:auto;opacity:0;transition:opacity 0.15s ease-in-out, inline-size 0.15s ease-in-out;color:var(--calcite-chip-select-icon-color, currentColor)}.select-icon.select-icon--active{position:relative;visibility:visible;opacity:0.5;color:var(--calcite-chip-select-icon-color-pressed, var(--calcite-chip-select-icon-color, currentColor))}.multiple .select-icon{display:flex;align-items:center;justify-content:center}.multiple .select-icon,.single .select-icon--active{padding-inline-start:var(--calcite-internal-chip-select-space-x-start);padding-inline-end:var(--calcite-internal-chip-select-space-x-end);block-size:var(--calcite-internal-chip-icon-size, 1.5rem);inline-size:var(--calcite-internal-chip-icon-size, 1.5rem)}slot[name=image]::slotted(*){display:flex;block-size:100%;inline-size:100%;overflow:hidden;border-radius:50%}.close{margin:0px;cursor:pointer;align-items:center;border-radius:50%;border-style:none;outline-color:transparent;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;background-color:var(--calcite-close-background-color, var(--calcite-color-transparent));-webkit-appearance:none;display:flex;align-content:center;justify-content:center;color:var(--calcite-chip-close-icon-color, var(--calcite-close-icon-color, var(--calcite-internal-chip-close-icon-color, var(--calcite-color-text-1))));block-size:var(--calcite-internal-close-size, 1.5rem);inline-size:var(--calcite-internal-close-size, 1.5rem);padding:0}.close:hover,.close:focus{background-color:var(--calcite-close-background-color-hover, var(--calcite-color-transparent-hover))}.close:focus{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}.close:active{background-color:var(--calcite-close-background-color-press, var(--calcite-color-transparent-press))}.close calcite-icon{color:inherit}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([hidden]){display:none}[hidden]{display:none}`,U6e=G6e,B6e=ci(class extends li{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteChipClose=qe(this,"calciteChipClose",6),this.calciteChipSelect=qe(this,"calciteChipSelect",6),this.calciteInternalChipKeyEvent=qe(this,"calciteInternalChipKeyEvent",6),this.calciteInternalChipSelect=qe(this,"calciteInternalChipSelect",6),this.calciteInternalSyncSelectedChips=qe(this,"calciteInternalSyncSelectedChips",6),this.handleDefaultSlotChange=()=>{this.updateHasText()},this.close=()=>{this.calciteChipClose.emit(),this.selected=!1,this.closed=!0},this.closeButtonKeyDownHandler=e=>{d_(e.key)&&(e.preventDefault(),this.close())},this.handleSlotImageChange=e=>{this.hasImage=xi(e)},this.handleEmittingEvent=()=>{this.interactive&&this.calciteChipSelect.emit()},this.disabled=!1,this.appearance="solid",this.kind="neutral",this.closable=!1,this.icon=void 0,this.iconFlipRtl=!1,this.scale="m",this.label=void 0,this.value=void 0,this.closed=!1,this.selectionMode="none",this.selected=!1,this.messageOverrides=void 0,this.messages=void 0,this.interactive=!1,this.parentChipGroup=void 0,this.defaultMessages=void 0,this.effectiveLocale=void 0,this.hasText=!1,this.hasImage=!1}watchSelected(e){this.selectionMode!=="none"&&this.handleSelectionPropertyChange(e)}onMessagesChange(){}effectiveLocaleChange(){xo(this,this.effectiveLocale)}connectedCallback(){Ds(this),So(this)}componentDidLoad(){bo(this),this.selectionMode!=="none"&&this.interactive&&this.selected&&this.handleSelectionPropertyChange(this.selected)}componentDidRender(){Al(this)}disconnectedCallback(){zs(this),To(this)}async componentWillLoad(){vo(this),ya()&&(await _o(this),this.updateHasText())}keyDownHandler(e){if(e.target===this.el)switch(e.key){case" ":case"Enter":this.handleEmittingEvent(),e.preventDefault();break;case"ArrowRight":case"ArrowLeft":case"Home":case"End":this.calciteInternalChipKeyEvent.emit(e),e.preventDefault();break}}clickHandler(){!this.interactive&&this.closable&&this.closeButtonEl.focus()}async setFocus(){var e,i;await wo(this),!this.disabled&&this.interactive?(e=this.containerEl)==null||e.focus():!this.disabled&&this.closable&&((i=this.closeButtonEl)==null||i.focus())}updateHasText(){this.hasText=this.el.textContent.trim().length>0}handleSelectionPropertyChange(e){this.selectionMode==="single"&&this.calciteInternalSyncSelectedChips.emit(),!this.parentChipGroup.selectedItems.includes(this.el)&&e&&this.selectionMode!=="multiple"&&this.calciteInternalChipSelect.emit(),this.selectionMode!=="single"&&this.calciteInternalSyncSelectedChips.emit()}renderChipImage(){return X("div",{class:qn.imageContainer},X("slot",{name:j6e.image,onSlotchange:this.handleSlotImageChange}))}renderSelectionIcon(){const e=this.selectionMode==="multiple"?this.selected?eb.checkedMultiple:eb.uncheckedMultiple:this.selected?eb.checkedSingle:void 0;return X("div",{class:{[qn.selectIcon]:!0,[qn.selectIconActive]:this.selectionMode==="multiple"||this.selected}},e?X("calcite-icon",{icon:e,scale:Ji(this.scale)}):null)}renderCloseButton(){return X("button",{"aria-label":this.messages.dismissLabel,class:qn.close,onClick:this.close,onKeyDown:this.closeButtonKeyDownHandler,ref:e=>this.closeButtonEl=e,tabIndex:this.disabled?-1:0},X("calcite-icon",{icon:eb.close,scale:Ji(this.scale)}))}renderIcon(){return X("calcite-icon",{class:qn.chipIcon,flipRtl:this.iconFlipRtl,icon:this.icon,scale:Ji(this.scale)})}render(){const{disabled:e}=this,i=e||!e&&!this.interactive,n=this.selectionMode==="multiple"&&this.interactive?"checkbox":this.selectionMode!=="none"&&this.interactive?"radio":this.interactive?"button":void 0;return X(dn,{key:"7feca8bad37627baabfc4abd25cf135e1e9f196b"},X(Ol,{key:"af2360b4b768ae8c643d52f4bdb9f5d282504114",disabled:e},X("div",{key:"8d905c4ab20d271a211282b95ebcb2d305d76cb7","aria-checked":this.selectionMode!=="none"&&this.interactive?cn(this.selected):void 0,"aria-label":this.label,class:{[qn.container]:!0,[qn.textSlotted]:this.hasText,[qn.imageSlotted]:this.hasImage,[qn.selectable]:this.selectionMode!=="none",[qn.multiple]:this.selectionMode==="multiple",[qn.single]:this.selectionMode==="single"||this.selectionMode==="single-persist",[qn.selected]:this.selected,[qn.closable]:this.closable,[qn.nonInteractive]:!this.interactive,[qn.isCircle]:!this.closable&&!this.hasText&&(!this.icon||!this.hasImage)&&(this.selectionMode==="none"||!!this.selectionMode&&this.selectionMode!=="multiple"&&!this.selected)},onClick:this.handleEmittingEvent,ref:s=>this.containerEl=s,role:n,tabIndex:i?-1:0},this.selectionMode!=="none"&&this.renderSelectionIcon(),this.renderChipImage(),this.icon&&this.renderIcon(),X("span",{key:"dab6eae3f8330b85ffac4c7fe1b2fcbb53327196",class:qn.title},X("slot",{key:"72ba5bd0c7a97c30f766da119f419261aab24acb",onSlotchange:this.handleDefaultSlotChange})),this.closable&&this.renderCloseButton())))}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{selected:["watchSelected"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return U6e}},[1,"calcite-chip",{disabled:[516],appearance:[513],kind:[513],closable:[516],icon:[513],iconFlipRtl:[516,"icon-flip-rtl"],scale:[513],label:[1],value:[8],closed:[1540],selectionMode:[1,"selection-mode"],selected:[1540],messageOverrides:[1040],messages:[1040],interactive:[4],parentChipGroup:[16],defaultMessages:[32],effectiveLocale:[32],hasText:[32],hasImage:[32],setFocus:[64]},[[0,"keydown","keyDownHandler"],[0,"click","clickHandler"]],{selected:["watchSelected"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function Vq(){if(typeof customElements>"u")return;["calcite-chip","calcite-icon"].forEach(e=>{switch(e){case"calcite-chip":customElements.get(e)||customElements.define(e,B6e);break;case"calcite-icon":customElements.get(e)||Or();break}})}Vq();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const Ax={slow:14e3,medium:1e4,fast:6e3},tb={actionsEnd:"actions-end",title:"title",message:"message",link:"link"},Hs={actionsEnd:"actions-end",close:"close",container:"container",containerBottom:"container--bottom",containerBottomEnd:"container--bottom-end",containerBottomStart:"container--bottom-start",containerActive:"container--active",containerTop:"container--top",containerTopEnd:"container--top-end",containerTopStart:"container--top-start",content:"content",contentContainer:"content-container",dismissProgress:"dismiss-progress",footer:"footer",icon:"icon",containerEmbedded:"container--embedded",queueCount:"queue-count",queueCountActive:"queue-count--active",textContainer:"text-container",focused:"focused"},H6e=300;class V6e{constructor(){this.registeredElements=[],this.queueTimeoutId=null}registerElement(e){const{registeredElements:i}=this;if(!i.includes(e)){switch(e.queue){case"immediate":i.unshift(e);break;case"next":i.splice(1,0,e);break;case"last":i.push(e);break}this.updateAlerts()}}unregisterElement(e){const{registeredElements:i}=this,n=i.indexOf(e);n!==-1&&i.splice(n,1),e.active=!1,this.updateAlerts()}updateAlerts(){window.clearTimeout(this.queueTimeoutId),this.queueTimeoutId=null,this.registeredElements.forEach((e,i)=>{e.openAlertCount=this.registeredElements.length,i===0?this.queueTimeoutId=window.setTimeout(()=>e.active=!0,H6e):e.active=!1})}}const q6e=`:host{--calcite-internal-alert-edge-distance:2rem;display:block;inline-size:var(--calcite-alert-width)}.container{pointer-events:none;position:fixed;z-index:var(--calcite-z-index-toast);margin-inline:auto;margin-block:0px;box-sizing:border-box;display:flex;inline-size:100%;min-inline-size:min-content;align-items:center;justify-content:center;text-align:start;opacity:0;--tw-shadow:0 6px 20px -4px rgba(0, 0, 0, 0.1), 0 4px 12px -2px rgba(0, 0, 0, 0.08);--tw-shadow-colored:0 6px 20px -4px var(--tw-shadow-color), 0 4px 12px -2px var(--tw-shadow-color);box-shadow:var(--calcite-alert-shadow, var(--tw-ring-offset-shadow, 0 0 rgba(0, 0, 0, 0)), var(--tw-ring-shadow, 0 0 rgba(0, 0, 0, 0)), var(--tw-shadow));background-color:var(--calcite-alert-background-color, var(--calcite-color-foreground-1));border-radius:var(--calcite-alert-corner-radius, var(--calcite-border-radius));border-block-start:0 solid transparent;border-inline:1px solid var(--calcite-color-border-3);border-block-end:1px solid var(--calcite-color-border-3);max-inline-size:calc(100% - var(--calcite-internal-alert-edge-distance) * 2);transition:opacity var(--calcite-internal-animation-timing-slow) cubic-bezier(0.215, 0.44, 0.42, 0.88), all var(--calcite-animation-timing) ease-in-out}.container--bottom,.container--top{inset-inline-end:0;inset-inline-start:0}.container[class*=bottom]{transform:translate3d(0, var(--calcite-internal-alert-edge-distance), 0);inset-block-end:var(--calcite-internal-alert-edge-distance)}.container[class*=top]{transform:translate3d(0, calc(-1 * var(--calcite-internal-alert-edge-distance)), 0);inset-block-start:var(--calcite-internal-alert-edge-distance)}.container[class*=start]{inset-inline-start:var(--calcite-internal-alert-edge-distance);inset-inline-end:auto}.container[class*=end]{inset-inline-end:var(--calcite-internal-alert-edge-distance);inset-inline-start:auto}.icon{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:0px;margin-block:auto;margin-inline-end:auto}.close{display:flex;cursor:pointer;align-items:center;justify-content:flex-end;align-self:stretch;border-style:none;background-color:transparent;color:var(--calcite-color-text-3);outline:2px solid transparent;outline-offset:2px;-webkit-appearance:none;border-start-end-radius:var(--calcite-alert-corner-radius, var(--calcite-border-radius));border-end-end-radius:var(--calcite-alert-corner-radius, var(--calcite-border-radius));outline-color:transparent}.close:focus{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}.close:hover,.close:focus{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-2)}.close:active{background-color:var(--calcite-color-foreground-3)}.queue-count{visibility:hidden;display:flex;min-inline-size:min-content;cursor:default;align-items:center;justify-content:space-around;align-self:stretch;overflow:hidden;text-align:center;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-2);opacity:0;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;border-inline:0 solid transparent;border-start-end-radius:0}.queue-count--active{visibility:visible;opacity:1}.dismiss-progress{position:absolute;display:block;inline-size:100%;overflow:hidden;inset-inline:0;inset-block-start:-2px;block-size:2px;border-radius:var(--calcite-border-radius) var(--calcite-border-radius) 0 0}.dismiss-progress::after{position:absolute;inset-block-start:0px;display:block;block-size:2px;content:"";background-color:var(--calcite-color-transparent-tint);inset-inline-end:0}.actions-end{display:flex;align-self:stretch}.text-container{box-sizing:border-box;display:flex;min-inline-size:0px;flex:1 1 auto;flex-direction:column;overflow-wrap:break-word}.footer{position:relative;display:flex;inline-size:auto;justify-content:flex-end;align-self:stretch;padding-block-start:1px;block-size:inherit}:host([scale=s]) slot[name=title]::slotted(*),:host([scale=s]) *::slotted([slot=title]){font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=s]) slot[name=message]::slotted(*),:host([scale=s]) *::slotted([slot=message]){font-size:var(--calcite-font-size--2);line-height:1.375}:host([scale=s]) slot[name=link]::slotted(*),:host([scale=s]) *::slotted([slot=link]){font-size:var(--calcite-font-size--2);line-height:1.375}:host([scale=s]) .queue-count{margin-inline:0.5rem}:host([scale=s]) .container{--calcite-internal-alert-min-height:3.5rem;inline-size:var(--calcite-alert-width, 40em)}:host([scale=s]) .close{padding:0.75rem}:host([scale=s]) .icon{padding-inline-start:0.75rem}:host([scale=s]) .text-container{padding-block:0.5rem;padding-inline:0.75rem 0.5rem}:host([scale=m]) slot[name=title]::slotted(*),:host([scale=m]) *::slotted([slot=title]){font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=m]) slot[name=message]::slotted(*),:host([scale=m]) *::slotted([slot=message]){font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=m]) slot[name=link]::slotted(*),:host([scale=m]) *::slotted([slot=link]){font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=m]) .queue-count{margin-inline:0.75rem}:host([scale=m]) .container{--calcite-internal-alert-min-height:4.1875rem;inline-size:var(--calcite-alert-width, 50em)}:host([scale=m]) .close{padding:1rem}:host([scale=m]) .icon{padding-inline-start:1rem}:host([scale=m]) .text-container{padding-block:0.75rem;padding-inline:1rem 0.75rem}:host([scale=l]) slot[name=title]::slotted(*),:host([scale=l]) *::slotted([slot=title]){margin-block-end:0.25rem;font-size:var(--calcite-font-size-1);line-height:1.375}:host([scale=l]) slot[name=message]::slotted(*),:host([scale=l]) *::slotted([slot=message]){font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=l]) slot[name=link]::slotted(*),:host([scale=l]) *::slotted([slot=link]){font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=l]) .queue-count{margin-inline:1rem}:host([scale=l]) .container{--calcite-internal-alert-min-height:5.625rem;inline-size:var(--calcite-alert-width, 60em)}:host([scale=l]) .close{padding:1.25rem}:host([scale=l]) .icon{padding-inline-start:1.25rem}:host([scale=l]) .text-container{padding-block:1rem;padding-inline:1.25rem 1rem}:host([open]) .container--active{border-block-start-width:2px;opacity:1;pointer-events:initial}:host([open]) .container--active[class*=bottom]{transform:translate3d(0, calc(-1 * var(--calcite-internal-alert-edge-distance)), inherit)}:host([open]) .container--active[class*=top]{transform:translate3d(0, var(--calcite-internal-alert-edge-distance), inherit)}:host([auto-close])>.queue-count{border-inline-end:0 solid transparent}slot[name=title]::slotted(*),*::slotted([slot=title]){font-size:var(--calcite-font-size-0);line-height:1.375;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1)}slot[name=message]::slotted(*),*::slotted([slot=message]){margin:0px;display:inline;font-size:var(--calcite-font-size--1);line-height:1.375;font-weight:var(--calcite-font-weight-normal);margin-inline-end:0.5rem;color:var(--calcite-color-text-2)}slot[name=link]::slotted(*),*::slotted([slot=link]){display:inline-flex;color:var(--calcite-color-text-link)}:host([kind=brand]) .container{border-block-start-color:var(--calcite-color-brand)}:host([kind=brand]) .container .icon{color:var(--calcite-color-brand)}:host([kind=info]) .container{border-block-start-color:var(--calcite-color-status-info)}:host([kind=info]) .container .icon{color:var(--calcite-color-status-info)}:host([kind=danger]) .container{border-block-start-color:var(--calcite-color-status-danger)}:host([kind=danger]) .container .icon{color:var(--calcite-color-status-danger)}:host([kind=success]) .container{border-block-start-color:var(--calcite-color-status-success)}:host([kind=success]) .container .icon{color:var(--calcite-color-status-success)}:host([kind=warning]) .container{border-block-start-color:var(--calcite-color-status-warning)}:host([kind=warning]) .container .icon{color:var(--calcite-color-status-warning)}:host([auto-close-duration=fast]) .dismiss-progress:after{animation:dismissProgress 6000ms ease-out}:host(:hover[auto-close-duration=fast]) .dismiss-progress:after,:host(:focus[auto-close-duration=fast]) .dismiss-progress:after{animation-play-state:paused}:host([auto-close-duration=medium]) .dismiss-progress:after{animation:dismissProgress 10000ms ease-out}:host(:hover[auto-close-duration=medium]) .dismiss-progress:after,:host(:focus[auto-close-duration=medium]) .dismiss-progress:after{animation-play-state:paused}:host([auto-close-duration=slow]) .dismiss-progress:after{animation:dismissProgress 14000ms ease-out}:host(:hover[auto-close-duration=slow]) .dismiss-progress:after,:host(:focus[auto-close-duration=slow]) .dismiss-progress:after{animation-play-state:paused}.container.focused .dismiss-progress::after{animation-play-state:paused}@keyframes dismissProgress{0%{inline-size:0px;opacity:0.75}100%{inline-size:100%;opacity:1}}.container--embedded{position:absolute}:host([hidden]){display:none}[hidden]{display:none}:host([calcite-hydrated-hidden]){visibility:hidden !important;pointer-events:none}`,W6e=q6e,Gp=new V6e,K6e=ci(class extends li{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteAlertBeforeClose=qe(this,"calciteAlertBeforeClose",6),this.calciteAlertClose=qe(this,"calciteAlertClose",6),this.calciteAlertBeforeOpen=qe(this,"calciteAlertBeforeOpen",6),this.calciteAlertOpen=qe(this,"calciteAlertOpen",6),this.handleKeyBoardFocus=()=>{this.isFocused=!0,this.handleFocus()},this.handleKeyBoardBlur=()=>{this.isFocused=!1,this.isHovered||this.handleBlur()},this.autoCloseTimeoutId=null,this.totalOpenTime=0,this.totalHoverTime=0,this.openTransitionProp="opacity",this.setTransitionEl=e=>{this.transitionEl=e},this.closeAlert=()=>{this.open=!1,this.clearAutoCloseTimeout()},this.actionsEndSlotChangeHandler=e=>{this.hasEndActions=xi(e)},this.handleMouseOver=()=>{this.isHovered=!0,this.handleFocus()},this.handleMouseLeave=()=>{this.isHovered=!1,this.isFocused||this.handleBlur()},this.handleFocus=()=>{this.clearAutoCloseTimeout(),this.totalOpenTime=Date.now()-this.initialOpenTime,this.lastMouseOverBegin=Date.now()},this.handleBlur=()=>{const e=Date.now()-this.lastMouseOverBegin,i=Ax[this.autoCloseDuration]-this.totalOpenTime+this.totalHoverTime;this.totalHoverTime=this.totalHoverTime?e+this.totalHoverTime:e,this.autoCloseTimeoutId=window.setTimeout(()=>this.closeAlert(),i)},this.active=!1,this.openAlertCount=0,this.open=!1,this.autoClose=!1,this.autoCloseDuration="medium",this.embedded=!1,this.kind="brand",this.icon=void 0,this.iconFlipRtl=!1,this.label=void 0,this.numberingSystem=void 0,this.placement="bottom",this.scale="m",this.messages=void 0,this.messageOverrides=void 0,this.queue="last",this.defaultMessages=void 0,this.effectiveLocale="",this.numberStringFormatter=new jB,this.hasEndActions=!1,this.isFocused=!1}handleActiveChange(){this.clearAutoCloseTimeout(),this.active&&this.autoClose&&!this.autoCloseTimeoutId&&(this.initialOpenTime=Date.now(),this.autoCloseTimeoutId=window.setTimeout(()=>this.closeAlert(),Ax[this.autoCloseDuration]))}openHandler(){kc(this),this.open?Gp.registerElement(this.el):Gp.unregisterElement(this.el)}updateDuration(){this.autoClose&&this.autoCloseTimeoutId&&(this.clearAutoCloseTimeout(),this.autoCloseTimeoutId=window.setTimeout(()=>this.closeAlert(),Ax[this.autoCloseDuration]))}onMessagesChange(){}handleQueueChange(){this.open&&(Gp.unregisterElement(this.el),Gp.registerElement(this.el))}connectedCallback(){Ds(this),So(this),this.open&&Gp.registerElement(this.el),this.numberStringFormatter.numberFormatOptions={locale:this.effectiveLocale,numberingSystem:this.numberingSystem,signDisplay:"always"}}async componentWillLoad(){vo(this),await _o(this),this.open&&kc(this)}componentDidLoad(){bo(this)}disconnectedCallback(){Gp.unregisterElement(this.el),this.clearAutoCloseTimeout(),zs(this),To(this),this.embedded=!1}render(){const{open:e,autoClose:i,label:n,placement:s,active:h,openAlertCount:f}=this,m=i?"alert":"alertdialog",y=!e,x=Rm(F6e,this.icon,this.kind),E=f>1;return X(dn,{key:"cecedeaa678e4f6e22fd2aabc4d29bc8589430f6","aria-hidden":cn(y),"aria-label":n,"calcite-hydrated-hidden":y,role:m},X("div",{key:"ca85d5f5ec313f3a305e01dcc8cbbad9647dd516",class:{[Hs.container]:!0,[Hs.containerActive]:h,[`${Hs.container}--${s}`]:!0,[Hs.containerEmbedded]:this.embedded,[Hs.focused]:this.isFocused},onPointerEnter:this.autoClose&&this.autoCloseTimeoutId?this.handleMouseOver:null,onPointerLeave:this.autoClose?this.handleMouseLeave:null,ref:this.setTransitionEl},x&&this.renderIcon(x),X("div",{key:"1f72f255c3e0630eed63bb62d3d50f4a2ba6a528",class:Hs.textContainer,onFocusin:this.autoClose&&this.autoCloseTimeoutId?this.handleKeyBoardFocus:null,onFocusout:this.autoClose?this.handleKeyBoardBlur:null},X("slot",{key:"aade607960adea0a10f5eac85b119444085c9cf9",name:tb.title}),X("slot",{key:"1f47158cfbf8c0626cd49246142fb750311b1d4a",name:tb.message}),X("slot",{key:"5ba06e024b517f23168311828cc8ce41c21926a6",name:tb.link})),this.renderActionsEnd(),E?this.renderQueueCount():null,this.renderCloseButton(),e&&h&&i?X("div",{class:Hs.dismissProgress}):null))}renderCloseButton(){return X("button",{"aria-label":this.messages.close,class:Hs.close,key:"close",onClick:this.closeAlert,onFocusin:this.autoClose?this.handleKeyBoardFocus:null,onFocusout:this.autoClose?this.handleKeyBoardBlur:null,ref:e=>this.closeButton=e,type:"button"},X("calcite-icon",{icon:"x",scale:Ji(this.scale)}))}renderQueueCount(){const{openAlertCount:e}=this,i=e>2?e-1:1,n=this.numberStringFormatter.numberFormatter.format(i);return X("div",{class:{[Hs.queueCount]:!0,[Hs.queueCountActive]:e>1},key:"queue-count"},X("calcite-chip",{scale:this.scale,value:n},n))}renderActionsEnd(){return X("div",{class:Hs.actionsEnd},X("slot",{name:tb.actionsEnd,onSlotchange:this.actionsEndSlotChangeHandler}))}renderIcon(e){return X("div",{class:Hs.icon},X("calcite-icon",{flipRtl:this.iconFlipRtl,icon:e,scale:Ji(this.scale)}))}async setFocus(){await wo(this);const e=xB(this.el,{selector:"calcite-link"});if(!(!this.closeButton&&!e)){if(e)return e.setFocus();this.closeButton&&this.closeButton.focus()}}effectiveLocaleChange(){xo(this,this.effectiveLocale),this.numberStringFormatter.numberFormatOptions={locale:this.effectiveLocale,numberingSystem:this.numberingSystem,signDisplay:"always"}}numberingSystemChange(){this.numberStringFormatter.numberFormatOptions={locale:this.effectiveLocale,numberingSystem:this.numberingSystem,signDisplay:"always"}}clearAutoCloseTimeout(){window.clearTimeout(this.autoCloseTimeoutId),this.autoCloseTimeoutId=null}onBeforeOpen(){this.calciteAlertBeforeOpen.emit()}onOpen(){this.calciteAlertOpen.emit()}onBeforeClose(){this.calciteAlertBeforeClose.emit()}onClose(){this.calciteAlertClose.emit()}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{active:["handleActiveChange"],open:["openHandler"],autoCloseDuration:["updateDuration"],messageOverrides:["onMessagesChange"],queue:["handleQueueChange"],effectiveLocale:["effectiveLocaleChange"],numberingSystem:["numberingSystemChange"]}}static get style(){return W6e}},[1,"calcite-alert",{active:[4],openAlertCount:[2,"open-alert-count"],open:[1540],autoClose:[516,"auto-close"],autoCloseDuration:[513,"auto-close-duration"],embedded:[1028],kind:[513],icon:[520],iconFlipRtl:[516,"icon-flip-rtl"],label:[1],numberingSystem:[513,"numbering-system"],placement:[513],scale:[513],messages:[1040],messageOverrides:[1040],queue:[513],defaultMessages:[32],effectiveLocale:[32],numberStringFormatter:[32],hasEndActions:[32],isFocused:[32],setFocus:[64]},void 0,{active:["handleActiveChange"],open:["openHandler"],autoCloseDuration:["updateDuration"],messageOverrides:["onMessagesChange"],queue:["handleQueueChange"],effectiveLocale:["effectiveLocaleChange"],numberingSystem:["numberingSystemChange"]}]);function Z6e(){if(typeof customElements>"u")return;["calcite-alert","calcite-chip","calcite-icon"].forEach(e=>{switch(e){case"calcite-alert":customElements.get(e)||customElements.define(e,K6e);break;case"calcite-chip":customElements.get(e)||Vq();break;case"calcite-icon":customElements.get(e)||Or();break}})}Z6e();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const $a={main:"main",content:"content",contentBehind:"content--behind",contentBottom:"content-bottom",contentNonInteractive:"content--non-interactive",footer:"footer",positionedSlotWrapper:"positioned-slot-wrapper",container:"container",contentBehindCenterContent:"center-content"},Lo={centerRow:"center-row",panelStart:"panel-start",panelEnd:"panel-end",panelTop:"panel-top",panelBottom:"panel-bottom",header:"header",footer:"footer",alerts:"alerts",sheets:"sheets",modals:"modals",dialogs:"dialogs"},J6e=":host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host{position:absolute;inset:0px;display:flex;block-size:100%;inline-size:100%;flex-direction:column;overflow:hidden;--calcite-shell-tip-spacing:26vw}.main{position:relative;display:flex;block-size:100%;inline-size:100%;flex:1 1 auto;flex-direction:row;justify-content:space-between;overflow:hidden}.content{display:flex;block-size:100%;inline-size:100%;flex-direction:column;flex-wrap:nowrap;overflow:auto;justify-content:space-between}.content ::slotted(calcite-shell-center-row),.content ::slotted(calcite-panel),.content ::slotted(calcite-flow){flex:1 1 auto;align-self:stretch;max-block-size:unset}.content--behind{position:absolute;inset:0px;border-width:0px;z-index:calc(var(--calcite-z-index) - 1);display:initial}.content--non-interactive{pointer-events:none;display:flex;block-size:100%;inline-size:100%;flex-direction:column;flex-wrap:nowrap}::slotted(calcite-shell-center-row){inline-size:unset}::slotted(.header .heading){font-size:var(--calcite-font-size--2);line-height:1.375;font-weight:var(--calcite-font-weight-normal)}slot[name=panel-start]::slotted(calcite-shell-panel),slot[name=panel-end]::slotted(calcite-shell-panel){position:relative;z-index:calc(var(--calcite-z-index) + 1)}slot[name=panel-end]::slotted(calcite-shell-panel){margin-inline-start:auto}::slotted(calcite-panel),::slotted(calcite-flow){border-width:1px;border-inline-start-width:0px;border-inline-end-width:0px;border-style:solid;border-color:var(--calcite-color-border-3)}slot[name=center-row]::slotted(calcite-shell-center-row:not([detached])),slot[name=panel-top]::slotted(calcite-shell-center-row:not([detached])),slot[name=panel-bottom]::slotted(calcite-shell-center-row:not([detached])){border-inline-start-width:1px;border-inline-end-width:1px;border-color:var(--calcite-color-border-3)}.center-content{display:flex;flex-direction:column;justify-content:space-between;block-size:100%;inline-size:100%;min-inline-size:0}.content-bottom{justify-content:flex-end}::slotted(calcite-shell-center-row){flex:none;align-self:stretch}::slotted(calcite-tip-manager){position:absolute;z-index:var(--calcite-z-index-toast);box-sizing:border-box}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}::slotted(calcite-tip-manager){animation:in-up var(--calcite-internal-animation-timing-slow) ease-in-out;border-radius:0.25rem;--tw-shadow:0 6px 20px -4px rgba(0, 0, 0, 0.1), 0 4px 12px -2px rgba(0, 0, 0, 0.08);--tw-shadow-colored:0 6px 20px -4px var(--tw-shadow-color), 0 4px 12px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);inset-block-end:0.5rem;inset-inline:var(--calcite-shell-tip-spacing)}slot[name=center-row]::slotted(calcite-shell-center-row),slot[name=panel-bottom]::slotted(calcite-shell-center-row){margin-block-start:auto}slot[name=panel-top]::slotted(calcite-shell-center-row){margin-block-end:auto}.position-wrapper{position:absolute;pointer-events:none;inset:0}:host([hidden]){display:none}[hidden]{display:none}",Y6e=J6e,X6e=ci(class extends li{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.handleHeaderSlotChange=e=>{this.hasHeader=!!xi(e)},this.handleFooterSlotChange=e=>{this.hasFooter=!!xi(e)},this.handleAlertsSlotChange=e=>{var i;this.hasAlerts=!!xi(e),(i=sl(e))==null||i.map(n=>{n.tagName==="CALCITE-ALERT"&&(n.embedded=!0)})},this.handleSheetsSlotChange=e=>{var i;this.hasSheets=!!xi(e),(i=sl(e))==null||i.map(n=>{n.tagName==="CALCITE-SHEET"&&(n.embedded=!0)})},this.handleModalsSlotChange=e=>{var i;this.hasModals=!!xi(e),(i=sl(e))==null||i.map(n=>{n.tagName==="CALCITE-MODAL"&&(n.embedded=!0)})},this.handlePanelTopChange=e=>{this.hasPanelTop=xi(e)},this.handlePanelBottomChange=e=>{this.hasPanelBottom=xi(e)},this.handleDialogsSlotChange=e=>{var i;this.hasDialogs=!!xi(e),(i=sl(e))==null||i.map(n=>{n.tagName==="CALCITE-DIALOG"&&(n.embedded=!0)})},this.contentBehind=!1,this.hasHeader=!1,this.hasFooter=!1,this.hasAlerts=!1,this.hasModals=!1,this.hasDialogs=!1,this.hasSheets=!1,this.hasPanelTop=!1,this.hasPanelBottom=!1,this.hasOnlyPanelBottom=!1,this.panelIsResizing=!1}handleCalciteInternalShellPanelResizeStart(e){this.panelIsResizing=!0,e.stopPropagation()}handleCalciteInternalShellPanelResizeEnd(e){this.panelIsResizing=!1,e.stopPropagation()}updateHasOnlyPanelBottom(){this.hasOnlyPanelBottom=!this.hasPanelTop&&this.hasPanelBottom}connectedCallback(){jq(this)}disconnectedCallback(){Gq(this)}renderHeader(){return X("div",{hidden:!this.hasHeader},X("slot",{key:"header",name:Lo.header,onSlotchange:this.handleHeaderSlotChange}))}renderFooter(){return X("div",{class:$a.footer,hidden:!this.hasFooter,key:"footer"},X("slot",{name:Lo.footer,onSlotchange:this.handleFooterSlotChange}))}renderAlerts(){return X("div",{hidden:!this.hasAlerts},X("slot",{key:"alerts",name:Lo.alerts,onSlotchange:this.handleAlertsSlotChange}))}renderSheets(){return X("div",{hidden:!this.hasSheets},X("slot",{key:"sheets",name:Lo.sheets,onSlotchange:this.handleSheetsSlotChange}))}renderModals(){return X("div",{hidden:!this.hasModals},X("slot",{key:"modals",name:Lo.modals,onSlotchange:this.handleModalsSlotChange}))}renderDialogs(){return X("div",{hidden:!this.hasDialogs},X("slot",{key:"dialogs",name:Lo.dialogs,onSlotchange:this.handleDialogsSlotChange}))}renderContent(){const{panelIsResizing:e}=this,i=X("slot",{key:"default-slot"}),n=e?X("div",{class:$a.contentNonInteractive},i):i,s=X("slot",{key:"center-row-slot",name:Lo.centerRow}),h=X("slot",{key:"panel-bottom-slot",name:Lo.panelBottom,onSlotchange:this.handlePanelBottomChange}),f=X("slot",{key:"panel-top-slot",name:Lo.panelTop,onSlotchange:this.handlePanelTopChange}),m="content-container";return this.contentBehind?[X("div",{class:{[$a.content]:!0,[$a.contentBehind]:!0},key:m},n),X("div",{class:{[$a.contentBehindCenterContent]:!0,[$a.contentBottom]:this.hasOnlyPanelBottom}},f,h,s)]:[X("div",{class:{[$a.content]:!0,[$a.contentBottom]:this.hasOnlyPanelBottom},key:m},f,n,h,s)]}renderMain(){return X("div",{class:$a.main},X("slot",{name:Lo.panelStart}),this.renderContent(),X("slot",{name:Lo.panelEnd}))}renderPositionedSlots(){return X("div",{class:$a.positionedSlotWrapper},this.renderAlerts(),this.renderModals(),this.renderDialogs(),this.renderSheets())}render(){return X(gM,{key:"6864b8b95b6edd871ad622b0d49a3f4a42a0a8a8"},this.renderHeader(),this.renderMain(),this.renderFooter(),this.renderPositionedSlots())}get el(){return this}static get watchers(){return{hasPanelTop:["updateHasOnlyPanelBottom"],hasPanelBottom:["updateHasOnlyPanelBottom"]}}static get style(){return Y6e}},[1,"calcite-shell",{contentBehind:[516,"content-behind"],hasHeader:[32],hasFooter:[32],hasAlerts:[32],hasModals:[32],hasDialogs:[32],hasSheets:[32],hasPanelTop:[32],hasPanelBottom:[32],hasOnlyPanelBottom:[32],panelIsResizing:[32]},[[0,"calciteInternalShellPanelResizeStart","handleCalciteInternalShellPanelResizeStart"],[0,"calciteInternalShellPanelResizeEnd","handleCalciteInternalShellPanelResizeEnd"]],{hasPanelTop:["updateHasOnlyPanelBottom"],hasPanelBottom:["updateHasOnlyPanelBottom"]}]);function Q6e(){if(typeof customElements>"u")return;["calcite-shell"].forEach(e=>{switch(e){case"calcite-shell":customElements.get(e)||customElements.define(e,X6e);break}})}Q6e();var eTe=ap('<main><calcite-shell><calcite-alert><div slot="message" name="alertMessage" id="alertMessage"></div> <div slot="title" name="alertTitle" id="alertTitle"></div></calcite-alert> <calcite-shell-panel><!> <!> <!></calcite-shell-panel> <calcite-panel><!></calcite-panel></calcite-shell></main>',2);function tTe(t,e){sp(e,!1);const i=I=>{const P=document.getElementById("copyAlert");P.setAttribute("icon","copy-to-clipboard"),P.setAttribute("kind","success"),document.getElementById("alertTitle").innerHTML="Copy value",document.getElementById("alertMessage").innerHTML=`${I.detail.label} <b>${I.detail.value}</b> copied to the clipboard`,P.open=!0};Vm();var n=eTe(),s=wt(n),h=wt(s);Ie(h,"id","copyAlert"),Ie(h,"auto-close",!0),Ie(h,"auto-close-duration","fast"),Ie(h,"placement","top");var f=zt(h,2);Ie(f,"slot","panel-end"),Ie(f,"position","end"),Ie(f,"id","shell-panel-start");var m=wt(f);BSe(m,{});var y=zt(m,2);QSe(y,{$$events:{"add-layer":i}});var x=zt(y,2);ywe(x,{$$events:{copy:i}});var E=zt(f,2),k=wt(E);pye(k,{}),Kh(t,n),op()}JG(location.href);qW(tTe,{target:document.getElementById("app")});export{Ct as $,c6e as A,ce as B,B6e as C,Zce as D,vEe as E,$r as F,k7e as G,li as H,Hve as I,zd as J,epe as K,Nke as L,nt as M,Dke as N,_q as O,D6e as P,ct as Q,Ai as R,R6e as S,Ir as T,pu as U,Ae as V,_ as W,S as X,J as Y,Ee as Z,ge as _,Vq as a,Mr as a$,Pe as a0,DE as a1,mt as a2,du as a3,Yi as a4,ht as a5,la as a6,lTe as a7,_e as a8,aK as a9,Te as aA,I5e as aB,Sl as aC,O5e as aD,RV as aE,Dc as aF,by as aG,wy as aH,D_ as aI,Zt as aJ,ty as aK,ts as aL,fp as aM,Oe as aN,w_e as aO,Xr as aP,Er as aQ,Ei as aR,Cn as aS,vt as aT,Cr as aU,xr as aV,c_ as aW,m0 as aX,vP as aY,bP as aZ,dr as a_,Oy as aa,X2 as ab,IEe as ac,oi as ad,OEe as ae,REe as af,NEe as ag,LM as ah,FN as ai,uT as aj,hr as ak,AEe as al,PEe as am,Ne as an,Tr as ao,I0 as ap,Ke as aq,Vi as ar,cOe as as,bj as at,gp as au,hu as av,Ww as aw,d0 as ax,jc as ay,at as az,H_ as b,KP as b$,COe as b0,l2 as b1,ROe as b2,sMe as b3,vi as b4,XH as b5,NOe as b6,Su as b7,fa as b8,LOe as b9,Ka as bA,fP as bB,mP as bC,yP as bD,sTe as bE,fC as bF,mC as bG,yC as bH,gC as bI,ki as bJ,Zi as bK,uK as bL,STe as bM,oIe as bN,_ie as bO,xie as bP,uD as bQ,xc as bR,loe as bS,mN as bT,X9e as bU,hq as bV,uq as bW,np as bX,Epe as bY,rz as bZ,es as b_,XS as ba,HT as bb,DOe as bc,BOe as bd,tV as be,e7 as bf,tm as bg,yz as bh,_u as bi,uG as bj,IOe as bk,OOe as bl,bz as bm,ia as bn,wn as bo,YM as bp,MY as bq,DT as br,zT as bs,$Y as bt,y3 as bu,v3 as bv,e6 as bw,vC as bx,yw as by,Op as bz,Or as c,xm as c$,Kt as c0,RC as c1,vw as c2,yIe as c3,u8e as c4,qae as c5,g8e as c6,m8e as c7,l8e as c8,ym as c9,g0 as cA,Kj as cB,cr as cC,ca as cD,vv as cE,yMe as cF,Cj as cG,xX as cH,an as cI,Od as cJ,XEe as cK,cp as cL,jTe as cM,Gh as cN,P3 as cO,Qr as cP,UMe as cQ,GMe as cR,au as cS,fse as cT,w8e as cU,Uz as cV,_8e as cW,qMe as cX,Qz as cY,s8e as cZ,sle as c_,dE as ca,or as cb,p3 as cc,ua as cd,f8e as ce,l9 as cf,Z7e as cg,zte as ch,_t as ci,RN as cj,RCe as ck,bfe as cl,de as cm,_H as cn,Doe as co,zoe as cp,sy as cq,LN as cr,YT as cs,DN as ct,NN as cu,mk as cv,a$e as cw,kP as cx,bIe as cy,$P as cz,Hq as d,g9 as d$,_m as d0,Eae as d1,o8e as d2,d8e as d3,p8e as d4,VMe as d5,HMe as d6,BMe as d7,gce as d8,Je as d9,tke as dA,Oc as dB,S3 as dC,Yd as dD,P7e as dE,JM as dF,Mu as dG,g8 as dH,Uie as dI,Kwe as dJ,Zwe as dK,O7e as dL,GM as dM,D3 as dN,un as dO,Jh as dP,rAe as dQ,Ns as dR,r8e as dS,Zr as dT,_K as dU,St as dV,$l as dW,vl as dX,kr as dY,ln as dZ,Ls as d_,Nt as da,xy as db,NS as dc,cy as dd,yEe as de,S$e as df,Zg as dg,cS as dh,ike as di,lp as dj,kt as dk,yt as dl,Jt as dm,A7e as dn,pEe as dp,Tc as dq,BN as dr,tz as ds,FJ as dt,AE as du,Y7e as dv,xn as dw,De as dx,dce as dy,RE as dz,z6e as e,xo as e$,Si as e0,f9 as e1,y9 as e2,G2 as e3,bD as e4,xG as e5,je as e6,Im as e7,bn as e8,mw as e9,coe as eA,Soe as eB,PAe as eC,hR as eD,l3 as eE,EE as eF,z3 as eG,bm as eH,DP as eI,ks as eJ,Yre as eK,CT as eL,Xre as eM,lM as eN,m3 as eO,gEe as eP,wEe as eQ,M7e as eR,YEe as eS,cB as eT,qme as eU,r$e as eV,q8e as eW,gMe as eX,FX as eY,xi as eZ,w2e as e_,TG as ea,SC as eb,fi as ec,fj as ed,e5 as ee,dy as ef,K4 as eg,bMe as eh,B8e as ei,c$e as ej,cu as ek,XD as el,dae as em,iAe as en,pm as eo,Pg as ep,Hx as eq,cfe as er,lP as es,Ug as et,q7 as eu,YMe as ev,a3 as ew,T8 as ex,r0 as ey,sD as ez,E6e as f,$d as f$,jq as f0,Ds as f1,So as f2,zs as f3,To as f4,Gq as f5,_o as f6,Al as f7,xB as f8,Uq as f9,Ze as fA,o$e as fB,nxe as fC,qR as fD,pce as fE,c8e as fF,up as fG,ry as fH,nu as fI,Kae as fJ,b8e as fK,Wae as fL,v8e as fM,Sr as fN,DX as fO,lo as fP,b3 as fQ,lT as fR,cT as fS,vTe as fT,BJ as fU,Qf as fV,AT as fW,vK as fX,rQ as fY,Q$e as fZ,FTe as f_,cn as fa,Ol as fb,Bq as fc,ebe as fd,tbe as fe,NM as ff,b_ as fg,Jve as fh,qB as fi,JSe as fj,YSe as fk,ya as fl,Nye as fm,Wve as fn,i9e as fo,yD as fp,eM as fq,OH as fr,eme as fs,yOe as ft,A5e as fu,c2 as fv,Sn as fw,Tpe as fx,sk as fy,TY as fz,w7 as g,Tve as g$,fl as g0,Rs as g1,mse as g2,e0 as g3,MIe as g4,Zhe as g5,y8e as g6,O0 as g7,i3e as g8,n3e as g9,hm as gA,ey as gB,hs as gC,cve as gD,Rm as gE,F6e as gF,Ji as gG,K6 as gH,yTe as gI,d$e as gJ,J8e as gK,u$e as gL,Bx as gM,I7e as gN,r_ as gO,s_ as gP,u3 as gQ,EK as gR,Wt as gS,MTe as gT,OSe as gU,PSe as gV,MB as gW,_s as gX,Qa as gY,bve as gZ,b6 as g_,pr as ga,vy as gb,OE as gc,F0 as gd,dpe as ge,ppe as gf,Wr as gg,XAe as gh,ZAe as gi,YAe as gj,Pc as gk,Wx as gl,A_ as gm,tAe as gn,U2 as go,ez as gp,jMe as gq,gi as gr,lMe as gs,Zie as gt,mMe as gu,oMe as gv,SH as gw,q2 as gx,ao as gy,Hi as gz,qe as h,dA as h$,kve as h0,Tu as h1,V0 as h2,EM as h3,x6 as h4,u_ as h5,MM as h6,Ot as h7,gH as h8,Lm as h9,F7e as hA,p0 as hB,dRe as hC,yH as hD,gz as hE,T$ as hF,XMe as hG,QMe as hH,ae as hI,Qse as hJ,Mie as hK,U3 as hL,W7e as hM,x_ as hN,Whe as hO,FAe as hP,HEe as hQ,xt as hR,MCe as hS,wf as hT,w3 as hU,cb as hV,q9 as hW,wMe as hX,iy as hY,x$e as hZ,AMe as h_,$M as ha,Fq as hb,kM as hc,zc as hd,Ml as he,Ec as hf,dx as hg,k5e as hh,C5e as hi,bu as hj,IV as hk,bp as hl,KAe as hm,RA as hn,_Oe as ho,bOe as hp,Qm as hq,QK as hr,M3e as hs,sK as ht,eRe as hu,dEe as hv,SEe as hw,Yr as hx,h3e as hy,l3e as hz,hn as i,z5e as i$,Es as i0,wie as i1,Ar as i2,$Ie as i3,yT as i4,oEe as i5,sEe as i6,yZ as i7,il as i8,pT as i9,mH as iA,ky as iB,W9e as iC,$y as iD,eV as iE,F8e as iF,z8e as iG,Ale as iH,x3 as iI,P0 as iJ,$_ as iK,yA as iL,Pi as iM,lO as iN,y0 as iO,Il as iP,d_ as iQ,cse as iR,ome as iS,xOe as iT,sse as iU,lr as iV,RMe as iW,wA as iX,R5e as iY,Xw as iZ,o5e as i_,Vj as ia,BS as ib,qj as ic,Eue as id,sM as ie,V7 as ig,Kb as ih,C5 as ii,iEe as ij,_C as ik,Ms as il,eY as im,ET as io,zX as ip,_pe as iq,wue as ir,sn as is,xue as it,Hj as iu,k_ as iv,k0 as iw,ur as ix,Ym as iy,Ri as iz,gAe as j,D6 as j$,Ni as j0,vOe as j1,vu as j2,Oue as j3,iMe as j4,vue as j5,w8 as j6,T9 as j7,RT as j8,NT as j9,eke as jA,ij as jB,nke as jC,rke as jD,da as jE,c0 as jF,ene as jG,Sb as jH,_Ee as jI,fT as jJ,J7e as jK,su as jL,_n as jM,wTe as jN,_Me as jO,Pf as jP,KJ as jQ,gl as jR,ZB as jS,sl as jT,WC as jU,Ln as jV,mE as jW,iE as jX,RH as jY,U6 as jZ,j6 as j_,Ii as ja,f7 as jb,EPe as jc,h_e as jd,mz as je,JS as jf,vz as jg,Kse as jh,tMe as ji,LEe as jj,xY as jk,Rg as jl,uTe as jm,r4e as jn,YS as jo,kn as jp,t7 as jq,I_e as jr,U_e as js,lae as jt,aae as ju,eae as jv,Y$ as jw,Cc as jx,one as jy,B3 as jz,Ix as k,O$e as k$,GV as k0,pa as k1,Sx as k2,LPe as k3,Oxe as k4,K3 as k5,xwe as k6,B9e as k7,V9e as k8,cq as k9,bie as kA,l4e as kB,MOe as kC,hpe as kD,Ipe as kE,pw as kF,Iue as kG,Tue as kH,SY as kI,dD as kJ,upe as kK,cG as kL,FT as kM,yie as kN,R0 as kO,Ge as kP,pC as kQ,hke as kR,FC as kS,dC as kT,CTe as kU,uJ as kV,mJ as kW,bJ as kX,Kr as kY,Ci as kZ,I$e as k_,zAe as ka,q9e as kb,H9e as kc,qxe as kd,Zge as ke,_2 as kf,LY as kg,Gn as kh,is as ki,re as kj,Qe as kk,jT as kl,Ps as km,UOe as kn,g_e as ko,z3e as kp,f_e as kq,QH as kr,zOe as ks,nV as kt,GOe as ku,Py as kv,L_e as kw,H0 as kx,p_e as ky,r_e as kz,fO as l,kIe as l$,C7e as l0,nae as l1,Y3 as l2,Z3 as l3,X3 as l4,J3 as l5,j0 as l6,_le as l7,my as l8,Q3 as l9,TR as lA,rne as lB,gge as lC,mT as lD,tf as lE,fc as lF,vT as lG,CP as lH,Ss as lI,O9 as lJ,vD as lK,ske as lL,uC as lM,fCe as lN,gCe as lO,wCe as lP,_Ce as lQ,mCe as lR,yCe as lS,vCe as lT,bCe as lU,uae as lV,lg as lW,FF as lX,h8e as lY,C$e as lZ,OMe as l_,qE as la,yy as lb,k$e as lc,mTe as ld,t6 as le,Yg as lf,zj as lg,CE as lh,TTe as li,dTe as lj,lZ as lk,$s as ll,ei as lm,AAe as ln,vA as lo,sme as lp,io as lq,yQ as lr,WEe as ls,uN as lt,pi as lu,s3e as lv,Q2 as lw,Hb as lx,CZ as ly,vm as lz,bo as m,vIe as m$,GN as m0,Ad as m1,uz as m2,BT as m3,dX as m4,rxe as m5,wN as m6,UX as m7,jE as m8,V8e as m9,Xfe as mA,Qfe as mB,p6 as mC,nAe as mD,wq as mE,wm as mF,nb as mG,X3e as mH,Cie as mI,She as mJ,HH as mK,Dw as mL,mbe as mM,WB as mN,gbe as mO,nbe as mP,vbe as mQ,zw as mR,pMe as mS,QP as mT,KTe as mU,WTe as mV,dZ as mW,eR as mX,hTe as mY,hK as mZ,hMe as m_,U8e as ma,MH as mb,Zue as mc,Jue as md,lK as me,ahe as mf,hG as mg,A_e as mh,lOe as mi,Rt as mj,tZ as mk,GTe as ml,TPe as mm,Ay as mn,VM as mo,Wo as mp,Yf as mq,Cl as mr,$Ee as ms,cX as mt,mX as mu,ny as mv,UEe as mw,Mf as mx,Xd as my,Jfe as mz,b6e as n,k4e as n$,U as n0,MEe as n1,Km as n2,mAe as n3,gM as n4,hwe as n5,kRe as n6,F2e as n7,Y2e as n8,q2e as n9,CCe as nA,vfe as nB,PH as nC,mp as nD,wOe as nE,Swe as nF,MMe as nG,EMe as nH,Ewe as nI,w_ as nJ,_l as nK,mV as nL,yi as nM,VOe as nN,P5e as nO,Qw as nP,Gc as nQ,Rc as nR,sa as nS,YE as nT,qOe as nU,N5e as nV,fTe as nW,gTe as nX,pTe as nY,hp as nZ,GJ as n_,twe as na,oO as nb,CRe as nc,fE as nd,k0e as ne,HD as nf,dK as ng,fEe as nh,MJ as ni,g3 as nj,xEe as nk,Pfe as nl,i6 as nm,rIe as nn,wC as no,ho as np,_G as nq,gc as nr,bC as ns,sIe as nt,hC as nu,$X as nv,MX as nw,gw as nx,$Ce as ny,kCe as nz,kc as o,t3e as o$,fd as o0,F_ as o1,zPe as o2,qM as o3,$$e as o4,ON as o5,KEe as o6,Xm as o7,yF as o8,nG as o9,mPe as oA,jV as oB,sRe as oC,zCe as oD,Tj as oE,Uj as oF,Mm as oG,t_ as oH,hw as oI,JE as oJ,U0 as oK,QTe as oL,Ac as oM,bwe as oN,IAe as oO,Twe as oP,NAe as oQ,cA as oR,on as oS,RAe as oT,CAe as oU,oN as oV,DEe as oW,yu as oX,FOe as oY,ou as oZ,e3e as o_,Afe as oa,nMe as ob,Pl as oc,DV as od,Tq as oe,Cf as of,GD as og,dle as oh,X7e as oi,JAe as oj,dz as ok,VE as ol,MF as om,Yle as on,G0 as oo,R1 as op,Fde as oq,toe as or,a_e as os,Wse as ot,Zse as ou,j_ as ov,EH as ow,pt as ox,JPe as oy,KPe as oz,ci as p,OZ as p$,gP as p0,AR as p1,uEe as p2,WR as p3,o8 as p4,iz as p5,b0e as p6,TEe as p7,Ute as p8,bce as p9,n_ as pA,U$ as pB,g$e as pC,p$e as pD,m4e as pE,u_e as pF,s4e as pG,__e as pH,lxe as pI,qEe as pJ,VEe as pK,tne as pL,K3e as pM,Xse as pN,Jse as pO,Yse as pP,py as pQ,fy as pR,gy as pS,Z0 as pT,xC as pU,nIe as pV,Ofe as pW,$C as pX,MC as pY,K7e as pZ,uu as p_,BF as pa,vce as pb,rMe as pc,_ue as pd,wj as pe,Is as pf,QEe as pg,IE as ph,mEe as pi,WP as pj,Jf as pk,G8e as pl,j8e as pm,kT as pn,sxe as po,hoe as pp,aoe as pq,mpe as pr,ooe as ps,Nle as pt,SPe as pu,TP as pv,rTe as pw,Sj as px,$he as py,XE as pz,ll as q,eue as q$,H3 as q0,Mue as q1,wd as q2,_r as q3,Fd as q4,nTe as q5,rK as q6,iTe as q7,kOe as q8,$_e as q9,aRe as qA,u2 as qB,oRe as qC,EOe as qD,uhe as qE,dhe as qF,bxe as qG,Txe as qH,Mxe as qI,$xe as qJ,GS as qK,km as qL,Hue as qM,Q5e as qN,X5e as qO,T$e as qP,E$e as qQ,M$e as qR,wM as qS,ECe as qT,NC as qU,hCe as qV,age as qW,na as qX,a_ as qY,Lj as qZ,Fj as q_,$Oe as qa,Z8e as qb,K8e as qc,aIe as qd,J9 as qe,$0e as qf,x8e as qg,$w as qh,vI as qi,ZIe as qj,Ure as qk,cF as ql,ipe as qm,OQ as qn,EEe as qo,u3e as qp,f3e as qq,M_ as qr,GAe as qs,LAe as qt,HPe as qu,M4e as qv,$4e as qw,T4e as qx,E4e as qy,B_ as qz,X as r,cZ as r$,uke as r0,cue as r1,dke as r2,Use as r3,U7e as r4,yl as r5,vae as r6,WCe as r7,bG as r8,uMe as r9,aCe as rA,Ts as rB,a8e as rC,e8e as rD,i8e as rE,t8e as rF,n8e as rG,gIe as rH,P7 as rI,Q7e as rJ,jR as rK,PT as rL,w9 as rM,F2 as rN,_9 as rO,j2 as rP,WMe as rQ,xl as rR,T3 as rS,QAe as rT,Kge as rU,sge as rV,JF as rW,YP as rX,zY as rY,kEe as rZ,CEe as r_,h$e as ra,HOe as rb,wu as rc,TOe as rd,BEe as re,ZCe as rf,KCe as rg,lCe as rh,cCe as ri,el as rj,A$e as rk,bK as rl,P$e as rm,M9 as rn,pCe as ro,khe as rp,jC as rq,kG as rr,BCe as rs,HCe as rt,VCe as ru,qCe as rv,ACe as rw,PCe as rx,OCe as ry,Yfe as rz,vo as s,aF as s$,X4e as s0,R7e as s1,C0e as s2,UAe as s3,Cm as s4,iN as s5,B2 as s6,FY as s7,o_e as s8,mIe as s9,jCe as sA,JCe as sB,YCe as sC,xCe as sD,XCe as sE,QCe as sF,yfe as sG,_fe as sH,UG as sI,Xf as sJ,UCe as sK,bEe as sL,$ue as sM,jEe as sN,RZ as sO,hv as sP,s7e as sQ,th as sR,Xg as sS,ole as sT,rle as sU,Sm as sV,Em as sW,_Te as sX,Qge as sY,uy as sZ,oF as s_,uce as sa,sF as sb,qTe as sc,W7 as sd,ile as se,zEe as sf,FEe as sg,bX as sh,vMe as si,VX as sj,ZEe as sk,_X as sl,JEe as sm,yue as sn,ICe as so,aMe as sp,FCe as sq,oa as sr,DCe as ss,LCe as st,Nfe as su,NCe as sv,DC as sw,uCe as sx,dCe as sy,GCe as sz,Xo as t,Z3e as t$,vU as t0,Z5e as t1,xI as t2,jU as t3,uIe as t4,dIe as t5,pIe as t6,Kfe as t7,$G as t8,SCe as t9,i$e as tA,n$e as tB,Moe as tC,Eoe as tD,Cpe as tE,XPe as tF,Br as tG,YD as tH,G6 as tI,go as tJ,H5e as tK,eOe as tL,lhe as tM,tOe as tN,ut as tO,nl as tP,N7e as tQ,hxe as tR,HAe as tS,aTe as tT,FH as tU,BH as tV,S0 as tW,doe as tX,Toe as tY,jS as tZ,GH as t_,TCe as ta,Vfe as tb,fIe as tc,oCe as td,fMe as te,bN as tf,eIe as tg,tIe as th,Y3e as ti,moe as tj,vj as tk,aD as tl,XP as tm,goe as tn,E_e as to,DMe as tp,KR as tq,CQ as tr,gPe as ts,fPe as tt,cC as tu,C9 as tv,Aue as tw,oD as tx,Fn as ty,nY as tz,dn as u,Hse as u$,eN as u0,kH as u1,L5e as u2,Ple as u3,c3e as u4,WAe as u5,AP as u6,ETe as u7,p3e as u8,t$e as u9,Xce as uA,oke as uB,qAe as uC,DAe as uD,l$e as uE,Q8e as uF,Y8e as uG,xTe as uH,w$e as uI,b$e as uJ,cTe as uK,W8e as uL,cMe as uM,s$e as uN,Ire as uO,dw as uP,zde as uQ,iG as uR,XTe as uS,Hv as uT,A$ as uU,j7e as uV,MPe as uW,POe as uX,Efe as uY,fpe as uZ,X8e as u_,Rxe as ua,UPe as ub,NPe as uc,GPe as ud,Mk as ue,noe as uf,eoe as ug,qw as uh,jPe as ui,v3e as uj,Qt as uk,DPe as ul,FPe as um,BM as un,OAe as uo,F6 as up,Exe as uq,l_e as ur,Vw as us,Qh as ut,$k as uu,Lxe as uv,Ek as uw,BPe as ux,uoe as uy,mq as uz,wo as v,H8e as v0,Sf as v1,xPe as v2,f0 as v3,she as v4,eMe as v5,mhe as v6,cj as v7,Ole as v8,AOe as v9,UTe as va,z7e as vb,uOe as vc,y3e as vd,hOe as ve,dOe as vf,yo as vg,D7e as vh,SOe as vi,pxe as vj,L7e as vk,dMe as vl,UM as vm,vE as vn,e$e as vo,e7e as vp,i7e as vq,wIe as vr,R2e as vs,iRe as vt,vRe as vu,wRe as vv,SRe as vw,ERe as vx,xM as w,w6e as x,Eu as y,ZE as z};
