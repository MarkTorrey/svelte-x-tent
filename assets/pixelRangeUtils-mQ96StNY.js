const E=9999999e31,L=2e-7,S={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-34028234663852886e22,34028234663852886e22],f64:[-Number.MAX_VALUE,Number.MAX_VALUE],unknown:void 0,c64:void 0,c128:void 0};function V(e){return S[e]??[-34028234663852886e22,34028234663852886e22]}function v(e,f,b){var p,M;if(e.depthCount&&e.depthCount>1)return;const{pixels:m,statistics:i,pixelType:a}=e,k=m[0].length,d=e.bandMasks??[],c=e.mask??new Uint8Array(k).fill(255),g=a==="f32"||a==="f64",h=V(a);let r=!1;for(let s=0;s<m.length;s++){const n=typeof f=="number"?f:f[s];if(n==null)continue;const x=((p=i==null?void 0:i[s])==null?void 0:p.minValue)??h[0],A=((M=i==null?void 0:i[s])==null?void 0:M.maxValue)??h[1];if(x>n+Number.EPSILON||A<n-Number.EPSILON)continue;const l=d[s]||c.slice(),o=m[s],N=b==null?void 0:b.customFloatTolerance;if(g&&N!==0){let t=N;t||(t=Math.abs(n)>=E?L*Math.abs(n):a==="f32"?2**-23:Number.EPSILON);for(let u=0;u<o.length;u++)l[u]&&Math.abs(o[u]-n)<t&&(o[u]=0,l[u]=0,c[u]=0,r=!0)}else for(let t=0;t<o.length;t++)l[t]&&o[t]===n&&(o[t]=0,l[t]=0,c[t]=0,r=!0);d[s]=l}r&&(e.bandMasks=e.bandMasks||e.pixels.length>1?d:null,e.mask=c),r&&"updateStatistics"in e&&e.updateStatistics()}export{V as s,v as u};
