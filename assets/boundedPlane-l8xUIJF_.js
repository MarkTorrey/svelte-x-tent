import{k as an,cM as w,cN as V,cA as j,cB as _,cO as rn,cC as u,cP as cn,cQ as Y,cG as f,cE as a,cH as d,cR as P,cS as un,cT as gn,cU as bn,cV as I,cW as ln,cX as fn,cY as dn,cF as h,cZ as pn,c_ as $n,c$ as Q,d0 as hn,cD as B,d1 as N,d2 as x,d3 as In,d4 as mn,d5 as $,d6 as T,d7 as Pn,d8 as Nn,d9 as O,da as k,cI as q,cz as M,db as W}from"./index-eSY5-lt-.js";import{v as Mn,d as D,M as Tn}from"./lineSegment-EzA48HN-.js";const E=an.getLogger("esri.views.3d.support.geometryUtils.boundedPlane");class vn{constructor(){this.plane=w(),this.origin=M(),this.basis1=M(),this.basis2=M()}}const wn=vn;function m(n=en){return{plane:w(n.plane),origin:_(n.origin),basis1:_(n.basis1),basis2:_(n.basis2)}}function Sn(n,s,i){const t=Gn.get();return t.origin=n,t.basis1=s,t.basis2=i,t.plane=rn(0,0,0,0),A(t),t}function S(n,s=m()){return X(n.origin,n.basis1,n.basis2,s)}function An(n,s){u(s.origin,n.origin),u(s.basis1,n.basis1),u(s.basis2,n.basis2),cn(s.plane,n.plane)}function X(n,s,i,t=m()){return u(t.origin,n),u(t.basis1,s),u(t.basis2,i),A(t),zn(t,"fromValues()"),t}function A(n){Y(n.basis2,n.basis1,n.origin,n.plane)}function Z(n,s,i){n!==i&&S(n,i);const t=f(a.get(),l(n),s);return d(i.origin,i.origin,t),i.plane[3]-=s,i}function yn(n,s,i){return L(s,i),Z(i,C(n,n.origin),i),i}function L(n,s=m()){const i=(n[2]-n[0])/2,t=(n[3]-n[1])/2;return P(s.origin,n[0]+i,n[1]+t,0),P(s.basis1,i,0,0),P(s.basis2,0,t,0),un(0,0,1,0,s.plane),s}function U(n,s,i){return!!gn(n.plane,s,i)&&tn(n,i)}function Vn(n,s,i){if(U(n,s,i))return i;const t=J(n,s,a.get());return d(i,s.origin,f(a.get(),s.direction,bn(s.origin,t)/I(s.direction))),i}function J(n,s,i){const t=v.get();on(n,s,t,v.get());let o=Number.POSITIVE_INFINITY;for(const e of R){const r=G(n,e,y.get()),g=a.get();if(ln(t,r,g)){const c=fn(a.get(),s.origin,g),b=Math.abs(dn(h(s.direction,c)));b<o&&(o=b,u(i,g))}}return o===Number.POSITIVE_INFINITY?K(n,s,i):i}function K(n,s,i){if(U(n,s,i))return i;const t=v.get(),o=v.get();on(n,s,t,o);let e=Number.POSITIVE_INFINITY;for(const r of R){const g=G(n,r,y.get()),c=a.get();if(pn(t,g,c)){const b=$n(s,c);if(!Q(o,c))continue;b<e&&(e=b,u(i,c))}}return z(n,s.origin)<e&&nn(n,s.origin,i),i}function nn(n,s,i){const t=hn(n.plane,s,a.get()),o=D(H(n,n.basis1),t,-1,1,a.get()),e=D(H(n,n.basis2),t,-1,1,a.get());return B(i,d(a.get(),o,e),n.origin),i}function sn(n,s,i){const{origin:t,basis1:o,basis2:e}=n,r=B(a.get(),s,t),g=N(o,r),c=N(e,r),b=N(l(n),r);return P(i,g,c,b)}function z(n,s){const i=sn(n,s,a.get()),{basis1:t,basis2:o}=n,e=I(t),r=I(o),g=Math.max(Math.abs(i[0])-e,0),c=Math.max(Math.abs(i[1])-r,0),b=i[2];return g*g+c*c+b*b}function _n(n,s){return Math.sqrt(z(n,s))}function xn(n,s){let i=Number.NEGATIVE_INFINITY;for(const t of R){const o=G(n,t,y.get()),e=Tn(o,s);e>i&&(i=e)}return Math.sqrt(i)}function On(n,s){return Q(n.plane,s)&&tn(n,s)}function En(n,s,i,t){return Un(n,i,t)}function C(n,s){const i=-n.plane[3];return N(l(n),s)-i}function Fn(n,s,i,t){const o=C(n,s),e=f(Cn,l(n),i-o);return d(t,s,e),t}function Yn(n,s){return x(n.basis1,s.basis1)&&x(n.basis2,s.basis2)&&x(n.origin,s.origin)}function jn(n,s,i){return n!==i&&S(n,i),In(p,s),mn(p,p),$(i.basis1,n.basis1,p),$(i.basis2,n.basis2,p),$(T(i.plane),T(n.plane),p),$(i.origin,n.origin,s),Pn(i.plane,i.plane,i.origin),i}function Bn(n,s,i,t){return n!==t&&S(n,t),Nn(F,s,i),$(t.basis1,n.basis1,F),$(t.basis2,n.basis2,F),A(t),t}function l(n){return T(n.plane)}function Un(n,s,i){switch(s){case O.X:u(i,n.basis1),k(i,i);break;case O.Y:u(i,n.basis2),k(i,i);break;case O.Z:u(i,l(n))}return i}function tn(n,s){const i=B(a.get(),s,n.origin),t=q(n.basis1),o=q(n.basis2),e=h(n.basis1,i),r=h(n.basis2,i);return-e-t<0&&e-t<0&&-r-o<0&&r-o<0}function H(n,s){const i=y.get();return u(i.origin,n.origin),u(i.vector,s),i}function G(n,s,i){const{basis1:t,basis2:o,origin:e}=n,r=f(a.get(),t,s.origin[0]),g=f(a.get(),o,s.origin[1]);d(i.origin,r,g),d(i.origin,i.origin,e);const c=f(a.get(),t,s.direction[0]),b=f(a.get(),o,s.direction[1]);return f(i.vector,d(c,c,b),2),i}function zn(n,s){Math.abs(h(n.basis1,n.basis2)/(I(n.basis1)*I(n.basis2)))>1e-6&&E.warn(s,"Provided basis vectors are not perpendicular"),Math.abs(h(n.basis1,l(n)))>1e-6&&E.warn(s,"Basis vectors and plane normal are not perpendicular"),Math.abs(-h(l(n),n.origin)-n.plane[3])>1e-6&&E.warn(s,"Plane offset is not consistent with plane origin")}function on(n,s,i,t){const o=l(n);Y(o,s.direction,s.origin,i),Y(T(i),o,s.origin,t)}const en={plane:w(),origin:V(0,0,0),basis1:V(1,0,0),basis2:V(0,1,0)},v=new j(w),y=new j(Mn),Cn=M(),Gn=new j(()=>m()),R=[{origin:[-1,-1],direction:[1,0]},{origin:[1,-1],direction:[0,1]},{origin:[1,1],direction:[-1,0]},{origin:[-1,1],direction:[0,-1]}],p=W(),F=W();Object.freeze(Object.defineProperty({__proto__:null,BoundedPlaneClass:wn,altitudeAt:C,axisAt:En,closestPoint:K,closestPointOnSilhouette:J,copy:S,copyWithoutVerify:An,create:m,distance:_n,distance2:z,distanceToSilhouette:xn,elevate:Z,equals:Yn,extrusionContainsPoint:On,fromAABoundingRect:L,fromValues:X,intersectRay:U,intersectRayClosestSilhouette:Vn,normal:l,projectPoint:nn,projectPointLocal:sn,rotate:Bn,setAltitudeAt:Fn,setExtent:yn,transform:jn,up:en,updateUnboundedPlane:A,wrap:Sn},Symbol.toStringTag,{value:"Module"}));export{L as $,A as J,m as W,S as Z,_n as a};
