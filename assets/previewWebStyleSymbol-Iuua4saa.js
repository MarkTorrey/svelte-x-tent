import{O as h,aJ as s}from"./index-eSY5-lt-.js";import{t as l}from"./symbolUtils-5r1IAQ7f.js";import{N as u}from"./utils-NbMqmVX1.js";import"./ColorStop-y1faJUUg.js";import"./utils-ogjc0K8k.js";import"./jsonUtils-M3inctU9.js";import"./UniqueValueRenderer-hljh8Sos.js";import"./LegendOptions-x-5oaDqO.js";import"./diffUtils-x5OXhJZZ.js";import"./SizeVariable-221gAT5i.js";import"./colorRamps-rojoPCoV.js";import"./jsonUtils-1IxKPsH1.js";import"./styleUtils-BMYfqyTs.js";import"./DictionaryLoader-W3_-N3pK.js";import"./LRUCache-mFQSPLKh.js";import"./Version-DuGO31mq.js";import"./FieldsIndex-_W1Us-oq.js";import"./UnknownTimeZone-iVS1S_Kf.js";import"./heatmapUtils-QdzYLNxE.js";import"./colorUtils-d-fcXxMg.js";import"./webStyleSymbolUtils-kjfVwPY4.js";import"./devEnvironmentUtils-3qgG8Z2w.js";import"./cimSymbolUtils-i5s4LTBQ.js";import"./utils-jQLeeGOF.js";function D(i,t,o){const m=i.thumbnail&&i.thumbnail.url;return m?h(m,{responseType:"image"}).then(r=>{const e=d(r.data,o);return o!=null&&o.node?(o.node.appendChild(e),o.node):e}):u(i).then(r=>r?t(r,o):null)}function d(i,t){const o=!/\\.svg$/i.test(i.src)&&t&&t.disableUpsampling,m=Math.max(i.width,i.height);let r=(t==null?void 0:t.maxSize)!=null?s(t.maxSize):l.maxSize;o&&(r=Math.min(m,r));const e=typeof(t==null?void 0:t.size)=="number"?t==null?void 0:t.size:null,p=Math.min(r,e!=null?s(e):m);if(p!==m){const a=i.width!==0&&i.height!==0?i.width/i.height:1;a>=1?(i.width=p,i.height=p/a):(i.width=p*a,i.height=p)}return i}export{D as previewWebStyleSymbol};
